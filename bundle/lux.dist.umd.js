(function(Ot,Mi){typeof exports=="object"&&typeof module<"u"?Mi(exports,require("ol/proj"),require("ol/proj/proj4"),require("ol/Map"),require("ol/View"),require("ol/layer/Image"),require("ol/source/ImageWMS"),require("ol/layer/Tile"),require("ol/source/WMTS"),require("ol/tilegrid/WMTS"),require("ol/extent"),require("ol/layer/Layer"),require("ol/math"),require("ol/proj.js"),require("ol/events"),require("ol/ObjectEventType"),require("ol/css"),require("ol/control/Control"),require("ol/control/FullScreen"),require("ol/control/Zoom"),require("ol/control/ZoomToExtent"),require("ol/format/WMTSCapabilities.js"),require("ol/render"),require("ol/Observable"),require("ol/render/EventType"),require("ol/layer/Group.js")):typeof define=="function"&&define.amd?define(["exports","ol/proj","ol/proj/proj4","ol/Map","ol/View","ol/layer/Image","ol/source/ImageWMS","ol/layer/Tile","ol/source/WMTS","ol/tilegrid/WMTS","ol/extent","ol/layer/Layer","ol/math","ol/proj.js","ol/events","ol/ObjectEventType","ol/css","ol/control/Control","ol/control/FullScreen","ol/control/Zoom","ol/control/ZoomToExtent","ol/format/WMTSCapabilities.js","ol/render","ol/Observable","ol/render/EventType","ol/layer/Group.js"],Mi):(Ot=typeof globalThis<"u"?globalThis:Ot||self,Mi(Ot["luxembourg-geoportail"]={},Ot.proj,Ot.proj4$1,Ot.OlMap,Ot.OlView,Ot.ImageLayer,Ot.ImageWMS,Ot.TileLayer,Ot.WmtsSource,Ot.WmtsTileGrid,Ot.extent,Ot.Layer,Ot.math,Ot.proj_js,Ot.olEvents,Ot.ObjectEventType,Ot.css$1,Ot.Control,Ot.FullScreen,Ot.Zoom,Ot.OlControlZoomToExtent,Ot.WMTSCapabilities,Ot.render$1,Ot.Observable,Ot.EventType,Ot.olLayerGroup))})(this,function(Ot,Mi,Ku,sO,lO,uO,cO,hO,fO,pO,dO,mO,yO,gO,vO,_O,um,xO,bO,wO,EO,SO,cm,TO,MO,IO){"use strict";var n7=Object.defineProperty;var i7=(Ot,Mi,Ku)=>Mi in Ot?n7(Ot,Mi,{enumerable:!0,configurable:!0,writable:!0,value:Ku}):Ot[Mi]=Ku;var Ti=(Ot,Mi,Ku)=>(i7(Ot,typeof Mi!="symbol"?Mi+"":Mi,Ku),Ku);const uo=t=>t&&typeof t=="object"&&"default"in t?t:{default:t};function OO(t){if(t&&t.__esModule)return t;const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}function CO(t,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in t)){const h=Object.getOwnPropertyDescriptor(o,s);h&&Object.defineProperty(t,s,h.get?h:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const AO=uo(sO),PO=uo(lO),kO=uo(uO),bx=uo(cO),LO=uo(hO),wx=uo(fO),DO=uo(pO),NO=uo(mO),Ex=OO(vO),RO=uo(_O),Sx=uo(xO),zO=uo(bO),FO=uo(wO),BO=uo(EO),VO=uo(SO),Tx=uo(MO),UO=uo(IO);function Jl(t,e){const n=Object.create(null),o=t.split(",");for(let s=0;s<o.length;s++)n[o[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}function Ql(t){if(tr(t)){const e={};for(let n=0;n<t.length;n++){const o=t[n],s=jn(o)?qO(o):Ql(o);if(s)for(const h in s)e[h]=s[h]}return e}else{if(jn(t))return t;if(sn(t))return t}}const jO=/;(?![^(]*\))/g,GO=/:([^]+)/,$O=/\/\*.*?\*\//gs;function qO(t){const e={};return t.replace($O,"").split(jO).forEach(n=>{if(n){const o=n.split(GO);o.length>1&&(e[o[0].trim()]=o[1].trim())}}),e}function Pr(t){let e="";if(jn(t))e=t;else if(tr(t))for(let n=0;n<t.length;n++){const o=Pr(t[n]);o&&(e+=o+" ")}else if(sn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const WO="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",HO="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",ZO=Jl(WO),XO=Jl(HO),KO=Jl("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Mx(t){return!!t||t===""}const jt=t=>jn(t)?t:t==null?"":tr(t)||sn(t)&&(t.toString===Ax||!dr(t.toString))?JSON.stringify(t,Ix,2):String(t),Ix=(t,e)=>e&&e.__v_isRef?Ix(t,e.value):Yu(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[o,s])=>(n[`${o} =>`]=s,n),{})}:Cx(e)?{[`Set(${e.size})`]:[...e.values()]}:sn(e)&&!tr(e)&&!Px(e)?String(e):e,wn=process.env.NODE_ENV!=="production"?Object.freeze({}):{},fh=process.env.NODE_ENV!=="production"?Object.freeze([]):[],Qi=()=>{},Ox=()=>!1,YO=/^on[^a-z]/,Zf=t=>YO.test(t),hm=t=>t.startsWith("onUpdate:"),Un=Object.assign,Uv=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},JO=Object.prototype.hasOwnProperty,Ur=(t,e)=>JO.call(t,e),tr=Array.isArray,Yu=t=>fm(t)==="[object Map]",Cx=t=>fm(t)==="[object Set]",dr=t=>typeof t=="function",jn=t=>typeof t=="string",jv=t=>typeof t=="symbol",sn=t=>t!==null&&typeof t=="object",Gv=t=>sn(t)&&dr(t.then)&&dr(t.catch),Ax=Object.prototype.toString,fm=t=>Ax.call(t),$v=t=>fm(t).slice(8,-1),Px=t=>fm(t)==="[object Object]",qv=t=>jn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,pm=Jl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),QO=Jl("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),dm=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},eC=/-(\w)/g,aa=dm(t=>t.replace(eC,(e,n)=>n?n.toUpperCase():"")),tC=/\B([A-Z])/g,$o=dm(t=>t.replace(tC,"-$1").toLowerCase()),Ju=dm(t=>t.charAt(0).toUpperCase()+t.slice(1)),Qu=dm(t=>t?`on${Ju(t)}`:""),Xf=(t,e)=>!Object.is(t,e),Kf=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},mm=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},rC=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Wv=t=>{const e=jn(t)?Number(t):NaN;return isNaN(e)?t:e};let kx;const Lx=()=>kx||(kx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ym(t,...e){console.warn(`[Vue warn] ${t}`,...e)}let sa;class Dx{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=sa,!e&&sa&&(this.index=(sa.scopes||(sa.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=sa;try{return sa=this,e()}finally{sa=n}}else process.env.NODE_ENV!=="production"&&ym("cannot run an inactive effect scope.")}on(){sa=this}off(){sa=this.parent}stop(e){if(this._active){let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Nx(t){return new Dx(t)}function nC(t,e=sa){e&&e.active&&e.effects.push(t)}function Rx(){return sa}function iC(t){sa?sa.cleanups.push(t):process.env.NODE_ENV!=="production"&&ym("onScopeDispose() is called when there is no active effect scope to be associated with.")}const Yf=t=>{const e=new Set(t);return e.w=0,e.n=0,e},zx=t=>(t.w&eu)>0,Fx=t=>(t.n&eu)>0,oC=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=eu},aC=t=>{const{deps:e}=t;if(e.length){let n=0;for(let o=0;o<e.length;o++){const s=e[o];zx(s)&&!Fx(s)?s.delete(t):e[n++]=s,s.w&=~eu,s.n&=~eu}e.length=n}},gm=new WeakMap;let Jf=0,eu=1;const Hv=30;let Oo;const ec=Symbol(process.env.NODE_ENV!=="production"?"iterate":""),Zv=Symbol(process.env.NODE_ENV!=="production"?"Map key iterate":"");class Xv{constructor(e,n=null,o){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,nC(this,o)}run(){if(!this.active)return this.fn();let e=Oo,n=tu;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Oo,Oo=this,tu=!0,eu=1<<++Jf,Jf<=Hv?oC(this):Bx(this),this.fn()}finally{Jf<=Hv&&aC(this),eu=1<<--Jf,Oo=this.parent,tu=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Oo===this?this.deferStop=!0:this.active&&(Bx(this),this.onStop&&this.onStop(),this.active=!1)}}function Bx(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let tu=!0;const Vx=[];function tc(){Vx.push(tu),tu=!1}function rc(){const t=Vx.pop();tu=t===void 0?!0:t}function Co(t,e,n){if(tu&&Oo){let o=gm.get(t);o||gm.set(t,o=new Map);let s=o.get(n);s||o.set(n,s=Yf());const h=process.env.NODE_ENV!=="production"?{effect:Oo,target:t,type:e,key:n}:void 0;Kv(s,h)}}function Kv(t,e){let n=!1;Jf<=Hv?Fx(t)||(t.n|=eu,n=!zx(t)):n=!t.has(Oo),n&&(t.add(Oo),Oo.deps.push(t),process.env.NODE_ENV!=="production"&&Oo.onTrack&&Oo.onTrack(Object.assign({effect:Oo},e)))}function ll(t,e,n,o,s,h){const a=gm.get(t);if(!a)return;let m=[];if(e==="clear")m=[...a.values()];else if(n==="length"&&tr(t)){const b=Number(o);a.forEach((T,M)=>{(M==="length"||M>=b)&&m.push(T)})}else switch(n!==void 0&&m.push(a.get(n)),e){case"add":tr(t)?qv(n)&&m.push(a.get("length")):(m.push(a.get(ec)),Yu(t)&&m.push(a.get(Zv)));break;case"delete":tr(t)||(m.push(a.get(ec)),Yu(t)&&m.push(a.get(Zv)));break;case"set":Yu(t)&&m.push(a.get(ec));break}const g=process.env.NODE_ENV!=="production"?{target:t,type:e,key:n,newValue:o,oldValue:s,oldTarget:h}:void 0;if(m.length===1)m[0]&&(process.env.NODE_ENV!=="production"?ph(m[0],g):ph(m[0]));else{const b=[];for(const T of m)T&&b.push(...T);process.env.NODE_ENV!=="production"?ph(Yf(b),g):ph(Yf(b))}}function ph(t,e){const n=tr(t)?t:[...t];for(const o of n)o.computed&&Ux(o,e);for(const o of n)o.computed||Ux(o,e)}function Ux(t,e){(t!==Oo||t.allowRecurse)&&(process.env.NODE_ENV!=="production"&&t.onTrigger&&t.onTrigger(Un({effect:t},e)),t.scheduler?t.scheduler():t.run())}function sC(t,e){var n;return(n=gm.get(t))===null||n===void 0?void 0:n.get(e)}const lC=Jl("__proto__,__v_isRef,__isVue"),jx=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(jv)),uC=vm(),cC=vm(!1,!0),hC=vm(!0),fC=vm(!0,!0),Gx=pC();function pC(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const o=hr(this);for(let h=0,a=this.length;h<a;h++)Co(o,"get",h+"");const s=o[e](...n);return s===-1||s===!1?o[e](...n.map(hr)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){tc();const o=hr(this)[e].apply(this,n);return rc(),o}}),t}function dC(t){const e=hr(this);return Co(e,"has",t),e.hasOwnProperty(t)}function vm(t=!1,e=!1){return function(o,s,h){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&h===(t?e?tb:eb:e?Qx:Jx).get(o))return o;const a=tr(o);if(!t){if(a&&Ur(Gx,s))return Reflect.get(Gx,s,h);if(s==="hasOwnProperty")return dC}const m=Reflect.get(o,s,h);return(jv(s)?jx.has(s):lC(s))||(t||Co(o,"get",s),e)?m:ln(m)?a&&qv(s)?m:m.value:sn(m)?t?rb(m):Mm(m):m}}const mC=$x(),yC=$x(!0);function $x(t=!1){return function(n,o,s,h){let a=n[o];if(nu(a)&&ln(a)&&!ln(s))return!1;if(!t&&(!Om(s)&&!nu(s)&&(a=hr(a),s=hr(s)),!tr(n)&&ln(a)&&!ln(s)))return a.value=s,!0;const m=tr(n)&&qv(o)?Number(o)<n.length:Ur(n,o),g=Reflect.set(n,o,s,h);return n===hr(h)&&(m?Xf(s,a)&&ll(n,"set",o,s,a):ll(n,"add",o,s)),g}}function gC(t,e){const n=Ur(t,e),o=t[e],s=Reflect.deleteProperty(t,e);return s&&n&&ll(t,"delete",e,void 0,o),s}function vC(t,e){const n=Reflect.has(t,e);return(!jv(e)||!jx.has(e))&&Co(t,"has",e),n}function _C(t){return Co(t,"iterate",tr(t)?"length":ec),Reflect.ownKeys(t)}const qx={get:uC,set:mC,deleteProperty:gC,has:vC,ownKeys:_C},Wx={get:hC,set(t,e){return process.env.NODE_ENV!=="production"&&ym(`Set operation on key "${String(e)}" failed: target is readonly.`,t),!0},deleteProperty(t,e){return process.env.NODE_ENV!=="production"&&ym(`Delete operation on key "${String(e)}" failed: target is readonly.`,t),!0}},xC=Un({},qx,{get:cC,set:yC}),bC=Un({},Wx,{get:fC}),Yv=t=>t,_m=t=>Reflect.getPrototypeOf(t);function xm(t,e,n=!1,o=!1){t=t.__v_raw;const s=hr(t),h=hr(e);n||(e!==h&&Co(s,"get",e),Co(s,"get",h));const{has:a}=_m(s),m=o?Yv:n?Jv:Qf;if(a.call(s,e))return m(t.get(e));if(a.call(s,h))return m(t.get(h));t!==s&&t.get(e)}function bm(t,e=!1){const n=this.__v_raw,o=hr(n),s=hr(t);return e||(t!==s&&Co(o,"has",t),Co(o,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function wm(t,e=!1){return t=t.__v_raw,!e&&Co(hr(t),"iterate",ec),Reflect.get(t,"size",t)}function Hx(t){t=hr(t);const e=hr(this);return _m(e).has.call(e,t)||(e.add(t),ll(e,"add",t,t)),this}function Zx(t,e){e=hr(e);const n=hr(this),{has:o,get:s}=_m(n);let h=o.call(n,t);h?process.env.NODE_ENV!=="production"&&Yx(n,o,t):(t=hr(t),h=o.call(n,t));const a=s.call(n,t);return n.set(t,e),h?Xf(e,a)&&ll(n,"set",t,e,a):ll(n,"add",t,e),this}function Xx(t){const e=hr(this),{has:n,get:o}=_m(e);let s=n.call(e,t);s?process.env.NODE_ENV!=="production"&&Yx(e,n,t):(t=hr(t),s=n.call(e,t));const h=o?o.call(e,t):void 0,a=e.delete(t);return s&&ll(e,"delete",t,void 0,h),a}function Kx(){const t=hr(this),e=t.size!==0,n=process.env.NODE_ENV!=="production"?Yu(t)?new Map(t):new Set(t):void 0,o=t.clear();return e&&ll(t,"clear",void 0,void 0,n),o}function Em(t,e){return function(o,s){const h=this,a=h.__v_raw,m=hr(a),g=e?Yv:t?Jv:Qf;return!t&&Co(m,"iterate",ec),a.forEach((b,T)=>o.call(s,g(b),g(T),h))}}function Sm(t,e,n){return function(...o){const s=this.__v_raw,h=hr(s),a=Yu(h),m=t==="entries"||t===Symbol.iterator&&a,g=t==="keys"&&a,b=s[t](...o),T=n?Yv:e?Jv:Qf;return!e&&Co(h,"iterate",g?Zv:ec),{next(){const{value:M,done:I}=b.next();return I?{value:M,done:I}:{value:m?[T(M[0]),T(M[1])]:T(M),done:I}},[Symbol.iterator](){return this}}}}function ru(t){return function(...e){if(process.env.NODE_ENV!=="production"){const n=e[0]?`on key "${e[0]}" `:"";console.warn(`${Ju(t)} operation ${n}failed: target is readonly.`,hr(this))}return t==="delete"?!1:this}}function wC(){const t={get(h){return xm(this,h)},get size(){return wm(this)},has:bm,add:Hx,set:Zx,delete:Xx,clear:Kx,forEach:Em(!1,!1)},e={get(h){return xm(this,h,!1,!0)},get size(){return wm(this)},has:bm,add:Hx,set:Zx,delete:Xx,clear:Kx,forEach:Em(!1,!0)},n={get(h){return xm(this,h,!0)},get size(){return wm(this,!0)},has(h){return bm.call(this,h,!0)},add:ru("add"),set:ru("set"),delete:ru("delete"),clear:ru("clear"),forEach:Em(!0,!1)},o={get(h){return xm(this,h,!0,!0)},get size(){return wm(this,!0)},has(h){return bm.call(this,h,!0)},add:ru("add"),set:ru("set"),delete:ru("delete"),clear:ru("clear"),forEach:Em(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(h=>{t[h]=Sm(h,!1,!1),n[h]=Sm(h,!0,!1),e[h]=Sm(h,!1,!0),o[h]=Sm(h,!0,!0)}),[t,n,e,o]}const[EC,SC,TC,MC]=wC();function Tm(t,e){const n=e?t?MC:TC:t?SC:EC;return(o,s,h)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?o:Reflect.get(Ur(n,s)&&s in o?n:o,s,h)}const IC={get:Tm(!1,!1)},OC={get:Tm(!1,!0)},CC={get:Tm(!0,!1)},AC={get:Tm(!0,!0)};function Yx(t,e,n){const o=hr(n);if(o!==n&&e.call(t,o)){const s=$v(t);console.warn(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const Jx=new WeakMap,Qx=new WeakMap,eb=new WeakMap,tb=new WeakMap;function PC(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kC(t){return t.__v_skip||!Object.isExtensible(t)?0:PC($v(t))}function Mm(t){return nu(t)?t:Im(t,!1,qx,IC,Jx)}function LC(t){return Im(t,!1,xC,OC,Qx)}function rb(t){return Im(t,!0,Wx,CC,eb)}function dh(t){return Im(t,!0,bC,AC,tb)}function Im(t,e,n,o,s){if(!sn(t))return process.env.NODE_ENV!=="production"&&console.warn(`value cannot be made reactive: ${String(t)}`),t;if(t.__v_raw&&!(e&&t.__v_isReactive))return t;const h=s.get(t);if(h)return h;const a=kC(t);if(a===0)return t;const m=new Proxy(t,a===2?o:n);return s.set(t,m),m}function ja(t){return nu(t)?ja(t.__v_raw):!!(t&&t.__v_isReactive)}function nu(t){return!!(t&&t.__v_isReadonly)}function Om(t){return!!(t&&t.__v_isShallow)}function Cm(t){return ja(t)||nu(t)}function hr(t){const e=t&&t.__v_raw;return e?hr(e):t}function Ga(t){return mm(t,"__v_skip",!0),t}const Qf=t=>sn(t)?Mm(t):t,Jv=t=>sn(t)?rb(t):t;function nb(t){tu&&Oo&&(t=hr(t),process.env.NODE_ENV!=="production"?Kv(t.dep||(t.dep=Yf()),{target:t,type:"get",key:"value"}):Kv(t.dep||(t.dep=Yf())))}function ib(t,e){t=hr(t);const n=t.dep;n&&(process.env.NODE_ENV!=="production"?ph(n,{target:t,type:"set",key:"value",newValue:e}):ph(n))}function ln(t){return!!(t&&t.__v_isRef===!0)}function vr(t){return ob(t,!1)}function Ln(t){return ob(t,!0)}function ob(t,e){return ln(t)?t:new DC(t,e)}class DC{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:hr(e),this._value=n?e:Qf(e)}get value(){return nb(this),this._value}set value(e){const n=this.__v_isShallow||Om(e)||nu(e);e=n?e:hr(e),Xf(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Qf(e),ib(this,e))}}function ae(t){return ln(t)?t.value:t}const NC={get:(t,e,n)=>ae(Reflect.get(t,e,n)),set:(t,e,n,o)=>{const s=t[e];return ln(s)&&!ln(n)?(s.value=n,!0):Reflect.set(t,e,n,o)}};function ab(t){return ja(t)?t:new Proxy(t,NC)}function sb(t){process.env.NODE_ENV!=="production"&&!Cm(t)&&console.warn("toRefs() expects a reactive object but received a plain one.");const e=tr(t)?new Array(t.length):{};for(const n in t)e[n]=ep(t,n);return e}class RC{constructor(e,n,o){this._object=e,this._key=n,this._defaultValue=o,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return sC(hr(this._object),this._key)}}function ep(t,e,n){const o=t[e];return ln(o)?o:new RC(t,e,n)}var lb;class zC{constructor(e,n,o,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[lb]=!1,this._dirty=!0,this.effect=new Xv(e,()=>{this._dirty||(this._dirty=!0,ib(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=o}get value(){const e=hr(this);return nb(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}lb="__v_isReadonly";function FC(t,e,n=!1){let o,s;const h=dr(t);h?(o=t,s=process.env.NODE_ENV!=="production"?()=>{console.warn("Write operation failed: computed value is readonly")}:Qi):(o=t.get,s=t.set);const a=new zC(o,s,h||!s,n);return process.env.NODE_ENV!=="production"&&e&&!n&&(a.effect.onTrack=e.onTrack,a.effect.onTrigger=e.onTrigger),a}const nc=[];function Am(t){nc.push(t)}function Pm(){nc.pop()}function at(t,...e){if(process.env.NODE_ENV==="production")return;tc();const n=nc.length?nc[nc.length-1].component:null,o=n&&n.appContext.config.warnHandler,s=BC();if(o)ul(o,n,11,[t+e.join(""),n&&n.proxy,s.map(({vnode:h})=>`at <${Km(n,h.type)}>`).join(`
`),s]);else{const h=[`[Vue warn]: ${t}`,...e];s.length&&h.push(`
`,...VC(s)),console.warn(...h)}rc()}function BC(){let t=nc[nc.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const o=t.component&&t.component.parent;t=o&&o.vnode}return e}function VC(t){const e=[];return t.forEach((n,o)=>{e.push(...o===0?[]:[`
`],...UC(n))}),e}function UC({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",o=t.component?t.component.parent==null:!1,s=` at <${Km(t.component,t.type,o)}`,h=">"+n;return t.props?[s,...jC(t.props),h]:[s+h]}function jC(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(o=>{e.push(...ub(o,t[o]))}),n.length>3&&e.push(" ..."),e}function ub(t,e,n){return jn(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:ln(e)?(e=ub(t,hr(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):dr(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=hr(e),n?e:[`${t}=`,e])}function GC(t,e){process.env.NODE_ENV!=="production"&&t!==void 0&&(typeof t!="number"?at(`${e} is not a valid number - got ${JSON.stringify(t)}.`):isNaN(t)&&at(`${e} is NaN - the duration expression might be incorrect.`))}const Qv={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function ul(t,e,n,o){let s;try{s=o?t(...o):t()}catch(h){km(h,e,n)}return s}function Ea(t,e,n,o){if(dr(t)){const h=ul(t,e,n,o);return h&&Gv(h)&&h.catch(a=>{km(a,e,n)}),h}const s=[];for(let h=0;h<t.length;h++)s.push(Ea(t[h],e,n,o));return s}function km(t,e,n,o=!0){const s=e?e.vnode:null;if(e){let h=e.parent;const a=e.proxy,m=process.env.NODE_ENV!=="production"?Qv[n]:n;for(;h;){const b=h.ec;if(b){for(let T=0;T<b.length;T++)if(b[T](t,a,m)===!1)return}h=h.parent}const g=e.appContext.config.errorHandler;if(g){ul(g,null,10,[t,a,m]);return}}$C(t,n,s,o)}function $C(t,e,n,o=!0){if(process.env.NODE_ENV!=="production"){const s=Qv[e];if(n&&Am(n),at(`Unhandled error${s?` during execution of ${s}`:""}`),n&&Pm(),o)throw t;console.error(t)}else console.error(t)}let tp=!1,e_=!1;const co=[];let gs=0;const mh=[];let vs=null,iu=0;const cb=Promise.resolve();let t_=null;const qC=100;function Lm(t){const e=t_||cb;return t?e.then(this?t.bind(this):t):e}function WC(t){let e=gs+1,n=co.length;for(;e<n;){const o=e+n>>>1;rp(co[o])<t?e=o+1:n=o}return e}function Dm(t){(!co.length||!co.includes(t,tp&&t.allowRecurse?gs+1:gs))&&(t.id==null?co.push(t):co.splice(WC(t.id),0,t),hb())}function hb(){!tp&&!e_&&(e_=!0,t_=cb.then(mb))}function HC(t){const e=co.indexOf(t);e>gs&&co.splice(e,1)}function fb(t){tr(t)?mh.push(...t):(!vs||!vs.includes(t,t.allowRecurse?iu+1:iu))&&mh.push(t),hb()}function pb(t,e=tp?gs+1:0){for(process.env.NODE_ENV!=="production"&&(t=t||new Map);e<co.length;e++){const n=co[e];if(n&&n.pre){if(process.env.NODE_ENV!=="production"&&r_(t,n))continue;co.splice(e,1),e--,n()}}}function db(t){if(mh.length){const e=[...new Set(mh)];if(mh.length=0,vs){vs.push(...e);return}for(vs=e,process.env.NODE_ENV!=="production"&&(t=t||new Map),vs.sort((n,o)=>rp(n)-rp(o)),iu=0;iu<vs.length;iu++)process.env.NODE_ENV!=="production"&&r_(t,vs[iu])||vs[iu]();vs=null,iu=0}}const rp=t=>t.id==null?1/0:t.id,ZC=(t,e)=>{const n=rp(t)-rp(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function mb(t){e_=!1,tp=!0,process.env.NODE_ENV!=="production"&&(t=t||new Map),co.sort(ZC);const e=process.env.NODE_ENV!=="production"?n=>r_(t,n):Qi;try{for(gs=0;gs<co.length;gs++){const n=co[gs];if(n&&n.active!==!1){if(process.env.NODE_ENV!=="production"&&e(n))continue;ul(n,null,14)}}}finally{gs=0,co.length=0,db(t),tp=!1,t_=null,(co.length||mh.length)&&mb(t)}}function r_(t,e){if(!t.has(e))t.set(e,1);else{const n=t.get(e);if(n>qC){const o=e.ownerInstance,s=o&&O_(o.type);return at(`Maximum recursive updates exceeded${s?` in component <${s}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else t.set(e,n+1)}}let ou=!1;const yh=new Set;process.env.NODE_ENV!=="production"&&(Lx().__VUE_HMR_RUNTIME__={createRecord:n_(yb),rerender:n_(YC),reload:n_(JC)});const ic=new Map;function XC(t){const e=t.type.__hmrId;let n=ic.get(e);n||(yb(e,t.type),n=ic.get(e)),n.instances.add(t)}function KC(t){ic.get(t.type.__hmrId).instances.delete(t)}function yb(t,e){return ic.has(t)?!1:(ic.set(t,{initialDef:np(e),instances:new Set}),!0)}function np(t){return fw(t)?t.__vccOpts:t}function YC(t,e){const n=ic.get(t);!n||(n.initialDef.render=e,[...n.instances].forEach(o=>{e&&(o.render=e,np(o.type).render=e),o.renderCache=[],ou=!0,o.update(),ou=!1}))}function JC(t,e){const n=ic.get(t);if(!n)return;e=np(e),gb(n.initialDef,e);const o=[...n.instances];for(const s of o){const h=np(s.type);yh.has(h)||(h!==n.initialDef&&gb(h,e),yh.add(h)),s.appContext.optionsCache.delete(s.type),s.ceReload?(yh.add(h),s.ceReload(e.styles),yh.delete(h)):s.parent?Dm(s.parent.update):s.appContext.reload?s.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}fb(()=>{for(const s of o)yh.delete(np(s.type))})}function gb(t,e){Un(t,e);for(const n in t)n!=="__file"&&!(n in e)&&delete t[n]}function n_(t){return(e,n)=>{try{return t(e,n)}catch(o){console.error(o),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let _s,ip=[],i_=!1;function op(t,...e){_s?_s.emit(t,...e):i_||ip.push({event:t,args:e})}function vb(t,e){var n,o;_s=t,_s?(_s.enabled=!0,ip.forEach(({event:s,args:h})=>_s.emit(s,...h)),ip=[]):typeof window<"u"&&window.HTMLElement&&!(!((o=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)===null||o===void 0)&&o.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(h=>{vb(h,e)}),setTimeout(()=>{_s||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,i_=!0,ip=[])},3e3)):(i_=!0,ip=[])}function QC(t,e){op("app:init",t,e,{Fragment:un,Text:hp,Comment:Vi,Static:$m})}function eA(t){op("app:unmount",t)}const tA=o_("component:added"),_b=o_("component:updated"),rA=o_("component:removed"),nA=t=>{_s&&typeof _s.cleanupBuffer=="function"&&!_s.cleanupBuffer(t)&&rA(t)};function o_(t){return e=>{op(t,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}const iA=xb("perf:start"),oA=xb("perf:end");function xb(t){return(e,n,o)=>{op(t,e.appContext.app,e.uid,e,n,o)}}function aA(t,e,n){op("component:emit",t.appContext.app,t,e,n)}function sA(t,e,...n){if(t.isUnmounted)return;const o=t.vnode.props||wn;if(process.env.NODE_ENV!=="production"){const{emitsOptions:T,propsOptions:[M]}=t;if(T)if(!(e in T))(!M||!(Qu(e)in M))&&at(`Component emitted event "${e}" but it is neither declared in the emits option nor as an "${Qu(e)}" prop.`);else{const I=T[e];dr(I)&&(I(...n)||at(`Invalid event arguments: event validation failed for event "${e}".`))}}let s=n;const h=e.startsWith("update:"),a=h&&e.slice(7);if(a&&a in o){const T=`${a==="modelValue"?"model":a}Modifiers`,{number:M,trim:I}=o[T]||wn;I&&(s=n.map(P=>jn(P)?P.trim():P)),M&&(s=n.map(rC))}if(process.env.NODE_ENV!=="production"&&aA(t,e,s),process.env.NODE_ENV!=="production"){const T=e.toLowerCase();T!==e&&o[Qu(T)]&&at(`Event "${T}" is emitted in component ${Km(t,t.type)} but the handler is registered for "${e}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${$o(e)}" instead of "${e}".`)}let m,g=o[m=Qu(e)]||o[m=Qu(aa(e))];!g&&h&&(g=o[m=Qu($o(e))]),g&&Ea(g,t,6,s);const b=o[m+"Once"];if(b){if(!t.emitted)t.emitted={};else if(t.emitted[m])return;t.emitted[m]=!0,Ea(b,t,6,s)}}function bb(t,e,n=!1){const o=e.emitsCache,s=o.get(t);if(s!==void 0)return s;const h=t.emits;let a={},m=!1;if(!dr(t)){const g=b=>{const T=bb(b,e,!0);T&&(m=!0,Un(a,T))};!n&&e.mixins.length&&e.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}return!h&&!m?(sn(t)&&o.set(t,null),null):(tr(h)?h.forEach(g=>a[g]=null):Un(a,h),sn(t)&&o.set(t,a),a)}function Nm(t,e){return!t||!Zf(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ur(t,e[0].toLowerCase()+e.slice(1))||Ur(t,$o(e))||Ur(t,e))}let Di=null,wb=null;function Rm(t){const e=Di;return Di=t,wb=t&&t.type.__scopeId||null,e}function ap(t,e=Di,n){if(!e||t._n)return t;const o=(...s)=>{o._d&&nw(-1);const h=Rm(e);let a;try{a=t(...s)}finally{Rm(h),o._d&&nw(1)}return process.env.NODE_ENV!=="production"&&_b(e),a};return o._n=!0,o._c=!0,o._d=!0,o}let a_=!1;function zm(){a_=!0}function s_(t){const{type:e,vnode:n,proxy:o,withProxy:s,props:h,propsOptions:[a],slots:m,attrs:g,emit:b,render:T,renderCache:M,data:I,setupState:P,ctx:z,inheritAttrs:V}=t;let W,Y;const X=Rm(t);process.env.NODE_ENV!=="production"&&(a_=!1);try{if(n.shapeFlag&4){const ve=s||o;W=qa(T.call(ve,ve,M,h,P,I,z)),Y=g}else{const ve=e;process.env.NODE_ENV!=="production"&&g===h&&zm(),W=qa(ve.length>1?ve(h,process.env.NODE_ENV!=="production"?{get attrs(){return zm(),g},slots:m,emit:b}:{attrs:g,slots:m,emit:b}):ve(h,null)),Y=e.props?g:uA(g)}}catch(ve){fp.length=0,km(ve,t,1),W=Ft(Vi)}let ue=W,he;if(process.env.NODE_ENV!=="production"&&W.patchFlag>0&&W.patchFlag&2048&&([ue,he]=lA(W)),Y&&V!==!1){const ve=Object.keys(Y),{shapeFlag:ze}=ue;if(ve.length){if(ze&7)a&&ve.some(hm)&&(Y=cA(Y,a)),ue=xs(ue,Y);else if(process.env.NODE_ENV!=="production"&&!a_&&ue.type!==Vi){const Fe=Object.keys(g),Pe=[],Se=[];for(let Ie=0,Je=Fe.length;Ie<Je;Ie++){const $e=Fe[Ie];Zf($e)?hm($e)||Pe.push($e[2].toLowerCase()+$e.slice(3)):Se.push($e)}Se.length&&at(`Extraneous non-props attributes (${Se.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),Pe.length&&at(`Extraneous non-emits event listeners (${Pe.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return n.dirs&&(process.env.NODE_ENV!=="production"&&!Sb(ue)&&at("Runtime directive used on component with non-element root node. The directives will not function as intended."),ue=xs(ue),ue.dirs=ue.dirs?ue.dirs.concat(n.dirs):n.dirs),n.transition&&(process.env.NODE_ENV!=="production"&&!Sb(ue)&&at("Component inside <Transition> renders non-element root node that cannot be animated."),ue.transition=n.transition),process.env.NODE_ENV!=="production"&&he?he(ue):W=ue,Rm(X),W}const lA=t=>{const e=t.children,n=t.dynamicChildren,o=Eb(e);if(!o)return[t,void 0];const s=e.indexOf(o),h=n?n.indexOf(o):-1,a=m=>{e[s]=m,n&&(h>-1?n[h]=m:m.patchFlag>0&&(t.dynamicChildren=[...n,m]))};return[qa(o),a]};function Eb(t){let e;for(let n=0;n<t.length;n++){const o=t[n];if(_h(o)){if(o.type!==Vi||o.children==="v-if"){if(e)return;e=o}}else return}return e}const uA=t=>{let e;for(const n in t)(n==="class"||n==="style"||Zf(n))&&((e||(e={}))[n]=t[n]);return e},cA=(t,e)=>{const n={};for(const o in t)(!hm(o)||!(o.slice(9)in e))&&(n[o]=t[o]);return n},Sb=t=>t.shapeFlag&7||t.type===Vi;function hA(t,e,n){const{props:o,children:s,component:h}=t,{props:a,children:m,patchFlag:g}=e,b=h.emitsOptions;if(process.env.NODE_ENV!=="production"&&(s||m)&&ou||e.dirs||e.transition)return!0;if(n&&g>=0){if(g&1024)return!0;if(g&16)return o?Tb(o,a,b):!!a;if(g&8){const T=e.dynamicProps;for(let M=0;M<T.length;M++){const I=T[M];if(a[I]!==o[I]&&!Nm(b,I))return!0}}}else return(s||m)&&(!m||!m.$stable)?!0:o===a?!1:o?a?Tb(o,a,b):!0:!!a;return!1}function Tb(t,e,n){const o=Object.keys(e);if(o.length!==Object.keys(t).length)return!0;for(let s=0;s<o.length;s++){const h=o[s];if(e[h]!==t[h]&&!Nm(n,h))return!0}return!1}function fA({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const pA=t=>t.__isSuspense;function dA(t,e){e&&e.pendingBranch?tr(t)?e.effects.push(...t):e.effects.push(t):fb(t)}function Mb(t,e){if(!ai)process.env.NODE_ENV!=="production"&&at("provide() can only be used inside setup().");else{let n=ai.provides;const o=ai.parent&&ai.parent.provides;o===n&&(n=ai.provides=Object.create(o)),n[t]=e}}function gh(t,e,n=!1){const o=ai||Di;if(o){const s=o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&dr(e)?e.call(o.proxy):e;process.env.NODE_ENV!=="production"&&at(`injection "${String(t)}" not found.`)}else process.env.NODE_ENV!=="production"&&at("inject() can only be used inside setup() or functional components.")}function la(t,e){return l_(t,null,e)}const Fm={};function Tn(t,e,n){return process.env.NODE_ENV!=="production"&&!dr(e)&&at("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),l_(t,e,n)}function l_(t,e,{immediate:n,deep:o,flush:s,onTrack:h,onTrigger:a}=wn){process.env.NODE_ENV!=="production"&&!e&&(n!==void 0&&at('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),o!==void 0&&at('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const m=he=>{at("Invalid watch source: ",he,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},g=Rx()===(ai==null?void 0:ai.scope)?ai:null;let b,T=!1,M=!1;if(ln(t)?(b=()=>t.value,T=Om(t)):ja(t)?(b=()=>t,o=!0):tr(t)?(M=!0,T=t.some(he=>ja(he)||Om(he)),b=()=>t.map(he=>{if(ln(he))return he.value;if(ja(he))return oc(he);if(dr(he))return ul(he,g,2);process.env.NODE_ENV!=="production"&&m(he)})):dr(t)?e?b=()=>ul(t,g,2):b=()=>{if(!(g&&g.isUnmounted))return I&&I(),Ea(t,g,3,[P])}:(b=Qi,process.env.NODE_ENV!=="production"&&m(t)),e&&o){const he=b;b=()=>oc(he())}let I,P=he=>{I=X.onStop=()=>{ul(he,g,4)}},z;if(dp)if(P=Qi,e?n&&Ea(e,g,3,[b(),M?[]:void 0,P]):b(),s==="sync"){const he=bP();z=he.__watcherHandles||(he.__watcherHandles=[])}else return Qi;let V=M?new Array(t.length).fill(Fm):Fm;const W=()=>{if(!!X.active)if(e){const he=X.run();(o||T||(M?he.some((ve,ze)=>Xf(ve,V[ze])):Xf(he,V)))&&(I&&I(),Ea(e,g,3,[he,V===Fm?void 0:M&&V[0]===Fm?[]:V,P]),V=he)}else X.run()};W.allowRecurse=!!e;let Y;s==="sync"?Y=W:s==="post"?Y=()=>qo(W,g&&g.suspense):(W.pre=!0,g&&(W.id=g.uid),Y=()=>Dm(W));const X=new Xv(b,Y);process.env.NODE_ENV!=="production"&&(X.onTrack=h,X.onTrigger=a),e?n?W():V=X.run():s==="post"?qo(X.run.bind(X),g&&g.suspense):X.run();const ue=()=>{X.stop(),g&&g.scope&&Uv(g.scope.effects,X)};return z&&z.push(ue),ue}function mA(t,e,n){const o=this.proxy,s=jn(t)?t.includes(".")?Ib(o,t):()=>o[t]:t.bind(o,o);let h;dr(e)?h=e:(h=e.handler,n=e);const a=ai;xh(this);const m=l_(s,h.bind(o),n);return a?xh(a):hc(),m}function Ib(t,e){const n=e.split(".");return()=>{let o=t;for(let s=0;s<n.length&&o;s++)o=o[n[s]];return o}}function oc(t,e){if(!sn(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ln(t))oc(t.value,e);else if(tr(t))for(let n=0;n<t.length;n++)oc(t[n],e);else if(Cx(t)||Yu(t))t.forEach(n=>{oc(n,e)});else if(Px(t))for(const n in t)oc(t[n],e);return t}function yA(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ua(()=>{t.isMounted=!0}),Lb(()=>{t.isUnmounting=!0}),t}const Sa=[Function,Array],Ob={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Sa,onEnter:Sa,onAfterEnter:Sa,onEnterCancelled:Sa,onBeforeLeave:Sa,onLeave:Sa,onAfterLeave:Sa,onLeaveCancelled:Sa,onBeforeAppear:Sa,onAppear:Sa,onAfterAppear:Sa,onAppearCancelled:Sa},setup(t,{slots:e}){const n=Zm(),o=yA();let s;return()=>{const h=e.default&&Pb(e.default(),!0);if(!h||!h.length)return;let a=h[0];if(h.length>1){let V=!1;for(const W of h)if(W.type!==Vi){if(process.env.NODE_ENV!=="production"&&V){at("<transition> can only be used on a single element or component. Use <transition-group> for lists.");break}if(a=W,V=!0,process.env.NODE_ENV==="production")break}}const m=hr(t),{mode:g}=m;if(process.env.NODE_ENV!=="production"&&g&&g!=="in-out"&&g!=="out-in"&&g!=="default"&&at(`invalid <transition> mode: ${g}`),o.isLeaving)return c_(a);const b=Ab(a);if(!b)return c_(a);const T=u_(b,m,o,n);h_(b,T);const M=n.subTree,I=M&&Ab(M);let P=!1;const{getTransitionKey:z}=b.type;if(z){const V=z();s===void 0?s=V:V!==s&&(s=V,P=!0)}if(I&&I.type!==Vi&&(!cc(b,I)||P)){const V=u_(I,m,o,n);if(h_(I,V),g==="out-in")return o.isLeaving=!0,V.afterLeave=()=>{o.isLeaving=!1,n.update.active!==!1&&n.update()},c_(a);g==="in-out"&&b.type!==Vi&&(V.delayLeave=(W,Y,X)=>{const ue=Cb(o,I);ue[String(I.key)]=I,W._leaveCb=()=>{Y(),W._leaveCb=void 0,delete T.delayedLeave},T.delayedLeave=X})}return a}}};function Cb(t,e){const{leavingVNodes:n}=t;let o=n.get(e.type);return o||(o=Object.create(null),n.set(e.type,o)),o}function u_(t,e,n,o){const{appear:s,mode:h,persisted:a=!1,onBeforeEnter:m,onEnter:g,onAfterEnter:b,onEnterCancelled:T,onBeforeLeave:M,onLeave:I,onAfterLeave:P,onLeaveCancelled:z,onBeforeAppear:V,onAppear:W,onAfterAppear:Y,onAppearCancelled:X}=e,ue=String(t.key),he=Cb(n,t),ve=(Pe,Se)=>{Pe&&Ea(Pe,o,9,Se)},ze=(Pe,Se)=>{const Ie=Se[1];ve(Pe,Se),tr(Pe)?Pe.every(Je=>Je.length<=1)&&Ie():Pe.length<=1&&Ie()},Fe={mode:h,persisted:a,beforeEnter(Pe){let Se=m;if(!n.isMounted)if(s)Se=V||m;else return;Pe._leaveCb&&Pe._leaveCb(!0);const Ie=he[ue];Ie&&cc(t,Ie)&&Ie.el._leaveCb&&Ie.el._leaveCb(),ve(Se,[Pe])},enter(Pe){let Se=g,Ie=b,Je=T;if(!n.isMounted)if(s)Se=W||g,Ie=Y||b,Je=X||T;else return;let $e=!1;const st=Pe._enterCb=be=>{$e||($e=!0,be?ve(Je,[Pe]):ve(Ie,[Pe]),Fe.delayedLeave&&Fe.delayedLeave(),Pe._enterCb=void 0)};Se?ze(Se,[Pe,st]):st()},leave(Pe,Se){const Ie=String(t.key);if(Pe._enterCb&&Pe._enterCb(!0),n.isUnmounting)return Se();ve(M,[Pe]);let Je=!1;const $e=Pe._leaveCb=st=>{Je||(Je=!0,Se(),st?ve(z,[Pe]):ve(P,[Pe]),Pe._leaveCb=void 0,he[Ie]===t&&delete he[Ie])};he[Ie]=t,I?ze(I,[Pe,$e]):$e()},clone(Pe){return u_(Pe,e,n,o)}};return Fe}function c_(t){if(lp(t))return t=xs(t),t.children=null,t}function Ab(t){return lp(t)?t.children?t.children[0]:void 0:t}function h_(t,e){t.shapeFlag&6&&t.component?h_(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Pb(t,e=!1,n){let o=[],s=0;for(let h=0;h<t.length;h++){let a=t[h];const m=n==null?a.key:String(n)+String(a.key!=null?a.key:h);a.type===un?(a.patchFlag&128&&s++,o=o.concat(Pb(a.children,e,m))):(e||a.type!==Vi)&&o.push(m!=null?xs(a,{key:m}):a)}if(s>1)for(let h=0;h<o.length;h++)o[h].patchFlag=-2;return o}function or(t){return dr(t)?{setup:t,name:t.name}:t}const sp=t=>!!t.type.__asyncLoader,lp=t=>t.type.__isKeepAlive;function gA(t,e){kb(t,"a",e)}function vA(t,e){kb(t,"da",e)}function kb(t,e,n=ai){const o=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Bm(e,o,n),n){let s=n.parent;for(;s&&s.parent;)lp(s.parent.vnode)&&_A(o,e,n,s),s=s.parent}}function _A(t,e,n,o){const s=Bm(e,t,o,!0);au(()=>{Uv(o[e],s)},n)}function Bm(t,e,n=ai,o=!1){if(n){const s=n[t]||(n[t]=[]),h=e.__weh||(e.__weh=(...a)=>{if(n.isUnmounted)return;tc(),xh(n);const m=Ea(e,n,t,a);return hc(),rc(),m});return o?s.unshift(h):s.push(h),h}else if(process.env.NODE_ENV!=="production"){const s=Qu(Qv[t].replace(/ hook$/,""));at(`${s} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const cl=t=>(e,n=ai)=>(!dp||t==="sp")&&Bm(t,(...o)=>e(...o),n),xA=cl("bm"),ua=cl("m"),bA=cl("bu"),wA=cl("u"),Lb=cl("bum"),au=cl("um"),EA=cl("sp"),SA=cl("rtg"),TA=cl("rtc");function MA(t,e=ai){Bm("ec",t,e)}function Db(t){QO(t)&&at("Do not use built-in directive ids as custom directive id: "+t)}function Vm(t,e){const n=Di;if(n===null)return process.env.NODE_ENV!=="production"&&at("withDirectives can only be used inside render functions."),t;const o=Xm(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let h=0;h<e.length;h++){let[a,m,g,b=wn]=e[h];a&&(dr(a)&&(a={mounted:a,updated:a}),a.deep&&oc(m),s.push({dir:a,instance:o,value:m,oldValue:void 0,arg:g,modifiers:b}))}return t}function ac(t,e,n,o){const s=t.dirs,h=e&&e.dirs;for(let a=0;a<s.length;a++){const m=s[a];h&&(m.oldValue=h[a].value);let g=m.dir[o];g&&(tc(),Ea(g,n,8,[t.el,m,t,e]),rc())}}const f_="components",IA="directives";function OA(t,e){return Nb(f_,t,!0,e)||t}const CA=Symbol();function p_(t){return Nb(IA,t)}function Nb(t,e,n=!0,o=!1){const s=Di||ai;if(s){const h=s.type;if(t===f_){const m=O_(h,!1);if(m&&(m===e||m===aa(e)||m===Ju(aa(e))))return h}const a=Rb(s[t]||h[t],e)||Rb(s.appContext[t],e);if(!a&&o)return h;if(process.env.NODE_ENV!=="production"&&n&&!a){const m=t===f_?`
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`:"";at(`Failed to resolve ${t.slice(0,-1)}: ${e}${m}`)}return a}else process.env.NODE_ENV!=="production"&&at(`resolve${Ju(t.slice(0,-1))} can only be used in render() or setup().`)}function Rb(t,e){return t&&(t[e]||t[aa(e)]||t[Ju(aa(e))])}function Ta(t,e,n,o){let s;const h=n&&n[o];if(tr(t)||jn(t)){s=new Array(t.length);for(let a=0,m=t.length;a<m;a++)s[a]=e(t[a],a,void 0,h&&h[a])}else if(typeof t=="number"){process.env.NODE_ENV!=="production"&&!Number.isInteger(t)&&at(`The v-for range expect an integer value but got ${t}.`),s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,h&&h[a])}else if(sn(t))if(t[Symbol.iterator])s=Array.from(t,(a,m)=>e(a,m,void 0,h&&h[m]));else{const a=Object.keys(t);s=new Array(a.length);for(let m=0,g=a.length;m<g;m++){const b=a[m];s[m]=e(t[b],b,m,h&&h[m])}}else s=[];return n&&(n[o]=s),s}function AA(t,e,n={},o,s){if(Di.isCE||Di.parent&&sp(Di.parent)&&Di.parent.isCE)return e!=="default"&&(n.name=e),Ft("slot",n,o&&o());let h=t[e];process.env.NODE_ENV!=="production"&&h&&h.length>1&&(at("SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template."),h=()=>[]),h&&h._c&&(h._d=!1),Ve();const a=h&&zb(h(n)),m=en(un,{key:n.key||a&&a.key||`_${e}`},a||(o?o():[]),a&&t._===1?64:-2);return!s&&m.scopeId&&(m.slotScopeIds=[m.scopeId+"-s"]),h&&h._c&&(h._d=!0),m}function zb(t){return t.some(e=>_h(e)?!(e.type===Vi||e.type===un&&!zb(e.children)):!0)?t:null}const d_=t=>t?lw(t)?Xm(t)||t.proxy:d_(t.parent):null,sc=Un(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>process.env.NODE_ENV!=="production"?dh(t.props):t.props,$attrs:t=>process.env.NODE_ENV!=="production"?dh(t.attrs):t.attrs,$slots:t=>process.env.NODE_ENV!=="production"?dh(t.slots):t.slots,$refs:t=>process.env.NODE_ENV!=="production"?dh(t.refs):t.refs,$parent:t=>d_(t.parent),$root:t=>d_(t.root),$emit:t=>t.emit,$options:t=>v_(t),$forceUpdate:t=>t.f||(t.f=()=>Dm(t.update)),$nextTick:t=>t.n||(t.n=Lm.bind(t.proxy)),$watch:t=>mA.bind(t)}),m_=t=>t==="_"||t==="$",y_=(t,e)=>t!==wn&&!t.__isScriptSetup&&Ur(t,e),Fb={get({_:t},e){const{ctx:n,setupState:o,data:s,props:h,accessCache:a,type:m,appContext:g}=t;if(process.env.NODE_ENV!=="production"&&e==="__isVue")return!0;let b;if(e[0]!=="$"){const P=a[e];if(P!==void 0)switch(P){case 1:return o[e];case 2:return s[e];case 4:return n[e];case 3:return h[e]}else{if(y_(o,e))return a[e]=1,o[e];if(s!==wn&&Ur(s,e))return a[e]=2,s[e];if((b=t.propsOptions[0])&&Ur(b,e))return a[e]=3,h[e];if(n!==wn&&Ur(n,e))return a[e]=4,n[e];g_&&(a[e]=0)}}const T=sc[e];let M,I;if(T)return e==="$attrs"&&(Co(t,"get",e),process.env.NODE_ENV!=="production"&&zm()),T(t);if((M=m.__cssModules)&&(M=M[e]))return M;if(n!==wn&&Ur(n,e))return a[e]=4,n[e];if(I=g.config.globalProperties,Ur(I,e))return I[e];process.env.NODE_ENV!=="production"&&Di&&(!jn(e)||e.indexOf("__v")!==0)&&(s!==wn&&m_(e[0])&&Ur(s,e)?at(`Property ${JSON.stringify(e)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):t===Di&&at(`Property ${JSON.stringify(e)} was accessed during render but is not defined on instance.`))},set({_:t},e,n){const{data:o,setupState:s,ctx:h}=t;return y_(s,e)?(s[e]=n,!0):process.env.NODE_ENV!=="production"&&s.__isScriptSetup&&Ur(s,e)?(at(`Cannot mutate <script setup> binding "${e}" from Options API.`),!1):o!==wn&&Ur(o,e)?(o[e]=n,!0):Ur(t.props,e)?(process.env.NODE_ENV!=="production"&&at(`Attempting to mutate prop "${e}". Props are readonly.`),!1):e[0]==="$"&&e.slice(1)in t?(process.env.NODE_ENV!=="production"&&at(`Attempting to mutate public property "${e}". Properties starting with $ are reserved and readonly.`),!1):(process.env.NODE_ENV!=="production"&&e in t.appContext.config.globalProperties?Object.defineProperty(h,e,{enumerable:!0,configurable:!0,value:n}):h[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:o,appContext:s,propsOptions:h}},a){let m;return!!n[a]||t!==wn&&Ur(t,a)||y_(e,a)||(m=h[0])&&Ur(m,a)||Ur(o,a)||Ur(sc,a)||Ur(s.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ur(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};process.env.NODE_ENV!=="production"&&(Fb.ownKeys=t=>(at("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(t)));function PA(t){const e={};return Object.defineProperty(e,"_",{configurable:!0,enumerable:!1,get:()=>t}),Object.keys(sc).forEach(n=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:()=>sc[n](t),set:Qi})}),e}function kA(t){const{ctx:e,propsOptions:[n]}=t;n&&Object.keys(n).forEach(o=>{Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>t.props[o],set:Qi})})}function LA(t){const{ctx:e,setupState:n}=t;Object.keys(hr(n)).forEach(o=>{if(!n.__isScriptSetup){if(m_(o[0])){at(`setup() return property ${JSON.stringify(o)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>n[o],set:Qi})}})}function DA(){const t=Object.create(null);return(e,n)=>{t[n]?at(`${e} property "${n}" is already defined in ${t[n]}.`):t[n]=e}}let g_=!0;function NA(t){const e=v_(t),n=t.proxy,o=t.ctx;g_=!1,e.beforeCreate&&Bb(e.beforeCreate,t,"bc");const{data:s,computed:h,methods:a,watch:m,provide:g,inject:b,created:T,beforeMount:M,mounted:I,beforeUpdate:P,updated:z,activated:V,deactivated:W,beforeDestroy:Y,beforeUnmount:X,destroyed:ue,unmounted:he,render:ve,renderTracked:ze,renderTriggered:Fe,errorCaptured:Pe,serverPrefetch:Se,expose:Ie,inheritAttrs:Je,components:$e,directives:st,filters:be}=e,Ye=process.env.NODE_ENV!=="production"?DA():null;if(process.env.NODE_ENV!=="production"){const[vt]=t.propsOptions;if(vt)for(const kt in vt)Ye("Props",kt)}if(b&&RA(b,o,Ye,t.appContext.config.unwrapInjectedRef),a)for(const vt in a){const kt=a[vt];dr(kt)?(process.env.NODE_ENV!=="production"?Object.defineProperty(o,vt,{value:kt.bind(n),configurable:!0,enumerable:!0,writable:!0}):o[vt]=kt.bind(n),process.env.NODE_ENV!=="production"&&Ye("Methods",vt)):process.env.NODE_ENV!=="production"&&at(`Method "${vt}" has type "${typeof kt}" in the component definition. Did you reference the function correctly?`)}if(s){process.env.NODE_ENV!=="production"&&!dr(s)&&at("The data option must be a function. Plain object usage is no longer supported.");const vt=s.call(n,n);if(process.env.NODE_ENV!=="production"&&Gv(vt)&&at("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!sn(vt))process.env.NODE_ENV!=="production"&&at("data() should return an object.");else if(t.data=Mm(vt),process.env.NODE_ENV!=="production")for(const kt in vt)Ye("Data",kt),m_(kt[0])||Object.defineProperty(o,kt,{configurable:!0,enumerable:!0,get:()=>vt[kt],set:Qi})}if(g_=!0,h)for(const vt in h){const kt=h[vt],rr=dr(kt)?kt.bind(n,n):dr(kt.get)?kt.get.bind(n,n):Qi;process.env.NODE_ENV!=="production"&&rr===Qi&&at(`Computed property "${vt}" has no getter.`);const Nn=!dr(kt)&&dr(kt.set)?kt.set.bind(n):process.env.NODE_ENV!=="production"?()=>{at(`Write operation failed: computed property "${vt}" is readonly.`)}:Qi,zr=ar({get:rr,set:Nn});Object.defineProperty(o,vt,{enumerable:!0,configurable:!0,get:()=>zr.value,set:mr=>zr.value=mr}),process.env.NODE_ENV!=="production"&&Ye("Computed",vt)}if(m)for(const vt in m)Vb(m[vt],o,n,vt);if(g){const vt=dr(g)?g.call(n):g;Reflect.ownKeys(vt).forEach(kt=>{Mb(kt,vt[kt])})}T&&Bb(T,t,"c");function ht(vt,kt){tr(kt)?kt.forEach(rr=>vt(rr.bind(n))):kt&&vt(kt.bind(n))}if(ht(xA,M),ht(ua,I),ht(bA,P),ht(wA,z),ht(gA,V),ht(vA,W),ht(MA,Pe),ht(TA,ze),ht(SA,Fe),ht(Lb,X),ht(au,he),ht(EA,Se),tr(Ie))if(Ie.length){const vt=t.exposed||(t.exposed={});Ie.forEach(kt=>{Object.defineProperty(vt,kt,{get:()=>n[kt],set:rr=>n[kt]=rr})})}else t.exposed||(t.exposed={});ve&&t.render===Qi&&(t.render=ve),Je!=null&&(t.inheritAttrs=Je),$e&&(t.components=$e),st&&(t.directives=st)}function RA(t,e,n=Qi,o=!1){tr(t)&&(t=__(t));for(const s in t){const h=t[s];let a;sn(h)?"default"in h?a=gh(h.from||s,h.default,!0):a=gh(h.from||s):a=gh(h),ln(a)?o?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>a.value,set:m=>a.value=m}):(process.env.NODE_ENV!=="production"&&at(`injected property "${s}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),e[s]=a):e[s]=a,process.env.NODE_ENV!=="production"&&n("Inject",s)}}function Bb(t,e,n){Ea(tr(t)?t.map(o=>o.bind(e.proxy)):t.bind(e.proxy),e,n)}function Vb(t,e,n,o){const s=o.includes(".")?Ib(n,o):()=>n[o];if(jn(t)){const h=e[t];dr(h)?Tn(s,h):process.env.NODE_ENV!=="production"&&at(`Invalid watch handler specified by key "${t}"`,h)}else if(dr(t))Tn(s,t.bind(n));else if(sn(t))if(tr(t))t.forEach(h=>Vb(h,e,n,o));else{const h=dr(t.handler)?t.handler.bind(n):e[t.handler];dr(h)?Tn(s,h,t):process.env.NODE_ENV!=="production"&&at(`Invalid watch handler specified by key "${t.handler}"`,h)}else process.env.NODE_ENV!=="production"&&at(`Invalid watch option: "${o}"`,t)}function v_(t){const e=t.type,{mixins:n,extends:o}=e,{mixins:s,optionsCache:h,config:{optionMergeStrategies:a}}=t.appContext,m=h.get(e);let g;return m?g=m:!s.length&&!n&&!o?g=e:(g={},s.length&&s.forEach(b=>Um(g,b,a,!0)),Um(g,e,a)),sn(e)&&h.set(e,g),g}function Um(t,e,n,o=!1){const{mixins:s,extends:h}=e;h&&Um(t,h,n,!0),s&&s.forEach(a=>Um(t,a,n,!0));for(const a in e)if(o&&a==="expose")process.env.NODE_ENV!=="production"&&at('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const m=zA[a]||n&&n[a];t[a]=m?m(t[a],e[a]):e[a]}return t}const zA={data:Ub,props:lc,emits:lc,methods:lc,computed:lc,beforeCreate:Ao,created:Ao,beforeMount:Ao,mounted:Ao,beforeUpdate:Ao,updated:Ao,beforeDestroy:Ao,beforeUnmount:Ao,destroyed:Ao,unmounted:Ao,activated:Ao,deactivated:Ao,errorCaptured:Ao,serverPrefetch:Ao,components:lc,directives:lc,watch:BA,provide:Ub,inject:FA};function Ub(t,e){return e?t?function(){return Un(dr(t)?t.call(this,this):t,dr(e)?e.call(this,this):e)}:e:t}function FA(t,e){return lc(__(t),__(e))}function __(t){if(tr(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ao(t,e){return t?[...new Set([].concat(t,e))]:e}function lc(t,e){return t?Un(Un(Object.create(null),t),e):e}function BA(t,e){if(!t)return e;if(!e)return t;const n=Un(Object.create(null),t);for(const o in e)n[o]=Ao(t[o],e[o]);return n}function VA(t,e,n,o=!1){const s={},h={};mm(h,qm,1),t.propsDefaults=Object.create(null),jb(t,e,s,h);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);process.env.NODE_ENV!=="production"&&Hb(e||{},s,t),n?t.props=o?s:LC(s):t.type.props?t.props=s:t.props=h,t.attrs=h}function UA(t){for(;t;){if(t.type.__hmrId)return!0;t=t.parent}}function jA(t,e,n,o){const{props:s,attrs:h,vnode:{patchFlag:a}}=t,m=hr(s),[g]=t.propsOptions;let b=!1;if(!(process.env.NODE_ENV!=="production"&&UA(t))&&(o||a>0)&&!(a&16)){if(a&8){const T=t.vnode.dynamicProps;for(let M=0;M<T.length;M++){let I=T[M];if(Nm(t.emitsOptions,I))continue;const P=e[I];if(g)if(Ur(h,I))P!==h[I]&&(h[I]=P,b=!0);else{const z=aa(I);s[z]=x_(g,m,z,P,t,!1)}else P!==h[I]&&(h[I]=P,b=!0)}}}else{jb(t,e,s,h)&&(b=!0);let T;for(const M in m)(!e||!Ur(e,M)&&((T=$o(M))===M||!Ur(e,T)))&&(g?n&&(n[M]!==void 0||n[T]!==void 0)&&(s[M]=x_(g,m,M,void 0,t,!0)):delete s[M]);if(h!==m)for(const M in h)(!e||!Ur(e,M)&&!0)&&(delete h[M],b=!0)}b&&ll(t,"set","$attrs"),process.env.NODE_ENV!=="production"&&Hb(e||{},s,t)}function jb(t,e,n,o){const[s,h]=t.propsOptions;let a=!1,m;if(e)for(let g in e){if(pm(g))continue;const b=e[g];let T;s&&Ur(s,T=aa(g))?!h||!h.includes(T)?n[T]=b:(m||(m={}))[T]=b:Nm(t.emitsOptions,g)||(!(g in o)||b!==o[g])&&(o[g]=b,a=!0)}if(h){const g=hr(n),b=m||wn;for(let T=0;T<h.length;T++){const M=h[T];n[M]=x_(s,g,M,b[M],t,!Ur(b,M))}}return a}function x_(t,e,n,o,s,h){const a=t[n];if(a!=null){const m=Ur(a,"default");if(m&&o===void 0){const g=a.default;if(a.type!==Function&&dr(g)){const{propsDefaults:b}=s;n in b?o=b[n]:(xh(s),o=b[n]=g.call(null,e),hc())}else o=g}a[0]&&(h&&!m?o=!1:a[1]&&(o===""||o===$o(n))&&(o=!0))}return o}function Gb(t,e,n=!1){const o=e.propsCache,s=o.get(t);if(s)return s;const h=t.props,a={},m=[];let g=!1;if(!dr(t)){const T=M=>{g=!0;const[I,P]=Gb(M,e,!0);Un(a,I),P&&m.push(...P)};!n&&e.mixins.length&&e.mixins.forEach(T),t.extends&&T(t.extends),t.mixins&&t.mixins.forEach(T)}if(!h&&!g)return sn(t)&&o.set(t,fh),fh;if(tr(h))for(let T=0;T<h.length;T++){process.env.NODE_ENV!=="production"&&!jn(h[T])&&at("props must be strings when using array syntax.",h[T]);const M=aa(h[T]);$b(M)&&(a[M]=wn)}else if(h){process.env.NODE_ENV!=="production"&&!sn(h)&&at("invalid props options",h);for(const T in h){const M=aa(T);if($b(M)){const I=h[T],P=a[M]=tr(I)||dr(I)?{type:I}:Object.assign({},I);if(P){const z=Wb(Boolean,P.type),V=Wb(String,P.type);P[0]=z>-1,P[1]=V<0||z<V,(z>-1||Ur(P,"default"))&&m.push(M)}}}}const b=[a,m];return sn(t)&&o.set(t,b),b}function $b(t){return t[0]!=="$"?!0:(process.env.NODE_ENV!=="production"&&at(`Invalid prop name: "${t}" is a reserved property.`),!1)}function b_(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function qb(t,e){return b_(t)===b_(e)}function Wb(t,e){return tr(e)?e.findIndex(n=>qb(n,t)):dr(e)&&qb(e,t)?0:-1}function Hb(t,e,n){const o=hr(e),s=n.propsOptions[0];for(const h in s){let a=s[h];a!=null&&GA(h,o[h],a,!Ur(t,h)&&!Ur(t,$o(h)))}}function GA(t,e,n,o){const{type:s,required:h,validator:a}=n;if(h&&o){at('Missing required prop: "'+t+'"');return}if(!(e==null&&!n.required)){if(s!=null&&s!==!0){let m=!1;const g=tr(s)?s:[s],b=[];for(let T=0;T<g.length&&!m;T++){const{valid:M,expectedType:I}=qA(e,g[T]);b.push(I||""),m=M}if(!m){at(WA(t,e,b));return}}a&&!a(e)&&at('Invalid prop: custom validator check failed for prop "'+t+'".')}}const $A=Jl("String,Number,Boolean,Function,Symbol,BigInt");function qA(t,e){let n;const o=b_(e);if($A(o)){const s=typeof t;n=s===o.toLowerCase(),!n&&s==="object"&&(n=t instanceof e)}else o==="Object"?n=sn(t):o==="Array"?n=tr(t):o==="null"?n=t===null:n=t instanceof e;return{valid:n,expectedType:o}}function WA(t,e,n){let o=`Invalid prop: type check failed for prop "${t}". Expected ${n.map(Ju).join(" | ")}`;const s=n[0],h=$v(e),a=Zb(e,s),m=Zb(e,h);return n.length===1&&Xb(s)&&!HA(s,h)&&(o+=` with value ${a}`),o+=`, got ${h} `,Xb(h)&&(o+=`with value ${m}.`),o}function Zb(t,e){return e==="String"?`"${t}"`:e==="Number"?`${Number(t)}`:`${t}`}function Xb(t){return["string","number","boolean"].some(n=>t.toLowerCase()===n)}function HA(...t){return t.some(e=>e.toLowerCase()==="boolean")}const Kb=t=>t[0]==="_"||t==="$stable",w_=t=>tr(t)?t.map(qa):[qa(t)],ZA=(t,e,n)=>{if(e._n)return e;const o=ap((...s)=>(process.env.NODE_ENV!=="production"&&ai&&at(`Slot "${t}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),w_(e(...s))),n);return o._c=!1,o},Yb=(t,e,n)=>{const o=t._ctx;for(const s in t){if(Kb(s))continue;const h=t[s];if(dr(h))e[s]=ZA(s,h,o);else if(h!=null){process.env.NODE_ENV!=="production"&&at(`Non-function value encountered for slot "${s}". Prefer function slots for better performance.`);const a=w_(h);e[s]=()=>a}}},Jb=(t,e)=>{process.env.NODE_ENV!=="production"&&!lp(t.vnode)&&at("Non-function value encountered for default slot. Prefer function slots for better performance.");const n=w_(e);t.slots.default=()=>n},XA=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=hr(e),mm(e,"_",n)):Yb(e,t.slots={})}else t.slots={},e&&Jb(t,e);mm(t.slots,qm,1)},KA=(t,e,n)=>{const{vnode:o,slots:s}=t;let h=!0,a=wn;if(o.shapeFlag&32){const m=e._;m?process.env.NODE_ENV!=="production"&&ou?Un(s,e):n&&m===1?h=!1:(Un(s,e),!n&&m===1&&delete s._):(h=!e.$stable,Yb(e,s)),a=e}else e&&(Jb(t,e),a={default:1});if(h)for(const m in s)!Kb(m)&&!(m in a)&&delete s[m]};function Qb(){return{app:null,config:{isNativeTag:Ox,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let YA=0;function JA(t,e){return function(o,s=null){dr(o)||(o=Object.assign({},o)),s!=null&&!sn(s)&&(process.env.NODE_ENV!=="production"&&at("root props passed to app.mount() must be an object."),s=null);const h=Qb(),a=new Set;let m=!1;const g=h.app={_uid:YA++,_component:o,_props:s,_container:null,_context:h,_instance:null,version:dw,get config(){return h.config},set config(b){process.env.NODE_ENV!=="production"&&at("app.config cannot be replaced. Modify individual options instead.")},use(b,...T){return a.has(b)?process.env.NODE_ENV!=="production"&&at("Plugin has already been applied to target app."):b&&dr(b.install)?(a.add(b),b.install(g,...T)):dr(b)?(a.add(b),b(g,...T)):process.env.NODE_ENV!=="production"&&at('A plugin must either be a function or an object with an "install" function.'),g},mixin(b){return h.mixins.includes(b)?process.env.NODE_ENV!=="production"&&at("Mixin has already been applied to target app"+(b.name?`: ${b.name}`:"")):h.mixins.push(b),g},component(b,T){return process.env.NODE_ENV!=="production"&&M_(b,h.config),T?(process.env.NODE_ENV!=="production"&&h.components[b]&&at(`Component "${b}" has already been registered in target app.`),h.components[b]=T,g):h.components[b]},directive(b,T){return process.env.NODE_ENV!=="production"&&Db(b),T?(process.env.NODE_ENV!=="production"&&h.directives[b]&&at(`Directive "${b}" has already been registered in target app.`),h.directives[b]=T,g):h.directives[b]},mount(b,T,M){if(m)process.env.NODE_ENV!=="production"&&at("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{process.env.NODE_ENV!=="production"&&b.__vue_app__&&at("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const I=Ft(o,s);return I.appContext=h,process.env.NODE_ENV!=="production"&&(h.reload=()=>{t(xs(I),b,M)}),T&&e?e(I,b):t(I,b,M),m=!0,g._container=b,b.__vue_app__=g,process.env.NODE_ENV!=="production"&&(g._instance=I.component,QC(g,dw)),Xm(I.component)||I.component.proxy}},unmount(){m?(t(null,g._container),process.env.NODE_ENV!=="production"&&(g._instance=null,eA(g)),delete g._container.__vue_app__):process.env.NODE_ENV!=="production"&&at("Cannot unmount an app that is not mounted.")},provide(b,T){return process.env.NODE_ENV!=="production"&&b in h.provides&&at(`App already provides property with key "${String(b)}". It will be overwritten with the new value.`),h.provides[b]=T,g}};return g}}function E_(t,e,n,o,s=!1){if(tr(t)){t.forEach((I,P)=>E_(I,e&&(tr(e)?e[P]:e),n,o,s));return}if(sp(o)&&!s)return;const h=o.shapeFlag&4?Xm(o.component)||o.component.proxy:o.el,a=s?null:h,{i:m,r:g}=t;if(process.env.NODE_ENV!=="production"&&!m){at("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const b=e&&e.r,T=m.refs===wn?m.refs={}:m.refs,M=m.setupState;if(b!=null&&b!==g&&(jn(b)?(T[b]=null,Ur(M,b)&&(M[b]=null)):ln(b)&&(b.value=null)),dr(g))ul(g,m,12,[a,T]);else{const I=jn(g),P=ln(g);if(I||P){const z=()=>{if(t.f){const V=I?Ur(M,g)?M[g]:T[g]:g.value;s?tr(V)&&Uv(V,h):tr(V)?V.includes(h)||V.push(h):I?(T[g]=[h],Ur(M,g)&&(M[g]=T[g])):(g.value=[h],t.k&&(T[t.k]=g.value))}else I?(T[g]=a,Ur(M,g)&&(M[g]=a)):P?(g.value=a,t.k&&(T[t.k]=a)):process.env.NODE_ENV!=="production"&&at("Invalid template ref type:",g,`(${typeof g})`)};a?(z.id=-1,qo(z,n)):z()}else process.env.NODE_ENV!=="production"&&at("Invalid template ref type:",g,`(${typeof g})`)}}let up,su;function hl(t,e){t.appContext.config.performance&&jm()&&su.mark(`vue-${e}-${t.uid}`),process.env.NODE_ENV!=="production"&&iA(t,e,jm()?su.now():Date.now())}function fl(t,e){if(t.appContext.config.performance&&jm()){const n=`vue-${e}-${t.uid}`,o=n+":end";su.mark(o),su.measure(`<${Km(t,t.type)}> ${e}`,n,o),su.clearMarks(n),su.clearMarks(o)}process.env.NODE_ENV!=="production"&&oA(t,e,jm()?su.now():Date.now())}function jm(){return up!==void 0||(typeof window<"u"&&window.performance?(up=!0,su=window.performance):up=!1),up}function QA(){const t=[];if(process.env.NODE_ENV!=="production"&&t.length){const e=t.length>1;console.warn(`Feature flag${e?"s":""} ${t.join(", ")} ${e?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const qo=dA;function eP(t){return tP(t)}function tP(t,e){QA();const n=Lx();n.__VUE__=!0,process.env.NODE_ENV!=="production"&&vb(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:o,remove:s,patchProp:h,createElement:a,createText:m,createComment:g,setText:b,setElementText:T,parentNode:M,nextSibling:I,setScopeId:P=Qi,insertStaticContent:z}=t,V=(K,ye,Ne,qe=null,We=null,rt=null,mt=!1,et=null,ut=process.env.NODE_ENV!=="production"&&ou?!1:!!ye.dynamicChildren)=>{if(K===ye)return;K&&!cc(K,ye)&&(qe=qn(K),Jn(K,We,rt,!0),K=null),ye.patchFlag===-2&&(ut=!1,ye.dynamicChildren=null);const{type:Qe,ref:It,shapeFlag:bt}=ye;switch(Qe){case hp:W(K,ye,Ne,qe);break;case Vi:Y(K,ye,Ne,qe);break;case $m:K==null?X(ye,Ne,qe,mt):process.env.NODE_ENV!=="production"&&ue(K,ye,Ne,mt);break;case un:st(K,ye,Ne,qe,We,rt,mt,et,ut);break;default:bt&1?ze(K,ye,Ne,qe,We,rt,mt,et,ut):bt&6?be(K,ye,Ne,qe,We,rt,mt,et,ut):bt&64||bt&128?Qe.process(K,ye,Ne,qe,We,rt,mt,et,ut,Mn):process.env.NODE_ENV!=="production"&&at("Invalid VNode type:",Qe,`(${typeof Qe})`)}It!=null&&We&&E_(It,K&&K.ref,rt,ye||K,!ye)},W=(K,ye,Ne,qe)=>{if(K==null)o(ye.el=m(ye.children),Ne,qe);else{const We=ye.el=K.el;ye.children!==K.children&&b(We,ye.children)}},Y=(K,ye,Ne,qe)=>{K==null?o(ye.el=g(ye.children||""),Ne,qe):ye.el=K.el},X=(K,ye,Ne,qe)=>{[K.el,K.anchor]=z(K.children,ye,Ne,qe,K.el,K.anchor)},ue=(K,ye,Ne,qe)=>{if(ye.children!==K.children){const We=I(K.anchor);ve(K),[ye.el,ye.anchor]=z(ye.children,Ne,We,qe)}else ye.el=K.el,ye.anchor=K.anchor},he=({el:K,anchor:ye},Ne,qe)=>{let We;for(;K&&K!==ye;)We=I(K),o(K,Ne,qe),K=We;o(ye,Ne,qe)},ve=({el:K,anchor:ye})=>{let Ne;for(;K&&K!==ye;)Ne=I(K),s(K),K=Ne;s(ye)},ze=(K,ye,Ne,qe,We,rt,mt,et,ut)=>{mt=mt||ye.type==="svg",K==null?Fe(ye,Ne,qe,We,rt,mt,et,ut):Ie(K,ye,We,rt,mt,et,ut)},Fe=(K,ye,Ne,qe,We,rt,mt,et)=>{let ut,Qe;const{type:It,props:bt,shapeFlag:Lt,transition:Gt,dirs:yr}=K;if(ut=K.el=a(K.type,rt,bt&&bt.is,bt),Lt&8?T(ut,K.children):Lt&16&&Se(K.children,ut,null,qe,We,rt&&It!=="foreignObject",mt,et),yr&&ac(K,null,qe,"created"),Pe(ut,K,K.scopeId,mt,qe),bt){for(const Dr in bt)Dr!=="value"&&!pm(Dr)&&h(ut,Dr,null,bt[Dr],rt,K.children,qe,We,Lr);"value"in bt&&h(ut,"value",null,bt.value),(Qe=bt.onVnodeBeforeMount)&&bs(Qe,qe,K)}process.env.NODE_ENV!=="production"&&(Object.defineProperty(ut,"__vnode",{value:K,enumerable:!1}),Object.defineProperty(ut,"__vueParentComponent",{value:qe,enumerable:!1})),yr&&ac(K,null,qe,"beforeMount");const jr=(!We||We&&!We.pendingBranch)&&Gt&&!Gt.persisted;jr&&Gt.beforeEnter(ut),o(ut,ye,Ne),((Qe=bt&&bt.onVnodeMounted)||jr||yr)&&qo(()=>{Qe&&bs(Qe,qe,K),jr&&Gt.enter(ut),yr&&ac(K,null,qe,"mounted")},We)},Pe=(K,ye,Ne,qe,We)=>{if(Ne&&P(K,Ne),qe)for(let rt=0;rt<qe.length;rt++)P(K,qe[rt]);if(We){let rt=We.subTree;if(process.env.NODE_ENV!=="production"&&rt.patchFlag>0&&rt.patchFlag&2048&&(rt=Eb(rt.children)||rt),ye===rt){const mt=We.vnode;Pe(K,mt,mt.scopeId,mt.slotScopeIds,We.parent)}}},Se=(K,ye,Ne,qe,We,rt,mt,et,ut=0)=>{for(let Qe=ut;Qe<K.length;Qe++){const It=K[Qe]=et?lu(K[Qe]):qa(K[Qe]);V(null,It,ye,Ne,qe,We,rt,mt,et)}},Ie=(K,ye,Ne,qe,We,rt,mt)=>{const et=ye.el=K.el;let{patchFlag:ut,dynamicChildren:Qe,dirs:It}=ye;ut|=K.patchFlag&16;const bt=K.props||wn,Lt=ye.props||wn;let Gt;Ne&&uc(Ne,!1),(Gt=Lt.onVnodeBeforeUpdate)&&bs(Gt,Ne,ye,K),It&&ac(ye,K,Ne,"beforeUpdate"),Ne&&uc(Ne,!0),process.env.NODE_ENV!=="production"&&ou&&(ut=0,mt=!1,Qe=null);const yr=We&&ye.type!=="foreignObject";if(Qe?(Je(K.dynamicChildren,Qe,et,Ne,qe,yr,rt),process.env.NODE_ENV!=="production"&&Ne&&Ne.type.__hmrId&&cp(K,ye)):mt||rr(K,ye,et,null,Ne,qe,yr,rt,!1),ut>0){if(ut&16)$e(et,ye,bt,Lt,Ne,qe,We);else if(ut&2&&bt.class!==Lt.class&&h(et,"class",null,Lt.class,We),ut&4&&h(et,"style",bt.style,Lt.style,We),ut&8){const jr=ye.dynamicProps;for(let Dr=0;Dr<jr.length;Dr++){const Qr=jr[Dr],Qn=bt[Qr],$i=Lt[Qr];($i!==Qn||Qr==="value")&&h(et,Qr,Qn,$i,We,K.children,Ne,qe,Lr)}}ut&1&&K.children!==ye.children&&T(et,ye.children)}else!mt&&Qe==null&&$e(et,ye,bt,Lt,Ne,qe,We);((Gt=Lt.onVnodeUpdated)||It)&&qo(()=>{Gt&&bs(Gt,Ne,ye,K),It&&ac(ye,K,Ne,"updated")},qe)},Je=(K,ye,Ne,qe,We,rt,mt)=>{for(let et=0;et<ye.length;et++){const ut=K[et],Qe=ye[et],It=ut.el&&(ut.type===un||!cc(ut,Qe)||ut.shapeFlag&70)?M(ut.el):Ne;V(ut,Qe,It,null,qe,We,rt,mt,!0)}},$e=(K,ye,Ne,qe,We,rt,mt)=>{if(Ne!==qe){if(Ne!==wn)for(const et in Ne)!pm(et)&&!(et in qe)&&h(K,et,Ne[et],null,mt,ye.children,We,rt,Lr);for(const et in qe){if(pm(et))continue;const ut=qe[et],Qe=Ne[et];ut!==Qe&&et!=="value"&&h(K,et,Qe,ut,mt,ye.children,We,rt,Lr)}"value"in qe&&h(K,"value",Ne.value,qe.value)}},st=(K,ye,Ne,qe,We,rt,mt,et,ut)=>{const Qe=ye.el=K?K.el:m(""),It=ye.anchor=K?K.anchor:m("");let{patchFlag:bt,dynamicChildren:Lt,slotScopeIds:Gt}=ye;process.env.NODE_ENV!=="production"&&(ou||bt&2048)&&(bt=0,ut=!1,Lt=null),Gt&&(et=et?et.concat(Gt):Gt),K==null?(o(Qe,Ne,qe),o(It,Ne,qe),Se(ye.children,Ne,It,We,rt,mt,et,ut)):bt>0&&bt&64&&Lt&&K.dynamicChildren?(Je(K.dynamicChildren,Lt,Ne,We,rt,mt,et),process.env.NODE_ENV!=="production"&&We&&We.type.__hmrId?cp(K,ye):(ye.key!=null||We&&ye===We.subTree)&&cp(K,ye,!0)):rr(K,ye,Ne,It,We,rt,mt,et,ut)},be=(K,ye,Ne,qe,We,rt,mt,et,ut)=>{ye.slotScopeIds=et,K==null?ye.shapeFlag&512?We.ctx.activate(ye,Ne,qe,mt,ut):Ye(ye,Ne,qe,We,rt,mt,ut):ht(K,ye,ut)},Ye=(K,ye,Ne,qe,We,rt,mt)=>{const et=K.component=fP(K,qe,We);if(process.env.NODE_ENV!=="production"&&et.type.__hmrId&&XC(et),process.env.NODE_ENV!=="production"&&(Am(K),hl(et,"mount")),lp(K)&&(et.ctx.renderer=Mn),process.env.NODE_ENV!=="production"&&hl(et,"init"),dP(et),process.env.NODE_ENV!=="production"&&fl(et,"init"),et.asyncDep){if(We&&We.registerDep(et,vt),!K.el){const ut=et.subTree=Ft(Vi);Y(null,ut,ye,Ne)}return}vt(et,K,ye,Ne,We,rt,mt),process.env.NODE_ENV!=="production"&&(Pm(),fl(et,"mount"))},ht=(K,ye,Ne)=>{const qe=ye.component=K.component;if(hA(K,ye,Ne))if(qe.asyncDep&&!qe.asyncResolved){process.env.NODE_ENV!=="production"&&Am(ye),kt(qe,ye,Ne),process.env.NODE_ENV!=="production"&&Pm();return}else qe.next=ye,HC(qe.update),qe.update();else ye.el=K.el,qe.vnode=ye},vt=(K,ye,Ne,qe,We,rt,mt)=>{const et=()=>{if(K.isMounted){let{next:It,bu:bt,u:Lt,parent:Gt,vnode:yr}=K,jr=It,Dr;process.env.NODE_ENV!=="production"&&Am(It||K.vnode),uc(K,!1),It?(It.el=yr.el,kt(K,It,mt)):It=yr,bt&&Kf(bt),(Dr=It.props&&It.props.onVnodeBeforeUpdate)&&bs(Dr,Gt,It,yr),uc(K,!0),process.env.NODE_ENV!=="production"&&hl(K,"render");const Qr=s_(K);process.env.NODE_ENV!=="production"&&fl(K,"render");const Qn=K.subTree;K.subTree=Qr,process.env.NODE_ENV!=="production"&&hl(K,"patch"),V(Qn,Qr,M(Qn.el),qn(Qn),K,We,rt),process.env.NODE_ENV!=="production"&&fl(K,"patch"),It.el=Qr.el,jr===null&&fA(K,Qr.el),Lt&&qo(Lt,We),(Dr=It.props&&It.props.onVnodeUpdated)&&qo(()=>bs(Dr,Gt,It,yr),We),process.env.NODE_ENV!=="production"&&_b(K),process.env.NODE_ENV!=="production"&&Pm()}else{let It;const{el:bt,props:Lt}=ye,{bm:Gt,m:yr,parent:jr}=K,Dr=sp(ye);if(uc(K,!1),Gt&&Kf(Gt),!Dr&&(It=Lt&&Lt.onVnodeBeforeMount)&&bs(It,jr,ye),uc(K,!0),bt&&Wn){const Qr=()=>{process.env.NODE_ENV!=="production"&&hl(K,"render"),K.subTree=s_(K),process.env.NODE_ENV!=="production"&&fl(K,"render"),process.env.NODE_ENV!=="production"&&hl(K,"hydrate"),Wn(bt,K.subTree,K,We,null),process.env.NODE_ENV!=="production"&&fl(K,"hydrate")};Dr?ye.type.__asyncLoader().then(()=>!K.isUnmounted&&Qr()):Qr()}else{process.env.NODE_ENV!=="production"&&hl(K,"render");const Qr=K.subTree=s_(K);process.env.NODE_ENV!=="production"&&fl(K,"render"),process.env.NODE_ENV!=="production"&&hl(K,"patch"),V(null,Qr,Ne,qe,K,We,rt),process.env.NODE_ENV!=="production"&&fl(K,"patch"),ye.el=Qr.el}if(yr&&qo(yr,We),!Dr&&(It=Lt&&Lt.onVnodeMounted)){const Qr=ye;qo(()=>bs(It,jr,Qr),We)}(ye.shapeFlag&256||jr&&sp(jr.vnode)&&jr.vnode.shapeFlag&256)&&K.a&&qo(K.a,We),K.isMounted=!0,process.env.NODE_ENV!=="production"&&tA(K),ye=Ne=qe=null}},ut=K.effect=new Xv(et,()=>Dm(Qe),K.scope),Qe=K.update=()=>ut.run();Qe.id=K.uid,uc(K,!0),process.env.NODE_ENV!=="production"&&(ut.onTrack=K.rtc?It=>Kf(K.rtc,It):void 0,ut.onTrigger=K.rtg?It=>Kf(K.rtg,It):void 0,Qe.ownerInstance=K),Qe()},kt=(K,ye,Ne)=>{ye.component=K;const qe=K.vnode.props;K.vnode=ye,K.next=null,jA(K,ye.props,qe,Ne),KA(K,ye.children,Ne),tc(),pb(),rc()},rr=(K,ye,Ne,qe,We,rt,mt,et,ut=!1)=>{const Qe=K&&K.children,It=K?K.shapeFlag:0,bt=ye.children,{patchFlag:Lt,shapeFlag:Gt}=ye;if(Lt>0){if(Lt&128){zr(Qe,bt,Ne,qe,We,rt,mt,et,ut);return}else if(Lt&256){Nn(Qe,bt,Ne,qe,We,rt,mt,et,ut);return}}Gt&8?(It&16&&Lr(Qe,We,rt),bt!==Qe&&T(Ne,bt)):It&16?Gt&16?zr(Qe,bt,Ne,qe,We,rt,mt,et,ut):Lr(Qe,We,rt,!0):(It&8&&T(Ne,""),Gt&16&&Se(bt,Ne,qe,We,rt,mt,et,ut))},Nn=(K,ye,Ne,qe,We,rt,mt,et,ut)=>{K=K||fh,ye=ye||fh;const Qe=K.length,It=ye.length,bt=Math.min(Qe,It);let Lt;for(Lt=0;Lt<bt;Lt++){const Gt=ye[Lt]=ut?lu(ye[Lt]):qa(ye[Lt]);V(K[Lt],Gt,Ne,null,We,rt,mt,et,ut)}Qe>It?Lr(K,We,rt,!0,!1,bt):Se(ye,Ne,qe,We,rt,mt,et,ut,bt)},zr=(K,ye,Ne,qe,We,rt,mt,et,ut)=>{let Qe=0;const It=ye.length;let bt=K.length-1,Lt=It-1;for(;Qe<=bt&&Qe<=Lt;){const Gt=K[Qe],yr=ye[Qe]=ut?lu(ye[Qe]):qa(ye[Qe]);if(cc(Gt,yr))V(Gt,yr,Ne,null,We,rt,mt,et,ut);else break;Qe++}for(;Qe<=bt&&Qe<=Lt;){const Gt=K[bt],yr=ye[Lt]=ut?lu(ye[Lt]):qa(ye[Lt]);if(cc(Gt,yr))V(Gt,yr,Ne,null,We,rt,mt,et,ut);else break;bt--,Lt--}if(Qe>bt){if(Qe<=Lt){const Gt=Lt+1,yr=Gt<It?ye[Gt].el:qe;for(;Qe<=Lt;)V(null,ye[Qe]=ut?lu(ye[Qe]):qa(ye[Qe]),Ne,yr,We,rt,mt,et,ut),Qe++}}else if(Qe>Lt)for(;Qe<=bt;)Jn(K[Qe],We,rt,!0),Qe++;else{const Gt=Qe,yr=Qe,jr=new Map;for(Qe=yr;Qe<=Lt;Qe++){const In=ye[Qe]=ut?lu(ye[Qe]):qa(ye[Qe]);In.key!=null&&(process.env.NODE_ENV!=="production"&&jr.has(In.key)&&at("Duplicate keys found during update:",JSON.stringify(In.key),"Make sure keys are unique."),jr.set(In.key,Qe))}let Dr,Qr=0;const Qn=Lt-yr+1;let $i=!1,_o=0;const ei=new Array(Qn);for(Qe=0;Qe<Qn;Qe++)ei[Qe]=0;for(Qe=Gt;Qe<=bt;Qe++){const In=K[Qe];if(Qr>=Qn){Jn(In,We,rt,!0);continue}let hi;if(In.key!=null)hi=jr.get(In.key);else for(Dr=yr;Dr<=Lt;Dr++)if(ei[Dr-yr]===0&&cc(In,ye[Dr])){hi=Dr;break}hi===void 0?Jn(In,We,rt,!0):(ei[hi-yr]=Qe+1,hi>=_o?_o=hi:$i=!0,V(In,ye[hi],Ne,null,We,rt,mt,et,ut),Qr++)}const Ri=$i?rP(ei):fh;for(Dr=Ri.length-1,Qe=Qn-1;Qe>=0;Qe--){const In=yr+Qe,hi=ye[In],ss=In+1<It?ye[In+1].el:qe;ei[Qe]===0?V(null,hi,Ne,ss,We,rt,mt,et,ut):$i&&(Dr<0||Qe!==Ri[Dr]?mr(hi,Ne,ss,2):Dr--)}}},mr=(K,ye,Ne,qe,We=null)=>{const{el:rt,type:mt,transition:et,children:ut,shapeFlag:Qe}=K;if(Qe&6){mr(K.component.subTree,ye,Ne,qe);return}if(Qe&128){K.suspense.move(ye,Ne,qe);return}if(Qe&64){mt.move(K,ye,Ne,Mn);return}if(mt===un){o(rt,ye,Ne);for(let bt=0;bt<ut.length;bt++)mr(ut[bt],ye,Ne,qe);o(K.anchor,ye,Ne);return}if(mt===$m){he(K,ye,Ne);return}if(qe!==2&&Qe&1&&et)if(qe===0)et.beforeEnter(rt),o(rt,ye,Ne),qo(()=>et.enter(rt),We);else{const{leave:bt,delayLeave:Lt,afterLeave:Gt}=et,yr=()=>o(rt,ye,Ne),jr=()=>{bt(rt,()=>{yr(),Gt&&Gt()})};Lt?Lt(rt,yr,jr):jr()}else o(rt,ye,Ne)},Jn=(K,ye,Ne,qe=!1,We=!1)=>{const{type:rt,props:mt,ref:et,children:ut,dynamicChildren:Qe,shapeFlag:It,patchFlag:bt,dirs:Lt}=K;if(et!=null&&E_(et,null,Ne,K,!0),It&256){ye.ctx.deactivate(K);return}const Gt=It&1&&Lt,yr=!sp(K);let jr;if(yr&&(jr=mt&&mt.onVnodeBeforeUnmount)&&bs(jr,ye,K),It&6)qr(K.component,Ne,qe);else{if(It&128){K.suspense.unmount(Ne,qe);return}Gt&&ac(K,null,ye,"beforeUnmount"),It&64?K.type.remove(K,ye,Ne,We,Mn,qe):Qe&&(rt!==un||bt>0&&bt&64)?Lr(Qe,ye,Ne,!1,!0):(rt===un&&bt&384||!We&&It&16)&&Lr(ut,ye,Ne),qe&&Fr(K)}(yr&&(jr=mt&&mt.onVnodeUnmounted)||Gt)&&qo(()=>{jr&&bs(jr,ye,K),Gt&&ac(K,null,ye,"unmounted")},Ne)},Fr=K=>{const{type:ye,el:Ne,anchor:qe,transition:We}=K;if(ye===un){process.env.NODE_ENV!=="production"&&K.patchFlag>0&&K.patchFlag&2048&&We&&!We.persisted?K.children.forEach(mt=>{mt.type===Vi?s(mt.el):Fr(mt)}):Gi(Ne,qe);return}if(ye===$m){ve(K);return}const rt=()=>{s(Ne),We&&!We.persisted&&We.afterLeave&&We.afterLeave()};if(K.shapeFlag&1&&We&&!We.persisted){const{leave:mt,delayLeave:et}=We,ut=()=>mt(Ne,rt);et?et(K.el,rt,ut):ut()}else rt()},Gi=(K,ye)=>{let Ne;for(;K!==ye;)Ne=I(K),s(K),K=Ne;s(ye)},qr=(K,ye,Ne)=>{process.env.NODE_ENV!=="production"&&K.type.__hmrId&&KC(K);const{bum:qe,scope:We,update:rt,subTree:mt,um:et}=K;qe&&Kf(qe),We.stop(),rt&&(rt.active=!1,Jn(mt,K,ye,Ne)),et&&qo(et,ye),qo(()=>{K.isUnmounted=!0},ye),ye&&ye.pendingBranch&&!ye.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===ye.pendingId&&(ye.deps--,ye.deps===0&&ye.resolve()),process.env.NODE_ENV!=="production"&&nA(K)},Lr=(K,ye,Ne,qe=!1,We=!1,rt=0)=>{for(let mt=rt;mt<K.length;mt++)Jn(K[mt],ye,Ne,qe,We)},qn=K=>K.shapeFlag&6?qn(K.component.subTree):K.shapeFlag&128?K.suspense.next():I(K.anchor||K.el),Mr=(K,ye,Ne)=>{K==null?ye._vnode&&Jn(ye._vnode,null,null,!0):V(ye._vnode||null,K,ye,null,null,null,Ne),pb(),db(),ye._vnode=K},Mn={p:V,um:Jn,m:mr,r:Fr,mt:Ye,mc:Se,pc:rr,pbc:Je,n:qn,o:t};let ci,Wn;return e&&([ci,Wn]=e(Mn)),{render:Mr,hydrate:ci,createApp:JA(Mr,ci)}}function uc({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function cp(t,e,n=!1){const o=t.children,s=e.children;if(tr(o)&&tr(s))for(let h=0;h<o.length;h++){const a=o[h];let m=s[h];m.shapeFlag&1&&!m.dynamicChildren&&((m.patchFlag<=0||m.patchFlag===32)&&(m=s[h]=lu(s[h]),m.el=a.el),n||cp(a,m)),m.type===hp&&(m.el=a.el),process.env.NODE_ENV!=="production"&&m.type===Vi&&!m.el&&(m.el=a.el)}}function rP(t){const e=t.slice(),n=[0];let o,s,h,a,m;const g=t.length;for(o=0;o<g;o++){const b=t[o];if(b!==0){if(s=n[n.length-1],t[s]<b){e[o]=s,n.push(o);continue}for(h=0,a=n.length-1;h<a;)m=h+a>>1,t[n[m]]<b?h=m+1:a=m;b<t[n[h]]&&(h>0&&(e[o]=n[h-1]),n[h]=o)}}for(h=n.length,a=n[h-1];h-- >0;)n[h]=a,a=e[a];return n}const nP=t=>t.__isTeleport,vh=t=>t&&(t.disabled||t.disabled===""),ew=t=>typeof SVGElement<"u"&&t instanceof SVGElement,S_=(t,e)=>{const n=t&&t.to;if(jn(n))if(e){const o=e(n);return o||process.env.NODE_ENV!=="production"&&at(`Failed to locate Teleport target with selector "${n}". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`),o}else return process.env.NODE_ENV!=="production"&&at("Current renderer does not support string target for Teleports. (missing querySelector renderer option)"),null;else return process.env.NODE_ENV!=="production"&&!n&&!vh(t)&&at(`Invalid Teleport target: ${n}`),n},iP={__isTeleport:!0,process(t,e,n,o,s,h,a,m,g,b){const{mc:T,pc:M,pbc:I,o:{insert:P,querySelector:z,createText:V,createComment:W}}=b,Y=vh(e.props);let{shapeFlag:X,children:ue,dynamicChildren:he}=e;if(process.env.NODE_ENV!=="production"&&ou&&(g=!1,he=null),t==null){const ve=e.el=process.env.NODE_ENV!=="production"?W("teleport start"):V(""),ze=e.anchor=process.env.NODE_ENV!=="production"?W("teleport end"):V("");P(ve,n,o),P(ze,n,o);const Fe=e.target=S_(e.props,z),Pe=e.targetAnchor=V("");Fe?(P(Pe,Fe),a=a||ew(Fe)):process.env.NODE_ENV!=="production"&&!Y&&at("Invalid Teleport target on mount:",Fe,`(${typeof Fe})`);const Se=(Ie,Je)=>{X&16&&T(ue,Ie,Je,s,h,a,m,g)};Y?Se(n,ze):Fe&&Se(Fe,Pe)}else{e.el=t.el;const ve=e.anchor=t.anchor,ze=e.target=t.target,Fe=e.targetAnchor=t.targetAnchor,Pe=vh(t.props),Se=Pe?n:ze,Ie=Pe?ve:Fe;if(a=a||ew(ze),he?(I(t.dynamicChildren,he,Se,s,h,a,m),cp(t,e,!0)):g||M(t,e,Se,Ie,s,h,a,m,!1),Y)Pe||Gm(e,n,ve,b,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const Je=e.target=S_(e.props,z);Je?Gm(e,Je,null,b,0):process.env.NODE_ENV!=="production"&&at("Invalid Teleport target on update:",ze,`(${typeof ze})`)}else Pe&&Gm(e,ze,Fe,b,1)}rw(e)},remove(t,e,n,o,{um:s,o:{remove:h}},a){const{shapeFlag:m,children:g,anchor:b,targetAnchor:T,target:M,props:I}=t;if(M&&h(T),(a||!vh(I))&&(h(b),m&16))for(let P=0;P<g.length;P++){const z=g[P];s(z,e,n,!0,!!z.dynamicChildren)}},move:Gm,hydrate:oP};function Gm(t,e,n,{o:{insert:o},m:s},h=2){h===0&&o(t.targetAnchor,e,n);const{el:a,anchor:m,shapeFlag:g,children:b,props:T}=t,M=h===2;if(M&&o(a,e,n),(!M||vh(T))&&g&16)for(let I=0;I<b.length;I++)s(b[I],e,n,2);M&&o(m,e,n)}function oP(t,e,n,o,s,h,{o:{nextSibling:a,parentNode:m,querySelector:g}},b){const T=e.target=S_(e.props,g);if(T){const M=T._lpa||T.firstChild;if(e.shapeFlag&16)if(vh(e.props))e.anchor=b(a(t),e,m(t),n,o,s,h),e.targetAnchor=M;else{e.anchor=a(t);let I=M;for(;I;)if(I=a(I),I&&I.nodeType===8&&I.data==="teleport anchor"){e.targetAnchor=I,T._lpa=e.targetAnchor&&a(e.targetAnchor);break}b(M,e,T,n,o,s,h)}rw(e)}return e.anchor&&a(e.anchor)}const tw=iP;function rw(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const un=Symbol(process.env.NODE_ENV!=="production"?"Fragment":void 0),hp=Symbol(process.env.NODE_ENV!=="production"?"Text":void 0),Vi=Symbol(process.env.NODE_ENV!=="production"?"Comment":void 0),$m=Symbol(process.env.NODE_ENV!=="production"?"Static":void 0),fp=[];let $a=null;function Ve(t=!1){fp.push($a=t?null:[])}function aP(){fp.pop(),$a=fp[fp.length-1]||null}let pp=1;function nw(t){pp+=t}function iw(t){return t.dynamicChildren=pp>0?$a||fh:null,aP(),pp>0&&$a&&$a.push(t),t}function nt(t,e,n,o,s,h){return iw(Re(t,e,n,o,s,h,!0))}function en(t,e,n,o,s){return iw(Ft(t,e,n,o,s,!0))}function _h(t){return t?t.__v_isVNode===!0:!1}function cc(t,e){return process.env.NODE_ENV!=="production"&&e.shapeFlag&6&&yh.has(e.type)?(t.shapeFlag&=-257,e.shapeFlag&=-513,!1):t.type===e.type&&t.key===e.key}const sP=(...t)=>aw(...t),qm="__vInternal",ow=({key:t})=>t!=null?t:null,Wm=({ref:t,ref_key:e,ref_for:n})=>t!=null?jn(t)||ln(t)||dr(t)?{i:Di,r:t,k:e,f:!!n}:t:null;function Re(t,e=null,n=null,o=0,s=null,h=t===un?0:1,a=!1,m=!1){const g={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ow(e),ref:e&&Wm(e),scopeId:wb,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:h,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Di};return m?(T_(g,n),h&128&&t.normalize(g)):n&&(g.shapeFlag|=jn(n)?8:16),process.env.NODE_ENV!=="production"&&g.key!==g.key&&at("VNode created with invalid key (NaN). VNode type:",g.type),pp>0&&!a&&$a&&(g.patchFlag>0||h&6)&&g.patchFlag!==32&&$a.push(g),g}const Ft=process.env.NODE_ENV!=="production"?sP:aw;function aw(t,e=null,n=null,o=0,s=null,h=!1){if((!t||t===CA)&&(process.env.NODE_ENV!=="production"&&!t&&at(`Invalid vnode type when creating vnode: ${t}.`),t=Vi),_h(t)){const m=xs(t,e,!0);return n&&T_(m,n),pp>0&&!h&&$a&&(m.shapeFlag&6?$a[$a.indexOf(t)]=m:$a.push(m)),m.patchFlag|=-2,m}if(fw(t)&&(t=t.__vccOpts),e){e=lP(e);let{class:m,style:g}=e;m&&!jn(m)&&(e.class=Pr(m)),sn(g)&&(Cm(g)&&!tr(g)&&(g=Un({},g)),e.style=Ql(g))}const a=jn(t)?1:pA(t)?128:nP(t)?64:sn(t)?4:dr(t)?2:0;return process.env.NODE_ENV!=="production"&&a&4&&Cm(t)&&(t=hr(t),at("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,t)),Re(t,e,n,o,s,a,h,!0)}function lP(t){return t?Cm(t)||qm in t?Un({},t):t:null}function xs(t,e,n=!1){const{props:o,ref:s,patchFlag:h,children:a}=t,m=e?uP(o||{},e):o;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:m,key:m&&ow(m),ref:e&&e.ref?n&&s?tr(s)?s.concat(Wm(e)):[s,Wm(e)]:Wm(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:process.env.NODE_ENV!=="production"&&h===-1&&tr(a)?a.map(sw):a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==un?h===-1?16:h|16:h,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&xs(t.ssContent),ssFallback:t.ssFallback&&xs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function sw(t){const e=xs(t);return tr(t.children)&&(e.children=t.children.map(sw)),e}function Hm(t=" ",e=0){return Ft(hp,null,t,e)}function Ke(t="",e=!1){return e?(Ve(),en(Vi,null,t)):Ft(Vi,null,t)}function qa(t){return t==null||typeof t=="boolean"?Ft(Vi):tr(t)?Ft(un,null,t.slice()):typeof t=="object"?lu(t):Ft(hp,null,String(t))}function lu(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:xs(t)}function T_(t,e){let n=0;const{shapeFlag:o}=t;if(e==null)e=null;else if(tr(e))n=16;else if(typeof e=="object")if(o&65){const s=e.default;s&&(s._c&&(s._d=!1),T_(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(qm in e)?e._ctx=Di:s===3&&Di&&(Di.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else dr(e)?(e={default:e,_ctx:Di},n=32):(e=String(e),o&64?(n=16,e=[Hm(e)]):n=8);t.children=e,t.shapeFlag|=n}function uP(...t){const e={};for(let n=0;n<t.length;n++){const o=t[n];for(const s in o)if(s==="class")e.class!==o.class&&(e.class=Pr([e.class,o.class]));else if(s==="style")e.style=Ql([e.style,o.style]);else if(Zf(s)){const h=e[s],a=o[s];a&&h!==a&&!(tr(h)&&h.includes(a))&&(e[s]=h?[].concat(h,a):a)}else s!==""&&(e[s]=o[s])}return e}function bs(t,e,n,o=null){Ea(t,e,7,[n,o])}const cP=Qb();let hP=0;function fP(t,e,n){const o=t.type,s=(e?e.appContext:t.appContext)||cP,h={uid:hP++,vnode:t,type:o,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Dx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gb(o,s),emitsOptions:bb(o,s),emit:null,emitted:null,propsDefaults:wn,inheritAttrs:o.inheritAttrs,ctx:wn,data:wn,props:wn,attrs:wn,slots:wn,refs:wn,setupState:wn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return process.env.NODE_ENV!=="production"?h.ctx=PA(h):h.ctx={_:h},h.root=e?e.root:h,h.emit=sA.bind(null,h),t.ce&&t.ce(h),h}let ai=null;const Zm=()=>ai||Di,xh=t=>{ai=t,t.scope.on()},hc=()=>{ai&&ai.scope.off(),ai=null},pP=Jl("slot,component");function M_(t,e){const n=e.isNativeTag||Ox;(pP(t)||n(t))&&at("Do not use built-in or reserved HTML elements as component id: "+t)}function lw(t){return t.vnode.shapeFlag&4}let dp=!1;function dP(t,e=!1){dp=e;const{props:n,children:o}=t.vnode,s=lw(t);VA(t,n,s,e),XA(t,o);const h=s?mP(t,e):void 0;return dp=!1,h}function mP(t,e){var n;const o=t.type;if(process.env.NODE_ENV!=="production"){if(o.name&&M_(o.name,t.appContext.config),o.components){const h=Object.keys(o.components);for(let a=0;a<h.length;a++)M_(h[a],t.appContext.config)}if(o.directives){const h=Object.keys(o.directives);for(let a=0;a<h.length;a++)Db(h[a])}o.compilerOptions&&yP()&&at('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}t.accessCache=Object.create(null),t.proxy=Ga(new Proxy(t.ctx,Fb)),process.env.NODE_ENV!=="production"&&kA(t);const{setup:s}=o;if(s){const h=t.setupContext=s.length>1?gP(t):null;xh(t),tc();const a=ul(s,t,0,[process.env.NODE_ENV!=="production"?dh(t.props):t.props,h]);if(rc(),hc(),Gv(a)){if(a.then(hc,hc),e)return a.then(m=>{uw(t,m,e)}).catch(m=>{km(m,t,0)});if(t.asyncDep=a,process.env.NODE_ENV!=="production"&&!t.suspense){const m=(n=o.name)!==null&&n!==void 0?n:"Anonymous";at(`Component <${m}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else uw(t,a,e)}else cw(t,e)}function uw(t,e,n){dr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:sn(e)?(process.env.NODE_ENV!=="production"&&_h(e)&&at("setup() should not return VNodes directly - return a render function instead."),process.env.NODE_ENV!=="production"&&(t.devtoolsRawSetupState=e),t.setupState=ab(e),process.env.NODE_ENV!=="production"&&LA(t)):process.env.NODE_ENV!=="production"&&e!==void 0&&at(`setup() should return an object. Received: ${e===null?"null":typeof e}`),cw(t,n)}let I_;const yP=()=>!I_;function cw(t,e,n){const o=t.type;if(!t.render){if(!e&&I_&&!o.render){const s=o.template||v_(t).template;if(s){process.env.NODE_ENV!=="production"&&hl(t,"compile");const{isCustomElement:h,compilerOptions:a}=t.appContext.config,{delimiters:m,compilerOptions:g}=o,b=Un(Un({isCustomElement:h,delimiters:m},a),g);o.render=I_(s,b),process.env.NODE_ENV!=="production"&&fl(t,"compile")}}t.render=o.render||Qi}xh(t),tc(),NA(t),rc(),hc(),process.env.NODE_ENV!=="production"&&!o.render&&t.render===Qi&&!e&&(o.template?at('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):at("Component is missing template or render function."))}function hw(t){return new Proxy(t.attrs,process.env.NODE_ENV!=="production"?{get(e,n){return zm(),Co(t,"get","$attrs"),e[n]},set(){return at("setupContext.attrs is readonly."),!1},deleteProperty(){return at("setupContext.attrs is readonly."),!1}}:{get(e,n){return Co(t,"get","$attrs"),e[n]}})}function gP(t){const e=o=>{if(process.env.NODE_ENV!=="production"&&(t.exposed&&at("expose() should be called only once per setup()."),o!=null)){let s=typeof o;s==="object"&&(tr(o)?s="array":ln(o)&&(s="ref")),s!=="object"&&at(`expose() should be passed a plain object, received ${s}.`)}t.exposed=o||{}};let n;return process.env.NODE_ENV!=="production"?Object.freeze({get attrs(){return n||(n=hw(t))},get slots(){return dh(t.slots)},get emit(){return(o,...s)=>t.emit(o,...s)},expose:e}):{get attrs(){return n||(n=hw(t))},slots:t.slots,emit:t.emit,expose:e}}function Xm(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ab(Ga(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in sc)return sc[n](t)},has(e,n){return n in e||n in sc}}))}const vP=/(?:^|[-_])(\w)/g,_P=t=>t.replace(vP,e=>e.toUpperCase()).replace(/[-_]/g,"");function O_(t,e=!0){return dr(t)?t.displayName||t.name:t.name||e&&t.__name}function Km(t,e,n=!1){let o=O_(e);if(!o&&e.__file){const s=e.__file.match(/([^/\\]+)\.\w+$/);s&&(o=s[1])}if(!o&&t&&t.parent){const s=h=>{for(const a in h)if(h[a]===e)return a};o=s(t.components||t.parent.type.components)||s(t.appContext.components)}return o?_P(o):n?"App":"Anonymous"}function fw(t){return dr(t)&&"__vccOpts"in t}const ar=(t,e)=>FC(t,e,dp);function pw(t,e,n){const o=arguments.length;return o===2?sn(e)&&!tr(e)?_h(e)?Ft(t,null,[e]):Ft(t,e):Ft(t,null,e):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&_h(n)&&(n=[n]),Ft(t,e,n))}const xP=Symbol(process.env.NODE_ENV!=="production"?"ssrContext":""),bP=()=>{{const t=gh(xP);return t||process.env.NODE_ENV!=="production"&&at("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),t}};function C_(t){return!!(t&&t.__v_isShallow)}function wP(){if(process.env.NODE_ENV==="production"||typeof window>"u")return;const t={style:"color:#3ba776"},e={style:"color:#0b1bc9"},n={style:"color:#b62e24"},o={style:"color:#9d288c"},s={header(M){return sn(M)?M.__isVue?["div",t,"VueInstance"]:ln(M)?["div",{},["span",t,T(M)],"<",m(M.value),">"]:ja(M)?["div",{},["span",t,C_(M)?"ShallowReactive":"Reactive"],"<",m(M),`>${nu(M)?" (readonly)":""}`]:nu(M)?["div",{},["span",t,C_(M)?"ShallowReadonly":"Readonly"],"<",m(M),">"]:null:null},hasBody(M){return M&&M.__isVue},body(M){if(M&&M.__isVue)return["div",{},...h(M.$)]}};function h(M){const I=[];M.type.props&&M.props&&I.push(a("props",hr(M.props))),M.setupState!==wn&&I.push(a("setup",M.setupState)),M.data!==wn&&I.push(a("data",hr(M.data)));const P=g(M,"computed");P&&I.push(a("computed",P));const z=g(M,"inject");return z&&I.push(a("injected",z)),I.push(["div",{},["span",{style:o.style+";opacity:0.66"},"$ (internal): "],["object",{object:M}]]),I}function a(M,I){return I=Un({},I),Object.keys(I).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},M],["div",{style:"padding-left:1.25em"},...Object.keys(I).map(P=>["div",{},["span",o,P+": "],m(I[P],!1)])]]:["span",{}]}function m(M,I=!0){return typeof M=="number"?["span",e,M]:typeof M=="string"?["span",n,JSON.stringify(M)]:typeof M=="boolean"?["span",o,M]:sn(M)?["object",{object:I?hr(M):M}]:["span",n,String(M)]}function g(M,I){const P=M.type;if(dr(P))return;const z={};for(const V in M.ctx)b(P,V,I)&&(z[V]=M.ctx[V]);return z}function b(M,I,P){const z=M[P];if(tr(z)&&z.includes(I)||sn(z)&&I in z||M.extends&&b(M.extends,I,P)||M.mixins&&M.mixins.some(V=>b(V,I,P)))return!0}function T(M){return C_(M)?"ShallowRef":M.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(s):window.devtoolsFormatters=[s]}const dw="3.2.47",EP="http://www.w3.org/2000/svg",fc=typeof document<"u"?document:null,mw=fc&&fc.createElement("template"),SP={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,o)=>{const s=e?fc.createElementNS(EP,t):fc.createElement(t,n?{is:n}:void 0);return t==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:t=>fc.createTextNode(t),createComment:t=>fc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>fc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,o,s,h){const a=n?n.previousSibling:e.lastChild;if(s&&(s===h||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===h||!(s=s.nextSibling)););else{mw.innerHTML=o?`<svg>${t}</svg>`:t;const m=mw.content;if(o){const g=m.firstChild;for(;g.firstChild;)m.appendChild(g.firstChild);m.removeChild(g)}e.insertBefore(m,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function TP(t,e,n){const o=t._vtc;o&&(e=(e?[e,...o]:[...o]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function MP(t,e,n){const o=t.style,s=jn(n);if(n&&!s){if(e&&!jn(e))for(const h in e)n[h]==null&&A_(o,h,"");for(const h in n)A_(o,h,n[h])}else{const h=o.display;s?e!==n&&(o.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(o.display=h)}}const IP=/[^\\];\s*$/,yw=/\s*!important$/;function A_(t,e,n){if(tr(n))n.forEach(o=>A_(t,e,o));else if(n==null&&(n=""),process.env.NODE_ENV!=="production"&&IP.test(n)&&at(`Unexpected semicolon at the end of '${e}' style value: '${n}'`),e.startsWith("--"))t.setProperty(e,n);else{const o=OP(t,e);yw.test(n)?t.setProperty($o(o),n.replace(yw,""),"important"):t[o]=n}}const gw=["Webkit","Moz","ms"],P_={};function OP(t,e){const n=P_[e];if(n)return n;let o=aa(e);if(o!=="filter"&&o in t)return P_[e]=o;o=Ju(o);for(let s=0;s<gw.length;s++){const h=gw[s]+o;if(h in t)return P_[e]=h}return e}const vw="http://www.w3.org/1999/xlink";function CP(t,e,n,o,s){if(o&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(vw,e.slice(6,e.length)):t.setAttributeNS(vw,e,n);else{const h=KO(e);n==null||h&&!Mx(n)?t.removeAttribute(e):t.setAttribute(e,h?"":n)}}function AP(t,e,n,o,s,h,a){if(e==="innerHTML"||e==="textContent"){o&&a(o,s,h),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const g=n==null?"":n;(t.value!==g||t.tagName==="OPTION")&&(t.value=g),n==null&&t.removeAttribute(e);return}let m=!1;if(n===""||n==null){const g=typeof t[e];g==="boolean"?n=Mx(n):n==null&&g==="string"?(n="",m=!0):g==="number"&&(n=0,m=!0)}try{t[e]=n}catch(g){process.env.NODE_ENV!=="production"&&!m&&at(`Failed setting prop "${e}" on <${t.tagName.toLowerCase()}>: value ${n} is invalid.`,g)}m&&t.removeAttribute(e)}function PP(t,e,n,o){t.addEventListener(e,n,o)}function kP(t,e,n,o){t.removeEventListener(e,n,o)}function LP(t,e,n,o,s=null){const h=t._vei||(t._vei={}),a=h[e];if(o&&a)a.value=o;else{const[m,g]=DP(e);if(o){const b=h[e]=zP(o,s);PP(t,m,b,g)}else a&&(kP(t,m,a,g),h[e]=void 0)}}const _w=/(?:Once|Passive|Capture)$/;function DP(t){let e;if(_w.test(t)){e={};let o;for(;o=t.match(_w);)t=t.slice(0,t.length-o[0].length),e[o[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):$o(t.slice(2)),e]}let k_=0;const NP=Promise.resolve(),RP=()=>k_||(NP.then(()=>k_=0),k_=Date.now());function zP(t,e){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Ea(FP(o,n.value),e,5,[o])};return n.value=t,n.attached=RP(),n}function FP(t,e){if(tr(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(o=>s=>!s._stopped&&o&&o(s))}else return e}const xw=/^on[a-z]/,BP=(t,e,n,o,s=!1,h,a,m,g)=>{e==="class"?TP(t,o,s):e==="style"?MP(t,n,o):Zf(e)?hm(e)||LP(t,e,n,o,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):VP(t,e,o,s))?AP(t,e,o,h,a,m,g):(e==="true-value"?t._trueValue=o:e==="false-value"&&(t._falseValue=o),CP(t,e,o,s))};function VP(t,e,n,o){return o?!!(e==="innerHTML"||e==="textContent"||e in t&&xw.test(e)&&dr(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||xw.test(e)&&jn(n)?!1:e in t}const uu="transition",mp="animation",Ym=(t,{slots:e})=>pw(Ob,UP(t),e);Ym.displayName="Transition";const bw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Ym.props=Un({},Ob.props,bw);const pc=(t,e=[])=>{tr(t)?t.forEach(n=>n(...e)):t&&t(...e)},ww=t=>t?tr(t)?t.some(e=>e.length>1):t.length>1:!1;function UP(t){const e={};for(const $e in t)$e in bw||(e[$e]=t[$e]);if(t.css===!1)return e;const{name:n="v",type:o,duration:s,enterFromClass:h=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:m=`${n}-enter-to`,appearFromClass:g=h,appearActiveClass:b=a,appearToClass:T=m,leaveFromClass:M=`${n}-leave-from`,leaveActiveClass:I=`${n}-leave-active`,leaveToClass:P=`${n}-leave-to`}=t,z=jP(s),V=z&&z[0],W=z&&z[1],{onBeforeEnter:Y,onEnter:X,onEnterCancelled:ue,onLeave:he,onLeaveCancelled:ve,onBeforeAppear:ze=Y,onAppear:Fe=X,onAppearCancelled:Pe=ue}=e,Se=($e,st,be)=>{dc($e,st?T:m),dc($e,st?b:a),be&&be()},Ie=($e,st)=>{$e._isLeaving=!1,dc($e,M),dc($e,P),dc($e,I),st&&st()},Je=$e=>(st,be)=>{const Ye=$e?Fe:X,ht=()=>Se(st,$e,be);pc(Ye,[st,ht]),Ew(()=>{dc(st,$e?g:h),cu(st,$e?T:m),ww(Ye)||Sw(st,o,V,ht)})};return Un(e,{onBeforeEnter($e){pc(Y,[$e]),cu($e,h),cu($e,a)},onBeforeAppear($e){pc(ze,[$e]),cu($e,g),cu($e,b)},onEnter:Je(!1),onAppear:Je(!0),onLeave($e,st){$e._isLeaving=!0;const be=()=>Ie($e,st);cu($e,M),qP(),cu($e,I),Ew(()=>{!$e._isLeaving||(dc($e,M),cu($e,P),ww(he)||Sw($e,o,W,be))}),pc(he,[$e,be])},onEnterCancelled($e){Se($e,!1),pc(ue,[$e])},onAppearCancelled($e){Se($e,!0),pc(Pe,[$e])},onLeaveCancelled($e){Ie($e),pc(ve,[$e])}})}function jP(t){if(t==null)return null;if(sn(t))return[L_(t.enter),L_(t.leave)];{const e=L_(t);return[e,e]}}function L_(t){const e=Wv(t);return process.env.NODE_ENV!=="production"&&GC(e,"<transition> explicit duration"),e}function cu(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function dc(t,e){e.split(/\s+/).forEach(o=>o&&t.classList.remove(o));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Ew(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let GP=0;function Sw(t,e,n,o){const s=t._endId=++GP,h=()=>{s===t._endId&&o()};if(n)return setTimeout(h,n);const{type:a,timeout:m,propCount:g}=$P(t,e);if(!a)return o();const b=a+"end";let T=0;const M=()=>{t.removeEventListener(b,I),h()},I=P=>{P.target===t&&++T>=g&&M()};setTimeout(()=>{T<g&&M()},m+1),t.addEventListener(b,I)}function $P(t,e){const n=window.getComputedStyle(t),o=z=>(n[z]||"").split(", "),s=o(`${uu}Delay`),h=o(`${uu}Duration`),a=Tw(s,h),m=o(`${mp}Delay`),g=o(`${mp}Duration`),b=Tw(m,g);let T=null,M=0,I=0;e===uu?a>0&&(T=uu,M=a,I=h.length):e===mp?b>0&&(T=mp,M=b,I=g.length):(M=Math.max(a,b),T=M>0?a>b?uu:mp:null,I=T?T===uu?h.length:g.length:0);const P=T===uu&&/\b(transform|all)(,|$)/.test(o(`${uu}Property`).toString());return{type:T,timeout:M,propCount:I,hasTransform:P}}function Tw(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,o)=>Mw(n)+Mw(t[o])))}function Mw(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function qP(){return document.body.offsetHeight}const WP=["ctrl","shift","alt","meta"],HP={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>WP.some(n=>t[`${n}Key`]&&!e.includes(n))},ws=(t,e)=>(n,...o)=>{for(let s=0;s<e.length;s++){const h=HP[e[s]];if(h&&h(n,e))return}return t(n,...o)},ZP={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Es=(t,e)=>n=>{if(!("key"in n))return;const o=$o(n.key);if(e.some(s=>s===o||ZP[s]===o))return t(n)},XP=Un({patchProp:BP},SP);let Iw;function Ow(){return Iw||(Iw=eP(XP))}const Cw=(...t)=>{Ow().render(...t)},KP=(...t)=>{const e=Ow().createApp(...t);process.env.NODE_ENV!=="production"&&(YP(e),JP(e));const{mount:n}=e;return e.mount=o=>{const s=QP(o);if(!s)return;const h=e._component;!dr(h)&&!h.render&&!h.template&&(h.template=s.innerHTML),s.innerHTML="";const a=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function YP(t){Object.defineProperty(t.config,"isNativeTag",{value:e=>ZO(e)||XO(e),writable:!1})}function JP(t){{const e=t.config.isCustomElement;Object.defineProperty(t.config,"isCustomElement",{get(){return e},set(){at("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const n=t.config.compilerOptions,o='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom';Object.defineProperty(t.config,"compilerOptions",{get(){return at(o),n},set(){at(o)}})}}function QP(t){if(jn(t)){const e=document.querySelector(t);return process.env.NODE_ENV!=="production"&&!e&&at(`Failed to mount app: mount target selector "${t}" returned null.`),e}return process.env.NODE_ENV!=="production"&&window.ShadowRoot&&t instanceof window.ShadowRoot&&t.mode==="closed"&&at('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),t}function ek(){wP()}process.env.NODE_ENV!=="production"&&ek();/*! @license DOMPurify 2.4.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.5/LICENSE */function hu(t){return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hu(t)}function D_(t,e){return D_=Object.setPrototypeOf||function(o,s){return o.__proto__=s,o},D_(t,e)}function tk(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jm(t,e,n){return tk()?Jm=Reflect.construct:Jm=function(s,h,a){var m=[null];m.push.apply(m,h);var g=Function.bind.apply(s,m),b=new g;return a&&D_(b,a.prototype),b},Jm.apply(null,arguments)}function Wa(t){return rk(t)||nk(t)||ik(t)||ok()}function rk(t){if(Array.isArray(t))return N_(t)}function nk(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ik(t,e){if(!!t){if(typeof t=="string")return N_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N_(t,e)}}function N_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function ok(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ak=Object.hasOwnProperty,Aw=Object.setPrototypeOf,sk=Object.isFrozen,lk=Object.getPrototypeOf,uk=Object.getOwnPropertyDescriptor,Po=Object.freeze,Ha=Object.seal,ck=Object.create,Pw=typeof Reflect<"u"&&Reflect,Qm=Pw.apply,R_=Pw.construct;Qm||(Qm=function(e,n,o){return e.apply(n,o)}),Po||(Po=function(e){return e}),Ha||(Ha=function(e){return e}),R_||(R_=function(e,n){return Jm(e,Wa(n))});var hk=Ma(Array.prototype.forEach),kw=Ma(Array.prototype.pop),yp=Ma(Array.prototype.push),ey=Ma(String.prototype.toLowerCase),z_=Ma(String.prototype.toString),fk=Ma(String.prototype.match),Za=Ma(String.prototype.replace),pk=Ma(String.prototype.indexOf),dk=Ma(String.prototype.trim),ko=Ma(RegExp.prototype.test),F_=mk(TypeError);function Ma(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return Qm(t,e,o)}}function mk(t){return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return R_(t,n)}}function kr(t,e,n){n=n||ey,Aw&&Aw(t,null);for(var o=e.length;o--;){var s=e[o];if(typeof s=="string"){var h=n(s);h!==s&&(sk(e)||(e[o]=h),s=h)}t[s]=!0}return t}function mc(t){var e=ck(null),n;for(n in t)Qm(ak,t,[n])===!0&&(e[n]=t[n]);return e}function ty(t,e){for(;t!==null;){var n=uk(t,e);if(n){if(n.get)return Ma(n.get);if(typeof n.value=="function")return Ma(n.value)}t=lk(t)}function o(s){return console.warn("fallback value for",s),null}return o}var Lw=Po(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),B_=Po(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),V_=Po(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yk=Po(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U_=Po(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),gk=Po(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Dw=Po(["#text"]),Nw=Po(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),j_=Po(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Rw=Po(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ry=Po(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vk=Ha(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_k=Ha(/<%[\w\W]*|[\w\W]*%>/gm),xk=Ha(/\${[\w\W]*}/gm),bk=Ha(/^data-[\-\w.\u00B7-\uFFFF]/),wk=Ha(/^aria-[\-\w]+$/),Ek=Ha(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Sk=Ha(/^(?:\w+script|data):/i),Tk=Ha(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Mk=Ha(/^html$/i),Ik=function(){return typeof window>"u"?null:window},Ok=function(e,n){if(hu(e)!=="object"||typeof e.createPolicy!="function")return null;var o=null,s="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(s)&&(o=n.currentScript.getAttribute(s));var h="dompurify"+(o?"#"+o:"");try{return e.createPolicy(h,{createHTML:function(m){return m},createScriptURL:function(m){return m}})}catch{return console.warn("TrustedTypes policy "+h+" could not be created."),null}};function zw(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ik(),e=function(fe){return zw(fe)};if(e.version="2.4.5",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var n=t.document,o=t.document,s=t.DocumentFragment,h=t.HTMLTemplateElement,a=t.Node,m=t.Element,g=t.NodeFilter,b=t.NamedNodeMap,T=b===void 0?t.NamedNodeMap||t.MozNamedAttrMap:b,M=t.HTMLFormElement,I=t.DOMParser,P=t.trustedTypes,z=m.prototype,V=ty(z,"cloneNode"),W=ty(z,"nextSibling"),Y=ty(z,"childNodes"),X=ty(z,"parentNode");if(typeof h=="function"){var ue=o.createElement("template");ue.content&&ue.content.ownerDocument&&(o=ue.content.ownerDocument)}var he=Ok(P,n),ve=he?he.createHTML(""):"",ze=o,Fe=ze.implementation,Pe=ze.createNodeIterator,Se=ze.createDocumentFragment,Ie=ze.getElementsByTagName,Je=n.importNode,$e={};try{$e=mc(o).documentMode?o.documentMode:{}}catch{}var st={};e.isSupported=typeof X=="function"&&Fe&&typeof Fe.createHTMLDocument<"u"&&$e!==9;var be=vk,Ye=_k,ht=xk,vt=bk,kt=wk,rr=Sk,Nn=Tk,zr=Ek,mr=null,Jn=kr({},[].concat(Wa(Lw),Wa(B_),Wa(V_),Wa(U_),Wa(Dw))),Fr=null,Gi=kr({},[].concat(Wa(Nw),Wa(j_),Wa(Rw),Wa(ry))),qr=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Lr=null,qn=null,Mr=!0,Mn=!0,ci=!1,Wn=!0,K=!1,ye=!1,Ne=!1,qe=!1,We=!1,rt=!1,mt=!1,et=!0,ut=!1,Qe="user-content-",It=!0,bt=!1,Lt={},Gt=null,yr=kr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),jr=null,Dr=kr({},["audio","video","img","source","image","track"]),Qr=null,Qn=kr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),$i="http://www.w3.org/1998/Math/MathML",_o="http://www.w3.org/2000/svg",ei="http://www.w3.org/1999/xhtml",Ri=ei,In=!1,hi=null,ss=kr({},[$i,_o,ei],z_),Xo,ls=["application/xhtml+xml","text/html"],ma="text/html",pn,Fo=null,Ml=o.createElement("form"),Sn=function(fe){return fe instanceof RegExp||fe instanceof Function},N=function(fe){Fo&&Fo===fe||((!fe||hu(fe)!=="object")&&(fe={}),fe=mc(fe),Xo=ls.indexOf(fe.PARSER_MEDIA_TYPE)===-1?Xo=ma:Xo=fe.PARSER_MEDIA_TYPE,pn=Xo==="application/xhtml+xml"?z_:ey,mr="ALLOWED_TAGS"in fe?kr({},fe.ALLOWED_TAGS,pn):Jn,Fr="ALLOWED_ATTR"in fe?kr({},fe.ALLOWED_ATTR,pn):Gi,hi="ALLOWED_NAMESPACES"in fe?kr({},fe.ALLOWED_NAMESPACES,z_):ss,Qr="ADD_URI_SAFE_ATTR"in fe?kr(mc(Qn),fe.ADD_URI_SAFE_ATTR,pn):Qn,jr="ADD_DATA_URI_TAGS"in fe?kr(mc(Dr),fe.ADD_DATA_URI_TAGS,pn):Dr,Gt="FORBID_CONTENTS"in fe?kr({},fe.FORBID_CONTENTS,pn):yr,Lr="FORBID_TAGS"in fe?kr({},fe.FORBID_TAGS,pn):{},qn="FORBID_ATTR"in fe?kr({},fe.FORBID_ATTR,pn):{},Lt="USE_PROFILES"in fe?fe.USE_PROFILES:!1,Mr=fe.ALLOW_ARIA_ATTR!==!1,Mn=fe.ALLOW_DATA_ATTR!==!1,ci=fe.ALLOW_UNKNOWN_PROTOCOLS||!1,Wn=fe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,K=fe.SAFE_FOR_TEMPLATES||!1,ye=fe.WHOLE_DOCUMENT||!1,We=fe.RETURN_DOM||!1,rt=fe.RETURN_DOM_FRAGMENT||!1,mt=fe.RETURN_TRUSTED_TYPE||!1,qe=fe.FORCE_BODY||!1,et=fe.SANITIZE_DOM!==!1,ut=fe.SANITIZE_NAMED_PROPS||!1,It=fe.KEEP_CONTENT!==!1,bt=fe.IN_PLACE||!1,zr=fe.ALLOWED_URI_REGEXP||zr,Ri=fe.NAMESPACE||ei,qr=fe.CUSTOM_ELEMENT_HANDLING||{},fe.CUSTOM_ELEMENT_HANDLING&&Sn(fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(qr.tagNameCheck=fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&Sn(fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(qr.attributeNameCheck=fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&typeof fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(qr.allowCustomizedBuiltInElements=fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K&&(Mn=!1),rt&&(We=!0),Lt&&(mr=kr({},Wa(Dw)),Fr=[],Lt.html===!0&&(kr(mr,Lw),kr(Fr,Nw)),Lt.svg===!0&&(kr(mr,B_),kr(Fr,j_),kr(Fr,ry)),Lt.svgFilters===!0&&(kr(mr,V_),kr(Fr,j_),kr(Fr,ry)),Lt.mathMl===!0&&(kr(mr,U_),kr(Fr,Rw),kr(Fr,ry))),fe.ADD_TAGS&&(mr===Jn&&(mr=mc(mr)),kr(mr,fe.ADD_TAGS,pn)),fe.ADD_ATTR&&(Fr===Gi&&(Fr=mc(Fr)),kr(Fr,fe.ADD_ATTR,pn)),fe.ADD_URI_SAFE_ATTR&&kr(Qr,fe.ADD_URI_SAFE_ATTR,pn),fe.FORBID_CONTENTS&&(Gt===yr&&(Gt=mc(Gt)),kr(Gt,fe.FORBID_CONTENTS,pn)),It&&(mr["#text"]=!0),ye&&kr(mr,["html","head","body"]),mr.table&&(kr(mr,["tbody"]),delete Lr.tbody),Po&&Po(fe),Fo=fe)},F=kr({},["mi","mo","mn","ms","mtext"]),U=kr({},["foreignobject","desc","title","annotation-xml"]),Z=kr({},["title","style","font","a","script"]),ee=kr({},B_);kr(ee,V_),kr(ee,yk);var pe=kr({},U_);kr(pe,gk);var de=function(fe){var Ee=X(fe);(!Ee||!Ee.tagName)&&(Ee={namespaceURI:Ri,tagName:"template"});var He=ey(fe.tagName),$t=ey(Ee.tagName);return hi[fe.namespaceURI]?fe.namespaceURI===_o?Ee.namespaceURI===ei?He==="svg":Ee.namespaceURI===$i?He==="svg"&&($t==="annotation-xml"||F[$t]):Boolean(ee[He]):fe.namespaceURI===$i?Ee.namespaceURI===ei?He==="math":Ee.namespaceURI===_o?He==="math"&&U[$t]:Boolean(pe[He]):fe.namespaceURI===ei?Ee.namespaceURI===_o&&!U[$t]||Ee.namespaceURI===$i&&!F[$t]?!1:!pe[He]&&(Z[He]||!ee[He]):!!(Xo==="application/xhtml+xml"&&hi[fe.namespaceURI]):!1},G=function(fe){yp(e.removed,{element:fe});try{fe.parentNode.removeChild(fe)}catch{try{fe.outerHTML=ve}catch{fe.remove()}}},ie=function(fe,Ee){try{yp(e.removed,{attribute:Ee.getAttributeNode(fe),from:Ee})}catch{yp(e.removed,{attribute:null,from:Ee})}if(Ee.removeAttribute(fe),fe==="is"&&!Fr[fe])if(We||rt)try{G(Ee)}catch{}else try{Ee.setAttribute(fe,"")}catch{}},_e=function(fe){var Ee,He;if(qe)fe="<remove></remove>"+fe;else{var $t=fk(fe,/^[\r\n\t ]+/);He=$t&&$t[0]}Xo==="application/xhtml+xml"&&Ri===ei&&(fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+fe+"</body></html>");var Ht=he?he.createHTML(fe):fe;if(Ri===ei)try{Ee=new I().parseFromString(Ht,Xo)}catch{}if(!Ee||!Ee.documentElement){Ee=Fe.createDocument(Ri,"template",null);try{Ee.documentElement.innerHTML=In?ve:Ht}catch{}}var Qt=Ee.body||Ee.documentElement;return fe&&He&&Qt.insertBefore(o.createTextNode(He),Qt.childNodes[0]||null),Ri===ei?Ie.call(Ee,ye?"html":"body")[0]:ye?Ee.documentElement:Qt},Ge=function(fe){return Pe.call(fe.ownerDocument||fe,fe,g.SHOW_ELEMENT|g.SHOW_COMMENT|g.SHOW_TEXT,null,!1)},Ze=function(fe){return fe instanceof M&&(typeof fe.nodeName!="string"||typeof fe.textContent!="string"||typeof fe.removeChild!="function"||!(fe.attributes instanceof T)||typeof fe.removeAttribute!="function"||typeof fe.setAttribute!="function"||typeof fe.namespaceURI!="string"||typeof fe.insertBefore!="function"||typeof fe.hasChildNodes!="function")},Ce=function(fe){return hu(a)==="object"?fe instanceof a:fe&&hu(fe)==="object"&&typeof fe.nodeType=="number"&&typeof fe.nodeName=="string"},Ue=function(fe,Ee,He){!st[fe]||hk(st[fe],function($t){$t.call(e,Ee,He,Fo)})},St=function(fe){var Ee;if(Ue("beforeSanitizeElements",fe,null),Ze(fe)||ko(/[\u0080-\uFFFF]/,fe.nodeName))return G(fe),!0;var He=pn(fe.nodeName);if(Ue("uponSanitizeElement",fe,{tagName:He,allowedTags:mr}),fe.hasChildNodes()&&!Ce(fe.firstElementChild)&&(!Ce(fe.content)||!Ce(fe.content.firstElementChild))&&ko(/<[/\w]/g,fe.innerHTML)&&ko(/<[/\w]/g,fe.textContent)||He==="select"&&ko(/<template/i,fe.innerHTML))return G(fe),!0;if(!mr[He]||Lr[He]){if(!Lr[He]&&Le(He)&&(qr.tagNameCheck instanceof RegExp&&ko(qr.tagNameCheck,He)||qr.tagNameCheck instanceof Function&&qr.tagNameCheck(He)))return!1;if(It&&!Gt[He]){var $t=X(fe)||fe.parentNode,Ht=Y(fe)||fe.childNodes;if(Ht&&$t)for(var Qt=Ht.length,Xt=Qt-1;Xt>=0;--Xt)$t.insertBefore(V(Ht[Xt],!0),W(fe))}return G(fe),!0}return fe instanceof m&&!de(fe)||(He==="noscript"||He==="noembed")&&ko(/<\/no(script|embed)/i,fe.innerHTML)?(G(fe),!0):(K&&fe.nodeType===3&&(Ee=fe.textContent,Ee=Za(Ee,be," "),Ee=Za(Ee,Ye," "),Ee=Za(Ee,ht," "),fe.textContent!==Ee&&(yp(e.removed,{element:fe.cloneNode()}),fe.textContent=Ee)),Ue("afterSanitizeElements",fe,null),!1)},_t=function(fe,Ee,He){if(et&&(Ee==="id"||Ee==="name")&&(He in o||He in Ml))return!1;if(!(Mn&&!qn[Ee]&&ko(vt,Ee))){if(!(Mr&&ko(kt,Ee))){if(!Fr[Ee]||qn[Ee]){if(!(Le(fe)&&(qr.tagNameCheck instanceof RegExp&&ko(qr.tagNameCheck,fe)||qr.tagNameCheck instanceof Function&&qr.tagNameCheck(fe))&&(qr.attributeNameCheck instanceof RegExp&&ko(qr.attributeNameCheck,Ee)||qr.attributeNameCheck instanceof Function&&qr.attributeNameCheck(Ee))||Ee==="is"&&qr.allowCustomizedBuiltInElements&&(qr.tagNameCheck instanceof RegExp&&ko(qr.tagNameCheck,He)||qr.tagNameCheck instanceof Function&&qr.tagNameCheck(He))))return!1}else if(!Qr[Ee]){if(!ko(zr,Za(He,Nn,""))){if(!((Ee==="src"||Ee==="xlink:href"||Ee==="href")&&fe!=="script"&&pk(He,"data:")===0&&jr[fe])){if(!(ci&&!ko(rr,Za(He,Nn,"")))){if(He)return!1}}}}}}return!0},Le=function(fe){return fe.indexOf("-")>0},pt=function(fe){var Ee,He,$t,Ht;Ue("beforeSanitizeAttributes",fe,null);var Qt=fe.attributes;if(!!Qt){var Xt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Fr};for(Ht=Qt.length;Ht--;){Ee=Qt[Ht];var ti=Ee,er=ti.name,yn=ti.namespaceURI;if(He=er==="value"?Ee.value:dk(Ee.value),$t=pn(er),Xt.attrName=$t,Xt.attrValue=He,Xt.keepAttr=!0,Xt.forceKeepAttr=void 0,Ue("uponSanitizeAttribute",fe,Xt),He=Xt.attrValue,!Xt.forceKeepAttr&&(ie(er,fe),!!Xt.keepAttr)){if(!Wn&&ko(/\/>/i,He)){ie(er,fe);continue}K&&(He=Za(He,be," "),He=Za(He,Ye," "),He=Za(He,ht," "));var Gr=pn(fe.nodeName);if(!!_t(Gr,$t,He)){if(ut&&($t==="id"||$t==="name")&&(ie(er,fe),He=Qe+He),he&&hu(P)==="object"&&typeof P.getAttributeType=="function"&&!yn)switch(P.getAttributeType(Gr,$t)){case"TrustedHTML":He=he.createHTML(He);break;case"TrustedScriptURL":He=he.createScriptURL(He);break}try{yn?fe.setAttributeNS(yn,er,He):fe.setAttribute(er,He),kw(e.removed)}catch{}}}}Ue("afterSanitizeAttributes",fe,null)}},lt=function De(fe){var Ee,He=Ge(fe);for(Ue("beforeSanitizeShadowDOM",fe,null);Ee=He.nextNode();)Ue("uponSanitizeShadowNode",Ee,null),!St(Ee)&&(Ee.content instanceof s&&De(Ee.content),pt(Ee));Ue("afterSanitizeShadowDOM",fe,null)};return e.sanitize=function(De){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ee,He,$t,Ht,Qt;if(In=!De,In&&(De="<!-->"),typeof De!="string"&&!Ce(De)){if(typeof De.toString!="function")throw F_("toString is not a function");if(De=De.toString(),typeof De!="string")throw F_("dirty is not a string, aborting")}if(!e.isSupported){if(hu(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof De=="string")return t.toStaticHTML(De);if(Ce(De))return t.toStaticHTML(De.outerHTML)}return De}if(Ne||N(fe),e.removed=[],typeof De=="string"&&(bt=!1),bt){if(De.nodeName){var Xt=pn(De.nodeName);if(!mr[Xt]||Lr[Xt])throw F_("root node is forbidden and cannot be sanitized in-place")}}else if(De instanceof a)Ee=_e("<!---->"),He=Ee.ownerDocument.importNode(De,!0),He.nodeType===1&&He.nodeName==="BODY"||He.nodeName==="HTML"?Ee=He:Ee.appendChild(He);else{if(!We&&!K&&!ye&&De.indexOf("<")===-1)return he&&mt?he.createHTML(De):De;if(Ee=_e(De),!Ee)return We?null:mt?ve:""}Ee&&qe&&G(Ee.firstChild);for(var ti=Ge(bt?De:Ee);$t=ti.nextNode();)$t.nodeType===3&&$t===Ht||St($t)||($t.content instanceof s&&lt($t.content),pt($t),Ht=$t);if(Ht=null,bt)return De;if(We){if(rt)for(Qt=Se.call(Ee.ownerDocument);Ee.firstChild;)Qt.appendChild(Ee.firstChild);else Qt=Ee;return(Fr.shadowroot||Fr.shadowrootmod)&&(Qt=Je.call(n,Qt,!0)),Qt}var er=ye?Ee.outerHTML:Ee.innerHTML;return ye&&mr["!doctype"]&&Ee.ownerDocument&&Ee.ownerDocument.doctype&&Ee.ownerDocument.doctype.name&&ko(Mk,Ee.ownerDocument.doctype.name)&&(er="<!DOCTYPE "+Ee.ownerDocument.doctype.name+`>
`+er),K&&(er=Za(er,be," "),er=Za(er,Ye," "),er=Za(er,ht," ")),he&&mt?he.createHTML(er):er},e.setConfig=function(De){N(De),Ne=!0},e.clearConfig=function(){Fo=null,Ne=!1},e.isValidAttribute=function(De,fe,Ee){Fo||N({});var He=pn(De),$t=pn(fe);return _t(He,$t,Ee)},e.addHook=function(De,fe){typeof fe=="function"&&(st[De]=st[De]||[],yp(st[De],fe))},e.removeHook=function(De){if(st[De])return kw(st[De])},e.removeHooks=function(De){st[De]&&(st[De]=[])},e.removeAllHooks=function(){st={}},e}var Ck=zw(),Fw=!1;function ny(t,e,n){return Array.isArray(t)?(t.length=Math.max(t.length,e),t.splice(e,1,n),n):(t[e]=n,n)}function G_(t,e){if(Array.isArray(t)){t.splice(e,1);return}delete t[e]}function Ak(t,e){var s;const n=(s=t.hooks)!=null?s:{};let o;for(o in n){const h=n[o];h!==void 0&&e.addHook(o,h)}}function Bw(){return Ck()}function Pk(t={},e=Bw){const n=e();Ak(t,n);const o=function(s,h){var M,I;const a=h.value;if(h.oldValue===a)return;const m=`${a}`,g=h.arg,b=t.namedConfigurations,T=(M=t.default)!=null?M:{};if(b&&g!==void 0){s.innerHTML=n.sanitize(m,(I=b[g])!=null?I:T);return}s.innerHTML=n.sanitize(m,T)};return{mounted:o,updated:o}}const Vw={install(t,e={},n=Bw){t.directive("dompurify-html",Pk(e,n))}};function kk(){return Uw().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Uw(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const Lk=typeof Proxy=="function",Dk="devtools-plugin:setup",Nk="plugin:settings:set";let bh,$_;function Rk(){var t;return bh!==void 0||(typeof window<"u"&&window.performance?(bh=!0,$_=window.performance):typeof global<"u"&&((t=global.perf_hooks)===null||t===void 0?void 0:t.performance)?(bh=!0,$_=global.perf_hooks.performance):bh=!1),bh}function zk(){return Rk()?$_.now():Date.now()}class Fk{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const o={};if(e.settings)for(const a in e.settings){const m=e.settings[a];o[a]=m.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let h=Object.assign({},o);try{const a=localStorage.getItem(s),m=JSON.parse(a);Object.assign(h,m)}catch{}this.fallbacks={getSettings(){return h},setSettings(a){try{localStorage.setItem(s,JSON.stringify(a))}catch{}h=a},now(){return zk()}},n&&n.on(Nk,(a,m)=>{a===this.plugin.id&&this.fallbacks.setSettings(m)}),this.proxiedOn=new Proxy({},{get:(a,m)=>this.target?this.target.on[m]:(...g)=>{this.onQueue.push({method:m,args:g})}}),this.proxiedTarget=new Proxy({},{get:(a,m)=>this.target?this.target[m]:m==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(m)?(...g)=>(this.targetQueue.push({method:m,args:g,resolve:()=>{}}),this.fallbacks[m](...g)):(...g)=>new Promise(b=>{this.targetQueue.push({method:m,args:g,resolve:b})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function jw(t,e){const n=t,o=Uw(),s=kk(),h=Lk&&n.enableEarlyProxy;if(s&&(o.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!h))s.emit(Dk,t,e);else{const a=h?new Fk(n,s):null;(o.__VUE_DEVTOOLS_PLUGINS__=o.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:a}),a&&e(a.proxiedTarget)}}/*!
  * pinia v2.0.33
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let gp;const vp=t=>gp=t,Gw=process.env.NODE_ENV!=="production"?Symbol("pinia"):Symbol();function yc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ss;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ss||(Ss={}));const iy=typeof window<"u",_p=(process.env.NODE_ENV!=="production"||!1)&&process.env.NODE_ENV!=="test"&&iy,$w=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function Bk(t,{autoBom:e=!1}={}){return e&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}function q_(t,e,n){const o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){Hw(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function qw(t){const e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function oy(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}const ay=typeof navigator=="object"?navigator:{userAgent:""},Ww=(()=>/Macintosh/.test(ay.userAgent)&&/AppleWebKit/.test(ay.userAgent)&&!/Safari/.test(ay.userAgent))(),Hw=iy?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!Ww?Vk:"msSaveOrOpenBlob"in ay?Uk:jk:()=>{};function Vk(t,e="download",n){const o=document.createElement("a");o.download=e,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?qw(o.href)?q_(t,e,n):(o.target="_blank",oy(o)):oy(o)):(o.href=URL.createObjectURL(t),setTimeout(function(){URL.revokeObjectURL(o.href)},4e4),setTimeout(function(){oy(o)},0))}function Uk(t,e="download",n){if(typeof t=="string")if(qw(t))q_(t,e,n);else{const o=document.createElement("a");o.href=t,o.target="_blank",setTimeout(function(){oy(o)})}else navigator.msSaveOrOpenBlob(Bk(t,n),e)}function jk(t,e,n,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof t=="string")return q_(t,e,n);const s=t.type==="application/octet-stream",h=/constructor/i.test(String($w.HTMLElement))||"safari"in $w,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&h||Ww)&&typeof FileReader<"u"){const m=new FileReader;m.onloadend=function(){let g=m.result;if(typeof g!="string")throw o=null,new Error("Wrong reader.result type");g=a?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=g:location.assign(g),o=null},m.readAsDataURL(t)}else{const m=URL.createObjectURL(t);o?o.location.assign(m):location.href=m,o=null,setTimeout(function(){URL.revokeObjectURL(m)},4e4)}}function Ui(t,e){const n="\u{1F34D} "+t;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(n,e):e==="error"?console.error(n):e==="warn"?console.warn(n):console.log(n)}function W_(t){return"_a"in t&&"install"in t}function Zw(){if(!("clipboard"in navigator))return Ui("Your browser doesn't support the Clipboard API","error"),!0}function Xw(t){return t instanceof Error&&t.message.toLowerCase().includes("document is not focused")?(Ui('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function Gk(t){if(!Zw())try{await navigator.clipboard.writeText(JSON.stringify(t.state.value)),Ui("Global state copied to clipboard.")}catch(e){if(Xw(e))return;Ui("Failed to serialize the state. Check the console for more details.","error"),console.error(e)}}async function $k(t){if(!Zw())try{t.state.value=JSON.parse(await navigator.clipboard.readText()),Ui("Global state pasted from clipboard.")}catch(e){if(Xw(e))return;Ui("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(e)}}async function qk(t){try{Hw(new Blob([JSON.stringify(t.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(e){Ui("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}let pl;function Wk(){pl||(pl=document.createElement("input"),pl.type="file",pl.accept=".json");function t(){return new Promise((e,n)=>{pl.onchange=async()=>{const o=pl.files;if(!o)return e(null);const s=o.item(0);return e(s?{text:await s.text(),file:s}:null)},pl.oncancel=()=>e(null),pl.onerror=n,pl.click()})}return t}async function Hk(t){try{const n=await(await Wk())();if(!n)return;const{text:o,file:s}=n;t.state.value=JSON.parse(o),Ui(`Global state imported from "${s.name}".`)}catch(e){Ui("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}function Xa(t){return{_custom:{display:t}}}const Kw="\u{1F34D} Pinia (root)",H_="_root";function Zk(t){return W_(t)?{id:H_,label:Kw}:{id:t.$id,label:t.$id}}function Xk(t){if(W_(t)){const n=Array.from(t._s.keys()),o=t._s;return{state:n.map(h=>({editable:!0,key:h,value:t.state.value[h]})),getters:n.filter(h=>o.get(h)._getters).map(h=>{const a=o.get(h);return{editable:!1,key:h,value:a._getters.reduce((m,g)=>(m[g]=a[g],m),{})}})}}const e={state:Object.keys(t.$state).map(n=>({editable:!0,key:n,value:t.$state[n]}))};return t._getters&&t._getters.length&&(e.getters=t._getters.map(n=>({editable:!1,key:n,value:t[n]}))),t._customProperties.size&&(e.customProperties=Array.from(t._customProperties).map(n=>({editable:!0,key:n,value:t[n]}))),e}function Kk(t){return t?Array.isArray(t)?t.reduce((e,n)=>(e.keys.push(n.key),e.operations.push(n.type),e.oldValue[n.key]=n.oldValue,e.newValue[n.key]=n.newValue,e),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:Xa(t.type),key:Xa(t.key),oldValue:t.oldValue,newValue:t.newValue}:{}}function Yk(t){switch(t){case Ss.direct:return"mutation";case Ss.patchFunction:return"$patch";case Ss.patchObject:return"$patch";default:return"unknown"}}let wh=!0;const sy=[],gc="pinia:mutations",ho="pinia",{assign:Jk}=Object,ly=t=>"\u{1F34D} "+t;function Qk(t,e){jw({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:sy,app:t},n=>{typeof n.now!="function"&&Ui("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addTimelineLayer({id:gc,label:"Pinia \u{1F34D}",color:15064968}),n.addInspector({id:ho,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{Gk(e)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await $k(e),n.sendInspectorTree(ho),n.sendInspectorState(ho)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{qk(e)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await Hk(e),n.sendInspectorTree(ho),n.sendInspectorState(ho)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:o=>{const s=e._s.get(o);s?s._isOptionsAPI?(s.$reset(),Ui(`Store "${o}" reset.`)):Ui(`Cannot reset "${o}" store because it's a setup store.`,"warn"):Ui(`Cannot reset "${o}" store because it wasn't found.`,"warn")}}]}),n.on.inspectComponent((o,s)=>{const h=o.componentInstance&&o.componentInstance.proxy;if(h&&h._pStores){const a=o.componentInstance.proxy._pStores;Object.values(a).forEach(m=>{o.instanceData.state.push({type:ly(m.$id),key:"state",editable:!0,value:m._isOptionsAPI?{_custom:{value:hr(m.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>m.$reset()}]}}:Object.keys(m.$state).reduce((g,b)=>(g[b]=m.$state[b],g),{})}),m._getters&&m._getters.length&&o.instanceData.state.push({type:ly(m.$id),key:"getters",editable:!1,value:m._getters.reduce((g,b)=>{try{g[b]=m[b]}catch(T){g[b]=T}return g},{})})})}}),n.on.getInspectorTree(o=>{if(o.app===t&&o.inspectorId===ho){let s=[e];s=s.concat(Array.from(e._s.values())),o.rootNodes=(o.filter?s.filter(h=>"$id"in h?h.$id.toLowerCase().includes(o.filter.toLowerCase()):Kw.toLowerCase().includes(o.filter.toLowerCase())):s).map(Zk)}}),n.on.getInspectorState(o=>{if(o.app===t&&o.inspectorId===ho){const s=o.nodeId===H_?e:e._s.get(o.nodeId);if(!s)return;s&&(o.state=Xk(s))}}),n.on.editInspectorState((o,s)=>{if(o.app===t&&o.inspectorId===ho){const h=o.nodeId===H_?e:e._s.get(o.nodeId);if(!h)return Ui(`store "${o.nodeId}" not found`,"error");const{path:a}=o;W_(h)?a.unshift("state"):(a.length!==1||!h._customProperties.has(a[0])||a[0]in h.$state)&&a.unshift("$state"),wh=!1,o.set(h,a,o.state.value),wh=!0}}),n.on.editComponentState(o=>{if(o.type.startsWith("\u{1F34D}")){const s=o.type.replace(/^🍍\s*/,""),h=e._s.get(s);if(!h)return Ui(`store "${s}" not found`,"error");const{path:a}=o;if(a[0]!=="state")return Ui(`Invalid path for store "${s}":
${a}
Only state can be modified.`);a[0]="$state",wh=!1,o.set(h,a,o.state.value),wh=!0}})})}function eL(t,e){sy.includes(ly(e.$id))||sy.push(ly(e.$id)),jw({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:sy,app:t,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},n=>{const o=typeof n.now=="function"?n.now.bind(n):Date.now;e.$onAction(({after:a,onError:m,name:g,args:b})=>{const T=Yw++;n.addTimelineEvent({layerId:gc,event:{time:o(),title:"\u{1F6EB} "+g,subtitle:"start",data:{store:Xa(e.$id),action:Xa(g),args:b},groupId:T}}),a(M=>{vc=void 0,n.addTimelineEvent({layerId:gc,event:{time:o(),title:"\u{1F6EC} "+g,subtitle:"end",data:{store:Xa(e.$id),action:Xa(g),args:b,result:M},groupId:T}})}),m(M=>{vc=void 0,n.addTimelineEvent({layerId:gc,event:{time:o(),logType:"error",title:"\u{1F4A5} "+g,subtitle:"end",data:{store:Xa(e.$id),action:Xa(g),args:b,error:M},groupId:T}})})},!0),e._customProperties.forEach(a=>{Tn(()=>ae(e[a]),(m,g)=>{n.notifyComponentUpdate(),n.sendInspectorState(ho),wh&&n.addTimelineEvent({layerId:gc,event:{time:o(),title:"Change",subtitle:a,data:{newValue:m,oldValue:g},groupId:vc}})},{deep:!0})}),e.$subscribe(({events:a,type:m},g)=>{if(n.notifyComponentUpdate(),n.sendInspectorState(ho),!wh)return;const b={time:o(),title:Yk(m),data:Jk({store:Xa(e.$id)},Kk(a)),groupId:vc};vc=void 0,m===Ss.patchFunction?b.subtitle="\u2935\uFE0F":m===Ss.patchObject?b.subtitle="\u{1F9E9}":a&&!Array.isArray(a)&&(b.subtitle=a.type),a&&(b.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:a}}),n.addTimelineEvent({layerId:gc,event:b})},{detached:!0,flush:"sync"});const s=e._hotUpdate;e._hotUpdate=Ga(a=>{s(a),n.addTimelineEvent({layerId:gc,event:{time:o(),title:"\u{1F525} "+e.$id,subtitle:"HMR update",data:{store:Xa(e.$id),info:Xa("HMR update")}}}),n.notifyComponentUpdate(),n.sendInspectorTree(ho),n.sendInspectorState(ho)});const{$dispose:h}=e;e.$dispose=()=>{h(),n.notifyComponentUpdate(),n.sendInspectorTree(ho),n.sendInspectorState(ho),n.getSettings().logStoreChanges&&Ui(`Disposed "${e.$id}" store \u{1F5D1}`)},n.notifyComponentUpdate(),n.sendInspectorTree(ho),n.sendInspectorState(ho),n.getSettings().logStoreChanges&&Ui(`"${e.$id}" store installed \u{1F195}`)})}let Yw=0,vc;function Jw(t,e){const n=e.reduce((o,s)=>(o[s]=hr(t)[s],o),{});for(const o in n)t[o]=function(){const s=Yw,h=new Proxy(t,{get(...a){return vc=s,Reflect.get(...a)},set(...a){return vc=s,Reflect.set(...a)}});return n[o].apply(h,arguments)}}function tL({app:t,store:e,options:n}){if(!e.$id.startsWith("__hot:")){if(n.state&&(e._isOptionsAPI=!0),typeof n.state=="function"){Jw(e,Object.keys(n.actions));const o=e._hotUpdate;hr(e)._hotUpdate=function(s){o.apply(this,arguments),Jw(e,Object.keys(s._hmrPayload.actions))}}eL(t,e)}}function Qw(){const t=Nx(!0),e=t.run(()=>vr({}));let n=[],o=[];const s=Ga({install(h){vp(s),s._a=h,h.provide(Gw,s),h.config.globalProperties.$pinia=s,_p&&Qk(h,s),o.forEach(a=>n.push(a)),o=[]},use(h){return!this._a&&!Fw?o.push(h):n.push(h),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return _p&&typeof Proxy<"u"&&s.use(tL),s}function e2(t,e){for(const n in e){const o=e[n];if(!(n in t))continue;const s=t[n];yc(s)&&yc(o)&&!ln(o)&&!ja(o)?t[n]=e2(s,o):t[n]=o}return t}const t2=()=>{};function r2(t,e,n,o=t2){t.push(e);const s=()=>{const h=t.indexOf(e);h>-1&&(t.splice(h,1),o())};return!n&&Rx()&&iC(s),s}function Eh(t,...e){t.slice().forEach(n=>{n(...e)})}function Z_(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,o)=>t.set(o,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const o=e[n],s=t[n];yc(s)&&yc(o)&&t.hasOwnProperty(n)&&!ln(o)&&!ja(o)?t[n]=Z_(s,o):t[n]=o}return t}const rL=process.env.NODE_ENV!=="production"?Symbol("pinia:skipHydration"):Symbol();function nL(t){return!yc(t)||!t.hasOwnProperty(rL)}const{assign:Ia}=Object;function n2(t){return!!(ln(t)&&t.effect)}function i2(t,e,n,o){const{state:s,actions:h,getters:a}=e,m=n.state.value[t];let g;function b(){!m&&(process.env.NODE_ENV==="production"||!o)&&(n.state.value[t]=s?s():{});const T=process.env.NODE_ENV!=="production"&&o?sb(vr(s?s():{}).value):sb(n.state.value[t]);return Ia(T,h,Object.keys(a||{}).reduce((M,I)=>(process.env.NODE_ENV!=="production"&&I in T&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${I}" in store "${t}".`),M[I]=Ga(ar(()=>{vp(n);const P=n._s.get(t);return a[I].call(P,P)})),M),{}))}return g=X_(t,b,e,n,o,!0),g}function X_(t,e,n={},o,s,h){let a;const m=Ia({actions:{}},n);if(process.env.NODE_ENV!=="production"&&!o._e.active)throw new Error("Pinia destroyed");const g={deep:!0};process.env.NODE_ENV!=="production"&&!Fw&&(g.onTrigger=Se=>{b?P=Se:b==!1&&!Fe._hotUpdating&&(Array.isArray(P)?P.push(Se):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))});let b,T,M=Ga([]),I=Ga([]),P;const z=o.state.value[t];!h&&!z&&(process.env.NODE_ENV==="production"||!s)&&(o.state.value[t]={});const V=vr({});let W;function Y(Se){let Ie;b=T=!1,process.env.NODE_ENV!=="production"&&(P=[]),typeof Se=="function"?(Se(o.state.value[t]),Ie={type:Ss.patchFunction,storeId:t,events:P}):(Z_(o.state.value[t],Se),Ie={type:Ss.patchObject,payload:Se,storeId:t,events:P});const Je=W=Symbol();Lm().then(()=>{W===Je&&(b=!0)}),T=!0,Eh(M,Ie,o.state.value[t])}const X=h?function(){const{state:Ie}=n,Je=Ie?Ie():{};this.$patch($e=>{Ia($e,Je)})}:process.env.NODE_ENV!=="production"?()=>{throw new Error(`\u{1F34D}: Store "${t}" is built using the setup syntax and does not implement $reset().`)}:t2;function ue(){a.stop(),M=[],I=[],o._s.delete(t)}function he(Se,Ie){return function(){vp(o);const Je=Array.from(arguments),$e=[],st=[];function be(vt){$e.push(vt)}function Ye(vt){st.push(vt)}Eh(I,{args:Je,name:Se,store:Fe,after:be,onError:Ye});let ht;try{ht=Ie.apply(this&&this.$id===t?this:Fe,Je)}catch(vt){throw Eh(st,vt),vt}return ht instanceof Promise?ht.then(vt=>(Eh($e,vt),vt)).catch(vt=>(Eh(st,vt),Promise.reject(vt))):(Eh($e,ht),ht)}}const ve=Ga({actions:{},getters:{},state:[],hotState:V}),ze={_p:o,$id:t,$onAction:r2.bind(null,I),$patch:Y,$reset:X,$subscribe(Se,Ie={}){const Je=r2(M,Se,Ie.detached,()=>$e()),$e=a.run(()=>Tn(()=>o.state.value[t],st=>{(Ie.flush==="sync"?T:b)&&Se({storeId:t,type:Ss.direct,events:P},st)},Ia({},g,Ie)));return Je},$dispose:ue},Fe=Mm(process.env.NODE_ENV!=="production"||_p?Ia({_hmrPayload:ve,_customProperties:Ga(new Set)},ze):ze);o._s.set(t,Fe);const Pe=o._e.run(()=>(a=Nx(),a.run(()=>e())));for(const Se in Pe){const Ie=Pe[Se];if(ln(Ie)&&!n2(Ie)||ja(Ie))process.env.NODE_ENV!=="production"&&s?ny(V.value,Se,ep(Pe,Se)):h||(z&&nL(Ie)&&(ln(Ie)?Ie.value=z[Se]:Z_(Ie,z[Se])),o.state.value[t][Se]=Ie),process.env.NODE_ENV!=="production"&&ve.state.push(Se);else if(typeof Ie=="function"){const Je=process.env.NODE_ENV!=="production"&&s?Ie:he(Se,Ie);Pe[Se]=Je,process.env.NODE_ENV!=="production"&&(ve.actions[Se]=Ie),m.actions[Se]=Ie}else process.env.NODE_ENV!=="production"&&n2(Ie)&&(ve.getters[Se]=h?n.getters[Se]:Ie,iy&&(Pe._getters||(Pe._getters=Ga([]))).push(Se))}if(Ia(Fe,Pe),Ia(hr(Fe),Pe),Object.defineProperty(Fe,"$state",{get:()=>process.env.NODE_ENV!=="production"&&s?V.value:o.state.value[t],set:Se=>{if(process.env.NODE_ENV!=="production"&&s)throw new Error("cannot set hotState");Y(Ie=>{Ia(Ie,Se)})}}),process.env.NODE_ENV!=="production"&&(Fe._hotUpdate=Ga(Se=>{Fe._hotUpdating=!0,Se._hmrPayload.state.forEach(Ie=>{if(Ie in Fe.$state){const Je=Se.$state[Ie],$e=Fe.$state[Ie];typeof Je=="object"&&yc(Je)&&yc($e)?e2(Je,$e):Se.$state[Ie]=$e}ny(Fe,Ie,ep(Se.$state,Ie))}),Object.keys(Fe.$state).forEach(Ie=>{Ie in Se.$state||G_(Fe,Ie)}),b=!1,T=!1,o.state.value[t]=ep(Se._hmrPayload,"hotState"),T=!0,Lm().then(()=>{b=!0});for(const Ie in Se._hmrPayload.actions){const Je=Se[Ie];ny(Fe,Ie,he(Ie,Je))}for(const Ie in Se._hmrPayload.getters){const Je=Se._hmrPayload.getters[Ie],$e=h?ar(()=>(vp(o),Je.call(Fe,Fe))):Je;ny(Fe,Ie,$e)}Object.keys(Fe._hmrPayload.getters).forEach(Ie=>{Ie in Se._hmrPayload.getters||G_(Fe,Ie)}),Object.keys(Fe._hmrPayload.actions).forEach(Ie=>{Ie in Se._hmrPayload.actions||G_(Fe,Ie)}),Fe._hmrPayload=Se._hmrPayload,Fe._getters=Se._getters,Fe._hotUpdating=!1})),_p){const Se={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(Ie=>{Object.defineProperty(Fe,Ie,Ia({value:Fe[Ie]},Se))})}return o._p.forEach(Se=>{if(_p){const Ie=a.run(()=>Se({store:Fe,app:o._a,pinia:o,options:m}));Object.keys(Ie||{}).forEach(Je=>Fe._customProperties.add(Je)),Ia(Fe,Ie)}else Ia(Fe,a.run(()=>Se({store:Fe,app:o._a,pinia:o,options:m})))}),process.env.NODE_ENV!=="production"&&Fe.$state&&typeof Fe.$state=="object"&&typeof Fe.$state.constructor=="function"&&!Fe.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${Fe.$id}".`),z&&h&&n.hydrate&&n.hydrate(Fe.$state,z),b=!0,T=!0,Fe}function _c(t,e,n){let o,s;const h=typeof e=="function";typeof t=="string"?(o=t,s=h?n:e):(s=t,o=t.id);function a(m,g){const b=Zm();if(m=(process.env.NODE_ENV==="test"&&gp&&gp._testing?null:m)||b&&gh(Gw,null),m&&vp(m),process.env.NODE_ENV!=="production"&&!gp)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);m=gp,m._s.has(o)||(h?X_(o,e,s,m):i2(o,s,m),process.env.NODE_ENV!=="production"&&(a._pinia=m));const T=m._s.get(o);if(process.env.NODE_ENV!=="production"&&g){const M="__hot:"+o,I=h?X_(M,e,s,m,!0):i2(M,Ia({},s),m,!0);g._hotUpdate(I),delete m.state.value[M],m._s.delete(M)}if(process.env.NODE_ENV!=="production"&&iy&&b&&b.proxy&&!g){const M=b.proxy,I="_pStores"in M?M._pStores:M._pStores={};I[o]=T}return T}return a.$id=o,a}function cn(t){{t=hr(t);const e={};for(const n in t){const o=t[n];(ln(o)||ja(o))&&(e[n]=ep(t,n))}return e}}function iL(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var xc=1,bc=2,Sh=3,oL=4,K_=5,o2=6378137,aL=6356752314e-3,a2=.0066943799901413165,xp=484813681109536e-20,ft=Math.PI/2,sL=.16666666666666666,lL=.04722222222222222,uL=.022156084656084655,At=1e-10,eo=.017453292519943295,Ts=57.29577951308232,hn=Math.PI/4,bp=Math.PI*2,yi=3.14159265359,Wo={};Wo.greenwich=0,Wo.lisbon=-9.131906111111,Wo.paris=2.337229166667,Wo.bogota=-74.080916666667,Wo.madrid=-3.687938888889,Wo.rome=12.452333333333,Wo.bern=7.439583333333,Wo.jakarta=106.807719444444,Wo.ferro=-17.666666666667,Wo.brussels=4.367975,Wo.stockholm=18.058277777778,Wo.athens=23.7163375,Wo.oslo=10.722916666667;const cL={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var s2=/[\s_\-\/\(\)]/g;function fu(t,e){if(t[e])return t[e];for(var n=Object.keys(t),o=e.toLowerCase().replace(s2,""),s=-1,h,a;++s<n.length;)if(h=n[s],a=h.toLowerCase().replace(s2,""),a===o)return t[h]}function Y_(t){var e={},n=t.split("+").map(function(m){return m.trim()}).filter(function(m){return m}).reduce(function(m,g){var b=g.split("=");return b.push(!0),m[b[0].toLowerCase()]=b[1],m},{}),o,s,h,a={proj:"projName",datum:"datumCode",rf:function(m){e.rf=parseFloat(m)},lat_0:function(m){e.lat0=m*eo},lat_1:function(m){e.lat1=m*eo},lat_2:function(m){e.lat2=m*eo},lat_ts:function(m){e.lat_ts=m*eo},lon_0:function(m){e.long0=m*eo},lon_1:function(m){e.long1=m*eo},lon_2:function(m){e.long2=m*eo},alpha:function(m){e.alpha=parseFloat(m)*eo},gamma:function(m){e.rectified_grid_angle=parseFloat(m)},lonc:function(m){e.longc=m*eo},x_0:function(m){e.x0=parseFloat(m)},y_0:function(m){e.y0=parseFloat(m)},k_0:function(m){e.k0=parseFloat(m)},k:function(m){e.k0=parseFloat(m)},a:function(m){e.a=parseFloat(m)},b:function(m){e.b=parseFloat(m)},r_a:function(){e.R_A=!0},zone:function(m){e.zone=parseInt(m,10)},south:function(){e.utmSouth=!0},towgs84:function(m){e.datum_params=m.split(",").map(function(g){return parseFloat(g)})},to_meter:function(m){e.to_meter=parseFloat(m)},units:function(m){e.units=m;var g=fu(cL,m);g&&(e.to_meter=g.to_meter)},from_greenwich:function(m){e.from_greenwich=m*eo},pm:function(m){var g=fu(Wo,m);e.from_greenwich=(g||parseFloat(m))*eo},nadgrids:function(m){m==="@null"?e.datumCode="none":e.nadgrids=m},axis:function(m){var g="ewnsud";m.length===3&&g.indexOf(m.substr(0,1))!==-1&&g.indexOf(m.substr(1,1))!==-1&&g.indexOf(m.substr(2,1))!==-1&&(e.axis=m)},approx:function(){e.approx=!0}};for(o in n)s=n[o],o in a?(h=a[o],typeof h=="function"?h(s):e[h]=s):e[o]=s;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var wp=1,l2=2,u2=3,uy=4,c2=5,J_=-1,hL=/\s/,fL=/[A-Za-z]/,pL=/[A-Za-z84_]/,cy=/[,\]]/,h2=/[\d\.E\-\+]/;function dl(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=wp}dl.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==uy)for(;hL.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case wp:return this.neutral(t);case l2:return this.keyword(t);case uy:return this.quoted(t);case c2:return this.afterquote(t);case u2:return this.number(t);case J_:return}},dl.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=uy;return}if(cy.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)},dl.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=wp;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=wp,this.currentObject=this.stack.pop(),this.currentObject||(this.state=J_);return}},dl.prototype.number=function(t){if(h2.test(t)){this.word+=t;return}if(cy.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)},dl.prototype.quoted=function(t){if(t==='"'){this.state=c2;return}this.word+=t},dl.prototype.keyword=function(t){if(pL.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=wp;return}if(cy.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)},dl.prototype.neutral=function(t){if(fL.test(t)){this.word=t,this.state=l2;return}if(t==='"'){this.word="",this.state=uy;return}if(h2.test(t)){this.word=t,this.state=u2;return}if(cy.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)},dl.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===J_)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function dL(t){var e=new dl(t);return e.output()}function f2(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var o=e?{}:t,s=n.reduce(function(h,a){return Th(a,h),h},o);e&&(t[e]=s)}function Th(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Th(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var o;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Th(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Th(t[3],e[n]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],f2(e,n,t);return;default:for(o=-1;++o<t.length;)if(!Array.isArray(t[o]))return Th(t,e[n]);return f2(e,n,t)}}var mL=.017453292519943295;function yL(t,e){var n=e[0],o=e[1];!(n in t)&&o in t&&(t[n]=t[o],e.length===3&&(t[n]=e[2](t[n])))}function ml(t){return t*mL}function gL(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,o=t.AXIS.length;n<o;++n){var s=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?e+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?e+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?e+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var h=t.GEOGCS;t.type==="GEOGCS"&&(h=t),h&&(h.DATUM?t.datumCode=h.DATUM.name.toLowerCase():t.datumCode=h.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),h.DATUM&&h.DATUM.SPHEROID&&(t.ellps=h.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=h.DATUM.SPHEROID.a,t.rf=parseFloat(h.DATUM.SPHEROID.rf,10)),h.DATUM&&h.DATUM.TOWGS84&&(t.datum_params=h.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function a(b){var T=t.to_meter||1;return b*T}var m=function(b){return yL(t,b)},g=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",ml],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",ml],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",ml],["lat0","latitude_of_origin",ml],["lat0","standard_parallel_1",ml],["lat1","standard_parallel_1",ml],["lat2","standard_parallel_2",ml],["azimuth","Azimuth"],["alpha","azimuth",ml],["srsCode","name"]];g.forEach(m),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")&&(t.lat0=ml(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function p2(t){var e=dL(t),n=e.shift(),o=e.shift();e.unshift(["name",o]),e.unshift(["type",n]);var s={};return Th(e,s),gL(s),s}function Lo(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?Lo[t]=Y_(arguments[1]):Lo[t]=p2(arguments[1]):Lo[t]=n}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(o){Array.isArray(o)?Lo.apply(e,o):Lo(o)});if(typeof t=="string"){if(t in Lo)return Lo[t]}else"EPSG"in t?Lo["EPSG:"+t.EPSG]=t:"ESRI"in t?Lo["ESRI:"+t.ESRI]=t:"IAU2000"in t?Lo["IAU2000:"+t.IAU2000]=t:console.log(t);return}}iL(Lo);function vL(t){return typeof t=="string"}function _L(t){return t in Lo}var xL=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function bL(t){return xL.some(function(e){return t.indexOf(e)>-1})}var wL=["3857","900913","3785","102113"];function EL(t){var e=fu(t,"authority");if(!!e){var n=fu(e,"epsg");return n&&wL.indexOf(n)>-1}}function SL(t){var e=fu(t,"extension");if(!!e)return fu(e,"proj4")}function TL(t){return t[0]==="+"}function ML(t){if(vL(t)){if(_L(t))return Lo[t];if(bL(t)){var e=p2(t);if(EL(e))return Lo["EPSG:3857"];var n=SL(e);return n?Y_(n):e}if(TL(t))return Y_(t)}else return t}function d2(t,e){t=t||{};var n,o;if(!e)return t;for(o in e)n=e[o],n!==void 0&&(t[o]=n);return t}function Ms(t,e,n){var o=t*e;return n/Math.sqrt(1-o*o)}function Ep(t){return t<0?-1:1}function Vt(t){return Math.abs(t)<=yi?t:t-Ep(t)*bp}function Ka(t,e,n){var o=t*n,s=.5*t;return o=Math.pow((1-o)/(1+o),s),Math.tan(.5*(ft-e))/o}function Sp(t,e){for(var n=.5*t,o,s,h=ft-2*Math.atan(e),a=0;a<=15;a++)if(o=t*Math.sin(h),s=ft-2*Math.atan(e*Math.pow((1-o)/(1+o),n))-h,h+=s,Math.abs(s)<=1e-10)return h;return-9999}function IL(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ms(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function OL(t){var e=t.x,n=t.y;if(n*Ts>90&&n*Ts<-90&&e*Ts>180&&e*Ts<-180)return null;var o,s;if(Math.abs(Math.abs(n)-ft)<=At)return null;if(this.sphere)o=this.x0+this.a*this.k0*Vt(e-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(hn+.5*n));else{var h=Math.sin(n),a=Ka(this.e,n,h);o=this.x0+this.a*this.k0*Vt(e-this.long0),s=this.y0-this.a*this.k0*Math.log(a)}return t.x=o,t.y=s,t}function CL(t){var e=t.x-this.x0,n=t.y-this.y0,o,s;if(this.sphere)s=ft-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var h=Math.exp(-n/(this.a*this.k0));if(s=Sp(this.e,h),s===-9999)return null}return o=Vt(this.long0+e/(this.a*this.k0)),t.x=o,t.y=s,t}var AL=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const PL={init:IL,forward:OL,inverse:CL,names:AL};function kL(){}function m2(t){return t}var LL=["longlat","identity"],DL=[PL,{init:kL,forward:m2,inverse:m2,names:LL}],hy={},fy=[];function y2(t,e){var n=fy.length;return t.names?(fy[n]=t,t.names.forEach(function(o){hy[o.toLowerCase()]=n}),this):(console.log(e),!0)}function NL(t){if(!t)return!1;var e=t.toLowerCase();if(typeof hy[e]<"u"&&fy[hy[e]])return fy[hy[e]]}function RL(){DL.forEach(y2)}const zL={start:RL,add:y2,get:NL};var br={};br.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},br.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},br.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},br.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},br.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},br.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},br.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},br.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},br.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},br.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},br.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},br.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},br.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},br.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},br.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},br.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},br.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},br.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},br.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},br.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},br.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},br.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},br.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},br.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},br.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},br.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},br.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},br.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},br.hough={a:6378270,rf:297,ellipseName:"Hough"},br.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},br.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},br.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},br.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},br.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},br.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},br.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},br.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},br.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},br.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},br.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},br.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var FL=br.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};br.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function BL(t,e,n,o){var s=t*t,h=e*e,a=(s-h)/s,m=0;o?(t*=1-a*(sL+a*(lL+a*uL)),s=t*t,a=0):m=Math.sqrt(a);var g=(s-h)/h;return{es:a,e:m,ep2:g}}function VL(t,e,n,o,s){if(!t){var h=fu(br,o);h||(h=FL),t=h.a,e=h.b,n=h.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<At)&&(s=!0,e=t),{a:t,b:e,rf:n,sphere:s}}var ji={};ji.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ji.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ji.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},ji.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},ji.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},ji.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},ji.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},ji.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},ji.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ji.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},ji.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},ji.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},ji.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},ji.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},ji.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},ji.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},ji.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function UL(t,e,n,o,s,h,a){var m={};return t===void 0||t==="none"?m.datum_type=K_:m.datum_type=oL,e&&(m.datum_params=e.map(parseFloat),(m.datum_params[0]!==0||m.datum_params[1]!==0||m.datum_params[2]!==0)&&(m.datum_type=xc),m.datum_params.length>3&&(m.datum_params[3]!==0||m.datum_params[4]!==0||m.datum_params[5]!==0||m.datum_params[6]!==0)&&(m.datum_type=bc,m.datum_params[3]*=xp,m.datum_params[4]*=xp,m.datum_params[5]*=xp,m.datum_params[6]=m.datum_params[6]/1e6+1)),a&&(m.datum_type=Sh,m.grids=a),m.a=n,m.b=o,m.es=s,m.ep2=h,m}var g2={};function jL(t,e){var n=new DataView(e),o=qL(n),s=WL(n,o);s.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var h=HL(n,s,o),a={header:s,subgrids:h};return g2[t]=a,a}function GL(t){if(t===void 0)return null;var e=t.split(",");return e.map($L)}function $L(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:g2[t]||null,isNull:!1}}function Mh(t){return t/3600*Math.PI/180}function qL(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function WL(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Q_(t,56,56+8).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Q_(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function HL(t,e,n){for(var o=176,s=[],h=0;h<e.nSubgrids;h++){var a=XL(t,o,n),m=KL(t,o,a,n),g=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),b=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);s.push({ll:[Mh(a.lowerLongitude),Mh(a.lowerLatitude)],del:[Mh(a.longitudeInterval),Mh(a.latitudeInterval)],lim:[g,b],count:a.gridNodeCount,cvs:ZL(m)})}return s}function ZL(t){return t.map(function(e){return[Mh(e.longitudeShift),Mh(e.latitudeShift)]})}function XL(t,e,n){return{name:Q_(t,e+8,e+16).trim(),parent:Q_(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function KL(t,e,n,o){for(var s=e+176,h=16,a=[],m=0;m<n.gridNodeCount;m++){var g={latitudeShift:t.getFloat32(s+m*h,o),longitudeShift:t.getFloat32(s+m*h+4,o),latitudeAccuracy:t.getFloat32(s+m*h+8,o),longitudeAccuracy:t.getFloat32(s+m*h+12,o)};a.push(g)}return a}function Is(t,e){if(!(this instanceof Is))return new Is(t);e=e||function(b){if(b)throw b};var n=ML(t);if(typeof n!="object"){e(t);return}var o=Is.projections.get(n.projName);if(!o){e(t);return}if(n.datumCode&&n.datumCode!=="none"){var s=fu(ji,n.datumCode);s&&(n.datum_params=n.datum_params||(s.towgs84?s.towgs84.split(","):null),n.ellps=s.ellipse,n.datumName=s.datumName?s.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var h=VL(n.a,n.b,n.rf,n.ellps,n.sphere),a=BL(h.a,h.b,h.rf,n.R_A),m=GL(n.nadgrids),g=n.datum||UL(n.datumCode,n.datum_params,h.a,h.b,a.es,a.ep2,m);d2(this,n),d2(this,o),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=g,this.init(),e(null,this)}Is.projections=zL,Is.projections.start();function YL(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===xc?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===bc?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function v2(t,e,n){var o=t.x,s=t.y,h=t.z?t.z:0,a,m,g,b;if(s<-ft&&s>-1.001*ft)s=-ft;else if(s>ft&&s<1.001*ft)s=ft;else{if(s<-ft)return{x:-1/0,y:-1/0,z:t.z};if(s>ft)return{x:1/0,y:1/0,z:t.z}}return o>Math.PI&&(o-=2*Math.PI),m=Math.sin(s),b=Math.cos(s),g=m*m,a=n/Math.sqrt(1-e*g),{x:(a+h)*b*Math.cos(o),y:(a+h)*b*Math.sin(o),z:(a*(1-e)+h)*m}}function _2(t,e,n,o){var s=1e-12,h=s*s,a=30,m,g,b,T,M,I,P,z,V,W,Y,X,ue,he=t.x,ve=t.y,ze=t.z?t.z:0,Fe,Pe,Se;if(m=Math.sqrt(he*he+ve*ve),g=Math.sqrt(he*he+ve*ve+ze*ze),m/n<s){if(Fe=0,g/n<s)return Pe=ft,Se=-o,{x:t.x,y:t.y,z:t.z}}else Fe=Math.atan2(ve,he);b=ze/g,T=m/g,M=1/Math.sqrt(1-e*(2-e)*T*T),z=T*(1-e)*M,V=b*M,ue=0;do ue++,P=n/Math.sqrt(1-e*V*V),Se=m*z+ze*V-P*(1-e*V*V),I=e*P/(P+Se),M=1/Math.sqrt(1-I*(2-I)*T*T),W=T*(1-I)*M,Y=b*M,X=Y*z-W*V,z=W,V=Y;while(X*X>h&&ue<a);return Pe=Math.atan(Y/Math.abs(W)),{x:Fe,y:Pe,z:Se}}function JL(t,e,n){if(e===xc)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===bc){var o=n[0],s=n[1],h=n[2],a=n[3],m=n[4],g=n[5],b=n[6];return{x:b*(t.x-g*t.y+m*t.z)+o,y:b*(g*t.x+t.y-a*t.z)+s,z:b*(-m*t.x+a*t.y+t.z)+h}}}function QL(t,e,n){if(e===xc)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===bc){var o=n[0],s=n[1],h=n[2],a=n[3],m=n[4],g=n[5],b=n[6],T=(t.x-o)/b,M=(t.y-s)/b,I=(t.z-h)/b;return{x:T+g*M-m*I,y:-g*T+M+a*I,z:m*T-a*M+I}}}function py(t){return t===xc||t===bc}function eD(t,e,n){if(YL(t,e)||t.datum_type===K_||e.datum_type===K_)return n;var o=t.a,s=t.es;if(t.datum_type===Sh){var h=x2(t,!1,n);if(h!==0)return;o=o2,s=a2}var a=e.a,m=e.b,g=e.es;if(e.datum_type===Sh&&(a=o2,m=aL,g=a2),s===g&&o===a&&!py(t.datum_type)&&!py(e.datum_type))return n;if(n=v2(n,s,o),py(t.datum_type)&&(n=JL(n,t.datum_type,t.datum_params)),py(e.datum_type)&&(n=QL(n,e.datum_type,e.datum_params)),n=_2(n,g,a,m),e.datum_type===Sh){var b=x2(e,!0,n);if(b!==0)return}return n}function x2(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var o={x:-n.x,y:n.y},s={x:Number.NaN,y:Number.NaN},h=[],a=0;a<t.grids.length;a++){var m=t.grids[a];if(h.push(m.name),m.isNull){s=o;break}if(m.mandatory,m.grid===null){if(m.mandatory)return console.log("Unable to find mandatory grid '"+m.name+"'"),-1;continue}var g=m.grid.subgrids[0],b=(Math.abs(g.del[1])+Math.abs(g.del[0]))/1e4,T=g.ll[0]-b,M=g.ll[1]-b,I=g.ll[0]+(g.lim[0]-1)*g.del[0]+b,P=g.ll[1]+(g.lim[1]-1)*g.del[1]+b;if(!(M>o.y||T>o.x||P<o.y||I<o.x)&&(s=tD(o,e,g),!isNaN(s.x)))break}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-o.x*Ts+" "+o.y*Ts+" tried: '"+h+"'"),-1):(n.x=-s.x,n.y=s.y,0)}function tD(t,e,n){var o={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return o;var s={x:t.x,y:t.y};s.x-=n.ll[0],s.y-=n.ll[1],s.x=Vt(s.x-Math.PI)+Math.PI;var h=b2(s,n);if(e){if(isNaN(h.x))return o;h.x=s.x-h.x,h.y=s.y-h.y;var a=9,m=1e-12,g,b;do{if(b=b2(h,n),isNaN(b.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}g={x:s.x-(b.x+h.x),y:s.y-(b.y+h.y)},h.x+=g.x,h.y+=g.y}while(a--&&Math.abs(g.x)>m&&Math.abs(g.y)>m);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),o;o.x=Vt(h.x+n.ll[0]),o.y=h.y+n.ll[1]}else isNaN(h.x)||(o.x=t.x+h.x,o.y=t.y+h.y);return o}function b2(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},o={x:Math.floor(n.x),y:Math.floor(n.y)},s={x:n.x-1*o.x,y:n.y-1*o.y},h={x:Number.NaN,y:Number.NaN},a;if(o.x<0||o.x>=e.lim[0]||o.y<0||o.y>=e.lim[1])return h;a=o.y*e.lim[0]+o.x;var m={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var g={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var b={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var T={x:e.cvs[a][0],y:e.cvs[a][1]},M=s.x*s.y,I=s.x*(1-s.y),P=(1-s.x)*(1-s.y),z=(1-s.x)*s.y;return h.x=P*m.x+I*g.x+z*T.x+M*b.x,h.y=P*m.y+I*g.y+z*T.y+M*b.y,h}function w2(t,e,n){var o=n.x,s=n.y,h=n.z||0,a,m,g,b={};for(g=0;g<3;g++)if(!(e&&g===2&&n.z===void 0))switch(g===0?(a=o,"ew".indexOf(t.axis[g])!==-1?m="x":m="y"):g===1?(a=s,"ns".indexOf(t.axis[g])!==-1?m="y":m="x"):(a=h,m="z"),t.axis[g]){case"e":b[m]=a;break;case"w":b[m]=-a;break;case"n":b[m]=a;break;case"s":b[m]=-a;break;case"u":n[m]!==void 0&&(b.z=a);break;case"d":n[m]!==void 0&&(b.z=-a);break;default:return null}return b}function E2(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function rD(t){S2(t.x),S2(t.y)}function S2(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function nD(t,e){return(t.datum.datum_type===xc||t.datum.datum_type===bc||t.datum.datum_type===Sh)&&e.datumCode!=="WGS84"||(e.datum.datum_type===xc||e.datum.datum_type===bc||e.datum.datum_type===Sh)&&t.datumCode!=="WGS84"}function dy(t,e,n,o){var s;Array.isArray(n)?n=E2(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var h=n.z!==void 0;if(rD(n),t.datum&&e.datum&&nD(t,e)&&(s=new Is("WGS84"),n=dy(t,s,n,o),t=s),o&&t.axis!=="enu"&&(n=w2(t,!1,n)),t.projName==="longlat")n={x:n.x*eo,y:n.y*eo,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=eD(t.datum,e.datum,n),!!n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Ts,y:n.y*Ts,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),o&&e.axis!=="enu"?w2(e,!0,n):(h||delete n.z,n)}var T2=Is("WGS84");function e0(t,e,n,o){var s,h,a;return Array.isArray(n)?(s=dy(t,e,n,o)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(n.splice(3)):[s.x,s.y,n[2]].concat(n.splice(3)):[s.x,s.y].concat(n.splice(2)):[s.x,s.y]):(h=dy(t,e,n,o),a=Object.keys(n),a.length===2||a.forEach(function(m){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(m==="x"||m==="y"||m==="z")return}else if(m==="x"||m==="y")return;h[m]=n[m]}),h)}function M2(t){return t instanceof Is?t:t.oProj?t.oProj:Is(t)}function fo(t,e,n){t=M2(t);var o=!1,s;return typeof e>"u"?(e=t,t=T2,o=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,e=t,t=T2,o=!0),e=M2(e),n?e0(t,e,n):(s={forward:function(h,a){return e0(t,e,h,a)},inverse:function(h,a){return e0(e,t,h,a)}},o&&(s.oProj=e),s)}var I2=6,O2="AJSAJS",C2="AFAFAF",Ih=65,Ho=73,Oa=79,Tp=86,Mp=90;const iD={forward:A2,inverse:oD,toPoint:P2};function A2(t,e){return e=e||5,lD(aD({lat:t[1],lon:t[0]}),e)}function oD(t){var e=r0(D2(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function P2(t){var e=r0(D2(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function t0(t){return t*(Math.PI/180)}function k2(t){return 180*(t/Math.PI)}function aD(t){var e=t.lat,n=t.lon,o=6378137,s=.00669438,h=.9996,a,m,g,b,T,M,I,P=t0(e),z=t0(n),V,W;W=Math.floor((n+180)/6)+1,n===180&&(W=60),e>=56&&e<64&&n>=3&&n<12&&(W=32),e>=72&&e<84&&(n>=0&&n<9?W=31:n>=9&&n<21?W=33:n>=21&&n<33?W=35:n>=33&&n<42&&(W=37)),a=(W-1)*6-180+3,V=t0(a),m=s/(1-s),g=o/Math.sqrt(1-s*Math.sin(P)*Math.sin(P)),b=Math.tan(P)*Math.tan(P),T=m*Math.cos(P)*Math.cos(P),M=Math.cos(P)*(z-V),I=o*((1-s/4-3*s*s/64-5*s*s*s/256)*P-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*P)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*P)-35*s*s*s/3072*Math.sin(6*P));var Y=h*g*(M+(1-b+T)*M*M*M/6+(5-18*b+b*b+72*T-58*m)*M*M*M*M*M/120)+5e5,X=h*(I+g*Math.tan(P)*(M*M/2+(5-b+9*T+4*T*T)*M*M*M*M/24+(61-58*b+b*b+600*T-330*m)*M*M*M*M*M*M/720));return e<0&&(X+=1e7),{northing:Math.round(X),easting:Math.round(Y),zoneNumber:W,zoneLetter:sD(e)}}function r0(t){var e=t.northing,n=t.easting,o=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var h=.9996,a=6378137,m=.00669438,g,b=(1-Math.sqrt(1-m))/(1+Math.sqrt(1-m)),T,M,I,P,z,V,W,Y,X,ue=n-5e5,he=e;o<"N"&&(he-=1e7),W=(s-1)*6-180+3,g=m/(1-m),V=he/h,Y=V/(a*(1-m/4-3*m*m/64-5*m*m*m/256)),X=Y+(3*b/2-27*b*b*b/32)*Math.sin(2*Y)+(21*b*b/16-55*b*b*b*b/32)*Math.sin(4*Y)+151*b*b*b/96*Math.sin(6*Y),T=a/Math.sqrt(1-m*Math.sin(X)*Math.sin(X)),M=Math.tan(X)*Math.tan(X),I=g*Math.cos(X)*Math.cos(X),P=a*(1-m)/Math.pow(1-m*Math.sin(X)*Math.sin(X),1.5),z=ue/(T*h);var ve=X-T*Math.tan(X)/P*(z*z/2-(5+3*M+10*I-4*I*I-9*g)*z*z*z*z/24+(61+90*M+298*I+45*M*M-252*g-3*I*I)*z*z*z*z*z*z/720);ve=k2(ve);var ze=(z-(1+2*M+I)*z*z*z/6+(5-2*I+28*M-3*I*I+8*g+24*M*M)*z*z*z*z*z/120)/Math.cos(X);ze=W+k2(ze);var Fe;if(t.accuracy){var Pe=r0({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});Fe={top:Pe.lat,right:Pe.lon,bottom:ve,left:ze}}else Fe={lat:ve,lon:ze};return Fe}function sD(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function lD(t,e){var n="00000"+t.easting,o="00000"+t.northing;return t.zoneNumber+t.zoneLetter+uD(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+o.substr(o.length-5,e)}function uD(t,e,n){var o=L2(n),s=Math.floor(t/1e5),h=Math.floor(e/1e5)%20;return cD(s,h,o)}function L2(t){var e=t%I2;return e===0&&(e=I2),e}function cD(t,e,n){var o=n-1,s=O2.charCodeAt(o),h=C2.charCodeAt(o),a=s+t-1,m=h+e,g=!1;a>Mp&&(a=a-Mp+Ih-1,g=!0),(a===Ho||s<Ho&&a>Ho||(a>Ho||s<Ho)&&g)&&a++,(a===Oa||s<Oa&&a>Oa||(a>Oa||s<Oa)&&g)&&(a++,a===Ho&&a++),a>Mp&&(a=a-Mp+Ih-1),m>Tp?(m=m-Tp+Ih-1,g=!0):g=!1,(m===Ho||h<Ho&&m>Ho||(m>Ho||h<Ho)&&g)&&m++,(m===Oa||h<Oa&&m>Oa||(m>Oa||h<Oa)&&g)&&(m++,m===Ho&&m++),m>Tp&&(m=m-Tp+Ih-1);var b=String.fromCharCode(a)+String.fromCharCode(m);return b}function D2(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,o="",s,h=0;!/[A-Z]/.test(s=t.charAt(h));){if(h>=2)throw"MGRSPoint bad conversion from: "+t;o+=s,h++}var a=parseInt(o,10);if(h===0||h+3>e)throw"MGRSPoint bad conversion from: "+t;var m=t.charAt(h++);if(m<="A"||m==="B"||m==="Y"||m>="Z"||m==="I"||m==="O")throw"MGRSPoint zone letter "+m+" not handled: "+t;n=t.substring(h,h+=2);for(var g=L2(a),b=hD(n.charAt(0),g),T=fD(n.charAt(1),g);T<pD(m);)T+=2e6;var M=e-h;if(M%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var I=M/2,P=0,z=0,V,W,Y,X,ue;return I>0&&(V=1e5/Math.pow(10,I),W=t.substring(h,h+I),P=parseFloat(W)*V,Y=t.substring(h+I),z=parseFloat(Y)*V),X=P+b,ue=z+T,{easting:X,northing:ue,zoneLetter:m,zoneNumber:a,accuracy:V}}function hD(t,e){for(var n=O2.charCodeAt(e-1),o=1e5,s=!1;n!==t.charCodeAt(0);){if(n++,n===Ho&&n++,n===Oa&&n++,n>Mp){if(s)throw"Bad character: "+t;n=Ih,s=!0}o+=1e5}return o}function fD(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=C2.charCodeAt(e-1),o=0,s=!1;n!==t.charCodeAt(0);){if(n++,n===Ho&&n++,n===Oa&&n++,n>Tp){if(s)throw"Bad character: "+t;n=Ih,s=!0}o+=1e5}return o}function pD(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Oh(t,e,n){if(!(this instanceof Oh))return new Oh(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var o=t.split(",");this.x=parseFloat(o[0],10),this.y=parseFloat(o[1],10),this.z=parseFloat(o[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Oh.fromMGRS=function(t){return new Oh(P2(t))},Oh.prototype.toMGRS=function(t){return A2([this.x,this.y],t)};var dD=1,mD=.25,N2=.046875,R2=.01953125,z2=.01068115234375,yD=.75,gD=.46875,vD=.013020833333333334,_D=.007120768229166667,xD=.3645833333333333,bD=.005696614583333333,wD=.3076171875;function F2(t){var e=[];e[0]=dD-t*(mD+t*(N2+t*(R2+t*z2))),e[1]=t*(yD-t*(N2+t*(R2+t*z2)));var n=t*t;return e[2]=n*(gD-t*(vD+t*_D)),n*=t,e[3]=n*(xD-t*bD),e[4]=n*t*wD,e}function my(t,e,n,o){return n*=e,e*=e,o[0]*t-n*(o[1]+e*(o[2]+e*(o[3]+e*o[4])))}var ED=20;function B2(t,e,n){for(var o=1/(1-e),s=t,h=ED;h;--h){var a=Math.sin(s),m=1-e*a*a;if(m=(my(s,a,Math.cos(s),n)-t)*(m*Math.sqrt(m))*o,s-=m,Math.abs(m)<At)return s}return s}function SD(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=F2(this.es),this.ml0=my(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function TD(t){var e=t.x,n=t.y,o=Vt(e-this.long0),s,h,a,m=Math.sin(n),g=Math.cos(n);if(this.es){var T=g*o,M=Math.pow(T,2),I=this.ep2*Math.pow(g,2),P=Math.pow(I,2),z=Math.abs(g)>At?Math.tan(n):0,V=Math.pow(z,2),W=Math.pow(V,2);s=1-this.es*Math.pow(m,2),T=T/Math.sqrt(s);var Y=my(n,m,g,this.en);h=this.a*(this.k0*T*(1+M/6*(1-V+I+M/20*(5-18*V+W+14*I-58*V*I+M/42*(61+179*W-W*V-479*V)))))+this.x0,a=this.a*(this.k0*(Y-this.ml0+m*o*T/2*(1+M/12*(5-V+9*I+4*P+M/30*(61+W-58*V+270*I-330*V*I+M/56*(1385+543*W-W*V-3111*V))))))+this.y0}else{var b=g*Math.sin(o);if(Math.abs(Math.abs(b)-1)<At)return 93;if(h=.5*this.a*this.k0*Math.log((1+b)/(1-b))+this.x0,a=g*Math.cos(o)/Math.sqrt(1-Math.pow(b,2)),b=Math.abs(a),b>=1){if(b-1>At)return 93;a=0}else a=Math.acos(a);n<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return t.x=h,t.y=a,t}function MD(t){var e,n,o,s,h=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,n=B2(e,this.es,this.en),Math.abs(n)<ft){var M=Math.sin(n),I=Math.cos(n),P=Math.abs(I)>At?Math.tan(n):0,z=this.ep2*Math.pow(I,2),V=Math.pow(z,2),W=Math.pow(P,2),Y=Math.pow(W,2);e=1-this.es*Math.pow(M,2);var X=h*Math.sqrt(e)/this.k0,ue=Math.pow(X,2);e=e*P,o=n-e*ue/(1-this.es)*.5*(1-ue/12*(5+3*W-9*z*W+z-4*V-ue/30*(61+90*W-252*z*W+45*Y+46*z-ue/56*(1385+3633*W+4095*Y+1574*Y*W)))),s=Vt(this.long0+X*(1-ue/6*(1+2*W+z-ue/20*(5+28*W+24*Y+8*z*W+6*z-ue/42*(61+662*W+1320*Y+720*Y*W))))/I)}else o=ft*Ep(a),s=0;else{var m=Math.exp(h/this.k0),g=.5*(m-1/m),b=this.lat0+a/this.k0,T=Math.cos(b);e=Math.sqrt((1-Math.pow(T,2))/(1+Math.pow(g,2))),o=Math.asin(e),a<0&&(o=-o),g===0&&T===0?s=0:s=Vt(Math.atan2(g,T)+this.long0)}return t.x=s,t.y=o,t}var ID=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const yy={init:SD,forward:TD,inverse:MD,names:ID};function V2(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function Ya(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),o=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(o,2))}function OD(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function CD(t){var e=Math.abs(t);return e=OD(e*(1+e/(Ya(1,e)+1))),t<0?-e:e}function n0(t,e){for(var n=2*Math.cos(2*e),o=t.length-1,s=t[o],h=0,a;--o>=0;)a=-h+n*s+t[o],h=s,s=a;return e+a*Math.sin(2*e)}function AD(t,e){for(var n=2*Math.cos(e),o=t.length-1,s=t[o],h=0,a;--o>=0;)a=-h+n*s+t[o],h=s,s=a;return Math.sin(e)*a}function PD(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function U2(t,e,n){for(var o=Math.sin(e),s=Math.cos(e),h=V2(n),a=PD(n),m=2*s*a,g=-2*o*h,b=t.length-1,T=t[b],M=0,I=0,P=0,z,V;--b>=0;)z=I,V=M,I=T,M=P,T=-z+m*I-g*M+t[b],P=-V+g*I+m*M;return m=o*a,g=s*h,[m*T-g*P,m*P+g*T]}function kD(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(yy.init.apply(this),this.forward=yy.forward,this.inverse=yy.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var o=n0(this.cbg,this.lat0);this.Zb=-this.Qn*(o+AD(this.gtu,2*o))}function LD(t){var e=Vt(t.x-this.long0),n=t.y;n=n0(this.cbg,n);var o=Math.sin(n),s=Math.cos(n),h=Math.sin(e),a=Math.cos(e);n=Math.atan2(o,a*s),e=Math.atan2(h*s,Ya(o,s*a)),e=CD(Math.tan(e));var m=U2(this.gtu,2*n,2*e);n=n+m[0],e=e+m[1];var g,b;return Math.abs(e)<=2.623395162778?(g=this.a*(this.Qn*e)+this.x0,b=this.a*(this.Qn*n+this.Zb)+this.y0):(g=1/0,b=1/0),t.x=g,t.y=b,t}function DD(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var o,s;if(Math.abs(e)<=2.623395162778){var h=U2(this.utg,2*n,2*e);n=n+h[0],e=e+h[1],e=Math.atan(V2(e));var a=Math.sin(n),m=Math.cos(n),g=Math.sin(e),b=Math.cos(e);n=Math.atan2(a*b,Ya(g,b*m)),e=Math.atan2(g,b*m),o=Vt(e+this.long0),s=n0(this.cgb,n)}else o=1/0,s=1/0;return t.x=o,t.y=s,t}var ND=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];const gy={init:kD,forward:LD,inverse:DD,names:ND};function RD(t,e){if(t===void 0){if(t=Math.floor((Vt(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var zD="etmerc";function FD(){var t=RD(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*eo,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,gy.init.apply(this),this.forward=gy.forward,this.inverse=gy.inverse}var BD=["Universal Transverse Mercator System","utm"];const VD={init:FD,names:BD,dependsOn:zD};function i0(t,e){return Math.pow((1-t)/(1+t),e)}var UD=20;function jD(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+hn)/(Math.pow(Math.tan(.5*this.lat0+hn),this.C)*i0(this.e*t,this.ratexp))}function GD(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+hn),this.C)*i0(this.e*Math.sin(n),this.ratexp))-ft,t.x=this.C*e,t}function $D(t){for(var e=1e-14,n=t.x/this.C,o=t.y,s=Math.pow(Math.tan(.5*o+hn)/this.K,1/this.C),h=UD;h>0&&(o=2*Math.atan(s*i0(this.e*Math.sin(t.y),-.5*this.e))-ft,!(Math.abs(o-t.y)<e));--h)t.y=o;return h?(t.x=n,t.y=o,t):null}var qD=["gauss"];const o0={init:jD,forward:GD,inverse:$D,names:qD};function WD(){o0.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function HD(t){var e,n,o,s;return t.x=Vt(t.x-this.long0),o0.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*o),t.x=s*n*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*n*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function ZD(t){var e,n,o,s,h;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,h=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(h,this.R2);e=Math.sin(a),n=Math.cos(a),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/h),o=Math.atan2(t.x*e,h*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,o=0;return t.x=o,t.y=s,o0.inverse.apply(this,[t]),t.x=Vt(t.x+this.long0),t}var XD=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const KD={init:WD,forward:HD,inverse:ZD,names:XD};function YD(t,e,n){return e*=n,Math.tan(.5*(ft+t))*Math.pow((1-e)/(1+e),.5*n)}function JD(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=At&&(this.k0=.5*(1+Ep(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=At&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=At&&(this.k0=.5*this.cons*Ms(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ka(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ms(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-ft,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function QD(t){var e=t.x,n=t.y,o=Math.sin(n),s=Math.cos(n),h,a,m,g,b,T,M=Vt(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=At&&Math.abs(n+this.lat0)<=At?(t.x=NaN,t.y=NaN,t):this.sphere?(h=2*this.k0/(1+this.sinlat0*o+this.coslat0*s*Math.cos(M)),t.x=this.a*h*s*Math.sin(M)+this.x0,t.y=this.a*h*(this.coslat0*o-this.sinlat0*s*Math.cos(M))+this.y0,t):(a=2*Math.atan(this.ssfn_(n,o,this.e))-ft,g=Math.cos(a),m=Math.sin(a),Math.abs(this.coslat0)<=At?(b=Ka(this.e,n*this.con,this.con*o),T=2*this.a*this.k0*b/this.cons,t.x=this.x0+T*Math.sin(e-this.long0),t.y=this.y0-this.con*T*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<At?(h=2*this.a*this.k0/(1+g*Math.cos(M)),t.y=h*m):(h=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*m+this.cosX0*g*Math.cos(M))),t.y=h*(this.cosX0*m-this.sinX0*g*Math.cos(M))+this.y0),t.x=h*g*Math.sin(M)+this.x0,t))}function eN(t){t.x-=this.x0,t.y-=this.y0;var e,n,o,s,h,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var m=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=At?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(m)*this.sinlat0+t.y*Math.sin(m)*this.coslat0/a),Math.abs(this.coslat0)<At?this.lat0>0?e=Vt(this.long0+Math.atan2(t.x,-1*t.y)):e=Vt(this.long0+Math.atan2(t.x,t.y)):e=Vt(this.long0+Math.atan2(t.x*Math.sin(m),a*this.coslat0*Math.cos(m)-t.y*this.sinlat0*Math.sin(m))),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=At){if(a<=At)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,o=a*this.cons/(2*this.a*this.k0),n=this.con*Sp(this.e,o),e=this.con*Vt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=At?h=this.X0:(h=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/a),e=Vt(this.long0+Math.atan2(t.x*Math.sin(s),a*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),n=-1*Sp(this.e,Math.tan(.5*(ft+h)));return t.x=e,t.y=n,t}var tN=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];const rN={init:JD,forward:QD,inverse:eN,names:tN,ssfn_:YD};function nN(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,o=this.rf,s=1/o,h=2*s-Math.pow(s,2),a=this.e=Math.sqrt(h);this.R=this.k0*n*Math.sqrt(1-h)/(1-h*Math.pow(e,2)),this.alpha=Math.sqrt(1+h/(1-h)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var m=Math.log(Math.tan(Math.PI/4+this.b0/2)),g=Math.log(Math.tan(Math.PI/4+t/2)),b=Math.log((1+a*e)/(1-a*e));this.K=m-this.alpha*g+this.alpha*a/2*b}function iN(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),o=-this.alpha*(e+n)+this.K,s=2*(Math.atan(Math.exp(o))-Math.PI/4),h=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(h)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(h))),m=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(h));return t.y=this.R/2*Math.log((1+Math.sin(m))/(1-Math.sin(m)))+this.y0,t.x=this.R*a+this.x0,t}function oN(t){for(var e=t.x-this.x0,n=t.y-this.y0,o=e/this.R,s=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),h=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(o)),a=Math.atan(Math.sin(o)/(Math.cos(this.b0)*Math.cos(o)-Math.sin(this.b0)*Math.tan(s))),m=this.lambda0+a/this.alpha,g=0,b=h,T=-1e3,M=0;Math.abs(b-T)>1e-7;){if(++M>20)return;g=1/this.alpha*(Math.log(Math.tan(Math.PI/4+h/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(b))/2)),T=b,b=2*Math.atan(Math.exp(g))-Math.PI/2}return t.x=m,t.y=b,t}var aN=["somerc"];const sN={init:nN,forward:iN,inverse:oN,names:aN};var Ch=1e-7;function lN(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1}function uN(){var t,e,n,o,s,h,a,m,g,b,T=0,M,I=0,P=0,z=0,V=0,W=0,Y=0;this.no_off=lN(this),this.no_rot="no_rot"in this;var X=!1;"alpha"in this&&(X=!0);var ue=!1;if("rectified_grid_angle"in this&&(ue=!0),X&&(Y=this.alpha),ue&&(T=this.rectified_grid_angle*eo),X||ue)I=this.longc;else if(P=this.long1,V=this.lat1,z=this.long2,W=this.lat2,Math.abs(V-W)<=Ch||(t=Math.abs(V))<=Ch||Math.abs(t-ft)<=Ch||Math.abs(Math.abs(this.lat0)-ft)<=Ch||Math.abs(Math.abs(W)-ft)<=Ch)throw new Error;var he=1-this.es;e=Math.sqrt(he),Math.abs(this.lat0)>At?(m=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*m*m,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/he),this.A=this.B*this.k0*e/t,o=this.B*e/(n*Math.sqrt(t)),s=o*o-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=o,this.E*=Math.pow(Ka(this.e,this.lat0,m),this.B)):(this.B=1/e,this.A=this.k0,this.E=o=s=1),X||ue?(X?(M=Math.asin(Math.sin(Y)/o),ue||(T=Y)):(M=T,Y=Math.asin(o*Math.sin(M))),this.lam0=I-Math.asin(.5*(s-1/s)*Math.tan(M))/this.B):(h=Math.pow(Ka(this.e,V,Math.sin(V)),this.B),a=Math.pow(Ka(this.e,W,Math.sin(W)),this.B),s=this.E/h,g=(a-h)/(a+h),b=this.E*this.E,b=(b-a*h)/(b+a*h),t=P-z,t<-Math.pi?z-=bp:t>Math.pi&&(z+=bp),this.lam0=Vt(.5*(P+z)-Math.atan(b*Math.tan(.5*this.B*(P-z))/g)/this.B),M=Math.atan(2*Math.sin(this.B*Vt(P-this.lam0))/(s-1/s)),T=Y=Math.asin(o*Math.sin(M))),this.singam=Math.sin(M),this.cosgam=Math.cos(M),this.sinrot=Math.sin(T),this.cosrot=Math.cos(T),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(o*o-1)/Math.cos(Y))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*M,this.v_pole_n=this.ArB*Math.log(Math.tan(hn-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(hn+s))}function cN(t){var e={},n,o,s,h,a,m,g,b;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-ft)>At){if(a=this.E/Math.pow(Ka(this.e,t.y,Math.sin(t.y)),this.B),m=1/a,n=.5*(a-m),o=.5*(a+m),h=Math.sin(this.B*t.x),s=(n*this.singam-h*this.cosgam)/o,Math.abs(Math.abs(s)-1)<At)throw new Error;b=.5*this.ArB*Math.log((1-s)/(1+s)),m=Math.cos(this.B*t.x),Math.abs(m)<Ch?g=this.A*t.x:g=this.ArB*Math.atan2(n*this.cosgam+h*this.singam,m)}else b=t.y>0?this.v_pole_n:this.v_pole_s,g=this.ArB*t.y;return this.no_rot?(e.x=g,e.y=b):(g-=this.u_0,e.x=b*this.cosrot+g*this.sinrot,e.y=g*this.cosrot-b*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function hN(t){var e,n,o,s,h,a,m,g={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),o=Math.exp(-this.BrA*n),s=.5*(o-1/o),h=.5*(o+1/o),a=Math.sin(this.BrA*e),m=(a*this.cosgam+s*this.singam)/h,Math.abs(Math.abs(m)-1)<At)g.x=0,g.y=m<0?-ft:ft;else{if(g.y=this.E/Math.sqrt((1+m)/(1-m)),g.y=Sp(this.e,Math.pow(g.y,1/this.B)),g.y===1/0)throw new Error;g.x=-this.rB*Math.atan2(s*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return g.x+=this.lam0,g}var fN=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const pN={init:uN,forward:cN,inverse:hN,names:fN};function dN(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<At)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),o=Ms(this.e,e,n),s=Ka(this.e,this.lat1,e),h=Math.sin(this.lat2),a=Math.cos(this.lat2),m=Ms(this.e,h,a),g=Ka(this.e,this.lat2,h),b=Ka(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>At?this.ns=Math.log(o/m)/Math.log(s/g):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=o/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(b,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function mN(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=At&&(n=Ep(n)*(ft-2*At));var o=Math.abs(Math.abs(n)-ft),s,h;if(o>At)s=Ka(this.e,n,Math.sin(n)),h=this.a*this.f0*Math.pow(s,this.ns);else{if(o=n*this.ns,o<=0)return null;h=0}var a=this.ns*Vt(e-this.long0);return t.x=this.k0*(h*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-h*Math.cos(a))+this.y0,t}function yN(t){var e,n,o,s,h,a=(t.x-this.x0)/this.k0,m=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+m*m),n=1):(e=-Math.sqrt(a*a+m*m),n=-1);var g=0;if(e!==0&&(g=Math.atan2(n*a,n*m)),e!==0||this.ns>0){if(n=1/this.ns,o=Math.pow(e/(this.a*this.f0),n),s=Sp(this.e,o),s===-9999)return null}else s=-ft;return h=Vt(g/this.ns+this.long0),t.x=h,t.y=s,t}var gN=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const vN={init:dN,forward:mN,inverse:yN,names:gN};function _N(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function xN(t){var e,n,o,s,h,a,m,g=t.x,b=t.y,T=Vt(g-this.long0);return e=Math.pow((1+this.e*Math.sin(b))/(1-this.e*Math.sin(b)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(b/2+this.s45),this.alfa)/e)-this.s45),o=-T*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),h=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(s)),a=this.n*h,m=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=m*Math.cos(a)/1,t.x=m*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t}function bN(t){var e,n,o,s,h,a,m,g,b=t.x;t.x=t.y,t.y=b,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),h=Math.atan2(t.y,t.x),s=h/Math.sin(this.s0),o=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(o)-Math.sin(this.ad)*Math.cos(o)*Math.cos(s)),n=Math.asin(Math.cos(o)*Math.sin(s)/Math.cos(e)),t.x=this.long0-n/this.alfa,m=e,g=0;var T=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(m))/(1-this.e*Math.sin(m)),this.e/2))-this.s45),Math.abs(m-t.y)<1e-10&&(g=1),m=t.y,T+=1;while(g===0&&T<15);return T>=15?null:t}var wN=["Krovak","krovak"];const EN={init:_N,forward:xN,inverse:bN,names:wN};function Do(t,e,n,o,s){return t*s-e*Math.sin(2*s)+n*Math.sin(4*s)-o*Math.sin(6*s)}function Ip(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Op(t){return .375*t*(1+.25*t*(1+.46875*t))}function Cp(t){return .05859375*t*t*(1+.75*t)}function Ap(t){return t*t*t*(35/3072)}function Ah(t,e,n){var o=e*n;return t/Math.sqrt(1-o*o)}function Ph(t){return Math.abs(t)<ft?t:t-Ep(t)*Math.PI}function vy(t,e,n,o,s){var h,a;h=t/e;for(var m=0;m<15;m++)if(a=(t-(e*h-n*Math.sin(2*h)+o*Math.sin(4*h)-s*Math.sin(6*h)))/(e-2*n*Math.cos(2*h)+4*o*Math.cos(4*h)-6*s*Math.cos(6*h)),h+=a,Math.abs(a)<=1e-10)return h;return NaN}function SN(){this.sphere||(this.e0=Ip(this.es),this.e1=Op(this.es),this.e2=Cp(this.es),this.e3=Ap(this.es),this.ml0=this.a*Do(this.e0,this.e1,this.e2,this.e3,this.lat0))}function TN(t){var e,n,o=t.x,s=t.y;if(o=Vt(o-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(o)),n=this.a*(Math.atan2(Math.tan(s),Math.cos(o))-this.lat0);else{var h=Math.sin(s),a=Math.cos(s),m=Ah(this.a,this.e,h),g=Math.tan(s)*Math.tan(s),b=o*Math.cos(s),T=b*b,M=this.es*a*a/(1-this.es),I=this.a*Do(this.e0,this.e1,this.e2,this.e3,s);e=m*b*(1-T*g*(1/6-(8-g+8*M)*T/120)),n=I-this.ml0+m*h/a*T*(.5+(5-g+6*M)*T/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function MN(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,o,s;if(this.sphere){var h=n+this.lat0;o=Math.asin(Math.sin(h)*Math.cos(e)),s=Math.atan2(Math.tan(e),Math.cos(h))}else{var a=this.ml0/this.a+n,m=vy(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(m)-ft)<=At)return t.x=this.long0,t.y=ft,n<0&&(t.y*=-1),t;var g=Ah(this.a,this.e,Math.sin(m)),b=g*g*g/this.a/this.a*(1-this.es),T=Math.pow(Math.tan(m),2),M=e*this.a/g,I=M*M;o=m-g*Math.tan(m)/b*M*M*(.5-(1+3*T)*M*M/24),s=M*(1-I*(T/3+(1+3*T)*T*I/15))/Math.cos(m)}return t.x=Vt(s+this.long0),t.y=Ph(o),t}var IN=["Cassini","Cassini_Soldner","cass"];const ON={init:SN,forward:TN,inverse:MN,names:IN};function pu(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var CN=1,AN=2,PN=3,kN=4;function LN(){var t=Math.abs(this.lat0);if(Math.abs(t-ft)<At?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<At?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=pu(this.e,1),this.mmf=.5/(1-this.es),this.apa=jN(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=pu(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function DN(t){var e,n,o,s,h,a,m,g,b,T,M=t.x,I=t.y;if(M=Vt(M-this.long0),this.sphere){if(h=Math.sin(I),T=Math.cos(I),o=Math.cos(M),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+T*o:1+this.sinph0*h+this.cosph0*T*o,n<=At)return null;n=Math.sqrt(2/n),e=n*T*Math.sin(M),n*=this.mode===this.EQUIT?h:this.cosph0*h-this.sinph0*T*o}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(o=-o),Math.abs(I+this.lat0)<At)return null;n=hn-I*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(M),n*=o}}else{switch(m=0,g=0,b=0,o=Math.cos(M),s=Math.sin(M),h=Math.sin(I),a=pu(this.e,h),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(m=a/this.qp,g=Math.sqrt(1-m*m)),this.mode){case this.OBLIQ:b=1+this.sinb1*m+this.cosb1*g*o;break;case this.EQUIT:b=1+g*o;break;case this.N_POLE:b=ft+I,a=this.qp-a;break;case this.S_POLE:b=I-ft,a=this.qp+a;break}if(Math.abs(b)<At)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:b=Math.sqrt(2/b),this.mode===this.OBLIQ?n=this.ymf*b*(this.cosb1*m-this.sinb1*g*o):n=(b=Math.sqrt(2/(1+g*o)))*m*this.ymf,e=this.xmf*b*g*s;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(b=Math.sqrt(a))*s,n=o*(this.mode===this.S_POLE?b:-b)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function NN(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,o,s,h,a,m,g,b;if(this.sphere){var T=0,M,I=0;if(M=Math.sqrt(e*e+n*n),s=M*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(I=Math.sin(s),T=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(M)<=At?0:Math.asin(n*I/M),e*=I,n=T*M;break;case this.OBLIQ:s=Math.abs(M)<=At?this.lat0:Math.asin(T*this.sinph0+n*I*this.cosph0/M),e*=I*this.cosph0,n=(T-Math.sin(s)*this.sinph0)*M;break;case this.N_POLE:n=-n,s=ft-s;break;case this.S_POLE:s-=ft;break}o=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(b=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,g=Math.sqrt(e*e+n*n),g<At)return t.x=this.long0,t.y=this.lat0,t;a=2*Math.asin(.5*g/this.rq),h=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(b=h*this.sinb1+n*a*this.cosb1/g,m=this.qp*b,n=g*this.cosb1*h-n*this.sinb1*a):(b=n*a/g,m=this.qp*b,n=g*h)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),m=e*e+n*n,!m)return t.x=this.long0,t.y=this.lat0,t;b=1-m/this.qp,this.mode===this.S_POLE&&(b=-b)}o=Math.atan2(e,n),s=GN(Math.asin(b),this.apa)}return t.x=Vt(this.long0+o),t.y=s,t}var RN=.3333333333333333,zN=.17222222222222222,FN=.10257936507936508,BN=.06388888888888888,VN=.0664021164021164,UN=.016415012942191543;function jN(t){var e,n=[];return n[0]=t*RN,e=t*t,n[0]+=e*zN,n[1]=e*BN,e*=t,n[0]+=e*FN,n[1]+=e*VN,n[2]=e*UN,n}function GN(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var $N=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const qN={init:LN,forward:DN,inverse:NN,names:$N,S_POLE:CN,N_POLE:AN,EQUIT:PN,OBLIQ:kN};function du(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function WN(){Math.abs(this.lat1+this.lat2)<At||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ms(this.e3,this.sin_po,this.cos_po),this.qs1=pu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ms(this.e3,this.sin_po,this.cos_po),this.qs2=pu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=pu(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>At?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function HN(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var o=pu(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*o)/this.ns0,h=this.ns0*Vt(e-this.long0),a=s*Math.sin(h)+this.x0,m=this.rh-s*Math.cos(h)+this.y0;return t.x=a,t.y=m,t}function ZN(t){var e,n,o,s,h,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),o=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),o=-1),s=0,e!==0&&(s=Math.atan2(o*t.x,o*t.y)),o=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-o*o)/(2*this.ns0)):(n=(this.c-o*o)/this.ns0,a=this.phi1z(this.e3,n)),h=Vt(s/this.ns0+this.long0),t.x=h,t.y=a,t}function XN(t,e){var n,o,s,h,a,m=du(.5*e);if(t<At)return m;for(var g=t*t,b=1;b<=25;b++)if(n=Math.sin(m),o=Math.cos(m),s=t*n,h=1-s*s,a=.5*h*h/o*(e/(1-g)-n/h+.5/t*Math.log((1-s)/(1+s))),m=m+a,Math.abs(a)<=1e-7)return m;return null}var KN=["Albers_Conic_Equal_Area","Albers","aea"];const YN={init:WN,forward:HN,inverse:ZN,names:KN,phi1z:XN};function JN(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function QN(t){var e,n,o,s,h,a,m,g,b=t.x,T=t.y;return o=Vt(b-this.long0),e=Math.sin(T),n=Math.cos(T),s=Math.cos(o),a=this.sin_p14*e+this.cos_p14*n*s,h=1,a>0||Math.abs(a)<=At?(m=this.x0+this.a*h*n*Math.sin(o)/a,g=this.y0+this.a*h*(this.cos_p14*e-this.sin_p14*n*s)/a):(m=this.x0+this.infinity_dist*n*Math.sin(o),g=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*s)),t.x=m,t.y=g,t}function e3(t){var e,n,o,s,h,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),n=Math.sin(s),o=Math.cos(s),a=du(o*this.sin_p14+t.y*n*this.cos_p14/e),h=Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n),h=Vt(this.long0+h)):(a=this.phic0,h=0),t.x=h,t.y=a,t}var t3=["gnom"];const r3={init:JN,forward:QN,inverse:e3,names:t3};function n3(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*ft:ft;for(var o=Math.asin(.5*e),s,h,a,m,g=0;g<30;g++)if(h=Math.sin(o),a=Math.cos(o),m=t*h,s=Math.pow(1-m*m,2)/(2*a)*(e/(1-t*t)-h/(1-m*m)+.5/t*Math.log((1-m)/(1+m))),o+=s,Math.abs(s)<=1e-10)return o;return NaN}function i3(){this.sphere||(this.k0=Ms(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function o3(t){var e=t.x,n=t.y,o,s,h=Vt(e-this.long0);if(this.sphere)o=this.x0+this.a*h*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var a=pu(this.e,Math.sin(n));o=this.x0+this.a*this.k0*h,s=this.y0+this.a*a*.5/this.k0}return t.x=o,t.y=s,t}function a3(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Vt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=n3(this.e,2*t.y*this.k0/this.a),e=Vt(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var s3=["cea"];const l3={init:i3,forward:o3,inverse:a3,names:s3};function u3(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function c3(t){var e=t.x,n=t.y,o=Vt(e-this.long0),s=Ph(n-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*s,t}function h3(t){var e=t.x,n=t.y;return t.x=Vt(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Ph(this.lat0+(n-this.y0)/this.a),t}var f3=["Equirectangular","Equidistant_Cylindrical","eqc"];const p3={init:u3,forward:c3,inverse:h3,names:f3};var j2=20;function d3(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ip(this.es),this.e1=Op(this.es),this.e2=Cp(this.es),this.e3=Ap(this.es),this.ml0=this.a*Do(this.e0,this.e1,this.e2,this.e3,this.lat0)}function m3(t){var e=t.x,n=t.y,o,s,h,a=Vt(e-this.long0);if(h=a*Math.sin(n),this.sphere)Math.abs(n)<=At?(o=this.a*a,s=-1*this.a*this.lat0):(o=this.a*Math.sin(h)/Math.tan(n),s=this.a*(Ph(n-this.lat0)+(1-Math.cos(h))/Math.tan(n)));else if(Math.abs(n)<=At)o=this.a*a,s=-1*this.ml0;else{var m=Ah(this.a,this.e,Math.sin(n))/Math.tan(n);o=m*Math.sin(h),s=this.a*Do(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+m*(1-Math.cos(h))}return t.x=o+this.x0,t.y=s+this.y0,t}function y3(t){var e,n,o,s,h,a,m,g,b;if(o=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=At)e=Vt(o/this.a+this.long0),n=0;else{a=this.lat0+s/this.a,m=o*o/this.a/this.a+a*a,g=a;var T;for(h=j2;h;--h)if(T=Math.tan(g),b=-1*(a*(g*T+1)-g-.5*(g*g+m)*T)/((g-a)/T-1),g+=b,Math.abs(b)<=At){n=g;break}e=Vt(this.long0+Math.asin(o*Math.tan(g)/this.a)/Math.sin(n))}else if(Math.abs(s+this.ml0)<=At)n=0,e=Vt(this.long0+o/this.a);else{a=(this.ml0+s)/this.a,m=o*o/this.a/this.a+a*a,g=a;var M,I,P,z,V;for(h=j2;h;--h)if(V=this.e*Math.sin(g),M=Math.sqrt(1-V*V)*Math.tan(g),I=this.a*Do(this.e0,this.e1,this.e2,this.e3,g),P=this.e0-2*this.e1*Math.cos(2*g)+4*this.e2*Math.cos(4*g)-6*this.e3*Math.cos(6*g),z=I/this.a,b=(a*(M*z+1)-z-.5*M*(z*z+m))/(this.es*Math.sin(2*g)*(z*z+m-2*a*z)/(4*M)+(a-z)*(M*P-2/Math.sin(2*g))-P),g-=b,Math.abs(b)<=At){n=g;break}M=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Vt(this.long0+Math.asin(o*M/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var g3=["Polyconic","poly"];const v3={init:d3,forward:m3,inverse:y3,names:g3};function _3(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function x3(t){var e,n=t.x,o=t.y,s=o-this.lat0,h=n-this.long0,a=s/xp*1e-5,m=h,g=1,b=0;for(e=1;e<=10;e++)g=g*a,b=b+this.A[e]*g;var T=b,M=m,I=1,P=0,z,V,W=0,Y=0;for(e=1;e<=6;e++)z=I*T-P*M,V=P*T+I*M,I=z,P=V,W=W+this.B_re[e]*I-this.B_im[e]*P,Y=Y+this.B_im[e]*I+this.B_re[e]*P;return t.x=Y*this.a+this.x0,t.y=W*this.a+this.y0,t}function b3(t){var e,n=t.x,o=t.y,s=n-this.x0,h=o-this.y0,a=h/this.a,m=s/this.a,g=1,b=0,T,M,I=0,P=0;for(e=1;e<=6;e++)T=g*a-b*m,M=b*a+g*m,g=T,b=M,I=I+this.C_re[e]*g-this.C_im[e]*b,P=P+this.C_im[e]*g+this.C_re[e]*b;for(var z=0;z<this.iterations;z++){var V=I,W=P,Y,X,ue=a,he=m;for(e=2;e<=6;e++)Y=V*I-W*P,X=W*I+V*P,V=Y,W=X,ue=ue+(e-1)*(this.B_re[e]*V-this.B_im[e]*W),he=he+(e-1)*(this.B_im[e]*V+this.B_re[e]*W);V=1,W=0;var ve=this.B_re[1],ze=this.B_im[1];for(e=2;e<=6;e++)Y=V*I-W*P,X=W*I+V*P,V=Y,W=X,ve=ve+e*(this.B_re[e]*V-this.B_im[e]*W),ze=ze+e*(this.B_im[e]*V+this.B_re[e]*W);var Fe=ve*ve+ze*ze;I=(ue*ve+he*ze)/Fe,P=(he*ve-ue*ze)/Fe}var Pe=I,Se=P,Ie=1,Je=0;for(e=1;e<=9;e++)Ie=Ie*Pe,Je=Je+this.D[e]*Ie;var $e=this.lat0+Je*xp*1e5,st=this.long0+Se;return t.x=st,t.y=$e,t}var w3=["New_Zealand_Map_Grid","nzmg"];const E3={init:_3,forward:x3,inverse:b3,names:w3};function S3(){}function T3(t){var e=t.x,n=t.y,o=Vt(e-this.long0),s=this.x0+this.a*o,h=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=s,t.y=h,t}function M3(t){t.x-=this.x0,t.y-=this.y0;var e=Vt(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var I3=["Miller_Cylindrical","mill"];const O3={init:S3,forward:T3,inverse:M3,names:I3};var C3=20;function A3(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=F2(this.es)}function P3(t){var e,n,o=t.x,s=t.y;if(o=Vt(o-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var h=this.n*Math.sin(s),a=C3;a;--a){var m=(this.m*s+Math.sin(s)-h)/(this.m+Math.cos(s));if(s-=m,Math.abs(m)<At)break}e=this.a*this.C_x*o*(this.m+Math.cos(s)),n=this.a*this.C_y*s}else{var g=Math.sin(s),b=Math.cos(s);n=this.a*my(s,g,b,this.en),e=this.a*o*b/Math.sqrt(1-this.es*g*g)}return t.x=e,t.y=n,t}function k3(t){var e,n,o,s;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,o=o/(this.C_x*(this.m+Math.cos(e))),this.m?e=du((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=du(Math.sin(e)/this.n)),o=Vt(o+this.long0),e=Ph(e)):(e=B2(t.y/this.a,this.es,this.en),s=Math.abs(e),s<ft?(s=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),o=Vt(n)):s-At<ft&&(o=this.long0)),t.x=o,t.y=e,t}var L3=["Sinusoidal","sinu"];const D3={init:A3,forward:P3,inverse:k3,names:L3};function N3(){}function R3(t){for(var e=t.x,n=t.y,o=Vt(e-this.long0),s=n,h=Math.PI*Math.sin(n);;){var a=-(s+Math.sin(s)-h)/(1+Math.cos(s));if(s+=a,Math.abs(a)<At)break}s/=2,Math.PI/2-Math.abs(n)<At&&(o=0);var m=.900316316158*this.a*o*Math.cos(s)+this.x0,g=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=m,t.y=g,t}function z3(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var o=Vt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));o<-Math.PI&&(o=-Math.PI),o>Math.PI&&(o=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var s=Math.asin(n);return t.x=o,t.y=s,t}var F3=["Mollweide","moll"];const B3={init:N3,forward:R3,inverse:z3,names:F3};function V3(){Math.abs(this.lat1+this.lat2)<At||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ip(this.es),this.e1=Op(this.es),this.e2=Cp(this.es),this.e3=Ap(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ms(this.e,this.sinphi,this.cosphi),this.ml1=Do(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<At?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ms(this.e,this.sinphi,this.cosphi),this.ml2=Do(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Do(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function U3(t){var e=t.x,n=t.y,o;if(this.sphere)o=this.a*(this.g-n);else{var s=Do(this.e0,this.e1,this.e2,this.e3,n);o=this.a*(this.g-s)}var h=this.ns*Vt(e-this.long0),a=this.x0+o*Math.sin(h),m=this.y0+this.rh-o*Math.cos(h);return t.x=a,t.y=m,t}function j3(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,o,s;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var h=0;if(n!==0&&(h=Math.atan2(e*t.x,e*t.y)),this.sphere)return s=Vt(this.long0+h/this.ns),o=Ph(this.g-n/this.a),t.x=s,t.y=o,t;var a=this.g-n/this.a;return o=vy(a,this.e0,this.e1,this.e2,this.e3),s=Vt(this.long0+h/this.ns),t.x=s,t.y=o,t}var G3=["Equidistant_Conic","eqdc"];const $3={init:V3,forward:U3,inverse:j3,names:G3};function q3(){this.R=this.a}function W3(t){var e=t.x,n=t.y,o=Vt(e-this.long0),s,h;Math.abs(n)<=At&&(s=this.x0+this.R*o,h=this.y0);var a=du(2*Math.abs(n/Math.PI));(Math.abs(o)<=At||Math.abs(Math.abs(n)-ft)<=At)&&(s=this.x0,n>=0?h=this.y0+Math.PI*this.R*Math.tan(.5*a):h=this.y0+Math.PI*this.R*-Math.tan(.5*a));var m=.5*Math.abs(Math.PI/o-o/Math.PI),g=m*m,b=Math.sin(a),T=Math.cos(a),M=T/(b+T-1),I=M*M,P=M*(2/b-1),z=P*P,V=Math.PI*this.R*(m*(M-z)+Math.sqrt(g*(M-z)*(M-z)-(z+g)*(I-z)))/(z+g);o<0&&(V=-V),s=this.x0+V;var W=g+M;return V=Math.PI*this.R*(P*W-m*Math.sqrt((z+g)*(g+1)-W*W))/(z+g),n>=0?h=this.y0+V:h=this.y0-V,t.x=s,t.y=h,t}function H3(t){var e,n,o,s,h,a,m,g,b,T,M,I,P;return t.x-=this.x0,t.y-=this.y0,M=Math.PI*this.R,o=t.x/M,s=t.y/M,h=o*o+s*s,a=-Math.abs(s)*(1+h),m=a-2*s*s+o*o,g=-2*a+1+2*s*s+h*h,P=s*s/g+(2*m*m*m/g/g/g-9*a*m/g/g)/27,b=(a-m*m/3/g)/g,T=2*Math.sqrt(-b/3),M=3*P/b/T,Math.abs(M)>1&&(M>=0?M=1:M=-1),I=Math.acos(M)/3,t.y>=0?n=(-T*Math.cos(I+Math.PI/3)-m/3/g)*Math.PI:n=-(-T*Math.cos(I+Math.PI/3)-m/3/g)*Math.PI,Math.abs(o)<At?e=this.long0:e=Vt(this.long0+Math.PI*(h-1+Math.sqrt(1+2*(o*o-s*s)+h*h))/2/o),t.x=e,t.y=n,t}var Z3=["Van_der_Grinten_I","VanDerGrinten","vandg"];const X3={init:q3,forward:W3,inverse:H3,names:Z3};function K3(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function Y3(t){var e=t.x,n=t.y,o=Math.sin(t.y),s=Math.cos(t.y),h=Vt(e-this.long0),a,m,g,b,T,M,I,P,z,V,W,Y,X,ue,he,ve,ze,Fe,Pe,Se,Ie,Je,$e;return this.sphere?Math.abs(this.sin_p12-1)<=At?(t.x=this.x0+this.a*(ft-n)*Math.sin(h),t.y=this.y0-this.a*(ft-n)*Math.cos(h),t):Math.abs(this.sin_p12+1)<=At?(t.x=this.x0+this.a*(ft+n)*Math.sin(h),t.y=this.y0+this.a*(ft+n)*Math.cos(h),t):(Fe=this.sin_p12*o+this.cos_p12*s*Math.cos(h),ve=Math.acos(Fe),ze=ve?ve/Math.sin(ve):1,t.x=this.x0+this.a*ze*s*Math.sin(h),t.y=this.y0+this.a*ze*(this.cos_p12*o-this.sin_p12*s*Math.cos(h)),t):(a=Ip(this.es),m=Op(this.es),g=Cp(this.es),b=Ap(this.es),Math.abs(this.sin_p12-1)<=At?(T=this.a*Do(a,m,g,b,ft),M=this.a*Do(a,m,g,b,n),t.x=this.x0+(T-M)*Math.sin(h),t.y=this.y0-(T-M)*Math.cos(h),t):Math.abs(this.sin_p12+1)<=At?(T=this.a*Do(a,m,g,b,ft),M=this.a*Do(a,m,g,b,n),t.x=this.x0+(T+M)*Math.sin(h),t.y=this.y0+(T+M)*Math.cos(h),t):(I=o/s,P=Ah(this.a,this.e,this.sin_p12),z=Ah(this.a,this.e,o),V=Math.atan((1-this.es)*I+this.es*P*this.sin_p12/(z*s)),W=Math.atan2(Math.sin(h),this.cos_p12*Math.tan(V)-this.sin_p12*Math.cos(h)),W===0?Pe=Math.asin(this.cos_p12*Math.sin(V)-this.sin_p12*Math.cos(V)):Math.abs(Math.abs(W)-Math.PI)<=At?Pe=-Math.asin(this.cos_p12*Math.sin(V)-this.sin_p12*Math.cos(V)):Pe=Math.asin(Math.sin(h)*Math.cos(V)/Math.sin(W)),Y=this.e*this.sin_p12/Math.sqrt(1-this.es),X=this.e*this.cos_p12*Math.cos(W)/Math.sqrt(1-this.es),ue=Y*X,he=X*X,Se=Pe*Pe,Ie=Se*Pe,Je=Ie*Pe,$e=Je*Pe,ve=P*Pe*(1-Se*he*(1-he)/6+Ie/8*ue*(1-2*he)+Je/120*(he*(4-7*he)-3*Y*Y*(1-7*he))-$e/48*ue),t.x=this.x0+ve*Math.sin(W),t.y=this.y0+ve*Math.cos(W),t))}function J3(t){t.x-=this.x0,t.y-=this.y0;var e,n,o,s,h,a,m,g,b,T,M,I,P,z,V,W,Y,X,ue,he,ve,ze,Fe,Pe;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*ft*this.a?void 0:(n=e/this.a,o=Math.sin(n),s=Math.cos(n),h=this.long0,Math.abs(e)<=At?a=this.lat0:(a=du(s*this.sin_p12+t.y*o*this.cos_p12/e),m=Math.abs(this.lat0)-ft,Math.abs(m)<=At?this.lat0>=0?h=Vt(this.long0+Math.atan2(t.x,-t.y)):h=Vt(this.long0-Math.atan2(-t.x,t.y)):h=Vt(this.long0+Math.atan2(t.x*o,e*this.cos_p12*s-t.y*this.sin_p12*o))),t.x=h,t.y=a,t)):(g=Ip(this.es),b=Op(this.es),T=Cp(this.es),M=Ap(this.es),Math.abs(this.sin_p12-1)<=At?(I=this.a*Do(g,b,T,M,ft),e=Math.sqrt(t.x*t.x+t.y*t.y),P=I-e,a=vy(P/this.a,g,b,T,M),h=Vt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=h,t.y=a,t):Math.abs(this.sin_p12+1)<=At?(I=this.a*Do(g,b,T,M,ft),e=Math.sqrt(t.x*t.x+t.y*t.y),P=e-I,a=vy(P/this.a,g,b,T,M),h=Vt(this.long0+Math.atan2(t.x,t.y)),t.x=h,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),W=Math.atan2(t.x,t.y),z=Ah(this.a,this.e,this.sin_p12),Y=Math.cos(W),X=this.e*this.cos_p12*Y,ue=-X*X/(1-this.es),he=3*this.es*(1-ue)*this.sin_p12*this.cos_p12*Y/(1-this.es),ve=e/z,ze=ve-ue*(1+ue)*Math.pow(ve,3)/6-he*(1+3*ue)*Math.pow(ve,4)/24,Fe=1-ue*ze*ze/2-ve*ze*ze*ze/6,V=Math.asin(this.sin_p12*Math.cos(ze)+this.cos_p12*Math.sin(ze)*Y),h=Vt(this.long0+Math.asin(Math.sin(W)*Math.sin(ze)/Math.cos(V))),Pe=Math.sin(V),a=Math.atan2((Pe-this.es*Fe*this.sin_p12)*Math.tan(V),Pe*(1-this.es)),t.x=h,t.y=a,t))}var Q3=["Azimuthal_Equidistant","aeqd"];const eR={init:K3,forward:Y3,inverse:J3,names:Q3};function tR(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function rR(t){var e,n,o,s,h,a,m,g,b=t.x,T=t.y;return o=Vt(b-this.long0),e=Math.sin(T),n=Math.cos(T),s=Math.cos(o),a=this.sin_p14*e+this.cos_p14*n*s,h=1,(a>0||Math.abs(a)<=At)&&(m=this.a*h*n*Math.sin(o),g=this.y0+this.a*h*(this.cos_p14*e-this.sin_p14*n*s)),t.x=m,t.y=g,t}function nR(t){var e,n,o,s,h,a,m;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=du(e/this.a),o=Math.sin(n),s=Math.cos(n),a=this.long0,Math.abs(e)<=At?(m=this.lat0,t.x=a,t.y=m,t):(m=du(s*this.sin_p14+t.y*o*this.cos_p14/e),h=Math.abs(this.lat0)-ft,Math.abs(h)<=At?(this.lat0>=0?a=Vt(this.long0+Math.atan2(t.x,-t.y)):a=Vt(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=m,t):(a=Vt(this.long0+Math.atan2(t.x*o,e*this.cos_p14*s-t.y*this.sin_p14*o)),t.x=a,t.y=m,t))}var iR=["ortho"];const oR={init:tR,forward:rR,inverse:nR,names:iR};var Kn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},fn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function aR(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=ft-hn/2?this.face=Kn.TOP:this.lat0<=-(ft-hn/2)?this.face=Kn.BOTTOM:Math.abs(this.long0)<=hn?this.face=Kn.FRONT:Math.abs(this.long0)<=ft+hn?this.face=this.long0>0?Kn.RIGHT:Kn.LEFT:this.face=Kn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function sR(t){var e={x:0,y:0},n,o,s,h,a,m,g={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,o=t.x,this.face===Kn.TOP)h=ft-n,o>=hn&&o<=ft+hn?(g.value=fn.AREA_0,s=o-ft):o>ft+hn||o<=-(ft+hn)?(g.value=fn.AREA_1,s=o>0?o-yi:o+yi):o>-(ft+hn)&&o<=-hn?(g.value=fn.AREA_2,s=o+ft):(g.value=fn.AREA_3,s=o);else if(this.face===Kn.BOTTOM)h=ft+n,o>=hn&&o<=ft+hn?(g.value=fn.AREA_0,s=-o+ft):o<hn&&o>=-hn?(g.value=fn.AREA_1,s=-o):o<-hn&&o>=-(ft+hn)?(g.value=fn.AREA_2,s=-o-ft):(g.value=fn.AREA_3,s=o>0?-o+yi:-o-yi);else{var b,T,M,I,P,z,V;this.face===Kn.RIGHT?o=kh(o,+ft):this.face===Kn.BACK?o=kh(o,+yi):this.face===Kn.LEFT&&(o=kh(o,-ft)),I=Math.sin(n),P=Math.cos(n),z=Math.sin(o),V=Math.cos(o),b=P*V,T=P*z,M=I,this.face===Kn.FRONT?(h=Math.acos(b),s=_y(h,M,T,g)):this.face===Kn.RIGHT?(h=Math.acos(T),s=_y(h,M,-b,g)):this.face===Kn.BACK?(h=Math.acos(-b),s=_y(h,M,-T,g)):this.face===Kn.LEFT?(h=Math.acos(-T),s=_y(h,M,b,g)):(h=s=0,g.value=fn.AREA_0)}return m=Math.atan(12/yi*(s+Math.acos(Math.sin(s)*Math.cos(hn))-ft)),a=Math.sqrt((1-Math.cos(h))/(Math.cos(m)*Math.cos(m))/(1-Math.cos(Math.atan(1/Math.cos(s))))),g.value===fn.AREA_1?m+=ft:g.value===fn.AREA_2?m+=yi:g.value===fn.AREA_3&&(m+=1.5*yi),e.x=a*Math.cos(m),e.y=a*Math.sin(m),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function lR(t){var e={lam:0,phi:0},n,o,s,h,a,m,g,b,T,M={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,o=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?M.value=fn.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(M.value=fn.AREA_1,n-=ft):t.x<0&&-t.x>=Math.abs(t.y)?(M.value=fn.AREA_2,n=n<0?n+yi:n-yi):(M.value=fn.AREA_3,n+=ft),T=yi/12*Math.tan(n),a=Math.sin(T)/(Math.cos(T)-1/Math.sqrt(2)),m=Math.atan(a),s=Math.cos(n),h=Math.tan(o),g=1-s*s*h*h*(1-Math.cos(Math.atan(1/Math.cos(m)))),g<-1?g=-1:g>1&&(g=1),this.face===Kn.TOP)b=Math.acos(g),e.phi=ft-b,M.value===fn.AREA_0?e.lam=m+ft:M.value===fn.AREA_1?e.lam=m<0?m+yi:m-yi:M.value===fn.AREA_2?e.lam=m-ft:e.lam=m;else if(this.face===Kn.BOTTOM)b=Math.acos(g),e.phi=b-ft,M.value===fn.AREA_0?e.lam=-m+ft:M.value===fn.AREA_1?e.lam=-m:M.value===fn.AREA_2?e.lam=-m-ft:e.lam=m<0?-m-yi:-m+yi;else{var I,P,z;I=g,T=I*I,T>=1?z=0:z=Math.sqrt(1-T)*Math.sin(m),T+=z*z,T>=1?P=0:P=Math.sqrt(1-T),M.value===fn.AREA_1?(T=P,P=-z,z=T):M.value===fn.AREA_2?(P=-P,z=-z):M.value===fn.AREA_3&&(T=P,P=z,z=-T),this.face===Kn.RIGHT?(T=I,I=-P,P=T):this.face===Kn.BACK?(I=-I,P=-P):this.face===Kn.LEFT&&(T=I,I=P,P=-T),e.phi=Math.acos(-z)-ft,e.lam=Math.atan2(P,I),this.face===Kn.RIGHT?e.lam=kh(e.lam,-ft):this.face===Kn.BACK?e.lam=kh(e.lam,-yi):this.face===Kn.LEFT&&(e.lam=kh(e.lam,+ft))}if(this.es!==0){var V,W,Y;V=e.phi<0?1:0,W=Math.tan(e.phi),Y=this.b/Math.sqrt(W*W+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-Y*Y)/(this.one_minus_f*Y)),V&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function _y(t,e,n,o){var s;return t<At?(o.value=fn.AREA_0,s=0):(s=Math.atan2(e,n),Math.abs(s)<=hn?o.value=fn.AREA_0:s>hn&&s<=ft+hn?(o.value=fn.AREA_1,s-=ft):s>ft+hn||s<=-(ft+hn)?(o.value=fn.AREA_2,s=s>=0?s-yi:s+yi):(o.value=fn.AREA_3,s+=ft)),s}function kh(t,e){var n=t+e;return n<-yi?n+=bp:n>+yi&&(n-=bp),n}var uR=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const cR={init:aR,forward:sR,inverse:lR,names:uR};var a0=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Pp=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],G2=.8487,$2=1.3523,q2=Ts/5,hR=1/q2,Lh=18,xy=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},fR=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function pR(t,e,n,o){for(var s=e;o;--o){var h=t(s);if(s-=h,Math.abs(h)<n)break}return s}function dR(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function mR(t){var e=Vt(t.x-this.long0),n=Math.abs(t.y),o=Math.floor(n*q2);o<0?o=0:o>=Lh&&(o=Lh-1),n=Ts*(n-hR*o);var s={x:xy(a0[o],n)*e,y:xy(Pp[o],n)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*G2+this.x0,s.y=s.y*this.a*$2+this.y0,s}function yR(t){var e={x:(t.x-this.x0)/(this.a*G2),y:Math.abs(t.y-this.y0)/(this.a*$2)};if(e.y>=1)e.x/=a0[Lh][0],e.y=t.y<0?-ft:ft;else{var n=Math.floor(e.y*Lh);for(n<0?n=0:n>=Lh&&(n=Lh-1);;)if(Pp[n][0]>e.y)--n;else if(Pp[n+1][0]<=e.y)++n;else break;var o=Pp[n],s=5*(e.y-o[0])/(Pp[n+1][0]-o[0]);s=pR(function(h){return(xy(o,h)-e.y)/fR(o,h)},s,At,100),e.x/=xy(a0[n],s),e.y=(5*n+s)*eo,t.y<0&&(e.y=-e.y)}return e.x=Vt(e.x+this.long0),e}var gR=["Robinson","robin"];const vR={init:dR,forward:mR,inverse:yR,names:gR};function _R(){this.name="geocent"}function xR(t){var e=v2(t,this.es,this.a);return e}function bR(t){var e=_2(t,this.es,this.a,this.b);return e}var wR=["Geocentric","geocentric","geocent","Geocent"];const ER={init:_R,forward:xR,inverse:bR,names:wR};var po={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},kp={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function SR(){if(Object.keys(kp).forEach(function(n){if(typeof this[n]>"u")this[n]=kp[n].def;else{if(kp[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);kp[n].num&&(this[n]=parseFloat(this[n]))}kp[n].degrees&&(this[n]=this[n]*eo)}.bind(this)),Math.abs(Math.abs(this.lat0)-ft)<At?this.mode=this.lat0<0?po.S_POLE:po.N_POLE:Math.abs(this.lat0)<At?this.mode=po.EQUIT:(this.mode=po.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function TR(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),s,h;switch(this.mode){case po.OBLIQ:h=this.sinph0*e+this.cosph0*n*o;break;case po.EQUIT:h=n*o;break;case po.S_POLE:h=-e;break;case po.N_POLE:h=e;break}switch(h=this.pn1/(this.p-h),s=h*n*Math.sin(t.x),this.mode){case po.OBLIQ:h*=this.cosph0*e-this.sinph0*n*o;break;case po.EQUIT:h*=e;break;case po.N_POLE:h*=-(n*o);break;case po.S_POLE:h*=n*o;break}var a,m;return a=h*this.cg+s*this.sg,m=1/(a*this.sw*this.h1+this.cw),s=(s*this.cg-h*this.sg)*this.cw*m,h=a*m,t.x=s*this.a,t.y=h*this.a,t}function MR(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,o,s;s=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*s,o=this.pn1*t.y*this.cw*s,t.x=n*this.cg+o*this.sg,t.y=o*this.cg-n*this.sg;var h=Ya(t.x,t.y);if(Math.abs(h)<At)e.x=0,e.y=t.y;else{var a,m;switch(m=1-h*h*this.pfact,m=(this.p-Math.sqrt(m))/(this.pn1/h+h/this.pn1),a=Math.sqrt(1-m*m),this.mode){case po.OBLIQ:e.y=Math.asin(a*this.sinph0+t.y*m*this.cosph0/h),t.y=(a-this.sinph0*Math.sin(e.y))*h,t.x*=m*this.cosph0;break;case po.EQUIT:e.y=Math.asin(t.y*m/h),t.y=a*h,t.x*=m;break;case po.N_POLE:e.y=Math.asin(a),t.y=-t.y;break;case po.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var IR=["Tilted_Perspective","tpers"];const OR={init:SR,forward:TR,inverse:MR,names:IR};function CR(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function AR(t){var e=t.x,n=t.y,o,s,h,a;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var m=this.radius_p/Ya(this.radius_p*Math.cos(n),Math.sin(n));if(s=m*Math.cos(e)*Math.cos(n),h=m*Math.sin(e)*Math.cos(n),a=m*Math.sin(n),(this.radius_g-s)*s-h*h-a*a*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(h/Ya(a,o)),t.y=this.radius_g_1*Math.atan(a/o)):(t.x=this.radius_g_1*Math.atan(h/o),t.y=this.radius_g_1*Math.atan(a/Ya(h,o)))}else this.shape==="sphere"&&(o=Math.cos(n),s=Math.cos(e)*o,h=Math.sin(e)*o,a=Math.sin(n),o=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(h/Ya(a,o)),t.y=this.radius_g_1*Math.atan(a/o)):(t.x=this.radius_g_1*Math.atan(h/o),t.y=this.radius_g_1*Math.atan(a/Ya(h,o))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function PR(t){var e=-1,n=0,o=0,s,h,a,m;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(o=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Ya(1,o)):(n=Math.tan(t.x/this.radius_g_1),o=Math.tan(t.y/this.radius_g_1)*Ya(1,n));var g=o/this.radius_p;if(s=n*n+g*g+e*e,h=2*this.radius_g*e,a=h*h-4*s*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;m=(-h-Math.sqrt(a))/(2*s),e=this.radius_g+m*e,n*=m,o*=m,t.x=Math.atan2(n,e),t.y=Math.atan(o*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(o=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+o*o)):(n=Math.tan(t.x/this.radius_g_1),o=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),s=n*n+o*o+e*e,h=2*this.radius_g*e,a=h*h-4*s*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;m=(-h-Math.sqrt(a))/(2*s),e=this.radius_g+m*e,n*=m,o*=m,t.x=Math.atan2(n,e),t.y=Math.atan(o*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var kR=["Geostationary Satellite View","Geostationary_Satellite","geos"];const LR={init:CR,forward:AR,inverse:PR,names:kR};function DR(t){t.Proj.projections.add(yy),t.Proj.projections.add(gy),t.Proj.projections.add(VD),t.Proj.projections.add(KD),t.Proj.projections.add(rN),t.Proj.projections.add(sN),t.Proj.projections.add(pN),t.Proj.projections.add(vN),t.Proj.projections.add(EN),t.Proj.projections.add(ON),t.Proj.projections.add(qN),t.Proj.projections.add(YN),t.Proj.projections.add(r3),t.Proj.projections.add(l3),t.Proj.projections.add(p3),t.Proj.projections.add(v3),t.Proj.projections.add(E3),t.Proj.projections.add(O3),t.Proj.projections.add(D3),t.Proj.projections.add(B3),t.Proj.projections.add($3),t.Proj.projections.add(X3),t.Proj.projections.add(eR),t.Proj.projections.add(oR),t.Proj.projections.add(cR),t.Proj.projections.add(vR),t.Proj.projections.add(ER),t.Proj.projections.add(OR),t.Proj.projections.add(LR)}fo.defaultDatum="WGS84",fo.Proj=Is,fo.WGS84=new fo.Proj("WGS84"),fo.Point=Oh,fo.toPoint=E2,fo.defs=Lo,fo.nadgrid=jL,fo.transform=dy,fo.mgrs=iD,fo.version="__VERSION__",DR(fo);function NR(){var t,e,n;fo.defs("EPSG:32632","+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs"),fo.defs("EPSG:32631","+proj=utm +zone=31 +datum=WGS84 +units=m +no_defs"),fo.defs("EPSG:2169","+proj=tmerc +lat_0=49.83333333333334 +lon_0=6.166666666666667 +k=1 +x_0=80000 +y_0=100000 +ellps=intl +towgs84=-189.681,18.3463,-42.7695,-0.33746,-3.09264,2.53861,0.4598 +units=m +no_defs"),Ku.register(fo),(t=Mi.get("EPSG:32632"))==null||t.setExtent([166021.44,0,833978.55,932900518e-2]),(e=Mi.get("EPSG:32631"))==null||e.setExtent([166021.44,0,833978.55,932900518e-2]),(n=Mi.get("EPSG:2169"))==null||n.setExtent([48225.17,56225.6,105842.04,139616.4])}function W2(t,e,n){const o=or(t);class s extends s0{constructor(a){super(o,a,e,n)}}return Ti(s,"def",o),s}const RR=typeof HTMLElement<"u"?HTMLElement:class{};class s0 extends RR{constructor(n,o={},s={},h){super();Ti(this,"_instance",null);Ti(this,"_connected",!1);Ti(this,"_resolved",!1);Ti(this,"_numberProps",null);Ti(this,"_styles");Ti(this,"_slots");this._def=n,this._props=o,this._config=s,this._config=Un({shadowRoot:!0},this._config),this._config.shadowRoot?this.shadowRoot&&h?h(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def)):h&&h(this._createVNode(),this._root)}get _root(){return this._config.shadowRoot?this.shadowRoot:this}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Lm(()=>{this._connected||(Cw(null,this._root),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let s=0;s<this.attributes.length;s++)this._setAttr(this.attributes[s].name);new MutationObserver(s=>{for(const h of s)this._setAttr(h.attributeName)}).observe(this,{attributes:!0});const n=(s,h=!1)=>{const{props:a,styles:m}=s;let g;if(a&&!tr(a))for(const b in a){const T=a[b];(T===Number||T&&T.type===Number)&&(b in this._props&&(this._props[b]=Wv(this._props[b])),(g||(g=Object.create(null)))[aa(b)]=!0)}this._numberProps=g,h&&this._resolveProps(s),this._applyStyles(m),this._update()},o=this._def.__asyncLoader;o?o().then(s=>n(s,!0)):n(this._def)}_resolveProps(n){const{props:o}=n,s=tr(o)?o:Object.keys(o||{});for(const h of Object.keys(this))h[0]!=="_"&&s.includes(h)&&this._setProp(h,this[h],!0,!1);for(const h of s.map(aa))Object.defineProperty(this,h,{get(){return this._getProp(h)},set(a){this._setProp(h,a)}})}_setAttr(n){let o=this.getAttribute(n);const s=aa(n);this._numberProps&&this._numberProps[s]&&(o=Wv(o)),this._setProp(s,o,!1)}_getProp(n){return this._props[n]}_setProp(n,o,s=!0,h=!0){o!==this._props[n]&&(this._props[n]=o,h&&this._instance&&this._update(),s&&(o===!0?this.setAttribute($o(n),""):typeof o=="string"||typeof o=="number"?this.setAttribute($o(n),o+""):o||this.removeAttribute($o(n))))}_update(){Cw(this._createVNode(),this._root)}_createVNode(){const n=Ft(this._def,Un({},this._props));return this._instance||(n.ce=o=>{this._instance=o,o.isCE=!0;const s=(a,m)=>{this.dispatchEvent(new CustomEvent(a,{detail:m}))};o.emit=(a,...m)=>{s(a,m),$o(a)!==a&&s($o(a),m)};let h=this;for(;h=h&&(h.parentNode||h.host);)if(h instanceof s0){o.parent=h._instance,o.provides=h._instance.provides;break}}),n}_applyStyles(n){n&&n.forEach(o=>{const s=document.createElement("style");s.textContent=o,this._root.appendChild(s)})}}const l7="";var Lp=(t=>(t.INFO="alert-info",t.WARNING="alert-warning",t.ERROR="alert-danger",t))(Lp||{});const zR=Lp.INFO,FR=7e3,BR=4e3,by=_c("alert-notifications",()=>{const t=vr([]);function e(o,s=zR,h){const a={message:o,type:s,duration:h!=null?h:s===Lp.WARNING?BR:FR};t.value.push(a)}function n(o){t.value.splice(o,1)}return{notifications:t,addNotification:e,removeNotification:n}},{}),VR=or({__name:"notification-item",props:{notification:{type:null,required:!0}},emits:["close"],setup(t){const e=t,n=Ln(!0);function o(s,h){setTimeout(()=>{n.value=!1},e.notification.duration),h()}return(s,h)=>{const a=p_("dompurify-html");return Ve(),en(Ym,{name:"fade-out",appear:"","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0",onEnter:o,onAfterLeave:h[0]||(h[0]=m=>s.$emit("close"))},{default:ap(()=>[ae(n)?Vm((Ve(),nt("div",{key:0,class:Pr(["lux-alert",`lux-${e.notification.type}`]),role:"alert"},null,2)),[[a,e.notification.message]]):Ke("v-if",!0)]),_:1})}}}),ur=(t,e)=>{const n=t.__vccOpts||t;for(const[o,s]of e)n[o]=s;return n},UR=ur(VR,[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/alert-notifications/notification-item.vue"]]),jR={key:0,class:"lux-notifications fixed w-[500px] top-10 left-1/2 ml-[-250px] z-50"},H2=ur(or({__name:"alert-notifications",setup(t){const e=by(),{notifications:n}=cn(e);function o(s){e.removeNotification(s)}return(s,h)=>(Ve(),en(tw,{to:"body"},[ae(n).length?(Ve(),nt("div",jR,[(Ve(!0),nt(un,null,Ta(ae(n),(a,m)=>(Ve(),en(UR,{key:m,notification:a,onClose:()=>o(m)},null,8,["notification","onClose"]))),128))])):Ke("v-if",!0)]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/alert-notifications/alert-notifications.vue"]]),GR={class:"lux-dropdown"},$R={class:"h-full"},qR=["aria-expanded"],WR=Re("span",{class:"lux-caret"},null,-1),HR={class:"lux-dropdown-wrapper"},ZR=["aria-label","data-value"],l0=ur(or({__name:"dropdown-list",props:{placeholder:{type:String,required:!0},options:{type:Array,required:!0,default:()=>[{label:"Default label",value:"Default value"}]},modelValue:{type:String,required:!1}},emits:["change"],setup(t,{emit:e}){const n=t,o=Ln(!1),s=Ln();function h(b){o.value=b===void 0?!o.value:b}function a(b){b.stopImmediatePropagation(),h()}function m(b){s.value=b.target.dataset.value,e("change",s.value)}function g(){h(!1)}return ua(()=>document.addEventListener("click",g)),au(()=>document.removeEventListener("click",g)),(b,T)=>{var M,I;return Ve(),nt("div",GR,[Re("div",$R,[Re("button",{type:"button",class:Pr(["lux-btn lux-dropdown-btn",ae(o)?"expanded":""]),"aria-expanded":ae(o),"aria-haspopup":"true",onClick:a},[Re("span",null,jt((I=n.placeholder)!=null?I:(M=n.options[0])==null?void 0:M.label),1),WR],10,qR)]),Re("div",HR,[Re("ul",{class:Pr(["lux-dropdown-list",ae(o)?"":"hidden"]),tabindex:"-1"},[(Ve(!0),nt(un,null,Ta(n.options,P=>(Ve(),nt("li",{key:P.value,class:Pr(t.modelValue===P.value?"selected":"")},[Re("button",{class:"lux-dropdown-list-item","aria-label":P.ariaLabel,"data-value":P.value,onClick:m},jt(P.label),9,ZR)],2))),128))],2)])])}}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/common/dropdown-list.vue"]]),Dp="EPSG:3857",Z2="EPSG:4326",XR="EPSG:2169";let u0;const X2=Ln();function Os(){function t(){return u0}function e(){return X2.value=u0=new AO.default({view:new PO.default({zoom:10,center:[682439,6379152],multiWorld:!0}),controls:[],keyboardEventTarget:document}),u0}function n(T,M){return T.id===M.id}function o(T,M){return T===M}function s(T,M){var I;return(I=T.layers)==null?void 0:I.some(P=>n(P,M))}function h(T,M){var P;const I=(P=T==null?void 0:T.layers)==null?void 0:P.find(z=>n(z,M));return!o(I,M)}function a(T,M){return!(M===null||!("layers"in T)||!("layers"in M)||typeof M.layers>"u"||typeof T.layers>"u"||T.layers===M.layers)}function m(T,M){return!("layers"in T)||typeof T.layers>"u"?[]:M===null||!("layers"in M)?T.layers.map((I,P)=>({layer:I,position:P})):T.layers===M.layers?[]:T.layers.reduce((I,P,z)=>s(M,P)?I:[...I,{layer:P,position:z}],[])}function g(T,M){return a(T,M)?M.layers.reduce((I,P)=>s(T,P)?I:[...I,P],[]):[]}function b(T,M){return a(T,M)?T.layers.reduce((I,P)=>h(M,P)?[...I,P]:I,[]):[]}return{olMap:X2,getOlMap:t,createMap:e,equalsLayer:n,hasLayer:s,layerHasChanged:h,contextHasChanged:a,getAddedLayers:m,getRemovedLayers:g,getMutatedLayers:b}}const Np=new Map;function Ja(t){return Ja=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ja(t)}function Cs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KR(t,e){if(Ja(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e||"default");if(Ja(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K2(t){var e=KR(t,"string");return Ja(e)==="symbol"?e:String(e)}function Y2(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,K2(o.key),o)}}function As(t,e,n){return e&&Y2(t.prototype,e),n&&Y2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mu(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c0(t,e){return c0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},c0(t,e)}function wy(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c0(t,e)}function Rp(t,e){if(e&&(Ja(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mu(t)}function Ps(t){return Ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ps(t)}function yu(t,e,n){return e=K2(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YR(t){if(Array.isArray(t))return t}function JR(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function J2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function QR(t,e){if(!!t){if(typeof t=="string")return J2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J2(t,e)}}function e4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t4(t){return YR(t)||JR(t)||QR(t)||e4()}function Q2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function eE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q2(Object(n),!0).forEach(function(o){yu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q2(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}var r4={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,n){console&&console[e]&&console[e].apply(console,n)}},n4=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cs(this,t),this.init(e,n)}return As(t,[{key:"init",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=o.prefix||"i18next:",this.logger=n||r4,this.options=o,this.debug=o.debug}},{key:"setDebug",value:function(n){this.debug=n}},{key:"log",value:function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return this.forward(o,"log","",!0)}},{key:"warn",value:function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return this.forward(o,"warn","",!0)}},{key:"error",value:function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return this.forward(o,"error","")}},{key:"deprecate",value:function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return this.forward(o,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(n,o,s,h){return h&&!this.debug?null:(typeof n[0]=="string"&&(n[0]="".concat(s).concat(this.prefix," ").concat(n[0])),this.logger[o](n))}},{key:"create",value:function(n){return new t(this.logger,eE(eE({},{prefix:"".concat(this.prefix,":").concat(n,":")}),this.options))}},{key:"clone",value:function(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new t(this.logger,n)}}]),t}(),ks=new n4,gu=function(){function t(){Cs(this,t),this.observers={}}return As(t,[{key:"on",value:function(n,o){var s=this;return n.split(" ").forEach(function(h){s.observers[h]=s.observers[h]||[],s.observers[h].push(o)}),this}},{key:"off",value:function(n,o){if(!!this.observers[n]){if(!o){delete this.observers[n];return}this.observers[n]=this.observers[n].filter(function(s){return s!==o})}}},{key:"emit",value:function(n){for(var o=arguments.length,s=new Array(o>1?o-1:0),h=1;h<o;h++)s[h-1]=arguments[h];if(this.observers[n]){var a=[].concat(this.observers[n]);a.forEach(function(g){g.apply(void 0,s)})}if(this.observers["*"]){var m=[].concat(this.observers["*"]);m.forEach(function(g){g.apply(g,[n].concat(s))})}}}]),t}();function zp(){var t,e,n=new Promise(function(o,s){t=o,e=s});return n.resolve=t,n.reject=e,n}function tE(t){return t==null?"":""+t}function i4(t,e,n){t.forEach(function(o){e[o]&&(n[o]=e[o])})}function h0(t,e,n){function o(m){return m&&m.indexOf("###")>-1?m.replace(/###/g,"."):m}function s(){return!t||typeof t=="string"}for(var h=typeof e!="string"?[].concat(e):e.split(".");h.length>1;){if(s())return{};var a=o(h.shift());!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={}}return s()?{}:{obj:t,k:o(h.shift())}}function rE(t,e,n){var o=h0(t,e,Object),s=o.obj,h=o.k;s[h]=n}function o4(t,e,n,o){var s=h0(t,e,Object),h=s.obj,a=s.k;h[a]=h[a]||[],o&&(h[a]=h[a].concat(n)),o||h[a].push(n)}function Ey(t,e){var n=h0(t,e),o=n.obj,s=n.k;if(!!o)return o[s]}function nE(t,e,n){var o=Ey(t,n);return o!==void 0?o:Ey(e,n)}function iE(t,e,n){for(var o in e)o!=="__proto__"&&o!=="constructor"&&(o in t?typeof t[o]=="string"||t[o]instanceof String||typeof e[o]=="string"||e[o]instanceof String?n&&(t[o]=e[o]):iE(t[o],e[o],n):t[o]=e[o]);return t}function Dh(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var a4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function s4(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(e){return a4[e]}):t}var Sy=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,l4=[" ",",","?","!",";"];function u4(t,e,n){e=e||"",n=n||"";var o=l4.filter(function(m){return e.indexOf(m)<0&&n.indexOf(m)<0});if(o.length===0)return!0;var s=new RegExp("(".concat(o.map(function(m){return m==="?"?"\\?":m}).join("|"),")")),h=!s.test(t);if(!h){var a=t.indexOf(n);a>0&&!s.test(t.substring(0,a))&&(h=!0)}return h}function oE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function Ty(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oE(Object(n),!0).forEach(function(o){yu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oE(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function c4(t){var e=h4();return function(){var o=Ps(t),s;if(e){var h=Ps(this).constructor;s=Reflect.construct(o,arguments,h)}else s=o.apply(this,arguments);return Rp(this,s)}}function h4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function aE(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!!t){if(t[e])return t[e];for(var o=e.split(n),s=t,h=0;h<o.length;++h){if(!s||typeof s[o[h]]=="string"&&h+1<o.length)return;if(s[o[h]]===void 0){for(var a=2,m=o.slice(h,h+a).join(n),g=s[m];g===void 0&&o.length>h+a;)a++,m=o.slice(h,h+a).join(n),g=s[m];if(g===void 0)return;if(g===null)return null;if(e.endsWith(m)){if(typeof g=="string")return g;if(m&&typeof g[m]=="string")return g[m]}var b=o.slice(h+a).join(n);return b?aE(g,b,n):void 0}s=s[o[h]]}return s}}var f4=function(t){wy(n,t);var e=c4(n);function n(o){var s,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Cs(this,n),s=e.call(this),Sy&&gu.call(mu(s)),s.data=o||{},s.options=h,s.options.keySeparator===void 0&&(s.options.keySeparator="."),s.options.ignoreJSONStructure===void 0&&(s.options.ignoreJSONStructure=!0),s}return As(n,[{key:"addNamespaces",value:function(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}},{key:"removeNamespaces",value:function(s){var h=this.options.ns.indexOf(s);h>-1&&this.options.ns.splice(h,1)}},{key:"getResource",value:function(s,h,a){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},g=m.keySeparator!==void 0?m.keySeparator:this.options.keySeparator,b=m.ignoreJSONStructure!==void 0?m.ignoreJSONStructure:this.options.ignoreJSONStructure,T=[s,h];a&&typeof a!="string"&&(T=T.concat(a)),a&&typeof a=="string"&&(T=T.concat(g?a.split(g):a)),s.indexOf(".")>-1&&(T=s.split("."));var M=Ey(this.data,T);return M||!b||typeof a!="string"?M:aE(this.data&&this.data[s]&&this.data[s][h],a,g)}},{key:"addResource",value:function(s,h,a,m){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},b=this.options.keySeparator;b===void 0&&(b=".");var T=[s,h];a&&(T=T.concat(b?a.split(b):a)),s.indexOf(".")>-1&&(T=s.split("."),m=h,h=T[1]),this.addNamespaces(h),rE(this.data,T,m),g.silent||this.emit("added",s,h,a,m)}},{key:"addResources",value:function(s,h,a){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var g in a)(typeof a[g]=="string"||Object.prototype.toString.apply(a[g])==="[object Array]")&&this.addResource(s,h,g,a[g],{silent:!0});m.silent||this.emit("added",s,h,a)}},{key:"addResourceBundle",value:function(s,h,a,m,g){var b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},T=[s,h];s.indexOf(".")>-1&&(T=s.split("."),m=a,a=h,h=T[1]),this.addNamespaces(h);var M=Ey(this.data,T)||{};m?iE(M,a,g):M=Ty(Ty({},M),a),rE(this.data,T,M),b.silent||this.emit("added",s,h,a)}},{key:"removeResourceBundle",value:function(s,h){this.hasResourceBundle(s,h)&&delete this.data[s][h],this.removeNamespaces(h),this.emit("removed",s,h)}},{key:"hasResourceBundle",value:function(s,h){return this.getResource(s,h)!==void 0}},{key:"getResourceBundle",value:function(s,h){return h||(h=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Ty(Ty({},{}),this.getResource(s,h)):this.getResource(s,h)}},{key:"getDataByLanguage",value:function(s){return this.data[s]}},{key:"hasLanguageSomeTranslations",value:function(s){var h=this.getDataByLanguage(s),a=h&&Object.keys(h)||[];return!!a.find(function(m){return h[m]&&Object.keys(h[m]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),n}(gu),sE={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,n,o,s,h){var a=this;return e.forEach(function(m){a.processors[m]&&(n=a.processors[m].process(n,o,s,h))}),n}};function lE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function No(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lE(Object(n),!0).forEach(function(o){yu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lE(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function p4(t){var e=d4();return function(){var o=Ps(t),s;if(e){var h=Ps(this).constructor;s=Reflect.construct(o,arguments,h)}else s=o.apply(this,arguments);return Rp(this,s)}}function d4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var uE={},cE=function(t){wy(n,t);var e=p4(n);function n(o){var s,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Cs(this,n),s=e.call(this),Sy&&gu.call(mu(s)),i4(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],o,mu(s)),s.options=h,s.options.keySeparator===void 0&&(s.options.keySeparator="."),s.logger=ks.create("translator"),s}return As(n,[{key:"changeLanguage",value:function(s){s&&(this.language=s)}},{key:"exists",value:function(s){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(s==null)return!1;var a=this.resolve(s,h);return a&&a.res!==void 0}},{key:"extractFromKey",value:function(s,h){var a=h.nsSeparator!==void 0?h.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");var m=h.keySeparator!==void 0?h.keySeparator:this.options.keySeparator,g=h.ns||this.options.defaultNS||[],b=a&&s.indexOf(a)>-1,T=!this.options.userDefinedKeySeparator&&!h.keySeparator&&!this.options.userDefinedNsSeparator&&!h.nsSeparator&&!u4(s,a,m);if(b&&!T){var M=s.match(this.interpolator.nestingRegexp);if(M&&M.length>0)return{key:s,namespaces:g};var I=s.split(a);(a!==m||a===m&&this.options.ns.indexOf(I[0])>-1)&&(g=I.shift()),s=I.join(m)}return typeof g=="string"&&(g=[g]),{key:s,namespaces:g}}},{key:"translate",value:function(s,h,a){var m=this;if(Ja(h)!=="object"&&this.options.overloadTranslationOptionHandler&&(h=this.options.overloadTranslationOptionHandler(arguments)),h||(h={}),s==null)return"";Array.isArray(s)||(s=[String(s)]);var g=h.returnDetails!==void 0?h.returnDetails:this.options.returnDetails,b=h.keySeparator!==void 0?h.keySeparator:this.options.keySeparator,T=this.extractFromKey(s[s.length-1],h),M=T.key,I=T.namespaces,P=I[I.length-1],z=h.lng||this.language,V=h.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(z&&z.toLowerCase()==="cimode"){if(V){var W=h.nsSeparator||this.options.nsSeparator;return g?{res:"".concat(P).concat(W).concat(M),usedKey:M,exactUsedKey:M,usedLng:z,usedNS:P}:"".concat(P).concat(W).concat(M)}return g?{res:M,usedKey:M,exactUsedKey:M,usedLng:z,usedNS:P}:M}var Y=this.resolve(s,h),X=Y&&Y.res,ue=Y&&Y.usedKey||M,he=Y&&Y.exactUsedKey||M,ve=Object.prototype.toString.apply(X),ze=["[object Number]","[object Function]","[object RegExp]"],Fe=h.joinArrays!==void 0?h.joinArrays:this.options.joinArrays,Pe=!this.i18nFormat||this.i18nFormat.handleAsObject,Se=typeof X!="string"&&typeof X!="boolean"&&typeof X!="number";if(Pe&&X&&Se&&ze.indexOf(ve)<0&&!(typeof Fe=="string"&&ve==="[object Array]")){if(!h.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var Ie=this.options.returnedObjectHandler?this.options.returnedObjectHandler(ue,X,No(No({},h),{},{ns:I})):"key '".concat(M," (").concat(this.language,")' returned an object instead of string.");return g?(Y.res=Ie,Y):Ie}if(b){var Je=ve==="[object Array]",$e=Je?[]:{},st=Je?he:ue;for(var be in X)if(Object.prototype.hasOwnProperty.call(X,be)){var Ye="".concat(st).concat(b).concat(be);$e[be]=this.translate(Ye,No(No({},h),{joinArrays:!1,ns:I})),$e[be]===Ye&&($e[be]=X[be])}X=$e}}else if(Pe&&typeof Fe=="string"&&ve==="[object Array]")X=X.join(Fe),X&&(X=this.extendTranslation(X,s,h,a));else{var ht=!1,vt=!1,kt=h.count!==void 0&&typeof h.count!="string",rr=n.hasDefaultValue(h),Nn=kt?this.pluralResolver.getSuffix(z,h.count,h):"",zr=h["defaultValue".concat(Nn)]||h.defaultValue;!this.isValidLookup(X)&&rr&&(ht=!0,X=zr),this.isValidLookup(X)||(vt=!0,X=M);var mr=h.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,Jn=mr&&vt?void 0:X,Fr=rr&&zr!==X&&this.options.updateMissing;if(vt||ht||Fr){if(this.logger.log(Fr?"updateKey":"missingKey",z,P,M,Fr?zr:X),b){var Gi=this.resolve(M,No(No({},h),{},{keySeparator:!1}));Gi&&Gi.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var qr=[],Lr=this.languageUtils.getFallbackCodes(this.options.fallbackLng,h.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Lr&&Lr[0])for(var qn=0;qn<Lr.length;qn++)qr.push(Lr[qn]);else this.options.saveMissingTo==="all"?qr=this.languageUtils.toResolveHierarchy(h.lng||this.language):qr.push(h.lng||this.language);var Mr=function(ci,Wn,K){var ye=rr&&K!==X?K:Jn;m.options.missingKeyHandler?m.options.missingKeyHandler(ci,P,Wn,ye,Fr,h):m.backendConnector&&m.backendConnector.saveMissing&&m.backendConnector.saveMissing(ci,P,Wn,ye,Fr,h),m.emit("missingKey",ci,P,Wn,X)};this.options.saveMissing&&(this.options.saveMissingPlurals&&kt?qr.forEach(function(Mn){m.pluralResolver.getSuffixes(Mn,h).forEach(function(ci){Mr([Mn],M+ci,h["defaultValue".concat(ci)]||zr)})}):Mr(qr,M,zr))}X=this.extendTranslation(X,s,h,Y,a),vt&&X===M&&this.options.appendNamespaceToMissingKey&&(X="".concat(P,":").concat(M)),(vt||ht)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?X=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(P,":").concat(M):M,ht?X:void 0):X=this.options.parseMissingKeyHandler(X))}return g?(Y.res=X,Y):X}},{key:"extendTranslation",value:function(s,h,a,m,g){var b=this;if(this.i18nFormat&&this.i18nFormat.parse)s=this.i18nFormat.parse(s,No(No({},this.options.interpolation.defaultVariables),a),m.usedLng,m.usedNS,m.usedKey,{resolved:m});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init(No(No({},a),{interpolation:No(No({},this.options.interpolation),a.interpolation)}));var T=typeof s=="string"&&(a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),M;if(T){var I=s.match(this.interpolator.nestingRegexp);M=I&&I.length}var P=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(P=No(No({},this.options.interpolation.defaultVariables),P)),s=this.interpolator.interpolate(s,P,a.lng||this.language,a),T){var z=s.match(this.interpolator.nestingRegexp),V=z&&z.length;M<V&&(a.nest=!1)}a.nest!==!1&&(s=this.interpolator.nest(s,function(){for(var X=arguments.length,ue=new Array(X),he=0;he<X;he++)ue[he]=arguments[he];return g&&g[0]===ue[0]&&!a.context?(b.logger.warn("It seems you are nesting recursively key: ".concat(ue[0]," in key: ").concat(h[0])),null):b.translate.apply(b,ue.concat([h]))},a)),a.interpolation&&this.interpolator.reset()}var W=a.postProcess||this.options.postProcess,Y=typeof W=="string"?[W]:W;return s!=null&&Y&&Y.length&&a.applyPostProcessor!==!1&&(s=sE.handle(Y,s,h,this.options&&this.options.postProcessPassResolved?No({i18nResolved:m},a):a,this)),s}},{key:"resolve",value:function(s){var h=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m,g,b,T,M;return typeof s=="string"&&(s=[s]),s.forEach(function(I){if(!h.isValidLookup(m)){var P=h.extractFromKey(I,a),z=P.key;g=z;var V=P.namespaces;h.options.fallbackNS&&(V=V.concat(h.options.fallbackNS));var W=a.count!==void 0&&typeof a.count!="string",Y=W&&!a.ordinal&&a.count===0&&h.pluralResolver.shouldUseIntlApi(),X=a.context!==void 0&&(typeof a.context=="string"||typeof a.context=="number")&&a.context!=="",ue=a.lngs?a.lngs:h.languageUtils.toResolveHierarchy(a.lng||h.language,a.fallbackLng);V.forEach(function(he){h.isValidLookup(m)||(M=he,!uE["".concat(ue[0],"-").concat(he)]&&h.utils&&h.utils.hasLoadedNamespace&&!h.utils.hasLoadedNamespace(M)&&(uE["".concat(ue[0],"-").concat(he)]=!0,h.logger.warn('key "'.concat(g,'" for languages "').concat(ue.join(", "),`" won't get resolved as namespace "`).concat(M,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),ue.forEach(function(ve){if(!h.isValidLookup(m)){T=ve;var ze=[z];if(h.i18nFormat&&h.i18nFormat.addLookupKeys)h.i18nFormat.addLookupKeys(ze,z,ve,he,a);else{var Fe;W&&(Fe=h.pluralResolver.getSuffix(ve,a.count,a));var Pe="".concat(h.options.pluralSeparator,"zero");if(W&&(ze.push(z+Fe),Y&&ze.push(z+Pe)),X){var Se="".concat(z).concat(h.options.contextSeparator).concat(a.context);ze.push(Se),W&&(ze.push(Se+Fe),Y&&ze.push(Se+Pe))}}for(var Ie;Ie=ze.pop();)h.isValidLookup(m)||(b=Ie,m=h.getResource(ve,he,Ie,a))}}))})}}),{res:m,usedKey:g,exactUsedKey:b,usedLng:T,usedNS:M}}},{key:"isValidLookup",value:function(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}},{key:"getResource",value:function(s,h,a){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(s,h,a,m):this.resourceStore.getResource(s,h,a,m)}}],[{key:"hasDefaultValue",value:function(s){var h="defaultValue";for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)&&h===a.substring(0,h.length)&&s[a]!==void 0)return!0;return!1}}]),n}(gu);function f0(t){return t.charAt(0).toUpperCase()+t.slice(1)}var hE=function(){function t(e){Cs(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ks.create("languageUtils")}return As(t,[{key:"getScriptPartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return null;var o=n.split("-");return o.length===2||(o.pop(),o[o.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(o.join("-"))}},{key:"getLanguagePartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return n;var o=n.split("-");return this.formatLanguageCode(o[0])}},{key:"formatLanguageCode",value:function(n){if(typeof n=="string"&&n.indexOf("-")>-1){var o=["hans","hant","latn","cyrl","cans","mong","arab"],s=n.split("-");return this.options.lowerCaseLng?s=s.map(function(h){return h.toLowerCase()}):s.length===2?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),o.indexOf(s[1].toLowerCase())>-1&&(s[1]=f0(s[1].toLowerCase()))):s.length===3&&(s[0]=s[0].toLowerCase(),s[1].length===2&&(s[1]=s[1].toUpperCase()),s[0]!=="sgn"&&s[2].length===2&&(s[2]=s[2].toUpperCase()),o.indexOf(s[1].toLowerCase())>-1&&(s[1]=f0(s[1].toLowerCase())),o.indexOf(s[2].toLowerCase())>-1&&(s[2]=f0(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}},{key:"isSupportedCode",value:function(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}},{key:"getBestMatchFromCodes",value:function(n){var o=this;if(!n)return null;var s;return n.forEach(function(h){if(!s){var a=o.formatLanguageCode(h);(!o.options.supportedLngs||o.isSupportedCode(a))&&(s=a)}}),!s&&this.options.supportedLngs&&n.forEach(function(h){if(!s){var a=o.getLanguagePartFromCode(h);if(o.isSupportedCode(a))return s=a;s=o.options.supportedLngs.find(function(m){if(m.indexOf(a)===0)return m})}}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}},{key:"getFallbackCodes",value:function(n,o){if(!n)return[];if(typeof n=="function"&&(n=n(o)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!o)return n.default||[];var s=n[o];return s||(s=n[this.getScriptPartFromCode(o)]),s||(s=n[this.formatLanguageCode(o)]),s||(s=n[this.getLanguagePartFromCode(o)]),s||(s=n.default),s||[]}},{key:"toResolveHierarchy",value:function(n,o){var s=this,h=this.getFallbackCodes(o||this.options.fallbackLng||[],n),a=[],m=function(b){!b||(s.isSupportedCode(b)?a.push(b):s.logger.warn("rejecting language code not found in supportedLngs: ".concat(b)))};return typeof n=="string"&&n.indexOf("-")>-1?(this.options.load!=="languageOnly"&&m(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&m(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&m(this.getLanguagePartFromCode(n))):typeof n=="string"&&m(this.formatLanguageCode(n)),h.forEach(function(g){a.indexOf(g)<0&&m(s.formatLanguageCode(g))}),a}}]),t}(),m4=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],y4={1:function(e){return Number(e>1)},2:function(e){return Number(e!=1)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(e==1?0:e>=2&&e<=4?1:2)},7:function(e){return Number(e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(e==1?0:e==2?1:e!=8&&e!=11?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(e==1?0:e==2?1:e<7?2:e<11?3:4)},11:function(e){return Number(e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(e!==0)},14:function(e){return Number(e==1?0:e==2?1:e==3?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:e!==0?1:2)},17:function(e){return Number(e==1||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(e==0?0:e==1?1:2)},19:function(e){return Number(e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(e==1?0:e==0||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3)}},g4=["v1","v2","v3"],fE={zero:0,one:1,two:2,few:3,many:4,other:5};function v4(){var t={};return m4.forEach(function(e){e.lngs.forEach(function(n){t[n]={numbers:e.nr,plurals:y4[e.fc]}})}),t}var _4=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cs(this,t),this.languageUtils=e,this.options=n,this.logger=ks.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=v4()}return As(t,[{key:"addRule",value:function(n,o){this.rules[n]=o}},{key:"getRule",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(n,{type:o.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}},{key:"needsPlural",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(n,o);return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(n,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,s).map(function(h){return"".concat(o).concat(h)})}},{key:"getSuffixes",value:function(n){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=this.getRule(n,s);return h?this.shouldUseIntlApi()?h.resolvedOptions().pluralCategories.sort(function(a,m){return fE[a]-fE[m]}).map(function(a){return"".concat(o.options.prepend).concat(a)}):h.numbers.map(function(a){return o.getSuffix(n,a,s)}):[]}},{key:"getSuffix",value:function(n,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=this.getRule(n,s);return h?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(h.select(o)):this.getSuffixRetroCompatible(h,o):(this.logger.warn("no plural rule found for: ".concat(n)),"")}},{key:"getSuffixRetroCompatible",value:function(n,o){var s=this,h=n.noAbs?n.plurals(o):n.plurals(Math.abs(o)),a=n.numbers[h];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));var m=function(){return s.options.prepend&&a.toString()?s.options.prepend+a.toString():a.toString()};return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?"_plural_".concat(a.toString()):m():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?m():this.options.prepend&&h.toString()?this.options.prepend+h.toString():h.toString()}},{key:"shouldUseIntlApi",value:function(){return!g4.includes(this.options.compatibilityJSON)}}]),t}();function pE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function Qa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pE(Object(n),!0).forEach(function(o){yu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pE(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}var x4=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Cs(this,t),this.logger=ks.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(n){return n},this.init(e)}return As(t,[{key:"init",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});var o=n.interpolation;this.escape=o.escape!==void 0?o.escape:s4,this.escapeValue=o.escapeValue!==void 0?o.escapeValue:!0,this.useRawValueToEscape=o.useRawValueToEscape!==void 0?o.useRawValueToEscape:!1,this.prefix=o.prefix?Dh(o.prefix):o.prefixEscaped||"{{",this.suffix=o.suffix?Dh(o.suffix):o.suffixEscaped||"}}",this.formatSeparator=o.formatSeparator?o.formatSeparator:o.formatSeparator||",",this.unescapePrefix=o.unescapeSuffix?"":o.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":o.unescapeSuffix||"",this.nestingPrefix=o.nestingPrefix?Dh(o.nestingPrefix):o.nestingPrefixEscaped||Dh("$t("),this.nestingSuffix=o.nestingSuffix?Dh(o.nestingSuffix):o.nestingSuffixEscaped||Dh(")"),this.nestingOptionsSeparator=o.nestingOptionsSeparator?o.nestingOptionsSeparator:o.nestingOptionsSeparator||",",this.maxReplaces=o.maxReplaces?o.maxReplaces:1e3,this.alwaysFormat=o.alwaysFormat!==void 0?o.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var n="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(n,"g");var o="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(o,"g");var s="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(s,"g")}},{key:"interpolate",value:function(n,o,s,h){var a=this,m,g,b,T=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function M(W){return W.replace(/\$/g,"$$$$")}var I=function(Y){if(Y.indexOf(a.formatSeparator)<0){var X=nE(o,T,Y);return a.alwaysFormat?a.format(X,void 0,s,Qa(Qa(Qa({},h),o),{},{interpolationkey:Y})):X}var ue=Y.split(a.formatSeparator),he=ue.shift().trim(),ve=ue.join(a.formatSeparator).trim();return a.format(nE(o,T,he),ve,s,Qa(Qa(Qa({},h),o),{},{interpolationkey:he}))};this.resetRegExp();var P=h&&h.missingInterpolationHandler||this.options.missingInterpolationHandler,z=h&&h.interpolation&&h.interpolation.skipOnVariables!==void 0?h.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,V=[{regex:this.regexpUnescape,safeValue:function(Y){return M(Y)}},{regex:this.regexp,safeValue:function(Y){return a.escapeValue?M(a.escape(Y)):M(Y)}}];return V.forEach(function(W){for(b=0;m=W.regex.exec(n);){var Y=m[1].trim();if(g=I(Y),g===void 0)if(typeof P=="function"){var X=P(n,m,h);g=typeof X=="string"?X:""}else if(h&&Object.prototype.hasOwnProperty.call(h,Y))g="";else if(z){g=m[0];continue}else a.logger.warn("missed to pass in variable ".concat(Y," for interpolating ").concat(n)),g="";else typeof g!="string"&&!a.useRawValueToEscape&&(g=tE(g));var ue=W.safeValue(g);if(n=n.replace(m[0],ue),z?(W.regex.lastIndex+=g.length,W.regex.lastIndex-=m[0].length):W.regex.lastIndex=0,b++,b>=a.maxReplaces)break}}),n}},{key:"nest",value:function(n,o){var s=this,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,m,g;function b(P,z){var V=this.nestingOptionsSeparator;if(P.indexOf(V)<0)return P;var W=P.split(new RegExp("".concat(V,"[ ]*{"))),Y="{".concat(W[1]);P=W[0],Y=this.interpolate(Y,g);var X=Y.match(/'/g),ue=Y.match(/"/g);(X&&X.length%2===0&&!ue||ue.length%2!==0)&&(Y=Y.replace(/'/g,'"'));try{g=JSON.parse(Y),z&&(g=Qa(Qa({},z),g))}catch(he){return this.logger.warn("failed parsing options string in nesting for key ".concat(P),he),"".concat(P).concat(V).concat(Y)}return delete g.defaultValue,P}for(;a=this.nestingRegexp.exec(n);){var T=[];g=Qa({},h),g=g.replace&&typeof g.replace!="string"?g.replace:g,g.applyPostProcessor=!1,delete g.defaultValue;var M=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){var I=a[1].split(this.formatSeparator).map(function(P){return P.trim()});a[1]=I.shift(),T=I,M=!0}if(m=o(b.call(this,a[1].trim(),g),g),m&&a[0]===n&&typeof m!="string")return m;typeof m!="string"&&(m=tE(m)),m||(this.logger.warn("missed to resolve ".concat(a[1]," for nesting ").concat(n)),m=""),M&&(m=T.reduce(function(P,z){return s.format(P,z,h.lng,Qa(Qa({},h),{},{interpolationkey:a[1].trim()}))},m.trim())),n=n.replace(a[0],m),this.regexp.lastIndex=0}return n}}]),t}();function dE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function yl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dE(Object(n),!0).forEach(function(o){yu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dE(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function b4(t){var e=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){var o=t.split("(");e=o[0].toLowerCase().trim();var s=o[1].substring(0,o[1].length-1);if(e==="currency"&&s.indexOf(":")<0)n.currency||(n.currency=s.trim());else if(e==="relativetime"&&s.indexOf(":")<0)n.range||(n.range=s.trim());else{var h=s.split(";");h.forEach(function(a){if(!!a){var m=a.split(":"),g=t4(m),b=g[0],T=g.slice(1),M=T.join(":").trim().replace(/^'+|'+$/g,"");n[b.trim()]||(n[b.trim()]=M),M==="false"&&(n[b.trim()]=!1),M==="true"&&(n[b.trim()]=!0),isNaN(M)||(n[b.trim()]=parseInt(M,10))}})}}return{formatName:e,formatOptions:n}}function Nh(t){var e={};return function(o,s,h){var a=s+JSON.stringify(h),m=e[a];return m||(m=t(s,h),e[a]=m),m(o)}}var w4=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Cs(this,t),this.logger=ks.create("formatter"),this.options=e,this.formats={number:Nh(function(n,o){var s=new Intl.NumberFormat(n,yl({},o));return function(h){return s.format(h)}}),currency:Nh(function(n,o){var s=new Intl.NumberFormat(n,yl(yl({},o),{},{style:"currency"}));return function(h){return s.format(h)}}),datetime:Nh(function(n,o){var s=new Intl.DateTimeFormat(n,yl({},o));return function(h){return s.format(h)}}),relativetime:Nh(function(n,o){var s=new Intl.RelativeTimeFormat(n,yl({},o));return function(h){return s.format(h,o.range||"day")}}),list:Nh(function(n,o){var s=new Intl.ListFormat(n,yl({},o));return function(h){return s.format(h)}})},this.init(e)}return As(t,[{key:"init",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},s=o.interpolation;this.formatSeparator=s.formatSeparator?s.formatSeparator:s.formatSeparator||","}},{key:"add",value:function(n,o){this.formats[n.toLowerCase().trim()]=o}},{key:"addCached",value:function(n,o){this.formats[n.toLowerCase().trim()]=Nh(o)}},{key:"format",value:function(n,o,s){var h=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},m=o.split(this.formatSeparator),g=m.reduce(function(b,T){var M=b4(T),I=M.formatName,P=M.formatOptions;if(h.formats[I]){var z=b;try{var V=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},W=V.locale||V.lng||a.locale||a.lng||s;z=h.formats[I](b,W,yl(yl(yl({},P),a),V))}catch(Y){h.logger.warn(Y)}return z}else h.logger.warn("there was no format function for ".concat(I));return b},n);return g}}]),t}();function mE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function yE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mE(Object(n),!0).forEach(function(o){yu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mE(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function E4(t){var e=S4();return function(){var o=Ps(t),s;if(e){var h=Ps(this).constructor;s=Reflect.construct(o,arguments,h)}else s=o.apply(this,arguments);return Rp(this,s)}}function S4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function T4(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}var M4=function(t){wy(n,t);var e=E4(n);function n(o,s,h){var a,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Cs(this,n),a=e.call(this),Sy&&gu.call(mu(a)),a.backend=o,a.store=s,a.services=h,a.languageUtils=h.languageUtils,a.options=m,a.logger=ks.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=m.maxParallelReads||10,a.readingCalls=0,a.maxRetries=m.maxRetries>=0?m.maxRetries:5,a.retryTimeout=m.retryTimeout>=1?m.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(h,m.backend,m),a}return As(n,[{key:"queueLoad",value:function(s,h,a,m){var g=this,b={},T={},M={},I={};return s.forEach(function(P){var z=!0;h.forEach(function(V){var W="".concat(P,"|").concat(V);!a.reload&&g.store.hasResourceBundle(P,V)?g.state[W]=2:g.state[W]<0||(g.state[W]===1?T[W]===void 0&&(T[W]=!0):(g.state[W]=1,z=!1,T[W]===void 0&&(T[W]=!0),b[W]===void 0&&(b[W]=!0),I[V]===void 0&&(I[V]=!0)))}),z||(M[P]=!0)}),(Object.keys(b).length||Object.keys(T).length)&&this.queue.push({pending:T,pendingCount:Object.keys(T).length,loaded:{},errors:[],callback:m}),{toLoad:Object.keys(b),pending:Object.keys(T),toLoadLanguages:Object.keys(M),toLoadNamespaces:Object.keys(I)}}},{key:"loaded",value:function(s,h,a){var m=s.split("|"),g=m[0],b=m[1];h&&this.emit("failedLoading",g,b,h),a&&this.store.addResourceBundle(g,b,a),this.state[s]=h?-1:2;var T={};this.queue.forEach(function(M){o4(M.loaded,[g],b),T4(M,s),h&&M.errors.push(h),M.pendingCount===0&&!M.done&&(Object.keys(M.loaded).forEach(function(I){T[I]||(T[I]={});var P=M.loaded[I];P.length&&P.forEach(function(z){T[I][z]===void 0&&(T[I][z]=!0)})}),M.done=!0,M.errors.length?M.callback(M.errors):M.callback())}),this.emit("loaded",T),this.queue=this.queue.filter(function(M){return!M.done})}},{key:"read",value:function(s,h,a){var m=this,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,T=arguments.length>5?arguments[5]:void 0;if(!s.length)return T(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:h,fcName:a,tried:g,wait:b,callback:T});return}this.readingCalls++;var M=function(V,W){if(m.readingCalls--,m.waitingReads.length>0){var Y=m.waitingReads.shift();m.read(Y.lng,Y.ns,Y.fcName,Y.tried,Y.wait,Y.callback)}if(V&&W&&g<m.maxRetries){setTimeout(function(){m.read.call(m,s,h,a,g+1,b*2,T)},b);return}T(V,W)},I=this.backend[a].bind(this.backend);if(I.length===2){try{var P=I(s,h);P&&typeof P.then=="function"?P.then(function(z){return M(null,z)}).catch(M):M(null,P)}catch(z){M(z)}return}return I(s,h,M)}},{key:"prepareLoading",value:function(s,h){var a=this,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),g&&g();typeof s=="string"&&(s=this.languageUtils.toResolveHierarchy(s)),typeof h=="string"&&(h=[h]);var b=this.queueLoad(s,h,m,g);if(!b.toLoad.length)return b.pending.length||g(),null;b.toLoad.forEach(function(T){a.loadOne(T)})}},{key:"load",value:function(s,h,a){this.prepareLoading(s,h,{},a)}},{key:"reload",value:function(s,h,a){this.prepareLoading(s,h,{reload:!0},a)}},{key:"loadOne",value:function(s){var h=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",m=s.split("|"),g=m[0],b=m[1];this.read(g,b,"read",void 0,void 0,function(T,M){T&&h.logger.warn("".concat(a,"loading namespace ").concat(b," for language ").concat(g," failed"),T),!T&&M&&h.logger.log("".concat(a,"loaded namespace ").concat(b," for language ").concat(g),M),h.loaded(s,T,M)})}},{key:"saveMissing",value:function(s,h,a,m,g){var b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},T=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(h)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(h,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend&&this.backend.create){var M=yE(yE({},b),{},{isUpdate:g}),I=this.backend.create.bind(this.backend);if(I.length<6)try{var P;I.length===5?P=I(s,h,a,m,M):P=I(s,h,a,m),P&&typeof P.then=="function"?P.then(function(z){return T(null,z)}).catch(T):T(null,P)}catch(z){T(z)}else I(s,h,a,m,T,M)}!s||!s[0]||this.store.addResource(s[0],h,a,m)}}}]),n}(gu);function gE(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var n={};if(Ja(e[1])==="object"&&(n=e[1]),typeof e[1]=="string"&&(n.defaultValue=e[1]),typeof e[2]=="string"&&(n.tDescription=e[2]),Ja(e[2])==="object"||Ja(e[3])==="object"){var o=e[3]||e[2];Object.keys(o).forEach(function(s){n[s]=o[s]})}return n},interpolation:{escapeValue:!0,format:function(e,n,o,s){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function vE(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function _E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function Ls(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_E(Object(n),!0).forEach(function(o){yu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_E(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function I4(t){var e=O4();return function(){var o=Ps(t),s;if(e){var h=Ps(this).constructor;s=Reflect.construct(o,arguments,h)}else s=o.apply(this,arguments);return Rp(this,s)}}function O4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function My(){}function C4(t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));e.forEach(function(n){typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}var Iy=function(t){wy(n,t);var e=I4(n);function n(){var o,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments.length>1?arguments[1]:void 0;if(Cs(this,n),o=e.call(this),Sy&&gu.call(mu(o)),o.options=vE(s),o.services={},o.logger=ks,o.modules={external:[]},C4(mu(o)),h&&!o.isInitialized&&!s.isClone){if(!o.options.initImmediate)return o.init(s,h),Rp(o,mu(o));setTimeout(function(){o.init(s,h)},0)}return o}return As(n,[{key:"init",value:function(){var s=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof h=="function"&&(a=h,h={}),!h.defaultNS&&h.defaultNS!==!1&&h.ns&&(typeof h.ns=="string"?h.defaultNS=h.ns:h.ns.indexOf("translation")<0&&(h.defaultNS=h.ns[0]));var m=gE();this.options=Ls(Ls(Ls({},m),this.options),vE(h)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Ls(Ls({},m.interpolation),this.options.interpolation)),h.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=h.keySeparator),h.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=h.nsSeparator);function g(Y){return Y?typeof Y=="function"?new Y:Y:null}if(!this.options.isClone){this.modules.logger?ks.init(g(this.modules.logger),this.options):ks.init(null,this.options);var b;this.modules.formatter?b=this.modules.formatter:typeof Intl<"u"&&(b=w4);var T=new hE(this.options);this.store=new f4(this.options.resources,this.options);var M=this.services;M.logger=ks,M.resourceStore=this.store,M.languageUtils=T,M.pluralResolver=new _4(T,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),b&&(!this.options.interpolation.format||this.options.interpolation.format===m.interpolation.format)&&(M.formatter=g(b),M.formatter.init(M,this.options),this.options.interpolation.format=M.formatter.format.bind(M.formatter)),M.interpolator=new x4(this.options),M.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},M.backendConnector=new M4(g(this.modules.backend),M.resourceStore,M,this.options),M.backendConnector.on("*",function(Y){for(var X=arguments.length,ue=new Array(X>1?X-1:0),he=1;he<X;he++)ue[he-1]=arguments[he];s.emit.apply(s,[Y].concat(ue))}),this.modules.languageDetector&&(M.languageDetector=g(this.modules.languageDetector),M.languageDetector.init&&M.languageDetector.init(M,this.options.detection,this.options)),this.modules.i18nFormat&&(M.i18nFormat=g(this.modules.i18nFormat),M.i18nFormat.init&&M.i18nFormat.init(this)),this.translator=new cE(this.services,this.options),this.translator.on("*",function(Y){for(var X=arguments.length,ue=new Array(X>1?X-1:0),he=1;he<X;he++)ue[he-1]=arguments[he];s.emit.apply(s,[Y].concat(ue))}),this.modules.external.forEach(function(Y){Y.init&&Y.init(s)})}if(this.format=this.options.interpolation.format,a||(a=My),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var I=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);I.length>0&&I[0]!=="dev"&&(this.options.lng=I[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var P=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];P.forEach(function(Y){s[Y]=function(){var X;return(X=s.store)[Y].apply(X,arguments)}});var z=["addResource","addResources","addResourceBundle","removeResourceBundle"];z.forEach(function(Y){s[Y]=function(){var X;return(X=s.store)[Y].apply(X,arguments),s}});var V=zp(),W=function(){var X=function(he,ve){s.isInitialized&&!s.initializedStoreOnce&&s.logger.warn("init: i18next is already initialized. You should call init just once!"),s.isInitialized=!0,s.options.isClone||s.logger.log("initialized",s.options),s.emit("initialized",s.options),V.resolve(ve),a(he,ve)};if(s.languages&&s.options.compatibilityAPI!=="v1"&&!s.isInitialized)return X(null,s.t.bind(s));s.changeLanguage(s.options.lng,X)};return this.options.resources||!this.options.initImmediate?W():setTimeout(W,0),V}},{key:"loadResources",value:function(s){var h=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:My,m=a,g=typeof s=="string"?s:this.language;if(typeof s=="function"&&(m=s),!this.options.resources||this.options.partialBundledLanguages){if(g&&g.toLowerCase()==="cimode")return m();var b=[],T=function(P){if(!!P){var z=h.services.languageUtils.toResolveHierarchy(P);z.forEach(function(V){b.indexOf(V)<0&&b.push(V)})}};if(g)T(g);else{var M=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);M.forEach(function(I){return T(I)})}this.options.preload&&this.options.preload.forEach(function(I){return T(I)}),this.services.backendConnector.load(b,this.options.ns,function(I){!I&&!h.resolvedLanguage&&h.language&&h.setResolvedLanguage(h.language),m(I)})}else m(null)}},{key:"reloadResources",value:function(s,h,a){var m=zp();return s||(s=this.languages),h||(h=this.options.ns),a||(a=My),this.services.backendConnector.reload(s,h,function(g){m.resolve(),a(g)}),m}},{key:"use",value:function(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&sE.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}},{key:"setResolvedLanguage",value:function(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1))for(var h=0;h<this.languages.length;h++){var a=this.languages[h];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}},{key:"changeLanguage",value:function(s,h){var a=this;this.isLanguageChangingTo=s;var m=zp();this.emit("languageChanging",s);var g=function(I){a.language=I,a.languages=a.services.languageUtils.toResolveHierarchy(I),a.resolvedLanguage=void 0,a.setResolvedLanguage(I)},b=function(I,P){P?(g(P),a.translator.changeLanguage(P),a.isLanguageChangingTo=void 0,a.emit("languageChanged",P),a.logger.log("languageChanged",P)):a.isLanguageChangingTo=void 0,m.resolve(function(){return a.t.apply(a,arguments)}),h&&h(I,function(){return a.t.apply(a,arguments)})},T=function(I){!s&&!I&&a.services.languageDetector&&(I=[]);var P=typeof I=="string"?I:a.services.languageUtils.getBestMatchFromCodes(I);P&&(a.language||g(P),a.translator.language||a.translator.changeLanguage(P),a.services.languageDetector&&a.services.languageDetector.cacheUserLanguage&&a.services.languageDetector.cacheUserLanguage(P)),a.loadResources(P,function(z){b(z,P)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?T(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(T):this.services.languageDetector.detect(T):T(s),m}},{key:"getFixedT",value:function(s,h,a){var m=this,g=function b(T,M){var I;if(Ja(M)!=="object"){for(var P=arguments.length,z=new Array(P>2?P-2:0),V=2;V<P;V++)z[V-2]=arguments[V];I=m.options.overloadTranslationOptionHandler([T,M].concat(z))}else I=Ls({},M);I.lng=I.lng||b.lng,I.lngs=I.lngs||b.lngs,I.ns=I.ns||b.ns,I.keyPrefix=I.keyPrefix||a||b.keyPrefix;var W=m.options.keySeparator||".",Y;return I.keyPrefix&&Array.isArray(T)?Y=T.map(function(X){return"".concat(I.keyPrefix).concat(W).concat(X)}):Y=I.keyPrefix?"".concat(I.keyPrefix).concat(W).concat(T):T,m.t(Y,I)};return typeof s=="string"?g.lng=s:g.lngs=s,g.ns=h,g.keyPrefix=a,g}},{key:"t",value:function(){var s;return this.translator&&(s=this.translator).translate.apply(s,arguments)}},{key:"exists",value:function(){var s;return this.translator&&(s=this.translator).exists.apply(s,arguments)}},{key:"setDefaultNamespace",value:function(s){this.options.defaultNS=s}},{key:"hasLoadedNamespace",value:function(s){var h=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var m=this.resolvedLanguage||this.languages[0],g=this.options?this.options.fallbackLng:!1,b=this.languages[this.languages.length-1];if(m.toLowerCase()==="cimode")return!0;var T=function(P,z){var V=h.services.backendConnector.state["".concat(P,"|").concat(z)];return V===-1||V===2};if(a.precheck){var M=a.precheck(this,T);if(M!==void 0)return M}return!!(this.hasResourceBundle(m,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||T(m,s)&&(!g||T(b,s)))}},{key:"loadNamespaces",value:function(s,h){var a=this,m=zp();return this.options.ns?(typeof s=="string"&&(s=[s]),s.forEach(function(g){a.options.ns.indexOf(g)<0&&a.options.ns.push(g)}),this.loadResources(function(g){m.resolve(),h&&h(g)}),m):(h&&h(),Promise.resolve())}},{key:"loadLanguages",value:function(s,h){var a=zp();typeof s=="string"&&(s=[s]);var m=this.options.preload||[],g=s.filter(function(b){return m.indexOf(b)<0});return g.length?(this.options.preload=m.concat(g),this.loadResources(function(b){a.resolve(),h&&h(b)}),a):(h&&h(),Promise.resolve())}},{key:"dir",value:function(s){if(s||(s=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!s)return"rtl";var h=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services&&this.services.languageUtils||new hE(gE());return h.indexOf(a.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var s=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:My,m=Ls(Ls(Ls({},this.options),h),{isClone:!0}),g=new n(m);(h.debug!==void 0||h.prefix!==void 0)&&(g.logger=g.logger.clone(h));var b=["store","services","language"];return b.forEach(function(T){g[T]=s[T]}),g.services=Ls({},this.services),g.services.utils={hasLoadedNamespace:g.hasLoadedNamespace.bind(g)},g.translator=new cE(g.services,g.options),g.translator.on("*",function(T){for(var M=arguments.length,I=new Array(M>1?M-1:0),P=1;P<M;P++)I[P-1]=arguments[P];g.emit.apply(g,[T].concat(I))}),g.init(m,a),g.translator.options=g.options,g.translator.backendConnector.services.utils={hasLoadedNamespace:g.hasLoadedNamespace.bind(g)},g}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(gu);yu(Iy,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Iy(t,e)});var Gn=Iy.createInstance();Gn.createInstance=Iy.createInstance,Gn.createInstance,Gn.dir,Gn.init,Gn.loadResources,Gn.reloadResources,Gn.use,Gn.changeLanguage,Gn.getFixedT,Gn.t,Gn.exists,Gn.setDefaultNamespace,Gn.hasLoadedNamespace,Gn.loadNamespaces,Gn.loadLanguages;const A4="/";var xE=(t=>(t.PNG="image/png",t.JPG="image/jpeg",t))(xE||{}),gl=(t=>(t.VALUE="value",t.RANGE="range",t))(gl||{}),Oy=(t=>(t.DATEPICKER="datepicker",t.SLIDER="slider",t))(Oy||{});function bE(t,{i18next:e,rerenderOn:n=["languageChanged","loaded","added","removed"]}){const o=e.t.bind(e),s=vr(new Date),h=()=>s.value=new Date,a=()=>s.value;n.forEach(T=>{var M;switch(T){case"added":case"removed":(M=e.store)==null||M.on(T,h);break;default:e.on(T,h);break}}),t.component("i18next",P4),t.mixin({beforeCreate(){var T,M;const I=this.$options;if(!I.__i18n&&!I.i18nOptions){this.__translate=void 0;return}const P=this.$options.name,z=(Math.random()*10**8|0).toString(),V=[P,z].filter(ve=>!!ve).join("-");this.__bundles=[];const W=ve=>{Object.entries(ve).forEach(([ze,Fe])=>{e.addResourceBundle(ze,V,Fe,!0,!1),this.__bundles.push([ze,V])})};(T=I.__i18n)==null||T.forEach(ve=>{W(JSON.parse(ve))});let{lng:Y,ns:X,keyPrefix:ue}=b(I,W);(M=this.__bundles)!=null&&M.length&&(X=[V].concat(X!=null?X:[]));const he=m(Y,X);this.__translate=(ve,ze)=>!ue||g(ve)?he(ve,ze):he(ue+"."+ve,ze)},unmounted(){var T;(T=this.__bundles)==null||T.forEach(([M,I])=>e.removeResourceBundle(M,I))}}),t.config.globalProperties.$t=function(T,M){var I;return a(),e.isInitialized?((I=this==null?void 0:this.__translate)!=null?I:o)(T,M):T},t.config.globalProperties.$i18next=new Proxy(e,{get(T,M){return a(),Reflect.get(T,M)}});function m(T,M){return T?e.getFixedT(T,M):M?e.getFixedT(null,M):o}function g(T){const M=e.options.nsSeparator;return typeof M=="string"&&T.includes(M)}function b(T,M){let I,P,z;if(T.i18nOptions){let V,W;({lng:I,namespaces:W=e.options.defaultNS,keyPrefix:z,messages:V}=T.i18nOptions),V&&M(V),P=typeof W=="string"?[W]:W,P&&e.loadNamespaces(P)}return{lng:I,ns:P,keyPrefix:z}}}function En(){const t=Zm();if(!t)throw new Error("i18next-vue: No Vue instance in context. Make sure to register the i18next-vue plugin using app.use(...).");const e=t.appContext.config.globalProperties;return{i18next:e.$i18next,t:e.$t.bind(t.proxy)}}var wE=new RegExp("{\\s*([a-z0-9\\-]+)\\s*}","gi"),P4=or({props:{translation:{type:String,required:!0}},setup(t,{slots:e}){return()=>{const n=t.translation,o=[];let s,h=0;for(;(s=wE.exec(n))!==null;){o.push(n.substring(h,s.index));const a=e[s[1]];a?o.push(...a()):o.push(s[0]),h=wE.lastIndex}return o.push(n.substring(h)),o}}});class wc extends Error{}class k4 extends wc{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class L4 extends wc{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class D4 extends wc{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Fp extends wc{}class EE extends wc{constructor(e){super(`Invalid unit ${e}`)}}class Ca extends wc{}class vu extends wc{constructor(){super("Zone is an abstract class")}}const Ct="numeric",es="short",ca="long",Cy={year:Ct,month:Ct,day:Ct},SE={year:Ct,month:es,day:Ct},N4={year:Ct,month:es,day:Ct,weekday:es},TE={year:Ct,month:ca,day:Ct},ME={year:Ct,month:ca,day:Ct,weekday:ca},IE={hour:Ct,minute:Ct},OE={hour:Ct,minute:Ct,second:Ct},CE={hour:Ct,minute:Ct,second:Ct,timeZoneName:es},AE={hour:Ct,minute:Ct,second:Ct,timeZoneName:ca},PE={hour:Ct,minute:Ct,hourCycle:"h23"},kE={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23"},LE={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23",timeZoneName:es},DE={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23",timeZoneName:ca},NE={year:Ct,month:Ct,day:Ct,hour:Ct,minute:Ct},RE={year:Ct,month:Ct,day:Ct,hour:Ct,minute:Ct,second:Ct},zE={year:Ct,month:es,day:Ct,hour:Ct,minute:Ct},FE={year:Ct,month:es,day:Ct,hour:Ct,minute:Ct,second:Ct},R4={year:Ct,month:es,day:Ct,weekday:es,hour:Ct,minute:Ct},BE={year:Ct,month:ca,day:Ct,hour:Ct,minute:Ct,timeZoneName:es},VE={year:Ct,month:ca,day:Ct,hour:Ct,minute:Ct,second:Ct,timeZoneName:es},UE={year:Ct,month:ca,day:Ct,weekday:ca,hour:Ct,minute:Ct,timeZoneName:ca},jE={year:Ct,month:ca,day:Ct,weekday:ca,hour:Ct,minute:Ct,second:Ct,timeZoneName:ca};class Bp{get type(){throw new vu}get name(){throw new vu}get ianaName(){return this.name}get isUniversal(){throw new vu}offsetName(e,n){throw new vu}formatOffset(e,n){throw new vu}offset(e){throw new vu}equals(e){throw new vu}get isValid(){throw new vu}}let p0=null;class Ay extends Bp{static get instance(){return p0===null&&(p0=new Ay),p0}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:o}){return QE(e,n,o)}formatOffset(e,n){return Gp(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Py={};function z4(t){return Py[t]||(Py[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Py[t]}const F4={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function B4(t,e){const n=t.format(e).replace(/\u200E/g,""),o=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,s,h,a,m,g,b,T]=o;return[a,s,h,m,g,b,T]}function V4(t,e){const n=t.formatToParts(e),o=[];for(let s=0;s<n.length;s++){const{type:h,value:a}=n[s],m=F4[h];h==="era"?o[m]=a:Hr(m)||(o[m]=parseInt(a,10))}return o}let ky={};class vl extends Bp{static create(e){return ky[e]||(ky[e]=new vl(e)),ky[e]}static resetCache(){ky={},Py={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=vl.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:o}){return QE(e,n,o,this.name)}formatOffset(e,n){return Gp(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const o=z4(this.name);let[s,h,a,m,g,b,T]=o.formatToParts?V4(o,n):B4(o,n);m==="BC"&&(s=-Math.abs(s)+1);const I=Ry({year:s,month:h,day:a,hour:g===24?0:g,minute:b,second:T,millisecond:0});let P=+n;const z=P%1e3;return P-=z>=0?z:1e3+z,(I-P)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let GE={};function U4(t,e={}){const n=JSON.stringify([t,e]);let o=GE[n];return o||(o=new Intl.ListFormat(t,e),GE[n]=o),o}let d0={};function m0(t,e={}){const n=JSON.stringify([t,e]);let o=d0[n];return o||(o=new Intl.DateTimeFormat(t,e),d0[n]=o),o}let y0={};function j4(t,e={}){const n=JSON.stringify([t,e]);let o=y0[n];return o||(o=new Intl.NumberFormat(t,e),y0[n]=o),o}let g0={};function G4(t,e={}){const{base:n,...o}=e,s=JSON.stringify([t,o]);let h=g0[s];return h||(h=new Intl.RelativeTimeFormat(t,e),g0[s]=h),h}let Vp=null;function $4(){return Vp||(Vp=new Intl.DateTimeFormat().resolvedOptions().locale,Vp)}function q4(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let o,s;try{o=m0(t).resolvedOptions(),s=t}catch{const g=t.substring(0,n);o=m0(g).resolvedOptions(),s=g}const{numberingSystem:h,calendar:a}=o;return[s,h,a]}}function W4(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function H4(t){const e=[];for(let n=1;n<=12;n++){const o=wr.utc(2009,n,1);e.push(t(o))}return e}function Z4(t){const e=[];for(let n=1;n<=7;n++){const o=wr.utc(2016,11,13+n);e.push(t(o))}return e}function Ly(t,e,n,o){const s=t.listingMode();return s==="error"?null:s==="en"?n(e):o(e)}function X4(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class K4{constructor(e,n,o){this.padTo=o.padTo||0,this.floor=o.floor||!1;const{padTo:s,floor:h,...a}=o;if(!n||Object.keys(a).length>0){const m={useGrouping:!1,...o};o.padTo>0&&(m.minimumIntegerDigits=o.padTo),this.inf=j4(e,m)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):x0(e,3);return Oi(n,this.padTo)}}}class Y4{constructor(e,n,o){this.opts=o,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const a=-1*(e.offset/60),m=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;e.offset!==0&&vl.create(m).valid?(s=m,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const h={...this.opts};h.timeZone=h.timeZone||s,this.dtf=m0(n,h)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const o=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:o}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class J4{constructor(e,n,o){this.opts={style:"long",...o},!n&&YE()&&(this.rtf=G4(e,o))}format(e,n){return this.rtf?this.rtf.format(e,n):y5(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}class Dn{static fromOpts(e){return Dn.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,n,o,s=!1){const h=e||Ii.defaultLocale,a=h||(s?"en-US":$4()),m=n||Ii.defaultNumberingSystem,g=o||Ii.defaultOutputCalendar;return new Dn(a,m,g,h)}static resetCache(){Vp=null,d0={},y0={},g0={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:o}={}){return Dn.create(e,n,o)}constructor(e,n,o,s){const[h,a,m]=q4(e);this.locale=h,this.numberingSystem=n||a||null,this.outputCalendar=o||m||null,this.intl=W4(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=X4(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Dn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return Ly(this,e,rS,()=>{const o=n?{month:e,day:"numeric"}:{month:e},s=n?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=H4(h=>this.extract(h,o,"month"))),this.monthsCache[s][e]})}weekdays(e,n=!1){return Ly(this,e,oS,()=>{const o=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=n?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=Z4(h=>this.extract(h,o,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return Ly(this,void 0,()=>aS,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[wr.utc(2016,11,13,9),wr.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Ly(this,e,sS,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[wr.utc(-40,1,1),wr.utc(2017,1,1)].map(o=>this.extract(o,n,"era"))),this.eraCache[e]})}extract(e,n,o){const s=this.dtFormatter(e,n),h=s.formatToParts(),a=h.find(m=>m.type.toLowerCase()===o);return a?a.value:null}numberFormatter(e={}){return new K4(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new Y4(e,this.intl,n)}relFormatter(e={}){return new J4(this.intl,this.isEnglish(),e)}listFormatter(e={}){return U4(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let v0=null;class Ro extends Bp{static get utcInstance(){return v0===null&&(v0=new Ro(0)),v0}static instance(e){return e===0?Ro.utcInstance:new Ro(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Ro(Fy(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Gp(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Gp(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return Gp(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Q4 extends Bp{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function _u(t,e){if(Hr(t)||t===null)return e;if(t instanceof Bp)return t;if(e5(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?Ay.instance:n==="utc"||n==="gmt"?Ro.utcInstance:Ro.parseSpecifier(n)||vl.create(t)}else return Ec(t)?Ro.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Q4(t)}let $E=()=>Date.now(),qE="system",WE=null,HE=null,ZE=null,XE=60,KE;class Ii{static get now(){return $E}static set now(e){$E=e}static set defaultZone(e){qE=e}static get defaultZone(){return _u(qE,Ay.instance)}static get defaultLocale(){return WE}static set defaultLocale(e){WE=e}static get defaultNumberingSystem(){return HE}static set defaultNumberingSystem(e){HE=e}static get defaultOutputCalendar(){return ZE}static set defaultOutputCalendar(e){ZE=e}static get twoDigitCutoffYear(){return XE}static set twoDigitCutoffYear(e){XE=e%100}static get throwOnInvalid(){return KE}static set throwOnInvalid(e){KE=e}static resetCaches(){Dn.resetCache(),vl.resetCache()}}function Hr(t){return typeof t>"u"}function Ec(t){return typeof t=="number"}function Dy(t){return typeof t=="number"&&t%1===0}function e5(t){return typeof t=="string"}function t5(t){return Object.prototype.toString.call(t)==="[object Date]"}function YE(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function r5(t){return Array.isArray(t)?t:[t]}function JE(t,e,n){if(t.length!==0)return t.reduce((o,s)=>{const h=[e(s),s];return o&&n(o[0],h[0])===o[0]?o:h},null)[1]}function n5(t,e){return e.reduce((n,o)=>(n[o]=t[o],n),{})}function Rh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _l(t,e,n){return Dy(t)&&t>=e&&t<=n}function i5(t,e){return t-e*Math.floor(t/e)}function Oi(t,e=2){const n=t<0;let o;return n?o="-"+(""+-t).padStart(e,"0"):o=(""+t).padStart(e,"0"),o}function xu(t){if(!(Hr(t)||t===null||t===""))return parseInt(t,10)}function Sc(t){if(!(Hr(t)||t===null||t===""))return parseFloat(t)}function _0(t){if(!(Hr(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function o5(t){return t>0?Math.floor(t):Math.ceil(t)}function x0(t,e,n=!1){const o=10**e;return(n?Math.trunc:Math.round)(t*o)/o}function Up(t){return t%4===0&&(t%100!==0||t%400===0)}function jp(t){return Up(t)?366:365}function Ny(t,e){const n=i5(e-1,12)+1,o=t+(e-n)/12;return n===2?Up(o)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Ry(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function zy(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,n=t-1,o=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return e===4||o===3?53:52}function b0(t){return t>99?t:t>Ii.twoDigitCutoffYear?1900+t:2e3+t}function QE(t,e,n,o=null){const s=new Date(t),h={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};o&&(h.timeZone=o);const a={timeZoneName:e,...h},m=new Intl.DateTimeFormat(n,a).formatToParts(s).find(g=>g.type.toLowerCase()==="timezonename");return m?m.value:null}function Fy(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const o=parseInt(e,10)||0,s=n<0||Object.is(n,-0)?-o:o;return n*60+s}function eS(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Ca(`Invalid unit value ${t}`);return e}function By(t,e){const n={};for(const o in t)if(Rh(t,o)){const s=t[o];if(s==null)continue;n[e(o)]=eS(s)}return n}function Gp(t,e){const n=Math.trunc(Math.abs(t/60)),o=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${Oi(n,2)}:${Oi(o,2)}`;case"narrow":return`${s}${n}${o>0?`:${o}`:""}`;case"techie":return`${s}${Oi(n,2)}${Oi(o,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Vy(t){return n5(t,["hour","minute","second","millisecond"])}const a5=["January","February","March","April","May","June","July","August","September","October","November","December"],tS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s5=["J","F","M","A","M","J","J","A","S","O","N","D"];function rS(t){switch(t){case"narrow":return[...s5];case"short":return[...tS];case"long":return[...a5];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const nS=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],iS=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],l5=["M","T","W","T","F","S","S"];function oS(t){switch(t){case"narrow":return[...l5];case"short":return[...iS];case"long":return[...nS];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const aS=["AM","PM"],u5=["Before Christ","Anno Domini"],c5=["BC","AD"],h5=["B","A"];function sS(t){switch(t){case"narrow":return[...h5];case"short":return[...c5];case"long":return[...u5];default:return null}}function f5(t){return aS[t.hour<12?0:1]}function p5(t,e){return oS(e)[t.weekday-1]}function d5(t,e){return rS(e)[t.month-1]}function m5(t,e){return sS(e)[t.year<0?0:1]}function y5(t,e,n="always",o=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},h=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&h){const M=t==="days";switch(e){case 1:return M?"tomorrow":`next ${s[t][0]}`;case-1:return M?"yesterday":`last ${s[t][0]}`;case 0:return M?"today":`this ${s[t][0]}`}}const a=Object.is(e,-0)||e<0,m=Math.abs(e),g=m===1,b=s[t],T=o?g?b[1]:b[2]||b[1]:g?s[t][0]:t;return a?`${m} ${T} ago`:`in ${m} ${T}`}function lS(t,e){let n="";for(const o of t)o.literal?n+=o.val:n+=e(o.val);return n}const g5={D:Cy,DD:SE,DDD:TE,DDDD:ME,t:IE,tt:OE,ttt:CE,tttt:AE,T:PE,TT:kE,TTT:LE,TTTT:DE,f:NE,ff:zE,fff:BE,ffff:UE,F:RE,FF:FE,FFF:VE,FFFF:jE};class mo{static create(e,n={}){return new mo(e,n)}static parseFormat(e){let n=null,o="",s=!1;const h=[];for(let a=0;a<e.length;a++){const m=e.charAt(a);m==="'"?(o.length>0&&h.push({literal:s||/^\s+$/.test(o),val:o}),n=null,o="",s=!s):s||m===n?o+=m:(o.length>0&&h.push({literal:/^\s+$/.test(o),val:o}),o=m,n=m)}return o.length>0&&h.push({literal:s||/^\s+$/.test(o),val:o}),h}static macroTokenToFormatOpts(e){return g5[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Oi(e,n);const o={...this.opts};return n>0&&(o.padTo=n),this.loc.numberFormatter(o).format(e)}formatDateTimeFromString(e,n){const o=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",h=(P,z)=>this.loc.extract(e,P,z),a=P=>e.isOffsetFixed&&e.offset===0&&P.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,P.format):"",m=()=>o?f5(e):h({hour:"numeric",hourCycle:"h12"},"dayperiod"),g=(P,z)=>o?d5(e,P):h(z?{month:P}:{month:P,day:"numeric"},"month"),b=(P,z)=>o?p5(e,P):h(z?{weekday:P}:{weekday:P,month:"long",day:"numeric"},"weekday"),T=P=>{const z=mo.macroTokenToFormatOpts(P);return z?this.formatWithSystemDefault(e,z):P},M=P=>o?m5(e,P):h({era:P},"era"),I=P=>{switch(P){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return m();case"d":return s?h({day:"numeric"},"day"):this.num(e.day);case"dd":return s?h({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return b("short",!0);case"cccc":return b("long",!0);case"ccccc":return b("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return b("short",!1);case"EEEE":return b("long",!1);case"EEEEE":return b("narrow",!1);case"L":return s?h({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?h({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return g("short",!0);case"LLLL":return g("long",!0);case"LLLLL":return g("narrow",!0);case"M":return s?h({month:"numeric"},"month"):this.num(e.month);case"MM":return s?h({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return g("short",!1);case"MMMM":return g("long",!1);case"MMMMM":return g("narrow",!1);case"y":return s?h({year:"numeric"},"year"):this.num(e.year);case"yy":return s?h({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?h({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?h({year:"numeric"},"year"):this.num(e.year,6);case"G":return M("short");case"GG":return M("long");case"GGGGG":return M("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return T(P)}};return lS(mo.parseFormat(n),I)}formatDurationFromString(e,n){const o=g=>{switch(g[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=g=>b=>{const T=o(b);return T?this.num(g.get(T),b.length):b},h=mo.parseFormat(n),a=h.reduce((g,{literal:b,val:T})=>b?g:g.concat(T),[]),m=e.shiftTo(...a.map(o).filter(g=>g));return lS(h,s(m))}}class ts{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const uS=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function zh(...t){const e=t.reduce((n,o)=>n+o.source,"");return RegExp(`^${e}$`)}function Fh(...t){return e=>t.reduce(([n,o,s],h)=>{const[a,m,g]=h(e,s);return[{...n,...a},m||o,g]},[{},null,1]).slice(0,2)}function Bh(t,...e){if(t==null)return[null,null];for(const[n,o]of e){const s=n.exec(t);if(s)return o(s)}return[null,null]}function cS(...t){return(e,n)=>{const o={};let s;for(s=0;s<t.length;s++)o[t[s]]=xu(e[n+s]);return[o,null,n+s]}}const hS=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,v5=`(?:${hS.source}?(?:\\[(${uS.source})\\])?)?`,w0=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,fS=RegExp(`${w0.source}${v5}`),E0=RegExp(`(?:T${fS.source})?`),_5=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,x5=/(\d{4})-?W(\d\d)(?:-?(\d))?/,b5=/(\d{4})-?(\d{3})/,w5=cS("weekYear","weekNumber","weekDay"),E5=cS("year","ordinal"),S5=/(\d{4})-(\d\d)-(\d\d)/,pS=RegExp(`${w0.source} ?(?:${hS.source}|(${uS.source}))?`),T5=RegExp(`(?: ${pS.source})?`);function Vh(t,e,n){const o=t[e];return Hr(o)?n:xu(o)}function M5(t,e){return[{year:Vh(t,e),month:Vh(t,e+1,1),day:Vh(t,e+2,1)},null,e+3]}function Uh(t,e){return[{hours:Vh(t,e,0),minutes:Vh(t,e+1,0),seconds:Vh(t,e+2,0),milliseconds:_0(t[e+3])},null,e+4]}function $p(t,e){const n=!t[e]&&!t[e+1],o=Fy(t[e+1],t[e+2]),s=n?null:Ro.instance(o);return[{},s,e+3]}function qp(t,e){const n=t[e]?vl.create(t[e]):null;return[{},n,e+1]}const I5=RegExp(`^T?${w0.source}$`),O5=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function C5(t){const[e,n,o,s,h,a,m,g,b]=t,T=e[0]==="-",M=g&&g[0]==="-",I=(P,z=!1)=>P!==void 0&&(z||P&&T)?-P:P;return[{years:I(Sc(n)),months:I(Sc(o)),weeks:I(Sc(s)),days:I(Sc(h)),hours:I(Sc(a)),minutes:I(Sc(m)),seconds:I(Sc(g),g==="-0"),milliseconds:I(_0(b),M)}]}const A5={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function S0(t,e,n,o,s,h,a){const m={year:e.length===2?b0(xu(e)):xu(e),month:tS.indexOf(n)+1,day:xu(o),hour:xu(s),minute:xu(h)};return a&&(m.second=xu(a)),t&&(m.weekday=t.length>3?nS.indexOf(t)+1:iS.indexOf(t)+1),m}const P5=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function k5(t){const[,e,n,o,s,h,a,m,g,b,T,M]=t,I=S0(e,s,o,n,h,a,m);let P;return g?P=A5[g]:b?P=0:P=Fy(T,M),[I,new Ro(P)]}function L5(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const D5=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,N5=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,R5=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function dS(t){const[,e,n,o,s,h,a,m]=t;return[S0(e,s,o,n,h,a,m),Ro.utcInstance]}function z5(t){const[,e,n,o,s,h,a,m]=t;return[S0(e,m,n,o,s,h,a),Ro.utcInstance]}const F5=zh(_5,E0),B5=zh(x5,E0),V5=zh(b5,E0),U5=zh(fS),mS=Fh(M5,Uh,$p,qp),j5=Fh(w5,Uh,$p,qp),G5=Fh(E5,Uh,$p,qp),$5=Fh(Uh,$p,qp);function q5(t){return Bh(t,[F5,mS],[B5,j5],[V5,G5],[U5,$5])}function W5(t){return Bh(L5(t),[P5,k5])}function H5(t){return Bh(t,[D5,dS],[N5,dS],[R5,z5])}function Z5(t){return Bh(t,[O5,C5])}const X5=Fh(Uh);function K5(t){return Bh(t,[I5,X5])}const Y5=zh(S5,T5),J5=zh(pS),Q5=Fh(Uh,$p,qp);function ez(t){return Bh(t,[Y5,mS],[J5,Q5])}const yS="Invalid Duration",gS={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},tz={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...gS},Aa=146097/400,jh=146097/4800,rz={years:{quarters:4,months:12,weeks:Aa/7,days:Aa,hours:Aa*24,minutes:Aa*24*60,seconds:Aa*24*60*60,milliseconds:Aa*24*60*60*1e3},quarters:{months:3,weeks:Aa/28,days:Aa/4,hours:Aa*24/4,minutes:Aa*24*60/4,seconds:Aa*24*60*60/4,milliseconds:Aa*24*60*60*1e3/4},months:{weeks:jh/7,days:jh,hours:jh*24,minutes:jh*24*60,seconds:jh*24*60*60,milliseconds:jh*24*60*60*1e3},...gS},Tc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],vS=Tc.slice(0).reverse();function bu(t,e,n=!1){const o={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Xr(o)}function _S(t){return Math.trunc(t*1e3)/1e3}function xS(t,e,n,o,s){const h=t[s][n],a=e[n]/h,m=o5(a);o[s]=_S(o[s]+m),e[n]=_S(e[n]-m*h)}function nz(t,e){vS.reduce((n,o)=>Hr(e[o])?n:(n&&xS(t,e,n,e,o),o),null)}function iz(t){const e={};for(const[n,o]of Object.entries(t))o!==0&&(e[n]=o);return e}class Xr{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let o=n?rz:tz;e.matrix&&(o=e.matrix),this.values=e.values,this.loc=e.loc||Dn.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=o,this.isLuxonDuration=!0}static fromMillis(e,n){return Xr.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new Ca(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Xr({values:By(e,Xr.normalizeUnit),loc:Dn.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Ec(e))return Xr.fromMillis(e);if(Xr.isDuration(e))return e;if(typeof e=="object")return Xr.fromObject(e);throw new Ca(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[o]=Z5(e);return o?Xr.fromObject(o,n):Xr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[o]=K5(e);return o?Xr.fromObject(o,n):Xr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new Ca("need to specify a reason the Duration is invalid");const o=e instanceof ts?e:new ts(e,n);if(Ii.throwOnInvalid)throw new D4(o);return new Xr({invalid:o})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new EE(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const o={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?mo.create(this.loc,o).formatDurationFromString(this,e):yS}toHuman(e={}){if(!this.isValid)return yS;const n=Tc.map(o=>{const s=this.values[o];return Hr(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:o.slice(0,-1)}).format(s)}).filter(o=>o);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=x0(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},wr.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){var n;if(!this.isValid)return NaN;let e=(n=this.values.milliseconds)!=null?n:0;for(let o of vS.slice(1))this.values[o]&&(e+=this.values[o]*this.matrix[o].milliseconds);return e}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=Xr.fromDurationLike(e),o={};for(const s of Tc)(Rh(n.values,s)||Rh(this.values,s))&&(o[s]=n.get(s)+this.get(s));return bu(this,{values:o},!0)}minus(e){if(!this.isValid)return this;const n=Xr.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const o of Object.keys(this.values))n[o]=eS(e(this.values[o],o));return bu(this,{values:n},!0)}get(e){return this[Xr.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...By(e,Xr.normalizeUnit)};return bu(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:o,matrix:s}={}){const a={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:s,conversionAccuracy:o};return bu(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return this.valueOf()>=0?(nz(this.matrix,e),bu(this,{values:e},!0)):this.negate().normalize().negate()}rescale(){if(!this.isValid)return this;const e=iz(this.normalize().shiftToAll().toObject());return bu(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>Xr.normalizeUnit(a));const n={},o={},s=this.toObject();let h;for(const a of Tc)if(e.indexOf(a)>=0){h=a;let m=0;for(const b in o)m+=this.matrix[b][a]*o[b],o[b]=0;Ec(s[a])&&(m+=s[a]);const g=Math.trunc(m);n[a]=g,o[a]=(m*1e3-g*1e3)/1e3;for(const b in s)Tc.indexOf(b)>Tc.indexOf(a)&&xS(this.matrix,s,b,n,a)}else Ec(s[a])&&(o[a]=s[a]);for(const a in o)o[a]!==0&&(n[h]+=a===h?o[a]:o[a]/this.matrix[h][a]);return bu(this,{values:n},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return bu(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(o,s){return o===void 0||o===0?s===void 0||s===0:o===s}for(const o of Tc)if(!n(this.values[o],e.values[o]))return!1;return!0}}const Gh="Invalid Interval";function oz(t,e){return!t||!t.isValid?si.invalid("missing or invalid start"):!e||!e.isValid?si.invalid("missing or invalid end"):e<t?si.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class si{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new Ca("need to specify a reason the Interval is invalid");const o=e instanceof ts?e:new ts(e,n);if(Ii.throwOnInvalid)throw new L4(o);return new si({invalid:o})}static fromDateTimes(e,n){const o=Hp(e),s=Hp(n),h=oz(o,s);return h==null?new si({start:o,end:s}):h}static after(e,n){const o=Xr.fromDurationLike(n),s=Hp(e);return si.fromDateTimes(s,s.plus(o))}static before(e,n){const o=Xr.fromDurationLike(n),s=Hp(e);return si.fromDateTimes(s.minus(o),s)}static fromISO(e,n){const[o,s]=(e||"").split("/",2);if(o&&s){let h,a;try{h=wr.fromISO(o,n),a=h.isValid}catch{a=!1}let m,g;try{m=wr.fromISO(s,n),g=m.isValid}catch{g=!1}if(a&&g)return si.fromDateTimes(h,m);if(a){const b=Xr.fromISO(s,n);if(b.isValid)return si.after(h,b)}else if(g){const b=Xr.fromISO(o,n);if(b.isValid)return si.before(m,b)}}return si.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const n=this.start.startOf(e),o=this.end.startOf(e);return Math.floor(o.diff(n,e).get(e))+(o.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?si.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(Hp).filter(a=>this.contains(a)).sort(),o=[];let{s}=this,h=0;for(;s<this.e;){const a=n[h]||this.e,m=+a>+this.e?this.e:a;o.push(si.fromDateTimes(s,m)),s=m,h+=1}return o}splitBy(e){const n=Xr.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:o}=this,s=1,h;const a=[];for(;o<this.e;){const m=this.start.plus(n.mapUnits(g=>g*s));h=+m>+this.e?this.e:m,a.push(si.fromDateTimes(o,h)),o=h,s+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,o=this.e<e.e?this.e:e.e;return n>=o?null:si.fromDateTimes(n,o)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,o=this.e>e.e?this.e:e.e;return si.fromDateTimes(n,o)}static merge(e){const[n,o]=e.sort((s,h)=>s.s-h.s).reduce(([s,h],a)=>h?h.overlaps(a)||h.abutsStart(a)?[s,h.union(a)]:[s.concat([h]),a]:[s,a],[[],null]);return o&&n.push(o),n}static xor(e){let n=null,o=0;const s=[],h=e.map(g=>[{time:g.s,type:"s"},{time:g.e,type:"e"}]),a=Array.prototype.concat(...h),m=a.sort((g,b)=>g.time-b.time);for(const g of m)o+=g.type==="s"?1:-1,o===1?n=g.time:(n&&+n!=+g.time&&s.push(si.fromDateTimes(n,g.time)),n=null);return si.merge(s)}difference(...e){return si.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Gh}toLocaleString(e=Cy,n={}){return this.isValid?mo.create(this.s.loc.clone(n),e).formatInterval(this):Gh}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Gh}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Gh}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Gh}toFormat(e,{separator:n=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:Gh}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):Xr.invalid(this.invalidReason)}mapEndpoints(e){return si.fromDateTimes(e(this.s),e(this.e))}}class Uy{static hasDST(e=Ii.defaultZone){const n=wr.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return vl.isValidZone(e)}static normalizeZone(e){return _u(e,Ii.defaultZone)}static months(e="long",{locale:n=null,numberingSystem:o=null,locObj:s=null,outputCalendar:h="gregory"}={}){return(s||Dn.create(n,o,h)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:o=null,locObj:s=null,outputCalendar:h="gregory"}={}){return(s||Dn.create(n,o,h)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:o=null,locObj:s=null}={}){return(s||Dn.create(n,o,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:o=null,locObj:s=null}={}){return(s||Dn.create(n,o,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Dn.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Dn.create(n,null,"gregory").eras(e)}static features(){return{relative:YE()}}}function bS(t,e){const n=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),o=n(e)-n(t);return Math.floor(Xr.fromMillis(o).as("days"))}function az(t,e,n){const o=[["years",(g,b)=>b.year-g.year],["quarters",(g,b)=>b.quarter-g.quarter+(b.year-g.year)*4],["months",(g,b)=>b.month-g.month+(b.year-g.year)*12],["weeks",(g,b)=>{const T=bS(g,b);return(T-T%7)/7}],["days",bS]],s={},h=t;let a,m;for(const[g,b]of o)n.indexOf(g)>=0&&(a=g,s[g]=b(t,e),m=h.plus(s),m>e?(s[g]--,t=h.plus(s),t>e&&(m=t,s[g]--,t=h.plus(s))):t=m);return[t,s,m,a]}function sz(t,e,n,o){let[s,h,a,m]=az(t,e,n);const g=e-s,b=n.filter(M=>["hours","minutes","seconds","milliseconds"].indexOf(M)>=0);b.length===0&&(a<e&&(a=s.plus({[m]:1})),a!==s&&(h[m]=(h[m]||0)+g/(a-s)));const T=Xr.fromObject(h,o);return b.length>0?Xr.fromMillis(g,o).shiftTo(...b).plus(T):T}const T0={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},wS={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},lz=T0.hanidec.replace(/[\[|\]]/g,"").split("");function uz(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const o=t.charCodeAt(n);if(t[n].search(T0.hanidec)!==-1)e+=lz.indexOf(t[n]);else for(const s in wS){const[h,a]=wS[s];o>=h&&o<=a&&(e+=o-h)}}return parseInt(e,10)}else return e}function rs({numberingSystem:t},e=""){return new RegExp(`${T0[t||"latn"]}${e}`)}const cz="missing Intl.DateTimeFormat.formatToParts support";function tn(t,e=n=>n){return{regex:t,deser:([n])=>e(uz(n))}}const ES=`[ ${String.fromCharCode(160)}]`,SS=new RegExp(ES,"g");function hz(t){return t.replace(/\./g,"\\.?").replace(SS,ES)}function TS(t){return t.replace(/\./g,"").replace(SS," ").toLowerCase()}function ns(t,e){return t===null?null:{regex:RegExp(t.map(hz).join("|")),deser:([n])=>t.findIndex(o=>TS(n)===TS(o))+e}}function MS(t,e){return{regex:t,deser:([,n,o])=>Fy(n,o),groups:e}}function jy(t){return{regex:t,deser:([e])=>e}}function fz(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function pz(t,e){const n=rs(e),o=rs(e,"{2}"),s=rs(e,"{3}"),h=rs(e,"{4}"),a=rs(e,"{6}"),m=rs(e,"{1,2}"),g=rs(e,"{1,3}"),b=rs(e,"{1,6}"),T=rs(e,"{1,9}"),M=rs(e,"{2,4}"),I=rs(e,"{4,6}"),P=W=>({regex:RegExp(fz(W.val)),deser:([Y])=>Y,literal:!0}),V=(W=>{if(t.literal)return P(W);switch(W.val){case"G":return ns(e.eras("short"),0);case"GG":return ns(e.eras("long"),0);case"y":return tn(b);case"yy":return tn(M,b0);case"yyyy":return tn(h);case"yyyyy":return tn(I);case"yyyyyy":return tn(a);case"M":return tn(m);case"MM":return tn(o);case"MMM":return ns(e.months("short",!0),1);case"MMMM":return ns(e.months("long",!0),1);case"L":return tn(m);case"LL":return tn(o);case"LLL":return ns(e.months("short",!1),1);case"LLLL":return ns(e.months("long",!1),1);case"d":return tn(m);case"dd":return tn(o);case"o":return tn(g);case"ooo":return tn(s);case"HH":return tn(o);case"H":return tn(m);case"hh":return tn(o);case"h":return tn(m);case"mm":return tn(o);case"m":return tn(m);case"q":return tn(m);case"qq":return tn(o);case"s":return tn(m);case"ss":return tn(o);case"S":return tn(g);case"SSS":return tn(s);case"u":return jy(T);case"uu":return jy(m);case"uuu":return tn(n);case"a":return ns(e.meridiems(),0);case"kkkk":return tn(h);case"kk":return tn(M,b0);case"W":return tn(m);case"WW":return tn(o);case"E":case"c":return tn(n);case"EEE":return ns(e.weekdays("short",!1),1);case"EEEE":return ns(e.weekdays("long",!1),1);case"ccc":return ns(e.weekdays("short",!0),1);case"cccc":return ns(e.weekdays("long",!0),1);case"Z":case"ZZ":return MS(new RegExp(`([+-]${m.source})(?::(${o.source}))?`),2);case"ZZZ":return MS(new RegExp(`([+-]${m.source})(${o.source})?`),2);case"z":return jy(/[a-z_+-/]{1,256}?/i);case" ":return jy(/[^\S\n\r]/);default:return P(W)}})(t)||{invalidReason:cz};return V.token=t,V}const dz={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function mz(t,e,n){const{type:o,value:s}=t;if(o==="literal"){const g=/^\s+$/.test(s);return{literal:!g,val:g?" ":s}}const h=e[o];let a=o;o==="hour"&&(e.hour12!=null?a=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?a="hour12":a="hour24":a=n.hour12?"hour12":"hour24");let m=dz[a];if(typeof m=="object"&&(m=m[h]),m)return{literal:!1,val:m}}function yz(t){return[`^${t.map(n=>n.regex).reduce((n,o)=>`${n}(${o.source})`,"")}$`,t]}function gz(t,e,n){const o=t.match(e);if(o){const s={};let h=1;for(const a in n)if(Rh(n,a)){const m=n[a],g=m.groups?m.groups+1:1;!m.literal&&m.token&&(s[m.token.val[0]]=m.deser(o.slice(h,h+g))),h+=g}return[o,s]}else return[o,{}]}function vz(t){const e=h=>{switch(h){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,o;return Hr(t.z)||(n=vl.create(t.z)),Hr(t.Z)||(n||(n=new Ro(t.Z)),o=t.Z),Hr(t.q)||(t.M=(t.q-1)*3+1),Hr(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Hr(t.u)||(t.S=_0(t.u)),[Object.keys(t).reduce((h,a)=>{const m=e(a);return m&&(h[m]=t[a]),h},{}),n,o]}let M0=null;function _z(){return M0||(M0=wr.fromMillis(1555555555555)),M0}function xz(t,e){if(t.literal)return t;const n=mo.macroTokenToFormatOpts(t.val),o=CS(n,e);return o==null||o.includes(void 0)?t:o}function IS(t,e){return Array.prototype.concat(...t.map(n=>xz(n,e)))}function OS(t,e,n){const o=IS(mo.parseFormat(n),t),s=o.map(a=>pz(a,t)),h=s.find(a=>a.invalidReason);if(h)return{input:e,tokens:o,invalidReason:h.invalidReason};{const[a,m]=yz(s),g=RegExp(a,"i"),[b,T]=gz(e,g,m),[M,I,P]=T?vz(T):[null,null,void 0];if(Rh(T,"a")&&Rh(T,"H"))throw new Fp("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:o,regex:g,rawMatches:b,matches:T,result:M,zone:I,specificOffset:P}}}function bz(t,e,n){const{result:o,zone:s,specificOffset:h,invalidReason:a}=OS(t,e,n);return[o,s,h,a]}function CS(t,e){if(!t)return null;const o=mo.create(e,t).dtFormatter(_z()),s=o.formatToParts(),h=o.resolvedOptions();return s.map(a=>mz(a,t,h))}const AS=[0,31,59,90,120,151,181,212,243,273,304,334],PS=[0,31,60,91,121,152,182,213,244,274,305,335];function Pa(t,e){return new ts("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function kS(t,e,n){const o=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&o.setUTCFullYear(o.getUTCFullYear()-1900);const s=o.getUTCDay();return s===0?7:s}function LS(t,e,n){return n+(Up(t)?PS:AS)[e-1]}function DS(t,e){const n=Up(t)?PS:AS,o=n.findIndex(h=>h<e),s=e-n[o];return{month:o+1,day:s}}function I0(t){const{year:e,month:n,day:o}=t,s=LS(e,n,o),h=kS(e,n,o);let a=Math.floor((s-h+10)/7),m;return a<1?(m=e-1,a=zy(m)):a>zy(e)?(m=e+1,a=1):m=e,{weekYear:m,weekNumber:a,weekday:h,...Vy(t)}}function NS(t){const{weekYear:e,weekNumber:n,weekday:o}=t,s=kS(e,1,4),h=jp(e);let a=n*7+o-s-3,m;a<1?(m=e-1,a+=jp(m)):a>h?(m=e+1,a-=jp(e)):m=e;const{month:g,day:b}=DS(m,a);return{year:m,month:g,day:b,...Vy(t)}}function O0(t){const{year:e,month:n,day:o}=t,s=LS(e,n,o);return{year:e,ordinal:s,...Vy(t)}}function RS(t){const{year:e,ordinal:n}=t,{month:o,day:s}=DS(e,n);return{year:e,month:o,day:s,...Vy(t)}}function wz(t){const e=Dy(t.weekYear),n=_l(t.weekNumber,1,zy(t.weekYear)),o=_l(t.weekday,1,7);return e?n?o?!1:Pa("weekday",t.weekday):Pa("week",t.week):Pa("weekYear",t.weekYear)}function Ez(t){const e=Dy(t.year),n=_l(t.ordinal,1,jp(t.year));return e?n?!1:Pa("ordinal",t.ordinal):Pa("year",t.year)}function zS(t){const e=Dy(t.year),n=_l(t.month,1,12),o=_l(t.day,1,Ny(t.year,t.month));return e?n?o?!1:Pa("day",t.day):Pa("month",t.month):Pa("year",t.year)}function FS(t){const{hour:e,minute:n,second:o,millisecond:s}=t,h=_l(e,0,23)||e===24&&n===0&&o===0&&s===0,a=_l(n,0,59),m=_l(o,0,59),g=_l(s,0,999);return h?a?m?g?!1:Pa("millisecond",s):Pa("second",o):Pa("minute",n):Pa("hour",e)}const C0="Invalid DateTime",BS=864e13;function Gy(t){return new ts("unsupported zone",`the zone "${t.name}" is not supported`)}function A0(t){return t.weekData===null&&(t.weekData=I0(t.c)),t.weekData}function Mc(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new wr({...n,...e,old:n})}function VS(t,e,n){let o=t-e*60*1e3;const s=n.offset(o);if(e===s)return[o,e];o-=(s-e)*60*1e3;const h=n.offset(o);return s===h?[o,s]:[t-Math.min(s,h)*60*1e3,Math.max(s,h)]}function $y(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function qy(t,e,n){return VS(Ry(t),e,n)}function US(t,e){const n=t.o,o=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,h={...t.c,year:o,month:s,day:Math.min(t.c.day,Ny(o,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},a=Xr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),m=Ry(h);let[g,b]=VS(m,n,t.zone);return a!==0&&(g+=a,b=t.zone.offset(g)),{ts:g,o:b}}function Wp(t,e,n,o,s,h){const{setZone:a,zone:m}=n;if(t&&Object.keys(t).length!==0||e){const g=e||m,b=wr.fromObject(t,{...n,zone:g,specificOffset:h});return a?b:b.setZone(m)}else return wr.invalid(new ts("unparsable",`the input "${s}" can't be parsed as ${o}`))}function Wy(t,e,n=!0){return t.isValid?mo.create(Dn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function P0(t,e){const n=t.c.year>9999||t.c.year<0;let o="";return n&&t.c.year>=0&&(o+="+"),o+=Oi(t.c.year,n?6:4),e?(o+="-",o+=Oi(t.c.month),o+="-",o+=Oi(t.c.day)):(o+=Oi(t.c.month),o+=Oi(t.c.day)),o}function jS(t,e,n,o,s,h){let a=Oi(t.c.hour);return e?(a+=":",a+=Oi(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(a+=":")):a+=Oi(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(a+=Oi(t.c.second),(t.c.millisecond!==0||!o)&&(a+=".",a+=Oi(t.c.millisecond,3))),s&&(t.isOffsetFixed&&t.offset===0&&!h?a+="Z":t.o<0?(a+="-",a+=Oi(Math.trunc(-t.o/60)),a+=":",a+=Oi(Math.trunc(-t.o%60))):(a+="+",a+=Oi(Math.trunc(t.o/60)),a+=":",a+=Oi(Math.trunc(t.o%60)))),h&&(a+="["+t.zone.ianaName+"]"),a}const GS={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Sz={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Tz={ordinal:1,hour:0,minute:0,second:0,millisecond:0},$S=["year","month","day","hour","minute","second","millisecond"],Mz=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Iz=["year","ordinal","hour","minute","second","millisecond"];function qS(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new EE(t);return e}function WS(t,e){const n=_u(e.zone,Ii.defaultZone),o=Dn.fromObject(e),s=Ii.now();let h,a;if(Hr(t.year))h=s;else{for(const b of $S)Hr(t[b])&&(t[b]=GS[b]);const m=zS(t)||FS(t);if(m)return wr.invalid(m);const g=n.offset(s);[h,a]=qy(t,g,n)}return new wr({ts:h,zone:n,loc:o,o:a})}function HS(t,e,n){const o=Hr(n.round)?!0:n.round,s=(a,m)=>(a=x0(a,o||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(a,m)),h=a=>n.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(n.unit)return s(h(n.unit),n.unit);for(const a of n.units){const m=h(a);if(Math.abs(m)>=1)return s(m,a)}return s(t>e?-0:0,n.units[n.units.length-1])}function ZS(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}class wr{constructor(e){const n=e.zone||Ii.defaultZone;let o=e.invalid||(Number.isNaN(e.ts)?new ts("invalid input"):null)||(n.isValid?null:Gy(n));this.ts=Hr(e.ts)?Ii.now():e.ts;let s=null,h=null;if(!o)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[s,h]=[e.old.c,e.old.o];else{const m=n.offset(this.ts);s=$y(this.ts,m),o=Number.isNaN(s.year)?new ts("invalid input"):null,s=o?null:s,h=o?null:m}this._zone=n,this.loc=e.loc||Dn.create(),this.invalid=o,this.weekData=null,this.c=s,this.o=h,this.isLuxonDateTime=!0}static now(){return new wr({})}static local(){const[e,n]=ZS(arguments),[o,s,h,a,m,g,b]=n;return WS({year:o,month:s,day:h,hour:a,minute:m,second:g,millisecond:b},e)}static utc(){const[e,n]=ZS(arguments),[o,s,h,a,m,g,b]=n;return e.zone=Ro.utcInstance,WS({year:o,month:s,day:h,hour:a,minute:m,second:g,millisecond:b},e)}static fromJSDate(e,n={}){const o=t5(e)?e.valueOf():NaN;if(Number.isNaN(o))return wr.invalid("invalid input");const s=_u(n.zone,Ii.defaultZone);return s.isValid?new wr({ts:o,zone:s,loc:Dn.fromObject(n)}):wr.invalid(Gy(s))}static fromMillis(e,n={}){if(Ec(e))return e<-BS||e>BS?wr.invalid("Timestamp out of range"):new wr({ts:e,zone:_u(n.zone,Ii.defaultZone),loc:Dn.fromObject(n)});throw new Ca(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Ec(e))return new wr({ts:e*1e3,zone:_u(n.zone,Ii.defaultZone),loc:Dn.fromObject(n)});throw new Ca("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const o=_u(n.zone,Ii.defaultZone);if(!o.isValid)return wr.invalid(Gy(o));const s=Ii.now(),h=Hr(n.specificOffset)?o.offset(s):n.specificOffset,a=By(e,qS),m=!Hr(a.ordinal),g=!Hr(a.year),b=!Hr(a.month)||!Hr(a.day),T=g||b,M=a.weekYear||a.weekNumber,I=Dn.fromObject(n);if((T||m)&&M)throw new Fp("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&m)throw new Fp("Can't mix ordinal dates with month/day");const P=M||a.weekday&&!T;let z,V,W=$y(s,h);P?(z=Mz,V=Sz,W=I0(W)):m?(z=Iz,V=Tz,W=O0(W)):(z=$S,V=GS);let Y=!1;for(const Pe of z){const Se=a[Pe];Hr(Se)?Y?a[Pe]=V[Pe]:a[Pe]=W[Pe]:Y=!0}const X=P?wz(a):m?Ez(a):zS(a),ue=X||FS(a);if(ue)return wr.invalid(ue);const he=P?NS(a):m?RS(a):a,[ve,ze]=qy(he,h,o),Fe=new wr({ts:ve,zone:o,o:ze,loc:I});return a.weekday&&T&&e.weekday!==Fe.weekday?wr.invalid("mismatched weekday",`you can't specify both a weekday of ${a.weekday} and a date of ${Fe.toISO()}`):Fe}static fromISO(e,n={}){const[o,s]=q5(e);return Wp(o,s,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[o,s]=W5(e);return Wp(o,s,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[o,s]=H5(e);return Wp(o,s,n,"HTTP",n)}static fromFormat(e,n,o={}){if(Hr(e)||Hr(n))throw new Ca("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:h=null}=o,a=Dn.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0}),[m,g,b,T]=bz(a,e,n);return T?wr.invalid(T):Wp(m,g,o,`format ${n}`,e,b)}static fromString(e,n,o={}){return wr.fromFormat(e,n,o)}static fromSQL(e,n={}){const[o,s]=ez(e);return Wp(o,s,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new Ca("need to specify a reason the DateTime is invalid");const o=e instanceof ts?e:new ts(e,n);if(Ii.throwOnInvalid)throw new k4(o);return new wr({invalid:o})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const o=CS(e,Dn.fromObject(n));return o?o.map(s=>s?s.val:null).join(""):null}static expandFormat(e,n={}){return IS(mo.parseFormat(e),Dn.fromObject(n)).map(s=>s.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?A0(this).weekYear:NaN}get weekNumber(){return this.isValid?A0(this).weekNumber:NaN}get weekday(){return this.isValid?A0(this).weekday:NaN}get ordinal(){return this.isValid?O0(this.c).ordinal:NaN}get monthShort(){return this.isValid?Uy.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Uy.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Uy.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Uy.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,o=Ry(this.c),s=this.zone.offset(o-e),h=this.zone.offset(o+e),a=this.zone.offset(o-s*n),m=this.zone.offset(o-h*n);if(a===m)return[this];const g=o-a*n,b=o-m*n,T=$y(g,a),M=$y(b,m);return T.hour===M.hour&&T.minute===M.minute&&T.second===M.second&&T.millisecond===M.millisecond?[Mc(this,{ts:g}),Mc(this,{ts:b})]:[this]}get isInLeapYear(){return Up(this.year)}get daysInMonth(){return Ny(this.year,this.month)}get daysInYear(){return this.isValid?jp(this.year):NaN}get weeksInWeekYear(){return this.isValid?zy(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:o,calendar:s}=mo.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:o,outputCalendar:s}}toUTC(e=0,n={}){return this.setZone(Ro.instance(e),n)}toLocal(){return this.setZone(Ii.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:o=!1}={}){if(e=_u(e,Ii.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(n||o){const h=e.offset(this.ts),a=this.toObject();[s]=qy(a,h,e)}return Mc(this,{ts:s,zone:e})}else return wr.invalid(Gy(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:o}={}){const s=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:o});return Mc(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=By(e,qS),o=!Hr(n.weekYear)||!Hr(n.weekNumber)||!Hr(n.weekday),s=!Hr(n.ordinal),h=!Hr(n.year),a=!Hr(n.month)||!Hr(n.day),m=h||a,g=n.weekYear||n.weekNumber;if((m||s)&&g)throw new Fp("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&s)throw new Fp("Can't mix ordinal dates with month/day");let b;o?b=NS({...I0(this.c),...n}):Hr(n.ordinal)?(b={...this.toObject(),...n},Hr(n.day)&&(b.day=Math.min(Ny(b.year,b.month),b.day))):b=RS({...O0(this.c),...n});const[T,M]=qy(b,this.o,this.zone);return Mc(this,{ts:T,o:M})}plus(e){if(!this.isValid)return this;const n=Xr.fromDurationLike(e);return Mc(this,US(this,n))}minus(e){if(!this.isValid)return this;const n=Xr.fromDurationLike(e).negate();return Mc(this,US(this,n))}startOf(e){if(!this.isValid)return this;const n={},o=Xr.normalizeUnit(e);switch(o){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(o==="weeks"&&(n.weekday=1),o==="quarters"){const s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,n={}){return this.isValid?mo.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):C0}toLocaleString(e=Cy,n={}){return this.isValid?mo.create(this.loc.clone(n),e).formatDateTime(this):C0}toLocaleParts(e={}){return this.isValid?mo.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:o=!1,includeOffset:s=!0,extendedZone:h=!1}={}){if(!this.isValid)return null;const a=e==="extended";let m=P0(this,a);return m+="T",m+=jS(this,a,n,o,s,h),m}toISODate({format:e="extended"}={}){return this.isValid?P0(this,e==="extended"):null}toISOWeekDate(){return Wy(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:o=!0,includePrefix:s=!1,extendedZone:h=!1,format:a="extended"}={}){return this.isValid?(s?"T":"")+jS(this,a==="extended",n,e,o,h):null}toRFC2822(){return Wy(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Wy(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?P0(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:o=!0}={}){let s="HH:mm:ss.SSS";return(n||e)&&(o&&(s+=" "),n?s+="z":e&&(s+="ZZ")),Wy(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():C0}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",o={}){if(!this.isValid||!e.isValid)return Xr.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...o},h=r5(n).map(Xr.normalizeUnit),a=e.valueOf()>this.valueOf(),m=a?this:e,g=a?e:this,b=sz(m,g,h,s);return a?b.negate():b}diffNow(e="milliseconds",n={}){return this.diff(wr.now(),e,n)}until(e){return this.isValid?si.fromDateTimes(this,e):this}hasSame(e,n){if(!this.isValid)return!1;const o=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n)<=o&&o<=s.endOf(n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||wr.fromObject({},{zone:this.zone}),o=e.padding?this<n?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],h=e.unit;return Array.isArray(e.unit)&&(s=e.unit,h=void 0),HS(n,this.plus(o),{...e,numeric:"always",units:s,unit:h})}toRelativeCalendar(e={}){return this.isValid?HS(e.base||wr.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(wr.isDateTime))throw new Ca("min requires all arguments be DateTimes");return JE(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(wr.isDateTime))throw new Ca("max requires all arguments be DateTimes");return JE(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,o={}){const{locale:s=null,numberingSystem:h=null}=o,a=Dn.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0});return OS(a,e,n)}static fromStringExplain(e,n,o={}){return wr.fromFormatExplain(e,n,o)}static get DATE_SHORT(){return Cy}static get DATE_MED(){return SE}static get DATE_MED_WITH_WEEKDAY(){return N4}static get DATE_FULL(){return TE}static get DATE_HUGE(){return ME}static get TIME_SIMPLE(){return IE}static get TIME_WITH_SECONDS(){return OE}static get TIME_WITH_SHORT_OFFSET(){return CE}static get TIME_WITH_LONG_OFFSET(){return AE}static get TIME_24_SIMPLE(){return PE}static get TIME_24_WITH_SECONDS(){return kE}static get TIME_24_WITH_SHORT_OFFSET(){return LE}static get TIME_24_WITH_LONG_OFFSET(){return DE}static get DATETIME_SHORT(){return NE}static get DATETIME_SHORT_WITH_SECONDS(){return RE}static get DATETIME_MED(){return zE}static get DATETIME_MED_WITH_SECONDS(){return FE}static get DATETIME_MED_WITH_WEEKDAY(){return R4}static get DATETIME_FULL(){return BE}static get DATETIME_FULL_WITH_SECONDS(){return VE}static get DATETIME_HUGE(){return UE}static get DATETIME_HUGE_WITH_SECONDS(){return jE}}function Hp(t){if(wr.isDateTime(t))return t;if(t&&t.valueOf&&Ec(t.valueOf()))return wr.fromJSDate(t);if(t&&typeof t=="object")return wr.fromObject(t);throw new Ca(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const XS=[0,1,0,0];function KS(t,e="second",n,o){const{t:s}=En(),h=new Date(t).toISOString(),a={year:s("yyyy"),month:s("M/yyyy"),day:s("M/d/yyyy"),second:s("M/d/yyyy HH:mm:ss")},g=(n?{year:"yyyy",month:"yyyy-MM",day:"yyyy-MM-dd",second:void 0}:a)[e];return g?wr.fromISO(h).toFormat(`${o?"UTC:":""}${g}`):h.replace(/\.\d{3}/,"")}function k0(t){return new Date(t).toISOString().split(".")[0]+"Z"}function L0(t){return wr.fromISO(t).toFormat("yyyy-MM-dd")}function Oz(t,e){return t<=e.minValue?e.minValue:t>=e.maxValue?e.maxValue:e.timeValueList?Cz(t,e):Az(t,e)}function Cz(t,e){var g;const n=(g=e.timeValueList)!=null?g:[];let o,s=0,h=n.length-1;for(;h-s>1;)o=Math.floor((s+h)/2),n[o]>=t?h=o:s=o;const a=Math.abs(n[s]-t),m=Math.abs(n[h]-t);return n[a<m?s:h]}function Az(t,e){var g;const n=(g=e.timeInterval)!=null?g:XS,o=new Date(t).getTime(),s=new Date(e.minValue),h=e.maxValue;let a=e.minValue,m=Math.abs(o-a);for(let b=1;;b++){const T=new Date(s.getTime());if(T.setFullYear(s.getFullYear()+b*n[0]),T.setMonth(s.getMonth()+b*n[1],s.getDate()+b*n[2]),T.setSeconds(s.getSeconds()+b*n[3]),T.getTime()>h)break;const M=Math.abs(o-T.getTime());if(M<=m)a=T.getTime(),m=M;else break}return a}const li=_c("map",()=>{const t=ka(),e=vr({}),n=Ln([]),o=Ln([]),s=vr(!1),h=vr(!1),a=vr(void 0);function m(X){a.value=X}function g(...X){n.value=[...new Set([...n.value,...X])]}function b(...X){o.value=[...new Set([...o.value,...X])]}function T(...X){n.value=n.value.filter(ue=>X.indexOf(ue.id)===-1),o.value=o.value.filter(ue=>X.indexOf(ue.id)===-1)}function M(){n.value=[]}function I(X){var ue;return!!((ue=n.value)!=null&&ue.find(he=>he.id===X))}function P(X,ue=!1){var ve;const he=ue?o:n;he.value=[...((ve=he.value)==null?void 0:ve.sort((ze,Fe)=>X.indexOf(ze.id)-X.indexOf(Fe.id)))||[]]}function z(X,ue){n.value=n.value.map(he=>he.id===X?{...he,opacity:ue,previousOpacity:he.opacity}:he)}function V(X,ue,he){n.value=n.value.map(ve=>{if(ve.id===X){const ze={...ve,currentTimeMinValue:ue?k0(ue):void 0,currentTimeMaxValue:he?k0(he):void 0};return ze.type==="WMTS"&&(ze.name=t.getLayerCurrentLabel(ze)),ze}return ve})}function W(X){s.value=X}function Y(X){h.value=X}return{map:e,layers:n,layers3d:o,is3dActive:s,is3dMesh:h,bgLayer:a,addLayers:g,add3dLayers:b,removeLayers:T,removeAllLayers:M,reorderLayers:P,setLayerOpacity:z,setLayerTime:V,setBgLayer:m,setIs3dActive:W,setIs3dMesh:Y,hasLayer:I}}),Pz="root_3d",kz=-222,yo=_c("config",()=>{const t=Ln(),e=vr("main"),n=ar(()=>{var g;return(g=t.value)==null?void 0:g.themes}),o=ar(()=>{var g;return(g=n.value)==null?void 0:g.find(b=>b.name===e.value)}),s=ar(()=>{var g;return((g=t.value)==null?void 0:g.background_layers)||[]}),h=ar(()=>{var b;const g=(b=n.value)==null?void 0:b.filter(T=>{var M;return((M=T.metadata)==null?void 0:M.ol3d_type)!==void 0});if(!!g)return{name:Pz,id:kz,children:g.flatMap(T=>T!=null&&T.children?T.children:T),metadata:{}}});function a(g){t.value=g}function m(g){e.value=g}return{config:t,themes:n,themeName:e,theme:o,bgLayers:s,layerTrees_3d:h,setTheme:m,setThemes:a}},{});function wu(){function t(m,g){return n(m,void 0,g)}function e(m,g){return n(void 0,m,g)}function n(m,g,b){const{theme:T}=yo();if(b=b||T,m&&(b==null?void 0:b.id)===m||g&&(b==null?void 0:b.name)===g)return b;if(b!=null&&b.children)for(const M of b.children){const I=n(m,g,M);if(I)return I}}function o(m){const{layerTrees_3d:g}=yo();return n(m,void 0,g)}function s(m){const{bgLayers:g}=yo();return g.find(b=>b.id===m)}function h(m){const{bgLayers:g}=yo();return g.find(b=>b.name===m)}function a(m){const{setTheme:g}=yo();g(m)}return{findById:t,findByName:e,find3dLayerById:o,findBgLayerById:s,findBgLayerByName:h,setTheme:a}}const YS=wu();function ka(){function t(g,b){try{const T=JSON.parse(g).concat(JSON.parse(b));return new Set(T).size<T.length}catch{return!1}}function e(g){var b,T;return g.opacity=g.previousOpacity=(T=(b=g.metadata)==null?void 0:b.start_opacity)!=null?T:1,n(g),g}function n(g){var T,M,I,P,z,V,W;g.currentTimeMinValue||(g.currentTimeMinValue=(I=(T=g.time)==null?void 0:T.minDefValue)!=null?I:(M=g.time)==null?void 0:M.minValue);const b=((P=g.time)==null?void 0:P.mode)===gl.RANGE;!g.currentTimeMaxValue&&b&&(g.currentTimeMaxValue=(W=(z=g.time)==null?void 0:z.maxDefValue)!=null?W:(V=g.time)==null?void 0:V.maxValue)}function o(g){var M,I,P;const b=s(g);let T=g.name;return b&&(T=(P=(I=(M=g.metadata)==null?void 0:M.time_layers)==null?void 0:I[b])!=null?P:T),T}function s(g){return[g.currentTimeMinValue,...g.currentTimeMaxValue?[g.currentTimeMaxValue]:[]].join(A4)}function h(g){var I,P;const b=by();if(!((I=g.metadata)!=null&&I.exclusion))return;const T=li(),M=T.layers.filter(z=>{var V,W;return t((V=g==null?void 0:g.metadata)==null?void 0:V.exclusion,(W=z==null?void 0:z.metadata)==null?void 0:W.exclusion)});M.length>0&&(T.removeLayers(...M.map(z=>z.id)),b.addNotification(Gn.t("The layer <b>{{layersToRemove}}</b> has been removed because it cannot be displayed while the layer <b>{{layer}}</b> is displayed",{count:M.length,layersToRemove:M.map(z=>Gn.t(z.name,{ns:"client"})).join(", "),layer:Gn.t(g.name,{ns:"client"}),ns:"client"}),Lp.WARNING)),g.id!==((P=T.bgLayer)==null?void 0:P.id)&&a(g)}function a(g){var M,I,P;const b=li(),T=by();t((M=g.metadata)==null?void 0:M.exclusion,(P=(I=b.bgLayer)==null?void 0:I.metadata)==null?void 0:P.exclusion)&&(b.setBgLayer(null),T.addNotification(Gn.t("Background has been deactivated because the layer {{layer}} cannot be displayed on top of it.",{layer:Gn.t(g.name,{ns:"client"}),ns:"client"}),Lp.WARNING))}function m(g,b=!0,T){var V;const M=yo(),I=li(),P=T?M.layerTrees_3d:M.theme,z=YS.findById(g,P);if(z){const W=((V=z.metadata)==null?void 0:V.linked_layers)||[];b===!1?I.removeLayers(z.id,...W):(h(z),(T?I.add3dLayers:I.addLayers)(e(z),...W.map(X=>e(YS.findById(parseInt(X,10))))))}}return{initLayer:e,getLayerCurrentLabel:o,getLayerCurrentTime:s,handleExclusionLayers:h,toggleLayer:m}}class Lz{styleSerialToStyle(e){return e?JSON.parse(decodeURIComponent(e))||[]:[]}styleLocalStorageToStyle(e){return e?JSON.parse(e).medium||[]:[]}styleToSerial(e){return e&&e.length>0?JSON.stringify(e):""}styleToLocalStorage(e){return e&&e.length>0?JSON.stringify({medium:e}):""}}const Hy=new Lz;function JS(t,e){let n;return(...o)=>{clearTimeout(n),n=setTimeout(()=>{t.apply(o)},e)}}function $h(t){return(t==null?void 0:t.trim())&&!isNaN(Number(t))?Number(t):void 0}function Dz(t,e){return(t==null?void 0:t.split(e).map(n=>n!==null&&!isNaN(Number(n))?parseFloat(n):void 0))||[]}function Nz(t,e){return(t==null?void 0:t.split(e).map(D0))||[]}function D0(t){return(t==null?void 0:t.trim())==="true"?!0:(t==null?void 0:t.trim())==="false"?!1:void 0}function QS(){return window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches}const Zp="ipv6",Xp="applogin",Kp="localforage",qh="debug",Zy="fid",Eu="lang",Xy="layersOpen",Ky="address",N0="version",Rz="map_id",eT="layers",tT="bgLayer",rT="opacities",Yp="theme",nT="time",iT="zoom",zz="SRS",oT="X",aT="Y",Yy="serial",sT=["basemap_2015_global","topogr_global","topo_bw_jpeg"],R0="lc",z0="sliderRatio",lT="bgOpacity",Fz="layers_indices",uT="layers_opacity",cT="layers_visibility";var to=(t=>(t[t.localStorage=0]="localStorage",t[t.permalink=1]="permalink",t[t.permalinkAsPath=2]="permalinkAsPath",t[t.permalinkAndLocalStorage=3]="permalinkAndLocalStorage",t))(to||{});class hT{}class Jy extends hT{static processRules(e){return Jy.ruleUseLocalStorage(e)?to.localStorage:to.permalink}static processRulesForKey(e,n){if(e===Yp&&{}.VITE_DEPLOY_GHPAGES!=="true")return to.permalinkAsPath;if(sT.includes(e))return to.localStorage;if(e===Yy)return to.permalink;if(e===Xy)return to.localStorage}static ruleUseLocalStorage(e){return[Bz,Vz,Uz].reduce((n,o)=>n||o(e),!1)}}const Bz=t=>Object.keys(t).length===0,Vz=t=>Object.keys(t).length===1&&(t.hasOwnProperty(Zp)||t.hasOwnProperty(Xp)||t.hasOwnProperty(Kp)),Uz=t=>Object.keys(t).length===3&&t.hasOwnProperty(Zp)&&t.hasOwnProperty(Xp)&&t.hasOwnProperty(Kp);class Qy extends hT{static processRules(){return to.permalinkAndLocalStorage}static processRulesForKey(e,n){if(Qy.ruleUsePermalink(e))return to.permalink;if(e===Xy||sT.includes(e))return to.localStorage;if(e===Yy)return to.permalink;if(e===Yp)return to.permalinkAsPath}static ruleUsePermalink(e){return[jz,Gz,$z].reduce((n,o)=>n||o(e),!1)}}const jz=t=>t===R0||t===z0,Gz=t=>t===N0,$z=t=>t===Yp&&{}.VITE_DEPLOY_GHPAGES==="true";class fT{constructor(){Ti(this,"snappedUrl");this.snappedUrl=new URL(window.location.toString())}get length(){throw new Error("Method not implemented.")}clear(){throw new Error("Method not implemented.")}key(e){throw new Error("Method key() not implemented. "+e)}getSnappedUrl(){return this.snappedUrl}getSnappedParamsAsObj(){return this.getSnappedParams().reduce((e,n)=>{const[o,s]=n.split("=");return{...e,[o]:s}},{})}getSnappedParams(){return this.getSnappedUrl().search.replace("?","").split("&").filter(e=>e.split("=")[1])}setItem(e,n){const o=new URLSearchParams(new URL(window.location.toString()).search);o.set(encodeURIComponent(e),encodeURIComponent(n));try{window.history.replaceState(null,"","?"+o.toString())}catch{}}getItem(e){const n=this.getSnappedUrl().searchParams.get(e);return n!==null?decodeURIComponent(n):n}removeItem(e){const n=new URLSearchParams(new URL(window.location.toString()).search);n.delete(e);try{window.history.replaceState(null,"","?"+n.toString())}catch{}}encodeQueryParam(e,n){return`${encodeURIComponent(e)}=${encodeURIComponent(n)}`}}const F0=new fT;class qz extends fT{getItem(e){const n=this.getSnappedUrl().pathname.split("/"),o=n.findIndex(s=>s===e);return n[o+1]}setItem(e,n){const o=new URL(window.location.toString()).search,s=`/${e}/${n}${o}`;try{window.history.replaceState(null,"",s)}catch{}}}const Wz=new qz;class Hz{get length(){throw new Error("Method not implemented.")}clear(){throw new Error("Method not implemented.")}key(e){throw new Error("Method key() not implemented. "+e)}removeItem(e){const n=this.getWriteStorages(e);n==null||n.map(o=>o.removeItem(e))}setItem(e,n){this.setValue(e,n)}getItem(e){return this.getValue(e)}get paramKeys(){return F0.getSnappedParamsAsObj()}getValue(e){var s;const n=(s=this.correspondingStorages(Jy.processRules(this.paramKeys)))==null?void 0:s.pop(),o=this.storageForKey(e,Jy,n);return o?o.getItem(e):null}setValue(e,n){const o=this.getWriteStorages(e);o==null||o.map(s=>s.setItem(e,n))}getWriteStorages(e){const n=this.correspondingStorages(Qy.processRules()),o=this.storageForKey(e,Qy);return o?[o]:n}storageForKey(e,n,o){var h;const s=(h=this.correspondingStorages(n.processRulesForKey(e,this.paramKeys)))==null?void 0:h.pop();return s!=null?s:o}correspondingStorages(e){if(e===to.permalinkAndLocalStorage)return[F0,localStorage];if(e===to.localStorage)return[localStorage];if(e===to.permalink)return[F0];if(e===to.permalinkAsPath)return[Wz]}}const eg=new Hz;function Zz(t){return Xz(t)||Kz(t)||Yz(t)||Jz(t)}const Xz=t=>Object.keys(t).length===0,Kz=t=>{const e=Object.keys(t);return Object.keys(t).length===1&&[Zp,Xp,Kp,Zy,Eu,Ky,qh].some(n=>e.indexOf(n)!==-1)},Yz=t=>{const e=Object.keys(t),n=s=>e.indexOf(s)!==-1,o=[[Xp,Kp],[qh,Zy],[Eu,Zy],[qh,Eu],[qh,Ky],[Eu,Ky]];return Object.keys(t).length===2&&o.reduce((s,h)=>s||h.every(n),!1)},Jz=t=>{const e=Object.keys(t),n=a=>e.indexOf(a)!==-1,o=[Zp,Xp,Kp].every(n),s=[qh,Zy,Eu].every(n),h=[qh,Ky,Eu].every(n);return Object.keys(t).length===3&&(o||s||h)};class Qz{constructor(){Ti(this,"intialVersion");const e=eg.paramKeys,n=this.getValue(N0,$h);this.intialVersion=n?Math.max(2,Math.min(n,3)):Zz(e)?3:2,this.setValue(N0,3)}getInitialVersion(){return this.intialVersion}mapToEntity(e,n){return n?n(e):e}mapToStorage(e,n){return n?n(e):String(e)}getValue(e,n){return this.mapToEntity(eg.getValue(e),n)}setValue(e,n,o){eg.setValue(e,this.mapToStorage(n,o))}removeItem(e){eg.removeItem(e)}}const Or=new Qz,e6=["line","fill","symbol","fill-extrusion","background","hillshade"],is=()=>({bg_layers:[{icon_id:"route",vector_id:"roadmap",simple_style_class:"road",medium_style_class:"road",expert_style_class:"maputnik",id:556,is_default:!0},{icon_id:"topo",vector_id:"topomap",medium_style_class:"topo",expert_style_class:"maputnik",id:529},{icon_id:"topo_bw",vector_id:"topomap_gray",medium_style_class:"topo",expert_style_class:"maputnik",id:502},{icon_id:"ortho",id:530},{icon_id:"hybrid",id:501},{icon_id:"blank",id:0}],bg_layer_theme_defaults:{tourisme:502},simple_styles:{road:[{unlocalized_label:"Light grey",hillshade:!1,colors:["#ffffff","#ffffff","#d6e0d7","#e1e1e1","#cccccc","#f2f2f2"],selected:!1},{unlocalized_label:"Dark grey",hillshade:!1,colors:["#808080","#808080","#494b4a","#505052","#232426","#454545"],selected:!1},{unlocalized_label:"Dark sand",hillshade:!1,colors:["#9e9375","#9e9375","#6b6249","#403928","#b8aa84","#1a1814"],selected:!1},{unlocalized_label:"Kids",hillshade:!1,colors:["#f9c50d","#ffffff","#839836","#d6d3ce","#2a5ba8","#eeeeee"],selected:!1},{unlocalized_label:"Light mauve",hillshade:!1,colors:["#f3edf5","#f3edf5","#9d7da8","#caa9d1","#613b5c","#e5d3e6"],selected:!1},{unlocalized_label:"Light Blue",hillshade:!1,colors:["#dceaf5","#dceaf5","#5598cf","#81b7e3","#3b576e","#b6cde0"],selected:!1}]},medium_default_styles:{road:[{label:"Roads primary",color:"#f7f7f7",lines:["lu_road_trunk_primary","lu_bridge_major","lu_tunnel_major","lu_road_major_motorway"],visible:!0},{label:"Roads secondary",color:"#f7f7f7",lines:["lu_road_minor","lu_road_secondary_tertiary","lu_bridge_minor","lu_road_path","lu_bridge_path","lu_bridge_railway case","lu_bridge_path case"],visible:!0},{label:"Vegetation",color:"#B8D293",opacity:"1",fills:["lu_landcover_wood","lu_landcover_grass","lu_landuse_stadium","lu_landuse_cemetery"],visible:!0},{label:"Buildings",color:"#D6AA85",opacity:"1",fillExtrusions:["lu_building-3d_public","lu_building-3d"],fills:["lu_building","lu_building_public"],lines:["lu_bridge_railway","lu_railway","lu_tunnel_railway"],visible:!0},{label:"Water",color:"#94c1e1",lines:["lu_waterway","lu_waterway_tunnel","lu_waterway_intermittent"],fills:["lu_water"],visible:!0},{label:"Background",color:"#e7e7e7",backgrounds:["background"],visible:!0},{label:"Hillshade",hillshades:["hillshade"],visible:!0}],topo:[{label:"Primary Names",symbols:["lu_place-label_other","lu_place-label_city","lu_place-label_canton","lu_country-label-other","lu_country-label","place_label_other","place_label_city","country_label-other","country_label"],visible:!0},{label:"Secondary Names",symbols:["lu_place-label_isolated","lu_place-label_locality_forest","lu_place-label_locality_lieudit"],visible:!0},{label:"Transport",lines:["lu_tunnel_track-casing","lu_tunnel_major_motorway-casing","lu_tunnel_railway_transit","lu_tunnel_railway","lu_tunnel_railway-hatching","lu_tunnel_path","lu_tunnel_track","lu_tunnel_minor","lu_tunnel_major_motorway","lu_tunnel_secondary_tertiary","lu_tunnel_trunk_primary","lu_road_track-casing","lu_road_minor-casing","lu_road_major_motorway-casing","lu_road_secondary_tertiary-casing","lu_road_trunk_primary-casing","lu_road_pier","lu_road_path","lu_road_track","lu_road_minor","lu_road_major_motorway","lu_road_secondary_tertiary","lu_road_trunk_primary","lu_tram","lu_tram-hatching","lu_railway_transit","lu_railway","lu_railway-hatching","lu_bridge_railway-casing","lu_bridge_track-casing","lu_bridge_path-casing","lu_bridge_minor-casing","lu_bridge_major_motorway-casing","lu_bridge_secondary_tertiary-casing","lu_bridge_trunk_primary-casing","lu_bridge_railway","lu_bridge_path","lu_bridge_track","lu_bridge_minor","lu_bridge_major_motorway","lu_bridge_secondary_tertiary","lu_bridge_trunk_primary","tunnel_track-casing","tunnel_major_motorway-casing","tunnel_railway_transit","tunnel_railway_transit-hatching","tunnel_railway","tunnel_railway-hatching","tunnel_path","tunnel_track","tunnel_minor","tunnel_major_motorway","tunnel_secondary_tertiary","tunnel_trunk_primary","road_track-casing","road_minor-casing","road_major_motorway-casing","road_secondary_tertiary-casing","road_trunk_primary-casing","road_pier","road_path","road_track","road_minor","road_major_motorway","road_secondary_tertiary","road_trunk_primary","railway-transit","railway-transit-hatching","railway","railway-hatching","bridge_railway-casing","bridge_path-casing","bridge_track_casing","bridge_minor-casing","bridge_major_motorway-casing","bridge_secondary_tertiary-casing","bridge_trunk_primary-casing","bridge_railway","bridge_path","bridge_track","bridge_minor","bridge_major_motorway","bridge_secondary_tertiary","bridge_trunk_primary"],symbols:["lu_road_major-label","lu_motorway-shield","lu_road-shield"],visible:!0},{label:"Vegetation",fills:["lu_landuse_stadium","lu_landuse_cemetery","lu_landuse_gras","lu_landuse_park","lu_landuse_park-outline","lu_landuse_vineyard","lu_landuse_orchard","lu_landuse_wood","landcover_grass","landcover_wood"],visible:!0},{label:"Electricity",fills:["lu_power_station","lu_power_pylone"],lines:["lu_power_line","lu_power_station-outline"],symbols:["lu_power_station-label","lu_eolienne"],visible:!0},{label:"Contours and Height Points",lines:["lu_contour-100","lu_contour-50","lu_contour-20","lu_contour-10","lu_contour"],symbols:["lu_contour-label-100","lu_contour-label-20","lu_apex-label"],visible:!0},{label:"Hillshade",hillshades:["lu_hillshade"],visible:!0}]},http_bg_server:"wmts{1-2}",https_bg_server:"wmts{3-4}",bg_wmts_server_path:"mapproxy_4_v3/wmts/{Layer}",bg_wmts_tile_template:"{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}",bg_layer_projection:"EPSG:3857",olcs_extent:[5.31,49.38,6.64,50.21],olcs_extent_projection:"EPSG:3857",bg_layer_resolutions:[156543.033928,78271.516964,39135.758482,19567.879241,9783.9396205,4891.96981025,2445.98490513,1222.99245256,611.496226281,305.748113141,152.87405657,76.4370282852,38.2185141426,19.1092570713,9.55462853565,4.77731426782,2.38865713391,1.19432856696,.597164283478,.298582141739,.1492910708695,.07464553543475],bg_matrix_ids:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21"]});function Ic(){function t(V){const W=new URLSearchParams(document.location.search),Y=W.get("embeddedserver"),X=W.get("embeddedserverprotocol")||"http";return(Y?`${X}://${Y}`:"https://vectortiles.geoportail.lu")+`/styles/${V}/style.json`}function e(V){return`https://vectortiles.geoportail.lu/styles/${V}/{z}/{x}/{y}.png`}function n(V){return/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/gi.test(V)}const o=os();function s(V,W){if(V==null)return;const Y=new Map;o.bgVectorSources.forEach((X,ue)=>{if(ue===V.id){const he={...X,xyz_custom:W};Y.set(ue,he)}else Y.set(ue,X)}),o.setBgVectorSources(Y)}function h(V,W,Y=!1){const X="",ue=t(W),he=e(W),ve={label:V,defaultMapBoxStyle:ue,defaultMapBoxStyleXYZ:he,xyz:he,xyz_custom:X,style:ue},ze=new URLSearchParams(window.location.search).get("serial"),Fe=new URLSearchParams(window.location.search).get("serialLayer");if(ze)n(ze)&&console.log(Fe);else if(!Y)return Promise.resolve(ve);return Promise.resolve(ve)}function a(V){const W=is().medium_default_styles.road;if(V){V.colors.forEach((X,ue)=>{W[ue].color=X});const Y=W.findIndex(X=>X.label==="Hillshade");W[Y].visible=V.hillshade}return W}function m(V,W,Y){if(!V||!W.get(V.id))return;const X=JSON.parse(JSON.stringify(W.get(V.id)));if(!!X&&!(!X||!X.layers))return Y&&Y.forEach(ue=>{X==null||X.layers.forEach((he,ve)=>{for(const ze of e6)if((ue[`${ze}s`]||[]).includes(he.id)){const Pe=Object.assign({},X.layers[ve].paint);ue.color&&(Pe[`${ze}-color`]=ue.color,Pe[`${ze}-opacity`]=1,X.layers[ve].paint=Pe),X.layers[ve].layout=Object.assign({},X.layers[ve].layout,{visibility:ue.visible?"visible":"none"})}})}),X}function g(V,W){if(V===null)return Promise.resolve();{const Y=`${W.get("delete")}?id=${V}`;return fetch(Y).catch(()=>"")}}function b(V,W,Y){return g(W,Y).then(()=>{const X=new FormData,ue=JSON.stringify(V),he=new Blob([ue],{type:"application/json"});X.append("style",he,"style.json");const ve={method:"POST",body:X};return fetch(Y.get("upload")||"",ve).then(ze=>ze.json()).then(ze=>ze.id)})}function T(V,W){if(!W)return;const Y=V.maplibreMap;!Y||(Y.loaded()?Y.setStyle(W):new Promise(X=>Y.once("data",X)).then(()=>Y.setStyle(W)))}function M(V){const W=is().bg_layers.find(Y=>Y.id==(V==null?void 0:V.id));return W==null?void 0:W.vector_id}function I(V){const W=is().bg_layers.find(Y=>Y.id==(V==null?void 0:V.id));return(W==null?void 0:W.vector_id)!==void 0}function P(V){const W=is().bg_layers.find(Y=>Y.id==(V==null?void 0:V.id));return{isEditable:(W==null?void 0:W.vector_id)!==void 0,hasSimpleStyle:(W==null?void 0:W.simple_style_class)!==void 0,hasAdvancedStyle:(W==null?void 0:W.medium_style_class)!==void 0,hasExpertStyle:(W==null?void 0:W.expert_style_class)!==void 0}}function z(V,W){return W.map(Y=>Object.assign(Y,{selected:Y.colors.every((X,ue)=>{var he;return((he=V[ue])==null?void 0:he.color)===X})}))}return{getDefaultMapBoxStyleUrl:t,getDefaultMapBoxStyleXYZ:e,setConfigForLayer:h,getRoadStyleFromSimpleStyle:a,applyDefaultStyle:m,applyConsolidatedStyle:T,getVectorId:M,setCustomStyleSerial:s,unregisterStyle:g,registerStyle:b,checkSelection:z,isLayerStyleEditable:I,getStyleCapabilitiesFromLayer:P}}const os=_c("style",()=>{const t=Ic(),e=Ln(),n=Ln(new Map),o=Ln(new Map),s=Ln(!1),h=Ln(null),a=Ln(),m=Ln(new Map([["get","/getvtstyle"],["upload","/uploadvtstyle"],["delete","/deletevtstyle"]])),g=[];is().bg_layers.forEach(Y=>{if(Y.vector_id){const X=t.setConfigForLayer(Y.icon_id,Y.vector_id);g.push(X.then(ue=>({id:Y.id,config:ue})))}}),Promise.all(g).then(Y=>{const X=new Map;Y.forEach(ue=>X.set(ue.id,ue.config)),n.value=X});function b(Y,X){m.value.set(Y,X)}function T(Y){n.value=Y}function M(Y){const X=new Map;o.value.forEach((ue,he)=>{he!==Y&&X.set(he,ue)}),o.value=X}function I(Y,X){const ue=new Map;o.value.forEach((he,ve)=>ue.set(ve,he)),ue.set(Y,X),o.value=ue}function P(Y){e.value=t.getRoadStyleFromSimpleStyle(Y),V()}function z(Y){e.value=Y,V()}function V(){s.value=!1}function W(){s.value=!0}return{bgStyle:e,bgVectorSources:n,bgVectorBaseStyles:o,isExpertStyleActive:s,appliedStyle:a,removeBaseStyle:M,setBaseStyle:I,setBgVectorSources:T,setRegisterUrl:b,setSimpleStyle:P,setStyle:z,disableExpertStyle:V,enableExpertStyle:W,styleSerial:h,registerUrls:m}},{});class t6{constructor(){Ti(this,"styleWatcher")}bootstrapStyle(){const e=os();let n,o=!1;n=la(()=>{e.bgVectorSources&&(this.restoreStyle(!1),o&&this.persistStyle(),o=!0,n&&n())})}persistStyle(){const e=os(),{bgStyle:n}=cn(e);this.styleWatcher||(this.styleWatcher=Tn(n,(o,s)=>{if(s!==o){const h=li();h.bgLayer&&(Or.setValue(h.bgLayer.name,o||[],Hy.styleToLocalStorage),Or.setValue(Yy,o||[],Hy.styleToSerial))}},{immediate:!0}))}restoreStyle(e){const n=os();n.setStyle(null);const s=li().bgLayer;if(s){let h=[];e||(h=Or.getValue(Yy,Hy.styleSerialToStyle)),h.length===0&&(h=Or.getValue(s.name,Hy.styleLocalStorageToStyle)),h&&h.length>0&&n.setStyle(h)}}}const B0=new t6,r6="https://map.geoportail.lu/ogcproxywms",pT="https://map.geoportail.lu/httpsproxy";function dT(){return Mi.transformExtent([5.31,49.38,6.64,50.21],Z2,Dp)}function mT(t){var e;return!!((e=t==null?void 0:t.metadata)!=null&&e.hasRetina)&&QS()}function n6(t,e="https"){const n=t.imageType.split("/")[1],o=Or.getValue(Zp,D0)?"app.geoportail.lu":"geoportail.lu";return`${e==="https"?"//wmts{3-4}.":"//wmts{1-2}."}${o}/mapproxy_4_v3/wmts/{Layer}${mT(t)?"_hd":""}/{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}.${n}`}class i6{createOlLayer(e){const{name:n,layers:o,imageType:s,url:h,id:a}=e,m=new bx.default({url:h||r6,hidpi:QS(),serverType:"mapserver",params:{FORMAT:s,LAYERS:o},...h!=null||pT?{crossOrigin:"anonymous"}:{}});return new kO.default({properties:{"olcs.extent":dT(),label:n,id:a},source:m})}setLayerTime(e,n){const o=e.getParams();o.TIME=n,e.updateParams(o)}}const yT=new i6,o6=[156543.033928,78271.516964,39135.758482,19567.879241,9783.9396205,4891.96981025,2445.98490513,1222.99245256,611.496226281,305.748113141,152.87405657,76.4370282852,38.2185141426,19.1092570713,9.55462853565,4.77731426782,2.38865713391,1.19432856696,.597164283478,.298582141739,.1492910708695,.07464553543475],a6=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21"];class s6{createOlLayer(e){const{name:n,imageType:o,id:s}=e,h=mT(e),a=Mi.get(Dp),m=a.getExtent(),g=new wx.default({url:n6(e),tilePixelRatio:h?2:1,layer:n,matrixSet:`GLOBAL_WEBMERCATOR_4_V3${h?"_HD":""}`,format:o,requestEncoding:"REST",projection:a,tileGrid:new DO.default({origin:dO.getTopLeft(m),extent:m,resolutions:o6,matrixIds:a6}),style:"default",crossOrigin:"anonymous"});return new LO.default({source:g,properties:{"olcs.extent":dT(),label:n,id:s}})}setLayerTime(e,n,o){const s=e.get("metadata").time_layers[o],h=n.getUrls();if(h){const a=this.transformUrls(h,s);n.setUrls(a),e.set("label",s),e.set("layer_name",s)}}transformUrls(e,n){return e.map(o=>o.replace(/[/][^/]*[/]{TileMatrixSet}/,`/${n}/{TileMatrixSet}`))}}const gT=new s6;var Ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vT={exports:{}};(function(t,e){(function(n,o){t.exports=o()})(Ds,function(){var n,o,s;function h(a,m){if(!n)n=m;else if(!o)o=m;else{var g="var sharedChunk = {}; ("+n+")(sharedChunk); ("+o+")(sharedChunk);",b={};n(b),s=m(b),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"})))}}return h(["exports"],function(a){function m(r,i){return r(i={exports:{}},i.exports),i.exports}var g=b;function b(r,i,l,p){this.cx=3*r,this.bx=3*(l-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(p-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=p,this.p2x=l,this.p2y=p}b.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},b.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},b.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},b.prototype.solveCurveX=function(r,i){var l,p,y,v,x;for(i===void 0&&(i=1e-6),y=r,x=0;x<8;x++){if(v=this.sampleCurveX(y)-r,Math.abs(v)<i)return y;var S=this.sampleCurveDerivativeX(y);if(Math.abs(S)<1e-6)break;y-=v/S}if((y=r)<(l=0))return l;if(y>(p=1))return p;for(;l<p;){if(v=this.sampleCurveX(y),Math.abs(v-r)<i)return y;r>v?l=y:p=y,y=.5*(p-l)+l}return y},b.prototype.solve=function(r,i){return this.sampleCurveY(this.solveCurveX(r,i))};var T=M;function M(r,i){this.x=r,this.y=i}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,i){return this.clone()._rotateAround(r,i)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var i=r.x-this.x,l=r.y-this.y;return i*i+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,i){return Math.atan2(this.x*i-this.y*r,this.x*r+this.y*i)},_matMult:function(r){var i=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=i,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var i=Math.cos(r),l=Math.sin(r),p=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=p,this},_rotateAround:function(r,i){var l=Math.cos(r),p=Math.sin(r),y=i.y+p*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-p*(this.y-i.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},M.convert=function(r){return r instanceof M?r:Array.isArray(r)?new M(r[0],r[1]):r};var I=typeof self<"u"?self:{},P=Math.pow(2,53)-1;function z(r,i,l,p){var y=new g(r,i,l,p);return function(v){return y.solve(v)}}var V=z(.25,.1,.25,1);function W(r,i,l){return Math.min(l,Math.max(i,r))}function Y(r,i,l){var p=l-i,y=((r-i)%p+p)%p+i;return y===i?l:y}function X(r){for(var i=[],l=arguments.length-1;l-- >0;)i[l]=arguments[l+1];for(var p=0,y=i;p<y.length;p+=1){var v=y[p];for(var x in v)r[x]=v[x]}return r}var ue=1;function he(){return ue++}function ve(){return function r(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function ze(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function Fe(r,i){r.forEach(function(l){i[l]&&(i[l]=i[l].bind(i))})}function Pe(r,i){return r.indexOf(i,r.length-i.length)!==-1}function Se(r,i,l){var p={};for(var y in r)p[y]=i.call(l||this,r[y],y,r);return p}function Ie(r,i,l){var p={};for(var y in r)i.call(l||this,r[y],y,r)&&(p[y]=r[y]);return p}function Je(r){return Array.isArray(r)?r.map(Je):typeof r=="object"&&r?Se(r,Je):r}var $e={};function st(r){$e[r]||(typeof console<"u"&&console.warn(r),$e[r]=!0)}function be(r,i,l){return(l.y-r.y)*(i.x-r.x)>(i.y-r.y)*(l.x-r.x)}function Ye(r){for(var i=0,l=0,p=r.length,y=p-1,v=void 0,x=void 0;l<p;y=l++)i+=((x=r[y]).x-(v=r[l]).x)*(v.y+x.y);return i}function ht(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function vt(r){var i={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(p,y,v,x){var S=v||x;return i[y]=!S||S.toLowerCase(),""}),i["max-age"]){var l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i}var kt=null;function rr(r){if(kt==null){var i=r.navigator?r.navigator.userAgent:null;kt=!!r.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return kt}function Nn(r){try{var i=I[r];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}var zr,mr,Jn,Fr,Gi=I.performance&&I.performance.now?I.performance.now.bind(I.performance):Date.now.bind(Date),qr=I.requestAnimationFrame||I.mozRequestAnimationFrame||I.webkitRequestAnimationFrame||I.msRequestAnimationFrame,Lr=I.cancelAnimationFrame||I.mozCancelAnimationFrame||I.webkitCancelAnimationFrame||I.msCancelAnimationFrame,qn={now:Gi,frame:function(r){var i=qr(r);return{cancel:function(){return Lr(i)}}},getImageData:function(r,i){i===void 0&&(i=0);var l=I.document.createElement("canvas"),p=l.getContext("2d");if(!p)throw new Error("failed to create canvas 2d context");return l.width=r.width,l.height=r.height,p.drawImage(r,0,0,r.width,r.height),p.getImageData(-i,-i,r.width+2*i,r.height+2*i)},resolveURL:function(r){return zr||(zr=I.document.createElement("a")),zr.href=r,zr.href},hardwareConcurrency:I.navigator&&I.navigator.hardwareConcurrency||4,get devicePixelRatio(){return I.devicePixelRatio},get prefersReducedMotion(){return!!I.matchMedia&&(mr==null&&(mr=I.matchMedia("(prefers-reduced-motion: reduce)")),mr.matches)}},Mr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Mn={supported:!1,testSupport:function(r){!ci&&Fr&&(Wn?K(r):Jn=r)}},ci=!1,Wn=!1;function K(r){var i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,Fr),r.isContextLost())return;Mn.supported=!0}catch{}r.deleteTexture(i),ci=!0}I.document&&((Fr=I.document.createElement("img")).onload=function(){Jn&&K(Jn),Jn=null,Wn=!0},Fr.onerror=function(){ci=!0,Jn=null},Fr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ye="01",Ne=function(r,i){this._transformRequestFn=r,this._customAccessToken=i,this._createSkuToken()};function qe(r){return r.indexOf("mapbox:")===0}Ne.prototype._createSkuToken=function(){var r=function(){for(var i="",l=0;l<10;l++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ye,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt},Ne.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ne.prototype.transformRequest=function(r,i){return this._transformRequestFn&&this._transformRequestFn(r,i)||{url:r}},Ne.prototype.normalizeStyleURL=function(r,i){if(!qe(r))return r;var l=et(r);return l.path="/styles/v1"+l.path,this._makeAPIURL(l,this._customAccessToken||i)},Ne.prototype.normalizeGlyphsURL=function(r,i){if(!qe(r))return r;var l=et(r);return l.path="/fonts/v1"+l.path,this._makeAPIURL(l,this._customAccessToken||i)},Ne.prototype.normalizeSourceURL=function(r,i){if(!qe(r))return r;var l=et(r);return l.path="/v4/"+l.authority+".json",l.params.push("secure"),this._makeAPIURL(l,this._customAccessToken||i)},Ne.prototype.normalizeSpriteURL=function(r,i,l,p){var y=et(r);return qe(r)?(y.path="/styles/v1"+y.path+"/sprite"+i+l,this._makeAPIURL(y,this._customAccessToken||p)):(y.path+=""+i+l,ut(y))},Ne.prototype.normalizeTileURL=function(r,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!qe(r))return r;var l=et(r);l.path=l.path.replace(/(\.(png|jpg)\d*)(?=$)/,(qn.devicePixelRatio>=2||i===512?"@2x":"")+(Mn.supported?".webp":"$1")),l.path=l.path.replace(/^.+\/v4\//,"/"),l.path="/v4"+l.path;var p=this._customAccessToken||function(y){for(var v=0,x=y;v<x.length;v+=1){var S=x[v].match(/^access_token=(.*)$/);if(S)return S[1]}return null}(l.params)||Mr.ACCESS_TOKEN;return Mr.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&l.params.push("sku="+this._skuToken),this._makeAPIURL(l,p)},Ne.prototype.canonicalizeTileURL=function(r,i){var l=et(r);if(!l.path.match(/(^\/v4\/)/)||!l.path.match(/\.[\w]+$/))return r;var p="mapbox://tiles/";p+=l.path.replace("/v4/","");var y=l.params;return i&&(y=y.filter(function(v){return!v.match(/^access_token=/)})),y.length&&(p+="?"+y.join("&")),p},Ne.prototype.canonicalizeTileset=function(r,i){for(var l=!!i&&qe(i),p=[],y=0,v=r.tiles||[];y<v.length;y+=1){var x=v[y];rt(x)?p.push(this.canonicalizeTileURL(x,l)):p.push(x)}return p},Ne.prototype._makeAPIURL=function(r,i){var l="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",p=et(Mr.API_URL);if(r.protocol=p.protocol,r.authority=p.authority,r.protocol==="http"){var y=r.params.indexOf("secure");y>=0&&r.params.splice(y,1)}if(p.path!=="/"&&(r.path=""+p.path+r.path),!Mr.REQUIRE_ACCESS_TOKEN)return ut(r);if(!(i=i||Mr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+l);if(i[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+l);return r.params=r.params.filter(function(v){return v.indexOf("access_token")===-1}),r.params.push("access_token="+i),ut(r)};var We=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function rt(r){return We.test(r)}var mt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function et(r){var i=r.match(mt);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function ut(r){var i=r.params.length?"?"+r.params.join("&"):"";return r.protocol+"://"+r.authority+r.path+i}function Qe(r){if(!r)return null;var i=r.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(I.atob(i[1]).split("").map(function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var It=function(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};It.prototype.getStorageKey=function(r){var i,l=Qe(Mr.ACCESS_TOKEN);return i=l&&l.u?I.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,function(p,y){return String.fromCharCode(Number("0x"+y))})):Mr.ACCESS_TOKEN||"",r?"mapbox.eventData."+r+":"+i:"mapbox.eventData:"+i},It.prototype.fetchEventData=function(){var r=Nn("localStorage"),i=this.getStorageKey(),l=this.getStorageKey("uuid");if(r)try{var p=I.localStorage.getItem(i);p&&(this.eventData=JSON.parse(p));var y=I.localStorage.getItem(l);y&&(this.anonId=y)}catch{st("Unable to read from LocalStorage")}},It.prototype.saveEventData=function(){var r=Nn("localStorage"),i=this.getStorageKey(),l=this.getStorageKey("uuid");if(r)try{I.localStorage.setItem(l,this.anonId),Object.keys(this.eventData).length>=1&&I.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{st("Unable to write to LocalStorage")}},It.prototype.processRequests=function(r){},It.prototype.postEvent=function(r,i,l,p){var y=this;if(Mr.EVENTS_URL){var v=et(Mr.EVENTS_URL);v.params.push("access_token="+(p||Mr.ACCESS_TOKEN||""));var x={event:this.type,created:new Date(r).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:ye,userId:this.anonId},S=i?X(x,i):x,C={url:ut(v),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=Sn(C,function(A){y.pendingRequest=null,l(A),y.saveEventData(),y.processRequests(p)})}},It.prototype.queueRequest=function(r,i){this.queue.push(r),this.processRequests(i)};var bt,Lt,Gt=function(r){function i(){r.call(this,"map.load"),this.success={},this.skuToken=""}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.postMapLoadEvent=function(l,p,y,v){this.skuToken=y;var x=!(!v&&!Mr.ACCESS_TOKEN),S=Array.isArray(l)&&l.some(function(C){return qe(C)||rt(C)});Mr.EVENTS_URL&&x&&S&&this.queueRequest({id:p,timestamp:Date.now()},v)},i.prototype.processRequests=function(l){var p=this;if(!this.pendingRequest&&this.queue.length!==0){var y=this.queue.shift(),v=y.id,x=y.timestamp;v&&this.success[v]||(this.anonId||this.fetchEventData(),ze(this.anonId)||(this.anonId=ve()),this.postEvent(x,{skuToken:this.skuToken},function(S){S||v&&(p.success[v]=!0)},l))}},i}(It),yr=new(function(r){function i(l){r.call(this,"appUserTurnstile"),this._customAccessToken=l}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.postTurnstileEvent=function(l,p){Mr.EVENTS_URL&&Mr.ACCESS_TOKEN&&Array.isArray(l)&&l.some(function(y){return qe(y)||rt(y)})&&this.queueRequest(Date.now(),p)},i.prototype.processRequests=function(l){var p=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var y=Qe(Mr.ACCESS_TOKEN),v=y?y.u:Mr.ACCESS_TOKEN,x=v!==this.eventData.tokenU;ze(this.anonId)||(this.anonId=ve(),x=!0);var S=this.queue.shift();if(this.eventData.lastSuccess){var C=new Date(this.eventData.lastSuccess),A=new Date(S),L=(S-this.eventData.lastSuccess)/864e5;x=x||L>=1||L<-1||C.getDate()!==A.getDate()}else x=!0;if(!x)return this.processRequests();this.postEvent(S,{"enabled.telemetry":!1},function(D){D||(p.eventData.lastSuccess=S,p.eventData.tokenU=v)},l)}},i}(It)),jr=yr.postTurnstileEvent.bind(yr),Dr=new Gt,Qr=Dr.postMapLoadEvent.bind(Dr),Qn=500,$i=50;function _o(){I.caches&&!bt&&(bt=I.caches.open("mapbox-tiles"))}function ei(r){var i=r.indexOf("?");return i<0?r:r.slice(0,i)}var Ri,In=1/0;function hi(){return Ri==null&&(Ri=I.OffscreenCanvas&&new I.OffscreenCanvas(1,1).getContext("2d")&&typeof I.createImageBitmap=="function"),Ri}var ss={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ss);var Xo=function(r){function i(l,p,y){p===401&&rt(y)&&(l+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),r.call(this,l),this.status=p,this.url=y,this.name=this.constructor.name,this.message=l}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},i}(Error),ls=ht()?function(){return self.worker&&self.worker.referrer}:function(){return(I.location.protocol==="blob:"?I.parent:I).location.href},ma,pn,Fo=function(r,i){if(!(/^file:/.test(l=r.url)||/^file:/.test(ls())&&!/^\w+:/.test(l))){if(I.fetch&&I.Request&&I.AbortController&&I.Request.prototype.hasOwnProperty("signal"))return function(p,y){var v,x=new I.AbortController,S=new I.Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:ls(),signal:x.signal}),C=!1,A=!1,L=(v=S.url).indexOf("sku=")>0&&rt(v);p.type==="json"&&S.headers.set("Accept","application/json");var D=function(j,Q,te){if(!A){if(j&&j.message!=="SecurityError"&&st(j),Q&&te)return B(Q);var ce=Date.now();I.fetch(S).then(function(oe){if(oe.ok){var ge=L?oe.clone():null;return B(oe,ge,ce)}return y(new Xo(oe.statusText,oe.status,p.url))}).catch(function(oe){oe.code!==20&&y(new Error(oe.message))})}},B=function(j,Q,te){(p.type==="arrayBuffer"?j.arrayBuffer():p.type==="json"?j.json():j.text()).then(function(ce){A||(Q&&te&&function(oe,ge,we){if(_o(),bt){var Te={status:ge.status,statusText:ge.statusText,headers:new I.Headers};ge.headers.forEach(function(Be,Xe){return Te.headers.set(Xe,Be)});var Oe=vt(ge.headers.get("Cache-Control")||"");Oe["no-store"]||(Oe["max-age"]&&Te.headers.set("Expires",new Date(we+1e3*Oe["max-age"]).toUTCString()),new Date(Te.headers.get("Expires")).getTime()-we<42e4||function(Be,Xe){if(Lt===void 0)try{new Response(new ReadableStream),Lt=!0}catch{Lt=!1}Lt?Xe(Be.body):Be.blob().then(Xe)}(ge,function(Be){var Xe=new I.Response(Be,Te);_o(),bt&&bt.then(function(ot){return ot.put(ei(oe.url),Xe)}).catch(function(ot){return st(ot.message)})}))}}(S,Q,te),C=!0,y(null,ce,j.headers.get("Cache-Control"),j.headers.get("Expires")))}).catch(function(ce){A||y(new Error(ce.message))})};return L?function(j,Q){if(_o(),!bt)return Q(null);var te=ei(j.url);bt.then(function(ce){ce.match(te).then(function(oe){var ge=function(we){if(!we)return!1;var Te=new Date(we.headers.get("Expires")||0),Oe=vt(we.headers.get("Cache-Control")||"");return Te>Date.now()&&!Oe["no-cache"]}(oe);ce.delete(te),ge&&ce.put(te,oe.clone()),Q(null,oe,ge)}).catch(Q)}).catch(Q)}(S,D):D(null,null),{cancel:function(){A=!0,C||x.abort()}}}(r,i);if(ht()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,i,void 0,!0)}var l;return function(p,y){var v=new I.XMLHttpRequest;for(var x in v.open(p.method||"GET",p.url,!0),p.type==="arrayBuffer"&&(v.responseType="arraybuffer"),p.headers)v.setRequestHeader(x,p.headers[x]);return p.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=p.credentials==="include",v.onerror=function(){y(new Error(v.statusText))},v.onload=function(){if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){var S=v.response;if(p.type==="json")try{S=JSON.parse(v.response)}catch(C){return y(C)}y(null,S,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else y(new Xo(v.statusText,v.status,p.url))},v.send(p.body),{cancel:function(){return v.abort()}}}(r,i)},Ml=function(r,i){return Fo(X(r,{type:"arrayBuffer"}),i)},Sn=function(r,i){return Fo(X(r,{method:"POST"}),i)},N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";ma=[],pn=0;var F=function(r,i){if(Mn.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),pn>=Mr.MAX_PARALLEL_IMAGE_REQUESTS){var l={requestParameters:r,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return ma.push(l),l}pn++;var p=!1,y=function(){if(!p)for(p=!0,pn--;ma.length&&pn<Mr.MAX_PARALLEL_IMAGE_REQUESTS;){var x=ma.shift();x.cancelled||(x.cancel=F(x.requestParameters,x.callback).cancel)}},v=Ml(r,function(x,S,C,A){y(),x?i(x):S&&(hi()?function(L,D){var B=new I.Blob([new Uint8Array(L)],{type:"image/png"});I.createImageBitmap(B).then(function(j){D(null,j)}).catch(function(j){D(new Error("Could not load image because of "+j.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(S,i):function(L,D,B,j){var Q=new I.Image,te=I.URL;Q.onload=function(){D(null,Q),te.revokeObjectURL(Q.src),Q.onload=null,I.requestAnimationFrame(function(){Q.src=N})},Q.onerror=function(){return D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ce=new I.Blob([new Uint8Array(L)],{type:"image/png"});Q.cacheControl=B,Q.expires=j,Q.src=L.byteLength?te.createObjectURL(ce):N}(S,i,C,A))});return{cancel:function(){v.cancel(),y()}}};function U(r,i,l){l[r]&&l[r].indexOf(i)!==-1||(l[r]=l[r]||[],l[r].push(i))}function Z(r,i,l){if(l&&l[r]){var p=l[r].indexOf(i);p!==-1&&l[r].splice(p,1)}}var ee=function(r,i){i===void 0&&(i={}),X(this,i),this.type=r},pe=function(r){function i(l,p){p===void 0&&(p={}),r.call(this,"error",X({error:l},p))}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(ee),de=function(){};de.prototype.on=function(r,i){return this._listeners=this._listeners||{},U(r,i,this._listeners),this},de.prototype.off=function(r,i){return Z(r,i,this._listeners),Z(r,i,this._oneTimeListeners),this},de.prototype.once=function(r,i){return this._oneTimeListeners=this._oneTimeListeners||{},U(r,i,this._oneTimeListeners),this},de.prototype.fire=function(r,i){typeof r=="string"&&(r=new ee(r,i||{}));var l=r.type;if(this.listens(l)){r.target=this;for(var p=0,y=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];p<y.length;p+=1)y[p].call(this,r);for(var v=0,x=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];v<x.length;v+=1){var S=x[v];Z(l,S,this._oneTimeListeners),S.call(this,r)}var C=this._eventedParent;C&&(X(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(r))}else r instanceof pe&&console.error(r.error);return this},de.prototype.listens=function(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)},de.prototype.setEventedParent=function(r,i){return this._eventedParent=r,this._eventedParentData=i,this};var G={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ie=function(r,i,l,p){this.message=(r?r+": ":"")+l,p&&(this.identifier=p),i!=null&&i.__line__&&(this.line=i.__line__)};function _e(r){var i=r.value;return i?[new ie(r.key,i,"constants have been deprecated as of v8")]:[]}function Ge(r){for(var i=[],l=arguments.length-1;l-- >0;)i[l]=arguments[l+1];for(var p=0,y=i;p<y.length;p+=1){var v=y[p];for(var x in v)r[x]=v[x]}return r}function Ze(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Ce(r){if(Array.isArray(r))return r.map(Ce);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var i={};for(var l in r)i[l]=Ce(r[l]);return i}return Ze(r)}var Ue=function(r){function i(l,p){r.call(this,p),this.message=p,this.key=l}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Error),St=function(r,i){i===void 0&&(i=[]),this.parent=r,this.bindings={};for(var l=0,p=i;l<p.length;l+=1){var y=p[l];this.bindings[y[0]]=y[1]}};St.prototype.concat=function(r){return new St(this,r)},St.prototype.get=function(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(r+" not found in scope.")},St.prototype.has=function(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)};var _t={kind:"null"},Le={kind:"number"},pt={kind:"string"},lt={kind:"boolean"},De={kind:"color"},fe={kind:"object"},Ee={kind:"value"},He={kind:"collator"},$t={kind:"formatted"},Ht={kind:"resolvedImage"};function Qt(r,i){return{kind:"array",itemType:r,N:i}}function Xt(r){if(r.kind==="array"){var i=Xt(r.itemType);return typeof r.N=="number"?"array<"+i+", "+r.N+">":r.itemType.kind==="value"?"array":"array<"+i+">"}return r.kind}var ti=[_t,Le,pt,lt,De,$t,fe,Qt(Ee),Ht];function er(r,i){if(i.kind==="error")return null;if(r.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!er(r.itemType,i.itemType))&&(typeof r.N!="number"||r.N===i.N))return null}else{if(r.kind===i.kind)return null;if(r.kind==="value"){for(var l=0,p=ti;l<p.length;l+=1)if(!er(p[l],i))return null}}return"Expected "+Xt(r)+" but found "+Xt(i)+" instead."}function yn(r,i){return i.some(function(l){return l.kind===r.kind})}function Gr(r,i){return i.some(function(l){return l==="null"?r===null:l==="array"?Array.isArray(r):l==="object"?r&&!Array.isArray(r)&&typeof r=="object":l===typeof r})}var _r=m(function(r,i){var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function p(S){return(S=Math.round(S))<0?0:S>255?255:S}function y(S){return p(S[S.length-1]==="%"?parseFloat(S)/100*255:parseInt(S))}function v(S){return(C=S[S.length-1]==="%"?parseFloat(S)/100:parseFloat(S))<0?0:C>1?1:C;var C}function x(S,C,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?S+(C-S)*A*6:2*A<1?C:3*A<2?S+(C-S)*(2/3-A)*6:S}try{i.parseCSSColor=function(S){var C,A=S.replace(/ /g,"").toLowerCase();if(A in l)return l[A].slice();if(A[0]==="#")return A.length===4?(C=parseInt(A.substr(1),16))>=0&&C<=4095?[(3840&C)>>4|(3840&C)>>8,240&C|(240&C)>>4,15&C|(15&C)<<4,1]:null:A.length===7&&(C=parseInt(A.substr(1),16))>=0&&C<=16777215?[(16711680&C)>>16,(65280&C)>>8,255&C,1]:null;var L=A.indexOf("("),D=A.indexOf(")");if(L!==-1&&D+1===A.length){var B=A.substr(0,L),j=A.substr(L+1,D-(L+1)).split(","),Q=1;switch(B){case"rgba":if(j.length!==4)return null;Q=v(j.pop());case"rgb":return j.length!==3?null:[y(j[0]),y(j[1]),y(j[2]),Q];case"hsla":if(j.length!==4)return null;Q=v(j.pop());case"hsl":if(j.length!==3)return null;var te=(parseFloat(j[0])%360+360)%360/360,ce=v(j[1]),oe=v(j[2]),ge=oe<=.5?oe*(ce+1):oe+ce-oe*ce,we=2*oe-ge;return[p(255*x(we,ge,te+1/3)),p(255*x(we,ge,te)),p(255*x(we,ge,te-1/3)),Q];default:return null}}return null}}catch{}}).parseCSSColor,Br=function(r,i,l,p){p===void 0&&(p=1),this.r=r,this.g=i,this.b=l,this.a=p};Br.parse=function(r){if(r){if(r instanceof Br)return r;if(typeof r=="string"){var i=_r(r);if(i)return new Br(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3])}}},Br.prototype.toString=function(){var r=this.toArray(),i=r[1],l=r[2],p=r[3];return"rgba("+Math.round(r[0])+","+Math.round(i)+","+Math.round(l)+","+p+")"},Br.prototype.toArray=function(){var r=this.a;return r===0?[0,0,0,0]:[255*this.r/r,255*this.g/r,255*this.b/r,r]},Br.black=new Br(0,0,0,1),Br.white=new Br(1,1,1,1),Br.transparent=new Br(0,0,0,0),Br.red=new Br(1,0,0,1);var no=function(r,i,l){this.sensitivity=r?i?"variant":"case":i?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};no.prototype.compare=function(r,i){return this.collator.compare(r,i)},no.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Nc=function(r,i,l,p,y){this.text=r,this.image=i,this.scale=l,this.fontStack=p,this.textColor=y},vi=function(r){this.sections=r};vi.fromString=function(r){return new vi([new Nc(r,null,null,null,null)])},vi.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(r){return r.text.length!==0||r.image&&r.image.name.length!==0})},vi.factory=function(r){return r instanceof vi?r:vi.fromString(r)},vi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(r){return r.text}).join("")},vi.prototype.serialize=function(){for(var r=["format"],i=0,l=this.sections;i<l.length;i+=1){var p=l[i];if(p.image)r.push(["image",p.image.name]);else{r.push(p.text);var y={};p.fontStack&&(y["text-font"]=["literal",p.fontStack.split(",")]),p.scale&&(y["font-scale"]=p.scale),p.textColor&&(y["text-color"]=["rgba"].concat(p.textColor.toArray())),r.push(y)}}return r};var io=function(r){this.name=r.name,this.available=r.available};function pd(r,i,l,p){return typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:"Invalid rgba value ["+[r,i,l,p].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof p=="number"?[r,i,l,p]:[r,i,l]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Rc(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Br||r instanceof no||r instanceof vi||r instanceof io)return!0;if(Array.isArray(r)){for(var i=0,l=r;i<l.length;i+=1)if(!Rc(l[i]))return!1;return!0}if(typeof r=="object"){for(var p in r)if(!Rc(r[p]))return!1;return!0}return!1}function Rn(r){if(r===null)return _t;if(typeof r=="string")return pt;if(typeof r=="boolean")return lt;if(typeof r=="number")return Le;if(r instanceof Br)return De;if(r instanceof no)return He;if(r instanceof vi)return $t;if(r instanceof io)return Ht;if(Array.isArray(r)){for(var i,l=r.length,p=0,y=r;p<y.length;p+=1){var v=Rn(y[p]);if(i){if(i===v)continue;i=Ee;break}i=v}return Qt(i||Ee,l)}return fe}function zc(r){var i=typeof r;return r===null?"":i==="string"||i==="number"||i==="boolean"?String(r):r instanceof Br||r instanceof vi||r instanceof io?r.toString():JSON.stringify(r)}io.prototype.toString=function(){return this.name},io.fromString=function(r){return r?new io({name:r,available:!1}):null},io.prototype.serialize=function(){return["image",this.name]};var qi=function(r,i){this.type=r,this.value=i};qi.parse=function(r,i){if(r.length!==2)return i.error("'literal' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(!Rc(r[1]))return i.error("invalid value");var l=r[1],p=Rn(l),y=i.expectedType;return p.kind!=="array"||p.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(p=y),new qi(p,l)},qi.prototype.evaluate=function(){return this.value},qi.prototype.eachChild=function(){},qi.prototype.outputDefined=function(){return!0},qi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Br?["rgba"].concat(this.value.toArray()):this.value instanceof vi?this.value.serialize():this.value};var _i=function(r){this.name="ExpressionEvaluationError",this.message=r};_i.prototype.toJSON=function(){return this.message};var Ko={string:pt,number:Le,boolean:lt,object:fe},gn=function(r,i){this.type=r,this.args=i};gn.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var l,p=1,y=r[0];if(y==="array"){var v,x;if(r.length>2){var S=r[1];if(typeof S!="string"||!(S in Ko)||S==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);v=Ko[S],p++}else v=Ee;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return i.error('The length argument to "array" must be a positive integer literal',2);x=r[2],p++}l=Qt(v,x)}else l=Ko[y];for(var C=[];p<r.length;p++){var A=i.parse(r[p],p,Ee);if(!A)return null;C.push(A)}return new gn(l,C)},gn.prototype.evaluate=function(r){for(var i=0;i<this.args.length;i++){var l=this.args[i].evaluate(r);if(!er(this.type,Rn(l)))return l;if(i===this.args.length-1)throw new _i("Expected value to be of type "+Xt(this.type)+", but found "+Xt(Rn(l))+" instead.")}return null},gn.prototype.eachChild=function(r){this.args.forEach(r)},gn.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},gn.prototype.serialize=function(){var r=this.type,i=[r.kind];if(r.kind==="array"){var l=r.itemType;if(l.kind==="string"||l.kind==="number"||l.kind==="boolean"){i.push(l.kind);var p=r.N;(typeof p=="number"||this.args.length>1)&&i.push(p)}}return i.concat(this.args.map(function(y){return y.serialize()}))};var ya=function(r){this.type=$t,this.sections=r};ya.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var l=r[1];if(!Array.isArray(l)&&typeof l=="object")return i.error("First argument must be an image or text section.");for(var p=[],y=!1,v=1;v<=r.length-1;++v){var x=r[v];if(y&&typeof x=="object"&&!Array.isArray(x)){y=!1;var S=null;if(x["font-scale"]&&!(S=i.parse(x["font-scale"],1,Le)))return null;var C=null;if(x["text-font"]&&!(C=i.parse(x["text-font"],1,Qt(pt))))return null;var A=null;if(x["text-color"]&&!(A=i.parse(x["text-color"],1,De)))return null;var L=p[p.length-1];L.scale=S,L.font=C,L.textColor=A}else{var D=i.parse(r[v],1,Ee);if(!D)return null;var B=D.type.kind;if(B!=="string"&&B!=="value"&&B!=="null"&&B!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,p.push({content:D,scale:null,font:null,textColor:null})}}return new ya(p)},ya.prototype.evaluate=function(r){return new vi(this.sections.map(function(i){var l=i.content.evaluate(r);return Rn(l)===Ht?new Nc("",l,null,null,null):new Nc(zc(l),null,i.scale?i.scale.evaluate(r):null,i.font?i.font.evaluate(r).join(","):null,i.textColor?i.textColor.evaluate(r):null)}))},ya.prototype.eachChild=function(r){for(var i=0,l=this.sections;i<l.length;i+=1){var p=l[i];r(p.content),p.scale&&r(p.scale),p.font&&r(p.font),p.textColor&&r(p.textColor)}},ya.prototype.outputDefined=function(){return!1},ya.prototype.serialize=function(){for(var r=["format"],i=0,l=this.sections;i<l.length;i+=1){var p=l[i];r.push(p.content.serialize());var y={};p.scale&&(y["font-scale"]=p.scale.serialize()),p.font&&(y["text-font"]=p.font.serialize()),p.textColor&&(y["text-color"]=p.textColor.serialize()),r.push(y)}return r};var Bo=function(r){this.type=Ht,this.input=r};Bo.parse=function(r,i){if(r.length!==2)return i.error("Expected two arguments.");var l=i.parse(r[1],1,pt);return l?new Bo(l):i.error("No image name provided.")},Bo.prototype.evaluate=function(r){var i=this.input.evaluate(r),l=io.fromString(i);return l&&r.availableImages&&(l.available=r.availableImages.indexOf(i)>-1),l},Bo.prototype.eachChild=function(r){r(this.input)},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){return["image",this.input.serialize()]};var Pg={"to-boolean":lt,"to-color":De,"to-number":Le,"to-string":pt},Yo=function(r,i){this.type=r,this.args=i};Yo.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var l=r[0];if((l==="to-boolean"||l==="to-string")&&r.length!==2)return i.error("Expected one argument.");for(var p=Pg[l],y=[],v=1;v<r.length;v++){var x=i.parse(r[v],v,Ee);if(!x)return null;y.push(x)}return new Yo(p,y)},Yo.prototype.evaluate=function(r){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(r));if(this.type.kind==="color"){for(var i,l,p=0,y=this.args;p<y.length;p+=1){if(l=null,(i=y[p].evaluate(r))instanceof Br)return i;if(typeof i=="string"){var v=r.parseColor(i);if(v)return v}else if(Array.isArray(i)&&!(l=i.length<3||i.length>4?"Invalid rbga value "+JSON.stringify(i)+": expected an array containing either three or four numeric values.":pd(i[0],i[1],i[2],i[3])))return new Br(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new _i(l||"Could not parse color from value '"+(typeof i=="string"?i:String(JSON.stringify(i)))+"'")}if(this.type.kind==="number"){for(var x=null,S=0,C=this.args;S<C.length;S+=1){if((x=C[S].evaluate(r))===null)return 0;var A=Number(x);if(!isNaN(A))return A}throw new _i("Could not convert "+JSON.stringify(x)+" to number.")}return this.type.kind==="formatted"?vi.fromString(zc(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?io.fromString(zc(this.args[0].evaluate(r))):zc(this.args[0].evaluate(r))},Yo.prototype.eachChild=function(r){this.args.forEach(r)},Yo.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},Yo.prototype.serialize=function(){if(this.type.kind==="formatted")return new ya([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Bo(this.args[0]).serialize();var r=["to-"+this.type.kind];return this.eachChild(function(i){r.push(i.serialize())}),r};var C1=["Unknown","Point","LineString","Polygon"],us=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};us.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},us.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?C1[this.feature.type]:this.feature.type:null},us.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},us.prototype.canonicalID=function(){return this.canonical},us.prototype.properties=function(){return this.feature&&this.feature.properties||{}},us.prototype.parseColor=function(r){var i=this._parseColorCache[r];return i||(i=this._parseColorCache[r]=Br.parse(r)),i};var Ai=function(r,i,l,p){this.name=r,this.type=i,this._evaluate=l,this.args=p};Ai.prototype.evaluate=function(r){return this._evaluate(r,this.args)},Ai.prototype.eachChild=function(r){this.args.forEach(r)},Ai.prototype.outputDefined=function(){return!1},Ai.prototype.serialize=function(){return[this.name].concat(this.args.map(function(r){return r.serialize()}))},Ai.parse=function(r,i){var l,p=r[0],y=Ai.definitions[p];if(!y)return i.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0);for(var v=Array.isArray(y)?y[0]:y.type,x=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,S=x.filter(function(Rt){var yt=Rt[0];return!Array.isArray(yt)||yt.length===r.length-1}),C=null,A=0,L=S;A<L.length;A+=1){var D=L[A],B=D[0],j=D[1];C=new js(i.registry,i.path,null,i.scope);for(var Q=[],te=!1,ce=1;ce<r.length;ce++){var oe=r[ce],ge=Array.isArray(B)?B[ce-1]:B.type,we=C.parse(oe,1+Q.length,ge);if(!we){te=!0;break}Q.push(we)}if(!te)if(Array.isArray(B)&&B.length!==Q.length)C.error("Expected "+B.length+" arguments, but found "+Q.length+" instead.");else{for(var Te=0;Te<Q.length;Te++){var Oe=Array.isArray(B)?B[Te]:B.type,Be=Q[Te];C.concat(Te+1).checkSubtype(Oe,Be.type)}if(C.errors.length===0)return new Ai(p,v,j,Q)}}if(S.length===1)(l=i.errors).push.apply(l,C.errors);else{for(var Xe=(S.length?S:x).map(function(Rt){var yt;return yt=Rt[0],Array.isArray(yt)?"("+yt.map(Xt).join(", ")+")":"("+Xt(yt.type)+"...)"}).join(" | "),ot=[],Pt=1;Pt<r.length;Pt++){var dt=i.parse(r[Pt],1+ot.length);if(!dt)return null;ot.push(Xt(dt.type))}i.error("Expected arguments of type "+Xe+", but found ("+ot.join(", ")+") instead.")}return null},Ai.register=function(r,i){for(var l in Ai.definitions=i,i)r[l]=Ai};var Na=function(r,i,l){this.type=He,this.locale=l,this.caseSensitive=r,this.diacriticSensitive=i};function Wi(r,i){r[0]=Math.min(r[0],i[0]),r[1]=Math.min(r[1],i[1]),r[2]=Math.max(r[2],i[0]),r[3]=Math.max(r[3],i[1])}function Il(r,i){return!(r[0]<=i[0]||r[2]>=i[2]||r[1]<=i[1]||r[3]>=i[3])}function A1(r,i){var l=(180+r[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,y=Math.pow(2,i.z);return[Math.round(l*y*8192),Math.round(p*y*8192)]}function P1(r,i,l){return i[1]>r[1]!=l[1]>r[1]&&r[0]<(l[0]-i[0])*(r[1]-i[1])/(l[1]-i[1])+i[0]}function dd(r,i){for(var l,p,y,v,x,S,C,A=!1,L=0,D=i.length;L<D;L++)for(var B=i[L],j=0,Q=B.length;j<Q-1;j++){if((v=(l=r)[0]-(p=B[j])[0])*(C=l[1]-(y=B[j+1])[1])-(S=l[0]-y[0])*(x=l[1]-p[1])==0&&v*S<=0&&x*C<=0)return!1;P1(r,B[j],B[j+1])&&(A=!A)}return A}function k1(r,i){for(var l=0;l<i.length;l++)if(dd(r,i[l]))return!0;return!1}function kg(r,i,l,p){var y=p[0]-l[0],v=p[1]-l[1],x=(r[0]-l[0])*v-y*(r[1]-l[1]),S=(i[0]-l[0])*v-y*(i[1]-l[1]);return x>0&&S<0||x<0&&S>0}function L1(r,i,l){for(var p=0,y=l;p<y.length;p+=1)for(var v=y[p],x=0;x<v.length-1;++x)if((D=[(L=v[x+1])[0]-(A=v[x])[0],L[1]-A[1]])[0]*(B=[(C=i)[0]-(S=r)[0],C[1]-S[1]])[1]-D[1]*B[0]!=0&&kg(S,C,A,L)&&kg(A,L,S,C))return!0;var S,C,A,L,D,B;return!1}function Lg(r,i){for(var l=0;l<r.length;++l)if(!dd(r[l],i))return!1;for(var p=0;p<r.length-1;++p)if(L1(r[p],r[p+1],i))return!1;return!0}function Dg(r,i){for(var l=0;l<i.length;l++)if(Lg(r,i[l]))return!0;return!1}function ku(r,i,l){for(var p=[],y=0;y<r.length;y++){for(var v=[],x=0;x<r[y].length;x++){var S=A1(r[y][x],l);Wi(i,S),v.push(S)}p.push(v)}return p}function md(r,i,l){for(var p=[],y=0;y<r.length;y++){var v=ku(r[y],i,l);p.push(v)}return p}function Fc(r,i,l,p){if(r[0]<l[0]||r[0]>l[2]){var y=.5*p,v=r[0]-l[0]>y?-p:l[0]-r[0]>y?p:0;v===0&&(v=r[0]-l[2]>y?-p:l[2]-r[0]>y?p:0),r[0]+=v}Wi(i,r)}function Ng(r,i,l,p){for(var y=8192*Math.pow(2,p.z),v=[8192*p.x,8192*p.y],x=[],S=0,C=r;S<C.length;S+=1)for(var A=0,L=C[S];A<L.length;A+=1){var D=L[A],B=[D.x+v[0],D.y+v[1]];Fc(B,i,l,y),x.push(B)}return x}function Qh(r,i,l,p){for(var y,v=8192*Math.pow(2,p.z),x=[8192*p.x,8192*p.y],S=[],C=0,A=r;C<A.length;C+=1){for(var L=[],D=0,B=A[C];D<B.length;D+=1){var j=B[D],Q=[j.x+x[0],j.y+x[1]];Wi(i,Q),L.push(Q)}S.push(L)}if(i[2]-i[0]<=v/2){(y=i)[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(var te=0,ce=S;te<ce.length;te+=1)for(var oe=0,ge=ce[te];oe<ge.length;oe+=1)Fc(ge[oe],i,l,v)}return S}Na.parse=function(r,i){if(r.length!==2)return i.error("Expected one argument.");var l=r[1];if(typeof l!="object"||Array.isArray(l))return i.error("Collator options argument must be an object.");var p=i.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,lt);if(!p)return null;var y=i.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,lt);if(!y)return null;var v=null;return l.locale&&!(v=i.parse(l.locale,1,pt))?null:new Na(p,y,v)},Na.prototype.evaluate=function(r){return new no(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)},Na.prototype.eachChild=function(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)},Na.prototype.outputDefined=function(){return!1},Na.prototype.serialize=function(){var r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]};var Jo=function(r,i){this.type=lt,this.geojson=r,this.geometries=i};function Bs(r){if(r instanceof Ai&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof Jo)return!1;var i=!0;return r.eachChild(function(l){i&&!Bs(l)&&(i=!1)}),i}function Vs(r){if(r instanceof Ai&&r.name==="feature-state")return!1;var i=!0;return r.eachChild(function(l){i&&!Vs(l)&&(i=!1)}),i}function Ol(r,i){if(r instanceof Ai&&i.indexOf(r.name)>=0)return!1;var l=!0;return r.eachChild(function(p){l&&!Ol(p,i)&&(l=!1)}),l}Jo.parse=function(r,i){if(r.length!==2)return i.error("'within' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(Rc(r[1])){var l=r[1];if(l.type==="FeatureCollection")for(var p=0;p<l.features.length;++p){var y=l.features[p].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Jo(l,l.features[p].geometry)}else if(l.type==="Feature"){var v=l.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Jo(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new Jo(l,l)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Jo.prototype.evaluate=function(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(i,l){var p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],v=i.canonicalID();if(l.type==="Polygon"){var x=ku(l.coordinates,y,v),S=Ng(i.geometry(),p,y,v);if(!Il(p,y))return!1;for(var C=0,A=S;C<A.length;C+=1)if(!dd(A[C],x))return!1}if(l.type==="MultiPolygon"){var L=md(l.coordinates,y,v),D=Ng(i.geometry(),p,y,v);if(!Il(p,y))return!1;for(var B=0,j=D;B<j.length;B+=1)if(!k1(j[B],L))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(i,l){var p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],v=i.canonicalID();if(l.type==="Polygon"){var x=ku(l.coordinates,y,v),S=Qh(i.geometry(),p,y,v);if(!Il(p,y))return!1;for(var C=0,A=S;C<A.length;C+=1)if(!Lg(A[C],x))return!1}if(l.type==="MultiPolygon"){var L=md(l.coordinates,y,v),D=Qh(i.geometry(),p,y,v);if(!Il(p,y))return!1;for(var B=0,j=D;B<j.length;B+=1)if(!Dg(j[B],L))return!1}return!0}(r,this.geometries)}return!1},Jo.prototype.eachChild=function(){},Jo.prototype.outputDefined=function(){return!0},Jo.prototype.serialize=function(){return["within",this.geojson]};var Us=function(r,i){this.type=i.type,this.name=r,this.boundExpression=i};Us.parse=function(r,i){if(r.length!==2||typeof r[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");var l=r[1];return i.scope.has(l)?new Us(l,i.scope.get(l)):i.error('Unknown variable "'+l+'". Make sure "'+l+'" has been bound in an enclosing "let" expression before using it.',1)},Us.prototype.evaluate=function(r){return this.boundExpression.evaluate(r)},Us.prototype.eachChild=function(){},Us.prototype.outputDefined=function(){return!1},Us.prototype.serialize=function(){return["var",this.name]};var js=function(r,i,l,p,y){i===void 0&&(i=[]),p===void 0&&(p=new St),y===void 0&&(y=[]),this.registry=r,this.path=i,this.key=i.map(function(v){return"["+v+"]"}).join(""),this.scope=p,this.errors=y,this.expectedType=l};function ef(r,i){for(var l,p=r.length-1,y=0,v=p,x=0;y<=v;)if((l=r[x=Math.floor((y+v)/2)])<=i){if(x===p||i<r[x+1])return x;y=x+1}else{if(!(l>i))throw new _i("Input is not a number.");v=x-1}return 0}js.prototype.parse=function(r,i,l,p,y){return y===void 0&&(y={}),i?this.concat(i,l,p)._parse(r,y):this._parse(r,y)},js.prototype._parse=function(r,i){function l(A,L,D){return D==="assert"?new gn(L,[A]):D==="coerce"?new Yo(L,[A]):A}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var p=r[0];if(typeof p!="string")return this.error("Expression name must be a string, but found "+typeof p+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var y=this.registry[p];if(y){var v=y.parse(r,this);if(!v)return null;if(this.expectedType){var x=this.expectedType,S=v.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(x,S))return null}else v=l(v,x,i.typeAnnotation||"coerce");else v=l(v,x,i.typeAnnotation||"assert")}if(!(v instanceof qi)&&v.type.kind!=="resolvedImage"&&function A(L){if(L instanceof Us)return A(L.boundExpression);if(L instanceof Ai&&L.name==="error"||L instanceof Na||L instanceof Jo)return!1;var D=L instanceof Yo||L instanceof gn,B=!0;return L.eachChild(function(j){B=D?B&&A(j):B&&j instanceof qi}),!!B&&Bs(L)&&Ol(L,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(v)){var C=new us;try{v=new qi(v.type,v.evaluate(C))}catch(A){return this.error(A.message),null}}return v}return this.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof r+" instead.")},js.prototype.concat=function(r,i,l){var p=typeof r=="number"?this.path.concat(r):this.path,y=l?this.scope.concat(l):this.scope;return new js(this.registry,p,i||null,y,this.errors)},js.prototype.error=function(r){for(var i=[],l=arguments.length-1;l-- >0;)i[l]=arguments[l+1];var p=""+this.key+i.map(function(y){return"["+y+"]"}).join("");this.errors.push(new Ue(p,r))},js.prototype.checkSubtype=function(r,i){var l=er(r,i);return l&&this.error(l),l};var xo=function(r,i,l){this.type=r,this.input=i,this.labels=[],this.outputs=[];for(var p=0,y=l;p<y.length;p+=1){var v=y[p],x=v[1];this.labels.push(v[0]),this.outputs.push(x)}};function Hn(r,i,l){return r*(1-l)+i*l}xo.parse=function(r,i){if(r.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return i.error("Expected an even number of arguments.");var l=i.parse(r[1],1,Le);if(!l)return null;var p=[],y=null;i.expectedType&&i.expectedType.kind!=="value"&&(y=i.expectedType);for(var v=1;v<r.length;v+=2){var x=v===1?-1/0:r[v],S=r[v+1],C=v,A=v+1;if(typeof x!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(p.length&&p[p.length-1][0]>=x)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);var L=i.parse(S,A,y);if(!L)return null;y=y||L.type,p.push([x,L])}return new xo(y,l,p)},xo.prototype.evaluate=function(r){var i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(r);var p=this.input.evaluate(r);if(p<=i[0])return l[0].evaluate(r);var y=i.length;return p>=i[y-1]?l[y-1].evaluate(r):l[ef(i,p)].evaluate(r)},xo.prototype.eachChild=function(r){r(this.input);for(var i=0,l=this.outputs;i<l.length;i+=1)r(l[i])},xo.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},xo.prototype.serialize=function(){for(var r=["step",this.input.serialize()],i=0;i<this.labels.length;i++)i>0&&r.push(this.labels[i]),r.push(this.outputs[i].serialize());return r};var Lu=Object.freeze({__proto__:null,number:Hn,color:function(r,i,l){return new Br(Hn(r.r,i.r,l),Hn(r.g,i.g,l),Hn(r.b,i.b,l),Hn(r.a,i.a,l))},array:function(r,i,l){return r.map(function(p,y){return Hn(p,i[y],l)})}}),Rg=6/29*3*(6/29),D1=Math.PI/180,N1=180/Math.PI;function yd(r){return r>.008856451679035631?Math.pow(r,1/3):r/Rg+4/29}function gd(r){return r>6/29?r*r*r:Rg*(r-4/29)}function vd(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function _d(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function zg(r){var i=_d(r.r),l=_d(r.g),p=_d(r.b),y=yd((.4124564*i+.3575761*l+.1804375*p)/.95047),v=yd((.2126729*i+.7151522*l+.072175*p)/1);return{l:116*v-16,a:500*(y-v),b:200*(v-yd((.0193339*i+.119192*l+.9503041*p)/1.08883)),alpha:r.a}}function Fg(r){var i=(r.l+16)/116,l=isNaN(r.a)?i:i+r.a/500,p=isNaN(r.b)?i:i-r.b/200;return i=1*gd(i),l=.95047*gd(l),p=1.08883*gd(p),new Br(vd(3.2404542*l-1.5371385*i-.4985314*p),vd(-.969266*l+1.8760108*i+.041556*p),vd(.0556434*l-.2040259*i+1.0572252*p),r.alpha)}function R1(r,i,l){var p=i-r;return r+l*(p>180||p<-180?p-360*Math.round(p/360):p)}var Bc={forward:zg,reverse:Fg,interpolate:function(r,i,l){return{l:Hn(r.l,i.l,l),a:Hn(r.a,i.a,l),b:Hn(r.b,i.b,l),alpha:Hn(r.alpha,i.alpha,l)}}},Vc={forward:function(r){var i=zg(r),l=i.l,p=i.a,y=i.b,v=Math.atan2(y,p)*N1;return{h:v<0?v+360:v,c:Math.sqrt(p*p+y*y),l,alpha:r.a}},reverse:function(r){var i=r.h*D1,l=r.c;return Fg({l:r.l,a:Math.cos(i)*l,b:Math.sin(i)*l,alpha:r.alpha})},interpolate:function(r,i,l){return{h:R1(r.h,i.h,l),c:Hn(r.c,i.c,l),l:Hn(r.l,i.l,l),alpha:Hn(r.alpha,i.alpha,l)}}},Bg=Object.freeze({__proto__:null,lab:Bc,hcl:Vc}),Pi=function(r,i,l,p,y){this.type=r,this.operator=i,this.interpolation=l,this.input=p,this.labels=[],this.outputs=[];for(var v=0,x=y;v<x.length;v+=1){var S=x[v],C=S[1];this.labels.push(S[0]),this.outputs.push(C)}};function xd(r,i,l,p){var y=p-l,v=r-l;return y===0?0:i===1?v/y:(Math.pow(i,v)-1)/(Math.pow(i,y)-1)}Pi.interpolationFactor=function(r,i,l,p){var y=0;if(r.name==="exponential")y=xd(i,r.base,l,p);else if(r.name==="linear")y=xd(i,1,l,p);else if(r.name==="cubic-bezier"){var v=r.controlPoints;y=new g(v[0],v[1],v[2],v[3]).solve(xd(i,1,l,p))}return y},Pi.parse=function(r,i){var l=r[0],p=r[1],y=r[2],v=r.slice(3);if(!Array.isArray(p)||p.length===0)return i.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){var x=p[1];if(typeof x!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:x}}else{if(p[0]!=="cubic-bezier")return i.error("Unknown interpolation type "+String(p[0]),1,0);var S=p.slice(1);if(S.length!==4||S.some(function(ce){return typeof ce!="number"||ce<0||ce>1}))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:S}}if(r.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(y=i.parse(y,2,Le)))return null;var C=[],A=null;l==="interpolate-hcl"||l==="interpolate-lab"?A=De:i.expectedType&&i.expectedType.kind!=="value"&&(A=i.expectedType);for(var L=0;L<v.length;L+=2){var D=v[L],B=v[L+1],j=L+3,Q=L+4;if(typeof D!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(C.length&&C[C.length-1][0]>=D)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);var te=i.parse(B,Q,A);if(!te)return null;A=A||te.type,C.push([D,te])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new Pi(A,l,p,y,C):i.error("Type "+Xt(A)+" is not interpolatable.")},Pi.prototype.evaluate=function(r){var i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(r);var p=this.input.evaluate(r);if(p<=i[0])return l[0].evaluate(r);var y=i.length;if(p>=i[y-1])return l[y-1].evaluate(r);var v=ef(i,p),x=Pi.interpolationFactor(this.interpolation,p,i[v],i[v+1]),S=l[v].evaluate(r),C=l[v+1].evaluate(r);return this.operator==="interpolate"?Lu[this.type.kind.toLowerCase()](S,C,x):this.operator==="interpolate-hcl"?Vc.reverse(Vc.interpolate(Vc.forward(S),Vc.forward(C),x)):Bc.reverse(Bc.interpolate(Bc.forward(S),Bc.forward(C),x))},Pi.prototype.eachChild=function(r){r(this.input);for(var i=0,l=this.outputs;i<l.length;i+=1)r(l[i])},Pi.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},Pi.prototype.serialize=function(){var r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i=[this.operator,r,this.input.serialize()],l=0;l<this.labels.length;l++)i.push(this.labels[l],this.outputs[l].serialize());return i};var Gs=function(r,i){this.type=r,this.args=i};Gs.parse=function(r,i){if(r.length<2)return i.error("Expectected at least one argument.");var l=null,p=i.expectedType;p&&p.kind!=="value"&&(l=p);for(var y=[],v=0,x=r.slice(1);v<x.length;v+=1){var S=i.parse(x[v],1+y.length,l,void 0,{typeAnnotation:"omit"});if(!S)return null;l=l||S.type,y.push(S)}var C=p&&y.some(function(A){return er(p,A.type)});return new Gs(C?Ee:l,y)},Gs.prototype.evaluate=function(r){for(var i,l=null,p=0,y=0,v=this.args;y<v.length&&(p++,(l=v[y].evaluate(r))&&l instanceof io&&!l.available&&(i||(i=l.name),l=null,p===this.args.length&&(l=i)),l===null);y+=1);return l},Gs.prototype.eachChild=function(r){this.args.forEach(r)},Gs.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},Gs.prototype.serialize=function(){var r=["coalesce"];return this.eachChild(function(i){r.push(i.serialize())}),r};var $s=function(r,i){this.type=i.type,this.bindings=[].concat(r),this.result=i};$s.prototype.evaluate=function(r){return this.result.evaluate(r)},$s.prototype.eachChild=function(r){for(var i=0,l=this.bindings;i<l.length;i+=1)r(l[i][1]);r(this.result)},$s.parse=function(r,i){if(r.length<4)return i.error("Expected at least 3 arguments, but found "+(r.length-1)+" instead.");for(var l=[],p=1;p<r.length-1;p+=2){var y=r[p];if(typeof y!="string")return i.error("Expected string, but found "+typeof y+" instead.",p);if(/[^a-zA-Z0-9_]/.test(y))return i.error("Variable names must contain only alphanumeric characters or '_'.",p);var v=i.parse(r[p+1],p+1);if(!v)return null;l.push([y,v])}var x=i.parse(r[r.length-1],r.length-1,i.expectedType,l);return x?new $s(l,x):null},$s.prototype.outputDefined=function(){return this.result.outputDefined()},$s.prototype.serialize=function(){for(var r=["let"],i=0,l=this.bindings;i<l.length;i+=1){var p=l[i];r.push(p[0],p[1].serialize())}return r.push(this.result.serialize()),r};var Cl=function(r,i,l){this.type=r,this.index=i,this.input=l};Cl.parse=function(r,i){if(r.length!==3)return i.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var l=i.parse(r[1],1,Le),p=i.parse(r[2],2,Qt(i.expectedType||Ee));return l&&p?new Cl(p.type.itemType,l,p):null},Cl.prototype.evaluate=function(r){var i=this.index.evaluate(r),l=this.input.evaluate(r);if(i<0)throw new _i("Array index out of bounds: "+i+" < 0.");if(i>=l.length)throw new _i("Array index out of bounds: "+i+" > "+(l.length-1)+".");if(i!==Math.floor(i))throw new _i("Array index must be an integer, but found "+i+" instead.");return l[i]},Cl.prototype.eachChild=function(r){r(this.index),r(this.input)},Cl.prototype.outputDefined=function(){return!1},Cl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Al=function(r,i){this.type=lt,this.needle=r,this.haystack=i};Al.parse=function(r,i){if(r.length!==3)return i.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var l=i.parse(r[1],1,Ee),p=i.parse(r[2],2,Ee);return l&&p?yn(l.type,[lt,pt,Le,_t,Ee])?new Al(l,p):i.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt(l.type)+" instead"):null},Al.prototype.evaluate=function(r){var i=this.needle.evaluate(r),l=this.haystack.evaluate(r);if(!l)return!1;if(!Gr(i,["boolean","string","number","null"]))throw new _i("Expected first argument to be of type boolean, string, number or null, but found "+Xt(Rn(i))+" instead.");if(!Gr(l,["string","array"]))throw new _i("Expected second argument to be of type array or string, but found "+Xt(Rn(l))+" instead.");return l.indexOf(i)>=0},Al.prototype.eachChild=function(r){r(this.needle),r(this.haystack)},Al.prototype.outputDefined=function(){return!0},Al.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var qs=function(r,i,l){this.type=Le,this.needle=r,this.haystack=i,this.fromIndex=l};qs.parse=function(r,i){if(r.length<=2||r.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var l=i.parse(r[1],1,Ee),p=i.parse(r[2],2,Ee);if(!l||!p)return null;if(!yn(l.type,[lt,pt,Le,_t,Ee]))return i.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt(l.type)+" instead");if(r.length===4){var y=i.parse(r[3],3,Le);return y?new qs(l,p,y):null}return new qs(l,p)},qs.prototype.evaluate=function(r){var i=this.needle.evaluate(r),l=this.haystack.evaluate(r);if(!Gr(i,["boolean","string","number","null"]))throw new _i("Expected first argument to be of type boolean, string, number or null, but found "+Xt(Rn(i))+" instead.");if(!Gr(l,["string","array"]))throw new _i("Expected second argument to be of type array or string, but found "+Xt(Rn(l))+" instead.");if(this.fromIndex){var p=this.fromIndex.evaluate(r);return l.indexOf(i,p)}return l.indexOf(i)},qs.prototype.eachChild=function(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)},qs.prototype.outputDefined=function(){return!1},qs.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Pl=function(r,i,l,p,y,v){this.inputType=r,this.type=i,this.input=l,this.cases=p,this.outputs=y,this.otherwise=v};Pl.parse=function(r,i){if(r.length<5)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(r.length%2!=1)return i.error("Expected an even number of arguments.");var l,p;i.expectedType&&i.expectedType.kind!=="value"&&(p=i.expectedType);for(var y={},v=[],x=2;x<r.length-1;x+=2){var S=r[x],C=r[x+1];Array.isArray(S)||(S=[S]);var A=i.concat(x);if(S.length===0)return A.error("Expected at least one branch label.");for(var L=0,D=S;L<D.length;L+=1){var B=D[L];if(typeof B!="number"&&typeof B!="string")return A.error("Branch labels must be numbers or strings.");if(typeof B=="number"&&Math.abs(B)>Number.MAX_SAFE_INTEGER)return A.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof B=="number"&&Math.floor(B)!==B)return A.error("Numeric branch labels must be integer values.");if(l){if(A.checkSubtype(l,Rn(B)))return null}else l=Rn(B);if(y[String(B)]!==void 0)return A.error("Branch labels must be unique.");y[String(B)]=v.length}var j=i.parse(C,x,p);if(!j)return null;p=p||j.type,v.push(j)}var Q=i.parse(r[1],1,Ee);if(!Q)return null;var te=i.parse(r[r.length-1],r.length-1,p);return te?Q.type.kind!=="value"&&i.concat(1).checkSubtype(l,Q.type)?null:new Pl(l,p,Q,y,v,te):null},Pl.prototype.evaluate=function(r){var i=this.input.evaluate(r);return(Rn(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(r)},Pl.prototype.eachChild=function(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)},Pl.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})&&this.otherwise.outputDefined()},Pl.prototype.serialize=function(){for(var r=this,i=["match",this.input.serialize()],l=[],p={},y=0,v=Object.keys(this.cases).sort();y<v.length;y+=1){var x=v[y];(D=p[this.cases[x]])===void 0?(p[this.cases[x]]=l.length,l.push([this.cases[x],[x]])):l[D][1].push(x)}for(var S=function(j){return r.inputType.kind==="number"?Number(j):j},C=0,A=l;C<A.length;C+=1){var L=A[C],D=L[0],B=L[1];i.push(B.length===1?S(B[0]):B.map(S)),i.push(this.outputs[outputIndex$1].serialize())}return i.push(this.otherwise.serialize()),i};var kl=function(r,i,l){this.type=r,this.branches=i,this.otherwise=l};kl.parse=function(r,i){if(r.length<4)return i.error("Expected at least 3 arguments, but found only "+(r.length-1)+".");if(r.length%2!=0)return i.error("Expected an odd number of arguments.");var l;i.expectedType&&i.expectedType.kind!=="value"&&(l=i.expectedType);for(var p=[],y=1;y<r.length-1;y+=2){var v=i.parse(r[y],y,lt);if(!v)return null;var x=i.parse(r[y+1],y+1,l);if(!x)return null;p.push([v,x]),l=l||x.type}var S=i.parse(r[r.length-1],r.length-1,l);return S?new kl(l,p,S):null},kl.prototype.evaluate=function(r){for(var i=0,l=this.branches;i<l.length;i+=1){var p=l[i],y=p[1];if(p[0].evaluate(r))return y.evaluate(r)}return this.otherwise.evaluate(r)},kl.prototype.eachChild=function(r){for(var i=0,l=this.branches;i<l.length;i+=1){var p=l[i],y=p[1];r(p[0]),r(y)}r(this.otherwise)},kl.prototype.outputDefined=function(){return this.branches.every(function(r){return r[1].outputDefined()})&&this.otherwise.outputDefined()},kl.prototype.serialize=function(){var r=["case"];return this.eachChild(function(i){r.push(i.serialize())}),r};var Ws=function(r,i,l,p){this.type=r,this.input=i,this.beginIndex=l,this.endIndex=p};function Vg(r,i){return r==="=="||r==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Ug(r,i,l,p){return p.compare(i,l)===0}function Yr(r,i,l){var p=r!=="=="&&r!=="!=";return function(){function y(v,x,S){this.type=lt,this.lhs=v,this.rhs=x,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}return y.parse=function(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");var S=v[0],C=x.parse(v[1],1,Ee);if(!C)return null;if(!Vg(S,C.type))return x.concat(1).error('"'+S+`" comparisons are not supported for type '`+Xt(C.type)+"'.");var A=x.parse(v[2],2,Ee);if(!A)return null;if(!Vg(S,A.type))return x.concat(2).error('"'+S+`" comparisons are not supported for type '`+Xt(A.type)+"'.");if(C.type.kind!==A.type.kind&&C.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot compare types '"+Xt(C.type)+"' and '"+Xt(A.type)+"'.");p&&(C.type.kind==="value"&&A.type.kind!=="value"?C=new gn(A.type,[C]):C.type.kind!=="value"&&A.type.kind==="value"&&(A=new gn(C.type,[A])));var L=null;if(v.length===4){if(C.type.kind!=="string"&&A.type.kind!=="string"&&C.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(!(L=x.parse(v[3],3,He)))return null}return new y(C,A,L)},y.prototype.evaluate=function(v){var x=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(p&&this.hasUntypedArgument){var C=Rn(x),A=Rn(S);if(C.kind!==A.kind||C.kind!=="string"&&C.kind!=="number")throw new _i('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+C.kind+", "+A.kind+") instead.")}if(this.collator&&!p&&this.hasUntypedArgument){var L=Rn(x),D=Rn(S);if(L.kind!=="string"||D.kind!=="string")return i(v,x,S)}return this.collator?l(v,x,S,this.collator.evaluate(v)):i(v,x,S)},y.prototype.eachChild=function(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)},y.prototype.outputDefined=function(){return!0},y.prototype.serialize=function(){var v=[r];return this.eachChild(function(x){v.push(x.serialize())}),v},y}()}Ws.parse=function(r,i){if(r.length<=2||r.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var l=i.parse(r[1],1,Ee),p=i.parse(r[2],2,Le);if(!l||!p)return null;if(!yn(l.type,[Qt(Ee),pt,Ee]))return i.error("Expected first argument to be of type array or string, but found "+Xt(l.type)+" instead");if(r.length===4){var y=i.parse(r[3],3,Le);return y?new Ws(l.type,l,p,y):null}return new Ws(l.type,l,p)},Ws.prototype.evaluate=function(r){var i=this.input.evaluate(r),l=this.beginIndex.evaluate(r);if(!Gr(i,["string","array"]))throw new _i("Expected first argument to be of type array or string, but found "+Xt(Rn(i))+" instead.");if(this.endIndex){var p=this.endIndex.evaluate(r);return i.slice(l,p)}return i.slice(l)},Ws.prototype.eachChild=function(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)},Ws.prototype.outputDefined=function(){return!1},Ws.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var z1=Yr("==",function(r,i,l){return i===l},Ug),tf=Yr("!=",function(r,i,l){return i!==l},function(r,i,l,p){return!Ug(0,i,l,p)}),jg=Yr("<",function(r,i,l){return i<l},function(r,i,l,p){return p.compare(i,l)<0}),Gg=Yr(">",function(r,i,l){return i>l},function(r,i,l,p){return p.compare(i,l)>0}),$g=Yr("<=",function(r,i,l){return i<=l},function(r,i,l,p){return p.compare(i,l)<=0}),qg=Yr(">=",function(r,i,l){return i>=l},function(r,i,l,p){return p.compare(i,l)>=0}),Ll=function(r,i,l,p,y){this.type=pt,this.number=r,this.locale=i,this.currency=l,this.minFractionDigits=p,this.maxFractionDigits=y};Ll.parse=function(r,i){if(r.length!==3)return i.error("Expected two arguments.");var l=i.parse(r[1],1,Le);if(!l)return null;var p=r[2];if(typeof p!="object"||Array.isArray(p))return i.error("NumberFormat options argument must be an object.");var y=null;if(p.locale&&!(y=i.parse(p.locale,1,pt)))return null;var v=null;if(p.currency&&!(v=i.parse(p.currency,1,pt)))return null;var x=null;if(p["min-fraction-digits"]&&!(x=i.parse(p["min-fraction-digits"],1,Le)))return null;var S=null;return p["max-fraction-digits"]&&!(S=i.parse(p["max-fraction-digits"],1,Le))?null:new Ll(l,y,v,x,S)},Ll.prototype.evaluate=function(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))},Ll.prototype.eachChild=function(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)},Ll.prototype.outputDefined=function(){return!1},Ll.prototype.serialize=function(){var r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]};var Hs=function(r){this.type=Le,this.input=r};Hs.parse=function(r,i){if(r.length!==2)return i.error("Expected 1 argument, but found "+(r.length-1)+" instead.");var l=i.parse(r[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?i.error("Expected argument of type string or array, but found "+Xt(l.type)+" instead."):new Hs(l):null},Hs.prototype.evaluate=function(r){var i=this.input.evaluate(r);if(typeof i=="string"||Array.isArray(i))return i.length;throw new _i("Expected value to be of type string or array, but found "+Xt(Rn(i))+" instead.")},Hs.prototype.eachChild=function(r){r(this.input)},Hs.prototype.outputDefined=function(){return!1},Hs.prototype.serialize=function(){var r=["length"];return this.eachChild(function(i){r.push(i.serialize())}),r};var Dl={"==":z1,"!=":tf,">":Gg,"<":jg,">=":qg,"<=":$g,array:gn,at:Cl,boolean:gn,case:kl,coalesce:Gs,collator:Na,format:ya,image:Bo,in:Al,"index-of":qs,interpolate:Pi,"interpolate-hcl":Pi,"interpolate-lab":Pi,length:Hs,let:$s,literal:qi,match:Pl,number:gn,"number-format":Ll,object:gn,slice:Ws,step:xo,string:gn,"to-boolean":Yo,"to-color":Yo,"to-number":Yo,"to-string":Yo,var:Us,within:Jo};function Wg(r,i){var l=i[0],p=i[1],y=i[2],v=i[3];l=l.evaluate(r),p=p.evaluate(r),y=y.evaluate(r);var x=v?v.evaluate(r):1,S=pd(l,p,y,x);if(S)throw new _i(S);return new Br(l/255*x,p/255*x,y/255*x,x)}function Hg(r,i){return r in i}function bd(r,i){var l=i[r];return l===void 0?null:l}function Nl(r){return{type:r}}function Zg(r){return{result:"success",value:r}}function Rl(r){return{result:"error",value:r}}function zl(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Xg(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Uc(r){return!!r.expression&&r.expression.interpolated}function nn(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function rf(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function F1(r){return r}function Du(r,i,l){return r!==void 0?r:i!==void 0?i:l!==void 0?l:void 0}function Kg(r,i,l,p,y){return Du(typeof l===y?p[l]:void 0,r.default,i.default)}function B1(r,i,l){if(nn(l)!=="number")return Du(r.default,i.default);var p=r.stops.length;if(p===1||l<=r.stops[0][0])return r.stops[0][1];if(l>=r.stops[p-1][0])return r.stops[p-1][1];var y=ef(r.stops.map(function(v){return v[0]}),l);return r.stops[y][1]}function Yg(r,i,l){var p=r.base!==void 0?r.base:1;if(nn(l)!=="number")return Du(r.default,i.default);var y=r.stops.length;if(y===1||l<=r.stops[0][0])return r.stops[0][1];if(l>=r.stops[y-1][0])return r.stops[y-1][1];var v=ef(r.stops.map(function(D){return D[0]}),l),x=function(D,B,j,Q){var te=Q-j,ce=D-j;return te===0?0:B===1?ce/te:(Math.pow(B,ce)-1)/(Math.pow(B,te)-1)}(l,p,r.stops[v][0],r.stops[v+1][0]),S=r.stops[v][1],C=r.stops[v+1][1],A=Lu[i.type]||F1;if(r.colorSpace&&r.colorSpace!=="rgb"){var L=Bg[r.colorSpace];A=function(D,B){return L.reverse(L.interpolate(L.forward(D),L.forward(B),x))}}return typeof S.evaluate=="function"?{evaluate:function(){for(var D=[],B=arguments.length;B--;)D[B]=arguments[B];var j=S.evaluate.apply(void 0,D),Q=C.evaluate.apply(void 0,D);if(j!==void 0&&Q!==void 0)return A(j,Q,x)}}:A(S,C,x)}function nf(r,i,l){return i.type==="color"?l=Br.parse(l):i.type==="formatted"?l=vi.fromString(l.toString()):i.type==="resolvedImage"?l=io.fromString(l.toString()):nn(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0),Du(l,r.default,i.default)}Ai.register(Dl,{error:[{kind:"error"},[pt],function(r,i){throw new _i(i[0].evaluate(r))}],typeof:[pt,[Ee],function(r,i){return Xt(Rn(i[0].evaluate(r)))}],"to-rgba":[Qt(Le,4),[De],function(r,i){return i[0].evaluate(r).toArray()}],rgb:[De,[Le,Le,Le],Wg],rgba:[De,[Le,Le,Le,Le],Wg],has:{type:lt,overloads:[[[pt],function(r,i){return Hg(i[0].evaluate(r),r.properties())}],[[pt,fe],function(r,i){var l=i[1];return Hg(i[0].evaluate(r),l.evaluate(r))}]]},get:{type:Ee,overloads:[[[pt],function(r,i){return bd(i[0].evaluate(r),r.properties())}],[[pt,fe],function(r,i){var l=i[1];return bd(i[0].evaluate(r),l.evaluate(r))}]]},"feature-state":[Ee,[pt],function(r,i){return bd(i[0].evaluate(r),r.featureState||{})}],properties:[fe,[],function(r){return r.properties()}],"geometry-type":[pt,[],function(r){return r.geometryType()}],id:[Ee,[],function(r){return r.id()}],zoom:[Le,[],function(r){return r.globals.zoom}],"heatmap-density":[Le,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[Le,[],function(r){return r.globals.lineProgress||0}],accumulated:[Ee,[],function(r){return r.globals.accumulated===void 0?null:r.globals.accumulated}],"+":[Le,Nl(Le),function(r,i){for(var l=0,p=0,y=i;p<y.length;p+=1)l+=y[p].evaluate(r);return l}],"*":[Le,Nl(Le),function(r,i){for(var l=1,p=0,y=i;p<y.length;p+=1)l*=y[p].evaluate(r);return l}],"-":{type:Le,overloads:[[[Le,Le],function(r,i){var l=i[1];return i[0].evaluate(r)-l.evaluate(r)}],[[Le],function(r,i){return-i[0].evaluate(r)}]]},"/":[Le,[Le,Le],function(r,i){var l=i[1];return i[0].evaluate(r)/l.evaluate(r)}],"%":[Le,[Le,Le],function(r,i){var l=i[1];return i[0].evaluate(r)%l.evaluate(r)}],ln2:[Le,[],function(){return Math.LN2}],pi:[Le,[],function(){return Math.PI}],e:[Le,[],function(){return Math.E}],"^":[Le,[Le,Le],function(r,i){var l=i[1];return Math.pow(i[0].evaluate(r),l.evaluate(r))}],sqrt:[Le,[Le],function(r,i){return Math.sqrt(i[0].evaluate(r))}],log10:[Le,[Le],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN10}],ln:[Le,[Le],function(r,i){return Math.log(i[0].evaluate(r))}],log2:[Le,[Le],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN2}],sin:[Le,[Le],function(r,i){return Math.sin(i[0].evaluate(r))}],cos:[Le,[Le],function(r,i){return Math.cos(i[0].evaluate(r))}],tan:[Le,[Le],function(r,i){return Math.tan(i[0].evaluate(r))}],asin:[Le,[Le],function(r,i){return Math.asin(i[0].evaluate(r))}],acos:[Le,[Le],function(r,i){return Math.acos(i[0].evaluate(r))}],atan:[Le,[Le],function(r,i){return Math.atan(i[0].evaluate(r))}],min:[Le,Nl(Le),function(r,i){return Math.min.apply(Math,i.map(function(l){return l.evaluate(r)}))}],max:[Le,Nl(Le),function(r,i){return Math.max.apply(Math,i.map(function(l){return l.evaluate(r)}))}],abs:[Le,[Le],function(r,i){return Math.abs(i[0].evaluate(r))}],round:[Le,[Le],function(r,i){var l=i[0].evaluate(r);return l<0?-Math.round(-l):Math.round(l)}],floor:[Le,[Le],function(r,i){return Math.floor(i[0].evaluate(r))}],ceil:[Le,[Le],function(r,i){return Math.ceil(i[0].evaluate(r))}],"filter-==":[lt,[pt,Ee],function(r,i){var l=i[0],p=i[1];return r.properties()[l.value]===p.value}],"filter-id-==":[lt,[Ee],function(r,i){var l=i[0];return r.id()===l.value}],"filter-type-==":[lt,[pt],function(r,i){var l=i[0];return r.geometryType()===l.value}],"filter-<":[lt,[pt,Ee],function(r,i){var l=i[0],p=i[1],y=r.properties()[l.value],v=p.value;return typeof y==typeof v&&y<v}],"filter-id-<":[lt,[Ee],function(r,i){var l=i[0],p=r.id(),y=l.value;return typeof p==typeof y&&p<y}],"filter->":[lt,[pt,Ee],function(r,i){var l=i[0],p=i[1],y=r.properties()[l.value],v=p.value;return typeof y==typeof v&&y>v}],"filter-id->":[lt,[Ee],function(r,i){var l=i[0],p=r.id(),y=l.value;return typeof p==typeof y&&p>y}],"filter-<=":[lt,[pt,Ee],function(r,i){var l=i[0],p=i[1],y=r.properties()[l.value],v=p.value;return typeof y==typeof v&&y<=v}],"filter-id-<=":[lt,[Ee],function(r,i){var l=i[0],p=r.id(),y=l.value;return typeof p==typeof y&&p<=y}],"filter->=":[lt,[pt,Ee],function(r,i){var l=i[0],p=i[1],y=r.properties()[l.value],v=p.value;return typeof y==typeof v&&y>=v}],"filter-id->=":[lt,[Ee],function(r,i){var l=i[0],p=r.id(),y=l.value;return typeof p==typeof y&&p>=y}],"filter-has":[lt,[Ee],function(r,i){return i[0].value in r.properties()}],"filter-has-id":[lt,[],function(r){return r.id()!==null&&r.id()!==void 0}],"filter-type-in":[lt,[Qt(pt)],function(r,i){return i[0].value.indexOf(r.geometryType())>=0}],"filter-id-in":[lt,[Qt(Ee)],function(r,i){return i[0].value.indexOf(r.id())>=0}],"filter-in-small":[lt,[pt,Qt(Ee)],function(r,i){var l=i[0];return i[1].value.indexOf(r.properties()[l.value])>=0}],"filter-in-large":[lt,[pt,Qt(Ee)],function(r,i){var l=i[0],p=i[1];return function(y,v,x,S){for(;x<=S;){var C=x+S>>1;if(v[C]===y)return!0;v[C]>y?S=C-1:x=C+1}return!1}(r.properties()[l.value],p.value,0,p.value.length-1)}],all:{type:lt,overloads:[[[lt,lt],function(r,i){var l=i[1];return i[0].evaluate(r)&&l.evaluate(r)}],[Nl(lt),function(r,i){for(var l=0,p=i;l<p.length;l+=1)if(!p[l].evaluate(r))return!1;return!0}]]},any:{type:lt,overloads:[[[lt,lt],function(r,i){var l=i[1];return i[0].evaluate(r)||l.evaluate(r)}],[Nl(lt),function(r,i){for(var l=0,p=i;l<p.length;l+=1)if(p[l].evaluate(r))return!0;return!1}]]},"!":[lt,[lt],function(r,i){return!i[0].evaluate(r)}],"is-supported-script":[lt,[pt],function(r,i){var l=r.globals&&r.globals.isSupportedScript;return!l||l(i[0].evaluate(r))}],upcase:[pt,[pt],function(r,i){return i[0].evaluate(r).toUpperCase()}],downcase:[pt,[pt],function(r,i){return i[0].evaluate(r).toLowerCase()}],concat:[pt,Nl(Ee),function(r,i){return i.map(function(l){return zc(l.evaluate(r))}).join("")}],"resolved-locale":[pt,[He],function(r,i){return i[0].evaluate(r).resolvedLocale()}]});var Nu=function(r,i){this.expression=r,this._warningHistory={},this._evaluator=new us,this._defaultValue=i?function(l){return l.type==="color"&&rf(l.default)?new Br(0,0,0,0):l.type==="color"?Br.parse(l.default)||null:l.default===void 0?null:l.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null};function jc(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Dl}function of(r,i){var l=new js(Dl,[],i?function(y){var v={color:De,string:pt,number:Le,enum:pt,boolean:lt,formatted:$t,resolvedImage:Ht};return y.type==="array"?Qt(v[y.value]||Ee,y.length):v[y.type]}(i):void 0),p=l.parse(r,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Zg(new Nu(p,i)):Rl(l.errors)}Nu.prototype.evaluateWithoutErrorHandling=function(r,i,l,p,y,v){return this._evaluator.globals=r,this._evaluator.feature=i,this._evaluator.featureState=l,this._evaluator.canonical=p,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)},Nu.prototype.evaluate=function(r,i,l,p,y,v){this._evaluator.globals=r,this._evaluator.feature=i||null,this._evaluator.featureState=l||null,this._evaluator.canonical=p,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=v||null;try{var x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new _i("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(x)+" instead.");return x}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}};var Gc=function(r,i){this.kind=r,this._styleExpression=i,this.isStateDependent=r!=="constant"&&!Vs(i.expression)};Gc.prototype.evaluateWithoutErrorHandling=function(r,i,l,p,y,v){return this._styleExpression.evaluateWithoutErrorHandling(r,i,l,p,y,v)},Gc.prototype.evaluate=function(r,i,l,p,y,v){return this._styleExpression.evaluate(r,i,l,p,y,v)};var Ru=function(r,i,l,p){this.kind=r,this.zoomStops=l,this._styleExpression=i,this.isStateDependent=r!=="camera"&&!Vs(i.expression),this.interpolationType=p};function Jg(r,i){if((r=of(r,i)).result==="error")return r;var l=r.value.expression,p=Bs(l);if(!p&&!zl(i))return Rl([new Ue("","data expressions not supported")]);var y=Ol(l,["zoom"]);if(!y&&!Xg(i))return Rl([new Ue("","zoom expressions not supported")]);var v=function x(S){var C=null;if(S instanceof $s)C=x(S.result);else if(S instanceof Gs)for(var A=0,L=S.args;A<L.length&&!(C=x(L[A]));A+=1);else(S instanceof xo||S instanceof Pi)&&S.input instanceof Ai&&S.input.name==="zoom"&&(C=S);return C instanceof Ue||S.eachChild(function(D){var B=x(D);B instanceof Ue?C=B:!C&&B?C=new Ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&B&&C!==B&&(C=new Ue("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}(l);return v||y?v instanceof Ue?Rl([v]):v instanceof Pi&&!Uc(i)?Rl([new Ue("",'"interpolate" expressions cannot be used with this property')]):Zg(v?new Ru(p?"camera":"composite",r.value,v.labels,v instanceof Pi?v.interpolation:void 0):new Gc(p?"constant":"source",r.value)):Rl([new Ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Ru.prototype.evaluateWithoutErrorHandling=function(r,i,l,p,y,v){return this._styleExpression.evaluateWithoutErrorHandling(r,i,l,p,y,v)},Ru.prototype.evaluate=function(r,i,l,p,y,v){return this._styleExpression.evaluate(r,i,l,p,y,v)},Ru.prototype.interpolationFactor=function(r,i,l){return this.interpolationType?Pi.interpolationFactor(this.interpolationType,r,i,l):0};var zu=function(r,i){this._parameters=r,this._specification=i,Ge(this,function l(p,y){var v,x,S,C=y.type==="color",A=p.stops&&typeof p.stops[0][0]=="object",L=A||!(A||p.property!==void 0),D=p.type||(Uc(y)?"exponential":"interval");if(C&&((p=Ge({},p)).stops&&(p.stops=p.stops.map(function(dt){return[dt[0],Br.parse(dt[1])]})),p.default=Br.parse(p.default?p.default:y.default)),p.colorSpace&&p.colorSpace!=="rgb"&&!Bg[p.colorSpace])throw new Error("Unknown color space: "+p.colorSpace);if(D==="exponential")v=Yg;else if(D==="interval")v=B1;else if(D==="categorical"){v=Kg,x=Object.create(null);for(var B=0,j=p.stops;B<j.length;B+=1){var Q=j[B];x[Q[0]]=Q[1]}S=typeof p.stops[0][0]}else{if(D!=="identity")throw new Error('Unknown function type "'+D+'"');v=nf}if(A){for(var te={},ce=[],oe=0;oe<p.stops.length;oe++){var ge=p.stops[oe],we=ge[0].zoom;te[we]===void 0&&(te[we]={zoom:we,type:p.type,property:p.property,default:p.default,stops:[]},ce.push(we)),te[we].stops.push([ge[0].value,ge[1]])}for(var Te=[],Oe=0,Be=ce;Oe<Be.length;Oe+=1){var Xe=Be[Oe];Te.push([te[Xe].zoom,l(te[Xe],y)])}var ot={name:"linear"};return{kind:"composite",interpolationType:ot,interpolationFactor:Pi.interpolationFactor.bind(void 0,ot),zoomStops:Te.map(function(dt){return dt[0]}),evaluate:function(dt,Rt){var yt=dt.zoom;return Yg({stops:Te,base:p.base},y,yt).evaluate(yt,Rt)}}}if(L){var Pt=D==="exponential"?{name:"exponential",base:p.base!==void 0?p.base:1}:null;return{kind:"camera",interpolationType:Pt,interpolationFactor:Pi.interpolationFactor.bind(void 0,Pt),zoomStops:p.stops.map(function(dt){return dt[0]}),evaluate:function(dt){return v(p,y,dt.zoom,x,S)}}}return{kind:"source",evaluate:function(dt,Rt){var yt=Rt&&Rt.properties?Rt.properties[p.property]:void 0;return yt===void 0?Du(p.default,y.default):v(p,y,yt,x,S)}}}(this._parameters,this._specification))};function ga(r){var i=r.key,l=r.value,p=r.valueSpec||{},y=r.objectElementValidators||{},v=r.style,x=r.styleSpec,S=[],C=nn(l);if(C!=="object")return[new ie(i,l,"object expected, "+C+" found")];for(var A in l){var L=A.split(".")[0],D=p[L]||p["*"],B=void 0;if(y[L])B=y[L];else if(p[L])B=Sr;else if(y["*"])B=y["*"];else{if(!p["*"]){S.push(new ie(i,l[A],'unknown property "'+A+'"'));continue}B=Sr}S=S.concat(B({key:(i&&i+".")+A,value:l[A],valueSpec:D,style:v,styleSpec:x,object:l,objectKey:A},l))}for(var j in p)y[j]||p[j].required&&p[j].default===void 0&&l[j]===void 0&&S.push(new ie(i,l,'missing required property "'+j+'"'));return S}function Qg(r){var i=r.value,l=r.valueSpec,p=r.style,y=r.styleSpec,v=r.key,x=r.arrayElementValidator||Sr;if(nn(i)!=="array")return[new ie(v,i,"array expected, "+nn(i)+" found")];if(l.length&&i.length!==l.length)return[new ie(v,i,"array length "+l.length+" expected, length "+i.length+" found")];if(l["min-length"]&&i.length<l["min-length"])return[new ie(v,i,"array length at least "+l["min-length"]+" expected, length "+i.length+" found")];var S={type:l.value,values:l.values};y.$version<7&&(S.function=l.function),nn(l.value)==="object"&&(S=l.value);for(var C=[],A=0;A<i.length;A++)C=C.concat(x({array:i,arrayIndex:A,value:i[A],valueSpec:S,style:p,styleSpec:y,key:v+"["+A+"]"}));return C}function ev(r){var i=r.key,l=r.value,p=r.valueSpec,y=nn(l);return y==="number"&&l!=l&&(y="NaN"),y!=="number"?[new ie(i,l,"number expected, "+y+" found")]:"minimum"in p&&l<p.minimum?[new ie(i,l,l+" is less than the minimum value "+p.minimum)]:"maximum"in p&&l>p.maximum?[new ie(i,l,l+" is greater than the maximum value "+p.maximum)]:[]}function tv(r){var i,l,p,y=r.valueSpec,v=Ze(r.value.type),x={},S=v!=="categorical"&&r.value.property===void 0,C=!S,A=nn(r.value.stops)==="array"&&nn(r.value.stops[0])==="array"&&nn(r.value.stops[0][0])==="object",L=ga({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(j){if(v==="identity")return[new ie(j.key,j.value,'identity function may not have a "stops" property')];var Q=[],te=j.value;return Q=Q.concat(Qg({key:j.key,value:te,valueSpec:j.valueSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:D})),nn(te)==="array"&&te.length===0&&Q.push(new ie(j.key,te,"array must have at least one stop")),Q},default:function(j){return Sr({key:j.key,value:j.value,valueSpec:y,style:j.style,styleSpec:j.styleSpec})}}});return v==="identity"&&S&&L.push(new ie(r.key,r.value,'missing required property "property"')),v==="identity"||r.value.stops||L.push(new ie(r.key,r.value,'missing required property "stops"')),v==="exponential"&&r.valueSpec.expression&&!Uc(r.valueSpec)&&L.push(new ie(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(C&&!zl(r.valueSpec)?L.push(new ie(r.key,r.value,"property functions not supported")):S&&!Xg(r.valueSpec)&&L.push(new ie(r.key,r.value,"zoom functions not supported"))),v!=="categorical"&&!A||r.value.property!==void 0||L.push(new ie(r.key,r.value,'"property" property is required')),L;function D(j){var Q=[],te=j.value,ce=j.key;if(nn(te)!=="array")return[new ie(ce,te,"array expected, "+nn(te)+" found")];if(te.length!==2)return[new ie(ce,te,"array length 2 expected, length "+te.length+" found")];if(A){if(nn(te[0])!=="object")return[new ie(ce,te,"object expected, "+nn(te[0])+" found")];if(te[0].zoom===void 0)return[new ie(ce,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new ie(ce,te,"object stop key must have value")];if(p&&p>Ze(te[0].zoom))return[new ie(ce,te[0].zoom,"stop zoom values must appear in ascending order")];Ze(te[0].zoom)!==p&&(p=Ze(te[0].zoom),l=void 0,x={}),Q=Q.concat(ga({key:ce+"[0]",value:te[0],valueSpec:{zoom:{}},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:ev,value:B}}))}else Q=Q.concat(B({key:ce+"[0]",value:te[0],valueSpec:{},style:j.style,styleSpec:j.styleSpec},te));return jc(Ce(te[1]))?Q.concat([new ie(ce+"[1]",te[1],"expressions are not allowed in function stops.")]):Q.concat(Sr({key:ce+"[1]",value:te[1],valueSpec:y,style:j.style,styleSpec:j.styleSpec}))}function B(j,Q){var te=nn(j.value),ce=Ze(j.value),oe=j.value!==null?j.value:Q;if(i){if(te!==i)return[new ie(j.key,oe,te+" stop domain type must match previous stop domain type "+i)]}else i=te;if(te!=="number"&&te!=="string"&&te!=="boolean")return[new ie(j.key,oe,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&v!=="categorical"){var ge="number expected, "+te+" found";return zl(y)&&v===void 0&&(ge+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ie(j.key,oe,ge)]}return v!=="categorical"||te!=="number"||isFinite(ce)&&Math.floor(ce)===ce?v!=="categorical"&&te==="number"&&l!==void 0&&ce<l?[new ie(j.key,oe,"stop domain values must appear in ascending order")]:(l=ce,v==="categorical"&&ce in x?[new ie(j.key,oe,"stop domain values must be unique")]:(x[ce]=!0,[])):[new ie(j.key,oe,"integer expected, found "+ce)]}}function Fl(r){var i=(r.expressionContext==="property"?Jg:of)(Ce(r.value),r.valueSpec);if(i.result==="error")return i.value.map(function(p){return new ie(""+r.key+p.key,r.value,p.message)});var l=i.value.expression||i.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!l.outputDefined())return[new ie(r.key,r.value,'Invalid data expression for "'+r.propertyKey+'". Output values must be contained as literals within the expression.')];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Vs(l))return[new ie(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Vs(l))return[new ie(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!Ol(l,["zoom","feature-state"]))return[new ie(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Bs(l))return[new ie(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $c(r){var i=r.key,l=r.value,p=r.valueSpec,y=[];return Array.isArray(p.values)?p.values.indexOf(Ze(l))===-1&&y.push(new ie(i,l,"expected one of ["+p.values.join(", ")+"], "+JSON.stringify(l)+" found")):Object.keys(p.values).indexOf(Ze(l))===-1&&y.push(new ie(i,l,"expected one of ["+Object.keys(p.values).join(", ")+"], "+JSON.stringify(l)+" found")),y}function af(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(var i=0,l=r.slice(1);i<l.length;i+=1){var p=l[i];if(!af(p)&&typeof p!="boolean")return!1}return!0;default:return!0}}zu.deserialize=function(r){return new zu(r._parameters,r._specification)},zu.serialize=function(r){return{_parameters:r._parameters,_specification:r._specification}};var wd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function sf(r){if(r==null)return{filter:function(){return!0},needGeometry:!1};af(r)||(r=lf(r));var i=of(r,wd);if(i.result==="error")throw new Error(i.value.map(function(l){return l.key+": "+l.message}).join(", "));return{filter:function(l,p,y){return i.value.evaluate(l,p,{},y)},needGeometry:function l(p){if(!Array.isArray(p))return!1;if(p[0]==="within")return!0;for(var y=1;y<p.length;y++)if(l(p[y]))return!0;return!1}(r)}}function V1(r,i){return r<i?-1:r>i?1:0}function lf(r){if(!r)return!0;var i,l=r[0];return r.length<=1?l!=="any":l==="=="?Ed(r[1],r[2],"=="):l==="!="?uf(Ed(r[1],r[2],"==")):l==="<"||l===">"||l==="<="||l===">="?Ed(r[1],r[2],l):l==="any"?(i=r.slice(1),["any"].concat(i.map(lf))):l==="all"?["all"].concat(r.slice(1).map(lf)):l==="none"?["all"].concat(r.slice(1).map(lf).map(uf)):l==="in"?rv(r[1],r.slice(2)):l==="!in"?uf(rv(r[1],r.slice(2))):l==="has"?nv(r[1]):l==="!has"?uf(nv(r[1])):l!=="within"||r}function Ed(r,i,l){switch(r){case"$type":return["filter-type-"+l,i];case"$id":return["filter-id-"+l,i];default:return["filter-"+l,r,i]}}function rv(r,i){if(i.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(function(l){return typeof l!=typeof i[0]})?["filter-in-large",r,["literal",i.sort(V1)]]:["filter-in-small",r,["literal",i]]}}function nv(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function uf(r){return["!",r]}function Sd(r){return af(Ce(r.value))?Fl(Ge({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function i(l){var p=l.value,y=l.key;if(nn(p)!=="array")return[new ie(y,p,"array expected, "+nn(p)+" found")];var v,x=l.styleSpec,S=[];if(p.length<1)return[new ie(y,p,"filter array must have at least 1 element")];switch(S=S.concat($c({key:y+"[0]",value:p[0],valueSpec:x.filter_operator,style:l.style,styleSpec:l.styleSpec})),Ze(p[0])){case"<":case"<=":case">":case">=":p.length>=2&&Ze(p[1])==="$type"&&S.push(new ie(y,p,'"$type" cannot be use with operator "'+p[0]+'"'));case"==":case"!=":p.length!==3&&S.push(new ie(y,p,'filter array for operator "'+p[0]+'" must have 3 elements'));case"in":case"!in":p.length>=2&&(v=nn(p[1]))!=="string"&&S.push(new ie(y+"[1]",p[1],"string expected, "+v+" found"));for(var C=2;C<p.length;C++)v=nn(p[C]),Ze(p[1])==="$type"?S=S.concat($c({key:y+"["+C+"]",value:p[C],valueSpec:x.geometry_type,style:l.style,styleSpec:l.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&S.push(new ie(y+"["+C+"]",p[C],"string, number, or boolean expected, "+v+" found"));break;case"any":case"all":case"none":for(var A=1;A<p.length;A++)S=S.concat(i({key:y+"["+A+"]",value:p[A],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":v=nn(p[1]),p.length!==2?S.push(new ie(y,p,'filter array for "'+p[0]+'" operator must have 2 elements')):v!=="string"&&S.push(new ie(y+"[1]",p[1],"string expected, "+v+" found"));break;case"within":v=nn(p[1]),p.length!==2?S.push(new ie(y,p,'filter array for "'+p[0]+'" operator must have 2 elements')):v!=="object"&&S.push(new ie(y+"[1]",p[1],"object expected, "+v+" found"))}return S}(r)}function Td(r,i){var l=r.key,p=r.style,y=r.styleSpec,v=r.value,x=r.objectKey,S=y[i+"_"+r.layerType];if(!S)return[];var C=x.match(/^(.*)-transition$/);if(i==="paint"&&C&&S[C[1]]&&S[C[1]].transition)return Sr({key:l,value:v,valueSpec:y.transition,style:p,styleSpec:y});var A,L=r.valueSpec||S[x];if(!L)return[new ie(l,v,'unknown property "'+x+'"')];if(nn(v)==="string"&&zl(L)&&!L.tokens&&(A=/^{([^}]+)}$/.exec(v)))return[new ie(l,v,'"'+x+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(A[1])+" }`.")];var D=[];return r.layerType==="symbol"&&(x==="text-field"&&p&&!p.glyphs&&D.push(new ie(l,v,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&rf(Ce(v))&&Ze(v.type)==="identity"&&D.push(new ie(l,v,'"text-font" does not support identity functions'))),D.concat(Sr({key:r.key,value:v,valueSpec:L,style:p,styleSpec:y,expressionContext:"property",propertyType:i,propertyKey:x}))}function Md(r){return Td(r,"paint")}function qc(r){return Td(r,"layout")}function iv(r){var i=[],l=r.value,p=r.key,y=r.style,v=r.styleSpec;l.type||l.ref||i.push(new ie(p,l,'either "type" or "ref" is required'));var x,S=Ze(l.type),C=Ze(l.ref);if(l.id)for(var A=Ze(l.id),L=0;L<r.arrayIndex;L++){var D=y.layers[L];Ze(D.id)===A&&i.push(new ie(p,l.id,'duplicate layer id "'+l.id+'", previously used at line '+D.id.__line__))}if("ref"in l)["type","source","source-layer","filter","layout"].forEach(function(Q){Q in l&&i.push(new ie(p,l[Q],'"'+Q+'" is prohibited for ref layers'))}),y.layers.forEach(function(Q){Ze(Q.id)===C&&(x=Q)}),x?x.ref?i.push(new ie(p,l.ref,"ref cannot reference another ref layer")):S=Ze(x.type):i.push(new ie(p,l.ref,'ref layer "'+C+'" not found'));else if(S!=="background")if(l.source){var B=y.sources&&y.sources[l.source],j=B&&Ze(B.type);B?j==="vector"&&S==="raster"?i.push(new ie(p,l.source,'layer "'+l.id+'" requires a raster source')):j==="raster"&&S!=="raster"?i.push(new ie(p,l.source,'layer "'+l.id+'" requires a vector source')):j!=="vector"||l["source-layer"]?j==="raster-dem"&&S!=="hillshade"?i.push(new ie(p,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!l.paint||!l.paint["line-gradient"]||j==="geojson"&&B.lineMetrics||i.push(new ie(p,l,'layer "'+l.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):i.push(new ie(p,l,'layer "'+l.id+'" must specify a "source-layer"')):i.push(new ie(p,l.source,'source "'+l.source+'" not found'))}else i.push(new ie(p,l,'missing required property "source"'));return i=i.concat(ga({key:p,value:l,valueSpec:v.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Sr({key:p+".type",value:l.type,valueSpec:v.layer.type,style:r.style,styleSpec:r.styleSpec,object:l,objectKey:"type"})},filter:Sd,layout:function(Q){return ga({layer:l,key:Q.key,value:Q.value,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{"*":function(te){return qc(Ge({layerType:S},te))}}})},paint:function(Q){return ga({layer:l,key:Q.key,value:Q.value,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{"*":function(te){return Md(Ge({layerType:S},te))}}})}}}))}function Bl(r){var i=r.value,l=r.key,p=nn(i);return p!=="string"?[new ie(l,i,"string expected, "+p+" found")]:[]}var vn={promoteId:function(r){var i=r.key,l=r.value;if(nn(l)==="string")return Bl({key:i,value:l});var p=[];for(var y in l)p.push.apply(p,Bl({key:i+"."+y,value:l[y]}));return p}};function cf(r){var i=r.value,l=r.key,p=r.styleSpec,y=r.style;if(!i.type)return[new ie(l,i,'"type" is required')];var v,x=Ze(i.type);switch(x){case"vector":case"raster":case"raster-dem":return ga({key:l,value:i,valueSpec:p["source_"+x.replace("-","_")],style:r.style,styleSpec:p,objectElementValidators:vn});case"geojson":if(v=ga({key:l,value:i,valueSpec:p.source_geojson,style:y,styleSpec:p,objectElementValidators:vn}),i.cluster)for(var S in i.clusterProperties){var C=i.clusterProperties[S],A=C[0],L=typeof A=="string"?[A,["accumulated"],["get",S]]:A;v.push.apply(v,Fl({key:l+"."+S+".map",value:C[1],expressionContext:"cluster-map"})),v.push.apply(v,Fl({key:l+"."+S+".reduce",value:L,expressionContext:"cluster-reduce"}))}return v;case"video":return ga({key:l,value:i,valueSpec:p.source_video,style:y,styleSpec:p});case"image":return ga({key:l,value:i,valueSpec:p.source_image,style:y,styleSpec:p});case"canvas":return[new ie(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $c({key:l+".type",value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,styleSpec:p})}}function Vl(r){var i=r.value,l=r.styleSpec,p=l.light,y=r.style,v=[],x=nn(i);if(i===void 0)return v;if(x!=="object")return v.concat([new ie("light",i,"object expected, "+x+" found")]);for(var S in i){var C=S.match(/^(.*)-transition$/);v=v.concat(C&&p[C[1]]&&p[C[1]].transition?Sr({key:S,value:i[S],valueSpec:l.transition,style:y,styleSpec:l}):p[S]?Sr({key:S,value:i[S],valueSpec:p[S],style:y,styleSpec:l}):[new ie(S,i[S],'unknown property "'+S+'"')])}return v}var Zs={"*":function(){return[]},array:Qg,boolean:function(r){var i=r.value,l=r.key,p=nn(i);return p!=="boolean"?[new ie(l,i,"boolean expected, "+p+" found")]:[]},number:ev,color:function(r){var i=r.key,l=r.value,p=nn(l);return p!=="string"?[new ie(i,l,"color expected, "+p+" found")]:_r(l)===null?[new ie(i,l,'color expected, "'+l+'" found')]:[]},constants:_e,enum:$c,filter:Sd,function:tv,layer:iv,object:ga,source:cf,light:Vl,string:Bl,formatted:function(r){return Bl(r).length===0?[]:Fl(r)},resolvedImage:function(r){return Bl(r).length===0?[]:Fl(r)}};function Sr(r){var i=r.value,l=r.valueSpec,p=r.styleSpec;return l.expression&&rf(Ze(i))?tv(r):l.expression&&jc(Ce(i))?Fl(r):l.type&&Zs[l.type]?Zs[l.type](r):ga(Ge({},r,{valueSpec:l.type?p[l.type]:l}))}function on(r){var i=r.value,l=r.key,p=Bl(r);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new ie(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new ie(l,i,'"glyphs" url must include a "{range}" token'))),p}function Vo(r,i){i===void 0&&(i=G);var l=[];return l=l.concat(Sr({key:"",value:r,valueSpec:i.$root,styleSpec:i,style:r,objectElementValidators:{glyphs:on,"*":function(){return[]}}})),r.constants&&(l=l.concat(_e({key:"constants",value:r.constants,style:r,styleSpec:i}))),Wc(l)}function Wc(r){return[].concat(r).sort(function(i,l){return i.line-l.line})}function Fu(r){return function(){for(var i=[],l=arguments.length;l--;)i[l]=arguments[l];return Wc(r.apply(this,i))}}Vo.source=Fu(cf),Vo.light=Fu(Vl),Vo.layer=Fu(iv),Vo.filter=Fu(Sd),Vo.paintProperty=Fu(Md),Vo.layoutProperty=Fu(qc);var Hc=Vo,U1=Hc.light,j1=Hc.paintProperty,Zc=Hc.layoutProperty;function Xc(r,i){var l=!1;if(i&&i.length)for(var p=0,y=i;p<y.length;p+=1)r.fire(new pe(new Error(y[p].message))),l=!0;return l}var cs=ri;function ri(r,i,l){var p=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var y=new Int32Array(this.arrayBuffer);r=y[0],this.d=(i=y[1])+2*(l=y[2]);for(var v=0;v<this.d*this.d;v++){var x=y[3+v],S=y[3+v+1];p.push(x===S?null:y.subarray(x,S))}var C=y[3+p.length+1];this.keys=y.subarray(y[3+p.length],C),this.bboxes=y.subarray(C),this.insert=this._insertReadonly}else{this.d=i+2*l;for(var A=0;A<this.d*this.d;A++)p.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=r,this.padding=l,this.scale=i/r,this.uid=0;var L=l/i*r;this.min=-L,this.max=r+L}ri.prototype.insert=function(r,i,l,p,y){this._forEachCell(i,l,p,y,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(y)},ri.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ri.prototype._insertCell=function(r,i,l,p,y,v){this.cells[y].push(v)},ri.prototype.query=function(r,i,l,p,y){var v=this.min,x=this.max;if(r<=v&&i<=v&&x<=l&&x<=p&&!y)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(r,i,l,p,this._queryCell,S,{},y),S},ri.prototype._queryCell=function(r,i,l,p,y,v,x,S){var C=this.cells[y];if(C!==null)for(var A=this.keys,L=this.bboxes,D=0;D<C.length;D++){var B=C[D];if(x[B]===void 0){var j=4*B;(S?S(L[j+0],L[j+1],L[j+2],L[j+3]):r<=L[j+2]&&i<=L[j+3]&&l>=L[j+0]&&p>=L[j+1])?(x[B]=!0,v.push(A[B])):x[B]=!1}}},ri.prototype._forEachCell=function(r,i,l,p,y,v,x,S){for(var C=this._convertToCellCoord(r),A=this._convertToCellCoord(i),L=this._convertToCellCoord(l),D=this._convertToCellCoord(p),B=C;B<=L;B++)for(var j=A;j<=D;j++){var Q=this.d*j+B;if((!S||S(this._convertFromCellCoord(B),this._convertFromCellCoord(j),this._convertFromCellCoord(B+1),this._convertFromCellCoord(j+1)))&&y.call(this,r,i,l,p,Q,v,x,S))return}},ri.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},ri.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},ri.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,i=3+this.cells.length+1+1,l=0,p=0;p<this.cells.length;p++)l+=this.cells[p].length;var y=new Int32Array(i+l+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;for(var v=i,x=0;x<r.length;x++){var S=r[x];y[3+x]=v,y.set(S,v),v+=S.length}return y[3+r.length]=v,y.set(this.keys,v),y[3+r.length+1]=v+=this.keys.length,y.set(this.bboxes,v),v+=this.bboxes.length,y.buffer};var Kc=I.ImageData,ov=I.ImageBitmap,Zn={};function wt(r,i,l){l===void 0&&(l={}),Object.defineProperty(i,"_classRegistryKey",{value:r,writeable:!1}),Zn[r]={klass:i,omit:l.omit||[],shallow:l.shallow||[]}}for(var bo in wt("Object",Object),cs.serialize=function(r,i){var l=r.toArrayBuffer();return i&&i.push(l),{buffer:l}},cs.deserialize=function(r){return new cs(r.buffer)},wt("Grid",cs),wt("Color",Br),wt("Error",Error),wt("ResolvedImage",io),wt("StylePropertyFunction",zu),wt("StyleExpression",Nu,{omit:["_evaluator"]}),wt("ZoomDependentExpression",Ru),wt("ZoomConstantExpression",Gc),wt("CompoundExpression",Ai,{omit:["_evaluate"]}),Dl)Dl[bo]._classRegistryKey||wt("Expression_"+bo,Dl[bo]);function hf(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function Bu(r){return ov&&r instanceof ov}function va(r,i){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(hf(r)||Bu(r))return i&&i.push(r),r;if(ArrayBuffer.isView(r)){var l=r;return i&&i.push(l.buffer),l}if(r instanceof Kc)return i&&i.push(r.data.buffer),r;if(Array.isArray(r)){for(var p=[],y=0,v=r;y<v.length;y+=1)p.push(va(v[y],i));return p}if(typeof r=="object"){var x=r.constructor,S=x._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var C=x.serialize?x.serialize(r,i):{};if(!x.serialize){for(var A in r)if(r.hasOwnProperty(A)&&!(Zn[S].omit.indexOf(A)>=0)){var L=r[A];C[A]=Zn[S].shallow.indexOf(A)>=0?L:va(L,i)}r instanceof Error&&(C.message=r.message)}if(C.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(C.$name=S),C}throw new Error("can't serialize object of type "+typeof r)}function wo(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||hf(r)||Bu(r)||ArrayBuffer.isView(r)||r instanceof Kc)return r;if(Array.isArray(r))return r.map(wo);if(typeof r=="object"){var i=r.$name||"Object",l=Zn[i].klass;if(!l)throw new Error("can't deserialize unregistered class "+i);if(l.deserialize)return l.deserialize(r);for(var p=Object.create(l.prototype),y=0,v=Object.keys(r);y<v.length;y+=1){var x=v[y];if(x!=="$name"){var S=r[x];p[x]=Zn[i].shallow.indexOf(x)>=0?S:wo(S)}}return p}throw new Error("can't deserialize object of type "+typeof r)}var Id=function(){this.first=!0};Id.prototype.update=function(r,i){var l=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=i),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=l,!0))};var ct={"Latin-1 Supplement":function(r){return r>=128&&r<=255},Arabic:function(r){return r>=1536&&r<=1791},"Arabic Supplement":function(r){return r>=1872&&r<=1919},"Arabic Extended-A":function(r){return r>=2208&&r<=2303},"Hangul Jamo":function(r){return r>=4352&&r<=4607},"Unified Canadian Aboriginal Syllabics":function(r){return r>=5120&&r<=5759},Khmer:function(r){return r>=6016&&r<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(r){return r>=6320&&r<=6399},"General Punctuation":function(r){return r>=8192&&r<=8303},"Letterlike Symbols":function(r){return r>=8448&&r<=8527},"Number Forms":function(r){return r>=8528&&r<=8591},"Miscellaneous Technical":function(r){return r>=8960&&r<=9215},"Control Pictures":function(r){return r>=9216&&r<=9279},"Optical Character Recognition":function(r){return r>=9280&&r<=9311},"Enclosed Alphanumerics":function(r){return r>=9312&&r<=9471},"Geometric Shapes":function(r){return r>=9632&&r<=9727},"Miscellaneous Symbols":function(r){return r>=9728&&r<=9983},"Miscellaneous Symbols and Arrows":function(r){return r>=11008&&r<=11263},"CJK Radicals Supplement":function(r){return r>=11904&&r<=12031},"Kangxi Radicals":function(r){return r>=12032&&r<=12255},"Ideographic Description Characters":function(r){return r>=12272&&r<=12287},"CJK Symbols and Punctuation":function(r){return r>=12288&&r<=12351},Hiragana:function(r){return r>=12352&&r<=12447},Katakana:function(r){return r>=12448&&r<=12543},Bopomofo:function(r){return r>=12544&&r<=12591},"Hangul Compatibility Jamo":function(r){return r>=12592&&r<=12687},Kanbun:function(r){return r>=12688&&r<=12703},"Bopomofo Extended":function(r){return r>=12704&&r<=12735},"CJK Strokes":function(r){return r>=12736&&r<=12783},"Katakana Phonetic Extensions":function(r){return r>=12784&&r<=12799},"Enclosed CJK Letters and Months":function(r){return r>=12800&&r<=13055},"CJK Compatibility":function(r){return r>=13056&&r<=13311},"CJK Unified Ideographs Extension A":function(r){return r>=13312&&r<=19903},"Yijing Hexagram Symbols":function(r){return r>=19904&&r<=19967},"CJK Unified Ideographs":function(r){return r>=19968&&r<=40959},"Yi Syllables":function(r){return r>=40960&&r<=42127},"Yi Radicals":function(r){return r>=42128&&r<=42191},"Hangul Jamo Extended-A":function(r){return r>=43360&&r<=43391},"Hangul Syllables":function(r){return r>=44032&&r<=55215},"Hangul Jamo Extended-B":function(r){return r>=55216&&r<=55295},"Private Use Area":function(r){return r>=57344&&r<=63743},"CJK Compatibility Ideographs":function(r){return r>=63744&&r<=64255},"Arabic Presentation Forms-A":function(r){return r>=64336&&r<=65023},"Vertical Forms":function(r){return r>=65040&&r<=65055},"CJK Compatibility Forms":function(r){return r>=65072&&r<=65103},"Small Form Variants":function(r){return r>=65104&&r<=65135},"Arabic Presentation Forms-B":function(r){return r>=65136&&r<=65279},"Halfwidth and Fullwidth Forms":function(r){return r>=65280&&r<=65519}};function Od(r){for(var i=0,l=r;i<l.length;i+=1)if(ff(l[i].charCodeAt(0)))return!0;return!1}function ff(r){return!(r!==746&&r!==747&&(r<4352||!(ct["Bopomofo Extended"](r)||ct.Bopomofo(r)||ct["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||ct["CJK Compatibility Ideographs"](r)||ct["CJK Compatibility"](r)||ct["CJK Radicals Supplement"](r)||ct["CJK Strokes"](r)||!(!ct["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||ct["CJK Unified Ideographs Extension A"](r)||ct["CJK Unified Ideographs"](r)||ct["Enclosed CJK Letters and Months"](r)||ct["Hangul Compatibility Jamo"](r)||ct["Hangul Jamo Extended-A"](r)||ct["Hangul Jamo Extended-B"](r)||ct["Hangul Jamo"](r)||ct["Hangul Syllables"](r)||ct.Hiragana(r)||ct["Ideographic Description Characters"](r)||ct.Kanbun(r)||ct["Kangxi Radicals"](r)||ct["Katakana Phonetic Extensions"](r)||ct.Katakana(r)&&r!==12540||!(!ct["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!ct["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||ct["Unified Canadian Aboriginal Syllabics"](r)||ct["Unified Canadian Aboriginal Syllabics Extended"](r)||ct["Vertical Forms"](r)||ct["Yijing Hexagram Symbols"](r)||ct["Yi Syllables"](r)||ct["Yi Radicals"](r))))}function Cd(r){return!(ff(r)||function(i){return!!(ct["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||ct["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||ct["Letterlike Symbols"](i)||ct["Number Forms"](i)||ct["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||ct["Control Pictures"](i)&&i!==9251||ct["Optical Character Recognition"](i)||ct["Enclosed Alphanumerics"](i)||ct["Geometric Shapes"](i)||ct["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||ct["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||ct["CJK Symbols and Punctuation"](i)||ct.Katakana(i)||ct["Private Use Area"](i)||ct["CJK Compatibility Forms"](i)||ct["Small Form Variants"](i)||ct["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(r))}function Qo(r){return r>=1424&&r<=2303||ct["Arabic Presentation Forms-A"](r)||ct["Arabic Presentation Forms-B"](r)}function Eo(r,i){return!(!i&&Qo(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||ct.Khmer(r))}function pf(r){for(var i=0,l=r;i<l.length;i+=1)if(Qo(l[i].charCodeAt(0)))return!0;return!1}var df=null,So="unavailable",hs=null,av=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(So="error"),df&&df(r)};function Yc(){Ad.fire(new ee("pluginStateChange",{pluginStatus:So,pluginURL:hs}))}var Ad=new de,Pd=function(){return So},_a=function(){if(So!=="deferred"||!hs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");So="loading",Yc(),hs&&Ml({url:hs},function(r){r?av(r):(So="loaded",Yc())})},Uo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return So==="loaded"||Uo.applyArabicShaping!=null},isLoading:function(){return So==="loading"},setState:function(r){So=r.pluginStatus,hs=r.pluginURL},isParsed:function(){return Uo.applyArabicShaping!=null&&Uo.processBidirectionalText!=null&&Uo.processStyledBidirectionalText!=null},getPluginURL:function(){return hs}},gr=function(r,i){this.zoom=r,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Id,this.transition={})};gr.prototype.isSupportedScript=function(r){return function(i,l){for(var p=0,y=i;p<y.length;p+=1)if(!Eo(y[p].charCodeAt(0),l))return!1;return!0}(r,Uo.isLoaded())},gr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},gr.prototype.getCrossfadeParameters=function(){var r=this.zoom,i=r-Math.floor(r),l=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*i}};var Ra=function(r,i){this.property=r,this.value=i,this.expression=function(l,p){if(rf(l))return new zu(l,p);if(jc(l)){var y=Jg(l,p);if(y.result==="error")throw new Error(y.value.map(function(x){return x.key+": "+x.message}).join(", "));return y.value}var v=l;return typeof l=="string"&&p.type==="color"&&(v=Br.parse(l)),{kind:"constant",evaluate:function(){return v}}}(i===void 0?r.specification.default:i,r.specification)};Ra.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ra.prototype.possiblyEvaluate=function(r,i,l){return this.property.possiblyEvaluate(this,r,i,l)};var ea=function(r){this.property=r,this.value=new Ra(r,void 0)};ea.prototype.transitioned=function(r,i){return new Ul(this.property,this.value,i,X({},r.transition,this.transition),r.now)},ea.prototype.untransitioned=function(){return new Ul(this.property,this.value,null,{},0)};var ki=function(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)};ki.prototype.getValue=function(r){return Je(this._values[r].value.value)},ki.prototype.setValue=function(r,i){this._values.hasOwnProperty(r)||(this._values[r]=new ea(this._values[r].property)),this._values[r].value=new Ra(this._values[r].property,i===null?void 0:Je(i))},ki.prototype.getTransition=function(r){return Je(this._values[r].transition)},ki.prototype.setTransition=function(r,i){this._values.hasOwnProperty(r)||(this._values[r]=new ea(this._values[r].property)),this._values[r].transition=Je(i)||void 0},ki.prototype.serialize=function(){for(var r={},i=0,l=Object.keys(this._values);i<l.length;i+=1){var p=l[i],y=this.getValue(p);y!==void 0&&(r[p]=y);var v=this.getTransition(p);v!==void 0&&(r[p+"-transition"]=v)}return r},ki.prototype.transitioned=function(r,i){for(var l=new Xs(this._properties),p=0,y=Object.keys(this._values);p<y.length;p+=1){var v=y[p];l._values[v]=this._values[v].transitioned(r,i._values[v])}return l},ki.prototype.untransitioned=function(){for(var r=new Xs(this._properties),i=0,l=Object.keys(this._values);i<l.length;i+=1){var p=l[i];r._values[p]=this._values[p].untransitioned()}return r};var Ul=function(r,i,l,p,y){this.property=r,this.value=i,this.begin=y+p.delay||0,this.end=this.begin+p.duration||0,r.specification.transition&&(p.delay||p.duration)&&(this.prior=l)};Ul.prototype.possiblyEvaluate=function(r,i,l){var p=r.now||0,y=this.value.possiblyEvaluate(r,i,l),v=this.prior;if(v){if(p>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(p<this.begin)return v.possiblyEvaluate(r,i,l);var x=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(r,i,l),y,function(S){if(S<=0)return 0;if(S>=1)return 1;var C=S*S,A=C*S;return 4*(S<.5?A:3*(S-C)+A-.75)}(x))}return y};var Xs=function(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)};Xs.prototype.possiblyEvaluate=function(r,i,l){for(var p=new Jc(this._properties),y=0,v=Object.keys(this._values);y<v.length;y+=1){var x=v[y];p._values[x]=this._values[x].possiblyEvaluate(r,i,l)}return p},Xs.prototype.hasTransition=function(){for(var r=0,i=Object.keys(this._values);r<i.length;r+=1)if(this._values[i[r]].prior)return!0;return!1};var xa=function(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)};xa.prototype.getValue=function(r){return Je(this._values[r].value)},xa.prototype.setValue=function(r,i){this._values[r]=new Ra(this._values[r].property,i===null?void 0:Je(i))},xa.prototype.serialize=function(){for(var r={},i=0,l=Object.keys(this._values);i<l.length;i+=1){var p=l[i],y=this.getValue(p);y!==void 0&&(r[p]=y)}return r},xa.prototype.possiblyEvaluate=function(r,i,l){for(var p=new Jc(this._properties),y=0,v=Object.keys(this._values);y<v.length;y+=1){var x=v[y];p._values[x]=this._values[x].possiblyEvaluate(r,i,l)}return p};var Hi=function(r,i,l){this.property=r,this.value=i,this.parameters=l};Hi.prototype.isConstant=function(){return this.value.kind==="constant"},Hi.prototype.constantOr=function(r){return this.value.kind==="constant"?this.value.value:r},Hi.prototype.evaluate=function(r,i,l,p){return this.property.evaluate(this.value,this.parameters,r,i,l,p)};var Jc=function(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)};Jc.prototype.get=function(r){return this._values[r]};var Dt=function(r){this.specification=r};Dt.prototype.possiblyEvaluate=function(r,i){return r.expression.evaluate(i)},Dt.prototype.interpolate=function(r,i,l){var p=Lu[this.specification.type];return p?p(r,i,l):r};var Tt=function(r,i){this.specification=r,this.overrides=i};Tt.prototype.possiblyEvaluate=function(r,i,l,p){return new Hi(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(i,null,{},l,p)}:r.expression,i)},Tt.prototype.interpolate=function(r,i,l){if(r.value.kind!=="constant"||i.value.kind!=="constant")return r;if(r.value.value===void 0||i.value.value===void 0)return new Hi(this,{kind:"constant",value:void 0},r.parameters);var p=Lu[this.specification.type];return p?new Hi(this,{kind:"constant",value:p(r.value.value,i.value.value,l)},r.parameters):r},Tt.prototype.evaluate=function(r,i,l,p,y,v){return r.kind==="constant"?r.value:r.evaluate(i,l,p,y,v)};var mf=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(l,p,y,v){if(l.value===void 0)return new Hi(this,{kind:"constant",value:void 0},p);if(l.expression.kind==="constant"){var x=l.expression.evaluate(p,null,{},y,v),S=l.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,C=this._calculate(S,S,S,p);return new Hi(this,{kind:"constant",value:C},p)}if(l.expression.kind==="camera"){var A=this._calculate(l.expression.evaluate({zoom:p.zoom-1}),l.expression.evaluate({zoom:p.zoom}),l.expression.evaluate({zoom:p.zoom+1}),p);return new Hi(this,{kind:"constant",value:A},p)}return new Hi(this,l.expression,p)},i.prototype.evaluate=function(l,p,y,v,x,S){if(l.kind==="source"){var C=l.evaluate(p,y,v,x,S);return this._calculate(C,C,C,p)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(p.zoom)-1},y,v),l.evaluate({zoom:Math.floor(p.zoom)},y,v),l.evaluate({zoom:Math.floor(p.zoom)+1},y,v),p):l.value},i.prototype._calculate=function(l,p,y,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:l,to:p}:{from:y,to:p}},i.prototype.interpolate=function(l){return l},i}(Tt),Zi=function(r){this.specification=r};Zi.prototype.possiblyEvaluate=function(r,i,l,p){if(r.value!==void 0){if(r.expression.kind==="constant"){var y=r.expression.evaluate(i,null,{},l,p);return this._calculate(y,y,y,i)}return this._calculate(r.expression.evaluate(new gr(Math.floor(i.zoom-1),i)),r.expression.evaluate(new gr(Math.floor(i.zoom),i)),r.expression.evaluate(new gr(Math.floor(i.zoom+1),i)),i)}},Zi.prototype._calculate=function(r,i,l,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:i}:{from:l,to:i}},Zi.prototype.interpolate=function(r){return r};var ba=function(r){this.specification=r};ba.prototype.possiblyEvaluate=function(r,i,l,p){return!!r.expression.evaluate(i,null,{},l,p)},ba.prototype.interpolate=function(){return!1};var Li=function(r){for(var i in this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],r){var l=r[i];l.specification.overridable&&this.overridableProperties.push(i);var p=this.defaultPropertyValues[i]=new Ra(l,void 0),y=this.defaultTransitionablePropertyValues[i]=new ea(l);this.defaultTransitioningPropertyValues[i]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=p.possiblyEvaluate({})}};wt("DataDrivenProperty",Tt),wt("DataConstantProperty",Dt),wt("CrossFadedDataDrivenProperty",mf),wt("CrossFadedProperty",Zi),wt("ColorRampProperty",ba);var za=function(r){function i(l,p){if(r.call(this),this.id=l.id,this.type=l.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},l.type!=="custom"&&(this.metadata=(l=l).metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),p.layout&&(this._unevaluatedLayout=new xa(p.layout)),p.paint)){for(var y in this._transitionablePaint=new ki(p.paint),l.paint)this.setPaintProperty(y,l.paint[y],{validate:!1});for(var v in l.layout)this.setLayoutProperty(v,l.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Jc(p.paint)}}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},i.prototype.getLayoutProperty=function(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)},i.prototype.setLayoutProperty=function(l,p,y){y===void 0&&(y={}),p!=null&&this._validate(Zc,"layers."+this.id+".layout."+l,l,p,y)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,p):this.visibility=p)},i.prototype.getPaintProperty=function(l){return Pe(l,"-transition")?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)},i.prototype.setPaintProperty=function(l,p,y){if(y===void 0&&(y={}),p!=null&&this._validate(j1,"layers."+this.id+".paint."+l,l,p,y))return!1;if(Pe(l,"-transition"))return this._transitionablePaint.setTransition(l.slice(0,-11),p||void 0),!1;var v=this._transitionablePaint._values[l],x=v.property.specification["property-type"]==="cross-faded-data-driven",S=v.value.isDataDriven(),C=v.value;this._transitionablePaint.setValue(l,p),this._handleSpecialPaintPropertyUpdate(l);var A=this._transitionablePaint._values[l].value;return A.isDataDriven()||S||x||this._handleOverridablePaintPropertyUpdate(l,C,A)},i.prototype._handleSpecialPaintPropertyUpdate=function(l){},i.prototype._handleOverridablePaintPropertyUpdate=function(l,p,y){return!1},i.prototype.isHidden=function(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"},i.prototype.updateTransitions=function(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)},i.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},i.prototype.recalculate=function(l,p){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,p)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,p)},i.prototype.serialize=function(){var l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),Ie(l,function(p,y){return!(p===void 0||y==="layout"&&!Object.keys(p).length||y==="paint"&&!Object.keys(p).length)})},i.prototype._validate=function(l,p,y,v,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&Xc(this,l.call(Hc,{key:p,layerType:this.type,objectKey:y,value:v,styleSpec:G,style:{glyphs:!0,sprite:!0}}))},i.prototype.is3D=function(){return!1},i.prototype.isTileClipped=function(){return!1},i.prototype.hasOffscreenPass=function(){return!1},i.prototype.resize=function(){},i.prototype.isStateDependent=function(){for(var l in this.paint._values){var p=this.paint.get(l);if(p instanceof Hi&&zl(p.property.specification)&&(p.value.kind==="source"||p.value.kind==="composite")&&p.value.isStateDependent)return!0}return!1},i}(de),kd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},yf=function(r,i){this._structArray=r,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},$r=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function xi(r,i){i===void 0&&(i=1);var l=0,p=0;return{members:r.map(function(y){var v=kd[y.type].BYTES_PER_ELEMENT,x=l=sv(l,Math.max(i,v)),S=y.components||1;return p=Math.max(p,v),l+=v*S,{name:y.name,type:y.type,components:S,offset:x}}),size:sv(l,Math.max(p,i)),alignment:i}}function sv(r,i){return Math.ceil(r/i)*i}$r.serialize=function(r,i){return r._trim(),i&&(r.isTransferred=!0,i.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}},$r.deserialize=function(r){var i=Object.create(this.prototype);return i.arrayBuffer=r.arrayBuffer,i.length=r.length,i.capacity=r.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i},$r.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},$r.prototype.clear=function(){this.length=0},$r.prototype.resize=function(r){this.reserve(r),this.length=r},$r.prototype.reserve=function(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}},$r.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var jl=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p){var y=this.length;return this.resize(y+1),this.emplace(y,l,p)},i.prototype.emplace=function(l,p,y){var v=2*l;return this.int16[v+0]=p,this.int16[v+1]=y,l},i}($r);jl.prototype.bytesPerElement=4,wt("StructArrayLayout2i4",jl);var Ld=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v){var x=this.length;return this.resize(x+1),this.emplace(x,l,p,y,v)},i.prototype.emplace=function(l,p,y,v,x){var S=4*l;return this.int16[S+0]=p,this.int16[S+1]=y,this.int16[S+2]=v,this.int16[S+3]=x,l},i}($r);Ld.prototype.bytesPerElement=8,wt("StructArrayLayout4i8",Ld);var fs=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,S){var C=this.length;return this.resize(C+1),this.emplace(C,l,p,y,v,x,S)},i.prototype.emplace=function(l,p,y,v,x,S,C){var A=6*l;return this.int16[A+0]=p,this.int16[A+1]=y,this.int16[A+2]=v,this.int16[A+3]=x,this.int16[A+4]=S,this.int16[A+5]=C,l},i}($r);fs.prototype.bytesPerElement=12,wt("StructArrayLayout2i4i12",fs);var To=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,S){var C=this.length;return this.resize(C+1),this.emplace(C,l,p,y,v,x,S)},i.prototype.emplace=function(l,p,y,v,x,S,C){var A=4*l,L=8*l;return this.int16[A+0]=p,this.int16[A+1]=y,this.uint8[L+4]=v,this.uint8[L+5]=x,this.uint8[L+6]=S,this.uint8[L+7]=C,l},i}($r);To.prototype.bytesPerElement=8,wt("StructArrayLayout2i4ub8",To);var Vu=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p){var y=this.length;return this.resize(y+1),this.emplace(y,l,p)},i.prototype.emplace=function(l,p,y){var v=2*l;return this.float32[v+0]=p,this.float32[v+1]=y,l},i}($r);Vu.prototype.bytesPerElement=8,wt("StructArrayLayout2f8",Vu);var Fa=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,S,C,A,L,D){var B=this.length;return this.resize(B+1),this.emplace(B,l,p,y,v,x,S,C,A,L,D)},i.prototype.emplace=function(l,p,y,v,x,S,C,A,L,D,B){var j=10*l;return this.uint16[j+0]=p,this.uint16[j+1]=y,this.uint16[j+2]=v,this.uint16[j+3]=x,this.uint16[j+4]=S,this.uint16[j+5]=C,this.uint16[j+6]=A,this.uint16[j+7]=L,this.uint16[j+8]=D,this.uint16[j+9]=B,l},i}($r);Fa.prototype.bytesPerElement=20,wt("StructArrayLayout10ui20",Fa);var gf=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,S,C,A,L,D,B,j){var Q=this.length;return this.resize(Q+1),this.emplace(Q,l,p,y,v,x,S,C,A,L,D,B,j)},i.prototype.emplace=function(l,p,y,v,x,S,C,A,L,D,B,j,Q){var te=12*l;return this.int16[te+0]=p,this.int16[te+1]=y,this.int16[te+2]=v,this.int16[te+3]=x,this.uint16[te+4]=S,this.uint16[te+5]=C,this.uint16[te+6]=A,this.uint16[te+7]=L,this.int16[te+8]=D,this.int16[te+9]=B,this.int16[te+10]=j,this.int16[te+11]=Q,l},i}($r);gf.prototype.bytesPerElement=24,wt("StructArrayLayout4i4ui4i24",gf);var Uu=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y){var v=this.length;return this.resize(v+1),this.emplace(v,l,p,y)},i.prototype.emplace=function(l,p,y,v){var x=3*l;return this.float32[x+0]=p,this.float32[x+1]=y,this.float32[x+2]=v,l},i}($r);Uu.prototype.bytesPerElement=12,wt("StructArrayLayout3f12",Uu);var Qc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l){var p=this.length;return this.resize(p+1),this.emplace(p,l)},i.prototype.emplace=function(l,p){return this.uint32[1*l+0]=p,l},i}($r);Qc.prototype.bytesPerElement=4,wt("StructArrayLayout1ul4",Qc);var Dd=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,S,C,A,L){var D=this.length;return this.resize(D+1),this.emplace(D,l,p,y,v,x,S,C,A,L)},i.prototype.emplace=function(l,p,y,v,x,S,C,A,L,D){var B=10*l,j=5*l;return this.int16[B+0]=p,this.int16[B+1]=y,this.int16[B+2]=v,this.int16[B+3]=x,this.int16[B+4]=S,this.int16[B+5]=C,this.uint32[j+3]=A,this.uint16[B+8]=L,this.uint16[B+9]=D,l},i}($r);Dd.prototype.bytesPerElement=20,wt("StructArrayLayout6i1ul2ui20",Dd);var ju=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,S){var C=this.length;return this.resize(C+1),this.emplace(C,l,p,y,v,x,S)},i.prototype.emplace=function(l,p,y,v,x,S,C){var A=6*l;return this.int16[A+0]=p,this.int16[A+1]=y,this.int16[A+2]=v,this.int16[A+3]=x,this.int16[A+4]=S,this.int16[A+5]=C,l},i}($r);ju.prototype.bytesPerElement=12,wt("StructArrayLayout2i2i2i12",ju);var Gl=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x){var S=this.length;return this.resize(S+1),this.emplace(S,l,p,y,v,x)},i.prototype.emplace=function(l,p,y,v,x,S){var C=4*l,A=8*l;return this.float32[C+0]=p,this.float32[C+1]=y,this.float32[C+2]=v,this.int16[A+6]=x,this.int16[A+7]=S,l},i}($r);Gl.prototype.bytesPerElement=16,wt("StructArrayLayout2f1f2i16",Gl);var Nd=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v){var x=this.length;return this.resize(x+1),this.emplace(x,l,p,y,v)},i.prototype.emplace=function(l,p,y,v,x){var S=12*l,C=3*l;return this.uint8[S+0]=p,this.uint8[S+1]=y,this.float32[C+1]=v,this.float32[C+2]=x,l},i}($r);Nd.prototype.bytesPerElement=12,wt("StructArrayLayout2ub2f12",Nd);var Ks=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y){var v=this.length;return this.resize(v+1),this.emplace(v,l,p,y)},i.prototype.emplace=function(l,p,y,v){var x=3*l;return this.uint16[x+0]=p,this.uint16[x+1]=y,this.uint16[x+2]=v,l},i}($r);Ks.prototype.bytesPerElement=6,wt("StructArrayLayout3ui6",Ks);var Ys=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,S,C,A,L,D,B,j,Q,te,ce,oe,ge){var we=this.length;return this.resize(we+1),this.emplace(we,l,p,y,v,x,S,C,A,L,D,B,j,Q,te,ce,oe,ge)},i.prototype.emplace=function(l,p,y,v,x,S,C,A,L,D,B,j,Q,te,ce,oe,ge,we){var Te=24*l,Oe=12*l,Be=48*l;return this.int16[Te+0]=p,this.int16[Te+1]=y,this.uint16[Te+2]=v,this.uint16[Te+3]=x,this.uint32[Oe+2]=S,this.uint32[Oe+3]=C,this.uint32[Oe+4]=A,this.uint16[Te+10]=L,this.uint16[Te+11]=D,this.uint16[Te+12]=B,this.float32[Oe+7]=j,this.float32[Oe+8]=Q,this.uint8[Be+36]=te,this.uint8[Be+37]=ce,this.uint8[Be+38]=oe,this.uint32[Oe+10]=ge,this.int16[Te+22]=we,l},i}($r);Ys.prototype.bytesPerElement=48,wt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ys);var vf=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,S,C,A,L,D,B,j,Q,te,ce,oe,ge,we,Te,Oe,Be,Xe,ot,Pt,dt,Rt,yt,lr){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,l,p,y,v,x,S,C,A,L,D,B,j,Q,te,ce,oe,ge,we,Te,Oe,Be,Xe,ot,Pt,dt,Rt,yt,lr)},i.prototype.emplace=function(l,p,y,v,x,S,C,A,L,D,B,j,Q,te,ce,oe,ge,we,Te,Oe,Be,Xe,ot,Pt,dt,Rt,yt,lr,Wt){var Mt=34*l,pr=17*l;return this.int16[Mt+0]=p,this.int16[Mt+1]=y,this.int16[Mt+2]=v,this.int16[Mt+3]=x,this.int16[Mt+4]=S,this.int16[Mt+5]=C,this.int16[Mt+6]=A,this.int16[Mt+7]=L,this.uint16[Mt+8]=D,this.uint16[Mt+9]=B,this.uint16[Mt+10]=j,this.uint16[Mt+11]=Q,this.uint16[Mt+12]=te,this.uint16[Mt+13]=ce,this.uint16[Mt+14]=oe,this.uint16[Mt+15]=ge,this.uint16[Mt+16]=we,this.uint16[Mt+17]=Te,this.uint16[Mt+18]=Oe,this.uint16[Mt+19]=Be,this.uint16[Mt+20]=Xe,this.uint16[Mt+21]=ot,this.uint16[Mt+22]=Pt,this.uint32[pr+12]=dt,this.float32[pr+13]=Rt,this.float32[pr+14]=yt,this.float32[pr+15]=lr,this.float32[pr+16]=Wt,l},i}($r);vf.prototype.bytesPerElement=68,wt("StructArrayLayout8i15ui1ul4f68",vf);var Js=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l){var p=this.length;return this.resize(p+1),this.emplace(p,l)},i.prototype.emplace=function(l,p){return this.float32[1*l+0]=p,l},i}($r);Js.prototype.bytesPerElement=4,wt("StructArrayLayout1f4",Js);var ta=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y){var v=this.length;return this.resize(v+1),this.emplace(v,l,p,y)},i.prototype.emplace=function(l,p,y,v){var x=3*l;return this.int16[x+0]=p,this.int16[x+1]=y,this.int16[x+2]=v,l},i}($r);ta.prototype.bytesPerElement=6,wt("StructArrayLayout3i6",ta);var Rd=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y){var v=this.length;return this.resize(v+1),this.emplace(v,l,p,y)},i.prototype.emplace=function(l,p,y,v){var x=4*l;return this.uint32[2*l+0]=p,this.uint16[x+2]=y,this.uint16[x+3]=v,l},i}($r);Rd.prototype.bytesPerElement=8,wt("StructArrayLayout1ul2ui8",Rd);var eh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p){var y=this.length;return this.resize(y+1),this.emplace(y,l,p)},i.prototype.emplace=function(l,p,y){var v=2*l;return this.uint16[v+0]=p,this.uint16[v+1]=y,l},i}($r);eh.prototype.bytesPerElement=4,wt("StructArrayLayout2ui4",eh);var zd=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l){var p=this.length;return this.resize(p+1),this.emplace(p,l)},i.prototype.emplace=function(l,p){return this.uint16[1*l+0]=p,l},i}($r);zd.prototype.bytesPerElement=2,wt("StructArrayLayout1ui2",zd);var _f=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v){var x=this.length;return this.resize(x+1),this.emplace(x,l,p,y,v)},i.prototype.emplace=function(l,p,y,v,x){var S=4*l;return this.float32[S+0]=p,this.float32[S+1]=y,this.float32[S+2]=v,this.float32[S+3]=x,l},i}($r);_f.prototype.bytesPerElement=16,wt("StructArrayLayout4f16",_f);var u=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var l={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return l.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},l.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},l.x1.get=function(){return this._structArray.int16[this._pos2+2]},l.y1.get=function(){return this._structArray.int16[this._pos2+3]},l.x2.get=function(){return this._structArray.int16[this._pos2+4]},l.y2.get=function(){return this._structArray.int16[this._pos2+5]},l.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},l.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},l.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},l.anchorPoint.get=function(){return new T(this.anchorPointX,this.anchorPointY)},Object.defineProperties(i.prototype,l),i}(yf);u.prototype.size=20;var f=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(l){return new u(this,l)},i}(Dd);wt("CollisionBoxArray",f);var c=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var l={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return l.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},l.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},l.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},l.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},l.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},l.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},l.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},l.segment.get=function(){return this._structArray.uint16[this._pos2+10]},l.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},l.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},l.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},l.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},l.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},l.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},l.placedOrientation.set=function(p){this._structArray.uint8[this._pos1+37]=p},l.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},l.hidden.set=function(p){this._structArray.uint8[this._pos1+38]=p},l.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},l.crossTileID.set=function(p){this._structArray.uint32[this._pos4+10]=p},l.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(i.prototype,l),i}(yf);c.prototype.size=48;var d=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(l){return new c(this,l)},i}(Ys);wt("PlacedSymbolArray",d);var _=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var l={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return l.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},l.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},l.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},l.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},l.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},l.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},l.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},l.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},l.key.get=function(){return this._structArray.uint16[this._pos2+8]},l.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},l.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},l.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},l.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},l.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},l.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},l.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},l.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},l.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},l.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},l.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},l.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},l.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},l.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},l.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},l.crossTileID.set=function(p){this._structArray.uint32[this._pos4+12]=p},l.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},l.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},l.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},l.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(i.prototype,l),i}(yf);_.prototype.size=68;var w=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(l){return new _(this,l)},i}(vf);wt("SymbolInstanceArray",w);var E=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getoffsetX=function(l){return this.float32[1*l+0]},i}(Js);wt("GlyphOffsetArray",E);var O=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getx=function(l){return this.int16[3*l+0]},i.prototype.gety=function(l){return this.int16[3*l+1]},i.prototype.gettileUnitDistanceFromAnchor=function(l){return this.int16[3*l+2]},i}(ta);wt("SymbolLineVertexArray",O);var k=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var l={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return l.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},l.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},l.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(i.prototype,l),i}(yf);k.prototype.size=8;var R=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(l){return new k(this,l)},i}(Rd);wt("FeatureIndexArray",R);var $=xi([{name:"a_pos",components:2,type:"Int16"}],4).members,q=function(r){r===void 0&&(r=[]),this.segments=r};function H(r,i){return 256*(r=W(Math.floor(r),0,255))+W(Math.floor(i),0,255)}q.prototype.prepareSegment=function(r,i,l,p){var y=this.segments[this.segments.length-1];return r>q.MAX_VERTEX_ARRAY_LENGTH&&st("Max vertices per segment is "+q.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+r),(!y||y.vertexLength+r>q.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==p)&&(y={vertexOffset:i.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},p!==void 0&&(y.sortKey=p),this.segments.push(y)),y},q.prototype.get=function(){return this.segments},q.prototype.destroy=function(){for(var r=0,i=this.segments;r<i.length;r+=1){var l=i[r];for(var p in l.vaos)l.vaos[p].destroy()}},q.simpleSegment=function(r,i,l,p){return new q([{vertexOffset:r,primitiveOffset:i,vertexLength:l,primitiveLength:p,vaos:{},sortKey:0}])},q.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wt("SegmentVector",q);var ne=xi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),re=m(function(r){r.exports=function(i,l){var p,y,v,x,S,C,A,L;for(y=i.length-(p=3&i.length),v=l,S=3432918353,C=461845907,L=0;L<y;)A=255&i.charCodeAt(L)|(255&i.charCodeAt(++L))<<8|(255&i.charCodeAt(++L))<<16|(255&i.charCodeAt(++L))<<24,++L,v=27492+(65535&(x=5*(65535&(v=(v^=A=(65535&(A=(A=(65535&A)*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*C+(((A>>>16)*C&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(A=0,p){case 3:A^=(255&i.charCodeAt(L+2))<<16;case 2:A^=(255&i.charCodeAt(L+1))<<8;case 1:v^=A=(65535&(A=(A=(65535&(A^=255&i.charCodeAt(L)))*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*C+(((A>>>16)*C&65535)<<16)&4294967295}return v^=i.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}}),le=m(function(r){r.exports=function(i,l){for(var p,y=i.length,v=l^y,x=0;y>=4;)p=1540483477*(65535&(p=255&i.charCodeAt(x)|(255&i.charCodeAt(++x))<<8|(255&i.charCodeAt(++x))<<16|(255&i.charCodeAt(++x))<<24))+((1540483477*(p>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),y-=4,++x;switch(y){case 3:v^=(255&i.charCodeAt(x+2))<<16;case 2:v^=(255&i.charCodeAt(x+1))<<8;case 1:v=1540483477*(65535&(v^=255&i.charCodeAt(x)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}}),J=re,se=le;J.murmur3=re,J.murmur2=se;var me=function(){this.ids=[],this.positions=[],this.indexed=!1};me.prototype.add=function(r,i,l,p){this.ids.push(Ae(r)),this.positions.push(i,l,p)},me.prototype.getPositions=function(r){for(var i=Ae(r),l=0,p=this.ids.length-1;l<p;){var y=l+p>>1;this.ids[y]>=i?p=y:l=y+1}for(var v=[];this.ids[l]===i;)v.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return v},me.serialize=function(r,i){var l=new Float64Array(r.ids),p=new Uint32Array(r.positions);return function y(v,x,S,C){for(;S<C;){for(var A=v[S+C>>1],L=S-1,D=C+1;;){do L++;while(v[L]<A);do D--;while(v[D]>A);if(L>=D)break;Me(v,L,D),Me(x,3*L,3*D),Me(x,3*L+1,3*D+1),Me(x,3*L+2,3*D+2)}D-S<C-D?(y(v,x,S,D),S=D+1):(y(v,x,D+1,C),C=D)}}(l,p,0,l.length-1),i&&i.push(l.buffer,p.buffer),{ids:l,positions:p}},me.deserialize=function(r){var i=new me;return i.ids=r.ids,i.positions=r.positions,i.indexed=!0,i};var xe=Math.pow(2,53)-1;function Ae(r){var i=+r;return!isNaN(i)&&i<=xe?i:J(String(r))}function Me(r,i,l){var p=r[i];r[i]=r[l],r[l]=p}wt("FeaturePositionMap",me);var ke=function(r,i){this.gl=r.gl,this.location=i},je=function(r){function i(l,p){r.call(this,l,p),this.current=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))},i}(ke),it=function(r){function i(l,p){r.call(this,l,p),this.current=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))},i}(ke),tt=function(r){function i(l,p){r.call(this,l,p),this.current=[0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))},i}(ke),gt=function(r){function i(l,p){r.call(this,l,p),this.current=[0,0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))},i}(ke),Nt=function(r){function i(l,p){r.call(this,l,p),this.current=[0,0,0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))},i}(ke),Ut=function(r){function i(l,p){r.call(this,l,p),this.current=Br.transparent}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))},i}(ke),Bt=new Float32Array(16),Cr=function(r){function i(l,p){r.call(this,l,p),this.current=Bt}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(var p=1;p<16;p++)if(l[p]!==this.current[p]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}},i}(ke);function xt(r){return[H(255*r.r,255*r.g),H(255*r.b,255*r.a)]}var Jt=function(r,i,l){this.value=r,this.uniformNames=i.map(function(p){return"u_"+p}),this.type=l};Jt.prototype.setUniform=function(r,i,l){r.set(l.constantOr(this.value))},Jt.prototype.getBinding=function(r,i,l){return this.type==="color"?new Ut(r,i):new it(r,i)};var sr=function(r,i){this.uniformNames=i.map(function(l){return"u_"+l}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};sr.prototype.setConstantPatternPositions=function(r,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=r.tlbr},sr.prototype.setUniform=function(r,i,l,p){var y=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&r.set(y)},sr.prototype.getBinding=function(r,i,l){return l.substr(0,9)==="u_pattern"?new Nt(r,i):new it(r,i)};var Yt=function(r,i,l,p){this.expression=r,this.type=l,this.maxValue=0,this.paintVertexAttributes=i.map(function(y){return{name:"a_"+y,type:"Float32",components:l==="color"?2:1,offset:0}}),this.paintVertexArray=new p};Yt.prototype.populatePaintArray=function(r,i,l,p,y){var v=this.paintVertexArray.length,x=this.expression.evaluate(new gr(0),i,{},p,[],y);this.paintVertexArray.resize(r),this._setPaintValue(v,r,x)},Yt.prototype.updatePaintArray=function(r,i,l,p){var y=this.expression.evaluate({zoom:0},l,p);this._setPaintValue(r,i,y)},Yt.prototype._setPaintValue=function(r,i,l){if(this.type==="color")for(var p=xt(l),y=r;y<i;y++)this.paintVertexArray.emplace(y,p[0],p[1]);else{for(var v=r;v<i;v++)this.paintVertexArray.emplace(v,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}},Yt.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Yt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Kt=function(r,i,l,p,y,v){this.expression=r,this.uniformNames=i.map(function(x){return"u_"+x+"_t"}),this.type=l,this.useIntegerZoom=p,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=i.map(function(x){return{name:"a_"+x,type:"Float32",components:l==="color"?4:2,offset:0}}),this.paintVertexArray=new v};Kt.prototype.populatePaintArray=function(r,i,l,p,y){var v=this.expression.evaluate(new gr(this.zoom),i,{},p,[],y),x=this.expression.evaluate(new gr(this.zoom+1),i,{},p,[],y),S=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(S,r,v,x)},Kt.prototype.updatePaintArray=function(r,i,l,p){var y=this.expression.evaluate({zoom:this.zoom},l,p),v=this.expression.evaluate({zoom:this.zoom+1},l,p);this._setPaintValue(r,i,y,v)},Kt.prototype._setPaintValue=function(r,i,l,p){if(this.type==="color")for(var y=xt(l),v=xt(p),x=r;x<i;x++)this.paintVertexArray.emplace(x,y[0],y[1],v[0],v[1]);else{for(var S=r;S<i;S++)this.paintVertexArray.emplace(S,l,p);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(p))}},Kt.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Kt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Kt.prototype.setUniform=function(r,i){var l=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,p=W(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);r.set(p)},Kt.prototype.getBinding=function(r,i,l){return new it(r,i)};var ir=function(r,i,l,p,y,v){this.expression=r,this.type=i,this.useIntegerZoom=l,this.zoom=p,this.layerId=v,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y};ir.prototype.populatePaintArray=function(r,i,l){var p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(p,r,i.patterns&&i.patterns[this.layerId],l)},ir.prototype.updatePaintArray=function(r,i,l,p,y){this._setPaintValues(r,i,l.patterns&&l.patterns[this.layerId],y)},ir.prototype._setPaintValues=function(r,i,l,p){if(p&&l){var y=p[l.min],v=p[l.mid],x=p[l.max];if(y&&v&&x)for(var S=r;S<i;S++)this.zoomInPaintVertexArray.emplace(S,v.tl[0],v.tl[1],v.br[0],v.br[1],y.tl[0],y.tl[1],y.br[0],y.br[1],v.pixelRatio,y.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,v.tl[0],v.tl[1],v.br[0],v.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],v.pixelRatio,x.pixelRatio)}},ir.prototype.upload=function(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,ne.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,ne.members,this.expression.isStateDependent))},ir.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Zt=function(r,i,l){this.binders={},this._buffers=[];var p=[];for(var y in r.paint._values)if(l(y)){var v=r.paint.get(y);if(v instanceof Hi&&zl(v.property.specification)){var x=fi(y,r.type),S=v.value,C=v.property.specification.type,A=v.property.useIntegerZoom,L=v.property.specification["property-type"],D=L==="cross-faded"||L==="cross-faded-data-driven";if(S.kind==="constant")this.binders[y]=D?new sr(S.value,x):new Jt(S.value,x,C),p.push("/u_"+y);else if(S.kind==="source"||D){var B=An(y,C,"source");this.binders[y]=D?new ir(S,C,A,i,B,r.id):new Yt(S,x,C,B),p.push("/a_"+y)}else{var j=An(y,C,"composite");this.binders[y]=new Kt(S,x,C,A,i,j),p.push("/z_"+y)}}}this.cacheKey=p.sort().join("")};Zt.prototype.getMaxValue=function(r){var i=this.binders[r];return i instanceof Yt||i instanceof Kt?i.maxValue:0},Zt.prototype.populatePaintArrays=function(r,i,l,p,y){for(var v in this.binders){var x=this.binders[v];(x instanceof Yt||x instanceof Kt||x instanceof ir)&&x.populatePaintArray(r,i,l,p,y)}},Zt.prototype.setConstantPatternPositions=function(r,i){for(var l in this.binders){var p=this.binders[l];p instanceof sr&&p.setConstantPatternPositions(r,i)}},Zt.prototype.updatePaintArrays=function(r,i,l,p,y){var v=!1;for(var x in r)for(var S=0,C=i.getPositions(x);S<C.length;S+=1){var A=C[S],L=l.feature(A.index);for(var D in this.binders){var B=this.binders[D];if((B instanceof Yt||B instanceof Kt||B instanceof ir)&&B.expression.isStateDependent===!0){var j=p.paint.get(D);B.expression=j.value,B.updatePaintArray(A.start,A.end,L,r[x],y),v=!0}}}return v},Zt.prototype.defines=function(){var r=[];for(var i in this.binders){var l=this.binders[i];(l instanceof Jt||l instanceof sr)&&r.push.apply(r,l.uniformNames.map(function(p){return"#define HAS_UNIFORM_"+p}))}return r},Zt.prototype.getBinderAttributes=function(){var r=[];for(var i in this.binders){var l=this.binders[i];if(l instanceof Yt||l instanceof Kt)for(var p=0;p<l.paintVertexAttributes.length;p++)r.push(l.paintVertexAttributes[p].name);else if(l instanceof ir)for(var y=0;y<ne.members.length;y++)r.push(ne.members[y].name)}return r},Zt.prototype.getBinderUniforms=function(){var r=[];for(var i in this.binders){var l=this.binders[i];if(l instanceof Jt||l instanceof sr||l instanceof Kt)for(var p=0,y=l.uniformNames;p<y.length;p+=1)r.push(y[p])}return r},Zt.prototype.getPaintVertexBuffers=function(){return this._buffers},Zt.prototype.getUniforms=function(r,i){var l=[];for(var p in this.binders){var y=this.binders[p];if(y instanceof Jt||y instanceof sr||y instanceof Kt)for(var v=0,x=y.uniformNames;v<x.length;v+=1){var S=x[v];if(i[S]){var C=y.getBinding(r,i[S],S);l.push({name:S,property:p,binding:C})}}}return l},Zt.prototype.setUniforms=function(r,i,l,p){for(var y=0,v=i;y<v.length;y+=1){var x=v[y],S=x.name,C=x.property;this.binders[C].setUniform(x.binding,p,l.get(C),S)}},Zt.prototype.updatePaintBuffers=function(r){for(var i in this._buffers=[],this.binders){var l=this.binders[i];if(r&&l instanceof ir){var p=r.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(l instanceof Yt||l instanceof Kt)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}},Zt.prototype.upload=function(r){for(var i in this.binders){var l=this.binders[i];(l instanceof Yt||l instanceof Kt||l instanceof ir)&&l.upload(r)}this.updatePaintBuffers()},Zt.prototype.destroy=function(){for(var r in this.binders){var i=this.binders[r];(i instanceof Yt||i instanceof Kt||i instanceof ir)&&i.destroy()}};var qt=function(r,i,l){l===void 0&&(l=function(){return!0}),this.programConfigurations={};for(var p=0,y=r;p<y.length;p+=1){var v=y[p];this.programConfigurations[v.id]=new Zt(v,i,l)}this.needsUpload=!1,this._featureMap=new me,this._bufferOffset=0};function fi(r,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(i+"-","").replace(/-/g,"_")]}function An(r,i,l){var p={color:{source:Vu,composite:_f},number:{source:Js,composite:Vu}},y=function(v){return{"line-pattern":{source:Fa,composite:Fa},"fill-pattern":{source:Fa,composite:Fa},"fill-extrusion-pattern":{source:Fa,composite:Fa}}[v]}(r);return y&&y[l]||p[i][l]}qt.prototype.populatePaintArrays=function(r,i,l,p,y,v){for(var x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(r,i,p,y,v);i.id!==void 0&&this._featureMap.add(i.id,l,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0},qt.prototype.updatePaintArrays=function(r,i,l,p){for(var y=0,v=l;y<v.length;y+=1){var x=v[y];this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(r,this._featureMap,i,x,p)||this.needsUpload}},qt.prototype.get=function(r){return this.programConfigurations[r]},qt.prototype.upload=function(r){if(this.needsUpload){for(var i in this.programConfigurations)this.programConfigurations[i].upload(r);this.needsUpload=!1}},qt.prototype.destroy=function(){for(var r in this.programConfigurations)this.programConfigurations[r].destroy()},wt("ConstantBinder",Jt),wt("CrossFadedConstantBinder",sr),wt("SourceExpressionBinder",Yt),wt("CrossFadedCompositeBinder",ir),wt("CompositeExpressionBinder",Kt),wt("ProgramConfiguration",Zt,{omit:["_buffers"]}),wt("ProgramConfigurationSet",qt);var zi=Math.pow(2,14)-1,bi=-zi-1;function On(r){for(var i=8192/r.extent,l=r.loadGeometry(),p=0;p<l.length;p++)for(var y=l[p],v=0;v<y.length;v++){var x=y[v],S=Math.round(x.x*i),C=Math.round(x.y*i);x.x=W(S,bi,zi),x.y=W(C,bi,zi),(S<x.x||S>x.x+1||C<x.y||C>x.y+1)&&st("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return l}function zn(r,i){return{type:r.type,id:r.id,properties:r.properties,geometry:i?On(r):[]}}function Mo(r,i,l,p,y){r.emplaceBack(2*i+(p+1)/2,2*l+(y+1)/2)}var Xi=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new jl,this.indexArray=new Ks,this.segments=new q,this.programConfigurations=new qt(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function Qs(r,i){for(var l=0;l<r.length;l++)if(Ba(i,r[l]))return!0;for(var p=0;p<i.length;p++)if(Ba(r,i[p]))return!0;return!!th(r,i)}function oo(r,i,l){return!!Ba(r,i)||!!el(i,r,l)}function wa(r,i){if(r.length===1)return rh(i,r[0]);for(var l=0;l<i.length;l++)for(var p=i[l],y=0;y<p.length;y++)if(Ba(r,p[y]))return!0;for(var v=0;v<r.length;v++)if(rh(i,r[v]))return!0;for(var x=0;x<i.length;x++)if(th(r,i[x]))return!0;return!1}function ra(r,i,l){if(r.length>1){if(th(r,i))return!0;for(var p=0;p<i.length;p++)if(el(i[p],r,l))return!0}for(var y=0;y<r.length;y++)if(el(r[y],i,l))return!0;return!1}function th(r,i){if(r.length===0||i.length===0)return!1;for(var l=0;l<r.length-1;l++)for(var p=r[l],y=r[l+1],v=0;v<i.length-1;v++)if(Gu(p,y,i[v],i[v+1]))return!0;return!1}function Gu(r,i,l,p){return be(r,l,p)!==be(i,l,p)&&be(r,i,l)!==be(r,i,p)}function el(r,i,l){var p=l*l;if(i.length===1)return r.distSqr(i[0])<p;for(var y=1;y<i.length;y++)if($u(r,i[y-1],i[y])<p)return!0;return!1}function $u(r,i,l){var p=i.distSqr(l);if(p===0)return r.distSqr(i);var y=((r.x-i.x)*(l.x-i.x)+(r.y-i.y)*(l.y-i.y))/p;return r.distSqr(y<0?i:y>1?l:l.sub(i)._mult(y)._add(i))}function rh(r,i){for(var l,p,y,v=!1,x=0;x<r.length;x++)for(var S=0,C=(l=r[x]).length-1;S<l.length;C=S++)(p=l[S]).y>i.y!=(y=l[C]).y>i.y&&i.x<(y.x-p.x)*(i.y-p.y)/(y.y-p.y)+p.x&&(v=!v);return v}function Ba(r,i){for(var l=!1,p=0,y=r.length-1;p<r.length;y=p++){var v=r[p],x=r[y];v.y>i.y!=x.y>i.y&&i.x<(x.x-v.x)*(i.y-v.y)/(x.y-v.y)+v.x&&(l=!l)}return l}function nh(r,i,l){var p=l[0],y=l[2];if(r.x<p.x&&i.x<p.x||r.x>y.x&&i.x>y.x||r.y<p.y&&i.y<p.y||r.y>y.y&&i.y>y.y)return!1;var v=be(r,i,l[0]);return v!==be(r,i,l[1])||v!==be(r,i,l[2])||v!==be(r,i,l[3])}function Va(r,i,l){var p=i.paint.get(r).value;return p.kind==="constant"?p.value:l.programConfigurations.get(i.id).getMaxValue(r)}function pi(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function ps(r,i,l,p,y){if(!i[0]&&!i[1])return r;var v=T.convert(i)._mult(y);l==="viewport"&&v._rotate(-p);for(var x=[],S=0;S<r.length;S++)x.push(r[S].sub(v));return x}Xi.prototype.populate=function(r,i,l){var p=this.layers[0],y=[],v=null;p.type==="circle"&&(v=p.layout.get("circle-sort-key"));for(var x=0,S=r;x<S.length;x+=1){var C=S[x],A=C.feature,L=C.id,D=C.index,B=C.sourceLayerIndex,j=this.layers[0]._featureFilter.needGeometry,Q=zn(A,j);if(this.layers[0]._featureFilter.filter(new gr(this.zoom),Q,l)){var te=v?v.evaluate(Q,{},l):void 0,ce={id:L,properties:A.properties,type:A.type,sourceLayerIndex:B,index:D,geometry:j?Q.geometry:On(A),patterns:{},sortKey:te};y.push(ce)}}v&&y.sort(function(ot,Pt){return ot.sortKey-Pt.sortKey});for(var oe=0,ge=y;oe<ge.length;oe+=1){var we=ge[oe],Te=we.geometry,Oe=we.index,Be=we.sourceLayerIndex,Xe=r[Oe].feature;this.addFeature(we,Te,Oe,l),i.featureIndex.insert(Xe,Te,Oe,Be,this.index)}},Xi.prototype.update=function(r,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,l)},Xi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Xi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xi.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,$),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},Xi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xi.prototype.addFeature=function(r,i,l,p){for(var y=0,v=i;y<v.length;y+=1)for(var x=0,S=v[y];x<S.length;x+=1){var C=S[x],A=C.x,L=C.y;if(!(A<0||A>=8192||L<0||L>=8192)){var D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),B=D.vertexLength;Mo(this.layoutVertexArray,A,L,-1,-1),Mo(this.layoutVertexArray,A,L,1,-1),Mo(this.layoutVertexArray,A,L,1,1),Mo(this.layoutVertexArray,A,L,-1,1),this.indexArray.emplaceBack(B,B+1,B+2),this.indexArray.emplaceBack(B,B+3,B+2),D.vertexLength+=4,D.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,{},p)},wt("CircleBucket",Xi,{omit:["layers"]});var tl=new Li({"circle-sort-key":new Tt(G.layout_circle["circle-sort-key"])}),$l={paint:new Li({"circle-radius":new Tt(G.paint_circle["circle-radius"]),"circle-color":new Tt(G.paint_circle["circle-color"]),"circle-blur":new Tt(G.paint_circle["circle-blur"]),"circle-opacity":new Tt(G.paint_circle["circle-opacity"]),"circle-translate":new Dt(G.paint_circle["circle-translate"]),"circle-translate-anchor":new Dt(G.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Dt(G.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Dt(G.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Tt(G.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Tt(G.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Tt(G.paint_circle["circle-stroke-opacity"])}),layout:tl},Vr=typeof Float32Array<"u"?Float32Array:Array;function jo(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ao(r,i,l){var p=i[0],y=i[1],v=i[2],x=i[3],S=i[4],C=i[5],A=i[6],L=i[7],D=i[8],B=i[9],j=i[10],Q=i[11],te=i[12],ce=i[13],oe=i[14],ge=i[15],we=l[0],Te=l[1],Oe=l[2],Be=l[3];return r[0]=we*p+Te*S+Oe*D+Be*te,r[1]=we*y+Te*C+Oe*B+Be*ce,r[2]=we*v+Te*A+Oe*j+Be*oe,r[3]=we*x+Te*L+Oe*Q+Be*ge,r[4]=(we=l[4])*p+(Te=l[5])*S+(Oe=l[6])*D+(Be=l[7])*te,r[5]=we*y+Te*C+Oe*B+Be*ce,r[6]=we*v+Te*A+Oe*j+Be*oe,r[7]=we*x+Te*L+Oe*Q+Be*ge,r[8]=(we=l[8])*p+(Te=l[9])*S+(Oe=l[10])*D+(Be=l[11])*te,r[9]=we*y+Te*C+Oe*B+Be*ce,r[10]=we*v+Te*A+Oe*j+Be*oe,r[11]=we*x+Te*L+Oe*Q+Be*ge,r[12]=(we=l[12])*p+(Te=l[13])*S+(Oe=l[14])*D+(Be=l[15])*te,r[13]=we*y+Te*C+Oe*B+Be*ce,r[14]=we*v+Te*A+Oe*j+Be*oe,r[15]=we*x+Te*L+Oe*Q+Be*ge,r}Math.hypot||(Math.hypot=function(){for(var r=arguments,i=0,l=arguments.length;l--;)i+=r[l]*r[l];return Math.sqrt(i)});var ql,G1=ao;function xf(r,i,l){var p=i[0],y=i[1],v=i[2],x=i[3];return r[0]=l[0]*p+l[4]*y+l[8]*v+l[12]*x,r[1]=l[1]*p+l[5]*y+l[9]*v+l[13]*x,r[2]=l[2]*p+l[6]*y+l[10]*v+l[14]*x,r[3]=l[3]*p+l[7]*y+l[11]*v+l[15]*x,r}ql=new Vr(3),Vr!=Float32Array&&(ql[0]=0,ql[1]=0,ql[2]=0),function(){var r=new Vr(4);Vr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0)}();var $1=(function(){var r=new Vr(2);Vr!=Float32Array&&(r[0]=0,r[1]=0)}(),function(r){function i(l){r.call(this,l,$l)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(l){return new Xi(l)},i.prototype.queryRadius=function(l){var p=l;return Va("circle-radius",this,p)+Va("circle-stroke-width",this,p)+pi(this.paint.get("circle-translate"))},i.prototype.queryIntersectsFeature=function(l,p,y,v,x,S,C,A){for(var L=ps(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,C),D=this.paint.get("circle-radius").evaluate(p,y)+this.paint.get("circle-stroke-width").evaluate(p,y),B=this.paint.get("circle-pitch-alignment")==="map",j=B?L:function(Xe,ot){return Xe.map(function(Pt){return ih(Pt,ot)})}(L,A),Q=B?D*C:D,te=0,ce=v;te<ce.length;te+=1)for(var oe=0,ge=ce[te];oe<ge.length;oe+=1){var we=ge[oe],Te=B?we:ih(we,A),Oe=Q,Be=xf([],[we.x,we.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Oe*=Be[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Oe*=S.cameraToCenterDistance/Be[3]),oo(j,Te,Oe))return!0}return!1},i}(za));function ih(r,i){var l=xf([],[r.x,r.y,0,1],i);return new T(l[0]/l[3],l[1]/l[3])}var lv=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Xi);function qu(r,i,l,p){var y=i.width,v=i.height;if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==y*v*l)throw new RangeError("mismatched image size")}else p=new Uint8Array(y*v*l);return r.width=y,r.height=v,r.data=p,r}function bf(r,i,l){var p=i.width,y=i.height;if(p!==r.width||y!==r.height){var v=qu({},{width:p,height:y},l);q1(r,v,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,p),height:Math.min(r.height,y)},l),r.width=p,r.height=y,r.data=v.data}}function q1(r,i,l,p,y,v){if(y.width===0||y.height===0)return i;if(y.width>r.width||y.height>r.height||l.x>r.width-y.width||l.y>r.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>i.width||y.height>i.height||p.x>i.width-y.width||p.y>i.height-y.height)throw new RangeError("out of range destination coordinates for image copy");for(var x=r.data,S=i.data,C=0;C<y.height;C++)for(var A=((l.y+C)*r.width+l.x)*v,L=((p.y+C)*i.width+p.x)*v,D=0;D<y.width*v;D++)S[L+D]=x[A+D];return i}wt("HeatmapBucket",lv,{omit:["layers"]});var oh=function(r,i){qu(this,r,1,i)};oh.prototype.resize=function(r){bf(this,r,1)},oh.prototype.clone=function(){return new oh({width:this.width,height:this.height},new Uint8Array(this.data))},oh.copy=function(r,i,l,p,y){q1(r,i,l,p,y,1)};var Io=function(r,i){qu(this,r,4,i)};Io.prototype.resize=function(r){bf(this,r,4)},Io.prototype.replace=function(r,i){i?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r},Io.prototype.clone=function(){return new Io({width:this.width,height:this.height},new Uint8Array(this.data))},Io.copy=function(r,i,l,p,y){q1(r,i,l,p,y,4)},wt("AlphaImage",oh),wt("RGBAImage",Io);var Tj={paint:new Li({"heatmap-radius":new Tt(G.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Tt(G.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Dt(G.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ba(G.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Dt(G.paint_heatmap["heatmap-opacity"])})};function UM(r){var i={},l=r.resolution||256,p=r.clips?r.clips.length:1,y=r.image||new Io({width:l,height:p}),v=function(Q,te,ce){i[r.evaluationKey]=ce;var oe=r.expression.evaluate(i);y.data[Q+te+0]=Math.floor(255*oe.r/oe.a),y.data[Q+te+1]=Math.floor(255*oe.g/oe.a),y.data[Q+te+2]=Math.floor(255*oe.b/oe.a),y.data[Q+te+3]=Math.floor(255*oe.a)};if(r.clips)for(var x=0,S=0;x<p;++x,S+=4*l)for(var C=0,A=0;C<l;C++,A+=4){var L=C/(l-1),D=r.clips[x];v(S,A,D.start*(1-L)+D.end*L)}else for(var B=0,j=0;B<l;B++,j+=4)v(0,j,B/(l-1));return y}var Mj=function(r){function i(l){r.call(this,l,Tj),this._updateColorRamp()}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(l){return new lv(l)},i.prototype._handleSpecialPaintPropertyUpdate=function(l){l==="heatmap-color"&&this._updateColorRamp()},i.prototype._updateColorRamp=function(){this.colorRamp=UM({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},i.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},i}(za),Ij={paint:new Li({"hillshade-illumination-direction":new Dt(G.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Dt(G.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Dt(G.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Dt(G.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Dt(G.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Dt(G.paint_hillshade["hillshade-accent-color"])})},Oj=function(r){function i(l){r.call(this,l,Ij)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},i}(za),Cj=xi([{name:"a_pos",components:2,type:"Int16"}],4).members,W1=uv,Aj=uv;function uv(r,i,l){l=l||2;var p,y,v,x,S,C,A,L=i&&i.length,D=L?i[0]*l:r.length,B=jM(r,0,D,l,!0),j=[];if(!B||B.next===B.prev)return j;if(L&&(B=function(te,ce,oe,ge){var we,Te,Oe,Be=[];for(we=0,Te=ce.length;we<Te;we++)(Oe=jM(te,ce[we]*ge,we<Te-1?ce[we+1]*ge:te.length,ge,!1))===Oe.next&&(Oe.steiner=!0),Be.push(Fj(Oe));for(Be.sort(Nj),we=0;we<Be.length;we++)Rj(Be[we],oe),oe=Wu(oe,oe.next);return oe}(r,i,B,l)),r.length>80*l){p=v=r[0],y=x=r[1];for(var Q=l;Q<D;Q+=l)(S=r[Q])<p&&(p=S),(C=r[Q+1])<y&&(y=C),S>v&&(v=S),C>x&&(x=C);A=(A=Math.max(v-p,x-y))!==0?1/A:0}return Fd(B,j,l,p,y,A),j}function jM(r,i,l,p,y){var v,x;if(y===X1(r,i,l,p)>0)for(v=i;v<l;v+=p)x=qM(v,r[v],r[v+1],x);else for(v=l-p;v>=i;v-=p)x=qM(v,r[v],r[v+1],x);return x&&cv(x,x.next)&&(Vd(x),x=x.next),x}function Wu(r,i){if(!r)return r;i||(i=r);var l,p=r;do if(l=!1,p.steiner||!cv(p,p.next)&&ni(p.prev,p,p.next)!==0)p=p.next;else{if(Vd(p),(p=i=p.prev)===p.next)break;l=!0}while(l||p!==i);return i}function Fd(r,i,l,p,y,v,x){if(r){!x&&v&&function(L,D,B,j){var Q=L;do Q.z===null&&(Q.z=H1(Q.x,Q.y,D,B,j)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==L);Q.prevZ.nextZ=null,Q.prevZ=null,function(te){var ce,oe,ge,we,Te,Oe,Be,Xe,ot=1;do{for(oe=te,te=null,Te=null,Oe=0;oe;){for(Oe++,ge=oe,Be=0,ce=0;ce<ot&&(Be++,ge=ge.nextZ);ce++);for(Xe=ot;Be>0||Xe>0&&ge;)Be!==0&&(Xe===0||!ge||oe.z<=ge.z)?(we=oe,oe=oe.nextZ,Be--):(we=ge,ge=ge.nextZ,Xe--),Te?Te.nextZ=we:te=we,we.prevZ=Te,Te=we;oe=ge}Te.nextZ=null,ot*=2}while(Oe>1)}(Q)}(r,p,y,v);for(var S,C,A=r;r.prev!==r.next;)if(S=r.prev,C=r.next,v?kj(r,p,y,v):Pj(r))i.push(S.i/l),i.push(r.i/l),i.push(C.i/l),Vd(r),r=C.next,A=C.next;else if((r=C)===A){x?x===1?Fd(r=Lj(Wu(r),i,l),i,l,p,y,v,2):x===2&&Dj(r,i,l,p,y,v):Fd(Wu(r),i,l,p,y,v,1);break}}}function Pj(r){var i=r.prev,l=r,p=r.next;if(ni(i,l,p)>=0)return!1;for(var y=r.next.next;y!==r.prev;){if(wf(i.x,i.y,l.x,l.y,p.x,p.y,y.x,y.y)&&ni(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function kj(r,i,l,p){var y=r.prev,v=r,x=r.next;if(ni(y,v,x)>=0)return!1;for(var S=y.x>v.x?y.x>x.x?y.x:x.x:v.x>x.x?v.x:x.x,C=y.y>v.y?y.y>x.y?y.y:x.y:v.y>x.y?v.y:x.y,A=H1(y.x<v.x?y.x<x.x?y.x:x.x:v.x<x.x?v.x:x.x,y.y<v.y?y.y<x.y?y.y:x.y:v.y<x.y?v.y:x.y,i,l,p),L=H1(S,C,i,l,p),D=r.prevZ,B=r.nextZ;D&&D.z>=A&&B&&B.z<=L;){if(D!==r.prev&&D!==r.next&&wf(y.x,y.y,v.x,v.y,x.x,x.y,D.x,D.y)&&ni(D.prev,D,D.next)>=0||(D=D.prevZ,B!==r.prev&&B!==r.next&&wf(y.x,y.y,v.x,v.y,x.x,x.y,B.x,B.y)&&ni(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;D&&D.z>=A;){if(D!==r.prev&&D!==r.next&&wf(y.x,y.y,v.x,v.y,x.x,x.y,D.x,D.y)&&ni(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;B&&B.z<=L;){if(B!==r.prev&&B!==r.next&&wf(y.x,y.y,v.x,v.y,x.x,x.y,B.x,B.y)&&ni(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function Lj(r,i,l){var p=r;do{var y=p.prev,v=p.next.next;!cv(y,v)&&GM(y,p,p.next,v)&&Bd(y,v)&&Bd(v,y)&&(i.push(y.i/l),i.push(p.i/l),i.push(v.i/l),Vd(p),Vd(p.next),p=r=v),p=p.next}while(p!==r);return Wu(p)}function Dj(r,i,l,p,y,v){var x=r;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&Bj(x,S)){var C=$M(x,S);return x=Wu(x,x.next),C=Wu(C,C.next),Fd(x,i,l,p,y,v),void Fd(C,i,l,p,y,v)}S=S.next}x=x.next}while(x!==r)}function Nj(r,i){return r.x-i.x}function Rj(r,i){if(i=function(p,y){var v,x=y,S=p.x,C=p.y,A=-1/0;do{if(C<=x.y&&C>=x.next.y&&x.next.y!==x.y){var L=x.x+(C-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(L<=S&&L>A){if(A=L,L===S){if(C===x.y)return x;if(C===x.next.y)return x.next}v=x.x<x.next.x?x:x.next}}x=x.next}while(x!==y);if(!v)return null;if(S===A)return v;var D,B=v,j=v.x,Q=v.y,te=1/0;x=v;do S>=x.x&&x.x>=j&&S!==x.x&&wf(C<Q?S:A,C,j,Q,C<Q?A:S,C,x.x,x.y)&&(D=Math.abs(C-x.y)/(S-x.x),Bd(x,p)&&(D<te||D===te&&(x.x>v.x||x.x===v.x&&zj(v,x)))&&(v=x,te=D)),x=x.next;while(x!==B);return v}(r,i)){var l=$M(i,r);Wu(i,i.next),Wu(l,l.next)}}function zj(r,i){return ni(r.prev,r,i.prev)<0&&ni(i.next,r,r.next)<0}function H1(r,i,l,p,y){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-l)*y)|r<<8))|r<<4))|r<<2))|r<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-p)*y)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Fj(r){var i=r,l=r;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==r);return l}function wf(r,i,l,p,y,v,x,S){return(y-x)*(i-S)-(r-x)*(v-S)>=0&&(r-x)*(p-S)-(l-x)*(i-S)>=0&&(l-x)*(v-S)-(y-x)*(p-S)>=0}function Bj(r,i){return r.next.i!==i.i&&r.prev.i!==i.i&&!function(l,p){var y=l;do{if(y.i!==l.i&&y.next.i!==l.i&&y.i!==p.i&&y.next.i!==p.i&&GM(y,y.next,l,p))return!0;y=y.next}while(y!==l);return!1}(r,i)&&(Bd(r,i)&&Bd(i,r)&&function(l,p){var y=l,v=!1,x=(l.x+p.x)/2,S=(l.y+p.y)/2;do y.y>S!=y.next.y>S&&y.next.y!==y.y&&x<(y.next.x-y.x)*(S-y.y)/(y.next.y-y.y)+y.x&&(v=!v),y=y.next;while(y!==l);return v}(r,i)&&(ni(r.prev,r,i.prev)||ni(r,i.prev,i))||cv(r,i)&&ni(r.prev,r,r.next)>0&&ni(i.prev,i,i.next)>0)}function ni(r,i,l){return(i.y-r.y)*(l.x-i.x)-(i.x-r.x)*(l.y-i.y)}function cv(r,i){return r.x===i.x&&r.y===i.y}function GM(r,i,l,p){var y=fv(ni(r,i,l)),v=fv(ni(r,i,p)),x=fv(ni(l,p,r)),S=fv(ni(l,p,i));return y!==v&&x!==S||!(y!==0||!hv(r,l,i))||!(v!==0||!hv(r,p,i))||!(x!==0||!hv(l,r,p))||!(S!==0||!hv(l,i,p))}function hv(r,i,l){return i.x<=Math.max(r.x,l.x)&&i.x>=Math.min(r.x,l.x)&&i.y<=Math.max(r.y,l.y)&&i.y>=Math.min(r.y,l.y)}function fv(r){return r>0?1:r<0?-1:0}function Bd(r,i){return ni(r.prev,r,r.next)<0?ni(r,i,r.next)>=0&&ni(r,r.prev,i)>=0:ni(r,i,r.prev)<0||ni(r,r.next,i)<0}function $M(r,i){var l=new Z1(r.i,r.x,r.y),p=new Z1(i.i,i.x,i.y),y=r.next,v=i.prev;return r.next=i,i.prev=r,l.next=y,y.prev=l,p.next=l,l.prev=p,v.next=p,p.prev=v,p}function qM(r,i,l,p){var y=new Z1(r,i,l);return p?(y.next=p.next,y.prev=p,p.next.prev=y,p.next=y):(y.prev=y,y.next=y),y}function Vd(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Z1(r,i,l){this.i=r,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function X1(r,i,l,p){for(var y=0,v=i,x=l-p;v<l;v+=p)y+=(r[x]-r[v])*(r[v+1]+r[x+1]),x=v;return y}function Vj(r,i,l,p,y){(function v(x,S,C,A,L){for(;A>C;){if(A-C>600){var D=A-C+1,B=S-C+1,j=Math.log(D),Q=.5*Math.exp(2*j/3),te=.5*Math.sqrt(j*Q*(D-Q)/D)*(B-D/2<0?-1:1);v(x,S,Math.max(C,Math.floor(S-B*Q/D+te)),Math.min(A,Math.floor(S+(D-B)*Q/D+te)),L)}var ce=x[S],oe=C,ge=A;for(Ud(x,C,S),L(x[A],ce)>0&&Ud(x,C,A);oe<ge;){for(Ud(x,oe,ge),oe++,ge--;L(x[oe],ce)<0;)oe++;for(;L(x[ge],ce)>0;)ge--}L(x[C],ce)===0?Ud(x,C,ge):Ud(x,++ge,A),ge<=S&&(C=ge+1),S<=ge&&(A=ge-1)}})(r,i,l||0,p||r.length-1,y||Uj)}function Ud(r,i,l){var p=r[i];r[i]=r[l],r[l]=p}function Uj(r,i){return r<i?-1:r>i?1:0}function K1(r,i){var l=r.length;if(l<=1)return[r];for(var p,y,v=[],x=0;x<l;x++){var S=Ye(r[x]);S!==0&&(r[x].area=Math.abs(S),y===void 0&&(y=S<0),y===S<0?(p&&v.push(p),p=[r[x]]):p.push(r[x]))}if(p&&v.push(p),i>1)for(var C=0;C<v.length;C++)v[C].length<=i||(Vj(v[C],i,1,v[C].length-1,jj),v[C]=v[C].slice(0,i));return v}function jj(r,i){return i.area-r.area}function Y1(r,i,l){for(var p=l.patternDependencies,y=!1,v=0,x=i;v<x.length;v+=1){var S=x[v].paint.get(r+"-pattern");S.isConstant()||(y=!0);var C=S.constantOr(null);C&&(y=!0,p[C.to]=!0,p[C.from]=!0)}return y}function J1(r,i,l,p,y){for(var v=y.patternDependencies,x=0,S=i;x<S.length;x+=1){var C=S[x],A=C.paint.get(r+"-pattern").value;if(A.kind!=="constant"){var L=A.evaluate({zoom:p-1},l,{},y.availableImages),D=A.evaluate({zoom:p},l,{},y.availableImages),B=A.evaluate({zoom:p+1},l,{},y.availableImages);D=D&&D.name?D.name:D,B=B&&B.name?B.name:B,v[L=L&&L.name?L.name:L]=!0,v[D]=!0,v[B]=!0,l.patterns[C.id]={min:L,mid:D,max:B}}}return l}uv.deviation=function(r,i,l,p){var y=i&&i.length,v=Math.abs(X1(r,0,y?i[0]*l:r.length,l));if(y)for(var x=0,S=i.length;x<S;x++)v-=Math.abs(X1(r,i[x]*l,x<S-1?i[x+1]*l:r.length,l));var C=0;for(x=0;x<p.length;x+=3){var A=p[x]*l,L=p[x+1]*l,D=p[x+2]*l;C+=Math.abs((r[A]-r[D])*(r[L+1]-r[A+1])-(r[A]-r[L])*(r[D+1]-r[A+1]))}return v===0&&C===0?0:Math.abs((C-v)/v)},uv.flatten=function(r){for(var i=r[0][0].length,l={vertices:[],holes:[],dimensions:i},p=0,y=0;y<r.length;y++){for(var v=0;v<r[y].length;v++)for(var x=0;x<i;x++)l.vertices.push(r[y][v][x]);y>0&&l.holes.push(p+=r[y-1].length)}return l},W1.default=Aj;var ds=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new jl,this.indexArray=new Ks,this.indexArray2=new eh,this.programConfigurations=new qt(r.layers,r.zoom),this.segments=new q,this.segments2=new q,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};ds.prototype.populate=function(r,i,l){this.hasPattern=Y1("fill",this.layers,i);for(var p=this.layers[0].layout.get("fill-sort-key"),y=[],v=0,x=r;v<x.length;v+=1){var S=x[v],C=S.feature,A=S.id,L=S.index,D=S.sourceLayerIndex,B=this.layers[0]._featureFilter.needGeometry,j=zn(C,B);if(this.layers[0]._featureFilter.filter(new gr(this.zoom),j,l)){var Q=p?p.evaluate(j,{},l,i.availableImages):void 0,te={id:A,properties:C.properties,type:C.type,sourceLayerIndex:D,index:L,geometry:B?j.geometry:On(C),patterns:{},sortKey:Q};y.push(te)}}p&&y.sort(function(Xe,ot){return Xe.sortKey-ot.sortKey});for(var ce=0,oe=y;ce<oe.length;ce+=1){var ge=oe[ce],we=ge.geometry,Te=ge.index,Oe=ge.sourceLayerIndex;if(this.hasPattern){var Be=J1("fill",this.layers,ge,this.zoom,i);this.patternFeatures.push(Be)}else this.addFeature(ge,we,Te,l,{});i.featureIndex.insert(r[Te].feature,we,Te,Oe,this.index)}},ds.prototype.update=function(r,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,l)},ds.prototype.addFeatures=function(r,i,l){for(var p=0,y=this.patternFeatures;p<y.length;p+=1){var v=y[p];this.addFeature(v,v.geometry,v.index,i,l)}},ds.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ds.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ds.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Cj),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0},ds.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ds.prototype.addFeature=function(r,i,l,p,y){for(var v=0,x=K1(i,500);v<x.length;v+=1){for(var S=x[v],C=0,A=0,L=S;A<L.length;A+=1)C+=L[A].length;for(var D=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),B=D.vertexLength,j=[],Q=[],te=0,ce=S;te<ce.length;te+=1){var oe=ce[te];if(oe.length!==0){oe!==S[0]&&Q.push(j.length/2);var ge=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),we=ge.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(we+oe.length-1,we),j.push(oe[0].x),j.push(oe[0].y);for(var Te=1;Te<oe.length;Te++)this.layoutVertexArray.emplaceBack(oe[Te].x,oe[Te].y),this.indexArray2.emplaceBack(we+Te-1,we+Te),j.push(oe[Te].x),j.push(oe[Te].y);ge.vertexLength+=oe.length,ge.primitiveLength+=oe.length}}for(var Oe=W1(j,Q),Be=0;Be<Oe.length;Be+=3)this.indexArray.emplaceBack(B+Oe[Be],B+Oe[Be+1],B+Oe[Be+2]);D.vertexLength+=C,D.primitiveLength+=Oe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,y,p)},wt("FillBucket",ds,{omit:["layers","patternFeatures"]});var Gj=new Li({"fill-sort-key":new Tt(G.layout_fill["fill-sort-key"])}),$j={paint:new Li({"fill-antialias":new Dt(G.paint_fill["fill-antialias"]),"fill-opacity":new Tt(G.paint_fill["fill-opacity"]),"fill-color":new Tt(G.paint_fill["fill-color"]),"fill-outline-color":new Tt(G.paint_fill["fill-outline-color"]),"fill-translate":new Dt(G.paint_fill["fill-translate"]),"fill-translate-anchor":new Dt(G.paint_fill["fill-translate-anchor"]),"fill-pattern":new mf(G.paint_fill["fill-pattern"])}),layout:Gj},qj=function(r){function i(l){r.call(this,l,$j)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.recalculate=function(l,p){r.prototype.recalculate.call(this,l,p);var y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},i.prototype.createBucket=function(l){return new ds(l)},i.prototype.queryRadius=function(){return pi(this.paint.get("fill-translate"))},i.prototype.queryIntersectsFeature=function(l,p,y,v,x,S,C){return wa(ps(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,C),v)},i.prototype.isTileClipped=function(){return!0},i}(za),Wj=xi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,WM=Ef;function Ef(r,i,l,p,y){this.properties={},this.extent=l,this.type=0,this._pbf=r,this._geometry=-1,this._keys=p,this._values=y,r.readFields(Hj,this,i)}function Hj(r,i,l){r==1?i.id=l.readVarint():r==2?function(p,y){for(var v=p.readVarint()+p.pos;p.pos<v;){var x=y._keys[p.readVarint()],S=y._values[p.readVarint()];y.properties[x]=S}}(l,i):r==3?i.type=l.readVarint():r==4&&(i._geometry=l.pos)}function Zj(r){for(var i,l,p=0,y=0,v=r.length,x=v-1;y<v;x=y++)p+=((l=r[x]).x-(i=r[y]).x)*(i.y+l.y);return p}Ef.types=["Unknown","Point","LineString","Polygon"],Ef.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var i,l=r.readVarint()+r.pos,p=1,y=0,v=0,x=0,S=[];r.pos<l;){if(y<=0){var C=r.readVarint();p=7&C,y=C>>3}if(y--,p===1||p===2)v+=r.readSVarint(),x+=r.readSVarint(),p===1&&(i&&S.push(i),i=[]),i.push(new T(v,x));else{if(p!==7)throw new Error("unknown command "+p);i&&i.push(i[0].clone())}}return i&&S.push(i),S},Ef.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var i=r.readVarint()+r.pos,l=1,p=0,y=0,v=0,x=1/0,S=-1/0,C=1/0,A=-1/0;r.pos<i;){if(p<=0){var L=r.readVarint();l=7&L,p=L>>3}if(p--,l===1||l===2)(y+=r.readSVarint())<x&&(x=y),y>S&&(S=y),(v+=r.readSVarint())<C&&(C=v),v>A&&(A=v);else if(l!==7)throw new Error("unknown command "+l)}return[x,C,S,A]},Ef.prototype.toGeoJSON=function(r,i,l){var p,y,v=this.extent*Math.pow(2,l),x=this.extent*r,S=this.extent*i,C=this.loadGeometry(),A=Ef.types[this.type];function L(j){for(var Q=0;Q<j.length;Q++){var te=j[Q];j[Q]=[360*(te.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(te.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(p=0;p<C.length;p++)D[p]=C[p][0];L(C=D);break;case 2:for(p=0;p<C.length;p++)L(C[p]);break;case 3:for(C=function(j){var Q=j.length;if(Q<=1)return[j];for(var te,ce,oe=[],ge=0;ge<Q;ge++){var we=Zj(j[ge]);we!==0&&(ce===void 0&&(ce=we<0),ce===we<0?(te&&oe.push(te),te=[j[ge]]):te.push(j[ge]))}return te&&oe.push(te),oe}(C),p=0;p<C.length;p++)for(y=0;y<C[p].length;y++)L(C[p][y])}C.length===1?C=C[0]:A="Multi"+A;var B={type:"Feature",geometry:{type:A,coordinates:C},properties:this.properties};return"id"in this&&(B.id=this.id),B};var HM=ZM;function ZM(r,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Xj,this,i),this.length=this._features.length}function Xj(r,i,l){r===15?i.version=l.readVarint():r===1?i.name=l.readString():r===5?i.extent=l.readVarint():r===2?i._features.push(l.pos):r===3?i._keys.push(l.readString()):r===4&&i._values.push(function(p){for(var y=null,v=p.readVarint()+p.pos;p.pos<v;){var x=p.readVarint()>>3;y=x===1?p.readString():x===2?p.readFloat():x===3?p.readDouble():x===4?p.readVarint64():x===5?p.readVarint():x===6?p.readSVarint():x===7?p.readBoolean():null}return y}(l))}function Kj(r,i,l){if(r===3){var p=new HM(l,l.readVarint()+l.pos);p.length&&(i[p.name]=p)}}ZM.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var i=this._pbf.readVarint()+this._pbf.pos;return new WM(this._pbf,i,this.extent,this._keys,this._values)};var Sf={VectorTile:function(r,i){this.layers=r.readFields(Kj,{},i)},VectorTileFeature:WM,VectorTileLayer:HM},Yj=Sf.VectorTileFeature.types,Q1=Math.pow(2,13);function jd(r,i,l,p,y,v,x,S){r.emplaceBack(i,l,2*Math.floor(p*Q1)+x,y*Q1*2,v*Q1*2,Math.round(S))}var ms=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new fs,this.indexArray=new Ks,this.programConfigurations=new qt(r.layers,r.zoom),this.segments=new q,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function Jj(r,i){return r.x===i.x&&(r.x<0||r.x>8192)||r.y===i.y&&(r.y<0||r.y>8192)}ms.prototype.populate=function(r,i,l){this.features=[],this.hasPattern=Y1("fill-extrusion",this.layers,i);for(var p=0,y=r;p<y.length;p+=1){var v=y[p],x=v.feature,S=v.id,C=v.index,A=v.sourceLayerIndex,L=this.layers[0]._featureFilter.needGeometry,D=zn(x,L);if(this.layers[0]._featureFilter.filter(new gr(this.zoom),D,l)){var B={id:S,sourceLayerIndex:A,index:C,geometry:L?D.geometry:On(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(J1("fill-extrusion",this.layers,B,this.zoom,i)):this.addFeature(B,B.geometry,C,l,{}),i.featureIndex.insert(x,B.geometry,C,A,this.index,!0)}}},ms.prototype.addFeatures=function(r,i,l){for(var p=0,y=this.features;p<y.length;p+=1){var v=y[p];this.addFeature(v,v.geometry,v.index,i,l)}},ms.prototype.update=function(r,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,l)},ms.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ms.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ms.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Wj),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},ms.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ms.prototype.addFeature=function(r,i,l,p,y){for(var v=0,x=K1(i,500);v<x.length;v+=1){for(var S=x[v],C=0,A=0,L=S;A<L.length;A+=1)C+=L[A].length;for(var D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),B=0,j=S;B<j.length;B+=1){var Q=j[B];if(Q.length!==0&&!((pr=Q).every(function(nr){return nr.x<0})||pr.every(function(nr){return nr.x>8192})||pr.every(function(nr){return nr.y<0})||pr.every(function(nr){return nr.y>8192})))for(var te=0,ce=0;ce<Q.length;ce++){var oe=Q[ce];if(ce>=1){var ge=Q[ce-1];if(!Jj(oe,ge)){D.vertexLength+4>q.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var we=oe.sub(ge)._perp()._unit(),Te=ge.dist(oe);te+Te>32768&&(te=0),jd(this.layoutVertexArray,oe.x,oe.y,we.x,we.y,0,0,te),jd(this.layoutVertexArray,oe.x,oe.y,we.x,we.y,0,1,te),jd(this.layoutVertexArray,ge.x,ge.y,we.x,we.y,0,0,te+=Te),jd(this.layoutVertexArray,ge.x,ge.y,we.x,we.y,0,1,te);var Oe=D.vertexLength;this.indexArray.emplaceBack(Oe,Oe+2,Oe+1),this.indexArray.emplaceBack(Oe+1,Oe+2,Oe+3),D.vertexLength+=4,D.primitiveLength+=2}}}}if(D.vertexLength+C>q.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),Yj[r.type]==="Polygon"){for(var Be=[],Xe=[],ot=D.vertexLength,Pt=0,dt=S;Pt<dt.length;Pt+=1){var Rt=dt[Pt];if(Rt.length!==0){Rt!==S[0]&&Xe.push(Be.length/2);for(var yt=0;yt<Rt.length;yt++){var lr=Rt[yt];jd(this.layoutVertexArray,lr.x,lr.y,0,0,1,1,0),Be.push(lr.x),Be.push(lr.y)}}}for(var Wt=W1(Be,Xe),Mt=0;Mt<Wt.length;Mt+=3)this.indexArray.emplaceBack(ot+Wt[Mt],ot+Wt[Mt+2],ot+Wt[Mt+1]);D.primitiveLength+=Wt.length/3,D.vertexLength+=C}}var pr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,y,p)},wt("FillExtrusionBucket",ms,{omit:["layers","features"]});var Qj={paint:new Li({"fill-extrusion-opacity":new Dt(G["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Tt(G["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Dt(G["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Dt(G["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mf(G["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Tt(G["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Tt(G["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Dt(G["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},e9=function(r){function i(l){r.call(this,l,Qj)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(l){return new ms(l)},i.prototype.queryRadius=function(){return pi(this.paint.get("fill-extrusion-translate"))},i.prototype.is3D=function(){return!0},i.prototype.queryIntersectsFeature=function(l,p,y,v,x,S,C,A){var L=ps(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,C),D=this.paint.get("fill-extrusion-height").evaluate(p,y),B=this.paint.get("fill-extrusion-base").evaluate(p,y),j=function(te,ce,oe,ge){for(var we=[],Te=0,Oe=te;Te<Oe.length;Te+=1){var Be=Oe[Te],Xe=[Be.x,Be.y,0,1];xf(Xe,Xe,ce),we.push(new T(Xe[0]/Xe[3],Xe[1]/Xe[3]))}return we}(L,A),Q=function(te,ce,oe,ge){for(var we=[],Te=[],Oe=ge[8]*ce,Be=ge[9]*ce,Xe=ge[10]*ce,ot=ge[11]*ce,Pt=ge[8]*oe,dt=ge[9]*oe,Rt=ge[10]*oe,yt=ge[11]*oe,lr=0,Wt=te;lr<Wt.length;lr+=1){for(var Mt=[],pr=[],nr=0,Ir=Wt[lr];nr<Ir.length;nr+=1){var zt=Ir[nr],Nr=zt.x,xn=zt.y,Pn=ge[0]*Nr+ge[4]*xn+ge[12],Cn=ge[1]*Nr+ge[5]*xn+ge[13],bn=ge[2]*Nr+ge[6]*xn+ge[14],kn=ge[3]*Nr+ge[7]*xn+ge[15],di=bn+Xe,mi=kn+ot,Yi=Pn+Pt,Ei=Cn+dt,Ji=bn+Rt,Fn=kn+yt,Si=new T((Pn+Oe)/mi,(Cn+Be)/mi);Si.z=di/mi,Mt.push(Si);var xr=new T(Yi/Fn,Ei/Fn);xr.z=Ji/Fn,pr.push(xr)}we.push(Mt),Te.push(pr)}return[we,Te]}(v,B,D,A);return function(te,ce,oe){var ge=1/0;wa(oe,ce)&&(ge=XM(oe,ce[0]));for(var we=0;we<ce.length;we++)for(var Te=ce[we],Oe=te[we],Be=0;Be<Te.length-1;Be++){var Xe=Te[Be],ot=[Xe,Te[Be+1],Oe[Be+1],Oe[Be],Xe];Qs(oe,ot)&&(ge=Math.min(ge,XM(oe,ot)))}return ge!==1/0&&ge}(Q[0],Q[1],j)},i}(za);function Gd(r,i){return r.x*i.x+r.y*i.y}function XM(r,i){if(r.length===1){for(var l,p=0,y=i[p++];!l||y.equals(l);)if(!(l=i[p++]))return 1/0;for(;p<i.length;p++){var v=i[p],x=r[0],S=l.sub(y),C=v.sub(y),A=x.sub(y),L=Gd(S,S),D=Gd(S,C),B=Gd(C,C),j=Gd(A,S),Q=Gd(A,C),te=L*B-D*D,ce=(B*j-D*Q)/te,oe=(L*Q-D*j)/te,ge=y.z*(1-ce-oe)+l.z*ce+v.z*oe;if(isFinite(ge))return ge}return 1/0}for(var we=1/0,Te=0,Oe=i;Te<Oe.length;Te+=1)we=Math.min(we,Oe[Te].z);return we}var t9=xi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,r9=xi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,n9=Sf.VectorTileFeature.types,i9=Math.cos(Math.PI/180*37.5),KM=Math.pow(2,14)/.5,so=function(r){var i=this;this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(l){return l.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(l){i.gradients[l.id]={}}),this.layoutVertexArray=new To,this.layoutVertexArray2=new Vu,this.indexArray=new Ks,this.programConfigurations=new qt(r.layers,r.zoom),this.segments=new q,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(l){return l.isStateDependent()}).map(function(l){return l.id})};so.prototype.populate=function(r,i,l){this.hasPattern=Y1("line",this.layers,i);for(var p=this.layers[0].layout.get("line-sort-key"),y=[],v=0,x=r;v<x.length;v+=1){var S=x[v],C=S.feature,A=S.id,L=S.index,D=S.sourceLayerIndex,B=this.layers[0]._featureFilter.needGeometry,j=zn(C,B);if(this.layers[0]._featureFilter.filter(new gr(this.zoom),j,l)){var Q=p?p.evaluate(j,{},l):void 0,te={id:A,properties:C.properties,type:C.type,sourceLayerIndex:D,index:L,geometry:B?j.geometry:On(C),patterns:{},sortKey:Q};y.push(te)}}p&&y.sort(function(Xe,ot){return Xe.sortKey-ot.sortKey});for(var ce=0,oe=y;ce<oe.length;ce+=1){var ge=oe[ce],we=ge.geometry,Te=ge.index,Oe=ge.sourceLayerIndex;if(this.hasPattern){var Be=J1("line",this.layers,ge,this.zoom,i);this.patternFeatures.push(Be)}else this.addFeature(ge,we,Te,l,{});i.featureIndex.insert(r[Te].feature,we,Te,Oe,this.index)}},so.prototype.update=function(r,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,l)},so.prototype.addFeatures=function(r,i,l){for(var p=0,y=this.patternFeatures;p<y.length;p+=1){var v=y[p];this.addFeature(v,v.geometry,v.index,i,l)}},so.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},so.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},so.prototype.upload=function(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,r9)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,t9),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},so.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},so.prototype.lineFeatureClips=function(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}},so.prototype.addFeature=function(r,i,l,p,y){var v=this.layers[0].layout,x=v.get("line-join").evaluate(r,{}),S=v.get("line-cap"),C=v.get("line-miter-limit"),A=v.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(var L=0,D=i;L<D.length;L+=1)this.addLine(D[L],r,x,S,C,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,y,p)},so.prototype.addLine=function(r,i,l,p,y,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var x=0;x<r.length-1;x++)this.totalDistance+=r[x].dist(r[x+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var S=n9[i.type]==="Polygon",C=r.length;C>=2&&r[C-1].equals(r[C-2]);)C--;for(var A=0;A<C-1&&r[A].equals(r[A+1]);)A++;if(!(C<(S?3:2))){l==="bevel"&&(y=1.05);var L,D=this.overscaling<=16?122880/(512*this.overscaling):0,B=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),j=void 0,Q=void 0,te=void 0,ce=void 0;this.e1=this.e2=-1,S&&(ce=r[A].sub(L=r[C-2])._unit()._perp());for(var oe=A;oe<C;oe++)if(!(Q=oe===C-1?S?r[A+1]:void 0:r[oe+1])||!r[oe].equals(Q)){ce&&(te=ce),L&&(j=L),L=r[oe],ce=Q?Q.sub(L)._unit()._perp():te;var ge=(te=te||ce).add(ce);ge.x===0&&ge.y===0||ge._unit();var we=te.x*ce.x+te.y*ce.y,Te=ge.x*ce.x+ge.y*ce.y,Oe=Te!==0?1/Te:1/0,Be=2*Math.sqrt(2-2*Te),Xe=Te<i9&&j&&Q,ot=te.x*ce.y-te.y*ce.x>0;if(Xe&&oe>A){var Pt=L.dist(j);if(Pt>2*D){var dt=L.sub(L.sub(j)._mult(D/Pt)._round());this.updateDistance(j,dt),this.addCurrentVertex(dt,te,0,0,B),j=dt}}var Rt=j&&Q,yt=Rt?l:S?"butt":p;if(Rt&&yt==="round"&&(Oe<v?yt="miter":Oe<=2&&(yt="fakeround")),yt==="miter"&&Oe>y&&(yt="bevel"),yt==="bevel"&&(Oe>2&&(yt="flipbevel"),Oe<y&&(yt="miter")),j&&this.updateDistance(j,L),yt==="miter")ge._mult(Oe),this.addCurrentVertex(L,ge,0,0,B);else if(yt==="flipbevel"){if(Oe>100)ge=ce.mult(-1);else{var lr=Oe*te.add(ce).mag()/te.sub(ce).mag();ge._perp()._mult(lr*(ot?-1:1))}this.addCurrentVertex(L,ge,0,0,B),this.addCurrentVertex(L,ge.mult(-1),0,0,B)}else if(yt==="bevel"||yt==="fakeround"){var Wt=-Math.sqrt(Oe*Oe-1),Mt=ot?Wt:0,pr=ot?0:Wt;if(j&&this.addCurrentVertex(L,te,Mt,pr,B),yt==="fakeround")for(var nr=Math.round(180*Be/Math.PI/20),Ir=1;Ir<nr;Ir++){var zt=Ir/nr;if(zt!==.5){var Nr=zt-.5;zt+=zt*Nr*(zt-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*Nr*Nr+(.848013+we*(.215638*we-1.06021)))}var xn=ce.sub(te)._mult(zt)._add(te)._unit()._mult(ot?-1:1);this.addHalfVertex(L,xn.x,xn.y,!1,ot,0,B)}Q&&this.addCurrentVertex(L,ce,-Mt,-pr,B)}else if(yt==="butt")this.addCurrentVertex(L,ge,0,0,B);else if(yt==="square"){var Pn=j?1:-1;this.addCurrentVertex(L,ge,Pn,Pn,B)}else yt==="round"&&(j&&(this.addCurrentVertex(L,te,0,0,B),this.addCurrentVertex(L,te,1,1,B,!0)),Q&&(this.addCurrentVertex(L,ce,-1,-1,B,!0),this.addCurrentVertex(L,ce,0,0,B)));if(Xe&&oe<C-1){var Cn=L.dist(Q);if(Cn>2*D){var bn=L.add(Q.sub(L)._mult(D/Cn)._round());this.updateDistance(L,bn),this.addCurrentVertex(bn,ce,0,0,B),L=bn}}}}},so.prototype.addCurrentVertex=function(r,i,l,p,y,v){v===void 0&&(v=!1);var x=i.y*p-i.x,S=-i.y-i.x*p;this.addHalfVertex(r,i.x+i.y*l,i.y-i.x*l,v,!1,l,y),this.addHalfVertex(r,x,S,v,!0,-p,y),this.distance>KM/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(r,i,l,p,y,v))},so.prototype.addHalfVertex=function(r,i,l,p,y,v,x){var S=.5*(this.lineClips?this.scaledDistance*(KM-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r.x<<1)+(p?1:0),(r.y<<1)+(y?1:0),Math.round(63*i)+128,Math.round(63*l)+128,1+(v===0?0:v<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var C=x.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),x.primitiveLength++),y?this.e2=C:this.e1=C},so.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},so.prototype.updateDistance=function(r,i){this.distance+=r.dist(i),this.updateScaledDistance()},wt("LineBucket",so,{omit:["layers","patternFeatures"]});var o9=new Li({"line-cap":new Dt(G.layout_line["line-cap"]),"line-join":new Tt(G.layout_line["line-join"]),"line-miter-limit":new Dt(G.layout_line["line-miter-limit"]),"line-round-limit":new Dt(G.layout_line["line-round-limit"]),"line-sort-key":new Tt(G.layout_line["line-sort-key"])}),YM={paint:new Li({"line-opacity":new Tt(G.paint_line["line-opacity"]),"line-color":new Tt(G.paint_line["line-color"]),"line-translate":new Dt(G.paint_line["line-translate"]),"line-translate-anchor":new Dt(G.paint_line["line-translate-anchor"]),"line-width":new Tt(G.paint_line["line-width"]),"line-gap-width":new Tt(G.paint_line["line-gap-width"]),"line-offset":new Tt(G.paint_line["line-offset"]),"line-blur":new Tt(G.paint_line["line-blur"]),"line-dasharray":new Zi(G.paint_line["line-dasharray"]),"line-pattern":new mf(G.paint_line["line-pattern"]),"line-gradient":new ba(G.paint_line["line-gradient"])}),layout:o9},JM=new(function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(l,p){return p=new gr(Math.floor(p.zoom),{now:p.now,fadeDuration:p.fadeDuration,zoomHistory:p.zoomHistory,transition:p.transition}),r.prototype.possiblyEvaluate.call(this,l,p)},i.prototype.evaluate=function(l,p,y,v){return p=X({},p,{zoom:Math.floor(p.zoom)}),r.prototype.evaluate.call(this,l,p,y,v)},i}(Tt))(YM.paint.properties["line-width"].specification);JM.useIntegerZoom=!0;var a9=function(r){function i(l){r.call(this,l,YM),this.gradientVersion=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._handleSpecialPaintPropertyUpdate=function(l){l==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof xo,this.gradientVersion=(this.gradientVersion+1)%P)},i.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},i.prototype.recalculate=function(l,p){r.prototype.recalculate.call(this,l,p),this.paint._values["line-floorwidth"]=JM.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)},i.prototype.createBucket=function(l){return new so(l)},i.prototype.queryRadius=function(l){var p=l,y=QM(Va("line-width",this,p),Va("line-gap-width",this,p)),v=Va("line-offset",this,p);return y/2+Math.abs(v)+pi(this.paint.get("line-translate"))},i.prototype.queryIntersectsFeature=function(l,p,y,v,x,S,C){var A=ps(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,C),L=C/2*QM(this.paint.get("line-width").evaluate(p,y),this.paint.get("line-gap-width").evaluate(p,y)),D=this.paint.get("line-offset").evaluate(p,y);return D&&(v=function(B,j){for(var Q=[],te=new T(0,0),ce=0;ce<B.length;ce++){for(var oe=B[ce],ge=[],we=0;we<oe.length;we++){var Te=oe[we],Oe=oe[we+1],Be=we===0?te:Te.sub(oe[we-1])._unit()._perp(),Xe=we===oe.length-1?te:Oe.sub(Te)._unit()._perp(),ot=Be._add(Xe)._unit();ot._mult(1/(ot.x*Xe.x+ot.y*Xe.y)),ge.push(ot._mult(j)._add(Te))}Q.push(ge)}return Q}(v,D*C)),function(B,j,Q){for(var te=0;te<j.length;te++){var ce=j[te];if(B.length>=3){for(var oe=0;oe<ce.length;oe++)if(Ba(B,ce[oe]))return!0}if(ra(B,ce,Q))return!0}return!1}(A,v,L)},i.prototype.isTileClipped=function(){return!0},i}(za);function QM(r,i){return i>0?i+2*r:r}var s9=xi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),l9=xi([{name:"a_projected_pos",components:3,type:"Float32"}],4),u9=(xi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),xi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),eI=(xi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),xi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),c9=xi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function h9(r,i,l){return r.sections.forEach(function(p){p.text=function(y,v,x){var S=v.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?y=y.toLocaleUpperCase():S==="lowercase"&&(y=y.toLocaleLowerCase()),Uo.applyArabicShaping&&(y=Uo.applyArabicShaping(y)),y}(p.text,i,l)}),r}xi([{name:"triangle",components:3,type:"Uint16"}]),xi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),xi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),xi([{type:"Float32",name:"offsetX"}]),xi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var $d={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},tI=function(r,i,l,p,y){var v,x,S=8*y-p-1,C=(1<<S)-1,A=C>>1,L=-7,D=l?y-1:0,B=l?-1:1,j=r[i+D];for(D+=B,v=j&(1<<-L)-1,j>>=-L,L+=S;L>0;v=256*v+r[i+D],D+=B,L-=8);for(x=v&(1<<-L)-1,v>>=-L,L+=p;L>0;x=256*x+r[i+D],D+=B,L-=8);if(v===0)v=1-A;else{if(v===C)return x?NaN:1/0*(j?-1:1);x+=Math.pow(2,p),v-=A}return(j?-1:1)*x*Math.pow(2,v-p)},rI=function(r,i,l,p,y,v){var x,S,C,A=8*v-y-1,L=(1<<A)-1,D=L>>1,B=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=p?0:v-1,Q=p?1:-1,te=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(S=isNaN(i)?1:0,x=L):(x=Math.floor(Math.log(i)/Math.LN2),i*(C=Math.pow(2,-x))<1&&(x--,C*=2),(i+=x+D>=1?B/C:B*Math.pow(2,1-D))*C>=2&&(x++,C/=2),x+D>=L?(S=0,x=L):x+D>=1?(S=(i*C-1)*Math.pow(2,y),x+=D):(S=i*Math.pow(2,D-1)*Math.pow(2,y),x=0));y>=8;r[l+j]=255&S,j+=Q,S/=256,y-=8);for(x=x<<y|S,A+=y;A>0;r[l+j]=255&x,j+=Q,x/=256,A-=8);r[l+j-Q]|=128*te},pv=an;function an(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}an.Varint=0,an.Fixed64=1,an.Bytes=2,an.Fixed32=5;var nI=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Wl(r){return r.type===an.Bytes?r.readVarint()+r.pos:r.pos+1}function Tf(r,i,l){return l?4294967296*i+(r>>>0):4294967296*(i>>>0)+(r>>>0)}function iI(r,i,l){var p=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(p);for(var y=l.pos-1;y>=r;y--)l.buf[y+p]=l.buf[y]}function f9(r,i){for(var l=0;l<r.length;l++)i.writeVarint(r[l])}function p9(r,i){for(var l=0;l<r.length;l++)i.writeSVarint(r[l])}function d9(r,i){for(var l=0;l<r.length;l++)i.writeFloat(r[l])}function m9(r,i){for(var l=0;l<r.length;l++)i.writeDouble(r[l])}function y9(r,i){for(var l=0;l<r.length;l++)i.writeBoolean(r[l])}function g9(r,i){for(var l=0;l<r.length;l++)i.writeFixed32(r[l])}function v9(r,i){for(var l=0;l<r.length;l++)i.writeSFixed32(r[l])}function _9(r,i){for(var l=0;l<r.length;l++)i.writeFixed64(r[l])}function x9(r,i){for(var l=0;l<r.length;l++)i.writeSFixed64(r[l])}function dv(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+16777216*r[i+3]}function Mf(r,i,l){r[l]=i,r[l+1]=i>>>8,r[l+2]=i>>>16,r[l+3]=i>>>24}function oI(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+(r[i+3]<<24)}function b9(r,i,l){r===1&&l.readMessage(w9,i)}function w9(r,i,l){if(r===3){var p=l.readMessage(E9,{}),y=p.width,v=p.height,x=p.left,S=p.top,C=p.advance;i.push({id:p.id,bitmap:new oh({width:y+6,height:v+6},p.bitmap),metrics:{width:y,height:v,left:x,top:S,advance:C}})}}function E9(r,i,l){r===1?i.id=l.readVarint():r===2?i.bitmap=l.readBytes():r===3?i.width=l.readVarint():r===4?i.height=l.readVarint():r===5?i.left=l.readSVarint():r===6?i.top=l.readSVarint():r===7&&(i.advance=l.readVarint())}function aI(r){for(var i=0,l=0,p=0,y=r;p<y.length;p+=1){var v=y[p];i+=v.w*v.h,l=Math.max(l,v.w)}r.sort(function(te,ce){return ce.h-te.h});for(var x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}],S=0,C=0,A=0,L=r;A<L.length;A+=1)for(var D=L[A],B=x.length-1;B>=0;B--){var j=x[B];if(!(D.w>j.w||D.h>j.h)){if(D.x=j.x,D.y=j.y,C=Math.max(C,D.y+D.h),S=Math.max(S,D.x+D.w),D.w===j.w&&D.h===j.h){var Q=x.pop();B<x.length&&(x[B]=Q)}else D.h===j.h?(j.x+=D.w,j.w-=D.w):D.w===j.w?(j.y+=D.h,j.h-=D.h):(x.push({x:j.x+D.w,y:j.y,w:j.w-D.w,h:D.h}),j.y+=D.h,j.h-=D.h);break}}return{w:S,h:C,fill:i/(S*C)||0}}an.prototype={destroy:function(){this.buf=null},readFields:function(r,i,l){for(l=l||this.length;this.pos<l;){var p=this.readVarint(),y=p>>3,v=this.pos;this.type=7&p,r(y,i,this),this.pos===v&&this.skip(p)}return i},readMessage:function(r,i){return this.readFields(r,i,this.readVarint()+this.pos)},readFixed32:function(){var r=dv(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=oI(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=dv(this.buf,this.pos)+4294967296*dv(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=dv(this.buf,this.pos)+4294967296*oI(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=tI(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=tI(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var i,l,p=this.buf;return i=127&(l=p[this.pos++]),l<128?i:(i|=(127&(l=p[this.pos++]))<<7,l<128?i:(i|=(127&(l=p[this.pos++]))<<14,l<128?i:(i|=(127&(l=p[this.pos++]))<<21,l<128?i:function(y,v,x){var S,C,A=x.buf;if(S=(112&(C=A[x.pos++]))>>4,C<128||(S|=(127&(C=A[x.pos++]))<<3,C<128)||(S|=(127&(C=A[x.pos++]))<<10,C<128)||(S|=(127&(C=A[x.pos++]))<<17,C<128)||(S|=(127&(C=A[x.pos++]))<<24,C<128)||(S|=(1&(C=A[x.pos++]))<<31,C<128))return Tf(y,S,v);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(l=p[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,i=this.pos;return this.pos=r,r-i>=12&&nI?function(l,p,y){return nI.decode(l.subarray(p,y))}(this.buf,i,r):function(l,p,y){for(var v="",x=p;x<y;){var S,C,A,L=l[x],D=null,B=L>239?4:L>223?3:L>191?2:1;if(x+B>y)break;B===1?L<128&&(D=L):B===2?(192&(S=l[x+1]))==128&&(D=(31&L)<<6|63&S)<=127&&(D=null):B===3?(C=l[x+2],(192&(S=l[x+1]))==128&&(192&C)==128&&((D=(15&L)<<12|(63&S)<<6|63&C)<=2047||D>=55296&&D<=57343)&&(D=null)):B===4&&(C=l[x+2],A=l[x+3],(192&(S=l[x+1]))==128&&(192&C)==128&&(192&A)==128&&((D=(15&L)<<18|(63&S)<<12|(63&C)<<6|63&A)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,B=1):D>65535&&(D-=65536,v+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),v+=String.fromCharCode(D),x+=B}return v}(this.buf,i,r)},readBytes:function(){var r=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,r);return this.pos=r,i},readPackedVarint:function(r,i){if(this.type!==an.Bytes)return r.push(this.readVarint(i));var l=Wl(this);for(r=r||[];this.pos<l;)r.push(this.readVarint(i));return r},readPackedSVarint:function(r){if(this.type!==an.Bytes)return r.push(this.readSVarint());var i=Wl(this);for(r=r||[];this.pos<i;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==an.Bytes)return r.push(this.readBoolean());var i=Wl(this);for(r=r||[];this.pos<i;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==an.Bytes)return r.push(this.readFloat());var i=Wl(this);for(r=r||[];this.pos<i;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==an.Bytes)return r.push(this.readDouble());var i=Wl(this);for(r=r||[];this.pos<i;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==an.Bytes)return r.push(this.readFixed32());var i=Wl(this);for(r=r||[];this.pos<i;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==an.Bytes)return r.push(this.readSFixed32());var i=Wl(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==an.Bytes)return r.push(this.readFixed64());var i=Wl(this);for(r=r||[];this.pos<i;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==an.Bytes)return r.push(this.readSFixed64());var i=Wl(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed64());return r},skip:function(r){var i=7&r;if(i===an.Varint)for(;this.buf[this.pos++]>127;);else if(i===an.Bytes)this.pos=this.readVarint()+this.pos;else if(i===an.Fixed32)this.pos+=4;else{if(i!==an.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(r,i){this.writeVarint(r<<3|i)},realloc:function(r){for(var i=this.length||16;i<this.pos+r;)i*=2;if(i!==this.length){var l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Mf(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Mf(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Mf(this.buf,-1&r,this.pos),Mf(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Mf(this.buf,-1&r,this.pos),Mf(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(i,l){var p,y;if(i>=0?(p=i%4294967296|0,y=i/4294967296|0):(y=~(-i/4294967296),4294967295^(p=~(-i%4294967296))?p=p+1|0:(p=0,y=y+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(v,x,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(p,0,l),function(v,x){var S=(7&v)<<4;x.buf[x.pos++]|=S|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(y,l)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var i=this.pos;this.pos=function(p,y,v){for(var x,S,C=0;C<y.length;C++){if((x=y.charCodeAt(C))>55295&&x<57344){if(!S){x>56319||C+1===y.length?(p[v++]=239,p[v++]=191,p[v++]=189):S=x;continue}if(x<56320){p[v++]=239,p[v++]=191,p[v++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(p[v++]=239,p[v++]=191,p[v++]=189,S=null);x<128?p[v++]=x:(x<2048?p[v++]=x>>6|192:(x<65536?p[v++]=x>>12|224:(p[v++]=x>>18|240,p[v++]=x>>12&63|128),p[v++]=x>>6&63|128),p[v++]=63&x|128)}return v}(this.buf,r,this.pos);var l=this.pos-i;l>=128&&iI(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeFloat:function(r){this.realloc(4),rI(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),rI(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var i=r.length;this.writeVarint(i),this.realloc(i);for(var l=0;l<i;l++)this.buf[this.pos++]=r[l]},writeRawMessage:function(r,i){this.pos++;var l=this.pos;r(i,this);var p=this.pos-l;p>=128&&iI(l,p,this),this.pos=l-1,this.writeVarint(p),this.pos+=p},writeMessage:function(r,i,l){this.writeTag(r,an.Bytes),this.writeRawMessage(i,l)},writePackedVarint:function(r,i){i.length&&this.writeMessage(r,f9,i)},writePackedSVarint:function(r,i){i.length&&this.writeMessage(r,p9,i)},writePackedBoolean:function(r,i){i.length&&this.writeMessage(r,y9,i)},writePackedFloat:function(r,i){i.length&&this.writeMessage(r,d9,i)},writePackedDouble:function(r,i){i.length&&this.writeMessage(r,m9,i)},writePackedFixed32:function(r,i){i.length&&this.writeMessage(r,g9,i)},writePackedSFixed32:function(r,i){i.length&&this.writeMessage(r,v9,i)},writePackedFixed64:function(r,i){i.length&&this.writeMessage(r,_9,i)},writePackedSFixed64:function(r,i){i.length&&this.writeMessage(r,x9,i)},writeBytesField:function(r,i){this.writeTag(r,an.Bytes),this.writeBytes(i)},writeFixed32Field:function(r,i){this.writeTag(r,an.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(r,i){this.writeTag(r,an.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(r,i){this.writeTag(r,an.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(r,i){this.writeTag(r,an.Fixed64),this.writeSFixed64(i)},writeVarintField:function(r,i){this.writeTag(r,an.Varint),this.writeVarint(i)},writeSVarintField:function(r,i){this.writeTag(r,an.Varint),this.writeSVarint(i)},writeStringField:function(r,i){this.writeTag(r,an.Bytes),this.writeString(i)},writeFloatField:function(r,i){this.writeTag(r,an.Fixed32),this.writeFloat(i)},writeDoubleField:function(r,i){this.writeTag(r,an.Fixed64),this.writeDouble(i)},writeBooleanField:function(r,i){this.writeVarintField(r,Boolean(i))}};var mv=function(r,i){var l=i.pixelRatio,p=i.version,y=i.stretchX,v=i.stretchY,x=i.content;this.paddedRect=r,this.pixelRatio=l,this.stretchX=y,this.stretchY=v,this.content=x,this.version=p},qd={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};qd.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},qd.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},qd.tlbr.get=function(){return this.tl.concat(this.br)},qd.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(mv.prototype,qd);var Wd=function(r,i){var l={},p={};this.haveRenderCallbacks=[];var y=[];this.addImages(r,l,y),this.addImages(i,p,y);var v=aI(y),x=new Io({width:v.w||1,height:v.h||1});for(var S in r){var C=r[S],A=l[S].paddedRect;Io.copy(C.data,x,{x:0,y:0},{x:A.x+1,y:A.y+1},C.data)}for(var L in i){var D=i[L],B=p[L].paddedRect,j=B.x+1,Q=B.y+1,te=D.data.width,ce=D.data.height;Io.copy(D.data,x,{x:0,y:0},{x:j,y:Q},D.data),Io.copy(D.data,x,{x:0,y:ce-1},{x:j,y:Q-1},{width:te,height:1}),Io.copy(D.data,x,{x:0,y:0},{x:j,y:Q+ce},{width:te,height:1}),Io.copy(D.data,x,{x:te-1,y:0},{x:j-1,y:Q},{width:1,height:ce}),Io.copy(D.data,x,{x:0,y:0},{x:j+te,y:Q},{width:1,height:ce})}this.image=x,this.iconPositions=l,this.patternPositions=p};Wd.prototype.addImages=function(r,i,l){for(var p in r){var y=r[p],v={x:0,y:0,w:y.data.width+2,h:y.data.height+2};l.push(v),i[p]=new mv(v,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(p)}},Wd.prototype.patchUpdatedImages=function(r,i){for(var l in r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[l],r.getImage(l),i),this.patchUpdatedImage(this.patternPositions[l],r.getImage(l),i)},Wd.prototype.patchUpdatedImage=function(r,i,l){if(r&&i&&r.version!==i.version){r.version=i.version;var p=r.tl;l.update(i.data,void 0,{x:p[0],y:p[1]})}},wt("ImagePosition",mv),wt("ImageAtlas",Wd);var na={horizontal:1,vertical:2,horizontalOnly:3},If=function(){this.scale=1,this.fontStack="",this.imageName=null};If.forText=function(r,i){var l=new If;return l.scale=r||1,l.fontStack=i,l},If.forImage=function(r){var i=new If;return i.imageName=r,i};var Ki=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function yv(r,i,l,p,y,v,x,S,C,A,L,D,B,j,Q,te){var ce,oe=Ki.fromFeature(r,y);D===na.vertical&&oe.verticalizePunctuation();var ge=Uo.processBidirectionalText,we=Uo.processStyledBidirectionalText;if(ge&&oe.sections.length===1){ce=[];for(var Te=0,Oe=ge(oe.toString(),ex(oe,A,v,i,p,j,Q));Te<Oe.length;Te+=1){var Be=Oe[Te],Xe=new Ki;Xe.text=Be,Xe.sections=oe.sections;for(var ot=0;ot<Be.length;ot++)Xe.sectionIndex.push(0);ce.push(Xe)}}else if(we){ce=[];for(var Pt=0,dt=we(oe.text,oe.sectionIndex,ex(oe,A,v,i,p,j,Q));Pt<dt.length;Pt+=1){var Rt=dt[Pt],yt=new Ki;yt.text=Rt[0],yt.sectionIndex=Rt[1],yt.sections=oe.sections,ce.push(yt)}}else ce=function(Mt,pr){for(var nr=[],Ir=Mt.text,zt=0,Nr=0,xn=pr;Nr<xn.length;Nr+=1){var Pn=xn[Nr];nr.push(Mt.substring(zt,Pn)),zt=Pn}return zt<Ir.length&&nr.push(Mt.substring(zt,Ir.length)),nr}(oe,ex(oe,A,v,i,p,j,Q));var lr=[],Wt={positionedLines:lr,text:oe.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(Mt,pr,nr,Ir,zt,Nr,xn,Pn,Cn,bn,kn,di){for(var mi=0,Yi=-17,Ei=0,Ji=0,Fn=Pn==="right"?1:Pn==="left"?0:.5,Si=0,xr=0,Jr=zt;xr<Jr.length;xr+=1){var Wr=Jr[xr];Wr.trim();var Ar=Wr.getMaxScale(),lo=24*(Ar-1),Fi={positionedGlyphs:[],lineOffset:0};Mt.positionedLines[Si]=Fi;var dn=Fi.positionedGlyphs,Xn=0;if(Wr.length()){for(var Bi=0;Bi<Wr.length();Bi++){var Rr=Wr.getSection(Bi),rl=Wr.getSectionIndex(Bi),ia=Wr.getCharCode(Bi),nl=0,Bn=null,il=null,Ua=null,Nf=24,uh=!(Cn===na.horizontal||!kn&&!ff(ia)||kn&&(gv[ia]||(Kl=ia,ct.Arabic(Kl)||ct["Arabic Supplement"](Kl)||ct["Arabic Extended-A"](Kl)||ct["Arabic Presentation Forms-A"](Kl)||ct["Arabic Presentation Forms-B"](Kl))));if(Rr.imageName){var Rf=Ir[Rr.imageName];if(!Rf)continue;Ua=Rr.imageName,Mt.iconsInText=Mt.iconsInText||!0,il=Rf.paddedRect;var Xl=Rf.displaySize;Rr.scale=24*Rr.scale/di,nl=lo+(24-Xl[1]*Rr.scale),Nf=(Bn={width:Xl[0],height:Xl[1],left:1,top:-3,advance:uh?Xl[1]:Xl[0]}).advance;var zf=uh?Xl[0]*Rr.scale-24*Ar:Xl[1]*Rr.scale-24*Ar;zf>0&&zf>Xn&&(Xn=zf)}else{var Mv=nr[Rr.fontStack],Ff=Mv&&Mv[ia];if(Ff&&Ff.rect)il=Ff.rect,Bn=Ff.metrics;else{var Xd=pr[Rr.fontStack],Iv=Xd&&Xd[ia];if(!Iv)continue;Bn=Iv.metrics}nl=24*(Ar-Rr.scale)}uh?(Mt.verticalizable=!0,dn.push({glyph:ia,imageName:Ua,x:mi,y:Yi+nl,vertical:uh,scale:Rr.scale,fontStack:Rr.fontStack,sectionIndex:rl,metrics:Bn,rect:il}),mi+=Nf*Rr.scale+bn):(dn.push({glyph:ia,imageName:Ua,x:mi,y:Yi+nl,vertical:uh,scale:Rr.scale,fontStack:Rr.fontStack,sectionIndex:rl,metrics:Bn,rect:il}),mi+=Bn.advance*Rr.scale+bn)}dn.length!==0&&(Ei=Math.max(mi-bn,Ei),T9(dn,0,dn.length-1,Fn,Xn)),mi=0;var Ov=Nr*Ar+Xn;Fi.lineOffset=Math.max(Xn,lo),Yi+=Ov,Ji=Math.max(Ov,Ji),++Si}else Yi+=Nr,++Si}var Kl,Kd=Yi- -17,Bf=tx(xn),Zu=Bf.horizontalAlign,Vf=Bf.verticalAlign;(function(Cv,Av,Yd,Jd,Pv,Qd,em,tm,kv){var Uf,Lv=(Av-Yd)*Pv;Uf=Qd!==em?-tm*Jd- -17:(-Jd*kv+.5)*em;for(var jf=0,rm=Cv;jf<rm.length;jf+=1)for(var ch=0,nm=rm[jf].positionedGlyphs;ch<nm.length;ch+=1){var Gf=nm[ch];Gf.x+=Lv,Gf.y+=Uf}})(Mt.positionedLines,Fn,Zu,Vf,Ei,Ji,Nr,Kd,zt.length),Mt.top+=-Vf*Kd,Mt.bottom=Mt.top+Kd,Mt.left+=-Zu*Ei,Mt.right=Mt.left+Ei}(Wt,i,l,p,ce,x,S,C,D,A,B,te),!function(Mt){for(var pr=0,nr=Mt;pr<nr.length;pr+=1)if(nr[pr].positionedGlyphs.length!==0)return!1;return!0}(lr)&&Wt}Ki.fromFeature=function(r,i){for(var l=new Ki,p=0;p<r.sections.length;p++){var y=r.sections[p];y.image?l.addImageSection(y):l.addTextSection(y,i)}return l},Ki.prototype.length=function(){return this.text.length},Ki.prototype.getSection=function(r){return this.sections[this.sectionIndex[r]]},Ki.prototype.getSectionIndex=function(r){return this.sectionIndex[r]},Ki.prototype.getCharCode=function(r){return this.text.charCodeAt(r)},Ki.prototype.verticalizePunctuation=function(){this.text=function(r){for(var i="",l=0;l<r.length;l++){var p=r.charCodeAt(l+1)||null,y=r.charCodeAt(l-1)||null;i+=p&&Cd(p)&&!$d[r[l+1]]||y&&Cd(y)&&!$d[r[l-1]]||!$d[r[l]]?r[l]:$d[r[l]]}return i}(this.text)},Ki.prototype.trim=function(){for(var r=0,i=0;i<this.text.length&&gv[this.text.charCodeAt(i)];i++)r++;for(var l=this.text.length,p=this.text.length-1;p>=0&&p>=r&&gv[this.text.charCodeAt(p)];p--)l--;this.text=this.text.substring(r,l),this.sectionIndex=this.sectionIndex.slice(r,l)},Ki.prototype.substring=function(r,i){var l=new Ki;return l.text=this.text.substring(r,i),l.sectionIndex=this.sectionIndex.slice(r,i),l.sections=this.sections,l},Ki.prototype.toString=function(){return this.text},Ki.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce(function(i,l){return Math.max(i,r.sections[l].scale)},0)},Ki.prototype.addTextSection=function(r,i){this.text+=r.text,this.sections.push(If.forText(r.scale,r.fontStack||i));for(var l=this.sections.length-1,p=0;p<r.text.length;++p)this.sectionIndex.push(l)},Ki.prototype.addImageSection=function(r){var i=r.image?r.image.name:"";if(i.length!==0){var l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(If.forImage(i)),this.sectionIndex.push(this.sections.length-1)):st("Reached maximum number of images 6401")}else st("Can't add FormattedSection with an empty image.")},Ki.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var gv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Go={};function sI(r,i,l,p,y,v){if(i.imageName){var x=p[i.imageName];return x?x.displaySize[0]*i.scale*24/v+y:0}var S=l[i.fontStack],C=S&&S[r];return C?C.metrics.advance*i.scale+y:0}function lI(r,i,l,p){var y=Math.pow(r-i,2);return p?r<i?y/2:2*y:y+Math.abs(l)*l}function S9(r,i,l){var p=0;return r===10&&(p-=1e4),l&&(p+=150),r!==40&&r!==65288||(p+=50),i!==41&&i!==65289||(p+=50),p}function uI(r,i,l,p,y,v){for(var x=null,S=lI(i,l,y,v),C=0,A=p;C<A.length;C+=1){var L=A[C],D=lI(i-L.x,l,y,v)+L.badness;D<=S&&(x=L,S=D)}return{index:r,x:i,priorBreak:x,badness:S}}function ex(r,i,l,p,y,v,x){if(v!=="point")return[];if(!r)return[];for(var S,C=[],A=function(ce,oe,ge,we,Te,Oe){for(var Be=0,Xe=0;Xe<ce.length();Xe++){var ot=ce.getSection(Xe);Be+=sI(ce.getCharCode(Xe),ot,we,Te,oe,Oe)}return Be/Math.max(1,Math.ceil(Be/ge))}(r,i,l,p,y,x),L=r.text.indexOf("\u200B")>=0,D=0,B=0;B<r.length();B++){var j=r.getSection(B),Q=r.getCharCode(B);if(gv[Q]||(D+=sI(Q,j,p,y,i,x)),B<r.length()-1){var te=!((S=Q)<11904||!(ct["Bopomofo Extended"](S)||ct.Bopomofo(S)||ct["CJK Compatibility Forms"](S)||ct["CJK Compatibility Ideographs"](S)||ct["CJK Compatibility"](S)||ct["CJK Radicals Supplement"](S)||ct["CJK Strokes"](S)||ct["CJK Symbols and Punctuation"](S)||ct["CJK Unified Ideographs Extension A"](S)||ct["CJK Unified Ideographs"](S)||ct["Enclosed CJK Letters and Months"](S)||ct["Halfwidth and Fullwidth Forms"](S)||ct.Hiragana(S)||ct["Ideographic Description Characters"](S)||ct["Kangxi Radicals"](S)||ct["Katakana Phonetic Extensions"](S)||ct.Katakana(S)||ct["Vertical Forms"](S)||ct["Yi Radicals"](S)||ct["Yi Syllables"](S)));(Go[Q]||te||j.imageName)&&C.push(uI(B+1,D,A,C,S9(Q,r.getCharCode(B+1),te&&L),!1))}}return function ce(oe){return oe?ce(oe.priorBreak).concat(oe.index):[]}(uI(r.length(),D,A,C,0,!0))}function tx(r){var i=.5,l=.5;switch(r){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function T9(r,i,l,p,y){if(p||y)for(var v=r[l],x=(r[l].x+v.metrics.advance*v.scale)*p,S=i;S<=l;S++)r[S].x-=x,r[S].y+=y}function cI(r,i,l,p,y,v){var x,S=r.image;if(S.content){var C=S.content,A=S.pixelRatio||1;x=[C[0]/A,C[1]/A,S.displaySize[0]-C[2]/A,S.displaySize[1]-C[3]/A]}var L,D,B,j,Q=i.left*v,te=i.right*v;l==="width"||l==="both"?(j=y[0]+Q-p[3],D=y[0]+te+p[1]):D=(j=y[0]+(Q+te-S.displaySize[0])/2)+S.displaySize[0];var ce=i.top*v,oe=i.bottom*v;return l==="height"||l==="both"?(L=y[1]+ce-p[0],B=y[1]+oe+p[2]):B=(L=y[1]+(ce+oe-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:L,right:D,bottom:B,left:j,collisionPadding:x}}Go[10]=!0,Go[32]=!0,Go[38]=!0,Go[40]=!0,Go[41]=!0,Go[43]=!0,Go[45]=!0,Go[47]=!0,Go[173]=!0,Go[183]=!0,Go[8203]=!0,Go[8208]=!0,Go[8211]=!0,Go[8231]=!0;var Of=function(r){function i(l,p,y,v){r.call(this,l,p),this.angle=y,v!==void 0&&(this.segment=v)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.clone=function(){return new i(this.x,this.y,this.angle,this.segment)},i}(T);function rx(r,i){var l=i.expression;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new gr(r+1))};if(l.kind==="source")return{kind:"source"};for(var p=l.zoomStops,y=l.interpolationType,v=0;v<p.length&&p[v]<=r;)v++;for(var x=v=Math.max(0,v-1);x<p.length&&p[x]<r+1;)x++;x=Math.min(p.length-1,x);var S=p[v],C=p[x];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:C,interpolationType:y}:{kind:"camera",minZoom:S,maxZoom:C,minSize:l.evaluate(new gr(S)),maxSize:l.evaluate(new gr(C)),interpolationType:y}}function hI(r,i,l){var p=i.uSize,y=l.lowerSize;return r.kind==="source"?y/128:r.kind==="composite"?Hn(y/128,l.upperSize/128,i.uSizeT):p}function fI(r,i){var l=0,p=0;if(r.kind==="constant")p=r.layoutSize;else if(r.kind!=="source"){var y=r.interpolationType,v=y?W(Pi.interpolationFactor(y,i,r.minZoom,r.maxZoom),0,1):0;r.kind==="camera"?p=Hn(r.minSize,r.maxSize,v):l=v}return{uSizeT:l,uSize:p}}wt("Anchor",Of);var M9=Object.freeze({__proto__:null,getSizeData:rx,evaluateSizeForFeature:hI,evaluateSizeForZoom:fI,SIZE_PACK_FACTOR:128});function pI(r,i,l,p,y){if(i.segment===void 0)return!0;for(var v=i,x=i.segment+1,S=0;S>-l/2;){if(--x<0)return!1;S-=r[x].dist(v),v=r[x]}S+=r[x].dist(r[x+1]),x++;for(var C=[],A=0;S<l/2;){var L=r[x],D=r[x+1];if(!D)return!1;var B=r[x-1].angleTo(L)-L.angleTo(D);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:S,angleDelta:B}),A+=B;S-C[0].distance>p;)A-=C.shift().angleDelta;if(A>y)return!1;x++,S+=L.dist(D)}return!0}function dI(r){for(var i=0,l=0;l<r.length-1;l++)i+=r[l].dist(r[l+1]);return i}function mI(r,i,l){return r?.6*i*l:0}function yI(r,i){return Math.max(r?r.right-r.left:0,i?i.right-i.left:0)}function I9(r,i,l,p,y,v){for(var x=mI(l,y,v),S=yI(l,p)*v,C=0,A=dI(r)/2,L=0;L<r.length-1;L++){var D=r[L],B=r[L+1],j=D.dist(B);if(C+j>A){var Q=(A-C)/j,te=Hn(D.x,B.x,Q),ce=Hn(D.y,B.y,Q),oe=new Of(te,ce,B.angleTo(D),L);return oe._round(),!x||pI(r,oe,S,x,i)?oe:void 0}C+=j}}function O9(r,i,l,p,y,v,x,S,C){var A=mI(p,v,x),L=yI(p,y),D=L*x,B=r[0].x===0||r[0].x===C||r[0].y===0||r[0].y===C;return i-D<i/4&&(i=D+i/4),function j(Q,te,ce,oe,ge,we,Te,Oe,Be){for(var Xe=we/2,ot=dI(Q),Pt=0,dt=te-ce,Rt=[],yt=0;yt<Q.length-1;yt++){for(var lr=Q[yt],Wt=Q[yt+1],Mt=lr.dist(Wt),pr=Wt.angleTo(lr);dt+ce<Pt+Mt;){var nr=((dt+=ce)-Pt)/Mt,Ir=Hn(lr.x,Wt.x,nr),zt=Hn(lr.y,Wt.y,nr);if(Ir>=0&&Ir<Be&&zt>=0&&zt<Be&&dt-Xe>=0&&dt+Xe<=ot){var Nr=new Of(Ir,zt,pr,yt);Nr._round(),oe&&!pI(Q,Nr,we,oe,ge)||Rt.push(Nr)}}Pt+=Mt}return Oe||Rt.length||Te||(Rt=j(Q,Pt/2,ce,oe,ge,we,Te,!0,Be)),Rt}(r,B?i/2*S%i:(L/2+2*v)*x*S%i,i,A,l,D,B,!1,C)}function gI(r,i,l,p,y){for(var v=[],x=0;x<r.length;x++)for(var S=r[x],C=void 0,A=0;A<S.length-1;A++){var L=S[A],D=S[A+1];L.x<i&&D.x<i||(L.x<i?L=new T(i,L.y+(i-L.x)/(D.x-L.x)*(D.y-L.y))._round():D.x<i&&(D=new T(i,L.y+(i-L.x)/(D.x-L.x)*(D.y-L.y))._round()),L.y<l&&D.y<l||(L.y<l?L=new T(L.x+(l-L.y)/(D.y-L.y)*(D.x-L.x),l)._round():D.y<l&&(D=new T(L.x+(l-L.y)/(D.y-L.y)*(D.x-L.x),l)._round()),L.x>=p&&D.x>=p||(L.x>=p?L=new T(p,L.y+(p-L.x)/(D.x-L.x)*(D.y-L.y))._round():D.x>=p&&(D=new T(p,L.y+(p-L.x)/(D.x-L.x)*(D.y-L.y))._round()),L.y>=y&&D.y>=y||(L.y>=y?L=new T(L.x+(y-L.y)/(D.y-L.y)*(D.x-L.x),y)._round():D.y>=y&&(D=new T(L.x+(y-L.y)/(D.y-L.y)*(D.x-L.x),y)._round()),C&&L.equals(C[C.length-1])||v.push(C=[L]),C.push(D)))))}return v}function vI(r,i,l,p){var y=[],v=r.image,x=v.pixelRatio,S=v.paddedRect.w-2,C=v.paddedRect.h-2,A=r.right-r.left,L=r.bottom-r.top,D=v.stretchX||[[0,S]],B=v.stretchY||[[0,C]],j=function(Ir,zt){return Ir+zt[1]-zt[0]},Q=D.reduce(j,0),te=B.reduce(j,0),ce=S-Q,oe=C-te,ge=0,we=Q,Te=0,Oe=te,Be=0,Xe=ce,ot=0,Pt=oe;if(v.content&&p){var dt=v.content;ge=vv(D,0,dt[0]),Te=vv(B,0,dt[1]),we=vv(D,dt[0],dt[2]),Oe=vv(B,dt[1],dt[3]),Be=dt[0]-ge,ot=dt[1]-Te,Xe=dt[2]-dt[0]-we,Pt=dt[3]-dt[1]-Oe}var Rt=function(Ir,zt,Nr,xn){var Pn=_v(Ir.stretch-ge,we,A,r.left),Cn=xv(Ir.fixed-Be,Xe,Ir.stretch,Q),bn=_v(zt.stretch-Te,Oe,L,r.top),kn=xv(zt.fixed-ot,Pt,zt.stretch,te),di=_v(Nr.stretch-ge,we,A,r.left),mi=xv(Nr.fixed-Be,Xe,Nr.stretch,Q),Yi=_v(xn.stretch-Te,Oe,L,r.top),Ei=xv(xn.fixed-ot,Pt,xn.stretch,te),Ji=new T(Pn,bn),Fn=new T(di,bn),Si=new T(di,Yi),xr=new T(Pn,Yi),Jr=new T(Cn/x,kn/x),Wr=new T(mi/x,Ei/x),Ar=i*Math.PI/180;if(Ar){var lo=Math.sin(Ar),Fi=Math.cos(Ar),dn=[Fi,-lo,lo,Fi];Ji._matMult(dn),Fn._matMult(dn),xr._matMult(dn),Si._matMult(dn)}var Xn=Ir.stretch+Ir.fixed,Bi=zt.stretch+zt.fixed;return{tl:Ji,tr:Fn,bl:xr,br:Si,tex:{x:v.paddedRect.x+1+Xn,y:v.paddedRect.y+1+Bi,w:Nr.stretch+Nr.fixed-Xn,h:xn.stretch+xn.fixed-Bi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Jr,pixelOffsetBR:Wr,minFontScaleX:Xe/x/A,minFontScaleY:Pt/x/L,isSDF:l}};if(p&&(v.stretchX||v.stretchY))for(var yt=_I(D,ce,Q),lr=_I(B,oe,te),Wt=0;Wt<yt.length-1;Wt++)for(var Mt=yt[Wt],pr=yt[Wt+1],nr=0;nr<lr.length-1;nr++)y.push(Rt(Mt,lr[nr],pr,lr[nr+1]));else y.push(Rt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:C+1}));return y}function vv(r,i,l){for(var p=0,y=0,v=r;y<v.length;y+=1){var x=v[y];p+=Math.max(i,Math.min(l,x[1]))-Math.max(i,Math.min(l,x[0]))}return p}function _I(r,i,l){for(var p=[{fixed:-1,stretch:0}],y=0,v=r;y<v.length;y+=1){var x=v[y],S=x[0],C=x[1],A=p[p.length-1];p.push({fixed:S-A.stretch,stretch:A.stretch}),p.push({fixed:S-A.stretch,stretch:A.stretch+(C-S)})}return p.push({fixed:i+1,stretch:l}),p}function _v(r,i,l,p){return r/i*l+p}function xv(r,i,l,p){return r-i*l/p}var bv=function(r,i,l,p,y,v,x,S,C,A){if(this.boxStartIndex=r.length,C){var L=v.top,D=v.bottom,B=v.collisionPadding;B&&(L-=B[1],D+=B[3]);var j=D-L;j>0&&(j=Math.max(10,j),this.circleDiameter=j)}else{var Q=v.top*x-S,te=v.bottom*x+S,ce=v.left*x-S,oe=v.right*x+S,ge=v.collisionPadding;if(ge&&(ce-=ge[0]*x,Q-=ge[1]*x,oe+=ge[2]*x,te+=ge[3]*x),A){var we=new T(ce,Q),Te=new T(oe,Q),Oe=new T(ce,te),Be=new T(oe,te),Xe=A*Math.PI/180;we._rotate(Xe),Te._rotate(Xe),Oe._rotate(Xe),Be._rotate(Xe),ce=Math.min(we.x,Te.x,Oe.x,Be.x),oe=Math.max(we.x,Te.x,Oe.x,Be.x),Q=Math.min(we.y,Te.y,Oe.y,Be.y),te=Math.max(we.y,Te.y,Oe.y,Be.y)}r.emplaceBack(i.x,i.y,ce,Q,oe,te,l,p,y)}this.boxEndIndex=r.length},Cf=function(r,i){if(r===void 0&&(r=[]),i===void 0&&(i=C9),this.data=r,this.length=this.data.length,this.compare=i,this.length>0)for(var l=(this.length>>1)-1;l>=0;l--)this._down(l)};function C9(r,i){return r<i?-1:r>i?1:0}function A9(r,i,l){i===void 0&&(i=1),l===void 0&&(l=!1);for(var p=1/0,y=1/0,v=-1/0,x=-1/0,S=r[0],C=0;C<S.length;C++){var A=S[C];(!C||A.x<p)&&(p=A.x),(!C||A.y<y)&&(y=A.y),(!C||A.x>v)&&(v=A.x),(!C||A.y>x)&&(x=A.y)}var L=Math.min(v-p,x-y),D=L/2,B=new Cf([],P9);if(L===0)return new T(p,y);for(var j=p;j<v;j+=L)for(var Q=y;Q<x;Q+=L)B.push(new Af(j+D,Q+D,D,r));for(var te=function(ge){for(var we=0,Te=0,Oe=0,Be=ge[0],Xe=0,ot=Be.length,Pt=ot-1;Xe<ot;Pt=Xe++){var dt=Be[Xe],Rt=Be[Pt],yt=dt.x*Rt.y-Rt.x*dt.y;Te+=(dt.x+Rt.x)*yt,Oe+=(dt.y+Rt.y)*yt,we+=3*yt}return new Af(Te/we,Oe/we,0,ge)}(r),ce=B.length;B.length;){var oe=B.pop();(oe.d>te.d||!te.d)&&(te=oe,l&&console.log("found best %d after %d probes",Math.round(1e4*oe.d)/1e4,ce)),oe.max-te.d<=i||(B.push(new Af(oe.p.x-(D=oe.h/2),oe.p.y-D,D,r)),B.push(new Af(oe.p.x+D,oe.p.y-D,D,r)),B.push(new Af(oe.p.x-D,oe.p.y+D,D,r)),B.push(new Af(oe.p.x+D,oe.p.y+D,D,r)),ce+=4)}return l&&(console.log("num probes: "+ce),console.log("best distance: "+te.d)),te.p}function P9(r,i){return i.max-r.max}function Af(r,i,l,p){this.p=new T(r,i),this.h=l,this.d=function(y,v){for(var x=!1,S=1/0,C=0;C<v.length;C++)for(var A=v[C],L=0,D=A.length,B=D-1;L<D;B=L++){var j=A[L],Q=A[B];j.y>y.y!=Q.y>y.y&&y.x<(Q.x-j.x)*(y.y-j.y)/(Q.y-j.y)+j.x&&(x=!x),S=Math.min(S,$u(y,j,Q))}return(x?1:-1)*Math.sqrt(S)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}Cf.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},Cf.prototype.pop=function(){if(this.length!==0){var r=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),r}},Cf.prototype.peek=function(){return this.data[0]},Cf.prototype._up=function(r){for(var i=this.data,l=this.compare,p=i[r];r>0;){var y=r-1>>1,v=i[y];if(l(p,v)>=0)break;i[r]=v,r=y}i[r]=p},Cf.prototype._down=function(r){for(var i=this.data,l=this.compare,p=this.length>>1,y=i[r];r<p;){var v=1+(r<<1),x=i[v],S=v+1;if(S<this.length&&l(i[S],x)<0&&(v=S,x=i[S]),l(x,y)>=0)break;i[r]=x,r=v}i[r]=y};var nx=Number.POSITIVE_INFINITY;function xI(r,i){return i[1]!==nx?function(l,p,y){var v=0,x=0;switch(p=Math.abs(p),y=Math.abs(y),l){case"top-right":case"top-left":case"top":x=y-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-y}switch(l){case"top-right":case"bottom-right":case"right":v=-p;break;case"top-left":case"bottom-left":case"left":v=p}return[v,x]}(r,i[0],i[1]):function(l,p){var y=0,v=0;p<0&&(p=0);var x=p/Math.sqrt(2);switch(l){case"top-right":case"top-left":v=x-7;break;case"bottom-right":case"bottom-left":v=7-x;break;case"bottom":v=7-p;break;case"top":v=p-7}switch(l){case"top-right":case"bottom-right":y=-x;break;case"top-left":case"bottom-left":y=x;break;case"left":y=p;break;case"right":y=-p}return[y,v]}(r,i[0])}function ix(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function bI(r,i,l,p,y,v,x,S,C,A,L,D,B,j,Q){var te=function(Te,Oe,Be,Xe,ot,Pt,dt,Rt){for(var yt=Xe.layout.get("text-rotate").evaluate(Pt,{})*Math.PI/180,lr=[],Wt=0,Mt=Oe.positionedLines;Wt<Mt.length;Wt+=1)for(var pr=Mt[Wt],nr=0,Ir=pr.positionedGlyphs;nr<Ir.length;nr+=1){var zt=Ir[nr];if(zt.rect){var Nr=zt.rect||{},xn=4,Pn=!0,Cn=1,bn=0,kn=(ot||Rt)&&zt.vertical,di=zt.metrics.advance*zt.scale/2;if(Rt&&Oe.verticalizable&&(bn=pr.lineOffset/2-(zt.imageName?-(24-zt.metrics.width*zt.scale)/2:24*(zt.scale-1))),zt.imageName){var mi=dt[zt.imageName];Pn=mi.sdf,xn=1/(Cn=mi.pixelRatio)}var Yi=ot?[zt.x+di,zt.y]:[0,0],Ei=ot?[0,0]:[zt.x+di+Be[0],zt.y+Be[1]-bn],Ji=[0,0];kn&&(Ji=Ei,Ei=[0,0]);var Fn=(zt.metrics.left-xn)*zt.scale-di+Ei[0],Si=(-zt.metrics.top-xn)*zt.scale+Ei[1],xr=Fn+Nr.w*zt.scale/Cn,Jr=Si+Nr.h*zt.scale/Cn,Wr=new T(Fn,Si),Ar=new T(xr,Si),lo=new T(Fn,Jr),Fi=new T(xr,Jr);if(kn){var dn=new T(-di,di- -17),Xn=-Math.PI/2,Bi=12-di,Rr=new T(22-Bi,-(zt.imageName?Bi:0)),rl=new(Function.prototype.bind.apply(T,[null].concat(Ji)));Wr._rotateAround(Xn,dn)._add(Rr)._add(rl),Ar._rotateAround(Xn,dn)._add(Rr)._add(rl),lo._rotateAround(Xn,dn)._add(Rr)._add(rl),Fi._rotateAround(Xn,dn)._add(Rr)._add(rl)}if(yt){var ia=Math.sin(yt),nl=Math.cos(yt),Bn=[nl,-ia,ia,nl];Wr._matMult(Bn),Ar._matMult(Bn),lo._matMult(Bn),Fi._matMult(Bn)}var il=new T(0,0),Ua=new T(0,0);lr.push({tl:Wr,tr:Ar,bl:lo,br:Fi,tex:Nr,writingMode:Oe.writingMode,glyphOffset:Yi,sectionIndex:zt.sectionIndex,isSDF:Pn,pixelOffsetTL:il,pixelOffsetBR:Ua,minFontScaleX:0,minFontScaleY:0})}}return lr}(0,l,S,y,v,x,p,r.allowVerticalPlacement),ce=r.textSizeData,oe=null;ce.kind==="source"?(oe=[128*y.layout.get("text-size").evaluate(x,{})])[0]>32640&&st(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ce.kind==="composite"&&((oe=[128*j.compositeTextSizes[0].evaluate(x,{},Q),128*j.compositeTextSizes[1].evaluate(x,{},Q)])[0]>32640||oe[1]>32640)&&st(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),r.addSymbols(r.text,te,oe,S,v,x,A,i,C.lineStartIndex,C.lineLength,B,Q);for(var ge=0,we=L;ge<we.length;ge+=1)D[we[ge]]=r.text.placedSymbolArray.length-1;return 4*te.length}function wI(r){for(var i in r)return r[i];return null}function k9(r,i,l,p){var y=r.compareText;if(i in y){for(var v=y[i],x=v.length-1;x>=0;x--)if(p.dist(v[x])<l)return!0}else y[i]=[];return y[i].push(p),!1}var L9=Sf.VectorTileFeature.types,D9=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function wv(r,i,l,p,y,v,x,S,C,A,L,D,B){var j=S?Math.min(32640,Math.round(S[0])):0,Q=S?Math.min(32640,Math.round(S[1])):0;r.emplaceBack(i,l,Math.round(32*p),Math.round(32*y),v,x,(j<<1)+(C?1:0),Q,16*A,16*L,256*D,256*B)}function ox(r,i,l){r.emplaceBack(i.x,i.y,l),r.emplaceBack(i.x,i.y,l),r.emplaceBack(i.x,i.y,l),r.emplaceBack(i.x,i.y,l)}function N9(r){for(var i=0,l=r.sections;i<l.length;i+=1)if(pf(l[i].text))return!0;return!1}var Pf=function(r){this.layoutVertexArray=new gf,this.indexArray=new Ks,this.programConfigurations=r,this.segments=new q,this.dynamicLayoutVertexArray=new Uu,this.opacityVertexArray=new Qc,this.placedSymbolArray=new d};Pf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Pf.prototype.upload=function(r,i,l,p){this.isEmpty()||(l&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,s9.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,l9.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,D9,!0),this.opacityVertexBuffer.itemSize=1),(l||p)&&this.programConfigurations.upload(r))},Pf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},wt("SymbolBuffers",Pf);var Hd=function(r,i,l){this.layoutVertexArray=new r,this.layoutAttributes=i,this.indexArray=new l,this.segments=new q,this.collisionVertexArray=new Nd};Hd.prototype.upload=function(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,u9.members,!0)},Hd.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},wt("CollisionBuffers",Hd);var Zr=function(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=jo([]),this.placementViewportMatrix=jo([]);var i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=rx(this.zoom,i["text-size"]),this.iconSizeData=rx(this.zoom,i["icon-size"]);var l=this.layers[0].layout,p=l.get("symbol-sort-key"),y=l.get("symbol-z-order");this.canOverlap=l.get("text-allow-overlap")||l.get("icon-allow-overlap")||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map(function(v){return na[v]})),this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id}),this.sourceID=r.sourceID};Zr.prototype.createArrays=function(){this.text=new Pf(new qt(this.layers,this.zoom,function(r){return/^text/.test(r)})),this.icon=new Pf(new qt(this.layers,this.zoom,function(r){return/^icon/.test(r)})),this.glyphOffsetArray=new E,this.lineVertexArray=new O,this.symbolInstances=new w},Zr.prototype.calculateGlyphDependencies=function(r,i,l,p,y){for(var v=0;v<r.length;v++)if(i[r.charCodeAt(v)]=!0,(l||p)&&y){var x=$d[r.charAt(v)];x&&(i[x.charCodeAt(0)]=!0)}},Zr.prototype.populate=function(r,i,l){var p=this.layers[0],y=p.layout,v=y.get("text-font"),x=y.get("text-field"),S=y.get("icon-image"),C=(x.value.kind!=="constant"||x.value.value instanceof vi&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),A=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,L=y.get("symbol-sort-key");if(this.features=[],C||A){for(var D=i.iconDependencies,B=i.glyphDependencies,j=i.availableImages,Q=new gr(this.zoom),te=0,ce=r;te<ce.length;te+=1){var oe=ce[te],ge=oe.feature,we=oe.id,Te=oe.index,Oe=oe.sourceLayerIndex,Be=p._featureFilter.needGeometry,Xe=zn(ge,Be);if(p._featureFilter.filter(Q,Xe,l)){Be||(Xe.geometry=On(ge));var ot=void 0;if(C){var Pt=p.getValueAndResolveTokens("text-field",Xe,l,j),dt=vi.factory(Pt);N9(dt)&&(this.hasRTLText=!0),(!this.hasRTLText||Pd()==="unavailable"||this.hasRTLText&&Uo.isParsed())&&(ot=h9(dt,p,Xe))}var Rt=void 0;if(A){var yt=p.getValueAndResolveTokens("icon-image",Xe,l,j);Rt=yt instanceof io?yt:io.fromString(yt)}if(ot||Rt){var lr=this.sortFeaturesByKey?L.evaluate(Xe,{},l):void 0;if(this.features.push({id:we,text:ot,icon:Rt,index:Te,sourceLayerIndex:Oe,geometry:Xe.geometry,properties:ge.properties,type:L9[ge.type],sortKey:lr}),Rt&&(D[Rt.name]=!0),ot){var Wt=v.evaluate(Xe,{},l).join(","),Mt=y.get("text-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(na.vertical)>=0;for(var pr=0,nr=ot.sections;pr<nr.length;pr+=1){var Ir=nr[pr];if(Ir.image)D[Ir.image.name]=!0;else{var zt=Od(ot.toString()),Nr=Ir.fontStack||Wt,xn=B[Nr]=B[Nr]||{};this.calculateGlyphDependencies(Ir.text,xn,Mt,this.allowVerticalPlacement,zt)}}}}}}y.get("symbol-placement")==="line"&&(this.features=function(Pn){var Cn={},bn={},kn=[],di=0;function mi(dn){kn.push(Pn[dn]),di++}function Yi(dn,Xn,Bi){var Rr=bn[dn];return delete bn[dn],bn[Xn]=Rr,kn[Rr].geometry[0].pop(),kn[Rr].geometry[0]=kn[Rr].geometry[0].concat(Bi[0]),Rr}function Ei(dn,Xn,Bi){var Rr=Cn[Xn];return delete Cn[Xn],Cn[dn]=Rr,kn[Rr].geometry[0].shift(),kn[Rr].geometry[0]=Bi[0].concat(kn[Rr].geometry[0]),Rr}function Ji(dn,Xn,Bi){var Rr=Bi?Xn[0][Xn[0].length-1]:Xn[0][0];return dn+":"+Rr.x+":"+Rr.y}for(var Fn=0;Fn<Pn.length;Fn++){var Si=Pn[Fn],xr=Si.geometry,Jr=Si.text?Si.text.toString():null;if(Jr){var Wr=Ji(Jr,xr),Ar=Ji(Jr,xr,!0);if(Wr in bn&&Ar in Cn&&bn[Wr]!==Cn[Ar]){var lo=Ei(Wr,Ar,xr),Fi=Yi(Wr,Ar,kn[lo].geometry);delete Cn[Wr],delete bn[Ar],bn[Ji(Jr,kn[Fi].geometry,!0)]=Fi,kn[lo].geometry=null}else Wr in bn?Yi(Wr,Ar,xr):Ar in Cn?Ei(Wr,Ar,xr):(mi(Fn),Cn[Wr]=di-1,bn[Ar]=di-1)}else mi(Fn)}return kn.filter(function(dn){return dn.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Pn,Cn){return Pn.sortKey-Cn.sortKey})}},Zr.prototype.update=function(r,i,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,i,this.layers,l),this.icon.programConfigurations.updatePaintArrays(r,i,this.layers,l))},Zr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Zr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Zr.prototype.upload=function(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Zr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Zr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Zr.prototype.addToLineVertexArray=function(r,i){var l=this.lineVertexArray.length;if(r.segment!==void 0){for(var p=r.dist(i[r.segment+1]),y=r.dist(i[r.segment]),v={},x=r.segment+1;x<i.length;x++)v[x]={x:i[x].x,y:i[x].y,tileUnitDistanceFromAnchor:p},x<i.length-1&&(p+=i[x+1].dist(i[x]));for(var S=r.segment||0;S>=0;S--)v[S]={x:i[S].x,y:i[S].y,tileUnitDistanceFromAnchor:y},S>0&&(y+=i[S-1].dist(i[S]));for(var C=0;C<i.length;C++){var A=v[C];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}},Zr.prototype.addSymbols=function(r,i,l,p,y,v,x,S,C,A,L,D){for(var B=r.indexArray,j=r.layoutVertexArray,Q=r.segments.prepareSegment(4*i.length,j,B,this.canOverlap?v.sortKey:void 0),te=this.glyphOffsetArray.length,ce=Q.vertexLength,oe=this.allowVerticalPlacement&&x===na.vertical?Math.PI/2:0,ge=v.text&&v.text.sections,we=0;we<i.length;we++){var Te=i[we],Oe=Te.tl,Be=Te.tr,Xe=Te.bl,ot=Te.br,Pt=Te.tex,dt=Te.pixelOffsetTL,Rt=Te.pixelOffsetBR,yt=Te.minFontScaleX,lr=Te.minFontScaleY,Wt=Te.glyphOffset,Mt=Te.isSDF,pr=Te.sectionIndex,nr=Q.vertexLength,Ir=Wt[1];wv(j,S.x,S.y,Oe.x,Ir+Oe.y,Pt.x,Pt.y,l,Mt,dt.x,dt.y,yt,lr),wv(j,S.x,S.y,Be.x,Ir+Be.y,Pt.x+Pt.w,Pt.y,l,Mt,Rt.x,dt.y,yt,lr),wv(j,S.x,S.y,Xe.x,Ir+Xe.y,Pt.x,Pt.y+Pt.h,l,Mt,dt.x,Rt.y,yt,lr),wv(j,S.x,S.y,ot.x,Ir+ot.y,Pt.x+Pt.w,Pt.y+Pt.h,l,Mt,Rt.x,Rt.y,yt,lr),ox(r.dynamicLayoutVertexArray,S,oe),B.emplaceBack(nr,nr+1,nr+2),B.emplaceBack(nr+1,nr+2,nr+3),Q.vertexLength+=4,Q.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Wt[0]),we!==i.length-1&&pr===i[we+1].sectionIndex||r.programConfigurations.populatePaintArrays(j.length,v,v.index,{},D,ge&&ge[pr])}r.placedSymbolArray.emplaceBack(S.x,S.y,te,this.glyphOffsetArray.length-te,ce,C,A,S.segment,l?l[0]:0,l?l[1]:0,p[0],p[1],x,0,!1,0,L)},Zr.prototype._addCollisionDebugVertex=function(r,i,l,p,y,v){return i.emplaceBack(0,0),r.emplaceBack(l.x,l.y,p,y,Math.round(v.x),Math.round(v.y))},Zr.prototype.addCollisionDebugVertices=function(r,i,l,p,y,v,x){var S=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),C=S.vertexLength,A=y.layoutVertexArray,L=y.collisionVertexArray,D=x.anchorX,B=x.anchorY;this._addCollisionDebugVertex(A,L,v,D,B,new T(r,i)),this._addCollisionDebugVertex(A,L,v,D,B,new T(l,i)),this._addCollisionDebugVertex(A,L,v,D,B,new T(l,p)),this._addCollisionDebugVertex(A,L,v,D,B,new T(r,p)),S.vertexLength+=4;var j=y.indexArray;j.emplaceBack(C,C+1),j.emplaceBack(C+1,C+2),j.emplaceBack(C+2,C+3),j.emplaceBack(C+3,C),S.primitiveLength+=4},Zr.prototype.addDebugCollisionBoxes=function(r,i,l,p){for(var y=r;y<i;y++){var v=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,p?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,l)}},Zr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Hd(ju,eI.members,eh),this.iconCollisionBox=new Hd(ju,eI.members,eh);for(var r=0;r<this.symbolInstances.length;r++){var i=this.symbolInstances.get(r);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}},Zr.prototype._deserializeCollisionBoxesForSymbol=function(r,i,l,p,y,v,x,S,C){for(var A={},L=i;L<l;L++){var D=r.get(L);A.textBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,anchorPointX:D.anchorPointX,anchorPointY:D.anchorPointY},A.textFeatureIndex=D.featureIndex;break}for(var B=p;B<y;B++){var j=r.get(B);A.verticalTextBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},A.verticalTextFeatureIndex=j.featureIndex;break}for(var Q=v;Q<x;Q++){var te=r.get(Q);A.iconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},A.iconFeatureIndex=te.featureIndex;break}for(var ce=S;ce<C;ce++){var oe=r.get(ce);A.verticalIconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},A.verticalIconFeatureIndex=oe.featureIndex;break}return A},Zr.prototype.deserializeCollisionBoxes=function(r){this.collisionArrays=[];for(var i=0;i<this.symbolInstances.length;i++){var l=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}},Zr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Zr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Zr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Zr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Zr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Zr.prototype.addIndicesForPlacedSymbol=function(r,i){for(var l=r.placedSymbolArray.get(i),p=l.vertexStartIndex+4*l.numGlyphs,y=l.vertexStartIndex;y<p;y+=4)r.indexArray.emplaceBack(y,y+1,y+2),r.indexArray.emplaceBack(y+1,y+2,y+3)},Zr.prototype.getSortedSymbolIndexes=function(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var i=Math.sin(r),l=Math.cos(r),p=[],y=[],v=[],x=0;x<this.symbolInstances.length;++x){v.push(x);var S=this.symbolInstances.get(x);p.push(0|Math.round(i*S.anchorX+l*S.anchorY)),y.push(S.featureIndex)}return v.sort(function(C,A){return p[C]-p[A]||y[A]-y[C]}),v},Zr.prototype.addToSortKeyRanges=function(r,i){var l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===i?l.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:r+1})},Zr.prototype.sortFeatures=function(r){var i=this;if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var l=0,p=this.symbolInstanceIndexes;l<p.length;l+=1){var y=this.symbolInstances.get(p[l]);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach(function(v,x,S){v>=0&&S.indexOf(v)===x&&i.addIndicesForPlacedSymbol(i.text,v)}),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},wt("SymbolBucket",Zr,{omit:["layers","collisionBoxArray","features","compareText"]}),Zr.MAX_GLYPHS=65535,Zr.addDynamicAttributes=ox;var R9=new Li({"symbol-placement":new Dt(G.layout_symbol["symbol-placement"]),"symbol-spacing":new Dt(G.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Dt(G.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Tt(G.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Dt(G.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Dt(G.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Dt(G.layout_symbol["icon-ignore-placement"]),"icon-optional":new Dt(G.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Dt(G.layout_symbol["icon-rotation-alignment"]),"icon-size":new Tt(G.layout_symbol["icon-size"]),"icon-text-fit":new Dt(G.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Dt(G.layout_symbol["icon-text-fit-padding"]),"icon-image":new Tt(G.layout_symbol["icon-image"]),"icon-rotate":new Tt(G.layout_symbol["icon-rotate"]),"icon-padding":new Dt(G.layout_symbol["icon-padding"]),"icon-keep-upright":new Dt(G.layout_symbol["icon-keep-upright"]),"icon-offset":new Tt(G.layout_symbol["icon-offset"]),"icon-anchor":new Tt(G.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Dt(G.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Dt(G.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Dt(G.layout_symbol["text-rotation-alignment"]),"text-field":new Tt(G.layout_symbol["text-field"]),"text-font":new Tt(G.layout_symbol["text-font"]),"text-size":new Tt(G.layout_symbol["text-size"]),"text-max-width":new Tt(G.layout_symbol["text-max-width"]),"text-line-height":new Dt(G.layout_symbol["text-line-height"]),"text-letter-spacing":new Tt(G.layout_symbol["text-letter-spacing"]),"text-justify":new Tt(G.layout_symbol["text-justify"]),"text-radial-offset":new Tt(G.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Dt(G.layout_symbol["text-variable-anchor"]),"text-anchor":new Tt(G.layout_symbol["text-anchor"]),"text-max-angle":new Dt(G.layout_symbol["text-max-angle"]),"text-writing-mode":new Dt(G.layout_symbol["text-writing-mode"]),"text-rotate":new Tt(G.layout_symbol["text-rotate"]),"text-padding":new Dt(G.layout_symbol["text-padding"]),"text-keep-upright":new Dt(G.layout_symbol["text-keep-upright"]),"text-transform":new Tt(G.layout_symbol["text-transform"]),"text-offset":new Tt(G.layout_symbol["text-offset"]),"text-allow-overlap":new Dt(G.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Dt(G.layout_symbol["text-ignore-placement"]),"text-optional":new Dt(G.layout_symbol["text-optional"])}),ax={paint:new Li({"icon-opacity":new Tt(G.paint_symbol["icon-opacity"]),"icon-color":new Tt(G.paint_symbol["icon-color"]),"icon-halo-color":new Tt(G.paint_symbol["icon-halo-color"]),"icon-halo-width":new Tt(G.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Tt(G.paint_symbol["icon-halo-blur"]),"icon-translate":new Dt(G.paint_symbol["icon-translate"]),"icon-translate-anchor":new Dt(G.paint_symbol["icon-translate-anchor"]),"text-opacity":new Tt(G.paint_symbol["text-opacity"]),"text-color":new Tt(G.paint_symbol["text-color"],{runtimeType:De,getOverride:function(r){return r.textColor},hasOverride:function(r){return!!r.textColor}}),"text-halo-color":new Tt(G.paint_symbol["text-halo-color"]),"text-halo-width":new Tt(G.paint_symbol["text-halo-width"]),"text-halo-blur":new Tt(G.paint_symbol["text-halo-blur"]),"text-translate":new Dt(G.paint_symbol["text-translate"]),"text-translate-anchor":new Dt(G.paint_symbol["text-translate-anchor"])}),layout:R9},kf=function(r){this.type=r.property.overrides?r.property.overrides.runtimeType:_t,this.defaultValue=r};kf.prototype.evaluate=function(r){if(r.formattedSection){var i=this.defaultValue.property.overrides;if(i&&i.hasOverride(r.formattedSection))return i.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default},kf.prototype.eachChild=function(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)},kf.prototype.outputDefined=function(){return!1},kf.prototype.serialize=function(){return null},wt("FormatSectionOverride",kf,{omit:["defaultValue"]});var z9=function(r){function i(l){r.call(this,l,ax)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.recalculate=function(l,p){if(r.prototype.recalculate.call(this,l,p),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var y=this.layout.get("text-writing-mode");if(y){for(var v=[],x=0,S=y;x<S.length;x+=1){var C=S[x];v.indexOf(C)<0&&v.push(C)}this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},i.prototype.getValueAndResolveTokens=function(l,p,y,v){var x=this.layout.get(l).evaluate(p,{},y,v),S=this._unevaluatedLayout._values[l];return S.isDataDriven()||jc(S.value)||!x?x:function(C,A){return A.replace(/{([^{}]+)}/g,function(L,D){return D in C?String(C[D]):""})}(p.properties,x)},i.prototype.createBucket=function(l){return new Zr(l)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype._setPaintOverrides=function(){for(var l=0,p=ax.paint.overridableProperties;l<p.length;l+=1){var y=p[l];if(i.hasPaintOverride(this.layout,y)){var v,x=this.paint.get(y),S=new kf(x),C=new Nu(S,x.property.specification);v=x.value.kind==="constant"||x.value.kind==="source"?new Gc("source",C):new Ru("composite",C,x.value.zoomStops,x.value._interpolationType),this.paint._values[y]=new Hi(x.property,v,x.parameters)}}},i.prototype._handleOverridablePaintPropertyUpdate=function(l,p,y){return!(!this.layout||p.isDataDriven()||y.isDataDriven())&&i.hasPaintOverride(this.layout,l)},i.hasPaintOverride=function(l,p){var y=l.get("text-field"),v=ax.paint.properties[p],x=!1,S=function(L){for(var D=0,B=L;D<B.length;D+=1)if(v.overrides&&v.overrides.hasOverride(B[D]))return void(x=!0)};if(y.value.kind==="constant"&&y.value.value instanceof vi)S(y.value.value.sections);else if(y.value.kind==="source"){var C=function(L){x||(L instanceof qi&&Rn(L.value)===$t?S(L.value.sections):L instanceof ya?S(L.sections):L.eachChild(C))},A=y.value;A._styleExpression&&C(A._styleExpression.expression)}return x},i}(za),F9={paint:new Li({"background-color":new Dt(G.paint_background["background-color"]),"background-pattern":new Zi(G.paint_background["background-pattern"]),"background-opacity":new Dt(G.paint_background["background-opacity"])})},B9=function(r){function i(l){r.call(this,l,F9)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(za),V9={paint:new Li({"raster-opacity":new Dt(G.paint_raster["raster-opacity"]),"raster-hue-rotate":new Dt(G.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Dt(G.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Dt(G.paint_raster["raster-brightness-max"]),"raster-saturation":new Dt(G.paint_raster["raster-saturation"]),"raster-contrast":new Dt(G.paint_raster["raster-contrast"]),"raster-resampling":new Dt(G.paint_raster["raster-resampling"]),"raster-fade-duration":new Dt(G.paint_raster["raster-fade-duration"])})},U9=function(r){function i(l){r.call(this,l,V9)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(za),j9=function(r){function i(l){r.call(this,l,{}),this.implementation=l}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},i.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},i.prototype.recalculate=function(){},i.prototype.updateTransitions=function(){},i.prototype.hasTransition=function(){},i.prototype.serialize=function(){},i.prototype.onAdd=function(l){this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},i.prototype.onRemove=function(l){this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},i}(za),G9={circle:$1,heatmap:Mj,hillshade:Oj,fill:qj,"fill-extrusion":e9,line:a9,symbol:z9,background:B9,raster:U9},EI=I.HTMLImageElement,SI=I.HTMLCanvasElement,TI=I.HTMLVideoElement,MI=I.ImageData,Ev=I.ImageBitmap,ah=function(r,i,l,p){this.context=r,this.format=l,this.texture=r.gl.createTexture(),this.update(i,p)};ah.prototype.update=function(r,i,l){var p=r.width,y=r.height,v=!(this.size&&this.size[0]===p&&this.size[1]===y||l),x=this.context,S=x.gl;if(this.useMipmap=Boolean(i&&i.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!i||i.premultiply!==!1)),v)this.size=[p,y],r instanceof EI||r instanceof SI||r instanceof TI||r instanceof MI||Ev&&r instanceof Ev?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,r):S.texImage2D(S.TEXTURE_2D,0,this.format,p,y,0,this.format,S.UNSIGNED_BYTE,r.data);else{var C=l||{x:0,y:0},A=C.x,L=C.y;r instanceof EI||r instanceof SI||r instanceof TI||r instanceof MI||Ev&&r instanceof Ev?S.texSubImage2D(S.TEXTURE_2D,0,A,L,S.RGBA,S.UNSIGNED_BYTE,r):S.texSubImage2D(S.TEXTURE_2D,0,A,L,p,y,S.RGBA,S.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},ah.prototype.bind=function(r,i,l){var p=this.context.gl;p.bindTexture(p.TEXTURE_2D,this.texture),l!==p.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(l=p.LINEAR),r!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,r),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,l||r),this.filter=r),i!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,i),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,i),this.wrap=i)},ah.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ah.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var sx=function(r){var i=this;this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})};sx.prototype.trigger=function(){var r=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){r._triggered=!1,r._callback()},0))},sx.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Lf=function(r,i,l){this.target=r,this.parent=i,this.mapId=l,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Fe(["receive","process"],this),this.invoker=new sx(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ht()?r:I};function II(r,i,l){var p=2*Math.PI*6378137/256/Math.pow(2,l);return[r*p-2*Math.PI*6378137/2,i*p-2*Math.PI*6378137/2]}Lf.prototype.send=function(r,i,l,p,y){var v=this;y===void 0&&(y=!1);var x=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(this.callbacks[x]=l);var S=rr(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:r,hasCallback:!!l,targetMapId:p,mustQueue:y,sourceMapId:this.mapId,data:va(i,S)},S),{cancel:function(){l&&delete v.callbacks[x],v.target.postMessage({id:x,type:"<cancel>",targetMapId:p,sourceMapId:v.mapId})}}},Lf.prototype.receive=function(r){var i=r.data,l=i.id;if(l&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){delete this.tasks[l];var p=this.cancelCallbacks[l];delete this.cancelCallbacks[l],p&&p()}else ht()||i.mustQueue?(this.tasks[l]=i,this.taskQueue.push(l),this.invoker.trigger()):this.processTask(l,i)},Lf.prototype.process=function(){if(this.taskQueue.length){var r=this.taskQueue.shift(),i=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(r,i)}},Lf.prototype.processTask=function(r,i){var l=this;if(i.type==="<response>"){var p=this.callbacks[r];delete this.callbacks[r],p&&(i.error?p(wo(i.error)):p(null,wo(i.data)))}else{var y=!1,v=rr(this.globalScope)?void 0:[],x=i.hasCallback?function(L,D){y=!0,delete l.cancelCallbacks[r],l.target.postMessage({id:r,type:"<response>",sourceMapId:l.mapId,error:L?va(L):null,data:va(D,v)},v)}:function(L){y=!0},S=null,C=wo(i.data);if(this.parent[i.type])S=this.parent[i.type](i.sourceMapId,C,x);else if(this.parent.getWorkerSource){var A=i.type.split(".");S=this.parent.getWorkerSource(i.sourceMapId,A[0],C.source)[A[1]](C,x)}else x(new Error("Could not find function "+i.type));!y&&S&&S.cancel&&(this.cancelCallbacks[r]=S.cancel)}},Lf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ii=function(r,i){r&&(i?this.setSouthWest(r).setNorthEast(i):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))};ii.prototype.setNorthEast=function(r){return this._ne=r instanceof _n?new _n(r.lng,r.lat):_n.convert(r),this},ii.prototype.setSouthWest=function(r){return this._sw=r instanceof _n?new _n(r.lng,r.lat):_n.convert(r),this},ii.prototype.extend=function(r){var i,l,p=this._sw,y=this._ne;if(r instanceof _n)i=r,l=r;else{if(!(r instanceof ii))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(ii.convert(r)):this.extend(_n.convert(r)):this;if(l=r._ne,!(i=r._sw)||!l)return this}return p||y?(p.lng=Math.min(i.lng,p.lng),p.lat=Math.min(i.lat,p.lat),y.lng=Math.max(l.lng,y.lng),y.lat=Math.max(l.lat,y.lat)):(this._sw=new _n(i.lng,i.lat),this._ne=new _n(l.lng,l.lat)),this},ii.prototype.getCenter=function(){return new _n((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ii.prototype.getSouthWest=function(){return this._sw},ii.prototype.getNorthEast=function(){return this._ne},ii.prototype.getNorthWest=function(){return new _n(this.getWest(),this.getNorth())},ii.prototype.getSouthEast=function(){return new _n(this.getEast(),this.getSouth())},ii.prototype.getWest=function(){return this._sw.lng},ii.prototype.getSouth=function(){return this._sw.lat},ii.prototype.getEast=function(){return this._ne.lng},ii.prototype.getNorth=function(){return this._ne.lat},ii.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ii.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ii.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ii.prototype.contains=function(r){var i=_n.convert(r),l=i.lng,p=i.lat,y=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&y},ii.convert=function(r){return!r||r instanceof ii?r:new ii(r)};var _n=function(r,i){if(isNaN(r)||isNaN(i))throw new Error("Invalid LngLat object: ("+r+", "+i+")");if(this.lng=+r,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};_n.prototype.wrap=function(){return new _n(Y(this.lng,-180,180),this.lat)},_n.prototype.toArray=function(){return[this.lng,this.lat]},_n.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},_n.prototype.distanceTo=function(r){var i=Math.PI/180,l=this.lat*i,p=r.lat*i,y=Math.sin(l)*Math.sin(p)+Math.cos(l)*Math.cos(p)*Math.cos((r.lng-this.lng)*i);return 63710088e-1*Math.acos(Math.min(y,1))},_n.prototype.toBounds=function(r){r===void 0&&(r=0);var i=360*r/40075017,l=i/Math.cos(Math.PI/180*this.lat);return new ii(new _n(this.lng-l,this.lat-i),new _n(this.lng+l,this.lat+i))},_n.convert=function(r){if(r instanceof _n)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new _n(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new _n(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var OI=2*Math.PI*63710088e-1;function CI(r){return OI*Math.cos(r*Math.PI/180)}function AI(r){return(180+r)/360}function PI(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function kI(r,i){return r/CI(i)}function lx(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}var sh=function(r,i,l){l===void 0&&(l=0),this.x=+r,this.y=+i,this.z=+l};sh.fromLngLat=function(r,i){i===void 0&&(i=0);var l=_n.convert(r);return new sh(AI(l.lng),PI(l.lat),kI(i,l.lat))},sh.prototype.toLngLat=function(){return new _n(360*this.x-180,lx(this.y))},sh.prototype.toAltitude=function(){return this.z*CI(lx(this.y))},sh.prototype.meterInMercatorCoordinateUnits=function(){return 1/OI*(r=lx(this.y),1/Math.cos(r*Math.PI/180));var r};var lh=function(r,i,l){this.z=r,this.x=i,this.y=l,this.key=Zd(0,r,r,i,l)};lh.prototype.equals=function(r){return this.z===r.z&&this.x===r.x&&this.y===r.y},lh.prototype.url=function(r,i){var l,p,y,v,x,S=(p=this.y,y=this.z,v=II(256*(l=this.x),256*(p=Math.pow(2,y)-p-1),y),x=II(256*(l+1),256*(p+1),y),v[0]+","+v[1]+","+x[0]+","+x[1]),C=function(A,L,D){for(var B,j="",Q=A;Q>0;Q--)j+=(L&(B=1<<Q-1)?1:0)+(D&B?2:0);return j}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",C).replace("{bbox-epsg-3857}",S)},lh.prototype.getTilePoint=function(r){var i=Math.pow(2,this.z);return new T(8192*(r.x*i-this.x),8192*(r.y*i-this.y))},lh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var LI=function(r,i){this.wrap=r,this.canonical=i,this.key=Zd(r,i.z,i.z,i.x,i.y)},oi=function(r,i,l,p,y){this.overscaledZ=r,this.wrap=i,this.canonical=new lh(l,+p,+y),this.key=Zd(i,r,l,p,y)};function Zd(r,i,l,p,y){(r*=2)<0&&(r=-1*r-1);var v=1<<l;return(v*v*r+v*y+p).toString(36)+l.toString(36)+i.toString(36)}oi.prototype.equals=function(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)},oi.prototype.scaledTo=function(r){var i=this.canonical.z-r;return r>this.canonical.z?new oi(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new oi(r,this.wrap,r,this.canonical.x>>i,this.canonical.y>>i)},oi.prototype.calculateScaledKey=function(r,i){var l=this.canonical.z-r;return r>this.canonical.z?Zd(this.wrap*+i,r,this.canonical.z,this.canonical.x,this.canonical.y):Zd(this.wrap*+i,r,r,this.canonical.x>>l,this.canonical.y>>l)},oi.prototype.isChildOf=function(r){if(r.wrap!==this.wrap)return!1;var i=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>i&&r.canonical.y===this.canonical.y>>i},oi.prototype.children=function(r){if(this.overscaledZ>=r)return[new oi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,l=2*this.canonical.x,p=2*this.canonical.y;return[new oi(i,this.wrap,i,l,p),new oi(i,this.wrap,i,l+1,p),new oi(i,this.wrap,i,l,p+1),new oi(i,this.wrap,i,l+1,p+1)]},oi.prototype.isLessThan=function(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))},oi.prototype.wrapped=function(){return new oi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},oi.prototype.unwrapTo=function(r){return new oi(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)},oi.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},oi.prototype.toUnwrapped=function(){return new LI(this.wrap,this.canonical)},oi.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},oi.prototype.getTilePoint=function(r){return this.canonical.getTilePoint(new sh(r.x-this.wrap,r.y))},wt("CanonicalTileID",lh),wt("OverscaledTileID",oi,{omit:["posMatrix"]});var Hl=function(r,i,l){if(this.uid=r,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(l&&l!=="mapbox"&&l!=="terrarium")return st('"'+l+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=i.height;var p=this.dim=i.height-2;this.data=new Uint32Array(i.data.buffer),this.encoding=l||"mapbox";for(var y=0;y<p;y++)this.data[this._idx(-1,y)]=this.data[this._idx(0,y)],this.data[this._idx(p,y)]=this.data[this._idx(p-1,y)],this.data[this._idx(y,-1)]=this.data[this._idx(y,0)],this.data[this._idx(y,p)]=this.data[this._idx(y,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)]};Hl.prototype.get=function(r,i){var l=new Uint8Array(this.data.buffer),p=4*this._idx(r,i);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(l[p],l[p+1],l[p+2])},Hl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Hl.prototype._idx=function(r,i){if(r<-1||r>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(r+1)},Hl.prototype._unpackMapbox=function(r,i,l){return(256*r*256+256*i+l)/10-1e4},Hl.prototype._unpackTerrarium=function(r,i,l){return 256*r+i+l/256-32768},Hl.prototype.getPixels=function(){return new Io({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Hl.prototype.backfillBorder=function(r,i,l){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");var p=i*this.dim,y=i*this.dim+this.dim,v=l*this.dim,x=l*this.dim+this.dim;switch(i){case-1:p=y-1;break;case 1:y=p+1}switch(l){case-1:v=x-1;break;case 1:x=v+1}for(var S=-i*this.dim,C=-l*this.dim,A=v;A<x;A++)for(var L=p;L<y;L++)this.data[this._idx(L,A)]=r.data[this._idx(L+S,A+C)]},wt("DEMData",Hl);var Sv=function(r){this._stringToNumber={},this._numberToString=[];for(var i=0;i<r.length;i++){var l=r[i];this._stringToNumber[l]=i,this._numberToString[i]=l}};Sv.prototype.encode=function(r){return this._stringToNumber[r]},Sv.prototype.decode=function(r){return this._numberToString[r]};var Tv=function(r,i,l,p,y){this.type="Feature",this._vectorTileFeature=r,r._z=i,r._x=l,r._y=p,this.properties=r.properties,this.id=y},ux={geometry:{configurable:!0}};ux.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},ux.geometry.set=function(r){this._geometry=r},Tv.prototype.toJSON=function(){var r={geometry:this.geometry};for(var i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&(r[i]=this[i]);return r},Object.defineProperties(Tv.prototype,ux);var Df=function(){this.state={},this.stateChanges={},this.deletedStates={}};Df.prototype.updateState=function(r,i,l){var p=String(i);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][p]=this.stateChanges[r][p]||{},X(this.stateChanges[r][p],l),this.deletedStates[r]===null)for(var y in this.deletedStates[r]={},this.state[r])y!==p&&(this.deletedStates[r][y]=null);else if(this.deletedStates[r]&&this.deletedStates[r][p]===null)for(var v in this.deletedStates[r][p]={},this.state[r][p])l[v]||(this.deletedStates[r][p][v]=null);else for(var x in l)this.deletedStates[r]&&this.deletedStates[r][p]&&this.deletedStates[r][p][x]===null&&delete this.deletedStates[r][p][x]},Df.prototype.removeFeatureState=function(r,i,l){if(this.deletedStates[r]!==null){var p=String(i);if(this.deletedStates[r]=this.deletedStates[r]||{},l&&i!==void 0)this.deletedStates[r][p]!==null&&(this.deletedStates[r][p]=this.deletedStates[r][p]||{},this.deletedStates[r][p][l]=null);else if(i!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][p])for(l in this.deletedStates[r][p]={},this.stateChanges[r][p])this.deletedStates[r][p][l]=null;else this.deletedStates[r][p]=null;else this.deletedStates[r]=null}},Df.prototype.getState=function(r,i){var l=String(i),p=X({},(this.state[r]||{})[l],(this.stateChanges[r]||{})[l]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){var y=this.deletedStates[r][i];if(y===null)return{};for(var v in y)delete p[v]}return p},Df.prototype.initializeTileState=function(r,i){r.setFeatureState(this.state,i)},Df.prototype.coalesceChanges=function(r,i){var l={};for(var p in this.stateChanges){this.state[p]=this.state[p]||{};var y={};for(var v in this.stateChanges[p])this.state[p][v]||(this.state[p][v]={}),X(this.state[p][v],this.stateChanges[p][v]),y[v]=this.state[p][v];l[p]=y}for(var x in this.deletedStates){this.state[x]=this.state[x]||{};var S={};if(this.deletedStates[x]===null)for(var C in this.state[x])S[C]={},this.state[x][C]={};else for(var A in this.deletedStates[x]){if(this.deletedStates[x][A]===null)this.state[x][A]={};else for(var L=0,D=Object.keys(this.deletedStates[x][A]);L<D.length;L+=1)delete this.state[x][A][D[L]];S[A]=this.state[x][A]}l[x]=l[x]||{},X(l[x],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(l).length!==0)for(var B in r)r[B].setFeatureState(l,i)};var Zl=function(r,i){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new cs(8192,16,0),this.grid3D=new cs(8192,16,0),this.featureIndexArray=new R,this.promoteId=i};function DI(r,i,l,p,y){return Se(r,function(v,x){var S=i instanceof Jc?i.get(x):null;return S&&S.evaluate?S.evaluate(l,p,y):S})}function NI(r){for(var i=1/0,l=1/0,p=-1/0,y=-1/0,v=0,x=r;v<x.length;v+=1){var S=x[v];i=Math.min(i,S.x),l=Math.min(l,S.y),p=Math.max(p,S.x),y=Math.max(y,S.y)}return{minX:i,minY:l,maxX:p,maxY:y}}function $9(r,i){return i-r}Zl.prototype.insert=function(r,i,l,p,y,v){var x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,p,y);for(var S=v?this.grid3D:this.grid,C=0;C<i.length;C++){for(var A=i[C],L=[1/0,1/0,-1/0,-1/0],D=0;D<A.length;D++){var B=A[D];L[0]=Math.min(L[0],B.x),L[1]=Math.min(L[1],B.y),L[2]=Math.max(L[2],B.x),L[3]=Math.max(L[3],B.y)}L[0]<8192&&L[1]<8192&&L[2]>=0&&L[3]>=0&&S.insert(x,L[0],L[1],L[2],L[3])}},Zl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Sf.VectorTile(new pv(this.rawTileData)).layers,this.sourceLayerCoder=new Sv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Zl.prototype.query=function(r,i,l,p){var y=this;this.loadVTLayers();for(var v=r.params||{},x=8192/r.tileSize/r.scale,S=sf(v.filter),C=r.queryGeometry,A=r.queryPadding*x,L=NI(C),D=this.grid.query(L.minX-A,L.minY-A,L.maxX+A,L.maxY+A),B=NI(r.cameraQueryGeometry),j=this.grid3D.query(B.minX-A,B.minY-A,B.maxX+A,B.maxY+A,function(Te,Oe,Be,Xe){return function(ot,Pt,dt,Rt,yt){for(var lr=0,Wt=ot;lr<Wt.length;lr+=1){var Mt=Wt[lr];if(Pt<=Mt.x&&dt<=Mt.y&&Rt>=Mt.x&&yt>=Mt.y)return!0}var pr=[new T(Pt,dt),new T(Pt,yt),new T(Rt,yt),new T(Rt,dt)];if(ot.length>2){for(var nr=0,Ir=pr;nr<Ir.length;nr+=1)if(Ba(ot,Ir[nr]))return!0}for(var zt=0;zt<ot.length-1;zt++)if(nh(ot[zt],ot[zt+1],pr))return!0;return!1}(r.cameraQueryGeometry,Te-A,Oe-A,Be+A,Xe+A)}),Q=0,te=j;Q<te.length;Q+=1)D.push(te[Q]);D.sort($9);for(var ce,oe={},ge=function(Te){var Oe=D[Te];if(Oe!==ce){ce=Oe;var Be=y.featureIndexArray.get(Oe),Xe=null;y.loadMatchingFeature(oe,Be.bucketIndex,Be.sourceLayerIndex,Be.featureIndex,S,v.layers,v.availableImages,i,l,p,function(ot,Pt,dt){return Xe||(Xe=On(ot)),Pt.queryIntersectsFeature(C,ot,dt,Xe,y.z,r.transform,x,r.pixelPosMatrix)})}},we=0;we<D.length;we++)ge(we);return oe},Zl.prototype.loadMatchingFeature=function(r,i,l,p,y,v,x,S,C,A,L){var D=this.bucketLayerIDs[i];if(!v||function(ot,Pt){for(var dt=0;dt<ot.length;dt++)if(Pt.indexOf(ot[dt])>=0)return!0;return!1}(v,D)){var B=this.sourceLayerCoder.decode(l),j=this.vtLayers[B].feature(p);if(y.needGeometry){var Q=zn(j,!0);if(!y.filter(new gr(this.tileID.overscaledZ),Q,this.tileID.canonical))return}else if(!y.filter(new gr(this.tileID.overscaledZ),j))return;for(var te=this.getId(j,B),ce=0;ce<D.length;ce++){var oe=D[ce];if(!(v&&v.indexOf(oe)<0)){var ge=S[oe];if(ge){var we={};te!==void 0&&A&&(we=A.getState(ge.sourceLayer||"_geojsonTileLayer",te));var Te=X({},C[oe]);Te.paint=DI(Te.paint,ge.paint,j,we,x),Te.layout=DI(Te.layout,ge.layout,j,we,x);var Oe=!L||L(j,ge,we);if(Oe){var Be=new Tv(j,this.z,this.x,this.y,te);Be.layer=Te;var Xe=r[oe];Xe===void 0&&(Xe=r[oe]=[]),Xe.push({featureIndex:p,feature:Be,intersectionZ:Oe})}}}}}},Zl.prototype.lookupSymbolFeatures=function(r,i,l,p,y,v,x,S){var C={};this.loadVTLayers();for(var A=sf(y),L=0,D=r;L<D.length;L+=1)this.loadMatchingFeature(C,l,p,D[L],A,v,x,S,i);return C},Zl.prototype.hasLayer=function(r){for(var i=0,l=this.bucketLayerIDs;i<l.length;i+=1)for(var p=0,y=l[i];p<y.length;p+=1)if(r===y[p])return!0;return!1},Zl.prototype.getId=function(r,i){var l=r.id;return this.promoteId&&typeof(l=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]])=="boolean"&&(l=Number(l)),l},wt("FeatureIndex",Zl,{omit:["rawTileData","sourceLayerCoder"]});var wi=function(r,i){this.tileID=r,this.uid=he(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};wi.prototype.registerFadeDuration=function(r){var i=r+this.timeAdded;i<qn.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)},wi.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},wi.prototype.loadVectorData=function(r,i,l){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){for(var p in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(A,L){var D={};if(!L)return D;for(var B=function(){var te=Q[j],ce=te.layerIds.map(function(we){return L.getLayer(we)}).filter(Boolean);if(ce.length!==0){te.layers=ce,te.stateDependentLayerIds&&(te.stateDependentLayers=te.stateDependentLayerIds.map(function(we){return ce.filter(function(Te){return Te.id===we})[0]}));for(var oe=0,ge=ce;oe<ge.length;oe+=1)D[ge[oe].id]=te}},j=0,Q=A;j<Q.length;j+=1)B();return D}(r.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){var y=this.buckets[p];if(y instanceof Zr){if(this.hasSymbolBuckets=!0,!l)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var v in this.buckets){var x=this.buckets[v];if(x instanceof Zr&&x.hasRTLText){this.hasRTLText=!0,Uo.isLoading()||Uo.isLoaded()||Pd()!=="deferred"||_a();break}}for(var S in this.queryPadding=0,this.buckets){var C=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(S).queryRadius(C))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new f},wi.prototype.unloadVectorData=function(){for(var r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},wi.prototype.getBucket=function(r){return this.buckets[r.id]},wi.prototype.upload=function(r){for(var i in this.buckets){var l=this.buckets[i];l.uploadPending()&&l.upload(r)}var p=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ah(r,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ah(r,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)},wi.prototype.prepare=function(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)},wi.prototype.queryRenderedFeatures=function(r,i,l,p,y,v,x,S,C,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:y,scale:v,tileSize:this.tileSize,pixelPosMatrix:A,transform:S,params:x,queryPadding:this.queryPadding*C},r,i,l):{}},wi.prototype.querySourceFeatures=function(r,i){var l=this.latestFeatureIndex;if(l&&l.rawTileData){var p=l.loadVTLayers(),y=i?i.sourceLayer:"",v=p._geojsonTileLayer||p[y];if(v)for(var x=sf(i&&i.filter),S=this.tileID.canonical,C=S.z,A=S.x,L=S.y,D={z:C,x:A,y:L},B=0;B<v.length;B++){var j=v.feature(B);if(x.needGeometry){var Q=zn(j,!0);if(!x.filter(new gr(this.tileID.overscaledZ),Q,this.tileID.canonical))continue}else if(!x.filter(new gr(this.tileID.overscaledZ),j))continue;var te=l.getId(j,y),ce=new Tv(j,C,A,L,te);ce.tile=D,r.push(ce)}}},wi.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},wi.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},wi.prototype.setExpiryData=function(r){var i=this.expirationTime;if(r.cacheControl){var l=vt(r.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){var p=Date.now(),y=!1;if(this.expirationTime>p)y=!1;else if(i)if(this.expirationTime<i)y=!0;else{var v=this.expirationTime-i;v?this.expirationTime=p+Math.max(v,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},wi.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},wi.prototype.setFeatureState=function(r,i){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(r).length!==0){var l=this.latestFeatureIndex.loadVTLayers();for(var p in this.buckets)if(i.style.hasLayer(p)){var y=this.buckets[p],v=y.layers[0].sourceLayer||"_geojsonTileLayer",x=l[v],S=r[v];if(x&&S&&Object.keys(S).length!==0){y.update(S,x,this.imageAtlas&&this.imageAtlas.patternPositions||{});var C=i&&i.style&&i.style.getLayer(p);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(y)))}}}},wi.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},wi.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<qn.now()},wi.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},wi.prototype.setHoldDuration=function(r){this.symbolFadeHoldUntil=qn.now()+r},wi.prototype.setDependencies=function(r,i){for(var l={},p=0,y=i;p<y.length;p+=1)l[y[p]]=!0;this.dependencies[r]=l},wi.prototype.hasDependency=function(r,i){for(var l=0,p=r;l<p.length;l+=1){var y=this.dependencies[p[l]];if(y){for(var v=0,x=i;v<x.length;v+=1)if(y[x[v]])return!0}}return!1};var Hu=I.performance,RI=function(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},Hu.mark(this._marks.start)};RI.prototype.finish=function(){Hu.mark(this._marks.end);var r=Hu.getEntriesByName(this._marks.measure);return r.length===0&&(Hu.measure(this._marks.measure,this._marks.start,this._marks.end),r=Hu.getEntriesByName(this._marks.measure),Hu.clearMarks(this._marks.start),Hu.clearMarks(this._marks.end),Hu.clearMeasures(this._marks.measure)),r},a.Actor=Lf,a.AlphaImage=oh,a.CanonicalTileID=lh,a.CollisionBoxArray=f,a.Color=Br,a.DEMData=Hl,a.DataConstantProperty=Dt,a.DictionaryCoder=Sv,a.EXTENT=8192,a.ErrorEvent=pe,a.EvaluationParameters=gr,a.Event=ee,a.Evented=de,a.FeatureIndex=Zl,a.FillBucket=ds,a.FillExtrusionBucket=ms,a.ImageAtlas=Wd,a.ImagePosition=mv,a.LineBucket=so,a.LngLat=_n,a.LngLatBounds=ii,a.MercatorCoordinate=sh,a.ONE_EM=24,a.OverscaledTileID=oi,a.Point=T,a.Point$1=T,a.Properties=Li,a.Protobuf=pv,a.RGBAImage=Io,a.RequestManager=Ne,a.RequestPerformance=RI,a.ResourceType=ss,a.SegmentVector=q,a.SourceFeatureState=Df,a.StructArrayLayout1ui2=zd,a.StructArrayLayout2f1f2i16=Gl,a.StructArrayLayout2i4=jl,a.StructArrayLayout3ui6=Ks,a.StructArrayLayout4i8=Ld,a.SymbolBucket=Zr,a.Texture=ah,a.Tile=wi,a.Transitionable=ki,a.Uniform1f=it,a.Uniform1i=je,a.Uniform2f=tt,a.Uniform3f=gt,a.Uniform4f=Nt,a.UniformColor=Ut,a.UniformMatrix4f=Cr,a.UnwrappedTileID=LI,a.ValidationError=ie,a.WritingMode=na,a.ZoomHistory=Id,a.add=function(r,i,l){return r[0]=i[0]+l[0],r[1]=i[1]+l[1],r[2]=i[2]+l[2],r},a.addDynamicAttributes=ox,a.asyncAll=function(r,i,l){if(!r.length)return l(null,[]);var p=r.length,y=new Array(r.length),v=null;r.forEach(function(x,S){i(x,function(C,A){C&&(v=C),y[S]=A,--p==0&&l(v,y)})})},a.bezier=z,a.bindAll=Fe,a.browser=qn,a.cacheEntryPossiblyAdded=function(r){++In>$i&&(r.getActor().send("enforceCacheSizeLimit",Qn),In=0)},a.clamp=W,a.clearTileCache=function(r){var i=I.caches.delete("mapbox-tiles");r&&i.catch(r).then(function(){return r()})},a.clipLine=gI,a.clone=function(r){var i=new Vr(16);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},a.clone$1=Je,a.clone$2=function(r){var i=new Vr(3);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i},a.collisionCircleLayout=c9,a.config=Mr,a.create=function(){var r=new Vr(16);return Vr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},a.create$1=function(){var r=new Vr(9);return Vr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r},a.create$2=function(){var r=new Vr(4);return Vr!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r},a.createCommonjsModule=m,a.createExpression=of,a.createLayout=xi,a.createStyleLayer=function(r){return r.type==="custom"?new j9(r):new G9[r.type](r)},a.cross=function(r,i,l){var p=i[0],y=i[1],v=i[2],x=l[0],S=l[1],C=l[2];return r[0]=y*C-v*S,r[1]=v*x-p*C,r[2]=p*S-y*x,r},a.deepEqual=function r(i,l){if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(var p=0;p<i.length;p++)if(!r(i[p],l[p]))return!1;return!0}if(typeof i=="object"&&i!==null&&l!==null){if(typeof l!="object"||Object.keys(i).length!==Object.keys(l).length)return!1;for(var y in i)if(!r(i[y],l[y]))return!1;return!0}return i===l},a.dot=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]},a.dot$1=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]+r[3]*i[3]},a.ease=V,a.emitValidationErrors=Xc,a.endsWith=Pe,a.enforceCacheSizeLimit=function(r){_o(),bt&&bt.then(function(i){i.keys().then(function(l){for(var p=0;p<l.length-r;p++)i.delete(l[p])})})},a.evaluateSizeForFeature=hI,a.evaluateSizeForZoom=fI,a.evaluateVariableOffset=xI,a.evented=Ad,a.extend=X,a.featureFilter=sf,a.filterObject=Ie,a.fromRotation=function(r,i){var l=Math.sin(i),p=Math.cos(i);return r[0]=p,r[1]=l,r[2]=0,r[3]=-l,r[4]=p,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},a.getAnchorAlignment=tx,a.getAnchorJustification=ix,a.getArrayBuffer=Ml,a.getImage=F,a.getJSON=function(r,i){return Fo(X(r,{type:"json"}),i)},a.getRTLTextPluginStatus=Pd,a.getReferrer=ls,a.getVideo=function(r,i){var l,p,y=I.document.createElement("video");y.muted=!0,y.onloadstart=function(){i(null,y)};for(var v=0;v<r.length;v++){var x=I.document.createElement("source");l=r[v],p=void 0,(p=I.document.createElement("a")).href=l,(p.protocol!==I.document.location.protocol||p.host!==I.document.location.host)&&(y.crossOrigin="Anonymous"),x.src=r[v],y.appendChild(x)}return{cancel:function(){}}},a.identity=jo,a.invert=function(r,i){var l=i[0],p=i[1],y=i[2],v=i[3],x=i[4],S=i[5],C=i[6],A=i[7],L=i[8],D=i[9],B=i[10],j=i[11],Q=i[12],te=i[13],ce=i[14],oe=i[15],ge=l*S-p*x,we=l*C-y*x,Te=l*A-v*x,Oe=p*C-y*S,Be=p*A-v*S,Xe=y*A-v*C,ot=L*te-D*Q,Pt=L*ce-B*Q,dt=L*oe-j*Q,Rt=D*ce-B*te,yt=D*oe-j*te,lr=B*oe-j*ce,Wt=ge*lr-we*yt+Te*Rt+Oe*dt-Be*Pt+Xe*ot;return Wt?(r[0]=(S*lr-C*yt+A*Rt)*(Wt=1/Wt),r[1]=(y*yt-p*lr-v*Rt)*Wt,r[2]=(te*Xe-ce*Be+oe*Oe)*Wt,r[3]=(B*Be-D*Xe-j*Oe)*Wt,r[4]=(C*dt-x*lr-A*Pt)*Wt,r[5]=(l*lr-y*dt+v*Pt)*Wt,r[6]=(ce*Te-Q*Xe-oe*we)*Wt,r[7]=(L*Xe-B*Te+j*we)*Wt,r[8]=(x*yt-S*dt+A*ot)*Wt,r[9]=(p*dt-l*yt-v*ot)*Wt,r[10]=(Q*Be-te*Te+oe*ge)*Wt,r[11]=(D*Te-L*Be-j*ge)*Wt,r[12]=(S*Pt-x*Rt-C*ot)*Wt,r[13]=(l*Rt-p*Pt+y*ot)*Wt,r[14]=(te*we-Q*Oe-ce*ge)*Wt,r[15]=(L*Oe-D*we+B*ge)*Wt,r):null},a.isChar=ct,a.isMapboxURL=qe,a.keysDifference=function(r,i){var l=[];for(var p in r)p in i||l.push(p);return l},a.makeRequest=Fo,a.mapObject=Se,a.mercatorXfromLng=AI,a.mercatorYfromLat=PI,a.mercatorZfromAltitude=kI,a.mul=G1,a.multiply=ao,a.mvt=Sf,a.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},a.normalize=function(r,i){var l=i[0],p=i[1],y=i[2],v=l*l+p*p+y*y;return v>0&&(v=1/Math.sqrt(v)),r[0]=i[0]*v,r[1]=i[1]*v,r[2]=i[2]*v,r},a.number=Hn,a.offscreenCanvasSupported=hi,a.ortho=function(r,i,l,p,y,v,x){var S=1/(i-l),C=1/(p-y),A=1/(v-x);return r[0]=-2*S,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*C,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*A,r[11]=0,r[12]=(i+l)*S,r[13]=(y+p)*C,r[14]=(x+v)*A,r[15]=1,r},a.parseGlyphPBF=function(r){return new pv(r).readFields(b9,[])},a.pbf=pv,a.performSymbolLayout=function(r,i,l,p,y,v,x){r.createArrays(),r.tilePixelRatio=8192/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;var S=r.layers[0].layout,C=r.layers[0]._unevaluatedLayout._values,A={};if(r.textSizeData.kind==="composite"){var L=r.textSizeData,D=L.maxZoom;A.compositeTextSizes=[C["text-size"].possiblyEvaluate(new gr(L.minZoom),x),C["text-size"].possiblyEvaluate(new gr(D),x)]}if(r.iconSizeData.kind==="composite"){var B=r.iconSizeData,j=B.maxZoom;A.compositeIconSizes=[C["icon-size"].possiblyEvaluate(new gr(B.minZoom),x),C["icon-size"].possiblyEvaluate(new gr(j),x)]}A.layoutTextSize=C["text-size"].possiblyEvaluate(new gr(r.zoom+1),x),A.layoutIconSize=C["icon-size"].possiblyEvaluate(new gr(r.zoom+1),x),A.textMaxSize=C["text-size"].possiblyEvaluate(new gr(18));for(var Q=24*S.get("text-line-height"),te=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point",ce=S.get("text-keep-upright"),oe=S.get("text-size"),ge=function(){var Oe=Te[we],Be=S.get("text-font").evaluate(Oe,{},x).join(","),Xe=oe.evaluate(Oe,{},x),ot=A.layoutTextSize.evaluate(Oe,{},x),Pt=A.layoutIconSize.evaluate(Oe,{},x),dt={horizontal:{},vertical:void 0},Rt=Oe.text,yt=[0,0];if(Rt){var lr=Rt.toString(),Wt=24*S.get("text-letter-spacing").evaluate(Oe,{},x),Mt=function(xr){for(var Jr=0,Wr=xr;Jr<Wr.length;Jr+=1)if(Ar=Wr[Jr].charCodeAt(0),ct.Arabic(Ar)||ct["Arabic Supplement"](Ar)||ct["Arabic Extended-A"](Ar)||ct["Arabic Presentation Forms-A"](Ar)||ct["Arabic Presentation Forms-B"](Ar))return!1;var Ar;return!0}(lr)?Wt:0,pr=S.get("text-anchor").evaluate(Oe,{},x),nr=S.get("text-variable-anchor");if(!nr){var Ir=S.get("text-radial-offset").evaluate(Oe,{},x);yt=Ir?xI(pr,[24*Ir,nx]):S.get("text-offset").evaluate(Oe,{},x).map(function(xr){return 24*xr})}var zt=te?"center":S.get("text-justify").evaluate(Oe,{},x),Nr=S.get("symbol-placement"),xn=Nr==="point"?24*S.get("text-max-width").evaluate(Oe,{},x):0,Pn=function(){r.allowVerticalPlacement&&Od(lr)&&(dt.vertical=yv(Rt,i,l,y,Be,xn,Q,pr,"left",Mt,yt,na.vertical,!0,Nr,ot,Xe))};if(!te&&nr){for(var Cn=zt==="auto"?nr.map(function(xr){return ix(xr)}):[zt],bn=!1,kn=0;kn<Cn.length;kn++){var di=Cn[kn];if(!dt.horizontal[di])if(bn)dt.horizontal[di]=dt.horizontal[0];else{var mi=yv(Rt,i,l,y,Be,xn,Q,"center",di,Mt,yt,na.horizontal,!1,Nr,ot,Xe);mi&&(dt.horizontal[di]=mi,bn=mi.positionedLines.length===1)}}Pn()}else{zt==="auto"&&(zt=ix(pr));var Yi=yv(Rt,i,l,y,Be,xn,Q,pr,zt,Mt,yt,na.horizontal,!1,Nr,ot,Xe);Yi&&(dt.horizontal[zt]=Yi),Pn(),Od(lr)&&te&&ce&&(dt.vertical=yv(Rt,i,l,y,Be,xn,Q,pr,zt,Mt,yt,na.vertical,!1,Nr,ot,Xe))}}var Ei=void 0,Ji=!1;if(Oe.icon&&Oe.icon.name){var Fn=p[Oe.icon.name];Fn&&(Ei=function(xr,Jr,Wr){var Ar=tx(Wr),lo=Jr[0]-xr.displaySize[0]*Ar.horizontalAlign,Fi=Jr[1]-xr.displaySize[1]*Ar.verticalAlign;return{image:xr,top:Fi,bottom:Fi+xr.displaySize[1],left:lo,right:lo+xr.displaySize[0]}}(y[Oe.icon.name],S.get("icon-offset").evaluate(Oe,{},x),S.get("icon-anchor").evaluate(Oe,{},x)),Ji=Fn.sdf,r.sdfIcons===void 0?r.sdfIcons=Fn.sdf:r.sdfIcons!==Fn.sdf&&st("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Fn.pixelRatio!==r.pixelRatio||S.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}var Si=wI(dt.horizontal)||dt.vertical;r.iconsInText=!!Si&&Si.iconsInText,(Si||Ei)&&function(xr,Jr,Wr,Ar,lo,Fi,dn,Xn,Bi,Rr,rl){var ia=Fi.textMaxSize.evaluate(Jr,{});ia===void 0&&(ia=dn);var nl,Bn=xr.layers[0].layout,il=Bn.get("icon-offset").evaluate(Jr,{},rl),Ua=wI(Wr.horizontal),Nf=dn/24,uh=xr.tilePixelRatio*Nf,Rf=xr.tilePixelRatio*ia/24,Xl=xr.tilePixelRatio*Xn,zf=xr.tilePixelRatio*Bn.get("symbol-spacing"),Mv=Bn.get("text-padding")*xr.tilePixelRatio,Ff=Bn.get("icon-padding")*xr.tilePixelRatio,Xd=Bn.get("text-max-angle")/180*Math.PI,Iv=Bn.get("text-rotation-alignment")==="map"&&Bn.get("symbol-placement")!=="point",Ov=Bn.get("icon-rotation-alignment")==="map"&&Bn.get("symbol-placement")!=="point",Kl=Bn.get("symbol-placement"),Kd=zf/2,Bf=Bn.get("icon-text-fit");Ar&&Bf!=="none"&&(xr.allowVerticalPlacement&&Wr.vertical&&(nl=cI(Ar,Wr.vertical,Bf,Bn.get("icon-text-fit-padding"),il,Nf)),Ua&&(Ar=cI(Ar,Ua,Bf,Bn.get("icon-text-fit-padding"),il,Nf)));var Zu=function(q9,im){im.x<0||im.x>=8192||im.y<0||im.y>=8192||function(Vn,ys,W9,Xu,px,BI,Dv,ol,Nv,om,Rv,zv,dx,VI,am,UI,jI,GI,$I,qI,oa,Fv,WI,al,H9){var HI,hh,$f,qf,Wf,Hf=Vn.addToLineVertexArray(ys,W9),ZI=0,XI=0,KI=0,YI=0,mx=-1,yx=-1,Yl={},JI=J(""),gx=0,vx=0;if(ol._unevaluatedLayout.getValue("text-radial-offset")===void 0?(gx=(HI=ol.layout.get("text-offset").evaluate(oa,{},al).map(function(lm){return 24*lm}))[0],vx=HI[1]):(gx=24*ol.layout.get("text-radial-offset").evaluate(oa,{},al),vx=nx),Vn.allowVerticalPlacement&&Xu.vertical){var QI=ol.layout.get("text-rotate").evaluate(oa,{},al)+90;qf=new bv(Nv,ys,om,Rv,zv,Xu.vertical,dx,VI,am,QI),Dv&&(Wf=new bv(Nv,ys,om,Rv,zv,Dv,jI,GI,am,QI))}if(px){var _x=ol.layout.get("icon-rotate").evaluate(oa,{}),eO=ol.layout.get("icon-text-fit")!=="none",tO=vI(px,_x,WI,eO),xx=Dv?vI(Dv,_x,WI,eO):void 0;$f=new bv(Nv,ys,om,Rv,zv,px,jI,GI,!1,_x),ZI=4*tO.length;var rO=Vn.iconSizeData,sm=null;rO.kind==="source"?(sm=[128*ol.layout.get("icon-size").evaluate(oa,{})])[0]>32640&&st(Vn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):rO.kind==="composite"&&((sm=[128*Fv.compositeIconSizes[0].evaluate(oa,{},al),128*Fv.compositeIconSizes[1].evaluate(oa,{},al)])[0]>32640||sm[1]>32640)&&st(Vn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Vn.addSymbols(Vn.icon,tO,sm,qI,$I,oa,!1,ys,Hf.lineStartIndex,Hf.lineLength,-1,al),mx=Vn.icon.placedSymbolArray.length-1,xx&&(XI=4*xx.length,Vn.addSymbols(Vn.icon,xx,sm,qI,$I,oa,na.vertical,ys,Hf.lineStartIndex,Hf.lineLength,-1,al),yx=Vn.icon.placedSymbolArray.length-1)}for(var nO in Xu.horizontal){var Bv=Xu.horizontal[nO];if(!hh){JI=J(Bv.text);var Z9=ol.layout.get("text-rotate").evaluate(oa,{},al);hh=new bv(Nv,ys,om,Rv,zv,Bv,dx,VI,am,Z9)}var iO=Bv.positionedLines.length===1;if(KI+=bI(Vn,ys,Bv,BI,ol,am,oa,UI,Hf,Xu.vertical?na.horizontal:na.horizontalOnly,iO?Object.keys(Xu.horizontal):[nO],Yl,mx,Fv,al),iO)break}Xu.vertical&&(YI+=bI(Vn,ys,Xu.vertical,BI,ol,am,oa,UI,Hf,na.vertical,["vertical"],Yl,yx,Fv,al));var X9=hh?hh.boxStartIndex:Vn.collisionBoxArray.length,K9=hh?hh.boxEndIndex:Vn.collisionBoxArray.length,Y9=qf?qf.boxStartIndex:Vn.collisionBoxArray.length,J9=qf?qf.boxEndIndex:Vn.collisionBoxArray.length,Q9=$f?$f.boxStartIndex:Vn.collisionBoxArray.length,e7=$f?$f.boxEndIndex:Vn.collisionBoxArray.length,t7=Wf?Wf.boxStartIndex:Vn.collisionBoxArray.length,r7=Wf?Wf.boxEndIndex:Vn.collisionBoxArray.length,sl=-1,Vv=function(lm,aO){return lm&&lm.circleDiameter?Math.max(lm.circleDiameter,aO):aO};sl=Vv(hh,sl),sl=Vv(qf,sl),sl=Vv($f,sl);var oO=(sl=Vv(Wf,sl))>-1?1:0;oO&&(sl*=H9/24),Vn.glyphOffsetArray.length>=Zr.MAX_GLYPHS&&st("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),oa.sortKey!==void 0&&Vn.addToSortKeyRanges(Vn.symbolInstances.length,oa.sortKey),Vn.symbolInstances.emplaceBack(ys.x,ys.y,Yl.right>=0?Yl.right:-1,Yl.center>=0?Yl.center:-1,Yl.left>=0?Yl.left:-1,Yl.vertical||-1,mx,yx,JI,X9,K9,Y9,J9,Q9,e7,t7,r7,om,KI,YI,ZI,XI,oO,0,dx,gx,vx,sl)}(xr,im,q9,Wr,Ar,lo,nl,xr.layers[0],xr.collisionBoxArray,Jr.index,Jr.sourceLayerIndex,xr.index,uh,Mv,Iv,Bi,Xl,Ff,Ov,il,Jr,Fi,Rr,rl,dn)};if(Kl==="line")for(var Vf=0,Cv=gI(Jr.geometry,0,0,8192,8192);Vf<Cv.length;Vf+=1)for(var Av=Cv[Vf],Yd=0,Jd=O9(Av,zf,Xd,Wr.vertical||Ua,Ar,24,Rf,xr.overscaling,8192);Yd<Jd.length;Yd+=1){var Pv=Jd[Yd];Ua&&k9(xr,Ua.text,Kd,Pv)||Zu(Av,Pv)}else if(Kl==="line-center")for(var Qd=0,em=Jr.geometry;Qd<em.length;Qd+=1){var tm=em[Qd];if(tm.length>1){var kv=I9(tm,Xd,Wr.vertical||Ua,Ar,24,Rf);kv&&Zu(tm,kv)}}else if(Jr.type==="Polygon")for(var Uf=0,Lv=K1(Jr.geometry,0);Uf<Lv.length;Uf+=1){var jf=Lv[Uf],rm=A9(jf,16);Zu(jf[0],new Of(rm.x,rm.y,0))}else if(Jr.type==="LineString")for(var ch=0,nm=Jr.geometry;ch<nm.length;ch+=1){var Gf=nm[ch];Zu(Gf,new Of(Gf[0].x,Gf[0].y,0))}else if(Jr.type==="Point")for(var cx=0,zI=Jr.geometry;cx<zI.length;cx+=1)for(var hx=0,FI=zI[cx];hx<FI.length;hx+=1){var fx=FI[hx];Zu([fx],new Of(fx.x,fx.y,0))}}(r,Oe,dt,Ei,p,A,ot,Pt,yt,Ji,x)},we=0,Te=r.features;we<Te.length;we+=1)ge();v&&r.generateCollisionDebugBuffers()},a.perspective=function(r,i,l,p,y){var v,x=1/Math.tan(i/2);return r[0]=x/l,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,y!=null&&y!==1/0?(r[10]=(y+p)*(v=1/(p-y)),r[14]=2*y*p*v):(r[10]=-1,r[14]=-2*p),r},a.pick=function(r,i){for(var l={},p=0;p<i.length;p++){var y=i[p];y in r&&(l[y]=r[y])}return l},a.plugin=Uo,a.polygonIntersectsPolygon=Qs,a.postMapLoadEvent=Qr,a.postTurnstileEvent=jr,a.potpack=aI,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=wt,a.registerForPluginStateChange=function(r){return r({pluginStatus:So,pluginURL:hs}),Ad.on("pluginStateChange",r),r},a.renderColorRamp=UM,a.rotate=function(r,i,l){var p=i[0],y=i[1],v=i[2],x=i[3],S=Math.sin(l),C=Math.cos(l);return r[0]=p*C+v*S,r[1]=y*C+x*S,r[2]=p*-S+v*C,r[3]=y*-S+x*C,r},a.rotateX=function(r,i,l){var p=Math.sin(l),y=Math.cos(l),v=i[4],x=i[5],S=i[6],C=i[7],A=i[8],L=i[9],D=i[10],B=i[11];return i!==r&&(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[4]=v*y+A*p,r[5]=x*y+L*p,r[6]=S*y+D*p,r[7]=C*y+B*p,r[8]=A*y-v*p,r[9]=L*y-x*p,r[10]=D*y-S*p,r[11]=B*y-C*p,r},a.rotateZ=function(r,i,l){var p=Math.sin(l),y=Math.cos(l),v=i[0],x=i[1],S=i[2],C=i[3],A=i[4],L=i[5],D=i[6],B=i[7];return i!==r&&(r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[0]=v*y+A*p,r[1]=x*y+L*p,r[2]=S*y+D*p,r[3]=C*y+B*p,r[4]=A*y-v*p,r[5]=L*y-x*p,r[6]=D*y-S*p,r[7]=B*y-C*p,r},a.scale=function(r,i,l){var p=l[0],y=l[1],v=l[2];return r[0]=i[0]*p,r[1]=i[1]*p,r[2]=i[2]*p,r[3]=i[3]*p,r[4]=i[4]*y,r[5]=i[5]*y,r[6]=i[6]*y,r[7]=i[7]*y,r[8]=i[8]*v,r[9]=i[9]*v,r[10]=i[10]*v,r[11]=i[11]*v,r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r},a.scale$1=function(r,i,l){return r[0]=i[0]*l,r[1]=i[1]*l,r[2]=i[2]*l,r[3]=i[3]*l,r},a.scale$2=function(r,i,l){return r[0]=i[0]*l,r[1]=i[1]*l,r[2]=i[2]*l,r},a.setCacheLimits=function(r,i){Qn=r,$i=i},a.setRTLTextPlugin=function(r,i,l){if(l===void 0&&(l=!1),So==="deferred"||So==="loading"||So==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");hs=qn.resolveURL(r),So="deferred",df=i,Yc(),l||_a()},a.sphericalToCartesian=function(r){var i=r[0],l=r[1],p=r[2];return l+=90,l*=Math.PI/180,p*=Math.PI/180,{x:i*Math.cos(l)*Math.sin(p),y:i*Math.sin(l)*Math.sin(p),z:i*Math.cos(p)}},a.sqrLen=function(r){var i=r[0],l=r[1];return i*i+l*l},a.styleSpec=G,a.sub=function(r,i,l){return r[0]=i[0]-l[0],r[1]=i[1]-l[1],r[2]=i[2]-l[2],r},a.symbolSize=M9,a.transformMat3=function(r,i,l){var p=i[0],y=i[1],v=i[2];return r[0]=p*l[0]+y*l[3]+v*l[6],r[1]=p*l[1]+y*l[4]+v*l[7],r[2]=p*l[2]+y*l[5]+v*l[8],r},a.transformMat4=xf,a.translate=function(r,i,l){var p,y,v,x,S,C,A,L,D,B,j,Q,te=l[0],ce=l[1],oe=l[2];return i===r?(r[12]=i[0]*te+i[4]*ce+i[8]*oe+i[12],r[13]=i[1]*te+i[5]*ce+i[9]*oe+i[13],r[14]=i[2]*te+i[6]*ce+i[10]*oe+i[14],r[15]=i[3]*te+i[7]*ce+i[11]*oe+i[15]):(y=i[1],v=i[2],x=i[3],S=i[4],C=i[5],A=i[6],L=i[7],D=i[8],B=i[9],j=i[10],Q=i[11],r[0]=p=i[0],r[1]=y,r[2]=v,r[3]=x,r[4]=S,r[5]=C,r[6]=A,r[7]=L,r[8]=D,r[9]=B,r[10]=j,r[11]=Q,r[12]=p*te+S*ce+D*oe+i[12],r[13]=y*te+C*ce+B*oe+i[13],r[14]=v*te+A*ce+j*oe+i[14],r[15]=x*te+L*ce+Q*oe+i[15]),r},a.triggerPluginCompletionEvent=av,a.uniqueId=he,a.validateCustomStyleLayer=function(r){var i=[],l=r.id;return l===void 0&&i.push({message:"layers."+l+': missing required property "id"'}),r.render===void 0&&i.push({message:"layers."+l+': missing required method "render"'}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&i.push({message:"layers."+l+': property "renderingMode" must be either "2d" or "3d"'}),i},a.validateLight=U1,a.validateStyle=Hc,a.values=function(r){var i=[];for(var l in r)i.push(r[l]);return i},a.vectorTile=Sf,a.version="1.13.3",a.warnOnce=st,a.webpSupported=Mn,a.window=I,a.wrap=Y}),h(["./shared"],function(a){function m(N){var F=typeof N;if(F==="number"||F==="boolean"||F==="string"||N==null)return JSON.stringify(N);if(Array.isArray(N)){for(var U="[",Z=0,ee=N;Z<ee.length;Z+=1)U+=m(ee[Z])+",";return U+"]"}for(var pe=Object.keys(N).sort(),de="{",G=0;G<pe.length;G++)de+=JSON.stringify(pe[G])+":"+m(N[pe[G]])+",";return de+"}"}function g(N){for(var F="",U=0,Z=a.refProperties;U<Z.length;U+=1)F+="/"+m(N[Z[U]]);return F}var b=function(N){this.keyCache={},N&&this.replace(N)};b.prototype.replace=function(N){this._layerConfigs={},this._layers={},this.update(N,[])},b.prototype.update=function(N,F){for(var U=this,Z=0,ee=N;Z<ee.length;Z+=1){var pe=ee[Z];this._layerConfigs[pe.id]=pe;var de=this._layers[pe.id]=a.createStyleLayer(pe);de._featureFilter=a.featureFilter(de.filter),this.keyCache[pe.id]&&delete this.keyCache[pe.id]}for(var G=0,ie=F;G<ie.length;G+=1){var _e=ie[G];delete this.keyCache[_e],delete this._layerConfigs[_e],delete this._layers[_e]}this.familiesBySource={};for(var Ge=0,Ze=function(lt,De){for(var fe={},Ee=0;Ee<lt.length;Ee++){var He=De&&De[lt[Ee].id]||g(lt[Ee]);De&&(De[lt[Ee].id]=He);var $t=fe[He];$t||($t=fe[He]=[]),$t.push(lt[Ee])}var Ht=[];for(var Qt in fe)Ht.push(fe[Qt]);return Ht}(a.values(this._layerConfigs),this.keyCache);Ge<Ze.length;Ge+=1){var Ce=Ze[Ge].map(function(lt){return U._layers[lt.id]}),Ue=Ce[0];if(Ue.visibility!=="none"){var St=Ue.source||"",_t=this.familiesBySource[St];_t||(_t=this.familiesBySource[St]={});var Le=Ue.sourceLayer||"_geojsonTileLayer",pt=_t[Le];pt||(pt=_t[Le]=[]),pt.push(Ce)}}};var T=function(N){var F={},U=[];for(var Z in N){var ee=N[Z],pe=F[Z]={};for(var de in ee){var G=ee[+de];if(G&&G.bitmap.width!==0&&G.bitmap.height!==0){var ie={x:0,y:0,w:G.bitmap.width+2,h:G.bitmap.height+2};U.push(ie),pe[de]={rect:ie,metrics:G.metrics}}}}var _e=a.potpack(U),Ge=new a.AlphaImage({width:_e.w||1,height:_e.h||1});for(var Ze in N){var Ce=N[Ze];for(var Ue in Ce){var St=Ce[+Ue];if(St&&St.bitmap.width!==0&&St.bitmap.height!==0){var _t=F[Ze][Ue].rect;a.AlphaImage.copy(St.bitmap,Ge,{x:0,y:0},{x:_t.x+1,y:_t.y+1},St.bitmap)}}}this.image=Ge,this.positions=F};a.register("GlyphAtlas",T);var M=function(N){this.tileID=new a.OverscaledTileID(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId};function I(N,F,U){for(var Z=new a.EvaluationParameters(F),ee=0,pe=N;ee<pe.length;ee+=1)pe[ee].recalculate(Z,U)}function P(N,F){var U=a.getArrayBuffer(N.request,function(Z,ee,pe,de){Z?F(Z):ee&&F(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(ee)),rawData:ee,cacheControl:pe,expires:de})});return function(){U.cancel(),F()}}M.prototype.parse=function(N,F,U,Z,ee){var pe=this;this.status="parsing",this.data=N,this.collisionBoxArray=new a.CollisionBoxArray;var de=new a.DictionaryCoder(Object.keys(N.layers).sort()),G=new a.FeatureIndex(this.tileID,this.promoteId);G.bucketLayerIDs=[];var ie,_e,Ge,Ze,Ce={},Ue={featureIndex:G,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:U},St=F.familiesBySource[this.source];for(var _t in St){var Le=N.layers[_t];if(Le){Le.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+_t+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var pt=de.encode(_t),lt=[],De=0;De<Le.length;De++){var fe=Le.feature(De),Ee=G.getId(fe,_t);lt.push({feature:fe,id:Ee,index:De,sourceLayerIndex:pt})}for(var He=0,$t=St[_t];He<$t.length;He+=1){var Ht=$t[He],Qt=Ht[0];Qt.minzoom&&this.zoom<Math.floor(Qt.minzoom)||Qt.maxzoom&&this.zoom>=Qt.maxzoom||Qt.visibility!=="none"&&(I(Ht,this.zoom,U),(Ce[Qt.id]=Qt.createBucket({index:G.bucketLayerIDs.length,layers:Ht,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pt,sourceID:this.source})).populate(lt,Ue,this.tileID.canonical),G.bucketLayerIDs.push(Ht.map(function(Gr){return Gr.id})))}}}var Xt=a.mapObject(Ue.glyphDependencies,function(Gr){return Object.keys(Gr).map(Number)});Object.keys(Xt).length?Z.send("getGlyphs",{uid:this.uid,stacks:Xt},function(Gr,_r){ie||(ie=Gr,_e=_r,yn.call(pe))}):_e={};var ti=Object.keys(Ue.iconDependencies);ti.length?Z.send("getImages",{icons:ti,source:this.source,tileID:this.tileID,type:"icons"},function(Gr,_r){ie||(ie=Gr,Ge=_r,yn.call(pe))}):Ge={};var er=Object.keys(Ue.patternDependencies);function yn(){if(ie)return ee(ie);if(_e&&Ge&&Ze){var Gr=new T(_e),_r=new a.ImageAtlas(Ge,Ze);for(var Br in Ce){var no=Ce[Br];no instanceof a.SymbolBucket?(I(no.layers,this.zoom,U),a.performSymbolLayout(no,_e,Gr.positions,Ge,_r.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):no.hasPattern&&(no instanceof a.LineBucket||no instanceof a.FillBucket||no instanceof a.FillExtrusionBucket)&&(I(no.layers,this.zoom,U),no.addFeatures(Ue,this.tileID.canonical,_r.patternPositions))}this.status="done",ee(null,{buckets:a.values(Ce).filter(function(Nc){return!Nc.isEmpty()}),featureIndex:G,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Gr.image,imageAtlas:_r,glyphMap:this.returnDependencies?_e:null,iconMap:this.returnDependencies?Ge:null,glyphPositions:this.returnDependencies?Gr.positions:null})}}er.length?Z.send("getImages",{icons:er,source:this.source,tileID:this.tileID,type:"patterns"},function(Gr,_r){ie||(ie=Gr,Ze=_r,yn.call(pe))}):Ze={},yn.call(this)};var z=function(N,F,U,Z){this.actor=N,this.layerIndex=F,this.availableImages=U,this.loadVectorData=Z||P,this.loading={},this.loaded={}};z.prototype.loadTile=function(N,F){var U=this,Z=N.uid;this.loading||(this.loading={});var ee=!!(N&&N.request&&N.request.collectResourceTiming)&&new a.RequestPerformance(N.request),pe=this.loading[Z]=new M(N);pe.abort=this.loadVectorData(N,function(de,G){if(delete U.loading[Z],de||!G)return pe.status="done",U.loaded[Z]=pe,F(de);var ie=G.rawData,_e={};G.expires&&(_e.expires=G.expires),G.cacheControl&&(_e.cacheControl=G.cacheControl);var Ge={};if(ee){var Ze=ee.finish();Ze&&(Ge.resourceTiming=JSON.parse(JSON.stringify(Ze)))}pe.vectorTile=G.vectorTile,pe.parse(G.vectorTile,U.layerIndex,U.availableImages,U.actor,function(Ce,Ue){if(Ce||!Ue)return F(Ce);F(null,a.extend({rawTileData:ie.slice(0)},Ue,_e,Ge))}),U.loaded=U.loaded||{},U.loaded[Z]=pe})},z.prototype.reloadTile=function(N,F){var U=this,Z=this.loaded,ee=N.uid,pe=this;if(Z&&Z[ee]){var de=Z[ee];de.showCollisionBoxes=N.showCollisionBoxes;var G=function(ie,_e){var Ge=de.reloadCallback;Ge&&(delete de.reloadCallback,de.parse(de.vectorTile,pe.layerIndex,U.availableImages,pe.actor,Ge)),F(ie,_e)};de.status==="parsing"?de.reloadCallback=G:de.status==="done"&&(de.vectorTile?de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,G):G())}},z.prototype.abortTile=function(N,F){var U=this.loading,Z=N.uid;U&&U[Z]&&U[Z].abort&&(U[Z].abort(),delete U[Z]),F()},z.prototype.removeTile=function(N,F){var U=this.loaded,Z=N.uid;U&&U[Z]&&delete U[Z],F()};var V=a.window.ImageBitmap,W=function(){this.loaded={}};function Y(N,F){if(N.length!==0){X(N[0],F);for(var U=1;U<N.length;U++)X(N[U],!F)}}function X(N,F){for(var U=0,Z=0,ee=0,pe=N.length,de=pe-1;ee<pe;de=ee++){var G=(N[ee][0]-N[de][0])*(N[de][1]+N[ee][1]),ie=U+G;Z+=Math.abs(U)>=Math.abs(G)?U-ie+G:G-ie+U,U=ie}U+Z>=0!=!!F&&N.reverse()}W.prototype.loadTile=function(N,F){var U=N.uid,Z=N.encoding,ee=N.rawImageData,pe=V&&ee instanceof V?this.getImageData(ee):ee,de=new a.DEMData(U,pe,Z);this.loaded=this.loaded||{},this.loaded[U]=de,F(null,de)},W.prototype.getImageData=function(N){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(N.width,N.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=N.width,this.offscreenCanvas.height=N.height,this.offscreenCanvasContext.drawImage(N,0,0,N.width,N.height);var F=this.offscreenCanvasContext.getImageData(-1,-1,N.width+2,N.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:F.width,height:F.height},F.data)},W.prototype.removeTile=function(N){var F=this.loaded,U=N.uid;F&&F[U]&&delete F[U]};var ue=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,he=function(N){this._feature=N,this.extent=a.EXTENT,this.type=N.type,this.properties=N.tags,"id"in N&&!isNaN(N.id)&&(this.id=parseInt(N.id,10))};he.prototype.loadGeometry=function(){if(this._feature.type===1){for(var N=[],F=0,U=this._feature.geometry;F<U.length;F+=1){var Z=U[F];N.push([new a.Point$1(Z[0],Z[1])])}return N}for(var ee=[],pe=0,de=this._feature.geometry;pe<de.length;pe+=1){for(var G=[],ie=0,_e=de[pe];ie<_e.length;ie+=1){var Ge=_e[ie];G.push(new a.Point$1(Ge[0],Ge[1]))}ee.push(G)}return ee},he.prototype.toGeoJSON=function(N,F,U){return ue.call(this,N,F,U)};var ve=function(N){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=N.length,this._features=N};ve.prototype.feature=function(N){return new he(this._features[N])};var ze=a.vectorTile.VectorTileFeature,Fe=Pe;function Pe(N,F){this.options=F||{},this.features=N,this.length=N.length}function Se(N,F){this.id=typeof N.id=="number"?N.id:void 0,this.type=N.type,this.rawGeometry=N.type===1?[N.geometry]:N.geometry,this.properties=N.tags,this.extent=F||4096}Pe.prototype.feature=function(N){return new Se(this.features[N],this.options.extent)},Se.prototype.loadGeometry=function(){var N=this.rawGeometry;this.geometry=[];for(var F=0;F<N.length;F++){for(var U=N[F],Z=[],ee=0;ee<U.length;ee++)Z.push(new a.Point$1(U[ee][0],U[ee][1]));this.geometry.push(Z)}return this.geometry},Se.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var N=this.geometry,F=1/0,U=-1/0,Z=1/0,ee=-1/0,pe=0;pe<N.length;pe++)for(var de=N[pe],G=0;G<de.length;G++){var ie=de[G];F=Math.min(F,ie.x),U=Math.max(U,ie.x),Z=Math.min(Z,ie.y),ee=Math.max(ee,ie.y)}return[F,Z,U,ee]},Se.prototype.toGeoJSON=ze.prototype.toGeoJSON;var Ie=$e,Je=Fe;function $e(N){var F=new a.pbf;return function(U,Z){for(var ee in U.layers)Z.writeMessage(3,st,U.layers[ee])}(N,F),F.finish()}function st(N,F){var U;F.writeVarintField(15,N.version||1),F.writeStringField(1,N.name||""),F.writeVarintField(5,N.extent||4096);var Z={keys:[],values:[],keycache:{},valuecache:{}};for(U=0;U<N.length;U++)Z.feature=N.feature(U),F.writeMessage(2,be,Z);var ee=Z.keys;for(U=0;U<ee.length;U++)F.writeStringField(3,ee[U]);var pe=Z.values;for(U=0;U<pe.length;U++)F.writeMessage(4,rr,pe[U])}function be(N,F){var U=N.feature;U.id!==void 0&&F.writeVarintField(1,U.id),F.writeMessage(2,Ye,N),F.writeVarintField(3,U.type),F.writeMessage(4,kt,U)}function Ye(N,F){var U=N.feature,Z=N.keys,ee=N.values,pe=N.keycache,de=N.valuecache;for(var G in U.properties){var ie=pe[G];ie===void 0&&(Z.push(G),pe[G]=ie=Z.length-1),F.writeVarint(ie);var _e=U.properties[G],Ge=typeof _e;Ge!=="string"&&Ge!=="boolean"&&Ge!=="number"&&(_e=JSON.stringify(_e));var Ze=Ge+":"+_e,Ce=de[Ze];Ce===void 0&&(ee.push(_e),de[Ze]=Ce=ee.length-1),F.writeVarint(Ce)}}function ht(N,F){return(F<<3)+(7&N)}function vt(N){return N<<1^N>>31}function kt(N,F){for(var U=N.loadGeometry(),Z=N.type,ee=0,pe=0,de=U.length,G=0;G<de;G++){var ie=U[G],_e=1;Z===1&&(_e=ie.length),F.writeVarint(ht(1,_e));for(var Ge=Z===3?ie.length-1:ie.length,Ze=0;Ze<Ge;Ze++){Ze===1&&Z!==1&&F.writeVarint(ht(2,Ge-1));var Ce=ie[Ze].x-ee,Ue=ie[Ze].y-pe;F.writeVarint(vt(Ce)),F.writeVarint(vt(Ue)),ee+=Ce,pe+=Ue}Z===3&&F.writeVarint(ht(7,1))}}function rr(N,F){var U=typeof N;U==="string"?F.writeStringField(1,N):U==="boolean"?F.writeBooleanField(7,N):U==="number"&&(N%1!=0?F.writeDoubleField(3,N):N<0?F.writeSVarintField(6,N):F.writeVarintField(5,N))}function Nn(N,F,U,Z){zr(N,U,Z),zr(F,2*U,2*Z),zr(F,2*U+1,2*Z+1)}function zr(N,F,U){var Z=N[F];N[F]=N[U],N[U]=Z}function mr(N,F,U,Z){var ee=N-U,pe=F-Z;return ee*ee+pe*pe}Ie.fromVectorTileJs=$e,Ie.fromGeojsonVt=function(N,F){F=F||{};var U={};for(var Z in N)U[Z]=new Fe(N[Z].features,F),U[Z].name=Z,U[Z].version=F.version,U[Z].extent=F.extent;return $e({layers:U})},Ie.GeoJSONWrapper=Je;var Jn=function(N){return N[0]},Fr=function(N){return N[1]},Gi=function(N,F,U,Z,ee){F===void 0&&(F=Jn),U===void 0&&(U=Fr),Z===void 0&&(Z=64),ee===void 0&&(ee=Float64Array),this.nodeSize=Z,this.points=N;for(var pe=N.length<65536?Uint16Array:Uint32Array,de=this.ids=new pe(N.length),G=this.coords=new ee(2*N.length),ie=0;ie<N.length;ie++)de[ie]=ie,G[2*ie]=F(N[ie]),G[2*ie+1]=U(N[ie]);(function _e(Ge,Ze,Ce,Ue,St,_t){if(!(St-Ue<=Ce)){var Le=Ue+St>>1;(function pt(lt,De,fe,Ee,He,$t){for(;He>Ee;){if(He-Ee>600){var Ht=He-Ee+1,Qt=fe-Ee+1,Xt=Math.log(Ht),ti=.5*Math.exp(2*Xt/3),er=.5*Math.sqrt(Xt*ti*(Ht-ti)/Ht)*(Qt-Ht/2<0?-1:1);pt(lt,De,fe,Math.max(Ee,Math.floor(fe-Qt*ti/Ht+er)),Math.min(He,Math.floor(fe+(Ht-Qt)*ti/Ht+er)),$t)}var yn=De[2*fe+$t],Gr=Ee,_r=He;for(Nn(lt,De,Ee,fe),De[2*He+$t]>yn&&Nn(lt,De,Ee,He);Gr<_r;){for(Nn(lt,De,Gr,_r),Gr++,_r--;De[2*Gr+$t]<yn;)Gr++;for(;De[2*_r+$t]>yn;)_r--}De[2*Ee+$t]===yn?Nn(lt,De,Ee,_r):Nn(lt,De,++_r,He),_r<=fe&&(Ee=_r+1),fe<=_r&&(He=_r-1)}})(Ge,Ze,Le,Ue,St,_t%2),_e(Ge,Ze,Ce,Ue,Le-1,_t+1),_e(Ge,Ze,Ce,Le+1,St,_t+1)}})(de,G,Z,0,de.length-1,0)};Gi.prototype.range=function(N,F,U,Z){return function(ee,pe,de,G,ie,_e,Ge){for(var Ze,Ce,Ue=[0,ee.length-1,0],St=[];Ue.length;){var _t=Ue.pop(),Le=Ue.pop(),pt=Ue.pop();if(Le-pt<=Ge)for(var lt=pt;lt<=Le;lt++)Ce=pe[2*lt+1],(Ze=pe[2*lt])>=de&&Ze<=ie&&Ce>=G&&Ce<=_e&&St.push(ee[lt]);else{var De=Math.floor((pt+Le)/2);Ce=pe[2*De+1],(Ze=pe[2*De])>=de&&Ze<=ie&&Ce>=G&&Ce<=_e&&St.push(ee[De]);var fe=(_t+1)%2;(_t===0?de<=Ze:G<=Ce)&&(Ue.push(pt),Ue.push(De-1),Ue.push(fe)),(_t===0?ie>=Ze:_e>=Ce)&&(Ue.push(De+1),Ue.push(Le),Ue.push(fe))}}return St}(this.ids,this.coords,N,F,U,Z,this.nodeSize)},Gi.prototype.within=function(N,F,U){return function(Z,ee,pe,de,G,ie){for(var _e=[0,Z.length-1,0],Ge=[],Ze=G*G;_e.length;){var Ce=_e.pop(),Ue=_e.pop(),St=_e.pop();if(Ue-St<=ie)for(var _t=St;_t<=Ue;_t++)mr(ee[2*_t],ee[2*_t+1],pe,de)<=Ze&&Ge.push(Z[_t]);else{var Le=Math.floor((St+Ue)/2),pt=ee[2*Le],lt=ee[2*Le+1];mr(pt,lt,pe,de)<=Ze&&Ge.push(Z[Le]);var De=(Ce+1)%2;(Ce===0?pe-G<=pt:de-G<=lt)&&(_e.push(St),_e.push(Le-1),_e.push(De)),(Ce===0?pe+G>=pt:de+G>=lt)&&(_e.push(Le+1),_e.push(Ue),_e.push(De))}}return Ge}(this.ids,this.coords,N,F,U,this.nodeSize)};var qr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(N){return N}},Lr=function(N){this.options=ye(Object.create(qr),N),this.trees=new Array(this.options.maxZoom+1)};function qn(N,F,U,Z,ee){return{x:N,y:F,zoom:1/0,id:U,parentId:-1,numPoints:Z,properties:ee}}function Mr(N,F){var U=N.geometry.coordinates,Z=U[1];return{x:Wn(U[0]),y:K(Z),zoom:1/0,index:F,parentId:-1}}function Mn(N){return{type:"Feature",id:N.id,properties:ci(N),geometry:{type:"Point",coordinates:[(Z=N.x,360*(Z-.5)),(F=N.y,U=(180-360*F)*Math.PI/180,360*Math.atan(Math.exp(U))/Math.PI-90)]}};var F,U,Z}function ci(N){var F=N.numPoints,U=F>=1e4?Math.round(F/1e3)+"k":F>=1e3?Math.round(F/100)/10+"k":F;return ye(ye({},N.properties),{cluster:!0,cluster_id:N.id,point_count:F,point_count_abbreviated:U})}function Wn(N){return N/360+.5}function K(N){var F=Math.sin(N*Math.PI/180),U=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return U<0?0:U>1?1:U}function ye(N,F){for(var U in F)N[U]=F[U];return N}function Ne(N){return N.x}function qe(N){return N.y}function We(N,F,U,Z,ee,pe){var de=ee-U,G=pe-Z;if(de!==0||G!==0){var ie=((N-U)*de+(F-Z)*G)/(de*de+G*G);ie>1?(U=ee,Z=pe):ie>0&&(U+=de*ie,Z+=G*ie)}return(de=N-U)*de+(G=F-Z)*G}function rt(N,F,U,Z){var ee={id:N===void 0?null:N,type:F,geometry:U,tags:Z,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(pe){var de=pe.geometry,G=pe.type;if(G==="Point"||G==="MultiPoint"||G==="LineString")mt(pe,de);else if(G==="Polygon"||G==="MultiLineString")for(var ie=0;ie<de.length;ie++)mt(pe,de[ie]);else if(G==="MultiPolygon")for(ie=0;ie<de.length;ie++)for(var _e=0;_e<de[ie].length;_e++)mt(pe,de[ie][_e])}(ee),ee}function mt(N,F){for(var U=0;U<F.length;U+=3)N.minX=Math.min(N.minX,F[U]),N.minY=Math.min(N.minY,F[U+1]),N.maxX=Math.max(N.maxX,F[U]),N.maxY=Math.max(N.maxY,F[U+1])}function et(N,F,U,Z){if(F.geometry){var ee=F.geometry.coordinates,pe=F.geometry.type,de=Math.pow(U.tolerance/((1<<U.maxZoom)*U.extent),2),G=[],ie=F.id;if(U.promoteId?ie=F.properties[U.promoteId]:U.generateId&&(ie=Z||0),pe==="Point")ut(ee,G);else if(pe==="MultiPoint")for(var _e=0;_e<ee.length;_e++)ut(ee[_e],G);else if(pe==="LineString")Qe(ee,G,de,!1);else if(pe==="MultiLineString"){if(U.lineMetrics){for(_e=0;_e<ee.length;_e++)Qe(ee[_e],G=[],de,!1),N.push(rt(ie,"LineString",G,F.properties));return}It(ee,G,de,!1)}else if(pe==="Polygon")It(ee,G,de,!0);else{if(pe!=="MultiPolygon"){if(pe==="GeometryCollection"){for(_e=0;_e<F.geometry.geometries.length;_e++)et(N,{id:ie,geometry:F.geometry.geometries[_e],properties:F.properties},U,Z);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<ee.length;_e++){var Ge=[];It(ee[_e],Ge,de,!0),G.push(Ge)}}N.push(rt(ie,pe,G,F.properties))}}function ut(N,F){F.push(bt(N[0])),F.push(Lt(N[1])),F.push(0)}function Qe(N,F,U,Z){for(var ee,pe,de=0,G=0;G<N.length;G++){var ie=bt(N[G][0]),_e=Lt(N[G][1]);F.push(ie),F.push(_e),F.push(0),G>0&&(de+=Z?(ee*_e-ie*pe)/2:Math.sqrt(Math.pow(ie-ee,2)+Math.pow(_e-pe,2))),ee=ie,pe=_e}var Ge=F.length-3;F[2]=1,function Ze(Ce,Ue,St,_t){for(var Le,pt=_t,lt=St-Ue>>1,De=St-Ue,fe=Ce[Ue],Ee=Ce[Ue+1],He=Ce[St],$t=Ce[St+1],Ht=Ue+3;Ht<St;Ht+=3){var Qt=We(Ce[Ht],Ce[Ht+1],fe,Ee,He,$t);if(Qt>pt)Le=Ht,pt=Qt;else if(Qt===pt){var Xt=Math.abs(Ht-lt);Xt<De&&(Le=Ht,De=Xt)}}pt>_t&&(Le-Ue>3&&Ze(Ce,Ue,Le,_t),Ce[Le+2]=pt,St-Le>3&&Ze(Ce,Le,St,_t))}(F,0,Ge,U),F[Ge+2]=1,F.size=Math.abs(de),F.start=0,F.end=F.size}function It(N,F,U,Z){for(var ee=0;ee<N.length;ee++){var pe=[];Qe(N[ee],pe,U,Z),F.push(pe)}}function bt(N){return N/360+.5}function Lt(N){var F=Math.sin(N*Math.PI/180),U=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return U<0?0:U>1?1:U}function Gt(N,F,U,Z,ee,pe,de,G){if(Z/=F,pe>=(U/=F)&&de<Z)return N;if(de<U||pe>=Z)return null;for(var ie=[],_e=0;_e<N.length;_e++){var Ge=N[_e],Ze=Ge.geometry,Ce=Ge.type,Ue=ee===0?Ge.minX:Ge.minY,St=ee===0?Ge.maxX:Ge.maxY;if(Ue>=U&&St<Z)ie.push(Ge);else if(!(St<U||Ue>=Z)){var _t=[];if(Ce==="Point"||Ce==="MultiPoint")yr(Ze,_t,U,Z,ee);else if(Ce==="LineString")jr(Ze,_t,U,Z,ee,!1,G.lineMetrics);else if(Ce==="MultiLineString")Qr(Ze,_t,U,Z,ee,!1);else if(Ce==="Polygon")Qr(Ze,_t,U,Z,ee,!0);else if(Ce==="MultiPolygon")for(var Le=0;Le<Ze.length;Le++){var pt=[];Qr(Ze[Le],pt,U,Z,ee,!0),pt.length&&_t.push(pt)}if(_t.length){if(G.lineMetrics&&Ce==="LineString"){for(Le=0;Le<_t.length;Le++)ie.push(rt(Ge.id,Ce,_t[Le],Ge.tags));continue}Ce!=="LineString"&&Ce!=="MultiLineString"||(_t.length===1?(Ce="LineString",_t=_t[0]):Ce="MultiLineString"),Ce!=="Point"&&Ce!=="MultiPoint"||(Ce=_t.length===3?"Point":"MultiPoint"),ie.push(rt(Ge.id,Ce,_t,Ge.tags))}}}return ie.length?ie:null}function yr(N,F,U,Z,ee){for(var pe=0;pe<N.length;pe+=3){var de=N[pe+ee];de>=U&&de<=Z&&(F.push(N[pe]),F.push(N[pe+1]),F.push(N[pe+2]))}}function jr(N,F,U,Z,ee,pe,de){for(var G,ie,_e=Dr(N),Ge=ee===0?$i:_o,Ze=N.start,Ce=0;Ce<N.length-3;Ce+=3){var Ue=N[Ce],St=N[Ce+1],_t=N[Ce+2],Le=N[Ce+3],pt=N[Ce+4],lt=ee===0?Ue:St,De=ee===0?Le:pt,fe=!1;de&&(G=Math.sqrt(Math.pow(Ue-Le,2)+Math.pow(St-pt,2))),lt<U?De>U&&(ie=Ge(_e,Ue,St,Le,pt,U),de&&(_e.start=Ze+G*ie)):lt>Z?De<Z&&(ie=Ge(_e,Ue,St,Le,pt,Z),de&&(_e.start=Ze+G*ie)):Qn(_e,Ue,St,_t),De<U&&lt>=U&&(ie=Ge(_e,Ue,St,Le,pt,U),fe=!0),De>Z&&lt<=Z&&(ie=Ge(_e,Ue,St,Le,pt,Z),fe=!0),!pe&&fe&&(de&&(_e.end=Ze+G*ie),F.push(_e),_e=Dr(N)),de&&(Ze+=G)}var Ee=N.length-3;Ue=N[Ee],St=N[Ee+1],_t=N[Ee+2],(lt=ee===0?Ue:St)>=U&&lt<=Z&&Qn(_e,Ue,St,_t),Ee=_e.length-3,pe&&Ee>=3&&(_e[Ee]!==_e[0]||_e[Ee+1]!==_e[1])&&Qn(_e,_e[0],_e[1],_e[2]),_e.length&&F.push(_e)}function Dr(N){var F=[];return F.size=N.size,F.start=N.start,F.end=N.end,F}function Qr(N,F,U,Z,ee,pe){for(var de=0;de<N.length;de++)jr(N[de],F,U,Z,ee,pe,!1)}function Qn(N,F,U,Z){N.push(F),N.push(U),N.push(Z)}function $i(N,F,U,Z,ee,pe){var de=(pe-F)/(Z-F);return N.push(pe),N.push(U+(ee-U)*de),N.push(1),de}function _o(N,F,U,Z,ee,pe){var de=(pe-U)/(ee-U);return N.push(F+(Z-F)*de),N.push(pe),N.push(1),de}function ei(N,F){for(var U=[],Z=0;Z<N.length;Z++){var ee,pe=N[Z],de=pe.type;if(de==="Point"||de==="MultiPoint"||de==="LineString")ee=Ri(pe.geometry,F);else if(de==="MultiLineString"||de==="Polygon"){ee=[];for(var G=0;G<pe.geometry.length;G++)ee.push(Ri(pe.geometry[G],F))}else if(de==="MultiPolygon")for(ee=[],G=0;G<pe.geometry.length;G++){for(var ie=[],_e=0;_e<pe.geometry[G].length;_e++)ie.push(Ri(pe.geometry[G][_e],F));ee.push(ie)}U.push(rt(pe.id,de,ee,pe.tags))}return U}function Ri(N,F){var U=[];U.size=N.size,N.start!==void 0&&(U.start=N.start,U.end=N.end);for(var Z=0;Z<N.length;Z+=3)U.push(N[Z]+F,N[Z+1],N[Z+2]);return U}function In(N,F){if(N.transformed)return N;var U,Z,ee,pe=1<<N.z,de=N.x,G=N.y;for(U=0;U<N.features.length;U++){var ie=N.features[U],_e=ie.geometry,Ge=ie.type;if(ie.geometry=[],Ge===1)for(Z=0;Z<_e.length;Z+=2)ie.geometry.push(hi(_e[Z],_e[Z+1],F,pe,de,G));else for(Z=0;Z<_e.length;Z++){var Ze=[];for(ee=0;ee<_e[Z].length;ee+=2)Ze.push(hi(_e[Z][ee],_e[Z][ee+1],F,pe,de,G));ie.geometry.push(Ze)}}return N.transformed=!0,N}function hi(N,F,U,Z,ee,pe){return[Math.round(U*(N*Z-ee)),Math.round(U*(F*Z-pe))]}function ss(N,F,U,Z,ee){for(var pe=F===ee.maxZoom?0:ee.tolerance/((1<<F)*ee.extent),de={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:U,y:Z,z:F,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},G=0;G<N.length;G++){de.numFeatures++,Xo(de,N[G],pe,ee);var ie=N[G].minX,_e=N[G].minY,Ge=N[G].maxX,Ze=N[G].maxY;ie<de.minX&&(de.minX=ie),_e<de.minY&&(de.minY=_e),Ge>de.maxX&&(de.maxX=Ge),Ze>de.maxY&&(de.maxY=Ze)}return de}function Xo(N,F,U,Z){var ee=F.geometry,pe=F.type,de=[];if(pe==="Point"||pe==="MultiPoint")for(var G=0;G<ee.length;G+=3)de.push(ee[G]),de.push(ee[G+1]),N.numPoints++,N.numSimplified++;else if(pe==="LineString")ls(de,ee,N,U,!1,!1);else if(pe==="MultiLineString"||pe==="Polygon")for(G=0;G<ee.length;G++)ls(de,ee[G],N,U,pe==="Polygon",G===0);else if(pe==="MultiPolygon")for(var ie=0;ie<ee.length;ie++){var _e=ee[ie];for(G=0;G<_e.length;G++)ls(de,_e[G],N,U,!0,G===0)}if(de.length){var Ge=F.tags||null;if(pe==="LineString"&&Z.lineMetrics){for(var Ze in Ge={},F.tags)Ge[Ze]=F.tags[Ze];Ge.mapbox_clip_start=ee.start/ee.size,Ge.mapbox_clip_end=ee.end/ee.size}var Ce={geometry:de,type:pe==="Polygon"||pe==="MultiPolygon"?3:pe==="LineString"||pe==="MultiLineString"?2:1,tags:Ge};F.id!==null&&(Ce.id=F.id),N.features.push(Ce)}}function ls(N,F,U,Z,ee,pe){var de=Z*Z;if(Z>0&&F.size<(ee?de:Z))U.numPoints+=F.length/3;else{for(var G=[],ie=0;ie<F.length;ie+=3)(Z===0||F[ie+2]>de)&&(U.numSimplified++,G.push(F[ie]),G.push(F[ie+1])),U.numPoints++;ee&&function(_e,Ge){for(var Ze=0,Ce=0,Ue=_e.length,St=Ue-2;Ce<Ue;St=Ce,Ce+=2)Ze+=(_e[Ce]-_e[St])*(_e[Ce+1]+_e[St+1]);if(Ze>0===Ge)for(Ce=0,Ue=_e.length;Ce<Ue/2;Ce+=2){var _t=_e[Ce],Le=_e[Ce+1];_e[Ce]=_e[Ue-2-Ce],_e[Ce+1]=_e[Ue-1-Ce],_e[Ue-2-Ce]=_t,_e[Ue-1-Ce]=Le}}(G,pe),N.push(G)}}function ma(N,F){var U=(F=this.options=function(ee,pe){for(var de in pe)ee[de]=pe[de];return ee}(Object.create(this.options),F)).debug;if(U&&console.time("preprocess data"),F.maxZoom<0||F.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(F.promoteId&&F.generateId)throw new Error("promoteId and generateId cannot be used together.");var Z=function(ee,pe){var de=[];if(ee.type==="FeatureCollection")for(var G=0;G<ee.features.length;G++)et(de,ee.features[G],pe,G);else et(de,ee.type==="Feature"?ee:{geometry:ee},pe);return de}(N,F);this.tiles={},this.tileCoords=[],U&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",F.indexMaxZoom,F.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Z=function(ee,pe){var de=pe.buffer/pe.extent,G=ee,ie=Gt(ee,1,-1-de,de,0,-1,2,pe),_e=Gt(ee,1,1-de,2+de,0,-1,2,pe);return(ie||_e)&&(G=Gt(ee,1,-de,1+de,0,-1,2,pe)||[],ie&&(G=ei(ie,1).concat(G)),_e&&(G=G.concat(ei(_e,-1)))),G}(Z,F)).length&&this.splitTile(Z,0,0,0),U&&(Z.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pn(N,F,U){return 32*((1<<N)*U+F)+N}function Fo(N,F){var U=N.tileID.canonical;if(!this._geoJSONIndex)return F(null,null);var Z=this._geoJSONIndex.getTile(U.z,U.x,U.y);if(!Z)return F(null,null);var ee=new ve(Z.features),pe=Ie(ee);pe.byteOffset===0&&pe.byteLength===pe.buffer.byteLength||(pe=new Uint8Array(pe)),F(null,{vectorTile:ee,rawData:pe.buffer})}Lr.prototype.load=function(N){var F=this.options,U=F.log,Z=F.minZoom,ee=F.maxZoom,pe=F.nodeSize;U&&console.time("total time");var de="prepare "+N.length+" points";U&&console.time(de),this.points=N;for(var G=[],ie=0;ie<N.length;ie++)N[ie].geometry&&G.push(Mr(N[ie],ie));this.trees[ee+1]=new Gi(G,Ne,qe,pe,Float32Array),U&&console.timeEnd(de);for(var _e=ee;_e>=Z;_e--){var Ge=+Date.now();G=this._cluster(G,_e),this.trees[_e]=new Gi(G,Ne,qe,pe,Float32Array),U&&console.log("z%d: %d clusters in %dms",_e,G.length,+Date.now()-Ge)}return U&&console.timeEnd("total time"),this},Lr.prototype.getClusters=function(N,F){var U=((N[0]+180)%360+360)%360-180,Z=Math.max(-90,Math.min(90,N[1])),ee=N[2]===180?180:((N[2]+180)%360+360)%360-180,pe=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)U=-180,ee=180;else if(U>ee){var de=this.getClusters([U,Z,180,pe],F),G=this.getClusters([-180,Z,ee,pe],F);return de.concat(G)}for(var ie=this.trees[this._limitZoom(F)],_e=[],Ge=0,Ze=ie.range(Wn(U),K(pe),Wn(ee),K(Z));Ge<Ze.length;Ge+=1){var Ce=ie.points[Ze[Ge]];_e.push(Ce.numPoints?Mn(Ce):this.points[Ce.index])}return _e},Lr.prototype.getChildren=function(N){var F=this._getOriginId(N),U=this._getOriginZoom(N),Z="No cluster with the specified id.",ee=this.trees[U];if(!ee)throw new Error(Z);var pe=ee.points[F];if(!pe)throw new Error(Z);for(var de=this.options.radius/(this.options.extent*Math.pow(2,U-1)),G=[],ie=0,_e=ee.within(pe.x,pe.y,de);ie<_e.length;ie+=1){var Ge=ee.points[_e[ie]];Ge.parentId===N&&G.push(Ge.numPoints?Mn(Ge):this.points[Ge.index])}if(G.length===0)throw new Error(Z);return G},Lr.prototype.getLeaves=function(N,F,U){var Z=[];return this._appendLeaves(Z,N,F=F||10,U=U||0,0),Z},Lr.prototype.getTile=function(N,F,U){var Z=this.trees[this._limitZoom(N)],ee=Math.pow(2,N),pe=this.options,de=pe.radius/pe.extent,G=(U-de)/ee,ie=(U+1+de)/ee,_e={features:[]};return this._addTileFeatures(Z.range((F-de)/ee,G,(F+1+de)/ee,ie),Z.points,F,U,ee,_e),F===0&&this._addTileFeatures(Z.range(1-de/ee,G,1,ie),Z.points,ee,U,ee,_e),F===ee-1&&this._addTileFeatures(Z.range(0,G,de/ee,ie),Z.points,-1,U,ee,_e),_e.features.length?_e:null},Lr.prototype.getClusterExpansionZoom=function(N){for(var F=this._getOriginZoom(N)-1;F<=this.options.maxZoom;){var U=this.getChildren(N);if(F++,U.length!==1)break;N=U[0].properties.cluster_id}return F},Lr.prototype._appendLeaves=function(N,F,U,Z,ee){for(var pe=0,de=this.getChildren(F);pe<de.length;pe+=1){var G=de[pe],ie=G.properties;if(ie&&ie.cluster?ee+ie.point_count<=Z?ee+=ie.point_count:ee=this._appendLeaves(N,ie.cluster_id,U,Z,ee):ee<Z?ee++:N.push(G),N.length===U)break}return ee},Lr.prototype._addTileFeatures=function(N,F,U,Z,ee,pe){for(var de=0,G=N;de<G.length;de+=1){var ie=F[G[de]],_e=ie.numPoints,Ge={type:1,geometry:[[Math.round(this.options.extent*(ie.x*ee-U)),Math.round(this.options.extent*(ie.y*ee-Z))]],tags:_e?ci(ie):this.points[ie.index].properties},Ze=void 0;_e?Ze=ie.id:this.options.generateId?Ze=ie.index:this.points[ie.index].id&&(Ze=this.points[ie.index].id),Ze!==void 0&&(Ge.id=Ze),pe.features.push(Ge)}},Lr.prototype._limitZoom=function(N){return Math.max(this.options.minZoom,Math.min(+N,this.options.maxZoom+1))},Lr.prototype._cluster=function(N,F){for(var U=[],Z=this.options,ee=Z.reduce,pe=Z.minPoints,de=Z.radius/(Z.extent*Math.pow(2,F)),G=0;G<N.length;G++){var ie=N[G];if(!(ie.zoom<=F)){ie.zoom=F;for(var _e=this.trees[F+1],Ge=_e.within(ie.x,ie.y,de),Ze=ie.numPoints||1,Ce=Ze,Ue=0,St=Ge;Ue<St.length;Ue+=1){var _t=_e.points[St[Ue]];_t.zoom>F&&(Ce+=_t.numPoints||1)}if(Ce>=pe){for(var Le=ie.x*Ze,pt=ie.y*Ze,lt=ee&&Ze>1?this._map(ie,!0):null,De=(G<<5)+(F+1)+this.points.length,fe=0,Ee=Ge;fe<Ee.length;fe+=1){var He=_e.points[Ee[fe]];if(!(He.zoom<=F)){He.zoom=F;var $t=He.numPoints||1;Le+=He.x*$t,pt+=He.y*$t,He.parentId=De,ee&&(lt||(lt=this._map(ie,!0)),ee(lt,this._map(He)))}}ie.parentId=De,U.push(qn(Le/Ce,pt/Ce,De,Ce,lt))}else if(U.push(ie),Ce>1)for(var Ht=0,Qt=Ge;Ht<Qt.length;Ht+=1){var Xt=_e.points[Qt[Ht]];Xt.zoom<=F||(Xt.zoom=F,U.push(Xt))}}}return U},Lr.prototype._getOriginId=function(N){return N-this.points.length>>5},Lr.prototype._getOriginZoom=function(N){return(N-this.points.length)%32},Lr.prototype._map=function(N,F){if(N.numPoints)return F?ye({},N.properties):N.properties;var U=this.points[N.index].properties,Z=this.options.map(U);return F&&Z===U?ye({},Z):Z},ma.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ma.prototype.splitTile=function(N,F,U,Z,ee,pe,de){for(var G=[N,F,U,Z],ie=this.options,_e=ie.debug;G.length;){Z=G.pop(),U=G.pop(),F=G.pop(),N=G.pop();var Ge=1<<F,Ze=pn(F,U,Z),Ce=this.tiles[Ze];if(!Ce&&(_e>1&&console.time("creation"),Ce=this.tiles[Ze]=ss(N,F,U,Z,ie),this.tileCoords.push({z:F,x:U,y:Z}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",F,U,Z,Ce.numFeatures,Ce.numPoints,Ce.numSimplified),console.timeEnd("creation"));var Ue="z"+F;this.stats[Ue]=(this.stats[Ue]||0)+1,this.total++}if(Ce.source=N,ee){if(F===ie.maxZoom||F===ee)continue;var St=1<<ee-F;if(U!==Math.floor(pe/St)||Z!==Math.floor(de/St))continue}else if(F===ie.indexMaxZoom||Ce.numPoints<=ie.indexMaxPoints)continue;if(Ce.source=null,N.length!==0){_e>1&&console.time("clipping");var _t,Le,pt,lt,De,fe,Ee=.5*ie.buffer/ie.extent,He=.5-Ee,$t=.5+Ee,Ht=1+Ee;_t=Le=pt=lt=null,De=Gt(N,Ge,U-Ee,U+$t,0,Ce.minX,Ce.maxX,ie),fe=Gt(N,Ge,U+He,U+Ht,0,Ce.minX,Ce.maxX,ie),N=null,De&&(_t=Gt(De,Ge,Z-Ee,Z+$t,1,Ce.minY,Ce.maxY,ie),Le=Gt(De,Ge,Z+He,Z+Ht,1,Ce.minY,Ce.maxY,ie),De=null),fe&&(pt=Gt(fe,Ge,Z-Ee,Z+$t,1,Ce.minY,Ce.maxY,ie),lt=Gt(fe,Ge,Z+He,Z+Ht,1,Ce.minY,Ce.maxY,ie),fe=null),_e>1&&console.timeEnd("clipping"),G.push(_t||[],F+1,2*U,2*Z),G.push(Le||[],F+1,2*U,2*Z+1),G.push(pt||[],F+1,2*U+1,2*Z),G.push(lt||[],F+1,2*U+1,2*Z+1)}}},ma.prototype.getTile=function(N,F,U){var Z=this.options,ee=Z.extent,pe=Z.debug;if(N<0||N>24)return null;var de=1<<N,G=pn(N,F=(F%de+de)%de,U);if(this.tiles[G])return In(this.tiles[G],ee);pe>1&&console.log("drilling down to z%d-%d-%d",N,F,U);for(var ie,_e=N,Ge=F,Ze=U;!ie&&_e>0;)_e--,Ge=Math.floor(Ge/2),Ze=Math.floor(Ze/2),ie=this.tiles[pn(_e,Ge,Ze)];return ie&&ie.source?(pe>1&&console.log("found parent tile z%d-%d-%d",_e,Ge,Ze),pe>1&&console.time("drilling down"),this.splitTile(ie.source,_e,Ge,Ze,N,F,U),pe>1&&console.timeEnd("drilling down"),this.tiles[G]?In(this.tiles[G],ee):null):null};var Ml=function(N){function F(U,Z,ee,pe){N.call(this,U,Z,ee,Fo),pe&&(this.loadGeoJSON=pe)}return N&&(F.__proto__=N),(F.prototype=Object.create(N&&N.prototype)).constructor=F,F.prototype.loadData=function(U,Z){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Z,this._pendingLoadDataParams=U,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},F.prototype._loadData=function(){var U=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Z=this._pendingCallback,ee=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var pe=!!(ee&&ee.request&&ee.request.collectResourceTiming)&&new a.RequestPerformance(ee.request);this.loadGeoJSON(ee,function(de,G){if(de||!G)return Z(de);if(typeof G!="object")return Z(new Error("Input data given to '"+ee.source+"' is not a valid GeoJSON object."));(function Ce(Ue,St){var _t,Le=Ue&&Ue.type;if(Le==="FeatureCollection")for(_t=0;_t<Ue.features.length;_t++)Ce(Ue.features[_t],St);else if(Le==="GeometryCollection")for(_t=0;_t<Ue.geometries.length;_t++)Ce(Ue.geometries[_t],St);else if(Le==="Feature")Ce(Ue.geometry,St);else if(Le==="Polygon")Y(Ue.coordinates,St);else if(Le==="MultiPolygon")for(_t=0;_t<Ue.coordinates.length;_t++)Y(Ue.coordinates[_t],St);return Ue})(G,!0);try{if(ee.filter){var ie=a.createExpression(ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ie.result==="error")throw new Error(ie.value.map(function(Ce){return Ce.key+": "+Ce.message}).join(", "));var _e=G.features.filter(function(Ce){return ie.value.evaluate({zoom:0},Ce)});G={type:"FeatureCollection",features:_e}}U._geoJSONIndex=ee.cluster?new Lr(function(Ce){var Ue=Ce.superclusterOptions,St=Ce.clusterProperties;if(!St||!Ue)return Ue;for(var _t={},Le={},pt={accumulated:null,zoom:0},lt={properties:null},De=Object.keys(St),fe=0,Ee=De;fe<Ee.length;fe+=1){var He=Ee[fe],$t=St[He],Ht=$t[0],Qt=a.createExpression($t[1]),Xt=a.createExpression(typeof Ht=="string"?[Ht,["accumulated"],["get",He]]:Ht);_t[He]=Qt.value,Le[He]=Xt.value}return Ue.map=function(ti){lt.properties=ti;for(var er={},yn=0,Gr=De;yn<Gr.length;yn+=1){var _r=Gr[yn];er[_r]=_t[_r].evaluate(pt,lt)}return er},Ue.reduce=function(ti,er){lt.properties=er;for(var yn=0,Gr=De;yn<Gr.length;yn+=1){var _r=Gr[yn];pt.accumulated=ti[_r],ti[_r]=Le[_r].evaluate(pt,lt)}},Ue}(ee)).load(G.features):function(Ce,Ue){return new ma(Ce,Ue)}(G,ee.geojsonVtOptions)}catch(Ce){return Z(Ce)}U.loaded={};var Ge={};if(pe){var Ze=pe.finish();Ze&&(Ge.resourceTiming={},Ge.resourceTiming[ee.source]=JSON.parse(JSON.stringify(Ze)))}Z(null,Ge)})}},F.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},F.prototype.reloadTile=function(U,Z){var ee=this.loaded;return ee&&ee[U.uid]?N.prototype.reloadTile.call(this,U,Z):this.loadTile(U,Z)},F.prototype.loadGeoJSON=function(U,Z){if(U.request)a.getJSON(U.request,Z);else{if(typeof U.data!="string")return Z(new Error("Input data given to '"+U.source+"' is not a valid GeoJSON object."));try{return Z(null,JSON.parse(U.data))}catch{return Z(new Error("Input data given to '"+U.source+"' is not a valid GeoJSON object."))}}},F.prototype.removeSource=function(U,Z){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Z()},F.prototype.getClusterExpansionZoom=function(U,Z){try{Z(null,this._geoJSONIndex.getClusterExpansionZoom(U.clusterId))}catch(ee){Z(ee)}},F.prototype.getClusterChildren=function(U,Z){try{Z(null,this._geoJSONIndex.getChildren(U.clusterId))}catch(ee){Z(ee)}},F.prototype.getClusterLeaves=function(U,Z){try{Z(null,this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset))}catch(ee){Z(ee)}},F}(z),Sn=function(N){var F=this;this.self=N,this.actor=new a.Actor(N,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:z,geojson:Ml},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(U,Z){if(F.workerSourceTypes[U])throw new Error('Worker source with name "'+U+'" already registered.');F.workerSourceTypes[U]=Z},this.self.registerRTLTextPlugin=function(U){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=U.applyArabicShaping,a.plugin.processBidirectionalText=U.processBidirectionalText,a.plugin.processStyledBidirectionalText=U.processStyledBidirectionalText}};return Sn.prototype.setReferrer=function(N,F){this.referrer=F},Sn.prototype.setImages=function(N,F,U){for(var Z in this.availableImages[N]=F,this.workerSources[N]){var ee=this.workerSources[N][Z];for(var pe in ee)ee[pe].availableImages=F}U()},Sn.prototype.setLayers=function(N,F,U){this.getLayerIndex(N).replace(F),U()},Sn.prototype.updateLayers=function(N,F,U){this.getLayerIndex(N).update(F.layers,F.removedIds),U()},Sn.prototype.loadTile=function(N,F,U){this.getWorkerSource(N,F.type,F.source).loadTile(F,U)},Sn.prototype.loadDEMTile=function(N,F,U){this.getDEMWorkerSource(N,F.source).loadTile(F,U)},Sn.prototype.reloadTile=function(N,F,U){this.getWorkerSource(N,F.type,F.source).reloadTile(F,U)},Sn.prototype.abortTile=function(N,F,U){this.getWorkerSource(N,F.type,F.source).abortTile(F,U)},Sn.prototype.removeTile=function(N,F,U){this.getWorkerSource(N,F.type,F.source).removeTile(F,U)},Sn.prototype.removeDEMTile=function(N,F){this.getDEMWorkerSource(N,F.source).removeTile(F)},Sn.prototype.removeSource=function(N,F,U){if(this.workerSources[N]&&this.workerSources[N][F.type]&&this.workerSources[N][F.type][F.source]){var Z=this.workerSources[N][F.type][F.source];delete this.workerSources[N][F.type][F.source],Z.removeSource!==void 0?Z.removeSource(F,U):U()}},Sn.prototype.loadWorkerSource=function(N,F,U){try{this.self.importScripts(F.url),U()}catch(Z){U(Z.toString())}},Sn.prototype.syncRTLPluginState=function(N,F,U){try{a.plugin.setState(F);var Z=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Z!=null){this.self.importScripts(Z);var ee=a.plugin.isParsed();U(ee?void 0:new Error("RTL Text Plugin failed to import scripts from "+Z),ee)}}catch(pe){U(pe.toString())}},Sn.prototype.getAvailableImages=function(N){var F=this.availableImages[N];return F||(F=[]),F},Sn.prototype.getLayerIndex=function(N){var F=this.layerIndexes[N];return F||(F=this.layerIndexes[N]=new b),F},Sn.prototype.getWorkerSource=function(N,F,U){var Z=this;return this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][F]||(this.workerSources[N][F]={}),this.workerSources[N][F][U]||(this.workerSources[N][F][U]=new this.workerSourceTypes[F]({send:function(ee,pe,de){Z.actor.send(ee,pe,de,N)}},this.getLayerIndex(N),this.getAvailableImages(N))),this.workerSources[N][F][U]},Sn.prototype.getDEMWorkerSource=function(N,F){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][F]||(this.demWorkerSources[N][F]=new W),this.demWorkerSources[N][F]},Sn.prototype.enforceCacheSizeLimit=function(N,F){a.enforceCacheSizeLimit(F)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Sn(self)),Sn}),h(["./shared"],function(a){var m=a.createCommonjsModule(function(u){function f(_){return!c(_)}function c(_){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var E,O,k=new Blob([""],{type:"text/javascript"}),R=URL.createObjectURL(k);try{O=new Worker(R),E=!0}catch{E=!1}return O&&O.terminate(),URL.revokeObjectURL(R),E}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var E=document.createElement("canvas");E.width=E.height=1;var O=E.getContext("2d");if(!O)return!1;var k=O.getImageData(0,0,1,1);return k&&k.width===E.width}()?(d[w=_&&_.failIfMajorPerformanceCaveat]===void 0&&(d[w]=function(E){var O=function(R){var $=document.createElement("canvas"),q=Object.create(f.webGLContextAttributes);return q.failIfMajorPerformanceCaveat=R,$.probablySupportsContext?$.probablySupportsContext("webgl",q)||$.probablySupportsContext("experimental-webgl",q):$.supportsContext?$.supportsContext("webgl",q)||$.supportsContext("experimental-webgl",q):$.getContext("webgl",q)||$.getContext("experimental-webgl",q)}(E);if(!O)return!1;var k=O.createShader(O.VERTEX_SHADER);return!(!k||O.isContextLost())&&(O.shaderSource(k,"void main() {}"),O.compileShader(k),O.getShaderParameter(k,O.COMPILE_STATUS)===!0)}(w)),d[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}u.exports?u.exports=f:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=f,window.mapboxgl.notSupportedReason=c);var d={};f.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),g={create:function(u,f,c){var d=a.window.document.createElement(u);return f!==void 0&&(d.className=f),c&&c.appendChild(d),d},createNS:function(u,f){return a.window.document.createElementNS(u,f)}},b=a.window.document&&a.window.document.documentElement.style;function T(u){if(!b)return u[0];for(var f=0;f<u.length;f++)if(u[f]in b)return u[f];return u[0]}var M,I=T(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);g.disableDrag=function(){b&&I&&(M=b[I],b[I]="none")},g.enableDrag=function(){b&&I&&(b[I]=M)};var P=T(["transform","WebkitTransform"]);g.setTransform=function(u,f){u.style[P]=f};var z=!1;try{var V=Object.defineProperty({},"passive",{get:function(){z=!0}});a.window.addEventListener("test",V,V),a.window.removeEventListener("test",V,V)}catch{z=!1}g.addEventListener=function(u,f,c,d){d===void 0&&(d={}),u.addEventListener(f,c,"passive"in d&&z?d:d.capture)},g.removeEventListener=function(u,f,c,d){d===void 0&&(d={}),u.removeEventListener(f,c,"passive"in d&&z?d:d.capture)};var W=function(u){u.preventDefault(),u.stopPropagation(),a.window.removeEventListener("click",W,!0)};function Y(u){var f=u.userImage;return!!(f&&f.render&&f.render())&&(u.data.replace(new Uint8Array(f.data.buffer)),!0)}g.suppressClick=function(){a.window.addEventListener("click",W,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",W,!0)},0)},g.mousePos=function(u,f){var c=u.getBoundingClientRect();return new a.Point(f.clientX-c.left-u.clientLeft,f.clientY-c.top-u.clientTop)},g.touchPos=function(u,f){for(var c=u.getBoundingClientRect(),d=[],_=0;_<f.length;_++)d.push(new a.Point(f[_].clientX-c.left-u.clientLeft,f[_].clientY-c.top-u.clientTop));return d},g.mouseButton=function(u){return a.window.InstallTrigger!==void 0&&u.button===2&&u.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:u.button},g.remove=function(u){u.parentNode&&u.parentNode.removeChild(u)};var X=function(u){function f(){u.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.isLoaded=function(){return this.loaded},f.prototype.setLoaded=function(c){if(this.loaded!==c&&(this.loaded=c,c)){for(var d=0,_=this.requestors;d<_.length;d+=1){var w=_[d];this._notify(w.ids,w.callback)}this.requestors=[]}},f.prototype.getImage=function(c){return this.images[c]},f.prototype.addImage=function(c,d){this._validate(c,d)&&(this.images[c]=d)},f.prototype._validate=function(c,d){var _=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+c+'" has invalid "stretchX" value'))),_=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+c+'" has invalid "stretchY" value'))),_=!1),this._validateContent(d.content,d)||(this.fire(new a.ErrorEvent(new Error('Image "'+c+'" has invalid "content" value'))),_=!1),_},f.prototype._validateStretch=function(c,d){if(!c)return!0;for(var _=0,w=0,E=c;w<E.length;w+=1){var O=E[w];if(O[0]<_||O[1]<O[0]||d<O[1])return!1;_=O[1]}return!0},f.prototype._validateContent=function(c,d){return!(c&&(c.length!==4||c[0]<0||d.data.width<c[0]||c[1]<0||d.data.height<c[1]||c[2]<0||d.data.width<c[2]||c[3]<0||d.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))},f.prototype.updateImage=function(c,d){d.version=this.images[c].version+1,this.images[c]=d,this.updatedImages[c]=!0},f.prototype.removeImage=function(c){var d=this.images[c];delete this.images[c],delete this.patterns[c],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()},f.prototype.listImages=function(){return Object.keys(this.images)},f.prototype.getImages=function(c,d){var _=!0;if(!this.isLoaded())for(var w=0,E=c;w<E.length;w+=1)this.images[E[w]]||(_=!1);this.isLoaded()||_?this._notify(c,d):this.requestors.push({ids:c,callback:d})},f.prototype._notify=function(c,d){for(var _={},w=0,E=c;w<E.length;w+=1){var O=E[w];this.images[O]||this.fire(new a.Event("styleimagemissing",{id:O}));var k=this.images[O];k?_[O]={data:k.data.clone(),pixelRatio:k.pixelRatio,sdf:k.sdf,version:k.version,stretchX:k.stretchX,stretchY:k.stretchY,content:k.content,hasRenderCallback:Boolean(k.userImage&&k.userImage.render)}:a.warnOnce('Image "'+O+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}d(null,_)},f.prototype.getPixelSize=function(){var c=this.atlasImage;return{width:c.width,height:c.height}},f.prototype.getPattern=function(c){var d=this.patterns[c],_=this.getImage(c);if(!_)return null;if(d&&d.position.version===_.version)return d.position;if(d)d.position.version=_.version;else{var w={w:_.data.width+2,h:_.data.height+2,x:0,y:0},E=new a.ImagePosition(w,_);this.patterns[c]={bin:w,position:E}}return this._updatePatternAtlas(),this.patterns[c].position},f.prototype.bind=function(c){var d=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(c,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)},f.prototype._updatePatternAtlas=function(){var c=[];for(var d in this.patterns)c.push(this.patterns[d].bin);var _=a.potpack(c),w=_.w,E=_.h,O=this.atlasImage;for(var k in O.resize({width:w||1,height:E||1}),this.patterns){var R=this.patterns[k].bin,$=R.x+1,q=R.y+1,H=this.images[k].data,ne=H.width,re=H.height;a.RGBAImage.copy(H,O,{x:0,y:0},{x:$,y:q},{width:ne,height:re}),a.RGBAImage.copy(H,O,{x:0,y:re-1},{x:$,y:q-1},{width:ne,height:1}),a.RGBAImage.copy(H,O,{x:0,y:0},{x:$,y:q+re},{width:ne,height:1}),a.RGBAImage.copy(H,O,{x:ne-1,y:0},{x:$-1,y:q},{width:1,height:re}),a.RGBAImage.copy(H,O,{x:0,y:0},{x:$+ne,y:q},{width:1,height:re})}this.dirty=!0},f.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},f.prototype.dispatchRenderCallbacks=function(c){for(var d=0,_=c;d<_.length;d+=1){var w=_[d];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var E=this.images[w];Y(E)&&this.updateImage(w,E)}}},f}(a.Evented),ue=ze,he=ze,ve=1e20;function ze(u,f,c,d,_,w){this.fontSize=u||24,this.buffer=f===void 0?3:f,this.cutoff=d||.25,this.fontFamily=_||"sans-serif",this.fontWeight=w||"normal",this.radius=c||8;var E=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=E,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.d=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Int16Array(E),this.middle=Math.round(E/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Fe(u,f,c,d,_,w,E){for(var O=0;O<f;O++){for(var k=0;k<c;k++)d[k]=u[k*f+O];for(Pe(d,_,w,E,c),k=0;k<c;k++)u[k*f+O]=_[k]}for(k=0;k<c;k++){for(O=0;O<f;O++)d[O]=u[k*f+O];for(Pe(d,_,w,E,f),O=0;O<f;O++)u[k*f+O]=Math.sqrt(_[O])}}function Pe(u,f,c,d,_){c[0]=0,d[0]=-ve,d[1]=+ve;for(var w=1,E=0;w<_;w++){for(var O=(u[w]+w*w-(u[c[E]]+c[E]*c[E]))/(2*w-2*c[E]);O<=d[E];)E--,O=(u[w]+w*w-(u[c[E]]+c[E]*c[E]))/(2*w-2*c[E]);c[++E]=w,d[E]=O,d[E+1]=+ve}for(w=0,E=0;w<_;w++){for(;d[E+1]<w;)E++;f[w]=(w-c[E])*(w-c[E])+u[c[E]]}}ze.prototype.draw=function(u){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(u,this.buffer,this.middle);for(var f=this.ctx.getImageData(0,0,this.size,this.size),c=new Uint8ClampedArray(this.size*this.size),d=0;d<this.size*this.size;d++){var _=f.data[4*d+3]/255;this.gridOuter[d]=_===1?0:_===0?ve:Math.pow(Math.max(0,.5-_),2),this.gridInner[d]=_===1?ve:_===0?0:Math.pow(Math.max(0,_-.5),2)}for(Fe(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Fe(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),d=0;d<this.size*this.size;d++)c[d]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[d]-this.gridInner[d])/this.radius+this.cutoff))));return c},ue.default=he;var Se=function(u,f){this.requestManager=u,this.localIdeographFontFamily=f,this.entries={}};Se.prototype.setURL=function(u){this.url=u},Se.prototype.getGlyphs=function(u,f){var c=this,d=[];for(var _ in u)for(var w=0,E=u[_];w<E.length;w+=1)d.push({stack:_,id:E[w]});a.asyncAll(d,function(O,k){var R=O.stack,$=O.id,q=c.entries[R];q||(q=c.entries[R]={glyphs:{},requests:{},ranges:{}});var H=q.glyphs[$];if(H===void 0){if(H=c._tinySDF(q,R,$))return q.glyphs[$]=H,void k(null,{stack:R,id:$,glyph:H});var ne=Math.floor($/256);if(256*ne>65535)k(new Error("glyphs > 65535 not supported"));else if(q.ranges[ne])k(null,{stack:R,id:$,glyph:H});else{var re=q.requests[ne];re||(re=q.requests[ne]=[],Se.loadGlyphRange(R,ne,c.url,c.requestManager,function(le,J){if(J){for(var se in J)c._doesCharSupportLocalGlyph(+se)||(q.glyphs[+se]=J[+se]);q.ranges[ne]=!0}for(var me=0,xe=re;me<xe.length;me+=1)(0,xe[me])(le,J);delete q.requests[ne]})),re.push(function(le,J){le?k(le):J&&k(null,{stack:R,id:$,glyph:J[$]||null})})}}else k(null,{stack:R,id:$,glyph:H})},function(O,k){if(O)f(O);else if(k){for(var R={},$=0,q=k;$<q.length;$+=1){var H=q[$],ne=H.stack,re=H.id,le=H.glyph;(R[ne]||(R[ne]={}))[re]=le&&{id:le.id,bitmap:le.bitmap.clone(),metrics:le.metrics}}f(null,R)}})},Se.prototype._doesCharSupportLocalGlyph=function(u){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](u)||a.isChar["Hangul Syllables"](u)||a.isChar.Hiragana(u)||a.isChar.Katakana(u))},Se.prototype._tinySDF=function(u,f,c){var d=this.localIdeographFontFamily;if(d&&this._doesCharSupportLocalGlyph(c)){var _=u.tinySDF;if(!_){var w="400";/bold/i.test(f)?w="900":/medium/i.test(f)?w="500":/light/i.test(f)&&(w="200"),_=u.tinySDF=new Se.TinySDF(24,3,8,.25,d,w)}return{id:c,bitmap:new a.AlphaImage({width:30,height:30},_.draw(String.fromCharCode(c))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Se.loadGlyphRange=function(u,f,c,d,_){var w=256*f,E=w+255,O=d.transformRequest(d.normalizeGlyphsURL(c).replace("{fontstack}",u).replace("{range}",w+"-"+E),a.ResourceType.Glyphs);a.getArrayBuffer(O,function(k,R){if(k)_(k);else if(R){for(var $={},q=0,H=a.parseGlyphPBF(R);q<H.length;q+=1){var ne=H[q];$[ne.id]=ne}_(null,$)}})},Se.TinySDF=ue;var Ie=function(){this.specification=a.styleSpec.light.position};Ie.prototype.possiblyEvaluate=function(u,f){return a.sphericalToCartesian(u.expression.evaluate(f))},Ie.prototype.interpolate=function(u,f,c){return{x:a.number(u.x,f.x,c),y:a.number(u.y,f.y,c),z:a.number(u.z,f.z,c)}};var Je=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new Ie,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),$e=function(u){function f(c){u.call(this),this._transitionable=new a.Transitionable(Je),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getLight=function(){return this._transitionable.serialize()},f.prototype.setLight=function(c,d){if(d===void 0&&(d={}),!this._validate(a.validateLight,c,d))for(var _ in c){var w=c[_];a.endsWith(_,"-transition")?this._transitionable.setTransition(_.slice(0,-11),w):this._transitionable.setValue(_,w)}},f.prototype.updateTransitions=function(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)},f.prototype.hasTransition=function(){return this._transitioning.hasTransition()},f.prototype.recalculate=function(c){this.properties=this._transitioning.possiblyEvaluate(c)},f.prototype._validate=function(c,d,_){return(!_||_.validate!==!1)&&a.emitValidationErrors(this,c.call(a.validateStyle,a.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},f}(a.Evented),st=function(u,f){this.width=u,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};st.prototype.getDash=function(u,f){var c=u.join(",")+String(f);return this.dashEntry[c]||(this.dashEntry[c]=this.addDash(u,f)),this.dashEntry[c]},st.prototype.getDashRanges=function(u,f,c){var d=[],_=u.length%2==1?-u[u.length-1]*c:0,w=u[0]*c,E=!0;d.push({left:_,right:w,isDash:E,zeroLength:u[0]===0});for(var O=u[0],k=1;k<u.length;k++){var R=u[k];d.push({left:_=O*c,right:w=(O+=R)*c,isDash:E=!E,zeroLength:R===0})}return d},st.prototype.addRoundDash=function(u,f,c){for(var d=f/2,_=-c;_<=c;_++)for(var w=this.width*(this.nextRow+c+_),E=0,O=u[E],k=0;k<this.width;k++){k/O.right>1&&(O=u[++E]);var R=Math.abs(k-O.left),$=Math.abs(k-O.right),q=Math.min(R,$),H=void 0,ne=_/c*(d+1);if(O.isDash){var re=d-Math.abs(ne);H=Math.sqrt(q*q+re*re)}else H=d-Math.sqrt(q*q+ne*ne);this.data[w+k]=Math.max(0,Math.min(255,H+128))}},st.prototype.addRegularDash=function(u){for(var f=u.length-1;f>=0;--f){var c=u[f],d=u[f+1];c.zeroLength?u.splice(f,1):d&&d.isDash===c.isDash&&(d.left=c.left,u.splice(f,1))}var _=u[0],w=u[u.length-1];_.isDash===w.isDash&&(_.left=w.left-this.width,w.right=_.right+this.width);for(var E=this.width*this.nextRow,O=0,k=u[O],R=0;R<this.width;R++){R/k.right>1&&(k=u[++O]);var $=Math.abs(R-k.left),q=Math.abs(R-k.right),H=Math.min($,q);this.data[E+R]=Math.max(0,Math.min(255,(k.isDash?H:-H)+128))}},st.prototype.addDash=function(u,f){var c=f?7:0,d=2*c+1;if(this.nextRow+d>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var _=0,w=0;w<u.length;w++)_+=u[w];if(_!==0){var E=this.width/_,O=this.getDashRanges(u,this.width,E);f?this.addRoundDash(O,E,c):this.addRegularDash(O)}var k={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:_};return this.nextRow+=d,this.dirty=!0,k},st.prototype.bind=function(u){var f=u.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))};var be=function u(f,c){this.workerPool=f,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var d=this.workerPool.acquire(this.id),_=0;_<d.length;_++){var w=new u.Actor(d[_],c,this.id);w.name="Worker "+_,this.actors.push(w)}};function Ye(u,f,c){var d=function(_,w){if(_)return c(_);if(w){var E=a.pick(a.extend(w,u),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(E.vectorLayers=w.vector_layers,E.vectorLayerIds=E.vectorLayers.map(function(O){return O.id})),E.tiles=f.canonicalizeTileset(E,u.url),c(null,E)}};return u.url?a.getJSON(f.transformRequest(f.normalizeSourceURL(u.url),a.ResourceType.Source),d):a.browser.frame(function(){return d(null,u)})}be.prototype.broadcast=function(u,f,c){a.asyncAll(this.actors,function(d,_){d.send(u,f,_)},c=c||function(){})},be.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},be.prototype.remove=function(){this.actors.forEach(function(u){u.remove()}),this.actors=[],this.workerPool.release(this.id)},be.Actor=a.Actor;var ht=function(u,f,c){this.bounds=a.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=f||0,this.maxzoom=c||24};ht.prototype.validateBounds=function(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]},ht.prototype.contains=function(u){var f=Math.pow(2,u.z),c=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*f),d=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*f),_=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*f),w=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*f);return u.x>=c&&u.x<_&&u.y>=d&&u.y<w};var vt=function(u){function f(c,d,_,w){if(u.call(this),this.id=c,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(d,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.load=function(){var c=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ye(this._options,this.map._requestManager,function(d,_){c._tileJSONRequest=null,c._loaded=!0,d?c.fire(new a.ErrorEvent(d)):_&&(a.extend(c,_),_.bounds&&(c.tileBounds=new ht(_.bounds,c.minzoom,c.maxzoom)),a.postTurnstileEvent(_.tiles,c.map._requestManager._customAccessToken),a.postMapLoadEvent(_.tiles,c.map._getMapId(),c.map._requestManager._skuToken,c.map._requestManager._customAccessToken),c.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),c.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},f.prototype.loaded=function(){return this._loaded},f.prototype.hasTile=function(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)},f.prototype.onAdd=function(c){this.map=c,this.load()},f.prototype.setSourceProperty=function(c){this._tileJSONRequest&&this._tileJSONRequest.cancel(),c(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},f.prototype.setTiles=function(c){var d=this;return this.setSourceProperty(function(){d._options.tiles=c}),this},f.prototype.setUrl=function(c){var d=this;return this.setSourceProperty(function(){d.url=c,d._options.url=c}),this},f.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},f.prototype.serialize=function(){return a.extend({},this._options)},f.prototype.loadTile=function(c,d){var _=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(_,a.ResourceType.Tile),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(O,k){return delete c.request,c.aborted?d(null):O&&O.status!==404?d(O):(k&&k.resourceTiming&&(c.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&c.setExpiryData(k),c.loadVectorData(k,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired"?c.state==="loading"?c.reloadCallback=d:c.request=c.actor.send("reloadTile",w,E.bind(this)):(c.actor=this.dispatcher.getActor(),c.request=c.actor.send("loadTile",w,E.bind(this)))},f.prototype.abortTile=function(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id},void 0)},f.prototype.unloadTile=function(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id},void 0)},f.prototype.hasTransition=function(){return!1},f}(a.Evented),kt=function(u){function f(c,d,_,w){u.call(this),this.id=c,this.dispatcher=_,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},d),a.extend(this,a.pick(d,["url","scheme","tileSize"]))}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.load=function(){var c=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ye(this._options,this.map._requestManager,function(d,_){c._tileJSONRequest=null,c._loaded=!0,d?c.fire(new a.ErrorEvent(d)):_&&(a.extend(c,_),_.bounds&&(c.tileBounds=new ht(_.bounds,c.minzoom,c.maxzoom)),a.postTurnstileEvent(_.tiles),a.postMapLoadEvent(_.tiles,c.map._getMapId(),c.map._requestManager._skuToken),c.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),c.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},f.prototype.loaded=function(){return this._loaded},f.prototype.onAdd=function(c){this.map=c,this.load()},f.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},f.prototype.serialize=function(){return a.extend({},this._options)},f.prototype.hasTile=function(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)},f.prototype.loadTile=function(c,d){var _=this,w=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);c.request=a.getImage(this.map._requestManager.transformRequest(w,a.ResourceType.Tile),function(E,O){if(delete c.request,c.aborted)c.state="unloaded",d(null);else if(E)c.state="errored",d(E);else if(O){_.map._refreshExpiredTiles&&c.setExpiryData(O),delete O.cacheControl,delete O.expires;var k=_.map.painter.context,R=k.gl;c.texture=_.map.painter.getTileTexture(O.width),c.texture?c.texture.update(O,{useMipmap:!0}):(c.texture=new a.Texture(k,O,R.RGBA,{useMipmap:!0}),c.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&R.texParameterf(R.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),c.state="loaded",a.cacheEntryPossiblyAdded(_.dispatcher),d(null)}})},f.prototype.abortTile=function(c,d){c.request&&(c.request.cancel(),delete c.request),d()},f.prototype.unloadTile=function(c,d){c.texture&&this.map.painter.saveTileTexture(c.texture),d()},f.prototype.hasTransition=function(){return!1},f}(a.Evented),rr=function(u){function f(c,d,_,w){u.call(this,c,d,_,w),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},f.prototype.loadTile=function(c,d){var _=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(E,O){E&&(c.state="errored",d(E)),O&&(c.dem=O,c.needsHillshadePrepare=!0,c.state="loaded",d(null))}c.request=a.getImage(this.map._requestManager.transformRequest(_,a.ResourceType.Tile),function(E,O){if(delete c.request,c.aborted)c.state="unloaded",d(null);else if(E)c.state="errored",d(E);else if(O){this.map._refreshExpiredTiles&&c.setExpiryData(O),delete O.cacheControl,delete O.expires;var k=a.window.ImageBitmap&&O instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?O:a.browser.getImageData(O,1),R={uid:c.uid,coord:c.tileID,source:this.id,rawImageData:k,encoding:this.encoding};c.actor&&c.state!=="expired"||(c.actor=this.dispatcher.getActor(),c.actor.send("loadDEMTile",R,w.bind(this)))}}.bind(this)),c.neighboringTiles=this._getNeighboringTiles(c.tileID)},f.prototype._getNeighboringTiles=function(c){var d=c.canonical,_=Math.pow(2,d.z),w=(d.x-1+_)%_,E=d.x===0?c.wrap-1:c.wrap,O=(d.x+1+_)%_,k=d.x+1===_?c.wrap+1:c.wrap,R={};return R[new a.OverscaledTileID(c.overscaledZ,E,d.z,w,d.y).key]={backfilled:!1},R[new a.OverscaledTileID(c.overscaledZ,k,d.z,O,d.y).key]={backfilled:!1},d.y>0&&(R[new a.OverscaledTileID(c.overscaledZ,E,d.z,w,d.y-1).key]={backfilled:!1},R[new a.OverscaledTileID(c.overscaledZ,c.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},R[new a.OverscaledTileID(c.overscaledZ,k,d.z,O,d.y-1).key]={backfilled:!1}),d.y+1<_&&(R[new a.OverscaledTileID(c.overscaledZ,E,d.z,w,d.y+1).key]={backfilled:!1},R[new a.OverscaledTileID(c.overscaledZ,c.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},R[new a.OverscaledTileID(c.overscaledZ,k,d.z,O,d.y+1).key]={backfilled:!1}),R},f.prototype.unloadTile=function(c){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&c.actor.send("removeDEMTile",{uid:c.uid,source:this.id})},f}(kt),Nn=function(u){function f(c,d,_,w){u.call(this),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=_.getActor(),this.setEventedParent(w),this._data=d.data,this._options=a.extend({},d),this._collectResourceTiming=d.collectResourceTiming,this._resourceTiming=[],d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;var E=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*E,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*E,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?Math.min(d.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:a.EXTENT,radius:(d.clusterRadius||50)*E,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.load=function(){var c=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(d){if(d)c.fire(new a.ErrorEvent(d));else{var _={dataType:"source",sourceDataType:"metadata"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(_.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new a.Event("data",_))}})},f.prototype.onAdd=function(c){this.map=c,this.load()},f.prototype.setData=function(c){var d=this;return this._data=c,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(_){if(_)d.fire(new a.ErrorEvent(_));else{var w={dataType:"source",sourceDataType:"content"};d._collectResourceTiming&&d._resourceTiming&&d._resourceTiming.length>0&&(w.resourceTiming=d._resourceTiming,d._resourceTiming=[]),d.fire(new a.Event("data",w))}}),this},f.prototype.getClusterExpansionZoom=function(c,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:c,source:this.id},d),this},f.prototype.getClusterChildren=function(c,d){return this.actor.send("geojson.getClusterChildren",{clusterId:c,source:this.id},d),this},f.prototype.getClusterLeaves=function(c,d,_,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:c,limit:d,offset:_},w),this},f.prototype._updateWorkerData=function(c){var d=this;this._loaded=!1;var _=a.extend({},this.workerOptions),w=this._data;typeof w=="string"?(_.request=this.map._requestManager.transformRequest(a.browser.resolveURL(w),a.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(w),this.actor.send(this.type+".loadData",_,function(E,O){d._removed||O&&O.abandoned||(d._loaded=!0,O&&O.resourceTiming&&O.resourceTiming[d.id]&&(d._resourceTiming=O.resourceTiming[d.id].slice(0)),d.actor.send(d.type+".coalesce",{source:_.source},null),c(E))})},f.prototype.loaded=function(){return this._loaded},f.prototype.loadTile=function(c,d){var _=this,w=c.actor?"reloadTile":"loadTile";c.actor=this.actor,c.request=this.actor.send(w,{type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(E,O){return delete c.request,c.unloadVectorData(),c.aborted?d(null):E?d(E):(c.loadVectorData(O,_.map.painter,w==="reloadTile"),d(null))})},f.prototype.abortTile=function(c){c.request&&(c.request.cancel(),delete c.request),c.aborted=!0},f.prototype.unloadTile=function(c){c.unloadVectorData(),this.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})},f.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},f.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},f.prototype.hasTransition=function(){return!1},f}(a.Evented),zr=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),mr=function(u){function f(c,d,_,w){u.call(this),this.id=c,this.dispatcher=_,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=d}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.load=function(c,d){var _=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(w,E){_._loaded=!0,w?_.fire(new a.ErrorEvent(w)):E&&(_.image=E,c&&(_.coordinates=c),d&&d(),_._finishLoading())})},f.prototype.loaded=function(){return this._loaded},f.prototype.updateImage=function(c){var d=this;return this.image&&c.url?(this.options.url=c.url,this.load(c.coordinates,function(){d.texture=null}),this):this},f.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},f.prototype.onAdd=function(c){this.map=c,this.load()},f.prototype.setCoordinates=function(c){var d=this;this.coordinates=c;var _=c.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(E){for(var O=1/0,k=1/0,R=-1/0,$=-1/0,q=0,H=E;q<H.length;q+=1){var ne=H[q];O=Math.min(O,ne.x),k=Math.min(k,ne.y),R=Math.max(R,ne.x),$=Math.max($,ne.y)}var re=Math.max(R-O,$-k),le=Math.max(0,Math.floor(-Math.log(re)/Math.LN2)),J=Math.pow(2,le);return new a.CanonicalTileID(le,Math.floor((O+R)/2*J),Math.floor((k+$)/2*J))}(_),this.minzoom=this.maxzoom=this.tileID.z;var w=_.map(function(E){return d.tileID.getTilePoint(E)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},f.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var c=this.map.painter.context,d=c.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,zr.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(c,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},f.prototype.loadTile=function(c,d){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},d(null)):(c.state="errored",d(null))},f.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},f.prototype.hasTransition=function(){return!1},f}(a.Evented),Jn=function(u){function f(c,d,_,w){u.call(this,c,d,_,w),this.roundZoom=!0,this.type="video",this.options=d}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.load=function(){var c=this;this._loaded=!1;var d=this.options;this.urls=[];for(var _=0,w=d.urls;_<w.length;_+=1)this.urls.push(this.map._requestManager.transformRequest(w[_],a.ResourceType.Source).url);a.getVideo(this.urls,function(E,O){c._loaded=!0,E?c.fire(new a.ErrorEvent(E)):O&&(c.video=O,c.video.loop=!0,c.video.setAttribute("playsinline",""),c.video.addEventListener("playing",function(){c.map.triggerRepaint()}),c.map&&c.video.play(),c._finishLoading())})},f.prototype.pause=function(){this.video&&this.video.pause()},f.prototype.play=function(){this.video&&this.video.play()},f.prototype.seek=function(c){if(this.video){var d=this.video.seekable;c<d.start(0)||c>d.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+d.start(0)+" and "+d.end(0)+"-second mark."))):this.video.currentTime=c}},f.prototype.getVideo=function(){return this.video},f.prototype.onAdd=function(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},f.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var c=this.map.painter.context,d=c.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,zr.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(c,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},f.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},f.prototype.hasTransition=function(){return this.video&&!this.video.paused},f}(mr),Fr=function(u){function f(c,d,_,w){u.call(this,c,d,_,w),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(function(E){return!Array.isArray(E)||E.length!==2||E.some(function(O){return typeof O!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+c,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+c,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+c,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+c,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+c,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},f.prototype.getCanvas=function(){return this.canvas},f.prototype.onAdd=function(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()},f.prototype.onRemove=function(){this.pause()},f.prototype.prepare=function(){var c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var d=this.map.painter.context,_=d.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,zr.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(d,this.canvas,_.RGBA,{premultiply:!0}),this.tiles){var E=this.tiles[w];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},f.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},f.prototype.hasTransition=function(){return this._playing},f.prototype._hasInvalidDimensions=function(){for(var c=0,d=[this.canvas.width,this.canvas.height];c<d.length;c+=1){var _=d[c];if(isNaN(_)||_<=0)return!0}return!1},f}(mr),Gi={vector:vt,raster:kt,"raster-dem":rr,geojson:Nn,video:Jn,image:mr,canvas:Fr};function qr(u,f){var c=a.identity([]);return a.translate(c,c,[1,1,0]),a.scale(c,c,[.5*u.width,.5*u.height,1]),a.multiply(c,c,u.calculatePosMatrix(f.toUnwrapped()))}function Lr(u,f,c,d,_,w){var E=function(le,J,se){if(le)for(var me=0,xe=le;me<xe.length;me+=1){var Ae=J[xe[me]];if(Ae&&Ae.source===se&&Ae.type==="fill-extrusion")return!0}else for(var Me in J){var ke=J[Me];if(ke.source===se&&ke.type==="fill-extrusion")return!0}return!1}(_&&_.layers,f,u.id),O=w.maxPitchScaleFactor(),k=u.tilesIn(d,O,E);k.sort(qn);for(var R=[],$=0,q=k;$<q.length;$+=1){var H=q[$];R.push({wrappedTileID:H.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(f,c,u._state,H.queryGeometry,H.cameraQueryGeometry,H.scale,_,w,O,qr(u.transform,H.tileID))})}var ne=function(le){for(var J={},se={},me=0,xe=le;me<xe.length;me+=1){var Ae=xe[me],Me=Ae.queryResults,ke=Ae.wrappedTileID,je=se[ke]=se[ke]||{};for(var it in Me)for(var tt=Me[it],gt=je[it]=je[it]||{},Nt=J[it]=J[it]||[],Ut=0,Bt=tt;Ut<Bt.length;Ut+=1){var Cr=Bt[Ut];gt[Cr.featureIndex]||(gt[Cr.featureIndex]=!0,Nt.push(Cr))}}return J}(R);for(var re in ne)ne[re].forEach(function(le){var J=le.feature,se=u.getFeatureState(J.layer["source-layer"],J.id);J.source=J.layer.source,J.layer["source-layer"]&&(J.sourceLayer=J.layer["source-layer"]),J.state=se});return ne}function qn(u,f){var c=u.tileID,d=f.tileID;return c.overscaledZ-d.overscaledZ||c.canonical.y-d.canonical.y||c.wrap-d.wrap||c.canonical.x-d.canonical.x}var Mr=function(u,f){this.max=u,this.onRemove=f,this.reset()};Mr.prototype.reset=function(){for(var u in this.data)for(var f=0,c=this.data[u];f<c.length;f+=1){var d=c[f];d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value)}return this.data={},this.order=[],this},Mr.prototype.add=function(u,f,c){var d=this,_=u.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);var w={value:f,timeout:void 0};if(c!==void 0&&(w.timeout=setTimeout(function(){d.remove(u,w)},c)),this.data[_].push(w),this.order.push(_),this.order.length>this.max){var E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this},Mr.prototype.has=function(u){return u.wrapped().key in this.data},Mr.prototype.getAndRemove=function(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null},Mr.prototype._getAndRemoveByKey=function(u){var f=this.data[u].shift();return f.timeout&&clearTimeout(f.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),f.value},Mr.prototype.getByKey=function(u){var f=this.data[u];return f?f[0].value:null},Mr.prototype.get=function(u){return this.has(u)?this.data[u.wrapped().key][0].value:null},Mr.prototype.remove=function(u,f){if(!this.has(u))return this;var c=u.wrapped().key,d=f===void 0?0:this.data[c].indexOf(f),_=this.data[c][d];return this.data[c].splice(d,1),_.timeout&&clearTimeout(_.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(_.value),this.order.splice(this.order.indexOf(c),1),this},Mr.prototype.setMaxSize=function(u){for(this.max=u;this.order.length>this.max;){var f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this},Mr.prototype.filter=function(u){var f=[];for(var c in this.data)for(var d=0,_=this.data[c];d<_.length;d+=1){var w=_[d];u(w.value)||f.push(w)}for(var E=0,O=f;E<O.length;E+=1){var k=O[E];this.remove(k.value.tileID,k)}};var Mn=function(u,f,c){this.context=u;var d=u.gl;this.buffer=d.createBuffer(),this.dynamicDraw=Boolean(c),this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer};Mn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Mn.prototype.updateData=function(u){var f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)},Mn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ci={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Wn=function(u,f,c,d){this.length=f.length,this.attributes=c,this.itemSize=f.bytesPerElement,this.dynamicDraw=d,this.context=u;var _=u.gl;this.buffer=_.createBuffer(),u.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer};Wn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Wn.prototype.updateData=function(u){var f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,u.arrayBuffer)},Wn.prototype.enableAttributes=function(u,f){for(var c=0;c<this.attributes.length;c++){var d=f.attributes[this.attributes[c].name];d!==void 0&&u.enableVertexAttribArray(d)}},Wn.prototype.setVertexAttribPointers=function(u,f,c){for(var d=0;d<this.attributes.length;d++){var _=this.attributes[d],w=f.attributes[_.name];w!==void 0&&u.vertexAttribPointer(w,_.components,u[ci[_.type]],!1,this.itemSize,_.offset+this.itemSize*(c||0))}},Wn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var K=function(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};K.prototype.get=function(){return this.current},K.prototype.set=function(u){},K.prototype.getDefault=function(){return this.default},K.prototype.setDefault=function(){this.set(this.default)};var ye=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return a.Color.transparent},f.prototype.set=function(c){var d=this.current;(c.r!==d.r||c.g!==d.g||c.b!==d.b||c.a!==d.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)},f}(K),Ne=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return 1},f.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)},f}(K),qe=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return 0},f.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)},f}(K),We=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return[!0,!0,!0,!0]},f.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)},f}(K),rt=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return!0},f.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)},f}(K),mt=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return 255},f.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)},f}(K),et=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},f.prototype.set=function(c){var d=this.current;(c.func!==d.func||c.ref!==d.ref||c.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)},f}(K),ut=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){var c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]},f.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)},f}(K),Qe=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return!1},f.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;c?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=c,this.dirty=!1}},f}(K),It=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return[0,1]},f.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)},f}(K),bt=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return!1},f.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;c?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=c,this.dirty=!1}},f}(K),Lt=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return this.gl.LESS},f.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)},f}(K),Gt=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return!1},f.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;c?d.enable(d.BLEND):d.disable(d.BLEND),this.current=c,this.dirty=!1}},f}(K),yr=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){var c=this.gl;return[c.ONE,c.ZERO]},f.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)},f}(K),jr=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return a.Color.transparent},f.prototype.set=function(c){var d=this.current;(c.r!==d.r||c.g!==d.g||c.b!==d.b||c.a!==d.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)},f}(K),Dr=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return this.gl.FUNC_ADD},f.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)},f}(K),Qr=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return!1},f.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;c?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=c,this.dirty=!1}},f}(K),Qn=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return this.gl.BACK},f.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)},f}(K),$i=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return this.gl.CCW},f.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)},f}(K),_o=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)},f}(K),ei=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return this.gl.TEXTURE0},f.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)},f}(K),Ri=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){var c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]},f.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)},f}(K),In=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,c),this.current=c,this.dirty=!1}},f}(K),hi=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,c),this.current=c,this.dirty=!1}},f}(K),ss=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.bindTexture(d.TEXTURE_2D,c),this.current=c,this.dirty=!1}},f}(K),Xo=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}},f}(K),ls=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(c){var d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1},f}(K),ma=function(u){function f(c){u.call(this,c),this.vao=c.extVertexArrayObject}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)},f}(K),pn=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return 4},f.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}},f}(K),Fo=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return!1},f.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}},f}(K),Ml=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return!1},f.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}},f}(K),Sn=function(u){function f(c,d){u.call(this,c),this.context=c,this.parent=d}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f}(K),N=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.setDirty=function(){this.dirty=!0},f.prototype.set=function(c){if(c!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}},f}(Sn),F=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.set=function(c){if(c!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,c),this.current=c,this.dirty=!1}},f}(Sn),U=function(u,f,c,d){this.context=u,this.width=f,this.height=c;var _=this.framebuffer=u.gl.createFramebuffer();this.colorAttachment=new N(u,_),d&&(this.depthAttachment=new F(u,_))};U.prototype.destroy=function(){var u=this.context.gl,f=this.colorAttachment.get();if(f&&u.deleteTexture(f),this.depthAttachment){var c=this.depthAttachment.get();c&&u.deleteRenderbuffer(c)}u.deleteFramebuffer(this.framebuffer)};var Z=function(u,f,c){this.func=u,this.mask=f,this.range=c};Z.ReadOnly=!1,Z.ReadWrite=!0,Z.disabled=new Z(519,Z.ReadOnly,[0,1]);var ee=function(u,f,c,d,_,w){this.test=u,this.ref=f,this.mask=c,this.fail=d,this.depthFail=_,this.pass=w};ee.disabled=new ee({func:519,mask:0},0,0,7680,7680,7680);var pe=function(u,f,c){this.blendFunction=u,this.blendColor=f,this.mask=c};pe.disabled=new pe(pe.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),pe.unblended=new pe(pe.Replace,a.Color.transparent,[!0,!0,!0,!0]),pe.alphaBlended=new pe([1,771],a.Color.transparent,[!0,!0,!0,!0]);var de=function(u,f,c){this.enable=u,this.mode=f,this.frontFace=c};de.disabled=new de(!1,1029,2305),de.backCCW=new de(!0,1029,2305);var G=function(u){this.gl=u,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ye(this),this.clearDepth=new Ne(this),this.clearStencil=new qe(this),this.colorMask=new We(this),this.depthMask=new rt(this),this.stencilMask=new mt(this),this.stencilFunc=new et(this),this.stencilOp=new ut(this),this.stencilTest=new Qe(this),this.depthRange=new It(this),this.depthTest=new bt(this),this.depthFunc=new Lt(this),this.blend=new Gt(this),this.blendFunc=new yr(this),this.blendColor=new jr(this),this.blendEquation=new Dr(this),this.cullFace=new Qr(this),this.cullFaceSide=new Qn(this),this.frontFace=new $i(this),this.program=new _o(this),this.activeTexture=new ei(this),this.viewport=new Ri(this),this.bindFramebuffer=new In(this),this.bindRenderbuffer=new hi(this),this.bindTexture=new ss(this),this.bindVertexBuffer=new Xo(this),this.bindElementBuffer=new ls(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ma(this),this.pixelStoreUnpack=new pn(this),this.pixelStoreUnpackPremultiplyAlpha=new Fo(this),this.pixelStoreUnpackFlipY=new Ml(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=u.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(u.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)};G.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},G.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},G.prototype.createIndexBuffer=function(u,f){return new Mn(this,u,f)},G.prototype.createVertexBuffer=function(u,f,c){return new Wn(this,u,f,c)},G.prototype.createRenderbuffer=function(u,f,c){var d=this.gl,_=d.createRenderbuffer();return this.bindRenderbuffer.set(_),d.renderbufferStorage(d.RENDERBUFFER,u,f,c),this.bindRenderbuffer.set(null),_},G.prototype.createFramebuffer=function(u,f,c){return new U(this,u,f,c)},G.prototype.clear=function(u){var f=u.color,c=u.depth,d=this.gl,_=0;f&&(_|=d.COLOR_BUFFER_BIT,this.clearColor.set(f),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(_|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),d.clear(_)},G.prototype.setCullFace=function(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))},G.prototype.setDepthMode=function(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)},G.prototype.setStencilMode=function(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)},G.prototype.setColorMode=function(u){a.deepEqual(u.blendFunction,pe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)},G.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ie=function(u){function f(c,d,_){var w=this;u.call(this),this.id=c,this.dispatcher=_,this.on("data",function(E){E.dataType==="source"&&E.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(E,O,k,R){var $=new Gi[O.type](E,O,k,R);if($.id!==E)throw new Error("Expected Source id to be "+E+" instead of "+$.id);return a.bindAll(["load","abort","unload","serialize","prepare"],$),$}(c,d,_,this),this._tiles={},this._cache=new Mr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.onAdd=function(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(c)},f.prototype.onRemove=function(c){this._source&&this._source.onRemove&&this._source.onRemove(c)},f.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var c in this._tiles){var d=this._tiles[c];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0},f.prototype.getSource=function(){return this._source},f.prototype.pause=function(){this._paused=!0},f.prototype.resume=function(){if(this._paused){var c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform)}},f.prototype._loadTile=function(c,d){return this._source.loadTile(c,d)},f.prototype._unloadTile=function(c){if(this._source.unloadTile)return this._source.unloadTile(c,function(){})},f.prototype._abortTile=function(c){if(this._source.abortTile)return this._source.abortTile(c,function(){})},f.prototype.serialize=function(){return this._source.serialize()},f.prototype.prepare=function(c){for(var d in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var _=this._tiles[d];_.upload(c),_.prepare(this.map.style.imageManager)}},f.prototype.getIds=function(){return a.values(this._tiles).map(function(c){return c.tileID}).sort(_e).map(function(c){return c.key})},f.prototype.getRenderableIds=function(c){var d=this,_=[];for(var w in this._tiles)this._isIdRenderable(w,c)&&_.push(this._tiles[w]);return c?_.sort(function(E,O){var k=E.tileID,R=O.tileID,$=new a.Point(k.canonical.x,k.canonical.y)._rotate(d.transform.angle),q=new a.Point(R.canonical.x,R.canonical.y)._rotate(d.transform.angle);return k.overscaledZ-R.overscaledZ||q.y-$.y||q.x-$.x}).map(function(E){return E.tileID.key}):_.map(function(E){return E.tileID}).sort(_e).map(function(E){return E.key})},f.prototype.hasRenderableParent=function(c){var d=this.findLoadedParent(c,0);return!!d&&this._isIdRenderable(d.tileID.key)},f.prototype._isIdRenderable=function(c,d){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(d||!this._tiles[c].holdingForFade())},f.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var c in this._cache.reset(),this._tiles)this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")},f.prototype._reloadTile=function(c,d){var _=this._tiles[c];_&&(_.state!=="loading"&&(_.state=d),this._loadTile(_,this._tileLoaded.bind(this,_,c,d)))},f.prototype._tileLoaded=function(c,d,_,w){if(w)return c.state="errored",void(w.status!==404?this._source.fire(new a.ErrorEvent(w,{tile:c})):this.update(this.transform));c.timeAdded=a.browser.now(),_==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(d,c),this.getSource().type==="raster-dem"&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:c,coord:c.tileID}))},f.prototype._backfillDEM=function(c){for(var d=this.getRenderableIds(),_=0;_<d.length;_++){var w=d[_];if(c.neighboringTiles&&c.neighboringTiles[w]){var E=this.getTileByID(w);O(c,E),O(E,c)}}function O(k,R){k.needsHillshadePrepare=!0;var $=R.tileID.canonical.x-k.tileID.canonical.x,q=R.tileID.canonical.y-k.tileID.canonical.y,H=Math.pow(2,k.tileID.canonical.z),ne=R.tileID.key;$===0&&q===0||Math.abs(q)>1||(Math.abs($)>1&&(Math.abs($+H)===1?$+=H:Math.abs($-H)===1&&($-=H)),R.dem&&k.dem&&(k.dem.backfillBorder(R.dem,$,q),k.neighboringTiles&&k.neighboringTiles[ne]&&(k.neighboringTiles[ne].backfilled=!0)))}},f.prototype.getTile=function(c){return this.getTileByID(c.key)},f.prototype.getTileByID=function(c){return this._tiles[c]},f.prototype._retainLoadedChildren=function(c,d,_,w){for(var E in this._tiles){var O=this._tiles[E];if(!(w[E]||!O.hasData()||O.tileID.overscaledZ<=d||O.tileID.overscaledZ>_)){for(var k=O.tileID;O&&O.tileID.overscaledZ>d+1;){var R=O.tileID.scaledTo(O.tileID.overscaledZ-1);(O=this._tiles[R.key])&&O.hasData()&&(k=R)}for(var $=k;$.overscaledZ>d;)if(c[($=$.scaledTo($.overscaledZ-1)).key]){w[k.key]=k;break}}}},f.prototype.findLoadedParent=function(c,d){if(c.key in this._loadedParentTiles){var _=this._loadedParentTiles[c.key];return _&&_.tileID.overscaledZ>=d?_:null}for(var w=c.overscaledZ-1;w>=d;w--){var E=c.scaledTo(w),O=this._getLoadedTile(E);if(O)return O}},f.prototype._getLoadedTile=function(c){var d=this._tiles[c.key];return d&&d.hasData()?d:this._cache.getByKey(c.wrapped().key)},f.prototype.updateCacheSize=function(c){var d=Math.ceil(c.width/this._source.tileSize)+1,_=Math.ceil(c.height/this._source.tileSize)+1,w=Math.floor(d*_*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)},f.prototype.handleWrapJump=function(c){var d=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);if(this._prevLng=c,d){var _={};for(var w in this._tiles){var E=this._tiles[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+d),_[E.tileID.key]=E}for(var O in this._tiles=_,this._timers)clearTimeout(this._timers[O]),delete this._timers[O];for(var k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}},f.prototype.update=function(c){var d=this;if(this.transform=c,this._sourceLoaded&&!this._paused){var _;this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?_=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(je){return new a.OverscaledTileID(je.canonical.z,je.wrap,je.canonical.z,je.canonical.x,je.canonical.y)}):(_=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(_=_.filter(function(je){return d._source.hasTile(je)}))):_=[];var w=c.coveringZoomLevel(this._source),E=Math.max(w-f.maxOverzooming,this._source.minzoom),O=Math.max(w+f.maxUnderzooming,this._source.minzoom),k=this._updateRetainedTiles(_,w);if(Ge(this._source.type)){for(var R={},$={},q=0,H=Object.keys(k);q<H.length;q+=1){var ne=H[q],re=k[ne],le=this._tiles[ne];if(le&&!(le.fadeEndTime&&le.fadeEndTime<=a.browser.now())){var J=this.findLoadedParent(re,E);J&&(this._addTile(J.tileID),R[J.tileID.key]=J.tileID),$[ne]=re}}for(var se in this._retainLoadedChildren($,w,O,k),R)k[se]||(this._coveredTiles[se]=!0,k[se]=R[se])}for(var me in k)this._tiles[me].clearFadeHold();for(var xe=0,Ae=a.keysDifference(this._tiles,k);xe<Ae.length;xe+=1){var Me=Ae[xe],ke=this._tiles[Me];ke.hasSymbolBuckets&&!ke.holdingForFade()?ke.setHoldDuration(this.map._fadeDuration):ke.hasSymbolBuckets&&!ke.symbolFadeFinished()||this._removeTile(Me)}this._updateLoadedParentTileCache()}},f.prototype.releaseSymbolFadeTiles=function(){for(var c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(c)},f.prototype._updateRetainedTiles=function(c,d){for(var _={},w={},E=Math.max(d-f.maxOverzooming,this._source.minzoom),O=Math.max(d+f.maxUnderzooming,this._source.minzoom),k={},R=0,$=c;R<$.length;R+=1){var q=$[R],H=this._addTile(q);_[q.key]=q,H.hasData()||d<this._source.maxzoom&&(k[q.key]=q)}this._retainLoadedChildren(k,d,O,_);for(var ne=0,re=c;ne<re.length;ne+=1){var le=re[ne],J=this._tiles[le.key];if(!J.hasData()){if(d+1>this._source.maxzoom){var se=le.children(this._source.maxzoom)[0],me=this.getTile(se);if(me&&me.hasData()){_[se.key]=se;continue}}else{var xe=le.children(this._source.maxzoom);if(_[xe[0].key]&&_[xe[1].key]&&_[xe[2].key]&&_[xe[3].key])continue}for(var Ae=J.wasRequested(),Me=le.overscaledZ-1;Me>=E;--Me){var ke=le.scaledTo(Me);if(w[ke.key]||(w[ke.key]=!0,!(J=this.getTile(ke))&&Ae&&(J=this._addTile(ke)),J&&(_[ke.key]=ke,Ae=J.wasRequested(),J.hasData())))break}}}return _},f.prototype._updateLoadedParentTileCache=function(){for(var c in this._loadedParentTiles={},this._tiles){for(var d=[],_=void 0,w=this._tiles[c].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){_=this._loadedParentTiles[w.key];break}d.push(w.key);var E=w.scaledTo(w.overscaledZ-1);if(_=this._getLoadedTile(E))break;w=E}for(var O=0,k=d;O<k.length;O+=1)this._loadedParentTiles[k[O]]=_}},f.prototype._addTile=function(c){var d=this._tiles[c.key];if(d)return d;(d=this._cache.getAndRemove(c))&&(this._setTileReloadTimer(c.key,d),d.tileID=c,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[c.key]&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,d)));var _=Boolean(d);return _||(d=new a.Tile(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,c.key,d.state))),d?(d.uses++,this._tiles[c.key]=d,_||this._source.fire(new a.Event("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null},f.prototype._setTileReloadTimer=function(c,d){var _=this;c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]);var w=d.getExpiryTimeout();w&&(this._timers[c]=setTimeout(function(){_._reloadTile(c,"expired"),delete _._timers[c]},w))},f.prototype._removeTile=function(c){var d=this._tiles[c];d&&(d.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))},f.prototype.clearTiles=function(){for(var c in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(c);this._cache.reset()},f.prototype.tilesIn=function(c,d,_){var w=this,E=[],O=this.transform;if(!O)return E;for(var k=_?O.getCameraQueryGeometry(c):c,R=c.map(function(Me){return O.pointCoordinate(Me)}),$=k.map(function(Me){return O.pointCoordinate(Me)}),q=this.getIds(),H=1/0,ne=1/0,re=-1/0,le=-1/0,J=0,se=$;J<se.length;J+=1){var me=se[J];H=Math.min(H,me.x),ne=Math.min(ne,me.y),re=Math.max(re,me.x),le=Math.max(le,me.y)}for(var xe=function(Me){var ke=w._tiles[q[Me]];if(!ke.holdingForFade()){var je=ke.tileID,it=Math.pow(2,O.zoom-ke.tileID.overscaledZ),tt=d*ke.queryPadding*a.EXTENT/ke.tileSize/it,gt=[je.getTilePoint(new a.MercatorCoordinate(H,ne)),je.getTilePoint(new a.MercatorCoordinate(re,le))];if(gt[0].x-tt<a.EXTENT&&gt[0].y-tt<a.EXTENT&&gt[1].x+tt>=0&&gt[1].y+tt>=0){var Nt=R.map(function(Bt){return je.getTilePoint(Bt)}),Ut=$.map(function(Bt){return je.getTilePoint(Bt)});E.push({tile:ke,tileID:je,queryGeometry:Nt,cameraQueryGeometry:Ut,scale:it})}}},Ae=0;Ae<q.length;Ae++)xe(Ae);return E},f.prototype.getVisibleCoordinates=function(c){for(var d=this,_=this.getRenderableIds(c).map(function(k){return d._tiles[k].tileID}),w=0,E=_;w<E.length;w+=1){var O=E[w];O.posMatrix=this.transform.calculatePosMatrix(O.toUnwrapped())}return _},f.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ge(this._source.type))for(var c in this._tiles){var d=this._tiles[c];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=a.browser.now())return!0}return!1},f.prototype.setFeatureState=function(c,d,_){this._state.updateState(c=c||"_geojsonTileLayer",d,_)},f.prototype.removeFeatureState=function(c,d,_){this._state.removeFeatureState(c=c||"_geojsonTileLayer",d,_)},f.prototype.getFeatureState=function(c,d){return this._state.getState(c=c||"_geojsonTileLayer",d)},f.prototype.setDependencies=function(c,d,_){var w=this._tiles[c];w&&w.setDependencies(d,_)},f.prototype.reloadTilesForDependencies=function(c,d){for(var _ in this._tiles)this._tiles[_].hasDependency(c,d)&&this._reloadTile(_,"reloading");this._cache.filter(function(w){return!w.hasDependency(c,d)})},f}(a.Evented);function _e(u,f){var c=Math.abs(2*u.wrap)-+(u.wrap<0),d=Math.abs(2*f.wrap)-+(f.wrap<0);return u.overscaledZ-f.overscaledZ||d-c||f.canonical.y-u.canonical.y||f.canonical.x-u.canonical.x}function Ge(u){return u==="raster"||u==="image"||u==="video"}function Ze(){return new a.window.Worker(_f.workerUrl)}ie.maxOverzooming=10,ie.maxUnderzooming=3;var Ce="mapboxgl_preloaded_worker_pool",Ue=function(){this.active={}};Ue.prototype.acquire=function(u){if(!this.workers)for(this.workers=[];this.workers.length<Ue.workerCount;)this.workers.push(new Ze);return this.active[u]=!0,this.workers.slice()},Ue.prototype.release=function(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(function(f){f.terminate()}),this.workers=null)},Ue.prototype.isPreloaded=function(){return!!this.active[Ce]},Ue.prototype.numActive=function(){return Object.keys(this.active).length};var St,_t=Math.floor(a.browser.hardwareConcurrency/2);function Le(){return St||(St=new Ue),St}function pt(u,f){var c={};for(var d in u)d!=="ref"&&(c[d]=u[d]);return a.refProperties.forEach(function(_){_ in f&&(c[_]=f[_])}),c}function lt(u){u=u.slice();for(var f=Object.create(null),c=0;c<u.length;c++)f[u[c].id]=u[c];for(var d=0;d<u.length;d++)"ref"in u[d]&&(u[d]=pt(u[d],f[u[d].ref]));return u}Ue.workerCount=Math.max(Math.min(_t,6),1);var De={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function fe(u,f,c){c.push({command:De.addSource,args:[u,f[u]]})}function Ee(u,f,c){f.push({command:De.removeSource,args:[u]}),c[u]=!0}function He(u,f,c,d){Ee(u,c,d),fe(u,f,c)}function $t(u,f,c){var d;for(d in u[c])if(u[c].hasOwnProperty(d)&&d!=="data"&&!a.deepEqual(u[c][d],f[c][d]))return!1;for(d in f[c])if(f[c].hasOwnProperty(d)&&d!=="data"&&!a.deepEqual(u[c][d],f[c][d]))return!1;return!0}function Ht(u,f,c,d,_,w){var E;for(E in f=f||{},u=u||{})u.hasOwnProperty(E)&&(a.deepEqual(u[E],f[E])||c.push({command:w,args:[d,E,f[E],_]}));for(E in f)f.hasOwnProperty(E)&&!u.hasOwnProperty(E)&&(a.deepEqual(u[E],f[E])||c.push({command:w,args:[d,E,f[E],_]}))}function Qt(u){return u.id}function Xt(u,f){return u[f.id]=f,u}var ti=function(u,f){this.reset(u,f)};ti.prototype.reset=function(u,f){this.points=u||[],this._distances=[0];for(var c=1;c<this.points.length;c++)this._distances[c]=this._distances[c-1]+this.points[c].dist(this.points[c-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding},ti.prototype.lerp=function(u){if(this.points.length===1)return this.points[0];u=a.clamp(u,0,1);for(var f=1,c=this._distances[f],d=u*this.paddedLength+this.padding;c<d&&f<this._distances.length;)c=this._distances[++f];var _=f-1,w=this._distances[_],E=c-w,O=E>0?(d-w)/E:0;return this.points[_].mult(1-O).add(this.points[f].mult(O))};var er=function(u,f,c){var d=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(u/c),this.yCellCount=Math.ceil(f/c);for(var w=0;w<this.xCellCount*this.yCellCount;w++)d.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=f,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0};function yn(u,f,c,d,_){var w=a.create();return f?(a.scale(w,w,[1/_,1/_,1]),c||a.rotateZ(w,w,d.angle)):a.multiply(w,d.labelPlaneMatrix,u),w}function Gr(u,f,c,d,_){if(f){var w=a.clone(u);return a.scale(w,w,[_,_,1]),c||a.rotateZ(w,w,-d.angle),w}return d.glCoordMatrix}function _r(u,f){var c=[u.x,u.y,0,1];_i(c,c,f);var d=c[3];return{point:new a.Point(c[0]/d,c[1]/d),signedDistanceFromCamera:d}}function Br(u,f){return .5+u/f*.5}function no(u,f){var c=u[0]/u[3],d=u[1]/u[3];return c>=-f[0]&&c<=f[0]&&d>=-f[1]&&d<=f[1]}function Nc(u,f,c,d,_,w,E,O){var k=d?u.textSizeData:u.iconSizeData,R=a.evaluateSizeForZoom(k,c.transform.zoom),$=[256/c.width*2+1,256/c.height*2+1],q=d?u.text.dynamicLayoutVertexArray:u.icon.dynamicLayoutVertexArray;q.clear();for(var H=u.lineVertexArray,ne=d?u.text.placedSymbolArray:u.icon.placedSymbolArray,re=c.transform.width/c.transform.height,le=!1,J=0;J<ne.length;J++){var se=ne.get(J);if(se.hidden||se.writingMode===a.WritingMode.vertical&&!le)qi(se.numGlyphs,q);else{le=!1;var me=[se.anchorX,se.anchorY,0,1];if(a.transformMat4(me,me,f),no(me,$)){var xe=Br(c.transform.cameraToCenterDistance,me[3]),Ae=a.evaluateSizeForFeature(k,R,se),Me=E?Ae/xe:Ae*xe,ke=new a.Point(se.anchorX,se.anchorY),je=_r(ke,_).point,it={},tt=pd(se,Me,!1,O,f,_,w,u.glyphOffsetArray,H,q,je,ke,it,re);le=tt.useVertical,(tt.notEnoughRoom||le||tt.needsFlipping&&pd(se,Me,!0,O,f,_,w,u.glyphOffsetArray,H,q,je,ke,it,re).notEnoughRoom)&&qi(se.numGlyphs,q)}else qi(se.numGlyphs,q)}}d?u.text.dynamicLayoutVertexBuffer.updateData(q):u.icon.dynamicLayoutVertexBuffer.updateData(q)}function vi(u,f,c,d,_,w,E,O,k,R,$){var q=O.glyphStartIndex+O.numGlyphs,H=O.lineStartIndex,ne=O.lineStartIndex+O.lineLength,re=f.getoffsetX(O.glyphStartIndex),le=f.getoffsetX(q-1),J=Rn(u*re,c,d,_,w,E,O.segment,H,ne,k,R,$);if(!J)return null;var se=Rn(u*le,c,d,_,w,E,O.segment,H,ne,k,R,$);return se?{first:J,last:se}:null}function io(u,f,c,d){return u===a.WritingMode.horizontal&&Math.abs(c.y-f.y)>Math.abs(c.x-f.x)*d?{useVertical:!0}:(u===a.WritingMode.vertical?f.y<c.y:f.x>c.x)?{needsFlipping:!0}:null}function pd(u,f,c,d,_,w,E,O,k,R,$,q,H,ne){var re,le=f/24,J=u.lineOffsetX*le,se=u.lineOffsetY*le;if(u.numGlyphs>1){var me=u.glyphStartIndex+u.numGlyphs,xe=u.lineStartIndex,Ae=u.lineStartIndex+u.lineLength,Me=vi(le,O,J,se,c,$,q,u,k,w,H);if(!Me)return{notEnoughRoom:!0};var ke=_r(Me.first.point,E).point,je=_r(Me.last.point,E).point;if(d&&!c){var it=io(u.writingMode,ke,je,ne);if(it)return it}re=[Me.first];for(var tt=u.glyphStartIndex+1;tt<me-1;tt++)re.push(Rn(le*O.getoffsetX(tt),J,se,c,$,q,u.segment,xe,Ae,k,w,H));re.push(Me.last)}else{if(d&&!c){var gt=_r(q,_).point,Nt=u.lineStartIndex+u.segment+1,Ut=new a.Point(k.getx(Nt),k.gety(Nt)),Bt=_r(Ut,_),Cr=Bt.signedDistanceFromCamera>0?Bt.point:Rc(q,Ut,gt,1,_),xt=io(u.writingMode,gt,Cr,ne);if(xt)return xt}var Jt=Rn(le*O.getoffsetX(u.glyphStartIndex),J,se,c,$,q,u.segment,u.lineStartIndex,u.lineStartIndex+u.lineLength,k,w,H);if(!Jt)return{notEnoughRoom:!0};re=[Jt]}for(var sr=0,Yt=re;sr<Yt.length;sr+=1){var Kt=Yt[sr];a.addDynamicAttributes(R,Kt.point,Kt.angle)}return{}}function Rc(u,f,c,d,_){var w=_r(u.add(u.sub(f)._unit()),_).point,E=c.sub(w);return c.add(E._mult(d/E.mag()))}function Rn(u,f,c,d,_,w,E,O,k,R,$,q){var H=d?u-f:u+f,ne=H>0?1:-1,re=0;d&&(ne*=-1,re=Math.PI),ne<0&&(re+=Math.PI);for(var le=ne>0?O+E:O+E+1,J=_,se=_,me=0,xe=0,Ae=Math.abs(H),Me=[];me+xe<=Ae;){if((le+=ne)<O||le>=k)return null;if(se=J,Me.push(J),(J=q[le])===void 0){var ke=new a.Point(R.getx(le),R.gety(le)),je=_r(ke,$);if(je.signedDistanceFromCamera>0)J=q[le]=je.point;else{var it=le-ne;J=Rc(me===0?w:new a.Point(R.getx(it),R.gety(it)),ke,se,Ae-me+1,$)}}me+=xe,xe=se.dist(J)}var tt=(Ae-me)/xe,gt=J.sub(se),Nt=gt.mult(tt)._add(se);Nt._add(gt._unit()._perp()._mult(c*ne));var Ut=re+Math.atan2(J.y-se.y,J.x-se.x);return Me.push(Nt),{point:Nt,angle:Ut,path:Me}}er.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},er.prototype.insert=function(u,f,c,d,_){this._forEachCell(f,c,d,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(f),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(_)},er.prototype.insertCircle=function(u,f,c,d){this._forEachCell(f-d,c-d,f+d,c+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(f),this.circles.push(c),this.circles.push(d)},er.prototype._insertBoxCell=function(u,f,c,d,_,w){this.boxCells[_].push(w)},er.prototype._insertCircleCell=function(u,f,c,d,_,w){this.circleCells[_].push(w)},er.prototype._query=function(u,f,c,d,_,w){if(c<0||u>this.width||d<0||f>this.height)return!_&&[];var E=[];if(u<=0&&f<=0&&this.width<=c&&this.height<=d){if(_)return!0;for(var O=0;O<this.boxKeys.length;O++)E.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(var k=0;k<this.circleKeys.length;k++){var R=this.circles[3*k],$=this.circles[3*k+1],q=this.circles[3*k+2];E.push({key:this.circleKeys[k],x1:R-q,y1:$-q,x2:R+q,y2:$+q})}return w?E.filter(w):E}return this._forEachCell(u,f,c,d,this._queryCell,E,{hitTest:_,seenUids:{box:{},circle:{}}},w),_?E.length>0:E},er.prototype._queryCircle=function(u,f,c,d,_){var w=u-c,E=u+c,O=f-c,k=f+c;if(E<0||w>this.width||k<0||O>this.height)return!d&&[];var R=[];return this._forEachCell(w,O,E,k,this._queryCellCircle,R,{hitTest:d,circle:{x:u,y:f,radius:c},seenUids:{box:{},circle:{}}},_),d?R.length>0:R},er.prototype.query=function(u,f,c,d,_){return this._query(u,f,c,d,!1,_)},er.prototype.hitTest=function(u,f,c,d,_){return this._query(u,f,c,d,!0,_)},er.prototype.hitTestCircle=function(u,f,c,d){return this._queryCircle(u,f,c,!0,d)},er.prototype._queryCell=function(u,f,c,d,_,w,E,O){var k=E.seenUids,R=this.boxCells[_];if(R!==null)for(var $=this.bboxes,q=0,H=R;q<H.length;q+=1){var ne=H[q];if(!k.box[ne]){k.box[ne]=!0;var re=4*ne;if(u<=$[re+2]&&f<=$[re+3]&&c>=$[re+0]&&d>=$[re+1]&&(!O||O(this.boxKeys[ne]))){if(E.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[ne],x1:$[re],y1:$[re+1],x2:$[re+2],y2:$[re+3]})}}}var le=this.circleCells[_];if(le!==null)for(var J=this.circles,se=0,me=le;se<me.length;se+=1){var xe=me[se];if(!k.circle[xe]){k.circle[xe]=!0;var Ae=3*xe;if(this._circleAndRectCollide(J[Ae],J[Ae+1],J[Ae+2],u,f,c,d)&&(!O||O(this.circleKeys[xe]))){if(E.hitTest)return w.push(!0),!0;var Me=J[Ae],ke=J[Ae+1],je=J[Ae+2];w.push({key:this.circleKeys[xe],x1:Me-je,y1:ke-je,x2:Me+je,y2:ke+je})}}}},er.prototype._queryCellCircle=function(u,f,c,d,_,w,E,O){var k=E.circle,R=E.seenUids,$=this.boxCells[_];if($!==null)for(var q=this.bboxes,H=0,ne=$;H<ne.length;H+=1){var re=ne[H];if(!R.box[re]){R.box[re]=!0;var le=4*re;if(this._circleAndRectCollide(k.x,k.y,k.radius,q[le+0],q[le+1],q[le+2],q[le+3])&&(!O||O(this.boxKeys[re])))return w.push(!0),!0}}var J=this.circleCells[_];if(J!==null)for(var se=this.circles,me=0,xe=J;me<xe.length;me+=1){var Ae=xe[me];if(!R.circle[Ae]){R.circle[Ae]=!0;var Me=3*Ae;if(this._circlesCollide(se[Me],se[Me+1],se[Me+2],k.x,k.y,k.radius)&&(!O||O(this.circleKeys[Ae])))return w.push(!0),!0}}},er.prototype._forEachCell=function(u,f,c,d,_,w,E,O){for(var k=this._convertToXCellCoord(u),R=this._convertToYCellCoord(f),$=this._convertToXCellCoord(c),q=this._convertToYCellCoord(d),H=k;H<=$;H++)for(var ne=R;ne<=q;ne++)if(_.call(this,u,f,c,d,this.xCellCount*ne+H,w,E,O))return},er.prototype._convertToXCellCoord=function(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))},er.prototype._convertToYCellCoord=function(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))},er.prototype._circlesCollide=function(u,f,c,d,_,w){var E=d-u,O=_-f,k=c+w;return k*k>E*E+O*O},er.prototype._circleAndRectCollide=function(u,f,c,d,_,w,E){var O=(w-d)/2,k=Math.abs(u-(d+O));if(k>O+c)return!1;var R=(E-_)/2,$=Math.abs(f-(_+R));if($>R+c)return!1;if(k<=O||$<=R)return!0;var q=k-O,H=$-R;return q*q+H*H<=c*c};var zc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qi(u,f){for(var c=0;c<u;c++){var d=f.length;f.resize(d+4),f.float32.set(zc,3*d)}}function _i(u,f,c){var d=f[0],_=f[1];return u[0]=c[0]*d+c[4]*_+c[12],u[1]=c[1]*d+c[5]*_+c[13],u[3]=c[3]*d+c[7]*_+c[15],u}var Ko=function(u,f,c){f===void 0&&(f=new er(u.width+200,u.height+200,25)),c===void 0&&(c=new er(u.width+200,u.height+200,25)),this.transform=u,this.grid=f,this.ignoredGrid=c,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+100,this.screenBottomBoundary=u.height+100,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200};function gn(u,f,c){return f*(a.EXTENT/(u.tileSize*Math.pow(2,c-u.tileID.overscaledZ)))}Ko.prototype.placeCollisionBox=function(u,f,c,d,_){var w=this.projectAndGetPerspectiveRatio(d,u.anchorPointX,u.anchorPointY),E=c*w.perspectiveRatio,O=u.x1*E+w.point.x,k=u.y1*E+w.point.y,R=u.x2*E+w.point.x,$=u.y2*E+w.point.y;return!this.isInsideGrid(O,k,R,$)||!f&&this.grid.hitTest(O,k,R,$,_)?{box:[],offscreen:!1}:{box:[O,k,R,$],offscreen:this.isOffscreen(O,k,R,$)}},Ko.prototype.placeCollisionCircles=function(u,f,c,d,_,w,E,O,k,R,$,q,H){var ne=[],re=new a.Point(f.anchorX,f.anchorY),le=_r(re,w),J=Br(this.transform.cameraToCenterDistance,le.signedDistanceFromCamera),se=(R?_/J:_*J)/a.ONE_EM,me=_r(re,E).point,xe=vi(se,d,f.lineOffsetX*se,f.lineOffsetY*se,!1,me,re,f,c,E,{}),Ae=!1,Me=!1,ke=!0;if(xe){for(var je=.5*q*J+H,it=new a.Point(-100,-100),tt=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),gt=new ti,Nt=xe.first,Ut=xe.last,Bt=[],Cr=Nt.path.length-1;Cr>=1;Cr--)Bt.push(Nt.path[Cr]);for(var xt=1;xt<Ut.path.length;xt++)Bt.push(Ut.path[xt]);var Jt=2.5*je;if(O){var sr=Bt.map(function(ra){return _r(ra,O)});Bt=sr.some(function(ra){return ra.signedDistanceFromCamera<=0})?[]:sr.map(function(ra){return ra.point})}var Yt=[];if(Bt.length>0){for(var Kt=Bt[0].clone(),ir=Bt[0].clone(),Zt=1;Zt<Bt.length;Zt++)Kt.x=Math.min(Kt.x,Bt[Zt].x),Kt.y=Math.min(Kt.y,Bt[Zt].y),ir.x=Math.max(ir.x,Bt[Zt].x),ir.y=Math.max(ir.y,Bt[Zt].y);Yt=Kt.x>=it.x&&ir.x<=tt.x&&Kt.y>=it.y&&ir.y<=tt.y?[Bt]:ir.x<it.x||Kt.x>tt.x||ir.y<it.y||Kt.y>tt.y?[]:a.clipLine([Bt],it.x,it.y,tt.x,tt.y)}for(var qt=0,fi=Yt;qt<fi.length;qt+=1){var An;gt.reset(fi[qt],.25*je),An=gt.length<=.5*je?1:Math.ceil(gt.paddedLength/Jt)+1;for(var zi=0;zi<An;zi++){var bi=zi/Math.max(An-1,1),On=gt.lerp(bi),zn=On.x+100,Mo=On.y+100;ne.push(zn,Mo,je,0);var Xi=zn-je,Qs=Mo-je,oo=zn+je,wa=Mo+je;if(ke=ke&&this.isOffscreen(Xi,Qs,oo,wa),Me=Me||this.isInsideGrid(Xi,Qs,oo,wa),!u&&this.grid.hitTestCircle(zn,Mo,je,$)&&(Ae=!0,!k))return{circles:[],offscreen:!1,collisionDetected:Ae}}}}return{circles:!k&&Ae||!Me?[]:ne,offscreen:ke,collisionDetected:Ae}},Ko.prototype.queryRenderedSymbols=function(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var f=[],c=1/0,d=1/0,_=-1/0,w=-1/0,E=0,O=u;E<O.length;E+=1){var k=O[E],R=new a.Point(k.x+100,k.y+100);c=Math.min(c,R.x),d=Math.min(d,R.y),_=Math.max(_,R.x),w=Math.max(w,R.y),f.push(R)}for(var $={},q={},H=0,ne=this.grid.query(c,d,_,w).concat(this.ignoredGrid.query(c,d,_,w));H<ne.length;H+=1){var re=ne[H],le=re.key;if($[le.bucketInstanceId]===void 0&&($[le.bucketInstanceId]={}),!$[le.bucketInstanceId][le.featureIndex]){var J=[new a.Point(re.x1,re.y1),new a.Point(re.x2,re.y1),new a.Point(re.x2,re.y2),new a.Point(re.x1,re.y2)];a.polygonIntersectsPolygon(f,J)&&($[le.bucketInstanceId][le.featureIndex]=!0,q[le.bucketInstanceId]===void 0&&(q[le.bucketInstanceId]=[]),q[le.bucketInstanceId].push(le.featureIndex))}}return q},Ko.prototype.insertCollisionBox=function(u,f,c,d,_){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:c,featureIndex:d,collisionGroupID:_},u[0],u[1],u[2],u[3])},Ko.prototype.insertCollisionCircles=function(u,f,c,d,_){for(var w=f?this.ignoredGrid:this.grid,E={bucketInstanceId:c,featureIndex:d,collisionGroupID:_},O=0;O<u.length;O+=4)w.insertCircle(E,u[O],u[O+1],u[O+2])},Ko.prototype.projectAndGetPerspectiveRatio=function(u,f,c){var d=[f,c,0,1];return _i(d,d,u),{point:new a.Point((d[0]/d[3]+1)/2*this.transform.width+100,(-d[1]/d[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/d[3]*.5}},Ko.prototype.isOffscreen=function(u,f,c,d){return c<100||u>=this.screenRightBoundary||d<100||f>this.screenBottomBoundary},Ko.prototype.isInsideGrid=function(u,f,c,d){return c>=0&&u<this.gridRightBoundary&&d>=0&&f<this.gridBottomBoundary},Ko.prototype.getViewportMatrix=function(){var u=a.identity([]);return a.translate(u,u,[-100,-100,0]),u};var ya=function(u,f,c,d){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?f:-f))):d&&c?1:0,this.placed=c};ya.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Bo=function(u,f,c,d,_){this.text=new ya(u?u.text:null,f,c,_),this.icon=new ya(u?u.icon:null,f,d,_)};Bo.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Pg=function(u,f,c){this.text=u,this.icon=f,this.skipFade=c},Yo=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},C1=function(u,f,c,d,_){this.bucketInstanceId=u,this.featureIndex=f,this.sourceLayerIndex=c,this.bucketIndex=d,this.tileID=_},us=function(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}};function Ai(u,f,c,d,_){var w=a.getAnchorAlignment(u),E=-(w.horizontalAlign-.5)*f,O=-(w.verticalAlign-.5)*c,k=a.evaluateVariableOffset(u,d);return new a.Point(E+k[0]*_,O+k[1]*_)}function Na(u,f,c,d,_,w){var E=u.x1,O=u.x2,k=u.y1,R=u.y2,$=u.anchorPointX,q=u.anchorPointY,H=new a.Point(f,c);return d&&H._rotate(_?w:-w),{x1:E+H.x,y1:k+H.y,x2:O+H.x,y2:R+H.y,anchorPointX:$,anchorPointY:q}}us.prototype.get=function(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){var f=++this.maxGroupID;this.collisionGroups[u]={ID:f,predicate:function(c){return c.collisionGroupID===f}}}return this.collisionGroups[u]};var Wi=function(u,f,c,d){this.transform=u.clone(),this.collisionIndex=new Ko(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new us(c),this.collisionCircleArrays={},this.prevPlacement=d,d&&(d.prevPlacement=void 0),this.placedOrientations={}};function Il(u,f,c,d,_){u.emplaceBack(f?1:0,c?1:0,d||0,_||0),u.emplaceBack(f?1:0,c?1:0,d||0,_||0),u.emplaceBack(f?1:0,c?1:0,d||0,_||0),u.emplaceBack(f?1:0,c?1:0,d||0,_||0)}Wi.prototype.getBucketParts=function(u,f,c,d){var _=c.getBucket(f),w=c.latestFeatureIndex;if(_&&w&&f.id===_.layerIds[0]){var E=c.collisionBoxArray,O=_.layers[0].layout,k=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),R=c.tileSize/a.EXTENT,$=this.transform.calculatePosMatrix(c.tileID.toUnwrapped()),q=O.get("text-pitch-alignment")==="map",H=O.get("text-rotation-alignment")==="map",ne=gn(c,1,this.transform.zoom),re=yn($,q,H,this.transform,ne),le=null;if(q){var J=Gr($,q,H,this.transform,ne);le=a.multiply([],this.transform.labelPlaneMatrix,J)}this.retainedQueryData[_.bucketInstanceId]=new C1(_.bucketInstanceId,w,_.sourceLayerIndex,_.index,c.tileID);var se={bucket:_,layout:O,posMatrix:$,textLabelPlaneMatrix:re,labelToScreenMatrix:le,scale:k,textPixelRatio:R,holdingForFade:c.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(d)for(var me=0,xe=_.sortKeyRanges;me<xe.length;me+=1){var Ae=xe[me];u.push({sortKey:Ae.sortKey,symbolInstanceStart:Ae.symbolInstanceStart,symbolInstanceEnd:Ae.symbolInstanceEnd,parameters:se})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:se})}},Wi.prototype.attemptAnchorPlacement=function(u,f,c,d,_,w,E,O,k,R,$,q,H,ne,re){var le,J=[q.textOffset0,q.textOffset1],se=Ai(u,c,d,J,_),me=this.collisionIndex.placeCollisionBox(Na(f,se.x,se.y,w,E,this.transform.angle),$,O,k,R.predicate);if(!re||this.collisionIndex.placeCollisionBox(Na(re,se.x,se.y,w,E,this.transform.angle),$,O,k,R.predicate).box.length!==0)return me.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID].text&&(le=this.prevPlacement.variableOffsets[q.crossTileID].anchor),this.variableOffsets[q.crossTileID]={textOffset:J,width:c,height:d,anchor:u,textBoxScale:_,prevAnchor:le},this.markUsedJustification(H,u,q,ne),H.allowVerticalPlacement&&(this.markUsedOrientation(H,ne,q),this.placedOrientations[q.crossTileID]=ne),{shift:se,placedGlyphBoxes:me}):void 0},Wi.prototype.placeLayerBucketPart=function(u,f,c){var d=this,_=u.parameters,w=_.bucket,E=_.layout,O=_.posMatrix,k=_.textLabelPlaneMatrix,R=_.labelToScreenMatrix,$=_.textPixelRatio,q=_.holdingForFade,H=_.collisionBoxArray,ne=_.partiallyEvaluatedTextSize,re=_.collisionGroup,le=E.get("text-optional"),J=E.get("icon-optional"),se=E.get("text-allow-overlap"),me=E.get("icon-allow-overlap"),xe=E.get("text-rotation-alignment")==="map",Ae=E.get("text-pitch-alignment")==="map",Me=E.get("icon-text-fit")!=="none",ke=E.get("symbol-z-order")==="viewport-y",je=se&&(me||!w.hasIconData()||J),it=me&&(se||!w.hasTextData()||le);!w.collisionArrays&&H&&w.deserializeCollisionBoxes(H);var tt=function(xt,Jt){if(!f[xt.crossTileID])if(q)d.placements[xt.crossTileID]=new Pg(!1,!1,!1);else{var sr,Yt=!1,Kt=!1,ir=!0,Zt=null,qt={box:null,offscreen:null},fi={box:null,offscreen:null},An=null,zi=null,bi=0,On=0,zn=0;Jt.textFeatureIndex?bi=Jt.textFeatureIndex:xt.useRuntimeCollisionCircles&&(bi=xt.featureIndex),Jt.verticalTextFeatureIndex&&(On=Jt.verticalTextFeatureIndex);var Mo=Jt.textBox;if(Mo){var Xi=function(Vr){var jo=a.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Vr&&d.prevPlacement){var ao=d.prevPlacement.placedOrientations[xt.crossTileID];ao&&(d.placedOrientations[xt.crossTileID]=ao,d.markUsedOrientation(w,jo=ao,xt))}return jo},Qs=function(Vr,jo){if(w.allowVerticalPlacement&&xt.numVerticalGlyphVertices>0&&Jt.verticalTextBox)for(var ao=0,ql=w.writingModes;ao<ql.length&&(ql[ao]===a.WritingMode.vertical?(qt=jo(),fi=qt):qt=Vr(),!(qt&&qt.box&&qt.box.length));ao+=1);else qt=Vr()};if(E.get("text-variable-anchor")){var oo=E.get("text-variable-anchor");if(d.prevPlacement&&d.prevPlacement.variableOffsets[xt.crossTileID]){var wa=d.prevPlacement.variableOffsets[xt.crossTileID];oo.indexOf(wa.anchor)>0&&(oo=oo.filter(function(Vr){return Vr!==wa.anchor})).unshift(wa.anchor)}var ra=function(Vr,jo,ao){for(var ql=Vr.x2-Vr.x1,G1=Vr.y2-Vr.y1,xf=xt.textBoxScale,$1=Me&&!me?jo:null,ih={box:[],offscreen:!1},lv=se?2*oo.length:oo.length,qu=0;qu<lv;++qu){var bf=d.attemptAnchorPlacement(oo[qu%oo.length],Vr,ql,G1,xf,xe,Ae,$,O,re,qu>=oo.length,xt,w,ao,$1);if(bf&&(ih=bf.placedGlyphBoxes)&&ih.box&&ih.box.length){Yt=!0,Zt=bf.shift;break}}return ih};Qs(function(){return ra(Mo,Jt.iconBox,a.WritingMode.horizontal)},function(){var Vr=Jt.verticalTextBox;return w.allowVerticalPlacement&&!(qt&&qt.box&&qt.box.length)&&xt.numVerticalGlyphVertices>0&&Vr?ra(Vr,Jt.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),qt&&(Yt=qt.box,ir=qt.offscreen);var th=Xi(qt&&qt.box);if(!Yt&&d.prevPlacement){var Gu=d.prevPlacement.variableOffsets[xt.crossTileID];Gu&&(d.variableOffsets[xt.crossTileID]=Gu,d.markUsedJustification(w,Gu.anchor,xt,th))}}else{var el=function(Vr,jo){var ao=d.collisionIndex.placeCollisionBox(Vr,se,$,O,re.predicate);return ao&&ao.box&&ao.box.length&&(d.markUsedOrientation(w,jo,xt),d.placedOrientations[xt.crossTileID]=jo),ao};Qs(function(){return el(Mo,a.WritingMode.horizontal)},function(){var Vr=Jt.verticalTextBox;return w.allowVerticalPlacement&&xt.numVerticalGlyphVertices>0&&Vr?el(Vr,a.WritingMode.vertical):{box:null,offscreen:null}}),Xi(qt&&qt.box&&qt.box.length)}}if(Yt=(sr=qt)&&sr.box&&sr.box.length>0,ir=sr&&sr.offscreen,xt.useRuntimeCollisionCircles){var $u=w.text.placedSymbolArray.get(xt.centerJustifiedTextSymbolIndex),rh=a.evaluateSizeForFeature(w.textSizeData,ne,$u),Ba=E.get("text-padding");An=d.collisionIndex.placeCollisionCircles(se,$u,w.lineVertexArray,w.glyphOffsetArray,rh,O,k,R,c,Ae,re.predicate,xt.collisionCircleDiameter,Ba),Yt=se||An.circles.length>0&&!An.collisionDetected,ir=ir&&An.offscreen}if(Jt.iconFeatureIndex&&(zn=Jt.iconFeatureIndex),Jt.iconBox){var nh=function(Vr){var jo=Me&&Zt?Na(Vr,Zt.x,Zt.y,xe,Ae,d.transform.angle):Vr;return d.collisionIndex.placeCollisionBox(jo,me,$,O,re.predicate)};Kt=fi&&fi.box&&fi.box.length&&Jt.verticalIconBox?(zi=nh(Jt.verticalIconBox)).box.length>0:(zi=nh(Jt.iconBox)).box.length>0,ir=ir&&zi.offscreen}var Va=le||xt.numHorizontalGlyphVertices===0&&xt.numVerticalGlyphVertices===0,pi=J||xt.numIconVertices===0;if(Va||pi?pi?Va||(Kt=Kt&&Yt):Yt=Kt&&Yt:Kt=Yt=Kt&&Yt,Yt&&sr&&sr.box&&d.collisionIndex.insertCollisionBox(sr.box,E.get("text-ignore-placement"),w.bucketInstanceId,fi&&fi.box&&On?On:bi,re.ID),Kt&&zi&&d.collisionIndex.insertCollisionBox(zi.box,E.get("icon-ignore-placement"),w.bucketInstanceId,zn,re.ID),An&&(Yt&&d.collisionIndex.insertCollisionCircles(An.circles,E.get("text-ignore-placement"),w.bucketInstanceId,bi,re.ID),c)){var ps=w.bucketInstanceId,tl=d.collisionCircleArrays[ps];tl===void 0&&(tl=d.collisionCircleArrays[ps]=new Yo);for(var $l=0;$l<An.circles.length;$l+=4)tl.circles.push(An.circles[$l+0]),tl.circles.push(An.circles[$l+1]),tl.circles.push(An.circles[$l+2]),tl.circles.push(An.collisionDetected?1:0)}d.placements[xt.crossTileID]=new Pg(Yt||je,Kt||it,ir||w.justReloaded),f[xt.crossTileID]=!0}};if(ke)for(var gt=w.getSortedSymbolIndexes(this.transform.angle),Nt=gt.length-1;Nt>=0;--Nt){var Ut=gt[Nt];tt(w.symbolInstances.get(Ut),w.collisionArrays[Ut])}else for(var Bt=u.symbolInstanceStart;Bt<u.symbolInstanceEnd;Bt++)tt(w.symbolInstances.get(Bt),w.collisionArrays[Bt]);if(c&&w.bucketInstanceId in this.collisionCircleArrays){var Cr=this.collisionCircleArrays[w.bucketInstanceId];a.invert(Cr.invProjMatrix,O),Cr.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},Wi.prototype.markUsedJustification=function(u,f,c,d){var _;_=d===a.WritingMode.vertical?c.verticalPlacedTextSymbolIndex:{left:c.leftJustifiedTextSymbolIndex,center:c.centerJustifiedTextSymbolIndex,right:c.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(f)];for(var w=0,E=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex,c.verticalPlacedTextSymbolIndex];w<E.length;w+=1){var O=E[w];O>=0&&(u.text.placedSymbolArray.get(O).crossTileID=_>=0&&O!==_?0:c.crossTileID)}},Wi.prototype.markUsedOrientation=function(u,f,c){for(var d=f===a.WritingMode.horizontal||f===a.WritingMode.horizontalOnly?f:0,_=f===a.WritingMode.vertical?f:0,w=0,E=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex];w<E.length;w+=1)u.text.placedSymbolArray.get(E[w]).placedOrientation=d;c.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).placedOrientation=_)},Wi.prototype.commit=function(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;var f=this.prevPlacement,c=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;var d=f?f.symbolFadeChange(u):1,_=f?f.opacities:{},w=f?f.variableOffsets:{},E=f?f.placedOrientations:{};for(var O in this.placements){var k=this.placements[O],R=_[O];R?(this.opacities[O]=new Bo(R,d,k.text,k.icon),c=c||k.text!==R.text.placed||k.icon!==R.icon.placed):(this.opacities[O]=new Bo(null,d,k.text,k.icon,k.skipFade),c=c||k.text||k.icon)}for(var $ in _){var q=_[$];if(!this.opacities[$]){var H=new Bo(q,d,!1,!1);H.isHidden()||(this.opacities[$]=H,c=c||q.text.placed||q.icon.placed)}}for(var ne in w)this.variableOffsets[ne]||!this.opacities[ne]||this.opacities[ne].isHidden()||(this.variableOffsets[ne]=w[ne]);for(var re in E)this.placedOrientations[re]||!this.opacities[re]||this.opacities[re].isHidden()||(this.placedOrientations[re]=E[re]);c?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:u)},Wi.prototype.updateLayerOpacities=function(u,f){for(var c={},d=0,_=f;d<_.length;d+=1){var w=_[d],E=w.getBucket(u);E&&w.latestFeatureIndex&&u.id===E.layerIds[0]&&this.updateBucketOpacities(E,c,w.collisionBoxArray)}},Wi.prototype.updateBucketOpacities=function(u,f,c){var d=this;u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();var _=u.layers[0].layout,w=new Bo(null,0,!1,!1,!0),E=_.get("text-allow-overlap"),O=_.get("icon-allow-overlap"),k=_.get("text-variable-anchor"),R=_.get("text-rotation-alignment")==="map",$=_.get("text-pitch-alignment")==="map",q=_.get("icon-text-fit")!=="none",H=new Bo(null,0,E&&(O||!u.hasIconData()||_.get("icon-optional")),O&&(E||!u.hasTextData()||_.get("text-optional")),!0);!u.collisionArrays&&c&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(c);for(var ne=function(se,me,xe){for(var Ae=0;Ae<me/4;Ae++)se.opacityVertexArray.emplaceBack(xe)},re=function(se){var me=u.symbolInstances.get(se),xe=me.numHorizontalGlyphVertices,Ae=me.numVerticalGlyphVertices,Me=me.crossTileID,ke=d.opacities[Me];f[Me]?ke=w:ke||(d.opacities[Me]=ke=H),f[Me]=!0;var je=me.numIconVertices>0,it=d.placedOrientations[me.crossTileID],tt=it===a.WritingMode.vertical,gt=it===a.WritingMode.horizontal||it===a.WritingMode.horizontalOnly;if(xe>0||Ae>0){var Nt=Dg(ke.text);ne(u.text,xe,tt?ku:Nt),ne(u.text,Ae,gt?ku:Nt);var Ut=ke.text.isHidden();[me.rightJustifiedTextSymbolIndex,me.centerJustifiedTextSymbolIndex,me.leftJustifiedTextSymbolIndex].forEach(function(qt){qt>=0&&(u.text.placedSymbolArray.get(qt).hidden=Ut||tt?1:0)}),me.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(me.verticalPlacedTextSymbolIndex).hidden=Ut||gt?1:0);var Bt=d.variableOffsets[me.crossTileID];Bt&&d.markUsedJustification(u,Bt.anchor,me,it);var Cr=d.placedOrientations[me.crossTileID];Cr&&(d.markUsedJustification(u,"left",me,Cr),d.markUsedOrientation(u,Cr,me))}if(je){var xt=Dg(ke.icon),Jt=!(q&&me.verticalPlacedIconSymbolIndex&&tt);me.placedIconSymbolIndex>=0&&(ne(u.icon,me.numIconVertices,Jt?xt:ku),u.icon.placedSymbolArray.get(me.placedIconSymbolIndex).hidden=ke.icon.isHidden()),me.verticalPlacedIconSymbolIndex>=0&&(ne(u.icon,me.numVerticalIconVertices,Jt?ku:xt),u.icon.placedSymbolArray.get(me.verticalPlacedIconSymbolIndex).hidden=ke.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){var sr=u.collisionArrays[se];if(sr){var Yt=new a.Point(0,0);if(sr.textBox||sr.verticalTextBox){var Kt=!0;if(k){var ir=d.variableOffsets[Me];ir?(Yt=Ai(ir.anchor,ir.width,ir.height,ir.textOffset,ir.textBoxScale),R&&Yt._rotate($?d.transform.angle:-d.transform.angle)):Kt=!1}sr.textBox&&Il(u.textCollisionBox.collisionVertexArray,ke.text.placed,!Kt||tt,Yt.x,Yt.y),sr.verticalTextBox&&Il(u.textCollisionBox.collisionVertexArray,ke.text.placed,!Kt||gt,Yt.x,Yt.y)}var Zt=Boolean(!gt&&sr.verticalIconBox);sr.iconBox&&Il(u.iconCollisionBox.collisionVertexArray,ke.icon.placed,Zt,q?Yt.x:0,q?Yt.y:0),sr.verticalIconBox&&Il(u.iconCollisionBox.collisionVertexArray,ke.icon.placed,!Zt,q?Yt.x:0,q?Yt.y:0)}}},le=0;le<u.symbolInstances.length;le++)re(le);if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.bucketInstanceId in this.collisionCircleArrays){var J=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=J.invProjMatrix,u.placementViewportMatrix=J.viewportMatrix,u.collisionCircleArray=J.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}},Wi.prototype.symbolFadeChange=function(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Wi.prototype.zoomAdjustment=function(u){return Math.max(0,(this.transform.zoom-u)/1.5)},Wi.prototype.hasTransitions=function(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration},Wi.prototype.stillRecent=function(u,f){var c=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*c>u},Wi.prototype.setStale=function(){this.stale=!0};var A1=Math.pow(2,25),P1=Math.pow(2,24),dd=Math.pow(2,17),k1=Math.pow(2,16),kg=Math.pow(2,9),L1=Math.pow(2,8),Lg=Math.pow(2,1);function Dg(u){if(u.opacity===0&&!u.placed)return 0;if(u.opacity===1&&u.placed)return 4294967295;var f=u.placed?1:0,c=Math.floor(127*u.opacity);return c*A1+f*P1+c*dd+f*k1+c*kg+f*L1+c*Lg+f}var ku=0,md=function(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&u.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};md.prototype.continuePlacement=function(u,f,c,d,_){for(var w=this._bucketParts;this._currentTileIndex<u.length;)if(f.getBucketParts(w,d,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(E,O){return E.sortKey-O.sortKey}));this._currentPartIndex<w.length;)if(f.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,c),this._currentPartIndex++,_())return!0;return!1};var Fc=function(u,f,c,d,_,w,E){this.placement=new Wi(u,_,w,E),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=c,this._showCollisionBoxes=d,this._done=!1};Fc.prototype.isDone=function(){return this._done},Fc.prototype.continuePlacement=function(u,f,c){for(var d=this,_=a.browser.now(),w=function(){var k=a.browser.now()-_;return!d._forceFullPlacement&&k>2};this._currentPlacementIndex>=0;){var E=f[u[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=O)&&(!E.maxzoom||E.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new md(E)),this._inProgressLayer.continuePlacement(c[E.source],this.placement,this._showCollisionBoxes,E,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Fc.prototype.commit=function(u){return this.placement.commit(u),this.placement};var Ng=512/a.EXTENT/2,Qh=function(u,f,c){this.tileID=u,this.indexedSymbolInstances={},this.bucketInstanceId=c;for(var d=0;d<f.length;d++){var _=f.get(d),w=_.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:_.crossTileID,coord:this.getScaledCoordinates(_,u)})}};Qh.prototype.getScaledCoordinates=function(u,f){var c=Ng/Math.pow(2,f.canonical.z-this.tileID.canonical.z);return{x:Math.floor((f.canonical.x*a.EXTENT+u.anchorX)*c),y:Math.floor((f.canonical.y*a.EXTENT+u.anchorY)*c)}},Qh.prototype.findMatches=function(u,f,c){for(var d=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z),_=0;_<u.length;_++){var w=u.get(_);if(!w.crossTileID){var E=this.indexedSymbolInstances[w.key];if(E)for(var O=this.getScaledCoordinates(w,f),k=0,R=E;k<R.length;k+=1){var $=R[k];if(Math.abs($.coord.x-O.x)<=d&&Math.abs($.coord.y-O.y)<=d&&!c[$.crossTileID]){c[$.crossTileID]=!0,w.crossTileID=$.crossTileID;break}}}}};var Jo=function(){this.maxCrossTileID=0};Jo.prototype.generate=function(){return++this.maxCrossTileID};var Bs=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Bs.prototype.handleWrapJump=function(u){var f=Math.round((u-this.lng)/360);if(f!==0)for(var c in this.indexes){var d=this.indexes[c],_={};for(var w in d){var E=d[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+f),_[E.tileID.key]=E}this.indexes[c]=_}this.lng=u},Bs.prototype.addBucket=function(u,f,c){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(var d=0;d<f.symbolInstances.length;d++)f.symbolInstances.get(d).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});var _=this.usedCrossTileIDs[u.overscaledZ];for(var w in this.indexes){var E=this.indexes[w];if(Number(w)>u.overscaledZ)for(var O in E){var k=E[O];k.tileID.isChildOf(u)&&k.findMatches(f.symbolInstances,u,_)}else{var R=E[u.scaledTo(Number(w)).key];R&&R.findMatches(f.symbolInstances,u,_)}}for(var $=0;$<f.symbolInstances.length;$++){var q=f.symbolInstances.get($);q.crossTileID||(q.crossTileID=c.generate(),_[q.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Qh(u,f.symbolInstances,f.bucketInstanceId),!0},Bs.prototype.removeBucketCrossTileIDs=function(u,f){for(var c in f.indexedSymbolInstances)for(var d=0,_=f.indexedSymbolInstances[c];d<_.length;d+=1)delete this.usedCrossTileIDs[u][_[d].crossTileID]},Bs.prototype.removeStaleBuckets=function(u){var f=!1;for(var c in this.indexes){var d=this.indexes[c];for(var _ in d)u[d[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,d[_]),delete d[_],f=!0)}return f};var Vs=function(){this.layerIndexes={},this.crossTileIDs=new Jo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Vs.prototype.addLayer=function(u,f,c){var d=this.layerIndexes[u.id];d===void 0&&(d=this.layerIndexes[u.id]=new Bs);var _=!1,w={};d.handleWrapJump(c);for(var E=0,O=f;E<O.length;E+=1){var k=O[E],R=k.getBucket(u);R&&u.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(k.tileID,R,this.crossTileIDs)&&(_=!0),w[R.bucketInstanceId]=!0)}return d.removeStaleBuckets(w)&&(_=!0),_},Vs.prototype.pruneUnusedLayers=function(u){var f={};for(var c in u.forEach(function(d){f[d]=!0}),this.layerIndexes)f[c]||delete this.layerIndexes[c]};var Ol=function(u,f){return a.emitValidationErrors(u,f&&f.filter(function(c){return c.identifier!=="source.canvas"}))},Us=a.pick(De,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),js=a.pick(De,["setCenter","setZoom","setBearing","setPitch"]),ef=function(){var u={},f=a.styleSpec.$version;for(var c in a.styleSpec.$root){var d,_=a.styleSpec.$root[c];_.required&&(d=c==="version"?f:_.type==="array"?[]:{})!=null&&(u[c]=d)}return u}(),xo=function(u){function f(c,d){var _=this;d===void 0&&(d={}),u.call(this),this.map=c,this.dispatcher=new be(Le(),this),this.imageManager=new X,this.imageManager.setEventedParent(this),this.glyphManager=new Se(c._requestManager,d.localIdeographFontFamily),this.lineAtlas=new st(256,512),this.crossTileSymbolIndex=new Vs,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var w=this;this._rtlTextPluginCallback=f.registerForPluginStateChange(function(E){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},function(O,k){if(a.triggerPluginCompletionEvent(O),k&&k.every(function($){return $}))for(var R in w.sourceCaches)w.sourceCaches[R].reload()})}),this.on("data",function(E){if(E.dataType==="source"&&E.sourceDataType==="metadata"){var O=_.sourceCaches[E.sourceId];if(O){var k=O.getSource();if(k&&k.vectorLayerIds)for(var R in _._layers){var $=_._layers[R];$.source===k.id&&_._validateLayer($)}}}})}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.loadURL=function(c,d){var _=this;d===void 0&&(d={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var w=typeof d.validate=="boolean"?d.validate:!a.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,d.accessToken);var E=this.map._requestManager.transformRequest(c,a.ResourceType.Style);this._request=a.getJSON(E,function(O,k){_._request=null,O?_.fire(new a.ErrorEvent(O)):k&&_._load(k,w)})},f.prototype.loadJSON=function(c,d){var _=this;d===void 0&&(d={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){_._request=null,_._load(c,d.validate!==!1)})},f.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(ef,!1)},f.prototype._load=function(c,d){if(!d||!Ol(this,a.validateStyle(c))){for(var _ in this._loaded=!0,this.stylesheet=c,c.sources)this.addSource(_,c.sources[_],{validate:!1});c.sprite?this._loadSprite(c.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(c.glyphs);var w=lt(this.stylesheet.layers);this._order=w.map(function(R){return R.id}),this._layers={},this._serializedLayers={};for(var E=0,O=w;E<O.length;E+=1){var k=O[E];(k=a.createStyleLayer(k)).setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=k,this._serializedLayers[k.id]=k.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new $e(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},f.prototype._loadSprite=function(c){var d=this;this._spriteRequest=function(_,w,E){var O,k,R,$=a.browser.devicePixelRatio>1?"@2x":"",q=a.getJSON(w.transformRequest(w.normalizeSpriteURL(_,$,".json"),a.ResourceType.SpriteJSON),function(re,le){q=null,R||(R=re,O=le,ne())}),H=a.getImage(w.transformRequest(w.normalizeSpriteURL(_,$,".png"),a.ResourceType.SpriteImage),function(re,le){H=null,R||(R=re,k=le,ne())});function ne(){if(R)E(R);else if(O&&k){var re=a.browser.getImageData(k),le={};for(var J in O){var se=O[J],me=se.width,xe=se.height,Ae=se.x,Me=se.y,ke=se.sdf,je=se.pixelRatio,it=se.stretchX,tt=se.stretchY,gt=se.content,Nt=new a.RGBAImage({width:me,height:xe});a.RGBAImage.copy(re,Nt,{x:Ae,y:Me},{x:0,y:0},{width:me,height:xe}),le[J]={data:Nt,pixelRatio:je,sdf:ke,stretchX:it,stretchY:tt,content:gt}}E(null,le)}}return{cancel:function(){q&&(q.cancel(),q=null),H&&(H.cancel(),H=null)}}}(c,this.map._requestManager,function(_,w){if(d._spriteRequest=null,_)d.fire(new a.ErrorEvent(_));else if(w)for(var E in w)d.imageManager.addImage(E,w[E]);d.imageManager.setLoaded(!0),d._availableImages=d.imageManager.listImages(),d.dispatcher.broadcast("setImages",d._availableImages),d.fire(new a.Event("data",{dataType:"style"}))})},f.prototype._validateLayer=function(c){var d=this.sourceCaches[c.source];if(d){var _=c.sourceLayer;if(_){var w=d.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(_)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+_+'" does not exist on source "'+w.id+'" as specified by style layer "'+c.id+'"')))}}},f.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var c in this.sourceCaches)if(!this.sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()},f.prototype._serializeLayers=function(c){for(var d=[],_=0,w=c;_<w.length;_+=1){var E=this._layers[w[_]];E.type!=="custom"&&d.push(E.serialize())}return d},f.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var c in this.sourceCaches)if(this.sourceCaches[c].hasTransition())return!0;for(var d in this._layers)if(this._layers[d].hasTransition())return!0;return!1},f.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},f.prototype.update=function(c){if(this._loaded){var d=this._changed;if(this._changed){var _=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var E in(_.length||w.length)&&this._updateWorkerLayers(_,w),this._updatedSources){var O=this._updatedSources[E];O==="reload"?this._reloadSource(E):O==="clear"&&this._clearSource(E)}for(var k in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[k].updateTransitions(c);this.light.updateTransitions(c),this._resetUpdates()}var R={};for(var $ in this.sourceCaches){var q=this.sourceCaches[$];R[$]=q.used,q.used=!1}for(var H=0,ne=this._order;H<ne.length;H+=1){var re=this._layers[ne[H]];re.recalculate(c,this._availableImages),!re.isHidden(c.zoom)&&re.source&&(this.sourceCaches[re.source].used=!0)}for(var le in R){var J=this.sourceCaches[le];R[le]!==J.used&&J.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:le}))}this.light.recalculate(c),this.z=c.zoom,d&&this.fire(new a.Event("data",{dataType:"style"}))}},f.prototype._updateTilesForChangedImages=function(){var c=Object.keys(this._changedImages);if(c.length){for(var d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}},f.prototype._updateWorkerLayers=function(c,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:d})},f.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},f.prototype.setState=function(c){var d=this;if(this._checkLoaded(),Ol(this,a.validateStyle(c)))return!1;(c=a.clone$1(c)).layers=lt(c.layers);var _=function(E,O){if(!E)return[{command:De.setStyle,args:[O]}];var k=[];try{if(!a.deepEqual(E.version,O.version))return[{command:De.setStyle,args:[O]}];a.deepEqual(E.center,O.center)||k.push({command:De.setCenter,args:[O.center]}),a.deepEqual(E.zoom,O.zoom)||k.push({command:De.setZoom,args:[O.zoom]}),a.deepEqual(E.bearing,O.bearing)||k.push({command:De.setBearing,args:[O.bearing]}),a.deepEqual(E.pitch,O.pitch)||k.push({command:De.setPitch,args:[O.pitch]}),a.deepEqual(E.sprite,O.sprite)||k.push({command:De.setSprite,args:[O.sprite]}),a.deepEqual(E.glyphs,O.glyphs)||k.push({command:De.setGlyphs,args:[O.glyphs]}),a.deepEqual(E.transition,O.transition)||k.push({command:De.setTransition,args:[O.transition]}),a.deepEqual(E.light,O.light)||k.push({command:De.setLight,args:[O.light]});var R={},$=[];(function(H,ne,re,le){var J;for(J in ne=ne||{},H=H||{})H.hasOwnProperty(J)&&(ne.hasOwnProperty(J)||Ee(J,re,le));for(J in ne)ne.hasOwnProperty(J)&&(H.hasOwnProperty(J)?a.deepEqual(H[J],ne[J])||(H[J].type==="geojson"&&ne[J].type==="geojson"&&$t(H,ne,J)?re.push({command:De.setGeoJSONSourceData,args:[J,ne[J].data]}):He(J,ne,re,le)):fe(J,ne,re))})(E.sources,O.sources,$,R);var q=[];E.layers&&E.layers.forEach(function(H){R[H.source]?k.push({command:De.removeLayer,args:[H.id]}):q.push(H)}),k=k.concat($),function(H,ne,re){ne=ne||[];var le,J,se,me,xe,Ae,Me,ke=(H=H||[]).map(Qt),je=ne.map(Qt),it=H.reduce(Xt,{}),tt=ne.reduce(Xt,{}),gt=ke.slice(),Nt=Object.create(null);for(le=0,J=0;le<ke.length;le++)tt.hasOwnProperty(se=ke[le])?J++:(re.push({command:De.removeLayer,args:[se]}),gt.splice(gt.indexOf(se,J),1));for(le=0,J=0;le<je.length;le++)gt[gt.length-1-le]!==(se=je[je.length-1-le])&&(it.hasOwnProperty(se)?(re.push({command:De.removeLayer,args:[se]}),gt.splice(gt.lastIndexOf(se,gt.length-J),1)):J++,re.push({command:De.addLayer,args:[tt[se],Ae=gt[gt.length-le]]}),gt.splice(gt.length-le,0,se),Nt[se]=!0);for(le=0;le<je.length;le++)if(me=it[se=je[le]],xe=tt[se],!Nt[se]&&!a.deepEqual(me,xe))if(a.deepEqual(me.source,xe.source)&&a.deepEqual(me["source-layer"],xe["source-layer"])&&a.deepEqual(me.type,xe.type)){for(Me in Ht(me.layout,xe.layout,re,se,null,De.setLayoutProperty),Ht(me.paint,xe.paint,re,se,null,De.setPaintProperty),a.deepEqual(me.filter,xe.filter)||re.push({command:De.setFilter,args:[se,xe.filter]}),a.deepEqual(me.minzoom,xe.minzoom)&&a.deepEqual(me.maxzoom,xe.maxzoom)||re.push({command:De.setLayerZoomRange,args:[se,xe.minzoom,xe.maxzoom]}),me)me.hasOwnProperty(Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?Ht(me[Me],xe[Me],re,se,Me.slice(6),De.setPaintProperty):a.deepEqual(me[Me],xe[Me])||re.push({command:De.setLayerProperty,args:[se,Me,xe[Me]]}));for(Me in xe)xe.hasOwnProperty(Me)&&!me.hasOwnProperty(Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?Ht(me[Me],xe[Me],re,se,Me.slice(6),De.setPaintProperty):a.deepEqual(me[Me],xe[Me])||re.push({command:De.setLayerProperty,args:[se,Me,xe[Me]]}))}else re.push({command:De.removeLayer,args:[se]}),Ae=gt[gt.lastIndexOf(se)+1],re.push({command:De.addLayer,args:[xe,Ae]})}(q,O.layers,k)}catch(H){console.warn("Unable to compute style diff:",H),k=[{command:De.setStyle,args:[O]}]}return k}(this.serialize(),c).filter(function(E){return!(E.command in js)});if(_.length===0)return!1;var w=_.filter(function(E){return!(E.command in Us)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(E){return E.command}).join(", ")+".");return _.forEach(function(E){E.command!=="setTransition"&&d[E.command].apply(d,E.args)}),this.stylesheet=c,!0},f.prototype.addImage=function(c,d){if(this.getImage(c))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(c,d),this._afterImageUpdated(c)},f.prototype.updateImage=function(c,d){this.imageManager.updateImage(c,d)},f.prototype.getImage=function(c){return this.imageManager.getImage(c)},f.prototype.removeImage=function(c){if(!this.getImage(c))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(c),this._afterImageUpdated(c)},f.prototype._afterImageUpdated=function(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},f.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},f.prototype.addSource=function(c,d,_){var w=this;if(_===void 0&&(_={}),this._checkLoaded(),this.sourceCaches[c]!==void 0)throw new Error("There is already a source with this ID");if(!d.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(d).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(a.validateStyle.source,"sources."+c,d,null,_))){this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);var E=this.sourceCaches[c]=new ie(c,d,this.dispatcher);E.style=this,E.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:E.serialize(),sourceId:c}}),E.onAdd(this.map),this._changed=!0}},f.prototype.removeSource=function(c){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error("There is no source with this ID");for(var d in this._layers)if(this._layers[d].source===c)return this.fire(new a.ErrorEvent(new Error('Source "'+c+'" cannot be removed while layer "'+d+'" is using it.')));var _=this.sourceCaches[c];delete this.sourceCaches[c],delete this._updatedSources[c],_.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),_.setEventedParent(null),_.clearTiles(),_.onRemove&&_.onRemove(this.map),this._changed=!0},f.prototype.setGeoJSONSourceData=function(c,d){this._checkLoaded(),this.sourceCaches[c].getSource().setData(d),this._changed=!0},f.prototype.getSource=function(c){return this.sourceCaches[c]&&this.sourceCaches[c].getSource()},f.prototype.addLayer=function(c,d,_){_===void 0&&(_={}),this._checkLoaded();var w=c.id;if(this.getLayer(w))this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var E;if(c.type==="custom"){if(Ol(this,a.validateCustomStyleLayer(c)))return;E=a.createStyleLayer(c)}else{if(typeof c.source=="object"&&(this.addSource(w,c.source),c=a.clone$1(c),c=a.extend(c,{source:w})),this._validate(a.validateStyle.layer,"layers."+w,c,{arrayIndex:-1},_))return;E=a.createStyleLayer(c),this._validateLayer(E),E.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[E.id]=E.serialize()}var O=d?this._order.indexOf(d):this._order.length;if(d&&O===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+d+'" does not exist on this map.')));else{if(this._order.splice(O,0,w),this._layerOrderChanged=!0,this._layers[w]=E,this._removedLayers[w]&&E.source&&E.type!=="custom"){var k=this._removedLayers[w];delete this._removedLayers[w],k.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}},f.prototype.moveLayer=function(c,d){if(this._checkLoaded(),this._changed=!0,this._layers[c]){if(c!==d){var _=this._order.indexOf(c);this._order.splice(_,1);var w=d?this._order.indexOf(d):this._order.length;d&&w===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+d+'" does not exist on this map.'))):(this._order.splice(w,0,c),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be moved.")))},f.prototype.removeLayer=function(c){this._checkLoaded();var d=this._layers[c];if(d){d.setEventedParent(null);var _=this._order.indexOf(c);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=d,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],d.onRemove&&d.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be removed.")))},f.prototype.getLayer=function(c){return this._layers[c]},f.prototype.hasLayer=function(c){return c in this._layers},f.prototype.setLayerZoomRange=function(c,d,_){this._checkLoaded();var w=this.getLayer(c);w?w.minzoom===d&&w.maxzoom===_||(d!=null&&(w.minzoom=d),_!=null&&(w.maxzoom=_),this._updateLayer(w)):this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot have zoom extent.")))},f.prototype.setFilter=function(c,d,_){_===void 0&&(_={}),this._checkLoaded();var w=this.getLayer(c);if(w){if(!a.deepEqual(w.filter,d))return d==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(a.validateStyle.filter,"layers."+w.id+".filter",d,null,_)||(w.filter=a.clone$1(d),this._updateLayer(w)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be filtered.")))},f.prototype.getFilter=function(c){return a.clone$1(this.getLayer(c).filter)},f.prototype.setLayoutProperty=function(c,d,_,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(c);E?a.deepEqual(E.getLayoutProperty(d),_)||(E.setLayoutProperty(d,_,w),this._updateLayer(E)):this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be styled.")))},f.prototype.getLayoutProperty=function(c,d){var _=this.getLayer(c);if(_)return _.getLayoutProperty(d);this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style.")))},f.prototype.setPaintProperty=function(c,d,_,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(c);E?a.deepEqual(E.getPaintProperty(d),_)||(E.setPaintProperty(d,_,w)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be styled.")))},f.prototype.getPaintProperty=function(c,d){return this.getLayer(c).getPaintProperty(d)},f.prototype.setFeatureState=function(c,d){this._checkLoaded();var _=c.source,w=c.sourceLayer,E=this.sourceCaches[_];if(E!==void 0){var O=E.getSource().type;O==="geojson"&&w?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):O!=="vector"||w?(c.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(w,c.id,d)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+_+"' does not exist in the map's style.")))},f.prototype.removeFeatureState=function(c,d){this._checkLoaded();var _=c.source,w=this.sourceCaches[_];if(w!==void 0){var E=w.getSource().type,O=E==="vector"?c.sourceLayer:void 0;E!=="vector"||O?d&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(O,c.id,d):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+_+"' does not exist in the map's style.")))},f.prototype.getFeatureState=function(c){this._checkLoaded();var d=c.source,_=c.sourceLayer,w=this.sourceCaches[d];if(w!==void 0){if(w.getSource().type!=="vector"||_)return c.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(_,c.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+d+"' does not exist in the map's style.")))},f.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},f.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(c){return c.serialize()}),layers:this._serializeLayers(this._order)},function(c){return c!==void 0})},f.prototype._updateLayer=function(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.sourceCaches[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.sourceCaches[c.source].pause()),this._changed=!0},f.prototype._flattenAndSortRenderedFeatures=function(c){for(var d=this,_=function(it){return d._layers[it].type==="fill-extrusion"},w={},E=[],O=this._order.length-1;O>=0;O--){var k=this._order[O];if(_(k)){w[k]=O;for(var R=0,$=c;R<$.length;R+=1){var q=$[R][k];if(q)for(var H=0,ne=q;H<ne.length;H+=1)E.push(ne[H])}}}E.sort(function(it,tt){return tt.intersectionZ-it.intersectionZ});for(var re=[],le=this._order.length-1;le>=0;le--){var J=this._order[le];if(_(J))for(var se=E.length-1;se>=0;se--){var me=E[se].feature;if(w[me.layer.id]<le)break;re.push(me),E.pop()}else for(var xe=0,Ae=c;xe<Ae.length;xe+=1){var Me=Ae[xe][J];if(Me)for(var ke=0,je=Me;ke<je.length;ke+=1)re.push(je[ke].feature)}}return re},f.prototype.queryRenderedFeatures=function(c,d,_){d&&d.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);var w={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var E=0,O=d.layers;E<O.length;E+=1){var k=O[E],R=this._layers[k];if(!R)return this.fire(new a.ErrorEvent(new Error("The layer '"+k+"' does not exist in the map's style and cannot be queried for features."))),[];w[R.source]=!0}}var $=[];for(var q in d.availableImages=this._availableImages,this.sourceCaches)d.layers&&!w[q]||$.push(Lr(this.sourceCaches[q],this._layers,this._serializedLayers,c,d,_));return this.placement&&$.push(function(H,ne,re,le,J,se,me){for(var xe={},Ae=se.queryRenderedSymbols(le),Me=[],ke=0,je=Object.keys(Ae).map(Number);ke<je.length;ke+=1)Me.push(me[je[ke]]);Me.sort(qn);for(var it=function(){var Bt=gt[tt],Cr=Bt.featureIndex.lookupSymbolFeatures(Ae[Bt.bucketInstanceId],ne,Bt.bucketIndex,Bt.sourceLayerIndex,J.filter,J.layers,J.availableImages,H);for(var xt in Cr){var Jt=xe[xt]=xe[xt]||[],sr=Cr[xt];sr.sort(function(ir,Zt){var qt=Bt.featureSortOrder;if(qt){var fi=qt.indexOf(ir.featureIndex);return qt.indexOf(Zt.featureIndex)-fi}return Zt.featureIndex-ir.featureIndex});for(var Yt=0,Kt=sr;Yt<Kt.length;Yt+=1)Jt.push(Kt[Yt])}},tt=0,gt=Me;tt<gt.length;tt+=1)it();var Nt=function(Bt){xe[Bt].forEach(function(Cr){var xt=Cr.feature,Jt=re[H[Bt].source].getFeatureState(xt.layer["source-layer"],xt.id);xt.source=xt.layer.source,xt.layer["source-layer"]&&(xt.sourceLayer=xt.layer["source-layer"]),xt.state=Jt})};for(var Ut in xe)Nt(Ut);return xe}(this._layers,this._serializedLayers,this.sourceCaches,c,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures($)},f.prototype.querySourceFeatures=function(c,d){d&&d.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);var _=this.sourceCaches[c];return _?function(w,E){for(var O=w.getRenderableIds().map(function(ne){return w.getTileByID(ne)}),k=[],R={},$=0;$<O.length;$++){var q=O[$],H=q.tileID.canonical.key;R[H]||(R[H]=!0,q.querySourceFeatures(k,E))}return k}(_,d):[]},f.prototype.addSourceType=function(c,d,_){return f.getSourceType(c)?_(new Error('A source type called "'+c+'" already exists.')):(f.setSourceType(c,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:d.workerSourceURL},_):_(null,null))},f.prototype.getLight=function(){return this.light.getLight()},f.prototype.setLight=function(c,d){d===void 0&&(d={}),this._checkLoaded();var _=this.light.getLight(),w=!1;for(var E in c)if(!a.deepEqual(c[E],_[E])){w=!0;break}if(w){var O={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,d),this.light.updateTransitions(O)}},f.prototype._validate=function(c,d,_,w,E){return E===void 0&&(E={}),(!E||E.validate!==!1)&&Ol(this,c.call(a.validateStyle,a.extend({key:d,style:this.serialize(),value:_,styleSpec:a.styleSpec},w)))},f.prototype._remove=function(){for(var c in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[c].setEventedParent(null);for(var d in this.sourceCaches)this.sourceCaches[d].clearTiles(),this.sourceCaches[d].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},f.prototype._clearSource=function(c){this.sourceCaches[c].clearTiles()},f.prototype._reloadSource=function(c){this.sourceCaches[c].resume(),this.sourceCaches[c].reload()},f.prototype._updateSources=function(c){for(var d in this.sourceCaches)this.sourceCaches[d].update(c)},f.prototype._generateCollisionBoxes=function(){for(var c in this.sourceCaches)this._reloadSource(c)},f.prototype._updatePlacement=function(c,d,_,w,E){E===void 0&&(E=!1);for(var O=!1,k=!1,R={},$=0,q=this._order;$<q.length;$+=1){var H=this._layers[q[$]];if(H.type==="symbol"){if(!R[H.source]){var ne=this.sourceCaches[H.source];R[H.source]=ne.getRenderableIds(!0).map(function(me){return ne.getTileByID(me)}).sort(function(me,xe){return xe.tileID.overscaledZ-me.tileID.overscaledZ||(me.tileID.isLessThan(xe.tileID)?-1:1)})}var re=this.crossTileSymbolIndex.addLayer(H,R[H.source],c.center.lng);O=O||re}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),c.zoom))&&(this.pauseablePlacement=new Fc(c,this._order,E,d,_,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),k=!0),O&&this.pauseablePlacement.placement.setStale()),k||O)for(var le=0,J=this._order;le<J.length;le+=1){var se=this._layers[J[le]];se.type==="symbol"&&this.placement.updateLayerOpacities(se,R[se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},f.prototype._releaseSymbolFadeTiles=function(){for(var c in this.sourceCaches)this.sourceCaches[c].releaseSymbolFadeTiles()},f.prototype.getImages=function(c,d,_){this.imageManager.getImages(d.icons,_),this._updateTilesForChangedImages();var w=this.sourceCaches[d.source];w&&w.setDependencies(d.tileID.key,d.type,d.icons)},f.prototype.getGlyphs=function(c,d,_){this.glyphManager.getGlyphs(d.stacks,_)},f.prototype.getResource=function(c,d,_){return a.makeRequest(d,_)},f}(a.Evented);xo.getSourceType=function(u){return Gi[u]},xo.setSourceType=function(u,f){Gi[u]=f},xo.registerForPluginStateChange=a.registerForPluginStateChange;var Hn=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Lu=Yr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Rg=Yr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),D1=Yr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),N1=Yr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),yd=Yr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),gd=Yr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),vd=Yr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),_d=Yr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),zg=Yr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Fg=Yr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),R1=Yr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Bc=Yr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Vc=Yr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Bg=Yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Pi=Yr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),xd=Yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Gs=Yr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),$s=Yr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Cl=Yr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Al=Yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),qs=Yr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Pl=Yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),kl=Yr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ws=Yr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Vg=Yr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Ug=Yr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Yr(u,f){var c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=f.match(/attribute ([\w]+) ([\w]+)/g),_=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=w?w.concat(_):_,O={};return{fragmentSource:u=u.replace(c,function(k,R,$,q,H){return O[H]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_`+H+`
varying `+$+" "+q+" "+H+`;
#else
uniform `+$+" "+q+" u_"+H+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+H+`
    `+$+" "+q+" "+H+" = u_"+H+`;
#endif
`}),vertexSource:f=f.replace(c,function(k,R,$,q,H){var ne=q==="float"?"vec2":"vec4",re=H.match(/color/)?"color":ne;return O[H]?R==="define"?`
#ifndef HAS_UNIFORM_u_`+H+`
uniform lowp float u_`+H+`_t;
attribute `+$+" "+ne+" a_"+H+`;
varying `+$+" "+q+" "+H+`;
#else
uniform `+$+" "+q+" u_"+H+`;
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_`+H+`
    `+H+" = a_"+H+`;
#else
    `+$+" "+q+" "+H+" = u_"+H+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+H+`
    `+H+" = unpack_mix_"+re+"(a_"+H+", u_"+H+`_t);
#else
    `+$+" "+q+" "+H+" = u_"+H+`;
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_`+H+`
uniform lowp float u_`+H+`_t;
attribute `+$+" "+ne+" a_"+H+`;
#else
uniform `+$+" "+q+" u_"+H+`;
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_`+H+`
    `+$+" "+q+" "+H+" = a_"+H+`;
#else
    `+$+" "+q+" "+H+" = u_"+H+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+H+`
    `+$+" "+q+" "+H+" = unpack_mix_"+re+"(a_"+H+", u_"+H+`_t);
#else
    `+$+" "+q+" "+H+" = u_"+H+`;
#endif
`}),staticAttributes:d,staticUniforms:E}}var z1=Object.freeze({__proto__:null,prelude:Lu,background:Rg,backgroundPattern:D1,circle:N1,clippingMask:yd,heatmap:gd,heatmapTexture:vd,collisionBox:_d,collisionCircle:zg,debug:Fg,fill:R1,fillOutline:Bc,fillOutlinePattern:Vc,fillPattern:Bg,fillExtrusion:Pi,fillExtrusionPattern:xd,hillshadePrepare:Gs,hillshade:$s,line:Cl,lineGradient:Al,linePattern:qs,lineSDF:Pl,raster:kl,symbolIcon:Ws,symbolSDF:Vg,symbolTextAndIcon:Ug}),tf=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function jg(u){for(var f=[],c=0;c<u.length;c++)if(u[c]!==null){var d=u[c].split(" ");f.push(d.pop())}return f}tf.prototype.bind=function(u,f,c,d,_,w,E,O){this.context=u;for(var k=this.boundPaintVertexBuffers.length!==d.length,R=0;!k&&R<d.length;R++)this.boundPaintVertexBuffers[R]!==d[R]&&(k=!0);u.extVertexArrayObject&&this.vao&&this.boundProgram===f&&this.boundLayoutVertexBuffer===c&&!k&&this.boundIndexBuffer===_&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===O?(u.bindVertexArrayOES.set(this.vao),E&&E.bind(),_&&_.dynamicDraw&&_.bind(),O&&O.bind()):this.freshBind(f,c,d,_,w,E,O)},tf.prototype.freshBind=function(u,f,c,d,_,w,E){var O,k=u.numAttributes,R=this.context,$=R.gl;if(R.extVertexArrayObject)this.vao&&this.destroy(),this.vao=R.extVertexArrayObject.createVertexArrayOES(),R.bindVertexArrayOES.set(this.vao),O=0,this.boundProgram=u,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=d,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E;else{O=R.currentNumAttributes||0;for(var q=k;q<O;q++)$.disableVertexAttribArray(q)}f.enableAttributes($,u);for(var H=0,ne=c;H<ne.length;H+=1)ne[H].enableAttributes($,u);w&&w.enableAttributes($,u),E&&E.enableAttributes($,u),f.bind(),f.setVertexAttribPointers($,u,_);for(var re=0,le=c;re<le.length;re+=1){var J=le[re];J.bind(),J.setVertexAttribPointers($,u,_)}w&&(w.bind(),w.setVertexAttribPointers($,u,_)),d&&d.bind(),E&&(E.bind(),E.setVertexAttribPointers($,u,_)),R.currentNumAttributes=k},tf.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Gg=function(u,f,c,d,_,w){var E=u.gl;this.program=E.createProgram();for(var O=jg(c.staticAttributes),k=d?d.getBinderAttributes():[],R=O.concat(k),$=c.staticUniforms?jg(c.staticUniforms):[],q=d?d.getBinderUniforms():[],H=[],ne=0,re=$.concat(q);ne<re.length;ne+=1){var le=re[ne];H.indexOf(le)<0&&H.push(le)}var J=d?d.defines():[];w&&J.push("#define OVERDRAW_INSPECTOR;");var se=J.concat(Lu.fragmentSource,c.fragmentSource).join(`
`),me=J.concat(Lu.vertexSource,c.vertexSource).join(`
`),xe=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(xe,se),E.compileShader(xe),E.attachShader(this.program,xe);var Ae=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(Ae,me),E.compileShader(Ae),E.attachShader(this.program,Ae),this.attributes={};var Me={};this.numAttributes=R.length;for(var ke=0;ke<this.numAttributes;ke++)R[ke]&&(E.bindAttribLocation(this.program,ke,R[ke]),this.attributes[R[ke]]=ke);E.linkProgram(this.program),E.deleteShader(Ae),E.deleteShader(xe);for(var je=0;je<H.length;je++){var it=H[je];if(it&&!Me[it]){var tt=E.getUniformLocation(this.program,it);tt&&(Me[it]=tt)}}this.fixedUniforms=_(u,Me),this.binderUniforms=d?d.getUniforms(u,Me):[]}}};function $g(u,f,c){var d=1/gn(c,1,f.transform.tileZoom),_=Math.pow(2,c.tileID.overscaledZ),w=c.tileSize*Math.pow(2,f.transform.tileZoom)/_,E=w*(c.tileID.canonical.x+c.tileID.wrap*_),O=w*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d,u.fromScale,u.toScale],u_fade:u.t,u_pixel_coord_upper:[E>>16,O>>16],u_pixel_coord_lower:[65535&E,65535&O]}}Gg.prototype.draw=function(u,f,c,d,_,w,E,O,k,R,$,q,H,ne,re,le){var J,se=u.gl;if(!this.failedToCreate){for(var me in u.program.set(this.program),u.setDepthMode(c),u.setStencilMode(d),u.setColorMode(_),u.setCullFace(w),this.fixedUniforms)this.fixedUniforms[me].set(E[me]);ne&&ne.setUniforms(u,this.binderUniforms,q,{zoom:H});for(var xe=(J={},J[se.LINES]=2,J[se.TRIANGLES]=3,J[se.LINE_STRIP]=1,J)[f],Ae=0,Me=$.get();Ae<Me.length;Ae+=1){var ke=Me[Ae],je=ke.vaos||(ke.vaos={});(je[O]||(je[O]=new tf)).bind(u,this,k,ne?ne.getPaintVertexBuffers():[],R,ke.vertexOffset,re,le),se.drawElements(f,ke.primitiveLength*xe,se.UNSIGNED_SHORT,ke.primitiveOffset*xe*2)}}};var qg=function(u,f,c,d){var _=f.style.light,w=_.properties.get("position"),E=[w.x,w.y,w.z],O=a.create$1();_.properties.get("anchor")==="viewport"&&a.fromRotation(O,-f.transform.angle),a.transformMat3(E,E,O);var k=_.properties.get("color");return{u_matrix:u,u_lightpos:E,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+c,u_opacity:d}},Ll=function(u,f,c,d,_,w,E){return a.extend(qg(u,f,c,d),$g(w,f,E),{u_height_factor:-Math.pow(2,_.overscaledZ)/E.tileSize/8})},Hs=function(u){return{u_matrix:u}},Dl=function(u,f,c,d){return a.extend(Hs(u),$g(c,f,d))},Wg=function(u,f){return{u_matrix:u,u_world:f}},Hg=function(u,f,c,d,_){return a.extend(Dl(u,f,c,d),{u_world:_})},bd=function(u,f,c,d){var _,w,E=u.transform;if(d.paint.get("circle-pitch-alignment")==="map"){var O=gn(c,1,E.zoom);_=!0,w=[O,O]}else _=!1,w=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:u.translatePosMatrix(f.posMatrix,c,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:w}},Nl=function(u,f,c){var d=gn(c,1,f.zoom),_=Math.pow(2,f.zoom-c.tileID.overscaledZ),w=c.tileID.overscaleFactor();return{u_matrix:u,u_camera_to_center_distance:f.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[f.pixelsToGLUnits[0]/(d*_),f.pixelsToGLUnits[1]/(d*_)],u_overscale_factor:w}},Zg=function(u,f,c){return{u_matrix:u,u_inv_matrix:f,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}},Rl=function(u,f,c){return c===void 0&&(c=1),{u_matrix:u,u_color:f,u_overlay:0,u_overlay_scale:c}},zl=function(u){return{u_matrix:u}},Xg=function(u,f,c,d){return{u_matrix:u,u_extrude_scale:gn(f,1,c),u_intensity:d}},Uc=function(u,f,c){var d=u.transform;return{u_matrix:Kg(u,f,c),u_ratio:1/gn(f,1,d.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},nn=function(u,f,c,d){return a.extend(Uc(u,f,c),{u_image:0,u_image_height:d})},rf=function(u,f,c,d){var _=u.transform,w=Du(f,_);return{u_matrix:Kg(u,f,c),u_texsize:f.imageAtlasTexture.size,u_ratio:1/gn(f,1,_.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[w,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},F1=function(u,f,c,d,_){var w=u.lineAtlas,E=Du(f,u.transform),O=c.layout.get("line-cap")==="round",k=w.getDash(d.from,O),R=w.getDash(d.to,O),$=k.width*_.fromScale,q=R.width*_.toScale;return a.extend(Uc(u,f,c),{u_patternscale_a:[E/$,-k.height/2],u_patternscale_b:[E/q,-R.height/2],u_sdfgamma:w.width/(256*Math.min($,q)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:R.y,u_mix:_.t})};function Du(u,f){return 1/gn(u,1,f.tileZoom)}function Kg(u,f,c){return u.translatePosMatrix(f.tileID.posMatrix,f,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}var B1=function(u,f,c,d,_){return{u_matrix:u,u_tl_parent:f,u_scale_parent:c,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(E=_.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(w=_.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:Yg(_.paint.get("raster-hue-rotate"))};var w,E};function Yg(u){u*=Math.PI/180;var f=Math.sin(u),c=Math.cos(u);return[(2*c+1)/3,(-Math.sqrt(3)*f-c+1)/3,(Math.sqrt(3)*f-c+1)/3]}var nf,Nu=function(u,f,c,d,_,w,E,O,k,R){var $=_.transform;return{u_is_size_zoom_constant:+(u==="constant"||u==="source"),u_is_size_feature_constant:+(u==="constant"||u==="camera"),u_size_t:f?f.uSizeT:0,u_size:f?f.uSize:0,u_camera_to_center_distance:$.cameraToCenterDistance,u_pitch:$.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:$.width/$.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:E,u_coord_matrix:O,u_is_text:+k,u_pitch_with_map:+d,u_texsize:R,u_texture:0}},jc=function(u,f,c,d,_,w,E,O,k,R,$){var q=_.transform;return a.extend(Nu(u,f,c,d,_,w,E,O,k,R),{u_gamma_scale:d?Math.cos(q._pitch)*q.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+$})},of=function(u,f,c,d,_,w,E,O,k,R){return a.extend(jc(u,f,c,d,_,w,E,O,!0,k,!0),{u_texsize_icon:R,u_texture_icon:1})},Gc=function(u,f,c){return{u_matrix:u,u_opacity:f,u_color:c}},Ru=function(u,f,c,d,_,w){return a.extend(function(E,O,k,R){var $=k.imageManager.getPattern(E.from.toString()),q=k.imageManager.getPattern(E.to.toString()),H=k.imageManager.getPixelSize(),ne=H.width,re=H.height,le=Math.pow(2,R.tileID.overscaledZ),J=R.tileSize*Math.pow(2,k.transform.tileZoom)/le,se=J*(R.tileID.canonical.x+R.tileID.wrap*le),me=J*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:$.tl,u_pattern_br_a:$.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[ne,re],u_mix:O.t,u_pattern_size_a:$.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:O.fromScale,u_scale_b:O.toScale,u_tile_units_to_pixels:1/gn(R,1,k.transform.tileZoom),u_pixel_coord_upper:[se>>16,me>>16],u_pixel_coord_lower:[65535&se,65535&me]}}(d,w,c,_),{u_matrix:u,u_opacity:f})},Jg={fillExtrusion:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_lightpos:new a.Uniform3f(u,f.u_lightpos),u_lightintensity:new a.Uniform1f(u,f.u_lightintensity),u_lightcolor:new a.Uniform3f(u,f.u_lightcolor),u_vertical_gradient:new a.Uniform1f(u,f.u_vertical_gradient),u_opacity:new a.Uniform1f(u,f.u_opacity)}},fillExtrusionPattern:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_lightpos:new a.Uniform3f(u,f.u_lightpos),u_lightintensity:new a.Uniform1f(u,f.u_lightintensity),u_lightcolor:new a.Uniform3f(u,f.u_lightcolor),u_vertical_gradient:new a.Uniform1f(u,f.u_vertical_gradient),u_height_factor:new a.Uniform1f(u,f.u_height_factor),u_image:new a.Uniform1i(u,f.u_image),u_texsize:new a.Uniform2f(u,f.u_texsize),u_pixel_coord_upper:new a.Uniform2f(u,f.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(u,f.u_pixel_coord_lower),u_scale:new a.Uniform3f(u,f.u_scale),u_fade:new a.Uniform1f(u,f.u_fade),u_opacity:new a.Uniform1f(u,f.u_opacity)}},fill:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix)}},fillPattern:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_image:new a.Uniform1i(u,f.u_image),u_texsize:new a.Uniform2f(u,f.u_texsize),u_pixel_coord_upper:new a.Uniform2f(u,f.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(u,f.u_pixel_coord_lower),u_scale:new a.Uniform3f(u,f.u_scale),u_fade:new a.Uniform1f(u,f.u_fade)}},fillOutline:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_world:new a.Uniform2f(u,f.u_world)}},fillOutlinePattern:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_world:new a.Uniform2f(u,f.u_world),u_image:new a.Uniform1i(u,f.u_image),u_texsize:new a.Uniform2f(u,f.u_texsize),u_pixel_coord_upper:new a.Uniform2f(u,f.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(u,f.u_pixel_coord_lower),u_scale:new a.Uniform3f(u,f.u_scale),u_fade:new a.Uniform1f(u,f.u_fade)}},circle:function(u,f){return{u_camera_to_center_distance:new a.Uniform1f(u,f.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(u,f.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(u,f.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(u,f.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(u,f.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(u,f.u_matrix)}},collisionBox:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_camera_to_center_distance:new a.Uniform1f(u,f.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(u,f.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(u,f.u_extrude_scale),u_overscale_factor:new a.Uniform1f(u,f.u_overscale_factor)}},collisionCircle:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_inv_matrix:new a.UniformMatrix4f(u,f.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(u,f.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(u,f.u_viewport_size)}},debug:function(u,f){return{u_color:new a.UniformColor(u,f.u_color),u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_overlay:new a.Uniform1i(u,f.u_overlay),u_overlay_scale:new a.Uniform1f(u,f.u_overlay_scale)}},clippingMask:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix)}},heatmap:function(u,f){return{u_extrude_scale:new a.Uniform1f(u,f.u_extrude_scale),u_intensity:new a.Uniform1f(u,f.u_intensity),u_matrix:new a.UniformMatrix4f(u,f.u_matrix)}},heatmapTexture:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_world:new a.Uniform2f(u,f.u_world),u_image:new a.Uniform1i(u,f.u_image),u_color_ramp:new a.Uniform1i(u,f.u_color_ramp),u_opacity:new a.Uniform1f(u,f.u_opacity)}},hillshade:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_image:new a.Uniform1i(u,f.u_image),u_latrange:new a.Uniform2f(u,f.u_latrange),u_light:new a.Uniform2f(u,f.u_light),u_shadow:new a.UniformColor(u,f.u_shadow),u_highlight:new a.UniformColor(u,f.u_highlight),u_accent:new a.UniformColor(u,f.u_accent)}},hillshadePrepare:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_image:new a.Uniform1i(u,f.u_image),u_dimension:new a.Uniform2f(u,f.u_dimension),u_zoom:new a.Uniform1f(u,f.u_zoom),u_unpack:new a.Uniform4f(u,f.u_unpack)}},line:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_ratio:new a.Uniform1f(u,f.u_ratio),u_device_pixel_ratio:new a.Uniform1f(u,f.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(u,f.u_units_to_pixels)}},lineGradient:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_ratio:new a.Uniform1f(u,f.u_ratio),u_device_pixel_ratio:new a.Uniform1f(u,f.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(u,f.u_units_to_pixels),u_image:new a.Uniform1i(u,f.u_image),u_image_height:new a.Uniform1f(u,f.u_image_height)}},linePattern:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_texsize:new a.Uniform2f(u,f.u_texsize),u_ratio:new a.Uniform1f(u,f.u_ratio),u_device_pixel_ratio:new a.Uniform1f(u,f.u_device_pixel_ratio),u_image:new a.Uniform1i(u,f.u_image),u_units_to_pixels:new a.Uniform2f(u,f.u_units_to_pixels),u_scale:new a.Uniform3f(u,f.u_scale),u_fade:new a.Uniform1f(u,f.u_fade)}},lineSDF:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_ratio:new a.Uniform1f(u,f.u_ratio),u_device_pixel_ratio:new a.Uniform1f(u,f.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(u,f.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(u,f.u_patternscale_a),u_patternscale_b:new a.Uniform2f(u,f.u_patternscale_b),u_sdfgamma:new a.Uniform1f(u,f.u_sdfgamma),u_image:new a.Uniform1i(u,f.u_image),u_tex_y_a:new a.Uniform1f(u,f.u_tex_y_a),u_tex_y_b:new a.Uniform1f(u,f.u_tex_y_b),u_mix:new a.Uniform1f(u,f.u_mix)}},raster:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_tl_parent:new a.Uniform2f(u,f.u_tl_parent),u_scale_parent:new a.Uniform1f(u,f.u_scale_parent),u_buffer_scale:new a.Uniform1f(u,f.u_buffer_scale),u_fade_t:new a.Uniform1f(u,f.u_fade_t),u_opacity:new a.Uniform1f(u,f.u_opacity),u_image0:new a.Uniform1i(u,f.u_image0),u_image1:new a.Uniform1i(u,f.u_image1),u_brightness_low:new a.Uniform1f(u,f.u_brightness_low),u_brightness_high:new a.Uniform1f(u,f.u_brightness_high),u_saturation_factor:new a.Uniform1f(u,f.u_saturation_factor),u_contrast_factor:new a.Uniform1f(u,f.u_contrast_factor),u_spin_weights:new a.Uniform3f(u,f.u_spin_weights)}},symbolIcon:function(u,f){return{u_is_size_zoom_constant:new a.Uniform1i(u,f.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(u,f.u_is_size_feature_constant),u_size_t:new a.Uniform1f(u,f.u_size_t),u_size:new a.Uniform1f(u,f.u_size),u_camera_to_center_distance:new a.Uniform1f(u,f.u_camera_to_center_distance),u_pitch:new a.Uniform1f(u,f.u_pitch),u_rotate_symbol:new a.Uniform1i(u,f.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(u,f.u_aspect_ratio),u_fade_change:new a.Uniform1f(u,f.u_fade_change),u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(u,f.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(u,f.u_coord_matrix),u_is_text:new a.Uniform1i(u,f.u_is_text),u_pitch_with_map:new a.Uniform1i(u,f.u_pitch_with_map),u_texsize:new a.Uniform2f(u,f.u_texsize),u_texture:new a.Uniform1i(u,f.u_texture)}},symbolSDF:function(u,f){return{u_is_size_zoom_constant:new a.Uniform1i(u,f.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(u,f.u_is_size_feature_constant),u_size_t:new a.Uniform1f(u,f.u_size_t),u_size:new a.Uniform1f(u,f.u_size),u_camera_to_center_distance:new a.Uniform1f(u,f.u_camera_to_center_distance),u_pitch:new a.Uniform1f(u,f.u_pitch),u_rotate_symbol:new a.Uniform1i(u,f.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(u,f.u_aspect_ratio),u_fade_change:new a.Uniform1f(u,f.u_fade_change),u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(u,f.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(u,f.u_coord_matrix),u_is_text:new a.Uniform1i(u,f.u_is_text),u_pitch_with_map:new a.Uniform1i(u,f.u_pitch_with_map),u_texsize:new a.Uniform2f(u,f.u_texsize),u_texture:new a.Uniform1i(u,f.u_texture),u_gamma_scale:new a.Uniform1f(u,f.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(u,f.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(u,f.u_is_halo)}},symbolTextAndIcon:function(u,f){return{u_is_size_zoom_constant:new a.Uniform1i(u,f.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(u,f.u_is_size_feature_constant),u_size_t:new a.Uniform1f(u,f.u_size_t),u_size:new a.Uniform1f(u,f.u_size),u_camera_to_center_distance:new a.Uniform1f(u,f.u_camera_to_center_distance),u_pitch:new a.Uniform1f(u,f.u_pitch),u_rotate_symbol:new a.Uniform1i(u,f.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(u,f.u_aspect_ratio),u_fade_change:new a.Uniform1f(u,f.u_fade_change),u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(u,f.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(u,f.u_coord_matrix),u_is_text:new a.Uniform1i(u,f.u_is_text),u_pitch_with_map:new a.Uniform1i(u,f.u_pitch_with_map),u_texsize:new a.Uniform2f(u,f.u_texsize),u_texsize_icon:new a.Uniform2f(u,f.u_texsize_icon),u_texture:new a.Uniform1i(u,f.u_texture),u_texture_icon:new a.Uniform1i(u,f.u_texture_icon),u_gamma_scale:new a.Uniform1f(u,f.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(u,f.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(u,f.u_is_halo)}},background:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_opacity:new a.Uniform1f(u,f.u_opacity),u_color:new a.UniformColor(u,f.u_color)}},backgroundPattern:function(u,f){return{u_matrix:new a.UniformMatrix4f(u,f.u_matrix),u_opacity:new a.Uniform1f(u,f.u_opacity),u_image:new a.Uniform1i(u,f.u_image),u_pattern_tl_a:new a.Uniform2f(u,f.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(u,f.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(u,f.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(u,f.u_pattern_br_b),u_texsize:new a.Uniform2f(u,f.u_texsize),u_mix:new a.Uniform1f(u,f.u_mix),u_pattern_size_a:new a.Uniform2f(u,f.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(u,f.u_pattern_size_b),u_scale_a:new a.Uniform1f(u,f.u_scale_a),u_scale_b:new a.Uniform1f(u,f.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(u,f.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(u,f.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(u,f.u_tile_units_to_pixels)}}};function zu(u,f,c,d,_,w,E){for(var O=u.context,k=O.gl,R=u.useProgram("collisionBox"),$=[],q=0,H=0,ne=0;ne<d.length;ne++){var re=d[ne],le=f.getTile(re),J=le.getBucket(c);if(J){var se=re.posMatrix;_[0]===0&&_[1]===0||(se=u.translatePosMatrix(re.posMatrix,le,_,w));var me=E?J.textCollisionBox:J.iconCollisionBox,xe=J.collisionCircleArray;if(xe.length>0){var Ae=a.create(),Me=se;a.mul(Ae,J.placementInvProjMatrix,u.transform.glCoordMatrix),a.mul(Ae,Ae,J.placementViewportMatrix),$.push({circleArray:xe,circleOffset:H,transform:Me,invTransform:Ae}),H=q+=xe.length/4}me&&R.draw(O,k.LINES,Z.disabled,ee.disabled,u.colorModeForRenderPass(),de.disabled,Nl(se,u.transform,le),c.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,null,u.transform.zoom,null,null,me.collisionVertexBuffer)}}if(E&&$.length){var ke=u.useProgram("collisionCircle"),je=new a.StructArrayLayout2f1f2i16;je.resize(4*q),je._trim();for(var it=0,tt=0,gt=$;tt<gt.length;tt+=1)for(var Nt=gt[tt],Ut=0;Ut<Nt.circleArray.length/4;Ut++){var Bt=4*Ut,Cr=Nt.circleArray[Bt+0],xt=Nt.circleArray[Bt+1],Jt=Nt.circleArray[Bt+2],sr=Nt.circleArray[Bt+3];je.emplace(it++,Cr,xt,Jt,sr,0),je.emplace(it++,Cr,xt,Jt,sr,1),je.emplace(it++,Cr,xt,Jt,sr,2),je.emplace(it++,Cr,xt,Jt,sr,3)}(!nf||nf.length<2*q)&&(nf=function(An){var zi=2*An,bi=new a.StructArrayLayout3ui6;bi.resize(zi),bi._trim();for(var On=0;On<zi;On++){var zn=6*On;bi.uint16[zn+0]=4*On+0,bi.uint16[zn+1]=4*On+1,bi.uint16[zn+2]=4*On+2,bi.uint16[zn+3]=4*On+2,bi.uint16[zn+4]=4*On+3,bi.uint16[zn+5]=4*On+0}return bi}(q));for(var Yt=O.createIndexBuffer(nf,!0),Kt=O.createVertexBuffer(je,a.collisionCircleLayout.members,!0),ir=0,Zt=$;ir<Zt.length;ir+=1){var qt=Zt[ir],fi=Zg(qt.transform,qt.invTransform,u.transform);ke.draw(O,k.TRIANGLES,Z.disabled,ee.disabled,u.colorModeForRenderPass(),de.disabled,fi,c.id,Kt,Yt,a.SegmentVector.simpleSegment(0,2*qt.circleOffset,qt.circleArray.length,qt.circleArray.length/2),null,u.transform.zoom,null,null,null)}Kt.destroy(),Yt.destroy()}}var ga=a.identity(new Float32Array(16));function Qg(u,f,c,d,_,w){var E=a.getAnchorAlignment(u),O=-(E.horizontalAlign-.5)*f,k=-(E.verticalAlign-.5)*c,R=a.evaluateVariableOffset(u,d);return new a.Point((O/_+R[0])*w,(k/_+R[1])*w)}function ev(u,f,c,d,_,w,E,O,k,R,$){var q=u.text.placedSymbolArray,H=u.text.dynamicLayoutVertexArray,ne=u.icon.dynamicLayoutVertexArray,re={};H.clear();for(var le=0;le<q.length;le++){var J=q.get(le),se=J.hidden||!J.crossTileID||u.allowVerticalPlacement&&!J.placedOrientation?null:d[J.crossTileID];if(se){var me=new a.Point(J.anchorX,J.anchorY),xe=_r(me,c?O:E),Ae=Br(w.cameraToCenterDistance,xe.signedDistanceFromCamera),Me=_.evaluateSizeForFeature(u.textSizeData,R,J)*Ae/a.ONE_EM;c&&(Me*=u.tilePixelRatio/k);for(var ke=Qg(se.anchor,se.width,se.height,se.textOffset,se.textBoxScale,Me),je=c?_r(me.add(ke),E).point:xe.point.add(f?ke.rotate(-w.angle):ke),it=u.allowVerticalPlacement&&J.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,tt=0;tt<J.numGlyphs;tt++)a.addDynamicAttributes(H,je,it);$&&J.associatedIconIndex>=0&&(re[J.associatedIconIndex]={shiftedAnchor:je,angle:it})}else qi(J.numGlyphs,H)}if($){ne.clear();for(var gt=u.icon.placedSymbolArray,Nt=0;Nt<gt.length;Nt++){var Ut=gt.get(Nt);if(Ut.hidden)qi(Ut.numGlyphs,ne);else{var Bt=re[Nt];if(Bt)for(var Cr=0;Cr<Ut.numGlyphs;Cr++)a.addDynamicAttributes(ne,Bt.shiftedAnchor,Bt.angle);else qi(Ut.numGlyphs,ne)}}u.icon.dynamicLayoutVertexBuffer.updateData(ne)}u.text.dynamicLayoutVertexBuffer.updateData(H)}function tv(u,f,c){return c.iconsInText&&f?"symbolTextAndIcon":u?"symbolSDF":"symbolIcon"}function Fl(u,f,c,d,_,w,E,O,k,R,$,q){for(var H=u.context,ne=H.gl,re=u.transform,le=O==="map",J=k==="map",se=le&&c.layout.get("symbol-placement")!=="point",me=le&&!J&&!se,xe=c.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ae=!1,Me=u.depthModeForSublayer(0,Z.ReadOnly),ke=c.layout.get("text-variable-anchor"),je=[],it=0,tt=d;it<tt.length;it+=1){var gt=tt[it],Nt=f.getTile(gt),Ut=Nt.getBucket(c);if(Ut){var Bt=_?Ut.text:Ut.icon;if(Bt&&Bt.segments.get().length){var Cr=Bt.programConfigurations.get(c.id),xt=_||Ut.sdfIcons,Jt=_?Ut.textSizeData:Ut.iconSizeData,sr=J||re.pitch!==0,Yt=u.useProgram(tv(xt,_,Ut),Cr),Kt=a.evaluateSizeForZoom(Jt,re.zoom),ir=void 0,Zt=[0,0],qt=void 0,fi=void 0,An=null,zi=void 0;if(_)qt=Nt.glyphAtlasTexture,fi=ne.LINEAR,ir=Nt.glyphAtlasTexture.size,Ut.iconsInText&&(Zt=Nt.imageAtlasTexture.size,An=Nt.imageAtlasTexture,zi=sr||u.options.rotating||u.options.zooming||Jt.kind==="composite"||Jt.kind==="camera"?ne.LINEAR:ne.NEAREST);else{var bi=c.layout.get("icon-size").constantOr(0)!==1||Ut.iconsNeedLinear;qt=Nt.imageAtlasTexture,fi=xt||u.options.rotating||u.options.zooming||bi||sr?ne.LINEAR:ne.NEAREST,ir=Nt.imageAtlasTexture.size}var On=gn(Nt,1,u.transform.zoom),zn=yn(gt.posMatrix,J,le,u.transform,On),Mo=Gr(gt.posMatrix,J,le,u.transform,On),Xi=ke&&Ut.hasTextData(),Qs=c.layout.get("icon-text-fit")!=="none"&&Xi&&Ut.hasIconData();se&&Nc(Ut,gt.posMatrix,u,_,zn,Mo,J,R);var oo=u.translatePosMatrix(gt.posMatrix,Nt,w,E),wa=se||_&&ke||Qs?ga:zn,ra=u.translatePosMatrix(Mo,Nt,w,E,!0),th=xt&&c.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Gu={program:Yt,buffers:Bt,uniformValues:xt?Ut.iconsInText?of(Jt.kind,Kt,me,J,u,oo,wa,ra,ir,Zt):jc(Jt.kind,Kt,me,J,u,oo,wa,ra,_,ir,!0):Nu(Jt.kind,Kt,me,J,u,oo,wa,ra,_,ir),atlasTexture:qt,atlasTextureIcon:An,atlasInterpolation:fi,atlasInterpolationIcon:zi,isSDF:xt,hasHalo:th};if(xe&&Ut.canOverlap){Ae=!0;for(var el=0,$u=Bt.segments.get();el<$u.length;el+=1){var rh=$u[el];je.push({segments:new a.SegmentVector([rh]),sortKey:rh.sortKey,state:Gu})}}else je.push({segments:Bt.segments,sortKey:0,state:Gu})}}}Ae&&je.sort(function(tl,$l){return tl.sortKey-$l.sortKey});for(var Ba=0,nh=je;Ba<nh.length;Ba+=1){var Va=nh[Ba],pi=Va.state;if(H.activeTexture.set(ne.TEXTURE0),pi.atlasTexture.bind(pi.atlasInterpolation,ne.CLAMP_TO_EDGE),pi.atlasTextureIcon&&(H.activeTexture.set(ne.TEXTURE1),pi.atlasTextureIcon&&pi.atlasTextureIcon.bind(pi.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),pi.isSDF){var ps=pi.uniformValues;pi.hasHalo&&(ps.u_is_halo=1,$c(pi.buffers,Va.segments,c,u,pi.program,Me,$,q,ps)),ps.u_is_halo=0}$c(pi.buffers,Va.segments,c,u,pi.program,Me,$,q,pi.uniformValues)}}function $c(u,f,c,d,_,w,E,O,k){var R=d.context;_.draw(R,R.gl.TRIANGLES,w,E,O,de.disabled,k,c.id,u.layoutVertexBuffer,u.indexBuffer,f,c.paint,d.transform.zoom,u.programConfigurations.get(c.id),u.dynamicLayoutVertexBuffer,u.opacityVertexBuffer)}function af(u,f,c,d,_,w,E){var O,k,R,$,q,H=u.context.gl,ne=c.paint.get("fill-pattern"),re=ne&&ne.constantOr(1),le=c.getCrossfadeParameters();E?(k=re&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",O=H.LINES):(k=re?"fillPattern":"fill",O=H.TRIANGLES);for(var J=0,se=d;J<se.length;J+=1){var me=se[J],xe=f.getTile(me);if(!re||xe.patternsLoaded()){var Ae=xe.getBucket(c);if(Ae){var Me=Ae.programConfigurations.get(c.id),ke=u.useProgram(k,Me);re&&(u.context.activeTexture.set(H.TEXTURE0),xe.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),Me.updatePaintBuffers(le));var je=ne.constantOr(null);if(je&&xe.imageAtlas){var it=xe.imageAtlas,tt=it.patternPositions[je.to.toString()],gt=it.patternPositions[je.from.toString()];tt&&gt&&Me.setConstantPatternPositions(tt,gt)}var Nt=u.translatePosMatrix(me.posMatrix,xe,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(E){$=Ae.indexBuffer2,q=Ae.segments2;var Ut=[H.drawingBufferWidth,H.drawingBufferHeight];R=k==="fillOutlinePattern"&&re?Hg(Nt,u,le,xe,Ut):Wg(Nt,Ut)}else $=Ae.indexBuffer,q=Ae.segments,R=re?Dl(Nt,u,le,xe):Hs(Nt);ke.draw(u.context,O,_,u.stencilModeForClipping(me),w,de.disabled,R,c.id,Ae.layoutVertexBuffer,$,q,c.paint,u.transform.zoom,Me)}}}}function wd(u,f,c,d,_,w,E){for(var O=u.context,k=O.gl,R=c.paint.get("fill-extrusion-pattern"),$=R.constantOr(1),q=c.getCrossfadeParameters(),H=c.paint.get("fill-extrusion-opacity"),ne=0,re=d;ne<re.length;ne+=1){var le=re[ne],J=f.getTile(le),se=J.getBucket(c);if(se){var me=se.programConfigurations.get(c.id),xe=u.useProgram($?"fillExtrusionPattern":"fillExtrusion",me);$&&(u.context.activeTexture.set(k.TEXTURE0),J.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),me.updatePaintBuffers(q));var Ae=R.constantOr(null);if(Ae&&J.imageAtlas){var Me=J.imageAtlas,ke=Me.patternPositions[Ae.to.toString()],je=Me.patternPositions[Ae.from.toString()];ke&&je&&me.setConstantPatternPositions(ke,je)}var it=u.translatePosMatrix(le.posMatrix,J,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),tt=c.paint.get("fill-extrusion-vertical-gradient"),gt=$?Ll(it,u,tt,H,le,q,J):qg(it,u,tt,H);xe.draw(O,O.gl.TRIANGLES,_,w,E,de.backCCW,gt,c.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,c.paint,u.transform.zoom,me)}}}function sf(u,f,c,d,_,w){var E=u.context,O=E.gl,k=f.fbo;if(k){var R=u.useProgram("hillshade");E.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,k.colorAttachment.get());var $=function(q,H,ne){var re=ne.paint.get("hillshade-shadow-color"),le=ne.paint.get("hillshade-highlight-color"),J=ne.paint.get("hillshade-accent-color"),se=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(se-=q.transform.angle);var me,xe,Ae,Me=!q.options.moving;return{u_matrix:q.transform.calculatePosMatrix(H.tileID.toUnwrapped(),Me),u_image:0,u_latrange:(me=H.tileID,xe=Math.pow(2,me.canonical.z),Ae=me.canonical.y,[new a.MercatorCoordinate(0,Ae/xe).toLngLat().lat,new a.MercatorCoordinate(0,(Ae+1)/xe).toLngLat().lat]),u_light:[ne.paint.get("hillshade-exaggeration"),se],u_shadow:re,u_highlight:le,u_accent:J}}(u,f,c);R.draw(E,O.TRIANGLES,d,_,w,de.disabled,$,c.id,u.rasterBoundsBuffer,u.quadTriangleIndexBuffer,u.rasterBoundsSegments)}}function V1(u,f,c,d,_,w){var E=u.context,O=E.gl,k=f.dem;if(k&&k.data){var R=k.dim,$=k.stride,q=k.getPixels();if(E.activeTexture.set(O.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),f.demTexture=f.demTexture||u.getTileTexture($),f.demTexture){var H=f.demTexture;H.update(q,{premultiply:!1}),H.bind(O.NEAREST,O.CLAMP_TO_EDGE)}else f.demTexture=new a.Texture(E,q,O.RGBA,{premultiply:!1}),f.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);E.activeTexture.set(O.TEXTURE0);var ne=f.fbo;if(!ne){var re=new a.Texture(E,{width:R,height:R,data:null},O.RGBA);re.bind(O.LINEAR,O.CLAMP_TO_EDGE),(ne=f.fbo=E.createFramebuffer(R,R,!0)).colorAttachment.set(re.texture)}E.bindFramebuffer.set(ne.framebuffer),E.viewport.set([0,0,R,R]),u.useProgram("hillshadePrepare").draw(E,O.TRIANGLES,d,_,w,de.disabled,function(le,J){var se=J.stride,me=a.create();return a.ortho(me,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(me,me,[0,-a.EXTENT,0]),{u_matrix:me,u_image:1,u_dimension:[se,se],u_zoom:le.overscaledZ,u_unpack:J.getUnpackVector()}}(f.tileID,k),c.id,u.rasterBoundsBuffer,u.quadTriangleIndexBuffer,u.rasterBoundsSegments),f.needsHillshadePrepare=!1}}function lf(u,f,c,d,_){var w=d.paint.get("raster-fade-duration");if(w>0){var E=a.browser.now(),O=(E-u.timeAdded)/w,k=f?(E-f.timeAdded)/w:-1,R=c.getSource(),$=_.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),q=!f||Math.abs(f.tileID.overscaledZ-$)>Math.abs(u.tileID.overscaledZ-$),H=q&&u.refreshedUponExpiration?1:a.clamp(q?O:1-k,0,1);return u.refreshedUponExpiration&&O>=1&&(u.refreshedUponExpiration=!1),f?{opacity:1,mix:1-H}:{opacity:H,mix:0}}return{opacity:1,mix:0}}var Ed=new a.Color(1,0,0,1),rv=new a.Color(0,1,0,1),nv=new a.Color(0,0,1,1),uf=new a.Color(1,0,1,1),Sd=new a.Color(0,1,1,1);function Td(u,f,c,d){qc(u,0,f+c/2,u.transform.width,c,d)}function Md(u,f,c,d){qc(u,f-c/2,0,c,u.transform.height,d)}function qc(u,f,c,d,_,w){var E=u.context,O=E.gl;O.enable(O.SCISSOR_TEST),O.scissor(f*a.browser.devicePixelRatio,c*a.browser.devicePixelRatio,d*a.browser.devicePixelRatio,_*a.browser.devicePixelRatio),E.clear({color:w}),O.disable(O.SCISSOR_TEST)}function iv(u,f,c){var d=u.context,_=d.gl,w=c.posMatrix,E=u.useProgram("debug"),O=Z.disabled,k=ee.disabled,R=u.colorModeForRenderPass();d.activeTexture.set(_.TEXTURE0),u.emptyTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),E.draw(d,_.LINE_STRIP,O,k,R,de.disabled,Rl(w,a.Color.red),"$debug",u.debugBuffer,u.tileBorderIndexBuffer,u.debugSegments);var $=f.getTileByID(c.key).latestRawTileData,q=Math.floor(($&&$.byteLength||0)/1024),H=f.getTile(c).tileSize,ne=512/Math.min(H,512)*(c.overscaledZ/u.transform.zoom)*.5,re=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(re+=" => "+c.overscaledZ),function(le,J){le.initDebugOverlayCanvas();var se=le.debugOverlayCanvas,me=le.context.gl,xe=le.debugOverlayCanvas.getContext("2d");xe.clearRect(0,0,se.width,se.height),xe.shadowColor="white",xe.shadowBlur=2,xe.lineWidth=1.5,xe.strokeStyle="white",xe.textBaseline="top",xe.font="bold 36px Open Sans, sans-serif",xe.fillText(J,5,5),xe.strokeText(J,5,5),le.debugOverlayTexture.update(se),le.debugOverlayTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE)}(u,re+" "+q+"kb"),E.draw(d,_.TRIANGLES,O,k,pe.alphaBlended,de.disabled,Rl(w,a.Color.transparent,ne),"$debug",u.debugBuffer,u.quadTriangleIndexBuffer,u.debugSegments)}var Bl={symbol:function(u,f,c,d,_){if(u.renderPass==="translucent"){var w=ee.disabled,E=u.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(O,k,R,$,q,H,ne){for(var re=k.transform,le=q==="map",J=H==="map",se=0,me=O;se<me.length;se+=1){var xe=me[se],Ae=$.getTile(xe),Me=Ae.getBucket(R);if(Me&&Me.text&&Me.text.segments.get().length){var ke=a.evaluateSizeForZoom(Me.textSizeData,re.zoom),je=gn(Ae,1,k.transform.zoom),it=yn(xe.posMatrix,J,le,k.transform,je),tt=R.layout.get("icon-text-fit")!=="none"&&Me.hasIconData();if(ke){var gt=Math.pow(2,re.zoom-Ae.tileID.overscaledZ);ev(Me,le,J,ne,a.symbolSize,re,it,xe.posMatrix,gt,ke,tt)}}}}(d,u,c,f,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),_),c.paint.get("icon-opacity").constantOr(1)!==0&&Fl(u,f,c,d,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),w,E),c.paint.get("text-opacity").constantOr(1)!==0&&Fl(u,f,c,d,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),w,E),f.map.showCollisionBoxes&&(zu(u,f,c,d,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),zu(u,f,c,d,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))}},circle:function(u,f,c,d){if(u.renderPass==="translucent"){var _=c.paint.get("circle-opacity"),w=c.paint.get("circle-stroke-width"),E=c.paint.get("circle-stroke-opacity"),O=c.layout.get("circle-sort-key").constantOr(1)!==void 0;if(_.constantOr(1)!==0||w.constantOr(1)!==0&&E.constantOr(1)!==0){for(var k=u.context,R=k.gl,$=u.depthModeForSublayer(0,Z.ReadOnly),q=ee.disabled,H=u.colorModeForRenderPass(),ne=[],re=0;re<d.length;re++){var le=d[re],J=f.getTile(le),se=J.getBucket(c);if(se){var me=se.programConfigurations.get(c.id),xe={programConfiguration:me,program:u.useProgram("circle",me),layoutVertexBuffer:se.layoutVertexBuffer,indexBuffer:se.indexBuffer,uniformValues:bd(u,le,J,c)};if(O)for(var Ae=0,Me=se.segments.get();Ae<Me.length;Ae+=1){var ke=Me[Ae];ne.push({segments:new a.SegmentVector([ke]),sortKey:ke.sortKey,state:xe})}else ne.push({segments:se.segments,sortKey:0,state:xe})}}O&&ne.sort(function(Nt,Ut){return Nt.sortKey-Ut.sortKey});for(var je=0,it=ne;je<it.length;je+=1){var tt=it[je],gt=tt.state;gt.program.draw(k,R.TRIANGLES,$,q,H,de.disabled,gt.uniformValues,c.id,gt.layoutVertexBuffer,gt.indexBuffer,tt.segments,c.paint,u.transform.zoom,gt.programConfiguration)}}}},heatmap:function(u,f,c,d){if(c.paint.get("heatmap-opacity")!==0)if(u.renderPass==="offscreen"){var _=u.context,w=_.gl,E=ee.disabled,O=new pe([w.ONE,w.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(ne,re,le){var J=ne.gl;ne.activeTexture.set(J.TEXTURE1),ne.viewport.set([0,0,re.width/4,re.height/4]);var se=le.heatmapFbo;if(se)J.bindTexture(J.TEXTURE_2D,se.colorAttachment.get()),ne.bindFramebuffer.set(se.framebuffer);else{var me=J.createTexture();J.bindTexture(J.TEXTURE_2D,me),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),se=le.heatmapFbo=ne.createFramebuffer(re.width/4,re.height/4,!1),function(xe,Ae,Me,ke){var je=xe.gl;je.texImage2D(je.TEXTURE_2D,0,je.RGBA,Ae.width/4,Ae.height/4,0,je.RGBA,xe.extRenderToTextureHalfFloat?xe.extTextureHalfFloat.HALF_FLOAT_OES:je.UNSIGNED_BYTE,null),ke.colorAttachment.set(Me)}(ne,re,me,se)}})(_,u,c),_.clear({color:a.Color.transparent});for(var k=0;k<d.length;k++){var R=d[k];if(!f.hasRenderableParent(R)){var $=f.getTile(R),q=$.getBucket(c);if(q){var H=q.programConfigurations.get(c.id);u.useProgram("heatmap",H).draw(_,w.TRIANGLES,Z.disabled,E,O,de.disabled,Xg(R.posMatrix,$,u.transform.zoom,c.paint.get("heatmap-intensity")),c.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,c.paint,u.transform.zoom,H)}}}_.viewport.set([0,0,u.width,u.height])}else u.renderPass==="translucent"&&(u.context.setColorMode(u.colorModeForRenderPass()),function(ne,re){var le=ne.context,J=le.gl,se=re.heatmapFbo;if(se){le.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,se.colorAttachment.get()),le.activeTexture.set(J.TEXTURE1);var me=re.colorRampTexture;me||(me=re.colorRampTexture=new a.Texture(le,re.colorRamp,J.RGBA)),me.bind(J.LINEAR,J.CLAMP_TO_EDGE),ne.useProgram("heatmapTexture").draw(le,J.TRIANGLES,Z.disabled,ee.disabled,ne.colorModeForRenderPass(),de.disabled,function(xe,Ae,Me,ke){var je=a.create();a.ortho(je,0,xe.width,xe.height,0,0,1);var it=xe.context.gl;return{u_matrix:je,u_world:[it.drawingBufferWidth,it.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ae.paint.get("heatmap-opacity")}}(ne,re),re.id,ne.viewportBuffer,ne.quadTriangleIndexBuffer,ne.viewportSegments,re.paint,ne.transform.zoom)}}(u,c))},line:function(u,f,c,d){if(u.renderPass==="translucent"){var _=c.paint.get("line-opacity"),w=c.paint.get("line-width");if(_.constantOr(1)!==0&&w.constantOr(1)!==0)for(var E=u.depthModeForSublayer(0,Z.ReadOnly),O=u.colorModeForRenderPass(),k=c.paint.get("line-dasharray"),R=c.paint.get("line-pattern"),$=R.constantOr(1),q=c.paint.get("line-gradient"),H=c.getCrossfadeParameters(),ne=$?"linePattern":k?"lineSDF":q?"lineGradient":"line",re=u.context,le=re.gl,J=!0,se=0,me=d;se<me.length;se+=1){var xe=me[se],Ae=f.getTile(xe);if(!$||Ae.patternsLoaded()){var Me=Ae.getBucket(c);if(Me){var ke=Me.programConfigurations.get(c.id),je=u.context.program.get(),it=u.useProgram(ne,ke),tt=J||it.program!==je,gt=R.constantOr(null);if(gt&&Ae.imageAtlas){var Nt=Ae.imageAtlas,Ut=Nt.patternPositions[gt.to.toString()],Bt=Nt.patternPositions[gt.from.toString()];Ut&&Bt&&ke.setConstantPatternPositions(Ut,Bt)}var Cr=$?rf(u,Ae,c,H):k?F1(u,Ae,c,k,H):q?nn(u,Ae,c,Me.lineClipsArray.length):Uc(u,Ae,c);if($)re.activeTexture.set(le.TEXTURE0),Ae.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),ke.updatePaintBuffers(H);else if(k&&(tt||u.lineAtlas.dirty))re.activeTexture.set(le.TEXTURE0),u.lineAtlas.bind(re);else if(q){var xt=Me.gradients[c.id],Jt=xt.texture;if(c.gradientVersion!==xt.version){var sr=256;if(c.stepInterpolant){var Yt=f.getSource().maxzoom,Kt=xe.canonical.z===Yt?Math.ceil(1<<u.transform.maxZoom-xe.canonical.z):1;sr=a.clamp(a.nextPowerOfTwo(Me.maxLineLength/a.EXTENT*1024*Kt),256,re.maxTextureSize)}xt.gradient=a.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:sr,image:xt.gradient||void 0,clips:Me.lineClipsArray}),xt.texture?xt.texture.update(xt.gradient):xt.texture=new a.Texture(re,xt.gradient,le.RGBA),xt.version=c.gradientVersion,Jt=xt.texture}re.activeTexture.set(le.TEXTURE0),Jt.bind(c.stepInterpolant?le.NEAREST:le.LINEAR,le.CLAMP_TO_EDGE)}it.draw(re,le.TRIANGLES,E,u.stencilModeForClipping(xe),O,de.disabled,Cr,c.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,c.paint,u.transform.zoom,ke,Me.layoutVertexBuffer2),J=!1}}}}},fill:function(u,f,c,d){var _=c.paint.get("fill-color"),w=c.paint.get("fill-opacity");if(w.constantOr(1)!==0){var E=u.colorModeForRenderPass(),O=c.paint.get("fill-pattern"),k=u.opaquePassEnabledForLayer()&&!O.constantOr(1)&&_.constantOr(a.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(u.renderPass===k){var R=u.depthModeForSublayer(1,u.renderPass==="opaque"?Z.ReadWrite:Z.ReadOnly);af(u,f,c,d,R,E,!1)}if(u.renderPass==="translucent"&&c.paint.get("fill-antialias")){var $=u.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,Z.ReadOnly);af(u,f,c,d,$,E,!0)}}},"fill-extrusion":function(u,f,c,d){var _=c.paint.get("fill-extrusion-opacity");if(_!==0&&u.renderPass==="translucent"){var w=new Z(u.context.gl.LEQUAL,Z.ReadWrite,u.depthRangeFor3D);if(_!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))wd(u,f,c,d,w,ee.disabled,pe.disabled),wd(u,f,c,d,w,u.stencilModeFor3D(),u.colorModeForRenderPass());else{var E=u.colorModeForRenderPass();wd(u,f,c,d,w,ee.disabled,E)}}},hillshade:function(u,f,c,d){if(u.renderPass==="offscreen"||u.renderPass==="translucent"){for(var _=u.context,w=u.depthModeForSublayer(0,Z.ReadOnly),E=u.colorModeForRenderPass(),O=u.renderPass==="translucent"?u.stencilConfigForOverlap(d):[{},d],k=O[0],R=0,$=O[1];R<$.length;R+=1){var q=$[R],H=f.getTile(q);H.needsHillshadePrepare&&u.renderPass==="offscreen"?V1(u,H,c,w,ee.disabled,E):u.renderPass==="translucent"&&sf(u,H,c,w,k[q.overscaledZ],E)}_.viewport.set([0,0,u.width,u.height])}},raster:function(u,f,c,d){if(u.renderPass==="translucent"&&c.paint.get("raster-opacity")!==0&&d.length)for(var _=u.context,w=_.gl,E=f.getSource(),O=u.useProgram("raster"),k=u.colorModeForRenderPass(),R=E instanceof mr?[{},d]:u.stencilConfigForOverlap(d),$=R[0],q=R[1],H=q[q.length-1].overscaledZ,ne=!u.options.moving,re=0,le=q;re<le.length;re+=1){var J=le[re],se=u.depthModeForSublayer(J.overscaledZ-H,c.paint.get("raster-opacity")===1?Z.ReadWrite:Z.ReadOnly,w.LESS),me=f.getTile(J),xe=u.transform.calculatePosMatrix(J.toUnwrapped(),ne);me.registerFadeDuration(c.paint.get("raster-fade-duration"));var Ae=f.findLoadedParent(J,0),Me=lf(me,Ae,f,c,u.transform),ke=void 0,je=void 0,it=c.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;_.activeTexture.set(w.TEXTURE0),me.texture.bind(it,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),_.activeTexture.set(w.TEXTURE1),Ae?(Ae.texture.bind(it,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),ke=Math.pow(2,Ae.tileID.overscaledZ-me.tileID.overscaledZ),je=[me.tileID.canonical.x*ke%1,me.tileID.canonical.y*ke%1]):me.texture.bind(it,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var tt=B1(xe,je||[0,0],ke||1,Me,c);E instanceof mr?O.draw(_,w.TRIANGLES,se,ee.disabled,k,de.disabled,tt,c.id,E.boundsBuffer,u.quadTriangleIndexBuffer,E.boundsSegments):O.draw(_,w.TRIANGLES,se,$[J.overscaledZ],k,de.disabled,tt,c.id,u.rasterBoundsBuffer,u.quadTriangleIndexBuffer,u.rasterBoundsSegments)}},background:function(u,f,c){var d=c.paint.get("background-color"),_=c.paint.get("background-opacity");if(_!==0){var w=u.context,E=w.gl,O=u.transform,k=O.tileSize,R=c.paint.get("background-pattern");if(!u.isPatternMissing(R)){var $=!R&&d.a===1&&_===1&&u.opaquePassEnabledForLayer()?"opaque":"translucent";if(u.renderPass===$){var q=ee.disabled,H=u.depthModeForSublayer(0,$==="opaque"?Z.ReadWrite:Z.ReadOnly),ne=u.colorModeForRenderPass(),re=u.useProgram(R?"backgroundPattern":"background"),le=O.coveringTiles({tileSize:k});R&&(w.activeTexture.set(E.TEXTURE0),u.imageManager.bind(u.context));for(var J=c.getCrossfadeParameters(),se=0,me=le;se<me.length;se+=1){var xe=me[se],Ae=u.transform.calculatePosMatrix(xe.toUnwrapped()),Me=R?Ru(Ae,_,u,R,{tileID:xe,tileSize:k},J):Gc(Ae,_,d);re.draw(w,E.TRIANGLES,H,q,ne,de.disabled,Me,c.id,u.tileExtentBuffer,u.quadTriangleIndexBuffer,u.tileExtentSegments)}}}}},debug:function(u,f,c){for(var d=0;d<c.length;d++)iv(u,f,c[d])},custom:function(u,f,c){var d=u.context,_=c.implementation;if(u.renderPass==="offscreen"){var w=_.prerender;w&&(u.setCustomLayerDefaults(),d.setColorMode(u.colorModeForRenderPass()),w.call(_,d.gl,u.transform.customLayerMatrix()),d.setDirty(),u.setBaseState())}else if(u.renderPass==="translucent"){u.setCustomLayerDefaults(),d.setColorMode(u.colorModeForRenderPass()),d.setStencilMode(ee.disabled);var E=_.renderingMode==="3d"?new Z(u.context.gl.LEQUAL,Z.ReadWrite,u.depthRangeFor3D):u.depthModeForSublayer(0,Z.ReadOnly);d.setDepthMode(E),_.render(d.gl,u.transform.customLayerMatrix()),d.setDirty(),u.setBaseState(),d.bindFramebuffer.set(null)}}},vn=function(u,f){this.context=new G(u),this.transform=f,this._tileTextures={},this.setup(),this.numSublayers=ie.maxUnderzooming+ie.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vs,this.gpuTimers={}};vn.prototype.resize=function(u,f){if(this.width=u*a.browser.devicePixelRatio,this.height=f*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var c=0,d=this.style._order;c<d.length;c+=1)this.style._layers[d[c]].resize()},vn.prototype.setup=function(){var u=this.context,f=new a.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(a.EXTENT,0),f.emplaceBack(0,a.EXTENT),f.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(f,Hn.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var c=new a.StructArrayLayout2i4;c.emplaceBack(0,0),c.emplaceBack(a.EXTENT,0),c.emplaceBack(0,a.EXTENT),c.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=u.createVertexBuffer(c,Hn.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var d=new a.StructArrayLayout4i8;d.emplaceBack(0,0,0,0),d.emplaceBack(a.EXTENT,0,a.EXTENT,0),d.emplaceBack(0,a.EXTENT,0,a.EXTENT),d.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=u.createVertexBuffer(d,zr.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var _=new a.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(_,Hn.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var w=new a.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(w);var E=new a.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(E),this.emptyTexture=new a.Texture(u,{width:1,height:1,data:new Uint8Array([0,0,0,0])},u.gl.RGBA);var O=this.context.gl;this.stencilClearMode=new ee({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)},vn.prototype.clearStencil=function(){var u=this.context,f=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var c=a.create();a.ortho(c,0,this.width,this.height,0,0,1),a.scale(c,c,[f.drawingBufferWidth,f.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,f.TRIANGLES,Z.disabled,this.stencilClearMode,pe.disabled,de.disabled,zl(c),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},vn.prototype._renderTileClippingMasks=function(u,f){if(this.currentStencilSource!==u.source&&u.isTileClipped()&&f&&f.length){this.currentStencilSource=u.source;var c=this.context,d=c.gl;this.nextStencilID+f.length>256&&this.clearStencil(),c.setColorMode(pe.disabled),c.setDepthMode(Z.disabled);var _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,E=f;w<E.length;w+=1){var O=E[w],k=this._tileClippingMaskIDs[O.key]=this.nextStencilID++;_.draw(c,d.TRIANGLES,Z.disabled,new ee({func:d.ALWAYS,mask:0},k,255,d.KEEP,d.KEEP,d.REPLACE),pe.disabled,de.disabled,zl(O.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},vn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var u=this.nextStencilID++,f=this.context.gl;return new ee({func:f.NOTEQUAL,mask:255},u,255,f.KEEP,f.KEEP,f.REPLACE)},vn.prototype.stencilModeForClipping=function(u){var f=this.context.gl;return new ee({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,f.KEEP,f.KEEP,f.REPLACE)},vn.prototype.stencilConfigForOverlap=function(u){var f,c=this.context.gl,d=u.sort(function(k,R){return R.overscaledZ-k.overscaledZ}),_=d[d.length-1].overscaledZ,w=d[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var E={},O=0;O<w;O++)E[O+_]=new ee({func:c.GEQUAL,mask:255},O+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=w,[E,d]}return[(f={},f[_]=ee.disabled,f),d]},vn.prototype.colorModeForRenderPass=function(){var u=this.context.gl;return this._showOverdrawInspector?new pe([u.CONSTANT_COLOR,u.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?pe.unblended:pe.alphaBlended},vn.prototype.depthModeForSublayer=function(u,f,c){if(!this.opaquePassEnabledForLayer())return Z.disabled;var d=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new Z(c||this.context.gl.LEQUAL,f,[d,d])},vn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},vn.prototype.render=function(u,f){var c=this;this.style=u,this.options=f,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var d=this.style._order,_=this.style.sourceCaches;for(var w in _){var E=_[w];E.used&&E.prepare(this.context)}var O,k,R={},$={},q={};for(var H in _){var ne=_[H];R[H]=ne.getVisibleCoordinates(),$[H]=R[H].slice().reverse(),q[H]=ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var re=0;re<d.length;re++)if(this.style._layers[d[re]].is3D()){this.opaquePassCutoff=re;break}this.renderPass="offscreen";for(var le=0,J=d;le<J.length;le+=1){var se=this.style._layers[J[le]];if(se.hasOffscreenPass()&&!se.isHidden(this.transform.zoom)){var me=$[se.source];(se.type==="custom"||me.length)&&this.renderLayer(this,_[se.source],se,me)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){var xe=this.style._layers[d[this.currentLayer]],Ae=_[xe.source],Me=R[xe.source];this._renderTileClippingMasks(xe,Me),this.renderLayer(this,Ae,xe,Me)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){var ke=this.style._layers[d[this.currentLayer]],je=_[ke.source],it=(ke.type==="symbol"?q:$)[ke.source];this._renderTileClippingMasks(ke,R[ke.source]),this.renderLayer(this,je,ke,it)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(tt){tt.source&&!tt.isHidden(c.transform.zoom)&&(tt.source!==(k&&k.id)&&(k=c.style.sourceCaches[tt.source]),(!O||O.getSource().maxzoom<k.getSource().maxzoom)&&(O=k))}),O&&Bl.debug(this,O,O.getVisibleCoordinates())),this.options.showPadding&&function(tt){var gt=tt.transform.padding;Td(tt,tt.transform.height-(gt.top||0),3,Ed),Td(tt,gt.bottom||0,3,rv),Md(tt,gt.left||0,3,nv),Md(tt,tt.transform.width-(gt.right||0),3,uf);var Nt=tt.transform.centerPoint;(function(Ut,Bt,Cr,xt){qc(Ut,Bt-1,Cr-10,2,20,xt),qc(Ut,Bt-10,Cr-1,20,2,xt)})(tt,Nt.x,tt.transform.height-Nt.y,Sd)}(this),this.context.setDefault()},vn.prototype.renderLayer=function(u,f,c,d){c.isHidden(this.transform.zoom)||(c.type==="background"||c.type==="custom"||d.length)&&(this.id=c.id,this.gpuTimingStart(c),Bl[c.type](u,f,c,d,this.style.placement.variableOffsets),this.gpuTimingEnd())},vn.prototype.gpuTimingStart=function(u){if(this.options.gpuTiming){var f=this.context.extTimerQuery,c=this.gpuTimers[u.id];c||(c=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),c.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,c.query)}},vn.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}},vn.prototype.collectGpuTimers=function(){var u=this.gpuTimers;return this.gpuTimers={},u},vn.prototype.queryGpuTimers=function(u){var f={};for(var c in u){var d=u[c],_=this.context.extTimerQuery,w=_.getQueryObjectEXT(d.query,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(d.query),f[c]=w}return f},vn.prototype.translatePosMatrix=function(u,f,c,d,_){if(!c[0]&&!c[1])return u;var w=_?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(w){var E=Math.sin(w),O=Math.cos(w);c=[c[0]*O-c[1]*E,c[0]*E+c[1]*O]}var k=[_?c[0]:gn(f,c[0],this.transform.zoom),_?c[1]:gn(f,c[1],this.transform.zoom),0],R=new Float32Array(16);return a.translate(R,u,k),R},vn.prototype.saveTileTexture=function(u){var f=this._tileTextures[u.size[0]];f?f.push(u):this._tileTextures[u.size[0]]=[u]},vn.prototype.getTileTexture=function(u){var f=this._tileTextures[u];return f&&f.length>0?f.pop():null},vn.prototype.isPatternMissing=function(u){if(!u)return!1;if(!u.from||!u.to)return!0;var f=this.imageManager.getPattern(u.from.toString()),c=this.imageManager.getPattern(u.to.toString());return!f||!c},vn.prototype.useProgram=function(u,f){this.cache=this.cache||{};var c=""+u+(f?f.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[c]||(this.cache[c]=new Gg(this.context,u,z1[u],f,Jg[u],this._showOverdrawInspector)),this.cache[c]},vn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},vn.prototype.setBaseState=function(){var u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)},vn.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},vn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var cf=function(u,f){this.points=u,this.planes=f};cf.fromInvProjectionMatrix=function(u,f,c){var d=Math.pow(2,c),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(E){return a.transformMat4([],E,u)}).map(function(E){return a.scale$1([],E,1/E[3]/f*d)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(E){var O=a.sub([],_[E[0]],_[E[1]]),k=a.sub([],_[E[2]],_[E[1]]),R=a.normalize([],a.cross([],O,k)),$=-a.dot(R,_[E[1]]);return R.concat($)});return new cf(_,w)};var Vl=function(u,f){this.min=u,this.max=f,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Vl.prototype.quadrant=function(u){for(var f=[u%2==0,u<2],c=a.clone$2(this.min),d=a.clone$2(this.max),_=0;_<f.length;_++)c[_]=f[_]?this.min[_]:this.center[_],d[_]=f[_]?this.center[_]:this.max[_];return d[2]=this.max[2],new Vl(c,d)},Vl.prototype.distanceX=function(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]},Vl.prototype.distanceY=function(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]},Vl.prototype.intersects=function(u){for(var f=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],c=!0,d=0;d<u.planes.length;d++){for(var _=u.planes[d],w=0,E=0;E<f.length;E++)w+=a.dot$1(_,f[E])>=0;if(w===0)return 0;w!==f.length&&(c=!1)}if(c)return 2;for(var O=0;O<3;O++){for(var k=Number.MAX_VALUE,R=-Number.MAX_VALUE,$=0;$<u.points.length;$++){var q=u.points[$][O]-this.min[O];k=Math.min(k,q),R=Math.max(R,q)}if(R<0||k>this.max[O]-this.min[O])return 0}return 1};var Zs=function(u,f,c,d){if(u===void 0&&(u=0),f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d=0),isNaN(u)||u<0||isNaN(f)||f<0||isNaN(c)||c<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=f,this.left=c,this.right=d};Zs.prototype.interpolate=function(u,f,c){return f.top!=null&&u.top!=null&&(this.top=a.number(u.top,f.top,c)),f.bottom!=null&&u.bottom!=null&&(this.bottom=a.number(u.bottom,f.bottom,c)),f.left!=null&&u.left!=null&&(this.left=a.number(u.left,f.left,c)),f.right!=null&&u.right!=null&&(this.right=a.number(u.right,f.right,c)),this},Zs.prototype.getCenter=function(u,f){var c=a.clamp((this.left+u-this.right)/2,0,u),d=a.clamp((this.top+f-this.bottom)/2,0,f);return new a.Point(c,d)},Zs.prototype.equals=function(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right},Zs.prototype.clone=function(){return new Zs(this.top,this.bottom,this.left,this.right)},Zs.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Sr=function(u,f,c,d,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||_,this._minZoom=u||0,this._maxZoom=f||22,this._minPitch=c==null?0:c,this._maxPitch=d==null?60:d,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Zs,this._posMatrixCache={},this._alignedPosMatrixCache={}},on={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Sr.prototype.clone=function(){var u=new Sr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.tileSize=this.tileSize,u.latRange=this.latRange,u.width=this.width,u.height=this.height,u._center=this._center,u.zoom=this.zoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._calcMatrices(),u},on.minZoom.get=function(){return this._minZoom},on.minZoom.set=function(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))},on.maxZoom.get=function(){return this._maxZoom},on.maxZoom.set=function(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))},on.minPitch.get=function(){return this._minPitch},on.minPitch.set=function(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))},on.maxPitch.get=function(){return this._maxPitch},on.maxPitch.set=function(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))},on.renderWorldCopies.get=function(){return this._renderWorldCopies},on.renderWorldCopies.set=function(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u},on.worldSize.get=function(){return this.tileSize*this.scale},on.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},on.size.get=function(){return new a.Point(this.width,this.height)},on.bearing.get=function(){return-this.angle/Math.PI*180},on.bearing.set=function(u){var f=-a.wrap(u,-180,180)*Math.PI/180;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},on.pitch.get=function(){return this._pitch/Math.PI*180},on.pitch.set=function(u){var f=a.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())},on.fov.get=function(){return this._fov/Math.PI*180},on.fov.set=function(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())},on.zoom.get=function(){return this._zoom},on.zoom.set=function(u){var f=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this.scale=this.zoomScale(f),this.tileZoom=Math.floor(f),this.zoomFraction=f-this.tileZoom,this._constrain(),this._calcMatrices())},on.center.get=function(){return this._center},on.center.set=function(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())},on.padding.get=function(){return this._edgeInsets.toJSON()},on.padding.set=function(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())},on.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Sr.prototype.isPaddingEqual=function(u){return this._edgeInsets.equals(u)},Sr.prototype.interpolatePadding=function(u,f,c){this._unmodified=!1,this._edgeInsets.interpolate(u,f,c),this._constrain(),this._calcMatrices()},Sr.prototype.coveringZoomLevel=function(u){var f=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,f)},Sr.prototype.getVisibleUnwrappedCoordinates=function(u){var f=[new a.UnwrappedTileID(0,u)];if(this._renderWorldCopies)for(var c=this.pointCoordinate(new a.Point(0,0)),d=this.pointCoordinate(new a.Point(this.width,0)),_=this.pointCoordinate(new a.Point(this.width,this.height)),w=this.pointCoordinate(new a.Point(0,this.height)),E=Math.floor(Math.min(c.x,d.x,_.x,w.x)),O=Math.floor(Math.max(c.x,d.x,_.x,w.x)),k=E-1;k<=O+1;k++)k!==0&&f.push(new a.UnwrappedTileID(k,u));return f},Sr.prototype.coveringTiles=function(u){var f=this.coveringZoomLevel(u),c=f;if(u.minzoom!==void 0&&f<u.minzoom)return[];u.maxzoom!==void 0&&f>u.maxzoom&&(f=u.maxzoom);var d=a.MercatorCoordinate.fromLngLat(this.center),_=Math.pow(2,f),w=[_*d.x,_*d.y,0],E=cf.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f),O=u.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(O=f);var k=function(tt){return{aabb:new Vl([tt*_,0,0],[(tt+1)*_,_,0]),zoom:0,x:0,y:0,wrap:tt,fullyVisible:!1}},R=[],$=[],q=f,H=u.reparseOverscaled?c:f;if(this._renderWorldCopies)for(var ne=1;ne<=3;ne++)R.push(k(-ne)),R.push(k(ne));for(R.push(k(0));R.length>0;){var re=R.pop(),le=re.x,J=re.y,se=re.fullyVisible;if(!se){var me=re.aabb.intersects(E);if(me===0)continue;se=me===2}var xe=re.aabb.distanceX(w),Ae=re.aabb.distanceY(w),Me=Math.max(Math.abs(xe),Math.abs(Ae));if(re.zoom===q||Me>3+(1<<q-re.zoom)-2&&re.zoom>=O)$.push({tileID:new a.OverscaledTileID(re.zoom===q?H:re.zoom,re.wrap,re.zoom,le,J),distanceSq:a.sqrLen([w[0]-.5-le,w[1]-.5-J])});else for(var ke=0;ke<4;ke++){var je=(le<<1)+ke%2,it=(J<<1)+(ke>>1);R.push({aabb:re.aabb.quadrant(ke),zoom:re.zoom+1,x:je,y:it,wrap:re.wrap,fullyVisible:se})}}return $.sort(function(tt,gt){return tt.distanceSq-gt.distanceSq}).map(function(tt){return tt.tileID})},Sr.prototype.resize=function(u,f){this.width=u,this.height=f,this.pixelsToGLUnits=[2/u,-2/f],this._constrain(),this._calcMatrices()},on.unmodified.get=function(){return this._unmodified},Sr.prototype.zoomScale=function(u){return Math.pow(2,u)},Sr.prototype.scaleZoom=function(u){return Math.log(u)/Math.LN2},Sr.prototype.project=function(u){var f=a.clamp(u.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(u.lng)*this.worldSize,a.mercatorYfromLat(f)*this.worldSize)},Sr.prototype.unproject=function(u){return new a.MercatorCoordinate(u.x/this.worldSize,u.y/this.worldSize).toLngLat()},on.point.get=function(){return this.project(this.center)},Sr.prototype.setLocationAtPoint=function(u,f){var c=this.pointCoordinate(f),d=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(u),w=new a.MercatorCoordinate(_.x-(c.x-d.x),_.y-(c.y-d.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},Sr.prototype.locationPoint=function(u){return this.coordinatePoint(this.locationCoordinate(u))},Sr.prototype.pointLocation=function(u){return this.coordinateLocation(this.pointCoordinate(u))},Sr.prototype.locationCoordinate=function(u){return a.MercatorCoordinate.fromLngLat(u)},Sr.prototype.coordinateLocation=function(u){return u.toLngLat()},Sr.prototype.pointCoordinate=function(u){var f=[u.x,u.y,0,1],c=[u.x,u.y,1,1];a.transformMat4(f,f,this.pixelMatrixInverse),a.transformMat4(c,c,this.pixelMatrixInverse);var d=f[3],_=c[3],w=f[1]/d,E=c[1]/_,O=f[2]/d,k=c[2]/_,R=O===k?0:(0-O)/(k-O);return new a.MercatorCoordinate(a.number(f[0]/d,c[0]/_,R)/this.worldSize,a.number(w,E,R)/this.worldSize)},Sr.prototype.coordinatePoint=function(u){var f=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.transformMat4(f,f,this.pixelMatrix),new a.Point(f[0]/f[3],f[1]/f[3])},Sr.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},Sr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Sr.prototype.setMaxBounds=function(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Sr.prototype.calculatePosMatrix=function(u,f){f===void 0&&(f=!1);var c=u.key,d=f?this._alignedPosMatrixCache:this._posMatrixCache;if(d[c])return d[c];var _=u.canonical,w=this.worldSize/this.zoomScale(_.z),E=_.x+Math.pow(2,_.z)*u.wrap,O=a.identity(new Float64Array(16));return a.translate(O,O,[E*w,_.y*w,0]),a.scale(O,O,[w/a.EXTENT,w/a.EXTENT,1]),a.multiply(O,f?this.alignedProjMatrix:this.projMatrix,O),d[c]=new Float32Array(O),d[c]},Sr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Sr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var u,f,c,d,_=-90,w=90,E=-180,O=180,k=this.size,R=this._unmodified;if(this.latRange){var $=this.latRange;_=a.mercatorYfromLat($[1])*this.worldSize,u=(w=a.mercatorYfromLat($[0])*this.worldSize)-_<k.y?k.y/(w-_):0}if(this.lngRange){var q=this.lngRange;E=a.mercatorXfromLng(q[0])*this.worldSize,f=(O=a.mercatorXfromLng(q[1])*this.worldSize)-E<k.x?k.x/(O-E):0}var H=this.point,ne=Math.max(f||0,u||0);if(ne)return this.center=this.unproject(new a.Point(f?(O+E)/2:H.x,u?(w+_)/2:H.y)),this.zoom+=this.scaleZoom(ne),this._unmodified=R,void(this._constraining=!1);if(this.latRange){var re=H.y,le=k.y/2;re-le<_&&(d=_+le),re+le>w&&(d=w-le)}if(this.lngRange){var J=H.x,se=k.x/2;J-se<E&&(c=E+se),J+se>O&&(c=O-se)}c===void 0&&d===void 0||(this.center=this.unproject(new a.Point(c!==void 0?c:H.x,d!==void 0?d:H.y))),this._unmodified=R,this._constraining=!1}},Sr.prototype._calcMatrices=function(){if(this.height){var u=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var f=Math.PI/2+this._pitch,c=this._fov*(.5+u.y/this.height),d=Math.sin(c)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-f-c,.01,Math.PI-.01)),_=this.point,w=_.x,E=_.y,O=1.01*(Math.cos(Math.PI/2-this._pitch)*d+this.cameraToCenterDistance),k=this.height/50,R=new Float64Array(16);a.perspective(R,this._fov,this.width/this.height,k,O),R[8]=2*-u.x/this.width,R[9]=2*u.y/this.height,a.scale(R,R,[1,-1,1]),a.translate(R,R,[0,0,-this.cameraToCenterDistance]),a.rotateX(R,R,this._pitch),a.rotateZ(R,R,this.angle),a.translate(R,R,[-w,-E,0]),this.mercatorMatrix=a.scale([],R,[this.worldSize,this.worldSize,this.worldSize]),a.scale(R,R,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=R,this.invProjMatrix=a.invert([],this.projMatrix);var $=this.width%2/2,q=this.height%2/2,H=Math.cos(this.angle),ne=Math.sin(this.angle),re=w-Math.round(w)+H*$+ne*q,le=E-Math.round(E)+H*q+ne*$,J=new Float64Array(R);if(a.translate(J,J,[re>.5?re-1:re,le>.5?le-1:le,0]),this.alignedProjMatrix=J,R=a.create(),a.scale(R,R,[this.width/2,-this.height/2,1]),a.translate(R,R,[1,-1,0]),this.labelPlaneMatrix=R,R=a.create(),a.scale(R,R,[1,-1,1]),a.translate(R,R,[-1,-1,0]),a.scale(R,R,[2/this.width,2/this.height,1]),this.glCoordMatrix=R,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(R=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=R,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Sr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var u=this.pointCoordinate(new a.Point(0,0)),f=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.transformMat4(f,f,this.pixelMatrix)[3]/this.cameraToCenterDistance},Sr.prototype.getCameraPoint=function(){var u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,u))},Sr.prototype.getCameraQueryGeometry=function(u){var f=this.getCameraPoint();if(u.length===1)return[u[0],f];for(var c=f.x,d=f.y,_=f.x,w=f.y,E=0,O=u;E<O.length;E+=1){var k=O[E];c=Math.min(c,k.x),d=Math.min(d,k.y),_=Math.max(_,k.x),w=Math.max(w,k.y)}return[new a.Point(c,d),new a.Point(_,d),new a.Point(_,w),new a.Point(c,w),new a.Point(c,d)]},Object.defineProperties(Sr.prototype,on);var Vo=function(u){var f,c,d,_;this._hashName=u&&encodeURIComponent(u),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(f=this._updateHashUnthrottled.bind(this),c=!1,d=null,_=function(){d=null,c&&(f(),d=setTimeout(_,300),c=!1)},function(){return c=!0,d||_(),d})};Vo.prototype.addTo=function(u){return this._map=u,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Vo.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Vo.prototype.getHashString=function(u){var f=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,d=Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,d),w=Math.round(f.lng*_)/_,E=Math.round(f.lat*_)/_,O=this._map.getBearing(),k=this._map.getPitch(),R="";if(R+=u?"/"+w+"/"+E+"/"+c:c+"/"+E+"/"+w,(O||k)&&(R+="/"+Math.round(10*O)/10),k&&(R+="/"+Math.round(k)),this._hashName){var $=this._hashName,q=!1,H=a.window.location.hash.slice(1).split("&").map(function(ne){var re=ne.split("=")[0];return re===$?(q=!0,re+"="+R):ne}).filter(function(ne){return ne});return q||H.push($+"="+R),"#"+H.join("&")}return"#"+R},Vo.prototype._getCurrentHash=function(){var u,f=this,c=a.window.location.hash.replace("#","");return this._hashName?(c.split("&").map(function(d){return d.split("=")}).forEach(function(d){d[0]===f._hashName&&(u=d)}),(u&&u[1]||"").split("/")):c.split("/")},Vo.prototype._onHashChange=function(){var u=this._getCurrentHash();if(u.length>=3&&!u.some(function(c){return isNaN(c)})){var f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:f,pitch:+(u[4]||0)}),!0}return!1},Vo.prototype._updateHashUnthrottled=function(){var u=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,u)}catch{}};var Wc={linearity:.3,easing:a.bezier(0,0,.3,1)},Fu=a.extend({deceleration:2500,maxSpeed:1400},Wc),Hc=a.extend({deceleration:20,maxSpeed:1400},Wc),U1=a.extend({deceleration:1e3,maxSpeed:360},Wc),j1=a.extend({deceleration:1e3,maxSpeed:90},Wc),Zc=function(u){this._map=u,this.clear()};function Xc(u,f){(!u.duration||u.duration<f.duration)&&(u.duration=f.duration,u.easing=f.easing)}function cs(u,f,c){var d=c.maxSpeed,_=c.linearity,w=c.deceleration,E=a.clamp(u*_/(f/1e3),-d,d),O=Math.abs(E)/(w*_);return{easing:c.easing,duration:1e3*O,amount:E*(O/2)}}Zc.prototype.clear=function(){this._inertiaBuffer=[]},Zc.prototype.record=function(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:u})},Zc.prototype._drainInertiaBuffer=function(){for(var u=this._inertiaBuffer,f=a.browser.now();u.length>0&&f-u[0].time>160;)u.shift()},Zc.prototype._onMoveEnd=function(u){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var f={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},c=0,d=this._inertiaBuffer;c<d.length;c+=1){var _=d[c].settings;f.zoom+=_.zoomDelta||0,f.bearing+=_.bearingDelta||0,f.pitch+=_.pitchDelta||0,_.panDelta&&f.pan._add(_.panDelta),_.around&&(f.around=_.around),_.pinchAround&&(f.pinchAround=_.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(f.pan.mag()){var O=cs(f.pan.mag(),w,a.extend({},Fu,u||{}));E.offset=f.pan.mult(O.amount/f.pan.mag()),E.center=this._map.transform.center,Xc(E,O)}if(f.zoom){var k=cs(f.zoom,w,Hc);E.zoom=this._map.transform.zoom+k.amount,Xc(E,k)}if(f.bearing){var R=cs(f.bearing,w,U1);E.bearing=this._map.transform.bearing+a.clamp(R.amount,-179,179),Xc(E,R)}if(f.pitch){var $=cs(f.pitch,w,j1);E.pitch=this._map.transform.pitch+$.amount,Xc(E,$)}if(E.zoom||E.bearing){var q=f.pinchAround===void 0?f.around:f.pinchAround;E.around=q?this._map.unproject(q):this._map.getCenter()}return this.clear(),a.extend(E,{noMoveStart:!0})}};var ri=function(u){function f(d,_,w,E){E===void 0&&(E={});var O=g.mousePos(_.getCanvasContainer(),w),k=_.unproject(O);u.call(this,d,a.extend({point:O,lngLat:k,originalEvent:w},E)),this._defaultPrevented=!1,this.target=_}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var c={defaultPrevented:{configurable:!0}};return f.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(f.prototype,c),f}(a.Event),Kc=function(u){function f(d,_,w){var E=d==="touchend"?w.changedTouches:w.touches,O=g.touchPos(_.getCanvasContainer(),E),k=O.map(function(q){return _.unproject(q)}),R=O.reduce(function(q,H,ne,re){return q.add(H.div(re.length))},new a.Point(0,0)),$=_.unproject(R);u.call(this,d,{points:O,point:R,lngLats:k,lngLat:$,originalEvent:w}),this._defaultPrevented=!1}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var c={defaultPrevented:{configurable:!0}};return f.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(f.prototype,c),f}(a.Event),ov=function(u){function f(d,_,w){u.call(this,d,{originalEvent:w}),this._defaultPrevented=!1}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var c={defaultPrevented:{configurable:!0}};return f.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(f.prototype,c),f}(a.Event),Zn=function(u,f){this._map=u,this._clickTolerance=f.clickTolerance};Zn.prototype.reset=function(){delete this._mousedownPos},Zn.prototype.wheel=function(u){return this._firePreventable(new ov(u.type,this._map,u))},Zn.prototype.mousedown=function(u,f){return this._mousedownPos=f,this._firePreventable(new ri(u.type,this._map,u))},Zn.prototype.mouseup=function(u){this._map.fire(new ri(u.type,this._map,u))},Zn.prototype.click=function(u,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new ri(u.type,this._map,u))},Zn.prototype.dblclick=function(u){return this._firePreventable(new ri(u.type,this._map,u))},Zn.prototype.mouseover=function(u){this._map.fire(new ri(u.type,this._map,u))},Zn.prototype.mouseout=function(u){this._map.fire(new ri(u.type,this._map,u))},Zn.prototype.touchstart=function(u){return this._firePreventable(new Kc(u.type,this._map,u))},Zn.prototype.touchmove=function(u){this._map.fire(new Kc(u.type,this._map,u))},Zn.prototype.touchend=function(u){this._map.fire(new Kc(u.type,this._map,u))},Zn.prototype.touchcancel=function(u){this._map.fire(new Kc(u.type,this._map,u))},Zn.prototype._firePreventable=function(u){if(this._map.fire(u),u.defaultPrevented)return{}},Zn.prototype.isEnabled=function(){return!0},Zn.prototype.isActive=function(){return!1},Zn.prototype.enable=function(){},Zn.prototype.disable=function(){};var wt=function(u){this._map=u};wt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},wt.prototype.mousemove=function(u){this._map.fire(new ri(u.type,this._map,u))},wt.prototype.mousedown=function(){this._delayContextMenu=!0},wt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ri("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},wt.prototype.contextmenu=function(u){this._delayContextMenu?this._contextMenuEvent=u:this._map.fire(new ri(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()},wt.prototype.isEnabled=function(){return!0},wt.prototype.isActive=function(){return!1},wt.prototype.enable=function(){},wt.prototype.disable=function(){};var bo=function(u,f){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=f.clickTolerance||1};function hf(u,f){for(var c={},d=0;d<u.length;d++)c[u[d].identifier]=f[d];return c}bo.prototype.isEnabled=function(){return!!this._enabled},bo.prototype.isActive=function(){return!!this._active},bo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},bo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},bo.prototype.mousedown=function(u,f){this.isEnabled()&&u.shiftKey&&u.button===0&&(g.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)},bo.prototype.mousemoveWindow=function(u,f){if(this._active){var c=f;if(!(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)){var d=this._startPos;this._lastPos=c,this._box||(this._box=g.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));var _=Math.min(d.x,c.x),w=Math.max(d.x,c.x),E=Math.min(d.y,c.y),O=Math.max(d.y,c.y);g.setTransform(this._box,"translate("+_+"px,"+E+"px)"),this._box.style.width=w-_+"px",this._box.style.height=O-E+"px"}}},bo.prototype.mouseupWindow=function(u,f){var c=this;if(this._active&&u.button===0){var d=this._startPos,_=f;if(this.reset(),g.suppressClick(),d.x!==_.x||d.y!==_.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:function(w){return w.fitScreenCoordinates(d,_,c._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",u)}},bo.prototype.keydown=function(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))},bo.prototype.blur=function(){this.reset()},bo.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos},bo.prototype._fireEvent=function(u,f){return this._map.fire(new a.Event(u,{originalEvent:f}))};var Bu=function(u){this.reset(),this.numTouches=u.numTouches};Bu.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Bu.prototype.touchstart=function(u,f,c){(this.centroid||c.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),c.length===this.numTouches&&(this.centroid=function(d){for(var _=new a.Point(0,0),w=0,E=d;w<E.length;w+=1)_._add(E[w]);return _.div(d.length)}(f),this.touches=hf(c,f)))},Bu.prototype.touchmove=function(u,f,c){if(!this.aborted&&this.centroid){var d=hf(c,f);for(var _ in this.touches){var w=d[_];(!w||w.dist(this.touches[_])>30)&&(this.aborted=!0)}}},Bu.prototype.touchend=function(u,f,c){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),c.length===0){var d=!this.aborted&&this.centroid;if(this.reset(),d)return d}};var va=function(u){this.singleTap=new Bu(u),this.numTaps=u.numTaps,this.reset()};va.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},va.prototype.touchstart=function(u,f,c){this.singleTap.touchstart(u,f,c)},va.prototype.touchmove=function(u,f,c){this.singleTap.touchmove(u,f,c)},va.prototype.touchend=function(u,f,c){var d=this.singleTap.touchend(u,f,c);if(d){var _=u.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(d)<30;if(_&&w||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}};var wo=function(){this._zoomIn=new va({numTouches:1,numTaps:2}),this._zoomOut=new va({numTouches:2,numTaps:1}),this.reset()};wo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},wo.prototype.touchstart=function(u,f,c){this._zoomIn.touchstart(u,f,c),this._zoomOut.touchstart(u,f,c)},wo.prototype.touchmove=function(u,f,c){this._zoomIn.touchmove(u,f,c),this._zoomOut.touchmove(u,f,c)},wo.prototype.touchend=function(u,f,c){var d=this,_=this._zoomIn.touchend(u,f,c),w=this._zoomOut.touchend(u,f,c);return _?(this._active=!0,u.preventDefault(),setTimeout(function(){return d.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(_)},{originalEvent:u})}}):w?(this._active=!0,u.preventDefault(),setTimeout(function(){return d.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(w)},{originalEvent:u})}}):void 0},wo.prototype.touchcancel=function(){this.reset()},wo.prototype.enable=function(){this._enabled=!0},wo.prototype.disable=function(){this._enabled=!1,this.reset()},wo.prototype.isEnabled=function(){return this._enabled},wo.prototype.isActive=function(){return this._active};var Id={0:1,2:2},ct=function(u){this.reset(),this._clickTolerance=u.clickTolerance||1};ct.prototype.blur=function(){this.reset()},ct.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ct.prototype._correctButton=function(u,f){return!1},ct.prototype._move=function(u,f){return{}},ct.prototype.mousedown=function(u,f){if(!this._lastPoint){var c=g.mouseButton(u);this._correctButton(u,c)&&(this._lastPoint=f,this._eventButton=c)}},ct.prototype.mousemoveWindow=function(u,f){var c=this._lastPoint;if(c){if(u.preventDefault(),function(d,_){var w=Id[_];return d.buttons===void 0||(d.buttons&w)!==w}(u,this._eventButton))this.reset();else if(this._moved||!(f.dist(c)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(c,f)}},ct.prototype.mouseupWindow=function(u){this._lastPoint&&g.mouseButton(u)===this._eventButton&&(this._moved&&g.suppressClick(),this.reset())},ct.prototype.enable=function(){this._enabled=!0},ct.prototype.disable=function(){this._enabled=!1,this.reset()},ct.prototype.isEnabled=function(){return this._enabled},ct.prototype.isActive=function(){return this._active};var Od=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.mousedown=function(c,d){u.prototype.mousedown.call(this,c,d),this._lastPoint&&(this._active=!0)},f.prototype._correctButton=function(c,d){return d===0&&!c.ctrlKey},f.prototype._move=function(c,d){return{around:d,panDelta:d.sub(c)}},f}(ct),ff=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype._correctButton=function(c,d){return d===0&&c.ctrlKey||d===2},f.prototype._move=function(c,d){var _=.8*(d.x-c.x);if(_)return this._active=!0,{bearingDelta:_}},f.prototype.contextmenu=function(c){c.preventDefault()},f}(ct),Cd=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype._correctButton=function(c,d){return d===0&&c.ctrlKey||d===2},f.prototype._move=function(c,d){var _=-.5*(d.y-c.y);if(_)return this._active=!0,{pitchDelta:_}},f.prototype.contextmenu=function(c){c.preventDefault()},f}(ct),Qo=function(u){this._minTouches=1,this._clickTolerance=u.clickTolerance||1,this.reset()};Qo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},Qo.prototype.touchstart=function(u,f,c){return this._calculateTransform(u,f,c)},Qo.prototype.touchmove=function(u,f,c){if(this._active&&!(c.length<this._minTouches))return u.preventDefault(),this._calculateTransform(u,f,c)},Qo.prototype.touchend=function(u,f,c){this._calculateTransform(u,f,c),this._active&&c.length<this._minTouches&&this.reset()},Qo.prototype.touchcancel=function(){this.reset()},Qo.prototype._calculateTransform=function(u,f,c){c.length>0&&(this._active=!0);var d=hf(c,f),_=new a.Point(0,0),w=new a.Point(0,0),E=0;for(var O in d){var k=d[O],R=this._touches[O];R&&(_._add(k),w._add(k.sub(R)),E++,d[O]=k)}if(this._touches=d,!(E<this._minTouches)&&w.mag()){var $=w.div(E);if(this._sum._add($),!(this._sum.mag()<this._clickTolerance))return{around:_.div(E),panDelta:$}}},Qo.prototype.enable=function(){this._enabled=!0},Qo.prototype.disable=function(){this._enabled=!1,this.reset()},Qo.prototype.isEnabled=function(){return this._enabled},Qo.prototype.isActive=function(){return this._active};var Eo=function(){this.reset()};function pf(u,f,c){for(var d=0;d<u.length;d++)if(u[d].identifier===c)return f[d]}function df(u,f){return Math.log(u/f)/Math.LN2}Eo.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Eo.prototype._start=function(u){},Eo.prototype._move=function(u,f,c){return{}},Eo.prototype.touchstart=function(u,f,c){this._firstTwoTouches||c.length<2||(this._firstTwoTouches=[c[0].identifier,c[1].identifier],this._start([f[0],f[1]]))},Eo.prototype.touchmove=function(u,f,c){if(this._firstTwoTouches){u.preventDefault();var d=this._firstTwoTouches,_=d[1],w=pf(c,f,d[0]),E=pf(c,f,_);if(w&&E){var O=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],O,u)}}},Eo.prototype.touchend=function(u,f,c){if(this._firstTwoTouches){var d=this._firstTwoTouches,_=d[1],w=pf(c,f,d[0]),E=pf(c,f,_);w&&E||(this._active&&g.suppressClick(),this.reset())}},Eo.prototype.touchcancel=function(){this.reset()},Eo.prototype.enable=function(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"},Eo.prototype.disable=function(){this._enabled=!1,this.reset()},Eo.prototype.isEnabled=function(){return this._enabled},Eo.prototype.isActive=function(){return this._active};var So=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.reset=function(){u.prototype.reset.call(this),delete this._distance,delete this._startDistance},f.prototype._start=function(c){this._startDistance=this._distance=c[0].dist(c[1])},f.prototype._move=function(c,d){var _=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(df(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:df(this._distance,_),pinchAround:d}},f}(Eo);function hs(u,f){return 180*u.angleWith(f)/Math.PI}var av=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.reset=function(){u.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},f.prototype._start=function(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])},f.prototype._move=function(c,d){var _=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:hs(this._vector,_),pinchAround:d}},f.prototype._isBelowThreshold=function(c){this._minDiameter=Math.min(this._minDiameter,c.mag());var d=25/(Math.PI*this._minDiameter)*360,_=hs(c,this._startVector);return Math.abs(_)<d},f}(Eo);function Yc(u){return Math.abs(u.y)>Math.abs(u.x)}var Ad=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.reset=function(){u.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},f.prototype._start=function(c){this._lastPoints=c,Yc(c[0].sub(c[1]))&&(this._valid=!1)},f.prototype._move=function(c,d,_){var w=c[0].sub(this._lastPoints[0]),E=c[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,E,_.timeStamp),this._valid)return this._lastPoints=c,this._active=!0,{pitchDelta:(w.y+E.y)/2*-.5}},f.prototype.gestureBeginsVertically=function(c,d,_){if(this._valid!==void 0)return this._valid;var w=c.mag()>=2,E=d.mag()>=2;if(w||E){if(!w||!E)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;var O=c.y>0==d.y>0;return Yc(c)&&Yc(d)&&O}},f}(Eo),Pd={panStep:100,bearingStep:15,pitchStep:10},_a=function(){var u=Pd;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1};function Uo(u){return u*(2-u)}_a.prototype.blur=function(){this.reset()},_a.prototype.reset=function(){this._active=!1},_a.prototype.keydown=function(u){var f=this;if(!(u.altKey||u.ctrlKey||u.metaKey)){var c=0,d=0,_=0,w=0,E=0;switch(u.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:u.shiftKey?d=-1:(u.preventDefault(),w=-1);break;case 39:u.shiftKey?d=1:(u.preventDefault(),w=1);break;case 38:u.shiftKey?_=1:(u.preventDefault(),E=-1);break;case 40:u.shiftKey?_=-1:(u.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(d=0,_=0),{cameraAnimation:function(O){var k=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:Uo,zoom:c?Math.round(k)+c*(u.shiftKey?2:1):k,bearing:O.getBearing()+d*f._bearingStep,pitch:O.getPitch()+_*f._pitchStep,offset:[-w*f._panStep,-E*f._panStep],center:O.getCenter()},{originalEvent:u})}}}},_a.prototype.enable=function(){this._enabled=!0},_a.prototype.disable=function(){this._enabled=!1,this.reset()},_a.prototype.isEnabled=function(){return this._enabled},_a.prototype.isActive=function(){return this._active},_a.prototype.disableRotation=function(){this._rotationDisabled=!0},_a.prototype.enableRotation=function(){this._rotationDisabled=!1};var gr=function(u,f){this._map=u,this._el=u.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onTimeout"],this)};gr.prototype.setZoomRate=function(u){this._defaultZoomRate=u},gr.prototype.setWheelZoomRate=function(u){this._wheelZoomRate=u},gr.prototype.isEnabled=function(){return!!this._enabled},gr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},gr.prototype.isZooming=function(){return!!this._zooming},gr.prototype.enable=function(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=u&&u.around==="center")},gr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},gr.prototype.wheel=function(u){if(this.isEnabled()){var f=u.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY,c=a.browser.now(),d=c-(this._lastWheelEventTime||0);this._lastWheelEventTime=c,f!==0&&f%4.000244140625==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(d*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),u.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=u,this._delta-=f,this._active||this._start(u)),u.preventDefault()}},gr.prototype._onTimeout=function(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)},gr.prototype._start=function(u){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var f=g.mousePos(this._el,u);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(f)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},gr.prototype.renderFrame=function(){var u=this;if(this._frameId&&(this._frameId=null,this.isActive())){var f=this._map.transform;if(this._delta!==0){var c=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,d=2/(1+Math.exp(-Math.abs(this._delta*c)));this._delta<0&&d!==0&&(d=1/d);var _=typeof this._targetZoom=="number"?f.zoomScale(this._targetZoom):f.scale;this._targetZoom=Math.min(f.maxZoom,Math.max(f.minZoom,f.scaleZoom(_*d))),this._type==="wheel"&&(this._startZoom=f.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,E=typeof this._targetZoom=="number"?this._targetZoom:f.zoom,O=this._startZoom,k=this._easing,R=!1;if(this._type==="wheel"&&O&&k){var $=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),q=k($);w=a.number(O,E,q),$<1?this._frameId||(this._frameId=!0):R=!0}else w=E,R=!0;return this._active=!0,R&&(this._active=!1,this._finishTimeout=setTimeout(function(){u._zooming=!1,u._handler._triggerRenderFrame(),delete u._targetZoom,delete u._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!R,zoomDelta:w-f.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},gr.prototype._smoothOutEasing=function(u){var f=a.ease;if(this._prevEase){var c=this._prevEase,d=(a.browser.now()-c.start)/c.duration,_=c.easing(d+.01)-c.easing(d),w=.27/Math.sqrt(_*_+1e-4)*.01,E=Math.sqrt(.0729-w*w);f=a.bezier(w,E,.25,1)}return this._prevEase={start:a.browser.now(),duration:u,easing:f},f},gr.prototype.blur=function(){this.reset()},gr.prototype.reset=function(){this._active=!1};var Ra=function(u,f){this._clickZoom=u,this._tapZoom=f};Ra.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ra.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ra.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ra.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ea=function(){this.reset()};ea.prototype.reset=function(){this._active=!1},ea.prototype.blur=function(){this.reset()},ea.prototype.dblclick=function(u,f){return u.preventDefault(),{cameraAnimation:function(c){c.easeTo({duration:300,zoom:c.getZoom()+(u.shiftKey?-1:1),around:c.unproject(f)},{originalEvent:u})}}},ea.prototype.enable=function(){this._enabled=!0},ea.prototype.disable=function(){this._enabled=!1,this.reset()},ea.prototype.isEnabled=function(){return this._enabled},ea.prototype.isActive=function(){return this._active};var ki=function(){this._tap=new va({numTouches:1,numTaps:1}),this.reset()};ki.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ki.prototype.touchstart=function(u,f,c){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?c.length>0&&(this._swipePoint=f[0],this._swipeTouch=c[0].identifier):this._tap.touchstart(u,f,c))},ki.prototype.touchmove=function(u,f,c){if(this._tapTime){if(this._swipePoint){if(c[0].identifier!==this._swipeTouch)return;var d=f[0],_=d.y-this._swipePoint.y;return this._swipePoint=d,u.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(u,f,c)},ki.prototype.touchend=function(u,f,c){this._tapTime?this._swipePoint&&c.length===0&&this.reset():this._tap.touchend(u,f,c)&&(this._tapTime=u.timeStamp)},ki.prototype.touchcancel=function(){this.reset()},ki.prototype.enable=function(){this._enabled=!0},ki.prototype.disable=function(){this._enabled=!1,this.reset()},ki.prototype.isEnabled=function(){return this._enabled},ki.prototype.isActive=function(){return this._active};var Ul=function(u,f,c){this._el=u,this._mousePan=f,this._touchPan=c};Ul.prototype.enable=function(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ul.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ul.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ul.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Xs=function(u,f,c){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=f,this._mousePitch=c};Xs.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Xs.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Xs.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Xs.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var xa=function(u,f,c,d){this._el=u,this._touchZoom=f,this._touchRotate=c,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0};xa.prototype.enable=function(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},xa.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},xa.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},xa.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},xa.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},xa.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Hi=function(u){return u.zoom||u.drag||u.pitch||u.rotate},Jc=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f}(a.Event);function Dt(u){return u.panDelta&&u.panDelta.mag()||u.zoomDelta||u.bearingDelta||u.pitchDelta}var Tt=function(u,f){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Zc(u),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f),a.bindAll(["handleEvent","handleWindowEvent"],this);var c=this._el;this._listeners=[[c,"touchstart",{passive:!0}],[c,"touchmove",{passive:!1}],[c,"touchend",void 0],[c,"touchcancel",void 0],[c,"mousedown",void 0],[c,"mousemove",void 0],[c,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[c,"mouseover",void 0],[c,"mouseout",void 0],[c,"dblclick",void 0],[c,"click",void 0],[c,"keydown",{capture:!1}],[c,"keyup",void 0],[c,"wheel",{passive:!1}],[c,"contextmenu",void 0],[a.window,"blur",void 0]];for(var d=0,_=this._listeners;d<_.length;d+=1){var w=_[d],E=w[0];g.addEventListener(E,w[1],E===a.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};Tt.prototype.destroy=function(){for(var u=0,f=this._listeners;u<f.length;u+=1){var c=f[u],d=c[0];g.removeEventListener(d,c[1],d===a.window.document?this.handleWindowEvent:this.handleEvent,c[2])}},Tt.prototype._addDefaultHandlers=function(u){var f=this._map,c=f.getCanvasContainer();this._add("mapEvent",new Zn(f,u));var d=f.boxZoom=new bo(f,u);this._add("boxZoom",d);var _=new wo,w=new ea;f.doubleClickZoom=new Ra(w,_),this._add("tapZoom",_),this._add("clickZoom",w);var E=new ki;this._add("tapDragZoom",E);var O=f.touchPitch=new Ad;this._add("touchPitch",O);var k=new ff(u),R=new Cd(u);f.dragRotate=new Xs(u,k,R),this._add("mouseRotate",k,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]);var $=new Od(u),q=new Qo(u);f.dragPan=new Ul(c,$,q),this._add("mousePan",$),this._add("touchPan",q,["touchZoom","touchRotate"]);var H=new av,ne=new So;f.touchZoomRotate=new xa(c,ne,H,E),this._add("touchRotate",H,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]);var re=f.scrollZoom=new gr(f,this);this._add("scrollZoom",re,["mousePan"]);var le=f.keyboard=new _a;this._add("keyboard",le),this._add("blockableMapEvent",new wt(f));for(var J=0,se=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];J<se.length;J+=1){var me=se[J];u.interactive&&u[me]&&f[me].enable(u[me])}},Tt.prototype._add=function(u,f,c){this._handlers.push({handlerName:u,handler:f,allowed:c}),this._handlersById[u]=f},Tt.prototype.stop=function(u){if(!this._updatingCamera){for(var f=0,c=this._handlers;f<c.length;f+=1)c[f].handler.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}},Tt.prototype.isActive=function(){for(var u=0,f=this._handlers;u<f.length;u+=1)if(f[u].handler.isActive())return!0;return!1},Tt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Tt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Tt.prototype.isMoving=function(){return Boolean(Hi(this._eventsInProgress))||this.isZooming()},Tt.prototype._blockedByActive=function(u,f,c){for(var d in u)if(d!==c&&(!f||f.indexOf(d)<0))return!0;return!1},Tt.prototype.handleWindowEvent=function(u){this.handleEvent(u,u.type+"Window")},Tt.prototype._getMapTouches=function(u){for(var f=[],c=0,d=u;c<d.length;c+=1){var _=d[c];this._el.contains(_.target)&&f.push(_)}return f},Tt.prototype.handleEvent=function(u,f){this._updatingCamera=!0;for(var c=u.type==="renderFrame"?void 0:u,d={needsRenderFrame:!1},_={},w={},E=u.touches?this._getMapTouches(u.touches):void 0,O=E?g.touchPos(this._el,E):g.mousePos(this._el,u),k=0,R=this._handlers;k<R.length;k+=1){var $=R[k],q=$.handlerName,H=$.handler,ne=$.allowed;if(H.isEnabled()){var re=void 0;this._blockedByActive(w,ne,q)?H.reset():H[f||u.type]&&(re=H[f||u.type](u,O,E),this.mergeHandlerResult(d,_,re,q,c),re&&re.needsRenderFrame&&this._triggerRenderFrame()),(re||H.isActive())&&(w[q]=H)}}var le={};for(var J in this._previousActiveHandlers)w[J]||(le[J]=c);this._previousActiveHandlers=w,(Object.keys(le).length||Dt(d))&&(this._changes.push([d,_,le]),this._triggerRenderFrame()),(Object.keys(w).length||Dt(d))&&this._map._stop(!0),this._updatingCamera=!1;var se=d.cameraAnimation;se&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],se(this._map))},Tt.prototype.mergeHandlerResult=function(u,f,c,d,_){if(c){a.extend(u,c);var w={handlerName:d,originalEvent:c.originalEvent||_};c.zoomDelta!==void 0&&(f.zoom=w),c.panDelta!==void 0&&(f.drag=w),c.pitchDelta!==void 0&&(f.pitch=w),c.bearingDelta!==void 0&&(f.rotate=w)}},Tt.prototype._applyChanges=function(){for(var u={},f={},c={},d=0,_=this._changes;d<_.length;d+=1){var w=_[d],E=w[0],O=w[1],k=w[2];E.panDelta&&(u.panDelta=(u.panDelta||new a.Point(0,0))._add(E.panDelta)),E.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(u.around=E.around),E.pinchAround!==void 0&&(u.pinchAround=E.pinchAround),E.noInertia&&(u.noInertia=E.noInertia),a.extend(f,O),a.extend(c,k)}this._updateMapTransform(u,f,c),this._changes=[]},Tt.prototype._updateMapTransform=function(u,f,c){var d=this._map,_=d.transform;if(!Dt(u))return this._fireEvents(f,c,!0);var w=u.panDelta,E=u.zoomDelta,O=u.bearingDelta,k=u.pitchDelta,R=u.around,$=u.pinchAround;$!==void 0&&(R=$),d._stop(!0),R=R||d.transform.centerPoint;var q=_.pointLocation(w?R.sub(w):R);O&&(_.bearing+=O),k&&(_.pitch+=k),E&&(_.zoom+=E),_.setLocationAtPoint(q,R),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(f,c,!0)},Tt.prototype._fireEvents=function(u,f,c){var d=this,_=Hi(this._eventsInProgress),w=Hi(u),E={};for(var O in u)this._eventsInProgress[O]||(E[O+"start"]=u[O].originalEvent),this._eventsInProgress[O]=u[O];for(var k in!_&&w&&this._fireEvent("movestart",w.originalEvent),E)this._fireEvent(k,E[k]);for(var R in w&&this._fireEvent("move",w.originalEvent),u)this._fireEvent(R,u[R].originalEvent);var $,q={};for(var H in this._eventsInProgress){var ne=this._eventsInProgress[H],re=ne.handlerName,le=ne.originalEvent;this._handlersById[re].isActive()||(delete this._eventsInProgress[H],q[H+"end"]=$=f[re]||le)}for(var J in q)this._fireEvent(J,q[J]);var se=Hi(this._eventsInProgress);if(c&&(_||w)&&!se){this._updatingCamera=!0;var me=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),xe=function(Ae){return Ae!==0&&-d._bearingSnap<Ae&&Ae<d._bearingSnap};me?(xe(me.bearing||this._map.getBearing())&&(me.bearing=0),this._map.easeTo(me,{originalEvent:$})):(this._map.fire(new a.Event("moveend",{originalEvent:$})),xe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Tt.prototype._fireEvent=function(u,f){this._map.fire(new a.Event(u,f?{originalEvent:f}:{}))},Tt.prototype._requestFrame=function(){var u=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(f){delete u._frameId,u.handleEvent(new Jc("renderFrame",{timeStamp:f})),u._applyChanges()})},Tt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var mf=function(u){function f(c,d){u.call(this),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=d.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},f.prototype.setCenter=function(c,d){return this.jumpTo({center:c},d)},f.prototype.panBy=function(c,d,_){return c=a.Point.convert(c).mult(-1),this.panTo(this.transform.center,a.extend({offset:c},d),_)},f.prototype.panTo=function(c,d,_){return this.easeTo(a.extend({center:c},d),_)},f.prototype.getZoom=function(){return this.transform.zoom},f.prototype.setZoom=function(c,d){return this.jumpTo({zoom:c},d),this},f.prototype.zoomTo=function(c,d,_){return this.easeTo(a.extend({zoom:c},d),_)},f.prototype.zoomIn=function(c,d){return this.zoomTo(this.getZoom()+1,c,d),this},f.prototype.zoomOut=function(c,d){return this.zoomTo(this.getZoom()-1,c,d),this},f.prototype.getBearing=function(){return this.transform.bearing},f.prototype.setBearing=function(c,d){return this.jumpTo({bearing:c},d),this},f.prototype.getPadding=function(){return this.transform.padding},f.prototype.setPadding=function(c,d){return this.jumpTo({padding:c},d),this},f.prototype.rotateTo=function(c,d,_){return this.easeTo(a.extend({bearing:c},d),_)},f.prototype.resetNorth=function(c,d){return this.rotateTo(0,a.extend({duration:1e3},c),d),this},f.prototype.resetNorthPitch=function(c,d){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},c),d),this},f.prototype.snapToNorth=function(c,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,d):this},f.prototype.getPitch=function(){return this.transform.pitch},f.prototype.setPitch=function(c,d){return this.jumpTo({pitch:c},d),this},f.prototype.cameraForBounds=function(c,d){c=a.LngLatBounds.convert(c);var _=d&&d.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),_,d)},f.prototype._cameraForBoxAndBearing=function(c,d,_,w){var E={top:0,bottom:0,right:0,left:0};if(typeof(w=a.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var O=w.padding;w.padding={top:O,bottom:O,right:O,left:O}}w.padding=a.extend(E,w.padding);var k=this.transform,R=k.padding,$=k.project(a.LngLat.convert(c)),q=k.project(a.LngLat.convert(d)),H=$.rotate(-_*Math.PI/180),ne=q.rotate(-_*Math.PI/180),re=new a.Point(Math.max(H.x,ne.x),Math.max(H.y,ne.y)),le=new a.Point(Math.min(H.x,ne.x),Math.min(H.y,ne.y)),J=re.sub(le),se=(k.width-(R.left+R.right+w.padding.left+w.padding.right))/J.x,me=(k.height-(R.top+R.bottom+w.padding.top+w.padding.bottom))/J.y;if(!(me<0||se<0)){var xe=Math.min(k.scaleZoom(k.scale*Math.min(se,me)),w.maxZoom),Ae=typeof w.offset.x=="number"?new a.Point(w.offset.x,w.offset.y):a.Point.convert(w.offset),Me=new a.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(_*Math.PI/180),ke=Ae.add(Me).mult(k.scale/k.zoomScale(xe));return{center:k.unproject($.add(q).div(2).sub(ke)),zoom:xe,bearing:_}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},f.prototype.fitBounds=function(c,d,_){return this._fitInternal(this.cameraForBounds(c,d),d,_)},f.prototype.fitScreenCoordinates=function(c,d,_,w,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(c)),this.transform.pointLocation(a.Point.convert(d)),_,w),w,E)},f.prototype._fitInternal=function(c,d,_){return c?(delete(d=a.extend(c,d)).padding,d.linear?this.easeTo(d,_):this.flyTo(d,_)):this},f.prototype.jumpTo=function(c,d){this.stop();var _=this.transform,w=!1,E=!1,O=!1;return"zoom"in c&&_.zoom!==+c.zoom&&(w=!0,_.zoom=+c.zoom),c.center!==void 0&&(_.center=a.LngLat.convert(c.center)),"bearing"in c&&_.bearing!==+c.bearing&&(E=!0,_.bearing=+c.bearing),"pitch"in c&&_.pitch!==+c.pitch&&(O=!0,_.pitch=+c.pitch),c.padding==null||_.isPaddingEqual(c.padding)||(_.padding=c.padding),this.fire(new a.Event("movestart",d)).fire(new a.Event("move",d)),w&&this.fire(new a.Event("zoomstart",d)).fire(new a.Event("zoom",d)).fire(new a.Event("zoomend",d)),E&&this.fire(new a.Event("rotatestart",d)).fire(new a.Event("rotate",d)).fire(new a.Event("rotateend",d)),O&&this.fire(new a.Event("pitchstart",d)).fire(new a.Event("pitch",d)).fire(new a.Event("pitchend",d)),this.fire(new a.Event("moveend",d))},f.prototype.easeTo=function(c,d){var _=this;this._stop(!1,c.easeId),((c=a.extend({offset:[0,0],duration:500,easing:a.ease},c)).animate===!1||!c.essential&&a.browser.prefersReducedMotion)&&(c.duration=0);var w=this.transform,E=this.getZoom(),O=this.getBearing(),k=this.getPitch(),R=this.getPadding(),$="zoom"in c?+c.zoom:E,q="bearing"in c?this._normalizeBearing(c.bearing,O):O,H="pitch"in c?+c.pitch:k,ne="padding"in c?c.padding:w.padding,re=a.Point.convert(c.offset),le=w.centerPoint.add(re),J=w.pointLocation(le),se=a.LngLat.convert(c.center||J);this._normalizeCenter(se);var me,xe,Ae=w.project(J),Me=w.project(se).sub(Ae),ke=w.zoomScale($-E);c.around&&(me=a.LngLat.convert(c.around),xe=w.locationPoint(me));var je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||$!==E,this._rotating=this._rotating||O!==q,this._pitching=this._pitching||H!==k,this._padding=!w.isPaddingEqual(ne),this._easeId=c.easeId,this._prepareEase(d,c.noMoveStart,je),this._ease(function(it){if(_._zooming&&(w.zoom=a.number(E,$,it)),_._rotating&&(w.bearing=a.number(O,q,it)),_._pitching&&(w.pitch=a.number(k,H,it)),_._padding&&(w.interpolatePadding(R,ne,it),le=w.centerPoint.add(re)),me)w.setLocationAtPoint(me,xe);else{var tt=w.zoomScale(w.zoom-E),gt=$>E?Math.min(2,ke):Math.max(.5,ke),Nt=Math.pow(gt,1-it),Ut=w.unproject(Ae.add(Me.mult(it*Nt)).mult(tt));w.setLocationAtPoint(w.renderWorldCopies?Ut.wrap():Ut,le)}_._fireMoveEvents(d)},function(it){_._afterEase(d,it)},c),this},f.prototype._prepareEase=function(c,d,_){_===void 0&&(_={}),this._moving=!0,d||_.moving||this.fire(new a.Event("movestart",c)),this._zooming&&!_.zooming&&this.fire(new a.Event("zoomstart",c)),this._rotating&&!_.rotating&&this.fire(new a.Event("rotatestart",c)),this._pitching&&!_.pitching&&this.fire(new a.Event("pitchstart",c))},f.prototype._fireMoveEvents=function(c){this.fire(new a.Event("move",c)),this._zooming&&this.fire(new a.Event("zoom",c)),this._rotating&&this.fire(new a.Event("rotate",c)),this._pitching&&this.fire(new a.Event("pitch",c))},f.prototype._afterEase=function(c,d){if(!this._easeId||!d||this._easeId!==d){delete this._easeId;var _=this._zooming,w=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new a.Event("zoomend",c)),w&&this.fire(new a.Event("rotateend",c)),E&&this.fire(new a.Event("pitchend",c)),this.fire(new a.Event("moveend",c))}},f.prototype.flyTo=function(c,d){var _=this;if(!c.essential&&a.browser.prefersReducedMotion){var w=a.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,d)}this.stop(),c=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},c);var E=this.transform,O=this.getZoom(),k=this.getBearing(),R=this.getPitch(),$=this.getPadding(),q="zoom"in c?a.clamp(+c.zoom,E.minZoom,E.maxZoom):O,H="bearing"in c?this._normalizeBearing(c.bearing,k):k,ne="pitch"in c?+c.pitch:R,re="padding"in c?c.padding:E.padding,le=E.zoomScale(q-O),J=a.Point.convert(c.offset),se=E.centerPoint.add(J),me=E.pointLocation(se),xe=a.LngLat.convert(c.center||me);this._normalizeCenter(xe);var Ae=E.project(me),Me=E.project(xe).sub(Ae),ke=c.curve,je=Math.max(E.width,E.height),it=je/le,tt=Me.mag();if("minZoom"in c){var gt=a.clamp(Math.min(c.minZoom,O,q),E.minZoom,E.maxZoom),Nt=je/E.zoomScale(gt-O);ke=Math.sqrt(Nt/tt*2)}var Ut=ke*ke;function Bt(Zt){var qt=(it*it-je*je+(Zt?-1:1)*Ut*Ut*tt*tt)/(2*(Zt?it:je)*Ut*tt);return Math.log(Math.sqrt(qt*qt+1)-qt)}function Cr(Zt){return(Math.exp(Zt)-Math.exp(-Zt))/2}function xt(Zt){return(Math.exp(Zt)+Math.exp(-Zt))/2}var Jt=Bt(0),sr=function(Zt){return xt(Jt)/xt(Jt+ke*Zt)},Yt=function(Zt){return je*((xt(Jt)*(Cr(qt=Jt+ke*Zt)/xt(qt))-Cr(Jt))/Ut)/tt;var qt},Kt=(Bt(1)-Jt)/ke;if(Math.abs(tt)<1e-6||!isFinite(Kt)){if(Math.abs(je-it)<1e-6)return this.easeTo(c,d);var ir=it<je?-1:1;Kt=Math.abs(Math.log(it/je))/ke,Yt=function(){return 0},sr=function(Zt){return Math.exp(ir*ke*Zt)}}return c.duration="duration"in c?+c.duration:1e3*Kt/("screenSpeed"in c?+c.screenSpeed/ke:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=k!==H,this._pitching=ne!==R,this._padding=!E.isPaddingEqual(re),this._prepareEase(d,!1),this._ease(function(Zt){var qt=Zt*Kt,fi=1/sr(qt);E.zoom=Zt===1?q:O+E.scaleZoom(fi),_._rotating&&(E.bearing=a.number(k,H,Zt)),_._pitching&&(E.pitch=a.number(R,ne,Zt)),_._padding&&(E.interpolatePadding($,re,Zt),se=E.centerPoint.add(J));var An=Zt===1?xe:E.unproject(Ae.add(Me.mult(Yt(qt))).mult(fi));E.setLocationAtPoint(E.renderWorldCopies?An.wrap():An,se),_._fireMoveEvents(d)},function(){return _._afterEase(d)},c),this},f.prototype.isEasing=function(){return!!this._easeFrameId},f.prototype.stop=function(){return this._stop()},f.prototype._stop=function(c,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,d)}if(!c){var w=this.handlers;w&&w.stop(!1)}return this},f.prototype._ease=function(c,d,_){_.animate===!1||_.duration===0?(c(1),d()):(this._easeStart=a.browser.now(),this._easeOptions=_,this._onEaseFrame=c,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},f.prototype._renderFrameCallback=function(){var c=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},f.prototype._normalizeBearing=function(c,d){c=a.wrap(c,-180,180);var _=Math.abs(c-d);return Math.abs(c-360-d)<_&&(c-=360),Math.abs(c+360-d)<_&&(c+=360),c},f.prototype._normalizeCenter=function(c){var d=this.transform;if(d.renderWorldCopies&&!d.lngRange){var _=c.lng-d.center.lng;c.lng+=_>180?-360:_<-180?360:0}},f}(a.Evented),Zi=function(u){u===void 0&&(u={}),this.options=u,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Zi.prototype.getDefaultPosition=function(){return"bottom-right"},Zi.prototype.onAdd=function(u){var f=this.options&&this.options.compact;return this._map=u,this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=g.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),f===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Zi.prototype.onRemove=function(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Zi.prototype._setElementTitle=function(u,f){var c=this._map._getUIString("AttributionControl."+f);u.title=c,u.setAttribute("aria-label",c)},Zi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Zi.prototype._updateEditLink=function(){var u=this._editLink;u||(u=this._editLink=this._container.querySelector(".mapbox-improve-map"));var f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(u){var c=f.reduce(function(d,_,w){return _.value&&(d+=_.key+"="+_.value+(w<f.length-1?"&":"")),d},"?");u.href=a.config.FEEDBACK_URL+"/"+c+(this._map._hash?this._map._hash.getHashString(!0):""),u.rel="noopener nofollow",this._setElementTitle(u,"MapFeedback")}},Zi.prototype._updateData=function(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Zi.prototype._updateAttributions=function(){if(this._map.style){var u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(function(O){return typeof O!="string"?"":O})):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){var f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}var c=this._map.style.sourceCaches;for(var d in c){var _=c[d];if(_.used){var w=_.getSource();w.attribution&&u.indexOf(w.attribution)<0&&u.push(w.attribution)}}u.sort(function(O,k){return O.length-k.length});var E=(u=u.filter(function(O,k){for(var R=k+1;R<u.length;R++)if(u[R].indexOf(O)>=0)return!1;return!0})).join(" | ");E!==this._attribHTML&&(this._attribHTML=E,u.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Zi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ba=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};ba.prototype.onAdd=function(u){this._map=u,this._container=g.create("div","mapboxgl-ctrl");var f=g.create("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ba.prototype.onRemove=function(){g.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ba.prototype.getDefaultPosition=function(){return"bottom-left"},ba.prototype._updateLogo=function(u){u&&u.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ba.prototype._logoRequired=function(){if(this._map.style){var u=this._map.style.sourceCaches;for(var f in u)if(u[f].getSource().mapbox_logo)return!0;return!1}},ba.prototype._updateCompact=function(){var u=this._container.children;if(u.length){var f=u[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}};var Li=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Li.prototype.add=function(u){var f=++this._id;return this._queue.push({callback:u,id:f,cancelled:!1}),f},Li.prototype.remove=function(u){for(var f=this._currentlyRunning,c=0,d=f?this._queue.concat(f):this._queue;c<d.length;c+=1){var _=d[c];if(_.id===u)return void(_.cancelled=!0)}},Li.prototype.run=function(u){u===void 0&&(u=0);var f=this._currentlyRunning=this._queue;this._queue=[];for(var c=0,d=f;c<d.length;c+=1){var _=d[c];if(!_.cancelled&&(_.callback(u),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Li.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var za={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},kd=a.window.HTMLImageElement,yf=a.window.HTMLElement,$r=a.window.ImageBitmap,xi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},sv=function(u){function f(d){var _=this;if((d=a.extend({},xi,d)).minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new Sr(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies);if(u.call(this,w,d),this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=d.collectResourceTiming,this._renderTaskQueue=new Li,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},za,d.locale),this._clickTolerance=d.clickTolerance,this._requestManager=new a.RequestManager(d.transformRequest,d.accessToken),typeof d.container=="string"){if(this._container=a.window.document.getElementById(d.container),!this._container)throw new Error("Container '"+d.container+"' not found.")}else{if(!(d.container instanceof yf))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return _._update(!1)}),this.on("moveend",function(){return _._update(!1)}),this.on("zoom",function(){return _._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Tt(this,d),this._hash=d.hash&&new Vo(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,a.extend({},d.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=d.localIdeographFontFamily,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Zi({customAttribution:d.customAttribution})),this.addControl(new ba,d.logoPosition),this.on("style.load",function(){_.transform.unmodified&&_.jumpTo(_.style.stylesheet)}),this.on("data",function(E){_._update(E.dataType==="style"),_.fire(new a.Event(E.dataType+"data",E))}),this.on("dataloading",function(E){_.fire(new a.Event(E.dataType+"dataloading",E))})}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var c={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return f.prototype._getMapId=function(){return this._mapId},f.prototype.addControl=function(d,_){if(_===void 0&&(_=d.getDefaultPosition?d.getDefaultPosition():"top-right"),!d||!d.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=d.onAdd(this);this._controls.push(d);var E=this._controlPositions[_];return _.indexOf("bottom")!==-1?E.insertBefore(w,E.firstChild):E.appendChild(w),this},f.prototype.removeControl=function(d){if(!d||!d.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var _=this._controls.indexOf(d);return _>-1&&this._controls.splice(_,1),d.onRemove(this),this},f.prototype.hasControl=function(d){return this._controls.indexOf(d)>-1},f.prototype.resize=function(d){var _=this._containerDimensions(),w=_[0],E=_[1];if(w===this.transform.width&&E===this.transform.height)return this;this._resizeCanvas(w,E),this.transform.resize(w,E),this.painter.resize(w,E);var O=!this._moving;return O&&this.fire(new a.Event("movestart",d)).fire(new a.Event("move",d)),this.fire(new a.Event("resize",d)),O&&this.fire(new a.Event("moveend",d)),this},f.prototype.getBounds=function(){return this.transform.getBounds()},f.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},f.prototype.setMaxBounds=function(d){return this.transform.setMaxBounds(a.LngLatBounds.convert(d)),this._update()},f.prototype.setMinZoom=function(d){if((d=d==null?-2:d)>=-2&&d<=this.transform.maxZoom)return this.transform.minZoom=d,this._update(),this.getZoom()<d&&this.setZoom(d),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},f.prototype.getMinZoom=function(){return this.transform.minZoom},f.prototype.setMaxZoom=function(d){if((d=d==null?22:d)>=this.transform.minZoom)return this.transform.maxZoom=d,this._update(),this.getZoom()>d&&this.setZoom(d),this;throw new Error("maxZoom must be greater than the current minZoom")},f.prototype.getMaxZoom=function(){return this.transform.maxZoom},f.prototype.setMinPitch=function(d){if((d=d==null?0:d)<0)throw new Error("minPitch must be greater than or equal to 0");if(d>=0&&d<=this.transform.maxPitch)return this.transform.minPitch=d,this._update(),this.getPitch()<d&&this.setPitch(d),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},f.prototype.getMinPitch=function(){return this.transform.minPitch},f.prototype.setMaxPitch=function(d){if((d=d==null?60:d)>60)throw new Error("maxPitch must be less than or equal to 60");if(d>=this.transform.minPitch)return this.transform.maxPitch=d,this._update(),this.getPitch()>d&&this.setPitch(d),this;throw new Error("maxPitch must be greater than the current minPitch")},f.prototype.getMaxPitch=function(){return this.transform.maxPitch},f.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},f.prototype.setRenderWorldCopies=function(d){return this.transform.renderWorldCopies=d,this._update()},f.prototype.project=function(d){return this.transform.locationPoint(a.LngLat.convert(d))},f.prototype.unproject=function(d){return this.transform.pointLocation(a.Point.convert(d))},f.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},f.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},f.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},f.prototype._createDelegatedListener=function(d,_,w){var E,O=this;if(d==="mouseenter"||d==="mouseover"){var k=!1;return{layer:_,listener:w,delegates:{mousemove:function($){var q=O.getLayer(_)?O.queryRenderedFeatures($.point,{layers:[_]}):[];q.length?k||(k=!0,w.call(O,new ri(d,O,$.originalEvent,{features:q}))):k=!1},mouseout:function(){k=!1}}}}if(d==="mouseleave"||d==="mouseout"){var R=!1;return{layer:_,listener:w,delegates:{mousemove:function($){(O.getLayer(_)?O.queryRenderedFeatures($.point,{layers:[_]}):[]).length?R=!0:R&&(R=!1,w.call(O,new ri(d,O,$.originalEvent)))},mouseout:function($){R&&(R=!1,w.call(O,new ri(d,O,$.originalEvent)))}}}}return{layer:_,listener:w,delegates:(E={},E[d]=function($){var q=O.getLayer(_)?O.queryRenderedFeatures($.point,{layers:[_]}):[];q.length&&($.features=q,w.call(O,$),delete $.features)},E)}},f.prototype.on=function(d,_,w){if(w===void 0)return u.prototype.on.call(this,d,_);var E=this._createDelegatedListener(d,_,w);for(var O in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[d]=this._delegatedListeners[d]||[],this._delegatedListeners[d].push(E),E.delegates)this.on(O,E.delegates[O]);return this},f.prototype.once=function(d,_,w){if(w===void 0)return u.prototype.once.call(this,d,_);var E=this._createDelegatedListener(d,_,w);for(var O in E.delegates)this.once(O,E.delegates[O]);return this},f.prototype.off=function(d,_,w){var E=this;return w===void 0?u.prototype.off.call(this,d,_):(this._delegatedListeners&&this._delegatedListeners[d]&&function(O){for(var k=O[d],R=0;R<k.length;R++){var $=k[R];if($.layer===_&&$.listener===w){for(var q in $.delegates)E.off(q,$.delegates[q]);return k.splice(R,1),E}}}(this._delegatedListeners),this)},f.prototype.queryRenderedFeatures=function(d,_){if(!this.style)return[];var w;if(_!==void 0||d===void 0||d instanceof a.Point||Array.isArray(d)||(_=d,d=void 0),_=_||{},(d=d||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof d[0]=="number")w=[a.Point.convert(d)];else{var E=a.Point.convert(d[0]),O=a.Point.convert(d[1]);w=[E,new a.Point(O.x,E.y),O,new a.Point(E.x,O.y),E]}return this.style.queryRenderedFeatures(w,_,this.transform)},f.prototype.querySourceFeatures=function(d,_){return this.style.querySourceFeatures(d,_)},f.prototype.setStyle=function(d,_){return(_=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},_)).diff!==!1&&_.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&d?(this._diffStyle(d,_),this):(this._localIdeographFontFamily=_.localIdeographFontFamily,this._updateStyle(d,_))},f.prototype._getUIString=function(d){var _=this._locale[d];if(_==null)throw new Error("Missing UI string '"+d+"'");return _},f.prototype._updateStyle=function(d,_){return this.style&&(this.style.setEventedParent(null),this.style._remove()),d?(this.style=new xo(this,_||{}),this.style.setEventedParent(this,{style:this.style}),typeof d=="string"?this.style.loadURL(d):this.style.loadJSON(d),this):(delete this.style,this)},f.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new xo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},f.prototype._diffStyle=function(d,_){var w=this;if(typeof d=="string"){var E=this._requestManager.normalizeStyleURL(d),O=this._requestManager.transformRequest(E,a.ResourceType.Style);a.getJSON(O,function(k,R){k?w.fire(new a.ErrorEvent(k)):R&&w._updateDiff(R,_)})}else typeof d=="object"&&this._updateDiff(d,_)},f.prototype._updateDiff=function(d,_){try{this.style.setState(d)&&this._update(!0)}catch(w){a.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(d,_)}},f.prototype.getStyle=function(){if(this.style)return this.style.serialize()},f.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},f.prototype.addSource=function(d,_){return this._lazyInitEmptyStyle(),this.style.addSource(d,_),this._update(!0)},f.prototype.isSourceLoaded=function(d){var _=this.style&&this.style.sourceCaches[d];if(_!==void 0)return _.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+d+"'")))},f.prototype.areTilesLoaded=function(){var d=this.style&&this.style.sourceCaches;for(var _ in d){var w=d[_]._tiles;for(var E in w){var O=w[E];if(O.state!=="loaded"&&O.state!=="errored")return!1}}return!0},f.prototype.addSourceType=function(d,_,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(d,_,w)},f.prototype.removeSource=function(d){return this.style.removeSource(d),this._update(!0)},f.prototype.getSource=function(d){return this.style.getSource(d)},f.prototype.addImage=function(d,_,w){w===void 0&&(w={});var E=w.pixelRatio;E===void 0&&(E=1);var O=w.sdf;O===void 0&&(O=!1);var k=w.stretchX,R=w.stretchY,$=w.content;if(this._lazyInitEmptyStyle(),_ instanceof kd||$r&&_ instanceof $r){var q=a.browser.getImageData(_);this.style.addImage(d,{data:new a.RGBAImage({width:q.width,height:q.height},q.data),pixelRatio:E,stretchX:k,stretchY:R,content:$,sdf:O,version:0})}else{if(_.width===void 0||_.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var H=_;this.style.addImage(d,{data:new a.RGBAImage({width:_.width,height:_.height},new Uint8Array(_.data)),pixelRatio:E,stretchX:k,stretchY:R,content:$,sdf:O,version:0,userImage:H}),H.onAdd&&H.onAdd(this,d)}},f.prototype.updateImage=function(d,_){var w=this.style.getImage(d);if(!w)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var E=_ instanceof kd||$r&&_ instanceof $r?a.browser.getImageData(_):_,O=E.width,k=E.height,R=E.data;return O===void 0||k===void 0?this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):O!==w.data.width||k!==w.data.height?this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(R,!(_ instanceof kd||$r&&_ instanceof $r)),void this.style.updateImage(d,w))},f.prototype.hasImage=function(d){return d?!!this.style.getImage(d):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},f.prototype.removeImage=function(d){this.style.removeImage(d)},f.prototype.loadImage=function(d,_){a.getImage(this._requestManager.transformRequest(d,a.ResourceType.Image),_)},f.prototype.listImages=function(){return this.style.listImages()},f.prototype.addLayer=function(d,_){return this._lazyInitEmptyStyle(),this.style.addLayer(d,_),this._update(!0)},f.prototype.moveLayer=function(d,_){return this.style.moveLayer(d,_),this._update(!0)},f.prototype.removeLayer=function(d){return this.style.removeLayer(d),this._update(!0)},f.prototype.getLayer=function(d){return this.style.getLayer(d)},f.prototype.setLayerZoomRange=function(d,_,w){return this.style.setLayerZoomRange(d,_,w),this._update(!0)},f.prototype.setFilter=function(d,_,w){return w===void 0&&(w={}),this.style.setFilter(d,_,w),this._update(!0)},f.prototype.getFilter=function(d){return this.style.getFilter(d)},f.prototype.setPaintProperty=function(d,_,w,E){return E===void 0&&(E={}),this.style.setPaintProperty(d,_,w,E),this._update(!0)},f.prototype.getPaintProperty=function(d,_){return this.style.getPaintProperty(d,_)},f.prototype.setLayoutProperty=function(d,_,w,E){return E===void 0&&(E={}),this.style.setLayoutProperty(d,_,w,E),this._update(!0)},f.prototype.getLayoutProperty=function(d,_){return this.style.getLayoutProperty(d,_)},f.prototype.setLight=function(d,_){return _===void 0&&(_={}),this._lazyInitEmptyStyle(),this.style.setLight(d,_),this._update(!0)},f.prototype.getLight=function(){return this.style.getLight()},f.prototype.setFeatureState=function(d,_){return this.style.setFeatureState(d,_),this._update()},f.prototype.removeFeatureState=function(d,_){return this.style.removeFeatureState(d,_),this._update()},f.prototype.getFeatureState=function(d){return this.style.getFeatureState(d)},f.prototype.getContainer=function(){return this._container},f.prototype.getCanvasContainer=function(){return this._canvasContainer},f.prototype.getCanvas=function(){return this._canvas},f.prototype._containerDimensions=function(){var d=0,_=0;return this._container&&(d=this._container.clientWidth||400,_=this._container.clientHeight||300),[d,_]},f.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},f.prototype._setupContainer=function(){var d=this._container;d.classList.add("mapboxgl-map"),(this._missingCSSCanary=g.create("div","mapboxgl-canary",d)).style.visibility="hidden",this._detectMissingCSS();var _=this._canvasContainer=g.create("div","mapboxgl-canvas-container",d);this._interactive&&_.classList.add("mapboxgl-interactive"),this._canvas=g.create("canvas","mapboxgl-canvas",_),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var E=this._controlContainer=g.create("div","mapboxgl-control-container",d),O=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(k){O[k]=g.create("div","mapboxgl-ctrl-"+k,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},f.prototype._resizeCanvas=function(d,_){var w=a.browser.devicePixelRatio||1;this._canvas.width=w*d,this._canvas.height=w*_,this._canvas.style.width=d+"px",this._canvas.style.height=_+"px"},f.prototype._setupPainter=function(){var d=a.extend({},m.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),_=this._canvas.getContext("webgl",d)||this._canvas.getContext("experimental-webgl",d);_?(this.painter=new vn(_,this.transform),a.webpSupported.testSupport(_)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},f.prototype._contextLost=function(d){d.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:d}))},f.prototype._contextRestored=function(d){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:d}))},f.prototype._onMapScroll=function(d){if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},f.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},f.prototype._update=function(d){return this.style?(this._styleDirty=this._styleDirty||d,this._sourcesDirty=!0,this.triggerRepaint(),this):this},f.prototype._requestRenderFrame=function(d){return this._update(),this._renderTaskQueue.add(d)},f.prototype._cancelRenderFrame=function(d){this._renderTaskQueue.remove(d)},f.prototype._render=function(d){var _,w=this,E=0,O=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(_=O.createQueryEXT(),O.beginQueryEXT(O.TIME_ELAPSED_EXT,_),E=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(d),!this._removed){var k=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var R=this.transform.zoom,$=a.browser.now();this.style.zoomHistory.update(R,$);var q=new a.EvaluationParameters(R,{now:$,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),H=q.crossFadingFactor();H===1&&H===this._crossFadingFactor||(k=!0,this._crossFadingFactor=H),this.style.update(q)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||k)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ne=a.browser.now()-E;O.endQueryEXT(O.TIME_ELAPSED_EXT,_),setTimeout(function(){var J=O.getQueryObjectEXT(_,O.QUERY_RESULT_EXT)/1e6;O.deleteQueryEXT(_),w.fire(new a.Event("gpu-timing-frame",{cpuTime:ne,gpuTime:J}))},50)}if(this.listens("gpu-timing-layer")){var re=this.painter.collectGpuTimers();setTimeout(function(){var J=w.painter.queryGpuTimers(re);w.fire(new a.Event("gpu-timing-layer",{layerTimes:J}))},50)}var le=this._sourcesDirty||this._styleDirty||this._placementDirty;return le||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||le||(this._fullyLoaded=!0),this}},f.prototype.remove=function(){this._hash&&this._hash.remove();for(var d=0,_=this._controls;d<_.length;d+=1)_[d].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),jl(this._canvasContainer),jl(this._controlContainer),jl(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},f.prototype.triggerRepaint=function(){var d=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(_){d._frame=null,d._render(_)}))},f.prototype._onWindowOnline=function(){this._update()},f.prototype._onWindowResize=function(d){this._trackResize&&this.resize({originalEvent:d})._update()},c.showTileBoundaries.get=function(){return!!this._showTileBoundaries},c.showTileBoundaries.set=function(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())},c.showPadding.get=function(){return!!this._showPadding},c.showPadding.set=function(d){this._showPadding!==d&&(this._showPadding=d,this._update())},c.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},c.showCollisionBoxes.set=function(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())},c.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},c.showOverdrawInspector.set=function(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())},c.repaint.get=function(){return!!this._repaint},c.repaint.set=function(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())},c.vertices.get=function(){return!!this._vertices},c.vertices.set=function(d){this._vertices=d,this._update()},f.prototype._setCacheLimits=function(d,_){a.setCacheLimits(d,_)},c.version.get=function(){return a.version},Object.defineProperties(f.prototype,c),f}(mf);function jl(u){u.parentNode&&u.parentNode.removeChild(u)}var Ld={showCompass:!0,showZoom:!0,visualizePitch:!1},fs=function(u){var f=this;this.options=a.extend({},Ld,u),this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(c){return c.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(c){return f._map.zoomIn({},{originalEvent:c})}),g.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(c){return f._map.zoomOut({},{originalEvent:c})}),g.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(c){f.options.visualizePitch?f._map.resetNorthPitch({},{originalEvent:c}):f._map.resetNorth({},{originalEvent:c})}),this._compassIcon=g.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};fs.prototype._updateZoomButtons=function(){var u=this._map.getZoom(),f=u===this._map.getMaxZoom(),c=u===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())},fs.prototype._rotateCompassArrow=function(){var u=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=u},fs.prototype.onAdd=function(u){return this._map=u,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new To(this._map,this._compass,this.options.visualizePitch)),this._container},fs.prototype.onRemove=function(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},fs.prototype._createButton=function(u,f){var c=g.create("button",u,this._container);return c.type="button",c.addEventListener("click",f),c},fs.prototype._setButtonTitle=function(u,f){var c=this._map._getUIString("NavigationControl."+f);u.title=c,u.setAttribute("aria-label",c)};var To=function(u,f,c){c===void 0&&(c=!1),this._clickTolerance=10,this.element=f,this.mouseRotate=new ff({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,c&&(this.mousePitch=new Cd({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),g.addEventListener(f,"mousedown",this.mousedown),g.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(f,"touchmove",this.touchmove),g.addEventListener(f,"touchend",this.touchend),g.addEventListener(f,"touchcancel",this.reset)};function Vu(u,f,c){if(u=new a.LngLat(u.lng,u.lat),f){var d=new a.LngLat(u.lng-360,u.lat),_=new a.LngLat(u.lng+360,u.lat),w=c.locationPoint(u).distSqr(f);c.locationPoint(d).distSqr(f)<w?u=d:c.locationPoint(_).distSqr(f)<w&&(u=_)}for(;Math.abs(u.lng-c.center.lng)>180;){var E=c.locationPoint(u);if(E.x>=0&&E.y>=0&&E.x<=c.width&&E.y<=c.height)break;u.lng>c.center.lng?u.lng-=360:u.lng+=360}return u}To.prototype.down=function(u,f){this.mouseRotate.mousedown(u,f),this.mousePitch&&this.mousePitch.mousedown(u,f),g.disableDrag()},To.prototype.move=function(u,f){var c=this.map,d=this.mouseRotate.mousemoveWindow(u,f);if(d&&d.bearingDelta&&c.setBearing(c.getBearing()+d.bearingDelta),this.mousePitch){var _=this.mousePitch.mousemoveWindow(u,f);_&&_.pitchDelta&&c.setPitch(c.getPitch()+_.pitchDelta)}},To.prototype.off=function(){var u=this.element;g.removeEventListener(u,"mousedown",this.mousedown),g.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(u,"touchmove",this.touchmove),g.removeEventListener(u,"touchend",this.touchend),g.removeEventListener(u,"touchcancel",this.reset),this.offTemp()},To.prototype.offTemp=function(){g.enableDrag(),g.removeEventListener(a.window,"mousemove",this.mousemove),g.removeEventListener(a.window,"mouseup",this.mouseup)},To.prototype.mousedown=function(u){this.down(a.extend({},u,{ctrlKey:!0,preventDefault:function(){return u.preventDefault()}}),g.mousePos(this.element,u)),g.addEventListener(a.window,"mousemove",this.mousemove),g.addEventListener(a.window,"mouseup",this.mouseup)},To.prototype.mousemove=function(u){this.move(u,g.mousePos(this.element,u))},To.prototype.mouseup=function(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()},To.prototype.touchstart=function(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return u.preventDefault()}},this._startPos))},To.prototype.touchmove=function(u){u.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,u.targetTouches)[0],this.move({preventDefault:function(){return u.preventDefault()}},this._lastPos))},To.prototype.touchend=function(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},To.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Fa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function gf(u,f,c){var d=u.classList;for(var _ in Fa)d.remove("mapboxgl-"+c+"-anchor-"+_);d.add("mapboxgl-"+c+"-anchor-"+f)}var Uu,Qc=function(u){function f(c,d){if(u.call(this),(c instanceof a.window.HTMLElement||d)&&(c=a.extend({element:c},d)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,c&&c.element)this._element=c.element,this._offset=a.Point.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div"),this._element.setAttribute("aria-label","Map marker");var _=g.createNS("http://www.w3.org/2000/svg","svg");_.setAttributeNS(null,"display","block"),_.setAttributeNS(null,"height","41px"),_.setAttributeNS(null,"width","27px"),_.setAttributeNS(null,"viewBox","0 0 27 41");var w=g.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var E=g.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");var O=g.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");for(var k=0,R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];k<R.length;k+=1){var $=R[k],q=g.createNS("http://www.w3.org/2000/svg","ellipse");q.setAttributeNS(null,"opacity","0.04"),q.setAttributeNS(null,"cx","10.5"),q.setAttributeNS(null,"cy","5.80029008"),q.setAttributeNS(null,"rx",$.rx),q.setAttributeNS(null,"ry",$.ry),O.appendChild(q)}var H=g.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);var ne=g.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(ne);var re=g.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"fill","#000000");var le=g.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),re.appendChild(le);var J=g.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(6.0, 7.0)"),J.setAttributeNS(null,"fill","#FFFFFF");var se=g.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(8.0, 8.0)");var me=g.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#000000"),me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962");var xe=g.createNS("http://www.w3.org/2000/svg","circle");xe.setAttributeNS(null,"fill","#FFFFFF"),xe.setAttributeNS(null,"cx","5.5"),xe.setAttributeNS(null,"cy","5.5"),xe.setAttributeNS(null,"r","5.4999962"),se.appendChild(me),se.appendChild(xe),E.appendChild(O),E.appendChild(H),E.appendChild(re),E.appendChild(J),E.appendChild(se),_.appendChild(E),_.setAttributeNS(null,"height",41*this._scale+"px"),_.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(_),this._offset=a.Point.convert(c&&c.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ae){Ae.preventDefault()}),this._element.addEventListener("mousedown",function(Ae){Ae.preventDefault()}),gf(this._element,this._anchor,"marker"),this._popup=null}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.addTo=function(c){return this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},f.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this},f.prototype.getLngLat=function(){return this._lngLat},f.prototype.setLngLat=function(c){return this._lngLat=a.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},f.prototype.getElement=function(){return this._element},f.prototype.setPopup=function(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){var d=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(24.6+d)],"bottom-right":[-d,-1*(24.6+d)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=c,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},f.prototype._onKeyPress=function(c){var d=c.code,_=c.charCode||c.keyCode;d!=="Space"&&d!=="Enter"&&_!==32&&_!==13||this.togglePopup()},f.prototype._onMapClick=function(c){var d=c.originalEvent.target,_=this._element;this._popup&&(d===_||_.contains(d))&&this.togglePopup()},f.prototype.getPopup=function(){return this._popup},f.prototype.togglePopup=function(){var c=this._popup;return c?(c.isOpen()?c.remove():c.addTo(this._map),this):this},f.prototype._update=function(c){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Vu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(d="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_="rotateX("+this._map.getPitch()+"deg)"),c&&c.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,Fa[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+_+" "+d)}},f.prototype.getOffset=function(){return this._offset},f.prototype.setOffset=function(c){return this._offset=a.Point.convert(c),this._update(),this},f.prototype._onMove=function(c){if(!this._isDragging){var d=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},f.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},f.prototype._addDragHandler=function(c){this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},f.prototype.setDraggable=function(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},f.prototype.isDraggable=function(){return this._draggable},f.prototype.setRotation=function(c){return this._rotation=c||0,this._update(),this},f.prototype.getRotation=function(){return this._rotation},f.prototype.setRotationAlignment=function(c){return this._rotationAlignment=c||"auto",this._update(),this},f.prototype.getRotationAlignment=function(){return this._rotationAlignment},f.prototype.setPitchAlignment=function(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this},f.prototype.getPitchAlignment=function(){return this._pitchAlignment},f}(a.Evented),Dd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ju=0,Gl=!1,Nd=function(u){function f(c){u.call(this),this.options=a.extend({},Dd,c),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.onAdd=function(c){var d;return this._map=c,this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._setupUI,Uu!==void 0?d(Uu):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(_){d(Uu=_.state!=="denied")}):d(Uu=!!a.window.navigator.geolocation),this._container},f.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ju=0,Gl=!1},f.prototype._isOutOfMapMaxBounds=function(c){var d=this._map.getMaxBounds(),_=c.coords;return d&&(_.longitude<d.getWest()||_.longitude>d.getEast()||_.latitude<d.getSouth()||_.latitude>d.getNorth())},f.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},f.prototype._onSuccess=function(c){if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(c),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(c),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",c)),this._finish()}},f.prototype._updateCamera=function(c){var d=new a.LngLat(c.coords.longitude,c.coords.latitude),_=c.coords.accuracy,w=this._map.getBearing(),E=a.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(_),E,{geolocateSource:!0})},f.prototype._updateMarker=function(c){if(c){var d=new a.LngLat(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=c.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},f.prototype._updateCircleRadius=function(){var c=this._map._container.clientHeight/2,d=this._map.unproject([0,c]),_=this._map.unproject([1,c]),w=d.distanceTo(_),E=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=E+"px",this._circleElement.style.height=E+"px"},f.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},f.prototype._onError=function(c){if(this._map){if(this.options.trackUserLocation)if(c.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(c.code===3&&Gl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",c)),this._finish()}},f.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},f.prototype._setupUI=function(c){var d=this;if(this._container.addEventListener("contextmenu",function(E){return E.preventDefault()}),this._geolocateButton=g.create("button","mapboxgl-ctrl-geolocate",this._container),g.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",c===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var _=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=_,this._geolocateButton.setAttribute("aria-label",_)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Qc(this._dotElement),this._circleElement=g.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(E){E.geolocateSource||d._watchState!=="ACTIVE_LOCK"||E.originalEvent&&E.originalEvent.type==="resize"||(d._watchState="BACKGROUND",d._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),d._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),d.fire(new a.Event("trackuserlocationend")))})},f.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ju--,Gl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var c;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ju>1?(c={maximumAge:6e5,timeout:0},Gl=!0):(c=this.options.positionOptions,Gl=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,c)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},f.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},f}(a.Evented),Ks={maxWidth:100,unit:"metric"},Ys=function(u){this.options=a.extend({},Ks,u),a.bindAll(["_onMove","setUnit"],this)};function vf(u,f,c){var d=c&&c.maxWidth||100,_=u._container.clientHeight/2,w=u.unproject([0,_]),E=u.unproject([d,_]),O=w.distanceTo(E);if(c&&c.unit==="imperial"){var k=3.2808*O;k>5280?Js(f,d,k/5280,u._getUIString("ScaleControl.Miles")):Js(f,d,k,u._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Js(f,d,O/1852,u._getUIString("ScaleControl.NauticalMiles")):O>=1e3?Js(f,d,O/1e3,u._getUIString("ScaleControl.Kilometers")):Js(f,d,O,u._getUIString("ScaleControl.Meters"))}function Js(u,f,c,d){var _,w,E,O=(_=c,(w=Math.pow(10,(""+Math.floor(_)).length-1))*(E=(E=_/w)>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(k){var R=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*R)/R}(E)));u.style.width=f*(O/c)+"px",u.innerHTML=O+"&nbsp;"+d}Ys.prototype.getDefaultPosition=function(){return"bottom-left"},Ys.prototype._onMove=function(){vf(this._map,this._container,this.options)},Ys.prototype.onAdd=function(u){return this._map=u,this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",u.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ys.prototype.onRemove=function(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ys.prototype.setUnit=function(u){this.options.unit=u,vf(this._map,this._container,this.options)};var ta=function(u){this._fullscreen=!1,u&&u.container&&(u.container instanceof a.window.HTMLElement?this._container=u.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};ta.prototype.onAdd=function(u){return this._map=u,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ta.prototype.onRemove=function(){g.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ta.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},ta.prototype._setupUI=function(){var u=this._fullscreenButton=g.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);g.create("span","mapboxgl-ctrl-icon",u).setAttribute("aria-hidden",!0),u.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ta.prototype._updateTitle=function(){var u=this._getTitle();this._fullscreenButton.setAttribute("aria-label",u),this._fullscreenButton.title=u},ta.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ta.prototype._isFullscreen=function(){return this._fullscreen},ta.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ta.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Rd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},eh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),zd=function(u){function f(c){u.call(this),this.options=a.extend(Object.create(Rd),c),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f,f.prototype.addTo=function(c){return this._map&&this.remove(),this._map=c,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},f.prototype.isOpen=function(){return!!this._map},f.prototype.remove=function(){return this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},f.prototype.getLngLat=function(){return this._lngLat},f.prototype.setLngLat=function(c){return this._lngLat=a.LngLat.convert(c),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},f.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},f.prototype.getElement=function(){return this._container},f.prototype.setText=function(c){return this.setDOMContent(a.window.document.createTextNode(c))},f.prototype.setHTML=function(c){var d,_=a.window.document.createDocumentFragment(),w=a.window.document.createElement("body");for(w.innerHTML=c;d=w.firstChild;)_.appendChild(d);return this.setDOMContent(_)},f.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},f.prototype.setMaxWidth=function(c){return this.options.maxWidth=c,this._update(),this},f.prototype.setDOMContent=function(c){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(c),this._createCloseButton(),this._update(),this._focusFirstElement(),this},f.prototype.addClassName=function(c){this._container&&this._container.classList.add(c)},f.prototype.removeClassName=function(c){this._container&&this._container.classList.remove(c)},f.prototype.setOffset=function(c){return this.options.offset=c,this._update(),this},f.prototype.toggleClassName=function(c){if(this._container)return this._container.classList.toggle(c)},f.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=g.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},f.prototype._onMouseUp=function(c){this._update(c.point)},f.prototype._onMouseMove=function(c){this._update(c.point)},f.prototype._onDrag=function(c){this._update(c.point)},f.prototype._update=function(c){var d=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=g.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=g.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(q){return d._container.classList.add(q)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Vu(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||c)){var _=this._pos=this._trackPointer&&c?c:this._map.project(this._lngLat),w=this.options.anchor,E=function q(H){if(H){if(typeof H=="number"){var ne=Math.round(Math.sqrt(.5*Math.pow(H,2)));return{center:new a.Point(0,0),top:new a.Point(0,H),"top-left":new a.Point(ne,ne),"top-right":new a.Point(-ne,ne),bottom:new a.Point(0,-H),"bottom-left":new a.Point(ne,-ne),"bottom-right":new a.Point(-ne,-ne),left:new a.Point(H,0),right:new a.Point(-H,0)}}if(H instanceof a.Point||Array.isArray(H)){var re=a.Point.convert(H);return{center:re,top:re,"top-left":re,"top-right":re,bottom:re,"bottom-left":re,"bottom-right":re,left:re,right:re}}return{center:a.Point.convert(H.center||[0,0]),top:a.Point.convert(H.top||[0,0]),"top-left":a.Point.convert(H["top-left"]||[0,0]),"top-right":a.Point.convert(H["top-right"]||[0,0]),bottom:a.Point.convert(H.bottom||[0,0]),"bottom-left":a.Point.convert(H["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(H["bottom-right"]||[0,0]),left:a.Point.convert(H.left||[0,0]),right:a.Point.convert(H.right||[0,0])}}return q(new a.Point(0,0))}(this.options.offset);if(!w){var O,k=this._container.offsetWidth,R=this._container.offsetHeight;O=_.y+E.bottom.y<R?["top"]:_.y>this._map.transform.height-R?["bottom"]:[],_.x<k/2?O.push("left"):_.x>this._map.transform.width-k/2&&O.push("right"),w=O.length===0?"bottom":O.join("-")}var $=_.add(E[w]).round();g.setTransform(this._container,Fa[w]+" translate("+$.x+"px,"+$.y+"px)"),gf(this._container,w,"popup")}},f.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var c=this._container.querySelector(eh);c&&c.focus()}},f.prototype._onClose=function(){this.remove()},f}(a.Evented),_f={version:a.version,supported:m,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:sv,NavigationControl:fs,GeolocateControl:Nd,AttributionControl:Zi,ScaleControl:Ys,FullscreenControl:ta,Popup:zd,Marker:Qc,Style:xo,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){Le().acquire(Ce)},clearPrewarmedResources:function(){var u=St;u&&(u.isPreloaded()&&u.numActive()===1?(u.release(Ce),St=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(u){a.config.ACCESS_TOKEN=u},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(u){a.config.API_URL=u},get workerCount(){return Ue.workerCount},set workerCount(u){Ue.workerCount=u},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(u){a.config.MAX_PARALLEL_IMAGE_REQUESTS=u},clearStorage:function(u){a.clearTileCache(u)},workerUrl:""};return _f}),s})})(vT);const _T=vT.exports;class V0 extends NO.default{constructor(e){const n=Object.assign({},e);delete n.accessToken,delete n.style,delete n.container,delete n.xyz,super(n),this.set("xyz",e.maplibreOptions.xyz),this.set("xyz_custom",e.maplibreOptions.xyz_custom),this.xyz_=e.xyz,e.accessToken&&(_T.accessToken=e.accessToken),this.map_=new _T.Map({container:e.maplibreOptions.container,style:e.maplibreOptions.style,attributionControl:!1,interactive:!1}),this.maplibreMap=this.map_}getMapBoxMap(){return this.map_}getMapLibreMap(){return this.map_}render(e){const n=this.map_.getCanvas(),o=e.viewState;n.style.position="absolute";const s=this.getVisible();n.style.display=s?"block":"none";const h=this.getOpacity().toString();h!==n.style.opacity&&(n.style.opacity=h);const a=o.rotation;return a&&this.map_.rotateTo(yO.toDegrees(-a),{animate:!1}),this.map_.jumpTo({center:gO.toLonLat(o.center),zoom:o.zoom-1,animate:!1}),this.map_._frame&&(this.map_._frame.cancel(),this.map_._frame=null),this.map_._render(),n}setLayerVisibility(e,n){this.map_.setLayoutProperty(e,"visibility",n?"visible":"none")}getStyle(){return this.map_.getStyle()}getXYZ(){return this.get("xyz")}}class l6{createOlLayer(e,n){const o=Os(),{id:s,metadata:h,name:a}=e,m=n.get(s);if(!m)return;const g={container:o.getOlMap().getTarget(),...m},b=new V0({maplibreOptions:g,label:a,id:s,queryable_id:s,metadata:h}),T=os();return b!=null&&b.getMapLibreMap().loaded()?T.setBaseStyle(s,b==null?void 0:b.getMapLibreMap().getStyle()):new Promise(M=>b==null?void 0:b.getMapLibreMap().once("data",M)).then(()=>T.setBaseStyle(s,b==null?void 0:b.getMapLibreMap().getStyle())),b}}const u6=new l6;class c6{createOlLayer(e,n){let o;if(n&&(o=u6.createOlLayer(e,n)),!o)switch(e.type){case"WMS":o=yT.createOlLayer(e);break;case"WMTS":case"BG WMTS":o=gT.createOlLayer(e);break;default:throw new Error(`Unrecognized layer type: ${e.type}`)}return o.set("id",e.id),o.set("label",e.name),o.set("layer_name",e.name),o.set("metadata",e.metadata),o.set("queryable_id",e.id),o.set("current_time",ka().getLayerCurrentTime(e)),o.set("time",e.time),o.setOpacity(e.opacity),o}}const xT=new c6;class h6{setLayerTime(e,n){const o=e.getSource();o instanceof bx.default&&yT.setLayerTime(o,n),o instanceof wx.default&&gT.setLayerTime(e,o,n)}}const f6=new h6,tg=-200;function U0(){function t(P,z){if(!z)return;const V=b(z);P.addLayer(V)}function e(P,z){return P.getLayers().getArray().find(V=>V.get("id")===z)}function n(P,z){const V=e(P,z);V&&P.removeLayer(V)}function o(P,z){const V=P.getLayers().getArray();z.forEach((W,Y)=>{const X=V.find(ue=>ue.get("id")===W.id);X==null||X.setZIndex(Y+1)})}function s(P,z,V){const W=P.getLayers().getArray().find(Y=>Y.get("id")===z);W&&W.setOpacity(V)}function h(P,z){const V=ka(),W=e(P,z.id),Y=V.getLayerCurrentTime(z);Y&&W&&f6.setLayerTime(W,Y)}function a(P){Np.delete(P)}function m(P){return Np.has(P.id)}function g(P,z){Np.set(P,z)}function b(P){const z=P.id,V=Np.get(z);if(V)return V;{const W=xT.createOlLayer(P);return g(z,W),W}}function T(P){return P&&Np.get(P.id)||null}function M(P,z){const W=P.getLayers().getArray().find(Y=>Y.getZIndex()===tg);W&&z(W)}function I(P,z,V){var he;const W=P.getLayers(),Y=W.getArray().findIndex(ve=>ve.getZIndex()===tg),X=(he=W.getArray()[Y])==null?void 0:he.get("id");let ue;z&&(m(z)?ue=T(z):(ue=xT.createOlLayer(z,V),g(z.id,ue))),Y>=0?ue?(ue.setZIndex(tg),W.setAt(Y,ue)):W.removeAt(Y):ue&&(ue.setZIndex(tg),P.addLayer(ue)),X!==(z==null?void 0:z.id)&&B0.restoreStyle(!0)}return{addLayer:t,findLayer:e,removeLayer:n,removeFromCache:a,reorderLayers:o,setLayerOpacity:s,setLayerTime:h,getLayerFromCache:T,setBgLayer:I,applyOnBgLayer:M}}class p6{constructor(e){Ti(this,"previousLayers");Ti(this,"previousVectorSources");const n=li(),o=os(),s=Os(),h=Ic(),a=U0(),{appliedStyle:m}=cn(o);Tn(()=>n.layers,g=>{const b={layers:this.previousLayers},T={layers:g},M=s.getRemovedLayers(T,b),I=s.getAddedLayers(T,b),P=s.getMutatedLayers(T,b);M.forEach(z=>a.removeLayer(e,z.id)),I.forEach(z=>{a.addLayer(e,z.layer),a.setLayerTime(e,z.layer)}),P.forEach(z=>{a.setLayerOpacity(e,z.id,z.opacity),a.setLayerTime(e,z)}),T.layers&&a.reorderLayers(e,T.layers),this.previousLayers=g}),Tn(()=>n.bgLayer,g=>g!==void 0&&a.setBgLayer(e,g,o.bgVectorSources)),la(()=>{o.isExpertStyleActive||(m.value=h.applyDefaultStyle(n.bgLayer,o.bgVectorBaseStyles,o.bgStyle))}),Tn(m,g=>{o.bgStyle===null&&!o.isExpertStyleActive?h.unregisterStyle(o.styleSerial,o.registerUrls).then(o.styleSerial=null):h.registerStyle(g,o.styleSerial,o.registerUrls).then(b=>{var M;o.styleSerial=b;const T=(M=n==null?void 0:n.bgLayer)==null?void 0:M.id;(n==null?void 0:n.bgLayer)&&T!==void 0&&b!==void 0&&(a.applyOnBgLayer(e,I=>{I.set("xyz_custom",h.getDefaultMapBoxStyleXYZ(b))}),a.setBgLayer(e,n==null?void 0:n.bgLayer,o.bgVectorSources))}),a.applyOnBgLayer(e,b=>h.applyConsolidatedStyle(b,g))}),Tn(()=>o.bgVectorSources,g=>{var b;for(const T of g.keys())(!this.previousVectorSources||this.previousVectorSources.get(T)!==g.get(T))&&(a.removeFromCache(T),T===((b=n==null?void 0:n.bgLayer)==null?void 0:b.id)&&a.setBgLayer(e,n==null?void 0:n.bgLayer,g));this.previousVectorSources=g})}}const d6={0:8,1:9,2:9,3:10,4:11,5:12,6:13,7:14,8:16,9:17,10:18,11:19,12:20,13:21};class m6{bootstrap(){this.restore(),this.persist()}persistZoom(){const e=Os().getOlMap().getView(),n=()=>{const o=e.getZoom();Or.setValue(iT,o?Math.ceil(o):null)};n(),Ex.listen(e,"change:resolution",JS(n,300))}persistXY(){const e=Os().getOlMap().getView(),n=()=>{const o=e.getCenter();Or.setValue(oT,o?Math.round(o[0]):null),Or.setValue(aT,o?Math.round(o[1]):null)};n(),Ex.listen(e,RO.default.PROPERTYCHANGE,JS(n,300))}persist(){this.persistXY(),this.persistZoom()}restore(){const e=Os().getOlMap().getView(),n=Or.getValue(iT,$h),o=Or.getInitialVersion(),s=Or.getValue(oT,$h),h=Or.getValue(aT,$h),a=Or.getValue(zz),m=Mi.getTransform(XR,Dp);let g,b;n!==void 0?b=o===3?Number(n):d6[n]:b=8,s!=null&&h!=null?o===3&&a!=null?g=Mi.transform([s,h],a,Dp):g=o===3?[s,h]:m([h,s],void 0,2):g=Mi.transform([6,49.7],Z2,Dp),e.setCenter(g),e.setZoom(b)}}const y6=new m6,g6={key:0,class:"absolute bottom-0 z-10 text-[0.8em] px-[4px] text-[#6b818f] bg-[#ffffffb3]"},v6=ur(or({__name:"attribution-control",setup(t){const e=li(),n=vr("");return la(()=>{var o,s;n.value=((s=(o=e.bgLayer)==null?void 0:o.metadata)==null?void 0:s.attribution)||""}),(o,s)=>{const h=p_("dompurify-html");return n.value?Vm((Ve(),nt("div",g6,null,512)),[[h,n.value]]):Ke("v-if",!0)}}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/map-controls/attribution-control.vue"]]);function Jp(t,e){const n=new t(e),o=Os(),s=gh("olMap");return ua(()=>{s.addControl(n),s.changed()}),au(()=>{const h=o.getOlMap();h.removeControl(n),h.changed()}),{control:n}}const _6=["title"],x6=ur(or({__name:"location-control",props:{className:{type:String,required:!1,default:"location-button"},label:{type:String,required:!1,default:"\uE800"},tipLabel:{type:String,required:!1,default:"Location"}},setup(t){const e=t,{t:n}=En(),o=vr(null);function s(){}return ua(()=>Jp(Sx.default,{...e,target:o})),(h,a)=>(Ve(),nt("div",{ref_key:"controlElement",ref:o,class:Pr(`tracker-off ${e.className} ${ae(um.CLASS_UNSELECTABLE)} ${ae(um.CLASS_CONTROL)}`)},[Re("button",{title:ae(n)(e.tipLabel),onClick:s},jt(e.label),9,_6)],2))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/map-controls/location-control.vue"]]),b6=["title"],w6=ur(or({__name:"map-3d",props:{className:{type:String,required:!1,default:"map-3d-button"},label:{type:String,required:!1,default:"\uE057"},tipLabel:{type:String,required:!1,default:"3d"}},setup(t){const e=t,n=li(),{t:o}=En(),s=vr(null);ua(()=>Jp(Sx.default,{...e,target:s}));const h=()=>{n.setIs3dActive(!n.is3dActive)};return(a,m)=>(Ve(),nt("div",{ref_key:"controlElement",ref:s,class:Pr(`${e.className} ${ae(um.CLASS_UNSELECTABLE)} ${ae(um.CLASS_CONTROL)} ${ae(n).is3dActive?"active":""}`)},[Re("button",{title:ae(o)(e.tipLabel),onClick:h},jt(e.label),9,b6)],2))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/map-controls/map-3d.vue"]]),E6=ur(or({__name:"fullscreen-control",props:{className:{type:String,required:!1},label:{type:String,required:!1,default:"\uE01C"},labelActive:{type:String,required:!1,default:"\uE02C"}},setup(t){const e=t;return Jp(zO.default,e),(n,o)=>Ke("v-if",!0)}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/map-controls/fullscreen-control.vue"]]),S6=ur(or({__name:"zoom-control",props:{className:{type:String,required:!1},zoomInLabel:{type:String,required:!1,default:"\uE032"},zoomOutLabel:{type:String,required:!1,default:"\uE033"}},setup(t){const e=t;return Jp(FO.default,e),(n,o)=>Ke("v-if",!0)}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/map-controls/zoom-control.vue"]]);class T6 extends BO.default{constructor(n){super(n);Ti(this,"ol3dm")}handleZoomToExtent(){this.ol3dm&&this.ol3dm.luxCameraExtentInRadians&&this.ol3dm.is3dEnabled()||super.handleZoomToExtent()}}const M6=ur(or({__name:"zoom-to-extent-control",props:{className:{type:String,required:!1},label:{type:String,required:!1,default:"\uE01B"},tipLabel:{type:String,required:!1},extent:{type:null,required:!0}},setup(t){return Jp(T6,t),(n,o)=>Ke("v-if",!0)}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/map-controls/zoom-to-extent-control.vue"]]),bT=ur(or({__name:"map-container",props:{v4_standalone:{type:Boolean,required:!1,default:!1}},setup(t){const e=Os(),n=vr(null),o=e.createMap(),s=[425152.9429259216,632446599999133e-8,914349.9239510496,6507914867875754e-9];return ua(()=>{n.value&&(new p6(o),y6.bootstrap(),o.setTarget(n.value),window.olMap=o)}),Mb("olMap",o),(h,a)=>(Ve(),nt("div",{id:"map-container",ref_key:"mapContainer",ref:n,class:"h-full w-full bg-white relative"},[Ft(S6),Ft(M6,{extent:s}),Ft(E6),Ft(v6),t.v4_standalone?(Ve(),en(w6,{key:0})):Ke("v-if",!0),Ft(x6)],512))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/map/map-container.vue"]]),I6="fr",O6=!0,C6=!1,A6=!1,gi=_c("app",()=>{const t=vr(I6),e=vr(O6),n=vr(C6),o=vr(A6),s=vr(),h=vr(),a=vr(!1);function m(V){t.value=V}function g(V){e.value=V,V||(o.value=!1,n.value=!1)}function b(V){n.value=V,V&&(o.value=!1)}function T(V){o.value=V}function M(V){h.value=V}function I(V){s.value=V}function P(){a.value=!0}function z(){a.value=!1}return{lang:t,layersOpen:e,myLayersTabOpen:n,themeGridOpen:o,mapId:s,styleEditorOpen:a,remoteLayersOpen:h,setLang:m,setLayersOpen:g,setMyLayersTabOpen:b,setThemeGridOpen:T,setRemoteLayersOpen:M,setMapId:I,openStyleEditorPanel:P,closeStyleEditorPanel:z}},{}),rg={name:"blank",id:0};function j0(){const t=gi(),{mapId:e}=cn(t),n=wu(),o=li(),s=ka(),h=ar(()=>{var M;if(!e.value){const I=(M=yo().theme)==null?void 0:M.name;if(I)return is().bg_layer_theme_defaults[I]||g()}return g()});function a(M){const I=n.findBgLayerById(M);m(I||null)}function m(M){if(M){if(M.type==="WMTS"||M.type==="BG WMTS")M.type="BG WMTS";else if(M.type==="BG MVT")console.log(`passed through MVT layer ${M.name}`);else throw new Error(`Only WMTS and MVT BG layers are currently implemented (not ${M.type} for ${M.name})`);s.handleExclusionLayers(M),o.setBgLayer(s.initLayer(M))}else o.setBgLayer(null)}function g(){var M;return((M=T().find(I=>I.is_default))==null?void 0:M.id)||rg.id}function b(){return rg.id}function T(){return is().bg_layers}return{setBgLayer:a,setMapBackground:m,getBgLayersFromConfig:T,getNullId:b,getDefaultSelectedId:g,defaultSelectedBgId:h}}const P6=["title"],wT=ur(or({__name:"background-selector-item",props:{bgTitle:{type:String,default:""},bgName:{type:String,default:""}},setup(t){const e=t,{t:n}=En(),o=ar(()=>{const h=n(e.bgTitle),a=e.bgTitle.length>0,m=`${n("Background layer:")} ${n(e.bgName)}`;return`${h}${a?" - ":""}${m}`}),s=ar(()=>`h-full w-full rounded-sm lux-bg-sel-icon
        lux-bg-sel-${e.bgName}
        bg-${e.bgName}_sm
        md:bg-${e.bgName}
        hd:bg-${e.bgName}_sm_hi
        hd_md:bg-${e.bgName}_hi`);return(h,a)=>(Ve(),nt("button",{title:ae(o),class:Pr(ae(s))},null,10,P6))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/background-selector/background-selector-item.vue"]]),k6={key:0,class:"flex flex-row-reverse"},ET=ur(or({__name:"background-selector",props:{isOpen:{type:Boolean,default:!1}},setup(t){const e=t,{t:n}=En(),o=j0(),s=li(),h=yo(),{bgLayer:a,is3dMesh:m}=cn(s),g=vr(e.isOpen),b=vr([]),T=ar(()=>{var z,V;return(V=(z=a.value)==null?void 0:z.id)!=null?V:o.getNullId()}),M=ar(()=>{var z,V;return(V=(z=b.value)==null?void 0:z.find(W=>W.id===T.value))==null?void 0:V.name});Tn(()=>h.bgLayers,z=>{b.value=is().bg_layers.map(V=>Object.assign({id:V.id},z.find(W=>V.id===W.id),{name:V.icon_id}))},{immediate:!0}),Tn(()=>s.bgLayer,(z,V)=>{const W=s.layers;V===void 0&&z===null&&(W==null?void 0:W.length)===0&&(o.setBgLayer(o.defaultSelectedBgId.value),z===null&&by().addNotification(n("Aucune couche n'\xE9tant d\xE9finie pour cette carte, une couche de fond a automatiquement \xE9t\xE9 ajout\xE9e.",{ns:"client"})))});function I(z){o.setBgLayer(z.id),g.value=!1}function P(){g.value=!g.value}return(z,V)=>ae(m)?Ke("v-if",!0):(Ve(),nt("div",k6,[Re("div",{class:Pr(["lux-bg-sel border border-black",g.value===!0?"hidden":"block"])},[Ft(wT,{"aria-expanded":g.value,"bg-title":"Select BG layer","bg-name":ae(M),onClick:P},null,8,["aria-expanded","bg-name"])],2),Re("div",{class:Pr(g.value===!0?"flex flex-col md:flex-row":"hidden")},[(Ve(!0),nt(un,null,Ta(b.value,W=>(Ve(),nt("div",{key:W.id,class:Pr(["lux-bg-sel hover:bg-cyan-600",W.id===ae(T)?"border-red-500 border-2":"border-black border"])},[Ft(wT,{"bg-name":W.name,onClick:Y=>I(W)},null,8,["bg-name","onClick"])],2))),128))],2)]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/background-selector/background-selector.vue"]]),L6=Re("div",{class:"fixed inset-0 bg-gray-900 opacity-40 z-[1050]"},null,-1),D6={class:"bg-white shadow-modal rounded-lg overflow-hidden w-[700px]"},N6={class:"relative flex flex-row justify-center p-4 border-b-[1px]"},R6={class:"text-xl"},z6=[Re("span",{"aria-hidden":"true"},"\xD7",-1)],F6={key:0,class:"p-[15px] border-t-[1px]"},B6={class:"flex flex-row justify-end"},ST=ur(or({__name:"modal-dialog",props:{footer:{type:Boolean,default:!0},maxHeight:{type:Boolean,default:!1},title:String},emits:["close"],setup(t){const{t:e}=En(),n=vr();ua(()=>{n.value.focus()});const o=Ln(!0);function s(){o.value=!1}return(h,a)=>(Ve(),en(tw,{to:"body"},[Ke(" backdrop "),L6,Ke(" modal "),Ft(Ym,{appear:"","enter-active-class":"duration-200 ease-out","enter-from-class":"transform opacity-0 -translate-y-60","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"transform opacity-0 -translate-y-60",onAfterLeave:a[3]||(a[3]=m=>h.$emit("close"))},{default:ap(()=>[ae(o)?(Ve(),nt("div",{key:0,role:"dialog",ref_key:"modal",ref:n,tabindex:"0",onKeydown:a[2]||(a[2]=Es(ws(m=>s(),["stop"]),["esc"])),class:"fixed inset-x-0 inset-y-8 flex items-start justify-center z-[1100] outline-none"},[Re("div",D6,[Ke(" header (title)"),Re("div",N6,[Re("h4",R6,jt(t.title),1),Re("button",{type:"button",class:"absolute right-2 top-1 text-slate-400 text-[24px]","data-dismiss":"modal","aria-label":"Close",onClick:a[0]||(a[0]=m=>s())},z6)]),Ke(" content slot "),Re("div",{class:Pr(["p-[15px] overflow-y-auto",t.maxHeight?"max-h-96":"max-h-full"])},[AA(h.$slots,"content")],2),Ke(" footer (optional)"),t.footer?(Ve(),nt("div",F6,[Re("div",B6,[Re("button",{type:"button",class:"lux-btn","data-dismiss":"modal",onClick:a[1]||(a[1]=m=>s())},jt(ae(e)("Close",{ns:"client"})),1)])])):Ke("v-if",!0)])],544)):Ke("v-if",!0)]),_:3})]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/common/modal-dialog.vue"]]),G0=_c("metadata",()=>{const t=vr();function e(o){t.value=o}function n(){t.value=void 0}return{metadataId:t,setMetadataId:e,clearMetadataId:n}},{}),V6={class:"mb-px",key:"node.id"},U6=["aria-expanded","data-cy"],j6={class:"leading-6"},G6=["aria-expanded","data-cy"],$6={class:"grow"},q6={class:"leading-6"},W6={key:1,class:"flex text-tertiary pr-2"},H6=["data-cy"],Z6={class:"ml-1 hover:underline"},$0=ur(or({__name:"layer-tree-node",props:{node:{type:null,required:!0}},emits:["toggleLayer","toggleParent"],setup(t,{emit:e}){const n=t,{t:o}=En(),{setMetadataId:s}=G0(),h=!!n.node.children,a=n.node.depth===0,m=n.node.depth>=10,g=ar(()=>o(n.node.name,{ns:"client"}));function b(M){e("toggleLayer",M)}function T(M){e("toggleParent",M)}return(M,I)=>{const P=OA("layer-tree-node",!0);return h?(Ve(),nt("div",V6,[Ke("    First level parents"),t.node.depth===1?(Ve(),nt("button",{key:0,class:"group node-1 w-full text-left flex px-2 py-1.5 uppercase bg-tertiary","aria-expanded":t.node.expanded,onClick:I[0]||(I[0]=z=>T(t.node)),"data-cy":`parentLayerLabel-${t.node.id}`},[Re("div",{class:Pr(["grow",t.node.expanded?"text-white":"text-secondary"])},jt(ae(g)),3),Re("div",j6,[Re("div",{class:Pr(["fa fa-sharp fa-solid group-hover:text-white text-primary",t.node.expanded?"fa-caret-up":"fa-caret-down"])},null,2)])],8,U6)):t.node.depth>1&&!m?(Ve(),nt(un,{key:1},[Ke("    Other parents"),Re("button",{class:Pr(["w-full text-left flex px-2 py-1.5 pl-2",t.node.expanded?"text-tertiary":"bg-white text-primary"]),"aria-expanded":t.node.expanded,onClick:I[1]||(I[1]=z=>T(t.node)),"data-cy":`parentLayerLabel-${t.node.id}`},[Re("div",$6,jt(ae(g)),1),Re("div",q6,[Re("div",{class:Pr(["fa-sharp fa-solid",t.node.expanded?"fa-minus":"fa-plus"])},null,2)])],10,G6)],2112)):Ke("v-if",!0),Ke("    Children"),m?Ke("v-if",!0):(Ve(),nt("div",{key:2,class:Pr(["bg-secondary",[{"pl-2":t.node.depth>1},{"lux-collapse":!a},{expanded:!a&&t.node.expanded}]])},[(Ve(!0),nt(un,null,Ta(t.node.children,z=>(Ve(),en(P,{key:z.id,node:z,onToggleParent:I[2]||(I[2]=V=>T(V)),onToggleLayer:I[3]||(I[3]=V=>b(V))},null,8,["node"]))),128))],2))])):(Ve(),nt("div",W6,[Re("button",{class:"self-start before:text-[.85rem] before:transform before:translate-y-[.1rem] before:inline-block before:content-['\\f129'] fa-solid fa-fw fa-fh fa-info",onClick:I[4]||(I[4]=z=>ae(s)(t.node.id))}),Re("button",{class:Pr(["w-full text-left",{"font-bold":t.node.checked}]),onClick:I[5]||(I[5]=z=>b(t.node)),"data-cy":`layerLabel-${t.node.id}`},[Re("i",{class:Pr(["fa-solid",t.node.checked?"fa-check-square":"fa-square"])},null,2),Re("span",Z6,jt(ae(g)),1)],10,H6)]))}}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-tree/layer-tree-node.vue"]]);class X6{toggleNode(e,n,o){var s;return(n==null?void 0:n.id)===e?{...n,[o]:!n[o]}:{...n,children:(s=n.children)==null?void 0:s.map(h=>this.toggleNode(e,h,o))}}updateLayers(e,n){const{id:o}=e;if(e.children)return{...e,children:e.children.map(s=>this.updateLayers(s,n))};{const s=!!(n!=null&&n.find(h=>h.id===o));return{...e,checked:s}}}}const Wh=new X6;var La=(t=>(t.WMS="WMS",t.WMTS="WMTS",t))(La||{});class q0{constructor(e,n=0,o=!1){this.message=e,this.httpStatus=n,this.isCrossOriginRelated=o}}let K6=0;function Y6(){return K6++}function J6(t,e,n){return new Promise((o,s)=>{const h=Y6(),a={requestId:h,taskName:t,params:n};e===null?window.dispatchEvent(new CustomEvent("ogc-client.request",{detail:a})):e.postMessage(a);const m=({detail:g,data:b})=>{const T=g||b;T.requestId===h&&(e===null?window.removeEventListener("message",m):e.removeEventListener("message",m),"error"in T?s(T.error):o(T.response))};e===null?window.addEventListener("ogc-client.response",m):e.addEventListener("message",m)})}function W0(t,e,n){const o=typeof WorkerGlobalScope<"u",s=async({detail:h,data:a})=>{const m=h||a;if(m.taskName===t){let g,b;try{g=await n(m.params)}catch(M){b=M}const T={taskName:t,requestId:m.requestId,...g&&{response:g},...b&&{error:b}};o?e.postMessage(T):e.dispatchEvent(new CustomEvent("ogc-client.response",{detail:T}))}};o?e.addEventListener("message",s):e.addEventListener("ogc-client.request",s)}let H0;function Q6(){return H0||(H0=new Worker(URL.createObjectURL(new Blob([`function t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function r(t){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=t.apply(r,n);function c(t){e(a,o,i,c,u,"next",t)}function u(t){e(a,o,i,c,u,"throw",t)}c(void 0)}))}}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var o={exports:{}};!function(t){var e=function(t){var e,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(t,e,r){var n=h;return function(o,i){if(n===v)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw i;return G()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var u=l(t,e,r);if("normal"===u.type){if(n=r.done?d:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h="suspendedStart",p="suspendedYield",v="executing",d="completed",y={};function m(){}function g(){}function b(){}var S={};S[a]=function(){return this};var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&o.call(w,a)&&(S=w);var O=b.prototype=m.prototype=Object.create(S);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(i,a,c,u){var s=l(t[i],t,a);if("throw"!==s.type){var f=s.arg,h=f.value;return h&&"object"===n(h)&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(h).then((function(t){f.value=t,c(f)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}}function k(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=l(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function C(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}return{next:G}}function G(){return{value:e,done:!0}}return g.prototype=O.constructor=b,b.constructor=g,g.displayName=s(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},x(P.prototype),P.prototype[c]=function(){return this},t.AsyncIterator=P,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new P(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),s(O,u,"Generator"),O[a]=function(){return this},O.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=C,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}(o);var i=o.exports;function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(t,e,n){var o="undefined"!=typeof WorkerGlobalScope,a=function(){var a=r(i.mark((function r(a){var u,s,f,l,h,p;return i.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u=a.detail,s=a.data,(f=u||s).taskName!==t){r.next=14;break}return r.prev=3,r.next=6,n(f.params);case 6:l=r.sent,r.next=12;break;case 9:r.prev=9,r.t0=r.catch(3),h=r.t0;case 12:p=c(c({taskName:t,requestId:f.requestId},l&&{response:l}),h&&{error:h}),o?e.postMessage(p):e.dispatchEvent(new CustomEvent("ogc-client.response",{detail:p}));case 14:case"end":return r.stop()}}),r,null,[[3,9]])})));return function(t){return a.apply(this,arguments)}}();o?e.addEventListener("message",a):e.addEventListener("ogc-client.request",a)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function v(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function m(t,e,r){return m=y()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&h(o,r.prototype),o},m.apply(null,arguments)}function g(t){var e="function"==typeof Map?new Map:void 0;return g=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return m(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,t)},g(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e,r){return e&&b(t.prototype,e),r&&b(t,r),t}var E=function(){function t(e){l(this,t),this.chars=f(e),this.charCount=this.chars.length,this.charIndex=0,this.charsToBytes=new Array(this.charCount),this.multiByteMode=!1,this.string=e;var r=this.chars,n=this.charCount,o=this.charsToBytes;if(n===e.length)for(var i=0;i<n;++i)o[i]=i;else{for(var a=0,c=0;c<n;++c)o[c]=a,a+=r[c].length;this.multiByteMode=!0}}return S(t,[{key:"isEnd",get:function(){return this.charIndex>=this.charCount}},{key:"_charLength",value:function(t){var e=t.length;return e<2||!this.multiByteMode?e:t.replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,"_").length}},{key:"advance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.charIndex=Math.min(this.charCount,this.charIndex+t)}},{key:"consume",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.peek(t);return this.advance(t),e}},{key:"consumeMatch",value:function(t){if(!t.sticky)throw new Error('\`regex\` must have a sticky flag ("y")');t.lastIndex=this.charsToBytes[this.charIndex];var e=t.exec(this.string);if(null===e)return"";var r=e[0];return this.advance(this._charLength(r)),r}},{key:"consumeMatchFn",value:function(t){for(var e=this.charIndex;!this.isEnd&&t(this.peek());)this.advance();return this.charIndex>e?this.string.slice(this.charsToBytes[e],this.charsToBytes[this.charIndex]):""}},{key:"consumeString",value:function(t){if(this.consumeStringFast(t))return t;if(!this.multiByteMode)return"";var e=t.length,r=this._charLength(t);return r!==e&&t===this.peek(r)?(this.advance(r),t):""}},{key:"consumeStringFast",value:function(t){if(this.peek()===t[0]){var e=t.length;if(1===e)return this.advance(),t;if(this.peek(e)===t)return this.advance(e),t}return""}},{key:"consumeUntilMatch",value:function(t){if(!t.global)throw new Error('\`regex\` must have a global flag ("g")');var e=this.charsToBytes[this.charIndex];t.lastIndex=e;var r=t.exec(this.string);if(null===r||r.index===e)return"";var n=this.string.slice(e,r.index);return this.advance(this._charLength(n)),n}},{key:"consumeUntilString",value:function(t){var e=this.charIndex,r=this.charsToBytes,n=this.string,o=r[e],i=n.indexOf(t,o);if(i<=0)return"";var a=n.slice(o,i);return this.advance(this._charLength(a)),a}},{key:"peek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.charIndex>=this.charCount)return"";if(1===t)return this.chars[this.charIndex];var e=this.charsToBytes,r=this.charIndex;return this.string.slice(e[r],e[r+t])}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.charIndex=t>=0?Math.min(this.charCount,t):Math.max(0,this.charIndex+t)}}]),t}(),w=E,O={},x=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));function P(t){if(k(t))return!0;var e=T(t);return 45===e||46===e||e>=48&&e<=57||183===e||e>=768&&e<=879||e>=8255&&e<=8256}function k(t){var e=T(t);return 58===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function R(t){var e=T(t);return 9===e||10===e||13===e||e>=32&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111}function T(t){return t.codePointAt(0)||-1}O.predefinedEntities=x,O.isNameChar=P,O.isNameStartChar=k,O.isNotXmlChar=function(t){return!R(t)},O.isReferenceChar=function(t){return"#"===t||P(t)},O.isWhitespace=function(t){var e=T(t);return 32===e||9===e||10===e||13===e},O.isXmlChar=R;var j=function(){function t(){l(this,t),this.parent=null}return S(t,[{key:"document",get:function(){return this.parent?this.parent.document:null}},{key:"isRootNode",get:function(){return!!this.parent&&this.parent===this.document}},{key:"preserveWhitespace",get:function(){return Boolean(this.parent&&this.parent.preserveWhitespace)}},{key:"type",get:function(){return""}},{key:"toJSON",value:function(){var t={type:this.type};return this.isRootNode&&(t.isRootNode=!0),this.preserveWhitespace&&(t.preserveWhitespace=!0),t}}]),t}();j.TYPE_CDATA="cdata",j.TYPE_COMMENT="comment",j.TYPE_DOCUMENT="document",j.TYPE_ELEMENT="element",j.TYPE_PROCESSING_INSTRUCTION="pi",j.TYPE_TEXT="text";var C=j;function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var N=C,A=function(t){p(r,N);var e=G(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l(this,r),(t=e.call(this)).text=n,t}return S(r,[{key:"type",get:function(){return N.TYPE_TEXT}},{key:"toJSON",value:function(){return Object.assign(N.prototype.toJSON.call(this),{text:this.text})}}]),r}(),F=A;function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var L=C,M=F,B=function(t){p(r,M);var e=I(r);function r(){return l(this,r),e.apply(this,arguments)}return S(r,[{key:"type",get:function(){return L.TYPE_CDATA}}]),r}(),_=B;function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var D=C,W=function(t){p(r,D);var e=U(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l(this,r),(t=e.call(this)).content=n,t}return S(r,[{key:"type",get:function(){return D.TYPE_COMMENT}},{key:"toJSON",value:function(){return Object.assign(D.prototype.toJSON.call(this),{content:this.content})}}]),r}(),X=W;function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var q=C,J=function(t){p(r,q);var e=Y(r);function r(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.create(null),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return l(this,r),(n=e.call(this)).name=t,n.attributes=o,n.children=i,n}return S(r,[{key:"isEmpty",get:function(){return 0===this.children.length}},{key:"preserveWhitespace",get:function(){for(var t=this;t instanceof r;){if("xml:space"in t.attributes)return"preserve"===t.attributes["xml:space"];t=t.parent}return!1}},{key:"text",get:function(){return this.children.map((function(t){return"text"in t?t.text:""})).join("")}},{key:"type",get:function(){return q.TYPE_ELEMENT}},{key:"toJSON",value:function(){return Object.assign(q.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map((function(t){return t.toJSON()}))})}}]),r}(),V=J;function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var K=V,z=C,H=function(t){p(r,z);var e=$(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l(this,r),(t=e.call(this)).children=n,t}return S(r,[{key:"document",get:function(){return this}},{key:"root",get:function(){return this.children.find((function(t){return t instanceof K}))||null}},{key:"text",get:function(){return this.children.map((function(t){return"text"in t?t.text:""})).join("")}},{key:"type",get:function(){return z.TYPE_DOCUMENT}},{key:"toJSON",value:function(){return Object.assign(z.prototype.toJSON.call(this),{children:this.children.map((function(t){return t.toJSON()}))})}}]),r}(),Q=H;function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var tt=C,et=function(t){p(r,tt);var e=Z(r);function r(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return l(this,r),(n=e.call(this)).name=t,n.content=o,n}return S(r,[{key:"type",get:function(){return tt.TYPE_PROCESSING_INSTRUCTION}},{key:"toJSON",value:function(){return Object.assign(tt.prototype.toJSON.call(this),{name:this.name,content:this.content})}}]),r}(),rt=et;function nt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ot(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ot(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var it=w,at=O,ct=_,ut=X,st=Q,ft=V,lt=rt,ht=F,pt=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(l(this,t),this.document=new st,this.currentNode=this.document,this.options=r,this.scanner=new it(vt(e)),this.consumeProlog(),this.consumeElement()||this.error("Root element is missing or invalid");this.consumeMisc(););this.scanner.isEnd||this.error("Extra content at the end of the document")}return S(t,[{key:"addNode",value:function(t){t.parent=this.currentNode,this.currentNode.children.push(t)}},{key:"addText",value:function(t){var e=this.currentNode.children;if(e.length>0){var r=e[e.length-1];if(r instanceof ht)return void(r.text+=t)}this.addNode(new ht(t))}},{key:"consumeAttributeValue",value:function(){var t,e=this.scanner,r=e.peek();if('"'!==r&&"'"!==r)return!1;e.advance();var n=!1,o="",i='"'===r?new RegExp('[^"&<]+',"y"):new RegExp("[^'&<]+","y");t:for(;!e.isEnd;){switch((t=e.consumeMatch(i))&&(this.validateChars(t),o+=t.replace(/[\\t\\r\\n]/g," ")),e.peek()){case r:n=!0;break t;case"&":o+=this.consumeReference();continue;case"<":this.error("Unescaped \`<\` is not allowed in an attribute value");break;case"":this.error("Unclosed attribute")}}return n||this.error("Unclosed attribute"),e.advance(),o}},{key:"consumeCdataSection",value:function(){var t=this.scanner;if(!t.consumeStringFast("<![CDATA["))return!1;var e=t.consumeUntilString("]]>");return this.validateChars(e),t.consumeStringFast("]]>")||this.error("Unclosed CDATA section"),this.options.preserveCdata?this.addNode(new ct(e)):this.addText(e),!0}},{key:"consumeCharData",value:function(){var t=this.scanner,e=t.consumeUntilMatch(/<|&|]]>/g);return!!e&&(this.validateChars(e),"]"===t.peek()&&"]]>"===t.peek(3)&&this.error("Element content may not contain the CDATA section close delimiter \`]]>\`"),this.addText(e),!0)}},{key:"consumeComment",value:function(){var t=this.scanner;if(!t.consumeStringFast("\\x3c!--"))return!1;var e=t.consumeUntilString("--");return this.validateChars(e),t.consumeStringFast("--\\x3e")||("--"===t.peek(2)?this.error("The string \`--\` isn't allowed inside a comment"):this.error("Unclosed comment")),this.options.preserveComments&&this.addNode(new ut(e.trim())),!0}},{key:"consumeContentReference",value:function(){var t=this.consumeReference();return!!t&&(this.addText(t),!0)}},{key:"consumeDoctypeDeclaration",value:function(){var t=this.scanner;return!(!t.consumeStringFast("<!DOCTYPE")||!this.consumeWhitespace())&&(t.consumeMatch(new RegExp("[^[>]+","y")),t.consumeMatch(new RegExp("\\\\[[\\\\s\\\\S]+?\\\\][\\\\x20\\\\t\\\\r\\\\n]*>","y"))||t.consumeStringFast(">")||this.error("Unclosed doctype declaration"),!0)}},{key:"consumeElement",value:function(){var t=this.scanner,e=t.charIndex;if("<"!==t.peek())return!1;t.advance();var r=this.consumeName();if(!r)return t.reset(e),!1;for(var n=Object.create(null);this.consumeWhitespace();){var o=this.consumeName();if(o){var i=this.consumeEqual()&&this.consumeAttributeValue();!1===i&&this.error("Attribute value expected"),o in n&&this.error("Duplicate attribute: ".concat(o)),"xml:space"===o&&"default"!==i&&"preserve"!==i&&this.error('Value of the \`xml:space\` attribute must be "default" or "preserve"'),n[o]=i}}if(this.options.sortAttributes){for(var a=Object.keys(n).sort(),c=Object.create(null),u=0;u<a.length;++u){var s=a[u];c[s]=n[s]}n=c}var f=Boolean(t.consumeStringFast("/>")),l=new ft(r,n);if(l.parent=this.currentNode,!f){for(t.consumeStringFast(">")||this.error("Unclosed start tag for element \`".concat(r,"\`")),this.currentNode=l,this.consumeCharData();this.consumeElement()||this.consumeContentReference()||this.consumeCdataSection()||this.consumeProcessingInstruction()||this.consumeComment();)this.consumeCharData();var h,p=t.charIndex;t.consumeStringFast("</")&&(h=this.consumeName())&&h===r||(t.reset(p),this.error("Missing end tag for element ".concat(r))),this.consumeWhitespace(),t.consumeStringFast(">")||this.error("Unclosed end tag for element ".concat(r)),this.currentNode=l.parent}return this.addNode(l),!0}},{key:"consumeEqual",value:function(){return this.consumeWhitespace(),!!this.scanner.consumeStringFast("=")&&(this.consumeWhitespace(),!0)}},{key:"consumeMisc",value:function(){return this.consumeComment()||this.consumeProcessingInstruction()||this.consumeWhitespace()}},{key:"consumeName",value:function(){return at.isNameStartChar(this.scanner.peek())?this.scanner.consumeMatchFn(at.isNameChar):""}},{key:"consumeProcessingInstruction",value:function(){var t=this.scanner,e=t.charIndex;if(!t.consumeStringFast("<?"))return!1;var r=this.consumeName();if(r?"xml"===r.toLowerCase()&&(t.reset(e),this.error("XML declaration isn't allowed here")):this.error("Invalid processing instruction"),!this.consumeWhitespace()){if(t.consumeStringFast("?>"))return this.addNode(new lt(r)),!0;this.error("Whitespace is required after a processing instruction name")}var n=t.consumeUntilString("?>");return this.validateChars(n),t.consumeStringFast("?>")||this.error("Unterminated processing instruction"),this.addNode(new lt(r,n)),!0}},{key:"consumeProlog",value:function(){var t=this.scanner,e=t.charIndex;for(this.consumeXmlDeclaration();this.consumeMisc(););if(this.consumeDoctypeDeclaration())for(;this.consumeMisc(););return e<t.charIndex}},{key:"consumeReference",value:function(){var t=this.scanner;if("&"!==t.peek())return!1;t.advance();var e,r=t.consumeMatchFn(at.isReferenceChar);if(";"!==t.consume()&&this.error("Unterminated reference (a reference must end with \`;\`)"),"#"===r[0]){var o="x"===r[1]?parseInt(r.slice(2),16):parseInt(r.slice(1),10);isNaN(o)&&this.error("Invalid character reference"),e=String.fromCodePoint(o),at.isXmlChar(e)||this.error("Character reference resolves to an invalid character")}else if(void 0===(e=at.predefinedEntities[r])){var i=this.options,a=i.ignoreUndefinedEntities,c=i.resolveUndefinedEntity,u="&".concat(r,";");if(c){var s=c(u);if(null!=s){var f=n(s);if("string"!==f)throw new TypeError("\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ".concat(f));return s}}if(a)return u;t.reset(-u.length),this.error("Named entity isn't defined: ".concat(u))}return e}},{key:"consumeSystemLiteral",value:function(){var t=this.scanner,e=t.consumeStringFast('"')||t.consumeStringFast("'");if(!e)return!1;var r=t.consumeUntilString(e);return this.validateChars(r),t.consumeStringFast(e)||this.error("Missing end quote"),r}},{key:"consumeWhitespace",value:function(){return Boolean(this.scanner.consumeMatchFn(at.isWhitespace))}},{key:"consumeXmlDeclaration",value:function(){var t=this.scanner;if(!t.consumeStringFast("<?xml"))return!1;this.consumeWhitespace()||this.error("Invalid XML declaration");var e=Boolean(t.consumeStringFast("version"))&&this.consumeEqual()&&this.consumeSystemLiteral();if(!1===e?this.error("XML version is missing or invalid"):/^1\\.[0-9]+$/.test(e)||this.error("Invalid character in version number"),this.consumeWhitespace()){Boolean(t.consumeStringFast("encoding"))&&this.consumeEqual()&&this.consumeSystemLiteral()&&this.consumeWhitespace();var r=Boolean(t.consumeStringFast("standalone"))&&this.consumeEqual()&&this.consumeSystemLiteral();r&&("yes"!==r&&"no"!==r&&this.error('Only "yes" and "no" are permitted as values of \`standalone\`'),this.consumeWhitespace())}return t.consumeStringFast("?>")||this.error("Invalid or unclosed XML declaration"),!0}},{key:"error",value:function(t){for(var e=this.scanner,r=e.charIndex,n=e.string,o=1,i="",a=1,c=0;c<r;++c){var u=n[c];"\\n"===u?(o=1,i="",a+=1):(o+=1,i+=u)}var s=n.indexOf("\\n",r),f=0;(i+=-1===s?n.slice(r):n.slice(r,s)).length>50&&(o<40?i=i.slice(0,50):(f=o-20,i=i.slice(f,o+30)));var l=new Error("".concat(t," (line ").concat(a,", column ").concat(o,")\\n")+"  ".concat(i,"\\n")+" ".repeat(o-f+1)+"^\\n");throw Object.assign(l,{column:o,excerpt:i,line:a,pos:r}),l}},{key:"validateChars",value:function(t){var e,r=0,n=nt(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;at.isNotXmlChar(o)&&(this.scanner.reset(-(f(t).length-r)),this.error("Invalid character")),r+=1}}catch(t){n.e(t)}finally{n.f()}}}]),t}();function vt(t){return"\\ufeff"===t[0]&&(t=t.slice(1)),t.replace(/\\r\\n?/g,"\\n")}var dt=pt,yt=_,mt=X,gt=Q,bt=V,St=C,Et=rt,wt=F;function Ot(t,e){return new dt(t,e).document}Ot.XmlCdata=yt,Ot.XmlComment=mt,Ot.XmlDocument=gt,Ot.XmlElement=bt,Ot.XmlNode=St,Ot.XmlProcessingInstruction=Et,Ot.XmlText=wt;var xt=Ot;function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var kt=function(t){p(r,g(Error));var e=Pt(r);function r(t){return l(this,r),e.call(this,t)}return r}();function Rt(t){return t.children[0]}function Tt(t){var e=t.indexOf(":");return e>-1?t.substr(e+1):t}function jt(t){return t.name||""}function Ct(t,e,r){var n=Tt(e);return t&&Array.isArray(t.children)?t.children.reduce((function t(e,o){return Tt(jt(o))===n&&e.push(o),r&&Array.isArray(o.children)?[].concat(f(e),f(o.children.reduce(t,[]))):e}),[]):[]}function Gt(t,e,r){return Ct(t,e,r)[0]||null}function Nt(t){return t&&Array.isArray(t.children)?f(t.children.filter((function(t){return"XmlElement"===t.constructor.name}))):[]}function At(t){var e=t&&Array.isArray(t.children)?t.children.find((function(t){return"text"===t.type})):null;return e?e.text:""}function Ft(t,e){return t&&t.attributes[e]||""}var It=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l(this,t),this.message=e,this.httpStatus=r,this.isCrossOriginRelated=n};function Lt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Bt=["utf-8","utf-16","iso-8859-1"];function _t(t,e){var r,n=e?function(t){var e=/charset=([^;]+)/.exec(t);return e?e[1]:null}(e):null,o=Lt(n?[n].concat(Bt):Bt);try{for(o.s();!(r=o.n()).done;){var i=r.value;try{return new TextDecoder(i,{fatal:!0}).decode(t)}catch(t){}}}catch(t){o.e(t)}finally{o.f()}return console.warn("XML document encoding could not be determined, falling back to ".concat("utf-8",".")),new TextDecoder("utf-8").decode(t)}function Ut(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Dt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Wt=new Map;function Xt(t){return function(t){if(Wt.has(t))return Wt.get(t);var e=fetch(t);return e.finally((function(){return Wt.delete(t)})),Wt.set(t,e),e}(t).catch((function(){return fetch(t,{method:"HEAD",mode:"no-cors"}).catch((function(t){throw new It("Fetching the document failed either due to network errors or unreachable host, error is: ".concat(t.message),0,!1)})).then((function(){throw new It("The document could not be fetched due to CORS limitations",0,!0)}))})).then(function(){var t=r(i.mark((function t(e){var r,n,o;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ok){t.next=5;break}return t.next=3,e.text();case 3:throw r=t.sent,new It("Received an error with code ".concat(e.status,": ").concat(r),e.status,!1);case 5:return t.next=7,e.arrayBuffer();case 7:return n=t.sent,o=e.headers.get("Content-Type"),t.abrupt("return",_t(n,o));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(t){return function(t){var e=null;try{e=xt(t)}catch(t){throw new kt(t.message)}return e}(t)}))}function Yt(t,e){var r=t.match(/(https?%3A%2F%2F[^/]+)$/);if(r){var n=r[1],o=Yt(decodeURIComponent(n),e);return t.replace(n,encodeURIComponent(o))}var i,a=new URL(t),c=Object.keys(e),u=c.map((function(t){return t.toLowerCase()})),s=[],f=Ut(a.searchParams.keys());try{for(f.s();!(i=f.n()).done;){var l=i.value;u.indexOf(l.toLowerCase())>-1&&s.push(l)}}catch(t){f.e(t)}finally{f.f()}return s.map((function(t){return a.searchParams.delete(t)})),c.forEach((function(t){return a.searchParams.set(t,!0===e[t]?"":e[t])})),a.toString()}var qt=["EPSG:4046","EPSG:4075","EPSG:4120","EPSG:4122","EPSG:4124","EPSG:4126","EPSG:4149","EPSG:4151","EPSG:4153","EPSG:4155","EPSG:4157","EPSG:4159","EPSG:4161","EPSG:4163","EPSG:4165","EPSG:4167","EPSG:4169","EPSG:4171","EPSG:4173","EPSG:4175","EPSG:4178","EPSG:4180","EPSG:4182","EPSG:4184","EPSG:4188","EPSG:4190","EPSG:4191","EPSG:4196","EPSG:4198","EPSG:4202","EPSG:4210","EPSG:4211","EPSG:4214","EPSG:4226","EPSG:4229","EPSG:4231","EPSG:4233","EPSG:4236","EPSG:4238","EPSG:4240","EPSG:4242","EPSG:4244","EPSG:4246","EPSG:4248","EPSG:4250","EPSG:4252","EPSG:4255","EPSG:4258","EPSG:4261","EPSG:4264","EPSG:4267","EPSG:4270","EPSG:4273","EPSG:4276","EPSG:4279","EPSG:4281","EPSG:4284","EPSG:4286","EPSG:4288","EPSG:4292","EPSG:4295","EPSG:4297","EPSG:4299","EPSG:4302","EPSG:4324","EPSG:4326"];function Jt(t){return qt.indexOf(Vt(t))>-1}function Vt(t){if(/^urn:(?:x-)?ogc:def:crs:epsg:/.test(t.toLowerCase())){var e=/([0-9]+)$/.exec(t)[1];return"EPSG:".concat(e)}return t}function $t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Kt(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?$t(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zt(t){return Rt(t).attributes.version}function Ht(t){var e=zt(t);return Ct(Gt(Rt(t),"Capability"),"Layer").map((function(t){return Qt(t,e)}))}function Qt(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a="1.3.0"===r?"CRS":"SRS",c=Ct(e,a).map(At),u=c.length>0?c:n,s=Ct(e,"Style").map(Zt),f=s.length>0?s:o;function l(t){return(Jt(Ft(t,a))&&"1.3.0"===r?["miny","minx","maxy","maxx"]:["minx","miny","maxx","maxy"]).map((function(e){return Ft(t,e)}))}var h=Gt(e,"Attribution"),p=null!==h?te(h):i,v=Ct(e,"Layer").map((function(t){return Qt(t,r,u,f,p)}));return Kt({name:At(Gt(e,"Name")),title:At(Gt(e,"Title")),abstract:At(Gt(e,"Abstract")),availableCrs:u,styles:f,attribution:p,boundingBoxes:Ct(e,"BoundingBox").reduce((function(e,r){return Kt(Kt({},e),{},t({},Ft(r,a),l(r)))}),{})},v.length&&{children:v})}function Zt(t){var e=Ft(Gt(Gt(t,"LegendURL"),"OnlineResource"),"xlink:href");return Kt({name:At(Gt(t,"Name")),title:At(Gt(t,"Title"))},e&&{legendUrl:e})}function te(t){var e=Ft(Gt(Gt(t,"LogoURL"),"OnlineResource"),"xlink:href"),r=Ft(Gt(t,"OnlineResource"),"xlink:href"),n=At(Gt(t,"Title"));return Kt(Kt(Kt({},n&&{title:n}),r&&{url:r}),e&&{logoUrl:e})}function ee(t){return Rt(t).attributes.version}function re(t){var e;if(ee(t).startsWith("1.0")){var r=Gt(Gt(Gt(Rt(t),"Capability"),"Request"),"GetFeature");e=Nt(Gt(r,"ResultFormat")).map(jt)}else{var n=Ct(Gt(Rt(t),"OperationsMetadata"),"Operation").find((function(t){return"GetFeature"===Ft(t,"name")})),o=Ct(n,"Parameter").find((function(t){return"outputFormat"===Ft(t,"name")}));e=Ct(o,"Value",!0).map(At)}return e}function ne(t){var e=ee(t),r=re(t);return Ct(Gt(Rt(t),"FeatureTypeList"),"FeatureType").map((function(t){return function(t,e,r){var n=e.startsWith("2.")?"CRS":"SRS",o=e.startsWith("1.0")?"SRS":"Default".concat(n);function i(){var e=Gt(t,"LatLongBoundingBox");return["minx","miny","maxx","maxy"].map((function(t){return Ft(e,t)})).map(parseFloat)}function a(){var e=Gt(t,"WGS84BoundingBox");return["LowerCorner","UpperCorner"].map((function(t){return Gt(e,t)})).map((function(t){return At(t).split(" ")})).reduce((function(t,e){return[].concat(f(t),f(e))})).map(parseFloat)}var c=e.startsWith("1.0")?[]:Ct(t,"Other".concat(n)).map(At).map(Vt),u=e.startsWith("1.0")?[]:Ct(Gt(t,"OutputFormats"),"Format").map(At);return{name:At(Gt(t,"Name")),title:At(Gt(t,"Title")),abstract:At(Gt(t,"Abstract")),defaultCrs:Vt(At(Gt(t,o))),otherCrs:c,outputFormats:u.length>0?u:r,latLonBoundingBox:e.startsWith("1.0")?i():a()}}(t,e,r)}))}function oe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?oe(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,r,n){var o,i=Rt(e);if(n.startsWith("2.0"))o=Ct(i,"member").map((function(t){return Nt(t)[0]}));else{var a=Gt(i,"featureMembers");o=a?Nt(a):Ct(i,"featureMember").map((function(t){return Nt(t)[0]}))}var c="1.0.0"===n?"fid":"gml:id";function u(e){return Nt(e).filter((function(t){return Tt(jt(t))in r.properties})).reduce((function(e,n){var o=Tt(jt(n));return ie(ie({},e),{},t({},o,function(t,e){switch(r.properties[t]){case"integer":return parseInt(e);case"float":return parseFloat(e);case"boolean":return"true"===e;default:return e}}(o,At(n))))}),{})}return o.map((function(t){return{id:Ft(t,c),properties:u(t)}}))}function ce(e,r,n,o,i,a,c,u,s,f){var l="2.0.0"===r?"COUNT":"MAXFEATURES",h=t({SERVICE:"WFS",REQUEST:"GetFeature",VERSION:r},"2.0.0"===r?"TYPENAMES":"TYPENAME",n);if(void 0!==o&&(h.OUTPUTFORMAT=o),void 0!==a&&(h.PROPERTYNAME=a.join(",")),c?(h.RESULTTYPE="hits",h[l]="1"):void 0!==i&&(h[l]=i.toString(10)),u&&(h.SRSNAME=u),s){var p=s.join(",");h.BBOX=f?"".concat(p,",").concat(f):p}return Yt(e,h)}u("parseWmsCapabilities",self,(function(t){return Xt(t.url).then((function(t){return{info:(e=t,r=Gt(Rt(e),"Service"),n=Ct(Gt(r,"KeywordList"),"Keyword").map(At).filter((function(t,e,r){return r.indexOf(t)===e})),{title:At(Gt(r,"Title")),name:At(Gt(r,"Name")),abstract:At(Gt(r,"Abstract")),fees:At(Gt(r,"Fees")),constraints:At(Gt(r,"AccessConstraints")),keywords:n}),layers:Ht(t),version:zt(t)};var e,r,n}))})),u("parseWfsCapabilities",self,(function(t){return Xt(t.url).then((function(t){return{info:(e=t,n=ee(e),o=n.startsWith("1.0")?"Service":"ServiceIdentification",i=n.startsWith("1.0")?"Name":"ServiceType",a=Gt(Rt(e),o),r=n.startsWith("1.0")?At(Gt(a,"Keywords")).split(",").map((function(t){return t.trim()})):Ct(Gt(a,"Keywords"),"Keyword").map(At),{title:At(Gt(a,"Title")),name:At(Gt(a,i)),abstract:At(Gt(a,"Abstract")),fees:At(Gt(a,"Fees")),constraints:At(Gt(a,"AccessConstraints")),keywords:r,outputFormats:re(e)}),featureTypes:ne(t),version:ee(t)};var e,r,n,o,i,a}))})),u("queryWfsFeatureTypeDetails",self,(function(t){var e=t.url,r=t.serviceVersion,n=t.featureTypeFull;return Xt(ce(e,r,n.name,void 0,void 0,Object.keys(n.properties))).then((function(t){return{props:(e=ae(t,n,r),e.reduce((function(t,e){var r=function(r){var n=e.properties[r];r in t||(t[r]={uniqueValues:[]});var o=t[r].uniqueValues.find((function(t){return t.value===n}));o?o.count++:t[r].uniqueValues.push({value:n,count:1})};for(var n in e.properties)r(n);return t}),{}))};var e}))}));
`],{type:"application/javascript"})),{type:"module"})),H0}function eF(t){return J6("parseWmsCapabilities",Q6(),{url:t})}const Su="";class tF{constructor(e){this.chars=[...e],this.charCount=this.chars.length,this.charIndex=0,this.charsToBytes=new Array(this.charCount),this.multiByteMode=!1,this.string=e;let{chars:n,charCount:o,charsToBytes:s}=this;if(o===e.length)for(let h=0;h<o;++h)s[h]=h;else{for(let h=0,a=0;a<o;++a)s[a]=h,h+=n[a].length;this.multiByteMode=!0}}get isEnd(){return this.charIndex>=this.charCount}_charLength(e){let{length:n}=e;return n<2||!this.multiByteMode?n:e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length}advance(e=1){this.charIndex=Math.min(this.charCount,this.charIndex+e)}consume(e=1){let n=this.peek(e);return this.advance(e),n}consumeMatch(e){if(!e.sticky)throw new Error('`regex` must have a sticky flag ("y")');e.lastIndex=this.charsToBytes[this.charIndex];let n=e.exec(this.string);if(n===null)return Su;let o=n[0];return this.advance(this._charLength(o)),o}consumeMatchFn(e){let n=this.charIndex;for(;!this.isEnd&&e(this.peek());)this.advance();return this.charIndex>n?this.string.slice(this.charsToBytes[n],this.charsToBytes[this.charIndex]):Su}consumeString(e){if(this.consumeStringFast(e))return e;if(!this.multiByteMode)return Su;let{length:n}=e,o=this._charLength(e);return o!==n&&e===this.peek(o)?(this.advance(o),e):Su}consumeStringFast(e){if(this.peek()===e[0]){let{length:n}=e;if(n===1)return this.advance(),e;if(this.peek(n)===e)return this.advance(n),e}return Su}consumeUntilMatch(e){if(!e.global)throw new Error('`regex` must have a global flag ("g")');let n=this.charsToBytes[this.charIndex];e.lastIndex=n;let o=e.exec(this.string);if(o===null||o.index===n)return Su;let s=this.string.slice(n,o.index);return this.advance(this._charLength(s)),s}consumeUntilString(e){let{charIndex:n,charsToBytes:o,string:s}=this,h=o[n],a=s.indexOf(e,h);if(a<=0)return Su;let m=s.slice(h,a);return this.advance(this._charLength(m)),m}peek(e=1){if(this.charIndex>=this.charCount)return Su;if(e===1)return this.chars[this.charIndex];let{charsToBytes:n,charIndex:o}=this;return this.string.slice(n[o],n[o+e])}reset(e=0){this.charIndex=e>=0?Math.min(this.charCount,e):Math.max(0,this.charIndex+e)}}var rF=tF,Tu={};const nF=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));Tu.predefinedEntities=nF;function TT(t){if(MT(t))return!0;let e=ng(t);return e===45||e===46||e>=48&&e<=57||e===183||e>=768&&e<=879||e>=8255&&e<=8256}Tu.isNameChar=TT;function MT(t){let e=ng(t);return e===58||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}Tu.isNameStartChar=MT;function iF(t){return!IT(t)}Tu.isNotXmlChar=iF;function oF(t){return t==="#"||TT(t)}Tu.isReferenceChar=oF;function aF(t){let e=ng(t);return e===32||e===9||e===10||e===13}Tu.isWhitespace=aF;function IT(t){let e=ng(t);return e===9||e===10||e===13||e>=32&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111}Tu.isXmlChar=IT;function ng(t){return t.codePointAt(0)||-1}class Oc{constructor(){this.parent=null}get document(){return this.parent?this.parent.document:null}get isRootNode(){return this.parent?this.parent===this.document:!1}get preserveWhitespace(){return Boolean(this.parent&&this.parent.preserveWhitespace)}get type(){return""}toJSON(){let e={type:this.type};return this.isRootNode&&(e.isRootNode=!0),this.preserveWhitespace&&(e.preserveWhitespace=!0),e}}Oc.TYPE_CDATA="cdata",Oc.TYPE_COMMENT="comment",Oc.TYPE_DOCUMENT="document",Oc.TYPE_ELEMENT="element",Oc.TYPE_PROCESSING_INSTRUCTION="pi",Oc.TYPE_TEXT="text";var Cc=Oc;const Z0=Cc;class sF extends Z0{constructor(e=""){super(),this.text=e}get type(){return Z0.TYPE_TEXT}toJSON(){return Object.assign(Z0.prototype.toJSON.call(this),{text:this.text})}}var X0=sF;const lF=Cc,uF=X0;class cF extends uF{get type(){return lF.TYPE_CDATA}}var OT=cF;const K0=Cc;class hF extends K0{constructor(e=""){super(),this.content=e}get type(){return K0.TYPE_COMMENT}toJSON(){return Object.assign(K0.prototype.toJSON.call(this),{content:this.content})}}var CT=hF;const Y0=Cc;class J0 extends Y0{constructor(e,n=Object.create(null),o=[]){super(),this.name=e,this.attributes=n,this.children=o}get isEmpty(){return this.children.length===0}get preserveWhitespace(){let e=this;for(;e instanceof J0;){if("xml:space"in e.attributes)return e.attributes["xml:space"]==="preserve";e=e.parent}return!1}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return Y0.TYPE_ELEMENT}toJSON(){return Object.assign(Y0.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(e=>e.toJSON())})}}var Q0=J0;const fF=Q0,e1=Cc;class pF extends e1{constructor(e=[]){super(),this.children=e}get document(){return this}get root(){return this.children.find(e=>e instanceof fF)||null}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return e1.TYPE_DOCUMENT}toJSON(){return Object.assign(e1.prototype.toJSON.call(this),{children:this.children.map(e=>e.toJSON())})}}var AT=pF;const t1=Cc;class dF extends t1{constructor(e,n=""){super(),this.name=e,this.content=n}get type(){return t1.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(t1.prototype.toJSON.call(this),{name:this.name,content:this.content})}}var PT=dF;const mF=rF,Ac=Tu,yF=OT,gF=CT,vF=AT,_F=Q0,kT=PT,LT=X0,r1="";class xF{constructor(e,n={}){for(this.document=new vF,this.currentNode=this.document,this.options=n,this.scanner=new mF(wF(e)),this.consumeProlog(),this.consumeElement()||this.error("Root element is missing or invalid");this.consumeMisc(););this.scanner.isEnd||this.error("Extra content at the end of the document")}addNode(e){e.parent=this.currentNode,this.currentNode.children.push(e)}addText(e){let{children:n}=this.currentNode;if(n.length>0){let o=n[n.length-1];if(o instanceof LT){o.text+=e;return}}this.addNode(new LT(e))}consumeAttributeValue(){let{scanner:e}=this,n=e.peek();if(n!=='"'&&n!=="'")return!1;e.advance();let o,s=!1,h=r1,a=n==='"'?/[^"&<]+/y:/[^'&<]+/y;e:for(;!e.isEnd;)switch(o=e.consumeMatch(a),o&&(this.validateChars(o),h+=o.replace(/[\t\r\n]/g," ")),e.peek()){case n:s=!0;break e;case"&":h+=this.consumeReference();continue;case"<":this.error("Unescaped `<` is not allowed in an attribute value");break;case r1:this.error("Unclosed attribute");break}return s||this.error("Unclosed attribute"),e.advance(),h}consumeCdataSection(){let{scanner:e}=this;if(!e.consumeStringFast("<![CDATA["))return!1;let n=e.consumeUntilString("]]>");return this.validateChars(n),e.consumeStringFast("]]>")||this.error("Unclosed CDATA section"),this.options.preserveCdata?this.addNode(new yF(n)):this.addText(n),!0}consumeCharData(){let{scanner:e}=this,n=e.consumeUntilMatch(/<|&|]]>/g);return n?(this.validateChars(n),e.peek()==="]"&&e.peek(3)==="]]>"&&this.error("Element content may not contain the CDATA section close delimiter `]]>`"),this.addText(n),!0):!1}consumeComment(){let{scanner:e}=this;if(!e.consumeStringFast("<!--"))return!1;let n=e.consumeUntilString("--");return this.validateChars(n),e.consumeStringFast("-->")||(e.peek(2)==="--"?this.error("The string `--` isn't allowed inside a comment"):this.error("Unclosed comment")),this.options.preserveComments&&this.addNode(new gF(n.trim())),!0}consumeContentReference(){let e=this.consumeReference();return e?(this.addText(e),!0):!1}consumeDoctypeDeclaration(){let{scanner:e}=this;return!e.consumeStringFast("<!DOCTYPE")||!this.consumeWhitespace()?!1:(e.consumeMatch(/[^[>]+/y),e.consumeMatch(/\[[\s\S]+?\][\x20\t\r\n]*>/y)||e.consumeStringFast(">")||this.error("Unclosed doctype declaration"),!0)}consumeElement(){let{scanner:e}=this,n=e.charIndex;if(e.peek()!=="<")return!1;e.advance();let o=this.consumeName();if(!o)return e.reset(n),!1;let s=Object.create(null);for(;this.consumeWhitespace();){let m=this.consumeName();if(!m)continue;let g=this.consumeEqual()&&this.consumeAttributeValue();g===!1&&this.error("Attribute value expected"),m in s&&this.error(`Duplicate attribute: ${m}`),m==="xml:space"&&g!=="default"&&g!=="preserve"&&this.error('Value of the `xml:space` attribute must be "default" or "preserve"'),s[m]=g}if(this.options.sortAttributes){let m=Object.keys(s).sort(),g=Object.create(null);for(let b=0;b<m.length;++b){let T=m[b];g[T]=s[T]}s=g}let h=Boolean(e.consumeStringFast("/>")),a=new _F(o,s);if(a.parent=this.currentNode,!h){for(e.consumeStringFast(">")||this.error(`Unclosed start tag for element \`${o}\``),this.currentNode=a,this.consumeCharData();this.consumeElement()||this.consumeContentReference()||this.consumeCdataSection()||this.consumeProcessingInstruction()||this.consumeComment();)this.consumeCharData();let m=e.charIndex,g;(!e.consumeStringFast("</")||!(g=this.consumeName())||g!==o)&&(e.reset(m),this.error(`Missing end tag for element ${o}`)),this.consumeWhitespace(),e.consumeStringFast(">")||this.error(`Unclosed end tag for element ${o}`),this.currentNode=a.parent}return this.addNode(a),!0}consumeEqual(){return this.consumeWhitespace(),this.scanner.consumeStringFast("=")?(this.consumeWhitespace(),!0):!1}consumeMisc(){return this.consumeComment()||this.consumeProcessingInstruction()||this.consumeWhitespace()}consumeName(){return Ac.isNameStartChar(this.scanner.peek())?this.scanner.consumeMatchFn(Ac.isNameChar):r1}consumeProcessingInstruction(){let{scanner:e}=this,n=e.charIndex;if(!e.consumeStringFast("<?"))return!1;let o=this.consumeName();if(o?o.toLowerCase()==="xml"&&(e.reset(n),this.error("XML declaration isn't allowed here")):this.error("Invalid processing instruction"),!this.consumeWhitespace()){if(e.consumeStringFast("?>"))return this.addNode(new kT(o)),!0;this.error("Whitespace is required after a processing instruction name")}let s=e.consumeUntilString("?>");return this.validateChars(s),e.consumeStringFast("?>")||this.error("Unterminated processing instruction"),this.addNode(new kT(o,s)),!0}consumeProlog(){let{scanner:e}=this,n=e.charIndex;for(this.consumeXmlDeclaration();this.consumeMisc(););if(this.consumeDoctypeDeclaration())for(;this.consumeMisc(););return n<e.charIndex}consumeReference(){let{scanner:e}=this;if(e.peek()!=="&")return!1;e.advance();let n=e.consumeMatchFn(Ac.isReferenceChar);e.consume()!==";"&&this.error("Unterminated reference (a reference must end with `;`)");let o;if(n[0]==="#"){let s=n[1]==="x"?parseInt(n.slice(2),16):parseInt(n.slice(1),10);isNaN(s)&&this.error("Invalid character reference"),o=String.fromCodePoint(s),Ac.isXmlChar(o)||this.error("Character reference resolves to an invalid character")}else if(o=Ac.predefinedEntities[n],o===void 0){let{ignoreUndefinedEntities:s,resolveUndefinedEntity:h}=this.options,a=`&${n};`;if(h){let m=h(a);if(m!=null){let g=typeof m;if(g!=="string")throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${g}`);return m}}if(s)return a;e.reset(-a.length),this.error(`Named entity isn't defined: ${a}`)}return o}consumeSystemLiteral(){let{scanner:e}=this,n=e.consumeStringFast('"')||e.consumeStringFast("'");if(!n)return!1;let o=e.consumeUntilString(n);return this.validateChars(o),e.consumeStringFast(n)||this.error("Missing end quote"),o}consumeWhitespace(){return Boolean(this.scanner.consumeMatchFn(Ac.isWhitespace))}consumeXmlDeclaration(){let{scanner:e}=this;if(!e.consumeStringFast("<?xml"))return!1;this.consumeWhitespace()||this.error("Invalid XML declaration");let n=Boolean(e.consumeStringFast("version"))&&this.consumeEqual()&&this.consumeSystemLiteral();if(n===!1?this.error("XML version is missing or invalid"):/^1\.[0-9]+$/.test(n)||this.error("Invalid character in version number"),this.consumeWhitespace()){Boolean(e.consumeStringFast("encoding"))&&this.consumeEqual()&&this.consumeSystemLiteral()&&this.consumeWhitespace();let s=Boolean(e.consumeStringFast("standalone"))&&this.consumeEqual()&&this.consumeSystemLiteral();s&&(s!=="yes"&&s!=="no"&&this.error('Only "yes" and "no" are permitted as values of `standalone`'),this.consumeWhitespace())}return e.consumeStringFast("?>")||this.error("Invalid or unclosed XML declaration"),!0}error(e){let{charIndex:n,string:o}=this.scanner,s=1,h="",a=1;for(let T=0;T<n;++T){let M=o[T];M===`
`?(s=1,h="",a+=1):(s+=1,h+=M)}let m=o.indexOf(`
`,n);h+=m===-1?o.slice(n):o.slice(n,m);let g=0;h.length>50&&(s<40?h=h.slice(0,50):(g=s-20,h=h.slice(g,s+30)));let b=new Error(`${e} (line ${a}, column ${s})
  ${h}
`+" ".repeat(s-g+1)+`^
`);throw Object.assign(b,{column:s,excerpt:h,line:a,pos:n}),b}validateChars(e){let n=0;for(let o of e)Ac.isNotXmlChar(o)&&(this.scanner.reset(-([...e].length-n)),this.error("Invalid character")),n+=1}}var bF=xF;function wF(t){return t[0]==="\uFEFF"&&(t=t.slice(1)),t.replace(/\r\n?/g,`
`)}const EF=bF,SF=OT,TF=CT,MF=AT,IF=Q0,OF=Cc,CF=PT,AF=X0;function Mu(t,e){return new EF(t,e).document}Mu.XmlCdata=SF,Mu.XmlComment=TF,Mu.XmlDocument=MF,Mu.XmlElement=IF,Mu.XmlNode=OF,Mu.XmlProcessingInstruction=CF,Mu.XmlText=AF;var PF=Mu;class kF extends Error{constructor(e){super(e)}}function LF(t){let e=null;try{e=PF(t)}catch(n){throw new kF(n.message)}return e}function xl(t){return t.children[0]}function ig(t){const e=t.indexOf(":");return e>-1?t.substr(e+1):t}function og(t){return t.name||""}function go(t,e,n){const o=ig(e);function s(h,a){return ig(og(a))===o&&h.push(a),n&&Array.isArray(a.children)?[...h,...a.children.reduce(s,[])]:h}return t&&Array.isArray(t.children)?t.children.reduce(s,[]):[]}function Er(t,e,n){return go(t,e,n)[0]||null}function Qp(t){return t&&Array.isArray(t.children)?[...t.children.filter(e=>e.constructor.name==="XmlElement")]:[]}function mn(t){const e=t&&Array.isArray(t.children)?t.children.find(n=>n.type==="text"):null;return e?e.text:""}function Ns(t,e){return t&&t.attributes[e]||""}const DT=["utf-8","utf-16","iso-8859-1"],NT="utf-8";function DF(t){const e=/charset=([^;]+)/.exec(t);return e?e[1]:null}function NF(t,e){const n=e?DF(e):null,o=n?[n,...DT]:DT;for(const s of o)try{return new TextDecoder(s,{fatal:!0}).decode(t)}catch{}return console.warn(`XML document encoding could not be determined, falling back to ${NT}.`),new TextDecoder(NT).decode(t)}const ag=new Map;function RF(t){if(ag.has(t))return ag.get(t);const e=fetch(t);return e.finally(()=>ag.delete(t)),ag.set(t,e),e}function n1(t){return RF(t).catch(()=>fetch(t,{method:"HEAD",mode:"no-cors"}).catch(e=>{throw new q0(`Fetching the document failed either due to network errors or unreachable host, error is: ${e.message}`,0,!1)}).then(()=>{throw new q0("The document could not be fetched due to CORS limitations",0,!0)})).then(async e=>{if(!e.ok){const s=await e.text();throw new q0(`Received an error with code ${e.status}: ${s}`,e.status,!1)}const n=await e.arrayBuffer(),o=e.headers.get("Content-Type");return NF(n,o)}).then(e=>LF(e))}function i1(t,e){const n=t.match(/(https?%3A%2F%2F[^/]+)$/);if(n){const m=n[1],g=i1(decodeURIComponent(m),e);return t.replace(m,encodeURIComponent(g))}const o=new URL(t),s=Object.keys(e),h=s.map(m=>m.toLowerCase()),a=[];for(const m of o.searchParams.keys())h.indexOf(m.toLowerCase())>-1&&a.push(m);return a.map(m=>o.searchParams.delete(m)),s.forEach(m=>o.searchParams.set(m,e[m]===!0?"":e[m])),o.toString()}let zF=1e3*60*60;function FF(){return zF}const Iu="caches"in self?caches.open("ogc-client"):null;async function BF(t,...e){if(!Iu)return;const n="https://cache/"+e.join("/");await(await Iu).put(n,new Response(JSON.stringify(t),{headers:{"x-expiry":(Date.now()+FF()).toString(10)}}))}async function VF(...t){if(!Iu)return!1;const e="https://cache/"+t.join("/");return(await Iu).match(e).then(o=>!!o&&parseInt(o.headers.get("x-expiry"))>Date.now())}async function UF(...t){if(!Iu)return null;const e="https://cache/"+t.join("/"),o=await(await Iu).match(e);return o?o.clone().json():null}const sg=new Map;async function jF(t,...e){if(await GF(),await VF(...e))return UF(...e);const n=e.join("#");if(sg.has(n))return sg.get(n);const o=t();o instanceof Promise&&(o.then(()=>sg.delete(n)),sg.set(n,o));const s=await o;return await BF(s,...e),s}async function GF(){if(!Iu)return;const t=await Iu,e=await t.keys();for(let n of e){const o=await t.match(n);parseInt(o.headers.get("x-expiry"))<=Date.now()&&await t.delete(n)}}function $F(t,e,n,o,s,h,a,m,g,b){const T=e==="2.0.0"?"TYPENAMES":"TYPENAME",M=e==="2.0.0"?"COUNT":"MAXFEATURES",I={SERVICE:"WFS",REQUEST:"GetFeature",VERSION:e,[T]:n};if(o!==void 0&&(I.OUTPUTFORMAT=o),h!==void 0&&(I.PROPERTYNAME=h.join(",")),a?(I.RESULTTYPE="hits",I[M]="1"):s!==void 0&&(I[M]=s.toString(10)),m&&(I.SRSNAME=m),g){const P=g.join(",");I.BBOX=b?`${P},${b}`:P}return i1(t,I)}class qF{constructor(e){const n=i1(e,{SERVICE:"WMS",REQUEST:"GetCapabilities"});this._capabilitiesPromise=jF(()=>eF(n),"WMS","CAPABILITIES",n).then(({info:o,layers:s,version:h})=>{this._info=o,this._layers=s,this._version=h}),this._info=null,this._layers=null,this._version=null}isReady(){return this._capabilitiesPromise.then(()=>this)}getServiceInfo(){return this._info}getLayers(){function e(n){return{title:n.title,name:n.name,abstract:n.abstract,..."children"in n&&{children:n.children.map(e)}}}return this._layers.map(e)}getLayerByName(e){let n=null;function o(s){if(n===null){if(s.name===e){n=s;return}"children"in s&&s.children.map(o)}}return this._layers.map(o),n}getVersion(){return this._version}}const WF=["EPSG:4046","EPSG:4075","EPSG:4120","EPSG:4122","EPSG:4124","EPSG:4126","EPSG:4149","EPSG:4151","EPSG:4153","EPSG:4155","EPSG:4157","EPSG:4159","EPSG:4161","EPSG:4163","EPSG:4165","EPSG:4167","EPSG:4169","EPSG:4171","EPSG:4173","EPSG:4175","EPSG:4178","EPSG:4180","EPSG:4182","EPSG:4184","EPSG:4188","EPSG:4190","EPSG:4191","EPSG:4196","EPSG:4198","EPSG:4202","EPSG:4210","EPSG:4211","EPSG:4214","EPSG:4226","EPSG:4229","EPSG:4231","EPSG:4233","EPSG:4236","EPSG:4238","EPSG:4240","EPSG:4242","EPSG:4244","EPSG:4246","EPSG:4248","EPSG:4250","EPSG:4252","EPSG:4255","EPSG:4258","EPSG:4261","EPSG:4264","EPSG:4267","EPSG:4270","EPSG:4273","EPSG:4276","EPSG:4279","EPSG:4281","EPSG:4284","EPSG:4286","EPSG:4288","EPSG:4292","EPSG:4295","EPSG:4297","EPSG:4299","EPSG:4302","EPSG:4324","EPSG:4326"];function HF(t){return WF.indexOf(o1(t))>-1}function o1(t){return/^urn:(?:x-)?ogc:def:crs:epsg:/.test(t.toLowerCase())?`EPSG:${/([0-9]+)$/.exec(t)[1]}`:t}function RT(t){return xl(t).attributes.version}function ZF(t){const e=RT(t),n=Er(xl(t),"Capability");return go(n,"Layer").map(o=>zT(o,e))}function XF(t){const e=Er(xl(t),"Service"),n=go(Er(e,"KeywordList"),"Keyword").map(mn).filter((o,s,h)=>h.indexOf(o)===s);return{title:mn(Er(e,"Title")),name:mn(Er(e,"Name")),abstract:mn(Er(e,"Abstract")),fees:mn(Er(e,"Fees")),constraints:mn(Er(e,"AccessConstraints")),keywords:n}}function zT(t,e,n=[],o=[],s=null){const h=e==="1.3.0"?"CRS":"SRS",a=go(t,h).map(mn),m=a.length>0?a:n,g=go(t,"Style").map(KF),b=g.length>0?g:o;function T(z){const V=Ns(z,h);return(HF(V)&&e==="1.3.0"?["miny","minx","maxy","maxx"]:["minx","miny","maxx","maxy"]).map(Y=>Ns(z,Y))}const M=Er(t,"Attribution"),I=M!==null?YF(M):s,P=go(t,"Layer").map(z=>zT(z,e,m,b,I));return{name:mn(Er(t,"Name")),title:mn(Er(t,"Title")),abstract:mn(Er(t,"Abstract")),availableCrs:m,styles:b,attribution:I,boundingBoxes:go(t,"BoundingBox").reduce((z,V)=>({...z,[Ns(V,h)]:T(V)}),{}),...P.length&&{children:P}}}function KF(t){const e=Ns(Er(Er(t,"LegendURL"),"OnlineResource"),"xlink:href");return{name:mn(Er(t,"Name")),title:mn(Er(t,"Title")),...e&&{legendUrl:e}}}function YF(t){const e=Ns(Er(Er(t,"LogoURL"),"OnlineResource"),"xlink:href"),n=Ns(Er(t,"OnlineResource"),"xlink:href"),o=mn(Er(t,"Title"));return{...o&&{title:o},...n&&{url:n},...e&&{logoUrl:e}}}function lg(t){return xl(t).attributes.version}function FT(t){const e=lg(t);let n;if(e.startsWith("1.0")){const o=Er(Er(Er(xl(t),"Capability"),"Request"),"GetFeature");n=Qp(Er(o,"ResultFormat")).map(og)}else{const o=Er(xl(t),"OperationsMetadata"),s=go(o,"Operation").find(a=>Ns(a,"name")==="GetFeature"),h=go(s,"Parameter").find(a=>Ns(a,"name")==="outputFormat");n=go(h,"Value",!0).map(mn)}return n}function JF(t){const e=lg(t),n=e.startsWith("1.0")?"Service":"ServiceIdentification",o=e.startsWith("1.0")?"Name":"ServiceType",s=Er(xl(t),n);let h;return e.startsWith("1.0")?h=mn(Er(s,"Keywords")).split(",").map(a=>a.trim()):h=go(Er(s,"Keywords"),"Keyword").map(mn),{title:mn(Er(s,"Title")),name:mn(Er(s,o)),abstract:mn(Er(s,"Abstract")),fees:mn(Er(s,"Fees")),constraints:mn(Er(s,"AccessConstraints")),keywords:h,outputFormats:FT(t)}}function QF(t){const e=lg(t),n=FT(t),o=Er(xl(t),"FeatureTypeList");return go(o,"FeatureType").map(s=>eB(s,e,n))}function eB(t,e,n){const o=e.startsWith("2.")?"CRS":"SRS",s=e.startsWith("1.0")?"SRS":`Default${o}`;function h(){const b=Er(t,"LatLongBoundingBox");return["minx","miny","maxx","maxy"].map(T=>Ns(b,T)).map(parseFloat)}function a(){const b=Er(t,"WGS84BoundingBox");return["LowerCorner","UpperCorner"].map(T=>Er(b,T)).map(T=>mn(T).split(" ")).reduce((T,M)=>[...T,...M]).map(parseFloat)}const m=e.startsWith("1.0")?[]:go(t,`Other${o}`).map(mn).map(o1),g=e.startsWith("1.0")?[]:go(Er(t,"OutputFormats"),"Format").map(mn);return{name:mn(Er(t,"Name")),title:mn(Er(t,"Title")),abstract:mn(Er(t,"Abstract")),defaultCrs:o1(mn(Er(t,s))),otherCrs:m,outputFormats:g.length>0?g:n,latLonBoundingBox:e.startsWith("1.0")?h():a()}}function tB(t,e,n){const o=xl(t);let s;if(n.startsWith("2.0"))s=go(o,"member").map(b=>Qp(b)[0]);else{const b=Er(o,"featureMembers");s=b?Qp(b):go(o,"featureMember").map(T=>Qp(T)[0])}const h=n==="1.0.0"?"fid":"gml:id";function a(b){return b in e.properties}function m(b,T){switch(e.properties[b]){case"integer":return parseInt(T);case"float":return parseFloat(T);case"boolean":return T==="true";default:return T}}function g(b){return Qp(b).filter(T=>a(ig(og(T)))).reduce((T,M)=>{const I=ig(og(M));return{...T,[I]:m(I,mn(M))}},{})}return s.map(b=>({id:Ns(b,h),properties:g(b)}))}function rB(t){return t.reduce((e,n)=>{for(const o in n.properties){const s=n.properties[o];o in e||(e[o]={uniqueValues:[]});const h=e[o].uniqueValues.find(a=>a.value===s);h?h.count++:e[o].uniqueValues.push({value:s,count:1})}return e},{})}W0("parseWmsCapabilities",self,({url:t})=>n1(t).then(e=>({info:XF(e),layers:ZF(e),version:RT(e)}))),W0("parseWfsCapabilities",self,({url:t})=>n1(t).then(e=>({info:JF(e),featureTypes:QF(e),version:lg(e)}))),W0("queryWfsFeatureTypeDetails",self,({url:t,serviceVersion:e,featureTypeFull:n})=>{const o=$F(t,e,n.name,void 0,void 0,Object.keys(n.properties));return n1(o).then(s=>({props:rB(tB(s,n,e))}))});const nB=()=>[{url:"http://wmts1.geoportail.lu/opendata/service",label:"Open Data Webservices WMS"},{url:"http://ows.terrestris.de/osm-gray/service",label:"OpenStreetMap by Terrestris (Grey)"},{url:"http://ows.terrestris.de/osm/service",label:"OpenStreetMap by Terrestris (Color)"}];class iB{constructor(e){Ti(this,"capabilitiesPromise");Ti(this,"serviceInfo");Ti(this,"layers");const n=new VO.default;let o="&";e.indexOf("?")===-1&&(o="?"),e.indexOf("Capabilities")===-1&&(e=e+o+"SERVICE=WMTS&REQUEST=GetCapabilities"),this.capabilitiesPromise=fetch(e).then(s=>s.text()).then(s=>{var a;const h=n.read(s);this.serviceInfo=this.mapServiceInfo(h.ServiceIdentification),this.layers=this.mapToRemoteLayers((a=h.Contents)==null?void 0:a.Layer)})}mapToRemoteLayers(e){return[{type:La.WMTS,children:e.map(n=>({type:La.WMTS,abstract:n.Abstract,format:n.Format,name:n.Identifier,title:n.Title,tileMatrixSetLink:n.TileMatrixSetLink,wgs84BoundingBox:n.WGS84BoundingBox}))}]}mapServiceInfo(e){return{type:La.WMTS,title:e.Title,abstract:e.Abstract,fees:e.Fees,constraints:e.AccessConstraints,serviceTypeVersion:e.ServiceTypeVersion}}isReady(){return this.capabilitiesPromise.then(()=>this)}getLayerByName(e){return this.layers[0].children.filter(n=>n.name===e)[0]}getLayers(){return this.layers}getServiceInfo(){return this.serviceInfo}}class oB{async getRemoteEndpoint(e){let n;return await this.getWmsEndpoint(e).isReady().catch(async()=>{n=await this.getWmtsEndpoint(e).isReady()})||n}getWmsEndpoint(e){return new qF(this.getProxyfiedUrl(e))}getWmtsEndpoint(e){return new iB(this.getProxyfiedUrl(e))}getProxyfiedUrl(e){return e.indexOf("httpsproxy")>0?e:pT+"?url="+encodeURIComponent(e)}async fetchRemoteWmsEndpoint(){return new Promise(e=>e(nB()))}isRemoteLayer(e){return typeof e=="string"&&(e.indexOf(La.WMS)===0||e.indexOf(La.WMTS)===0)}}const Pc=new oB;function aB(t,e){var n,o;return t.children&&!e.children||((n=e.children)==null?void 0:n.length)===0?1:e.children&&!t.children||((o=t.children)==null?void 0:o.length)===0?-1:0}function BT(t,e,n=0){const{name:o="",type:s=La.WMS,children:h}=t,a=`${s}||${e}||${o}`.split("-").join("%2D"),m=li();return{id:a,name:o,depth:n,children:h==null?void 0:h.sort(aB).map(g=>BT(g,e,n+1)),checked:m.hasLayer(a),expanded:!1}}function sB(t){const e=decodeURIComponent(t),[n,o,s]=e.split("||");return VT({id:e,url:Pc.getProxyfiedUrl(o),remoteLayer:{name:s,type:n}})}function VT({id:t,url:e,remoteLayer:n}){const{name:o="",type:s=La.WMS}=n;return{id:t,name:o,layers:o,url:e,type:s,imageType:xE.PNG}}const lB={class:"relative text-center"},uB=["placeholder","value"],cB={key:0,class:"text-center"},hB={class:"lux-label"},fB={key:1,class:"text-center"},pB={class:"lux-label"},dB={key:2,class:"text-center"},mB=Re("div",{class:"fa fa-refresh fa-spin"},null,-1),yB={key:3,class:"overflow-auto max-h-[calc(400px-36px)]"},UT=ur(or({__name:"remote-layers",setup(t){const{t:e}=En(),n=li(),o=ka(),s=Ln([]),h=Ln(),{remoteLayersOpen:a}=cn(gi()),{setRemoteLayersOpen:m}=gi();let g=!1,b,T,M;la(I);function I(){h.value=h.value?Wh.updateLayers(h.value,n.layers):void 0}Pc.fetchRemoteWmsEndpoint().then(he=>{s.value=he.map(({url:ve,label:ze})=>({label:ze,value:ve}))});async function P(he){g=!0,M=await Pc.getRemoteEndpoint(he).catch(()=>alert(e("Impossible de contacter ce WMS",{ns:"client"}))),T=he,g=!1}async function z(){const he=M,ve=he==null?void 0:he.getLayers();if(ve&&ve[0]){const ze=BT(ve[0],T);h.value=Wh.updateLayers(ze,n.layers)}}async function V(he){T=b=he,await P(T),z()}function W(he){b=he.target.value}async function Y(){await P(b),z()}function X(he){h.value=Wh.toggleNode(he.id,h.value,"expanded")}function ue(he){const{id:ve,name:ze}=he,Fe=M;if(he.checked===!0)n.removeLayers(ve);else{const Pe=Fe==null?void 0:Fe.getLayerByName(ze);if(Pe){const Se=o.initLayer(VT({id:ve,url:Pc.getProxyfiedUrl(T),remoteLayer:Pe}));n.addLayers(Se)}}}return(he,ve)=>ae(a)?(Ve(),en(ST,{key:0,title:ae(e)("Add external data",{ns:"client"}),onClose:ve[0]||(ve[0]=ze=>ae(m)(!1))},{content:ap(()=>{var ze,Fe;return[Re("div",lB,[Ft(l0,{class:"lux-remote-services-dropdown",options:ae(s),placeholder:ae(e)("Predefined wms",{ns:"client"}),onChange:V},null,8,["options","placeholder"]),Re("input",{class:"lux-input w-[300px]",type:"url",placeholder:ae(e)("Choose or write a WMS url",{ns:"client"}),value:ae(T)||"",onChange:W},null,40,uB),Re("button",{type:"button",class:"lux-btn",onClick:Y},jt(ae(e)("Get the layers",{ns:"client"})),1)]),!ae(g)&&ae(M)?(Ve(),nt("div",cB,[Re("span",hB,jt(ae(e)("Description du service :",{ns:"client"})),1),Hm(" "+jt((ze=ae(M).getServiceInfo())==null?void 0:ze.abstract),1)])):Ke("v-if",!0),!ae(g)&&ae(M)?(Ve(),nt("div",fB,[Re("span",pB,jt(ae(e)("Access constraints :",{ns:"client"})),1),Hm(" "+jt((Fe=ae(M).getServiceInfo())==null?void 0:Fe.constraints),1)])):Ke("v-if",!0),ae(g)?(Ve(),nt("div",dB,[mB,Re("span",null,jt(ae(e)("Chargement des informations",{ns:"client"})),1)])):Ke("v-if",!0),ae(g)?Ke("v-if",!0):(Ve(),nt("div",yB,[ae(h)?(Ve(),en($0,{key:0,class:"block p-[10px] mb-[11px]",node:ae(h),onToggleParent:X,onToggleLayer:ue},null,8,["node"])):Ke("v-if",!0)]))]}),_:1},8,["title"])):Ke("v-if",!0)}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/remote-layers/remote-layers.vue"]]);function gB(t,e="fr-FR"){const n=new Date(t);return new Intl.DateTimeFormat(e).format(n)}const vB={class:"font-bold"},_B={class:"col-span-2"},ed=ur(or({__name:"layer-metadata-item",props:{label:{type:String,required:!0},value:{type:String,required:!0}},setup(t){const e=t;return(n,o)=>(Ve(),nt(un,null,[Re("span",vB,jt(e.label),1),Re("span",_B,jt(e.value),1)],64))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-metadata/layer-metadata-item.vue"]]);function xB(t){return{fr:"fre",en:"eng",de:"ger",lb:"ltz"}[t.toLowerCase()]}function bB(t){return new DOMParser().parseFromString(t,"text/html").body}function wB(t){const e=[];function n(o){const s=o.split("|");s[3]==="WWW:LINK-1.0-http--link"&&e.indexOf(s[2])===-1&&e.push(s[2])}return Array.isArray(t)?t.forEach(n,t):n(t),e}function EB(t){const n=(Array.isArray(t)?t:[t]).filter(o=>o.split("|")[1]==="metadata");return{organisaton:n[0].split("|")[2],name:n[0].split("|")[5],unknown:n[0].split("|")[6],address:n[0].split("|")[7],email:n[0].split("|")[4]}}class jT{}class SB extends jT{async getMetadata(e,n,o){console.assert(e===La.WMS);const s=Pc.getWmsEndpoint(n);await s.isReady();const h=s==null?void 0:s.getServiceInfo(),a=s==null?void 0:s.getLayerByName(o);return{title:a.title,description:a.abstract,keywords:h.keywords,accessConstraints:h.constraints,serviceDescription:h.abstract}}}const TB=new SB;class MB extends jT{async getMetadata(e,n,o){console.assert(e===La.WMTS);const s=Pc.getWmtsEndpoint(n);await s.isReady();const h=s==null?void 0:s.getServiceInfo(),a=s==null?void 0:s.getLayerByName(o);return{title:a.title,description:a.abstract,accessConstraints:h.constraints,serviceDescription:h.abstract}}}const IB=new MB;class OB{async getMetadata(e,n,o){if(e===La.WMS)return TB.getMetadata(e,n,o);if(e===La.WMTS)return IB.getMetadata(e,n,o);throw new Error(`Unsupported service type: ${e}`)}}const CB=new OB;class AB{constructor(){Ti(this,"geonetworkBaseUrl","https://geocatalogue.geoportail.lu/geonetwork/srv");Ti(this,"legendBaseUrl","https://map.geoportail.lu/legends/get_html");Ti(this,"localMetadataBaseUrl","https://map.geoportail.lu/getMetadata")}async getLayerMetadata(e,n){const o=wu(),s=o.findBgLayerById(+e)||o.findById(+e)||o.find3dLayerById(+e);if(s){const h=s.metadata,a=h==null?void 0:h.metadata_id,m=a&&await this.getLocalMetadata(this.localMetadataBaseUrl,a,n),g=s.name,b=(h==null?void 0:h.legend_name)||"",T=s==null?void 0:s.id,M=b&&await this.getLegendHtml(this.legendBaseUrl,b,T,n);return{...m,title:g,hasLegend:!!M,...M&&{legendHtml:M}}}else{const[h,a,m]=String(e).split("%2D").join("-").split("||");return CB.getMetadata(h,a,m)}}getLocalMetadata(e,n,o){return fetch(`${e}?lang=${o}&uid=${n}`).then(async s=>{const h=(await s.json()).metadata;return{name:h.title,serviceDescription:h.serviceDescription,description:h.abstract,legalConstraints:h.legalConstraints,link:wB(h.link),revisionDate:h.revisionDate,keyword:h.keyword,responsibleParty:h.responsibleParty?EB(h.responsibleParty):void 0,metadataLink:`${this.geonetworkBaseUrl}/${xB(o)}/catalog.search#/metadata/${n}`,isError:!1}}).catch(()=>({isError:!0}))}getLegendHtml(e,n,o,s){const h={lang:s,...n&&{name:n},...o&&{id:o.toString()}};if(h.name&&h.lang){window.devicePixelRatio>1&&(h.dpi=(window.devicePixelRatio*96).toString());const a=`${e}?${new URLSearchParams(h).toString()}`;return fetch(a).then(async m=>{if(m.status>=400&&m.status<600)throw new Error("Server responded with error code");const g=await m.text();return g?bB(g):void 0}).catch(()=>{})}}}const GT=new AB,PB={class:"grid gap-2 grid-cols-3 pt-3 text-[13px] font-arial break-words"},kB={key:2,class:"col-span-3 grid gap-2 grid-cols-3"},LB={class:"font-bold"},DB={class:"col-span-2"},NB=["title"],RB=["title"],zB={key:4,class:"col-span-3"},FB={class:"font-bold"},BB={class:"col-span-2"},VB=["href"],UB={key:7,class:"col-span-3 grid gap-2 grid-cols-3"},jB={class:"font-bold"},GB={class:"col-span-2"},$B={key:0},qB={key:1},WB={key:2},HB={key:3},ZB={key:4},XB=["href"],KB={key:8,class:"grid gap-2 grid-cols-3 col-span-3"},YB={class:"font-bold"},JB={class:"col-span-2"},QB=["href"],e8={key:9,class:"col-span-3"},t8={key:10},r8={class:"text-xl"},n8={key:11,class:"col-span-3"},$T=ur(or({__name:"layer-metadata",setup(t){const e=G0(),{metadataId:n}=cn(e),{t:o,i18next:s}=En(),h=vr(),a=vr(!0),m=220;Tn(n,async I=>{var P,z;h.value=I?await GT.getLayerMetadata(I,s.language):void 0,a.value=(((z=(P=h.value)==null?void 0:P.description)==null?void 0:z.length)||0)<m}),ua(()=>{s.on("languageChanged",async()=>{n.value&&(h.value=await GT.getLayerMetadata(n.value,s.language))})});const g=ar(()=>{var I,P,z;return a.value?(I=h.value)==null?void 0:I.description:(z=(P=h.value)==null?void 0:P.description)==null?void 0:z.slice(0,m)});function b(){a.value=!0}function T(){a.value=!1}function M(){e.clearMetadataId()}return(I,P)=>{const z=p_("dompurify-html");return h.value?(Ve(),en(ST,{key:0,footer:!1,"max-height":!0,title:ae(o)(`${h.value.title}`,{ns:"client"}),onClose:M},{content:ap(()=>{var V,W,Y,X,ue,he,ve,ze,Fe,Pe,Se,Ie,Je,$e,st;return[Re("div",PB,[h.value.name?(Ve(),en(ed,{key:0,label:ae(o)("Name"),value:h.value.name},null,8,["label","value"])):Ke("v-if",!0),h.value.serviceDescription?(Ve(),en(ed,{key:1,label:ae(o)("Description du Service"),value:h.value.serviceDescription},null,8,["label","value"])):Ke("v-if",!0),h.value.description?(Ve(),nt("div",kB,[Re("span",LB,jt(ae(o)("Description")),1),Re("span",DB,[Vm(Re("span",null,null,512),[[z,ae(g)]]),a.value?Ke("v-if",!0):(Ve(),nt("button",{key:0,title:ae(o)("Display full description",{ns:"client"}),onClick:b,class:"text-secondary hover:underline"}," ... ",8,NB)),a.value&&(((V=ae(g))==null?void 0:V.length)||0)>m?(Ve(),nt("button",{key:1,title:ae(o)("Hide full description",{ns:"client"}),onClick:T,class:"text-secondary hover:underline"}," - ",8,RB)):Ke("v-if",!0)])])):Ke("v-if",!0),h.value.legalConstraints?(Ve(),en(ed,{key:3,label:ae(o)("Contrainte d'utilisation"),value:h.value.legalConstraints},null,8,["label","value"])):Ke("v-if",!0),((W=h.value.link)==null?void 0:W.length)!==0?(Ve(),nt("div",zB,[(Ve(!0),nt(un,null,Ta(h.value.link,be=>(Ve(),nt("div",{class:"grid gap-2 grid-cols-3",key:be},[Re("span",FB,jt(ae(o)("Url vers la resource")),1),Re("span",BB,[Re("a",{class:"text-secondary hover:underline",target:"_blank",href:be},jt(be),9,VB)])]))),128))])):Ke("v-if",!0),h.value.revisionDate?(Ve(),en(ed,{key:5,label:ae(o)("Revision date"),value:ae(gB)(h.value.revisionDate,ae(s).language)},null,8,["label","value"])):Ke("v-if",!0),h.value.keyword?(Ve(),en(ed,{key:6,label:ae(o)("Keywords"),value:(Y=h.value.keyword)==null?void 0:Y.join(",")},null,8,["label","value"])):Ke("v-if",!0),h.value.responsibleParty?(Ve(),nt("div",UB,[Re("div",jB,jt(ae(o)("Contact")),1),Re("div",GB,[(X=h.value.responsibleParty)!=null&&X.organisaton?(Ve(),nt("p",$B,jt((ue=h.value.responsibleParty)==null?void 0:ue.organisaton),1)):Ke("v-if",!0),(he=h.value.responsibleParty)!=null&&he.name?(Ve(),nt("p",qB,jt((ve=h.value.responsibleParty)==null?void 0:ve.name),1)):Ke("v-if",!0),(ze=h.value.responsibleParty)!=null&&ze.unknown?(Ve(),nt("p",WB,jt((Fe=h.value.responsibleParty)==null?void 0:Fe.unknown),1)):Ke("v-if",!0),(Pe=h.value.responsibleParty)!=null&&Pe.address?(Ve(),nt("p",HB,jt((Se=h.value.responsibleParty)==null?void 0:Se.address),1)):Ke("v-if",!0),(Ie=h.value.responsibleParty)!=null&&Ie.email?(Ve(),nt("p",ZB,[Re("a",{class:"text-secondary hover:underline",href:"mailto:"+((Je=h.value.responsibleParty)==null?void 0:Je.email)},jt(($e=h.value.responsibleParty)==null?void 0:$e.email),9,XB)])):Ke("v-if",!0)])])):Ke("v-if",!0),h.value.metadataLink?(Ve(),nt("div",KB,[Re("span",YB,jt(ae(o)("Link to the metadata")),1),Re("span",JB,[Re("a",{class:"text-secondary hover:underline",target:"_blank",href:h.value.metadataLink},jt(ae(o)("link")),9,QB)])])):Ke("v-if",!0),h.value.isError?(Ve(),nt("div",e8,jt(ae(o)("The metadata is right now not available")),1)):Ke("v-if",!0),h.value.legendHtml?(Ve(),nt("div",t8,[Re("h4",r8,jt(ae(o)("Legend")),1),Vm(Re("span",null,null,512),[[z,(st=h.value.legendHtml)==null?void 0:st.innerHTML]])])):Ke("v-if",!0),h.value.hasLegend?Ke("v-if",!0):(Ve(),nt("div",n8,jt(ae(o)("The legend is not available for this layer")),1))])]}),_:1},8,["title"])):Ke("v-if",!0)}}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-metadata/layer-metadata.vue"]]),i8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM0AAAAoCAMAAABq645qAAACPVBMVEUAAABaW13////tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy5DjxTaAAAAvXRSTlMAAAABAgMEBQYHCAkKCwwNDg8QERESFBUWFxkaGx0eHyAhIiInKSosMTIzNTY5Ojs8PUFCQ0RERkpMTk9QU1RVVldaXmFjZWZmamtwcXJzdXd3eHl7fX+AgYKDhIaHiIiKi4yOj5CTlJWWl5iZmZqcnZ+goaKjpKanqKqqq6ywsbK0tbW4u7u8vb6/wMHExcbHysvMzM7P0NDS1NXa29zd3t/g4eTl5ujp6uvs7e7u8PLz9PX29/j5+vv8/f5cALqzAAAEcklEQVRo3u3Z+ZPUVBAH8O63LsLKijoIgotHFI+HgiKNeGC8MCqgUUFAJYjgAQ6HKMgGEQQiqChIPFh1iciiwPIEhvv49t/mD5lBORa2tHbLTO2rmqnUTCrJZ3r65ZuEjDHGGLrMWGcKMah7mh/7NP8PzXBqbqgfzdtPb7i/fjQPvq8r5jUVXNNIY4moYeL6+XNfn9Ov6LUZ2/Z7Pxo3YaZWTp/uLPw/reXYbqLRPz/38g+qJ/oTEV396IzmgmquXHZoIRHd/sTs31T1DqIBcyqHZjQWtTbf6nQiokHLVVWn7ju4euXGjsX9LtTAGgPAGGMzOPZSOGFYtmAXsO8skFkgZovQgi2QcZKyIGAAjJQtIgAB/5vRTc2IvbqSqOWNJQdUVdfe+/zitmsu2jeQ/GWMC43HacRhxhAWcJRyEgmYBSVYgROwgJkzeGVEDGEGotqnPaih1Xp63KSvVFVVtz0wt23AvMVda5AZY2FM7OWO/N2DwBMgESBiQZyABUgYSYQkYSBjhAh7QXN3Zfey7YdyzXh6aQpdu2fIpWsD30CykKOU4XPgmBPEnNcmC1jgIT9uCx9ZkOW1kQi9oBm6aMvO3KIVomUPES19/KIaoNo34uA8cUgtB4DzmQXCFoCFhbXgMtgC8DNGKMj7xnIKtj2toeGf55X5c9+ZRpo1lWjyq5c/33Avj+5obpz25miiwd+p6q4/2jfvIrqtrYlemF5MzZObTuhHCw6cUd2y/91ftj5DRJOn0JKniqm56jPtUNXDx44u6NywvaPzPqL+G5v3jCimhhqaX/vyi6VTxtzyYkVV9dSsRvrmnVXUI5oo7GkNEV2RH/igaRVV1Y8fOdE+tEc0tlzqBU1tND+7U1W18t51F8/QAFJrkUccL4VjABFb+MwoMyznszWzBZxfDT2SIbZgm0/TzBbIpLqcr8GwScJxfF4UiliAgGEZ1gKx8VK4bmuafmpdrqr6cFdXBJBSORPkp9A0ZI8hAi4jYQY8CEN8MDML2K/FBBdwKU80kOp3eSBirq7BkJJLstK5UShw+eYhDBGUYNPQeN3WTND2rd+r6oquNUZQ00A49gCEJQg8RhJD8j0DQX6IEBZYMLMAAANZrpHa8lkNBwjOi0Ion90KRIDIQEzsdVfzlurhT1X11F2XqE3qwfNQMiYLGYIYNgAQMcTltXHV3z9w1dAD/8LapH/XJt9eycWudG4U8lGrjYeSIAtMFlaD1SU1NxAR0cA9qrpqr6ruaOmybxLPREBojLEOzoMNkAXsO4YNYRnIpNo3WS30+EByXt+kttY3AEdAyGmZ4/TcKORCDgDhEAg5D0wO7vK1mbmwhajxA9XWkXTTh8dVj6wZX9gr6ZFL9eTm1nbVhUREdOs2Vb25sJqmRTuOq+r+rwfmgGEHVYcU+H7a8KNrdP6kYTXBJ6qPFVjT2DxwzD/msbWqE+vnrvqvevSeutGMUm0dXC+ahk3asb5unt+8cvLIqOvr52nU7Dv7nq31afo0/0mzrhiavwAx1n2SsZnMdgAAAABJRU5ErkJggg==";class o8{bootstrap(){this.restore();let e;e=la(()=>{this.persist(),e&&e()})}persist(){const e=gi(),{lang:n}=cn(e);Tn(n,(o,s)=>{s!==o&&(Or.setValue(Eu,o),document.documentElement.setAttribute("lang",o))},{immediate:!0})}restore(){const e=Or.getValue(Eu);if(e){const{setLang:n}=gi(),{i18next:o}=En();o.changeLanguage(e),n(e)}}}const a8=new o8,s8=ur(or({__name:"language-selector",setup(t){const{i18next:e,t:n}=En(),{setLang:o}=gi(),{lang:s}=cn(gi()),h=ar(()=>["en","de","fr","lb"].map(g=>({label:n(g),value:g,ariaLabel:n("Changer de langue : {{lang}}",{lang:g})}))),a=n("Changer de langue");a8.bootstrap();function m(g){e.changeLanguage(g),o(g)}return(g,b)=>(Ve(),nt("div",null,[Ft(l0,{class:"lux-navbar-dropdown lux-dropdown-inline text-white h-full",options:ae(h),placeholder:ae(a),modelValue:ae(s),"onUpdate:modelValue":b[0]||(b[0]=T=>ln(s)?s.value=T:null),onChange:m},null,8,["options","placeholder","modelValue"])]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/nav-bars/language-selector.vue"]]);class l8{setCurrentThemeColors(e){const n=document.querySelector(":root");["primary","secondary","tertiary"].forEach(s=>{const h=getComputedStyle(n).getPropertyValue(`--${e}-${s}`);n.style.setProperty(`--color-${s}`,h)})}}const qT=new l8,u8={class:"w-full h-14 flex bg-white shadow-header z-10 shrink-0"},c8=Re("div",{class:"flex-2 p-[5px]"},[Re("img",{src:i8})],-1),h8=Re("div",{class:"grow text-center"},"search",-1),f8={class:"h-full flex"},p8={class:"hidden lg:inline-block"},d8={class:"border-l-[1px] border-stone-300 h-full"},WT=ur(or({__name:"header-bar",setup(t){const{t:e}=En(),n=gi(),{layersOpen:o,myLayersTabOpen:s,themeGridOpen:h}=cn(n),{setLayersOpen:a,setMyLayersTabOpen:m,setThemeGridOpen:g}=n,b=yo(),{theme:T}=cn(b);Tn(T,I=>{I&&qT.setCurrentThemeColors(I.name)},{immediate:!0});function M(){o.value?o.value&&(h.value?a(!1):(s.value&&m(!1),g(!0))):(a(!0),s.value&&m(!1),g(!0))}return(I,P)=>{var z,V;return Ve(),nt("header",u8,[c8,h8,Re("div",null,[Re("ul",f8,[Re("li",null,[Re("button",{class:Pr(["flex items-center before:font-icons before:text-3xl before:w-16 text-primary uppercase h-full mr-3",`before:content-${(z=ae(T))==null?void 0:z.name}`]),onClick:M},[Re("span",p8,jt(ae(e)(`${(V=ae(T))==null?void 0:V.name}`)),1)],2)]),Re("li",d8,[Ft(s8,{class:"flex-none h-full"})])])])])}}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/header/header-bar.vue"]]),m8={class:"block text-[13px] sm:text-base uppercase"},bl=ur(or({__name:"button-icon",props:{label:{type:String,required:!0},icon:{type:String,required:!0},active:{type:Boolean,required:!1}},setup(t){const e=t;return(n,o)=>(Ve(),nt("button",{class:Pr(["h-[42px] w-full sm:h-full sm:w-16 hover:text-white hover:bg-primary",e.active?"bg-primary text-white":""])},[Re("span",{class:Pr(["block text-[1.7rem] sm:text-[2rem] -mt-1.5 -mb-3 after:font-icons",e.active?"lux-close-cross":`after:content-${e.icon}`])},null,2),Re("span",m8,jt(e.label),1)],2))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/footer/button-icon.vue"]]),y8=["href"],Ou=ur(or({__name:"button-link",props:{label:{type:String,required:!0},link:{type:String,required:!0}},setup(t){const e=t;return(n,o)=>(Ve(),nt("a",{class:"h-full flex flex-col justify-center px-[7px] uppercase hover:text-white hover:bg-primary",href:`${e.link}`,target:"_blank"},jt(n.$props.label),9,y8))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/footer/button-link.vue"]]),g8={class:"flex flex-col w-12 justify-between bg-white z-5 shrink-0 sm:flex-row sm:w-full sm:h-14 sm:shadow-footer"},v8={class:"flex flex-col w-full sm:w-80 sm:flex-row justify-start text-primary divide-y sm:divide-y-0 sm:divide-x divide-gray-400 divide-solid box-content border-y sm:border-y-0 border-x border-gray-400"},_8={class:"flex flex-col w-12 sm:w-64 sm:flex-row justify-start text-primary divide-y sm:divide-y-0 sm:divide-x divide-gray-400 divide-solid box-content border-y sm:border-y-0 border-x border-gray-400"},x8={class:"w-[466px] hidden sm:flex flex-row justify-end text-gray-500 whitespace-nowrap"},HT=ur(or({__name:"footer-bar",setup(t){const{t:e,i18next:n}=En(),{setLayersOpen:o}=gi(),{layersOpen:s}=cn(gi());return(h,a)=>(Ve(),nt("footer",g8,[Ke(" left buttons "),Re("ul",v8,[Re("li",null,[Ft(bl,{label:ae(e)("Layers",{ns:"client"}),icon:"layers",active:ae(s),onClick:a[0]||(a[0]=()=>ae(o)(!ae(s)))},null,8,["label","active"])]),Ke(`TODOs in each button when implemented
        - remove class="text-gray-300"
        - add click handler that calls setLayersOpen(true) and opens tool (also via app store)
      `),Re("li",null,[Ft(bl,{class:"text-gray-300",label:ae(e)("My Maps",{ns:"client"}),icon:"mymaps"},null,8,["label"])]),Re("li",null,[Ft(bl,{class:"text-gray-300",label:ae(e)("Infos",{ns:"client"}),icon:"infos"},null,8,["label"])]),Re("li",null,[Ft(bl,{class:"text-gray-300",label:ae(e)("Legends",{ns:"client"}),icon:"legends"},null,8,["label"])]),Re("li",null,[Ft(bl,{class:"text-gray-300",label:ae(e)("Routing",{ns:"client"}),icon:"routing"},null,8,["label"])])]),Ke(" center buttons "),Re("div",_8,[Ft(bl,{class:"text-gray-300",label:ae(e)("Dessin",{ns:"client"}),icon:"draw"},null,8,["label"]),Ft(bl,{class:"text-gray-300 hidden sm:block",label:ae(e)("Mesurer",{ns:"client"}),icon:"measure"},null,8,["label"]),Ft(bl,{class:"text-gray-300 hidden sm:block",label:ae(e)("Imprimer",{ns:"client"}),icon:"print"},null,8,["label"]),Ft(bl,{class:"text-gray-300",label:ae(e)("Partager",{ns:"client"}),icon:"share"},null,8,["label"])]),Ke(" right buttons "),Re("div",x8,[Ft(Ou,{class:"hidden lg:flex text-gray-500",label:ae(e)("What's new",{ns:"client"}),link:`https://geoportail.lu/${ae(n).language}/questions/whats-new/`},null,8,["label","link"]),Ke("TODO get geonetworkBaseUrl from config"),Ft(Ou,{class:"hidden lg:flex text-gray-500",label:ae(e)("Geocatalogue",{ns:"client"}),link:""},null,8,["label"]),Ke("TODO handle feedback links (for different portals?)"),Ft(Ou,{class:"hidden lg:flex text-gray-500",label:ae(e)("Feedback",{ns:"client"}),link:""},null,8,["label"]),Ft(Ou,{class:"hidden lg:flex text-gray-500",label:ae(e)("A Propos",{ns:"client"}),link:`https://www.geoportail.lu/${ae(n).language}/propos/`},null,8,["label","link"]),Ft(Ou,{class:"hidden lg:flex text-gray-500",label:ae(e)("Aide",{ns:"client"}),link:`https://www.geoportail.lu/${ae(n).language}/documentation/`},null,8,["label","link"]),Ft(Ou,{class:"hidden lg:flex text-gray-500",label:ae(e)("Contact",{ns:"client"}),link:`https://www.geoportail.lu/${ae(n).language}/propos/contactez-nous/`},null,8,["label","link"]),Ft(Ou,{class:"text-gray-500",label:ae(e)("Legalites",{ns:"client"}),link:`https://www.geoportail.lu/${ae(n).language}/propos/mentions-legales/`},null,8,["label","link"]),Ft(Ou,{class:"text-gray-500",label:ae(e)("ACT",{ns:"client"}),link:"http://www.act.public.lu/"},null,8,["label","link"])])]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/footer/footer-bar.vue"]]),b8={class:"flex flex-row flex-wrap pl-2.5"},w8=["onClick"],E8={class:"text-2xl absolute top-5"},S8=ur(or({__name:"theme-grid",props:{themes:{type:Array,required:!0}},setup(t){const e=t,{t:n}=En();return(o,s)=>(Ve(),nt("div",b8,[(Ve(!0),nt(un,null,Ta(e.themes,h=>(Ve(),nt("button",{class:Pr(["relative shrink-0 h-[150px] w-1/2 px-2.5 text-start text-gray-100/40 uppercase hover:bg-[#ccc]",`bg-${h.name}-primary hover:text-${h.name}-primary`]),key:h.id,onClick:a=>o.$emit("setTheme",h.name)},[Re("div",E8,jt(ae(n)(`${h.name}`)),1),Re("div",{class:Pr(["text-6xl absolute bottom-1 after:font-icons",`after:content-${h.name}`])},null,2)],10,w8))),128))]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/theme-selector/theme-grid.vue"]]),T8=["aria-expanded"],M8={class:"py-0.5"},I8={class:"px-1 py-0.5 shrink-0 flex flex-row text-[12px] bg-secondary text-white"},O8={class:"py-[3px]"},C8={class:"flex flex-row flex-wrap ml-1 w-12"},A8=ur(or({__name:"theme-selector-button",props:{themes:{type:Array,required:!0},currentTheme:{type:null,required:!1},isOpen:{type:Boolean,required:!1}},setup(t){const e=t,{t:n}=En(),o=ar(()=>{var s;return((s=e.themes)==null?void 0:s.slice(0,8))||[]});return(s,h)=>{var a;return Ve(),nt("button",{class:"w-full flex flex-row justify-between bg-tertiary text-white px-2 py-1.5 uppercase cursor-pointer hover:bg-white hover:text-primary","aria-expanded":e.isOpen},[Re("span",M8,jt(ae(n)("Theme"))+": "+jt(ae(n)(`${(a=e.currentTheme)==null?void 0:a.name}`)),1),Re("span",I8,[Re("span",O8,jt(ae(n)("Changer")),1),Re("span",C8,[(Ve(!0),nt(un,null,Ta(ae(o),m=>(Ve(),nt("div",{class:Pr(`h-2.5 w-2.5 m-px bg-${m.name}-primary`),key:m.id},null,2))),128))])])],8,T8)}}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/theme-selector/theme-selector-button.vue"]]),P8={key:0,class:"absolute inset-x-0 top-14 bottom-0 mt-1 bg-primary overflow-y-auto overflow-x-hidden"},k8=ur(or({__name:"theme-selector",setup(t){const e=gi(),{setThemeGridOpen:n}=e,{themeGridOpen:o}=cn(e),s=yo(),h=wu(),{theme:a,themes:m}=cn(s),g=ar(()=>{var M;return((M=m.value)==null?void 0:M.filter(I=>{var P;return((P=I.metadata)==null?void 0:P.display_in_switcher)===!0}))||[]});function b(){n(!o.value)}function T(M){h.setTheme(M),b()}return(M,I)=>(Ve(),nt(un,null,[Ft(A8,{onClick:b,themes:ae(g),currentTheme:ae(a),isOpen:ae(o)},null,8,["themes","currentTheme","isOpen"]),ae(o)?(Ve(),nt("div",P8,[Ft(S8,{onSetTheme:T,themes:ae(g)},null,8,["themes"])])):Ke("v-if",!0)],64))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/theme-selector/theme-selector.vue"]]);function a1(t,e=0){const{name:n,id:o,children:s,metadata:h}=t;return{name:n,id:o,depth:e,children:s==null?void 0:s.map(a=>a1(a,e+1)),checked:!1,expanded:(h==null?void 0:h.is_expanded)||!1}}const L8={key:0,class:"mb-7"},D8=ur(or({__name:"catalog-tree",setup(t){const e=li(),n=yo(),o=ka(),s=Ln(),h=Ln(),a=ar(()=>!e.is3dActive||e.is3dActive&&!e.is3dMesh),{layerTrees_3d:m}=cn(n);la(g);function g(){var M;if(n.theme&&e.layers){const I=s.value&&s.value.id===((M=n.theme)==null?void 0:M.id)?s.value:a1(n.theme);s.value=Wh.updateLayers(I,e.layers)}}la(()=>{if(m.value){const M=h.value?h.value:a1(m.value);h.value=Wh.updateLayers(M,e.layers3d)}});function b(M,I){const P=I?h:s;P.value=Wh.toggleNode(M.id,P.value,"expanded")}function T(M,I){o.toggleLayer(+M.id,!M.checked,I)}return(M,I)=>(Ve(),nt("div",null,[Ke(" 3D layers catalog, only displayed when 3D is active "),ae(h)&&ae(e).is3dActive?(Ve(),nt("div",L8,[(Ve(),en($0,{node:ae(h),key:ae(h).id,onToggleParent:I[0]||(I[0]=P=>b(P,!0)),onToggleLayer:I[1]||(I[1]=P=>T(P,!0))},null,8,["node"]))])):Ke("v-if",!0),Ke(" Main catalog, displays by default and 3D terrain active "),ae(s)&&ae(a)?(Ve(),en($0,{node:ae(s),key:ae(s).id,onToggleParent:I[2]||(I[2]=P=>b(P,!1)),onToggleLayer:I[3]||(I[3]=P=>T(P,!1))},null,8,["node"])):Ke("v-if",!0)]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/catalog/catalog-tree.vue"]]),N8=ur(or({__name:"catalog-tab",setup(t){const{themeGridOpen:e}=cn(gi());return(n,o)=>(Ve(),nt(un,null,[Ft(k8),ae(e)===!1?(Ve(),en(D8,{key:0,class:"pt-5 absolute inset-x-2.5 bg-primary overflow-y-auto overflow-x-hidden"})):Ke("v-if",!0)],64))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/catalog/catalog-tab.vue"]]);/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ZT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function Rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZT(Object(n),!0).forEach(function(o){R8(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function ug(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ug=function(e){return typeof e}:ug=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}function R8(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wl(){return wl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},wl.apply(this,arguments)}function z8(t,e){if(t==null)return{};var n={},o=Object.keys(t),s,h;for(h=0;h<o.length;h++)s=o[h],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function F8(t,e){if(t==null)return{};var n=z8(t,e),o,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(t);for(s=0;s<h.length;s++)o=h[s],!(e.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,o)||(n[o]=t[o]))}return n}var B8="1.15.0";function El(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Sl=El(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),td=El(/Edge/i),XT=El(/firefox/i),rd=El(/safari/i)&&!El(/chrome/i)&&!El(/android/i),KT=El(/iP(ad|od|hone)/i),YT=El(/chrome/i)&&El(/android/i),JT={capture:!1,passive:!1};function rn(t,e,n){t.addEventListener(e,n,!Sl&&JT)}function Kr(t,e,n){t.removeEventListener(e,n,!Sl&&JT)}function cg(t,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function V8(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function zs(t,e,n,o){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&cg(t,e):cg(t,e))||o&&t===n)return t;if(t===n)break}while(t=V8(t))}return null}var QT=/\s+/g;function ha(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(QT," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace(QT," ")}}function fr(t,e,n){var o=t&&t.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=n+(typeof n=="string"?"":"px")}}function Hh(t,e){var n="";if(typeof t=="string")n=t;else do{var o=fr(t,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(n)}function eM(t,e,n){if(t){var o=t.getElementsByTagName(e),s=0,h=o.length;if(n)for(;s<h;s++)n(o[s],s);return o}return[]}function Fs(){var t=document.scrollingElement;return t||document.documentElement}function Ni(t,e,n,o,s){if(!(!t.getBoundingClientRect&&t!==window)){var h,a,m,g,b,T,M;if(t!==window&&t.parentNode&&t!==Fs()?(h=t.getBoundingClientRect(),a=h.top,m=h.left,g=h.bottom,b=h.right,T=h.height,M=h.width):(a=0,m=0,g=window.innerHeight,b=window.innerWidth,T=window.innerHeight,M=window.innerWidth),(e||n)&&t!==window&&(s=s||t.parentNode,!Sl))do if(s&&s.getBoundingClientRect&&(fr(s,"transform")!=="none"||n&&fr(s,"position")!=="static")){var I=s.getBoundingClientRect();a-=I.top+parseInt(fr(s,"border-top-width")),m-=I.left+parseInt(fr(s,"border-left-width")),g=a+h.height,b=m+h.width;break}while(s=s.parentNode);if(o&&t!==window){var P=Hh(s||t),z=P&&P.a,V=P&&P.d;P&&(a/=V,m/=z,M/=z,T/=V,g=a+T,b=m+M)}return{top:a,left:m,bottom:g,right:b,width:M,height:T}}}function tM(t,e,n){for(var o=Cu(t,!0),s=Ni(t)[e];o;){var h=Ni(o)[n],a=void 0;if(n==="top"||n==="left"?a=s>=h:a=s<=h,!a)return o;if(o===Fs())break;o=Cu(o,!1)}return!1}function Zh(t,e,n,o){for(var s=0,h=0,a=t.children;h<a.length;){if(a[h].style.display!=="none"&&a[h]!==cr.ghost&&(o||a[h]!==cr.dragged)&&zs(a[h],n.draggable,t,!1)){if(s===e)return a[h];s++}h++}return null}function s1(t,e){for(var n=t.lastElementChild;n&&(n===cr.ghost||fr(n,"display")==="none"||e&&!cg(n,e));)n=n.previousElementSibling;return n||null}function Da(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==cr.clone&&(!e||cg(t,e))&&n++;return n}function rM(t){var e=0,n=0,o=Fs();if(t)do{var s=Hh(t),h=s.a,a=s.d;e+=t.scrollLeft*h,n+=t.scrollTop*a}while(t!==o&&(t=t.parentNode));return[e,n]}function U8(t,e){for(var n in t)if(!!t.hasOwnProperty(n)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n)}return-1}function Cu(t,e){if(!t||!t.getBoundingClientRect)return Fs();var n=t,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var s=fr(n);if(n.clientWidth<n.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Fs();if(o||e)return n;o=!0}}while(n=n.parentNode);return Fs()}function j8(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function l1(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var nd;function nM(t,e){return function(){if(!nd){var n=arguments,o=this;n.length===1?t.call(o,n[0]):t.apply(o,n),nd=setTimeout(function(){nd=void 0},e)}}}function G8(){clearTimeout(nd),nd=void 0}function iM(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function oM(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var fa="Sortable"+new Date().getTime();function $8(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(s){if(!(fr(s,"display")==="none"||s===cr.ghost)){t.push({target:s,rect:Ni(s)});var h=Rs({},t[t.length-1].rect);if(s.thisAnimationDuration){var a=Hh(s,!0);a&&(h.top-=a.f,h.left-=a.e)}s.fromRect=h}})}},addAnimationState:function(o){t.push(o)},removeAnimationState:function(o){t.splice(U8(t,{target:o}),1)},animateAll:function(o){var s=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var h=!1,a=0;t.forEach(function(m){var g=0,b=m.target,T=b.fromRect,M=Ni(b),I=b.prevFromRect,P=b.prevToRect,z=m.rect,V=Hh(b,!0);V&&(M.top-=V.f,M.left-=V.e),b.toRect=M,b.thisAnimationDuration&&l1(I,M)&&!l1(T,M)&&(z.top-M.top)/(z.left-M.left)===(T.top-M.top)/(T.left-M.left)&&(g=W8(z,I,P,s.options)),l1(M,T)||(b.prevFromRect=T,b.prevToRect=M,g||(g=s.options.animation),s.animate(b,z,M,g)),g&&(h=!0,a=Math.max(a,g),clearTimeout(b.animationResetTimer),b.animationResetTimer=setTimeout(function(){b.animationTime=0,b.prevFromRect=null,b.fromRect=null,b.prevToRect=null,b.thisAnimationDuration=null},g),b.thisAnimationDuration=g)}),clearTimeout(e),h?e=setTimeout(function(){typeof o=="function"&&o()},a):typeof o=="function"&&o(),t=[]},animate:function(o,s,h,a){if(a){fr(o,"transition",""),fr(o,"transform","");var m=Hh(this.el),g=m&&m.a,b=m&&m.d,T=(s.left-h.left)/(g||1),M=(s.top-h.top)/(b||1);o.animatingX=!!T,o.animatingY=!!M,fr(o,"transform","translate3d("+T+"px,"+M+"px,0)"),this.forRepaintDummy=q8(o),fr(o,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),fr(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){fr(o,"transition",""),fr(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},a)}}}}function q8(t){return t.offsetWidth}function W8(t,e,n,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*o.animation}var Xh=[],u1={initializeByDefault:!0},id={mount:function(e){for(var n in u1)u1.hasOwnProperty(n)&&!(n in e)&&(e[n]=u1[n]);Xh.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Xh.push(e)},pluginEvent:function(e,n,o){var s=this;this.eventCanceled=!1,o.cancel=function(){s.eventCanceled=!0};var h=e+"Global";Xh.forEach(function(a){!n[a.pluginName]||(n[a.pluginName][h]&&n[a.pluginName][h](Rs({sortable:n},o)),n.options[a.pluginName]&&n[a.pluginName][e]&&n[a.pluginName][e](Rs({sortable:n},o)))})},initializePlugins:function(e,n,o,s){Xh.forEach(function(m){var g=m.pluginName;if(!(!e.options[g]&&!m.initializeByDefault)){var b=new m(e,n,e.options);b.sortable=e,b.options=e.options,e[g]=b,wl(o,b.defaults)}});for(var h in e.options)if(!!e.options.hasOwnProperty(h)){var a=this.modifyOption(e,h,e.options[h]);typeof a<"u"&&(e.options[h]=a)}},getEventProperties:function(e,n){var o={};return Xh.forEach(function(s){typeof s.eventProperties=="function"&&wl(o,s.eventProperties.call(n[s.pluginName],e))}),o},modifyOption:function(e,n,o){var s;return Xh.forEach(function(h){!e[h.pluginName]||h.optionListeners&&typeof h.optionListeners[n]=="function"&&(s=h.optionListeners[n].call(e[h.pluginName],o))}),s}};function H8(t){var e=t.sortable,n=t.rootEl,o=t.name,s=t.targetEl,h=t.cloneEl,a=t.toEl,m=t.fromEl,g=t.oldIndex,b=t.newIndex,T=t.oldDraggableIndex,M=t.newDraggableIndex,I=t.originalEvent,P=t.putSortable,z=t.extraEventProperties;if(e=e||n&&n[fa],!!e){var V,W=e.options,Y="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Sl&&!td?V=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(V=document.createEvent("Event"),V.initEvent(o,!0,!0)),V.to=a||n,V.from=m||n,V.item=s||n,V.clone=h,V.oldIndex=g,V.newIndex=b,V.oldDraggableIndex=T,V.newDraggableIndex=M,V.originalEvent=I,V.pullMode=P?P.lastPutMode:void 0;var X=Rs(Rs({},z),id.getEventProperties(o,e));for(var ue in X)V[ue]=X[ue];n&&n.dispatchEvent(V),W[Y]&&W[Y].call(e,V)}}var Z8=["evt"],Zo=function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.evt,h=F8(o,Z8);id.pluginEvent.bind(cr)(e,n,Rs({dragEl:Et,parentEl:ui,ghostEl:Tr,rootEl:$n,nextEl:kc,lastDownEl:hg,cloneEl:Yn,cloneHidden:Au,dragStarted:ad,putSortable:ro,activeSortable:cr.active,originalEvent:s,oldIndex:Kh,oldDraggableIndex:od,newIndex:pa,newDraggableIndex:Pu,hideGhostForTarget:fM,unhideGhostForTarget:pM,cloneNowHidden:function(){Au=!0},cloneNowShown:function(){Au=!1},dispatchSortableEvent:function(m){zo({sortable:n,name:m,originalEvent:s})}},h))};function zo(t){H8(Rs({putSortable:ro,cloneEl:Yn,targetEl:Et,rootEl:$n,oldIndex:Kh,oldDraggableIndex:od,newIndex:pa,newDraggableIndex:Pu},t))}var Et,ui,Tr,$n,kc,hg,Yn,Au,Kh,pa,od,Pu,fg,ro,Yh=!1,pg=!1,dg=[],Lc,as,c1,h1,aM,sM,ad,Jh,sd,ld=!1,mg=!1,yg,vo,f1=[],p1=!1,gg=[],vg=typeof document<"u",_g=KT,lM=td||Sl?"cssFloat":"float",X8=vg&&!YT&&!KT&&"draggable"in document.createElement("div"),uM=function(){if(!!vg){if(Sl)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),cM=function(e,n){var o=fr(e),s=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),h=Zh(e,0,n),a=Zh(e,1,n),m=h&&fr(h),g=a&&fr(a),b=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+Ni(h).width,T=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+Ni(a).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(h&&m.float&&m.float!=="none"){var M=m.float==="left"?"left":"right";return a&&(g.clear==="both"||g.clear===M)?"vertical":"horizontal"}return h&&(m.display==="block"||m.display==="flex"||m.display==="table"||m.display==="grid"||b>=s&&o[lM]==="none"||a&&o[lM]==="none"&&b+T>s)?"vertical":"horizontal"},K8=function(e,n,o){var s=o?e.left:e.top,h=o?e.right:e.bottom,a=o?e.width:e.height,m=o?n.left:n.top,g=o?n.right:n.bottom,b=o?n.width:n.height;return s===m||h===g||s+a/2===m+b/2},Y8=function(e,n){var o;return dg.some(function(s){var h=s[fa].options.emptyInsertThreshold;if(!(!h||s1(s))){var a=Ni(s),m=e>=a.left-h&&e<=a.right+h,g=n>=a.top-h&&n<=a.bottom+h;if(m&&g)return o=s}}),o},hM=function(e){function n(h,a){return function(m,g,b,T){var M=m.options.group.name&&g.options.group.name&&m.options.group.name===g.options.group.name;if(h==null&&(a||M))return!0;if(h==null||h===!1)return!1;if(a&&h==="clone")return h;if(typeof h=="function")return n(h(m,g,b,T),a)(m,g,b,T);var I=(a?m:g).options.group.name;return h===!0||typeof h=="string"&&h===I||h.join&&h.indexOf(I)>-1}}var o={},s=e.group;(!s||ug(s)!="object")&&(s={name:s}),o.name=s.name,o.checkPull=n(s.pull,!0),o.checkPut=n(s.put),o.revertClone=s.revertClone,e.group=o},fM=function(){!uM&&Tr&&fr(Tr,"display","none")},pM=function(){!uM&&Tr&&fr(Tr,"display","")};vg&&!YT&&document.addEventListener("click",function(t){if(pg)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),pg=!1,!1},!0);var Dc=function(e){if(Et){e=e.touches?e.touches[0]:e;var n=Y8(e.clientX,e.clientY);if(n){var o={};for(var s in e)e.hasOwnProperty(s)&&(o[s]=e[s]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[fa]._onDragOver(o)}}},J8=function(e){Et&&Et.parentNode[fa]._isOutsideThisEl(e.target)};function cr(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=wl({},e),t[fa]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return cM(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,m){a.setData("Text",m.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:cr.supportPointer!==!1&&"PointerEvent"in window&&!rd,emptyInsertThreshold:5};id.initializePlugins(this,t,n);for(var o in n)!(o in e)&&(e[o]=n[o]);hM(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:X8,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?rn(t,"pointerdown",this._onTapStart):(rn(t,"mousedown",this._onTapStart),rn(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(rn(t,"dragover",this),rn(t,"dragenter",this)),dg.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),wl(this,$8())}cr.prototype={constructor:cr,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Jh=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Et):this.options.direction},_onTapStart:function(e){if(!!e.cancelable){var n=this,o=this.el,s=this.options,h=s.preventOnFilter,a=e.type,m=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,g=(m||e).target,b=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||g,T=s.filter;if(aV(o),!Et&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||s.disabled)&&!b.isContentEditable&&!(!this.nativeDraggable&&rd&&g&&g.tagName.toUpperCase()==="SELECT")&&(g=zs(g,s.draggable,o,!1),!(g&&g.animated)&&hg!==g)){if(Kh=Da(g),od=Da(g,s.draggable),typeof T=="function"){if(T.call(this,e,g,this)){zo({sortable:n,rootEl:b,name:"filter",targetEl:g,toEl:o,fromEl:o}),Zo("filter",n,{evt:e}),h&&e.cancelable&&e.preventDefault();return}}else if(T&&(T=T.split(",").some(function(M){if(M=zs(b,M.trim(),o,!1),M)return zo({sortable:n,rootEl:M,name:"filter",targetEl:g,fromEl:o,toEl:o}),Zo("filter",n,{evt:e}),!0}),T)){h&&e.cancelable&&e.preventDefault();return}s.handle&&!zs(b,s.handle,o,!1)||this._prepareDragStart(e,m,g)}}},_prepareDragStart:function(e,n,o){var s=this,h=s.el,a=s.options,m=h.ownerDocument,g;if(o&&!Et&&o.parentNode===h){var b=Ni(o);if($n=h,Et=o,ui=Et.parentNode,kc=Et.nextSibling,hg=o,fg=a.group,cr.dragged=Et,Lc={target:Et,clientX:(n||e).clientX,clientY:(n||e).clientY},aM=Lc.clientX-b.left,sM=Lc.clientY-b.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Et.style["will-change"]="all",g=function(){if(Zo("delayEnded",s,{evt:e}),cr.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!XT&&s.nativeDraggable&&(Et.draggable=!0),s._triggerDragStart(e,n),zo({sortable:s,name:"choose",originalEvent:e}),ha(Et,a.chosenClass,!0)},a.ignore.split(",").forEach(function(T){eM(Et,T.trim(),d1)}),rn(m,"dragover",Dc),rn(m,"mousemove",Dc),rn(m,"touchmove",Dc),rn(m,"mouseup",s._onDrop),rn(m,"touchend",s._onDrop),rn(m,"touchcancel",s._onDrop),XT&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Et.draggable=!0),Zo("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(td||Sl))){if(cr.eventCanceled){this._onDrop();return}rn(m,"mouseup",s._disableDelayedDrag),rn(m,"touchend",s._disableDelayedDrag),rn(m,"touchcancel",s._disableDelayedDrag),rn(m,"mousemove",s._delayedDragTouchMoveHandler),rn(m,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&rn(m,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(g,a.delay)}else g()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Et&&d1(Et),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Kr(e,"mouseup",this._disableDelayedDrag),Kr(e,"touchend",this._disableDelayedDrag),Kr(e,"touchcancel",this._disableDelayedDrag),Kr(e,"mousemove",this._delayedDragTouchMoveHandler),Kr(e,"touchmove",this._delayedDragTouchMoveHandler),Kr(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?rn(document,"pointermove",this._onTouchMove):n?rn(document,"touchmove",this._onTouchMove):rn(document,"mousemove",this._onTouchMove):(rn(Et,"dragend",this),rn($n,"dragstart",this._onDragStart));try{document.selection?bg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Yh=!1,$n&&Et){Zo("dragStarted",this,{evt:n}),this.nativeDraggable&&rn(document,"dragover",J8);var o=this.options;!e&&ha(Et,o.dragClass,!1),ha(Et,o.ghostClass,!0),cr.active=this,e&&this._appendGhost(),zo({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(as){this._lastX=as.clientX,this._lastY=as.clientY,fM();for(var e=document.elementFromPoint(as.clientX,as.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(as.clientX,as.clientY),e!==n);)n=e;if(Et.parentNode[fa]._isOutsideThisEl(e),n)do{if(n[fa]){var o=void 0;if(o=n[fa]._onDragOver({clientX:as.clientX,clientY:as.clientY,target:e,rootEl:n}),o&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);pM()}},_onTouchMove:function(e){if(Lc){var n=this.options,o=n.fallbackTolerance,s=n.fallbackOffset,h=e.touches?e.touches[0]:e,a=Tr&&Hh(Tr,!0),m=Tr&&a&&a.a,g=Tr&&a&&a.d,b=_g&&vo&&rM(vo),T=(h.clientX-Lc.clientX+s.x)/(m||1)+(b?b[0]-f1[0]:0)/(m||1),M=(h.clientY-Lc.clientY+s.y)/(g||1)+(b?b[1]-f1[1]:0)/(g||1);if(!cr.active&&!Yh){if(o&&Math.max(Math.abs(h.clientX-this._lastX),Math.abs(h.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(Tr){a?(a.e+=T-(c1||0),a.f+=M-(h1||0)):a={a:1,b:0,c:0,d:1,e:T,f:M};var I="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");fr(Tr,"webkitTransform",I),fr(Tr,"mozTransform",I),fr(Tr,"msTransform",I),fr(Tr,"transform",I),c1=T,h1=M,as=h}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Tr){var e=this.options.fallbackOnBody?document.body:$n,n=Ni(Et,!0,_g,!0,e),o=this.options;if(_g){for(vo=e;fr(vo,"position")==="static"&&fr(vo,"transform")==="none"&&vo!==document;)vo=vo.parentNode;vo!==document.body&&vo!==document.documentElement?(vo===document&&(vo=Fs()),n.top+=vo.scrollTop,n.left+=vo.scrollLeft):vo=Fs(),f1=rM(vo)}Tr=Et.cloneNode(!0),ha(Tr,o.ghostClass,!1),ha(Tr,o.fallbackClass,!0),ha(Tr,o.dragClass,!0),fr(Tr,"transition",""),fr(Tr,"transform",""),fr(Tr,"box-sizing","border-box"),fr(Tr,"margin",0),fr(Tr,"top",n.top),fr(Tr,"left",n.left),fr(Tr,"width",n.width),fr(Tr,"height",n.height),fr(Tr,"opacity","0.8"),fr(Tr,"position",_g?"absolute":"fixed"),fr(Tr,"zIndex","100000"),fr(Tr,"pointerEvents","none"),cr.ghost=Tr,e.appendChild(Tr),fr(Tr,"transform-origin",aM/parseInt(Tr.style.width)*100+"% "+sM/parseInt(Tr.style.height)*100+"%")}},_onDragStart:function(e,n){var o=this,s=e.dataTransfer,h=o.options;if(Zo("dragStart",this,{evt:e}),cr.eventCanceled){this._onDrop();return}Zo("setupClone",this),cr.eventCanceled||(Yn=oM(Et),Yn.removeAttribute("id"),Yn.draggable=!1,Yn.style["will-change"]="",this._hideClone(),ha(Yn,this.options.chosenClass,!1),cr.clone=Yn),o.cloneId=bg(function(){Zo("clone",o),!cr.eventCanceled&&(o.options.removeCloneOnHide||$n.insertBefore(Yn,Et),o._hideClone(),zo({sortable:o,name:"clone"}))}),!n&&ha(Et,h.dragClass,!0),n?(pg=!0,o._loopId=setInterval(o._emulateDragOver,50)):(Kr(document,"mouseup",o._onDrop),Kr(document,"touchend",o._onDrop),Kr(document,"touchcancel",o._onDrop),s&&(s.effectAllowed="move",h.setData&&h.setData.call(o,s,Et)),rn(document,"drop",o),fr(Et,"transform","translateZ(0)")),Yh=!0,o._dragStartId=bg(o._dragStarted.bind(o,n,e)),rn(document,"selectstart",o),ad=!0,rd&&fr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,o=e.target,s,h,a,m=this.options,g=m.group,b=cr.active,T=fg===g,M=m.sort,I=ro||b,P,z=this,V=!1;if(p1)return;function W(kt,rr){Zo(kt,z,Rs({evt:e,isOwner:T,axis:P?"vertical":"horizontal",revert:a,dragRect:s,targetRect:h,canSort:M,fromSortable:I,target:o,completed:X,onMove:function(zr,mr){return xg($n,n,Et,s,zr,Ni(zr),e,mr)},changed:ue},rr))}function Y(){W("dragOverAnimationCapture"),z.captureAnimationState(),z!==I&&I.captureAnimationState()}function X(kt){return W("dragOverCompleted",{insertion:kt}),kt&&(T?b._hideClone():b._showClone(z),z!==I&&(ha(Et,ro?ro.options.ghostClass:b.options.ghostClass,!1),ha(Et,m.ghostClass,!0)),ro!==z&&z!==cr.active?ro=z:z===cr.active&&ro&&(ro=null),I===z&&(z._ignoreWhileAnimating=o),z.animateAll(function(){W("dragOverAnimationComplete"),z._ignoreWhileAnimating=null}),z!==I&&(I.animateAll(),I._ignoreWhileAnimating=null)),(o===Et&&!Et.animated||o===n&&!o.animated)&&(Jh=null),!m.dragoverBubble&&!e.rootEl&&o!==document&&(Et.parentNode[fa]._isOutsideThisEl(e.target),!kt&&Dc(e)),!m.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),V=!0}function ue(){pa=Da(Et),Pu=Da(Et,m.draggable),zo({sortable:z,name:"change",toEl:n,newIndex:pa,newDraggableIndex:Pu,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=zs(o,m.draggable,n,!0),W("dragOver"),cr.eventCanceled)return V;if(Et.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||z._ignoreWhileAnimating===o)return X(!1);if(pg=!1,b&&!m.disabled&&(T?M||(a=ui!==$n):ro===this||(this.lastPutMode=fg.checkPull(this,b,Et,e))&&g.checkPut(this,b,Et,e))){if(P=this._getDirection(e,o)==="vertical",s=Ni(Et),W("dragOverValid"),cr.eventCanceled)return V;if(a)return ui=$n,Y(),this._hideClone(),W("revert"),cr.eventCanceled||(kc?$n.insertBefore(Et,kc):$n.appendChild(Et)),X(!0);var he=s1(n,m.draggable);if(!he||rV(e,P,this)&&!he.animated){if(he===Et)return X(!1);if(he&&n===e.target&&(o=he),o&&(h=Ni(o)),xg($n,n,Et,s,o,h,e,!!o)!==!1)return Y(),he&&he.nextSibling?n.insertBefore(Et,he.nextSibling):n.appendChild(Et),ui=n,ue(),X(!0)}else if(he&&tV(e,P,this)){var ve=Zh(n,0,m,!0);if(ve===Et)return X(!1);if(o=ve,h=Ni(o),xg($n,n,Et,s,o,h,e,!1)!==!1)return Y(),n.insertBefore(Et,ve),ui=n,ue(),X(!0)}else if(o.parentNode===n){h=Ni(o);var ze=0,Fe,Pe=Et.parentNode!==n,Se=!K8(Et.animated&&Et.toRect||s,o.animated&&o.toRect||h,P),Ie=P?"top":"left",Je=tM(o,"top","top")||tM(Et,"top","top"),$e=Je?Je.scrollTop:void 0;Jh!==o&&(Fe=h[Ie],ld=!1,mg=!Se&&m.invertSwap||Pe),ze=nV(e,o,h,P,Se?1:m.swapThreshold,m.invertedSwapThreshold==null?m.swapThreshold:m.invertedSwapThreshold,mg,Jh===o);var st;if(ze!==0){var be=Da(Et);do be-=ze,st=ui.children[be];while(st&&(fr(st,"display")==="none"||st===Tr))}if(ze===0||st===o)return X(!1);Jh=o,sd=ze;var Ye=o.nextElementSibling,ht=!1;ht=ze===1;var vt=xg($n,n,Et,s,o,h,e,ht);if(vt!==!1)return(vt===1||vt===-1)&&(ht=vt===1),p1=!0,setTimeout(eV,30),Y(),ht&&!Ye?n.appendChild(Et):o.parentNode.insertBefore(Et,ht?Ye:o),Je&&iM(Je,0,$e-Je.scrollTop),ui=Et.parentNode,Fe!==void 0&&!mg&&(yg=Math.abs(Fe-Ni(o)[Ie])),ue(),X(!0)}if(n.contains(Et))return X(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Kr(document,"mousemove",this._onTouchMove),Kr(document,"touchmove",this._onTouchMove),Kr(document,"pointermove",this._onTouchMove),Kr(document,"dragover",Dc),Kr(document,"mousemove",Dc),Kr(document,"touchmove",Dc)},_offUpEvents:function(){var e=this.el.ownerDocument;Kr(e,"mouseup",this._onDrop),Kr(e,"touchend",this._onDrop),Kr(e,"pointerup",this._onDrop),Kr(e,"touchcancel",this._onDrop),Kr(document,"selectstart",this)},_onDrop:function(e){var n=this.el,o=this.options;if(pa=Da(Et),Pu=Da(Et,o.draggable),Zo("drop",this,{evt:e}),ui=Et&&Et.parentNode,pa=Da(Et),Pu=Da(Et,o.draggable),cr.eventCanceled){this._nulling();return}Yh=!1,mg=!1,ld=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),m1(this.cloneId),m1(this._dragStartId),this.nativeDraggable&&(Kr(document,"drop",this),Kr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),rd&&fr(document.body,"user-select",""),fr(Et,"transform",""),e&&(ad&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),Tr&&Tr.parentNode&&Tr.parentNode.removeChild(Tr),($n===ui||ro&&ro.lastPutMode!=="clone")&&Yn&&Yn.parentNode&&Yn.parentNode.removeChild(Yn),Et&&(this.nativeDraggable&&Kr(Et,"dragend",this),d1(Et),Et.style["will-change"]="",ad&&!Yh&&ha(Et,ro?ro.options.ghostClass:this.options.ghostClass,!1),ha(Et,this.options.chosenClass,!1),zo({sortable:this,name:"unchoose",toEl:ui,newIndex:null,newDraggableIndex:null,originalEvent:e}),$n!==ui?(pa>=0&&(zo({rootEl:ui,name:"add",toEl:ui,fromEl:$n,originalEvent:e}),zo({sortable:this,name:"remove",toEl:ui,originalEvent:e}),zo({rootEl:ui,name:"sort",toEl:ui,fromEl:$n,originalEvent:e}),zo({sortable:this,name:"sort",toEl:ui,originalEvent:e})),ro&&ro.save()):pa!==Kh&&pa>=0&&(zo({sortable:this,name:"update",toEl:ui,originalEvent:e}),zo({sortable:this,name:"sort",toEl:ui,originalEvent:e})),cr.active&&((pa==null||pa===-1)&&(pa=Kh,Pu=od),zo({sortable:this,name:"end",toEl:ui,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Zo("nulling",this),$n=Et=ui=Tr=kc=Yn=hg=Au=Lc=as=ad=pa=Pu=Kh=od=Jh=sd=ro=fg=cr.dragged=cr.ghost=cr.clone=cr.active=null,gg.forEach(function(e){e.checked=!0}),gg.length=c1=h1=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Et&&(this._onDragOver(e),Q8(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,o=this.el.children,s=0,h=o.length,a=this.options;s<h;s++)n=o[s],zs(n,a.draggable,this.el,!1)&&e.push(n.getAttribute(a.dataIdAttr)||oV(n));return e},sort:function(e,n){var o={},s=this.el;this.toArray().forEach(function(h,a){var m=s.children[a];zs(m,this.options.draggable,s,!1)&&(o[h]=m)},this),n&&this.captureAnimationState(),e.forEach(function(h){o[h]&&(s.removeChild(o[h]),s.appendChild(o[h]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return zs(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var o=this.options;if(n===void 0)return o[e];var s=id.modifyOption(this,e,n);typeof s<"u"?o[e]=s:o[e]=n,e==="group"&&hM(o)},destroy:function(){Zo("destroy",this);var e=this.el;e[fa]=null,Kr(e,"mousedown",this._onTapStart),Kr(e,"touchstart",this._onTapStart),Kr(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Kr(e,"dragover",this),Kr(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),dg.splice(dg.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Au){if(Zo("hideClone",this),cr.eventCanceled)return;fr(Yn,"display","none"),this.options.removeCloneOnHide&&Yn.parentNode&&Yn.parentNode.removeChild(Yn),Au=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Au){if(Zo("showClone",this),cr.eventCanceled)return;Et.parentNode==$n&&!this.options.group.revertClone?$n.insertBefore(Yn,Et):kc?$n.insertBefore(Yn,kc):$n.appendChild(Yn),this.options.group.revertClone&&this.animate(Et,Yn),fr(Yn,"display",""),Au=!1}}};function Q8(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function xg(t,e,n,o,s,h,a,m){var g,b=t[fa],T=b.options.onMove,M;return window.CustomEvent&&!Sl&&!td?g=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent("move",!0,!0)),g.to=e,g.from=t,g.dragged=n,g.draggedRect=o,g.related=s||e,g.relatedRect=h||Ni(e),g.willInsertAfter=m,g.originalEvent=a,t.dispatchEvent(g),T&&(M=T.call(b,g,a)),M}function d1(t){t.draggable=!1}function eV(){p1=!1}function tV(t,e,n){var o=Ni(Zh(n.el,0,n.options,!0)),s=10;return e?t.clientX<o.left-s||t.clientY<o.top&&t.clientX<o.right:t.clientY<o.top-s||t.clientY<o.bottom&&t.clientX<o.left}function rV(t,e,n){var o=Ni(s1(n.el,n.options.draggable)),s=10;return e?t.clientX>o.right+s||t.clientX<=o.right&&t.clientY>o.bottom&&t.clientX>=o.left:t.clientX>o.right&&t.clientY>o.top||t.clientX<=o.right&&t.clientY>o.bottom+s}function nV(t,e,n,o,s,h,a,m){var g=o?t.clientY:t.clientX,b=o?n.height:n.width,T=o?n.top:n.left,M=o?n.bottom:n.right,I=!1;if(!a){if(m&&yg<b*s){if(!ld&&(sd===1?g>T+b*h/2:g<M-b*h/2)&&(ld=!0),ld)I=!0;else if(sd===1?g<T+yg:g>M-yg)return-sd}else if(g>T+b*(1-s)/2&&g<M-b*(1-s)/2)return iV(e)}return I=I||a,I&&(g<T+b*h/2||g>M-b*h/2)?g>T+b/2?1:-1:0}function iV(t){return Da(Et)<Da(t)?1:-1}function oV(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function aV(t){gg.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&gg.push(o)}}function bg(t){return setTimeout(t,0)}function m1(t){return clearTimeout(t)}vg&&rn(document,"touchmove",function(t){(cr.active||Yh)&&t.cancelable&&t.preventDefault()}),cr.utils={on:rn,off:Kr,css:fr,find:eM,is:function(e,n){return!!zs(e,n,e,!1)},extend:j8,throttle:nM,closest:zs,toggleClass:ha,clone:oM,index:Da,nextTick:bg,cancelNextTick:m1,detectDirection:cM,getChild:Zh},cr.get=function(t){return t[fa]},cr.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(cr.utils=Rs(Rs({},cr.utils),o.utils)),id.mount(o)})},cr.create=function(t,e){return new cr(t,e)},cr.version=B8;var Ci=[],ud,y1,g1=!1,v1,_1,wg,cd;function sV(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?rn(document,"dragover",this._handleAutoScroll):this.options.supportPointer?rn(document,"pointermove",this._handleFallbackAutoScroll):o.touches?rn(document,"touchmove",this._handleFallbackAutoScroll):rn(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?Kr(document,"dragover",this._handleAutoScroll):(Kr(document,"pointermove",this._handleFallbackAutoScroll),Kr(document,"touchmove",this._handleFallbackAutoScroll),Kr(document,"mousemove",this._handleFallbackAutoScroll)),dM(),Eg(),G8()},nulling:function(){wg=y1=ud=g1=cd=v1=_1=null,Ci.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var s=this,h=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,m=document.elementFromPoint(h,a);if(wg=n,o||this.options.forceAutoScrollFallback||td||Sl||rd){x1(n,this.options,m,o);var g=Cu(m,!0);g1&&(!cd||h!==v1||a!==_1)&&(cd&&dM(),cd=setInterval(function(){var b=Cu(document.elementFromPoint(h,a),!0);b!==g&&(g=b,Eg()),x1(n,s.options,b,o)},10),v1=h,_1=a)}else{if(!this.options.bubbleScroll||Cu(m,!0)===Fs()){Eg();return}x1(n,this.options,Cu(m,!1),!1)}}},wl(t,{pluginName:"scroll",initializeByDefault:!0})}function Eg(){Ci.forEach(function(t){clearInterval(t.pid)}),Ci=[]}function dM(){clearInterval(cd)}var x1=nM(function(t,e,n,o){if(!!e.scroll){var s=(t.touches?t.touches[0]:t).clientX,h=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,m=e.scrollSpeed,g=Fs(),b=!1,T;y1!==n&&(y1=n,Eg(),ud=e.scroll,T=e.scrollFn,ud===!0&&(ud=Cu(n,!0)));var M=0,I=ud;do{var P=I,z=Ni(P),V=z.top,W=z.bottom,Y=z.left,X=z.right,ue=z.width,he=z.height,ve=void 0,ze=void 0,Fe=P.scrollWidth,Pe=P.scrollHeight,Se=fr(P),Ie=P.scrollLeft,Je=P.scrollTop;P===g?(ve=ue<Fe&&(Se.overflowX==="auto"||Se.overflowX==="scroll"||Se.overflowX==="visible"),ze=he<Pe&&(Se.overflowY==="auto"||Se.overflowY==="scroll"||Se.overflowY==="visible")):(ve=ue<Fe&&(Se.overflowX==="auto"||Se.overflowX==="scroll"),ze=he<Pe&&(Se.overflowY==="auto"||Se.overflowY==="scroll"));var $e=ve&&(Math.abs(X-s)<=a&&Ie+ue<Fe)-(Math.abs(Y-s)<=a&&!!Ie),st=ze&&(Math.abs(W-h)<=a&&Je+he<Pe)-(Math.abs(V-h)<=a&&!!Je);if(!Ci[M])for(var be=0;be<=M;be++)Ci[be]||(Ci[be]={});(Ci[M].vx!=$e||Ci[M].vy!=st||Ci[M].el!==P)&&(Ci[M].el=P,Ci[M].vx=$e,Ci[M].vy=st,clearInterval(Ci[M].pid),($e!=0||st!=0)&&(b=!0,Ci[M].pid=setInterval(function(){o&&this.layer===0&&cr.active._onTouchMove(wg);var Ye=Ci[this.layer].vy?Ci[this.layer].vy*m:0,ht=Ci[this.layer].vx?Ci[this.layer].vx*m:0;typeof T=="function"&&T.call(cr.dragged.parentNode[fa],ht,Ye,t,wg,Ci[this.layer].el)!=="continue"||iM(Ci[this.layer].el,ht,Ye)}.bind({layer:M}),24))),M++}while(e.bubbleScroll&&I!==g&&(I=Cu(I,!1)));g1=b}},30),mM=function(e){var n=e.originalEvent,o=e.putSortable,s=e.dragEl,h=e.activeSortable,a=e.dispatchSortableEvent,m=e.hideGhostForTarget,g=e.unhideGhostForTarget;if(!!n){var b=o||h;m();var T=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,M=document.elementFromPoint(T.clientX,T.clientY);g(),b&&!b.el.contains(M)&&(a("spill"),this.onSpill({dragEl:s,putSortable:o}))}};function b1(){}b1.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var s=Zh(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(n,s):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:mM},wl(b1,{pluginName:"revertOnSpill"});function w1(){}w1.prototype={onSpill:function(e){var n=e.dragEl,o=e.putSortable,s=o||this.sortable;s.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),s.animateAll()},drop:mM},wl(w1,{pluginName:"removeOnSpill"}),cr.mount(new sV),cr.mount(w1,b1);const yM=.5,lV=!1,Sg=_c("slider",()=>{const t=li(),e=vr(yM),n=vr(lV),o=ar(()=>[...t.layers].reverse()[0]);function s(a){let m=a;a<.1?m=.1:a>.9&&(m=.9),e.value=m}function h(a){n.value=a!=null?a:!n.value}return{sliderActive:n,sliderRatio:e,sliderTopLayer:o,setRatio:s,toggleSlider:h}},{});function gM(t,e){const{t:n}=En();function o(){e==null||e.emit("clickInfo",t)}return{t:n,onClickInfo:o}}const uV={class:"lux-layer-manager-item mt-2.5"},cV=["title"],hV={class:"flex-1 text-left cursor-default"},fV=["aria-label","title"],pV=ur(or({__name:"layer-item-background",props:{showEditButton:{type:Boolean,required:!0},layer:{type:null,required:!0}},emits:["clickEdit","clickInfo"],setup(t,{emit:e}){const n=t,{t:o,onClickInfo:s}=gM(n.layer,{emit:e}),h=ar(()=>o('Display informations for "{{layerName}}"',{ns:"client",layerName:a()}));function a(){return o(n.layer.name,{ns:"client"})}return(m,g)=>(Ve(),nt("div",uV,[Re("button",{class:"fa fa-info w-3",title:ae(h),onClick:g[0]||(g[0]=(...b)=>ae(s)&&ae(s)(...b))},null,8,cV),Re("span",hV,jt(a()),1),t.showEditButton?(Ve(),nt("button",{key:0,class:"fa fa-pencil","aria-label":ae(o)("Open editor panel",{ns:"client"}),title:ae(o)("Open editor panel",{ns:"client"}),onClick:g[1]||(g[1]=b=>m.$emit("clickEdit"))},null,8,fV)):Ke("v-if",!0)]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-manager/layer-item/layer-item-background.vue"]]),dV=["id"],mV=["aria-checked","title"],yV=["id","value","aria-label"],gV=["aria-checked","aria-label"],vV=ur(or({__name:"layer-item-sub",props:{layer:{type:null,required:!0},isOpen:{type:Boolean,required:!0},isLayerComparatorOpen:{type:Boolean,required:!0},displayLayerComparatorOpen:{type:Boolean,required:!0}},emits:["changeOpacity","clickToggleLayerComparator"],setup(t,{emit:e}){var I,P,z,V;const n=t,{t:o}=En(),s=ka(),h=ar(()=>o(s.getLayerCurrentLabel(n.layer),{ns:"client"})),a=Ln(((P=(I=n.layer)==null?void 0:I.opacity)!=null?P:1)*100),m=Ln(((V=(z=n.layer)==null?void 0:z.previousOpacity)!=null?V:a.value)*100);function g(){a.value===0?a.value=m.value:(m.value=a.value,a.value=0),M()}function b(W){W.target&&(a.value=parseInt(W.target.value),M())}function T(){e("clickToggleLayerComparator",n.layer)}function M(){e("changeOpacity",n.layer,a.value)}return(W,Y)=>(Ve(),nt("div",{class:Pr(["lux-layer-manager-item-content",t.isOpen?"h-6":"h-0"]),id:`layer-manager-item-content-${t.layer.id}`},[Re("button",{class:Pr(["w-5 fa-solid",ae(a)===0?"fa-eye-slash":"fa-eye"]),role:"switch","aria-checked":ae(a)===0,title:ae(o)("Toggle layer opacity for {{layerName}}",{layerName:ae(h)}),onClick:g},null,10,mV),Re("input",{id:`${t.layer.id}-steps-range`,type:"range",min:"0",max:"100",value:ae(a),step:"25",onChange:b,class:"m-2.5 w-16 h-[5px] rounded-lg appearance-none cursor-pointer","aria-label":ae(o)("Change opacity for {{ layerName }}",{layerName:ae(h)})},null,40,yV),t.displayLayerComparatorOpen?(Ve(),nt("button",{key:0,role:"switch",class:Pr(["fa ml-auto text-sm cursor-pointer",t.isLayerComparatorOpen?"fa-adjust":"fa-circle"]),"aria-checked":t.isLayerComparatorOpen,"aria-label":ae(o)("Toggle layer comparator for {{ layerName }}",{layerName:ae(h)}),onClick:T},null,10,gV)):Ke("v-if",!0)],10,dV))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-manager/layer-item/layer-item-sub.vue"]]),_V=["min","max","value"],E1=ur(or({__name:"layer-time-datepicker",props:{minDateAllowed:{type:String,required:!1,default:""},maxDateAllowed:{type:String,required:!1,default:""},dateValue:{type:String,required:!1}},emits:["change"],setup(t,{emit:e}){const n=t,o=ar(()=>L0(n.minDateAllowed)),s=ar(()=>L0(n.maxDateAllowed));function h(a){e("change",a.target.value)}return(a,m)=>(Ve(),nt("input",{class:"lux-time-datepicker",type:"date",min:ae(o),max:ae(s),value:t.dateValue?ae(L0)(t.dateValue):"",onChange:h},null,40,_V))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-manager/layer-time/layer-time-datepicker.vue"]]),xV={class:"lux-time-slider w-full"},bV=["for"],wV=ur(or({__name:"layer-time-datepicker-value",props:{layer:{type:null,required:!0}},emits:["changeTime"],setup(t){const e=t,{t:n}=En(),o=Ln(e.layer.currentTimeMinValue);return(s,h)=>{var a,m;return Ve(),nt("div",xV,[Re("div",null,[Re("label",{for:`${t.layer.id}-time-slider-start`,class:"lux-time-slider-label"},jt(ae(n)("Date:")),9,bV),Ft(E1,{id:`${t.layer.id}-time-slider-start`,"date-value":ae(o),"min-date-allowed":(a=e.layer.time)==null?void 0:a.minValue,"max-date-allowed":(m=e.layer.time)==null?void 0:m.maxValue,onChange:h[0]||(h[0]=g=>s.$emit("changeTime",g))},null,8,["id","date-value","min-date-allowed","max-date-allowed"])])])}}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-manager/layer-time/layer-time-datepicker-value.vue"]]),EV={class:"lux-time-slider w-full"},SV=["for"],TV=["for"],MV=ur(or({__name:"layer-time-datepicker-range",props:{layer:{type:null,required:!0}},emits:["changeTime"],setup(t,{emit:e}){const n=t,{t:o}=En(),s=Ln(n.layer.currentTimeMinValue),h=Ln(n.layer.currentTimeMaxValue);function a(g){e("changeTime",g,n.layer.currentTimeMaxValue)}function m(g){e("changeTime",n.layer.currentTimeMinValue,g)}return(g,b)=>{var T,M,I,P;return Ve(),nt("div",EV,[Ke(" Date START datepicker input "),Re("div",null,[Re("label",{for:`${t.layer.id}-time-slider-start`,class:"lux-time-slider-label"},jt(ae(o)("From:")),9,SV),Ft(E1,{id:`${t.layer.id}-time-slider-start`,"date-value":ae(s),"min-date-allowed":(T=n.layer.time)==null?void 0:T.minValue,"max-date-allowed":(M=n.layer.time)==null?void 0:M.maxValue,onChange:a},null,8,["id","date-value","min-date-allowed","max-date-allowed"])]),Ke(" Date END datepicker input "),Re("div",null,[Re("label",{for:`${t.layer.id}-time-slider-end`,class:"lux-time-slider-label"},jt(ae(o)("To:")),9,TV),Ft(E1,{id:`${t.layer.id}-time-slider-end`,"date-value":ae(h),"min-date-allowed":(I=n.layer.time)==null?void 0:I.minValue,"max-date-allowed":(P=n.layer.time)==null?void 0:P.maxValue,onChange:m},null,8,["id","date-value","min-date-allowed","max-date-allowed"])])])}}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-manager/layer-time/layer-time-datepicker-range.vue"]]),IV=["onKeydown","aria-label","title"],vM=ur(or({__name:"slider-range-thumb",props:{ariaLabel:{type:String,required:!1},maxLimit:{type:Number,required:!1,default:100},minLimit:{type:Number,required:!1,default:0},selectedValue:{type:Number,required:!0}},emits:["change"],setup(t,{emit:e}){const n=t,o=vr(!1),s=vr(),h=vr(),a=ar(()=>{var X;return((X=s.value)==null?void 0:X.offsetWidth)||0}),m=ar(()=>{var X;return((X=h.value)==null?void 0:X.offsetWidth)||40}),g=vr(n.selectedValue),b=ar(()=>a.value*g.value/100-m.value/2),T=ar(()=>({left:`${b.value}px`}));au(()=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",W)}),Tn(()=>n.selectedValue,X=>{g.value=X});function M(X){g.value=Math.max(Math.min(X,100),0),e("change",g.value,o.value)}function I(){M(g.value-1)}function P(){M(g.value+1)}function z(){o.value=!0,document.addEventListener("mousemove",V),document.addEventListener("mouseup",W)}function V(X){!o.value||M(Y(X))}function W(X){o.value=!1,M(Y(X)),document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",W)}function Y(X){var he,ve;const ue=(he=s.value)!=null&&he.offsetWidth?(X.clientX-m.value*2)*100/((ve=s.value)==null?void 0:ve.offsetWidth):0;return Math.round(Math.max(Math.min(ue,n.maxLimit),n.minLimit))}return(X,ue)=>(Ve(),nt("div",{class:"w-full",role:"slider",ref_key:"elRefTrack",ref:s},[Re("button",{class:Pr(["lux-slidebar-thumb",o.value?"dragging":""]),ref_key:"elRefThumb",ref:h,style:Ql(ae(T)),onKeydown:[Es(ws(P,["stop"]),["space"]),Es(ws(P,["stop"]),["right"]),Es(ws(I,["stop"]),["left"]),Es(ws(I,["stop"]),["delete"])],onMousedown:z,onMousemove:V,onMouseup:W,"aria-label":t.ariaLabel,title:t.ariaLabel},null,46,IV)],512))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/common/slider-range/slider-range-thumb.vue"]]),OV=ur(or({__name:"slider-range-active-track",props:{selectedMinValue:{type:Number,required:!0},selectedMaxValue:{type:Number,required:!1}},emits:["change"],setup(t,{emit:e}){const n=t,o=vr(),s=vr(),h=ar(()=>o.value?Math.round(o.value.offsetWidth*n.selectedMinValue/100):0),a=ar(()=>{var T,M;let b=0;return n.selectedMaxValue!==void 0&&((T=o.value)==null?void 0:T.offsetWidth)&&(b=((M=o.value)==null?void 0:M.offsetWidth)*n.selectedMaxValue/100-h.value),Math.round(b)}),m=ar(()=>({left:`${h.value}px`,width:`${a.value}px`}));function g(b){if(o.value){const T=o.value.getBoundingClientRect().x,M=(b.clientX-T)*100/o.value.offsetWidth;e("change",M)}}return(b,T)=>(Ve(),nt("div",{ref_key:"elRefFullTrack",ref:o,class:"lux-slidebar-track"},[t.selectedMaxValue!==void 0?(Ve(),nt("div",{key:0,ref_key:"elRefSelectionTrack",ref:s,class:"lux-slidebar-track-selection",style:Ql(ae(m)),onClick:g},null,4)):Ke("v-if",!0),Re("div",{class:"lux-slidebar-track-full",onClick:g})],512))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/common/slider-range/slider-range-active-track.vue"]]),CV={class:"lux-slidebar-fake"},_M=ur(or({__name:"slider-range",props:{selectedMinValue:{type:Number,required:!0},selectedMaxValue:{type:Number,required:!1},ariaLabelMin:{type:String,required:!1},ariaLabelMax:{type:String,required:!1}},emits:["change"],setup(t,{emit:e}){const n=t,o=vr(n.selectedMinValue),s=vr(n.selectedMaxValue);function h(g,b){e("change",g,n.selectedMaxValue,b)}function a(g,b){e("change",n.selectedMinValue,g,b)}function m(g){s.value===void 0?o.value=g:g>=s.value?s.value=g:g<=n.selectedMinValue?o.value=g:Math.abs(s.value-g)<Math.abs(o.value-g)?s.value=g:o.value=g,e("change",o.value,s.value,!1)}return(g,b)=>(Ve(),nt("div",CV,[Ke(" Draggable Max thumb button "),s.value!==void 0?(Ve(),en(vM,{key:0,ariaLabel:t.ariaLabelMax,minLimit:t.selectedMinValue,selectedValue:s.value,onChange:a},null,8,["ariaLabel","minLimit","selectedValue"])):Ke("v-if",!0),Ke(" Draggable Min thumb button "),Ke(" put Min value after Max value, this is just for z-index grabbing "),Ft(vM,{ariaLabel:t.ariaLabelMin,maxLimit:t.selectedMaxValue,selectedValue:o.value,onChange:h},null,8,["ariaLabel","maxLimit","selectedValue"]),Ke(" Selection highlight "),Ft(OV,{selectedMinValue:t.selectedMinValue,selectedMaxValue:t.selectedMaxValue,onChange:m},null,8,["selectedMinValue","selectedMaxValue"])]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/common/slider-range/slider-range.vue"]]),AV={class:"lux-time-slider w-full"},PV={key:0,class:"lux-time-slider-value mr-1.5"},kV={key:1,class:"lux-time-slider-range mr-1.5"},LV={class:"lux-time-displayed-dates"},DV={key:0,class:"lux-time-start-date grow"},NV={key:1,class:"lux-time-slider-end-date grow text-right"},RV=ur(or({__name:"layer-time-slider",props:{layer:{type:null,required:!0}},emits:["changeTime"],setup(t,{emit:e}){const n=t,{t:o}=En(),s=ar(V),h=ar(()=>{var ue,he;return(ue=n.layer.time)!=null&&ue.minValue?new Date((he=n.layer.time)==null?void 0:he.minValue).getTime():0}),a=ar(()=>{var ue,he;return(ue=n.layer.time)!=null&&ue.maxValue?new Date((he=n.layer.time)==null?void 0:he.maxValue).getTime():0}),m=ar(()=>a.value-h.value),g=vr(n.layer.currentTimeMaxValue),b=vr(n.layer.currentTimeMinValue),T=ar(()=>b.value?new Date(b.value).getTime():void 0),M=ar(()=>g.value?new Date(g.value).getTime():void 0),I=ar(()=>z(T.value)),P=ar(()=>z(M.value));function z(ue){return ue?(ue-h.value)/m.value*100:0}function V(){var Ie,Je;const ue=n.layer.time,he=[];if(!ue)return;if(ue.values)return ue.values.map($e=>new Date($e).getTime());const ve=new Date(ue.minValue),ze=new Date((Ie=ue.maxValue)!=null?Ie:Date.now()),Fe=1024,Pe=new Date(ve.getTime()),Se=(Je=ue.interval)!=null?Je:XS;if(Pe.setFullYear(ve.getFullYear()+Fe*Se[0]),Pe.setMonth(ve.getMonth()+Fe*Se[1],ve.getDate()+Fe*Se[2]),Pe.setSeconds(ve.getSeconds()+Fe*Se[3]),Pe>ze)for(let $e=0;;$e++){const st=new Date(ve.getTime());if(st.setFullYear(ve.getFullYear()+$e*Se[0]),st.setMonth(ve.getMonth()+$e*Se[1],ve.getDate()+$e*Se[2]),st.setSeconds(ve.getSeconds()+$e*Se[3]),st<=ze)he.push(st.getTime());else break}return he}function W(ue){var ze;const he=ue/100*(a.value-h.value)+h.value,ve=Oz(he,{minValue:h.value,maxValue:a.value,timeValueList:s.value,timeInterval:(ze=n.layer.time)==null?void 0:ze.interval});return k0(ve)}function Y(ue,he){const ve=W(ue);if(b.value=ve,he){const ze=W(he);g.value=ze}}function X(ue,he,ve){Y(ue,he),ve||e("changeTime",b.value,g.value)}return(ue,he)=>{var ve,ze,Fe,Pe,Se,Ie,Je;return Ve(),nt("div",AV,[Ke(" Slider LayerTimeMode.VALUE "),((ve=t.layer.time)==null?void 0:ve.mode)===ae(gl).VALUE?(Ve(),nt("div",PV,[Ft(_M,{ariaLabelMin:`${ae(o)("Modifier la date de d\xE9but",{ns:"client"})}`,selectedMinValue:ae(I),onChange:X},null,8,["ariaLabelMin","selectedMinValue"])])):Ke("v-if",!0),Ke(" Slider LayerTimeMode.RANGE "),((ze=t.layer.time)==null?void 0:ze.mode)===ae(gl).RANGE?(Ve(),nt("div",kV,[Ft(_M,{ariaLabelMin:`${ae(o)("Modifier la date de d\xE9but",{ns:"client"})}`,ariaLabelMax:`${ae(o)("Modifier la date de fin",{ns:"client"})}`,selectedMinValue:ae(I),selectedMaxValue:ae(P),onChange:X},null,8,["ariaLabelMin","ariaLabelMax","selectedMinValue","selectedMaxValue"])])):Ke("v-if",!0),Ke(" Display localized time values "),Re("div",LV,[Ke(" Display localized time values Min value "),((Fe=t.layer.time)==null?void 0:Fe.mode)===ae(gl).RANGE||((Pe=t.layer.time)==null?void 0:Pe.mode)===ae(gl).VALUE?(Ve(),nt("div",DV,[Re("span",null,jt(b.value?ae(KS)(b.value,(Se=t.layer.time)==null?void 0:Se.resolution):"-"),1)])):Ke("v-if",!0),Ke(" Display localized time values Max value "),((Ie=t.layer.time)==null?void 0:Ie.mode)===ae(gl).RANGE?(Ve(),nt("div",NV,[Re("span",null,jt(g.value?ae(KS)(g.value,(Je=t.layer.time)==null?void 0:Je.resolution):"-"),1)])):Ke("v-if",!0)])])}}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-manager/layer-time/layer-time-slider.vue"]]),zV=ur(or({__name:"layer-time",props:{layer:{type:null,required:!0}},emits:["changeTime"],setup(t,{emit:e}){function n(o,s){e("changeTime",o,s)}return(o,s)=>{var h,a,m,g,b;return Ve(),nt(un,null,[Ke(" Layer time: slider widget "),((h=t.layer.time)==null?void 0:h.widget)===ae(Oy).SLIDER?(Ve(),en(RV,{key:0,layer:t.layer,onChangeTime:n},null,8,["layer"])):Ke("v-if",!0),Ke(" Layer time: datepicker VALUE (one date) widget "),((a=t.layer.time)==null?void 0:a.widget)===ae(Oy).DATEPICKER&&((m=t.layer.time)==null?void 0:m.mode)===ae(gl).VALUE?(Ve(),en(wV,{key:1,layer:t.layer,onChangeTime:n},null,8,["layer"])):Ke("v-if",!0),Ke(' Layer time: datepicker RANGE ("from:" date - "to:" date) widget '),((g=t.layer.time)==null?void 0:g.widget)===ae(Oy).DATEPICKER&&((b=t.layer.time)==null?void 0:b.mode)===ae(gl).RANGE?(Ve(),en(MV,{key:2,layer:t.layer,onChangeTime:n},null,8,["layer"])):Ke("v-if",!0)],64)}}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-manager/layer-time/layer-time.vue"]]),FV={class:"lux-layer-manager-item relative"},BV={class:"w-full flex flex-nowrap items-start gap-x-2"},VV=["title"],UV=["aria-label","title"],jV=["aria-expanded","aria-controls","data-cy"],GV={class:"grow"},$V=["title","aria-label"],xM=ur(or({__name:"layer-item",props:{is3d:{type:Boolean,required:!0},layer:{type:null,required:!0},draggableClassName:{type:String,required:!0},isOpen:{type:Boolean,required:!0},isLayerComparatorOpen:{type:Boolean,required:!0},displayLayerComparatorOpen:{type:Boolean,required:!0}},emits:["clickInfo","clickToggle","clickToggleLayerComparator","clickRemove","changeOpacity","changeTime"],setup(t,{emit:e}){const n=t,{t:o,onClickInfo:s}=gM(n.layer,{emit:e}),h=ka(),a=ar(()=>o(h.getLayerCurrentLabel(n.layer),{ns:"client"})),m=ar(()=>o('Sort "{{layerName}}" in the list',{ns:"client",layerName:a.value})),g=ar(()=>o('Display informations for "{{layerName}}"',{ns:"client",layerName:a.value})),b=ar(()=>o('Remove layer "{{layerName}}"',{ns:"client",layerName:a.value}));function T(M,I){e("changeTime",M,I)}return(M,I)=>(Ve(),nt("div",FV,[Re("div",BV,[Re("button",{class:Pr(["fa-solid fa-bars cursor-move mt-1",t.draggableClassName]),title:ae(m)},null,10,VV),Re("button",{class:"fa-solid fa-info mt-1","aria-label":ae(g),title:ae(g),onClick:I[0]||(I[0]=(...P)=>ae(s)&&ae(s)(...P))},null,8,UV),Re("button",{"aria-expanded":t.isOpen,"aria-controls":`layer-manager-item-content-${t.layer.id}`,"data-cy":`myLayerItemLabel-${t.layer.id}`,class:Pr([t.is3d?"cursor-default":"","grow text-left break-words w-[70%] flex items-center"]),onClick:I[1]||(I[1]=P=>M.$emit("clickToggle",t.layer))},[Re("span",GV,jt(ae(a)),1),t.is3d?Ke("v-if",!0):(Ve(),nt("span",{key:0,class:Pr(["w-3.5 fa-solid",t.isOpen?"fa-xmark":"fa-ellipsis"]),"aria-hidden":"true"},null,2))],10,jV),Re("button",{class:"mt-1 fa-regular fa-trash-can",title:ae(b),"aria-label":ae(b),onClick:I[2]||(I[2]=P=>M.$emit("clickRemove",t.layer))},null,8,$V)]),Ke(" Layer item sub content (opacity and toggle comparator) "),t.is3d?Ke("v-if",!0):(Ve(),en(vV,{key:0,layer:t.layer,isOpen:t.isOpen,isLayerComparatorOpen:t.isLayerComparatorOpen,displayLayerComparatorOpen:t.displayLayerComparatorOpen,onClickToggleLayerComparator:I[3]||(I[3]=P=>M.$emit("clickToggleLayerComparator",P)),onChangeOpacity:I[4]||(I[4]=(P,z)=>M.$emit("changeOpacity",P,z))},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen"])),Ke(" Layer time: slider OR datepicker widgets "),t.layer.time?(Ve(),en(zV,{key:1,layer:t.layer,onChangeTime:T},null,8,["layer"])):Ke("v-if",!0)]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-manager/layer-item/layer-item.vue"]]),qV={key:0,class:"mb-4 sortable-layers-3d"},WV=["id"],HV={class:"sortable-layers"},ZV=["id"],XV={class:"flex flex-row justify-center space-x-1 my-2"},KV=ur(or({__name:"layer-manager",emits:["displayCatalog"],setup(t,{emit:e}){const{t:n}=En(),{setMetadataId:o}=G0(),s=li(),h=gi(),a=Ic(),m=Sg(),{bgLayer:g}=cn(s),{sliderActive:b}=cn(m),T=ar(()=>[...s.layers].reverse()),M=ar(()=>[...s.layers3d].reverse()),I=Ln(),P="drag-handle",z=ar(()=>a.isLayerStyleEditable(g.value)),{setRemoteLayersOpen:V}=gi();ua(()=>{const Pe={dataIdAttr:"data-id",dragClass:"lux-sortable-drag",ghostClass:"lux-sortable-ghost",sort:!0,handle:`.${P}`},Se=document.querySelector(".sortable-layers"),Ie=document.querySelector(".sortable-layers-3d");Se&&cr.create(Se,{...Pe,onSort:W}),Ie&&cr.create(Ie,{...Pe,onSort:Y})});function W(Pe,Se){const Ie=[...Pe.to.children].map(Je=>Number(Je.id)).reverse();s.reorderLayers(Ie,Se)}function Y(Pe){W(Pe,!0)}function X(Pe,Se){s.setLayerOpacity(Pe.id,Se/100)}function ue(Pe,Se,Ie){s.setLayerTime(Pe.id,Se,Ie)}function he(Pe){s.removeLayers(Pe.id)}function ve(Pe){I.value=I.value!==Pe.id?Pe.id:void 0}function ze(){h.openStyleEditorPanel()}function Fe(){m.toggleSlider()}return(Pe,Se)=>(Ve(),nt("div",null,[ae(M).length>0?(Ve(),nt("ul",qV,[(Ve(!0),nt(un,null,Ta(ae(M),(Ie,Je)=>(Ve(),nt("li",{key:Ie.id,id:Ie.id},[Ft(xM,{is3d:!0,draggableClassName:P,layer:Ie,isOpen:ae(I)===Ie.id,isLayerComparatorOpen:ae(b),displayLayerComparatorOpen:Je===0,onClickRemove:he,onClickToggle:ve,onClickToggleLayerComparator:Fe,onClickInfo:$e=>ae(o)(Ie.id),onChangeOpacity:X,onChangeTime:($e,st)=>ue(Ie,$e,st)},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen","onClickInfo","onChangeTime"])],8,WV))),128))])):Ke("v-if",!0),Re("ul",HV,[(Ve(!0),nt(un,null,Ta(ae(T),(Ie,Je)=>(Ve(),nt("li",{key:Ie.id,id:Ie.id},[Ft(xM,{is3d:!1,draggableClassName:P,layer:Ie,isOpen:ae(I)===Ie.id,isLayerComparatorOpen:ae(b),displayLayerComparatorOpen:Je===0,onClickRemove:he,onClickToggle:ve,onClickToggleLayerComparator:Fe,onClickInfo:$e=>ae(o)(Ie.id),onChangeOpacity:X,onChangeTime:($e,st)=>ue(Ie,$e,st)},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen","onClickInfo","onChangeTime"])],8,ZV))),128))]),Ft(pV,{layer:ae(g)||ae(rg),showEditButton:ae(z),onClickInfo:Se[0]||(Se[0]=()=>ae(g)&&ae(o)(ae(g).id)),onClickEdit:ze},null,8,["layer","showEditButton"]),Re("div",XV,[Re("button",{class:"bg-white text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:Se[1]||(Se[1]=Ie=>e("displayCatalog"))},jt(ae(n)("+ Add layers",{ns:"client"})),1),Re("button",{class:"bg-white text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:Se[2]||(Se[2]=Ie=>ae(V)(!0))},jt(ae(n)("+ Add external Wms",{ns:"client"})),1)])]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-manager/layer-manager.vue"]]),YV={class:"flex flex-col h-full pt-1.5"},JV={class:"h-16 shrink-0 flex justify-between lux-panel-title"},QV=["aria-label"],eU={class:"flex flex-row gap-2 h-10 text-2xl"},tU=["aria-expanded"],rU={key:0},nU=["aria-expanded"],iU={class:"relative grow p-2.5 bg-primary overflow-auto"},bM=ur(or({__name:"layer-panel",setup(t){const{t:e}=En(),n=gi(),{setLayersOpen:o}=n,{myLayersTabOpen:s}=cn(n),{layers:h}=cn(li());function a(){n.setMyLayersTabOpen(!0)}function m(){n.setMyLayersTabOpen(!1)}return(g,b)=>(Ve(),nt("div",YV,[Ke(" Panel title and close button "),Re("div",JV,[Re("h1",null,jt(ae(e)("layers",{ns:"client"})),1),Re("span",null,[Re("button",{onClick:b[0]||(b[0]=()=>ae(o)(!1)),"aria-label":ae(e)("Close",{ns:"client"}),class:"fa-sharp fa-solid fa-close"},null,8,QV)])]),Ke(" My Layers and Catalog tab labels "),Re("div",eU,[Re("button",{onClick:a,class:Pr(["text-white px-4 hover:bg-primary cursor-pointer text-center uppercase",ae(s)?"bg-primary":"bg-tertiary"]),"aria-expanded":ae(s)},[Hm(jt(ae(e)("my_layers",{ns:"client"}))+" ",1),ae(h).length?(Ve(),nt("span",rU,"("+jt(ae(h).length)+")",1)):Ke("v-if",!0)],10,tU),Re("button",{onClick:m,class:Pr(["text-white px-4 hover:bg-primary cursor-pointer text-center uppercase",ae(s)?"bg-tertiary":"bg-primary"]),"aria-expanded":!ae(s)},jt(ae(e)("Catalog",{ns:"client"})),11,nU)]),Ke(" Panel content (MyLayers and Catalog) "),Re("div",iU,[ae(s)?(Ve(),en(KV,{key:0,onDisplayCatalog:m})):Ke("v-if",!0),ae(s)?Ke("v-if",!0):(Ve(),en(N8,{key:1}))])]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/layer-panel/layer-panel.vue"]]);class oU{bootstrap(){let e;e=la(()=>{this.restore(),this.persist(),e&&e()})}persist(){const e=Sg();Tn([()=>e.sliderActive,()=>e.sliderRatio],([n,o],[s])=>{n!==s&&Or.setValue(R0,n),Or.setValue(z0,o)})}restore(){const e=Or.getValue(R0,D0),n=Or.getValue(z0,$h),{toggleSlider:o,setRatio:s}=Sg();typeof e<"u"&&e!==null&&(o(e),typeof n!==void 0&&n!==null&&s(n!=null?n:yM))}}const aU=new oU,sU=["onKeydown"],lU=Re("span",{class:"lux-slider-line"},null,-1),uU=Re("span",{class:"lux-slider-arrows"},[Re("span"),Re("span")],-1),cU={key:0,class:"lux-slider-layer-label"},hU=Re("i",{class:"fa fa-arrow-left mr-2"},null,-1),fU=ur(or({__name:"splitter-element",props:{sliderActive:{type:Boolean,required:!0},sliderRatio:{type:Number,required:!0},sliderTopLayer:{type:null,required:!0},sliderOffset:{type:Number,required:!0},containerOffset:{type:Number,required:!0}},emits:["moveSplitBar","escSplitBar"],setup(t,{expose:e,emit:n}){const o=t,s=30,{t:h}=En(),a=vr(null),m=ar(()=>({left:`${o.sliderOffset}px`}));let g=!1;e({sliderElement:a});function b(W){n("moveSplitBar",W+a.value.offsetWidth/2)}function T(){g=!0,document.addEventListener("mousemove",M),document.addEventListener("mouseup",I)}function M(W){!g||b(W.clientX-o.containerOffset)}function I(){g=!1,document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",I)}function P(){b(a.value.offsetLeft+s)}function z(){b(a.value.offsetLeft-s)}function V(){n("escSplitBar")}return ua(()=>{var W;(W=a.value)==null||W.focus({focusVisible:!0})}),au(()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",I)}),(W,Y)=>(Ve(),nt("button",{ref_key:"sliderElement",ref:a,onMousedown:T,onMousemove:M,onMouseup:I,onKeydown:[Es(ws(P,["stop"]),["space"]),Es(ws(P,["stop"]),["right"]),Es(ws(z,["stop"]),["left"]),Es(ws(z,["stop"]),["delete"]),Es(ws(V,["stop"]),["esc"])],class:"left-[20px] absolute h-full w-[32px] block",style:Ql(ae(m)),role:"seperator","aria-controls":"map-container"},[lU,uU,t.sliderTopLayer?(Ve(),nt("span",cU,[hU,Re("span",null,jt(ae(h)(t.sliderTopLayer.name)),1)])):Ke("v-if",!0)],44,sU))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/slider/splitter-element.vue"]]),wM=ur(or({__name:"slider-comparator",setup(t){const e=Sg(),n=U0(),o=Os().olMap,s=vr(null),{sliderActive:h,sliderRatio:a,sliderTopLayer:m}=cn(e),g=ar(()=>{var Y,X;return((X=(Y=s.value)==null?void 0:Y.sliderElement)==null?void 0:X.offsetWidth)||0}),b=ar(()=>{var Y,X;return o.value&&s.value?a.value*o.value.getSize()[0]-((X=(Y=s.value)==null?void 0:Y.sliderElement)==null?void 0:X.offsetWidth)/2+o.value.getViewport().offsetLeft:0});let T,M,I;aU.bootstrap(),Tn([m,h],([Y,X],[ue])=>{var he;Y&&X?(Y!==ue&&z(),P()):z(),(he=o.value)==null||he.render()}),Tn(b,()=>{var Y;(Y=o.value)==null||Y.render()});function P(){const Y=n.getLayerFromCache(m.value);!Y||(T=Y.on(Tx.default.PRERENDER,function(X){var Ie;const ue=X.context,he=(Ie=o.value)==null?void 0:Ie.getSize(),ve=b.value+g.value/2,ze=cm.getRenderPixel(X,[0,0]),Fe=cm.getRenderPixel(X,[ve,0]),Pe=cm.getRenderPixel(X,[0,he[1]]),Se=cm.getRenderPixel(X,[ve,he[0]]);ue.save(),ue.beginPath(),ue.moveTo(ze[0],ze[1]),ue.lineTo(Pe[0],Pe[1]),ue.lineTo(Se[0],Se[1]),ue.lineTo(Fe[0],Fe[1]),ue.closePath(),ue.clip()}),M=Y.on(Tx.default.POSTRENDER,function(X){X.context.restore()}))}function z(){TO.unByKey([T,M])}function V(Y){var he;const X=(he=o.value)==null?void 0:he.getSize(),ue=Y/X[0];e.setRatio(ue)}function W(){e.toggleSlider()}return ua(()=>{var Y,X;I=(X=(Y=o.value)==null?void 0:Y.getTargetElement())==null?void 0:X.closest(".map-wrapper")}),au(()=>{z()}),(Y,X)=>{var ue;return ae(m)&&ae(h)?(Ve(),en(fU,{key:0,ref_key:"splitterElement",ref:s,sliderActive:ae(h),sliderRatio:ae(a),sliderTopLayer:ae(m),sliderOffset:ae(b),containerOffset:((ue=ae(I))==null?void 0:ue.offsetLeft)||0,onMoveSplitBar:V,onEscSplitBar:W},null,8,["sliderActive","sliderRatio","sliderTopLayer","sliderOffset","containerOffset"])):Ke("v-if",!0)}}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/slider/slider-comparator.vue"]]),Tg="-",S1=",",EM="--";class pU{constructor(){Ti(this,"layersOpacitiesToNumbersV2",e=>this.layersOpacitiesToNumbers(e,S1))}layerTimesToStrings(e){return e?e.split(EM):[]}layerIdsToLayers(e){const n=wu(),o=ka();return(e?e.split(Tg):[]).map(h=>{const a=Pc.isRemoteLayer(h)?sB(h):n.findById(parseInt(h,10));return a?o.initLayer(a):void 0})}layerNamesToLayersV2(e){const n=wu(),o=ka();return(e?e.split(S1):[]).map(h=>{const a=n.findByName(h);return a?o.initLayer(a):void 0})}layersOpacitiesToNumbers(e,n=Tg){return Dz(e,n)}layersVisibilitiesToBooleansV2(e){return Nz(e,S1)}layersToLayerIds(e){return(e==null?void 0:e.map(n=>n.id).join(Tg))||""}layersToLayerOpacities(e){return(e==null?void 0:e.map(n=>{var o;return(o=n.opacity)!=null?o:1}).join(Tg))||""}layersToLayerTimes(e){return(e==null?void 0:e.map(n=>{var o;return(o=ka().getLayerCurrentTime(n))!=null?o:""}).join(EM))||""}bgLayerNameToBgLayer(e){const n=wu();return e?n.findBgLayerByName(e):null}bgLayerToBgLayerName(e){return(e==null?void 0:e.name)||rg.name}}const da=new pU,dU="basemap_2015_global",mU="orthogr_2013_global",yU={webbasemap:"basemap_2015_global","pixelmaps-color":"topogr_global","pixelmaps-gray":"topo_bw_jpeg",streets:"streets_jpeg",voidlayer:"blank"};class gU{bootstrap(){const e=yo();let n;n=la(()=>{e.bgLayers.length>0&&(this.restore(),this.persist(),n&&n())})}persist(){const e=li(),{bgLayer:n}=cn(e);Tn(n,(o,s)=>{s!==o&&Or.setValue(tT,o,da.bgLayerToBgLayerName)},{immediate:!0})}restore(){const{setMapBackground:e}=j0(),n=this.getBgLayerFromStorage();e(n)}getBgLayerFromStorage(){const e=Or.getInitialVersion(),n=Or.getValue(tT);return n?e===2?this.getBgLayerFromStorageV2(n):da.bgLayerNameToBgLayer(n):da.bgLayerNameToBgLayer(dU)}getBgLayerFromStorageV2(e){const n=Or.getValue(lT,$h);let o="";return e?o=yU[e]:n===0&&(o=mU),da.bgLayerNameToBgLayer(o)}}const SM=new gU;class vU{bootstrap(){const e=yo();let n;n=la(()=>{e.themes&&(this.restore(),this.persist(),n&&n())})}persist(){const e=li(),{layers:n}=cn(e);Tn(n,(o,s)=>{s!==o&&(Or.setValue(eT,o,da.layersToLayerIds),Or.setValue(rT,o,da.layersToLayerOpacities),Or.setValue(nT,o,da.layersToLayerTimes))},{immediate:!0})}restore(){const e=Or.getInitialVersion(),n=li(),o=Or.getValue(eT,e===2?da.layerNamesToLayersV2:da.layerIdsToLayers);this.restoreLayersOpacities(o,e),this.restoreLayersTimes(o),e===2&&(Or.removeItem(lT),Or.removeItem(Fz),Or.removeItem(uT),Or.removeItem(cT)),n.addLayers(...(o==null?void 0:o.filter(s=>s))||[])}restoreLayersOpacities(e,n){const o=n===2?this.getOpacitiesFromStorageV2():this.getOpacitiesFromStorage();o.length&&(e==null||e.forEach((s,h)=>{var a;return s&&(s.opacity=(a=o[h])!=null?a:1)}))}restoreLayersTimes(e){const n=Or.getValue(nT,da.layerTimesToStrings);n.length&&(e==null||e.forEach((o,s)=>o&&n[s]&&this.restoreLayerTime(o,n[s])))}restoreLayerTime(e,n){const o=n.split("/");e.currentTimeMinValue=o[0],e.currentTimeMaxValue=o[1]}getOpacitiesFromStorage(){return Or.getValue(rT,da.layersOpacitiesToNumbers)}getOpacitiesFromStorageV2(){const e=Or.getValue(uT,da.layersOpacitiesToNumbersV2),n=Or.getValue(cT,da.layersVisibilitiesToBooleansV2);return e.map((o,s)=>n[s]?o:0)}}const TM=new vU;class _U{themeToThemeName(e){return(e==null?void 0:e.name)||""}}const xU=new _U;class bU{bootstrap(){this.restore();let e;e=la(()=>{this.persist(),e&&e()})}persist(){const e=yo();Tn(()=>e.theme,(n,o)=>{o!==n&&n&&Or.setValue(Yp,n,xU.themeToThemeName)},{immediate:!0})}restore(){const e=Or.getValue(Yp);if(e){const{setTheme:n}=yo();n(e)}}}const MM=new bU;class wU{bootstrapLayersOpen(){this.restoreLayersOpen();let e;e=la(()=>{this.persistLayersOpen(),e&&e()})}persistLayersOpen(){const e=gi(),{layersOpen:n}=cn(e);Tn(n,(o,s)=>{s!==o&&Or.setValue(Xy,o)},{immediate:!0})}restoreLayersOpen(){const e=Or.getValue(Xy)!=="false",{setLayersOpen:n}=gi();n(e)}}const IM=new wU;class EU{bootstrap(){this.restore();let e;e=la(()=>{this.persist(),e&&e()})}persist(){}restore(){const e=Or.getValue(Rz);gi().setMapId(e)}}const OM=new EU;function T1(t){return T1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T1(t)}var CM=[],SU=CM.forEach,TU=CM.slice;function M1(t){return SU.call(TU.call(arguments,1),function(e){if(e)for(var n in e)t[n]===void 0&&(t[n]=e[n])}),t}function AM(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":T1(XMLHttpRequest))==="object"}function MU(t){return!!t&&typeof t.then=="function"}function IU(t){return MU(t)?t:Promise.resolve(t)}function OU(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mg={exports:{}},Ig={exports:{}},PM;function CU(){return PM||(PM=1,function(t,e){var n=typeof self<"u"?self:Ds,o=function(){function h(){this.fetch=!1,this.DOMException=n.DOMException}return h.prototype=n,new h}();(function(h){(function(a){var m={searchParams:"URLSearchParams"in h,iterable:"Symbol"in h&&"iterator"in Symbol,blob:"FileReader"in h&&"Blob"in h&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in h,arrayBuffer:"ArrayBuffer"in h};function g(be){return be&&DataView.prototype.isPrototypeOf(be)}if(m.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],T=ArrayBuffer.isView||function(be){return be&&b.indexOf(Object.prototype.toString.call(be))>-1};function M(be){if(typeof be!="string"&&(be=String(be)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(be))throw new TypeError("Invalid character in header field name");return be.toLowerCase()}function I(be){return typeof be!="string"&&(be=String(be)),be}function P(be){var Ye={next:function(){var ht=be.shift();return{done:ht===void 0,value:ht}}};return m.iterable&&(Ye[Symbol.iterator]=function(){return Ye}),Ye}function z(be){this.map={},be instanceof z?be.forEach(function(Ye,ht){this.append(ht,Ye)},this):Array.isArray(be)?be.forEach(function(Ye){this.append(Ye[0],Ye[1])},this):be&&Object.getOwnPropertyNames(be).forEach(function(Ye){this.append(Ye,be[Ye])},this)}z.prototype.append=function(be,Ye){be=M(be),Ye=I(Ye);var ht=this.map[be];this.map[be]=ht?ht+", "+Ye:Ye},z.prototype.delete=function(be){delete this.map[M(be)]},z.prototype.get=function(be){return be=M(be),this.has(be)?this.map[be]:null},z.prototype.has=function(be){return this.map.hasOwnProperty(M(be))},z.prototype.set=function(be,Ye){this.map[M(be)]=I(Ye)},z.prototype.forEach=function(be,Ye){for(var ht in this.map)this.map.hasOwnProperty(ht)&&be.call(Ye,this.map[ht],ht,this)},z.prototype.keys=function(){var be=[];return this.forEach(function(Ye,ht){be.push(ht)}),P(be)},z.prototype.values=function(){var be=[];return this.forEach(function(Ye){be.push(Ye)}),P(be)},z.prototype.entries=function(){var be=[];return this.forEach(function(Ye,ht){be.push([ht,Ye])}),P(be)},m.iterable&&(z.prototype[Symbol.iterator]=z.prototype.entries);function V(be){if(be.bodyUsed)return Promise.reject(new TypeError("Already read"));be.bodyUsed=!0}function W(be){return new Promise(function(Ye,ht){be.onload=function(){Ye(be.result)},be.onerror=function(){ht(be.error)}})}function Y(be){var Ye=new FileReader,ht=W(Ye);return Ye.readAsArrayBuffer(be),ht}function X(be){var Ye=new FileReader,ht=W(Ye);return Ye.readAsText(be),ht}function ue(be){for(var Ye=new Uint8Array(be),ht=new Array(Ye.length),vt=0;vt<Ye.length;vt++)ht[vt]=String.fromCharCode(Ye[vt]);return ht.join("")}function he(be){if(be.slice)return be.slice(0);var Ye=new Uint8Array(be.byteLength);return Ye.set(new Uint8Array(be)),Ye.buffer}function ve(){return this.bodyUsed=!1,this._initBody=function(be){this._bodyInit=be,be?typeof be=="string"?this._bodyText=be:m.blob&&Blob.prototype.isPrototypeOf(be)?this._bodyBlob=be:m.formData&&FormData.prototype.isPrototypeOf(be)?this._bodyFormData=be:m.searchParams&&URLSearchParams.prototype.isPrototypeOf(be)?this._bodyText=be.toString():m.arrayBuffer&&m.blob&&g(be)?(this._bodyArrayBuffer=he(be.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):m.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(be)||T(be))?this._bodyArrayBuffer=he(be):this._bodyText=be=Object.prototype.toString.call(be):this._bodyText="",this.headers.get("content-type")||(typeof be=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(be)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var be=V(this);if(be)return be;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?V(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Y)}),this.text=function(){var be=V(this);if(be)return be;if(this._bodyBlob)return X(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ue(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(Se)}),this.json=function(){return this.text().then(JSON.parse)},this}var ze=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Fe(be){var Ye=be.toUpperCase();return ze.indexOf(Ye)>-1?Ye:be}function Pe(be,Ye){Ye=Ye||{};var ht=Ye.body;if(be instanceof Pe){if(be.bodyUsed)throw new TypeError("Already read");this.url=be.url,this.credentials=be.credentials,Ye.headers||(this.headers=new z(be.headers)),this.method=be.method,this.mode=be.mode,this.signal=be.signal,!ht&&be._bodyInit!=null&&(ht=be._bodyInit,be.bodyUsed=!0)}else this.url=String(be);if(this.credentials=Ye.credentials||this.credentials||"same-origin",(Ye.headers||!this.headers)&&(this.headers=new z(Ye.headers)),this.method=Fe(Ye.method||this.method||"GET"),this.mode=Ye.mode||this.mode||null,this.signal=Ye.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ht)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ht)}Pe.prototype.clone=function(){return new Pe(this,{body:this._bodyInit})};function Se(be){var Ye=new FormData;return be.trim().split("&").forEach(function(ht){if(ht){var vt=ht.split("="),kt=vt.shift().replace(/\+/g," "),rr=vt.join("=").replace(/\+/g," ");Ye.append(decodeURIComponent(kt),decodeURIComponent(rr))}}),Ye}function Ie(be){var Ye=new z,ht=be.replace(/\r?\n[\t ]+/g," ");return ht.split(/\r?\n/).forEach(function(vt){var kt=vt.split(":"),rr=kt.shift().trim();if(rr){var Nn=kt.join(":").trim();Ye.append(rr,Nn)}}),Ye}ve.call(Pe.prototype);function Je(be,Ye){Ye||(Ye={}),this.type="default",this.status=Ye.status===void 0?200:Ye.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Ye?Ye.statusText:"OK",this.headers=new z(Ye.headers),this.url=Ye.url||"",this._initBody(be)}ve.call(Je.prototype),Je.prototype.clone=function(){return new Je(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new z(this.headers),url:this.url})},Je.error=function(){var be=new Je(null,{status:0,statusText:""});return be.type="error",be};var $e=[301,302,303,307,308];Je.redirect=function(be,Ye){if($e.indexOf(Ye)===-1)throw new RangeError("Invalid status code");return new Je(null,{status:Ye,headers:{location:be}})},a.DOMException=h.DOMException;try{new a.DOMException}catch{a.DOMException=function(Ye,ht){this.message=Ye,this.name=ht;var vt=Error(Ye);this.stack=vt.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function st(be,Ye){return new Promise(function(ht,vt){var kt=new Pe(be,Ye);if(kt.signal&&kt.signal.aborted)return vt(new a.DOMException("Aborted","AbortError"));var rr=new XMLHttpRequest;function Nn(){rr.abort()}rr.onload=function(){var zr={status:rr.status,statusText:rr.statusText,headers:Ie(rr.getAllResponseHeaders()||"")};zr.url="responseURL"in rr?rr.responseURL:zr.headers.get("X-Request-URL");var mr="response"in rr?rr.response:rr.responseText;ht(new Je(mr,zr))},rr.onerror=function(){vt(new TypeError("Network request failed"))},rr.ontimeout=function(){vt(new TypeError("Network request failed"))},rr.onabort=function(){vt(new a.DOMException("Aborted","AbortError"))},rr.open(kt.method,kt.url,!0),kt.credentials==="include"?rr.withCredentials=!0:kt.credentials==="omit"&&(rr.withCredentials=!1),"responseType"in rr&&m.blob&&(rr.responseType="blob"),kt.headers.forEach(function(zr,mr){rr.setRequestHeader(mr,zr)}),kt.signal&&(kt.signal.addEventListener("abort",Nn),rr.onreadystatechange=function(){rr.readyState===4&&kt.signal.removeEventListener("abort",Nn)}),rr.send(typeof kt._bodyInit>"u"?null:kt._bodyInit)})}return st.polyfill=!0,h.fetch||(h.fetch=st,h.Headers=z,h.Request=Pe,h.Response=Je),a.Headers=z,a.Request=Pe,a.Response=Je,a.fetch=st,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var s=o;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}(Ig,Ig.exports)),Ig.exports}(function(t,e){var n;if(typeof fetch=="function"&&(typeof Ds<"u"&&Ds.fetch?n=Ds.fetch:typeof window<"u"&&window.fetch?n=window.fetch:n=fetch),typeof OU<"u"&&(typeof window>"u"||typeof window.document>"u")){var o=n||CU();o.default&&(o=o.default),e.default=o,t.exports=e.default}})(Mg,Mg.exports);const kM=Mg.exports,LM=CO({__proto__:null,default:kM},[Mg.exports]);function Og(t){return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}var Tl;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?Tl=global.fetch:typeof window<"u"&&window.fetch?Tl=window.fetch:Tl=fetch);var hd;AM()&&(typeof global<"u"&&global.XMLHttpRequest?hd=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(hd=window.XMLHttpRequest));var Cg;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?Cg=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(Cg=window.ActiveXObject)),!Tl&&LM&&!hd&&!Cg&&(Tl=kM||LM),typeof Tl!="function"&&(Tl=void 0);var I1=function(e,n){if(n&&Og(n)==="object"){var o="";for(var s in n)o+="&"+encodeURIComponent(s)+"="+encodeURIComponent(n[s]);if(!o)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+o.slice(1)}return e},DM=function(e,n,o){Tl(e,n).then(function(s){if(!s.ok)return o(s.statusText||"Error",{status:s.status});s.text().then(function(h){o(null,{status:s.status,data:h})}).catch(o)}).catch(o)},NM=!1,AU=function(e,n,o,s){e.queryStringParams&&(n=I1(n,e.queryStringParams));var h=M1({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);o&&(h["Content-Type"]="application/json");var a=typeof e.requestOptions=="function"?e.requestOptions(o):e.requestOptions,m=M1({method:o?"POST":"GET",body:o?e.stringify(o):void 0,headers:h},NM?{}:a);try{DM(n,m,s)}catch(g){if(!a||Object.keys(a).length===0||!g.message||g.message.indexOf("not implemented")<0)return s(g);try{Object.keys(a).forEach(function(b){delete m[b]}),DM(n,m,s),NM=!0}catch(b){s(b)}}},PU=function(e,n,o,s){o&&Og(o)==="object"&&(o=I1("",o).slice(1)),e.queryStringParams&&(n=I1(n,e.queryStringParams));try{var h;hd?h=new hd:h=new Cg("MSXML2.XMLHTTP.3.0"),h.open(o?"POST":"GET",n,1),e.crossDomain||h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.withCredentials=!!e.withCredentials,o&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.overrideMimeType&&h.overrideMimeType("application/json");var a=e.customHeaders;if(a=typeof a=="function"?a():a,a)for(var m in a)h.setRequestHeader(m,a[m]);h.onreadystatechange=function(){h.readyState>3&&s(h.status>=400?h.statusText:null,{status:h.status,data:h.responseText})},h.send(o)}catch(g){console&&console.log(g)}},kU=function(e,n,o,s){if(typeof o=="function"&&(s=o,o=void 0),s=s||function(){},Tl&&n.indexOf("file:")!==0)return AU(e,n,o,s);if(AM()||typeof ActiveXObject=="function")return PU(e,n,o,s);s(new Error("No fetch and no xhr implementation found!"))};function fd(t){return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fd(t)}function LU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RM(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,zM(o.key),o)}}function DU(t,e,n){return e&&RM(t.prototype,e),n&&RM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function NU(t,e,n){return e=zM(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zM(t){var e=RU(t,"string");return fd(e)==="symbol"?e:String(e)}function RU(t,e){if(fd(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e||"default");if(fd(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zU=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,o,s){return NU({},o,s||"")},request:kU,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},O1=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};LU(this,t),this.services=e,this.options=n,this.allOptions=o,this.type="backend",this.init(e,n,o)}return DU(t,[{key:"init",value:function(n){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=M1(s,this.options||{},zU()),this.allOptions=h,this.services&&this.options.reloadInterval&&setInterval(function(){return o.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(n,o,s){this._readAny(n,n,o,o,s)}},{key:"read",value:function(n,o,s){this._readAny([n],n,[o],o,s)}},{key:"_readAny",value:function(n,o,s,h,a){var m=this,g=this.options.loadPath;typeof this.options.loadPath=="function"&&(g=this.options.loadPath(n,s)),g=IU(g),g.then(function(b){if(!b)return a(null,{});var T=m.services.interpolator.interpolate(b,{lng:n.join("+"),ns:s.join("+")});m.loadUrl(T,a,o,h)})}},{key:"loadUrl",value:function(n,o,s,h){var a=this;this.options.request(this.options,n,void 0,function(m,g){if(g&&(g.status>=500&&g.status<600||!g.status))return o("failed loading "+n+"; status code: "+g.status,!0);if(g&&g.status>=400&&g.status<500)return o("failed loading "+n+"; status code: "+g.status,!1);if(!g&&m&&m.message&&m.message.indexOf("Failed to fetch")>-1)return o("failed loading "+n+": "+m.message,!0);if(m)return o(m,!1);var b,T;try{typeof g.data=="string"?b=a.options.parse(g.data,s,h):b=g.data}catch{T="failed parsing "+n+" to json"}if(T)return o(T,!1);o(null,b)})}},{key:"create",value:function(n,o,s,h,a){var m=this;if(!!this.options.addPath){typeof n=="string"&&(n=[n]);var g=this.options.parsePayload(o,s,h),b=0,T=[],M=[];n.forEach(function(I){var P=m.options.addPath;typeof m.options.addPath=="function"&&(P=m.options.addPath(I,o));var z=m.services.interpolator.interpolate(P,{lng:I,ns:o});m.options.request(m.options,z,g,function(V,W){b+=1,T.push(V),M.push(W),b===n.length&&typeof a=="function"&&a(T,M)})})}}},{key:"reload",value:function(){var n=this,o=this.services,s=o.backendConnector,h=o.languageUtils,a=o.logger,m=s.language;if(!(m&&m.toLowerCase()==="cimode")){var g=[],b=function(M){var I=h.toResolveHierarchy(M);I.forEach(function(P){g.indexOf(P)<0&&g.push(P)})};b(m),this.allOptions.preload&&this.allOptions.preload.forEach(function(T){return b(T)}),g.forEach(function(T){n.allOptions.ns.forEach(function(M){s.read(T,M,"read",null,null,function(I,P){I&&a.warn("loading namespace ".concat(M," for language ").concat(T," failed"),I),!I&&P&&a.log("loaded namespace ".concat(M," for language ").concat(T),P),s.loaded("".concat(T,"|").concat(M),I,P)})})})}}}]),t}();O1.type="backend";const FU=ur(or({__name:"simple-style-item",props:{styleName:{type:String,required:!0},colors:{type:Array,required:!0}},setup(t){const e=t;return(n,o)=>(Ve(!0),nt(un,null,Ta(e.colors,(s,h)=>(Ve(),nt("span",{key:`${t.styleName}-${h}`,class:"grow m-px",style:Ql(`background-color: ${s}`)}," \xA0 ",4))),128))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/style-selector/simple-style-item.vue"]]),BU={class:"text-white border-2 p-[10px] m-[10px]"},VU={class:"text-center mb-3"},UU=["title"],jU={class:"text-white"},GU=["title","onClick"],$U={class:"flex"},qU=ur(or({__name:"simple-style-selector",setup(t){const{t:e}=En(),n=os(),o=Ic(),{bgStyle:s}=cn(n),h=is().simple_styles.road,a=vr(h);Tn(s,g=>a.value=o.checkSelection(g||[],h),{immediate:!0});function m(g){n.setSimpleStyle(g)}return(g,b)=>(Ve(),nt("div",BU,[Ke(" TODO: create clean container for simple and advanced style editors "),Re("h5",VU,jt(ae(e)("Select a style",{ns:"client"})),1),(Ve(!0),nt(un,null,Ta(a.value,T=>(Ve(),nt("div",{key:T.unlocalized_label,title:ae(e)(T.unlocalized_label,{ns:"client"}),class:Pr(`${T.selected?"border-dotted":"border-hidden"} border-2 p-px`)},[Re("span",jU,jt(ae(e)(T.unlocalized_label,{ns:"client"}))+" : ",1),Re("button",{title:ae(e)("Select style: {{styleName}}",{styleName:ae(e)(T.unlocalized_label)}),onClick:M=>m(T),class:"w-full"},[Re("span",$U,[Ft(FU,{colors:T.colors,"style-name":T.unlocalized_label},null,8,["colors","style-name"])])],8,GU)],10,UU))),128))]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/style-selector/simple-style-selector.vue"]]);function WU(t){const e=HU(t);return!e||!e.medium_style_class?[]:is().medium_default_styles[e.medium_style_class]}function HU(t){return is().bg_layers.find(e=>e.id==(t==null?void 0:t.id))}const ZU={class:"flex w-full items-center"},XU={for:"colorId",class:"w-40"},KU={class:"grow"},YU=["value"],JU=["checked","aria-label"],QU=ur(or({__name:"medium-style-item",props:{style:{type:null,required:!0},colorEditable:{type:Boolean,required:!0}},emits:["changeStyle"],setup(t,{emit:e}){const n=t,{t:o}=En();function s(a){if(a.target){const m={...n.style,color:a.target.value};e("changeStyle",m)}}function h(a){if(a){const m={...n.style,visible:a.target.checked};e("changeStyle",m)}}return(a,m)=>(Ve(),nt("div",ZU,[Re("label",XU,jt(ae(o)(t.style.label)),1),Re("div",KU,[t.colorEditable&&n.style.color?(Ve(),nt("input",{key:0,id:"colorId",type:"color",class:"w-11 h-5 py-[1px] px-[2px]",value:n.style.color,onInput:s},null,40,YU)):Ke("v-if",!0)]),Re("input",{type:"checkbox",class:"flex-none mr-3",checked:n.style.visible,onChange:h,"aria-label":ae(o)("Show or hide {{ thematicName }}",{thematicName:n.style.label})},null,40,JU)]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/style-selector/medium-style-item.vue"]]),ej={class:"text-white border-2 p-[10px] m-[10px]"},tj={class:"text-center mb-3"},rj=ur(or({__name:"medium-style-selector",props:{layer:{type:null,required:!0}},setup(t){const e=t,n=["basemap_2015_global"],o=os(),{bgStyle:s}=cn(o),{t:h}=En(),a=ar(()=>n.includes(e.layer.name)),m=ar(()=>s.value||WU(e.layer));function g(b,T){s.value=m.value.map((M,I)=>I===b?T:M),o.disableExpertStyle()}return(b,T)=>(Ve(),nt("div",ej,[Re("h5",tj,jt(ae(a)?ae(h)("Select a colour for every theme"):ae(h)("Activate categories")),1),(Ve(!0),nt(un,null,Ta(ae(m),(M,I)=>(Ve(),en(QU,{key:M.label,style:Ql(M),onChangeStyle:P=>g(I,P),colorEditable:ae(a)},null,8,["style","onChangeStyle","colorEditable"]))),128))]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/style-selector/medium-style-selector.vue"]]);var FM={exports:{}};(function(t,e){(function(n,o){o()})(Ds,function(){function n(b,T){return typeof T>"u"?T={autoBom:!1}:typeof T!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),T={autoBom:!T}),T.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob(["\uFEFF",b],{type:b.type}):b}function o(b,T,M){var I=new XMLHttpRequest;I.open("GET",b),I.responseType="blob",I.onload=function(){g(I.response,T,M)},I.onerror=function(){console.error("could not download file")},I.send()}function s(b){var T=new XMLHttpRequest;T.open("HEAD",b,!1);try{T.send()}catch{}return 200<=T.status&&299>=T.status}function h(b){try{b.dispatchEvent(new MouseEvent("click"))}catch{var T=document.createEvent("MouseEvents");T.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),b.dispatchEvent(T)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ds=="object"&&Ds.global===Ds?Ds:void 0,m=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(b,T,M){var I=a.URL||a.webkitURL,P=document.createElement("a");T=T||b.name||"download",P.download=T,P.rel="noopener",typeof b=="string"?(P.href=b,P.origin===location.origin?h(P):s(P.href)?o(b,T,M):h(P,P.target="_blank")):(P.href=I.createObjectURL(b),setTimeout(function(){I.revokeObjectURL(P.href)},4e4),setTimeout(function(){h(P)},0))}:"msSaveOrOpenBlob"in navigator?function(b,T,M){if(T=T||b.name||"download",typeof b!="string")navigator.msSaveOrOpenBlob(n(b,M),T);else if(s(b))o(b,T,M);else{var I=document.createElement("a");I.href=b,I.target="_blank",setTimeout(function(){h(I)})}}:function(b,T,M,I){if(I=I||open("","_blank"),I&&(I.document.title=I.document.body.innerText="downloading..."),typeof b=="string")return o(b,T,M);var P=b.type==="application/octet-stream",z=/constructor/i.test(a.HTMLElement)||a.safari,V=/CriOS\/[\d]+/.test(navigator.userAgent);if((V||P&&z||m)&&typeof FileReader<"u"){var W=new FileReader;W.onloadend=function(){var ue=W.result;ue=V?ue:ue.replace(/^data:[^;]*;/,"data:attachment/file;"),I?I.location.href=ue:location=ue,I=null},W.readAsDataURL(b)}else{var Y=a.URL||a.webkitURL,X=Y.createObjectURL(b);I?I.location=X:location.href=X,I=null,setTimeout(function(){Y.revokeObjectURL(X)},4e4)}});a.saveAs=g.saveAs=g,t.exports=g})})(FM);const nj={class:"text-white border-2 p-[10px] m-[10px] flex flex-col"},ij={class:"text-center mb-3"},oj={class:"flex flex-row justify-center"},aj={class:"absolute top-[70px] w-full text-center text-base"},sj={class:"text-white border-2 relative h-[100px] w-[85px] mx-[10px] my-0 mb-[15px] text-sm"},lj={class:"'block z-[5] w-full h-full cursor-pointer after:absolute after:py-[15px] after:px-[15px] after:w-full after:text-center after:content-upload",for:"uploadMvtStyle"},uj={class:"absolute top-[70px] w-full text-center text-base"},cj=["href"],hj=ur(or({__name:"expert-style-selector",setup(t){const e=li(),n=os(),o=Ic(),{appliedStyle:s}=cn(n),{t:h}=En();function a(){const b=s.value,T=JSON.stringify(b),M=new Blob([T],{type:"text/plain;charset=utf-8"}),I="styles.json";FM.exports.saveAs(M,I)}function m(b){const T=b.target.files;if((T==null?void 0:T.length)!==1)return;const M=T[0];new File([],"./text.txt").text().then(P=>console.log(P)),M.type==="application/json"&&(M.text().then(P=>{n.enableExpertStyle(),s.value=JSON.parse(P)}),b.target.value="")}function g(){return n.styleSerial===null?o.getDefaultMapBoxStyleUrl(o.getVectorId(e.bgLayer)):`${n.registerUrls.get("get")}?id=${n.styleSerial}`}return(b,T)=>(Ve(),nt("div",nj,[Re("h5",ij,jt(ae(h)("Lancer \xE9diteur externe ou importer json")),1),Re("div",oj,[Re("a",{href:"#",class:"text-white border-2 relative h-[100px] w-[85px] mx-[10px] my-0 mb-[15px] z-5 text-sm after:absolute after:left-[20px] after:top-[10px] after:z-4 after:w-[3.6em] after:text-center after:content-download",onClick:T[0]||(T[0]=M=>a())},[Re("span",aj,jt(ae(h)("Download style")),1)]),Re("div",sj,[Re("label",lj,[Re("span",uj,jt(ae(h)("Upload style")),1)]),Re("input",{class:"invisible",type:"file",name:"uploadMvtStyle",id:"uploadMvtStyle",onChange:m},null,32)])]),Re("a",{href:`https://maputnik.github.io/editor/?style=${g()}`,target:"_blank",class:"lux-btn text-center"},jt(ae(h)("Open Maputnik editor")),9,cj)]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/style-selector/expert-style-selector.vue"]]),fj={key:0},pj={class:"h-20 shrink-0 flex justify-between lux-panel-title"},dj={key:0},mj={key:1},yj={key:2},gj=ur(or({__name:"style-selector",setup(t){const{t:e}=En(),n=li(),o=gi(),s=os(),{bgLayer:h}=cn(n),a=Ic(),m=ar(()=>a.getStyleCapabilitiesFromLayer(h.value));Tn(h,I=>{a.isLayerStyleEditable(I)||o.closeStyleEditorPanel()});let g=vr(!1),b=vr(!1),T=vr(!1);function M(){s.setStyle(null)}return(I,P)=>ae(m).isEditable?(Ve(),nt("div",fj,[Re("button",{onClick:P[0]||(P[0]=()=>ae(o).closeStyleEditorPanel())},"X close"),Re("h2",pj,jt(ae(e)("Style editor")),1),ae(m).hasSimpleStyle?(Ve(),nt("div",dj,[Re("button",{onClick:P[1]||(P[1]=()=>ln(g)?g.value=!ae(g):g=!ae(g))},jt(ae(e)("Choose a predefined style")),1),Ft(qU,{class:Pr(ae(g)?"":"hidden")},null,8,["class"])])):Ke("v-if",!0),ae(m).hasAdvancedStyle?(Ve(),nt("div",mj,[Re("button",{onClick:P[2]||(P[2]=()=>ln(b)?b.value=!ae(b):b=!ae(b))},jt(ae(e)("Change main colours")),1),ae(h)?(Ve(),en(rj,{key:0,class:Pr(ae(b)?"":"hidden"),layer:ae(h)},null,8,["class","layer"])):Ke("v-if",!0)])):Ke("v-if",!0),ae(m).hasExpertStyle?(Ve(),nt("div",yj,[Re("button",{onClick:P[3]||(P[3]=()=>ln(T)?T.value=!ae(T):T=!ae(T))},jt(ae(e)("Advanced settings")),1),ae(h)?(Ve(),en(hj,{key:0,class:Pr(ae(T)?"":"hidden"),layer:ae(h)},null,8,["class","layer"])):Ke("v-if",!0)])):Ke("v-if",!0),Re("button",{onClick:M,class:"lux-btn"},jt(ae(e)("Reset style",{ns:"client"})),1)])):Ke("v-if",!0)}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/components/style-selector/style-selector.vue"]]);function BM(t,e,n){n(t,e)&&t instanceof UO.default&&t.getLayers().forEach(s=>{BM(s,[...e,t],n)})}const vj={class:"h-screen flex flex-col overflow-hidden"},_j={class:"flex grow"},xj={key:0,class:"w-full sm:w-80 bg-secondary z-10"},bj={key:1,class:"w-80 bg-primary"},wj={class:"map-wrapper grow bg-blue-100 relative"},Ej={class:"absolute right-1 top-16"},VM=ur(or({__name:"App",setup(t){OM.bootstrap(),TM.bootstrap(),MM.bootstrap(),IM.bootstrapLayersOpen(),B0.bootstrapStyle(),SM.bootstrap();const{layersOpen:e,styleEditorOpen:n}=cn(gi());Tn(e,()=>setTimeout(()=>{o()},50)),ua(()=>window.addEventListener("resize",o)),au(()=>window.removeEventListener("resize",o));function o(){const s=Os().getOlMap();s.updateSize(),BM(s.getLayerGroup(),[],h=>(h instanceof V0&&h.getMapLibreMap().resize(),!0))}return(s,h)=>(Ve(),nt("div",vj,[Ft(WT),Re("main",_j,[Ke(" Layer panel "),ae(e)?(Ve(),nt("div",xj,[Ft(bM)])):Ke("v-if",!0),Ke(" Style editor "),ae(n)?(Ve(),nt("div",bj,[Ft(gj)])):Ke("v-if",!0),Ke(" Map container and slider comparator "),Re("div",wj,[Ft(bT,{v4_standalone:!0}),Ft(wM,{class:"absolute top-0"}),Ft(UT),Ft($T)]),Ke(" Background selector "),Re("div",Ej,[Ft(ET)])]),Ft(HT,{class:"fixed bottom-5 sm:static z-20"}),Ft(H2)]))}}),[["__file","/home/abernachot/Dev/Lux/luxembourg-geoportail/src/App.vue"]]);NR(),Gn.use(O1),Gn.init({lng:"fr",debug:!1,defaultNS:"client",supportedLngs:["de","en","fr","lb"],ns:["client","legends","server","tooltips"],fallbackLng:"fr",backend:{loadPath:"/static-ngeo/web-components/assets/locales/{{ns}}.{{lng}}.json"},nsSeparator:"|"});const Ag=KP(VM);Ag.use(Qw()),Ag.use(bE,{i18next:Gn}),Ag.use(Vw);const Sj=(t={},e=null)=>W2({setup:()=>{const n=Zm();Object.assign(n.appContext,e._context),Object.assign(n.provides,e._context.provides)},render:()=>pw(t)},{shadowRoot:!1});Ot.AlertNotifications=H2,Ot.App=VM,Ot.BackgroundSelector=ET,Ot.DropdownList=l0,Ot.FooterBar=HT,Ot.HeaderBar=WT,Ot.I18NextVue=bE,Ot.LayerMetadata=$T,Ot.LayerPanel=bM,Ot.MapContainer=bT,Ot.MapLibreLayer=V0,Ot.RemoteLayers=UT,Ot.SliderComparator=wM,Ot.VueDOMPurifyHTML=Vw,Ot.app=Ag,Ot.backend=O1,Ot.createElementInstance=Sj,Ot.createPinia=Qw,Ot.defineCustomElement=W2,Ot.i18next=Gn,Ot.statePersistorBgLayerService=SM,Ot.statePersistorLayersOpenService=IM,Ot.statePersistorLayersService=TM,Ot.statePersistorMyMapService=OM,Ot.statePersistorStyleService=B0,Ot.statePersistorThemeService=MM,Ot.storeToRefs=cn,Ot.themeSelectorService=qT,Ot.useAppStore=gi,Ot.useBackgroundLayer=j0,Ot.useLayers=ka,Ot.useMap=Os,Ot.useMapStore=li,Ot.useMvtStyles=Ic,Ot.useOpenLayers=U0,Ot.useStyleStore=os,Ot.useThemeStore=yo,Ot.useThemes=wu,Ot.watch=Tn,Object.defineProperties(Ot,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
