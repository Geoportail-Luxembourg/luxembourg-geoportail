(function(It,Mi){typeof exports=="object"&&typeof module<"u"?Mi(exports,require("ol/proj"),require("ol/proj/proj4"),require("ol/Map"),require("ol/View"),require("ol/layer/Image"),require("ol/source/ImageWMS"),require("ol/layer/Tile"),require("ol/source/WMTS"),require("ol/tilegrid/WMTS"),require("ol/extent"),require("ol/layer/Layer"),require("ol/math"),require("ol/proj.js"),require("ol/events"),require("ol/ObjectEventType"),require("ol/css"),require("ol/control/Control"),require("ol/control/FullScreen"),require("ol/control/Zoom"),require("ol/control/ZoomToExtent"),require("ol/format/WMTSCapabilities.js"),require("ol/render"),require("ol/Observable"),require("ol/render/EventType"),require("ol/layer/Group.js")):typeof define=="function"&&define.amd?define(["exports","ol/proj","ol/proj/proj4","ol/Map","ol/View","ol/layer/Image","ol/source/ImageWMS","ol/layer/Tile","ol/source/WMTS","ol/tilegrid/WMTS","ol/extent","ol/layer/Layer","ol/math","ol/proj.js","ol/events","ol/ObjectEventType","ol/css","ol/control/Control","ol/control/FullScreen","ol/control/Zoom","ol/control/ZoomToExtent","ol/format/WMTSCapabilities.js","ol/render","ol/Observable","ol/render/EventType","ol/layer/Group.js"],Mi):(It=typeof globalThis<"u"?globalThis:It||self,Mi(It["luxembourg-geoportail"]={},It.proj,It.proj4$1,It.OlMap,It.OlView,It.ImageLayer,It.ImageWMS,It.TileLayer,It.WmtsSource,It.WmtsTileGrid,It.extent,It.Layer,It.math,It.proj_js,It.olEvents,It.ObjectEventType,It.css$1,It.Control,It.FullScreen,It.Zoom,It.OlControlZoomToExtent,It.WMTSCapabilities,It.render$1,It.Observable,It.EventType,It.olLayerGroup))})(this,function(It,Mi,Ju,hO,fO,pO,dO,mO,yO,gO,vO,_O,xO,bO,wO,EO,hm,SO,TO,MO,IO,OO,fm,CO,AO,PO){"use strict";var l7=Object.defineProperty;var u7=(It,Mi,Ju)=>Mi in It?l7(It,Mi,{enumerable:!0,configurable:!0,writable:!0,value:Ju}):It[Mi]=Ju;var ai=(It,Mi,Ju)=>(u7(It,typeof Mi!="symbol"?Mi+"":Mi,Ju),Ju);const uo=t=>t&&typeof t=="object"&&"default"in t?t:{default:t};function kO(t){if(t&&t.__esModule)return t;const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}function LO(t,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in t)){const f=Object.getOwnPropertyDescriptor(o,s);f&&Object.defineProperty(t,s,f.get?f:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const DO=uo(hO),NO=uo(fO),RO=uo(pO),Sx=uo(dO),zO=uo(mO),Tx=uo(yO),FO=uo(gO),BO=uo(_O),Mx=kO(wO),VO=uo(EO),Ix=uo(SO),UO=uo(TO),jO=uo(MO),$O=uo(IO),GO=uo(OO),Ox=uo(AO),qO=uo(PO);function Ql(t,e){const n=Object.create(null),o=t.split(",");for(let s=0;s<o.length;s++)n[o[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}function eu(t){if(tr(t)){const e={};for(let n=0;n<t.length;n++){const o=t[n],s=jn(o)?XO(o):eu(o);if(s)for(const f in s)e[f]=s[f]}return e}else{if(jn(t))return t;if(un(t))return t}}const WO=/;(?![^(]*\))/g,HO=/:([^]+)/,ZO=/\/\*.*?\*\//gs;function XO(t){const e={};return t.replace(ZO,"").split(WO).forEach(n=>{if(n){const o=n.split(HO);o.length>1&&(e[o[0].trim()]=o[1].trim())}}),e}function Rr(t){let e="";if(jn(t))e=t;else if(tr(t))for(let n=0;n<t.length;n++){const o=Rr(t[n]);o&&(e+=o+" ")}else if(un(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const KO="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",YO="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",JO=Ql(KO),QO=Ql(YO),eC=Ql("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Cx(t){return!!t||t===""}const Wt=t=>jn(t)?t:t==null?"":tr(t)||un(t)&&(t.toString===Lx||!dr(t.toString))?JSON.stringify(t,Ax,2):String(t),Ax=(t,e)=>e&&e.__v_isRef?Ax(t,e.value):Qu(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[o,s])=>(n[`${o} =>`]=s,n),{})}:kx(e)?{[`Set(${e.size})`]:[...e.values()]}:un(e)&&!tr(e)&&!Dx(e)?String(e):e,wn=process.env.NODE_ENV!=="production"?Object.freeze({}):{},dh=process.env.NODE_ENV!=="production"?Object.freeze([]):[],Qi=()=>{},Px=()=>!1,tC=/^on[^a-z]/,Kf=t=>tC.test(t),pm=t=>t.startsWith("onUpdate:"),Un=Object.assign,Gv=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},rC=Object.prototype.hasOwnProperty,Ur=(t,e)=>rC.call(t,e),tr=Array.isArray,Qu=t=>dm(t)==="[object Map]",kx=t=>dm(t)==="[object Set]",dr=t=>typeof t=="function",jn=t=>typeof t=="string",qv=t=>typeof t=="symbol",un=t=>t!==null&&typeof t=="object",Wv=t=>un(t)&&dr(t.then)&&dr(t.catch),Lx=Object.prototype.toString,dm=t=>Lx.call(t),Hv=t=>dm(t).slice(8,-1),Dx=t=>dm(t)==="[object Object]",Zv=t=>jn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,mm=Ql(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nC=Ql("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),ym=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},iC=/-(\w)/g,aa=ym(t=>t.replace(iC,(e,n)=>n?n.toUpperCase():"")),oC=/\B([A-Z])/g,Go=ym(t=>t.replace(oC,"-$1").toLowerCase()),ec=ym(t=>t.charAt(0).toUpperCase()+t.slice(1)),tc=ym(t=>t?`on${ec(t)}`:""),Yf=(t,e)=>!Object.is(t,e),Jf=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},gm=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},aC=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Xv=t=>{const e=jn(t)?Number(t):NaN;return isNaN(e)?t:e};let Nx;const Rx=()=>Nx||(Nx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vm(t,...e){console.warn(`[Vue warn] ${t}`,...e)}let sa;class zx{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=sa,!e&&sa&&(this.index=(sa.scopes||(sa.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=sa;try{return sa=this,e()}finally{sa=n}}else process.env.NODE_ENV!=="production"&&vm("cannot run an inactive effect scope.")}on(){sa=this}off(){sa=this.parent}stop(e){if(this._active){let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Fx(t){return new zx(t)}function sC(t,e=sa){e&&e.active&&e.effects.push(t)}function Bx(){return sa}function lC(t){sa?sa.cleanups.push(t):process.env.NODE_ENV!=="production"&&vm("onScopeDispose() is called when there is no active effect scope to be associated with.")}const Qf=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Vx=t=>(t.w&tu)>0,Ux=t=>(t.n&tu)>0,uC=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=tu},cC=t=>{const{deps:e}=t;if(e.length){let n=0;for(let o=0;o<e.length;o++){const s=e[o];Vx(s)&&!Ux(s)?s.delete(t):e[n++]=s,s.w&=~tu,s.n&=~tu}e.length=n}},_m=new WeakMap;let ep=0,tu=1;const Kv=30;let Oo;const rc=Symbol(process.env.NODE_ENV!=="production"?"iterate":""),Yv=Symbol(process.env.NODE_ENV!=="production"?"Map key iterate":"");class Jv{constructor(e,n=null,o){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,sC(this,o)}run(){if(!this.active)return this.fn();let e=Oo,n=ru;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Oo,Oo=this,ru=!0,tu=1<<++ep,ep<=Kv?uC(this):jx(this),this.fn()}finally{ep<=Kv&&cC(this),tu=1<<--ep,Oo=this.parent,ru=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Oo===this?this.deferStop=!0:this.active&&(jx(this),this.onStop&&this.onStop(),this.active=!1)}}function jx(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ru=!0;const $x=[];function nc(){$x.push(ru),ru=!1}function ic(){const t=$x.pop();ru=t===void 0?!0:t}function Co(t,e,n){if(ru&&Oo){let o=_m.get(t);o||_m.set(t,o=new Map);let s=o.get(n);s||o.set(n,s=Qf());const f=process.env.NODE_ENV!=="production"?{effect:Oo,target:t,type:e,key:n}:void 0;Qv(s,f)}}function Qv(t,e){let n=!1;ep<=Kv?Ux(t)||(t.n|=tu,n=!Vx(t)):n=!t.has(Oo),n&&(t.add(Oo),Oo.deps.push(t),process.env.NODE_ENV!=="production"&&Oo.onTrack&&Oo.onTrack(Object.assign({effect:Oo},e)))}function ul(t,e,n,o,s,f){const a=_m.get(t);if(!a)return;let m=[];if(e==="clear")m=[...a.values()];else if(n==="length"&&tr(t)){const b=Number(o);a.forEach((E,M)=>{(M==="length"||M>=b)&&m.push(E)})}else switch(n!==void 0&&m.push(a.get(n)),e){case"add":tr(t)?Zv(n)&&m.push(a.get("length")):(m.push(a.get(rc)),Qu(t)&&m.push(a.get(Yv)));break;case"delete":tr(t)||(m.push(a.get(rc)),Qu(t)&&m.push(a.get(Yv)));break;case"set":Qu(t)&&m.push(a.get(rc));break}const g=process.env.NODE_ENV!=="production"?{target:t,type:e,key:n,newValue:o,oldValue:s,oldTarget:f}:void 0;if(m.length===1)m[0]&&(process.env.NODE_ENV!=="production"?mh(m[0],g):mh(m[0]));else{const b=[];for(const E of m)E&&b.push(...E);process.env.NODE_ENV!=="production"?mh(Qf(b),g):mh(Qf(b))}}function mh(t,e){const n=tr(t)?t:[...t];for(const o of n)o.computed&&Gx(o,e);for(const o of n)o.computed||Gx(o,e)}function Gx(t,e){(t!==Oo||t.allowRecurse)&&(process.env.NODE_ENV!=="production"&&t.onTrigger&&t.onTrigger(Un({effect:t},e)),t.scheduler?t.scheduler():t.run())}function hC(t,e){var n;return(n=_m.get(t))===null||n===void 0?void 0:n.get(e)}const fC=Ql("__proto__,__v_isRef,__isVue"),qx=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(qv)),pC=xm(),dC=xm(!1,!0),mC=xm(!0),yC=xm(!0,!0),Wx=gC();function gC(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const o=hr(this);for(let f=0,a=this.length;f<a;f++)Co(o,"get",f+"");const s=o[e](...n);return s===-1||s===!1?o[e](...n.map(hr)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){nc();const o=hr(this)[e].apply(this,n);return ic(),o}}),t}function vC(t){const e=hr(this);return Co(e,"has",t),e.hasOwnProperty(t)}function xm(t=!1,e=!1){return function(o,s,f){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&f===(t?e?ib:nb:e?rb:tb).get(o))return o;const a=tr(o);if(!t){if(a&&Ur(Wx,s))return Reflect.get(Wx,s,f);if(s==="hasOwnProperty")return vC}const m=Reflect.get(o,s,f);return(qv(s)?qx.has(s):fC(s))||(t||Co(o,"get",s),e)?m:cn(m)?a&&Zv(s)?m:m.value:un(m)?t?ob(m):Om(m):m}}const _C=Hx(),xC=Hx(!0);function Hx(t=!1){return function(n,o,s,f){let a=n[o];if(iu(a)&&cn(a)&&!cn(s))return!1;if(!t&&(!Am(s)&&!iu(s)&&(a=hr(a),s=hr(s)),!tr(n)&&cn(a)&&!cn(s)))return a.value=s,!0;const m=tr(n)&&Zv(o)?Number(o)<n.length:Ur(n,o),g=Reflect.set(n,o,s,f);return n===hr(f)&&(m?Yf(s,a)&&ul(n,"set",o,s,a):ul(n,"add",o,s)),g}}function bC(t,e){const n=Ur(t,e),o=t[e],s=Reflect.deleteProperty(t,e);return s&&n&&ul(t,"delete",e,void 0,o),s}function wC(t,e){const n=Reflect.has(t,e);return(!qv(e)||!qx.has(e))&&Co(t,"has",e),n}function EC(t){return Co(t,"iterate",tr(t)?"length":rc),Reflect.ownKeys(t)}const Zx={get:pC,set:_C,deleteProperty:bC,has:wC,ownKeys:EC},Xx={get:mC,set(t,e){return process.env.NODE_ENV!=="production"&&vm(`Set operation on key "${String(e)}" failed: target is readonly.`,t),!0},deleteProperty(t,e){return process.env.NODE_ENV!=="production"&&vm(`Delete operation on key "${String(e)}" failed: target is readonly.`,t),!0}},SC=Un({},Zx,{get:dC,set:xC}),TC=Un({},Xx,{get:yC}),e_=t=>t,bm=t=>Reflect.getPrototypeOf(t);function wm(t,e,n=!1,o=!1){t=t.__v_raw;const s=hr(t),f=hr(e);n||(e!==f&&Co(s,"get",e),Co(s,"get",f));const{has:a}=bm(s),m=o?e_:n?t_:tp;if(a.call(s,e))return m(t.get(e));if(a.call(s,f))return m(t.get(f));t!==s&&t.get(e)}function Em(t,e=!1){const n=this.__v_raw,o=hr(n),s=hr(t);return e||(t!==s&&Co(o,"has",t),Co(o,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Sm(t,e=!1){return t=t.__v_raw,!e&&Co(hr(t),"iterate",rc),Reflect.get(t,"size",t)}function Kx(t){t=hr(t);const e=hr(this);return bm(e).has.call(e,t)||(e.add(t),ul(e,"add",t,t)),this}function Yx(t,e){e=hr(e);const n=hr(this),{has:o,get:s}=bm(n);let f=o.call(n,t);f?process.env.NODE_ENV!=="production"&&eb(n,o,t):(t=hr(t),f=o.call(n,t));const a=s.call(n,t);return n.set(t,e),f?Yf(e,a)&&ul(n,"set",t,e,a):ul(n,"add",t,e),this}function Jx(t){const e=hr(this),{has:n,get:o}=bm(e);let s=n.call(e,t);s?process.env.NODE_ENV!=="production"&&eb(e,n,t):(t=hr(t),s=n.call(e,t));const f=o?o.call(e,t):void 0,a=e.delete(t);return s&&ul(e,"delete",t,void 0,f),a}function Qx(){const t=hr(this),e=t.size!==0,n=process.env.NODE_ENV!=="production"?Qu(t)?new Map(t):new Set(t):void 0,o=t.clear();return e&&ul(t,"clear",void 0,void 0,n),o}function Tm(t,e){return function(o,s){const f=this,a=f.__v_raw,m=hr(a),g=e?e_:t?t_:tp;return!t&&Co(m,"iterate",rc),a.forEach((b,E)=>o.call(s,g(b),g(E),f))}}function Mm(t,e,n){return function(...o){const s=this.__v_raw,f=hr(s),a=Qu(f),m=t==="entries"||t===Symbol.iterator&&a,g=t==="keys"&&a,b=s[t](...o),E=n?e_:e?t_:tp;return!e&&Co(f,"iterate",g?Yv:rc),{next(){const{value:M,done:I}=b.next();return I?{value:M,done:I}:{value:m?[E(M[0]),E(M[1])]:E(M),done:I}},[Symbol.iterator](){return this}}}}function nu(t){return function(...e){if(process.env.NODE_ENV!=="production"){const n=e[0]?`on key "${e[0]}" `:"";console.warn(`${ec(t)} operation ${n}failed: target is readonly.`,hr(this))}return t==="delete"?!1:this}}function MC(){const t={get(f){return wm(this,f)},get size(){return Sm(this)},has:Em,add:Kx,set:Yx,delete:Jx,clear:Qx,forEach:Tm(!1,!1)},e={get(f){return wm(this,f,!1,!0)},get size(){return Sm(this)},has:Em,add:Kx,set:Yx,delete:Jx,clear:Qx,forEach:Tm(!1,!0)},n={get(f){return wm(this,f,!0)},get size(){return Sm(this,!0)},has(f){return Em.call(this,f,!0)},add:nu("add"),set:nu("set"),delete:nu("delete"),clear:nu("clear"),forEach:Tm(!0,!1)},o={get(f){return wm(this,f,!0,!0)},get size(){return Sm(this,!0)},has(f){return Em.call(this,f,!0)},add:nu("add"),set:nu("set"),delete:nu("delete"),clear:nu("clear"),forEach:Tm(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(f=>{t[f]=Mm(f,!1,!1),n[f]=Mm(f,!0,!1),e[f]=Mm(f,!1,!0),o[f]=Mm(f,!0,!0)}),[t,n,e,o]}const[IC,OC,CC,AC]=MC();function Im(t,e){const n=e?t?AC:CC:t?OC:IC;return(o,s,f)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?o:Reflect.get(Ur(n,s)&&s in o?n:o,s,f)}const PC={get:Im(!1,!1)},kC={get:Im(!1,!0)},LC={get:Im(!0,!1)},DC={get:Im(!0,!0)};function eb(t,e,n){const o=hr(n);if(o!==n&&e.call(t,o)){const s=Hv(t);console.warn(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const tb=new WeakMap,rb=new WeakMap,nb=new WeakMap,ib=new WeakMap;function NC(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function RC(t){return t.__v_skip||!Object.isExtensible(t)?0:NC(Hv(t))}function Om(t){return iu(t)?t:Cm(t,!1,Zx,PC,tb)}function zC(t){return Cm(t,!1,SC,kC,rb)}function ob(t){return Cm(t,!0,Xx,LC,nb)}function yh(t){return Cm(t,!0,TC,DC,ib)}function Cm(t,e,n,o,s){if(!un(t))return process.env.NODE_ENV!=="production"&&console.warn(`value cannot be made reactive: ${String(t)}`),t;if(t.__v_raw&&!(e&&t.__v_isReactive))return t;const f=s.get(t);if(f)return f;const a=RC(t);if(a===0)return t;const m=new Proxy(t,a===2?o:n);return s.set(t,m),m}function ja(t){return iu(t)?ja(t.__v_raw):!!(t&&t.__v_isReactive)}function iu(t){return!!(t&&t.__v_isReadonly)}function Am(t){return!!(t&&t.__v_isShallow)}function Pm(t){return ja(t)||iu(t)}function hr(t){const e=t&&t.__v_raw;return e?hr(e):t}function $a(t){return gm(t,"__v_skip",!0),t}const tp=t=>un(t)?Om(t):t,t_=t=>un(t)?ob(t):t;function ab(t){ru&&Oo&&(t=hr(t),process.env.NODE_ENV!=="production"?Qv(t.dep||(t.dep=Qf()),{target:t,type:"get",key:"value"}):Qv(t.dep||(t.dep=Qf())))}function sb(t,e){t=hr(t);const n=t.dep;n&&(process.env.NODE_ENV!=="production"?mh(n,{target:t,type:"set",key:"value",newValue:e}):mh(n))}function cn(t){return!!(t&&t.__v_isRef===!0)}function br(t){return lb(t,!1)}function Ln(t){return lb(t,!0)}function lb(t,e){return cn(t)?t:new FC(t,e)}class FC{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:hr(e),this._value=n?e:tp(e)}get value(){return ab(this),this._value}set value(e){const n=this.__v_isShallow||Am(e)||iu(e);e=n?e:hr(e),Yf(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:tp(e),sb(this,e))}}function se(t){return cn(t)?t.value:t}const BC={get:(t,e,n)=>se(Reflect.get(t,e,n)),set:(t,e,n,o)=>{const s=t[e];return cn(s)&&!cn(n)?(s.value=n,!0):Reflect.set(t,e,n,o)}};function ub(t){return ja(t)?t:new Proxy(t,BC)}function cb(t){process.env.NODE_ENV!=="production"&&!Pm(t)&&console.warn("toRefs() expects a reactive object but received a plain one.");const e=tr(t)?new Array(t.length):{};for(const n in t)e[n]=rp(t,n);return e}class VC{constructor(e,n,o){this._object=e,this._key=n,this._defaultValue=o,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return hC(hr(this._object),this._key)}}function rp(t,e,n){const o=t[e];return cn(o)?o:new VC(t,e,n)}var hb;class UC{constructor(e,n,o,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[hb]=!1,this._dirty=!0,this.effect=new Jv(e,()=>{this._dirty||(this._dirty=!0,sb(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=o}get value(){const e=hr(this);return ab(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}hb="__v_isReadonly";function jC(t,e,n=!1){let o,s;const f=dr(t);f?(o=t,s=process.env.NODE_ENV!=="production"?()=>{console.warn("Write operation failed: computed value is readonly")}:Qi):(o=t.get,s=t.set);const a=new UC(o,s,f||!s,n);return process.env.NODE_ENV!=="production"&&e&&!n&&(a.effect.onTrack=e.onTrack,a.effect.onTrigger=e.onTrigger),a}const oc=[];function km(t){oc.push(t)}function Lm(){oc.pop()}function at(t,...e){if(process.env.NODE_ENV==="production")return;nc();const n=oc.length?oc[oc.length-1].component:null,o=n&&n.appContext.config.warnHandler,s=$C();if(o)cl(o,n,11,[t+e.join(""),n&&n.proxy,s.map(({vnode:f})=>`at <${Jm(n,f.type)}>`).join(`
`),s]);else{const f=[`[Vue warn]: ${t}`,...e];s.length&&f.push(`
`,...GC(s)),console.warn(...f)}ic()}function $C(){let t=oc[oc.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const o=t.component&&t.component.parent;t=o&&o.vnode}return e}function GC(t){const e=[];return t.forEach((n,o)=>{e.push(...o===0?[]:[`
`],...qC(n))}),e}function qC({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",o=t.component?t.component.parent==null:!1,s=` at <${Jm(t.component,t.type,o)}`,f=">"+n;return t.props?[s,...WC(t.props),f]:[s+f]}function WC(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(o=>{e.push(...fb(o,t[o]))}),n.length>3&&e.push(" ..."),e}function fb(t,e,n){return jn(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:cn(e)?(e=fb(t,hr(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):dr(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=hr(e),n?e:[`${t}=`,e])}function HC(t,e){process.env.NODE_ENV!=="production"&&t!==void 0&&(typeof t!="number"?at(`${e} is not a valid number - got ${JSON.stringify(t)}.`):isNaN(t)&&at(`${e} is NaN - the duration expression might be incorrect.`))}const r_={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function cl(t,e,n,o){let s;try{s=o?t(...o):t()}catch(f){Dm(f,e,n)}return s}function Ea(t,e,n,o){if(dr(t)){const f=cl(t,e,n,o);return f&&Wv(f)&&f.catch(a=>{Dm(a,e,n)}),f}const s=[];for(let f=0;f<t.length;f++)s.push(Ea(t[f],e,n,o));return s}function Dm(t,e,n,o=!0){const s=e?e.vnode:null;if(e){let f=e.parent;const a=e.proxy,m=process.env.NODE_ENV!=="production"?r_[n]:n;for(;f;){const b=f.ec;if(b){for(let E=0;E<b.length;E++)if(b[E](t,a,m)===!1)return}f=f.parent}const g=e.appContext.config.errorHandler;if(g){cl(g,null,10,[t,a,m]);return}}ZC(t,n,s,o)}function ZC(t,e,n,o=!0){if(process.env.NODE_ENV!=="production"){const s=r_[e];if(n&&km(n),at(`Unhandled error${s?` during execution of ${s}`:""}`),n&&Lm(),o)throw t;console.error(t)}else console.error(t)}let np=!1,n_=!1;const co=[];let gs=0;const gh=[];let vs=null,ou=0;const pb=Promise.resolve();let i_=null;const XC=100;function Nm(t){const e=i_||pb;return t?e.then(this?t.bind(this):t):e}function KC(t){let e=gs+1,n=co.length;for(;e<n;){const o=e+n>>>1;ip(co[o])<t?e=o+1:n=o}return e}function Rm(t){(!co.length||!co.includes(t,np&&t.allowRecurse?gs+1:gs))&&(t.id==null?co.push(t):co.splice(KC(t.id),0,t),db())}function db(){!np&&!n_&&(n_=!0,i_=pb.then(vb))}function YC(t){const e=co.indexOf(t);e>gs&&co.splice(e,1)}function mb(t){tr(t)?gh.push(...t):(!vs||!vs.includes(t,t.allowRecurse?ou+1:ou))&&gh.push(t),db()}function yb(t,e=np?gs+1:0){for(process.env.NODE_ENV!=="production"&&(t=t||new Map);e<co.length;e++){const n=co[e];if(n&&n.pre){if(process.env.NODE_ENV!=="production"&&o_(t,n))continue;co.splice(e,1),e--,n()}}}function gb(t){if(gh.length){const e=[...new Set(gh)];if(gh.length=0,vs){vs.push(...e);return}for(vs=e,process.env.NODE_ENV!=="production"&&(t=t||new Map),vs.sort((n,o)=>ip(n)-ip(o)),ou=0;ou<vs.length;ou++)process.env.NODE_ENV!=="production"&&o_(t,vs[ou])||vs[ou]();vs=null,ou=0}}const ip=t=>t.id==null?1/0:t.id,JC=(t,e)=>{const n=ip(t)-ip(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function vb(t){n_=!1,np=!0,process.env.NODE_ENV!=="production"&&(t=t||new Map),co.sort(JC);const e=process.env.NODE_ENV!=="production"?n=>o_(t,n):Qi;try{for(gs=0;gs<co.length;gs++){const n=co[gs];if(n&&n.active!==!1){if(process.env.NODE_ENV!=="production"&&e(n))continue;cl(n,null,14)}}}finally{gs=0,co.length=0,gb(t),np=!1,i_=null,(co.length||gh.length)&&vb(t)}}function o_(t,e){if(!t.has(e))t.set(e,1);else{const n=t.get(e);if(n>XC){const o=e.ownerInstance,s=o&&P_(o.type);return at(`Maximum recursive updates exceeded${s?` in component <${s}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else t.set(e,n+1)}}let au=!1;const vh=new Set;process.env.NODE_ENV!=="production"&&(Rx().__VUE_HMR_RUNTIME__={createRecord:a_(_b),rerender:a_(tA),reload:a_(rA)});const ac=new Map;function QC(t){const e=t.type.__hmrId;let n=ac.get(e);n||(_b(e,t.type),n=ac.get(e)),n.instances.add(t)}function eA(t){ac.get(t.type.__hmrId).instances.delete(t)}function _b(t,e){return ac.has(t)?!1:(ac.set(t,{initialDef:op(e),instances:new Set}),!0)}function op(t){return yw(t)?t.__vccOpts:t}function tA(t,e){const n=ac.get(t);!n||(n.initialDef.render=e,[...n.instances].forEach(o=>{e&&(o.render=e,op(o.type).render=e),o.renderCache=[],au=!0,o.update(),au=!1}))}function rA(t,e){const n=ac.get(t);if(!n)return;e=op(e),xb(n.initialDef,e);const o=[...n.instances];for(const s of o){const f=op(s.type);vh.has(f)||(f!==n.initialDef&&xb(f,e),vh.add(f)),s.appContext.optionsCache.delete(s.type),s.ceReload?(vh.add(f),s.ceReload(e.styles),vh.delete(f)):s.parent?Rm(s.parent.update):s.appContext.reload?s.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}mb(()=>{for(const s of o)vh.delete(op(s.type))})}function xb(t,e){Un(t,e);for(const n in t)n!=="__file"&&!(n in e)&&delete t[n]}function a_(t){return(e,n)=>{try{return t(e,n)}catch(o){console.error(o),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let _s,ap=[],s_=!1;function sp(t,...e){_s?_s.emit(t,...e):s_||ap.push({event:t,args:e})}function bb(t,e){var n,o;_s=t,_s?(_s.enabled=!0,ap.forEach(({event:s,args:f})=>_s.emit(s,...f)),ap=[]):typeof window<"u"&&window.HTMLElement&&!(!((o=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)===null||o===void 0)&&o.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(f=>{bb(f,e)}),setTimeout(()=>{_s||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,s_=!0,ap=[])},3e3)):(s_=!0,ap=[])}function nA(t,e){sp("app:init",t,e,{Fragment:en,Text:fp,Comment:Vi,Static:Wm})}function iA(t){sp("app:unmount",t)}const oA=l_("component:added"),wb=l_("component:updated"),aA=l_("component:removed"),sA=t=>{_s&&typeof _s.cleanupBuffer=="function"&&!_s.cleanupBuffer(t)&&aA(t)};function l_(t){return e=>{sp(t,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}const lA=Eb("perf:start"),uA=Eb("perf:end");function Eb(t){return(e,n,o)=>{sp(t,e.appContext.app,e.uid,e,n,o)}}function cA(t,e,n){sp("component:emit",t.appContext.app,t,e,n)}function hA(t,e,...n){if(t.isUnmounted)return;const o=t.vnode.props||wn;if(process.env.NODE_ENV!=="production"){const{emitsOptions:E,propsOptions:[M]}=t;if(E)if(!(e in E))(!M||!(tc(e)in M))&&at(`Component emitted event "${e}" but it is neither declared in the emits option nor as an "${tc(e)}" prop.`);else{const I=E[e];dr(I)&&(I(...n)||at(`Invalid event arguments: event validation failed for event "${e}".`))}}let s=n;const f=e.startsWith("update:"),a=f&&e.slice(7);if(a&&a in o){const E=`${a==="modelValue"?"model":a}Modifiers`,{number:M,trim:I}=o[E]||wn;I&&(s=n.map(P=>jn(P)?P.trim():P)),M&&(s=n.map(aC))}if(process.env.NODE_ENV!=="production"&&cA(t,e,s),process.env.NODE_ENV!=="production"){const E=e.toLowerCase();E!==e&&o[tc(E)]&&at(`Event "${E}" is emitted in component ${Jm(t,t.type)} but the handler is registered for "${e}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${Go(e)}" instead of "${e}".`)}let m,g=o[m=tc(e)]||o[m=tc(aa(e))];!g&&f&&(g=o[m=tc(Go(e))]),g&&Ea(g,t,6,s);const b=o[m+"Once"];if(b){if(!t.emitted)t.emitted={};else if(t.emitted[m])return;t.emitted[m]=!0,Ea(b,t,6,s)}}function Sb(t,e,n=!1){const o=e.emitsCache,s=o.get(t);if(s!==void 0)return s;const f=t.emits;let a={},m=!1;if(!dr(t)){const g=b=>{const E=Sb(b,e,!0);E&&(m=!0,Un(a,E))};!n&&e.mixins.length&&e.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}return!f&&!m?(un(t)&&o.set(t,null),null):(tr(f)?f.forEach(g=>a[g]=null):Un(a,f),un(t)&&o.set(t,a),a)}function zm(t,e){return!t||!Kf(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ur(t,e[0].toLowerCase()+e.slice(1))||Ur(t,Go(e))||Ur(t,e))}let Di=null,Tb=null;function Fm(t){const e=Di;return Di=t,Tb=t&&t.type.__scopeId||null,e}function su(t,e=Di,n){if(!e||t._n)return t;const o=(...s)=>{o._d&&sw(-1);const f=Fm(e);let a;try{a=t(...s)}finally{Fm(f),o._d&&sw(1)}return process.env.NODE_ENV!=="production"&&wb(e),a};return o._n=!0,o._c=!0,o._d=!0,o}let u_=!1;function Bm(){u_=!0}function c_(t){const{type:e,vnode:n,proxy:o,withProxy:s,props:f,propsOptions:[a],slots:m,attrs:g,emit:b,render:E,renderCache:M,data:I,setupState:P,ctx:z,inheritAttrs:V}=t;let q,re;const X=Fm(t);process.env.NODE_ENV!=="production"&&(u_=!1);try{if(n.shapeFlag&4){const ve=s||o;q=qa(E.call(ve,ve,M,f,P,I,z)),re=g}else{const ve=e;process.env.NODE_ENV!=="production"&&g===f&&Bm(),q=qa(ve.length>1?ve(f,process.env.NODE_ENV!=="production"?{get attrs(){return Bm(),g},slots:m,emit:b}:{attrs:g,slots:m,emit:b}):ve(f,null)),re=e.props?g:pA(g)}}catch(ve){pp.length=0,Dm(ve,t,1),q=kt(Vi)}let ae=q,ce;if(process.env.NODE_ENV!=="production"&&q.patchFlag>0&&q.patchFlag&2048&&([ae,ce]=fA(q)),re&&V!==!1){const ve=Object.keys(re),{shapeFlag:Ne}=ae;if(ve.length){if(Ne&7)a&&ve.some(pm)&&(re=dA(re,a)),ae=xs(ae,re);else if(process.env.NODE_ENV!=="production"&&!u_&&ae.type!==Vi){const ze=Object.keys(g),Pe=[],Se=[];for(let Ie=0,Ke=ze.length;Ie<Ke;Ie++){const Ge=ze[Ie];Kf(Ge)?pm(Ge)||Pe.push(Ge[2].toLowerCase()+Ge.slice(3)):Se.push(Ge)}Se.length&&at(`Extraneous non-props attributes (${Se.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),Pe.length&&at(`Extraneous non-emits event listeners (${Pe.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return n.dirs&&(process.env.NODE_ENV!=="production"&&!Ib(ae)&&at("Runtime directive used on component with non-element root node. The directives will not function as intended."),ae=xs(ae),ae.dirs=ae.dirs?ae.dirs.concat(n.dirs):n.dirs),n.transition&&(process.env.NODE_ENV!=="production"&&!Ib(ae)&&at("Component inside <Transition> renders non-element root node that cannot be animated."),ae.transition=n.transition),process.env.NODE_ENV!=="production"&&ce?ce(ae):q=ae,Fm(X),q}const fA=t=>{const e=t.children,n=t.dynamicChildren,o=Mb(e);if(!o)return[t,void 0];const s=e.indexOf(o),f=n?n.indexOf(o):-1,a=m=>{e[s]=m,n&&(f>-1?n[f]=m:m.patchFlag>0&&(t.dynamicChildren=[...n,m]))};return[qa(o),a]};function Mb(t){let e;for(let n=0;n<t.length;n++){const o=t[n];if(bh(o)){if(o.type!==Vi||o.children==="v-if"){if(e)return;e=o}}else return}return e}const pA=t=>{let e;for(const n in t)(n==="class"||n==="style"||Kf(n))&&((e||(e={}))[n]=t[n]);return e},dA=(t,e)=>{const n={};for(const o in t)(!pm(o)||!(o.slice(9)in e))&&(n[o]=t[o]);return n},Ib=t=>t.shapeFlag&7||t.type===Vi;function mA(t,e,n){const{props:o,children:s,component:f}=t,{props:a,children:m,patchFlag:g}=e,b=f.emitsOptions;if(process.env.NODE_ENV!=="production"&&(s||m)&&au||e.dirs||e.transition)return!0;if(n&&g>=0){if(g&1024)return!0;if(g&16)return o?Ob(o,a,b):!!a;if(g&8){const E=e.dynamicProps;for(let M=0;M<E.length;M++){const I=E[M];if(a[I]!==o[I]&&!zm(b,I))return!0}}}else return(s||m)&&(!m||!m.$stable)?!0:o===a?!1:o?a?Ob(o,a,b):!0:!!a;return!1}function Ob(t,e,n){const o=Object.keys(e);if(o.length!==Object.keys(t).length)return!0;for(let s=0;s<o.length;s++){const f=o[s];if(e[f]!==t[f]&&!zm(n,f))return!0}return!1}function yA({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const gA=t=>t.__isSuspense;function vA(t,e){e&&e.pendingBranch?tr(t)?e.effects.push(...t):e.effects.push(t):mb(t)}function Cb(t,e){if(!si)process.env.NODE_ENV!=="production"&&at("provide() can only be used inside setup().");else{let n=si.provides;const o=si.parent&&si.parent.provides;o===n&&(n=si.provides=Object.create(o)),n[t]=e}}function _h(t,e,n=!1){const o=si||Di;if(o){const s=o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&dr(e)?e.call(o.proxy):e;process.env.NODE_ENV!=="production"&&at(`injection "${String(t)}" not found.`)}else process.env.NODE_ENV!=="production"&&at("inject() can only be used inside setup() or functional components.")}function la(t,e){return h_(t,null,e)}const Vm={};function Tn(t,e,n){return process.env.NODE_ENV!=="production"&&!dr(e)&&at("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),h_(t,e,n)}function h_(t,e,{immediate:n,deep:o,flush:s,onTrack:f,onTrigger:a}=wn){process.env.NODE_ENV!=="production"&&!e&&(n!==void 0&&at('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),o!==void 0&&at('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const m=ce=>{at("Invalid watch source: ",ce,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},g=Bx()===(si==null?void 0:si.scope)?si:null;let b,E=!1,M=!1;if(cn(t)?(b=()=>t.value,E=Am(t)):ja(t)?(b=()=>t,o=!0):tr(t)?(M=!0,E=t.some(ce=>ja(ce)||Am(ce)),b=()=>t.map(ce=>{if(cn(ce))return ce.value;if(ja(ce))return sc(ce);if(dr(ce))return cl(ce,g,2);process.env.NODE_ENV!=="production"&&m(ce)})):dr(t)?e?b=()=>cl(t,g,2):b=()=>{if(!(g&&g.isUnmounted))return I&&I(),Ea(t,g,3,[P])}:(b=Qi,process.env.NODE_ENV!=="production"&&m(t)),e&&o){const ce=b;b=()=>sc(ce())}let I,P=ce=>{I=X.onStop=()=>{cl(ce,g,4)}},z;if(mp)if(P=Qi,e?n&&Ea(e,g,3,[b(),M?[]:void 0,P]):b(),s==="sync"){const ce=SP();z=ce.__watcherHandles||(ce.__watcherHandles=[])}else return Qi;let V=M?new Array(t.length).fill(Vm):Vm;const q=()=>{if(!!X.active)if(e){const ce=X.run();(o||E||(M?ce.some((ve,Ne)=>Yf(ve,V[Ne])):Yf(ce,V)))&&(I&&I(),Ea(e,g,3,[ce,V===Vm?void 0:M&&V[0]===Vm?[]:V,P]),V=ce)}else X.run()};q.allowRecurse=!!e;let re;s==="sync"?re=q:s==="post"?re=()=>qo(q,g&&g.suspense):(q.pre=!0,g&&(q.id=g.uid),re=()=>Rm(q));const X=new Jv(b,re);process.env.NODE_ENV!=="production"&&(X.onTrack=f,X.onTrigger=a),e?n?q():V=X.run():s==="post"?qo(X.run.bind(X),g&&g.suspense):X.run();const ae=()=>{X.stop(),g&&g.scope&&Gv(g.scope.effects,X)};return z&&z.push(ae),ae}function _A(t,e,n){const o=this.proxy,s=jn(t)?t.includes(".")?Ab(o,t):()=>o[t]:t.bind(o,o);let f;dr(e)?f=e:(f=e.handler,n=e);const a=si;wh(this);const m=h_(s,f.bind(o),n);return a?wh(a):pc(),m}function Ab(t,e){const n=e.split(".");return()=>{let o=t;for(let s=0;s<n.length&&o;s++)o=o[n[s]];return o}}function sc(t,e){if(!un(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),cn(t))sc(t.value,e);else if(tr(t))for(let n=0;n<t.length;n++)sc(t[n],e);else if(kx(t)||Qu(t))t.forEach(n=>{sc(n,e)});else if(Dx(t))for(const n in t)sc(t[n],e);return t}function xA(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ua(()=>{t.isMounted=!0}),Rb(()=>{t.isUnmounting=!0}),t}const Sa=[Function,Array],Pb={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Sa,onEnter:Sa,onAfterEnter:Sa,onEnterCancelled:Sa,onBeforeLeave:Sa,onLeave:Sa,onAfterLeave:Sa,onLeaveCancelled:Sa,onBeforeAppear:Sa,onAppear:Sa,onAfterAppear:Sa,onAppearCancelled:Sa},setup(t,{slots:e}){const n=Km(),o=xA();let s;return()=>{const f=e.default&&Db(e.default(),!0);if(!f||!f.length)return;let a=f[0];if(f.length>1){let V=!1;for(const q of f)if(q.type!==Vi){if(process.env.NODE_ENV!=="production"&&V){at("<transition> can only be used on a single element or component. Use <transition-group> for lists.");break}if(a=q,V=!0,process.env.NODE_ENV==="production")break}}const m=hr(t),{mode:g}=m;if(process.env.NODE_ENV!=="production"&&g&&g!=="in-out"&&g!=="out-in"&&g!=="default"&&at(`invalid <transition> mode: ${g}`),o.isLeaving)return p_(a);const b=Lb(a);if(!b)return p_(a);const E=f_(b,m,o,n);d_(b,E);const M=n.subTree,I=M&&Lb(M);let P=!1;const{getTransitionKey:z}=b.type;if(z){const V=z();s===void 0?s=V:V!==s&&(s=V,P=!0)}if(I&&I.type!==Vi&&(!fc(b,I)||P)){const V=f_(I,m,o,n);if(d_(I,V),g==="out-in")return o.isLeaving=!0,V.afterLeave=()=>{o.isLeaving=!1,n.update.active!==!1&&n.update()},p_(a);g==="in-out"&&b.type!==Vi&&(V.delayLeave=(q,re,X)=>{const ae=kb(o,I);ae[String(I.key)]=I,q._leaveCb=()=>{re(),q._leaveCb=void 0,delete E.delayedLeave},E.delayedLeave=X})}return a}}};function kb(t,e){const{leavingVNodes:n}=t;let o=n.get(e.type);return o||(o=Object.create(null),n.set(e.type,o)),o}function f_(t,e,n,o){const{appear:s,mode:f,persisted:a=!1,onBeforeEnter:m,onEnter:g,onAfterEnter:b,onEnterCancelled:E,onBeforeLeave:M,onLeave:I,onAfterLeave:P,onLeaveCancelled:z,onBeforeAppear:V,onAppear:q,onAfterAppear:re,onAppearCancelled:X}=e,ae=String(t.key),ce=kb(n,t),ve=(Pe,Se)=>{Pe&&Ea(Pe,o,9,Se)},Ne=(Pe,Se)=>{const Ie=Se[1];ve(Pe,Se),tr(Pe)?Pe.every(Ke=>Ke.length<=1)&&Ie():Pe.length<=1&&Ie()},ze={mode:f,persisted:a,beforeEnter(Pe){let Se=m;if(!n.isMounted)if(s)Se=V||m;else return;Pe._leaveCb&&Pe._leaveCb(!0);const Ie=ce[ae];Ie&&fc(t,Ie)&&Ie.el._leaveCb&&Ie.el._leaveCb(),ve(Se,[Pe])},enter(Pe){let Se=g,Ie=b,Ke=E;if(!n.isMounted)if(s)Se=q||g,Ie=re||b,Ke=X||E;else return;let Ge=!1;const st=Pe._enterCb=be=>{Ge||(Ge=!0,be?ve(Ke,[Pe]):ve(Ie,[Pe]),ze.delayedLeave&&ze.delayedLeave(),Pe._enterCb=void 0)};Se?Ne(Se,[Pe,st]):st()},leave(Pe,Se){const Ie=String(t.key);if(Pe._enterCb&&Pe._enterCb(!0),n.isUnmounting)return Se();ve(M,[Pe]);let Ke=!1;const Ge=Pe._leaveCb=st=>{Ke||(Ke=!0,Se(),st?ve(z,[Pe]):ve(P,[Pe]),Pe._leaveCb=void 0,ce[Ie]===t&&delete ce[Ie])};ce[Ie]=t,I?Ne(I,[Pe,Ge]):Ge()},clone(Pe){return f_(Pe,e,n,o)}};return ze}function p_(t){if(up(t))return t=xs(t),t.children=null,t}function Lb(t){return up(t)?t.children?t.children[0]:void 0:t}function d_(t,e){t.shapeFlag&6&&t.component?d_(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Db(t,e=!1,n){let o=[],s=0;for(let f=0;f<t.length;f++){let a=t[f];const m=n==null?a.key:String(n)+String(a.key!=null?a.key:f);a.type===en?(a.patchFlag&128&&s++,o=o.concat(Db(a.children,e,m))):(e||a.type!==Vi)&&o.push(m!=null?xs(a,{key:m}):a)}if(s>1)for(let f=0;f<o.length;f++)o[f].patchFlag=-2;return o}function ir(t){return dr(t)?{setup:t,name:t.name}:t}const lp=t=>!!t.type.__asyncLoader,up=t=>t.type.__isKeepAlive;function bA(t,e){Nb(t,"a",e)}function wA(t,e){Nb(t,"da",e)}function Nb(t,e,n=si){const o=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Um(e,o,n),n){let s=n.parent;for(;s&&s.parent;)up(s.parent.vnode)&&EA(o,e,n,s),s=s.parent}}function EA(t,e,n,o){const s=Um(e,t,o,!0);lu(()=>{Gv(o[e],s)},n)}function Um(t,e,n=si,o=!1){if(n){const s=n[t]||(n[t]=[]),f=e.__weh||(e.__weh=(...a)=>{if(n.isUnmounted)return;nc(),wh(n);const m=Ea(e,n,t,a);return pc(),ic(),m});return o?s.unshift(f):s.push(f),f}else if(process.env.NODE_ENV!=="production"){const s=tc(r_[t].replace(/ hook$/,""));at(`${s} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const hl=t=>(e,n=si)=>(!mp||t==="sp")&&Um(t,(...o)=>e(...o),n),SA=hl("bm"),ua=hl("m"),TA=hl("bu"),MA=hl("u"),Rb=hl("bum"),lu=hl("um"),IA=hl("sp"),OA=hl("rtg"),CA=hl("rtc");function AA(t,e=si){Um("ec",t,e)}function zb(t){nC(t)&&at("Do not use built-in directive ids as custom directive id: "+t)}function jm(t,e){const n=Di;if(n===null)return process.env.NODE_ENV!=="production"&&at("withDirectives can only be used inside render functions."),t;const o=Ym(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let f=0;f<e.length;f++){let[a,m,g,b=wn]=e[f];a&&(dr(a)&&(a={mounted:a,updated:a}),a.deep&&sc(m),s.push({dir:a,instance:o,value:m,oldValue:void 0,arg:g,modifiers:b}))}return t}function lc(t,e,n,o){const s=t.dirs,f=e&&e.dirs;for(let a=0;a<s.length;a++){const m=s[a];f&&(m.oldValue=f[a].value);let g=m.dir[o];g&&(nc(),Ea(g,n,8,[t.el,m,t,e]),ic())}}const m_="components",PA="directives";function kA(t,e){return Fb(m_,t,!0,e)||t}const LA=Symbol();function y_(t){return Fb(PA,t)}function Fb(t,e,n=!0,o=!1){const s=Di||si;if(s){const f=s.type;if(t===m_){const m=P_(f,!1);if(m&&(m===e||m===aa(e)||m===ec(aa(e))))return f}const a=Bb(s[t]||f[t],e)||Bb(s.appContext[t],e);if(!a&&o)return f;if(process.env.NODE_ENV!=="production"&&n&&!a){const m=t===m_?`
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`:"";at(`Failed to resolve ${t.slice(0,-1)}: ${e}${m}`)}return a}else process.env.NODE_ENV!=="production"&&at(`resolve${ec(t.slice(0,-1))} can only be used in render() or setup().`)}function Bb(t,e){return t&&(t[e]||t[aa(e)]||t[ec(aa(e))])}function Ta(t,e,n,o){let s;const f=n&&n[o];if(tr(t)||jn(t)){s=new Array(t.length);for(let a=0,m=t.length;a<m;a++)s[a]=e(t[a],a,void 0,f&&f[a])}else if(typeof t=="number"){process.env.NODE_ENV!=="production"&&!Number.isInteger(t)&&at(`The v-for range expect an integer value but got ${t}.`),s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,f&&f[a])}else if(un(t))if(t[Symbol.iterator])s=Array.from(t,(a,m)=>e(a,m,void 0,f&&f[m]));else{const a=Object.keys(t);s=new Array(a.length);for(let m=0,g=a.length;m<g;m++){const b=a[m];s[m]=e(t[b],b,m,f&&f[m])}}else s=[];return n&&(n[o]=s),s}function Vb(t,e,n={},o,s){if(Di.isCE||Di.parent&&lp(Di.parent)&&Di.parent.isCE)return e!=="default"&&(n.name=e),kt("slot",n,o&&o());let f=t[e];process.env.NODE_ENV!=="production"&&f&&f.length>1&&(at("SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template."),f=()=>[]),f&&f._c&&(f._d=!1),Be();const a=f&&Ub(f(n)),m=tn(en,{key:n.key||a&&a.key||`_${e}`},a||(o?o():[]),a&&t._===1?64:-2);return!s&&m.scopeId&&(m.slotScopeIds=[m.scopeId+"-s"]),f&&f._c&&(f._d=!0),m}function Ub(t){return t.some(e=>bh(e)?!(e.type===Vi||e.type===en&&!Ub(e.children)):!0)?t:null}const g_=t=>t?fw(t)?Ym(t)||t.proxy:g_(t.parent):null,uc=Un(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>process.env.NODE_ENV!=="production"?yh(t.props):t.props,$attrs:t=>process.env.NODE_ENV!=="production"?yh(t.attrs):t.attrs,$slots:t=>process.env.NODE_ENV!=="production"?yh(t.slots):t.slots,$refs:t=>process.env.NODE_ENV!=="production"?yh(t.refs):t.refs,$parent:t=>g_(t.parent),$root:t=>g_(t.root),$emit:t=>t.emit,$options:t=>b_(t),$forceUpdate:t=>t.f||(t.f=()=>Rm(t.update)),$nextTick:t=>t.n||(t.n=Nm.bind(t.proxy)),$watch:t=>_A.bind(t)}),v_=t=>t==="_"||t==="$",__=(t,e)=>t!==wn&&!t.__isScriptSetup&&Ur(t,e),jb={get({_:t},e){const{ctx:n,setupState:o,data:s,props:f,accessCache:a,type:m,appContext:g}=t;if(process.env.NODE_ENV!=="production"&&e==="__isVue")return!0;let b;if(e[0]!=="$"){const P=a[e];if(P!==void 0)switch(P){case 1:return o[e];case 2:return s[e];case 4:return n[e];case 3:return f[e]}else{if(__(o,e))return a[e]=1,o[e];if(s!==wn&&Ur(s,e))return a[e]=2,s[e];if((b=t.propsOptions[0])&&Ur(b,e))return a[e]=3,f[e];if(n!==wn&&Ur(n,e))return a[e]=4,n[e];x_&&(a[e]=0)}}const E=uc[e];let M,I;if(E)return e==="$attrs"&&(Co(t,"get",e),process.env.NODE_ENV!=="production"&&Bm()),E(t);if((M=m.__cssModules)&&(M=M[e]))return M;if(n!==wn&&Ur(n,e))return a[e]=4,n[e];if(I=g.config.globalProperties,Ur(I,e))return I[e];process.env.NODE_ENV!=="production"&&Di&&(!jn(e)||e.indexOf("__v")!==0)&&(s!==wn&&v_(e[0])&&Ur(s,e)?at(`Property ${JSON.stringify(e)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):t===Di&&at(`Property ${JSON.stringify(e)} was accessed during render but is not defined on instance.`))},set({_:t},e,n){const{data:o,setupState:s,ctx:f}=t;return __(s,e)?(s[e]=n,!0):process.env.NODE_ENV!=="production"&&s.__isScriptSetup&&Ur(s,e)?(at(`Cannot mutate <script setup> binding "${e}" from Options API.`),!1):o!==wn&&Ur(o,e)?(o[e]=n,!0):Ur(t.props,e)?(process.env.NODE_ENV!=="production"&&at(`Attempting to mutate prop "${e}". Props are readonly.`),!1):e[0]==="$"&&e.slice(1)in t?(process.env.NODE_ENV!=="production"&&at(`Attempting to mutate public property "${e}". Properties starting with $ are reserved and readonly.`),!1):(process.env.NODE_ENV!=="production"&&e in t.appContext.config.globalProperties?Object.defineProperty(f,e,{enumerable:!0,configurable:!0,value:n}):f[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:o,appContext:s,propsOptions:f}},a){let m;return!!n[a]||t!==wn&&Ur(t,a)||__(e,a)||(m=f[0])&&Ur(m,a)||Ur(o,a)||Ur(uc,a)||Ur(s.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ur(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};process.env.NODE_ENV!=="production"&&(jb.ownKeys=t=>(at("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(t)));function DA(t){const e={};return Object.defineProperty(e,"_",{configurable:!0,enumerable:!1,get:()=>t}),Object.keys(uc).forEach(n=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:()=>uc[n](t),set:Qi})}),e}function NA(t){const{ctx:e,propsOptions:[n]}=t;n&&Object.keys(n).forEach(o=>{Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>t.props[o],set:Qi})})}function RA(t){const{ctx:e,setupState:n}=t;Object.keys(hr(n)).forEach(o=>{if(!n.__isScriptSetup){if(v_(o[0])){at(`setup() return property ${JSON.stringify(o)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>n[o],set:Qi})}})}function zA(){const t=Object.create(null);return(e,n)=>{t[n]?at(`${e} property "${n}" is already defined in ${t[n]}.`):t[n]=e}}let x_=!0;function FA(t){const e=b_(t),n=t.proxy,o=t.ctx;x_=!1,e.beforeCreate&&$b(e.beforeCreate,t,"bc");const{data:s,computed:f,methods:a,watch:m,provide:g,inject:b,created:E,beforeMount:M,mounted:I,beforeUpdate:P,updated:z,activated:V,deactivated:q,beforeDestroy:re,beforeUnmount:X,destroyed:ae,unmounted:ce,render:ve,renderTracked:Ne,renderTriggered:ze,errorCaptured:Pe,serverPrefetch:Se,expose:Ie,inheritAttrs:Ke,components:Ge,directives:st,filters:be}=e,Je=process.env.NODE_ENV!=="production"?zA():null;if(process.env.NODE_ENV!=="production"){const[vt]=t.propsOptions;if(vt)for(const Lt in vt)Je("Props",Lt)}if(b&&BA(b,o,Je,t.appContext.config.unwrapInjectedRef),a)for(const vt in a){const Lt=a[vt];dr(Lt)?(process.env.NODE_ENV!=="production"?Object.defineProperty(o,vt,{value:Lt.bind(n),configurable:!0,enumerable:!0,writable:!0}):o[vt]=Lt.bind(n),process.env.NODE_ENV!=="production"&&Je("Methods",vt)):process.env.NODE_ENV!=="production"&&at(`Method "${vt}" has type "${typeof Lt}" in the component definition. Did you reference the function correctly?`)}if(s){process.env.NODE_ENV!=="production"&&!dr(s)&&at("The data option must be a function. Plain object usage is no longer supported.");const vt=s.call(n,n);if(process.env.NODE_ENV!=="production"&&Wv(vt)&&at("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!un(vt))process.env.NODE_ENV!=="production"&&at("data() should return an object.");else if(t.data=Om(vt),process.env.NODE_ENV!=="production")for(const Lt in vt)Je("Data",Lt),v_(Lt[0])||Object.defineProperty(o,Lt,{configurable:!0,enumerable:!0,get:()=>vt[Lt],set:Qi})}if(x_=!0,f)for(const vt in f){const Lt=f[vt],rr=dr(Lt)?Lt.bind(n,n):dr(Lt.get)?Lt.get.bind(n,n):Qi;process.env.NODE_ENV!=="production"&&rr===Qi&&at(`Computed property "${vt}" has no getter.`);const Nn=!dr(Lt)&&dr(Lt.set)?Lt.set.bind(n):process.env.NODE_ENV!=="production"?()=>{at(`Write operation failed: computed property "${vt}" is readonly.`)}:Qi,zr=ar({get:rr,set:Nn});Object.defineProperty(o,vt,{enumerable:!0,configurable:!0,get:()=>zr.value,set:mr=>zr.value=mr}),process.env.NODE_ENV!=="production"&&Je("Computed",vt)}if(m)for(const vt in m)Gb(m[vt],o,n,vt);if(g){const vt=dr(g)?g.call(n):g;Reflect.ownKeys(vt).forEach(Lt=>{Cb(Lt,vt[Lt])})}E&&$b(E,t,"c");function ht(vt,Lt){tr(Lt)?Lt.forEach(rr=>vt(rr.bind(n))):Lt&&vt(Lt.bind(n))}if(ht(SA,M),ht(ua,I),ht(TA,P),ht(MA,z),ht(bA,V),ht(wA,q),ht(AA,Pe),ht(CA,Ne),ht(OA,ze),ht(Rb,X),ht(lu,ce),ht(IA,Se),tr(Ie))if(Ie.length){const vt=t.exposed||(t.exposed={});Ie.forEach(Lt=>{Object.defineProperty(vt,Lt,{get:()=>n[Lt],set:rr=>n[Lt]=rr})})}else t.exposed||(t.exposed={});ve&&t.render===Qi&&(t.render=ve),Ke!=null&&(t.inheritAttrs=Ke),Ge&&(t.components=Ge),st&&(t.directives=st)}function BA(t,e,n=Qi,o=!1){tr(t)&&(t=w_(t));for(const s in t){const f=t[s];let a;un(f)?"default"in f?a=_h(f.from||s,f.default,!0):a=_h(f.from||s):a=_h(f),cn(a)?o?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>a.value,set:m=>a.value=m}):(process.env.NODE_ENV!=="production"&&at(`injected property "${s}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),e[s]=a):e[s]=a,process.env.NODE_ENV!=="production"&&n("Inject",s)}}function $b(t,e,n){Ea(tr(t)?t.map(o=>o.bind(e.proxy)):t.bind(e.proxy),e,n)}function Gb(t,e,n,o){const s=o.includes(".")?Ab(n,o):()=>n[o];if(jn(t)){const f=e[t];dr(f)?Tn(s,f):process.env.NODE_ENV!=="production"&&at(`Invalid watch handler specified by key "${t}"`,f)}else if(dr(t))Tn(s,t.bind(n));else if(un(t))if(tr(t))t.forEach(f=>Gb(f,e,n,o));else{const f=dr(t.handler)?t.handler.bind(n):e[t.handler];dr(f)?Tn(s,f,t):process.env.NODE_ENV!=="production"&&at(`Invalid watch handler specified by key "${t.handler}"`,f)}else process.env.NODE_ENV!=="production"&&at(`Invalid watch option: "${o}"`,t)}function b_(t){const e=t.type,{mixins:n,extends:o}=e,{mixins:s,optionsCache:f,config:{optionMergeStrategies:a}}=t.appContext,m=f.get(e);let g;return m?g=m:!s.length&&!n&&!o?g=e:(g={},s.length&&s.forEach(b=>$m(g,b,a,!0)),$m(g,e,a)),un(e)&&f.set(e,g),g}function $m(t,e,n,o=!1){const{mixins:s,extends:f}=e;f&&$m(t,f,n,!0),s&&s.forEach(a=>$m(t,a,n,!0));for(const a in e)if(o&&a==="expose")process.env.NODE_ENV!=="production"&&at('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const m=VA[a]||n&&n[a];t[a]=m?m(t[a],e[a]):e[a]}return t}const VA={data:qb,props:cc,emits:cc,methods:cc,computed:cc,beforeCreate:Ao,created:Ao,beforeMount:Ao,mounted:Ao,beforeUpdate:Ao,updated:Ao,beforeDestroy:Ao,beforeUnmount:Ao,destroyed:Ao,unmounted:Ao,activated:Ao,deactivated:Ao,errorCaptured:Ao,serverPrefetch:Ao,components:cc,directives:cc,watch:jA,provide:qb,inject:UA};function qb(t,e){return e?t?function(){return Un(dr(t)?t.call(this,this):t,dr(e)?e.call(this,this):e)}:e:t}function UA(t,e){return cc(w_(t),w_(e))}function w_(t){if(tr(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ao(t,e){return t?[...new Set([].concat(t,e))]:e}function cc(t,e){return t?Un(Un(Object.create(null),t),e):e}function jA(t,e){if(!t)return e;if(!e)return t;const n=Un(Object.create(null),t);for(const o in e)n[o]=Ao(t[o],e[o]);return n}function $A(t,e,n,o=!1){const s={},f={};gm(f,Hm,1),t.propsDefaults=Object.create(null),Wb(t,e,s,f);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);process.env.NODE_ENV!=="production"&&Yb(e||{},s,t),n?t.props=o?s:zC(s):t.type.props?t.props=s:t.props=f,t.attrs=f}function GA(t){for(;t;){if(t.type.__hmrId)return!0;t=t.parent}}function qA(t,e,n,o){const{props:s,attrs:f,vnode:{patchFlag:a}}=t,m=hr(s),[g]=t.propsOptions;let b=!1;if(!(process.env.NODE_ENV!=="production"&&GA(t))&&(o||a>0)&&!(a&16)){if(a&8){const E=t.vnode.dynamicProps;for(let M=0;M<E.length;M++){let I=E[M];if(zm(t.emitsOptions,I))continue;const P=e[I];if(g)if(Ur(f,I))P!==f[I]&&(f[I]=P,b=!0);else{const z=aa(I);s[z]=E_(g,m,z,P,t,!1)}else P!==f[I]&&(f[I]=P,b=!0)}}}else{Wb(t,e,s,f)&&(b=!0);let E;for(const M in m)(!e||!Ur(e,M)&&((E=Go(M))===M||!Ur(e,E)))&&(g?n&&(n[M]!==void 0||n[E]!==void 0)&&(s[M]=E_(g,m,M,void 0,t,!0)):delete s[M]);if(f!==m)for(const M in f)(!e||!Ur(e,M)&&!0)&&(delete f[M],b=!0)}b&&ul(t,"set","$attrs"),process.env.NODE_ENV!=="production"&&Yb(e||{},s,t)}function Wb(t,e,n,o){const[s,f]=t.propsOptions;let a=!1,m;if(e)for(let g in e){if(mm(g))continue;const b=e[g];let E;s&&Ur(s,E=aa(g))?!f||!f.includes(E)?n[E]=b:(m||(m={}))[E]=b:zm(t.emitsOptions,g)||(!(g in o)||b!==o[g])&&(o[g]=b,a=!0)}if(f){const g=hr(n),b=m||wn;for(let E=0;E<f.length;E++){const M=f[E];n[M]=E_(s,g,M,b[M],t,!Ur(b,M))}}return a}function E_(t,e,n,o,s,f){const a=t[n];if(a!=null){const m=Ur(a,"default");if(m&&o===void 0){const g=a.default;if(a.type!==Function&&dr(g)){const{propsDefaults:b}=s;n in b?o=b[n]:(wh(s),o=b[n]=g.call(null,e),pc())}else o=g}a[0]&&(f&&!m?o=!1:a[1]&&(o===""||o===Go(n))&&(o=!0))}return o}function Hb(t,e,n=!1){const o=e.propsCache,s=o.get(t);if(s)return s;const f=t.props,a={},m=[];let g=!1;if(!dr(t)){const E=M=>{g=!0;const[I,P]=Hb(M,e,!0);Un(a,I),P&&m.push(...P)};!n&&e.mixins.length&&e.mixins.forEach(E),t.extends&&E(t.extends),t.mixins&&t.mixins.forEach(E)}if(!f&&!g)return un(t)&&o.set(t,dh),dh;if(tr(f))for(let E=0;E<f.length;E++){process.env.NODE_ENV!=="production"&&!jn(f[E])&&at("props must be strings when using array syntax.",f[E]);const M=aa(f[E]);Zb(M)&&(a[M]=wn)}else if(f){process.env.NODE_ENV!=="production"&&!un(f)&&at("invalid props options",f);for(const E in f){const M=aa(E);if(Zb(M)){const I=f[E],P=a[M]=tr(I)||dr(I)?{type:I}:Object.assign({},I);if(P){const z=Kb(Boolean,P.type),V=Kb(String,P.type);P[0]=z>-1,P[1]=V<0||z<V,(z>-1||Ur(P,"default"))&&m.push(M)}}}}const b=[a,m];return un(t)&&o.set(t,b),b}function Zb(t){return t[0]!=="$"?!0:(process.env.NODE_ENV!=="production"&&at(`Invalid prop name: "${t}" is a reserved property.`),!1)}function S_(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Xb(t,e){return S_(t)===S_(e)}function Kb(t,e){return tr(e)?e.findIndex(n=>Xb(n,t)):dr(e)&&Xb(e,t)?0:-1}function Yb(t,e,n){const o=hr(e),s=n.propsOptions[0];for(const f in s){let a=s[f];a!=null&&WA(f,o[f],a,!Ur(t,f)&&!Ur(t,Go(f)))}}function WA(t,e,n,o){const{type:s,required:f,validator:a}=n;if(f&&o){at('Missing required prop: "'+t+'"');return}if(!(e==null&&!n.required)){if(s!=null&&s!==!0){let m=!1;const g=tr(s)?s:[s],b=[];for(let E=0;E<g.length&&!m;E++){const{valid:M,expectedType:I}=ZA(e,g[E]);b.push(I||""),m=M}if(!m){at(XA(t,e,b));return}}a&&!a(e)&&at('Invalid prop: custom validator check failed for prop "'+t+'".')}}const HA=Ql("String,Number,Boolean,Function,Symbol,BigInt");function ZA(t,e){let n;const o=S_(e);if(HA(o)){const s=typeof t;n=s===o.toLowerCase(),!n&&s==="object"&&(n=t instanceof e)}else o==="Object"?n=un(t):o==="Array"?n=tr(t):o==="null"?n=t===null:n=t instanceof e;return{valid:n,expectedType:o}}function XA(t,e,n){let o=`Invalid prop: type check failed for prop "${t}". Expected ${n.map(ec).join(" | ")}`;const s=n[0],f=Hv(e),a=Jb(e,s),m=Jb(e,f);return n.length===1&&Qb(s)&&!KA(s,f)&&(o+=` with value ${a}`),o+=`, got ${f} `,Qb(f)&&(o+=`with value ${m}.`),o}function Jb(t,e){return e==="String"?`"${t}"`:e==="Number"?`${Number(t)}`:`${t}`}function Qb(t){return["string","number","boolean"].some(n=>t.toLowerCase()===n)}function KA(...t){return t.some(e=>e.toLowerCase()==="boolean")}const ew=t=>t[0]==="_"||t==="$stable",T_=t=>tr(t)?t.map(qa):[qa(t)],YA=(t,e,n)=>{if(e._n)return e;const o=su((...s)=>(process.env.NODE_ENV!=="production"&&si&&at(`Slot "${t}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),T_(e(...s))),n);return o._c=!1,o},tw=(t,e,n)=>{const o=t._ctx;for(const s in t){if(ew(s))continue;const f=t[s];if(dr(f))e[s]=YA(s,f,o);else if(f!=null){process.env.NODE_ENV!=="production"&&at(`Non-function value encountered for slot "${s}". Prefer function slots for better performance.`);const a=T_(f);e[s]=()=>a}}},rw=(t,e)=>{process.env.NODE_ENV!=="production"&&!up(t.vnode)&&at("Non-function value encountered for default slot. Prefer function slots for better performance.");const n=T_(e);t.slots.default=()=>n},JA=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=hr(e),gm(e,"_",n)):tw(e,t.slots={})}else t.slots={},e&&rw(t,e);gm(t.slots,Hm,1)},QA=(t,e,n)=>{const{vnode:o,slots:s}=t;let f=!0,a=wn;if(o.shapeFlag&32){const m=e._;m?process.env.NODE_ENV!=="production"&&au?Un(s,e):n&&m===1?f=!1:(Un(s,e),!n&&m===1&&delete s._):(f=!e.$stable,tw(e,s)),a=e}else e&&(rw(t,e),a={default:1});if(f)for(const m in s)!ew(m)&&!(m in a)&&delete s[m]};function nw(){return{app:null,config:{isNativeTag:Px,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let eP=0;function tP(t,e){return function(o,s=null){dr(o)||(o=Object.assign({},o)),s!=null&&!un(s)&&(process.env.NODE_ENV!=="production"&&at("root props passed to app.mount() must be an object."),s=null);const f=nw(),a=new Set;let m=!1;const g=f.app={_uid:eP++,_component:o,_props:s,_container:null,_context:f,_instance:null,version:vw,get config(){return f.config},set config(b){process.env.NODE_ENV!=="production"&&at("app.config cannot be replaced. Modify individual options instead.")},use(b,...E){return a.has(b)?process.env.NODE_ENV!=="production"&&at("Plugin has already been applied to target app."):b&&dr(b.install)?(a.add(b),b.install(g,...E)):dr(b)?(a.add(b),b(g,...E)):process.env.NODE_ENV!=="production"&&at('A plugin must either be a function or an object with an "install" function.'),g},mixin(b){return f.mixins.includes(b)?process.env.NODE_ENV!=="production"&&at("Mixin has already been applied to target app"+(b.name?`: ${b.name}`:"")):f.mixins.push(b),g},component(b,E){return process.env.NODE_ENV!=="production"&&C_(b,f.config),E?(process.env.NODE_ENV!=="production"&&f.components[b]&&at(`Component "${b}" has already been registered in target app.`),f.components[b]=E,g):f.components[b]},directive(b,E){return process.env.NODE_ENV!=="production"&&zb(b),E?(process.env.NODE_ENV!=="production"&&f.directives[b]&&at(`Directive "${b}" has already been registered in target app.`),f.directives[b]=E,g):f.directives[b]},mount(b,E,M){if(m)process.env.NODE_ENV!=="production"&&at("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{process.env.NODE_ENV!=="production"&&b.__vue_app__&&at("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const I=kt(o,s);return I.appContext=f,process.env.NODE_ENV!=="production"&&(f.reload=()=>{t(xs(I),b,M)}),E&&e?e(I,b):t(I,b,M),m=!0,g._container=b,b.__vue_app__=g,process.env.NODE_ENV!=="production"&&(g._instance=I.component,nA(g,vw)),Ym(I.component)||I.component.proxy}},unmount(){m?(t(null,g._container),process.env.NODE_ENV!=="production"&&(g._instance=null,iA(g)),delete g._container.__vue_app__):process.env.NODE_ENV!=="production"&&at("Cannot unmount an app that is not mounted.")},provide(b,E){return process.env.NODE_ENV!=="production"&&b in f.provides&&at(`App already provides property with key "${String(b)}". It will be overwritten with the new value.`),f.provides[b]=E,g}};return g}}function M_(t,e,n,o,s=!1){if(tr(t)){t.forEach((I,P)=>M_(I,e&&(tr(e)?e[P]:e),n,o,s));return}if(lp(o)&&!s)return;const f=o.shapeFlag&4?Ym(o.component)||o.component.proxy:o.el,a=s?null:f,{i:m,r:g}=t;if(process.env.NODE_ENV!=="production"&&!m){at("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const b=e&&e.r,E=m.refs===wn?m.refs={}:m.refs,M=m.setupState;if(b!=null&&b!==g&&(jn(b)?(E[b]=null,Ur(M,b)&&(M[b]=null)):cn(b)&&(b.value=null)),dr(g))cl(g,m,12,[a,E]);else{const I=jn(g),P=cn(g);if(I||P){const z=()=>{if(t.f){const V=I?Ur(M,g)?M[g]:E[g]:g.value;s?tr(V)&&Gv(V,f):tr(V)?V.includes(f)||V.push(f):I?(E[g]=[f],Ur(M,g)&&(M[g]=E[g])):(g.value=[f],t.k&&(E[t.k]=g.value))}else I?(E[g]=a,Ur(M,g)&&(M[g]=a)):P?(g.value=a,t.k&&(E[t.k]=a)):process.env.NODE_ENV!=="production"&&at("Invalid template ref type:",g,`(${typeof g})`)};a?(z.id=-1,qo(z,n)):z()}else process.env.NODE_ENV!=="production"&&at("Invalid template ref type:",g,`(${typeof g})`)}}let cp,uu;function fl(t,e){t.appContext.config.performance&&Gm()&&uu.mark(`vue-${e}-${t.uid}`),process.env.NODE_ENV!=="production"&&lA(t,e,Gm()?uu.now():Date.now())}function pl(t,e){if(t.appContext.config.performance&&Gm()){const n=`vue-${e}-${t.uid}`,o=n+":end";uu.mark(o),uu.measure(`<${Jm(t,t.type)}> ${e}`,n,o),uu.clearMarks(n),uu.clearMarks(o)}process.env.NODE_ENV!=="production"&&uA(t,e,Gm()?uu.now():Date.now())}function Gm(){return cp!==void 0||(typeof window<"u"&&window.performance?(cp=!0,uu=window.performance):cp=!1),cp}function rP(){const t=[];if(process.env.NODE_ENV!=="production"&&t.length){const e=t.length>1;console.warn(`Feature flag${e?"s":""} ${t.join(", ")} ${e?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const qo=vA;function nP(t){return iP(t)}function iP(t,e){rP();const n=Rx();n.__VUE__=!0,process.env.NODE_ENV!=="production"&&bb(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:o,remove:s,patchProp:f,createElement:a,createText:m,createComment:g,setText:b,setElementText:E,parentNode:M,nextSibling:I,setScopeId:P=Qi,insertStaticContent:z}=t,V=(K,ye,Re,qe=null,We=null,nt=null,mt=!1,et=null,ut=process.env.NODE_ENV!=="production"&&au?!1:!!ye.dynamicChildren)=>{if(K===ye)return;K&&!fc(K,ye)&&(qe=qn(K),Jn(K,We,nt,!0),K=null),ye.patchFlag===-2&&(ut=!1,ye.dynamicChildren=null);const{type:Qe,ref:Ot,shapeFlag:bt}=ye;switch(Qe){case fp:q(K,ye,Re,qe);break;case Vi:re(K,ye,Re,qe);break;case Wm:K==null?X(ye,Re,qe,mt):process.env.NODE_ENV!=="production"&&ae(K,ye,Re,mt);break;case en:st(K,ye,Re,qe,We,nt,mt,et,ut);break;default:bt&1?Ne(K,ye,Re,qe,We,nt,mt,et,ut):bt&6?be(K,ye,Re,qe,We,nt,mt,et,ut):bt&64||bt&128?Qe.process(K,ye,Re,qe,We,nt,mt,et,ut,Mn):process.env.NODE_ENV!=="production"&&at("Invalid VNode type:",Qe,`(${typeof Qe})`)}Ot!=null&&We&&M_(Ot,K&&K.ref,nt,ye||K,!ye)},q=(K,ye,Re,qe)=>{if(K==null)o(ye.el=m(ye.children),Re,qe);else{const We=ye.el=K.el;ye.children!==K.children&&b(We,ye.children)}},re=(K,ye,Re,qe)=>{K==null?o(ye.el=g(ye.children||""),Re,qe):ye.el=K.el},X=(K,ye,Re,qe)=>{[K.el,K.anchor]=z(K.children,ye,Re,qe,K.el,K.anchor)},ae=(K,ye,Re,qe)=>{if(ye.children!==K.children){const We=I(K.anchor);ve(K),[ye.el,ye.anchor]=z(ye.children,Re,We,qe)}else ye.el=K.el,ye.anchor=K.anchor},ce=({el:K,anchor:ye},Re,qe)=>{let We;for(;K&&K!==ye;)We=I(K),o(K,Re,qe),K=We;o(ye,Re,qe)},ve=({el:K,anchor:ye})=>{let Re;for(;K&&K!==ye;)Re=I(K),s(K),K=Re;s(ye)},Ne=(K,ye,Re,qe,We,nt,mt,et,ut)=>{mt=mt||ye.type==="svg",K==null?ze(ye,Re,qe,We,nt,mt,et,ut):Ie(K,ye,We,nt,mt,et,ut)},ze=(K,ye,Re,qe,We,nt,mt,et)=>{let ut,Qe;const{type:Ot,props:bt,shapeFlag:Dt,transition:jt,dirs:yr}=K;if(ut=K.el=a(K.type,nt,bt&&bt.is,bt),Dt&8?E(ut,K.children):Dt&16&&Se(K.children,ut,null,qe,We,nt&&Ot!=="foreignObject",mt,et),yr&&lc(K,null,qe,"created"),Pe(ut,K,K.scopeId,mt,qe),bt){for(const Lr in bt)Lr!=="value"&&!mm(Lr)&&f(ut,Lr,null,bt[Lr],nt,K.children,qe,We,kr);"value"in bt&&f(ut,"value",null,bt.value),(Qe=bt.onVnodeBeforeMount)&&bs(Qe,qe,K)}process.env.NODE_ENV!=="production"&&(Object.defineProperty(ut,"__vnode",{value:K,enumerable:!1}),Object.defineProperty(ut,"__vueParentComponent",{value:qe,enumerable:!1})),yr&&lc(K,null,qe,"beforeMount");const jr=(!We||We&&!We.pendingBranch)&&jt&&!jt.persisted;jr&&jt.beforeEnter(ut),o(ut,ye,Re),((Qe=bt&&bt.onVnodeMounted)||jr||yr)&&qo(()=>{Qe&&bs(Qe,qe,K),jr&&jt.enter(ut),yr&&lc(K,null,qe,"mounted")},We)},Pe=(K,ye,Re,qe,We)=>{if(Re&&P(K,Re),qe)for(let nt=0;nt<qe.length;nt++)P(K,qe[nt]);if(We){let nt=We.subTree;if(process.env.NODE_ENV!=="production"&&nt.patchFlag>0&&nt.patchFlag&2048&&(nt=Mb(nt.children)||nt),ye===nt){const mt=We.vnode;Pe(K,mt,mt.scopeId,mt.slotScopeIds,We.parent)}}},Se=(K,ye,Re,qe,We,nt,mt,et,ut=0)=>{for(let Qe=ut;Qe<K.length;Qe++){const Ot=K[Qe]=et?cu(K[Qe]):qa(K[Qe]);V(null,Ot,ye,Re,qe,We,nt,mt,et)}},Ie=(K,ye,Re,qe,We,nt,mt)=>{const et=ye.el=K.el;let{patchFlag:ut,dynamicChildren:Qe,dirs:Ot}=ye;ut|=K.patchFlag&16;const bt=K.props||wn,Dt=ye.props||wn;let jt;Re&&hc(Re,!1),(jt=Dt.onVnodeBeforeUpdate)&&bs(jt,Re,ye,K),Ot&&lc(ye,K,Re,"beforeUpdate"),Re&&hc(Re,!0),process.env.NODE_ENV!=="production"&&au&&(ut=0,mt=!1,Qe=null);const yr=We&&ye.type!=="foreignObject";if(Qe?(Ke(K.dynamicChildren,Qe,et,Re,qe,yr,nt),process.env.NODE_ENV!=="production"&&Re&&Re.type.__hmrId&&hp(K,ye)):mt||rr(K,ye,et,null,Re,qe,yr,nt,!1),ut>0){if(ut&16)Ge(et,ye,bt,Dt,Re,qe,We);else if(ut&2&&bt.class!==Dt.class&&f(et,"class",null,Dt.class,We),ut&4&&f(et,"style",bt.style,Dt.style,We),ut&8){const jr=ye.dynamicProps;for(let Lr=0;Lr<jr.length;Lr++){const Qr=jr[Lr],Qn=bt[Qr],Gi=Dt[Qr];(Gi!==Qn||Qr==="value")&&f(et,Qr,Qn,Gi,We,K.children,Re,qe,kr)}}ut&1&&K.children!==ye.children&&E(et,ye.children)}else!mt&&Qe==null&&Ge(et,ye,bt,Dt,Re,qe,We);((jt=Dt.onVnodeUpdated)||Ot)&&qo(()=>{jt&&bs(jt,Re,ye,K),Ot&&lc(ye,K,Re,"updated")},qe)},Ke=(K,ye,Re,qe,We,nt,mt)=>{for(let et=0;et<ye.length;et++){const ut=K[et],Qe=ye[et],Ot=ut.el&&(ut.type===en||!fc(ut,Qe)||ut.shapeFlag&70)?M(ut.el):Re;V(ut,Qe,Ot,null,qe,We,nt,mt,!0)}},Ge=(K,ye,Re,qe,We,nt,mt)=>{if(Re!==qe){if(Re!==wn)for(const et in Re)!mm(et)&&!(et in qe)&&f(K,et,Re[et],null,mt,ye.children,We,nt,kr);for(const et in qe){if(mm(et))continue;const ut=qe[et],Qe=Re[et];ut!==Qe&&et!=="value"&&f(K,et,Qe,ut,mt,ye.children,We,nt,kr)}"value"in qe&&f(K,"value",Re.value,qe.value)}},st=(K,ye,Re,qe,We,nt,mt,et,ut)=>{const Qe=ye.el=K?K.el:m(""),Ot=ye.anchor=K?K.anchor:m("");let{patchFlag:bt,dynamicChildren:Dt,slotScopeIds:jt}=ye;process.env.NODE_ENV!=="production"&&(au||bt&2048)&&(bt=0,ut=!1,Dt=null),jt&&(et=et?et.concat(jt):jt),K==null?(o(Qe,Re,qe),o(Ot,Re,qe),Se(ye.children,Re,Ot,We,nt,mt,et,ut)):bt>0&&bt&64&&Dt&&K.dynamicChildren?(Ke(K.dynamicChildren,Dt,Re,We,nt,mt,et),process.env.NODE_ENV!=="production"&&We&&We.type.__hmrId?hp(K,ye):(ye.key!=null||We&&ye===We.subTree)&&hp(K,ye,!0)):rr(K,ye,Re,Ot,We,nt,mt,et,ut)},be=(K,ye,Re,qe,We,nt,mt,et,ut)=>{ye.slotScopeIds=et,K==null?ye.shapeFlag&512?We.ctx.activate(ye,Re,qe,mt,ut):Je(ye,Re,qe,We,nt,mt,ut):ht(K,ye,ut)},Je=(K,ye,Re,qe,We,nt,mt)=>{const et=K.component=mP(K,qe,We);if(process.env.NODE_ENV!=="production"&&et.type.__hmrId&&QC(et),process.env.NODE_ENV!=="production"&&(km(K),fl(et,"mount")),up(K)&&(et.ctx.renderer=Mn),process.env.NODE_ENV!=="production"&&fl(et,"init"),gP(et),process.env.NODE_ENV!=="production"&&pl(et,"init"),et.asyncDep){if(We&&We.registerDep(et,vt),!K.el){const ut=et.subTree=kt(Vi);re(null,ut,ye,Re)}return}vt(et,K,ye,Re,We,nt,mt),process.env.NODE_ENV!=="production"&&(Lm(),pl(et,"mount"))},ht=(K,ye,Re)=>{const qe=ye.component=K.component;if(mA(K,ye,Re))if(qe.asyncDep&&!qe.asyncResolved){process.env.NODE_ENV!=="production"&&km(ye),Lt(qe,ye,Re),process.env.NODE_ENV!=="production"&&Lm();return}else qe.next=ye,YC(qe.update),qe.update();else ye.el=K.el,qe.vnode=ye},vt=(K,ye,Re,qe,We,nt,mt)=>{const et=()=>{if(K.isMounted){let{next:Ot,bu:bt,u:Dt,parent:jt,vnode:yr}=K,jr=Ot,Lr;process.env.NODE_ENV!=="production"&&km(Ot||K.vnode),hc(K,!1),Ot?(Ot.el=yr.el,Lt(K,Ot,mt)):Ot=yr,bt&&Jf(bt),(Lr=Ot.props&&Ot.props.onVnodeBeforeUpdate)&&bs(Lr,jt,Ot,yr),hc(K,!0),process.env.NODE_ENV!=="production"&&fl(K,"render");const Qr=c_(K);process.env.NODE_ENV!=="production"&&pl(K,"render");const Qn=K.subTree;K.subTree=Qr,process.env.NODE_ENV!=="production"&&fl(K,"patch"),V(Qn,Qr,M(Qn.el),qn(Qn),K,We,nt),process.env.NODE_ENV!=="production"&&pl(K,"patch"),Ot.el=Qr.el,jr===null&&yA(K,Qr.el),Dt&&qo(Dt,We),(Lr=Ot.props&&Ot.props.onVnodeUpdated)&&qo(()=>bs(Lr,jt,Ot,yr),We),process.env.NODE_ENV!=="production"&&wb(K),process.env.NODE_ENV!=="production"&&Lm()}else{let Ot;const{el:bt,props:Dt}=ye,{bm:jt,m:yr,parent:jr}=K,Lr=lp(ye);if(hc(K,!1),jt&&Jf(jt),!Lr&&(Ot=Dt&&Dt.onVnodeBeforeMount)&&bs(Ot,jr,ye),hc(K,!0),bt&&Wn){const Qr=()=>{process.env.NODE_ENV!=="production"&&fl(K,"render"),K.subTree=c_(K),process.env.NODE_ENV!=="production"&&pl(K,"render"),process.env.NODE_ENV!=="production"&&fl(K,"hydrate"),Wn(bt,K.subTree,K,We,null),process.env.NODE_ENV!=="production"&&pl(K,"hydrate")};Lr?ye.type.__asyncLoader().then(()=>!K.isUnmounted&&Qr()):Qr()}else{process.env.NODE_ENV!=="production"&&fl(K,"render");const Qr=K.subTree=c_(K);process.env.NODE_ENV!=="production"&&pl(K,"render"),process.env.NODE_ENV!=="production"&&fl(K,"patch"),V(null,Qr,Re,qe,K,We,nt),process.env.NODE_ENV!=="production"&&pl(K,"patch"),ye.el=Qr.el}if(yr&&qo(yr,We),!Lr&&(Ot=Dt&&Dt.onVnodeMounted)){const Qr=ye;qo(()=>bs(Ot,jr,Qr),We)}(ye.shapeFlag&256||jr&&lp(jr.vnode)&&jr.vnode.shapeFlag&256)&&K.a&&qo(K.a,We),K.isMounted=!0,process.env.NODE_ENV!=="production"&&oA(K),ye=Re=qe=null}},ut=K.effect=new Jv(et,()=>Rm(Qe),K.scope),Qe=K.update=()=>ut.run();Qe.id=K.uid,hc(K,!0),process.env.NODE_ENV!=="production"&&(ut.onTrack=K.rtc?Ot=>Jf(K.rtc,Ot):void 0,ut.onTrigger=K.rtg?Ot=>Jf(K.rtg,Ot):void 0,Qe.ownerInstance=K),Qe()},Lt=(K,ye,Re)=>{ye.component=K;const qe=K.vnode.props;K.vnode=ye,K.next=null,qA(K,ye.props,qe,Re),QA(K,ye.children,Re),nc(),yb(),ic()},rr=(K,ye,Re,qe,We,nt,mt,et,ut=!1)=>{const Qe=K&&K.children,Ot=K?K.shapeFlag:0,bt=ye.children,{patchFlag:Dt,shapeFlag:jt}=ye;if(Dt>0){if(Dt&128){zr(Qe,bt,Re,qe,We,nt,mt,et,ut);return}else if(Dt&256){Nn(Qe,bt,Re,qe,We,nt,mt,et,ut);return}}jt&8?(Ot&16&&kr(Qe,We,nt),bt!==Qe&&E(Re,bt)):Ot&16?jt&16?zr(Qe,bt,Re,qe,We,nt,mt,et,ut):kr(Qe,We,nt,!0):(Ot&8&&E(Re,""),jt&16&&Se(bt,Re,qe,We,nt,mt,et,ut))},Nn=(K,ye,Re,qe,We,nt,mt,et,ut)=>{K=K||dh,ye=ye||dh;const Qe=K.length,Ot=ye.length,bt=Math.min(Qe,Ot);let Dt;for(Dt=0;Dt<bt;Dt++){const jt=ye[Dt]=ut?cu(ye[Dt]):qa(ye[Dt]);V(K[Dt],jt,Re,null,We,nt,mt,et,ut)}Qe>Ot?kr(K,We,nt,!0,!1,bt):Se(ye,Re,qe,We,nt,mt,et,ut,bt)},zr=(K,ye,Re,qe,We,nt,mt,et,ut)=>{let Qe=0;const Ot=ye.length;let bt=K.length-1,Dt=Ot-1;for(;Qe<=bt&&Qe<=Dt;){const jt=K[Qe],yr=ye[Qe]=ut?cu(ye[Qe]):qa(ye[Qe]);if(fc(jt,yr))V(jt,yr,Re,null,We,nt,mt,et,ut);else break;Qe++}for(;Qe<=bt&&Qe<=Dt;){const jt=K[bt],yr=ye[Dt]=ut?cu(ye[Dt]):qa(ye[Dt]);if(fc(jt,yr))V(jt,yr,Re,null,We,nt,mt,et,ut);else break;bt--,Dt--}if(Qe>bt){if(Qe<=Dt){const jt=Dt+1,yr=jt<Ot?ye[jt].el:qe;for(;Qe<=Dt;)V(null,ye[Qe]=ut?cu(ye[Qe]):qa(ye[Qe]),Re,yr,We,nt,mt,et,ut),Qe++}}else if(Qe>Dt)for(;Qe<=bt;)Jn(K[Qe],We,nt,!0),Qe++;else{const jt=Qe,yr=Qe,jr=new Map;for(Qe=yr;Qe<=Dt;Qe++){const In=ye[Qe]=ut?cu(ye[Qe]):qa(ye[Qe]);In.key!=null&&(process.env.NODE_ENV!=="production"&&jr.has(In.key)&&at("Duplicate keys found during update:",JSON.stringify(In.key),"Make sure keys are unique."),jr.set(In.key,Qe))}let Lr,Qr=0;const Qn=Dt-yr+1;let Gi=!1,_o=0;const ei=new Array(Qn);for(Qe=0;Qe<Qn;Qe++)ei[Qe]=0;for(Qe=jt;Qe<=bt;Qe++){const In=K[Qe];if(Qr>=Qn){Jn(In,We,nt,!0);continue}let fi;if(In.key!=null)fi=jr.get(In.key);else for(Lr=yr;Lr<=Dt;Lr++)if(ei[Lr-yr]===0&&fc(In,ye[Lr])){fi=Lr;break}fi===void 0?Jn(In,We,nt,!0):(ei[fi-yr]=Qe+1,fi>=_o?_o=fi:Gi=!0,V(In,ye[fi],Re,null,We,nt,mt,et,ut),Qr++)}const Ri=Gi?oP(ei):dh;for(Lr=Ri.length-1,Qe=Qn-1;Qe>=0;Qe--){const In=yr+Qe,fi=ye[In],ss=In+1<Ot?ye[In+1].el:qe;ei[Qe]===0?V(null,fi,Re,ss,We,nt,mt,et,ut):Gi&&(Lr<0||Qe!==Ri[Lr]?mr(fi,Re,ss,2):Lr--)}}},mr=(K,ye,Re,qe,We=null)=>{const{el:nt,type:mt,transition:et,children:ut,shapeFlag:Qe}=K;if(Qe&6){mr(K.component.subTree,ye,Re,qe);return}if(Qe&128){K.suspense.move(ye,Re,qe);return}if(Qe&64){mt.move(K,ye,Re,Mn);return}if(mt===en){o(nt,ye,Re);for(let bt=0;bt<ut.length;bt++)mr(ut[bt],ye,Re,qe);o(K.anchor,ye,Re);return}if(mt===Wm){ce(K,ye,Re);return}if(qe!==2&&Qe&1&&et)if(qe===0)et.beforeEnter(nt),o(nt,ye,Re),qo(()=>et.enter(nt),We);else{const{leave:bt,delayLeave:Dt,afterLeave:jt}=et,yr=()=>o(nt,ye,Re),jr=()=>{bt(nt,()=>{yr(),jt&&jt()})};Dt?Dt(nt,yr,jr):jr()}else o(nt,ye,Re)},Jn=(K,ye,Re,qe=!1,We=!1)=>{const{type:nt,props:mt,ref:et,children:ut,dynamicChildren:Qe,shapeFlag:Ot,patchFlag:bt,dirs:Dt}=K;if(et!=null&&M_(et,null,Re,K,!0),Ot&256){ye.ctx.deactivate(K);return}const jt=Ot&1&&Dt,yr=!lp(K);let jr;if(yr&&(jr=mt&&mt.onVnodeBeforeUnmount)&&bs(jr,ye,K),Ot&6)qr(K.component,Re,qe);else{if(Ot&128){K.suspense.unmount(Re,qe);return}jt&&lc(K,null,ye,"beforeUnmount"),Ot&64?K.type.remove(K,ye,Re,We,Mn,qe):Qe&&(nt!==en||bt>0&&bt&64)?kr(Qe,ye,Re,!1,!0):(nt===en&&bt&384||!We&&Ot&16)&&kr(ut,ye,Re),qe&&Fr(K)}(yr&&(jr=mt&&mt.onVnodeUnmounted)||jt)&&qo(()=>{jr&&bs(jr,ye,K),jt&&lc(K,null,ye,"unmounted")},Re)},Fr=K=>{const{type:ye,el:Re,anchor:qe,transition:We}=K;if(ye===en){process.env.NODE_ENV!=="production"&&K.patchFlag>0&&K.patchFlag&2048&&We&&!We.persisted?K.children.forEach(mt=>{mt.type===Vi?s(mt.el):Fr(mt)}):$i(Re,qe);return}if(ye===Wm){ve(K);return}const nt=()=>{s(Re),We&&!We.persisted&&We.afterLeave&&We.afterLeave()};if(K.shapeFlag&1&&We&&!We.persisted){const{leave:mt,delayLeave:et}=We,ut=()=>mt(Re,nt);et?et(K.el,nt,ut):ut()}else nt()},$i=(K,ye)=>{let Re;for(;K!==ye;)Re=I(K),s(K),K=Re;s(ye)},qr=(K,ye,Re)=>{process.env.NODE_ENV!=="production"&&K.type.__hmrId&&eA(K);const{bum:qe,scope:We,update:nt,subTree:mt,um:et}=K;qe&&Jf(qe),We.stop(),nt&&(nt.active=!1,Jn(mt,K,ye,Re)),et&&qo(et,ye),qo(()=>{K.isUnmounted=!0},ye),ye&&ye.pendingBranch&&!ye.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===ye.pendingId&&(ye.deps--,ye.deps===0&&ye.resolve()),process.env.NODE_ENV!=="production"&&sA(K)},kr=(K,ye,Re,qe=!1,We=!1,nt=0)=>{for(let mt=nt;mt<K.length;mt++)Jn(K[mt],ye,Re,qe,We)},qn=K=>K.shapeFlag&6?qn(K.component.subTree):K.shapeFlag&128?K.suspense.next():I(K.anchor||K.el),Mr=(K,ye,Re)=>{K==null?ye._vnode&&Jn(ye._vnode,null,null,!0):V(ye._vnode||null,K,ye,null,null,null,Re),yb(),gb(),ye._vnode=K},Mn={p:V,um:Jn,m:mr,r:Fr,mt:Je,mc:Se,pc:rr,pbc:Ke,n:qn,o:t};let hi,Wn;return e&&([hi,Wn]=e(Mn)),{render:Mr,hydrate:hi,createApp:tP(Mr,hi)}}function hc({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function hp(t,e,n=!1){const o=t.children,s=e.children;if(tr(o)&&tr(s))for(let f=0;f<o.length;f++){const a=o[f];let m=s[f];m.shapeFlag&1&&!m.dynamicChildren&&((m.patchFlag<=0||m.patchFlag===32)&&(m=s[f]=cu(s[f]),m.el=a.el),n||hp(a,m)),m.type===fp&&(m.el=a.el),process.env.NODE_ENV!=="production"&&m.type===Vi&&!m.el&&(m.el=a.el)}}function oP(t){const e=t.slice(),n=[0];let o,s,f,a,m;const g=t.length;for(o=0;o<g;o++){const b=t[o];if(b!==0){if(s=n[n.length-1],t[s]<b){e[o]=s,n.push(o);continue}for(f=0,a=n.length-1;f<a;)m=f+a>>1,t[n[m]]<b?f=m+1:a=m;b<t[n[f]]&&(f>0&&(e[o]=n[f-1]),n[f]=o)}}for(f=n.length,a=n[f-1];f-- >0;)n[f]=a,a=e[a];return n}const aP=t=>t.__isTeleport,xh=t=>t&&(t.disabled||t.disabled===""),iw=t=>typeof SVGElement<"u"&&t instanceof SVGElement,I_=(t,e)=>{const n=t&&t.to;if(jn(n))if(e){const o=e(n);return o||process.env.NODE_ENV!=="production"&&at(`Failed to locate Teleport target with selector "${n}". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`),o}else return process.env.NODE_ENV!=="production"&&at("Current renderer does not support string target for Teleports. (missing querySelector renderer option)"),null;else return process.env.NODE_ENV!=="production"&&!n&&!xh(t)&&at(`Invalid Teleport target: ${n}`),n},sP={__isTeleport:!0,process(t,e,n,o,s,f,a,m,g,b){const{mc:E,pc:M,pbc:I,o:{insert:P,querySelector:z,createText:V,createComment:q}}=b,re=xh(e.props);let{shapeFlag:X,children:ae,dynamicChildren:ce}=e;if(process.env.NODE_ENV!=="production"&&au&&(g=!1,ce=null),t==null){const ve=e.el=process.env.NODE_ENV!=="production"?q("teleport start"):V(""),Ne=e.anchor=process.env.NODE_ENV!=="production"?q("teleport end"):V("");P(ve,n,o),P(Ne,n,o);const ze=e.target=I_(e.props,z),Pe=e.targetAnchor=V("");ze?(P(Pe,ze),a=a||iw(ze)):process.env.NODE_ENV!=="production"&&!re&&at("Invalid Teleport target on mount:",ze,`(${typeof ze})`);const Se=(Ie,Ke)=>{X&16&&E(ae,Ie,Ke,s,f,a,m,g)};re?Se(n,Ne):ze&&Se(ze,Pe)}else{e.el=t.el;const ve=e.anchor=t.anchor,Ne=e.target=t.target,ze=e.targetAnchor=t.targetAnchor,Pe=xh(t.props),Se=Pe?n:Ne,Ie=Pe?ve:ze;if(a=a||iw(Ne),ce?(I(t.dynamicChildren,ce,Se,s,f,a,m),hp(t,e,!0)):g||M(t,e,Se,Ie,s,f,a,m,!1),re)Pe||qm(e,n,ve,b,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const Ke=e.target=I_(e.props,z);Ke?qm(e,Ke,null,b,0):process.env.NODE_ENV!=="production"&&at("Invalid Teleport target on update:",Ne,`(${typeof Ne})`)}else Pe&&qm(e,Ne,ze,b,1)}aw(e)},remove(t,e,n,o,{um:s,o:{remove:f}},a){const{shapeFlag:m,children:g,anchor:b,targetAnchor:E,target:M,props:I}=t;if(M&&f(E),(a||!xh(I))&&(f(b),m&16))for(let P=0;P<g.length;P++){const z=g[P];s(z,e,n,!0,!!z.dynamicChildren)}},move:qm,hydrate:lP};function qm(t,e,n,{o:{insert:o},m:s},f=2){f===0&&o(t.targetAnchor,e,n);const{el:a,anchor:m,shapeFlag:g,children:b,props:E}=t,M=f===2;if(M&&o(a,e,n),(!M||xh(E))&&g&16)for(let I=0;I<b.length;I++)s(b[I],e,n,2);M&&o(m,e,n)}function lP(t,e,n,o,s,f,{o:{nextSibling:a,parentNode:m,querySelector:g}},b){const E=e.target=I_(e.props,g);if(E){const M=E._lpa||E.firstChild;if(e.shapeFlag&16)if(xh(e.props))e.anchor=b(a(t),e,m(t),n,o,s,f),e.targetAnchor=M;else{e.anchor=a(t);let I=M;for(;I;)if(I=a(I),I&&I.nodeType===8&&I.data==="teleport anchor"){e.targetAnchor=I,E._lpa=e.targetAnchor&&a(e.targetAnchor);break}b(M,e,E,n,o,s,f)}aw(e)}return e.anchor&&a(e.anchor)}const ow=sP;function aw(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const en=Symbol(process.env.NODE_ENV!=="production"?"Fragment":void 0),fp=Symbol(process.env.NODE_ENV!=="production"?"Text":void 0),Vi=Symbol(process.env.NODE_ENV!=="production"?"Comment":void 0),Wm=Symbol(process.env.NODE_ENV!=="production"?"Static":void 0),pp=[];let Ga=null;function Be(t=!1){pp.push(Ga=t?null:[])}function uP(){pp.pop(),Ga=pp[pp.length-1]||null}let dp=1;function sw(t){dp+=t}function lw(t){return t.dynamicChildren=dp>0?Ga||dh:null,uP(),dp>0&&Ga&&Ga.push(t),t}function tt(t,e,n,o,s,f){return lw(Fe(t,e,n,o,s,f,!0))}function tn(t,e,n,o,s){return lw(kt(t,e,n,o,s,!0))}function bh(t){return t?t.__v_isVNode===!0:!1}function fc(t,e){return process.env.NODE_ENV!=="production"&&e.shapeFlag&6&&vh.has(e.type)?(t.shapeFlag&=-257,e.shapeFlag&=-513,!1):t.type===e.type&&t.key===e.key}const cP=(...t)=>cw(...t),Hm="__vInternal",uw=({key:t})=>t!=null?t:null,Zm=({ref:t,ref_key:e,ref_for:n})=>t!=null?jn(t)||cn(t)||dr(t)?{i:Di,r:t,k:e,f:!!n}:t:null;function Fe(t,e=null,n=null,o=0,s=null,f=t===en?0:1,a=!1,m=!1){const g={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&uw(e),ref:e&&Zm(e),scopeId:Tb,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:f,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Di};return m?(O_(g,n),f&128&&t.normalize(g)):n&&(g.shapeFlag|=jn(n)?8:16),process.env.NODE_ENV!=="production"&&g.key!==g.key&&at("VNode created with invalid key (NaN). VNode type:",g.type),dp>0&&!a&&Ga&&(g.patchFlag>0||f&6)&&g.patchFlag!==32&&Ga.push(g),g}const kt=process.env.NODE_ENV!=="production"?cP:cw;function cw(t,e=null,n=null,o=0,s=null,f=!1){if((!t||t===LA)&&(process.env.NODE_ENV!=="production"&&!t&&at(`Invalid vnode type when creating vnode: ${t}.`),t=Vi),bh(t)){const m=xs(t,e,!0);return n&&O_(m,n),dp>0&&!f&&Ga&&(m.shapeFlag&6?Ga[Ga.indexOf(t)]=m:Ga.push(m)),m.patchFlag|=-2,m}if(yw(t)&&(t=t.__vccOpts),e){e=hP(e);let{class:m,style:g}=e;m&&!jn(m)&&(e.class=Rr(m)),un(g)&&(Pm(g)&&!tr(g)&&(g=Un({},g)),e.style=eu(g))}const a=jn(t)?1:gA(t)?128:aP(t)?64:un(t)?4:dr(t)?2:0;return process.env.NODE_ENV!=="production"&&a&4&&Pm(t)&&(t=hr(t),at("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,t)),Fe(t,e,n,o,s,a,f,!0)}function hP(t){return t?Pm(t)||Hm in t?Un({},t):t:null}function xs(t,e,n=!1){const{props:o,ref:s,patchFlag:f,children:a}=t,m=e?fP(o||{},e):o;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:m,key:m&&uw(m),ref:e&&e.ref?n&&s?tr(s)?s.concat(Zm(e)):[s,Zm(e)]:Zm(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:process.env.NODE_ENV!=="production"&&f===-1&&tr(a)?a.map(hw):a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==en?f===-1?16:f|16:f,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&xs(t.ssContent),ssFallback:t.ssFallback&&xs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function hw(t){const e=xs(t);return tr(t.children)&&(e.children=t.children.map(hw)),e}function Xm(t=" ",e=0){return kt(fp,null,t,e)}function Xe(t="",e=!1){return e?(Be(),tn(Vi,null,t)):kt(Vi,null,t)}function qa(t){return t==null||typeof t=="boolean"?kt(Vi):tr(t)?kt(en,null,t.slice()):typeof t=="object"?cu(t):kt(fp,null,String(t))}function cu(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:xs(t)}function O_(t,e){let n=0;const{shapeFlag:o}=t;if(e==null)e=null;else if(tr(e))n=16;else if(typeof e=="object")if(o&65){const s=e.default;s&&(s._c&&(s._d=!1),O_(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Hm in e)?e._ctx=Di:s===3&&Di&&(Di.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else dr(e)?(e={default:e,_ctx:Di},n=32):(e=String(e),o&64?(n=16,e=[Xm(e)]):n=8);t.children=e,t.shapeFlag|=n}function fP(...t){const e={};for(let n=0;n<t.length;n++){const o=t[n];for(const s in o)if(s==="class")e.class!==o.class&&(e.class=Rr([e.class,o.class]));else if(s==="style")e.style=eu([e.style,o.style]);else if(Kf(s)){const f=e[s],a=o[s];a&&f!==a&&!(tr(f)&&f.includes(a))&&(e[s]=f?[].concat(f,a):a)}else s!==""&&(e[s]=o[s])}return e}function bs(t,e,n,o=null){Ea(t,e,7,[n,o])}const pP=nw();let dP=0;function mP(t,e,n){const o=t.type,s=(e?e.appContext:t.appContext)||pP,f={uid:dP++,vnode:t,type:o,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new zx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Hb(o,s),emitsOptions:Sb(o,s),emit:null,emitted:null,propsDefaults:wn,inheritAttrs:o.inheritAttrs,ctx:wn,data:wn,props:wn,attrs:wn,slots:wn,refs:wn,setupState:wn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return process.env.NODE_ENV!=="production"?f.ctx=DA(f):f.ctx={_:f},f.root=e?e.root:f,f.emit=hA.bind(null,f),t.ce&&t.ce(f),f}let si=null;const Km=()=>si||Di,wh=t=>{si=t,t.scope.on()},pc=()=>{si&&si.scope.off(),si=null},yP=Ql("slot,component");function C_(t,e){const n=e.isNativeTag||Px;(yP(t)||n(t))&&at("Do not use built-in or reserved HTML elements as component id: "+t)}function fw(t){return t.vnode.shapeFlag&4}let mp=!1;function gP(t,e=!1){mp=e;const{props:n,children:o}=t.vnode,s=fw(t);$A(t,n,s,e),JA(t,o);const f=s?vP(t,e):void 0;return mp=!1,f}function vP(t,e){var n;const o=t.type;if(process.env.NODE_ENV!=="production"){if(o.name&&C_(o.name,t.appContext.config),o.components){const f=Object.keys(o.components);for(let a=0;a<f.length;a++)C_(f[a],t.appContext.config)}if(o.directives){const f=Object.keys(o.directives);for(let a=0;a<f.length;a++)zb(f[a])}o.compilerOptions&&_P()&&at('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}t.accessCache=Object.create(null),t.proxy=$a(new Proxy(t.ctx,jb)),process.env.NODE_ENV!=="production"&&NA(t);const{setup:s}=o;if(s){const f=t.setupContext=s.length>1?xP(t):null;wh(t),nc();const a=cl(s,t,0,[process.env.NODE_ENV!=="production"?yh(t.props):t.props,f]);if(ic(),pc(),Wv(a)){if(a.then(pc,pc),e)return a.then(m=>{pw(t,m,e)}).catch(m=>{Dm(m,t,0)});if(t.asyncDep=a,process.env.NODE_ENV!=="production"&&!t.suspense){const m=(n=o.name)!==null&&n!==void 0?n:"Anonymous";at(`Component <${m}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else pw(t,a,e)}else dw(t,e)}function pw(t,e,n){dr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:un(e)?(process.env.NODE_ENV!=="production"&&bh(e)&&at("setup() should not return VNodes directly - return a render function instead."),process.env.NODE_ENV!=="production"&&(t.devtoolsRawSetupState=e),t.setupState=ub(e),process.env.NODE_ENV!=="production"&&RA(t)):process.env.NODE_ENV!=="production"&&e!==void 0&&at(`setup() should return an object. Received: ${e===null?"null":typeof e}`),dw(t,n)}let A_;const _P=()=>!A_;function dw(t,e,n){const o=t.type;if(!t.render){if(!e&&A_&&!o.render){const s=o.template||b_(t).template;if(s){process.env.NODE_ENV!=="production"&&fl(t,"compile");const{isCustomElement:f,compilerOptions:a}=t.appContext.config,{delimiters:m,compilerOptions:g}=o,b=Un(Un({isCustomElement:f,delimiters:m},a),g);o.render=A_(s,b),process.env.NODE_ENV!=="production"&&pl(t,"compile")}}t.render=o.render||Qi}wh(t),nc(),FA(t),ic(),pc(),process.env.NODE_ENV!=="production"&&!o.render&&t.render===Qi&&!e&&(o.template?at('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):at("Component is missing template or render function."))}function mw(t){return new Proxy(t.attrs,process.env.NODE_ENV!=="production"?{get(e,n){return Bm(),Co(t,"get","$attrs"),e[n]},set(){return at("setupContext.attrs is readonly."),!1},deleteProperty(){return at("setupContext.attrs is readonly."),!1}}:{get(e,n){return Co(t,"get","$attrs"),e[n]}})}function xP(t){const e=o=>{if(process.env.NODE_ENV!=="production"&&(t.exposed&&at("expose() should be called only once per setup()."),o!=null)){let s=typeof o;s==="object"&&(tr(o)?s="array":cn(o)&&(s="ref")),s!=="object"&&at(`expose() should be passed a plain object, received ${s}.`)}t.exposed=o||{}};let n;return process.env.NODE_ENV!=="production"?Object.freeze({get attrs(){return n||(n=mw(t))},get slots(){return yh(t.slots)},get emit(){return(o,...s)=>t.emit(o,...s)},expose:e}):{get attrs(){return n||(n=mw(t))},slots:t.slots,emit:t.emit,expose:e}}function Ym(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ub($a(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in uc)return uc[n](t)},has(e,n){return n in e||n in uc}}))}const bP=/(?:^|[-_])(\w)/g,wP=t=>t.replace(bP,e=>e.toUpperCase()).replace(/[-_]/g,"");function P_(t,e=!0){return dr(t)?t.displayName||t.name:t.name||e&&t.__name}function Jm(t,e,n=!1){let o=P_(e);if(!o&&e.__file){const s=e.__file.match(/([^/\\]+)\.\w+$/);s&&(o=s[1])}if(!o&&t&&t.parent){const s=f=>{for(const a in f)if(f[a]===e)return a};o=s(t.components||t.parent.type.components)||s(t.appContext.components)}return o?wP(o):n?"App":"Anonymous"}function yw(t){return dr(t)&&"__vccOpts"in t}const ar=(t,e)=>jC(t,e,mp);function gw(t,e,n){const o=arguments.length;return o===2?un(e)&&!tr(e)?bh(e)?kt(t,null,[e]):kt(t,e):kt(t,null,e):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&bh(n)&&(n=[n]),kt(t,e,n))}const EP=Symbol(process.env.NODE_ENV!=="production"?"ssrContext":""),SP=()=>{{const t=_h(EP);return t||process.env.NODE_ENV!=="production"&&at("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),t}};function k_(t){return!!(t&&t.__v_isShallow)}function TP(){if(process.env.NODE_ENV==="production"||typeof window>"u")return;const t={style:"color:#3ba776"},e={style:"color:#0b1bc9"},n={style:"color:#b62e24"},o={style:"color:#9d288c"},s={header(M){return un(M)?M.__isVue?["div",t,"VueInstance"]:cn(M)?["div",{},["span",t,E(M)],"<",m(M.value),">"]:ja(M)?["div",{},["span",t,k_(M)?"ShallowReactive":"Reactive"],"<",m(M),`>${iu(M)?" (readonly)":""}`]:iu(M)?["div",{},["span",t,k_(M)?"ShallowReadonly":"Readonly"],"<",m(M),">"]:null:null},hasBody(M){return M&&M.__isVue},body(M){if(M&&M.__isVue)return["div",{},...f(M.$)]}};function f(M){const I=[];M.type.props&&M.props&&I.push(a("props",hr(M.props))),M.setupState!==wn&&I.push(a("setup",M.setupState)),M.data!==wn&&I.push(a("data",hr(M.data)));const P=g(M,"computed");P&&I.push(a("computed",P));const z=g(M,"inject");return z&&I.push(a("injected",z)),I.push(["div",{},["span",{style:o.style+";opacity:0.66"},"$ (internal): "],["object",{object:M}]]),I}function a(M,I){return I=Un({},I),Object.keys(I).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},M],["div",{style:"padding-left:1.25em"},...Object.keys(I).map(P=>["div",{},["span",o,P+": "],m(I[P],!1)])]]:["span",{}]}function m(M,I=!0){return typeof M=="number"?["span",e,M]:typeof M=="string"?["span",n,JSON.stringify(M)]:typeof M=="boolean"?["span",o,M]:un(M)?["object",{object:I?hr(M):M}]:["span",n,String(M)]}function g(M,I){const P=M.type;if(dr(P))return;const z={};for(const V in M.ctx)b(P,V,I)&&(z[V]=M.ctx[V]);return z}function b(M,I,P){const z=M[P];if(tr(z)&&z.includes(I)||un(z)&&I in z||M.extends&&b(M.extends,I,P)||M.mixins&&M.mixins.some(V=>b(V,I,P)))return!0}function E(M){return k_(M)?"ShallowRef":M.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(s):window.devtoolsFormatters=[s]}const vw="3.2.47",MP="http://www.w3.org/2000/svg",dc=typeof document<"u"?document:null,_w=dc&&dc.createElement("template"),IP={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,o)=>{const s=e?dc.createElementNS(MP,t):dc.createElement(t,n?{is:n}:void 0);return t==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:t=>dc.createTextNode(t),createComment:t=>dc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>dc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,o,s,f){const a=n?n.previousSibling:e.lastChild;if(s&&(s===f||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===f||!(s=s.nextSibling)););else{_w.innerHTML=o?`<svg>${t}</svg>`:t;const m=_w.content;if(o){const g=m.firstChild;for(;g.firstChild;)m.appendChild(g.firstChild);m.removeChild(g)}e.insertBefore(m,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function OP(t,e,n){const o=t._vtc;o&&(e=(e?[e,...o]:[...o]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function CP(t,e,n){const o=t.style,s=jn(n);if(n&&!s){if(e&&!jn(e))for(const f in e)n[f]==null&&L_(o,f,"");for(const f in n)L_(o,f,n[f])}else{const f=o.display;s?e!==n&&(o.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(o.display=f)}}const AP=/[^\\];\s*$/,xw=/\s*!important$/;function L_(t,e,n){if(tr(n))n.forEach(o=>L_(t,e,o));else if(n==null&&(n=""),process.env.NODE_ENV!=="production"&&AP.test(n)&&at(`Unexpected semicolon at the end of '${e}' style value: '${n}'`),e.startsWith("--"))t.setProperty(e,n);else{const o=PP(t,e);xw.test(n)?t.setProperty(Go(o),n.replace(xw,""),"important"):t[o]=n}}const bw=["Webkit","Moz","ms"],D_={};function PP(t,e){const n=D_[e];if(n)return n;let o=aa(e);if(o!=="filter"&&o in t)return D_[e]=o;o=ec(o);for(let s=0;s<bw.length;s++){const f=bw[s]+o;if(f in t)return D_[e]=f}return e}const ww="http://www.w3.org/1999/xlink";function kP(t,e,n,o,s){if(o&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(ww,e.slice(6,e.length)):t.setAttributeNS(ww,e,n);else{const f=eC(e);n==null||f&&!Cx(n)?t.removeAttribute(e):t.setAttribute(e,f?"":n)}}function LP(t,e,n,o,s,f,a){if(e==="innerHTML"||e==="textContent"){o&&a(o,s,f),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const g=n==null?"":n;(t.value!==g||t.tagName==="OPTION")&&(t.value=g),n==null&&t.removeAttribute(e);return}let m=!1;if(n===""||n==null){const g=typeof t[e];g==="boolean"?n=Cx(n):n==null&&g==="string"?(n="",m=!0):g==="number"&&(n=0,m=!0)}try{t[e]=n}catch(g){process.env.NODE_ENV!=="production"&&!m&&at(`Failed setting prop "${e}" on <${t.tagName.toLowerCase()}>: value ${n} is invalid.`,g)}m&&t.removeAttribute(e)}function DP(t,e,n,o){t.addEventListener(e,n,o)}function NP(t,e,n,o){t.removeEventListener(e,n,o)}function RP(t,e,n,o,s=null){const f=t._vei||(t._vei={}),a=f[e];if(o&&a)a.value=o;else{const[m,g]=zP(e);if(o){const b=f[e]=VP(o,s);DP(t,m,b,g)}else a&&(NP(t,m,a,g),f[e]=void 0)}}const Ew=/(?:Once|Passive|Capture)$/;function zP(t){let e;if(Ew.test(t)){e={};let o;for(;o=t.match(Ew);)t=t.slice(0,t.length-o[0].length),e[o[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Go(t.slice(2)),e]}let N_=0;const FP=Promise.resolve(),BP=()=>N_||(FP.then(()=>N_=0),N_=Date.now());function VP(t,e){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Ea(UP(o,n.value),e,5,[o])};return n.value=t,n.attached=BP(),n}function UP(t,e){if(tr(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(o=>s=>!s._stopped&&o&&o(s))}else return e}const Sw=/^on[a-z]/,jP=(t,e,n,o,s=!1,f,a,m,g)=>{e==="class"?OP(t,o,s):e==="style"?CP(t,n,o):Kf(e)?pm(e)||RP(t,e,n,o,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):$P(t,e,o,s))?LP(t,e,o,f,a,m,g):(e==="true-value"?t._trueValue=o:e==="false-value"&&(t._falseValue=o),kP(t,e,o,s))};function $P(t,e,n,o){return o?!!(e==="innerHTML"||e==="textContent"||e in t&&Sw.test(e)&&dr(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Sw.test(e)&&jn(n)?!1:e in t}const hu="transition",yp="animation",Qm=(t,{slots:e})=>gw(Pb,GP(t),e);Qm.displayName="Transition";const Tw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Qm.props=Un({},Pb.props,Tw);const mc=(t,e=[])=>{tr(t)?t.forEach(n=>n(...e)):t&&t(...e)},Mw=t=>t?tr(t)?t.some(e=>e.length>1):t.length>1:!1;function GP(t){const e={};for(const Ge in t)Ge in Tw||(e[Ge]=t[Ge]);if(t.css===!1)return e;const{name:n="v",type:o,duration:s,enterFromClass:f=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:m=`${n}-enter-to`,appearFromClass:g=f,appearActiveClass:b=a,appearToClass:E=m,leaveFromClass:M=`${n}-leave-from`,leaveActiveClass:I=`${n}-leave-active`,leaveToClass:P=`${n}-leave-to`}=t,z=qP(s),V=z&&z[0],q=z&&z[1],{onBeforeEnter:re,onEnter:X,onEnterCancelled:ae,onLeave:ce,onLeaveCancelled:ve,onBeforeAppear:Ne=re,onAppear:ze=X,onAppearCancelled:Pe=ae}=e,Se=(Ge,st,be)=>{yc(Ge,st?E:m),yc(Ge,st?b:a),be&&be()},Ie=(Ge,st)=>{Ge._isLeaving=!1,yc(Ge,M),yc(Ge,P),yc(Ge,I),st&&st()},Ke=Ge=>(st,be)=>{const Je=Ge?ze:X,ht=()=>Se(st,Ge,be);mc(Je,[st,ht]),Iw(()=>{yc(st,Ge?g:f),fu(st,Ge?E:m),Mw(Je)||Ow(st,o,V,ht)})};return Un(e,{onBeforeEnter(Ge){mc(re,[Ge]),fu(Ge,f),fu(Ge,a)},onBeforeAppear(Ge){mc(Ne,[Ge]),fu(Ge,g),fu(Ge,b)},onEnter:Ke(!1),onAppear:Ke(!0),onLeave(Ge,st){Ge._isLeaving=!0;const be=()=>Ie(Ge,st);fu(Ge,M),ZP(),fu(Ge,I),Iw(()=>{!Ge._isLeaving||(yc(Ge,M),fu(Ge,P),Mw(ce)||Ow(Ge,o,q,be))}),mc(ce,[Ge,be])},onEnterCancelled(Ge){Se(Ge,!1),mc(ae,[Ge])},onAppearCancelled(Ge){Se(Ge,!0),mc(Pe,[Ge])},onLeaveCancelled(Ge){Ie(Ge),mc(ve,[Ge])}})}function qP(t){if(t==null)return null;if(un(t))return[R_(t.enter),R_(t.leave)];{const e=R_(t);return[e,e]}}function R_(t){const e=Xv(t);return process.env.NODE_ENV!=="production"&&HC(e,"<transition> explicit duration"),e}function fu(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function yc(t,e){e.split(/\s+/).forEach(o=>o&&t.classList.remove(o));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Iw(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let WP=0;function Ow(t,e,n,o){const s=t._endId=++WP,f=()=>{s===t._endId&&o()};if(n)return setTimeout(f,n);const{type:a,timeout:m,propCount:g}=HP(t,e);if(!a)return o();const b=a+"end";let E=0;const M=()=>{t.removeEventListener(b,I),f()},I=P=>{P.target===t&&++E>=g&&M()};setTimeout(()=>{E<g&&M()},m+1),t.addEventListener(b,I)}function HP(t,e){const n=window.getComputedStyle(t),o=z=>(n[z]||"").split(", "),s=o(`${hu}Delay`),f=o(`${hu}Duration`),a=Cw(s,f),m=o(`${yp}Delay`),g=o(`${yp}Duration`),b=Cw(m,g);let E=null,M=0,I=0;e===hu?a>0&&(E=hu,M=a,I=f.length):e===yp?b>0&&(E=yp,M=b,I=g.length):(M=Math.max(a,b),E=M>0?a>b?hu:yp:null,I=E?E===hu?f.length:g.length:0);const P=E===hu&&/\b(transform|all)(,|$)/.test(o(`${hu}Property`).toString());return{type:E,timeout:M,propCount:I,hasTransform:P}}function Cw(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,o)=>Aw(n)+Aw(t[o])))}function Aw(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function ZP(){return document.body.offsetHeight}const XP=["ctrl","shift","alt","meta"],KP={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>XP.some(n=>t[`${n}Key`]&&!e.includes(n))},ws=(t,e)=>(n,...o)=>{for(let s=0;s<e.length;s++){const f=KP[e[s]];if(f&&f(n,e))return}return t(n,...o)},YP={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Es=(t,e)=>n=>{if(!("key"in n))return;const o=Go(n.key);if(e.some(s=>s===o||YP[s]===o))return t(n)},JP=Un({patchProp:jP},IP);let Pw;function kw(){return Pw||(Pw=nP(JP))}const Lw=(...t)=>{kw().render(...t)},QP=(...t)=>{const e=kw().createApp(...t);process.env.NODE_ENV!=="production"&&(ek(e),tk(e));const{mount:n}=e;return e.mount=o=>{const s=rk(o);if(!s)return;const f=e._component;!dr(f)&&!f.render&&!f.template&&(f.template=s.innerHTML),s.innerHTML="";const a=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function ek(t){Object.defineProperty(t.config,"isNativeTag",{value:e=>JO(e)||QO(e),writable:!1})}function tk(t){{const e=t.config.isCustomElement;Object.defineProperty(t.config,"isCustomElement",{get(){return e},set(){at("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const n=t.config.compilerOptions,o='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom';Object.defineProperty(t.config,"compilerOptions",{get(){return at(o),n},set(){at(o)}})}}function rk(t){if(jn(t)){const e=document.querySelector(t);return process.env.NODE_ENV!=="production"&&!e&&at(`Failed to mount app: mount target selector "${t}" returned null.`),e}return process.env.NODE_ENV!=="production"&&window.ShadowRoot&&t instanceof window.ShadowRoot&&t.mode==="closed"&&at('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),t}function nk(){TP()}process.env.NODE_ENV!=="production"&&nk();/*! @license DOMPurify 2.4.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.5/LICENSE */function pu(t){return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pu(t)}function z_(t,e){return z_=Object.setPrototypeOf||function(o,s){return o.__proto__=s,o},z_(t,e)}function ik(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ey(t,e,n){return ik()?ey=Reflect.construct:ey=function(s,f,a){var m=[null];m.push.apply(m,f);var g=Function.bind.apply(s,m),b=new g;return a&&z_(b,a.prototype),b},ey.apply(null,arguments)}function Wa(t){return ok(t)||ak(t)||sk(t)||lk()}function ok(t){if(Array.isArray(t))return F_(t)}function ak(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sk(t,e){if(!!t){if(typeof t=="string")return F_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F_(t,e)}}function F_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function lk(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var uk=Object.hasOwnProperty,Dw=Object.setPrototypeOf,ck=Object.isFrozen,hk=Object.getPrototypeOf,fk=Object.getOwnPropertyDescriptor,Po=Object.freeze,Ha=Object.seal,pk=Object.create,Nw=typeof Reflect<"u"&&Reflect,ty=Nw.apply,B_=Nw.construct;ty||(ty=function(e,n,o){return e.apply(n,o)}),Po||(Po=function(e){return e}),Ha||(Ha=function(e){return e}),B_||(B_=function(e,n){return ey(e,Wa(n))});var dk=Ma(Array.prototype.forEach),Rw=Ma(Array.prototype.pop),gp=Ma(Array.prototype.push),ry=Ma(String.prototype.toLowerCase),V_=Ma(String.prototype.toString),mk=Ma(String.prototype.match),Za=Ma(String.prototype.replace),yk=Ma(String.prototype.indexOf),gk=Ma(String.prototype.trim),ko=Ma(RegExp.prototype.test),U_=vk(TypeError);function Ma(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return ty(t,e,o)}}function vk(t){return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return B_(t,n)}}function Pr(t,e,n){n=n||ry,Dw&&Dw(t,null);for(var o=e.length;o--;){var s=e[o];if(typeof s=="string"){var f=n(s);f!==s&&(ck(e)||(e[o]=f),s=f)}t[s]=!0}return t}function gc(t){var e=pk(null),n;for(n in t)ty(uk,t,[n])===!0&&(e[n]=t[n]);return e}function ny(t,e){for(;t!==null;){var n=fk(t,e);if(n){if(n.get)return Ma(n.get);if(typeof n.value=="function")return Ma(n.value)}t=hk(t)}function o(s){return console.warn("fallback value for",s),null}return o}var zw=Po(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),j_=Po(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$_=Po(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_k=Po(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),G_=Po(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),xk=Po(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Fw=Po(["#text"]),Bw=Po(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),q_=Po(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Vw=Po(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),iy=Po(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bk=Ha(/\{\{[\w\W]*|[\w\W]*\}\}/gm),wk=Ha(/<%[\w\W]*|[\w\W]*%>/gm),Ek=Ha(/\${[\w\W]*}/gm),Sk=Ha(/^data-[\-\w.\u00B7-\uFFFF]/),Tk=Ha(/^aria-[\-\w]+$/),Mk=Ha(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ik=Ha(/^(?:\w+script|data):/i),Ok=Ha(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ck=Ha(/^html$/i),Ak=function(){return typeof window>"u"?null:window},Pk=function(e,n){if(pu(e)!=="object"||typeof e.createPolicy!="function")return null;var o=null,s="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(s)&&(o=n.currentScript.getAttribute(s));var f="dompurify"+(o?"#"+o:"");try{return e.createPolicy(f,{createHTML:function(m){return m},createScriptURL:function(m){return m}})}catch{return console.warn("TrustedTypes policy "+f+" could not be created."),null}};function Uw(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ak(),e=function(fe){return Uw(fe)};if(e.version="2.4.5",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var n=t.document,o=t.document,s=t.DocumentFragment,f=t.HTMLTemplateElement,a=t.Node,m=t.Element,g=t.NodeFilter,b=t.NamedNodeMap,E=b===void 0?t.NamedNodeMap||t.MozNamedAttrMap:b,M=t.HTMLFormElement,I=t.DOMParser,P=t.trustedTypes,z=m.prototype,V=ny(z,"cloneNode"),q=ny(z,"nextSibling"),re=ny(z,"childNodes"),X=ny(z,"parentNode");if(typeof f=="function"){var ae=o.createElement("template");ae.content&&ae.content.ownerDocument&&(o=ae.content.ownerDocument)}var ce=Pk(P,n),ve=ce?ce.createHTML(""):"",Ne=o,ze=Ne.implementation,Pe=Ne.createNodeIterator,Se=Ne.createDocumentFragment,Ie=Ne.getElementsByTagName,Ke=n.importNode,Ge={};try{Ge=gc(o).documentMode?o.documentMode:{}}catch{}var st={};e.isSupported=typeof X=="function"&&ze&&typeof ze.createHTMLDocument<"u"&&Ge!==9;var be=bk,Je=wk,ht=Ek,vt=Sk,Lt=Tk,rr=Ik,Nn=Ok,zr=Mk,mr=null,Jn=Pr({},[].concat(Wa(zw),Wa(j_),Wa($_),Wa(G_),Wa(Fw))),Fr=null,$i=Pr({},[].concat(Wa(Bw),Wa(q_),Wa(Vw),Wa(iy))),qr=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),kr=null,qn=null,Mr=!0,Mn=!0,hi=!1,Wn=!0,K=!1,ye=!1,Re=!1,qe=!1,We=!1,nt=!1,mt=!1,et=!0,ut=!1,Qe="user-content-",Ot=!0,bt=!1,Dt={},jt=null,yr=Pr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),jr=null,Lr=Pr({},["audio","video","img","source","image","track"]),Qr=null,Qn=Pr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Gi="http://www.w3.org/1998/Math/MathML",_o="http://www.w3.org/2000/svg",ei="http://www.w3.org/1999/xhtml",Ri=ei,In=!1,fi=null,ss=Pr({},[Gi,_o,ei],V_),Xo,ls=["application/xhtml+xml","text/html"],ma="text/html",pn,Fo=null,Il=o.createElement("form"),Sn=function(fe){return fe instanceof RegExp||fe instanceof Function},N=function(fe){Fo&&Fo===fe||((!fe||pu(fe)!=="object")&&(fe={}),fe=gc(fe),Xo=ls.indexOf(fe.PARSER_MEDIA_TYPE)===-1?Xo=ma:Xo=fe.PARSER_MEDIA_TYPE,pn=Xo==="application/xhtml+xml"?V_:ry,mr="ALLOWED_TAGS"in fe?Pr({},fe.ALLOWED_TAGS,pn):Jn,Fr="ALLOWED_ATTR"in fe?Pr({},fe.ALLOWED_ATTR,pn):$i,fi="ALLOWED_NAMESPACES"in fe?Pr({},fe.ALLOWED_NAMESPACES,V_):ss,Qr="ADD_URI_SAFE_ATTR"in fe?Pr(gc(Qn),fe.ADD_URI_SAFE_ATTR,pn):Qn,jr="ADD_DATA_URI_TAGS"in fe?Pr(gc(Lr),fe.ADD_DATA_URI_TAGS,pn):Lr,jt="FORBID_CONTENTS"in fe?Pr({},fe.FORBID_CONTENTS,pn):yr,kr="FORBID_TAGS"in fe?Pr({},fe.FORBID_TAGS,pn):{},qn="FORBID_ATTR"in fe?Pr({},fe.FORBID_ATTR,pn):{},Dt="USE_PROFILES"in fe?fe.USE_PROFILES:!1,Mr=fe.ALLOW_ARIA_ATTR!==!1,Mn=fe.ALLOW_DATA_ATTR!==!1,hi=fe.ALLOW_UNKNOWN_PROTOCOLS||!1,Wn=fe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,K=fe.SAFE_FOR_TEMPLATES||!1,ye=fe.WHOLE_DOCUMENT||!1,We=fe.RETURN_DOM||!1,nt=fe.RETURN_DOM_FRAGMENT||!1,mt=fe.RETURN_TRUSTED_TYPE||!1,qe=fe.FORCE_BODY||!1,et=fe.SANITIZE_DOM!==!1,ut=fe.SANITIZE_NAMED_PROPS||!1,Ot=fe.KEEP_CONTENT!==!1,bt=fe.IN_PLACE||!1,zr=fe.ALLOWED_URI_REGEXP||zr,Ri=fe.NAMESPACE||ei,qr=fe.CUSTOM_ELEMENT_HANDLING||{},fe.CUSTOM_ELEMENT_HANDLING&&Sn(fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(qr.tagNameCheck=fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&Sn(fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(qr.attributeNameCheck=fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&typeof fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(qr.allowCustomizedBuiltInElements=fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K&&(Mn=!1),nt&&(We=!0),Dt&&(mr=Pr({},Wa(Fw)),Fr=[],Dt.html===!0&&(Pr(mr,zw),Pr(Fr,Bw)),Dt.svg===!0&&(Pr(mr,j_),Pr(Fr,q_),Pr(Fr,iy)),Dt.svgFilters===!0&&(Pr(mr,$_),Pr(Fr,q_),Pr(Fr,iy)),Dt.mathMl===!0&&(Pr(mr,G_),Pr(Fr,Vw),Pr(Fr,iy))),fe.ADD_TAGS&&(mr===Jn&&(mr=gc(mr)),Pr(mr,fe.ADD_TAGS,pn)),fe.ADD_ATTR&&(Fr===$i&&(Fr=gc(Fr)),Pr(Fr,fe.ADD_ATTR,pn)),fe.ADD_URI_SAFE_ATTR&&Pr(Qr,fe.ADD_URI_SAFE_ATTR,pn),fe.FORBID_CONTENTS&&(jt===yr&&(jt=gc(jt)),Pr(jt,fe.FORBID_CONTENTS,pn)),Ot&&(mr["#text"]=!0),ye&&Pr(mr,["html","head","body"]),mr.table&&(Pr(mr,["tbody"]),delete kr.tbody),Po&&Po(fe),Fo=fe)},F=Pr({},["mi","mo","mn","ms","mtext"]),U=Pr({},["foreignobject","desc","title","annotation-xml"]),Z=Pr({},["title","style","font","a","script"]),Q=Pr({},j_);Pr(Q,$_),Pr(Q,_k);var pe=Pr({},G_);Pr(pe,xk);var de=function(fe){var Ee=X(fe);(!Ee||!Ee.tagName)&&(Ee={namespaceURI:Ri,tagName:"template"});var He=ry(fe.tagName),$t=ry(Ee.tagName);return fi[fe.namespaceURI]?fe.namespaceURI===_o?Ee.namespaceURI===ei?He==="svg":Ee.namespaceURI===Gi?He==="svg"&&($t==="annotation-xml"||F[$t]):Boolean(Q[He]):fe.namespaceURI===Gi?Ee.namespaceURI===ei?He==="math":Ee.namespaceURI===_o?He==="math"&&U[$t]:Boolean(pe[He]):fe.namespaceURI===ei?Ee.namespaceURI===_o&&!U[$t]||Ee.namespaceURI===Gi&&!F[$t]?!1:!pe[He]&&(Z[He]||!Q[He]):!!(Xo==="application/xhtml+xml"&&fi[fe.namespaceURI]):!1},$=function(fe){gp(e.removed,{element:fe});try{fe.parentNode.removeChild(fe)}catch{try{fe.outerHTML=ve}catch{fe.remove()}}},ie=function(fe,Ee){try{gp(e.removed,{attribute:Ee.getAttributeNode(fe),from:Ee})}catch{gp(e.removed,{attribute:null,from:Ee})}if(Ee.removeAttribute(fe),fe==="is"&&!Fr[fe])if(We||nt)try{$(Ee)}catch{}else try{Ee.setAttribute(fe,"")}catch{}},_e=function(fe){var Ee,He;if(qe)fe="<remove></remove>"+fe;else{var $t=mk(fe,/^[\r\n\t ]+/);He=$t&&$t[0]}Xo==="application/xhtml+xml"&&Ri===ei&&(fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+fe+"</body></html>");var Ht=ce?ce.createHTML(fe):fe;if(Ri===ei)try{Ee=new I().parseFromString(Ht,Xo)}catch{}if(!Ee||!Ee.documentElement){Ee=ze.createDocument(Ri,"template",null);try{Ee.documentElement.innerHTML=In?ve:Ht}catch{}}var Qt=Ee.body||Ee.documentElement;return fe&&He&&Qt.insertBefore(o.createTextNode(He),Qt.childNodes[0]||null),Ri===ei?Ie.call(Ee,ye?"html":"body")[0]:ye?Ee.documentElement:Qt},$e=function(fe){return Pe.call(fe.ownerDocument||fe,fe,g.SHOW_ELEMENT|g.SHOW_COMMENT|g.SHOW_TEXT,null,!1)},Ze=function(fe){return fe instanceof M&&(typeof fe.nodeName!="string"||typeof fe.textContent!="string"||typeof fe.removeChild!="function"||!(fe.attributes instanceof E)||typeof fe.removeAttribute!="function"||typeof fe.setAttribute!="function"||typeof fe.namespaceURI!="string"||typeof fe.insertBefore!="function"||typeof fe.hasChildNodes!="function")},Ce=function(fe){return pu(a)==="object"?fe instanceof a:fe&&pu(fe)==="object"&&typeof fe.nodeType=="number"&&typeof fe.nodeName=="string"},Ue=function(fe,Ee,He){!st[fe]||dk(st[fe],function($t){$t.call(e,Ee,He,Fo)})},St=function(fe){var Ee;if(Ue("beforeSanitizeElements",fe,null),Ze(fe)||ko(/[\u0080-\uFFFF]/,fe.nodeName))return $(fe),!0;var He=pn(fe.nodeName);if(Ue("uponSanitizeElement",fe,{tagName:He,allowedTags:mr}),fe.hasChildNodes()&&!Ce(fe.firstElementChild)&&(!Ce(fe.content)||!Ce(fe.content.firstElementChild))&&ko(/<[/\w]/g,fe.innerHTML)&&ko(/<[/\w]/g,fe.textContent)||He==="select"&&ko(/<template/i,fe.innerHTML))return $(fe),!0;if(!mr[He]||kr[He]){if(!kr[He]&&Le(He)&&(qr.tagNameCheck instanceof RegExp&&ko(qr.tagNameCheck,He)||qr.tagNameCheck instanceof Function&&qr.tagNameCheck(He)))return!1;if(Ot&&!jt[He]){var $t=X(fe)||fe.parentNode,Ht=re(fe)||fe.childNodes;if(Ht&&$t)for(var Qt=Ht.length,Xt=Qt-1;Xt>=0;--Xt)$t.insertBefore(V(Ht[Xt],!0),q(fe))}return $(fe),!0}return fe instanceof m&&!de(fe)||(He==="noscript"||He==="noembed")&&ko(/<\/no(script|embed)/i,fe.innerHTML)?($(fe),!0):(K&&fe.nodeType===3&&(Ee=fe.textContent,Ee=Za(Ee,be," "),Ee=Za(Ee,Je," "),Ee=Za(Ee,ht," "),fe.textContent!==Ee&&(gp(e.removed,{element:fe.cloneNode()}),fe.textContent=Ee)),Ue("afterSanitizeElements",fe,null),!1)},_t=function(fe,Ee,He){if(et&&(Ee==="id"||Ee==="name")&&(He in o||He in Il))return!1;if(!(Mn&&!qn[Ee]&&ko(vt,Ee))){if(!(Mr&&ko(Lt,Ee))){if(!Fr[Ee]||qn[Ee]){if(!(Le(fe)&&(qr.tagNameCheck instanceof RegExp&&ko(qr.tagNameCheck,fe)||qr.tagNameCheck instanceof Function&&qr.tagNameCheck(fe))&&(qr.attributeNameCheck instanceof RegExp&&ko(qr.attributeNameCheck,Ee)||qr.attributeNameCheck instanceof Function&&qr.attributeNameCheck(Ee))||Ee==="is"&&qr.allowCustomizedBuiltInElements&&(qr.tagNameCheck instanceof RegExp&&ko(qr.tagNameCheck,He)||qr.tagNameCheck instanceof Function&&qr.tagNameCheck(He))))return!1}else if(!Qr[Ee]){if(!ko(zr,Za(He,Nn,""))){if(!((Ee==="src"||Ee==="xlink:href"||Ee==="href")&&fe!=="script"&&yk(He,"data:")===0&&jr[fe])){if(!(hi&&!ko(rr,Za(He,Nn,"")))){if(He)return!1}}}}}}return!0},Le=function(fe){return fe.indexOf("-")>0},pt=function(fe){var Ee,He,$t,Ht;Ue("beforeSanitizeAttributes",fe,null);var Qt=fe.attributes;if(!!Qt){var Xt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Fr};for(Ht=Qt.length;Ht--;){Ee=Qt[Ht];var ti=Ee,er=ti.name,yn=ti.namespaceURI;if(He=er==="value"?Ee.value:gk(Ee.value),$t=pn(er),Xt.attrName=$t,Xt.attrValue=He,Xt.keepAttr=!0,Xt.forceKeepAttr=void 0,Ue("uponSanitizeAttribute",fe,Xt),He=Xt.attrValue,!Xt.forceKeepAttr&&(ie(er,fe),!!Xt.keepAttr)){if(!Wn&&ko(/\/>/i,He)){ie(er,fe);continue}K&&(He=Za(He,be," "),He=Za(He,Je," "),He=Za(He,ht," "));var $r=pn(fe.nodeName);if(!!_t($r,$t,He)){if(ut&&($t==="id"||$t==="name")&&(ie(er,fe),He=Qe+He),ce&&pu(P)==="object"&&typeof P.getAttributeType=="function"&&!yn)switch(P.getAttributeType($r,$t)){case"TrustedHTML":He=ce.createHTML(He);break;case"TrustedScriptURL":He=ce.createScriptURL(He);break}try{yn?fe.setAttributeNS(yn,er,He):fe.setAttribute(er,He),Rw(e.removed)}catch{}}}}Ue("afterSanitizeAttributes",fe,null)}},lt=function De(fe){var Ee,He=$e(fe);for(Ue("beforeSanitizeShadowDOM",fe,null);Ee=He.nextNode();)Ue("uponSanitizeShadowNode",Ee,null),!St(Ee)&&(Ee.content instanceof s&&De(Ee.content),pt(Ee));Ue("afterSanitizeShadowDOM",fe,null)};return e.sanitize=function(De){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ee,He,$t,Ht,Qt;if(In=!De,In&&(De="<!-->"),typeof De!="string"&&!Ce(De)){if(typeof De.toString!="function")throw U_("toString is not a function");if(De=De.toString(),typeof De!="string")throw U_("dirty is not a string, aborting")}if(!e.isSupported){if(pu(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof De=="string")return t.toStaticHTML(De);if(Ce(De))return t.toStaticHTML(De.outerHTML)}return De}if(Re||N(fe),e.removed=[],typeof De=="string"&&(bt=!1),bt){if(De.nodeName){var Xt=pn(De.nodeName);if(!mr[Xt]||kr[Xt])throw U_("root node is forbidden and cannot be sanitized in-place")}}else if(De instanceof a)Ee=_e("<!---->"),He=Ee.ownerDocument.importNode(De,!0),He.nodeType===1&&He.nodeName==="BODY"||He.nodeName==="HTML"?Ee=He:Ee.appendChild(He);else{if(!We&&!K&&!ye&&De.indexOf("<")===-1)return ce&&mt?ce.createHTML(De):De;if(Ee=_e(De),!Ee)return We?null:mt?ve:""}Ee&&qe&&$(Ee.firstChild);for(var ti=$e(bt?De:Ee);$t=ti.nextNode();)$t.nodeType===3&&$t===Ht||St($t)||($t.content instanceof s&&lt($t.content),pt($t),Ht=$t);if(Ht=null,bt)return De;if(We){if(nt)for(Qt=Se.call(Ee.ownerDocument);Ee.firstChild;)Qt.appendChild(Ee.firstChild);else Qt=Ee;return(Fr.shadowroot||Fr.shadowrootmod)&&(Qt=Ke.call(n,Qt,!0)),Qt}var er=ye?Ee.outerHTML:Ee.innerHTML;return ye&&mr["!doctype"]&&Ee.ownerDocument&&Ee.ownerDocument.doctype&&Ee.ownerDocument.doctype.name&&ko(Ck,Ee.ownerDocument.doctype.name)&&(er="<!DOCTYPE "+Ee.ownerDocument.doctype.name+`>
`+er),K&&(er=Za(er,be," "),er=Za(er,Je," "),er=Za(er,ht," ")),ce&&mt?ce.createHTML(er):er},e.setConfig=function(De){N(De),Re=!0},e.clearConfig=function(){Fo=null,Re=!1},e.isValidAttribute=function(De,fe,Ee){Fo||N({});var He=pn(De),$t=pn(fe);return _t(He,$t,Ee)},e.addHook=function(De,fe){typeof fe=="function"&&(st[De]=st[De]||[],gp(st[De],fe))},e.removeHook=function(De){if(st[De])return Rw(st[De])},e.removeHooks=function(De){st[De]&&(st[De]=[])},e.removeAllHooks=function(){st={}},e}var kk=Uw(),jw=!1;function oy(t,e,n){return Array.isArray(t)?(t.length=Math.max(t.length,e),t.splice(e,1,n),n):(t[e]=n,n)}function W_(t,e){if(Array.isArray(t)){t.splice(e,1);return}delete t[e]}function Lk(t,e){var s;const n=(s=t.hooks)!=null?s:{};let o;for(o in n){const f=n[o];f!==void 0&&e.addHook(o,f)}}function $w(){return kk()}function Dk(t={},e=$w){const n=e();Lk(t,n);const o=function(s,f){var M,I;const a=f.value;if(f.oldValue===a)return;const m=`${a}`,g=f.arg,b=t.namedConfigurations,E=(M=t.default)!=null?M:{};if(b&&g!==void 0){s.innerHTML=n.sanitize(m,(I=b[g])!=null?I:E);return}s.innerHTML=n.sanitize(m,E)};return{mounted:o,updated:o}}const Gw={install(t,e={},n=$w){t.directive("dompurify-html",Dk(e,n))}};function Nk(){return qw().__VUE_DEVTOOLS_GLOBAL_HOOK__}function qw(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const Rk=typeof Proxy=="function",zk="devtools-plugin:setup",Fk="plugin:settings:set";let Eh,H_;function Bk(){var t;return Eh!==void 0||(typeof window<"u"&&window.performance?(Eh=!0,H_=window.performance):typeof global<"u"&&((t=global.perf_hooks)===null||t===void 0?void 0:t.performance)?(Eh=!0,H_=global.perf_hooks.performance):Eh=!1),Eh}function Vk(){return Bk()?H_.now():Date.now()}class Uk{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const o={};if(e.settings)for(const a in e.settings){const m=e.settings[a];o[a]=m.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let f=Object.assign({},o);try{const a=localStorage.getItem(s),m=JSON.parse(a);Object.assign(f,m)}catch{}this.fallbacks={getSettings(){return f},setSettings(a){try{localStorage.setItem(s,JSON.stringify(a))}catch{}f=a},now(){return Vk()}},n&&n.on(Fk,(a,m)=>{a===this.plugin.id&&this.fallbacks.setSettings(m)}),this.proxiedOn=new Proxy({},{get:(a,m)=>this.target?this.target.on[m]:(...g)=>{this.onQueue.push({method:m,args:g})}}),this.proxiedTarget=new Proxy({},{get:(a,m)=>this.target?this.target[m]:m==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(m)?(...g)=>(this.targetQueue.push({method:m,args:g,resolve:()=>{}}),this.fallbacks[m](...g)):(...g)=>new Promise(b=>{this.targetQueue.push({method:m,args:g,resolve:b})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function Ww(t,e){const n=t,o=qw(),s=Nk(),f=Rk&&n.enableEarlyProxy;if(s&&(o.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!f))s.emit(zk,t,e);else{const a=f?new Uk(n,s):null;(o.__VUE_DEVTOOLS_PLUGINS__=o.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:a}),a&&e(a.proxiedTarget)}}/*!
  * pinia v2.0.33
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let vp;const _p=t=>vp=t,Hw=process.env.NODE_ENV!=="production"?Symbol("pinia"):Symbol();function vc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ss;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ss||(Ss={}));const ay=typeof window<"u",xp=(process.env.NODE_ENV!=="production"||!1)&&process.env.NODE_ENV!=="test"&&ay,Zw=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function jk(t,{autoBom:e=!1}={}){return e&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}function Z_(t,e,n){const o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){Yw(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function Xw(t){const e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function sy(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}const ly=typeof navigator=="object"?navigator:{userAgent:""},Kw=(()=>/Macintosh/.test(ly.userAgent)&&/AppleWebKit/.test(ly.userAgent)&&!/Safari/.test(ly.userAgent))(),Yw=ay?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!Kw?$k:"msSaveOrOpenBlob"in ly?Gk:qk:()=>{};function $k(t,e="download",n){const o=document.createElement("a");o.download=e,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?Xw(o.href)?Z_(t,e,n):(o.target="_blank",sy(o)):sy(o)):(o.href=URL.createObjectURL(t),setTimeout(function(){URL.revokeObjectURL(o.href)},4e4),setTimeout(function(){sy(o)},0))}function Gk(t,e="download",n){if(typeof t=="string")if(Xw(t))Z_(t,e,n);else{const o=document.createElement("a");o.href=t,o.target="_blank",setTimeout(function(){sy(o)})}else navigator.msSaveOrOpenBlob(jk(t,n),e)}function qk(t,e,n,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof t=="string")return Z_(t,e,n);const s=t.type==="application/octet-stream",f=/constructor/i.test(String(Zw.HTMLElement))||"safari"in Zw,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&f||Kw)&&typeof FileReader<"u"){const m=new FileReader;m.onloadend=function(){let g=m.result;if(typeof g!="string")throw o=null,new Error("Wrong reader.result type");g=a?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=g:location.assign(g),o=null},m.readAsDataURL(t)}else{const m=URL.createObjectURL(t);o?o.location.assign(m):location.href=m,o=null,setTimeout(function(){URL.revokeObjectURL(m)},4e4)}}function Ui(t,e){const n="\u{1F34D} "+t;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(n,e):e==="error"?console.error(n):e==="warn"?console.warn(n):console.log(n)}function X_(t){return"_a"in t&&"install"in t}function Jw(){if(!("clipboard"in navigator))return Ui("Your browser doesn't support the Clipboard API","error"),!0}function Qw(t){return t instanceof Error&&t.message.toLowerCase().includes("document is not focused")?(Ui('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function Wk(t){if(!Jw())try{await navigator.clipboard.writeText(JSON.stringify(t.state.value)),Ui("Global state copied to clipboard.")}catch(e){if(Qw(e))return;Ui("Failed to serialize the state. Check the console for more details.","error"),console.error(e)}}async function Hk(t){if(!Jw())try{t.state.value=JSON.parse(await navigator.clipboard.readText()),Ui("Global state pasted from clipboard.")}catch(e){if(Qw(e))return;Ui("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(e)}}async function Zk(t){try{Yw(new Blob([JSON.stringify(t.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(e){Ui("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}let dl;function Xk(){dl||(dl=document.createElement("input"),dl.type="file",dl.accept=".json");function t(){return new Promise((e,n)=>{dl.onchange=async()=>{const o=dl.files;if(!o)return e(null);const s=o.item(0);return e(s?{text:await s.text(),file:s}:null)},dl.oncancel=()=>e(null),dl.onerror=n,dl.click()})}return t}async function Kk(t){try{const n=await(await Xk())();if(!n)return;const{text:o,file:s}=n;t.state.value=JSON.parse(o),Ui(`Global state imported from "${s.name}".`)}catch(e){Ui("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}function Xa(t){return{_custom:{display:t}}}const e2="\u{1F34D} Pinia (root)",K_="_root";function Yk(t){return X_(t)?{id:K_,label:e2}:{id:t.$id,label:t.$id}}function Jk(t){if(X_(t)){const n=Array.from(t._s.keys()),o=t._s;return{state:n.map(f=>({editable:!0,key:f,value:t.state.value[f]})),getters:n.filter(f=>o.get(f)._getters).map(f=>{const a=o.get(f);return{editable:!1,key:f,value:a._getters.reduce((m,g)=>(m[g]=a[g],m),{})}})}}const e={state:Object.keys(t.$state).map(n=>({editable:!0,key:n,value:t.$state[n]}))};return t._getters&&t._getters.length&&(e.getters=t._getters.map(n=>({editable:!1,key:n,value:t[n]}))),t._customProperties.size&&(e.customProperties=Array.from(t._customProperties).map(n=>({editable:!0,key:n,value:t[n]}))),e}function Qk(t){return t?Array.isArray(t)?t.reduce((e,n)=>(e.keys.push(n.key),e.operations.push(n.type),e.oldValue[n.key]=n.oldValue,e.newValue[n.key]=n.newValue,e),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:Xa(t.type),key:Xa(t.key),oldValue:t.oldValue,newValue:t.newValue}:{}}function eL(t){switch(t){case Ss.direct:return"mutation";case Ss.patchFunction:return"$patch";case Ss.patchObject:return"$patch";default:return"unknown"}}let Sh=!0;const uy=[],_c="pinia:mutations",ho="pinia",{assign:tL}=Object,cy=t=>"\u{1F34D} "+t;function rL(t,e){Ww({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:uy,app:t},n=>{typeof n.now!="function"&&Ui("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addTimelineLayer({id:_c,label:"Pinia \u{1F34D}",color:15064968}),n.addInspector({id:ho,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{Wk(e)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await Hk(e),n.sendInspectorTree(ho),n.sendInspectorState(ho)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{Zk(e)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await Kk(e),n.sendInspectorTree(ho),n.sendInspectorState(ho)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:o=>{const s=e._s.get(o);s?s._isOptionsAPI?(s.$reset(),Ui(`Store "${o}" reset.`)):Ui(`Cannot reset "${o}" store because it's a setup store.`,"warn"):Ui(`Cannot reset "${o}" store because it wasn't found.`,"warn")}}]}),n.on.inspectComponent((o,s)=>{const f=o.componentInstance&&o.componentInstance.proxy;if(f&&f._pStores){const a=o.componentInstance.proxy._pStores;Object.values(a).forEach(m=>{o.instanceData.state.push({type:cy(m.$id),key:"state",editable:!0,value:m._isOptionsAPI?{_custom:{value:hr(m.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>m.$reset()}]}}:Object.keys(m.$state).reduce((g,b)=>(g[b]=m.$state[b],g),{})}),m._getters&&m._getters.length&&o.instanceData.state.push({type:cy(m.$id),key:"getters",editable:!1,value:m._getters.reduce((g,b)=>{try{g[b]=m[b]}catch(E){g[b]=E}return g},{})})})}}),n.on.getInspectorTree(o=>{if(o.app===t&&o.inspectorId===ho){let s=[e];s=s.concat(Array.from(e._s.values())),o.rootNodes=(o.filter?s.filter(f=>"$id"in f?f.$id.toLowerCase().includes(o.filter.toLowerCase()):e2.toLowerCase().includes(o.filter.toLowerCase())):s).map(Yk)}}),n.on.getInspectorState(o=>{if(o.app===t&&o.inspectorId===ho){const s=o.nodeId===K_?e:e._s.get(o.nodeId);if(!s)return;s&&(o.state=Jk(s))}}),n.on.editInspectorState((o,s)=>{if(o.app===t&&o.inspectorId===ho){const f=o.nodeId===K_?e:e._s.get(o.nodeId);if(!f)return Ui(`store "${o.nodeId}" not found`,"error");const{path:a}=o;X_(f)?a.unshift("state"):(a.length!==1||!f._customProperties.has(a[0])||a[0]in f.$state)&&a.unshift("$state"),Sh=!1,o.set(f,a,o.state.value),Sh=!0}}),n.on.editComponentState(o=>{if(o.type.startsWith("\u{1F34D}")){const s=o.type.replace(/^🍍\s*/,""),f=e._s.get(s);if(!f)return Ui(`store "${s}" not found`,"error");const{path:a}=o;if(a[0]!=="state")return Ui(`Invalid path for store "${s}":
${a}
Only state can be modified.`);a[0]="$state",Sh=!1,o.set(f,a,o.state.value),Sh=!0}})})}function nL(t,e){uy.includes(cy(e.$id))||uy.push(cy(e.$id)),Ww({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:uy,app:t,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},n=>{const o=typeof n.now=="function"?n.now.bind(n):Date.now;e.$onAction(({after:a,onError:m,name:g,args:b})=>{const E=t2++;n.addTimelineEvent({layerId:_c,event:{time:o(),title:"\u{1F6EB} "+g,subtitle:"start",data:{store:Xa(e.$id),action:Xa(g),args:b},groupId:E}}),a(M=>{xc=void 0,n.addTimelineEvent({layerId:_c,event:{time:o(),title:"\u{1F6EC} "+g,subtitle:"end",data:{store:Xa(e.$id),action:Xa(g),args:b,result:M},groupId:E}})}),m(M=>{xc=void 0,n.addTimelineEvent({layerId:_c,event:{time:o(),logType:"error",title:"\u{1F4A5} "+g,subtitle:"end",data:{store:Xa(e.$id),action:Xa(g),args:b,error:M},groupId:E}})})},!0),e._customProperties.forEach(a=>{Tn(()=>se(e[a]),(m,g)=>{n.notifyComponentUpdate(),n.sendInspectorState(ho),Sh&&n.addTimelineEvent({layerId:_c,event:{time:o(),title:"Change",subtitle:a,data:{newValue:m,oldValue:g},groupId:xc}})},{deep:!0})}),e.$subscribe(({events:a,type:m},g)=>{if(n.notifyComponentUpdate(),n.sendInspectorState(ho),!Sh)return;const b={time:o(),title:eL(m),data:tL({store:Xa(e.$id)},Qk(a)),groupId:xc};xc=void 0,m===Ss.patchFunction?b.subtitle="\u2935\uFE0F":m===Ss.patchObject?b.subtitle="\u{1F9E9}":a&&!Array.isArray(a)&&(b.subtitle=a.type),a&&(b.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:a}}),n.addTimelineEvent({layerId:_c,event:b})},{detached:!0,flush:"sync"});const s=e._hotUpdate;e._hotUpdate=$a(a=>{s(a),n.addTimelineEvent({layerId:_c,event:{time:o(),title:"\u{1F525} "+e.$id,subtitle:"HMR update",data:{store:Xa(e.$id),info:Xa("HMR update")}}}),n.notifyComponentUpdate(),n.sendInspectorTree(ho),n.sendInspectorState(ho)});const{$dispose:f}=e;e.$dispose=()=>{f(),n.notifyComponentUpdate(),n.sendInspectorTree(ho),n.sendInspectorState(ho),n.getSettings().logStoreChanges&&Ui(`Disposed "${e.$id}" store \u{1F5D1}`)},n.notifyComponentUpdate(),n.sendInspectorTree(ho),n.sendInspectorState(ho),n.getSettings().logStoreChanges&&Ui(`"${e.$id}" store installed \u{1F195}`)})}let t2=0,xc;function r2(t,e){const n=e.reduce((o,s)=>(o[s]=hr(t)[s],o),{});for(const o in n)t[o]=function(){const s=t2,f=new Proxy(t,{get(...a){return xc=s,Reflect.get(...a)},set(...a){return xc=s,Reflect.set(...a)}});return n[o].apply(f,arguments)}}function iL({app:t,store:e,options:n}){if(!e.$id.startsWith("__hot:")){if(n.state&&(e._isOptionsAPI=!0),typeof n.state=="function"){r2(e,Object.keys(n.actions));const o=e._hotUpdate;hr(e)._hotUpdate=function(s){o.apply(this,arguments),r2(e,Object.keys(s._hmrPayload.actions))}}nL(t,e)}}function n2(){const t=Fx(!0),e=t.run(()=>br({}));let n=[],o=[];const s=$a({install(f){_p(s),s._a=f,f.provide(Hw,s),f.config.globalProperties.$pinia=s,xp&&rL(f,s),o.forEach(a=>n.push(a)),o=[]},use(f){return!this._a&&!jw?o.push(f):n.push(f),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return xp&&typeof Proxy<"u"&&s.use(iL),s}function i2(t,e){for(const n in e){const o=e[n];if(!(n in t))continue;const s=t[n];vc(s)&&vc(o)&&!cn(o)&&!ja(o)?t[n]=i2(s,o):t[n]=o}return t}const o2=()=>{};function a2(t,e,n,o=o2){t.push(e);const s=()=>{const f=t.indexOf(e);f>-1&&(t.splice(f,1),o())};return!n&&Bx()&&lC(s),s}function Th(t,...e){t.slice().forEach(n=>{n(...e)})}function Y_(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,o)=>t.set(o,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const o=e[n],s=t[n];vc(s)&&vc(o)&&t.hasOwnProperty(n)&&!cn(o)&&!ja(o)?t[n]=Y_(s,o):t[n]=o}return t}const oL=process.env.NODE_ENV!=="production"?Symbol("pinia:skipHydration"):Symbol();function aL(t){return!vc(t)||!t.hasOwnProperty(oL)}const{assign:Ia}=Object;function s2(t){return!!(cn(t)&&t.effect)}function l2(t,e,n,o){const{state:s,actions:f,getters:a}=e,m=n.state.value[t];let g;function b(){!m&&(process.env.NODE_ENV==="production"||!o)&&(n.state.value[t]=s?s():{});const E=process.env.NODE_ENV!=="production"&&o?cb(br(s?s():{}).value):cb(n.state.value[t]);return Ia(E,f,Object.keys(a||{}).reduce((M,I)=>(process.env.NODE_ENV!=="production"&&I in E&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${I}" in store "${t}".`),M[I]=$a(ar(()=>{_p(n);const P=n._s.get(t);return a[I].call(P,P)})),M),{}))}return g=J_(t,b,e,n,o,!0),g}function J_(t,e,n={},o,s,f){let a;const m=Ia({actions:{}},n);if(process.env.NODE_ENV!=="production"&&!o._e.active)throw new Error("Pinia destroyed");const g={deep:!0};process.env.NODE_ENV!=="production"&&!jw&&(g.onTrigger=Se=>{b?P=Se:b==!1&&!ze._hotUpdating&&(Array.isArray(P)?P.push(Se):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))});let b,E,M=$a([]),I=$a([]),P;const z=o.state.value[t];!f&&!z&&(process.env.NODE_ENV==="production"||!s)&&(o.state.value[t]={});const V=br({});let q;function re(Se){let Ie;b=E=!1,process.env.NODE_ENV!=="production"&&(P=[]),typeof Se=="function"?(Se(o.state.value[t]),Ie={type:Ss.patchFunction,storeId:t,events:P}):(Y_(o.state.value[t],Se),Ie={type:Ss.patchObject,payload:Se,storeId:t,events:P});const Ke=q=Symbol();Nm().then(()=>{q===Ke&&(b=!0)}),E=!0,Th(M,Ie,o.state.value[t])}const X=f?function(){const{state:Ie}=n,Ke=Ie?Ie():{};this.$patch(Ge=>{Ia(Ge,Ke)})}:process.env.NODE_ENV!=="production"?()=>{throw new Error(`\u{1F34D}: Store "${t}" is built using the setup syntax and does not implement $reset().`)}:o2;function ae(){a.stop(),M=[],I=[],o._s.delete(t)}function ce(Se,Ie){return function(){_p(o);const Ke=Array.from(arguments),Ge=[],st=[];function be(vt){Ge.push(vt)}function Je(vt){st.push(vt)}Th(I,{args:Ke,name:Se,store:ze,after:be,onError:Je});let ht;try{ht=Ie.apply(this&&this.$id===t?this:ze,Ke)}catch(vt){throw Th(st,vt),vt}return ht instanceof Promise?ht.then(vt=>(Th(Ge,vt),vt)).catch(vt=>(Th(st,vt),Promise.reject(vt))):(Th(Ge,ht),ht)}}const ve=$a({actions:{},getters:{},state:[],hotState:V}),Ne={_p:o,$id:t,$onAction:a2.bind(null,I),$patch:re,$reset:X,$subscribe(Se,Ie={}){const Ke=a2(M,Se,Ie.detached,()=>Ge()),Ge=a.run(()=>Tn(()=>o.state.value[t],st=>{(Ie.flush==="sync"?E:b)&&Se({storeId:t,type:Ss.direct,events:P},st)},Ia({},g,Ie)));return Ke},$dispose:ae},ze=Om(process.env.NODE_ENV!=="production"||xp?Ia({_hmrPayload:ve,_customProperties:$a(new Set)},Ne):Ne);o._s.set(t,ze);const Pe=o._e.run(()=>(a=Fx(),a.run(()=>e())));for(const Se in Pe){const Ie=Pe[Se];if(cn(Ie)&&!s2(Ie)||ja(Ie))process.env.NODE_ENV!=="production"&&s?oy(V.value,Se,rp(Pe,Se)):f||(z&&aL(Ie)&&(cn(Ie)?Ie.value=z[Se]:Y_(Ie,z[Se])),o.state.value[t][Se]=Ie),process.env.NODE_ENV!=="production"&&ve.state.push(Se);else if(typeof Ie=="function"){const Ke=process.env.NODE_ENV!=="production"&&s?Ie:ce(Se,Ie);Pe[Se]=Ke,process.env.NODE_ENV!=="production"&&(ve.actions[Se]=Ie),m.actions[Se]=Ie}else process.env.NODE_ENV!=="production"&&s2(Ie)&&(ve.getters[Se]=f?n.getters[Se]:Ie,ay&&(Pe._getters||(Pe._getters=$a([]))).push(Se))}if(Ia(ze,Pe),Ia(hr(ze),Pe),Object.defineProperty(ze,"$state",{get:()=>process.env.NODE_ENV!=="production"&&s?V.value:o.state.value[t],set:Se=>{if(process.env.NODE_ENV!=="production"&&s)throw new Error("cannot set hotState");re(Ie=>{Ia(Ie,Se)})}}),process.env.NODE_ENV!=="production"&&(ze._hotUpdate=$a(Se=>{ze._hotUpdating=!0,Se._hmrPayload.state.forEach(Ie=>{if(Ie in ze.$state){const Ke=Se.$state[Ie],Ge=ze.$state[Ie];typeof Ke=="object"&&vc(Ke)&&vc(Ge)?i2(Ke,Ge):Se.$state[Ie]=Ge}oy(ze,Ie,rp(Se.$state,Ie))}),Object.keys(ze.$state).forEach(Ie=>{Ie in Se.$state||W_(ze,Ie)}),b=!1,E=!1,o.state.value[t]=rp(Se._hmrPayload,"hotState"),E=!0,Nm().then(()=>{b=!0});for(const Ie in Se._hmrPayload.actions){const Ke=Se[Ie];oy(ze,Ie,ce(Ie,Ke))}for(const Ie in Se._hmrPayload.getters){const Ke=Se._hmrPayload.getters[Ie],Ge=f?ar(()=>(_p(o),Ke.call(ze,ze))):Ke;oy(ze,Ie,Ge)}Object.keys(ze._hmrPayload.getters).forEach(Ie=>{Ie in Se._hmrPayload.getters||W_(ze,Ie)}),Object.keys(ze._hmrPayload.actions).forEach(Ie=>{Ie in Se._hmrPayload.actions||W_(ze,Ie)}),ze._hmrPayload=Se._hmrPayload,ze._getters=Se._getters,ze._hotUpdating=!1})),xp){const Se={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(Ie=>{Object.defineProperty(ze,Ie,Ia({value:ze[Ie]},Se))})}return o._p.forEach(Se=>{if(xp){const Ie=a.run(()=>Se({store:ze,app:o._a,pinia:o,options:m}));Object.keys(Ie||{}).forEach(Ke=>ze._customProperties.add(Ke)),Ia(ze,Ie)}else Ia(ze,a.run(()=>Se({store:ze,app:o._a,pinia:o,options:m})))}),process.env.NODE_ENV!=="production"&&ze.$state&&typeof ze.$state=="object"&&typeof ze.$state.constructor=="function"&&!ze.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${ze.$id}".`),z&&f&&n.hydrate&&n.hydrate(ze.$state,z),b=!0,E=!0,ze}function bc(t,e,n){let o,s;const f=typeof e=="function";typeof t=="string"?(o=t,s=f?n:e):(s=t,o=t.id);function a(m,g){const b=Km();if(m=(process.env.NODE_ENV==="test"&&vp&&vp._testing?null:m)||b&&_h(Hw,null),m&&_p(m),process.env.NODE_ENV!=="production"&&!vp)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);m=vp,m._s.has(o)||(f?J_(o,e,s,m):l2(o,s,m),process.env.NODE_ENV!=="production"&&(a._pinia=m));const E=m._s.get(o);if(process.env.NODE_ENV!=="production"&&g){const M="__hot:"+o,I=f?J_(M,e,s,m,!0):l2(M,Ia({},s),m,!0);g._hotUpdate(I),delete m.state.value[M],m._s.delete(M)}if(process.env.NODE_ENV!=="production"&&ay&&b&&b.proxy&&!g){const M=b.proxy,I="_pStores"in M?M._pStores:M._pStores={};I[o]=E}return E}return a.$id=o,a}function rn(t){{t=hr(t);const e={};for(const n in t){const o=t[n];(cn(o)||ja(o))&&(e[n]=rp(t,n))}return e}}function sL(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var wc=1,Ec=2,Mh=3,lL=4,Q_=5,u2=6378137,uL=6356752314e-3,c2=.0066943799901413165,bp=484813681109536e-20,ft=Math.PI/2,cL=.16666666666666666,hL=.04722222222222222,fL=.022156084656084655,At=1e-10,eo=.017453292519943295,Ts=57.29577951308232,hn=Math.PI/4,wp=Math.PI*2,gi=3.14159265359,Wo={};Wo.greenwich=0,Wo.lisbon=-9.131906111111,Wo.paris=2.337229166667,Wo.bogota=-74.080916666667,Wo.madrid=-3.687938888889,Wo.rome=12.452333333333,Wo.bern=7.439583333333,Wo.jakarta=106.807719444444,Wo.ferro=-17.666666666667,Wo.brussels=4.367975,Wo.stockholm=18.058277777778,Wo.athens=23.7163375,Wo.oslo=10.722916666667;const pL={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var h2=/[\s_\-\/\(\)]/g;function du(t,e){if(t[e])return t[e];for(var n=Object.keys(t),o=e.toLowerCase().replace(h2,""),s=-1,f,a;++s<n.length;)if(f=n[s],a=f.toLowerCase().replace(h2,""),a===o)return t[f]}function e0(t){var e={},n=t.split("+").map(function(m){return m.trim()}).filter(function(m){return m}).reduce(function(m,g){var b=g.split("=");return b.push(!0),m[b[0].toLowerCase()]=b[1],m},{}),o,s,f,a={proj:"projName",datum:"datumCode",rf:function(m){e.rf=parseFloat(m)},lat_0:function(m){e.lat0=m*eo},lat_1:function(m){e.lat1=m*eo},lat_2:function(m){e.lat2=m*eo},lat_ts:function(m){e.lat_ts=m*eo},lon_0:function(m){e.long0=m*eo},lon_1:function(m){e.long1=m*eo},lon_2:function(m){e.long2=m*eo},alpha:function(m){e.alpha=parseFloat(m)*eo},gamma:function(m){e.rectified_grid_angle=parseFloat(m)},lonc:function(m){e.longc=m*eo},x_0:function(m){e.x0=parseFloat(m)},y_0:function(m){e.y0=parseFloat(m)},k_0:function(m){e.k0=parseFloat(m)},k:function(m){e.k0=parseFloat(m)},a:function(m){e.a=parseFloat(m)},b:function(m){e.b=parseFloat(m)},r_a:function(){e.R_A=!0},zone:function(m){e.zone=parseInt(m,10)},south:function(){e.utmSouth=!0},towgs84:function(m){e.datum_params=m.split(",").map(function(g){return parseFloat(g)})},to_meter:function(m){e.to_meter=parseFloat(m)},units:function(m){e.units=m;var g=du(pL,m);g&&(e.to_meter=g.to_meter)},from_greenwich:function(m){e.from_greenwich=m*eo},pm:function(m){var g=du(Wo,m);e.from_greenwich=(g||parseFloat(m))*eo},nadgrids:function(m){m==="@null"?e.datumCode="none":e.nadgrids=m},axis:function(m){var g="ewnsud";m.length===3&&g.indexOf(m.substr(0,1))!==-1&&g.indexOf(m.substr(1,1))!==-1&&g.indexOf(m.substr(2,1))!==-1&&(e.axis=m)},approx:function(){e.approx=!0}};for(o in n)s=n[o],o in a?(f=a[o],typeof f=="function"?f(s):e[f]=s):e[o]=s;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Ep=1,f2=2,p2=3,hy=4,d2=5,t0=-1,dL=/\s/,mL=/[A-Za-z]/,yL=/[A-Za-z84_]/,fy=/[,\]]/,m2=/[\d\.E\-\+]/;function ml(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Ep}ml.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==hy)for(;dL.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Ep:return this.neutral(t);case f2:return this.keyword(t);case hy:return this.quoted(t);case d2:return this.afterquote(t);case p2:return this.number(t);case t0:return}},ml.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=hy;return}if(fy.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)},ml.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Ep;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Ep,this.currentObject=this.stack.pop(),this.currentObject||(this.state=t0);return}},ml.prototype.number=function(t){if(m2.test(t)){this.word+=t;return}if(fy.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)},ml.prototype.quoted=function(t){if(t==='"'){this.state=d2;return}this.word+=t},ml.prototype.keyword=function(t){if(yL.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Ep;return}if(fy.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)},ml.prototype.neutral=function(t){if(mL.test(t)){this.word=t,this.state=f2;return}if(t==='"'){this.word="",this.state=hy;return}if(m2.test(t)){this.word=t,this.state=p2;return}if(fy.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)},ml.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===t0)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function gL(t){var e=new ml(t);return e.output()}function y2(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var o=e?{}:t,s=n.reduce(function(f,a){return Ih(a,f),f},o);e&&(t[e]=s)}function Ih(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Ih(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var o;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Ih(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Ih(t[3],e[n]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],y2(e,n,t);return;default:for(o=-1;++o<t.length;)if(!Array.isArray(t[o]))return Ih(t,e[n]);return y2(e,n,t)}}var vL=.017453292519943295;function _L(t,e){var n=e[0],o=e[1];!(n in t)&&o in t&&(t[n]=t[o],e.length===3&&(t[n]=e[2](t[n])))}function yl(t){return t*vL}function xL(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,o=t.AXIS.length;n<o;++n){var s=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?e+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?e+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?e+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var f=t.GEOGCS;t.type==="GEOGCS"&&(f=t),f&&(f.DATUM?t.datumCode=f.DATUM.name.toLowerCase():t.datumCode=f.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),f.DATUM&&f.DATUM.SPHEROID&&(t.ellps=f.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=f.DATUM.SPHEROID.a,t.rf=parseFloat(f.DATUM.SPHEROID.rf,10)),f.DATUM&&f.DATUM.TOWGS84&&(t.datum_params=f.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function a(b){var E=t.to_meter||1;return b*E}var m=function(b){return _L(t,b)},g=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",yl],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",yl],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",yl],["lat0","latitude_of_origin",yl],["lat0","standard_parallel_1",yl],["lat1","standard_parallel_1",yl],["lat2","standard_parallel_2",yl],["azimuth","Azimuth"],["alpha","azimuth",yl],["srsCode","name"]];g.forEach(m),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")&&(t.lat0=yl(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function g2(t){var e=gL(t),n=e.shift(),o=e.shift();e.unshift(["name",o]),e.unshift(["type",n]);var s={};return Ih(e,s),xL(s),s}function Lo(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?Lo[t]=e0(arguments[1]):Lo[t]=g2(arguments[1]):Lo[t]=n}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(o){Array.isArray(o)?Lo.apply(e,o):Lo(o)});if(typeof t=="string"){if(t in Lo)return Lo[t]}else"EPSG"in t?Lo["EPSG:"+t.EPSG]=t:"ESRI"in t?Lo["ESRI:"+t.ESRI]=t:"IAU2000"in t?Lo["IAU2000:"+t.IAU2000]=t:console.log(t);return}}sL(Lo);function bL(t){return typeof t=="string"}function wL(t){return t in Lo}var EL=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function SL(t){return EL.some(function(e){return t.indexOf(e)>-1})}var TL=["3857","900913","3785","102113"];function ML(t){var e=du(t,"authority");if(!!e){var n=du(e,"epsg");return n&&TL.indexOf(n)>-1}}function IL(t){var e=du(t,"extension");if(!!e)return du(e,"proj4")}function OL(t){return t[0]==="+"}function CL(t){if(bL(t)){if(wL(t))return Lo[t];if(SL(t)){var e=g2(t);if(ML(e))return Lo["EPSG:3857"];var n=IL(e);return n?e0(n):e}if(OL(t))return e0(t)}else return t}function v2(t,e){t=t||{};var n,o;if(!e)return t;for(o in e)n=e[o],n!==void 0&&(t[o]=n);return t}function Ms(t,e,n){var o=t*e;return n/Math.sqrt(1-o*o)}function Sp(t){return t<0?-1:1}function Vt(t){return Math.abs(t)<=gi?t:t-Sp(t)*wp}function Ka(t,e,n){var o=t*n,s=.5*t;return o=Math.pow((1-o)/(1+o),s),Math.tan(.5*(ft-e))/o}function Tp(t,e){for(var n=.5*t,o,s,f=ft-2*Math.atan(e),a=0;a<=15;a++)if(o=t*Math.sin(f),s=ft-2*Math.atan(e*Math.pow((1-o)/(1+o),n))-f,f+=s,Math.abs(s)<=1e-10)return f;return-9999}function AL(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ms(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function PL(t){var e=t.x,n=t.y;if(n*Ts>90&&n*Ts<-90&&e*Ts>180&&e*Ts<-180)return null;var o,s;if(Math.abs(Math.abs(n)-ft)<=At)return null;if(this.sphere)o=this.x0+this.a*this.k0*Vt(e-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(hn+.5*n));else{var f=Math.sin(n),a=Ka(this.e,n,f);o=this.x0+this.a*this.k0*Vt(e-this.long0),s=this.y0-this.a*this.k0*Math.log(a)}return t.x=o,t.y=s,t}function kL(t){var e=t.x-this.x0,n=t.y-this.y0,o,s;if(this.sphere)s=ft-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var f=Math.exp(-n/(this.a*this.k0));if(s=Tp(this.e,f),s===-9999)return null}return o=Vt(this.long0+e/(this.a*this.k0)),t.x=o,t.y=s,t}var LL=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const DL={init:AL,forward:PL,inverse:kL,names:LL};function NL(){}function _2(t){return t}var RL=["longlat","identity"],zL=[DL,{init:NL,forward:_2,inverse:_2,names:RL}],py={},dy=[];function x2(t,e){var n=dy.length;return t.names?(dy[n]=t,t.names.forEach(function(o){py[o.toLowerCase()]=n}),this):(console.log(e),!0)}function FL(t){if(!t)return!1;var e=t.toLowerCase();if(typeof py[e]<"u"&&dy[py[e]])return dy[py[e]]}function BL(){zL.forEach(x2)}const VL={start:BL,add:x2,get:FL};var xr={};xr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},xr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},xr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},xr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},xr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},xr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},xr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},xr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},xr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},xr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},xr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},xr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},xr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},xr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},xr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},xr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},xr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},xr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},xr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},xr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},xr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},xr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},xr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},xr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},xr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},xr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},xr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},xr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},xr.hough={a:6378270,rf:297,ellipseName:"Hough"},xr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},xr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},xr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},xr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},xr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},xr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},xr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},xr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},xr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},xr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},xr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},xr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var UL=xr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};xr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function jL(t,e,n,o){var s=t*t,f=e*e,a=(s-f)/s,m=0;o?(t*=1-a*(cL+a*(hL+a*fL)),s=t*t,a=0):m=Math.sqrt(a);var g=(s-f)/f;return{es:a,e:m,ep2:g}}function $L(t,e,n,o,s){if(!t){var f=du(xr,o);f||(f=UL),t=f.a,e=f.b,n=f.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<At)&&(s=!0,e=t),{a:t,b:e,rf:n,sphere:s}}var ji={};ji.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ji.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ji.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},ji.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},ji.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},ji.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},ji.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},ji.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},ji.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ji.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},ji.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},ji.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},ji.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},ji.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},ji.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},ji.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},ji.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function GL(t,e,n,o,s,f,a){var m={};return t===void 0||t==="none"?m.datum_type=Q_:m.datum_type=lL,e&&(m.datum_params=e.map(parseFloat),(m.datum_params[0]!==0||m.datum_params[1]!==0||m.datum_params[2]!==0)&&(m.datum_type=wc),m.datum_params.length>3&&(m.datum_params[3]!==0||m.datum_params[4]!==0||m.datum_params[5]!==0||m.datum_params[6]!==0)&&(m.datum_type=Ec,m.datum_params[3]*=bp,m.datum_params[4]*=bp,m.datum_params[5]*=bp,m.datum_params[6]=m.datum_params[6]/1e6+1)),a&&(m.datum_type=Mh,m.grids=a),m.a=n,m.b=o,m.es=s,m.ep2=f,m}var b2={};function qL(t,e){var n=new DataView(e),o=ZL(n),s=XL(n,o);s.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var f=KL(n,s,o),a={header:s,subgrids:f};return b2[t]=a,a}function WL(t){if(t===void 0)return null;var e=t.split(",");return e.map(HL)}function HL(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:b2[t]||null,isNull:!1}}function Oh(t){return t/3600*Math.PI/180}function ZL(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function XL(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:r0(t,56,56+8).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function r0(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function KL(t,e,n){for(var o=176,s=[],f=0;f<e.nSubgrids;f++){var a=JL(t,o,n),m=QL(t,o,a,n),g=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),b=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);s.push({ll:[Oh(a.lowerLongitude),Oh(a.lowerLatitude)],del:[Oh(a.longitudeInterval),Oh(a.latitudeInterval)],lim:[g,b],count:a.gridNodeCount,cvs:YL(m)})}return s}function YL(t){return t.map(function(e){return[Oh(e.longitudeShift),Oh(e.latitudeShift)]})}function JL(t,e,n){return{name:r0(t,e+8,e+16).trim(),parent:r0(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function QL(t,e,n,o){for(var s=e+176,f=16,a=[],m=0;m<n.gridNodeCount;m++){var g={latitudeShift:t.getFloat32(s+m*f,o),longitudeShift:t.getFloat32(s+m*f+4,o),latitudeAccuracy:t.getFloat32(s+m*f+8,o),longitudeAccuracy:t.getFloat32(s+m*f+12,o)};a.push(g)}return a}function Is(t,e){if(!(this instanceof Is))return new Is(t);e=e||function(b){if(b)throw b};var n=CL(t);if(typeof n!="object"){e(t);return}var o=Is.projections.get(n.projName);if(!o){e(t);return}if(n.datumCode&&n.datumCode!=="none"){var s=du(ji,n.datumCode);s&&(n.datum_params=n.datum_params||(s.towgs84?s.towgs84.split(","):null),n.ellps=s.ellipse,n.datumName=s.datumName?s.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var f=$L(n.a,n.b,n.rf,n.ellps,n.sphere),a=jL(f.a,f.b,f.rf,n.R_A),m=WL(n.nadgrids),g=n.datum||GL(n.datumCode,n.datum_params,f.a,f.b,a.es,a.ep2,m);v2(this,n),v2(this,o),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=g,this.init(),e(null,this)}Is.projections=VL,Is.projections.start();function eD(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===wc?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===Ec?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function w2(t,e,n){var o=t.x,s=t.y,f=t.z?t.z:0,a,m,g,b;if(s<-ft&&s>-1.001*ft)s=-ft;else if(s>ft&&s<1.001*ft)s=ft;else{if(s<-ft)return{x:-1/0,y:-1/0,z:t.z};if(s>ft)return{x:1/0,y:1/0,z:t.z}}return o>Math.PI&&(o-=2*Math.PI),m=Math.sin(s),b=Math.cos(s),g=m*m,a=n/Math.sqrt(1-e*g),{x:(a+f)*b*Math.cos(o),y:(a+f)*b*Math.sin(o),z:(a*(1-e)+f)*m}}function E2(t,e,n,o){var s=1e-12,f=s*s,a=30,m,g,b,E,M,I,P,z,V,q,re,X,ae,ce=t.x,ve=t.y,Ne=t.z?t.z:0,ze,Pe,Se;if(m=Math.sqrt(ce*ce+ve*ve),g=Math.sqrt(ce*ce+ve*ve+Ne*Ne),m/n<s){if(ze=0,g/n<s)return Pe=ft,Se=-o,{x:t.x,y:t.y,z:t.z}}else ze=Math.atan2(ve,ce);b=Ne/g,E=m/g,M=1/Math.sqrt(1-e*(2-e)*E*E),z=E*(1-e)*M,V=b*M,ae=0;do ae++,P=n/Math.sqrt(1-e*V*V),Se=m*z+Ne*V-P*(1-e*V*V),I=e*P/(P+Se),M=1/Math.sqrt(1-I*(2-I)*E*E),q=E*(1-I)*M,re=b*M,X=re*z-q*V,z=q,V=re;while(X*X>f&&ae<a);return Pe=Math.atan(re/Math.abs(q)),{x:ze,y:Pe,z:Se}}function tD(t,e,n){if(e===wc)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===Ec){var o=n[0],s=n[1],f=n[2],a=n[3],m=n[4],g=n[5],b=n[6];return{x:b*(t.x-g*t.y+m*t.z)+o,y:b*(g*t.x+t.y-a*t.z)+s,z:b*(-m*t.x+a*t.y+t.z)+f}}}function rD(t,e,n){if(e===wc)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===Ec){var o=n[0],s=n[1],f=n[2],a=n[3],m=n[4],g=n[5],b=n[6],E=(t.x-o)/b,M=(t.y-s)/b,I=(t.z-f)/b;return{x:E+g*M-m*I,y:-g*E+M+a*I,z:m*E-a*M+I}}}function my(t){return t===wc||t===Ec}function nD(t,e,n){if(eD(t,e)||t.datum_type===Q_||e.datum_type===Q_)return n;var o=t.a,s=t.es;if(t.datum_type===Mh){var f=S2(t,!1,n);if(f!==0)return;o=u2,s=c2}var a=e.a,m=e.b,g=e.es;if(e.datum_type===Mh&&(a=u2,m=uL,g=c2),s===g&&o===a&&!my(t.datum_type)&&!my(e.datum_type))return n;if(n=w2(n,s,o),my(t.datum_type)&&(n=tD(n,t.datum_type,t.datum_params)),my(e.datum_type)&&(n=rD(n,e.datum_type,e.datum_params)),n=E2(n,g,a,m),e.datum_type===Mh){var b=S2(e,!0,n);if(b!==0)return}return n}function S2(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var o={x:-n.x,y:n.y},s={x:Number.NaN,y:Number.NaN},f=[],a=0;a<t.grids.length;a++){var m=t.grids[a];if(f.push(m.name),m.isNull){s=o;break}if(m.mandatory,m.grid===null){if(m.mandatory)return console.log("Unable to find mandatory grid '"+m.name+"'"),-1;continue}var g=m.grid.subgrids[0],b=(Math.abs(g.del[1])+Math.abs(g.del[0]))/1e4,E=g.ll[0]-b,M=g.ll[1]-b,I=g.ll[0]+(g.lim[0]-1)*g.del[0]+b,P=g.ll[1]+(g.lim[1]-1)*g.del[1]+b;if(!(M>o.y||E>o.x||P<o.y||I<o.x)&&(s=iD(o,e,g),!isNaN(s.x)))break}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-o.x*Ts+" "+o.y*Ts+" tried: '"+f+"'"),-1):(n.x=-s.x,n.y=s.y,0)}function iD(t,e,n){var o={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return o;var s={x:t.x,y:t.y};s.x-=n.ll[0],s.y-=n.ll[1],s.x=Vt(s.x-Math.PI)+Math.PI;var f=T2(s,n);if(e){if(isNaN(f.x))return o;f.x=s.x-f.x,f.y=s.y-f.y;var a=9,m=1e-12,g,b;do{if(b=T2(f,n),isNaN(b.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}g={x:s.x-(b.x+f.x),y:s.y-(b.y+f.y)},f.x+=g.x,f.y+=g.y}while(a--&&Math.abs(g.x)>m&&Math.abs(g.y)>m);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),o;o.x=Vt(f.x+n.ll[0]),o.y=f.y+n.ll[1]}else isNaN(f.x)||(o.x=t.x+f.x,o.y=t.y+f.y);return o}function T2(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},o={x:Math.floor(n.x),y:Math.floor(n.y)},s={x:n.x-1*o.x,y:n.y-1*o.y},f={x:Number.NaN,y:Number.NaN},a;if(o.x<0||o.x>=e.lim[0]||o.y<0||o.y>=e.lim[1])return f;a=o.y*e.lim[0]+o.x;var m={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var g={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var b={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var E={x:e.cvs[a][0],y:e.cvs[a][1]},M=s.x*s.y,I=s.x*(1-s.y),P=(1-s.x)*(1-s.y),z=(1-s.x)*s.y;return f.x=P*m.x+I*g.x+z*E.x+M*b.x,f.y=P*m.y+I*g.y+z*E.y+M*b.y,f}function M2(t,e,n){var o=n.x,s=n.y,f=n.z||0,a,m,g,b={};for(g=0;g<3;g++)if(!(e&&g===2&&n.z===void 0))switch(g===0?(a=o,"ew".indexOf(t.axis[g])!==-1?m="x":m="y"):g===1?(a=s,"ns".indexOf(t.axis[g])!==-1?m="y":m="x"):(a=f,m="z"),t.axis[g]){case"e":b[m]=a;break;case"w":b[m]=-a;break;case"n":b[m]=a;break;case"s":b[m]=-a;break;case"u":n[m]!==void 0&&(b.z=a);break;case"d":n[m]!==void 0&&(b.z=-a);break;default:return null}return b}function I2(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function oD(t){O2(t.x),O2(t.y)}function O2(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function aD(t,e){return(t.datum.datum_type===wc||t.datum.datum_type===Ec||t.datum.datum_type===Mh)&&e.datumCode!=="WGS84"||(e.datum.datum_type===wc||e.datum.datum_type===Ec||e.datum.datum_type===Mh)&&t.datumCode!=="WGS84"}function yy(t,e,n,o){var s;Array.isArray(n)?n=I2(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var f=n.z!==void 0;if(oD(n),t.datum&&e.datum&&aD(t,e)&&(s=new Is("WGS84"),n=yy(t,s,n,o),t=s),o&&t.axis!=="enu"&&(n=M2(t,!1,n)),t.projName==="longlat")n={x:n.x*eo,y:n.y*eo,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=nD(t.datum,e.datum,n),!!n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Ts,y:n.y*Ts,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),o&&e.axis!=="enu"?M2(e,!0,n):(f||delete n.z,n)}var C2=Is("WGS84");function n0(t,e,n,o){var s,f,a;return Array.isArray(n)?(s=yy(t,e,n,o)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(n.splice(3)):[s.x,s.y,n[2]].concat(n.splice(3)):[s.x,s.y].concat(n.splice(2)):[s.x,s.y]):(f=yy(t,e,n,o),a=Object.keys(n),a.length===2||a.forEach(function(m){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(m==="x"||m==="y"||m==="z")return}else if(m==="x"||m==="y")return;f[m]=n[m]}),f)}function A2(t){return t instanceof Is?t:t.oProj?t.oProj:Is(t)}function fo(t,e,n){t=A2(t);var o=!1,s;return typeof e>"u"?(e=t,t=C2,o=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,e=t,t=C2,o=!0),e=A2(e),n?n0(t,e,n):(s={forward:function(f,a){return n0(t,e,f,a)},inverse:function(f,a){return n0(e,t,f,a)}},o&&(s.oProj=e),s)}var P2=6,k2="AJSAJS",L2="AFAFAF",Ch=65,Ho=73,Oa=79,Mp=86,Ip=90;const sD={forward:D2,inverse:lD,toPoint:N2};function D2(t,e){return e=e||5,hD(uD({lat:t[1],lon:t[0]}),e)}function lD(t){var e=o0(F2(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function N2(t){var e=o0(F2(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function i0(t){return t*(Math.PI/180)}function R2(t){return 180*(t/Math.PI)}function uD(t){var e=t.lat,n=t.lon,o=6378137,s=.00669438,f=.9996,a,m,g,b,E,M,I,P=i0(e),z=i0(n),V,q;q=Math.floor((n+180)/6)+1,n===180&&(q=60),e>=56&&e<64&&n>=3&&n<12&&(q=32),e>=72&&e<84&&(n>=0&&n<9?q=31:n>=9&&n<21?q=33:n>=21&&n<33?q=35:n>=33&&n<42&&(q=37)),a=(q-1)*6-180+3,V=i0(a),m=s/(1-s),g=o/Math.sqrt(1-s*Math.sin(P)*Math.sin(P)),b=Math.tan(P)*Math.tan(P),E=m*Math.cos(P)*Math.cos(P),M=Math.cos(P)*(z-V),I=o*((1-s/4-3*s*s/64-5*s*s*s/256)*P-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*P)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*P)-35*s*s*s/3072*Math.sin(6*P));var re=f*g*(M+(1-b+E)*M*M*M/6+(5-18*b+b*b+72*E-58*m)*M*M*M*M*M/120)+5e5,X=f*(I+g*Math.tan(P)*(M*M/2+(5-b+9*E+4*E*E)*M*M*M*M/24+(61-58*b+b*b+600*E-330*m)*M*M*M*M*M*M/720));return e<0&&(X+=1e7),{northing:Math.round(X),easting:Math.round(re),zoneNumber:q,zoneLetter:cD(e)}}function o0(t){var e=t.northing,n=t.easting,o=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var f=.9996,a=6378137,m=.00669438,g,b=(1-Math.sqrt(1-m))/(1+Math.sqrt(1-m)),E,M,I,P,z,V,q,re,X,ae=n-5e5,ce=e;o<"N"&&(ce-=1e7),q=(s-1)*6-180+3,g=m/(1-m),V=ce/f,re=V/(a*(1-m/4-3*m*m/64-5*m*m*m/256)),X=re+(3*b/2-27*b*b*b/32)*Math.sin(2*re)+(21*b*b/16-55*b*b*b*b/32)*Math.sin(4*re)+151*b*b*b/96*Math.sin(6*re),E=a/Math.sqrt(1-m*Math.sin(X)*Math.sin(X)),M=Math.tan(X)*Math.tan(X),I=g*Math.cos(X)*Math.cos(X),P=a*(1-m)/Math.pow(1-m*Math.sin(X)*Math.sin(X),1.5),z=ae/(E*f);var ve=X-E*Math.tan(X)/P*(z*z/2-(5+3*M+10*I-4*I*I-9*g)*z*z*z*z/24+(61+90*M+298*I+45*M*M-252*g-3*I*I)*z*z*z*z*z*z/720);ve=R2(ve);var Ne=(z-(1+2*M+I)*z*z*z/6+(5-2*I+28*M-3*I*I+8*g+24*M*M)*z*z*z*z*z/120)/Math.cos(X);Ne=q+R2(Ne);var ze;if(t.accuracy){var Pe=o0({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});ze={top:Pe.lat,right:Pe.lon,bottom:ve,left:Ne}}else ze={lat:ve,lon:Ne};return ze}function cD(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function hD(t,e){var n="00000"+t.easting,o="00000"+t.northing;return t.zoneNumber+t.zoneLetter+fD(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+o.substr(o.length-5,e)}function fD(t,e,n){var o=z2(n),s=Math.floor(t/1e5),f=Math.floor(e/1e5)%20;return pD(s,f,o)}function z2(t){var e=t%P2;return e===0&&(e=P2),e}function pD(t,e,n){var o=n-1,s=k2.charCodeAt(o),f=L2.charCodeAt(o),a=s+t-1,m=f+e,g=!1;a>Ip&&(a=a-Ip+Ch-1,g=!0),(a===Ho||s<Ho&&a>Ho||(a>Ho||s<Ho)&&g)&&a++,(a===Oa||s<Oa&&a>Oa||(a>Oa||s<Oa)&&g)&&(a++,a===Ho&&a++),a>Ip&&(a=a-Ip+Ch-1),m>Mp?(m=m-Mp+Ch-1,g=!0):g=!1,(m===Ho||f<Ho&&m>Ho||(m>Ho||f<Ho)&&g)&&m++,(m===Oa||f<Oa&&m>Oa||(m>Oa||f<Oa)&&g)&&(m++,m===Ho&&m++),m>Mp&&(m=m-Mp+Ch-1);var b=String.fromCharCode(a)+String.fromCharCode(m);return b}function F2(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,o="",s,f=0;!/[A-Z]/.test(s=t.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+t;o+=s,f++}var a=parseInt(o,10);if(f===0||f+3>e)throw"MGRSPoint bad conversion from: "+t;var m=t.charAt(f++);if(m<="A"||m==="B"||m==="Y"||m>="Z"||m==="I"||m==="O")throw"MGRSPoint zone letter "+m+" not handled: "+t;n=t.substring(f,f+=2);for(var g=z2(a),b=dD(n.charAt(0),g),E=mD(n.charAt(1),g);E<yD(m);)E+=2e6;var M=e-f;if(M%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var I=M/2,P=0,z=0,V,q,re,X,ae;return I>0&&(V=1e5/Math.pow(10,I),q=t.substring(f,f+I),P=parseFloat(q)*V,re=t.substring(f+I),z=parseFloat(re)*V),X=P+b,ae=z+E,{easting:X,northing:ae,zoneLetter:m,zoneNumber:a,accuracy:V}}function dD(t,e){for(var n=k2.charCodeAt(e-1),o=1e5,s=!1;n!==t.charCodeAt(0);){if(n++,n===Ho&&n++,n===Oa&&n++,n>Ip){if(s)throw"Bad character: "+t;n=Ch,s=!0}o+=1e5}return o}function mD(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=L2.charCodeAt(e-1),o=0,s=!1;n!==t.charCodeAt(0);){if(n++,n===Ho&&n++,n===Oa&&n++,n>Mp){if(s)throw"Bad character: "+t;n=Ch,s=!0}o+=1e5}return o}function yD(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Ah(t,e,n){if(!(this instanceof Ah))return new Ah(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var o=t.split(",");this.x=parseFloat(o[0],10),this.y=parseFloat(o[1],10),this.z=parseFloat(o[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ah.fromMGRS=function(t){return new Ah(N2(t))},Ah.prototype.toMGRS=function(t){return D2([this.x,this.y],t)};var gD=1,vD=.25,B2=.046875,V2=.01953125,U2=.01068115234375,_D=.75,xD=.46875,bD=.013020833333333334,wD=.007120768229166667,ED=.3645833333333333,SD=.005696614583333333,TD=.3076171875;function j2(t){var e=[];e[0]=gD-t*(vD+t*(B2+t*(V2+t*U2))),e[1]=t*(_D-t*(B2+t*(V2+t*U2)));var n=t*t;return e[2]=n*(xD-t*(bD+t*wD)),n*=t,e[3]=n*(ED-t*SD),e[4]=n*t*TD,e}function gy(t,e,n,o){return n*=e,e*=e,o[0]*t-n*(o[1]+e*(o[2]+e*(o[3]+e*o[4])))}var MD=20;function $2(t,e,n){for(var o=1/(1-e),s=t,f=MD;f;--f){var a=Math.sin(s),m=1-e*a*a;if(m=(gy(s,a,Math.cos(s),n)-t)*(m*Math.sqrt(m))*o,s-=m,Math.abs(m)<At)return s}return s}function ID(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=j2(this.es),this.ml0=gy(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function OD(t){var e=t.x,n=t.y,o=Vt(e-this.long0),s,f,a,m=Math.sin(n),g=Math.cos(n);if(this.es){var E=g*o,M=Math.pow(E,2),I=this.ep2*Math.pow(g,2),P=Math.pow(I,2),z=Math.abs(g)>At?Math.tan(n):0,V=Math.pow(z,2),q=Math.pow(V,2);s=1-this.es*Math.pow(m,2),E=E/Math.sqrt(s);var re=gy(n,m,g,this.en);f=this.a*(this.k0*E*(1+M/6*(1-V+I+M/20*(5-18*V+q+14*I-58*V*I+M/42*(61+179*q-q*V-479*V)))))+this.x0,a=this.a*(this.k0*(re-this.ml0+m*o*E/2*(1+M/12*(5-V+9*I+4*P+M/30*(61+q-58*V+270*I-330*V*I+M/56*(1385+543*q-q*V-3111*V))))))+this.y0}else{var b=g*Math.sin(o);if(Math.abs(Math.abs(b)-1)<At)return 93;if(f=.5*this.a*this.k0*Math.log((1+b)/(1-b))+this.x0,a=g*Math.cos(o)/Math.sqrt(1-Math.pow(b,2)),b=Math.abs(a),b>=1){if(b-1>At)return 93;a=0}else a=Math.acos(a);n<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return t.x=f,t.y=a,t}function CD(t){var e,n,o,s,f=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,n=$2(e,this.es,this.en),Math.abs(n)<ft){var M=Math.sin(n),I=Math.cos(n),P=Math.abs(I)>At?Math.tan(n):0,z=this.ep2*Math.pow(I,2),V=Math.pow(z,2),q=Math.pow(P,2),re=Math.pow(q,2);e=1-this.es*Math.pow(M,2);var X=f*Math.sqrt(e)/this.k0,ae=Math.pow(X,2);e=e*P,o=n-e*ae/(1-this.es)*.5*(1-ae/12*(5+3*q-9*z*q+z-4*V-ae/30*(61+90*q-252*z*q+45*re+46*z-ae/56*(1385+3633*q+4095*re+1574*re*q)))),s=Vt(this.long0+X*(1-ae/6*(1+2*q+z-ae/20*(5+28*q+24*re+8*z*q+6*z-ae/42*(61+662*q+1320*re+720*re*q))))/I)}else o=ft*Sp(a),s=0;else{var m=Math.exp(f/this.k0),g=.5*(m-1/m),b=this.lat0+a/this.k0,E=Math.cos(b);e=Math.sqrt((1-Math.pow(E,2))/(1+Math.pow(g,2))),o=Math.asin(e),a<0&&(o=-o),g===0&&E===0?s=0:s=Vt(Math.atan2(g,E)+this.long0)}return t.x=s,t.y=o,t}var AD=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const vy={init:ID,forward:OD,inverse:CD,names:AD};function G2(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function Ya(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),o=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(o,2))}function PD(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function kD(t){var e=Math.abs(t);return e=PD(e*(1+e/(Ya(1,e)+1))),t<0?-e:e}function a0(t,e){for(var n=2*Math.cos(2*e),o=t.length-1,s=t[o],f=0,a;--o>=0;)a=-f+n*s+t[o],f=s,s=a;return e+a*Math.sin(2*e)}function LD(t,e){for(var n=2*Math.cos(e),o=t.length-1,s=t[o],f=0,a;--o>=0;)a=-f+n*s+t[o],f=s,s=a;return Math.sin(e)*a}function DD(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function q2(t,e,n){for(var o=Math.sin(e),s=Math.cos(e),f=G2(n),a=DD(n),m=2*s*a,g=-2*o*f,b=t.length-1,E=t[b],M=0,I=0,P=0,z,V;--b>=0;)z=I,V=M,I=E,M=P,E=-z+m*I-g*M+t[b],P=-V+g*I+m*M;return m=o*a,g=s*f,[m*E-g*P,m*P+g*E]}function ND(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(vy.init.apply(this),this.forward=vy.forward,this.inverse=vy.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var o=a0(this.cbg,this.lat0);this.Zb=-this.Qn*(o+LD(this.gtu,2*o))}function RD(t){var e=Vt(t.x-this.long0),n=t.y;n=a0(this.cbg,n);var o=Math.sin(n),s=Math.cos(n),f=Math.sin(e),a=Math.cos(e);n=Math.atan2(o,a*s),e=Math.atan2(f*s,Ya(o,s*a)),e=kD(Math.tan(e));var m=q2(this.gtu,2*n,2*e);n=n+m[0],e=e+m[1];var g,b;return Math.abs(e)<=2.623395162778?(g=this.a*(this.Qn*e)+this.x0,b=this.a*(this.Qn*n+this.Zb)+this.y0):(g=1/0,b=1/0),t.x=g,t.y=b,t}function zD(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var o,s;if(Math.abs(e)<=2.623395162778){var f=q2(this.utg,2*n,2*e);n=n+f[0],e=e+f[1],e=Math.atan(G2(e));var a=Math.sin(n),m=Math.cos(n),g=Math.sin(e),b=Math.cos(e);n=Math.atan2(a*b,Ya(g,b*m)),e=Math.atan2(g,b*m),o=Vt(e+this.long0),s=a0(this.cgb,n)}else o=1/0,s=1/0;return t.x=o,t.y=s,t}var FD=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];const _y={init:ND,forward:RD,inverse:zD,names:FD};function BD(t,e){if(t===void 0){if(t=Math.floor((Vt(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var VD="etmerc";function UD(){var t=BD(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*eo,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,_y.init.apply(this),this.forward=_y.forward,this.inverse=_y.inverse}var jD=["Universal Transverse Mercator System","utm"];const $D={init:UD,names:jD,dependsOn:VD};function s0(t,e){return Math.pow((1-t)/(1+t),e)}var GD=20;function qD(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+hn)/(Math.pow(Math.tan(.5*this.lat0+hn),this.C)*s0(this.e*t,this.ratexp))}function WD(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+hn),this.C)*s0(this.e*Math.sin(n),this.ratexp))-ft,t.x=this.C*e,t}function HD(t){for(var e=1e-14,n=t.x/this.C,o=t.y,s=Math.pow(Math.tan(.5*o+hn)/this.K,1/this.C),f=GD;f>0&&(o=2*Math.atan(s*s0(this.e*Math.sin(t.y),-.5*this.e))-ft,!(Math.abs(o-t.y)<e));--f)t.y=o;return f?(t.x=n,t.y=o,t):null}var ZD=["gauss"];const l0={init:qD,forward:WD,inverse:HD,names:ZD};function XD(){l0.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function KD(t){var e,n,o,s;return t.x=Vt(t.x-this.long0),l0.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*o),t.x=s*n*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*n*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function YD(t){var e,n,o,s,f;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,f=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(f,this.R2);e=Math.sin(a),n=Math.cos(a),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/f),o=Math.atan2(t.x*e,f*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,o=0;return t.x=o,t.y=s,l0.inverse.apply(this,[t]),t.x=Vt(t.x+this.long0),t}var JD=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const QD={init:XD,forward:KD,inverse:YD,names:JD};function eN(t,e,n){return e*=n,Math.tan(.5*(ft+t))*Math.pow((1-e)/(1+e),.5*n)}function tN(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=At&&(this.k0=.5*(1+Sp(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=At&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=At&&(this.k0=.5*this.cons*Ms(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ka(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ms(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-ft,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function rN(t){var e=t.x,n=t.y,o=Math.sin(n),s=Math.cos(n),f,a,m,g,b,E,M=Vt(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=At&&Math.abs(n+this.lat0)<=At?(t.x=NaN,t.y=NaN,t):this.sphere?(f=2*this.k0/(1+this.sinlat0*o+this.coslat0*s*Math.cos(M)),t.x=this.a*f*s*Math.sin(M)+this.x0,t.y=this.a*f*(this.coslat0*o-this.sinlat0*s*Math.cos(M))+this.y0,t):(a=2*Math.atan(this.ssfn_(n,o,this.e))-ft,g=Math.cos(a),m=Math.sin(a),Math.abs(this.coslat0)<=At?(b=Ka(this.e,n*this.con,this.con*o),E=2*this.a*this.k0*b/this.cons,t.x=this.x0+E*Math.sin(e-this.long0),t.y=this.y0-this.con*E*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<At?(f=2*this.a*this.k0/(1+g*Math.cos(M)),t.y=f*m):(f=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*m+this.cosX0*g*Math.cos(M))),t.y=f*(this.cosX0*m-this.sinX0*g*Math.cos(M))+this.y0),t.x=f*g*Math.sin(M)+this.x0,t))}function nN(t){t.x-=this.x0,t.y-=this.y0;var e,n,o,s,f,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var m=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=At?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(m)*this.sinlat0+t.y*Math.sin(m)*this.coslat0/a),Math.abs(this.coslat0)<At?this.lat0>0?e=Vt(this.long0+Math.atan2(t.x,-1*t.y)):e=Vt(this.long0+Math.atan2(t.x,t.y)):e=Vt(this.long0+Math.atan2(t.x*Math.sin(m),a*this.coslat0*Math.cos(m)-t.y*this.sinlat0*Math.sin(m))),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=At){if(a<=At)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,o=a*this.cons/(2*this.a*this.k0),n=this.con*Tp(this.e,o),e=this.con*Vt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=At?f=this.X0:(f=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/a),e=Vt(this.long0+Math.atan2(t.x*Math.sin(s),a*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),n=-1*Tp(this.e,Math.tan(.5*(ft+f)));return t.x=e,t.y=n,t}var iN=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];const oN={init:tN,forward:rN,inverse:nN,names:iN,ssfn_:eN};function aN(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,o=this.rf,s=1/o,f=2*s-Math.pow(s,2),a=this.e=Math.sqrt(f);this.R=this.k0*n*Math.sqrt(1-f)/(1-f*Math.pow(e,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var m=Math.log(Math.tan(Math.PI/4+this.b0/2)),g=Math.log(Math.tan(Math.PI/4+t/2)),b=Math.log((1+a*e)/(1-a*e));this.K=m-this.alpha*g+this.alpha*a/2*b}function sN(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),o=-this.alpha*(e+n)+this.K,s=2*(Math.atan(Math.exp(o))-Math.PI/4),f=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(f))),m=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(f));return t.y=this.R/2*Math.log((1+Math.sin(m))/(1-Math.sin(m)))+this.y0,t.x=this.R*a+this.x0,t}function lN(t){for(var e=t.x-this.x0,n=t.y-this.y0,o=e/this.R,s=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(o)),a=Math.atan(Math.sin(o)/(Math.cos(this.b0)*Math.cos(o)-Math.sin(this.b0)*Math.tan(s))),m=this.lambda0+a/this.alpha,g=0,b=f,E=-1e3,M=0;Math.abs(b-E)>1e-7;){if(++M>20)return;g=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(b))/2)),E=b,b=2*Math.atan(Math.exp(g))-Math.PI/2}return t.x=m,t.y=b,t}var uN=["somerc"];const cN={init:aN,forward:sN,inverse:lN,names:uN};var Ph=1e-7;function hN(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1}function fN(){var t,e,n,o,s,f,a,m,g,b,E=0,M,I=0,P=0,z=0,V=0,q=0,re=0;this.no_off=hN(this),this.no_rot="no_rot"in this;var X=!1;"alpha"in this&&(X=!0);var ae=!1;if("rectified_grid_angle"in this&&(ae=!0),X&&(re=this.alpha),ae&&(E=this.rectified_grid_angle*eo),X||ae)I=this.longc;else if(P=this.long1,V=this.lat1,z=this.long2,q=this.lat2,Math.abs(V-q)<=Ph||(t=Math.abs(V))<=Ph||Math.abs(t-ft)<=Ph||Math.abs(Math.abs(this.lat0)-ft)<=Ph||Math.abs(Math.abs(q)-ft)<=Ph)throw new Error;var ce=1-this.es;e=Math.sqrt(ce),Math.abs(this.lat0)>At?(m=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*m*m,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/ce),this.A=this.B*this.k0*e/t,o=this.B*e/(n*Math.sqrt(t)),s=o*o-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=o,this.E*=Math.pow(Ka(this.e,this.lat0,m),this.B)):(this.B=1/e,this.A=this.k0,this.E=o=s=1),X||ae?(X?(M=Math.asin(Math.sin(re)/o),ae||(E=re)):(M=E,re=Math.asin(o*Math.sin(M))),this.lam0=I-Math.asin(.5*(s-1/s)*Math.tan(M))/this.B):(f=Math.pow(Ka(this.e,V,Math.sin(V)),this.B),a=Math.pow(Ka(this.e,q,Math.sin(q)),this.B),s=this.E/f,g=(a-f)/(a+f),b=this.E*this.E,b=(b-a*f)/(b+a*f),t=P-z,t<-Math.pi?z-=wp:t>Math.pi&&(z+=wp),this.lam0=Vt(.5*(P+z)-Math.atan(b*Math.tan(.5*this.B*(P-z))/g)/this.B),M=Math.atan(2*Math.sin(this.B*Vt(P-this.lam0))/(s-1/s)),E=re=Math.asin(o*Math.sin(M))),this.singam=Math.sin(M),this.cosgam=Math.cos(M),this.sinrot=Math.sin(E),this.cosrot=Math.cos(E),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(o*o-1)/Math.cos(re))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*M,this.v_pole_n=this.ArB*Math.log(Math.tan(hn-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(hn+s))}function pN(t){var e={},n,o,s,f,a,m,g,b;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-ft)>At){if(a=this.E/Math.pow(Ka(this.e,t.y,Math.sin(t.y)),this.B),m=1/a,n=.5*(a-m),o=.5*(a+m),f=Math.sin(this.B*t.x),s=(n*this.singam-f*this.cosgam)/o,Math.abs(Math.abs(s)-1)<At)throw new Error;b=.5*this.ArB*Math.log((1-s)/(1+s)),m=Math.cos(this.B*t.x),Math.abs(m)<Ph?g=this.A*t.x:g=this.ArB*Math.atan2(n*this.cosgam+f*this.singam,m)}else b=t.y>0?this.v_pole_n:this.v_pole_s,g=this.ArB*t.y;return this.no_rot?(e.x=g,e.y=b):(g-=this.u_0,e.x=b*this.cosrot+g*this.sinrot,e.y=g*this.cosrot-b*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function dN(t){var e,n,o,s,f,a,m,g={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),o=Math.exp(-this.BrA*n),s=.5*(o-1/o),f=.5*(o+1/o),a=Math.sin(this.BrA*e),m=(a*this.cosgam+s*this.singam)/f,Math.abs(Math.abs(m)-1)<At)g.x=0,g.y=m<0?-ft:ft;else{if(g.y=this.E/Math.sqrt((1+m)/(1-m)),g.y=Tp(this.e,Math.pow(g.y,1/this.B)),g.y===1/0)throw new Error;g.x=-this.rB*Math.atan2(s*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return g.x+=this.lam0,g}var mN=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const yN={init:fN,forward:pN,inverse:dN,names:mN};function gN(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<At)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),o=Ms(this.e,e,n),s=Ka(this.e,this.lat1,e),f=Math.sin(this.lat2),a=Math.cos(this.lat2),m=Ms(this.e,f,a),g=Ka(this.e,this.lat2,f),b=Ka(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>At?this.ns=Math.log(o/m)/Math.log(s/g):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=o/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(b,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function vN(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=At&&(n=Sp(n)*(ft-2*At));var o=Math.abs(Math.abs(n)-ft),s,f;if(o>At)s=Ka(this.e,n,Math.sin(n)),f=this.a*this.f0*Math.pow(s,this.ns);else{if(o=n*this.ns,o<=0)return null;f=0}var a=this.ns*Vt(e-this.long0);return t.x=this.k0*(f*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-f*Math.cos(a))+this.y0,t}function _N(t){var e,n,o,s,f,a=(t.x-this.x0)/this.k0,m=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+m*m),n=1):(e=-Math.sqrt(a*a+m*m),n=-1);var g=0;if(e!==0&&(g=Math.atan2(n*a,n*m)),e!==0||this.ns>0){if(n=1/this.ns,o=Math.pow(e/(this.a*this.f0),n),s=Tp(this.e,o),s===-9999)return null}else s=-ft;return f=Vt(g/this.ns+this.long0),t.x=f,t.y=s,t}var xN=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const bN={init:gN,forward:vN,inverse:_N,names:xN};function wN(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function EN(t){var e,n,o,s,f,a,m,g=t.x,b=t.y,E=Vt(g-this.long0);return e=Math.pow((1+this.e*Math.sin(b))/(1-this.e*Math.sin(b)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(b/2+this.s45),this.alfa)/e)-this.s45),o=-E*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),f=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(s)),a=this.n*f,m=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=m*Math.cos(a)/1,t.x=m*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t}function SN(t){var e,n,o,s,f,a,m,g,b=t.x;t.x=t.y,t.y=b,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),f=Math.atan2(t.y,t.x),s=f/Math.sin(this.s0),o=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(o)-Math.sin(this.ad)*Math.cos(o)*Math.cos(s)),n=Math.asin(Math.cos(o)*Math.sin(s)/Math.cos(e)),t.x=this.long0-n/this.alfa,m=e,g=0;var E=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(m))/(1-this.e*Math.sin(m)),this.e/2))-this.s45),Math.abs(m-t.y)<1e-10&&(g=1),m=t.y,E+=1;while(g===0&&E<15);return E>=15?null:t}var TN=["Krovak","krovak"];const MN={init:wN,forward:EN,inverse:SN,names:TN};function Do(t,e,n,o,s){return t*s-e*Math.sin(2*s)+n*Math.sin(4*s)-o*Math.sin(6*s)}function Op(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Cp(t){return .375*t*(1+.25*t*(1+.46875*t))}function Ap(t){return .05859375*t*t*(1+.75*t)}function Pp(t){return t*t*t*(35/3072)}function kh(t,e,n){var o=e*n;return t/Math.sqrt(1-o*o)}function Lh(t){return Math.abs(t)<ft?t:t-Sp(t)*Math.PI}function xy(t,e,n,o,s){var f,a;f=t/e;for(var m=0;m<15;m++)if(a=(t-(e*f-n*Math.sin(2*f)+o*Math.sin(4*f)-s*Math.sin(6*f)))/(e-2*n*Math.cos(2*f)+4*o*Math.cos(4*f)-6*s*Math.cos(6*f)),f+=a,Math.abs(a)<=1e-10)return f;return NaN}function IN(){this.sphere||(this.e0=Op(this.es),this.e1=Cp(this.es),this.e2=Ap(this.es),this.e3=Pp(this.es),this.ml0=this.a*Do(this.e0,this.e1,this.e2,this.e3,this.lat0))}function ON(t){var e,n,o=t.x,s=t.y;if(o=Vt(o-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(o)),n=this.a*(Math.atan2(Math.tan(s),Math.cos(o))-this.lat0);else{var f=Math.sin(s),a=Math.cos(s),m=kh(this.a,this.e,f),g=Math.tan(s)*Math.tan(s),b=o*Math.cos(s),E=b*b,M=this.es*a*a/(1-this.es),I=this.a*Do(this.e0,this.e1,this.e2,this.e3,s);e=m*b*(1-E*g*(1/6-(8-g+8*M)*E/120)),n=I-this.ml0+m*f/a*E*(.5+(5-g+6*M)*E/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function CN(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,o,s;if(this.sphere){var f=n+this.lat0;o=Math.asin(Math.sin(f)*Math.cos(e)),s=Math.atan2(Math.tan(e),Math.cos(f))}else{var a=this.ml0/this.a+n,m=xy(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(m)-ft)<=At)return t.x=this.long0,t.y=ft,n<0&&(t.y*=-1),t;var g=kh(this.a,this.e,Math.sin(m)),b=g*g*g/this.a/this.a*(1-this.es),E=Math.pow(Math.tan(m),2),M=e*this.a/g,I=M*M;o=m-g*Math.tan(m)/b*M*M*(.5-(1+3*E)*M*M/24),s=M*(1-I*(E/3+(1+3*E)*E*I/15))/Math.cos(m)}return t.x=Vt(s+this.long0),t.y=Lh(o),t}var AN=["Cassini","Cassini_Soldner","cass"];const PN={init:IN,forward:ON,inverse:CN,names:AN};function mu(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var kN=1,LN=2,DN=3,NN=4;function RN(){var t=Math.abs(this.lat0);if(Math.abs(t-ft)<At?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<At?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=mu(this.e,1),this.mmf=.5/(1-this.es),this.apa=qN(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=mu(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function zN(t){var e,n,o,s,f,a,m,g,b,E,M=t.x,I=t.y;if(M=Vt(M-this.long0),this.sphere){if(f=Math.sin(I),E=Math.cos(I),o=Math.cos(M),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+E*o:1+this.sinph0*f+this.cosph0*E*o,n<=At)return null;n=Math.sqrt(2/n),e=n*E*Math.sin(M),n*=this.mode===this.EQUIT?f:this.cosph0*f-this.sinph0*E*o}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(o=-o),Math.abs(I+this.lat0)<At)return null;n=hn-I*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(M),n*=o}}else{switch(m=0,g=0,b=0,o=Math.cos(M),s=Math.sin(M),f=Math.sin(I),a=mu(this.e,f),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(m=a/this.qp,g=Math.sqrt(1-m*m)),this.mode){case this.OBLIQ:b=1+this.sinb1*m+this.cosb1*g*o;break;case this.EQUIT:b=1+g*o;break;case this.N_POLE:b=ft+I,a=this.qp-a;break;case this.S_POLE:b=I-ft,a=this.qp+a;break}if(Math.abs(b)<At)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:b=Math.sqrt(2/b),this.mode===this.OBLIQ?n=this.ymf*b*(this.cosb1*m-this.sinb1*g*o):n=(b=Math.sqrt(2/(1+g*o)))*m*this.ymf,e=this.xmf*b*g*s;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(b=Math.sqrt(a))*s,n=o*(this.mode===this.S_POLE?b:-b)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function FN(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,o,s,f,a,m,g,b;if(this.sphere){var E=0,M,I=0;if(M=Math.sqrt(e*e+n*n),s=M*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(I=Math.sin(s),E=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(M)<=At?0:Math.asin(n*I/M),e*=I,n=E*M;break;case this.OBLIQ:s=Math.abs(M)<=At?this.lat0:Math.asin(E*this.sinph0+n*I*this.cosph0/M),e*=I*this.cosph0,n=(E-Math.sin(s)*this.sinph0)*M;break;case this.N_POLE:n=-n,s=ft-s;break;case this.S_POLE:s-=ft;break}o=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(b=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,g=Math.sqrt(e*e+n*n),g<At)return t.x=this.long0,t.y=this.lat0,t;a=2*Math.asin(.5*g/this.rq),f=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(b=f*this.sinb1+n*a*this.cosb1/g,m=this.qp*b,n=g*this.cosb1*f-n*this.sinb1*a):(b=n*a/g,m=this.qp*b,n=g*f)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),m=e*e+n*n,!m)return t.x=this.long0,t.y=this.lat0,t;b=1-m/this.qp,this.mode===this.S_POLE&&(b=-b)}o=Math.atan2(e,n),s=WN(Math.asin(b),this.apa)}return t.x=Vt(this.long0+o),t.y=s,t}var BN=.3333333333333333,VN=.17222222222222222,UN=.10257936507936508,jN=.06388888888888888,$N=.0664021164021164,GN=.016415012942191543;function qN(t){var e,n=[];return n[0]=t*BN,e=t*t,n[0]+=e*VN,n[1]=e*jN,e*=t,n[0]+=e*UN,n[1]+=e*$N,n[2]=e*GN,n}function WN(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var HN=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const ZN={init:RN,forward:zN,inverse:FN,names:HN,S_POLE:kN,N_POLE:LN,EQUIT:DN,OBLIQ:NN};function yu(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function XN(){Math.abs(this.lat1+this.lat2)<At||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ms(this.e3,this.sin_po,this.cos_po),this.qs1=mu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ms(this.e3,this.sin_po,this.cos_po),this.qs2=mu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=mu(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>At?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function KN(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var o=mu(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*o)/this.ns0,f=this.ns0*Vt(e-this.long0),a=s*Math.sin(f)+this.x0,m=this.rh-s*Math.cos(f)+this.y0;return t.x=a,t.y=m,t}function YN(t){var e,n,o,s,f,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),o=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),o=-1),s=0,e!==0&&(s=Math.atan2(o*t.x,o*t.y)),o=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-o*o)/(2*this.ns0)):(n=(this.c-o*o)/this.ns0,a=this.phi1z(this.e3,n)),f=Vt(s/this.ns0+this.long0),t.x=f,t.y=a,t}function JN(t,e){var n,o,s,f,a,m=yu(.5*e);if(t<At)return m;for(var g=t*t,b=1;b<=25;b++)if(n=Math.sin(m),o=Math.cos(m),s=t*n,f=1-s*s,a=.5*f*f/o*(e/(1-g)-n/f+.5/t*Math.log((1-s)/(1+s))),m=m+a,Math.abs(a)<=1e-7)return m;return null}var QN=["Albers_Conic_Equal_Area","Albers","aea"];const e3={init:XN,forward:KN,inverse:YN,names:QN,phi1z:JN};function t3(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function r3(t){var e,n,o,s,f,a,m,g,b=t.x,E=t.y;return o=Vt(b-this.long0),e=Math.sin(E),n=Math.cos(E),s=Math.cos(o),a=this.sin_p14*e+this.cos_p14*n*s,f=1,a>0||Math.abs(a)<=At?(m=this.x0+this.a*f*n*Math.sin(o)/a,g=this.y0+this.a*f*(this.cos_p14*e-this.sin_p14*n*s)/a):(m=this.x0+this.infinity_dist*n*Math.sin(o),g=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*s)),t.x=m,t.y=g,t}function n3(t){var e,n,o,s,f,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),n=Math.sin(s),o=Math.cos(s),a=yu(o*this.sin_p14+t.y*n*this.cos_p14/e),f=Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n),f=Vt(this.long0+f)):(a=this.phic0,f=0),t.x=f,t.y=a,t}var i3=["gnom"];const o3={init:t3,forward:r3,inverse:n3,names:i3};function a3(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*ft:ft;for(var o=Math.asin(.5*e),s,f,a,m,g=0;g<30;g++)if(f=Math.sin(o),a=Math.cos(o),m=t*f,s=Math.pow(1-m*m,2)/(2*a)*(e/(1-t*t)-f/(1-m*m)+.5/t*Math.log((1-m)/(1+m))),o+=s,Math.abs(s)<=1e-10)return o;return NaN}function s3(){this.sphere||(this.k0=Ms(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function l3(t){var e=t.x,n=t.y,o,s,f=Vt(e-this.long0);if(this.sphere)o=this.x0+this.a*f*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var a=mu(this.e,Math.sin(n));o=this.x0+this.a*this.k0*f,s=this.y0+this.a*a*.5/this.k0}return t.x=o,t.y=s,t}function u3(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Vt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=a3(this.e,2*t.y*this.k0/this.a),e=Vt(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var c3=["cea"];const h3={init:s3,forward:l3,inverse:u3,names:c3};function f3(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function p3(t){var e=t.x,n=t.y,o=Vt(e-this.long0),s=Lh(n-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*s,t}function d3(t){var e=t.x,n=t.y;return t.x=Vt(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Lh(this.lat0+(n-this.y0)/this.a),t}var m3=["Equirectangular","Equidistant_Cylindrical","eqc"];const y3={init:f3,forward:p3,inverse:d3,names:m3};var W2=20;function g3(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Op(this.es),this.e1=Cp(this.es),this.e2=Ap(this.es),this.e3=Pp(this.es),this.ml0=this.a*Do(this.e0,this.e1,this.e2,this.e3,this.lat0)}function v3(t){var e=t.x,n=t.y,o,s,f,a=Vt(e-this.long0);if(f=a*Math.sin(n),this.sphere)Math.abs(n)<=At?(o=this.a*a,s=-1*this.a*this.lat0):(o=this.a*Math.sin(f)/Math.tan(n),s=this.a*(Lh(n-this.lat0)+(1-Math.cos(f))/Math.tan(n)));else if(Math.abs(n)<=At)o=this.a*a,s=-1*this.ml0;else{var m=kh(this.a,this.e,Math.sin(n))/Math.tan(n);o=m*Math.sin(f),s=this.a*Do(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+m*(1-Math.cos(f))}return t.x=o+this.x0,t.y=s+this.y0,t}function _3(t){var e,n,o,s,f,a,m,g,b;if(o=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=At)e=Vt(o/this.a+this.long0),n=0;else{a=this.lat0+s/this.a,m=o*o/this.a/this.a+a*a,g=a;var E;for(f=W2;f;--f)if(E=Math.tan(g),b=-1*(a*(g*E+1)-g-.5*(g*g+m)*E)/((g-a)/E-1),g+=b,Math.abs(b)<=At){n=g;break}e=Vt(this.long0+Math.asin(o*Math.tan(g)/this.a)/Math.sin(n))}else if(Math.abs(s+this.ml0)<=At)n=0,e=Vt(this.long0+o/this.a);else{a=(this.ml0+s)/this.a,m=o*o/this.a/this.a+a*a,g=a;var M,I,P,z,V;for(f=W2;f;--f)if(V=this.e*Math.sin(g),M=Math.sqrt(1-V*V)*Math.tan(g),I=this.a*Do(this.e0,this.e1,this.e2,this.e3,g),P=this.e0-2*this.e1*Math.cos(2*g)+4*this.e2*Math.cos(4*g)-6*this.e3*Math.cos(6*g),z=I/this.a,b=(a*(M*z+1)-z-.5*M*(z*z+m))/(this.es*Math.sin(2*g)*(z*z+m-2*a*z)/(4*M)+(a-z)*(M*P-2/Math.sin(2*g))-P),g-=b,Math.abs(b)<=At){n=g;break}M=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Vt(this.long0+Math.asin(o*M/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var x3=["Polyconic","poly"];const b3={init:g3,forward:v3,inverse:_3,names:x3};function w3(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function E3(t){var e,n=t.x,o=t.y,s=o-this.lat0,f=n-this.long0,a=s/bp*1e-5,m=f,g=1,b=0;for(e=1;e<=10;e++)g=g*a,b=b+this.A[e]*g;var E=b,M=m,I=1,P=0,z,V,q=0,re=0;for(e=1;e<=6;e++)z=I*E-P*M,V=P*E+I*M,I=z,P=V,q=q+this.B_re[e]*I-this.B_im[e]*P,re=re+this.B_im[e]*I+this.B_re[e]*P;return t.x=re*this.a+this.x0,t.y=q*this.a+this.y0,t}function S3(t){var e,n=t.x,o=t.y,s=n-this.x0,f=o-this.y0,a=f/this.a,m=s/this.a,g=1,b=0,E,M,I=0,P=0;for(e=1;e<=6;e++)E=g*a-b*m,M=b*a+g*m,g=E,b=M,I=I+this.C_re[e]*g-this.C_im[e]*b,P=P+this.C_im[e]*g+this.C_re[e]*b;for(var z=0;z<this.iterations;z++){var V=I,q=P,re,X,ae=a,ce=m;for(e=2;e<=6;e++)re=V*I-q*P,X=q*I+V*P,V=re,q=X,ae=ae+(e-1)*(this.B_re[e]*V-this.B_im[e]*q),ce=ce+(e-1)*(this.B_im[e]*V+this.B_re[e]*q);V=1,q=0;var ve=this.B_re[1],Ne=this.B_im[1];for(e=2;e<=6;e++)re=V*I-q*P,X=q*I+V*P,V=re,q=X,ve=ve+e*(this.B_re[e]*V-this.B_im[e]*q),Ne=Ne+e*(this.B_im[e]*V+this.B_re[e]*q);var ze=ve*ve+Ne*Ne;I=(ae*ve+ce*Ne)/ze,P=(ce*ve-ae*Ne)/ze}var Pe=I,Se=P,Ie=1,Ke=0;for(e=1;e<=9;e++)Ie=Ie*Pe,Ke=Ke+this.D[e]*Ie;var Ge=this.lat0+Ke*bp*1e5,st=this.long0+Se;return t.x=st,t.y=Ge,t}var T3=["New_Zealand_Map_Grid","nzmg"];const M3={init:w3,forward:E3,inverse:S3,names:T3};function I3(){}function O3(t){var e=t.x,n=t.y,o=Vt(e-this.long0),s=this.x0+this.a*o,f=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=s,t.y=f,t}function C3(t){t.x-=this.x0,t.y-=this.y0;var e=Vt(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var A3=["Miller_Cylindrical","mill"];const P3={init:I3,forward:O3,inverse:C3,names:A3};var k3=20;function L3(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=j2(this.es)}function D3(t){var e,n,o=t.x,s=t.y;if(o=Vt(o-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var f=this.n*Math.sin(s),a=k3;a;--a){var m=(this.m*s+Math.sin(s)-f)/(this.m+Math.cos(s));if(s-=m,Math.abs(m)<At)break}e=this.a*this.C_x*o*(this.m+Math.cos(s)),n=this.a*this.C_y*s}else{var g=Math.sin(s),b=Math.cos(s);n=this.a*gy(s,g,b,this.en),e=this.a*o*b/Math.sqrt(1-this.es*g*g)}return t.x=e,t.y=n,t}function N3(t){var e,n,o,s;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,o=o/(this.C_x*(this.m+Math.cos(e))),this.m?e=yu((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=yu(Math.sin(e)/this.n)),o=Vt(o+this.long0),e=Lh(e)):(e=$2(t.y/this.a,this.es,this.en),s=Math.abs(e),s<ft?(s=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),o=Vt(n)):s-At<ft&&(o=this.long0)),t.x=o,t.y=e,t}var R3=["Sinusoidal","sinu"];const z3={init:L3,forward:D3,inverse:N3,names:R3};function F3(){}function B3(t){for(var e=t.x,n=t.y,o=Vt(e-this.long0),s=n,f=Math.PI*Math.sin(n);;){var a=-(s+Math.sin(s)-f)/(1+Math.cos(s));if(s+=a,Math.abs(a)<At)break}s/=2,Math.PI/2-Math.abs(n)<At&&(o=0);var m=.900316316158*this.a*o*Math.cos(s)+this.x0,g=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=m,t.y=g,t}function V3(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var o=Vt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));o<-Math.PI&&(o=-Math.PI),o>Math.PI&&(o=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var s=Math.asin(n);return t.x=o,t.y=s,t}var U3=["Mollweide","moll"];const j3={init:F3,forward:B3,inverse:V3,names:U3};function $3(){Math.abs(this.lat1+this.lat2)<At||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Op(this.es),this.e1=Cp(this.es),this.e2=Ap(this.es),this.e3=Pp(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ms(this.e,this.sinphi,this.cosphi),this.ml1=Do(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<At?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ms(this.e,this.sinphi,this.cosphi),this.ml2=Do(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Do(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function G3(t){var e=t.x,n=t.y,o;if(this.sphere)o=this.a*(this.g-n);else{var s=Do(this.e0,this.e1,this.e2,this.e3,n);o=this.a*(this.g-s)}var f=this.ns*Vt(e-this.long0),a=this.x0+o*Math.sin(f),m=this.y0+this.rh-o*Math.cos(f);return t.x=a,t.y=m,t}function q3(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,o,s;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var f=0;if(n!==0&&(f=Math.atan2(e*t.x,e*t.y)),this.sphere)return s=Vt(this.long0+f/this.ns),o=Lh(this.g-n/this.a),t.x=s,t.y=o,t;var a=this.g-n/this.a;return o=xy(a,this.e0,this.e1,this.e2,this.e3),s=Vt(this.long0+f/this.ns),t.x=s,t.y=o,t}var W3=["Equidistant_Conic","eqdc"];const H3={init:$3,forward:G3,inverse:q3,names:W3};function Z3(){this.R=this.a}function X3(t){var e=t.x,n=t.y,o=Vt(e-this.long0),s,f;Math.abs(n)<=At&&(s=this.x0+this.R*o,f=this.y0);var a=yu(2*Math.abs(n/Math.PI));(Math.abs(o)<=At||Math.abs(Math.abs(n)-ft)<=At)&&(s=this.x0,n>=0?f=this.y0+Math.PI*this.R*Math.tan(.5*a):f=this.y0+Math.PI*this.R*-Math.tan(.5*a));var m=.5*Math.abs(Math.PI/o-o/Math.PI),g=m*m,b=Math.sin(a),E=Math.cos(a),M=E/(b+E-1),I=M*M,P=M*(2/b-1),z=P*P,V=Math.PI*this.R*(m*(M-z)+Math.sqrt(g*(M-z)*(M-z)-(z+g)*(I-z)))/(z+g);o<0&&(V=-V),s=this.x0+V;var q=g+M;return V=Math.PI*this.R*(P*q-m*Math.sqrt((z+g)*(g+1)-q*q))/(z+g),n>=0?f=this.y0+V:f=this.y0-V,t.x=s,t.y=f,t}function K3(t){var e,n,o,s,f,a,m,g,b,E,M,I,P;return t.x-=this.x0,t.y-=this.y0,M=Math.PI*this.R,o=t.x/M,s=t.y/M,f=o*o+s*s,a=-Math.abs(s)*(1+f),m=a-2*s*s+o*o,g=-2*a+1+2*s*s+f*f,P=s*s/g+(2*m*m*m/g/g/g-9*a*m/g/g)/27,b=(a-m*m/3/g)/g,E=2*Math.sqrt(-b/3),M=3*P/b/E,Math.abs(M)>1&&(M>=0?M=1:M=-1),I=Math.acos(M)/3,t.y>=0?n=(-E*Math.cos(I+Math.PI/3)-m/3/g)*Math.PI:n=-(-E*Math.cos(I+Math.PI/3)-m/3/g)*Math.PI,Math.abs(o)<At?e=this.long0:e=Vt(this.long0+Math.PI*(f-1+Math.sqrt(1+2*(o*o-s*s)+f*f))/2/o),t.x=e,t.y=n,t}var Y3=["Van_der_Grinten_I","VanDerGrinten","vandg"];const J3={init:Z3,forward:X3,inverse:K3,names:Y3};function Q3(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function eR(t){var e=t.x,n=t.y,o=Math.sin(t.y),s=Math.cos(t.y),f=Vt(e-this.long0),a,m,g,b,E,M,I,P,z,V,q,re,X,ae,ce,ve,Ne,ze,Pe,Se,Ie,Ke,Ge;return this.sphere?Math.abs(this.sin_p12-1)<=At?(t.x=this.x0+this.a*(ft-n)*Math.sin(f),t.y=this.y0-this.a*(ft-n)*Math.cos(f),t):Math.abs(this.sin_p12+1)<=At?(t.x=this.x0+this.a*(ft+n)*Math.sin(f),t.y=this.y0+this.a*(ft+n)*Math.cos(f),t):(ze=this.sin_p12*o+this.cos_p12*s*Math.cos(f),ve=Math.acos(ze),Ne=ve?ve/Math.sin(ve):1,t.x=this.x0+this.a*Ne*s*Math.sin(f),t.y=this.y0+this.a*Ne*(this.cos_p12*o-this.sin_p12*s*Math.cos(f)),t):(a=Op(this.es),m=Cp(this.es),g=Ap(this.es),b=Pp(this.es),Math.abs(this.sin_p12-1)<=At?(E=this.a*Do(a,m,g,b,ft),M=this.a*Do(a,m,g,b,n),t.x=this.x0+(E-M)*Math.sin(f),t.y=this.y0-(E-M)*Math.cos(f),t):Math.abs(this.sin_p12+1)<=At?(E=this.a*Do(a,m,g,b,ft),M=this.a*Do(a,m,g,b,n),t.x=this.x0+(E+M)*Math.sin(f),t.y=this.y0+(E+M)*Math.cos(f),t):(I=o/s,P=kh(this.a,this.e,this.sin_p12),z=kh(this.a,this.e,o),V=Math.atan((1-this.es)*I+this.es*P*this.sin_p12/(z*s)),q=Math.atan2(Math.sin(f),this.cos_p12*Math.tan(V)-this.sin_p12*Math.cos(f)),q===0?Pe=Math.asin(this.cos_p12*Math.sin(V)-this.sin_p12*Math.cos(V)):Math.abs(Math.abs(q)-Math.PI)<=At?Pe=-Math.asin(this.cos_p12*Math.sin(V)-this.sin_p12*Math.cos(V)):Pe=Math.asin(Math.sin(f)*Math.cos(V)/Math.sin(q)),re=this.e*this.sin_p12/Math.sqrt(1-this.es),X=this.e*this.cos_p12*Math.cos(q)/Math.sqrt(1-this.es),ae=re*X,ce=X*X,Se=Pe*Pe,Ie=Se*Pe,Ke=Ie*Pe,Ge=Ke*Pe,ve=P*Pe*(1-Se*ce*(1-ce)/6+Ie/8*ae*(1-2*ce)+Ke/120*(ce*(4-7*ce)-3*re*re*(1-7*ce))-Ge/48*ae),t.x=this.x0+ve*Math.sin(q),t.y=this.y0+ve*Math.cos(q),t))}function tR(t){t.x-=this.x0,t.y-=this.y0;var e,n,o,s,f,a,m,g,b,E,M,I,P,z,V,q,re,X,ae,ce,ve,Ne,ze,Pe;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*ft*this.a?void 0:(n=e/this.a,o=Math.sin(n),s=Math.cos(n),f=this.long0,Math.abs(e)<=At?a=this.lat0:(a=yu(s*this.sin_p12+t.y*o*this.cos_p12/e),m=Math.abs(this.lat0)-ft,Math.abs(m)<=At?this.lat0>=0?f=Vt(this.long0+Math.atan2(t.x,-t.y)):f=Vt(this.long0-Math.atan2(-t.x,t.y)):f=Vt(this.long0+Math.atan2(t.x*o,e*this.cos_p12*s-t.y*this.sin_p12*o))),t.x=f,t.y=a,t)):(g=Op(this.es),b=Cp(this.es),E=Ap(this.es),M=Pp(this.es),Math.abs(this.sin_p12-1)<=At?(I=this.a*Do(g,b,E,M,ft),e=Math.sqrt(t.x*t.x+t.y*t.y),P=I-e,a=xy(P/this.a,g,b,E,M),f=Vt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=f,t.y=a,t):Math.abs(this.sin_p12+1)<=At?(I=this.a*Do(g,b,E,M,ft),e=Math.sqrt(t.x*t.x+t.y*t.y),P=e-I,a=xy(P/this.a,g,b,E,M),f=Vt(this.long0+Math.atan2(t.x,t.y)),t.x=f,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),q=Math.atan2(t.x,t.y),z=kh(this.a,this.e,this.sin_p12),re=Math.cos(q),X=this.e*this.cos_p12*re,ae=-X*X/(1-this.es),ce=3*this.es*(1-ae)*this.sin_p12*this.cos_p12*re/(1-this.es),ve=e/z,Ne=ve-ae*(1+ae)*Math.pow(ve,3)/6-ce*(1+3*ae)*Math.pow(ve,4)/24,ze=1-ae*Ne*Ne/2-ve*Ne*Ne*Ne/6,V=Math.asin(this.sin_p12*Math.cos(Ne)+this.cos_p12*Math.sin(Ne)*re),f=Vt(this.long0+Math.asin(Math.sin(q)*Math.sin(Ne)/Math.cos(V))),Pe=Math.sin(V),a=Math.atan2((Pe-this.es*ze*this.sin_p12)*Math.tan(V),Pe*(1-this.es)),t.x=f,t.y=a,t))}var rR=["Azimuthal_Equidistant","aeqd"];const nR={init:Q3,forward:eR,inverse:tR,names:rR};function iR(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function oR(t){var e,n,o,s,f,a,m,g,b=t.x,E=t.y;return o=Vt(b-this.long0),e=Math.sin(E),n=Math.cos(E),s=Math.cos(o),a=this.sin_p14*e+this.cos_p14*n*s,f=1,(a>0||Math.abs(a)<=At)&&(m=this.a*f*n*Math.sin(o),g=this.y0+this.a*f*(this.cos_p14*e-this.sin_p14*n*s)),t.x=m,t.y=g,t}function aR(t){var e,n,o,s,f,a,m;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=yu(e/this.a),o=Math.sin(n),s=Math.cos(n),a=this.long0,Math.abs(e)<=At?(m=this.lat0,t.x=a,t.y=m,t):(m=yu(s*this.sin_p14+t.y*o*this.cos_p14/e),f=Math.abs(this.lat0)-ft,Math.abs(f)<=At?(this.lat0>=0?a=Vt(this.long0+Math.atan2(t.x,-t.y)):a=Vt(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=m,t):(a=Vt(this.long0+Math.atan2(t.x*o,e*this.cos_p14*s-t.y*this.sin_p14*o)),t.x=a,t.y=m,t))}var sR=["ortho"];const lR={init:iR,forward:oR,inverse:aR,names:sR};var Kn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},fn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function uR(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=ft-hn/2?this.face=Kn.TOP:this.lat0<=-(ft-hn/2)?this.face=Kn.BOTTOM:Math.abs(this.long0)<=hn?this.face=Kn.FRONT:Math.abs(this.long0)<=ft+hn?this.face=this.long0>0?Kn.RIGHT:Kn.LEFT:this.face=Kn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function cR(t){var e={x:0,y:0},n,o,s,f,a,m,g={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,o=t.x,this.face===Kn.TOP)f=ft-n,o>=hn&&o<=ft+hn?(g.value=fn.AREA_0,s=o-ft):o>ft+hn||o<=-(ft+hn)?(g.value=fn.AREA_1,s=o>0?o-gi:o+gi):o>-(ft+hn)&&o<=-hn?(g.value=fn.AREA_2,s=o+ft):(g.value=fn.AREA_3,s=o);else if(this.face===Kn.BOTTOM)f=ft+n,o>=hn&&o<=ft+hn?(g.value=fn.AREA_0,s=-o+ft):o<hn&&o>=-hn?(g.value=fn.AREA_1,s=-o):o<-hn&&o>=-(ft+hn)?(g.value=fn.AREA_2,s=-o-ft):(g.value=fn.AREA_3,s=o>0?-o+gi:-o-gi);else{var b,E,M,I,P,z,V;this.face===Kn.RIGHT?o=Dh(o,+ft):this.face===Kn.BACK?o=Dh(o,+gi):this.face===Kn.LEFT&&(o=Dh(o,-ft)),I=Math.sin(n),P=Math.cos(n),z=Math.sin(o),V=Math.cos(o),b=P*V,E=P*z,M=I,this.face===Kn.FRONT?(f=Math.acos(b),s=by(f,M,E,g)):this.face===Kn.RIGHT?(f=Math.acos(E),s=by(f,M,-b,g)):this.face===Kn.BACK?(f=Math.acos(-b),s=by(f,M,-E,g)):this.face===Kn.LEFT?(f=Math.acos(-E),s=by(f,M,b,g)):(f=s=0,g.value=fn.AREA_0)}return m=Math.atan(12/gi*(s+Math.acos(Math.sin(s)*Math.cos(hn))-ft)),a=Math.sqrt((1-Math.cos(f))/(Math.cos(m)*Math.cos(m))/(1-Math.cos(Math.atan(1/Math.cos(s))))),g.value===fn.AREA_1?m+=ft:g.value===fn.AREA_2?m+=gi:g.value===fn.AREA_3&&(m+=1.5*gi),e.x=a*Math.cos(m),e.y=a*Math.sin(m),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function hR(t){var e={lam:0,phi:0},n,o,s,f,a,m,g,b,E,M={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,o=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?M.value=fn.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(M.value=fn.AREA_1,n-=ft):t.x<0&&-t.x>=Math.abs(t.y)?(M.value=fn.AREA_2,n=n<0?n+gi:n-gi):(M.value=fn.AREA_3,n+=ft),E=gi/12*Math.tan(n),a=Math.sin(E)/(Math.cos(E)-1/Math.sqrt(2)),m=Math.atan(a),s=Math.cos(n),f=Math.tan(o),g=1-s*s*f*f*(1-Math.cos(Math.atan(1/Math.cos(m)))),g<-1?g=-1:g>1&&(g=1),this.face===Kn.TOP)b=Math.acos(g),e.phi=ft-b,M.value===fn.AREA_0?e.lam=m+ft:M.value===fn.AREA_1?e.lam=m<0?m+gi:m-gi:M.value===fn.AREA_2?e.lam=m-ft:e.lam=m;else if(this.face===Kn.BOTTOM)b=Math.acos(g),e.phi=b-ft,M.value===fn.AREA_0?e.lam=-m+ft:M.value===fn.AREA_1?e.lam=-m:M.value===fn.AREA_2?e.lam=-m-ft:e.lam=m<0?-m-gi:-m+gi;else{var I,P,z;I=g,E=I*I,E>=1?z=0:z=Math.sqrt(1-E)*Math.sin(m),E+=z*z,E>=1?P=0:P=Math.sqrt(1-E),M.value===fn.AREA_1?(E=P,P=-z,z=E):M.value===fn.AREA_2?(P=-P,z=-z):M.value===fn.AREA_3&&(E=P,P=z,z=-E),this.face===Kn.RIGHT?(E=I,I=-P,P=E):this.face===Kn.BACK?(I=-I,P=-P):this.face===Kn.LEFT&&(E=I,I=P,P=-E),e.phi=Math.acos(-z)-ft,e.lam=Math.atan2(P,I),this.face===Kn.RIGHT?e.lam=Dh(e.lam,-ft):this.face===Kn.BACK?e.lam=Dh(e.lam,-gi):this.face===Kn.LEFT&&(e.lam=Dh(e.lam,+ft))}if(this.es!==0){var V,q,re;V=e.phi<0?1:0,q=Math.tan(e.phi),re=this.b/Math.sqrt(q*q+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-re*re)/(this.one_minus_f*re)),V&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function by(t,e,n,o){var s;return t<At?(o.value=fn.AREA_0,s=0):(s=Math.atan2(e,n),Math.abs(s)<=hn?o.value=fn.AREA_0:s>hn&&s<=ft+hn?(o.value=fn.AREA_1,s-=ft):s>ft+hn||s<=-(ft+hn)?(o.value=fn.AREA_2,s=s>=0?s-gi:s+gi):(o.value=fn.AREA_3,s+=ft)),s}function Dh(t,e){var n=t+e;return n<-gi?n+=wp:n>+gi&&(n-=wp),n}var fR=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const pR={init:uR,forward:cR,inverse:hR,names:fR};var u0=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],kp=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],H2=.8487,Z2=1.3523,X2=Ts/5,dR=1/X2,Nh=18,wy=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},mR=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function yR(t,e,n,o){for(var s=e;o;--o){var f=t(s);if(s-=f,Math.abs(f)<n)break}return s}function gR(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function vR(t){var e=Vt(t.x-this.long0),n=Math.abs(t.y),o=Math.floor(n*X2);o<0?o=0:o>=Nh&&(o=Nh-1),n=Ts*(n-dR*o);var s={x:wy(u0[o],n)*e,y:wy(kp[o],n)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*H2+this.x0,s.y=s.y*this.a*Z2+this.y0,s}function _R(t){var e={x:(t.x-this.x0)/(this.a*H2),y:Math.abs(t.y-this.y0)/(this.a*Z2)};if(e.y>=1)e.x/=u0[Nh][0],e.y=t.y<0?-ft:ft;else{var n=Math.floor(e.y*Nh);for(n<0?n=0:n>=Nh&&(n=Nh-1);;)if(kp[n][0]>e.y)--n;else if(kp[n+1][0]<=e.y)++n;else break;var o=kp[n],s=5*(e.y-o[0])/(kp[n+1][0]-o[0]);s=yR(function(f){return(wy(o,f)-e.y)/mR(o,f)},s,At,100),e.x/=wy(u0[n],s),e.y=(5*n+s)*eo,t.y<0&&(e.y=-e.y)}return e.x=Vt(e.x+this.long0),e}var xR=["Robinson","robin"];const bR={init:gR,forward:vR,inverse:_R,names:xR};function wR(){this.name="geocent"}function ER(t){var e=w2(t,this.es,this.a);return e}function SR(t){var e=E2(t,this.es,this.a,this.b);return e}var TR=["Geocentric","geocentric","geocent","Geocent"];const MR={init:wR,forward:ER,inverse:SR,names:TR};var po={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Lp={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function IR(){if(Object.keys(Lp).forEach(function(n){if(typeof this[n]>"u")this[n]=Lp[n].def;else{if(Lp[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);Lp[n].num&&(this[n]=parseFloat(this[n]))}Lp[n].degrees&&(this[n]=this[n]*eo)}.bind(this)),Math.abs(Math.abs(this.lat0)-ft)<At?this.mode=this.lat0<0?po.S_POLE:po.N_POLE:Math.abs(this.lat0)<At?this.mode=po.EQUIT:(this.mode=po.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function OR(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),s,f;switch(this.mode){case po.OBLIQ:f=this.sinph0*e+this.cosph0*n*o;break;case po.EQUIT:f=n*o;break;case po.S_POLE:f=-e;break;case po.N_POLE:f=e;break}switch(f=this.pn1/(this.p-f),s=f*n*Math.sin(t.x),this.mode){case po.OBLIQ:f*=this.cosph0*e-this.sinph0*n*o;break;case po.EQUIT:f*=e;break;case po.N_POLE:f*=-(n*o);break;case po.S_POLE:f*=n*o;break}var a,m;return a=f*this.cg+s*this.sg,m=1/(a*this.sw*this.h1+this.cw),s=(s*this.cg-f*this.sg)*this.cw*m,f=a*m,t.x=s*this.a,t.y=f*this.a,t}function CR(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,o,s;s=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*s,o=this.pn1*t.y*this.cw*s,t.x=n*this.cg+o*this.sg,t.y=o*this.cg-n*this.sg;var f=Ya(t.x,t.y);if(Math.abs(f)<At)e.x=0,e.y=t.y;else{var a,m;switch(m=1-f*f*this.pfact,m=(this.p-Math.sqrt(m))/(this.pn1/f+f/this.pn1),a=Math.sqrt(1-m*m),this.mode){case po.OBLIQ:e.y=Math.asin(a*this.sinph0+t.y*m*this.cosph0/f),t.y=(a-this.sinph0*Math.sin(e.y))*f,t.x*=m*this.cosph0;break;case po.EQUIT:e.y=Math.asin(t.y*m/f),t.y=a*f,t.x*=m;break;case po.N_POLE:e.y=Math.asin(a),t.y=-t.y;break;case po.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var AR=["Tilted_Perspective","tpers"];const PR={init:IR,forward:OR,inverse:CR,names:AR};function kR(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function LR(t){var e=t.x,n=t.y,o,s,f,a;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var m=this.radius_p/Ya(this.radius_p*Math.cos(n),Math.sin(n));if(s=m*Math.cos(e)*Math.cos(n),f=m*Math.sin(e)*Math.cos(n),a=m*Math.sin(n),(this.radius_g-s)*s-f*f-a*a*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(f/Ya(a,o)),t.y=this.radius_g_1*Math.atan(a/o)):(t.x=this.radius_g_1*Math.atan(f/o),t.y=this.radius_g_1*Math.atan(a/Ya(f,o)))}else this.shape==="sphere"&&(o=Math.cos(n),s=Math.cos(e)*o,f=Math.sin(e)*o,a=Math.sin(n),o=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(f/Ya(a,o)),t.y=this.radius_g_1*Math.atan(a/o)):(t.x=this.radius_g_1*Math.atan(f/o),t.y=this.radius_g_1*Math.atan(a/Ya(f,o))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function DR(t){var e=-1,n=0,o=0,s,f,a,m;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(o=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Ya(1,o)):(n=Math.tan(t.x/this.radius_g_1),o=Math.tan(t.y/this.radius_g_1)*Ya(1,n));var g=o/this.radius_p;if(s=n*n+g*g+e*e,f=2*this.radius_g*e,a=f*f-4*s*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;m=(-f-Math.sqrt(a))/(2*s),e=this.radius_g+m*e,n*=m,o*=m,t.x=Math.atan2(n,e),t.y=Math.atan(o*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(o=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+o*o)):(n=Math.tan(t.x/this.radius_g_1),o=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),s=n*n+o*o+e*e,f=2*this.radius_g*e,a=f*f-4*s*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;m=(-f-Math.sqrt(a))/(2*s),e=this.radius_g+m*e,n*=m,o*=m,t.x=Math.atan2(n,e),t.y=Math.atan(o*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var NR=["Geostationary Satellite View","Geostationary_Satellite","geos"];const RR={init:kR,forward:LR,inverse:DR,names:NR};function zR(t){t.Proj.projections.add(vy),t.Proj.projections.add(_y),t.Proj.projections.add($D),t.Proj.projections.add(QD),t.Proj.projections.add(oN),t.Proj.projections.add(cN),t.Proj.projections.add(yN),t.Proj.projections.add(bN),t.Proj.projections.add(MN),t.Proj.projections.add(PN),t.Proj.projections.add(ZN),t.Proj.projections.add(e3),t.Proj.projections.add(o3),t.Proj.projections.add(h3),t.Proj.projections.add(y3),t.Proj.projections.add(b3),t.Proj.projections.add(M3),t.Proj.projections.add(P3),t.Proj.projections.add(z3),t.Proj.projections.add(j3),t.Proj.projections.add(H3),t.Proj.projections.add(J3),t.Proj.projections.add(nR),t.Proj.projections.add(lR),t.Proj.projections.add(pR),t.Proj.projections.add(bR),t.Proj.projections.add(MR),t.Proj.projections.add(PR),t.Proj.projections.add(RR)}fo.defaultDatum="WGS84",fo.Proj=Is,fo.WGS84=new fo.Proj("WGS84"),fo.Point=Ah,fo.toPoint=I2,fo.defs=Lo,fo.nadgrid=qL,fo.transform=yy,fo.mgrs=sD,fo.version="__VERSION__",zR(fo);function FR(){var t,e,n;fo.defs("EPSG:32632","+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs"),fo.defs("EPSG:32631","+proj=utm +zone=31 +datum=WGS84 +units=m +no_defs"),fo.defs("EPSG:2169","+proj=tmerc +lat_0=49.83333333333334 +lon_0=6.166666666666667 +k=1 +x_0=80000 +y_0=100000 +ellps=intl +towgs84=-189.681,18.3463,-42.7695,-0.33746,-3.09264,2.53861,0.4598 +units=m +no_defs"),Ju.register(fo),(t=Mi.get("EPSG:32632"))==null||t.setExtent([166021.44,0,833978.55,932900518e-2]),(e=Mi.get("EPSG:32631"))==null||e.setExtent([166021.44,0,833978.55,932900518e-2]),(n=Mi.get("EPSG:2169"))==null||n.setExtent([48225.17,56225.6,105842.04,139616.4])}function K2(t,e,n){const o=ir(t);class s extends c0{constructor(a){super(o,a,e,n)}}return ai(s,"def",o),s}const BR=typeof HTMLElement<"u"?HTMLElement:class{};class c0 extends BR{constructor(n,o={},s={},f){super();ai(this,"_instance",null);ai(this,"_connected",!1);ai(this,"_resolved",!1);ai(this,"_numberProps",null);ai(this,"_styles");ai(this,"_slots");this._def=n,this._props=o,this._config=s,this._config=Un({shadowRoot:!0},this._config),this._config.shadowRoot?this.shadowRoot&&f?f(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def)):f&&f(this._createVNode(),this._root)}get _root(){return this._config.shadowRoot?this.shadowRoot:this}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Nm(()=>{this._connected||(Lw(null,this._root),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let s=0;s<this.attributes.length;s++)this._setAttr(this.attributes[s].name);new MutationObserver(s=>{for(const f of s)this._setAttr(f.attributeName)}).observe(this,{attributes:!0});const n=(s,f=!1)=>{const{props:a,styles:m}=s;let g;if(a&&!tr(a))for(const b in a){const E=a[b];(E===Number||E&&E.type===Number)&&(b in this._props&&(this._props[b]=Xv(this._props[b])),(g||(g=Object.create(null)))[aa(b)]=!0)}this._numberProps=g,f&&this._resolveProps(s),this._applyStyles(m),this._update()},o=this._def.__asyncLoader;o?o().then(s=>n(s,!0)):n(this._def)}_resolveProps(n){const{props:o}=n,s=tr(o)?o:Object.keys(o||{});for(const f of Object.keys(this))f[0]!=="_"&&s.includes(f)&&this._setProp(f,this[f],!0,!1);for(const f of s.map(aa))Object.defineProperty(this,f,{get(){return this._getProp(f)},set(a){this._setProp(f,a)}})}_setAttr(n){let o=this.getAttribute(n);const s=aa(n);this._numberProps&&this._numberProps[s]&&(o=Xv(o)),this._setProp(s,o,!1)}_getProp(n){return this._props[n]}_setProp(n,o,s=!0,f=!0){o!==this._props[n]&&(this._props[n]=o,f&&this._instance&&this._update(),s&&(o===!0?this.setAttribute(Go(n),""):typeof o=="string"||typeof o=="number"?this.setAttribute(Go(n),o+""):o||this.removeAttribute(Go(n))))}_update(){Lw(this._createVNode(),this._root)}_createVNode(){const n=kt(this._def,Un({},this._props));return this._instance||(n.ce=o=>{this._instance=o,o.isCE=!0;const s=(a,m)=>{this.dispatchEvent(new CustomEvent(a,{detail:m}))};o.emit=(a,...m)=>{s(a,m),Go(a)!==a&&s(Go(a),m)};let f=this;for(;f=f&&(f.parentNode||f.host);)if(f instanceof c0){o.parent=f._instance,o.provides=f._instance.provides;break}}),n}_applyStyles(n){n&&n.forEach(o=>{const s=document.createElement("style");s.textContent=o,this._root.appendChild(s)})}}const p7="";var Dp=(t=>(t.INFO="alert-info",t.WARNING="alert-warning",t.ERROR="alert-danger",t))(Dp||{});const VR=Dp.INFO,UR=7e3,jR=4e3,Ey=bc("alert-notifications",()=>{const t=br([]);function e(o,s=VR,f){const a={message:o,type:s,duration:f!=null?f:s===Dp.WARNING?jR:UR};t.value.push(a)}function n(o){t.value.splice(o,1)}return{notifications:t,addNotification:e,removeNotification:n}},{}),$R=ir({__name:"notification-item",props:{notification:{type:null,required:!0}},emits:["close"],setup(t){const e=t,n=Ln(!0);function o(s,f){setTimeout(()=>{n.value=!1},e.notification.duration),f()}return(s,f)=>{const a=y_("dompurify-html");return Be(),tn(Qm,{name:"fade-out",appear:"","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0",onEnter:o,onAfterLeave:f[0]||(f[0]=m=>s.$emit("close"))},{default:su(()=>[se(n)?jm((Be(),tt("div",{key:0,class:Rr(["lux-alert",`lux-${e.notification.type}`]),role:"alert"},null,2)),[[a,e.notification.message]]):Xe("v-if",!0)]),_:1})}}}),lr=(t,e)=>{const n=t.__vccOpts||t;for(const[o,s]of e)n[o]=s;return n},GR=lr($R,[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/alert-notifications/notification-item.vue"]]),qR={key:0,class:"lux-notifications fixed w-[500px] top-10 left-1/2 ml-[-250px] z-50"},Y2=lr(ir({__name:"alert-notifications",setup(t){const e=Ey(),{notifications:n}=rn(e);function o(s){e.removeNotification(s)}return(s,f)=>(Be(),tn(ow,{to:"body"},[se(n).length?(Be(),tt("div",qR,[(Be(!0),tt(en,null,Ta(se(n),(a,m)=>(Be(),tn(GR,{key:m,notification:a,onClose:()=>o(m)},null,8,["notification","onClose"]))),128))])):Xe("v-if",!0)]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/alert-notifications/alert-notifications.vue"]]),WR={class:"lux-dropdown"},HR={class:"h-full"},ZR=["aria-expanded"],XR=Fe("span",{class:"lux-caret"},null,-1),KR={class:"lux-dropdown-wrapper"},YR=["aria-label","data-value"],h0=lr(ir({__name:"dropdown-list",props:{placeholder:{type:String,required:!0},options:{type:Array,required:!0,default:()=>[{label:"Default label",value:"Default value"}]},modelValue:{type:String,required:!1}},emits:["change"],setup(t,{emit:e}){const n=t,o=Ln(!1),s=Ln();function f(b){o.value=b===void 0?!o.value:b}function a(b){b.stopImmediatePropagation(),f()}function m(b){s.value=b.target.dataset.value,e("change",s.value)}function g(){f(!1)}return ua(()=>document.addEventListener("click",g)),lu(()=>document.removeEventListener("click",g)),(b,E)=>{var M,I;return Be(),tt("div",WR,[Fe("div",HR,[Fe("button",{type:"button",class:Rr(["lux-btn lux-dropdown-btn",se(o)?"expanded":""]),"aria-expanded":se(o),"aria-haspopup":"true",onClick:a},[Fe("span",null,Wt((I=n.placeholder)!=null?I:(M=n.options[0])==null?void 0:M.label),1),XR],10,ZR)]),Fe("div",KR,[Fe("ul",{class:Rr(["lux-dropdown-list",se(o)?"":"hidden"]),tabindex:"-1"},[(Be(!0),tt(en,null,Ta(n.options,P=>(Be(),tt("li",{key:P.value,class:Rr(t.modelValue===P.value?"selected":"")},[Fe("button",{class:"lux-dropdown-list-item","aria-label":P.ariaLabel,"data-value":P.value,onClick:m},Wt(P.label),9,YR)],2))),128))],2)])])}}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/common/dropdown-list.vue"]]),Np="EPSG:3857",J2="EPSG:4326",JR="EPSG:2169";let f0;const Q2=Ln();function Os(){function t(){return f0}function e(){return Q2.value=f0=new DO.default({view:new NO.default({zoom:10,center:[682439,6379152],multiWorld:!0}),controls:[],keyboardEventTarget:document}),f0}function n(E,M){return E.id===M.id}function o(E,M){return E===M}function s(E,M){var I;return(I=E.layers)==null?void 0:I.some(P=>n(P,M))}function f(E,M){var P;const I=(P=E==null?void 0:E.layers)==null?void 0:P.find(z=>n(z,M));return!o(I,M)}function a(E,M){return!(M===null||!("layers"in E)||!("layers"in M)||typeof M.layers>"u"||typeof E.layers>"u"||E.layers===M.layers)}function m(E,M){return!("layers"in E)||typeof E.layers>"u"?[]:M===null||!("layers"in M)?E.layers.map((I,P)=>({layer:I,position:P})):E.layers===M.layers?[]:E.layers.reduce((I,P,z)=>s(M,P)?I:[...I,{layer:P,position:z}],[])}function g(E,M){return a(E,M)?M.layers.reduce((I,P)=>s(E,P)?I:[...I,P],[]):[]}function b(E,M){return a(E,M)?E.layers.reduce((I,P)=>f(M,P)?[...I,P]:I,[]):[]}return{olMap:Q2,getOlMap:t,createMap:e,equalsLayer:n,hasLayer:s,layerHasChanged:f,contextHasChanged:a,getAddedLayers:m,getRemovedLayers:g,getMutatedLayers:b}}const Rp=new Map;function Ja(t){return Ja=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ja(t)}function Cs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QR(t,e){if(Ja(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e||"default");if(Ja(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eE(t){var e=QR(t,"string");return Ja(e)==="symbol"?e:String(e)}function tE(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,eE(o.key),o)}}function As(t,e,n){return e&&tE(t.prototype,e),n&&tE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gu(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p0(t,e){return p0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},p0(t,e)}function Sy(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p0(t,e)}function zp(t,e){if(e&&(Ja(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gu(t)}function Ps(t){return Ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ps(t)}function vu(t,e,n){return e=eE(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e4(t){if(Array.isArray(t))return t}function t4(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function r4(t,e){if(!!t){if(typeof t=="string")return rE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rE(t,e)}}function n4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i4(t){return e4(t)||t4(t)||r4(t)||n4()}function nE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function iE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nE(Object(n),!0).forEach(function(o){vu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}var o4={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,n){console&&console[e]&&console[e].apply(console,n)}},a4=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cs(this,t),this.init(e,n)}return As(t,[{key:"init",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=o.prefix||"i18next:",this.logger=n||o4,this.options=o,this.debug=o.debug}},{key:"setDebug",value:function(n){this.debug=n}},{key:"log",value:function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return this.forward(o,"log","",!0)}},{key:"warn",value:function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return this.forward(o,"warn","",!0)}},{key:"error",value:function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return this.forward(o,"error","")}},{key:"deprecate",value:function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return this.forward(o,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(n,o,s,f){return f&&!this.debug?null:(typeof n[0]=="string"&&(n[0]="".concat(s).concat(this.prefix," ").concat(n[0])),this.logger[o](n))}},{key:"create",value:function(n){return new t(this.logger,iE(iE({},{prefix:"".concat(this.prefix,":").concat(n,":")}),this.options))}},{key:"clone",value:function(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new t(this.logger,n)}}]),t}(),ks=new a4,_u=function(){function t(){Cs(this,t),this.observers={}}return As(t,[{key:"on",value:function(n,o){var s=this;return n.split(" ").forEach(function(f){s.observers[f]=s.observers[f]||[],s.observers[f].push(o)}),this}},{key:"off",value:function(n,o){if(!!this.observers[n]){if(!o){delete this.observers[n];return}this.observers[n]=this.observers[n].filter(function(s){return s!==o})}}},{key:"emit",value:function(n){for(var o=arguments.length,s=new Array(o>1?o-1:0),f=1;f<o;f++)s[f-1]=arguments[f];if(this.observers[n]){var a=[].concat(this.observers[n]);a.forEach(function(g){g.apply(void 0,s)})}if(this.observers["*"]){var m=[].concat(this.observers["*"]);m.forEach(function(g){g.apply(g,[n].concat(s))})}}}]),t}();function Fp(){var t,e,n=new Promise(function(o,s){t=o,e=s});return n.resolve=t,n.reject=e,n}function oE(t){return t==null?"":""+t}function s4(t,e,n){t.forEach(function(o){e[o]&&(n[o]=e[o])})}function d0(t,e,n){function o(m){return m&&m.indexOf("###")>-1?m.replace(/###/g,"."):m}function s(){return!t||typeof t=="string"}for(var f=typeof e!="string"?[].concat(e):e.split(".");f.length>1;){if(s())return{};var a=o(f.shift());!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={}}return s()?{}:{obj:t,k:o(f.shift())}}function aE(t,e,n){var o=d0(t,e,Object),s=o.obj,f=o.k;s[f]=n}function l4(t,e,n,o){var s=d0(t,e,Object),f=s.obj,a=s.k;f[a]=f[a]||[],o&&(f[a]=f[a].concat(n)),o||f[a].push(n)}function Ty(t,e){var n=d0(t,e),o=n.obj,s=n.k;if(!!o)return o[s]}function sE(t,e,n){var o=Ty(t,n);return o!==void 0?o:Ty(e,n)}function lE(t,e,n){for(var o in e)o!=="__proto__"&&o!=="constructor"&&(o in t?typeof t[o]=="string"||t[o]instanceof String||typeof e[o]=="string"||e[o]instanceof String?n&&(t[o]=e[o]):lE(t[o],e[o],n):t[o]=e[o]);return t}function Rh(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var u4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function c4(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(e){return u4[e]}):t}var My=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,h4=[" ",",","?","!",";"];function f4(t,e,n){e=e||"",n=n||"";var o=h4.filter(function(m){return e.indexOf(m)<0&&n.indexOf(m)<0});if(o.length===0)return!0;var s=new RegExp("(".concat(o.map(function(m){return m==="?"?"\\?":m}).join("|"),")")),f=!s.test(t);if(!f){var a=t.indexOf(n);a>0&&!s.test(t.substring(0,a))&&(f=!0)}return f}function uE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function Iy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uE(Object(n),!0).forEach(function(o){vu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uE(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function p4(t){var e=d4();return function(){var o=Ps(t),s;if(e){var f=Ps(this).constructor;s=Reflect.construct(o,arguments,f)}else s=o.apply(this,arguments);return zp(this,s)}}function d4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cE(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!!t){if(t[e])return t[e];for(var o=e.split(n),s=t,f=0;f<o.length;++f){if(!s||typeof s[o[f]]=="string"&&f+1<o.length)return;if(s[o[f]]===void 0){for(var a=2,m=o.slice(f,f+a).join(n),g=s[m];g===void 0&&o.length>f+a;)a++,m=o.slice(f,f+a).join(n),g=s[m];if(g===void 0)return;if(g===null)return null;if(e.endsWith(m)){if(typeof g=="string")return g;if(m&&typeof g[m]=="string")return g[m]}var b=o.slice(f+a).join(n);return b?cE(g,b,n):void 0}s=s[o[f]]}return s}}var m4=function(t){Sy(n,t);var e=p4(n);function n(o){var s,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Cs(this,n),s=e.call(this),My&&_u.call(gu(s)),s.data=o||{},s.options=f,s.options.keySeparator===void 0&&(s.options.keySeparator="."),s.options.ignoreJSONStructure===void 0&&(s.options.ignoreJSONStructure=!0),s}return As(n,[{key:"addNamespaces",value:function(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}},{key:"removeNamespaces",value:function(s){var f=this.options.ns.indexOf(s);f>-1&&this.options.ns.splice(f,1)}},{key:"getResource",value:function(s,f,a){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},g=m.keySeparator!==void 0?m.keySeparator:this.options.keySeparator,b=m.ignoreJSONStructure!==void 0?m.ignoreJSONStructure:this.options.ignoreJSONStructure,E=[s,f];a&&typeof a!="string"&&(E=E.concat(a)),a&&typeof a=="string"&&(E=E.concat(g?a.split(g):a)),s.indexOf(".")>-1&&(E=s.split("."));var M=Ty(this.data,E);return M||!b||typeof a!="string"?M:cE(this.data&&this.data[s]&&this.data[s][f],a,g)}},{key:"addResource",value:function(s,f,a,m){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},b=this.options.keySeparator;b===void 0&&(b=".");var E=[s,f];a&&(E=E.concat(b?a.split(b):a)),s.indexOf(".")>-1&&(E=s.split("."),m=f,f=E[1]),this.addNamespaces(f),aE(this.data,E,m),g.silent||this.emit("added",s,f,a,m)}},{key:"addResources",value:function(s,f,a){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var g in a)(typeof a[g]=="string"||Object.prototype.toString.apply(a[g])==="[object Array]")&&this.addResource(s,f,g,a[g],{silent:!0});m.silent||this.emit("added",s,f,a)}},{key:"addResourceBundle",value:function(s,f,a,m,g){var b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},E=[s,f];s.indexOf(".")>-1&&(E=s.split("."),m=a,a=f,f=E[1]),this.addNamespaces(f);var M=Ty(this.data,E)||{};m?lE(M,a,g):M=Iy(Iy({},M),a),aE(this.data,E,M),b.silent||this.emit("added",s,f,a)}},{key:"removeResourceBundle",value:function(s,f){this.hasResourceBundle(s,f)&&delete this.data[s][f],this.removeNamespaces(f),this.emit("removed",s,f)}},{key:"hasResourceBundle",value:function(s,f){return this.getResource(s,f)!==void 0}},{key:"getResourceBundle",value:function(s,f){return f||(f=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Iy(Iy({},{}),this.getResource(s,f)):this.getResource(s,f)}},{key:"getDataByLanguage",value:function(s){return this.data[s]}},{key:"hasLanguageSomeTranslations",value:function(s){var f=this.getDataByLanguage(s),a=f&&Object.keys(f)||[];return!!a.find(function(m){return f[m]&&Object.keys(f[m]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),n}(_u),hE={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,n,o,s,f){var a=this;return e.forEach(function(m){a.processors[m]&&(n=a.processors[m].process(n,o,s,f))}),n}};function fE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function No(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fE(Object(n),!0).forEach(function(o){vu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fE(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function y4(t){var e=g4();return function(){var o=Ps(t),s;if(e){var f=Ps(this).constructor;s=Reflect.construct(o,arguments,f)}else s=o.apply(this,arguments);return zp(this,s)}}function g4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var pE={},dE=function(t){Sy(n,t);var e=y4(n);function n(o){var s,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Cs(this,n),s=e.call(this),My&&_u.call(gu(s)),s4(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],o,gu(s)),s.options=f,s.options.keySeparator===void 0&&(s.options.keySeparator="."),s.logger=ks.create("translator"),s}return As(n,[{key:"changeLanguage",value:function(s){s&&(this.language=s)}},{key:"exists",value:function(s){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(s==null)return!1;var a=this.resolve(s,f);return a&&a.res!==void 0}},{key:"extractFromKey",value:function(s,f){var a=f.nsSeparator!==void 0?f.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");var m=f.keySeparator!==void 0?f.keySeparator:this.options.keySeparator,g=f.ns||this.options.defaultNS||[],b=a&&s.indexOf(a)>-1,E=!this.options.userDefinedKeySeparator&&!f.keySeparator&&!this.options.userDefinedNsSeparator&&!f.nsSeparator&&!f4(s,a,m);if(b&&!E){var M=s.match(this.interpolator.nestingRegexp);if(M&&M.length>0)return{key:s,namespaces:g};var I=s.split(a);(a!==m||a===m&&this.options.ns.indexOf(I[0])>-1)&&(g=I.shift()),s=I.join(m)}return typeof g=="string"&&(g=[g]),{key:s,namespaces:g}}},{key:"translate",value:function(s,f,a){var m=this;if(Ja(f)!=="object"&&this.options.overloadTranslationOptionHandler&&(f=this.options.overloadTranslationOptionHandler(arguments)),f||(f={}),s==null)return"";Array.isArray(s)||(s=[String(s)]);var g=f.returnDetails!==void 0?f.returnDetails:this.options.returnDetails,b=f.keySeparator!==void 0?f.keySeparator:this.options.keySeparator,E=this.extractFromKey(s[s.length-1],f),M=E.key,I=E.namespaces,P=I[I.length-1],z=f.lng||this.language,V=f.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(z&&z.toLowerCase()==="cimode"){if(V){var q=f.nsSeparator||this.options.nsSeparator;return g?{res:"".concat(P).concat(q).concat(M),usedKey:M,exactUsedKey:M,usedLng:z,usedNS:P}:"".concat(P).concat(q).concat(M)}return g?{res:M,usedKey:M,exactUsedKey:M,usedLng:z,usedNS:P}:M}var re=this.resolve(s,f),X=re&&re.res,ae=re&&re.usedKey||M,ce=re&&re.exactUsedKey||M,ve=Object.prototype.toString.apply(X),Ne=["[object Number]","[object Function]","[object RegExp]"],ze=f.joinArrays!==void 0?f.joinArrays:this.options.joinArrays,Pe=!this.i18nFormat||this.i18nFormat.handleAsObject,Se=typeof X!="string"&&typeof X!="boolean"&&typeof X!="number";if(Pe&&X&&Se&&Ne.indexOf(ve)<0&&!(typeof ze=="string"&&ve==="[object Array]")){if(!f.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var Ie=this.options.returnedObjectHandler?this.options.returnedObjectHandler(ae,X,No(No({},f),{},{ns:I})):"key '".concat(M," (").concat(this.language,")' returned an object instead of string.");return g?(re.res=Ie,re):Ie}if(b){var Ke=ve==="[object Array]",Ge=Ke?[]:{},st=Ke?ce:ae;for(var be in X)if(Object.prototype.hasOwnProperty.call(X,be)){var Je="".concat(st).concat(b).concat(be);Ge[be]=this.translate(Je,No(No({},f),{joinArrays:!1,ns:I})),Ge[be]===Je&&(Ge[be]=X[be])}X=Ge}}else if(Pe&&typeof ze=="string"&&ve==="[object Array]")X=X.join(ze),X&&(X=this.extendTranslation(X,s,f,a));else{var ht=!1,vt=!1,Lt=f.count!==void 0&&typeof f.count!="string",rr=n.hasDefaultValue(f),Nn=Lt?this.pluralResolver.getSuffix(z,f.count,f):"",zr=f["defaultValue".concat(Nn)]||f.defaultValue;!this.isValidLookup(X)&&rr&&(ht=!0,X=zr),this.isValidLookup(X)||(vt=!0,X=M);var mr=f.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,Jn=mr&&vt?void 0:X,Fr=rr&&zr!==X&&this.options.updateMissing;if(vt||ht||Fr){if(this.logger.log(Fr?"updateKey":"missingKey",z,P,M,Fr?zr:X),b){var $i=this.resolve(M,No(No({},f),{},{keySeparator:!1}));$i&&$i.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var qr=[],kr=this.languageUtils.getFallbackCodes(this.options.fallbackLng,f.lng||this.language);if(this.options.saveMissingTo==="fallback"&&kr&&kr[0])for(var qn=0;qn<kr.length;qn++)qr.push(kr[qn]);else this.options.saveMissingTo==="all"?qr=this.languageUtils.toResolveHierarchy(f.lng||this.language):qr.push(f.lng||this.language);var Mr=function(hi,Wn,K){var ye=rr&&K!==X?K:Jn;m.options.missingKeyHandler?m.options.missingKeyHandler(hi,P,Wn,ye,Fr,f):m.backendConnector&&m.backendConnector.saveMissing&&m.backendConnector.saveMissing(hi,P,Wn,ye,Fr,f),m.emit("missingKey",hi,P,Wn,X)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Lt?qr.forEach(function(Mn){m.pluralResolver.getSuffixes(Mn,f).forEach(function(hi){Mr([Mn],M+hi,f["defaultValue".concat(hi)]||zr)})}):Mr(qr,M,zr))}X=this.extendTranslation(X,s,f,re,a),vt&&X===M&&this.options.appendNamespaceToMissingKey&&(X="".concat(P,":").concat(M)),(vt||ht)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?X=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(P,":").concat(M):M,ht?X:void 0):X=this.options.parseMissingKeyHandler(X))}return g?(re.res=X,re):X}},{key:"extendTranslation",value:function(s,f,a,m,g){var b=this;if(this.i18nFormat&&this.i18nFormat.parse)s=this.i18nFormat.parse(s,No(No({},this.options.interpolation.defaultVariables),a),m.usedLng,m.usedNS,m.usedKey,{resolved:m});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init(No(No({},a),{interpolation:No(No({},this.options.interpolation),a.interpolation)}));var E=typeof s=="string"&&(a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),M;if(E){var I=s.match(this.interpolator.nestingRegexp);M=I&&I.length}var P=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(P=No(No({},this.options.interpolation.defaultVariables),P)),s=this.interpolator.interpolate(s,P,a.lng||this.language,a),E){var z=s.match(this.interpolator.nestingRegexp),V=z&&z.length;M<V&&(a.nest=!1)}a.nest!==!1&&(s=this.interpolator.nest(s,function(){for(var X=arguments.length,ae=new Array(X),ce=0;ce<X;ce++)ae[ce]=arguments[ce];return g&&g[0]===ae[0]&&!a.context?(b.logger.warn("It seems you are nesting recursively key: ".concat(ae[0]," in key: ").concat(f[0])),null):b.translate.apply(b,ae.concat([f]))},a)),a.interpolation&&this.interpolator.reset()}var q=a.postProcess||this.options.postProcess,re=typeof q=="string"?[q]:q;return s!=null&&re&&re.length&&a.applyPostProcessor!==!1&&(s=hE.handle(re,s,f,this.options&&this.options.postProcessPassResolved?No({i18nResolved:m},a):a,this)),s}},{key:"resolve",value:function(s){var f=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m,g,b,E,M;return typeof s=="string"&&(s=[s]),s.forEach(function(I){if(!f.isValidLookup(m)){var P=f.extractFromKey(I,a),z=P.key;g=z;var V=P.namespaces;f.options.fallbackNS&&(V=V.concat(f.options.fallbackNS));var q=a.count!==void 0&&typeof a.count!="string",re=q&&!a.ordinal&&a.count===0&&f.pluralResolver.shouldUseIntlApi(),X=a.context!==void 0&&(typeof a.context=="string"||typeof a.context=="number")&&a.context!=="",ae=a.lngs?a.lngs:f.languageUtils.toResolveHierarchy(a.lng||f.language,a.fallbackLng);V.forEach(function(ce){f.isValidLookup(m)||(M=ce,!pE["".concat(ae[0],"-").concat(ce)]&&f.utils&&f.utils.hasLoadedNamespace&&!f.utils.hasLoadedNamespace(M)&&(pE["".concat(ae[0],"-").concat(ce)]=!0,f.logger.warn('key "'.concat(g,'" for languages "').concat(ae.join(", "),`" won't get resolved as namespace "`).concat(M,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),ae.forEach(function(ve){if(!f.isValidLookup(m)){E=ve;var Ne=[z];if(f.i18nFormat&&f.i18nFormat.addLookupKeys)f.i18nFormat.addLookupKeys(Ne,z,ve,ce,a);else{var ze;q&&(ze=f.pluralResolver.getSuffix(ve,a.count,a));var Pe="".concat(f.options.pluralSeparator,"zero");if(q&&(Ne.push(z+ze),re&&Ne.push(z+Pe)),X){var Se="".concat(z).concat(f.options.contextSeparator).concat(a.context);Ne.push(Se),q&&(Ne.push(Se+ze),re&&Ne.push(Se+Pe))}}for(var Ie;Ie=Ne.pop();)f.isValidLookup(m)||(b=Ie,m=f.getResource(ve,ce,Ie,a))}}))})}}),{res:m,usedKey:g,exactUsedKey:b,usedLng:E,usedNS:M}}},{key:"isValidLookup",value:function(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}},{key:"getResource",value:function(s,f,a){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(s,f,a,m):this.resourceStore.getResource(s,f,a,m)}}],[{key:"hasDefaultValue",value:function(s){var f="defaultValue";for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)&&f===a.substring(0,f.length)&&s[a]!==void 0)return!0;return!1}}]),n}(_u);function m0(t){return t.charAt(0).toUpperCase()+t.slice(1)}var mE=function(){function t(e){Cs(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ks.create("languageUtils")}return As(t,[{key:"getScriptPartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return null;var o=n.split("-");return o.length===2||(o.pop(),o[o.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(o.join("-"))}},{key:"getLanguagePartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return n;var o=n.split("-");return this.formatLanguageCode(o[0])}},{key:"formatLanguageCode",value:function(n){if(typeof n=="string"&&n.indexOf("-")>-1){var o=["hans","hant","latn","cyrl","cans","mong","arab"],s=n.split("-");return this.options.lowerCaseLng?s=s.map(function(f){return f.toLowerCase()}):s.length===2?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),o.indexOf(s[1].toLowerCase())>-1&&(s[1]=m0(s[1].toLowerCase()))):s.length===3&&(s[0]=s[0].toLowerCase(),s[1].length===2&&(s[1]=s[1].toUpperCase()),s[0]!=="sgn"&&s[2].length===2&&(s[2]=s[2].toUpperCase()),o.indexOf(s[1].toLowerCase())>-1&&(s[1]=m0(s[1].toLowerCase())),o.indexOf(s[2].toLowerCase())>-1&&(s[2]=m0(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}},{key:"isSupportedCode",value:function(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}},{key:"getBestMatchFromCodes",value:function(n){var o=this;if(!n)return null;var s;return n.forEach(function(f){if(!s){var a=o.formatLanguageCode(f);(!o.options.supportedLngs||o.isSupportedCode(a))&&(s=a)}}),!s&&this.options.supportedLngs&&n.forEach(function(f){if(!s){var a=o.getLanguagePartFromCode(f);if(o.isSupportedCode(a))return s=a;s=o.options.supportedLngs.find(function(m){if(m.indexOf(a)===0)return m})}}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}},{key:"getFallbackCodes",value:function(n,o){if(!n)return[];if(typeof n=="function"&&(n=n(o)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!o)return n.default||[];var s=n[o];return s||(s=n[this.getScriptPartFromCode(o)]),s||(s=n[this.formatLanguageCode(o)]),s||(s=n[this.getLanguagePartFromCode(o)]),s||(s=n.default),s||[]}},{key:"toResolveHierarchy",value:function(n,o){var s=this,f=this.getFallbackCodes(o||this.options.fallbackLng||[],n),a=[],m=function(b){!b||(s.isSupportedCode(b)?a.push(b):s.logger.warn("rejecting language code not found in supportedLngs: ".concat(b)))};return typeof n=="string"&&n.indexOf("-")>-1?(this.options.load!=="languageOnly"&&m(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&m(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&m(this.getLanguagePartFromCode(n))):typeof n=="string"&&m(this.formatLanguageCode(n)),f.forEach(function(g){a.indexOf(g)<0&&m(s.formatLanguageCode(g))}),a}}]),t}(),v4=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_4={1:function(e){return Number(e>1)},2:function(e){return Number(e!=1)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(e==1?0:e>=2&&e<=4?1:2)},7:function(e){return Number(e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(e==1?0:e==2?1:e!=8&&e!=11?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(e==1?0:e==2?1:e<7?2:e<11?3:4)},11:function(e){return Number(e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(e!==0)},14:function(e){return Number(e==1?0:e==2?1:e==3?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:e!==0?1:2)},17:function(e){return Number(e==1||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(e==0?0:e==1?1:2)},19:function(e){return Number(e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(e==1?0:e==0||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3)}},x4=["v1","v2","v3"],yE={zero:0,one:1,two:2,few:3,many:4,other:5};function b4(){var t={};return v4.forEach(function(e){e.lngs.forEach(function(n){t[n]={numbers:e.nr,plurals:_4[e.fc]}})}),t}var w4=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cs(this,t),this.languageUtils=e,this.options=n,this.logger=ks.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=b4()}return As(t,[{key:"addRule",value:function(n,o){this.rules[n]=o}},{key:"getRule",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(n,{type:o.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}},{key:"needsPlural",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(n,o);return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(n,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,s).map(function(f){return"".concat(o).concat(f)})}},{key:"getSuffixes",value:function(n){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=this.getRule(n,s);return f?this.shouldUseIntlApi()?f.resolvedOptions().pluralCategories.sort(function(a,m){return yE[a]-yE[m]}).map(function(a){return"".concat(o.options.prepend).concat(a)}):f.numbers.map(function(a){return o.getSuffix(n,a,s)}):[]}},{key:"getSuffix",value:function(n,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},f=this.getRule(n,s);return f?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(f.select(o)):this.getSuffixRetroCompatible(f,o):(this.logger.warn("no plural rule found for: ".concat(n)),"")}},{key:"getSuffixRetroCompatible",value:function(n,o){var s=this,f=n.noAbs?n.plurals(o):n.plurals(Math.abs(o)),a=n.numbers[f];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));var m=function(){return s.options.prepend&&a.toString()?s.options.prepend+a.toString():a.toString()};return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?"_plural_".concat(a.toString()):m():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?m():this.options.prepend&&f.toString()?this.options.prepend+f.toString():f.toString()}},{key:"shouldUseIntlApi",value:function(){return!x4.includes(this.options.compatibilityJSON)}}]),t}();function gE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function Qa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gE(Object(n),!0).forEach(function(o){vu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gE(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}var E4=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Cs(this,t),this.logger=ks.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(n){return n},this.init(e)}return As(t,[{key:"init",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});var o=n.interpolation;this.escape=o.escape!==void 0?o.escape:c4,this.escapeValue=o.escapeValue!==void 0?o.escapeValue:!0,this.useRawValueToEscape=o.useRawValueToEscape!==void 0?o.useRawValueToEscape:!1,this.prefix=o.prefix?Rh(o.prefix):o.prefixEscaped||"{{",this.suffix=o.suffix?Rh(o.suffix):o.suffixEscaped||"}}",this.formatSeparator=o.formatSeparator?o.formatSeparator:o.formatSeparator||",",this.unescapePrefix=o.unescapeSuffix?"":o.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":o.unescapeSuffix||"",this.nestingPrefix=o.nestingPrefix?Rh(o.nestingPrefix):o.nestingPrefixEscaped||Rh("$t("),this.nestingSuffix=o.nestingSuffix?Rh(o.nestingSuffix):o.nestingSuffixEscaped||Rh(")"),this.nestingOptionsSeparator=o.nestingOptionsSeparator?o.nestingOptionsSeparator:o.nestingOptionsSeparator||",",this.maxReplaces=o.maxReplaces?o.maxReplaces:1e3,this.alwaysFormat=o.alwaysFormat!==void 0?o.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var n="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(n,"g");var o="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(o,"g");var s="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(s,"g")}},{key:"interpolate",value:function(n,o,s,f){var a=this,m,g,b,E=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function M(q){return q.replace(/\$/g,"$$$$")}var I=function(re){if(re.indexOf(a.formatSeparator)<0){var X=sE(o,E,re);return a.alwaysFormat?a.format(X,void 0,s,Qa(Qa(Qa({},f),o),{},{interpolationkey:re})):X}var ae=re.split(a.formatSeparator),ce=ae.shift().trim(),ve=ae.join(a.formatSeparator).trim();return a.format(sE(o,E,ce),ve,s,Qa(Qa(Qa({},f),o),{},{interpolationkey:ce}))};this.resetRegExp();var P=f&&f.missingInterpolationHandler||this.options.missingInterpolationHandler,z=f&&f.interpolation&&f.interpolation.skipOnVariables!==void 0?f.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,V=[{regex:this.regexpUnescape,safeValue:function(re){return M(re)}},{regex:this.regexp,safeValue:function(re){return a.escapeValue?M(a.escape(re)):M(re)}}];return V.forEach(function(q){for(b=0;m=q.regex.exec(n);){var re=m[1].trim();if(g=I(re),g===void 0)if(typeof P=="function"){var X=P(n,m,f);g=typeof X=="string"?X:""}else if(f&&Object.prototype.hasOwnProperty.call(f,re))g="";else if(z){g=m[0];continue}else a.logger.warn("missed to pass in variable ".concat(re," for interpolating ").concat(n)),g="";else typeof g!="string"&&!a.useRawValueToEscape&&(g=oE(g));var ae=q.safeValue(g);if(n=n.replace(m[0],ae),z?(q.regex.lastIndex+=g.length,q.regex.lastIndex-=m[0].length):q.regex.lastIndex=0,b++,b>=a.maxReplaces)break}}),n}},{key:"nest",value:function(n,o){var s=this,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,m,g;function b(P,z){var V=this.nestingOptionsSeparator;if(P.indexOf(V)<0)return P;var q=P.split(new RegExp("".concat(V,"[ ]*{"))),re="{".concat(q[1]);P=q[0],re=this.interpolate(re,g);var X=re.match(/'/g),ae=re.match(/"/g);(X&&X.length%2===0&&!ae||ae.length%2!==0)&&(re=re.replace(/'/g,'"'));try{g=JSON.parse(re),z&&(g=Qa(Qa({},z),g))}catch(ce){return this.logger.warn("failed parsing options string in nesting for key ".concat(P),ce),"".concat(P).concat(V).concat(re)}return delete g.defaultValue,P}for(;a=this.nestingRegexp.exec(n);){var E=[];g=Qa({},f),g=g.replace&&typeof g.replace!="string"?g.replace:g,g.applyPostProcessor=!1,delete g.defaultValue;var M=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){var I=a[1].split(this.formatSeparator).map(function(P){return P.trim()});a[1]=I.shift(),E=I,M=!0}if(m=o(b.call(this,a[1].trim(),g),g),m&&a[0]===n&&typeof m!="string")return m;typeof m!="string"&&(m=oE(m)),m||(this.logger.warn("missed to resolve ".concat(a[1]," for nesting ").concat(n)),m=""),M&&(m=E.reduce(function(P,z){return s.format(P,z,f.lng,Qa(Qa({},f),{},{interpolationkey:a[1].trim()}))},m.trim())),n=n.replace(a[0],m),this.regexp.lastIndex=0}return n}}]),t}();function vE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function gl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vE(Object(n),!0).forEach(function(o){vu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vE(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function S4(t){var e=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){var o=t.split("(");e=o[0].toLowerCase().trim();var s=o[1].substring(0,o[1].length-1);if(e==="currency"&&s.indexOf(":")<0)n.currency||(n.currency=s.trim());else if(e==="relativetime"&&s.indexOf(":")<0)n.range||(n.range=s.trim());else{var f=s.split(";");f.forEach(function(a){if(!!a){var m=a.split(":"),g=i4(m),b=g[0],E=g.slice(1),M=E.join(":").trim().replace(/^'+|'+$/g,"");n[b.trim()]||(n[b.trim()]=M),M==="false"&&(n[b.trim()]=!1),M==="true"&&(n[b.trim()]=!0),isNaN(M)||(n[b.trim()]=parseInt(M,10))}})}}return{formatName:e,formatOptions:n}}function zh(t){var e={};return function(o,s,f){var a=s+JSON.stringify(f),m=e[a];return m||(m=t(s,f),e[a]=m),m(o)}}var T4=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Cs(this,t),this.logger=ks.create("formatter"),this.options=e,this.formats={number:zh(function(n,o){var s=new Intl.NumberFormat(n,gl({},o));return function(f){return s.format(f)}}),currency:zh(function(n,o){var s=new Intl.NumberFormat(n,gl(gl({},o),{},{style:"currency"}));return function(f){return s.format(f)}}),datetime:zh(function(n,o){var s=new Intl.DateTimeFormat(n,gl({},o));return function(f){return s.format(f)}}),relativetime:zh(function(n,o){var s=new Intl.RelativeTimeFormat(n,gl({},o));return function(f){return s.format(f,o.range||"day")}}),list:zh(function(n,o){var s=new Intl.ListFormat(n,gl({},o));return function(f){return s.format(f)}})},this.init(e)}return As(t,[{key:"init",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},s=o.interpolation;this.formatSeparator=s.formatSeparator?s.formatSeparator:s.formatSeparator||","}},{key:"add",value:function(n,o){this.formats[n.toLowerCase().trim()]=o}},{key:"addCached",value:function(n,o){this.formats[n.toLowerCase().trim()]=zh(o)}},{key:"format",value:function(n,o,s){var f=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},m=o.split(this.formatSeparator),g=m.reduce(function(b,E){var M=S4(E),I=M.formatName,P=M.formatOptions;if(f.formats[I]){var z=b;try{var V=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},q=V.locale||V.lng||a.locale||a.lng||s;z=f.formats[I](b,q,gl(gl(gl({},P),a),V))}catch(re){f.logger.warn(re)}return z}else f.logger.warn("there was no format function for ".concat(I));return b},n);return g}}]),t}();function _E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function xE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_E(Object(n),!0).forEach(function(o){vu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_E(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function M4(t){var e=I4();return function(){var o=Ps(t),s;if(e){var f=Ps(this).constructor;s=Reflect.construct(o,arguments,f)}else s=o.apply(this,arguments);return zp(this,s)}}function I4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O4(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}var C4=function(t){Sy(n,t);var e=M4(n);function n(o,s,f){var a,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Cs(this,n),a=e.call(this),My&&_u.call(gu(a)),a.backend=o,a.store=s,a.services=f,a.languageUtils=f.languageUtils,a.options=m,a.logger=ks.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=m.maxParallelReads||10,a.readingCalls=0,a.maxRetries=m.maxRetries>=0?m.maxRetries:5,a.retryTimeout=m.retryTimeout>=1?m.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(f,m.backend,m),a}return As(n,[{key:"queueLoad",value:function(s,f,a,m){var g=this,b={},E={},M={},I={};return s.forEach(function(P){var z=!0;f.forEach(function(V){var q="".concat(P,"|").concat(V);!a.reload&&g.store.hasResourceBundle(P,V)?g.state[q]=2:g.state[q]<0||(g.state[q]===1?E[q]===void 0&&(E[q]=!0):(g.state[q]=1,z=!1,E[q]===void 0&&(E[q]=!0),b[q]===void 0&&(b[q]=!0),I[V]===void 0&&(I[V]=!0)))}),z||(M[P]=!0)}),(Object.keys(b).length||Object.keys(E).length)&&this.queue.push({pending:E,pendingCount:Object.keys(E).length,loaded:{},errors:[],callback:m}),{toLoad:Object.keys(b),pending:Object.keys(E),toLoadLanguages:Object.keys(M),toLoadNamespaces:Object.keys(I)}}},{key:"loaded",value:function(s,f,a){var m=s.split("|"),g=m[0],b=m[1];f&&this.emit("failedLoading",g,b,f),a&&this.store.addResourceBundle(g,b,a),this.state[s]=f?-1:2;var E={};this.queue.forEach(function(M){l4(M.loaded,[g],b),O4(M,s),f&&M.errors.push(f),M.pendingCount===0&&!M.done&&(Object.keys(M.loaded).forEach(function(I){E[I]||(E[I]={});var P=M.loaded[I];P.length&&P.forEach(function(z){E[I][z]===void 0&&(E[I][z]=!0)})}),M.done=!0,M.errors.length?M.callback(M.errors):M.callback())}),this.emit("loaded",E),this.queue=this.queue.filter(function(M){return!M.done})}},{key:"read",value:function(s,f,a){var m=this,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,E=arguments.length>5?arguments[5]:void 0;if(!s.length)return E(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:f,fcName:a,tried:g,wait:b,callback:E});return}this.readingCalls++;var M=function(V,q){if(m.readingCalls--,m.waitingReads.length>0){var re=m.waitingReads.shift();m.read(re.lng,re.ns,re.fcName,re.tried,re.wait,re.callback)}if(V&&q&&g<m.maxRetries){setTimeout(function(){m.read.call(m,s,f,a,g+1,b*2,E)},b);return}E(V,q)},I=this.backend[a].bind(this.backend);if(I.length===2){try{var P=I(s,f);P&&typeof P.then=="function"?P.then(function(z){return M(null,z)}).catch(M):M(null,P)}catch(z){M(z)}return}return I(s,f,M)}},{key:"prepareLoading",value:function(s,f){var a=this,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),g&&g();typeof s=="string"&&(s=this.languageUtils.toResolveHierarchy(s)),typeof f=="string"&&(f=[f]);var b=this.queueLoad(s,f,m,g);if(!b.toLoad.length)return b.pending.length||g(),null;b.toLoad.forEach(function(E){a.loadOne(E)})}},{key:"load",value:function(s,f,a){this.prepareLoading(s,f,{},a)}},{key:"reload",value:function(s,f,a){this.prepareLoading(s,f,{reload:!0},a)}},{key:"loadOne",value:function(s){var f=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",m=s.split("|"),g=m[0],b=m[1];this.read(g,b,"read",void 0,void 0,function(E,M){E&&f.logger.warn("".concat(a,"loading namespace ").concat(b," for language ").concat(g," failed"),E),!E&&M&&f.logger.log("".concat(a,"loaded namespace ").concat(b," for language ").concat(g),M),f.loaded(s,E,M)})}},{key:"saveMissing",value:function(s,f,a,m,g){var b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},E=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(f)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(f,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend&&this.backend.create){var M=xE(xE({},b),{},{isUpdate:g}),I=this.backend.create.bind(this.backend);if(I.length<6)try{var P;I.length===5?P=I(s,f,a,m,M):P=I(s,f,a,m),P&&typeof P.then=="function"?P.then(function(z){return E(null,z)}).catch(E):E(null,P)}catch(z){E(z)}else I(s,f,a,m,E,M)}!s||!s[0]||this.store.addResource(s[0],f,a,m)}}}]),n}(_u);function bE(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var n={};if(Ja(e[1])==="object"&&(n=e[1]),typeof e[1]=="string"&&(n.defaultValue=e[1]),typeof e[2]=="string"&&(n.tDescription=e[2]),Ja(e[2])==="object"||Ja(e[3])==="object"){var o=e[3]||e[2];Object.keys(o).forEach(function(s){n[s]=o[s]})}return n},interpolation:{escapeValue:!0,format:function(e,n,o,s){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function wE(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function EE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function Ls(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EE(Object(n),!0).forEach(function(o){vu(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EE(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function A4(t){var e=P4();return function(){var o=Ps(t),s;if(e){var f=Ps(this).constructor;s=Reflect.construct(o,arguments,f)}else s=o.apply(this,arguments);return zp(this,s)}}function P4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Oy(){}function k4(t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));e.forEach(function(n){typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}var Cy=function(t){Sy(n,t);var e=A4(n);function n(){var o,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1?arguments[1]:void 0;if(Cs(this,n),o=e.call(this),My&&_u.call(gu(o)),o.options=wE(s),o.services={},o.logger=ks,o.modules={external:[]},k4(gu(o)),f&&!o.isInitialized&&!s.isClone){if(!o.options.initImmediate)return o.init(s,f),zp(o,gu(o));setTimeout(function(){o.init(s,f)},0)}return o}return As(n,[{key:"init",value:function(){var s=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof f=="function"&&(a=f,f={}),!f.defaultNS&&f.defaultNS!==!1&&f.ns&&(typeof f.ns=="string"?f.defaultNS=f.ns:f.ns.indexOf("translation")<0&&(f.defaultNS=f.ns[0]));var m=bE();this.options=Ls(Ls(Ls({},m),this.options),wE(f)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Ls(Ls({},m.interpolation),this.options.interpolation)),f.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=f.keySeparator),f.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=f.nsSeparator);function g(re){return re?typeof re=="function"?new re:re:null}if(!this.options.isClone){this.modules.logger?ks.init(g(this.modules.logger),this.options):ks.init(null,this.options);var b;this.modules.formatter?b=this.modules.formatter:typeof Intl<"u"&&(b=T4);var E=new mE(this.options);this.store=new m4(this.options.resources,this.options);var M=this.services;M.logger=ks,M.resourceStore=this.store,M.languageUtils=E,M.pluralResolver=new w4(E,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),b&&(!this.options.interpolation.format||this.options.interpolation.format===m.interpolation.format)&&(M.formatter=g(b),M.formatter.init(M,this.options),this.options.interpolation.format=M.formatter.format.bind(M.formatter)),M.interpolator=new E4(this.options),M.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},M.backendConnector=new C4(g(this.modules.backend),M.resourceStore,M,this.options),M.backendConnector.on("*",function(re){for(var X=arguments.length,ae=new Array(X>1?X-1:0),ce=1;ce<X;ce++)ae[ce-1]=arguments[ce];s.emit.apply(s,[re].concat(ae))}),this.modules.languageDetector&&(M.languageDetector=g(this.modules.languageDetector),M.languageDetector.init&&M.languageDetector.init(M,this.options.detection,this.options)),this.modules.i18nFormat&&(M.i18nFormat=g(this.modules.i18nFormat),M.i18nFormat.init&&M.i18nFormat.init(this)),this.translator=new dE(this.services,this.options),this.translator.on("*",function(re){for(var X=arguments.length,ae=new Array(X>1?X-1:0),ce=1;ce<X;ce++)ae[ce-1]=arguments[ce];s.emit.apply(s,[re].concat(ae))}),this.modules.external.forEach(function(re){re.init&&re.init(s)})}if(this.format=this.options.interpolation.format,a||(a=Oy),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var I=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);I.length>0&&I[0]!=="dev"&&(this.options.lng=I[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var P=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];P.forEach(function(re){s[re]=function(){var X;return(X=s.store)[re].apply(X,arguments)}});var z=["addResource","addResources","addResourceBundle","removeResourceBundle"];z.forEach(function(re){s[re]=function(){var X;return(X=s.store)[re].apply(X,arguments),s}});var V=Fp(),q=function(){var X=function(ce,ve){s.isInitialized&&!s.initializedStoreOnce&&s.logger.warn("init: i18next is already initialized. You should call init just once!"),s.isInitialized=!0,s.options.isClone||s.logger.log("initialized",s.options),s.emit("initialized",s.options),V.resolve(ve),a(ce,ve)};if(s.languages&&s.options.compatibilityAPI!=="v1"&&!s.isInitialized)return X(null,s.t.bind(s));s.changeLanguage(s.options.lng,X)};return this.options.resources||!this.options.initImmediate?q():setTimeout(q,0),V}},{key:"loadResources",value:function(s){var f=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Oy,m=a,g=typeof s=="string"?s:this.language;if(typeof s=="function"&&(m=s),!this.options.resources||this.options.partialBundledLanguages){if(g&&g.toLowerCase()==="cimode")return m();var b=[],E=function(P){if(!!P){var z=f.services.languageUtils.toResolveHierarchy(P);z.forEach(function(V){b.indexOf(V)<0&&b.push(V)})}};if(g)E(g);else{var M=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);M.forEach(function(I){return E(I)})}this.options.preload&&this.options.preload.forEach(function(I){return E(I)}),this.services.backendConnector.load(b,this.options.ns,function(I){!I&&!f.resolvedLanguage&&f.language&&f.setResolvedLanguage(f.language),m(I)})}else m(null)}},{key:"reloadResources",value:function(s,f,a){var m=Fp();return s||(s=this.languages),f||(f=this.options.ns),a||(a=Oy),this.services.backendConnector.reload(s,f,function(g){m.resolve(),a(g)}),m}},{key:"use",value:function(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&hE.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}},{key:"setResolvedLanguage",value:function(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1))for(var f=0;f<this.languages.length;f++){var a=this.languages[f];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}},{key:"changeLanguage",value:function(s,f){var a=this;this.isLanguageChangingTo=s;var m=Fp();this.emit("languageChanging",s);var g=function(I){a.language=I,a.languages=a.services.languageUtils.toResolveHierarchy(I),a.resolvedLanguage=void 0,a.setResolvedLanguage(I)},b=function(I,P){P?(g(P),a.translator.changeLanguage(P),a.isLanguageChangingTo=void 0,a.emit("languageChanged",P),a.logger.log("languageChanged",P)):a.isLanguageChangingTo=void 0,m.resolve(function(){return a.t.apply(a,arguments)}),f&&f(I,function(){return a.t.apply(a,arguments)})},E=function(I){!s&&!I&&a.services.languageDetector&&(I=[]);var P=typeof I=="string"?I:a.services.languageUtils.getBestMatchFromCodes(I);P&&(a.language||g(P),a.translator.language||a.translator.changeLanguage(P),a.services.languageDetector&&a.services.languageDetector.cacheUserLanguage&&a.services.languageDetector.cacheUserLanguage(P)),a.loadResources(P,function(z){b(z,P)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?E(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(E):this.services.languageDetector.detect(E):E(s),m}},{key:"getFixedT",value:function(s,f,a){var m=this,g=function b(E,M){var I;if(Ja(M)!=="object"){for(var P=arguments.length,z=new Array(P>2?P-2:0),V=2;V<P;V++)z[V-2]=arguments[V];I=m.options.overloadTranslationOptionHandler([E,M].concat(z))}else I=Ls({},M);I.lng=I.lng||b.lng,I.lngs=I.lngs||b.lngs,I.ns=I.ns||b.ns,I.keyPrefix=I.keyPrefix||a||b.keyPrefix;var q=m.options.keySeparator||".",re;return I.keyPrefix&&Array.isArray(E)?re=E.map(function(X){return"".concat(I.keyPrefix).concat(q).concat(X)}):re=I.keyPrefix?"".concat(I.keyPrefix).concat(q).concat(E):E,m.t(re,I)};return typeof s=="string"?g.lng=s:g.lngs=s,g.ns=f,g.keyPrefix=a,g}},{key:"t",value:function(){var s;return this.translator&&(s=this.translator).translate.apply(s,arguments)}},{key:"exists",value:function(){var s;return this.translator&&(s=this.translator).exists.apply(s,arguments)}},{key:"setDefaultNamespace",value:function(s){this.options.defaultNS=s}},{key:"hasLoadedNamespace",value:function(s){var f=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var m=this.resolvedLanguage||this.languages[0],g=this.options?this.options.fallbackLng:!1,b=this.languages[this.languages.length-1];if(m.toLowerCase()==="cimode")return!0;var E=function(P,z){var V=f.services.backendConnector.state["".concat(P,"|").concat(z)];return V===-1||V===2};if(a.precheck){var M=a.precheck(this,E);if(M!==void 0)return M}return!!(this.hasResourceBundle(m,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||E(m,s)&&(!g||E(b,s)))}},{key:"loadNamespaces",value:function(s,f){var a=this,m=Fp();return this.options.ns?(typeof s=="string"&&(s=[s]),s.forEach(function(g){a.options.ns.indexOf(g)<0&&a.options.ns.push(g)}),this.loadResources(function(g){m.resolve(),f&&f(g)}),m):(f&&f(),Promise.resolve())}},{key:"loadLanguages",value:function(s,f){var a=Fp();typeof s=="string"&&(s=[s]);var m=this.options.preload||[],g=s.filter(function(b){return m.indexOf(b)<0});return g.length?(this.options.preload=m.concat(g),this.loadResources(function(b){a.resolve(),f&&f(b)}),a):(f&&f(),Promise.resolve())}},{key:"dir",value:function(s){if(s||(s=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!s)return"rtl";var f=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services&&this.services.languageUtils||new mE(bE());return f.indexOf(a.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var s=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Oy,m=Ls(Ls(Ls({},this.options),f),{isClone:!0}),g=new n(m);(f.debug!==void 0||f.prefix!==void 0)&&(g.logger=g.logger.clone(f));var b=["store","services","language"];return b.forEach(function(E){g[E]=s[E]}),g.services=Ls({},this.services),g.services.utils={hasLoadedNamespace:g.hasLoadedNamespace.bind(g)},g.translator=new dE(g.services,g.options),g.translator.on("*",function(E){for(var M=arguments.length,I=new Array(M>1?M-1:0),P=1;P<M;P++)I[P-1]=arguments[P];g.emit.apply(g,[E].concat(I))}),g.init(m,a),g.translator.options=g.options,g.translator.backendConnector.services.utils={hasLoadedNamespace:g.hasLoadedNamespace.bind(g)},g}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(_u);vu(Cy,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Cy(t,e)});var $n=Cy.createInstance();$n.createInstance=Cy.createInstance,$n.createInstance,$n.dir,$n.init,$n.loadResources,$n.reloadResources,$n.use,$n.changeLanguage,$n.getFixedT,$n.t,$n.exists,$n.setDefaultNamespace,$n.hasLoadedNamespace,$n.loadNamespaces,$n.loadLanguages;const L4="/";var SE=(t=>(t.PNG="image/png",t.JPG="image/jpeg",t))(SE||{}),vl=(t=>(t.VALUE="value",t.RANGE="range",t))(vl||{}),Ay=(t=>(t.DATEPICKER="datepicker",t.SLIDER="slider",t))(Ay||{});function TE(t,{i18next:e,rerenderOn:n=["languageChanged","loaded","added","removed"]}){const o=e.t.bind(e),s=br(new Date),f=()=>s.value=new Date,a=()=>s.value;n.forEach(E=>{var M;switch(E){case"added":case"removed":(M=e.store)==null||M.on(E,f);break;default:e.on(E,f);break}}),t.component("i18next",D4),t.mixin({beforeCreate(){var E,M;const I=this.$options;if(!I.__i18n&&!I.i18nOptions){this.__translate=void 0;return}const P=this.$options.name,z=(Math.random()*10**8|0).toString(),V=[P,z].filter(ve=>!!ve).join("-");this.__bundles=[];const q=ve=>{Object.entries(ve).forEach(([Ne,ze])=>{e.addResourceBundle(Ne,V,ze,!0,!1),this.__bundles.push([Ne,V])})};(E=I.__i18n)==null||E.forEach(ve=>{q(JSON.parse(ve))});let{lng:re,ns:X,keyPrefix:ae}=b(I,q);(M=this.__bundles)!=null&&M.length&&(X=[V].concat(X!=null?X:[]));const ce=m(re,X);this.__translate=(ve,Ne)=>!ae||g(ve)?ce(ve,Ne):ce(ae+"."+ve,Ne)},unmounted(){var E;(E=this.__bundles)==null||E.forEach(([M,I])=>e.removeResourceBundle(M,I))}}),t.config.globalProperties.$t=function(E,M){var I;return a(),e.isInitialized?((I=this==null?void 0:this.__translate)!=null?I:o)(E,M):E},t.config.globalProperties.$i18next=new Proxy(e,{get(E,M){return a(),Reflect.get(E,M)}});function m(E,M){return E?e.getFixedT(E,M):M?e.getFixedT(null,M):o}function g(E){const M=e.options.nsSeparator;return typeof M=="string"&&E.includes(M)}function b(E,M){let I,P,z;if(E.i18nOptions){let V,q;({lng:I,namespaces:q=e.options.defaultNS,keyPrefix:z,messages:V}=E.i18nOptions),V&&M(V),P=typeof q=="string"?[q]:q,P&&e.loadNamespaces(P)}return{lng:I,ns:P,keyPrefix:z}}}function En(){const t=Km();if(!t)throw new Error("i18next-vue: No Vue instance in context. Make sure to register the i18next-vue plugin using app.use(...).");const e=t.appContext.config.globalProperties;return{i18next:e.$i18next,t:e.$t.bind(t.proxy)}}var ME=new RegExp("{\\s*([a-z0-9\\-]+)\\s*}","gi"),D4=ir({props:{translation:{type:String,required:!0}},setup(t,{slots:e}){return()=>{const n=t.translation,o=[];let s,f=0;for(;(s=ME.exec(n))!==null;){o.push(n.substring(f,s.index));const a=e[s[1]];a?o.push(...a()):o.push(s[0]),f=ME.lastIndex}return o.push(n.substring(f)),o}}});class Sc extends Error{}class N4 extends Sc{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class R4 extends Sc{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class z4 extends Sc{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Bp extends Sc{}class IE extends Sc{constructor(e){super(`Invalid unit ${e}`)}}class Ca extends Sc{}class xu extends Sc{constructor(){super("Zone is an abstract class")}}const Ct="numeric",es="short",ca="long",Py={year:Ct,month:Ct,day:Ct},OE={year:Ct,month:es,day:Ct},F4={year:Ct,month:es,day:Ct,weekday:es},CE={year:Ct,month:ca,day:Ct},AE={year:Ct,month:ca,day:Ct,weekday:ca},PE={hour:Ct,minute:Ct},kE={hour:Ct,minute:Ct,second:Ct},LE={hour:Ct,minute:Ct,second:Ct,timeZoneName:es},DE={hour:Ct,minute:Ct,second:Ct,timeZoneName:ca},NE={hour:Ct,minute:Ct,hourCycle:"h23"},RE={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23"},zE={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23",timeZoneName:es},FE={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23",timeZoneName:ca},BE={year:Ct,month:Ct,day:Ct,hour:Ct,minute:Ct},VE={year:Ct,month:Ct,day:Ct,hour:Ct,minute:Ct,second:Ct},UE={year:Ct,month:es,day:Ct,hour:Ct,minute:Ct},jE={year:Ct,month:es,day:Ct,hour:Ct,minute:Ct,second:Ct},B4={year:Ct,month:es,day:Ct,weekday:es,hour:Ct,minute:Ct},$E={year:Ct,month:ca,day:Ct,hour:Ct,minute:Ct,timeZoneName:es},GE={year:Ct,month:ca,day:Ct,hour:Ct,minute:Ct,second:Ct,timeZoneName:es},qE={year:Ct,month:ca,day:Ct,weekday:ca,hour:Ct,minute:Ct,timeZoneName:ca},WE={year:Ct,month:ca,day:Ct,weekday:ca,hour:Ct,minute:Ct,second:Ct,timeZoneName:ca};class Vp{get type(){throw new xu}get name(){throw new xu}get ianaName(){return this.name}get isUniversal(){throw new xu}offsetName(e,n){throw new xu}formatOffset(e,n){throw new xu}offset(e){throw new xu}equals(e){throw new xu}get isValid(){throw new xu}}let y0=null;class ky extends Vp{static get instance(){return y0===null&&(y0=new ky),y0}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:o}){return nS(e,n,o)}formatOffset(e,n){return Gp(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Ly={};function V4(t){return Ly[t]||(Ly[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Ly[t]}const U4={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function j4(t,e){const n=t.format(e).replace(/\u200E/g,""),o=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,s,f,a,m,g,b,E]=o;return[a,s,f,m,g,b,E]}function $4(t,e){const n=t.formatToParts(e),o=[];for(let s=0;s<n.length;s++){const{type:f,value:a}=n[s],m=U4[f];f==="era"?o[m]=a:Hr(m)||(o[m]=parseInt(a,10))}return o}let Dy={};class _l extends Vp{static create(e){return Dy[e]||(Dy[e]=new _l(e)),Dy[e]}static resetCache(){Dy={},Ly={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=_l.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:o}){return nS(e,n,o,this.name)}formatOffset(e,n){return Gp(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const o=V4(this.name);let[s,f,a,m,g,b,E]=o.formatToParts?$4(o,n):j4(o,n);m==="BC"&&(s=-Math.abs(s)+1);const I=Fy({year:s,month:f,day:a,hour:g===24?0:g,minute:b,second:E,millisecond:0});let P=+n;const z=P%1e3;return P-=z>=0?z:1e3+z,(I-P)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let HE={};function G4(t,e={}){const n=JSON.stringify([t,e]);let o=HE[n];return o||(o=new Intl.ListFormat(t,e),HE[n]=o),o}let g0={};function v0(t,e={}){const n=JSON.stringify([t,e]);let o=g0[n];return o||(o=new Intl.DateTimeFormat(t,e),g0[n]=o),o}let _0={};function q4(t,e={}){const n=JSON.stringify([t,e]);let o=_0[n];return o||(o=new Intl.NumberFormat(t,e),_0[n]=o),o}let x0={};function W4(t,e={}){const{base:n,...o}=e,s=JSON.stringify([t,o]);let f=x0[s];return f||(f=new Intl.RelativeTimeFormat(t,e),x0[s]=f),f}let Up=null;function H4(){return Up||(Up=new Intl.DateTimeFormat().resolvedOptions().locale,Up)}function Z4(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let o,s;try{o=v0(t).resolvedOptions(),s=t}catch{const g=t.substring(0,n);o=v0(g).resolvedOptions(),s=g}const{numberingSystem:f,calendar:a}=o;return[s,f,a]}}function X4(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function K4(t){const e=[];for(let n=1;n<=12;n++){const o=wr.utc(2009,n,1);e.push(t(o))}return e}function Y4(t){const e=[];for(let n=1;n<=7;n++){const o=wr.utc(2016,11,13+n);e.push(t(o))}return e}function Ny(t,e,n,o){const s=t.listingMode();return s==="error"?null:s==="en"?n(e):o(e)}function J4(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class Q4{constructor(e,n,o){this.padTo=o.padTo||0,this.floor=o.floor||!1;const{padTo:s,floor:f,...a}=o;if(!n||Object.keys(a).length>0){const m={useGrouping:!1,...o};o.padTo>0&&(m.minimumIntegerDigits=o.padTo),this.inf=q4(e,m)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):E0(e,3);return Oi(n,this.padTo)}}}class e5{constructor(e,n,o){this.opts=o,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const a=-1*(e.offset/60),m=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;e.offset!==0&&_l.create(m).valid?(s=m,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const f={...this.opts};f.timeZone=f.timeZone||s,this.dtf=v0(n,f)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const o=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:o}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class t5{constructor(e,n,o){this.opts={style:"long",...o},!n&&tS()&&(this.rtf=W4(e,o))}format(e,n){return this.rtf?this.rtf.format(e,n):_5(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}class Dn{static fromOpts(e){return Dn.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,n,o,s=!1){const f=e||Ii.defaultLocale,a=f||(s?"en-US":H4()),m=n||Ii.defaultNumberingSystem,g=o||Ii.defaultOutputCalendar;return new Dn(a,m,g,f)}static resetCache(){Up=null,g0={},_0={},x0={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:o}={}){return Dn.create(e,n,o)}constructor(e,n,o,s){const[f,a,m]=Z4(e);this.locale=f,this.numberingSystem=n||a||null,this.outputCalendar=o||m||null,this.intl=X4(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=J4(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Dn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return Ny(this,e,aS,()=>{const o=n?{month:e,day:"numeric"}:{month:e},s=n?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=K4(f=>this.extract(f,o,"month"))),this.monthsCache[s][e]})}weekdays(e,n=!1){return Ny(this,e,uS,()=>{const o=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=n?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=Y4(f=>this.extract(f,o,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return Ny(this,void 0,()=>cS,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[wr.utc(2016,11,13,9),wr.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Ny(this,e,hS,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[wr.utc(-40,1,1),wr.utc(2017,1,1)].map(o=>this.extract(o,n,"era"))),this.eraCache[e]})}extract(e,n,o){const s=this.dtFormatter(e,n),f=s.formatToParts(),a=f.find(m=>m.type.toLowerCase()===o);return a?a.value:null}numberFormatter(e={}){return new Q4(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new e5(e,this.intl,n)}relFormatter(e={}){return new t5(this.intl,this.isEnglish(),e)}listFormatter(e={}){return G4(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let b0=null;class Ro extends Vp{static get utcInstance(){return b0===null&&(b0=new Ro(0)),b0}static instance(e){return e===0?Ro.utcInstance:new Ro(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Ro(Vy(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Gp(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Gp(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return Gp(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class r5 extends Vp{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function bu(t,e){if(Hr(t)||t===null)return e;if(t instanceof Vp)return t;if(n5(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?ky.instance:n==="utc"||n==="gmt"?Ro.utcInstance:Ro.parseSpecifier(n)||_l.create(t)}else return Tc(t)?Ro.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new r5(t)}let ZE=()=>Date.now(),XE="system",KE=null,YE=null,JE=null,QE=60,eS;class Ii{static get now(){return ZE}static set now(e){ZE=e}static set defaultZone(e){XE=e}static get defaultZone(){return bu(XE,ky.instance)}static get defaultLocale(){return KE}static set defaultLocale(e){KE=e}static get defaultNumberingSystem(){return YE}static set defaultNumberingSystem(e){YE=e}static get defaultOutputCalendar(){return JE}static set defaultOutputCalendar(e){JE=e}static get twoDigitCutoffYear(){return QE}static set twoDigitCutoffYear(e){QE=e%100}static get throwOnInvalid(){return eS}static set throwOnInvalid(e){eS=e}static resetCaches(){Dn.resetCache(),_l.resetCache()}}function Hr(t){return typeof t>"u"}function Tc(t){return typeof t=="number"}function Ry(t){return typeof t=="number"&&t%1===0}function n5(t){return typeof t=="string"}function i5(t){return Object.prototype.toString.call(t)==="[object Date]"}function tS(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function o5(t){return Array.isArray(t)?t:[t]}function rS(t,e,n){if(t.length!==0)return t.reduce((o,s)=>{const f=[e(s),s];return o&&n(o[0],f[0])===o[0]?o:f},null)[1]}function a5(t,e){return e.reduce((n,o)=>(n[o]=t[o],n),{})}function Fh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function xl(t,e,n){return Ry(t)&&t>=e&&t<=n}function s5(t,e){return t-e*Math.floor(t/e)}function Oi(t,e=2){const n=t<0;let o;return n?o="-"+(""+-t).padStart(e,"0"):o=(""+t).padStart(e,"0"),o}function wu(t){if(!(Hr(t)||t===null||t===""))return parseInt(t,10)}function Mc(t){if(!(Hr(t)||t===null||t===""))return parseFloat(t)}function w0(t){if(!(Hr(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function l5(t){return t>0?Math.floor(t):Math.ceil(t)}function E0(t,e,n=!1){const o=10**e;return(n?Math.trunc:Math.round)(t*o)/o}function jp(t){return t%4===0&&(t%100!==0||t%400===0)}function $p(t){return jp(t)?366:365}function zy(t,e){const n=s5(e-1,12)+1,o=t+(e-n)/12;return n===2?jp(o)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Fy(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function By(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,n=t-1,o=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return e===4||o===3?53:52}function S0(t){return t>99?t:t>Ii.twoDigitCutoffYear?1900+t:2e3+t}function nS(t,e,n,o=null){const s=new Date(t),f={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};o&&(f.timeZone=o);const a={timeZoneName:e,...f},m=new Intl.DateTimeFormat(n,a).formatToParts(s).find(g=>g.type.toLowerCase()==="timezonename");return m?m.value:null}function Vy(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const o=parseInt(e,10)||0,s=n<0||Object.is(n,-0)?-o:o;return n*60+s}function iS(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Ca(`Invalid unit value ${t}`);return e}function Uy(t,e){const n={};for(const o in t)if(Fh(t,o)){const s=t[o];if(s==null)continue;n[e(o)]=iS(s)}return n}function Gp(t,e){const n=Math.trunc(Math.abs(t/60)),o=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${Oi(n,2)}:${Oi(o,2)}`;case"narrow":return`${s}${n}${o>0?`:${o}`:""}`;case"techie":return`${s}${Oi(n,2)}${Oi(o,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function jy(t){return a5(t,["hour","minute","second","millisecond"])}const u5=["January","February","March","April","May","June","July","August","September","October","November","December"],oS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c5=["J","F","M","A","M","J","J","A","S","O","N","D"];function aS(t){switch(t){case"narrow":return[...c5];case"short":return[...oS];case"long":return[...u5];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const sS=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],lS=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],h5=["M","T","W","T","F","S","S"];function uS(t){switch(t){case"narrow":return[...h5];case"short":return[...lS];case"long":return[...sS];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const cS=["AM","PM"],f5=["Before Christ","Anno Domini"],p5=["BC","AD"],d5=["B","A"];function hS(t){switch(t){case"narrow":return[...d5];case"short":return[...p5];case"long":return[...f5];default:return null}}function m5(t){return cS[t.hour<12?0:1]}function y5(t,e){return uS(e)[t.weekday-1]}function g5(t,e){return aS(e)[t.month-1]}function v5(t,e){return hS(e)[t.year<0?0:1]}function _5(t,e,n="always",o=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},f=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&f){const M=t==="days";switch(e){case 1:return M?"tomorrow":`next ${s[t][0]}`;case-1:return M?"yesterday":`last ${s[t][0]}`;case 0:return M?"today":`this ${s[t][0]}`}}const a=Object.is(e,-0)||e<0,m=Math.abs(e),g=m===1,b=s[t],E=o?g?b[1]:b[2]||b[1]:g?s[t][0]:t;return a?`${m} ${E} ago`:`in ${m} ${E}`}function fS(t,e){let n="";for(const o of t)o.literal?n+=o.val:n+=e(o.val);return n}const x5={D:Py,DD:OE,DDD:CE,DDDD:AE,t:PE,tt:kE,ttt:LE,tttt:DE,T:NE,TT:RE,TTT:zE,TTTT:FE,f:BE,ff:UE,fff:$E,ffff:qE,F:VE,FF:jE,FFF:GE,FFFF:WE};class mo{static create(e,n={}){return new mo(e,n)}static parseFormat(e){let n=null,o="",s=!1;const f=[];for(let a=0;a<e.length;a++){const m=e.charAt(a);m==="'"?(o.length>0&&f.push({literal:s||/^\s+$/.test(o),val:o}),n=null,o="",s=!s):s||m===n?o+=m:(o.length>0&&f.push({literal:/^\s+$/.test(o),val:o}),o=m,n=m)}return o.length>0&&f.push({literal:s||/^\s+$/.test(o),val:o}),f}static macroTokenToFormatOpts(e){return x5[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Oi(e,n);const o={...this.opts};return n>0&&(o.padTo=n),this.loc.numberFormatter(o).format(e)}formatDateTimeFromString(e,n){const o=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",f=(P,z)=>this.loc.extract(e,P,z),a=P=>e.isOffsetFixed&&e.offset===0&&P.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,P.format):"",m=()=>o?m5(e):f({hour:"numeric",hourCycle:"h12"},"dayperiod"),g=(P,z)=>o?g5(e,P):f(z?{month:P}:{month:P,day:"numeric"},"month"),b=(P,z)=>o?y5(e,P):f(z?{weekday:P}:{weekday:P,month:"long",day:"numeric"},"weekday"),E=P=>{const z=mo.macroTokenToFormatOpts(P);return z?this.formatWithSystemDefault(e,z):P},M=P=>o?v5(e,P):f({era:P},"era"),I=P=>{switch(P){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return m();case"d":return s?f({day:"numeric"},"day"):this.num(e.day);case"dd":return s?f({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return b("short",!0);case"cccc":return b("long",!0);case"ccccc":return b("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return b("short",!1);case"EEEE":return b("long",!1);case"EEEEE":return b("narrow",!1);case"L":return s?f({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?f({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return g("short",!0);case"LLLL":return g("long",!0);case"LLLLL":return g("narrow",!0);case"M":return s?f({month:"numeric"},"month"):this.num(e.month);case"MM":return s?f({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return g("short",!1);case"MMMM":return g("long",!1);case"MMMMM":return g("narrow",!1);case"y":return s?f({year:"numeric"},"year"):this.num(e.year);case"yy":return s?f({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?f({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?f({year:"numeric"},"year"):this.num(e.year,6);case"G":return M("short");case"GG":return M("long");case"GGGGG":return M("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return E(P)}};return fS(mo.parseFormat(n),I)}formatDurationFromString(e,n){const o=g=>{switch(g[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=g=>b=>{const E=o(b);return E?this.num(g.get(E),b.length):b},f=mo.parseFormat(n),a=f.reduce((g,{literal:b,val:E})=>b?g:g.concat(E),[]),m=e.shiftTo(...a.map(o).filter(g=>g));return fS(f,s(m))}}class ts{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const pS=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Bh(...t){const e=t.reduce((n,o)=>n+o.source,"");return RegExp(`^${e}$`)}function Vh(...t){return e=>t.reduce(([n,o,s],f)=>{const[a,m,g]=f(e,s);return[{...n,...a},m||o,g]},[{},null,1]).slice(0,2)}function Uh(t,...e){if(t==null)return[null,null];for(const[n,o]of e){const s=n.exec(t);if(s)return o(s)}return[null,null]}function dS(...t){return(e,n)=>{const o={};let s;for(s=0;s<t.length;s++)o[t[s]]=wu(e[n+s]);return[o,null,n+s]}}const mS=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,b5=`(?:${mS.source}?(?:\\[(${pS.source})\\])?)?`,T0=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,yS=RegExp(`${T0.source}${b5}`),M0=RegExp(`(?:T${yS.source})?`),w5=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,E5=/(\d{4})-?W(\d\d)(?:-?(\d))?/,S5=/(\d{4})-?(\d{3})/,T5=dS("weekYear","weekNumber","weekDay"),M5=dS("year","ordinal"),I5=/(\d{4})-(\d\d)-(\d\d)/,gS=RegExp(`${T0.source} ?(?:${mS.source}|(${pS.source}))?`),O5=RegExp(`(?: ${gS.source})?`);function jh(t,e,n){const o=t[e];return Hr(o)?n:wu(o)}function C5(t,e){return[{year:jh(t,e),month:jh(t,e+1,1),day:jh(t,e+2,1)},null,e+3]}function $h(t,e){return[{hours:jh(t,e,0),minutes:jh(t,e+1,0),seconds:jh(t,e+2,0),milliseconds:w0(t[e+3])},null,e+4]}function qp(t,e){const n=!t[e]&&!t[e+1],o=Vy(t[e+1],t[e+2]),s=n?null:Ro.instance(o);return[{},s,e+3]}function Wp(t,e){const n=t[e]?_l.create(t[e]):null;return[{},n,e+1]}const A5=RegExp(`^T?${T0.source}$`),P5=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function k5(t){const[e,n,o,s,f,a,m,g,b]=t,E=e[0]==="-",M=g&&g[0]==="-",I=(P,z=!1)=>P!==void 0&&(z||P&&E)?-P:P;return[{years:I(Mc(n)),months:I(Mc(o)),weeks:I(Mc(s)),days:I(Mc(f)),hours:I(Mc(a)),minutes:I(Mc(m)),seconds:I(Mc(g),g==="-0"),milliseconds:I(w0(b),M)}]}const L5={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function I0(t,e,n,o,s,f,a){const m={year:e.length===2?S0(wu(e)):wu(e),month:oS.indexOf(n)+1,day:wu(o),hour:wu(s),minute:wu(f)};return a&&(m.second=wu(a)),t&&(m.weekday=t.length>3?sS.indexOf(t)+1:lS.indexOf(t)+1),m}const D5=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function N5(t){const[,e,n,o,s,f,a,m,g,b,E,M]=t,I=I0(e,s,o,n,f,a,m);let P;return g?P=L5[g]:b?P=0:P=Vy(E,M),[I,new Ro(P)]}function R5(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const z5=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,F5=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,B5=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function vS(t){const[,e,n,o,s,f,a,m]=t;return[I0(e,s,o,n,f,a,m),Ro.utcInstance]}function V5(t){const[,e,n,o,s,f,a,m]=t;return[I0(e,m,n,o,s,f,a),Ro.utcInstance]}const U5=Bh(w5,M0),j5=Bh(E5,M0),$5=Bh(S5,M0),G5=Bh(yS),_S=Vh(C5,$h,qp,Wp),q5=Vh(T5,$h,qp,Wp),W5=Vh(M5,$h,qp,Wp),H5=Vh($h,qp,Wp);function Z5(t){return Uh(t,[U5,_S],[j5,q5],[$5,W5],[G5,H5])}function X5(t){return Uh(R5(t),[D5,N5])}function K5(t){return Uh(t,[z5,vS],[F5,vS],[B5,V5])}function Y5(t){return Uh(t,[P5,k5])}const J5=Vh($h);function Q5(t){return Uh(t,[A5,J5])}const ez=Bh(I5,O5),tz=Bh(gS),rz=Vh($h,qp,Wp);function nz(t){return Uh(t,[ez,_S],[tz,rz])}const xS="Invalid Duration",bS={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},iz={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...bS},Aa=146097/400,Gh=146097/4800,oz={years:{quarters:4,months:12,weeks:Aa/7,days:Aa,hours:Aa*24,minutes:Aa*24*60,seconds:Aa*24*60*60,milliseconds:Aa*24*60*60*1e3},quarters:{months:3,weeks:Aa/28,days:Aa/4,hours:Aa*24/4,minutes:Aa*24*60/4,seconds:Aa*24*60*60/4,milliseconds:Aa*24*60*60*1e3/4},months:{weeks:Gh/7,days:Gh,hours:Gh*24,minutes:Gh*24*60,seconds:Gh*24*60*60,milliseconds:Gh*24*60*60*1e3},...bS},Ic=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],wS=Ic.slice(0).reverse();function Eu(t,e,n=!1){const o={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Xr(o)}function ES(t){return Math.trunc(t*1e3)/1e3}function SS(t,e,n,o,s){const f=t[s][n],a=e[n]/f,m=l5(a);o[s]=ES(o[s]+m),e[n]=ES(e[n]-m*f)}function az(t,e){wS.reduce((n,o)=>Hr(e[o])?n:(n&&SS(t,e,n,e,o),o),null)}function sz(t){const e={};for(const[n,o]of Object.entries(t))o!==0&&(e[n]=o);return e}class Xr{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let o=n?oz:iz;e.matrix&&(o=e.matrix),this.values=e.values,this.loc=e.loc||Dn.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=o,this.isLuxonDuration=!0}static fromMillis(e,n){return Xr.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new Ca(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Xr({values:Uy(e,Xr.normalizeUnit),loc:Dn.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Tc(e))return Xr.fromMillis(e);if(Xr.isDuration(e))return e;if(typeof e=="object")return Xr.fromObject(e);throw new Ca(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[o]=Y5(e);return o?Xr.fromObject(o,n):Xr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[o]=Q5(e);return o?Xr.fromObject(o,n):Xr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new Ca("need to specify a reason the Duration is invalid");const o=e instanceof ts?e:new ts(e,n);if(Ii.throwOnInvalid)throw new z4(o);return new Xr({invalid:o})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new IE(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const o={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?mo.create(this.loc,o).formatDurationFromString(this,e):xS}toHuman(e={}){if(!this.isValid)return xS;const n=Ic.map(o=>{const s=this.values[o];return Hr(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:o.slice(0,-1)}).format(s)}).filter(o=>o);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=E0(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},wr.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){var n;if(!this.isValid)return NaN;let e=(n=this.values.milliseconds)!=null?n:0;for(let o of wS.slice(1))this.values[o]&&(e+=this.values[o]*this.matrix[o].milliseconds);return e}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=Xr.fromDurationLike(e),o={};for(const s of Ic)(Fh(n.values,s)||Fh(this.values,s))&&(o[s]=n.get(s)+this.get(s));return Eu(this,{values:o},!0)}minus(e){if(!this.isValid)return this;const n=Xr.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const o of Object.keys(this.values))n[o]=iS(e(this.values[o],o));return Eu(this,{values:n},!0)}get(e){return this[Xr.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...Uy(e,Xr.normalizeUnit)};return Eu(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:o,matrix:s}={}){const a={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:s,conversionAccuracy:o};return Eu(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return this.valueOf()>=0?(az(this.matrix,e),Eu(this,{values:e},!0)):this.negate().normalize().negate()}rescale(){if(!this.isValid)return this;const e=sz(this.normalize().shiftToAll().toObject());return Eu(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>Xr.normalizeUnit(a));const n={},o={},s=this.toObject();let f;for(const a of Ic)if(e.indexOf(a)>=0){f=a;let m=0;for(const b in o)m+=this.matrix[b][a]*o[b],o[b]=0;Tc(s[a])&&(m+=s[a]);const g=Math.trunc(m);n[a]=g,o[a]=(m*1e3-g*1e3)/1e3;for(const b in s)Ic.indexOf(b)>Ic.indexOf(a)&&SS(this.matrix,s,b,n,a)}else Tc(s[a])&&(o[a]=s[a]);for(const a in o)o[a]!==0&&(n[f]+=a===f?o[a]:o[a]/this.matrix[f][a]);return Eu(this,{values:n},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return Eu(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(o,s){return o===void 0||o===0?s===void 0||s===0:o===s}for(const o of Ic)if(!n(this.values[o],e.values[o]))return!1;return!0}}const qh="Invalid Interval";function lz(t,e){return!t||!t.isValid?li.invalid("missing or invalid start"):!e||!e.isValid?li.invalid("missing or invalid end"):e<t?li.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class li{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new Ca("need to specify a reason the Interval is invalid");const o=e instanceof ts?e:new ts(e,n);if(Ii.throwOnInvalid)throw new R4(o);return new li({invalid:o})}static fromDateTimes(e,n){const o=Zp(e),s=Zp(n),f=lz(o,s);return f==null?new li({start:o,end:s}):f}static after(e,n){const o=Xr.fromDurationLike(n),s=Zp(e);return li.fromDateTimes(s,s.plus(o))}static before(e,n){const o=Xr.fromDurationLike(n),s=Zp(e);return li.fromDateTimes(s.minus(o),s)}static fromISO(e,n){const[o,s]=(e||"").split("/",2);if(o&&s){let f,a;try{f=wr.fromISO(o,n),a=f.isValid}catch{a=!1}let m,g;try{m=wr.fromISO(s,n),g=m.isValid}catch{g=!1}if(a&&g)return li.fromDateTimes(f,m);if(a){const b=Xr.fromISO(s,n);if(b.isValid)return li.after(f,b)}else if(g){const b=Xr.fromISO(o,n);if(b.isValid)return li.before(m,b)}}return li.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const n=this.start.startOf(e),o=this.end.startOf(e);return Math.floor(o.diff(n,e).get(e))+(o.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?li.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(Zp).filter(a=>this.contains(a)).sort(),o=[];let{s}=this,f=0;for(;s<this.e;){const a=n[f]||this.e,m=+a>+this.e?this.e:a;o.push(li.fromDateTimes(s,m)),s=m,f+=1}return o}splitBy(e){const n=Xr.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:o}=this,s=1,f;const a=[];for(;o<this.e;){const m=this.start.plus(n.mapUnits(g=>g*s));f=+m>+this.e?this.e:m,a.push(li.fromDateTimes(o,f)),o=f,s+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,o=this.e<e.e?this.e:e.e;return n>=o?null:li.fromDateTimes(n,o)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,o=this.e>e.e?this.e:e.e;return li.fromDateTimes(n,o)}static merge(e){const[n,o]=e.sort((s,f)=>s.s-f.s).reduce(([s,f],a)=>f?f.overlaps(a)||f.abutsStart(a)?[s,f.union(a)]:[s.concat([f]),a]:[s,a],[[],null]);return o&&n.push(o),n}static xor(e){let n=null,o=0;const s=[],f=e.map(g=>[{time:g.s,type:"s"},{time:g.e,type:"e"}]),a=Array.prototype.concat(...f),m=a.sort((g,b)=>g.time-b.time);for(const g of m)o+=g.type==="s"?1:-1,o===1?n=g.time:(n&&+n!=+g.time&&s.push(li.fromDateTimes(n,g.time)),n=null);return li.merge(s)}difference(...e){return li.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:qh}toLocaleString(e=Py,n={}){return this.isValid?mo.create(this.s.loc.clone(n),e).formatInterval(this):qh}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:qh}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:qh}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:qh}toFormat(e,{separator:n=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:qh}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):Xr.invalid(this.invalidReason)}mapEndpoints(e){return li.fromDateTimes(e(this.s),e(this.e))}}class $y{static hasDST(e=Ii.defaultZone){const n=wr.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return _l.isValidZone(e)}static normalizeZone(e){return bu(e,Ii.defaultZone)}static months(e="long",{locale:n=null,numberingSystem:o=null,locObj:s=null,outputCalendar:f="gregory"}={}){return(s||Dn.create(n,o,f)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:o=null,locObj:s=null,outputCalendar:f="gregory"}={}){return(s||Dn.create(n,o,f)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:o=null,locObj:s=null}={}){return(s||Dn.create(n,o,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:o=null,locObj:s=null}={}){return(s||Dn.create(n,o,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Dn.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Dn.create(n,null,"gregory").eras(e)}static features(){return{relative:tS()}}}function TS(t,e){const n=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),o=n(e)-n(t);return Math.floor(Xr.fromMillis(o).as("days"))}function uz(t,e,n){const o=[["years",(g,b)=>b.year-g.year],["quarters",(g,b)=>b.quarter-g.quarter+(b.year-g.year)*4],["months",(g,b)=>b.month-g.month+(b.year-g.year)*12],["weeks",(g,b)=>{const E=TS(g,b);return(E-E%7)/7}],["days",TS]],s={},f=t;let a,m;for(const[g,b]of o)n.indexOf(g)>=0&&(a=g,s[g]=b(t,e),m=f.plus(s),m>e?(s[g]--,t=f.plus(s),t>e&&(m=t,s[g]--,t=f.plus(s))):t=m);return[t,s,m,a]}function cz(t,e,n,o){let[s,f,a,m]=uz(t,e,n);const g=e-s,b=n.filter(M=>["hours","minutes","seconds","milliseconds"].indexOf(M)>=0);b.length===0&&(a<e&&(a=s.plus({[m]:1})),a!==s&&(f[m]=(f[m]||0)+g/(a-s)));const E=Xr.fromObject(f,o);return b.length>0?Xr.fromMillis(g,o).shiftTo(...b).plus(E):E}const O0={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},MS={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hz=O0.hanidec.replace(/[\[|\]]/g,"").split("");function fz(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const o=t.charCodeAt(n);if(t[n].search(O0.hanidec)!==-1)e+=hz.indexOf(t[n]);else for(const s in MS){const[f,a]=MS[s];o>=f&&o<=a&&(e+=o-f)}}return parseInt(e,10)}else return e}function rs({numberingSystem:t},e=""){return new RegExp(`${O0[t||"latn"]}${e}`)}const pz="missing Intl.DateTimeFormat.formatToParts support";function nn(t,e=n=>n){return{regex:t,deser:([n])=>e(fz(n))}}const IS=`[ ${String.fromCharCode(160)}]`,OS=new RegExp(IS,"g");function dz(t){return t.replace(/\./g,"\\.?").replace(OS,IS)}function CS(t){return t.replace(/\./g,"").replace(OS," ").toLowerCase()}function ns(t,e){return t===null?null:{regex:RegExp(t.map(dz).join("|")),deser:([n])=>t.findIndex(o=>CS(n)===CS(o))+e}}function AS(t,e){return{regex:t,deser:([,n,o])=>Vy(n,o),groups:e}}function Gy(t){return{regex:t,deser:([e])=>e}}function mz(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function yz(t,e){const n=rs(e),o=rs(e,"{2}"),s=rs(e,"{3}"),f=rs(e,"{4}"),a=rs(e,"{6}"),m=rs(e,"{1,2}"),g=rs(e,"{1,3}"),b=rs(e,"{1,6}"),E=rs(e,"{1,9}"),M=rs(e,"{2,4}"),I=rs(e,"{4,6}"),P=q=>({regex:RegExp(mz(q.val)),deser:([re])=>re,literal:!0}),V=(q=>{if(t.literal)return P(q);switch(q.val){case"G":return ns(e.eras("short"),0);case"GG":return ns(e.eras("long"),0);case"y":return nn(b);case"yy":return nn(M,S0);case"yyyy":return nn(f);case"yyyyy":return nn(I);case"yyyyyy":return nn(a);case"M":return nn(m);case"MM":return nn(o);case"MMM":return ns(e.months("short",!0),1);case"MMMM":return ns(e.months("long",!0),1);case"L":return nn(m);case"LL":return nn(o);case"LLL":return ns(e.months("short",!1),1);case"LLLL":return ns(e.months("long",!1),1);case"d":return nn(m);case"dd":return nn(o);case"o":return nn(g);case"ooo":return nn(s);case"HH":return nn(o);case"H":return nn(m);case"hh":return nn(o);case"h":return nn(m);case"mm":return nn(o);case"m":return nn(m);case"q":return nn(m);case"qq":return nn(o);case"s":return nn(m);case"ss":return nn(o);case"S":return nn(g);case"SSS":return nn(s);case"u":return Gy(E);case"uu":return Gy(m);case"uuu":return nn(n);case"a":return ns(e.meridiems(),0);case"kkkk":return nn(f);case"kk":return nn(M,S0);case"W":return nn(m);case"WW":return nn(o);case"E":case"c":return nn(n);case"EEE":return ns(e.weekdays("short",!1),1);case"EEEE":return ns(e.weekdays("long",!1),1);case"ccc":return ns(e.weekdays("short",!0),1);case"cccc":return ns(e.weekdays("long",!0),1);case"Z":case"ZZ":return AS(new RegExp(`([+-]${m.source})(?::(${o.source}))?`),2);case"ZZZ":return AS(new RegExp(`([+-]${m.source})(${o.source})?`),2);case"z":return Gy(/[a-z_+-/]{1,256}?/i);case" ":return Gy(/[^\S\n\r]/);default:return P(q)}})(t)||{invalidReason:pz};return V.token=t,V}const gz={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function vz(t,e,n){const{type:o,value:s}=t;if(o==="literal"){const g=/^\s+$/.test(s);return{literal:!g,val:g?" ":s}}const f=e[o];let a=o;o==="hour"&&(e.hour12!=null?a=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?a="hour12":a="hour24":a=n.hour12?"hour12":"hour24");let m=gz[a];if(typeof m=="object"&&(m=m[f]),m)return{literal:!1,val:m}}function _z(t){return[`^${t.map(n=>n.regex).reduce((n,o)=>`${n}(${o.source})`,"")}$`,t]}function xz(t,e,n){const o=t.match(e);if(o){const s={};let f=1;for(const a in n)if(Fh(n,a)){const m=n[a],g=m.groups?m.groups+1:1;!m.literal&&m.token&&(s[m.token.val[0]]=m.deser(o.slice(f,f+g))),f+=g}return[o,s]}else return[o,{}]}function bz(t){const e=f=>{switch(f){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,o;return Hr(t.z)||(n=_l.create(t.z)),Hr(t.Z)||(n||(n=new Ro(t.Z)),o=t.Z),Hr(t.q)||(t.M=(t.q-1)*3+1),Hr(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Hr(t.u)||(t.S=w0(t.u)),[Object.keys(t).reduce((f,a)=>{const m=e(a);return m&&(f[m]=t[a]),f},{}),n,o]}let C0=null;function wz(){return C0||(C0=wr.fromMillis(1555555555555)),C0}function Ez(t,e){if(t.literal)return t;const n=mo.macroTokenToFormatOpts(t.val),o=LS(n,e);return o==null||o.includes(void 0)?t:o}function PS(t,e){return Array.prototype.concat(...t.map(n=>Ez(n,e)))}function kS(t,e,n){const o=PS(mo.parseFormat(n),t),s=o.map(a=>yz(a,t)),f=s.find(a=>a.invalidReason);if(f)return{input:e,tokens:o,invalidReason:f.invalidReason};{const[a,m]=_z(s),g=RegExp(a,"i"),[b,E]=xz(e,g,m),[M,I,P]=E?bz(E):[null,null,void 0];if(Fh(E,"a")&&Fh(E,"H"))throw new Bp("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:o,regex:g,rawMatches:b,matches:E,result:M,zone:I,specificOffset:P}}}function Sz(t,e,n){const{result:o,zone:s,specificOffset:f,invalidReason:a}=kS(t,e,n);return[o,s,f,a]}function LS(t,e){if(!t)return null;const o=mo.create(e,t).dtFormatter(wz()),s=o.formatToParts(),f=o.resolvedOptions();return s.map(a=>vz(a,t,f))}const DS=[0,31,59,90,120,151,181,212,243,273,304,334],NS=[0,31,60,91,121,152,182,213,244,274,305,335];function Pa(t,e){return new ts("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function RS(t,e,n){const o=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&o.setUTCFullYear(o.getUTCFullYear()-1900);const s=o.getUTCDay();return s===0?7:s}function zS(t,e,n){return n+(jp(t)?NS:DS)[e-1]}function FS(t,e){const n=jp(t)?NS:DS,o=n.findIndex(f=>f<e),s=e-n[o];return{month:o+1,day:s}}function A0(t){const{year:e,month:n,day:o}=t,s=zS(e,n,o),f=RS(e,n,o);let a=Math.floor((s-f+10)/7),m;return a<1?(m=e-1,a=By(m)):a>By(e)?(m=e+1,a=1):m=e,{weekYear:m,weekNumber:a,weekday:f,...jy(t)}}function BS(t){const{weekYear:e,weekNumber:n,weekday:o}=t,s=RS(e,1,4),f=$p(e);let a=n*7+o-s-3,m;a<1?(m=e-1,a+=$p(m)):a>f?(m=e+1,a-=$p(e)):m=e;const{month:g,day:b}=FS(m,a);return{year:m,month:g,day:b,...jy(t)}}function P0(t){const{year:e,month:n,day:o}=t,s=zS(e,n,o);return{year:e,ordinal:s,...jy(t)}}function VS(t){const{year:e,ordinal:n}=t,{month:o,day:s}=FS(e,n);return{year:e,month:o,day:s,...jy(t)}}function Tz(t){const e=Ry(t.weekYear),n=xl(t.weekNumber,1,By(t.weekYear)),o=xl(t.weekday,1,7);return e?n?o?!1:Pa("weekday",t.weekday):Pa("week",t.week):Pa("weekYear",t.weekYear)}function Mz(t){const e=Ry(t.year),n=xl(t.ordinal,1,$p(t.year));return e?n?!1:Pa("ordinal",t.ordinal):Pa("year",t.year)}function US(t){const e=Ry(t.year),n=xl(t.month,1,12),o=xl(t.day,1,zy(t.year,t.month));return e?n?o?!1:Pa("day",t.day):Pa("month",t.month):Pa("year",t.year)}function jS(t){const{hour:e,minute:n,second:o,millisecond:s}=t,f=xl(e,0,23)||e===24&&n===0&&o===0&&s===0,a=xl(n,0,59),m=xl(o,0,59),g=xl(s,0,999);return f?a?m?g?!1:Pa("millisecond",s):Pa("second",o):Pa("minute",n):Pa("hour",e)}const k0="Invalid DateTime",$S=864e13;function qy(t){return new ts("unsupported zone",`the zone "${t.name}" is not supported`)}function L0(t){return t.weekData===null&&(t.weekData=A0(t.c)),t.weekData}function Oc(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new wr({...n,...e,old:n})}function GS(t,e,n){let o=t-e*60*1e3;const s=n.offset(o);if(e===s)return[o,e];o-=(s-e)*60*1e3;const f=n.offset(o);return s===f?[o,s]:[t-Math.min(s,f)*60*1e3,Math.max(s,f)]}function Wy(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Hy(t,e,n){return GS(Fy(t),e,n)}function qS(t,e){const n=t.o,o=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,f={...t.c,year:o,month:s,day:Math.min(t.c.day,zy(o,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},a=Xr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),m=Fy(f);let[g,b]=GS(m,n,t.zone);return a!==0&&(g+=a,b=t.zone.offset(g)),{ts:g,o:b}}function Hp(t,e,n,o,s,f){const{setZone:a,zone:m}=n;if(t&&Object.keys(t).length!==0||e){const g=e||m,b=wr.fromObject(t,{...n,zone:g,specificOffset:f});return a?b:b.setZone(m)}else return wr.invalid(new ts("unparsable",`the input "${s}" can't be parsed as ${o}`))}function Zy(t,e,n=!0){return t.isValid?mo.create(Dn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function D0(t,e){const n=t.c.year>9999||t.c.year<0;let o="";return n&&t.c.year>=0&&(o+="+"),o+=Oi(t.c.year,n?6:4),e?(o+="-",o+=Oi(t.c.month),o+="-",o+=Oi(t.c.day)):(o+=Oi(t.c.month),o+=Oi(t.c.day)),o}function WS(t,e,n,o,s,f){let a=Oi(t.c.hour);return e?(a+=":",a+=Oi(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(a+=":")):a+=Oi(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(a+=Oi(t.c.second),(t.c.millisecond!==0||!o)&&(a+=".",a+=Oi(t.c.millisecond,3))),s&&(t.isOffsetFixed&&t.offset===0&&!f?a+="Z":t.o<0?(a+="-",a+=Oi(Math.trunc(-t.o/60)),a+=":",a+=Oi(Math.trunc(-t.o%60))):(a+="+",a+=Oi(Math.trunc(t.o/60)),a+=":",a+=Oi(Math.trunc(t.o%60)))),f&&(a+="["+t.zone.ianaName+"]"),a}const HS={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Iz={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Oz={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ZS=["year","month","day","hour","minute","second","millisecond"],Cz=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Az=["year","ordinal","hour","minute","second","millisecond"];function XS(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new IE(t);return e}function KS(t,e){const n=bu(e.zone,Ii.defaultZone),o=Dn.fromObject(e),s=Ii.now();let f,a;if(Hr(t.year))f=s;else{for(const b of ZS)Hr(t[b])&&(t[b]=HS[b]);const m=US(t)||jS(t);if(m)return wr.invalid(m);const g=n.offset(s);[f,a]=Hy(t,g,n)}return new wr({ts:f,zone:n,loc:o,o:a})}function YS(t,e,n){const o=Hr(n.round)?!0:n.round,s=(a,m)=>(a=E0(a,o||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(a,m)),f=a=>n.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(n.unit)return s(f(n.unit),n.unit);for(const a of n.units){const m=f(a);if(Math.abs(m)>=1)return s(m,a)}return s(t>e?-0:0,n.units[n.units.length-1])}function JS(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}class wr{constructor(e){const n=e.zone||Ii.defaultZone;let o=e.invalid||(Number.isNaN(e.ts)?new ts("invalid input"):null)||(n.isValid?null:qy(n));this.ts=Hr(e.ts)?Ii.now():e.ts;let s=null,f=null;if(!o)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[s,f]=[e.old.c,e.old.o];else{const m=n.offset(this.ts);s=Wy(this.ts,m),o=Number.isNaN(s.year)?new ts("invalid input"):null,s=o?null:s,f=o?null:m}this._zone=n,this.loc=e.loc||Dn.create(),this.invalid=o,this.weekData=null,this.c=s,this.o=f,this.isLuxonDateTime=!0}static now(){return new wr({})}static local(){const[e,n]=JS(arguments),[o,s,f,a,m,g,b]=n;return KS({year:o,month:s,day:f,hour:a,minute:m,second:g,millisecond:b},e)}static utc(){const[e,n]=JS(arguments),[o,s,f,a,m,g,b]=n;return e.zone=Ro.utcInstance,KS({year:o,month:s,day:f,hour:a,minute:m,second:g,millisecond:b},e)}static fromJSDate(e,n={}){const o=i5(e)?e.valueOf():NaN;if(Number.isNaN(o))return wr.invalid("invalid input");const s=bu(n.zone,Ii.defaultZone);return s.isValid?new wr({ts:o,zone:s,loc:Dn.fromObject(n)}):wr.invalid(qy(s))}static fromMillis(e,n={}){if(Tc(e))return e<-$S||e>$S?wr.invalid("Timestamp out of range"):new wr({ts:e,zone:bu(n.zone,Ii.defaultZone),loc:Dn.fromObject(n)});throw new Ca(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Tc(e))return new wr({ts:e*1e3,zone:bu(n.zone,Ii.defaultZone),loc:Dn.fromObject(n)});throw new Ca("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const o=bu(n.zone,Ii.defaultZone);if(!o.isValid)return wr.invalid(qy(o));const s=Ii.now(),f=Hr(n.specificOffset)?o.offset(s):n.specificOffset,a=Uy(e,XS),m=!Hr(a.ordinal),g=!Hr(a.year),b=!Hr(a.month)||!Hr(a.day),E=g||b,M=a.weekYear||a.weekNumber,I=Dn.fromObject(n);if((E||m)&&M)throw new Bp("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&m)throw new Bp("Can't mix ordinal dates with month/day");const P=M||a.weekday&&!E;let z,V,q=Wy(s,f);P?(z=Cz,V=Iz,q=A0(q)):m?(z=Az,V=Oz,q=P0(q)):(z=ZS,V=HS);let re=!1;for(const Pe of z){const Se=a[Pe];Hr(Se)?re?a[Pe]=V[Pe]:a[Pe]=q[Pe]:re=!0}const X=P?Tz(a):m?Mz(a):US(a),ae=X||jS(a);if(ae)return wr.invalid(ae);const ce=P?BS(a):m?VS(a):a,[ve,Ne]=Hy(ce,f,o),ze=new wr({ts:ve,zone:o,o:Ne,loc:I});return a.weekday&&E&&e.weekday!==ze.weekday?wr.invalid("mismatched weekday",`you can't specify both a weekday of ${a.weekday} and a date of ${ze.toISO()}`):ze}static fromISO(e,n={}){const[o,s]=Z5(e);return Hp(o,s,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[o,s]=X5(e);return Hp(o,s,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[o,s]=K5(e);return Hp(o,s,n,"HTTP",n)}static fromFormat(e,n,o={}){if(Hr(e)||Hr(n))throw new Ca("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:f=null}=o,a=Dn.fromOpts({locale:s,numberingSystem:f,defaultToEN:!0}),[m,g,b,E]=Sz(a,e,n);return E?wr.invalid(E):Hp(m,g,o,`format ${n}`,e,b)}static fromString(e,n,o={}){return wr.fromFormat(e,n,o)}static fromSQL(e,n={}){const[o,s]=nz(e);return Hp(o,s,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new Ca("need to specify a reason the DateTime is invalid");const o=e instanceof ts?e:new ts(e,n);if(Ii.throwOnInvalid)throw new N4(o);return new wr({invalid:o})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const o=LS(e,Dn.fromObject(n));return o?o.map(s=>s?s.val:null).join(""):null}static expandFormat(e,n={}){return PS(mo.parseFormat(e),Dn.fromObject(n)).map(s=>s.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?L0(this).weekYear:NaN}get weekNumber(){return this.isValid?L0(this).weekNumber:NaN}get weekday(){return this.isValid?L0(this).weekday:NaN}get ordinal(){return this.isValid?P0(this.c).ordinal:NaN}get monthShort(){return this.isValid?$y.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?$y.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?$y.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?$y.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,o=Fy(this.c),s=this.zone.offset(o-e),f=this.zone.offset(o+e),a=this.zone.offset(o-s*n),m=this.zone.offset(o-f*n);if(a===m)return[this];const g=o-a*n,b=o-m*n,E=Wy(g,a),M=Wy(b,m);return E.hour===M.hour&&E.minute===M.minute&&E.second===M.second&&E.millisecond===M.millisecond?[Oc(this,{ts:g}),Oc(this,{ts:b})]:[this]}get isInLeapYear(){return jp(this.year)}get daysInMonth(){return zy(this.year,this.month)}get daysInYear(){return this.isValid?$p(this.year):NaN}get weeksInWeekYear(){return this.isValid?By(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:o,calendar:s}=mo.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:o,outputCalendar:s}}toUTC(e=0,n={}){return this.setZone(Ro.instance(e),n)}toLocal(){return this.setZone(Ii.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:o=!1}={}){if(e=bu(e,Ii.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(n||o){const f=e.offset(this.ts),a=this.toObject();[s]=Hy(a,f,e)}return Oc(this,{ts:s,zone:e})}else return wr.invalid(qy(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:o}={}){const s=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:o});return Oc(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=Uy(e,XS),o=!Hr(n.weekYear)||!Hr(n.weekNumber)||!Hr(n.weekday),s=!Hr(n.ordinal),f=!Hr(n.year),a=!Hr(n.month)||!Hr(n.day),m=f||a,g=n.weekYear||n.weekNumber;if((m||s)&&g)throw new Bp("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&s)throw new Bp("Can't mix ordinal dates with month/day");let b;o?b=BS({...A0(this.c),...n}):Hr(n.ordinal)?(b={...this.toObject(),...n},Hr(n.day)&&(b.day=Math.min(zy(b.year,b.month),b.day))):b=VS({...P0(this.c),...n});const[E,M]=Hy(b,this.o,this.zone);return Oc(this,{ts:E,o:M})}plus(e){if(!this.isValid)return this;const n=Xr.fromDurationLike(e);return Oc(this,qS(this,n))}minus(e){if(!this.isValid)return this;const n=Xr.fromDurationLike(e).negate();return Oc(this,qS(this,n))}startOf(e){if(!this.isValid)return this;const n={},o=Xr.normalizeUnit(e);switch(o){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(o==="weeks"&&(n.weekday=1),o==="quarters"){const s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,n={}){return this.isValid?mo.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):k0}toLocaleString(e=Py,n={}){return this.isValid?mo.create(this.loc.clone(n),e).formatDateTime(this):k0}toLocaleParts(e={}){return this.isValid?mo.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:o=!1,includeOffset:s=!0,extendedZone:f=!1}={}){if(!this.isValid)return null;const a=e==="extended";let m=D0(this,a);return m+="T",m+=WS(this,a,n,o,s,f),m}toISODate({format:e="extended"}={}){return this.isValid?D0(this,e==="extended"):null}toISOWeekDate(){return Zy(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:o=!0,includePrefix:s=!1,extendedZone:f=!1,format:a="extended"}={}){return this.isValid?(s?"T":"")+WS(this,a==="extended",n,e,o,f):null}toRFC2822(){return Zy(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Zy(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?D0(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:o=!0}={}){let s="HH:mm:ss.SSS";return(n||e)&&(o&&(s+=" "),n?s+="z":e&&(s+="ZZ")),Zy(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():k0}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",o={}){if(!this.isValid||!e.isValid)return Xr.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...o},f=o5(n).map(Xr.normalizeUnit),a=e.valueOf()>this.valueOf(),m=a?this:e,g=a?e:this,b=cz(m,g,f,s);return a?b.negate():b}diffNow(e="milliseconds",n={}){return this.diff(wr.now(),e,n)}until(e){return this.isValid?li.fromDateTimes(this,e):this}hasSame(e,n){if(!this.isValid)return!1;const o=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n)<=o&&o<=s.endOf(n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||wr.fromObject({},{zone:this.zone}),o=e.padding?this<n?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],f=e.unit;return Array.isArray(e.unit)&&(s=e.unit,f=void 0),YS(n,this.plus(o),{...e,numeric:"always",units:s,unit:f})}toRelativeCalendar(e={}){return this.isValid?YS(e.base||wr.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(wr.isDateTime))throw new Ca("min requires all arguments be DateTimes");return rS(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(wr.isDateTime))throw new Ca("max requires all arguments be DateTimes");return rS(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,o={}){const{locale:s=null,numberingSystem:f=null}=o,a=Dn.fromOpts({locale:s,numberingSystem:f,defaultToEN:!0});return kS(a,e,n)}static fromStringExplain(e,n,o={}){return wr.fromFormatExplain(e,n,o)}static get DATE_SHORT(){return Py}static get DATE_MED(){return OE}static get DATE_MED_WITH_WEEKDAY(){return F4}static get DATE_FULL(){return CE}static get DATE_HUGE(){return AE}static get TIME_SIMPLE(){return PE}static get TIME_WITH_SECONDS(){return kE}static get TIME_WITH_SHORT_OFFSET(){return LE}static get TIME_WITH_LONG_OFFSET(){return DE}static get TIME_24_SIMPLE(){return NE}static get TIME_24_WITH_SECONDS(){return RE}static get TIME_24_WITH_SHORT_OFFSET(){return zE}static get TIME_24_WITH_LONG_OFFSET(){return FE}static get DATETIME_SHORT(){return BE}static get DATETIME_SHORT_WITH_SECONDS(){return VE}static get DATETIME_MED(){return UE}static get DATETIME_MED_WITH_SECONDS(){return jE}static get DATETIME_MED_WITH_WEEKDAY(){return B4}static get DATETIME_FULL(){return $E}static get DATETIME_FULL_WITH_SECONDS(){return GE}static get DATETIME_HUGE(){return qE}static get DATETIME_HUGE_WITH_SECONDS(){return WE}}function Zp(t){if(wr.isDateTime(t))return t;if(t&&t.valueOf&&Tc(t.valueOf()))return wr.fromJSDate(t);if(t&&typeof t=="object")return wr.fromObject(t);throw new Ca(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const QS=[0,1,0,0];function eT(t,e="second",n,o){const{t:s}=En(),f=new Date(t).toISOString(),a={year:s("yyyy"),month:s("M/yyyy"),day:s("M/d/yyyy"),second:s("M/d/yyyy HH:mm:ss")},g=(n?{year:"yyyy",month:"yyyy-MM",day:"yyyy-MM-dd",second:void 0}:a)[e];return g?wr.fromISO(f).toFormat(`${o?"UTC:":""}${g}`):f.replace(/\.\d{3}/,"")}function N0(t){return new Date(t).toISOString().split(".")[0]+"Z"}function R0(t){return wr.fromISO(t).toFormat("yyyy-MM-dd")}function Pz(t,e){return t<=e.minValue?e.minValue:t>=e.maxValue?e.maxValue:e.timeValueList?kz(t,e):Lz(t,e)}function kz(t,e){var g;const n=(g=e.timeValueList)!=null?g:[];let o,s=0,f=n.length-1;for(;f-s>1;)o=Math.floor((s+f)/2),n[o]>=t?f=o:s=o;const a=Math.abs(n[s]-t),m=Math.abs(n[f]-t);return n[a<m?s:f]}function Lz(t,e){var g;const n=(g=e.timeInterval)!=null?g:QS,o=new Date(t).getTime(),s=new Date(e.minValue),f=e.maxValue;let a=e.minValue,m=Math.abs(o-a);for(let b=1;;b++){const E=new Date(s.getTime());if(E.setFullYear(s.getFullYear()+b*n[0]),E.setMonth(s.getMonth()+b*n[1],s.getDate()+b*n[2]),E.setSeconds(s.getSeconds()+b*n[3]),E.getTime()>f)break;const M=Math.abs(o-E.getTime());if(M<=m)a=E.getTime(),m=M;else break}return a}const ui=bc("map",()=>{const t=ka(),e=br({}),n=Ln([]),o=Ln([]),s=br(!1),f=br(!1),a=br(void 0);function m(X){a.value=X}function g(...X){n.value=[...new Set([...n.value,...X])]}function b(...X){o.value=[...new Set([...o.value,...X])]}function E(...X){n.value=n.value.filter(ae=>X.indexOf(ae.id)===-1),o.value=o.value.filter(ae=>X.indexOf(ae.id)===-1)}function M(){n.value=[]}function I(X){var ae;return!!((ae=n.value)!=null&&ae.find(ce=>ce.id===X))}function P(X,ae=!1){var ve;const ce=ae?o:n;ce.value=[...((ve=ce.value)==null?void 0:ve.sort((Ne,ze)=>X.indexOf(Ne.id)-X.indexOf(ze.id)))||[]]}function z(X,ae){n.value=n.value.map(ce=>ce.id===X?{...ce,opacity:ae,previousOpacity:ce.opacity}:ce)}function V(X,ae,ce){n.value=n.value.map(ve=>{if(ve.id===X){const Ne={...ve,currentTimeMinValue:ae?N0(ae):void 0,currentTimeMaxValue:ce?N0(ce):void 0};return Ne.type==="WMTS"&&(Ne.name=t.getLayerCurrentLabel(Ne)),Ne}return ve})}function q(X){s.value=X}function re(X){f.value=X}return{map:e,layers:n,layers3d:o,is3dActive:s,is3dMesh:f,bgLayer:a,addLayers:g,add3dLayers:b,removeLayers:E,removeAllLayers:M,reorderLayers:P,setLayerOpacity:z,setLayerTime:V,setBgLayer:m,setIs3dActive:q,setIs3dMesh:re,hasLayer:I}}),Dz="root_3d",Nz=-222,yo=bc("config",()=>{const t=Ln(),e=br("main"),n=ar(()=>{var g;return(g=t.value)==null?void 0:g.themes}),o=ar(()=>{var g;return(g=n.value)==null?void 0:g.find(b=>b.name===e.value)}),s=ar(()=>{var g;return((g=t.value)==null?void 0:g.background_layers)||[]}),f=ar(()=>{var b;const g=(b=n.value)==null?void 0:b.filter(E=>{var M;return((M=E.metadata)==null?void 0:M.ol3d_type)!==void 0});if(!!g)return{name:Dz,id:Nz,children:g.flatMap(E=>E!=null&&E.children?E.children:E),metadata:{}}});function a(g){t.value=g}function m(g){e.value=g}return{config:t,themes:n,themeName:e,theme:o,bgLayers:s,layerTrees_3d:f,setTheme:m,setThemes:a}},{});function Su(){function t(m,g){return n(m,void 0,g)}function e(m,g){return n(void 0,m,g)}function n(m,g,b){const{theme:E}=yo();if(b=b||E,m&&(b==null?void 0:b.id)===m||g&&(b==null?void 0:b.name)===g)return b;if(b!=null&&b.children)for(const M of b.children){const I=n(m,g,M);if(I)return I}}function o(m){const{layerTrees_3d:g}=yo();return n(m,void 0,g)}function s(m){const{bgLayers:g}=yo();return g.find(b=>b.id===m)}function f(m){const{bgLayers:g}=yo();return g.find(b=>b.name===m)}function a(m){const{setTheme:g}=yo();g(m)}return{findById:t,findByName:e,find3dLayerById:o,findBgLayerById:s,findBgLayerByName:f,setTheme:a}}const tT=Su();function ka(){function t(g,b){try{const E=JSON.parse(g).concat(JSON.parse(b));return new Set(E).size<E.length}catch{return!1}}function e(g){var b,E;return g.opacity=g.previousOpacity=(E=(b=g.metadata)==null?void 0:b.start_opacity)!=null?E:1,n(g),g}function n(g){var E,M,I,P,z,V,q;g.currentTimeMinValue||(g.currentTimeMinValue=(I=(E=g.time)==null?void 0:E.minDefValue)!=null?I:(M=g.time)==null?void 0:M.minValue);const b=((P=g.time)==null?void 0:P.mode)===vl.RANGE;!g.currentTimeMaxValue&&b&&(g.currentTimeMaxValue=(q=(z=g.time)==null?void 0:z.maxDefValue)!=null?q:(V=g.time)==null?void 0:V.maxValue)}function o(g){var M,I,P;const b=s(g);let E=g.name;return b&&(E=(P=(I=(M=g.metadata)==null?void 0:M.time_layers)==null?void 0:I[b])!=null?P:E),E}function s(g){return[g.currentTimeMinValue,...g.currentTimeMaxValue?[g.currentTimeMaxValue]:[]].join(L4)}function f(g){var I,P;const b=Ey();if(!((I=g.metadata)!=null&&I.exclusion))return;const E=ui(),M=E.layers.filter(z=>{var V,q;return t((V=g==null?void 0:g.metadata)==null?void 0:V.exclusion,(q=z==null?void 0:z.metadata)==null?void 0:q.exclusion)});M.length>0&&(E.removeLayers(...M.map(z=>z.id)),b.addNotification($n.t("The layer <b>{{layersToRemove}}</b> has been removed because it cannot be displayed while the layer <b>{{layer}}</b> is displayed",{count:M.length,layersToRemove:M.map(z=>$n.t(z.name,{ns:"client"})).join(", "),layer:$n.t(g.name,{ns:"client"}),ns:"client"}),Dp.WARNING)),g.id!==((P=E.bgLayer)==null?void 0:P.id)&&a(g)}function a(g){var M,I,P;const b=ui(),E=Ey();t((M=g.metadata)==null?void 0:M.exclusion,(P=(I=b.bgLayer)==null?void 0:I.metadata)==null?void 0:P.exclusion)&&(b.setBgLayer(null),E.addNotification($n.t("Background has been deactivated because the layer {{layer}} cannot be displayed on top of it.",{layer:$n.t(g.name,{ns:"client"}),ns:"client"}),Dp.WARNING))}function m(g,b=!0,E){var V;const M=yo(),I=ui(),P=E?M.layerTrees_3d:M.theme,z=tT.findById(g,P);if(z){const q=((V=z.metadata)==null?void 0:V.linked_layers)||[];b===!1?I.removeLayers(z.id,...q):(f(z),(E?I.add3dLayers:I.addLayers)(e(z),...q.map(X=>e(tT.findById(parseInt(X,10))))))}}return{initLayer:e,getLayerCurrentLabel:o,getLayerCurrentTime:s,handleExclusionLayers:f,toggleLayer:m}}class Rz{styleSerialToStyle(e){return e?JSON.parse(decodeURIComponent(e))||[]:[]}styleLocalStorageToStyle(e){return e?JSON.parse(e).medium||[]:[]}styleToSerial(e){return e&&e.length>0?JSON.stringify(e):""}styleToLocalStorage(e){return e&&e.length>0?JSON.stringify({medium:e}):""}}const Xy=new Rz;function rT(t,e){let n;return(...o)=>{clearTimeout(n),n=setTimeout(()=>{t.apply(o)},e)}}function Wh(t){return(t==null?void 0:t.trim())&&!isNaN(Number(t))?Number(t):void 0}function zz(t,e){return(t==null?void 0:t.split(e).map(n=>n!==null&&!isNaN(Number(n))?parseFloat(n):void 0))||[]}function Fz(t,e){return(t==null?void 0:t.split(e).map(z0))||[]}function z0(t){return(t==null?void 0:t.trim())==="true"?!0:(t==null?void 0:t.trim())==="false"?!1:void 0}function nT(){return window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches}function Ds(t){return typeof window<"u"&&window.navigator&&t.test(navigator.userAgent)}const Bz=Ds(/firefox/i);Ds(/safari/i)&&!Ds(/chrome/i)&&Ds(/android/i),Ds(/iP(ad|od|hone)/i),Ds(/chrome/i)&&Ds(/android/i),Ds(/chrome/i),Ds(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ds(/Edge/i);const Xp="ipv6",Kp="applogin",Yp="localforage",Hh="debug",Ky="fid",Tu="lang",Yy="layersOpen",Jy="address",F0="version",Vz="map_id",iT="layers",oT="bgLayer",aT="opacities",Jp="theme",sT="time",lT="zoom",Uz="SRS",uT="X",cT="Y",Qy="serial",hT=["basemap_2015_global","topogr_global","topo_bw_jpeg"],B0="lc",V0="sliderRatio",fT="bgOpacity",jz="layers_indices",pT="layers_opacity",dT="layers_visibility";var to=(t=>(t[t.localStorage=0]="localStorage",t[t.permalink=1]="permalink",t[t.permalinkAsPath=2]="permalinkAsPath",t[t.permalinkAndLocalStorage=3]="permalinkAndLocalStorage",t))(to||{});class mT{}class eg extends mT{static processRules(e){return eg.ruleUseLocalStorage(e)?to.localStorage:to.permalink}static processRulesForKey(e,n){if(e===Jp&&{}.VITE_DEPLOY_GHPAGES!=="true")return to.permalinkAsPath;if(hT.includes(e))return to.localStorage;if(e===Qy)return to.permalink;if(e===Yy)return to.localStorage}static ruleUseLocalStorage(e){return[$z,Gz,qz].reduce((n,o)=>n||o(e),!1)}}const $z=t=>Object.keys(t).length===0,Gz=t=>Object.keys(t).length===1&&(t.hasOwnProperty(Xp)||t.hasOwnProperty(Kp)||t.hasOwnProperty(Yp)),qz=t=>Object.keys(t).length===3&&t.hasOwnProperty(Xp)&&t.hasOwnProperty(Kp)&&t.hasOwnProperty(Yp);class tg extends mT{static processRules(){return to.permalinkAndLocalStorage}static processRulesForKey(e,n){if(tg.ruleUsePermalink(e))return to.permalink;if(e===Yy||hT.includes(e))return to.localStorage;if(e===Qy)return to.permalink;if(e===Jp)return to.permalinkAsPath}static ruleUsePermalink(e){return[Wz,Hz,Zz].reduce((n,o)=>n||o(e),!1)}}const Wz=t=>t===B0||t===V0,Hz=t=>t===F0,Zz=t=>t===Jp&&{}.VITE_DEPLOY_GHPAGES==="true";class yT{constructor(){ai(this,"snappedUrl");this.snappedUrl=new URL(window.location.toString())}get length(){throw new Error("Method not implemented.")}clear(){throw new Error("Method not implemented.")}key(e){throw new Error("Method key() not implemented. "+e)}getSnappedUrl(){return this.snappedUrl}getSnappedParamsAsObj(){return this.getSnappedParams().reduce((e,n)=>{const[o,s]=n.split("=");return{...e,[o]:s}},{})}getSnappedParams(){return this.getSnappedUrl().search.replace("?","").split("&").filter(e=>e.split("=")[1])}setItem(e,n){const o=new URLSearchParams(new URL(window.location.toString()).search);o.set(encodeURIComponent(e),encodeURIComponent(n));try{window.history.replaceState(null,"","?"+o.toString())}catch{}}getItem(e){const n=this.getSnappedUrl().searchParams.get(e);return n!==null?decodeURIComponent(n):n}removeItem(e){const n=new URLSearchParams(new URL(window.location.toString()).search);n.delete(e);try{window.history.replaceState(null,"","?"+n.toString())}catch{}}encodeQueryParam(e,n){return`${encodeURIComponent(e)}=${encodeURIComponent(n)}`}}const U0=new yT;class Xz extends yT{getItem(e){const n=this.getSnappedUrl().pathname.split("/"),o=n.findIndex(s=>s===e);return n[o+1]}setItem(e,n){const o=new URL(window.location.toString()).search,s=`/${e}/${n}${o}`;try{window.history.replaceState(null,"",s)}catch{}}}const Kz=new Xz;class Yz{get length(){throw new Error("Method not implemented.")}clear(){throw new Error("Method not implemented.")}key(e){throw new Error("Method key() not implemented. "+e)}removeItem(e){const n=this.getWriteStorages(e);n==null||n.map(o=>o.removeItem(e))}setItem(e,n){this.setValue(e,n)}getItem(e){return this.getValue(e)}get paramKeys(){return U0.getSnappedParamsAsObj()}getValue(e){var s;const n=(s=this.correspondingStorages(eg.processRules(this.paramKeys)))==null?void 0:s.pop(),o=this.storageForKey(e,eg,n);return o?o.getItem(e):null}setValue(e,n){const o=this.getWriteStorages(e);o==null||o.map(s=>s.setItem(e,n))}getWriteStorages(e){const n=this.correspondingStorages(tg.processRules()),o=this.storageForKey(e,tg);return o?[o]:n}storageForKey(e,n,o){var f;const s=(f=this.correspondingStorages(n.processRulesForKey(e,this.paramKeys)))==null?void 0:f.pop();return s!=null?s:o}correspondingStorages(e){if(e===to.permalinkAndLocalStorage)return[U0,localStorage];if(e===to.localStorage)return[localStorage];if(e===to.permalink)return[U0];if(e===to.permalinkAsPath)return[Kz]}}const rg=new Yz;function Jz(t){return Qz(t)||e6(t)||t6(t)||r6(t)}const Qz=t=>Object.keys(t).length===0,e6=t=>{const e=Object.keys(t);return Object.keys(t).length===1&&[Xp,Kp,Yp,Ky,Tu,Jy,Hh].some(n=>e.indexOf(n)!==-1)},t6=t=>{const e=Object.keys(t),n=s=>e.indexOf(s)!==-1,o=[[Kp,Yp],[Hh,Ky],[Tu,Ky],[Hh,Tu],[Hh,Jy],[Tu,Jy]];return Object.keys(t).length===2&&o.reduce((s,f)=>s||f.every(n),!1)},r6=t=>{const e=Object.keys(t),n=a=>e.indexOf(a)!==-1,o=[Xp,Kp,Yp].every(n),s=[Hh,Ky,Tu].every(n),f=[Hh,Jy,Tu].every(n);return Object.keys(t).length===3&&(o||s||f)};class n6{constructor(){ai(this,"intialVersion");const e=rg.paramKeys,n=this.getValue(F0,Wh);this.intialVersion=n?Math.max(2,Math.min(n,3)):Jz(e)?3:2,this.setValue(F0,3)}getInitialVersion(){return this.intialVersion}mapToEntity(e,n){return n?n(e):e}mapToStorage(e,n){return n?n(e):String(e)}getValue(e,n){return this.mapToEntity(rg.getValue(e),n)}setValue(e,n,o){rg.setValue(e,this.mapToStorage(n,o))}removeItem(e){rg.removeItem(e)}}const Or=new n6,i6=["line","fill","symbol","fill-extrusion","background","hillshade"],is=()=>({bg_layers:[{icon_id:"route",vector_id:"roadmap",simple_style_class:"road",medium_style_class:"road",expert_style_class:"maputnik",id:556,is_default:!0},{icon_id:"topo",vector_id:"topomap",medium_style_class:"topo",expert_style_class:"maputnik",id:529},{icon_id:"topo_bw",vector_id:"topomap_gray",medium_style_class:"topo",expert_style_class:"maputnik",id:502},{icon_id:"ortho",id:530},{icon_id:"hybrid",id:501},{icon_id:"blank",id:0}],bg_layer_theme_defaults:{tourisme:502},simple_styles:{road:[{unlocalized_label:"Light grey",hillshade:!1,colors:["#ffffff","#ffffff","#d6e0d7","#e1e1e1","#cccccc","#f2f2f2"],selected:!1},{unlocalized_label:"Dark grey",hillshade:!1,colors:["#808080","#808080","#494b4a","#505052","#232426","#454545"],selected:!1},{unlocalized_label:"Dark sand",hillshade:!1,colors:["#9e9375","#9e9375","#6b6249","#403928","#b8aa84","#1a1814"],selected:!1},{unlocalized_label:"Kids",hillshade:!1,colors:["#f9c50d","#ffffff","#839836","#d6d3ce","#2a5ba8","#eeeeee"],selected:!1},{unlocalized_label:"Light mauve",hillshade:!1,colors:["#f3edf5","#f3edf5","#9d7da8","#caa9d1","#613b5c","#e5d3e6"],selected:!1},{unlocalized_label:"Light Blue",hillshade:!1,colors:["#dceaf5","#dceaf5","#5598cf","#81b7e3","#3b576e","#b6cde0"],selected:!1}]},medium_default_styles:{road:[{label:"Roads primary",color:"#f7f7f7",lines:["lu_road_trunk_primary","lu_bridge_major","lu_tunnel_major","lu_road_major_motorway"],visible:!0},{label:"Roads secondary",color:"#f7f7f7",lines:["lu_road_minor","lu_road_secondary_tertiary","lu_bridge_minor","lu_road_path","lu_bridge_path","lu_bridge_railway case","lu_bridge_path case"],visible:!0},{label:"Vegetation",color:"#B8D293",opacity:"1",fills:["lu_landcover_wood","lu_landcover_grass","lu_landuse_stadium","lu_landuse_cemetery"],visible:!0},{label:"Buildings",color:"#D6AA85",opacity:"1",fillExtrusions:["lu_building-3d_public","lu_building-3d"],fills:["lu_building","lu_building_public"],lines:["lu_bridge_railway","lu_railway","lu_tunnel_railway"],visible:!0},{label:"Water",color:"#94c1e1",lines:["lu_waterway","lu_waterway_tunnel","lu_waterway_intermittent"],fills:["lu_water"],visible:!0},{label:"Background",color:"#e7e7e7",backgrounds:["background"],visible:!0},{label:"Hillshade",hillshades:["hillshade"],visible:!0}],topo:[{label:"Primary Names",symbols:["lu_place-label_other","lu_place-label_city","lu_place-label_canton","lu_country-label-other","lu_country-label","place_label_other","place_label_city","country_label-other","country_label"],visible:!0},{label:"Secondary Names",symbols:["lu_place-label_isolated","lu_place-label_locality_forest","lu_place-label_locality_lieudit"],visible:!0},{label:"Transport",lines:["lu_tunnel_track-casing","lu_tunnel_major_motorway-casing","lu_tunnel_railway_transit","lu_tunnel_railway","lu_tunnel_railway-hatching","lu_tunnel_path","lu_tunnel_track","lu_tunnel_minor","lu_tunnel_major_motorway","lu_tunnel_secondary_tertiary","lu_tunnel_trunk_primary","lu_road_track-casing","lu_road_minor-casing","lu_road_major_motorway-casing","lu_road_secondary_tertiary-casing","lu_road_trunk_primary-casing","lu_road_pier","lu_road_path","lu_road_track","lu_road_minor","lu_road_major_motorway","lu_road_secondary_tertiary","lu_road_trunk_primary","lu_tram","lu_tram-hatching","lu_railway_transit","lu_railway","lu_railway-hatching","lu_bridge_railway-casing","lu_bridge_track-casing","lu_bridge_path-casing","lu_bridge_minor-casing","lu_bridge_major_motorway-casing","lu_bridge_secondary_tertiary-casing","lu_bridge_trunk_primary-casing","lu_bridge_railway","lu_bridge_path","lu_bridge_track","lu_bridge_minor","lu_bridge_major_motorway","lu_bridge_secondary_tertiary","lu_bridge_trunk_primary","tunnel_track-casing","tunnel_major_motorway-casing","tunnel_railway_transit","tunnel_railway_transit-hatching","tunnel_railway","tunnel_railway-hatching","tunnel_path","tunnel_track","tunnel_minor","tunnel_major_motorway","tunnel_secondary_tertiary","tunnel_trunk_primary","road_track-casing","road_minor-casing","road_major_motorway-casing","road_secondary_tertiary-casing","road_trunk_primary-casing","road_pier","road_path","road_track","road_minor","road_major_motorway","road_secondary_tertiary","road_trunk_primary","railway-transit","railway-transit-hatching","railway","railway-hatching","bridge_railway-casing","bridge_path-casing","bridge_track_casing","bridge_minor-casing","bridge_major_motorway-casing","bridge_secondary_tertiary-casing","bridge_trunk_primary-casing","bridge_railway","bridge_path","bridge_track","bridge_minor","bridge_major_motorway","bridge_secondary_tertiary","bridge_trunk_primary"],symbols:["lu_road_major-label","lu_motorway-shield","lu_road-shield"],visible:!0},{label:"Vegetation",fills:["lu_landuse_stadium","lu_landuse_cemetery","lu_landuse_gras","lu_landuse_park","lu_landuse_park-outline","lu_landuse_vineyard","lu_landuse_orchard","lu_landuse_wood","landcover_grass","landcover_wood"],visible:!0},{label:"Electricity",fills:["lu_power_station","lu_power_pylone"],lines:["lu_power_line","lu_power_station-outline"],symbols:["lu_power_station-label","lu_eolienne"],visible:!0},{label:"Contours and Height Points",lines:["lu_contour-100","lu_contour-50","lu_contour-20","lu_contour-10","lu_contour"],symbols:["lu_contour-label-100","lu_contour-label-20","lu_apex-label"],visible:!0},{label:"Hillshade",hillshades:["lu_hillshade"],visible:!0}]},http_bg_server:"wmts{1-2}",https_bg_server:"wmts{3-4}",bg_wmts_server_path:"mapproxy_4_v3/wmts/{Layer}",bg_wmts_tile_template:"{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}",bg_layer_projection:"EPSG:3857",olcs_extent:[5.31,49.38,6.64,50.21],olcs_extent_projection:"EPSG:3857",bg_layer_resolutions:[156543.033928,78271.516964,39135.758482,19567.879241,9783.9396205,4891.96981025,2445.98490513,1222.99245256,611.496226281,305.748113141,152.87405657,76.4370282852,38.2185141426,19.1092570713,9.55462853565,4.77731426782,2.38865713391,1.19432856696,.597164283478,.298582141739,.1492910708695,.07464553543475],bg_matrix_ids:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21"]});function Cc(){function t(V){const q=new URLSearchParams(document.location.search),re=q.get("embeddedserver"),X=q.get("embeddedserverprotocol")||"http";return(re?`${X}://${re}`:"https://vectortiles.geoportail.lu")+`/styles/${V}/style.json`}function e(V){return`https://vectortiles.geoportail.lu/styles/${V}/{z}/{x}/{y}.png`}function n(V){return/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/gi.test(V)}const o=os();function s(V,q){if(V==null)return;const re=new Map;o.bgVectorSources.forEach((X,ae)=>{if(ae===V.id){const ce={...X,xyz_custom:q};re.set(ae,ce)}else re.set(ae,X)}),o.setBgVectorSources(re)}function f(V,q,re=!1){const X="",ae=t(q),ce=e(q),ve={label:V,defaultMapBoxStyle:ae,defaultMapBoxStyleXYZ:ce,xyz:ce,xyz_custom:X,style:ae},Ne=new URLSearchParams(window.location.search).get("serial"),ze=new URLSearchParams(window.location.search).get("serialLayer");if(Ne)n(Ne)&&console.log(ze);else if(!re)return Promise.resolve(ve);return Promise.resolve(ve)}function a(V){const q=is().medium_default_styles.road;if(V){V.colors.forEach((X,ae)=>{q[ae].color=X});const re=q.findIndex(X=>X.label==="Hillshade");q[re].visible=V.hillshade}return q}function m(V,q,re){if(!V||!q.get(V.id))return;const X=JSON.parse(JSON.stringify(q.get(V.id)));if(!!X&&!(!X||!X.layers))return re&&re.forEach(ae=>{X==null||X.layers.forEach((ce,ve)=>{for(const Ne of i6)if((ae[`${Ne}s`]||[]).includes(ce.id)){const Pe=Object.assign({},X.layers[ve].paint);ae.color&&(Pe[`${Ne}-color`]=ae.color,Pe[`${Ne}-opacity`]=1,X.layers[ve].paint=Pe),X.layers[ve].layout=Object.assign({},X.layers[ve].layout,{visibility:ae.visible?"visible":"none"})}})}),X}function g(V,q){if(V===null)return Promise.resolve();{const re=`${q.get("delete")}?id=${V}`;return fetch(re).catch(()=>"")}}function b(V,q,re){return g(q,re).then(()=>{const X=new FormData,ae=JSON.stringify(V),ce=new Blob([ae],{type:"application/json"});X.append("style",ce,"style.json");const ve={method:"POST",body:X};return fetch(re.get("upload")||"",ve).then(Ne=>Ne.json()).then(Ne=>Ne.id).catch(Ne=>console.warn(Ne))})}function E(V,q){if(!q)return;const re=V.maplibreMap;!re||(re.loaded()?re.setStyle(q):new Promise(X=>re.once("data",X)).then(()=>re.setStyle(q)))}function M(V){const q=is().bg_layers.find(re=>re.id==(V==null?void 0:V.id));return q==null?void 0:q.vector_id}function I(V){const q=is().bg_layers.find(re=>re.id==(V==null?void 0:V.id));return(q==null?void 0:q.vector_id)!==void 0}function P(V){const q=is().bg_layers.find(re=>re.id==(V==null?void 0:V.id));return{isEditable:(q==null?void 0:q.vector_id)!==void 0,hasSimpleStyle:(q==null?void 0:q.simple_style_class)!==void 0,hasAdvancedStyle:(q==null?void 0:q.medium_style_class)!==void 0,hasExpertStyle:(q==null?void 0:q.expert_style_class)!==void 0}}function z(V,q){return q.map(re=>Object.assign(re,{selected:re.colors.every((X,ae)=>{var ce;return((ce=V[ae])==null?void 0:ce.color)===X})}))}return{getDefaultMapBoxStyleUrl:t,getDefaultMapBoxStyleXYZ:e,setConfigForLayer:f,getRoadStyleFromSimpleStyle:a,applyDefaultStyle:m,applyConsolidatedStyle:E,getVectorId:M,setCustomStyleSerial:s,unregisterStyle:g,registerStyle:b,checkSelection:z,isLayerStyleEditable:I,getStyleCapabilitiesFromLayer:P}}const os=bc("style",()=>{const t=Cc(),e=Ln(),n=Ln(new Map),o=Ln(new Map),s=Ln(!1),f=Ln(null),a=Ln(),m=Ln(new Map([["get","/getvtstyle"],["upload","/uploadvtstyle"],["delete","/deletevtstyle"]])),g=[];is().bg_layers.forEach(re=>{if(re.vector_id){const X=t.setConfigForLayer(re.icon_id,re.vector_id);g.push(X.then(ae=>({id:re.id,config:ae})))}}),Promise.all(g).then(re=>{const X=new Map;re.forEach(ae=>X.set(ae.id,ae.config)),n.value=X});function b(re,X){m.value.set(re,X)}function E(re){n.value=re}function M(re){const X=new Map;o.value.forEach((ae,ce)=>{ce!==re&&X.set(ce,ae)}),o.value=X}function I(re,X){const ae=new Map;o.value.forEach((ce,ve)=>ae.set(ve,ce)),ae.set(re,X),o.value=ae}function P(re){e.value=t.getRoadStyleFromSimpleStyle(re),V()}function z(re){e.value=re,V()}function V(){s.value=!1}function q(){s.value=!0}return{bgStyle:e,bgVectorSources:n,bgVectorBaseStyles:o,isExpertStyleActive:s,appliedStyle:a,removeBaseStyle:M,setBaseStyle:I,setBgVectorSources:E,setRegisterUrl:b,setSimpleStyle:P,setStyle:z,disableExpertStyle:V,enableExpertStyle:q,styleSerial:f,registerUrls:m}},{});class o6{constructor(){ai(this,"styleWatcher")}bootstrapStyle(){const e=os();let n,o=!1;n=la(()=>{e.bgVectorSources&&(this.restoreStyle(!1),o&&this.persistStyle(),o=!0,n&&n())})}persistStyle(){const e=os(),{bgStyle:n}=rn(e);this.styleWatcher||(this.styleWatcher=Tn(n,(o,s)=>{if(s!==o){const f=ui();f.bgLayer&&(Or.setValue(f.bgLayer.name,o||[],Xy.styleToLocalStorage),Or.setValue(Qy,o||[],Xy.styleToSerial))}},{immediate:!0}))}restoreStyle(e){const n=os();n.setStyle(null);const s=ui().bgLayer;if(s){let f=[];e||(f=Or.getValue(Qy,Xy.styleSerialToStyle)),f.length===0&&(f=Or.getValue(s.name,Xy.styleLocalStorageToStyle)),f&&f.length>0&&n.setStyle(f)}}}const j0=new o6,a6="https://map.geoportail.lu/ogcproxywms",s6="https://map.geoportail.lu/httpsproxy";class l6{constructor(){ai(this,"_wmsProxyUrl",a6);ai(this,"_remoteProxyUrl",s6)}get wmsProxyUrl(){return this._wmsProxyUrl===void 0&&console.warn("Warning: proxyWmsUrl is not set."),this._wmsProxyUrl}get remoteProxyUrl(){return this._remoteProxyUrl===void 0&&console.warn("Warning: remoteProxy is not set."),this._remoteProxyUrl}getProxyfiedUrl(e){return e.indexOf("httpsproxy")>0?e:this.remoteProxyUrl+"?url="+encodeURIComponent(e)}init_v3(e,n){e&&(this._wmsProxyUrl=e),n&&(this._remoteProxyUrl=n)}}const Ac=new l6;function gT(){return Mi.transformExtent([5.31,49.38,6.64,50.21],J2,Np)}function vT(t){var e;return!!((e=t==null?void 0:t.metadata)!=null&&e.hasRetina)&&nT()}function u6(t,e="https"){const n=t.imageType.split("/")[1],o=Or.getValue(Xp,z0)?"app.geoportail.lu":"geoportail.lu";return`${e==="https"?"//wmts{3-4}.":"//wmts{1-2}."}${o}/mapproxy_4_v3/wmts/{Layer}${vT(t)?"_hd":""}/{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}.${n}`}class c6{createOlLayer(e){const{name:n,layers:o,imageType:s,url:f,id:a}=e,m=new Sx.default({url:f||Ac.wmsProxyUrl,hidpi:nT(),serverType:"mapserver",params:{FORMAT:s,LAYERS:o},...f!=null||Ac.remoteProxyUrl?{crossOrigin:"anonymous"}:{}});return new RO.default({properties:{"olcs.extent":gT(),label:n,id:a},source:m})}setLayerTime(e,n){const o=e.getParams();o.TIME=n,e.updateParams(o)}}const _T=new c6,h6=[156543.033928,78271.516964,39135.758482,19567.879241,9783.9396205,4891.96981025,2445.98490513,1222.99245256,611.496226281,305.748113141,152.87405657,76.4370282852,38.2185141426,19.1092570713,9.55462853565,4.77731426782,2.38865713391,1.19432856696,.597164283478,.298582141739,.1492910708695,.07464553543475],f6=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21"];class p6{createOlLayer(e){const{name:n,imageType:o,id:s}=e,f=vT(e),a=Mi.get(Np),m=a.getExtent(),g=new Tx.default({url:u6(e),tilePixelRatio:f?2:1,layer:n,matrixSet:`GLOBAL_WEBMERCATOR_4_V3${f?"_HD":""}`,format:o,requestEncoding:"REST",projection:a,tileGrid:new FO.default({origin:vO.getTopLeft(m),extent:m,resolutions:h6,matrixIds:f6}),style:"default",crossOrigin:"anonymous"});return new zO.default({source:g,properties:{"olcs.extent":gT(),label:n,id:s}})}setLayerTime(e,n,o){const s=e.get("metadata").time_layers[o],f=n.getUrls();if(f){const a=this.transformUrls(f,s);n.setUrls(a),e.set("label",s),e.set("layer_name",s)}}transformUrls(e,n){return e.map(o=>o.replace(/[/][^/]*[/]{TileMatrixSet}/,`/${n}/{TileMatrixSet}`))}}const xT=new p6;var Ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bT={exports:{}};(function(t,e){(function(n,o){t.exports=o()})(Ns,function(){var n,o,s;function f(a,m){if(!n)n=m;else if(!o)o=m;else{var g="var sharedChunk = {}; ("+n+")(sharedChunk); ("+o+")(sharedChunk);",b={};n(b),s=m(b),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"})))}}return f(["exports"],function(a){function m(r,i){return r(i={exports:{}},i.exports),i.exports}var g=b;function b(r,i,l,p){this.cx=3*r,this.bx=3*(l-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(p-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=p,this.p2x=l,this.p2y=p}b.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},b.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},b.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},b.prototype.solveCurveX=function(r,i){var l,p,y,v,x;for(i===void 0&&(i=1e-6),y=r,x=0;x<8;x++){if(v=this.sampleCurveX(y)-r,Math.abs(v)<i)return y;var T=this.sampleCurveDerivativeX(y);if(Math.abs(T)<1e-6)break;y-=v/T}if((y=r)<(l=0))return l;if(y>(p=1))return p;for(;l<p;){if(v=this.sampleCurveX(y),Math.abs(v-r)<i)return y;r>v?l=y:p=y,y=.5*(p-l)+l}return y},b.prototype.solve=function(r,i){return this.sampleCurveY(this.solveCurveX(r,i))};var E=M;function M(r,i){this.x=r,this.y=i}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,i){return this.clone()._rotateAround(r,i)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var i=r.x-this.x,l=r.y-this.y;return i*i+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,i){return Math.atan2(this.x*i-this.y*r,this.x*r+this.y*i)},_matMult:function(r){var i=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=i,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var i=Math.cos(r),l=Math.sin(r),p=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=p,this},_rotateAround:function(r,i){var l=Math.cos(r),p=Math.sin(r),y=i.y+p*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-p*(this.y-i.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},M.convert=function(r){return r instanceof M?r:Array.isArray(r)?new M(r[0],r[1]):r};var I=typeof self<"u"?self:{},P=Math.pow(2,53)-1;function z(r,i,l,p){var y=new g(r,i,l,p);return function(v){return y.solve(v)}}var V=z(.25,.1,.25,1);function q(r,i,l){return Math.min(l,Math.max(i,r))}function re(r,i,l){var p=l-i,y=((r-i)%p+p)%p+i;return y===i?l:y}function X(r){for(var i=[],l=arguments.length-1;l-- >0;)i[l]=arguments[l+1];for(var p=0,y=i;p<y.length;p+=1){var v=y[p];for(var x in v)r[x]=v[x]}return r}var ae=1;function ce(){return ae++}function ve(){return function r(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function Ne(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function ze(r,i){r.forEach(function(l){i[l]&&(i[l]=i[l].bind(i))})}function Pe(r,i){return r.indexOf(i,r.length-i.length)!==-1}function Se(r,i,l){var p={};for(var y in r)p[y]=i.call(l||this,r[y],y,r);return p}function Ie(r,i,l){var p={};for(var y in r)i.call(l||this,r[y],y,r)&&(p[y]=r[y]);return p}function Ke(r){return Array.isArray(r)?r.map(Ke):typeof r=="object"&&r?Se(r,Ke):r}var Ge={};function st(r){Ge[r]||(typeof console<"u"&&console.warn(r),Ge[r]=!0)}function be(r,i,l){return(l.y-r.y)*(i.x-r.x)>(i.y-r.y)*(l.x-r.x)}function Je(r){for(var i=0,l=0,p=r.length,y=p-1,v=void 0,x=void 0;l<p;y=l++)i+=((x=r[y]).x-(v=r[l]).x)*(v.y+x.y);return i}function ht(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function vt(r){var i={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(p,y,v,x){var T=v||x;return i[y]=!T||T.toLowerCase(),""}),i["max-age"]){var l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i}var Lt=null;function rr(r){if(Lt==null){var i=r.navigator?r.navigator.userAgent:null;Lt=!!r.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Lt}function Nn(r){try{var i=I[r];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}var zr,mr,Jn,Fr,$i=I.performance&&I.performance.now?I.performance.now.bind(I.performance):Date.now.bind(Date),qr=I.requestAnimationFrame||I.mozRequestAnimationFrame||I.webkitRequestAnimationFrame||I.msRequestAnimationFrame,kr=I.cancelAnimationFrame||I.mozCancelAnimationFrame||I.webkitCancelAnimationFrame||I.msCancelAnimationFrame,qn={now:$i,frame:function(r){var i=qr(r);return{cancel:function(){return kr(i)}}},getImageData:function(r,i){i===void 0&&(i=0);var l=I.document.createElement("canvas"),p=l.getContext("2d");if(!p)throw new Error("failed to create canvas 2d context");return l.width=r.width,l.height=r.height,p.drawImage(r,0,0,r.width,r.height),p.getImageData(-i,-i,r.width+2*i,r.height+2*i)},resolveURL:function(r){return zr||(zr=I.document.createElement("a")),zr.href=r,zr.href},hardwareConcurrency:I.navigator&&I.navigator.hardwareConcurrency||4,get devicePixelRatio(){return I.devicePixelRatio},get prefersReducedMotion(){return!!I.matchMedia&&(mr==null&&(mr=I.matchMedia("(prefers-reduced-motion: reduce)")),mr.matches)}},Mr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Mn={supported:!1,testSupport:function(r){!hi&&Fr&&(Wn?K(r):Jn=r)}},hi=!1,Wn=!1;function K(r){var i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,Fr),r.isContextLost())return;Mn.supported=!0}catch{}r.deleteTexture(i),hi=!0}I.document&&((Fr=I.document.createElement("img")).onload=function(){Jn&&K(Jn),Jn=null,Wn=!0},Fr.onerror=function(){hi=!0,Jn=null},Fr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ye="01",Re=function(r,i){this._transformRequestFn=r,this._customAccessToken=i,this._createSkuToken()};function qe(r){return r.indexOf("mapbox:")===0}Re.prototype._createSkuToken=function(){var r=function(){for(var i="",l=0;l<10;l++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ye,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt},Re.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Re.prototype.transformRequest=function(r,i){return this._transformRequestFn&&this._transformRequestFn(r,i)||{url:r}},Re.prototype.normalizeStyleURL=function(r,i){if(!qe(r))return r;var l=et(r);return l.path="/styles/v1"+l.path,this._makeAPIURL(l,this._customAccessToken||i)},Re.prototype.normalizeGlyphsURL=function(r,i){if(!qe(r))return r;var l=et(r);return l.path="/fonts/v1"+l.path,this._makeAPIURL(l,this._customAccessToken||i)},Re.prototype.normalizeSourceURL=function(r,i){if(!qe(r))return r;var l=et(r);return l.path="/v4/"+l.authority+".json",l.params.push("secure"),this._makeAPIURL(l,this._customAccessToken||i)},Re.prototype.normalizeSpriteURL=function(r,i,l,p){var y=et(r);return qe(r)?(y.path="/styles/v1"+y.path+"/sprite"+i+l,this._makeAPIURL(y,this._customAccessToken||p)):(y.path+=""+i+l,ut(y))},Re.prototype.normalizeTileURL=function(r,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!qe(r))return r;var l=et(r);l.path=l.path.replace(/(\.(png|jpg)\d*)(?=$)/,(qn.devicePixelRatio>=2||i===512?"@2x":"")+(Mn.supported?".webp":"$1")),l.path=l.path.replace(/^.+\/v4\//,"/"),l.path="/v4"+l.path;var p=this._customAccessToken||function(y){for(var v=0,x=y;v<x.length;v+=1){var T=x[v].match(/^access_token=(.*)$/);if(T)return T[1]}return null}(l.params)||Mr.ACCESS_TOKEN;return Mr.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&l.params.push("sku="+this._skuToken),this._makeAPIURL(l,p)},Re.prototype.canonicalizeTileURL=function(r,i){var l=et(r);if(!l.path.match(/(^\/v4\/)/)||!l.path.match(/\.[\w]+$/))return r;var p="mapbox://tiles/";p+=l.path.replace("/v4/","");var y=l.params;return i&&(y=y.filter(function(v){return!v.match(/^access_token=/)})),y.length&&(p+="?"+y.join("&")),p},Re.prototype.canonicalizeTileset=function(r,i){for(var l=!!i&&qe(i),p=[],y=0,v=r.tiles||[];y<v.length;y+=1){var x=v[y];nt(x)?p.push(this.canonicalizeTileURL(x,l)):p.push(x)}return p},Re.prototype._makeAPIURL=function(r,i){var l="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",p=et(Mr.API_URL);if(r.protocol=p.protocol,r.authority=p.authority,r.protocol==="http"){var y=r.params.indexOf("secure");y>=0&&r.params.splice(y,1)}if(p.path!=="/"&&(r.path=""+p.path+r.path),!Mr.REQUIRE_ACCESS_TOKEN)return ut(r);if(!(i=i||Mr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+l);if(i[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+l);return r.params=r.params.filter(function(v){return v.indexOf("access_token")===-1}),r.params.push("access_token="+i),ut(r)};var We=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function nt(r){return We.test(r)}var mt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function et(r){var i=r.match(mt);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function ut(r){var i=r.params.length?"?"+r.params.join("&"):"";return r.protocol+"://"+r.authority+r.path+i}function Qe(r){if(!r)return null;var i=r.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(I.atob(i[1]).split("").map(function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Ot=function(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ot.prototype.getStorageKey=function(r){var i,l=Qe(Mr.ACCESS_TOKEN);return i=l&&l.u?I.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,function(p,y){return String.fromCharCode(Number("0x"+y))})):Mr.ACCESS_TOKEN||"",r?"mapbox.eventData."+r+":"+i:"mapbox.eventData:"+i},Ot.prototype.fetchEventData=function(){var r=Nn("localStorage"),i=this.getStorageKey(),l=this.getStorageKey("uuid");if(r)try{var p=I.localStorage.getItem(i);p&&(this.eventData=JSON.parse(p));var y=I.localStorage.getItem(l);y&&(this.anonId=y)}catch{st("Unable to read from LocalStorage")}},Ot.prototype.saveEventData=function(){var r=Nn("localStorage"),i=this.getStorageKey(),l=this.getStorageKey("uuid");if(r)try{I.localStorage.setItem(l,this.anonId),Object.keys(this.eventData).length>=1&&I.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{st("Unable to write to LocalStorage")}},Ot.prototype.processRequests=function(r){},Ot.prototype.postEvent=function(r,i,l,p){var y=this;if(Mr.EVENTS_URL){var v=et(Mr.EVENTS_URL);v.params.push("access_token="+(p||Mr.ACCESS_TOKEN||""));var x={event:this.type,created:new Date(r).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:ye,userId:this.anonId},T=i?X(x,i):x,C={url:ut(v),headers:{"Content-Type":"text/plain"},body:JSON.stringify([T])};this.pendingRequest=Sn(C,function(A){y.pendingRequest=null,l(A),y.saveEventData(),y.processRequests(p)})}},Ot.prototype.queueRequest=function(r,i){this.queue.push(r),this.processRequests(i)};var bt,Dt,jt=function(r){function i(){r.call(this,"map.load"),this.success={},this.skuToken=""}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.postMapLoadEvent=function(l,p,y,v){this.skuToken=y;var x=!(!v&&!Mr.ACCESS_TOKEN),T=Array.isArray(l)&&l.some(function(C){return qe(C)||nt(C)});Mr.EVENTS_URL&&x&&T&&this.queueRequest({id:p,timestamp:Date.now()},v)},i.prototype.processRequests=function(l){var p=this;if(!this.pendingRequest&&this.queue.length!==0){var y=this.queue.shift(),v=y.id,x=y.timestamp;v&&this.success[v]||(this.anonId||this.fetchEventData(),Ne(this.anonId)||(this.anonId=ve()),this.postEvent(x,{skuToken:this.skuToken},function(T){T||v&&(p.success[v]=!0)},l))}},i}(Ot),yr=new(function(r){function i(l){r.call(this,"appUserTurnstile"),this._customAccessToken=l}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.postTurnstileEvent=function(l,p){Mr.EVENTS_URL&&Mr.ACCESS_TOKEN&&Array.isArray(l)&&l.some(function(y){return qe(y)||nt(y)})&&this.queueRequest(Date.now(),p)},i.prototype.processRequests=function(l){var p=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var y=Qe(Mr.ACCESS_TOKEN),v=y?y.u:Mr.ACCESS_TOKEN,x=v!==this.eventData.tokenU;Ne(this.anonId)||(this.anonId=ve(),x=!0);var T=this.queue.shift();if(this.eventData.lastSuccess){var C=new Date(this.eventData.lastSuccess),A=new Date(T),L=(T-this.eventData.lastSuccess)/864e5;x=x||L>=1||L<-1||C.getDate()!==A.getDate()}else x=!0;if(!x)return this.processRequests();this.postEvent(T,{"enabled.telemetry":!1},function(D){D||(p.eventData.lastSuccess=T,p.eventData.tokenU=v)},l)}},i}(Ot)),jr=yr.postTurnstileEvent.bind(yr),Lr=new jt,Qr=Lr.postMapLoadEvent.bind(Lr),Qn=500,Gi=50;function _o(){I.caches&&!bt&&(bt=I.caches.open("mapbox-tiles"))}function ei(r){var i=r.indexOf("?");return i<0?r:r.slice(0,i)}var Ri,In=1/0;function fi(){return Ri==null&&(Ri=I.OffscreenCanvas&&new I.OffscreenCanvas(1,1).getContext("2d")&&typeof I.createImageBitmap=="function"),Ri}var ss={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ss);var Xo=function(r){function i(l,p,y){p===401&&nt(y)&&(l+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),r.call(this,l),this.status=p,this.url=y,this.name=this.constructor.name,this.message=l}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},i}(Error),ls=ht()?function(){return self.worker&&self.worker.referrer}:function(){return(I.location.protocol==="blob:"?I.parent:I).location.href},ma,pn,Fo=function(r,i){if(!(/^file:/.test(l=r.url)||/^file:/.test(ls())&&!/^\w+:/.test(l))){if(I.fetch&&I.Request&&I.AbortController&&I.Request.prototype.hasOwnProperty("signal"))return function(p,y){var v,x=new I.AbortController,T=new I.Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:ls(),signal:x.signal}),C=!1,A=!1,L=(v=T.url).indexOf("sku=")>0&&nt(v);p.type==="json"&&T.headers.set("Accept","application/json");var D=function(j,J,ee){if(!A){if(j&&j.message!=="SecurityError"&&st(j),J&&ee)return B(J);var he=Date.now();I.fetch(T).then(function(oe){if(oe.ok){var ge=L?oe.clone():null;return B(oe,ge,he)}return y(new Xo(oe.statusText,oe.status,p.url))}).catch(function(oe){oe.code!==20&&y(new Error(oe.message))})}},B=function(j,J,ee){(p.type==="arrayBuffer"?j.arrayBuffer():p.type==="json"?j.json():j.text()).then(function(he){A||(J&&ee&&function(oe,ge,we){if(_o(),bt){var Te={status:ge.status,statusText:ge.statusText,headers:new I.Headers};ge.headers.forEach(function(Ve,Ye){return Te.headers.set(Ye,Ve)});var Oe=vt(ge.headers.get("Cache-Control")||"");Oe["no-store"]||(Oe["max-age"]&&Te.headers.set("Expires",new Date(we+1e3*Oe["max-age"]).toUTCString()),new Date(Te.headers.get("Expires")).getTime()-we<42e4||function(Ve,Ye){if(Dt===void 0)try{new Response(new ReadableStream),Dt=!0}catch{Dt=!1}Dt?Ye(Ve.body):Ve.blob().then(Ye)}(ge,function(Ve){var Ye=new I.Response(Ve,Te);_o(),bt&&bt.then(function(ot){return ot.put(ei(oe.url),Ye)}).catch(function(ot){return st(ot.message)})}))}}(T,J,ee),C=!0,y(null,he,j.headers.get("Cache-Control"),j.headers.get("Expires")))}).catch(function(he){A||y(new Error(he.message))})};return L?function(j,J){if(_o(),!bt)return J(null);var ee=ei(j.url);bt.then(function(he){he.match(ee).then(function(oe){var ge=function(we){if(!we)return!1;var Te=new Date(we.headers.get("Expires")||0),Oe=vt(we.headers.get("Cache-Control")||"");return Te>Date.now()&&!Oe["no-cache"]}(oe);he.delete(ee),ge&&he.put(ee,oe.clone()),J(null,oe,ge)}).catch(J)}).catch(J)}(T,D):D(null,null),{cancel:function(){A=!0,C||x.abort()}}}(r,i);if(ht()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,i,void 0,!0)}var l;return function(p,y){var v=new I.XMLHttpRequest;for(var x in v.open(p.method||"GET",p.url,!0),p.type==="arrayBuffer"&&(v.responseType="arraybuffer"),p.headers)v.setRequestHeader(x,p.headers[x]);return p.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=p.credentials==="include",v.onerror=function(){y(new Error(v.statusText))},v.onload=function(){if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){var T=v.response;if(p.type==="json")try{T=JSON.parse(v.response)}catch(C){return y(C)}y(null,T,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else y(new Xo(v.statusText,v.status,p.url))},v.send(p.body),{cancel:function(){return v.abort()}}}(r,i)},Il=function(r,i){return Fo(X(r,{type:"arrayBuffer"}),i)},Sn=function(r,i){return Fo(X(r,{method:"POST"}),i)},N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";ma=[],pn=0;var F=function(r,i){if(Mn.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),pn>=Mr.MAX_PARALLEL_IMAGE_REQUESTS){var l={requestParameters:r,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return ma.push(l),l}pn++;var p=!1,y=function(){if(!p)for(p=!0,pn--;ma.length&&pn<Mr.MAX_PARALLEL_IMAGE_REQUESTS;){var x=ma.shift();x.cancelled||(x.cancel=F(x.requestParameters,x.callback).cancel)}},v=Il(r,function(x,T,C,A){y(),x?i(x):T&&(fi()?function(L,D){var B=new I.Blob([new Uint8Array(L)],{type:"image/png"});I.createImageBitmap(B).then(function(j){D(null,j)}).catch(function(j){D(new Error("Could not load image because of "+j.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(T,i):function(L,D,B,j){var J=new I.Image,ee=I.URL;J.onload=function(){D(null,J),ee.revokeObjectURL(J.src),J.onload=null,I.requestAnimationFrame(function(){J.src=N})},J.onerror=function(){return D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var he=new I.Blob([new Uint8Array(L)],{type:"image/png"});J.cacheControl=B,J.expires=j,J.src=L.byteLength?ee.createObjectURL(he):N}(T,i,C,A))});return{cancel:function(){v.cancel(),y()}}};function U(r,i,l){l[r]&&l[r].indexOf(i)!==-1||(l[r]=l[r]||[],l[r].push(i))}function Z(r,i,l){if(l&&l[r]){var p=l[r].indexOf(i);p!==-1&&l[r].splice(p,1)}}var Q=function(r,i){i===void 0&&(i={}),X(this,i),this.type=r},pe=function(r){function i(l,p){p===void 0&&(p={}),r.call(this,"error",X({error:l},p))}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Q),de=function(){};de.prototype.on=function(r,i){return this._listeners=this._listeners||{},U(r,i,this._listeners),this},de.prototype.off=function(r,i){return Z(r,i,this._listeners),Z(r,i,this._oneTimeListeners),this},de.prototype.once=function(r,i){return this._oneTimeListeners=this._oneTimeListeners||{},U(r,i,this._oneTimeListeners),this},de.prototype.fire=function(r,i){typeof r=="string"&&(r=new Q(r,i||{}));var l=r.type;if(this.listens(l)){r.target=this;for(var p=0,y=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];p<y.length;p+=1)y[p].call(this,r);for(var v=0,x=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];v<x.length;v+=1){var T=x[v];Z(l,T,this._oneTimeListeners),T.call(this,r)}var C=this._eventedParent;C&&(X(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(r))}else r instanceof pe&&console.error(r.error);return this},de.prototype.listens=function(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)},de.prototype.setEventedParent=function(r,i){return this._eventedParent=r,this._eventedParentData=i,this};var $={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ie=function(r,i,l,p){this.message=(r?r+": ":"")+l,p&&(this.identifier=p),i!=null&&i.__line__&&(this.line=i.__line__)};function _e(r){var i=r.value;return i?[new ie(r.key,i,"constants have been deprecated as of v8")]:[]}function $e(r){for(var i=[],l=arguments.length-1;l-- >0;)i[l]=arguments[l+1];for(var p=0,y=i;p<y.length;p+=1){var v=y[p];for(var x in v)r[x]=v[x]}return r}function Ze(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Ce(r){if(Array.isArray(r))return r.map(Ce);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var i={};for(var l in r)i[l]=Ce(r[l]);return i}return Ze(r)}var Ue=function(r){function i(l,p){r.call(this,p),this.message=p,this.key=l}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Error),St=function(r,i){i===void 0&&(i=[]),this.parent=r,this.bindings={};for(var l=0,p=i;l<p.length;l+=1){var y=p[l];this.bindings[y[0]]=y[1]}};St.prototype.concat=function(r){return new St(this,r)},St.prototype.get=function(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(r+" not found in scope.")},St.prototype.has=function(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)};var _t={kind:"null"},Le={kind:"number"},pt={kind:"string"},lt={kind:"boolean"},De={kind:"color"},fe={kind:"object"},Ee={kind:"value"},He={kind:"collator"},$t={kind:"formatted"},Ht={kind:"resolvedImage"};function Qt(r,i){return{kind:"array",itemType:r,N:i}}function Xt(r){if(r.kind==="array"){var i=Xt(r.itemType);return typeof r.N=="number"?"array<"+i+", "+r.N+">":r.itemType.kind==="value"?"array":"array<"+i+">"}return r.kind}var ti=[_t,Le,pt,lt,De,$t,fe,Qt(Ee),Ht];function er(r,i){if(i.kind==="error")return null;if(r.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!er(r.itemType,i.itemType))&&(typeof r.N!="number"||r.N===i.N))return null}else{if(r.kind===i.kind)return null;if(r.kind==="value"){for(var l=0,p=ti;l<p.length;l+=1)if(!er(p[l],i))return null}}return"Expected "+Xt(r)+" but found "+Xt(i)+" instead."}function yn(r,i){return i.some(function(l){return l.kind===r.kind})}function $r(r,i){return i.some(function(l){return l==="null"?r===null:l==="array"?Array.isArray(r):l==="object"?r&&!Array.isArray(r)&&typeof r=="object":l===typeof r})}var vr=m(function(r,i){var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function p(T){return(T=Math.round(T))<0?0:T>255?255:T}function y(T){return p(T[T.length-1]==="%"?parseFloat(T)/100*255:parseInt(T))}function v(T){return(C=T[T.length-1]==="%"?parseFloat(T)/100:parseFloat(T))<0?0:C>1?1:C;var C}function x(T,C,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?T+(C-T)*A*6:2*A<1?C:3*A<2?T+(C-T)*(2/3-A)*6:T}try{i.parseCSSColor=function(T){var C,A=T.replace(/ /g,"").toLowerCase();if(A in l)return l[A].slice();if(A[0]==="#")return A.length===4?(C=parseInt(A.substr(1),16))>=0&&C<=4095?[(3840&C)>>4|(3840&C)>>8,240&C|(240&C)>>4,15&C|(15&C)<<4,1]:null:A.length===7&&(C=parseInt(A.substr(1),16))>=0&&C<=16777215?[(16711680&C)>>16,(65280&C)>>8,255&C,1]:null;var L=A.indexOf("("),D=A.indexOf(")");if(L!==-1&&D+1===A.length){var B=A.substr(0,L),j=A.substr(L+1,D-(L+1)).split(","),J=1;switch(B){case"rgba":if(j.length!==4)return null;J=v(j.pop());case"rgb":return j.length!==3?null:[y(j[0]),y(j[1]),y(j[2]),J];case"hsla":if(j.length!==4)return null;J=v(j.pop());case"hsl":if(j.length!==3)return null;var ee=(parseFloat(j[0])%360+360)%360/360,he=v(j[1]),oe=v(j[2]),ge=oe<=.5?oe*(he+1):oe+he-oe*he,we=2*oe-ge;return[p(255*x(we,ge,ee+1/3)),p(255*x(we,ge,ee)),p(255*x(we,ge,ee-1/3)),J];default:return null}}return null}}catch{}}).parseCSSColor,Br=function(r,i,l,p){p===void 0&&(p=1),this.r=r,this.g=i,this.b=l,this.a=p};Br.parse=function(r){if(r){if(r instanceof Br)return r;if(typeof r=="string"){var i=vr(r);if(i)return new Br(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3])}}},Br.prototype.toString=function(){var r=this.toArray(),i=r[1],l=r[2],p=r[3];return"rgba("+Math.round(r[0])+","+Math.round(i)+","+Math.round(l)+","+p+")"},Br.prototype.toArray=function(){var r=this.a;return r===0?[0,0,0,0]:[255*this.r/r,255*this.g/r,255*this.b/r,r]},Br.black=new Br(0,0,0,1),Br.white=new Br(1,1,1,1),Br.transparent=new Br(0,0,0,0),Br.red=new Br(1,0,0,1);var no=function(r,i,l){this.sensitivity=r?i?"variant":"case":i?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};no.prototype.compare=function(r,i){return this.collator.compare(r,i)},no.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var zc=function(r,i,l,p,y){this.text=r,this.image=i,this.scale=l,this.fontStack=p,this.textColor=y},_i=function(r){this.sections=r};_i.fromString=function(r){return new _i([new zc(r,null,null,null,null)])},_i.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(r){return r.text.length!==0||r.image&&r.image.name.length!==0})},_i.factory=function(r){return r instanceof _i?r:_i.fromString(r)},_i.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(r){return r.text}).join("")},_i.prototype.serialize=function(){for(var r=["format"],i=0,l=this.sections;i<l.length;i+=1){var p=l[i];if(p.image)r.push(["image",p.image.name]);else{r.push(p.text);var y={};p.fontStack&&(y["text-font"]=["literal",p.fontStack.split(",")]),p.scale&&(y["font-scale"]=p.scale),p.textColor&&(y["text-color"]=["rgba"].concat(p.textColor.toArray())),r.push(y)}}return r};var io=function(r){this.name=r.name,this.available=r.available};function md(r,i,l,p){return typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:"Invalid rgba value ["+[r,i,l,p].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof p=="number"?[r,i,l,p]:[r,i,l]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Fc(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Br||r instanceof no||r instanceof _i||r instanceof io)return!0;if(Array.isArray(r)){for(var i=0,l=r;i<l.length;i+=1)if(!Fc(l[i]))return!1;return!0}if(typeof r=="object"){for(var p in r)if(!Fc(r[p]))return!1;return!0}return!1}function Rn(r){if(r===null)return _t;if(typeof r=="string")return pt;if(typeof r=="boolean")return lt;if(typeof r=="number")return Le;if(r instanceof Br)return De;if(r instanceof no)return He;if(r instanceof _i)return $t;if(r instanceof io)return Ht;if(Array.isArray(r)){for(var i,l=r.length,p=0,y=r;p<y.length;p+=1){var v=Rn(y[p]);if(i){if(i===v)continue;i=Ee;break}i=v}return Qt(i||Ee,l)}return fe}function Bc(r){var i=typeof r;return r===null?"":i==="string"||i==="number"||i==="boolean"?String(r):r instanceof Br||r instanceof _i||r instanceof io?r.toString():JSON.stringify(r)}io.prototype.toString=function(){return this.name},io.fromString=function(r){return r?new io({name:r,available:!1}):null},io.prototype.serialize=function(){return["image",this.name]};var qi=function(r,i){this.type=r,this.value=i};qi.parse=function(r,i){if(r.length!==2)return i.error("'literal' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(!Fc(r[1]))return i.error("invalid value");var l=r[1],p=Rn(l),y=i.expectedType;return p.kind!=="array"||p.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(p=y),new qi(p,l)},qi.prototype.evaluate=function(){return this.value},qi.prototype.eachChild=function(){},qi.prototype.outputDefined=function(){return!0},qi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Br?["rgba"].concat(this.value.toArray()):this.value instanceof _i?this.value.serialize():this.value};var xi=function(r){this.name="ExpressionEvaluationError",this.message=r};xi.prototype.toJSON=function(){return this.message};var Ko={string:pt,number:Le,boolean:lt,object:fe},gn=function(r,i){this.type=r,this.args=i};gn.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var l,p=1,y=r[0];if(y==="array"){var v,x;if(r.length>2){var T=r[1];if(typeof T!="string"||!(T in Ko)||T==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);v=Ko[T],p++}else v=Ee;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return i.error('The length argument to "array" must be a positive integer literal',2);x=r[2],p++}l=Qt(v,x)}else l=Ko[y];for(var C=[];p<r.length;p++){var A=i.parse(r[p],p,Ee);if(!A)return null;C.push(A)}return new gn(l,C)},gn.prototype.evaluate=function(r){for(var i=0;i<this.args.length;i++){var l=this.args[i].evaluate(r);if(!er(this.type,Rn(l)))return l;if(i===this.args.length-1)throw new xi("Expected value to be of type "+Xt(this.type)+", but found "+Xt(Rn(l))+" instead.")}return null},gn.prototype.eachChild=function(r){this.args.forEach(r)},gn.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},gn.prototype.serialize=function(){var r=this.type,i=[r.kind];if(r.kind==="array"){var l=r.itemType;if(l.kind==="string"||l.kind==="number"||l.kind==="boolean"){i.push(l.kind);var p=r.N;(typeof p=="number"||this.args.length>1)&&i.push(p)}}return i.concat(this.args.map(function(y){return y.serialize()}))};var ya=function(r){this.type=$t,this.sections=r};ya.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var l=r[1];if(!Array.isArray(l)&&typeof l=="object")return i.error("First argument must be an image or text section.");for(var p=[],y=!1,v=1;v<=r.length-1;++v){var x=r[v];if(y&&typeof x=="object"&&!Array.isArray(x)){y=!1;var T=null;if(x["font-scale"]&&!(T=i.parse(x["font-scale"],1,Le)))return null;var C=null;if(x["text-font"]&&!(C=i.parse(x["text-font"],1,Qt(pt))))return null;var A=null;if(x["text-color"]&&!(A=i.parse(x["text-color"],1,De)))return null;var L=p[p.length-1];L.scale=T,L.font=C,L.textColor=A}else{var D=i.parse(r[v],1,Ee);if(!D)return null;var B=D.type.kind;if(B!=="string"&&B!=="value"&&B!=="null"&&B!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,p.push({content:D,scale:null,font:null,textColor:null})}}return new ya(p)},ya.prototype.evaluate=function(r){return new _i(this.sections.map(function(i){var l=i.content.evaluate(r);return Rn(l)===Ht?new zc("",l,null,null,null):new zc(Bc(l),null,i.scale?i.scale.evaluate(r):null,i.font?i.font.evaluate(r).join(","):null,i.textColor?i.textColor.evaluate(r):null)}))},ya.prototype.eachChild=function(r){for(var i=0,l=this.sections;i<l.length;i+=1){var p=l[i];r(p.content),p.scale&&r(p.scale),p.font&&r(p.font),p.textColor&&r(p.textColor)}},ya.prototype.outputDefined=function(){return!1},ya.prototype.serialize=function(){for(var r=["format"],i=0,l=this.sections;i<l.length;i+=1){var p=l[i];r.push(p.content.serialize());var y={};p.scale&&(y["font-scale"]=p.scale.serialize()),p.font&&(y["text-font"]=p.font.serialize()),p.textColor&&(y["text-color"]=p.textColor.serialize()),r.push(y)}return r};var Bo=function(r){this.type=Ht,this.input=r};Bo.parse=function(r,i){if(r.length!==2)return i.error("Expected two arguments.");var l=i.parse(r[1],1,pt);return l?new Bo(l):i.error("No image name provided.")},Bo.prototype.evaluate=function(r){var i=this.input.evaluate(r),l=io.fromString(i);return l&&r.availableImages&&(l.available=r.availableImages.indexOf(i)>-1),l},Bo.prototype.eachChild=function(r){r(this.input)},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){return["image",this.input.serialize()]};var Dg={"to-boolean":lt,"to-color":De,"to-number":Le,"to-string":pt},Yo=function(r,i){this.type=r,this.args=i};Yo.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var l=r[0];if((l==="to-boolean"||l==="to-string")&&r.length!==2)return i.error("Expected one argument.");for(var p=Dg[l],y=[],v=1;v<r.length;v++){var x=i.parse(r[v],v,Ee);if(!x)return null;y.push(x)}return new Yo(p,y)},Yo.prototype.evaluate=function(r){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(r));if(this.type.kind==="color"){for(var i,l,p=0,y=this.args;p<y.length;p+=1){if(l=null,(i=y[p].evaluate(r))instanceof Br)return i;if(typeof i=="string"){var v=r.parseColor(i);if(v)return v}else if(Array.isArray(i)&&!(l=i.length<3||i.length>4?"Invalid rbga value "+JSON.stringify(i)+": expected an array containing either three or four numeric values.":md(i[0],i[1],i[2],i[3])))return new Br(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new xi(l||"Could not parse color from value '"+(typeof i=="string"?i:String(JSON.stringify(i)))+"'")}if(this.type.kind==="number"){for(var x=null,T=0,C=this.args;T<C.length;T+=1){if((x=C[T].evaluate(r))===null)return 0;var A=Number(x);if(!isNaN(A))return A}throw new xi("Could not convert "+JSON.stringify(x)+" to number.")}return this.type.kind==="formatted"?_i.fromString(Bc(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?io.fromString(Bc(this.args[0].evaluate(r))):Bc(this.args[0].evaluate(r))},Yo.prototype.eachChild=function(r){this.args.forEach(r)},Yo.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},Yo.prototype.serialize=function(){if(this.type.kind==="formatted")return new ya([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Bo(this.args[0]).serialize();var r=["to-"+this.type.kind];return this.eachChild(function(i){r.push(i.serialize())}),r};var k1=["Unknown","Point","LineString","Polygon"],us=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};us.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},us.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?k1[this.feature.type]:this.feature.type:null},us.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},us.prototype.canonicalID=function(){return this.canonical},us.prototype.properties=function(){return this.feature&&this.feature.properties||{}},us.prototype.parseColor=function(r){var i=this._parseColorCache[r];return i||(i=this._parseColorCache[r]=Br.parse(r)),i};var Ai=function(r,i,l,p){this.name=r,this.type=i,this._evaluate=l,this.args=p};Ai.prototype.evaluate=function(r){return this._evaluate(r,this.args)},Ai.prototype.eachChild=function(r){this.args.forEach(r)},Ai.prototype.outputDefined=function(){return!1},Ai.prototype.serialize=function(){return[this.name].concat(this.args.map(function(r){return r.serialize()}))},Ai.parse=function(r,i){var l,p=r[0],y=Ai.definitions[p];if(!y)return i.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0);for(var v=Array.isArray(y)?y[0]:y.type,x=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,T=x.filter(function(zt){var yt=zt[0];return!Array.isArray(yt)||yt.length===r.length-1}),C=null,A=0,L=T;A<L.length;A+=1){var D=L[A],B=D[0],j=D[1];C=new $s(i.registry,i.path,null,i.scope);for(var J=[],ee=!1,he=1;he<r.length;he++){var oe=r[he],ge=Array.isArray(B)?B[he-1]:B.type,we=C.parse(oe,1+J.length,ge);if(!we){ee=!0;break}J.push(we)}if(!ee)if(Array.isArray(B)&&B.length!==J.length)C.error("Expected "+B.length+" arguments, but found "+J.length+" instead.");else{for(var Te=0;Te<J.length;Te++){var Oe=Array.isArray(B)?B[Te]:B.type,Ve=J[Te];C.concat(Te+1).checkSubtype(Oe,Ve.type)}if(C.errors.length===0)return new Ai(p,v,j,J)}}if(T.length===1)(l=i.errors).push.apply(l,C.errors);else{for(var Ye=(T.length?T:x).map(function(zt){var yt;return yt=zt[0],Array.isArray(yt)?"("+yt.map(Xt).join(", ")+")":"("+Xt(yt.type)+"...)"}).join(" | "),ot=[],Pt=1;Pt<r.length;Pt++){var dt=i.parse(r[Pt],1+ot.length);if(!dt)return null;ot.push(Xt(dt.type))}i.error("Expected arguments of type "+Ye+", but found ("+ot.join(", ")+") instead.")}return null},Ai.register=function(r,i){for(var l in Ai.definitions=i,i)r[l]=Ai};var Na=function(r,i,l){this.type=He,this.locale=l,this.caseSensitive=r,this.diacriticSensitive=i};function Wi(r,i){r[0]=Math.min(r[0],i[0]),r[1]=Math.min(r[1],i[1]),r[2]=Math.max(r[2],i[0]),r[3]=Math.max(r[3],i[1])}function Ol(r,i){return!(r[0]<=i[0]||r[2]>=i[2]||r[1]<=i[1]||r[3]>=i[3])}function L1(r,i){var l=(180+r[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,y=Math.pow(2,i.z);return[Math.round(l*y*8192),Math.round(p*y*8192)]}function D1(r,i,l){return i[1]>r[1]!=l[1]>r[1]&&r[0]<(l[0]-i[0])*(r[1]-i[1])/(l[1]-i[1])+i[0]}function yd(r,i){for(var l,p,y,v,x,T,C,A=!1,L=0,D=i.length;L<D;L++)for(var B=i[L],j=0,J=B.length;j<J-1;j++){if((v=(l=r)[0]-(p=B[j])[0])*(C=l[1]-(y=B[j+1])[1])-(T=l[0]-y[0])*(x=l[1]-p[1])==0&&v*T<=0&&x*C<=0)return!1;D1(r,B[j],B[j+1])&&(A=!A)}return A}function N1(r,i){for(var l=0;l<i.length;l++)if(yd(r,i[l]))return!0;return!1}function Ng(r,i,l,p){var y=p[0]-l[0],v=p[1]-l[1],x=(r[0]-l[0])*v-y*(r[1]-l[1]),T=(i[0]-l[0])*v-y*(i[1]-l[1]);return x>0&&T<0||x<0&&T>0}function R1(r,i,l){for(var p=0,y=l;p<y.length;p+=1)for(var v=y[p],x=0;x<v.length-1;++x)if((D=[(L=v[x+1])[0]-(A=v[x])[0],L[1]-A[1]])[0]*(B=[(C=i)[0]-(T=r)[0],C[1]-T[1]])[1]-D[1]*B[0]!=0&&Ng(T,C,A,L)&&Ng(A,L,T,C))return!0;var T,C,A,L,D,B;return!1}function Rg(r,i){for(var l=0;l<r.length;++l)if(!yd(r[l],i))return!1;for(var p=0;p<r.length-1;++p)if(R1(r[p],r[p+1],i))return!1;return!0}function zg(r,i){for(var l=0;l<i.length;l++)if(Rg(r,i[l]))return!0;return!1}function Du(r,i,l){for(var p=[],y=0;y<r.length;y++){for(var v=[],x=0;x<r[y].length;x++){var T=L1(r[y][x],l);Wi(i,T),v.push(T)}p.push(v)}return p}function gd(r,i,l){for(var p=[],y=0;y<r.length;y++){var v=Du(r[y],i,l);p.push(v)}return p}function Vc(r,i,l,p){if(r[0]<l[0]||r[0]>l[2]){var y=.5*p,v=r[0]-l[0]>y?-p:l[0]-r[0]>y?p:0;v===0&&(v=r[0]-l[2]>y?-p:l[2]-r[0]>y?p:0),r[0]+=v}Wi(i,r)}function Fg(r,i,l,p){for(var y=8192*Math.pow(2,p.z),v=[8192*p.x,8192*p.y],x=[],T=0,C=r;T<C.length;T+=1)for(var A=0,L=C[T];A<L.length;A+=1){var D=L[A],B=[D.x+v[0],D.y+v[1]];Vc(B,i,l,y),x.push(B)}return x}function tf(r,i,l,p){for(var y,v=8192*Math.pow(2,p.z),x=[8192*p.x,8192*p.y],T=[],C=0,A=r;C<A.length;C+=1){for(var L=[],D=0,B=A[C];D<B.length;D+=1){var j=B[D],J=[j.x+x[0],j.y+x[1]];Wi(i,J),L.push(J)}T.push(L)}if(i[2]-i[0]<=v/2){(y=i)[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(var ee=0,he=T;ee<he.length;ee+=1)for(var oe=0,ge=he[ee];oe<ge.length;oe+=1)Vc(ge[oe],i,l,v)}return T}Na.parse=function(r,i){if(r.length!==2)return i.error("Expected one argument.");var l=r[1];if(typeof l!="object"||Array.isArray(l))return i.error("Collator options argument must be an object.");var p=i.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,lt);if(!p)return null;var y=i.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,lt);if(!y)return null;var v=null;return l.locale&&!(v=i.parse(l.locale,1,pt))?null:new Na(p,y,v)},Na.prototype.evaluate=function(r){return new no(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)},Na.prototype.eachChild=function(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)},Na.prototype.outputDefined=function(){return!1},Na.prototype.serialize=function(){var r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]};var Jo=function(r,i){this.type=lt,this.geojson=r,this.geometries=i};function Vs(r){if(r instanceof Ai&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof Jo)return!1;var i=!0;return r.eachChild(function(l){i&&!Vs(l)&&(i=!1)}),i}function Us(r){if(r instanceof Ai&&r.name==="feature-state")return!1;var i=!0;return r.eachChild(function(l){i&&!Us(l)&&(i=!1)}),i}function Cl(r,i){if(r instanceof Ai&&i.indexOf(r.name)>=0)return!1;var l=!0;return r.eachChild(function(p){l&&!Cl(p,i)&&(l=!1)}),l}Jo.parse=function(r,i){if(r.length!==2)return i.error("'within' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(Fc(r[1])){var l=r[1];if(l.type==="FeatureCollection")for(var p=0;p<l.features.length;++p){var y=l.features[p].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Jo(l,l.features[p].geometry)}else if(l.type==="Feature"){var v=l.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Jo(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new Jo(l,l)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Jo.prototype.evaluate=function(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(i,l){var p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],v=i.canonicalID();if(l.type==="Polygon"){var x=Du(l.coordinates,y,v),T=Fg(i.geometry(),p,y,v);if(!Ol(p,y))return!1;for(var C=0,A=T;C<A.length;C+=1)if(!yd(A[C],x))return!1}if(l.type==="MultiPolygon"){var L=gd(l.coordinates,y,v),D=Fg(i.geometry(),p,y,v);if(!Ol(p,y))return!1;for(var B=0,j=D;B<j.length;B+=1)if(!N1(j[B],L))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(i,l){var p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],v=i.canonicalID();if(l.type==="Polygon"){var x=Du(l.coordinates,y,v),T=tf(i.geometry(),p,y,v);if(!Ol(p,y))return!1;for(var C=0,A=T;C<A.length;C+=1)if(!Rg(A[C],x))return!1}if(l.type==="MultiPolygon"){var L=gd(l.coordinates,y,v),D=tf(i.geometry(),p,y,v);if(!Ol(p,y))return!1;for(var B=0,j=D;B<j.length;B+=1)if(!zg(j[B],L))return!1}return!0}(r,this.geometries)}return!1},Jo.prototype.eachChild=function(){},Jo.prototype.outputDefined=function(){return!0},Jo.prototype.serialize=function(){return["within",this.geojson]};var js=function(r,i){this.type=i.type,this.name=r,this.boundExpression=i};js.parse=function(r,i){if(r.length!==2||typeof r[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");var l=r[1];return i.scope.has(l)?new js(l,i.scope.get(l)):i.error('Unknown variable "'+l+'". Make sure "'+l+'" has been bound in an enclosing "let" expression before using it.',1)},js.prototype.evaluate=function(r){return this.boundExpression.evaluate(r)},js.prototype.eachChild=function(){},js.prototype.outputDefined=function(){return!1},js.prototype.serialize=function(){return["var",this.name]};var $s=function(r,i,l,p,y){i===void 0&&(i=[]),p===void 0&&(p=new St),y===void 0&&(y=[]),this.registry=r,this.path=i,this.key=i.map(function(v){return"["+v+"]"}).join(""),this.scope=p,this.errors=y,this.expectedType=l};function rf(r,i){for(var l,p=r.length-1,y=0,v=p,x=0;y<=v;)if((l=r[x=Math.floor((y+v)/2)])<=i){if(x===p||i<r[x+1])return x;y=x+1}else{if(!(l>i))throw new xi("Input is not a number.");v=x-1}return 0}$s.prototype.parse=function(r,i,l,p,y){return y===void 0&&(y={}),i?this.concat(i,l,p)._parse(r,y):this._parse(r,y)},$s.prototype._parse=function(r,i){function l(A,L,D){return D==="assert"?new gn(L,[A]):D==="coerce"?new Yo(L,[A]):A}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var p=r[0];if(typeof p!="string")return this.error("Expression name must be a string, but found "+typeof p+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var y=this.registry[p];if(y){var v=y.parse(r,this);if(!v)return null;if(this.expectedType){var x=this.expectedType,T=v.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||T.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string"){if(this.checkSubtype(x,T))return null}else v=l(v,x,i.typeAnnotation||"coerce");else v=l(v,x,i.typeAnnotation||"assert")}if(!(v instanceof qi)&&v.type.kind!=="resolvedImage"&&function A(L){if(L instanceof js)return A(L.boundExpression);if(L instanceof Ai&&L.name==="error"||L instanceof Na||L instanceof Jo)return!1;var D=L instanceof Yo||L instanceof gn,B=!0;return L.eachChild(function(j){B=D?B&&A(j):B&&j instanceof qi}),!!B&&Vs(L)&&Cl(L,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(v)){var C=new us;try{v=new qi(v.type,v.evaluate(C))}catch(A){return this.error(A.message),null}}return v}return this.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof r+" instead.")},$s.prototype.concat=function(r,i,l){var p=typeof r=="number"?this.path.concat(r):this.path,y=l?this.scope.concat(l):this.scope;return new $s(this.registry,p,i||null,y,this.errors)},$s.prototype.error=function(r){for(var i=[],l=arguments.length-1;l-- >0;)i[l]=arguments[l+1];var p=""+this.key+i.map(function(y){return"["+y+"]"}).join("");this.errors.push(new Ue(p,r))},$s.prototype.checkSubtype=function(r,i){var l=er(r,i);return l&&this.error(l),l};var xo=function(r,i,l){this.type=r,this.input=i,this.labels=[],this.outputs=[];for(var p=0,y=l;p<y.length;p+=1){var v=y[p],x=v[1];this.labels.push(v[0]),this.outputs.push(x)}};function Hn(r,i,l){return r*(1-l)+i*l}xo.parse=function(r,i){if(r.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return i.error("Expected an even number of arguments.");var l=i.parse(r[1],1,Le);if(!l)return null;var p=[],y=null;i.expectedType&&i.expectedType.kind!=="value"&&(y=i.expectedType);for(var v=1;v<r.length;v+=2){var x=v===1?-1/0:r[v],T=r[v+1],C=v,A=v+1;if(typeof x!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(p.length&&p[p.length-1][0]>=x)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);var L=i.parse(T,A,y);if(!L)return null;y=y||L.type,p.push([x,L])}return new xo(y,l,p)},xo.prototype.evaluate=function(r){var i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(r);var p=this.input.evaluate(r);if(p<=i[0])return l[0].evaluate(r);var y=i.length;return p>=i[y-1]?l[y-1].evaluate(r):l[rf(i,p)].evaluate(r)},xo.prototype.eachChild=function(r){r(this.input);for(var i=0,l=this.outputs;i<l.length;i+=1)r(l[i])},xo.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},xo.prototype.serialize=function(){for(var r=["step",this.input.serialize()],i=0;i<this.labels.length;i++)i>0&&r.push(this.labels[i]),r.push(this.outputs[i].serialize());return r};var Nu=Object.freeze({__proto__:null,number:Hn,color:function(r,i,l){return new Br(Hn(r.r,i.r,l),Hn(r.g,i.g,l),Hn(r.b,i.b,l),Hn(r.a,i.a,l))},array:function(r,i,l){return r.map(function(p,y){return Hn(p,i[y],l)})}}),Bg=6/29*3*(6/29),z1=Math.PI/180,F1=180/Math.PI;function vd(r){return r>.008856451679035631?Math.pow(r,1/3):r/Bg+4/29}function _d(r){return r>6/29?r*r*r:Bg*(r-4/29)}function xd(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function bd(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Vg(r){var i=bd(r.r),l=bd(r.g),p=bd(r.b),y=vd((.4124564*i+.3575761*l+.1804375*p)/.95047),v=vd((.2126729*i+.7151522*l+.072175*p)/1);return{l:116*v-16,a:500*(y-v),b:200*(v-vd((.0193339*i+.119192*l+.9503041*p)/1.08883)),alpha:r.a}}function Ug(r){var i=(r.l+16)/116,l=isNaN(r.a)?i:i+r.a/500,p=isNaN(r.b)?i:i-r.b/200;return i=1*_d(i),l=.95047*_d(l),p=1.08883*_d(p),new Br(xd(3.2404542*l-1.5371385*i-.4985314*p),xd(-.969266*l+1.8760108*i+.041556*p),xd(.0556434*l-.2040259*i+1.0572252*p),r.alpha)}function B1(r,i,l){var p=i-r;return r+l*(p>180||p<-180?p-360*Math.round(p/360):p)}var Uc={forward:Vg,reverse:Ug,interpolate:function(r,i,l){return{l:Hn(r.l,i.l,l),a:Hn(r.a,i.a,l),b:Hn(r.b,i.b,l),alpha:Hn(r.alpha,i.alpha,l)}}},jc={forward:function(r){var i=Vg(r),l=i.l,p=i.a,y=i.b,v=Math.atan2(y,p)*F1;return{h:v<0?v+360:v,c:Math.sqrt(p*p+y*y),l,alpha:r.a}},reverse:function(r){var i=r.h*z1,l=r.c;return Ug({l:r.l,a:Math.cos(i)*l,b:Math.sin(i)*l,alpha:r.alpha})},interpolate:function(r,i,l){return{h:B1(r.h,i.h,l),c:Hn(r.c,i.c,l),l:Hn(r.l,i.l,l),alpha:Hn(r.alpha,i.alpha,l)}}},jg=Object.freeze({__proto__:null,lab:Uc,hcl:jc}),Pi=function(r,i,l,p,y){this.type=r,this.operator=i,this.interpolation=l,this.input=p,this.labels=[],this.outputs=[];for(var v=0,x=y;v<x.length;v+=1){var T=x[v],C=T[1];this.labels.push(T[0]),this.outputs.push(C)}};function wd(r,i,l,p){var y=p-l,v=r-l;return y===0?0:i===1?v/y:(Math.pow(i,v)-1)/(Math.pow(i,y)-1)}Pi.interpolationFactor=function(r,i,l,p){var y=0;if(r.name==="exponential")y=wd(i,r.base,l,p);else if(r.name==="linear")y=wd(i,1,l,p);else if(r.name==="cubic-bezier"){var v=r.controlPoints;y=new g(v[0],v[1],v[2],v[3]).solve(wd(i,1,l,p))}return y},Pi.parse=function(r,i){var l=r[0],p=r[1],y=r[2],v=r.slice(3);if(!Array.isArray(p)||p.length===0)return i.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){var x=p[1];if(typeof x!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:x}}else{if(p[0]!=="cubic-bezier")return i.error("Unknown interpolation type "+String(p[0]),1,0);var T=p.slice(1);if(T.length!==4||T.some(function(he){return typeof he!="number"||he<0||he>1}))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:T}}if(r.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(y=i.parse(y,2,Le)))return null;var C=[],A=null;l==="interpolate-hcl"||l==="interpolate-lab"?A=De:i.expectedType&&i.expectedType.kind!=="value"&&(A=i.expectedType);for(var L=0;L<v.length;L+=2){var D=v[L],B=v[L+1],j=L+3,J=L+4;if(typeof D!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(C.length&&C[C.length-1][0]>=D)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);var ee=i.parse(B,J,A);if(!ee)return null;A=A||ee.type,C.push([D,ee])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new Pi(A,l,p,y,C):i.error("Type "+Xt(A)+" is not interpolatable.")},Pi.prototype.evaluate=function(r){var i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(r);var p=this.input.evaluate(r);if(p<=i[0])return l[0].evaluate(r);var y=i.length;if(p>=i[y-1])return l[y-1].evaluate(r);var v=rf(i,p),x=Pi.interpolationFactor(this.interpolation,p,i[v],i[v+1]),T=l[v].evaluate(r),C=l[v+1].evaluate(r);return this.operator==="interpolate"?Nu[this.type.kind.toLowerCase()](T,C,x):this.operator==="interpolate-hcl"?jc.reverse(jc.interpolate(jc.forward(T),jc.forward(C),x)):Uc.reverse(Uc.interpolate(Uc.forward(T),Uc.forward(C),x))},Pi.prototype.eachChild=function(r){r(this.input);for(var i=0,l=this.outputs;i<l.length;i+=1)r(l[i])},Pi.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},Pi.prototype.serialize=function(){var r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i=[this.operator,r,this.input.serialize()],l=0;l<this.labels.length;l++)i.push(this.labels[l],this.outputs[l].serialize());return i};var Gs=function(r,i){this.type=r,this.args=i};Gs.parse=function(r,i){if(r.length<2)return i.error("Expectected at least one argument.");var l=null,p=i.expectedType;p&&p.kind!=="value"&&(l=p);for(var y=[],v=0,x=r.slice(1);v<x.length;v+=1){var T=i.parse(x[v],1+y.length,l,void 0,{typeAnnotation:"omit"});if(!T)return null;l=l||T.type,y.push(T)}var C=p&&y.some(function(A){return er(p,A.type)});return new Gs(C?Ee:l,y)},Gs.prototype.evaluate=function(r){for(var i,l=null,p=0,y=0,v=this.args;y<v.length&&(p++,(l=v[y].evaluate(r))&&l instanceof io&&!l.available&&(i||(i=l.name),l=null,p===this.args.length&&(l=i)),l===null);y+=1);return l},Gs.prototype.eachChild=function(r){this.args.forEach(r)},Gs.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},Gs.prototype.serialize=function(){var r=["coalesce"];return this.eachChild(function(i){r.push(i.serialize())}),r};var qs=function(r,i){this.type=i.type,this.bindings=[].concat(r),this.result=i};qs.prototype.evaluate=function(r){return this.result.evaluate(r)},qs.prototype.eachChild=function(r){for(var i=0,l=this.bindings;i<l.length;i+=1)r(l[i][1]);r(this.result)},qs.parse=function(r,i){if(r.length<4)return i.error("Expected at least 3 arguments, but found "+(r.length-1)+" instead.");for(var l=[],p=1;p<r.length-1;p+=2){var y=r[p];if(typeof y!="string")return i.error("Expected string, but found "+typeof y+" instead.",p);if(/[^a-zA-Z0-9_]/.test(y))return i.error("Variable names must contain only alphanumeric characters or '_'.",p);var v=i.parse(r[p+1],p+1);if(!v)return null;l.push([y,v])}var x=i.parse(r[r.length-1],r.length-1,i.expectedType,l);return x?new qs(l,x):null},qs.prototype.outputDefined=function(){return this.result.outputDefined()},qs.prototype.serialize=function(){for(var r=["let"],i=0,l=this.bindings;i<l.length;i+=1){var p=l[i];r.push(p[0],p[1].serialize())}return r.push(this.result.serialize()),r};var Al=function(r,i,l){this.type=r,this.index=i,this.input=l};Al.parse=function(r,i){if(r.length!==3)return i.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var l=i.parse(r[1],1,Le),p=i.parse(r[2],2,Qt(i.expectedType||Ee));return l&&p?new Al(p.type.itemType,l,p):null},Al.prototype.evaluate=function(r){var i=this.index.evaluate(r),l=this.input.evaluate(r);if(i<0)throw new xi("Array index out of bounds: "+i+" < 0.");if(i>=l.length)throw new xi("Array index out of bounds: "+i+" > "+(l.length-1)+".");if(i!==Math.floor(i))throw new xi("Array index must be an integer, but found "+i+" instead.");return l[i]},Al.prototype.eachChild=function(r){r(this.index),r(this.input)},Al.prototype.outputDefined=function(){return!1},Al.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Pl=function(r,i){this.type=lt,this.needle=r,this.haystack=i};Pl.parse=function(r,i){if(r.length!==3)return i.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var l=i.parse(r[1],1,Ee),p=i.parse(r[2],2,Ee);return l&&p?yn(l.type,[lt,pt,Le,_t,Ee])?new Pl(l,p):i.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt(l.type)+" instead"):null},Pl.prototype.evaluate=function(r){var i=this.needle.evaluate(r),l=this.haystack.evaluate(r);if(!l)return!1;if(!$r(i,["boolean","string","number","null"]))throw new xi("Expected first argument to be of type boolean, string, number or null, but found "+Xt(Rn(i))+" instead.");if(!$r(l,["string","array"]))throw new xi("Expected second argument to be of type array or string, but found "+Xt(Rn(l))+" instead.");return l.indexOf(i)>=0},Pl.prototype.eachChild=function(r){r(this.needle),r(this.haystack)},Pl.prototype.outputDefined=function(){return!0},Pl.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ws=function(r,i,l){this.type=Le,this.needle=r,this.haystack=i,this.fromIndex=l};Ws.parse=function(r,i){if(r.length<=2||r.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var l=i.parse(r[1],1,Ee),p=i.parse(r[2],2,Ee);if(!l||!p)return null;if(!yn(l.type,[lt,pt,Le,_t,Ee]))return i.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt(l.type)+" instead");if(r.length===4){var y=i.parse(r[3],3,Le);return y?new Ws(l,p,y):null}return new Ws(l,p)},Ws.prototype.evaluate=function(r){var i=this.needle.evaluate(r),l=this.haystack.evaluate(r);if(!$r(i,["boolean","string","number","null"]))throw new xi("Expected first argument to be of type boolean, string, number or null, but found "+Xt(Rn(i))+" instead.");if(!$r(l,["string","array"]))throw new xi("Expected second argument to be of type array or string, but found "+Xt(Rn(l))+" instead.");if(this.fromIndex){var p=this.fromIndex.evaluate(r);return l.indexOf(i,p)}return l.indexOf(i)},Ws.prototype.eachChild=function(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)},Ws.prototype.outputDefined=function(){return!1},Ws.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var kl=function(r,i,l,p,y,v){this.inputType=r,this.type=i,this.input=l,this.cases=p,this.outputs=y,this.otherwise=v};kl.parse=function(r,i){if(r.length<5)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(r.length%2!=1)return i.error("Expected an even number of arguments.");var l,p;i.expectedType&&i.expectedType.kind!=="value"&&(p=i.expectedType);for(var y={},v=[],x=2;x<r.length-1;x+=2){var T=r[x],C=r[x+1];Array.isArray(T)||(T=[T]);var A=i.concat(x);if(T.length===0)return A.error("Expected at least one branch label.");for(var L=0,D=T;L<D.length;L+=1){var B=D[L];if(typeof B!="number"&&typeof B!="string")return A.error("Branch labels must be numbers or strings.");if(typeof B=="number"&&Math.abs(B)>Number.MAX_SAFE_INTEGER)return A.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof B=="number"&&Math.floor(B)!==B)return A.error("Numeric branch labels must be integer values.");if(l){if(A.checkSubtype(l,Rn(B)))return null}else l=Rn(B);if(y[String(B)]!==void 0)return A.error("Branch labels must be unique.");y[String(B)]=v.length}var j=i.parse(C,x,p);if(!j)return null;p=p||j.type,v.push(j)}var J=i.parse(r[1],1,Ee);if(!J)return null;var ee=i.parse(r[r.length-1],r.length-1,p);return ee?J.type.kind!=="value"&&i.concat(1).checkSubtype(l,J.type)?null:new kl(l,p,J,y,v,ee):null},kl.prototype.evaluate=function(r){var i=this.input.evaluate(r);return(Rn(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(r)},kl.prototype.eachChild=function(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)},kl.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})&&this.otherwise.outputDefined()},kl.prototype.serialize=function(){for(var r=this,i=["match",this.input.serialize()],l=[],p={},y=0,v=Object.keys(this.cases).sort();y<v.length;y+=1){var x=v[y];(D=p[this.cases[x]])===void 0?(p[this.cases[x]]=l.length,l.push([this.cases[x],[x]])):l[D][1].push(x)}for(var T=function(j){return r.inputType.kind==="number"?Number(j):j},C=0,A=l;C<A.length;C+=1){var L=A[C],D=L[0],B=L[1];i.push(B.length===1?T(B[0]):B.map(T)),i.push(this.outputs[outputIndex$1].serialize())}return i.push(this.otherwise.serialize()),i};var Ll=function(r,i,l){this.type=r,this.branches=i,this.otherwise=l};Ll.parse=function(r,i){if(r.length<4)return i.error("Expected at least 3 arguments, but found only "+(r.length-1)+".");if(r.length%2!=0)return i.error("Expected an odd number of arguments.");var l;i.expectedType&&i.expectedType.kind!=="value"&&(l=i.expectedType);for(var p=[],y=1;y<r.length-1;y+=2){var v=i.parse(r[y],y,lt);if(!v)return null;var x=i.parse(r[y+1],y+1,l);if(!x)return null;p.push([v,x]),l=l||x.type}var T=i.parse(r[r.length-1],r.length-1,l);return T?new Ll(l,p,T):null},Ll.prototype.evaluate=function(r){for(var i=0,l=this.branches;i<l.length;i+=1){var p=l[i],y=p[1];if(p[0].evaluate(r))return y.evaluate(r)}return this.otherwise.evaluate(r)},Ll.prototype.eachChild=function(r){for(var i=0,l=this.branches;i<l.length;i+=1){var p=l[i],y=p[1];r(p[0]),r(y)}r(this.otherwise)},Ll.prototype.outputDefined=function(){return this.branches.every(function(r){return r[1].outputDefined()})&&this.otherwise.outputDefined()},Ll.prototype.serialize=function(){var r=["case"];return this.eachChild(function(i){r.push(i.serialize())}),r};var Hs=function(r,i,l,p){this.type=r,this.input=i,this.beginIndex=l,this.endIndex=p};function $g(r,i){return r==="=="||r==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Gg(r,i,l,p){return p.compare(i,l)===0}function Yr(r,i,l){var p=r!=="=="&&r!=="!=";return function(){function y(v,x,T){this.type=lt,this.lhs=v,this.rhs=x,this.collator=T,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}return y.parse=function(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");var T=v[0],C=x.parse(v[1],1,Ee);if(!C)return null;if(!$g(T,C.type))return x.concat(1).error('"'+T+`" comparisons are not supported for type '`+Xt(C.type)+"'.");var A=x.parse(v[2],2,Ee);if(!A)return null;if(!$g(T,A.type))return x.concat(2).error('"'+T+`" comparisons are not supported for type '`+Xt(A.type)+"'.");if(C.type.kind!==A.type.kind&&C.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot compare types '"+Xt(C.type)+"' and '"+Xt(A.type)+"'.");p&&(C.type.kind==="value"&&A.type.kind!=="value"?C=new gn(A.type,[C]):C.type.kind!=="value"&&A.type.kind==="value"&&(A=new gn(C.type,[A])));var L=null;if(v.length===4){if(C.type.kind!=="string"&&A.type.kind!=="string"&&C.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(!(L=x.parse(v[3],3,He)))return null}return new y(C,A,L)},y.prototype.evaluate=function(v){var x=this.lhs.evaluate(v),T=this.rhs.evaluate(v);if(p&&this.hasUntypedArgument){var C=Rn(x),A=Rn(T);if(C.kind!==A.kind||C.kind!=="string"&&C.kind!=="number")throw new xi('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+C.kind+", "+A.kind+") instead.")}if(this.collator&&!p&&this.hasUntypedArgument){var L=Rn(x),D=Rn(T);if(L.kind!=="string"||D.kind!=="string")return i(v,x,T)}return this.collator?l(v,x,T,this.collator.evaluate(v)):i(v,x,T)},y.prototype.eachChild=function(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)},y.prototype.outputDefined=function(){return!0},y.prototype.serialize=function(){var v=[r];return this.eachChild(function(x){v.push(x.serialize())}),v},y}()}Hs.parse=function(r,i){if(r.length<=2||r.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var l=i.parse(r[1],1,Ee),p=i.parse(r[2],2,Le);if(!l||!p)return null;if(!yn(l.type,[Qt(Ee),pt,Ee]))return i.error("Expected first argument to be of type array or string, but found "+Xt(l.type)+" instead");if(r.length===4){var y=i.parse(r[3],3,Le);return y?new Hs(l.type,l,p,y):null}return new Hs(l.type,l,p)},Hs.prototype.evaluate=function(r){var i=this.input.evaluate(r),l=this.beginIndex.evaluate(r);if(!$r(i,["string","array"]))throw new xi("Expected first argument to be of type array or string, but found "+Xt(Rn(i))+" instead.");if(this.endIndex){var p=this.endIndex.evaluate(r);return i.slice(l,p)}return i.slice(l)},Hs.prototype.eachChild=function(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)},Hs.prototype.outputDefined=function(){return!1},Hs.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var V1=Yr("==",function(r,i,l){return i===l},Gg),nf=Yr("!=",function(r,i,l){return i!==l},function(r,i,l,p){return!Gg(0,i,l,p)}),qg=Yr("<",function(r,i,l){return i<l},function(r,i,l,p){return p.compare(i,l)<0}),Wg=Yr(">",function(r,i,l){return i>l},function(r,i,l,p){return p.compare(i,l)>0}),Hg=Yr("<=",function(r,i,l){return i<=l},function(r,i,l,p){return p.compare(i,l)<=0}),Zg=Yr(">=",function(r,i,l){return i>=l},function(r,i,l,p){return p.compare(i,l)>=0}),Dl=function(r,i,l,p,y){this.type=pt,this.number=r,this.locale=i,this.currency=l,this.minFractionDigits=p,this.maxFractionDigits=y};Dl.parse=function(r,i){if(r.length!==3)return i.error("Expected two arguments.");var l=i.parse(r[1],1,Le);if(!l)return null;var p=r[2];if(typeof p!="object"||Array.isArray(p))return i.error("NumberFormat options argument must be an object.");var y=null;if(p.locale&&!(y=i.parse(p.locale,1,pt)))return null;var v=null;if(p.currency&&!(v=i.parse(p.currency,1,pt)))return null;var x=null;if(p["min-fraction-digits"]&&!(x=i.parse(p["min-fraction-digits"],1,Le)))return null;var T=null;return p["max-fraction-digits"]&&!(T=i.parse(p["max-fraction-digits"],1,Le))?null:new Dl(l,y,v,x,T)},Dl.prototype.evaluate=function(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))},Dl.prototype.eachChild=function(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)},Dl.prototype.outputDefined=function(){return!1},Dl.prototype.serialize=function(){var r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]};var Zs=function(r){this.type=Le,this.input=r};Zs.parse=function(r,i){if(r.length!==2)return i.error("Expected 1 argument, but found "+(r.length-1)+" instead.");var l=i.parse(r[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?i.error("Expected argument of type string or array, but found "+Xt(l.type)+" instead."):new Zs(l):null},Zs.prototype.evaluate=function(r){var i=this.input.evaluate(r);if(typeof i=="string"||Array.isArray(i))return i.length;throw new xi("Expected value to be of type string or array, but found "+Xt(Rn(i))+" instead.")},Zs.prototype.eachChild=function(r){r(this.input)},Zs.prototype.outputDefined=function(){return!1},Zs.prototype.serialize=function(){var r=["length"];return this.eachChild(function(i){r.push(i.serialize())}),r};var Nl={"==":V1,"!=":nf,">":Wg,"<":qg,">=":Zg,"<=":Hg,array:gn,at:Al,boolean:gn,case:Ll,coalesce:Gs,collator:Na,format:ya,image:Bo,in:Pl,"index-of":Ws,interpolate:Pi,"interpolate-hcl":Pi,"interpolate-lab":Pi,length:Zs,let:qs,literal:qi,match:kl,number:gn,"number-format":Dl,object:gn,slice:Hs,step:xo,string:gn,"to-boolean":Yo,"to-color":Yo,"to-number":Yo,"to-string":Yo,var:js,within:Jo};function Xg(r,i){var l=i[0],p=i[1],y=i[2],v=i[3];l=l.evaluate(r),p=p.evaluate(r),y=y.evaluate(r);var x=v?v.evaluate(r):1,T=md(l,p,y,x);if(T)throw new xi(T);return new Br(l/255*x,p/255*x,y/255*x,x)}function Kg(r,i){return r in i}function Ed(r,i){var l=i[r];return l===void 0?null:l}function Rl(r){return{type:r}}function Yg(r){return{result:"success",value:r}}function zl(r){return{result:"error",value:r}}function Fl(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Jg(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function $c(r){return!!r.expression&&r.expression.interpolated}function an(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function of(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function U1(r){return r}function Ru(r,i,l){return r!==void 0?r:i!==void 0?i:l!==void 0?l:void 0}function Qg(r,i,l,p,y){return Ru(typeof l===y?p[l]:void 0,r.default,i.default)}function j1(r,i,l){if(an(l)!=="number")return Ru(r.default,i.default);var p=r.stops.length;if(p===1||l<=r.stops[0][0])return r.stops[0][1];if(l>=r.stops[p-1][0])return r.stops[p-1][1];var y=rf(r.stops.map(function(v){return v[0]}),l);return r.stops[y][1]}function ev(r,i,l){var p=r.base!==void 0?r.base:1;if(an(l)!=="number")return Ru(r.default,i.default);var y=r.stops.length;if(y===1||l<=r.stops[0][0])return r.stops[0][1];if(l>=r.stops[y-1][0])return r.stops[y-1][1];var v=rf(r.stops.map(function(D){return D[0]}),l),x=function(D,B,j,J){var ee=J-j,he=D-j;return ee===0?0:B===1?he/ee:(Math.pow(B,he)-1)/(Math.pow(B,ee)-1)}(l,p,r.stops[v][0],r.stops[v+1][0]),T=r.stops[v][1],C=r.stops[v+1][1],A=Nu[i.type]||U1;if(r.colorSpace&&r.colorSpace!=="rgb"){var L=jg[r.colorSpace];A=function(D,B){return L.reverse(L.interpolate(L.forward(D),L.forward(B),x))}}return typeof T.evaluate=="function"?{evaluate:function(){for(var D=[],B=arguments.length;B--;)D[B]=arguments[B];var j=T.evaluate.apply(void 0,D),J=C.evaluate.apply(void 0,D);if(j!==void 0&&J!==void 0)return A(j,J,x)}}:A(T,C,x)}function af(r,i,l){return i.type==="color"?l=Br.parse(l):i.type==="formatted"?l=_i.fromString(l.toString()):i.type==="resolvedImage"?l=io.fromString(l.toString()):an(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0),Ru(l,r.default,i.default)}Ai.register(Nl,{error:[{kind:"error"},[pt],function(r,i){throw new xi(i[0].evaluate(r))}],typeof:[pt,[Ee],function(r,i){return Xt(Rn(i[0].evaluate(r)))}],"to-rgba":[Qt(Le,4),[De],function(r,i){return i[0].evaluate(r).toArray()}],rgb:[De,[Le,Le,Le],Xg],rgba:[De,[Le,Le,Le,Le],Xg],has:{type:lt,overloads:[[[pt],function(r,i){return Kg(i[0].evaluate(r),r.properties())}],[[pt,fe],function(r,i){var l=i[1];return Kg(i[0].evaluate(r),l.evaluate(r))}]]},get:{type:Ee,overloads:[[[pt],function(r,i){return Ed(i[0].evaluate(r),r.properties())}],[[pt,fe],function(r,i){var l=i[1];return Ed(i[0].evaluate(r),l.evaluate(r))}]]},"feature-state":[Ee,[pt],function(r,i){return Ed(i[0].evaluate(r),r.featureState||{})}],properties:[fe,[],function(r){return r.properties()}],"geometry-type":[pt,[],function(r){return r.geometryType()}],id:[Ee,[],function(r){return r.id()}],zoom:[Le,[],function(r){return r.globals.zoom}],"heatmap-density":[Le,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[Le,[],function(r){return r.globals.lineProgress||0}],accumulated:[Ee,[],function(r){return r.globals.accumulated===void 0?null:r.globals.accumulated}],"+":[Le,Rl(Le),function(r,i){for(var l=0,p=0,y=i;p<y.length;p+=1)l+=y[p].evaluate(r);return l}],"*":[Le,Rl(Le),function(r,i){for(var l=1,p=0,y=i;p<y.length;p+=1)l*=y[p].evaluate(r);return l}],"-":{type:Le,overloads:[[[Le,Le],function(r,i){var l=i[1];return i[0].evaluate(r)-l.evaluate(r)}],[[Le],function(r,i){return-i[0].evaluate(r)}]]},"/":[Le,[Le,Le],function(r,i){var l=i[1];return i[0].evaluate(r)/l.evaluate(r)}],"%":[Le,[Le,Le],function(r,i){var l=i[1];return i[0].evaluate(r)%l.evaluate(r)}],ln2:[Le,[],function(){return Math.LN2}],pi:[Le,[],function(){return Math.PI}],e:[Le,[],function(){return Math.E}],"^":[Le,[Le,Le],function(r,i){var l=i[1];return Math.pow(i[0].evaluate(r),l.evaluate(r))}],sqrt:[Le,[Le],function(r,i){return Math.sqrt(i[0].evaluate(r))}],log10:[Le,[Le],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN10}],ln:[Le,[Le],function(r,i){return Math.log(i[0].evaluate(r))}],log2:[Le,[Le],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN2}],sin:[Le,[Le],function(r,i){return Math.sin(i[0].evaluate(r))}],cos:[Le,[Le],function(r,i){return Math.cos(i[0].evaluate(r))}],tan:[Le,[Le],function(r,i){return Math.tan(i[0].evaluate(r))}],asin:[Le,[Le],function(r,i){return Math.asin(i[0].evaluate(r))}],acos:[Le,[Le],function(r,i){return Math.acos(i[0].evaluate(r))}],atan:[Le,[Le],function(r,i){return Math.atan(i[0].evaluate(r))}],min:[Le,Rl(Le),function(r,i){return Math.min.apply(Math,i.map(function(l){return l.evaluate(r)}))}],max:[Le,Rl(Le),function(r,i){return Math.max.apply(Math,i.map(function(l){return l.evaluate(r)}))}],abs:[Le,[Le],function(r,i){return Math.abs(i[0].evaluate(r))}],round:[Le,[Le],function(r,i){var l=i[0].evaluate(r);return l<0?-Math.round(-l):Math.round(l)}],floor:[Le,[Le],function(r,i){return Math.floor(i[0].evaluate(r))}],ceil:[Le,[Le],function(r,i){return Math.ceil(i[0].evaluate(r))}],"filter-==":[lt,[pt,Ee],function(r,i){var l=i[0],p=i[1];return r.properties()[l.value]===p.value}],"filter-id-==":[lt,[Ee],function(r,i){var l=i[0];return r.id()===l.value}],"filter-type-==":[lt,[pt],function(r,i){var l=i[0];return r.geometryType()===l.value}],"filter-<":[lt,[pt,Ee],function(r,i){var l=i[0],p=i[1],y=r.properties()[l.value],v=p.value;return typeof y==typeof v&&y<v}],"filter-id-<":[lt,[Ee],function(r,i){var l=i[0],p=r.id(),y=l.value;return typeof p==typeof y&&p<y}],"filter->":[lt,[pt,Ee],function(r,i){var l=i[0],p=i[1],y=r.properties()[l.value],v=p.value;return typeof y==typeof v&&y>v}],"filter-id->":[lt,[Ee],function(r,i){var l=i[0],p=r.id(),y=l.value;return typeof p==typeof y&&p>y}],"filter-<=":[lt,[pt,Ee],function(r,i){var l=i[0],p=i[1],y=r.properties()[l.value],v=p.value;return typeof y==typeof v&&y<=v}],"filter-id-<=":[lt,[Ee],function(r,i){var l=i[0],p=r.id(),y=l.value;return typeof p==typeof y&&p<=y}],"filter->=":[lt,[pt,Ee],function(r,i){var l=i[0],p=i[1],y=r.properties()[l.value],v=p.value;return typeof y==typeof v&&y>=v}],"filter-id->=":[lt,[Ee],function(r,i){var l=i[0],p=r.id(),y=l.value;return typeof p==typeof y&&p>=y}],"filter-has":[lt,[Ee],function(r,i){return i[0].value in r.properties()}],"filter-has-id":[lt,[],function(r){return r.id()!==null&&r.id()!==void 0}],"filter-type-in":[lt,[Qt(pt)],function(r,i){return i[0].value.indexOf(r.geometryType())>=0}],"filter-id-in":[lt,[Qt(Ee)],function(r,i){return i[0].value.indexOf(r.id())>=0}],"filter-in-small":[lt,[pt,Qt(Ee)],function(r,i){var l=i[0];return i[1].value.indexOf(r.properties()[l.value])>=0}],"filter-in-large":[lt,[pt,Qt(Ee)],function(r,i){var l=i[0],p=i[1];return function(y,v,x,T){for(;x<=T;){var C=x+T>>1;if(v[C]===y)return!0;v[C]>y?T=C-1:x=C+1}return!1}(r.properties()[l.value],p.value,0,p.value.length-1)}],all:{type:lt,overloads:[[[lt,lt],function(r,i){var l=i[1];return i[0].evaluate(r)&&l.evaluate(r)}],[Rl(lt),function(r,i){for(var l=0,p=i;l<p.length;l+=1)if(!p[l].evaluate(r))return!1;return!0}]]},any:{type:lt,overloads:[[[lt,lt],function(r,i){var l=i[1];return i[0].evaluate(r)||l.evaluate(r)}],[Rl(lt),function(r,i){for(var l=0,p=i;l<p.length;l+=1)if(p[l].evaluate(r))return!0;return!1}]]},"!":[lt,[lt],function(r,i){return!i[0].evaluate(r)}],"is-supported-script":[lt,[pt],function(r,i){var l=r.globals&&r.globals.isSupportedScript;return!l||l(i[0].evaluate(r))}],upcase:[pt,[pt],function(r,i){return i[0].evaluate(r).toUpperCase()}],downcase:[pt,[pt],function(r,i){return i[0].evaluate(r).toLowerCase()}],concat:[pt,Rl(Ee),function(r,i){return i.map(function(l){return Bc(l.evaluate(r))}).join("")}],"resolved-locale":[pt,[He],function(r,i){return i[0].evaluate(r).resolvedLocale()}]});var zu=function(r,i){this.expression=r,this._warningHistory={},this._evaluator=new us,this._defaultValue=i?function(l){return l.type==="color"&&of(l.default)?new Br(0,0,0,0):l.type==="color"?Br.parse(l.default)||null:l.default===void 0?null:l.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null};function Gc(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Nl}function sf(r,i){var l=new $s(Nl,[],i?function(y){var v={color:De,string:pt,number:Le,enum:pt,boolean:lt,formatted:$t,resolvedImage:Ht};return y.type==="array"?Qt(v[y.value]||Ee,y.length):v[y.type]}(i):void 0),p=l.parse(r,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Yg(new zu(p,i)):zl(l.errors)}zu.prototype.evaluateWithoutErrorHandling=function(r,i,l,p,y,v){return this._evaluator.globals=r,this._evaluator.feature=i,this._evaluator.featureState=l,this._evaluator.canonical=p,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)},zu.prototype.evaluate=function(r,i,l,p,y,v){this._evaluator.globals=r,this._evaluator.feature=i||null,this._evaluator.featureState=l||null,this._evaluator.canonical=p,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=v||null;try{var x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new xi("Expected value to be one of "+Object.keys(this._enumValues).map(function(T){return JSON.stringify(T)}).join(", ")+", but found "+JSON.stringify(x)+" instead.");return x}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}};var qc=function(r,i){this.kind=r,this._styleExpression=i,this.isStateDependent=r!=="constant"&&!Us(i.expression)};qc.prototype.evaluateWithoutErrorHandling=function(r,i,l,p,y,v){return this._styleExpression.evaluateWithoutErrorHandling(r,i,l,p,y,v)},qc.prototype.evaluate=function(r,i,l,p,y,v){return this._styleExpression.evaluate(r,i,l,p,y,v)};var Fu=function(r,i,l,p){this.kind=r,this.zoomStops=l,this._styleExpression=i,this.isStateDependent=r!=="camera"&&!Us(i.expression),this.interpolationType=p};function tv(r,i){if((r=sf(r,i)).result==="error")return r;var l=r.value.expression,p=Vs(l);if(!p&&!Fl(i))return zl([new Ue("","data expressions not supported")]);var y=Cl(l,["zoom"]);if(!y&&!Jg(i))return zl([new Ue("","zoom expressions not supported")]);var v=function x(T){var C=null;if(T instanceof qs)C=x(T.result);else if(T instanceof Gs)for(var A=0,L=T.args;A<L.length&&!(C=x(L[A]));A+=1);else(T instanceof xo||T instanceof Pi)&&T.input instanceof Ai&&T.input.name==="zoom"&&(C=T);return C instanceof Ue||T.eachChild(function(D){var B=x(D);B instanceof Ue?C=B:!C&&B?C=new Ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&B&&C!==B&&(C=new Ue("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}(l);return v||y?v instanceof Ue?zl([v]):v instanceof Pi&&!$c(i)?zl([new Ue("",'"interpolate" expressions cannot be used with this property')]):Yg(v?new Fu(p?"camera":"composite",r.value,v.labels,v instanceof Pi?v.interpolation:void 0):new qc(p?"constant":"source",r.value)):zl([new Ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Fu.prototype.evaluateWithoutErrorHandling=function(r,i,l,p,y,v){return this._styleExpression.evaluateWithoutErrorHandling(r,i,l,p,y,v)},Fu.prototype.evaluate=function(r,i,l,p,y,v){return this._styleExpression.evaluate(r,i,l,p,y,v)},Fu.prototype.interpolationFactor=function(r,i,l){return this.interpolationType?Pi.interpolationFactor(this.interpolationType,r,i,l):0};var Bu=function(r,i){this._parameters=r,this._specification=i,$e(this,function l(p,y){var v,x,T,C=y.type==="color",A=p.stops&&typeof p.stops[0][0]=="object",L=A||!(A||p.property!==void 0),D=p.type||($c(y)?"exponential":"interval");if(C&&((p=$e({},p)).stops&&(p.stops=p.stops.map(function(dt){return[dt[0],Br.parse(dt[1])]})),p.default=Br.parse(p.default?p.default:y.default)),p.colorSpace&&p.colorSpace!=="rgb"&&!jg[p.colorSpace])throw new Error("Unknown color space: "+p.colorSpace);if(D==="exponential")v=ev;else if(D==="interval")v=j1;else if(D==="categorical"){v=Qg,x=Object.create(null);for(var B=0,j=p.stops;B<j.length;B+=1){var J=j[B];x[J[0]]=J[1]}T=typeof p.stops[0][0]}else{if(D!=="identity")throw new Error('Unknown function type "'+D+'"');v=af}if(A){for(var ee={},he=[],oe=0;oe<p.stops.length;oe++){var ge=p.stops[oe],we=ge[0].zoom;ee[we]===void 0&&(ee[we]={zoom:we,type:p.type,property:p.property,default:p.default,stops:[]},he.push(we)),ee[we].stops.push([ge[0].value,ge[1]])}for(var Te=[],Oe=0,Ve=he;Oe<Ve.length;Oe+=1){var Ye=Ve[Oe];Te.push([ee[Ye].zoom,l(ee[Ye],y)])}var ot={name:"linear"};return{kind:"composite",interpolationType:ot,interpolationFactor:Pi.interpolationFactor.bind(void 0,ot),zoomStops:Te.map(function(dt){return dt[0]}),evaluate:function(dt,zt){var yt=dt.zoom;return ev({stops:Te,base:p.base},y,yt).evaluate(yt,zt)}}}if(L){var Pt=D==="exponential"?{name:"exponential",base:p.base!==void 0?p.base:1}:null;return{kind:"camera",interpolationType:Pt,interpolationFactor:Pi.interpolationFactor.bind(void 0,Pt),zoomStops:p.stops.map(function(dt){return dt[0]}),evaluate:function(dt){return v(p,y,dt.zoom,x,T)}}}return{kind:"source",evaluate:function(dt,zt){var yt=zt&&zt.properties?zt.properties[p.property]:void 0;return yt===void 0?Ru(p.default,y.default):v(p,y,yt,x,T)}}}(this._parameters,this._specification))};function ga(r){var i=r.key,l=r.value,p=r.valueSpec||{},y=r.objectElementValidators||{},v=r.style,x=r.styleSpec,T=[],C=an(l);if(C!=="object")return[new ie(i,l,"object expected, "+C+" found")];for(var A in l){var L=A.split(".")[0],D=p[L]||p["*"],B=void 0;if(y[L])B=y[L];else if(p[L])B=Sr;else if(y["*"])B=y["*"];else{if(!p["*"]){T.push(new ie(i,l[A],'unknown property "'+A+'"'));continue}B=Sr}T=T.concat(B({key:(i&&i+".")+A,value:l[A],valueSpec:D,style:v,styleSpec:x,object:l,objectKey:A},l))}for(var j in p)y[j]||p[j].required&&p[j].default===void 0&&l[j]===void 0&&T.push(new ie(i,l,'missing required property "'+j+'"'));return T}function rv(r){var i=r.value,l=r.valueSpec,p=r.style,y=r.styleSpec,v=r.key,x=r.arrayElementValidator||Sr;if(an(i)!=="array")return[new ie(v,i,"array expected, "+an(i)+" found")];if(l.length&&i.length!==l.length)return[new ie(v,i,"array length "+l.length+" expected, length "+i.length+" found")];if(l["min-length"]&&i.length<l["min-length"])return[new ie(v,i,"array length at least "+l["min-length"]+" expected, length "+i.length+" found")];var T={type:l.value,values:l.values};y.$version<7&&(T.function=l.function),an(l.value)==="object"&&(T=l.value);for(var C=[],A=0;A<i.length;A++)C=C.concat(x({array:i,arrayIndex:A,value:i[A],valueSpec:T,style:p,styleSpec:y,key:v+"["+A+"]"}));return C}function nv(r){var i=r.key,l=r.value,p=r.valueSpec,y=an(l);return y==="number"&&l!=l&&(y="NaN"),y!=="number"?[new ie(i,l,"number expected, "+y+" found")]:"minimum"in p&&l<p.minimum?[new ie(i,l,l+" is less than the minimum value "+p.minimum)]:"maximum"in p&&l>p.maximum?[new ie(i,l,l+" is greater than the maximum value "+p.maximum)]:[]}function iv(r){var i,l,p,y=r.valueSpec,v=Ze(r.value.type),x={},T=v!=="categorical"&&r.value.property===void 0,C=!T,A=an(r.value.stops)==="array"&&an(r.value.stops[0])==="array"&&an(r.value.stops[0][0])==="object",L=ga({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(j){if(v==="identity")return[new ie(j.key,j.value,'identity function may not have a "stops" property')];var J=[],ee=j.value;return J=J.concat(rv({key:j.key,value:ee,valueSpec:j.valueSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:D})),an(ee)==="array"&&ee.length===0&&J.push(new ie(j.key,ee,"array must have at least one stop")),J},default:function(j){return Sr({key:j.key,value:j.value,valueSpec:y,style:j.style,styleSpec:j.styleSpec})}}});return v==="identity"&&T&&L.push(new ie(r.key,r.value,'missing required property "property"')),v==="identity"||r.value.stops||L.push(new ie(r.key,r.value,'missing required property "stops"')),v==="exponential"&&r.valueSpec.expression&&!$c(r.valueSpec)&&L.push(new ie(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(C&&!Fl(r.valueSpec)?L.push(new ie(r.key,r.value,"property functions not supported")):T&&!Jg(r.valueSpec)&&L.push(new ie(r.key,r.value,"zoom functions not supported"))),v!=="categorical"&&!A||r.value.property!==void 0||L.push(new ie(r.key,r.value,'"property" property is required')),L;function D(j){var J=[],ee=j.value,he=j.key;if(an(ee)!=="array")return[new ie(he,ee,"array expected, "+an(ee)+" found")];if(ee.length!==2)return[new ie(he,ee,"array length 2 expected, length "+ee.length+" found")];if(A){if(an(ee[0])!=="object")return[new ie(he,ee,"object expected, "+an(ee[0])+" found")];if(ee[0].zoom===void 0)return[new ie(he,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new ie(he,ee,"object stop key must have value")];if(p&&p>Ze(ee[0].zoom))return[new ie(he,ee[0].zoom,"stop zoom values must appear in ascending order")];Ze(ee[0].zoom)!==p&&(p=Ze(ee[0].zoom),l=void 0,x={}),J=J.concat(ga({key:he+"[0]",value:ee[0],valueSpec:{zoom:{}},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:nv,value:B}}))}else J=J.concat(B({key:he+"[0]",value:ee[0],valueSpec:{},style:j.style,styleSpec:j.styleSpec},ee));return Gc(Ce(ee[1]))?J.concat([new ie(he+"[1]",ee[1],"expressions are not allowed in function stops.")]):J.concat(Sr({key:he+"[1]",value:ee[1],valueSpec:y,style:j.style,styleSpec:j.styleSpec}))}function B(j,J){var ee=an(j.value),he=Ze(j.value),oe=j.value!==null?j.value:J;if(i){if(ee!==i)return[new ie(j.key,oe,ee+" stop domain type must match previous stop domain type "+i)]}else i=ee;if(ee!=="number"&&ee!=="string"&&ee!=="boolean")return[new ie(j.key,oe,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&v!=="categorical"){var ge="number expected, "+ee+" found";return Fl(y)&&v===void 0&&(ge+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ie(j.key,oe,ge)]}return v!=="categorical"||ee!=="number"||isFinite(he)&&Math.floor(he)===he?v!=="categorical"&&ee==="number"&&l!==void 0&&he<l?[new ie(j.key,oe,"stop domain values must appear in ascending order")]:(l=he,v==="categorical"&&he in x?[new ie(j.key,oe,"stop domain values must be unique")]:(x[he]=!0,[])):[new ie(j.key,oe,"integer expected, found "+he)]}}function Bl(r){var i=(r.expressionContext==="property"?tv:sf)(Ce(r.value),r.valueSpec);if(i.result==="error")return i.value.map(function(p){return new ie(""+r.key+p.key,r.value,p.message)});var l=i.value.expression||i.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!l.outputDefined())return[new ie(r.key,r.value,'Invalid data expression for "'+r.propertyKey+'". Output values must be contained as literals within the expression.')];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Us(l))return[new ie(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Us(l))return[new ie(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!Cl(l,["zoom","feature-state"]))return[new ie(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Vs(l))return[new ie(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Wc(r){var i=r.key,l=r.value,p=r.valueSpec,y=[];return Array.isArray(p.values)?p.values.indexOf(Ze(l))===-1&&y.push(new ie(i,l,"expected one of ["+p.values.join(", ")+"], "+JSON.stringify(l)+" found")):Object.keys(p.values).indexOf(Ze(l))===-1&&y.push(new ie(i,l,"expected one of ["+Object.keys(p.values).join(", ")+"], "+JSON.stringify(l)+" found")),y}function lf(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(var i=0,l=r.slice(1);i<l.length;i+=1){var p=l[i];if(!lf(p)&&typeof p!="boolean")return!1}return!0;default:return!0}}Bu.deserialize=function(r){return new Bu(r._parameters,r._specification)},Bu.serialize=function(r){return{_parameters:r._parameters,_specification:r._specification}};var Sd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function uf(r){if(r==null)return{filter:function(){return!0},needGeometry:!1};lf(r)||(r=cf(r));var i=sf(r,Sd);if(i.result==="error")throw new Error(i.value.map(function(l){return l.key+": "+l.message}).join(", "));return{filter:function(l,p,y){return i.value.evaluate(l,p,{},y)},needGeometry:function l(p){if(!Array.isArray(p))return!1;if(p[0]==="within")return!0;for(var y=1;y<p.length;y++)if(l(p[y]))return!0;return!1}(r)}}function $1(r,i){return r<i?-1:r>i?1:0}function cf(r){if(!r)return!0;var i,l=r[0];return r.length<=1?l!=="any":l==="=="?Td(r[1],r[2],"=="):l==="!="?hf(Td(r[1],r[2],"==")):l==="<"||l===">"||l==="<="||l===">="?Td(r[1],r[2],l):l==="any"?(i=r.slice(1),["any"].concat(i.map(cf))):l==="all"?["all"].concat(r.slice(1).map(cf)):l==="none"?["all"].concat(r.slice(1).map(cf).map(hf)):l==="in"?ov(r[1],r.slice(2)):l==="!in"?hf(ov(r[1],r.slice(2))):l==="has"?av(r[1]):l==="!has"?hf(av(r[1])):l!=="within"||r}function Td(r,i,l){switch(r){case"$type":return["filter-type-"+l,i];case"$id":return["filter-id-"+l,i];default:return["filter-"+l,r,i]}}function ov(r,i){if(i.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(function(l){return typeof l!=typeof i[0]})?["filter-in-large",r,["literal",i.sort($1)]]:["filter-in-small",r,["literal",i]]}}function av(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function hf(r){return["!",r]}function Md(r){return lf(Ce(r.value))?Bl($e({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function i(l){var p=l.value,y=l.key;if(an(p)!=="array")return[new ie(y,p,"array expected, "+an(p)+" found")];var v,x=l.styleSpec,T=[];if(p.length<1)return[new ie(y,p,"filter array must have at least 1 element")];switch(T=T.concat(Wc({key:y+"[0]",value:p[0],valueSpec:x.filter_operator,style:l.style,styleSpec:l.styleSpec})),Ze(p[0])){case"<":case"<=":case">":case">=":p.length>=2&&Ze(p[1])==="$type"&&T.push(new ie(y,p,'"$type" cannot be use with operator "'+p[0]+'"'));case"==":case"!=":p.length!==3&&T.push(new ie(y,p,'filter array for operator "'+p[0]+'" must have 3 elements'));case"in":case"!in":p.length>=2&&(v=an(p[1]))!=="string"&&T.push(new ie(y+"[1]",p[1],"string expected, "+v+" found"));for(var C=2;C<p.length;C++)v=an(p[C]),Ze(p[1])==="$type"?T=T.concat(Wc({key:y+"["+C+"]",value:p[C],valueSpec:x.geometry_type,style:l.style,styleSpec:l.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&T.push(new ie(y+"["+C+"]",p[C],"string, number, or boolean expected, "+v+" found"));break;case"any":case"all":case"none":for(var A=1;A<p.length;A++)T=T.concat(i({key:y+"["+A+"]",value:p[A],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":v=an(p[1]),p.length!==2?T.push(new ie(y,p,'filter array for "'+p[0]+'" operator must have 2 elements')):v!=="string"&&T.push(new ie(y+"[1]",p[1],"string expected, "+v+" found"));break;case"within":v=an(p[1]),p.length!==2?T.push(new ie(y,p,'filter array for "'+p[0]+'" operator must have 2 elements')):v!=="object"&&T.push(new ie(y+"[1]",p[1],"object expected, "+v+" found"))}return T}(r)}function Id(r,i){var l=r.key,p=r.style,y=r.styleSpec,v=r.value,x=r.objectKey,T=y[i+"_"+r.layerType];if(!T)return[];var C=x.match(/^(.*)-transition$/);if(i==="paint"&&C&&T[C[1]]&&T[C[1]].transition)return Sr({key:l,value:v,valueSpec:y.transition,style:p,styleSpec:y});var A,L=r.valueSpec||T[x];if(!L)return[new ie(l,v,'unknown property "'+x+'"')];if(an(v)==="string"&&Fl(L)&&!L.tokens&&(A=/^{([^}]+)}$/.exec(v)))return[new ie(l,v,'"'+x+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(A[1])+" }`.")];var D=[];return r.layerType==="symbol"&&(x==="text-field"&&p&&!p.glyphs&&D.push(new ie(l,v,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&of(Ce(v))&&Ze(v.type)==="identity"&&D.push(new ie(l,v,'"text-font" does not support identity functions'))),D.concat(Sr({key:r.key,value:v,valueSpec:L,style:p,styleSpec:y,expressionContext:"property",propertyType:i,propertyKey:x}))}function Od(r){return Id(r,"paint")}function Hc(r){return Id(r,"layout")}function sv(r){var i=[],l=r.value,p=r.key,y=r.style,v=r.styleSpec;l.type||l.ref||i.push(new ie(p,l,'either "type" or "ref" is required'));var x,T=Ze(l.type),C=Ze(l.ref);if(l.id)for(var A=Ze(l.id),L=0;L<r.arrayIndex;L++){var D=y.layers[L];Ze(D.id)===A&&i.push(new ie(p,l.id,'duplicate layer id "'+l.id+'", previously used at line '+D.id.__line__))}if("ref"in l)["type","source","source-layer","filter","layout"].forEach(function(J){J in l&&i.push(new ie(p,l[J],'"'+J+'" is prohibited for ref layers'))}),y.layers.forEach(function(J){Ze(J.id)===C&&(x=J)}),x?x.ref?i.push(new ie(p,l.ref,"ref cannot reference another ref layer")):T=Ze(x.type):i.push(new ie(p,l.ref,'ref layer "'+C+'" not found'));else if(T!=="background")if(l.source){var B=y.sources&&y.sources[l.source],j=B&&Ze(B.type);B?j==="vector"&&T==="raster"?i.push(new ie(p,l.source,'layer "'+l.id+'" requires a raster source')):j==="raster"&&T!=="raster"?i.push(new ie(p,l.source,'layer "'+l.id+'" requires a vector source')):j!=="vector"||l["source-layer"]?j==="raster-dem"&&T!=="hillshade"?i.push(new ie(p,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!l.paint||!l.paint["line-gradient"]||j==="geojson"&&B.lineMetrics||i.push(new ie(p,l,'layer "'+l.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):i.push(new ie(p,l,'layer "'+l.id+'" must specify a "source-layer"')):i.push(new ie(p,l.source,'source "'+l.source+'" not found'))}else i.push(new ie(p,l,'missing required property "source"'));return i=i.concat(ga({key:p,value:l,valueSpec:v.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Sr({key:p+".type",value:l.type,valueSpec:v.layer.type,style:r.style,styleSpec:r.styleSpec,object:l,objectKey:"type"})},filter:Md,layout:function(J){return ga({layer:l,key:J.key,value:J.value,style:J.style,styleSpec:J.styleSpec,objectElementValidators:{"*":function(ee){return Hc($e({layerType:T},ee))}}})},paint:function(J){return ga({layer:l,key:J.key,value:J.value,style:J.style,styleSpec:J.styleSpec,objectElementValidators:{"*":function(ee){return Od($e({layerType:T},ee))}}})}}}))}function Vl(r){var i=r.value,l=r.key,p=an(i);return p!=="string"?[new ie(l,i,"string expected, "+p+" found")]:[]}var vn={promoteId:function(r){var i=r.key,l=r.value;if(an(l)==="string")return Vl({key:i,value:l});var p=[];for(var y in l)p.push.apply(p,Vl({key:i+"."+y,value:l[y]}));return p}};function ff(r){var i=r.value,l=r.key,p=r.styleSpec,y=r.style;if(!i.type)return[new ie(l,i,'"type" is required')];var v,x=Ze(i.type);switch(x){case"vector":case"raster":case"raster-dem":return ga({key:l,value:i,valueSpec:p["source_"+x.replace("-","_")],style:r.style,styleSpec:p,objectElementValidators:vn});case"geojson":if(v=ga({key:l,value:i,valueSpec:p.source_geojson,style:y,styleSpec:p,objectElementValidators:vn}),i.cluster)for(var T in i.clusterProperties){var C=i.clusterProperties[T],A=C[0],L=typeof A=="string"?[A,["accumulated"],["get",T]]:A;v.push.apply(v,Bl({key:l+"."+T+".map",value:C[1],expressionContext:"cluster-map"})),v.push.apply(v,Bl({key:l+"."+T+".reduce",value:L,expressionContext:"cluster-reduce"}))}return v;case"video":return ga({key:l,value:i,valueSpec:p.source_video,style:y,styleSpec:p});case"image":return ga({key:l,value:i,valueSpec:p.source_image,style:y,styleSpec:p});case"canvas":return[new ie(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Wc({key:l+".type",value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,styleSpec:p})}}function Ul(r){var i=r.value,l=r.styleSpec,p=l.light,y=r.style,v=[],x=an(i);if(i===void 0)return v;if(x!=="object")return v.concat([new ie("light",i,"object expected, "+x+" found")]);for(var T in i){var C=T.match(/^(.*)-transition$/);v=v.concat(C&&p[C[1]]&&p[C[1]].transition?Sr({key:T,value:i[T],valueSpec:l.transition,style:y,styleSpec:l}):p[T]?Sr({key:T,value:i[T],valueSpec:p[T],style:y,styleSpec:l}):[new ie(T,i[T],'unknown property "'+T+'"')])}return v}var Xs={"*":function(){return[]},array:rv,boolean:function(r){var i=r.value,l=r.key,p=an(i);return p!=="boolean"?[new ie(l,i,"boolean expected, "+p+" found")]:[]},number:nv,color:function(r){var i=r.key,l=r.value,p=an(l);return p!=="string"?[new ie(i,l,"color expected, "+p+" found")]:vr(l)===null?[new ie(i,l,'color expected, "'+l+'" found')]:[]},constants:_e,enum:Wc,filter:Md,function:iv,layer:sv,object:ga,source:ff,light:Ul,string:Vl,formatted:function(r){return Vl(r).length===0?[]:Bl(r)},resolvedImage:function(r){return Vl(r).length===0?[]:Bl(r)}};function Sr(r){var i=r.value,l=r.valueSpec,p=r.styleSpec;return l.expression&&of(Ze(i))?iv(r):l.expression&&Gc(Ce(i))?Bl(r):l.type&&Xs[l.type]?Xs[l.type](r):ga($e({},r,{valueSpec:l.type?p[l.type]:l}))}function sn(r){var i=r.value,l=r.key,p=Vl(r);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new ie(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new ie(l,i,'"glyphs" url must include a "{range}" token'))),p}function Vo(r,i){i===void 0&&(i=$);var l=[];return l=l.concat(Sr({key:"",value:r,valueSpec:i.$root,styleSpec:i,style:r,objectElementValidators:{glyphs:sn,"*":function(){return[]}}})),r.constants&&(l=l.concat(_e({key:"constants",value:r.constants,style:r,styleSpec:i}))),Zc(l)}function Zc(r){return[].concat(r).sort(function(i,l){return i.line-l.line})}function Vu(r){return function(){for(var i=[],l=arguments.length;l--;)i[l]=arguments[l];return Zc(r.apply(this,i))}}Vo.source=Vu(ff),Vo.light=Vu(Ul),Vo.layer=Vu(sv),Vo.filter=Vu(Md),Vo.paintProperty=Vu(Od),Vo.layoutProperty=Vu(Hc);var Xc=Vo,G1=Xc.light,q1=Xc.paintProperty,Kc=Xc.layoutProperty;function Yc(r,i){var l=!1;if(i&&i.length)for(var p=0,y=i;p<y.length;p+=1)r.fire(new pe(new Error(y[p].message))),l=!0;return l}var cs=ri;function ri(r,i,l){var p=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var y=new Int32Array(this.arrayBuffer);r=y[0],this.d=(i=y[1])+2*(l=y[2]);for(var v=0;v<this.d*this.d;v++){var x=y[3+v],T=y[3+v+1];p.push(x===T?null:y.subarray(x,T))}var C=y[3+p.length+1];this.keys=y.subarray(y[3+p.length],C),this.bboxes=y.subarray(C),this.insert=this._insertReadonly}else{this.d=i+2*l;for(var A=0;A<this.d*this.d;A++)p.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=r,this.padding=l,this.scale=i/r,this.uid=0;var L=l/i*r;this.min=-L,this.max=r+L}ri.prototype.insert=function(r,i,l,p,y){this._forEachCell(i,l,p,y,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(y)},ri.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ri.prototype._insertCell=function(r,i,l,p,y,v){this.cells[y].push(v)},ri.prototype.query=function(r,i,l,p,y){var v=this.min,x=this.max;if(r<=v&&i<=v&&x<=l&&x<=p&&!y)return Array.prototype.slice.call(this.keys);var T=[];return this._forEachCell(r,i,l,p,this._queryCell,T,{},y),T},ri.prototype._queryCell=function(r,i,l,p,y,v,x,T){var C=this.cells[y];if(C!==null)for(var A=this.keys,L=this.bboxes,D=0;D<C.length;D++){var B=C[D];if(x[B]===void 0){var j=4*B;(T?T(L[j+0],L[j+1],L[j+2],L[j+3]):r<=L[j+2]&&i<=L[j+3]&&l>=L[j+0]&&p>=L[j+1])?(x[B]=!0,v.push(A[B])):x[B]=!1}}},ri.prototype._forEachCell=function(r,i,l,p,y,v,x,T){for(var C=this._convertToCellCoord(r),A=this._convertToCellCoord(i),L=this._convertToCellCoord(l),D=this._convertToCellCoord(p),B=C;B<=L;B++)for(var j=A;j<=D;j++){var J=this.d*j+B;if((!T||T(this._convertFromCellCoord(B),this._convertFromCellCoord(j),this._convertFromCellCoord(B+1),this._convertFromCellCoord(j+1)))&&y.call(this,r,i,l,p,J,v,x,T))return}},ri.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},ri.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},ri.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,i=3+this.cells.length+1+1,l=0,p=0;p<this.cells.length;p++)l+=this.cells[p].length;var y=new Int32Array(i+l+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;for(var v=i,x=0;x<r.length;x++){var T=r[x];y[3+x]=v,y.set(T,v),v+=T.length}return y[3+r.length]=v,y.set(this.keys,v),y[3+r.length+1]=v+=this.keys.length,y.set(this.bboxes,v),v+=this.bboxes.length,y.buffer};var Jc=I.ImageData,lv=I.ImageBitmap,Zn={};function wt(r,i,l){l===void 0&&(l={}),Object.defineProperty(i,"_classRegistryKey",{value:r,writeable:!1}),Zn[r]={klass:i,omit:l.omit||[],shallow:l.shallow||[]}}for(var bo in wt("Object",Object),cs.serialize=function(r,i){var l=r.toArrayBuffer();return i&&i.push(l),{buffer:l}},cs.deserialize=function(r){return new cs(r.buffer)},wt("Grid",cs),wt("Color",Br),wt("Error",Error),wt("ResolvedImage",io),wt("StylePropertyFunction",Bu),wt("StyleExpression",zu,{omit:["_evaluator"]}),wt("ZoomDependentExpression",Fu),wt("ZoomConstantExpression",qc),wt("CompoundExpression",Ai,{omit:["_evaluate"]}),Nl)Nl[bo]._classRegistryKey||wt("Expression_"+bo,Nl[bo]);function pf(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function Uu(r){return lv&&r instanceof lv}function va(r,i){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(pf(r)||Uu(r))return i&&i.push(r),r;if(ArrayBuffer.isView(r)){var l=r;return i&&i.push(l.buffer),l}if(r instanceof Jc)return i&&i.push(r.data.buffer),r;if(Array.isArray(r)){for(var p=[],y=0,v=r;y<v.length;y+=1)p.push(va(v[y],i));return p}if(typeof r=="object"){var x=r.constructor,T=x._classRegistryKey;if(!T)throw new Error("can't serialize object of unregistered class");var C=x.serialize?x.serialize(r,i):{};if(!x.serialize){for(var A in r)if(r.hasOwnProperty(A)&&!(Zn[T].omit.indexOf(A)>=0)){var L=r[A];C[A]=Zn[T].shallow.indexOf(A)>=0?L:va(L,i)}r instanceof Error&&(C.message=r.message)}if(C.$name)throw new Error("$name property is reserved for worker serialization logic.");return T!=="Object"&&(C.$name=T),C}throw new Error("can't serialize object of type "+typeof r)}function wo(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||pf(r)||Uu(r)||ArrayBuffer.isView(r)||r instanceof Jc)return r;if(Array.isArray(r))return r.map(wo);if(typeof r=="object"){var i=r.$name||"Object",l=Zn[i].klass;if(!l)throw new Error("can't deserialize unregistered class "+i);if(l.deserialize)return l.deserialize(r);for(var p=Object.create(l.prototype),y=0,v=Object.keys(r);y<v.length;y+=1){var x=v[y];if(x!=="$name"){var T=r[x];p[x]=Zn[i].shallow.indexOf(x)>=0?T:wo(T)}}return p}throw new Error("can't deserialize object of type "+typeof r)}var Cd=function(){this.first=!0};Cd.prototype.update=function(r,i){var l=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=i),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=l,!0))};var ct={"Latin-1 Supplement":function(r){return r>=128&&r<=255},Arabic:function(r){return r>=1536&&r<=1791},"Arabic Supplement":function(r){return r>=1872&&r<=1919},"Arabic Extended-A":function(r){return r>=2208&&r<=2303},"Hangul Jamo":function(r){return r>=4352&&r<=4607},"Unified Canadian Aboriginal Syllabics":function(r){return r>=5120&&r<=5759},Khmer:function(r){return r>=6016&&r<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(r){return r>=6320&&r<=6399},"General Punctuation":function(r){return r>=8192&&r<=8303},"Letterlike Symbols":function(r){return r>=8448&&r<=8527},"Number Forms":function(r){return r>=8528&&r<=8591},"Miscellaneous Technical":function(r){return r>=8960&&r<=9215},"Control Pictures":function(r){return r>=9216&&r<=9279},"Optical Character Recognition":function(r){return r>=9280&&r<=9311},"Enclosed Alphanumerics":function(r){return r>=9312&&r<=9471},"Geometric Shapes":function(r){return r>=9632&&r<=9727},"Miscellaneous Symbols":function(r){return r>=9728&&r<=9983},"Miscellaneous Symbols and Arrows":function(r){return r>=11008&&r<=11263},"CJK Radicals Supplement":function(r){return r>=11904&&r<=12031},"Kangxi Radicals":function(r){return r>=12032&&r<=12255},"Ideographic Description Characters":function(r){return r>=12272&&r<=12287},"CJK Symbols and Punctuation":function(r){return r>=12288&&r<=12351},Hiragana:function(r){return r>=12352&&r<=12447},Katakana:function(r){return r>=12448&&r<=12543},Bopomofo:function(r){return r>=12544&&r<=12591},"Hangul Compatibility Jamo":function(r){return r>=12592&&r<=12687},Kanbun:function(r){return r>=12688&&r<=12703},"Bopomofo Extended":function(r){return r>=12704&&r<=12735},"CJK Strokes":function(r){return r>=12736&&r<=12783},"Katakana Phonetic Extensions":function(r){return r>=12784&&r<=12799},"Enclosed CJK Letters and Months":function(r){return r>=12800&&r<=13055},"CJK Compatibility":function(r){return r>=13056&&r<=13311},"CJK Unified Ideographs Extension A":function(r){return r>=13312&&r<=19903},"Yijing Hexagram Symbols":function(r){return r>=19904&&r<=19967},"CJK Unified Ideographs":function(r){return r>=19968&&r<=40959},"Yi Syllables":function(r){return r>=40960&&r<=42127},"Yi Radicals":function(r){return r>=42128&&r<=42191},"Hangul Jamo Extended-A":function(r){return r>=43360&&r<=43391},"Hangul Syllables":function(r){return r>=44032&&r<=55215},"Hangul Jamo Extended-B":function(r){return r>=55216&&r<=55295},"Private Use Area":function(r){return r>=57344&&r<=63743},"CJK Compatibility Ideographs":function(r){return r>=63744&&r<=64255},"Arabic Presentation Forms-A":function(r){return r>=64336&&r<=65023},"Vertical Forms":function(r){return r>=65040&&r<=65055},"CJK Compatibility Forms":function(r){return r>=65072&&r<=65103},"Small Form Variants":function(r){return r>=65104&&r<=65135},"Arabic Presentation Forms-B":function(r){return r>=65136&&r<=65279},"Halfwidth and Fullwidth Forms":function(r){return r>=65280&&r<=65519}};function Ad(r){for(var i=0,l=r;i<l.length;i+=1)if(df(l[i].charCodeAt(0)))return!0;return!1}function df(r){return!(r!==746&&r!==747&&(r<4352||!(ct["Bopomofo Extended"](r)||ct.Bopomofo(r)||ct["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||ct["CJK Compatibility Ideographs"](r)||ct["CJK Compatibility"](r)||ct["CJK Radicals Supplement"](r)||ct["CJK Strokes"](r)||!(!ct["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||ct["CJK Unified Ideographs Extension A"](r)||ct["CJK Unified Ideographs"](r)||ct["Enclosed CJK Letters and Months"](r)||ct["Hangul Compatibility Jamo"](r)||ct["Hangul Jamo Extended-A"](r)||ct["Hangul Jamo Extended-B"](r)||ct["Hangul Jamo"](r)||ct["Hangul Syllables"](r)||ct.Hiragana(r)||ct["Ideographic Description Characters"](r)||ct.Kanbun(r)||ct["Kangxi Radicals"](r)||ct["Katakana Phonetic Extensions"](r)||ct.Katakana(r)&&r!==12540||!(!ct["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!ct["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||ct["Unified Canadian Aboriginal Syllabics"](r)||ct["Unified Canadian Aboriginal Syllabics Extended"](r)||ct["Vertical Forms"](r)||ct["Yijing Hexagram Symbols"](r)||ct["Yi Syllables"](r)||ct["Yi Radicals"](r))))}function Pd(r){return!(df(r)||function(i){return!!(ct["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||ct["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||ct["Letterlike Symbols"](i)||ct["Number Forms"](i)||ct["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||ct["Control Pictures"](i)&&i!==9251||ct["Optical Character Recognition"](i)||ct["Enclosed Alphanumerics"](i)||ct["Geometric Shapes"](i)||ct["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||ct["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||ct["CJK Symbols and Punctuation"](i)||ct.Katakana(i)||ct["Private Use Area"](i)||ct["CJK Compatibility Forms"](i)||ct["Small Form Variants"](i)||ct["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(r))}function Qo(r){return r>=1424&&r<=2303||ct["Arabic Presentation Forms-A"](r)||ct["Arabic Presentation Forms-B"](r)}function Eo(r,i){return!(!i&&Qo(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||ct.Khmer(r))}function mf(r){for(var i=0,l=r;i<l.length;i+=1)if(Qo(l[i].charCodeAt(0)))return!0;return!1}var yf=null,So="unavailable",hs=null,uv=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(So="error"),yf&&yf(r)};function Qc(){kd.fire(new Q("pluginStateChange",{pluginStatus:So,pluginURL:hs}))}var kd=new de,Ld=function(){return So},_a=function(){if(So!=="deferred"||!hs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");So="loading",Qc(),hs&&Il({url:hs},function(r){r?uv(r):(So="loaded",Qc())})},Uo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return So==="loaded"||Uo.applyArabicShaping!=null},isLoading:function(){return So==="loading"},setState:function(r){So=r.pluginStatus,hs=r.pluginURL},isParsed:function(){return Uo.applyArabicShaping!=null&&Uo.processBidirectionalText!=null&&Uo.processStyledBidirectionalText!=null},getPluginURL:function(){return hs}},gr=function(r,i){this.zoom=r,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Cd,this.transition={})};gr.prototype.isSupportedScript=function(r){return function(i,l){for(var p=0,y=i;p<y.length;p+=1)if(!Eo(y[p].charCodeAt(0),l))return!1;return!0}(r,Uo.isLoaded())},gr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},gr.prototype.getCrossfadeParameters=function(){var r=this.zoom,i=r-Math.floor(r),l=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*i}};var Ra=function(r,i){this.property=r,this.value=i,this.expression=function(l,p){if(of(l))return new Bu(l,p);if(Gc(l)){var y=tv(l,p);if(y.result==="error")throw new Error(y.value.map(function(x){return x.key+": "+x.message}).join(", "));return y.value}var v=l;return typeof l=="string"&&p.type==="color"&&(v=Br.parse(l)),{kind:"constant",evaluate:function(){return v}}}(i===void 0?r.specification.default:i,r.specification)};Ra.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ra.prototype.possiblyEvaluate=function(r,i,l){return this.property.possiblyEvaluate(this,r,i,l)};var ea=function(r){this.property=r,this.value=new Ra(r,void 0)};ea.prototype.transitioned=function(r,i){return new jl(this.property,this.value,i,X({},r.transition,this.transition),r.now)},ea.prototype.untransitioned=function(){return new jl(this.property,this.value,null,{},0)};var ki=function(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)};ki.prototype.getValue=function(r){return Ke(this._values[r].value.value)},ki.prototype.setValue=function(r,i){this._values.hasOwnProperty(r)||(this._values[r]=new ea(this._values[r].property)),this._values[r].value=new Ra(this._values[r].property,i===null?void 0:Ke(i))},ki.prototype.getTransition=function(r){return Ke(this._values[r].transition)},ki.prototype.setTransition=function(r,i){this._values.hasOwnProperty(r)||(this._values[r]=new ea(this._values[r].property)),this._values[r].transition=Ke(i)||void 0},ki.prototype.serialize=function(){for(var r={},i=0,l=Object.keys(this._values);i<l.length;i+=1){var p=l[i],y=this.getValue(p);y!==void 0&&(r[p]=y);var v=this.getTransition(p);v!==void 0&&(r[p+"-transition"]=v)}return r},ki.prototype.transitioned=function(r,i){for(var l=new Ks(this._properties),p=0,y=Object.keys(this._values);p<y.length;p+=1){var v=y[p];l._values[v]=this._values[v].transitioned(r,i._values[v])}return l},ki.prototype.untransitioned=function(){for(var r=new Ks(this._properties),i=0,l=Object.keys(this._values);i<l.length;i+=1){var p=l[i];r._values[p]=this._values[p].untransitioned()}return r};var jl=function(r,i,l,p,y){this.property=r,this.value=i,this.begin=y+p.delay||0,this.end=this.begin+p.duration||0,r.specification.transition&&(p.delay||p.duration)&&(this.prior=l)};jl.prototype.possiblyEvaluate=function(r,i,l){var p=r.now||0,y=this.value.possiblyEvaluate(r,i,l),v=this.prior;if(v){if(p>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(p<this.begin)return v.possiblyEvaluate(r,i,l);var x=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(r,i,l),y,function(T){if(T<=0)return 0;if(T>=1)return 1;var C=T*T,A=C*T;return 4*(T<.5?A:3*(T-C)+A-.75)}(x))}return y};var Ks=function(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)};Ks.prototype.possiblyEvaluate=function(r,i,l){for(var p=new eh(this._properties),y=0,v=Object.keys(this._values);y<v.length;y+=1){var x=v[y];p._values[x]=this._values[x].possiblyEvaluate(r,i,l)}return p},Ks.prototype.hasTransition=function(){for(var r=0,i=Object.keys(this._values);r<i.length;r+=1)if(this._values[i[r]].prior)return!0;return!1};var xa=function(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)};xa.prototype.getValue=function(r){return Ke(this._values[r].value)},xa.prototype.setValue=function(r,i){this._values[r]=new Ra(this._values[r].property,i===null?void 0:Ke(i))},xa.prototype.serialize=function(){for(var r={},i=0,l=Object.keys(this._values);i<l.length;i+=1){var p=l[i],y=this.getValue(p);y!==void 0&&(r[p]=y)}return r},xa.prototype.possiblyEvaluate=function(r,i,l){for(var p=new eh(this._properties),y=0,v=Object.keys(this._values);y<v.length;y+=1){var x=v[y];p._values[x]=this._values[x].possiblyEvaluate(r,i,l)}return p};var Hi=function(r,i,l){this.property=r,this.value=i,this.parameters=l};Hi.prototype.isConstant=function(){return this.value.kind==="constant"},Hi.prototype.constantOr=function(r){return this.value.kind==="constant"?this.value.value:r},Hi.prototype.evaluate=function(r,i,l,p){return this.property.evaluate(this.value,this.parameters,r,i,l,p)};var eh=function(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)};eh.prototype.get=function(r){return this._values[r]};var Nt=function(r){this.specification=r};Nt.prototype.possiblyEvaluate=function(r,i){return r.expression.evaluate(i)},Nt.prototype.interpolate=function(r,i,l){var p=Nu[this.specification.type];return p?p(r,i,l):r};var Tt=function(r,i){this.specification=r,this.overrides=i};Tt.prototype.possiblyEvaluate=function(r,i,l,p){return new Hi(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(i,null,{},l,p)}:r.expression,i)},Tt.prototype.interpolate=function(r,i,l){if(r.value.kind!=="constant"||i.value.kind!=="constant")return r;if(r.value.value===void 0||i.value.value===void 0)return new Hi(this,{kind:"constant",value:void 0},r.parameters);var p=Nu[this.specification.type];return p?new Hi(this,{kind:"constant",value:p(r.value.value,i.value.value,l)},r.parameters):r},Tt.prototype.evaluate=function(r,i,l,p,y,v){return r.kind==="constant"?r.value:r.evaluate(i,l,p,y,v)};var gf=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(l,p,y,v){if(l.value===void 0)return new Hi(this,{kind:"constant",value:void 0},p);if(l.expression.kind==="constant"){var x=l.expression.evaluate(p,null,{},y,v),T=l.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,C=this._calculate(T,T,T,p);return new Hi(this,{kind:"constant",value:C},p)}if(l.expression.kind==="camera"){var A=this._calculate(l.expression.evaluate({zoom:p.zoom-1}),l.expression.evaluate({zoom:p.zoom}),l.expression.evaluate({zoom:p.zoom+1}),p);return new Hi(this,{kind:"constant",value:A},p)}return new Hi(this,l.expression,p)},i.prototype.evaluate=function(l,p,y,v,x,T){if(l.kind==="source"){var C=l.evaluate(p,y,v,x,T);return this._calculate(C,C,C,p)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(p.zoom)-1},y,v),l.evaluate({zoom:Math.floor(p.zoom)},y,v),l.evaluate({zoom:Math.floor(p.zoom)+1},y,v),p):l.value},i.prototype._calculate=function(l,p,y,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:l,to:p}:{from:y,to:p}},i.prototype.interpolate=function(l){return l},i}(Tt),Zi=function(r){this.specification=r};Zi.prototype.possiblyEvaluate=function(r,i,l,p){if(r.value!==void 0){if(r.expression.kind==="constant"){var y=r.expression.evaluate(i,null,{},l,p);return this._calculate(y,y,y,i)}return this._calculate(r.expression.evaluate(new gr(Math.floor(i.zoom-1),i)),r.expression.evaluate(new gr(Math.floor(i.zoom),i)),r.expression.evaluate(new gr(Math.floor(i.zoom+1),i)),i)}},Zi.prototype._calculate=function(r,i,l,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:i}:{from:l,to:i}},Zi.prototype.interpolate=function(r){return r};var ba=function(r){this.specification=r};ba.prototype.possiblyEvaluate=function(r,i,l,p){return!!r.expression.evaluate(i,null,{},l,p)},ba.prototype.interpolate=function(){return!1};var Li=function(r){for(var i in this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],r){var l=r[i];l.specification.overridable&&this.overridableProperties.push(i);var p=this.defaultPropertyValues[i]=new Ra(l,void 0),y=this.defaultTransitionablePropertyValues[i]=new ea(l);this.defaultTransitioningPropertyValues[i]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=p.possiblyEvaluate({})}};wt("DataDrivenProperty",Tt),wt("DataConstantProperty",Nt),wt("CrossFadedDataDrivenProperty",gf),wt("CrossFadedProperty",Zi),wt("ColorRampProperty",ba);var za=function(r){function i(l,p){if(r.call(this),this.id=l.id,this.type=l.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},l.type!=="custom"&&(this.metadata=(l=l).metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),p.layout&&(this._unevaluatedLayout=new xa(p.layout)),p.paint)){for(var y in this._transitionablePaint=new ki(p.paint),l.paint)this.setPaintProperty(y,l.paint[y],{validate:!1});for(var v in l.layout)this.setLayoutProperty(v,l.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new eh(p.paint)}}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},i.prototype.getLayoutProperty=function(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)},i.prototype.setLayoutProperty=function(l,p,y){y===void 0&&(y={}),p!=null&&this._validate(Kc,"layers."+this.id+".layout."+l,l,p,y)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,p):this.visibility=p)},i.prototype.getPaintProperty=function(l){return Pe(l,"-transition")?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)},i.prototype.setPaintProperty=function(l,p,y){if(y===void 0&&(y={}),p!=null&&this._validate(q1,"layers."+this.id+".paint."+l,l,p,y))return!1;if(Pe(l,"-transition"))return this._transitionablePaint.setTransition(l.slice(0,-11),p||void 0),!1;var v=this._transitionablePaint._values[l],x=v.property.specification["property-type"]==="cross-faded-data-driven",T=v.value.isDataDriven(),C=v.value;this._transitionablePaint.setValue(l,p),this._handleSpecialPaintPropertyUpdate(l);var A=this._transitionablePaint._values[l].value;return A.isDataDriven()||T||x||this._handleOverridablePaintPropertyUpdate(l,C,A)},i.prototype._handleSpecialPaintPropertyUpdate=function(l){},i.prototype._handleOverridablePaintPropertyUpdate=function(l,p,y){return!1},i.prototype.isHidden=function(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"},i.prototype.updateTransitions=function(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)},i.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},i.prototype.recalculate=function(l,p){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,p)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,p)},i.prototype.serialize=function(){var l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),Ie(l,function(p,y){return!(p===void 0||y==="layout"&&!Object.keys(p).length||y==="paint"&&!Object.keys(p).length)})},i.prototype._validate=function(l,p,y,v,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&Yc(this,l.call(Xc,{key:p,layerType:this.type,objectKey:y,value:v,styleSpec:$,style:{glyphs:!0,sprite:!0}}))},i.prototype.is3D=function(){return!1},i.prototype.isTileClipped=function(){return!1},i.prototype.hasOffscreenPass=function(){return!1},i.prototype.resize=function(){},i.prototype.isStateDependent=function(){for(var l in this.paint._values){var p=this.paint.get(l);if(p instanceof Hi&&Fl(p.property.specification)&&(p.value.kind==="source"||p.value.kind==="composite")&&p.value.isStateDependent)return!0}return!1},i}(de),Dd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},vf=function(r,i){this._structArray=r,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Gr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function bi(r,i){i===void 0&&(i=1);var l=0,p=0;return{members:r.map(function(y){var v=Dd[y.type].BYTES_PER_ELEMENT,x=l=cv(l,Math.max(i,v)),T=y.components||1;return p=Math.max(p,v),l+=v*T,{name:y.name,type:y.type,components:T,offset:x}}),size:cv(l,Math.max(p,i)),alignment:i}}function cv(r,i){return Math.ceil(r/i)*i}Gr.serialize=function(r,i){return r._trim(),i&&(r.isTransferred=!0,i.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}},Gr.deserialize=function(r){var i=Object.create(this.prototype);return i.arrayBuffer=r.arrayBuffer,i.length=r.length,i.capacity=r.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i},Gr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Gr.prototype.clear=function(){this.length=0},Gr.prototype.resize=function(r){this.reserve(r),this.length=r},Gr.prototype.reserve=function(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}},Gr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var $l=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p){var y=this.length;return this.resize(y+1),this.emplace(y,l,p)},i.prototype.emplace=function(l,p,y){var v=2*l;return this.int16[v+0]=p,this.int16[v+1]=y,l},i}(Gr);$l.prototype.bytesPerElement=4,wt("StructArrayLayout2i4",$l);var Nd=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v){var x=this.length;return this.resize(x+1),this.emplace(x,l,p,y,v)},i.prototype.emplace=function(l,p,y,v,x){var T=4*l;return this.int16[T+0]=p,this.int16[T+1]=y,this.int16[T+2]=v,this.int16[T+3]=x,l},i}(Gr);Nd.prototype.bytesPerElement=8,wt("StructArrayLayout4i8",Nd);var fs=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,T){var C=this.length;return this.resize(C+1),this.emplace(C,l,p,y,v,x,T)},i.prototype.emplace=function(l,p,y,v,x,T,C){var A=6*l;return this.int16[A+0]=p,this.int16[A+1]=y,this.int16[A+2]=v,this.int16[A+3]=x,this.int16[A+4]=T,this.int16[A+5]=C,l},i}(Gr);fs.prototype.bytesPerElement=12,wt("StructArrayLayout2i4i12",fs);var To=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,T){var C=this.length;return this.resize(C+1),this.emplace(C,l,p,y,v,x,T)},i.prototype.emplace=function(l,p,y,v,x,T,C){var A=4*l,L=8*l;return this.int16[A+0]=p,this.int16[A+1]=y,this.uint8[L+4]=v,this.uint8[L+5]=x,this.uint8[L+6]=T,this.uint8[L+7]=C,l},i}(Gr);To.prototype.bytesPerElement=8,wt("StructArrayLayout2i4ub8",To);var ju=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p){var y=this.length;return this.resize(y+1),this.emplace(y,l,p)},i.prototype.emplace=function(l,p,y){var v=2*l;return this.float32[v+0]=p,this.float32[v+1]=y,l},i}(Gr);ju.prototype.bytesPerElement=8,wt("StructArrayLayout2f8",ju);var Fa=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,T,C,A,L,D){var B=this.length;return this.resize(B+1),this.emplace(B,l,p,y,v,x,T,C,A,L,D)},i.prototype.emplace=function(l,p,y,v,x,T,C,A,L,D,B){var j=10*l;return this.uint16[j+0]=p,this.uint16[j+1]=y,this.uint16[j+2]=v,this.uint16[j+3]=x,this.uint16[j+4]=T,this.uint16[j+5]=C,this.uint16[j+6]=A,this.uint16[j+7]=L,this.uint16[j+8]=D,this.uint16[j+9]=B,l},i}(Gr);Fa.prototype.bytesPerElement=20,wt("StructArrayLayout10ui20",Fa);var _f=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,T,C,A,L,D,B,j){var J=this.length;return this.resize(J+1),this.emplace(J,l,p,y,v,x,T,C,A,L,D,B,j)},i.prototype.emplace=function(l,p,y,v,x,T,C,A,L,D,B,j,J){var ee=12*l;return this.int16[ee+0]=p,this.int16[ee+1]=y,this.int16[ee+2]=v,this.int16[ee+3]=x,this.uint16[ee+4]=T,this.uint16[ee+5]=C,this.uint16[ee+6]=A,this.uint16[ee+7]=L,this.int16[ee+8]=D,this.int16[ee+9]=B,this.int16[ee+10]=j,this.int16[ee+11]=J,l},i}(Gr);_f.prototype.bytesPerElement=24,wt("StructArrayLayout4i4ui4i24",_f);var $u=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y){var v=this.length;return this.resize(v+1),this.emplace(v,l,p,y)},i.prototype.emplace=function(l,p,y,v){var x=3*l;return this.float32[x+0]=p,this.float32[x+1]=y,this.float32[x+2]=v,l},i}(Gr);$u.prototype.bytesPerElement=12,wt("StructArrayLayout3f12",$u);var th=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l){var p=this.length;return this.resize(p+1),this.emplace(p,l)},i.prototype.emplace=function(l,p){return this.uint32[1*l+0]=p,l},i}(Gr);th.prototype.bytesPerElement=4,wt("StructArrayLayout1ul4",th);var Rd=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,T,C,A,L){var D=this.length;return this.resize(D+1),this.emplace(D,l,p,y,v,x,T,C,A,L)},i.prototype.emplace=function(l,p,y,v,x,T,C,A,L,D){var B=10*l,j=5*l;return this.int16[B+0]=p,this.int16[B+1]=y,this.int16[B+2]=v,this.int16[B+3]=x,this.int16[B+4]=T,this.int16[B+5]=C,this.uint32[j+3]=A,this.uint16[B+8]=L,this.uint16[B+9]=D,l},i}(Gr);Rd.prototype.bytesPerElement=20,wt("StructArrayLayout6i1ul2ui20",Rd);var Gu=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,T){var C=this.length;return this.resize(C+1),this.emplace(C,l,p,y,v,x,T)},i.prototype.emplace=function(l,p,y,v,x,T,C){var A=6*l;return this.int16[A+0]=p,this.int16[A+1]=y,this.int16[A+2]=v,this.int16[A+3]=x,this.int16[A+4]=T,this.int16[A+5]=C,l},i}(Gr);Gu.prototype.bytesPerElement=12,wt("StructArrayLayout2i2i2i12",Gu);var Gl=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x){var T=this.length;return this.resize(T+1),this.emplace(T,l,p,y,v,x)},i.prototype.emplace=function(l,p,y,v,x,T){var C=4*l,A=8*l;return this.float32[C+0]=p,this.float32[C+1]=y,this.float32[C+2]=v,this.int16[A+6]=x,this.int16[A+7]=T,l},i}(Gr);Gl.prototype.bytesPerElement=16,wt("StructArrayLayout2f1f2i16",Gl);var zd=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v){var x=this.length;return this.resize(x+1),this.emplace(x,l,p,y,v)},i.prototype.emplace=function(l,p,y,v,x){var T=12*l,C=3*l;return this.uint8[T+0]=p,this.uint8[T+1]=y,this.float32[C+1]=v,this.float32[C+2]=x,l},i}(Gr);zd.prototype.bytesPerElement=12,wt("StructArrayLayout2ub2f12",zd);var Ys=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y){var v=this.length;return this.resize(v+1),this.emplace(v,l,p,y)},i.prototype.emplace=function(l,p,y,v){var x=3*l;return this.uint16[x+0]=p,this.uint16[x+1]=y,this.uint16[x+2]=v,l},i}(Gr);Ys.prototype.bytesPerElement=6,wt("StructArrayLayout3ui6",Ys);var Js=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,T,C,A,L,D,B,j,J,ee,he,oe,ge){var we=this.length;return this.resize(we+1),this.emplace(we,l,p,y,v,x,T,C,A,L,D,B,j,J,ee,he,oe,ge)},i.prototype.emplace=function(l,p,y,v,x,T,C,A,L,D,B,j,J,ee,he,oe,ge,we){var Te=24*l,Oe=12*l,Ve=48*l;return this.int16[Te+0]=p,this.int16[Te+1]=y,this.uint16[Te+2]=v,this.uint16[Te+3]=x,this.uint32[Oe+2]=T,this.uint32[Oe+3]=C,this.uint32[Oe+4]=A,this.uint16[Te+10]=L,this.uint16[Te+11]=D,this.uint16[Te+12]=B,this.float32[Oe+7]=j,this.float32[Oe+8]=J,this.uint8[Ve+36]=ee,this.uint8[Ve+37]=he,this.uint8[Ve+38]=oe,this.uint32[Oe+10]=ge,this.int16[Te+22]=we,l},i}(Gr);Js.prototype.bytesPerElement=48,wt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Js);var xf=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v,x,T,C,A,L,D,B,j,J,ee,he,oe,ge,we,Te,Oe,Ve,Ye,ot,Pt,dt,zt,yt,ur){var qt=this.length;return this.resize(qt+1),this.emplace(qt,l,p,y,v,x,T,C,A,L,D,B,j,J,ee,he,oe,ge,we,Te,Oe,Ve,Ye,ot,Pt,dt,zt,yt,ur)},i.prototype.emplace=function(l,p,y,v,x,T,C,A,L,D,B,j,J,ee,he,oe,ge,we,Te,Oe,Ve,Ye,ot,Pt,dt,zt,yt,ur,qt){var Mt=34*l,pr=17*l;return this.int16[Mt+0]=p,this.int16[Mt+1]=y,this.int16[Mt+2]=v,this.int16[Mt+3]=x,this.int16[Mt+4]=T,this.int16[Mt+5]=C,this.int16[Mt+6]=A,this.int16[Mt+7]=L,this.uint16[Mt+8]=D,this.uint16[Mt+9]=B,this.uint16[Mt+10]=j,this.uint16[Mt+11]=J,this.uint16[Mt+12]=ee,this.uint16[Mt+13]=he,this.uint16[Mt+14]=oe,this.uint16[Mt+15]=ge,this.uint16[Mt+16]=we,this.uint16[Mt+17]=Te,this.uint16[Mt+18]=Oe,this.uint16[Mt+19]=Ve,this.uint16[Mt+20]=Ye,this.uint16[Mt+21]=ot,this.uint16[Mt+22]=Pt,this.uint32[pr+12]=dt,this.float32[pr+13]=zt,this.float32[pr+14]=yt,this.float32[pr+15]=ur,this.float32[pr+16]=qt,l},i}(Gr);xf.prototype.bytesPerElement=68,wt("StructArrayLayout8i15ui1ul4f68",xf);var Qs=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l){var p=this.length;return this.resize(p+1),this.emplace(p,l)},i.prototype.emplace=function(l,p){return this.float32[1*l+0]=p,l},i}(Gr);Qs.prototype.bytesPerElement=4,wt("StructArrayLayout1f4",Qs);var ta=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y){var v=this.length;return this.resize(v+1),this.emplace(v,l,p,y)},i.prototype.emplace=function(l,p,y,v){var x=3*l;return this.int16[x+0]=p,this.int16[x+1]=y,this.int16[x+2]=v,l},i}(Gr);ta.prototype.bytesPerElement=6,wt("StructArrayLayout3i6",ta);var Fd=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y){var v=this.length;return this.resize(v+1),this.emplace(v,l,p,y)},i.prototype.emplace=function(l,p,y,v){var x=4*l;return this.uint32[2*l+0]=p,this.uint16[x+2]=y,this.uint16[x+3]=v,l},i}(Gr);Fd.prototype.bytesPerElement=8,wt("StructArrayLayout1ul2ui8",Fd);var rh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p){var y=this.length;return this.resize(y+1),this.emplace(y,l,p)},i.prototype.emplace=function(l,p,y){var v=2*l;return this.uint16[v+0]=p,this.uint16[v+1]=y,l},i}(Gr);rh.prototype.bytesPerElement=4,wt("StructArrayLayout2ui4",rh);var Bd=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l){var p=this.length;return this.resize(p+1),this.emplace(p,l)},i.prototype.emplace=function(l,p){return this.uint16[1*l+0]=p,l},i}(Gr);Bd.prototype.bytesPerElement=2,wt("StructArrayLayout1ui2",Bd);var bf=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,p,y,v){var x=this.length;return this.resize(x+1),this.emplace(x,l,p,y,v)},i.prototype.emplace=function(l,p,y,v,x){var T=4*l;return this.float32[T+0]=p,this.float32[T+1]=y,this.float32[T+2]=v,this.float32[T+3]=x,l},i}(Gr);bf.prototype.bytesPerElement=16,wt("StructArrayLayout4f16",bf);var u=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var l={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return l.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},l.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},l.x1.get=function(){return this._structArray.int16[this._pos2+2]},l.y1.get=function(){return this._structArray.int16[this._pos2+3]},l.x2.get=function(){return this._structArray.int16[this._pos2+4]},l.y2.get=function(){return this._structArray.int16[this._pos2+5]},l.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},l.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},l.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},l.anchorPoint.get=function(){return new E(this.anchorPointX,this.anchorPointY)},Object.defineProperties(i.prototype,l),i}(vf);u.prototype.size=20;var h=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(l){return new u(this,l)},i}(Rd);wt("CollisionBoxArray",h);var c=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var l={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return l.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},l.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},l.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},l.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},l.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},l.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},l.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},l.segment.get=function(){return this._structArray.uint16[this._pos2+10]},l.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},l.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},l.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},l.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},l.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},l.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},l.placedOrientation.set=function(p){this._structArray.uint8[this._pos1+37]=p},l.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},l.hidden.set=function(p){this._structArray.uint8[this._pos1+38]=p},l.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},l.crossTileID.set=function(p){this._structArray.uint32[this._pos4+10]=p},l.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(i.prototype,l),i}(vf);c.prototype.size=48;var d=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(l){return new c(this,l)},i}(Js);wt("PlacedSymbolArray",d);var _=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var l={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return l.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},l.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},l.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},l.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},l.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},l.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},l.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},l.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},l.key.get=function(){return this._structArray.uint16[this._pos2+8]},l.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},l.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},l.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},l.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},l.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},l.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},l.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},l.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},l.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},l.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},l.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},l.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},l.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},l.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},l.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},l.crossTileID.set=function(p){this._structArray.uint32[this._pos4+12]=p},l.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},l.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},l.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},l.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(i.prototype,l),i}(vf);_.prototype.size=68;var w=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(l){return new _(this,l)},i}(xf);wt("SymbolInstanceArray",w);var S=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getoffsetX=function(l){return this.float32[1*l+0]},i}(Qs);wt("GlyphOffsetArray",S);var O=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getx=function(l){return this.int16[3*l+0]},i.prototype.gety=function(l){return this.int16[3*l+1]},i.prototype.gettileUnitDistanceFromAnchor=function(l){return this.int16[3*l+2]},i}(ta);wt("SymbolLineVertexArray",O);var k=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var l={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return l.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},l.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},l.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(i.prototype,l),i}(vf);k.prototype.size=8;var R=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(l){return new k(this,l)},i}(Fd);wt("FeatureIndexArray",R);var G=bi([{name:"a_pos",components:2,type:"Int16"}],4).members,W=function(r){r===void 0&&(r=[]),this.segments=r};function H(r,i){return 256*(r=q(Math.floor(r),0,255))+q(Math.floor(i),0,255)}W.prototype.prepareSegment=function(r,i,l,p){var y=this.segments[this.segments.length-1];return r>W.MAX_VERTEX_ARRAY_LENGTH&&st("Max vertices per segment is "+W.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+r),(!y||y.vertexLength+r>W.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==p)&&(y={vertexOffset:i.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},p!==void 0&&(y.sortKey=p),this.segments.push(y)),y},W.prototype.get=function(){return this.segments},W.prototype.destroy=function(){for(var r=0,i=this.segments;r<i.length;r+=1){var l=i[r];for(var p in l.vaos)l.vaos[p].destroy()}},W.simpleSegment=function(r,i,l,p){return new W([{vertexOffset:r,primitiveOffset:i,vertexLength:l,primitiveLength:p,vaos:{},sortKey:0}])},W.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wt("SegmentVector",W);var ne=bi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),te=m(function(r){r.exports=function(i,l){var p,y,v,x,T,C,A,L;for(y=i.length-(p=3&i.length),v=l,T=3432918353,C=461845907,L=0;L<y;)A=255&i.charCodeAt(L)|(255&i.charCodeAt(++L))<<8|(255&i.charCodeAt(++L))<<16|(255&i.charCodeAt(++L))<<24,++L,v=27492+(65535&(x=5*(65535&(v=(v^=A=(65535&(A=(A=(65535&A)*T+(((A>>>16)*T&65535)<<16)&4294967295)<<15|A>>>17))*C+(((A>>>16)*C&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(A=0,p){case 3:A^=(255&i.charCodeAt(L+2))<<16;case 2:A^=(255&i.charCodeAt(L+1))<<8;case 1:v^=A=(65535&(A=(A=(65535&(A^=255&i.charCodeAt(L)))*T+(((A>>>16)*T&65535)<<16)&4294967295)<<15|A>>>17))*C+(((A>>>16)*C&65535)<<16)&4294967295}return v^=i.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}}),ue=m(function(r){r.exports=function(i,l){for(var p,y=i.length,v=l^y,x=0;y>=4;)p=1540483477*(65535&(p=255&i.charCodeAt(x)|(255&i.charCodeAt(++x))<<8|(255&i.charCodeAt(++x))<<16|(255&i.charCodeAt(++x))<<24))+((1540483477*(p>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),y-=4,++x;switch(y){case 3:v^=(255&i.charCodeAt(x+2))<<16;case 2:v^=(255&i.charCodeAt(x+1))<<8;case 1:v=1540483477*(65535&(v^=255&i.charCodeAt(x)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}}),Y=te,le=ue;Y.murmur3=te,Y.murmur2=le;var me=function(){this.ids=[],this.positions=[],this.indexed=!1};me.prototype.add=function(r,i,l,p){this.ids.push(Ae(r)),this.positions.push(i,l,p)},me.prototype.getPositions=function(r){for(var i=Ae(r),l=0,p=this.ids.length-1;l<p;){var y=l+p>>1;this.ids[y]>=i?p=y:l=y+1}for(var v=[];this.ids[l]===i;)v.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return v},me.serialize=function(r,i){var l=new Float64Array(r.ids),p=new Uint32Array(r.positions);return function y(v,x,T,C){for(;T<C;){for(var A=v[T+C>>1],L=T-1,D=C+1;;){do L++;while(v[L]<A);do D--;while(v[D]>A);if(L>=D)break;Me(v,L,D),Me(x,3*L,3*D),Me(x,3*L+1,3*D+1),Me(x,3*L+2,3*D+2)}D-T<C-D?(y(v,x,T,D),T=D+1):(y(v,x,D+1,C),C=D)}}(l,p,0,l.length-1),i&&i.push(l.buffer,p.buffer),{ids:l,positions:p}},me.deserialize=function(r){var i=new me;return i.ids=r.ids,i.positions=r.positions,i.indexed=!0,i};var xe=Math.pow(2,53)-1;function Ae(r){var i=+r;return!isNaN(i)&&i<=xe?i:Y(String(r))}function Me(r,i,l){var p=r[i];r[i]=r[l],r[l]=p}wt("FeaturePositionMap",me);var ke=function(r,i){this.gl=r.gl,this.location=i},je=function(r){function i(l,p){r.call(this,l,p),this.current=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))},i}(ke),it=function(r){function i(l,p){r.call(this,l,p),this.current=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))},i}(ke),rt=function(r){function i(l,p){r.call(this,l,p),this.current=[0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))},i}(ke),gt=function(r){function i(l,p){r.call(this,l,p),this.current=[0,0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))},i}(ke),Rt=function(r){function i(l,p){r.call(this,l,p),this.current=[0,0,0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))},i}(ke),Ut=function(r){function i(l,p){r.call(this,l,p),this.current=Br.transparent}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))},i}(ke),Bt=new Float32Array(16),Cr=function(r){function i(l,p){r.call(this,l,p),this.current=Bt}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(var p=1;p<16;p++)if(l[p]!==this.current[p]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}},i}(ke);function xt(r){return[H(255*r.r,255*r.g),H(255*r.b,255*r.a)]}var Jt=function(r,i,l){this.value=r,this.uniformNames=i.map(function(p){return"u_"+p}),this.type=l};Jt.prototype.setUniform=function(r,i,l){r.set(l.constantOr(this.value))},Jt.prototype.getBinding=function(r,i,l){return this.type==="color"?new Ut(r,i):new it(r,i)};var sr=function(r,i){this.uniformNames=i.map(function(l){return"u_"+l}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};sr.prototype.setConstantPatternPositions=function(r,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=r.tlbr},sr.prototype.setUniform=function(r,i,l,p){var y=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&r.set(y)},sr.prototype.getBinding=function(r,i,l){return l.substr(0,9)==="u_pattern"?new Rt(r,i):new it(r,i)};var Yt=function(r,i,l,p){this.expression=r,this.type=l,this.maxValue=0,this.paintVertexAttributes=i.map(function(y){return{name:"a_"+y,type:"Float32",components:l==="color"?2:1,offset:0}}),this.paintVertexArray=new p};Yt.prototype.populatePaintArray=function(r,i,l,p,y){var v=this.paintVertexArray.length,x=this.expression.evaluate(new gr(0),i,{},p,[],y);this.paintVertexArray.resize(r),this._setPaintValue(v,r,x)},Yt.prototype.updatePaintArray=function(r,i,l,p){var y=this.expression.evaluate({zoom:0},l,p);this._setPaintValue(r,i,y)},Yt.prototype._setPaintValue=function(r,i,l){if(this.type==="color")for(var p=xt(l),y=r;y<i;y++)this.paintVertexArray.emplace(y,p[0],p[1]);else{for(var v=r;v<i;v++)this.paintVertexArray.emplace(v,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}},Yt.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Yt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Kt=function(r,i,l,p,y,v){this.expression=r,this.uniformNames=i.map(function(x){return"u_"+x+"_t"}),this.type=l,this.useIntegerZoom=p,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=i.map(function(x){return{name:"a_"+x,type:"Float32",components:l==="color"?4:2,offset:0}}),this.paintVertexArray=new v};Kt.prototype.populatePaintArray=function(r,i,l,p,y){var v=this.expression.evaluate(new gr(this.zoom),i,{},p,[],y),x=this.expression.evaluate(new gr(this.zoom+1),i,{},p,[],y),T=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(T,r,v,x)},Kt.prototype.updatePaintArray=function(r,i,l,p){var y=this.expression.evaluate({zoom:this.zoom},l,p),v=this.expression.evaluate({zoom:this.zoom+1},l,p);this._setPaintValue(r,i,y,v)},Kt.prototype._setPaintValue=function(r,i,l,p){if(this.type==="color")for(var y=xt(l),v=xt(p),x=r;x<i;x++)this.paintVertexArray.emplace(x,y[0],y[1],v[0],v[1]);else{for(var T=r;T<i;T++)this.paintVertexArray.emplace(T,l,p);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(p))}},Kt.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Kt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Kt.prototype.setUniform=function(r,i){var l=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,p=q(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);r.set(p)},Kt.prototype.getBinding=function(r,i,l){return new it(r,i)};var or=function(r,i,l,p,y,v){this.expression=r,this.type=i,this.useIntegerZoom=l,this.zoom=p,this.layerId=v,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y};or.prototype.populatePaintArray=function(r,i,l){var p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(p,r,i.patterns&&i.patterns[this.layerId],l)},or.prototype.updatePaintArray=function(r,i,l,p,y){this._setPaintValues(r,i,l.patterns&&l.patterns[this.layerId],y)},or.prototype._setPaintValues=function(r,i,l,p){if(p&&l){var y=p[l.min],v=p[l.mid],x=p[l.max];if(y&&v&&x)for(var T=r;T<i;T++)this.zoomInPaintVertexArray.emplace(T,v.tl[0],v.tl[1],v.br[0],v.br[1],y.tl[0],y.tl[1],y.br[0],y.br[1],v.pixelRatio,y.pixelRatio),this.zoomOutPaintVertexArray.emplace(T,v.tl[0],v.tl[1],v.br[0],v.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],v.pixelRatio,x.pixelRatio)}},or.prototype.upload=function(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,ne.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,ne.members,this.expression.isStateDependent))},or.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Zt=function(r,i,l){this.binders={},this._buffers=[];var p=[];for(var y in r.paint._values)if(l(y)){var v=r.paint.get(y);if(v instanceof Hi&&Fl(v.property.specification)){var x=pi(y,r.type),T=v.value,C=v.property.specification.type,A=v.property.useIntegerZoom,L=v.property.specification["property-type"],D=L==="cross-faded"||L==="cross-faded-data-driven";if(T.kind==="constant")this.binders[y]=D?new sr(T.value,x):new Jt(T.value,x,C),p.push("/u_"+y);else if(T.kind==="source"||D){var B=An(y,C,"source");this.binders[y]=D?new or(T,C,A,i,B,r.id):new Yt(T,x,C,B),p.push("/a_"+y)}else{var j=An(y,C,"composite");this.binders[y]=new Kt(T,x,C,A,i,j),p.push("/z_"+y)}}}this.cacheKey=p.sort().join("")};Zt.prototype.getMaxValue=function(r){var i=this.binders[r];return i instanceof Yt||i instanceof Kt?i.maxValue:0},Zt.prototype.populatePaintArrays=function(r,i,l,p,y){for(var v in this.binders){var x=this.binders[v];(x instanceof Yt||x instanceof Kt||x instanceof or)&&x.populatePaintArray(r,i,l,p,y)}},Zt.prototype.setConstantPatternPositions=function(r,i){for(var l in this.binders){var p=this.binders[l];p instanceof sr&&p.setConstantPatternPositions(r,i)}},Zt.prototype.updatePaintArrays=function(r,i,l,p,y){var v=!1;for(var x in r)for(var T=0,C=i.getPositions(x);T<C.length;T+=1){var A=C[T],L=l.feature(A.index);for(var D in this.binders){var B=this.binders[D];if((B instanceof Yt||B instanceof Kt||B instanceof or)&&B.expression.isStateDependent===!0){var j=p.paint.get(D);B.expression=j.value,B.updatePaintArray(A.start,A.end,L,r[x],y),v=!0}}}return v},Zt.prototype.defines=function(){var r=[];for(var i in this.binders){var l=this.binders[i];(l instanceof Jt||l instanceof sr)&&r.push.apply(r,l.uniformNames.map(function(p){return"#define HAS_UNIFORM_"+p}))}return r},Zt.prototype.getBinderAttributes=function(){var r=[];for(var i in this.binders){var l=this.binders[i];if(l instanceof Yt||l instanceof Kt)for(var p=0;p<l.paintVertexAttributes.length;p++)r.push(l.paintVertexAttributes[p].name);else if(l instanceof or)for(var y=0;y<ne.members.length;y++)r.push(ne.members[y].name)}return r},Zt.prototype.getBinderUniforms=function(){var r=[];for(var i in this.binders){var l=this.binders[i];if(l instanceof Jt||l instanceof sr||l instanceof Kt)for(var p=0,y=l.uniformNames;p<y.length;p+=1)r.push(y[p])}return r},Zt.prototype.getPaintVertexBuffers=function(){return this._buffers},Zt.prototype.getUniforms=function(r,i){var l=[];for(var p in this.binders){var y=this.binders[p];if(y instanceof Jt||y instanceof sr||y instanceof Kt)for(var v=0,x=y.uniformNames;v<x.length;v+=1){var T=x[v];if(i[T]){var C=y.getBinding(r,i[T],T);l.push({name:T,property:p,binding:C})}}}return l},Zt.prototype.setUniforms=function(r,i,l,p){for(var y=0,v=i;y<v.length;y+=1){var x=v[y],T=x.name,C=x.property;this.binders[C].setUniform(x.binding,p,l.get(C),T)}},Zt.prototype.updatePaintBuffers=function(r){for(var i in this._buffers=[],this.binders){var l=this.binders[i];if(r&&l instanceof or){var p=r.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(l instanceof Yt||l instanceof Kt)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}},Zt.prototype.upload=function(r){for(var i in this.binders){var l=this.binders[i];(l instanceof Yt||l instanceof Kt||l instanceof or)&&l.upload(r)}this.updatePaintBuffers()},Zt.prototype.destroy=function(){for(var r in this.binders){var i=this.binders[r];(i instanceof Yt||i instanceof Kt||i instanceof or)&&i.destroy()}};var Gt=function(r,i,l){l===void 0&&(l=function(){return!0}),this.programConfigurations={};for(var p=0,y=r;p<y.length;p+=1){var v=y[p];this.programConfigurations[v.id]=new Zt(v,i,l)}this.needsUpload=!1,this._featureMap=new me,this._bufferOffset=0};function pi(r,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(i+"-","").replace(/-/g,"_")]}function An(r,i,l){var p={color:{source:ju,composite:bf},number:{source:Qs,composite:ju}},y=function(v){return{"line-pattern":{source:Fa,composite:Fa},"fill-pattern":{source:Fa,composite:Fa},"fill-extrusion-pattern":{source:Fa,composite:Fa}}[v]}(r);return y&&y[l]||p[i][l]}Gt.prototype.populatePaintArrays=function(r,i,l,p,y,v){for(var x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(r,i,p,y,v);i.id!==void 0&&this._featureMap.add(i.id,l,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0},Gt.prototype.updatePaintArrays=function(r,i,l,p){for(var y=0,v=l;y<v.length;y+=1){var x=v[y];this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(r,this._featureMap,i,x,p)||this.needsUpload}},Gt.prototype.get=function(r){return this.programConfigurations[r]},Gt.prototype.upload=function(r){if(this.needsUpload){for(var i in this.programConfigurations)this.programConfigurations[i].upload(r);this.needsUpload=!1}},Gt.prototype.destroy=function(){for(var r in this.programConfigurations)this.programConfigurations[r].destroy()},wt("ConstantBinder",Jt),wt("CrossFadedConstantBinder",sr),wt("SourceExpressionBinder",Yt),wt("CrossFadedCompositeBinder",or),wt("CompositeExpressionBinder",Kt),wt("ProgramConfiguration",Zt,{omit:["_buffers"]}),wt("ProgramConfigurationSet",Gt);var zi=Math.pow(2,14)-1,wi=-zi-1;function On(r){for(var i=8192/r.extent,l=r.loadGeometry(),p=0;p<l.length;p++)for(var y=l[p],v=0;v<y.length;v++){var x=y[v],T=Math.round(x.x*i),C=Math.round(x.y*i);x.x=q(T,wi,zi),x.y=q(C,wi,zi),(T<x.x||T>x.x+1||C<x.y||C>x.y+1)&&st("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return l}function zn(r,i){return{type:r.type,id:r.id,properties:r.properties,geometry:i?On(r):[]}}function Mo(r,i,l,p,y){r.emplaceBack(2*i+(p+1)/2,2*l+(y+1)/2)}var Xi=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new $l,this.indexArray=new Ys,this.segments=new W,this.programConfigurations=new Gt(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function el(r,i){for(var l=0;l<r.length;l++)if(Ba(i,r[l]))return!0;for(var p=0;p<i.length;p++)if(Ba(r,i[p]))return!0;return!!nh(r,i)}function oo(r,i,l){return!!Ba(r,i)||!!tl(i,r,l)}function wa(r,i){if(r.length===1)return ih(i,r[0]);for(var l=0;l<i.length;l++)for(var p=i[l],y=0;y<p.length;y++)if(Ba(r,p[y]))return!0;for(var v=0;v<r.length;v++)if(ih(i,r[v]))return!0;for(var x=0;x<i.length;x++)if(nh(r,i[x]))return!0;return!1}function ra(r,i,l){if(r.length>1){if(nh(r,i))return!0;for(var p=0;p<i.length;p++)if(tl(i[p],r,l))return!0}for(var y=0;y<r.length;y++)if(tl(r[y],i,l))return!0;return!1}function nh(r,i){if(r.length===0||i.length===0)return!1;for(var l=0;l<r.length-1;l++)for(var p=r[l],y=r[l+1],v=0;v<i.length-1;v++)if(qu(p,y,i[v],i[v+1]))return!0;return!1}function qu(r,i,l,p){return be(r,l,p)!==be(i,l,p)&&be(r,i,l)!==be(r,i,p)}function tl(r,i,l){var p=l*l;if(i.length===1)return r.distSqr(i[0])<p;for(var y=1;y<i.length;y++)if(Wu(r,i[y-1],i[y])<p)return!0;return!1}function Wu(r,i,l){var p=i.distSqr(l);if(p===0)return r.distSqr(i);var y=((r.x-i.x)*(l.x-i.x)+(r.y-i.y)*(l.y-i.y))/p;return r.distSqr(y<0?i:y>1?l:l.sub(i)._mult(y)._add(i))}function ih(r,i){for(var l,p,y,v=!1,x=0;x<r.length;x++)for(var T=0,C=(l=r[x]).length-1;T<l.length;C=T++)(p=l[T]).y>i.y!=(y=l[C]).y>i.y&&i.x<(y.x-p.x)*(i.y-p.y)/(y.y-p.y)+p.x&&(v=!v);return v}function Ba(r,i){for(var l=!1,p=0,y=r.length-1;p<r.length;y=p++){var v=r[p],x=r[y];v.y>i.y!=x.y>i.y&&i.x<(x.x-v.x)*(i.y-v.y)/(x.y-v.y)+v.x&&(l=!l)}return l}function oh(r,i,l){var p=l[0],y=l[2];if(r.x<p.x&&i.x<p.x||r.x>y.x&&i.x>y.x||r.y<p.y&&i.y<p.y||r.y>y.y&&i.y>y.y)return!1;var v=be(r,i,l[0]);return v!==be(r,i,l[1])||v!==be(r,i,l[2])||v!==be(r,i,l[3])}function Va(r,i,l){var p=i.paint.get(r).value;return p.kind==="constant"?p.value:l.programConfigurations.get(i.id).getMaxValue(r)}function di(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function ps(r,i,l,p,y){if(!i[0]&&!i[1])return r;var v=E.convert(i)._mult(y);l==="viewport"&&v._rotate(-p);for(var x=[],T=0;T<r.length;T++)x.push(r[T].sub(v));return x}Xi.prototype.populate=function(r,i,l){var p=this.layers[0],y=[],v=null;p.type==="circle"&&(v=p.layout.get("circle-sort-key"));for(var x=0,T=r;x<T.length;x+=1){var C=T[x],A=C.feature,L=C.id,D=C.index,B=C.sourceLayerIndex,j=this.layers[0]._featureFilter.needGeometry,J=zn(A,j);if(this.layers[0]._featureFilter.filter(new gr(this.zoom),J,l)){var ee=v?v.evaluate(J,{},l):void 0,he={id:L,properties:A.properties,type:A.type,sourceLayerIndex:B,index:D,geometry:j?J.geometry:On(A),patterns:{},sortKey:ee};y.push(he)}}v&&y.sort(function(ot,Pt){return ot.sortKey-Pt.sortKey});for(var oe=0,ge=y;oe<ge.length;oe+=1){var we=ge[oe],Te=we.geometry,Oe=we.index,Ve=we.sourceLayerIndex,Ye=r[Oe].feature;this.addFeature(we,Te,Oe,l),i.featureIndex.insert(Ye,Te,Oe,Ve,this.index)}},Xi.prototype.update=function(r,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,l)},Xi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Xi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xi.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,G),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},Xi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xi.prototype.addFeature=function(r,i,l,p){for(var y=0,v=i;y<v.length;y+=1)for(var x=0,T=v[y];x<T.length;x+=1){var C=T[x],A=C.x,L=C.y;if(!(A<0||A>=8192||L<0||L>=8192)){var D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),B=D.vertexLength;Mo(this.layoutVertexArray,A,L,-1,-1),Mo(this.layoutVertexArray,A,L,1,-1),Mo(this.layoutVertexArray,A,L,1,1),Mo(this.layoutVertexArray,A,L,-1,1),this.indexArray.emplaceBack(B,B+1,B+2),this.indexArray.emplaceBack(B,B+3,B+2),D.vertexLength+=4,D.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,{},p)},wt("CircleBucket",Xi,{omit:["layers"]});var rl=new Li({"circle-sort-key":new Tt($.layout_circle["circle-sort-key"])}),ql={paint:new Li({"circle-radius":new Tt($.paint_circle["circle-radius"]),"circle-color":new Tt($.paint_circle["circle-color"]),"circle-blur":new Tt($.paint_circle["circle-blur"]),"circle-opacity":new Tt($.paint_circle["circle-opacity"]),"circle-translate":new Nt($.paint_circle["circle-translate"]),"circle-translate-anchor":new Nt($.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Nt($.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Nt($.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Tt($.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Tt($.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Tt($.paint_circle["circle-stroke-opacity"])}),layout:rl},Vr=typeof Float32Array<"u"?Float32Array:Array;function jo(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ao(r,i,l){var p=i[0],y=i[1],v=i[2],x=i[3],T=i[4],C=i[5],A=i[6],L=i[7],D=i[8],B=i[9],j=i[10],J=i[11],ee=i[12],he=i[13],oe=i[14],ge=i[15],we=l[0],Te=l[1],Oe=l[2],Ve=l[3];return r[0]=we*p+Te*T+Oe*D+Ve*ee,r[1]=we*y+Te*C+Oe*B+Ve*he,r[2]=we*v+Te*A+Oe*j+Ve*oe,r[3]=we*x+Te*L+Oe*J+Ve*ge,r[4]=(we=l[4])*p+(Te=l[5])*T+(Oe=l[6])*D+(Ve=l[7])*ee,r[5]=we*y+Te*C+Oe*B+Ve*he,r[6]=we*v+Te*A+Oe*j+Ve*oe,r[7]=we*x+Te*L+Oe*J+Ve*ge,r[8]=(we=l[8])*p+(Te=l[9])*T+(Oe=l[10])*D+(Ve=l[11])*ee,r[9]=we*y+Te*C+Oe*B+Ve*he,r[10]=we*v+Te*A+Oe*j+Ve*oe,r[11]=we*x+Te*L+Oe*J+Ve*ge,r[12]=(we=l[12])*p+(Te=l[13])*T+(Oe=l[14])*D+(Ve=l[15])*ee,r[13]=we*y+Te*C+Oe*B+Ve*he,r[14]=we*v+Te*A+Oe*j+Ve*oe,r[15]=we*x+Te*L+Oe*J+Ve*ge,r}Math.hypot||(Math.hypot=function(){for(var r=arguments,i=0,l=arguments.length;l--;)i+=r[l]*r[l];return Math.sqrt(i)});var Wl,W1=ao;function wf(r,i,l){var p=i[0],y=i[1],v=i[2],x=i[3];return r[0]=l[0]*p+l[4]*y+l[8]*v+l[12]*x,r[1]=l[1]*p+l[5]*y+l[9]*v+l[13]*x,r[2]=l[2]*p+l[6]*y+l[10]*v+l[14]*x,r[3]=l[3]*p+l[7]*y+l[11]*v+l[15]*x,r}Wl=new Vr(3),Vr!=Float32Array&&(Wl[0]=0,Wl[1]=0,Wl[2]=0),function(){var r=new Vr(4);Vr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0)}();var H1=(function(){var r=new Vr(2);Vr!=Float32Array&&(r[0]=0,r[1]=0)}(),function(r){function i(l){r.call(this,l,ql)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(l){return new Xi(l)},i.prototype.queryRadius=function(l){var p=l;return Va("circle-radius",this,p)+Va("circle-stroke-width",this,p)+di(this.paint.get("circle-translate"))},i.prototype.queryIntersectsFeature=function(l,p,y,v,x,T,C,A){for(var L=ps(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,C),D=this.paint.get("circle-radius").evaluate(p,y)+this.paint.get("circle-stroke-width").evaluate(p,y),B=this.paint.get("circle-pitch-alignment")==="map",j=B?L:function(Ye,ot){return Ye.map(function(Pt){return ah(Pt,ot)})}(L,A),J=B?D*C:D,ee=0,he=v;ee<he.length;ee+=1)for(var oe=0,ge=he[ee];oe<ge.length;oe+=1){var we=ge[oe],Te=B?we:ah(we,A),Oe=J,Ve=wf([],[we.x,we.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Oe*=Ve[3]/T.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Oe*=T.cameraToCenterDistance/Ve[3]),oo(j,Te,Oe))return!0}return!1},i}(za));function ah(r,i){var l=wf([],[r.x,r.y,0,1],i);return new E(l[0]/l[3],l[1]/l[3])}var hv=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Xi);function Hu(r,i,l,p){var y=i.width,v=i.height;if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==y*v*l)throw new RangeError("mismatched image size")}else p=new Uint8Array(y*v*l);return r.width=y,r.height=v,r.data=p,r}function Ef(r,i,l){var p=i.width,y=i.height;if(p!==r.width||y!==r.height){var v=Hu({},{width:p,height:y},l);Z1(r,v,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,p),height:Math.min(r.height,y)},l),r.width=p,r.height=y,r.data=v.data}}function Z1(r,i,l,p,y,v){if(y.width===0||y.height===0)return i;if(y.width>r.width||y.height>r.height||l.x>r.width-y.width||l.y>r.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>i.width||y.height>i.height||p.x>i.width-y.width||p.y>i.height-y.height)throw new RangeError("out of range destination coordinates for image copy");for(var x=r.data,T=i.data,C=0;C<y.height;C++)for(var A=((l.y+C)*r.width+l.x)*v,L=((p.y+C)*i.width+p.x)*v,D=0;D<y.width*v;D++)T[L+D]=x[A+D];return i}wt("HeatmapBucket",hv,{omit:["layers"]});var sh=function(r,i){Hu(this,r,1,i)};sh.prototype.resize=function(r){Ef(this,r,1)},sh.prototype.clone=function(){return new sh({width:this.width,height:this.height},new Uint8Array(this.data))},sh.copy=function(r,i,l,p,y){Z1(r,i,l,p,y,1)};var Io=function(r,i){Hu(this,r,4,i)};Io.prototype.resize=function(r){Ef(this,r,4)},Io.prototype.replace=function(r,i){i?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r},Io.prototype.clone=function(){return new Io({width:this.width,height:this.height},new Uint8Array(this.data))},Io.copy=function(r,i,l,p,y){Z1(r,i,l,p,y,4)},wt("AlphaImage",sh),wt("RGBAImage",Io);var Aj={paint:new Li({"heatmap-radius":new Tt($.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Tt($.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Nt($.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ba($.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Nt($.paint_heatmap["heatmap-opacity"])})};function qM(r){var i={},l=r.resolution||256,p=r.clips?r.clips.length:1,y=r.image||new Io({width:l,height:p}),v=function(J,ee,he){i[r.evaluationKey]=he;var oe=r.expression.evaluate(i);y.data[J+ee+0]=Math.floor(255*oe.r/oe.a),y.data[J+ee+1]=Math.floor(255*oe.g/oe.a),y.data[J+ee+2]=Math.floor(255*oe.b/oe.a),y.data[J+ee+3]=Math.floor(255*oe.a)};if(r.clips)for(var x=0,T=0;x<p;++x,T+=4*l)for(var C=0,A=0;C<l;C++,A+=4){var L=C/(l-1),D=r.clips[x];v(T,A,D.start*(1-L)+D.end*L)}else for(var B=0,j=0;B<l;B++,j+=4)v(0,j,B/(l-1));return y}var Pj=function(r){function i(l){r.call(this,l,Aj),this._updateColorRamp()}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(l){return new hv(l)},i.prototype._handleSpecialPaintPropertyUpdate=function(l){l==="heatmap-color"&&this._updateColorRamp()},i.prototype._updateColorRamp=function(){this.colorRamp=qM({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},i.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},i}(za),kj={paint:new Li({"hillshade-illumination-direction":new Nt($.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Nt($.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Nt($.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Nt($.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Nt($.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Nt($.paint_hillshade["hillshade-accent-color"])})},Lj=function(r){function i(l){r.call(this,l,kj)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},i}(za),Dj=bi([{name:"a_pos",components:2,type:"Int16"}],4).members,X1=fv,Nj=fv;function fv(r,i,l){l=l||2;var p,y,v,x,T,C,A,L=i&&i.length,D=L?i[0]*l:r.length,B=WM(r,0,D,l,!0),j=[];if(!B||B.next===B.prev)return j;if(L&&(B=function(ee,he,oe,ge){var we,Te,Oe,Ve=[];for(we=0,Te=he.length;we<Te;we++)(Oe=WM(ee,he[we]*ge,we<Te-1?he[we+1]*ge:ee.length,ge,!1))===Oe.next&&(Oe.steiner=!0),Ve.push($j(Oe));for(Ve.sort(Vj),we=0;we<Ve.length;we++)Uj(Ve[we],oe),oe=Zu(oe,oe.next);return oe}(r,i,B,l)),r.length>80*l){p=v=r[0],y=x=r[1];for(var J=l;J<D;J+=l)(T=r[J])<p&&(p=T),(C=r[J+1])<y&&(y=C),T>v&&(v=T),C>x&&(x=C);A=(A=Math.max(v-p,x-y))!==0?1/A:0}return Vd(B,j,l,p,y,A),j}function WM(r,i,l,p,y){var v,x;if(y===J1(r,i,l,p)>0)for(v=i;v<l;v+=p)x=XM(v,r[v],r[v+1],x);else for(v=l-p;v>=i;v-=p)x=XM(v,r[v],r[v+1],x);return x&&pv(x,x.next)&&(jd(x),x=x.next),x}function Zu(r,i){if(!r)return r;i||(i=r);var l,p=r;do if(l=!1,p.steiner||!pv(p,p.next)&&ni(p.prev,p,p.next)!==0)p=p.next;else{if(jd(p),(p=i=p.prev)===p.next)break;l=!0}while(l||p!==i);return i}function Vd(r,i,l,p,y,v,x){if(r){!x&&v&&function(L,D,B,j){var J=L;do J.z===null&&(J.z=K1(J.x,J.y,D,B,j)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next;while(J!==L);J.prevZ.nextZ=null,J.prevZ=null,function(ee){var he,oe,ge,we,Te,Oe,Ve,Ye,ot=1;do{for(oe=ee,ee=null,Te=null,Oe=0;oe;){for(Oe++,ge=oe,Ve=0,he=0;he<ot&&(Ve++,ge=ge.nextZ);he++);for(Ye=ot;Ve>0||Ye>0&&ge;)Ve!==0&&(Ye===0||!ge||oe.z<=ge.z)?(we=oe,oe=oe.nextZ,Ve--):(we=ge,ge=ge.nextZ,Ye--),Te?Te.nextZ=we:ee=we,we.prevZ=Te,Te=we;oe=ge}Te.nextZ=null,ot*=2}while(Oe>1)}(J)}(r,p,y,v);for(var T,C,A=r;r.prev!==r.next;)if(T=r.prev,C=r.next,v?zj(r,p,y,v):Rj(r))i.push(T.i/l),i.push(r.i/l),i.push(C.i/l),jd(r),r=C.next,A=C.next;else if((r=C)===A){x?x===1?Vd(r=Fj(Zu(r),i,l),i,l,p,y,v,2):x===2&&Bj(r,i,l,p,y,v):Vd(Zu(r),i,l,p,y,v,1);break}}}function Rj(r){var i=r.prev,l=r,p=r.next;if(ni(i,l,p)>=0)return!1;for(var y=r.next.next;y!==r.prev;){if(Sf(i.x,i.y,l.x,l.y,p.x,p.y,y.x,y.y)&&ni(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function zj(r,i,l,p){var y=r.prev,v=r,x=r.next;if(ni(y,v,x)>=0)return!1;for(var T=y.x>v.x?y.x>x.x?y.x:x.x:v.x>x.x?v.x:x.x,C=y.y>v.y?y.y>x.y?y.y:x.y:v.y>x.y?v.y:x.y,A=K1(y.x<v.x?y.x<x.x?y.x:x.x:v.x<x.x?v.x:x.x,y.y<v.y?y.y<x.y?y.y:x.y:v.y<x.y?v.y:x.y,i,l,p),L=K1(T,C,i,l,p),D=r.prevZ,B=r.nextZ;D&&D.z>=A&&B&&B.z<=L;){if(D!==r.prev&&D!==r.next&&Sf(y.x,y.y,v.x,v.y,x.x,x.y,D.x,D.y)&&ni(D.prev,D,D.next)>=0||(D=D.prevZ,B!==r.prev&&B!==r.next&&Sf(y.x,y.y,v.x,v.y,x.x,x.y,B.x,B.y)&&ni(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;D&&D.z>=A;){if(D!==r.prev&&D!==r.next&&Sf(y.x,y.y,v.x,v.y,x.x,x.y,D.x,D.y)&&ni(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;B&&B.z<=L;){if(B!==r.prev&&B!==r.next&&Sf(y.x,y.y,v.x,v.y,x.x,x.y,B.x,B.y)&&ni(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function Fj(r,i,l){var p=r;do{var y=p.prev,v=p.next.next;!pv(y,v)&&HM(y,p,p.next,v)&&Ud(y,v)&&Ud(v,y)&&(i.push(y.i/l),i.push(p.i/l),i.push(v.i/l),jd(p),jd(p.next),p=r=v),p=p.next}while(p!==r);return Zu(p)}function Bj(r,i,l,p,y,v){var x=r;do{for(var T=x.next.next;T!==x.prev;){if(x.i!==T.i&&Gj(x,T)){var C=ZM(x,T);return x=Zu(x,x.next),C=Zu(C,C.next),Vd(x,i,l,p,y,v),void Vd(C,i,l,p,y,v)}T=T.next}x=x.next}while(x!==r)}function Vj(r,i){return r.x-i.x}function Uj(r,i){if(i=function(p,y){var v,x=y,T=p.x,C=p.y,A=-1/0;do{if(C<=x.y&&C>=x.next.y&&x.next.y!==x.y){var L=x.x+(C-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(L<=T&&L>A){if(A=L,L===T){if(C===x.y)return x;if(C===x.next.y)return x.next}v=x.x<x.next.x?x:x.next}}x=x.next}while(x!==y);if(!v)return null;if(T===A)return v;var D,B=v,j=v.x,J=v.y,ee=1/0;x=v;do T>=x.x&&x.x>=j&&T!==x.x&&Sf(C<J?T:A,C,j,J,C<J?A:T,C,x.x,x.y)&&(D=Math.abs(C-x.y)/(T-x.x),Ud(x,p)&&(D<ee||D===ee&&(x.x>v.x||x.x===v.x&&jj(v,x)))&&(v=x,ee=D)),x=x.next;while(x!==B);return v}(r,i)){var l=ZM(i,r);Zu(i,i.next),Zu(l,l.next)}}function jj(r,i){return ni(r.prev,r,i.prev)<0&&ni(i.next,r,r.next)<0}function K1(r,i,l,p,y){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-l)*y)|r<<8))|r<<4))|r<<2))|r<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-p)*y)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function $j(r){var i=r,l=r;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==r);return l}function Sf(r,i,l,p,y,v,x,T){return(y-x)*(i-T)-(r-x)*(v-T)>=0&&(r-x)*(p-T)-(l-x)*(i-T)>=0&&(l-x)*(v-T)-(y-x)*(p-T)>=0}function Gj(r,i){return r.next.i!==i.i&&r.prev.i!==i.i&&!function(l,p){var y=l;do{if(y.i!==l.i&&y.next.i!==l.i&&y.i!==p.i&&y.next.i!==p.i&&HM(y,y.next,l,p))return!0;y=y.next}while(y!==l);return!1}(r,i)&&(Ud(r,i)&&Ud(i,r)&&function(l,p){var y=l,v=!1,x=(l.x+p.x)/2,T=(l.y+p.y)/2;do y.y>T!=y.next.y>T&&y.next.y!==y.y&&x<(y.next.x-y.x)*(T-y.y)/(y.next.y-y.y)+y.x&&(v=!v),y=y.next;while(y!==l);return v}(r,i)&&(ni(r.prev,r,i.prev)||ni(r,i.prev,i))||pv(r,i)&&ni(r.prev,r,r.next)>0&&ni(i.prev,i,i.next)>0)}function ni(r,i,l){return(i.y-r.y)*(l.x-i.x)-(i.x-r.x)*(l.y-i.y)}function pv(r,i){return r.x===i.x&&r.y===i.y}function HM(r,i,l,p){var y=mv(ni(r,i,l)),v=mv(ni(r,i,p)),x=mv(ni(l,p,r)),T=mv(ni(l,p,i));return y!==v&&x!==T||!(y!==0||!dv(r,l,i))||!(v!==0||!dv(r,p,i))||!(x!==0||!dv(l,r,p))||!(T!==0||!dv(l,i,p))}function dv(r,i,l){return i.x<=Math.max(r.x,l.x)&&i.x>=Math.min(r.x,l.x)&&i.y<=Math.max(r.y,l.y)&&i.y>=Math.min(r.y,l.y)}function mv(r){return r>0?1:r<0?-1:0}function Ud(r,i){return ni(r.prev,r,r.next)<0?ni(r,i,r.next)>=0&&ni(r,r.prev,i)>=0:ni(r,i,r.prev)<0||ni(r,r.next,i)<0}function ZM(r,i){var l=new Y1(r.i,r.x,r.y),p=new Y1(i.i,i.x,i.y),y=r.next,v=i.prev;return r.next=i,i.prev=r,l.next=y,y.prev=l,p.next=l,l.prev=p,v.next=p,p.prev=v,p}function XM(r,i,l,p){var y=new Y1(r,i,l);return p?(y.next=p.next,y.prev=p,p.next.prev=y,p.next=y):(y.prev=y,y.next=y),y}function jd(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Y1(r,i,l){this.i=r,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function J1(r,i,l,p){for(var y=0,v=i,x=l-p;v<l;v+=p)y+=(r[x]-r[v])*(r[v+1]+r[x+1]),x=v;return y}function qj(r,i,l,p,y){(function v(x,T,C,A,L){for(;A>C;){if(A-C>600){var D=A-C+1,B=T-C+1,j=Math.log(D),J=.5*Math.exp(2*j/3),ee=.5*Math.sqrt(j*J*(D-J)/D)*(B-D/2<0?-1:1);v(x,T,Math.max(C,Math.floor(T-B*J/D+ee)),Math.min(A,Math.floor(T+(D-B)*J/D+ee)),L)}var he=x[T],oe=C,ge=A;for($d(x,C,T),L(x[A],he)>0&&$d(x,C,A);oe<ge;){for($d(x,oe,ge),oe++,ge--;L(x[oe],he)<0;)oe++;for(;L(x[ge],he)>0;)ge--}L(x[C],he)===0?$d(x,C,ge):$d(x,++ge,A),ge<=T&&(C=ge+1),T<=ge&&(A=ge-1)}})(r,i,l||0,p||r.length-1,y||Wj)}function $d(r,i,l){var p=r[i];r[i]=r[l],r[l]=p}function Wj(r,i){return r<i?-1:r>i?1:0}function Q1(r,i){var l=r.length;if(l<=1)return[r];for(var p,y,v=[],x=0;x<l;x++){var T=Je(r[x]);T!==0&&(r[x].area=Math.abs(T),y===void 0&&(y=T<0),y===T<0?(p&&v.push(p),p=[r[x]]):p.push(r[x]))}if(p&&v.push(p),i>1)for(var C=0;C<v.length;C++)v[C].length<=i||(qj(v[C],i,1,v[C].length-1,Hj),v[C]=v[C].slice(0,i));return v}function Hj(r,i){return i.area-r.area}function ex(r,i,l){for(var p=l.patternDependencies,y=!1,v=0,x=i;v<x.length;v+=1){var T=x[v].paint.get(r+"-pattern");T.isConstant()||(y=!0);var C=T.constantOr(null);C&&(y=!0,p[C.to]=!0,p[C.from]=!0)}return y}function tx(r,i,l,p,y){for(var v=y.patternDependencies,x=0,T=i;x<T.length;x+=1){var C=T[x],A=C.paint.get(r+"-pattern").value;if(A.kind!=="constant"){var L=A.evaluate({zoom:p-1},l,{},y.availableImages),D=A.evaluate({zoom:p},l,{},y.availableImages),B=A.evaluate({zoom:p+1},l,{},y.availableImages);D=D&&D.name?D.name:D,B=B&&B.name?B.name:B,v[L=L&&L.name?L.name:L]=!0,v[D]=!0,v[B]=!0,l.patterns[C.id]={min:L,mid:D,max:B}}}return l}fv.deviation=function(r,i,l,p){var y=i&&i.length,v=Math.abs(J1(r,0,y?i[0]*l:r.length,l));if(y)for(var x=0,T=i.length;x<T;x++)v-=Math.abs(J1(r,i[x]*l,x<T-1?i[x+1]*l:r.length,l));var C=0;for(x=0;x<p.length;x+=3){var A=p[x]*l,L=p[x+1]*l,D=p[x+2]*l;C+=Math.abs((r[A]-r[D])*(r[L+1]-r[A+1])-(r[A]-r[L])*(r[D+1]-r[A+1]))}return v===0&&C===0?0:Math.abs((C-v)/v)},fv.flatten=function(r){for(var i=r[0][0].length,l={vertices:[],holes:[],dimensions:i},p=0,y=0;y<r.length;y++){for(var v=0;v<r[y].length;v++)for(var x=0;x<i;x++)l.vertices.push(r[y][v][x]);y>0&&l.holes.push(p+=r[y-1].length)}return l},X1.default=Nj;var ds=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $l,this.indexArray=new Ys,this.indexArray2=new rh,this.programConfigurations=new Gt(r.layers,r.zoom),this.segments=new W,this.segments2=new W,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};ds.prototype.populate=function(r,i,l){this.hasPattern=ex("fill",this.layers,i);for(var p=this.layers[0].layout.get("fill-sort-key"),y=[],v=0,x=r;v<x.length;v+=1){var T=x[v],C=T.feature,A=T.id,L=T.index,D=T.sourceLayerIndex,B=this.layers[0]._featureFilter.needGeometry,j=zn(C,B);if(this.layers[0]._featureFilter.filter(new gr(this.zoom),j,l)){var J=p?p.evaluate(j,{},l,i.availableImages):void 0,ee={id:A,properties:C.properties,type:C.type,sourceLayerIndex:D,index:L,geometry:B?j.geometry:On(C),patterns:{},sortKey:J};y.push(ee)}}p&&y.sort(function(Ye,ot){return Ye.sortKey-ot.sortKey});for(var he=0,oe=y;he<oe.length;he+=1){var ge=oe[he],we=ge.geometry,Te=ge.index,Oe=ge.sourceLayerIndex;if(this.hasPattern){var Ve=tx("fill",this.layers,ge,this.zoom,i);this.patternFeatures.push(Ve)}else this.addFeature(ge,we,Te,l,{});i.featureIndex.insert(r[Te].feature,we,Te,Oe,this.index)}},ds.prototype.update=function(r,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,l)},ds.prototype.addFeatures=function(r,i,l){for(var p=0,y=this.patternFeatures;p<y.length;p+=1){var v=y[p];this.addFeature(v,v.geometry,v.index,i,l)}},ds.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ds.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ds.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Dj),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0},ds.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ds.prototype.addFeature=function(r,i,l,p,y){for(var v=0,x=Q1(i,500);v<x.length;v+=1){for(var T=x[v],C=0,A=0,L=T;A<L.length;A+=1)C+=L[A].length;for(var D=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),B=D.vertexLength,j=[],J=[],ee=0,he=T;ee<he.length;ee+=1){var oe=he[ee];if(oe.length!==0){oe!==T[0]&&J.push(j.length/2);var ge=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),we=ge.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(we+oe.length-1,we),j.push(oe[0].x),j.push(oe[0].y);for(var Te=1;Te<oe.length;Te++)this.layoutVertexArray.emplaceBack(oe[Te].x,oe[Te].y),this.indexArray2.emplaceBack(we+Te-1,we+Te),j.push(oe[Te].x),j.push(oe[Te].y);ge.vertexLength+=oe.length,ge.primitiveLength+=oe.length}}for(var Oe=X1(j,J),Ve=0;Ve<Oe.length;Ve+=3)this.indexArray.emplaceBack(B+Oe[Ve],B+Oe[Ve+1],B+Oe[Ve+2]);D.vertexLength+=C,D.primitiveLength+=Oe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,y,p)},wt("FillBucket",ds,{omit:["layers","patternFeatures"]});var Zj=new Li({"fill-sort-key":new Tt($.layout_fill["fill-sort-key"])}),Xj={paint:new Li({"fill-antialias":new Nt($.paint_fill["fill-antialias"]),"fill-opacity":new Tt($.paint_fill["fill-opacity"]),"fill-color":new Tt($.paint_fill["fill-color"]),"fill-outline-color":new Tt($.paint_fill["fill-outline-color"]),"fill-translate":new Nt($.paint_fill["fill-translate"]),"fill-translate-anchor":new Nt($.paint_fill["fill-translate-anchor"]),"fill-pattern":new gf($.paint_fill["fill-pattern"])}),layout:Zj},Kj=function(r){function i(l){r.call(this,l,Xj)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.recalculate=function(l,p){r.prototype.recalculate.call(this,l,p);var y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},i.prototype.createBucket=function(l){return new ds(l)},i.prototype.queryRadius=function(){return di(this.paint.get("fill-translate"))},i.prototype.queryIntersectsFeature=function(l,p,y,v,x,T,C){return wa(ps(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,C),v)},i.prototype.isTileClipped=function(){return!0},i}(za),Yj=bi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,KM=Tf;function Tf(r,i,l,p,y){this.properties={},this.extent=l,this.type=0,this._pbf=r,this._geometry=-1,this._keys=p,this._values=y,r.readFields(Jj,this,i)}function Jj(r,i,l){r==1?i.id=l.readVarint():r==2?function(p,y){for(var v=p.readVarint()+p.pos;p.pos<v;){var x=y._keys[p.readVarint()],T=y._values[p.readVarint()];y.properties[x]=T}}(l,i):r==3?i.type=l.readVarint():r==4&&(i._geometry=l.pos)}function Qj(r){for(var i,l,p=0,y=0,v=r.length,x=v-1;y<v;x=y++)p+=((l=r[x]).x-(i=r[y]).x)*(i.y+l.y);return p}Tf.types=["Unknown","Point","LineString","Polygon"],Tf.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var i,l=r.readVarint()+r.pos,p=1,y=0,v=0,x=0,T=[];r.pos<l;){if(y<=0){var C=r.readVarint();p=7&C,y=C>>3}if(y--,p===1||p===2)v+=r.readSVarint(),x+=r.readSVarint(),p===1&&(i&&T.push(i),i=[]),i.push(new E(v,x));else{if(p!==7)throw new Error("unknown command "+p);i&&i.push(i[0].clone())}}return i&&T.push(i),T},Tf.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var i=r.readVarint()+r.pos,l=1,p=0,y=0,v=0,x=1/0,T=-1/0,C=1/0,A=-1/0;r.pos<i;){if(p<=0){var L=r.readVarint();l=7&L,p=L>>3}if(p--,l===1||l===2)(y+=r.readSVarint())<x&&(x=y),y>T&&(T=y),(v+=r.readSVarint())<C&&(C=v),v>A&&(A=v);else if(l!==7)throw new Error("unknown command "+l)}return[x,C,T,A]},Tf.prototype.toGeoJSON=function(r,i,l){var p,y,v=this.extent*Math.pow(2,l),x=this.extent*r,T=this.extent*i,C=this.loadGeometry(),A=Tf.types[this.type];function L(j){for(var J=0;J<j.length;J++){var ee=j[J];j[J]=[360*(ee.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(ee.y+T)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(p=0;p<C.length;p++)D[p]=C[p][0];L(C=D);break;case 2:for(p=0;p<C.length;p++)L(C[p]);break;case 3:for(C=function(j){var J=j.length;if(J<=1)return[j];for(var ee,he,oe=[],ge=0;ge<J;ge++){var we=Qj(j[ge]);we!==0&&(he===void 0&&(he=we<0),he===we<0?(ee&&oe.push(ee),ee=[j[ge]]):ee.push(j[ge]))}return ee&&oe.push(ee),oe}(C),p=0;p<C.length;p++)for(y=0;y<C[p].length;y++)L(C[p][y])}C.length===1?C=C[0]:A="Multi"+A;var B={type:"Feature",geometry:{type:A,coordinates:C},properties:this.properties};return"id"in this&&(B.id=this.id),B};var YM=JM;function JM(r,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(e9,this,i),this.length=this._features.length}function e9(r,i,l){r===15?i.version=l.readVarint():r===1?i.name=l.readString():r===5?i.extent=l.readVarint():r===2?i._features.push(l.pos):r===3?i._keys.push(l.readString()):r===4&&i._values.push(function(p){for(var y=null,v=p.readVarint()+p.pos;p.pos<v;){var x=p.readVarint()>>3;y=x===1?p.readString():x===2?p.readFloat():x===3?p.readDouble():x===4?p.readVarint64():x===5?p.readVarint():x===6?p.readSVarint():x===7?p.readBoolean():null}return y}(l))}function t9(r,i,l){if(r===3){var p=new YM(l,l.readVarint()+l.pos);p.length&&(i[p.name]=p)}}JM.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var i=this._pbf.readVarint()+this._pbf.pos;return new KM(this._pbf,i,this.extent,this._keys,this._values)};var Mf={VectorTile:function(r,i){this.layers=r.readFields(t9,{},i)},VectorTileFeature:KM,VectorTileLayer:YM},r9=Mf.VectorTileFeature.types,rx=Math.pow(2,13);function Gd(r,i,l,p,y,v,x,T){r.emplaceBack(i,l,2*Math.floor(p*rx)+x,y*rx*2,v*rx*2,Math.round(T))}var ms=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new fs,this.indexArray=new Ys,this.programConfigurations=new Gt(r.layers,r.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function n9(r,i){return r.x===i.x&&(r.x<0||r.x>8192)||r.y===i.y&&(r.y<0||r.y>8192)}ms.prototype.populate=function(r,i,l){this.features=[],this.hasPattern=ex("fill-extrusion",this.layers,i);for(var p=0,y=r;p<y.length;p+=1){var v=y[p],x=v.feature,T=v.id,C=v.index,A=v.sourceLayerIndex,L=this.layers[0]._featureFilter.needGeometry,D=zn(x,L);if(this.layers[0]._featureFilter.filter(new gr(this.zoom),D,l)){var B={id:T,sourceLayerIndex:A,index:C,geometry:L?D.geometry:On(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(tx("fill-extrusion",this.layers,B,this.zoom,i)):this.addFeature(B,B.geometry,C,l,{}),i.featureIndex.insert(x,B.geometry,C,A,this.index,!0)}}},ms.prototype.addFeatures=function(r,i,l){for(var p=0,y=this.features;p<y.length;p+=1){var v=y[p];this.addFeature(v,v.geometry,v.index,i,l)}},ms.prototype.update=function(r,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,l)},ms.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ms.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ms.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Yj),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},ms.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ms.prototype.addFeature=function(r,i,l,p,y){for(var v=0,x=Q1(i,500);v<x.length;v+=1){for(var T=x[v],C=0,A=0,L=T;A<L.length;A+=1)C+=L[A].length;for(var D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),B=0,j=T;B<j.length;B+=1){var J=j[B];if(J.length!==0&&!((pr=J).every(function(nr){return nr.x<0})||pr.every(function(nr){return nr.x>8192})||pr.every(function(nr){return nr.y<0})||pr.every(function(nr){return nr.y>8192})))for(var ee=0,he=0;he<J.length;he++){var oe=J[he];if(he>=1){var ge=J[he-1];if(!n9(oe,ge)){D.vertexLength+4>W.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var we=oe.sub(ge)._perp()._unit(),Te=ge.dist(oe);ee+Te>32768&&(ee=0),Gd(this.layoutVertexArray,oe.x,oe.y,we.x,we.y,0,0,ee),Gd(this.layoutVertexArray,oe.x,oe.y,we.x,we.y,0,1,ee),Gd(this.layoutVertexArray,ge.x,ge.y,we.x,we.y,0,0,ee+=Te),Gd(this.layoutVertexArray,ge.x,ge.y,we.x,we.y,0,1,ee);var Oe=D.vertexLength;this.indexArray.emplaceBack(Oe,Oe+2,Oe+1),this.indexArray.emplaceBack(Oe+1,Oe+2,Oe+3),D.vertexLength+=4,D.primitiveLength+=2}}}}if(D.vertexLength+C>W.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),r9[r.type]==="Polygon"){for(var Ve=[],Ye=[],ot=D.vertexLength,Pt=0,dt=T;Pt<dt.length;Pt+=1){var zt=dt[Pt];if(zt.length!==0){zt!==T[0]&&Ye.push(Ve.length/2);for(var yt=0;yt<zt.length;yt++){var ur=zt[yt];Gd(this.layoutVertexArray,ur.x,ur.y,0,0,1,1,0),Ve.push(ur.x),Ve.push(ur.y)}}}for(var qt=X1(Ve,Ye),Mt=0;Mt<qt.length;Mt+=3)this.indexArray.emplaceBack(ot+qt[Mt],ot+qt[Mt+2],ot+qt[Mt+1]);D.primitiveLength+=qt.length/3,D.vertexLength+=C}}var pr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,y,p)},wt("FillExtrusionBucket",ms,{omit:["layers","features"]});var i9={paint:new Li({"fill-extrusion-opacity":new Nt($["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Tt($["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Nt($["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Nt($["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new gf($["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Tt($["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Tt($["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Nt($["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},o9=function(r){function i(l){r.call(this,l,i9)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(l){return new ms(l)},i.prototype.queryRadius=function(){return di(this.paint.get("fill-extrusion-translate"))},i.prototype.is3D=function(){return!0},i.prototype.queryIntersectsFeature=function(l,p,y,v,x,T,C,A){var L=ps(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,C),D=this.paint.get("fill-extrusion-height").evaluate(p,y),B=this.paint.get("fill-extrusion-base").evaluate(p,y),j=function(ee,he,oe,ge){for(var we=[],Te=0,Oe=ee;Te<Oe.length;Te+=1){var Ve=Oe[Te],Ye=[Ve.x,Ve.y,0,1];wf(Ye,Ye,he),we.push(new E(Ye[0]/Ye[3],Ye[1]/Ye[3]))}return we}(L,A),J=function(ee,he,oe,ge){for(var we=[],Te=[],Oe=ge[8]*he,Ve=ge[9]*he,Ye=ge[10]*he,ot=ge[11]*he,Pt=ge[8]*oe,dt=ge[9]*oe,zt=ge[10]*oe,yt=ge[11]*oe,ur=0,qt=ee;ur<qt.length;ur+=1){for(var Mt=[],pr=[],nr=0,Ir=qt[ur];nr<Ir.length;nr+=1){var Ft=Ir[nr],Dr=Ft.x,xn=Ft.y,Pn=ge[0]*Dr+ge[4]*xn+ge[12],Cn=ge[1]*Dr+ge[5]*xn+ge[13],bn=ge[2]*Dr+ge[6]*xn+ge[14],kn=ge[3]*Dr+ge[7]*xn+ge[15],mi=bn+Ye,yi=kn+ot,Yi=Pn+Pt,Si=Cn+dt,Ji=bn+zt,Fn=kn+yt,Ti=new E((Pn+Oe)/yi,(Cn+Ve)/yi);Ti.z=mi/yi,Mt.push(Ti);var _r=new E(Yi/Fn,Si/Fn);_r.z=Ji/Fn,pr.push(_r)}we.push(Mt),Te.push(pr)}return[we,Te]}(v,B,D,A);return function(ee,he,oe){var ge=1/0;wa(oe,he)&&(ge=QM(oe,he[0]));for(var we=0;we<he.length;we++)for(var Te=he[we],Oe=ee[we],Ve=0;Ve<Te.length-1;Ve++){var Ye=Te[Ve],ot=[Ye,Te[Ve+1],Oe[Ve+1],Oe[Ve],Ye];el(oe,ot)&&(ge=Math.min(ge,QM(oe,ot)))}return ge!==1/0&&ge}(J[0],J[1],j)},i}(za);function qd(r,i){return r.x*i.x+r.y*i.y}function QM(r,i){if(r.length===1){for(var l,p=0,y=i[p++];!l||y.equals(l);)if(!(l=i[p++]))return 1/0;for(;p<i.length;p++){var v=i[p],x=r[0],T=l.sub(y),C=v.sub(y),A=x.sub(y),L=qd(T,T),D=qd(T,C),B=qd(C,C),j=qd(A,T),J=qd(A,C),ee=L*B-D*D,he=(B*j-D*J)/ee,oe=(L*J-D*j)/ee,ge=y.z*(1-he-oe)+l.z*he+v.z*oe;if(isFinite(ge))return ge}return 1/0}for(var we=1/0,Te=0,Oe=i;Te<Oe.length;Te+=1)we=Math.min(we,Oe[Te].z);return we}var a9=bi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,s9=bi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,l9=Mf.VectorTileFeature.types,u9=Math.cos(Math.PI/180*37.5),eI=Math.pow(2,14)/.5,so=function(r){var i=this;this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(l){return l.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(l){i.gradients[l.id]={}}),this.layoutVertexArray=new To,this.layoutVertexArray2=new ju,this.indexArray=new Ys,this.programConfigurations=new Gt(r.layers,r.zoom),this.segments=new W,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(l){return l.isStateDependent()}).map(function(l){return l.id})};so.prototype.populate=function(r,i,l){this.hasPattern=ex("line",this.layers,i);for(var p=this.layers[0].layout.get("line-sort-key"),y=[],v=0,x=r;v<x.length;v+=1){var T=x[v],C=T.feature,A=T.id,L=T.index,D=T.sourceLayerIndex,B=this.layers[0]._featureFilter.needGeometry,j=zn(C,B);if(this.layers[0]._featureFilter.filter(new gr(this.zoom),j,l)){var J=p?p.evaluate(j,{},l):void 0,ee={id:A,properties:C.properties,type:C.type,sourceLayerIndex:D,index:L,geometry:B?j.geometry:On(C),patterns:{},sortKey:J};y.push(ee)}}p&&y.sort(function(Ye,ot){return Ye.sortKey-ot.sortKey});for(var he=0,oe=y;he<oe.length;he+=1){var ge=oe[he],we=ge.geometry,Te=ge.index,Oe=ge.sourceLayerIndex;if(this.hasPattern){var Ve=tx("line",this.layers,ge,this.zoom,i);this.patternFeatures.push(Ve)}else this.addFeature(ge,we,Te,l,{});i.featureIndex.insert(r[Te].feature,we,Te,Oe,this.index)}},so.prototype.update=function(r,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,l)},so.prototype.addFeatures=function(r,i,l){for(var p=0,y=this.patternFeatures;p<y.length;p+=1){var v=y[p];this.addFeature(v,v.geometry,v.index,i,l)}},so.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},so.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},so.prototype.upload=function(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,s9)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,a9),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},so.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},so.prototype.lineFeatureClips=function(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}},so.prototype.addFeature=function(r,i,l,p,y){var v=this.layers[0].layout,x=v.get("line-join").evaluate(r,{}),T=v.get("line-cap"),C=v.get("line-miter-limit"),A=v.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(var L=0,D=i;L<D.length;L+=1)this.addLine(D[L],r,x,T,C,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,y,p)},so.prototype.addLine=function(r,i,l,p,y,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var x=0;x<r.length-1;x++)this.totalDistance+=r[x].dist(r[x+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var T=l9[i.type]==="Polygon",C=r.length;C>=2&&r[C-1].equals(r[C-2]);)C--;for(var A=0;A<C-1&&r[A].equals(r[A+1]);)A++;if(!(C<(T?3:2))){l==="bevel"&&(y=1.05);var L,D=this.overscaling<=16?122880/(512*this.overscaling):0,B=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),j=void 0,J=void 0,ee=void 0,he=void 0;this.e1=this.e2=-1,T&&(he=r[A].sub(L=r[C-2])._unit()._perp());for(var oe=A;oe<C;oe++)if(!(J=oe===C-1?T?r[A+1]:void 0:r[oe+1])||!r[oe].equals(J)){he&&(ee=he),L&&(j=L),L=r[oe],he=J?J.sub(L)._unit()._perp():ee;var ge=(ee=ee||he).add(he);ge.x===0&&ge.y===0||ge._unit();var we=ee.x*he.x+ee.y*he.y,Te=ge.x*he.x+ge.y*he.y,Oe=Te!==0?1/Te:1/0,Ve=2*Math.sqrt(2-2*Te),Ye=Te<u9&&j&&J,ot=ee.x*he.y-ee.y*he.x>0;if(Ye&&oe>A){var Pt=L.dist(j);if(Pt>2*D){var dt=L.sub(L.sub(j)._mult(D/Pt)._round());this.updateDistance(j,dt),this.addCurrentVertex(dt,ee,0,0,B),j=dt}}var zt=j&&J,yt=zt?l:T?"butt":p;if(zt&&yt==="round"&&(Oe<v?yt="miter":Oe<=2&&(yt="fakeround")),yt==="miter"&&Oe>y&&(yt="bevel"),yt==="bevel"&&(Oe>2&&(yt="flipbevel"),Oe<y&&(yt="miter")),j&&this.updateDistance(j,L),yt==="miter")ge._mult(Oe),this.addCurrentVertex(L,ge,0,0,B);else if(yt==="flipbevel"){if(Oe>100)ge=he.mult(-1);else{var ur=Oe*ee.add(he).mag()/ee.sub(he).mag();ge._perp()._mult(ur*(ot?-1:1))}this.addCurrentVertex(L,ge,0,0,B),this.addCurrentVertex(L,ge.mult(-1),0,0,B)}else if(yt==="bevel"||yt==="fakeround"){var qt=-Math.sqrt(Oe*Oe-1),Mt=ot?qt:0,pr=ot?0:qt;if(j&&this.addCurrentVertex(L,ee,Mt,pr,B),yt==="fakeround")for(var nr=Math.round(180*Ve/Math.PI/20),Ir=1;Ir<nr;Ir++){var Ft=Ir/nr;if(Ft!==.5){var Dr=Ft-.5;Ft+=Ft*Dr*(Ft-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*Dr*Dr+(.848013+we*(.215638*we-1.06021)))}var xn=he.sub(ee)._mult(Ft)._add(ee)._unit()._mult(ot?-1:1);this.addHalfVertex(L,xn.x,xn.y,!1,ot,0,B)}J&&this.addCurrentVertex(L,he,-Mt,-pr,B)}else if(yt==="butt")this.addCurrentVertex(L,ge,0,0,B);else if(yt==="square"){var Pn=j?1:-1;this.addCurrentVertex(L,ge,Pn,Pn,B)}else yt==="round"&&(j&&(this.addCurrentVertex(L,ee,0,0,B),this.addCurrentVertex(L,ee,1,1,B,!0)),J&&(this.addCurrentVertex(L,he,-1,-1,B,!0),this.addCurrentVertex(L,he,0,0,B)));if(Ye&&oe<C-1){var Cn=L.dist(J);if(Cn>2*D){var bn=L.add(J.sub(L)._mult(D/Cn)._round());this.updateDistance(L,bn),this.addCurrentVertex(bn,he,0,0,B),L=bn}}}}},so.prototype.addCurrentVertex=function(r,i,l,p,y,v){v===void 0&&(v=!1);var x=i.y*p-i.x,T=-i.y-i.x*p;this.addHalfVertex(r,i.x+i.y*l,i.y-i.x*l,v,!1,l,y),this.addHalfVertex(r,x,T,v,!0,-p,y),this.distance>eI/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(r,i,l,p,y,v))},so.prototype.addHalfVertex=function(r,i,l,p,y,v,x){var T=.5*(this.lineClips?this.scaledDistance*(eI-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r.x<<1)+(p?1:0),(r.y<<1)+(y?1:0),Math.round(63*i)+128,Math.round(63*l)+128,1+(v===0?0:v<0?-1:1)|(63&T)<<2,T>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var C=x.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),x.primitiveLength++),y?this.e2=C:this.e1=C},so.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},so.prototype.updateDistance=function(r,i){this.distance+=r.dist(i),this.updateScaledDistance()},wt("LineBucket",so,{omit:["layers","patternFeatures"]});var c9=new Li({"line-cap":new Nt($.layout_line["line-cap"]),"line-join":new Tt($.layout_line["line-join"]),"line-miter-limit":new Nt($.layout_line["line-miter-limit"]),"line-round-limit":new Nt($.layout_line["line-round-limit"]),"line-sort-key":new Tt($.layout_line["line-sort-key"])}),tI={paint:new Li({"line-opacity":new Tt($.paint_line["line-opacity"]),"line-color":new Tt($.paint_line["line-color"]),"line-translate":new Nt($.paint_line["line-translate"]),"line-translate-anchor":new Nt($.paint_line["line-translate-anchor"]),"line-width":new Tt($.paint_line["line-width"]),"line-gap-width":new Tt($.paint_line["line-gap-width"]),"line-offset":new Tt($.paint_line["line-offset"]),"line-blur":new Tt($.paint_line["line-blur"]),"line-dasharray":new Zi($.paint_line["line-dasharray"]),"line-pattern":new gf($.paint_line["line-pattern"]),"line-gradient":new ba($.paint_line["line-gradient"])}),layout:c9},rI=new(function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(l,p){return p=new gr(Math.floor(p.zoom),{now:p.now,fadeDuration:p.fadeDuration,zoomHistory:p.zoomHistory,transition:p.transition}),r.prototype.possiblyEvaluate.call(this,l,p)},i.prototype.evaluate=function(l,p,y,v){return p=X({},p,{zoom:Math.floor(p.zoom)}),r.prototype.evaluate.call(this,l,p,y,v)},i}(Tt))(tI.paint.properties["line-width"].specification);rI.useIntegerZoom=!0;var h9=function(r){function i(l){r.call(this,l,tI),this.gradientVersion=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._handleSpecialPaintPropertyUpdate=function(l){l==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof xo,this.gradientVersion=(this.gradientVersion+1)%P)},i.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},i.prototype.recalculate=function(l,p){r.prototype.recalculate.call(this,l,p),this.paint._values["line-floorwidth"]=rI.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)},i.prototype.createBucket=function(l){return new so(l)},i.prototype.queryRadius=function(l){var p=l,y=nI(Va("line-width",this,p),Va("line-gap-width",this,p)),v=Va("line-offset",this,p);return y/2+Math.abs(v)+di(this.paint.get("line-translate"))},i.prototype.queryIntersectsFeature=function(l,p,y,v,x,T,C){var A=ps(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,C),L=C/2*nI(this.paint.get("line-width").evaluate(p,y),this.paint.get("line-gap-width").evaluate(p,y)),D=this.paint.get("line-offset").evaluate(p,y);return D&&(v=function(B,j){for(var J=[],ee=new E(0,0),he=0;he<B.length;he++){for(var oe=B[he],ge=[],we=0;we<oe.length;we++){var Te=oe[we],Oe=oe[we+1],Ve=we===0?ee:Te.sub(oe[we-1])._unit()._perp(),Ye=we===oe.length-1?ee:Oe.sub(Te)._unit()._perp(),ot=Ve._add(Ye)._unit();ot._mult(1/(ot.x*Ye.x+ot.y*Ye.y)),ge.push(ot._mult(j)._add(Te))}J.push(ge)}return J}(v,D*C)),function(B,j,J){for(var ee=0;ee<j.length;ee++){var he=j[ee];if(B.length>=3){for(var oe=0;oe<he.length;oe++)if(Ba(B,he[oe]))return!0}if(ra(B,he,J))return!0}return!1}(A,v,L)},i.prototype.isTileClipped=function(){return!0},i}(za);function nI(r,i){return i>0?i+2*r:r}var f9=bi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),p9=bi([{name:"a_projected_pos",components:3,type:"Float32"}],4),d9=(bi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),bi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),iI=(bi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),bi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),m9=bi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function y9(r,i,l){return r.sections.forEach(function(p){p.text=function(y,v,x){var T=v.layout.get("text-transform").evaluate(x,{});return T==="uppercase"?y=y.toLocaleUpperCase():T==="lowercase"&&(y=y.toLocaleLowerCase()),Uo.applyArabicShaping&&(y=Uo.applyArabicShaping(y)),y}(p.text,i,l)}),r}bi([{name:"triangle",components:3,type:"Uint16"}]),bi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),bi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),bi([{type:"Float32",name:"offsetX"}]),bi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Wd={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},oI=function(r,i,l,p,y){var v,x,T=8*y-p-1,C=(1<<T)-1,A=C>>1,L=-7,D=l?y-1:0,B=l?-1:1,j=r[i+D];for(D+=B,v=j&(1<<-L)-1,j>>=-L,L+=T;L>0;v=256*v+r[i+D],D+=B,L-=8);for(x=v&(1<<-L)-1,v>>=-L,L+=p;L>0;x=256*x+r[i+D],D+=B,L-=8);if(v===0)v=1-A;else{if(v===C)return x?NaN:1/0*(j?-1:1);x+=Math.pow(2,p),v-=A}return(j?-1:1)*x*Math.pow(2,v-p)},aI=function(r,i,l,p,y,v){var x,T,C,A=8*v-y-1,L=(1<<A)-1,D=L>>1,B=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=p?0:v-1,J=p?1:-1,ee=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(T=isNaN(i)?1:0,x=L):(x=Math.floor(Math.log(i)/Math.LN2),i*(C=Math.pow(2,-x))<1&&(x--,C*=2),(i+=x+D>=1?B/C:B*Math.pow(2,1-D))*C>=2&&(x++,C/=2),x+D>=L?(T=0,x=L):x+D>=1?(T=(i*C-1)*Math.pow(2,y),x+=D):(T=i*Math.pow(2,D-1)*Math.pow(2,y),x=0));y>=8;r[l+j]=255&T,j+=J,T/=256,y-=8);for(x=x<<y|T,A+=y;A>0;r[l+j]=255&x,j+=J,x/=256,A-=8);r[l+j-J]|=128*ee},yv=ln;function ln(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}ln.Varint=0,ln.Fixed64=1,ln.Bytes=2,ln.Fixed32=5;var sI=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Hl(r){return r.type===ln.Bytes?r.readVarint()+r.pos:r.pos+1}function If(r,i,l){return l?4294967296*i+(r>>>0):4294967296*(i>>>0)+(r>>>0)}function lI(r,i,l){var p=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(p);for(var y=l.pos-1;y>=r;y--)l.buf[y+p]=l.buf[y]}function g9(r,i){for(var l=0;l<r.length;l++)i.writeVarint(r[l])}function v9(r,i){for(var l=0;l<r.length;l++)i.writeSVarint(r[l])}function _9(r,i){for(var l=0;l<r.length;l++)i.writeFloat(r[l])}function x9(r,i){for(var l=0;l<r.length;l++)i.writeDouble(r[l])}function b9(r,i){for(var l=0;l<r.length;l++)i.writeBoolean(r[l])}function w9(r,i){for(var l=0;l<r.length;l++)i.writeFixed32(r[l])}function E9(r,i){for(var l=0;l<r.length;l++)i.writeSFixed32(r[l])}function S9(r,i){for(var l=0;l<r.length;l++)i.writeFixed64(r[l])}function T9(r,i){for(var l=0;l<r.length;l++)i.writeSFixed64(r[l])}function gv(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+16777216*r[i+3]}function Of(r,i,l){r[l]=i,r[l+1]=i>>>8,r[l+2]=i>>>16,r[l+3]=i>>>24}function uI(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+(r[i+3]<<24)}function M9(r,i,l){r===1&&l.readMessage(I9,i)}function I9(r,i,l){if(r===3){var p=l.readMessage(O9,{}),y=p.width,v=p.height,x=p.left,T=p.top,C=p.advance;i.push({id:p.id,bitmap:new sh({width:y+6,height:v+6},p.bitmap),metrics:{width:y,height:v,left:x,top:T,advance:C}})}}function O9(r,i,l){r===1?i.id=l.readVarint():r===2?i.bitmap=l.readBytes():r===3?i.width=l.readVarint():r===4?i.height=l.readVarint():r===5?i.left=l.readSVarint():r===6?i.top=l.readSVarint():r===7&&(i.advance=l.readVarint())}function cI(r){for(var i=0,l=0,p=0,y=r;p<y.length;p+=1){var v=y[p];i+=v.w*v.h,l=Math.max(l,v.w)}r.sort(function(ee,he){return he.h-ee.h});for(var x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}],T=0,C=0,A=0,L=r;A<L.length;A+=1)for(var D=L[A],B=x.length-1;B>=0;B--){var j=x[B];if(!(D.w>j.w||D.h>j.h)){if(D.x=j.x,D.y=j.y,C=Math.max(C,D.y+D.h),T=Math.max(T,D.x+D.w),D.w===j.w&&D.h===j.h){var J=x.pop();B<x.length&&(x[B]=J)}else D.h===j.h?(j.x+=D.w,j.w-=D.w):D.w===j.w?(j.y+=D.h,j.h-=D.h):(x.push({x:j.x+D.w,y:j.y,w:j.w-D.w,h:D.h}),j.y+=D.h,j.h-=D.h);break}}return{w:T,h:C,fill:i/(T*C)||0}}ln.prototype={destroy:function(){this.buf=null},readFields:function(r,i,l){for(l=l||this.length;this.pos<l;){var p=this.readVarint(),y=p>>3,v=this.pos;this.type=7&p,r(y,i,this),this.pos===v&&this.skip(p)}return i},readMessage:function(r,i){return this.readFields(r,i,this.readVarint()+this.pos)},readFixed32:function(){var r=gv(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=uI(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=gv(this.buf,this.pos)+4294967296*gv(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=gv(this.buf,this.pos)+4294967296*uI(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=oI(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=oI(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var i,l,p=this.buf;return i=127&(l=p[this.pos++]),l<128?i:(i|=(127&(l=p[this.pos++]))<<7,l<128?i:(i|=(127&(l=p[this.pos++]))<<14,l<128?i:(i|=(127&(l=p[this.pos++]))<<21,l<128?i:function(y,v,x){var T,C,A=x.buf;if(T=(112&(C=A[x.pos++]))>>4,C<128||(T|=(127&(C=A[x.pos++]))<<3,C<128)||(T|=(127&(C=A[x.pos++]))<<10,C<128)||(T|=(127&(C=A[x.pos++]))<<17,C<128)||(T|=(127&(C=A[x.pos++]))<<24,C<128)||(T|=(1&(C=A[x.pos++]))<<31,C<128))return If(y,T,v);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(l=p[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,i=this.pos;return this.pos=r,r-i>=12&&sI?function(l,p,y){return sI.decode(l.subarray(p,y))}(this.buf,i,r):function(l,p,y){for(var v="",x=p;x<y;){var T,C,A,L=l[x],D=null,B=L>239?4:L>223?3:L>191?2:1;if(x+B>y)break;B===1?L<128&&(D=L):B===2?(192&(T=l[x+1]))==128&&(D=(31&L)<<6|63&T)<=127&&(D=null):B===3?(C=l[x+2],(192&(T=l[x+1]))==128&&(192&C)==128&&((D=(15&L)<<12|(63&T)<<6|63&C)<=2047||D>=55296&&D<=57343)&&(D=null)):B===4&&(C=l[x+2],A=l[x+3],(192&(T=l[x+1]))==128&&(192&C)==128&&(192&A)==128&&((D=(15&L)<<18|(63&T)<<12|(63&C)<<6|63&A)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,B=1):D>65535&&(D-=65536,v+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),v+=String.fromCharCode(D),x+=B}return v}(this.buf,i,r)},readBytes:function(){var r=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,r);return this.pos=r,i},readPackedVarint:function(r,i){if(this.type!==ln.Bytes)return r.push(this.readVarint(i));var l=Hl(this);for(r=r||[];this.pos<l;)r.push(this.readVarint(i));return r},readPackedSVarint:function(r){if(this.type!==ln.Bytes)return r.push(this.readSVarint());var i=Hl(this);for(r=r||[];this.pos<i;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==ln.Bytes)return r.push(this.readBoolean());var i=Hl(this);for(r=r||[];this.pos<i;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==ln.Bytes)return r.push(this.readFloat());var i=Hl(this);for(r=r||[];this.pos<i;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==ln.Bytes)return r.push(this.readDouble());var i=Hl(this);for(r=r||[];this.pos<i;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==ln.Bytes)return r.push(this.readFixed32());var i=Hl(this);for(r=r||[];this.pos<i;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==ln.Bytes)return r.push(this.readSFixed32());var i=Hl(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==ln.Bytes)return r.push(this.readFixed64());var i=Hl(this);for(r=r||[];this.pos<i;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==ln.Bytes)return r.push(this.readSFixed64());var i=Hl(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed64());return r},skip:function(r){var i=7&r;if(i===ln.Varint)for(;this.buf[this.pos++]>127;);else if(i===ln.Bytes)this.pos=this.readVarint()+this.pos;else if(i===ln.Fixed32)this.pos+=4;else{if(i!==ln.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(r,i){this.writeVarint(r<<3|i)},realloc:function(r){for(var i=this.length||16;i<this.pos+r;)i*=2;if(i!==this.length){var l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Of(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Of(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Of(this.buf,-1&r,this.pos),Of(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Of(this.buf,-1&r,this.pos),Of(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(i,l){var p,y;if(i>=0?(p=i%4294967296|0,y=i/4294967296|0):(y=~(-i/4294967296),4294967295^(p=~(-i%4294967296))?p=p+1|0:(p=0,y=y+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(v,x,T){T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,T.buf[T.pos]=127&(v>>>=7)}(p,0,l),function(v,x){var T=(7&v)<<4;x.buf[x.pos++]|=T|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(y,l)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var i=this.pos;this.pos=function(p,y,v){for(var x,T,C=0;C<y.length;C++){if((x=y.charCodeAt(C))>55295&&x<57344){if(!T){x>56319||C+1===y.length?(p[v++]=239,p[v++]=191,p[v++]=189):T=x;continue}if(x<56320){p[v++]=239,p[v++]=191,p[v++]=189,T=x;continue}x=T-55296<<10|x-56320|65536,T=null}else T&&(p[v++]=239,p[v++]=191,p[v++]=189,T=null);x<128?p[v++]=x:(x<2048?p[v++]=x>>6|192:(x<65536?p[v++]=x>>12|224:(p[v++]=x>>18|240,p[v++]=x>>12&63|128),p[v++]=x>>6&63|128),p[v++]=63&x|128)}return v}(this.buf,r,this.pos);var l=this.pos-i;l>=128&&lI(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeFloat:function(r){this.realloc(4),aI(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),aI(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var i=r.length;this.writeVarint(i),this.realloc(i);for(var l=0;l<i;l++)this.buf[this.pos++]=r[l]},writeRawMessage:function(r,i){this.pos++;var l=this.pos;r(i,this);var p=this.pos-l;p>=128&&lI(l,p,this),this.pos=l-1,this.writeVarint(p),this.pos+=p},writeMessage:function(r,i,l){this.writeTag(r,ln.Bytes),this.writeRawMessage(i,l)},writePackedVarint:function(r,i){i.length&&this.writeMessage(r,g9,i)},writePackedSVarint:function(r,i){i.length&&this.writeMessage(r,v9,i)},writePackedBoolean:function(r,i){i.length&&this.writeMessage(r,b9,i)},writePackedFloat:function(r,i){i.length&&this.writeMessage(r,_9,i)},writePackedDouble:function(r,i){i.length&&this.writeMessage(r,x9,i)},writePackedFixed32:function(r,i){i.length&&this.writeMessage(r,w9,i)},writePackedSFixed32:function(r,i){i.length&&this.writeMessage(r,E9,i)},writePackedFixed64:function(r,i){i.length&&this.writeMessage(r,S9,i)},writePackedSFixed64:function(r,i){i.length&&this.writeMessage(r,T9,i)},writeBytesField:function(r,i){this.writeTag(r,ln.Bytes),this.writeBytes(i)},writeFixed32Field:function(r,i){this.writeTag(r,ln.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(r,i){this.writeTag(r,ln.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(r,i){this.writeTag(r,ln.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(r,i){this.writeTag(r,ln.Fixed64),this.writeSFixed64(i)},writeVarintField:function(r,i){this.writeTag(r,ln.Varint),this.writeVarint(i)},writeSVarintField:function(r,i){this.writeTag(r,ln.Varint),this.writeSVarint(i)},writeStringField:function(r,i){this.writeTag(r,ln.Bytes),this.writeString(i)},writeFloatField:function(r,i){this.writeTag(r,ln.Fixed32),this.writeFloat(i)},writeDoubleField:function(r,i){this.writeTag(r,ln.Fixed64),this.writeDouble(i)},writeBooleanField:function(r,i){this.writeVarintField(r,Boolean(i))}};var vv=function(r,i){var l=i.pixelRatio,p=i.version,y=i.stretchX,v=i.stretchY,x=i.content;this.paddedRect=r,this.pixelRatio=l,this.stretchX=y,this.stretchY=v,this.content=x,this.version=p},Hd={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Hd.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Hd.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Hd.tlbr.get=function(){return this.tl.concat(this.br)},Hd.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(vv.prototype,Hd);var Zd=function(r,i){var l={},p={};this.haveRenderCallbacks=[];var y=[];this.addImages(r,l,y),this.addImages(i,p,y);var v=cI(y),x=new Io({width:v.w||1,height:v.h||1});for(var T in r){var C=r[T],A=l[T].paddedRect;Io.copy(C.data,x,{x:0,y:0},{x:A.x+1,y:A.y+1},C.data)}for(var L in i){var D=i[L],B=p[L].paddedRect,j=B.x+1,J=B.y+1,ee=D.data.width,he=D.data.height;Io.copy(D.data,x,{x:0,y:0},{x:j,y:J},D.data),Io.copy(D.data,x,{x:0,y:he-1},{x:j,y:J-1},{width:ee,height:1}),Io.copy(D.data,x,{x:0,y:0},{x:j,y:J+he},{width:ee,height:1}),Io.copy(D.data,x,{x:ee-1,y:0},{x:j-1,y:J},{width:1,height:he}),Io.copy(D.data,x,{x:0,y:0},{x:j+ee,y:J},{width:1,height:he})}this.image=x,this.iconPositions=l,this.patternPositions=p};Zd.prototype.addImages=function(r,i,l){for(var p in r){var y=r[p],v={x:0,y:0,w:y.data.width+2,h:y.data.height+2};l.push(v),i[p]=new vv(v,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(p)}},Zd.prototype.patchUpdatedImages=function(r,i){for(var l in r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[l],r.getImage(l),i),this.patchUpdatedImage(this.patternPositions[l],r.getImage(l),i)},Zd.prototype.patchUpdatedImage=function(r,i,l){if(r&&i&&r.version!==i.version){r.version=i.version;var p=r.tl;l.update(i.data,void 0,{x:p[0],y:p[1]})}},wt("ImagePosition",vv),wt("ImageAtlas",Zd);var na={horizontal:1,vertical:2,horizontalOnly:3},Cf=function(){this.scale=1,this.fontStack="",this.imageName=null};Cf.forText=function(r,i){var l=new Cf;return l.scale=r||1,l.fontStack=i,l},Cf.forImage=function(r){var i=new Cf;return i.imageName=r,i};var Ki=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function _v(r,i,l,p,y,v,x,T,C,A,L,D,B,j,J,ee){var he,oe=Ki.fromFeature(r,y);D===na.vertical&&oe.verticalizePunctuation();var ge=Uo.processBidirectionalText,we=Uo.processStyledBidirectionalText;if(ge&&oe.sections.length===1){he=[];for(var Te=0,Oe=ge(oe.toString(),nx(oe,A,v,i,p,j,J));Te<Oe.length;Te+=1){var Ve=Oe[Te],Ye=new Ki;Ye.text=Ve,Ye.sections=oe.sections;for(var ot=0;ot<Ve.length;ot++)Ye.sectionIndex.push(0);he.push(Ye)}}else if(we){he=[];for(var Pt=0,dt=we(oe.text,oe.sectionIndex,nx(oe,A,v,i,p,j,J));Pt<dt.length;Pt+=1){var zt=dt[Pt],yt=new Ki;yt.text=zt[0],yt.sectionIndex=zt[1],yt.sections=oe.sections,he.push(yt)}}else he=function(Mt,pr){for(var nr=[],Ir=Mt.text,Ft=0,Dr=0,xn=pr;Dr<xn.length;Dr+=1){var Pn=xn[Dr];nr.push(Mt.substring(Ft,Pn)),Ft=Pn}return Ft<Ir.length&&nr.push(Mt.substring(Ft,Ir.length)),nr}(oe,nx(oe,A,v,i,p,j,J));var ur=[],qt={positionedLines:ur,text:oe.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(Mt,pr,nr,Ir,Ft,Dr,xn,Pn,Cn,bn,kn,mi){for(var yi=0,Yi=-17,Si=0,Ji=0,Fn=Pn==="right"?1:Pn==="left"?0:.5,Ti=0,_r=0,Jr=Ft;_r<Jr.length;_r+=1){var Wr=Jr[_r];Wr.trim();var Ar=Wr.getMaxScale(),lo=24*(Ar-1),Fi={positionedGlyphs:[],lineOffset:0};Mt.positionedLines[Ti]=Fi;var dn=Fi.positionedGlyphs,Xn=0;if(Wr.length()){for(var Bi=0;Bi<Wr.length();Bi++){var Nr=Wr.getSection(Bi),nl=Wr.getSectionIndex(Bi),ia=Wr.getCharCode(Bi),il=0,Bn=null,ol=null,Ua=null,zf=24,hh=!(Cn===na.horizontal||!kn&&!df(ia)||kn&&(xv[ia]||(Yl=ia,ct.Arabic(Yl)||ct["Arabic Supplement"](Yl)||ct["Arabic Extended-A"](Yl)||ct["Arabic Presentation Forms-A"](Yl)||ct["Arabic Presentation Forms-B"](Yl))));if(Nr.imageName){var Ff=Ir[Nr.imageName];if(!Ff)continue;Ua=Nr.imageName,Mt.iconsInText=Mt.iconsInText||!0,ol=Ff.paddedRect;var Kl=Ff.displaySize;Nr.scale=24*Nr.scale/mi,il=lo+(24-Kl[1]*Nr.scale),zf=(Bn={width:Kl[0],height:Kl[1],left:1,top:-3,advance:hh?Kl[1]:Kl[0]}).advance;var Bf=hh?Kl[0]*Nr.scale-24*Ar:Kl[1]*Nr.scale-24*Ar;Bf>0&&Bf>Xn&&(Xn=Bf)}else{var Cv=nr[Nr.fontStack],Vf=Cv&&Cv[ia];if(Vf&&Vf.rect)ol=Vf.rect,Bn=Vf.metrics;else{var Yd=pr[Nr.fontStack],Av=Yd&&Yd[ia];if(!Av)continue;Bn=Av.metrics}il=24*(Ar-Nr.scale)}hh?(Mt.verticalizable=!0,dn.push({glyph:ia,imageName:Ua,x:yi,y:Yi+il,vertical:hh,scale:Nr.scale,fontStack:Nr.fontStack,sectionIndex:nl,metrics:Bn,rect:ol}),yi+=zf*Nr.scale+bn):(dn.push({glyph:ia,imageName:Ua,x:yi,y:Yi+il,vertical:hh,scale:Nr.scale,fontStack:Nr.fontStack,sectionIndex:nl,metrics:Bn,rect:ol}),yi+=Bn.advance*Nr.scale+bn)}dn.length!==0&&(Si=Math.max(yi-bn,Si),A9(dn,0,dn.length-1,Fn,Xn)),yi=0;var Pv=Dr*Ar+Xn;Fi.lineOffset=Math.max(Xn,lo),Yi+=Pv,Ji=Math.max(Pv,Ji),++Ti}else Yi+=Dr,++Ti}var Yl,Jd=Yi- -17,Uf=ix(xn),Ku=Uf.horizontalAlign,jf=Uf.verticalAlign;(function(kv,Lv,Qd,em,Dv,tm,rm,nm,Nv){var $f,Rv=(Lv-Qd)*Dv;$f=tm!==rm?-nm*em- -17:(-em*Nv+.5)*rm;for(var Gf=0,im=kv;Gf<im.length;Gf+=1)for(var fh=0,om=im[Gf].positionedGlyphs;fh<om.length;fh+=1){var qf=om[fh];qf.x+=Rv,qf.y+=$f}})(Mt.positionedLines,Fn,Ku,jf,Si,Ji,Dr,Jd,Ft.length),Mt.top+=-jf*Jd,Mt.bottom=Mt.top+Jd,Mt.left+=-Ku*Si,Mt.right=Mt.left+Si}(qt,i,l,p,he,x,T,C,D,A,B,ee),!function(Mt){for(var pr=0,nr=Mt;pr<nr.length;pr+=1)if(nr[pr].positionedGlyphs.length!==0)return!1;return!0}(ur)&&qt}Ki.fromFeature=function(r,i){for(var l=new Ki,p=0;p<r.sections.length;p++){var y=r.sections[p];y.image?l.addImageSection(y):l.addTextSection(y,i)}return l},Ki.prototype.length=function(){return this.text.length},Ki.prototype.getSection=function(r){return this.sections[this.sectionIndex[r]]},Ki.prototype.getSectionIndex=function(r){return this.sectionIndex[r]},Ki.prototype.getCharCode=function(r){return this.text.charCodeAt(r)},Ki.prototype.verticalizePunctuation=function(){this.text=function(r){for(var i="",l=0;l<r.length;l++){var p=r.charCodeAt(l+1)||null,y=r.charCodeAt(l-1)||null;i+=p&&Pd(p)&&!Wd[r[l+1]]||y&&Pd(y)&&!Wd[r[l-1]]||!Wd[r[l]]?r[l]:Wd[r[l]]}return i}(this.text)},Ki.prototype.trim=function(){for(var r=0,i=0;i<this.text.length&&xv[this.text.charCodeAt(i)];i++)r++;for(var l=this.text.length,p=this.text.length-1;p>=0&&p>=r&&xv[this.text.charCodeAt(p)];p--)l--;this.text=this.text.substring(r,l),this.sectionIndex=this.sectionIndex.slice(r,l)},Ki.prototype.substring=function(r,i){var l=new Ki;return l.text=this.text.substring(r,i),l.sectionIndex=this.sectionIndex.slice(r,i),l.sections=this.sections,l},Ki.prototype.toString=function(){return this.text},Ki.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce(function(i,l){return Math.max(i,r.sections[l].scale)},0)},Ki.prototype.addTextSection=function(r,i){this.text+=r.text,this.sections.push(Cf.forText(r.scale,r.fontStack||i));for(var l=this.sections.length-1,p=0;p<r.text.length;++p)this.sectionIndex.push(l)},Ki.prototype.addImageSection=function(r){var i=r.image?r.image.name:"";if(i.length!==0){var l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(Cf.forImage(i)),this.sectionIndex.push(this.sections.length-1)):st("Reached maximum number of images 6401")}else st("Can't add FormattedSection with an empty image.")},Ki.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var xv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$o={};function hI(r,i,l,p,y,v){if(i.imageName){var x=p[i.imageName];return x?x.displaySize[0]*i.scale*24/v+y:0}var T=l[i.fontStack],C=T&&T[r];return C?C.metrics.advance*i.scale+y:0}function fI(r,i,l,p){var y=Math.pow(r-i,2);return p?r<i?y/2:2*y:y+Math.abs(l)*l}function C9(r,i,l){var p=0;return r===10&&(p-=1e4),l&&(p+=150),r!==40&&r!==65288||(p+=50),i!==41&&i!==65289||(p+=50),p}function pI(r,i,l,p,y,v){for(var x=null,T=fI(i,l,y,v),C=0,A=p;C<A.length;C+=1){var L=A[C],D=fI(i-L.x,l,y,v)+L.badness;D<=T&&(x=L,T=D)}return{index:r,x:i,priorBreak:x,badness:T}}function nx(r,i,l,p,y,v,x){if(v!=="point")return[];if(!r)return[];for(var T,C=[],A=function(he,oe,ge,we,Te,Oe){for(var Ve=0,Ye=0;Ye<he.length();Ye++){var ot=he.getSection(Ye);Ve+=hI(he.getCharCode(Ye),ot,we,Te,oe,Oe)}return Ve/Math.max(1,Math.ceil(Ve/ge))}(r,i,l,p,y,x),L=r.text.indexOf("\u200B")>=0,D=0,B=0;B<r.length();B++){var j=r.getSection(B),J=r.getCharCode(B);if(xv[J]||(D+=hI(J,j,p,y,i,x)),B<r.length()-1){var ee=!((T=J)<11904||!(ct["Bopomofo Extended"](T)||ct.Bopomofo(T)||ct["CJK Compatibility Forms"](T)||ct["CJK Compatibility Ideographs"](T)||ct["CJK Compatibility"](T)||ct["CJK Radicals Supplement"](T)||ct["CJK Strokes"](T)||ct["CJK Symbols and Punctuation"](T)||ct["CJK Unified Ideographs Extension A"](T)||ct["CJK Unified Ideographs"](T)||ct["Enclosed CJK Letters and Months"](T)||ct["Halfwidth and Fullwidth Forms"](T)||ct.Hiragana(T)||ct["Ideographic Description Characters"](T)||ct["Kangxi Radicals"](T)||ct["Katakana Phonetic Extensions"](T)||ct.Katakana(T)||ct["Vertical Forms"](T)||ct["Yi Radicals"](T)||ct["Yi Syllables"](T)));($o[J]||ee||j.imageName)&&C.push(pI(B+1,D,A,C,C9(J,r.getCharCode(B+1),ee&&L),!1))}}return function he(oe){return oe?he(oe.priorBreak).concat(oe.index):[]}(pI(r.length(),D,A,C,0,!0))}function ix(r){var i=.5,l=.5;switch(r){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function A9(r,i,l,p,y){if(p||y)for(var v=r[l],x=(r[l].x+v.metrics.advance*v.scale)*p,T=i;T<=l;T++)r[T].x-=x,r[T].y+=y}function dI(r,i,l,p,y,v){var x,T=r.image;if(T.content){var C=T.content,A=T.pixelRatio||1;x=[C[0]/A,C[1]/A,T.displaySize[0]-C[2]/A,T.displaySize[1]-C[3]/A]}var L,D,B,j,J=i.left*v,ee=i.right*v;l==="width"||l==="both"?(j=y[0]+J-p[3],D=y[0]+ee+p[1]):D=(j=y[0]+(J+ee-T.displaySize[0])/2)+T.displaySize[0];var he=i.top*v,oe=i.bottom*v;return l==="height"||l==="both"?(L=y[1]+he-p[0],B=y[1]+oe+p[2]):B=(L=y[1]+(he+oe-T.displaySize[1])/2)+T.displaySize[1],{image:T,top:L,right:D,bottom:B,left:j,collisionPadding:x}}$o[10]=!0,$o[32]=!0,$o[38]=!0,$o[40]=!0,$o[41]=!0,$o[43]=!0,$o[45]=!0,$o[47]=!0,$o[173]=!0,$o[183]=!0,$o[8203]=!0,$o[8208]=!0,$o[8211]=!0,$o[8231]=!0;var Af=function(r){function i(l,p,y,v){r.call(this,l,p),this.angle=y,v!==void 0&&(this.segment=v)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.clone=function(){return new i(this.x,this.y,this.angle,this.segment)},i}(E);function ox(r,i){var l=i.expression;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new gr(r+1))};if(l.kind==="source")return{kind:"source"};for(var p=l.zoomStops,y=l.interpolationType,v=0;v<p.length&&p[v]<=r;)v++;for(var x=v=Math.max(0,v-1);x<p.length&&p[x]<r+1;)x++;x=Math.min(p.length-1,x);var T=p[v],C=p[x];return l.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:C,interpolationType:y}:{kind:"camera",minZoom:T,maxZoom:C,minSize:l.evaluate(new gr(T)),maxSize:l.evaluate(new gr(C)),interpolationType:y}}function mI(r,i,l){var p=i.uSize,y=l.lowerSize;return r.kind==="source"?y/128:r.kind==="composite"?Hn(y/128,l.upperSize/128,i.uSizeT):p}function yI(r,i){var l=0,p=0;if(r.kind==="constant")p=r.layoutSize;else if(r.kind!=="source"){var y=r.interpolationType,v=y?q(Pi.interpolationFactor(y,i,r.minZoom,r.maxZoom),0,1):0;r.kind==="camera"?p=Hn(r.minSize,r.maxSize,v):l=v}return{uSizeT:l,uSize:p}}wt("Anchor",Af);var P9=Object.freeze({__proto__:null,getSizeData:ox,evaluateSizeForFeature:mI,evaluateSizeForZoom:yI,SIZE_PACK_FACTOR:128});function gI(r,i,l,p,y){if(i.segment===void 0)return!0;for(var v=i,x=i.segment+1,T=0;T>-l/2;){if(--x<0)return!1;T-=r[x].dist(v),v=r[x]}T+=r[x].dist(r[x+1]),x++;for(var C=[],A=0;T<l/2;){var L=r[x],D=r[x+1];if(!D)return!1;var B=r[x-1].angleTo(L)-L.angleTo(D);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:T,angleDelta:B}),A+=B;T-C[0].distance>p;)A-=C.shift().angleDelta;if(A>y)return!1;x++,T+=L.dist(D)}return!0}function vI(r){for(var i=0,l=0;l<r.length-1;l++)i+=r[l].dist(r[l+1]);return i}function _I(r,i,l){return r?.6*i*l:0}function xI(r,i){return Math.max(r?r.right-r.left:0,i?i.right-i.left:0)}function k9(r,i,l,p,y,v){for(var x=_I(l,y,v),T=xI(l,p)*v,C=0,A=vI(r)/2,L=0;L<r.length-1;L++){var D=r[L],B=r[L+1],j=D.dist(B);if(C+j>A){var J=(A-C)/j,ee=Hn(D.x,B.x,J),he=Hn(D.y,B.y,J),oe=new Af(ee,he,B.angleTo(D),L);return oe._round(),!x||gI(r,oe,T,x,i)?oe:void 0}C+=j}}function L9(r,i,l,p,y,v,x,T,C){var A=_I(p,v,x),L=xI(p,y),D=L*x,B=r[0].x===0||r[0].x===C||r[0].y===0||r[0].y===C;return i-D<i/4&&(i=D+i/4),function j(J,ee,he,oe,ge,we,Te,Oe,Ve){for(var Ye=we/2,ot=vI(J),Pt=0,dt=ee-he,zt=[],yt=0;yt<J.length-1;yt++){for(var ur=J[yt],qt=J[yt+1],Mt=ur.dist(qt),pr=qt.angleTo(ur);dt+he<Pt+Mt;){var nr=((dt+=he)-Pt)/Mt,Ir=Hn(ur.x,qt.x,nr),Ft=Hn(ur.y,qt.y,nr);if(Ir>=0&&Ir<Ve&&Ft>=0&&Ft<Ve&&dt-Ye>=0&&dt+Ye<=ot){var Dr=new Af(Ir,Ft,pr,yt);Dr._round(),oe&&!gI(J,Dr,we,oe,ge)||zt.push(Dr)}}Pt+=Mt}return Oe||zt.length||Te||(zt=j(J,Pt/2,he,oe,ge,we,Te,!0,Ve)),zt}(r,B?i/2*T%i:(L/2+2*v)*x*T%i,i,A,l,D,B,!1,C)}function bI(r,i,l,p,y){for(var v=[],x=0;x<r.length;x++)for(var T=r[x],C=void 0,A=0;A<T.length-1;A++){var L=T[A],D=T[A+1];L.x<i&&D.x<i||(L.x<i?L=new E(i,L.y+(i-L.x)/(D.x-L.x)*(D.y-L.y))._round():D.x<i&&(D=new E(i,L.y+(i-L.x)/(D.x-L.x)*(D.y-L.y))._round()),L.y<l&&D.y<l||(L.y<l?L=new E(L.x+(l-L.y)/(D.y-L.y)*(D.x-L.x),l)._round():D.y<l&&(D=new E(L.x+(l-L.y)/(D.y-L.y)*(D.x-L.x),l)._round()),L.x>=p&&D.x>=p||(L.x>=p?L=new E(p,L.y+(p-L.x)/(D.x-L.x)*(D.y-L.y))._round():D.x>=p&&(D=new E(p,L.y+(p-L.x)/(D.x-L.x)*(D.y-L.y))._round()),L.y>=y&&D.y>=y||(L.y>=y?L=new E(L.x+(y-L.y)/(D.y-L.y)*(D.x-L.x),y)._round():D.y>=y&&(D=new E(L.x+(y-L.y)/(D.y-L.y)*(D.x-L.x),y)._round()),C&&L.equals(C[C.length-1])||v.push(C=[L]),C.push(D)))))}return v}function wI(r,i,l,p){var y=[],v=r.image,x=v.pixelRatio,T=v.paddedRect.w-2,C=v.paddedRect.h-2,A=r.right-r.left,L=r.bottom-r.top,D=v.stretchX||[[0,T]],B=v.stretchY||[[0,C]],j=function(Ir,Ft){return Ir+Ft[1]-Ft[0]},J=D.reduce(j,0),ee=B.reduce(j,0),he=T-J,oe=C-ee,ge=0,we=J,Te=0,Oe=ee,Ve=0,Ye=he,ot=0,Pt=oe;if(v.content&&p){var dt=v.content;ge=bv(D,0,dt[0]),Te=bv(B,0,dt[1]),we=bv(D,dt[0],dt[2]),Oe=bv(B,dt[1],dt[3]),Ve=dt[0]-ge,ot=dt[1]-Te,Ye=dt[2]-dt[0]-we,Pt=dt[3]-dt[1]-Oe}var zt=function(Ir,Ft,Dr,xn){var Pn=wv(Ir.stretch-ge,we,A,r.left),Cn=Ev(Ir.fixed-Ve,Ye,Ir.stretch,J),bn=wv(Ft.stretch-Te,Oe,L,r.top),kn=Ev(Ft.fixed-ot,Pt,Ft.stretch,ee),mi=wv(Dr.stretch-ge,we,A,r.left),yi=Ev(Dr.fixed-Ve,Ye,Dr.stretch,J),Yi=wv(xn.stretch-Te,Oe,L,r.top),Si=Ev(xn.fixed-ot,Pt,xn.stretch,ee),Ji=new E(Pn,bn),Fn=new E(mi,bn),Ti=new E(mi,Yi),_r=new E(Pn,Yi),Jr=new E(Cn/x,kn/x),Wr=new E(yi/x,Si/x),Ar=i*Math.PI/180;if(Ar){var lo=Math.sin(Ar),Fi=Math.cos(Ar),dn=[Fi,-lo,lo,Fi];Ji._matMult(dn),Fn._matMult(dn),_r._matMult(dn),Ti._matMult(dn)}var Xn=Ir.stretch+Ir.fixed,Bi=Ft.stretch+Ft.fixed;return{tl:Ji,tr:Fn,bl:_r,br:Ti,tex:{x:v.paddedRect.x+1+Xn,y:v.paddedRect.y+1+Bi,w:Dr.stretch+Dr.fixed-Xn,h:xn.stretch+xn.fixed-Bi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Jr,pixelOffsetBR:Wr,minFontScaleX:Ye/x/A,minFontScaleY:Pt/x/L,isSDF:l}};if(p&&(v.stretchX||v.stretchY))for(var yt=EI(D,he,J),ur=EI(B,oe,ee),qt=0;qt<yt.length-1;qt++)for(var Mt=yt[qt],pr=yt[qt+1],nr=0;nr<ur.length-1;nr++)y.push(zt(Mt,ur[nr],pr,ur[nr+1]));else y.push(zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:C+1}));return y}function bv(r,i,l){for(var p=0,y=0,v=r;y<v.length;y+=1){var x=v[y];p+=Math.max(i,Math.min(l,x[1]))-Math.max(i,Math.min(l,x[0]))}return p}function EI(r,i,l){for(var p=[{fixed:-1,stretch:0}],y=0,v=r;y<v.length;y+=1){var x=v[y],T=x[0],C=x[1],A=p[p.length-1];p.push({fixed:T-A.stretch,stretch:A.stretch}),p.push({fixed:T-A.stretch,stretch:A.stretch+(C-T)})}return p.push({fixed:i+1,stretch:l}),p}function wv(r,i,l,p){return r/i*l+p}function Ev(r,i,l,p){return r-i*l/p}var Sv=function(r,i,l,p,y,v,x,T,C,A){if(this.boxStartIndex=r.length,C){var L=v.top,D=v.bottom,B=v.collisionPadding;B&&(L-=B[1],D+=B[3]);var j=D-L;j>0&&(j=Math.max(10,j),this.circleDiameter=j)}else{var J=v.top*x-T,ee=v.bottom*x+T,he=v.left*x-T,oe=v.right*x+T,ge=v.collisionPadding;if(ge&&(he-=ge[0]*x,J-=ge[1]*x,oe+=ge[2]*x,ee+=ge[3]*x),A){var we=new E(he,J),Te=new E(oe,J),Oe=new E(he,ee),Ve=new E(oe,ee),Ye=A*Math.PI/180;we._rotate(Ye),Te._rotate(Ye),Oe._rotate(Ye),Ve._rotate(Ye),he=Math.min(we.x,Te.x,Oe.x,Ve.x),oe=Math.max(we.x,Te.x,Oe.x,Ve.x),J=Math.min(we.y,Te.y,Oe.y,Ve.y),ee=Math.max(we.y,Te.y,Oe.y,Ve.y)}r.emplaceBack(i.x,i.y,he,J,oe,ee,l,p,y)}this.boxEndIndex=r.length},Pf=function(r,i){if(r===void 0&&(r=[]),i===void 0&&(i=D9),this.data=r,this.length=this.data.length,this.compare=i,this.length>0)for(var l=(this.length>>1)-1;l>=0;l--)this._down(l)};function D9(r,i){return r<i?-1:r>i?1:0}function N9(r,i,l){i===void 0&&(i=1),l===void 0&&(l=!1);for(var p=1/0,y=1/0,v=-1/0,x=-1/0,T=r[0],C=0;C<T.length;C++){var A=T[C];(!C||A.x<p)&&(p=A.x),(!C||A.y<y)&&(y=A.y),(!C||A.x>v)&&(v=A.x),(!C||A.y>x)&&(x=A.y)}var L=Math.min(v-p,x-y),D=L/2,B=new Pf([],R9);if(L===0)return new E(p,y);for(var j=p;j<v;j+=L)for(var J=y;J<x;J+=L)B.push(new kf(j+D,J+D,D,r));for(var ee=function(ge){for(var we=0,Te=0,Oe=0,Ve=ge[0],Ye=0,ot=Ve.length,Pt=ot-1;Ye<ot;Pt=Ye++){var dt=Ve[Ye],zt=Ve[Pt],yt=dt.x*zt.y-zt.x*dt.y;Te+=(dt.x+zt.x)*yt,Oe+=(dt.y+zt.y)*yt,we+=3*yt}return new kf(Te/we,Oe/we,0,ge)}(r),he=B.length;B.length;){var oe=B.pop();(oe.d>ee.d||!ee.d)&&(ee=oe,l&&console.log("found best %d after %d probes",Math.round(1e4*oe.d)/1e4,he)),oe.max-ee.d<=i||(B.push(new kf(oe.p.x-(D=oe.h/2),oe.p.y-D,D,r)),B.push(new kf(oe.p.x+D,oe.p.y-D,D,r)),B.push(new kf(oe.p.x-D,oe.p.y+D,D,r)),B.push(new kf(oe.p.x+D,oe.p.y+D,D,r)),he+=4)}return l&&(console.log("num probes: "+he),console.log("best distance: "+ee.d)),ee.p}function R9(r,i){return i.max-r.max}function kf(r,i,l,p){this.p=new E(r,i),this.h=l,this.d=function(y,v){for(var x=!1,T=1/0,C=0;C<v.length;C++)for(var A=v[C],L=0,D=A.length,B=D-1;L<D;B=L++){var j=A[L],J=A[B];j.y>y.y!=J.y>y.y&&y.x<(J.x-j.x)*(y.y-j.y)/(J.y-j.y)+j.x&&(x=!x),T=Math.min(T,Wu(y,j,J))}return(x?1:-1)*Math.sqrt(T)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}Pf.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},Pf.prototype.pop=function(){if(this.length!==0){var r=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),r}},Pf.prototype.peek=function(){return this.data[0]},Pf.prototype._up=function(r){for(var i=this.data,l=this.compare,p=i[r];r>0;){var y=r-1>>1,v=i[y];if(l(p,v)>=0)break;i[r]=v,r=y}i[r]=p},Pf.prototype._down=function(r){for(var i=this.data,l=this.compare,p=this.length>>1,y=i[r];r<p;){var v=1+(r<<1),x=i[v],T=v+1;if(T<this.length&&l(i[T],x)<0&&(v=T,x=i[T]),l(x,y)>=0)break;i[r]=x,r=v}i[r]=y};var ax=Number.POSITIVE_INFINITY;function SI(r,i){return i[1]!==ax?function(l,p,y){var v=0,x=0;switch(p=Math.abs(p),y=Math.abs(y),l){case"top-right":case"top-left":case"top":x=y-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-y}switch(l){case"top-right":case"bottom-right":case"right":v=-p;break;case"top-left":case"bottom-left":case"left":v=p}return[v,x]}(r,i[0],i[1]):function(l,p){var y=0,v=0;p<0&&(p=0);var x=p/Math.sqrt(2);switch(l){case"top-right":case"top-left":v=x-7;break;case"bottom-right":case"bottom-left":v=7-x;break;case"bottom":v=7-p;break;case"top":v=p-7}switch(l){case"top-right":case"bottom-right":y=-x;break;case"top-left":case"bottom-left":y=x;break;case"left":y=p;break;case"right":y=-p}return[y,v]}(r,i[0])}function sx(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function TI(r,i,l,p,y,v,x,T,C,A,L,D,B,j,J){var ee=function(Te,Oe,Ve,Ye,ot,Pt,dt,zt){for(var yt=Ye.layout.get("text-rotate").evaluate(Pt,{})*Math.PI/180,ur=[],qt=0,Mt=Oe.positionedLines;qt<Mt.length;qt+=1)for(var pr=Mt[qt],nr=0,Ir=pr.positionedGlyphs;nr<Ir.length;nr+=1){var Ft=Ir[nr];if(Ft.rect){var Dr=Ft.rect||{},xn=4,Pn=!0,Cn=1,bn=0,kn=(ot||zt)&&Ft.vertical,mi=Ft.metrics.advance*Ft.scale/2;if(zt&&Oe.verticalizable&&(bn=pr.lineOffset/2-(Ft.imageName?-(24-Ft.metrics.width*Ft.scale)/2:24*(Ft.scale-1))),Ft.imageName){var yi=dt[Ft.imageName];Pn=yi.sdf,xn=1/(Cn=yi.pixelRatio)}var Yi=ot?[Ft.x+mi,Ft.y]:[0,0],Si=ot?[0,0]:[Ft.x+mi+Ve[0],Ft.y+Ve[1]-bn],Ji=[0,0];kn&&(Ji=Si,Si=[0,0]);var Fn=(Ft.metrics.left-xn)*Ft.scale-mi+Si[0],Ti=(-Ft.metrics.top-xn)*Ft.scale+Si[1],_r=Fn+Dr.w*Ft.scale/Cn,Jr=Ti+Dr.h*Ft.scale/Cn,Wr=new E(Fn,Ti),Ar=new E(_r,Ti),lo=new E(Fn,Jr),Fi=new E(_r,Jr);if(kn){var dn=new E(-mi,mi- -17),Xn=-Math.PI/2,Bi=12-mi,Nr=new E(22-Bi,-(Ft.imageName?Bi:0)),nl=new(Function.prototype.bind.apply(E,[null].concat(Ji)));Wr._rotateAround(Xn,dn)._add(Nr)._add(nl),Ar._rotateAround(Xn,dn)._add(Nr)._add(nl),lo._rotateAround(Xn,dn)._add(Nr)._add(nl),Fi._rotateAround(Xn,dn)._add(Nr)._add(nl)}if(yt){var ia=Math.sin(yt),il=Math.cos(yt),Bn=[il,-ia,ia,il];Wr._matMult(Bn),Ar._matMult(Bn),lo._matMult(Bn),Fi._matMult(Bn)}var ol=new E(0,0),Ua=new E(0,0);ur.push({tl:Wr,tr:Ar,bl:lo,br:Fi,tex:Dr,writingMode:Oe.writingMode,glyphOffset:Yi,sectionIndex:Ft.sectionIndex,isSDF:Pn,pixelOffsetTL:ol,pixelOffsetBR:Ua,minFontScaleX:0,minFontScaleY:0})}}return ur}(0,l,T,y,v,x,p,r.allowVerticalPlacement),he=r.textSizeData,oe=null;he.kind==="source"?(oe=[128*y.layout.get("text-size").evaluate(x,{})])[0]>32640&&st(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):he.kind==="composite"&&((oe=[128*j.compositeTextSizes[0].evaluate(x,{},J),128*j.compositeTextSizes[1].evaluate(x,{},J)])[0]>32640||oe[1]>32640)&&st(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),r.addSymbols(r.text,ee,oe,T,v,x,A,i,C.lineStartIndex,C.lineLength,B,J);for(var ge=0,we=L;ge<we.length;ge+=1)D[we[ge]]=r.text.placedSymbolArray.length-1;return 4*ee.length}function MI(r){for(var i in r)return r[i];return null}function z9(r,i,l,p){var y=r.compareText;if(i in y){for(var v=y[i],x=v.length-1;x>=0;x--)if(p.dist(v[x])<l)return!0}else y[i]=[];return y[i].push(p),!1}var F9=Mf.VectorTileFeature.types,B9=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tv(r,i,l,p,y,v,x,T,C,A,L,D,B){var j=T?Math.min(32640,Math.round(T[0])):0,J=T?Math.min(32640,Math.round(T[1])):0;r.emplaceBack(i,l,Math.round(32*p),Math.round(32*y),v,x,(j<<1)+(C?1:0),J,16*A,16*L,256*D,256*B)}function lx(r,i,l){r.emplaceBack(i.x,i.y,l),r.emplaceBack(i.x,i.y,l),r.emplaceBack(i.x,i.y,l),r.emplaceBack(i.x,i.y,l)}function V9(r){for(var i=0,l=r.sections;i<l.length;i+=1)if(mf(l[i].text))return!0;return!1}var Lf=function(r){this.layoutVertexArray=new _f,this.indexArray=new Ys,this.programConfigurations=r,this.segments=new W,this.dynamicLayoutVertexArray=new $u,this.opacityVertexArray=new th,this.placedSymbolArray=new d};Lf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Lf.prototype.upload=function(r,i,l,p){this.isEmpty()||(l&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,f9.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,p9.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,B9,!0),this.opacityVertexBuffer.itemSize=1),(l||p)&&this.programConfigurations.upload(r))},Lf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},wt("SymbolBuffers",Lf);var Xd=function(r,i,l){this.layoutVertexArray=new r,this.layoutAttributes=i,this.indexArray=new l,this.segments=new W,this.collisionVertexArray=new zd};Xd.prototype.upload=function(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,d9.members,!0)},Xd.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},wt("CollisionBuffers",Xd);var Zr=function(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=jo([]),this.placementViewportMatrix=jo([]);var i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ox(this.zoom,i["text-size"]),this.iconSizeData=ox(this.zoom,i["icon-size"]);var l=this.layers[0].layout,p=l.get("symbol-sort-key"),y=l.get("symbol-z-order");this.canOverlap=l.get("text-allow-overlap")||l.get("icon-allow-overlap")||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map(function(v){return na[v]})),this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id}),this.sourceID=r.sourceID};Zr.prototype.createArrays=function(){this.text=new Lf(new Gt(this.layers,this.zoom,function(r){return/^text/.test(r)})),this.icon=new Lf(new Gt(this.layers,this.zoom,function(r){return/^icon/.test(r)})),this.glyphOffsetArray=new S,this.lineVertexArray=new O,this.symbolInstances=new w},Zr.prototype.calculateGlyphDependencies=function(r,i,l,p,y){for(var v=0;v<r.length;v++)if(i[r.charCodeAt(v)]=!0,(l||p)&&y){var x=Wd[r.charAt(v)];x&&(i[x.charCodeAt(0)]=!0)}},Zr.prototype.populate=function(r,i,l){var p=this.layers[0],y=p.layout,v=y.get("text-font"),x=y.get("text-field"),T=y.get("icon-image"),C=(x.value.kind!=="constant"||x.value.value instanceof _i&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),A=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,L=y.get("symbol-sort-key");if(this.features=[],C||A){for(var D=i.iconDependencies,B=i.glyphDependencies,j=i.availableImages,J=new gr(this.zoom),ee=0,he=r;ee<he.length;ee+=1){var oe=he[ee],ge=oe.feature,we=oe.id,Te=oe.index,Oe=oe.sourceLayerIndex,Ve=p._featureFilter.needGeometry,Ye=zn(ge,Ve);if(p._featureFilter.filter(J,Ye,l)){Ve||(Ye.geometry=On(ge));var ot=void 0;if(C){var Pt=p.getValueAndResolveTokens("text-field",Ye,l,j),dt=_i.factory(Pt);V9(dt)&&(this.hasRTLText=!0),(!this.hasRTLText||Ld()==="unavailable"||this.hasRTLText&&Uo.isParsed())&&(ot=y9(dt,p,Ye))}var zt=void 0;if(A){var yt=p.getValueAndResolveTokens("icon-image",Ye,l,j);zt=yt instanceof io?yt:io.fromString(yt)}if(ot||zt){var ur=this.sortFeaturesByKey?L.evaluate(Ye,{},l):void 0;if(this.features.push({id:we,text:ot,icon:zt,index:Te,sourceLayerIndex:Oe,geometry:Ye.geometry,properties:ge.properties,type:F9[ge.type],sortKey:ur}),zt&&(D[zt.name]=!0),ot){var qt=v.evaluate(Ye,{},l).join(","),Mt=y.get("text-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(na.vertical)>=0;for(var pr=0,nr=ot.sections;pr<nr.length;pr+=1){var Ir=nr[pr];if(Ir.image)D[Ir.image.name]=!0;else{var Ft=Ad(ot.toString()),Dr=Ir.fontStack||qt,xn=B[Dr]=B[Dr]||{};this.calculateGlyphDependencies(Ir.text,xn,Mt,this.allowVerticalPlacement,Ft)}}}}}}y.get("symbol-placement")==="line"&&(this.features=function(Pn){var Cn={},bn={},kn=[],mi=0;function yi(dn){kn.push(Pn[dn]),mi++}function Yi(dn,Xn,Bi){var Nr=bn[dn];return delete bn[dn],bn[Xn]=Nr,kn[Nr].geometry[0].pop(),kn[Nr].geometry[0]=kn[Nr].geometry[0].concat(Bi[0]),Nr}function Si(dn,Xn,Bi){var Nr=Cn[Xn];return delete Cn[Xn],Cn[dn]=Nr,kn[Nr].geometry[0].shift(),kn[Nr].geometry[0]=Bi[0].concat(kn[Nr].geometry[0]),Nr}function Ji(dn,Xn,Bi){var Nr=Bi?Xn[0][Xn[0].length-1]:Xn[0][0];return dn+":"+Nr.x+":"+Nr.y}for(var Fn=0;Fn<Pn.length;Fn++){var Ti=Pn[Fn],_r=Ti.geometry,Jr=Ti.text?Ti.text.toString():null;if(Jr){var Wr=Ji(Jr,_r),Ar=Ji(Jr,_r,!0);if(Wr in bn&&Ar in Cn&&bn[Wr]!==Cn[Ar]){var lo=Si(Wr,Ar,_r),Fi=Yi(Wr,Ar,kn[lo].geometry);delete Cn[Wr],delete bn[Ar],bn[Ji(Jr,kn[Fi].geometry,!0)]=Fi,kn[lo].geometry=null}else Wr in bn?Yi(Wr,Ar,_r):Ar in Cn?Si(Wr,Ar,_r):(yi(Fn),Cn[Wr]=mi-1,bn[Ar]=mi-1)}else yi(Fn)}return kn.filter(function(dn){return dn.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Pn,Cn){return Pn.sortKey-Cn.sortKey})}},Zr.prototype.update=function(r,i,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,i,this.layers,l),this.icon.programConfigurations.updatePaintArrays(r,i,this.layers,l))},Zr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Zr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Zr.prototype.upload=function(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Zr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Zr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Zr.prototype.addToLineVertexArray=function(r,i){var l=this.lineVertexArray.length;if(r.segment!==void 0){for(var p=r.dist(i[r.segment+1]),y=r.dist(i[r.segment]),v={},x=r.segment+1;x<i.length;x++)v[x]={x:i[x].x,y:i[x].y,tileUnitDistanceFromAnchor:p},x<i.length-1&&(p+=i[x+1].dist(i[x]));for(var T=r.segment||0;T>=0;T--)v[T]={x:i[T].x,y:i[T].y,tileUnitDistanceFromAnchor:y},T>0&&(y+=i[T-1].dist(i[T]));for(var C=0;C<i.length;C++){var A=v[C];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}},Zr.prototype.addSymbols=function(r,i,l,p,y,v,x,T,C,A,L,D){for(var B=r.indexArray,j=r.layoutVertexArray,J=r.segments.prepareSegment(4*i.length,j,B,this.canOverlap?v.sortKey:void 0),ee=this.glyphOffsetArray.length,he=J.vertexLength,oe=this.allowVerticalPlacement&&x===na.vertical?Math.PI/2:0,ge=v.text&&v.text.sections,we=0;we<i.length;we++){var Te=i[we],Oe=Te.tl,Ve=Te.tr,Ye=Te.bl,ot=Te.br,Pt=Te.tex,dt=Te.pixelOffsetTL,zt=Te.pixelOffsetBR,yt=Te.minFontScaleX,ur=Te.minFontScaleY,qt=Te.glyphOffset,Mt=Te.isSDF,pr=Te.sectionIndex,nr=J.vertexLength,Ir=qt[1];Tv(j,T.x,T.y,Oe.x,Ir+Oe.y,Pt.x,Pt.y,l,Mt,dt.x,dt.y,yt,ur),Tv(j,T.x,T.y,Ve.x,Ir+Ve.y,Pt.x+Pt.w,Pt.y,l,Mt,zt.x,dt.y,yt,ur),Tv(j,T.x,T.y,Ye.x,Ir+Ye.y,Pt.x,Pt.y+Pt.h,l,Mt,dt.x,zt.y,yt,ur),Tv(j,T.x,T.y,ot.x,Ir+ot.y,Pt.x+Pt.w,Pt.y+Pt.h,l,Mt,zt.x,zt.y,yt,ur),lx(r.dynamicLayoutVertexArray,T,oe),B.emplaceBack(nr,nr+1,nr+2),B.emplaceBack(nr+1,nr+2,nr+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(qt[0]),we!==i.length-1&&pr===i[we+1].sectionIndex||r.programConfigurations.populatePaintArrays(j.length,v,v.index,{},D,ge&&ge[pr])}r.placedSymbolArray.emplaceBack(T.x,T.y,ee,this.glyphOffsetArray.length-ee,he,C,A,T.segment,l?l[0]:0,l?l[1]:0,p[0],p[1],x,0,!1,0,L)},Zr.prototype._addCollisionDebugVertex=function(r,i,l,p,y,v){return i.emplaceBack(0,0),r.emplaceBack(l.x,l.y,p,y,Math.round(v.x),Math.round(v.y))},Zr.prototype.addCollisionDebugVertices=function(r,i,l,p,y,v,x){var T=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),C=T.vertexLength,A=y.layoutVertexArray,L=y.collisionVertexArray,D=x.anchorX,B=x.anchorY;this._addCollisionDebugVertex(A,L,v,D,B,new E(r,i)),this._addCollisionDebugVertex(A,L,v,D,B,new E(l,i)),this._addCollisionDebugVertex(A,L,v,D,B,new E(l,p)),this._addCollisionDebugVertex(A,L,v,D,B,new E(r,p)),T.vertexLength+=4;var j=y.indexArray;j.emplaceBack(C,C+1),j.emplaceBack(C+1,C+2),j.emplaceBack(C+2,C+3),j.emplaceBack(C+3,C),T.primitiveLength+=4},Zr.prototype.addDebugCollisionBoxes=function(r,i,l,p){for(var y=r;y<i;y++){var v=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,p?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,l)}},Zr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Xd(Gu,iI.members,rh),this.iconCollisionBox=new Xd(Gu,iI.members,rh);for(var r=0;r<this.symbolInstances.length;r++){var i=this.symbolInstances.get(r);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}},Zr.prototype._deserializeCollisionBoxesForSymbol=function(r,i,l,p,y,v,x,T,C){for(var A={},L=i;L<l;L++){var D=r.get(L);A.textBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,anchorPointX:D.anchorPointX,anchorPointY:D.anchorPointY},A.textFeatureIndex=D.featureIndex;break}for(var B=p;B<y;B++){var j=r.get(B);A.verticalTextBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},A.verticalTextFeatureIndex=j.featureIndex;break}for(var J=v;J<x;J++){var ee=r.get(J);A.iconBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},A.iconFeatureIndex=ee.featureIndex;break}for(var he=T;he<C;he++){var oe=r.get(he);A.verticalIconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},A.verticalIconFeatureIndex=oe.featureIndex;break}return A},Zr.prototype.deserializeCollisionBoxes=function(r){this.collisionArrays=[];for(var i=0;i<this.symbolInstances.length;i++){var l=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}},Zr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Zr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Zr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Zr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Zr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Zr.prototype.addIndicesForPlacedSymbol=function(r,i){for(var l=r.placedSymbolArray.get(i),p=l.vertexStartIndex+4*l.numGlyphs,y=l.vertexStartIndex;y<p;y+=4)r.indexArray.emplaceBack(y,y+1,y+2),r.indexArray.emplaceBack(y+1,y+2,y+3)},Zr.prototype.getSortedSymbolIndexes=function(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var i=Math.sin(r),l=Math.cos(r),p=[],y=[],v=[],x=0;x<this.symbolInstances.length;++x){v.push(x);var T=this.symbolInstances.get(x);p.push(0|Math.round(i*T.anchorX+l*T.anchorY)),y.push(T.featureIndex)}return v.sort(function(C,A){return p[C]-p[A]||y[A]-y[C]}),v},Zr.prototype.addToSortKeyRanges=function(r,i){var l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===i?l.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:r+1})},Zr.prototype.sortFeatures=function(r){var i=this;if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var l=0,p=this.symbolInstanceIndexes;l<p.length;l+=1){var y=this.symbolInstances.get(p[l]);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach(function(v,x,T){v>=0&&T.indexOf(v)===x&&i.addIndicesForPlacedSymbol(i.text,v)}),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},wt("SymbolBucket",Zr,{omit:["layers","collisionBoxArray","features","compareText"]}),Zr.MAX_GLYPHS=65535,Zr.addDynamicAttributes=lx;var U9=new Li({"symbol-placement":new Nt($.layout_symbol["symbol-placement"]),"symbol-spacing":new Nt($.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Nt($.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Tt($.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Nt($.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Nt($.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Nt($.layout_symbol["icon-ignore-placement"]),"icon-optional":new Nt($.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Nt($.layout_symbol["icon-rotation-alignment"]),"icon-size":new Tt($.layout_symbol["icon-size"]),"icon-text-fit":new Nt($.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Nt($.layout_symbol["icon-text-fit-padding"]),"icon-image":new Tt($.layout_symbol["icon-image"]),"icon-rotate":new Tt($.layout_symbol["icon-rotate"]),"icon-padding":new Nt($.layout_symbol["icon-padding"]),"icon-keep-upright":new Nt($.layout_symbol["icon-keep-upright"]),"icon-offset":new Tt($.layout_symbol["icon-offset"]),"icon-anchor":new Tt($.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Nt($.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Nt($.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Nt($.layout_symbol["text-rotation-alignment"]),"text-field":new Tt($.layout_symbol["text-field"]),"text-font":new Tt($.layout_symbol["text-font"]),"text-size":new Tt($.layout_symbol["text-size"]),"text-max-width":new Tt($.layout_symbol["text-max-width"]),"text-line-height":new Nt($.layout_symbol["text-line-height"]),"text-letter-spacing":new Tt($.layout_symbol["text-letter-spacing"]),"text-justify":new Tt($.layout_symbol["text-justify"]),"text-radial-offset":new Tt($.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Nt($.layout_symbol["text-variable-anchor"]),"text-anchor":new Tt($.layout_symbol["text-anchor"]),"text-max-angle":new Nt($.layout_symbol["text-max-angle"]),"text-writing-mode":new Nt($.layout_symbol["text-writing-mode"]),"text-rotate":new Tt($.layout_symbol["text-rotate"]),"text-padding":new Nt($.layout_symbol["text-padding"]),"text-keep-upright":new Nt($.layout_symbol["text-keep-upright"]),"text-transform":new Tt($.layout_symbol["text-transform"]),"text-offset":new Tt($.layout_symbol["text-offset"]),"text-allow-overlap":new Nt($.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Nt($.layout_symbol["text-ignore-placement"]),"text-optional":new Nt($.layout_symbol["text-optional"])}),ux={paint:new Li({"icon-opacity":new Tt($.paint_symbol["icon-opacity"]),"icon-color":new Tt($.paint_symbol["icon-color"]),"icon-halo-color":new Tt($.paint_symbol["icon-halo-color"]),"icon-halo-width":new Tt($.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Tt($.paint_symbol["icon-halo-blur"]),"icon-translate":new Nt($.paint_symbol["icon-translate"]),"icon-translate-anchor":new Nt($.paint_symbol["icon-translate-anchor"]),"text-opacity":new Tt($.paint_symbol["text-opacity"]),"text-color":new Tt($.paint_symbol["text-color"],{runtimeType:De,getOverride:function(r){return r.textColor},hasOverride:function(r){return!!r.textColor}}),"text-halo-color":new Tt($.paint_symbol["text-halo-color"]),"text-halo-width":new Tt($.paint_symbol["text-halo-width"]),"text-halo-blur":new Tt($.paint_symbol["text-halo-blur"]),"text-translate":new Nt($.paint_symbol["text-translate"]),"text-translate-anchor":new Nt($.paint_symbol["text-translate-anchor"])}),layout:U9},Df=function(r){this.type=r.property.overrides?r.property.overrides.runtimeType:_t,this.defaultValue=r};Df.prototype.evaluate=function(r){if(r.formattedSection){var i=this.defaultValue.property.overrides;if(i&&i.hasOverride(r.formattedSection))return i.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default},Df.prototype.eachChild=function(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)},Df.prototype.outputDefined=function(){return!1},Df.prototype.serialize=function(){return null},wt("FormatSectionOverride",Df,{omit:["defaultValue"]});var j9=function(r){function i(l){r.call(this,l,ux)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.recalculate=function(l,p){if(r.prototype.recalculate.call(this,l,p),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var y=this.layout.get("text-writing-mode");if(y){for(var v=[],x=0,T=y;x<T.length;x+=1){var C=T[x];v.indexOf(C)<0&&v.push(C)}this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},i.prototype.getValueAndResolveTokens=function(l,p,y,v){var x=this.layout.get(l).evaluate(p,{},y,v),T=this._unevaluatedLayout._values[l];return T.isDataDriven()||Gc(T.value)||!x?x:function(C,A){return A.replace(/{([^{}]+)}/g,function(L,D){return D in C?String(C[D]):""})}(p.properties,x)},i.prototype.createBucket=function(l){return new Zr(l)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype._setPaintOverrides=function(){for(var l=0,p=ux.paint.overridableProperties;l<p.length;l+=1){var y=p[l];if(i.hasPaintOverride(this.layout,y)){var v,x=this.paint.get(y),T=new Df(x),C=new zu(T,x.property.specification);v=x.value.kind==="constant"||x.value.kind==="source"?new qc("source",C):new Fu("composite",C,x.value.zoomStops,x.value._interpolationType),this.paint._values[y]=new Hi(x.property,v,x.parameters)}}},i.prototype._handleOverridablePaintPropertyUpdate=function(l,p,y){return!(!this.layout||p.isDataDriven()||y.isDataDriven())&&i.hasPaintOverride(this.layout,l)},i.hasPaintOverride=function(l,p){var y=l.get("text-field"),v=ux.paint.properties[p],x=!1,T=function(L){for(var D=0,B=L;D<B.length;D+=1)if(v.overrides&&v.overrides.hasOverride(B[D]))return void(x=!0)};if(y.value.kind==="constant"&&y.value.value instanceof _i)T(y.value.value.sections);else if(y.value.kind==="source"){var C=function(L){x||(L instanceof qi&&Rn(L.value)===$t?T(L.value.sections):L instanceof ya?T(L.sections):L.eachChild(C))},A=y.value;A._styleExpression&&C(A._styleExpression.expression)}return x},i}(za),$9={paint:new Li({"background-color":new Nt($.paint_background["background-color"]),"background-pattern":new Zi($.paint_background["background-pattern"]),"background-opacity":new Nt($.paint_background["background-opacity"])})},G9=function(r){function i(l){r.call(this,l,$9)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(za),q9={paint:new Li({"raster-opacity":new Nt($.paint_raster["raster-opacity"]),"raster-hue-rotate":new Nt($.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Nt($.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Nt($.paint_raster["raster-brightness-max"]),"raster-saturation":new Nt($.paint_raster["raster-saturation"]),"raster-contrast":new Nt($.paint_raster["raster-contrast"]),"raster-resampling":new Nt($.paint_raster["raster-resampling"]),"raster-fade-duration":new Nt($.paint_raster["raster-fade-duration"])})},W9=function(r){function i(l){r.call(this,l,q9)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(za),H9=function(r){function i(l){r.call(this,l,{}),this.implementation=l}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},i.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},i.prototype.recalculate=function(){},i.prototype.updateTransitions=function(){},i.prototype.hasTransition=function(){},i.prototype.serialize=function(){},i.prototype.onAdd=function(l){this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},i.prototype.onRemove=function(l){this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},i}(za),Z9={circle:H1,heatmap:Pj,hillshade:Lj,fill:Kj,"fill-extrusion":o9,line:h9,symbol:j9,background:G9,raster:W9},II=I.HTMLImageElement,OI=I.HTMLCanvasElement,CI=I.HTMLVideoElement,AI=I.ImageData,Mv=I.ImageBitmap,lh=function(r,i,l,p){this.context=r,this.format=l,this.texture=r.gl.createTexture(),this.update(i,p)};lh.prototype.update=function(r,i,l){var p=r.width,y=r.height,v=!(this.size&&this.size[0]===p&&this.size[1]===y||l),x=this.context,T=x.gl;if(this.useMipmap=Boolean(i&&i.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!i||i.premultiply!==!1)),v)this.size=[p,y],r instanceof II||r instanceof OI||r instanceof CI||r instanceof AI||Mv&&r instanceof Mv?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,r):T.texImage2D(T.TEXTURE_2D,0,this.format,p,y,0,this.format,T.UNSIGNED_BYTE,r.data);else{var C=l||{x:0,y:0},A=C.x,L=C.y;r instanceof II||r instanceof OI||r instanceof CI||r instanceof AI||Mv&&r instanceof Mv?T.texSubImage2D(T.TEXTURE_2D,0,A,L,T.RGBA,T.UNSIGNED_BYTE,r):T.texSubImage2D(T.TEXTURE_2D,0,A,L,p,y,T.RGBA,T.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D)},lh.prototype.bind=function(r,i,l){var p=this.context.gl;p.bindTexture(p.TEXTURE_2D,this.texture),l!==p.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(l=p.LINEAR),r!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,r),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,l||r),this.filter=r),i!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,i),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,i),this.wrap=i)},lh.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},lh.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var cx=function(r){var i=this;this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})};cx.prototype.trigger=function(){var r=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){r._triggered=!1,r._callback()},0))},cx.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Nf=function(r,i,l){this.target=r,this.parent=i,this.mapId=l,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ze(["receive","process"],this),this.invoker=new cx(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ht()?r:I};function PI(r,i,l){var p=2*Math.PI*6378137/256/Math.pow(2,l);return[r*p-2*Math.PI*6378137/2,i*p-2*Math.PI*6378137/2]}Nf.prototype.send=function(r,i,l,p,y){var v=this;y===void 0&&(y=!1);var x=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(this.callbacks[x]=l);var T=rr(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:r,hasCallback:!!l,targetMapId:p,mustQueue:y,sourceMapId:this.mapId,data:va(i,T)},T),{cancel:function(){l&&delete v.callbacks[x],v.target.postMessage({id:x,type:"<cancel>",targetMapId:p,sourceMapId:v.mapId})}}},Nf.prototype.receive=function(r){var i=r.data,l=i.id;if(l&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){delete this.tasks[l];var p=this.cancelCallbacks[l];delete this.cancelCallbacks[l],p&&p()}else ht()||i.mustQueue?(this.tasks[l]=i,this.taskQueue.push(l),this.invoker.trigger()):this.processTask(l,i)},Nf.prototype.process=function(){if(this.taskQueue.length){var r=this.taskQueue.shift(),i=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(r,i)}},Nf.prototype.processTask=function(r,i){var l=this;if(i.type==="<response>"){var p=this.callbacks[r];delete this.callbacks[r],p&&(i.error?p(wo(i.error)):p(null,wo(i.data)))}else{var y=!1,v=rr(this.globalScope)?void 0:[],x=i.hasCallback?function(L,D){y=!0,delete l.cancelCallbacks[r],l.target.postMessage({id:r,type:"<response>",sourceMapId:l.mapId,error:L?va(L):null,data:va(D,v)},v)}:function(L){y=!0},T=null,C=wo(i.data);if(this.parent[i.type])T=this.parent[i.type](i.sourceMapId,C,x);else if(this.parent.getWorkerSource){var A=i.type.split(".");T=this.parent.getWorkerSource(i.sourceMapId,A[0],C.source)[A[1]](C,x)}else x(new Error("Could not find function "+i.type));!y&&T&&T.cancel&&(this.cancelCallbacks[r]=T.cancel)}},Nf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ii=function(r,i){r&&(i?this.setSouthWest(r).setNorthEast(i):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))};ii.prototype.setNorthEast=function(r){return this._ne=r instanceof _n?new _n(r.lng,r.lat):_n.convert(r),this},ii.prototype.setSouthWest=function(r){return this._sw=r instanceof _n?new _n(r.lng,r.lat):_n.convert(r),this},ii.prototype.extend=function(r){var i,l,p=this._sw,y=this._ne;if(r instanceof _n)i=r,l=r;else{if(!(r instanceof ii))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(ii.convert(r)):this.extend(_n.convert(r)):this;if(l=r._ne,!(i=r._sw)||!l)return this}return p||y?(p.lng=Math.min(i.lng,p.lng),p.lat=Math.min(i.lat,p.lat),y.lng=Math.max(l.lng,y.lng),y.lat=Math.max(l.lat,y.lat)):(this._sw=new _n(i.lng,i.lat),this._ne=new _n(l.lng,l.lat)),this},ii.prototype.getCenter=function(){return new _n((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ii.prototype.getSouthWest=function(){return this._sw},ii.prototype.getNorthEast=function(){return this._ne},ii.prototype.getNorthWest=function(){return new _n(this.getWest(),this.getNorth())},ii.prototype.getSouthEast=function(){return new _n(this.getEast(),this.getSouth())},ii.prototype.getWest=function(){return this._sw.lng},ii.prototype.getSouth=function(){return this._sw.lat},ii.prototype.getEast=function(){return this._ne.lng},ii.prototype.getNorth=function(){return this._ne.lat},ii.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ii.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ii.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ii.prototype.contains=function(r){var i=_n.convert(r),l=i.lng,p=i.lat,y=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&y},ii.convert=function(r){return!r||r instanceof ii?r:new ii(r)};var _n=function(r,i){if(isNaN(r)||isNaN(i))throw new Error("Invalid LngLat object: ("+r+", "+i+")");if(this.lng=+r,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};_n.prototype.wrap=function(){return new _n(re(this.lng,-180,180),this.lat)},_n.prototype.toArray=function(){return[this.lng,this.lat]},_n.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},_n.prototype.distanceTo=function(r){var i=Math.PI/180,l=this.lat*i,p=r.lat*i,y=Math.sin(l)*Math.sin(p)+Math.cos(l)*Math.cos(p)*Math.cos((r.lng-this.lng)*i);return 63710088e-1*Math.acos(Math.min(y,1))},_n.prototype.toBounds=function(r){r===void 0&&(r=0);var i=360*r/40075017,l=i/Math.cos(Math.PI/180*this.lat);return new ii(new _n(this.lng-l,this.lat-i),new _n(this.lng+l,this.lat+i))},_n.convert=function(r){if(r instanceof _n)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new _n(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new _n(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var kI=2*Math.PI*63710088e-1;function LI(r){return kI*Math.cos(r*Math.PI/180)}function DI(r){return(180+r)/360}function NI(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function RI(r,i){return r/LI(i)}function hx(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}var uh=function(r,i,l){l===void 0&&(l=0),this.x=+r,this.y=+i,this.z=+l};uh.fromLngLat=function(r,i){i===void 0&&(i=0);var l=_n.convert(r);return new uh(DI(l.lng),NI(l.lat),RI(i,l.lat))},uh.prototype.toLngLat=function(){return new _n(360*this.x-180,hx(this.y))},uh.prototype.toAltitude=function(){return this.z*LI(hx(this.y))},uh.prototype.meterInMercatorCoordinateUnits=function(){return 1/kI*(r=hx(this.y),1/Math.cos(r*Math.PI/180));var r};var ch=function(r,i,l){this.z=r,this.x=i,this.y=l,this.key=Kd(0,r,r,i,l)};ch.prototype.equals=function(r){return this.z===r.z&&this.x===r.x&&this.y===r.y},ch.prototype.url=function(r,i){var l,p,y,v,x,T=(p=this.y,y=this.z,v=PI(256*(l=this.x),256*(p=Math.pow(2,y)-p-1),y),x=PI(256*(l+1),256*(p+1),y),v[0]+","+v[1]+","+x[0]+","+x[1]),C=function(A,L,D){for(var B,j="",J=A;J>0;J--)j+=(L&(B=1<<J-1)?1:0)+(D&B?2:0);return j}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",C).replace("{bbox-epsg-3857}",T)},ch.prototype.getTilePoint=function(r){var i=Math.pow(2,this.z);return new E(8192*(r.x*i-this.x),8192*(r.y*i-this.y))},ch.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var zI=function(r,i){this.wrap=r,this.canonical=i,this.key=Kd(r,i.z,i.z,i.x,i.y)},oi=function(r,i,l,p,y){this.overscaledZ=r,this.wrap=i,this.canonical=new ch(l,+p,+y),this.key=Kd(i,r,l,p,y)};function Kd(r,i,l,p,y){(r*=2)<0&&(r=-1*r-1);var v=1<<l;return(v*v*r+v*y+p).toString(36)+l.toString(36)+i.toString(36)}oi.prototype.equals=function(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)},oi.prototype.scaledTo=function(r){var i=this.canonical.z-r;return r>this.canonical.z?new oi(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new oi(r,this.wrap,r,this.canonical.x>>i,this.canonical.y>>i)},oi.prototype.calculateScaledKey=function(r,i){var l=this.canonical.z-r;return r>this.canonical.z?Kd(this.wrap*+i,r,this.canonical.z,this.canonical.x,this.canonical.y):Kd(this.wrap*+i,r,r,this.canonical.x>>l,this.canonical.y>>l)},oi.prototype.isChildOf=function(r){if(r.wrap!==this.wrap)return!1;var i=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>i&&r.canonical.y===this.canonical.y>>i},oi.prototype.children=function(r){if(this.overscaledZ>=r)return[new oi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,l=2*this.canonical.x,p=2*this.canonical.y;return[new oi(i,this.wrap,i,l,p),new oi(i,this.wrap,i,l+1,p),new oi(i,this.wrap,i,l,p+1),new oi(i,this.wrap,i,l+1,p+1)]},oi.prototype.isLessThan=function(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))},oi.prototype.wrapped=function(){return new oi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},oi.prototype.unwrapTo=function(r){return new oi(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)},oi.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},oi.prototype.toUnwrapped=function(){return new zI(this.wrap,this.canonical)},oi.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},oi.prototype.getTilePoint=function(r){return this.canonical.getTilePoint(new uh(r.x-this.wrap,r.y))},wt("CanonicalTileID",ch),wt("OverscaledTileID",oi,{omit:["posMatrix"]});var Zl=function(r,i,l){if(this.uid=r,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(l&&l!=="mapbox"&&l!=="terrarium")return st('"'+l+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=i.height;var p=this.dim=i.height-2;this.data=new Uint32Array(i.data.buffer),this.encoding=l||"mapbox";for(var y=0;y<p;y++)this.data[this._idx(-1,y)]=this.data[this._idx(0,y)],this.data[this._idx(p,y)]=this.data[this._idx(p-1,y)],this.data[this._idx(y,-1)]=this.data[this._idx(y,0)],this.data[this._idx(y,p)]=this.data[this._idx(y,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)]};Zl.prototype.get=function(r,i){var l=new Uint8Array(this.data.buffer),p=4*this._idx(r,i);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(l[p],l[p+1],l[p+2])},Zl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Zl.prototype._idx=function(r,i){if(r<-1||r>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(r+1)},Zl.prototype._unpackMapbox=function(r,i,l){return(256*r*256+256*i+l)/10-1e4},Zl.prototype._unpackTerrarium=function(r,i,l){return 256*r+i+l/256-32768},Zl.prototype.getPixels=function(){return new Io({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Zl.prototype.backfillBorder=function(r,i,l){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");var p=i*this.dim,y=i*this.dim+this.dim,v=l*this.dim,x=l*this.dim+this.dim;switch(i){case-1:p=y-1;break;case 1:y=p+1}switch(l){case-1:v=x-1;break;case 1:x=v+1}for(var T=-i*this.dim,C=-l*this.dim,A=v;A<x;A++)for(var L=p;L<y;L++)this.data[this._idx(L,A)]=r.data[this._idx(L+T,A+C)]},wt("DEMData",Zl);var Iv=function(r){this._stringToNumber={},this._numberToString=[];for(var i=0;i<r.length;i++){var l=r[i];this._stringToNumber[l]=i,this._numberToString[i]=l}};Iv.prototype.encode=function(r){return this._stringToNumber[r]},Iv.prototype.decode=function(r){return this._numberToString[r]};var Ov=function(r,i,l,p,y){this.type="Feature",this._vectorTileFeature=r,r._z=i,r._x=l,r._y=p,this.properties=r.properties,this.id=y},fx={geometry:{configurable:!0}};fx.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},fx.geometry.set=function(r){this._geometry=r},Ov.prototype.toJSON=function(){var r={geometry:this.geometry};for(var i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&(r[i]=this[i]);return r},Object.defineProperties(Ov.prototype,fx);var Rf=function(){this.state={},this.stateChanges={},this.deletedStates={}};Rf.prototype.updateState=function(r,i,l){var p=String(i);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][p]=this.stateChanges[r][p]||{},X(this.stateChanges[r][p],l),this.deletedStates[r]===null)for(var y in this.deletedStates[r]={},this.state[r])y!==p&&(this.deletedStates[r][y]=null);else if(this.deletedStates[r]&&this.deletedStates[r][p]===null)for(var v in this.deletedStates[r][p]={},this.state[r][p])l[v]||(this.deletedStates[r][p][v]=null);else for(var x in l)this.deletedStates[r]&&this.deletedStates[r][p]&&this.deletedStates[r][p][x]===null&&delete this.deletedStates[r][p][x]},Rf.prototype.removeFeatureState=function(r,i,l){if(this.deletedStates[r]!==null){var p=String(i);if(this.deletedStates[r]=this.deletedStates[r]||{},l&&i!==void 0)this.deletedStates[r][p]!==null&&(this.deletedStates[r][p]=this.deletedStates[r][p]||{},this.deletedStates[r][p][l]=null);else if(i!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][p])for(l in this.deletedStates[r][p]={},this.stateChanges[r][p])this.deletedStates[r][p][l]=null;else this.deletedStates[r][p]=null;else this.deletedStates[r]=null}},Rf.prototype.getState=function(r,i){var l=String(i),p=X({},(this.state[r]||{})[l],(this.stateChanges[r]||{})[l]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){var y=this.deletedStates[r][i];if(y===null)return{};for(var v in y)delete p[v]}return p},Rf.prototype.initializeTileState=function(r,i){r.setFeatureState(this.state,i)},Rf.prototype.coalesceChanges=function(r,i){var l={};for(var p in this.stateChanges){this.state[p]=this.state[p]||{};var y={};for(var v in this.stateChanges[p])this.state[p][v]||(this.state[p][v]={}),X(this.state[p][v],this.stateChanges[p][v]),y[v]=this.state[p][v];l[p]=y}for(var x in this.deletedStates){this.state[x]=this.state[x]||{};var T={};if(this.deletedStates[x]===null)for(var C in this.state[x])T[C]={},this.state[x][C]={};else for(var A in this.deletedStates[x]){if(this.deletedStates[x][A]===null)this.state[x][A]={};else for(var L=0,D=Object.keys(this.deletedStates[x][A]);L<D.length;L+=1)delete this.state[x][A][D[L]];T[A]=this.state[x][A]}l[x]=l[x]||{},X(l[x],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(l).length!==0)for(var B in r)r[B].setFeatureState(l,i)};var Xl=function(r,i){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new cs(8192,16,0),this.grid3D=new cs(8192,16,0),this.featureIndexArray=new R,this.promoteId=i};function FI(r,i,l,p,y){return Se(r,function(v,x){var T=i instanceof eh?i.get(x):null;return T&&T.evaluate?T.evaluate(l,p,y):T})}function BI(r){for(var i=1/0,l=1/0,p=-1/0,y=-1/0,v=0,x=r;v<x.length;v+=1){var T=x[v];i=Math.min(i,T.x),l=Math.min(l,T.y),p=Math.max(p,T.x),y=Math.max(y,T.y)}return{minX:i,minY:l,maxX:p,maxY:y}}function X9(r,i){return i-r}Xl.prototype.insert=function(r,i,l,p,y,v){var x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,p,y);for(var T=v?this.grid3D:this.grid,C=0;C<i.length;C++){for(var A=i[C],L=[1/0,1/0,-1/0,-1/0],D=0;D<A.length;D++){var B=A[D];L[0]=Math.min(L[0],B.x),L[1]=Math.min(L[1],B.y),L[2]=Math.max(L[2],B.x),L[3]=Math.max(L[3],B.y)}L[0]<8192&&L[1]<8192&&L[2]>=0&&L[3]>=0&&T.insert(x,L[0],L[1],L[2],L[3])}},Xl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Mf.VectorTile(new yv(this.rawTileData)).layers,this.sourceLayerCoder=new Iv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Xl.prototype.query=function(r,i,l,p){var y=this;this.loadVTLayers();for(var v=r.params||{},x=8192/r.tileSize/r.scale,T=uf(v.filter),C=r.queryGeometry,A=r.queryPadding*x,L=BI(C),D=this.grid.query(L.minX-A,L.minY-A,L.maxX+A,L.maxY+A),B=BI(r.cameraQueryGeometry),j=this.grid3D.query(B.minX-A,B.minY-A,B.maxX+A,B.maxY+A,function(Te,Oe,Ve,Ye){return function(ot,Pt,dt,zt,yt){for(var ur=0,qt=ot;ur<qt.length;ur+=1){var Mt=qt[ur];if(Pt<=Mt.x&&dt<=Mt.y&&zt>=Mt.x&&yt>=Mt.y)return!0}var pr=[new E(Pt,dt),new E(Pt,yt),new E(zt,yt),new E(zt,dt)];if(ot.length>2){for(var nr=0,Ir=pr;nr<Ir.length;nr+=1)if(Ba(ot,Ir[nr]))return!0}for(var Ft=0;Ft<ot.length-1;Ft++)if(oh(ot[Ft],ot[Ft+1],pr))return!0;return!1}(r.cameraQueryGeometry,Te-A,Oe-A,Ve+A,Ye+A)}),J=0,ee=j;J<ee.length;J+=1)D.push(ee[J]);D.sort(X9);for(var he,oe={},ge=function(Te){var Oe=D[Te];if(Oe!==he){he=Oe;var Ve=y.featureIndexArray.get(Oe),Ye=null;y.loadMatchingFeature(oe,Ve.bucketIndex,Ve.sourceLayerIndex,Ve.featureIndex,T,v.layers,v.availableImages,i,l,p,function(ot,Pt,dt){return Ye||(Ye=On(ot)),Pt.queryIntersectsFeature(C,ot,dt,Ye,y.z,r.transform,x,r.pixelPosMatrix)})}},we=0;we<D.length;we++)ge(we);return oe},Xl.prototype.loadMatchingFeature=function(r,i,l,p,y,v,x,T,C,A,L){var D=this.bucketLayerIDs[i];if(!v||function(ot,Pt){for(var dt=0;dt<ot.length;dt++)if(Pt.indexOf(ot[dt])>=0)return!0;return!1}(v,D)){var B=this.sourceLayerCoder.decode(l),j=this.vtLayers[B].feature(p);if(y.needGeometry){var J=zn(j,!0);if(!y.filter(new gr(this.tileID.overscaledZ),J,this.tileID.canonical))return}else if(!y.filter(new gr(this.tileID.overscaledZ),j))return;for(var ee=this.getId(j,B),he=0;he<D.length;he++){var oe=D[he];if(!(v&&v.indexOf(oe)<0)){var ge=T[oe];if(ge){var we={};ee!==void 0&&A&&(we=A.getState(ge.sourceLayer||"_geojsonTileLayer",ee));var Te=X({},C[oe]);Te.paint=FI(Te.paint,ge.paint,j,we,x),Te.layout=FI(Te.layout,ge.layout,j,we,x);var Oe=!L||L(j,ge,we);if(Oe){var Ve=new Ov(j,this.z,this.x,this.y,ee);Ve.layer=Te;var Ye=r[oe];Ye===void 0&&(Ye=r[oe]=[]),Ye.push({featureIndex:p,feature:Ve,intersectionZ:Oe})}}}}}},Xl.prototype.lookupSymbolFeatures=function(r,i,l,p,y,v,x,T){var C={};this.loadVTLayers();for(var A=uf(y),L=0,D=r;L<D.length;L+=1)this.loadMatchingFeature(C,l,p,D[L],A,v,x,T,i);return C},Xl.prototype.hasLayer=function(r){for(var i=0,l=this.bucketLayerIDs;i<l.length;i+=1)for(var p=0,y=l[i];p<y.length;p+=1)if(r===y[p])return!0;return!1},Xl.prototype.getId=function(r,i){var l=r.id;return this.promoteId&&typeof(l=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]])=="boolean"&&(l=Number(l)),l},wt("FeatureIndex",Xl,{omit:["rawTileData","sourceLayerCoder"]});var Ei=function(r,i){this.tileID=r,this.uid=ce(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ei.prototype.registerFadeDuration=function(r){var i=r+this.timeAdded;i<qn.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)},Ei.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Ei.prototype.loadVectorData=function(r,i,l){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){for(var p in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(A,L){var D={};if(!L)return D;for(var B=function(){var ee=J[j],he=ee.layerIds.map(function(we){return L.getLayer(we)}).filter(Boolean);if(he.length!==0){ee.layers=he,ee.stateDependentLayerIds&&(ee.stateDependentLayers=ee.stateDependentLayerIds.map(function(we){return he.filter(function(Te){return Te.id===we})[0]}));for(var oe=0,ge=he;oe<ge.length;oe+=1)D[ge[oe].id]=ee}},j=0,J=A;j<J.length;j+=1)B();return D}(r.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){var y=this.buckets[p];if(y instanceof Zr){if(this.hasSymbolBuckets=!0,!l)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var v in this.buckets){var x=this.buckets[v];if(x instanceof Zr&&x.hasRTLText){this.hasRTLText=!0,Uo.isLoading()||Uo.isLoaded()||Ld()!=="deferred"||_a();break}}for(var T in this.queryPadding=0,this.buckets){var C=this.buckets[T];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(T).queryRadius(C))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new h},Ei.prototype.unloadVectorData=function(){for(var r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ei.prototype.getBucket=function(r){return this.buckets[r.id]},Ei.prototype.upload=function(r){for(var i in this.buckets){var l=this.buckets[i];l.uploadPending()&&l.upload(r)}var p=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new lh(r,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new lh(r,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)},Ei.prototype.prepare=function(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)},Ei.prototype.queryRenderedFeatures=function(r,i,l,p,y,v,x,T,C,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:y,scale:v,tileSize:this.tileSize,pixelPosMatrix:A,transform:T,params:x,queryPadding:this.queryPadding*C},r,i,l):{}},Ei.prototype.querySourceFeatures=function(r,i){var l=this.latestFeatureIndex;if(l&&l.rawTileData){var p=l.loadVTLayers(),y=i?i.sourceLayer:"",v=p._geojsonTileLayer||p[y];if(v)for(var x=uf(i&&i.filter),T=this.tileID.canonical,C=T.z,A=T.x,L=T.y,D={z:C,x:A,y:L},B=0;B<v.length;B++){var j=v.feature(B);if(x.needGeometry){var J=zn(j,!0);if(!x.filter(new gr(this.tileID.overscaledZ),J,this.tileID.canonical))continue}else if(!x.filter(new gr(this.tileID.overscaledZ),j))continue;var ee=l.getId(j,y),he=new Ov(j,C,A,L,ee);he.tile=D,r.push(he)}}},Ei.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Ei.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ei.prototype.setExpiryData=function(r){var i=this.expirationTime;if(r.cacheControl){var l=vt(r.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){var p=Date.now(),y=!1;if(this.expirationTime>p)y=!1;else if(i)if(this.expirationTime<i)y=!0;else{var v=this.expirationTime-i;v?this.expirationTime=p+Math.max(v,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ei.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Ei.prototype.setFeatureState=function(r,i){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(r).length!==0){var l=this.latestFeatureIndex.loadVTLayers();for(var p in this.buckets)if(i.style.hasLayer(p)){var y=this.buckets[p],v=y.layers[0].sourceLayer||"_geojsonTileLayer",x=l[v],T=r[v];if(x&&T&&Object.keys(T).length!==0){y.update(T,x,this.imageAtlas&&this.imageAtlas.patternPositions||{});var C=i&&i.style&&i.style.getLayer(p);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(y)))}}}},Ei.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Ei.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<qn.now()},Ei.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ei.prototype.setHoldDuration=function(r){this.symbolFadeHoldUntil=qn.now()+r},Ei.prototype.setDependencies=function(r,i){for(var l={},p=0,y=i;p<y.length;p+=1)l[y[p]]=!0;this.dependencies[r]=l},Ei.prototype.hasDependency=function(r,i){for(var l=0,p=r;l<p.length;l+=1){var y=this.dependencies[p[l]];if(y){for(var v=0,x=i;v<x.length;v+=1)if(y[x[v]])return!0}}return!1};var Xu=I.performance,VI=function(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},Xu.mark(this._marks.start)};VI.prototype.finish=function(){Xu.mark(this._marks.end);var r=Xu.getEntriesByName(this._marks.measure);return r.length===0&&(Xu.measure(this._marks.measure,this._marks.start,this._marks.end),r=Xu.getEntriesByName(this._marks.measure),Xu.clearMarks(this._marks.start),Xu.clearMarks(this._marks.end),Xu.clearMeasures(this._marks.measure)),r},a.Actor=Nf,a.AlphaImage=sh,a.CanonicalTileID=ch,a.CollisionBoxArray=h,a.Color=Br,a.DEMData=Zl,a.DataConstantProperty=Nt,a.DictionaryCoder=Iv,a.EXTENT=8192,a.ErrorEvent=pe,a.EvaluationParameters=gr,a.Event=Q,a.Evented=de,a.FeatureIndex=Xl,a.FillBucket=ds,a.FillExtrusionBucket=ms,a.ImageAtlas=Zd,a.ImagePosition=vv,a.LineBucket=so,a.LngLat=_n,a.LngLatBounds=ii,a.MercatorCoordinate=uh,a.ONE_EM=24,a.OverscaledTileID=oi,a.Point=E,a.Point$1=E,a.Properties=Li,a.Protobuf=yv,a.RGBAImage=Io,a.RequestManager=Re,a.RequestPerformance=VI,a.ResourceType=ss,a.SegmentVector=W,a.SourceFeatureState=Rf,a.StructArrayLayout1ui2=Bd,a.StructArrayLayout2f1f2i16=Gl,a.StructArrayLayout2i4=$l,a.StructArrayLayout3ui6=Ys,a.StructArrayLayout4i8=Nd,a.SymbolBucket=Zr,a.Texture=lh,a.Tile=Ei,a.Transitionable=ki,a.Uniform1f=it,a.Uniform1i=je,a.Uniform2f=rt,a.Uniform3f=gt,a.Uniform4f=Rt,a.UniformColor=Ut,a.UniformMatrix4f=Cr,a.UnwrappedTileID=zI,a.ValidationError=ie,a.WritingMode=na,a.ZoomHistory=Cd,a.add=function(r,i,l){return r[0]=i[0]+l[0],r[1]=i[1]+l[1],r[2]=i[2]+l[2],r},a.addDynamicAttributes=lx,a.asyncAll=function(r,i,l){if(!r.length)return l(null,[]);var p=r.length,y=new Array(r.length),v=null;r.forEach(function(x,T){i(x,function(C,A){C&&(v=C),y[T]=A,--p==0&&l(v,y)})})},a.bezier=z,a.bindAll=ze,a.browser=qn,a.cacheEntryPossiblyAdded=function(r){++In>Gi&&(r.getActor().send("enforceCacheSizeLimit",Qn),In=0)},a.clamp=q,a.clearTileCache=function(r){var i=I.caches.delete("mapbox-tiles");r&&i.catch(r).then(function(){return r()})},a.clipLine=bI,a.clone=function(r){var i=new Vr(16);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},a.clone$1=Ke,a.clone$2=function(r){var i=new Vr(3);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i},a.collisionCircleLayout=m9,a.config=Mr,a.create=function(){var r=new Vr(16);return Vr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},a.create$1=function(){var r=new Vr(9);return Vr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r},a.create$2=function(){var r=new Vr(4);return Vr!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r},a.createCommonjsModule=m,a.createExpression=sf,a.createLayout=bi,a.createStyleLayer=function(r){return r.type==="custom"?new H9(r):new Z9[r.type](r)},a.cross=function(r,i,l){var p=i[0],y=i[1],v=i[2],x=l[0],T=l[1],C=l[2];return r[0]=y*C-v*T,r[1]=v*x-p*C,r[2]=p*T-y*x,r},a.deepEqual=function r(i,l){if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(var p=0;p<i.length;p++)if(!r(i[p],l[p]))return!1;return!0}if(typeof i=="object"&&i!==null&&l!==null){if(typeof l!="object"||Object.keys(i).length!==Object.keys(l).length)return!1;for(var y in i)if(!r(i[y],l[y]))return!1;return!0}return i===l},a.dot=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]},a.dot$1=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]+r[3]*i[3]},a.ease=V,a.emitValidationErrors=Yc,a.endsWith=Pe,a.enforceCacheSizeLimit=function(r){_o(),bt&&bt.then(function(i){i.keys().then(function(l){for(var p=0;p<l.length-r;p++)i.delete(l[p])})})},a.evaluateSizeForFeature=mI,a.evaluateSizeForZoom=yI,a.evaluateVariableOffset=SI,a.evented=kd,a.extend=X,a.featureFilter=uf,a.filterObject=Ie,a.fromRotation=function(r,i){var l=Math.sin(i),p=Math.cos(i);return r[0]=p,r[1]=l,r[2]=0,r[3]=-l,r[4]=p,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},a.getAnchorAlignment=ix,a.getAnchorJustification=sx,a.getArrayBuffer=Il,a.getImage=F,a.getJSON=function(r,i){return Fo(X(r,{type:"json"}),i)},a.getRTLTextPluginStatus=Ld,a.getReferrer=ls,a.getVideo=function(r,i){var l,p,y=I.document.createElement("video");y.muted=!0,y.onloadstart=function(){i(null,y)};for(var v=0;v<r.length;v++){var x=I.document.createElement("source");l=r[v],p=void 0,(p=I.document.createElement("a")).href=l,(p.protocol!==I.document.location.protocol||p.host!==I.document.location.host)&&(y.crossOrigin="Anonymous"),x.src=r[v],y.appendChild(x)}return{cancel:function(){}}},a.identity=jo,a.invert=function(r,i){var l=i[0],p=i[1],y=i[2],v=i[3],x=i[4],T=i[5],C=i[6],A=i[7],L=i[8],D=i[9],B=i[10],j=i[11],J=i[12],ee=i[13],he=i[14],oe=i[15],ge=l*T-p*x,we=l*C-y*x,Te=l*A-v*x,Oe=p*C-y*T,Ve=p*A-v*T,Ye=y*A-v*C,ot=L*ee-D*J,Pt=L*he-B*J,dt=L*oe-j*J,zt=D*he-B*ee,yt=D*oe-j*ee,ur=B*oe-j*he,qt=ge*ur-we*yt+Te*zt+Oe*dt-Ve*Pt+Ye*ot;return qt?(r[0]=(T*ur-C*yt+A*zt)*(qt=1/qt),r[1]=(y*yt-p*ur-v*zt)*qt,r[2]=(ee*Ye-he*Ve+oe*Oe)*qt,r[3]=(B*Ve-D*Ye-j*Oe)*qt,r[4]=(C*dt-x*ur-A*Pt)*qt,r[5]=(l*ur-y*dt+v*Pt)*qt,r[6]=(he*Te-J*Ye-oe*we)*qt,r[7]=(L*Ye-B*Te+j*we)*qt,r[8]=(x*yt-T*dt+A*ot)*qt,r[9]=(p*dt-l*yt-v*ot)*qt,r[10]=(J*Ve-ee*Te+oe*ge)*qt,r[11]=(D*Te-L*Ve-j*ge)*qt,r[12]=(T*Pt-x*zt-C*ot)*qt,r[13]=(l*zt-p*Pt+y*ot)*qt,r[14]=(ee*we-J*Oe-he*ge)*qt,r[15]=(L*Oe-D*we+B*ge)*qt,r):null},a.isChar=ct,a.isMapboxURL=qe,a.keysDifference=function(r,i){var l=[];for(var p in r)p in i||l.push(p);return l},a.makeRequest=Fo,a.mapObject=Se,a.mercatorXfromLng=DI,a.mercatorYfromLat=NI,a.mercatorZfromAltitude=RI,a.mul=W1,a.multiply=ao,a.mvt=Mf,a.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},a.normalize=function(r,i){var l=i[0],p=i[1],y=i[2],v=l*l+p*p+y*y;return v>0&&(v=1/Math.sqrt(v)),r[0]=i[0]*v,r[1]=i[1]*v,r[2]=i[2]*v,r},a.number=Hn,a.offscreenCanvasSupported=fi,a.ortho=function(r,i,l,p,y,v,x){var T=1/(i-l),C=1/(p-y),A=1/(v-x);return r[0]=-2*T,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*C,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*A,r[11]=0,r[12]=(i+l)*T,r[13]=(y+p)*C,r[14]=(x+v)*A,r[15]=1,r},a.parseGlyphPBF=function(r){return new yv(r).readFields(M9,[])},a.pbf=yv,a.performSymbolLayout=function(r,i,l,p,y,v,x){r.createArrays(),r.tilePixelRatio=8192/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;var T=r.layers[0].layout,C=r.layers[0]._unevaluatedLayout._values,A={};if(r.textSizeData.kind==="composite"){var L=r.textSizeData,D=L.maxZoom;A.compositeTextSizes=[C["text-size"].possiblyEvaluate(new gr(L.minZoom),x),C["text-size"].possiblyEvaluate(new gr(D),x)]}if(r.iconSizeData.kind==="composite"){var B=r.iconSizeData,j=B.maxZoom;A.compositeIconSizes=[C["icon-size"].possiblyEvaluate(new gr(B.minZoom),x),C["icon-size"].possiblyEvaluate(new gr(j),x)]}A.layoutTextSize=C["text-size"].possiblyEvaluate(new gr(r.zoom+1),x),A.layoutIconSize=C["icon-size"].possiblyEvaluate(new gr(r.zoom+1),x),A.textMaxSize=C["text-size"].possiblyEvaluate(new gr(18));for(var J=24*T.get("text-line-height"),ee=T.get("text-rotation-alignment")==="map"&&T.get("symbol-placement")!=="point",he=T.get("text-keep-upright"),oe=T.get("text-size"),ge=function(){var Oe=Te[we],Ve=T.get("text-font").evaluate(Oe,{},x).join(","),Ye=oe.evaluate(Oe,{},x),ot=A.layoutTextSize.evaluate(Oe,{},x),Pt=A.layoutIconSize.evaluate(Oe,{},x),dt={horizontal:{},vertical:void 0},zt=Oe.text,yt=[0,0];if(zt){var ur=zt.toString(),qt=24*T.get("text-letter-spacing").evaluate(Oe,{},x),Mt=function(_r){for(var Jr=0,Wr=_r;Jr<Wr.length;Jr+=1)if(Ar=Wr[Jr].charCodeAt(0),ct.Arabic(Ar)||ct["Arabic Supplement"](Ar)||ct["Arabic Extended-A"](Ar)||ct["Arabic Presentation Forms-A"](Ar)||ct["Arabic Presentation Forms-B"](Ar))return!1;var Ar;return!0}(ur)?qt:0,pr=T.get("text-anchor").evaluate(Oe,{},x),nr=T.get("text-variable-anchor");if(!nr){var Ir=T.get("text-radial-offset").evaluate(Oe,{},x);yt=Ir?SI(pr,[24*Ir,ax]):T.get("text-offset").evaluate(Oe,{},x).map(function(_r){return 24*_r})}var Ft=ee?"center":T.get("text-justify").evaluate(Oe,{},x),Dr=T.get("symbol-placement"),xn=Dr==="point"?24*T.get("text-max-width").evaluate(Oe,{},x):0,Pn=function(){r.allowVerticalPlacement&&Ad(ur)&&(dt.vertical=_v(zt,i,l,y,Ve,xn,J,pr,"left",Mt,yt,na.vertical,!0,Dr,ot,Ye))};if(!ee&&nr){for(var Cn=Ft==="auto"?nr.map(function(_r){return sx(_r)}):[Ft],bn=!1,kn=0;kn<Cn.length;kn++){var mi=Cn[kn];if(!dt.horizontal[mi])if(bn)dt.horizontal[mi]=dt.horizontal[0];else{var yi=_v(zt,i,l,y,Ve,xn,J,"center",mi,Mt,yt,na.horizontal,!1,Dr,ot,Ye);yi&&(dt.horizontal[mi]=yi,bn=yi.positionedLines.length===1)}}Pn()}else{Ft==="auto"&&(Ft=sx(pr));var Yi=_v(zt,i,l,y,Ve,xn,J,pr,Ft,Mt,yt,na.horizontal,!1,Dr,ot,Ye);Yi&&(dt.horizontal[Ft]=Yi),Pn(),Ad(ur)&&ee&&he&&(dt.vertical=_v(zt,i,l,y,Ve,xn,J,pr,Ft,Mt,yt,na.vertical,!1,Dr,ot,Ye))}}var Si=void 0,Ji=!1;if(Oe.icon&&Oe.icon.name){var Fn=p[Oe.icon.name];Fn&&(Si=function(_r,Jr,Wr){var Ar=ix(Wr),lo=Jr[0]-_r.displaySize[0]*Ar.horizontalAlign,Fi=Jr[1]-_r.displaySize[1]*Ar.verticalAlign;return{image:_r,top:Fi,bottom:Fi+_r.displaySize[1],left:lo,right:lo+_r.displaySize[0]}}(y[Oe.icon.name],T.get("icon-offset").evaluate(Oe,{},x),T.get("icon-anchor").evaluate(Oe,{},x)),Ji=Fn.sdf,r.sdfIcons===void 0?r.sdfIcons=Fn.sdf:r.sdfIcons!==Fn.sdf&&st("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Fn.pixelRatio!==r.pixelRatio||T.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}var Ti=MI(dt.horizontal)||dt.vertical;r.iconsInText=!!Ti&&Ti.iconsInText,(Ti||Si)&&function(_r,Jr,Wr,Ar,lo,Fi,dn,Xn,Bi,Nr,nl){var ia=Fi.textMaxSize.evaluate(Jr,{});ia===void 0&&(ia=dn);var il,Bn=_r.layers[0].layout,ol=Bn.get("icon-offset").evaluate(Jr,{},nl),Ua=MI(Wr.horizontal),zf=dn/24,hh=_r.tilePixelRatio*zf,Ff=_r.tilePixelRatio*ia/24,Kl=_r.tilePixelRatio*Xn,Bf=_r.tilePixelRatio*Bn.get("symbol-spacing"),Cv=Bn.get("text-padding")*_r.tilePixelRatio,Vf=Bn.get("icon-padding")*_r.tilePixelRatio,Yd=Bn.get("text-max-angle")/180*Math.PI,Av=Bn.get("text-rotation-alignment")==="map"&&Bn.get("symbol-placement")!=="point",Pv=Bn.get("icon-rotation-alignment")==="map"&&Bn.get("symbol-placement")!=="point",Yl=Bn.get("symbol-placement"),Jd=Bf/2,Uf=Bn.get("icon-text-fit");Ar&&Uf!=="none"&&(_r.allowVerticalPlacement&&Wr.vertical&&(il=dI(Ar,Wr.vertical,Uf,Bn.get("icon-text-fit-padding"),ol,zf)),Ua&&(Ar=dI(Ar,Ua,Uf,Bn.get("icon-text-fit-padding"),ol,zf)));var Ku=function(K9,am){am.x<0||am.x>=8192||am.y<0||am.y>=8192||function(Vn,ys,Y9,Yu,yx,$I,zv,al,Fv,sm,Bv,Vv,gx,GI,lm,qI,WI,HI,ZI,XI,oa,Uv,KI,sl,J9){var YI,ph,Wf,Hf,Zf,Xf=Vn.addToLineVertexArray(ys,Y9),JI=0,QI=0,eO=0,tO=0,vx=-1,_x=-1,Jl={},rO=Y(""),xx=0,bx=0;if(al._unevaluatedLayout.getValue("text-radial-offset")===void 0?(xx=(YI=al.layout.get("text-offset").evaluate(oa,{},sl).map(function(cm){return 24*cm}))[0],bx=YI[1]):(xx=24*al.layout.get("text-radial-offset").evaluate(oa,{},sl),bx=ax),Vn.allowVerticalPlacement&&Yu.vertical){var nO=al.layout.get("text-rotate").evaluate(oa,{},sl)+90;Hf=new Sv(Fv,ys,sm,Bv,Vv,Yu.vertical,gx,GI,lm,nO),zv&&(Zf=new Sv(Fv,ys,sm,Bv,Vv,zv,WI,HI,lm,nO))}if(yx){var wx=al.layout.get("icon-rotate").evaluate(oa,{}),iO=al.layout.get("icon-text-fit")!=="none",oO=wI(yx,wx,KI,iO),Ex=zv?wI(zv,wx,KI,iO):void 0;Wf=new Sv(Fv,ys,sm,Bv,Vv,yx,WI,HI,!1,wx),JI=4*oO.length;var aO=Vn.iconSizeData,um=null;aO.kind==="source"?(um=[128*al.layout.get("icon-size").evaluate(oa,{})])[0]>32640&&st(Vn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):aO.kind==="composite"&&((um=[128*Uv.compositeIconSizes[0].evaluate(oa,{},sl),128*Uv.compositeIconSizes[1].evaluate(oa,{},sl)])[0]>32640||um[1]>32640)&&st(Vn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Vn.addSymbols(Vn.icon,oO,um,XI,ZI,oa,!1,ys,Xf.lineStartIndex,Xf.lineLength,-1,sl),vx=Vn.icon.placedSymbolArray.length-1,Ex&&(QI=4*Ex.length,Vn.addSymbols(Vn.icon,Ex,um,XI,ZI,oa,na.vertical,ys,Xf.lineStartIndex,Xf.lineLength,-1,sl),_x=Vn.icon.placedSymbolArray.length-1)}for(var sO in Yu.horizontal){var jv=Yu.horizontal[sO];if(!ph){rO=Y(jv.text);var Q9=al.layout.get("text-rotate").evaluate(oa,{},sl);ph=new Sv(Fv,ys,sm,Bv,Vv,jv,gx,GI,lm,Q9)}var lO=jv.positionedLines.length===1;if(eO+=TI(Vn,ys,jv,$I,al,lm,oa,qI,Xf,Yu.vertical?na.horizontal:na.horizontalOnly,lO?Object.keys(Yu.horizontal):[sO],Jl,vx,Uv,sl),lO)break}Yu.vertical&&(tO+=TI(Vn,ys,Yu.vertical,$I,al,lm,oa,qI,Xf,na.vertical,["vertical"],Jl,_x,Uv,sl));var e7=ph?ph.boxStartIndex:Vn.collisionBoxArray.length,t7=ph?ph.boxEndIndex:Vn.collisionBoxArray.length,r7=Hf?Hf.boxStartIndex:Vn.collisionBoxArray.length,n7=Hf?Hf.boxEndIndex:Vn.collisionBoxArray.length,i7=Wf?Wf.boxStartIndex:Vn.collisionBoxArray.length,o7=Wf?Wf.boxEndIndex:Vn.collisionBoxArray.length,a7=Zf?Zf.boxStartIndex:Vn.collisionBoxArray.length,s7=Zf?Zf.boxEndIndex:Vn.collisionBoxArray.length,ll=-1,$v=function(cm,cO){return cm&&cm.circleDiameter?Math.max(cm.circleDiameter,cO):cO};ll=$v(ph,ll),ll=$v(Hf,ll),ll=$v(Wf,ll);var uO=(ll=$v(Zf,ll))>-1?1:0;uO&&(ll*=J9/24),Vn.glyphOffsetArray.length>=Zr.MAX_GLYPHS&&st("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),oa.sortKey!==void 0&&Vn.addToSortKeyRanges(Vn.symbolInstances.length,oa.sortKey),Vn.symbolInstances.emplaceBack(ys.x,ys.y,Jl.right>=0?Jl.right:-1,Jl.center>=0?Jl.center:-1,Jl.left>=0?Jl.left:-1,Jl.vertical||-1,vx,_x,rO,e7,t7,r7,n7,i7,o7,a7,s7,sm,eO,tO,JI,QI,uO,0,gx,xx,bx,ll)}(_r,am,K9,Wr,Ar,lo,il,_r.layers[0],_r.collisionBoxArray,Jr.index,Jr.sourceLayerIndex,_r.index,hh,Cv,Av,Bi,Kl,Vf,Pv,ol,Jr,Fi,Nr,nl,dn)};if(Yl==="line")for(var jf=0,kv=bI(Jr.geometry,0,0,8192,8192);jf<kv.length;jf+=1)for(var Lv=kv[jf],Qd=0,em=L9(Lv,Bf,Yd,Wr.vertical||Ua,Ar,24,Ff,_r.overscaling,8192);Qd<em.length;Qd+=1){var Dv=em[Qd];Ua&&z9(_r,Ua.text,Jd,Dv)||Ku(Lv,Dv)}else if(Yl==="line-center")for(var tm=0,rm=Jr.geometry;tm<rm.length;tm+=1){var nm=rm[tm];if(nm.length>1){var Nv=k9(nm,Yd,Wr.vertical||Ua,Ar,24,Ff);Nv&&Ku(nm,Nv)}}else if(Jr.type==="Polygon")for(var $f=0,Rv=Q1(Jr.geometry,0);$f<Rv.length;$f+=1){var Gf=Rv[$f],im=N9(Gf,16);Ku(Gf[0],new Af(im.x,im.y,0))}else if(Jr.type==="LineString")for(var fh=0,om=Jr.geometry;fh<om.length;fh+=1){var qf=om[fh];Ku(qf,new Af(qf[0].x,qf[0].y,0))}else if(Jr.type==="Point")for(var px=0,UI=Jr.geometry;px<UI.length;px+=1)for(var dx=0,jI=UI[px];dx<jI.length;dx+=1){var mx=jI[dx];Ku([mx],new Af(mx.x,mx.y,0))}}(r,Oe,dt,Si,p,A,ot,Pt,yt,Ji,x)},we=0,Te=r.features;we<Te.length;we+=1)ge();v&&r.generateCollisionDebugBuffers()},a.perspective=function(r,i,l,p,y){var v,x=1/Math.tan(i/2);return r[0]=x/l,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,y!=null&&y!==1/0?(r[10]=(y+p)*(v=1/(p-y)),r[14]=2*y*p*v):(r[10]=-1,r[14]=-2*p),r},a.pick=function(r,i){for(var l={},p=0;p<i.length;p++){var y=i[p];y in r&&(l[y]=r[y])}return l},a.plugin=Uo,a.polygonIntersectsPolygon=el,a.postMapLoadEvent=Qr,a.postTurnstileEvent=jr,a.potpack=cI,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=wt,a.registerForPluginStateChange=function(r){return r({pluginStatus:So,pluginURL:hs}),kd.on("pluginStateChange",r),r},a.renderColorRamp=qM,a.rotate=function(r,i,l){var p=i[0],y=i[1],v=i[2],x=i[3],T=Math.sin(l),C=Math.cos(l);return r[0]=p*C+v*T,r[1]=y*C+x*T,r[2]=p*-T+v*C,r[3]=y*-T+x*C,r},a.rotateX=function(r,i,l){var p=Math.sin(l),y=Math.cos(l),v=i[4],x=i[5],T=i[6],C=i[7],A=i[8],L=i[9],D=i[10],B=i[11];return i!==r&&(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[4]=v*y+A*p,r[5]=x*y+L*p,r[6]=T*y+D*p,r[7]=C*y+B*p,r[8]=A*y-v*p,r[9]=L*y-x*p,r[10]=D*y-T*p,r[11]=B*y-C*p,r},a.rotateZ=function(r,i,l){var p=Math.sin(l),y=Math.cos(l),v=i[0],x=i[1],T=i[2],C=i[3],A=i[4],L=i[5],D=i[6],B=i[7];return i!==r&&(r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[0]=v*y+A*p,r[1]=x*y+L*p,r[2]=T*y+D*p,r[3]=C*y+B*p,r[4]=A*y-v*p,r[5]=L*y-x*p,r[6]=D*y-T*p,r[7]=B*y-C*p,r},a.scale=function(r,i,l){var p=l[0],y=l[1],v=l[2];return r[0]=i[0]*p,r[1]=i[1]*p,r[2]=i[2]*p,r[3]=i[3]*p,r[4]=i[4]*y,r[5]=i[5]*y,r[6]=i[6]*y,r[7]=i[7]*y,r[8]=i[8]*v,r[9]=i[9]*v,r[10]=i[10]*v,r[11]=i[11]*v,r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r},a.scale$1=function(r,i,l){return r[0]=i[0]*l,r[1]=i[1]*l,r[2]=i[2]*l,r[3]=i[3]*l,r},a.scale$2=function(r,i,l){return r[0]=i[0]*l,r[1]=i[1]*l,r[2]=i[2]*l,r},a.setCacheLimits=function(r,i){Qn=r,Gi=i},a.setRTLTextPlugin=function(r,i,l){if(l===void 0&&(l=!1),So==="deferred"||So==="loading"||So==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");hs=qn.resolveURL(r),So="deferred",yf=i,Qc(),l||_a()},a.sphericalToCartesian=function(r){var i=r[0],l=r[1],p=r[2];return l+=90,l*=Math.PI/180,p*=Math.PI/180,{x:i*Math.cos(l)*Math.sin(p),y:i*Math.sin(l)*Math.sin(p),z:i*Math.cos(p)}},a.sqrLen=function(r){var i=r[0],l=r[1];return i*i+l*l},a.styleSpec=$,a.sub=function(r,i,l){return r[0]=i[0]-l[0],r[1]=i[1]-l[1],r[2]=i[2]-l[2],r},a.symbolSize=P9,a.transformMat3=function(r,i,l){var p=i[0],y=i[1],v=i[2];return r[0]=p*l[0]+y*l[3]+v*l[6],r[1]=p*l[1]+y*l[4]+v*l[7],r[2]=p*l[2]+y*l[5]+v*l[8],r},a.transformMat4=wf,a.translate=function(r,i,l){var p,y,v,x,T,C,A,L,D,B,j,J,ee=l[0],he=l[1],oe=l[2];return i===r?(r[12]=i[0]*ee+i[4]*he+i[8]*oe+i[12],r[13]=i[1]*ee+i[5]*he+i[9]*oe+i[13],r[14]=i[2]*ee+i[6]*he+i[10]*oe+i[14],r[15]=i[3]*ee+i[7]*he+i[11]*oe+i[15]):(y=i[1],v=i[2],x=i[3],T=i[4],C=i[5],A=i[6],L=i[7],D=i[8],B=i[9],j=i[10],J=i[11],r[0]=p=i[0],r[1]=y,r[2]=v,r[3]=x,r[4]=T,r[5]=C,r[6]=A,r[7]=L,r[8]=D,r[9]=B,r[10]=j,r[11]=J,r[12]=p*ee+T*he+D*oe+i[12],r[13]=y*ee+C*he+B*oe+i[13],r[14]=v*ee+A*he+j*oe+i[14],r[15]=x*ee+L*he+J*oe+i[15]),r},a.triggerPluginCompletionEvent=uv,a.uniqueId=ce,a.validateCustomStyleLayer=function(r){var i=[],l=r.id;return l===void 0&&i.push({message:"layers."+l+': missing required property "id"'}),r.render===void 0&&i.push({message:"layers."+l+': missing required method "render"'}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&i.push({message:"layers."+l+': property "renderingMode" must be either "2d" or "3d"'}),i},a.validateLight=G1,a.validateStyle=Xc,a.values=function(r){var i=[];for(var l in r)i.push(r[l]);return i},a.vectorTile=Mf,a.version="1.13.3",a.warnOnce=st,a.webpSupported=Mn,a.window=I,a.wrap=re}),f(["./shared"],function(a){function m(N){var F=typeof N;if(F==="number"||F==="boolean"||F==="string"||N==null)return JSON.stringify(N);if(Array.isArray(N)){for(var U="[",Z=0,Q=N;Z<Q.length;Z+=1)U+=m(Q[Z])+",";return U+"]"}for(var pe=Object.keys(N).sort(),de="{",$=0;$<pe.length;$++)de+=JSON.stringify(pe[$])+":"+m(N[pe[$]])+",";return de+"}"}function g(N){for(var F="",U=0,Z=a.refProperties;U<Z.length;U+=1)F+="/"+m(N[Z[U]]);return F}var b=function(N){this.keyCache={},N&&this.replace(N)};b.prototype.replace=function(N){this._layerConfigs={},this._layers={},this.update(N,[])},b.prototype.update=function(N,F){for(var U=this,Z=0,Q=N;Z<Q.length;Z+=1){var pe=Q[Z];this._layerConfigs[pe.id]=pe;var de=this._layers[pe.id]=a.createStyleLayer(pe);de._featureFilter=a.featureFilter(de.filter),this.keyCache[pe.id]&&delete this.keyCache[pe.id]}for(var $=0,ie=F;$<ie.length;$+=1){var _e=ie[$];delete this.keyCache[_e],delete this._layerConfigs[_e],delete this._layers[_e]}this.familiesBySource={};for(var $e=0,Ze=function(lt,De){for(var fe={},Ee=0;Ee<lt.length;Ee++){var He=De&&De[lt[Ee].id]||g(lt[Ee]);De&&(De[lt[Ee].id]=He);var $t=fe[He];$t||($t=fe[He]=[]),$t.push(lt[Ee])}var Ht=[];for(var Qt in fe)Ht.push(fe[Qt]);return Ht}(a.values(this._layerConfigs),this.keyCache);$e<Ze.length;$e+=1){var Ce=Ze[$e].map(function(lt){return U._layers[lt.id]}),Ue=Ce[0];if(Ue.visibility!=="none"){var St=Ue.source||"",_t=this.familiesBySource[St];_t||(_t=this.familiesBySource[St]={});var Le=Ue.sourceLayer||"_geojsonTileLayer",pt=_t[Le];pt||(pt=_t[Le]=[]),pt.push(Ce)}}};var E=function(N){var F={},U=[];for(var Z in N){var Q=N[Z],pe=F[Z]={};for(var de in Q){var $=Q[+de];if($&&$.bitmap.width!==0&&$.bitmap.height!==0){var ie={x:0,y:0,w:$.bitmap.width+2,h:$.bitmap.height+2};U.push(ie),pe[de]={rect:ie,metrics:$.metrics}}}}var _e=a.potpack(U),$e=new a.AlphaImage({width:_e.w||1,height:_e.h||1});for(var Ze in N){var Ce=N[Ze];for(var Ue in Ce){var St=Ce[+Ue];if(St&&St.bitmap.width!==0&&St.bitmap.height!==0){var _t=F[Ze][Ue].rect;a.AlphaImage.copy(St.bitmap,$e,{x:0,y:0},{x:_t.x+1,y:_t.y+1},St.bitmap)}}}this.image=$e,this.positions=F};a.register("GlyphAtlas",E);var M=function(N){this.tileID=new a.OverscaledTileID(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId};function I(N,F,U){for(var Z=new a.EvaluationParameters(F),Q=0,pe=N;Q<pe.length;Q+=1)pe[Q].recalculate(Z,U)}function P(N,F){var U=a.getArrayBuffer(N.request,function(Z,Q,pe,de){Z?F(Z):Q&&F(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(Q)),rawData:Q,cacheControl:pe,expires:de})});return function(){U.cancel(),F()}}M.prototype.parse=function(N,F,U,Z,Q){var pe=this;this.status="parsing",this.data=N,this.collisionBoxArray=new a.CollisionBoxArray;var de=new a.DictionaryCoder(Object.keys(N.layers).sort()),$=new a.FeatureIndex(this.tileID,this.promoteId);$.bucketLayerIDs=[];var ie,_e,$e,Ze,Ce={},Ue={featureIndex:$,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:U},St=F.familiesBySource[this.source];for(var _t in St){var Le=N.layers[_t];if(Le){Le.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+_t+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var pt=de.encode(_t),lt=[],De=0;De<Le.length;De++){var fe=Le.feature(De),Ee=$.getId(fe,_t);lt.push({feature:fe,id:Ee,index:De,sourceLayerIndex:pt})}for(var He=0,$t=St[_t];He<$t.length;He+=1){var Ht=$t[He],Qt=Ht[0];Qt.minzoom&&this.zoom<Math.floor(Qt.minzoom)||Qt.maxzoom&&this.zoom>=Qt.maxzoom||Qt.visibility!=="none"&&(I(Ht,this.zoom,U),(Ce[Qt.id]=Qt.createBucket({index:$.bucketLayerIDs.length,layers:Ht,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pt,sourceID:this.source})).populate(lt,Ue,this.tileID.canonical),$.bucketLayerIDs.push(Ht.map(function($r){return $r.id})))}}}var Xt=a.mapObject(Ue.glyphDependencies,function($r){return Object.keys($r).map(Number)});Object.keys(Xt).length?Z.send("getGlyphs",{uid:this.uid,stacks:Xt},function($r,vr){ie||(ie=$r,_e=vr,yn.call(pe))}):_e={};var ti=Object.keys(Ue.iconDependencies);ti.length?Z.send("getImages",{icons:ti,source:this.source,tileID:this.tileID,type:"icons"},function($r,vr){ie||(ie=$r,$e=vr,yn.call(pe))}):$e={};var er=Object.keys(Ue.patternDependencies);function yn(){if(ie)return Q(ie);if(_e&&$e&&Ze){var $r=new E(_e),vr=new a.ImageAtlas($e,Ze);for(var Br in Ce){var no=Ce[Br];no instanceof a.SymbolBucket?(I(no.layers,this.zoom,U),a.performSymbolLayout(no,_e,$r.positions,$e,vr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):no.hasPattern&&(no instanceof a.LineBucket||no instanceof a.FillBucket||no instanceof a.FillExtrusionBucket)&&(I(no.layers,this.zoom,U),no.addFeatures(Ue,this.tileID.canonical,vr.patternPositions))}this.status="done",Q(null,{buckets:a.values(Ce).filter(function(zc){return!zc.isEmpty()}),featureIndex:$,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$r.image,imageAtlas:vr,glyphMap:this.returnDependencies?_e:null,iconMap:this.returnDependencies?$e:null,glyphPositions:this.returnDependencies?$r.positions:null})}}er.length?Z.send("getImages",{icons:er,source:this.source,tileID:this.tileID,type:"patterns"},function($r,vr){ie||(ie=$r,Ze=vr,yn.call(pe))}):Ze={},yn.call(this)};var z=function(N,F,U,Z){this.actor=N,this.layerIndex=F,this.availableImages=U,this.loadVectorData=Z||P,this.loading={},this.loaded={}};z.prototype.loadTile=function(N,F){var U=this,Z=N.uid;this.loading||(this.loading={});var Q=!!(N&&N.request&&N.request.collectResourceTiming)&&new a.RequestPerformance(N.request),pe=this.loading[Z]=new M(N);pe.abort=this.loadVectorData(N,function(de,$){if(delete U.loading[Z],de||!$)return pe.status="done",U.loaded[Z]=pe,F(de);var ie=$.rawData,_e={};$.expires&&(_e.expires=$.expires),$.cacheControl&&(_e.cacheControl=$.cacheControl);var $e={};if(Q){var Ze=Q.finish();Ze&&($e.resourceTiming=JSON.parse(JSON.stringify(Ze)))}pe.vectorTile=$.vectorTile,pe.parse($.vectorTile,U.layerIndex,U.availableImages,U.actor,function(Ce,Ue){if(Ce||!Ue)return F(Ce);F(null,a.extend({rawTileData:ie.slice(0)},Ue,_e,$e))}),U.loaded=U.loaded||{},U.loaded[Z]=pe})},z.prototype.reloadTile=function(N,F){var U=this,Z=this.loaded,Q=N.uid,pe=this;if(Z&&Z[Q]){var de=Z[Q];de.showCollisionBoxes=N.showCollisionBoxes;var $=function(ie,_e){var $e=de.reloadCallback;$e&&(delete de.reloadCallback,de.parse(de.vectorTile,pe.layerIndex,U.availableImages,pe.actor,$e)),F(ie,_e)};de.status==="parsing"?de.reloadCallback=$:de.status==="done"&&(de.vectorTile?de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,$):$())}},z.prototype.abortTile=function(N,F){var U=this.loading,Z=N.uid;U&&U[Z]&&U[Z].abort&&(U[Z].abort(),delete U[Z]),F()},z.prototype.removeTile=function(N,F){var U=this.loaded,Z=N.uid;U&&U[Z]&&delete U[Z],F()};var V=a.window.ImageBitmap,q=function(){this.loaded={}};function re(N,F){if(N.length!==0){X(N[0],F);for(var U=1;U<N.length;U++)X(N[U],!F)}}function X(N,F){for(var U=0,Z=0,Q=0,pe=N.length,de=pe-1;Q<pe;de=Q++){var $=(N[Q][0]-N[de][0])*(N[de][1]+N[Q][1]),ie=U+$;Z+=Math.abs(U)>=Math.abs($)?U-ie+$:$-ie+U,U=ie}U+Z>=0!=!!F&&N.reverse()}q.prototype.loadTile=function(N,F){var U=N.uid,Z=N.encoding,Q=N.rawImageData,pe=V&&Q instanceof V?this.getImageData(Q):Q,de=new a.DEMData(U,pe,Z);this.loaded=this.loaded||{},this.loaded[U]=de,F(null,de)},q.prototype.getImageData=function(N){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(N.width,N.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=N.width,this.offscreenCanvas.height=N.height,this.offscreenCanvasContext.drawImage(N,0,0,N.width,N.height);var F=this.offscreenCanvasContext.getImageData(-1,-1,N.width+2,N.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:F.width,height:F.height},F.data)},q.prototype.removeTile=function(N){var F=this.loaded,U=N.uid;F&&F[U]&&delete F[U]};var ae=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,ce=function(N){this._feature=N,this.extent=a.EXTENT,this.type=N.type,this.properties=N.tags,"id"in N&&!isNaN(N.id)&&(this.id=parseInt(N.id,10))};ce.prototype.loadGeometry=function(){if(this._feature.type===1){for(var N=[],F=0,U=this._feature.geometry;F<U.length;F+=1){var Z=U[F];N.push([new a.Point$1(Z[0],Z[1])])}return N}for(var Q=[],pe=0,de=this._feature.geometry;pe<de.length;pe+=1){for(var $=[],ie=0,_e=de[pe];ie<_e.length;ie+=1){var $e=_e[ie];$.push(new a.Point$1($e[0],$e[1]))}Q.push($)}return Q},ce.prototype.toGeoJSON=function(N,F,U){return ae.call(this,N,F,U)};var ve=function(N){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=N.length,this._features=N};ve.prototype.feature=function(N){return new ce(this._features[N])};var Ne=a.vectorTile.VectorTileFeature,ze=Pe;function Pe(N,F){this.options=F||{},this.features=N,this.length=N.length}function Se(N,F){this.id=typeof N.id=="number"?N.id:void 0,this.type=N.type,this.rawGeometry=N.type===1?[N.geometry]:N.geometry,this.properties=N.tags,this.extent=F||4096}Pe.prototype.feature=function(N){return new Se(this.features[N],this.options.extent)},Se.prototype.loadGeometry=function(){var N=this.rawGeometry;this.geometry=[];for(var F=0;F<N.length;F++){for(var U=N[F],Z=[],Q=0;Q<U.length;Q++)Z.push(new a.Point$1(U[Q][0],U[Q][1]));this.geometry.push(Z)}return this.geometry},Se.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var N=this.geometry,F=1/0,U=-1/0,Z=1/0,Q=-1/0,pe=0;pe<N.length;pe++)for(var de=N[pe],$=0;$<de.length;$++){var ie=de[$];F=Math.min(F,ie.x),U=Math.max(U,ie.x),Z=Math.min(Z,ie.y),Q=Math.max(Q,ie.y)}return[F,Z,U,Q]},Se.prototype.toGeoJSON=Ne.prototype.toGeoJSON;var Ie=Ge,Ke=ze;function Ge(N){var F=new a.pbf;return function(U,Z){for(var Q in U.layers)Z.writeMessage(3,st,U.layers[Q])}(N,F),F.finish()}function st(N,F){var U;F.writeVarintField(15,N.version||1),F.writeStringField(1,N.name||""),F.writeVarintField(5,N.extent||4096);var Z={keys:[],values:[],keycache:{},valuecache:{}};for(U=0;U<N.length;U++)Z.feature=N.feature(U),F.writeMessage(2,be,Z);var Q=Z.keys;for(U=0;U<Q.length;U++)F.writeStringField(3,Q[U]);var pe=Z.values;for(U=0;U<pe.length;U++)F.writeMessage(4,rr,pe[U])}function be(N,F){var U=N.feature;U.id!==void 0&&F.writeVarintField(1,U.id),F.writeMessage(2,Je,N),F.writeVarintField(3,U.type),F.writeMessage(4,Lt,U)}function Je(N,F){var U=N.feature,Z=N.keys,Q=N.values,pe=N.keycache,de=N.valuecache;for(var $ in U.properties){var ie=pe[$];ie===void 0&&(Z.push($),pe[$]=ie=Z.length-1),F.writeVarint(ie);var _e=U.properties[$],$e=typeof _e;$e!=="string"&&$e!=="boolean"&&$e!=="number"&&(_e=JSON.stringify(_e));var Ze=$e+":"+_e,Ce=de[Ze];Ce===void 0&&(Q.push(_e),de[Ze]=Ce=Q.length-1),F.writeVarint(Ce)}}function ht(N,F){return(F<<3)+(7&N)}function vt(N){return N<<1^N>>31}function Lt(N,F){for(var U=N.loadGeometry(),Z=N.type,Q=0,pe=0,de=U.length,$=0;$<de;$++){var ie=U[$],_e=1;Z===1&&(_e=ie.length),F.writeVarint(ht(1,_e));for(var $e=Z===3?ie.length-1:ie.length,Ze=0;Ze<$e;Ze++){Ze===1&&Z!==1&&F.writeVarint(ht(2,$e-1));var Ce=ie[Ze].x-Q,Ue=ie[Ze].y-pe;F.writeVarint(vt(Ce)),F.writeVarint(vt(Ue)),Q+=Ce,pe+=Ue}Z===3&&F.writeVarint(ht(7,1))}}function rr(N,F){var U=typeof N;U==="string"?F.writeStringField(1,N):U==="boolean"?F.writeBooleanField(7,N):U==="number"&&(N%1!=0?F.writeDoubleField(3,N):N<0?F.writeSVarintField(6,N):F.writeVarintField(5,N))}function Nn(N,F,U,Z){zr(N,U,Z),zr(F,2*U,2*Z),zr(F,2*U+1,2*Z+1)}function zr(N,F,U){var Z=N[F];N[F]=N[U],N[U]=Z}function mr(N,F,U,Z){var Q=N-U,pe=F-Z;return Q*Q+pe*pe}Ie.fromVectorTileJs=Ge,Ie.fromGeojsonVt=function(N,F){F=F||{};var U={};for(var Z in N)U[Z]=new ze(N[Z].features,F),U[Z].name=Z,U[Z].version=F.version,U[Z].extent=F.extent;return Ge({layers:U})},Ie.GeoJSONWrapper=Ke;var Jn=function(N){return N[0]},Fr=function(N){return N[1]},$i=function(N,F,U,Z,Q){F===void 0&&(F=Jn),U===void 0&&(U=Fr),Z===void 0&&(Z=64),Q===void 0&&(Q=Float64Array),this.nodeSize=Z,this.points=N;for(var pe=N.length<65536?Uint16Array:Uint32Array,de=this.ids=new pe(N.length),$=this.coords=new Q(2*N.length),ie=0;ie<N.length;ie++)de[ie]=ie,$[2*ie]=F(N[ie]),$[2*ie+1]=U(N[ie]);(function _e($e,Ze,Ce,Ue,St,_t){if(!(St-Ue<=Ce)){var Le=Ue+St>>1;(function pt(lt,De,fe,Ee,He,$t){for(;He>Ee;){if(He-Ee>600){var Ht=He-Ee+1,Qt=fe-Ee+1,Xt=Math.log(Ht),ti=.5*Math.exp(2*Xt/3),er=.5*Math.sqrt(Xt*ti*(Ht-ti)/Ht)*(Qt-Ht/2<0?-1:1);pt(lt,De,fe,Math.max(Ee,Math.floor(fe-Qt*ti/Ht+er)),Math.min(He,Math.floor(fe+(Ht-Qt)*ti/Ht+er)),$t)}var yn=De[2*fe+$t],$r=Ee,vr=He;for(Nn(lt,De,Ee,fe),De[2*He+$t]>yn&&Nn(lt,De,Ee,He);$r<vr;){for(Nn(lt,De,$r,vr),$r++,vr--;De[2*$r+$t]<yn;)$r++;for(;De[2*vr+$t]>yn;)vr--}De[2*Ee+$t]===yn?Nn(lt,De,Ee,vr):Nn(lt,De,++vr,He),vr<=fe&&(Ee=vr+1),fe<=vr&&(He=vr-1)}})($e,Ze,Le,Ue,St,_t%2),_e($e,Ze,Ce,Ue,Le-1,_t+1),_e($e,Ze,Ce,Le+1,St,_t+1)}})(de,$,Z,0,de.length-1,0)};$i.prototype.range=function(N,F,U,Z){return function(Q,pe,de,$,ie,_e,$e){for(var Ze,Ce,Ue=[0,Q.length-1,0],St=[];Ue.length;){var _t=Ue.pop(),Le=Ue.pop(),pt=Ue.pop();if(Le-pt<=$e)for(var lt=pt;lt<=Le;lt++)Ce=pe[2*lt+1],(Ze=pe[2*lt])>=de&&Ze<=ie&&Ce>=$&&Ce<=_e&&St.push(Q[lt]);else{var De=Math.floor((pt+Le)/2);Ce=pe[2*De+1],(Ze=pe[2*De])>=de&&Ze<=ie&&Ce>=$&&Ce<=_e&&St.push(Q[De]);var fe=(_t+1)%2;(_t===0?de<=Ze:$<=Ce)&&(Ue.push(pt),Ue.push(De-1),Ue.push(fe)),(_t===0?ie>=Ze:_e>=Ce)&&(Ue.push(De+1),Ue.push(Le),Ue.push(fe))}}return St}(this.ids,this.coords,N,F,U,Z,this.nodeSize)},$i.prototype.within=function(N,F,U){return function(Z,Q,pe,de,$,ie){for(var _e=[0,Z.length-1,0],$e=[],Ze=$*$;_e.length;){var Ce=_e.pop(),Ue=_e.pop(),St=_e.pop();if(Ue-St<=ie)for(var _t=St;_t<=Ue;_t++)mr(Q[2*_t],Q[2*_t+1],pe,de)<=Ze&&$e.push(Z[_t]);else{var Le=Math.floor((St+Ue)/2),pt=Q[2*Le],lt=Q[2*Le+1];mr(pt,lt,pe,de)<=Ze&&$e.push(Z[Le]);var De=(Ce+1)%2;(Ce===0?pe-$<=pt:de-$<=lt)&&(_e.push(St),_e.push(Le-1),_e.push(De)),(Ce===0?pe+$>=pt:de+$>=lt)&&(_e.push(Le+1),_e.push(Ue),_e.push(De))}}return $e}(this.ids,this.coords,N,F,U,this.nodeSize)};var qr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(N){return N}},kr=function(N){this.options=ye(Object.create(qr),N),this.trees=new Array(this.options.maxZoom+1)};function qn(N,F,U,Z,Q){return{x:N,y:F,zoom:1/0,id:U,parentId:-1,numPoints:Z,properties:Q}}function Mr(N,F){var U=N.geometry.coordinates,Z=U[1];return{x:Wn(U[0]),y:K(Z),zoom:1/0,index:F,parentId:-1}}function Mn(N){return{type:"Feature",id:N.id,properties:hi(N),geometry:{type:"Point",coordinates:[(Z=N.x,360*(Z-.5)),(F=N.y,U=(180-360*F)*Math.PI/180,360*Math.atan(Math.exp(U))/Math.PI-90)]}};var F,U,Z}function hi(N){var F=N.numPoints,U=F>=1e4?Math.round(F/1e3)+"k":F>=1e3?Math.round(F/100)/10+"k":F;return ye(ye({},N.properties),{cluster:!0,cluster_id:N.id,point_count:F,point_count_abbreviated:U})}function Wn(N){return N/360+.5}function K(N){var F=Math.sin(N*Math.PI/180),U=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return U<0?0:U>1?1:U}function ye(N,F){for(var U in F)N[U]=F[U];return N}function Re(N){return N.x}function qe(N){return N.y}function We(N,F,U,Z,Q,pe){var de=Q-U,$=pe-Z;if(de!==0||$!==0){var ie=((N-U)*de+(F-Z)*$)/(de*de+$*$);ie>1?(U=Q,Z=pe):ie>0&&(U+=de*ie,Z+=$*ie)}return(de=N-U)*de+($=F-Z)*$}function nt(N,F,U,Z){var Q={id:N===void 0?null:N,type:F,geometry:U,tags:Z,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(pe){var de=pe.geometry,$=pe.type;if($==="Point"||$==="MultiPoint"||$==="LineString")mt(pe,de);else if($==="Polygon"||$==="MultiLineString")for(var ie=0;ie<de.length;ie++)mt(pe,de[ie]);else if($==="MultiPolygon")for(ie=0;ie<de.length;ie++)for(var _e=0;_e<de[ie].length;_e++)mt(pe,de[ie][_e])}(Q),Q}function mt(N,F){for(var U=0;U<F.length;U+=3)N.minX=Math.min(N.minX,F[U]),N.minY=Math.min(N.minY,F[U+1]),N.maxX=Math.max(N.maxX,F[U]),N.maxY=Math.max(N.maxY,F[U+1])}function et(N,F,U,Z){if(F.geometry){var Q=F.geometry.coordinates,pe=F.geometry.type,de=Math.pow(U.tolerance/((1<<U.maxZoom)*U.extent),2),$=[],ie=F.id;if(U.promoteId?ie=F.properties[U.promoteId]:U.generateId&&(ie=Z||0),pe==="Point")ut(Q,$);else if(pe==="MultiPoint")for(var _e=0;_e<Q.length;_e++)ut(Q[_e],$);else if(pe==="LineString")Qe(Q,$,de,!1);else if(pe==="MultiLineString"){if(U.lineMetrics){for(_e=0;_e<Q.length;_e++)Qe(Q[_e],$=[],de,!1),N.push(nt(ie,"LineString",$,F.properties));return}Ot(Q,$,de,!1)}else if(pe==="Polygon")Ot(Q,$,de,!0);else{if(pe!=="MultiPolygon"){if(pe==="GeometryCollection"){for(_e=0;_e<F.geometry.geometries.length;_e++)et(N,{id:ie,geometry:F.geometry.geometries[_e],properties:F.properties},U,Z);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<Q.length;_e++){var $e=[];Ot(Q[_e],$e,de,!0),$.push($e)}}N.push(nt(ie,pe,$,F.properties))}}function ut(N,F){F.push(bt(N[0])),F.push(Dt(N[1])),F.push(0)}function Qe(N,F,U,Z){for(var Q,pe,de=0,$=0;$<N.length;$++){var ie=bt(N[$][0]),_e=Dt(N[$][1]);F.push(ie),F.push(_e),F.push(0),$>0&&(de+=Z?(Q*_e-ie*pe)/2:Math.sqrt(Math.pow(ie-Q,2)+Math.pow(_e-pe,2))),Q=ie,pe=_e}var $e=F.length-3;F[2]=1,function Ze(Ce,Ue,St,_t){for(var Le,pt=_t,lt=St-Ue>>1,De=St-Ue,fe=Ce[Ue],Ee=Ce[Ue+1],He=Ce[St],$t=Ce[St+1],Ht=Ue+3;Ht<St;Ht+=3){var Qt=We(Ce[Ht],Ce[Ht+1],fe,Ee,He,$t);if(Qt>pt)Le=Ht,pt=Qt;else if(Qt===pt){var Xt=Math.abs(Ht-lt);Xt<De&&(Le=Ht,De=Xt)}}pt>_t&&(Le-Ue>3&&Ze(Ce,Ue,Le,_t),Ce[Le+2]=pt,St-Le>3&&Ze(Ce,Le,St,_t))}(F,0,$e,U),F[$e+2]=1,F.size=Math.abs(de),F.start=0,F.end=F.size}function Ot(N,F,U,Z){for(var Q=0;Q<N.length;Q++){var pe=[];Qe(N[Q],pe,U,Z),F.push(pe)}}function bt(N){return N/360+.5}function Dt(N){var F=Math.sin(N*Math.PI/180),U=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return U<0?0:U>1?1:U}function jt(N,F,U,Z,Q,pe,de,$){if(Z/=F,pe>=(U/=F)&&de<Z)return N;if(de<U||pe>=Z)return null;for(var ie=[],_e=0;_e<N.length;_e++){var $e=N[_e],Ze=$e.geometry,Ce=$e.type,Ue=Q===0?$e.minX:$e.minY,St=Q===0?$e.maxX:$e.maxY;if(Ue>=U&&St<Z)ie.push($e);else if(!(St<U||Ue>=Z)){var _t=[];if(Ce==="Point"||Ce==="MultiPoint")yr(Ze,_t,U,Z,Q);else if(Ce==="LineString")jr(Ze,_t,U,Z,Q,!1,$.lineMetrics);else if(Ce==="MultiLineString")Qr(Ze,_t,U,Z,Q,!1);else if(Ce==="Polygon")Qr(Ze,_t,U,Z,Q,!0);else if(Ce==="MultiPolygon")for(var Le=0;Le<Ze.length;Le++){var pt=[];Qr(Ze[Le],pt,U,Z,Q,!0),pt.length&&_t.push(pt)}if(_t.length){if($.lineMetrics&&Ce==="LineString"){for(Le=0;Le<_t.length;Le++)ie.push(nt($e.id,Ce,_t[Le],$e.tags));continue}Ce!=="LineString"&&Ce!=="MultiLineString"||(_t.length===1?(Ce="LineString",_t=_t[0]):Ce="MultiLineString"),Ce!=="Point"&&Ce!=="MultiPoint"||(Ce=_t.length===3?"Point":"MultiPoint"),ie.push(nt($e.id,Ce,_t,$e.tags))}}}return ie.length?ie:null}function yr(N,F,U,Z,Q){for(var pe=0;pe<N.length;pe+=3){var de=N[pe+Q];de>=U&&de<=Z&&(F.push(N[pe]),F.push(N[pe+1]),F.push(N[pe+2]))}}function jr(N,F,U,Z,Q,pe,de){for(var $,ie,_e=Lr(N),$e=Q===0?Gi:_o,Ze=N.start,Ce=0;Ce<N.length-3;Ce+=3){var Ue=N[Ce],St=N[Ce+1],_t=N[Ce+2],Le=N[Ce+3],pt=N[Ce+4],lt=Q===0?Ue:St,De=Q===0?Le:pt,fe=!1;de&&($=Math.sqrt(Math.pow(Ue-Le,2)+Math.pow(St-pt,2))),lt<U?De>U&&(ie=$e(_e,Ue,St,Le,pt,U),de&&(_e.start=Ze+$*ie)):lt>Z?De<Z&&(ie=$e(_e,Ue,St,Le,pt,Z),de&&(_e.start=Ze+$*ie)):Qn(_e,Ue,St,_t),De<U&&lt>=U&&(ie=$e(_e,Ue,St,Le,pt,U),fe=!0),De>Z&&lt<=Z&&(ie=$e(_e,Ue,St,Le,pt,Z),fe=!0),!pe&&fe&&(de&&(_e.end=Ze+$*ie),F.push(_e),_e=Lr(N)),de&&(Ze+=$)}var Ee=N.length-3;Ue=N[Ee],St=N[Ee+1],_t=N[Ee+2],(lt=Q===0?Ue:St)>=U&&lt<=Z&&Qn(_e,Ue,St,_t),Ee=_e.length-3,pe&&Ee>=3&&(_e[Ee]!==_e[0]||_e[Ee+1]!==_e[1])&&Qn(_e,_e[0],_e[1],_e[2]),_e.length&&F.push(_e)}function Lr(N){var F=[];return F.size=N.size,F.start=N.start,F.end=N.end,F}function Qr(N,F,U,Z,Q,pe){for(var de=0;de<N.length;de++)jr(N[de],F,U,Z,Q,pe,!1)}function Qn(N,F,U,Z){N.push(F),N.push(U),N.push(Z)}function Gi(N,F,U,Z,Q,pe){var de=(pe-F)/(Z-F);return N.push(pe),N.push(U+(Q-U)*de),N.push(1),de}function _o(N,F,U,Z,Q,pe){var de=(pe-U)/(Q-U);return N.push(F+(Z-F)*de),N.push(pe),N.push(1),de}function ei(N,F){for(var U=[],Z=0;Z<N.length;Z++){var Q,pe=N[Z],de=pe.type;if(de==="Point"||de==="MultiPoint"||de==="LineString")Q=Ri(pe.geometry,F);else if(de==="MultiLineString"||de==="Polygon"){Q=[];for(var $=0;$<pe.geometry.length;$++)Q.push(Ri(pe.geometry[$],F))}else if(de==="MultiPolygon")for(Q=[],$=0;$<pe.geometry.length;$++){for(var ie=[],_e=0;_e<pe.geometry[$].length;_e++)ie.push(Ri(pe.geometry[$][_e],F));Q.push(ie)}U.push(nt(pe.id,de,Q,pe.tags))}return U}function Ri(N,F){var U=[];U.size=N.size,N.start!==void 0&&(U.start=N.start,U.end=N.end);for(var Z=0;Z<N.length;Z+=3)U.push(N[Z]+F,N[Z+1],N[Z+2]);return U}function In(N,F){if(N.transformed)return N;var U,Z,Q,pe=1<<N.z,de=N.x,$=N.y;for(U=0;U<N.features.length;U++){var ie=N.features[U],_e=ie.geometry,$e=ie.type;if(ie.geometry=[],$e===1)for(Z=0;Z<_e.length;Z+=2)ie.geometry.push(fi(_e[Z],_e[Z+1],F,pe,de,$));else for(Z=0;Z<_e.length;Z++){var Ze=[];for(Q=0;Q<_e[Z].length;Q+=2)Ze.push(fi(_e[Z][Q],_e[Z][Q+1],F,pe,de,$));ie.geometry.push(Ze)}}return N.transformed=!0,N}function fi(N,F,U,Z,Q,pe){return[Math.round(U*(N*Z-Q)),Math.round(U*(F*Z-pe))]}function ss(N,F,U,Z,Q){for(var pe=F===Q.maxZoom?0:Q.tolerance/((1<<F)*Q.extent),de={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:U,y:Z,z:F,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},$=0;$<N.length;$++){de.numFeatures++,Xo(de,N[$],pe,Q);var ie=N[$].minX,_e=N[$].minY,$e=N[$].maxX,Ze=N[$].maxY;ie<de.minX&&(de.minX=ie),_e<de.minY&&(de.minY=_e),$e>de.maxX&&(de.maxX=$e),Ze>de.maxY&&(de.maxY=Ze)}return de}function Xo(N,F,U,Z){var Q=F.geometry,pe=F.type,de=[];if(pe==="Point"||pe==="MultiPoint")for(var $=0;$<Q.length;$+=3)de.push(Q[$]),de.push(Q[$+1]),N.numPoints++,N.numSimplified++;else if(pe==="LineString")ls(de,Q,N,U,!1,!1);else if(pe==="MultiLineString"||pe==="Polygon")for($=0;$<Q.length;$++)ls(de,Q[$],N,U,pe==="Polygon",$===0);else if(pe==="MultiPolygon")for(var ie=0;ie<Q.length;ie++){var _e=Q[ie];for($=0;$<_e.length;$++)ls(de,_e[$],N,U,!0,$===0)}if(de.length){var $e=F.tags||null;if(pe==="LineString"&&Z.lineMetrics){for(var Ze in $e={},F.tags)$e[Ze]=F.tags[Ze];$e.mapbox_clip_start=Q.start/Q.size,$e.mapbox_clip_end=Q.end/Q.size}var Ce={geometry:de,type:pe==="Polygon"||pe==="MultiPolygon"?3:pe==="LineString"||pe==="MultiLineString"?2:1,tags:$e};F.id!==null&&(Ce.id=F.id),N.features.push(Ce)}}function ls(N,F,U,Z,Q,pe){var de=Z*Z;if(Z>0&&F.size<(Q?de:Z))U.numPoints+=F.length/3;else{for(var $=[],ie=0;ie<F.length;ie+=3)(Z===0||F[ie+2]>de)&&(U.numSimplified++,$.push(F[ie]),$.push(F[ie+1])),U.numPoints++;Q&&function(_e,$e){for(var Ze=0,Ce=0,Ue=_e.length,St=Ue-2;Ce<Ue;St=Ce,Ce+=2)Ze+=(_e[Ce]-_e[St])*(_e[Ce+1]+_e[St+1]);if(Ze>0===$e)for(Ce=0,Ue=_e.length;Ce<Ue/2;Ce+=2){var _t=_e[Ce],Le=_e[Ce+1];_e[Ce]=_e[Ue-2-Ce],_e[Ce+1]=_e[Ue-1-Ce],_e[Ue-2-Ce]=_t,_e[Ue-1-Ce]=Le}}($,pe),N.push($)}}function ma(N,F){var U=(F=this.options=function(Q,pe){for(var de in pe)Q[de]=pe[de];return Q}(Object.create(this.options),F)).debug;if(U&&console.time("preprocess data"),F.maxZoom<0||F.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(F.promoteId&&F.generateId)throw new Error("promoteId and generateId cannot be used together.");var Z=function(Q,pe){var de=[];if(Q.type==="FeatureCollection")for(var $=0;$<Q.features.length;$++)et(de,Q.features[$],pe,$);else et(de,Q.type==="Feature"?Q:{geometry:Q},pe);return de}(N,F);this.tiles={},this.tileCoords=[],U&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",F.indexMaxZoom,F.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Z=function(Q,pe){var de=pe.buffer/pe.extent,$=Q,ie=jt(Q,1,-1-de,de,0,-1,2,pe),_e=jt(Q,1,1-de,2+de,0,-1,2,pe);return(ie||_e)&&($=jt(Q,1,-de,1+de,0,-1,2,pe)||[],ie&&($=ei(ie,1).concat($)),_e&&($=$.concat(ei(_e,-1)))),$}(Z,F)).length&&this.splitTile(Z,0,0,0),U&&(Z.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pn(N,F,U){return 32*((1<<N)*U+F)+N}function Fo(N,F){var U=N.tileID.canonical;if(!this._geoJSONIndex)return F(null,null);var Z=this._geoJSONIndex.getTile(U.z,U.x,U.y);if(!Z)return F(null,null);var Q=new ve(Z.features),pe=Ie(Q);pe.byteOffset===0&&pe.byteLength===pe.buffer.byteLength||(pe=new Uint8Array(pe)),F(null,{vectorTile:Q,rawData:pe.buffer})}kr.prototype.load=function(N){var F=this.options,U=F.log,Z=F.minZoom,Q=F.maxZoom,pe=F.nodeSize;U&&console.time("total time");var de="prepare "+N.length+" points";U&&console.time(de),this.points=N;for(var $=[],ie=0;ie<N.length;ie++)N[ie].geometry&&$.push(Mr(N[ie],ie));this.trees[Q+1]=new $i($,Re,qe,pe,Float32Array),U&&console.timeEnd(de);for(var _e=Q;_e>=Z;_e--){var $e=+Date.now();$=this._cluster($,_e),this.trees[_e]=new $i($,Re,qe,pe,Float32Array),U&&console.log("z%d: %d clusters in %dms",_e,$.length,+Date.now()-$e)}return U&&console.timeEnd("total time"),this},kr.prototype.getClusters=function(N,F){var U=((N[0]+180)%360+360)%360-180,Z=Math.max(-90,Math.min(90,N[1])),Q=N[2]===180?180:((N[2]+180)%360+360)%360-180,pe=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)U=-180,Q=180;else if(U>Q){var de=this.getClusters([U,Z,180,pe],F),$=this.getClusters([-180,Z,Q,pe],F);return de.concat($)}for(var ie=this.trees[this._limitZoom(F)],_e=[],$e=0,Ze=ie.range(Wn(U),K(pe),Wn(Q),K(Z));$e<Ze.length;$e+=1){var Ce=ie.points[Ze[$e]];_e.push(Ce.numPoints?Mn(Ce):this.points[Ce.index])}return _e},kr.prototype.getChildren=function(N){var F=this._getOriginId(N),U=this._getOriginZoom(N),Z="No cluster with the specified id.",Q=this.trees[U];if(!Q)throw new Error(Z);var pe=Q.points[F];if(!pe)throw new Error(Z);for(var de=this.options.radius/(this.options.extent*Math.pow(2,U-1)),$=[],ie=0,_e=Q.within(pe.x,pe.y,de);ie<_e.length;ie+=1){var $e=Q.points[_e[ie]];$e.parentId===N&&$.push($e.numPoints?Mn($e):this.points[$e.index])}if($.length===0)throw new Error(Z);return $},kr.prototype.getLeaves=function(N,F,U){var Z=[];return this._appendLeaves(Z,N,F=F||10,U=U||0,0),Z},kr.prototype.getTile=function(N,F,U){var Z=this.trees[this._limitZoom(N)],Q=Math.pow(2,N),pe=this.options,de=pe.radius/pe.extent,$=(U-de)/Q,ie=(U+1+de)/Q,_e={features:[]};return this._addTileFeatures(Z.range((F-de)/Q,$,(F+1+de)/Q,ie),Z.points,F,U,Q,_e),F===0&&this._addTileFeatures(Z.range(1-de/Q,$,1,ie),Z.points,Q,U,Q,_e),F===Q-1&&this._addTileFeatures(Z.range(0,$,de/Q,ie),Z.points,-1,U,Q,_e),_e.features.length?_e:null},kr.prototype.getClusterExpansionZoom=function(N){for(var F=this._getOriginZoom(N)-1;F<=this.options.maxZoom;){var U=this.getChildren(N);if(F++,U.length!==1)break;N=U[0].properties.cluster_id}return F},kr.prototype._appendLeaves=function(N,F,U,Z,Q){for(var pe=0,de=this.getChildren(F);pe<de.length;pe+=1){var $=de[pe],ie=$.properties;if(ie&&ie.cluster?Q+ie.point_count<=Z?Q+=ie.point_count:Q=this._appendLeaves(N,ie.cluster_id,U,Z,Q):Q<Z?Q++:N.push($),N.length===U)break}return Q},kr.prototype._addTileFeatures=function(N,F,U,Z,Q,pe){for(var de=0,$=N;de<$.length;de+=1){var ie=F[$[de]],_e=ie.numPoints,$e={type:1,geometry:[[Math.round(this.options.extent*(ie.x*Q-U)),Math.round(this.options.extent*(ie.y*Q-Z))]],tags:_e?hi(ie):this.points[ie.index].properties},Ze=void 0;_e?Ze=ie.id:this.options.generateId?Ze=ie.index:this.points[ie.index].id&&(Ze=this.points[ie.index].id),Ze!==void 0&&($e.id=Ze),pe.features.push($e)}},kr.prototype._limitZoom=function(N){return Math.max(this.options.minZoom,Math.min(+N,this.options.maxZoom+1))},kr.prototype._cluster=function(N,F){for(var U=[],Z=this.options,Q=Z.reduce,pe=Z.minPoints,de=Z.radius/(Z.extent*Math.pow(2,F)),$=0;$<N.length;$++){var ie=N[$];if(!(ie.zoom<=F)){ie.zoom=F;for(var _e=this.trees[F+1],$e=_e.within(ie.x,ie.y,de),Ze=ie.numPoints||1,Ce=Ze,Ue=0,St=$e;Ue<St.length;Ue+=1){var _t=_e.points[St[Ue]];_t.zoom>F&&(Ce+=_t.numPoints||1)}if(Ce>=pe){for(var Le=ie.x*Ze,pt=ie.y*Ze,lt=Q&&Ze>1?this._map(ie,!0):null,De=($<<5)+(F+1)+this.points.length,fe=0,Ee=$e;fe<Ee.length;fe+=1){var He=_e.points[Ee[fe]];if(!(He.zoom<=F)){He.zoom=F;var $t=He.numPoints||1;Le+=He.x*$t,pt+=He.y*$t,He.parentId=De,Q&&(lt||(lt=this._map(ie,!0)),Q(lt,this._map(He)))}}ie.parentId=De,U.push(qn(Le/Ce,pt/Ce,De,Ce,lt))}else if(U.push(ie),Ce>1)for(var Ht=0,Qt=$e;Ht<Qt.length;Ht+=1){var Xt=_e.points[Qt[Ht]];Xt.zoom<=F||(Xt.zoom=F,U.push(Xt))}}}return U},kr.prototype._getOriginId=function(N){return N-this.points.length>>5},kr.prototype._getOriginZoom=function(N){return(N-this.points.length)%32},kr.prototype._map=function(N,F){if(N.numPoints)return F?ye({},N.properties):N.properties;var U=this.points[N.index].properties,Z=this.options.map(U);return F&&Z===U?ye({},Z):Z},ma.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ma.prototype.splitTile=function(N,F,U,Z,Q,pe,de){for(var $=[N,F,U,Z],ie=this.options,_e=ie.debug;$.length;){Z=$.pop(),U=$.pop(),F=$.pop(),N=$.pop();var $e=1<<F,Ze=pn(F,U,Z),Ce=this.tiles[Ze];if(!Ce&&(_e>1&&console.time("creation"),Ce=this.tiles[Ze]=ss(N,F,U,Z,ie),this.tileCoords.push({z:F,x:U,y:Z}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",F,U,Z,Ce.numFeatures,Ce.numPoints,Ce.numSimplified),console.timeEnd("creation"));var Ue="z"+F;this.stats[Ue]=(this.stats[Ue]||0)+1,this.total++}if(Ce.source=N,Q){if(F===ie.maxZoom||F===Q)continue;var St=1<<Q-F;if(U!==Math.floor(pe/St)||Z!==Math.floor(de/St))continue}else if(F===ie.indexMaxZoom||Ce.numPoints<=ie.indexMaxPoints)continue;if(Ce.source=null,N.length!==0){_e>1&&console.time("clipping");var _t,Le,pt,lt,De,fe,Ee=.5*ie.buffer/ie.extent,He=.5-Ee,$t=.5+Ee,Ht=1+Ee;_t=Le=pt=lt=null,De=jt(N,$e,U-Ee,U+$t,0,Ce.minX,Ce.maxX,ie),fe=jt(N,$e,U+He,U+Ht,0,Ce.minX,Ce.maxX,ie),N=null,De&&(_t=jt(De,$e,Z-Ee,Z+$t,1,Ce.minY,Ce.maxY,ie),Le=jt(De,$e,Z+He,Z+Ht,1,Ce.minY,Ce.maxY,ie),De=null),fe&&(pt=jt(fe,$e,Z-Ee,Z+$t,1,Ce.minY,Ce.maxY,ie),lt=jt(fe,$e,Z+He,Z+Ht,1,Ce.minY,Ce.maxY,ie),fe=null),_e>1&&console.timeEnd("clipping"),$.push(_t||[],F+1,2*U,2*Z),$.push(Le||[],F+1,2*U,2*Z+1),$.push(pt||[],F+1,2*U+1,2*Z),$.push(lt||[],F+1,2*U+1,2*Z+1)}}},ma.prototype.getTile=function(N,F,U){var Z=this.options,Q=Z.extent,pe=Z.debug;if(N<0||N>24)return null;var de=1<<N,$=pn(N,F=(F%de+de)%de,U);if(this.tiles[$])return In(this.tiles[$],Q);pe>1&&console.log("drilling down to z%d-%d-%d",N,F,U);for(var ie,_e=N,$e=F,Ze=U;!ie&&_e>0;)_e--,$e=Math.floor($e/2),Ze=Math.floor(Ze/2),ie=this.tiles[pn(_e,$e,Ze)];return ie&&ie.source?(pe>1&&console.log("found parent tile z%d-%d-%d",_e,$e,Ze),pe>1&&console.time("drilling down"),this.splitTile(ie.source,_e,$e,Ze,N,F,U),pe>1&&console.timeEnd("drilling down"),this.tiles[$]?In(this.tiles[$],Q):null):null};var Il=function(N){function F(U,Z,Q,pe){N.call(this,U,Z,Q,Fo),pe&&(this.loadGeoJSON=pe)}return N&&(F.__proto__=N),(F.prototype=Object.create(N&&N.prototype)).constructor=F,F.prototype.loadData=function(U,Z){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Z,this._pendingLoadDataParams=U,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},F.prototype._loadData=function(){var U=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Z=this._pendingCallback,Q=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var pe=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new a.RequestPerformance(Q.request);this.loadGeoJSON(Q,function(de,$){if(de||!$)return Z(de);if(typeof $!="object")return Z(new Error("Input data given to '"+Q.source+"' is not a valid GeoJSON object."));(function Ce(Ue,St){var _t,Le=Ue&&Ue.type;if(Le==="FeatureCollection")for(_t=0;_t<Ue.features.length;_t++)Ce(Ue.features[_t],St);else if(Le==="GeometryCollection")for(_t=0;_t<Ue.geometries.length;_t++)Ce(Ue.geometries[_t],St);else if(Le==="Feature")Ce(Ue.geometry,St);else if(Le==="Polygon")re(Ue.coordinates,St);else if(Le==="MultiPolygon")for(_t=0;_t<Ue.coordinates.length;_t++)re(Ue.coordinates[_t],St);return Ue})($,!0);try{if(Q.filter){var ie=a.createExpression(Q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ie.result==="error")throw new Error(ie.value.map(function(Ce){return Ce.key+": "+Ce.message}).join(", "));var _e=$.features.filter(function(Ce){return ie.value.evaluate({zoom:0},Ce)});$={type:"FeatureCollection",features:_e}}U._geoJSONIndex=Q.cluster?new kr(function(Ce){var Ue=Ce.superclusterOptions,St=Ce.clusterProperties;if(!St||!Ue)return Ue;for(var _t={},Le={},pt={accumulated:null,zoom:0},lt={properties:null},De=Object.keys(St),fe=0,Ee=De;fe<Ee.length;fe+=1){var He=Ee[fe],$t=St[He],Ht=$t[0],Qt=a.createExpression($t[1]),Xt=a.createExpression(typeof Ht=="string"?[Ht,["accumulated"],["get",He]]:Ht);_t[He]=Qt.value,Le[He]=Xt.value}return Ue.map=function(ti){lt.properties=ti;for(var er={},yn=0,$r=De;yn<$r.length;yn+=1){var vr=$r[yn];er[vr]=_t[vr].evaluate(pt,lt)}return er},Ue.reduce=function(ti,er){lt.properties=er;for(var yn=0,$r=De;yn<$r.length;yn+=1){var vr=$r[yn];pt.accumulated=ti[vr],ti[vr]=Le[vr].evaluate(pt,lt)}},Ue}(Q)).load($.features):function(Ce,Ue){return new ma(Ce,Ue)}($,Q.geojsonVtOptions)}catch(Ce){return Z(Ce)}U.loaded={};var $e={};if(pe){var Ze=pe.finish();Ze&&($e.resourceTiming={},$e.resourceTiming[Q.source]=JSON.parse(JSON.stringify(Ze)))}Z(null,$e)})}},F.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},F.prototype.reloadTile=function(U,Z){var Q=this.loaded;return Q&&Q[U.uid]?N.prototype.reloadTile.call(this,U,Z):this.loadTile(U,Z)},F.prototype.loadGeoJSON=function(U,Z){if(U.request)a.getJSON(U.request,Z);else{if(typeof U.data!="string")return Z(new Error("Input data given to '"+U.source+"' is not a valid GeoJSON object."));try{return Z(null,JSON.parse(U.data))}catch{return Z(new Error("Input data given to '"+U.source+"' is not a valid GeoJSON object."))}}},F.prototype.removeSource=function(U,Z){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Z()},F.prototype.getClusterExpansionZoom=function(U,Z){try{Z(null,this._geoJSONIndex.getClusterExpansionZoom(U.clusterId))}catch(Q){Z(Q)}},F.prototype.getClusterChildren=function(U,Z){try{Z(null,this._geoJSONIndex.getChildren(U.clusterId))}catch(Q){Z(Q)}},F.prototype.getClusterLeaves=function(U,Z){try{Z(null,this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset))}catch(Q){Z(Q)}},F}(z),Sn=function(N){var F=this;this.self=N,this.actor=new a.Actor(N,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:z,geojson:Il},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(U,Z){if(F.workerSourceTypes[U])throw new Error('Worker source with name "'+U+'" already registered.');F.workerSourceTypes[U]=Z},this.self.registerRTLTextPlugin=function(U){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=U.applyArabicShaping,a.plugin.processBidirectionalText=U.processBidirectionalText,a.plugin.processStyledBidirectionalText=U.processStyledBidirectionalText}};return Sn.prototype.setReferrer=function(N,F){this.referrer=F},Sn.prototype.setImages=function(N,F,U){for(var Z in this.availableImages[N]=F,this.workerSources[N]){var Q=this.workerSources[N][Z];for(var pe in Q)Q[pe].availableImages=F}U()},Sn.prototype.setLayers=function(N,F,U){this.getLayerIndex(N).replace(F),U()},Sn.prototype.updateLayers=function(N,F,U){this.getLayerIndex(N).update(F.layers,F.removedIds),U()},Sn.prototype.loadTile=function(N,F,U){this.getWorkerSource(N,F.type,F.source).loadTile(F,U)},Sn.prototype.loadDEMTile=function(N,F,U){this.getDEMWorkerSource(N,F.source).loadTile(F,U)},Sn.prototype.reloadTile=function(N,F,U){this.getWorkerSource(N,F.type,F.source).reloadTile(F,U)},Sn.prototype.abortTile=function(N,F,U){this.getWorkerSource(N,F.type,F.source).abortTile(F,U)},Sn.prototype.removeTile=function(N,F,U){this.getWorkerSource(N,F.type,F.source).removeTile(F,U)},Sn.prototype.removeDEMTile=function(N,F){this.getDEMWorkerSource(N,F.source).removeTile(F)},Sn.prototype.removeSource=function(N,F,U){if(this.workerSources[N]&&this.workerSources[N][F.type]&&this.workerSources[N][F.type][F.source]){var Z=this.workerSources[N][F.type][F.source];delete this.workerSources[N][F.type][F.source],Z.removeSource!==void 0?Z.removeSource(F,U):U()}},Sn.prototype.loadWorkerSource=function(N,F,U){try{this.self.importScripts(F.url),U()}catch(Z){U(Z.toString())}},Sn.prototype.syncRTLPluginState=function(N,F,U){try{a.plugin.setState(F);var Z=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Z!=null){this.self.importScripts(Z);var Q=a.plugin.isParsed();U(Q?void 0:new Error("RTL Text Plugin failed to import scripts from "+Z),Q)}}catch(pe){U(pe.toString())}},Sn.prototype.getAvailableImages=function(N){var F=this.availableImages[N];return F||(F=[]),F},Sn.prototype.getLayerIndex=function(N){var F=this.layerIndexes[N];return F||(F=this.layerIndexes[N]=new b),F},Sn.prototype.getWorkerSource=function(N,F,U){var Z=this;return this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][F]||(this.workerSources[N][F]={}),this.workerSources[N][F][U]||(this.workerSources[N][F][U]=new this.workerSourceTypes[F]({send:function(Q,pe,de){Z.actor.send(Q,pe,de,N)}},this.getLayerIndex(N),this.getAvailableImages(N))),this.workerSources[N][F][U]},Sn.prototype.getDEMWorkerSource=function(N,F){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][F]||(this.demWorkerSources[N][F]=new q),this.demWorkerSources[N][F]},Sn.prototype.enforceCacheSizeLimit=function(N,F){a.enforceCacheSizeLimit(F)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Sn(self)),Sn}),f(["./shared"],function(a){var m=a.createCommonjsModule(function(u){function h(_){return!c(_)}function c(_){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var S,O,k=new Blob([""],{type:"text/javascript"}),R=URL.createObjectURL(k);try{O=new Worker(R),S=!0}catch{S=!1}return O&&O.terminate(),URL.revokeObjectURL(R),S}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var S=document.createElement("canvas");S.width=S.height=1;var O=S.getContext("2d");if(!O)return!1;var k=O.getImageData(0,0,1,1);return k&&k.width===S.width}()?(d[w=_&&_.failIfMajorPerformanceCaveat]===void 0&&(d[w]=function(S){var O=function(R){var G=document.createElement("canvas"),W=Object.create(h.webGLContextAttributes);return W.failIfMajorPerformanceCaveat=R,G.probablySupportsContext?G.probablySupportsContext("webgl",W)||G.probablySupportsContext("experimental-webgl",W):G.supportsContext?G.supportsContext("webgl",W)||G.supportsContext("experimental-webgl",W):G.getContext("webgl",W)||G.getContext("experimental-webgl",W)}(S);if(!O)return!1;var k=O.createShader(O.VERTEX_SHADER);return!(!k||O.isContextLost())&&(O.shaderSource(k,"void main() {}"),O.compileShader(k),O.getShaderParameter(k,O.COMPILE_STATUS)===!0)}(w)),d[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}u.exports?u.exports=h:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=h,window.mapboxgl.notSupportedReason=c);var d={};h.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),g={create:function(u,h,c){var d=a.window.document.createElement(u);return h!==void 0&&(d.className=h),c&&c.appendChild(d),d},createNS:function(u,h){return a.window.document.createElementNS(u,h)}},b=a.window.document&&a.window.document.documentElement.style;function E(u){if(!b)return u[0];for(var h=0;h<u.length;h++)if(u[h]in b)return u[h];return u[0]}var M,I=E(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);g.disableDrag=function(){b&&I&&(M=b[I],b[I]="none")},g.enableDrag=function(){b&&I&&(b[I]=M)};var P=E(["transform","WebkitTransform"]);g.setTransform=function(u,h){u.style[P]=h};var z=!1;try{var V=Object.defineProperty({},"passive",{get:function(){z=!0}});a.window.addEventListener("test",V,V),a.window.removeEventListener("test",V,V)}catch{z=!1}g.addEventListener=function(u,h,c,d){d===void 0&&(d={}),u.addEventListener(h,c,"passive"in d&&z?d:d.capture)},g.removeEventListener=function(u,h,c,d){d===void 0&&(d={}),u.removeEventListener(h,c,"passive"in d&&z?d:d.capture)};var q=function(u){u.preventDefault(),u.stopPropagation(),a.window.removeEventListener("click",q,!0)};function re(u){var h=u.userImage;return!!(h&&h.render&&h.render())&&(u.data.replace(new Uint8Array(h.data.buffer)),!0)}g.suppressClick=function(){a.window.addEventListener("click",q,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",q,!0)},0)},g.mousePos=function(u,h){var c=u.getBoundingClientRect();return new a.Point(h.clientX-c.left-u.clientLeft,h.clientY-c.top-u.clientTop)},g.touchPos=function(u,h){for(var c=u.getBoundingClientRect(),d=[],_=0;_<h.length;_++)d.push(new a.Point(h[_].clientX-c.left-u.clientLeft,h[_].clientY-c.top-u.clientTop));return d},g.mouseButton=function(u){return a.window.InstallTrigger!==void 0&&u.button===2&&u.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:u.button},g.remove=function(u){u.parentNode&&u.parentNode.removeChild(u)};var X=function(u){function h(){u.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.isLoaded=function(){return this.loaded},h.prototype.setLoaded=function(c){if(this.loaded!==c&&(this.loaded=c,c)){for(var d=0,_=this.requestors;d<_.length;d+=1){var w=_[d];this._notify(w.ids,w.callback)}this.requestors=[]}},h.prototype.getImage=function(c){return this.images[c]},h.prototype.addImage=function(c,d){this._validate(c,d)&&(this.images[c]=d)},h.prototype._validate=function(c,d){var _=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+c+'" has invalid "stretchX" value'))),_=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+c+'" has invalid "stretchY" value'))),_=!1),this._validateContent(d.content,d)||(this.fire(new a.ErrorEvent(new Error('Image "'+c+'" has invalid "content" value'))),_=!1),_},h.prototype._validateStretch=function(c,d){if(!c)return!0;for(var _=0,w=0,S=c;w<S.length;w+=1){var O=S[w];if(O[0]<_||O[1]<O[0]||d<O[1])return!1;_=O[1]}return!0},h.prototype._validateContent=function(c,d){return!(c&&(c.length!==4||c[0]<0||d.data.width<c[0]||c[1]<0||d.data.height<c[1]||c[2]<0||d.data.width<c[2]||c[3]<0||d.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))},h.prototype.updateImage=function(c,d){d.version=this.images[c].version+1,this.images[c]=d,this.updatedImages[c]=!0},h.prototype.removeImage=function(c){var d=this.images[c];delete this.images[c],delete this.patterns[c],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()},h.prototype.listImages=function(){return Object.keys(this.images)},h.prototype.getImages=function(c,d){var _=!0;if(!this.isLoaded())for(var w=0,S=c;w<S.length;w+=1)this.images[S[w]]||(_=!1);this.isLoaded()||_?this._notify(c,d):this.requestors.push({ids:c,callback:d})},h.prototype._notify=function(c,d){for(var _={},w=0,S=c;w<S.length;w+=1){var O=S[w];this.images[O]||this.fire(new a.Event("styleimagemissing",{id:O}));var k=this.images[O];k?_[O]={data:k.data.clone(),pixelRatio:k.pixelRatio,sdf:k.sdf,version:k.version,stretchX:k.stretchX,stretchY:k.stretchY,content:k.content,hasRenderCallback:Boolean(k.userImage&&k.userImage.render)}:a.warnOnce('Image "'+O+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}d(null,_)},h.prototype.getPixelSize=function(){var c=this.atlasImage;return{width:c.width,height:c.height}},h.prototype.getPattern=function(c){var d=this.patterns[c],_=this.getImage(c);if(!_)return null;if(d&&d.position.version===_.version)return d.position;if(d)d.position.version=_.version;else{var w={w:_.data.width+2,h:_.data.height+2,x:0,y:0},S=new a.ImagePosition(w,_);this.patterns[c]={bin:w,position:S}}return this._updatePatternAtlas(),this.patterns[c].position},h.prototype.bind=function(c){var d=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(c,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)},h.prototype._updatePatternAtlas=function(){var c=[];for(var d in this.patterns)c.push(this.patterns[d].bin);var _=a.potpack(c),w=_.w,S=_.h,O=this.atlasImage;for(var k in O.resize({width:w||1,height:S||1}),this.patterns){var R=this.patterns[k].bin,G=R.x+1,W=R.y+1,H=this.images[k].data,ne=H.width,te=H.height;a.RGBAImage.copy(H,O,{x:0,y:0},{x:G,y:W},{width:ne,height:te}),a.RGBAImage.copy(H,O,{x:0,y:te-1},{x:G,y:W-1},{width:ne,height:1}),a.RGBAImage.copy(H,O,{x:0,y:0},{x:G,y:W+te},{width:ne,height:1}),a.RGBAImage.copy(H,O,{x:ne-1,y:0},{x:G-1,y:W},{width:1,height:te}),a.RGBAImage.copy(H,O,{x:0,y:0},{x:G+ne,y:W},{width:1,height:te})}this.dirty=!0},h.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},h.prototype.dispatchRenderCallbacks=function(c){for(var d=0,_=c;d<_.length;d+=1){var w=_[d];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var S=this.images[w];re(S)&&this.updateImage(w,S)}}},h}(a.Evented),ae=Ne,ce=Ne,ve=1e20;function Ne(u,h,c,d,_,w){this.fontSize=u||24,this.buffer=h===void 0?3:h,this.cutoff=d||.25,this.fontFamily=_||"sans-serif",this.fontWeight=w||"normal",this.radius=c||8;var S=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=S,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.d=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Int16Array(S),this.middle=Math.round(S/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function ze(u,h,c,d,_,w,S){for(var O=0;O<h;O++){for(var k=0;k<c;k++)d[k]=u[k*h+O];for(Pe(d,_,w,S,c),k=0;k<c;k++)u[k*h+O]=_[k]}for(k=0;k<c;k++){for(O=0;O<h;O++)d[O]=u[k*h+O];for(Pe(d,_,w,S,h),O=0;O<h;O++)u[k*h+O]=Math.sqrt(_[O])}}function Pe(u,h,c,d,_){c[0]=0,d[0]=-ve,d[1]=+ve;for(var w=1,S=0;w<_;w++){for(var O=(u[w]+w*w-(u[c[S]]+c[S]*c[S]))/(2*w-2*c[S]);O<=d[S];)S--,O=(u[w]+w*w-(u[c[S]]+c[S]*c[S]))/(2*w-2*c[S]);c[++S]=w,d[S]=O,d[S+1]=+ve}for(w=0,S=0;w<_;w++){for(;d[S+1]<w;)S++;h[w]=(w-c[S])*(w-c[S])+u[c[S]]}}Ne.prototype.draw=function(u){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(u,this.buffer,this.middle);for(var h=this.ctx.getImageData(0,0,this.size,this.size),c=new Uint8ClampedArray(this.size*this.size),d=0;d<this.size*this.size;d++){var _=h.data[4*d+3]/255;this.gridOuter[d]=_===1?0:_===0?ve:Math.pow(Math.max(0,.5-_),2),this.gridInner[d]=_===1?ve:_===0?0:Math.pow(Math.max(0,_-.5),2)}for(ze(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),ze(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),d=0;d<this.size*this.size;d++)c[d]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[d]-this.gridInner[d])/this.radius+this.cutoff))));return c},ae.default=ce;var Se=function(u,h){this.requestManager=u,this.localIdeographFontFamily=h,this.entries={}};Se.prototype.setURL=function(u){this.url=u},Se.prototype.getGlyphs=function(u,h){var c=this,d=[];for(var _ in u)for(var w=0,S=u[_];w<S.length;w+=1)d.push({stack:_,id:S[w]});a.asyncAll(d,function(O,k){var R=O.stack,G=O.id,W=c.entries[R];W||(W=c.entries[R]={glyphs:{},requests:{},ranges:{}});var H=W.glyphs[G];if(H===void 0){if(H=c._tinySDF(W,R,G))return W.glyphs[G]=H,void k(null,{stack:R,id:G,glyph:H});var ne=Math.floor(G/256);if(256*ne>65535)k(new Error("glyphs > 65535 not supported"));else if(W.ranges[ne])k(null,{stack:R,id:G,glyph:H});else{var te=W.requests[ne];te||(te=W.requests[ne]=[],Se.loadGlyphRange(R,ne,c.url,c.requestManager,function(ue,Y){if(Y){for(var le in Y)c._doesCharSupportLocalGlyph(+le)||(W.glyphs[+le]=Y[+le]);W.ranges[ne]=!0}for(var me=0,xe=te;me<xe.length;me+=1)(0,xe[me])(ue,Y);delete W.requests[ne]})),te.push(function(ue,Y){ue?k(ue):Y&&k(null,{stack:R,id:G,glyph:Y[G]||null})})}}else k(null,{stack:R,id:G,glyph:H})},function(O,k){if(O)h(O);else if(k){for(var R={},G=0,W=k;G<W.length;G+=1){var H=W[G],ne=H.stack,te=H.id,ue=H.glyph;(R[ne]||(R[ne]={}))[te]=ue&&{id:ue.id,bitmap:ue.bitmap.clone(),metrics:ue.metrics}}h(null,R)}})},Se.prototype._doesCharSupportLocalGlyph=function(u){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](u)||a.isChar["Hangul Syllables"](u)||a.isChar.Hiragana(u)||a.isChar.Katakana(u))},Se.prototype._tinySDF=function(u,h,c){var d=this.localIdeographFontFamily;if(d&&this._doesCharSupportLocalGlyph(c)){var _=u.tinySDF;if(!_){var w="400";/bold/i.test(h)?w="900":/medium/i.test(h)?w="500":/light/i.test(h)&&(w="200"),_=u.tinySDF=new Se.TinySDF(24,3,8,.25,d,w)}return{id:c,bitmap:new a.AlphaImage({width:30,height:30},_.draw(String.fromCharCode(c))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Se.loadGlyphRange=function(u,h,c,d,_){var w=256*h,S=w+255,O=d.transformRequest(d.normalizeGlyphsURL(c).replace("{fontstack}",u).replace("{range}",w+"-"+S),a.ResourceType.Glyphs);a.getArrayBuffer(O,function(k,R){if(k)_(k);else if(R){for(var G={},W=0,H=a.parseGlyphPBF(R);W<H.length;W+=1){var ne=H[W];G[ne.id]=ne}_(null,G)}})},Se.TinySDF=ae;var Ie=function(){this.specification=a.styleSpec.light.position};Ie.prototype.possiblyEvaluate=function(u,h){return a.sphericalToCartesian(u.expression.evaluate(h))},Ie.prototype.interpolate=function(u,h,c){return{x:a.number(u.x,h.x,c),y:a.number(u.y,h.y,c),z:a.number(u.z,h.z,c)}};var Ke=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new Ie,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),Ge=function(u){function h(c){u.call(this),this._transitionable=new a.Transitionable(Ke),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getLight=function(){return this._transitionable.serialize()},h.prototype.setLight=function(c,d){if(d===void 0&&(d={}),!this._validate(a.validateLight,c,d))for(var _ in c){var w=c[_];a.endsWith(_,"-transition")?this._transitionable.setTransition(_.slice(0,-11),w):this._transitionable.setValue(_,w)}},h.prototype.updateTransitions=function(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)},h.prototype.hasTransition=function(){return this._transitioning.hasTransition()},h.prototype.recalculate=function(c){this.properties=this._transitioning.possiblyEvaluate(c)},h.prototype._validate=function(c,d,_){return(!_||_.validate!==!1)&&a.emitValidationErrors(this,c.call(a.validateStyle,a.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},h}(a.Evented),st=function(u,h){this.width=u,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};st.prototype.getDash=function(u,h){var c=u.join(",")+String(h);return this.dashEntry[c]||(this.dashEntry[c]=this.addDash(u,h)),this.dashEntry[c]},st.prototype.getDashRanges=function(u,h,c){var d=[],_=u.length%2==1?-u[u.length-1]*c:0,w=u[0]*c,S=!0;d.push({left:_,right:w,isDash:S,zeroLength:u[0]===0});for(var O=u[0],k=1;k<u.length;k++){var R=u[k];d.push({left:_=O*c,right:w=(O+=R)*c,isDash:S=!S,zeroLength:R===0})}return d},st.prototype.addRoundDash=function(u,h,c){for(var d=h/2,_=-c;_<=c;_++)for(var w=this.width*(this.nextRow+c+_),S=0,O=u[S],k=0;k<this.width;k++){k/O.right>1&&(O=u[++S]);var R=Math.abs(k-O.left),G=Math.abs(k-O.right),W=Math.min(R,G),H=void 0,ne=_/c*(d+1);if(O.isDash){var te=d-Math.abs(ne);H=Math.sqrt(W*W+te*te)}else H=d-Math.sqrt(W*W+ne*ne);this.data[w+k]=Math.max(0,Math.min(255,H+128))}},st.prototype.addRegularDash=function(u){for(var h=u.length-1;h>=0;--h){var c=u[h],d=u[h+1];c.zeroLength?u.splice(h,1):d&&d.isDash===c.isDash&&(d.left=c.left,u.splice(h,1))}var _=u[0],w=u[u.length-1];_.isDash===w.isDash&&(_.left=w.left-this.width,w.right=_.right+this.width);for(var S=this.width*this.nextRow,O=0,k=u[O],R=0;R<this.width;R++){R/k.right>1&&(k=u[++O]);var G=Math.abs(R-k.left),W=Math.abs(R-k.right),H=Math.min(G,W);this.data[S+R]=Math.max(0,Math.min(255,(k.isDash?H:-H)+128))}},st.prototype.addDash=function(u,h){var c=h?7:0,d=2*c+1;if(this.nextRow+d>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var _=0,w=0;w<u.length;w++)_+=u[w];if(_!==0){var S=this.width/_,O=this.getDashRanges(u,this.width,S);h?this.addRoundDash(O,S,c):this.addRegularDash(O)}var k={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:_};return this.nextRow+=d,this.dirty=!0,k},st.prototype.bind=function(u){var h=u.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))};var be=function u(h,c){this.workerPool=h,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var d=this.workerPool.acquire(this.id),_=0;_<d.length;_++){var w=new u.Actor(d[_],c,this.id);w.name="Worker "+_,this.actors.push(w)}};function Je(u,h,c){var d=function(_,w){if(_)return c(_);if(w){var S=a.pick(a.extend(w,u),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(S.vectorLayers=w.vector_layers,S.vectorLayerIds=S.vectorLayers.map(function(O){return O.id})),S.tiles=h.canonicalizeTileset(S,u.url),c(null,S)}};return u.url?a.getJSON(h.transformRequest(h.normalizeSourceURL(u.url),a.ResourceType.Source),d):a.browser.frame(function(){return d(null,u)})}be.prototype.broadcast=function(u,h,c){a.asyncAll(this.actors,function(d,_){d.send(u,h,_)},c=c||function(){})},be.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},be.prototype.remove=function(){this.actors.forEach(function(u){u.remove()}),this.actors=[],this.workerPool.release(this.id)},be.Actor=a.Actor;var ht=function(u,h,c){this.bounds=a.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=h||0,this.maxzoom=c||24};ht.prototype.validateBounds=function(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]},ht.prototype.contains=function(u){var h=Math.pow(2,u.z),c=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*h),d=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*h),_=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*h),w=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*h);return u.x>=c&&u.x<_&&u.y>=d&&u.y<w};var vt=function(u){function h(c,d,_,w){if(u.call(this),this.id=c,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(d,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.load=function(){var c=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Je(this._options,this.map._requestManager,function(d,_){c._tileJSONRequest=null,c._loaded=!0,d?c.fire(new a.ErrorEvent(d)):_&&(a.extend(c,_),_.bounds&&(c.tileBounds=new ht(_.bounds,c.minzoom,c.maxzoom)),a.postTurnstileEvent(_.tiles,c.map._requestManager._customAccessToken),a.postMapLoadEvent(_.tiles,c.map._getMapId(),c.map._requestManager._skuToken,c.map._requestManager._customAccessToken),c.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),c.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},h.prototype.loaded=function(){return this._loaded},h.prototype.hasTile=function(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)},h.prototype.onAdd=function(c){this.map=c,this.load()},h.prototype.setSourceProperty=function(c){this._tileJSONRequest&&this._tileJSONRequest.cancel(),c(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},h.prototype.setTiles=function(c){var d=this;return this.setSourceProperty(function(){d._options.tiles=c}),this},h.prototype.setUrl=function(c){var d=this;return this.setSourceProperty(function(){d.url=c,d._options.url=c}),this},h.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},h.prototype.serialize=function(){return a.extend({},this._options)},h.prototype.loadTile=function(c,d){var _=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(_,a.ResourceType.Tile),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function S(O,k){return delete c.request,c.aborted?d(null):O&&O.status!==404?d(O):(k&&k.resourceTiming&&(c.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&c.setExpiryData(k),c.loadVectorData(k,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired"?c.state==="loading"?c.reloadCallback=d:c.request=c.actor.send("reloadTile",w,S.bind(this)):(c.actor=this.dispatcher.getActor(),c.request=c.actor.send("loadTile",w,S.bind(this)))},h.prototype.abortTile=function(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id},void 0)},h.prototype.unloadTile=function(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id},void 0)},h.prototype.hasTransition=function(){return!1},h}(a.Evented),Lt=function(u){function h(c,d,_,w){u.call(this),this.id=c,this.dispatcher=_,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},d),a.extend(this,a.pick(d,["url","scheme","tileSize"]))}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.load=function(){var c=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Je(this._options,this.map._requestManager,function(d,_){c._tileJSONRequest=null,c._loaded=!0,d?c.fire(new a.ErrorEvent(d)):_&&(a.extend(c,_),_.bounds&&(c.tileBounds=new ht(_.bounds,c.minzoom,c.maxzoom)),a.postTurnstileEvent(_.tiles),a.postMapLoadEvent(_.tiles,c.map._getMapId(),c.map._requestManager._skuToken),c.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),c.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},h.prototype.loaded=function(){return this._loaded},h.prototype.onAdd=function(c){this.map=c,this.load()},h.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},h.prototype.serialize=function(){return a.extend({},this._options)},h.prototype.hasTile=function(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)},h.prototype.loadTile=function(c,d){var _=this,w=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);c.request=a.getImage(this.map._requestManager.transformRequest(w,a.ResourceType.Tile),function(S,O){if(delete c.request,c.aborted)c.state="unloaded",d(null);else if(S)c.state="errored",d(S);else if(O){_.map._refreshExpiredTiles&&c.setExpiryData(O),delete O.cacheControl,delete O.expires;var k=_.map.painter.context,R=k.gl;c.texture=_.map.painter.getTileTexture(O.width),c.texture?c.texture.update(O,{useMipmap:!0}):(c.texture=new a.Texture(k,O,R.RGBA,{useMipmap:!0}),c.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&R.texParameterf(R.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),c.state="loaded",a.cacheEntryPossiblyAdded(_.dispatcher),d(null)}})},h.prototype.abortTile=function(c,d){c.request&&(c.request.cancel(),delete c.request),d()},h.prototype.unloadTile=function(c,d){c.texture&&this.map.painter.saveTileTexture(c.texture),d()},h.prototype.hasTransition=function(){return!1},h}(a.Evented),rr=function(u){function h(c,d,_,w){u.call(this,c,d,_,w),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},h.prototype.loadTile=function(c,d){var _=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(S,O){S&&(c.state="errored",d(S)),O&&(c.dem=O,c.needsHillshadePrepare=!0,c.state="loaded",d(null))}c.request=a.getImage(this.map._requestManager.transformRequest(_,a.ResourceType.Tile),function(S,O){if(delete c.request,c.aborted)c.state="unloaded",d(null);else if(S)c.state="errored",d(S);else if(O){this.map._refreshExpiredTiles&&c.setExpiryData(O),delete O.cacheControl,delete O.expires;var k=a.window.ImageBitmap&&O instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?O:a.browser.getImageData(O,1),R={uid:c.uid,coord:c.tileID,source:this.id,rawImageData:k,encoding:this.encoding};c.actor&&c.state!=="expired"||(c.actor=this.dispatcher.getActor(),c.actor.send("loadDEMTile",R,w.bind(this)))}}.bind(this)),c.neighboringTiles=this._getNeighboringTiles(c.tileID)},h.prototype._getNeighboringTiles=function(c){var d=c.canonical,_=Math.pow(2,d.z),w=(d.x-1+_)%_,S=d.x===0?c.wrap-1:c.wrap,O=(d.x+1+_)%_,k=d.x+1===_?c.wrap+1:c.wrap,R={};return R[new a.OverscaledTileID(c.overscaledZ,S,d.z,w,d.y).key]={backfilled:!1},R[new a.OverscaledTileID(c.overscaledZ,k,d.z,O,d.y).key]={backfilled:!1},d.y>0&&(R[new a.OverscaledTileID(c.overscaledZ,S,d.z,w,d.y-1).key]={backfilled:!1},R[new a.OverscaledTileID(c.overscaledZ,c.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},R[new a.OverscaledTileID(c.overscaledZ,k,d.z,O,d.y-1).key]={backfilled:!1}),d.y+1<_&&(R[new a.OverscaledTileID(c.overscaledZ,S,d.z,w,d.y+1).key]={backfilled:!1},R[new a.OverscaledTileID(c.overscaledZ,c.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},R[new a.OverscaledTileID(c.overscaledZ,k,d.z,O,d.y+1).key]={backfilled:!1}),R},h.prototype.unloadTile=function(c){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&c.actor.send("removeDEMTile",{uid:c.uid,source:this.id})},h}(Lt),Nn=function(u){function h(c,d,_,w){u.call(this),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=_.getActor(),this.setEventedParent(w),this._data=d.data,this._options=a.extend({},d),this._collectResourceTiming=d.collectResourceTiming,this._resourceTiming=[],d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;var S=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*S,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*S,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?Math.min(d.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:a.EXTENT,radius:(d.clusterRadius||50)*S,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.load=function(){var c=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(d){if(d)c.fire(new a.ErrorEvent(d));else{var _={dataType:"source",sourceDataType:"metadata"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(_.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new a.Event("data",_))}})},h.prototype.onAdd=function(c){this.map=c,this.load()},h.prototype.setData=function(c){var d=this;return this._data=c,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(_){if(_)d.fire(new a.ErrorEvent(_));else{var w={dataType:"source",sourceDataType:"content"};d._collectResourceTiming&&d._resourceTiming&&d._resourceTiming.length>0&&(w.resourceTiming=d._resourceTiming,d._resourceTiming=[]),d.fire(new a.Event("data",w))}}),this},h.prototype.getClusterExpansionZoom=function(c,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:c,source:this.id},d),this},h.prototype.getClusterChildren=function(c,d){return this.actor.send("geojson.getClusterChildren",{clusterId:c,source:this.id},d),this},h.prototype.getClusterLeaves=function(c,d,_,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:c,limit:d,offset:_},w),this},h.prototype._updateWorkerData=function(c){var d=this;this._loaded=!1;var _=a.extend({},this.workerOptions),w=this._data;typeof w=="string"?(_.request=this.map._requestManager.transformRequest(a.browser.resolveURL(w),a.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(w),this.actor.send(this.type+".loadData",_,function(S,O){d._removed||O&&O.abandoned||(d._loaded=!0,O&&O.resourceTiming&&O.resourceTiming[d.id]&&(d._resourceTiming=O.resourceTiming[d.id].slice(0)),d.actor.send(d.type+".coalesce",{source:_.source},null),c(S))})},h.prototype.loaded=function(){return this._loaded},h.prototype.loadTile=function(c,d){var _=this,w=c.actor?"reloadTile":"loadTile";c.actor=this.actor,c.request=this.actor.send(w,{type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(S,O){return delete c.request,c.unloadVectorData(),c.aborted?d(null):S?d(S):(c.loadVectorData(O,_.map.painter,w==="reloadTile"),d(null))})},h.prototype.abortTile=function(c){c.request&&(c.request.cancel(),delete c.request),c.aborted=!0},h.prototype.unloadTile=function(c){c.unloadVectorData(),this.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})},h.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},h.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},h.prototype.hasTransition=function(){return!1},h}(a.Evented),zr=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),mr=function(u){function h(c,d,_,w){u.call(this),this.id=c,this.dispatcher=_,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=d}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.load=function(c,d){var _=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(w,S){_._loaded=!0,w?_.fire(new a.ErrorEvent(w)):S&&(_.image=S,c&&(_.coordinates=c),d&&d(),_._finishLoading())})},h.prototype.loaded=function(){return this._loaded},h.prototype.updateImage=function(c){var d=this;return this.image&&c.url?(this.options.url=c.url,this.load(c.coordinates,function(){d.texture=null}),this):this},h.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},h.prototype.onAdd=function(c){this.map=c,this.load()},h.prototype.setCoordinates=function(c){var d=this;this.coordinates=c;var _=c.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(S){for(var O=1/0,k=1/0,R=-1/0,G=-1/0,W=0,H=S;W<H.length;W+=1){var ne=H[W];O=Math.min(O,ne.x),k=Math.min(k,ne.y),R=Math.max(R,ne.x),G=Math.max(G,ne.y)}var te=Math.max(R-O,G-k),ue=Math.max(0,Math.floor(-Math.log(te)/Math.LN2)),Y=Math.pow(2,ue);return new a.CanonicalTileID(ue,Math.floor((O+R)/2*Y),Math.floor((k+G)/2*Y))}(_),this.minzoom=this.maxzoom=this.tileID.z;var w=_.map(function(S){return d.tileID.getTilePoint(S)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},h.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var c=this.map.painter.context,d=c.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,zr.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(c,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},h.prototype.loadTile=function(c,d){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},d(null)):(c.state="errored",d(null))},h.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},h.prototype.hasTransition=function(){return!1},h}(a.Evented),Jn=function(u){function h(c,d,_,w){u.call(this,c,d,_,w),this.roundZoom=!0,this.type="video",this.options=d}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.load=function(){var c=this;this._loaded=!1;var d=this.options;this.urls=[];for(var _=0,w=d.urls;_<w.length;_+=1)this.urls.push(this.map._requestManager.transformRequest(w[_],a.ResourceType.Source).url);a.getVideo(this.urls,function(S,O){c._loaded=!0,S?c.fire(new a.ErrorEvent(S)):O&&(c.video=O,c.video.loop=!0,c.video.setAttribute("playsinline",""),c.video.addEventListener("playing",function(){c.map.triggerRepaint()}),c.map&&c.video.play(),c._finishLoading())})},h.prototype.pause=function(){this.video&&this.video.pause()},h.prototype.play=function(){this.video&&this.video.play()},h.prototype.seek=function(c){if(this.video){var d=this.video.seekable;c<d.start(0)||c>d.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+d.start(0)+" and "+d.end(0)+"-second mark."))):this.video.currentTime=c}},h.prototype.getVideo=function(){return this.video},h.prototype.onAdd=function(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},h.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var c=this.map.painter.context,d=c.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,zr.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(c,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},h.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},h.prototype.hasTransition=function(){return this.video&&!this.video.paused},h}(mr),Fr=function(u){function h(c,d,_,w){u.call(this,c,d,_,w),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(function(S){return!Array.isArray(S)||S.length!==2||S.some(function(O){return typeof O!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+c,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+c,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+c,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+c,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+c,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},h.prototype.getCanvas=function(){return this.canvas},h.prototype.onAdd=function(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()},h.prototype.onRemove=function(){this.pause()},h.prototype.prepare=function(){var c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var d=this.map.painter.context,_=d.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,zr.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(d,this.canvas,_.RGBA,{premultiply:!0}),this.tiles){var S=this.tiles[w];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture)}}},h.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},h.prototype.hasTransition=function(){return this._playing},h.prototype._hasInvalidDimensions=function(){for(var c=0,d=[this.canvas.width,this.canvas.height];c<d.length;c+=1){var _=d[c];if(isNaN(_)||_<=0)return!0}return!1},h}(mr),$i={vector:vt,raster:Lt,"raster-dem":rr,geojson:Nn,video:Jn,image:mr,canvas:Fr};function qr(u,h){var c=a.identity([]);return a.translate(c,c,[1,1,0]),a.scale(c,c,[.5*u.width,.5*u.height,1]),a.multiply(c,c,u.calculatePosMatrix(h.toUnwrapped()))}function kr(u,h,c,d,_,w){var S=function(ue,Y,le){if(ue)for(var me=0,xe=ue;me<xe.length;me+=1){var Ae=Y[xe[me]];if(Ae&&Ae.source===le&&Ae.type==="fill-extrusion")return!0}else for(var Me in Y){var ke=Y[Me];if(ke.source===le&&ke.type==="fill-extrusion")return!0}return!1}(_&&_.layers,h,u.id),O=w.maxPitchScaleFactor(),k=u.tilesIn(d,O,S);k.sort(qn);for(var R=[],G=0,W=k;G<W.length;G+=1){var H=W[G];R.push({wrappedTileID:H.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(h,c,u._state,H.queryGeometry,H.cameraQueryGeometry,H.scale,_,w,O,qr(u.transform,H.tileID))})}var ne=function(ue){for(var Y={},le={},me=0,xe=ue;me<xe.length;me+=1){var Ae=xe[me],Me=Ae.queryResults,ke=Ae.wrappedTileID,je=le[ke]=le[ke]||{};for(var it in Me)for(var rt=Me[it],gt=je[it]=je[it]||{},Rt=Y[it]=Y[it]||[],Ut=0,Bt=rt;Ut<Bt.length;Ut+=1){var Cr=Bt[Ut];gt[Cr.featureIndex]||(gt[Cr.featureIndex]=!0,Rt.push(Cr))}}return Y}(R);for(var te in ne)ne[te].forEach(function(ue){var Y=ue.feature,le=u.getFeatureState(Y.layer["source-layer"],Y.id);Y.source=Y.layer.source,Y.layer["source-layer"]&&(Y.sourceLayer=Y.layer["source-layer"]),Y.state=le});return ne}function qn(u,h){var c=u.tileID,d=h.tileID;return c.overscaledZ-d.overscaledZ||c.canonical.y-d.canonical.y||c.wrap-d.wrap||c.canonical.x-d.canonical.x}var Mr=function(u,h){this.max=u,this.onRemove=h,this.reset()};Mr.prototype.reset=function(){for(var u in this.data)for(var h=0,c=this.data[u];h<c.length;h+=1){var d=c[h];d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value)}return this.data={},this.order=[],this},Mr.prototype.add=function(u,h,c){var d=this,_=u.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);var w={value:h,timeout:void 0};if(c!==void 0&&(w.timeout=setTimeout(function(){d.remove(u,w)},c)),this.data[_].push(w),this.order.push(_),this.order.length>this.max){var S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this},Mr.prototype.has=function(u){return u.wrapped().key in this.data},Mr.prototype.getAndRemove=function(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null},Mr.prototype._getAndRemoveByKey=function(u){var h=this.data[u].shift();return h.timeout&&clearTimeout(h.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),h.value},Mr.prototype.getByKey=function(u){var h=this.data[u];return h?h[0].value:null},Mr.prototype.get=function(u){return this.has(u)?this.data[u.wrapped().key][0].value:null},Mr.prototype.remove=function(u,h){if(!this.has(u))return this;var c=u.wrapped().key,d=h===void 0?0:this.data[c].indexOf(h),_=this.data[c][d];return this.data[c].splice(d,1),_.timeout&&clearTimeout(_.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(_.value),this.order.splice(this.order.indexOf(c),1),this},Mr.prototype.setMaxSize=function(u){for(this.max=u;this.order.length>this.max;){var h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this},Mr.prototype.filter=function(u){var h=[];for(var c in this.data)for(var d=0,_=this.data[c];d<_.length;d+=1){var w=_[d];u(w.value)||h.push(w)}for(var S=0,O=h;S<O.length;S+=1){var k=O[S];this.remove(k.value.tileID,k)}};var Mn=function(u,h,c){this.context=u;var d=u.gl;this.buffer=d.createBuffer(),this.dynamicDraw=Boolean(c),this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer};Mn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Mn.prototype.updateData=function(u){var h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)},Mn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var hi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Wn=function(u,h,c,d){this.length=h.length,this.attributes=c,this.itemSize=h.bytesPerElement,this.dynamicDraw=d,this.context=u;var _=u.gl;this.buffer=_.createBuffer(),u.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer};Wn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Wn.prototype.updateData=function(u){var h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,u.arrayBuffer)},Wn.prototype.enableAttributes=function(u,h){for(var c=0;c<this.attributes.length;c++){var d=h.attributes[this.attributes[c].name];d!==void 0&&u.enableVertexAttribArray(d)}},Wn.prototype.setVertexAttribPointers=function(u,h,c){for(var d=0;d<this.attributes.length;d++){var _=this.attributes[d],w=h.attributes[_.name];w!==void 0&&u.vertexAttribPointer(w,_.components,u[hi[_.type]],!1,this.itemSize,_.offset+this.itemSize*(c||0))}},Wn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var K=function(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};K.prototype.get=function(){return this.current},K.prototype.set=function(u){},K.prototype.getDefault=function(){return this.default},K.prototype.setDefault=function(){this.set(this.default)};var ye=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return a.Color.transparent},h.prototype.set=function(c){var d=this.current;(c.r!==d.r||c.g!==d.g||c.b!==d.b||c.a!==d.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)},h}(K),Re=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return 1},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)},h}(K),qe=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return 0},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)},h}(K),We=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return[!0,!0,!0,!0]},h.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)},h}(K),nt=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return!0},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)},h}(K),mt=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return 255},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)},h}(K),et=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},h.prototype.set=function(c){var d=this.current;(c.func!==d.func||c.ref!==d.ref||c.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)},h}(K),ut=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){var c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]},h.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)},h}(K),Qe=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;c?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=c,this.dirty=!1}},h}(K),Ot=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return[0,1]},h.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)},h}(K),bt=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;c?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=c,this.dirty=!1}},h}(K),Dt=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.LESS},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)},h}(K),jt=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;c?d.enable(d.BLEND):d.disable(d.BLEND),this.current=c,this.dirty=!1}},h}(K),yr=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){var c=this.gl;return[c.ONE,c.ZERO]},h.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)},h}(K),jr=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return a.Color.transparent},h.prototype.set=function(c){var d=this.current;(c.r!==d.r||c.g!==d.g||c.b!==d.b||c.a!==d.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)},h}(K),Lr=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.FUNC_ADD},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)},h}(K),Qr=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;c?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=c,this.dirty=!1}},h}(K),Qn=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.BACK},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)},h}(K),Gi=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.CCW},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)},h}(K),_o=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)},h}(K),ei=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.TEXTURE0},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)},h}(K),Ri=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){var c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]},h.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)},h}(K),In=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,c),this.current=c,this.dirty=!1}},h}(K),fi=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,c),this.current=c,this.dirty=!1}},h}(K),ss=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.bindTexture(d.TEXTURE_2D,c),this.current=c,this.dirty=!1}},h}(K),Xo=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}},h}(K),ls=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){var d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1},h}(K),ma=function(u){function h(c){u.call(this,c),this.vao=c.extVertexArrayObject}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)},h}(K),pn=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return 4},h.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}},h}(K),Fo=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}},h}(K),Il=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}},h}(K),Sn=function(u){function h(c,d){u.call(this,c),this.context=c,this.parent=d}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h}(K),N=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.setDirty=function(){this.dirty=!0},h.prototype.set=function(c){if(c!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}},h}(Sn),F=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.set=function(c){if(c!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,c),this.current=c,this.dirty=!1}},h}(Sn),U=function(u,h,c,d){this.context=u,this.width=h,this.height=c;var _=this.framebuffer=u.gl.createFramebuffer();this.colorAttachment=new N(u,_),d&&(this.depthAttachment=new F(u,_))};U.prototype.destroy=function(){var u=this.context.gl,h=this.colorAttachment.get();if(h&&u.deleteTexture(h),this.depthAttachment){var c=this.depthAttachment.get();c&&u.deleteRenderbuffer(c)}u.deleteFramebuffer(this.framebuffer)};var Z=function(u,h,c){this.func=u,this.mask=h,this.range=c};Z.ReadOnly=!1,Z.ReadWrite=!0,Z.disabled=new Z(519,Z.ReadOnly,[0,1]);var Q=function(u,h,c,d,_,w){this.test=u,this.ref=h,this.mask=c,this.fail=d,this.depthFail=_,this.pass=w};Q.disabled=new Q({func:519,mask:0},0,0,7680,7680,7680);var pe=function(u,h,c){this.blendFunction=u,this.blendColor=h,this.mask=c};pe.disabled=new pe(pe.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),pe.unblended=new pe(pe.Replace,a.Color.transparent,[!0,!0,!0,!0]),pe.alphaBlended=new pe([1,771],a.Color.transparent,[!0,!0,!0,!0]);var de=function(u,h,c){this.enable=u,this.mode=h,this.frontFace=c};de.disabled=new de(!1,1029,2305),de.backCCW=new de(!0,1029,2305);var $=function(u){this.gl=u,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ye(this),this.clearDepth=new Re(this),this.clearStencil=new qe(this),this.colorMask=new We(this),this.depthMask=new nt(this),this.stencilMask=new mt(this),this.stencilFunc=new et(this),this.stencilOp=new ut(this),this.stencilTest=new Qe(this),this.depthRange=new Ot(this),this.depthTest=new bt(this),this.depthFunc=new Dt(this),this.blend=new jt(this),this.blendFunc=new yr(this),this.blendColor=new jr(this),this.blendEquation=new Lr(this),this.cullFace=new Qr(this),this.cullFaceSide=new Qn(this),this.frontFace=new Gi(this),this.program=new _o(this),this.activeTexture=new ei(this),this.viewport=new Ri(this),this.bindFramebuffer=new In(this),this.bindRenderbuffer=new fi(this),this.bindTexture=new ss(this),this.bindVertexBuffer=new Xo(this),this.bindElementBuffer=new ls(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ma(this),this.pixelStoreUnpack=new pn(this),this.pixelStoreUnpackPremultiplyAlpha=new Fo(this),this.pixelStoreUnpackFlipY=new Il(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=u.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(u.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)};$.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},$.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},$.prototype.createIndexBuffer=function(u,h){return new Mn(this,u,h)},$.prototype.createVertexBuffer=function(u,h,c){return new Wn(this,u,h,c)},$.prototype.createRenderbuffer=function(u,h,c){var d=this.gl,_=d.createRenderbuffer();return this.bindRenderbuffer.set(_),d.renderbufferStorage(d.RENDERBUFFER,u,h,c),this.bindRenderbuffer.set(null),_},$.prototype.createFramebuffer=function(u,h,c){return new U(this,u,h,c)},$.prototype.clear=function(u){var h=u.color,c=u.depth,d=this.gl,_=0;h&&(_|=d.COLOR_BUFFER_BIT,this.clearColor.set(h),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(_|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),d.clear(_)},$.prototype.setCullFace=function(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))},$.prototype.setDepthMode=function(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)},$.prototype.setStencilMode=function(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)},$.prototype.setColorMode=function(u){a.deepEqual(u.blendFunction,pe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)},$.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ie=function(u){function h(c,d,_){var w=this;u.call(this),this.id=c,this.dispatcher=_,this.on("data",function(S){S.dataType==="source"&&S.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&S.dataType==="source"&&S.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(S,O,k,R){var G=new $i[O.type](S,O,k,R);if(G.id!==S)throw new Error("Expected Source id to be "+S+" instead of "+G.id);return a.bindAll(["load","abort","unload","serialize","prepare"],G),G}(c,d,_,this),this._tiles={},this._cache=new Mr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.onAdd=function(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(c)},h.prototype.onRemove=function(c){this._source&&this._source.onRemove&&this._source.onRemove(c)},h.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var c in this._tiles){var d=this._tiles[c];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0},h.prototype.getSource=function(){return this._source},h.prototype.pause=function(){this._paused=!0},h.prototype.resume=function(){if(this._paused){var c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform)}},h.prototype._loadTile=function(c,d){return this._source.loadTile(c,d)},h.prototype._unloadTile=function(c){if(this._source.unloadTile)return this._source.unloadTile(c,function(){})},h.prototype._abortTile=function(c){if(this._source.abortTile)return this._source.abortTile(c,function(){})},h.prototype.serialize=function(){return this._source.serialize()},h.prototype.prepare=function(c){for(var d in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var _=this._tiles[d];_.upload(c),_.prepare(this.map.style.imageManager)}},h.prototype.getIds=function(){return a.values(this._tiles).map(function(c){return c.tileID}).sort(_e).map(function(c){return c.key})},h.prototype.getRenderableIds=function(c){var d=this,_=[];for(var w in this._tiles)this._isIdRenderable(w,c)&&_.push(this._tiles[w]);return c?_.sort(function(S,O){var k=S.tileID,R=O.tileID,G=new a.Point(k.canonical.x,k.canonical.y)._rotate(d.transform.angle),W=new a.Point(R.canonical.x,R.canonical.y)._rotate(d.transform.angle);return k.overscaledZ-R.overscaledZ||W.y-G.y||W.x-G.x}).map(function(S){return S.tileID.key}):_.map(function(S){return S.tileID}).sort(_e).map(function(S){return S.key})},h.prototype.hasRenderableParent=function(c){var d=this.findLoadedParent(c,0);return!!d&&this._isIdRenderable(d.tileID.key)},h.prototype._isIdRenderable=function(c,d){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(d||!this._tiles[c].holdingForFade())},h.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var c in this._cache.reset(),this._tiles)this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")},h.prototype._reloadTile=function(c,d){var _=this._tiles[c];_&&(_.state!=="loading"&&(_.state=d),this._loadTile(_,this._tileLoaded.bind(this,_,c,d)))},h.prototype._tileLoaded=function(c,d,_,w){if(w)return c.state="errored",void(w.status!==404?this._source.fire(new a.ErrorEvent(w,{tile:c})):this.update(this.transform));c.timeAdded=a.browser.now(),_==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(d,c),this.getSource().type==="raster-dem"&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:c,coord:c.tileID}))},h.prototype._backfillDEM=function(c){for(var d=this.getRenderableIds(),_=0;_<d.length;_++){var w=d[_];if(c.neighboringTiles&&c.neighboringTiles[w]){var S=this.getTileByID(w);O(c,S),O(S,c)}}function O(k,R){k.needsHillshadePrepare=!0;var G=R.tileID.canonical.x-k.tileID.canonical.x,W=R.tileID.canonical.y-k.tileID.canonical.y,H=Math.pow(2,k.tileID.canonical.z),ne=R.tileID.key;G===0&&W===0||Math.abs(W)>1||(Math.abs(G)>1&&(Math.abs(G+H)===1?G+=H:Math.abs(G-H)===1&&(G-=H)),R.dem&&k.dem&&(k.dem.backfillBorder(R.dem,G,W),k.neighboringTiles&&k.neighboringTiles[ne]&&(k.neighboringTiles[ne].backfilled=!0)))}},h.prototype.getTile=function(c){return this.getTileByID(c.key)},h.prototype.getTileByID=function(c){return this._tiles[c]},h.prototype._retainLoadedChildren=function(c,d,_,w){for(var S in this._tiles){var O=this._tiles[S];if(!(w[S]||!O.hasData()||O.tileID.overscaledZ<=d||O.tileID.overscaledZ>_)){for(var k=O.tileID;O&&O.tileID.overscaledZ>d+1;){var R=O.tileID.scaledTo(O.tileID.overscaledZ-1);(O=this._tiles[R.key])&&O.hasData()&&(k=R)}for(var G=k;G.overscaledZ>d;)if(c[(G=G.scaledTo(G.overscaledZ-1)).key]){w[k.key]=k;break}}}},h.prototype.findLoadedParent=function(c,d){if(c.key in this._loadedParentTiles){var _=this._loadedParentTiles[c.key];return _&&_.tileID.overscaledZ>=d?_:null}for(var w=c.overscaledZ-1;w>=d;w--){var S=c.scaledTo(w),O=this._getLoadedTile(S);if(O)return O}},h.prototype._getLoadedTile=function(c){var d=this._tiles[c.key];return d&&d.hasData()?d:this._cache.getByKey(c.wrapped().key)},h.prototype.updateCacheSize=function(c){var d=Math.ceil(c.width/this._source.tileSize)+1,_=Math.ceil(c.height/this._source.tileSize)+1,w=Math.floor(d*_*5),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(S)},h.prototype.handleWrapJump=function(c){var d=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);if(this._prevLng=c,d){var _={};for(var w in this._tiles){var S=this._tiles[w];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+d),_[S.tileID.key]=S}for(var O in this._tiles=_,this._timers)clearTimeout(this._timers[O]),delete this._timers[O];for(var k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}},h.prototype.update=function(c){var d=this;if(this.transform=c,this._sourceLoaded&&!this._paused){var _;this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?_=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(je){return new a.OverscaledTileID(je.canonical.z,je.wrap,je.canonical.z,je.canonical.x,je.canonical.y)}):(_=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(_=_.filter(function(je){return d._source.hasTile(je)}))):_=[];var w=c.coveringZoomLevel(this._source),S=Math.max(w-h.maxOverzooming,this._source.minzoom),O=Math.max(w+h.maxUnderzooming,this._source.minzoom),k=this._updateRetainedTiles(_,w);if($e(this._source.type)){for(var R={},G={},W=0,H=Object.keys(k);W<H.length;W+=1){var ne=H[W],te=k[ne],ue=this._tiles[ne];if(ue&&!(ue.fadeEndTime&&ue.fadeEndTime<=a.browser.now())){var Y=this.findLoadedParent(te,S);Y&&(this._addTile(Y.tileID),R[Y.tileID.key]=Y.tileID),G[ne]=te}}for(var le in this._retainLoadedChildren(G,w,O,k),R)k[le]||(this._coveredTiles[le]=!0,k[le]=R[le])}for(var me in k)this._tiles[me].clearFadeHold();for(var xe=0,Ae=a.keysDifference(this._tiles,k);xe<Ae.length;xe+=1){var Me=Ae[xe],ke=this._tiles[Me];ke.hasSymbolBuckets&&!ke.holdingForFade()?ke.setHoldDuration(this.map._fadeDuration):ke.hasSymbolBuckets&&!ke.symbolFadeFinished()||this._removeTile(Me)}this._updateLoadedParentTileCache()}},h.prototype.releaseSymbolFadeTiles=function(){for(var c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(c)},h.prototype._updateRetainedTiles=function(c,d){for(var _={},w={},S=Math.max(d-h.maxOverzooming,this._source.minzoom),O=Math.max(d+h.maxUnderzooming,this._source.minzoom),k={},R=0,G=c;R<G.length;R+=1){var W=G[R],H=this._addTile(W);_[W.key]=W,H.hasData()||d<this._source.maxzoom&&(k[W.key]=W)}this._retainLoadedChildren(k,d,O,_);for(var ne=0,te=c;ne<te.length;ne+=1){var ue=te[ne],Y=this._tiles[ue.key];if(!Y.hasData()){if(d+1>this._source.maxzoom){var le=ue.children(this._source.maxzoom)[0],me=this.getTile(le);if(me&&me.hasData()){_[le.key]=le;continue}}else{var xe=ue.children(this._source.maxzoom);if(_[xe[0].key]&&_[xe[1].key]&&_[xe[2].key]&&_[xe[3].key])continue}for(var Ae=Y.wasRequested(),Me=ue.overscaledZ-1;Me>=S;--Me){var ke=ue.scaledTo(Me);if(w[ke.key]||(w[ke.key]=!0,!(Y=this.getTile(ke))&&Ae&&(Y=this._addTile(ke)),Y&&(_[ke.key]=ke,Ae=Y.wasRequested(),Y.hasData())))break}}}return _},h.prototype._updateLoadedParentTileCache=function(){for(var c in this._loadedParentTiles={},this._tiles){for(var d=[],_=void 0,w=this._tiles[c].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){_=this._loadedParentTiles[w.key];break}d.push(w.key);var S=w.scaledTo(w.overscaledZ-1);if(_=this._getLoadedTile(S))break;w=S}for(var O=0,k=d;O<k.length;O+=1)this._loadedParentTiles[k[O]]=_}},h.prototype._addTile=function(c){var d=this._tiles[c.key];if(d)return d;(d=this._cache.getAndRemove(c))&&(this._setTileReloadTimer(c.key,d),d.tileID=c,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[c.key]&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,d)));var _=Boolean(d);return _||(d=new a.Tile(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,c.key,d.state))),d?(d.uses++,this._tiles[c.key]=d,_||this._source.fire(new a.Event("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null},h.prototype._setTileReloadTimer=function(c,d){var _=this;c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]);var w=d.getExpiryTimeout();w&&(this._timers[c]=setTimeout(function(){_._reloadTile(c,"expired"),delete _._timers[c]},w))},h.prototype._removeTile=function(c){var d=this._tiles[c];d&&(d.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))},h.prototype.clearTiles=function(){for(var c in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(c);this._cache.reset()},h.prototype.tilesIn=function(c,d,_){var w=this,S=[],O=this.transform;if(!O)return S;for(var k=_?O.getCameraQueryGeometry(c):c,R=c.map(function(Me){return O.pointCoordinate(Me)}),G=k.map(function(Me){return O.pointCoordinate(Me)}),W=this.getIds(),H=1/0,ne=1/0,te=-1/0,ue=-1/0,Y=0,le=G;Y<le.length;Y+=1){var me=le[Y];H=Math.min(H,me.x),ne=Math.min(ne,me.y),te=Math.max(te,me.x),ue=Math.max(ue,me.y)}for(var xe=function(Me){var ke=w._tiles[W[Me]];if(!ke.holdingForFade()){var je=ke.tileID,it=Math.pow(2,O.zoom-ke.tileID.overscaledZ),rt=d*ke.queryPadding*a.EXTENT/ke.tileSize/it,gt=[je.getTilePoint(new a.MercatorCoordinate(H,ne)),je.getTilePoint(new a.MercatorCoordinate(te,ue))];if(gt[0].x-rt<a.EXTENT&&gt[0].y-rt<a.EXTENT&&gt[1].x+rt>=0&&gt[1].y+rt>=0){var Rt=R.map(function(Bt){return je.getTilePoint(Bt)}),Ut=G.map(function(Bt){return je.getTilePoint(Bt)});S.push({tile:ke,tileID:je,queryGeometry:Rt,cameraQueryGeometry:Ut,scale:it})}}},Ae=0;Ae<W.length;Ae++)xe(Ae);return S},h.prototype.getVisibleCoordinates=function(c){for(var d=this,_=this.getRenderableIds(c).map(function(k){return d._tiles[k].tileID}),w=0,S=_;w<S.length;w+=1){var O=S[w];O.posMatrix=this.transform.calculatePosMatrix(O.toUnwrapped())}return _},h.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if($e(this._source.type))for(var c in this._tiles){var d=this._tiles[c];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=a.browser.now())return!0}return!1},h.prototype.setFeatureState=function(c,d,_){this._state.updateState(c=c||"_geojsonTileLayer",d,_)},h.prototype.removeFeatureState=function(c,d,_){this._state.removeFeatureState(c=c||"_geojsonTileLayer",d,_)},h.prototype.getFeatureState=function(c,d){return this._state.getState(c=c||"_geojsonTileLayer",d)},h.prototype.setDependencies=function(c,d,_){var w=this._tiles[c];w&&w.setDependencies(d,_)},h.prototype.reloadTilesForDependencies=function(c,d){for(var _ in this._tiles)this._tiles[_].hasDependency(c,d)&&this._reloadTile(_,"reloading");this._cache.filter(function(w){return!w.hasDependency(c,d)})},h}(a.Evented);function _e(u,h){var c=Math.abs(2*u.wrap)-+(u.wrap<0),d=Math.abs(2*h.wrap)-+(h.wrap<0);return u.overscaledZ-h.overscaledZ||d-c||h.canonical.y-u.canonical.y||h.canonical.x-u.canonical.x}function $e(u){return u==="raster"||u==="image"||u==="video"}function Ze(){return new a.window.Worker(bf.workerUrl)}ie.maxOverzooming=10,ie.maxUnderzooming=3;var Ce="mapboxgl_preloaded_worker_pool",Ue=function(){this.active={}};Ue.prototype.acquire=function(u){if(!this.workers)for(this.workers=[];this.workers.length<Ue.workerCount;)this.workers.push(new Ze);return this.active[u]=!0,this.workers.slice()},Ue.prototype.release=function(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(function(h){h.terminate()}),this.workers=null)},Ue.prototype.isPreloaded=function(){return!!this.active[Ce]},Ue.prototype.numActive=function(){return Object.keys(this.active).length};var St,_t=Math.floor(a.browser.hardwareConcurrency/2);function Le(){return St||(St=new Ue),St}function pt(u,h){var c={};for(var d in u)d!=="ref"&&(c[d]=u[d]);return a.refProperties.forEach(function(_){_ in h&&(c[_]=h[_])}),c}function lt(u){u=u.slice();for(var h=Object.create(null),c=0;c<u.length;c++)h[u[c].id]=u[c];for(var d=0;d<u.length;d++)"ref"in u[d]&&(u[d]=pt(u[d],h[u[d].ref]));return u}Ue.workerCount=Math.max(Math.min(_t,6),1);var De={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function fe(u,h,c){c.push({command:De.addSource,args:[u,h[u]]})}function Ee(u,h,c){h.push({command:De.removeSource,args:[u]}),c[u]=!0}function He(u,h,c,d){Ee(u,c,d),fe(u,h,c)}function $t(u,h,c){var d;for(d in u[c])if(u[c].hasOwnProperty(d)&&d!=="data"&&!a.deepEqual(u[c][d],h[c][d]))return!1;for(d in h[c])if(h[c].hasOwnProperty(d)&&d!=="data"&&!a.deepEqual(u[c][d],h[c][d]))return!1;return!0}function Ht(u,h,c,d,_,w){var S;for(S in h=h||{},u=u||{})u.hasOwnProperty(S)&&(a.deepEqual(u[S],h[S])||c.push({command:w,args:[d,S,h[S],_]}));for(S in h)h.hasOwnProperty(S)&&!u.hasOwnProperty(S)&&(a.deepEqual(u[S],h[S])||c.push({command:w,args:[d,S,h[S],_]}))}function Qt(u){return u.id}function Xt(u,h){return u[h.id]=h,u}var ti=function(u,h){this.reset(u,h)};ti.prototype.reset=function(u,h){this.points=u||[],this._distances=[0];for(var c=1;c<this.points.length;c++)this._distances[c]=this._distances[c-1]+this.points[c].dist(this.points[c-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding},ti.prototype.lerp=function(u){if(this.points.length===1)return this.points[0];u=a.clamp(u,0,1);for(var h=1,c=this._distances[h],d=u*this.paddedLength+this.padding;c<d&&h<this._distances.length;)c=this._distances[++h];var _=h-1,w=this._distances[_],S=c-w,O=S>0?(d-w)/S:0;return this.points[_].mult(1-O).add(this.points[h].mult(O))};var er=function(u,h,c){var d=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(u/c),this.yCellCount=Math.ceil(h/c);for(var w=0;w<this.xCellCount*this.yCellCount;w++)d.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=h,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0};function yn(u,h,c,d,_){var w=a.create();return h?(a.scale(w,w,[1/_,1/_,1]),c||a.rotateZ(w,w,d.angle)):a.multiply(w,d.labelPlaneMatrix,u),w}function $r(u,h,c,d,_){if(h){var w=a.clone(u);return a.scale(w,w,[_,_,1]),c||a.rotateZ(w,w,-d.angle),w}return d.glCoordMatrix}function vr(u,h){var c=[u.x,u.y,0,1];xi(c,c,h);var d=c[3];return{point:new a.Point(c[0]/d,c[1]/d),signedDistanceFromCamera:d}}function Br(u,h){return .5+u/h*.5}function no(u,h){var c=u[0]/u[3],d=u[1]/u[3];return c>=-h[0]&&c<=h[0]&&d>=-h[1]&&d<=h[1]}function zc(u,h,c,d,_,w,S,O){var k=d?u.textSizeData:u.iconSizeData,R=a.evaluateSizeForZoom(k,c.transform.zoom),G=[256/c.width*2+1,256/c.height*2+1],W=d?u.text.dynamicLayoutVertexArray:u.icon.dynamicLayoutVertexArray;W.clear();for(var H=u.lineVertexArray,ne=d?u.text.placedSymbolArray:u.icon.placedSymbolArray,te=c.transform.width/c.transform.height,ue=!1,Y=0;Y<ne.length;Y++){var le=ne.get(Y);if(le.hidden||le.writingMode===a.WritingMode.vertical&&!ue)qi(le.numGlyphs,W);else{ue=!1;var me=[le.anchorX,le.anchorY,0,1];if(a.transformMat4(me,me,h),no(me,G)){var xe=Br(c.transform.cameraToCenterDistance,me[3]),Ae=a.evaluateSizeForFeature(k,R,le),Me=S?Ae/xe:Ae*xe,ke=new a.Point(le.anchorX,le.anchorY),je=vr(ke,_).point,it={},rt=md(le,Me,!1,O,h,_,w,u.glyphOffsetArray,H,W,je,ke,it,te);ue=rt.useVertical,(rt.notEnoughRoom||ue||rt.needsFlipping&&md(le,Me,!0,O,h,_,w,u.glyphOffsetArray,H,W,je,ke,it,te).notEnoughRoom)&&qi(le.numGlyphs,W)}else qi(le.numGlyphs,W)}}d?u.text.dynamicLayoutVertexBuffer.updateData(W):u.icon.dynamicLayoutVertexBuffer.updateData(W)}function _i(u,h,c,d,_,w,S,O,k,R,G){var W=O.glyphStartIndex+O.numGlyphs,H=O.lineStartIndex,ne=O.lineStartIndex+O.lineLength,te=h.getoffsetX(O.glyphStartIndex),ue=h.getoffsetX(W-1),Y=Rn(u*te,c,d,_,w,S,O.segment,H,ne,k,R,G);if(!Y)return null;var le=Rn(u*ue,c,d,_,w,S,O.segment,H,ne,k,R,G);return le?{first:Y,last:le}:null}function io(u,h,c,d){return u===a.WritingMode.horizontal&&Math.abs(c.y-h.y)>Math.abs(c.x-h.x)*d?{useVertical:!0}:(u===a.WritingMode.vertical?h.y<c.y:h.x>c.x)?{needsFlipping:!0}:null}function md(u,h,c,d,_,w,S,O,k,R,G,W,H,ne){var te,ue=h/24,Y=u.lineOffsetX*ue,le=u.lineOffsetY*ue;if(u.numGlyphs>1){var me=u.glyphStartIndex+u.numGlyphs,xe=u.lineStartIndex,Ae=u.lineStartIndex+u.lineLength,Me=_i(ue,O,Y,le,c,G,W,u,k,w,H);if(!Me)return{notEnoughRoom:!0};var ke=vr(Me.first.point,S).point,je=vr(Me.last.point,S).point;if(d&&!c){var it=io(u.writingMode,ke,je,ne);if(it)return it}te=[Me.first];for(var rt=u.glyphStartIndex+1;rt<me-1;rt++)te.push(Rn(ue*O.getoffsetX(rt),Y,le,c,G,W,u.segment,xe,Ae,k,w,H));te.push(Me.last)}else{if(d&&!c){var gt=vr(W,_).point,Rt=u.lineStartIndex+u.segment+1,Ut=new a.Point(k.getx(Rt),k.gety(Rt)),Bt=vr(Ut,_),Cr=Bt.signedDistanceFromCamera>0?Bt.point:Fc(W,Ut,gt,1,_),xt=io(u.writingMode,gt,Cr,ne);if(xt)return xt}var Jt=Rn(ue*O.getoffsetX(u.glyphStartIndex),Y,le,c,G,W,u.segment,u.lineStartIndex,u.lineStartIndex+u.lineLength,k,w,H);if(!Jt)return{notEnoughRoom:!0};te=[Jt]}for(var sr=0,Yt=te;sr<Yt.length;sr+=1){var Kt=Yt[sr];a.addDynamicAttributes(R,Kt.point,Kt.angle)}return{}}function Fc(u,h,c,d,_){var w=vr(u.add(u.sub(h)._unit()),_).point,S=c.sub(w);return c.add(S._mult(d/S.mag()))}function Rn(u,h,c,d,_,w,S,O,k,R,G,W){var H=d?u-h:u+h,ne=H>0?1:-1,te=0;d&&(ne*=-1,te=Math.PI),ne<0&&(te+=Math.PI);for(var ue=ne>0?O+S:O+S+1,Y=_,le=_,me=0,xe=0,Ae=Math.abs(H),Me=[];me+xe<=Ae;){if((ue+=ne)<O||ue>=k)return null;if(le=Y,Me.push(Y),(Y=W[ue])===void 0){var ke=new a.Point(R.getx(ue),R.gety(ue)),je=vr(ke,G);if(je.signedDistanceFromCamera>0)Y=W[ue]=je.point;else{var it=ue-ne;Y=Fc(me===0?w:new a.Point(R.getx(it),R.gety(it)),ke,le,Ae-me+1,G)}}me+=xe,xe=le.dist(Y)}var rt=(Ae-me)/xe,gt=Y.sub(le),Rt=gt.mult(rt)._add(le);Rt._add(gt._unit()._perp()._mult(c*ne));var Ut=te+Math.atan2(Y.y-le.y,Y.x-le.x);return Me.push(Rt),{point:Rt,angle:Ut,path:Me}}er.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},er.prototype.insert=function(u,h,c,d,_){this._forEachCell(h,c,d,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(h),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(_)},er.prototype.insertCircle=function(u,h,c,d){this._forEachCell(h-d,c-d,h+d,c+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(h),this.circles.push(c),this.circles.push(d)},er.prototype._insertBoxCell=function(u,h,c,d,_,w){this.boxCells[_].push(w)},er.prototype._insertCircleCell=function(u,h,c,d,_,w){this.circleCells[_].push(w)},er.prototype._query=function(u,h,c,d,_,w){if(c<0||u>this.width||d<0||h>this.height)return!_&&[];var S=[];if(u<=0&&h<=0&&this.width<=c&&this.height<=d){if(_)return!0;for(var O=0;O<this.boxKeys.length;O++)S.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(var k=0;k<this.circleKeys.length;k++){var R=this.circles[3*k],G=this.circles[3*k+1],W=this.circles[3*k+2];S.push({key:this.circleKeys[k],x1:R-W,y1:G-W,x2:R+W,y2:G+W})}return w?S.filter(w):S}return this._forEachCell(u,h,c,d,this._queryCell,S,{hitTest:_,seenUids:{box:{},circle:{}}},w),_?S.length>0:S},er.prototype._queryCircle=function(u,h,c,d,_){var w=u-c,S=u+c,O=h-c,k=h+c;if(S<0||w>this.width||k<0||O>this.height)return!d&&[];var R=[];return this._forEachCell(w,O,S,k,this._queryCellCircle,R,{hitTest:d,circle:{x:u,y:h,radius:c},seenUids:{box:{},circle:{}}},_),d?R.length>0:R},er.prototype.query=function(u,h,c,d,_){return this._query(u,h,c,d,!1,_)},er.prototype.hitTest=function(u,h,c,d,_){return this._query(u,h,c,d,!0,_)},er.prototype.hitTestCircle=function(u,h,c,d){return this._queryCircle(u,h,c,!0,d)},er.prototype._queryCell=function(u,h,c,d,_,w,S,O){var k=S.seenUids,R=this.boxCells[_];if(R!==null)for(var G=this.bboxes,W=0,H=R;W<H.length;W+=1){var ne=H[W];if(!k.box[ne]){k.box[ne]=!0;var te=4*ne;if(u<=G[te+2]&&h<=G[te+3]&&c>=G[te+0]&&d>=G[te+1]&&(!O||O(this.boxKeys[ne]))){if(S.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[ne],x1:G[te],y1:G[te+1],x2:G[te+2],y2:G[te+3]})}}}var ue=this.circleCells[_];if(ue!==null)for(var Y=this.circles,le=0,me=ue;le<me.length;le+=1){var xe=me[le];if(!k.circle[xe]){k.circle[xe]=!0;var Ae=3*xe;if(this._circleAndRectCollide(Y[Ae],Y[Ae+1],Y[Ae+2],u,h,c,d)&&(!O||O(this.circleKeys[xe]))){if(S.hitTest)return w.push(!0),!0;var Me=Y[Ae],ke=Y[Ae+1],je=Y[Ae+2];w.push({key:this.circleKeys[xe],x1:Me-je,y1:ke-je,x2:Me+je,y2:ke+je})}}}},er.prototype._queryCellCircle=function(u,h,c,d,_,w,S,O){var k=S.circle,R=S.seenUids,G=this.boxCells[_];if(G!==null)for(var W=this.bboxes,H=0,ne=G;H<ne.length;H+=1){var te=ne[H];if(!R.box[te]){R.box[te]=!0;var ue=4*te;if(this._circleAndRectCollide(k.x,k.y,k.radius,W[ue+0],W[ue+1],W[ue+2],W[ue+3])&&(!O||O(this.boxKeys[te])))return w.push(!0),!0}}var Y=this.circleCells[_];if(Y!==null)for(var le=this.circles,me=0,xe=Y;me<xe.length;me+=1){var Ae=xe[me];if(!R.circle[Ae]){R.circle[Ae]=!0;var Me=3*Ae;if(this._circlesCollide(le[Me],le[Me+1],le[Me+2],k.x,k.y,k.radius)&&(!O||O(this.circleKeys[Ae])))return w.push(!0),!0}}},er.prototype._forEachCell=function(u,h,c,d,_,w,S,O){for(var k=this._convertToXCellCoord(u),R=this._convertToYCellCoord(h),G=this._convertToXCellCoord(c),W=this._convertToYCellCoord(d),H=k;H<=G;H++)for(var ne=R;ne<=W;ne++)if(_.call(this,u,h,c,d,this.xCellCount*ne+H,w,S,O))return},er.prototype._convertToXCellCoord=function(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))},er.prototype._convertToYCellCoord=function(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))},er.prototype._circlesCollide=function(u,h,c,d,_,w){var S=d-u,O=_-h,k=c+w;return k*k>S*S+O*O},er.prototype._circleAndRectCollide=function(u,h,c,d,_,w,S){var O=(w-d)/2,k=Math.abs(u-(d+O));if(k>O+c)return!1;var R=(S-_)/2,G=Math.abs(h-(_+R));if(G>R+c)return!1;if(k<=O||G<=R)return!0;var W=k-O,H=G-R;return W*W+H*H<=c*c};var Bc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qi(u,h){for(var c=0;c<u;c++){var d=h.length;h.resize(d+4),h.float32.set(Bc,3*d)}}function xi(u,h,c){var d=h[0],_=h[1];return u[0]=c[0]*d+c[4]*_+c[12],u[1]=c[1]*d+c[5]*_+c[13],u[3]=c[3]*d+c[7]*_+c[15],u}var Ko=function(u,h,c){h===void 0&&(h=new er(u.width+200,u.height+200,25)),c===void 0&&(c=new er(u.width+200,u.height+200,25)),this.transform=u,this.grid=h,this.ignoredGrid=c,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+100,this.screenBottomBoundary=u.height+100,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200};function gn(u,h,c){return h*(a.EXTENT/(u.tileSize*Math.pow(2,c-u.tileID.overscaledZ)))}Ko.prototype.placeCollisionBox=function(u,h,c,d,_){var w=this.projectAndGetPerspectiveRatio(d,u.anchorPointX,u.anchorPointY),S=c*w.perspectiveRatio,O=u.x1*S+w.point.x,k=u.y1*S+w.point.y,R=u.x2*S+w.point.x,G=u.y2*S+w.point.y;return!this.isInsideGrid(O,k,R,G)||!h&&this.grid.hitTest(O,k,R,G,_)?{box:[],offscreen:!1}:{box:[O,k,R,G],offscreen:this.isOffscreen(O,k,R,G)}},Ko.prototype.placeCollisionCircles=function(u,h,c,d,_,w,S,O,k,R,G,W,H){var ne=[],te=new a.Point(h.anchorX,h.anchorY),ue=vr(te,w),Y=Br(this.transform.cameraToCenterDistance,ue.signedDistanceFromCamera),le=(R?_/Y:_*Y)/a.ONE_EM,me=vr(te,S).point,xe=_i(le,d,h.lineOffsetX*le,h.lineOffsetY*le,!1,me,te,h,c,S,{}),Ae=!1,Me=!1,ke=!0;if(xe){for(var je=.5*W*Y+H,it=new a.Point(-100,-100),rt=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),gt=new ti,Rt=xe.first,Ut=xe.last,Bt=[],Cr=Rt.path.length-1;Cr>=1;Cr--)Bt.push(Rt.path[Cr]);for(var xt=1;xt<Ut.path.length;xt++)Bt.push(Ut.path[xt]);var Jt=2.5*je;if(O){var sr=Bt.map(function(ra){return vr(ra,O)});Bt=sr.some(function(ra){return ra.signedDistanceFromCamera<=0})?[]:sr.map(function(ra){return ra.point})}var Yt=[];if(Bt.length>0){for(var Kt=Bt[0].clone(),or=Bt[0].clone(),Zt=1;Zt<Bt.length;Zt++)Kt.x=Math.min(Kt.x,Bt[Zt].x),Kt.y=Math.min(Kt.y,Bt[Zt].y),or.x=Math.max(or.x,Bt[Zt].x),or.y=Math.max(or.y,Bt[Zt].y);Yt=Kt.x>=it.x&&or.x<=rt.x&&Kt.y>=it.y&&or.y<=rt.y?[Bt]:or.x<it.x||Kt.x>rt.x||or.y<it.y||Kt.y>rt.y?[]:a.clipLine([Bt],it.x,it.y,rt.x,rt.y)}for(var Gt=0,pi=Yt;Gt<pi.length;Gt+=1){var An;gt.reset(pi[Gt],.25*je),An=gt.length<=.5*je?1:Math.ceil(gt.paddedLength/Jt)+1;for(var zi=0;zi<An;zi++){var wi=zi/Math.max(An-1,1),On=gt.lerp(wi),zn=On.x+100,Mo=On.y+100;ne.push(zn,Mo,je,0);var Xi=zn-je,el=Mo-je,oo=zn+je,wa=Mo+je;if(ke=ke&&this.isOffscreen(Xi,el,oo,wa),Me=Me||this.isInsideGrid(Xi,el,oo,wa),!u&&this.grid.hitTestCircle(zn,Mo,je,G)&&(Ae=!0,!k))return{circles:[],offscreen:!1,collisionDetected:Ae}}}}return{circles:!k&&Ae||!Me?[]:ne,offscreen:ke,collisionDetected:Ae}},Ko.prototype.queryRenderedSymbols=function(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var h=[],c=1/0,d=1/0,_=-1/0,w=-1/0,S=0,O=u;S<O.length;S+=1){var k=O[S],R=new a.Point(k.x+100,k.y+100);c=Math.min(c,R.x),d=Math.min(d,R.y),_=Math.max(_,R.x),w=Math.max(w,R.y),h.push(R)}for(var G={},W={},H=0,ne=this.grid.query(c,d,_,w).concat(this.ignoredGrid.query(c,d,_,w));H<ne.length;H+=1){var te=ne[H],ue=te.key;if(G[ue.bucketInstanceId]===void 0&&(G[ue.bucketInstanceId]={}),!G[ue.bucketInstanceId][ue.featureIndex]){var Y=[new a.Point(te.x1,te.y1),new a.Point(te.x2,te.y1),new a.Point(te.x2,te.y2),new a.Point(te.x1,te.y2)];a.polygonIntersectsPolygon(h,Y)&&(G[ue.bucketInstanceId][ue.featureIndex]=!0,W[ue.bucketInstanceId]===void 0&&(W[ue.bucketInstanceId]=[]),W[ue.bucketInstanceId].push(ue.featureIndex))}}return W},Ko.prototype.insertCollisionBox=function(u,h,c,d,_){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:c,featureIndex:d,collisionGroupID:_},u[0],u[1],u[2],u[3])},Ko.prototype.insertCollisionCircles=function(u,h,c,d,_){for(var w=h?this.ignoredGrid:this.grid,S={bucketInstanceId:c,featureIndex:d,collisionGroupID:_},O=0;O<u.length;O+=4)w.insertCircle(S,u[O],u[O+1],u[O+2])},Ko.prototype.projectAndGetPerspectiveRatio=function(u,h,c){var d=[h,c,0,1];return xi(d,d,u),{point:new a.Point((d[0]/d[3]+1)/2*this.transform.width+100,(-d[1]/d[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/d[3]*.5}},Ko.prototype.isOffscreen=function(u,h,c,d){return c<100||u>=this.screenRightBoundary||d<100||h>this.screenBottomBoundary},Ko.prototype.isInsideGrid=function(u,h,c,d){return c>=0&&u<this.gridRightBoundary&&d>=0&&h<this.gridBottomBoundary},Ko.prototype.getViewportMatrix=function(){var u=a.identity([]);return a.translate(u,u,[-100,-100,0]),u};var ya=function(u,h,c,d){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?h:-h))):d&&c?1:0,this.placed=c};ya.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Bo=function(u,h,c,d,_){this.text=new ya(u?u.text:null,h,c,_),this.icon=new ya(u?u.icon:null,h,d,_)};Bo.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Dg=function(u,h,c){this.text=u,this.icon=h,this.skipFade=c},Yo=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},k1=function(u,h,c,d,_){this.bucketInstanceId=u,this.featureIndex=h,this.sourceLayerIndex=c,this.bucketIndex=d,this.tileID=_},us=function(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}};function Ai(u,h,c,d,_){var w=a.getAnchorAlignment(u),S=-(w.horizontalAlign-.5)*h,O=-(w.verticalAlign-.5)*c,k=a.evaluateVariableOffset(u,d);return new a.Point(S+k[0]*_,O+k[1]*_)}function Na(u,h,c,d,_,w){var S=u.x1,O=u.x2,k=u.y1,R=u.y2,G=u.anchorPointX,W=u.anchorPointY,H=new a.Point(h,c);return d&&H._rotate(_?w:-w),{x1:S+H.x,y1:k+H.y,x2:O+H.x,y2:R+H.y,anchorPointX:G,anchorPointY:W}}us.prototype.get=function(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){var h=++this.maxGroupID;this.collisionGroups[u]={ID:h,predicate:function(c){return c.collisionGroupID===h}}}return this.collisionGroups[u]};var Wi=function(u,h,c,d){this.transform=u.clone(),this.collisionIndex=new Ko(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new us(c),this.collisionCircleArrays={},this.prevPlacement=d,d&&(d.prevPlacement=void 0),this.placedOrientations={}};function Ol(u,h,c,d,_){u.emplaceBack(h?1:0,c?1:0,d||0,_||0),u.emplaceBack(h?1:0,c?1:0,d||0,_||0),u.emplaceBack(h?1:0,c?1:0,d||0,_||0),u.emplaceBack(h?1:0,c?1:0,d||0,_||0)}Wi.prototype.getBucketParts=function(u,h,c,d){var _=c.getBucket(h),w=c.latestFeatureIndex;if(_&&w&&h.id===_.layerIds[0]){var S=c.collisionBoxArray,O=_.layers[0].layout,k=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),R=c.tileSize/a.EXTENT,G=this.transform.calculatePosMatrix(c.tileID.toUnwrapped()),W=O.get("text-pitch-alignment")==="map",H=O.get("text-rotation-alignment")==="map",ne=gn(c,1,this.transform.zoom),te=yn(G,W,H,this.transform,ne),ue=null;if(W){var Y=$r(G,W,H,this.transform,ne);ue=a.multiply([],this.transform.labelPlaneMatrix,Y)}this.retainedQueryData[_.bucketInstanceId]=new k1(_.bucketInstanceId,w,_.sourceLayerIndex,_.index,c.tileID);var le={bucket:_,layout:O,posMatrix:G,textLabelPlaneMatrix:te,labelToScreenMatrix:ue,scale:k,textPixelRatio:R,holdingForFade:c.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(d)for(var me=0,xe=_.sortKeyRanges;me<xe.length;me+=1){var Ae=xe[me];u.push({sortKey:Ae.sortKey,symbolInstanceStart:Ae.symbolInstanceStart,symbolInstanceEnd:Ae.symbolInstanceEnd,parameters:le})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:le})}},Wi.prototype.attemptAnchorPlacement=function(u,h,c,d,_,w,S,O,k,R,G,W,H,ne,te){var ue,Y=[W.textOffset0,W.textOffset1],le=Ai(u,c,d,Y,_),me=this.collisionIndex.placeCollisionBox(Na(h,le.x,le.y,w,S,this.transform.angle),G,O,k,R.predicate);if(!te||this.collisionIndex.placeCollisionBox(Na(te,le.x,le.y,w,S,this.transform.angle),G,O,k,R.predicate).box.length!==0)return me.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[W.crossTileID]&&this.prevPlacement.placements[W.crossTileID]&&this.prevPlacement.placements[W.crossTileID].text&&(ue=this.prevPlacement.variableOffsets[W.crossTileID].anchor),this.variableOffsets[W.crossTileID]={textOffset:Y,width:c,height:d,anchor:u,textBoxScale:_,prevAnchor:ue},this.markUsedJustification(H,u,W,ne),H.allowVerticalPlacement&&(this.markUsedOrientation(H,ne,W),this.placedOrientations[W.crossTileID]=ne),{shift:le,placedGlyphBoxes:me}):void 0},Wi.prototype.placeLayerBucketPart=function(u,h,c){var d=this,_=u.parameters,w=_.bucket,S=_.layout,O=_.posMatrix,k=_.textLabelPlaneMatrix,R=_.labelToScreenMatrix,G=_.textPixelRatio,W=_.holdingForFade,H=_.collisionBoxArray,ne=_.partiallyEvaluatedTextSize,te=_.collisionGroup,ue=S.get("text-optional"),Y=S.get("icon-optional"),le=S.get("text-allow-overlap"),me=S.get("icon-allow-overlap"),xe=S.get("text-rotation-alignment")==="map",Ae=S.get("text-pitch-alignment")==="map",Me=S.get("icon-text-fit")!=="none",ke=S.get("symbol-z-order")==="viewport-y",je=le&&(me||!w.hasIconData()||Y),it=me&&(le||!w.hasTextData()||ue);!w.collisionArrays&&H&&w.deserializeCollisionBoxes(H);var rt=function(xt,Jt){if(!h[xt.crossTileID])if(W)d.placements[xt.crossTileID]=new Dg(!1,!1,!1);else{var sr,Yt=!1,Kt=!1,or=!0,Zt=null,Gt={box:null,offscreen:null},pi={box:null,offscreen:null},An=null,zi=null,wi=0,On=0,zn=0;Jt.textFeatureIndex?wi=Jt.textFeatureIndex:xt.useRuntimeCollisionCircles&&(wi=xt.featureIndex),Jt.verticalTextFeatureIndex&&(On=Jt.verticalTextFeatureIndex);var Mo=Jt.textBox;if(Mo){var Xi=function(Vr){var jo=a.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Vr&&d.prevPlacement){var ao=d.prevPlacement.placedOrientations[xt.crossTileID];ao&&(d.placedOrientations[xt.crossTileID]=ao,d.markUsedOrientation(w,jo=ao,xt))}return jo},el=function(Vr,jo){if(w.allowVerticalPlacement&&xt.numVerticalGlyphVertices>0&&Jt.verticalTextBox)for(var ao=0,Wl=w.writingModes;ao<Wl.length&&(Wl[ao]===a.WritingMode.vertical?(Gt=jo(),pi=Gt):Gt=Vr(),!(Gt&&Gt.box&&Gt.box.length));ao+=1);else Gt=Vr()};if(S.get("text-variable-anchor")){var oo=S.get("text-variable-anchor");if(d.prevPlacement&&d.prevPlacement.variableOffsets[xt.crossTileID]){var wa=d.prevPlacement.variableOffsets[xt.crossTileID];oo.indexOf(wa.anchor)>0&&(oo=oo.filter(function(Vr){return Vr!==wa.anchor})).unshift(wa.anchor)}var ra=function(Vr,jo,ao){for(var Wl=Vr.x2-Vr.x1,W1=Vr.y2-Vr.y1,wf=xt.textBoxScale,H1=Me&&!me?jo:null,ah={box:[],offscreen:!1},hv=le?2*oo.length:oo.length,Hu=0;Hu<hv;++Hu){var Ef=d.attemptAnchorPlacement(oo[Hu%oo.length],Vr,Wl,W1,wf,xe,Ae,G,O,te,Hu>=oo.length,xt,w,ao,H1);if(Ef&&(ah=Ef.placedGlyphBoxes)&&ah.box&&ah.box.length){Yt=!0,Zt=Ef.shift;break}}return ah};el(function(){return ra(Mo,Jt.iconBox,a.WritingMode.horizontal)},function(){var Vr=Jt.verticalTextBox;return w.allowVerticalPlacement&&!(Gt&&Gt.box&&Gt.box.length)&&xt.numVerticalGlyphVertices>0&&Vr?ra(Vr,Jt.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),Gt&&(Yt=Gt.box,or=Gt.offscreen);var nh=Xi(Gt&&Gt.box);if(!Yt&&d.prevPlacement){var qu=d.prevPlacement.variableOffsets[xt.crossTileID];qu&&(d.variableOffsets[xt.crossTileID]=qu,d.markUsedJustification(w,qu.anchor,xt,nh))}}else{var tl=function(Vr,jo){var ao=d.collisionIndex.placeCollisionBox(Vr,le,G,O,te.predicate);return ao&&ao.box&&ao.box.length&&(d.markUsedOrientation(w,jo,xt),d.placedOrientations[xt.crossTileID]=jo),ao};el(function(){return tl(Mo,a.WritingMode.horizontal)},function(){var Vr=Jt.verticalTextBox;return w.allowVerticalPlacement&&xt.numVerticalGlyphVertices>0&&Vr?tl(Vr,a.WritingMode.vertical):{box:null,offscreen:null}}),Xi(Gt&&Gt.box&&Gt.box.length)}}if(Yt=(sr=Gt)&&sr.box&&sr.box.length>0,or=sr&&sr.offscreen,xt.useRuntimeCollisionCircles){var Wu=w.text.placedSymbolArray.get(xt.centerJustifiedTextSymbolIndex),ih=a.evaluateSizeForFeature(w.textSizeData,ne,Wu),Ba=S.get("text-padding");An=d.collisionIndex.placeCollisionCircles(le,Wu,w.lineVertexArray,w.glyphOffsetArray,ih,O,k,R,c,Ae,te.predicate,xt.collisionCircleDiameter,Ba),Yt=le||An.circles.length>0&&!An.collisionDetected,or=or&&An.offscreen}if(Jt.iconFeatureIndex&&(zn=Jt.iconFeatureIndex),Jt.iconBox){var oh=function(Vr){var jo=Me&&Zt?Na(Vr,Zt.x,Zt.y,xe,Ae,d.transform.angle):Vr;return d.collisionIndex.placeCollisionBox(jo,me,G,O,te.predicate)};Kt=pi&&pi.box&&pi.box.length&&Jt.verticalIconBox?(zi=oh(Jt.verticalIconBox)).box.length>0:(zi=oh(Jt.iconBox)).box.length>0,or=or&&zi.offscreen}var Va=ue||xt.numHorizontalGlyphVertices===0&&xt.numVerticalGlyphVertices===0,di=Y||xt.numIconVertices===0;if(Va||di?di?Va||(Kt=Kt&&Yt):Yt=Kt&&Yt:Kt=Yt=Kt&&Yt,Yt&&sr&&sr.box&&d.collisionIndex.insertCollisionBox(sr.box,S.get("text-ignore-placement"),w.bucketInstanceId,pi&&pi.box&&On?On:wi,te.ID),Kt&&zi&&d.collisionIndex.insertCollisionBox(zi.box,S.get("icon-ignore-placement"),w.bucketInstanceId,zn,te.ID),An&&(Yt&&d.collisionIndex.insertCollisionCircles(An.circles,S.get("text-ignore-placement"),w.bucketInstanceId,wi,te.ID),c)){var ps=w.bucketInstanceId,rl=d.collisionCircleArrays[ps];rl===void 0&&(rl=d.collisionCircleArrays[ps]=new Yo);for(var ql=0;ql<An.circles.length;ql+=4)rl.circles.push(An.circles[ql+0]),rl.circles.push(An.circles[ql+1]),rl.circles.push(An.circles[ql+2]),rl.circles.push(An.collisionDetected?1:0)}d.placements[xt.crossTileID]=new Dg(Yt||je,Kt||it,or||w.justReloaded),h[xt.crossTileID]=!0}};if(ke)for(var gt=w.getSortedSymbolIndexes(this.transform.angle),Rt=gt.length-1;Rt>=0;--Rt){var Ut=gt[Rt];rt(w.symbolInstances.get(Ut),w.collisionArrays[Ut])}else for(var Bt=u.symbolInstanceStart;Bt<u.symbolInstanceEnd;Bt++)rt(w.symbolInstances.get(Bt),w.collisionArrays[Bt]);if(c&&w.bucketInstanceId in this.collisionCircleArrays){var Cr=this.collisionCircleArrays[w.bucketInstanceId];a.invert(Cr.invProjMatrix,O),Cr.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},Wi.prototype.markUsedJustification=function(u,h,c,d){var _;_=d===a.WritingMode.vertical?c.verticalPlacedTextSymbolIndex:{left:c.leftJustifiedTextSymbolIndex,center:c.centerJustifiedTextSymbolIndex,right:c.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(h)];for(var w=0,S=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex,c.verticalPlacedTextSymbolIndex];w<S.length;w+=1){var O=S[w];O>=0&&(u.text.placedSymbolArray.get(O).crossTileID=_>=0&&O!==_?0:c.crossTileID)}},Wi.prototype.markUsedOrientation=function(u,h,c){for(var d=h===a.WritingMode.horizontal||h===a.WritingMode.horizontalOnly?h:0,_=h===a.WritingMode.vertical?h:0,w=0,S=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex];w<S.length;w+=1)u.text.placedSymbolArray.get(S[w]).placedOrientation=d;c.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).placedOrientation=_)},Wi.prototype.commit=function(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;var h=this.prevPlacement,c=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;var d=h?h.symbolFadeChange(u):1,_=h?h.opacities:{},w=h?h.variableOffsets:{},S=h?h.placedOrientations:{};for(var O in this.placements){var k=this.placements[O],R=_[O];R?(this.opacities[O]=new Bo(R,d,k.text,k.icon),c=c||k.text!==R.text.placed||k.icon!==R.icon.placed):(this.opacities[O]=new Bo(null,d,k.text,k.icon,k.skipFade),c=c||k.text||k.icon)}for(var G in _){var W=_[G];if(!this.opacities[G]){var H=new Bo(W,d,!1,!1);H.isHidden()||(this.opacities[G]=H,c=c||W.text.placed||W.icon.placed)}}for(var ne in w)this.variableOffsets[ne]||!this.opacities[ne]||this.opacities[ne].isHidden()||(this.variableOffsets[ne]=w[ne]);for(var te in S)this.placedOrientations[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.placedOrientations[te]=S[te]);c?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:u)},Wi.prototype.updateLayerOpacities=function(u,h){for(var c={},d=0,_=h;d<_.length;d+=1){var w=_[d],S=w.getBucket(u);S&&w.latestFeatureIndex&&u.id===S.layerIds[0]&&this.updateBucketOpacities(S,c,w.collisionBoxArray)}},Wi.prototype.updateBucketOpacities=function(u,h,c){var d=this;u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();var _=u.layers[0].layout,w=new Bo(null,0,!1,!1,!0),S=_.get("text-allow-overlap"),O=_.get("icon-allow-overlap"),k=_.get("text-variable-anchor"),R=_.get("text-rotation-alignment")==="map",G=_.get("text-pitch-alignment")==="map",W=_.get("icon-text-fit")!=="none",H=new Bo(null,0,S&&(O||!u.hasIconData()||_.get("icon-optional")),O&&(S||!u.hasTextData()||_.get("text-optional")),!0);!u.collisionArrays&&c&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(c);for(var ne=function(le,me,xe){for(var Ae=0;Ae<me/4;Ae++)le.opacityVertexArray.emplaceBack(xe)},te=function(le){var me=u.symbolInstances.get(le),xe=me.numHorizontalGlyphVertices,Ae=me.numVerticalGlyphVertices,Me=me.crossTileID,ke=d.opacities[Me];h[Me]?ke=w:ke||(d.opacities[Me]=ke=H),h[Me]=!0;var je=me.numIconVertices>0,it=d.placedOrientations[me.crossTileID],rt=it===a.WritingMode.vertical,gt=it===a.WritingMode.horizontal||it===a.WritingMode.horizontalOnly;if(xe>0||Ae>0){var Rt=zg(ke.text);ne(u.text,xe,rt?Du:Rt),ne(u.text,Ae,gt?Du:Rt);var Ut=ke.text.isHidden();[me.rightJustifiedTextSymbolIndex,me.centerJustifiedTextSymbolIndex,me.leftJustifiedTextSymbolIndex].forEach(function(Gt){Gt>=0&&(u.text.placedSymbolArray.get(Gt).hidden=Ut||rt?1:0)}),me.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(me.verticalPlacedTextSymbolIndex).hidden=Ut||gt?1:0);var Bt=d.variableOffsets[me.crossTileID];Bt&&d.markUsedJustification(u,Bt.anchor,me,it);var Cr=d.placedOrientations[me.crossTileID];Cr&&(d.markUsedJustification(u,"left",me,Cr),d.markUsedOrientation(u,Cr,me))}if(je){var xt=zg(ke.icon),Jt=!(W&&me.verticalPlacedIconSymbolIndex&&rt);me.placedIconSymbolIndex>=0&&(ne(u.icon,me.numIconVertices,Jt?xt:Du),u.icon.placedSymbolArray.get(me.placedIconSymbolIndex).hidden=ke.icon.isHidden()),me.verticalPlacedIconSymbolIndex>=0&&(ne(u.icon,me.numVerticalIconVertices,Jt?Du:xt),u.icon.placedSymbolArray.get(me.verticalPlacedIconSymbolIndex).hidden=ke.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){var sr=u.collisionArrays[le];if(sr){var Yt=new a.Point(0,0);if(sr.textBox||sr.verticalTextBox){var Kt=!0;if(k){var or=d.variableOffsets[Me];or?(Yt=Ai(or.anchor,or.width,or.height,or.textOffset,or.textBoxScale),R&&Yt._rotate(G?d.transform.angle:-d.transform.angle)):Kt=!1}sr.textBox&&Ol(u.textCollisionBox.collisionVertexArray,ke.text.placed,!Kt||rt,Yt.x,Yt.y),sr.verticalTextBox&&Ol(u.textCollisionBox.collisionVertexArray,ke.text.placed,!Kt||gt,Yt.x,Yt.y)}var Zt=Boolean(!gt&&sr.verticalIconBox);sr.iconBox&&Ol(u.iconCollisionBox.collisionVertexArray,ke.icon.placed,Zt,W?Yt.x:0,W?Yt.y:0),sr.verticalIconBox&&Ol(u.iconCollisionBox.collisionVertexArray,ke.icon.placed,!Zt,W?Yt.x:0,W?Yt.y:0)}}},ue=0;ue<u.symbolInstances.length;ue++)te(ue);if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.bucketInstanceId in this.collisionCircleArrays){var Y=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=Y.invProjMatrix,u.placementViewportMatrix=Y.viewportMatrix,u.collisionCircleArray=Y.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}},Wi.prototype.symbolFadeChange=function(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Wi.prototype.zoomAdjustment=function(u){return Math.max(0,(this.transform.zoom-u)/1.5)},Wi.prototype.hasTransitions=function(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration},Wi.prototype.stillRecent=function(u,h){var c=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*c>u},Wi.prototype.setStale=function(){this.stale=!0};var L1=Math.pow(2,25),D1=Math.pow(2,24),yd=Math.pow(2,17),N1=Math.pow(2,16),Ng=Math.pow(2,9),R1=Math.pow(2,8),Rg=Math.pow(2,1);function zg(u){if(u.opacity===0&&!u.placed)return 0;if(u.opacity===1&&u.placed)return 4294967295;var h=u.placed?1:0,c=Math.floor(127*u.opacity);return c*L1+h*D1+c*yd+h*N1+c*Ng+h*R1+c*Rg+h}var Du=0,gd=function(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&u.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};gd.prototype.continuePlacement=function(u,h,c,d,_){for(var w=this._bucketParts;this._currentTileIndex<u.length;)if(h.getBucketParts(w,d,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(S,O){return S.sortKey-O.sortKey}));this._currentPartIndex<w.length;)if(h.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,c),this._currentPartIndex++,_())return!0;return!1};var Vc=function(u,h,c,d,_,w,S){this.placement=new Wi(u,_,w,S),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=c,this._showCollisionBoxes=d,this._done=!1};Vc.prototype.isDone=function(){return this._done},Vc.prototype.continuePlacement=function(u,h,c){for(var d=this,_=a.browser.now(),w=function(){var k=a.browser.now()-_;return!d._forceFullPlacement&&k>2};this._currentPlacementIndex>=0;){var S=h[u[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=O)&&(!S.maxzoom||S.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new gd(S)),this._inProgressLayer.continuePlacement(c[S.source],this.placement,this._showCollisionBoxes,S,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Vc.prototype.commit=function(u){return this.placement.commit(u),this.placement};var Fg=512/a.EXTENT/2,tf=function(u,h,c){this.tileID=u,this.indexedSymbolInstances={},this.bucketInstanceId=c;for(var d=0;d<h.length;d++){var _=h.get(d),w=_.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:_.crossTileID,coord:this.getScaledCoordinates(_,u)})}};tf.prototype.getScaledCoordinates=function(u,h){var c=Fg/Math.pow(2,h.canonical.z-this.tileID.canonical.z);return{x:Math.floor((h.canonical.x*a.EXTENT+u.anchorX)*c),y:Math.floor((h.canonical.y*a.EXTENT+u.anchorY)*c)}},tf.prototype.findMatches=function(u,h,c){for(var d=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z),_=0;_<u.length;_++){var w=u.get(_);if(!w.crossTileID){var S=this.indexedSymbolInstances[w.key];if(S)for(var O=this.getScaledCoordinates(w,h),k=0,R=S;k<R.length;k+=1){var G=R[k];if(Math.abs(G.coord.x-O.x)<=d&&Math.abs(G.coord.y-O.y)<=d&&!c[G.crossTileID]){c[G.crossTileID]=!0,w.crossTileID=G.crossTileID;break}}}}};var Jo=function(){this.maxCrossTileID=0};Jo.prototype.generate=function(){return++this.maxCrossTileID};var Vs=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Vs.prototype.handleWrapJump=function(u){var h=Math.round((u-this.lng)/360);if(h!==0)for(var c in this.indexes){var d=this.indexes[c],_={};for(var w in d){var S=d[w];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+h),_[S.tileID.key]=S}this.indexes[c]=_}this.lng=u},Vs.prototype.addBucket=function(u,h,c){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(var d=0;d<h.symbolInstances.length;d++)h.symbolInstances.get(d).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});var _=this.usedCrossTileIDs[u.overscaledZ];for(var w in this.indexes){var S=this.indexes[w];if(Number(w)>u.overscaledZ)for(var O in S){var k=S[O];k.tileID.isChildOf(u)&&k.findMatches(h.symbolInstances,u,_)}else{var R=S[u.scaledTo(Number(w)).key];R&&R.findMatches(h.symbolInstances,u,_)}}for(var G=0;G<h.symbolInstances.length;G++){var W=h.symbolInstances.get(G);W.crossTileID||(W.crossTileID=c.generate(),_[W.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new tf(u,h.symbolInstances,h.bucketInstanceId),!0},Vs.prototype.removeBucketCrossTileIDs=function(u,h){for(var c in h.indexedSymbolInstances)for(var d=0,_=h.indexedSymbolInstances[c];d<_.length;d+=1)delete this.usedCrossTileIDs[u][_[d].crossTileID]},Vs.prototype.removeStaleBuckets=function(u){var h=!1;for(var c in this.indexes){var d=this.indexes[c];for(var _ in d)u[d[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,d[_]),delete d[_],h=!0)}return h};var Us=function(){this.layerIndexes={},this.crossTileIDs=new Jo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Us.prototype.addLayer=function(u,h,c){var d=this.layerIndexes[u.id];d===void 0&&(d=this.layerIndexes[u.id]=new Vs);var _=!1,w={};d.handleWrapJump(c);for(var S=0,O=h;S<O.length;S+=1){var k=O[S],R=k.getBucket(u);R&&u.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(k.tileID,R,this.crossTileIDs)&&(_=!0),w[R.bucketInstanceId]=!0)}return d.removeStaleBuckets(w)&&(_=!0),_},Us.prototype.pruneUnusedLayers=function(u){var h={};for(var c in u.forEach(function(d){h[d]=!0}),this.layerIndexes)h[c]||delete this.layerIndexes[c]};var Cl=function(u,h){return a.emitValidationErrors(u,h&&h.filter(function(c){return c.identifier!=="source.canvas"}))},js=a.pick(De,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),$s=a.pick(De,["setCenter","setZoom","setBearing","setPitch"]),rf=function(){var u={},h=a.styleSpec.$version;for(var c in a.styleSpec.$root){var d,_=a.styleSpec.$root[c];_.required&&(d=c==="version"?h:_.type==="array"?[]:{})!=null&&(u[c]=d)}return u}(),xo=function(u){function h(c,d){var _=this;d===void 0&&(d={}),u.call(this),this.map=c,this.dispatcher=new be(Le(),this),this.imageManager=new X,this.imageManager.setEventedParent(this),this.glyphManager=new Se(c._requestManager,d.localIdeographFontFamily),this.lineAtlas=new st(256,512),this.crossTileSymbolIndex=new Us,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var w=this;this._rtlTextPluginCallback=h.registerForPluginStateChange(function(S){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},function(O,k){if(a.triggerPluginCompletionEvent(O),k&&k.every(function(G){return G}))for(var R in w.sourceCaches)w.sourceCaches[R].reload()})}),this.on("data",function(S){if(S.dataType==="source"&&S.sourceDataType==="metadata"){var O=_.sourceCaches[S.sourceId];if(O){var k=O.getSource();if(k&&k.vectorLayerIds)for(var R in _._layers){var G=_._layers[R];G.source===k.id&&_._validateLayer(G)}}}})}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.loadURL=function(c,d){var _=this;d===void 0&&(d={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var w=typeof d.validate=="boolean"?d.validate:!a.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,d.accessToken);var S=this.map._requestManager.transformRequest(c,a.ResourceType.Style);this._request=a.getJSON(S,function(O,k){_._request=null,O?_.fire(new a.ErrorEvent(O)):k&&_._load(k,w)})},h.prototype.loadJSON=function(c,d){var _=this;d===void 0&&(d={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){_._request=null,_._load(c,d.validate!==!1)})},h.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(rf,!1)},h.prototype._load=function(c,d){if(!d||!Cl(this,a.validateStyle(c))){for(var _ in this._loaded=!0,this.stylesheet=c,c.sources)this.addSource(_,c.sources[_],{validate:!1});c.sprite?this._loadSprite(c.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(c.glyphs);var w=lt(this.stylesheet.layers);this._order=w.map(function(R){return R.id}),this._layers={},this._serializedLayers={};for(var S=0,O=w;S<O.length;S+=1){var k=O[S];(k=a.createStyleLayer(k)).setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=k,this._serializedLayers[k.id]=k.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ge(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},h.prototype._loadSprite=function(c){var d=this;this._spriteRequest=function(_,w,S){var O,k,R,G=a.browser.devicePixelRatio>1?"@2x":"",W=a.getJSON(w.transformRequest(w.normalizeSpriteURL(_,G,".json"),a.ResourceType.SpriteJSON),function(te,ue){W=null,R||(R=te,O=ue,ne())}),H=a.getImage(w.transformRequest(w.normalizeSpriteURL(_,G,".png"),a.ResourceType.SpriteImage),function(te,ue){H=null,R||(R=te,k=ue,ne())});function ne(){if(R)S(R);else if(O&&k){var te=a.browser.getImageData(k),ue={};for(var Y in O){var le=O[Y],me=le.width,xe=le.height,Ae=le.x,Me=le.y,ke=le.sdf,je=le.pixelRatio,it=le.stretchX,rt=le.stretchY,gt=le.content,Rt=new a.RGBAImage({width:me,height:xe});a.RGBAImage.copy(te,Rt,{x:Ae,y:Me},{x:0,y:0},{width:me,height:xe}),ue[Y]={data:Rt,pixelRatio:je,sdf:ke,stretchX:it,stretchY:rt,content:gt}}S(null,ue)}}return{cancel:function(){W&&(W.cancel(),W=null),H&&(H.cancel(),H=null)}}}(c,this.map._requestManager,function(_,w){if(d._spriteRequest=null,_)d.fire(new a.ErrorEvent(_));else if(w)for(var S in w)d.imageManager.addImage(S,w[S]);d.imageManager.setLoaded(!0),d._availableImages=d.imageManager.listImages(),d.dispatcher.broadcast("setImages",d._availableImages),d.fire(new a.Event("data",{dataType:"style"}))})},h.prototype._validateLayer=function(c){var d=this.sourceCaches[c.source];if(d){var _=c.sourceLayer;if(_){var w=d.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(_)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+_+'" does not exist on source "'+w.id+'" as specified by style layer "'+c.id+'"')))}}},h.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var c in this.sourceCaches)if(!this.sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()},h.prototype._serializeLayers=function(c){for(var d=[],_=0,w=c;_<w.length;_+=1){var S=this._layers[w[_]];S.type!=="custom"&&d.push(S.serialize())}return d},h.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var c in this.sourceCaches)if(this.sourceCaches[c].hasTransition())return!0;for(var d in this._layers)if(this._layers[d].hasTransition())return!0;return!1},h.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},h.prototype.update=function(c){if(this._loaded){var d=this._changed;if(this._changed){var _=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var S in(_.length||w.length)&&this._updateWorkerLayers(_,w),this._updatedSources){var O=this._updatedSources[S];O==="reload"?this._reloadSource(S):O==="clear"&&this._clearSource(S)}for(var k in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[k].updateTransitions(c);this.light.updateTransitions(c),this._resetUpdates()}var R={};for(var G in this.sourceCaches){var W=this.sourceCaches[G];R[G]=W.used,W.used=!1}for(var H=0,ne=this._order;H<ne.length;H+=1){var te=this._layers[ne[H]];te.recalculate(c,this._availableImages),!te.isHidden(c.zoom)&&te.source&&(this.sourceCaches[te.source].used=!0)}for(var ue in R){var Y=this.sourceCaches[ue];R[ue]!==Y.used&&Y.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ue}))}this.light.recalculate(c),this.z=c.zoom,d&&this.fire(new a.Event("data",{dataType:"style"}))}},h.prototype._updateTilesForChangedImages=function(){var c=Object.keys(this._changedImages);if(c.length){for(var d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}},h.prototype._updateWorkerLayers=function(c,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:d})},h.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},h.prototype.setState=function(c){var d=this;if(this._checkLoaded(),Cl(this,a.validateStyle(c)))return!1;(c=a.clone$1(c)).layers=lt(c.layers);var _=function(S,O){if(!S)return[{command:De.setStyle,args:[O]}];var k=[];try{if(!a.deepEqual(S.version,O.version))return[{command:De.setStyle,args:[O]}];a.deepEqual(S.center,O.center)||k.push({command:De.setCenter,args:[O.center]}),a.deepEqual(S.zoom,O.zoom)||k.push({command:De.setZoom,args:[O.zoom]}),a.deepEqual(S.bearing,O.bearing)||k.push({command:De.setBearing,args:[O.bearing]}),a.deepEqual(S.pitch,O.pitch)||k.push({command:De.setPitch,args:[O.pitch]}),a.deepEqual(S.sprite,O.sprite)||k.push({command:De.setSprite,args:[O.sprite]}),a.deepEqual(S.glyphs,O.glyphs)||k.push({command:De.setGlyphs,args:[O.glyphs]}),a.deepEqual(S.transition,O.transition)||k.push({command:De.setTransition,args:[O.transition]}),a.deepEqual(S.light,O.light)||k.push({command:De.setLight,args:[O.light]});var R={},G=[];(function(H,ne,te,ue){var Y;for(Y in ne=ne||{},H=H||{})H.hasOwnProperty(Y)&&(ne.hasOwnProperty(Y)||Ee(Y,te,ue));for(Y in ne)ne.hasOwnProperty(Y)&&(H.hasOwnProperty(Y)?a.deepEqual(H[Y],ne[Y])||(H[Y].type==="geojson"&&ne[Y].type==="geojson"&&$t(H,ne,Y)?te.push({command:De.setGeoJSONSourceData,args:[Y,ne[Y].data]}):He(Y,ne,te,ue)):fe(Y,ne,te))})(S.sources,O.sources,G,R);var W=[];S.layers&&S.layers.forEach(function(H){R[H.source]?k.push({command:De.removeLayer,args:[H.id]}):W.push(H)}),k=k.concat(G),function(H,ne,te){ne=ne||[];var ue,Y,le,me,xe,Ae,Me,ke=(H=H||[]).map(Qt),je=ne.map(Qt),it=H.reduce(Xt,{}),rt=ne.reduce(Xt,{}),gt=ke.slice(),Rt=Object.create(null);for(ue=0,Y=0;ue<ke.length;ue++)rt.hasOwnProperty(le=ke[ue])?Y++:(te.push({command:De.removeLayer,args:[le]}),gt.splice(gt.indexOf(le,Y),1));for(ue=0,Y=0;ue<je.length;ue++)gt[gt.length-1-ue]!==(le=je[je.length-1-ue])&&(it.hasOwnProperty(le)?(te.push({command:De.removeLayer,args:[le]}),gt.splice(gt.lastIndexOf(le,gt.length-Y),1)):Y++,te.push({command:De.addLayer,args:[rt[le],Ae=gt[gt.length-ue]]}),gt.splice(gt.length-ue,0,le),Rt[le]=!0);for(ue=0;ue<je.length;ue++)if(me=it[le=je[ue]],xe=rt[le],!Rt[le]&&!a.deepEqual(me,xe))if(a.deepEqual(me.source,xe.source)&&a.deepEqual(me["source-layer"],xe["source-layer"])&&a.deepEqual(me.type,xe.type)){for(Me in Ht(me.layout,xe.layout,te,le,null,De.setLayoutProperty),Ht(me.paint,xe.paint,te,le,null,De.setPaintProperty),a.deepEqual(me.filter,xe.filter)||te.push({command:De.setFilter,args:[le,xe.filter]}),a.deepEqual(me.minzoom,xe.minzoom)&&a.deepEqual(me.maxzoom,xe.maxzoom)||te.push({command:De.setLayerZoomRange,args:[le,xe.minzoom,xe.maxzoom]}),me)me.hasOwnProperty(Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?Ht(me[Me],xe[Me],te,le,Me.slice(6),De.setPaintProperty):a.deepEqual(me[Me],xe[Me])||te.push({command:De.setLayerProperty,args:[le,Me,xe[Me]]}));for(Me in xe)xe.hasOwnProperty(Me)&&!me.hasOwnProperty(Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?Ht(me[Me],xe[Me],te,le,Me.slice(6),De.setPaintProperty):a.deepEqual(me[Me],xe[Me])||te.push({command:De.setLayerProperty,args:[le,Me,xe[Me]]}))}else te.push({command:De.removeLayer,args:[le]}),Ae=gt[gt.lastIndexOf(le)+1],te.push({command:De.addLayer,args:[xe,Ae]})}(W,O.layers,k)}catch(H){console.warn("Unable to compute style diff:",H),k=[{command:De.setStyle,args:[O]}]}return k}(this.serialize(),c).filter(function(S){return!(S.command in $s)});if(_.length===0)return!1;var w=_.filter(function(S){return!(S.command in js)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(S){return S.command}).join(", ")+".");return _.forEach(function(S){S.command!=="setTransition"&&d[S.command].apply(d,S.args)}),this.stylesheet=c,!0},h.prototype.addImage=function(c,d){if(this.getImage(c))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(c,d),this._afterImageUpdated(c)},h.prototype.updateImage=function(c,d){this.imageManager.updateImage(c,d)},h.prototype.getImage=function(c){return this.imageManager.getImage(c)},h.prototype.removeImage=function(c){if(!this.getImage(c))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(c),this._afterImageUpdated(c)},h.prototype._afterImageUpdated=function(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},h.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},h.prototype.addSource=function(c,d,_){var w=this;if(_===void 0&&(_={}),this._checkLoaded(),this.sourceCaches[c]!==void 0)throw new Error("There is already a source with this ID");if(!d.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(d).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(a.validateStyle.source,"sources."+c,d,null,_))){this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);var S=this.sourceCaches[c]=new ie(c,d,this.dispatcher);S.style=this,S.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:S.serialize(),sourceId:c}}),S.onAdd(this.map),this._changed=!0}},h.prototype.removeSource=function(c){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error("There is no source with this ID");for(var d in this._layers)if(this._layers[d].source===c)return this.fire(new a.ErrorEvent(new Error('Source "'+c+'" cannot be removed while layer "'+d+'" is using it.')));var _=this.sourceCaches[c];delete this.sourceCaches[c],delete this._updatedSources[c],_.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),_.setEventedParent(null),_.clearTiles(),_.onRemove&&_.onRemove(this.map),this._changed=!0},h.prototype.setGeoJSONSourceData=function(c,d){this._checkLoaded(),this.sourceCaches[c].getSource().setData(d),this._changed=!0},h.prototype.getSource=function(c){return this.sourceCaches[c]&&this.sourceCaches[c].getSource()},h.prototype.addLayer=function(c,d,_){_===void 0&&(_={}),this._checkLoaded();var w=c.id;if(this.getLayer(w))this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var S;if(c.type==="custom"){if(Cl(this,a.validateCustomStyleLayer(c)))return;S=a.createStyleLayer(c)}else{if(typeof c.source=="object"&&(this.addSource(w,c.source),c=a.clone$1(c),c=a.extend(c,{source:w})),this._validate(a.validateStyle.layer,"layers."+w,c,{arrayIndex:-1},_))return;S=a.createStyleLayer(c),this._validateLayer(S),S.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[S.id]=S.serialize()}var O=d?this._order.indexOf(d):this._order.length;if(d&&O===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+d+'" does not exist on this map.')));else{if(this._order.splice(O,0,w),this._layerOrderChanged=!0,this._layers[w]=S,this._removedLayers[w]&&S.source&&S.type!=="custom"){var k=this._removedLayers[w];delete this._removedLayers[w],k.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}},h.prototype.moveLayer=function(c,d){if(this._checkLoaded(),this._changed=!0,this._layers[c]){if(c!==d){var _=this._order.indexOf(c);this._order.splice(_,1);var w=d?this._order.indexOf(d):this._order.length;d&&w===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+d+'" does not exist on this map.'))):(this._order.splice(w,0,c),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be moved.")))},h.prototype.removeLayer=function(c){this._checkLoaded();var d=this._layers[c];if(d){d.setEventedParent(null);var _=this._order.indexOf(c);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=d,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],d.onRemove&&d.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be removed.")))},h.prototype.getLayer=function(c){return this._layers[c]},h.prototype.hasLayer=function(c){return c in this._layers},h.prototype.setLayerZoomRange=function(c,d,_){this._checkLoaded();var w=this.getLayer(c);w?w.minzoom===d&&w.maxzoom===_||(d!=null&&(w.minzoom=d),_!=null&&(w.maxzoom=_),this._updateLayer(w)):this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot have zoom extent.")))},h.prototype.setFilter=function(c,d,_){_===void 0&&(_={}),this._checkLoaded();var w=this.getLayer(c);if(w){if(!a.deepEqual(w.filter,d))return d==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(a.validateStyle.filter,"layers."+w.id+".filter",d,null,_)||(w.filter=a.clone$1(d),this._updateLayer(w)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be filtered.")))},h.prototype.getFilter=function(c){return a.clone$1(this.getLayer(c).filter)},h.prototype.setLayoutProperty=function(c,d,_,w){w===void 0&&(w={}),this._checkLoaded();var S=this.getLayer(c);S?a.deepEqual(S.getLayoutProperty(d),_)||(S.setLayoutProperty(d,_,w),this._updateLayer(S)):this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be styled.")))},h.prototype.getLayoutProperty=function(c,d){var _=this.getLayer(c);if(_)return _.getLayoutProperty(d);this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style.")))},h.prototype.setPaintProperty=function(c,d,_,w){w===void 0&&(w={}),this._checkLoaded();var S=this.getLayer(c);S?a.deepEqual(S.getPaintProperty(d),_)||(S.setPaintProperty(d,_,w)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be styled.")))},h.prototype.getPaintProperty=function(c,d){return this.getLayer(c).getPaintProperty(d)},h.prototype.setFeatureState=function(c,d){this._checkLoaded();var _=c.source,w=c.sourceLayer,S=this.sourceCaches[_];if(S!==void 0){var O=S.getSource().type;O==="geojson"&&w?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):O!=="vector"||w?(c.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),S.setFeatureState(w,c.id,d)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+_+"' does not exist in the map's style.")))},h.prototype.removeFeatureState=function(c,d){this._checkLoaded();var _=c.source,w=this.sourceCaches[_];if(w!==void 0){var S=w.getSource().type,O=S==="vector"?c.sourceLayer:void 0;S!=="vector"||O?d&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(O,c.id,d):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+_+"' does not exist in the map's style.")))},h.prototype.getFeatureState=function(c){this._checkLoaded();var d=c.source,_=c.sourceLayer,w=this.sourceCaches[d];if(w!==void 0){if(w.getSource().type!=="vector"||_)return c.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(_,c.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+d+"' does not exist in the map's style.")))},h.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},h.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(c){return c.serialize()}),layers:this._serializeLayers(this._order)},function(c){return c!==void 0})},h.prototype._updateLayer=function(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.sourceCaches[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.sourceCaches[c.source].pause()),this._changed=!0},h.prototype._flattenAndSortRenderedFeatures=function(c){for(var d=this,_=function(it){return d._layers[it].type==="fill-extrusion"},w={},S=[],O=this._order.length-1;O>=0;O--){var k=this._order[O];if(_(k)){w[k]=O;for(var R=0,G=c;R<G.length;R+=1){var W=G[R][k];if(W)for(var H=0,ne=W;H<ne.length;H+=1)S.push(ne[H])}}}S.sort(function(it,rt){return rt.intersectionZ-it.intersectionZ});for(var te=[],ue=this._order.length-1;ue>=0;ue--){var Y=this._order[ue];if(_(Y))for(var le=S.length-1;le>=0;le--){var me=S[le].feature;if(w[me.layer.id]<ue)break;te.push(me),S.pop()}else for(var xe=0,Ae=c;xe<Ae.length;xe+=1){var Me=Ae[xe][Y];if(Me)for(var ke=0,je=Me;ke<je.length;ke+=1)te.push(je[ke].feature)}}return te},h.prototype.queryRenderedFeatures=function(c,d,_){d&&d.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);var w={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var S=0,O=d.layers;S<O.length;S+=1){var k=O[S],R=this._layers[k];if(!R)return this.fire(new a.ErrorEvent(new Error("The layer '"+k+"' does not exist in the map's style and cannot be queried for features."))),[];w[R.source]=!0}}var G=[];for(var W in d.availableImages=this._availableImages,this.sourceCaches)d.layers&&!w[W]||G.push(kr(this.sourceCaches[W],this._layers,this._serializedLayers,c,d,_));return this.placement&&G.push(function(H,ne,te,ue,Y,le,me){for(var xe={},Ae=le.queryRenderedSymbols(ue),Me=[],ke=0,je=Object.keys(Ae).map(Number);ke<je.length;ke+=1)Me.push(me[je[ke]]);Me.sort(qn);for(var it=function(){var Bt=gt[rt],Cr=Bt.featureIndex.lookupSymbolFeatures(Ae[Bt.bucketInstanceId],ne,Bt.bucketIndex,Bt.sourceLayerIndex,Y.filter,Y.layers,Y.availableImages,H);for(var xt in Cr){var Jt=xe[xt]=xe[xt]||[],sr=Cr[xt];sr.sort(function(or,Zt){var Gt=Bt.featureSortOrder;if(Gt){var pi=Gt.indexOf(or.featureIndex);return Gt.indexOf(Zt.featureIndex)-pi}return Zt.featureIndex-or.featureIndex});for(var Yt=0,Kt=sr;Yt<Kt.length;Yt+=1)Jt.push(Kt[Yt])}},rt=0,gt=Me;rt<gt.length;rt+=1)it();var Rt=function(Bt){xe[Bt].forEach(function(Cr){var xt=Cr.feature,Jt=te[H[Bt].source].getFeatureState(xt.layer["source-layer"],xt.id);xt.source=xt.layer.source,xt.layer["source-layer"]&&(xt.sourceLayer=xt.layer["source-layer"]),xt.state=Jt})};for(var Ut in xe)Rt(Ut);return xe}(this._layers,this._serializedLayers,this.sourceCaches,c,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(G)},h.prototype.querySourceFeatures=function(c,d){d&&d.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);var _=this.sourceCaches[c];return _?function(w,S){for(var O=w.getRenderableIds().map(function(ne){return w.getTileByID(ne)}),k=[],R={},G=0;G<O.length;G++){var W=O[G],H=W.tileID.canonical.key;R[H]||(R[H]=!0,W.querySourceFeatures(k,S))}return k}(_,d):[]},h.prototype.addSourceType=function(c,d,_){return h.getSourceType(c)?_(new Error('A source type called "'+c+'" already exists.')):(h.setSourceType(c,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:d.workerSourceURL},_):_(null,null))},h.prototype.getLight=function(){return this.light.getLight()},h.prototype.setLight=function(c,d){d===void 0&&(d={}),this._checkLoaded();var _=this.light.getLight(),w=!1;for(var S in c)if(!a.deepEqual(c[S],_[S])){w=!0;break}if(w){var O={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,d),this.light.updateTransitions(O)}},h.prototype._validate=function(c,d,_,w,S){return S===void 0&&(S={}),(!S||S.validate!==!1)&&Cl(this,c.call(a.validateStyle,a.extend({key:d,style:this.serialize(),value:_,styleSpec:a.styleSpec},w)))},h.prototype._remove=function(){for(var c in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[c].setEventedParent(null);for(var d in this.sourceCaches)this.sourceCaches[d].clearTiles(),this.sourceCaches[d].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},h.prototype._clearSource=function(c){this.sourceCaches[c].clearTiles()},h.prototype._reloadSource=function(c){this.sourceCaches[c].resume(),this.sourceCaches[c].reload()},h.prototype._updateSources=function(c){for(var d in this.sourceCaches)this.sourceCaches[d].update(c)},h.prototype._generateCollisionBoxes=function(){for(var c in this.sourceCaches)this._reloadSource(c)},h.prototype._updatePlacement=function(c,d,_,w,S){S===void 0&&(S=!1);for(var O=!1,k=!1,R={},G=0,W=this._order;G<W.length;G+=1){var H=this._layers[W[G]];if(H.type==="symbol"){if(!R[H.source]){var ne=this.sourceCaches[H.source];R[H.source]=ne.getRenderableIds(!0).map(function(me){return ne.getTileByID(me)}).sort(function(me,xe){return xe.tileID.overscaledZ-me.tileID.overscaledZ||(me.tileID.isLessThan(xe.tileID)?-1:1)})}var te=this.crossTileSymbolIndex.addLayer(H,R[H.source],c.center.lng);O=O||te}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),c.zoom))&&(this.pauseablePlacement=new Vc(c,this._order,S,d,_,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),k=!0),O&&this.pauseablePlacement.placement.setStale()),k||O)for(var ue=0,Y=this._order;ue<Y.length;ue+=1){var le=this._layers[Y[ue]];le.type==="symbol"&&this.placement.updateLayerOpacities(le,R[le.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},h.prototype._releaseSymbolFadeTiles=function(){for(var c in this.sourceCaches)this.sourceCaches[c].releaseSymbolFadeTiles()},h.prototype.getImages=function(c,d,_){this.imageManager.getImages(d.icons,_),this._updateTilesForChangedImages();var w=this.sourceCaches[d.source];w&&w.setDependencies(d.tileID.key,d.type,d.icons)},h.prototype.getGlyphs=function(c,d,_){this.glyphManager.getGlyphs(d.stacks,_)},h.prototype.getResource=function(c,d,_){return a.makeRequest(d,_)},h}(a.Evented);xo.getSourceType=function(u){return $i[u]},xo.setSourceType=function(u,h){$i[u]=h},xo.registerForPluginStateChange=a.registerForPluginStateChange;var Hn=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Nu=Yr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Bg=Yr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),z1=Yr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),F1=Yr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),vd=Yr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),_d=Yr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),xd=Yr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),bd=Yr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Vg=Yr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ug=Yr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),B1=Yr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Uc=Yr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),jc=Yr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),jg=Yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Pi=Yr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),wd=Yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Gs=Yr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),qs=Yr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Al=Yr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Pl=Yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ws=Yr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),kl=Yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Ll=Yr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Hs=Yr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),$g=Yr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Gg=Yr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Yr(u,h){var c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=h.match(/attribute ([\w]+) ([\w]+)/g),_=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=h.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=w?w.concat(_):_,O={};return{fragmentSource:u=u.replace(c,function(k,R,G,W,H){return O[H]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_`+H+`
varying `+G+" "+W+" "+H+`;
#else
uniform `+G+" "+W+" u_"+H+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+H+`
    `+G+" "+W+" "+H+" = u_"+H+`;
#endif
`}),vertexSource:h=h.replace(c,function(k,R,G,W,H){var ne=W==="float"?"vec2":"vec4",te=H.match(/color/)?"color":ne;return O[H]?R==="define"?`
#ifndef HAS_UNIFORM_u_`+H+`
uniform lowp float u_`+H+`_t;
attribute `+G+" "+ne+" a_"+H+`;
varying `+G+" "+W+" "+H+`;
#else
uniform `+G+" "+W+" u_"+H+`;
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_`+H+`
    `+H+" = a_"+H+`;
#else
    `+G+" "+W+" "+H+" = u_"+H+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+H+`
    `+H+" = unpack_mix_"+te+"(a_"+H+", u_"+H+`_t);
#else
    `+G+" "+W+" "+H+" = u_"+H+`;
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_`+H+`
uniform lowp float u_`+H+`_t;
attribute `+G+" "+ne+" a_"+H+`;
#else
uniform `+G+" "+W+" u_"+H+`;
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_`+H+`
    `+G+" "+W+" "+H+" = a_"+H+`;
#else
    `+G+" "+W+" "+H+" = u_"+H+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+H+`
    `+G+" "+W+" "+H+" = unpack_mix_"+te+"(a_"+H+", u_"+H+`_t);
#else
    `+G+" "+W+" "+H+" = u_"+H+`;
#endif
`}),staticAttributes:d,staticUniforms:S}}var V1=Object.freeze({__proto__:null,prelude:Nu,background:Bg,backgroundPattern:z1,circle:F1,clippingMask:vd,heatmap:_d,heatmapTexture:xd,collisionBox:bd,collisionCircle:Vg,debug:Ug,fill:B1,fillOutline:Uc,fillOutlinePattern:jc,fillPattern:jg,fillExtrusion:Pi,fillExtrusionPattern:wd,hillshadePrepare:Gs,hillshade:qs,line:Al,lineGradient:Pl,linePattern:Ws,lineSDF:kl,raster:Ll,symbolIcon:Hs,symbolSDF:$g,symbolTextAndIcon:Gg}),nf=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function qg(u){for(var h=[],c=0;c<u.length;c++)if(u[c]!==null){var d=u[c].split(" ");h.push(d.pop())}return h}nf.prototype.bind=function(u,h,c,d,_,w,S,O){this.context=u;for(var k=this.boundPaintVertexBuffers.length!==d.length,R=0;!k&&R<d.length;R++)this.boundPaintVertexBuffers[R]!==d[R]&&(k=!0);u.extVertexArrayObject&&this.vao&&this.boundProgram===h&&this.boundLayoutVertexBuffer===c&&!k&&this.boundIndexBuffer===_&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===S&&this.boundDynamicVertexBuffer2===O?(u.bindVertexArrayOES.set(this.vao),S&&S.bind(),_&&_.dynamicDraw&&_.bind(),O&&O.bind()):this.freshBind(h,c,d,_,w,S,O)},nf.prototype.freshBind=function(u,h,c,d,_,w,S){var O,k=u.numAttributes,R=this.context,G=R.gl;if(R.extVertexArrayObject)this.vao&&this.destroy(),this.vao=R.extVertexArrayObject.createVertexArrayOES(),R.bindVertexArrayOES.set(this.vao),O=0,this.boundProgram=u,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=d,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=S;else{O=R.currentNumAttributes||0;for(var W=k;W<O;W++)G.disableVertexAttribArray(W)}h.enableAttributes(G,u);for(var H=0,ne=c;H<ne.length;H+=1)ne[H].enableAttributes(G,u);w&&w.enableAttributes(G,u),S&&S.enableAttributes(G,u),h.bind(),h.setVertexAttribPointers(G,u,_);for(var te=0,ue=c;te<ue.length;te+=1){var Y=ue[te];Y.bind(),Y.setVertexAttribPointers(G,u,_)}w&&(w.bind(),w.setVertexAttribPointers(G,u,_)),d&&d.bind(),S&&(S.bind(),S.setVertexAttribPointers(G,u,_)),R.currentNumAttributes=k},nf.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Wg=function(u,h,c,d,_,w){var S=u.gl;this.program=S.createProgram();for(var O=qg(c.staticAttributes),k=d?d.getBinderAttributes():[],R=O.concat(k),G=c.staticUniforms?qg(c.staticUniforms):[],W=d?d.getBinderUniforms():[],H=[],ne=0,te=G.concat(W);ne<te.length;ne+=1){var ue=te[ne];H.indexOf(ue)<0&&H.push(ue)}var Y=d?d.defines():[];w&&Y.push("#define OVERDRAW_INSPECTOR;");var le=Y.concat(Nu.fragmentSource,c.fragmentSource).join(`
`),me=Y.concat(Nu.vertexSource,c.vertexSource).join(`
`),xe=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())this.failedToCreate=!0;else{S.shaderSource(xe,le),S.compileShader(xe),S.attachShader(this.program,xe);var Ae=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())this.failedToCreate=!0;else{S.shaderSource(Ae,me),S.compileShader(Ae),S.attachShader(this.program,Ae),this.attributes={};var Me={};this.numAttributes=R.length;for(var ke=0;ke<this.numAttributes;ke++)R[ke]&&(S.bindAttribLocation(this.program,ke,R[ke]),this.attributes[R[ke]]=ke);S.linkProgram(this.program),S.deleteShader(Ae),S.deleteShader(xe);for(var je=0;je<H.length;je++){var it=H[je];if(it&&!Me[it]){var rt=S.getUniformLocation(this.program,it);rt&&(Me[it]=rt)}}this.fixedUniforms=_(u,Me),this.binderUniforms=d?d.getUniforms(u,Me):[]}}};function Hg(u,h,c){var d=1/gn(c,1,h.transform.tileZoom),_=Math.pow(2,c.tileID.overscaledZ),w=c.tileSize*Math.pow(2,h.transform.tileZoom)/_,S=w*(c.tileID.canonical.x+c.tileID.wrap*_),O=w*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d,u.fromScale,u.toScale],u_fade:u.t,u_pixel_coord_upper:[S>>16,O>>16],u_pixel_coord_lower:[65535&S,65535&O]}}Wg.prototype.draw=function(u,h,c,d,_,w,S,O,k,R,G,W,H,ne,te,ue){var Y,le=u.gl;if(!this.failedToCreate){for(var me in u.program.set(this.program),u.setDepthMode(c),u.setStencilMode(d),u.setColorMode(_),u.setCullFace(w),this.fixedUniforms)this.fixedUniforms[me].set(S[me]);ne&&ne.setUniforms(u,this.binderUniforms,W,{zoom:H});for(var xe=(Y={},Y[le.LINES]=2,Y[le.TRIANGLES]=3,Y[le.LINE_STRIP]=1,Y)[h],Ae=0,Me=G.get();Ae<Me.length;Ae+=1){var ke=Me[Ae],je=ke.vaos||(ke.vaos={});(je[O]||(je[O]=new nf)).bind(u,this,k,ne?ne.getPaintVertexBuffers():[],R,ke.vertexOffset,te,ue),le.drawElements(h,ke.primitiveLength*xe,le.UNSIGNED_SHORT,ke.primitiveOffset*xe*2)}}};var Zg=function(u,h,c,d){var _=h.style.light,w=_.properties.get("position"),S=[w.x,w.y,w.z],O=a.create$1();_.properties.get("anchor")==="viewport"&&a.fromRotation(O,-h.transform.angle),a.transformMat3(S,S,O);var k=_.properties.get("color");return{u_matrix:u,u_lightpos:S,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+c,u_opacity:d}},Dl=function(u,h,c,d,_,w,S){return a.extend(Zg(u,h,c,d),Hg(w,h,S),{u_height_factor:-Math.pow(2,_.overscaledZ)/S.tileSize/8})},Zs=function(u){return{u_matrix:u}},Nl=function(u,h,c,d){return a.extend(Zs(u),Hg(c,h,d))},Xg=function(u,h){return{u_matrix:u,u_world:h}},Kg=function(u,h,c,d,_){return a.extend(Nl(u,h,c,d),{u_world:_})},Ed=function(u,h,c,d){var _,w,S=u.transform;if(d.paint.get("circle-pitch-alignment")==="map"){var O=gn(c,1,S.zoom);_=!0,w=[O,O]}else _=!1,w=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:u.translatePosMatrix(h.posMatrix,c,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:w}},Rl=function(u,h,c){var d=gn(c,1,h.zoom),_=Math.pow(2,h.zoom-c.tileID.overscaledZ),w=c.tileID.overscaleFactor();return{u_matrix:u,u_camera_to_center_distance:h.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[h.pixelsToGLUnits[0]/(d*_),h.pixelsToGLUnits[1]/(d*_)],u_overscale_factor:w}},Yg=function(u,h,c){return{u_matrix:u,u_inv_matrix:h,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}},zl=function(u,h,c){return c===void 0&&(c=1),{u_matrix:u,u_color:h,u_overlay:0,u_overlay_scale:c}},Fl=function(u){return{u_matrix:u}},Jg=function(u,h,c,d){return{u_matrix:u,u_extrude_scale:gn(h,1,c),u_intensity:d}},$c=function(u,h,c){var d=u.transform;return{u_matrix:Qg(u,h,c),u_ratio:1/gn(h,1,d.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},an=function(u,h,c,d){return a.extend($c(u,h,c),{u_image:0,u_image_height:d})},of=function(u,h,c,d){var _=u.transform,w=Ru(h,_);return{u_matrix:Qg(u,h,c),u_texsize:h.imageAtlasTexture.size,u_ratio:1/gn(h,1,_.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[w,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},U1=function(u,h,c,d,_){var w=u.lineAtlas,S=Ru(h,u.transform),O=c.layout.get("line-cap")==="round",k=w.getDash(d.from,O),R=w.getDash(d.to,O),G=k.width*_.fromScale,W=R.width*_.toScale;return a.extend($c(u,h,c),{u_patternscale_a:[S/G,-k.height/2],u_patternscale_b:[S/W,-R.height/2],u_sdfgamma:w.width/(256*Math.min(G,W)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:R.y,u_mix:_.t})};function Ru(u,h){return 1/gn(u,1,h.tileZoom)}function Qg(u,h,c){return u.translatePosMatrix(h.tileID.posMatrix,h,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}var j1=function(u,h,c,d,_){return{u_matrix:u,u_tl_parent:h,u_scale_parent:c,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(S=_.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(w=_.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:ev(_.paint.get("raster-hue-rotate"))};var w,S};function ev(u){u*=Math.PI/180;var h=Math.sin(u),c=Math.cos(u);return[(2*c+1)/3,(-Math.sqrt(3)*h-c+1)/3,(Math.sqrt(3)*h-c+1)/3]}var af,zu=function(u,h,c,d,_,w,S,O,k,R){var G=_.transform;return{u_is_size_zoom_constant:+(u==="constant"||u==="source"),u_is_size_feature_constant:+(u==="constant"||u==="camera"),u_size_t:h?h.uSizeT:0,u_size:h?h.uSize:0,u_camera_to_center_distance:G.cameraToCenterDistance,u_pitch:G.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:G.width/G.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:S,u_coord_matrix:O,u_is_text:+k,u_pitch_with_map:+d,u_texsize:R,u_texture:0}},Gc=function(u,h,c,d,_,w,S,O,k,R,G){var W=_.transform;return a.extend(zu(u,h,c,d,_,w,S,O,k,R),{u_gamma_scale:d?Math.cos(W._pitch)*W.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+G})},sf=function(u,h,c,d,_,w,S,O,k,R){return a.extend(Gc(u,h,c,d,_,w,S,O,!0,k,!0),{u_texsize_icon:R,u_texture_icon:1})},qc=function(u,h,c){return{u_matrix:u,u_opacity:h,u_color:c}},Fu=function(u,h,c,d,_,w){return a.extend(function(S,O,k,R){var G=k.imageManager.getPattern(S.from.toString()),W=k.imageManager.getPattern(S.to.toString()),H=k.imageManager.getPixelSize(),ne=H.width,te=H.height,ue=Math.pow(2,R.tileID.overscaledZ),Y=R.tileSize*Math.pow(2,k.transform.tileZoom)/ue,le=Y*(R.tileID.canonical.x+R.tileID.wrap*ue),me=Y*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:G.tl,u_pattern_br_a:G.br,u_pattern_tl_b:W.tl,u_pattern_br_b:W.br,u_texsize:[ne,te],u_mix:O.t,u_pattern_size_a:G.displaySize,u_pattern_size_b:W.displaySize,u_scale_a:O.fromScale,u_scale_b:O.toScale,u_tile_units_to_pixels:1/gn(R,1,k.transform.tileZoom),u_pixel_coord_upper:[le>>16,me>>16],u_pixel_coord_lower:[65535&le,65535&me]}}(d,w,c,_),{u_matrix:u,u_opacity:h})},tv={fillExtrusion:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_lightpos:new a.Uniform3f(u,h.u_lightpos),u_lightintensity:new a.Uniform1f(u,h.u_lightintensity),u_lightcolor:new a.Uniform3f(u,h.u_lightcolor),u_vertical_gradient:new a.Uniform1f(u,h.u_vertical_gradient),u_opacity:new a.Uniform1f(u,h.u_opacity)}},fillExtrusionPattern:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_lightpos:new a.Uniform3f(u,h.u_lightpos),u_lightintensity:new a.Uniform1f(u,h.u_lightintensity),u_lightcolor:new a.Uniform3f(u,h.u_lightcolor),u_vertical_gradient:new a.Uniform1f(u,h.u_vertical_gradient),u_height_factor:new a.Uniform1f(u,h.u_height_factor),u_image:new a.Uniform1i(u,h.u_image),u_texsize:new a.Uniform2f(u,h.u_texsize),u_pixel_coord_upper:new a.Uniform2f(u,h.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(u,h.u_pixel_coord_lower),u_scale:new a.Uniform3f(u,h.u_scale),u_fade:new a.Uniform1f(u,h.u_fade),u_opacity:new a.Uniform1f(u,h.u_opacity)}},fill:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix)}},fillPattern:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_image:new a.Uniform1i(u,h.u_image),u_texsize:new a.Uniform2f(u,h.u_texsize),u_pixel_coord_upper:new a.Uniform2f(u,h.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(u,h.u_pixel_coord_lower),u_scale:new a.Uniform3f(u,h.u_scale),u_fade:new a.Uniform1f(u,h.u_fade)}},fillOutline:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_world:new a.Uniform2f(u,h.u_world)}},fillOutlinePattern:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_world:new a.Uniform2f(u,h.u_world),u_image:new a.Uniform1i(u,h.u_image),u_texsize:new a.Uniform2f(u,h.u_texsize),u_pixel_coord_upper:new a.Uniform2f(u,h.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(u,h.u_pixel_coord_lower),u_scale:new a.Uniform3f(u,h.u_scale),u_fade:new a.Uniform1f(u,h.u_fade)}},circle:function(u,h){return{u_camera_to_center_distance:new a.Uniform1f(u,h.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(u,h.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(u,h.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(u,h.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(u,h.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(u,h.u_matrix)}},collisionBox:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_camera_to_center_distance:new a.Uniform1f(u,h.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(u,h.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(u,h.u_extrude_scale),u_overscale_factor:new a.Uniform1f(u,h.u_overscale_factor)}},collisionCircle:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_inv_matrix:new a.UniformMatrix4f(u,h.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(u,h.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(u,h.u_viewport_size)}},debug:function(u,h){return{u_color:new a.UniformColor(u,h.u_color),u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_overlay:new a.Uniform1i(u,h.u_overlay),u_overlay_scale:new a.Uniform1f(u,h.u_overlay_scale)}},clippingMask:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix)}},heatmap:function(u,h){return{u_extrude_scale:new a.Uniform1f(u,h.u_extrude_scale),u_intensity:new a.Uniform1f(u,h.u_intensity),u_matrix:new a.UniformMatrix4f(u,h.u_matrix)}},heatmapTexture:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_world:new a.Uniform2f(u,h.u_world),u_image:new a.Uniform1i(u,h.u_image),u_color_ramp:new a.Uniform1i(u,h.u_color_ramp),u_opacity:new a.Uniform1f(u,h.u_opacity)}},hillshade:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_image:new a.Uniform1i(u,h.u_image),u_latrange:new a.Uniform2f(u,h.u_latrange),u_light:new a.Uniform2f(u,h.u_light),u_shadow:new a.UniformColor(u,h.u_shadow),u_highlight:new a.UniformColor(u,h.u_highlight),u_accent:new a.UniformColor(u,h.u_accent)}},hillshadePrepare:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_image:new a.Uniform1i(u,h.u_image),u_dimension:new a.Uniform2f(u,h.u_dimension),u_zoom:new a.Uniform1f(u,h.u_zoom),u_unpack:new a.Uniform4f(u,h.u_unpack)}},line:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_ratio:new a.Uniform1f(u,h.u_ratio),u_device_pixel_ratio:new a.Uniform1f(u,h.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(u,h.u_units_to_pixels)}},lineGradient:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_ratio:new a.Uniform1f(u,h.u_ratio),u_device_pixel_ratio:new a.Uniform1f(u,h.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(u,h.u_units_to_pixels),u_image:new a.Uniform1i(u,h.u_image),u_image_height:new a.Uniform1f(u,h.u_image_height)}},linePattern:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_texsize:new a.Uniform2f(u,h.u_texsize),u_ratio:new a.Uniform1f(u,h.u_ratio),u_device_pixel_ratio:new a.Uniform1f(u,h.u_device_pixel_ratio),u_image:new a.Uniform1i(u,h.u_image),u_units_to_pixels:new a.Uniform2f(u,h.u_units_to_pixels),u_scale:new a.Uniform3f(u,h.u_scale),u_fade:new a.Uniform1f(u,h.u_fade)}},lineSDF:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_ratio:new a.Uniform1f(u,h.u_ratio),u_device_pixel_ratio:new a.Uniform1f(u,h.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(u,h.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(u,h.u_patternscale_a),u_patternscale_b:new a.Uniform2f(u,h.u_patternscale_b),u_sdfgamma:new a.Uniform1f(u,h.u_sdfgamma),u_image:new a.Uniform1i(u,h.u_image),u_tex_y_a:new a.Uniform1f(u,h.u_tex_y_a),u_tex_y_b:new a.Uniform1f(u,h.u_tex_y_b),u_mix:new a.Uniform1f(u,h.u_mix)}},raster:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_tl_parent:new a.Uniform2f(u,h.u_tl_parent),u_scale_parent:new a.Uniform1f(u,h.u_scale_parent),u_buffer_scale:new a.Uniform1f(u,h.u_buffer_scale),u_fade_t:new a.Uniform1f(u,h.u_fade_t),u_opacity:new a.Uniform1f(u,h.u_opacity),u_image0:new a.Uniform1i(u,h.u_image0),u_image1:new a.Uniform1i(u,h.u_image1),u_brightness_low:new a.Uniform1f(u,h.u_brightness_low),u_brightness_high:new a.Uniform1f(u,h.u_brightness_high),u_saturation_factor:new a.Uniform1f(u,h.u_saturation_factor),u_contrast_factor:new a.Uniform1f(u,h.u_contrast_factor),u_spin_weights:new a.Uniform3f(u,h.u_spin_weights)}},symbolIcon:function(u,h){return{u_is_size_zoom_constant:new a.Uniform1i(u,h.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(u,h.u_is_size_feature_constant),u_size_t:new a.Uniform1f(u,h.u_size_t),u_size:new a.Uniform1f(u,h.u_size),u_camera_to_center_distance:new a.Uniform1f(u,h.u_camera_to_center_distance),u_pitch:new a.Uniform1f(u,h.u_pitch),u_rotate_symbol:new a.Uniform1i(u,h.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(u,h.u_aspect_ratio),u_fade_change:new a.Uniform1f(u,h.u_fade_change),u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(u,h.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(u,h.u_coord_matrix),u_is_text:new a.Uniform1i(u,h.u_is_text),u_pitch_with_map:new a.Uniform1i(u,h.u_pitch_with_map),u_texsize:new a.Uniform2f(u,h.u_texsize),u_texture:new a.Uniform1i(u,h.u_texture)}},symbolSDF:function(u,h){return{u_is_size_zoom_constant:new a.Uniform1i(u,h.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(u,h.u_is_size_feature_constant),u_size_t:new a.Uniform1f(u,h.u_size_t),u_size:new a.Uniform1f(u,h.u_size),u_camera_to_center_distance:new a.Uniform1f(u,h.u_camera_to_center_distance),u_pitch:new a.Uniform1f(u,h.u_pitch),u_rotate_symbol:new a.Uniform1i(u,h.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(u,h.u_aspect_ratio),u_fade_change:new a.Uniform1f(u,h.u_fade_change),u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(u,h.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(u,h.u_coord_matrix),u_is_text:new a.Uniform1i(u,h.u_is_text),u_pitch_with_map:new a.Uniform1i(u,h.u_pitch_with_map),u_texsize:new a.Uniform2f(u,h.u_texsize),u_texture:new a.Uniform1i(u,h.u_texture),u_gamma_scale:new a.Uniform1f(u,h.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(u,h.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(u,h.u_is_halo)}},symbolTextAndIcon:function(u,h){return{u_is_size_zoom_constant:new a.Uniform1i(u,h.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(u,h.u_is_size_feature_constant),u_size_t:new a.Uniform1f(u,h.u_size_t),u_size:new a.Uniform1f(u,h.u_size),u_camera_to_center_distance:new a.Uniform1f(u,h.u_camera_to_center_distance),u_pitch:new a.Uniform1f(u,h.u_pitch),u_rotate_symbol:new a.Uniform1i(u,h.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(u,h.u_aspect_ratio),u_fade_change:new a.Uniform1f(u,h.u_fade_change),u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(u,h.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(u,h.u_coord_matrix),u_is_text:new a.Uniform1i(u,h.u_is_text),u_pitch_with_map:new a.Uniform1i(u,h.u_pitch_with_map),u_texsize:new a.Uniform2f(u,h.u_texsize),u_texsize_icon:new a.Uniform2f(u,h.u_texsize_icon),u_texture:new a.Uniform1i(u,h.u_texture),u_texture_icon:new a.Uniform1i(u,h.u_texture_icon),u_gamma_scale:new a.Uniform1f(u,h.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(u,h.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(u,h.u_is_halo)}},background:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_opacity:new a.Uniform1f(u,h.u_opacity),u_color:new a.UniformColor(u,h.u_color)}},backgroundPattern:function(u,h){return{u_matrix:new a.UniformMatrix4f(u,h.u_matrix),u_opacity:new a.Uniform1f(u,h.u_opacity),u_image:new a.Uniform1i(u,h.u_image),u_pattern_tl_a:new a.Uniform2f(u,h.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(u,h.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(u,h.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(u,h.u_pattern_br_b),u_texsize:new a.Uniform2f(u,h.u_texsize),u_mix:new a.Uniform1f(u,h.u_mix),u_pattern_size_a:new a.Uniform2f(u,h.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(u,h.u_pattern_size_b),u_scale_a:new a.Uniform1f(u,h.u_scale_a),u_scale_b:new a.Uniform1f(u,h.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(u,h.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(u,h.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(u,h.u_tile_units_to_pixels)}}};function Bu(u,h,c,d,_,w,S){for(var O=u.context,k=O.gl,R=u.useProgram("collisionBox"),G=[],W=0,H=0,ne=0;ne<d.length;ne++){var te=d[ne],ue=h.getTile(te),Y=ue.getBucket(c);if(Y){var le=te.posMatrix;_[0]===0&&_[1]===0||(le=u.translatePosMatrix(te.posMatrix,ue,_,w));var me=S?Y.textCollisionBox:Y.iconCollisionBox,xe=Y.collisionCircleArray;if(xe.length>0){var Ae=a.create(),Me=le;a.mul(Ae,Y.placementInvProjMatrix,u.transform.glCoordMatrix),a.mul(Ae,Ae,Y.placementViewportMatrix),G.push({circleArray:xe,circleOffset:H,transform:Me,invTransform:Ae}),H=W+=xe.length/4}me&&R.draw(O,k.LINES,Z.disabled,Q.disabled,u.colorModeForRenderPass(),de.disabled,Rl(le,u.transform,ue),c.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,null,u.transform.zoom,null,null,me.collisionVertexBuffer)}}if(S&&G.length){var ke=u.useProgram("collisionCircle"),je=new a.StructArrayLayout2f1f2i16;je.resize(4*W),je._trim();for(var it=0,rt=0,gt=G;rt<gt.length;rt+=1)for(var Rt=gt[rt],Ut=0;Ut<Rt.circleArray.length/4;Ut++){var Bt=4*Ut,Cr=Rt.circleArray[Bt+0],xt=Rt.circleArray[Bt+1],Jt=Rt.circleArray[Bt+2],sr=Rt.circleArray[Bt+3];je.emplace(it++,Cr,xt,Jt,sr,0),je.emplace(it++,Cr,xt,Jt,sr,1),je.emplace(it++,Cr,xt,Jt,sr,2),je.emplace(it++,Cr,xt,Jt,sr,3)}(!af||af.length<2*W)&&(af=function(An){var zi=2*An,wi=new a.StructArrayLayout3ui6;wi.resize(zi),wi._trim();for(var On=0;On<zi;On++){var zn=6*On;wi.uint16[zn+0]=4*On+0,wi.uint16[zn+1]=4*On+1,wi.uint16[zn+2]=4*On+2,wi.uint16[zn+3]=4*On+2,wi.uint16[zn+4]=4*On+3,wi.uint16[zn+5]=4*On+0}return wi}(W));for(var Yt=O.createIndexBuffer(af,!0),Kt=O.createVertexBuffer(je,a.collisionCircleLayout.members,!0),or=0,Zt=G;or<Zt.length;or+=1){var Gt=Zt[or],pi=Yg(Gt.transform,Gt.invTransform,u.transform);ke.draw(O,k.TRIANGLES,Z.disabled,Q.disabled,u.colorModeForRenderPass(),de.disabled,pi,c.id,Kt,Yt,a.SegmentVector.simpleSegment(0,2*Gt.circleOffset,Gt.circleArray.length,Gt.circleArray.length/2),null,u.transform.zoom,null,null,null)}Kt.destroy(),Yt.destroy()}}var ga=a.identity(new Float32Array(16));function rv(u,h,c,d,_,w){var S=a.getAnchorAlignment(u),O=-(S.horizontalAlign-.5)*h,k=-(S.verticalAlign-.5)*c,R=a.evaluateVariableOffset(u,d);return new a.Point((O/_+R[0])*w,(k/_+R[1])*w)}function nv(u,h,c,d,_,w,S,O,k,R,G){var W=u.text.placedSymbolArray,H=u.text.dynamicLayoutVertexArray,ne=u.icon.dynamicLayoutVertexArray,te={};H.clear();for(var ue=0;ue<W.length;ue++){var Y=W.get(ue),le=Y.hidden||!Y.crossTileID||u.allowVerticalPlacement&&!Y.placedOrientation?null:d[Y.crossTileID];if(le){var me=new a.Point(Y.anchorX,Y.anchorY),xe=vr(me,c?O:S),Ae=Br(w.cameraToCenterDistance,xe.signedDistanceFromCamera),Me=_.evaluateSizeForFeature(u.textSizeData,R,Y)*Ae/a.ONE_EM;c&&(Me*=u.tilePixelRatio/k);for(var ke=rv(le.anchor,le.width,le.height,le.textOffset,le.textBoxScale,Me),je=c?vr(me.add(ke),S).point:xe.point.add(h?ke.rotate(-w.angle):ke),it=u.allowVerticalPlacement&&Y.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,rt=0;rt<Y.numGlyphs;rt++)a.addDynamicAttributes(H,je,it);G&&Y.associatedIconIndex>=0&&(te[Y.associatedIconIndex]={shiftedAnchor:je,angle:it})}else qi(Y.numGlyphs,H)}if(G){ne.clear();for(var gt=u.icon.placedSymbolArray,Rt=0;Rt<gt.length;Rt++){var Ut=gt.get(Rt);if(Ut.hidden)qi(Ut.numGlyphs,ne);else{var Bt=te[Rt];if(Bt)for(var Cr=0;Cr<Ut.numGlyphs;Cr++)a.addDynamicAttributes(ne,Bt.shiftedAnchor,Bt.angle);else qi(Ut.numGlyphs,ne)}}u.icon.dynamicLayoutVertexBuffer.updateData(ne)}u.text.dynamicLayoutVertexBuffer.updateData(H)}function iv(u,h,c){return c.iconsInText&&h?"symbolTextAndIcon":u?"symbolSDF":"symbolIcon"}function Bl(u,h,c,d,_,w,S,O,k,R,G,W){for(var H=u.context,ne=H.gl,te=u.transform,ue=O==="map",Y=k==="map",le=ue&&c.layout.get("symbol-placement")!=="point",me=ue&&!Y&&!le,xe=c.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ae=!1,Me=u.depthModeForSublayer(0,Z.ReadOnly),ke=c.layout.get("text-variable-anchor"),je=[],it=0,rt=d;it<rt.length;it+=1){var gt=rt[it],Rt=h.getTile(gt),Ut=Rt.getBucket(c);if(Ut){var Bt=_?Ut.text:Ut.icon;if(Bt&&Bt.segments.get().length){var Cr=Bt.programConfigurations.get(c.id),xt=_||Ut.sdfIcons,Jt=_?Ut.textSizeData:Ut.iconSizeData,sr=Y||te.pitch!==0,Yt=u.useProgram(iv(xt,_,Ut),Cr),Kt=a.evaluateSizeForZoom(Jt,te.zoom),or=void 0,Zt=[0,0],Gt=void 0,pi=void 0,An=null,zi=void 0;if(_)Gt=Rt.glyphAtlasTexture,pi=ne.LINEAR,or=Rt.glyphAtlasTexture.size,Ut.iconsInText&&(Zt=Rt.imageAtlasTexture.size,An=Rt.imageAtlasTexture,zi=sr||u.options.rotating||u.options.zooming||Jt.kind==="composite"||Jt.kind==="camera"?ne.LINEAR:ne.NEAREST);else{var wi=c.layout.get("icon-size").constantOr(0)!==1||Ut.iconsNeedLinear;Gt=Rt.imageAtlasTexture,pi=xt||u.options.rotating||u.options.zooming||wi||sr?ne.LINEAR:ne.NEAREST,or=Rt.imageAtlasTexture.size}var On=gn(Rt,1,u.transform.zoom),zn=yn(gt.posMatrix,Y,ue,u.transform,On),Mo=$r(gt.posMatrix,Y,ue,u.transform,On),Xi=ke&&Ut.hasTextData(),el=c.layout.get("icon-text-fit")!=="none"&&Xi&&Ut.hasIconData();le&&zc(Ut,gt.posMatrix,u,_,zn,Mo,Y,R);var oo=u.translatePosMatrix(gt.posMatrix,Rt,w,S),wa=le||_&&ke||el?ga:zn,ra=u.translatePosMatrix(Mo,Rt,w,S,!0),nh=xt&&c.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0,qu={program:Yt,buffers:Bt,uniformValues:xt?Ut.iconsInText?sf(Jt.kind,Kt,me,Y,u,oo,wa,ra,or,Zt):Gc(Jt.kind,Kt,me,Y,u,oo,wa,ra,_,or,!0):zu(Jt.kind,Kt,me,Y,u,oo,wa,ra,_,or),atlasTexture:Gt,atlasTextureIcon:An,atlasInterpolation:pi,atlasInterpolationIcon:zi,isSDF:xt,hasHalo:nh};if(xe&&Ut.canOverlap){Ae=!0;for(var tl=0,Wu=Bt.segments.get();tl<Wu.length;tl+=1){var ih=Wu[tl];je.push({segments:new a.SegmentVector([ih]),sortKey:ih.sortKey,state:qu})}}else je.push({segments:Bt.segments,sortKey:0,state:qu})}}}Ae&&je.sort(function(rl,ql){return rl.sortKey-ql.sortKey});for(var Ba=0,oh=je;Ba<oh.length;Ba+=1){var Va=oh[Ba],di=Va.state;if(H.activeTexture.set(ne.TEXTURE0),di.atlasTexture.bind(di.atlasInterpolation,ne.CLAMP_TO_EDGE),di.atlasTextureIcon&&(H.activeTexture.set(ne.TEXTURE1),di.atlasTextureIcon&&di.atlasTextureIcon.bind(di.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),di.isSDF){var ps=di.uniformValues;di.hasHalo&&(ps.u_is_halo=1,Wc(di.buffers,Va.segments,c,u,di.program,Me,G,W,ps)),ps.u_is_halo=0}Wc(di.buffers,Va.segments,c,u,di.program,Me,G,W,di.uniformValues)}}function Wc(u,h,c,d,_,w,S,O,k){var R=d.context;_.draw(R,R.gl.TRIANGLES,w,S,O,de.disabled,k,c.id,u.layoutVertexBuffer,u.indexBuffer,h,c.paint,d.transform.zoom,u.programConfigurations.get(c.id),u.dynamicLayoutVertexBuffer,u.opacityVertexBuffer)}function lf(u,h,c,d,_,w,S){var O,k,R,G,W,H=u.context.gl,ne=c.paint.get("fill-pattern"),te=ne&&ne.constantOr(1),ue=c.getCrossfadeParameters();S?(k=te&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",O=H.LINES):(k=te?"fillPattern":"fill",O=H.TRIANGLES);for(var Y=0,le=d;Y<le.length;Y+=1){var me=le[Y],xe=h.getTile(me);if(!te||xe.patternsLoaded()){var Ae=xe.getBucket(c);if(Ae){var Me=Ae.programConfigurations.get(c.id),ke=u.useProgram(k,Me);te&&(u.context.activeTexture.set(H.TEXTURE0),xe.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),Me.updatePaintBuffers(ue));var je=ne.constantOr(null);if(je&&xe.imageAtlas){var it=xe.imageAtlas,rt=it.patternPositions[je.to.toString()],gt=it.patternPositions[je.from.toString()];rt&&gt&&Me.setConstantPatternPositions(rt,gt)}var Rt=u.translatePosMatrix(me.posMatrix,xe,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(S){G=Ae.indexBuffer2,W=Ae.segments2;var Ut=[H.drawingBufferWidth,H.drawingBufferHeight];R=k==="fillOutlinePattern"&&te?Kg(Rt,u,ue,xe,Ut):Xg(Rt,Ut)}else G=Ae.indexBuffer,W=Ae.segments,R=te?Nl(Rt,u,ue,xe):Zs(Rt);ke.draw(u.context,O,_,u.stencilModeForClipping(me),w,de.disabled,R,c.id,Ae.layoutVertexBuffer,G,W,c.paint,u.transform.zoom,Me)}}}}function Sd(u,h,c,d,_,w,S){for(var O=u.context,k=O.gl,R=c.paint.get("fill-extrusion-pattern"),G=R.constantOr(1),W=c.getCrossfadeParameters(),H=c.paint.get("fill-extrusion-opacity"),ne=0,te=d;ne<te.length;ne+=1){var ue=te[ne],Y=h.getTile(ue),le=Y.getBucket(c);if(le){var me=le.programConfigurations.get(c.id),xe=u.useProgram(G?"fillExtrusionPattern":"fillExtrusion",me);G&&(u.context.activeTexture.set(k.TEXTURE0),Y.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),me.updatePaintBuffers(W));var Ae=R.constantOr(null);if(Ae&&Y.imageAtlas){var Me=Y.imageAtlas,ke=Me.patternPositions[Ae.to.toString()],je=Me.patternPositions[Ae.from.toString()];ke&&je&&me.setConstantPatternPositions(ke,je)}var it=u.translatePosMatrix(ue.posMatrix,Y,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),rt=c.paint.get("fill-extrusion-vertical-gradient"),gt=G?Dl(it,u,rt,H,ue,W,Y):Zg(it,u,rt,H);xe.draw(O,O.gl.TRIANGLES,_,w,S,de.backCCW,gt,c.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,c.paint,u.transform.zoom,me)}}}function uf(u,h,c,d,_,w){var S=u.context,O=S.gl,k=h.fbo;if(k){var R=u.useProgram("hillshade");S.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,k.colorAttachment.get());var G=function(W,H,ne){var te=ne.paint.get("hillshade-shadow-color"),ue=ne.paint.get("hillshade-highlight-color"),Y=ne.paint.get("hillshade-accent-color"),le=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(le-=W.transform.angle);var me,xe,Ae,Me=!W.options.moving;return{u_matrix:W.transform.calculatePosMatrix(H.tileID.toUnwrapped(),Me),u_image:0,u_latrange:(me=H.tileID,xe=Math.pow(2,me.canonical.z),Ae=me.canonical.y,[new a.MercatorCoordinate(0,Ae/xe).toLngLat().lat,new a.MercatorCoordinate(0,(Ae+1)/xe).toLngLat().lat]),u_light:[ne.paint.get("hillshade-exaggeration"),le],u_shadow:te,u_highlight:ue,u_accent:Y}}(u,h,c);R.draw(S,O.TRIANGLES,d,_,w,de.disabled,G,c.id,u.rasterBoundsBuffer,u.quadTriangleIndexBuffer,u.rasterBoundsSegments)}}function $1(u,h,c,d,_,w){var S=u.context,O=S.gl,k=h.dem;if(k&&k.data){var R=k.dim,G=k.stride,W=k.getPixels();if(S.activeTexture.set(O.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),h.demTexture=h.demTexture||u.getTileTexture(G),h.demTexture){var H=h.demTexture;H.update(W,{premultiply:!1}),H.bind(O.NEAREST,O.CLAMP_TO_EDGE)}else h.demTexture=new a.Texture(S,W,O.RGBA,{premultiply:!1}),h.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);S.activeTexture.set(O.TEXTURE0);var ne=h.fbo;if(!ne){var te=new a.Texture(S,{width:R,height:R,data:null},O.RGBA);te.bind(O.LINEAR,O.CLAMP_TO_EDGE),(ne=h.fbo=S.createFramebuffer(R,R,!0)).colorAttachment.set(te.texture)}S.bindFramebuffer.set(ne.framebuffer),S.viewport.set([0,0,R,R]),u.useProgram("hillshadePrepare").draw(S,O.TRIANGLES,d,_,w,de.disabled,function(ue,Y){var le=Y.stride,me=a.create();return a.ortho(me,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(me,me,[0,-a.EXTENT,0]),{u_matrix:me,u_image:1,u_dimension:[le,le],u_zoom:ue.overscaledZ,u_unpack:Y.getUnpackVector()}}(h.tileID,k),c.id,u.rasterBoundsBuffer,u.quadTriangleIndexBuffer,u.rasterBoundsSegments),h.needsHillshadePrepare=!1}}function cf(u,h,c,d,_){var w=d.paint.get("raster-fade-duration");if(w>0){var S=a.browser.now(),O=(S-u.timeAdded)/w,k=h?(S-h.timeAdded)/w:-1,R=c.getSource(),G=_.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),W=!h||Math.abs(h.tileID.overscaledZ-G)>Math.abs(u.tileID.overscaledZ-G),H=W&&u.refreshedUponExpiration?1:a.clamp(W?O:1-k,0,1);return u.refreshedUponExpiration&&O>=1&&(u.refreshedUponExpiration=!1),h?{opacity:1,mix:1-H}:{opacity:H,mix:0}}return{opacity:1,mix:0}}var Td=new a.Color(1,0,0,1),ov=new a.Color(0,1,0,1),av=new a.Color(0,0,1,1),hf=new a.Color(1,0,1,1),Md=new a.Color(0,1,1,1);function Id(u,h,c,d){Hc(u,0,h+c/2,u.transform.width,c,d)}function Od(u,h,c,d){Hc(u,h-c/2,0,c,u.transform.height,d)}function Hc(u,h,c,d,_,w){var S=u.context,O=S.gl;O.enable(O.SCISSOR_TEST),O.scissor(h*a.browser.devicePixelRatio,c*a.browser.devicePixelRatio,d*a.browser.devicePixelRatio,_*a.browser.devicePixelRatio),S.clear({color:w}),O.disable(O.SCISSOR_TEST)}function sv(u,h,c){var d=u.context,_=d.gl,w=c.posMatrix,S=u.useProgram("debug"),O=Z.disabled,k=Q.disabled,R=u.colorModeForRenderPass();d.activeTexture.set(_.TEXTURE0),u.emptyTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),S.draw(d,_.LINE_STRIP,O,k,R,de.disabled,zl(w,a.Color.red),"$debug",u.debugBuffer,u.tileBorderIndexBuffer,u.debugSegments);var G=h.getTileByID(c.key).latestRawTileData,W=Math.floor((G&&G.byteLength||0)/1024),H=h.getTile(c).tileSize,ne=512/Math.min(H,512)*(c.overscaledZ/u.transform.zoom)*.5,te=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(te+=" => "+c.overscaledZ),function(ue,Y){ue.initDebugOverlayCanvas();var le=ue.debugOverlayCanvas,me=ue.context.gl,xe=ue.debugOverlayCanvas.getContext("2d");xe.clearRect(0,0,le.width,le.height),xe.shadowColor="white",xe.shadowBlur=2,xe.lineWidth=1.5,xe.strokeStyle="white",xe.textBaseline="top",xe.font="bold 36px Open Sans, sans-serif",xe.fillText(Y,5,5),xe.strokeText(Y,5,5),ue.debugOverlayTexture.update(le),ue.debugOverlayTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE)}(u,te+" "+W+"kb"),S.draw(d,_.TRIANGLES,O,k,pe.alphaBlended,de.disabled,zl(w,a.Color.transparent,ne),"$debug",u.debugBuffer,u.quadTriangleIndexBuffer,u.debugSegments)}var Vl={symbol:function(u,h,c,d,_){if(u.renderPass==="translucent"){var w=Q.disabled,S=u.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(O,k,R,G,W,H,ne){for(var te=k.transform,ue=W==="map",Y=H==="map",le=0,me=O;le<me.length;le+=1){var xe=me[le],Ae=G.getTile(xe),Me=Ae.getBucket(R);if(Me&&Me.text&&Me.text.segments.get().length){var ke=a.evaluateSizeForZoom(Me.textSizeData,te.zoom),je=gn(Ae,1,k.transform.zoom),it=yn(xe.posMatrix,Y,ue,k.transform,je),rt=R.layout.get("icon-text-fit")!=="none"&&Me.hasIconData();if(ke){var gt=Math.pow(2,te.zoom-Ae.tileID.overscaledZ);nv(Me,ue,Y,ne,a.symbolSize,te,it,xe.posMatrix,gt,ke,rt)}}}}(d,u,c,h,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),_),c.paint.get("icon-opacity").constantOr(1)!==0&&Bl(u,h,c,d,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),w,S),c.paint.get("text-opacity").constantOr(1)!==0&&Bl(u,h,c,d,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),w,S),h.map.showCollisionBoxes&&(Bu(u,h,c,d,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),Bu(u,h,c,d,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))}},circle:function(u,h,c,d){if(u.renderPass==="translucent"){var _=c.paint.get("circle-opacity"),w=c.paint.get("circle-stroke-width"),S=c.paint.get("circle-stroke-opacity"),O=c.layout.get("circle-sort-key").constantOr(1)!==void 0;if(_.constantOr(1)!==0||w.constantOr(1)!==0&&S.constantOr(1)!==0){for(var k=u.context,R=k.gl,G=u.depthModeForSublayer(0,Z.ReadOnly),W=Q.disabled,H=u.colorModeForRenderPass(),ne=[],te=0;te<d.length;te++){var ue=d[te],Y=h.getTile(ue),le=Y.getBucket(c);if(le){var me=le.programConfigurations.get(c.id),xe={programConfiguration:me,program:u.useProgram("circle",me),layoutVertexBuffer:le.layoutVertexBuffer,indexBuffer:le.indexBuffer,uniformValues:Ed(u,ue,Y,c)};if(O)for(var Ae=0,Me=le.segments.get();Ae<Me.length;Ae+=1){var ke=Me[Ae];ne.push({segments:new a.SegmentVector([ke]),sortKey:ke.sortKey,state:xe})}else ne.push({segments:le.segments,sortKey:0,state:xe})}}O&&ne.sort(function(Rt,Ut){return Rt.sortKey-Ut.sortKey});for(var je=0,it=ne;je<it.length;je+=1){var rt=it[je],gt=rt.state;gt.program.draw(k,R.TRIANGLES,G,W,H,de.disabled,gt.uniformValues,c.id,gt.layoutVertexBuffer,gt.indexBuffer,rt.segments,c.paint,u.transform.zoom,gt.programConfiguration)}}}},heatmap:function(u,h,c,d){if(c.paint.get("heatmap-opacity")!==0)if(u.renderPass==="offscreen"){var _=u.context,w=_.gl,S=Q.disabled,O=new pe([w.ONE,w.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(ne,te,ue){var Y=ne.gl;ne.activeTexture.set(Y.TEXTURE1),ne.viewport.set([0,0,te.width/4,te.height/4]);var le=ue.heatmapFbo;if(le)Y.bindTexture(Y.TEXTURE_2D,le.colorAttachment.get()),ne.bindFramebuffer.set(le.framebuffer);else{var me=Y.createTexture();Y.bindTexture(Y.TEXTURE_2D,me),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),le=ue.heatmapFbo=ne.createFramebuffer(te.width/4,te.height/4,!1),function(xe,Ae,Me,ke){var je=xe.gl;je.texImage2D(je.TEXTURE_2D,0,je.RGBA,Ae.width/4,Ae.height/4,0,je.RGBA,xe.extRenderToTextureHalfFloat?xe.extTextureHalfFloat.HALF_FLOAT_OES:je.UNSIGNED_BYTE,null),ke.colorAttachment.set(Me)}(ne,te,me,le)}})(_,u,c),_.clear({color:a.Color.transparent});for(var k=0;k<d.length;k++){var R=d[k];if(!h.hasRenderableParent(R)){var G=h.getTile(R),W=G.getBucket(c);if(W){var H=W.programConfigurations.get(c.id);u.useProgram("heatmap",H).draw(_,w.TRIANGLES,Z.disabled,S,O,de.disabled,Jg(R.posMatrix,G,u.transform.zoom,c.paint.get("heatmap-intensity")),c.id,W.layoutVertexBuffer,W.indexBuffer,W.segments,c.paint,u.transform.zoom,H)}}}_.viewport.set([0,0,u.width,u.height])}else u.renderPass==="translucent"&&(u.context.setColorMode(u.colorModeForRenderPass()),function(ne,te){var ue=ne.context,Y=ue.gl,le=te.heatmapFbo;if(le){ue.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,le.colorAttachment.get()),ue.activeTexture.set(Y.TEXTURE1);var me=te.colorRampTexture;me||(me=te.colorRampTexture=new a.Texture(ue,te.colorRamp,Y.RGBA)),me.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),ne.useProgram("heatmapTexture").draw(ue,Y.TRIANGLES,Z.disabled,Q.disabled,ne.colorModeForRenderPass(),de.disabled,function(xe,Ae,Me,ke){var je=a.create();a.ortho(je,0,xe.width,xe.height,0,0,1);var it=xe.context.gl;return{u_matrix:je,u_world:[it.drawingBufferWidth,it.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ae.paint.get("heatmap-opacity")}}(ne,te),te.id,ne.viewportBuffer,ne.quadTriangleIndexBuffer,ne.viewportSegments,te.paint,ne.transform.zoom)}}(u,c))},line:function(u,h,c,d){if(u.renderPass==="translucent"){var _=c.paint.get("line-opacity"),w=c.paint.get("line-width");if(_.constantOr(1)!==0&&w.constantOr(1)!==0)for(var S=u.depthModeForSublayer(0,Z.ReadOnly),O=u.colorModeForRenderPass(),k=c.paint.get("line-dasharray"),R=c.paint.get("line-pattern"),G=R.constantOr(1),W=c.paint.get("line-gradient"),H=c.getCrossfadeParameters(),ne=G?"linePattern":k?"lineSDF":W?"lineGradient":"line",te=u.context,ue=te.gl,Y=!0,le=0,me=d;le<me.length;le+=1){var xe=me[le],Ae=h.getTile(xe);if(!G||Ae.patternsLoaded()){var Me=Ae.getBucket(c);if(Me){var ke=Me.programConfigurations.get(c.id),je=u.context.program.get(),it=u.useProgram(ne,ke),rt=Y||it.program!==je,gt=R.constantOr(null);if(gt&&Ae.imageAtlas){var Rt=Ae.imageAtlas,Ut=Rt.patternPositions[gt.to.toString()],Bt=Rt.patternPositions[gt.from.toString()];Ut&&Bt&&ke.setConstantPatternPositions(Ut,Bt)}var Cr=G?of(u,Ae,c,H):k?U1(u,Ae,c,k,H):W?an(u,Ae,c,Me.lineClipsArray.length):$c(u,Ae,c);if(G)te.activeTexture.set(ue.TEXTURE0),Ae.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),ke.updatePaintBuffers(H);else if(k&&(rt||u.lineAtlas.dirty))te.activeTexture.set(ue.TEXTURE0),u.lineAtlas.bind(te);else if(W){var xt=Me.gradients[c.id],Jt=xt.texture;if(c.gradientVersion!==xt.version){var sr=256;if(c.stepInterpolant){var Yt=h.getSource().maxzoom,Kt=xe.canonical.z===Yt?Math.ceil(1<<u.transform.maxZoom-xe.canonical.z):1;sr=a.clamp(a.nextPowerOfTwo(Me.maxLineLength/a.EXTENT*1024*Kt),256,te.maxTextureSize)}xt.gradient=a.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:sr,image:xt.gradient||void 0,clips:Me.lineClipsArray}),xt.texture?xt.texture.update(xt.gradient):xt.texture=new a.Texture(te,xt.gradient,ue.RGBA),xt.version=c.gradientVersion,Jt=xt.texture}te.activeTexture.set(ue.TEXTURE0),Jt.bind(c.stepInterpolant?ue.NEAREST:ue.LINEAR,ue.CLAMP_TO_EDGE)}it.draw(te,ue.TRIANGLES,S,u.stencilModeForClipping(xe),O,de.disabled,Cr,c.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,c.paint,u.transform.zoom,ke,Me.layoutVertexBuffer2),Y=!1}}}}},fill:function(u,h,c,d){var _=c.paint.get("fill-color"),w=c.paint.get("fill-opacity");if(w.constantOr(1)!==0){var S=u.colorModeForRenderPass(),O=c.paint.get("fill-pattern"),k=u.opaquePassEnabledForLayer()&&!O.constantOr(1)&&_.constantOr(a.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(u.renderPass===k){var R=u.depthModeForSublayer(1,u.renderPass==="opaque"?Z.ReadWrite:Z.ReadOnly);lf(u,h,c,d,R,S,!1)}if(u.renderPass==="translucent"&&c.paint.get("fill-antialias")){var G=u.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,Z.ReadOnly);lf(u,h,c,d,G,S,!0)}}},"fill-extrusion":function(u,h,c,d){var _=c.paint.get("fill-extrusion-opacity");if(_!==0&&u.renderPass==="translucent"){var w=new Z(u.context.gl.LEQUAL,Z.ReadWrite,u.depthRangeFor3D);if(_!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))Sd(u,h,c,d,w,Q.disabled,pe.disabled),Sd(u,h,c,d,w,u.stencilModeFor3D(),u.colorModeForRenderPass());else{var S=u.colorModeForRenderPass();Sd(u,h,c,d,w,Q.disabled,S)}}},hillshade:function(u,h,c,d){if(u.renderPass==="offscreen"||u.renderPass==="translucent"){for(var _=u.context,w=u.depthModeForSublayer(0,Z.ReadOnly),S=u.colorModeForRenderPass(),O=u.renderPass==="translucent"?u.stencilConfigForOverlap(d):[{},d],k=O[0],R=0,G=O[1];R<G.length;R+=1){var W=G[R],H=h.getTile(W);H.needsHillshadePrepare&&u.renderPass==="offscreen"?$1(u,H,c,w,Q.disabled,S):u.renderPass==="translucent"&&uf(u,H,c,w,k[W.overscaledZ],S)}_.viewport.set([0,0,u.width,u.height])}},raster:function(u,h,c,d){if(u.renderPass==="translucent"&&c.paint.get("raster-opacity")!==0&&d.length)for(var _=u.context,w=_.gl,S=h.getSource(),O=u.useProgram("raster"),k=u.colorModeForRenderPass(),R=S instanceof mr?[{},d]:u.stencilConfigForOverlap(d),G=R[0],W=R[1],H=W[W.length-1].overscaledZ,ne=!u.options.moving,te=0,ue=W;te<ue.length;te+=1){var Y=ue[te],le=u.depthModeForSublayer(Y.overscaledZ-H,c.paint.get("raster-opacity")===1?Z.ReadWrite:Z.ReadOnly,w.LESS),me=h.getTile(Y),xe=u.transform.calculatePosMatrix(Y.toUnwrapped(),ne);me.registerFadeDuration(c.paint.get("raster-fade-duration"));var Ae=h.findLoadedParent(Y,0),Me=cf(me,Ae,h,c,u.transform),ke=void 0,je=void 0,it=c.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;_.activeTexture.set(w.TEXTURE0),me.texture.bind(it,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),_.activeTexture.set(w.TEXTURE1),Ae?(Ae.texture.bind(it,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),ke=Math.pow(2,Ae.tileID.overscaledZ-me.tileID.overscaledZ),je=[me.tileID.canonical.x*ke%1,me.tileID.canonical.y*ke%1]):me.texture.bind(it,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var rt=j1(xe,je||[0,0],ke||1,Me,c);S instanceof mr?O.draw(_,w.TRIANGLES,le,Q.disabled,k,de.disabled,rt,c.id,S.boundsBuffer,u.quadTriangleIndexBuffer,S.boundsSegments):O.draw(_,w.TRIANGLES,le,G[Y.overscaledZ],k,de.disabled,rt,c.id,u.rasterBoundsBuffer,u.quadTriangleIndexBuffer,u.rasterBoundsSegments)}},background:function(u,h,c){var d=c.paint.get("background-color"),_=c.paint.get("background-opacity");if(_!==0){var w=u.context,S=w.gl,O=u.transform,k=O.tileSize,R=c.paint.get("background-pattern");if(!u.isPatternMissing(R)){var G=!R&&d.a===1&&_===1&&u.opaquePassEnabledForLayer()?"opaque":"translucent";if(u.renderPass===G){var W=Q.disabled,H=u.depthModeForSublayer(0,G==="opaque"?Z.ReadWrite:Z.ReadOnly),ne=u.colorModeForRenderPass(),te=u.useProgram(R?"backgroundPattern":"background"),ue=O.coveringTiles({tileSize:k});R&&(w.activeTexture.set(S.TEXTURE0),u.imageManager.bind(u.context));for(var Y=c.getCrossfadeParameters(),le=0,me=ue;le<me.length;le+=1){var xe=me[le],Ae=u.transform.calculatePosMatrix(xe.toUnwrapped()),Me=R?Fu(Ae,_,u,R,{tileID:xe,tileSize:k},Y):qc(Ae,_,d);te.draw(w,S.TRIANGLES,H,W,ne,de.disabled,Me,c.id,u.tileExtentBuffer,u.quadTriangleIndexBuffer,u.tileExtentSegments)}}}}},debug:function(u,h,c){for(var d=0;d<c.length;d++)sv(u,h,c[d])},custom:function(u,h,c){var d=u.context,_=c.implementation;if(u.renderPass==="offscreen"){var w=_.prerender;w&&(u.setCustomLayerDefaults(),d.setColorMode(u.colorModeForRenderPass()),w.call(_,d.gl,u.transform.customLayerMatrix()),d.setDirty(),u.setBaseState())}else if(u.renderPass==="translucent"){u.setCustomLayerDefaults(),d.setColorMode(u.colorModeForRenderPass()),d.setStencilMode(Q.disabled);var S=_.renderingMode==="3d"?new Z(u.context.gl.LEQUAL,Z.ReadWrite,u.depthRangeFor3D):u.depthModeForSublayer(0,Z.ReadOnly);d.setDepthMode(S),_.render(d.gl,u.transform.customLayerMatrix()),d.setDirty(),u.setBaseState(),d.bindFramebuffer.set(null)}}},vn=function(u,h){this.context=new $(u),this.transform=h,this._tileTextures={},this.setup(),this.numSublayers=ie.maxUnderzooming+ie.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Us,this.gpuTimers={}};vn.prototype.resize=function(u,h){if(this.width=u*a.browser.devicePixelRatio,this.height=h*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var c=0,d=this.style._order;c<d.length;c+=1)this.style._layers[d[c]].resize()},vn.prototype.setup=function(){var u=this.context,h=new a.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(a.EXTENT,0),h.emplaceBack(0,a.EXTENT),h.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(h,Hn.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var c=new a.StructArrayLayout2i4;c.emplaceBack(0,0),c.emplaceBack(a.EXTENT,0),c.emplaceBack(0,a.EXTENT),c.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=u.createVertexBuffer(c,Hn.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var d=new a.StructArrayLayout4i8;d.emplaceBack(0,0,0,0),d.emplaceBack(a.EXTENT,0,a.EXTENT,0),d.emplaceBack(0,a.EXTENT,0,a.EXTENT),d.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=u.createVertexBuffer(d,zr.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var _=new a.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(_,Hn.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var w=new a.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(w);var S=new a.StructArrayLayout3ui6;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(S),this.emptyTexture=new a.Texture(u,{width:1,height:1,data:new Uint8Array([0,0,0,0])},u.gl.RGBA);var O=this.context.gl;this.stencilClearMode=new Q({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)},vn.prototype.clearStencil=function(){var u=this.context,h=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var c=a.create();a.ortho(c,0,this.width,this.height,0,0,1),a.scale(c,c,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,h.TRIANGLES,Z.disabled,this.stencilClearMode,pe.disabled,de.disabled,Fl(c),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},vn.prototype._renderTileClippingMasks=function(u,h){if(this.currentStencilSource!==u.source&&u.isTileClipped()&&h&&h.length){this.currentStencilSource=u.source;var c=this.context,d=c.gl;this.nextStencilID+h.length>256&&this.clearStencil(),c.setColorMode(pe.disabled),c.setDepthMode(Z.disabled);var _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,S=h;w<S.length;w+=1){var O=S[w],k=this._tileClippingMaskIDs[O.key]=this.nextStencilID++;_.draw(c,d.TRIANGLES,Z.disabled,new Q({func:d.ALWAYS,mask:0},k,255,d.KEEP,d.KEEP,d.REPLACE),pe.disabled,de.disabled,Fl(O.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},vn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var u=this.nextStencilID++,h=this.context.gl;return new Q({func:h.NOTEQUAL,mask:255},u,255,h.KEEP,h.KEEP,h.REPLACE)},vn.prototype.stencilModeForClipping=function(u){var h=this.context.gl;return new Q({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,h.KEEP,h.KEEP,h.REPLACE)},vn.prototype.stencilConfigForOverlap=function(u){var h,c=this.context.gl,d=u.sort(function(k,R){return R.overscaledZ-k.overscaledZ}),_=d[d.length-1].overscaledZ,w=d[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var S={},O=0;O<w;O++)S[O+_]=new Q({func:c.GEQUAL,mask:255},O+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=w,[S,d]}return[(h={},h[_]=Q.disabled,h),d]},vn.prototype.colorModeForRenderPass=function(){var u=this.context.gl;return this._showOverdrawInspector?new pe([u.CONSTANT_COLOR,u.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?pe.unblended:pe.alphaBlended},vn.prototype.depthModeForSublayer=function(u,h,c){if(!this.opaquePassEnabledForLayer())return Z.disabled;var d=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new Z(c||this.context.gl.LEQUAL,h,[d,d])},vn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},vn.prototype.render=function(u,h){var c=this;this.style=u,this.options=h,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var d=this.style._order,_=this.style.sourceCaches;for(var w in _){var S=_[w];S.used&&S.prepare(this.context)}var O,k,R={},G={},W={};for(var H in _){var ne=_[H];R[H]=ne.getVisibleCoordinates(),G[H]=R[H].slice().reverse(),W[H]=ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var te=0;te<d.length;te++)if(this.style._layers[d[te]].is3D()){this.opaquePassCutoff=te;break}this.renderPass="offscreen";for(var ue=0,Y=d;ue<Y.length;ue+=1){var le=this.style._layers[Y[ue]];if(le.hasOffscreenPass()&&!le.isHidden(this.transform.zoom)){var me=G[le.source];(le.type==="custom"||me.length)&&this.renderLayer(this,_[le.source],le,me)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){var xe=this.style._layers[d[this.currentLayer]],Ae=_[xe.source],Me=R[xe.source];this._renderTileClippingMasks(xe,Me),this.renderLayer(this,Ae,xe,Me)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){var ke=this.style._layers[d[this.currentLayer]],je=_[ke.source],it=(ke.type==="symbol"?W:G)[ke.source];this._renderTileClippingMasks(ke,R[ke.source]),this.renderLayer(this,je,ke,it)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(rt){rt.source&&!rt.isHidden(c.transform.zoom)&&(rt.source!==(k&&k.id)&&(k=c.style.sourceCaches[rt.source]),(!O||O.getSource().maxzoom<k.getSource().maxzoom)&&(O=k))}),O&&Vl.debug(this,O,O.getVisibleCoordinates())),this.options.showPadding&&function(rt){var gt=rt.transform.padding;Id(rt,rt.transform.height-(gt.top||0),3,Td),Id(rt,gt.bottom||0,3,ov),Od(rt,gt.left||0,3,av),Od(rt,rt.transform.width-(gt.right||0),3,hf);var Rt=rt.transform.centerPoint;(function(Ut,Bt,Cr,xt){Hc(Ut,Bt-1,Cr-10,2,20,xt),Hc(Ut,Bt-10,Cr-1,20,2,xt)})(rt,Rt.x,rt.transform.height-Rt.y,Md)}(this),this.context.setDefault()},vn.prototype.renderLayer=function(u,h,c,d){c.isHidden(this.transform.zoom)||(c.type==="background"||c.type==="custom"||d.length)&&(this.id=c.id,this.gpuTimingStart(c),Vl[c.type](u,h,c,d,this.style.placement.variableOffsets),this.gpuTimingEnd())},vn.prototype.gpuTimingStart=function(u){if(this.options.gpuTiming){var h=this.context.extTimerQuery,c=this.gpuTimers[u.id];c||(c=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),c.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,c.query)}},vn.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}},vn.prototype.collectGpuTimers=function(){var u=this.gpuTimers;return this.gpuTimers={},u},vn.prototype.queryGpuTimers=function(u){var h={};for(var c in u){var d=u[c],_=this.context.extTimerQuery,w=_.getQueryObjectEXT(d.query,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(d.query),h[c]=w}return h},vn.prototype.translatePosMatrix=function(u,h,c,d,_){if(!c[0]&&!c[1])return u;var w=_?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(w){var S=Math.sin(w),O=Math.cos(w);c=[c[0]*O-c[1]*S,c[0]*S+c[1]*O]}var k=[_?c[0]:gn(h,c[0],this.transform.zoom),_?c[1]:gn(h,c[1],this.transform.zoom),0],R=new Float32Array(16);return a.translate(R,u,k),R},vn.prototype.saveTileTexture=function(u){var h=this._tileTextures[u.size[0]];h?h.push(u):this._tileTextures[u.size[0]]=[u]},vn.prototype.getTileTexture=function(u){var h=this._tileTextures[u];return h&&h.length>0?h.pop():null},vn.prototype.isPatternMissing=function(u){if(!u)return!1;if(!u.from||!u.to)return!0;var h=this.imageManager.getPattern(u.from.toString()),c=this.imageManager.getPattern(u.to.toString());return!h||!c},vn.prototype.useProgram=function(u,h){this.cache=this.cache||{};var c=""+u+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[c]||(this.cache[c]=new Wg(this.context,u,V1[u],h,tv[u],this._showOverdrawInspector)),this.cache[c]},vn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},vn.prototype.setBaseState=function(){var u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)},vn.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},vn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ff=function(u,h){this.points=u,this.planes=h};ff.fromInvProjectionMatrix=function(u,h,c){var d=Math.pow(2,c),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(S){return a.transformMat4([],S,u)}).map(function(S){return a.scale$1([],S,1/S[3]/h*d)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(S){var O=a.sub([],_[S[0]],_[S[1]]),k=a.sub([],_[S[2]],_[S[1]]),R=a.normalize([],a.cross([],O,k)),G=-a.dot(R,_[S[1]]);return R.concat(G)});return new ff(_,w)};var Ul=function(u,h){this.min=u,this.max=h,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Ul.prototype.quadrant=function(u){for(var h=[u%2==0,u<2],c=a.clone$2(this.min),d=a.clone$2(this.max),_=0;_<h.length;_++)c[_]=h[_]?this.min[_]:this.center[_],d[_]=h[_]?this.center[_]:this.max[_];return d[2]=this.max[2],new Ul(c,d)},Ul.prototype.distanceX=function(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]},Ul.prototype.distanceY=function(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]},Ul.prototype.intersects=function(u){for(var h=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],c=!0,d=0;d<u.planes.length;d++){for(var _=u.planes[d],w=0,S=0;S<h.length;S++)w+=a.dot$1(_,h[S])>=0;if(w===0)return 0;w!==h.length&&(c=!1)}if(c)return 2;for(var O=0;O<3;O++){for(var k=Number.MAX_VALUE,R=-Number.MAX_VALUE,G=0;G<u.points.length;G++){var W=u.points[G][O]-this.min[O];k=Math.min(k,W),R=Math.max(R,W)}if(R<0||k>this.max[O]-this.min[O])return 0}return 1};var Xs=function(u,h,c,d){if(u===void 0&&(u=0),h===void 0&&(h=0),c===void 0&&(c=0),d===void 0&&(d=0),isNaN(u)||u<0||isNaN(h)||h<0||isNaN(c)||c<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=h,this.left=c,this.right=d};Xs.prototype.interpolate=function(u,h,c){return h.top!=null&&u.top!=null&&(this.top=a.number(u.top,h.top,c)),h.bottom!=null&&u.bottom!=null&&(this.bottom=a.number(u.bottom,h.bottom,c)),h.left!=null&&u.left!=null&&(this.left=a.number(u.left,h.left,c)),h.right!=null&&u.right!=null&&(this.right=a.number(u.right,h.right,c)),this},Xs.prototype.getCenter=function(u,h){var c=a.clamp((this.left+u-this.right)/2,0,u),d=a.clamp((this.top+h-this.bottom)/2,0,h);return new a.Point(c,d)},Xs.prototype.equals=function(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right},Xs.prototype.clone=function(){return new Xs(this.top,this.bottom,this.left,this.right)},Xs.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Sr=function(u,h,c,d,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||_,this._minZoom=u||0,this._maxZoom=h||22,this._minPitch=c==null?0:c,this._maxPitch=d==null?60:d,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Xs,this._posMatrixCache={},this._alignedPosMatrixCache={}},sn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Sr.prototype.clone=function(){var u=new Sr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.tileSize=this.tileSize,u.latRange=this.latRange,u.width=this.width,u.height=this.height,u._center=this._center,u.zoom=this.zoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._calcMatrices(),u},sn.minZoom.get=function(){return this._minZoom},sn.minZoom.set=function(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))},sn.maxZoom.get=function(){return this._maxZoom},sn.maxZoom.set=function(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))},sn.minPitch.get=function(){return this._minPitch},sn.minPitch.set=function(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))},sn.maxPitch.get=function(){return this._maxPitch},sn.maxPitch.set=function(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))},sn.renderWorldCopies.get=function(){return this._renderWorldCopies},sn.renderWorldCopies.set=function(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u},sn.worldSize.get=function(){return this.tileSize*this.scale},sn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},sn.size.get=function(){return new a.Point(this.width,this.height)},sn.bearing.get=function(){return-this.angle/Math.PI*180},sn.bearing.set=function(u){var h=-a.wrap(u,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},sn.pitch.get=function(){return this._pitch/Math.PI*180},sn.pitch.set=function(u){var h=a.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())},sn.fov.get=function(){return this._fov/Math.PI*180},sn.fov.set=function(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())},sn.zoom.get=function(){return this._zoom},sn.zoom.set=function(u){var h=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.scale=this.zoomScale(h),this.tileZoom=Math.floor(h),this.zoomFraction=h-this.tileZoom,this._constrain(),this._calcMatrices())},sn.center.get=function(){return this._center},sn.center.set=function(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())},sn.padding.get=function(){return this._edgeInsets.toJSON()},sn.padding.set=function(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())},sn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Sr.prototype.isPaddingEqual=function(u){return this._edgeInsets.equals(u)},Sr.prototype.interpolatePadding=function(u,h,c){this._unmodified=!1,this._edgeInsets.interpolate(u,h,c),this._constrain(),this._calcMatrices()},Sr.prototype.coveringZoomLevel=function(u){var h=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,h)},Sr.prototype.getVisibleUnwrappedCoordinates=function(u){var h=[new a.UnwrappedTileID(0,u)];if(this._renderWorldCopies)for(var c=this.pointCoordinate(new a.Point(0,0)),d=this.pointCoordinate(new a.Point(this.width,0)),_=this.pointCoordinate(new a.Point(this.width,this.height)),w=this.pointCoordinate(new a.Point(0,this.height)),S=Math.floor(Math.min(c.x,d.x,_.x,w.x)),O=Math.floor(Math.max(c.x,d.x,_.x,w.x)),k=S-1;k<=O+1;k++)k!==0&&h.push(new a.UnwrappedTileID(k,u));return h},Sr.prototype.coveringTiles=function(u){var h=this.coveringZoomLevel(u),c=h;if(u.minzoom!==void 0&&h<u.minzoom)return[];u.maxzoom!==void 0&&h>u.maxzoom&&(h=u.maxzoom);var d=a.MercatorCoordinate.fromLngLat(this.center),_=Math.pow(2,h),w=[_*d.x,_*d.y,0],S=ff.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h),O=u.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(O=h);var k=function(rt){return{aabb:new Ul([rt*_,0,0],[(rt+1)*_,_,0]),zoom:0,x:0,y:0,wrap:rt,fullyVisible:!1}},R=[],G=[],W=h,H=u.reparseOverscaled?c:h;if(this._renderWorldCopies)for(var ne=1;ne<=3;ne++)R.push(k(-ne)),R.push(k(ne));for(R.push(k(0));R.length>0;){var te=R.pop(),ue=te.x,Y=te.y,le=te.fullyVisible;if(!le){var me=te.aabb.intersects(S);if(me===0)continue;le=me===2}var xe=te.aabb.distanceX(w),Ae=te.aabb.distanceY(w),Me=Math.max(Math.abs(xe),Math.abs(Ae));if(te.zoom===W||Me>3+(1<<W-te.zoom)-2&&te.zoom>=O)G.push({tileID:new a.OverscaledTileID(te.zoom===W?H:te.zoom,te.wrap,te.zoom,ue,Y),distanceSq:a.sqrLen([w[0]-.5-ue,w[1]-.5-Y])});else for(var ke=0;ke<4;ke++){var je=(ue<<1)+ke%2,it=(Y<<1)+(ke>>1);R.push({aabb:te.aabb.quadrant(ke),zoom:te.zoom+1,x:je,y:it,wrap:te.wrap,fullyVisible:le})}}return G.sort(function(rt,gt){return rt.distanceSq-gt.distanceSq}).map(function(rt){return rt.tileID})},Sr.prototype.resize=function(u,h){this.width=u,this.height=h,this.pixelsToGLUnits=[2/u,-2/h],this._constrain(),this._calcMatrices()},sn.unmodified.get=function(){return this._unmodified},Sr.prototype.zoomScale=function(u){return Math.pow(2,u)},Sr.prototype.scaleZoom=function(u){return Math.log(u)/Math.LN2},Sr.prototype.project=function(u){var h=a.clamp(u.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(u.lng)*this.worldSize,a.mercatorYfromLat(h)*this.worldSize)},Sr.prototype.unproject=function(u){return new a.MercatorCoordinate(u.x/this.worldSize,u.y/this.worldSize).toLngLat()},sn.point.get=function(){return this.project(this.center)},Sr.prototype.setLocationAtPoint=function(u,h){var c=this.pointCoordinate(h),d=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(u),w=new a.MercatorCoordinate(_.x-(c.x-d.x),_.y-(c.y-d.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},Sr.prototype.locationPoint=function(u){return this.coordinatePoint(this.locationCoordinate(u))},Sr.prototype.pointLocation=function(u){return this.coordinateLocation(this.pointCoordinate(u))},Sr.prototype.locationCoordinate=function(u){return a.MercatorCoordinate.fromLngLat(u)},Sr.prototype.coordinateLocation=function(u){return u.toLngLat()},Sr.prototype.pointCoordinate=function(u){var h=[u.x,u.y,0,1],c=[u.x,u.y,1,1];a.transformMat4(h,h,this.pixelMatrixInverse),a.transformMat4(c,c,this.pixelMatrixInverse);var d=h[3],_=c[3],w=h[1]/d,S=c[1]/_,O=h[2]/d,k=c[2]/_,R=O===k?0:(0-O)/(k-O);return new a.MercatorCoordinate(a.number(h[0]/d,c[0]/_,R)/this.worldSize,a.number(w,S,R)/this.worldSize)},Sr.prototype.coordinatePoint=function(u){var h=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.transformMat4(h,h,this.pixelMatrix),new a.Point(h[0]/h[3],h[1]/h[3])},Sr.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},Sr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Sr.prototype.setMaxBounds=function(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Sr.prototype.calculatePosMatrix=function(u,h){h===void 0&&(h=!1);var c=u.key,d=h?this._alignedPosMatrixCache:this._posMatrixCache;if(d[c])return d[c];var _=u.canonical,w=this.worldSize/this.zoomScale(_.z),S=_.x+Math.pow(2,_.z)*u.wrap,O=a.identity(new Float64Array(16));return a.translate(O,O,[S*w,_.y*w,0]),a.scale(O,O,[w/a.EXTENT,w/a.EXTENT,1]),a.multiply(O,h?this.alignedProjMatrix:this.projMatrix,O),d[c]=new Float32Array(O),d[c]},Sr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Sr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var u,h,c,d,_=-90,w=90,S=-180,O=180,k=this.size,R=this._unmodified;if(this.latRange){var G=this.latRange;_=a.mercatorYfromLat(G[1])*this.worldSize,u=(w=a.mercatorYfromLat(G[0])*this.worldSize)-_<k.y?k.y/(w-_):0}if(this.lngRange){var W=this.lngRange;S=a.mercatorXfromLng(W[0])*this.worldSize,h=(O=a.mercatorXfromLng(W[1])*this.worldSize)-S<k.x?k.x/(O-S):0}var H=this.point,ne=Math.max(h||0,u||0);if(ne)return this.center=this.unproject(new a.Point(h?(O+S)/2:H.x,u?(w+_)/2:H.y)),this.zoom+=this.scaleZoom(ne),this._unmodified=R,void(this._constraining=!1);if(this.latRange){var te=H.y,ue=k.y/2;te-ue<_&&(d=_+ue),te+ue>w&&(d=w-ue)}if(this.lngRange){var Y=H.x,le=k.x/2;Y-le<S&&(c=S+le),Y+le>O&&(c=O-le)}c===void 0&&d===void 0||(this.center=this.unproject(new a.Point(c!==void 0?c:H.x,d!==void 0?d:H.y))),this._unmodified=R,this._constraining=!1}},Sr.prototype._calcMatrices=function(){if(this.height){var u=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var h=Math.PI/2+this._pitch,c=this._fov*(.5+u.y/this.height),d=Math.sin(c)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-h-c,.01,Math.PI-.01)),_=this.point,w=_.x,S=_.y,O=1.01*(Math.cos(Math.PI/2-this._pitch)*d+this.cameraToCenterDistance),k=this.height/50,R=new Float64Array(16);a.perspective(R,this._fov,this.width/this.height,k,O),R[8]=2*-u.x/this.width,R[9]=2*u.y/this.height,a.scale(R,R,[1,-1,1]),a.translate(R,R,[0,0,-this.cameraToCenterDistance]),a.rotateX(R,R,this._pitch),a.rotateZ(R,R,this.angle),a.translate(R,R,[-w,-S,0]),this.mercatorMatrix=a.scale([],R,[this.worldSize,this.worldSize,this.worldSize]),a.scale(R,R,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=R,this.invProjMatrix=a.invert([],this.projMatrix);var G=this.width%2/2,W=this.height%2/2,H=Math.cos(this.angle),ne=Math.sin(this.angle),te=w-Math.round(w)+H*G+ne*W,ue=S-Math.round(S)+H*W+ne*G,Y=new Float64Array(R);if(a.translate(Y,Y,[te>.5?te-1:te,ue>.5?ue-1:ue,0]),this.alignedProjMatrix=Y,R=a.create(),a.scale(R,R,[this.width/2,-this.height/2,1]),a.translate(R,R,[1,-1,0]),this.labelPlaneMatrix=R,R=a.create(),a.scale(R,R,[1,-1,1]),a.translate(R,R,[-1,-1,0]),a.scale(R,R,[2/this.width,2/this.height,1]),this.glCoordMatrix=R,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(R=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=R,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Sr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var u=this.pointCoordinate(new a.Point(0,0)),h=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.transformMat4(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance},Sr.prototype.getCameraPoint=function(){var u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,u))},Sr.prototype.getCameraQueryGeometry=function(u){var h=this.getCameraPoint();if(u.length===1)return[u[0],h];for(var c=h.x,d=h.y,_=h.x,w=h.y,S=0,O=u;S<O.length;S+=1){var k=O[S];c=Math.min(c,k.x),d=Math.min(d,k.y),_=Math.max(_,k.x),w=Math.max(w,k.y)}return[new a.Point(c,d),new a.Point(_,d),new a.Point(_,w),new a.Point(c,w),new a.Point(c,d)]},Object.defineProperties(Sr.prototype,sn);var Vo=function(u){var h,c,d,_;this._hashName=u&&encodeURIComponent(u),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(h=this._updateHashUnthrottled.bind(this),c=!1,d=null,_=function(){d=null,c&&(h(),d=setTimeout(_,300),c=!1)},function(){return c=!0,d||_(),d})};Vo.prototype.addTo=function(u){return this._map=u,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Vo.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Vo.prototype.getHashString=function(u){var h=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,d=Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,d),w=Math.round(h.lng*_)/_,S=Math.round(h.lat*_)/_,O=this._map.getBearing(),k=this._map.getPitch(),R="";if(R+=u?"/"+w+"/"+S+"/"+c:c+"/"+S+"/"+w,(O||k)&&(R+="/"+Math.round(10*O)/10),k&&(R+="/"+Math.round(k)),this._hashName){var G=this._hashName,W=!1,H=a.window.location.hash.slice(1).split("&").map(function(ne){var te=ne.split("=")[0];return te===G?(W=!0,te+"="+R):ne}).filter(function(ne){return ne});return W||H.push(G+"="+R),"#"+H.join("&")}return"#"+R},Vo.prototype._getCurrentHash=function(){var u,h=this,c=a.window.location.hash.replace("#","");return this._hashName?(c.split("&").map(function(d){return d.split("=")}).forEach(function(d){d[0]===h._hashName&&(u=d)}),(u&&u[1]||"").split("/")):c.split("/")},Vo.prototype._onHashChange=function(){var u=this._getCurrentHash();if(u.length>=3&&!u.some(function(c){return isNaN(c)})){var h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:h,pitch:+(u[4]||0)}),!0}return!1},Vo.prototype._updateHashUnthrottled=function(){var u=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,u)}catch{}};var Zc={linearity:.3,easing:a.bezier(0,0,.3,1)},Vu=a.extend({deceleration:2500,maxSpeed:1400},Zc),Xc=a.extend({deceleration:20,maxSpeed:1400},Zc),G1=a.extend({deceleration:1e3,maxSpeed:360},Zc),q1=a.extend({deceleration:1e3,maxSpeed:90},Zc),Kc=function(u){this._map=u,this.clear()};function Yc(u,h){(!u.duration||u.duration<h.duration)&&(u.duration=h.duration,u.easing=h.easing)}function cs(u,h,c){var d=c.maxSpeed,_=c.linearity,w=c.deceleration,S=a.clamp(u*_/(h/1e3),-d,d),O=Math.abs(S)/(w*_);return{easing:c.easing,duration:1e3*O,amount:S*(O/2)}}Kc.prototype.clear=function(){this._inertiaBuffer=[]},Kc.prototype.record=function(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:u})},Kc.prototype._drainInertiaBuffer=function(){for(var u=this._inertiaBuffer,h=a.browser.now();u.length>0&&h-u[0].time>160;)u.shift()},Kc.prototype._onMoveEnd=function(u){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var h={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},c=0,d=this._inertiaBuffer;c<d.length;c+=1){var _=d[c].settings;h.zoom+=_.zoomDelta||0,h.bearing+=_.bearingDelta||0,h.pitch+=_.pitchDelta||0,_.panDelta&&h.pan._add(_.panDelta),_.around&&(h.around=_.around),_.pinchAround&&(h.pinchAround=_.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(h.pan.mag()){var O=cs(h.pan.mag(),w,a.extend({},Vu,u||{}));S.offset=h.pan.mult(O.amount/h.pan.mag()),S.center=this._map.transform.center,Yc(S,O)}if(h.zoom){var k=cs(h.zoom,w,Xc);S.zoom=this._map.transform.zoom+k.amount,Yc(S,k)}if(h.bearing){var R=cs(h.bearing,w,G1);S.bearing=this._map.transform.bearing+a.clamp(R.amount,-179,179),Yc(S,R)}if(h.pitch){var G=cs(h.pitch,w,q1);S.pitch=this._map.transform.pitch+G.amount,Yc(S,G)}if(S.zoom||S.bearing){var W=h.pinchAround===void 0?h.around:h.pinchAround;S.around=W?this._map.unproject(W):this._map.getCenter()}return this.clear(),a.extend(S,{noMoveStart:!0})}};var ri=function(u){function h(d,_,w,S){S===void 0&&(S={});var O=g.mousePos(_.getCanvasContainer(),w),k=_.unproject(O);u.call(this,d,a.extend({point:O,lngLat:k,originalEvent:w},S)),this._defaultPrevented=!1,this.target=_}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var c={defaultPrevented:{configurable:!0}};return h.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(h.prototype,c),h}(a.Event),Jc=function(u){function h(d,_,w){var S=d==="touchend"?w.changedTouches:w.touches,O=g.touchPos(_.getCanvasContainer(),S),k=O.map(function(W){return _.unproject(W)}),R=O.reduce(function(W,H,ne,te){return W.add(H.div(te.length))},new a.Point(0,0)),G=_.unproject(R);u.call(this,d,{points:O,point:R,lngLats:k,lngLat:G,originalEvent:w}),this._defaultPrevented=!1}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var c={defaultPrevented:{configurable:!0}};return h.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(h.prototype,c),h}(a.Event),lv=function(u){function h(d,_,w){u.call(this,d,{originalEvent:w}),this._defaultPrevented=!1}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var c={defaultPrevented:{configurable:!0}};return h.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(h.prototype,c),h}(a.Event),Zn=function(u,h){this._map=u,this._clickTolerance=h.clickTolerance};Zn.prototype.reset=function(){delete this._mousedownPos},Zn.prototype.wheel=function(u){return this._firePreventable(new lv(u.type,this._map,u))},Zn.prototype.mousedown=function(u,h){return this._mousedownPos=h,this._firePreventable(new ri(u.type,this._map,u))},Zn.prototype.mouseup=function(u){this._map.fire(new ri(u.type,this._map,u))},Zn.prototype.click=function(u,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new ri(u.type,this._map,u))},Zn.prototype.dblclick=function(u){return this._firePreventable(new ri(u.type,this._map,u))},Zn.prototype.mouseover=function(u){this._map.fire(new ri(u.type,this._map,u))},Zn.prototype.mouseout=function(u){this._map.fire(new ri(u.type,this._map,u))},Zn.prototype.touchstart=function(u){return this._firePreventable(new Jc(u.type,this._map,u))},Zn.prototype.touchmove=function(u){this._map.fire(new Jc(u.type,this._map,u))},Zn.prototype.touchend=function(u){this._map.fire(new Jc(u.type,this._map,u))},Zn.prototype.touchcancel=function(u){this._map.fire(new Jc(u.type,this._map,u))},Zn.prototype._firePreventable=function(u){if(this._map.fire(u),u.defaultPrevented)return{}},Zn.prototype.isEnabled=function(){return!0},Zn.prototype.isActive=function(){return!1},Zn.prototype.enable=function(){},Zn.prototype.disable=function(){};var wt=function(u){this._map=u};wt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},wt.prototype.mousemove=function(u){this._map.fire(new ri(u.type,this._map,u))},wt.prototype.mousedown=function(){this._delayContextMenu=!0},wt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ri("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},wt.prototype.contextmenu=function(u){this._delayContextMenu?this._contextMenuEvent=u:this._map.fire(new ri(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()},wt.prototype.isEnabled=function(){return!0},wt.prototype.isActive=function(){return!1},wt.prototype.enable=function(){},wt.prototype.disable=function(){};var bo=function(u,h){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=h.clickTolerance||1};function pf(u,h){for(var c={},d=0;d<u.length;d++)c[u[d].identifier]=h[d];return c}bo.prototype.isEnabled=function(){return!!this._enabled},bo.prototype.isActive=function(){return!!this._active},bo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},bo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},bo.prototype.mousedown=function(u,h){this.isEnabled()&&u.shiftKey&&u.button===0&&(g.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)},bo.prototype.mousemoveWindow=function(u,h){if(this._active){var c=h;if(!(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)){var d=this._startPos;this._lastPos=c,this._box||(this._box=g.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));var _=Math.min(d.x,c.x),w=Math.max(d.x,c.x),S=Math.min(d.y,c.y),O=Math.max(d.y,c.y);g.setTransform(this._box,"translate("+_+"px,"+S+"px)"),this._box.style.width=w-_+"px",this._box.style.height=O-S+"px"}}},bo.prototype.mouseupWindow=function(u,h){var c=this;if(this._active&&u.button===0){var d=this._startPos,_=h;if(this.reset(),g.suppressClick(),d.x!==_.x||d.y!==_.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:function(w){return w.fitScreenCoordinates(d,_,c._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",u)}},bo.prototype.keydown=function(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))},bo.prototype.blur=function(){this.reset()},bo.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos},bo.prototype._fireEvent=function(u,h){return this._map.fire(new a.Event(u,{originalEvent:h}))};var Uu=function(u){this.reset(),this.numTouches=u.numTouches};Uu.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Uu.prototype.touchstart=function(u,h,c){(this.centroid||c.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),c.length===this.numTouches&&(this.centroid=function(d){for(var _=new a.Point(0,0),w=0,S=d;w<S.length;w+=1)_._add(S[w]);return _.div(d.length)}(h),this.touches=pf(c,h)))},Uu.prototype.touchmove=function(u,h,c){if(!this.aborted&&this.centroid){var d=pf(c,h);for(var _ in this.touches){var w=d[_];(!w||w.dist(this.touches[_])>30)&&(this.aborted=!0)}}},Uu.prototype.touchend=function(u,h,c){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),c.length===0){var d=!this.aborted&&this.centroid;if(this.reset(),d)return d}};var va=function(u){this.singleTap=new Uu(u),this.numTaps=u.numTaps,this.reset()};va.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},va.prototype.touchstart=function(u,h,c){this.singleTap.touchstart(u,h,c)},va.prototype.touchmove=function(u,h,c){this.singleTap.touchmove(u,h,c)},va.prototype.touchend=function(u,h,c){var d=this.singleTap.touchend(u,h,c);if(d){var _=u.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(d)<30;if(_&&w||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}};var wo=function(){this._zoomIn=new va({numTouches:1,numTaps:2}),this._zoomOut=new va({numTouches:2,numTaps:1}),this.reset()};wo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},wo.prototype.touchstart=function(u,h,c){this._zoomIn.touchstart(u,h,c),this._zoomOut.touchstart(u,h,c)},wo.prototype.touchmove=function(u,h,c){this._zoomIn.touchmove(u,h,c),this._zoomOut.touchmove(u,h,c)},wo.prototype.touchend=function(u,h,c){var d=this,_=this._zoomIn.touchend(u,h,c),w=this._zoomOut.touchend(u,h,c);return _?(this._active=!0,u.preventDefault(),setTimeout(function(){return d.reset()},0),{cameraAnimation:function(S){return S.easeTo({duration:300,zoom:S.getZoom()+1,around:S.unproject(_)},{originalEvent:u})}}):w?(this._active=!0,u.preventDefault(),setTimeout(function(){return d.reset()},0),{cameraAnimation:function(S){return S.easeTo({duration:300,zoom:S.getZoom()-1,around:S.unproject(w)},{originalEvent:u})}}):void 0},wo.prototype.touchcancel=function(){this.reset()},wo.prototype.enable=function(){this._enabled=!0},wo.prototype.disable=function(){this._enabled=!1,this.reset()},wo.prototype.isEnabled=function(){return this._enabled},wo.prototype.isActive=function(){return this._active};var Cd={0:1,2:2},ct=function(u){this.reset(),this._clickTolerance=u.clickTolerance||1};ct.prototype.blur=function(){this.reset()},ct.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ct.prototype._correctButton=function(u,h){return!1},ct.prototype._move=function(u,h){return{}},ct.prototype.mousedown=function(u,h){if(!this._lastPoint){var c=g.mouseButton(u);this._correctButton(u,c)&&(this._lastPoint=h,this._eventButton=c)}},ct.prototype.mousemoveWindow=function(u,h){var c=this._lastPoint;if(c){if(u.preventDefault(),function(d,_){var w=Cd[_];return d.buttons===void 0||(d.buttons&w)!==w}(u,this._eventButton))this.reset();else if(this._moved||!(h.dist(c)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(c,h)}},ct.prototype.mouseupWindow=function(u){this._lastPoint&&g.mouseButton(u)===this._eventButton&&(this._moved&&g.suppressClick(),this.reset())},ct.prototype.enable=function(){this._enabled=!0},ct.prototype.disable=function(){this._enabled=!1,this.reset()},ct.prototype.isEnabled=function(){return this._enabled},ct.prototype.isActive=function(){return this._active};var Ad=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.mousedown=function(c,d){u.prototype.mousedown.call(this,c,d),this._lastPoint&&(this._active=!0)},h.prototype._correctButton=function(c,d){return d===0&&!c.ctrlKey},h.prototype._move=function(c,d){return{around:d,panDelta:d.sub(c)}},h}(ct),df=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype._correctButton=function(c,d){return d===0&&c.ctrlKey||d===2},h.prototype._move=function(c,d){var _=.8*(d.x-c.x);if(_)return this._active=!0,{bearingDelta:_}},h.prototype.contextmenu=function(c){c.preventDefault()},h}(ct),Pd=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype._correctButton=function(c,d){return d===0&&c.ctrlKey||d===2},h.prototype._move=function(c,d){var _=-.5*(d.y-c.y);if(_)return this._active=!0,{pitchDelta:_}},h.prototype.contextmenu=function(c){c.preventDefault()},h}(ct),Qo=function(u){this._minTouches=1,this._clickTolerance=u.clickTolerance||1,this.reset()};Qo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},Qo.prototype.touchstart=function(u,h,c){return this._calculateTransform(u,h,c)},Qo.prototype.touchmove=function(u,h,c){if(this._active&&!(c.length<this._minTouches))return u.preventDefault(),this._calculateTransform(u,h,c)},Qo.prototype.touchend=function(u,h,c){this._calculateTransform(u,h,c),this._active&&c.length<this._minTouches&&this.reset()},Qo.prototype.touchcancel=function(){this.reset()},Qo.prototype._calculateTransform=function(u,h,c){c.length>0&&(this._active=!0);var d=pf(c,h),_=new a.Point(0,0),w=new a.Point(0,0),S=0;for(var O in d){var k=d[O],R=this._touches[O];R&&(_._add(k),w._add(k.sub(R)),S++,d[O]=k)}if(this._touches=d,!(S<this._minTouches)&&w.mag()){var G=w.div(S);if(this._sum._add(G),!(this._sum.mag()<this._clickTolerance))return{around:_.div(S),panDelta:G}}},Qo.prototype.enable=function(){this._enabled=!0},Qo.prototype.disable=function(){this._enabled=!1,this.reset()},Qo.prototype.isEnabled=function(){return this._enabled},Qo.prototype.isActive=function(){return this._active};var Eo=function(){this.reset()};function mf(u,h,c){for(var d=0;d<u.length;d++)if(u[d].identifier===c)return h[d]}function yf(u,h){return Math.log(u/h)/Math.LN2}Eo.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Eo.prototype._start=function(u){},Eo.prototype._move=function(u,h,c){return{}},Eo.prototype.touchstart=function(u,h,c){this._firstTwoTouches||c.length<2||(this._firstTwoTouches=[c[0].identifier,c[1].identifier],this._start([h[0],h[1]]))},Eo.prototype.touchmove=function(u,h,c){if(this._firstTwoTouches){u.preventDefault();var d=this._firstTwoTouches,_=d[1],w=mf(c,h,d[0]),S=mf(c,h,_);if(w&&S){var O=this._aroundCenter?null:w.add(S).div(2);return this._move([w,S],O,u)}}},Eo.prototype.touchend=function(u,h,c){if(this._firstTwoTouches){var d=this._firstTwoTouches,_=d[1],w=mf(c,h,d[0]),S=mf(c,h,_);w&&S||(this._active&&g.suppressClick(),this.reset())}},Eo.prototype.touchcancel=function(){this.reset()},Eo.prototype.enable=function(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"},Eo.prototype.disable=function(){this._enabled=!1,this.reset()},Eo.prototype.isEnabled=function(){return this._enabled},Eo.prototype.isActive=function(){return this._active};var So=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.reset=function(){u.prototype.reset.call(this),delete this._distance,delete this._startDistance},h.prototype._start=function(c){this._startDistance=this._distance=c[0].dist(c[1])},h.prototype._move=function(c,d){var _=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(yf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:yf(this._distance,_),pinchAround:d}},h}(Eo);function hs(u,h){return 180*u.angleWith(h)/Math.PI}var uv=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.reset=function(){u.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},h.prototype._start=function(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])},h.prototype._move=function(c,d){var _=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:hs(this._vector,_),pinchAround:d}},h.prototype._isBelowThreshold=function(c){this._minDiameter=Math.min(this._minDiameter,c.mag());var d=25/(Math.PI*this._minDiameter)*360,_=hs(c,this._startVector);return Math.abs(_)<d},h}(Eo);function Qc(u){return Math.abs(u.y)>Math.abs(u.x)}var kd=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.reset=function(){u.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},h.prototype._start=function(c){this._lastPoints=c,Qc(c[0].sub(c[1]))&&(this._valid=!1)},h.prototype._move=function(c,d,_){var w=c[0].sub(this._lastPoints[0]),S=c[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,S,_.timeStamp),this._valid)return this._lastPoints=c,this._active=!0,{pitchDelta:(w.y+S.y)/2*-.5}},h.prototype.gestureBeginsVertically=function(c,d,_){if(this._valid!==void 0)return this._valid;var w=c.mag()>=2,S=d.mag()>=2;if(w||S){if(!w||!S)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;var O=c.y>0==d.y>0;return Qc(c)&&Qc(d)&&O}},h}(Eo),Ld={panStep:100,bearingStep:15,pitchStep:10},_a=function(){var u=Ld;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1};function Uo(u){return u*(2-u)}_a.prototype.blur=function(){this.reset()},_a.prototype.reset=function(){this._active=!1},_a.prototype.keydown=function(u){var h=this;if(!(u.altKey||u.ctrlKey||u.metaKey)){var c=0,d=0,_=0,w=0,S=0;switch(u.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:u.shiftKey?d=-1:(u.preventDefault(),w=-1);break;case 39:u.shiftKey?d=1:(u.preventDefault(),w=1);break;case 38:u.shiftKey?_=1:(u.preventDefault(),S=-1);break;case 40:u.shiftKey?_=-1:(u.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(d=0,_=0),{cameraAnimation:function(O){var k=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:Uo,zoom:c?Math.round(k)+c*(u.shiftKey?2:1):k,bearing:O.getBearing()+d*h._bearingStep,pitch:O.getPitch()+_*h._pitchStep,offset:[-w*h._panStep,-S*h._panStep],center:O.getCenter()},{originalEvent:u})}}}},_a.prototype.enable=function(){this._enabled=!0},_a.prototype.disable=function(){this._enabled=!1,this.reset()},_a.prototype.isEnabled=function(){return this._enabled},_a.prototype.isActive=function(){return this._active},_a.prototype.disableRotation=function(){this._rotationDisabled=!0},_a.prototype.enableRotation=function(){this._rotationDisabled=!1};var gr=function(u,h){this._map=u,this._el=u.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onTimeout"],this)};gr.prototype.setZoomRate=function(u){this._defaultZoomRate=u},gr.prototype.setWheelZoomRate=function(u){this._wheelZoomRate=u},gr.prototype.isEnabled=function(){return!!this._enabled},gr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},gr.prototype.isZooming=function(){return!!this._zooming},gr.prototype.enable=function(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=u&&u.around==="center")},gr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},gr.prototype.wheel=function(u){if(this.isEnabled()){var h=u.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY,c=a.browser.now(),d=c-(this._lastWheelEventTime||0);this._lastWheelEventTime=c,h!==0&&h%4.000244140625==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(d*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),u.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=u,this._delta-=h,this._active||this._start(u)),u.preventDefault()}},gr.prototype._onTimeout=function(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)},gr.prototype._start=function(u){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var h=g.mousePos(this._el,u);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(h)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},gr.prototype.renderFrame=function(){var u=this;if(this._frameId&&(this._frameId=null,this.isActive())){var h=this._map.transform;if(this._delta!==0){var c=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,d=2/(1+Math.exp(-Math.abs(this._delta*c)));this._delta<0&&d!==0&&(d=1/d);var _=typeof this._targetZoom=="number"?h.zoomScale(this._targetZoom):h.scale;this._targetZoom=Math.min(h.maxZoom,Math.max(h.minZoom,h.scaleZoom(_*d))),this._type==="wheel"&&(this._startZoom=h.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,S=typeof this._targetZoom=="number"?this._targetZoom:h.zoom,O=this._startZoom,k=this._easing,R=!1;if(this._type==="wheel"&&O&&k){var G=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),W=k(G);w=a.number(O,S,W),G<1?this._frameId||(this._frameId=!0):R=!0}else w=S,R=!0;return this._active=!0,R&&(this._active=!1,this._finishTimeout=setTimeout(function(){u._zooming=!1,u._handler._triggerRenderFrame(),delete u._targetZoom,delete u._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!R,zoomDelta:w-h.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},gr.prototype._smoothOutEasing=function(u){var h=a.ease;if(this._prevEase){var c=this._prevEase,d=(a.browser.now()-c.start)/c.duration,_=c.easing(d+.01)-c.easing(d),w=.27/Math.sqrt(_*_+1e-4)*.01,S=Math.sqrt(.0729-w*w);h=a.bezier(w,S,.25,1)}return this._prevEase={start:a.browser.now(),duration:u,easing:h},h},gr.prototype.blur=function(){this.reset()},gr.prototype.reset=function(){this._active=!1};var Ra=function(u,h){this._clickZoom=u,this._tapZoom=h};Ra.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ra.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ra.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ra.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ea=function(){this.reset()};ea.prototype.reset=function(){this._active=!1},ea.prototype.blur=function(){this.reset()},ea.prototype.dblclick=function(u,h){return u.preventDefault(),{cameraAnimation:function(c){c.easeTo({duration:300,zoom:c.getZoom()+(u.shiftKey?-1:1),around:c.unproject(h)},{originalEvent:u})}}},ea.prototype.enable=function(){this._enabled=!0},ea.prototype.disable=function(){this._enabled=!1,this.reset()},ea.prototype.isEnabled=function(){return this._enabled},ea.prototype.isActive=function(){return this._active};var ki=function(){this._tap=new va({numTouches:1,numTaps:1}),this.reset()};ki.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ki.prototype.touchstart=function(u,h,c){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?c.length>0&&(this._swipePoint=h[0],this._swipeTouch=c[0].identifier):this._tap.touchstart(u,h,c))},ki.prototype.touchmove=function(u,h,c){if(this._tapTime){if(this._swipePoint){if(c[0].identifier!==this._swipeTouch)return;var d=h[0],_=d.y-this._swipePoint.y;return this._swipePoint=d,u.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(u,h,c)},ki.prototype.touchend=function(u,h,c){this._tapTime?this._swipePoint&&c.length===0&&this.reset():this._tap.touchend(u,h,c)&&(this._tapTime=u.timeStamp)},ki.prototype.touchcancel=function(){this.reset()},ki.prototype.enable=function(){this._enabled=!0},ki.prototype.disable=function(){this._enabled=!1,this.reset()},ki.prototype.isEnabled=function(){return this._enabled},ki.prototype.isActive=function(){return this._active};var jl=function(u,h,c){this._el=u,this._mousePan=h,this._touchPan=c};jl.prototype.enable=function(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},jl.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},jl.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},jl.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ks=function(u,h,c){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=h,this._mousePitch=c};Ks.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ks.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ks.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ks.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var xa=function(u,h,c,d){this._el=u,this._touchZoom=h,this._touchRotate=c,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0};xa.prototype.enable=function(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},xa.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},xa.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},xa.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},xa.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},xa.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Hi=function(u){return u.zoom||u.drag||u.pitch||u.rotate},eh=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h}(a.Event);function Nt(u){return u.panDelta&&u.panDelta.mag()||u.zoomDelta||u.bearingDelta||u.pitchDelta}var Tt=function(u,h){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Kc(u),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h),a.bindAll(["handleEvent","handleWindowEvent"],this);var c=this._el;this._listeners=[[c,"touchstart",{passive:!0}],[c,"touchmove",{passive:!1}],[c,"touchend",void 0],[c,"touchcancel",void 0],[c,"mousedown",void 0],[c,"mousemove",void 0],[c,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[c,"mouseover",void 0],[c,"mouseout",void 0],[c,"dblclick",void 0],[c,"click",void 0],[c,"keydown",{capture:!1}],[c,"keyup",void 0],[c,"wheel",{passive:!1}],[c,"contextmenu",void 0],[a.window,"blur",void 0]];for(var d=0,_=this._listeners;d<_.length;d+=1){var w=_[d],S=w[0];g.addEventListener(S,w[1],S===a.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};Tt.prototype.destroy=function(){for(var u=0,h=this._listeners;u<h.length;u+=1){var c=h[u],d=c[0];g.removeEventListener(d,c[1],d===a.window.document?this.handleWindowEvent:this.handleEvent,c[2])}},Tt.prototype._addDefaultHandlers=function(u){var h=this._map,c=h.getCanvasContainer();this._add("mapEvent",new Zn(h,u));var d=h.boxZoom=new bo(h,u);this._add("boxZoom",d);var _=new wo,w=new ea;h.doubleClickZoom=new Ra(w,_),this._add("tapZoom",_),this._add("clickZoom",w);var S=new ki;this._add("tapDragZoom",S);var O=h.touchPitch=new kd;this._add("touchPitch",O);var k=new df(u),R=new Pd(u);h.dragRotate=new Ks(u,k,R),this._add("mouseRotate",k,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]);var G=new Ad(u),W=new Qo(u);h.dragPan=new jl(c,G,W),this._add("mousePan",G),this._add("touchPan",W,["touchZoom","touchRotate"]);var H=new uv,ne=new So;h.touchZoomRotate=new xa(c,ne,H,S),this._add("touchRotate",H,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]);var te=h.scrollZoom=new gr(h,this);this._add("scrollZoom",te,["mousePan"]);var ue=h.keyboard=new _a;this._add("keyboard",ue),this._add("blockableMapEvent",new wt(h));for(var Y=0,le=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Y<le.length;Y+=1){var me=le[Y];u.interactive&&u[me]&&h[me].enable(u[me])}},Tt.prototype._add=function(u,h,c){this._handlers.push({handlerName:u,handler:h,allowed:c}),this._handlersById[u]=h},Tt.prototype.stop=function(u){if(!this._updatingCamera){for(var h=0,c=this._handlers;h<c.length;h+=1)c[h].handler.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}},Tt.prototype.isActive=function(){for(var u=0,h=this._handlers;u<h.length;u+=1)if(h[u].handler.isActive())return!0;return!1},Tt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Tt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Tt.prototype.isMoving=function(){return Boolean(Hi(this._eventsInProgress))||this.isZooming()},Tt.prototype._blockedByActive=function(u,h,c){for(var d in u)if(d!==c&&(!h||h.indexOf(d)<0))return!0;return!1},Tt.prototype.handleWindowEvent=function(u){this.handleEvent(u,u.type+"Window")},Tt.prototype._getMapTouches=function(u){for(var h=[],c=0,d=u;c<d.length;c+=1){var _=d[c];this._el.contains(_.target)&&h.push(_)}return h},Tt.prototype.handleEvent=function(u,h){this._updatingCamera=!0;for(var c=u.type==="renderFrame"?void 0:u,d={needsRenderFrame:!1},_={},w={},S=u.touches?this._getMapTouches(u.touches):void 0,O=S?g.touchPos(this._el,S):g.mousePos(this._el,u),k=0,R=this._handlers;k<R.length;k+=1){var G=R[k],W=G.handlerName,H=G.handler,ne=G.allowed;if(H.isEnabled()){var te=void 0;this._blockedByActive(w,ne,W)?H.reset():H[h||u.type]&&(te=H[h||u.type](u,O,S),this.mergeHandlerResult(d,_,te,W,c),te&&te.needsRenderFrame&&this._triggerRenderFrame()),(te||H.isActive())&&(w[W]=H)}}var ue={};for(var Y in this._previousActiveHandlers)w[Y]||(ue[Y]=c);this._previousActiveHandlers=w,(Object.keys(ue).length||Nt(d))&&(this._changes.push([d,_,ue]),this._triggerRenderFrame()),(Object.keys(w).length||Nt(d))&&this._map._stop(!0),this._updatingCamera=!1;var le=d.cameraAnimation;le&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],le(this._map))},Tt.prototype.mergeHandlerResult=function(u,h,c,d,_){if(c){a.extend(u,c);var w={handlerName:d,originalEvent:c.originalEvent||_};c.zoomDelta!==void 0&&(h.zoom=w),c.panDelta!==void 0&&(h.drag=w),c.pitchDelta!==void 0&&(h.pitch=w),c.bearingDelta!==void 0&&(h.rotate=w)}},Tt.prototype._applyChanges=function(){for(var u={},h={},c={},d=0,_=this._changes;d<_.length;d+=1){var w=_[d],S=w[0],O=w[1],k=w[2];S.panDelta&&(u.panDelta=(u.panDelta||new a.Point(0,0))._add(S.panDelta)),S.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(u.around=S.around),S.pinchAround!==void 0&&(u.pinchAround=S.pinchAround),S.noInertia&&(u.noInertia=S.noInertia),a.extend(h,O),a.extend(c,k)}this._updateMapTransform(u,h,c),this._changes=[]},Tt.prototype._updateMapTransform=function(u,h,c){var d=this._map,_=d.transform;if(!Nt(u))return this._fireEvents(h,c,!0);var w=u.panDelta,S=u.zoomDelta,O=u.bearingDelta,k=u.pitchDelta,R=u.around,G=u.pinchAround;G!==void 0&&(R=G),d._stop(!0),R=R||d.transform.centerPoint;var W=_.pointLocation(w?R.sub(w):R);O&&(_.bearing+=O),k&&(_.pitch+=k),S&&(_.zoom+=S),_.setLocationAtPoint(W,R),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(h,c,!0)},Tt.prototype._fireEvents=function(u,h,c){var d=this,_=Hi(this._eventsInProgress),w=Hi(u),S={};for(var O in u)this._eventsInProgress[O]||(S[O+"start"]=u[O].originalEvent),this._eventsInProgress[O]=u[O];for(var k in!_&&w&&this._fireEvent("movestart",w.originalEvent),S)this._fireEvent(k,S[k]);for(var R in w&&this._fireEvent("move",w.originalEvent),u)this._fireEvent(R,u[R].originalEvent);var G,W={};for(var H in this._eventsInProgress){var ne=this._eventsInProgress[H],te=ne.handlerName,ue=ne.originalEvent;this._handlersById[te].isActive()||(delete this._eventsInProgress[H],W[H+"end"]=G=h[te]||ue)}for(var Y in W)this._fireEvent(Y,W[Y]);var le=Hi(this._eventsInProgress);if(c&&(_||w)&&!le){this._updatingCamera=!0;var me=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),xe=function(Ae){return Ae!==0&&-d._bearingSnap<Ae&&Ae<d._bearingSnap};me?(xe(me.bearing||this._map.getBearing())&&(me.bearing=0),this._map.easeTo(me,{originalEvent:G})):(this._map.fire(new a.Event("moveend",{originalEvent:G})),xe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Tt.prototype._fireEvent=function(u,h){this._map.fire(new a.Event(u,h?{originalEvent:h}:{}))},Tt.prototype._requestFrame=function(){var u=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(h){delete u._frameId,u.handleEvent(new eh("renderFrame",{timeStamp:h})),u._applyChanges()})},Tt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var gf=function(u){function h(c,d){u.call(this),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=d.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},h.prototype.setCenter=function(c,d){return this.jumpTo({center:c},d)},h.prototype.panBy=function(c,d,_){return c=a.Point.convert(c).mult(-1),this.panTo(this.transform.center,a.extend({offset:c},d),_)},h.prototype.panTo=function(c,d,_){return this.easeTo(a.extend({center:c},d),_)},h.prototype.getZoom=function(){return this.transform.zoom},h.prototype.setZoom=function(c,d){return this.jumpTo({zoom:c},d),this},h.prototype.zoomTo=function(c,d,_){return this.easeTo(a.extend({zoom:c},d),_)},h.prototype.zoomIn=function(c,d){return this.zoomTo(this.getZoom()+1,c,d),this},h.prototype.zoomOut=function(c,d){return this.zoomTo(this.getZoom()-1,c,d),this},h.prototype.getBearing=function(){return this.transform.bearing},h.prototype.setBearing=function(c,d){return this.jumpTo({bearing:c},d),this},h.prototype.getPadding=function(){return this.transform.padding},h.prototype.setPadding=function(c,d){return this.jumpTo({padding:c},d),this},h.prototype.rotateTo=function(c,d,_){return this.easeTo(a.extend({bearing:c},d),_)},h.prototype.resetNorth=function(c,d){return this.rotateTo(0,a.extend({duration:1e3},c),d),this},h.prototype.resetNorthPitch=function(c,d){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},c),d),this},h.prototype.snapToNorth=function(c,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,d):this},h.prototype.getPitch=function(){return this.transform.pitch},h.prototype.setPitch=function(c,d){return this.jumpTo({pitch:c},d),this},h.prototype.cameraForBounds=function(c,d){c=a.LngLatBounds.convert(c);var _=d&&d.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),_,d)},h.prototype._cameraForBoxAndBearing=function(c,d,_,w){var S={top:0,bottom:0,right:0,left:0};if(typeof(w=a.extend({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var O=w.padding;w.padding={top:O,bottom:O,right:O,left:O}}w.padding=a.extend(S,w.padding);var k=this.transform,R=k.padding,G=k.project(a.LngLat.convert(c)),W=k.project(a.LngLat.convert(d)),H=G.rotate(-_*Math.PI/180),ne=W.rotate(-_*Math.PI/180),te=new a.Point(Math.max(H.x,ne.x),Math.max(H.y,ne.y)),ue=new a.Point(Math.min(H.x,ne.x),Math.min(H.y,ne.y)),Y=te.sub(ue),le=(k.width-(R.left+R.right+w.padding.left+w.padding.right))/Y.x,me=(k.height-(R.top+R.bottom+w.padding.top+w.padding.bottom))/Y.y;if(!(me<0||le<0)){var xe=Math.min(k.scaleZoom(k.scale*Math.min(le,me)),w.maxZoom),Ae=typeof w.offset.x=="number"?new a.Point(w.offset.x,w.offset.y):a.Point.convert(w.offset),Me=new a.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(_*Math.PI/180),ke=Ae.add(Me).mult(k.scale/k.zoomScale(xe));return{center:k.unproject(G.add(W).div(2).sub(ke)),zoom:xe,bearing:_}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},h.prototype.fitBounds=function(c,d,_){return this._fitInternal(this.cameraForBounds(c,d),d,_)},h.prototype.fitScreenCoordinates=function(c,d,_,w,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(c)),this.transform.pointLocation(a.Point.convert(d)),_,w),w,S)},h.prototype._fitInternal=function(c,d,_){return c?(delete(d=a.extend(c,d)).padding,d.linear?this.easeTo(d,_):this.flyTo(d,_)):this},h.prototype.jumpTo=function(c,d){this.stop();var _=this.transform,w=!1,S=!1,O=!1;return"zoom"in c&&_.zoom!==+c.zoom&&(w=!0,_.zoom=+c.zoom),c.center!==void 0&&(_.center=a.LngLat.convert(c.center)),"bearing"in c&&_.bearing!==+c.bearing&&(S=!0,_.bearing=+c.bearing),"pitch"in c&&_.pitch!==+c.pitch&&(O=!0,_.pitch=+c.pitch),c.padding==null||_.isPaddingEqual(c.padding)||(_.padding=c.padding),this.fire(new a.Event("movestart",d)).fire(new a.Event("move",d)),w&&this.fire(new a.Event("zoomstart",d)).fire(new a.Event("zoom",d)).fire(new a.Event("zoomend",d)),S&&this.fire(new a.Event("rotatestart",d)).fire(new a.Event("rotate",d)).fire(new a.Event("rotateend",d)),O&&this.fire(new a.Event("pitchstart",d)).fire(new a.Event("pitch",d)).fire(new a.Event("pitchend",d)),this.fire(new a.Event("moveend",d))},h.prototype.easeTo=function(c,d){var _=this;this._stop(!1,c.easeId),((c=a.extend({offset:[0,0],duration:500,easing:a.ease},c)).animate===!1||!c.essential&&a.browser.prefersReducedMotion)&&(c.duration=0);var w=this.transform,S=this.getZoom(),O=this.getBearing(),k=this.getPitch(),R=this.getPadding(),G="zoom"in c?+c.zoom:S,W="bearing"in c?this._normalizeBearing(c.bearing,O):O,H="pitch"in c?+c.pitch:k,ne="padding"in c?c.padding:w.padding,te=a.Point.convert(c.offset),ue=w.centerPoint.add(te),Y=w.pointLocation(ue),le=a.LngLat.convert(c.center||Y);this._normalizeCenter(le);var me,xe,Ae=w.project(Y),Me=w.project(le).sub(Ae),ke=w.zoomScale(G-S);c.around&&(me=a.LngLat.convert(c.around),xe=w.locationPoint(me));var je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||G!==S,this._rotating=this._rotating||O!==W,this._pitching=this._pitching||H!==k,this._padding=!w.isPaddingEqual(ne),this._easeId=c.easeId,this._prepareEase(d,c.noMoveStart,je),this._ease(function(it){if(_._zooming&&(w.zoom=a.number(S,G,it)),_._rotating&&(w.bearing=a.number(O,W,it)),_._pitching&&(w.pitch=a.number(k,H,it)),_._padding&&(w.interpolatePadding(R,ne,it),ue=w.centerPoint.add(te)),me)w.setLocationAtPoint(me,xe);else{var rt=w.zoomScale(w.zoom-S),gt=G>S?Math.min(2,ke):Math.max(.5,ke),Rt=Math.pow(gt,1-it),Ut=w.unproject(Ae.add(Me.mult(it*Rt)).mult(rt));w.setLocationAtPoint(w.renderWorldCopies?Ut.wrap():Ut,ue)}_._fireMoveEvents(d)},function(it){_._afterEase(d,it)},c),this},h.prototype._prepareEase=function(c,d,_){_===void 0&&(_={}),this._moving=!0,d||_.moving||this.fire(new a.Event("movestart",c)),this._zooming&&!_.zooming&&this.fire(new a.Event("zoomstart",c)),this._rotating&&!_.rotating&&this.fire(new a.Event("rotatestart",c)),this._pitching&&!_.pitching&&this.fire(new a.Event("pitchstart",c))},h.prototype._fireMoveEvents=function(c){this.fire(new a.Event("move",c)),this._zooming&&this.fire(new a.Event("zoom",c)),this._rotating&&this.fire(new a.Event("rotate",c)),this._pitching&&this.fire(new a.Event("pitch",c))},h.prototype._afterEase=function(c,d){if(!this._easeId||!d||this._easeId!==d){delete this._easeId;var _=this._zooming,w=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new a.Event("zoomend",c)),w&&this.fire(new a.Event("rotateend",c)),S&&this.fire(new a.Event("pitchend",c)),this.fire(new a.Event("moveend",c))}},h.prototype.flyTo=function(c,d){var _=this;if(!c.essential&&a.browser.prefersReducedMotion){var w=a.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,d)}this.stop(),c=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},c);var S=this.transform,O=this.getZoom(),k=this.getBearing(),R=this.getPitch(),G=this.getPadding(),W="zoom"in c?a.clamp(+c.zoom,S.minZoom,S.maxZoom):O,H="bearing"in c?this._normalizeBearing(c.bearing,k):k,ne="pitch"in c?+c.pitch:R,te="padding"in c?c.padding:S.padding,ue=S.zoomScale(W-O),Y=a.Point.convert(c.offset),le=S.centerPoint.add(Y),me=S.pointLocation(le),xe=a.LngLat.convert(c.center||me);this._normalizeCenter(xe);var Ae=S.project(me),Me=S.project(xe).sub(Ae),ke=c.curve,je=Math.max(S.width,S.height),it=je/ue,rt=Me.mag();if("minZoom"in c){var gt=a.clamp(Math.min(c.minZoom,O,W),S.minZoom,S.maxZoom),Rt=je/S.zoomScale(gt-O);ke=Math.sqrt(Rt/rt*2)}var Ut=ke*ke;function Bt(Zt){var Gt=(it*it-je*je+(Zt?-1:1)*Ut*Ut*rt*rt)/(2*(Zt?it:je)*Ut*rt);return Math.log(Math.sqrt(Gt*Gt+1)-Gt)}function Cr(Zt){return(Math.exp(Zt)-Math.exp(-Zt))/2}function xt(Zt){return(Math.exp(Zt)+Math.exp(-Zt))/2}var Jt=Bt(0),sr=function(Zt){return xt(Jt)/xt(Jt+ke*Zt)},Yt=function(Zt){return je*((xt(Jt)*(Cr(Gt=Jt+ke*Zt)/xt(Gt))-Cr(Jt))/Ut)/rt;var Gt},Kt=(Bt(1)-Jt)/ke;if(Math.abs(rt)<1e-6||!isFinite(Kt)){if(Math.abs(je-it)<1e-6)return this.easeTo(c,d);var or=it<je?-1:1;Kt=Math.abs(Math.log(it/je))/ke,Yt=function(){return 0},sr=function(Zt){return Math.exp(or*ke*Zt)}}return c.duration="duration"in c?+c.duration:1e3*Kt/("screenSpeed"in c?+c.screenSpeed/ke:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=k!==H,this._pitching=ne!==R,this._padding=!S.isPaddingEqual(te),this._prepareEase(d,!1),this._ease(function(Zt){var Gt=Zt*Kt,pi=1/sr(Gt);S.zoom=Zt===1?W:O+S.scaleZoom(pi),_._rotating&&(S.bearing=a.number(k,H,Zt)),_._pitching&&(S.pitch=a.number(R,ne,Zt)),_._padding&&(S.interpolatePadding(G,te,Zt),le=S.centerPoint.add(Y));var An=Zt===1?xe:S.unproject(Ae.add(Me.mult(Yt(Gt))).mult(pi));S.setLocationAtPoint(S.renderWorldCopies?An.wrap():An,le),_._fireMoveEvents(d)},function(){return _._afterEase(d)},c),this},h.prototype.isEasing=function(){return!!this._easeFrameId},h.prototype.stop=function(){return this._stop()},h.prototype._stop=function(c,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,d)}if(!c){var w=this.handlers;w&&w.stop(!1)}return this},h.prototype._ease=function(c,d,_){_.animate===!1||_.duration===0?(c(1),d()):(this._easeStart=a.browser.now(),this._easeOptions=_,this._onEaseFrame=c,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},h.prototype._renderFrameCallback=function(){var c=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},h.prototype._normalizeBearing=function(c,d){c=a.wrap(c,-180,180);var _=Math.abs(c-d);return Math.abs(c-360-d)<_&&(c-=360),Math.abs(c+360-d)<_&&(c+=360),c},h.prototype._normalizeCenter=function(c){var d=this.transform;if(d.renderWorldCopies&&!d.lngRange){var _=c.lng-d.center.lng;c.lng+=_>180?-360:_<-180?360:0}},h}(a.Evented),Zi=function(u){u===void 0&&(u={}),this.options=u,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Zi.prototype.getDefaultPosition=function(){return"bottom-right"},Zi.prototype.onAdd=function(u){var h=this.options&&this.options.compact;return this._map=u,this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=g.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Zi.prototype.onRemove=function(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Zi.prototype._setElementTitle=function(u,h){var c=this._map._getUIString("AttributionControl."+h);u.title=c,u.setAttribute("aria-label",c)},Zi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Zi.prototype._updateEditLink=function(){var u=this._editLink;u||(u=this._editLink=this._container.querySelector(".mapbox-improve-map"));var h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(u){var c=h.reduce(function(d,_,w){return _.value&&(d+=_.key+"="+_.value+(w<h.length-1?"&":"")),d},"?");u.href=a.config.FEEDBACK_URL+"/"+c+(this._map._hash?this._map._hash.getHashString(!0):""),u.rel="noopener nofollow",this._setElementTitle(u,"MapFeedback")}},Zi.prototype._updateData=function(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Zi.prototype._updateAttributions=function(){if(this._map.style){var u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(function(O){return typeof O!="string"?"":O})):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){var h=this._map.style.stylesheet;this.styleOwner=h.owner,this.styleId=h.id}var c=this._map.style.sourceCaches;for(var d in c){var _=c[d];if(_.used){var w=_.getSource();w.attribution&&u.indexOf(w.attribution)<0&&u.push(w.attribution)}}u.sort(function(O,k){return O.length-k.length});var S=(u=u.filter(function(O,k){for(var R=k+1;R<u.length;R++)if(u[R].indexOf(O)>=0)return!1;return!0})).join(" | ");S!==this._attribHTML&&(this._attribHTML=S,u.length?(this._innerContainer.innerHTML=S,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Zi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ba=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};ba.prototype.onAdd=function(u){this._map=u,this._container=g.create("div","mapboxgl-ctrl");var h=g.create("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ba.prototype.onRemove=function(){g.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ba.prototype.getDefaultPosition=function(){return"bottom-left"},ba.prototype._updateLogo=function(u){u&&u.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ba.prototype._logoRequired=function(){if(this._map.style){var u=this._map.style.sourceCaches;for(var h in u)if(u[h].getSource().mapbox_logo)return!0;return!1}},ba.prototype._updateCompact=function(){var u=this._container.children;if(u.length){var h=u[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}};var Li=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Li.prototype.add=function(u){var h=++this._id;return this._queue.push({callback:u,id:h,cancelled:!1}),h},Li.prototype.remove=function(u){for(var h=this._currentlyRunning,c=0,d=h?this._queue.concat(h):this._queue;c<d.length;c+=1){var _=d[c];if(_.id===u)return void(_.cancelled=!0)}},Li.prototype.run=function(u){u===void 0&&(u=0);var h=this._currentlyRunning=this._queue;this._queue=[];for(var c=0,d=h;c<d.length;c+=1){var _=d[c];if(!_.cancelled&&(_.callback(u),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Li.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var za={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Dd=a.window.HTMLImageElement,vf=a.window.HTMLElement,Gr=a.window.ImageBitmap,bi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},cv=function(u){function h(d){var _=this;if((d=a.extend({},bi,d)).minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new Sr(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies);if(u.call(this,w,d),this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=d.collectResourceTiming,this._renderTaskQueue=new Li,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},za,d.locale),this._clickTolerance=d.clickTolerance,this._requestManager=new a.RequestManager(d.transformRequest,d.accessToken),typeof d.container=="string"){if(this._container=a.window.document.getElementById(d.container),!this._container)throw new Error("Container '"+d.container+"' not found.")}else{if(!(d.container instanceof vf))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return _._update(!1)}),this.on("moveend",function(){return _._update(!1)}),this.on("zoom",function(){return _._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Tt(this,d),this._hash=d.hash&&new Vo(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,a.extend({},d.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=d.localIdeographFontFamily,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Zi({customAttribution:d.customAttribution})),this.addControl(new ba,d.logoPosition),this.on("style.load",function(){_.transform.unmodified&&_.jumpTo(_.style.stylesheet)}),this.on("data",function(S){_._update(S.dataType==="style"),_.fire(new a.Event(S.dataType+"data",S))}),this.on("dataloading",function(S){_.fire(new a.Event(S.dataType+"dataloading",S))})}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var c={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return h.prototype._getMapId=function(){return this._mapId},h.prototype.addControl=function(d,_){if(_===void 0&&(_=d.getDefaultPosition?d.getDefaultPosition():"top-right"),!d||!d.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=d.onAdd(this);this._controls.push(d);var S=this._controlPositions[_];return _.indexOf("bottom")!==-1?S.insertBefore(w,S.firstChild):S.appendChild(w),this},h.prototype.removeControl=function(d){if(!d||!d.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var _=this._controls.indexOf(d);return _>-1&&this._controls.splice(_,1),d.onRemove(this),this},h.prototype.hasControl=function(d){return this._controls.indexOf(d)>-1},h.prototype.resize=function(d){var _=this._containerDimensions(),w=_[0],S=_[1];if(w===this.transform.width&&S===this.transform.height)return this;this._resizeCanvas(w,S),this.transform.resize(w,S),this.painter.resize(w,S);var O=!this._moving;return O&&this.fire(new a.Event("movestart",d)).fire(new a.Event("move",d)),this.fire(new a.Event("resize",d)),O&&this.fire(new a.Event("moveend",d)),this},h.prototype.getBounds=function(){return this.transform.getBounds()},h.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},h.prototype.setMaxBounds=function(d){return this.transform.setMaxBounds(a.LngLatBounds.convert(d)),this._update()},h.prototype.setMinZoom=function(d){if((d=d==null?-2:d)>=-2&&d<=this.transform.maxZoom)return this.transform.minZoom=d,this._update(),this.getZoom()<d&&this.setZoom(d),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},h.prototype.getMinZoom=function(){return this.transform.minZoom},h.prototype.setMaxZoom=function(d){if((d=d==null?22:d)>=this.transform.minZoom)return this.transform.maxZoom=d,this._update(),this.getZoom()>d&&this.setZoom(d),this;throw new Error("maxZoom must be greater than the current minZoom")},h.prototype.getMaxZoom=function(){return this.transform.maxZoom},h.prototype.setMinPitch=function(d){if((d=d==null?0:d)<0)throw new Error("minPitch must be greater than or equal to 0");if(d>=0&&d<=this.transform.maxPitch)return this.transform.minPitch=d,this._update(),this.getPitch()<d&&this.setPitch(d),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},h.prototype.getMinPitch=function(){return this.transform.minPitch},h.prototype.setMaxPitch=function(d){if((d=d==null?60:d)>60)throw new Error("maxPitch must be less than or equal to 60");if(d>=this.transform.minPitch)return this.transform.maxPitch=d,this._update(),this.getPitch()>d&&this.setPitch(d),this;throw new Error("maxPitch must be greater than the current minPitch")},h.prototype.getMaxPitch=function(){return this.transform.maxPitch},h.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},h.prototype.setRenderWorldCopies=function(d){return this.transform.renderWorldCopies=d,this._update()},h.prototype.project=function(d){return this.transform.locationPoint(a.LngLat.convert(d))},h.prototype.unproject=function(d){return this.transform.pointLocation(a.Point.convert(d))},h.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},h.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},h.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},h.prototype._createDelegatedListener=function(d,_,w){var S,O=this;if(d==="mouseenter"||d==="mouseover"){var k=!1;return{layer:_,listener:w,delegates:{mousemove:function(G){var W=O.getLayer(_)?O.queryRenderedFeatures(G.point,{layers:[_]}):[];W.length?k||(k=!0,w.call(O,new ri(d,O,G.originalEvent,{features:W}))):k=!1},mouseout:function(){k=!1}}}}if(d==="mouseleave"||d==="mouseout"){var R=!1;return{layer:_,listener:w,delegates:{mousemove:function(G){(O.getLayer(_)?O.queryRenderedFeatures(G.point,{layers:[_]}):[]).length?R=!0:R&&(R=!1,w.call(O,new ri(d,O,G.originalEvent)))},mouseout:function(G){R&&(R=!1,w.call(O,new ri(d,O,G.originalEvent)))}}}}return{layer:_,listener:w,delegates:(S={},S[d]=function(G){var W=O.getLayer(_)?O.queryRenderedFeatures(G.point,{layers:[_]}):[];W.length&&(G.features=W,w.call(O,G),delete G.features)},S)}},h.prototype.on=function(d,_,w){if(w===void 0)return u.prototype.on.call(this,d,_);var S=this._createDelegatedListener(d,_,w);for(var O in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[d]=this._delegatedListeners[d]||[],this._delegatedListeners[d].push(S),S.delegates)this.on(O,S.delegates[O]);return this},h.prototype.once=function(d,_,w){if(w===void 0)return u.prototype.once.call(this,d,_);var S=this._createDelegatedListener(d,_,w);for(var O in S.delegates)this.once(O,S.delegates[O]);return this},h.prototype.off=function(d,_,w){var S=this;return w===void 0?u.prototype.off.call(this,d,_):(this._delegatedListeners&&this._delegatedListeners[d]&&function(O){for(var k=O[d],R=0;R<k.length;R++){var G=k[R];if(G.layer===_&&G.listener===w){for(var W in G.delegates)S.off(W,G.delegates[W]);return k.splice(R,1),S}}}(this._delegatedListeners),this)},h.prototype.queryRenderedFeatures=function(d,_){if(!this.style)return[];var w;if(_!==void 0||d===void 0||d instanceof a.Point||Array.isArray(d)||(_=d,d=void 0),_=_||{},(d=d||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof d[0]=="number")w=[a.Point.convert(d)];else{var S=a.Point.convert(d[0]),O=a.Point.convert(d[1]);w=[S,new a.Point(O.x,S.y),O,new a.Point(S.x,O.y),S]}return this.style.queryRenderedFeatures(w,_,this.transform)},h.prototype.querySourceFeatures=function(d,_){return this.style.querySourceFeatures(d,_)},h.prototype.setStyle=function(d,_){return(_=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},_)).diff!==!1&&_.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&d?(this._diffStyle(d,_),this):(this._localIdeographFontFamily=_.localIdeographFontFamily,this._updateStyle(d,_))},h.prototype._getUIString=function(d){var _=this._locale[d];if(_==null)throw new Error("Missing UI string '"+d+"'");return _},h.prototype._updateStyle=function(d,_){return this.style&&(this.style.setEventedParent(null),this.style._remove()),d?(this.style=new xo(this,_||{}),this.style.setEventedParent(this,{style:this.style}),typeof d=="string"?this.style.loadURL(d):this.style.loadJSON(d),this):(delete this.style,this)},h.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new xo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},h.prototype._diffStyle=function(d,_){var w=this;if(typeof d=="string"){var S=this._requestManager.normalizeStyleURL(d),O=this._requestManager.transformRequest(S,a.ResourceType.Style);a.getJSON(O,function(k,R){k?w.fire(new a.ErrorEvent(k)):R&&w._updateDiff(R,_)})}else typeof d=="object"&&this._updateDiff(d,_)},h.prototype._updateDiff=function(d,_){try{this.style.setState(d)&&this._update(!0)}catch(w){a.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(d,_)}},h.prototype.getStyle=function(){if(this.style)return this.style.serialize()},h.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},h.prototype.addSource=function(d,_){return this._lazyInitEmptyStyle(),this.style.addSource(d,_),this._update(!0)},h.prototype.isSourceLoaded=function(d){var _=this.style&&this.style.sourceCaches[d];if(_!==void 0)return _.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+d+"'")))},h.prototype.areTilesLoaded=function(){var d=this.style&&this.style.sourceCaches;for(var _ in d){var w=d[_]._tiles;for(var S in w){var O=w[S];if(O.state!=="loaded"&&O.state!=="errored")return!1}}return!0},h.prototype.addSourceType=function(d,_,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(d,_,w)},h.prototype.removeSource=function(d){return this.style.removeSource(d),this._update(!0)},h.prototype.getSource=function(d){return this.style.getSource(d)},h.prototype.addImage=function(d,_,w){w===void 0&&(w={});var S=w.pixelRatio;S===void 0&&(S=1);var O=w.sdf;O===void 0&&(O=!1);var k=w.stretchX,R=w.stretchY,G=w.content;if(this._lazyInitEmptyStyle(),_ instanceof Dd||Gr&&_ instanceof Gr){var W=a.browser.getImageData(_);this.style.addImage(d,{data:new a.RGBAImage({width:W.width,height:W.height},W.data),pixelRatio:S,stretchX:k,stretchY:R,content:G,sdf:O,version:0})}else{if(_.width===void 0||_.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var H=_;this.style.addImage(d,{data:new a.RGBAImage({width:_.width,height:_.height},new Uint8Array(_.data)),pixelRatio:S,stretchX:k,stretchY:R,content:G,sdf:O,version:0,userImage:H}),H.onAdd&&H.onAdd(this,d)}},h.prototype.updateImage=function(d,_){var w=this.style.getImage(d);if(!w)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var S=_ instanceof Dd||Gr&&_ instanceof Gr?a.browser.getImageData(_):_,O=S.width,k=S.height,R=S.data;return O===void 0||k===void 0?this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):O!==w.data.width||k!==w.data.height?this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(R,!(_ instanceof Dd||Gr&&_ instanceof Gr)),void this.style.updateImage(d,w))},h.prototype.hasImage=function(d){return d?!!this.style.getImage(d):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},h.prototype.removeImage=function(d){this.style.removeImage(d)},h.prototype.loadImage=function(d,_){a.getImage(this._requestManager.transformRequest(d,a.ResourceType.Image),_)},h.prototype.listImages=function(){return this.style.listImages()},h.prototype.addLayer=function(d,_){return this._lazyInitEmptyStyle(),this.style.addLayer(d,_),this._update(!0)},h.prototype.moveLayer=function(d,_){return this.style.moveLayer(d,_),this._update(!0)},h.prototype.removeLayer=function(d){return this.style.removeLayer(d),this._update(!0)},h.prototype.getLayer=function(d){return this.style.getLayer(d)},h.prototype.setLayerZoomRange=function(d,_,w){return this.style.setLayerZoomRange(d,_,w),this._update(!0)},h.prototype.setFilter=function(d,_,w){return w===void 0&&(w={}),this.style.setFilter(d,_,w),this._update(!0)},h.prototype.getFilter=function(d){return this.style.getFilter(d)},h.prototype.setPaintProperty=function(d,_,w,S){return S===void 0&&(S={}),this.style.setPaintProperty(d,_,w,S),this._update(!0)},h.prototype.getPaintProperty=function(d,_){return this.style.getPaintProperty(d,_)},h.prototype.setLayoutProperty=function(d,_,w,S){return S===void 0&&(S={}),this.style.setLayoutProperty(d,_,w,S),this._update(!0)},h.prototype.getLayoutProperty=function(d,_){return this.style.getLayoutProperty(d,_)},h.prototype.setLight=function(d,_){return _===void 0&&(_={}),this._lazyInitEmptyStyle(),this.style.setLight(d,_),this._update(!0)},h.prototype.getLight=function(){return this.style.getLight()},h.prototype.setFeatureState=function(d,_){return this.style.setFeatureState(d,_),this._update()},h.prototype.removeFeatureState=function(d,_){return this.style.removeFeatureState(d,_),this._update()},h.prototype.getFeatureState=function(d){return this.style.getFeatureState(d)},h.prototype.getContainer=function(){return this._container},h.prototype.getCanvasContainer=function(){return this._canvasContainer},h.prototype.getCanvas=function(){return this._canvas},h.prototype._containerDimensions=function(){var d=0,_=0;return this._container&&(d=this._container.clientWidth||400,_=this._container.clientHeight||300),[d,_]},h.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},h.prototype._setupContainer=function(){var d=this._container;d.classList.add("mapboxgl-map"),(this._missingCSSCanary=g.create("div","mapboxgl-canary",d)).style.visibility="hidden",this._detectMissingCSS();var _=this._canvasContainer=g.create("div","mapboxgl-canvas-container",d);this._interactive&&_.classList.add("mapboxgl-interactive"),this._canvas=g.create("canvas","mapboxgl-canvas",_),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var S=this._controlContainer=g.create("div","mapboxgl-control-container",d),O=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(k){O[k]=g.create("div","mapboxgl-ctrl-"+k,S)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},h.prototype._resizeCanvas=function(d,_){var w=a.browser.devicePixelRatio||1;this._canvas.width=w*d,this._canvas.height=w*_,this._canvas.style.width=d+"px",this._canvas.style.height=_+"px"},h.prototype._setupPainter=function(){var d=a.extend({},m.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),_=this._canvas.getContext("webgl",d)||this._canvas.getContext("experimental-webgl",d);_?(this.painter=new vn(_,this.transform),a.webpSupported.testSupport(_)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},h.prototype._contextLost=function(d){d.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:d}))},h.prototype._contextRestored=function(d){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:d}))},h.prototype._onMapScroll=function(d){if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},h.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},h.prototype._update=function(d){return this.style?(this._styleDirty=this._styleDirty||d,this._sourcesDirty=!0,this.triggerRepaint(),this):this},h.prototype._requestRenderFrame=function(d){return this._update(),this._renderTaskQueue.add(d)},h.prototype._cancelRenderFrame=function(d){this._renderTaskQueue.remove(d)},h.prototype._render=function(d){var _,w=this,S=0,O=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(_=O.createQueryEXT(),O.beginQueryEXT(O.TIME_ELAPSED_EXT,_),S=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(d),!this._removed){var k=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var R=this.transform.zoom,G=a.browser.now();this.style.zoomHistory.update(R,G);var W=new a.EvaluationParameters(R,{now:G,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),H=W.crossFadingFactor();H===1&&H===this._crossFadingFactor||(k=!0,this._crossFadingFactor=H),this.style.update(W)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||k)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ne=a.browser.now()-S;O.endQueryEXT(O.TIME_ELAPSED_EXT,_),setTimeout(function(){var Y=O.getQueryObjectEXT(_,O.QUERY_RESULT_EXT)/1e6;O.deleteQueryEXT(_),w.fire(new a.Event("gpu-timing-frame",{cpuTime:ne,gpuTime:Y}))},50)}if(this.listens("gpu-timing-layer")){var te=this.painter.collectGpuTimers();setTimeout(function(){var Y=w.painter.queryGpuTimers(te);w.fire(new a.Event("gpu-timing-layer",{layerTimes:Y}))},50)}var ue=this._sourcesDirty||this._styleDirty||this._placementDirty;return ue||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||ue||(this._fullyLoaded=!0),this}},h.prototype.remove=function(){this._hash&&this._hash.remove();for(var d=0,_=this._controls;d<_.length;d+=1)_[d].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),$l(this._canvasContainer),$l(this._controlContainer),$l(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},h.prototype.triggerRepaint=function(){var d=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(_){d._frame=null,d._render(_)}))},h.prototype._onWindowOnline=function(){this._update()},h.prototype._onWindowResize=function(d){this._trackResize&&this.resize({originalEvent:d})._update()},c.showTileBoundaries.get=function(){return!!this._showTileBoundaries},c.showTileBoundaries.set=function(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())},c.showPadding.get=function(){return!!this._showPadding},c.showPadding.set=function(d){this._showPadding!==d&&(this._showPadding=d,this._update())},c.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},c.showCollisionBoxes.set=function(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())},c.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},c.showOverdrawInspector.set=function(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())},c.repaint.get=function(){return!!this._repaint},c.repaint.set=function(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())},c.vertices.get=function(){return!!this._vertices},c.vertices.set=function(d){this._vertices=d,this._update()},h.prototype._setCacheLimits=function(d,_){a.setCacheLimits(d,_)},c.version.get=function(){return a.version},Object.defineProperties(h.prototype,c),h}(gf);function $l(u){u.parentNode&&u.parentNode.removeChild(u)}var Nd={showCompass:!0,showZoom:!0,visualizePitch:!1},fs=function(u){var h=this;this.options=a.extend({},Nd,u),this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(c){return c.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(c){return h._map.zoomIn({},{originalEvent:c})}),g.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(c){return h._map.zoomOut({},{originalEvent:c})}),g.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(c){h.options.visualizePitch?h._map.resetNorthPitch({},{originalEvent:c}):h._map.resetNorth({},{originalEvent:c})}),this._compassIcon=g.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};fs.prototype._updateZoomButtons=function(){var u=this._map.getZoom(),h=u===this._map.getMaxZoom(),c=u===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())},fs.prototype._rotateCompassArrow=function(){var u=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=u},fs.prototype.onAdd=function(u){return this._map=u,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new To(this._map,this._compass,this.options.visualizePitch)),this._container},fs.prototype.onRemove=function(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},fs.prototype._createButton=function(u,h){var c=g.create("button",u,this._container);return c.type="button",c.addEventListener("click",h),c},fs.prototype._setButtonTitle=function(u,h){var c=this._map._getUIString("NavigationControl."+h);u.title=c,u.setAttribute("aria-label",c)};var To=function(u,h,c){c===void 0&&(c=!1),this._clickTolerance=10,this.element=h,this.mouseRotate=new df({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,c&&(this.mousePitch=new Pd({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),g.addEventListener(h,"mousedown",this.mousedown),g.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(h,"touchmove",this.touchmove),g.addEventListener(h,"touchend",this.touchend),g.addEventListener(h,"touchcancel",this.reset)};function ju(u,h,c){if(u=new a.LngLat(u.lng,u.lat),h){var d=new a.LngLat(u.lng-360,u.lat),_=new a.LngLat(u.lng+360,u.lat),w=c.locationPoint(u).distSqr(h);c.locationPoint(d).distSqr(h)<w?u=d:c.locationPoint(_).distSqr(h)<w&&(u=_)}for(;Math.abs(u.lng-c.center.lng)>180;){var S=c.locationPoint(u);if(S.x>=0&&S.y>=0&&S.x<=c.width&&S.y<=c.height)break;u.lng>c.center.lng?u.lng-=360:u.lng+=360}return u}To.prototype.down=function(u,h){this.mouseRotate.mousedown(u,h),this.mousePitch&&this.mousePitch.mousedown(u,h),g.disableDrag()},To.prototype.move=function(u,h){var c=this.map,d=this.mouseRotate.mousemoveWindow(u,h);if(d&&d.bearingDelta&&c.setBearing(c.getBearing()+d.bearingDelta),this.mousePitch){var _=this.mousePitch.mousemoveWindow(u,h);_&&_.pitchDelta&&c.setPitch(c.getPitch()+_.pitchDelta)}},To.prototype.off=function(){var u=this.element;g.removeEventListener(u,"mousedown",this.mousedown),g.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(u,"touchmove",this.touchmove),g.removeEventListener(u,"touchend",this.touchend),g.removeEventListener(u,"touchcancel",this.reset),this.offTemp()},To.prototype.offTemp=function(){g.enableDrag(),g.removeEventListener(a.window,"mousemove",this.mousemove),g.removeEventListener(a.window,"mouseup",this.mouseup)},To.prototype.mousedown=function(u){this.down(a.extend({},u,{ctrlKey:!0,preventDefault:function(){return u.preventDefault()}}),g.mousePos(this.element,u)),g.addEventListener(a.window,"mousemove",this.mousemove),g.addEventListener(a.window,"mouseup",this.mouseup)},To.prototype.mousemove=function(u){this.move(u,g.mousePos(this.element,u))},To.prototype.mouseup=function(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()},To.prototype.touchstart=function(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return u.preventDefault()}},this._startPos))},To.prototype.touchmove=function(u){u.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,u.targetTouches)[0],this.move({preventDefault:function(){return u.preventDefault()}},this._lastPos))},To.prototype.touchend=function(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},To.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Fa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _f(u,h,c){var d=u.classList;for(var _ in Fa)d.remove("mapboxgl-"+c+"-anchor-"+_);d.add("mapboxgl-"+c+"-anchor-"+h)}var $u,th=function(u){function h(c,d){if(u.call(this),(c instanceof a.window.HTMLElement||d)&&(c=a.extend({element:c},d)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,c&&c.element)this._element=c.element,this._offset=a.Point.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div"),this._element.setAttribute("aria-label","Map marker");var _=g.createNS("http://www.w3.org/2000/svg","svg");_.setAttributeNS(null,"display","block"),_.setAttributeNS(null,"height","41px"),_.setAttributeNS(null,"width","27px"),_.setAttributeNS(null,"viewBox","0 0 27 41");var w=g.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var S=g.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");var O=g.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");for(var k=0,R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];k<R.length;k+=1){var G=R[k],W=g.createNS("http://www.w3.org/2000/svg","ellipse");W.setAttributeNS(null,"opacity","0.04"),W.setAttributeNS(null,"cx","10.5"),W.setAttributeNS(null,"cy","5.80029008"),W.setAttributeNS(null,"rx",G.rx),W.setAttributeNS(null,"ry",G.ry),O.appendChild(W)}var H=g.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);var ne=g.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(ne);var te=g.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"opacity","0.25"),te.setAttributeNS(null,"fill","#000000");var ue=g.createNS("http://www.w3.org/2000/svg","path");ue.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),te.appendChild(ue);var Y=g.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");var le=g.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");var me=g.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#000000"),me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962");var xe=g.createNS("http://www.w3.org/2000/svg","circle");xe.setAttributeNS(null,"fill","#FFFFFF"),xe.setAttributeNS(null,"cx","5.5"),xe.setAttributeNS(null,"cy","5.5"),xe.setAttributeNS(null,"r","5.4999962"),le.appendChild(me),le.appendChild(xe),S.appendChild(O),S.appendChild(H),S.appendChild(te),S.appendChild(Y),S.appendChild(le),_.appendChild(S),_.setAttributeNS(null,"height",41*this._scale+"px"),_.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(_),this._offset=a.Point.convert(c&&c.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ae){Ae.preventDefault()}),this._element.addEventListener("mousedown",function(Ae){Ae.preventDefault()}),_f(this._element,this._anchor,"marker"),this._popup=null}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.addTo=function(c){return this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},h.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this},h.prototype.getLngLat=function(){return this._lngLat},h.prototype.setLngLat=function(c){return this._lngLat=a.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},h.prototype.getElement=function(){return this._element},h.prototype.setPopup=function(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){var d=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(24.6+d)],"bottom-right":[-d,-1*(24.6+d)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=c,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},h.prototype._onKeyPress=function(c){var d=c.code,_=c.charCode||c.keyCode;d!=="Space"&&d!=="Enter"&&_!==32&&_!==13||this.togglePopup()},h.prototype._onMapClick=function(c){var d=c.originalEvent.target,_=this._element;this._popup&&(d===_||_.contains(d))&&this.togglePopup()},h.prototype.getPopup=function(){return this._popup},h.prototype.togglePopup=function(){var c=this._popup;return c?(c.isOpen()?c.remove():c.addTo(this._map),this):this},h.prototype._update=function(c){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ju(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(d="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_="rotateX("+this._map.getPitch()+"deg)"),c&&c.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,Fa[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+_+" "+d)}},h.prototype.getOffset=function(){return this._offset},h.prototype.setOffset=function(c){return this._offset=a.Point.convert(c),this._update(),this},h.prototype._onMove=function(c){if(!this._isDragging){var d=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},h.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},h.prototype._addDragHandler=function(c){this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},h.prototype.setDraggable=function(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},h.prototype.isDraggable=function(){return this._draggable},h.prototype.setRotation=function(c){return this._rotation=c||0,this._update(),this},h.prototype.getRotation=function(){return this._rotation},h.prototype.setRotationAlignment=function(c){return this._rotationAlignment=c||"auto",this._update(),this},h.prototype.getRotationAlignment=function(){return this._rotationAlignment},h.prototype.setPitchAlignment=function(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this},h.prototype.getPitchAlignment=function(){return this._pitchAlignment},h}(a.Evented),Rd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Gu=0,Gl=!1,zd=function(u){function h(c){u.call(this),this.options=a.extend({},Rd,c),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.onAdd=function(c){var d;return this._map=c,this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._setupUI,$u!==void 0?d($u):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(_){d($u=_.state!=="denied")}):d($u=!!a.window.navigator.geolocation),this._container},h.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Gu=0,Gl=!1},h.prototype._isOutOfMapMaxBounds=function(c){var d=this._map.getMaxBounds(),_=c.coords;return d&&(_.longitude<d.getWest()||_.longitude>d.getEast()||_.latitude<d.getSouth()||_.latitude>d.getNorth())},h.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},h.prototype._onSuccess=function(c){if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(c),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(c),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",c)),this._finish()}},h.prototype._updateCamera=function(c){var d=new a.LngLat(c.coords.longitude,c.coords.latitude),_=c.coords.accuracy,w=this._map.getBearing(),S=a.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(_),S,{geolocateSource:!0})},h.prototype._updateMarker=function(c){if(c){var d=new a.LngLat(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=c.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},h.prototype._updateCircleRadius=function(){var c=this._map._container.clientHeight/2,d=this._map.unproject([0,c]),_=this._map.unproject([1,c]),w=d.distanceTo(_),S=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=S+"px",this._circleElement.style.height=S+"px"},h.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},h.prototype._onError=function(c){if(this._map){if(this.options.trackUserLocation)if(c.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(c.code===3&&Gl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",c)),this._finish()}},h.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},h.prototype._setupUI=function(c){var d=this;if(this._container.addEventListener("contextmenu",function(S){return S.preventDefault()}),this._geolocateButton=g.create("button","mapboxgl-ctrl-geolocate",this._container),g.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",c===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var _=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=_,this._geolocateButton.setAttribute("aria-label",_)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new th(this._dotElement),this._circleElement=g.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new th({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(S){S.geolocateSource||d._watchState!=="ACTIVE_LOCK"||S.originalEvent&&S.originalEvent.type==="resize"||(d._watchState="BACKGROUND",d._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),d._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),d.fire(new a.Event("trackuserlocationend")))})},h.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Gu--,Gl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var c;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Gu>1?(c={maximumAge:6e5,timeout:0},Gl=!0):(c=this.options.positionOptions,Gl=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,c)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},h.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},h}(a.Evented),Ys={maxWidth:100,unit:"metric"},Js=function(u){this.options=a.extend({},Ys,u),a.bindAll(["_onMove","setUnit"],this)};function xf(u,h,c){var d=c&&c.maxWidth||100,_=u._container.clientHeight/2,w=u.unproject([0,_]),S=u.unproject([d,_]),O=w.distanceTo(S);if(c&&c.unit==="imperial"){var k=3.2808*O;k>5280?Qs(h,d,k/5280,u._getUIString("ScaleControl.Miles")):Qs(h,d,k,u._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Qs(h,d,O/1852,u._getUIString("ScaleControl.NauticalMiles")):O>=1e3?Qs(h,d,O/1e3,u._getUIString("ScaleControl.Kilometers")):Qs(h,d,O,u._getUIString("ScaleControl.Meters"))}function Qs(u,h,c,d){var _,w,S,O=(_=c,(w=Math.pow(10,(""+Math.floor(_)).length-1))*(S=(S=_/w)>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(k){var R=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*R)/R}(S)));u.style.width=h*(O/c)+"px",u.innerHTML=O+"&nbsp;"+d}Js.prototype.getDefaultPosition=function(){return"bottom-left"},Js.prototype._onMove=function(){xf(this._map,this._container,this.options)},Js.prototype.onAdd=function(u){return this._map=u,this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",u.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Js.prototype.onRemove=function(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Js.prototype.setUnit=function(u){this.options.unit=u,xf(this._map,this._container,this.options)};var ta=function(u){this._fullscreen=!1,u&&u.container&&(u.container instanceof a.window.HTMLElement?this._container=u.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};ta.prototype.onAdd=function(u){return this._map=u,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ta.prototype.onRemove=function(){g.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ta.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},ta.prototype._setupUI=function(){var u=this._fullscreenButton=g.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);g.create("span","mapboxgl-ctrl-icon",u).setAttribute("aria-hidden",!0),u.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ta.prototype._updateTitle=function(){var u=this._getTitle();this._fullscreenButton.setAttribute("aria-label",u),this._fullscreenButton.title=u},ta.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ta.prototype._isFullscreen=function(){return this._fullscreen},ta.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ta.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Fd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},rh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Bd=function(u){function h(c){u.call(this),this.options=a.extend(Object.create(Fd),c),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h,h.prototype.addTo=function(c){return this._map&&this.remove(),this._map=c,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},h.prototype.isOpen=function(){return!!this._map},h.prototype.remove=function(){return this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},h.prototype.getLngLat=function(){return this._lngLat},h.prototype.setLngLat=function(c){return this._lngLat=a.LngLat.convert(c),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},h.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},h.prototype.getElement=function(){return this._container},h.prototype.setText=function(c){return this.setDOMContent(a.window.document.createTextNode(c))},h.prototype.setHTML=function(c){var d,_=a.window.document.createDocumentFragment(),w=a.window.document.createElement("body");for(w.innerHTML=c;d=w.firstChild;)_.appendChild(d);return this.setDOMContent(_)},h.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},h.prototype.setMaxWidth=function(c){return this.options.maxWidth=c,this._update(),this},h.prototype.setDOMContent=function(c){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(c),this._createCloseButton(),this._update(),this._focusFirstElement(),this},h.prototype.addClassName=function(c){this._container&&this._container.classList.add(c)},h.prototype.removeClassName=function(c){this._container&&this._container.classList.remove(c)},h.prototype.setOffset=function(c){return this.options.offset=c,this._update(),this},h.prototype.toggleClassName=function(c){if(this._container)return this._container.classList.toggle(c)},h.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=g.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},h.prototype._onMouseUp=function(c){this._update(c.point)},h.prototype._onMouseMove=function(c){this._update(c.point)},h.prototype._onDrag=function(c){this._update(c.point)},h.prototype._update=function(c){var d=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=g.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=g.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(W){return d._container.classList.add(W)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ju(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||c)){var _=this._pos=this._trackPointer&&c?c:this._map.project(this._lngLat),w=this.options.anchor,S=function W(H){if(H){if(typeof H=="number"){var ne=Math.round(Math.sqrt(.5*Math.pow(H,2)));return{center:new a.Point(0,0),top:new a.Point(0,H),"top-left":new a.Point(ne,ne),"top-right":new a.Point(-ne,ne),bottom:new a.Point(0,-H),"bottom-left":new a.Point(ne,-ne),"bottom-right":new a.Point(-ne,-ne),left:new a.Point(H,0),right:new a.Point(-H,0)}}if(H instanceof a.Point||Array.isArray(H)){var te=a.Point.convert(H);return{center:te,top:te,"top-left":te,"top-right":te,bottom:te,"bottom-left":te,"bottom-right":te,left:te,right:te}}return{center:a.Point.convert(H.center||[0,0]),top:a.Point.convert(H.top||[0,0]),"top-left":a.Point.convert(H["top-left"]||[0,0]),"top-right":a.Point.convert(H["top-right"]||[0,0]),bottom:a.Point.convert(H.bottom||[0,0]),"bottom-left":a.Point.convert(H["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(H["bottom-right"]||[0,0]),left:a.Point.convert(H.left||[0,0]),right:a.Point.convert(H.right||[0,0])}}return W(new a.Point(0,0))}(this.options.offset);if(!w){var O,k=this._container.offsetWidth,R=this._container.offsetHeight;O=_.y+S.bottom.y<R?["top"]:_.y>this._map.transform.height-R?["bottom"]:[],_.x<k/2?O.push("left"):_.x>this._map.transform.width-k/2&&O.push("right"),w=O.length===0?"bottom":O.join("-")}var G=_.add(S[w]).round();g.setTransform(this._container,Fa[w]+" translate("+G.x+"px,"+G.y+"px)"),_f(this._container,w,"popup")}},h.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var c=this._container.querySelector(rh);c&&c.focus()}},h.prototype._onClose=function(){this.remove()},h}(a.Evented),bf={version:a.version,supported:m,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:cv,NavigationControl:fs,GeolocateControl:zd,AttributionControl:Zi,ScaleControl:Js,FullscreenControl:ta,Popup:Bd,Marker:th,Style:xo,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){Le().acquire(Ce)},clearPrewarmedResources:function(){var u=St;u&&(u.isPreloaded()&&u.numActive()===1?(u.release(Ce),St=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(u){a.config.ACCESS_TOKEN=u},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(u){a.config.API_URL=u},get workerCount(){return Ue.workerCount},set workerCount(u){Ue.workerCount=u},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(u){a.config.MAX_PARALLEL_IMAGE_REQUESTS=u},clearStorage:function(u){a.clearTileCache(u)},workerUrl:""};return bf}),s})})(bT);const wT=bT.exports;class $0 extends BO.default{constructor(e){const n=Object.assign({},e);delete n.accessToken,delete n.style,delete n.container,delete n.xyz,super(n),this.set("xyz",e.maplibreOptions.xyz),this.set("xyz_custom",e.maplibreOptions.xyz_custom),this.xyz_=e.xyz,e.accessToken&&(wT.accessToken=e.accessToken),this.map_=new wT.Map({container:e.maplibreOptions.container,style:e.maplibreOptions.style,attributionControl:!1,interactive:!1}),this.maplibreMap=this.map_}getMapBoxMap(){return this.map_}getMapLibreMap(){return this.map_}render(e){const n=this.map_.getCanvas(),o=e.viewState;n.style.position="absolute";const s=this.getVisible();n.style.display=s?"block":"none";const f=this.getOpacity().toString();f!==n.style.opacity&&(n.style.opacity=f);const a=o.rotation;return a&&this.map_.rotateTo(xO.toDegrees(-a),{animate:!1}),this.map_.jumpTo({center:bO.toLonLat(o.center),zoom:o.zoom-1,animate:!1}),this.map_._frame&&(this.map_._frame.cancel(),this.map_._frame=null),this.map_._render(),n}setLayerVisibility(e,n){this.map_.setLayoutProperty(e,"visibility",n?"visible":"none")}getStyle(){return this.map_.getStyle()}getXYZ(){return this.get("xyz")}}class d6{createOlLayer(e,n){const o=Os(),{id:s,metadata:f,name:a}=e,m=n.get(s);if(!m)return;const g={container:o.getOlMap().getTarget(),...m},b=new $0({maplibreOptions:g,label:a,id:s,queryable_id:s,metadata:f}),E=os();return b!=null&&b.getMapLibreMap().loaded()?E.setBaseStyle(s,b==null?void 0:b.getMapLibreMap().getStyle()):new Promise(M=>b==null?void 0:b.getMapLibreMap().once("data",M)).then(()=>E.setBaseStyle(s,b==null?void 0:b.getMapLibreMap().getStyle())),b}}const m6=new d6;class y6{createOlLayer(e,n){let o;if(n&&(o=m6.createOlLayer(e,n)),!o)switch(e.type){case"WMS":o=_T.createOlLayer(e);break;case"WMTS":case"BG WMTS":o=xT.createOlLayer(e);break;default:throw new Error(`Unrecognized layer type: ${e.type}`)}return o.set("id",e.id),o.set("label",e.name),o.set("layer_name",e.name),o.set("metadata",e.metadata),o.set("queryable_id",e.id),o.set("current_time",ka().getLayerCurrentTime(e)),o.set("time",e.time),o.setOpacity(e.opacity),o}}const ET=new y6;class g6{setLayerTime(e,n){const o=e.getSource();o instanceof Sx.default&&_T.setLayerTime(o,n),o instanceof Tx.default&&xT.setLayerTime(e,o,n)}}const v6=new g6,ng=-200;function G0(){function t(P,z){if(!z)return;const V=b(z);P.addLayer(V)}function e(P,z){return P.getLayers().getArray().find(V=>V.get("id")===z)}function n(P,z){const V=e(P,z);V&&P.removeLayer(V)}function o(P,z){const V=P.getLayers().getArray();z.forEach((q,re)=>{const X=V.find(ae=>ae.get("id")===q.id);X==null||X.setZIndex(re+1)})}function s(P,z,V){const q=P.getLayers().getArray().find(re=>re.get("id")===z);q&&q.setOpacity(V)}function f(P,z){const V=ka(),q=e(P,z.id),re=V.getLayerCurrentTime(z);re&&q&&v6.setLayerTime(q,re)}function a(P){Rp.delete(P)}function m(P){return Rp.has(P.id)}function g(P,z){Rp.set(P,z)}function b(P){const z=P.id,V=Rp.get(z);if(V)return V;{const q=ET.createOlLayer(P);return g(z,q),q}}function E(P){return P&&Rp.get(P.id)||null}function M(P,z){const q=P.getLayers().getArray().find(re=>re.getZIndex()===ng);q&&z(q)}function I(P,z,V){var ce;const q=P.getLayers(),re=q.getArray().findIndex(ve=>ve.getZIndex()===ng),X=(ce=q.getArray()[re])==null?void 0:ce.get("id");let ae;z&&(m(z)?ae=E(z):(ae=ET.createOlLayer(z,V),g(z.id,ae))),re>=0?ae?(ae.setZIndex(ng),q.setAt(re,ae)):q.removeAt(re):ae&&(ae.setZIndex(ng),P.addLayer(ae)),X&&X!==(z==null?void 0:z.id)&&j0.restoreStyle(!0)}return{addLayer:t,findLayer:e,removeLayer:n,removeFromCache:a,reorderLayers:o,setLayerOpacity:s,setLayerTime:f,getLayerFromCache:E,setBgLayer:I,applyOnBgLayer:M}}class _6{constructor(e){ai(this,"previousLayers");ai(this,"previousVectorSources");const n=ui(),o=os(),s=Os(),f=Cc(),a=G0(),{appliedStyle:m}=rn(o);Tn(()=>n.layers,g=>{const b={layers:this.previousLayers},E={layers:g},M=s.getRemovedLayers(E,b),I=s.getAddedLayers(E,b),P=s.getMutatedLayers(E,b);M.forEach(z=>a.removeLayer(e,z.id)),I.forEach(z=>{a.addLayer(e,z.layer),a.setLayerTime(e,z.layer)}),P.forEach(z=>{a.setLayerOpacity(e,z.id,z.opacity),a.setLayerTime(e,z)}),E.layers&&a.reorderLayers(e,E.layers),this.previousLayers=g}),Tn(()=>n.bgLayer,g=>g!==void 0&&a.setBgLayer(e,g,o.bgVectorSources)),la(()=>{o.isExpertStyleActive||(m.value=f.applyDefaultStyle(n.bgLayer,o.bgVectorBaseStyles,o.bgStyle))}),Tn(m,g=>{o.bgStyle===null&&!o.isExpertStyleActive?f.unregisterStyle(o.styleSerial,o.registerUrls).then(o.styleSerial=null):f.registerStyle(g,o.styleSerial,o.registerUrls).then(b=>{var M;o.styleSerial=b;const E=(M=n==null?void 0:n.bgLayer)==null?void 0:M.id;(n==null?void 0:n.bgLayer)&&E!==void 0&&b!==void 0&&(a.applyOnBgLayer(e,I=>{I.set("xyz_custom",f.getDefaultMapBoxStyleXYZ(b))}),a.setBgLayer(e,n==null?void 0:n.bgLayer,o.bgVectorSources))}),a.applyOnBgLayer(e,b=>f.applyConsolidatedStyle(b,g))}),Tn(()=>o.bgVectorSources,g=>{var b;for(const E of g.keys())(!this.previousVectorSources||this.previousVectorSources.get(E)!==g.get(E))&&(a.removeFromCache(E),E===((b=n==null?void 0:n.bgLayer)==null?void 0:b.id)&&a.setBgLayer(e,n==null?void 0:n.bgLayer,g));this.previousVectorSources=g})}}const x6={0:8,1:9,2:9,3:10,4:11,5:12,6:13,7:14,8:16,9:17,10:18,11:19,12:20,13:21};class b6{bootstrap(){this.restore(),this.persist()}persistZoom(){const e=Os().getOlMap().getView(),n=()=>{const o=e.getZoom();Or.setValue(lT,o?Math.ceil(o):null)};n(),Mx.listen(e,"change:resolution",rT(n,300))}persistXY(){const e=Os().getOlMap().getView(),n=()=>{const o=e.getCenter();Or.setValue(uT,o?Math.round(o[0]):null),Or.setValue(cT,o?Math.round(o[1]):null)};n(),Mx.listen(e,VO.default.PROPERTYCHANGE,rT(n,300))}persist(){this.persistXY(),this.persistZoom()}restore(){const e=Os().getOlMap().getView(),n=Or.getValue(lT,Wh),o=Or.getInitialVersion(),s=Or.getValue(uT,Wh),f=Or.getValue(cT,Wh),a=Or.getValue(Uz),m=Mi.getTransform(JR,Np);let g,b;n!==void 0?b=o===3?Number(n):x6[n]:b=8,s!=null&&f!=null?o===3&&a!=null?g=Mi.transform([s,f],a,Np):g=o===3?[s,f]:m([f,s],void 0,2):g=Mi.transform([6,49.7],J2,Np),e.setCenter(g),e.setZoom(b)}}const w6=new b6,E6={key:0,class:"absolute bottom-0 z-10 text-[0.8em] px-[4px] text-[#6b818f] bg-[#ffffffb3]"},S6=lr(ir({__name:"attribution-control",setup(t){const e=ui(),n=br("");return la(()=>{var o,s;n.value=((s=(o=e.bgLayer)==null?void 0:o.metadata)==null?void 0:s.attribution)||""}),(o,s)=>{const f=y_("dompurify-html");return n.value?jm((Be(),tt("div",E6,null,512)),[[f,n.value]]):Xe("v-if",!0)}}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/map-controls/attribution-control.vue"]]);function Qp(t,e){const n=new t(e),o=Os(),s=_h("olMap");return ua(()=>{s.addControl(n),s.changed()}),lu(()=>{const f=o.getOlMap();f.removeControl(n),f.changed()}),{control:n}}const T6=["title"],M6=lr(ir({__name:"location-control",props:{className:{type:String,required:!1,default:"location-button"},label:{type:String,required:!1,default:"\uE800"},tipLabel:{type:String,required:!1,default:"Location"}},setup(t){const e=t,{t:n}=En(),o=br(null);function s(){}return ua(()=>Qp(Ix.default,{...e,target:o})),(f,a)=>(Be(),tt("div",{ref_key:"controlElement",ref:o,class:Rr(`tracker-off ${e.className} ${se(hm.CLASS_UNSELECTABLE)} ${se(hm.CLASS_CONTROL)}`)},[Fe("button",{title:se(n)(e.tipLabel),onClick:s},Wt(e.label),9,T6)],2))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/map-controls/location-control.vue"]]),I6=["title"],O6=lr(ir({__name:"map-3d",props:{className:{type:String,required:!1,default:"map-3d-button"},label:{type:String,required:!1,default:"\uE057"},tipLabel:{type:String,required:!1,default:"3d"}},setup(t){const e=t,n=ui(),{t:o}=En(),s=br(null);ua(()=>Qp(Ix.default,{...e,target:s}));const f=()=>{n.setIs3dActive(!n.is3dActive)};return(a,m)=>(Be(),tt("div",{ref_key:"controlElement",ref:s,class:Rr(`${e.className} ${se(hm.CLASS_UNSELECTABLE)} ${se(hm.CLASS_CONTROL)} ${se(n).is3dActive?"active":""}`)},[Fe("button",{title:se(o)(e.tipLabel),onClick:f},Wt(e.label),9,I6)],2))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/map-controls/map-3d.vue"]]),C6=lr(ir({__name:"fullscreen-control",props:{className:{type:String,required:!1},label:{type:String,required:!1,default:"\uE01C"},labelActive:{type:String,required:!1,default:"\uE02C"}},setup(t){const e=t;return Qp(UO.default,e),(n,o)=>Xe("v-if",!0)}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/map-controls/fullscreen-control.vue"]]),A6=lr(ir({__name:"zoom-control",props:{className:{type:String,required:!1},zoomInLabel:{type:String,required:!1,default:"\uE032"},zoomOutLabel:{type:String,required:!1,default:"\uE033"}},setup(t){const e=t;return Qp(jO.default,e),(n,o)=>Xe("v-if",!0)}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/map-controls/zoom-control.vue"]]);class P6 extends $O.default{constructor(n){super(n);ai(this,"ol3dm")}handleZoomToExtent(){this.ol3dm&&this.ol3dm.luxCameraExtentInRadians&&this.ol3dm.is3dEnabled()||super.handleZoomToExtent()}}const k6=lr(ir({__name:"zoom-to-extent-control",props:{className:{type:String,required:!1},label:{type:String,required:!1,default:"\uE01B"},tipLabel:{type:String,required:!1},extent:{type:null,required:!0}},setup(t){return Qp(P6,t),(n,o)=>Xe("v-if",!0)}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/map-controls/zoom-to-extent-control.vue"]]),ST=lr(ir({__name:"map-container",props:{v4_standalone:{type:Boolean,required:!1,default:!1}},setup(t){const e=Os(),n=br(null),o=e.createMap(),s=[425152.9429259216,632446599999133e-8,914349.9239510496,6507914867875754e-9];return ua(()=>{n.value&&(new _6(o),w6.bootstrap(),o.setTarget(n.value),window.olMap=o)}),Cb("olMap",o),(f,a)=>(Be(),tt("div",{id:"map-container",ref_key:"mapContainer",ref:n,class:"h-full w-full bg-white relative"},[kt(A6),kt(k6,{extent:s}),kt(C6),kt(S6),t.v4_standalone?(Be(),tn(O6,{key:0})):Xe("v-if",!0),kt(M6)],512))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/map/map-container.vue"]]),L6="fr",D6=!0,N6=!1,R6=!1,vi=bc("app",()=>{const t=br(L6),e=br(D6),n=br(N6),o=br(R6),s=br(),f=br(),a=br(!1);function m(V){t.value=V}function g(V){e.value=V,V||(o.value=!1,n.value=!1)}function b(V){n.value=V,V&&(o.value=!1)}function E(V){o.value=V}function M(V){f.value=V}function I(V){s.value=V}function P(){a.value=!0}function z(){a.value=!1}return{lang:t,layersOpen:e,myLayersTabOpen:n,themeGridOpen:o,mapId:s,styleEditorOpen:a,remoteLayersOpen:f,setLang:m,setLayersOpen:g,setMyLayersTabOpen:b,setThemeGridOpen:E,setRemoteLayersOpen:M,setMapId:I,openStyleEditorPanel:P,closeStyleEditorPanel:z}},{}),ig={name:"blank",id:0};function q0(){const t=vi(),{mapId:e}=rn(t),n=Su(),o=ui(),s=ka(),f=ar(()=>{var M;if(!e.value){const I=(M=yo().theme)==null?void 0:M.name;if(I)return is().bg_layer_theme_defaults[I]||g()}return g()});function a(M){const I=n.findBgLayerById(M);m(I||null)}function m(M){if(M){if(M.type==="WMTS"||M.type==="BG WMTS")M.type="BG WMTS";else if(M.type==="BG MVT")console.log(`passed through MVT layer ${M.name}`);else throw new Error(`Only WMTS and MVT BG layers are currently implemented (not ${M.type} for ${M.name})`);s.handleExclusionLayers(M),o.setBgLayer(s.initLayer(M))}else o.setBgLayer(null)}function g(){var M;return((M=E().find(I=>I.is_default))==null?void 0:M.id)||ig.id}function b(){return ig.id}function E(){return is().bg_layers}return{setBgLayer:a,setMapBackground:m,getBgLayersFromConfig:E,getNullId:b,getDefaultSelectedId:g,defaultSelectedBgId:f}}const z6=["title"],TT=lr(ir({__name:"background-selector-item",props:{bgTitle:{type:String,default:""},bgName:{type:String,default:""}},setup(t){const e=t,{t:n}=En(),o=ar(()=>{const f=n(e.bgTitle),a=e.bgTitle.length>0,m=`${n("Background layer:")} ${n(e.bgName)}`;return`${f}${a?" - ":""}${m}`}),s=ar(()=>`h-full w-full rounded-sm lux-bg-sel-icon
        lux-bg-sel-${e.bgName}
        bg-${e.bgName}_sm
        md:bg-${e.bgName}
        hd:bg-${e.bgName}_sm_hi
        hd_md:bg-${e.bgName}_hi`);return(f,a)=>(Be(),tt("button",{title:se(o),class:Rr(se(s))},null,10,z6))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/background-selector/background-selector-item.vue"]]),F6={key:0,class:"flex flex-row-reverse"},MT=lr(ir({__name:"background-selector",props:{isOpen:{type:Boolean,default:!1}},setup(t){const e=t,{t:n}=En(),o=q0(),s=ui(),f=yo(),{bgLayer:a,is3dMesh:m}=rn(s),g=br(e.isOpen),b=br([]),E=ar(()=>{var z,V;return(V=(z=a.value)==null?void 0:z.id)!=null?V:o.getNullId()}),M=ar(()=>{var z,V;return(V=(z=b.value)==null?void 0:z.find(q=>q.id===E.value))==null?void 0:V.name});Tn(()=>f.bgLayers,z=>{b.value=is().bg_layers.map(V=>Object.assign({id:V.id},z.find(q=>V.id===q.id),{name:V.icon_id}))},{immediate:!0}),Tn(()=>s.bgLayer,(z,V)=>{const q=s.layers;V===void 0&&z===null&&(q==null?void 0:q.length)===0&&(o.setBgLayer(o.defaultSelectedBgId.value),z===null&&Ey().addNotification(n("Aucune couche n'\xE9tant d\xE9finie pour cette carte, une couche de fond a automatiquement \xE9t\xE9 ajout\xE9e.",{ns:"client"})))});function I(z){o.setBgLayer(z.id),g.value=!1}function P(){g.value=!g.value}return(z,V)=>se(m)?Xe("v-if",!0):(Be(),tt("div",F6,[Fe("div",{class:Rr(["lux-bg-sel border border-black",g.value===!0?"hidden":"block"])},[kt(TT,{"aria-expanded":g.value,"bg-title":"Select BG layer","bg-name":se(M),onClick:P},null,8,["aria-expanded","bg-name"])],2),Fe("div",{class:Rr(g.value===!0?"flex flex-col md:flex-row":"hidden")},[(Be(!0),tt(en,null,Ta(b.value,q=>(Be(),tt("div",{key:q.id,class:Rr(["lux-bg-sel hover:bg-cyan-600",q.id===se(E)?"border-red-500 border-2":"border-black border"])},[kt(TT,{"bg-name":q.name,onClick:re=>I(q)},null,8,["bg-name","onClick"])],2))),128))],2)]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/background-selector/background-selector.vue"]]),B6=Fe("div",{class:"fixed inset-0 bg-gray-900 opacity-40 z-[1050]"},null,-1),V6={class:"bg-white shadow-modal rounded-lg overflow-hidden w-[700px]"},U6={class:"relative flex flex-row justify-center p-4 border-b-[1px]"},j6={class:"text-xl"},$6=[Fe("span",{"aria-hidden":"true"},"\xD7",-1)],G6={key:0,class:"p-[15px] border-t-[1px]"},q6={class:"flex flex-row justify-end"},IT=lr(ir({__name:"modal-dialog",props:{footer:{type:Boolean,default:!0},maxHeight:{type:Boolean,default:!1},title:String},emits:["close"],setup(t){const{t:e}=En(),n=br();ua(()=>{n.value.focus()});const o=Ln(!0);function s(){o.value=!1}return(f,a)=>(Be(),tn(ow,{to:"body"},[Xe(" backdrop "),B6,Xe(" modal "),kt(Qm,{appear:"","enter-active-class":"duration-200 ease-out","enter-from-class":"transform opacity-0 -translate-y-60","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"transform opacity-0 -translate-y-60",onAfterLeave:a[3]||(a[3]=m=>f.$emit("close"))},{default:su(()=>[se(o)?(Be(),tt("div",{key:0,role:"dialog",ref_key:"modal",ref:n,tabindex:"0",onKeydown:a[2]||(a[2]=Es(ws(m=>s(),["stop"]),["esc"])),class:"fixed inset-x-0 inset-y-8 flex items-start justify-center z-[1100] outline-none"},[Fe("div",V6,[Xe(" header (title)"),Fe("div",U6,[Fe("h4",j6,Wt(t.title),1),Fe("button",{type:"button",class:"absolute right-2 top-1 text-slate-400 text-[24px]","data-dismiss":"modal","aria-label":"Close",onClick:a[0]||(a[0]=m=>s())},$6)]),Xe(" content slot "),Fe("div",{class:Rr(["p-[15px] overflow-y-auto",t.maxHeight?"max-h-96":"max-h-full"])},[Vb(f.$slots,"content")],2),Xe(" footer (optional)"),t.footer?(Be(),tt("div",G6,[Fe("div",q6,[Fe("button",{type:"button",class:"lux-btn","data-dismiss":"modal",onClick:a[1]||(a[1]=m=>s())},Wt(se(e)("Close",{ns:"client"})),1)])])):Xe("v-if",!0)])],544)):Xe("v-if",!0)]),_:3})]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/common/modal-dialog.vue"]]),W0=bc("metadata",()=>{const t=br();function e(o){t.value=o}function n(){t.value=void 0}return{metadataId:t,setMetadataId:e,clearMetadataId:n}},{}),W6=["aria-expanded"],H6={class:"leading-6"},og=lr(ir({__name:"expandable-panel",props:{expanded:{type:Boolean,required:!0},title:{type:String,required:!0}},emits:["togglePanel"],setup(t){return(e,n)=>(Be(),tt(en,null,[Fe("button",{onClick:n[0]||(n[0]=o=>e.$emit("togglePanel")),class:"group w-full text-left flex px-2 py-1.5 uppercase bg-tertiary","aria-expanded":t.expanded},[Fe("div",{class:Rr(["grow",t.expanded?"text-white":"text-secondary"])},Wt(t.title),3),Fe("div",H6,[Fe("div",{class:Rr(["fa fa-sharp fa-solid group-hover:text-white text-primary",t.expanded?"fa-caret-up":"fa-caret-down"])},null,2)])],8,W6),Fe("div",{class:Rr(t.expanded?"":"hidden")},[Vb(e.$slots,"default")],2)],64))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/common/expandable-panel.vue"]]),Z6={class:"mb-px",key:"node.id"},X6=["data-cy"],K6=["aria-expanded","data-cy"],Y6={class:"grow"},J6={class:"leading-6"},Q6={key:1,class:"flex text-tertiary pr-2"},eF=["data-cy"],tF={class:"ml-1 hover:underline"},H0=lr(ir({__name:"layer-tree-node",props:{node:{type:null,required:!0}},emits:["toggleLayer","toggleParent"],setup(t,{emit:e}){const n=t,{t:o}=En(),{setMetadataId:s}=W0(),f=!!n.node.children,a=n.node.depth===0,m=n.node.depth>=10,g=ar(()=>o(n.node.name,{ns:"client"}));function b(M){e("toggleLayer",M)}function E(M){e("toggleParent",M)}return(M,I)=>{const P=kA("layer-tree-node",!0);return f?(Be(),tt("div",Z6,[Xe("    First level parents"),t.node.depth===1?(Be(),tt("div",{key:0,"data-cy":`parentLayerLabel-${t.node.id}`},[kt(og,{title:se(g),expanded:t.node.expanded,onTogglePanel:I[0]||(I[0]=z=>E(t.node))},null,8,["title","expanded"])],8,X6)):t.node.depth>1&&!m?(Be(),tt(en,{key:1},[Xe("    Other parents (with custom panel style)"),Fe("button",{class:Rr(["w-full text-left flex px-2 py-1.5 pl-2",t.node.expanded?"text-tertiary":"bg-white text-primary"]),"aria-expanded":t.node.expanded,onClick:I[1]||(I[1]=z=>E(t.node)),"data-cy":`parentLayerLabel-${t.node.id}`},[Fe("div",Y6,Wt(se(g)),1),Fe("div",J6,[Fe("div",{class:Rr(["fa-sharp fa-solid",t.node.expanded?"fa-minus":"fa-plus"])},null,2)])],10,K6)],2112)):Xe("v-if",!0),Xe("    Children"),m?Xe("v-if",!0):(Be(),tt("div",{key:2,class:Rr(["bg-secondary",[{"pl-2":t.node.depth>1},{"lux-collapse":!a},{expanded:!a&&t.node.expanded}]])},[(Be(!0),tt(en,null,Ta(t.node.children,z=>(Be(),tn(P,{key:z.id,node:z,onToggleParent:I[2]||(I[2]=V=>E(V)),onToggleLayer:I[3]||(I[3]=V=>b(V))},null,8,["node"]))),128))],2))])):(Be(),tt("div",Q6,[Fe("button",{class:"self-start before:text-[.85rem] before:transform before:translate-y-[.1rem] before:inline-block before:content-['\\f129'] fa-solid fa-fw fa-fh fa-info",onClick:I[4]||(I[4]=z=>se(s)(t.node.id))}),Fe("button",{class:Rr(["w-full text-left",{"font-bold":t.node.checked}]),onClick:I[5]||(I[5]=z=>b(t.node)),"data-cy":`layerLabel-${t.node.id}`},[Fe("i",{class:Rr(["fa-solid",t.node.checked?"fa-check-square":"fa-square"])},null,2),Fe("span",tF,Wt(se(g)),1)],10,eF)]))}}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-tree/layer-tree-node.vue"]]);class rF{toggleNode(e,n,o){var s;return(n==null?void 0:n.id)===e?{...n,[o]:!n[o]}:{...n,children:(s=n.children)==null?void 0:s.map(f=>this.toggleNode(e,f,o))}}updateLayers(e,n){const{id:o}=e;if(e.children)return{...e,children:e.children.map(s=>this.updateLayers(s,n))};{const s=!!(n!=null&&n.find(f=>f.id===o));return{...e,checked:s}}}}const Zh=new rF;var La=(t=>(t.WMS="WMS",t.WMTS="WMTS",t))(La||{});function nF(t,e){var n,o;return t.children&&!e.children||((n=e.children)==null?void 0:n.length)===0?1:e.children&&!t.children||((o=t.children)==null?void 0:o.length)===0?-1:0}function OT(t,e,n=0){const{name:o="",type:s=La.WMS,children:f}=t,a=`${s}||${e}||${o}`.split("-").join("%2D"),m=ui();return{id:a,name:o,depth:n,children:f==null?void 0:f.sort(nF).map(g=>OT(g,e,n+1)),checked:m.hasLayer(a),expanded:!1}}function iF(t){const e=decodeURIComponent(t),[n,o,s]=e.split("||");return CT({id:e,url:Ac.getProxyfiedUrl(o),remoteLayer:{name:s,type:n}})}function CT({id:t,url:e,remoteLayer:n}){const{name:o="",type:s=La.WMS}=n;return{id:t,name:o,layers:o,url:e,type:s,imageType:SE.PNG}}class Z0{constructor(e,n=0,o=!1){this.message=e,this.httpStatus=n,this.isCrossOriginRelated=o}}let oF=0;function aF(){return oF++}function sF(t,e,n){return new Promise((o,s)=>{const f=aF(),a={requestId:f,taskName:t,params:n};e===null?window.dispatchEvent(new CustomEvent("ogc-client.request",{detail:a})):e.postMessage(a);const m=({detail:g,data:b})=>{const E=g||b;E.requestId===f&&(e===null?window.removeEventListener("message",m):e.removeEventListener("message",m),"error"in E?s(E.error):o(E.response))};e===null?window.addEventListener("ogc-client.response",m):e.addEventListener("message",m)})}function X0(t,e,n){const o=typeof WorkerGlobalScope<"u",s=async({detail:f,data:a})=>{const m=f||a;if(m.taskName===t){let g,b;try{g=await n(m.params)}catch(M){b=M}const E={taskName:t,requestId:m.requestId,...g&&{response:g},...b&&{error:b}};o?e.postMessage(E):e.dispatchEvent(new CustomEvent("ogc-client.response",{detail:E}))}};o?e.addEventListener("message",s):e.addEventListener("ogc-client.request",s)}let K0;function lF(){return K0||(K0=new Worker(URL.createObjectURL(new Blob([`function t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function r(t){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=t.apply(r,n);function c(t){e(a,o,i,c,u,"next",t)}function u(t){e(a,o,i,c,u,"throw",t)}c(void 0)}))}}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var o={exports:{}};!function(t){var e=function(t){var e,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(t,e,r){var n=h;return function(o,i){if(n===v)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw i;return G()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var u=l(t,e,r);if("normal"===u.type){if(n=r.done?d:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h="suspendedStart",p="suspendedYield",v="executing",d="completed",y={};function m(){}function g(){}function b(){}var S={};S[a]=function(){return this};var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&o.call(w,a)&&(S=w);var O=b.prototype=m.prototype=Object.create(S);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(i,a,c,u){var s=l(t[i],t,a);if("throw"!==s.type){var f=s.arg,h=f.value;return h&&"object"===n(h)&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(h).then((function(t){f.value=t,c(f)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}}function k(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=l(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function C(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}return{next:G}}function G(){return{value:e,done:!0}}return g.prototype=O.constructor=b,b.constructor=g,g.displayName=s(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},x(P.prototype),P.prototype[c]=function(){return this},t.AsyncIterator=P,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new P(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),s(O,u,"Generator"),O[a]=function(){return this},O.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=C,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}(o);var i=o.exports;function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(t,e,n){var o="undefined"!=typeof WorkerGlobalScope,a=function(){var a=r(i.mark((function r(a){var u,s,f,l,h,p;return i.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u=a.detail,s=a.data,(f=u||s).taskName!==t){r.next=14;break}return r.prev=3,r.next=6,n(f.params);case 6:l=r.sent,r.next=12;break;case 9:r.prev=9,r.t0=r.catch(3),h=r.t0;case 12:p=c(c({taskName:t,requestId:f.requestId},l&&{response:l}),h&&{error:h}),o?e.postMessage(p):e.dispatchEvent(new CustomEvent("ogc-client.response",{detail:p}));case 14:case"end":return r.stop()}}),r,null,[[3,9]])})));return function(t){return a.apply(this,arguments)}}();o?e.addEventListener("message",a):e.addEventListener("ogc-client.request",a)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function v(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function m(t,e,r){return m=y()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&h(o,r.prototype),o},m.apply(null,arguments)}function g(t){var e="function"==typeof Map?new Map:void 0;return g=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return m(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,t)},g(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e,r){return e&&b(t.prototype,e),r&&b(t,r),t}var E=function(){function t(e){l(this,t),this.chars=f(e),this.charCount=this.chars.length,this.charIndex=0,this.charsToBytes=new Array(this.charCount),this.multiByteMode=!1,this.string=e;var r=this.chars,n=this.charCount,o=this.charsToBytes;if(n===e.length)for(var i=0;i<n;++i)o[i]=i;else{for(var a=0,c=0;c<n;++c)o[c]=a,a+=r[c].length;this.multiByteMode=!0}}return S(t,[{key:"isEnd",get:function(){return this.charIndex>=this.charCount}},{key:"_charLength",value:function(t){var e=t.length;return e<2||!this.multiByteMode?e:t.replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,"_").length}},{key:"advance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.charIndex=Math.min(this.charCount,this.charIndex+t)}},{key:"consume",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.peek(t);return this.advance(t),e}},{key:"consumeMatch",value:function(t){if(!t.sticky)throw new Error('\`regex\` must have a sticky flag ("y")');t.lastIndex=this.charsToBytes[this.charIndex];var e=t.exec(this.string);if(null===e)return"";var r=e[0];return this.advance(this._charLength(r)),r}},{key:"consumeMatchFn",value:function(t){for(var e=this.charIndex;!this.isEnd&&t(this.peek());)this.advance();return this.charIndex>e?this.string.slice(this.charsToBytes[e],this.charsToBytes[this.charIndex]):""}},{key:"consumeString",value:function(t){if(this.consumeStringFast(t))return t;if(!this.multiByteMode)return"";var e=t.length,r=this._charLength(t);return r!==e&&t===this.peek(r)?(this.advance(r),t):""}},{key:"consumeStringFast",value:function(t){if(this.peek()===t[0]){var e=t.length;if(1===e)return this.advance(),t;if(this.peek(e)===t)return this.advance(e),t}return""}},{key:"consumeUntilMatch",value:function(t){if(!t.global)throw new Error('\`regex\` must have a global flag ("g")');var e=this.charsToBytes[this.charIndex];t.lastIndex=e;var r=t.exec(this.string);if(null===r||r.index===e)return"";var n=this.string.slice(e,r.index);return this.advance(this._charLength(n)),n}},{key:"consumeUntilString",value:function(t){var e=this.charIndex,r=this.charsToBytes,n=this.string,o=r[e],i=n.indexOf(t,o);if(i<=0)return"";var a=n.slice(o,i);return this.advance(this._charLength(a)),a}},{key:"peek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.charIndex>=this.charCount)return"";if(1===t)return this.chars[this.charIndex];var e=this.charsToBytes,r=this.charIndex;return this.string.slice(e[r],e[r+t])}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.charIndex=t>=0?Math.min(this.charCount,t):Math.max(0,this.charIndex+t)}}]),t}(),w=E,O={},x=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));function P(t){if(k(t))return!0;var e=T(t);return 45===e||46===e||e>=48&&e<=57||183===e||e>=768&&e<=879||e>=8255&&e<=8256}function k(t){var e=T(t);return 58===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function R(t){var e=T(t);return 9===e||10===e||13===e||e>=32&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111}function T(t){return t.codePointAt(0)||-1}O.predefinedEntities=x,O.isNameChar=P,O.isNameStartChar=k,O.isNotXmlChar=function(t){return!R(t)},O.isReferenceChar=function(t){return"#"===t||P(t)},O.isWhitespace=function(t){var e=T(t);return 32===e||9===e||10===e||13===e},O.isXmlChar=R;var j=function(){function t(){l(this,t),this.parent=null}return S(t,[{key:"document",get:function(){return this.parent?this.parent.document:null}},{key:"isRootNode",get:function(){return!!this.parent&&this.parent===this.document}},{key:"preserveWhitespace",get:function(){return Boolean(this.parent&&this.parent.preserveWhitespace)}},{key:"type",get:function(){return""}},{key:"toJSON",value:function(){var t={type:this.type};return this.isRootNode&&(t.isRootNode=!0),this.preserveWhitespace&&(t.preserveWhitespace=!0),t}}]),t}();j.TYPE_CDATA="cdata",j.TYPE_COMMENT="comment",j.TYPE_DOCUMENT="document",j.TYPE_ELEMENT="element",j.TYPE_PROCESSING_INSTRUCTION="pi",j.TYPE_TEXT="text";var C=j;function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var N=C,A=function(t){p(r,N);var e=G(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l(this,r),(t=e.call(this)).text=n,t}return S(r,[{key:"type",get:function(){return N.TYPE_TEXT}},{key:"toJSON",value:function(){return Object.assign(N.prototype.toJSON.call(this),{text:this.text})}}]),r}(),F=A;function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var L=C,M=F,B=function(t){p(r,M);var e=I(r);function r(){return l(this,r),e.apply(this,arguments)}return S(r,[{key:"type",get:function(){return L.TYPE_CDATA}}]),r}(),_=B;function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var D=C,W=function(t){p(r,D);var e=U(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l(this,r),(t=e.call(this)).content=n,t}return S(r,[{key:"type",get:function(){return D.TYPE_COMMENT}},{key:"toJSON",value:function(){return Object.assign(D.prototype.toJSON.call(this),{content:this.content})}}]),r}(),X=W;function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var q=C,J=function(t){p(r,q);var e=Y(r);function r(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.create(null),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return l(this,r),(n=e.call(this)).name=t,n.attributes=o,n.children=i,n}return S(r,[{key:"isEmpty",get:function(){return 0===this.children.length}},{key:"preserveWhitespace",get:function(){for(var t=this;t instanceof r;){if("xml:space"in t.attributes)return"preserve"===t.attributes["xml:space"];t=t.parent}return!1}},{key:"text",get:function(){return this.children.map((function(t){return"text"in t?t.text:""})).join("")}},{key:"type",get:function(){return q.TYPE_ELEMENT}},{key:"toJSON",value:function(){return Object.assign(q.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map((function(t){return t.toJSON()}))})}}]),r}(),V=J;function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var K=V,z=C,H=function(t){p(r,z);var e=$(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l(this,r),(t=e.call(this)).children=n,t}return S(r,[{key:"document",get:function(){return this}},{key:"root",get:function(){return this.children.find((function(t){return t instanceof K}))||null}},{key:"text",get:function(){return this.children.map((function(t){return"text"in t?t.text:""})).join("")}},{key:"type",get:function(){return z.TYPE_DOCUMENT}},{key:"toJSON",value:function(){return Object.assign(z.prototype.toJSON.call(this),{children:this.children.map((function(t){return t.toJSON()}))})}}]),r}(),Q=H;function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var tt=C,et=function(t){p(r,tt);var e=Z(r);function r(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return l(this,r),(n=e.call(this)).name=t,n.content=o,n}return S(r,[{key:"type",get:function(){return tt.TYPE_PROCESSING_INSTRUCTION}},{key:"toJSON",value:function(){return Object.assign(tt.prototype.toJSON.call(this),{name:this.name,content:this.content})}}]),r}(),rt=et;function nt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ot(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ot(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var it=w,at=O,ct=_,ut=X,st=Q,ft=V,lt=rt,ht=F,pt=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(l(this,t),this.document=new st,this.currentNode=this.document,this.options=r,this.scanner=new it(vt(e)),this.consumeProlog(),this.consumeElement()||this.error("Root element is missing or invalid");this.consumeMisc(););this.scanner.isEnd||this.error("Extra content at the end of the document")}return S(t,[{key:"addNode",value:function(t){t.parent=this.currentNode,this.currentNode.children.push(t)}},{key:"addText",value:function(t){var e=this.currentNode.children;if(e.length>0){var r=e[e.length-1];if(r instanceof ht)return void(r.text+=t)}this.addNode(new ht(t))}},{key:"consumeAttributeValue",value:function(){var t,e=this.scanner,r=e.peek();if('"'!==r&&"'"!==r)return!1;e.advance();var n=!1,o="",i='"'===r?new RegExp('[^"&<]+',"y"):new RegExp("[^'&<]+","y");t:for(;!e.isEnd;){switch((t=e.consumeMatch(i))&&(this.validateChars(t),o+=t.replace(/[\\t\\r\\n]/g," ")),e.peek()){case r:n=!0;break t;case"&":o+=this.consumeReference();continue;case"<":this.error("Unescaped \`<\` is not allowed in an attribute value");break;case"":this.error("Unclosed attribute")}}return n||this.error("Unclosed attribute"),e.advance(),o}},{key:"consumeCdataSection",value:function(){var t=this.scanner;if(!t.consumeStringFast("<![CDATA["))return!1;var e=t.consumeUntilString("]]>");return this.validateChars(e),t.consumeStringFast("]]>")||this.error("Unclosed CDATA section"),this.options.preserveCdata?this.addNode(new ct(e)):this.addText(e),!0}},{key:"consumeCharData",value:function(){var t=this.scanner,e=t.consumeUntilMatch(/<|&|]]>/g);return!!e&&(this.validateChars(e),"]"===t.peek()&&"]]>"===t.peek(3)&&this.error("Element content may not contain the CDATA section close delimiter \`]]>\`"),this.addText(e),!0)}},{key:"consumeComment",value:function(){var t=this.scanner;if(!t.consumeStringFast("\\x3c!--"))return!1;var e=t.consumeUntilString("--");return this.validateChars(e),t.consumeStringFast("--\\x3e")||("--"===t.peek(2)?this.error("The string \`--\` isn't allowed inside a comment"):this.error("Unclosed comment")),this.options.preserveComments&&this.addNode(new ut(e.trim())),!0}},{key:"consumeContentReference",value:function(){var t=this.consumeReference();return!!t&&(this.addText(t),!0)}},{key:"consumeDoctypeDeclaration",value:function(){var t=this.scanner;return!(!t.consumeStringFast("<!DOCTYPE")||!this.consumeWhitespace())&&(t.consumeMatch(new RegExp("[^[>]+","y")),t.consumeMatch(new RegExp("\\\\[[\\\\s\\\\S]+?\\\\][\\\\x20\\\\t\\\\r\\\\n]*>","y"))||t.consumeStringFast(">")||this.error("Unclosed doctype declaration"),!0)}},{key:"consumeElement",value:function(){var t=this.scanner,e=t.charIndex;if("<"!==t.peek())return!1;t.advance();var r=this.consumeName();if(!r)return t.reset(e),!1;for(var n=Object.create(null);this.consumeWhitespace();){var o=this.consumeName();if(o){var i=this.consumeEqual()&&this.consumeAttributeValue();!1===i&&this.error("Attribute value expected"),o in n&&this.error("Duplicate attribute: ".concat(o)),"xml:space"===o&&"default"!==i&&"preserve"!==i&&this.error('Value of the \`xml:space\` attribute must be "default" or "preserve"'),n[o]=i}}if(this.options.sortAttributes){for(var a=Object.keys(n).sort(),c=Object.create(null),u=0;u<a.length;++u){var s=a[u];c[s]=n[s]}n=c}var f=Boolean(t.consumeStringFast("/>")),l=new ft(r,n);if(l.parent=this.currentNode,!f){for(t.consumeStringFast(">")||this.error("Unclosed start tag for element \`".concat(r,"\`")),this.currentNode=l,this.consumeCharData();this.consumeElement()||this.consumeContentReference()||this.consumeCdataSection()||this.consumeProcessingInstruction()||this.consumeComment();)this.consumeCharData();var h,p=t.charIndex;t.consumeStringFast("</")&&(h=this.consumeName())&&h===r||(t.reset(p),this.error("Missing end tag for element ".concat(r))),this.consumeWhitespace(),t.consumeStringFast(">")||this.error("Unclosed end tag for element ".concat(r)),this.currentNode=l.parent}return this.addNode(l),!0}},{key:"consumeEqual",value:function(){return this.consumeWhitespace(),!!this.scanner.consumeStringFast("=")&&(this.consumeWhitespace(),!0)}},{key:"consumeMisc",value:function(){return this.consumeComment()||this.consumeProcessingInstruction()||this.consumeWhitespace()}},{key:"consumeName",value:function(){return at.isNameStartChar(this.scanner.peek())?this.scanner.consumeMatchFn(at.isNameChar):""}},{key:"consumeProcessingInstruction",value:function(){var t=this.scanner,e=t.charIndex;if(!t.consumeStringFast("<?"))return!1;var r=this.consumeName();if(r?"xml"===r.toLowerCase()&&(t.reset(e),this.error("XML declaration isn't allowed here")):this.error("Invalid processing instruction"),!this.consumeWhitespace()){if(t.consumeStringFast("?>"))return this.addNode(new lt(r)),!0;this.error("Whitespace is required after a processing instruction name")}var n=t.consumeUntilString("?>");return this.validateChars(n),t.consumeStringFast("?>")||this.error("Unterminated processing instruction"),this.addNode(new lt(r,n)),!0}},{key:"consumeProlog",value:function(){var t=this.scanner,e=t.charIndex;for(this.consumeXmlDeclaration();this.consumeMisc(););if(this.consumeDoctypeDeclaration())for(;this.consumeMisc(););return e<t.charIndex}},{key:"consumeReference",value:function(){var t=this.scanner;if("&"!==t.peek())return!1;t.advance();var e,r=t.consumeMatchFn(at.isReferenceChar);if(";"!==t.consume()&&this.error("Unterminated reference (a reference must end with \`;\`)"),"#"===r[0]){var o="x"===r[1]?parseInt(r.slice(2),16):parseInt(r.slice(1),10);isNaN(o)&&this.error("Invalid character reference"),e=String.fromCodePoint(o),at.isXmlChar(e)||this.error("Character reference resolves to an invalid character")}else if(void 0===(e=at.predefinedEntities[r])){var i=this.options,a=i.ignoreUndefinedEntities,c=i.resolveUndefinedEntity,u="&".concat(r,";");if(c){var s=c(u);if(null!=s){var f=n(s);if("string"!==f)throw new TypeError("\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ".concat(f));return s}}if(a)return u;t.reset(-u.length),this.error("Named entity isn't defined: ".concat(u))}return e}},{key:"consumeSystemLiteral",value:function(){var t=this.scanner,e=t.consumeStringFast('"')||t.consumeStringFast("'");if(!e)return!1;var r=t.consumeUntilString(e);return this.validateChars(r),t.consumeStringFast(e)||this.error("Missing end quote"),r}},{key:"consumeWhitespace",value:function(){return Boolean(this.scanner.consumeMatchFn(at.isWhitespace))}},{key:"consumeXmlDeclaration",value:function(){var t=this.scanner;if(!t.consumeStringFast("<?xml"))return!1;this.consumeWhitespace()||this.error("Invalid XML declaration");var e=Boolean(t.consumeStringFast("version"))&&this.consumeEqual()&&this.consumeSystemLiteral();if(!1===e?this.error("XML version is missing or invalid"):/^1\\.[0-9]+$/.test(e)||this.error("Invalid character in version number"),this.consumeWhitespace()){Boolean(t.consumeStringFast("encoding"))&&this.consumeEqual()&&this.consumeSystemLiteral()&&this.consumeWhitespace();var r=Boolean(t.consumeStringFast("standalone"))&&this.consumeEqual()&&this.consumeSystemLiteral();r&&("yes"!==r&&"no"!==r&&this.error('Only "yes" and "no" are permitted as values of \`standalone\`'),this.consumeWhitespace())}return t.consumeStringFast("?>")||this.error("Invalid or unclosed XML declaration"),!0}},{key:"error",value:function(t){for(var e=this.scanner,r=e.charIndex,n=e.string,o=1,i="",a=1,c=0;c<r;++c){var u=n[c];"\\n"===u?(o=1,i="",a+=1):(o+=1,i+=u)}var s=n.indexOf("\\n",r),f=0;(i+=-1===s?n.slice(r):n.slice(r,s)).length>50&&(o<40?i=i.slice(0,50):(f=o-20,i=i.slice(f,o+30)));var l=new Error("".concat(t," (line ").concat(a,", column ").concat(o,")\\n")+"  ".concat(i,"\\n")+" ".repeat(o-f+1)+"^\\n");throw Object.assign(l,{column:o,excerpt:i,line:a,pos:r}),l}},{key:"validateChars",value:function(t){var e,r=0,n=nt(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;at.isNotXmlChar(o)&&(this.scanner.reset(-(f(t).length-r)),this.error("Invalid character")),r+=1}}catch(t){n.e(t)}finally{n.f()}}}]),t}();function vt(t){return"\\ufeff"===t[0]&&(t=t.slice(1)),t.replace(/\\r\\n?/g,"\\n")}var dt=pt,yt=_,mt=X,gt=Q,bt=V,St=C,Et=rt,wt=F;function Ot(t,e){return new dt(t,e).document}Ot.XmlCdata=yt,Ot.XmlComment=mt,Ot.XmlDocument=gt,Ot.XmlElement=bt,Ot.XmlNode=St,Ot.XmlProcessingInstruction=Et,Ot.XmlText=wt;var xt=Ot;function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var kt=function(t){p(r,g(Error));var e=Pt(r);function r(t){return l(this,r),e.call(this,t)}return r}();function Rt(t){return t.children[0]}function Tt(t){var e=t.indexOf(":");return e>-1?t.substr(e+1):t}function jt(t){return t.name||""}function Ct(t,e,r){var n=Tt(e);return t&&Array.isArray(t.children)?t.children.reduce((function t(e,o){return Tt(jt(o))===n&&e.push(o),r&&Array.isArray(o.children)?[].concat(f(e),f(o.children.reduce(t,[]))):e}),[]):[]}function Gt(t,e,r){return Ct(t,e,r)[0]||null}function Nt(t){return t&&Array.isArray(t.children)?f(t.children.filter((function(t){return"XmlElement"===t.constructor.name}))):[]}function At(t){var e=t&&Array.isArray(t.children)?t.children.find((function(t){return"text"===t.type})):null;return e?e.text:""}function Ft(t,e){return t&&t.attributes[e]||""}var It=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l(this,t),this.message=e,this.httpStatus=r,this.isCrossOriginRelated=n};function Lt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Bt=["utf-8","utf-16","iso-8859-1"];function _t(t,e){var r,n=e?function(t){var e=/charset=([^;]+)/.exec(t);return e?e[1]:null}(e):null,o=Lt(n?[n].concat(Bt):Bt);try{for(o.s();!(r=o.n()).done;){var i=r.value;try{return new TextDecoder(i,{fatal:!0}).decode(t)}catch(t){}}}catch(t){o.e(t)}finally{o.f()}return console.warn("XML document encoding could not be determined, falling back to ".concat("utf-8",".")),new TextDecoder("utf-8").decode(t)}function Ut(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Dt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Wt=new Map;function Xt(t){return function(t){if(Wt.has(t))return Wt.get(t);var e=fetch(t);return e.finally((function(){return Wt.delete(t)})),Wt.set(t,e),e}(t).catch((function(){return fetch(t,{method:"HEAD",mode:"no-cors"}).catch((function(t){throw new It("Fetching the document failed either due to network errors or unreachable host, error is: ".concat(t.message),0,!1)})).then((function(){throw new It("The document could not be fetched due to CORS limitations",0,!0)}))})).then(function(){var t=r(i.mark((function t(e){var r,n,o;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ok){t.next=5;break}return t.next=3,e.text();case 3:throw r=t.sent,new It("Received an error with code ".concat(e.status,": ").concat(r),e.status,!1);case 5:return t.next=7,e.arrayBuffer();case 7:return n=t.sent,o=e.headers.get("Content-Type"),t.abrupt("return",_t(n,o));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(t){return function(t){var e=null;try{e=xt(t)}catch(t){throw new kt(t.message)}return e}(t)}))}function Yt(t,e){var r=t.match(/(https?%3A%2F%2F[^/]+)$/);if(r){var n=r[1],o=Yt(decodeURIComponent(n),e);return t.replace(n,encodeURIComponent(o))}var i,a=new URL(t),c=Object.keys(e),u=c.map((function(t){return t.toLowerCase()})),s=[],f=Ut(a.searchParams.keys());try{for(f.s();!(i=f.n()).done;){var l=i.value;u.indexOf(l.toLowerCase())>-1&&s.push(l)}}catch(t){f.e(t)}finally{f.f()}return s.map((function(t){return a.searchParams.delete(t)})),c.forEach((function(t){return a.searchParams.set(t,!0===e[t]?"":e[t])})),a.toString()}var qt=["EPSG:4046","EPSG:4075","EPSG:4120","EPSG:4122","EPSG:4124","EPSG:4126","EPSG:4149","EPSG:4151","EPSG:4153","EPSG:4155","EPSG:4157","EPSG:4159","EPSG:4161","EPSG:4163","EPSG:4165","EPSG:4167","EPSG:4169","EPSG:4171","EPSG:4173","EPSG:4175","EPSG:4178","EPSG:4180","EPSG:4182","EPSG:4184","EPSG:4188","EPSG:4190","EPSG:4191","EPSG:4196","EPSG:4198","EPSG:4202","EPSG:4210","EPSG:4211","EPSG:4214","EPSG:4226","EPSG:4229","EPSG:4231","EPSG:4233","EPSG:4236","EPSG:4238","EPSG:4240","EPSG:4242","EPSG:4244","EPSG:4246","EPSG:4248","EPSG:4250","EPSG:4252","EPSG:4255","EPSG:4258","EPSG:4261","EPSG:4264","EPSG:4267","EPSG:4270","EPSG:4273","EPSG:4276","EPSG:4279","EPSG:4281","EPSG:4284","EPSG:4286","EPSG:4288","EPSG:4292","EPSG:4295","EPSG:4297","EPSG:4299","EPSG:4302","EPSG:4324","EPSG:4326"];function Jt(t){return qt.indexOf(Vt(t))>-1}function Vt(t){if(/^urn:(?:x-)?ogc:def:crs:epsg:/.test(t.toLowerCase())){var e=/([0-9]+)$/.exec(t)[1];return"EPSG:".concat(e)}return t}function $t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Kt(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?$t(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zt(t){return Rt(t).attributes.version}function Ht(t){var e=zt(t);return Ct(Gt(Rt(t),"Capability"),"Layer").map((function(t){return Qt(t,e)}))}function Qt(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a="1.3.0"===r?"CRS":"SRS",c=Ct(e,a).map(At),u=c.length>0?c:n,s=Ct(e,"Style").map(Zt),f=s.length>0?s:o;function l(t){return(Jt(Ft(t,a))&&"1.3.0"===r?["miny","minx","maxy","maxx"]:["minx","miny","maxx","maxy"]).map((function(e){return Ft(t,e)}))}var h=Gt(e,"Attribution"),p=null!==h?te(h):i,v=Ct(e,"Layer").map((function(t){return Qt(t,r,u,f,p)}));return Kt({name:At(Gt(e,"Name")),title:At(Gt(e,"Title")),abstract:At(Gt(e,"Abstract")),availableCrs:u,styles:f,attribution:p,boundingBoxes:Ct(e,"BoundingBox").reduce((function(e,r){return Kt(Kt({},e),{},t({},Ft(r,a),l(r)))}),{})},v.length&&{children:v})}function Zt(t){var e=Ft(Gt(Gt(t,"LegendURL"),"OnlineResource"),"xlink:href");return Kt({name:At(Gt(t,"Name")),title:At(Gt(t,"Title"))},e&&{legendUrl:e})}function te(t){var e=Ft(Gt(Gt(t,"LogoURL"),"OnlineResource"),"xlink:href"),r=Ft(Gt(t,"OnlineResource"),"xlink:href"),n=At(Gt(t,"Title"));return Kt(Kt(Kt({},n&&{title:n}),r&&{url:r}),e&&{logoUrl:e})}function ee(t){return Rt(t).attributes.version}function re(t){var e;if(ee(t).startsWith("1.0")){var r=Gt(Gt(Gt(Rt(t),"Capability"),"Request"),"GetFeature");e=Nt(Gt(r,"ResultFormat")).map(jt)}else{var n=Ct(Gt(Rt(t),"OperationsMetadata"),"Operation").find((function(t){return"GetFeature"===Ft(t,"name")})),o=Ct(n,"Parameter").find((function(t){return"outputFormat"===Ft(t,"name")}));e=Ct(o,"Value",!0).map(At)}return e}function ne(t){var e=ee(t),r=re(t);return Ct(Gt(Rt(t),"FeatureTypeList"),"FeatureType").map((function(t){return function(t,e,r){var n=e.startsWith("2.")?"CRS":"SRS",o=e.startsWith("1.0")?"SRS":"Default".concat(n);function i(){var e=Gt(t,"LatLongBoundingBox");return["minx","miny","maxx","maxy"].map((function(t){return Ft(e,t)})).map(parseFloat)}function a(){var e=Gt(t,"WGS84BoundingBox");return["LowerCorner","UpperCorner"].map((function(t){return Gt(e,t)})).map((function(t){return At(t).split(" ")})).reduce((function(t,e){return[].concat(f(t),f(e))})).map(parseFloat)}var c=e.startsWith("1.0")?[]:Ct(t,"Other".concat(n)).map(At).map(Vt),u=e.startsWith("1.0")?[]:Ct(Gt(t,"OutputFormats"),"Format").map(At);return{name:At(Gt(t,"Name")),title:At(Gt(t,"Title")),abstract:At(Gt(t,"Abstract")),defaultCrs:Vt(At(Gt(t,o))),otherCrs:c,outputFormats:u.length>0?u:r,latLonBoundingBox:e.startsWith("1.0")?i():a()}}(t,e,r)}))}function oe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?oe(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,r,n){var o,i=Rt(e);if(n.startsWith("2.0"))o=Ct(i,"member").map((function(t){return Nt(t)[0]}));else{var a=Gt(i,"featureMembers");o=a?Nt(a):Ct(i,"featureMember").map((function(t){return Nt(t)[0]}))}var c="1.0.0"===n?"fid":"gml:id";function u(e){return Nt(e).filter((function(t){return Tt(jt(t))in r.properties})).reduce((function(e,n){var o=Tt(jt(n));return ie(ie({},e),{},t({},o,function(t,e){switch(r.properties[t]){case"integer":return parseInt(e);case"float":return parseFloat(e);case"boolean":return"true"===e;default:return e}}(o,At(n))))}),{})}return o.map((function(t){return{id:Ft(t,c),properties:u(t)}}))}function ce(e,r,n,o,i,a,c,u,s,f){var l="2.0.0"===r?"COUNT":"MAXFEATURES",h=t({SERVICE:"WFS",REQUEST:"GetFeature",VERSION:r},"2.0.0"===r?"TYPENAMES":"TYPENAME",n);if(void 0!==o&&(h.OUTPUTFORMAT=o),void 0!==a&&(h.PROPERTYNAME=a.join(",")),c?(h.RESULTTYPE="hits",h[l]="1"):void 0!==i&&(h[l]=i.toString(10)),u&&(h.SRSNAME=u),s){var p=s.join(",");h.BBOX=f?"".concat(p,",").concat(f):p}return Yt(e,h)}u("parseWmsCapabilities",self,(function(t){return Xt(t.url).then((function(t){return{info:(e=t,r=Gt(Rt(e),"Service"),n=Ct(Gt(r,"KeywordList"),"Keyword").map(At).filter((function(t,e,r){return r.indexOf(t)===e})),{title:At(Gt(r,"Title")),name:At(Gt(r,"Name")),abstract:At(Gt(r,"Abstract")),fees:At(Gt(r,"Fees")),constraints:At(Gt(r,"AccessConstraints")),keywords:n}),layers:Ht(t),version:zt(t)};var e,r,n}))})),u("parseWfsCapabilities",self,(function(t){return Xt(t.url).then((function(t){return{info:(e=t,n=ee(e),o=n.startsWith("1.0")?"Service":"ServiceIdentification",i=n.startsWith("1.0")?"Name":"ServiceType",a=Gt(Rt(e),o),r=n.startsWith("1.0")?At(Gt(a,"Keywords")).split(",").map((function(t){return t.trim()})):Ct(Gt(a,"Keywords"),"Keyword").map(At),{title:At(Gt(a,"Title")),name:At(Gt(a,i)),abstract:At(Gt(a,"Abstract")),fees:At(Gt(a,"Fees")),constraints:At(Gt(a,"AccessConstraints")),keywords:r,outputFormats:re(e)}),featureTypes:ne(t),version:ee(t)};var e,r,n,o,i,a}))})),u("queryWfsFeatureTypeDetails",self,(function(t){var e=t.url,r=t.serviceVersion,n=t.featureTypeFull;return Xt(ce(e,r,n.name,void 0,void 0,Object.keys(n.properties))).then((function(t){return{props:(e=ae(t,n,r),e.reduce((function(t,e){var r=function(r){var n=e.properties[r];r in t||(t[r]={uniqueValues:[]});var o=t[r].uniqueValues.find((function(t){return t.value===n}));o?o.count++:t[r].uniqueValues.push({value:n,count:1})};for(var n in e.properties)r(n);return t}),{}))};var e}))}));
`],{type:"application/javascript"})),{type:"module"})),K0}function uF(t){return sF("parseWmsCapabilities",lF(),{url:t})}const Mu="";class cF{constructor(e){this.chars=[...e],this.charCount=this.chars.length,this.charIndex=0,this.charsToBytes=new Array(this.charCount),this.multiByteMode=!1,this.string=e;let{chars:n,charCount:o,charsToBytes:s}=this;if(o===e.length)for(let f=0;f<o;++f)s[f]=f;else{for(let f=0,a=0;a<o;++a)s[a]=f,f+=n[a].length;this.multiByteMode=!0}}get isEnd(){return this.charIndex>=this.charCount}_charLength(e){let{length:n}=e;return n<2||!this.multiByteMode?n:e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length}advance(e=1){this.charIndex=Math.min(this.charCount,this.charIndex+e)}consume(e=1){let n=this.peek(e);return this.advance(e),n}consumeMatch(e){if(!e.sticky)throw new Error('`regex` must have a sticky flag ("y")');e.lastIndex=this.charsToBytes[this.charIndex];let n=e.exec(this.string);if(n===null)return Mu;let o=n[0];return this.advance(this._charLength(o)),o}consumeMatchFn(e){let n=this.charIndex;for(;!this.isEnd&&e(this.peek());)this.advance();return this.charIndex>n?this.string.slice(this.charsToBytes[n],this.charsToBytes[this.charIndex]):Mu}consumeString(e){if(this.consumeStringFast(e))return e;if(!this.multiByteMode)return Mu;let{length:n}=e,o=this._charLength(e);return o!==n&&e===this.peek(o)?(this.advance(o),e):Mu}consumeStringFast(e){if(this.peek()===e[0]){let{length:n}=e;if(n===1)return this.advance(),e;if(this.peek(n)===e)return this.advance(n),e}return Mu}consumeUntilMatch(e){if(!e.global)throw new Error('`regex` must have a global flag ("g")');let n=this.charsToBytes[this.charIndex];e.lastIndex=n;let o=e.exec(this.string);if(o===null||o.index===n)return Mu;let s=this.string.slice(n,o.index);return this.advance(this._charLength(s)),s}consumeUntilString(e){let{charIndex:n,charsToBytes:o,string:s}=this,f=o[n],a=s.indexOf(e,f);if(a<=0)return Mu;let m=s.slice(f,a);return this.advance(this._charLength(m)),m}peek(e=1){if(this.charIndex>=this.charCount)return Mu;if(e===1)return this.chars[this.charIndex];let{charsToBytes:n,charIndex:o}=this;return this.string.slice(n[o],n[o+e])}reset(e=0){this.charIndex=e>=0?Math.min(this.charCount,e):Math.max(0,this.charIndex+e)}}var hF=cF,Iu={};const fF=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));Iu.predefinedEntities=fF;function AT(t){if(PT(t))return!0;let e=ag(t);return e===45||e===46||e>=48&&e<=57||e===183||e>=768&&e<=879||e>=8255&&e<=8256}Iu.isNameChar=AT;function PT(t){let e=ag(t);return e===58||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}Iu.isNameStartChar=PT;function pF(t){return!kT(t)}Iu.isNotXmlChar=pF;function dF(t){return t==="#"||AT(t)}Iu.isReferenceChar=dF;function mF(t){let e=ag(t);return e===32||e===9||e===10||e===13}Iu.isWhitespace=mF;function kT(t){let e=ag(t);return e===9||e===10||e===13||e>=32&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111}Iu.isXmlChar=kT;function ag(t){return t.codePointAt(0)||-1}class Pc{constructor(){this.parent=null}get document(){return this.parent?this.parent.document:null}get isRootNode(){return this.parent?this.parent===this.document:!1}get preserveWhitespace(){return Boolean(this.parent&&this.parent.preserveWhitespace)}get type(){return""}toJSON(){let e={type:this.type};return this.isRootNode&&(e.isRootNode=!0),this.preserveWhitespace&&(e.preserveWhitespace=!0),e}}Pc.TYPE_CDATA="cdata",Pc.TYPE_COMMENT="comment",Pc.TYPE_DOCUMENT="document",Pc.TYPE_ELEMENT="element",Pc.TYPE_PROCESSING_INSTRUCTION="pi",Pc.TYPE_TEXT="text";var kc=Pc;const Y0=kc;class yF extends Y0{constructor(e=""){super(),this.text=e}get type(){return Y0.TYPE_TEXT}toJSON(){return Object.assign(Y0.prototype.toJSON.call(this),{text:this.text})}}var J0=yF;const gF=kc,vF=J0;class _F extends vF{get type(){return gF.TYPE_CDATA}}var LT=_F;const Q0=kc;class xF extends Q0{constructor(e=""){super(),this.content=e}get type(){return Q0.TYPE_COMMENT}toJSON(){return Object.assign(Q0.prototype.toJSON.call(this),{content:this.content})}}var DT=xF;const e1=kc;class t1 extends e1{constructor(e,n=Object.create(null),o=[]){super(),this.name=e,this.attributes=n,this.children=o}get isEmpty(){return this.children.length===0}get preserveWhitespace(){let e=this;for(;e instanceof t1;){if("xml:space"in e.attributes)return e.attributes["xml:space"]==="preserve";e=e.parent}return!1}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return e1.TYPE_ELEMENT}toJSON(){return Object.assign(e1.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(e=>e.toJSON())})}}var r1=t1;const bF=r1,n1=kc;class wF extends n1{constructor(e=[]){super(),this.children=e}get document(){return this}get root(){return this.children.find(e=>e instanceof bF)||null}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return n1.TYPE_DOCUMENT}toJSON(){return Object.assign(n1.prototype.toJSON.call(this),{children:this.children.map(e=>e.toJSON())})}}var NT=wF;const i1=kc;class EF extends i1{constructor(e,n=""){super(),this.name=e,this.content=n}get type(){return i1.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(i1.prototype.toJSON.call(this),{name:this.name,content:this.content})}}var RT=EF;const SF=hF,Lc=Iu,TF=LT,MF=DT,IF=NT,OF=r1,zT=RT,FT=J0,o1="";class CF{constructor(e,n={}){for(this.document=new IF,this.currentNode=this.document,this.options=n,this.scanner=new SF(PF(e)),this.consumeProlog(),this.consumeElement()||this.error("Root element is missing or invalid");this.consumeMisc(););this.scanner.isEnd||this.error("Extra content at the end of the document")}addNode(e){e.parent=this.currentNode,this.currentNode.children.push(e)}addText(e){let{children:n}=this.currentNode;if(n.length>0){let o=n[n.length-1];if(o instanceof FT){o.text+=e;return}}this.addNode(new FT(e))}consumeAttributeValue(){let{scanner:e}=this,n=e.peek();if(n!=='"'&&n!=="'")return!1;e.advance();let o,s=!1,f=o1,a=n==='"'?/[^"&<]+/y:/[^'&<]+/y;e:for(;!e.isEnd;)switch(o=e.consumeMatch(a),o&&(this.validateChars(o),f+=o.replace(/[\t\r\n]/g," ")),e.peek()){case n:s=!0;break e;case"&":f+=this.consumeReference();continue;case"<":this.error("Unescaped `<` is not allowed in an attribute value");break;case o1:this.error("Unclosed attribute");break}return s||this.error("Unclosed attribute"),e.advance(),f}consumeCdataSection(){let{scanner:e}=this;if(!e.consumeStringFast("<![CDATA["))return!1;let n=e.consumeUntilString("]]>");return this.validateChars(n),e.consumeStringFast("]]>")||this.error("Unclosed CDATA section"),this.options.preserveCdata?this.addNode(new TF(n)):this.addText(n),!0}consumeCharData(){let{scanner:e}=this,n=e.consumeUntilMatch(/<|&|]]>/g);return n?(this.validateChars(n),e.peek()==="]"&&e.peek(3)==="]]>"&&this.error("Element content may not contain the CDATA section close delimiter `]]>`"),this.addText(n),!0):!1}consumeComment(){let{scanner:e}=this;if(!e.consumeStringFast("<!--"))return!1;let n=e.consumeUntilString("--");return this.validateChars(n),e.consumeStringFast("-->")||(e.peek(2)==="--"?this.error("The string `--` isn't allowed inside a comment"):this.error("Unclosed comment")),this.options.preserveComments&&this.addNode(new MF(n.trim())),!0}consumeContentReference(){let e=this.consumeReference();return e?(this.addText(e),!0):!1}consumeDoctypeDeclaration(){let{scanner:e}=this;return!e.consumeStringFast("<!DOCTYPE")||!this.consumeWhitespace()?!1:(e.consumeMatch(/[^[>]+/y),e.consumeMatch(/\[[\s\S]+?\][\x20\t\r\n]*>/y)||e.consumeStringFast(">")||this.error("Unclosed doctype declaration"),!0)}consumeElement(){let{scanner:e}=this,n=e.charIndex;if(e.peek()!=="<")return!1;e.advance();let o=this.consumeName();if(!o)return e.reset(n),!1;let s=Object.create(null);for(;this.consumeWhitespace();){let m=this.consumeName();if(!m)continue;let g=this.consumeEqual()&&this.consumeAttributeValue();g===!1&&this.error("Attribute value expected"),m in s&&this.error(`Duplicate attribute: ${m}`),m==="xml:space"&&g!=="default"&&g!=="preserve"&&this.error('Value of the `xml:space` attribute must be "default" or "preserve"'),s[m]=g}if(this.options.sortAttributes){let m=Object.keys(s).sort(),g=Object.create(null);for(let b=0;b<m.length;++b){let E=m[b];g[E]=s[E]}s=g}let f=Boolean(e.consumeStringFast("/>")),a=new OF(o,s);if(a.parent=this.currentNode,!f){for(e.consumeStringFast(">")||this.error(`Unclosed start tag for element \`${o}\``),this.currentNode=a,this.consumeCharData();this.consumeElement()||this.consumeContentReference()||this.consumeCdataSection()||this.consumeProcessingInstruction()||this.consumeComment();)this.consumeCharData();let m=e.charIndex,g;(!e.consumeStringFast("</")||!(g=this.consumeName())||g!==o)&&(e.reset(m),this.error(`Missing end tag for element ${o}`)),this.consumeWhitespace(),e.consumeStringFast(">")||this.error(`Unclosed end tag for element ${o}`),this.currentNode=a.parent}return this.addNode(a),!0}consumeEqual(){return this.consumeWhitespace(),this.scanner.consumeStringFast("=")?(this.consumeWhitespace(),!0):!1}consumeMisc(){return this.consumeComment()||this.consumeProcessingInstruction()||this.consumeWhitespace()}consumeName(){return Lc.isNameStartChar(this.scanner.peek())?this.scanner.consumeMatchFn(Lc.isNameChar):o1}consumeProcessingInstruction(){let{scanner:e}=this,n=e.charIndex;if(!e.consumeStringFast("<?"))return!1;let o=this.consumeName();if(o?o.toLowerCase()==="xml"&&(e.reset(n),this.error("XML declaration isn't allowed here")):this.error("Invalid processing instruction"),!this.consumeWhitespace()){if(e.consumeStringFast("?>"))return this.addNode(new zT(o)),!0;this.error("Whitespace is required after a processing instruction name")}let s=e.consumeUntilString("?>");return this.validateChars(s),e.consumeStringFast("?>")||this.error("Unterminated processing instruction"),this.addNode(new zT(o,s)),!0}consumeProlog(){let{scanner:e}=this,n=e.charIndex;for(this.consumeXmlDeclaration();this.consumeMisc(););if(this.consumeDoctypeDeclaration())for(;this.consumeMisc(););return n<e.charIndex}consumeReference(){let{scanner:e}=this;if(e.peek()!=="&")return!1;e.advance();let n=e.consumeMatchFn(Lc.isReferenceChar);e.consume()!==";"&&this.error("Unterminated reference (a reference must end with `;`)");let o;if(n[0]==="#"){let s=n[1]==="x"?parseInt(n.slice(2),16):parseInt(n.slice(1),10);isNaN(s)&&this.error("Invalid character reference"),o=String.fromCodePoint(s),Lc.isXmlChar(o)||this.error("Character reference resolves to an invalid character")}else if(o=Lc.predefinedEntities[n],o===void 0){let{ignoreUndefinedEntities:s,resolveUndefinedEntity:f}=this.options,a=`&${n};`;if(f){let m=f(a);if(m!=null){let g=typeof m;if(g!=="string")throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${g}`);return m}}if(s)return a;e.reset(-a.length),this.error(`Named entity isn't defined: ${a}`)}return o}consumeSystemLiteral(){let{scanner:e}=this,n=e.consumeStringFast('"')||e.consumeStringFast("'");if(!n)return!1;let o=e.consumeUntilString(n);return this.validateChars(o),e.consumeStringFast(n)||this.error("Missing end quote"),o}consumeWhitespace(){return Boolean(this.scanner.consumeMatchFn(Lc.isWhitespace))}consumeXmlDeclaration(){let{scanner:e}=this;if(!e.consumeStringFast("<?xml"))return!1;this.consumeWhitespace()||this.error("Invalid XML declaration");let n=Boolean(e.consumeStringFast("version"))&&this.consumeEqual()&&this.consumeSystemLiteral();if(n===!1?this.error("XML version is missing or invalid"):/^1\.[0-9]+$/.test(n)||this.error("Invalid character in version number"),this.consumeWhitespace()){Boolean(e.consumeStringFast("encoding"))&&this.consumeEqual()&&this.consumeSystemLiteral()&&this.consumeWhitespace();let s=Boolean(e.consumeStringFast("standalone"))&&this.consumeEqual()&&this.consumeSystemLiteral();s&&(s!=="yes"&&s!=="no"&&this.error('Only "yes" and "no" are permitted as values of `standalone`'),this.consumeWhitespace())}return e.consumeStringFast("?>")||this.error("Invalid or unclosed XML declaration"),!0}error(e){let{charIndex:n,string:o}=this.scanner,s=1,f="",a=1;for(let E=0;E<n;++E){let M=o[E];M===`
`?(s=1,f="",a+=1):(s+=1,f+=M)}let m=o.indexOf(`
`,n);f+=m===-1?o.slice(n):o.slice(n,m);let g=0;f.length>50&&(s<40?f=f.slice(0,50):(g=s-20,f=f.slice(g,s+30)));let b=new Error(`${e} (line ${a}, column ${s})
  ${f}
`+" ".repeat(s-g+1)+`^
`);throw Object.assign(b,{column:s,excerpt:f,line:a,pos:n}),b}validateChars(e){let n=0;for(let o of e)Lc.isNotXmlChar(o)&&(this.scanner.reset(-([...e].length-n)),this.error("Invalid character")),n+=1}}var AF=CF;function PF(t){return t[0]==="\uFEFF"&&(t=t.slice(1)),t.replace(/\r\n?/g,`
`)}const kF=AF,LF=LT,DF=DT,NF=NT,RF=r1,zF=kc,FF=RT,BF=J0;function Ou(t,e){return new kF(t,e).document}Ou.XmlCdata=LF,Ou.XmlComment=DF,Ou.XmlDocument=NF,Ou.XmlElement=RF,Ou.XmlNode=zF,Ou.XmlProcessingInstruction=FF,Ou.XmlText=BF;var VF=Ou;class UF extends Error{constructor(e){super(e)}}function jF(t){let e=null;try{e=VF(t)}catch(n){throw new UF(n.message)}return e}function bl(t){return t.children[0]}function sg(t){const e=t.indexOf(":");return e>-1?t.substr(e+1):t}function lg(t){return t.name||""}function go(t,e,n){const o=sg(e);function s(f,a){return sg(lg(a))===o&&f.push(a),n&&Array.isArray(a.children)?[...f,...a.children.reduce(s,[])]:f}return t&&Array.isArray(t.children)?t.children.reduce(s,[]):[]}function Er(t,e,n){return go(t,e,n)[0]||null}function ed(t){return t&&Array.isArray(t.children)?[...t.children.filter(e=>e.constructor.name==="XmlElement")]:[]}function mn(t){const e=t&&Array.isArray(t.children)?t.children.find(n=>n.type==="text"):null;return e?e.text:""}function Rs(t,e){return t&&t.attributes[e]||""}const BT=["utf-8","utf-16","iso-8859-1"],VT="utf-8";function $F(t){const e=/charset=([^;]+)/.exec(t);return e?e[1]:null}function GF(t,e){const n=e?$F(e):null,o=n?[n,...BT]:BT;for(const s of o)try{return new TextDecoder(s,{fatal:!0}).decode(t)}catch{}return console.warn(`XML document encoding could not be determined, falling back to ${VT}.`),new TextDecoder(VT).decode(t)}const ug=new Map;function qF(t){if(ug.has(t))return ug.get(t);const e=fetch(t);return e.finally(()=>ug.delete(t)),ug.set(t,e),e}function a1(t){return qF(t).catch(()=>fetch(t,{method:"HEAD",mode:"no-cors"}).catch(e=>{throw new Z0(`Fetching the document failed either due to network errors or unreachable host, error is: ${e.message}`,0,!1)}).then(()=>{throw new Z0("The document could not be fetched due to CORS limitations",0,!0)})).then(async e=>{if(!e.ok){const s=await e.text();throw new Z0(`Received an error with code ${e.status}: ${s}`,e.status,!1)}const n=await e.arrayBuffer(),o=e.headers.get("Content-Type");return GF(n,o)}).then(e=>jF(e))}function s1(t,e){const n=t.match(/(https?%3A%2F%2F[^/]+)$/);if(n){const m=n[1],g=s1(decodeURIComponent(m),e);return t.replace(m,encodeURIComponent(g))}const o=new URL(t),s=Object.keys(e),f=s.map(m=>m.toLowerCase()),a=[];for(const m of o.searchParams.keys())f.indexOf(m.toLowerCase())>-1&&a.push(m);return a.map(m=>o.searchParams.delete(m)),s.forEach(m=>o.searchParams.set(m,e[m]===!0?"":e[m])),o.toString()}let WF=1e3*60*60;function HF(){return WF}const Cu="caches"in self?caches.open("ogc-client"):null;async function ZF(t,...e){if(!Cu)return;const n="https://cache/"+e.join("/");await(await Cu).put(n,new Response(JSON.stringify(t),{headers:{"x-expiry":(Date.now()+HF()).toString(10)}}))}async function XF(...t){if(!Cu)return!1;const e="https://cache/"+t.join("/");return(await Cu).match(e).then(o=>!!o&&parseInt(o.headers.get("x-expiry"))>Date.now())}async function KF(...t){if(!Cu)return null;const e="https://cache/"+t.join("/"),o=await(await Cu).match(e);return o?o.clone().json():null}const cg=new Map;async function YF(t,...e){if(await JF(),await XF(...e))return KF(...e);const n=e.join("#");if(cg.has(n))return cg.get(n);const o=t();o instanceof Promise&&(o.then(()=>cg.delete(n)),cg.set(n,o));const s=await o;return await ZF(s,...e),s}async function JF(){if(!Cu)return;const t=await Cu,e=await t.keys();for(let n of e){const o=await t.match(n);parseInt(o.headers.get("x-expiry"))<=Date.now()&&await t.delete(n)}}function QF(t,e,n,o,s,f,a,m,g,b){const E=e==="2.0.0"?"TYPENAMES":"TYPENAME",M=e==="2.0.0"?"COUNT":"MAXFEATURES",I={SERVICE:"WFS",REQUEST:"GetFeature",VERSION:e,[E]:n};if(o!==void 0&&(I.OUTPUTFORMAT=o),f!==void 0&&(I.PROPERTYNAME=f.join(",")),a?(I.RESULTTYPE="hits",I[M]="1"):s!==void 0&&(I[M]=s.toString(10)),m&&(I.SRSNAME=m),g){const P=g.join(",");I.BBOX=b?`${P},${b}`:P}return s1(t,I)}class eB{constructor(e){const n=s1(e,{SERVICE:"WMS",REQUEST:"GetCapabilities"});this._capabilitiesPromise=YF(()=>uF(n),"WMS","CAPABILITIES",n).then(({info:o,layers:s,version:f})=>{this._info=o,this._layers=s,this._version=f}),this._info=null,this._layers=null,this._version=null}isReady(){return this._capabilitiesPromise.then(()=>this)}getServiceInfo(){return this._info}getLayers(){function e(n){return{title:n.title,name:n.name,abstract:n.abstract,..."children"in n&&{children:n.children.map(e)}}}return this._layers.map(e)}getLayerByName(e){let n=null;function o(s){if(n===null){if(s.name===e){n=s;return}"children"in s&&s.children.map(o)}}return this._layers.map(o),n}getVersion(){return this._version}}const tB=["EPSG:4046","EPSG:4075","EPSG:4120","EPSG:4122","EPSG:4124","EPSG:4126","EPSG:4149","EPSG:4151","EPSG:4153","EPSG:4155","EPSG:4157","EPSG:4159","EPSG:4161","EPSG:4163","EPSG:4165","EPSG:4167","EPSG:4169","EPSG:4171","EPSG:4173","EPSG:4175","EPSG:4178","EPSG:4180","EPSG:4182","EPSG:4184","EPSG:4188","EPSG:4190","EPSG:4191","EPSG:4196","EPSG:4198","EPSG:4202","EPSG:4210","EPSG:4211","EPSG:4214","EPSG:4226","EPSG:4229","EPSG:4231","EPSG:4233","EPSG:4236","EPSG:4238","EPSG:4240","EPSG:4242","EPSG:4244","EPSG:4246","EPSG:4248","EPSG:4250","EPSG:4252","EPSG:4255","EPSG:4258","EPSG:4261","EPSG:4264","EPSG:4267","EPSG:4270","EPSG:4273","EPSG:4276","EPSG:4279","EPSG:4281","EPSG:4284","EPSG:4286","EPSG:4288","EPSG:4292","EPSG:4295","EPSG:4297","EPSG:4299","EPSG:4302","EPSG:4324","EPSG:4326"];function rB(t){return tB.indexOf(l1(t))>-1}function l1(t){return/^urn:(?:x-)?ogc:def:crs:epsg:/.test(t.toLowerCase())?`EPSG:${/([0-9]+)$/.exec(t)[1]}`:t}function UT(t){return bl(t).attributes.version}function nB(t){const e=UT(t),n=Er(bl(t),"Capability");return go(n,"Layer").map(o=>jT(o,e))}function iB(t){const e=Er(bl(t),"Service"),n=go(Er(e,"KeywordList"),"Keyword").map(mn).filter((o,s,f)=>f.indexOf(o)===s);return{title:mn(Er(e,"Title")),name:mn(Er(e,"Name")),abstract:mn(Er(e,"Abstract")),fees:mn(Er(e,"Fees")),constraints:mn(Er(e,"AccessConstraints")),keywords:n}}function jT(t,e,n=[],o=[],s=null){const f=e==="1.3.0"?"CRS":"SRS",a=go(t,f).map(mn),m=a.length>0?a:n,g=go(t,"Style").map(oB),b=g.length>0?g:o;function E(z){const V=Rs(z,f);return(rB(V)&&e==="1.3.0"?["miny","minx","maxy","maxx"]:["minx","miny","maxx","maxy"]).map(re=>Rs(z,re))}const M=Er(t,"Attribution"),I=M!==null?aB(M):s,P=go(t,"Layer").map(z=>jT(z,e,m,b,I));return{name:mn(Er(t,"Name")),title:mn(Er(t,"Title")),abstract:mn(Er(t,"Abstract")),availableCrs:m,styles:b,attribution:I,boundingBoxes:go(t,"BoundingBox").reduce((z,V)=>({...z,[Rs(V,f)]:E(V)}),{}),...P.length&&{children:P}}}function oB(t){const e=Rs(Er(Er(t,"LegendURL"),"OnlineResource"),"xlink:href");return{name:mn(Er(t,"Name")),title:mn(Er(t,"Title")),...e&&{legendUrl:e}}}function aB(t){const e=Rs(Er(Er(t,"LogoURL"),"OnlineResource"),"xlink:href"),n=Rs(Er(t,"OnlineResource"),"xlink:href"),o=mn(Er(t,"Title"));return{...o&&{title:o},...n&&{url:n},...e&&{logoUrl:e}}}function hg(t){return bl(t).attributes.version}function $T(t){const e=hg(t);let n;if(e.startsWith("1.0")){const o=Er(Er(Er(bl(t),"Capability"),"Request"),"GetFeature");n=ed(Er(o,"ResultFormat")).map(lg)}else{const o=Er(bl(t),"OperationsMetadata"),s=go(o,"Operation").find(a=>Rs(a,"name")==="GetFeature"),f=go(s,"Parameter").find(a=>Rs(a,"name")==="outputFormat");n=go(f,"Value",!0).map(mn)}return n}function sB(t){const e=hg(t),n=e.startsWith("1.0")?"Service":"ServiceIdentification",o=e.startsWith("1.0")?"Name":"ServiceType",s=Er(bl(t),n);let f;return e.startsWith("1.0")?f=mn(Er(s,"Keywords")).split(",").map(a=>a.trim()):f=go(Er(s,"Keywords"),"Keyword").map(mn),{title:mn(Er(s,"Title")),name:mn(Er(s,o)),abstract:mn(Er(s,"Abstract")),fees:mn(Er(s,"Fees")),constraints:mn(Er(s,"AccessConstraints")),keywords:f,outputFormats:$T(t)}}function lB(t){const e=hg(t),n=$T(t),o=Er(bl(t),"FeatureTypeList");return go(o,"FeatureType").map(s=>uB(s,e,n))}function uB(t,e,n){const o=e.startsWith("2.")?"CRS":"SRS",s=e.startsWith("1.0")?"SRS":`Default${o}`;function f(){const b=Er(t,"LatLongBoundingBox");return["minx","miny","maxx","maxy"].map(E=>Rs(b,E)).map(parseFloat)}function a(){const b=Er(t,"WGS84BoundingBox");return["LowerCorner","UpperCorner"].map(E=>Er(b,E)).map(E=>mn(E).split(" ")).reduce((E,M)=>[...E,...M]).map(parseFloat)}const m=e.startsWith("1.0")?[]:go(t,`Other${o}`).map(mn).map(l1),g=e.startsWith("1.0")?[]:go(Er(t,"OutputFormats"),"Format").map(mn);return{name:mn(Er(t,"Name")),title:mn(Er(t,"Title")),abstract:mn(Er(t,"Abstract")),defaultCrs:l1(mn(Er(t,s))),otherCrs:m,outputFormats:g.length>0?g:n,latLonBoundingBox:e.startsWith("1.0")?f():a()}}function cB(t,e,n){const o=bl(t);let s;if(n.startsWith("2.0"))s=go(o,"member").map(b=>ed(b)[0]);else{const b=Er(o,"featureMembers");s=b?ed(b):go(o,"featureMember").map(E=>ed(E)[0])}const f=n==="1.0.0"?"fid":"gml:id";function a(b){return b in e.properties}function m(b,E){switch(e.properties[b]){case"integer":return parseInt(E);case"float":return parseFloat(E);case"boolean":return E==="true";default:return E}}function g(b){return ed(b).filter(E=>a(sg(lg(E)))).reduce((E,M)=>{const I=sg(lg(M));return{...E,[I]:m(I,mn(M))}},{})}return s.map(b=>({id:Rs(b,f),properties:g(b)}))}function hB(t){return t.reduce((e,n)=>{for(const o in n.properties){const s=n.properties[o];o in e||(e[o]={uniqueValues:[]});const f=e[o].uniqueValues.find(a=>a.value===s);f?f.count++:e[o].uniqueValues.push({value:s,count:1})}return e},{})}X0("parseWmsCapabilities",self,({url:t})=>a1(t).then(e=>({info:iB(e),layers:nB(e),version:UT(e)}))),X0("parseWfsCapabilities",self,({url:t})=>a1(t).then(e=>({info:sB(e),featureTypes:lB(e),version:hg(e)}))),X0("queryWfsFeatureTypeDetails",self,({url:t,serviceVersion:e,featureTypeFull:n})=>{const o=QF(t,e,n.name,void 0,void 0,Object.keys(n.properties));return a1(o).then(s=>({props:hB(cB(s,n,e))}))});const fB=()=>[{url:"http://wmts1.geoportail.lu/opendata/service",label:"Open Data Webservices WMS"},{url:"http://ows.terrestris.de/osm-gray/service",label:"OpenStreetMap by Terrestris (Grey)"},{url:"http://ows.terrestris.de/osm/service",label:"OpenStreetMap by Terrestris (Color)"}];class pB{constructor(e){ai(this,"capabilitiesPromise");ai(this,"serviceInfo");ai(this,"layers");const n=new GO.default;let o="&";e.indexOf("?")===-1&&(o="?"),e.indexOf("Capabilities")===-1&&(e=e+o+"SERVICE=WMTS&REQUEST=GetCapabilities"),this.capabilitiesPromise=fetch(e).then(s=>s.text()).then(s=>{var a;const f=n.read(s);this.serviceInfo=this.mapServiceInfo(f.ServiceIdentification),this.layers=this.mapToRemoteLayers((a=f.Contents)==null?void 0:a.Layer)})}mapToRemoteLayers(e){return[{type:La.WMTS,children:e.map(n=>({type:La.WMTS,abstract:n.Abstract,format:n.Format,name:n.Identifier,title:n.Title,tileMatrixSetLink:n.TileMatrixSetLink,wgs84BoundingBox:n.WGS84BoundingBox}))}]}mapServiceInfo(e){return{type:La.WMTS,title:e.Title,abstract:e.Abstract,fees:e.Fees,constraints:e.AccessConstraints,serviceTypeVersion:e.ServiceTypeVersion}}isReady(){return this.capabilitiesPromise.then(()=>this)}getLayerByName(e){return this.layers[0].children.filter(n=>n.name===e)[0]}getLayers(){return this.layers}getServiceInfo(){return this.serviceInfo}}class dB{async getRemoteEndpoint(e){let n;return await this.getWmsEndpoint(e).isReady().catch(async()=>{n=await this.getWmtsEndpoint(e).isReady()})||n}getWmsEndpoint(e){return new eB(Ac.getProxyfiedUrl(e))}getWmtsEndpoint(e){return new pB(Ac.getProxyfiedUrl(e))}async fetchRemoteWmsEndpoint(){return new Promise(e=>e(fB()))}isRemoteLayer(e){return typeof e=="string"&&(e.indexOf(La.WMS)===0||e.indexOf(La.WMTS)===0)}}const td=new dB,mB={class:"relative text-center"},yB=["placeholder","value"],gB={key:0,class:"text-center"},vB={class:"lux-label"},_B={key:1,class:"text-center"},xB={class:"lux-label"},bB={key:2,class:"text-center"},wB=Fe("div",{class:"fa fa-refresh fa-spin"},null,-1),EB={key:3,class:"overflow-auto max-h-[calc(400px-36px)]"},GT=lr(ir({__name:"remote-layers",setup(t){const{t:e}=En(),n=ui(),o=ka(),s=Ln([]),f=Ln(),{remoteLayersOpen:a}=rn(vi()),{setRemoteLayersOpen:m}=vi();let g=!1,b,E,M;la(I);function I(){f.value=f.value?Zh.updateLayers(f.value,n.layers):void 0}td.fetchRemoteWmsEndpoint().then(ce=>{s.value=ce.map(({url:ve,label:Ne})=>({label:Ne,value:ve}))});async function P(ce){g=!0,M=await td.getRemoteEndpoint(ce).catch(()=>alert(e("Impossible de contacter ce WMS",{ns:"client"}))),E=ce,g=!1}async function z(){const ce=M,ve=ce==null?void 0:ce.getLayers();if(ve&&ve[0]){const Ne=OT(ve[0],E);f.value=Zh.updateLayers(Ne,n.layers)}}async function V(ce){E=b=ce,await P(E),z()}function q(ce){b=ce.target.value}async function re(){await P(b),z()}function X(ce){f.value=Zh.toggleNode(ce.id,f.value,"expanded")}function ae(ce){const{id:ve,name:Ne}=ce,ze=M;if(ce.checked===!0)n.removeLayers(ve);else{const Pe=ze==null?void 0:ze.getLayerByName(Ne);if(Pe){const Se=o.initLayer(CT({id:ve,url:Ac.getProxyfiedUrl(E),remoteLayer:Pe}));n.addLayers(Se)}}}return(ce,ve)=>se(a)?(Be(),tn(IT,{key:0,title:se(e)("Add external data",{ns:"client"}),onClose:ve[0]||(ve[0]=Ne=>se(m)(!1))},{content:su(()=>{var Ne,ze;return[Fe("div",mB,[kt(h0,{class:"lux-remote-services-dropdown",options:se(s),placeholder:se(e)("Predefined wms",{ns:"client"}),onChange:V},null,8,["options","placeholder"]),Fe("input",{class:"lux-input w-[300px]",type:"url",placeholder:se(e)("Choose or write a WMS url",{ns:"client"}),value:se(E)||"",onChange:q},null,40,yB),Fe("button",{type:"button",class:"lux-btn",onClick:re},Wt(se(e)("Get the layers",{ns:"client"})),1)]),!se(g)&&se(M)?(Be(),tt("div",gB,[Fe("span",vB,Wt(se(e)("Description du service :",{ns:"client"})),1),Xm(" "+Wt((Ne=se(M).getServiceInfo())==null?void 0:Ne.abstract),1)])):Xe("v-if",!0),!se(g)&&se(M)?(Be(),tt("div",_B,[Fe("span",xB,Wt(se(e)("Access constraints :",{ns:"client"})),1),Xm(" "+Wt((ze=se(M).getServiceInfo())==null?void 0:ze.constraints),1)])):Xe("v-if",!0),se(g)?(Be(),tt("div",bB,[wB,Fe("span",null,Wt(se(e)("Chargement des informations",{ns:"client"})),1)])):Xe("v-if",!0),se(g)?Xe("v-if",!0):(Be(),tt("div",EB,[se(f)?(Be(),tn(H0,{key:0,class:"block p-[10px] mb-[11px]",node:se(f),onToggleParent:X,onToggleLayer:ae},null,8,["node"])):Xe("v-if",!0)]))]}),_:1},8,["title"])):Xe("v-if",!0)}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/remote-layers/remote-layers.vue"]]);function SB(t,e="fr-FR"){const n=new Date(t);return new Intl.DateTimeFormat(e).format(n)}const TB={class:"font-bold"},MB={class:"col-span-2"},rd=lr(ir({__name:"layer-metadata-item",props:{label:{type:String,required:!0},value:{type:String,required:!0}},setup(t){const e=t;return(n,o)=>(Be(),tt(en,null,[Fe("span",TB,Wt(e.label),1),Fe("span",MB,Wt(e.value),1)],64))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-metadata/layer-metadata-item.vue"]]);function IB(t){return{fr:"fre",en:"eng",de:"ger",lb:"ltz"}[t.toLowerCase()]}function OB(t){return new DOMParser().parseFromString(t,"text/html").body}function CB(t){const e=[];function n(o){const s=o.split("|");s[3]==="WWW:LINK-1.0-http--link"&&e.indexOf(s[2])===-1&&e.push(s[2])}return Array.isArray(t)?t.forEach(n,t):n(t),e}function AB(t){const n=(Array.isArray(t)?t:[t]).filter(o=>o.split("|")[1]==="metadata");return{organisaton:n[0].split("|")[2],name:n[0].split("|")[5],unknown:n[0].split("|")[6],address:n[0].split("|")[7],email:n[0].split("|")[4]}}class qT{}class PB extends qT{async getMetadata(e,n,o){console.assert(e===La.WMS);const s=td.getWmsEndpoint(n);await s.isReady();const f=s==null?void 0:s.getServiceInfo(),a=s==null?void 0:s.getLayerByName(o);return{title:a.title,description:a.abstract,keywords:f.keywords,accessConstraints:f.constraints,serviceDescription:f.abstract}}}const kB=new PB;class LB extends qT{async getMetadata(e,n,o){console.assert(e===La.WMTS);const s=td.getWmtsEndpoint(n);await s.isReady();const f=s==null?void 0:s.getServiceInfo(),a=s==null?void 0:s.getLayerByName(o);return{title:a.title,description:a.abstract,accessConstraints:f.constraints,serviceDescription:f.abstract}}}const DB=new LB;class NB{async getMetadata(e,n,o){if(e===La.WMS)return kB.getMetadata(e,n,o);if(e===La.WMTS)return DB.getMetadata(e,n,o);throw new Error(`Unsupported service type: ${e}`)}}const RB=new NB;class zB{constructor(){ai(this,"geonetworkBaseUrl","https://geocatalogue.geoportail.lu/geonetwork/srv");ai(this,"legendBaseUrl","https://map.geoportail.lu/legends/get_html");ai(this,"localMetadataBaseUrl","https://map.geoportail.lu/getMetadata")}async getLayerMetadata(e,n){const o=Su(),s=o.findBgLayerById(+e)||o.findById(+e)||o.find3dLayerById(+e);if(s){const f=s.metadata,a=f==null?void 0:f.metadata_id,m=a&&await this.getLocalMetadata(this.localMetadataBaseUrl,a,n),g=s.name,b=(f==null?void 0:f.legend_name)||"",E=s==null?void 0:s.id,M=b&&await this.getLegendHtml(this.legendBaseUrl,b,E,n);return{...m,title:g,hasLegend:!!M,...M&&{legendHtml:M}}}else{const[f,a,m]=String(e).split("%2D").join("-").split("||");return RB.getMetadata(f,a,m)}}getLocalMetadata(e,n,o){return fetch(`${e}?lang=${o}&uid=${n}`).then(async s=>{const f=(await s.json()).metadata;return{name:f.title,serviceDescription:f.serviceDescription,description:f.abstract,legalConstraints:f.legalConstraints,link:CB(f.link),revisionDate:f.revisionDate,keyword:f.keyword,responsibleParty:f.responsibleParty?AB(f.responsibleParty):void 0,metadataLink:`${this.geonetworkBaseUrl}/${IB(o)}/catalog.search#/metadata/${n}`,isError:!1}}).catch(()=>({isError:!0}))}getLegendHtml(e,n,o,s){const f={lang:s,...n&&{name:n},...o&&{id:o.toString()}};if(f.name&&f.lang){window.devicePixelRatio>1&&(f.dpi=(window.devicePixelRatio*96).toString());const a=`${e}?${new URLSearchParams(f).toString()}`;return fetch(a).then(async m=>{if(m.status>=400&&m.status<600)throw new Error("Server responded with error code");const g=await m.text();return g?OB(g):void 0}).catch(()=>{})}}}const WT=new zB,FB={class:"grid gap-2 grid-cols-3 pt-3 text-[13px] font-arial break-words"},BB={key:2,class:"col-span-3 grid gap-2 grid-cols-3"},VB={class:"font-bold"},UB={class:"col-span-2"},jB=["title"],$B=["title"],GB={key:4,class:"col-span-3"},qB={class:"font-bold"},WB={class:"col-span-2"},HB=["href"],ZB={key:7,class:"col-span-3 grid gap-2 grid-cols-3"},XB={class:"font-bold"},KB={class:"col-span-2"},YB={key:0},JB={key:1},QB={key:2},e8={key:3},t8={key:4},r8=["href"],n8={key:8,class:"grid gap-2 grid-cols-3 col-span-3"},i8={class:"font-bold"},o8={class:"col-span-2"},a8=["href"],s8={key:9,class:"col-span-3"},l8={key:10},u8={class:"text-xl"},c8={key:11,class:"col-span-3"},HT=lr(ir({__name:"layer-metadata",setup(t){const e=W0(),{metadataId:n}=rn(e),{t:o,i18next:s}=En(),f=br(),a=br(!0),m=220;Tn(n,async I=>{var P,z;f.value=I?await WT.getLayerMetadata(I,s.language):void 0,a.value=(((z=(P=f.value)==null?void 0:P.description)==null?void 0:z.length)||0)<m}),ua(()=>{s.on("languageChanged",async()=>{n.value&&(f.value=await WT.getLayerMetadata(n.value,s.language))})});const g=ar(()=>{var I,P,z;return a.value?(I=f.value)==null?void 0:I.description:(z=(P=f.value)==null?void 0:P.description)==null?void 0:z.slice(0,m)});function b(){a.value=!0}function E(){a.value=!1}function M(){e.clearMetadataId()}return(I,P)=>{const z=y_("dompurify-html");return f.value?(Be(),tn(IT,{key:0,footer:!1,"max-height":!0,title:se(o)(`${f.value.title}`,{ns:"client"}),onClose:M},{content:su(()=>{var V,q,re,X,ae,ce,ve,Ne,ze,Pe,Se,Ie,Ke,Ge,st;return[Fe("div",FB,[f.value.name?(Be(),tn(rd,{key:0,label:se(o)("Name"),value:f.value.name},null,8,["label","value"])):Xe("v-if",!0),f.value.serviceDescription?(Be(),tn(rd,{key:1,label:se(o)("Description du Service"),value:f.value.serviceDescription},null,8,["label","value"])):Xe("v-if",!0),f.value.description?(Be(),tt("div",BB,[Fe("span",VB,Wt(se(o)("Description")),1),Fe("span",UB,[jm(Fe("span",null,null,512),[[z,se(g)]]),a.value?Xe("v-if",!0):(Be(),tt("button",{key:0,title:se(o)("Display full description",{ns:"client"}),onClick:b,class:"text-secondary hover:underline"}," ... ",8,jB)),a.value&&(((V=se(g))==null?void 0:V.length)||0)>m?(Be(),tt("button",{key:1,title:se(o)("Hide full description",{ns:"client"}),onClick:E,class:"text-secondary hover:underline"}," - ",8,$B)):Xe("v-if",!0)])])):Xe("v-if",!0),f.value.legalConstraints?(Be(),tn(rd,{key:3,label:se(o)("Contrainte d'utilisation"),value:f.value.legalConstraints},null,8,["label","value"])):Xe("v-if",!0),((q=f.value.link)==null?void 0:q.length)!==0?(Be(),tt("div",GB,[(Be(!0),tt(en,null,Ta(f.value.link,be=>(Be(),tt("div",{class:"grid gap-2 grid-cols-3",key:be},[Fe("span",qB,Wt(se(o)("Url vers la resource")),1),Fe("span",WB,[Fe("a",{class:"text-secondary hover:underline",target:"_blank",href:be},Wt(be),9,HB)])]))),128))])):Xe("v-if",!0),f.value.revisionDate?(Be(),tn(rd,{key:5,label:se(o)("Revision date"),value:se(SB)(f.value.revisionDate,se(s).language)},null,8,["label","value"])):Xe("v-if",!0),f.value.keyword?(Be(),tn(rd,{key:6,label:se(o)("Keywords"),value:(re=f.value.keyword)==null?void 0:re.join(",")},null,8,["label","value"])):Xe("v-if",!0),f.value.responsibleParty?(Be(),tt("div",ZB,[Fe("div",XB,Wt(se(o)("Contact")),1),Fe("div",KB,[(X=f.value.responsibleParty)!=null&&X.organisaton?(Be(),tt("p",YB,Wt((ae=f.value.responsibleParty)==null?void 0:ae.organisaton),1)):Xe("v-if",!0),(ce=f.value.responsibleParty)!=null&&ce.name?(Be(),tt("p",JB,Wt((ve=f.value.responsibleParty)==null?void 0:ve.name),1)):Xe("v-if",!0),(Ne=f.value.responsibleParty)!=null&&Ne.unknown?(Be(),tt("p",QB,Wt((ze=f.value.responsibleParty)==null?void 0:ze.unknown),1)):Xe("v-if",!0),(Pe=f.value.responsibleParty)!=null&&Pe.address?(Be(),tt("p",e8,Wt((Se=f.value.responsibleParty)==null?void 0:Se.address),1)):Xe("v-if",!0),(Ie=f.value.responsibleParty)!=null&&Ie.email?(Be(),tt("p",t8,[Fe("a",{class:"text-secondary hover:underline",href:"mailto:"+((Ke=f.value.responsibleParty)==null?void 0:Ke.email)},Wt((Ge=f.value.responsibleParty)==null?void 0:Ge.email),9,r8)])):Xe("v-if",!0)])])):Xe("v-if",!0),f.value.metadataLink?(Be(),tt("div",n8,[Fe("span",i8,Wt(se(o)("Link to the metadata")),1),Fe("span",o8,[Fe("a",{class:"text-secondary hover:underline",target:"_blank",href:f.value.metadataLink},Wt(se(o)("link")),9,a8)])])):Xe("v-if",!0),f.value.isError?(Be(),tt("div",s8,Wt(se(o)("The metadata is right now not available")),1)):Xe("v-if",!0),f.value.legendHtml?(Be(),tt("div",l8,[Fe("h4",u8,Wt(se(o)("Legend")),1),jm(Fe("span",null,null,512),[[z,(st=f.value.legendHtml)==null?void 0:st.innerHTML]])])):Xe("v-if",!0),f.value.hasLegend?Xe("v-if",!0):(Be(),tt("div",c8,Wt(se(o)("The legend is not available for this layer")),1))])]}),_:1},8,["title"])):Xe("v-if",!0)}}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-metadata/layer-metadata.vue"]]),h8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM0AAAAoCAMAAABq645qAAACPVBMVEUAAABaW13////tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy5DjxTaAAAAvXRSTlMAAAABAgMEBQYHCAkKCwwNDg8QERESFBUWFxkaGx0eHyAhIiInKSosMTIzNTY5Ojs8PUFCQ0RERkpMTk9QU1RVVldaXmFjZWZmamtwcXJzdXd3eHl7fX+AgYKDhIaHiIiKi4yOj5CTlJWWl5iZmZqcnZ+goaKjpKanqKqqq6ywsbK0tbW4u7u8vb6/wMHExcbHysvMzM7P0NDS1NXa29zd3t/g4eTl5ujp6uvs7e7u8PLz9PX29/j5+vv8/f5cALqzAAAEcklEQVRo3u3Z+ZPUVBAH8O63LsLKijoIgotHFI+HgiKNeGC8MCqgUUFAJYjgAQ6HKMgGEQQiqChIPFh1iciiwPIEhvv49t/mD5lBORa2tHbLTO2rmqnUTCrJZ3r65ZuEjDHGGLrMWGcKMah7mh/7NP8PzXBqbqgfzdtPb7i/fjQPvq8r5jUVXNNIY4moYeL6+XNfn9Ov6LUZ2/Z7Pxo3YaZWTp/uLPw/reXYbqLRPz/38g+qJ/oTEV396IzmgmquXHZoIRHd/sTs31T1DqIBcyqHZjQWtTbf6nQiokHLVVWn7ju4euXGjsX9LtTAGgPAGGMzOPZSOGFYtmAXsO8skFkgZovQgi2QcZKyIGAAjJQtIgAB/5vRTc2IvbqSqOWNJQdUVdfe+/zitmsu2jeQ/GWMC43HacRhxhAWcJRyEgmYBSVYgROwgJkzeGVEDGEGotqnPaih1Xp63KSvVFVVtz0wt23AvMVda5AZY2FM7OWO/N2DwBMgESBiQZyABUgYSYQkYSBjhAh7QXN3Zfey7YdyzXh6aQpdu2fIpWsD30CykKOU4XPgmBPEnNcmC1jgIT9uCx9ZkOW1kQi9oBm6aMvO3KIVomUPES19/KIaoNo34uA8cUgtB4DzmQXCFoCFhbXgMtgC8DNGKMj7xnIKtj2toeGf55X5c9+ZRpo1lWjyq5c/33Avj+5obpz25miiwd+p6q4/2jfvIrqtrYlemF5MzZObTuhHCw6cUd2y/91ftj5DRJOn0JKniqm56jPtUNXDx44u6NywvaPzPqL+G5v3jCimhhqaX/vyi6VTxtzyYkVV9dSsRvrmnVXUI5oo7GkNEV2RH/igaRVV1Y8fOdE+tEc0tlzqBU1tND+7U1W18t51F8/QAFJrkUccL4VjABFb+MwoMyznszWzBZxfDT2SIbZgm0/TzBbIpLqcr8GwScJxfF4UiliAgGEZ1gKx8VK4bmuafmpdrqr6cFdXBJBSORPkp9A0ZI8hAi4jYQY8CEN8MDML2K/FBBdwKU80kOp3eSBirq7BkJJLstK5UShw+eYhDBGUYNPQeN3WTND2rd+r6oquNUZQ00A49gCEJQg8RhJD8j0DQX6IEBZYMLMAAANZrpHa8lkNBwjOi0Ion90KRIDIQEzsdVfzlurhT1X11F2XqE3qwfNQMiYLGYIYNgAQMcTltXHV3z9w1dAD/8LapH/XJt9eycWudG4U8lGrjYeSIAtMFlaD1SU1NxAR0cA9qrpqr6ruaOmybxLPREBojLEOzoMNkAXsO4YNYRnIpNo3WS30+EByXt+kttY3AEdAyGmZ4/TcKORCDgDhEAg5D0wO7vK1mbmwhajxA9XWkXTTh8dVj6wZX9gr6ZFL9eTm1nbVhUREdOs2Vb25sJqmRTuOq+r+rwfmgGEHVYcU+H7a8KNrdP6kYTXBJ6qPFVjT2DxwzD/msbWqE+vnrvqvevSeutGMUm0dXC+ahk3asb5unt+8cvLIqOvr52nU7Dv7nq31afo0/0mzrhiavwAx1n2SsZnMdgAAAABJRU5ErkJggg==";class f8{bootstrap(){this.restore();let e;e=la(()=>{this.persist(),e&&e()})}persist(){const e=vi(),{lang:n}=rn(e);Tn(n,(o,s)=>{s!==o&&(Or.setValue(Tu,o),document.documentElement.setAttribute("lang",o))},{immediate:!0})}restore(){const e=Or.getValue(Tu);if(e){const{setLang:n}=vi(),{i18next:o}=En();o.changeLanguage(e),n(e)}}}const p8=new f8,d8=lr(ir({__name:"language-selector",setup(t){const{i18next:e,t:n}=En(),{setLang:o}=vi(),{lang:s}=rn(vi()),f=ar(()=>["en","de","fr","lb"].map(g=>({label:n(g),value:g,ariaLabel:n("Changer de langue : {{lang}}",{lang:g})}))),a=n("Changer de langue");p8.bootstrap();function m(g){e.changeLanguage(g),o(g)}return(g,b)=>(Be(),tt("div",null,[kt(h0,{class:"lux-navbar-dropdown lux-dropdown-inline text-white h-full",options:se(f),placeholder:se(a),modelValue:se(s),"onUpdate:modelValue":b[0]||(b[0]=E=>cn(s)?s.value=E:null),onChange:m},null,8,["options","placeholder","modelValue"])]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/nav-bars/language-selector.vue"]]);class m8{setCurrentThemeColors(e){const n=document.querySelector(":root");["primary","secondary","tertiary"].forEach(s=>{const f=getComputedStyle(n).getPropertyValue(`--${e}-${s}`);n.style.setProperty(`--color-${s}`,f)})}}const ZT=new m8,y8={class:"w-full h-14 flex bg-white shadow-header z-10 shrink-0"},g8=Fe("div",{class:"flex-2 p-[5px]"},[Fe("img",{src:h8})],-1),v8=Fe("div",{class:"grow text-center"},"search",-1),_8={class:"h-full flex"},x8={class:"hidden lg:inline-block"},b8={class:"border-l-[1px] border-stone-300 h-full"},XT=lr(ir({__name:"header-bar",setup(t){const{t:e}=En(),n=vi(),{layersOpen:o,myLayersTabOpen:s,themeGridOpen:f}=rn(n),{setLayersOpen:a,setMyLayersTabOpen:m,setThemeGridOpen:g}=n,b=yo(),{theme:E}=rn(b);Tn(E,I=>{I&&ZT.setCurrentThemeColors(I.name)},{immediate:!0});function M(){o.value?o.value&&(f.value?a(!1):(s.value&&m(!1),g(!0))):(a(!0),s.value&&m(!1),g(!0))}return(I,P)=>{var z,V;return Be(),tt("header",y8,[g8,v8,Fe("div",null,[Fe("ul",_8,[Fe("li",null,[Fe("button",{class:Rr(["flex items-center before:font-icons before:text-3xl before:w-16 text-primary uppercase h-full mr-3",`before:content-${(z=se(E))==null?void 0:z.name}`]),onClick:M},[Fe("span",x8,Wt(se(e)(`${(V=se(E))==null?void 0:V.name}`)),1)],2)]),Fe("li",b8,[kt(d8,{class:"flex-none h-full"})])])])])}}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/header/header-bar.vue"]]),w8={class:"block text-[13px] sm:text-base uppercase"},wl=lr(ir({__name:"button-icon",props:{label:{type:String,required:!0},icon:{type:String,required:!0},active:{type:Boolean,required:!1}},setup(t){const e=t;return(n,o)=>(Be(),tt("button",{class:Rr(["h-[42px] w-full sm:h-full sm:w-16 hover:text-white hover:bg-primary",e.active?"bg-primary text-white":""])},[Fe("span",{class:Rr(["block text-[1.7rem] sm:text-[2rem] -mt-1.5 -mb-3 after:font-icons",e.active?"lux-close-cross":`after:content-${e.icon}`])},null,2),Fe("span",w8,Wt(e.label),1)],2))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/footer/button-icon.vue"]]),E8=["href"],Au=lr(ir({__name:"button-link",props:{label:{type:String,required:!0},link:{type:String,required:!0}},setup(t){const e=t;return(n,o)=>(Be(),tt("a",{class:"h-full flex flex-col justify-center px-[7px] uppercase hover:text-white hover:bg-primary",href:`${e.link}`,target:"_blank"},Wt(n.$props.label),9,E8))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/footer/button-link.vue"]]),S8={class:"flex flex-col w-12 justify-between bg-white z-5 shrink-0 sm:flex-row sm:w-full sm:h-14 sm:shadow-footer"},T8={class:"flex flex-col w-full sm:w-80 sm:flex-row justify-start text-primary divide-y sm:divide-y-0 sm:divide-x divide-gray-400 divide-solid box-content border-y sm:border-y-0 border-x border-gray-400"},M8={class:"flex flex-col w-12 sm:w-64 sm:flex-row justify-start text-primary divide-y sm:divide-y-0 sm:divide-x divide-gray-400 divide-solid box-content border-y sm:border-y-0 border-x border-gray-400"},I8={class:"w-[466px] hidden sm:flex flex-row justify-end text-gray-500 whitespace-nowrap"},KT=lr(ir({__name:"footer-bar",setup(t){const{t:e,i18next:n}=En(),{setLayersOpen:o}=vi(),{layersOpen:s}=rn(vi());return(f,a)=>(Be(),tt("footer",S8,[Xe(" left buttons "),Fe("ul",T8,[Fe("li",null,[kt(wl,{label:se(e)("Layers",{ns:"client"}),icon:"layers",active:se(s),onClick:a[0]||(a[0]=()=>se(o)(!se(s)))},null,8,["label","active"])]),Xe(`TODOs in each button when implemented
        - remove class="text-gray-300"
        - add click handler that calls setLayersOpen(true) and opens tool (also via app store)
      `),Fe("li",null,[kt(wl,{class:"text-gray-300",label:se(e)("My Maps",{ns:"client"}),icon:"mymaps"},null,8,["label"])]),Fe("li",null,[kt(wl,{class:"text-gray-300",label:se(e)("Infos",{ns:"client"}),icon:"infos"},null,8,["label"])]),Fe("li",null,[kt(wl,{class:"text-gray-300",label:se(e)("Legends",{ns:"client"}),icon:"legends"},null,8,["label"])]),Fe("li",null,[kt(wl,{class:"text-gray-300",label:se(e)("Routing",{ns:"client"}),icon:"routing"},null,8,["label"])])]),Xe(" center buttons "),Fe("div",M8,[kt(wl,{class:"text-gray-300",label:se(e)("Dessin",{ns:"client"}),icon:"draw"},null,8,["label"]),kt(wl,{class:"text-gray-300 hidden sm:block",label:se(e)("Mesurer",{ns:"client"}),icon:"measure"},null,8,["label"]),kt(wl,{class:"text-gray-300 hidden sm:block",label:se(e)("Imprimer",{ns:"client"}),icon:"print"},null,8,["label"]),kt(wl,{class:"text-gray-300",label:se(e)("Partager",{ns:"client"}),icon:"share"},null,8,["label"])]),Xe(" right buttons "),Fe("div",I8,[kt(Au,{class:"hidden lg:flex text-gray-500",label:se(e)("What's new",{ns:"client"}),link:`https://geoportail.lu/${se(n).language}/questions/whats-new/`},null,8,["label","link"]),Xe("TODO get geonetworkBaseUrl from config"),kt(Au,{class:"hidden lg:flex text-gray-500",label:se(e)("Geocatalogue",{ns:"client"}),link:""},null,8,["label"]),Xe("TODO handle feedback links (for different portals?)"),kt(Au,{class:"hidden lg:flex text-gray-500",label:se(e)("Feedback",{ns:"client"}),link:""},null,8,["label"]),kt(Au,{class:"hidden lg:flex text-gray-500",label:se(e)("A Propos",{ns:"client"}),link:`https://www.geoportail.lu/${se(n).language}/propos/`},null,8,["label","link"]),kt(Au,{class:"hidden lg:flex text-gray-500",label:se(e)("Aide",{ns:"client"}),link:`https://www.geoportail.lu/${se(n).language}/documentation/`},null,8,["label","link"]),kt(Au,{class:"hidden lg:flex text-gray-500",label:se(e)("Contact",{ns:"client"}),link:`https://www.geoportail.lu/${se(n).language}/propos/contactez-nous/`},null,8,["label","link"]),kt(Au,{class:"text-gray-500",label:se(e)("Legalites",{ns:"client"}),link:`https://www.geoportail.lu/${se(n).language}/propos/mentions-legales/`},null,8,["label","link"]),kt(Au,{class:"text-gray-500",label:se(e)("ACT",{ns:"client"}),link:"http://www.act.public.lu/"},null,8,["label","link"])])]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/footer/footer-bar.vue"]]),O8={class:"flex flex-row flex-wrap pl-2.5"},C8=["onClick"],A8={class:"text-2xl absolute top-5"},P8=lr(ir({__name:"theme-grid",props:{themes:{type:Array,required:!0}},setup(t){const e=t,{t:n}=En();return(o,s)=>(Be(),tt("div",O8,[(Be(!0),tt(en,null,Ta(e.themes,f=>(Be(),tt("button",{class:Rr(["relative shrink-0 h-[150px] w-1/2 px-2.5 text-start text-gray-100/40 uppercase hover:bg-[#ccc]",`bg-${f.name}-primary hover:text-${f.name}-primary`]),key:f.id,onClick:a=>o.$emit("setTheme",f.name)},[Fe("div",A8,Wt(se(n)(`${f.name}`)),1),Fe("div",{class:Rr(["text-6xl absolute bottom-1 after:font-icons",`after:content-${f.name}`])},null,2)],10,C8))),128))]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/theme-selector/theme-grid.vue"]]),k8=["aria-expanded"],L8={class:"py-0.5"},D8={class:"px-1 py-0.5 shrink-0 flex flex-row text-[12px] bg-secondary text-white"},N8={class:"py-[3px]"},R8={class:"flex flex-row flex-wrap ml-1 w-12"},z8=lr(ir({__name:"theme-selector-button",props:{themes:{type:Array,required:!0},currentTheme:{type:null,required:!1},isOpen:{type:Boolean,required:!1}},setup(t){const e=t,{t:n}=En(),o=ar(()=>{var s;return((s=e.themes)==null?void 0:s.slice(0,8))||[]});return(s,f)=>{var a;return Be(),tt("button",{class:"w-full flex flex-row justify-between bg-tertiary text-white px-2 py-1.5 uppercase cursor-pointer hover:bg-white hover:text-primary","aria-expanded":e.isOpen},[Fe("span",L8,Wt(se(n)("Theme"))+": "+Wt(se(n)(`${(a=e.currentTheme)==null?void 0:a.name}`)),1),Fe("span",D8,[Fe("span",N8,Wt(se(n)("Changer")),1),Fe("span",R8,[(Be(!0),tt(en,null,Ta(se(o),m=>(Be(),tt("div",{class:Rr(`h-2.5 w-2.5 m-px bg-${m.name}-primary`),key:m.id},null,2))),128))])])],8,k8)}}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/theme-selector/theme-selector-button.vue"]]),F8={key:0,class:"absolute inset-x-0 top-14 bottom-0 mt-1 bg-primary overflow-y-auto overflow-x-hidden"},B8=lr(ir({__name:"theme-selector",setup(t){const e=vi(),{setThemeGridOpen:n}=e,{themeGridOpen:o}=rn(e),s=yo(),f=Su(),{theme:a,themes:m}=rn(s),g=ar(()=>{var M;return((M=m.value)==null?void 0:M.filter(I=>{var P;return((P=I.metadata)==null?void 0:P.display_in_switcher)===!0}))||[]});function b(){n(!o.value)}function E(M){f.setTheme(M),b()}return(M,I)=>(Be(),tt(en,null,[kt(z8,{onClick:b,themes:se(g),currentTheme:se(a),isOpen:se(o)},null,8,["themes","currentTheme","isOpen"]),se(o)?(Be(),tt("div",F8,[kt(P8,{onSetTheme:E,themes:se(g)},null,8,["themes"])])):Xe("v-if",!0)],64))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/theme-selector/theme-selector.vue"]]);function u1(t,e=0){const{name:n,id:o,children:s,metadata:f}=t;return{name:n,id:o,depth:e,children:s==null?void 0:s.map(a=>u1(a,e+1)),checked:!1,expanded:(f==null?void 0:f.is_expanded)||!1}}const V8={key:0,class:"mb-7"},U8=lr(ir({__name:"catalog-tree",setup(t){const e=ui(),n=yo(),o=ka(),s=Ln(),f=Ln(),a=ar(()=>!e.is3dActive||e.is3dActive&&!e.is3dMesh),{layerTrees_3d:m}=rn(n);la(g);function g(){var M;if(n.theme&&e.layers){const I=s.value&&s.value.id===((M=n.theme)==null?void 0:M.id)?s.value:u1(n.theme);s.value=Zh.updateLayers(I,e.layers)}}la(()=>{if(m.value){const M=f.value?f.value:u1(m.value);f.value=Zh.updateLayers(M,e.layers3d)}});function b(M,I){const P=I?f:s;P.value=Zh.toggleNode(M.id,P.value,"expanded")}function E(M,I){o.toggleLayer(+M.id,!M.checked,I)}return(M,I)=>(Be(),tt("div",null,[Xe(" 3D layers catalog, only displayed when 3D is active "),se(f)&&se(e).is3dActive?(Be(),tt("div",V8,[(Be(),tn(H0,{node:se(f),key:se(f).id,onToggleParent:I[0]||(I[0]=P=>b(P,!0)),onToggleLayer:I[1]||(I[1]=P=>E(P,!0))},null,8,["node"]))])):Xe("v-if",!0),Xe(" Main catalog, displays by default and 3D terrain active "),se(s)&&se(a)?(Be(),tn(H0,{node:se(s),key:se(s).id,onToggleParent:I[2]||(I[2]=P=>b(P,!1)),onToggleLayer:I[3]||(I[3]=P=>E(P,!1))},null,8,["node"])):Xe("v-if",!0)]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/catalog/catalog-tree.vue"]]),j8=lr(ir({__name:"catalog-tab",setup(t){const{themeGridOpen:e}=rn(vi());return(n,o)=>(Be(),tt(en,null,[kt(B8),se(e)===!1?(Be(),tn(U8,{key:0,class:"pt-5 absolute inset-x-2.5 bg-primary overflow-y-auto overflow-x-hidden"})):Xe("v-if",!0)],64))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/catalog/catalog-tab.vue"]]);/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function YT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YT(Object(n),!0).forEach(function(o){$8(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YT(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function fg(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fg=function(e){return typeof e}:fg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fg(t)}function $8(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function El(){return El=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},El.apply(this,arguments)}function G8(t,e){if(t==null)return{};var n={},o=Object.keys(t),s,f;for(f=0;f<o.length;f++)s=o[f],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function q8(t,e){if(t==null)return{};var n=G8(t,e),o,s;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(s=0;s<f.length;s++)o=f[s],!(e.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,o)||(n[o]=t[o]))}return n}var W8="1.15.0";function Sl(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Tl=Sl(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),nd=Sl(/Edge/i),JT=Sl(/firefox/i),id=Sl(/safari/i)&&!Sl(/chrome/i)&&!Sl(/android/i),QT=Sl(/iP(ad|od|hone)/i),eM=Sl(/chrome/i)&&Sl(/android/i),tM={capture:!1,passive:!1};function on(t,e,n){t.addEventListener(e,n,!Tl&&tM)}function Kr(t,e,n){t.removeEventListener(e,n,!Tl&&tM)}function pg(t,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function H8(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Fs(t,e,n,o){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&pg(t,e):pg(t,e))||o&&t===n)return t;if(t===n)break}while(t=H8(t))}return null}var rM=/\s+/g;function ha(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(rM," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace(rM," ")}}function fr(t,e,n){var o=t&&t.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=n+(typeof n=="string"?"":"px")}}function Xh(t,e){var n="";if(typeof t=="string")n=t;else do{var o=fr(t,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(n)}function nM(t,e,n){if(t){var o=t.getElementsByTagName(e),s=0,f=o.length;if(n)for(;s<f;s++)n(o[s],s);return o}return[]}function Bs(){var t=document.scrollingElement;return t||document.documentElement}function Ni(t,e,n,o,s){if(!(!t.getBoundingClientRect&&t!==window)){var f,a,m,g,b,E,M;if(t!==window&&t.parentNode&&t!==Bs()?(f=t.getBoundingClientRect(),a=f.top,m=f.left,g=f.bottom,b=f.right,E=f.height,M=f.width):(a=0,m=0,g=window.innerHeight,b=window.innerWidth,E=window.innerHeight,M=window.innerWidth),(e||n)&&t!==window&&(s=s||t.parentNode,!Tl))do if(s&&s.getBoundingClientRect&&(fr(s,"transform")!=="none"||n&&fr(s,"position")!=="static")){var I=s.getBoundingClientRect();a-=I.top+parseInt(fr(s,"border-top-width")),m-=I.left+parseInt(fr(s,"border-left-width")),g=a+f.height,b=m+f.width;break}while(s=s.parentNode);if(o&&t!==window){var P=Xh(s||t),z=P&&P.a,V=P&&P.d;P&&(a/=V,m/=z,M/=z,E/=V,g=a+E,b=m+M)}return{top:a,left:m,bottom:g,right:b,width:M,height:E}}}function iM(t,e,n){for(var o=Pu(t,!0),s=Ni(t)[e];o;){var f=Ni(o)[n],a=void 0;if(n==="top"||n==="left"?a=s>=f:a=s<=f,!a)return o;if(o===Bs())break;o=Pu(o,!1)}return!1}function Kh(t,e,n,o){for(var s=0,f=0,a=t.children;f<a.length;){if(a[f].style.display!=="none"&&a[f]!==cr.ghost&&(o||a[f]!==cr.dragged)&&Fs(a[f],n.draggable,t,!1)){if(s===e)return a[f];s++}f++}return null}function c1(t,e){for(var n=t.lastElementChild;n&&(n===cr.ghost||fr(n,"display")==="none"||e&&!pg(n,e));)n=n.previousElementSibling;return n||null}function Da(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==cr.clone&&(!e||pg(t,e))&&n++;return n}function oM(t){var e=0,n=0,o=Bs();if(t)do{var s=Xh(t),f=s.a,a=s.d;e+=t.scrollLeft*f,n+=t.scrollTop*a}while(t!==o&&(t=t.parentNode));return[e,n]}function Z8(t,e){for(var n in t)if(!!t.hasOwnProperty(n)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n)}return-1}function Pu(t,e){if(!t||!t.getBoundingClientRect)return Bs();var n=t,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var s=fr(n);if(n.clientWidth<n.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Bs();if(o||e)return n;o=!0}}while(n=n.parentNode);return Bs()}function X8(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function h1(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var od;function aM(t,e){return function(){if(!od){var n=arguments,o=this;n.length===1?t.call(o,n[0]):t.apply(o,n),od=setTimeout(function(){od=void 0},e)}}}function K8(){clearTimeout(od),od=void 0}function sM(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function lM(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var fa="Sortable"+new Date().getTime();function Y8(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(s){if(!(fr(s,"display")==="none"||s===cr.ghost)){t.push({target:s,rect:Ni(s)});var f=zs({},t[t.length-1].rect);if(s.thisAnimationDuration){var a=Xh(s,!0);a&&(f.top-=a.f,f.left-=a.e)}s.fromRect=f}})}},addAnimationState:function(o){t.push(o)},removeAnimationState:function(o){t.splice(Z8(t,{target:o}),1)},animateAll:function(o){var s=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var f=!1,a=0;t.forEach(function(m){var g=0,b=m.target,E=b.fromRect,M=Ni(b),I=b.prevFromRect,P=b.prevToRect,z=m.rect,V=Xh(b,!0);V&&(M.top-=V.f,M.left-=V.e),b.toRect=M,b.thisAnimationDuration&&h1(I,M)&&!h1(E,M)&&(z.top-M.top)/(z.left-M.left)===(E.top-M.top)/(E.left-M.left)&&(g=Q8(z,I,P,s.options)),h1(M,E)||(b.prevFromRect=E,b.prevToRect=M,g||(g=s.options.animation),s.animate(b,z,M,g)),g&&(f=!0,a=Math.max(a,g),clearTimeout(b.animationResetTimer),b.animationResetTimer=setTimeout(function(){b.animationTime=0,b.prevFromRect=null,b.fromRect=null,b.prevToRect=null,b.thisAnimationDuration=null},g),b.thisAnimationDuration=g)}),clearTimeout(e),f?e=setTimeout(function(){typeof o=="function"&&o()},a):typeof o=="function"&&o(),t=[]},animate:function(o,s,f,a){if(a){fr(o,"transition",""),fr(o,"transform","");var m=Xh(this.el),g=m&&m.a,b=m&&m.d,E=(s.left-f.left)/(g||1),M=(s.top-f.top)/(b||1);o.animatingX=!!E,o.animatingY=!!M,fr(o,"transform","translate3d("+E+"px,"+M+"px,0)"),this.forRepaintDummy=J8(o),fr(o,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),fr(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){fr(o,"transition",""),fr(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},a)}}}}function J8(t){return t.offsetWidth}function Q8(t,e,n,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*o.animation}var Yh=[],f1={initializeByDefault:!0},ad={mount:function(e){for(var n in f1)f1.hasOwnProperty(n)&&!(n in e)&&(e[n]=f1[n]);Yh.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Yh.push(e)},pluginEvent:function(e,n,o){var s=this;this.eventCanceled=!1,o.cancel=function(){s.eventCanceled=!0};var f=e+"Global";Yh.forEach(function(a){!n[a.pluginName]||(n[a.pluginName][f]&&n[a.pluginName][f](zs({sortable:n},o)),n.options[a.pluginName]&&n[a.pluginName][e]&&n[a.pluginName][e](zs({sortable:n},o)))})},initializePlugins:function(e,n,o,s){Yh.forEach(function(m){var g=m.pluginName;if(!(!e.options[g]&&!m.initializeByDefault)){var b=new m(e,n,e.options);b.sortable=e,b.options=e.options,e[g]=b,El(o,b.defaults)}});for(var f in e.options)if(!!e.options.hasOwnProperty(f)){var a=this.modifyOption(e,f,e.options[f]);typeof a<"u"&&(e.options[f]=a)}},getEventProperties:function(e,n){var o={};return Yh.forEach(function(s){typeof s.eventProperties=="function"&&El(o,s.eventProperties.call(n[s.pluginName],e))}),o},modifyOption:function(e,n,o){var s;return Yh.forEach(function(f){!e[f.pluginName]||f.optionListeners&&typeof f.optionListeners[n]=="function"&&(s=f.optionListeners[n].call(e[f.pluginName],o))}),s}};function eV(t){var e=t.sortable,n=t.rootEl,o=t.name,s=t.targetEl,f=t.cloneEl,a=t.toEl,m=t.fromEl,g=t.oldIndex,b=t.newIndex,E=t.oldDraggableIndex,M=t.newDraggableIndex,I=t.originalEvent,P=t.putSortable,z=t.extraEventProperties;if(e=e||n&&n[fa],!!e){var V,q=e.options,re="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Tl&&!nd?V=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(V=document.createEvent("Event"),V.initEvent(o,!0,!0)),V.to=a||n,V.from=m||n,V.item=s||n,V.clone=f,V.oldIndex=g,V.newIndex=b,V.oldDraggableIndex=E,V.newDraggableIndex=M,V.originalEvent=I,V.pullMode=P?P.lastPutMode:void 0;var X=zs(zs({},z),ad.getEventProperties(o,e));for(var ae in X)V[ae]=X[ae];n&&n.dispatchEvent(V),q[re]&&q[re].call(e,V)}}var tV=["evt"],Zo=function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.evt,f=q8(o,tV);ad.pluginEvent.bind(cr)(e,n,zs({dragEl:Et,parentEl:ci,ghostEl:Tr,rootEl:Gn,nextEl:Dc,lastDownEl:dg,cloneEl:Yn,cloneHidden:ku,dragStarted:ld,putSortable:ro,activeSortable:cr.active,originalEvent:s,oldIndex:Jh,oldDraggableIndex:sd,newIndex:pa,newDraggableIndex:Lu,hideGhostForTarget:mM,unhideGhostForTarget:yM,cloneNowHidden:function(){ku=!0},cloneNowShown:function(){ku=!1},dispatchSortableEvent:function(m){zo({sortable:n,name:m,originalEvent:s})}},f))};function zo(t){eV(zs({putSortable:ro,cloneEl:Yn,targetEl:Et,rootEl:Gn,oldIndex:Jh,oldDraggableIndex:sd,newIndex:pa,newDraggableIndex:Lu},t))}var Et,ci,Tr,Gn,Dc,dg,Yn,ku,Jh,pa,sd,Lu,mg,ro,Qh=!1,yg=!1,gg=[],Nc,as,p1,d1,uM,cM,ld,ef,ud,cd=!1,vg=!1,_g,vo,m1=[],y1=!1,xg=[],bg=typeof document<"u",wg=QT,hM=nd||Tl?"cssFloat":"float",rV=bg&&!eM&&!QT&&"draggable"in document.createElement("div"),fM=function(){if(!!bg){if(Tl)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),pM=function(e,n){var o=fr(e),s=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),f=Kh(e,0,n),a=Kh(e,1,n),m=f&&fr(f),g=a&&fr(a),b=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+Ni(f).width,E=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+Ni(a).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(f&&m.float&&m.float!=="none"){var M=m.float==="left"?"left":"right";return a&&(g.clear==="both"||g.clear===M)?"vertical":"horizontal"}return f&&(m.display==="block"||m.display==="flex"||m.display==="table"||m.display==="grid"||b>=s&&o[hM]==="none"||a&&o[hM]==="none"&&b+E>s)?"vertical":"horizontal"},nV=function(e,n,o){var s=o?e.left:e.top,f=o?e.right:e.bottom,a=o?e.width:e.height,m=o?n.left:n.top,g=o?n.right:n.bottom,b=o?n.width:n.height;return s===m||f===g||s+a/2===m+b/2},iV=function(e,n){var o;return gg.some(function(s){var f=s[fa].options.emptyInsertThreshold;if(!(!f||c1(s))){var a=Ni(s),m=e>=a.left-f&&e<=a.right+f,g=n>=a.top-f&&n<=a.bottom+f;if(m&&g)return o=s}}),o},dM=function(e){function n(f,a){return function(m,g,b,E){var M=m.options.group.name&&g.options.group.name&&m.options.group.name===g.options.group.name;if(f==null&&(a||M))return!0;if(f==null||f===!1)return!1;if(a&&f==="clone")return f;if(typeof f=="function")return n(f(m,g,b,E),a)(m,g,b,E);var I=(a?m:g).options.group.name;return f===!0||typeof f=="string"&&f===I||f.join&&f.indexOf(I)>-1}}var o={},s=e.group;(!s||fg(s)!="object")&&(s={name:s}),o.name=s.name,o.checkPull=n(s.pull,!0),o.checkPut=n(s.put),o.revertClone=s.revertClone,e.group=o},mM=function(){!fM&&Tr&&fr(Tr,"display","none")},yM=function(){!fM&&Tr&&fr(Tr,"display","")};bg&&!eM&&document.addEventListener("click",function(t){if(yg)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),yg=!1,!1},!0);var Rc=function(e){if(Et){e=e.touches?e.touches[0]:e;var n=iV(e.clientX,e.clientY);if(n){var o={};for(var s in e)e.hasOwnProperty(s)&&(o[s]=e[s]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[fa]._onDragOver(o)}}},oV=function(e){Et&&Et.parentNode[fa]._isOutsideThisEl(e.target)};function cr(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=El({},e),t[fa]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pM(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,m){a.setData("Text",m.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:cr.supportPointer!==!1&&"PointerEvent"in window&&!id,emptyInsertThreshold:5};ad.initializePlugins(this,t,n);for(var o in n)!(o in e)&&(e[o]=n[o]);dM(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:rV,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(t,"pointerdown",this._onTapStart):(on(t,"mousedown",this._onTapStart),on(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(t,"dragover",this),on(t,"dragenter",this)),gg.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),El(this,Y8())}cr.prototype={constructor:cr,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ef=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Et):this.options.direction},_onTapStart:function(e){if(!!e.cancelable){var n=this,o=this.el,s=this.options,f=s.preventOnFilter,a=e.type,m=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,g=(m||e).target,b=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||g,E=s.filter;if(pV(o),!Et&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||s.disabled)&&!b.isContentEditable&&!(!this.nativeDraggable&&id&&g&&g.tagName.toUpperCase()==="SELECT")&&(g=Fs(g,s.draggable,o,!1),!(g&&g.animated)&&dg!==g)){if(Jh=Da(g),sd=Da(g,s.draggable),typeof E=="function"){if(E.call(this,e,g,this)){zo({sortable:n,rootEl:b,name:"filter",targetEl:g,toEl:o,fromEl:o}),Zo("filter",n,{evt:e}),f&&e.cancelable&&e.preventDefault();return}}else if(E&&(E=E.split(",").some(function(M){if(M=Fs(b,M.trim(),o,!1),M)return zo({sortable:n,rootEl:M,name:"filter",targetEl:g,fromEl:o,toEl:o}),Zo("filter",n,{evt:e}),!0}),E)){f&&e.cancelable&&e.preventDefault();return}s.handle&&!Fs(b,s.handle,o,!1)||this._prepareDragStart(e,m,g)}}},_prepareDragStart:function(e,n,o){var s=this,f=s.el,a=s.options,m=f.ownerDocument,g;if(o&&!Et&&o.parentNode===f){var b=Ni(o);if(Gn=f,Et=o,ci=Et.parentNode,Dc=Et.nextSibling,dg=o,mg=a.group,cr.dragged=Et,Nc={target:Et,clientX:(n||e).clientX,clientY:(n||e).clientY},uM=Nc.clientX-b.left,cM=Nc.clientY-b.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Et.style["will-change"]="all",g=function(){if(Zo("delayEnded",s,{evt:e}),cr.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!JT&&s.nativeDraggable&&(Et.draggable=!0),s._triggerDragStart(e,n),zo({sortable:s,name:"choose",originalEvent:e}),ha(Et,a.chosenClass,!0)},a.ignore.split(",").forEach(function(E){nM(Et,E.trim(),g1)}),on(m,"dragover",Rc),on(m,"mousemove",Rc),on(m,"touchmove",Rc),on(m,"mouseup",s._onDrop),on(m,"touchend",s._onDrop),on(m,"touchcancel",s._onDrop),JT&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Et.draggable=!0),Zo("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(nd||Tl))){if(cr.eventCanceled){this._onDrop();return}on(m,"mouseup",s._disableDelayedDrag),on(m,"touchend",s._disableDelayedDrag),on(m,"touchcancel",s._disableDelayedDrag),on(m,"mousemove",s._delayedDragTouchMoveHandler),on(m,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&on(m,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(g,a.delay)}else g()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Et&&g1(Et),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Kr(e,"mouseup",this._disableDelayedDrag),Kr(e,"touchend",this._disableDelayedDrag),Kr(e,"touchcancel",this._disableDelayedDrag),Kr(e,"mousemove",this._delayedDragTouchMoveHandler),Kr(e,"touchmove",this._delayedDragTouchMoveHandler),Kr(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):n?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(Et,"dragend",this),on(Gn,"dragstart",this._onDragStart));try{document.selection?Sg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Qh=!1,Gn&&Et){Zo("dragStarted",this,{evt:n}),this.nativeDraggable&&on(document,"dragover",oV);var o=this.options;!e&&ha(Et,o.dragClass,!1),ha(Et,o.ghostClass,!0),cr.active=this,e&&this._appendGhost(),zo({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(as){this._lastX=as.clientX,this._lastY=as.clientY,mM();for(var e=document.elementFromPoint(as.clientX,as.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(as.clientX,as.clientY),e!==n);)n=e;if(Et.parentNode[fa]._isOutsideThisEl(e),n)do{if(n[fa]){var o=void 0;if(o=n[fa]._onDragOver({clientX:as.clientX,clientY:as.clientY,target:e,rootEl:n}),o&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);yM()}},_onTouchMove:function(e){if(Nc){var n=this.options,o=n.fallbackTolerance,s=n.fallbackOffset,f=e.touches?e.touches[0]:e,a=Tr&&Xh(Tr,!0),m=Tr&&a&&a.a,g=Tr&&a&&a.d,b=wg&&vo&&oM(vo),E=(f.clientX-Nc.clientX+s.x)/(m||1)+(b?b[0]-m1[0]:0)/(m||1),M=(f.clientY-Nc.clientY+s.y)/(g||1)+(b?b[1]-m1[1]:0)/(g||1);if(!cr.active&&!Qh){if(o&&Math.max(Math.abs(f.clientX-this._lastX),Math.abs(f.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(Tr){a?(a.e+=E-(p1||0),a.f+=M-(d1||0)):a={a:1,b:0,c:0,d:1,e:E,f:M};var I="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");fr(Tr,"webkitTransform",I),fr(Tr,"mozTransform",I),fr(Tr,"msTransform",I),fr(Tr,"transform",I),p1=E,d1=M,as=f}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Tr){var e=this.options.fallbackOnBody?document.body:Gn,n=Ni(Et,!0,wg,!0,e),o=this.options;if(wg){for(vo=e;fr(vo,"position")==="static"&&fr(vo,"transform")==="none"&&vo!==document;)vo=vo.parentNode;vo!==document.body&&vo!==document.documentElement?(vo===document&&(vo=Bs()),n.top+=vo.scrollTop,n.left+=vo.scrollLeft):vo=Bs(),m1=oM(vo)}Tr=Et.cloneNode(!0),ha(Tr,o.ghostClass,!1),ha(Tr,o.fallbackClass,!0),ha(Tr,o.dragClass,!0),fr(Tr,"transition",""),fr(Tr,"transform",""),fr(Tr,"box-sizing","border-box"),fr(Tr,"margin",0),fr(Tr,"top",n.top),fr(Tr,"left",n.left),fr(Tr,"width",n.width),fr(Tr,"height",n.height),fr(Tr,"opacity","0.8"),fr(Tr,"position",wg?"absolute":"fixed"),fr(Tr,"zIndex","100000"),fr(Tr,"pointerEvents","none"),cr.ghost=Tr,e.appendChild(Tr),fr(Tr,"transform-origin",uM/parseInt(Tr.style.width)*100+"% "+cM/parseInt(Tr.style.height)*100+"%")}},_onDragStart:function(e,n){var o=this,s=e.dataTransfer,f=o.options;if(Zo("dragStart",this,{evt:e}),cr.eventCanceled){this._onDrop();return}Zo("setupClone",this),cr.eventCanceled||(Yn=lM(Et),Yn.removeAttribute("id"),Yn.draggable=!1,Yn.style["will-change"]="",this._hideClone(),ha(Yn,this.options.chosenClass,!1),cr.clone=Yn),o.cloneId=Sg(function(){Zo("clone",o),!cr.eventCanceled&&(o.options.removeCloneOnHide||Gn.insertBefore(Yn,Et),o._hideClone(),zo({sortable:o,name:"clone"}))}),!n&&ha(Et,f.dragClass,!0),n?(yg=!0,o._loopId=setInterval(o._emulateDragOver,50)):(Kr(document,"mouseup",o._onDrop),Kr(document,"touchend",o._onDrop),Kr(document,"touchcancel",o._onDrop),s&&(s.effectAllowed="move",f.setData&&f.setData.call(o,s,Et)),on(document,"drop",o),fr(Et,"transform","translateZ(0)")),Qh=!0,o._dragStartId=Sg(o._dragStarted.bind(o,n,e)),on(document,"selectstart",o),ld=!0,id&&fr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,o=e.target,s,f,a,m=this.options,g=m.group,b=cr.active,E=mg===g,M=m.sort,I=ro||b,P,z=this,V=!1;if(y1)return;function q(Lt,rr){Zo(Lt,z,zs({evt:e,isOwner:E,axis:P?"vertical":"horizontal",revert:a,dragRect:s,targetRect:f,canSort:M,fromSortable:I,target:o,completed:X,onMove:function(zr,mr){return Eg(Gn,n,Et,s,zr,Ni(zr),e,mr)},changed:ae},rr))}function re(){q("dragOverAnimationCapture"),z.captureAnimationState(),z!==I&&I.captureAnimationState()}function X(Lt){return q("dragOverCompleted",{insertion:Lt}),Lt&&(E?b._hideClone():b._showClone(z),z!==I&&(ha(Et,ro?ro.options.ghostClass:b.options.ghostClass,!1),ha(Et,m.ghostClass,!0)),ro!==z&&z!==cr.active?ro=z:z===cr.active&&ro&&(ro=null),I===z&&(z._ignoreWhileAnimating=o),z.animateAll(function(){q("dragOverAnimationComplete"),z._ignoreWhileAnimating=null}),z!==I&&(I.animateAll(),I._ignoreWhileAnimating=null)),(o===Et&&!Et.animated||o===n&&!o.animated)&&(ef=null),!m.dragoverBubble&&!e.rootEl&&o!==document&&(Et.parentNode[fa]._isOutsideThisEl(e.target),!Lt&&Rc(e)),!m.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),V=!0}function ae(){pa=Da(Et),Lu=Da(Et,m.draggable),zo({sortable:z,name:"change",toEl:n,newIndex:pa,newDraggableIndex:Lu,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=Fs(o,m.draggable,n,!0),q("dragOver"),cr.eventCanceled)return V;if(Et.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||z._ignoreWhileAnimating===o)return X(!1);if(yg=!1,b&&!m.disabled&&(E?M||(a=ci!==Gn):ro===this||(this.lastPutMode=mg.checkPull(this,b,Et,e))&&g.checkPut(this,b,Et,e))){if(P=this._getDirection(e,o)==="vertical",s=Ni(Et),q("dragOverValid"),cr.eventCanceled)return V;if(a)return ci=Gn,re(),this._hideClone(),q("revert"),cr.eventCanceled||(Dc?Gn.insertBefore(Et,Dc):Gn.appendChild(Et)),X(!0);var ce=c1(n,m.draggable);if(!ce||uV(e,P,this)&&!ce.animated){if(ce===Et)return X(!1);if(ce&&n===e.target&&(o=ce),o&&(f=Ni(o)),Eg(Gn,n,Et,s,o,f,e,!!o)!==!1)return re(),ce&&ce.nextSibling?n.insertBefore(Et,ce.nextSibling):n.appendChild(Et),ci=n,ae(),X(!0)}else if(ce&&lV(e,P,this)){var ve=Kh(n,0,m,!0);if(ve===Et)return X(!1);if(o=ve,f=Ni(o),Eg(Gn,n,Et,s,o,f,e,!1)!==!1)return re(),n.insertBefore(Et,ve),ci=n,ae(),X(!0)}else if(o.parentNode===n){f=Ni(o);var Ne=0,ze,Pe=Et.parentNode!==n,Se=!nV(Et.animated&&Et.toRect||s,o.animated&&o.toRect||f,P),Ie=P?"top":"left",Ke=iM(o,"top","top")||iM(Et,"top","top"),Ge=Ke?Ke.scrollTop:void 0;ef!==o&&(ze=f[Ie],cd=!1,vg=!Se&&m.invertSwap||Pe),Ne=cV(e,o,f,P,Se?1:m.swapThreshold,m.invertedSwapThreshold==null?m.swapThreshold:m.invertedSwapThreshold,vg,ef===o);var st;if(Ne!==0){var be=Da(Et);do be-=Ne,st=ci.children[be];while(st&&(fr(st,"display")==="none"||st===Tr))}if(Ne===0||st===o)return X(!1);ef=o,ud=Ne;var Je=o.nextElementSibling,ht=!1;ht=Ne===1;var vt=Eg(Gn,n,Et,s,o,f,e,ht);if(vt!==!1)return(vt===1||vt===-1)&&(ht=vt===1),y1=!0,setTimeout(sV,30),re(),ht&&!Je?n.appendChild(Et):o.parentNode.insertBefore(Et,ht?Je:o),Ke&&sM(Ke,0,Ge-Ke.scrollTop),ci=Et.parentNode,ze!==void 0&&!vg&&(_g=Math.abs(ze-Ni(o)[Ie])),ae(),X(!0)}if(n.contains(Et))return X(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Kr(document,"mousemove",this._onTouchMove),Kr(document,"touchmove",this._onTouchMove),Kr(document,"pointermove",this._onTouchMove),Kr(document,"dragover",Rc),Kr(document,"mousemove",Rc),Kr(document,"touchmove",Rc)},_offUpEvents:function(){var e=this.el.ownerDocument;Kr(e,"mouseup",this._onDrop),Kr(e,"touchend",this._onDrop),Kr(e,"pointerup",this._onDrop),Kr(e,"touchcancel",this._onDrop),Kr(document,"selectstart",this)},_onDrop:function(e){var n=this.el,o=this.options;if(pa=Da(Et),Lu=Da(Et,o.draggable),Zo("drop",this,{evt:e}),ci=Et&&Et.parentNode,pa=Da(Et),Lu=Da(Et,o.draggable),cr.eventCanceled){this._nulling();return}Qh=!1,vg=!1,cd=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),v1(this.cloneId),v1(this._dragStartId),this.nativeDraggable&&(Kr(document,"drop",this),Kr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),id&&fr(document.body,"user-select",""),fr(Et,"transform",""),e&&(ld&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),Tr&&Tr.parentNode&&Tr.parentNode.removeChild(Tr),(Gn===ci||ro&&ro.lastPutMode!=="clone")&&Yn&&Yn.parentNode&&Yn.parentNode.removeChild(Yn),Et&&(this.nativeDraggable&&Kr(Et,"dragend",this),g1(Et),Et.style["will-change"]="",ld&&!Qh&&ha(Et,ro?ro.options.ghostClass:this.options.ghostClass,!1),ha(Et,this.options.chosenClass,!1),zo({sortable:this,name:"unchoose",toEl:ci,newIndex:null,newDraggableIndex:null,originalEvent:e}),Gn!==ci?(pa>=0&&(zo({rootEl:ci,name:"add",toEl:ci,fromEl:Gn,originalEvent:e}),zo({sortable:this,name:"remove",toEl:ci,originalEvent:e}),zo({rootEl:ci,name:"sort",toEl:ci,fromEl:Gn,originalEvent:e}),zo({sortable:this,name:"sort",toEl:ci,originalEvent:e})),ro&&ro.save()):pa!==Jh&&pa>=0&&(zo({sortable:this,name:"update",toEl:ci,originalEvent:e}),zo({sortable:this,name:"sort",toEl:ci,originalEvent:e})),cr.active&&((pa==null||pa===-1)&&(pa=Jh,Lu=sd),zo({sortable:this,name:"end",toEl:ci,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Zo("nulling",this),Gn=Et=ci=Tr=Dc=Yn=dg=ku=Nc=as=ld=pa=Lu=Jh=sd=ef=ud=ro=mg=cr.dragged=cr.ghost=cr.clone=cr.active=null,xg.forEach(function(e){e.checked=!0}),xg.length=p1=d1=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Et&&(this._onDragOver(e),aV(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,o=this.el.children,s=0,f=o.length,a=this.options;s<f;s++)n=o[s],Fs(n,a.draggable,this.el,!1)&&e.push(n.getAttribute(a.dataIdAttr)||fV(n));return e},sort:function(e,n){var o={},s=this.el;this.toArray().forEach(function(f,a){var m=s.children[a];Fs(m,this.options.draggable,s,!1)&&(o[f]=m)},this),n&&this.captureAnimationState(),e.forEach(function(f){o[f]&&(s.removeChild(o[f]),s.appendChild(o[f]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Fs(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var o=this.options;if(n===void 0)return o[e];var s=ad.modifyOption(this,e,n);typeof s<"u"?o[e]=s:o[e]=n,e==="group"&&dM(o)},destroy:function(){Zo("destroy",this);var e=this.el;e[fa]=null,Kr(e,"mousedown",this._onTapStart),Kr(e,"touchstart",this._onTapStart),Kr(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Kr(e,"dragover",this),Kr(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),gg.splice(gg.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ku){if(Zo("hideClone",this),cr.eventCanceled)return;fr(Yn,"display","none"),this.options.removeCloneOnHide&&Yn.parentNode&&Yn.parentNode.removeChild(Yn),ku=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ku){if(Zo("showClone",this),cr.eventCanceled)return;Et.parentNode==Gn&&!this.options.group.revertClone?Gn.insertBefore(Yn,Et):Dc?Gn.insertBefore(Yn,Dc):Gn.appendChild(Yn),this.options.group.revertClone&&this.animate(Et,Yn),fr(Yn,"display",""),ku=!1}}};function aV(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Eg(t,e,n,o,s,f,a,m){var g,b=t[fa],E=b.options.onMove,M;return window.CustomEvent&&!Tl&&!nd?g=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent("move",!0,!0)),g.to=e,g.from=t,g.dragged=n,g.draggedRect=o,g.related=s||e,g.relatedRect=f||Ni(e),g.willInsertAfter=m,g.originalEvent=a,t.dispatchEvent(g),E&&(M=E.call(b,g,a)),M}function g1(t){t.draggable=!1}function sV(){y1=!1}function lV(t,e,n){var o=Ni(Kh(n.el,0,n.options,!0)),s=10;return e?t.clientX<o.left-s||t.clientY<o.top&&t.clientX<o.right:t.clientY<o.top-s||t.clientY<o.bottom&&t.clientX<o.left}function uV(t,e,n){var o=Ni(c1(n.el,n.options.draggable)),s=10;return e?t.clientX>o.right+s||t.clientX<=o.right&&t.clientY>o.bottom&&t.clientX>=o.left:t.clientX>o.right&&t.clientY>o.top||t.clientX<=o.right&&t.clientY>o.bottom+s}function cV(t,e,n,o,s,f,a,m){var g=o?t.clientY:t.clientX,b=o?n.height:n.width,E=o?n.top:n.left,M=o?n.bottom:n.right,I=!1;if(!a){if(m&&_g<b*s){if(!cd&&(ud===1?g>E+b*f/2:g<M-b*f/2)&&(cd=!0),cd)I=!0;else if(ud===1?g<E+_g:g>M-_g)return-ud}else if(g>E+b*(1-s)/2&&g<M-b*(1-s)/2)return hV(e)}return I=I||a,I&&(g<E+b*f/2||g>M-b*f/2)?g>E+b/2?1:-1:0}function hV(t){return Da(Et)<Da(t)?1:-1}function fV(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function pV(t){xg.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&xg.push(o)}}function Sg(t){return setTimeout(t,0)}function v1(t){return clearTimeout(t)}bg&&on(document,"touchmove",function(t){(cr.active||Qh)&&t.cancelable&&t.preventDefault()}),cr.utils={on,off:Kr,css:fr,find:nM,is:function(e,n){return!!Fs(e,n,e,!1)},extend:X8,throttle:aM,closest:Fs,toggleClass:ha,clone:lM,index:Da,nextTick:Sg,cancelNextTick:v1,detectDirection:pM,getChild:Kh},cr.get=function(t){return t[fa]},cr.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(cr.utils=zs(zs({},cr.utils),o.utils)),ad.mount(o)})},cr.create=function(t,e){return new cr(t,e)},cr.version=W8;var Ci=[],hd,_1,x1=!1,b1,w1,Tg,fd;function dV(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):o.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?Kr(document,"dragover",this._handleAutoScroll):(Kr(document,"pointermove",this._handleFallbackAutoScroll),Kr(document,"touchmove",this._handleFallbackAutoScroll),Kr(document,"mousemove",this._handleFallbackAutoScroll)),gM(),Mg(),K8()},nulling:function(){Tg=_1=hd=x1=fd=b1=w1=null,Ci.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var s=this,f=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,m=document.elementFromPoint(f,a);if(Tg=n,o||this.options.forceAutoScrollFallback||nd||Tl||id){E1(n,this.options,m,o);var g=Pu(m,!0);x1&&(!fd||f!==b1||a!==w1)&&(fd&&gM(),fd=setInterval(function(){var b=Pu(document.elementFromPoint(f,a),!0);b!==g&&(g=b,Mg()),E1(n,s.options,b,o)},10),b1=f,w1=a)}else{if(!this.options.bubbleScroll||Pu(m,!0)===Bs()){Mg();return}E1(n,this.options,Pu(m,!1),!1)}}},El(t,{pluginName:"scroll",initializeByDefault:!0})}function Mg(){Ci.forEach(function(t){clearInterval(t.pid)}),Ci=[]}function gM(){clearInterval(fd)}var E1=aM(function(t,e,n,o){if(!!e.scroll){var s=(t.touches?t.touches[0]:t).clientX,f=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,m=e.scrollSpeed,g=Bs(),b=!1,E;_1!==n&&(_1=n,Mg(),hd=e.scroll,E=e.scrollFn,hd===!0&&(hd=Pu(n,!0)));var M=0,I=hd;do{var P=I,z=Ni(P),V=z.top,q=z.bottom,re=z.left,X=z.right,ae=z.width,ce=z.height,ve=void 0,Ne=void 0,ze=P.scrollWidth,Pe=P.scrollHeight,Se=fr(P),Ie=P.scrollLeft,Ke=P.scrollTop;P===g?(ve=ae<ze&&(Se.overflowX==="auto"||Se.overflowX==="scroll"||Se.overflowX==="visible"),Ne=ce<Pe&&(Se.overflowY==="auto"||Se.overflowY==="scroll"||Se.overflowY==="visible")):(ve=ae<ze&&(Se.overflowX==="auto"||Se.overflowX==="scroll"),Ne=ce<Pe&&(Se.overflowY==="auto"||Se.overflowY==="scroll"));var Ge=ve&&(Math.abs(X-s)<=a&&Ie+ae<ze)-(Math.abs(re-s)<=a&&!!Ie),st=Ne&&(Math.abs(q-f)<=a&&Ke+ce<Pe)-(Math.abs(V-f)<=a&&!!Ke);if(!Ci[M])for(var be=0;be<=M;be++)Ci[be]||(Ci[be]={});(Ci[M].vx!=Ge||Ci[M].vy!=st||Ci[M].el!==P)&&(Ci[M].el=P,Ci[M].vx=Ge,Ci[M].vy=st,clearInterval(Ci[M].pid),(Ge!=0||st!=0)&&(b=!0,Ci[M].pid=setInterval(function(){o&&this.layer===0&&cr.active._onTouchMove(Tg);var Je=Ci[this.layer].vy?Ci[this.layer].vy*m:0,ht=Ci[this.layer].vx?Ci[this.layer].vx*m:0;typeof E=="function"&&E.call(cr.dragged.parentNode[fa],ht,Je,t,Tg,Ci[this.layer].el)!=="continue"||sM(Ci[this.layer].el,ht,Je)}.bind({layer:M}),24))),M++}while(e.bubbleScroll&&I!==g&&(I=Pu(I,!1)));x1=b}},30),vM=function(e){var n=e.originalEvent,o=e.putSortable,s=e.dragEl,f=e.activeSortable,a=e.dispatchSortableEvent,m=e.hideGhostForTarget,g=e.unhideGhostForTarget;if(!!n){var b=o||f;m();var E=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,M=document.elementFromPoint(E.clientX,E.clientY);g(),b&&!b.el.contains(M)&&(a("spill"),this.onSpill({dragEl:s,putSortable:o}))}};function S1(){}S1.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var s=Kh(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(n,s):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:vM},El(S1,{pluginName:"revertOnSpill"});function T1(){}T1.prototype={onSpill:function(e){var n=e.dragEl,o=e.putSortable,s=o||this.sortable;s.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),s.animateAll()},drop:vM},El(T1,{pluginName:"removeOnSpill"}),cr.mount(new dV),cr.mount(T1,S1);const _M=.5,mV=!1,Ig=bc("slider",()=>{const t=ui(),e=br(_M),n=br(mV),o=ar(()=>[...t.layers].reverse()[0]);function s(a){let m=a;a<.1?m=.1:a>.9&&(m=.9),e.value=m}function f(a){n.value=a!=null?a:!n.value}return{sliderActive:n,sliderRatio:e,sliderTopLayer:o,setRatio:s,toggleSlider:f}},{});function xM(t,e){const{t:n}=En();function o(){e==null||e.emit("clickInfo",t)}return{t:n,onClickInfo:o}}const yV={class:"lux-layer-manager-item mt-2.5"},gV=["title"],vV={class:"flex-1 text-left cursor-default"},_V=["aria-label","title"],xV=lr(ir({__name:"layer-item-background",props:{showEditButton:{type:Boolean,required:!0},layer:{type:null,required:!0}},emits:["clickEdit","clickInfo"],setup(t,{emit:e}){const n=t,{t:o,onClickInfo:s}=xM(n.layer,{emit:e}),f=ar(()=>o('Display informations for "{{layerName}}"',{ns:"client",layerName:a()}));function a(){return o(n.layer.name,{ns:"client"})}return(m,g)=>(Be(),tt("div",yV,[Fe("button",{class:"fa fa-info w-3",title:se(f),onClick:g[0]||(g[0]=(...b)=>se(s)&&se(s)(...b))},null,8,gV),Fe("span",vV,Wt(a()),1),t.showEditButton?(Be(),tt("button",{key:0,class:"fa fa-pencil","aria-label":se(o)("Open editor panel",{ns:"client"}),title:se(o)("Open editor panel",{ns:"client"}),onClick:g[1]||(g[1]=b=>m.$emit("clickEdit"))},null,8,_V)):Xe("v-if",!0)]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-manager/layer-item/layer-item-background.vue"]]),bV=["id"],wV=["aria-checked","title"],EV=["id","value","aria-label"],SV=["aria-checked","aria-label"],TV=lr(ir({__name:"layer-item-sub",props:{layer:{type:null,required:!0},isOpen:{type:Boolean,required:!0},isLayerComparatorOpen:{type:Boolean,required:!0},displayLayerComparatorOpen:{type:Boolean,required:!0}},emits:["changeOpacity","clickToggleLayerComparator"],setup(t,{emit:e}){var I,P,z,V;const n=t,{t:o}=En(),s=ka(),f=ar(()=>o(s.getLayerCurrentLabel(n.layer),{ns:"client"})),a=Ln(((P=(I=n.layer)==null?void 0:I.opacity)!=null?P:1)*100),m=Ln(((V=(z=n.layer)==null?void 0:z.previousOpacity)!=null?V:a.value)*100);function g(){a.value===0?a.value=m.value:(m.value=a.value,a.value=0),M()}function b(q){q.target&&(a.value=parseInt(q.target.value),M())}function E(){e("clickToggleLayerComparator",n.layer)}function M(){e("changeOpacity",n.layer,a.value)}return(q,re)=>(Be(),tt("div",{class:Rr(["lux-layer-manager-item-content",t.isOpen?"h-6":"h-0"]),id:`layer-manager-item-content-${t.layer.id}`},[Fe("button",{class:Rr(["w-5 fa-solid",se(a)===0?"fa-eye-slash":"fa-eye"]),role:"switch","aria-checked":se(a)===0,title:se(o)("Toggle layer opacity for {{layerName}}",{layerName:se(f)}),onClick:g},null,10,wV),Fe("input",{id:`${t.layer.id}-steps-range`,type:"range",min:"0",max:"100",value:se(a),step:"25",onChange:b,class:"m-2.5 w-16 h-[5px] rounded-lg appearance-none cursor-pointer","aria-label":se(o)("Change opacity for {{ layerName }}",{layerName:se(f)})},null,40,EV),t.displayLayerComparatorOpen?(Be(),tt("button",{key:0,role:"switch",class:Rr(["fa ml-auto text-sm cursor-pointer",t.isLayerComparatorOpen?"fa-adjust":"fa-circle"]),"aria-checked":t.isLayerComparatorOpen,"aria-label":se(o)("Toggle layer comparator for {{ layerName }}",{layerName:se(f)}),onClick:E},null,10,SV)):Xe("v-if",!0)],10,bV))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-manager/layer-item/layer-item-sub.vue"]]),MV=["min","max","value"],M1=lr(ir({__name:"layer-time-datepicker",props:{minDateAllowed:{type:String,required:!1,default:""},maxDateAllowed:{type:String,required:!1,default:""},dateValue:{type:String,required:!1}},emits:["change"],setup(t,{emit:e}){const n=t,o=ar(()=>R0(n.minDateAllowed)),s=ar(()=>R0(n.maxDateAllowed));function f(a){e("change",a.target.value)}return(a,m)=>(Be(),tt("input",{class:"lux-time-datepicker",type:"date",min:se(o),max:se(s),value:t.dateValue?se(R0)(t.dateValue):"",onChange:f},null,40,MV))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-manager/layer-time/layer-time-datepicker.vue"]]),IV={class:"lux-time-slider w-full"},OV=["for"],CV=lr(ir({__name:"layer-time-datepicker-value",props:{layer:{type:null,required:!0}},emits:["changeTime"],setup(t){const e=t,{t:n}=En(),o=Ln(e.layer.currentTimeMinValue);return(s,f)=>{var a,m;return Be(),tt("div",IV,[Fe("div",null,[Fe("label",{for:`${t.layer.id}-time-slider-start`,class:"lux-time-slider-label"},Wt(se(n)("Date:")),9,OV),kt(M1,{id:`${t.layer.id}-time-slider-start`,"date-value":se(o),"min-date-allowed":(a=e.layer.time)==null?void 0:a.minValue,"max-date-allowed":(m=e.layer.time)==null?void 0:m.maxValue,onChange:f[0]||(f[0]=g=>s.$emit("changeTime",g))},null,8,["id","date-value","min-date-allowed","max-date-allowed"])])])}}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-manager/layer-time/layer-time-datepicker-value.vue"]]),AV={class:"lux-time-slider w-full"},PV=["for"],kV=["for"],LV=lr(ir({__name:"layer-time-datepicker-range",props:{layer:{type:null,required:!0}},emits:["changeTime"],setup(t,{emit:e}){const n=t,{t:o}=En(),s=Ln(n.layer.currentTimeMinValue),f=Ln(n.layer.currentTimeMaxValue);function a(g){e("changeTime",g,n.layer.currentTimeMaxValue)}function m(g){e("changeTime",n.layer.currentTimeMinValue,g)}return(g,b)=>{var E,M,I,P;return Be(),tt("div",AV,[Xe(" Date START datepicker input "),Fe("div",null,[Fe("label",{for:`${t.layer.id}-time-slider-start`,class:"lux-time-slider-label"},Wt(se(o)("From:")),9,PV),kt(M1,{id:`${t.layer.id}-time-slider-start`,"date-value":se(s),"min-date-allowed":(E=n.layer.time)==null?void 0:E.minValue,"max-date-allowed":(M=n.layer.time)==null?void 0:M.maxValue,onChange:a},null,8,["id","date-value","min-date-allowed","max-date-allowed"])]),Xe(" Date END datepicker input "),Fe("div",null,[Fe("label",{for:`${t.layer.id}-time-slider-end`,class:"lux-time-slider-label"},Wt(se(o)("To:")),9,kV),kt(M1,{id:`${t.layer.id}-time-slider-end`,"date-value":se(f),"min-date-allowed":(I=n.layer.time)==null?void 0:I.minValue,"max-date-allowed":(P=n.layer.time)==null?void 0:P.maxValue,onChange:m},null,8,["id","date-value","min-date-allowed","max-date-allowed"])])])}}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-manager/layer-time/layer-time-datepicker-range.vue"]]),DV=["onKeydown","aria-label","title"],bM=lr(ir({__name:"slider-range-thumb",props:{ariaLabel:{type:String,required:!1},maxLimit:{type:Number,required:!1,default:100},minLimit:{type:Number,required:!1,default:0},selectedValue:{type:Number,required:!0}},emits:["change"],setup(t,{emit:e}){const n=t,o=br(!1),s=br(),f=br(),a=ar(()=>{var X;return((X=s.value)==null?void 0:X.offsetWidth)||0}),m=ar(()=>{var X;return((X=f.value)==null?void 0:X.offsetWidth)||40}),g=br(n.selectedValue),b=ar(()=>a.value*g.value/100-m.value/2),E=ar(()=>({left:`${b.value}px`}));lu(()=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",q)}),Tn(()=>n.selectedValue,X=>{g.value=X});function M(X){g.value=Math.max(Math.min(X,100),0),e("change",g.value,o.value)}function I(){M(g.value-1)}function P(){M(g.value+1)}function z(){o.value=!0,document.addEventListener("mousemove",V),document.addEventListener("mouseup",q)}function V(X){!o.value||M(re(X))}function q(X){o.value=!1,M(re(X)),document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",q)}function re(X){var ce,ve;const ae=(ce=s.value)!=null&&ce.offsetWidth?(X.clientX-m.value*2)*100/((ve=s.value)==null?void 0:ve.offsetWidth):0;return Math.round(Math.max(Math.min(ae,n.maxLimit),n.minLimit))}return(X,ae)=>(Be(),tt("div",{class:"w-full",role:"slider",ref_key:"elRefTrack",ref:s},[Fe("button",{class:Rr(["lux-slidebar-thumb",o.value?"dragging":""]),ref_key:"elRefThumb",ref:f,style:eu(se(E)),onKeydown:[Es(ws(P,["stop"]),["space"]),Es(ws(P,["stop"]),["right"]),Es(ws(I,["stop"]),["left"]),Es(ws(I,["stop"]),["delete"])],onMousedown:z,onMousemove:V,onMouseup:q,"aria-label":t.ariaLabel,title:t.ariaLabel},null,46,DV)],512))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/common/slider-range/slider-range-thumb.vue"]]),NV=lr(ir({__name:"slider-range-active-track",props:{selectedMinValue:{type:Number,required:!0},selectedMaxValue:{type:Number,required:!1}},emits:["change"],setup(t,{emit:e}){const n=t,o=br(),s=br(),f=ar(()=>o.value?Math.round(o.value.offsetWidth*n.selectedMinValue/100):0),a=ar(()=>{var E,M;let b=0;return n.selectedMaxValue!==void 0&&((E=o.value)==null?void 0:E.offsetWidth)&&(b=((M=o.value)==null?void 0:M.offsetWidth)*n.selectedMaxValue/100-f.value),Math.round(b)}),m=ar(()=>({left:`${f.value}px`,width:`${a.value}px`}));function g(b){if(o.value){const E=o.value.getBoundingClientRect().x,M=(b.clientX-E)*100/o.value.offsetWidth;e("change",M)}}return(b,E)=>(Be(),tt("div",{ref_key:"elRefFullTrack",ref:o,class:"lux-slidebar-track"},[t.selectedMaxValue!==void 0?(Be(),tt("div",{key:0,ref_key:"elRefSelectionTrack",ref:s,class:"lux-slidebar-track-selection",style:eu(se(m)),onClick:g},null,4)):Xe("v-if",!0),Fe("div",{class:"lux-slidebar-track-full",onClick:g})],512))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/common/slider-range/slider-range-active-track.vue"]]),RV={class:"lux-slidebar-fake"},wM=lr(ir({__name:"slider-range",props:{selectedMinValue:{type:Number,required:!0},selectedMaxValue:{type:Number,required:!1},ariaLabelMin:{type:String,required:!1},ariaLabelMax:{type:String,required:!1}},emits:["change"],setup(t,{emit:e}){const n=t,o=br(n.selectedMinValue),s=br(n.selectedMaxValue);function f(g,b){e("change",g,n.selectedMaxValue,b)}function a(g,b){e("change",n.selectedMinValue,g,b)}function m(g){s.value===void 0?o.value=g:g>=s.value?s.value=g:g<=n.selectedMinValue?o.value=g:Math.abs(s.value-g)<Math.abs(o.value-g)?s.value=g:o.value=g,e("change",o.value,s.value,!1)}return(g,b)=>(Be(),tt("div",RV,[Xe(" Draggable Max thumb button "),s.value!==void 0?(Be(),tn(bM,{key:0,ariaLabel:t.ariaLabelMax,minLimit:t.selectedMinValue,selectedValue:s.value,onChange:a},null,8,["ariaLabel","minLimit","selectedValue"])):Xe("v-if",!0),Xe(" Draggable Min thumb button "),Xe(" put Min value after Max value, this is just for z-index grabbing "),kt(bM,{ariaLabel:t.ariaLabelMin,maxLimit:t.selectedMaxValue,selectedValue:o.value,onChange:f},null,8,["ariaLabel","maxLimit","selectedValue"]),Xe(" Selection highlight "),kt(NV,{selectedMinValue:t.selectedMinValue,selectedMaxValue:t.selectedMaxValue,onChange:m},null,8,["selectedMinValue","selectedMaxValue"])]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/common/slider-range/slider-range.vue"]]),zV={class:"lux-time-slider w-full"},FV={key:0,class:"lux-time-slider-value mr-1.5"},BV={key:1,class:"lux-time-slider-range mr-1.5"},VV={class:"lux-time-displayed-dates"},UV={key:0,class:"lux-time-start-date grow"},jV={key:1,class:"lux-time-slider-end-date grow text-right"},$V=lr(ir({__name:"layer-time-slider",props:{layer:{type:null,required:!0}},emits:["changeTime"],setup(t,{emit:e}){const n=t,{t:o}=En(),s=ar(V),f=ar(()=>{var ae,ce;return(ae=n.layer.time)!=null&&ae.minValue?new Date((ce=n.layer.time)==null?void 0:ce.minValue).getTime():0}),a=ar(()=>{var ae,ce;return(ae=n.layer.time)!=null&&ae.maxValue?new Date((ce=n.layer.time)==null?void 0:ce.maxValue).getTime():0}),m=ar(()=>a.value-f.value),g=br(n.layer.currentTimeMaxValue),b=br(n.layer.currentTimeMinValue),E=ar(()=>b.value?new Date(b.value).getTime():void 0),M=ar(()=>g.value?new Date(g.value).getTime():void 0),I=ar(()=>z(E.value)),P=ar(()=>z(M.value));function z(ae){return ae?(ae-f.value)/m.value*100:0}function V(){var Ie,Ke;const ae=n.layer.time,ce=[];if(!ae)return;if(ae.values)return ae.values.map(Ge=>new Date(Ge).getTime());const ve=new Date(ae.minValue),Ne=new Date((Ie=ae.maxValue)!=null?Ie:Date.now()),ze=1024,Pe=new Date(ve.getTime()),Se=(Ke=ae.interval)!=null?Ke:QS;if(Pe.setFullYear(ve.getFullYear()+ze*Se[0]),Pe.setMonth(ve.getMonth()+ze*Se[1],ve.getDate()+ze*Se[2]),Pe.setSeconds(ve.getSeconds()+ze*Se[3]),Pe>Ne)for(let Ge=0;;Ge++){const st=new Date(ve.getTime());if(st.setFullYear(ve.getFullYear()+Ge*Se[0]),st.setMonth(ve.getMonth()+Ge*Se[1],ve.getDate()+Ge*Se[2]),st.setSeconds(ve.getSeconds()+Ge*Se[3]),st<=Ne)ce.push(st.getTime());else break}return ce}function q(ae){var Ne;const ce=ae/100*(a.value-f.value)+f.value,ve=Pz(ce,{minValue:f.value,maxValue:a.value,timeValueList:s.value,timeInterval:(Ne=n.layer.time)==null?void 0:Ne.interval});return N0(ve)}function re(ae,ce){const ve=q(ae);if(b.value=ve,ce){const Ne=q(ce);g.value=Ne}}function X(ae,ce,ve){re(ae,ce),ve||e("changeTime",b.value,g.value)}return(ae,ce)=>{var ve,Ne,ze,Pe,Se,Ie,Ke;return Be(),tt("div",zV,[Xe(" Slider LayerTimeMode.VALUE "),((ve=t.layer.time)==null?void 0:ve.mode)===se(vl).VALUE?(Be(),tt("div",FV,[kt(wM,{ariaLabelMin:`${se(o)("Modifier la date de d\xE9but",{ns:"client"})}`,selectedMinValue:se(I),onChange:X},null,8,["ariaLabelMin","selectedMinValue"])])):Xe("v-if",!0),Xe(" Slider LayerTimeMode.RANGE "),((Ne=t.layer.time)==null?void 0:Ne.mode)===se(vl).RANGE?(Be(),tt("div",BV,[kt(wM,{ariaLabelMin:`${se(o)("Modifier la date de d\xE9but",{ns:"client"})}`,ariaLabelMax:`${se(o)("Modifier la date de fin",{ns:"client"})}`,selectedMinValue:se(I),selectedMaxValue:se(P),onChange:X},null,8,["ariaLabelMin","ariaLabelMax","selectedMinValue","selectedMaxValue"])])):Xe("v-if",!0),Xe(" Display localized time values "),Fe("div",VV,[Xe(" Display localized time values Min value "),((ze=t.layer.time)==null?void 0:ze.mode)===se(vl).RANGE||((Pe=t.layer.time)==null?void 0:Pe.mode)===se(vl).VALUE?(Be(),tt("div",UV,[Fe("span",null,Wt(b.value?se(eT)(b.value,(Se=t.layer.time)==null?void 0:Se.resolution):"-"),1)])):Xe("v-if",!0),Xe(" Display localized time values Max value "),((Ie=t.layer.time)==null?void 0:Ie.mode)===se(vl).RANGE?(Be(),tt("div",jV,[Fe("span",null,Wt(g.value?se(eT)(g.value,(Ke=t.layer.time)==null?void 0:Ke.resolution):"-"),1)])):Xe("v-if",!0)])])}}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-manager/layer-time/layer-time-slider.vue"]]),GV=lr(ir({__name:"layer-time",props:{layer:{type:null,required:!0}},emits:["changeTime"],setup(t,{emit:e}){function n(o,s){e("changeTime",o,s)}return(o,s)=>{var f,a,m,g,b;return Be(),tt(en,null,[Xe(" Layer time: slider widget "),((f=t.layer.time)==null?void 0:f.widget)===se(Ay).SLIDER?(Be(),tn($V,{key:0,layer:t.layer,onChangeTime:n},null,8,["layer"])):Xe("v-if",!0),Xe(" Layer time: datepicker VALUE (one date) widget "),((a=t.layer.time)==null?void 0:a.widget)===se(Ay).DATEPICKER&&((m=t.layer.time)==null?void 0:m.mode)===se(vl).VALUE?(Be(),tn(CV,{key:1,layer:t.layer,onChangeTime:n},null,8,["layer"])):Xe("v-if",!0),Xe(' Layer time: datepicker RANGE ("from:" date - "to:" date) widget '),((g=t.layer.time)==null?void 0:g.widget)===se(Ay).DATEPICKER&&((b=t.layer.time)==null?void 0:b.mode)===se(vl).RANGE?(Be(),tn(LV,{key:2,layer:t.layer,onChangeTime:n},null,8,["layer"])):Xe("v-if",!0)],64)}}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-manager/layer-time/layer-time.vue"]]),qV={class:"lux-layer-manager-item relative"},WV={class:"w-full flex flex-nowrap items-start gap-x-2"},HV=["title"],ZV=["aria-label","title"],XV=["aria-expanded","aria-controls","data-cy"],KV={class:"grow"},YV=["title","aria-label"],EM=lr(ir({__name:"layer-item",props:{is3d:{type:Boolean,required:!0},layer:{type:null,required:!0},dragHandleClassName:{type:String,required:!0},isOpen:{type:Boolean,required:!0},isLayerComparatorOpen:{type:Boolean,required:!0},displayLayerComparatorOpen:{type:Boolean,required:!0}},emits:["clickInfo","clickToggle","clickToggleLayerComparator","clickRemove","changeOpacity","changeTime"],setup(t,{emit:e}){const n=t,{t:o,onClickInfo:s}=xM(n.layer,{emit:e}),f=ka(),a=ar(()=>o(f.getLayerCurrentLabel(n.layer),{ns:"client"})),m=ar(()=>o('Sort "{{layerName}}" in the list',{ns:"client",layerName:a.value})),g=ar(()=>o('Display informations for "{{layerName}}"',{ns:"client",layerName:a.value})),b=ar(()=>o('Remove layer "{{layerName}}"',{ns:"client",layerName:a.value}));function E(M,I){e("changeTime",M,I)}return(M,I)=>(Be(),tt("div",qV,[Fe("div",WV,[Fe("button",{class:Rr(["fa-solid fa-bars cursor-move mt-1",t.dragHandleClassName]),title:se(m)},null,10,HV),Fe("button",{class:"fa-solid fa-info mt-1","aria-label":se(g),title:se(g),onClick:I[0]||(I[0]=(...P)=>se(s)&&se(s)(...P))},null,8,ZV),Fe("button",{"aria-expanded":t.isOpen,"aria-controls":`layer-manager-item-content-${t.layer.id}`,"data-cy":`myLayerItemLabel-${t.layer.id}`,class:Rr([t.is3d?"cursor-default":"","grow text-left break-words w-[70%] flex items-center"]),onClick:I[1]||(I[1]=P=>M.$emit("clickToggle",t.layer))},[Fe("span",KV,Wt(se(a)),1),t.is3d?Xe("v-if",!0):(Be(),tt("span",{key:0,class:Rr(["w-3.5 fa-solid",t.isOpen?"fa-xmark":"fa-ellipsis"]),"aria-hidden":"true"},null,2))],10,XV),Fe("button",{class:"mt-1 fa-regular fa-trash-can",title:se(b),"aria-label":se(b),onClick:I[2]||(I[2]=P=>M.$emit("clickRemove",t.layer))},null,8,YV)]),Xe(" Layer item sub content (opacity and toggle comparator) "),t.is3d?Xe("v-if",!0):(Be(),tn(TV,{key:0,layer:t.layer,isOpen:t.isOpen,isLayerComparatorOpen:t.isLayerComparatorOpen,displayLayerComparatorOpen:t.displayLayerComparatorOpen,onClickToggleLayerComparator:I[3]||(I[3]=P=>M.$emit("clickToggleLayerComparator",P)),onChangeOpacity:I[4]||(I[4]=(P,z)=>M.$emit("changeOpacity",P,z))},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen"])),Xe(" Layer time: slider OR datepicker widgets "),t.layer.time?(Be(),tn(GV,{key:1,layer:t.layer,onChangeTime:E},null,8,["layer"])):Xe("v-if",!0)]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-manager/layer-item/layer-item.vue"]]),JV={key:0,class:"mb-4 sortable-layers-3d"},QV=["id"],eU={class:"sortable-layers"},tU=["id"],rU={class:"flex flex-row justify-center space-x-1 my-2"},nU=lr(ir({__name:"layer-manager",emits:["displayCatalog"],setup(t,{emit:e}){const{t:n}=En(),{setMetadataId:o}=W0(),s=ui(),f=vi(),a=Cc(),m=Ig(),{bgLayer:g}=rn(s),{sliderActive:b}=rn(m),E=ar(()=>[...s.layers].reverse()),M=ar(()=>[...s.layers3d].reverse()),I=Ln(),P="drag-handle",z=ar(()=>a.isLayerStyleEditable(g.value)),{setRemoteLayersOpen:V}=vi();ua(()=>{const Pe={dragClass:"lux-sortable-drag",ghostClass:"lux-sortable-ghost",sort:!0,handle:`.${P}`,forceFallback:Bz},Se=document.querySelector(".sortable-layers"),Ie=document.querySelector(".sortable-layers-3d");Se&&cr.create(Se,{...Pe,onSort:q}),Ie&&cr.create(Ie,{...Pe,onSort:re})});function q(Pe,Se){const Ie=[...Pe.to.children].map(Ke=>Number(Ke.id)).reverse();s.reorderLayers(Ie,Se)}function re(Pe){q(Pe,!0)}function X(Pe,Se){s.setLayerOpacity(Pe.id,Se/100)}function ae(Pe,Se,Ie){s.setLayerTime(Pe.id,Se,Ie)}function ce(Pe){s.removeLayers(Pe.id)}function ve(Pe){I.value=I.value!==Pe.id?Pe.id:void 0}function Ne(){f.openStyleEditorPanel()}function ze(){m.toggleSlider()}return(Pe,Se)=>(Be(),tt("div",null,[se(M).length>0?(Be(),tt("ul",JV,[(Be(!0),tt(en,null,Ta(se(M),(Ie,Ke)=>(Be(),tt("li",{key:Ie.id,id:Ie.id},[kt(EM,{is3d:!0,dragHandleClassName:P,layer:Ie,isOpen:se(I)===Ie.id,isLayerComparatorOpen:se(b),displayLayerComparatorOpen:Ke===0,onClickRemove:ce,onClickToggle:ve,onClickToggleLayerComparator:ze,onClickInfo:Ge=>se(o)(Ie.id),onChangeOpacity:X,onChangeTime:(Ge,st)=>ae(Ie,Ge,st)},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen","onClickInfo","onChangeTime"])],8,QV))),128))])):Xe("v-if",!0),Fe("ul",eU,[(Be(!0),tt(en,null,Ta(se(E),(Ie,Ke)=>(Be(),tt("li",{key:Ie.id,id:Ie.id},[kt(EM,{is3d:!1,dragHandleClassName:P,layer:Ie,isOpen:se(I)===Ie.id,isLayerComparatorOpen:se(b),displayLayerComparatorOpen:Ke===0,onClickRemove:ce,onClickToggle:ve,onClickToggleLayerComparator:ze,onClickInfo:Ge=>se(o)(Ie.id),onChangeOpacity:X,onChangeTime:(Ge,st)=>ae(Ie,Ge,st)},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen","onClickInfo","onChangeTime"])],8,tU))),128))]),kt(xV,{layer:se(g)||se(ig),showEditButton:se(z),onClickInfo:Se[0]||(Se[0]=()=>se(g)&&se(o)(se(g).id)),onClickEdit:Ne},null,8,["layer","showEditButton"]),Fe("div",rU,[Fe("button",{class:"bg-white text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:Se[1]||(Se[1]=Ie=>e("displayCatalog"))},Wt(se(n)("+ Add layers",{ns:"client"})),1),Fe("button",{class:"bg-white text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:Se[2]||(Se[2]=Ie=>se(V)(!0))},Wt(se(n)("+ Add external Wms",{ns:"client"})),1)])]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-manager/layer-manager.vue"]]),iU={class:"flex flex-col h-full pt-1.5"},oU={class:"h-16 shrink-0 flex justify-between lux-panel-title"},aU=["aria-label"],sU={class:"flex flex-row gap-2 h-10 text-2xl"},lU=["aria-expanded"],uU={key:0},cU=["aria-expanded"],hU={class:"relative grow p-2.5 bg-primary overflow-auto"},SM=lr(ir({__name:"layer-panel",setup(t){const{t:e}=En(),n=vi(),{setLayersOpen:o}=n,{myLayersTabOpen:s}=rn(n),{layers:f}=rn(ui());function a(){n.setMyLayersTabOpen(!0)}function m(){n.setMyLayersTabOpen(!1)}return(g,b)=>(Be(),tt("div",iU,[Xe(" Panel title and close button "),Fe("div",oU,[Fe("h1",null,Wt(se(e)("layers",{ns:"client"})),1),Fe("span",null,[Fe("button",{onClick:b[0]||(b[0]=()=>se(o)(!1)),"aria-label":se(e)("Close",{ns:"client"}),class:"fa-sharp fa-solid fa-close"},null,8,aU)])]),Xe(" My Layers and Catalog tab labels "),Fe("div",sU,[Fe("button",{onClick:a,class:Rr(["text-white px-4 hover:bg-primary cursor-pointer text-center uppercase",se(s)?"bg-primary":"bg-tertiary"]),"aria-expanded":se(s)},[Xm(Wt(se(e)("my_layers",{ns:"client"}))+" ",1),se(f).length?(Be(),tt("span",uU,"("+Wt(se(f).length)+")",1)):Xe("v-if",!0)],10,lU),Fe("button",{onClick:m,class:Rr(["text-white px-4 hover:bg-primary cursor-pointer text-center uppercase",se(s)?"bg-tertiary":"bg-primary"]),"aria-expanded":!se(s)},Wt(se(e)("Catalog",{ns:"client"})),11,cU)]),Xe(" Panel content (MyLayers and Catalog) "),Fe("div",hU,[se(s)?(Be(),tn(nU,{key:0,onDisplayCatalog:m})):Xe("v-if",!0),se(s)?Xe("v-if",!0):(Be(),tn(j8,{key:1}))])]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/layer-panel/layer-panel.vue"]]);class fU{bootstrap(){let e;e=la(()=>{this.restore(),this.persist(),e&&e()})}persist(){const e=Ig();Tn([()=>e.sliderActive,()=>e.sliderRatio],([n,o],[s])=>{n!==s&&Or.setValue(B0,n),Or.setValue(V0,o)})}restore(){const e=Or.getValue(B0,z0),n=Or.getValue(V0,Wh),{toggleSlider:o,setRatio:s}=Ig();typeof e<"u"&&e!==null&&(o(e),typeof n!==void 0&&n!==null&&s(n!=null?n:_M))}}const pU=new fU,dU=["onKeydown"],mU=Fe("span",{class:"lux-slider-line"},null,-1),yU=Fe("span",{class:"lux-slider-arrows"},[Fe("span"),Fe("span")],-1),gU={key:0,class:"lux-slider-layer-label"},vU=Fe("i",{class:"fa fa-arrow-left mr-2"},null,-1),_U=lr(ir({__name:"splitter-element",props:{sliderActive:{type:Boolean,required:!0},sliderRatio:{type:Number,required:!0},sliderTopLayer:{type:null,required:!0},sliderOffset:{type:Number,required:!0},containerOffset:{type:Number,required:!0}},emits:["moveSplitBar","escSplitBar"],setup(t,{expose:e,emit:n}){const o=t,s=30,{t:f}=En(),a=br(null),m=ar(()=>({left:`${o.sliderOffset}px`}));let g=!1;e({sliderElement:a});function b(q){n("moveSplitBar",q+a.value.offsetWidth/2)}function E(){g=!0,document.addEventListener("mousemove",M),document.addEventListener("mouseup",I)}function M(q){!g||b(q.clientX)}function I(){g=!1,document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",I)}function P(){const q=o.containerOffset+a.value.offsetLeft;b(q+s)}function z(){const q=o.containerOffset+a.value.offsetLeft;b(q-s)}function V(){n("escSplitBar")}return ua(()=>{var q;(q=a.value)==null||q.focus({focusVisible:!0})}),lu(()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",I)}),(q,re)=>(Be(),tt("button",{ref_key:"sliderElement",ref:a,onMousedown:E,onMousemove:M,onMouseup:I,onKeydown:[Es(ws(P,["stop"]),["space"]),Es(ws(P,["stop"]),["right"]),Es(ws(z,["stop"]),["left"]),Es(ws(z,["stop"]),["delete"]),Es(ws(V,["stop"]),["esc"])],class:"left-[20px] absolute h-full w-[32px] block",style:eu(se(m)),role:"seperator","aria-controls":"map-container"},[mU,yU,t.sliderTopLayer?(Be(),tt("span",gU,[vU,Fe("span",null,Wt(se(f)(t.sliderTopLayer.name)),1)])):Xe("v-if",!0)],44,dU))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/slider/splitter-element.vue"]]),TM=lr(ir({__name:"slider-comparator",setup(t){const e=Ig(),n=G0(),o=Os().olMap,s=br(null),{sliderActive:f,sliderRatio:a,sliderTopLayer:m}=rn(e),g=ar(()=>{var X,ae;return((ae=(X=s.value)==null?void 0:X.sliderElement)==null?void 0:ae.offsetWidth)||0}),b=function(){var ae,ce,ve;let X=(ve=(ce=(ae=o.value)==null?void 0:ae.getViewport())==null?void 0:ce.parentElement)==null?void 0:ve.offsetLeft;return(X===void 0||X===0)&&(X=P==null?void 0:P.offsetLeft),X!==void 0?X:0},E=ar(()=>{var X,ae;return o.value&&s.value?a.value*o.value.getSize()[0]-((ae=(X=s.value)==null?void 0:X.sliderElement)==null?void 0:ae.offsetWidth)/2:0});let M,I,P;pU.bootstrap(),Tn([m,f],([X,ae],[ce])=>{var ve;X&&ae?(X!==ce&&V(),z()):V(),(ve=o.value)==null||ve.render()}),Tn(E,()=>{var X;(X=o.value)==null||X.render()});function z(){const X=n.getLayerFromCache(m.value);!X||(M=X.on(Ox.default.PRERENDER,function(ae){var Ke;const ce=ae.context,ve=(Ke=o.value)==null?void 0:Ke.getSize(),Ne=E.value+g.value/2,ze=fm.getRenderPixel(ae,[0,0]),Pe=fm.getRenderPixel(ae,[Ne,0]),Se=fm.getRenderPixel(ae,[0,ve[1]]),Ie=fm.getRenderPixel(ae,[Ne,ve[0]]);ce.save(),ce.beginPath(),ce.moveTo(ze[0],ze[1]),ce.lineTo(Se[0],Se[1]),ce.lineTo(Ie[0],Ie[1]),ce.lineTo(Pe[0],Pe[1]),ce.closePath(),ce.clip()}),I=X.on(Ox.default.POSTRENDER,function(ae){ae.context.restore()}))}function V(){CO.unByKey([M,I])}function q(X){var ve;const ae=(ve=o.value)==null?void 0:ve.getSize(),ce=(X-b())/ae[0];e.setRatio(ce)}function re(){e.toggleSlider()}return ua(()=>{var X,ae;P=(ae=(X=o.value)==null?void 0:X.getTargetElement())==null?void 0:ae.closest(".map-wrapper")}),lu(()=>{V()}),(X,ae)=>se(m)&&se(f)?(Be(),tn(_U,{key:0,ref_key:"splitterElement",ref:s,sliderActive:se(f),sliderRatio:se(a),sliderTopLayer:se(m),sliderOffset:se(E),containerOffset:b(),onMoveSplitBar:q,onEscSplitBar:re},null,8,["sliderActive","sliderRatio","sliderTopLayer","sliderOffset","containerOffset"])):Xe("v-if",!0)}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/slider/slider-comparator.vue"]]),Og="-",I1=",",MM="--";class xU{constructor(){ai(this,"layersOpacitiesToNumbersV2",e=>this.layersOpacitiesToNumbers(e,I1))}layerTimesToStrings(e){return e?e.split(MM):[]}layerIdsToLayers(e){const n=Su(),o=ka();return(e?e.split(Og):[]).map(f=>{const a=td.isRemoteLayer(f)?iF(f):n.findById(parseInt(f,10));return a?o.initLayer(a):void 0})}layerNamesToLayersV2(e){const n=Su(),o=ka();return(e?e.split(I1):[]).map(f=>{const a=n.findByName(f);return a?o.initLayer(a):void 0})}layersOpacitiesToNumbers(e,n=Og){return zz(e,n)}layersVisibilitiesToBooleansV2(e){return Fz(e,I1)}layersToLayerIds(e){return(e==null?void 0:e.map(n=>n.id).join(Og))||""}layersToLayerOpacities(e){return(e==null?void 0:e.map(n=>{var o;return(o=n.opacity)!=null?o:1}).join(Og))||""}layersToLayerTimes(e){return(e==null?void 0:e.map(n=>{var o;return(o=ka().getLayerCurrentTime(n))!=null?o:""}).join(MM))||""}bgLayerNameToBgLayer(e){const n=Su();return e?n.findBgLayerByName(e):null}bgLayerToBgLayerName(e){return(e==null?void 0:e.name)||ig.name}}const da=new xU,bU="basemap_2015_global",wU="orthogr_2013_global",EU={webbasemap:"basemap_2015_global","pixelmaps-color":"topogr_global","pixelmaps-gray":"topo_bw_jpeg",streets:"streets_jpeg",voidlayer:"blank"};class SU{bootstrap(){const e=yo();let n;n=la(()=>{e.bgLayers.length>0&&(this.restore(),this.persist(),n&&n())})}persist(){const e=ui(),{bgLayer:n}=rn(e);Tn(n,(o,s)=>{s!==o&&Or.setValue(oT,o,da.bgLayerToBgLayerName)},{immediate:!0})}restore(){const{setMapBackground:e}=q0(),n=this.getBgLayerFromStorage();e(n)}getBgLayerFromStorage(){const e=Or.getInitialVersion(),n=Or.getValue(oT);return n?e===2?this.getBgLayerFromStorageV2(n):da.bgLayerNameToBgLayer(n):da.bgLayerNameToBgLayer(bU)}getBgLayerFromStorageV2(e){const n=Or.getValue(fT,Wh);let o="";return e?o=EU[e]:n===0&&(o=wU),da.bgLayerNameToBgLayer(o)}}const IM=new SU;class TU{bootstrap(){const e=yo();let n;n=la(()=>{e.themes&&(this.restore(),this.persist(),n&&n())})}persist(){const e=ui(),{layers:n}=rn(e);Tn(n,(o,s)=>{s!==o&&(Or.setValue(iT,o,da.layersToLayerIds),Or.setValue(aT,o,da.layersToLayerOpacities),Or.setValue(sT,o,da.layersToLayerTimes))},{immediate:!0})}restore(){const e=Or.getInitialVersion(),n=ui(),o=Or.getValue(iT,e===2?da.layerNamesToLayersV2:da.layerIdsToLayers);this.restoreLayersOpacities(o,e),this.restoreLayersTimes(o),e===2&&(Or.removeItem(fT),Or.removeItem(jz),Or.removeItem(pT),Or.removeItem(dT)),n.addLayers(...(o==null?void 0:o.filter(s=>s))||[])}restoreLayersOpacities(e,n){const o=n===2?this.getOpacitiesFromStorageV2():this.getOpacitiesFromStorage();o.length&&(e==null||e.forEach((s,f)=>{var a;return s&&(s.opacity=(a=o[f])!=null?a:1)}))}restoreLayersTimes(e){const n=Or.getValue(sT,da.layerTimesToStrings);n.length&&(e==null||e.forEach((o,s)=>o&&n[s]&&this.restoreLayerTime(o,n[s])))}restoreLayerTime(e,n){const o=n.split("/");e.currentTimeMinValue=o[0],e.currentTimeMaxValue=o[1]}getOpacitiesFromStorage(){return Or.getValue(aT,da.layersOpacitiesToNumbers)}getOpacitiesFromStorageV2(){const e=Or.getValue(pT,da.layersOpacitiesToNumbersV2),n=Or.getValue(dT,da.layersVisibilitiesToBooleansV2);return e.map((o,s)=>n[s]?o:0)}}const OM=new TU;class MU{themeToThemeName(e){return(e==null?void 0:e.name)||""}}const IU=new MU;class OU{bootstrap(){this.restore();let e;e=la(()=>{this.persist(),e&&e()})}persist(){const e=yo();Tn(()=>e.theme,(n,o)=>{o!==n&&n&&Or.setValue(Jp,n,IU.themeToThemeName)},{immediate:!0})}restore(){const e=Or.getValue(Jp);if(e){const{setTheme:n}=yo();n(e)}}}const CM=new OU;class CU{bootstrapLayersOpen(){this.restoreLayersOpen();let e;e=la(()=>{this.persistLayersOpen(),e&&e()})}persistLayersOpen(){const e=vi(),{layersOpen:n}=rn(e);Tn(n,(o,s)=>{s!==o&&Or.setValue(Yy,o)},{immediate:!0})}restoreLayersOpen(){const e=Or.getValue(Yy)!=="false",{setLayersOpen:n}=vi();n(e)}}const AM=new CU;class AU{bootstrap(){this.restore();let e;e=la(()=>{this.persist(),e&&e()})}persist(){}restore(){const e=Or.getValue(Vz);vi().setMapId(e)}}const PM=new AU,PU=lr(ir({__name:"simple-style-item",props:{styleName:{type:String,required:!0},colors:{type:Array,required:!0}},setup(t){const e=t;return(n,o)=>(Be(!0),tt(en,null,Ta(e.colors,(s,f)=>(Be(),tt("span",{key:`${t.styleName}-${f}`,class:"grow m-px",style:eu(`background-color: ${s}`)}," \xA0 ",4))),128))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/style-selector/simple-style-item.vue"]]),kU={class:"text-white border-2 p-[10px] m-[10px]"},LU={class:"text-center mb-3"},DU=["title"],NU={class:"text-white"},RU=["title","onClick"],zU={class:"flex"},FU=lr(ir({__name:"simple-style-selector",setup(t){const{t:e}=En(),n=os(),o=Cc(),{bgStyle:s}=rn(n),f=is().simple_styles.road,a=br(f);Tn(s,g=>a.value=o.checkSelection(g||[],f),{immediate:!0});function m(g){n.setSimpleStyle(g)}return(g,b)=>(Be(),tt("div",kU,[Xe(" TODO: create clean container for simple and advanced style editors "),Fe("h5",LU,Wt(se(e)("Select a style",{ns:"client"})),1),(Be(!0),tt(en,null,Ta(a.value,E=>(Be(),tt("div",{key:E.unlocalized_label,title:se(e)(E.unlocalized_label,{ns:"client"}),class:Rr(`${E.selected?"border-dotted":"border-hidden"} border-2 p-px`)},[Fe("span",NU,Wt(se(e)(E.unlocalized_label,{ns:"client"}))+" : ",1),Fe("button",{title:se(e)("Select style: {{styleName}}",{styleName:se(e)(E.unlocalized_label)}),onClick:M=>m(E),class:"w-full"},[Fe("span",zU,[kt(PU,{colors:E.colors,"style-name":E.unlocalized_label},null,8,["colors","style-name"])])],8,RU)],10,DU))),128))]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/style-selector/simple-style-selector.vue"]]);function BU(t){const e=VU(t);return!e||!e.medium_style_class?[]:is().medium_default_styles[e.medium_style_class]}function VU(t){return is().bg_layers.find(e=>e.id==(t==null?void 0:t.id))}const UU={class:"flex w-full items-center"},jU={for:"colorId",class:"w-40 m-0 font-medium"},$U={class:"grow"},GU=["value"],qU=["checked","aria-label"],WU=lr(ir({__name:"medium-style-item",props:{style:{type:null,required:!0},colorEditable:{type:Boolean,required:!0}},emits:["changeStyle"],setup(t,{emit:e}){const n=t,{t:o}=En();function s(a){if(a.target){const m={...n.style,color:a.target.value};e("changeStyle",m)}}function f(a){if(a){const m={...n.style,visible:a.target.checked};e("changeStyle",m)}}return(a,m)=>(Be(),tt("div",UU,[Fe("label",jU,Wt(se(o)(t.style.label)),1),Fe("div",$U,[t.colorEditable&&n.style.color?(Be(),tt("input",{key:0,id:"colorId",type:"color",class:"w-11 h-5 py-[1px] px-[2px]",value:n.style.color,onInput:s},null,40,GU)):Xe("v-if",!0)]),Fe("input",{type:"checkbox",class:"flex-none mr-3",checked:n.style.visible,onChange:f,"aria-label":se(o)("Show or hide {{ thematicName }}",{thematicName:n.style.label})},null,40,qU)]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/style-selector/medium-style-item.vue"]]),HU={class:"text-white border-2 p-[10px] m-[10px]"},ZU={class:"text-center mb-3"},XU=lr(ir({__name:"medium-style-selector",props:{layer:{type:null,required:!0}},setup(t){const e=t,n=["basemap_2015_global"],o=os(),{bgStyle:s}=rn(o),{t:f}=En(),a=ar(()=>n.includes(e.layer.name)),m=ar(()=>s.value||BU(e.layer));function g(b,E){s.value=m.value.map((M,I)=>I===b?E:M),o.disableExpertStyle()}return(b,E)=>(Be(),tt("div",HU,[Fe("h5",ZU,Wt(se(a)?se(f)("Select a colour for every theme"):se(f)("Activate categories")),1),(Be(!0),tt(en,null,Ta(se(m),(M,I)=>(Be(),tn(WU,{key:M.label,style:eu(M),onChangeStyle:P=>g(I,P),colorEditable:se(a)},null,8,["style","onChangeStyle","colorEditable"]))),128))]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/style-selector/medium-style-selector.vue"]]);var kM={exports:{}};(function(t,e){(function(n,o){o()})(Ns,function(){function n(b,E){return typeof E>"u"?E={autoBom:!1}:typeof E!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),E={autoBom:!E}),E.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob(["\uFEFF",b],{type:b.type}):b}function o(b,E,M){var I=new XMLHttpRequest;I.open("GET",b),I.responseType="blob",I.onload=function(){g(I.response,E,M)},I.onerror=function(){console.error("could not download file")},I.send()}function s(b){var E=new XMLHttpRequest;E.open("HEAD",b,!1);try{E.send()}catch{}return 200<=E.status&&299>=E.status}function f(b){try{b.dispatchEvent(new MouseEvent("click"))}catch{var E=document.createEvent("MouseEvents");E.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),b.dispatchEvent(E)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ns=="object"&&Ns.global===Ns?Ns:void 0,m=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(b,E,M){var I=a.URL||a.webkitURL,P=document.createElement("a");E=E||b.name||"download",P.download=E,P.rel="noopener",typeof b=="string"?(P.href=b,P.origin===location.origin?f(P):s(P.href)?o(b,E,M):f(P,P.target="_blank")):(P.href=I.createObjectURL(b),setTimeout(function(){I.revokeObjectURL(P.href)},4e4),setTimeout(function(){f(P)},0))}:"msSaveOrOpenBlob"in navigator?function(b,E,M){if(E=E||b.name||"download",typeof b!="string")navigator.msSaveOrOpenBlob(n(b,M),E);else if(s(b))o(b,E,M);else{var I=document.createElement("a");I.href=b,I.target="_blank",setTimeout(function(){f(I)})}}:function(b,E,M,I){if(I=I||open("","_blank"),I&&(I.document.title=I.document.body.innerText="downloading..."),typeof b=="string")return o(b,E,M);var P=b.type==="application/octet-stream",z=/constructor/i.test(a.HTMLElement)||a.safari,V=/CriOS\/[\d]+/.test(navigator.userAgent);if((V||P&&z||m)&&typeof FileReader<"u"){var q=new FileReader;q.onloadend=function(){var ae=q.result;ae=V?ae:ae.replace(/^data:[^;]*;/,"data:attachment/file;"),I?I.location.href=ae:location=ae,I=null},q.readAsDataURL(b)}else{var re=a.URL||a.webkitURL,X=re.createObjectURL(b);I?I.location=X:location.href=X,I=null,setTimeout(function(){re.revokeObjectURL(X)},4e4)}});a.saveAs=g.saveAs=g,t.exports=g})})(kM);const KU={class:"text-white border-2 p-[10px] m-[10px] flex flex-col"},YU={class:"text-center mb-3"},JU={class:"flex flex-row justify-center"},QU={class:"absolute top-[70px] w-full text-center text-base leading-3 font-medium text-white"},ej={class:"text-white border-2 relative h-[100px] w-[85px] mx-[10px] my-0 mb-[15px] text-sm"},tj={class:"'block z-[5] w-full h-full cursor-pointer after:absolute after:pt-[15px] after:px-[15px] after:w-full after:text-center after:content-upload",for:"uploadMvtStyle"},rj={class:"absolute top-[70px] w-full text-center text-base leading-3 font-medium"},nj=["href"],ij=lr(ir({__name:"expert-style-selector",setup(t){const e=ui(),n=os(),o=Cc(),{appliedStyle:s}=rn(n),{t:f}=En();function a(){const b=s.value,E=JSON.stringify(b),M=new Blob([E],{type:"text/plain;charset=utf-8"}),I="styles.json";kM.exports.saveAs(M,I)}function m(b){const E=b.target.files;if((E==null?void 0:E.length)!==1)return;const M=E[0];new File([],"./text.txt").text().then(P=>console.log(P)),M.type==="application/json"&&(M.text().then(P=>{n.enableExpertStyle(),s.value=JSON.parse(P)}),b.target.value="")}function g(){return n.styleSerial===null?o.getDefaultMapBoxStyleUrl(o.getVectorId(e.bgLayer)):`${n.registerUrls.get("get")}?id=${n.styleSerial}`}return(b,E)=>(Be(),tt("div",KU,[Fe("h5",YU,Wt(se(f)("Lancer \xE9diteur externe ou importer json")),1),Fe("div",JU,[Fe("a",{href:"#",class:"text-white border-2 relative h-[100px] w-[85px] mx-[10px] my-0 mb-[15px] z-5 text-sm after:absolute after:left-[20px] after:top-[10px] after:z-4 after:w-[3.6em] after:text-center after:content-download",onClick:E[0]||(E[0]=M=>a())},[Fe("span",QU,Wt(se(f)("Download style")),1)]),Fe("div",ej,[Fe("label",tj,[Fe("span",rj,Wt(se(f)("Upload style")),1)]),Fe("input",{class:"invisible",type:"file",name:"uploadMvtStyle",id:"uploadMvtStyle",onChange:m},null,32)])]),Fe("a",{href:`https://maputnik.github.io/editor/?style=${g()}`,target:"_blank",class:"lux-btn text-center"},Wt(se(f)("Open Maputnik editor")),9,nj)]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/style-selector/expert-style-selector.vue"]]),oj={key:0},aj={key:0,class:"mb-px"},sj={key:1,class:"mb-px"},lj={key:2,class:"mb-px"},LM=lr(ir({__name:"style-selector",setup(t){const{t:e}=En(),n=ui(),o=vi(),s=os(),{bgStyle:f,isExpertStyleActive:a}=rn(s),{bgLayer:m}=rn(n),g=Cc(),b=ar(()=>g.getStyleCapabilitiesFromLayer(m.value));Tn(m,I=>{g.isLayerStyleEditable(I)||o.closeStyleEditorPanel()});let E=br(void 0);function M(){s.setStyle(null)}return(I,P)=>se(b).isEditable?(Be(),tt("div",oj,[se(b).hasSimpleStyle?(Be(),tt("div",aj,[kt(og,{title:se(e)("Simple"),expanded:se(E)==="simpleStyle",onTogglePanel:P[0]||(P[0]=()=>cn(E)?E.value=se(E)==="simpleStyle"?void 0:"simpleStyle":E=se(E)==="simpleStyle"?void 0:"simpleStyle")},{default:su(()=>[kt(FU)]),_:1},8,["title","expanded"])])):Xe("v-if",!0),se(b).hasAdvancedStyle?(Be(),tt("div",sj,[kt(og,{title:se(e)("Medium"),expanded:se(E)==="mediumStyle",onTogglePanel:P[1]||(P[1]=()=>cn(E)?E.value=se(E)==="mediumStyle"?void 0:"mediumStyle":E=se(E)==="mediumStyle"?void 0:"mediumStyle")},{default:su(()=>[se(m)?(Be(),tn(XU,{key:0,layer:se(m)},null,8,["layer"])):Xe("v-if",!0)]),_:1},8,["title","expanded"])])):Xe("v-if",!0),se(b).hasExpertStyle?(Be(),tt("div",lj,[kt(og,{title:se(e)("Expert (style.json)"),expanded:se(E)==="advancedStyle",onTogglePanel:P[2]||(P[2]=()=>cn(E)?E.value=se(E)==="advancedStyle"?void 0:"advancedStyle":E=se(E)==="advancedStyle"?void 0:"advancedStyle")},{default:su(()=>[se(m)?(Be(),tn(ij,{key:0,layer:se(m)},null,8,["layer"])):Xe("v-if",!0)]),_:1},8,["title","expanded"])])):Xe("v-if",!0),se(f)||se(a)?(Be(),tt("button",{key:3,onClick:M,class:"lux-btn my-2"},Wt(se(e)("Reset style",{ns:"client"})),1)):Xe("v-if",!0)])):Xe("v-if",!0)}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/components/style-selector/style-selector.vue"]]);function O1(t){return O1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O1(t)}var DM=[],uj=DM.forEach,cj=DM.slice;function C1(t){return uj.call(cj.call(arguments,1),function(e){if(e)for(var n in e)t[n]===void 0&&(t[n]=e[n])}),t}function NM(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":O1(XMLHttpRequest))==="object"}function hj(t){return!!t&&typeof t.then=="function"}function fj(t){return hj(t)?t:Promise.resolve(t)}function pj(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cg={exports:{}},Ag={exports:{}},RM;function dj(){return RM||(RM=1,function(t,e){var n=typeof self<"u"?self:Ns,o=function(){function f(){this.fetch=!1,this.DOMException=n.DOMException}return f.prototype=n,new f}();(function(f){(function(a){var m={searchParams:"URLSearchParams"in f,iterable:"Symbol"in f&&"iterator"in Symbol,blob:"FileReader"in f&&"Blob"in f&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in f,arrayBuffer:"ArrayBuffer"in f};function g(be){return be&&DataView.prototype.isPrototypeOf(be)}if(m.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],E=ArrayBuffer.isView||function(be){return be&&b.indexOf(Object.prototype.toString.call(be))>-1};function M(be){if(typeof be!="string"&&(be=String(be)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(be))throw new TypeError("Invalid character in header field name");return be.toLowerCase()}function I(be){return typeof be!="string"&&(be=String(be)),be}function P(be){var Je={next:function(){var ht=be.shift();return{done:ht===void 0,value:ht}}};return m.iterable&&(Je[Symbol.iterator]=function(){return Je}),Je}function z(be){this.map={},be instanceof z?be.forEach(function(Je,ht){this.append(ht,Je)},this):Array.isArray(be)?be.forEach(function(Je){this.append(Je[0],Je[1])},this):be&&Object.getOwnPropertyNames(be).forEach(function(Je){this.append(Je,be[Je])},this)}z.prototype.append=function(be,Je){be=M(be),Je=I(Je);var ht=this.map[be];this.map[be]=ht?ht+", "+Je:Je},z.prototype.delete=function(be){delete this.map[M(be)]},z.prototype.get=function(be){return be=M(be),this.has(be)?this.map[be]:null},z.prototype.has=function(be){return this.map.hasOwnProperty(M(be))},z.prototype.set=function(be,Je){this.map[M(be)]=I(Je)},z.prototype.forEach=function(be,Je){for(var ht in this.map)this.map.hasOwnProperty(ht)&&be.call(Je,this.map[ht],ht,this)},z.prototype.keys=function(){var be=[];return this.forEach(function(Je,ht){be.push(ht)}),P(be)},z.prototype.values=function(){var be=[];return this.forEach(function(Je){be.push(Je)}),P(be)},z.prototype.entries=function(){var be=[];return this.forEach(function(Je,ht){be.push([ht,Je])}),P(be)},m.iterable&&(z.prototype[Symbol.iterator]=z.prototype.entries);function V(be){if(be.bodyUsed)return Promise.reject(new TypeError("Already read"));be.bodyUsed=!0}function q(be){return new Promise(function(Je,ht){be.onload=function(){Je(be.result)},be.onerror=function(){ht(be.error)}})}function re(be){var Je=new FileReader,ht=q(Je);return Je.readAsArrayBuffer(be),ht}function X(be){var Je=new FileReader,ht=q(Je);return Je.readAsText(be),ht}function ae(be){for(var Je=new Uint8Array(be),ht=new Array(Je.length),vt=0;vt<Je.length;vt++)ht[vt]=String.fromCharCode(Je[vt]);return ht.join("")}function ce(be){if(be.slice)return be.slice(0);var Je=new Uint8Array(be.byteLength);return Je.set(new Uint8Array(be)),Je.buffer}function ve(){return this.bodyUsed=!1,this._initBody=function(be){this._bodyInit=be,be?typeof be=="string"?this._bodyText=be:m.blob&&Blob.prototype.isPrototypeOf(be)?this._bodyBlob=be:m.formData&&FormData.prototype.isPrototypeOf(be)?this._bodyFormData=be:m.searchParams&&URLSearchParams.prototype.isPrototypeOf(be)?this._bodyText=be.toString():m.arrayBuffer&&m.blob&&g(be)?(this._bodyArrayBuffer=ce(be.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):m.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(be)||E(be))?this._bodyArrayBuffer=ce(be):this._bodyText=be=Object.prototype.toString.call(be):this._bodyText="",this.headers.get("content-type")||(typeof be=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(be)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var be=V(this);if(be)return be;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?V(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(re)}),this.text=function(){var be=V(this);if(be)return be;if(this._bodyBlob)return X(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ae(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(Se)}),this.json=function(){return this.text().then(JSON.parse)},this}var Ne=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ze(be){var Je=be.toUpperCase();return Ne.indexOf(Je)>-1?Je:be}function Pe(be,Je){Je=Je||{};var ht=Je.body;if(be instanceof Pe){if(be.bodyUsed)throw new TypeError("Already read");this.url=be.url,this.credentials=be.credentials,Je.headers||(this.headers=new z(be.headers)),this.method=be.method,this.mode=be.mode,this.signal=be.signal,!ht&&be._bodyInit!=null&&(ht=be._bodyInit,be.bodyUsed=!0)}else this.url=String(be);if(this.credentials=Je.credentials||this.credentials||"same-origin",(Je.headers||!this.headers)&&(this.headers=new z(Je.headers)),this.method=ze(Je.method||this.method||"GET"),this.mode=Je.mode||this.mode||null,this.signal=Je.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ht)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ht)}Pe.prototype.clone=function(){return new Pe(this,{body:this._bodyInit})};function Se(be){var Je=new FormData;return be.trim().split("&").forEach(function(ht){if(ht){var vt=ht.split("="),Lt=vt.shift().replace(/\+/g," "),rr=vt.join("=").replace(/\+/g," ");Je.append(decodeURIComponent(Lt),decodeURIComponent(rr))}}),Je}function Ie(be){var Je=new z,ht=be.replace(/\r?\n[\t ]+/g," ");return ht.split(/\r?\n/).forEach(function(vt){var Lt=vt.split(":"),rr=Lt.shift().trim();if(rr){var Nn=Lt.join(":").trim();Je.append(rr,Nn)}}),Je}ve.call(Pe.prototype);function Ke(be,Je){Je||(Je={}),this.type="default",this.status=Je.status===void 0?200:Je.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Je?Je.statusText:"OK",this.headers=new z(Je.headers),this.url=Je.url||"",this._initBody(be)}ve.call(Ke.prototype),Ke.prototype.clone=function(){return new Ke(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new z(this.headers),url:this.url})},Ke.error=function(){var be=new Ke(null,{status:0,statusText:""});return be.type="error",be};var Ge=[301,302,303,307,308];Ke.redirect=function(be,Je){if(Ge.indexOf(Je)===-1)throw new RangeError("Invalid status code");return new Ke(null,{status:Je,headers:{location:be}})},a.DOMException=f.DOMException;try{new a.DOMException}catch{a.DOMException=function(Je,ht){this.message=Je,this.name=ht;var vt=Error(Je);this.stack=vt.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function st(be,Je){return new Promise(function(ht,vt){var Lt=new Pe(be,Je);if(Lt.signal&&Lt.signal.aborted)return vt(new a.DOMException("Aborted","AbortError"));var rr=new XMLHttpRequest;function Nn(){rr.abort()}rr.onload=function(){var zr={status:rr.status,statusText:rr.statusText,headers:Ie(rr.getAllResponseHeaders()||"")};zr.url="responseURL"in rr?rr.responseURL:zr.headers.get("X-Request-URL");var mr="response"in rr?rr.response:rr.responseText;ht(new Ke(mr,zr))},rr.onerror=function(){vt(new TypeError("Network request failed"))},rr.ontimeout=function(){vt(new TypeError("Network request failed"))},rr.onabort=function(){vt(new a.DOMException("Aborted","AbortError"))},rr.open(Lt.method,Lt.url,!0),Lt.credentials==="include"?rr.withCredentials=!0:Lt.credentials==="omit"&&(rr.withCredentials=!1),"responseType"in rr&&m.blob&&(rr.responseType="blob"),Lt.headers.forEach(function(zr,mr){rr.setRequestHeader(mr,zr)}),Lt.signal&&(Lt.signal.addEventListener("abort",Nn),rr.onreadystatechange=function(){rr.readyState===4&&Lt.signal.removeEventListener("abort",Nn)}),rr.send(typeof Lt._bodyInit>"u"?null:Lt._bodyInit)})}return st.polyfill=!0,f.fetch||(f.fetch=st,f.Headers=z,f.Request=Pe,f.Response=Ke),a.Headers=z,a.Request=Pe,a.Response=Ke,a.fetch=st,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var s=o;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}(Ag,Ag.exports)),Ag.exports}(function(t,e){var n;if(typeof fetch=="function"&&(typeof Ns<"u"&&Ns.fetch?n=Ns.fetch:typeof window<"u"&&window.fetch?n=window.fetch:n=fetch),typeof pj<"u"&&(typeof window>"u"||typeof window.document>"u")){var o=n||dj();o.default&&(o=o.default),e.default=o,t.exports=e.default}})(Cg,Cg.exports);const zM=Cg.exports,FM=LO({__proto__:null,default:zM},[Cg.exports]);function Pg(t){return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}var Ml;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?Ml=global.fetch:typeof window<"u"&&window.fetch?Ml=window.fetch:Ml=fetch);var pd;NM()&&(typeof global<"u"&&global.XMLHttpRequest?pd=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(pd=window.XMLHttpRequest));var kg;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?kg=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(kg=window.ActiveXObject)),!Ml&&FM&&!pd&&!kg&&(Ml=zM||FM),typeof Ml!="function"&&(Ml=void 0);var A1=function(e,n){if(n&&Pg(n)==="object"){var o="";for(var s in n)o+="&"+encodeURIComponent(s)+"="+encodeURIComponent(n[s]);if(!o)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+o.slice(1)}return e},BM=function(e,n,o){Ml(e,n).then(function(s){if(!s.ok)return o(s.statusText||"Error",{status:s.status});s.text().then(function(f){o(null,{status:s.status,data:f})}).catch(o)}).catch(o)},VM=!1,mj=function(e,n,o,s){e.queryStringParams&&(n=A1(n,e.queryStringParams));var f=C1({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);o&&(f["Content-Type"]="application/json");var a=typeof e.requestOptions=="function"?e.requestOptions(o):e.requestOptions,m=C1({method:o?"POST":"GET",body:o?e.stringify(o):void 0,headers:f},VM?{}:a);try{BM(n,m,s)}catch(g){if(!a||Object.keys(a).length===0||!g.message||g.message.indexOf("not implemented")<0)return s(g);try{Object.keys(a).forEach(function(b){delete m[b]}),BM(n,m,s),VM=!0}catch(b){s(b)}}},yj=function(e,n,o,s){o&&Pg(o)==="object"&&(o=A1("",o).slice(1)),e.queryStringParams&&(n=A1(n,e.queryStringParams));try{var f;pd?f=new pd:f=new kg("MSXML2.XMLHTTP.3.0"),f.open(o?"POST":"GET",n,1),e.crossDomain||f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.withCredentials=!!e.withCredentials,o&&f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.overrideMimeType&&f.overrideMimeType("application/json");var a=e.customHeaders;if(a=typeof a=="function"?a():a,a)for(var m in a)f.setRequestHeader(m,a[m]);f.onreadystatechange=function(){f.readyState>3&&s(f.status>=400?f.statusText:null,{status:f.status,data:f.responseText})},f.send(o)}catch(g){console&&console.log(g)}},gj=function(e,n,o,s){if(typeof o=="function"&&(s=o,o=void 0),s=s||function(){},Ml&&n.indexOf("file:")!==0)return mj(e,n,o,s);if(NM()||typeof ActiveXObject=="function")return yj(e,n,o,s);s(new Error("No fetch and no xhr implementation found!"))};function dd(t){return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dd(t)}function vj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UM(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,jM(o.key),o)}}function _j(t,e,n){return e&&UM(t.prototype,e),n&&UM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xj(t,e,n){return e=jM(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jM(t){var e=bj(t,"string");return dd(e)==="symbol"?e:String(e)}function bj(t,e){if(dd(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e||"default");if(dd(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wj=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,o,s){return xj({},o,s||"")},request:gj,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},P1=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};vj(this,t),this.services=e,this.options=n,this.allOptions=o,this.type="backend",this.init(e,n,o)}return _j(t,[{key:"init",value:function(n){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=C1(s,this.options||{},wj()),this.allOptions=f,this.services&&this.options.reloadInterval&&setInterval(function(){return o.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(n,o,s){this._readAny(n,n,o,o,s)}},{key:"read",value:function(n,o,s){this._readAny([n],n,[o],o,s)}},{key:"_readAny",value:function(n,o,s,f,a){var m=this,g=this.options.loadPath;typeof this.options.loadPath=="function"&&(g=this.options.loadPath(n,s)),g=fj(g),g.then(function(b){if(!b)return a(null,{});var E=m.services.interpolator.interpolate(b,{lng:n.join("+"),ns:s.join("+")});m.loadUrl(E,a,o,f)})}},{key:"loadUrl",value:function(n,o,s,f){var a=this;this.options.request(this.options,n,void 0,function(m,g){if(g&&(g.status>=500&&g.status<600||!g.status))return o("failed loading "+n+"; status code: "+g.status,!0);if(g&&g.status>=400&&g.status<500)return o("failed loading "+n+"; status code: "+g.status,!1);if(!g&&m&&m.message&&m.message.indexOf("Failed to fetch")>-1)return o("failed loading "+n+": "+m.message,!0);if(m)return o(m,!1);var b,E;try{typeof g.data=="string"?b=a.options.parse(g.data,s,f):b=g.data}catch{E="failed parsing "+n+" to json"}if(E)return o(E,!1);o(null,b)})}},{key:"create",value:function(n,o,s,f,a){var m=this;if(!!this.options.addPath){typeof n=="string"&&(n=[n]);var g=this.options.parsePayload(o,s,f),b=0,E=[],M=[];n.forEach(function(I){var P=m.options.addPath;typeof m.options.addPath=="function"&&(P=m.options.addPath(I,o));var z=m.services.interpolator.interpolate(P,{lng:I,ns:o});m.options.request(m.options,z,g,function(V,q){b+=1,E.push(V),M.push(q),b===n.length&&typeof a=="function"&&a(E,M)})})}}},{key:"reload",value:function(){var n=this,o=this.services,s=o.backendConnector,f=o.languageUtils,a=o.logger,m=s.language;if(!(m&&m.toLowerCase()==="cimode")){var g=[],b=function(M){var I=f.toResolveHierarchy(M);I.forEach(function(P){g.indexOf(P)<0&&g.push(P)})};b(m),this.allOptions.preload&&this.allOptions.preload.forEach(function(E){return b(E)}),g.forEach(function(E){n.allOptions.ns.forEach(function(M){s.read(E,M,"read",null,null,function(I,P){I&&a.warn("loading namespace ".concat(M," for language ").concat(E," failed"),I),!I&&P&&a.log("loaded namespace ".concat(M," for language ").concat(E),P),s.loaded("".concat(E,"|").concat(M),I,P)})})})}}}]),t}();P1.type="backend";function $M(t,e,n){n(t,e)&&t instanceof qO.default&&t.getLayers().forEach(s=>{$M(s,[...e,t],n)})}const Ej={class:"h-screen flex flex-col overflow-hidden"},Sj={class:"flex grow"},Tj={key:0,class:"w-full sm:w-80 bg-secondary z-10"},Mj={key:1,class:"w-80 bg-primary"},Ij={class:"map-wrapper grow bg-blue-100 relative"},Oj={class:"absolute right-1 top-16"},GM=lr(ir({__name:"App",setup(t){const e=vi();PM.bootstrap(),OM.bootstrap(),CM.bootstrap(),AM.bootstrapLayersOpen(),j0.bootstrapStyle(),IM.bootstrap();const{layersOpen:n,styleEditorOpen:o}=rn(e);Tn(n,()=>setTimeout(()=>{s()},50)),ua(()=>window.addEventListener("resize",s)),lu(()=>window.removeEventListener("resize",s));function s(){const f=Os().getOlMap();f.updateSize(),$M(f.getLayerGroup(),[],a=>(a instanceof $0&&a.getMapLibreMap().resize(),!0))}return(f,a)=>(Be(),tt("div",Ej,[kt(XT),Fe("main",Sj,[Xe(" Layer panel "),se(n)?(Be(),tt("div",Tj,[kt(SM)])):Xe("v-if",!0),Xe(" Style editor "),se(o)?(Be(),tt("div",Mj,[kt(LM)])):Xe("v-if",!0),Xe(" Map container and slider comparator "),Fe("div",Ij,[kt(ST,{v4_standalone:!0}),kt(TM,{class:"absolute top-0"}),kt(GT),kt(HT)]),Xe(" Background selector "),Fe("div",Oj,[kt(MT)])]),kt(KT,{class:"fixed bottom-5 sm:static z-20"}),kt(Y2)]))}}),[["__file","/home/mkirmse/devel/gmf/luxembourg-geoportail_2024/src/App.vue"]]);FR(),$n.use(P1),$n.init({lng:"fr",debug:!1,defaultNS:"client",supportedLngs:["de","en","fr","lb"],ns:["client","legends","server","tooltips"],fallbackLng:"fr",backend:{loadPath:"/static-ngeo/web-components/assets/locales/{{ns}}.{{lng}}.json"},nsSeparator:"|"});const Lg=QP(GM);Lg.use(n2()),Lg.use(TE,{i18next:$n}),Lg.use(Gw);const Cj=(t={},e=null)=>K2({setup:()=>{const n=Km();Object.assign(n.appContext,e._context),Object.assign(n.provides,e._context.provides)},render:()=>gw(t)},{shadowRoot:!1});It.AlertNotifications=Y2,It.App=GM,It.BackgroundSelector=MT,It.DropdownList=h0,It.FooterBar=KT,It.HeaderBar=XT,It.I18NextVue=TE,It.LayerMetadata=HT,It.LayerPanel=SM,It.MapContainer=ST,It.MapLibreLayer=$0,It.RemoteLayers=GT,It.SliderComparator=TM,It.StyleSelector=LM,It.VueDOMPurifyHTML=Gw,It.app=Lg,It.backend=P1,It.createElementInstance=Cj,It.createPinia=n2,It.defineCustomElement=K2,It.i18next=$n,It.proxyUrlHelper=Ac,It.statePersistorBgLayerService=IM,It.statePersistorLayersOpenService=AM,It.statePersistorLayersService=OM,It.statePersistorMyMapService=PM,It.statePersistorStyleService=j0,It.statePersistorThemeService=CM,It.storeToRefs=rn,It.themeSelectorService=ZT,It.useAppStore=vi,It.useBackgroundLayer=q0,It.useLayers=ka,It.useMap=Os,It.useMapStore=ui,It.useMvtStyles=Cc,It.useOpenLayers=G0,It.useStyleStore=os,It.useThemeStore=yo,It.useThemes=Su,It.watch=Tn,Object.defineProperties(It,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
