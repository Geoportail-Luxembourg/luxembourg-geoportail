(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const ci=a=>typeof a=="string",qy=()=>{let a,e;const t=new Promise((i,n)=>{a=i,e=n});return t.resolve=a,t.reject=e,t},n8=a=>a==null?"":""+a,nV=(a,e,t)=>{a.forEach(i=>{e[i]&&(t[i]=e[i])})},rV=/###/g,r8=a=>a&&a.indexOf("###")>-1?a.replace(rV,"."):a,s8=a=>!a||ci(a),N0=(a,e,t)=>{const i=ci(e)?e.split("."):e;let n=0;for(;n<i.length-1;){if(s8(a))return{};const s=r8(i[n]);!a[s]&&t&&(a[s]=new t),Object.prototype.hasOwnProperty.call(a,s)?a=a[s]:a={},++n}return s8(a)?{}:{obj:a,k:r8(i[n])}},o8=(a,e,t)=>{const{obj:i,k:n}=N0(a,e,Object);if(i!==void 0||e.length===1){i[n]=t;return}let s=e[e.length-1],r=e.slice(0,e.length-1),l=N0(a,r,Object);for(;l.obj===void 0&&r.length;)s=`${r[r.length-1]}.${s}`,r=r.slice(0,r.length-1),l=N0(a,r,Object),l?.obj&&typeof l.obj[`${l.k}.${s}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${s}`]=t},sV=(a,e,t,i)=>{const{obj:n,k:s}=N0(a,e,Object);n[s]=n[s]||[],n[s].push(t)},Fx=(a,e)=>{const{obj:t,k:i}=N0(a,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},oV=(a,e,t)=>{const i=Fx(a,t);return i!==void 0?i:Fx(e,t)},g6=(a,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in a?ci(a[i])||a[i]instanceof String||ci(e[i])||e[i]instanceof String?t&&(a[i]=e[i]):g6(a[i],e[i],t):a[i]=e[i]);return a},ug=a=>a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var lV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const uV=a=>ci(a)?a.replace(/[&<>"'\/]/g,e=>lV[e]):a;class cV{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const dV=[" ",",","?","!",";"],hV=new cV(20),_V=(a,e,t)=>{e=e||"",t=t||"";const i=dV.filter(r=>e.indexOf(r)<0&&t.indexOf(r)<0);if(i.length===0)return!0;const n=hV.getRegExp(`(${i.map(r=>r==="?"?"\\?":r).join("|")})`);let s=!n.test(a);if(!s){const r=a.indexOf(t);r>0&&!n.test(a.substring(0,r))&&(s=!0)}return s},lA=function(a,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!a)return;if(a[e])return Object.prototype.hasOwnProperty.call(a,e)?a[e]:void 0;const i=e.split(t);let n=a;for(let s=0;s<i.length;){if(!n||typeof n!="object")return;let r,l="";for(let u=s;u<i.length;++u)if(u!==s&&(l+=t),l+=i[u],r=n[l],r!==void 0){if(["string","number","boolean"].indexOf(typeof r)>-1&&u<i.length-1)continue;s+=u-s+1;break}n=r}return n},Nx=a=>a?.replace("_","-"),mV={type:"logger",log(a){this.output("log",a)},warn(a){this.output("warn",a)},error(a){this.output("error",a)},output(a,e){console?.[a]?.apply?.(console,e)}};class Bx{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||mV,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,n){return n&&!this.debug?null:(ci(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Bx(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Bx(this.logger,e)}}var pc=new Bx;class uC{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const n=this.observers[i].get(t)||0;this.observers[i].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(r=>{let[l,u]=r;for(let d=0;d<u;d++)l(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(r=>{let[l,u]=r;for(let d=0;d<u;d++)l.apply(l,[e,...i])})}}class l8 extends uC{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,r=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],i&&(Array.isArray(i)?l.push(...i):ci(i)&&s?l.push(...i.split(s)):l.push(i)));const u=Fx(this.data,l);return!u&&!t&&!i&&e.indexOf(".")>-1&&(e=l[0],t=l[1],i=l.slice(2).join(".")),u||!r||!ci(i)?u:lA(this.data?.[e]?.[t],i,s)}addResource(e,t,i,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const r=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let l=[e,t];i&&(l=l.concat(r?i.split(r):i)),e.indexOf(".")>-1&&(l=e.split("."),n=t,t=l[1]),this.addNamespaces(t),o8(this.data,l,n),s.silent||this.emit("added",e,t,i,n)}addResources(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in i)(ci(i[s])||Array.isArray(i[s]))&&this.addResource(e,t,s,i[s],{silent:!0});n.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,n,s){let r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,t];e.indexOf(".")>-1&&(l=e.split("."),n=i,i=t,t=l[1]),this.addNamespaces(t);let u=Fx(this.data,l)||{};r.skipCopy||(i=JSON.parse(JSON.stringify(i))),n?g6(u,i,s):u={...u,...i},o8(this.data,l,u),r.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(n=>t[n]&&Object.keys(t[n]).length>0)}toJSON(){return this.data}}var p6={processors:{},addPostProcessor(a){this.processors[a.name]=a},handle(a,e,t,i,n){return a.forEach(s=>{e=this.processors[s]?.process(e,t,i,n)??e}),e}};const u8={},c8=a=>!ci(a)&&typeof a!="boolean"&&typeof a!="number";class Dx extends uC{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),nV(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=pc.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};return e==null?!1:this.resolve(e,t)?.res!==void 0}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const n=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const r=i&&e.indexOf(i)>-1,l=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!_V(e,i,n);if(r&&!l){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:ci(s)?[s]:s};const d=e.split(i);(i!==n||i===n&&this.options.ns.indexOf(d[0])>-1)&&(s=d.shift()),e=d.join(n)}return{key:e,namespaces:ci(s)?[s]:s}}translate(e,t,i){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const n=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:r,namespaces:l}=this.extractFromKey(e[e.length-1],t),u=l[l.length-1],d=t.lng||this.language,h=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode"){if(h){const me=t.nsSeparator||this.options.nsSeparator;return n?{res:`${u}${me}${r}`,usedKey:r,exactUsedKey:r,usedLng:d,usedNS:u,usedParams:this.getUsedParamsDetails(t)}:`${u}${me}${r}`}return n?{res:r,usedKey:r,exactUsedKey:r,usedLng:d,usedNS:u,usedParams:this.getUsedParamsDetails(t)}:r}const g=this.resolve(e,t);let y=g?.res;const x=g?.usedKey||r,C=g?.exactUsedKey||r,I=["[object Number]","[object Function]","[object RegExp]"],A=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,L=t.count!==void 0&&!ci(t.count),G=Dx.hasDefaultValue(t),F=L?this.pluralResolver.getSuffix(d,t.count,t):"",B=t.ordinal&&L?this.pluralResolver.getSuffix(d,t.count,{ordinal:!1}):"",Z=L&&!t.ordinal&&t.count===0,Y=Z&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${F}`]||t[`defaultValue${B}`]||t.defaultValue;let $=y;E&&!y&&G&&($=Y);const te=c8($),ce=Object.prototype.toString.apply($);if(E&&$&&te&&I.indexOf(ce)<0&&!(ci(A)&&Array.isArray($))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const me=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,$,{...t,ns:l}):`key '${r} (${this.language})' returned an object instead of string.`;return n?(g.res=me,g.usedParams=this.getUsedParamsDetails(t),g):me}if(s){const me=Array.isArray($),X=me?[]:{},de=me?C:x;for(const N in $)if(Object.prototype.hasOwnProperty.call($,N)){const ne=`${de}${s}${N}`;G&&!y?X[N]=this.translate(ne,{...t,defaultValue:c8(Y)?Y[N]:void 0,joinArrays:!1,ns:l}):X[N]=this.translate(ne,{...t,joinArrays:!1,ns:l}),X[N]===ne&&(X[N]=$[N])}y=X}}else if(E&&ci(A)&&Array.isArray(y))y=y.join(A),y&&(y=this.extendTranslation(y,e,t,i));else{let me=!1,X=!1;!this.isValidLookup(y)&&G&&(me=!0,y=Y),this.isValidLookup(y)||(X=!0,y=r);const N=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&X?void 0:y,ne=G&&Y!==y&&this.options.updateMissing;if(X||me||ne){if(this.logger.log(ne?"updateKey":"missingKey",d,u,r,ne?Y:y),s){const Ie=this.resolve(r,{...t,keySeparator:!1});Ie&&Ie.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let le=[];const _e=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&_e&&_e[0])for(let Ie=0;Ie<_e.length;Ie++)le.push(_e[Ie]);else this.options.saveMissingTo==="all"?le=this.languageUtils.toResolveHierarchy(t.lng||this.language):le.push(t.lng||this.language);const ke=(Ie,re,Q)=>{const J=G&&Q!==y?Q:N;this.options.missingKeyHandler?this.options.missingKeyHandler(Ie,u,re,J,ne,t):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Ie,u,re,J,ne,t),this.emit("missingKey",Ie,u,re,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&L?le.forEach(Ie=>{const re=this.pluralResolver.getSuffixes(Ie,t);Z&&t[`defaultValue${this.options.pluralSeparator}zero`]&&re.indexOf(`${this.options.pluralSeparator}zero`)<0&&re.push(`${this.options.pluralSeparator}zero`),re.forEach(Q=>{ke([Ie],r+Q,t[`defaultValue${Q}`]||Y)})}):ke(le,r,Y))}y=this.extendTranslation(y,e,t,g,i),X&&y===r&&this.options.appendNamespaceToMissingKey&&(y=`${u}:${r}`),(X||me)&&this.options.parseMissingKeyHandler&&(y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}:${r}`:r,me?y:void 0))}return n?(g.res=y,g.usedParams=this.getUsedParamsDetails(t),g):y}extendTranslation(e,t,i,n,s){var r=this;if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const d=ci(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const y=e.match(this.interpolator.nestingRegexp);h=y&&y.length}let g=i.replace&&!ci(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,i.lng||this.language||n.usedLng,i),d){const y=e.match(this.interpolator.nestingRegexp),x=y&&y.length;h<x&&(i.nest=!1)}!i.lng&&n&&n.res&&(i.lng=this.language||n.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var y=arguments.length,x=new Array(y),C=0;C<y;C++)x[C]=arguments[C];return s?.[0]===x[0]&&!i.context?(r.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${t[0]}`),null):r.translate(...x,t)},i)),i.interpolation&&this.interpolator.reset()}const l=i.postProcess||this.options.postProcess,u=ci(l)?[l]:l;return e!=null&&u?.length&&i.applyPostProcessor!==!1&&(e=p6.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,n,s,r,l;return ci(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(i))return;const d=this.extractFromKey(u,t),h=d.key;n=h;let g=d.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const y=t.count!==void 0&&!ci(t.count),x=y&&!t.ordinal&&t.count===0,C=t.context!==void 0&&(ci(t.context)||typeof t.context=="number")&&t.context!=="",I=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);g.forEach(A=>{this.isValidLookup(i)||(l=A,!u8[`${I[0]}-${A}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(u8[`${I[0]}-${A}`]=!0,this.logger.warn(`key "${n}" for languages "${I.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),I.forEach(E=>{if(this.isValidLookup(i))return;r=E;const L=[h];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(L,h,E,A,t);else{let F;y&&(F=this.pluralResolver.getSuffix(E,t.count,t));const B=`${this.options.pluralSeparator}zero`,Z=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(L.push(h+F),t.ordinal&&F.indexOf(Z)===0&&L.push(h+F.replace(Z,this.options.pluralSeparator)),x&&L.push(h+B)),C){const Y=`${h}${this.options.contextSeparator}${t.context}`;L.push(Y),y&&(L.push(Y+F),t.ordinal&&F.indexOf(Z)===0&&L.push(Y+F.replace(Z,this.options.pluralSeparator)),x&&L.push(Y+B))}}let G;for(;G=L.pop();)this.isValidLookup(i)||(s=G,i=this.getResource(E,A,G,t))}))})}),{res:i,usedKey:n,exactUsedKey:s,usedLng:r,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,n):this.resourceStore.getResource(e,t,i,n)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!ci(e.replace);let n=i?e.replace:e;if(i&&typeof e.count<"u"&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!i){n={...n};for(const s of t)delete n[s]}return n}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class d8{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=pc.create("languageUtils")}getScriptPartFromCode(e){if(e=Nx(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Nx(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(ci(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const n=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const n=this.getLanguagePartFromCode(i);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(s=>{if(s===n)return s;if(!(s.indexOf("-")<0&&n.indexOf("-")<0)&&(s.indexOf("-")>0&&n.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===n||s.indexOf(n)===0&&n.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),ci(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),n=[],s=r=>{r&&(this.isSupportedCode(r)?n.push(r):this.logger.warn(`rejecting language code not found in supportedLngs: ${r}`))};return ci(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):ci(e)&&s(this.formatLanguageCode(e)),i.forEach(r=>{n.indexOf(r)<0&&s(this.formatLanguageCode(r))}),n}}const h8={zero:0,one:1,two:2,few:3,many:4,other:5},_8={select:a=>a===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class fV{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=pc.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=Nx(e==="dev"?"en":e),n=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:i,type:n});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let r;try{r=new Intl.PluralRules(i,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),_8;if(!e.match(/-|_/))return _8;const u=this.languageUtils.getLanguagePartFromCode(e);r=this.getRule(u,t)}return this.pluralRulesCache[s]=r,r}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(n=>`${t}${n}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((n,s)=>h8[n]-h8[s]).map(n=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=this.getRule(e,i);return n?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const m8=function(a,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=oV(a,e,t);return!s&&n&&ci(t)&&(s=lA(a,t,i),s===void 0&&(s=lA(e,t,i))),s},uS=a=>a.replace(/\$/g,"$$$$");class gV{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=pc.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:n,prefix:s,prefixEscaped:r,suffix:l,suffixEscaped:u,formatSeparator:d,unescapeSuffix:h,unescapePrefix:g,nestingPrefix:y,nestingPrefixEscaped:x,nestingSuffix:C,nestingSuffixEscaped:I,nestingOptionsSeparator:A,maxReplaces:E,alwaysFormat:L}=e.interpolation;this.escape=t!==void 0?t:uV,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=s?ug(s):r||"{{",this.suffix=l?ug(l):u||"}}",this.formatSeparator=d||",",this.unescapePrefix=h?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=y?ug(y):x||ug("$t("),this.nestingSuffix=C?ug(C):I||ug(")"),this.nestingOptionsSeparator=A||",",this.maxReplaces=E||1e3,this.alwaysFormat=L!==void 0?L:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,i,n){let s,r,l;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=x=>{if(x.indexOf(this.formatSeparator)<0){const E=m8(t,u,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,i,{...n,...t,interpolationkey:x}):E}const C=x.split(this.formatSeparator),I=C.shift().trim(),A=C.join(this.formatSeparator).trim();return this.format(m8(t,u,I,this.options.keySeparator,this.options.ignoreJSONStructure),A,i,{...n,...t,interpolationkey:I})};this.resetRegExp();const h=n?.missingInterpolationHandler||this.options.missingInterpolationHandler,g=n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>uS(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?uS(this.escape(x)):uS(x)}].forEach(x=>{for(l=0;s=x.regex.exec(e);){const C=s[1].trim();if(r=d(C),r===void 0)if(typeof h=="function"){const A=h(e,s,n);r=ci(A)?A:""}else if(n&&Object.prototype.hasOwnProperty.call(n,C))r="";else if(g){r=s[0];continue}else this.logger.warn(`missed to pass in variable ${C} for interpolating ${e}`),r="";else!ci(r)&&!this.useRawValueToEscape&&(r=n8(r));const I=x.safeValue(r);if(e=e.replace(s[0],I),g?(x.regex.lastIndex+=r.length,x.regex.lastIndex-=s[0].length):x.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,s,r;const l=(u,d)=>{const h=this.nestingOptionsSeparator;if(u.indexOf(h)<0)return u;const g=u.split(new RegExp(`${h}[ ]*{`));let y=`{${g[1]}`;u=g[0],y=this.interpolate(y,r);const x=y.match(/'/g),C=y.match(/"/g);((x?.length??0)%2===0&&!C||C.length%2!==0)&&(y=y.replace(/'/g,'"'));try{r=JSON.parse(y),d&&(r={...d,...r})}catch(I){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,I),`${u}${h}${y}`}return r.defaultValue&&r.defaultValue.indexOf(this.prefix)>-1&&delete r.defaultValue,u};for(;n=this.nestingRegexp.exec(e);){let u=[];r={...i},r=r.replace&&!ci(r.replace)?r.replace:r,r.applyPostProcessor=!1,delete r.defaultValue;let d=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){const h=n[1].split(this.formatSeparator).map(g=>g.trim());n[1]=h.shift(),u=h,d=!0}if(s=t(l.call(this,n[1].trim(),r),r),s&&n[0]===e&&!ci(s))return s;ci(s)||(s=n8(s)),s||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),s=""),d&&(s=u.reduce((h,g)=>this.format(h,g,i.lng,{...i,interpolationkey:n[1].trim()}),s.trim())),e=e.replace(n[0],s),this.regexp.lastIndex=0}return e}}const pV=a=>{let e=a.toLowerCase().trim();const t={};if(a.indexOf("(")>-1){const i=a.split("(");e=i[0].toLowerCase().trim();const n=i[1].substring(0,i[1].length-1);e==="currency"&&n.indexOf(":")<0?t.currency||(t.currency=n.trim()):e==="relativetime"&&n.indexOf(":")<0?t.range||(t.range=n.trim()):n.split(";").forEach(r=>{if(r){const[l,...u]=r.split(":"),d=u.join(":").trim().replace(/^'+|'+$/g,""),h=l.trim();t[h]||(t[h]=d),d==="false"&&(t[h]=!1),d==="true"&&(t[h]=!0),isNaN(d)||(t[h]=parseInt(d,10))}})}return{formatName:e,formatOptions:t}},cg=a=>{const e={};return(t,i,n)=>{let s=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(s={...s,[n.interpolationkey]:void 0});const r=i+JSON.stringify(s);let l=e[r];return l||(l=a(Nx(i),n),e[r]=l),l(t)}};let yV=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=pc.create("formatter"),this.options=e,this.formats={number:cg((t,i)=>{const n=new Intl.NumberFormat(t,{...i});return s=>n.format(s)}),currency:cg((t,i)=>{const n=new Intl.NumberFormat(t,{...i,style:"currency"});return s=>n.format(s)}),datetime:cg((t,i)=>{const n=new Intl.DateTimeFormat(t,{...i});return s=>n.format(s)}),relativetime:cg((t,i)=>{const n=new Intl.RelativeTimeFormat(t,{...i});return s=>n.format(s,i.range||"day")}),list:cg((t,i)=>{const n=new Intl.ListFormat(t,{...i});return s=>n.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=cg(t)}format(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(l=>l.indexOf(")")>-1)){const l=s.findIndex(u=>u.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,l)].join(this.formatSeparator)}return s.reduce((l,u)=>{const{formatName:d,formatOptions:h}=pV(u);if(this.formats[d]){let g=l;try{const y=n?.formatParams?.[n.interpolationkey]||{},x=y.locale||y.lng||n.locale||n.lng||i;g=this.formats[d](l,x,{...h,...n,...y})}catch(y){this.logger.warn(y)}return g}else this.logger.warn(`there was no format function for ${d}`);return l},e)}};const bV=(a,e)=>{a.pending[e]!==void 0&&(delete a.pending[e],a.pendingCount--)};class vV extends uC{constructor(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=n,this.logger=pc.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,n.backend,n)}queueLoad(e,t,i,n){const s={},r={},l={},u={};return e.forEach(d=>{let h=!0;t.forEach(g=>{const y=`${d}|${g}`;!i.reload&&this.store.hasResourceBundle(d,g)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?r[y]===void 0&&(r[y]=!0):(this.state[y]=1,h=!1,r[y]===void 0&&(r[y]=!0),s[y]===void 0&&(s[y]=!0),u[g]===void 0&&(u[g]=!0)))}),h||(l[d]=!0)}),(Object.keys(s).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(s),pending:Object.keys(r),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(u)}}loaded(e,t,i){const n=e.split("|"),s=n[0],r=n[1];t&&this.emit("failedLoading",s,r,t),!t&&i&&this.store.addResourceBundle(s,r,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const l={};this.queue.forEach(u=>{sV(u.loaded,[s],r),bV(u,e),t&&u.errors.push(t),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(d=>{l[d]||(l[d]={});const h=u.loaded[d];h.length&&h.forEach(g=>{l[d][g]===void 0&&(l[d][g]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(u=>!u.done)}read(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:n,wait:s,callback:r});return}this.readingCalls++;const l=(d,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(d&&h&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,n+1,s*2,r)},s);return}r(d,h)},u=this.backend[i].bind(this.backend);if(u.length===2){try{const d=u(e,t);d&&typeof d.then=="function"?d.then(h=>l(null,h)).catch(l):l(null,d)}catch(d){l(d)}return}return u(e,t,l)}prepareLoading(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();ci(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ci(t)&&(t=[t]);const s=this.queueLoad(e,t,i,n);if(!s.toLoad.length)return s.pending.length||n(),null;s.toLoad.forEach(r=>{this.loadOne(r)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),n=i[0],s=i[1];this.read(n,s,"read",void 0,void 0,(r,l)=>{r&&this.logger.warn(`${t}loading namespace ${s} for language ${n} failed`,r),!r&&l&&this.logger.log(`${t}loaded namespace ${s} for language ${n}`,l),this.loaded(e,r,l)})}saveMissing(e,t,i,n,s){let r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const u={...r,isUpdate:s},d=this.backend.create.bind(this.backend);if(d.length<6)try{let h;d.length===5?h=d(e,t,i,n,u):h=d(e,t,i,n),h&&typeof h.then=="function"?h.then(g=>l(null,g)).catch(l):l(null,h)}catch(h){l(h)}else d(e,t,i,n,l,u)}!e||!e[0]||this.store.addResource(e[0],t,i,n)}}}const f8=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:a=>{let e={};if(typeof a[1]=="object"&&(e=a[1]),ci(a[1])&&(e.defaultValue=a[1]),ci(a[2])&&(e.tDescription=a[2]),typeof a[2]=="object"||typeof a[3]=="object"){const t=a[3]||a[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:a=>a,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),g8=a=>(ci(a.ns)&&(a.ns=[a.ns]),ci(a.fallbackLng)&&(a.fallbackLng=[a.fallbackLng]),ci(a.fallbackNS)&&(a.fallbackNS=[a.fallbackNS]),a.supportedLngs?.indexOf?.("cimode")<0&&(a.supportedLngs=a.supportedLngs.concat(["cimode"])),typeof a.initImmediate=="boolean"&&(a.initAsync=a.initImmediate),a),Xv=()=>{},xV=a=>{Object.getOwnPropertyNames(Object.getPrototypeOf(a)).forEach(t=>{typeof a[t]=="function"&&(a[t]=a[t].bind(a))})};class _1 extends uC{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=g8(e),this.services={},this.logger=pc,this.modules={external:[]},xV(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(i=t,t={}),t.defaultNS==null&&t.ns&&(ci(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=f8();this.options={...n,...this.options,...g8(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?pc.init(s(this.modules.logger),this.options):pc.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=yV;const g=new d8(this.options);this.store=new l8(this.options.resources,this.options);const y=this.services;y.logger=pc,y.resourceStore=this.store,y.languageUtils=g,y.pluralResolver=new fV(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(y.formatter=s(h),y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new gV(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new vV(s(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",function(x){for(var C=arguments.length,I=new Array(C>1?C-1:0),A=1;A<C;A++)I[A-1]=arguments[A];e.emit(x,...I)}),this.modules.languageDetector&&(y.languageDetector=s(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=s(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Dx(this.services,this.options),this.translator.on("*",function(x){for(var C=arguments.length,I=new Array(C>1?C-1:0),A=1;A<C;A++)I[A-1]=arguments[A];e.emit(x,...I)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,i||(i=Xv),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=function(){return e.store[h](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=function(){return e.store[h](...arguments),e}});const u=qy(),d=()=>{const h=(g,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(y),i(g,y)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),u}loadResources(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xv;const n=ci(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(n?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const s=[],r=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&s.indexOf(d)<0&&s.push(d)})};n?r(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>r(u)),this.options.preload?.forEach?.(l=>r(l)),this.services.backendConnector.load(s,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(l)})}else i(null)}reloadResources(e,t,i){const n=qy();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=Xv),this.services.backendConnector.reload(e,t,s=>{n.resolve(),i(s)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&p6.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,t){var i=this;this.isLanguageChangingTo=e;const n=qy();this.emit("languageChanging",e);const s=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},r=(u,d)=>{d?(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve(function(){return i.t(...arguments)}),t&&t(u,function(){return i.t(...arguments)})},l=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const d=ci(u)?u:this.services.languageUtils.getBestMatchFromCodes(u);d&&(this.language||s(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,h=>{r(h,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),n}getFixedT(e,t,i){var n=this;const s=function(r,l){let u;if(typeof l!="object"){for(var d=arguments.length,h=new Array(d>2?d-2:0),g=2;g<d;g++)h[g-2]=arguments[g];u=n.options.overloadTranslationOptionHandler([r,l].concat(h))}else u={...l};u.lng=u.lng||s.lng,u.lngs=u.lngs||s.lngs,u.ns=u.ns||s.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||i||s.keyPrefix);const y=n.options.keySeparator||".";let x;return u.keyPrefix&&Array.isArray(r)?x=r.map(C=>`${u.keyPrefix}${y}${C}`):x=u.keyPrefix?`${u.keyPrefix}${y}${r}`:r,n.t(x,u)};return ci(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=i,s}t(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.translator?.translate(...t)}exists(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.translator?.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const r=(l,u)=>{const d=this.services.backendConnector.state[`${l}|${u}`];return d===-1||d===0||d===2};if(t.precheck){const l=t.precheck(this,r);if(l!==void 0)return l}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||r(i,e)&&(!n||r(s,e)))}loadNamespaces(e,t){const i=qy();return this.options.ns?(ci(e)&&(e=[e]),e.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{i.resolve(),t&&t(n)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=qy();ci(e)&&(e=[e]);const n=this.options.preload||[],s=e.filter(r=>n.indexOf(r)<0&&this.services.languageUtils.isSupportedCode(r));return s.length?(this.options.preload=n.concat(s),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new d8(f8());return t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new _1(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xv;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},s=new _1(n);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(l=>{s[l]=this[l]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},i){const l=Object.keys(this.store.data).reduce((u,d)=>(u[d]={...this.store.data[d]},Object.keys(u[d]).reduce((h,g)=>(h[g]={...u[d][g]},h),{})),{});s.store=new l8(l,n),s.services.resourceStore=s.store}return s.translator=new Dx(s.services,n),s.translator.on("*",function(l){for(var u=arguments.length,d=new Array(u>1?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];s.emit(l,...d)}),s.init(n,t),s.translator.options=n,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Va=_1.createInstance();Va.createInstance=_1.createInstance;Va.createInstance;Va.dir;Va.init;Va.loadResources;Va.reloadResources;Va.use;Va.changeLanguage;Va.getFixedT;const wV=Va.t;Va.exists;Va.setDefaultNamespace;Va.hasLoadedNamespace;Va.loadNamespaces;Va.loadLanguages;function uA(a){"@babel/helpers - typeof";return uA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uA(a)}function y6(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":uA(XMLHttpRequest))==="object"}function CV(a){return!!a&&typeof a.then=="function"}function IV(a){return CV(a)?a:Promise.resolve(a)}const SV="modulepreload",AV=function(a){return"/luxembourg-geoportail/main/"+a},p8={},Vx=function(e,t,i){let n=Promise.resolve();if(t&&t.length>0){let u=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=r?.nonce||r?.getAttribute("nonce");n=u(t.map(d=>{if(d=AV(d),d in p8)return;p8[d]=!0;const h=d.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":SV,h||(y.as="script"),y.crossOrigin="",y.href=d,l&&y.setAttribute("nonce",l),document.head.appendChild(y),h)return new Promise((x,C)=>{y.addEventListener("load",x),y.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return n.then(r=>{for(const l of r||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function y8(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,i)}return t}function b8(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?y8(Object(t),!0).forEach(function(i){TV(a,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):y8(Object(t)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))})}return a}function TV(a,e,t){return(e=EV(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function EV(a){var e=MV(a,"string");return Vm(e)=="symbol"?e:e+""}function MV(a,e){if(Vm(a)!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var i=t.call(a,e);if(Vm(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function Vm(a){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vm(a)}var c_=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?c_=global.fetch:typeof window<"u"&&window.fetch&&(c_=window.fetch);var m1;y6()&&(typeof global<"u"&&global.XMLHttpRequest?m1=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(m1=window.XMLHttpRequest));var Zx;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?Zx=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(Zx=window.ActiveXObject));typeof c_!="function"&&(c_=void 0);if(!c_&&!m1&&!Zx)try{Vx(()=>import("./browser-ponyfill-nyfrgdsj.js").then(a=>a.b),[]).then(function(a){c_=a.default}).catch(function(){})}catch{}var cA=function(e,t){if(t&&Vm(t)==="object"){var i="";for(var n in t)i+="&"+encodeURIComponent(n)+"="+encodeURIComponent(t[n]);if(!i)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+i.slice(1)}return e},v8=function(e,t,i,n){var s=function(u){if(!u.ok)return i(u.statusText||"Error",{status:u.status});u.text().then(function(d){i(null,{status:u.status,data:d})}).catch(i)};if(n){var r=n(e,t);if(r instanceof Promise){r.then(s).catch(i);return}}typeof fetch=="function"?fetch(e,t).then(s).catch(i):c_(e,t).then(s).catch(i)},x8=!1,LV=function(e,t,i,n){e.queryStringParams&&(t=cA(t,e.queryStringParams));var s=b8({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),i&&(s["Content-Type"]="application/json");var r=typeof e.requestOptions=="function"?e.requestOptions(i):e.requestOptions,l=b8({method:i?"POST":"GET",body:i?e.stringify(i):void 0,headers:s},x8?{}:r),u=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{v8(t,l,n,u)}catch(d){if(!r||Object.keys(r).length===0||!d.message||d.message.indexOf("not implemented")<0)return n(d);try{Object.keys(r).forEach(function(h){delete l[h]}),v8(t,l,n,u),x8=!0}catch(h){n(h)}}},RV=function(e,t,i,n){i&&Vm(i)==="object"&&(i=cA("",i).slice(1)),e.queryStringParams&&(t=cA(t,e.queryStringParams));try{var s=m1?new m1:new Zx("MSXML2.XMLHTTP.3.0");s.open(i?"POST":"GET",t,1),e.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!e.withCredentials,i&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var r=e.customHeaders;if(r=typeof r=="function"?r():r,r)for(var l in r)s.setRequestHeader(l,r[l]);s.onreadystatechange=function(){s.readyState>3&&n(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(i)}catch(u){console&&console.log(u)}},kV=function(e,t,i,n){if(typeof i=="function"&&(n=i,i=void 0),n=n||function(){},c_&&t.indexOf("file:")!==0)return LV(e,t,i,n);if(y6()||typeof ActiveXObject=="function")return RV(e,t,i,n);n(new Error("No fetch and no xhr implementation found!"))};function pp(a){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(a)}function w8(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,i)}return t}function cS(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w8(Object(t),!0).forEach(function(i){b6(a,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):w8(Object(t)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))})}return a}function PV(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function GV(a,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,v6(i.key),i)}}function WV(a,e,t){return e&&GV(a.prototype,e),Object.defineProperty(a,"prototype",{writable:!1}),a}function b6(a,e,t){return(e=v6(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function v6(a){var e=OV(a,"string");return pp(e)=="symbol"?e:e+""}function OV(a,e){if(pp(a)!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var i=t.call(a,e);if(pp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var FV=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,i,n){return b6({},i,n||"")},parseLoadPayload:function(t,i){},request:kV,reloadInterval:typeof window<"u"?!1:3600*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},x6=(function(){function a(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};PV(this,a),this.services=e,this.options=t,this.allOptions=i,this.type="backend",this.init(e,t,i)}return WV(a,[{key:"init",value:function(t){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=t,this.options=cS(cS(cS({},FV()),this.options||{}),n),this.allOptions=s,this.services&&this.options.reloadInterval){var r=setInterval(function(){return i.reload()},this.options.reloadInterval);pp(r)==="object"&&typeof r.unref=="function"&&r.unref()}}},{key:"readMulti",value:function(t,i,n){this._readAny(t,t,i,i,n)}},{key:"read",value:function(t,i,n){this._readAny([t],t,[i],i,n)}},{key:"_readAny",value:function(t,i,n,s,r){var l=this,u=this.options.loadPath;typeof this.options.loadPath=="function"&&(u=this.options.loadPath(t,n)),u=IV(u),u.then(function(d){if(!d)return r(null,{});var h=l.services.interpolator.interpolate(d,{lng:t.join("+"),ns:n.join("+")});l.loadUrl(h,r,i,s)})}},{key:"loadUrl",value:function(t,i,n,s){var r=this,l=typeof n=="string"?[n]:n,u=typeof s=="string"?[s]:s,d=this.options.parseLoadPayload(l,u);this.options.request(this.options,t,d,function(h,g){if(g&&(g.status>=500&&g.status<600||!g.status))return i("failed loading "+t+"; status code: "+g.status,!0);if(g&&g.status>=400&&g.status<500)return i("failed loading "+t+"; status code: "+g.status,!1);if(!g&&h&&h.message){var y=h.message.toLowerCase(),x=["failed","fetch","network","load"].find(function(A){return y.indexOf(A)>-1});if(x)return i("failed loading "+t+": "+h.message,!0)}if(h)return i(h,!1);var C,I;try{typeof g.data=="string"?C=r.options.parse(g.data,n,s):C=g.data}catch{I="failed parsing "+t+" to json"}if(I)return i(I,!1);i(null,C)})}},{key:"create",value:function(t,i,n,s,r){var l=this;if(this.options.addPath){typeof t=="string"&&(t=[t]);var u=this.options.parsePayload(i,n,s),d=0,h=[],g=[];t.forEach(function(y){var x=l.options.addPath;typeof l.options.addPath=="function"&&(x=l.options.addPath(y,i));var C=l.services.interpolator.interpolate(x,{lng:y,ns:i});l.options.request(l.options,C,u,function(I,A){d+=1,h.push(I),g.push(A),d===t.length&&typeof r=="function"&&r(h,g)})})}}},{key:"reload",value:function(){var t=this,i=this.services,n=i.backendConnector,s=i.languageUtils,r=i.logger,l=n.language;if(!(l&&l.toLowerCase()==="cimode")){var u=[],d=function(g){var y=s.toResolveHierarchy(g);y.forEach(function(x){u.indexOf(x)<0&&u.push(x)})};d(l),this.allOptions.preload&&this.allOptions.preload.forEach(function(h){return d(h)}),u.forEach(function(h){t.allOptions.ns.forEach(function(g){n.read(h,g,"read",null,null,function(y,x){y&&r.warn("loading namespace ".concat(g," for language ").concat(h," failed"),y),!y&&x&&r.log("loaded namespace ".concat(g," for language ").concat(h),x),n.loaded("".concat(h,"|").concat(g),y,x)})})})}}}])})();x6.type="backend";function d5(a){const e=Object.create(null);for(const t of a.split(","))e[t]=1;return t=>t in e}const Mn={},jg=[],Ic=()=>{},w6=()=>!1,cC=a=>a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&(a.charCodeAt(2)>122||a.charCodeAt(2)<97),h5=a=>a.startsWith("onUpdate:"),ys=Object.assign,_5=(a,e)=>{const t=a.indexOf(e);t>-1&&a.splice(t,1)},NV=Object.prototype.hasOwnProperty,pn=(a,e)=>NV.call(a,e),Za=Array.isArray,$g=a=>ab(a)==="[object Map]",Gp=a=>ab(a)==="[object Set]",C8=a=>ab(a)==="[object Date]",li=a=>typeof a=="function",mr=a=>typeof a=="string",Eu=a=>typeof a=="symbol",Tn=a=>a!==null&&typeof a=="object",C6=a=>(Tn(a)||li(a))&&li(a.then)&&li(a.catch),I6=Object.prototype.toString,ab=a=>I6.call(a),BV=a=>ab(a).slice(8,-1),S6=a=>ab(a)==="[object Object]",dC=a=>mr(a)&&a!=="NaN"&&a[0]!=="-"&&""+parseInt(a,10)===a,B0=d5(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hC=a=>{const e=Object.create(null);return(t=>e[t]||(e[t]=a(t)))},DV=/-\w/g,Jl=hC(a=>a.replace(DV,e=>e.slice(1).toUpperCase())),VV=/\B([A-Z])/g,v_=hC(a=>a.replace(VV,"-$1").toLowerCase()),_C=hC(a=>a.charAt(0).toUpperCase()+a.slice(1)),dS=hC(a=>a?`on${_C(a)}`:""),r_=(a,e)=>!Object.is(a,e),Q2=(a,...e)=>{for(let t=0;t<a.length;t++)a[t](...e)},A6=(a,e,t,i=!1)=>{Object.defineProperty(a,e,{configurable:!0,enumerable:!1,writable:i,value:t})},mC=a=>{const e=parseFloat(a);return isNaN(e)?a:e},ZV=a=>{const e=mr(a)?Number(a):NaN;return isNaN(e)?a:e};let I8;const fC=()=>I8||(I8=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nc(a){if(Za(a)){const e={};for(let t=0;t<a.length;t++){const i=a[t],n=mr(i)?XV(i):Nc(i);if(n)for(const s in n)e[s]=n[s]}return e}else if(mr(a)||Tn(a))return a}const zV=/;(?![^(]*\))/g,UV=/:([^]+)/,HV=/\/\*[^]*?\*\//g;function XV(a){const e={};return a.replace(HV,"").split(zV).forEach(t=>{if(t){const i=t.split(UV);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Fa(a){let e="";if(mr(a))e=a;else if(Za(a))for(let t=0;t<a.length;t++){const i=Fa(a[t]);i&&(e+=i+" ")}else if(Tn(a))for(const t in a)a[t]&&(e+=t+" ");return e.trim()}const qV="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",YV=d5(qV);function T6(a){return!!a||a===""}function KV(a,e){if(a.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<a.length;i++)t=ib(a[i],e[i]);return t}function ib(a,e){if(a===e)return!0;let t=C8(a),i=C8(e);if(t||i)return t&&i?a.getTime()===e.getTime():!1;if(t=Eu(a),i=Eu(e),t||i)return a===e;if(t=Za(a),i=Za(e),t||i)return t&&i?KV(a,e):!1;if(t=Tn(a),i=Tn(e),t||i){if(!t||!i)return!1;const n=Object.keys(a).length,s=Object.keys(e).length;if(n!==s)return!1;for(const r in a){const l=a.hasOwnProperty(r),u=e.hasOwnProperty(r);if(l&&!u||!l&&u||!ib(a[r],e[r]))return!1}}return String(a)===String(e)}function m5(a,e){return a.findIndex(t=>ib(t,e))}const E6=a=>!!(a&&a.__v_isRef===!0),K=a=>mr(a)?a:a==null?"":Za(a)||Tn(a)&&(a.toString===I6||!li(a.toString))?E6(a)?K(a.value):JSON.stringify(a,M6,2):String(a),M6=(a,e)=>E6(e)?M6(a,e.value):$g(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,n],s)=>(t[hS(i,s)+" =>"]=n,t),{})}:Gp(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>hS(t))}:Eu(e)?hS(e):Tn(e)&&!Za(e)&&!S6(e)?String(e):e,hS=(a,e="")=>{var t;return Eu(a)?`Symbol(${(t=a.description)!=null?t:e})`:a};let Xs;class L6{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Xs,!e&&Xs&&(this.index=(Xs.scopes||(Xs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Xs;try{return Xs=this,e()}finally{Xs=t}}}on(){++this._on===1&&(this.prevScope=Xs,Xs=this)}off(){this._on>0&&--this._on===0&&(Xs=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function R6(a){return new L6(a)}function k6(){return Xs}function jV(a,e=!1){Xs&&Xs.cleanups.push(a)}let Nn;const _S=new WeakSet;class P6{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Xs&&Xs.active&&Xs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_S.has(this)&&(_S.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||W6(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,S8(this),O6(this);const e=Nn,t=Su;Nn=this,Su=!0;try{return this.fn()}finally{F6(this),Nn=e,Su=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)p5(e);this.deps=this.depsTail=void 0,S8(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_S.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){dA(this)&&this.run()}get dirty(){return dA(this)}}let G6=0,D0,V0;function W6(a,e=!1){if(a.flags|=8,e){a.next=V0,V0=a;return}a.next=D0,D0=a}function f5(){G6++}function g5(){if(--G6>0)return;if(V0){let e=V0;for(V0=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let a;for(;D0;){let e=D0;for(D0=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){a||(a=i)}e=t}}if(a)throw a}function O6(a){for(let e=a.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function F6(a){let e,t=a.depsTail,i=t;for(;i;){const n=i.prevDep;i.version===-1?(i===t&&(t=n),p5(i),$V(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}a.deps=e,a.depsTail=t}function dA(a){for(let e=a.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(N6(e.dep.computed)||e.dep.version!==e.version))return!0;return!!a._dirty}function N6(a){if(a.flags&4&&!(a.flags&16)||(a.flags&=-17,a.globalVersion===f1)||(a.globalVersion=f1,!a.isSSR&&a.flags&128&&(!a.deps&&!a._dirty||!dA(a))))return;a.flags|=2;const e=a.dep,t=Nn,i=Su;Nn=a,Su=!0;try{O6(a);const n=a.fn(a._value);(e.version===0||r_(n,a._value))&&(a.flags|=128,a._value=n,e.version++)}catch(n){throw e.version++,n}finally{Nn=t,Su=i,F6(a),a.flags&=-3}}function p5(a,e=!1){const{dep:t,prevSub:i,nextSub:n}=a;if(i&&(i.nextSub=n,a.prevSub=void 0),n&&(n.prevSub=i,a.nextSub=void 0),t.subs===a&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)p5(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function $V(a){const{prevDep:e,nextDep:t}=a;e&&(e.nextDep=t,a.prevDep=void 0),t&&(t.prevDep=e,a.nextDep=void 0)}let Su=!0;const B6=[];function zd(){B6.push(Su),Su=!1}function Ud(){const a=B6.pop();Su=a===void 0?!0:a}function S8(a){const{cleanup:e}=a;if(a.cleanup=void 0,e){const t=Nn;Nn=void 0;try{e()}finally{Nn=t}}}let f1=0;class JV{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class y5{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Nn||!Su||Nn===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Nn)t=this.activeLink=new JV(Nn,this),Nn.deps?(t.prevDep=Nn.depsTail,Nn.depsTail.nextDep=t,Nn.depsTail=t):Nn.deps=Nn.depsTail=t,D6(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=Nn.depsTail,t.nextDep=void 0,Nn.depsTail.nextDep=t,Nn.depsTail=t,Nn.deps===t&&(Nn.deps=i)}return t}trigger(e){this.version++,f1++,this.notify(e)}notify(e){f5();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{g5()}}}function D6(a){if(a.dep.sc++,a.sub.flags&4){const e=a.dep.computed;if(e&&!a.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)D6(i)}const t=a.dep.subs;t!==a&&(a.prevSub=t,t&&(t.nextSub=a)),a.dep.subs=a}}const zx=new WeakMap,Wm=Symbol(""),hA=Symbol(""),g1=Symbol("");function Ks(a,e,t){if(Su&&Nn){let i=zx.get(a);i||zx.set(a,i=new Map);let n=i.get(t);n||(i.set(t,n=new y5),n.map=i,n.key=t),n.track()}}function Ed(a,e,t,i,n,s){const r=zx.get(a);if(!r){f1++;return}const l=u=>{u&&u.trigger()};if(f5(),e==="clear")r.forEach(l);else{const u=Za(a),d=u&&dC(t);if(u&&t==="length"){const h=Number(i);r.forEach((g,y)=>{(y==="length"||y===g1||!Eu(y)&&y>=h)&&l(g)})}else switch((t!==void 0||r.has(void 0))&&l(r.get(t)),d&&l(r.get(g1)),e){case"add":u?d&&l(r.get("length")):(l(r.get(Wm)),$g(a)&&l(r.get(hA)));break;case"delete":u||(l(r.get(Wm)),$g(a)&&l(r.get(hA)));break;case"set":$g(a)&&l(r.get(Wm));break}}g5()}function QV(a,e){const t=zx.get(a);return t&&t.get(e)}function dg(a){const e=Yi(a);return e===a?e:(Ks(e,"iterate",g1),Il(a)?e:e.map(Mu))}function gC(a){return Ks(a=Yi(a),"iterate",g1),a}function Nh(a,e){return Hd(a)?Sc(a)?yp(Mu(e)):yp(e):Mu(e)}const eZ={__proto__:null,[Symbol.iterator](){return mS(this,Symbol.iterator,a=>Nh(this,a))},concat(...a){return dg(this).concat(...a.map(e=>Za(e)?dg(e):e))},entries(){return mS(this,"entries",a=>(a[1]=Nh(this,a[1]),a))},every(a,e){return md(this,"every",a,e,void 0,arguments)},filter(a,e){return md(this,"filter",a,e,t=>t.map(i=>Nh(this,i)),arguments)},find(a,e){return md(this,"find",a,e,t=>Nh(this,t),arguments)},findIndex(a,e){return md(this,"findIndex",a,e,void 0,arguments)},findLast(a,e){return md(this,"findLast",a,e,t=>Nh(this,t),arguments)},findLastIndex(a,e){return md(this,"findLastIndex",a,e,void 0,arguments)},forEach(a,e){return md(this,"forEach",a,e,void 0,arguments)},includes(...a){return fS(this,"includes",a)},indexOf(...a){return fS(this,"indexOf",a)},join(a){return dg(this).join(a)},lastIndexOf(...a){return fS(this,"lastIndexOf",a)},map(a,e){return md(this,"map",a,e,void 0,arguments)},pop(){return Yy(this,"pop")},push(...a){return Yy(this,"push",a)},reduce(a,...e){return A8(this,"reduce",a,e)},reduceRight(a,...e){return A8(this,"reduceRight",a,e)},shift(){return Yy(this,"shift")},some(a,e){return md(this,"some",a,e,void 0,arguments)},splice(...a){return Yy(this,"splice",a)},toReversed(){return dg(this).toReversed()},toSorted(a){return dg(this).toSorted(a)},toSpliced(...a){return dg(this).toSpliced(...a)},unshift(...a){return Yy(this,"unshift",a)},values(){return mS(this,"values",a=>Nh(this,a))}};function mS(a,e,t){const i=gC(a),n=i[e]();return i!==a&&!Il(a)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.done||(s.value=t(s.value)),s}),n}const tZ=Array.prototype;function md(a,e,t,i,n,s){const r=gC(a),l=r!==a&&!Il(a),u=r[e];if(u!==tZ[e]){const g=u.apply(a,s);return l?Mu(g):g}let d=t;r!==a&&(l?d=function(g,y){return t.call(this,Nh(a,g),y,a)}:t.length>2&&(d=function(g,y){return t.call(this,g,y,a)}));const h=u.call(r,d,i);return l&&n?n(h):h}function A8(a,e,t,i){const n=gC(a);let s=t;return n!==a&&(Il(a)?t.length>3&&(s=function(r,l,u){return t.call(this,r,l,u,a)}):s=function(r,l,u){return t.call(this,r,Nh(a,l),u,a)}),n[e](s,...i)}function fS(a,e,t){const i=Yi(a);Ks(i,"iterate",g1);const n=i[e](...t);return(n===-1||n===!1)&&yC(t[0])?(t[0]=Yi(t[0]),i[e](...t)):n}function Yy(a,e,t=[]){zd(),f5();const i=Yi(a)[e].apply(a,t);return g5(),Ud(),i}const aZ=d5("__proto__,__v_isRef,__isVue"),V6=new Set(Object.getOwnPropertyNames(Symbol).filter(a=>a!=="arguments"&&a!=="caller").map(a=>Symbol[a]).filter(Eu));function iZ(a){Eu(a)||(a=String(a));const e=Yi(this);return Ks(e,"has",a),e.hasOwnProperty(a)}class Z6{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const n=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!n;if(t==="__v_isReadonly")return n;if(t==="__v_isShallow")return s;if(t==="__v_raw")return i===(n?s?_Z:X6:s?H6:U6).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const r=Za(e);if(!n){let u;if(r&&(u=eZ[t]))return u;if(t==="hasOwnProperty")return iZ}const l=Reflect.get(e,t,Pn(e)?e:i);if((Eu(t)?V6.has(t):aZ(t))||(n||Ks(e,"get",t),s))return l;if(Pn(l)){const u=r&&dC(t)?l:l.value;return n&&Tn(u)?mA(u):u}return Tn(l)?n?mA(l):pC(l):l}}class z6 extends Z6{constructor(e=!1){super(!1,e)}set(e,t,i,n){let s=e[t];const r=Za(e)&&dC(t);if(!this._isShallow){const d=Hd(s);if(!Il(i)&&!Hd(i)&&(s=Yi(s),i=Yi(i)),!r&&Pn(s)&&!Pn(i))return d||(s.value=i),!0}const l=r?Number(t)<e.length:pn(e,t),u=Reflect.set(e,t,i,Pn(e)?e:n);return e===Yi(n)&&(l?r_(i,s)&&Ed(e,"set",t,i):Ed(e,"add",t,i)),u}deleteProperty(e,t){const i=pn(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&Ed(e,"delete",t,void 0),n}has(e,t){const i=Reflect.has(e,t);return(!Eu(t)||!V6.has(t))&&Ks(e,"has",t),i}ownKeys(e){return Ks(e,"iterate",Za(e)?"length":Wm),Reflect.ownKeys(e)}}class nZ extends Z6{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const rZ=new z6,sZ=new nZ,oZ=new z6(!0);const _A=a=>a,qv=a=>Reflect.getPrototypeOf(a);function lZ(a,e,t){return function(...i){const n=this.__v_raw,s=Yi(n),r=$g(s),l=a==="entries"||a===Symbol.iterator&&r,u=a==="keys"&&r,d=n[a](...i),h=t?_A:e?yp:Mu;return!e&&Ks(s,"iterate",u?hA:Wm),{next(){const{value:g,done:y}=d.next();return y?{value:g,done:y}:{value:l?[h(g[0]),h(g[1])]:h(g),done:y}},[Symbol.iterator](){return this}}}}function Yv(a){return function(...e){return a==="delete"?!1:a==="clear"?void 0:this}}function uZ(a,e){const t={get(n){const s=this.__v_raw,r=Yi(s),l=Yi(n);a||(r_(n,l)&&Ks(r,"get",n),Ks(r,"get",l));const{has:u}=qv(r),d=e?_A:a?yp:Mu;if(u.call(r,n))return d(s.get(n));if(u.call(r,l))return d(s.get(l));s!==r&&s.get(n)},get size(){const n=this.__v_raw;return!a&&Ks(Yi(n),"iterate",Wm),n.size},has(n){const s=this.__v_raw,r=Yi(s),l=Yi(n);return a||(r_(n,l)&&Ks(r,"has",n),Ks(r,"has",l)),n===l?s.has(n):s.has(n)||s.has(l)},forEach(n,s){const r=this,l=r.__v_raw,u=Yi(l),d=e?_A:a?yp:Mu;return!a&&Ks(u,"iterate",Wm),l.forEach((h,g)=>n.call(s,d(h),d(g),r))}};return ys(t,a?{add:Yv("add"),set:Yv("set"),delete:Yv("delete"),clear:Yv("clear")}:{add(n){!e&&!Il(n)&&!Hd(n)&&(n=Yi(n));const s=Yi(this);return qv(s).has.call(s,n)||(s.add(n),Ed(s,"add",n,n)),this},set(n,s){!e&&!Il(s)&&!Hd(s)&&(s=Yi(s));const r=Yi(this),{has:l,get:u}=qv(r);let d=l.call(r,n);d||(n=Yi(n),d=l.call(r,n));const h=u.call(r,n);return r.set(n,s),d?r_(s,h)&&Ed(r,"set",n,s):Ed(r,"add",n,s),this},delete(n){const s=Yi(this),{has:r,get:l}=qv(s);let u=r.call(s,n);u||(n=Yi(n),u=r.call(s,n)),l&&l.call(s,n);const d=s.delete(n);return u&&Ed(s,"delete",n,void 0),d},clear(){const n=Yi(this),s=n.size!==0,r=n.clear();return s&&Ed(n,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=lZ(n,a,e)}),t}function b5(a,e){const t=uZ(a,e);return(i,n,s)=>n==="__v_isReactive"?!a:n==="__v_isReadonly"?a:n==="__v_raw"?i:Reflect.get(pn(t,n)&&n in i?t:i,n,s)}const cZ={get:b5(!1,!1)},dZ={get:b5(!1,!0)},hZ={get:b5(!0,!1)};const U6=new WeakMap,H6=new WeakMap,X6=new WeakMap,_Z=new WeakMap;function mZ(a){switch(a){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fZ(a){return a.__v_skip||!Object.isExtensible(a)?0:mZ(BV(a))}function pC(a){return Hd(a)?a:v5(a,!1,rZ,cZ,U6)}function gZ(a){return v5(a,!1,oZ,dZ,H6)}function mA(a){return v5(a,!0,sZ,hZ,X6)}function v5(a,e,t,i,n){if(!Tn(a)||a.__v_raw&&!(e&&a.__v_isReactive))return a;const s=fZ(a);if(s===0)return a;const r=n.get(a);if(r)return r;const l=new Proxy(a,s===2?i:t);return n.set(a,l),l}function Sc(a){return Hd(a)?Sc(a.__v_raw):!!(a&&a.__v_isReactive)}function Hd(a){return!!(a&&a.__v_isReadonly)}function Il(a){return!!(a&&a.__v_isShallow)}function yC(a){return a?!!a.__v_raw:!1}function Yi(a){const e=a&&a.__v_raw;return e?Yi(e):a}function x5(a){return!pn(a,"__v_skip")&&Object.isExtensible(a)&&A6(a,"__v_skip",!0),a}const Mu=a=>Tn(a)?pC(a):a,yp=a=>Tn(a)?mA(a):a;function Pn(a){return a?a.__v_isRef===!0:!1}function Ye(a){return q6(a,!1)}function Ai(a){return q6(a,!0)}function q6(a,e){return Pn(a)?a:new pZ(a,e)}class pZ{constructor(e,t){this.dep=new y5,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Yi(e),this._value=t?e:Mu(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||Il(e)||Hd(e);e=i?e:Yi(e),r_(e,t)&&(this._rawValue=e,this._value=i?e:Mu(e),this.dep.trigger())}}function R(a){return Pn(a)?a.value:a}function yZ(a){return li(a)?a():R(a)}const bZ={get:(a,e,t)=>e==="__v_raw"?a:R(Reflect.get(a,e,t)),set:(a,e,t,i)=>{const n=a[e];return Pn(n)&&!Pn(t)?(n.value=t,!0):Reflect.set(a,e,t,i)}};function Y6(a){return Sc(a)?a:new Proxy(a,bZ)}function vZ(a){const e=Za(a)?new Array(a.length):{};for(const t in a)e[t]=j6(a,t);return e}class xZ{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0,this._raw=Yi(e);let n=!0,s=e;if(!Za(e)||!dC(String(t)))do n=!yC(s)||Il(s);while(n&&(s=s.__v_raw));this._shallow=n}get value(){let e=this._object[this._key];return this._shallow&&(e=R(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&Pn(this._raw[this._key])){const t=this._object[this._key];if(Pn(t)){t.value=e;return}}this._object[this._key]=e}get dep(){return QV(this._raw,this._key)}}class wZ{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function K6(a,e,t){return Pn(a)?a:li(a)?new wZ(a):Tn(a)&&arguments.length>1?j6(a,e,t):Ye(a)}function j6(a,e,t){return new xZ(a,e,t)}class CZ{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new y5(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=f1-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Nn!==this)return W6(this,!0),!0}get value(){const e=this.dep.track();return N6(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function IZ(a,e,t=!1){let i,n;return li(a)?i=a:(i=a.get,n=a.set),new CZ(i,n,t)}const Kv={},Ux=new WeakMap;let ym;function SZ(a,e=!1,t=ym){if(t){let i=Ux.get(t);i||Ux.set(t,i=[]),i.push(a)}}function AZ(a,e,t=Mn){const{immediate:i,deep:n,once:s,scheduler:r,augmentJob:l,call:u}=t,d=F=>n?F:Il(F)||n===!1||n===0?Md(F,1):Md(F);let h,g,y,x,C=!1,I=!1;if(Pn(a)?(g=()=>a.value,C=Il(a)):Sc(a)?(g=()=>d(a),C=!0):Za(a)?(I=!0,C=a.some(F=>Sc(F)||Il(F)),g=()=>a.map(F=>{if(Pn(F))return F.value;if(Sc(F))return d(F);if(li(F))return u?u(F,2):F()})):li(a)?e?g=u?()=>u(a,2):a:g=()=>{if(y){zd();try{y()}finally{Ud()}}const F=ym;ym=h;try{return u?u(a,3,[x]):a(x)}finally{ym=F}}:g=Ic,e&&n){const F=g,B=n===!0?1/0:n;g=()=>Md(F(),B)}const A=k6(),E=()=>{h.stop(),A&&A.active&&_5(A.effects,h)};if(s&&e){const F=e;e=(...B)=>{F(...B),E()}}let L=I?new Array(a.length).fill(Kv):Kv;const G=F=>{if(!(!(h.flags&1)||!h.dirty&&!F))if(e){const B=h.run();if(n||C||(I?B.some((Z,Y)=>r_(Z,L[Y])):r_(B,L))){y&&y();const Z=ym;ym=h;try{const Y=[B,L===Kv?void 0:I&&L[0]===Kv?[]:L,x];L=B,u?u(e,3,Y):e(...Y)}finally{ym=Z}}}else h.run()};return l&&l(G),h=new P6(g),h.scheduler=r?()=>r(G,!1):G,x=F=>SZ(F,!1,h),y=h.onStop=()=>{const F=Ux.get(h);if(F){if(u)u(F,4);else for(const B of F)B();Ux.delete(h)}},e?i?G(!0):L=h.run():r?r(G.bind(null,!0),!0):h.run(),E.pause=h.pause.bind(h),E.resume=h.resume.bind(h),E.stop=E,E}function Md(a,e=1/0,t){if(e<=0||!Tn(a)||a.__v_skip||(t=t||new Map,(t.get(a)||0)>=e))return a;if(t.set(a,e),e--,Pn(a))Md(a.value,e,t);else if(Za(a))for(let i=0;i<a.length;i++)Md(a[i],e,t);else if(Gp(a)||$g(a))a.forEach(i=>{Md(i,e,t)});else if(S6(a)){for(const i in a)Md(a[i],e,t);for(const i of Object.getOwnPropertySymbols(a))Object.prototype.propertyIsEnumerable.call(a,i)&&Md(a[i],e,t)}return a}function nb(a,e,t,i){try{return i?a(...i):a()}catch(n){bC(n,e,t)}}function Lu(a,e,t,i){if(li(a)){const n=nb(a,e,t,i);return n&&C6(n)&&n.catch(s=>{bC(s,e,t)}),n}if(Za(a)){const n=[];for(let s=0;s<a.length;s++)n.push(Lu(a[s],e,t,i));return n}}function bC(a,e,t,i=!0){const n=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:r}=e&&e.appContext.config||Mn;if(e){let l=e.parent;const u=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const h=l.ec;if(h){for(let g=0;g<h.length;g++)if(h[g](a,u,d)===!1)return}l=l.parent}if(s){zd(),nb(s,null,10,[a,u,d]),Ud();return}}TZ(a,t,n,i,r)}function TZ(a,e,t,i=!0,n=!1){if(n)throw a;console.error(a)}const bo=[];let _c=-1;const Jg=[];let Bh=null,Tg=0;const $6=Promise.resolve();let Hx=null;function so(a){const e=Hx||$6;return a?e.then(this?a.bind(this):a):e}function EZ(a){let e=_c+1,t=bo.length;for(;e<t;){const i=e+t>>>1,n=bo[i],s=p1(n);s<a||s===a&&n.flags&2?e=i+1:t=i}return e}function w5(a){if(!(a.flags&1)){const e=p1(a),t=bo[bo.length-1];!t||!(a.flags&2)&&e>=p1(t)?bo.push(a):bo.splice(EZ(e),0,a),a.flags|=1,J6()}}function J6(){Hx||(Hx=$6.then(e7))}function MZ(a){Za(a)?Jg.push(...a):Bh&&a.id===-1?Bh.splice(Tg+1,0,a):a.flags&1||(Jg.push(a),a.flags|=1),J6()}function T8(a,e,t=_c+1){for(;t<bo.length;t++){const i=bo[t];if(i&&i.flags&2){if(a&&i.id!==a.uid)continue;bo.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Q6(a){if(Jg.length){const e=[...new Set(Jg)].sort((t,i)=>p1(t)-p1(i));if(Jg.length=0,Bh){Bh.push(...e);return}for(Bh=e,Tg=0;Tg<Bh.length;Tg++){const t=Bh[Tg];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Bh=null,Tg=0}}const p1=a=>a.id==null?a.flags&2?-1:1/0:a.id;function e7(a){try{for(_c=0;_c<bo.length;_c++){const e=bo[_c];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),nb(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;_c<bo.length;_c++){const e=bo[_c];e&&(e.flags&=-2)}_c=-1,bo.length=0,Q6(),Hx=null,(bo.length||Jg.length)&&e7()}}let Rs=null,t7=null;function Xx(a){const e=Rs;return Rs=a,t7=a&&a.type.__scopeId||null,e}function Ht(a,e=Rs,t){if(!e||a._n)return a;const i=(...n)=>{i._d&&Kx(-1);const s=Xx(e);let r;try{r=a(...n)}finally{Xx(s),i._d&&Kx(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function Sa(a,e){if(Rs===null)return a;const t=AC(Rs),i=a.dirs||(a.dirs=[]);for(let n=0;n<e.length;n++){let[s,r,l,u=Mn]=e[n];s&&(li(s)&&(s={mounted:s,updated:s}),s.deep&&Md(r),i.push({dir:s,instance:t,value:r,oldValue:void 0,arg:l,modifiers:u}))}return a}function sm(a,e,t,i){const n=a.dirs,s=e&&e.dirs;for(let r=0;r<n.length;r++){const l=n[r];s&&(l.oldValue=s[r].value);let u=l.dir[i];u&&(zd(),Lu(u,t,8,[a.el,l,a,e]),Ud())}}const a7=Symbol("_vte"),i7=a=>a.__isTeleport,Z0=a=>a&&(a.disabled||a.disabled===""),E8=a=>a&&(a.defer||a.defer===""),M8=a=>typeof SVGElement<"u"&&a instanceof SVGElement,L8=a=>typeof MathMLElement=="function"&&a instanceof MathMLElement,fA=(a,e)=>{const t=a&&a.to;return mr(t)?e?e(t):null:t},n7={name:"Teleport",__isTeleport:!0,process(a,e,t,i,n,s,r,l,u,d){const{mc:h,pc:g,pbc:y,o:{insert:x,querySelector:C,createText:I,createComment:A}}=d,E=Z0(e.props);let{shapeFlag:L,children:G,dynamicChildren:F}=e;if(a==null){const B=e.el=I(""),Z=e.anchor=I("");x(B,t,i),x(Z,t,i);const Y=(te,ce)=>{L&16&&h(G,te,ce,n,s,r,l,u)},$=()=>{const te=e.target=fA(e.props,C),ce=r7(te,e,I,x);te&&(r!=="svg"&&M8(te)?r="svg":r!=="mathml"&&L8(te)&&(r="mathml"),n&&n.isCE&&(n.ce._teleportTargets||(n.ce._teleportTargets=new Set)).add(te),E||(Y(te,ce),ex(e,!1)))};E&&(Y(t,Z),ex(e,!0)),E8(e.props)?(e.el.__isMounted=!1,yo(()=>{$(),delete e.el.__isMounted},s)):$()}else{if(E8(e.props)&&a.el.__isMounted===!1){yo(()=>{n7.process(a,e,t,i,n,s,r,l,u,d)},s);return}e.el=a.el,e.targetStart=a.targetStart;const B=e.anchor=a.anchor,Z=e.target=a.target,Y=e.targetAnchor=a.targetAnchor,$=Z0(a.props),te=$?t:Z,ce=$?B:Y;if(r==="svg"||M8(Z)?r="svg":(r==="mathml"||L8(Z))&&(r="mathml"),F?(y(a.dynamicChildren,F,te,n,s,r,l),E5(a,e,!0)):u||g(a,e,te,ce,n,s,r,l,!1),E)$?e.props&&a.props&&e.props.to!==a.props.to&&(e.props.to=a.props.to):jv(e,t,B,d,1);else if((e.props&&e.props.to)!==(a.props&&a.props.to)){const me=e.target=fA(e.props,C);me&&jv(e,me,null,d,0)}else $&&jv(e,Z,Y,d,1);ex(e,E)}},remove(a,e,t,{um:i,o:{remove:n}},s){const{shapeFlag:r,children:l,anchor:u,targetStart:d,targetAnchor:h,target:g,props:y}=a;if(g&&(n(d),n(h)),s&&n(u),r&16){const x=s||!Z0(y);for(let C=0;C<l.length;C++){const I=l[C];i(I,e,t,x,!!I.dynamicChildren)}}},move:jv,hydrate:LZ};function jv(a,e,t,{o:{insert:i},m:n},s=2){s===0&&i(a.targetAnchor,e,t);const{el:r,anchor:l,shapeFlag:u,children:d,props:h}=a,g=s===2;if(g&&i(r,e,t),(!g||Z0(h))&&u&16)for(let y=0;y<d.length;y++)n(d[y],e,t,2);g&&i(l,e,t)}function LZ(a,e,t,i,n,s,{o:{nextSibling:r,parentNode:l,querySelector:u,insert:d,createText:h}},g){function y(I,A,E,L){A.anchor=g(r(I),A,l(I),t,i,n,s),A.targetStart=E,A.targetAnchor=L}const x=e.target=fA(e.props,u),C=Z0(e.props);if(x){const I=x._lpa||x.firstChild;if(e.shapeFlag&16)if(C)y(a,e,I,I&&r(I));else{e.anchor=r(a);let A=I;for(;A;){if(A&&A.nodeType===8){if(A.data==="teleport start anchor")e.targetStart=A;else if(A.data==="teleport anchor"){e.targetAnchor=A,x._lpa=e.targetAnchor&&r(e.targetAnchor);break}}A=r(A)}e.targetAnchor||r7(x,e,h,d),g(I&&r(I),e,x,t,i,n,s)}ex(e,C)}else C&&e.shapeFlag&16&&y(a,e,a,r(a));return e.anchor&&r(e.anchor)}const vC=n7;function ex(a,e){const t=a.ctx;if(t&&t.ut){let i,n;for(e?(i=a.el,n=a.anchor):(i=a.targetStart,n=a.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}function r7(a,e,t,i){const n=e.targetStart=t(""),s=e.targetAnchor=t("");return n[a7]=s,a&&(i(n,a),i(s,a)),s}const Id=Symbol("_leaveCb"),$v=Symbol("_enterCb");function RZ(){const a={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fn(()=>{a.isMounted=!0}),sf(()=>{a.isUnmounting=!0}),a}const Nl=[Function,Array],s7={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Nl,onEnter:Nl,onAfterEnter:Nl,onEnterCancelled:Nl,onBeforeLeave:Nl,onLeave:Nl,onAfterLeave:Nl,onLeaveCancelled:Nl,onBeforeAppear:Nl,onAppear:Nl,onAfterAppear:Nl,onAppearCancelled:Nl},o7=a=>{const e=a.subTree;return e.component?o7(e.component):e},kZ={name:"BaseTransition",props:s7,setup(a,{slots:e}){const t=sb(),i=RZ();return()=>{const n=e.default&&c7(e.default(),!0);if(!n||!n.length)return;const s=l7(n),r=Yi(a),{mode:l}=r;if(i.isLeaving)return gS(s);const u=R8(s);if(!u)return gS(s);let d=gA(u,r,i,t,g=>d=g);u.type!==$s&&y1(u,d);let h=t.subTree&&R8(t.subTree);if(h&&h.type!==$s&&!Im(h,u)&&o7(t).type!==$s){let g=gA(h,r,i,t);if(y1(h,g),l==="out-in"&&u.type!==$s)return i.isLeaving=!0,g.afterLeave=()=>{i.isLeaving=!1,t.job.flags&8||t.update(),delete g.afterLeave,h=void 0},gS(s);l==="in-out"&&u.type!==$s?g.delayLeave=(y,x,C)=>{const I=u7(i,h);I[String(h.key)]=h,y[Id]=()=>{x(),y[Id]=void 0,delete d.delayedLeave,h=void 0},d.delayedLeave=()=>{C(),delete d.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return s}}};function l7(a){let e=a[0];if(a.length>1){for(const t of a)if(t.type!==$s){e=t;break}}return e}const PZ=kZ;function u7(a,e){const{leavingVNodes:t}=a;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function gA(a,e,t,i,n){const{appear:s,mode:r,persisted:l=!1,onBeforeEnter:u,onEnter:d,onAfterEnter:h,onEnterCancelled:g,onBeforeLeave:y,onLeave:x,onAfterLeave:C,onLeaveCancelled:I,onBeforeAppear:A,onAppear:E,onAfterAppear:L,onAppearCancelled:G}=e,F=String(a.key),B=u7(t,a),Z=(te,ce)=>{te&&Lu(te,i,9,ce)},Y=(te,ce)=>{const me=ce[1];Z(te,ce),Za(te)?te.every(X=>X.length<=1)&&me():te.length<=1&&me()},$={mode:r,persisted:l,beforeEnter(te){let ce=u;if(!t.isMounted)if(s)ce=A||u;else return;te[Id]&&te[Id](!0);const me=B[F];me&&Im(a,me)&&me.el[Id]&&me.el[Id](),Z(ce,[te])},enter(te){let ce=d,me=h,X=g;if(!t.isMounted)if(s)ce=E||d,me=L||h,X=G||g;else return;let de=!1;const N=te[$v]=ne=>{de||(de=!0,ne?Z(X,[te]):Z(me,[te]),$.delayedLeave&&$.delayedLeave(),te[$v]=void 0)};ce?Y(ce,[te,N]):N()},leave(te,ce){const me=String(a.key);if(te[$v]&&te[$v](!0),t.isUnmounting)return ce();Z(y,[te]);let X=!1;const de=te[Id]=N=>{X||(X=!0,ce(),N?Z(I,[te]):Z(C,[te]),te[Id]=void 0,B[me]===a&&delete B[me])};B[me]=a,x?Y(x,[te,de]):de()},clone(te){const ce=gA(te,e,t,i,n);return n&&n(ce),ce}};return $}function gS(a){if(xC(a))return a=d_(a),a.children=null,a}function R8(a){if(!xC(a))return i7(a.type)&&a.children?l7(a.children):a;if(a.component)return a.component.subTree;const{shapeFlag:e,children:t}=a;if(t){if(e&16)return t[0];if(e&32&&li(t.default))return t.default()}}function y1(a,e){a.shapeFlag&6&&a.component?(a.transition=e,y1(a.component.subTree,e)):a.shapeFlag&128?(a.ssContent.transition=e.clone(a.ssContent),a.ssFallback.transition=e.clone(a.ssFallback)):a.transition=e}function c7(a,e=!1,t){let i=[],n=0;for(let s=0;s<a.length;s++){let r=a[s];const l=t==null?r.key:String(t)+String(r.key!=null?r.key:s);r.type===Tt?(r.patchFlag&128&&n++,i=i.concat(c7(r.children,e,l))):(e||r.type!==$s)&&i.push(l!=null?d_(r,{key:l}):r)}if(n>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function rt(a,e){return li(a)?ys({name:a.name},e,{setup:a}):a}function d7(a){a.ids=[a.ids[0]+a.ids[2]+++"-",0,0]}function b1(a){const e=sb(),t=Ai(null);if(e){const n=e.refs===Mn?e.refs={}:e.refs;Object.defineProperty(n,a,{enumerable:!0,get:()=>t.value,set:s=>t.value=s})}return t}const qx=new WeakMap;function z0(a,e,t,i,n=!1){if(Za(a)){a.forEach((C,I)=>z0(C,e&&(Za(e)?e[I]:e),t,i,n));return}if(Qg(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&z0(a,e,t,i.component.subTree);return}const s=i.shapeFlag&4?AC(i.component):i.el,r=n?null:s,{i:l,r:u}=a,d=e&&e.r,h=l.refs===Mn?l.refs={}:l.refs,g=l.setupState,y=Yi(g),x=g===Mn?w6:C=>pn(y,C);if(d!=null&&d!==u){if(k8(e),mr(d))h[d]=null,x(d)&&(g[d]=null);else if(Pn(d)){d.value=null;const C=e;C.k&&(h[C.k]=null)}}if(li(u))nb(u,l,12,[r,h]);else{const C=mr(u),I=Pn(u);if(C||I){const A=()=>{if(a.f){const E=C?x(u)?g[u]:h[u]:u.value;if(n)Za(E)&&_5(E,s);else if(Za(E))E.includes(s)||E.push(s);else if(C)h[u]=[s],x(u)&&(g[u]=h[u]);else{const L=[s];u.value=L,a.k&&(h[a.k]=L)}}else C?(h[u]=r,x(u)&&(g[u]=r)):I&&(u.value=r,a.k&&(h[a.k]=r))};if(r){const E=()=>{A(),qx.delete(a)};E.id=-1,qx.set(a,E),yo(E,t)}else k8(a),A()}}}function k8(a){const e=qx.get(a);e&&(e.flags|=8,qx.delete(a))}fC().requestIdleCallback;fC().cancelIdleCallback;const Qg=a=>!!a.type.__asyncLoader,xC=a=>a.type.__isKeepAlive;function h7(a,e){_7(a,"a",e)}function GZ(a,e){_7(a,"da",e)}function _7(a,e,t=Js){const i=a.__wdc||(a.__wdc=()=>{let n=t;for(;n;){if(n.isDeactivated)return;n=n.parent}return a()});if(wC(e,i,t),t){let n=t.parent;for(;n&&n.parent;)xC(n.parent.vnode)&&WZ(i,e,t,n),n=n.parent}}function WZ(a,e,t,i){const n=wC(e,a,i,!0);Nr(()=>{_5(i[e],n)},t)}function wC(a,e,t=Js,i=!1){if(t){const n=t[a]||(t[a]=[]),s=e.__weh||(e.__weh=(...r)=>{zd();const l=ob(t),u=Lu(e,t,a,r);return l(),Ud(),u});return i?n.unshift(s):n.push(s),s}}const eh=a=>(e,t=Js)=>{(!w1||a==="sp")&&wC(a,(...i)=>e(...i),t)},m7=eh("bm"),fn=eh("m"),OZ=eh("bu"),FZ=eh("u"),sf=eh("bum"),Nr=eh("um"),NZ=eh("sp"),BZ=eh("rtg"),DZ=eh("rtc");function VZ(a,e=Js){wC("ec",a,e)}const C5="components",ZZ="directives";function zZ(a,e){return I5(C5,a,!0,e)||a}const f7=Symbol.for("v-ndc");function rb(a){return mr(a)?I5(C5,a,!1)||a:a||f7}function El(a){return I5(ZZ,a)}function I5(a,e,t=!0,i=!1){const n=Rs||Js;if(n){const s=n.type;if(a===C5){const l=Lz(s,!1);if(l&&(l===e||l===Jl(e)||l===_C(Jl(e))))return s}const r=P8(n[a]||s[a],e)||P8(n.appContext[a],e);return!r&&i?s:r}}function P8(a,e){return a&&(a[e]||a[Jl(e)]||a[_C(Jl(e))])}function gi(a,e,t,i){let n;const s=t,r=Za(a);if(r||mr(a)){const l=r&&Sc(a);let u=!1,d=!1;l&&(u=!Il(a),d=Hd(a),a=gC(a)),n=new Array(a.length);for(let h=0,g=a.length;h<g;h++)n[h]=e(u?d?yp(Mu(a[h])):Mu(a[h]):a[h],h,void 0,s)}else if(typeof a=="number"){n=new Array(a);for(let l=0;l<a;l++)n[l]=e(l+1,l,void 0,s)}else if(Tn(a))if(a[Symbol.iterator])n=Array.from(a,(l,u)=>e(l,u,void 0,s));else{const l=Object.keys(a);n=new Array(l.length);for(let u=0,d=l.length;u<d;u++){const h=l[u];n[u]=e(a[h],h,u,s)}}else n=[];return n}function ja(a,e,t={},i,n){if(Rs.ce||Rs.parent&&Qg(Rs.parent)&&Rs.parent.ce){const d=Object.keys(t).length>0;return e!=="default"&&(t.name=e),U(),Lt(Tt,null,[gt("slot",t,i&&i())],d?-2:64)}let s=a[e];s&&s._c&&(s._d=!1),U();const r=s&&g7(s(t)),l=t.key||r&&r.key,u=Lt(Tt,{key:(l&&!Eu(l)?l:`_${e}`)+(!r&&i?"_fb":"")},r||(i?i():[]),r&&a._===1?64:-2);return!n&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),s&&s._c&&(s._d=!0),u}function g7(a){return a.some(e=>x1(e)?!(e.type===$s||e.type===Tt&&!g7(e.children)):!0)?a:null}const pA=a=>a?G7(a)?AC(a):pA(a.parent):null,U0=ys(Object.create(null),{$:a=>a,$el:a=>a.vnode.el,$data:a=>a.data,$props:a=>a.props,$attrs:a=>a.attrs,$slots:a=>a.slots,$refs:a=>a.refs,$parent:a=>pA(a.parent),$root:a=>pA(a.root),$host:a=>a.ce,$emit:a=>a.emit,$options:a=>y7(a),$forceUpdate:a=>a.f||(a.f=()=>{w5(a.update)}),$nextTick:a=>a.n||(a.n=so.bind(a.proxy)),$watch:a=>tz.bind(a)}),pS=(a,e)=>a!==Mn&&!a.__isScriptSetup&&pn(a,e),UZ={get({_:a},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:n,props:s,accessCache:r,type:l,appContext:u}=a;if(e[0]!=="$"){const y=r[e];if(y!==void 0)switch(y){case 1:return i[e];case 2:return n[e];case 4:return t[e];case 3:return s[e]}else{if(pS(i,e))return r[e]=1,i[e];if(n!==Mn&&pn(n,e))return r[e]=2,n[e];if(pn(s,e))return r[e]=3,s[e];if(t!==Mn&&pn(t,e))return r[e]=4,t[e];yA&&(r[e]=0)}}const d=U0[e];let h,g;if(d)return e==="$attrs"&&Ks(a.attrs,"get",""),d(a);if((h=l.__cssModules)&&(h=h[e]))return h;if(t!==Mn&&pn(t,e))return r[e]=4,t[e];if(g=u.config.globalProperties,pn(g,e))return g[e]},set({_:a},e,t){const{data:i,setupState:n,ctx:s}=a;return pS(n,e)?(n[e]=t,!0):i!==Mn&&pn(i,e)?(i[e]=t,!0):pn(a.props,e)||e[0]==="$"&&e.slice(1)in a?!1:(s[e]=t,!0)},has({_:{data:a,setupState:e,accessCache:t,ctx:i,appContext:n,props:s,type:r}},l){let u;return!!(t[l]||a!==Mn&&l[0]!=="$"&&pn(a,l)||pS(e,l)||pn(s,l)||pn(i,l)||pn(U0,l)||pn(n.config.globalProperties,l)||(u=r.__cssModules)&&u[l])},defineProperty(a,e,t){return t.get!=null?a._.accessCache[e]=0:pn(t,"value")&&this.set(a,e,t.value,null),Reflect.defineProperty(a,e,t)}};function G8(a){return Za(a)?a.reduce((e,t)=>(e[t]=null,e),{}):a}let yA=!0;function HZ(a){const e=y7(a),t=a.proxy,i=a.ctx;yA=!1,e.beforeCreate&&W8(e.beforeCreate,a,"bc");const{data:n,computed:s,methods:r,watch:l,provide:u,inject:d,created:h,beforeMount:g,mounted:y,beforeUpdate:x,updated:C,activated:I,deactivated:A,beforeDestroy:E,beforeUnmount:L,destroyed:G,unmounted:F,render:B,renderTracked:Z,renderTriggered:Y,errorCaptured:$,serverPrefetch:te,expose:ce,inheritAttrs:me,components:X,directives:de,filters:N}=e;if(d&&XZ(d,i,null),r)for(const _e in r){const ke=r[_e];li(ke)&&(i[_e]=ke.bind(t))}if(n){const _e=n.call(t,t);Tn(_e)&&(a.data=pC(_e))}if(yA=!0,s)for(const _e in s){const ke=s[_e],Ie=li(ke)?ke.bind(t,t):li(ke.get)?ke.get.bind(t,t):Ic,re=!li(ke)&&li(ke.set)?ke.set.bind(t):Ic,Q=St({get:Ie,set:re});Object.defineProperty(i,_e,{enumerable:!0,configurable:!0,get:()=>Q.value,set:J=>Q.value=J})}if(l)for(const _e in l)p7(l[_e],i,t,_e);if(u){const _e=li(u)?u.call(t):u;Reflect.ownKeys(_e).forEach(ke=>{CC(ke,_e[ke])})}h&&W8(h,a,"c");function le(_e,ke){Za(ke)?ke.forEach(Ie=>_e(Ie.bind(t))):ke&&_e(ke.bind(t))}if(le(m7,g),le(fn,y),le(OZ,x),le(FZ,C),le(h7,I),le(GZ,A),le(VZ,$),le(DZ,Z),le(BZ,Y),le(sf,L),le(Nr,F),le(NZ,te),Za(ce))if(ce.length){const _e=a.exposed||(a.exposed={});ce.forEach(ke=>{Object.defineProperty(_e,ke,{get:()=>t[ke],set:Ie=>t[ke]=Ie,enumerable:!0})})}else a.exposed||(a.exposed={});B&&a.render===Ic&&(a.render=B),me!=null&&(a.inheritAttrs=me),X&&(a.components=X),de&&(a.directives=de),te&&d7(a)}function XZ(a,e,t=Ic){Za(a)&&(a=bA(a));for(const i in a){const n=a[i];let s;Tn(n)?"default"in n?s=Ps(n.from||i,n.default,!0):s=Ps(n.from||i):s=Ps(n),Pn(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:r=>s.value=r}):e[i]=s}}function W8(a,e,t){Lu(Za(a)?a.map(i=>i.bind(e.proxy)):a.bind(e.proxy),e,t)}function p7(a,e,t,i){let n=i.includes(".")?v7(t,i):()=>t[i];if(mr(a)){const s=e[a];li(s)&&Rt(n,s)}else if(li(a))Rt(n,a.bind(t));else if(Tn(a))if(Za(a))a.forEach(s=>p7(s,e,t,i));else{const s=li(a.handler)?a.handler.bind(t):e[a.handler];li(s)&&Rt(n,s,a)}}function y7(a){const e=a.type,{mixins:t,extends:i}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:r}}=a.appContext,l=s.get(e);let u;return l?u=l:!n.length&&!t&&!i?u=e:(u={},n.length&&n.forEach(d=>Yx(u,d,r,!0)),Yx(u,e,r)),Tn(e)&&s.set(e,u),u}function Yx(a,e,t,i=!1){const{mixins:n,extends:s}=e;s&&Yx(a,s,t,!0),n&&n.forEach(r=>Yx(a,r,t,!0));for(const r in e)if(!(i&&r==="expose")){const l=qZ[r]||t&&t[r];a[r]=l?l(a[r],e[r]):e[r]}return a}const qZ={data:O8,props:F8,emits:F8,methods:p0,computed:p0,beforeCreate:go,created:go,beforeMount:go,mounted:go,beforeUpdate:go,updated:go,beforeDestroy:go,beforeUnmount:go,destroyed:go,unmounted:go,activated:go,deactivated:go,errorCaptured:go,serverPrefetch:go,components:p0,directives:p0,watch:KZ,provide:O8,inject:YZ};function O8(a,e){return e?a?function(){return ys(li(a)?a.call(this,this):a,li(e)?e.call(this,this):e)}:e:a}function YZ(a,e){return p0(bA(a),bA(e))}function bA(a){if(Za(a)){const e={};for(let t=0;t<a.length;t++)e[a[t]]=a[t];return e}return a}function go(a,e){return a?[...new Set([].concat(a,e))]:e}function p0(a,e){return a?ys(Object.create(null),a,e):e}function F8(a,e){return a?Za(a)&&Za(e)?[...new Set([...a,...e])]:ys(Object.create(null),G8(a),G8(e??{})):e}function KZ(a,e){if(!a)return e;if(!e)return a;const t=ys(Object.create(null),a);for(const i in e)t[i]=go(a[i],e[i]);return t}function b7(){return{app:null,config:{isNativeTag:w6,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jZ=0;function $Z(a,e){return function(i,n=null){li(i)||(i=ys({},i)),n!=null&&!Tn(n)&&(n=null);const s=b7(),r=new WeakSet,l=[];let u=!1;const d=s.app={_uid:jZ++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:Pz,get config(){return s.config},set config(h){},use(h,...g){return r.has(h)||(h&&li(h.install)?(r.add(h),h.install(d,...g)):li(h)&&(r.add(h),h(d,...g))),d},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),d},component(h,g){return g?(s.components[h]=g,d):s.components[h]},directive(h,g){return g?(s.directives[h]=g,d):s.directives[h]},mount(h,g,y){if(!u){const x=d._ceVNode||gt(i,n);return x.appContext=s,y===!0?y="svg":y===!1&&(y=void 0),a(x,h,y),u=!0,d._container=h,h.__vue_app__=d,AC(x.component)}},onUnmount(h){l.push(h)},unmount(){u&&(Lu(l,d._instance,16),a(null,d._container),delete d._container.__vue_app__)},provide(h,g){return s.provides[h]=g,d},runWithContext(h){const g=Om;Om=d;try{return h()}finally{Om=g}}};return d}}let Om=null;function CC(a,e){if(Js){let t=Js.provides;const i=Js.parent&&Js.parent.provides;i===t&&(t=Js.provides=Object.create(i)),t[a]=e}}function Ps(a,e,t=!1){const i=sb();if(i||Om){let n=Om?Om._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&a in n)return n[a];if(arguments.length>1)return t&&li(e)?e.call(i&&i.proxy):e}}function JZ(){return!!(sb()||Om)}const QZ=Symbol.for("v-scx"),ez=()=>Ps(QZ);function Ar(a,e){return S5(a,null,e)}function Rt(a,e,t){return S5(a,e,t)}function S5(a,e,t=Mn){const{immediate:i,deep:n,flush:s,once:r}=t,l=ys({},t),u=e&&i||!e&&s!=="post";let d;if(w1){if(s==="sync"){const x=ez();d=x.__watcherHandles||(x.__watcherHandles=[])}else if(!u){const x=()=>{};return x.stop=Ic,x.resume=Ic,x.pause=Ic,x}}const h=Js;l.call=(x,C,I)=>Lu(x,h,C,I);let g=!1;s==="post"?l.scheduler=x=>{yo(x,h&&h.suspense)}:s!=="sync"&&(g=!0,l.scheduler=(x,C)=>{C?x():w5(x)}),l.augmentJob=x=>{e&&(x.flags|=4),g&&(x.flags|=2,h&&(x.id=h.uid,x.i=h))};const y=AZ(a,e,l);return w1&&(d?d.push(y):u&&y()),y}function tz(a,e,t){const i=this.proxy,n=mr(a)?a.includes(".")?v7(i,a):()=>i[a]:a.bind(i,i);let s;li(e)?s=e:(s=e.handler,t=e);const r=ob(this),l=S5(n,s.bind(i),t);return r(),l}function v7(a,e){const t=e.split(".");return()=>{let i=a;for(let n=0;n<t.length&&i;n++)i=i[t[n]];return i}}const az=(a,e)=>e==="modelValue"||e==="model-value"?a.modelModifiers:a[`${e}Modifiers`]||a[`${Jl(e)}Modifiers`]||a[`${v_(e)}Modifiers`];function iz(a,e,...t){if(a.isUnmounted)return;const i=a.vnode.props||Mn;let n=t;const s=e.startsWith("update:"),r=s&&az(i,e.slice(7));r&&(r.trim&&(n=t.map(h=>mr(h)?h.trim():h)),r.number&&(n=t.map(mC)));let l,u=i[l=dS(e)]||i[l=dS(Jl(e))];!u&&s&&(u=i[l=dS(v_(e))]),u&&Lu(u,a,6,n);const d=i[l+"Once"];if(d){if(!a.emitted)a.emitted={};else if(a.emitted[l])return;a.emitted[l]=!0,Lu(d,a,6,n)}}const nz=new WeakMap;function x7(a,e,t=!1){const i=t?nz:e.emitsCache,n=i.get(a);if(n!==void 0)return n;const s=a.emits;let r={},l=!1;if(!li(a)){const u=d=>{const h=x7(d,e,!0);h&&(l=!0,ys(r,h))};!t&&e.mixins.length&&e.mixins.forEach(u),a.extends&&u(a.extends),a.mixins&&a.mixins.forEach(u)}return!s&&!l?(Tn(a)&&i.set(a,null),null):(Za(s)?s.forEach(u=>r[u]=null):ys(r,s),Tn(a)&&i.set(a,r),r)}function IC(a,e){return!a||!cC(e)?!1:(e=e.slice(2).replace(/Once$/,""),pn(a,e[0].toLowerCase()+e.slice(1))||pn(a,v_(e))||pn(a,e))}function N8(a){const{type:e,vnode:t,proxy:i,withProxy:n,propsOptions:[s],slots:r,attrs:l,emit:u,render:d,renderCache:h,props:g,data:y,setupState:x,ctx:C,inheritAttrs:I}=a,A=Xx(a);let E,L;try{if(t.shapeFlag&4){const F=n||i,B=F;E=fc(d.call(B,F,h,g,x,y,C)),L=l}else{const F=e;E=fc(F.length>1?F(g,{attrs:l,slots:r,emit:u}):F(g,null)),L=e.props?l:rz(l)}}catch(F){H0.length=0,bC(F,a,1),E=gt($s)}let G=E;if(L&&I!==!1){const F=Object.keys(L),{shapeFlag:B}=G;F.length&&B&7&&(s&&F.some(h5)&&(L=sz(L,s)),G=d_(G,L,!1,!0))}return t.dirs&&(G=d_(G,null,!1,!0),G.dirs=G.dirs?G.dirs.concat(t.dirs):t.dirs),t.transition&&y1(G,t.transition),E=G,Xx(A),E}const rz=a=>{let e;for(const t in a)(t==="class"||t==="style"||cC(t))&&((e||(e={}))[t]=a[t]);return e},sz=(a,e)=>{const t={};for(const i in a)(!h5(i)||!(i.slice(9)in e))&&(t[i]=a[i]);return t};function oz(a,e,t){const{props:i,children:n,component:s}=a,{props:r,children:l,patchFlag:u}=e,d=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&u>=0){if(u&1024)return!0;if(u&16)return i?B8(i,r,d):!!r;if(u&8){const h=e.dynamicProps;for(let g=0;g<h.length;g++){const y=h[g];if(r[y]!==i[y]&&!IC(d,y))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===r?!1:i?r?B8(i,r,d):!0:!!r;return!1}function B8(a,e,t){const i=Object.keys(e);if(i.length!==Object.keys(a).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(e[s]!==a[s]&&!IC(t,s))return!0}return!1}function lz({vnode:a,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===a&&(i.el=a.el),i===a)(a=e.vnode).el=t,e=e.parent;else break}}const w7={},C7=()=>Object.create(w7),I7=a=>Object.getPrototypeOf(a)===w7;function uz(a,e,t,i=!1){const n={},s=C7();a.propsDefaults=Object.create(null),S7(a,e,n,s);for(const r in a.propsOptions[0])r in n||(n[r]=void 0);t?a.props=i?n:gZ(n):a.type.props?a.props=n:a.props=s,a.attrs=s}function cz(a,e,t,i){const{props:n,attrs:s,vnode:{patchFlag:r}}=a,l=Yi(n),[u]=a.propsOptions;let d=!1;if((i||r>0)&&!(r&16)){if(r&8){const h=a.vnode.dynamicProps;for(let g=0;g<h.length;g++){let y=h[g];if(IC(a.emitsOptions,y))continue;const x=e[y];if(u)if(pn(s,y))x!==s[y]&&(s[y]=x,d=!0);else{const C=Jl(y);n[C]=vA(u,l,C,x,a,!1)}else x!==s[y]&&(s[y]=x,d=!0)}}}else{S7(a,e,n,s)&&(d=!0);let h;for(const g in l)(!e||!pn(e,g)&&((h=v_(g))===g||!pn(e,h)))&&(u?t&&(t[g]!==void 0||t[h]!==void 0)&&(n[g]=vA(u,l,g,void 0,a,!0)):delete n[g]);if(s!==l)for(const g in s)(!e||!pn(e,g))&&(delete s[g],d=!0)}d&&Ed(a.attrs,"set","")}function S7(a,e,t,i){const[n,s]=a.propsOptions;let r=!1,l;if(e)for(let u in e){if(B0(u))continue;const d=e[u];let h;n&&pn(n,h=Jl(u))?!s||!s.includes(h)?t[h]=d:(l||(l={}))[h]=d:IC(a.emitsOptions,u)||(!(u in i)||d!==i[u])&&(i[u]=d,r=!0)}if(s){const u=Yi(t),d=l||Mn;for(let h=0;h<s.length;h++){const g=s[h];t[g]=vA(n,u,g,d[g],a,!pn(d,g))}}return r}function vA(a,e,t,i,n,s){const r=a[t];if(r!=null){const l=pn(r,"default");if(l&&i===void 0){const u=r.default;if(r.type!==Function&&!r.skipFactory&&li(u)){const{propsDefaults:d}=n;if(t in d)i=d[t];else{const h=ob(n);i=d[t]=u.call(null,e),h()}}else i=u;n.ce&&n.ce._setProp(t,i)}r[0]&&(s&&!l?i=!1:r[1]&&(i===""||i===v_(t))&&(i=!0))}return i}const dz=new WeakMap;function A7(a,e,t=!1){const i=t?dz:e.propsCache,n=i.get(a);if(n)return n;const s=a.props,r={},l=[];let u=!1;if(!li(a)){const h=g=>{u=!0;const[y,x]=A7(g,e,!0);ys(r,y),x&&l.push(...x)};!t&&e.mixins.length&&e.mixins.forEach(h),a.extends&&h(a.extends),a.mixins&&a.mixins.forEach(h)}if(!s&&!u)return Tn(a)&&i.set(a,jg),jg;if(Za(s))for(let h=0;h<s.length;h++){const g=Jl(s[h]);D8(g)&&(r[g]=Mn)}else if(s)for(const h in s){const g=Jl(h);if(D8(g)){const y=s[h],x=r[g]=Za(y)||li(y)?{type:y}:ys({},y),C=x.type;let I=!1,A=!0;if(Za(C))for(let E=0;E<C.length;++E){const L=C[E],G=li(L)&&L.name;if(G==="Boolean"){I=!0;break}else G==="String"&&(A=!1)}else I=li(C)&&C.name==="Boolean";x[0]=I,x[1]=A,(I||pn(x,"default"))&&l.push(g)}}const d=[r,l];return Tn(a)&&i.set(a,d),d}function D8(a){return a[0]!=="$"&&!B0(a)}const A5=a=>a==="_"||a==="_ctx"||a==="$stable",T5=a=>Za(a)?a.map(fc):[fc(a)],hz=(a,e,t)=>{if(e._n)return e;const i=Ht((...n)=>T5(e(...n)),t);return i._c=!1,i},T7=(a,e,t)=>{const i=a._ctx;for(const n in a){if(A5(n))continue;const s=a[n];if(li(s))e[n]=hz(n,s,i);else if(s!=null){const r=T5(s);e[n]=()=>r}}},E7=(a,e)=>{const t=T5(e);a.slots.default=()=>t},M7=(a,e,t)=>{for(const i in e)(t||!A5(i))&&(a[i]=e[i])},_z=(a,e,t)=>{const i=a.slots=C7();if(a.vnode.shapeFlag&32){const n=e._;n?(M7(i,e,t),t&&A6(i,"_",n,!0)):T7(e,i)}else e&&E7(a,e)},mz=(a,e,t)=>{const{vnode:i,slots:n}=a;let s=!0,r=Mn;if(i.shapeFlag&32){const l=e._;l?t&&l===1?s=!1:M7(n,e,t):(s=!e.$stable,T7(e,n)),r=e}else e&&(E7(a,e),r={default:1});if(s)for(const l in n)!A5(l)&&r[l]==null&&delete n[l]},yo=bz;function fz(a){return gz(a)}function gz(a,e){const t=fC();t.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:r,createText:l,createComment:u,setText:d,setElementText:h,parentNode:g,nextSibling:y,setScopeId:x=Ic,insertStaticContent:C}=a,I=(Fe,De,z,Ze=null,Re=null,fe=null,ie=void 0,Ce=null,Ee=!!De.dynamicChildren)=>{if(Fe===De)return;Fe&&!Im(Fe,De)&&(Ze=Pt(Fe),J(Fe,Re,fe,!0),Fe=null),De.patchFlag===-2&&(Ee=!1,De.dynamicChildren=null);const{type:Ne,ref:Ve,shapeFlag:$e}=De;switch(Ne){case SC:A(Fe,De,z,Ze);break;case $s:E(Fe,De,z,Ze);break;case bS:Fe==null&&L(De,z,Ze,ie);break;case Tt:X(Fe,De,z,Ze,Re,fe,ie,Ce,Ee);break;default:$e&1?B(Fe,De,z,Ze,Re,fe,ie,Ce,Ee):$e&6?de(Fe,De,z,Ze,Re,fe,ie,Ce,Ee):($e&64||$e&128)&&Ne.process(Fe,De,z,Ze,Re,fe,ie,Ce,Ee,ga)}Ve!=null&&Re?z0(Ve,Fe&&Fe.ref,fe,De||Fe,!De):Ve==null&&Fe&&Fe.ref!=null&&z0(Fe.ref,null,fe,Fe,!0)},A=(Fe,De,z,Ze)=>{if(Fe==null)i(De.el=l(De.children),z,Ze);else{const Re=De.el=Fe.el;De.children!==Fe.children&&d(Re,De.children)}},E=(Fe,De,z,Ze)=>{Fe==null?i(De.el=u(De.children||""),z,Ze):De.el=Fe.el},L=(Fe,De,z,Ze)=>{[Fe.el,Fe.anchor]=C(Fe.children,De,z,Ze,Fe.el,Fe.anchor)},G=({el:Fe,anchor:De},z,Ze)=>{let Re;for(;Fe&&Fe!==De;)Re=y(Fe),i(Fe,z,Ze),Fe=Re;i(De,z,Ze)},F=({el:Fe,anchor:De})=>{let z;for(;Fe&&Fe!==De;)z=y(Fe),n(Fe),Fe=z;n(De)},B=(Fe,De,z,Ze,Re,fe,ie,Ce,Ee)=>{if(De.type==="svg"?ie="svg":De.type==="math"&&(ie="mathml"),Fe==null)Z(De,z,Ze,Re,fe,ie,Ce,Ee);else{const Ne=Fe.el&&Fe.el._isVueCE?Fe.el:null;try{Ne&&Ne._beginPatch(),te(Fe,De,Re,fe,ie,Ce,Ee)}finally{Ne&&Ne._endPatch()}}},Z=(Fe,De,z,Ze,Re,fe,ie,Ce)=>{let Ee,Ne;const{props:Ve,shapeFlag:$e,transition:ht,dirs:_t}=Fe;if(Ee=Fe.el=r(Fe.type,fe,Ve&&Ve.is,Ve),$e&8?h(Ee,Fe.children):$e&16&&$(Fe.children,Ee,null,Ze,Re,yS(Fe,fe),ie,Ce),_t&&sm(Fe,null,Ze,"created"),Y(Ee,Fe,Fe.scopeId,ie,Ze),Ve){for(const ca in Ve)ca!=="value"&&!B0(ca)&&s(Ee,ca,null,Ve[ca],fe,Ze);"value"in Ve&&s(Ee,"value",null,Ve.value,fe),(Ne=Ve.onVnodeBeforeMount)&&dc(Ne,Ze,Fe)}_t&&sm(Fe,null,Ze,"beforeMount");const Et=pz(Re,ht);Et&&ht.beforeEnter(Ee),i(Ee,De,z),((Ne=Ve&&Ve.onVnodeMounted)||Et||_t)&&yo(()=>{Ne&&dc(Ne,Ze,Fe),Et&&ht.enter(Ee),_t&&sm(Fe,null,Ze,"mounted")},Re)},Y=(Fe,De,z,Ze,Re)=>{if(z&&x(Fe,z),Ze)for(let fe=0;fe<Ze.length;fe++)x(Fe,Ze[fe]);if(Re){let fe=Re.subTree;if(De===fe||R7(fe.type)&&(fe.ssContent===De||fe.ssFallback===De)){const ie=Re.vnode;Y(Fe,ie,ie.scopeId,ie.slotScopeIds,Re.parent)}}},$=(Fe,De,z,Ze,Re,fe,ie,Ce,Ee=0)=>{for(let Ne=Ee;Ne<Fe.length;Ne++){const Ve=Fe[Ne]=Ce?Dh(Fe[Ne]):fc(Fe[Ne]);I(null,Ve,De,z,Ze,Re,fe,ie,Ce)}},te=(Fe,De,z,Ze,Re,fe,ie)=>{const Ce=De.el=Fe.el;let{patchFlag:Ee,dynamicChildren:Ne,dirs:Ve}=De;Ee|=Fe.patchFlag&16;const $e=Fe.props||Mn,ht=De.props||Mn;let _t;if(z&&om(z,!1),(_t=ht.onVnodeBeforeUpdate)&&dc(_t,z,De,Fe),Ve&&sm(De,Fe,z,"beforeUpdate"),z&&om(z,!0),($e.innerHTML&&ht.innerHTML==null||$e.textContent&&ht.textContent==null)&&h(Ce,""),Ne?ce(Fe.dynamicChildren,Ne,Ce,z,Ze,yS(De,Re),fe):ie||ke(Fe,De,Ce,null,z,Ze,yS(De,Re),fe,!1),Ee>0){if(Ee&16)me(Ce,$e,ht,z,Re);else if(Ee&2&&$e.class!==ht.class&&s(Ce,"class",null,ht.class,Re),Ee&4&&s(Ce,"style",$e.style,ht.style,Re),Ee&8){const Et=De.dynamicProps;for(let ca=0;ca<Et.length;ca++){const ua=Et[ca],yi=$e[ua],Xi=ht[ua];(Xi!==yi||ua==="value")&&s(Ce,ua,yi,Xi,Re,z)}}Ee&1&&Fe.children!==De.children&&h(Ce,De.children)}else!ie&&Ne==null&&me(Ce,$e,ht,z,Re);((_t=ht.onVnodeUpdated)||Ve)&&yo(()=>{_t&&dc(_t,z,De,Fe),Ve&&sm(De,Fe,z,"updated")},Ze)},ce=(Fe,De,z,Ze,Re,fe,ie)=>{for(let Ce=0;Ce<De.length;Ce++){const Ee=Fe[Ce],Ne=De[Ce],Ve=Ee.el&&(Ee.type===Tt||!Im(Ee,Ne)||Ee.shapeFlag&198)?g(Ee.el):z;I(Ee,Ne,Ve,null,Ze,Re,fe,ie,!0)}},me=(Fe,De,z,Ze,Re)=>{if(De!==z){if(De!==Mn)for(const fe in De)!B0(fe)&&!(fe in z)&&s(Fe,fe,De[fe],null,Re,Ze);for(const fe in z){if(B0(fe))continue;const ie=z[fe],Ce=De[fe];ie!==Ce&&fe!=="value"&&s(Fe,fe,Ce,ie,Re,Ze)}"value"in z&&s(Fe,"value",De.value,z.value,Re)}},X=(Fe,De,z,Ze,Re,fe,ie,Ce,Ee)=>{const Ne=De.el=Fe?Fe.el:l(""),Ve=De.anchor=Fe?Fe.anchor:l("");let{patchFlag:$e,dynamicChildren:ht,slotScopeIds:_t}=De;_t&&(Ce=Ce?Ce.concat(_t):_t),Fe==null?(i(Ne,z,Ze),i(Ve,z,Ze),$(De.children||[],z,Ve,Re,fe,ie,Ce,Ee)):$e>0&&$e&64&&ht&&Fe.dynamicChildren?(ce(Fe.dynamicChildren,ht,z,Re,fe,ie,Ce),(De.key!=null||Re&&De===Re.subTree)&&E5(Fe,De,!0)):ke(Fe,De,z,Ve,Re,fe,ie,Ce,Ee)},de=(Fe,De,z,Ze,Re,fe,ie,Ce,Ee)=>{De.slotScopeIds=Ce,Fe==null?De.shapeFlag&512?Re.ctx.activate(De,z,Ze,ie,Ee):N(De,z,Ze,Re,fe,ie,Ee):ne(Fe,De,Ee)},N=(Fe,De,z,Ze,Re,fe,ie)=>{const Ce=Fe.component=Sz(Fe,Ze,Re);if(xC(Fe)&&(Ce.ctx.renderer=ga),Az(Ce,!1,ie),Ce.asyncDep){if(Re&&Re.registerDep(Ce,le,ie),!Fe.el){const Ee=Ce.subTree=gt($s);E(null,Ee,De,z),Fe.placeholder=Ee.el}}else le(Ce,Fe,De,z,Re,fe,ie)},ne=(Fe,De,z)=>{const Ze=De.component=Fe.component;if(oz(Fe,De,z))if(Ze.asyncDep&&!Ze.asyncResolved){_e(Ze,De,z);return}else Ze.next=De,Ze.update();else De.el=Fe.el,Ze.vnode=De},le=(Fe,De,z,Ze,Re,fe,ie)=>{const Ce=()=>{if(Fe.isMounted){let{next:$e,bu:ht,u:_t,parent:Et,vnode:ca}=Fe;{const En=L7(Fe);if(En){$e&&($e.el=ca.el,_e(Fe,$e,ie)),En.asyncDep.then(()=>{Fe.isUnmounted||Ce()});return}}let ua=$e,yi;om(Fe,!1),$e?($e.el=ca.el,_e(Fe,$e,ie)):$e=ca,ht&&Q2(ht),(yi=$e.props&&$e.props.onVnodeBeforeUpdate)&&dc(yi,Et,$e,ca),om(Fe,!0);const Xi=N8(Fe),Ri=Fe.subTree;Fe.subTree=Xi,I(Ri,Xi,g(Ri.el),Pt(Ri),Fe,Re,fe),$e.el=Xi.el,ua===null&&lz(Fe,Xi.el),_t&&yo(_t,Re),(yi=$e.props&&$e.props.onVnodeUpdated)&&yo(()=>dc(yi,Et,$e,ca),Re)}else{let $e;const{el:ht,props:_t}=De,{bm:Et,m:ca,parent:ua,root:yi,type:Xi}=Fe,Ri=Qg(De);om(Fe,!1),Et&&Q2(Et),!Ri&&($e=_t&&_t.onVnodeBeforeMount)&&dc($e,ua,De),om(Fe,!0);{yi.ce&&yi.ce._def.shadowRoot!==!1&&yi.ce._injectChildStyle(Xi);const En=Fe.subTree=N8(Fe);I(null,En,z,Ze,Fe,Re,fe),De.el=En.el}if(ca&&yo(ca,Re),!Ri&&($e=_t&&_t.onVnodeMounted)){const En=De;yo(()=>dc($e,ua,En),Re)}(De.shapeFlag&256||ua&&Qg(ua.vnode)&&ua.vnode.shapeFlag&256)&&Fe.a&&yo(Fe.a,Re),Fe.isMounted=!0,De=z=Ze=null}};Fe.scope.on();const Ee=Fe.effect=new P6(Ce);Fe.scope.off();const Ne=Fe.update=Ee.run.bind(Ee),Ve=Fe.job=Ee.runIfDirty.bind(Ee);Ve.i=Fe,Ve.id=Fe.uid,Ee.scheduler=()=>w5(Ve),om(Fe,!0),Ne()},_e=(Fe,De,z)=>{De.component=Fe;const Ze=Fe.vnode.props;Fe.vnode=De,Fe.next=null,cz(Fe,De.props,Ze,z),mz(Fe,De.children,z),zd(),T8(Fe),Ud()},ke=(Fe,De,z,Ze,Re,fe,ie,Ce,Ee=!1)=>{const Ne=Fe&&Fe.children,Ve=Fe?Fe.shapeFlag:0,$e=De.children,{patchFlag:ht,shapeFlag:_t}=De;if(ht>0){if(ht&128){re(Ne,$e,z,Ze,Re,fe,ie,Ce,Ee);return}else if(ht&256){Ie(Ne,$e,z,Ze,Re,fe,ie,Ce,Ee);return}}_t&8?(Ve&16&&kt(Ne,Re,fe),$e!==Ne&&h(z,$e)):Ve&16?_t&16?re(Ne,$e,z,Ze,Re,fe,ie,Ce,Ee):kt(Ne,Re,fe,!0):(Ve&8&&h(z,""),_t&16&&$($e,z,Ze,Re,fe,ie,Ce,Ee))},Ie=(Fe,De,z,Ze,Re,fe,ie,Ce,Ee)=>{Fe=Fe||jg,De=De||jg;const Ne=Fe.length,Ve=De.length,$e=Math.min(Ne,Ve);let ht;for(ht=0;ht<$e;ht++){const _t=De[ht]=Ee?Dh(De[ht]):fc(De[ht]);I(Fe[ht],_t,z,null,Re,fe,ie,Ce,Ee)}Ne>Ve?kt(Fe,Re,fe,!0,!1,$e):$(De,z,Ze,Re,fe,ie,Ce,Ee,$e)},re=(Fe,De,z,Ze,Re,fe,ie,Ce,Ee)=>{let Ne=0;const Ve=De.length;let $e=Fe.length-1,ht=Ve-1;for(;Ne<=$e&&Ne<=ht;){const _t=Fe[Ne],Et=De[Ne]=Ee?Dh(De[Ne]):fc(De[Ne]);if(Im(_t,Et))I(_t,Et,z,null,Re,fe,ie,Ce,Ee);else break;Ne++}for(;Ne<=$e&&Ne<=ht;){const _t=Fe[$e],Et=De[ht]=Ee?Dh(De[ht]):fc(De[ht]);if(Im(_t,Et))I(_t,Et,z,null,Re,fe,ie,Ce,Ee);else break;$e--,ht--}if(Ne>$e){if(Ne<=ht){const _t=ht+1,Et=_t<Ve?De[_t].el:Ze;for(;Ne<=ht;)I(null,De[Ne]=Ee?Dh(De[Ne]):fc(De[Ne]),z,Et,Re,fe,ie,Ce,Ee),Ne++}}else if(Ne>ht)for(;Ne<=$e;)J(Fe[Ne],Re,fe,!0),Ne++;else{const _t=Ne,Et=Ne,ca=new Map;for(Ne=Et;Ne<=ht;Ne++){const Ci=De[Ne]=Ee?Dh(De[Ne]):fc(De[Ne]);Ci.key!=null&&ca.set(Ci.key,Ne)}let ua,yi=0;const Xi=ht-Et+1;let Ri=!1,En=0;const _i=new Array(Xi);for(Ne=0;Ne<Xi;Ne++)_i[Ne]=0;for(Ne=_t;Ne<=$e;Ne++){const Ci=Fe[Ne];if(yi>=Xi){J(Ci,Re,fe,!0);continue}let Ti;if(Ci.key!=null)Ti=ca.get(Ci.key);else for(ua=Et;ua<=ht;ua++)if(_i[ua-Et]===0&&Im(Ci,De[ua])){Ti=ua;break}Ti===void 0?J(Ci,Re,fe,!0):(_i[Ti-Et]=Ne+1,Ti>=En?En=Ti:Ri=!0,I(Ci,De[Ti],z,null,Re,fe,ie,Ce,Ee),yi++)}const nr=Ri?yz(_i):jg;for(ua=nr.length-1,Ne=Xi-1;Ne>=0;Ne--){const Ci=Et+Ne,Ti=De[Ci],Dr=De[Ci+1],vs=Ci+1<Ve?Dr.el||Dr.placeholder:Ze;_i[Ne]===0?I(null,Ti,z,vs,Re,fe,ie,Ce,Ee):Ri&&(ua<0||Ne!==nr[ua]?Q(Ti,z,vs,2):ua--)}}},Q=(Fe,De,z,Ze,Re=null)=>{const{el:fe,type:ie,transition:Ce,children:Ee,shapeFlag:Ne}=Fe;if(Ne&6){Q(Fe.component.subTree,De,z,Ze);return}if(Ne&128){Fe.suspense.move(De,z,Ze);return}if(Ne&64){ie.move(Fe,De,z,ga);return}if(ie===Tt){i(fe,De,z);for(let $e=0;$e<Ee.length;$e++)Q(Ee[$e],De,z,Ze);i(Fe.anchor,De,z);return}if(ie===bS){G(Fe,De,z);return}if(Ze!==2&&Ne&1&&Ce)if(Ze===0)Ce.beforeEnter(fe),i(fe,De,z),yo(()=>Ce.enter(fe),Re);else{const{leave:$e,delayLeave:ht,afterLeave:_t}=Ce,Et=()=>{Fe.ctx.isUnmounted?n(fe):i(fe,De,z)},ca=()=>{fe._isLeaving&&fe[Id](!0),$e(fe,()=>{Et(),_t&&_t()})};ht?ht(fe,Et,ca):ca()}else i(fe,De,z)},J=(Fe,De,z,Ze=!1,Re=!1)=>{const{type:fe,props:ie,ref:Ce,children:Ee,dynamicChildren:Ne,shapeFlag:Ve,patchFlag:$e,dirs:ht,cacheIndex:_t}=Fe;if($e===-2&&(Re=!1),Ce!=null&&(zd(),z0(Ce,null,z,Fe,!0),Ud()),_t!=null&&(De.renderCache[_t]=void 0),Ve&256){De.ctx.deactivate(Fe);return}const Et=Ve&1&&ht,ca=!Qg(Fe);let ua;if(ca&&(ua=ie&&ie.onVnodeBeforeUnmount)&&dc(ua,De,Fe),Ve&6)Je(Fe.component,z,Ze);else{if(Ve&128){Fe.suspense.unmount(z,Ze);return}Et&&sm(Fe,null,De,"beforeUnmount"),Ve&64?Fe.type.remove(Fe,De,z,ga,Ze):Ne&&!Ne.hasOnce&&(fe!==Tt||$e>0&&$e&64)?kt(Ne,De,z,!1,!0):(fe===Tt&&$e&384||!Re&&Ve&16)&&kt(Ee,De,z),Ze&&je(Fe)}(ca&&(ua=ie&&ie.onVnodeUnmounted)||Et)&&yo(()=>{ua&&dc(ua,De,Fe),Et&&sm(Fe,null,De,"unmounted")},z)},je=Fe=>{const{type:De,el:z,anchor:Ze,transition:Re}=Fe;if(De===Tt){Qe(z,Ze);return}if(De===bS){F(Fe);return}const fe=()=>{n(z),Re&&!Re.persisted&&Re.afterLeave&&Re.afterLeave()};if(Fe.shapeFlag&1&&Re&&!Re.persisted){const{leave:ie,delayLeave:Ce}=Re,Ee=()=>ie(z,fe);Ce?Ce(Fe.el,fe,Ee):Ee()}else fe()},Qe=(Fe,De)=>{let z;for(;Fe!==De;)z=y(Fe),n(Fe),Fe=z;n(De)},Je=(Fe,De,z)=>{const{bum:Ze,scope:Re,job:fe,subTree:ie,um:Ce,m:Ee,a:Ne}=Fe;V8(Ee),V8(Ne),Ze&&Q2(Ze),Re.stop(),fe&&(fe.flags|=8,J(ie,Fe,De,z)),Ce&&yo(Ce,De),yo(()=>{Fe.isUnmounted=!0},De)},kt=(Fe,De,z,Ze=!1,Re=!1,fe=0)=>{for(let ie=fe;ie<Fe.length;ie++)J(Fe[ie],De,z,Ze,Re)},Pt=Fe=>{if(Fe.shapeFlag&6)return Pt(Fe.component.subTree);if(Fe.shapeFlag&128)return Fe.suspense.next();const De=y(Fe.anchor||Fe.el),z=De&&De[a7];return z?y(z):De};let zt=!1;const Nt=(Fe,De,z)=>{Fe==null?De._vnode&&J(De._vnode,null,null,!0):I(De._vnode||null,Fe,De,null,null,null,z),De._vnode=Fe,zt||(zt=!0,T8(),Q6(),zt=!1)},ga={p:I,um:J,m:Q,r:je,mt:N,mc:$,pc:ke,pbc:ce,n:Pt,o:a};return{render:Nt,hydrate:void 0,createApp:$Z(Nt)}}function yS({type:a,props:e},t){return t==="svg"&&a==="foreignObject"||t==="mathml"&&a==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function om({effect:a,job:e},t){t?(a.flags|=32,e.flags|=4):(a.flags&=-33,e.flags&=-5)}function pz(a,e){return(!a||a&&!a.pendingBranch)&&e&&!e.persisted}function E5(a,e,t=!1){const i=a.children,n=e.children;if(Za(i)&&Za(n))for(let s=0;s<i.length;s++){const r=i[s];let l=n[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[s]=Dh(n[s]),l.el=r.el),!t&&l.patchFlag!==-2&&E5(r,l)),l.type===SC&&l.patchFlag!==-1&&(l.el=r.el),l.type===$s&&!l.el&&(l.el=r.el)}}function yz(a){const e=a.slice(),t=[0];let i,n,s,r,l;const u=a.length;for(i=0;i<u;i++){const d=a[i];if(d!==0){if(n=t[t.length-1],a[n]<d){e[i]=n,t.push(i);continue}for(s=0,r=t.length-1;s<r;)l=s+r>>1,a[t[l]]<d?s=l+1:r=l;d<a[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,r=t[s-1];s-- >0;)t[s]=r,r=e[r];return t}function L7(a){const e=a.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:L7(e)}function V8(a){if(a)for(let e=0;e<a.length;e++)a[e].flags|=8}const R7=a=>a.__isSuspense;function bz(a,e){e&&e.pendingBranch?Za(a)?e.effects.push(...a):e.effects.push(a):MZ(a)}const Tt=Symbol.for("v-fgt"),SC=Symbol.for("v-txt"),$s=Symbol.for("v-cmt"),bS=Symbol.for("v-stc"),H0=[];let xl=null;function U(a=!1){H0.push(xl=a?null:[])}function vz(){H0.pop(),xl=H0[H0.length-1]||null}let v1=1;function Kx(a,e=!1){v1+=a,a<0&&xl&&e&&(xl.hasOnce=!0)}function k7(a){return a.dynamicChildren=v1>0?xl||jg:null,vz(),v1>0&&xl&&xl.push(a),a}function se(a,e,t,i,n,s){return k7(P(a,e,t,i,n,s,!0))}function Lt(a,e,t,i,n){return k7(gt(a,e,t,i,n,!0))}function x1(a){return a?a.__v_isVNode===!0:!1}function Im(a,e){return a.type===e.type&&a.key===e.key}const P7=({key:a})=>a??null,tx=({ref:a,ref_key:e,ref_for:t})=>(typeof a=="number"&&(a=""+a),a!=null?mr(a)||Pn(a)||li(a)?{i:Rs,r:a,k:e,f:!!t}:a:null);function P(a,e=null,t=null,i=0,n=null,s=a===Tt?0:1,r=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:a,props:e,key:e&&P7(e),ref:e&&tx(e),scopeId:t7,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Rs};return l?(M5(u,t),s&128&&a.normalize(u)):t&&(u.shapeFlag|=mr(t)?8:16),v1>0&&!r&&xl&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&xl.push(u),u}const gt=xz;function xz(a,e=null,t=null,i=0,n=null,s=!1){if((!a||a===f7)&&(a=$s),x1(a)){const l=d_(a,e,!0);return t&&M5(l,t),v1>0&&!s&&xl&&(l.shapeFlag&6?xl[xl.indexOf(a)]=l:xl.push(l)),l.patchFlag=-2,l}if(Rz(a)&&(a=a.__vccOpts),e){e=wz(e);let{class:l,style:u}=e;l&&!mr(l)&&(e.class=Fa(l)),Tn(u)&&(yC(u)&&!Za(u)&&(u=ys({},u)),e.style=Nc(u))}const r=mr(a)?1:R7(a)?128:i7(a)?64:Tn(a)?4:li(a)?2:0;return P(a,e,t,i,n,r,s,!0)}function wz(a){return a?yC(a)||I7(a)?ys({},a):a:null}function d_(a,e,t=!1,i=!1){const{props:n,ref:s,patchFlag:r,children:l,transition:u}=a,d=e?L5(n||{},e):n,h={__v_isVNode:!0,__v_skip:!0,type:a.type,props:d,key:d&&P7(d),ref:e&&e.ref?t&&s?Za(s)?s.concat(tx(e)):[s,tx(e)]:tx(e):s,scopeId:a.scopeId,slotScopeIds:a.slotScopeIds,children:l,target:a.target,targetStart:a.targetStart,targetAnchor:a.targetAnchor,staticCount:a.staticCount,shapeFlag:a.shapeFlag,patchFlag:e&&a.type!==Tt?r===-1?16:r|16:r,dynamicProps:a.dynamicProps,dynamicChildren:a.dynamicChildren,appContext:a.appContext,dirs:a.dirs,transition:u,component:a.component,suspense:a.suspense,ssContent:a.ssContent&&d_(a.ssContent),ssFallback:a.ssFallback&&d_(a.ssFallback),placeholder:a.placeholder,el:a.el,anchor:a.anchor,ctx:a.ctx,ce:a.ce};return u&&i&&y1(h,u.clone(h)),h}function Dt(a=" ",e=0){return gt(SC,null,a,e)}function Ge(a="",e=!1){return e?(U(),Lt($s,null,a)):gt($s,null,a)}function fc(a){return a==null||typeof a=="boolean"?gt($s):Za(a)?gt(Tt,null,a.slice()):x1(a)?Dh(a):gt(SC,null,String(a))}function Dh(a){return a.el===null&&a.patchFlag!==-1||a.memo?a:d_(a)}function M5(a,e){let t=0;const{shapeFlag:i}=a;if(e==null)e=null;else if(Za(e))t=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),M5(a,n()),n._c&&(n._d=!0));return}else{t=32;const n=e._;!n&&!I7(e)?e._ctx=Rs:n===3&&Rs&&(Rs.slots._===1?e._=1:(e._=2,a.patchFlag|=1024))}else li(e)?(e={default:e,_ctx:Rs},t=32):(e=String(e),i&64?(t=16,e=[Dt(e)]):t=8);a.children=e,a.shapeFlag|=t}function L5(...a){const e={};for(let t=0;t<a.length;t++){const i=a[t];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=Fa([e.class,i.class]));else if(n==="style")e.style=Nc([e.style,i.style]);else if(cC(n)){const s=e[n],r=i[n];r&&s!==r&&!(Za(s)&&s.includes(r))&&(e[n]=s?[].concat(s,r):r)}else n!==""&&(e[n]=i[n])}return e}function dc(a,e,t,i=null){Lu(a,e,7,[t,i])}const Cz=b7();let Iz=0;function Sz(a,e,t){const i=a.type,n=(e?e.appContext:a.appContext)||Cz,s={uid:Iz++,vnode:a,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new L6(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:A7(i,n),emitsOptions:x7(i,n),emit:null,emitted:null,propsDefaults:Mn,inheritAttrs:i.inheritAttrs,ctx:Mn,data:Mn,props:Mn,attrs:Mn,slots:Mn,refs:Mn,setupState:Mn,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=iz.bind(null,s),a.ce&&a.ce(s),s}let Js=null;const sb=()=>Js||Rs;let jx,xA;{const a=fC(),e=(t,i)=>{let n;return(n=a[t])||(n=a[t]=[]),n.push(i),s=>{n.length>1?n.forEach(r=>r(s)):n[0](s)}};jx=e("__VUE_INSTANCE_SETTERS__",t=>Js=t),xA=e("__VUE_SSR_SETTERS__",t=>w1=t)}const ob=a=>{const e=Js;return jx(a),a.scope.on(),()=>{a.scope.off(),jx(e)}},Z8=()=>{Js&&Js.scope.off(),jx(null)};function G7(a){return a.vnode.shapeFlag&4}let w1=!1;function Az(a,e=!1,t=!1){e&&xA(e);const{props:i,children:n}=a.vnode,s=G7(a);uz(a,i,s,e),_z(a,n,t||e);const r=s?Tz(a,e):void 0;return e&&xA(!1),r}function Tz(a,e){const t=a.type;a.accessCache=Object.create(null),a.proxy=new Proxy(a.ctx,UZ);const{setup:i}=t;if(i){zd();const n=a.setupContext=i.length>1?Mz(a):null,s=ob(a),r=nb(i,a,0,[a.props,n]),l=C6(r);if(Ud(),s(),(l||a.sp)&&!Qg(a)&&d7(a),l){if(r.then(Z8,Z8),e)return r.then(u=>{z8(a,u)}).catch(u=>{bC(u,a,0)});a.asyncDep=r}else z8(a,r)}else W7(a)}function z8(a,e,t){li(e)?a.type.__ssrInlineRender?a.ssrRender=e:a.render=e:Tn(e)&&(a.setupState=Y6(e)),W7(a)}function W7(a,e,t){const i=a.type;a.render||(a.render=i.render||Ic);{const n=ob(a);zd();try{HZ(a)}finally{Ud(),n()}}}const Ez={get(a,e){return Ks(a,"get",""),a[e]}};function Mz(a){const e=t=>{a.exposed=t||{}};return{attrs:new Proxy(a.attrs,Ez),slots:a.slots,emit:a.emit,expose:e}}function AC(a){return a.exposed?a.exposeProxy||(a.exposeProxy=new Proxy(Y6(x5(a.exposed)),{get(e,t){if(t in e)return e[t];if(t in U0)return U0[t](a)},has(e,t){return t in e||t in U0}})):a.proxy}function Lz(a,e=!0){return li(a)?a.displayName||a.name:a.name||e&&a.__name}function Rz(a){return li(a)&&"__vccOpts"in a}const St=(a,e)=>IZ(a,e,w1);function kz(a,e,t){try{Kx(-1);const i=arguments.length;return i===2?Tn(e)&&!Za(e)?x1(e)?gt(a,null,[e]):gt(a,e):gt(a,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&x1(t)&&(t=[t]),gt(a,e,t))}finally{Kx(1)}}const Pz="3.5.25";let wA;const U8=typeof window<"u"&&window.trustedTypes;if(U8)try{wA=U8.createPolicy("vue",{createHTML:a=>a})}catch{}const O7=wA?a=>wA.createHTML(a):a=>a,Gz="http://www.w3.org/2000/svg",Wz="http://www.w3.org/1998/Math/MathML",wd=typeof document<"u"?document:null,H8=wd&&wd.createElement("template"),Oz={insert:(a,e,t)=>{e.insertBefore(a,t||null)},remove:a=>{const e=a.parentNode;e&&e.removeChild(a)},createElement:(a,e,t,i)=>{const n=e==="svg"?wd.createElementNS(Gz,a):e==="mathml"?wd.createElementNS(Wz,a):t?wd.createElement(a,{is:t}):wd.createElement(a);return a==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:a=>wd.createTextNode(a),createComment:a=>wd.createComment(a),setText:(a,e)=>{a.nodeValue=e},setElementText:(a,e)=>{a.textContent=e},parentNode:a=>a.parentNode,nextSibling:a=>a.nextSibling,querySelector:a=>wd.querySelector(a),setScopeId(a,e){a.setAttribute(e,"")},insertStaticContent(a,e,t,i,n,s){const r=t?t.previousSibling:e.lastChild;if(n&&(n===s||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),t),!(n===s||!(n=n.nextSibling)););else{H8.innerHTML=O7(i==="svg"?`<svg>${a}</svg>`:i==="mathml"?`<math>${a}</math>`:a);const l=H8.content;if(i==="svg"||i==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}e.insertBefore(l,t)}return[r?r.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Eh="transition",Ky="animation",C1=Symbol("_vtc"),F7={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Fz=ys({},s7,F7),Nz=a=>(a.displayName="Transition",a.props=Fz,a),TC=Nz((a,{slots:e})=>kz(PZ,Bz(a),e)),lm=(a,e=[])=>{Za(a)?a.forEach(t=>t(...e)):a&&a(...e)},X8=a=>a?Za(a)?a.some(e=>e.length>1):a.length>1:!1;function Bz(a){const e={};for(const X in a)X in F7||(e[X]=a[X]);if(a.css===!1)return e;const{name:t="v",type:i,duration:n,enterFromClass:s=`${t}-enter-from`,enterActiveClass:r=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:u=s,appearActiveClass:d=r,appearToClass:h=l,leaveFromClass:g=`${t}-leave-from`,leaveActiveClass:y=`${t}-leave-active`,leaveToClass:x=`${t}-leave-to`}=a,C=Dz(n),I=C&&C[0],A=C&&C[1],{onBeforeEnter:E,onEnter:L,onEnterCancelled:G,onLeave:F,onLeaveCancelled:B,onBeforeAppear:Z=E,onAppear:Y=L,onAppearCancelled:$=G}=e,te=(X,de,N,ne)=>{X._enterCancelled=ne,um(X,de?h:l),um(X,de?d:r),N&&N()},ce=(X,de)=>{X._isLeaving=!1,um(X,g),um(X,x),um(X,y),de&&de()},me=X=>(de,N)=>{const ne=X?Y:L,le=()=>te(de,X,N);lm(ne,[de,le]),q8(()=>{um(de,X?u:s),fd(de,X?h:l),X8(ne)||Y8(de,i,I,le)})};return ys(e,{onBeforeEnter(X){lm(E,[X]),fd(X,s),fd(X,r)},onBeforeAppear(X){lm(Z,[X]),fd(X,u),fd(X,d)},onEnter:me(!1),onAppear:me(!0),onLeave(X,de){X._isLeaving=!0;const N=()=>ce(X,de);fd(X,g),X._enterCancelled?(fd(X,y),$8(X)):($8(X),fd(X,y)),q8(()=>{X._isLeaving&&(um(X,g),fd(X,x),X8(F)||Y8(X,i,A,N))}),lm(F,[X,N])},onEnterCancelled(X){te(X,!1,void 0,!0),lm(G,[X])},onAppearCancelled(X){te(X,!0,void 0,!0),lm($,[X])},onLeaveCancelled(X){ce(X),lm(B,[X])}})}function Dz(a){if(a==null)return null;if(Tn(a))return[vS(a.enter),vS(a.leave)];{const e=vS(a);return[e,e]}}function vS(a){return ZV(a)}function fd(a,e){e.split(/\s+/).forEach(t=>t&&a.classList.add(t)),(a[C1]||(a[C1]=new Set)).add(e)}function um(a,e){e.split(/\s+/).forEach(i=>i&&a.classList.remove(i));const t=a[C1];t&&(t.delete(e),t.size||(a[C1]=void 0))}function q8(a){requestAnimationFrame(()=>{requestAnimationFrame(a)})}let Vz=0;function Y8(a,e,t,i){const n=a._endId=++Vz,s=()=>{n===a._endId&&i()};if(t!=null)return setTimeout(s,t);const{type:r,timeout:l,propCount:u}=Zz(a,e);if(!r)return i();const d=r+"end";let h=0;const g=()=>{a.removeEventListener(d,y),s()},y=x=>{x.target===a&&++h>=u&&g()};setTimeout(()=>{h<u&&g()},l+1),a.addEventListener(d,y)}function Zz(a,e){const t=window.getComputedStyle(a),i=C=>(t[C]||"").split(", "),n=i(`${Eh}Delay`),s=i(`${Eh}Duration`),r=K8(n,s),l=i(`${Ky}Delay`),u=i(`${Ky}Duration`),d=K8(l,u);let h=null,g=0,y=0;e===Eh?r>0&&(h=Eh,g=r,y=s.length):e===Ky?d>0&&(h=Ky,g=d,y=u.length):(g=Math.max(r,d),h=g>0?r>d?Eh:Ky:null,y=h?h===Eh?s.length:u.length:0);const x=h===Eh&&/\b(?:transform|all)(?:,|$)/.test(i(`${Eh}Property`).toString());return{type:h,timeout:g,propCount:y,hasTransform:x}}function K8(a,e){for(;a.length<e.length;)a=a.concat(a);return Math.max(...e.map((t,i)=>j8(t)+j8(a[i])))}function j8(a){return a==="auto"?0:Number(a.slice(0,-1).replace(",","."))*1e3}function $8(a){return(a?a.ownerDocument:document).body.offsetHeight}function zz(a,e,t){const i=a[C1];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?a.removeAttribute("class"):t?a.setAttribute("class",e):a.className=e}const $x=Symbol("_vod"),N7=Symbol("_vsh"),Zm={name:"show",beforeMount(a,{value:e},{transition:t}){a[$x]=a.style.display==="none"?"":a.style.display,t&&e?t.beforeEnter(a):jy(a,e)},mounted(a,{value:e},{transition:t}){t&&e&&t.enter(a)},updated(a,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(a),jy(a,!0),i.enter(a)):i.leave(a,()=>{jy(a,!1)}):jy(a,e))},beforeUnmount(a,{value:e}){jy(a,e)}};function jy(a,e){a.style.display=e?a[$x]:"none",a[N7]=!e}const Uz=Symbol(""),Hz=/(?:^|;)\s*display\s*:/;function Xz(a,e,t){const i=a.style,n=mr(t);let s=!1;if(t&&!n){if(e)if(mr(e))for(const r of e.split(";")){const l=r.slice(0,r.indexOf(":")).trim();t[l]==null&&ax(i,l,"")}else for(const r in e)t[r]==null&&ax(i,r,"");for(const r in t)r==="display"&&(s=!0),ax(i,r,t[r])}else if(n){if(e!==t){const r=i[Uz];r&&(t+=";"+r),i.cssText=t,s=Hz.test(t)}}else e&&a.removeAttribute("style");$x in a&&(a[$x]=s?i.display:"",a[N7]&&(i.display="none"))}const J8=/\s*!important$/;function ax(a,e,t){if(Za(t))t.forEach(i=>ax(a,e,i));else if(t==null&&(t=""),e.startsWith("--"))a.setProperty(e,t);else{const i=qz(a,e);J8.test(t)?a.setProperty(v_(i),t.replace(J8,""),"important"):a[i]=t}}const Q8=["Webkit","Moz","ms"],xS={};function qz(a,e){const t=xS[e];if(t)return t;let i=Jl(e);if(i!=="filter"&&i in a)return xS[e]=i;i=_C(i);for(let n=0;n<Q8.length;n++){const s=Q8[n]+i;if(s in a)return xS[e]=s}return e}const eL="http://www.w3.org/1999/xlink";function tL(a,e,t,i,n,s=YV(e)){i&&e.startsWith("xlink:")?t==null?a.removeAttributeNS(eL,e.slice(6,e.length)):a.setAttributeNS(eL,e,t):t==null||s&&!T6(t)?a.removeAttribute(e):a.setAttribute(e,s?"":Eu(t)?String(t):t)}function aL(a,e,t,i,n){if(e==="innerHTML"||e==="textContent"){t!=null&&(a[e]=e==="innerHTML"?O7(t):t);return}const s=a.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?a.getAttribute("value")||"":a.value,u=t==null?a.type==="checkbox"?"on":"":String(t);(l!==u||!("_value"in a))&&(a.value=u),t==null&&a.removeAttribute(e),a._value=t;return}let r=!1;if(t===""||t==null){const l=typeof a[e];l==="boolean"?t=T6(t):t==null&&l==="string"?(t="",r=!0):l==="number"&&(t=0,r=!0)}try{a[e]=t}catch{}r&&a.removeAttribute(n||e)}function Uh(a,e,t,i){a.addEventListener(e,t,i)}function Yz(a,e,t,i){a.removeEventListener(e,t,i)}const iL=Symbol("_vei");function Kz(a,e,t,i,n=null){const s=a[iL]||(a[iL]={}),r=s[e];if(i&&r)r.value=i;else{const[l,u]=jz(e);if(i){const d=s[e]=Qz(i,n);Uh(a,l,d,u)}else r&&(Yz(a,l,r,u),s[e]=void 0)}}const nL=/(?:Once|Passive|Capture)$/;function jz(a){let e;if(nL.test(a)){e={};let i;for(;i=a.match(nL);)a=a.slice(0,a.length-i[0].length),e[i[0].toLowerCase()]=!0}return[a[2]===":"?a.slice(3):v_(a.slice(2)),e]}let wS=0;const $z=Promise.resolve(),Jz=()=>wS||($z.then(()=>wS=0),wS=Date.now());function Qz(a,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Lu(eU(i,t.value),e,5,[i])};return t.value=a,t.attached=Jz(),t}function eU(a,e){if(Za(e)){const t=a.stopImmediatePropagation;return a.stopImmediatePropagation=()=>{t.call(a),a._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const rL=a=>a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&a.charCodeAt(2)>96&&a.charCodeAt(2)<123,tU=(a,e,t,i,n,s)=>{const r=n==="svg";e==="class"?zz(a,i,r):e==="style"?Xz(a,t,i):cC(e)?h5(e)||Kz(a,e,t,i,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):aU(a,e,i,r))?(aL(a,e,i),!a.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&tL(a,e,i,r,s,e!=="value")):a._isVueCE&&(/[A-Z]/.test(e)||!mr(i))?aL(a,Jl(e),i,s,e):(e==="true-value"?a._trueValue=i:e==="false-value"&&(a._falseValue=i),tL(a,e,i,r))};function aU(a,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in a&&rL(e)&&li(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&a.tagName==="IFRAME"||e==="form"||e==="list"&&a.tagName==="INPUT"||e==="type"&&a.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=a.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return rL(e)&&mr(t)?!1:e in a}const bp=a=>{const e=a.props["onUpdate:modelValue"]||!1;return Za(e)?t=>Q2(e,t):e};function iU(a){a.target.composing=!0}function sL(a){const e=a.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const kd=Symbol("_assign");function oL(a,e,t){return e&&(a=a.trim()),t&&(a=mC(a)),a}const Vn={created(a,{modifiers:{lazy:e,trim:t,number:i}},n){a[kd]=bp(n);const s=i||n.props&&n.props.type==="number";Uh(a,e?"change":"input",r=>{r.target.composing||a[kd](oL(a.value,t,s))}),(t||s)&&Uh(a,"change",()=>{a.value=oL(a.value,t,s)}),e||(Uh(a,"compositionstart",iU),Uh(a,"compositionend",sL),Uh(a,"change",sL))},mounted(a,{value:e}){a.value=e??""},beforeUpdate(a,{value:e,oldValue:t,modifiers:{lazy:i,trim:n,number:s}},r){if(a[kd]=bp(r),a.composing)return;const l=(s||a.type==="number")&&!/^0\d/.test(a.value)?mC(a.value):a.value,u=e??"";l!==u&&(document.activeElement===a&&a.type!=="range"&&(i&&e===t||n&&a.value.trim()===u)||(a.value=u))}},Xd={deep:!0,created(a,e,t){a[kd]=bp(t),Uh(a,"change",()=>{const i=a._modelValue,n=I1(a),s=a.checked,r=a[kd];if(Za(i)){const l=m5(i,n),u=l!==-1;if(s&&!u)r(i.concat(n));else if(!s&&u){const d=[...i];d.splice(l,1),r(d)}}else if(Gp(i)){const l=new Set(i);s?l.add(n):l.delete(n),r(l)}else r(D7(a,s))})},mounted:lL,beforeUpdate(a,e,t){a[kd]=bp(t),lL(a,e,t)}};function lL(a,{value:e,oldValue:t},i){a._modelValue=e;let n;if(Za(e))n=m5(e,i.props.value)>-1;else if(Gp(e))n=e.has(i.props.value);else{if(e===t)return;n=ib(e,D7(a,!0))}a.checked!==n&&(a.checked=n)}const B7={deep:!0,created(a,{value:e,modifiers:{number:t}},i){const n=Gp(e);Uh(a,"change",()=>{const s=Array.prototype.filter.call(a.options,r=>r.selected).map(r=>t?mC(I1(r)):I1(r));a[kd](a.multiple?n?new Set(s):s:s[0]),a._assigning=!0,so(()=>{a._assigning=!1})}),a[kd]=bp(i)},mounted(a,{value:e}){uL(a,e)},beforeUpdate(a,e,t){a[kd]=bp(t)},updated(a,{value:e}){a._assigning||uL(a,e)}};function uL(a,e){const t=a.multiple,i=Za(e);if(!(t&&!i&&!Gp(e))){for(let n=0,s=a.options.length;n<s;n++){const r=a.options[n],l=I1(r);if(t)if(i){const u=typeof l;u==="string"||u==="number"?r.selected=e.some(d=>String(d)===String(l)):r.selected=m5(e,l)>-1}else r.selected=e.has(l);else if(ib(I1(r),e)){a.selectedIndex!==n&&(a.selectedIndex=n);return}}!t&&a.selectedIndex!==-1&&(a.selectedIndex=-1)}}function I1(a){return"_value"in a?a._value:a.value}function D7(a,e){const t=e?"_trueValue":"_falseValue";return t in a?a[t]:e}const nU=["ctrl","shift","alt","meta"],rU={stop:a=>a.stopPropagation(),prevent:a=>a.preventDefault(),self:a=>a.target!==a.currentTarget,ctrl:a=>!a.ctrlKey,shift:a=>!a.shiftKey,alt:a=>!a.altKey,meta:a=>!a.metaKey,left:a=>"button"in a&&a.button!==0,middle:a=>"button"in a&&a.button!==1,right:a=>"button"in a&&a.button!==2,exact:(a,e)=>nU.some(t=>a[`${t}Key`]&&!e.includes(t))},_r=(a,e)=>{const t=a._withMods||(a._withMods={}),i=e.join(".");return t[i]||(t[i]=((n,...s)=>{for(let r=0;r<e.length;r++){const l=rU[e[r]];if(l&&l(n,e))return}return a(n,...s)}))},sU={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},$r=(a,e)=>{const t=a._withKeys||(a._withKeys={}),i=e.join(".");return t[i]||(t[i]=(n=>{if(!("key"in n))return;const s=v_(n.key);if(e.some(r=>r===s||sU[r]===s))return a(n)}))},oU=ys({patchProp:tU},Oz);let cL;function lU(){return cL||(cL=fz(oU))}const uU=((...a)=>{const e=lU().createApp(...a),{mount:t}=e;return e.mount=i=>{const n=dU(i);if(!n)return;const s=e._component;!li(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const r=t(n,!1,cU(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),r},e});function cU(a){if(a instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&a instanceof MathMLElement)return"mathml"}function dU(a){return mr(a)?document.querySelector(a):a}var V7=Symbol();function hU(a,{i18next:e,rerenderOn:t=["languageChanged","loaded","added","removed"],slotStart:i="{",slotEnd:n="}"}){const s=Ai(new Date),r=()=>so(()=>{s.value=new Date}),l=()=>s.value;t.forEach(h=>{var g;switch(h){case"added":case"removed":(g=e.store)==null||g.on(h,r);break;default:e.on(h,r);break}}),a.component("i18next",fU);const u=()=>e.isInitialized;a.config.globalProperties.$t=dL(e.t.bind(e),l,u);const d=new Proxy(e,{get(h,g){return l(),Reflect.get(h,g)}});a.config.globalProperties.$i18next=d,a.provide(V7,{i18next:d,slotPattern:mU(i,n),withAccessRecording(h,g){return dL(h,l,g)}})}function Ct(a,e){const{i18next:t,withAccessRecording:i}=Z7();let n;return n=t.getFixedT(null,null,void 0),{i18next:t,t:i(n,_U(t,a))}}function _U(a,e=[]){let t;return()=>{if(t===void 0)if(a.isInitialized){const n=(typeof e=="string"?[e]:e).filter(s=>!a.hasLoadedNamespace(s));n.length?(t=!1,a.loadNamespaces(n).then(()=>t=!0)):t=!0}else return!1;return t}}function dL(a,e,t){return new Proxy(a,{apply:function(i,n,s){return e(),t()?Reflect.apply(i,n,s):""}})}function Z7(){const a=Ps(V7);if(!a)throw new Error("i18next-vue: Make sure to register the i18next-vue plugin using app.use(...).");return a}function mU(a,e){const t=`${a}\\s*([a-z0-9\\-]+)\\s*${e}`;return new RegExp(t,"gi")}var fU=rt({props:{translation:{type:String,required:!0}},setup(a,{slots:e}){const{slotPattern:t}=Z7();return()=>{const i=a.translation,n=[];let s,r=0;for(;(s=t.exec(i))!==null;){n.push(i.substring(r,s.index));const l=e[s[1]];l?n.push(...l()):n.push(s[0]),r=t.lastIndex}return n.push(i.substring(r)),n}}});const{entries:z7,setPrototypeOf:hL,isFrozen:gU,getPrototypeOf:pU,getOwnPropertyDescriptor:yU}=Object;let{freeze:Co,seal:Ql,create:CA}=Object,{apply:IA,construct:SA}=typeof Reflect<"u"&&Reflect;Co||(Co=function(e){return e});Ql||(Ql=function(e){return e});IA||(IA=function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return e.apply(t,n)});SA||(SA=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return new e(...i)});const Jv=Io(Array.prototype.forEach),bU=Io(Array.prototype.lastIndexOf),_L=Io(Array.prototype.pop),$y=Io(Array.prototype.push),vU=Io(Array.prototype.splice),ix=Io(String.prototype.toLowerCase),CS=Io(String.prototype.toString),IS=Io(String.prototype.match),Jy=Io(String.prototype.replace),xU=Io(String.prototype.indexOf),wU=Io(String.prototype.trim),fu=Io(Object.prototype.hasOwnProperty),fo=Io(RegExp.prototype.test),Qy=CU(TypeError);function Io(a){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return IA(a,e,i)}}function CU(a){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return SA(a,t)}}function Gi(a,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ix;hL&&hL(a,null);let i=e.length;for(;i--;){let n=e[i];if(typeof n=="string"){const s=t(n);s!==n&&(gU(e)||(e[i]=s),n=s)}a[n]=!0}return a}function IU(a){for(let e=0;e<a.length;e++)fu(a,e)||(a[e]=null);return a}function hc(a){const e=CA(null);for(const[t,i]of z7(a))fu(a,t)&&(Array.isArray(i)?e[t]=IU(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=hc(i):e[t]=i);return e}function e0(a,e){for(;a!==null;){const i=yU(a,e);if(i){if(i.get)return Io(i.get);if(typeof i.value=="function")return Io(i.value)}a=pU(a)}function t(){return null}return t}const mL=Co(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),SS=Co(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),AS=Co(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),SU=Co(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),TS=Co(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),AU=Co(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),fL=Co(["#text"]),gL=Co(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ES=Co(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),pL=Co(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Qv=Co(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),TU=Ql(/\{\{[\w\W]*|[\w\W]*\}\}/gm),EU=Ql(/<%[\w\W]*|[\w\W]*%>/gm),MU=Ql(/\$\{[\w\W]*/gm),LU=Ql(/^data-[\-\w.\u00B7-\uFFFF]+$/),RU=Ql(/^aria-[\-\w]+$/),U7=Ql(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kU=Ql(/^(?:\w+script|data):/i),PU=Ql(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),H7=Ql(/^html$/i),GU=Ql(/^[a-z][.\w]*(-[.\w]+)+$/i);var yL=Object.freeze({__proto__:null,ARIA_ATTR:RU,ATTR_WHITESPACE:PU,CUSTOM_ELEMENT:GU,DATA_ATTR:LU,DOCTYPE_NAME:H7,ERB_EXPR:EU,IS_ALLOWED_URI:U7,IS_SCRIPT_OR_DATA:kU,MUSTACHE_EXPR:TU,TMPLIT_EXPR:MU});const t0={element:1,text:3,progressingInstruction:7,comment:8,document:9},WU=function(){return typeof window>"u"?null:window},OU=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(i=t.getAttribute(n));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},bL=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function X7(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:WU();const e=Ot=>X7(Ot);if(e.version="3.3.1",e.removed=[],!a||!a.document||a.document.nodeType!==t0.document||!a.Element)return e.isSupported=!1,e;let{document:t}=a;const i=t,n=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:r,Node:l,Element:u,NodeFilter:d,NamedNodeMap:h=a.NamedNodeMap||a.MozNamedAttrMap,HTMLFormElement:g,DOMParser:y,trustedTypes:x}=a,C=u.prototype,I=e0(C,"cloneNode"),A=e0(C,"remove"),E=e0(C,"nextSibling"),L=e0(C,"childNodes"),G=e0(C,"parentNode");if(typeof r=="function"){const Ot=t.createElement("template");Ot.content&&Ot.content.ownerDocument&&(t=Ot.content.ownerDocument)}let F,B="";const{implementation:Z,createNodeIterator:Y,createDocumentFragment:$,getElementsByTagName:te}=t,{importNode:ce}=i;let me=bL();e.isSupported=typeof z7=="function"&&typeof G=="function"&&Z&&Z.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:X,ERB_EXPR:de,TMPLIT_EXPR:N,DATA_ATTR:ne,ARIA_ATTR:le,IS_SCRIPT_OR_DATA:_e,ATTR_WHITESPACE:ke,CUSTOM_ELEMENT:Ie}=yL;let{IS_ALLOWED_URI:re}=yL,Q=null;const J=Gi({},[...mL,...SS,...AS,...TS,...fL]);let je=null;const Qe=Gi({},[...gL,...ES,...pL,...Qv]);let Je=Object.seal(CA(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),kt=null,Pt=null;const zt=Object.seal(CA(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Nt=!0,ga=!0,ta=!1,Fe=!0,De=!1,z=!0,Ze=!1,Re=!1,fe=!1,ie=!1,Ce=!1,Ee=!1,Ne=!0,Ve=!1;const $e="user-content-";let ht=!0,_t=!1,Et={},ca=null;const ua=Gi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let yi=null;const Xi=Gi({},["audio","video","img","source","image","track"]);let Ri=null;const En=Gi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_i="http://www.w3.org/1998/Math/MathML",nr="http://www.w3.org/2000/svg",Ci="http://www.w3.org/1999/xhtml";let Ti=Ci,Dr=!1,vs=null;const To=Gi({},[_i,nr,Ci],CS);let gr=Gi({},["mi","mo","mn","ms","mtext"]),Zn=Gi({},["annotation-xml"]);const zn=Gi({},["title","style","font","a","script"]);let pr=null;const Ll=["application/xhtml+xml","text/html"],Ii="text/html";let ee=null,ue=null;const ge=t.createElement("form"),xe=function(Me){return Me instanceof RegExp||Me instanceof Function},Se=function(){let Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ue&&ue===Me)){if((!Me||typeof Me!="object")&&(Me={}),Me=hc(Me),pr=Ll.indexOf(Me.PARSER_MEDIA_TYPE)===-1?Ii:Me.PARSER_MEDIA_TYPE,ee=pr==="application/xhtml+xml"?CS:ix,Q=fu(Me,"ALLOWED_TAGS")?Gi({},Me.ALLOWED_TAGS,ee):J,je=fu(Me,"ALLOWED_ATTR")?Gi({},Me.ALLOWED_ATTR,ee):Qe,vs=fu(Me,"ALLOWED_NAMESPACES")?Gi({},Me.ALLOWED_NAMESPACES,CS):To,Ri=fu(Me,"ADD_URI_SAFE_ATTR")?Gi(hc(En),Me.ADD_URI_SAFE_ATTR,ee):En,yi=fu(Me,"ADD_DATA_URI_TAGS")?Gi(hc(Xi),Me.ADD_DATA_URI_TAGS,ee):Xi,ca=fu(Me,"FORBID_CONTENTS")?Gi({},Me.FORBID_CONTENTS,ee):ua,kt=fu(Me,"FORBID_TAGS")?Gi({},Me.FORBID_TAGS,ee):hc({}),Pt=fu(Me,"FORBID_ATTR")?Gi({},Me.FORBID_ATTR,ee):hc({}),Et=fu(Me,"USE_PROFILES")?Me.USE_PROFILES:!1,Nt=Me.ALLOW_ARIA_ATTR!==!1,ga=Me.ALLOW_DATA_ATTR!==!1,ta=Me.ALLOW_UNKNOWN_PROTOCOLS||!1,Fe=Me.ALLOW_SELF_CLOSE_IN_ATTR!==!1,De=Me.SAFE_FOR_TEMPLATES||!1,z=Me.SAFE_FOR_XML!==!1,Ze=Me.WHOLE_DOCUMENT||!1,ie=Me.RETURN_DOM||!1,Ce=Me.RETURN_DOM_FRAGMENT||!1,Ee=Me.RETURN_TRUSTED_TYPE||!1,fe=Me.FORCE_BODY||!1,Ne=Me.SANITIZE_DOM!==!1,Ve=Me.SANITIZE_NAMED_PROPS||!1,ht=Me.KEEP_CONTENT!==!1,_t=Me.IN_PLACE||!1,re=Me.ALLOWED_URI_REGEXP||U7,Ti=Me.NAMESPACE||Ci,gr=Me.MATHML_TEXT_INTEGRATION_POINTS||gr,Zn=Me.HTML_INTEGRATION_POINTS||Zn,Je=Me.CUSTOM_ELEMENT_HANDLING||{},Me.CUSTOM_ELEMENT_HANDLING&&xe(Me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Je.tagNameCheck=Me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Me.CUSTOM_ELEMENT_HANDLING&&xe(Me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Je.attributeNameCheck=Me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Me.CUSTOM_ELEMENT_HANDLING&&typeof Me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Je.allowCustomizedBuiltInElements=Me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),De&&(ga=!1),Ce&&(ie=!0),Et&&(Q=Gi({},fL),je=[],Et.html===!0&&(Gi(Q,mL),Gi(je,gL)),Et.svg===!0&&(Gi(Q,SS),Gi(je,ES),Gi(je,Qv)),Et.svgFilters===!0&&(Gi(Q,AS),Gi(je,ES),Gi(je,Qv)),Et.mathMl===!0&&(Gi(Q,TS),Gi(je,pL),Gi(je,Qv))),Me.ADD_TAGS&&(typeof Me.ADD_TAGS=="function"?zt.tagCheck=Me.ADD_TAGS:(Q===J&&(Q=hc(Q)),Gi(Q,Me.ADD_TAGS,ee))),Me.ADD_ATTR&&(typeof Me.ADD_ATTR=="function"?zt.attributeCheck=Me.ADD_ATTR:(je===Qe&&(je=hc(je)),Gi(je,Me.ADD_ATTR,ee))),Me.ADD_URI_SAFE_ATTR&&Gi(Ri,Me.ADD_URI_SAFE_ATTR,ee),Me.FORBID_CONTENTS&&(ca===ua&&(ca=hc(ca)),Gi(ca,Me.FORBID_CONTENTS,ee)),Me.ADD_FORBID_CONTENTS&&(ca===ua&&(ca=hc(ca)),Gi(ca,Me.ADD_FORBID_CONTENTS,ee)),ht&&(Q["#text"]=!0),Ze&&Gi(Q,["html","head","body"]),Q.table&&(Gi(Q,["tbody"]),delete kt.tbody),Me.TRUSTED_TYPES_POLICY){if(typeof Me.TRUSTED_TYPES_POLICY.createHTML!="function")throw Qy('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Me.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Qy('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');F=Me.TRUSTED_TYPES_POLICY,B=F.createHTML("")}else F===void 0&&(F=OU(x,n)),F!==null&&typeof B=="string"&&(B=F.createHTML(""));Co&&Co(Me),ue=Me}},Xe=Gi({},[...SS,...AS,...SU]),ze=Gi({},[...TS,...AU]),pe=function(Me){let yt=G(Me);(!yt||!yt.tagName)&&(yt={namespaceURI:Ti,tagName:"template"});const Yt=ix(Me.tagName),fa=ix(yt.tagName);return vs[Me.namespaceURI]?Me.namespaceURI===nr?yt.namespaceURI===Ci?Yt==="svg":yt.namespaceURI===_i?Yt==="svg"&&(fa==="annotation-xml"||gr[fa]):!!Xe[Yt]:Me.namespaceURI===_i?yt.namespaceURI===Ci?Yt==="math":yt.namespaceURI===nr?Yt==="math"&&Zn[fa]:!!ze[Yt]:Me.namespaceURI===Ci?yt.namespaceURI===nr&&!Zn[fa]||yt.namespaceURI===_i&&!gr[fa]?!1:!ze[Yt]&&(zn[Yt]||!Xe[Yt]):!!(pr==="application/xhtml+xml"&&vs[Me.namespaceURI]):!1},Ae=function(Me){$y(e.removed,{element:Me});try{G(Me).removeChild(Me)}catch{A(Me)}},tt=function(Me,yt){try{$y(e.removed,{attribute:yt.getAttributeNode(Me),from:yt})}catch{$y(e.removed,{attribute:null,from:yt})}if(yt.removeAttribute(Me),Me==="is")if(ie||Ce)try{Ae(yt)}catch{}else try{yt.setAttribute(Me,"")}catch{}},vt=function(Me){let yt=null,Yt=null;if(fe)Me="<remove></remove>"+Me;else{const Aa=IS(Me,/^[\r\n\t ]+/);Yt=Aa&&Aa[0]}pr==="application/xhtml+xml"&&Ti===Ci&&(Me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Me+"</body></html>");const fa=F?F.createHTML(Me):Me;if(Ti===Ci)try{yt=new y().parseFromString(fa,pr)}catch{}if(!yt||!yt.documentElement){yt=Z.createDocument(Ti,"template",null);try{yt.documentElement.innerHTML=Dr?B:fa}catch{}}const Ba=yt.body||yt.documentElement;return Me&&Yt&&Ba.insertBefore(t.createTextNode(Yt),Ba.childNodes[0]||null),Ti===Ci?te.call(yt,Ze?"html":"body")[0]:Ze?yt.documentElement:Ba},At=function(Me){return Y.call(Me.ownerDocument||Me,Me,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},ct=function(Me){return Me instanceof g&&(typeof Me.nodeName!="string"||typeof Me.textContent!="string"||typeof Me.removeChild!="function"||!(Me.attributes instanceof h)||typeof Me.removeAttribute!="function"||typeof Me.setAttribute!="function"||typeof Me.namespaceURI!="string"||typeof Me.insertBefore!="function"||typeof Me.hasChildNodes!="function")},wt=function(Me){return typeof l=="function"&&Me instanceof l};function Jt(Ot,Me,yt){Jv(Ot,Yt=>{Yt.call(e,Me,yt,ue)})}const aa=function(Me){let yt=null;if(Jt(me.beforeSanitizeElements,Me,null),ct(Me))return Ae(Me),!0;const Yt=ee(Me.nodeName);if(Jt(me.uponSanitizeElement,Me,{tagName:Yt,allowedTags:Q}),z&&Me.hasChildNodes()&&!wt(Me.firstElementChild)&&fo(/<[/\w!]/g,Me.innerHTML)&&fo(/<[/\w!]/g,Me.textContent)||Me.nodeType===t0.progressingInstruction||z&&Me.nodeType===t0.comment&&fo(/<[/\w]/g,Me.data))return Ae(Me),!0;if(!(zt.tagCheck instanceof Function&&zt.tagCheck(Yt))&&(!Q[Yt]||kt[Yt])){if(!kt[Yt]&&jt(Yt)&&(Je.tagNameCheck instanceof RegExp&&fo(Je.tagNameCheck,Yt)||Je.tagNameCheck instanceof Function&&Je.tagNameCheck(Yt)))return!1;if(ht&&!ca[Yt]){const fa=G(Me)||Me.parentNode,Ba=L(Me)||Me.childNodes;if(Ba&&fa){const Aa=Ba.length;for(let $i=Aa-1;$i>=0;--$i){const si=I(Ba[$i],!0);si.__removalCount=(Me.__removalCount||0)+1,fa.insertBefore(si,E(Me))}}}return Ae(Me),!0}return Me instanceof u&&!pe(Me)||(Yt==="noscript"||Yt==="noembed"||Yt==="noframes")&&fo(/<\/no(script|embed|frames)/i,Me.innerHTML)?(Ae(Me),!0):(De&&Me.nodeType===t0.text&&(yt=Me.textContent,Jv([X,de,N],fa=>{yt=Jy(yt,fa," ")}),Me.textContent!==yt&&($y(e.removed,{element:Me.cloneNode()}),Me.textContent=yt)),Jt(me.afterSanitizeElements,Me,null),!1)},mt=function(Me,yt,Yt){if(Ne&&(yt==="id"||yt==="name")&&(Yt in t||Yt in ge))return!1;if(!(ga&&!Pt[yt]&&fo(ne,yt))){if(!(Nt&&fo(le,yt))){if(!(zt.attributeCheck instanceof Function&&zt.attributeCheck(yt,Me))){if(!je[yt]||Pt[yt]){if(!(jt(Me)&&(Je.tagNameCheck instanceof RegExp&&fo(Je.tagNameCheck,Me)||Je.tagNameCheck instanceof Function&&Je.tagNameCheck(Me))&&(Je.attributeNameCheck instanceof RegExp&&fo(Je.attributeNameCheck,yt)||Je.attributeNameCheck instanceof Function&&Je.attributeNameCheck(yt,Me))||yt==="is"&&Je.allowCustomizedBuiltInElements&&(Je.tagNameCheck instanceof RegExp&&fo(Je.tagNameCheck,Yt)||Je.tagNameCheck instanceof Function&&Je.tagNameCheck(Yt))))return!1}else if(!Ri[yt]){if(!fo(re,Jy(Yt,ke,""))){if(!((yt==="src"||yt==="xlink:href"||yt==="href")&&Me!=="script"&&xU(Yt,"data:")===0&&yi[Me])){if(!(ta&&!fo(_e,Jy(Yt,ke,"")))){if(Yt)return!1}}}}}}}return!0},jt=function(Me){return Me!=="annotation-xml"&&IS(Me,Ie)},Ut=function(Me){Jt(me.beforeSanitizeAttributes,Me,null);const{attributes:yt}=Me;if(!yt||ct(Me))return;const Yt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:je,forceKeepAttr:void 0};let fa=yt.length;for(;fa--;){const Ba=yt[fa],{name:Aa,namespaceURI:$i,value:si}=Ba,an=ee(Aa),ki=si;let Ea=Aa==="value"?ki:wU(ki);if(Yt.attrName=an,Yt.attrValue=Ea,Yt.keepAttr=!0,Yt.forceKeepAttr=void 0,Jt(me.uponSanitizeAttribute,Me,Yt),Ea=Yt.attrValue,Ve&&(an==="id"||an==="name")&&(tt(Aa,Me),Ea=$e+Ea),z&&fo(/((--!?|])>)|<\/(style|title|textarea)/i,Ea)){tt(Aa,Me);continue}if(an==="attributename"&&IS(Ea,"href")){tt(Aa,Me);continue}if(Yt.forceKeepAttr)continue;if(!Yt.keepAttr){tt(Aa,Me);continue}if(!Fe&&fo(/\/>/i,Ea)){tt(Aa,Me);continue}De&&Jv([X,de,N],Vr=>{Ea=Jy(Ea,Vr," ")});const bi=ee(Me.nodeName);if(!mt(bi,an,Ea)){tt(Aa,Me);continue}if(F&&typeof x=="object"&&typeof x.getAttributeType=="function"&&!$i)switch(x.getAttributeType(bi,an)){case"TrustedHTML":{Ea=F.createHTML(Ea);break}case"TrustedScriptURL":{Ea=F.createScriptURL(Ea);break}}if(Ea!==ki)try{$i?Me.setAttributeNS($i,Aa,Ea):Me.setAttribute(Aa,Ea),ct(Me)?Ae(Me):_L(e.removed)}catch{tt(Aa,Me)}}Jt(me.afterSanitizeAttributes,Me,null)},Xt=function Ot(Me){let yt=null;const Yt=At(Me);for(Jt(me.beforeSanitizeShadowDOM,Me,null);yt=Yt.nextNode();)Jt(me.uponSanitizeShadowNode,yt,null),aa(yt),Ut(yt),yt.content instanceof s&&Ot(yt.content);Jt(me.afterSanitizeShadowDOM,Me,null)};return e.sanitize=function(Ot){let Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yt=null,Yt=null,fa=null,Ba=null;if(Dr=!Ot,Dr&&(Ot="<!-->"),typeof Ot!="string"&&!wt(Ot))if(typeof Ot.toString=="function"){if(Ot=Ot.toString(),typeof Ot!="string")throw Qy("dirty is not a string, aborting")}else throw Qy("toString is not a function");if(!e.isSupported)return Ot;if(Re||Se(Me),e.removed=[],typeof Ot=="string"&&(_t=!1),_t){if(Ot.nodeName){const si=ee(Ot.nodeName);if(!Q[si]||kt[si])throw Qy("root node is forbidden and cannot be sanitized in-place")}}else if(Ot instanceof l)yt=vt("<!---->"),Yt=yt.ownerDocument.importNode(Ot,!0),Yt.nodeType===t0.element&&Yt.nodeName==="BODY"||Yt.nodeName==="HTML"?yt=Yt:yt.appendChild(Yt);else{if(!ie&&!De&&!Ze&&Ot.indexOf("<")===-1)return F&&Ee?F.createHTML(Ot):Ot;if(yt=vt(Ot),!yt)return ie?null:Ee?B:""}yt&&fe&&Ae(yt.firstChild);const Aa=At(_t?Ot:yt);for(;fa=Aa.nextNode();)aa(fa),Ut(fa),fa.content instanceof s&&Xt(fa.content);if(_t)return Ot;if(ie){if(Ce)for(Ba=$.call(yt.ownerDocument);yt.firstChild;)Ba.appendChild(yt.firstChild);else Ba=yt;return(je.shadowroot||je.shadowrootmode)&&(Ba=ce.call(i,Ba,!0)),Ba}let $i=Ze?yt.outerHTML:yt.innerHTML;return Ze&&Q["!doctype"]&&yt.ownerDocument&&yt.ownerDocument.doctype&&yt.ownerDocument.doctype.name&&fo(H7,yt.ownerDocument.doctype.name)&&($i="<!DOCTYPE "+yt.ownerDocument.doctype.name+`>
`+$i),De&&Jv([X,de,N],si=>{$i=Jy($i,si," ")}),F&&Ee?F.createHTML($i):$i},e.setConfig=function(){let Ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Se(Ot),Re=!0},e.clearConfig=function(){ue=null,Re=!1},e.isValidAttribute=function(Ot,Me,yt){ue||Se({});const Yt=ee(Ot),fa=ee(Me);return mt(Yt,fa,yt)},e.addHook=function(Ot,Me){typeof Me=="function"&&$y(me[Ot],Me)},e.removeHook=function(Ot,Me){if(Me!==void 0){const yt=bU(me[Ot],Me);return yt===-1?void 0:vU(me[Ot],yt,1)[0]}return _L(me[Ot])},e.removeHooks=function(Ot){me[Ot]=[]},e.removeAllHooks=function(){me=bL()},e}var FU=X7();function NU(a,e){const t=a.hooks??{};let i;for(i in t){const n=t[i];n!==void 0&&e.addHook(i,n)}}function q7(){return FU()}function BU(a={},e=q7){const t=e();NU(a,t);const i=function(r){const l=r.value;if(r.oldValue===l)return;const u=`${l}`,d=r.arg,h=a.namedConfigurations,g=a.default??{};return h&&d!==void 0?t.sanitize(u,h[d]??g):t.sanitize(u,g)},n=function(r,l){const u=i(l);u!==void 0&&(r.innerHTML=u)},s={mounted:n,updated:n};return a.enableSSRPropsSupport?{...s,getSSRProps(r){return{innerHTML:i(r)}}}:s}const DU={install(a,e={},t=q7){a.directive("dompurify-html",BU(e,t))}};let Y7;const EC=a=>Y7=a,K7=Symbol();function AA(a){return a&&typeof a=="object"&&Object.prototype.toString.call(a)==="[object Object]"&&typeof a.toJSON!="function"}var X0;(function(a){a.direct="direct",a.patchObject="patch object",a.patchFunction="patch function"})(X0||(X0={}));function VU(){const a=R6(!0),e=a.run(()=>Ye({}));let t=[],i=[];const n=x5({install(s){EC(n),n._a=s,s.provide(K7,n),s.config.globalProperties.$pinia=n,i.forEach(r=>t.push(r)),i=[]},use(s){return this._a?t.push(s):i.push(s),this},_p:t,_a:null,_e:a,_s:new Map,state:e});return n}const j7=()=>{};function vL(a,e,t,i=j7){a.push(e);const n=()=>{const s=a.indexOf(e);s>-1&&(a.splice(s,1),i())};return!t&&k6()&&jV(n),n}function hg(a,...e){a.slice().forEach(t=>{t(...e)})}const ZU=a=>a(),xL=Symbol(),MS=Symbol();function TA(a,e){a instanceof Map&&e instanceof Map?e.forEach((t,i)=>a.set(i,t)):a instanceof Set&&e instanceof Set&&e.forEach(a.add,a);for(const t in e){if(!e.hasOwnProperty(t))continue;const i=e[t],n=a[t];AA(n)&&AA(i)&&a.hasOwnProperty(t)&&!Pn(i)&&!Sc(i)?a[t]=TA(n,i):a[t]=i}return a}const zU=Symbol();function UU(a){return!AA(a)||!a.hasOwnProperty(zU)}const{assign:Oh}=Object;function HU(a){return!!(Pn(a)&&a.effect)}function XU(a,e,t,i){const{state:n,actions:s,getters:r}=e,l=t.state.value[a];let u;function d(){l||(t.state.value[a]=n?n():{});const h=vZ(t.state.value[a]);return Oh(h,s,Object.keys(r||{}).reduce((g,y)=>(g[y]=x5(St(()=>{EC(t);const x=t._s.get(a);return r[y].call(x,x)})),g),{}))}return u=$7(a,d,e,t,i,!0),u}function $7(a,e,t={},i,n,s){let r;const l=Oh({actions:{}},t),u={deep:!0};let d,h,g=[],y=[],x;const C=i.state.value[a];!s&&!C&&(i.state.value[a]={}),Ye({});let I;function A($){let te;d=h=!1,typeof $=="function"?($(i.state.value[a]),te={type:X0.patchFunction,storeId:a,events:x}):(TA(i.state.value[a],$),te={type:X0.patchObject,payload:$,storeId:a,events:x});const ce=I=Symbol();so().then(()=>{I===ce&&(d=!0)}),h=!0,hg(g,te,i.state.value[a])}const E=s?function(){const{state:te}=t,ce=te?te():{};this.$patch(me=>{Oh(me,ce)})}:j7;function L(){r.stop(),g=[],y=[],i._s.delete(a)}const G=($,te="")=>{if(xL in $)return $[MS]=te,$;const ce=function(){EC(i);const me=Array.from(arguments),X=[],de=[];function N(_e){X.push(_e)}function ne(_e){de.push(_e)}hg(y,{args:me,name:ce[MS],store:B,after:N,onError:ne});let le;try{le=$.apply(this&&this.$id===a?this:B,me)}catch(_e){throw hg(de,_e),_e}return le instanceof Promise?le.then(_e=>(hg(X,_e),_e)).catch(_e=>(hg(de,_e),Promise.reject(_e))):(hg(X,le),le)};return ce[xL]=!0,ce[MS]=te,ce},F={_p:i,$id:a,$onAction:vL.bind(null,y),$patch:A,$reset:E,$subscribe($,te={}){const ce=vL(g,$,te.detached,()=>me()),me=r.run(()=>Rt(()=>i.state.value[a],X=>{(te.flush==="sync"?h:d)&&$({storeId:a,type:X0.direct,events:x},X)},Oh({},u,te)));return ce},$dispose:L},B=pC(F);i._s.set(a,B);const Y=(i._a&&i._a.runWithContext||ZU)(()=>i._e.run(()=>(r=R6()).run(()=>e({action:G}))));for(const $ in Y){const te=Y[$];if(Pn(te)&&!HU(te)||Sc(te))s||(C&&UU(te)&&(Pn(te)?te.value=C[$]:TA(te,C[$])),i.state.value[a][$]=te);else if(typeof te=="function"){const ce=G(te,$);Y[$]=ce,l.actions[$]=te}}return Oh(B,Y),Oh(Yi(B),Y),Object.defineProperty(B,"$state",{get:()=>i.state.value[a],set:$=>{A(te=>{Oh(te,$)})}}),i._p.forEach($=>{Oh(B,r.run(()=>$({store:B,app:i._a,pinia:i,options:l})))}),C&&s&&t.hydrate&&t.hydrate(B.$state,C),d=!0,h=!0,B}function Ao(a,e,t){let i,n;const s=typeof e=="function";typeof a=="string"?(i=a,n=s?t:e):(n=a,i=a.id);function r(l,u){const d=JZ();return l=l||(d?Ps(K7,null):null),l&&EC(l),l=Y7,l._s.has(i)||(s?$7(i,e,n,l):XU(i,n,l)),l._s.get(i)}return r.$id=i,r}function xt(a){{const e=Yi(a),t={};for(const i in e){const n=e[i];n.effect?t[i]=St({get:()=>a[i],set(s){a[i]=s}}):(Pn(n)||Sc(n))&&(t[i]=K6(a,i))}return t}}function J7(...a){console.warn(...a)}const ps={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Yr(a){const e=Qo();for(let t=0,i=a.length;t<i;++t)q0(e,a[t]);return e}function qU(a,e,t){const i=Math.min.apply(null,a),n=Math.min.apply(null,e),s=Math.max.apply(null,a),r=Math.max.apply(null,e);return Pc(i,n,s,r,t)}function qd(a,e,t){return t?(t[0]=a[0]-e,t[1]=a[1]-e,t[2]=a[2]+e,t[3]=a[3]+e,t):[a[0]-e,a[1]-e,a[2]+e,a[3]+e]}function Q7(a,e){return e?(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e):a.slice()}function of(a,e,t){let i,n;return e<a[0]?i=a[0]-e:a[2]<e?i=e-a[2]:i=0,t<a[1]?n=a[1]-t:a[3]<t?n=t-a[3]:n=0,i*i+n*n}function kc(a,e){return R5(a,e[0],e[1])}function yc(a,e){return a[0]<=e[0]&&e[2]<=a[2]&&a[1]<=e[1]&&e[3]<=a[3]}function R5(a,e,t){return a[0]<=e&&e<=a[2]&&a[1]<=t&&t<=a[3]}function EA(a,e){const t=a[0],i=a[1],n=a[2],s=a[3],r=e[0],l=e[1];let u=ps.UNKNOWN;return r<t?u=u|ps.LEFT:r>n&&(u=u|ps.RIGHT),l<i?u=u|ps.BELOW:l>s&&(u=u|ps.ABOVE),u===ps.UNKNOWN&&(u=ps.INTERSECTING),u}function Qo(){return[1/0,1/0,-1/0,-1/0]}function Pc(a,e,t,i,n){return n?(n[0]=a,n[1]=e,n[2]=t,n[3]=i,n):[a,e,t,i]}function Wp(a){return Pc(1/0,1/0,-1/0,-1/0,a)}function ep(a,e){const t=a[0],i=a[1];return Pc(t,i,t,i,e)}function k5(a,e,t,i,n){const s=Wp(n);return eP(s,a,e,t,i)}function zm(a,e){return a[0]==e[0]&&a[2]==e[2]&&a[1]==e[1]&&a[3]==e[3]}function vp(a,e){return e[0]<a[0]&&(a[0]=e[0]),e[2]>a[2]&&(a[2]=e[2]),e[1]<a[1]&&(a[1]=e[1]),e[3]>a[3]&&(a[3]=e[3]),a}function q0(a,e){e[0]<a[0]&&(a[0]=e[0]),e[0]>a[2]&&(a[2]=e[0]),e[1]<a[1]&&(a[1]=e[1]),e[1]>a[3]&&(a[3]=e[1])}function eP(a,e,t,i,n){for(;t<i;t+=n)YU(a,e[t],e[t+1]);return a}function YU(a,e,t){a[0]=Math.min(a[0],e),a[1]=Math.min(a[1],t),a[2]=Math.max(a[2],e),a[3]=Math.max(a[3],t)}function P5(a,e){let t;return t=e(MC(a)),t||(t=e(LC(a)),t)||(t=e(RC(a)),t)||(t=e(th(a)),t)?t:!1}function MA(a){let e=0;return lf(a)||(e=Oi(a)*Fr(a)),e}function MC(a){return[a[0],a[1]]}function LC(a){return[a[2],a[1]]}function Ru(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function KU(a,e){let t;if(e==="bottom-left")t=MC(a);else if(e==="bottom-right")t=LC(a);else if(e==="top-left")t=th(a);else if(e==="top-right")t=RC(a);else throw new Error("Invalid corner");return t}function S1(a,e,t,i,n){const[s,r,l,u,d,h,g,y]=tP(a,e,t,i);return Pc(Math.min(s,l,d,g),Math.min(r,u,h,y),Math.max(s,l,d,g),Math.max(r,u,h,y),n)}function tP(a,e,t,i){const n=e*i[0]/2,s=e*i[1]/2,r=Math.cos(t),l=Math.sin(t),u=n*r,d=n*l,h=s*r,g=s*l,y=a[0],x=a[1];return[y-u+g,x-d-h,y-u-g,x-d+h,y+u-g,x+d+h,y+u+g,x+d-h,y-u+g,x-d-h]}function Fr(a){return a[3]-a[1]}function Ac(a,e,t){const i=t||Qo();return Or(a,e)?(a[0]>e[0]?i[0]=a[0]:i[0]=e[0],a[1]>e[1]?i[1]=a[1]:i[1]=e[1],a[2]<e[2]?i[2]=a[2]:i[2]=e[2],a[3]<e[3]?i[3]=a[3]:i[3]=e[3]):Wp(i),i}function th(a){return[a[0],a[3]]}function RC(a){return[a[2],a[3]]}function Oi(a){return a[2]-a[0]}function Or(a,e){return a[0]<=e[2]&&a[2]>=e[0]&&a[1]<=e[3]&&a[3]>=e[1]}function lf(a){return a[2]<a[0]||a[3]<a[1]}function jU(a,e){return e?(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e):a}function $U(a,e,t){let i=!1;const n=EA(a,e),s=EA(a,t);if(n===ps.INTERSECTING||s===ps.INTERSECTING)i=!0;else{const r=a[0],l=a[1],u=a[2],d=a[3],h=e[0],g=e[1],y=t[0],x=t[1],C=(x-g)/(y-h);let I,A;s&ps.ABOVE&&!(n&ps.ABOVE)&&(I=y-(x-d)/C,i=I>=r&&I<=u),!i&&s&ps.RIGHT&&!(n&ps.RIGHT)&&(A=x-(y-u)*C,i=A>=l&&A<=d),!i&&s&ps.BELOW&&!(n&ps.BELOW)&&(I=y-(x-l)/C,i=I>=r&&I<=u),!i&&s&ps.LEFT&&!(n&ps.LEFT)&&(A=x-(y-r)*C,i=A>=l&&A<=d)}return i}function JU(a,e,t,i){if(lf(a))return Wp(t);let n=[];if(i>1){const l=a[2]-a[0],u=a[3]-a[1];for(let d=0;d<i;++d)n.push(a[0]+l*d/i,a[1],a[2],a[1]+u*d/i,a[2]-l*d/i,a[3],a[0],a[3]-u*d/i)}else n=[a[0],a[1],a[2],a[1],a[2],a[3],a[0],a[3]];e(n,n,2);const s=[],r=[];for(let l=0,u=n.length;l<u;l+=2)s.push(n[l]),r.push(n[l+1]);return qU(s,r,t)}function aP(a,e){const t=e.getExtent(),i=Ru(a);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const n=Oi(t),r=Math.floor((i[0]-t[0])/n)*n;a[0]-=r,a[2]-=r}return a}function iP(a,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(a[0])||!isFinite(a[2]))return[[i[0],a[1],i[2],a[3]]];aP(a,e);const n=Oi(i);if(Oi(a)>n&&!t)return[[i[0],a[1],i[2],a[3]]];if(a[0]<i[0])return[[a[0]+n,a[1],i[2],a[3]],[i[0],a[1],a[2],a[3]]];if(a[2]>i[2])return[[a[0],a[1],i[2],a[3]],[i[0],a[1],a[2]-n,a[3]]]}return[a]}function Dn(a,e,t){return Math.min(Math.max(a,e),t)}function QU(a,e,t,i,n,s){const r=n-t,l=s-i;if(r!==0||l!==0){const u=((a-t)*r+(e-i)*l)/(r*r+l*l);u>1?(t=n,i=s):u>0&&(t+=r*u,i+=l*u)}return Pd(a,e,t,i)}function Pd(a,e,t,i){const n=t-a,s=i-e;return n*n+s*s}function eH(a){const e=a.length;for(let i=0;i<e;i++){let n=i,s=Math.abs(a[i][i]);for(let l=i+1;l<e;l++){const u=Math.abs(a[l][i]);u>s&&(s=u,n=l)}if(s===0)return null;const r=a[n];a[n]=a[i],a[i]=r;for(let l=i+1;l<e;l++){const u=-a[l][i]/a[i][i];for(let d=i;d<e+1;d++)i==d?a[l][d]=0:a[l][d]+=u*a[i][d]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=a[i][e]/a[i][i];for(let n=i-1;n>=0;n--)a[n][e]-=a[n][i]*t[i]}return t}function Yd(a){return a*180/Math.PI}function io(a){return a*Math.PI/180}function Gd(a,e){const t=a%e;return t*e<0?t+e:t}function gl(a,e,t){return a+t*(e-a)}function Op(a,e){const t=Math.pow(10,e);return Math.round(a*t)/t}function wL(a,e){return Math.round(Op(a,e))}function Og(a,e){return Math.floor(Op(a,e))}function Yh(a,e){return Math.ceil(Op(a,e))}function LA(a,e,t){if(a>=e&&a<t)return a;const i=t-e;return((a-e)%i+i)%i+e}function Hh(a,e,t){const i=""+a;let n=i.indexOf(".");return n=n===-1?i.length:n,n>e?i:new Array(1+e-n).join("0")+i}function G5(a,e){const t=(""+a).split("."),i=(""+e).split(".");for(let n=0;n<Math.max(t.length,i.length);n++){const s=parseInt(t[n]||"0",10),r=parseInt(i[n]||"0",10);if(s>r)return 1;if(r>s)return-1}return 0}function tH(a,e){return a[0]+=+e[0],a[1]+=+e[1],a}function lb(a,e){const t=a[0],i=a[1],n=e[0],s=e[1],r=n[0],l=n[1],u=s[0],d=s[1],h=u-r,g=d-l,y=h===0&&g===0?0:(h*(t-r)+g*(i-l))/(h*h+g*g||0);let x,C;return y<=0?(x=r,C=l):y>=1?(x=u,C=d):(x=r+y*h,C=l+y*g),[x,C]}function a0(a,e,t){return a?e.replace("{x}",a[0].toFixed(t)).replace("{y}",a[1].toFixed(t)):""}function Hs(a,e){let t=!0;for(let i=a.length-1;i>=0;--i)if(a[i]!=e[i]){t=!1;break}return t}function W5(a,e){const t=Math.cos(e),i=Math.sin(e),n=a[0]*t-a[1]*i,s=a[1]*t+a[0]*i;return a[0]=n,a[1]=s,a}function aH(a,e){return a[0]*=e,a[1]*=e,a}function Wd(a,e){const t=a[0]-e[0],i=a[1]-e[1];return t*t+i*i}function Fg(a,e){return Math.sqrt(Wd(a,e))}function RA(a,e){return Wd(a,lb(a,e))}function kC(a,e){if(e.canWrapX()){const t=Oi(e.getExtent()),i=nP(a,e,t);i&&(a[0]-=i*t)}return a}function nP(a,e,t){const i=e.getExtent();let n=0;return e.canWrapX()&&(a[0]<i[0]||a[0]>i[2])&&(t=t||Oi(i),n=Math.floor((a[0]-i[0])/t)),n}const Um={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let PC=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Um[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const ub=6378137,Ng=Math.PI*ub,iH=[-Ng,-Ng,Ng,Ng],nH=[-180,-85,180,85],e2=ub*Math.log(Math.tan(Math.PI/2));class _g extends PC{constructor(e){super({code:e,units:"m",extent:iH,global:!0,worldExtent:nH,getPointResolution:function(t,i){return t/Math.cosh(i[1]/ub)}})}}const CL=[new _g("EPSG:3857"),new _g("EPSG:102100"),new _g("EPSG:102113"),new _g("EPSG:900913"),new _g("http://www.opengis.net/def/crs/EPSG/0/3857"),new _g("http://www.opengis.net/gml/srs/epsg.xml#3857")];function rH(a,e,t,i){const n=a.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=a.slice():e=new Array(n));for(let s=0;s<n;s+=i){e[s]=Ng*a[s]/180;let r=ub*Math.log(Math.tan(Math.PI*(+a[s+1]+90)/360));r>e2?r=e2:r<-e2&&(r=-e2),e[s+1]=r}return e}function sH(a,e,t,i){const n=a.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=a.slice():e=new Array(n));for(let s=0;s<n;s+=i)e[s]=180*a[s]/Ng,e[s+1]=360*Math.atan(Math.exp(a[s+1]/ub))/Math.PI-90;return e}const oH=6378137,IL=[-180,-90,180,90],lH=Math.PI*oH/180;class cm extends PC{constructor(e,t){super({code:e,units:"degrees",extent:IL,axisOrientation:t,global:!0,metersPerUnit:lH,worldExtent:IL})}}const SL=[new cm("CRS:84"),new cm("EPSG:4326","neu"),new cm("urn:ogc:def:crs:OGC:1.3:CRS84"),new cm("urn:ogc:def:crs:OGC:2:84"),new cm("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new cm("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new cm("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let kA={};function nx(a){return kA[a]||kA[a.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function uH(a,e){kA[a]=e}function cb(a){for(const e in a)delete a[e]}function Hm(a){let e;for(e in a)return!1;return!e}let tp={};function Xm(a,e,t){const i=a.getCode(),n=e.getCode();i in tp||(tp[i]={}),tp[i][n]=t}function rx(a,e){return a in tp&&e in tp[a]?tp[a][e]:null}const Jx=.9996,Xl=.00669438,GC=Xl*Xl,WC=GC*Xl,Am=Xl/(1-Xl),AL=Math.sqrt(1-Xl),xp=(1-AL)/(1+AL),rP=xp*xp,O5=rP*xp,F5=O5*xp,sP=F5*xp,oP=1-Xl/4-3*GC/64-5*WC/256,cH=3*Xl/8+3*GC/32+45*WC/1024,dH=15*GC/256+45*WC/1024,hH=35*WC/3072,_H=3/2*xp-27/32*O5+269/512*sP,mH=21/16*rP-55/32*F5,fH=151/96*O5-417/128*sP,gH=1097/512*F5,Qx=6378137;function pH(a,e,t){const i=a-5e5,r=(t.north?e:e-1e7)/Jx/(Qx*oP),l=r+_H*Math.sin(2*r)+mH*Math.sin(4*r)+fH*Math.sin(6*r)+gH*Math.sin(8*r),u=Math.sin(l),d=u*u,h=Math.cos(l),g=u/h,y=g*g,x=y*y,C=1-Xl*d,I=Math.sqrt(1-Xl*d),A=Qx/I,E=(1-Xl)/C,L=Am*h**2,G=L*L,F=i/(A*Jx),B=F*F,Z=B*F,Y=Z*F,$=Y*F,te=$*F,ce=l-g/E*(B/2-Y/24*(5+3*y+10*L-4*G-9*Am))+te/720*(61+90*y+298*L+45*x-252*Am-3*G);let me=(F-Z/6*(1+2*y+L)+$/120*(5-2*L+28*y-3*G+8*Am+24*x))/h;return me=LA(me+io(lP(t.number)),-Math.PI,Math.PI),[Yd(me),Yd(ce)]}const TL=-80,EL=84,yH=-180,bH=180;function vH(a,e,t){a=LA(a,yH,bH),e<TL?e=TL:e>EL&&(e=EL);const i=io(e),n=Math.sin(i),s=Math.cos(i),r=n/s,l=r*r,u=l*l,d=io(a),h=lP(t.number),g=io(h),y=Qx/Math.sqrt(1-Xl*n**2),x=Am*s**2,C=s*LA(d-g,-Math.PI,Math.PI),I=C*C,A=I*C,E=A*C,L=E*C,G=L*C,F=Qx*(oP*i-cH*Math.sin(2*i)+dH*Math.sin(4*i)-hH*Math.sin(6*i)),B=Jx*y*(C+A/6*(1-l+x)+L/120*(5-18*l+u+72*x-58*Am))+5e5;let Z=Jx*(F+y*r*(I/2+E/24*(5-l+9*x+4*x**2)+G/720*(61-58*l+u+600*x-330*Am)));return t.north||(Z+=1e7),[B,Z]}function lP(a){return(a-1)*6-180+3}const xH=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function uP(a){let e=0;for(const n of xH){const s=a.match(n);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function ML(a,e){return function(t,i,n,s){const r=t.length;n=n>1?n:2,s=s??n,i||(n>2?i=t.slice():i=new Array(r));for(let l=0;l<r;l+=s){const u=t[l],d=t[l+1],h=a(u,d,e);i[l]=h[0],i[l+1]=h[1]}return i}}function wH(a){return uP(a)?new PC({code:a,units:"m"}):null}function CH(a){const e=uP(a.getCode());return e?{forward:ML(vH,e),inverse:ML(pH,e)}:null}const N5=63710088e-1;function ew(a,e,t){t=t||N5;const i=io(a[1]),n=io(e[1]),s=(n-i)/2,r=io(e[0]-a[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(r)*Math.sin(r)*Math.cos(i)*Math.cos(n);return 2*t*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function t2(a,e){let t=0;const i=a.length;let n=a[i-1][0],s=a[i-1][1];for(let r=0;r<i;r++){const l=a[r][0],u=a[r][1];t+=io(l-n)*(2+Math.sin(io(s))+Math.sin(io(u))),n=l,s=u}return t*e*e/2}function cP(a,e){e=e||{};const t=e.radius||N5,i=e.projection||"EPSG:3857",n=a.getType();n!=="GeometryCollection"&&(a=a.clone().transform(i,"EPSG:4326"));let s=0,r,l,u,d,h,g;switch(n){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(r=a.getCoordinates(),s=Math.abs(t2(r[0],t)),u=1,d=r.length;u<d;++u)s-=Math.abs(t2(r[u],t));break}case"MultiPolygon":{for(r=a.getCoordinates(),u=0,d=r.length;u<d;++u)for(l=r[u],s+=Math.abs(t2(l[0],t)),h=1,g=l.length;h<g;++h)s-=Math.abs(t2(l[h],t));break}case"GeometryCollection":{const y=a.getGeometries();for(u=0,d=y.length;u<d;++u)s+=cP(y[u],e);break}default:throw new Error("Unsupported geometry type: "+n)}return s}function IH(a,e,t,i){i=i||N5;const n=io(a[1]),s=io(a[0]),r=e/i,l=Math.asin(Math.sin(n)*Math.cos(r)+Math.cos(n)*Math.sin(r)*Math.cos(t)),u=s+Math.atan2(Math.sin(t)*Math.sin(r)*Math.cos(n),Math.cos(r)-Math.sin(n)*Math.sin(l));return[Yd(u),Yd(l)]}const SH=[CH],AH=[wH];let PA=!0;function TH(a){PA=!1}function B5(a,e){if(e!==void 0){for(let t=0,i=a.length;t<i;++t)e[t]=a[t];e=e}else e=a.slice();return e}function dP(a,e){if(e!==void 0&&a!==e){for(let t=0,i=a.length;t<i;++t)e[t]=a[t];a=e}return a}function tw(a){uH(a.getCode(),a),Xm(a,a,B5)}function EH(a){a.forEach(tw)}function Wi(a){if(typeof a!="string")return a;const e=nx(a);if(e)return e;for(const t of AH){const i=t(a);if(i)return i}return null}function A1(a,e,t,i){a=Wi(a);let n;const s=a.getPointResolutionFunc();if(s){if(n=s(e,t),i&&i!==a.getUnits()){const r=a.getMetersPerUnit();r&&(n=n*r/Um[i])}}else{const r=a.getUnits();if(r=="degrees"&&!i||i=="degrees")n=e;else{const l=Fp(a,Wi("EPSG:4326"));if(!l&&r!=="degrees")n=e*a.getMetersPerUnit();else{let d=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];d=l(d,d,2);const h=ew(d.slice(0,2),d.slice(2,4)),g=ew(d.slice(4,6),d.slice(6,8));n=(h+g)/2}const u=i?Um[i]:a.getMetersPerUnit();u!==void 0&&(n/=u)}}return n}function GA(a){EH(a),a.forEach(function(e){a.forEach(function(t){e!==t&&Xm(e,t,B5)})})}function MH(a,e,t,i){a.forEach(function(n){e.forEach(function(s){Xm(n,s,t),Xm(s,n,i)})})}function D5(a,e){return a?typeof a=="string"?Wi(a):a:Wi(e)}function WA(a){return(function(e,t,i,n){const s=e.length;i=i!==void 0?i:2,n=n??i,t=t!==void 0?t:new Array(s);for(let r=0;r<s;r+=n){const l=a(e.slice(r,r+i)),u=l.length;for(let d=0,h=n;d<h;++d)t[r+d]=d>=u?e[r+d]:l[d]}return t})}function LH(a,e,t,i){const n=Wi(a),s=Wi(e);Xm(n,s,WA(t)),Xm(s,n,WA(i))}function bc(a,e){const t=fr(a,e!==void 0?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Gd(i+180,360)-180),t}function Od(a,e){if(a===e)return!0;const t=a.getUnits()===e.getUnits();return(a.getCode()===e.getCode()||Fp(a,e)===B5)&&t}function Fp(a,e){const t=a.getCode(),i=e.getCode();let n=rx(t,i);if(n)return n;let s=null,r=null;for(const u of SH)s||(s=u(a)),r||(r=u(e));if(!s&&!r)return null;const l="EPSG:4326";if(r)if(s)n=LS(s.inverse,r.forward);else{const u=rx(t,l);u&&(n=LS(u,r.forward))}else{const u=rx(l,i);u&&(n=LS(s.inverse,u))}return n&&(tw(a),tw(e),Xm(a,e,n)),n}function LS(a,e){return function(t,i,n,s){return i=a(t,i,n,s),e(i,i,n,s)}}function h_(a,e){const t=Wi(a),i=Wi(e);return Fp(t,i)}function fr(a,e,t){const i=h_(e,t);if(!i){const n=Wi(e).getCode(),s=Wi(t).getCode();throw new Error(`No transform available between ${n} and ${s}`)}return i(a,void 0,a.length)}function db(a,e,t,i){const n=h_(e,t);return JU(a,n,void 0,i)}let RH=null;function kH(){return RH}function qm(a,e){return a}function hr(a,e){return PA&&!Hs(a,[0,0])&&a[0]>=-180&&a[0]<=180&&a[1]>=-90&&a[1]<=90&&(PA=!1,J7("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),a}function OC(a,e){return a}function Zl(a,e){return a}function LL(a,e,t){return function(i){let n,s;if(a.canWrapX()){const r=a.getExtent(),l=Oi(r);i=i.slice(0),s=nP(i,a,l),s&&(i[0]=i[0]-s*l),i[0]=Dn(i[0],r[0],r[2]),i[1]=Dn(i[1],r[1],r[3]),n=t(i)}else n=t(i);return s&&e.canWrapX()&&(n[0]+=s*Oi(e.getExtent())),n}}function PH(){GA(CL),GA(SL),MH(SL,CL,rH,sH)}PH();const js={ADD:"add",REMOVE:"remove"},Ym={PROPERTYCHANGE:"propertychange"},Ka={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class FC{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function GH(a,e,t){let i,n;t=t||Tc;let s=0,r=a.length,l=!1;for(;s<r;)i=s+(r-s>>1),n=+t(a[i],e),n<0?s=i+1:(r=i,l=!n);return l?s:~s}function Tc(a,e){return a>e?1:a<e?-1:0}function WH(a,e){return a<e?1:a>e?-1:0}function NC(a,e,t){if(a[0]<=e)return 0;const i=a.length;if(e<=a[i-1])return i-1;if(typeof t=="function"){for(let n=1;n<i;++n){const s=a[n];if(s===e)return n;if(s<e)return t(e,a[n-1],s)>0?n-1:n}return i-1}if(t>0){for(let n=1;n<i;++n)if(a[n]<e)return n-1;return i-1}if(t<0){for(let n=1;n<i;++n)if(a[n]<=e)return n;return i-1}for(let n=1;n<i;++n){if(a[n]==e)return n;if(a[n]<e)return a[n-1]-e<e-a[n]?n-1:n}return i-1}function OH(a,e,t){for(;e<t;){const i=a[e];a[e]=a[t],a[t]=i,++e,--t}}function hn(a,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let n=0;n<i;n++)a[a.length]=t[n]}function ah(a,e){const t=a.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(a[i]!==e[i])return!1;return!0}function FH(a,e,t){const i=e||Tc;return a.every(function(n,s){if(s===0)return!0;const r=i(a[s-1],n);return!(r>0||r===0)})}function wp(){return!0}function Np(){return!1}function T1(){}function hP(a){let e,t,i;return function(){const n=Array.prototype.slice.call(arguments);return(!t||this!==i||!ah(n,t))&&(i=this,t=n,e=a.apply(this,arguments)),e}}function _P(a){function e(){let t;try{t=a()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}class oo{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class hb extends FC{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),n=i[e]||(i[e]=[]);n.includes(t)||n.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const s=t?new oo(e):e;s.target||(s.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});i in r||(r[i]=0,l[i]=0),++r[i];let u;for(let d=0,h=n.length;d<h;++d)if("handleEvent"in n[d]?u=n[d].handleEvent(s):u=n[d].call(this,s),u===!1||s.propagationStopped){u=!1;break}if(--r[i]===0){let d=l[i];for(delete l[i];d--;)this.removeEventListener(i,T1);delete r[i]}return u}disposeInternal(){this.listeners_&&cb(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const n=i.indexOf(t);n!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[n]=T1,++this.pendingRemovals_[e]):(i.splice(n,1),i.length===0&&delete this.listeners_[e]))}}function xa(a,e,t,i,n){if(n){const r=t;t=function(l){return a.removeEventListener(e,t),r.call(i??this,l)}}else i&&i!==a&&(t=t.bind(i));const s={target:a,type:e,listener:t};return a.addEventListener(e,t),s}function aw(a,e,t,i){return xa(a,e,t,i,!0)}function mn(a){a&&a.target&&(a.target.removeEventListener(a.type,a.listener),cb(a))}class _b extends hb{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ka.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=xa(this,e[s],t);return n}return xa(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const n=e.length;i=new Array(n);for(let s=0;s<n;++s)i[s]=aw(this,e[s],t)}else i=aw(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)yl(i);else if(Array.isArray(e))for(let n=0,s=e.length;n<s;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)}}_b.prototype.on;_b.prototype.once;_b.prototype.un;function yl(a){if(Array.isArray(a))for(let e=0,t=a.length;e<t;++e)mn(a[e]);else mn(a)}function Da(){throw new Error("Unimplemented abstract method.")}let NH=0;function ei(a){return a.ol_uid||(a.ol_uid=String(++NH))}const bMe="10.7.0";class RL extends oo{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class eu extends _b{constructor(e){super(),this.on,this.once,this.un,ei(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new RL(i,e,t)),i=Ym.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new RL(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const n=this.values_||(this.values_={});if(i)n[e]=t;else{const s=n[e];n[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Hm(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const kL={LENGTH:"length"};class a2 extends oo{constructor(e,t,i){super(e),this.element=t,this.index=i}}class to extends eu{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let i=1,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,n=t.length;i<n;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(kL.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new a2(js.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,n=t.length;i<n;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new a2(js.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const n=this.array_[e];this.array_[e]=t,this.dispatchEvent(new a2(js.REMOVE,n,e)),this.dispatchEvent(new a2(js.ADD,t,e))}updateLength_(){this.set(kL.LENGTH,this.array_.length)}assertUnique_(e,t){const i=this.array_;for(let n=0,s=i.length;n<s;++n)if(i[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}class Eg extends oo{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class mc extends Eg{constructor(e,t,i,n,s,r){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0?n:!1,this.activePointers=r}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Bi={SINGLECLICK:"singleclick",CLICK:Ka.CLICK,DBLCLICK:Ka.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Km=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",BH=Km.includes("safari")&&!Km.includes("chrom");BH&&(Km.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Km));const DH=Km.includes("webkit")&&!Km.includes("edge"),V5=Km.includes("macintosh"),mP=typeof devicePixelRatio<"u"?devicePixelRatio:1,wl=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Z5=typeof Image<"u"&&Image.prototype.decode,fP=typeof createImageBitmap=="function",gP=(function(){let a=!1;try{const e=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return a})(),E1={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTEROUT:"pointerout"};class VH extends hb{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=xa(i,E1.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=xa(i,E1.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ka.TOUCHMOVE,this.boundHandleTouchMove_,gP?{passive:!1}:!1)}emulateClick_(e){let t=new mc(Bi.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new mc(Bi.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new mc(Bi.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Bi.POINTERUP||t.type==Bi.POINTERCANCEL){delete this.trackedTouches_[i];for(const n in this.trackedTouches_)if(this.trackedTouches_[n].target!==t.target){delete this.trackedTouches_[n];break}}else(t.type==Bi.POINTERDOWN||t.type==Bi.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new mc(Bi.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(mn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new mc(Bi.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(xa(i,Bi.POINTERMOVE,this.handlePointerMove_,this),xa(i,Bi.POINTERUP,this.handlePointerUp_,this),xa(this.element_,Bi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(xa(this.element_.getRootNode(),Bi.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new mc(Bi.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new mc(Bi.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(mn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ka.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(mn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(mn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Cd={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},fs={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Na={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function _n(a,e){if(!a)throw new Error(e)}const iw=1/0;class ZH{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,cb(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(e){_n(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=iw?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,n=t.length,s=t[e],r=i[e],l=e;for(;e<n>>1;){const u=this.getLeftChildIndex_(e),d=this.getRightChildIndex_(e),h=d<n&&i[d]<i[u]?d:u;t[e]=t[h],i[e]=i[h],e=h}t[e]=s,i[e]=r,this.siftDown_(l,e)}siftDown_(e,t){const i=this.elements_,n=this.priorities_,s=i[t],r=n[t];for(;t>e;){const l=this.getParentIndex_(t);if(n[l]>r)i[t]=i[l],n[t]=n[l],t=l;else break}i[t]=s,n[t]=r}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let n=0;const s=t.length;let r,l,u;for(l=0;l<s;++l)r=t[l],u=e(r),u==iw?delete this.queuedElements_[this.keyFunction_(r)]:(i[n]=u,t[n++]=r);t.length=n,i.length=n,this.heapify_()}}class zH extends ZH{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ka.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===Na.LOADED||i===Na.ERROR||i===Na.EMPTY){i!==Na.ERROR&&t.removeEventListener(Ka.CHANGE,this.boundHandleTileChange_);const n=t.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const n=this.dequeue()[0],s=n.getKey();n.getState()===Na.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,n.load())}}}function UH(a,e,t,i,n){if(!a||!(t in a.wantedTiles)||!a.wantedTiles[t][e.getKey()])return iw;const s=a.viewState.center,r=i[0]-s[0],l=i[1]-s[1];return 65536*Math.log(n)+Math.sqrt(r*r+l*l)/n}const Kn={ANIMATING:0,INTERACTING:1},du={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function PL(a,e,t){return(function(i,n,s,r,l){if(!i)return;if(!n&&!e)return i;const u=e?0:s[0]*n,d=e?0:s[1]*n,h=l?l[0]:0,g=l?l[1]:0;let y=a[0]+u/2+h,x=a[2]-u/2+h,C=a[1]+d/2+g,I=a[3]-d/2+g;y>x&&(y=(x+y)/2,x=y),C>I&&(C=(I+C)/2,I=C);let A=Dn(i[0],y,x),E=Dn(i[1],C,I);if(r&&t&&n){const L=30*n;A+=-L*Math.log(1+Math.max(0,y-i[0])/L)+L*Math.log(1+Math.max(0,i[0]-x)/L),E+=-L*Math.log(1+Math.max(0,C-i[1])/L)+L*Math.log(1+Math.max(0,i[1]-I)/L)}return[A,E]})}function HH(a){return a}function pP(a){return Math.pow(a,3)}function Bp(a){return 1-pP(1-a)}function XH(a){return 3*a*a-2*a*a*a}function qH(a){return a}const yP=new Array(6);function Jo(){return[1,0,0,1,0,0]}function GL(a){return U5(a,1,0,0,1,0,0)}function z5(a,e){const t=a[0],i=a[1],n=a[2],s=a[3],r=a[4],l=a[5],u=e[0],d=e[1],h=e[2],g=e[3],y=e[4],x=e[5];return a[0]=t*u+n*d,a[1]=i*u+s*d,a[2]=t*h+n*g,a[3]=i*h+s*g,a[4]=t*y+n*x+r,a[5]=i*y+s*x+l,a}function U5(a,e,t,i,n,s,r){return a[0]=e,a[1]=t,a[2]=i,a[3]=n,a[4]=s,a[5]=r,a}function YH(a,e){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4],a[5]=e[5],a}function Gr(a,e){const t=e[0],i=e[1];return e[0]=a[0]*t+a[2]*i+a[4],e[1]=a[1]*t+a[3]*i+a[5],e}function sx(a,e,t){return z5(a,U5(yP,e,0,0,t,0,0))}function KH(a,e,t){return z5(a,U5(yP,1,0,0,1,e,t))}function ku(a,e,t,i,n,s,r,l){const u=Math.sin(s),d=Math.cos(s);return a[0]=i*d,a[1]=n*u,a[2]=-i*u,a[3]=n*d,a[4]=r*i*d-l*i*u+e,a[5]=r*n*u+l*n*d+t,a}function bP(a,e){const t=jH(e);_n(t!==0,"Transformation matrix cannot be inverted");const i=e[0],n=e[1],s=e[2],r=e[3],l=e[4],u=e[5];return a[0]=r/t,a[1]=-n/t,a[2]=-s/t,a[3]=i/t,a[4]=(s*u-r*l)/t,a[5]=-(i*u-n*l)/t,a}function jH(a){return a[0]*a[3]-a[1]*a[2]}const $H=[1e5,1e5,1e5,1e5,2,2];function JH(a){return"matrix("+a.join(", ")+")"}function OA(a){return a.substring(7,a.length-1).split(",").map(parseFloat)}function QH(a,e){const t=OA(a),i=OA(e);for(let n=0;n<6;++n)if(Math.round((t[n]-i[n])*$H[n])!==0)return!1;return!0}function Fd(a,e,t,i,n,s,r){s=s||[],r=r||2;let l=0;for(let u=e;u<t;u+=i){const d=a[u],h=a[u+1];s[l++]=n[0]*d+n[2]*h+n[4],s[l++]=n[1]*d+n[3]*h+n[5];for(let g=2;g<r;g++)s[l++]=a[u+g]}return s&&s.length!=l&&(s.length=l),s}function H5(a,e,t,i,n,s,r){r=r||[];const l=Math.cos(n),u=Math.sin(n),d=s[0],h=s[1];let g=0;for(let y=e;y<t;y+=i){const x=a[y]-d,C=a[y+1]-h;r[g++]=d+x*l-C*u,r[g++]=h+x*u+C*l;for(let I=y+2;I<y+i;++I)r[g++]=a[I]}return r&&r.length!=g&&(r.length=g),r}function eX(a,e,t,i,n,s,r,l){l=l||[];const u=r[0],d=r[1];let h=0;for(let g=e;g<t;g+=i){const y=a[g]-u,x=a[g+1]-d;l[h++]=u+n*y,l[h++]=d+s*x;for(let C=g+2;C<g+i;++C)l[h++]=a[C]}return l&&l.length!=h&&(l.length=h),l}function tX(a,e,t,i,n,s,r){r=r||[];let l=0;for(let u=e;u<t;u+=i){r[l++]=a[u]+n,r[l++]=a[u+1]+s;for(let d=u+2;d<u+i;++d)r[l++]=a[d]}return r&&r.length!=l&&(r.length=l),r}const WL=Jo(),aX=[NaN,NaN];class vP extends eu{constructor(){super(),this.extent_=Qo(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=hP((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Da()}closestPointXY(e,t,i,n){return Da()}containsXY(e,t){return this.closestPointXY(e,t,aX,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Da()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Wp(t),this.extentRevision_=this.getRevision()}return jU(this.extent_,e)}rotate(e,t){Da()}scale(e,t,i){Da()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Da()}getType(){return Da()}applyTransform(e){Da()}intersectsExtent(e){return Da()}translate(e,t){Da()}transform(e,t){const i=Wi(e),n=i.getUnits()=="tile-pixels"?function(s,r,l){const u=i.getExtent(),d=i.getWorldExtent(),h=Fr(d)/Fr(u);ku(WL,d[0],d[3],h,-h,0,0,0);const g=Fd(s,0,s.length,l,WL,r),y=h_(i,t);return y?y(g,g,l):g}:h_(i,t);return this.applyTransform(n),this}}class x_ extends vP{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return k5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Da()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=nw(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Da()}setLayout(e,t,i){let n;if(e)n=nw(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}n=t.length,e=uf(n)}this.layout=e,this.stride=n}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const n=this.getStride();H5(i,0,i.length,n,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Ru(this.getExtent()));const n=this.getFlatCoordinates();if(n){const s=this.getStride();eX(n,0,n.length,s,e,t,i,n),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const n=this.getStride();tX(i,0,i.length,n,e,t,i),this.changed()}}}function uf(a){let e;return a==2?e="XY":a==3?e="XYZ":a==4&&(e="XYZM"),e}function nw(a){let e;return a=="XY"?e=2:a=="XYZ"||a=="XYM"?e=3:a=="XYZM"&&(e=4),e}function iX(a,e,t){const i=a.getFlatCoordinates();if(!i)return null;const n=a.getStride();return Fd(i,0,i.length,n,e,t)}function xP(a,e,t,i){let n=0;const s=a[t-i],r=a[t-i+1];let l=0,u=0;for(;e<t;e+=i){const d=a[e]-s,h=a[e+1]-r;n+=u*d-l*h,l=d,u=h}return n/2}function wP(a,e,t,i){let n=0;for(let s=0,r=t.length;s<r;++s){const l=t[s];n+=xP(a,e,l,i),e=l}return n}function nX(a,e,t,i){let n=0;for(let s=0,r=t.length;s<r;++s){const l=t[s];n+=wP(a,e,l,i),e=l[l.length-1]}return n}function OL(a,e,t,i,n,s,r){const l=a[e],u=a[e+1],d=a[t]-l,h=a[t+1]-u;let g;if(d===0&&h===0)g=e;else{const y=((n-l)*d+(s-u)*h)/(d*d+h*h);if(y>1)g=t;else if(y>0){for(let x=0;x<i;++x)r[x]=gl(a[e+x],a[t+x],y);r.length=i;return}else g=e}for(let y=0;y<i;++y)r[y]=a[g+y];r.length=i}function X5(a,e,t,i,n){let s=a[e],r=a[e+1];for(e+=i;e<t;e+=i){const l=a[e],u=a[e+1],d=Pd(s,r,l,u);d>n&&(n=d),s=l,r=u}return n}function q5(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){const l=t[s];n=X5(a,e,l,i,n),e=l}return n}function rX(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){const l=t[s];n=q5(a,e,l,i,n),e=l[l.length-1]}return n}function Y5(a,e,t,i,n,s,r,l,u,d,h){if(e==t)return d;let g,y;if(n===0){if(y=Pd(r,l,a[e],a[e+1]),y<d){for(g=0;g<i;++g)u[g]=a[e+g];return u.length=i,y}return d}h=h||[NaN,NaN];let x=e+i;for(;x<t;)if(OL(a,x-i,x,i,r,l,h),y=Pd(r,l,h[0],h[1]),y<d){for(d=y,g=0;g<i;++g)u[g]=h[g];u.length=i,x+=i}else x+=i*Math.max((Math.sqrt(y)-Math.sqrt(d))/n|0,1);if(s&&(OL(a,t-i,e,i,r,l,h),y=Pd(r,l,h[0],h[1]),y<d)){for(d=y,g=0;g<i;++g)u[g]=h[g];u.length=i}return d}function K5(a,e,t,i,n,s,r,l,u,d,h){h=h||[NaN,NaN];for(let g=0,y=t.length;g<y;++g){const x=t[g];d=Y5(a,e,x,i,n,s,r,l,u,d,h),e=x}return d}function sX(a,e,t,i,n,s,r,l,u,d,h){h=h||[NaN,NaN];for(let g=0,y=t.length;g<y;++g){const x=t[g];d=K5(a,e,x,i,n,s,r,l,u,d,h),e=x[x.length-1]}return d}function CP(a,e,t,i){for(let n=0,s=t.length;n<s;++n)a[e++]=t[n];return e}function BC(a,e,t,i){for(let n=0,s=t.length;n<s;++n){const r=t[n];for(let l=0;l<i;++l)a[e++]=r[l]}return e}function mb(a,e,t,i,n){n=n||[];let s=0;for(let r=0,l=t.length;r<l;++r){const u=BC(a,e,t[r],i);n[s++]=u,e=u}return n.length=s,n}function IP(a,e,t,i,n){n=n||[];let s=0;for(let r=0,l=t.length;r<l;++r){const u=mb(a,e,t[r],i,n[s]);u.length===0&&(u[0]=e),n[s++]=u,e=u[u.length-1]}return n.length=s,n}function Kh(a,e,t,i,n){n=n!==void 0?n:[];let s=0;for(let r=e;r<t;r+=i)n[s++]=a.slice(r,r+i);return n.length=s,n}function M1(a,e,t,i,n){n=n!==void 0?n:[];let s=0;for(let r=0,l=t.length;r<l;++r){const u=t[r];n[s++]=Kh(a,e,u,i,n[s]),e=u}return n.length=s,n}function FA(a,e,t,i,n){n=n!==void 0?n:[];let s=0;for(let r=0,l=t.length;r<l;++r){const u=t[r];n[s++]=u.length===1&&u[0]===e?[]:M1(a,e,u,i,n[s]),e=u[u.length-1]}return n.length=s,n}function DC(a,e,t,i,n,s,r){const l=(t-e)/i;if(l<3){for(;e<t;e+=i)s[r++]=a[e],s[r++]=a[e+1];return r}const u=new Array(l);u[0]=1,u[l-1]=1;const d=[e,t-i];let h=0;for(;d.length>0;){const g=d.pop(),y=d.pop();let x=0;const C=a[y],I=a[y+1],A=a[g],E=a[g+1];for(let L=y+i;L<g;L+=i){const G=a[L],F=a[L+1],B=QU(G,F,C,I,A,E);B>x&&(h=L,x=B)}x>n&&(u[(h-e)/i]=1,y+i<h&&d.push(y,h),h+i<g&&d.push(h,g))}for(let g=0;g<l;++g)u[g]&&(s[r++]=a[e+g*i],s[r++]=a[e+g*i+1]);return r}function SP(a,e,t,i,n,s,r,l){for(let u=0,d=t.length;u<d;++u){const h=t[u];r=DC(a,e,h,i,n,s,r),l.push(r),e=h}return r}function bm(a,e){return e*Math.round(a/e)}function oX(a,e,t,i,n,s,r){if(e==t)return r;let l=bm(a[e],n),u=bm(a[e+1],n);e+=i,s[r++]=l,s[r++]=u;let d,h;do if(d=bm(a[e],n),h=bm(a[e+1],n),e+=i,e==t)return s[r++]=d,s[r++]=h,r;while(d==l&&h==u);for(;e<t;){const g=bm(a[e],n),y=bm(a[e+1],n);if(e+=i,g==d&&y==h)continue;const x=d-l,C=h-u,I=g-l,A=y-u;if(x*A==C*I&&(x<0&&I<x||x==I||x>0&&I>x)&&(C<0&&A<C||C==A||C>0&&A>C)){d=g,h=y;continue}s[r++]=d,s[r++]=h,l=d,u=h,d=g,h=y}return s[r++]=d,s[r++]=h,r}function j5(a,e,t,i,n,s,r,l){for(let u=0,d=t.length;u<d;++u){const h=t[u];r=oX(a,e,h,i,n,s,r),l.push(r),e=h}return r}function lX(a,e,t,i,n,s,r,l){for(let u=0,d=t.length;u<d;++u){const h=t[u],g=[];r=j5(a,e,h,i,n,s,r,g),l.push(g),e=h[h.length-1]}return r}class L1 extends x_{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new L1(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,n){return n<of(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(X5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Y5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,n))}getArea(){return xP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Kh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=DC(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new L1(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=BC(this.flatCoordinates,0,e,this.stride),this.changed()}}let Ln=class AP extends x_{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new AP(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){const s=this.flatCoordinates,r=Pd(e,t,s[0],s[1]);if(r<n){const l=this.stride;for(let u=0;u<l;++u)i[u]=s[u];return i.length=l,r}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return ep(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return R5(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=CP(this.flatCoordinates,0,e,this.stride),this.changed()}};function uX(a,e,t,i,n){return!P5(n,function(r){return!Tm(a,e,t,i,r[0],r[1])})}function Tm(a,e,t,i,n,s){let r=0,l=a[t-i],u=a[t-i+1];for(;e<t;e+=i){const d=a[e],h=a[e+1];u<=s?h>s&&(d-l)*(s-u)-(n-l)*(h-u)>0&&r++:h<=s&&(d-l)*(s-u)-(n-l)*(h-u)<0&&r--,l=d,u=h}return r!==0}function $5(a,e,t,i,n,s){if(t.length===0||!Tm(a,e,t[0],i,n,s))return!1;for(let r=1,l=t.length;r<l;++r)if(Tm(a,t[r-1],t[r],i,n,s))return!1;return!0}function cX(a,e,t,i,n,s){if(t.length===0)return!1;for(let r=0,l=t.length;r<l;++r){const u=t[r];if($5(a,e,u,i,n,s))return!0;e=u[u.length-1]}return!1}function J5(a,e,t,i,n,s,r){let l,u,d,h,g,y,x;const C=n[s+1],I=[];for(let L=0,G=t.length;L<G;++L){const F=t[L];for(h=a[F-i],y=a[F-i+1],l=e;l<F;l+=i)g=a[l],x=a[l+1],(C<=y&&x<=C||y<=C&&C<=x)&&(d=(C-y)/(x-y)*(g-h)+h,I.push(d)),h=g,y=x}let A=NaN,E=-1/0;for(I.sort(Tc),h=I[0],l=1,u=I.length;l<u;++l){g=I[l];const L=Math.abs(g-h);L>E&&(d=(h+g)/2,$5(a,e,t,i,d,C)&&(A=d,E=L)),h=g}return isNaN(A)&&(A=n[s]),r?(r.push(A,C,E),r):[A,C,E]}function TP(a,e,t,i,n){let s=[];for(let r=0,l=t.length;r<l;++r){const u=t[r];s=J5(a,e,u,i,n,2*r,s),e=u[u.length-1]}return s}function EP(a,e,t,i,n){let s;for(e+=i;e<t;e+=i)if(s=n(a.slice(e-i,e),a.slice(e,e+i)),s)return s;return!1}function VC(a,e,t,i,n,s){return s=s??eP(Qo(),a,e,t,i),Or(n,s)?s[0]>=n[0]&&s[2]<=n[2]||s[1]>=n[1]&&s[3]<=n[3]?!0:EP(a,e,t,i,function(r,l){return $U(n,r,l)}):!1}function dX(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){if(VC(a,e,t[s],i,n))return!0;e=t[s]}return!1}function MP(a,e,t,i,n){return!!(VC(a,e,t,i,n)||Tm(a,e,t,i,n[0],n[1])||Tm(a,e,t,i,n[0],n[3])||Tm(a,e,t,i,n[2],n[1])||Tm(a,e,t,i,n[2],n[3]))}function LP(a,e,t,i,n){if(!MP(a,e,t[0],i,n))return!1;if(t.length===1)return!0;for(let s=1,r=t.length;s<r;++s)if(uX(a,t[s-1],t[s],i,n)&&!VC(a,t[s-1],t[s],i,n))return!1;return!0}function hX(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){const l=t[s];if(LP(a,e,l,i,n))return!0;e=l[l.length-1]}return!1}function _X(a,e,t,i){for(;e<t-i;){for(let n=0;n<i;++n){const s=a[e+n];a[e+n]=a[t-i+n],a[t-i+n]=s}e+=i,t-=i}}function Q5(a,e,t,i){let n=0,s=a[t-i],r=a[t-i+1];for(;e<t;e+=i){const l=a[e],u=a[e+1];n+=(l-s)*(u+r),s=l,r=u}return n===0?void 0:n>0}function eT(a,e,t,i,n){n=n!==void 0?n:!1;for(let s=0,r=t.length;s<r;++s){const l=t[s],u=Q5(a,e,l,i);if(s===0){if(n&&u||!n&&!u)return!1}else if(n&&!u||!n&&u)return!1;e=l}return!0}function RP(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){const l=t[s];if(!eT(a,e,l,i,n))return!1;l.length&&(e=l[l.length-1])}return!0}function rw(a,e,t,i,n){n=n!==void 0?n:!1;for(let s=0,r=t.length;s<r;++s){const l=t[s],u=Q5(a,e,l,i);(s===0?n&&u||!n&&!u:n&&!u||!n&&u)&&_X(a,e,l,i),e=l}return e}function NA(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s)e=rw(a,e,t[s],i,n);return e}function mX(a,e){const t=[];let i=0,n=0,s;for(let r=0,l=e.length;r<l;++r){const u=e[r],d=Q5(a,i,u,2);if(s===void 0&&(s=d),d===s)t.push(e.slice(n,r+1));else{if(t.length===0)continue;t[t.length-1].push(e[n])}n=r+1,i=u}return t}class Gs extends x_{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?hn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Gs(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<of(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(q5(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),K5(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,n))}containsXY(e,t){return $5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return wP(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),rw(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,M1(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Ru(this.getExtent());this.flatInteriorPoint_=J5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ln(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new L1(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,n=[];let s=0;for(let r=0,l=i.length;r<l;++r){const u=i[r],d=new L1(t.slice(s,u),e);n.push(d),s=u}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;eT(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=rw(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=j5(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Gs(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return LP(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=mb(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function fX(a,e,t,i){t=t||32;const n=[];for(let s=0;s<t;++s)hn(n,IH(a,e,2*Math.PI*s/t,i));return n.push(n[0],n[1]),new Gs(n,"XY",[n.length])}function BA(a){if(lf(a))throw new Error("Cannot create polygon from empty extent");const e=a[0],t=a[1],i=a[2],n=a[3],s=[e,t,e,n,i,n,i,t,e,t];return new Gs(s,"XY",[s.length])}function kP(a,e,t){e=e||32;const i=a.getStride(),n=a.getLayout(),s=a.getCenter(),r=i*(e+1),l=new Array(r);for(let h=0;h<r;h+=i){l[h]=0,l[h+1]=0;for(let g=2;g<i;g++)l[h+g]=s[g]}const u=[l.length],d=new Gs(l,n,u);return gX(d,s,a.getRadius()),d}function gX(a,e,t,i){const n=a.getFlatCoordinates(),s=a.getStride(),r=n.length/s-1,l=0;for(let u=0;u<=r;++u){const d=u*s,h=l+Gd(u,r)*2*Math.PI/r;n[d]=e[0]+t*Math.cos(h),n[d+1]=e[1]+t*Math.sin(h)}a.changed()}function tT(a,e,t,i){const n=Oi(e)/t[0],s=Fr(e)/t[1];return i?Math.min(a,Math.max(n,s)):Math.min(a,Math.min(n,s))}function aT(a,e,t){let i=Math.min(a,e);const n=50;return i*=Math.log(1+n*Math.max(0,a/e-1))/n+1,t&&(i=Math.max(i,t),i/=Math.log(1+n*Math.max(0,t/a-1))/n+1),Dn(i,t/2,e*2)}function pX(a,e,t,i){return e=e!==void 0?e:!0,(function(n,s,r,l){if(n!==void 0){const u=a[0],d=a[a.length-1],h=t?tT(u,t,r,i):u;if(l)return e?aT(n,h,d):Dn(n,d,h);const g=Math.min(h,n),y=Math.floor(NC(a,g,s));return a[y]>h&&y<a.length-1?a[y+1]:a[y]}})}function yX(a,e,t,i,n,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,(function(r,l,u,d){if(r!==void 0){const h=n?tT(e,n,u,s):e;if(d)return i?aT(r,h,t):Dn(r,t,h);const g=1e-9,y=Math.ceil(Math.log(e/h)/Math.log(a)-g),x=-l*(.5-g)+.5,C=Math.min(h,r),I=Math.floor(Math.log(e/C)/Math.log(a)+x),A=Math.max(y,I),E=e/Math.pow(a,A);return Dn(E,t,h)}})}function FL(a,e,t,i,n){return t=t!==void 0?t:!0,(function(s,r,l,u){if(s!==void 0){const d=i?tT(a,i,l,n):a;return!t||!u?Dn(s,e,d):aT(s,d,e)}})}function iT(a){if(a!==void 0)return 0}function NL(a){if(a!==void 0)return a}function bX(a){const e=2*Math.PI/a;return(function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function vX(a){const e=io(5);return(function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t})}const xX=42,nT=256,RS=0;class gc extends eu{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=D5(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&TH(),e.center&&(e.center=hr(e.center,this.projection_)),e.extent&&(e.extent=Zl(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const l in du)delete t[l];this.setProperties(t,!0);const i=CX(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const n=wX(e),s=i.constraint,r=IX(e);this.constraints_={center:n,resolution:s,rotation:r},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const n=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),r=s/2*(n[3]-t[3]+t[1]-n[1]),l=s/2*(n[0]-t[0]+t[2]-n[2]);this.setCenterInternal([i[0]+r,i[1]-l])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let n=arguments[i];n.center&&(n=Object.assign({},n),n.center=hr(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=hr(n.anchor,this.getProjection())),t[i]=n}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let n=0;for(;n<t&&!this.isDef();++n){const h=arguments[n];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(n===t){i&&i2(i,!0);return}let s=Date.now(),r=this.targetCenter_.slice(),l=this.targetResolution_,u=this.targetRotation_;const d=[];for(;n<t;++n){const h=arguments[n],g={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||XH,callback:i};if(h.center&&(g.sourceCenter=r,g.targetCenter=h.center.slice(),r=g.targetCenter),h.zoom!==void 0?(g.sourceResolution=l,g.targetResolution=this.getResolutionForZoom(h.zoom),l=g.targetResolution):h.resolution&&(g.sourceResolution=l,g.targetResolution=h.resolution,l=g.targetResolution),h.rotation!==void 0){g.sourceRotation=u;const y=Gd(h.rotation-u+Math.PI,2*Math.PI)-Math.PI;g.targetRotation=u+y,u=g.targetRotation}SX(g)?g.complete=!0:s+=g.duration,d.push(g)}this.animations_.push(d),this.setHint(Kn.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Kn.ANIMATING]>0}getInteracting(){return this.hints_[Kn.INTERACTING]>0}cancelAnimations(){this.setHint(Kn.ANIMATING,-this.hints_[Kn.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const n=this.animations_[t];if(n[0].callback&&i2(n[0].callback,!1),!e)for(let s=0,r=n.length;s<r;++s){const l=n[s];if(!l.complete){e=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let s=!0;for(let r=0,l=n.length;r<l;++r){const u=n[r];if(u.complete)continue;const d=e-u.start;let h=u.duration>0?d/u.duration:1;h>=1?(u.complete=!0,h=1):s=!1;const g=u.easing(h);if(u.sourceCenter){const y=u.sourceCenter[0],x=u.sourceCenter[1],C=u.targetCenter[0],I=u.targetCenter[1];this.nextCenter_=u.targetCenter;const A=y+g*(C-y),E=x+g*(I-x);this.targetCenter_=[A,E]}if(u.sourceResolution&&u.targetResolution){const y=g===1?u.targetResolution:u.sourceResolution+g*(u.targetResolution-u.sourceResolution);if(u.anchor){const x=this.getViewportSize_(this.getRotation()),C=this.constraints_.resolution(y,0,x,!0);this.targetCenter_=this.calculateCenterZoom(C,u.anchor)}this.nextResolution_=u.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(u.sourceRotation!==void 0&&u.targetRotation!==void 0){const y=g===1?Gd(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+g*(u.targetRotation-u.sourceRotation);if(u.anchor){const x=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(x,u.anchor)}this.nextRotation_=u.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),t=!0,!u.complete)break}if(s){this.animations_[i]=null,this.setHint(Kn.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const r=n[0].callback;r&&i2(r,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const n=this.getCenterInternal();return n!==void 0&&(i=[n[0]-t[0],n[1]-t[1]],W5(i,e-this.getRotation()),tH(i,t)),i}calculateCenterZoom(e,t){let i;const n=this.getCenterInternal(),s=this.getResolution();if(n!==void 0&&s!==void 0){const r=t[0]-e*(t[0]-n[0])/s,l=t[1]-e*(t[1]-n[1])/s;i=[r,l]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],n=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(n*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(n*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&qm(e,this.getProjection())}getCenterInternal(){return this.get(du.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return OC(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();_n(t,"The view center is not defined");const i=this.getResolution();_n(i!==void 0,"The view resolution is not defined");const n=this.getRotation();return _n(n!==void 0,"The view rotation is not defined"),S1(t,i,n,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(du.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Zl(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=Oi(e)/t[0],n=Fr(e)/t[1];return Math.max(i,n)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(t/i)/Math.log(e);return(function(s){return t/Math.pow(e,s*n)})}getRotation(){return this.get(du.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/t;return(function(r){return Math.log(i/r)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const r=this.getViewportSizeMinusPadding_();n=kS(n,this.getViewportSize_(),[r[0]/2+s[3],r[1]/2+s[0]],t,i)}return{center:n.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,n;if(this.resolutions_){const s=NC(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?n=2:n=i/this.resolutions_[s+1]}else i=this.maxResolution_,n=this.zoomFactor_;return t+Math.log(i/e)/Math.log(n)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Dn(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Dn(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(_n(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){_n(!lf(e),"Cannot fit empty extent provided as `geometry`");const n=Zl(e,this.getProjection());i=BA(n)}else if(e.getType()==="Circle"){const n=Zl(e.getExtent(),this.getProjection());i=BA(n),i.rotate(this.getRotation(),Ru(n))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),n=Math.sin(-t),s=e.getFlatCoordinates(),r=e.getStride();let l=1/0,u=1/0,d=-1/0,h=-1/0;for(let g=0,y=s.length;g<y;g+=r){const x=s[g]*i-s[g+1]*n,C=s[g]*n+s[g+1]*i;l=Math.min(l,x),u=Math.min(u,C),d=Math.max(d,x),h=Math.max(h,C)}return[l,u,d,h]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const n=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let r;t.minResolution!==void 0?r=t.minResolution:t.maxZoom!==void 0?r=this.getResolutionForZoom(t.maxZoom):r=0;const l=this.rotatedExtentForGeometry(e);let u=this.getResolutionForExtentInternal(l,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);u=isNaN(u)?r:Math.max(u,r),u=this.getConstrainedResolution(u,s?0:1);const d=this.getRotation(),h=Math.sin(d),g=Math.cos(d),y=Ru(l);y[0]+=(n[1]-n[3])/2*u,y[1]+=(n[0]-n[2])/2*u;const x=y[0]*g-y[1]*h,C=y[1]*g+y[0]*h,I=this.getConstrainedCenter([x,C],u),A=t.callback?t.callback:T1;t.duration!==void 0?this.animateInternal({resolution:u,center:I,duration:t.duration,easing:t.easing},A):(this.targetResolution_=u,this.targetCenter_=I,this.applyTargetState_(!1,!0),i2(A,!0))}centerOn(e,t,i){this.centerOnInternal(hr(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(kS(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,n){let s;const r=this.padding_;if(r&&e){const l=this.getViewportSizeMinusPadding_(-i),u=kS(e,n,[l[0]/2+r[3],l[1]/2+r[0]],t,i);s=[e[0]-u[0],e[1]-u[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=qm(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&hr(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,n,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=hr(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(n,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&hr(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,s,i),l=this.constraints_.center(this.targetCenter_,r,s,i,this.calculateCenterShift(this.targetCenter_,r,n,s));this.get(du.ROTATION)!==n&&this.set(du.ROTATION,n),this.get(du.RESOLUTION)!==r&&(this.set(du.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(du.CENTER)||!Hs(this.get(du.CENTER),l))&&this.set(du.CENTER,l),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const n=t||0,s=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(s),l=this.constraints_.resolution(this.targetResolution_,n,r),u=this.constraints_.center(this.targetCenter_,l,r,!1,this.calculateCenterShift(this.targetCenter_,l,s,r));if(e===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=s,this.targetCenter_=u,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==s||!this.getCenterInternal()||!Hs(this.getCenterInternal(),u))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:u,resolution:l,duration:e,easing:Bp,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Kn.INTERACTING,1)}endInteraction(e,t,i){i=i&&hr(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(Kn.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function i2(a,e){setTimeout(function(){a(e)},0)}function wX(a){if(a.extent!==void 0){const t=a.smoothExtentConstraint!==void 0?a.smoothExtentConstraint:!0;return PL(a.extent,a.constrainOnlyCenter,t)}const e=D5(a.projection,"EPSG:3857");if(a.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,PL(t,!1,!1)}return HH}function CX(a){let e,t,i,r=a.minZoom!==void 0?a.minZoom:RS,l=a.maxZoom!==void 0?a.maxZoom:28;const u=a.zoomFactor!==void 0?a.zoomFactor:2,d=a.multiWorld!==void 0?a.multiWorld:!1,h=a.smoothResolutionConstraint!==void 0?a.smoothResolutionConstraint:!0,g=a.showFullExtent!==void 0?a.showFullExtent:!1,y=D5(a.projection,"EPSG:3857"),x=y.getExtent();let C=a.constrainOnlyCenter,I=a.extent;if(!d&&!I&&y.isGlobal()&&(C=!1,I=x),a.resolutions!==void 0){const A=a.resolutions;t=A[r],i=A[l]!==void 0?A[l]:A[A.length-1],a.constrainResolution?e=pX(A,h,!C&&I,g):e=FL(t,i,h,!C&&I,g)}else{const E=(x?Math.max(Oi(x),Fr(x)):360*Um.degrees/y.getMetersPerUnit())/nT/Math.pow(2,RS),L=E/Math.pow(2,28-RS);t=a.maxResolution,t!==void 0?r=0:t=E/Math.pow(u,r),i=a.minResolution,i===void 0&&(a.maxZoom!==void 0?a.maxResolution!==void 0?i=t/Math.pow(u,l):i=E/Math.pow(u,l):i=L),l=r+Math.floor(Math.log(t/i)/Math.log(u)),i=t/Math.pow(u,l-r),a.constrainResolution?e=yX(u,t,i,h,!C&&I,g):e=FL(t,i,h,!C&&I,g)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:r,zoomFactor:u}}function IX(a){if(a.enableRotation!==void 0?a.enableRotation:!0){const t=a.constrainRotation;return t===void 0||t===!0?vX():t===!1?NL:typeof t=="number"?bX(t):NL}return iT}function SX(a){return!(a.sourceCenter&&a.targetCenter&&!Hs(a.sourceCenter,a.targetCenter)||a.sourceResolution!==a.targetResolution||a.sourceRotation!==a.targetRotation)}function kS(a,e,t,i,n){const s=Math.cos(-n);let r=Math.sin(-n),l=a[0]*s-a[1]*r,u=a[1]*s+a[0]*r;l+=(e[0]/2-t[0])*i,u+=(t[1]-e[1]/2)*i,r=-r;const d=l*s-u*r,h=u*s+l*r;return[d,h]}const n2="ol-hidden",AX="ol-selectable",Bc="ol-unselectable",BL="ol-unsupported",w_="ol-control",DL="ol-collapsed",TX=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),VL=["style","variant","weight","size","lineHeight","family"],DA={normal:400,bold:700},sw=function(a){const e=a.match(TX);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,n=VL.length;i<n;++i){const s=e[i+1];s!==void 0&&(t[VL[i]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in DA&&(t.weight=DA[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function Jr(a,e,t,i){let n;return t&&t.length?n=t.shift():wl?n=new class extends OffscreenCanvas{style={}}(a??300,e??150):n=document.createElement("canvas"),a&&(n.width=a),e&&(n.height=e),n.getContext("2d",i)}let PS;function ow(){return PS||(PS=Jr(1,1)),PS}function ZC(a){const e=a.canvas;e.width=1,e.height=1,a.clearRect(0,0,1,1)}function EX(a){let e=a.offsetWidth;const t=getComputedStyle(a);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function MX(a){let e=a.offsetHeight;const t=getComputedStyle(a);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function lw(a,e){const t=e.parentNode;t&&t.replaceChild(a,e)}function PP(a){for(;a.lastChild;)a.lastChild.remove()}function LX(a,e){const t=a.childNodes;for(let i=0;;++i){const n=t[i],s=e[i];if(!n&&!s)break;if(n!==s){if(!n){a.appendChild(s);continue}if(!s){a.removeChild(n),--i;continue}a.insertBefore(s,n)}}}function GP(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const i=this.childNodes.indexOf(t);if(i===-1)throw new Error("Reference node not found");return this.childNodes.splice(i,0,e),e},style:{}},{get(e,t,i){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,i)}})}function jh(a){return typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas}class ih extends eu{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)mn(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==T1&&this.listenerKeys.push(xa(e,Cd.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class RX extends ih{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",n=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",r=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=r):this.collapseLabel_=s;const l=e.label!==void 0?e.label:"i";typeof l=="string"?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=n):this.label_=l;const u=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(u),this.toggleButton_.addEventListener(Ka.CLICK,this.handleClick_.bind(this),!1);const d=t+" "+Bc+" "+w_+(this.collapsed_&&this.collapsible_?" "+DL:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=d,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(n=>n.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(n=>i.add(n)):i.add(this.attributions_)),!this.overrideCollapsible_){const n=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(n)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(n=>_P(()=>n))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!ah(t,this.renderedAttributions_)){PP(this.ulElement_);for(let n=0,s=t.length;n<s;++n){const r=document.createElement("li");r.innerHTML=t[n],this.ulElement_.appendChild(r)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(DL),this.collapsed_?lw(this.collapseLabel_,this.label_):lw(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class WP extends ih{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",n=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const s=e.tipLabel?e.tipLabel:"Reset rotation",r=document.createElement("button");r.className=t+"-reset",r.setAttribute("type","button"),r.title=s,r.appendChild(this.label_),r.addEventListener(Ka.CLICK,this.handleClick_.bind(this),!1);const l=t+" "+Bc+" "+w_,u=this.element;u.className=l,u.appendChild(r),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(n2)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Bp}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const n="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(n2);!s&&i===0?this.element.classList.add(n2):s&&i!==0&&this.element.classList.remove(n2)}this.label_.style.transform=n}this.rotation_=i}}class OP extends ih{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,n=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",r=e.zoomInLabel!==void 0?e.zoomInLabel:"+",l=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",u=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",d=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=n,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof r=="string"?document.createTextNode(r):r),h.addEventListener(Ka.CLICK,this.handleClick_.bind(this,i),!1);const g=document.createElement("button");g.className=s,g.setAttribute("type","button"),g.title=d,g.appendChild(typeof l=="string"?document.createTextNode(l):l),g.addEventListener(Ka.CLICK,this.handleClick_.bind(this,-i),!1);const y=t+" "+Bc+" "+w_,x=this.element;x.className=y,x.appendChild(h),x.appendChild(g),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const n=i.getZoom();if(n!==void 0){const s=i.getConstrainedZoom(n+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:Bp})):i.setZoom(s)}}}function kX(a){a=a||{};const e=new to;return(a.zoom===void 0||a.zoom)&&e.push(new OP(a.zoomOptions)),(a.rotate===void 0||a.rotate)&&e.push(new WP(a.rotateOptions)),(a.attribution===void 0||a.attribution)&&e.push(new RX(a.attributionOptions)),e}class PX{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const n=this.points_[t+2]-this.points_[i+2];if(n<1e3/60)return!1;const s=this.points_[t]-this.points_[i],r=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(r,s),this.initialVelocity_=Math.sqrt(s*s+r*r)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const VA={ACTIVE:"active"};class fb extends eu{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(VA.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(VA.ACTIVE,e)}setMap(e){this.map_=e}}function GX(a,e,t){const i=a.getCenterInternal();if(i){const n=[i[0]+e[0],i[1]+e[1]];a.animateInternal({duration:t!==void 0?t:250,easing:qH,center:a.getConstrainedCenter(n)})}}function rT(a,e,t,i){const n=a.getZoom();if(n===void 0)return;const s=a.getConstrainedZoom(n+e),r=a.getResolutionForZoom(s);a.getAnimating()&&a.cancelAnimations(),a.animate({resolution:r,anchor:t,duration:i!==void 0?i:250,easing:Bp})}class WX extends fb{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Bi.DBLCLICK){const i=e.originalEvent,n=e.map,s=e.coordinate,r=i.shiftKey?-this.delta_:this.delta_,l=n.getView();rT(l,r,s,this.duration_),i.preventDefault(),t=!0}return!t}}function ZA(a){const e=arguments;return function(t){let i=!0;for(let n=0,s=e.length;n<s&&(i=i&&e[n](t),!!i);++n);return i}}const OX=function(a){const e=a.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},FX=function(a){const e=a.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},NX=function(a){const e=a.map.getTargetElement(),t=e.getRootNode(),i=a.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},FP=function(a){const e=a.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?NX(a):!0},ap=wp,NP=function(a){const e=a.originalEvent;return"pointerId"in e&&e.button==0&&!(DH&&V5&&e.ctrlKey)},BP=Np,DP=function(a){return a.type==Bi.SINGLECLICK},zC=function(a){const e=a.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},BX=function(a){const e=a.originalEvent;return!e.altKey&&(V5?e.metaKey:e.ctrlKey)&&!e.shiftKey},DX=function(a){const e=a.originalEvent;return V5?e.metaKey:e.ctrlKey},zA=function(a){const e=a.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},VP=function(a){const e=a.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},GS=function(a){const e=a.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},ZP=function(a){const e=a.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class Dc extends fb{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Bi.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Bi.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Bi.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Bi.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function sT(a){const e=a.length;let t=0,i=0;for(let n=0;n<e;n++)t+=a[n].clientX,i+=a[n].clientY;return{clientX:t/e,clientY:i/e}}class VX extends Dc{constructor(e){super({stopDown:Np}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:ZA(zC,ZP);this.condition_=e.onFocusOnly?ZA(FP,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,n=t.getEventPixel(sT(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const s=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],l=e.map.getView();aH(s,l.getResolution()),W5(s,l.getRotation()),l.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const n=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),r=i.getCenterInternal(),l=t.getPixelFromCoordinateInternal(r),u=t.getCoordinateFromPixelInternal([l[0]-n*Math.cos(s),l[1]-n*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(u),duration:500,easing:Bp})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class UA extends Dc{constructor(e){e=e||{},super({stopDown:Np}),this.condition_=e.condition?e.condition:FX,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!GS(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===iT)return;const n=t.getSize(),s=e.pixel,r=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;i.adjustRotationInternal(-l)}this.lastAngle_=r}handleUpEvent(e){return GS(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return GS(e)&&NP(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class ZX extends FC{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(e[0],t[0])+i,n.top=Math.min(e[1],t[1])+i,n.width=Math.abs(t[0]-e[0])+i,n.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,n=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Gs([n])}getGeometry(){return this.geometry_}}const mg={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class i0 extends oo{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class zX extends Dc{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new ZX(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??NP,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const n=i[0]-t[0],s=i[1]-t[1];return n*n+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new i0(mg.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new i0(t?mg.BOXEND:mg.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new i0(mg.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new i0(mg.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new i0(mg.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class UX extends zX{constructor(e){e=e||{};const t=e.condition?e.condition:zA;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let n=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(n),r=i.getResolutionForExtentInternal(s),l=i.getResolution()/r;n=n.clone(),n.scale(l*l)}i.fitInternal(n,{duration:this.duration_,easing:Bp})}}const dm={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class HX extends fb{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return zC(t)&&VP(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ka.KEYDOWN){const i=e.originalEvent,n=i.key;if(this.condition_(e)&&(n==dm.DOWN||n==dm.LEFT||n==dm.RIGHT||n==dm.UP)){const r=e.map.getView(),l=r.getResolution()*this.pixelDelta_;let u=0,d=0;n==dm.DOWN?d=-l:n==dm.LEFT?u=-l:n==dm.RIGHT?u=l:d=l;const h=[u,d];W5(h,r.getRotation()),GX(r,h,this.duration_),i.preventDefault(),t=!0}}return!t}}class XX extends fb{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!DX(t)&&VP(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ka.KEYDOWN||e.type==Ka.KEYPRESS){const i=e.originalEvent,n=i.key;if(this.condition_(e)&&(n==="+"||n==="-")){const s=e.map,r=n==="+"?this.delta_:-this.delta_,l=s.getView();rT(l,r,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const qX=40,YX=300;class KX extends fb{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:ap;this.condition_=e.onFocusOnly?ZA(FP,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ka.WHEEL)return!0;const i=e.map,n=e.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=n.deltaY;switch(n.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=qX;break;case WheelEvent.DOM_DELTA_PAGE:s*=YX;break}if(s===0)return!1;this.lastDelta_=s;const r=Date.now();this.startTime_===void 0&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const l=i.getView();if(this.mode_==="trackpad"&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=r,!1;this.totalDelta_+=s;const u=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),u),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Dn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),rT(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class jX extends Dc{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Np),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(this.lastAngle_!==void 0){const u=s-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=u}this.lastAngle_=s;const r=e.map,l=r.getView();l.getConstraints().rotation!==iT&&(this.anchor_=r.getCoordinateFromPixelInternal(r.getEventPixel(sT(this.targetPointers))),this.rotating_&&(r.render(),l.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class $X extends Dc{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Np),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],n=this.targetPointers[1],s=i.clientX-n.clientX,r=i.clientY-n.clientY,l=Math.sqrt(s*s+r*r);this.lastDistance_!==void 0&&(t=this.lastDistance_/l),this.lastDistance_=l;const u=e.map,d=u.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=u.getCoordinateFromPixelInternal(u.getEventPixel(sT(this.targetPointers))),u.render(),d.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),n=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function JX(a){a=a||{};const e=new to,t=new PX(-.005,.05,100);return(a.altShiftDragRotate===void 0||a.altShiftDragRotate)&&e.push(new UA),(a.doubleClickZoom===void 0||a.doubleClickZoom)&&e.push(new WX({delta:a.zoomDelta,duration:a.zoomDuration})),(a.dragPan===void 0||a.dragPan)&&e.push(new VX({onFocusOnly:a.onFocusOnly,kinetic:t})),(a.pinchRotate===void 0||a.pinchRotate)&&e.push(new jX),(a.pinchZoom===void 0||a.pinchZoom)&&e.push(new $X({duration:a.zoomDuration})),(a.keyboard===void 0||a.keyboard)&&(e.push(new HX),e.push(new XX({delta:a.zoomDelta,duration:a.zoomDuration}))),(a.mouseWheelZoom===void 0||a.mouseWheelZoom)&&e.push(new KX({onFocusOnly:a.onFocusOnly,duration:a.zoomDuration})),(a.shiftDragZoom===void 0||a.shiftDragZoom)&&e.push(new UX({duration:a.zoomDuration})),e}const An={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class zP extends eu{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[An.OPACITY]=e.opacity!==void 0?e.opacity:1,_n(typeof t[An.OPACITY]=="number","Layer opacity must be a number"),t[An.VISIBLE]=e.visible!==void 0?e.visible:!0,t[An.Z_INDEX]=e.zIndex,t[An.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[An.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[An.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[An.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Dn(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Da()}getLayerStatesArray(e){return Da()}getExtent(){return this.get(An.EXTENT)}getMaxResolution(){return this.get(An.MAX_RESOLUTION)}getMinResolution(){return this.get(An.MIN_RESOLUTION)}getMinZoom(){return this.get(An.MIN_ZOOM)}getMaxZoom(){return this.get(An.MAX_ZOOM)}getOpacity(){return this.get(An.OPACITY)}getSourceState(){return Da()}getVisible(){return this.get(An.VISIBLE)}getZIndex(){return this.get(An.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(An.EXTENT,e)}setMaxResolution(e){this.set(An.MAX_RESOLUTION,e)}setMinResolution(e){this.set(An.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(An.MAX_ZOOM,e)}setMinZoom(e){this.set(An.MIN_ZOOM,e)}setOpacity(e){_n(typeof e=="number","Layer opacity must be a number"),this.set(An.OPACITY,e)}setVisible(e){this.set(An.VISIBLE,e)}setZIndex(e){this.set(An.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Mh={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class Vh extends oo{constructor(e,t){super(e),this.layer=t}}const WS={LAYERS:"layers"};class C_ extends zP{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(WS.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new to(i.slice(),{unique:!0}):_n(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new to(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(mn),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(xa(e,js.ADD,this.handleLayersAdd_,this),xa(e,js.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(mn);cb(this.listenerKeys_);const t=e.getArray();for(let i=0,n=t.length;i<n;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new Vh(Mh.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const t=[xa(e,Ym.PROPERTYCHANGE,this.handleLayerChange_,this),xa(e,Ka.CHANGE,this.handleLayerChange_,this)];e instanceof C_&&t.push(xa(e,Mh.ADDLAYER,this.handleLayerGroupAdd_,this),xa(e,Mh.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[ei(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Vh(Mh.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Vh(Mh.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Vh(Mh.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=ei(t);this.listenerKeys_[i].forEach(mn),delete this.listenerKeys_[i],this.dispatchEvent(new Vh(Mh.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(WS.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let n=0,s=i.length;n<s;++n)this.dispatchEvent(new Vh(Mh.REMOVELAYER,i[n]))}this.set(WS.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(r){r.getLayerStatesArray(t)});const n=this.getLayerState();let s=n.zIndex;!e&&n.zIndex===void 0&&(s=0);for(let r=i,l=t.length;r<l;r++){const u=t[r];u.opacity*=n.opacity,u.visible=u.visible&&n.visible,u.maxResolution=Math.min(u.maxResolution,n.maxResolution),u.minResolution=Math.max(u.minResolution,n.minResolution),u.minZoom=Math.max(u.minZoom,n.minZoom),u.maxZoom=Math.min(u.maxZoom,n.maxZoom),n.extent!==void 0&&(u.extent!==void 0?u.extent=Ac(u.extent,n.extent):u.extent=n.extent),u.zIndex===void 0&&(u.zIndex=s)}return t}getSourceState(){return"ready"}}const Ko={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class cf extends zP{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(An.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(An.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(mn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=xa(e,Ka.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof gc?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let n;if(t.layerStatesArray){if(n=t.layerStatesArray.find(r=>r.layer===this),!n)return!1}else n=this.getLayerState();const s=this.getExtent();return oT(n,t.viewState)&&(!s||Or(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const i=e instanceof gc?e.getViewStateAndExtent():e;let n=t(i);return Array.isArray(n)||(n=[n]),n}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(An.MAP,e)}getMapInternal(){return this.get(An.MAP)}setMap(e){this.mapPrecomposeKey_&&(mn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(mn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=xa(e,Ko.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=xa(this,Ka.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);_n(!t.some(n=>n.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(An.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function oT(a,e){if(!a.visible)return!1;const t=e.resolution;if(t<a.minResolution||t>=a.maxResolution)return!1;const i=e.zoom;return i>a.minZoom&&i<=a.maxZoom}function UP(a,e,t=0,i=a.length-1,n=QX){for(;i>t;){if(i-t>600){const u=i-t+1,d=e-t+1,h=Math.log(u),g=.5*Math.exp(2*h/3),y=.5*Math.sqrt(h*g*(u-g)/u)*(d-u/2<0?-1:1),x=Math.max(t,Math.floor(e-d*g/u+y)),C=Math.min(i,Math.floor(e+(u-d)*g/u+y));UP(a,e,x,C,n)}const s=a[e];let r=t,l=i;for(n0(a,t,e),n(a[i],s)>0&&n0(a,t,i);r<l;){for(n0(a,r,l),r++,l--;n(a[r],s)<0;)r++;for(;n(a[l],s)>0;)l--}n(a[t],s)===0?n0(a,t,l):(l++,n0(a,l,i)),l<=e&&(t=l+1),e<=l&&(i=l-1)}}function n0(a,e,t){const i=a[e];a[e]=a[t],a[t]=i}function QX(a,e){return a<e?-1:a>e?1:0}let HP=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!s2(e,t))return i;const n=this.toBBox,s=[];for(;t;){for(let r=0;r<t.children.length;r++){const l=t.children[r],u=t.leaf?n(l):l;s2(e,u)&&(t.leaf?i.push(l):FS(e,u)?this._all(l,i):s.push(l))}t=s.pop()}return i}collides(e){let t=this.data;if(!s2(e,t))return!1;const i=[];for(;t;){for(let n=0;n<t.children.length;n++){const s=t.children[n],r=t.leaf?this.toBBox(s):s;if(s2(e,r)){if(t.leaf||FS(e,r))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Mg([]),this}remove(e,t){if(!e)return this;let i=this.data;const n=this.toBBox(e),s=[],r=[];let l,u,d;for(;i||s.length;){if(i||(i=s.pop(),u=s[s.length-1],l=r.pop(),d=!0),i.leaf){const h=eq(e,i.children,t);if(h!==-1)return i.children.splice(h,1),s.push(i),this._condense(s),this}!d&&!i.leaf&&FS(i,n)?(s.push(i),r.push(l),l=0,u=i,i=i.children[0]):u?(l++,i=u.children[l],d=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,n){const s=i-t+1;let r=this._maxEntries,l;if(s<=r)return l=Mg(e.slice(t,i+1)),fg(l,this.toBBox),l;n||(n=Math.ceil(Math.log(s)/Math.log(r)),r=Math.ceil(s/Math.pow(r,n-1))),l=Mg([]),l.leaf=!1,l.height=n;const u=Math.ceil(s/r),d=u*Math.ceil(Math.sqrt(r));ZL(e,t,i,d,this.compareMinX);for(let h=t;h<=i;h+=d){const g=Math.min(h+d-1,i);ZL(e,h,g,u,this.compareMinY);for(let y=h;y<=g;y+=u){const x=Math.min(y+u-1,g);l.children.push(this._build(e,y,x,n-1))}}return fg(l,this.toBBox),l}_chooseSubtree(e,t,i,n){for(;n.push(t),!(t.leaf||n.length-1===i);){let s=1/0,r=1/0,l;for(let u=0;u<t.children.length;u++){const d=t.children[u],h=OS(d),g=iq(e,d)-h;g<r?(r=g,s=h<s?h:s,l=d):g===r&&h<s&&(s=h,l=d)}t=l||t.children[0]}return t}_insert(e,t,i){const n=i?e:this.toBBox(e),s=[],r=this._chooseSubtree(n,this.data,t,s);for(r.children.push(e),b0(r,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)}_split(e,t){const i=e[t],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);const r=this._chooseSplitIndex(i,s,n),l=Mg(i.children.splice(r,i.children.length-r));l.height=i.height,l.leaf=i.leaf,fg(i,this.toBBox),fg(l,this.toBBox),t?e[t-1].children.push(l):this._splitRoot(i,l)}_splitRoot(e,t){this.data=Mg([e,t]),this.data.height=e.height+1,this.data.leaf=!1,fg(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let n,s=1/0,r=1/0;for(let l=t;l<=i-t;l++){const u=y0(e,0,l,this.toBBox),d=y0(e,l,i,this.toBBox),h=nq(u,d),g=OS(u)+OS(d);h<s?(s=h,n=l,r=g<r?g:r):h===s&&g<r&&(r=g,n=l)}return n||i-t}_chooseSplitAxis(e,t,i){const n=e.leaf?this.compareMinX:tq,s=e.leaf?this.compareMinY:aq,r=this._allDistMargin(e,t,i,n),l=this._allDistMargin(e,t,i,s);r<l&&e.children.sort(n)}_allDistMargin(e,t,i,n){e.children.sort(n);const s=this.toBBox,r=y0(e,0,t,s),l=y0(e,i-t,i,s);let u=r2(r)+r2(l);for(let d=t;d<i-t;d++){const h=e.children[d];b0(r,e.leaf?s(h):h),u+=r2(r)}for(let d=i-t-1;d>=t;d--){const h=e.children[d];b0(l,e.leaf?s(h):h),u+=r2(l)}return u}_adjustParentBBoxes(e,t,i){for(let n=i;n>=0;n--)b0(t[n],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():fg(e[t],this.toBBox)}};function eq(a,e,t){if(!t)return e.indexOf(a);for(let i=0;i<e.length;i++)if(t(a,e[i]))return i;return-1}function fg(a,e){y0(a,0,a.children.length,e,a)}function y0(a,e,t,i,n){n||(n=Mg(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let s=e;s<t;s++){const r=a.children[s];b0(n,a.leaf?i(r):r)}return n}function b0(a,e){return a.minX=Math.min(a.minX,e.minX),a.minY=Math.min(a.minY,e.minY),a.maxX=Math.max(a.maxX,e.maxX),a.maxY=Math.max(a.maxY,e.maxY),a}function tq(a,e){return a.minX-e.minX}function aq(a,e){return a.minY-e.minY}function OS(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function r2(a){return a.maxX-a.minX+(a.maxY-a.minY)}function iq(a,e){return(Math.max(e.maxX,a.maxX)-Math.min(e.minX,a.minX))*(Math.max(e.maxY,a.maxY)-Math.min(e.minY,a.minY))}function nq(a,e){const t=Math.max(a.minX,e.minX),i=Math.max(a.minY,e.minY),n=Math.min(a.maxX,e.maxX),s=Math.min(a.maxY,e.maxY);return Math.max(0,n-t)*Math.max(0,s-i)}function FS(a,e){return a.minX<=e.minX&&a.minY<=e.minY&&e.maxX<=a.maxX&&e.maxY<=a.maxY}function s2(a,e){return e.minX<=a.maxX&&e.minY<=a.maxY&&e.maxX>=a.minX&&e.maxY>=a.minY}function Mg(a){return{children:a,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ZL(a,e,t,i,n){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const r=e+Math.ceil((t-e)/i/2)*i;UP(a,r,e,t,n),s.push(e,r,r,t)}}const lT=[NaN,NaN,NaN,0];let NS;function rq(){return NS||(NS=Jr(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),NS}const sq=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,oq=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,lq=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,uq=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function o2(a,e){return a.endsWith("%")?Number(a.substring(0,a.length-1))/e:Number(a)}function Y0(a){throw new Error('failed to parse "'+a+'" as color')}function XP(a){if(a.toLowerCase().startsWith("rgb")){const s=a.match(oq)||a.match(sq)||a.match(lq);if(s){const r=s[4],l=100/255;return[Dn(o2(s[1],l)+.5|0,0,255),Dn(o2(s[2],l)+.5|0,0,255),Dn(o2(s[3],l)+.5|0,0,255),r!==void 0?Dn(o2(r,100),0,1):1]}Y0(a)}if(a.startsWith("#")){if(uq.test(a)){const s=a.substring(1),r=s.length<=4?1:2,l=[0,0,0,255];for(let u=0,d=s.length;u<d;u+=r){let h=parseInt(s.substring(u,u+r),16);r===1&&(h+=h<<4),l[u/r]=h}return l[3]=l[3]/255,l}Y0(a)}const e=rq();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=a,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=a,e.fillStyle===t&&Y0(a));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return XP(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const n=Array.from(e.getImageData(0,0,1,1).data);return n[3]=Op(n[3]/255,3),n}function cq(a){return typeof a=="string"?a:cT(a)}const dq=1024,r0={};let BS=0;function hq(a){if(a.length===4)return a;const e=a.slice();return e[3]=1,e}function DS(a){return a>.0031308?Math.pow(a,1/2.4)*269.025-14.025:a*3294.6}function VS(a){return a>.2068965?Math.pow(a,3):(a-4/29)*(108/841)}function ZS(a){return a>10.314724?Math.pow((a+14.025)/269.025,2.4):a/3294.6}function zS(a){return a>.0088564?Math.pow(a,1/3):a/(108/841)+4/29}function zL(a){const e=ZS(a[0]),t=ZS(a[1]),i=ZS(a[2]),n=zS(e*.222488403+t*.716873169+i*.06060791),s=500*(zS(e*.452247074+t*.399439023+i*.148375274)-n),r=200*(n-zS(e*.016863605+t*.117638439+i*.865350722)),l=Math.atan2(r,s)*(180/Math.PI);return[116*n-16,Math.sqrt(s*s+r*r),l<0?l+360:l,a[3]]}function _q(a){const e=(a[0]+16)/116,t=a[1],i=a[2]*Math.PI/180,n=VS(e),s=VS(e+t/500*Math.cos(i)),r=VS(e-t/200*Math.sin(i)),l=DS(s*3.021973625-n*1.617392459-r*.404875592),u=DS(s*-.943766287+n*1.916279586+r*.027607165),d=DS(s*.069407491-n*.22898585+r*1.159737864);return[Dn(l+.5|0,0,255),Dn(u+.5|0,0,255),Dn(d+.5|0,0,255),a[3]]}function uT(a){if(a==="none")return lT;if(r0.hasOwnProperty(a))return r0[a];if(BS>=dq){let t=0;for(const i in r0)(t++&3)===0&&(delete r0[i],--BS)}const e=XP(a);e.length!==4&&Y0(a);for(const t of e)isNaN(t)&&Y0(a);return r0[a]=e,++BS,e}function ql(a){return Array.isArray(a)?a:uT(a)}function cT(a){let e=a[0];e!=(e|0)&&(e=e+.5|0);let t=a[1];t!=(t|0)&&(t=t+.5|0);let i=a[2];i!=(i|0)&&(i=i+.5|0);const n=a[3]===void 0?1:Math.round(a[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+n+")"}function UL(a){return a[0]>0&&a[1]>0}function mq(a,e,t){return t===void 0&&(t=[0,0]),t[0]=a[0]*e+.5|0,t[1]=a[1]*e+.5|0,t}function ao(a,e){return Array.isArray(a)?a:(e===void 0?e=[a,a]:(e[0]=a,e[1]=a),e)}let df=0;const vo=1<<df++,Ui=1<<df++,Zo=1<<df++,xu=1<<df++,jm=1<<df++,v0=1<<df++,l2=Math.pow(2,df)-1,dT={[vo]:"boolean",[Ui]:"number",[Zo]:"string",[xu]:"color",[jm]:"number[]",[v0]:"size"},fq=Object.keys(dT).map(Number).sort(Tc);function gq(a){return a in dT}function x0(a){const e=[];for(const t of fq)w0(a,t)&&e.push(dT[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function w0(a,e){return(a&e)===e}function Lh(a,e){return a===e}class rs{constructor(e,t){if(!gq(e))throw new Error(`literal expressions must have a specific type, got ${x0(e)}`);this.type=e,this.value=t}}class pq{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function qP(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function ks(a,e,t){switch(typeof a){case"boolean":{if(Lh(e,Zo))return new rs(Zo,a?"true":"false");if(!w0(e,vo))throw new Error(`got a boolean, but expected ${x0(e)}`);return new rs(vo,a)}case"number":{if(Lh(e,v0))return new rs(v0,ao(a));if(Lh(e,vo))return new rs(vo,!!a);if(Lh(e,Zo))return new rs(Zo,a.toString());if(!w0(e,Ui))throw new Error(`got a number, but expected ${x0(e)}`);return new rs(Ui,a)}case"string":{if(Lh(e,xu))return new rs(xu,uT(a));if(Lh(e,vo))return new rs(vo,!!a);if(!w0(e,Zo))throw new Error(`got a string, but expected ${x0(e)}`);return new rs(Zo,a)}}if(!Array.isArray(a))throw new Error("expression must be an array or a primitive value");if(a.length===0)throw new Error("empty expression");if(typeof a[0]=="string")return Eq(a,e,t);for(const i of a)if(typeof i!="number")throw new Error("expected an array of numbers");if(Lh(e,v0)){if(a.length!==2)throw new Error(`expected an array of two values for a size, got ${a.length}`);return new rs(v0,a)}if(Lh(e,xu)){if(a.length===3)return new rs(xu,[...a,1]);if(a.length===4)return new rs(xu,a);throw new Error(`expected an array of 3 or 4 values for a color, got ${a.length}`)}if(!w0(e,jm))throw new Error(`got an array of numbers, but expected ${x0(e)}`);return new rs(jm,a)}const It={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},yq={[It.Get]:ai(wi(1,1/0),HL),[It.Var]:ai(wi(1,1),bq),[It.Has]:ai(wi(1,1/0),HL),[It.Id]:ai(vq,gg),[It.Concat]:ai(wi(2,1/0),cn(Zo)),[It.GeometryType]:ai(xq,gg),[It.LineMetric]:ai(gg),[It.Resolution]:ai(US,gg),[It.Zoom]:ai(US,gg),[It.Time]:ai(US,gg),[It.Any]:ai(wi(2,1/0),cn(vo)),[It.All]:ai(wi(2,1/0),cn(vo)),[It.Not]:ai(wi(1,1),cn(vo)),[It.Equal]:ai(wi(2,2),cn(l2)),[It.NotEqual]:ai(wi(2,2),cn(l2)),[It.GreaterThan]:ai(wi(2,2),cn(Ui)),[It.GreaterThanOrEqualTo]:ai(wi(2,2),cn(Ui)),[It.LessThan]:ai(wi(2,2),cn(Ui)),[It.LessThanOrEqualTo]:ai(wi(2,2),cn(Ui)),[It.Multiply]:ai(wi(2,1/0),XL),[It.Coalesce]:ai(wi(2,1/0),XL),[It.Divide]:ai(wi(2,2),cn(Ui)),[It.Add]:ai(wi(2,1/0),cn(Ui)),[It.Subtract]:ai(wi(2,2),cn(Ui)),[It.Clamp]:ai(wi(3,3),cn(Ui)),[It.Mod]:ai(wi(2,2),cn(Ui)),[It.Pow]:ai(wi(2,2),cn(Ui)),[It.Abs]:ai(wi(1,1),cn(Ui)),[It.Floor]:ai(wi(1,1),cn(Ui)),[It.Ceil]:ai(wi(1,1),cn(Ui)),[It.Round]:ai(wi(1,1),cn(Ui)),[It.Sin]:ai(wi(1,1),cn(Ui)),[It.Cos]:ai(wi(1,1),cn(Ui)),[It.Atan]:ai(wi(1,2),cn(Ui)),[It.Sqrt]:ai(wi(1,1),cn(Ui)),[It.Match]:ai(wi(4,1/0),qL,Cq),[It.Between]:ai(wi(3,3),cn(Ui)),[It.Interpolate]:ai(wi(6,1/0),qL,Iq),[It.Case]:ai(wi(3,1/0),wq,Sq),[It.In]:ai(wi(2,2),Aq),[It.Number]:ai(wi(1,1/0),cn(l2)),[It.String]:ai(wi(1,1/0),cn(l2)),[It.Array]:ai(wi(1,1/0),cn(Ui)),[It.Color]:ai(wi(1,4),cn(Ui)),[It.Band]:ai(wi(1,3),cn(Ui)),[It.Palette]:ai(wi(2,2),Tq),[It.ToString]:ai(wi(1,1),cn(vo|Ui|Zo|xu))};function HL(a,e,t){const i=a.length-1,n=new Array(i);for(let s=0;s<i;++s){const r=a[s+1];switch(typeof r){case"number":{n[s]=new rs(Ui,r);break}case"string":{n[s]=new rs(Zo,r);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${r}`)}s===0&&t.properties.add(String(r))}return n}function bq(a,e,t){const i=a[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new rs(Zo,i)]}function vq(a,e,t){t.featureId=!0}function xq(a,e,t){t.geometryType=!0}function US(a,e,t){t.mapState=!0}function gg(a,e,t){const i=a[0];if(a.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function wi(a,e){return function(t,i,n){const s=t[0],r=t.length-1;if(a===e){if(r!==a){const l=a===1?"":"s";throw new Error(`expected ${a} argument${l} for ${s}, got ${r}`)}}else if(r<a||r>e){const l=e===1/0?`${a} or more`:`${a} to ${e}`;throw new Error(`expected ${l} arguments for ${s}, got ${r}`)}}}function XL(a,e,t){const i=a.length-1,n=new Array(i);for(let s=0;s<i;++s){const r=ks(a[s+1],e,t);n[s]=r}return n}function cn(a){return function(e,t,i){const n=e.length-1,s=new Array(n);for(let r=0;r<n;++r){const l=ks(e[r+1],a,i);s[r]=l}return s}}function wq(a,e,t){const i=a[0],n=a.length-1;if(n%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${n} instead`)}function qL(a,e,t){const i=a[0],n=a.length-1;if(n%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${n} instead`)}function Cq(a,e,t){const i=a.length-1,n=Zo|Ui|vo,s=ks(a[1],n,t),r=ks(a[a.length-1],e,t),l=new Array(i-2);for(let u=0;u<i-2;u+=2){try{const d=ks(a[u+2],s.type,t);l[u]=d}catch(d){throw new Error(`failed to parse argument ${u+1} of match expression: ${d.message}`)}try{const d=ks(a[u+3],r.type,t);l[u+1]=d}catch(d){throw new Error(`failed to parse argument ${u+2} of match expression: ${d.message}`)}}return[s,...l,r]}function Iq(a,e,t){const i=a[1];let n;switch(i[0]){case"linear":n=1;break;case"exponential":const u=i[1];if(typeof u!="number"||u<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(u)} instead`);n=u;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new rs(Ui,n);let r;try{r=ks(a[2],Ui,t)}catch(u){throw new Error(`failed to parse argument 1 in interpolate expression: ${u.message}`)}const l=new Array(a.length-3);for(let u=0;u<l.length;u+=2){try{const d=ks(a[u+3],Ui,t);l[u]=d}catch(d){throw new Error(`failed to parse argument ${u+2} for interpolate expression: ${d.message}`)}try{const d=ks(a[u+4],e,t);l[u+1]=d}catch(d){throw new Error(`failed to parse argument ${u+3} for interpolate expression: ${d.message}`)}}return[s,r,...l]}function Sq(a,e,t){const i=ks(a[a.length-1],e,t),n=new Array(a.length-1);for(let s=0;s<n.length-1;s+=2){try{const r=ks(a[s+1],vo,t);n[s]=r}catch(r){throw new Error(`failed to parse argument ${s} of case expression: ${r.message}`)}try{const r=ks(a[s+2],i.type,t);n[s+1]=r}catch(r){throw new Error(`failed to parse argument ${s+1} of case expression: ${r.message}`)}}return n[n.length-1]=i,n}function Aq(a,e,t){let i=a[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let n;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],n=Zo}else n=Ui;const s=new Array(i.length);for(let l=0;l<s.length;l++)try{const u=ks(i[l],n,t);s[l]=u}catch(u){throw new Error(`failed to parse haystack item ${l} for "in" expression: ${u.message}`)}return[ks(a[1],n,t),...s]}function Tq(a,e,t){let i;try{i=ks(a[1],Ui,t)}catch(r){throw new Error(`failed to parse first argument in palette expression: ${r.message}`)}const n=a[2];if(!Array.isArray(n))throw new Error("the second argument of palette must be an array");const s=new Array(n.length);for(let r=0;r<s.length;r++){let l;try{l=ks(n[r],xu,t)}catch(u){throw new Error(`failed to parse color at index ${r} in palette expression: ${u.message}`)}if(!(l instanceof rs))throw new Error(`the palette color at index ${r} must be a literal value`);s[r]=l}return[i,...s]}function ai(...a){return function(e,t,i){const n=e[0];let s;for(let r=0;r<a.length;r++){const l=a[r](e,t,i);if(r==a.length-1){if(!l)throw new Error("expected last argument validator to return the parsed args");s=l}}return new pq(t,n,...s)}}function Eq(a,e,t){const i=a[0],n=yq[i];if(!n)throw new Error(`unknown operator: ${i}`);return n(a,e,t)}function YP(a){if(!a)return"";const e=a.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return YP(a.getGeometries()[0]);default:return""}}function KP(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function nh(a,e,t){const i=ks(a,e,t);return Pu(i)}function Pu(a,e){if(a instanceof rs){if(a.type===xu&&typeof a.value=="string"){const i=uT(a.value);return function(){return i}}return function(){return a.value}}const t=a.operator;switch(t){case It.Number:case It.String:case It.Coalesce:return Mq(a);case It.Get:case It.Var:case It.Has:return Lq(a);case It.Id:return i=>i.featureId;case It.GeometryType:return i=>i.geometryType;case It.Concat:{const i=a.args.map(n=>Pu(n));return n=>"".concat(...i.map(s=>s(n).toString()))}case It.Resolution:return i=>i.resolution;case It.Any:case It.All:case It.Between:case It.In:case It.Not:return kq(a);case It.Equal:case It.NotEqual:case It.LessThan:case It.LessThanOrEqualTo:case It.GreaterThan:case It.GreaterThanOrEqualTo:return Rq(a);case It.Multiply:case It.Divide:case It.Add:case It.Subtract:case It.Clamp:case It.Mod:case It.Pow:case It.Abs:case It.Floor:case It.Ceil:case It.Round:case It.Sin:case It.Cos:case It.Atan:case It.Sqrt:return Pq(a);case It.Case:return Gq(a);case It.Match:return Wq(a);case It.Interpolate:return Oq(a);case It.ToString:return Fq(a);default:throw new Error(`Unsupported operator ${t}`)}}function Mq(a,e){const t=a.operator,i=a.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Pu(a.args[s]);switch(t){case It.Coalesce:return s=>{for(let r=0;r<i;++r){const l=n[r](s);if(typeof l<"u"&&l!==null)return l}throw new Error("Expected one of the values to be non-null")};case It.Number:case It.String:return s=>{for(let r=0;r<i;++r){const l=n[r](s);if(typeof l===t)return l}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Lq(a,e){const i=a.args[0].value;switch(a.operator){case It.Get:return n=>{const s=a.args;let r=n.properties[i];for(let l=1,u=s.length;l<u;++l){const h=s[l].value;r=r[h]}return r};case It.Var:return n=>n.variables[i];case It.Has:return n=>{const s=a.args;if(!(i in n.properties))return!1;let r=n.properties[i];for(let l=1,u=s.length;l<u;++l){const h=s[l].value;if(!r||!Object.hasOwn(r,h))return!1;r=r[h]}return!0};default:throw new Error(`Unsupported accessor operator ${a.operator}`)}}function Rq(a,e){const t=a.operator,i=Pu(a.args[0]),n=Pu(a.args[1]);switch(t){case It.Equal:return s=>i(s)===n(s);case It.NotEqual:return s=>i(s)!==n(s);case It.LessThan:return s=>i(s)<n(s);case It.LessThanOrEqualTo:return s=>i(s)<=n(s);case It.GreaterThan:return s=>i(s)>n(s);case It.GreaterThanOrEqualTo:return s=>i(s)>=n(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function kq(a,e){const t=a.operator,i=a.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Pu(a.args[s]);switch(t){case It.Any:return s=>{for(let r=0;r<i;++r)if(n[r](s))return!0;return!1};case It.All:return s=>{for(let r=0;r<i;++r)if(!n[r](s))return!1;return!0};case It.Between:return s=>{const r=n[0](s),l=n[1](s),u=n[2](s);return r>=l&&r<=u};case It.In:return s=>{const r=n[0](s);for(let l=1;l<i;++l)if(r===n[l](s))return!0;return!1};case It.Not:return s=>!n[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function Pq(a,e){const t=a.operator,i=a.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Pu(a.args[s]);switch(t){case It.Multiply:return s=>{let r=1;for(let l=0;l<i;++l)r*=n[l](s);return r};case It.Divide:return s=>n[0](s)/n[1](s);case It.Add:return s=>{let r=0;for(let l=0;l<i;++l)r+=n[l](s);return r};case It.Subtract:return s=>n[0](s)-n[1](s);case It.Clamp:return s=>{const r=n[0](s),l=n[1](s);if(r<l)return l;const u=n[2](s);return r>u?u:r};case It.Mod:return s=>n[0](s)%n[1](s);case It.Pow:return s=>Math.pow(n[0](s),n[1](s));case It.Abs:return s=>Math.abs(n[0](s));case It.Floor:return s=>Math.floor(n[0](s));case It.Ceil:return s=>Math.ceil(n[0](s));case It.Round:return s=>Math.round(n[0](s));case It.Sin:return s=>Math.sin(n[0](s));case It.Cos:return s=>Math.cos(n[0](s));case It.Atan:return i===2?s=>Math.atan2(n[0](s),n[1](s)):s=>Math.atan(n[0](s));case It.Sqrt:return s=>Math.sqrt(n[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Gq(a,e){const t=a.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=Pu(a.args[n]);return n=>{for(let s=0;s<t-1;s+=2)if(i[s](n))return i[s+1](n);return i[t-1](n)}}function Wq(a,e){const t=a.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=Pu(a.args[n]);return n=>{const s=i[0](n);for(let r=1;r<t-1;r+=2)if(s===i[r](n))return i[r+1](n);return i[t-1](n)}}function Oq(a,e){const t=a.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=Pu(a.args[n]);return n=>{const s=i[0](n),r=i[1](n);let l,u;for(let d=2;d<t;d+=2){const h=i[d](n);let g=i[d+1](n);const y=Array.isArray(g);if(y&&(g=hq(g)),h>=r)return d===2?g:y?Nq(s,r,l,u,h,g):C0(s,r,l,u,h,g);l=h,u=g}return u}}function Fq(a,e){const t=a.operator,i=a.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Pu(a.args[s]);switch(t){case It.ToString:return s=>{const r=n[0](s);return a.args[0].type===xu?cT(r):r.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function C0(a,e,t,i,n,s){const r=n-t;if(r===0)return i;const l=e-t,u=a===1?l/r:(Math.pow(a,l)-1)/(Math.pow(a,r)-1);return i+u*(s-i)}function Nq(a,e,t,i,n,s){if(n-t===0)return i;const l=zL(i),u=zL(s);let d=u[2]-l[2];d>180?d-=360:d<-180&&(d+=360);const h=[C0(a,e,t,l[0],n,u[0]),C0(a,e,t,l[1],n,u[1]),l[2]+C0(a,e,t,0,n,d),C0(a,e,t,i[3],n,s[3])];return _q(h)}const Ia={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class jP extends hb{constructor(e,t,i,n){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof n=="function"?Ia.IDLE:n,this.image_=null,this.loader=typeof n=="function"?n:null}changed(){this.dispatchEvent(Ka.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Ia.IDLE&&this.loader){this.state=Ia.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;_P(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||fP&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Ia.LOADED}).catch(i=>{this.state=Ia.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function Bq(a,e,t){const i=a;let n=!0,s=!1,r=!1;const l=[aw(i,Ka.LOAD,function(){r=!0,s||e()})];return i.src&&Z5?(s=!0,i.decode().then(function(){n&&e()}).catch(function(u){n&&(r?e():t())})):l.push(aw(i,Ka.ERROR,t)),function(){n=!1,l.forEach(mn)}}function Dq(a,e){return new Promise((t,i)=>{function n(){r(),t(a)}function s(){r(),i(new Error("Image load error"))}function r(){a.removeEventListener("load",n),a.removeEventListener("error",s)}a.addEventListener("load",n),a.addEventListener("error",s)})}function $P(a,e){return e&&(a.src=e),a.src&&Z5?new Promise((t,i)=>a.decode().then(()=>t(a)).catch(n=>a.complete&&a.width?t(a):i(n))):Dq(a)}function JP(a,e){return e&&(a.src=e),a.src&&Z5&&fP?a.decode().then(()=>createImageBitmap(a)).catch(t=>{if(a.complete&&a.width)return a;throw t}):$P(a)}class Vq{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const n=HS(e,t,i);return n in this.cache_?this.cache_[n]:null}getPattern(e,t,i){const n=HS(e,t,i);return n in this.patternCache_?this.patternCache_[n]:null}set(e,t,i,n,s){const r=HS(e,t,i),l=r in this.cache_;this.cache_[r]=n,s&&(n.getImageState()===Ia.IDLE&&n.load(),n.getImageState()===Ia.LOADING?n.ready().then(()=>{this.patternCache_[r]=ow().createPattern(n.getImage(1),"repeat")}):this.patternCache_[r]=ow().createPattern(n.getImage(1),"repeat")),l||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function HS(a,e,t){const i=t?ql(t):"null";return e+":"+a+":"+i}const zl=new Vq;let s0=null;class hT extends hb{constructor(e,t,i,n,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=n===void 0?Ia.IDLE:n,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ia.LOADED){s0||(s0=Jr(1,1,void 0,{willReadFrequently:!0})),s0.drawImage(this.image_,0,0);try{s0.getImageData(0,0,1,1),this.tainted_=!1}catch{s0=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ka.CHANGE)}handleImageError_(){this.imageState_=Ia.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ia.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Jr(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ia.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ia.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&$P(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Ia.LOADED)return;const t=this.image_,i=Jr(Math.ceil(t.width*e),Math.ceil(t.height*e)),n=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=cq(this.color_),i.fillRect(0,0,n.width/e,n.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=n}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Ia.LOADED||this.imageState_===Ia.ERROR)e();else{const t=()=>{(this.imageState_===Ia.LOADED||this.imageState_===Ia.ERROR)&&(this.removeEventListener(Ka.CHANGE,t),e())};this.addEventListener(Ka.CHANGE,t)}})),this.ready_}}function uw(a,e,t,i,n,s){let r=e===void 0?void 0:zl.get(e,t,n);return r||(r=new hT(a,a&&"src"in a?a.src||void 0:e,t,i,n),zl.set(e,t,n,r,s)),s&&r&&!zl.getPattern(e,t,n)&&zl.set(e,t,n,r,s),r}function vc(a){return a?Array.isArray(a)?cT(a):typeof a=="object"&&"src"in a?Zq(a):a:null}function Zq(a){if(!a.offset||!a.size)return zl.getPattern(a.src,"anonymous",a.color);const e=a.src+":"+a.offset,t=zl.getPattern(e,void 0,a.color);if(t)return t;const i=zl.get(a.src,"anonymous",null);if(i.getImageState()!==Ia.LOADED)return null;const n=Jr(a.size[0],a.size[1]);return n.drawImage(i.getImage(1),a.offset[0],a.offset[1],a.size[0],a.size[1],0,0,a.size[0],a.size[1]),uw(n.canvas,e,void 0,Ia.LOADED,a.color,!0),zl.getPattern(e,void 0,a.color)}const QP="10px sans-serif",zo="#000",Cp="round",Nd=[],Bd=0,Ip="round",R1=10,k1="#000",P1="center",cw="middle",Em=[0,0,0,0],G1=1,Lg=new eu;let o0=null,YL;const HA={},zq=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Uq(a,e,t){return`${a} ${e} 16px "${t}"`}const Hq=(function(){let e,t;async function i(s){await t.ready;const r=await t.load(s);if(r.length===0)return!1;const l=sw(s),u=l.families[0].toLowerCase(),d=l.weight;return r.some(h=>{const g=h.family.replace(/^['"]|['"]$/g,"").toLowerCase(),y=DA[h.weight]||h.weight;return g===u&&h.style===l.style&&y==d})}async function n(){await t.ready;let s=!0;const r=Lg.getProperties(),l=Object.keys(r).filter(u=>r[u]<100);for(let u=l.length-1;u>=0;--u){const d=l[u];let h=r[d];h<100&&(await i(d)?(cb(HA),Lg.set(d,100)):(h+=10,Lg.set(d,h,!0),h<100&&(s=!1)))}e=void 0,s||(e=setTimeout(n,100))}return async function(s){t||(t=wl?self.fonts:document.fonts);const r=sw(s);if(!r)return;const l=r.families;let u=!1;for(const d of l){if(zq.has(d))continue;const h=Uq(r.style,r.weight,d);Lg.get(h)===void 0&&(Lg.set(h,0,!0),u=!0)}u&&(clearTimeout(e),e=setTimeout(n,100))}})(),Xq=(function(){let a;return function(e){let t=HA[e];if(t==null){if(wl){const i=sw(e),n=eG(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else a||(a=document.createElement("div"),a.innerHTML="M",a.style.minHeight="0",a.style.maxHeight="none",a.style.height="auto",a.style.padding="0",a.style.border="none",a.style.position="absolute",a.style.display="block",a.style.left="-99999px"),a.style.font=e,document.body.appendChild(a),t=a.offsetHeight,document.body.removeChild(a);HA[e]=t}return t}})();function eG(a,e){return o0||(o0=Jr(1,1)),a!=YL&&(o0.font=a,YL=o0.font),o0.measureText(e)}function tG(a,e){return eG(a,e).width}function KL(a,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((n,s)=>Math.max(n,tG(a,s)),0);return t[e]=i,i}function qq(a,e){const t=[],i=[],n=[];let s=0,r=0,l=0,u=0;for(let d=0,h=e.length;d<=h;d+=2){const g=e[d];if(g===`
`||d===h){s=Math.max(s,r),n.push(r),r=0,l+=u,u=0;continue}const y=e[d+1]||a.font,x=tG(y,g);t.push(x),r+=x;const C=Xq(y);i.push(C),u=Math.max(u,C)}return{width:s,height:l,widths:t,heights:i,lineWidths:n}}function Yq(a,e,t,i,n,s,r,l,u,d,h){a.save(),t!==1&&(a.globalAlpha===void 0?a.globalAlpha=g=>g.globalAlpha*=t:a.globalAlpha*=t),e&&a.transform.apply(a,e),i.contextInstructions?(a.translate(u,d),a.scale(h[0],h[1]),Kq(i,a)):h[0]<0||h[1]<0?(a.translate(u,d),a.scale(h[0],h[1]),a.drawImage(i,n,s,r,l,0,0,r,l)):a.drawImage(i,n,s,r,l,u,d,r*h[0],l*h[1]),a.restore()}function Kq(a,e){const t=a.contextInstructions;for(let i=0,n=t.length;i<n;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class gb{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=ao(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new gb({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Da()}getImage(e){return Da()}getHitDetectionImage(){return Da()}getPixelRatio(e){return 1}getImageState(){return Da()}getImageSize(){return Da()}getOrigin(){return Da()}getSize(){return Da()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ao(e)}listenImageChange(e){Da()}load(){Da()}unlistenImageChange(e){Da()}ready(){return Promise.resolve()}}class bl extends gb{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ia.LOADING:Ia.LOADED,this.imageState_===Ia.LOADING&&this.ready().then(()=>this.imageState_=Ia.LOADED),this.render()}clone(){const e=this.getScale(),t=new bl({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let n=zl.get(i,null,null)?.getImage(1);if(!n){const s=this.renderOptions_,r=Math.ceil(s.size*e),l=Jr(r,r);this.draw_(s,l,e),n=l.canvas,zl.set(i,null,null,new hT(n,void 0,null,Ia.LOADED,null))}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let n=this.radius,s=this.radius2_===void 0?n:this.radius2_;if(n<s){const Z=n;n=s,s=Z}const r=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/r,u=s*Math.sin(l),d=Math.sqrt(s*s-u*u),h=n-d,g=Math.sqrt(u*u+h*h),y=g/u;if(e==="miter"&&y<=i)return y*t;const x=t/2/y,C=t/2*(h/g),A=Math.sqrt((n+x)*(n+x)+C*C)-n;if(this.radius2_===void 0||e==="bevel")return A*2;const E=n*Math.sin(l),L=Math.sqrt(n*n-E*E),G=s-L,B=Math.sqrt(E*E+G*G)/E;if(B<=i){const Z=B*t/2-s-n;return 2*Math.max(A,Z)}return A*2}createRenderOptions(){let e=Cp,t=Ip,i=0,n=null,s=0,r,l=0;this.stroke_&&(r=vc(this.stroke_.getColor()??k1),l=this.stroke_.getWidth()??G1,n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Ip,e=this.stroke_.getLineCap()??Cp,i=this.stroke_.getMiterLimit()??R1);const u=this.calculateLineJoinSize_(t,l,i),d=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*d+u);return{strokeStyle:r,strokeWidth:l,size:h,lineCap:e,lineDash:n,lineDashOffset:s,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let n=this.fill_.getColor();n===null&&(n=zo),t.fillStyle=vc(n),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),n=0;typeof i=="string"&&(i=ql(i)),i===null?n=1:Array.isArray(i)&&(n=i.length===4?i[3]:1),n===0&&(t=Jr(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const n=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,r=2*Math.PI/t;for(let l=0;l<t;l++){const u=s+l*r,d=l%2===0?i:n;e.lineTo(d*Math.cos(u),d*Math.sin(u))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=zo,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Qr extends bl{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Qr({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class ji{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new ji({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=uw(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Ia.IDLE&&t.load(),t.getImageState()===Ia.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?ei(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:ql(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function jL(a,e,t,i){return t!==void 0&&i!==void 0?[t/a,i/e]:t!==void 0?t/a:i!==void 0?i/e:1}class Gu extends gb{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,n=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:n,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const r=e.img!==void 0?e.img:null;let l=e.src;_n(!(l!==void 0&&r),"`image` and `src` cannot be provided at the same time"),(l===void 0||l.length===0)&&r&&(l=r.src||ei(r)),_n(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),_n(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let u;if(e.src!==void 0?u=Ia.IDLE:r!==void 0&&("complete"in r?r.complete?u=r.src?Ia.LOADED:Ia.IDLE:u=Ia.LOADING:u=Ia.LOADED),this.color_=e.color!==void 0?ql(e.color):null,this.iconImage_=uw(r,l,this.crossOrigin_,u,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let d,h;if(e.size)[d,h]=e.size;else{const g=this.getImage(1);if(g.width&&g.height)d=g.width,h=g.height;else if(g instanceof HTMLImageElement){this.initialOptions_=e;const y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;const x=this.iconImage_.getSize();this.setScale(jL(x[0],x[1],e.width,e.height))};this.listenImageChange(y);return}}d!==void 0&&this.setScale(jL(d,h,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Gu({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=n[0]),this.anchorYUnits_=="fraction"&&(e[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+n[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+n[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=uw(null,e,this.crossOrigin_,Ia.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Ia.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Ia.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ka.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ka.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Li{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Li({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class $a{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=$L,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new $a({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=$L,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function jq(a){let e;if(typeof a=="function")e=a;else{let t;Array.isArray(a)?t=a:(_n(typeof a.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[a]),e=function(){return t}}return e}let XS=null;function _T(a,e){if(!XS){const t=new ji({color:"rgba(255,255,255,0.4)"}),i=new Li({color:"#3399CC",width:1.25});XS=[new $a({image:new Qr({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return XS}function aG(){const a={},e=[255,255,255,1],t=[0,153,255,1],i=3;return a.Polygon=[new $a({fill:new ji({color:[255,255,255,.5]})})],a.MultiPolygon=a.Polygon,a.LineString=[new $a({stroke:new Li({color:e,width:i+2})}),new $a({stroke:new Li({color:t,width:i})})],a.MultiLineString=a.LineString,a.Circle=a.Polygon.concat(a.LineString),a.Point=[new $a({image:new Qr({radius:i*2,fill:new ji({color:t}),stroke:new Li({color:e,width:i/2})}),zIndex:1/0})],a.MultiPoint=a.Point,a.GeometryCollection=a.Polygon.concat(a.LineString,a.Point),a}function $L(a){return a.getGeometry()}const $q="#333";class rh{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=ao(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new ji({color:$q}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new rh({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof ji?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ao(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function Jq(a){return!0}function Qq(a){const e=qP(),t=eY(a,e),i=KP();return function(n,s){if(i.properties=n.getPropertiesInternal(),i.resolution=s,e.featureId){const r=n.getId();r!==void 0?i.featureId=r:i.featureId=null}return e.geometryType&&(i.geometryType=YP(n.getGeometry())),t(i)}}function JL(a){const e=qP(),t=a.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=XA(a[r],e);const n=KP(),s=new Array(t);return function(r,l){if(n.properties=r.getPropertiesInternal(),n.resolution=l,e.featureId){const d=r.getId();d!==void 0?n.featureId=d:n.featureId=null}let u=0;for(let d=0;d<t;++d){const h=i[d](n);h&&(s[u]=h,u+=1)}return s.length=u,s}}function eY(a,e){const t=a.length,i=new Array(t);for(let n=0;n<t;++n){const s=a[n],r="filter"in s?nh(s.filter,vo,e):Jq;let l;if(Array.isArray(s.style)){const u=s.style.length;l=new Array(u);for(let d=0;d<u;++d)l[d]=XA(s.style[d],e)}else l=[XA(s.style,e)];i[n]={filter:r,styles:l}}return function(n){const s=[];let r=!1;for(let l=0;l<t;++l){const u=i[l].filter;if(u(n)&&!(a[l].else&&r)){r=!0;for(const d of i[l].styles){const h=d(n);h&&s.push(h)}}}return s}}function XA(a,e){const t=W1(a,"",e),i=O1(a,"",e),n=tY(a,e),s=aY(a,e),r=Ho(a,"z-index",e);if(!t&&!i&&!n&&!s&&!Hm(a))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(a));const l=new $a;return function(u){let d=!0;if(t){const h=t(u);h&&(d=!1),l.setFill(h)}if(i){const h=i(u);h&&(d=!1),l.setStroke(h)}if(n){const h=n(u);h&&(d=!1),l.setText(h)}if(s){const h=s(u);h&&(d=!1),l.setImage(h)}return r&&l.setZIndex(r(u)),d?null:l}}function W1(a,e,t){let i;if(e+"fill-pattern-src"in a)i=sY(a,e+"fill-",t);else{if(a[e+"fill-color"]==="none")return s=>null;i=mT(a,e+"fill-color",t)}if(!i)return null;const n=new ji;return function(s){const r=i(s);return r===lT?null:(n.setColor(r),n)}}function O1(a,e,t){const i=Ho(a,e+"stroke-width",t),n=mT(a,e+"stroke-color",t);if(!i&&!n)return null;const s=Sd(a,e+"stroke-line-cap",t),r=Sd(a,e+"stroke-line-join",t),l=iG(a,e+"stroke-line-dash",t),u=Ho(a,e+"stroke-line-dash-offset",t),d=Ho(a,e+"stroke-miter-limit",t),h=new Li;return function(g){if(n){const y=n(g);if(y===lT)return null;h.setColor(y)}if(i&&h.setWidth(i(g)),s){const y=s(g);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(y)}if(r){const y=r(g);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(y)}return l&&h.setLineDash(l(g)),u&&h.setLineDashOffset(u(g)),d&&h.setMiterLimit(d(g)),h}}function tY(a,e){const t="text-",i=Sd(a,t+"value",e);if(!i)return null;const n=W1(a,t,e),s=W1(a,t+"background-",e),r=O1(a,t,e),l=O1(a,t+"background-",e),u=Sd(a,t+"font",e),d=Ho(a,t+"max-angle",e),h=Ho(a,t+"offset-x",e),g=Ho(a,t+"offset-y",e),y=ip(a,t+"overflow",e),x=Sd(a,t+"placement",e),C=Ho(a,t+"repeat",e),I=UC(a,t+"scale",e),A=ip(a,t+"rotate-with-view",e),E=Ho(a,t+"rotation",e),L=Sd(a,t+"align",e),G=Sd(a,t+"justify",e),F=Sd(a,t+"baseline",e),B=ip(a,t+"keep-upright",e),Z=iG(a,t+"padding",e),Y=HC(a,t+"declutter-mode"),$=new rh({declutterMode:Y});return function(te){if($.setText(i(te)),n&&$.setFill(n(te)),s&&$.setBackgroundFill(s(te)),r&&$.setStroke(r(te)),l&&$.setBackgroundStroke(l(te)),u&&$.setFont(u(te)),d&&$.setMaxAngle(d(te)),h&&$.setOffsetX(h(te)),g&&$.setOffsetY(g(te)),y&&$.setOverflow(y(te)),x){const ce=x(te);if(ce!=="point"&&ce!=="line")throw new Error("Expected point or line for text-placement");$.setPlacement(ce)}if(C&&$.setRepeat(C(te)),I&&$.setScale(I(te)),A&&$.setRotateWithView(A(te)),E&&$.setRotation(E(te)),L){const ce=L(te);if(ce!=="left"&&ce!=="center"&&ce!=="right"&&ce!=="end"&&ce!=="start")throw new Error("Expected left, right, center, start, or end for text-align");$.setTextAlign(ce)}if(G){const ce=G(te);if(ce!=="left"&&ce!=="right"&&ce!=="center")throw new Error("Expected left, right, or center for text-justify");$.setJustify(ce)}if(F){const ce=F(te);if(ce!=="bottom"&&ce!=="top"&&ce!=="middle"&&ce!=="alphabetic"&&ce!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");$.setTextBaseline(ce)}return Z&&$.setPadding(Z(te)),B&&$.setKeepUpright(B(te)),$}}function aY(a,e){return"icon-src"in a?iY(a,e):"shape-points"in a?nY(a,e):"circle-radius"in a?rY(a,e):null}function iY(a,e){const t="icon-",i=t+"src",n=nG(a[i],i),s=dw(a,t+"anchor",e),r=UC(a,t+"scale",e),l=Ho(a,t+"opacity",e),u=dw(a,t+"displacement",e),d=Ho(a,t+"rotation",e),h=ip(a,t+"rotate-with-view",e),g=e9(a,t+"anchor-origin"),y=t9(a,t+"anchor-x-units"),x=t9(a,t+"anchor-y-units"),C=cY(a,t+"color"),I=lY(a,t+"cross-origin"),A=uY(a,t+"offset"),E=e9(a,t+"offset-origin"),L=hw(a,t+"width"),G=hw(a,t+"height"),F=oY(a,t+"size"),B=HC(a,t+"declutter-mode"),Z=new Gu({src:n,anchorOrigin:g,anchorXUnits:y,anchorYUnits:x,color:C,crossOrigin:I,offset:A,offsetOrigin:E,height:G,width:L,size:F,declutterMode:B});return function(Y){return l&&Z.setOpacity(l(Y)),u&&Z.setDisplacement(u(Y)),d&&Z.setRotation(d(Y)),h&&Z.setRotateWithView(h(Y)),r&&Z.setScale(r(Y)),s&&Z.setAnchor(s(Y)),Z}}function nY(a,e){const t="shape-",i=t+"points",n=t+"radius",s=qA(a[i],i),r=qA(a[n],n),l=W1(a,t,e),u=O1(a,t,e),d=UC(a,t+"scale",e),h=dw(a,t+"displacement",e),g=Ho(a,t+"rotation",e),y=ip(a,t+"rotate-with-view",e),x=hw(a,t+"radius2"),C=hw(a,t+"angle"),I=HC(a,t+"declutter-mode"),A=new bl({points:s,radius:r,radius2:x,angle:C,declutterMode:I});return function(E){return l&&A.setFill(l(E)),u&&A.setStroke(u(E)),h&&A.setDisplacement(h(E)),g&&A.setRotation(g(E)),y&&A.setRotateWithView(y(E)),d&&A.setScale(d(E)),A}}function rY(a,e){const t="circle-",i=W1(a,t,e),n=O1(a,t,e),s=Ho(a,t+"radius",e),r=UC(a,t+"scale",e),l=dw(a,t+"displacement",e),u=Ho(a,t+"rotation",e),d=ip(a,t+"rotate-with-view",e),h=HC(a,t+"declutter-mode"),g=new Qr({radius:5,declutterMode:h});return function(y){return s&&g.setRadius(s(y)),i&&g.setFill(i(y)),n&&g.setStroke(n(y)),l&&g.setDisplacement(l(y)),u&&g.setRotation(u(y)),d&&g.setRotateWithView(d(y)),r&&g.setScale(r(y)),g}}function Ho(a,e,t){if(!(e in a))return;const i=nh(a[e],Ui,t);return function(n){return qA(i(n),e)}}function Sd(a,e,t){if(!(e in a))return null;const i=nh(a[e],Zo,t);return function(n){return nG(i(n),e)}}function sY(a,e,t){const i=Sd(a,e+"pattern-src",t),n=QL(a,e+"pattern-offset",t),s=QL(a,e+"pattern-size",t),r=mT(a,e+"color",t);return function(l){return{src:i(l),offset:n&&n(l),size:s&&s(l),color:r&&r(l)}}}function ip(a,e,t){if(!(e in a))return null;const i=nh(a[e],vo,t);return function(n){const s=i(n);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function mT(a,e,t){if(!(e in a))return null;const i=nh(a[e],xu,t);return function(n){return rG(i(n),e)}}function iG(a,e,t){if(!(e in a))return null;const i=nh(a[e],jm,t);return function(n){return pb(i(n),e)}}function dw(a,e,t){if(!(e in a))return null;const i=nh(a[e],jm,t);return function(n){const s=pb(i(n),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function QL(a,e,t){if(!(e in a))return null;const i=nh(a[e],jm,t);return function(n){return sG(i(n),e)}}function UC(a,e,t){if(!(e in a))return null;const i=nh(a[e],jm|Ui,t);return function(n){return dY(i(n),e)}}function hw(a,e){const t=a[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function oY(a,e){const t=a[e];if(t!==void 0){if(typeof t=="number")return ao(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function lY(a,e){const t=a[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function e9(a,e){const t=a[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function t9(a,e){const t=a[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function uY(a,e){const t=a[e];if(t!==void 0)return pb(t,e)}function HC(a,e){const t=a[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function cY(a,e){const t=a[e];if(t!==void 0)return rG(t,e)}function pb(a,e){if(!Array.isArray(a))throw new Error(`Expected an array for ${e}`);const t=a.length;for(let i=0;i<t;++i)if(typeof a[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return a}function nG(a,e){if(typeof a!="string")throw new Error(`Expected a string for ${e}`);return a}function qA(a,e){if(typeof a!="number")throw new Error(`Expected a number for ${e}`);return a}function rG(a,e){if(typeof a=="string")return a;const t=pb(a,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function sG(a,e){const t=pb(a,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function dY(a,e){return typeof a=="number"?a:sG(a,e)}const a9={RENDER_ORDER:"renderOrder"};class fT extends cf{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(a9.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new HP(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(a9.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?_T:e;const t=hY(e);this.styleFunction_=e===null?void 0:jq(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function hY(a){if(a===void 0)return _T;if(!a)return null;if(typeof a=="function"||a instanceof $a)return a;if(!Array.isArray(a))return JL([a]);if(a.length===0)return[];const e=a.length,t=a[0];if(t instanceof $a){const n=new Array(e);for(let s=0;s<e;++s){const r=a[s];if(!(r instanceof $a))throw new Error("Expected a list of style instances");n[s]=r}return n}if("style"in t){const n=new Array(e);for(let s=0;s<e;++s){const r=a[s];if(!("style"in r))throw new Error("Expected a list of rules with a style property");n[s]=r}return Qq(n)}return JL(a)}class oG extends oo{constructor(e,t,i,n){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=n}}class _Y extends FC{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Da()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;ku(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),bP(n,i)}forEachFeatureAtCoordinate(e,t,i,n,s,r,l,u){let d;const h=t.viewState;function g(F,B,Z,Y){return s.call(r,B,F?Z:null,Y)}const y=h.projection,x=kC(e.slice(),y),C=[[0,0]];if(y.canWrapX()&&n){const F=y.getExtent(),B=Oi(F);C.push([-B,0],[B,0])}const I=t.layerStatesArray,A=I.length,E=[],L=[];for(let F=0;F<C.length;F++)for(let B=A-1;B>=0;--B){const Z=I[B],Y=Z.layer;if(Y.hasRenderer()&&oT(Z,h)&&l.call(u,Y)){const $=Y.getRenderer(),te=Y.getSource();if($&&te){const ce=te.getWrapX()?x:e,me=g.bind(null,Z.managed);L[0]=ce[0]+C[F][0],L[1]=ce[1]+C[F][1],d=$.forEachFeatureAtCoordinate(L,t,i,me,E)}if(d)return d}}if(E.length===0)return;const G=1/E.length;return E.forEach((F,B)=>F.distanceSq+=B*G),E.sort((F,B)=>F.distanceSq-B.distanceSq),E.some(F=>d=F.callback(F.feature,F.layer,F.geometry)),d}hasFeatureAtCoordinate(e,t,i,n,s,r){return this.forEachFeatureAtCoordinate(e,t,i,n,wp,this,s,r)!==void 0}getMap(){return this.map_}renderFrame(e){Da()}scheduleExpireIconCache(e){zl.canExpireCache()&&e.postRenderFunctions.push(mY)}}function mY(a,e){zl.expire()}class fY extends _Y{constructor(e){super(e),this.fontChangeListenerKey_=xa(Lg,Ym.PROPERTYCHANGE,e.redrawText,e),this.element_=wl?GP():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Bc+" ol-layers";const i=e.getViewport();i&&i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const n=new oG(e,void 0,t);i.dispatchEvent(n)}}disposeInternal(){mn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ko.PRECOMPOSE,e);const t=e.layerStatesArray.sort((d,h)=>d.zIndex-h.zIndex);t.some(d=>d.layer instanceof fT&&d.layer.getDeclutter())&&(e.declutter={});const n=e.viewState;this.children_.length=0;const s=[];let r=null;for(let d=0,h=t.length;d<h;++d){const g=t[d];e.layerIndex=d;const y=g.layer,x=y.getSourceState();if(!oT(g,n)||x!="ready"&&x!="undefined"){y.unrender();continue}const C=y.render(e,r);C&&(C!==r&&(this.children_.push(C),r=C),s.push(g))}this.declutter(e,s),LX(this.element_,this.children_);const u=this.getMap().getTargetElement();if(jh(u)){const d=u.getContext("2d");for(const h of this.children_){const g=h.firstElementChild||h,y=h.style.backgroundColor;if(y&&(!jh(g)||g.width>0)&&(d.fillStyle=y,d.fillRect(0,0,u.width,u.height)),jh(g)&&g.width>0){const x=h.style.opacity||g.style.opacity;d.globalAlpha=x===""?1:Number(x);const C=g.style.transform;if(C)d.setTransform(...OA(C));else{const I=parseFloat(g.style.width)/g.width,A=parseFloat(g.style.height)/g.height;d.setTransform(I,0,0,A,0,0)}d.drawImage(g,0,0)}}d.globalAlpha=1,d.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(Ko.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const n=t[i],s=n.layer;s.getDeclutter()&&s.renderDeclutter(e,n)}t.forEach(i=>i.layer.renderDeferred(e))}}}function lG(a){if(a instanceof cf){a.setMapInternal(null);return}a instanceof C_&&a.getLayers().forEach(lG)}function uG(a,e){if(a instanceof cf){a.setMapInternal(e);return}if(a instanceof C_){const t=a.getLayers().getArray();for(let i=0,n=t.length;i<n;++i)uG(t[i],e)}}let gY=class extends eu{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=pY(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:mP,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Jo(),this.pixelToCoordinateTransform_=Jo(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,wl||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,wl||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(wl?new to:kX()),this.interactions=t.interactions||(wl?new to:JX({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new zH(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(fs.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(fs.VIEW,this.handleViewChanged_),this.addChangeListener(fs.SIZE,this.handleSizeChanged_),this.addChangeListener(fs.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof gc)&&e.view.then(function(n){i.setView(new gc(n))}),this.controls.addEventListener(js.ADD,n=>{n.element.setMap(this)}),this.controls.addEventListener(js.REMOVE,n=>{n.element.setMap(null)}),this.interactions.addEventListener(js.ADD,n=>{n.element.setMap(this)}),this.interactions.addEventListener(js.REMOVE,n=>{n.element.setMap(null)}),this.overlays_.addEventListener(js.ADD,n=>{this.addOverlayInternal_(n.element)}),this.overlays_.addEventListener(js.REMOVE,n=>{const s=n.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],n.element.setMap(null)}),this.controls.forEach(n=>{n.setMap(this)}),this.interactions.forEach(n=>{n.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){uG(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,r=i.layerFilter!==void 0?i.layerFilter:wp,l=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,l,t,null,r,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(n){i.push(n)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(n){n instanceof C_?t(n.getLayers()):e.push(n)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const n=t.layerFilter!==void 0?t.layerFilter:wp,s=t.hitTolerance!==void 0?t.hitTolerance:0,r=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,r,n,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),n=this.getSize(),s=i.width/n[0],r=i.height/n[1],l="changedTouches"in e?e.changedTouches[0]:e;return[(l.clientX-i.left)/s,(l.clientY-i.top)/r]}getTarget(){return this.get(fs.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return qm(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Gr(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(fs.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof to){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const n=e[t];if(!n.visible)continue;const s=n.layer.getRenderer();if(s&&!s.ready)return!0;const r=n.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(e){const t=hr(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Gr(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(fs.SIZE)}getView(){return this.get(fs.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,n){return UH(this.frameState_,e,t,i,n)}handleBrowserEvent(e,t){t=t||e.type;const i=new mc(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===E1.POINTERDOWN||i===Ka.WHEEL||i===Ka.KEYDOWN){const n=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():n,r=t.target,l=s instanceof ShadowRoot?s.host===r?s.host.ownerDocument:s:s===n?n.documentElement:s;if(this.overlayContainerStopEvent_.contains(r)||!l.contains(r))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const n=this.getInteractions().getArray().slice();for(let s=n.length-1;s>=0;s--){const r=n[s];if(r.getMap()!==this||!r.getActive()||!this.getTargetElement())continue;if(!r.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let n=this.maxTilesLoading_,s=n;if(e){const r=e.viewHints;if(r[Kn.ANIMATING]||r[Kn.INTERACTING]){const l=Date.now()-e.time>8;n=l?0:8,s=l?0:2}}t.getTilesLoading()<n&&(t.reprioritize(),t.loadMoreTiles(n,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ko.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ko.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Eg(Cd.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Eg(Cd.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let n=0,s=i.length;n<s;++n)i[n](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,n=this.targetChangeHandlerKeys_.length;i<n;++i)mn(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ka.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ka.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!jh(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(jh(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new fY(this)),!jh(t)){this.mapBrowserEventHandler_=new VH(this,this.moveTolerance_);for(const n in Bi)this.mapBrowserEventHandler_.addEventListener(Bi[n],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ka.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ka.WHEEL,this.boundHandleBrowserEvent_,gP?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const n=t.getRootNode();i=n instanceof ShadowRoot?n.host:t}if(this.targetChangeHandlerKeys_=[xa(i,Ka.KEYDOWN,this.handleBrowserEvent,this),xa(i,Ka.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const n=t.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(mn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(mn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=xa(e,Ym.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=xa(e,Ka.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(mn),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Vh("addlayer",e)),this.layerGroupPropertyListenerKeys_=[xa(e,Ym.PROPERTYCHANGE,this.render,this),xa(e,Ka.CHANGE,this.render,this),xa(e,"addlayer",this.handleLayerAdd_,this),xa(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){lG(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),n=this.frameState_;let s=null;if(t!==void 0&&UL(t)&&i&&i.isDef()){const r=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:S1(l.center,l.resolution,l.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:l,viewHints:r,wantedTiles:{},mapId:ei(this),renderTargets:{}},l.nextCenter&&l.nextResolution){const u=isNaN(l.nextRotation)?l.rotation:l.nextRotation;s.nextExtent=S1(l.nextCenter,l.nextResolution,u,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n&&(!this.previousExtent_||!lf(this.previousExtent_)&&!zm(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Eg(Cd.MOVESTART,this,n)),this.previousExtent_=Wp(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Kn.ANIMATING]&&!s.viewHints[Kn.INTERACTING]&&!zm(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Eg(Cd.MOVEEND,this,s)),Q7(s.extent,this.previousExtent_))),this.dispatchEvent(new Eg(Cd.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Cd.LOADSTART)||this.hasListener(Cd.LOADEND)||this.hasListener(Ko.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Vh("removelayer",t)),this.set(fs.LAYERGROUP,e)}setSize(e){this.set(fs.SIZE,e)}setTarget(e){this.set(fs.TARGET,e)}setView(e){if(!e||e instanceof gc){this.set(fs.VIEW,e);return}this.set(fs.VIEW,new gc);const t=this;e.then(function(i){t.setView(new gc(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){let n,s;if(jh(e))n=e.width,s=e.height;else{const r=getComputedStyle(e);n=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),s=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth)}!isNaN(n)&&!isNaN(s)&&(t=[Math.max(0,n),Math.max(0,s)],!UL(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&J7("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!ah(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function pY(a){let e=null;a.keyboardEventTarget!==void 0&&(e=typeof a.keyboardEventTarget=="string"?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);const t={},i=a.layers&&typeof a.layers.getLayers=="function"?a.layers:new C_({layers:a.layers});t[fs.LAYERGROUP]=i,t[fs.TARGET]=a.target,t[fs.VIEW]=a.view instanceof gc?a.view:new gc;let n;a.controls!==void 0&&(Array.isArray(a.controls)?n=new to(a.controls.slice()):(_n(typeof a.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),n=a.controls));let s;a.interactions!==void 0&&(Array.isArray(a.interactions)?s=new to(a.interactions.slice()):(_n(typeof a.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=a.interactions));let r;return a.overlays!==void 0?Array.isArray(a.overlays)?r=new to(a.overlays.slice()):(_n(typeof a.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),r=a.overlays):r=new to,{controls:n,interactions:s,keyboardEventTarget:e,overlays:r,values:t}}var $h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cG(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ox={exports:{}},yY=ox.exports,i9;function bY(){return i9||(i9=1,(function(a,e){(function(t,i){a.exports=i()})(yY,(function(){var t,i,n;function s(r,l){if(!t)t=l;else if(!i)i=l;else{var u="var sharedChunk = {}; ("+t+")(sharedChunk); ("+i+")(sharedChunk);",d={};t(d),n=l(d),typeof window<"u"&&(n.workerUrl=window.URL.createObjectURL(new Blob([u],{type:"text/javascript"})))}}return s(["exports"],(function(r){function l(o,c){return o(c={exports:{}},c.exports),c.exports}var u=d;function d(o,c,_,b){this.cx=3*o,this.bx=3*(_-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(b-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=b,this.p2x=_,this.p2y=b}d.prototype.sampleCurveX=function(o){return((this.ax*o+this.bx)*o+this.cx)*o},d.prototype.sampleCurveY=function(o){return((this.ay*o+this.by)*o+this.cy)*o},d.prototype.sampleCurveDerivativeX=function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},d.prototype.solveCurveX=function(o,c){var _,b,w,S,M;for(c===void 0&&(c=1e-6),w=o,M=0;M<8;M++){if(S=this.sampleCurveX(w)-o,Math.abs(S)<c)return w;var O=this.sampleCurveDerivativeX(w);if(Math.abs(O)<1e-6)break;w-=S/O}if((w=o)<(_=0))return _;if(w>(b=1))return b;for(;_<b;){if(S=this.sampleCurveX(w),Math.abs(S-o)<c)return w;o>S?_=w:b=w,w=.5*(b-_)+_}return w},d.prototype.solve=function(o,c){return this.sampleCurveY(this.solveCurveX(o,c))};var h=g;function g(o,c){this.x=o,this.y=c}g.prototype={clone:function(){return new g(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,c){return this.clone()._rotateAround(o,c)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var c=o.x-this.x,_=o.y-this.y;return c*c+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,c){return Math.atan2(this.x*c-this.y*o,this.x*o+this.y*c)},_matMult:function(o){var c=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=c,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var c=Math.cos(o),_=Math.sin(o),b=_*this.x+c*this.y;return this.x=c*this.x-_*this.y,this.y=b,this},_rotateAround:function(o,c){var _=Math.cos(o),b=Math.sin(o),w=c.y+b*(this.x-c.x)+_*(this.y-c.y);return this.x=c.x+_*(this.x-c.x)-b*(this.y-c.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},g.convert=function(o){return o instanceof g?o:Array.isArray(o)?new g(o[0],o[1]):o};var y=typeof self<"u"?self:{},x=Math.pow(2,53)-1;function C(o,c,_,b){var w=new u(o,c,_,b);return function(S){return w.solve(S)}}var I=C(.25,.1,.25,1);function A(o,c,_){return Math.min(_,Math.max(c,o))}function E(o,c,_){var b=_-c,w=((o-c)%b+b)%b+c;return w===c?_:w}function L(o){for(var c=[],_=arguments.length-1;_-- >0;)c[_]=arguments[_+1];for(var b=0,w=c;b<w.length;b+=1){var S=w[b];for(var M in S)o[M]=S[M]}return o}var G=1;function F(){return G++}function B(){return(function o(c){return c?(c^16*Math.random()>>c/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,o)})()}function Z(o){return!!o&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)}function Y(o,c){o.forEach((function(_){c[_]&&(c[_]=c[_].bind(c))}))}function $(o,c){return o.indexOf(c,o.length-c.length)!==-1}function te(o,c,_){var b={};for(var w in o)b[w]=c.call(_||this,o[w],w,o);return b}function ce(o,c,_){var b={};for(var w in o)c.call(_||this,o[w],w,o)&&(b[w]=o[w]);return b}function me(o){return Array.isArray(o)?o.map(me):typeof o=="object"&&o?te(o,me):o}var X={};function de(o){X[o]||(typeof console<"u"&&console.warn(o),X[o]=!0)}function N(o,c,_){return(_.y-o.y)*(c.x-o.x)>(c.y-o.y)*(_.x-o.x)}function ne(o){for(var c=0,_=0,b=o.length,w=b-1,S=void 0,M=void 0;_<b;w=_++)c+=((M=o[w]).x-(S=o[_]).x)*(S.y+M.y);return c}function le(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function _e(o){var c={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(b,w,S,M){var O=S||M;return c[w]=!O||O.toLowerCase(),""})),c["max-age"]){var _=parseInt(c["max-age"],10);isNaN(_)?delete c["max-age"]:c["max-age"]=_}return c}var ke=null;function Ie(o){if(ke==null){var c=o.navigator?o.navigator.userAgent:null;ke=!!o.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return ke}function re(o){try{var c=y[o];return c.setItem("_mapbox_test_",1),c.removeItem("_mapbox_test_"),!0}catch{return!1}}var Q,J,je,Qe,Je=y.performance&&y.performance.now?y.performance.now.bind(y.performance):Date.now.bind(Date),kt=y.requestAnimationFrame||y.mozRequestAnimationFrame||y.webkitRequestAnimationFrame||y.msRequestAnimationFrame,Pt=y.cancelAnimationFrame||y.mozCancelAnimationFrame||y.webkitCancelAnimationFrame||y.msCancelAnimationFrame,zt={now:Je,frame:function(o){var c=kt(o);return{cancel:function(){return Pt(c)}}},getImageData:function(o,c){c===void 0&&(c=0);var _=y.document.createElement("canvas"),b=_.getContext("2d");if(!b)throw new Error("failed to create canvas 2d context");return _.width=o.width,_.height=o.height,b.drawImage(o,0,0,o.width,o.height),b.getImageData(-c,-c,o.width+2*c,o.height+2*c)},resolveURL:function(o){return Q||(Q=y.document.createElement("a")),Q.href=o,Q.href},hardwareConcurrency:y.navigator&&y.navigator.hardwareConcurrency||4,get devicePixelRatio(){return y.devicePixelRatio},get prefersReducedMotion(){return!!y.matchMedia&&(J==null&&(J=y.matchMedia("(prefers-reduced-motion: reduce)")),J.matches)}},Nt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ga={supported:!1,testSupport:function(o){!ta&&Qe&&(Fe?De(o):je=o)}},ta=!1,Fe=!1;function De(o){var c=o.createTexture();o.bindTexture(o.TEXTURE_2D,c);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,Qe),o.isContextLost())return;ga.supported=!0}catch{}o.deleteTexture(c),ta=!0}y.document&&((Qe=y.document.createElement("img")).onload=function(){je&&De(je),je=null,Fe=!0},Qe.onerror=function(){ta=!0,je=null},Qe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var z="01",Ze=function(o,c){this._transformRequestFn=o,this._customAccessToken=c,this._createSkuToken()};function Re(o){return o.indexOf("mapbox:")===0}Ze.prototype._createSkuToken=function(){var o=(function(){for(var c="",_=0;_<10;_++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",z,c].join(""),tokenExpiresAt:Date.now()+432e5}})();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt},Ze.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ze.prototype.transformRequest=function(o,c){return this._transformRequestFn&&this._transformRequestFn(o,c)||{url:o}},Ze.prototype.normalizeStyleURL=function(o,c){if(!Re(o))return o;var _=Ee(o);return _.path="/styles/v1"+_.path,this._makeAPIURL(_,this._customAccessToken||c)},Ze.prototype.normalizeGlyphsURL=function(o,c){if(!Re(o))return o;var _=Ee(o);return _.path="/fonts/v1"+_.path,this._makeAPIURL(_,this._customAccessToken||c)},Ze.prototype.normalizeSourceURL=function(o,c){if(!Re(o))return o;var _=Ee(o);return _.path="/v4/"+_.authority+".json",_.params.push("secure"),this._makeAPIURL(_,this._customAccessToken||c)},Ze.prototype.normalizeSpriteURL=function(o,c,_,b){var w=Ee(o);return Re(o)?(w.path="/styles/v1"+w.path+"/sprite"+c+_,this._makeAPIURL(w,this._customAccessToken||b)):(w.path+=""+c+_,Ne(w))},Ze.prototype.normalizeTileURL=function(o,c){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!Re(o))return o;var _=Ee(o);_.path=_.path.replace(/(\.(png|jpg)\d*)(?=$)/,(zt.devicePixelRatio>=2||c===512?"@2x":"")+(ga.supported?".webp":"$1")),_.path=_.path.replace(/^.+\/v4\//,"/"),_.path="/v4"+_.path;var b=this._customAccessToken||(function(w){for(var S=0,M=w;S<M.length;S+=1){var O=M[S].match(/^access_token=(.*)$/);if(O)return O[1]}return null})(_.params)||Nt.ACCESS_TOKEN;return Nt.REQUIRE_ACCESS_TOKEN&&b&&this._skuToken&&_.params.push("sku="+this._skuToken),this._makeAPIURL(_,b)},Ze.prototype.canonicalizeTileURL=function(o,c){var _=Ee(o);if(!_.path.match(/(^\/v4\/)/)||!_.path.match(/\.[\w]+$/))return o;var b="mapbox://tiles/";b+=_.path.replace("/v4/","");var w=_.params;return c&&(w=w.filter((function(S){return!S.match(/^access_token=/)}))),w.length&&(b+="?"+w.join("&")),b},Ze.prototype.canonicalizeTileset=function(o,c){for(var _=!!c&&Re(c),b=[],w=0,S=o.tiles||[];w<S.length;w+=1){var M=S[w];ie(M)?b.push(this.canonicalizeTileURL(M,_)):b.push(M)}return b},Ze.prototype._makeAPIURL=function(o,c){var _="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",b=Ee(Nt.API_URL);if(o.protocol=b.protocol,o.authority=b.authority,o.protocol==="http"){var w=o.params.indexOf("secure");w>=0&&o.params.splice(w,1)}if(b.path!=="/"&&(o.path=""+b.path+o.path),!Nt.REQUIRE_ACCESS_TOKEN)return Ne(o);if(!(c=c||Nt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+_);if(c[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+_);return o.params=o.params.filter((function(S){return S.indexOf("access_token")===-1})),o.params.push("access_token="+c),Ne(o)};var fe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ie(o){return fe.test(o)}var Ce=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ee(o){var c=o.match(Ce);if(!c)throw new Error("Unable to parse URL object");return{protocol:c[1],authority:c[2],path:c[3]||"/",params:c[4]?c[4].split("&"):[]}}function Ne(o){var c=o.params.length?"?"+o.params.join("&"):"";return o.protocol+"://"+o.authority+o.path+c}function Ve(o){if(!o)return null;var c=o.split(".");if(!c||c.length!==3)return null;try{return JSON.parse(decodeURIComponent(y.atob(c[1]).split("").map((function(_){return"%"+("00"+_.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch{return null}}var $e=function(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};$e.prototype.getStorageKey=function(o){var c,_=Ve(Nt.ACCESS_TOKEN);return c=_&&_.u?y.btoa(encodeURIComponent(_.u).replace(/%([0-9A-F]{2})/g,(function(b,w){return String.fromCharCode(+("0x"+w))}))):Nt.ACCESS_TOKEN||"",o?"mapbox.eventData."+o+":"+c:"mapbox.eventData:"+c},$e.prototype.fetchEventData=function(){var o=re("localStorage"),c=this.getStorageKey(),_=this.getStorageKey("uuid");if(o)try{var b=y.localStorage.getItem(c);b&&(this.eventData=JSON.parse(b));var w=y.localStorage.getItem(_);w&&(this.anonId=w)}catch{de("Unable to read from LocalStorage")}},$e.prototype.saveEventData=function(){var o=re("localStorage"),c=this.getStorageKey(),_=this.getStorageKey("uuid");if(o)try{y.localStorage.setItem(_,this.anonId),Object.keys(this.eventData).length>=1&&y.localStorage.setItem(c,JSON.stringify(this.eventData))}catch{de("Unable to write to LocalStorage")}},$e.prototype.processRequests=function(o){},$e.prototype.postEvent=function(o,c,_,b){var w=this;if(Nt.EVENTS_URL){var S=Ee(Nt.EVENTS_URL);S.params.push("access_token="+(b||Nt.ACCESS_TOKEN||""));var M={event:this.type,created:new Date(o).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:z,userId:this.anonId},O=c?L(M,c):M,V={url:Ne(S),headers:{"Content-Type":"text/plain"},body:JSON.stringify([O])};this.pendingRequest=Ii(V,(function(H){w.pendingRequest=null,_(H),w.saveEventData(),w.processRequests(b)}))}},$e.prototype.queueRequest=function(o,c){this.queue.push(o),this.processRequests(c)};var ht,_t,Et=(function(o){function c(){o.call(this,"map.load"),this.success={},this.skuToken=""}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.postMapLoadEvent=function(_,b,w,S){this.skuToken=w;var M=!(!S&&!Nt.ACCESS_TOKEN),O=Array.isArray(_)&&_.some((function(V){return Re(V)||ie(V)}));Nt.EVENTS_URL&&M&&O&&this.queueRequest({id:b,timestamp:Date.now()},S)},c.prototype.processRequests=function(_){var b=this;if(!this.pendingRequest&&this.queue.length!==0){var w=this.queue.shift(),S=w.id,M=w.timestamp;S&&this.success[S]||(this.anonId||this.fetchEventData(),Z(this.anonId)||(this.anonId=B()),this.postEvent(M,{skuToken:this.skuToken},(function(O){O||S&&(b.success[S]=!0)}),_))}},c})($e),ca=new((function(o){function c(_){o.call(this,"appUserTurnstile"),this._customAccessToken=_}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.postTurnstileEvent=function(_,b){Nt.EVENTS_URL&&Nt.ACCESS_TOKEN&&Array.isArray(_)&&_.some((function(w){return Re(w)||ie(w)}))&&this.queueRequest(Date.now(),b)},c.prototype.processRequests=function(_){var b=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var w=Ve(Nt.ACCESS_TOKEN),S=w?w.u:Nt.ACCESS_TOKEN,M=S!==this.eventData.tokenU;Z(this.anonId)||(this.anonId=B(),M=!0);var O=this.queue.shift();if(this.eventData.lastSuccess){var V=new Date(this.eventData.lastSuccess),H=new Date(O),j=(O-this.eventData.lastSuccess)/864e5;M=M||j>=1||j<-1||V.getDate()!==H.getDate()}else M=!0;if(!M)return this.processRequests();this.postEvent(O,{"enabled.telemetry":!1},(function(ae){ae||(b.eventData.lastSuccess=O,b.eventData.tokenU=S)}),_)}},c})($e)),ua=ca.postTurnstileEvent.bind(ca),yi=new Et,Xi=yi.postMapLoadEvent.bind(yi),Ri=500,En=50;function _i(){y.caches&&!ht&&(ht=y.caches.open("mapbox-tiles"))}function nr(o){var c=o.indexOf("?");return c<0?o:o.slice(0,c)}var Ci,Ti=1/0;function Dr(){return Ci==null&&(Ci=y.OffscreenCanvas&&new y.OffscreenCanvas(1,1).getContext("2d")&&typeof y.createImageBitmap=="function"),Ci}var vs={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(vs);var To=(function(o){function c(_,b,w){b===401&&ie(w)&&(_+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),o.call(this,_),this.status=b,this.url=w,this.name=this.constructor.name,this.message=_}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},c})(Error),gr=le()?function(){return self.worker&&self.worker.referrer}:function(){return(y.location.protocol==="blob:"?y.parent:y).location.href},Zn,zn,pr=function(o,c){if(!(/^file:/.test(_=o.url)||/^file:/.test(gr())&&!/^\w+:/.test(_))){if(y.fetch&&y.Request&&y.AbortController&&y.Request.prototype.hasOwnProperty("signal"))return(function(b,w){var S,M=new y.AbortController,O=new y.Request(b.url,{method:b.method||"GET",body:b.body,credentials:b.credentials,headers:b.headers,referrer:gr(),signal:M.signal}),V=!1,H=!1,j=(S=O.url).indexOf("sku=")>0&&ie(S);b.type==="json"&&O.headers.set("Accept","application/json");var ae=function(ye,Le,Pe){if(!H){if(ye&&ye.message!=="SecurityError"&&de(ye),Le&&Pe)return he(Le);var qe=Date.now();y.fetch(O).then((function(Be){if(Be.ok){var et=j?Be.clone():null;return he(Be,et,qe)}return w(new To(Be.statusText,Be.status,b.url))})).catch((function(Be){Be.code!==20&&w(new Error(Be.message))}))}},he=function(ye,Le,Pe){(b.type==="arrayBuffer"?ye.arrayBuffer():b.type==="json"?ye.json():ye.text()).then((function(qe){H||(Le&&Pe&&(function(Be,et,it){if(_i(),ht){var nt={status:et.status,statusText:et.statusText,headers:new y.Headers};et.headers.forEach((function(pt,Mt){return nt.headers.set(Mt,pt)}));var lt=_e(et.headers.get("Cache-Control")||"");lt["no-store"]||(lt["max-age"]&&nt.headers.set("Expires",new Date(it+1e3*lt["max-age"]).toUTCString()),new Date(nt.headers.get("Expires")).getTime()-it<42e4||(function(pt,Mt){if(_t===void 0)try{new Response(new ReadableStream),_t=!0}catch{_t=!1}_t?Mt(pt.body):pt.blob().then(Mt)})(et,(function(pt){var Mt=new y.Response(pt,nt);_i(),ht&&ht.then((function(Vt){return Vt.put(nr(Be.url),Mt)})).catch((function(Vt){return de(Vt.message)}))})))}})(O,Le,Pe),V=!0,w(null,qe,ye.headers.get("Cache-Control"),ye.headers.get("Expires")))})).catch((function(qe){H||w(new Error(qe.message))}))};return j?(function(ye,Le){if(_i(),!ht)return Le(null);var Pe=nr(ye.url);ht.then((function(qe){qe.match(Pe).then((function(Be){var et=(function(it){if(!it)return!1;var nt=new Date(it.headers.get("Expires")||0),lt=_e(it.headers.get("Cache-Control")||"");return nt>Date.now()&&!lt["no-cache"]})(Be);qe.delete(Pe),et&&qe.put(Pe,Be.clone()),Le(null,Be,et)})).catch(Le)})).catch(Le)})(O,ae):ae(null,null),{cancel:function(){H=!0,V||M.abort()}}})(o,c);if(le()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,c,void 0,!0)}var _;return(function(b,w){var S=new y.XMLHttpRequest;for(var M in S.open(b.method||"GET",b.url,!0),b.type==="arrayBuffer"&&(S.responseType="arraybuffer"),b.headers)S.setRequestHeader(M,b.headers[M]);return b.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=b.credentials==="include",S.onerror=function(){w(new Error(S.statusText))},S.onload=function(){if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){var O=S.response;if(b.type==="json")try{O=JSON.parse(S.response)}catch(V){return w(V)}w(null,O,S.getResponseHeader("Cache-Control"),S.getResponseHeader("Expires"))}else w(new To(S.statusText,S.status,b.url))},S.send(b.body),{cancel:function(){return S.abort()}}})(o,c)},Ll=function(o,c){return pr(L(o,{type:"arrayBuffer"}),c)},Ii=function(o,c){return pr(L(o,{method:"POST"}),c)},ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Zn=[],zn=0;var ue=function(o,c){if(ga.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),zn>=Nt.MAX_PARALLEL_IMAGE_REQUESTS){var _={requestParameters:o,callback:c,cancelled:!1,cancel:function(){this.cancelled=!0}};return Zn.push(_),_}zn++;var b=!1,w=function(){if(!b)for(b=!0,zn--;Zn.length&&zn<Nt.MAX_PARALLEL_IMAGE_REQUESTS;){var M=Zn.shift();M.cancelled||(M.cancel=ue(M.requestParameters,M.callback).cancel)}},S=Ll(o,(function(M,O,V,H){w(),M?c(M):O&&(Dr()?(function(j,ae){var he=new y.Blob([new Uint8Array(j)],{type:"image/png"});y.createImageBitmap(he).then((function(ye){ae(null,ye)})).catch((function(ye){ae(new Error("Could not load image because of "+ye.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))})(O,c):(function(j,ae,he,ye){var Le=new y.Image,Pe=y.URL;Le.onload=function(){ae(null,Le),Pe.revokeObjectURL(Le.src),Le.onload=null,y.requestAnimationFrame((function(){Le.src=ee}))},Le.onerror=function(){return ae(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var qe=new y.Blob([new Uint8Array(j)],{type:"image/png"});Le.cacheControl=he,Le.expires=ye,Le.src=j.byteLength?Pe.createObjectURL(qe):ee})(O,c,V,H))}));return{cancel:function(){S.cancel(),w()}}};function ge(o,c,_){_[o]&&_[o].indexOf(c)!==-1||(_[o]=_[o]||[],_[o].push(c))}function xe(o,c,_){if(_&&_[o]){var b=_[o].indexOf(c);b!==-1&&_[o].splice(b,1)}}var Se=function(o,c){c===void 0&&(c={}),L(this,c),this.type=o},Xe=(function(o){function c(_,b){b===void 0&&(b={}),o.call(this,"error",L({error:_},b))}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c})(Se),ze=function(){};ze.prototype.on=function(o,c){return this._listeners=this._listeners||{},ge(o,c,this._listeners),this},ze.prototype.off=function(o,c){return xe(o,c,this._listeners),xe(o,c,this._oneTimeListeners),this},ze.prototype.once=function(o,c){return this._oneTimeListeners=this._oneTimeListeners||{},ge(o,c,this._oneTimeListeners),this},ze.prototype.fire=function(o,c){typeof o=="string"&&(o=new Se(o,c||{}));var _=o.type;if(this.listens(_)){o.target=this;for(var b=0,w=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];b<w.length;b+=1)w[b].call(this,o);for(var S=0,M=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];S<M.length;S+=1){var O=M[S];xe(_,O,this._oneTimeListeners),O.call(this,o)}var V=this._eventedParent;V&&(L(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),V.fire(o))}else o instanceof Xe&&console.error(o.error);return this},ze.prototype.listens=function(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)},ze.prototype.setEventedParent=function(o,c){return this._eventedParent=o,this._eventedParentData=c,this};var pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ae=function(o,c,_,b){this.message=(o?o+": ":"")+_,b&&(this.identifier=b),c!=null&&c.__line__&&(this.line=c.__line__)};function tt(o){var c=o.value;return c?[new Ae(o.key,c,"constants have been deprecated as of v8")]:[]}function vt(o){for(var c=[],_=arguments.length-1;_-- >0;)c[_]=arguments[_+1];for(var b=0,w=c;b<w.length;b+=1){var S=w[b];for(var M in S)o[M]=S[M]}return o}function At(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ct(o){if(Array.isArray(o))return o.map(ct);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){var c={};for(var _ in o)c[_]=ct(o[_]);return c}return At(o)}var wt=(function(o){function c(_,b){o.call(this,b),this.message=b,this.key=_}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c})(Error),Jt=function(o,c){c===void 0&&(c=[]),this.parent=o,this.bindings={};for(var _=0,b=c;_<b.length;_+=1){var w=b[_];this.bindings[w[0]]=w[1]}};Jt.prototype.concat=function(o){return new Jt(this,o)},Jt.prototype.get=function(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(o+" not found in scope.")},Jt.prototype.has=function(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)};var aa={kind:"null"},mt={kind:"number"},jt={kind:"string"},Ut={kind:"boolean"},Xt={kind:"color"},Ot={kind:"object"},Me={kind:"value"},yt={kind:"collator"},Yt={kind:"formatted"},fa={kind:"resolvedImage"};function Ba(o,c){return{kind:"array",itemType:o,N:c}}function Aa(o){if(o.kind==="array"){var c=Aa(o.itemType);return typeof o.N=="number"?"array<"+c+", "+o.N+">":o.itemType.kind==="value"?"array":"array<"+c+">"}return o.kind}var $i=[aa,mt,jt,Ut,Xt,Yt,Ot,Ba(Me),fa];function si(o,c){if(c.kind==="error")return null;if(o.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!si(o.itemType,c.itemType))&&(typeof o.N!="number"||o.N===c.N))return null}else{if(o.kind===c.kind)return null;if(o.kind==="value"){for(var _=0,b=$i;_<b.length;_+=1)if(!si(b[_],c))return null}}return"Expected "+Aa(o)+" but found "+Aa(c)+" instead."}function an(o,c){return c.some((function(_){return _.kind===o.kind}))}function ki(o,c){return c.some((function(_){return _==="null"?o===null:_==="array"?Array.isArray(o):_==="object"?o&&!Array.isArray(o)&&typeof o=="object":_===typeof o}))}var Ea=l((function(o,c){var _={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function b(O){return(O=Math.round(O))<0?0:O>255?255:O}function w(O){return b(O[O.length-1]==="%"?parseFloat(O)/100*255:parseInt(O))}function S(O){return(V=O[O.length-1]==="%"?parseFloat(O)/100:parseFloat(O))<0?0:V>1?1:V;var V}function M(O,V,H){return H<0?H+=1:H>1&&(H-=1),6*H<1?O+(V-O)*H*6:2*H<1?V:3*H<2?O+(V-O)*(2/3-H)*6:O}try{c.parseCSSColor=function(O){var V,H=O.replace(/ /g,"").toLowerCase();if(H in _)return _[H].slice();if(H[0]==="#")return H.length===4?(V=parseInt(H.substr(1),16))>=0&&V<=4095?[(3840&V)>>4|(3840&V)>>8,240&V|(240&V)>>4,15&V|(15&V)<<4,1]:null:H.length===7&&(V=parseInt(H.substr(1),16))>=0&&V<=16777215?[(16711680&V)>>16,(65280&V)>>8,255&V,1]:null;var j=H.indexOf("("),ae=H.indexOf(")");if(j!==-1&&ae+1===H.length){var he=H.substr(0,j),ye=H.substr(j+1,ae-(j+1)).split(","),Le=1;switch(he){case"rgba":if(ye.length!==4)return null;Le=S(ye.pop());case"rgb":return ye.length!==3?null:[w(ye[0]),w(ye[1]),w(ye[2]),Le];case"hsla":if(ye.length!==4)return null;Le=S(ye.pop());case"hsl":if(ye.length!==3)return null;var Pe=(parseFloat(ye[0])%360+360)%360/360,qe=S(ye[1]),Be=S(ye[2]),et=Be<=.5?Be*(qe+1):Be+qe-Be*qe,it=2*Be-et;return[b(255*M(it,et,Pe+1/3)),b(255*M(it,et,Pe)),b(255*M(it,et,Pe-1/3)),Le];default:return null}}return null}}catch{}})).parseCSSColor,bi=function(o,c,_,b){b===void 0&&(b=1),this.r=o,this.g=c,this.b=_,this.a=b};bi.parse=function(o){if(o){if(o instanceof bi)return o;if(typeof o=="string"){var c=Ea(o);if(c)return new bi(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3])}}},bi.prototype.toString=function(){var o=this.toArray(),c=o[1],_=o[2],b=o[3];return"rgba("+Math.round(o[0])+","+Math.round(c)+","+Math.round(_)+","+b+")"},bi.prototype.toArray=function(){var o=this.a;return o===0?[0,0,0,0]:[255*this.r/o,255*this.g/o,255*this.b/o,o]},bi.black=new bi(0,0,0,1),bi.white=new bi(1,1,1,1),bi.transparent=new bi(0,0,0,0),bi.red=new bi(1,0,0,1);var Vr=function(o,c,_){this.sensitivity=o?c?"variant":"case":c?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Vr.prototype.compare=function(o,c){return this.collator.compare(o,c)},Vr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var M_=function(o,c,_,b,w){this.text=o,this.image=c,this.scale=_,this.fontStack=b,this.textColor=w},Tr=function(o){this.sections=o};Tr.fromString=function(o){return new Tr([new M_(o,null,null,null,null)])},Tr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some((function(o){return o.text.length!==0||o.image&&o.image.name.length!==0}))},Tr.factory=function(o){return o instanceof Tr?o:Tr.fromString(o)},Tr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map((function(o){return o.text})).join("")},Tr.prototype.serialize=function(){for(var o=["format"],c=0,_=this.sections;c<_.length;c+=1){var b=_[c];if(b.image)o.push(["image",b.image.name]);else{o.push(b.text);var w={};b.fontStack&&(w["text-font"]=["literal",b.fontStack.split(",")]),b.scale&&(w["font-scale"]=b.scale),b.textColor&&(w["text-color"]=["rgba"].concat(b.textColor.toArray())),o.push(w)}}return o};var xs=function(o){this.name=o.name,this.available=o.available};function $p(o,c,_,b){return typeof o=="number"&&o>=0&&o<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof _=="number"&&_>=0&&_<=255?b===void 0||typeof b=="number"&&b>=0&&b<=1?null:"Invalid rgba value ["+[o,c,_,b].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof b=="number"?[o,c,_,b]:[o,c,_]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function L_(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof bi||o instanceof Vr||o instanceof Tr||o instanceof xs)return!0;if(Array.isArray(o)){for(var c=0,_=o;c<_.length;c+=1)if(!L_(_[c]))return!1;return!0}if(typeof o=="object"){for(var b in o)if(!L_(o[b]))return!1;return!0}return!1}function Un(o){if(o===null)return aa;if(typeof o=="string")return jt;if(typeof o=="boolean")return Ut;if(typeof o=="number")return mt;if(o instanceof bi)return Xt;if(o instanceof Vr)return yt;if(o instanceof Tr)return Yt;if(o instanceof xs)return fa;if(Array.isArray(o)){for(var c,_=o.length,b=0,w=o;b<w.length;b+=1){var S=Un(w[b]);if(c){if(c===S)continue;c=Me;break}c=S}return Ba(c||Me,_)}return Ot}function R_(o){var c=typeof o;return o===null?"":c==="string"||c==="number"||c==="boolean"?String(o):o instanceof bi||o instanceof Tr||o instanceof xs?o.toString():JSON.stringify(o)}xs.prototype.toString=function(){return this.name},xs.fromString=function(o){return o?new xs({name:o,available:!1}):null},xs.prototype.serialize=function(){return["image",this.name]};var ss=function(o,c){this.type=o,this.value=c};ss.parse=function(o,c){if(o.length!==2)return c.error("'literal' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(!L_(o[1]))return c.error("invalid value");var _=o[1],b=Un(_),w=c.expectedType;return b.kind!=="array"||b.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(b=w),new ss(b,_)},ss.prototype.evaluate=function(){return this.value},ss.prototype.eachChild=function(){},ss.prototype.outputDefined=function(){return!0},ss.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof bi?["rgba"].concat(this.value.toArray()):this.value instanceof Tr?this.value.serialize():this.value};var Er=function(o){this.name="ExpressionEvaluationError",this.message=o};Er.prototype.toJSON=function(){return this.message};var Eo={string:jt,number:mt,boolean:Ut,object:Ot},xn=function(o,c){this.type=o,this.args=c};xn.parse=function(o,c){if(o.length<2)return c.error("Expected at least one argument.");var _,b=1,w=o[0];if(w==="array"){var S,M;if(o.length>2){var O=o[1];if(typeof O!="string"||!(O in Eo)||O==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);S=Eo[O],b++}else S=Me;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return c.error('The length argument to "array" must be a positive integer literal',2);M=o[2],b++}_=Ba(S,M)}else _=Eo[w];for(var V=[];b<o.length;b++){var H=c.parse(o[b],b,Me);if(!H)return null;V.push(H)}return new xn(_,V)},xn.prototype.evaluate=function(o){for(var c=0;c<this.args.length;c++){var _=this.args[c].evaluate(o);if(!si(this.type,Un(_)))return _;if(c===this.args.length-1)throw new Er("Expected value to be of type "+Aa(this.type)+", but found "+Aa(Un(_))+" instead.")}return null},xn.prototype.eachChild=function(o){this.args.forEach(o)},xn.prototype.outputDefined=function(){return this.args.every((function(o){return o.outputDefined()}))},xn.prototype.serialize=function(){var o=this.type,c=[o.kind];if(o.kind==="array"){var _=o.itemType;if(_.kind==="string"||_.kind==="number"||_.kind==="boolean"){c.push(_.kind);var b=o.N;(typeof b=="number"||this.args.length>1)&&c.push(b)}}return c.concat(this.args.map((function(w){return w.serialize()})))};var il=function(o){this.type=Yt,this.sections=o};il.parse=function(o,c){if(o.length<2)return c.error("Expected at least one argument.");var _=o[1];if(!Array.isArray(_)&&typeof _=="object")return c.error("First argument must be an image or text section.");for(var b=[],w=!1,S=1;S<=o.length-1;++S){var M=o[S];if(w&&typeof M=="object"&&!Array.isArray(M)){w=!1;var O=null;if(M["font-scale"]&&!(O=c.parse(M["font-scale"],1,mt)))return null;var V=null;if(M["text-font"]&&!(V=c.parse(M["text-font"],1,Ba(jt))))return null;var H=null;if(M["text-color"]&&!(H=c.parse(M["text-color"],1,Xt)))return null;var j=b[b.length-1];j.scale=O,j.font=V,j.textColor=H}else{var ae=c.parse(o[S],1,Me);if(!ae)return null;var he=ae.type.kind;if(he!=="string"&&he!=="value"&&he!=="null"&&he!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,b.push({content:ae,scale:null,font:null,textColor:null})}}return new il(b)},il.prototype.evaluate=function(o){return new Tr(this.sections.map((function(c){var _=c.content.evaluate(o);return Un(_)===fa?new M_("",_,null,null,null):new M_(R_(_),null,c.scale?c.scale.evaluate(o):null,c.font?c.font.evaluate(o).join(","):null,c.textColor?c.textColor.evaluate(o):null)})))},il.prototype.eachChild=function(o){for(var c=0,_=this.sections;c<_.length;c+=1){var b=_[c];o(b.content),b.scale&&o(b.scale),b.font&&o(b.font),b.textColor&&o(b.textColor)}},il.prototype.outputDefined=function(){return!1},il.prototype.serialize=function(){for(var o=["format"],c=0,_=this.sections;c<_.length;c+=1){var b=_[c];o.push(b.content.serialize());var w={};b.scale&&(w["font-scale"]=b.scale.serialize()),b.font&&(w["text-font"]=b.font.serialize()),b.textColor&&(w["text-color"]=b.textColor.serialize()),o.push(w)}return o};var uo=function(o){this.type=fa,this.input=o};uo.parse=function(o,c){if(o.length!==2)return c.error("Expected two arguments.");var _=c.parse(o[1],1,jt);return _?new uo(_):c.error("No image name provided.")},uo.prototype.evaluate=function(o){var c=this.input.evaluate(o),_=xs.fromString(c);return _&&o.availableImages&&(_.available=o.availableImages.indexOf(c)>-1),_},uo.prototype.eachChild=function(o){o(this.input)},uo.prototype.outputDefined=function(){return!1},uo.prototype.serialize=function(){return["image",this.input.serialize()]};var Ob={"to-boolean":Ut,"to-color":Xt,"to-number":mt,"to-string":jt},Mo=function(o,c){this.type=o,this.args=c};Mo.parse=function(o,c){if(o.length<2)return c.error("Expected at least one argument.");var _=o[0];if((_==="to-boolean"||_==="to-string")&&o.length!==2)return c.error("Expected one argument.");for(var b=Ob[_],w=[],S=1;S<o.length;S++){var M=c.parse(o[S],S,Me);if(!M)return null;w.push(M)}return new Mo(b,w)},Mo.prototype.evaluate=function(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){for(var c,_,b=0,w=this.args;b<w.length;b+=1){if(_=null,(c=w[b].evaluate(o))instanceof bi)return c;if(typeof c=="string"){var S=o.parseColor(c);if(S)return S}else if(Array.isArray(c)&&!(_=c.length<3||c.length>4?"Invalid rbga value "+JSON.stringify(c)+": expected an array containing either three or four numeric values.":$p(c[0],c[1],c[2],c[3])))return new bi(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new Er(_||"Could not parse color from value '"+(typeof c=="string"?c:String(JSON.stringify(c)))+"'")}if(this.type.kind==="number"){for(var M=null,O=0,V=this.args;O<V.length;O+=1){if((M=V[O].evaluate(o))===null)return 0;var H=Number(M);if(!isNaN(H))return H}throw new Er("Could not convert "+JSON.stringify(M)+" to number.")}return this.type.kind==="formatted"?Tr.fromString(R_(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?xs.fromString(R_(this.args[0].evaluate(o))):R_(this.args[0].evaluate(o))},Mo.prototype.eachChild=function(o){this.args.forEach(o)},Mo.prototype.outputDefined=function(){return this.args.every((function(o){return o.outputDefined()}))},Mo.prototype.serialize=function(){if(this.type.kind==="formatted")return new il([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new uo(this.args[0]).serialize();var o=["to-"+this.type.kind];return this.eachChild((function(c){o.push(c.serialize())})),o};var pI=["Unknown","Point","LineString","Polygon"],iu=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};iu.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},iu.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?pI[this.feature.type]:this.feature.type:null},iu.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},iu.prototype.canonicalID=function(){return this.canonical},iu.prototype.properties=function(){return this.feature&&this.feature.properties||{}},iu.prototype.parseColor=function(o){var c=this._parseColorCache[o];return c||(c=this._parseColorCache[o]=bi.parse(o)),c};var Zr=function(o,c,_,b){this.name=o,this.type=c,this._evaluate=_,this.args=b};Zr.prototype.evaluate=function(o){return this._evaluate(o,this.args)},Zr.prototype.eachChild=function(o){this.args.forEach(o)},Zr.prototype.outputDefined=function(){return!1},Zr.prototype.serialize=function(){return[this.name].concat(this.args.map((function(o){return o.serialize()})))},Zr.parse=function(o,c){var _,b=o[0],w=Zr.definitions[b];if(!w)return c.error('Unknown expression "'+b+'". If you wanted a literal array, use ["literal", [...]].',0);for(var S=Array.isArray(w)?w[0]:w.type,M=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,O=M.filter((function(ba){var Qt=ba[0];return!Array.isArray(Qt)||Qt.length===o.length-1})),V=null,H=0,j=O;H<j.length;H+=1){var ae=j[H],he=ae[0],ye=ae[1];V=new Hu(c.registry,c.path,null,c.scope);for(var Le=[],Pe=!1,qe=1;qe<o.length;qe++){var Be=o[qe],et=Array.isArray(he)?he[qe-1]:he.type,it=V.parse(Be,1+Le.length,et);if(!it){Pe=!0;break}Le.push(it)}if(!Pe)if(Array.isArray(he)&&he.length!==Le.length)V.error("Expected "+he.length+" arguments, but found "+Le.length+" instead.");else{for(var nt=0;nt<Le.length;nt++){var lt=Array.isArray(he)?he[nt]:he.type,pt=Le[nt];V.concat(nt+1).checkSubtype(lt,pt.type)}if(V.errors.length===0)return new Zr(b,S,ye,Le)}}if(O.length===1)(_=c.errors).push.apply(_,V.errors);else{for(var Mt=(O.length?O:M).map((function(ba){var Qt;return Qt=ba[0],Array.isArray(Qt)?"("+Qt.map(Aa).join(", ")+")":"("+Aa(Qt.type)+"...)"})).join(" | "),Vt=[],ma=1;ma<o.length;ma++){var $t=c.parse(o[ma],1+Vt.length);if(!$t)return null;Vt.push(Aa($t.type))}c.error("Expected arguments of type "+Mt+", but found ("+Vt.join(", ")+") instead.")}return null},Zr.register=function(o,c){for(var _ in Zr.definitions=c,c)o[_]=Zr};var Rl=function(o,c,_){this.type=yt,this.locale=_,this.caseSensitive=o,this.diacriticSensitive=c};function os(o,c){o[0]=Math.min(o[0],c[0]),o[1]=Math.min(o[1],c[1]),o[2]=Math.max(o[2],c[0]),o[3]=Math.max(o[3],c[1])}function zc(o,c){return!(o[0]<=c[0]||o[2]>=c[2]||o[1]<=c[1]||o[3]>=c[3])}function yI(o,c){var _=(180+o[0])/360,b=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,w=Math.pow(2,c.z);return[Math.round(_*w*8192),Math.round(b*w*8192)]}function bI(o,c,_){return c[1]>o[1]!=_[1]>o[1]&&o[0]<(_[0]-c[0])*(o[1]-c[1])/(_[1]-c[1])+c[0]}function Jp(o,c){for(var _,b,w,S,M,O,V,H=!1,j=0,ae=c.length;j<ae;j++)for(var he=c[j],ye=0,Le=he.length;ye<Le-1;ye++){if((S=(_=o)[0]-(b=he[ye])[0])*(V=_[1]-(w=he[ye+1])[1])-(O=_[0]-w[0])*(M=_[1]-b[1])==0&&S*O<=0&&M*V<=0)return!1;bI(o,he[ye],he[ye+1])&&(H=!H)}return H}function vI(o,c){for(var _=0;_<c.length;_++)if(Jp(o,c[_]))return!0;return!1}function Fb(o,c,_,b){var w=b[0]-_[0],S=b[1]-_[1],M=(o[0]-_[0])*S-w*(o[1]-_[1]),O=(c[0]-_[0])*S-w*(c[1]-_[1]);return M>0&&O<0||M<0&&O>0}function xI(o,c,_){for(var b=0,w=_;b<w.length;b+=1)for(var S=w[b],M=0;M<S.length-1;++M)if((ae=[(j=S[M+1])[0]-(H=S[M])[0],j[1]-H[1]])[0]*(he=[(V=c)[0]-(O=o)[0],V[1]-O[1]])[1]-ae[1]*he[0]!=0&&Fb(O,V,H,j)&&Fb(H,j,O,V))return!0;var O,V,H,j,ae,he;return!1}function Nb(o,c){for(var _=0;_<o.length;++_)if(!Jp(o[_],c))return!1;for(var b=0;b<o.length-1;++b)if(xI(o[b],o[b+1],c))return!1;return!0}function Bb(o,c){for(var _=0;_<c.length;_++)if(Nb(o,c[_]))return!0;return!1}function ch(o,c,_){for(var b=[],w=0;w<o.length;w++){for(var S=[],M=0;M<o[w].length;M++){var O=yI(o[w][M],_);os(c,O),S.push(O)}b.push(S)}return b}function Qp(o,c,_){for(var b=[],w=0;w<o.length;w++){var S=ch(o[w],c,_);b.push(S)}return b}function k_(o,c,_,b){if(o[0]<_[0]||o[0]>_[2]){var w=.5*b,S=o[0]-_[0]>w?-b:_[0]-o[0]>w?b:0;S===0&&(S=o[0]-_[2]>w?-b:_[2]-o[0]>w?b:0),o[0]+=S}os(c,o)}function Db(o,c,_,b){for(var w=8192*Math.pow(2,b.z),S=[8192*b.x,8192*b.y],M=[],O=0,V=o;O<V.length;O+=1)for(var H=0,j=V[O];H<j.length;H+=1){var ae=j[H],he=[ae.x+S[0],ae.y+S[1]];k_(he,c,_,w),M.push(he)}return M}function ff(o,c,_,b){for(var w,S=8192*Math.pow(2,b.z),M=[8192*b.x,8192*b.y],O=[],V=0,H=o;V<H.length;V+=1){for(var j=[],ae=0,he=H[V];ae<he.length;ae+=1){var ye=he[ae],Le=[ye.x+M[0],ye.y+M[1]];os(c,Le),j.push(Le)}O.push(j)}if(c[2]-c[0]<=S/2){(w=c)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(var Pe=0,qe=O;Pe<qe.length;Pe+=1)for(var Be=0,et=qe[Pe];Be<et.length;Be+=1)k_(et[Be],c,_,S)}return O}Rl.parse=function(o,c){if(o.length!==2)return c.error("Expected one argument.");var _=o[1];if(typeof _!="object"||Array.isArray(_))return c.error("Collator options argument must be an object.");var b=c.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,Ut);if(!b)return null;var w=c.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,Ut);if(!w)return null;var S=null;return _.locale&&!(S=c.parse(_.locale,1,jt))?null:new Rl(b,w,S)},Rl.prototype.evaluate=function(o){return new Vr(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)},Rl.prototype.eachChild=function(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)},Rl.prototype.outputDefined=function(){return!1},Rl.prototype.serialize=function(){var o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]};var Lo=function(o,c){this.type=Ut,this.geojson=o,this.geometries=c};function Zu(o){if(o instanceof Zr&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Lo)return!1;var c=!0;return o.eachChild((function(_){c&&!Zu(_)&&(c=!1)})),c}function zu(o){if(o instanceof Zr&&o.name==="feature-state")return!1;var c=!0;return o.eachChild((function(_){c&&!zu(_)&&(c=!1)})),c}function Uc(o,c){if(o instanceof Zr&&c.indexOf(o.name)>=0)return!1;var _=!0;return o.eachChild((function(b){_&&!Uc(b,c)&&(_=!1)})),_}Lo.parse=function(o,c){if(o.length!==2)return c.error("'within' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(L_(o[1])){var _=o[1];if(_.type==="FeatureCollection")for(var b=0;b<_.features.length;++b){var w=_.features[b].geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new Lo(_,_.features[b].geometry)}else if(_.type==="Feature"){var S=_.geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new Lo(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new Lo(_,_)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Lo.prototype.evaluate=function(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return(function(c,_){var b=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],S=c.canonicalID();if(_.type==="Polygon"){var M=ch(_.coordinates,w,S),O=Db(c.geometry(),b,w,S);if(!zc(b,w))return!1;for(var V=0,H=O;V<H.length;V+=1)if(!Jp(H[V],M))return!1}if(_.type==="MultiPolygon"){var j=Qp(_.coordinates,w,S),ae=Db(c.geometry(),b,w,S);if(!zc(b,w))return!1;for(var he=0,ye=ae;he<ye.length;he+=1)if(!vI(ye[he],j))return!1}return!0})(o,this.geometries);if(o.geometryType()==="LineString")return(function(c,_){var b=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],S=c.canonicalID();if(_.type==="Polygon"){var M=ch(_.coordinates,w,S),O=ff(c.geometry(),b,w,S);if(!zc(b,w))return!1;for(var V=0,H=O;V<H.length;V+=1)if(!Nb(H[V],M))return!1}if(_.type==="MultiPolygon"){var j=Qp(_.coordinates,w,S),ae=ff(c.geometry(),b,w,S);if(!zc(b,w))return!1;for(var he=0,ye=ae;he<ye.length;he+=1)if(!Bb(ye[he],j))return!1}return!0})(o,this.geometries)}return!1},Lo.prototype.eachChild=function(){},Lo.prototype.outputDefined=function(){return!0},Lo.prototype.serialize=function(){return["within",this.geojson]};var Uu=function(o,c){this.type=c.type,this.name=o,this.boundExpression=c};Uu.parse=function(o,c){if(o.length!==2||typeof o[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");var _=o[1];return c.scope.has(_)?new Uu(_,c.scope.get(_)):c.error('Unknown variable "'+_+'". Make sure "'+_+'" has been bound in an enclosing "let" expression before using it.',1)},Uu.prototype.evaluate=function(o){return this.boundExpression.evaluate(o)},Uu.prototype.eachChild=function(){},Uu.prototype.outputDefined=function(){return!1},Uu.prototype.serialize=function(){return["var",this.name]};var Hu=function(o,c,_,b,w){c===void 0&&(c=[]),b===void 0&&(b=new Jt),w===void 0&&(w=[]),this.registry=o,this.path=c,this.key=c.map((function(S){return"["+S+"]"})).join(""),this.scope=b,this.errors=w,this.expectedType=_};function gf(o,c){for(var _,b=o.length-1,w=0,S=b,M=0;w<=S;)if((_=o[M=Math.floor((w+S)/2)])<=c){if(M===b||c<o[M+1])return M;w=M+1}else{if(!(_>c))throw new Er("Input is not a number.");S=M-1}return 0}Hu.prototype.parse=function(o,c,_,b,w){return w===void 0&&(w={}),c?this.concat(c,_,b)._parse(o,w):this._parse(o,w)},Hu.prototype._parse=function(o,c){function _(H,j,ae){return ae==="assert"?new xn(j,[H]):ae==="coerce"?new Mo(j,[H]):H}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var b=o[0];if(typeof b!="string")return this.error("Expression name must be a string, but found "+typeof b+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var w=this.registry[b];if(w){var S=w.parse(o,this);if(!S)return null;if(this.expectedType){var M=this.expectedType,O=S.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||O.kind!=="value")if(M.kind!=="color"&&M.kind!=="formatted"&&M.kind!=="resolvedImage"||O.kind!=="value"&&O.kind!=="string"){if(this.checkSubtype(M,O))return null}else S=_(S,M,c.typeAnnotation||"coerce");else S=_(S,M,c.typeAnnotation||"assert")}if(!(S instanceof ss)&&S.type.kind!=="resolvedImage"&&(function H(j){if(j instanceof Uu)return H(j.boundExpression);if(j instanceof Zr&&j.name==="error"||j instanceof Rl||j instanceof Lo)return!1;var ae=j instanceof Mo||j instanceof xn,he=!0;return j.eachChild((function(ye){he=ae?he&&H(ye):he&&ye instanceof ss})),!!he&&Zu(j)&&Uc(j,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])})(S)){var V=new iu;try{S=new ss(S.type,S.evaluate(V))}catch(H){return this.error(H.message),null}}return S}return this.error('Unknown expression "'+b+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof o+" instead.")},Hu.prototype.concat=function(o,c,_){var b=typeof o=="number"?this.path.concat(o):this.path,w=_?this.scope.concat(_):this.scope;return new Hu(this.registry,b,c||null,w,this.errors)},Hu.prototype.error=function(o){for(var c=[],_=arguments.length-1;_-- >0;)c[_]=arguments[_+1];var b=""+this.key+c.map((function(w){return"["+w+"]"})).join("");this.errors.push(new wt(b,o))},Hu.prototype.checkSubtype=function(o,c){var _=si(o,c);return _&&this.error(_),_};var Ws=function(o,c,_){this.type=o,this.input=c,this.labels=[],this.outputs=[];for(var b=0,w=_;b<w.length;b+=1){var S=w[b],M=S[1];this.labels.push(S[0]),this.outputs.push(M)}};function Jn(o,c,_){return o*(1-_)+c*_}Ws.parse=function(o,c){if(o.length-1<4)return c.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");var _=c.parse(o[1],1,mt);if(!_)return null;var b=[],w=null;c.expectedType&&c.expectedType.kind!=="value"&&(w=c.expectedType);for(var S=1;S<o.length;S+=2){var M=S===1?-1/0:o[S],O=o[S+1],V=S,H=S+1;if(typeof M!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(b.length&&b[b.length-1][0]>=M)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);var j=c.parse(O,H,w);if(!j)return null;w=w||j.type,b.push([M,j])}return new Ws(w,_,b)},Ws.prototype.evaluate=function(o){var c=this.labels,_=this.outputs;if(c.length===1)return _[0].evaluate(o);var b=this.input.evaluate(o);if(b<=c[0])return _[0].evaluate(o);var w=c.length;return b>=c[w-1]?_[w-1].evaluate(o):_[gf(c,b)].evaluate(o)},Ws.prototype.eachChild=function(o){o(this.input);for(var c=0,_=this.outputs;c<_.length;c+=1)o(_[c])},Ws.prototype.outputDefined=function(){return this.outputs.every((function(o){return o.outputDefined()}))},Ws.prototype.serialize=function(){for(var o=["step",this.input.serialize()],c=0;c<this.labels.length;c++)c>0&&o.push(this.labels[c]),o.push(this.outputs[c].serialize());return o};var dh=Object.freeze({__proto__:null,number:Jn,color:function(o,c,_){return new bi(Jn(o.r,c.r,_),Jn(o.g,c.g,_),Jn(o.b,c.b,_),Jn(o.a,c.a,_))},array:function(o,c,_){return o.map((function(b,w){return Jn(b,c[w],_)}))}}),Vb=6/29*3*(6/29),wI=Math.PI/180,CI=180/Math.PI;function ey(o){return o>.008856451679035631?Math.pow(o,1/3):o/Vb+4/29}function ty(o){return o>6/29?o*o*o:Vb*(o-4/29)}function ay(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function iy(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Zb(o){var c=iy(o.r),_=iy(o.g),b=iy(o.b),w=ey((.4124564*c+.3575761*_+.1804375*b)/.95047),S=ey((.2126729*c+.7151522*_+.072175*b)/1);return{l:116*S-16,a:500*(w-S),b:200*(S-ey((.0193339*c+.119192*_+.9503041*b)/1.08883)),alpha:o.a}}function zb(o){var c=(o.l+16)/116,_=isNaN(o.a)?c:c+o.a/500,b=isNaN(o.b)?c:c-o.b/200;return c=1*ty(c),_=.95047*ty(_),b=1.08883*ty(b),new bi(ay(3.2404542*_-1.5371385*c-.4985314*b),ay(-.969266*_+1.8760108*c+.041556*b),ay(.0556434*_-.2040259*c+1.0572252*b),o.alpha)}function II(o,c,_){var b=c-o;return o+_*(b>180||b<-180?b-360*Math.round(b/360):b)}var P_={forward:Zb,reverse:zb,interpolate:function(o,c,_){return{l:Jn(o.l,c.l,_),a:Jn(o.a,c.a,_),b:Jn(o.b,c.b,_),alpha:Jn(o.alpha,c.alpha,_)}}},G_={forward:function(o){var c=Zb(o),_=c.l,b=c.a,w=c.b,S=Math.atan2(w,b)*CI;return{h:S<0?S+360:S,c:Math.sqrt(b*b+w*w),l:_,alpha:o.a}},reverse:function(o){var c=o.h*wI,_=o.c;return zb({l:o.l,a:Math.cos(c)*_,b:Math.sin(c)*_,alpha:o.alpha})},interpolate:function(o,c,_){return{h:II(o.h,c.h,_),c:Jn(o.c,c.c,_),l:Jn(o.l,c.l,_),alpha:Jn(o.alpha,c.alpha,_)}}},Ub=Object.freeze({__proto__:null,lab:P_,hcl:G_}),zr=function(o,c,_,b,w){this.type=o,this.operator=c,this.interpolation=_,this.input=b,this.labels=[],this.outputs=[];for(var S=0,M=w;S<M.length;S+=1){var O=M[S],V=O[1];this.labels.push(O[0]),this.outputs.push(V)}};function ny(o,c,_,b){var w=b-_,S=o-_;return w===0?0:c===1?S/w:(Math.pow(c,S)-1)/(Math.pow(c,w)-1)}zr.interpolationFactor=function(o,c,_,b){var w=0;if(o.name==="exponential")w=ny(c,o.base,_,b);else if(o.name==="linear")w=ny(c,1,_,b);else if(o.name==="cubic-bezier"){var S=o.controlPoints;w=new u(S[0],S[1],S[2],S[3]).solve(ny(c,1,_,b))}return w},zr.parse=function(o,c){var _=o[0],b=o[1],w=o[2],S=o.slice(3);if(!Array.isArray(b)||b.length===0)return c.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){var M=b[1];if(typeof M!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:M}}else{if(b[0]!=="cubic-bezier")return c.error("Unknown interpolation type "+String(b[0]),1,0);var O=b.slice(1);if(O.length!==4||O.some((function(qe){return typeof qe!="number"||qe<0||qe>1})))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:O}}if(o.length-1<4)return c.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(!(w=c.parse(w,2,mt)))return null;var V=[],H=null;_==="interpolate-hcl"||_==="interpolate-lab"?H=Xt:c.expectedType&&c.expectedType.kind!=="value"&&(H=c.expectedType);for(var j=0;j<S.length;j+=2){var ae=S[j],he=S[j+1],ye=j+3,Le=j+4;if(typeof ae!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ye);if(V.length&&V[V.length-1][0]>=ae)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ye);var Pe=c.parse(he,Le,H);if(!Pe)return null;H=H||Pe.type,V.push([ae,Pe])}return H.kind==="number"||H.kind==="color"||H.kind==="array"&&H.itemType.kind==="number"&&typeof H.N=="number"?new zr(H,_,b,w,V):c.error("Type "+Aa(H)+" is not interpolatable.")},zr.prototype.evaluate=function(o){var c=this.labels,_=this.outputs;if(c.length===1)return _[0].evaluate(o);var b=this.input.evaluate(o);if(b<=c[0])return _[0].evaluate(o);var w=c.length;if(b>=c[w-1])return _[w-1].evaluate(o);var S=gf(c,b),M=zr.interpolationFactor(this.interpolation,b,c[S],c[S+1]),O=_[S].evaluate(o),V=_[S+1].evaluate(o);return this.operator==="interpolate"?dh[this.type.kind.toLowerCase()](O,V,M):this.operator==="interpolate-hcl"?G_.reverse(G_.interpolate(G_.forward(O),G_.forward(V),M)):P_.reverse(P_.interpolate(P_.forward(O),P_.forward(V),M))},zr.prototype.eachChild=function(o){o(this.input);for(var c=0,_=this.outputs;c<_.length;c+=1)o(_[c])},zr.prototype.outputDefined=function(){return this.outputs.every((function(o){return o.outputDefined()}))},zr.prototype.serialize=function(){var o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var c=[this.operator,o,this.input.serialize()],_=0;_<this.labels.length;_++)c.push(this.labels[_],this.outputs[_].serialize());return c};var Xu=function(o,c){this.type=o,this.args=c};Xu.parse=function(o,c){if(o.length<2)return c.error("Expectected at least one argument.");var _=null,b=c.expectedType;b&&b.kind!=="value"&&(_=b);for(var w=[],S=0,M=o.slice(1);S<M.length;S+=1){var O=c.parse(M[S],1+w.length,_,void 0,{typeAnnotation:"omit"});if(!O)return null;_=_||O.type,w.push(O)}var V=b&&w.some((function(H){return si(b,H.type)}));return new Xu(V?Me:_,w)},Xu.prototype.evaluate=function(o){for(var c,_=null,b=0,w=0,S=this.args;w<S.length&&(b++,(_=S[w].evaluate(o))&&_ instanceof xs&&!_.available&&(c||(c=_.name),_=null,b===this.args.length&&(_=c)),_===null);w+=1);return _},Xu.prototype.eachChild=function(o){this.args.forEach(o)},Xu.prototype.outputDefined=function(){return this.args.every((function(o){return o.outputDefined()}))},Xu.prototype.serialize=function(){var o=["coalesce"];return this.eachChild((function(c){o.push(c.serialize())})),o};var qu=function(o,c){this.type=c.type,this.bindings=[].concat(o),this.result=c};qu.prototype.evaluate=function(o){return this.result.evaluate(o)},qu.prototype.eachChild=function(o){for(var c=0,_=this.bindings;c<_.length;c+=1)o(_[c][1]);o(this.result)},qu.parse=function(o,c){if(o.length<4)return c.error("Expected at least 3 arguments, but found "+(o.length-1)+" instead.");for(var _=[],b=1;b<o.length-1;b+=2){var w=o[b];if(typeof w!="string")return c.error("Expected string, but found "+typeof w+" instead.",b);if(/[^a-zA-Z0-9_]/.test(w))return c.error("Variable names must contain only alphanumeric characters or '_'.",b);var S=c.parse(o[b+1],b+1);if(!S)return null;_.push([w,S])}var M=c.parse(o[o.length-1],o.length-1,c.expectedType,_);return M?new qu(_,M):null},qu.prototype.outputDefined=function(){return this.result.outputDefined()},qu.prototype.serialize=function(){for(var o=["let"],c=0,_=this.bindings;c<_.length;c+=1){var b=_[c];o.push(b[0],b[1].serialize())}return o.push(this.result.serialize()),o};var Hc=function(o,c,_){this.type=o,this.index=c,this.input=_};Hc.parse=function(o,c){if(o.length!==3)return c.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var _=c.parse(o[1],1,mt),b=c.parse(o[2],2,Ba(c.expectedType||Me));return _&&b?new Hc(b.type.itemType,_,b):null},Hc.prototype.evaluate=function(o){var c=this.index.evaluate(o),_=this.input.evaluate(o);if(c<0)throw new Er("Array index out of bounds: "+c+" < 0.");if(c>=_.length)throw new Er("Array index out of bounds: "+c+" > "+(_.length-1)+".");if(c!==Math.floor(c))throw new Er("Array index must be an integer, but found "+c+" instead.");return _[c]},Hc.prototype.eachChild=function(o){o(this.index),o(this.input)},Hc.prototype.outputDefined=function(){return!1},Hc.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Xc=function(o,c){this.type=Ut,this.needle=o,this.haystack=c};Xc.parse=function(o,c){if(o.length!==3)return c.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var _=c.parse(o[1],1,Me),b=c.parse(o[2],2,Me);return _&&b?an(_.type,[Ut,jt,mt,aa,Me])?new Xc(_,b):c.error("Expected first argument to be of type boolean, string, number or null, but found "+Aa(_.type)+" instead"):null},Xc.prototype.evaluate=function(o){var c=this.needle.evaluate(o),_=this.haystack.evaluate(o);if(!_)return!1;if(!ki(c,["boolean","string","number","null"]))throw new Er("Expected first argument to be of type boolean, string, number or null, but found "+Aa(Un(c))+" instead.");if(!ki(_,["string","array"]))throw new Er("Expected second argument to be of type array or string, but found "+Aa(Un(_))+" instead.");return _.indexOf(c)>=0},Xc.prototype.eachChild=function(o){o(this.needle),o(this.haystack)},Xc.prototype.outputDefined=function(){return!0},Xc.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Yu=function(o,c,_){this.type=mt,this.needle=o,this.haystack=c,this.fromIndex=_};Yu.parse=function(o,c){if(o.length<=2||o.length>=5)return c.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var _=c.parse(o[1],1,Me),b=c.parse(o[2],2,Me);if(!_||!b)return null;if(!an(_.type,[Ut,jt,mt,aa,Me]))return c.error("Expected first argument to be of type boolean, string, number or null, but found "+Aa(_.type)+" instead");if(o.length===4){var w=c.parse(o[3],3,mt);return w?new Yu(_,b,w):null}return new Yu(_,b)},Yu.prototype.evaluate=function(o){var c=this.needle.evaluate(o),_=this.haystack.evaluate(o);if(!ki(c,["boolean","string","number","null"]))throw new Er("Expected first argument to be of type boolean, string, number or null, but found "+Aa(Un(c))+" instead.");if(!ki(_,["string","array"]))throw new Er("Expected second argument to be of type array or string, but found "+Aa(Un(_))+" instead.");if(this.fromIndex){var b=this.fromIndex.evaluate(o);return _.indexOf(c,b)}return _.indexOf(c)},Yu.prototype.eachChild=function(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)},Yu.prototype.outputDefined=function(){return!1},Yu.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var qc=function(o,c,_,b,w,S){this.inputType=o,this.type=c,this.input=_,this.cases=b,this.outputs=w,this.otherwise=S};qc.parse=function(o,c){if(o.length<5)return c.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if(o.length%2!=1)return c.error("Expected an even number of arguments.");var _,b;c.expectedType&&c.expectedType.kind!=="value"&&(b=c.expectedType);for(var w={},S=[],M=2;M<o.length-1;M+=2){var O=o[M],V=o[M+1];Array.isArray(O)||(O=[O]);var H=c.concat(M);if(O.length===0)return H.error("Expected at least one branch label.");for(var j=0,ae=O;j<ae.length;j+=1){var he=ae[j];if(typeof he!="number"&&typeof he!="string")return H.error("Branch labels must be numbers or strings.");if(typeof he=="number"&&Math.abs(he)>Number.MAX_SAFE_INTEGER)return H.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof he=="number"&&Math.floor(he)!==he)return H.error("Numeric branch labels must be integer values.");if(_){if(H.checkSubtype(_,Un(he)))return null}else _=Un(he);if(w[String(he)]!==void 0)return H.error("Branch labels must be unique.");w[String(he)]=S.length}var ye=c.parse(V,M,b);if(!ye)return null;b=b||ye.type,S.push(ye)}var Le=c.parse(o[1],1,Me);if(!Le)return null;var Pe=c.parse(o[o.length-1],o.length-1,b);return Pe?Le.type.kind!=="value"&&c.concat(1).checkSubtype(_,Le.type)?null:new qc(_,b,Le,w,S,Pe):null},qc.prototype.evaluate=function(o){var c=this.input.evaluate(o);return(Un(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(o)},qc.prototype.eachChild=function(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)},qc.prototype.outputDefined=function(){return this.outputs.every((function(o){return o.outputDefined()}))&&this.otherwise.outputDefined()},qc.prototype.serialize=function(){for(var o=this,c=["match",this.input.serialize()],_=[],b={},w=0,S=Object.keys(this.cases).sort();w<S.length;w+=1){var M=S[w];(ae=b[this.cases[M]])===void 0?(b[this.cases[M]]=_.length,_.push([this.cases[M],[M]])):_[ae][1].push(M)}for(var O=function(ye){return o.inputType.kind==="number"?Number(ye):ye},V=0,H=_;V<H.length;V+=1){var j=H[V],ae=j[0],he=j[1];c.push(he.length===1?O(he[0]):he.map(O)),c.push(this.outputs[outputIndex$1].serialize())}return c.push(this.otherwise.serialize()),c};var Yc=function(o,c,_){this.type=o,this.branches=c,this.otherwise=_};Yc.parse=function(o,c){if(o.length<4)return c.error("Expected at least 3 arguments, but found only "+(o.length-1)+".");if(o.length%2!=0)return c.error("Expected an odd number of arguments.");var _;c.expectedType&&c.expectedType.kind!=="value"&&(_=c.expectedType);for(var b=[],w=1;w<o.length-1;w+=2){var S=c.parse(o[w],w,Ut);if(!S)return null;var M=c.parse(o[w+1],w+1,_);if(!M)return null;b.push([S,M]),_=_||M.type}var O=c.parse(o[o.length-1],o.length-1,_);return O?new Yc(_,b,O):null},Yc.prototype.evaluate=function(o){for(var c=0,_=this.branches;c<_.length;c+=1){var b=_[c],w=b[1];if(b[0].evaluate(o))return w.evaluate(o)}return this.otherwise.evaluate(o)},Yc.prototype.eachChild=function(o){for(var c=0,_=this.branches;c<_.length;c+=1){var b=_[c],w=b[1];o(b[0]),o(w)}o(this.otherwise)},Yc.prototype.outputDefined=function(){return this.branches.every((function(o){return o[1].outputDefined()}))&&this.otherwise.outputDefined()},Yc.prototype.serialize=function(){var o=["case"];return this.eachChild((function(c){o.push(c.serialize())})),o};var Ku=function(o,c,_,b){this.type=o,this.input=c,this.beginIndex=_,this.endIndex=b};function Hb(o,c){return o==="=="||o==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function Xb(o,c,_,b){return b.compare(c,_)===0}function Ji(o,c,_){var b=o!=="=="&&o!=="!=";return(function(){function w(S,M,O){this.type=Ut,this.lhs=S,this.rhs=M,this.collator=O,this.hasUntypedArgument=S.type.kind==="value"||M.type.kind==="value"}return w.parse=function(S,M){if(S.length!==3&&S.length!==4)return M.error("Expected two or three arguments.");var O=S[0],V=M.parse(S[1],1,Me);if(!V)return null;if(!Hb(O,V.type))return M.concat(1).error('"'+O+`" comparisons are not supported for type '`+Aa(V.type)+"'.");var H=M.parse(S[2],2,Me);if(!H)return null;if(!Hb(O,H.type))return M.concat(2).error('"'+O+`" comparisons are not supported for type '`+Aa(H.type)+"'.");if(V.type.kind!==H.type.kind&&V.type.kind!=="value"&&H.type.kind!=="value")return M.error("Cannot compare types '"+Aa(V.type)+"' and '"+Aa(H.type)+"'.");b&&(V.type.kind==="value"&&H.type.kind!=="value"?V=new xn(H.type,[V]):V.type.kind!=="value"&&H.type.kind==="value"&&(H=new xn(V.type,[H])));var j=null;if(S.length===4){if(V.type.kind!=="string"&&H.type.kind!=="string"&&V.type.kind!=="value"&&H.type.kind!=="value")return M.error("Cannot use collator to compare non-string types.");if(!(j=M.parse(S[3],3,yt)))return null}return new w(V,H,j)},w.prototype.evaluate=function(S){var M=this.lhs.evaluate(S),O=this.rhs.evaluate(S);if(b&&this.hasUntypedArgument){var V=Un(M),H=Un(O);if(V.kind!==H.kind||V.kind!=="string"&&V.kind!=="number")throw new Er('Expected arguments for "'+o+'" to be (string, string) or (number, number), but found ('+V.kind+", "+H.kind+") instead.")}if(this.collator&&!b&&this.hasUntypedArgument){var j=Un(M),ae=Un(O);if(j.kind!=="string"||ae.kind!=="string")return c(S,M,O)}return this.collator?_(S,M,O,this.collator.evaluate(S)):c(S,M,O)},w.prototype.eachChild=function(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)},w.prototype.outputDefined=function(){return!0},w.prototype.serialize=function(){var S=[o];return this.eachChild((function(M){S.push(M.serialize())})),S},w})()}Ku.parse=function(o,c){if(o.length<=2||o.length>=5)return c.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var _=c.parse(o[1],1,Me),b=c.parse(o[2],2,mt);if(!_||!b)return null;if(!an(_.type,[Ba(Me),jt,Me]))return c.error("Expected first argument to be of type array or string, but found "+Aa(_.type)+" instead");if(o.length===4){var w=c.parse(o[3],3,mt);return w?new Ku(_.type,_,b,w):null}return new Ku(_.type,_,b)},Ku.prototype.evaluate=function(o){var c=this.input.evaluate(o),_=this.beginIndex.evaluate(o);if(!ki(c,["string","array"]))throw new Er("Expected first argument to be of type array or string, but found "+Aa(Un(c))+" instead.");if(this.endIndex){var b=this.endIndex.evaluate(o);return c.slice(_,b)}return c.slice(_)},Ku.prototype.eachChild=function(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)},Ku.prototype.outputDefined=function(){return!1},Ku.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var SI=Ji("==",(function(o,c,_){return c===_}),Xb),pf=Ji("!=",(function(o,c,_){return c!==_}),(function(o,c,_,b){return!Xb(0,c,_,b)})),qb=Ji("<",(function(o,c,_){return c<_}),(function(o,c,_,b){return b.compare(c,_)<0})),Yb=Ji(">",(function(o,c,_){return c>_}),(function(o,c,_,b){return b.compare(c,_)>0})),Kb=Ji("<=",(function(o,c,_){return c<=_}),(function(o,c,_,b){return b.compare(c,_)<=0})),jb=Ji(">=",(function(o,c,_){return c>=_}),(function(o,c,_,b){return b.compare(c,_)>=0})),Kc=function(o,c,_,b,w){this.type=jt,this.number=o,this.locale=c,this.currency=_,this.minFractionDigits=b,this.maxFractionDigits=w};Kc.parse=function(o,c){if(o.length!==3)return c.error("Expected two arguments.");var _=c.parse(o[1],1,mt);if(!_)return null;var b=o[2];if(typeof b!="object"||Array.isArray(b))return c.error("NumberFormat options argument must be an object.");var w=null;if(b.locale&&!(w=c.parse(b.locale,1,jt)))return null;var S=null;if(b.currency&&!(S=c.parse(b.currency,1,jt)))return null;var M=null;if(b["min-fraction-digits"]&&!(M=c.parse(b["min-fraction-digits"],1,mt)))return null;var O=null;return b["max-fraction-digits"]&&!(O=c.parse(b["max-fraction-digits"],1,mt))?null:new Kc(_,w,S,M,O)},Kc.prototype.evaluate=function(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))},Kc.prototype.eachChild=function(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)},Kc.prototype.outputDefined=function(){return!1},Kc.prototype.serialize=function(){var o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]};var ju=function(o){this.type=mt,this.input=o};ju.parse=function(o,c){if(o.length!==2)return c.error("Expected 1 argument, but found "+(o.length-1)+" instead.");var _=c.parse(o[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?c.error("Expected argument of type string or array, but found "+Aa(_.type)+" instead."):new ju(_):null},ju.prototype.evaluate=function(o){var c=this.input.evaluate(o);if(typeof c=="string"||Array.isArray(c))return c.length;throw new Er("Expected value to be of type string or array, but found "+Aa(Un(c))+" instead.")},ju.prototype.eachChild=function(o){o(this.input)},ju.prototype.outputDefined=function(){return!1},ju.prototype.serialize=function(){var o=["length"];return this.eachChild((function(c){o.push(c.serialize())})),o};var jc={"==":SI,"!=":pf,">":Yb,"<":qb,">=":jb,"<=":Kb,array:xn,at:Hc,boolean:xn,case:Yc,coalesce:Xu,collator:Rl,format:il,image:uo,in:Xc,"index-of":Yu,interpolate:zr,"interpolate-hcl":zr,"interpolate-lab":zr,length:ju,let:qu,literal:ss,match:qc,number:xn,"number-format":Kc,object:xn,slice:Ku,step:Ws,string:xn,"to-boolean":Mo,"to-color":Mo,"to-number":Mo,"to-string":Mo,var:Uu,within:Lo};function $b(o,c){var _=c[0],b=c[1],w=c[2],S=c[3];_=_.evaluate(o),b=b.evaluate(o),w=w.evaluate(o);var M=S?S.evaluate(o):1,O=$p(_,b,w,M);if(O)throw new Er(O);return new bi(_/255*M,b/255*M,w/255*M,M)}function Jb(o,c){return o in c}function ry(o,c){var _=c[o];return _===void 0?null:_}function $c(o){return{type:o}}function Qb(o){return{result:"success",value:o}}function Jc(o){return{result:"error",value:o}}function Qc(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function ev(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function W_(o){return!!o.expression&&o.expression.interpolated}function on(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function yf(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function AI(o){return o}function hh(o,c,_){return o!==void 0?o:c!==void 0?c:_!==void 0?_:void 0}function tv(o,c,_,b,w){return hh(typeof _===w?b[_]:void 0,o.default,c.default)}function TI(o,c,_){if(on(_)!=="number")return hh(o.default,c.default);var b=o.stops.length;if(b===1||_<=o.stops[0][0])return o.stops[0][1];if(_>=o.stops[b-1][0])return o.stops[b-1][1];var w=gf(o.stops.map((function(S){return S[0]})),_);return o.stops[w][1]}function av(o,c,_){var b=o.base!==void 0?o.base:1;if(on(_)!=="number")return hh(o.default,c.default);var w=o.stops.length;if(w===1||_<=o.stops[0][0])return o.stops[0][1];if(_>=o.stops[w-1][0])return o.stops[w-1][1];var S=gf(o.stops.map((function(ae){return ae[0]})),_),M=(function(ae,he,ye,Le){var Pe=Le-ye,qe=ae-ye;return Pe===0?0:he===1?qe/Pe:(Math.pow(he,qe)-1)/(Math.pow(he,Pe)-1)})(_,b,o.stops[S][0],o.stops[S+1][0]),O=o.stops[S][1],V=o.stops[S+1][1],H=dh[c.type]||AI;if(o.colorSpace&&o.colorSpace!=="rgb"){var j=Ub[o.colorSpace];H=function(ae,he){return j.reverse(j.interpolate(j.forward(ae),j.forward(he),M))}}return typeof O.evaluate=="function"?{evaluate:function(){for(var ae=[],he=arguments.length;he--;)ae[he]=arguments[he];var ye=O.evaluate.apply(void 0,ae),Le=V.evaluate.apply(void 0,ae);if(ye!==void 0&&Le!==void 0)return H(ye,Le,M)}}:H(O,V,M)}function bf(o,c,_){return c.type==="color"?_=bi.parse(_):c.type==="formatted"?_=Tr.fromString(_.toString()):c.type==="resolvedImage"?_=xs.fromString(_.toString()):on(_)===c.type||c.type==="enum"&&c.values[_]||(_=void 0),hh(_,o.default,c.default)}Zr.register(jc,{error:[{kind:"error"},[jt],function(o,c){throw new Er(c[0].evaluate(o))}],typeof:[jt,[Me],function(o,c){return Aa(Un(c[0].evaluate(o)))}],"to-rgba":[Ba(mt,4),[Xt],function(o,c){return c[0].evaluate(o).toArray()}],rgb:[Xt,[mt,mt,mt],$b],rgba:[Xt,[mt,mt,mt,mt],$b],has:{type:Ut,overloads:[[[jt],function(o,c){return Jb(c[0].evaluate(o),o.properties())}],[[jt,Ot],function(o,c){var _=c[1];return Jb(c[0].evaluate(o),_.evaluate(o))}]]},get:{type:Me,overloads:[[[jt],function(o,c){return ry(c[0].evaluate(o),o.properties())}],[[jt,Ot],function(o,c){var _=c[1];return ry(c[0].evaluate(o),_.evaluate(o))}]]},"feature-state":[Me,[jt],function(o,c){return ry(c[0].evaluate(o),o.featureState||{})}],properties:[Ot,[],function(o){return o.properties()}],"geometry-type":[jt,[],function(o){return o.geometryType()}],id:[Me,[],function(o){return o.id()}],zoom:[mt,[],function(o){return o.globals.zoom}],"heatmap-density":[mt,[],function(o){return o.globals.heatmapDensity||0}],"line-progress":[mt,[],function(o){return o.globals.lineProgress||0}],accumulated:[Me,[],function(o){return o.globals.accumulated===void 0?null:o.globals.accumulated}],"+":[mt,$c(mt),function(o,c){for(var _=0,b=0,w=c;b<w.length;b+=1)_+=w[b].evaluate(o);return _}],"*":[mt,$c(mt),function(o,c){for(var _=1,b=0,w=c;b<w.length;b+=1)_*=w[b].evaluate(o);return _}],"-":{type:mt,overloads:[[[mt,mt],function(o,c){var _=c[1];return c[0].evaluate(o)-_.evaluate(o)}],[[mt],function(o,c){return-c[0].evaluate(o)}]]},"/":[mt,[mt,mt],function(o,c){var _=c[1];return c[0].evaluate(o)/_.evaluate(o)}],"%":[mt,[mt,mt],function(o,c){var _=c[1];return c[0].evaluate(o)%_.evaluate(o)}],ln2:[mt,[],function(){return Math.LN2}],pi:[mt,[],function(){return Math.PI}],e:[mt,[],function(){return Math.E}],"^":[mt,[mt,mt],function(o,c){var _=c[1];return Math.pow(c[0].evaluate(o),_.evaluate(o))}],sqrt:[mt,[mt],function(o,c){return Math.sqrt(c[0].evaluate(o))}],log10:[mt,[mt],function(o,c){return Math.log(c[0].evaluate(o))/Math.LN10}],ln:[mt,[mt],function(o,c){return Math.log(c[0].evaluate(o))}],log2:[mt,[mt],function(o,c){return Math.log(c[0].evaluate(o))/Math.LN2}],sin:[mt,[mt],function(o,c){return Math.sin(c[0].evaluate(o))}],cos:[mt,[mt],function(o,c){return Math.cos(c[0].evaluate(o))}],tan:[mt,[mt],function(o,c){return Math.tan(c[0].evaluate(o))}],asin:[mt,[mt],function(o,c){return Math.asin(c[0].evaluate(o))}],acos:[mt,[mt],function(o,c){return Math.acos(c[0].evaluate(o))}],atan:[mt,[mt],function(o,c){return Math.atan(c[0].evaluate(o))}],min:[mt,$c(mt),function(o,c){return Math.min.apply(Math,c.map((function(_){return _.evaluate(o)})))}],max:[mt,$c(mt),function(o,c){return Math.max.apply(Math,c.map((function(_){return _.evaluate(o)})))}],abs:[mt,[mt],function(o,c){return Math.abs(c[0].evaluate(o))}],round:[mt,[mt],function(o,c){var _=c[0].evaluate(o);return _<0?-Math.round(-_):Math.round(_)}],floor:[mt,[mt],function(o,c){return Math.floor(c[0].evaluate(o))}],ceil:[mt,[mt],function(o,c){return Math.ceil(c[0].evaluate(o))}],"filter-==":[Ut,[jt,Me],function(o,c){var _=c[0],b=c[1];return o.properties()[_.value]===b.value}],"filter-id-==":[Ut,[Me],function(o,c){var _=c[0];return o.id()===_.value}],"filter-type-==":[Ut,[jt],function(o,c){var _=c[0];return o.geometryType()===_.value}],"filter-<":[Ut,[jt,Me],function(o,c){var _=c[0],b=c[1],w=o.properties()[_.value],S=b.value;return typeof w==typeof S&&w<S}],"filter-id-<":[Ut,[Me],function(o,c){var _=c[0],b=o.id(),w=_.value;return typeof b==typeof w&&b<w}],"filter->":[Ut,[jt,Me],function(o,c){var _=c[0],b=c[1],w=o.properties()[_.value],S=b.value;return typeof w==typeof S&&w>S}],"filter-id->":[Ut,[Me],function(o,c){var _=c[0],b=o.id(),w=_.value;return typeof b==typeof w&&b>w}],"filter-<=":[Ut,[jt,Me],function(o,c){var _=c[0],b=c[1],w=o.properties()[_.value],S=b.value;return typeof w==typeof S&&w<=S}],"filter-id-<=":[Ut,[Me],function(o,c){var _=c[0],b=o.id(),w=_.value;return typeof b==typeof w&&b<=w}],"filter->=":[Ut,[jt,Me],function(o,c){var _=c[0],b=c[1],w=o.properties()[_.value],S=b.value;return typeof w==typeof S&&w>=S}],"filter-id->=":[Ut,[Me],function(o,c){var _=c[0],b=o.id(),w=_.value;return typeof b==typeof w&&b>=w}],"filter-has":[Ut,[Me],function(o,c){return c[0].value in o.properties()}],"filter-has-id":[Ut,[],function(o){return o.id()!==null&&o.id()!==void 0}],"filter-type-in":[Ut,[Ba(jt)],function(o,c){return c[0].value.indexOf(o.geometryType())>=0}],"filter-id-in":[Ut,[Ba(Me)],function(o,c){return c[0].value.indexOf(o.id())>=0}],"filter-in-small":[Ut,[jt,Ba(Me)],function(o,c){var _=c[0];return c[1].value.indexOf(o.properties()[_.value])>=0}],"filter-in-large":[Ut,[jt,Ba(Me)],function(o,c){var _=c[0],b=c[1];return(function(w,S,M,O){for(;M<=O;){var V=M+O>>1;if(S[V]===w)return!0;S[V]>w?O=V-1:M=V+1}return!1})(o.properties()[_.value],b.value,0,b.value.length-1)}],all:{type:Ut,overloads:[[[Ut,Ut],function(o,c){var _=c[1];return c[0].evaluate(o)&&_.evaluate(o)}],[$c(Ut),function(o,c){for(var _=0,b=c;_<b.length;_+=1)if(!b[_].evaluate(o))return!1;return!0}]]},any:{type:Ut,overloads:[[[Ut,Ut],function(o,c){var _=c[1];return c[0].evaluate(o)||_.evaluate(o)}],[$c(Ut),function(o,c){for(var _=0,b=c;_<b.length;_+=1)if(b[_].evaluate(o))return!0;return!1}]]},"!":[Ut,[Ut],function(o,c){return!c[0].evaluate(o)}],"is-supported-script":[Ut,[jt],function(o,c){var _=o.globals&&o.globals.isSupportedScript;return!_||_(c[0].evaluate(o))}],upcase:[jt,[jt],function(o,c){return c[0].evaluate(o).toUpperCase()}],downcase:[jt,[jt],function(o,c){return c[0].evaluate(o).toLowerCase()}],concat:[jt,$c(Me),function(o,c){return c.map((function(_){return R_(_.evaluate(o))})).join("")}],"resolved-locale":[jt,[yt],function(o,c){return c[0].evaluate(o).resolvedLocale()}]});var _h=function(o,c){this.expression=o,this._warningHistory={},this._evaluator=new iu,this._defaultValue=c?(function(_){return _.type==="color"&&yf(_.default)?new bi(0,0,0,0):_.type==="color"?bi.parse(_.default)||null:_.default===void 0?null:_.default})(c):null,this._enumValues=c&&c.type==="enum"?c.values:null};function O_(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in jc}function vf(o,c){var _=new Hu(jc,[],c?(function(w){var S={color:Xt,string:jt,number:mt,enum:jt,boolean:Ut,formatted:Yt,resolvedImage:fa};return w.type==="array"?Ba(S[w.value]||Me,w.length):S[w.type]})(c):void 0),b=_.parse(o,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return b?Qb(new _h(b,c)):Jc(_.errors)}_h.prototype.evaluateWithoutErrorHandling=function(o,c,_,b,w,S){return this._evaluator.globals=o,this._evaluator.feature=c,this._evaluator.featureState=_,this._evaluator.canonical=b,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=S,this.expression.evaluate(this._evaluator)},_h.prototype.evaluate=function(o,c,_,b,w,S){this._evaluator.globals=o,this._evaluator.feature=c||null,this._evaluator.featureState=_||null,this._evaluator.canonical=b,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=S||null;try{var M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new Er("Expected value to be one of "+Object.keys(this._enumValues).map((function(O){return JSON.stringify(O)})).join(", ")+", but found "+JSON.stringify(M)+" instead.");return M}catch(O){return this._warningHistory[O.message]||(this._warningHistory[O.message]=!0,typeof console<"u"&&console.warn(O.message)),this._defaultValue}};var F_=function(o,c){this.kind=o,this._styleExpression=c,this.isStateDependent=o!=="constant"&&!zu(c.expression)};F_.prototype.evaluateWithoutErrorHandling=function(o,c,_,b,w,S){return this._styleExpression.evaluateWithoutErrorHandling(o,c,_,b,w,S)},F_.prototype.evaluate=function(o,c,_,b,w,S){return this._styleExpression.evaluate(o,c,_,b,w,S)};var mh=function(o,c,_,b){this.kind=o,this.zoomStops=_,this._styleExpression=c,this.isStateDependent=o!=="camera"&&!zu(c.expression),this.interpolationType=b};function iv(o,c){if((o=vf(o,c)).result==="error")return o;var _=o.value.expression,b=Zu(_);if(!b&&!Qc(c))return Jc([new wt("","data expressions not supported")]);var w=Uc(_,["zoom"]);if(!w&&!ev(c))return Jc([new wt("","zoom expressions not supported")]);var S=(function M(O){var V=null;if(O instanceof qu)V=M(O.result);else if(O instanceof Xu)for(var H=0,j=O.args;H<j.length&&!(V=M(j[H]));H+=1);else(O instanceof Ws||O instanceof zr)&&O.input instanceof Zr&&O.input.name==="zoom"&&(V=O);return V instanceof wt||O.eachChild((function(ae){var he=M(ae);he instanceof wt?V=he:!V&&he?V=new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):V&&he&&V!==he&&(V=new wt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),V})(_);return S||w?S instanceof wt?Jc([S]):S instanceof zr&&!W_(c)?Jc([new wt("",'"interpolate" expressions cannot be used with this property')]):Qb(S?new mh(b?"camera":"composite",o.value,S.labels,S instanceof zr?S.interpolation:void 0):new F_(b?"constant":"source",o.value)):Jc([new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}mh.prototype.evaluateWithoutErrorHandling=function(o,c,_,b,w,S){return this._styleExpression.evaluateWithoutErrorHandling(o,c,_,b,w,S)},mh.prototype.evaluate=function(o,c,_,b,w,S){return this._styleExpression.evaluate(o,c,_,b,w,S)},mh.prototype.interpolationFactor=function(o,c,_){return this.interpolationType?zr.interpolationFactor(this.interpolationType,o,c,_):0};var fh=function(o,c){this._parameters=o,this._specification=c,vt(this,(function _(b,w){var S,M,O,V=w.type==="color",H=b.stops&&typeof b.stops[0][0]=="object",j=H||!(H||b.property!==void 0),ae=b.type||(W_(w)?"exponential":"interval");if(V&&((b=vt({},b)).stops&&(b.stops=b.stops.map((function($t){return[$t[0],bi.parse($t[1])]}))),b.default=bi.parse(b.default?b.default:w.default)),b.colorSpace&&b.colorSpace!=="rgb"&&!Ub[b.colorSpace])throw new Error("Unknown color space: "+b.colorSpace);if(ae==="exponential")S=av;else if(ae==="interval")S=TI;else if(ae==="categorical"){S=tv,M=Object.create(null);for(var he=0,ye=b.stops;he<ye.length;he+=1){var Le=ye[he];M[Le[0]]=Le[1]}O=typeof b.stops[0][0]}else{if(ae!=="identity")throw new Error('Unknown function type "'+ae+'"');S=bf}if(H){for(var Pe={},qe=[],Be=0;Be<b.stops.length;Be++){var et=b.stops[Be],it=et[0].zoom;Pe[it]===void 0&&(Pe[it]={zoom:it,type:b.type,property:b.property,default:b.default,stops:[]},qe.push(it)),Pe[it].stops.push([et[0].value,et[1]])}for(var nt=[],lt=0,pt=qe;lt<pt.length;lt+=1){var Mt=pt[lt];nt.push([Pe[Mt].zoom,_(Pe[Mt],w)])}var Vt={name:"linear"};return{kind:"composite",interpolationType:Vt,interpolationFactor:zr.interpolationFactor.bind(void 0,Vt),zoomStops:nt.map((function($t){return $t[0]})),evaluate:function($t,ba){var Qt=$t.zoom;return av({stops:nt,base:b.base},w,Qt).evaluate(Qt,ba)}}}if(j){var ma=ae==="exponential"?{name:"exponential",base:b.base!==void 0?b.base:1}:null;return{kind:"camera",interpolationType:ma,interpolationFactor:zr.interpolationFactor.bind(void 0,ma),zoomStops:b.stops.map((function($t){return $t[0]})),evaluate:function($t){return S(b,w,$t.zoom,M,O)}}}return{kind:"source",evaluate:function($t,ba){var Qt=ba&&ba.properties?ba.properties[b.property]:void 0;return Qt===void 0?hh(b.default,w.default):S(b,w,Qt,M,O)}}})(this._parameters,this._specification))};function nl(o){var c=o.key,_=o.value,b=o.valueSpec||{},w=o.objectElementValidators||{},S=o.style,M=o.styleSpec,O=[],V=on(_);if(V!=="object")return[new Ae(c,_,"object expected, "+V+" found")];for(var H in _){var j=H.split(".")[0],ae=b[j]||b["*"],he=void 0;if(w[j])he=w[j];else if(b[j])he=mi;else if(w["*"])he=w["*"];else{if(!b["*"]){O.push(new Ae(c,_[H],'unknown property "'+H+'"'));continue}he=mi}O=O.concat(he({key:(c&&c+".")+H,value:_[H],valueSpec:ae,style:S,styleSpec:M,object:_,objectKey:H},_))}for(var ye in b)w[ye]||b[ye].required&&b[ye].default===void 0&&_[ye]===void 0&&O.push(new Ae(c,_,'missing required property "'+ye+'"'));return O}function nv(o){var c=o.value,_=o.valueSpec,b=o.style,w=o.styleSpec,S=o.key,M=o.arrayElementValidator||mi;if(on(c)!=="array")return[new Ae(S,c,"array expected, "+on(c)+" found")];if(_.length&&c.length!==_.length)return[new Ae(S,c,"array length "+_.length+" expected, length "+c.length+" found")];if(_["min-length"]&&c.length<_["min-length"])return[new Ae(S,c,"array length at least "+_["min-length"]+" expected, length "+c.length+" found")];var O={type:_.value,values:_.values};w.$version<7&&(O.function=_.function),on(_.value)==="object"&&(O=_.value);for(var V=[],H=0;H<c.length;H++)V=V.concat(M({array:c,arrayIndex:H,value:c[H],valueSpec:O,style:b,styleSpec:w,key:S+"["+H+"]"}));return V}function rv(o){var c=o.key,_=o.value,b=o.valueSpec,w=on(_);return w==="number"&&_!=_&&(w="NaN"),w!=="number"?[new Ae(c,_,"number expected, "+w+" found")]:"minimum"in b&&_<b.minimum?[new Ae(c,_,_+" is less than the minimum value "+b.minimum)]:"maximum"in b&&_>b.maximum?[new Ae(c,_,_+" is greater than the maximum value "+b.maximum)]:[]}function sv(o){var c,_,b,w=o.valueSpec,S=At(o.value.type),M={},O=S!=="categorical"&&o.value.property===void 0,V=!O,H=on(o.value.stops)==="array"&&on(o.value.stops[0])==="array"&&on(o.value.stops[0][0])==="object",j=nl({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ye){if(S==="identity")return[new Ae(ye.key,ye.value,'identity function may not have a "stops" property')];var Le=[],Pe=ye.value;return Le=Le.concat(nv({key:ye.key,value:Pe,valueSpec:ye.valueSpec,style:ye.style,styleSpec:ye.styleSpec,arrayElementValidator:ae})),on(Pe)==="array"&&Pe.length===0&&Le.push(new Ae(ye.key,Pe,"array must have at least one stop")),Le},default:function(ye){return mi({key:ye.key,value:ye.value,valueSpec:w,style:ye.style,styleSpec:ye.styleSpec})}}});return S==="identity"&&O&&j.push(new Ae(o.key,o.value,'missing required property "property"')),S==="identity"||o.value.stops||j.push(new Ae(o.key,o.value,'missing required property "stops"')),S==="exponential"&&o.valueSpec.expression&&!W_(o.valueSpec)&&j.push(new Ae(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(V&&!Qc(o.valueSpec)?j.push(new Ae(o.key,o.value,"property functions not supported")):O&&!ev(o.valueSpec)&&j.push(new Ae(o.key,o.value,"zoom functions not supported"))),S!=="categorical"&&!H||o.value.property!==void 0||j.push(new Ae(o.key,o.value,'"property" property is required')),j;function ae(ye){var Le=[],Pe=ye.value,qe=ye.key;if(on(Pe)!=="array")return[new Ae(qe,Pe,"array expected, "+on(Pe)+" found")];if(Pe.length!==2)return[new Ae(qe,Pe,"array length 2 expected, length "+Pe.length+" found")];if(H){if(on(Pe[0])!=="object")return[new Ae(qe,Pe,"object expected, "+on(Pe[0])+" found")];if(Pe[0].zoom===void 0)return[new Ae(qe,Pe,"object stop key must have zoom")];if(Pe[0].value===void 0)return[new Ae(qe,Pe,"object stop key must have value")];if(b&&b>At(Pe[0].zoom))return[new Ae(qe,Pe[0].zoom,"stop zoom values must appear in ascending order")];At(Pe[0].zoom)!==b&&(b=At(Pe[0].zoom),_=void 0,M={}),Le=Le.concat(nl({key:qe+"[0]",value:Pe[0],valueSpec:{zoom:{}},style:ye.style,styleSpec:ye.styleSpec,objectElementValidators:{zoom:rv,value:he}}))}else Le=Le.concat(he({key:qe+"[0]",value:Pe[0],style:ye.style,styleSpec:ye.styleSpec},Pe));return O_(ct(Pe[1]))?Le.concat([new Ae(qe+"[1]",Pe[1],"expressions are not allowed in function stops.")]):Le.concat(mi({key:qe+"[1]",value:Pe[1],valueSpec:w,style:ye.style,styleSpec:ye.styleSpec}))}function he(ye,Le){var Pe=on(ye.value),qe=At(ye.value),Be=ye.value!==null?ye.value:Le;if(c){if(Pe!==c)return[new Ae(ye.key,Be,Pe+" stop domain type must match previous stop domain type "+c)]}else c=Pe;if(Pe!=="number"&&Pe!=="string"&&Pe!=="boolean")return[new Ae(ye.key,Be,"stop domain value must be a number, string, or boolean")];if(Pe!=="number"&&S!=="categorical"){var et="number expected, "+Pe+" found";return Qc(w)&&S===void 0&&(et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ae(ye.key,Be,et)]}return S!=="categorical"||Pe!=="number"||isFinite(qe)&&Math.floor(qe)===qe?S!=="categorical"&&Pe==="number"&&_!==void 0&&qe<_?[new Ae(ye.key,Be,"stop domain values must appear in ascending order")]:(_=qe,S==="categorical"&&qe in M?[new Ae(ye.key,Be,"stop domain values must be unique")]:(M[qe]=!0,[])):[new Ae(ye.key,Be,"integer expected, found "+qe)]}}function ed(o){var c=(o.expressionContext==="property"?iv:vf)(ct(o.value),o.valueSpec);if(c.result==="error")return c.value.map((function(b){return new Ae(""+o.key+b.key,o.value,b.message)}));var _=c.value.expression||c.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!_.outputDefined())return[new Ae(o.key,o.value,'Invalid data expression for "'+o.propertyKey+'". Output values must be contained as literals within the expression.')];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!zu(_))return[new Ae(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!zu(_))return[new Ae(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Uc(_,["zoom","feature-state"]))return[new Ae(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Zu(_))return[new Ae(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function N_(o){var c=o.key,_=o.value,b=o.valueSpec,w=[];return Array.isArray(b.values)?b.values.indexOf(At(_))===-1&&w.push(new Ae(c,_,"expected one of ["+b.values.join(", ")+"], "+JSON.stringify(_)+" found")):Object.keys(b.values).indexOf(At(_))===-1&&w.push(new Ae(c,_,"expected one of ["+Object.keys(b.values).join(", ")+"], "+JSON.stringify(_)+" found")),w}function xf(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(var c=0,_=o.slice(1);c<_.length;c+=1){var b=_[c];if(!xf(b)&&typeof b!="boolean")return!1}return!0;default:return!0}}fh.deserialize=function(o){return new fh(o._parameters,o._specification)},fh.serialize=function(o){return{_parameters:o._parameters,_specification:o._specification}};var sy={type:"boolean",default:!1};function wf(o){if(o==null)return{filter:function(){return!0},needGeometry:!1};xf(o)||(o=Cf(o));var c=vf(o,sy);if(c.result==="error")throw new Error(c.value.map((function(_){return _.key+": "+_.message})).join(", "));return{filter:function(_,b,w){return c.value.evaluate(_,b,{},w)},needGeometry:(function _(b){if(!Array.isArray(b))return!1;if(b[0]==="within")return!0;for(var w=1;w<b.length;w++)if(_(b[w]))return!0;return!1})(o)}}function EI(o,c){return o<c?-1:o>c?1:0}function Cf(o){if(!o)return!0;var c,_=o[0];return o.length<=1?_!=="any":_==="=="?oy(o[1],o[2],"=="):_==="!="?If(oy(o[1],o[2],"==")):_==="<"||_===">"||_==="<="||_===">="?oy(o[1],o[2],_):_==="any"?(c=o.slice(1),["any"].concat(c.map(Cf))):_==="all"?["all"].concat(o.slice(1).map(Cf)):_==="none"?["all"].concat(o.slice(1).map(Cf).map(If)):_==="in"?ov(o[1],o.slice(2)):_==="!in"?If(ov(o[1],o.slice(2))):_==="has"?lv(o[1]):_==="!has"?If(lv(o[1])):_!=="within"||o}function oy(o,c,_){switch(o){case"$type":return["filter-type-"+_,c];case"$id":return["filter-id-"+_,c];default:return["filter-"+_,o,c]}}function ov(o,c){if(c.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some((function(_){return typeof _!=typeof c[0]}))?["filter-in-large",o,["literal",c.sort(EI)]]:["filter-in-small",o,["literal",c]]}}function lv(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function If(o){return["!",o]}function ly(o){return xf(ct(o.value))?ed(vt({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):(function c(_){var b=_.value,w=_.key;if(on(b)!=="array")return[new Ae(w,b,"array expected, "+on(b)+" found")];var S,M=_.styleSpec,O=[];if(b.length<1)return[new Ae(w,b,"filter array must have at least 1 element")];switch(O=O.concat(N_({key:w+"[0]",value:b[0],valueSpec:M.filter_operator,style:_.style,styleSpec:_.styleSpec})),At(b[0])){case"<":case"<=":case">":case">=":b.length>=2&&At(b[1])==="$type"&&O.push(new Ae(w,b,'"$type" cannot be use with operator "'+b[0]+'"'));case"==":case"!=":b.length!==3&&O.push(new Ae(w,b,'filter array for operator "'+b[0]+'" must have 3 elements'));case"in":case"!in":b.length>=2&&(S=on(b[1]))!=="string"&&O.push(new Ae(w+"[1]",b[1],"string expected, "+S+" found"));for(var V=2;V<b.length;V++)S=on(b[V]),At(b[1])==="$type"?O=O.concat(N_({key:w+"["+V+"]",value:b[V],valueSpec:M.geometry_type,style:_.style,styleSpec:_.styleSpec})):S!=="string"&&S!=="number"&&S!=="boolean"&&O.push(new Ae(w+"["+V+"]",b[V],"string, number, or boolean expected, "+S+" found"));break;case"any":case"all":case"none":for(var H=1;H<b.length;H++)O=O.concat(c({key:w+"["+H+"]",value:b[H],style:_.style,styleSpec:_.styleSpec}));break;case"has":case"!has":S=on(b[1]),b.length!==2?O.push(new Ae(w,b,'filter array for "'+b[0]+'" operator must have 2 elements')):S!=="string"&&O.push(new Ae(w+"[1]",b[1],"string expected, "+S+" found"));break;case"within":S=on(b[1]),b.length!==2?O.push(new Ae(w,b,'filter array for "'+b[0]+'" operator must have 2 elements')):S!=="object"&&O.push(new Ae(w+"[1]",b[1],"object expected, "+S+" found"))}return O})(o)}function uy(o,c){var _=o.key,b=o.style,w=o.styleSpec,S=o.value,M=o.objectKey,O=w[c+"_"+o.layerType];if(!O)return[];var V=M.match(/^(.*)-transition$/);if(c==="paint"&&V&&O[V[1]]&&O[V[1]].transition)return mi({key:_,value:S,valueSpec:w.transition,style:b,styleSpec:w});var H,j=o.valueSpec||O[M];if(!j)return[new Ae(_,S,'unknown property "'+M+'"')];if(on(S)==="string"&&Qc(j)&&!j.tokens&&(H=/^{([^}]+)}$/.exec(S)))return[new Ae(_,S,'"'+M+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(H[1])+" }`.")];var ae=[];return o.layerType==="symbol"&&(M==="text-field"&&b&&!b.glyphs&&ae.push(new Ae(_,S,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&yf(ct(S))&&At(S.type)==="identity"&&ae.push(new Ae(_,S,'"text-font" does not support identity functions'))),ae.concat(mi({key:o.key,value:S,valueSpec:j,style:b,styleSpec:w,expressionContext:"property",propertyType:c,propertyKey:M}))}function cy(o){return uy(o,"paint")}function B_(o){return uy(o,"layout")}function uv(o){var c=[],_=o.value,b=o.key,w=o.style,S=o.styleSpec;_.type||_.ref||c.push(new Ae(b,_,'either "type" or "ref" is required'));var M,O=At(_.type),V=At(_.ref);if(_.id)for(var H=At(_.id),j=0;j<o.arrayIndex;j++){var ae=w.layers[j];At(ae.id)===H&&c.push(new Ae(b,_.id,'duplicate layer id "'+_.id+'", previously used at line '+ae.id.__line__))}if("ref"in _)["type","source","source-layer","filter","layout"].forEach((function(Le){Le in _&&c.push(new Ae(b,_[Le],'"'+Le+'" is prohibited for ref layers'))})),w.layers.forEach((function(Le){At(Le.id)===V&&(M=Le)})),M?M.ref?c.push(new Ae(b,_.ref,"ref cannot reference another ref layer")):O=At(M.type):c.push(new Ae(b,_.ref,'ref layer "'+V+'" not found'));else if(O!=="background")if(_.source){var he=w.sources&&w.sources[_.source],ye=he&&At(he.type);he?ye==="vector"&&O==="raster"?c.push(new Ae(b,_.source,'layer "'+_.id+'" requires a raster source')):ye==="raster"&&O!=="raster"?c.push(new Ae(b,_.source,'layer "'+_.id+'" requires a vector source')):ye!=="vector"||_["source-layer"]?ye==="raster-dem"&&O!=="hillshade"?c.push(new Ae(b,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):O!=="line"||!_.paint||!_.paint["line-gradient"]||ye==="geojson"&&he.lineMetrics||c.push(new Ae(b,_,'layer "'+_.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):c.push(new Ae(b,_,'layer "'+_.id+'" must specify a "source-layer"')):c.push(new Ae(b,_.source,'source "'+_.source+'" not found'))}else c.push(new Ae(b,_,'missing required property "source"'));return c=c.concat(nl({key:b,value:_,valueSpec:S.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return mi({key:b+".type",value:_.type,valueSpec:S.layer.type,style:o.style,styleSpec:o.styleSpec,object:_,objectKey:"type"})},filter:ly,layout:function(Le){return nl({layer:_,key:Le.key,value:Le.value,style:Le.style,styleSpec:Le.styleSpec,objectElementValidators:{"*":function(Pe){return B_(vt({layerType:O},Pe))}}})},paint:function(Le){return nl({layer:_,key:Le.key,value:Le.value,style:Le.style,styleSpec:Le.styleSpec,objectElementValidators:{"*":function(Pe){return cy(vt({layerType:O},Pe))}}})}}}))}function td(o){var c=o.value,_=o.key,b=on(c);return b!=="string"?[new Ae(_,c,"string expected, "+b+" found")]:[]}var wn={promoteId:function(o){var c=o.key,_=o.value;if(on(_)==="string")return td({key:c,value:_});var b=[];for(var w in _)b.push.apply(b,td({key:c+"."+w,value:_[w]}));return b}};function Sf(o){var c=o.value,_=o.key,b=o.styleSpec,w=o.style;if(!c.type)return[new Ae(_,c,'"type" is required')];var S,M=At(c.type);switch(M){case"vector":case"raster":case"raster-dem":return nl({key:_,value:c,valueSpec:b["source_"+M.replace("-","_")],style:o.style,styleSpec:b,objectElementValidators:wn});case"geojson":if(S=nl({key:_,value:c,valueSpec:b.source_geojson,style:w,styleSpec:b,objectElementValidators:wn}),c.cluster)for(var O in c.clusterProperties){var V=c.clusterProperties[O],H=V[0],j=typeof H=="string"?[H,["accumulated"],["get",O]]:H;S.push.apply(S,ed({key:_+"."+O+".map",value:V[1],expressionContext:"cluster-map"})),S.push.apply(S,ed({key:_+"."+O+".reduce",value:j,expressionContext:"cluster-reduce"}))}return S;case"video":return nl({key:_,value:c,valueSpec:b.source_video,style:w,styleSpec:b});case"image":return nl({key:_,value:c,valueSpec:b.source_image,style:w,styleSpec:b});case"canvas":return[new Ae(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return N_({key:_+".type",value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ad(o){var c=o.value,_=o.styleSpec,b=_.light,w=o.style,S=[],M=on(c);if(c===void 0)return S;if(M!=="object")return S.concat([new Ae("light",c,"object expected, "+M+" found")]);for(var O in c){var V=O.match(/^(.*)-transition$/);S=S.concat(V&&b[V[1]]&&b[V[1]].transition?mi({key:O,value:c[O],valueSpec:_.transition,style:w,styleSpec:_}):b[O]?mi({key:O,value:c[O],valueSpec:b[O],style:w,styleSpec:_}):[new Ae(O,c[O],'unknown property "'+O+'"')])}return S}var $u={"*":function(){return[]},array:nv,boolean:function(o){var c=o.value,_=o.key,b=on(c);return b!=="boolean"?[new Ae(_,c,"boolean expected, "+b+" found")]:[]},number:rv,color:function(o){var c=o.key,_=o.value,b=on(_);return b!=="string"?[new Ae(c,_,"color expected, "+b+" found")]:Ea(_)===null?[new Ae(c,_,'color expected, "'+_+'" found')]:[]},constants:tt,enum:N_,filter:ly,function:sv,layer:uv,object:nl,source:Sf,light:ad,string:td,formatted:function(o){return td(o).length===0?[]:ed(o)},resolvedImage:function(o){return td(o).length===0?[]:ed(o)}};function mi(o){var c=o.value,_=o.valueSpec,b=o.styleSpec;return _.expression&&yf(At(c))?sv(o):_.expression&&O_(ct(c))?ed(o):_.type&&$u[_.type]?$u[_.type](o):nl(vt({},o,{valueSpec:_.type?b[_.type]:_}))}function ln(o){var c=o.value,_=o.key,b=td(o);return b.length||(c.indexOf("{fontstack}")===-1&&b.push(new Ae(_,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&b.push(new Ae(_,c,'"glyphs" url must include a "{range}" token'))),b}function co(o,c){c===void 0&&(c=pe);var _=[];return _=_.concat(mi({key:"",value:o,valueSpec:c.$root,styleSpec:c,style:o,objectElementValidators:{glyphs:ln,"*":function(){return[]}}})),o.constants&&(_=_.concat(tt({key:"constants",value:o.constants}))),D_(_)}function D_(o){return[].concat(o).sort((function(c,_){return c.line-_.line}))}function gh(o){return function(){for(var c=[],_=arguments.length;_--;)c[_]=arguments[_];return D_(o.apply(this,c))}}co.source=gh(Sf),co.light=gh(ad),co.layer=gh(uv),co.filter=gh(ly),co.paintProperty=gh(cy),co.layoutProperty=gh(B_);var V_=co,MI=V_.light,LI=V_.paintProperty,Z_=V_.layoutProperty;function z_(o,c){var _=!1;if(c&&c.length)for(var b=0,w=c;b<w.length;b+=1)o.fire(new Xe(new Error(w[b].message))),_=!0;return _}var nu=rr;function rr(o,c,_){var b=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var w=new Int32Array(this.arrayBuffer);o=w[0],this.d=(c=w[1])+2*(_=w[2]);for(var S=0;S<this.d*this.d;S++){var M=w[3+S],O=w[3+S+1];b.push(M===O?null:w.subarray(M,O))}var V=w[3+b.length+1];this.keys=w.subarray(w[3+b.length],V),this.bboxes=w.subarray(V),this.insert=this._insertReadonly}else{this.d=c+2*_;for(var H=0;H<this.d*this.d;H++)b.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=o,this.padding=_,this.scale=c/o,this.uid=0;var j=_/c*o;this.min=-j,this.max=o+j}rr.prototype.insert=function(o,c,_,b,w){this._forEachCell(c,_,b,w,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(c),this.bboxes.push(_),this.bboxes.push(b),this.bboxes.push(w)},rr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},rr.prototype._insertCell=function(o,c,_,b,w,S){this.cells[w].push(S)},rr.prototype.query=function(o,c,_,b,w){var S=this.min,M=this.max;if(o<=S&&c<=S&&M<=_&&M<=b&&!w)return Array.prototype.slice.call(this.keys);var O=[];return this._forEachCell(o,c,_,b,this._queryCell,O,{},w),O},rr.prototype._queryCell=function(o,c,_,b,w,S,M,O){var V=this.cells[w];if(V!==null)for(var H=this.keys,j=this.bboxes,ae=0;ae<V.length;ae++){var he=V[ae];if(M[he]===void 0){var ye=4*he;(O?O(j[ye+0],j[ye+1],j[ye+2],j[ye+3]):o<=j[ye+2]&&c<=j[ye+3]&&_>=j[ye+0]&&b>=j[ye+1])?(M[he]=!0,S.push(H[he])):M[he]=!1}}},rr.prototype._forEachCell=function(o,c,_,b,w,S,M,O){for(var V=this._convertToCellCoord(o),H=this._convertToCellCoord(c),j=this._convertToCellCoord(_),ae=this._convertToCellCoord(b),he=V;he<=j;he++)for(var ye=H;ye<=ae;ye++){var Le=this.d*ye+he;if((!O||O(this._convertFromCellCoord(he),this._convertFromCellCoord(ye),this._convertFromCellCoord(he+1),this._convertFromCellCoord(ye+1)))&&w.call(this,o,c,_,b,Le,S,M,O))return}},rr.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},rr.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},rr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,c=3+this.cells.length+1+1,_=0,b=0;b<this.cells.length;b++)_+=this.cells[b].length;var w=new Int32Array(c+_+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;for(var S=c,M=0;M<o.length;M++){var O=o[M];w[3+M]=S,w.set(O,S),S+=O.length}return w[3+o.length]=S,w.set(this.keys,S),w[3+o.length+1]=S+=this.keys.length,w.set(this.bboxes,S),S+=this.bboxes.length,w.buffer};var U_=y.ImageData,cv=y.ImageBitmap,Qn={};function na(o,c,_){_===void 0&&(_={}),Object.defineProperty(c,"_classRegistryKey",{value:o,writeable:!1}),Qn[o]={klass:c,omit:_.omit||[],shallow:_.shallow||[]}}for(var Os in na("Object",Object),nu.serialize=function(o,c){var _=o.toArrayBuffer();return c&&c.push(_),{buffer:_}},nu.deserialize=function(o){return new nu(o.buffer)},na("Grid",nu),na("Color",bi),na("Error",Error),na("ResolvedImage",xs),na("StylePropertyFunction",fh),na("StyleExpression",_h,{omit:["_evaluator"]}),na("ZoomDependentExpression",mh),na("ZoomConstantExpression",F_),na("CompoundExpression",Zr,{omit:["_evaluate"]}),jc)jc[Os]._classRegistryKey||na("Expression_"+Os,jc[Os]);function Af(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function ph(o){return cv&&o instanceof cv}function rl(o,c){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp)return o;if(Af(o)||ph(o))return c&&c.push(o),o;if(ArrayBuffer.isView(o)){var _=o;return c&&c.push(_.buffer),_}if(o instanceof U_)return c&&c.push(o.data.buffer),o;if(Array.isArray(o)){for(var b=[],w=0,S=o;w<S.length;w+=1)b.push(rl(S[w],c));return b}if(typeof o=="object"){var M=o.constructor,O=M._classRegistryKey;if(!O)throw new Error("can't serialize object of unregistered class");var V=M.serialize?M.serialize(o,c):{};if(!M.serialize){for(var H in o)if(o.hasOwnProperty(H)&&!(Qn[O].omit.indexOf(H)>=0)){var j=o[H];V[H]=Qn[O].shallow.indexOf(H)>=0?j:rl(j,c)}o instanceof Error&&(V.message=o.message)}if(V.$name)throw new Error("$name property is reserved for worker serialization logic.");return O!=="Object"&&(V.$name=O),V}throw new Error("can't serialize object of type "+typeof o)}function Fs(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||Af(o)||ph(o)||ArrayBuffer.isView(o)||o instanceof U_)return o;if(Array.isArray(o))return o.map(Fs);if(typeof o=="object"){var c=o.$name||"Object",_=Qn[c].klass;if(!_)throw new Error("can't deserialize unregistered class "+c);if(_.deserialize)return _.deserialize(o);for(var b=Object.create(_.prototype),w=0,S=Object.keys(o);w<S.length;w+=1){var M=S[w];if(M!=="$name"){var O=o[M];b[M]=Qn[c].shallow.indexOf(M)>=0?O:Fs(O)}}return b}throw new Error("can't deserialize object of type "+typeof o)}var dy=function(){this.first=!0};dy.prototype.update=function(o,c){var _=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=c),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=_,!0))};var qt={"Latin-1 Supplement":function(o){return o>=128&&o<=255},Arabic:function(o){return o>=1536&&o<=1791},"Arabic Supplement":function(o){return o>=1872&&o<=1919},"Arabic Extended-A":function(o){return o>=2208&&o<=2303},"Hangul Jamo":function(o){return o>=4352&&o<=4607},"Unified Canadian Aboriginal Syllabics":function(o){return o>=5120&&o<=5759},Khmer:function(o){return o>=6016&&o<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(o){return o>=6320&&o<=6399},"General Punctuation":function(o){return o>=8192&&o<=8303},"Letterlike Symbols":function(o){return o>=8448&&o<=8527},"Number Forms":function(o){return o>=8528&&o<=8591},"Miscellaneous Technical":function(o){return o>=8960&&o<=9215},"Control Pictures":function(o){return o>=9216&&o<=9279},"Optical Character Recognition":function(o){return o>=9280&&o<=9311},"Enclosed Alphanumerics":function(o){return o>=9312&&o<=9471},"Geometric Shapes":function(o){return o>=9632&&o<=9727},"Miscellaneous Symbols":function(o){return o>=9728&&o<=9983},"Miscellaneous Symbols and Arrows":function(o){return o>=11008&&o<=11263},"CJK Radicals Supplement":function(o){return o>=11904&&o<=12031},"Kangxi Radicals":function(o){return o>=12032&&o<=12255},"Ideographic Description Characters":function(o){return o>=12272&&o<=12287},"CJK Symbols and Punctuation":function(o){return o>=12288&&o<=12351},Hiragana:function(o){return o>=12352&&o<=12447},Katakana:function(o){return o>=12448&&o<=12543},Bopomofo:function(o){return o>=12544&&o<=12591},"Hangul Compatibility Jamo":function(o){return o>=12592&&o<=12687},Kanbun:function(o){return o>=12688&&o<=12703},"Bopomofo Extended":function(o){return o>=12704&&o<=12735},"CJK Strokes":function(o){return o>=12736&&o<=12783},"Katakana Phonetic Extensions":function(o){return o>=12784&&o<=12799},"Enclosed CJK Letters and Months":function(o){return o>=12800&&o<=13055},"CJK Compatibility":function(o){return o>=13056&&o<=13311},"CJK Unified Ideographs Extension A":function(o){return o>=13312&&o<=19903},"Yijing Hexagram Symbols":function(o){return o>=19904&&o<=19967},"CJK Unified Ideographs":function(o){return o>=19968&&o<=40959},"Yi Syllables":function(o){return o>=40960&&o<=42127},"Yi Radicals":function(o){return o>=42128&&o<=42191},"Hangul Jamo Extended-A":function(o){return o>=43360&&o<=43391},"Hangul Syllables":function(o){return o>=44032&&o<=55215},"Hangul Jamo Extended-B":function(o){return o>=55216&&o<=55295},"Private Use Area":function(o){return o>=57344&&o<=63743},"CJK Compatibility Ideographs":function(o){return o>=63744&&o<=64255},"Arabic Presentation Forms-A":function(o){return o>=64336&&o<=65023},"Vertical Forms":function(o){return o>=65040&&o<=65055},"CJK Compatibility Forms":function(o){return o>=65072&&o<=65103},"Small Form Variants":function(o){return o>=65104&&o<=65135},"Arabic Presentation Forms-B":function(o){return o>=65136&&o<=65279},"Halfwidth and Fullwidth Forms":function(o){return o>=65280&&o<=65519}};function hy(o){for(var c=0,_=o;c<_.length;c+=1)if(Tf(_[c].charCodeAt(0)))return!0;return!1}function Tf(o){return!(o!==746&&o!==747&&(o<4352||!(qt["Bopomofo Extended"](o)||qt.Bopomofo(o)||qt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||qt["CJK Compatibility Ideographs"](o)||qt["CJK Compatibility"](o)||qt["CJK Radicals Supplement"](o)||qt["CJK Strokes"](o)||!(!qt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||qt["CJK Unified Ideographs Extension A"](o)||qt["CJK Unified Ideographs"](o)||qt["Enclosed CJK Letters and Months"](o)||qt["Hangul Compatibility Jamo"](o)||qt["Hangul Jamo Extended-A"](o)||qt["Hangul Jamo Extended-B"](o)||qt["Hangul Jamo"](o)||qt["Hangul Syllables"](o)||qt.Hiragana(o)||qt["Ideographic Description Characters"](o)||qt.Kanbun(o)||qt["Kangxi Radicals"](o)||qt["Katakana Phonetic Extensions"](o)||qt.Katakana(o)&&o!==12540||!(!qt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!qt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||qt["Unified Canadian Aboriginal Syllabics"](o)||qt["Unified Canadian Aboriginal Syllabics Extended"](o)||qt["Vertical Forms"](o)||qt["Yijing Hexagram Symbols"](o)||qt["Yi Syllables"](o)||qt["Yi Radicals"](o))))}function _y(o){return!(Tf(o)||(function(c){return!!(qt["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||qt["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||qt["Letterlike Symbols"](c)||qt["Number Forms"](c)||qt["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||qt["Control Pictures"](c)&&c!==9251||qt["Optical Character Recognition"](c)||qt["Enclosed Alphanumerics"](c)||qt["Geometric Shapes"](c)||qt["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||qt["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||qt["CJK Symbols and Punctuation"](c)||qt.Katakana(c)||qt["Private Use Area"](c)||qt["CJK Compatibility Forms"](c)||qt["Small Form Variants"](c)||qt["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)})(o))}function Ro(o){return o>=1424&&o<=2303||qt["Arabic Presentation Forms-A"](o)||qt["Arabic Presentation Forms-B"](o)}function Ns(o,c){return!(!c&&Ro(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||qt.Khmer(o))}function Ef(o){for(var c=0,_=o;c<_.length;c+=1)if(Ro(_[c].charCodeAt(0)))return!0;return!1}var Mf=null,Bs="unavailable",ru=null,dv=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Bs="error"),Mf&&Mf(o)};function H_(){my.fire(new Se("pluginStateChange",{pluginStatus:Bs,pluginURL:ru}))}var my=new ze,fy=function(){return Bs},sl=function(){if(Bs!=="deferred"||!ru)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Bs="loading",H_(),ru&&Ll({url:ru},(function(o){o?dv(o):(Bs="loaded",H_())}))},ho={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Bs==="loaded"||ho.applyArabicShaping!=null},isLoading:function(){return Bs==="loading"},setState:function(o){Bs=o.pluginStatus,ru=o.pluginURL},isParsed:function(){return ho.applyArabicShaping!=null&&ho.processBidirectionalText!=null&&ho.processStyledBidirectionalText!=null},getPluginURL:function(){return ru}},oi=function(o,c){this.zoom=o,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new dy,this.transition={})};oi.prototype.isSupportedScript=function(o){return(function(c,_){for(var b=0,w=c;b<w.length;b+=1)if(!Ns(w[b].charCodeAt(0),_))return!1;return!0})(o,ho.isLoaded())},oi.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},oi.prototype.getCrossfadeParameters=function(){var o=this.zoom,c=o-Math.floor(o),_=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*c}};var kl=function(o,c){this.property=o,this.value=c,this.expression=(function(_,b){if(yf(_))return new fh(_,b);if(O_(_)){var w=iv(_,b);if(w.result==="error")throw new Error(w.value.map((function(M){return M.key+": "+M.message})).join(", "));return w.value}var S=_;return typeof _=="string"&&b.type==="color"&&(S=bi.parse(_)),{kind:"constant",evaluate:function(){return S}}})(c===void 0?o.specification.default:c,o.specification)};kl.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},kl.prototype.possiblyEvaluate=function(o,c,_){return this.property.possiblyEvaluate(this,o,c,_)};var ko=function(o){this.property=o,this.value=new kl(o,void 0)};ko.prototype.transitioned=function(o,c){return new id(this.property,this.value,c,L({},o.transition,this.transition),o.now)},ko.prototype.untransitioned=function(){return new id(this.property,this.value,null,{},0)};var Ur=function(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)};Ur.prototype.getValue=function(o){return me(this._values[o].value.value)},Ur.prototype.setValue=function(o,c){this._values.hasOwnProperty(o)||(this._values[o]=new ko(this._values[o].property)),this._values[o].value=new kl(this._values[o].property,c===null?void 0:me(c))},Ur.prototype.getTransition=function(o){return me(this._values[o].transition)},Ur.prototype.setTransition=function(o,c){this._values.hasOwnProperty(o)||(this._values[o]=new ko(this._values[o].property)),this._values[o].transition=me(c)||void 0},Ur.prototype.serialize=function(){for(var o={},c=0,_=Object.keys(this._values);c<_.length;c+=1){var b=_[c],w=this.getValue(b);w!==void 0&&(o[b]=w);var S=this.getTransition(b);S!==void 0&&(o[b+"-transition"]=S)}return o},Ur.prototype.transitioned=function(o,c){for(var _=new Ju(this._properties),b=0,w=Object.keys(this._values);b<w.length;b+=1){var S=w[b];_._values[S]=this._values[S].transitioned(o,c._values[S])}return _},Ur.prototype.untransitioned=function(){for(var o=new Ju(this._properties),c=0,_=Object.keys(this._values);c<_.length;c+=1){var b=_[c];o._values[b]=this._values[b].untransitioned()}return o};var id=function(o,c,_,b,w){this.property=o,this.value=c,this.begin=w+b.delay||0,this.end=this.begin+b.duration||0,o.specification.transition&&(b.delay||b.duration)&&(this.prior=_)};id.prototype.possiblyEvaluate=function(o,c,_){var b=o.now||0,w=this.value.possiblyEvaluate(o,c,_),S=this.prior;if(S){if(b>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(b<this.begin)return S.possiblyEvaluate(o,c,_);var M=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(S.possiblyEvaluate(o,c,_),w,(function(O){if(O<=0)return 0;if(O>=1)return 1;var V=O*O,H=V*O;return 4*(O<.5?H:3*(O-V)+H-.75)})(M))}return w};var Ju=function(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)};Ju.prototype.possiblyEvaluate=function(o,c,_){for(var b=new X_(this._properties),w=0,S=Object.keys(this._values);w<S.length;w+=1){var M=S[w];b._values[M]=this._values[M].possiblyEvaluate(o,c,_)}return b},Ju.prototype.hasTransition=function(){for(var o=0,c=Object.keys(this._values);o<c.length;o+=1)if(this._values[c[o]].prior)return!0;return!1};var ol=function(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)};ol.prototype.getValue=function(o){return me(this._values[o].value)},ol.prototype.setValue=function(o,c){this._values[o]=new kl(this._values[o].property,c===null?void 0:me(c))},ol.prototype.serialize=function(){for(var o={},c=0,_=Object.keys(this._values);c<_.length;c+=1){var b=_[c],w=this.getValue(b);w!==void 0&&(o[b]=w)}return o},ol.prototype.possiblyEvaluate=function(o,c,_){for(var b=new X_(this._properties),w=0,S=Object.keys(this._values);w<S.length;w+=1){var M=S[w];b._values[M]=this._values[M].possiblyEvaluate(o,c,_)}return b};var ls=function(o,c,_){this.property=o,this.value=c,this.parameters=_};ls.prototype.isConstant=function(){return this.value.kind==="constant"},ls.prototype.constantOr=function(o){return this.value.kind==="constant"?this.value.value:o},ls.prototype.evaluate=function(o,c,_,b){return this.property.evaluate(this.value,this.parameters,o,c,_,b)};var X_=function(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)};X_.prototype.get=function(o){return this._values[o]};var pa=function(o){this.specification=o};pa.prototype.possiblyEvaluate=function(o,c){return o.expression.evaluate(c)},pa.prototype.interpolate=function(o,c,_){var b=dh[this.specification.type];return b?b(o,c,_):o};var oa=function(o,c){this.specification=o,this.overrides=c};oa.prototype.possiblyEvaluate=function(o,c,_,b){return new ls(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(c,null,{},_,b)}:o.expression,c)},oa.prototype.interpolate=function(o,c,_){if(o.value.kind!=="constant"||c.value.kind!=="constant")return o;if(o.value.value===void 0||c.value.value===void 0)return new ls(this,{kind:"constant",value:void 0},o.parameters);var b=dh[this.specification.type];return b?new ls(this,{kind:"constant",value:b(o.value.value,c.value.value,_)},o.parameters):o},oa.prototype.evaluate=function(o,c,_,b,w,S){return o.kind==="constant"?o.value:o.evaluate(c,_,b,w,S)};var Lf=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.possiblyEvaluate=function(_,b,w,S){if(_.value===void 0)return new ls(this,{kind:"constant",value:void 0},b);if(_.expression.kind==="constant"){var M=_.expression.evaluate(b,null,{},w,S),O=_.property.specification.type==="resolvedImage"&&typeof M!="string"?M.name:M,V=this._calculate(O,O,O,b);return new ls(this,{kind:"constant",value:V},b)}if(_.expression.kind==="camera"){var H=this._calculate(_.expression.evaluate({zoom:b.zoom-1}),_.expression.evaluate({zoom:b.zoom}),_.expression.evaluate({zoom:b.zoom+1}),b);return new ls(this,{kind:"constant",value:H},b)}return new ls(this,_.expression,b)},c.prototype.evaluate=function(_,b,w,S,M,O){if(_.kind==="source"){var V=_.evaluate(b,w,S,M,O);return this._calculate(V,V,V,b)}return _.kind==="composite"?this._calculate(_.evaluate({zoom:Math.floor(b.zoom)-1},w,S),_.evaluate({zoom:Math.floor(b.zoom)},w,S),_.evaluate({zoom:Math.floor(b.zoom)+1},w,S),b):_.value},c.prototype._calculate=function(_,b,w,S){return S.zoom>S.zoomHistory.lastIntegerZoom?{from:_,to:b}:{from:w,to:b}},c.prototype.interpolate=function(_){return _},c})(oa),us=function(o){this.specification=o};us.prototype.possiblyEvaluate=function(o,c,_,b){if(o.value!==void 0){if(o.expression.kind==="constant"){var w=o.expression.evaluate(c,null,{},_,b);return this._calculate(w,w,w,c)}return this._calculate(o.expression.evaluate(new oi(Math.floor(c.zoom-1),c)),o.expression.evaluate(new oi(Math.floor(c.zoom),c)),o.expression.evaluate(new oi(Math.floor(c.zoom+1),c)),c)}},us.prototype._calculate=function(o,c,_,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:_,to:c}},us.prototype.interpolate=function(o){return o};var ll=function(o){this.specification=o};ll.prototype.possiblyEvaluate=function(o,c,_,b){return!!o.expression.evaluate(c,null,{},_,b)},ll.prototype.interpolate=function(){return!1};var Hr=function(o){for(var c in this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],o){var _=o[c];_.specification.overridable&&this.overridableProperties.push(c);var b=this.defaultPropertyValues[c]=new kl(_,void 0),w=this.defaultTransitionablePropertyValues[c]=new ko(_);this.defaultTransitioningPropertyValues[c]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=b.possiblyEvaluate({})}};na("DataDrivenProperty",oa),na("DataConstantProperty",pa),na("CrossFadedDataDrivenProperty",Lf),na("CrossFadedProperty",us),na("ColorRampProperty",ll);var Pl=(function(o){function c(_,b){if(o.call(this),this.id=_.id,this.type=_.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},_.type!=="custom"&&(this.metadata=(_=_).metadata,this.minzoom=_.minzoom,this.maxzoom=_.maxzoom,_.type!=="background"&&(this.source=_.source,this.sourceLayer=_["source-layer"],this.filter=_.filter),b.layout&&(this._unevaluatedLayout=new ol(b.layout)),b.paint)){for(var w in this._transitionablePaint=new Ur(b.paint),_.paint)this.setPaintProperty(w,_.paint[w],{validate:!1});for(var S in _.layout)this.setLayoutProperty(S,_.layout[S],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new X_(b.paint)}}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},c.prototype.getLayoutProperty=function(_){return _==="visibility"?this.visibility:this._unevaluatedLayout.getValue(_)},c.prototype.setLayoutProperty=function(_,b,w){w===void 0&&(w={}),b!=null&&this._validate(Z_,"layers."+this.id+".layout."+_,_,b,w)||(_!=="visibility"?this._unevaluatedLayout.setValue(_,b):this.visibility=b)},c.prototype.getPaintProperty=function(_){return $(_,"-transition")?this._transitionablePaint.getTransition(_.slice(0,-11)):this._transitionablePaint.getValue(_)},c.prototype.setPaintProperty=function(_,b,w){if(w===void 0&&(w={}),b!=null&&this._validate(LI,"layers."+this.id+".paint."+_,_,b,w))return!1;if($(_,"-transition"))return this._transitionablePaint.setTransition(_.slice(0,-11),b||void 0),!1;var S=this._transitionablePaint._values[_],M=S.property.specification["property-type"]==="cross-faded-data-driven",O=S.value.isDataDriven(),V=S.value;this._transitionablePaint.setValue(_,b),this._handleSpecialPaintPropertyUpdate(_);var H=this._transitionablePaint._values[_].value;return H.isDataDriven()||O||M||this._handleOverridablePaintPropertyUpdate(_,V,H)},c.prototype._handleSpecialPaintPropertyUpdate=function(_){},c.prototype._handleOverridablePaintPropertyUpdate=function(_,b,w){return!1},c.prototype.isHidden=function(_){return!!(this.minzoom&&_<this.minzoom)||!!(this.maxzoom&&_>=this.maxzoom)||this.visibility==="none"},c.prototype.updateTransitions=function(_){this._transitioningPaint=this._transitionablePaint.transitioned(_,this._transitioningPaint)},c.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},c.prototype.recalculate=function(_,b){_.getCrossfadeParameters&&(this._crossfadeParameters=_.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(_,void 0,b)),this.paint=this._transitioningPaint.possiblyEvaluate(_,void 0,b)},c.prototype.serialize=function(){var _={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(_.layout=_.layout||{},_.layout.visibility=this.visibility),ce(_,(function(b,w){return!(b===void 0||w==="layout"&&!Object.keys(b).length||w==="paint"&&!Object.keys(b).length)}))},c.prototype._validate=function(_,b,w,S,M){return M===void 0&&(M={}),(!M||M.validate!==!1)&&z_(this,_.call(V_,{key:b,layerType:this.type,objectKey:w,value:S,styleSpec:pe,style:{glyphs:!0,sprite:!0}}))},c.prototype.is3D=function(){return!1},c.prototype.isTileClipped=function(){return!1},c.prototype.hasOffscreenPass=function(){return!1},c.prototype.resize=function(){},c.prototype.isStateDependent=function(){for(var _ in this.paint._values){var b=this.paint.get(_);if(b instanceof ls&&Qc(b.property.specification)&&(b.value.kind==="source"||b.value.kind==="composite")&&b.value.isStateDependent)return!0}return!1},c})(ze),gy={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Rf=function(o,c){this._structArray=o,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Fi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Mr(o,c){c===void 0&&(c=1);var _=0,b=0;return{members:o.map((function(w){var S=gy[w.type].BYTES_PER_ELEMENT,M=_=hv(_,Math.max(c,S)),O=w.components||1;return b=Math.max(b,S),_+=S*O,{name:w.name,type:w.type,components:O,offset:M}})),size:hv(_,Math.max(b,c)),alignment:c}}function hv(o,c){return Math.ceil(o/c)*c}Fi.serialize=function(o,c){return o._trim(),c&&(o.isTransferred=!0,c.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}},Fi.deserialize=function(o){var c=Object.create(this.prototype);return c.arrayBuffer=o.arrayBuffer,c.length=o.length,c.capacity=o.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c},Fi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Fi.prototype.clear=function(){this.length=0},Fi.prototype.resize=function(o){this.reserve(o),this.length=o},Fi.prototype.reserve=function(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}},Fi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var nd=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b){var w=this.length;return this.resize(w+1),this.emplace(w,_,b)},c.prototype.emplace=function(_,b,w){var S=2*_;return this.int16[S+0]=b,this.int16[S+1]=w,_},c})(Fi);nd.prototype.bytesPerElement=4,na("StructArrayLayout2i4",nd);var py=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w,S){var M=this.length;return this.resize(M+1),this.emplace(M,_,b,w,S)},c.prototype.emplace=function(_,b,w,S,M){var O=4*_;return this.int16[O+0]=b,this.int16[O+1]=w,this.int16[O+2]=S,this.int16[O+3]=M,_},c})(Fi);py.prototype.bytesPerElement=8,na("StructArrayLayout4i8",py);var su=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w,S,M,O){var V=this.length;return this.resize(V+1),this.emplace(V,_,b,w,S,M,O)},c.prototype.emplace=function(_,b,w,S,M,O,V){var H=6*_;return this.int16[H+0]=b,this.int16[H+1]=w,this.int16[H+2]=S,this.int16[H+3]=M,this.int16[H+4]=O,this.int16[H+5]=V,_},c})(Fi);su.prototype.bytesPerElement=12,na("StructArrayLayout2i4i12",su);var Ds=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w,S,M,O){var V=this.length;return this.resize(V+1),this.emplace(V,_,b,w,S,M,O)},c.prototype.emplace=function(_,b,w,S,M,O,V){var H=4*_,j=8*_;return this.int16[H+0]=b,this.int16[H+1]=w,this.uint8[j+4]=S,this.uint8[j+5]=M,this.uint8[j+6]=O,this.uint8[j+7]=V,_},c})(Fi);Ds.prototype.bytesPerElement=8,na("StructArrayLayout2i4ub8",Ds);var yh=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b){var w=this.length;return this.resize(w+1),this.emplace(w,_,b)},c.prototype.emplace=function(_,b,w){var S=2*_;return this.float32[S+0]=b,this.float32[S+1]=w,_},c})(Fi);yh.prototype.bytesPerElement=8,na("StructArrayLayout2f8",yh);var Gl=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w,S,M,O,V,H,j,ae){var he=this.length;return this.resize(he+1),this.emplace(he,_,b,w,S,M,O,V,H,j,ae)},c.prototype.emplace=function(_,b,w,S,M,O,V,H,j,ae,he){var ye=10*_;return this.uint16[ye+0]=b,this.uint16[ye+1]=w,this.uint16[ye+2]=S,this.uint16[ye+3]=M,this.uint16[ye+4]=O,this.uint16[ye+5]=V,this.uint16[ye+6]=H,this.uint16[ye+7]=j,this.uint16[ye+8]=ae,this.uint16[ye+9]=he,_},c})(Fi);Gl.prototype.bytesPerElement=20,na("StructArrayLayout10ui20",Gl);var kf=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w,S,M,O,V,H,j,ae,he,ye){var Le=this.length;return this.resize(Le+1),this.emplace(Le,_,b,w,S,M,O,V,H,j,ae,he,ye)},c.prototype.emplace=function(_,b,w,S,M,O,V,H,j,ae,he,ye,Le){var Pe=12*_;return this.int16[Pe+0]=b,this.int16[Pe+1]=w,this.int16[Pe+2]=S,this.int16[Pe+3]=M,this.uint16[Pe+4]=O,this.uint16[Pe+5]=V,this.uint16[Pe+6]=H,this.uint16[Pe+7]=j,this.int16[Pe+8]=ae,this.int16[Pe+9]=he,this.int16[Pe+10]=ye,this.int16[Pe+11]=Le,_},c})(Fi);kf.prototype.bytesPerElement=24,na("StructArrayLayout4i4ui4i24",kf);var bh=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w){var S=this.length;return this.resize(S+1),this.emplace(S,_,b,w)},c.prototype.emplace=function(_,b,w,S){var M=3*_;return this.float32[M+0]=b,this.float32[M+1]=w,this.float32[M+2]=S,_},c})(Fi);bh.prototype.bytesPerElement=12,na("StructArrayLayout3f12",bh);var q_=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_){var b=this.length;return this.resize(b+1),this.emplace(b,_)},c.prototype.emplace=function(_,b){return this.uint32[1*_+0]=b,_},c})(Fi);q_.prototype.bytesPerElement=4,na("StructArrayLayout1ul4",q_);var yy=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w,S,M,O,V,H,j){var ae=this.length;return this.resize(ae+1),this.emplace(ae,_,b,w,S,M,O,V,H,j)},c.prototype.emplace=function(_,b,w,S,M,O,V,H,j,ae){var he=10*_,ye=5*_;return this.int16[he+0]=b,this.int16[he+1]=w,this.int16[he+2]=S,this.int16[he+3]=M,this.int16[he+4]=O,this.int16[he+5]=V,this.uint32[ye+3]=H,this.uint16[he+8]=j,this.uint16[he+9]=ae,_},c})(Fi);yy.prototype.bytesPerElement=20,na("StructArrayLayout6i1ul2ui20",yy);var vh=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w,S,M,O){var V=this.length;return this.resize(V+1),this.emplace(V,_,b,w,S,M,O)},c.prototype.emplace=function(_,b,w,S,M,O,V){var H=6*_;return this.int16[H+0]=b,this.int16[H+1]=w,this.int16[H+2]=S,this.int16[H+3]=M,this.int16[H+4]=O,this.int16[H+5]=V,_},c})(Fi);vh.prototype.bytesPerElement=12,na("StructArrayLayout2i2i2i12",vh);var rd=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w,S,M){var O=this.length;return this.resize(O+1),this.emplace(O,_,b,w,S,M)},c.prototype.emplace=function(_,b,w,S,M,O){var V=4*_,H=8*_;return this.float32[V+0]=b,this.float32[V+1]=w,this.float32[V+2]=S,this.int16[H+6]=M,this.int16[H+7]=O,_},c})(Fi);rd.prototype.bytesPerElement=16,na("StructArrayLayout2f1f2i16",rd);var by=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w,S){var M=this.length;return this.resize(M+1),this.emplace(M,_,b,w,S)},c.prototype.emplace=function(_,b,w,S,M){var O=12*_,V=3*_;return this.uint8[O+0]=b,this.uint8[O+1]=w,this.float32[V+1]=S,this.float32[V+2]=M,_},c})(Fi);by.prototype.bytesPerElement=12,na("StructArrayLayout2ub2f12",by);var Qu=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w){var S=this.length;return this.resize(S+1),this.emplace(S,_,b,w)},c.prototype.emplace=function(_,b,w,S){var M=3*_;return this.uint16[M+0]=b,this.uint16[M+1]=w,this.uint16[M+2]=S,_},c})(Fi);Qu.prototype.bytesPerElement=6,na("StructArrayLayout3ui6",Qu);var ec=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w,S,M,O,V,H,j,ae,he,ye,Le,Pe,qe,Be,et){var it=this.length;return this.resize(it+1),this.emplace(it,_,b,w,S,M,O,V,H,j,ae,he,ye,Le,Pe,qe,Be,et)},c.prototype.emplace=function(_,b,w,S,M,O,V,H,j,ae,he,ye,Le,Pe,qe,Be,et,it){var nt=24*_,lt=12*_,pt=48*_;return this.int16[nt+0]=b,this.int16[nt+1]=w,this.uint16[nt+2]=S,this.uint16[nt+3]=M,this.uint32[lt+2]=O,this.uint32[lt+3]=V,this.uint32[lt+4]=H,this.uint16[nt+10]=j,this.uint16[nt+11]=ae,this.uint16[nt+12]=he,this.float32[lt+7]=ye,this.float32[lt+8]=Le,this.uint8[pt+36]=Pe,this.uint8[pt+37]=qe,this.uint8[pt+38]=Be,this.uint32[lt+10]=et,this.int16[nt+22]=it,_},c})(Fi);ec.prototype.bytesPerElement=48,na("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ec);var Pf=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w,S,M,O,V,H,j,ae,he,ye,Le,Pe,qe,Be,et,it,nt,lt,pt,Mt,Vt,ma,$t,ba,Qt,Ya){var Ma=this.length;return this.resize(Ma+1),this.emplace(Ma,_,b,w,S,M,O,V,H,j,ae,he,ye,Le,Pe,qe,Be,et,it,nt,lt,pt,Mt,Vt,ma,$t,ba,Qt,Ya)},c.prototype.emplace=function(_,b,w,S,M,O,V,H,j,ae,he,ye,Le,Pe,qe,Be,et,it,nt,lt,pt,Mt,Vt,ma,$t,ba,Qt,Ya,Ma){var la=34*_,ti=17*_;return this.int16[la+0]=b,this.int16[la+1]=w,this.int16[la+2]=S,this.int16[la+3]=M,this.int16[la+4]=O,this.int16[la+5]=V,this.int16[la+6]=H,this.int16[la+7]=j,this.uint16[la+8]=ae,this.uint16[la+9]=he,this.uint16[la+10]=ye,this.uint16[la+11]=Le,this.uint16[la+12]=Pe,this.uint16[la+13]=qe,this.uint16[la+14]=Be,this.uint16[la+15]=et,this.uint16[la+16]=it,this.uint16[la+17]=nt,this.uint16[la+18]=lt,this.uint16[la+19]=pt,this.uint16[la+20]=Mt,this.uint16[la+21]=Vt,this.uint16[la+22]=ma,this.uint32[ti+12]=$t,this.float32[ti+13]=ba,this.float32[ti+14]=Qt,this.float32[ti+15]=Ya,this.float32[ti+16]=Ma,_},c})(Fi);Pf.prototype.bytesPerElement=68,na("StructArrayLayout8i15ui1ul4f68",Pf);var tc=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_){var b=this.length;return this.resize(b+1),this.emplace(b,_)},c.prototype.emplace=function(_,b){return this.float32[1*_+0]=b,_},c})(Fi);tc.prototype.bytesPerElement=4,na("StructArrayLayout1f4",tc);var Po=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w){var S=this.length;return this.resize(S+1),this.emplace(S,_,b,w)},c.prototype.emplace=function(_,b,w,S){var M=3*_;return this.int16[M+0]=b,this.int16[M+1]=w,this.int16[M+2]=S,_},c})(Fi);Po.prototype.bytesPerElement=6,na("StructArrayLayout3i6",Po);var vy=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w){var S=this.length;return this.resize(S+1),this.emplace(S,_,b,w)},c.prototype.emplace=function(_,b,w,S){var M=4*_;return this.uint32[2*_+0]=b,this.uint16[M+2]=w,this.uint16[M+3]=S,_},c})(Fi);vy.prototype.bytesPerElement=8,na("StructArrayLayout1ul2ui8",vy);var Y_=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b){var w=this.length;return this.resize(w+1),this.emplace(w,_,b)},c.prototype.emplace=function(_,b,w){var S=2*_;return this.uint16[S+0]=b,this.uint16[S+1]=w,_},c})(Fi);Y_.prototype.bytesPerElement=4,na("StructArrayLayout2ui4",Y_);var xy=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_){var b=this.length;return this.resize(b+1),this.emplace(b,_)},c.prototype.emplace=function(_,b){return this.uint16[1*_+0]=b,_},c})(Fi);xy.prototype.bytesPerElement=2,na("StructArrayLayout1ui2",xy);var Gf=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(_,b,w,S){var M=this.length;return this.resize(M+1),this.emplace(M,_,b,w,S)},c.prototype.emplace=function(_,b,w,S,M){var O=4*_;return this.float32[O+0]=b,this.float32[O+1]=w,this.float32[O+2]=S,this.float32[O+3]=M,_},c})(Fi);Gf.prototype.bytesPerElement=16,na("StructArrayLayout4f16",Gf);var m=(function(o){function c(){o.apply(this,arguments)}o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c;var _={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return _.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},_.x1.get=function(){return this._structArray.int16[this._pos2+2]},_.y1.get=function(){return this._structArray.int16[this._pos2+3]},_.x2.get=function(){return this._structArray.int16[this._pos2+4]},_.y2.get=function(){return this._structArray.int16[this._pos2+5]},_.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},_.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},_.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},_.anchorPoint.get=function(){return new h(this.anchorPointX,this.anchorPointY)},Object.defineProperties(c.prototype,_),c})(Rf);m.prototype.size=20;var p=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.get=function(_){return new m(this,_)},c})(yy);na("CollisionBoxArray",p);var f=(function(o){function c(){o.apply(this,arguments)}o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c;var _={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return _.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},_.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},_.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},_.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},_.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},_.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},_.segment.get=function(){return this._structArray.uint16[this._pos2+10]},_.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},_.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},_.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},_.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},_.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},_.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},_.placedOrientation.set=function(b){this._structArray.uint8[this._pos1+37]=b},_.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},_.hidden.set=function(b){this._structArray.uint8[this._pos1+38]=b},_.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},_.crossTileID.set=function(b){this._structArray.uint32[this._pos4+10]=b},_.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(c.prototype,_),c})(Rf);f.prototype.size=48;var v=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.get=function(_){return new f(this,_)},c})(ec);na("PlacedSymbolArray",v);var T=(function(o){function c(){o.apply(this,arguments)}o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c;var _={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return _.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},_.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},_.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},_.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},_.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},_.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},_.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},_.key.get=function(){return this._structArray.uint16[this._pos2+8]},_.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},_.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},_.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},_.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},_.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},_.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},_.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},_.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},_.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},_.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},_.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},_.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},_.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},_.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},_.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},_.crossTileID.set=function(b){this._structArray.uint32[this._pos4+12]=b},_.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},_.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},_.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},_.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(c.prototype,_),c})(Rf);T.prototype.size=68;var k=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.get=function(_){return new T(this,_)},c})(Pf);na("SymbolInstanceArray",k);var W=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.getoffsetX=function(_){return this.float32[1*_+0]},c})(tc);na("GlyphOffsetArray",W);var D=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.getx=function(_){return this.int16[3*_+0]},c.prototype.gety=function(_){return this.int16[3*_+1]},c.prototype.gettileUnitDistanceFromAnchor=function(_){return this.int16[3*_+2]},c})(Po);na("SymbolLineVertexArray",D);var q=(function(o){function c(){o.apply(this,arguments)}o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c;var _={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return _.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},_.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},_.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(c.prototype,_),c})(Rf);q.prototype.size=8;var oe=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.get=function(_){return new q(this,_)},c})(vy);na("FeatureIndexArray",oe);var be=Mr([{name:"a_pos",components:2,type:"Int16"}],4).members,ve=function(o){o===void 0&&(o=[]),this.segments=o};function we(o,c){return 256*(o=A(Math.floor(o),0,255))+A(Math.floor(c),0,255)}ve.prototype.prepareSegment=function(o,c,_,b){var w=this.segments[this.segments.length-1];return o>ve.MAX_VERTEX_ARRAY_LENGTH&&de("Max vertices per segment is "+ve.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+o),(!w||w.vertexLength+o>ve.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==b)&&(w={vertexOffset:c.length,primitiveOffset:_.length,vertexLength:0,primitiveLength:0},b!==void 0&&(w.sortKey=b),this.segments.push(w)),w},ve.prototype.get=function(){return this.segments},ve.prototype.destroy=function(){for(var o=0,c=this.segments;o<c.length;o+=1){var _=c[o];for(var b in _.vaos)_.vaos[b].destroy()}},ve.simpleSegment=function(o,c,_,b){return new ve([{vertexOffset:o,primitiveOffset:c,vertexLength:_,primitiveLength:b,vaos:{},sortKey:0}])},ve.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,na("SegmentVector",ve);var Oe=Mr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),We=l((function(o){o.exports=function(c,_){var b,w,S,M,O,V,H,j;for(w=c.length-(b=3&c.length),S=_,O=3432918353,V=461845907,j=0;j<w;)H=255&c.charCodeAt(j)|(255&c.charCodeAt(++j))<<8|(255&c.charCodeAt(++j))<<16|(255&c.charCodeAt(++j))<<24,++j,S=27492+(65535&(M=5*(65535&(S=(S^=H=(65535&(H=(H=(65535&H)*O+(((H>>>16)*O&65535)<<16)&4294967295)<<15|H>>>17))*V+(((H>>>16)*V&65535)<<16)&4294967295)<<13|S>>>19))+((5*(S>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(H=0,b){case 3:H^=(255&c.charCodeAt(j+2))<<16;case 2:H^=(255&c.charCodeAt(j+1))<<8;case 1:S^=H=(65535&(H=(H=(65535&(H^=255&c.charCodeAt(j)))*O+(((H>>>16)*O&65535)<<16)&4294967295)<<15|H>>>17))*V+(((H>>>16)*V&65535)<<16)&4294967295}return S^=c.length,S=2246822507*(65535&(S^=S>>>16))+((2246822507*(S>>>16)&65535)<<16)&4294967295,S=3266489909*(65535&(S^=S>>>13))+((3266489909*(S>>>16)&65535)<<16)&4294967295,(S^=S>>>16)>>>0}})),He=l((function(o){o.exports=function(c,_){for(var b,w=c.length,S=_^w,M=0;w>=4;)b=1540483477*(65535&(b=255&c.charCodeAt(M)|(255&c.charCodeAt(++M))<<8|(255&c.charCodeAt(++M))<<16|(255&c.charCodeAt(++M))<<24))+((1540483477*(b>>>16)&65535)<<16),S=1540483477*(65535&S)+((1540483477*(S>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),w-=4,++M;switch(w){case 3:S^=(255&c.charCodeAt(M+2))<<16;case 2:S^=(255&c.charCodeAt(M+1))<<8;case 1:S=1540483477*(65535&(S^=255&c.charCodeAt(M)))+((1540483477*(S>>>16)&65535)<<16)}return S=1540483477*(65535&(S^=S>>>13))+((1540483477*(S>>>16)&65535)<<16),(S^=S>>>15)>>>0}})),Te=We,Ue=He;Te.murmur3=We,Te.murmur2=Ue;var Ke=function(){this.ids=[],this.positions=[],this.indexed=!1};Ke.prototype.add=function(o,c,_,b){this.ids.push(ut(o)),this.positions.push(c,_,b)},Ke.prototype.getPositions=function(o){for(var c=ut(o),_=0,b=this.ids.length-1;_<b;){var w=_+b>>1;this.ids[w]>=c?b=w:_=w+1}for(var S=[];this.ids[_]===c;)S.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return S},Ke.serialize=function(o,c){var _=new Float64Array(o.ids),b=new Uint32Array(o.positions);return(function w(S,M,O,V){for(;O<V;){for(var H=S[O+V>>1],j=O-1,ae=V+1;;){do j++;while(S[j]<H);do ae--;while(S[ae]>H);if(j>=ae)break;st(S,j,ae),st(M,3*j,3*ae),st(M,3*j+1,3*ae+1),st(M,3*j+2,3*ae+2)}ae-O<V-ae?(w(S,M,O,ae),O=ae+1):(w(S,M,ae+1,V),V=ae)}})(_,b,0,_.length-1),c&&c.push(_.buffer,b.buffer),{ids:_,positions:b}},Ke.deserialize=function(o){var c=new Ke;return c.ids=o.ids,c.positions=o.positions,c.indexed=!0,c};var at=Math.pow(2,53)-1;function ut(o){var c=+o;return!isNaN(c)&&c<=at?c:Te(String(o))}function st(o,c,_){var b=o[c];o[c]=o[_],o[_]=b}na("FeaturePositionMap",Ke);var dt=function(o,c){this.gl=o.gl,this.location=c},bt=(function(o){function c(_,b){o.call(this,_,b),this.current=0}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(_){this.current!==_&&(this.current=_,this.gl.uniform1i(this.location,_))},c})(dt),Ft=(function(o){function c(_,b){o.call(this,_,b),this.current=0}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(_){this.current!==_&&(this.current=_,this.gl.uniform1f(this.location,_))},c})(dt),Gt=(function(o){function c(_,b){o.call(this,_,b),this.current=[0,0]}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]||(this.current=_,this.gl.uniform2f(this.location,_[0],_[1]))},c})(dt),ea=(function(o){function c(_,b){o.call(this,_,b),this.current=[0,0,0]}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]||(this.current=_,this.gl.uniform3f(this.location,_[0],_[1],_[2]))},c})(dt),ya=(function(o){function c(_,b){o.call(this,_,b),this.current=[0,0,0,0]}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]&&_[3]===this.current[3]||(this.current=_,this.gl.uniform4f(this.location,_[0],_[1],_[2],_[3]))},c})(dt),Ca=(function(o){function c(_,b){o.call(this,_,b),this.current=bi.transparent}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(_){_.r===this.current.r&&_.g===this.current.g&&_.b===this.current.b&&_.a===this.current.a||(this.current=_,this.gl.uniform4f(this.location,_.r,_.g,_.b,_.a))},c})(dt),wa=new Float32Array(16),vi=(function(o){function c(_,b){o.call(this,_,b),this.current=wa}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(_){if(_[12]!==this.current[12]||_[0]!==this.current[0])return this.current=_,void this.gl.uniformMatrix4fv(this.location,!1,_);for(var b=1;b<16;b++)if(_[b]!==this.current[b]){this.current=_,this.gl.uniformMatrix4fv(this.location,!1,_);break}},c})(dt);function ia(o){return[we(255*o.r,255*o.g),we(255*o.b,255*o.a)]}var Wa=function(o,c,_){this.value=o,this.uniformNames=c.map((function(b){return"u_"+b})),this.type=_};Wa.prototype.setUniform=function(o,c,_){o.set(_.constantOr(this.value))},Wa.prototype.getBinding=function(o,c,_){return this.type==="color"?new Ca(o,c):new Ft(o,c)};var Xa=function(o,c){this.uniformNames=c.map((function(_){return"u_"+_})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Xa.prototype.setConstantPatternPositions=function(o,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=o.tlbr},Xa.prototype.setUniform=function(o,c,_,b){var w=b==="u_pattern_to"?this.patternTo:b==="u_pattern_from"?this.patternFrom:b==="u_pixel_ratio_to"?this.pixelRatioTo:b==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&o.set(w)},Xa.prototype.getBinding=function(o,c,_){return _.substr(0,9)==="u_pattern"?new ya(o,c):new Ft(o,c)};var Ga=function(o,c,_,b){this.expression=o,this.type=_,this.maxValue=0,this.paintVertexAttributes=c.map((function(w){return{name:"a_"+w,type:"Float32",components:_==="color"?2:1,offset:0}})),this.paintVertexArray=new b};Ga.prototype.populatePaintArray=function(o,c,_,b,w){var S=this.paintVertexArray.length,M=this.expression.evaluate(new oi(0),c,{},b,[],w);this.paintVertexArray.resize(o),this._setPaintValue(S,o,M)},Ga.prototype.updatePaintArray=function(o,c,_,b){var w=this.expression.evaluate({zoom:0},_,b);this._setPaintValue(o,c,w)},Ga.prototype._setPaintValue=function(o,c,_){if(this.type==="color")for(var b=ia(_),w=o;w<c;w++)this.paintVertexArray.emplace(w,b[0],b[1]);else{for(var S=o;S<c;S++)this.paintVertexArray.emplace(S,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}},Ga.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ga.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Pa=function(o,c,_,b,w,S){this.expression=o,this.uniformNames=c.map((function(M){return"u_"+M+"_t"})),this.type=_,this.useIntegerZoom=b,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=c.map((function(M){return{name:"a_"+M,type:"Float32",components:_==="color"?4:2,offset:0}})),this.paintVertexArray=new S};Pa.prototype.populatePaintArray=function(o,c,_,b,w){var S=this.expression.evaluate(new oi(this.zoom),c,{},b,[],w),M=this.expression.evaluate(new oi(this.zoom+1),c,{},b,[],w),O=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(O,o,S,M)},Pa.prototype.updatePaintArray=function(o,c,_,b){var w=this.expression.evaluate({zoom:this.zoom},_,b),S=this.expression.evaluate({zoom:this.zoom+1},_,b);this._setPaintValue(o,c,w,S)},Pa.prototype._setPaintValue=function(o,c,_,b){if(this.type==="color")for(var w=ia(_),S=ia(b),M=o;M<c;M++)this.paintVertexArray.emplace(M,w[0],w[1],S[0],S[1]);else{for(var O=o;O<c;O++)this.paintVertexArray.emplace(O,_,b);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(b))}},Pa.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Pa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Pa.prototype.setUniform=function(o,c){var _=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,b=A(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);o.set(b)},Pa.prototype.getBinding=function(o,c,_){return new Ft(o,c)};var Ha=function(o,c,_,b,w,S){this.expression=o,this.type=c,this.useIntegerZoom=_,this.zoom=b,this.layerId=S,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w};Ha.prototype.populatePaintArray=function(o,c,_){var b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(b,o,c.patterns&&c.patterns[this.layerId],_)},Ha.prototype.updatePaintArray=function(o,c,_,b,w){this._setPaintValues(o,c,_.patterns&&_.patterns[this.layerId],w)},Ha.prototype._setPaintValues=function(o,c,_,b){if(b&&_){var w=b[_.min],S=b[_.mid],M=b[_.max];if(w&&S&&M)for(var O=o;O<c;O++)this.zoomInPaintVertexArray.emplace(O,S.tl[0],S.tl[1],S.br[0],S.br[1],w.tl[0],w.tl[1],w.br[0],w.br[1],S.pixelRatio,w.pixelRatio),this.zoomOutPaintVertexArray.emplace(O,S.tl[0],S.tl[1],S.br[0],S.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],S.pixelRatio,M.pixelRatio)}},Ha.prototype.upload=function(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Oe.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Oe.members,this.expression.isStateDependent))},Ha.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ra=function(o,c,_){this.binders={},this._buffers=[];var b=[];for(var w in o.paint._values)if(_(w)){var S=o.paint.get(w);if(S instanceof ls&&Qc(S.property.specification)){var M=yr(w,o.type),O=S.value,V=S.property.specification.type,H=S.property.useIntegerZoom,j=S.property.specification["property-type"],ae=j==="cross-faded"||j==="cross-faded-data-driven";if(O.kind==="constant")this.binders[w]=ae?new Xa(O.value,M):new Wa(O.value,M,V),b.push("/u_"+w);else if(O.kind==="source"||ae){var he=Wn(w,V,"source");this.binders[w]=ae?new Ha(O,V,H,c,he,o.id):new Ga(O,M,V,he),b.push("/a_"+w)}else{var ye=Wn(w,V,"composite");this.binders[w]=new Pa(O,M,V,H,c,ye),b.push("/z_"+w)}}}this.cacheKey=b.sort().join("")};Ra.prototype.getMaxValue=function(o){var c=this.binders[o];return c instanceof Ga||c instanceof Pa?c.maxValue:0},Ra.prototype.populatePaintArrays=function(o,c,_,b,w){for(var S in this.binders){var M=this.binders[S];(M instanceof Ga||M instanceof Pa||M instanceof Ha)&&M.populatePaintArray(o,c,_,b,w)}},Ra.prototype.setConstantPatternPositions=function(o,c){for(var _ in this.binders){var b=this.binders[_];b instanceof Xa&&b.setConstantPatternPositions(o,c)}},Ra.prototype.updatePaintArrays=function(o,c,_,b,w){var S=!1;for(var M in o)for(var O=0,V=c.getPositions(M);O<V.length;O+=1){var H=V[O],j=_.feature(H.index);for(var ae in this.binders){var he=this.binders[ae];if((he instanceof Ga||he instanceof Pa||he instanceof Ha)&&he.expression.isStateDependent===!0){var ye=b.paint.get(ae);he.expression=ye.value,he.updatePaintArray(H.start,H.end,j,o[M],w),S=!0}}}return S},Ra.prototype.defines=function(){var o=[];for(var c in this.binders){var _=this.binders[c];(_ instanceof Wa||_ instanceof Xa)&&o.push.apply(o,_.uniformNames.map((function(b){return"#define HAS_UNIFORM_"+b})))}return o},Ra.prototype.getBinderAttributes=function(){var o=[];for(var c in this.binders){var _=this.binders[c];if(_ instanceof Ga||_ instanceof Pa)for(var b=0;b<_.paintVertexAttributes.length;b++)o.push(_.paintVertexAttributes[b].name);else if(_ instanceof Ha)for(var w=0;w<Oe.members.length;w++)o.push(Oe.members[w].name)}return o},Ra.prototype.getBinderUniforms=function(){var o=[];for(var c in this.binders){var _=this.binders[c];if(_ instanceof Wa||_ instanceof Xa||_ instanceof Pa)for(var b=0,w=_.uniformNames;b<w.length;b+=1)o.push(w[b])}return o},Ra.prototype.getPaintVertexBuffers=function(){return this._buffers},Ra.prototype.getUniforms=function(o,c){var _=[];for(var b in this.binders){var w=this.binders[b];if(w instanceof Wa||w instanceof Xa||w instanceof Pa)for(var S=0,M=w.uniformNames;S<M.length;S+=1){var O=M[S];if(c[O]){var V=w.getBinding(o,c[O],O);_.push({name:O,property:b,binding:V})}}}return _},Ra.prototype.setUniforms=function(o,c,_,b){for(var w=0,S=c;w<S.length;w+=1){var M=S[w],O=M.name,V=M.property;this.binders[V].setUniform(M.binding,b,_.get(V),O)}},Ra.prototype.updatePaintBuffers=function(o){for(var c in this._buffers=[],this.binders){var _=this.binders[c];if(o&&_ instanceof Ha){var b=o.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(_ instanceof Ga||_ instanceof Pa)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}},Ra.prototype.upload=function(o){for(var c in this.binders){var _=this.binders[c];(_ instanceof Ga||_ instanceof Pa||_ instanceof Ha)&&_.upload(o)}this.updatePaintBuffers()},Ra.prototype.destroy=function(){for(var o in this.binders){var c=this.binders[o];(c instanceof Ga||c instanceof Pa||c instanceof Ha)&&c.destroy()}};var Ta=function(o,c,_){_===void 0&&(_=function(){return!0}),this.programConfigurations={};for(var b=0,w=o;b<w.length;b+=1){var S=w[b];this.programConfigurations[S.id]=new Ra(S,c,_)}this.needsUpload=!1,this._featureMap=new Ke,this._bufferOffset=0};function yr(o,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(c+"-","").replace(/-/g,"_")]}function Wn(o,c,_){var b={color:{source:yh,composite:Gf},number:{source:tc,composite:yh}},w=(function(S){return{"line-pattern":{source:Gl,composite:Gl},"fill-pattern":{source:Gl,composite:Gl},"fill-extrusion-pattern":{source:Gl,composite:Gl}}[S]})(o);return w&&w[_]||b[c][_]}Ta.prototype.populatePaintArrays=function(o,c,_,b,w,S){for(var M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(o,c,b,w,S);c.id!==void 0&&this._featureMap.add(c.id,_,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0},Ta.prototype.updatePaintArrays=function(o,c,_,b){for(var w=0,S=_;w<S.length;w+=1){var M=S[w];this.needsUpload=this.programConfigurations[M.id].updatePaintArrays(o,this._featureMap,c,M,b)||this.needsUpload}},Ta.prototype.get=function(o){return this.programConfigurations[o]},Ta.prototype.upload=function(o){if(this.needsUpload){for(var c in this.programConfigurations)this.programConfigurations[c].upload(o);this.needsUpload=!1}},Ta.prototype.destroy=function(){for(var o in this.programConfigurations)this.programConfigurations[o].destroy()},na("ConstantBinder",Wa),na("CrossFadedConstantBinder",Xa),na("SourceExpressionBinder",Ga),na("CrossFadedCompositeBinder",Ha),na("CompositeExpressionBinder",Pa),na("ProgramConfiguration",Ra,{omit:["_buffers"]}),na("ProgramConfigurationSet",Ta);var ts=Math.pow(2,14)-1,Lr=-ts-1;function Rn(o){for(var c=8192/o.extent,_=o.loadGeometry(),b=0;b<_.length;b++)for(var w=_[b],S=0;S<w.length;S++){var M=w[S],O=Math.round(M.x*c),V=Math.round(M.y*c);M.x=A(O,Lr,ts),M.y=A(V,Lr,ts),(O<M.x||O>M.x+1||V<M.y||V>M.y+1)&&de("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return _}function Hn(o,c){return{type:o.type,id:o.id,properties:o.properties,geometry:c?Rn(o):[]}}function Vs(o,c,_,b,w){o.emplaceBack(2*c+(b+1)/2,2*_+(w+1)/2)}var cs=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((function(c){return c.id})),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new nd,this.indexArray=new Qu,this.segments=new ve,this.programConfigurations=new Ta(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter((function(c){return c.isStateDependent()})).map((function(c){return c.id}))};function ac(o,c){for(var _=0;_<o.length;_++)if(Wl(c,o[_]))return!0;for(var b=0;b<c.length;b++)if(Wl(o,c[b]))return!0;return!!K_(o,c)}function ws(o,c,_){return!!Wl(o,c)||!!ic(c,o,_)}function ul(o,c){if(o.length===1)return j_(c,o[0]);for(var _=0;_<c.length;_++)for(var b=c[_],w=0;w<b.length;w++)if(Wl(o,b[w]))return!0;for(var S=0;S<o.length;S++)if(j_(c,o[S]))return!0;for(var M=0;M<c.length;M++)if(K_(o,c[M]))return!0;return!1}function Go(o,c,_){if(o.length>1){if(K_(o,c))return!0;for(var b=0;b<c.length;b++)if(ic(c[b],o,_))return!0}for(var w=0;w<o.length;w++)if(ic(o[w],c,_))return!0;return!1}function K_(o,c){if(o.length===0||c.length===0)return!1;for(var _=0;_<o.length-1;_++)for(var b=o[_],w=o[_+1],S=0;S<c.length-1;S++)if(xh(b,w,c[S],c[S+1]))return!0;return!1}function xh(o,c,_,b){return N(o,_,b)!==N(c,_,b)&&N(o,c,_)!==N(o,c,b)}function ic(o,c,_){var b=_*_;if(c.length===1)return o.distSqr(c[0])<b;for(var w=1;w<c.length;w++)if(wh(o,c[w-1],c[w])<b)return!0;return!1}function wh(o,c,_){var b=c.distSqr(_);if(b===0)return o.distSqr(c);var w=((o.x-c.x)*(_.x-c.x)+(o.y-c.y)*(_.y-c.y))/b;return o.distSqr(w<0?c:w>1?_:_.sub(c)._mult(w)._add(c))}function j_(o,c){for(var _,b,w,S=!1,M=0;M<o.length;M++)for(var O=0,V=(_=o[M]).length-1;O<_.length;V=O++)(b=_[O]).y>c.y!=(w=_[V]).y>c.y&&c.x<(w.x-b.x)*(c.y-b.y)/(w.y-b.y)+b.x&&(S=!S);return S}function Wl(o,c){for(var _=!1,b=0,w=o.length-1;b<o.length;w=b++){var S=o[b],M=o[w];S.y>c.y!=M.y>c.y&&c.x<(M.x-S.x)*(c.y-S.y)/(M.y-S.y)+S.x&&(_=!_)}return _}function $_(o,c,_){var b=_[0],w=_[2];if(o.x<b.x&&c.x<b.x||o.x>w.x&&c.x>w.x||o.y<b.y&&c.y<b.y||o.y>w.y&&c.y>w.y)return!1;var S=N(o,c,_[0]);return S!==N(o,c,_[1])||S!==N(o,c,_[2])||S!==N(o,c,_[3])}function Ol(o,c,_){var b=c.paint.get(o).value;return b.kind==="constant"?b.value:_.programConfigurations.get(c.id).getMaxValue(o)}function br(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function ou(o,c,_,b,w){if(!c[0]&&!c[1])return o;var S=h.convert(c)._mult(w);_==="viewport"&&S._rotate(-b);for(var M=[],O=0;O<o.length;O++)M.push(o[O].sub(S));return M}cs.prototype.populate=function(o,c,_){var b=this.layers[0],w=[],S=null;b.type==="circle"&&(S=b.layout.get("circle-sort-key"));for(var M=0,O=o;M<O.length;M+=1){var V=O[M],H=V.feature,j=V.id,ae=V.index,he=V.sourceLayerIndex,ye=this.layers[0]._featureFilter.needGeometry,Le=Hn(H,ye);if(this.layers[0]._featureFilter.filter(new oi(this.zoom),Le,_)){var Pe=S?S.evaluate(Le,{},_):void 0,qe={id:j,properties:H.properties,type:H.type,sourceLayerIndex:he,index:ae,geometry:ye?Le.geometry:Rn(H),patterns:{},sortKey:Pe};w.push(qe)}}S&&w.sort((function(Vt,ma){return Vt.sortKey-ma.sortKey}));for(var Be=0,et=w;Be<et.length;Be+=1){var it=et[Be],nt=it.geometry,lt=it.index,pt=it.sourceLayerIndex,Mt=o[lt].feature;this.addFeature(it,nt,lt,_),c.featureIndex.insert(Mt,nt,lt,pt,this.index)}},cs.prototype.update=function(o,c,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,_)},cs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},cs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},cs.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,be),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},cs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},cs.prototype.addFeature=function(o,c,_,b){for(var w=0,S=c;w<S.length;w+=1)for(var M=0,O=S[w];M<O.length;M+=1){var V=O[M],H=V.x,j=V.y;if(!(H<0||H>=8192||j<0||j>=8192)){var ae=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),he=ae.vertexLength;Vs(this.layoutVertexArray,H,j,-1,-1),Vs(this.layoutVertexArray,H,j,1,-1),Vs(this.layoutVertexArray,H,j,1,1),Vs(this.layoutVertexArray,H,j,-1,1),this.indexArray.emplaceBack(he,he+1,he+2),this.indexArray.emplaceBack(he,he+3,he+2),ae.vertexLength+=4,ae.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,_,{},b)},na("CircleBucket",cs,{omit:["layers"]});var nc=new Hr({"circle-sort-key":new oa(pe.layout_circle["circle-sort-key"])}),sd={paint:new Hr({"circle-radius":new oa(pe.paint_circle["circle-radius"]),"circle-color":new oa(pe.paint_circle["circle-color"]),"circle-blur":new oa(pe.paint_circle["circle-blur"]),"circle-opacity":new oa(pe.paint_circle["circle-opacity"]),"circle-translate":new pa(pe.paint_circle["circle-translate"]),"circle-translate-anchor":new pa(pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new pa(pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new pa(pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new oa(pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new oa(pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new oa(pe.paint_circle["circle-stroke-opacity"])}),layout:nc},Pi=typeof Float32Array<"u"?Float32Array:Array;function _o(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Cs(o,c,_){var b=c[0],w=c[1],S=c[2],M=c[3],O=c[4],V=c[5],H=c[6],j=c[7],ae=c[8],he=c[9],ye=c[10],Le=c[11],Pe=c[12],qe=c[13],Be=c[14],et=c[15],it=_[0],nt=_[1],lt=_[2],pt=_[3];return o[0]=it*b+nt*O+lt*ae+pt*Pe,o[1]=it*w+nt*V+lt*he+pt*qe,o[2]=it*S+nt*H+lt*ye+pt*Be,o[3]=it*M+nt*j+lt*Le+pt*et,o[4]=(it=_[4])*b+(nt=_[5])*O+(lt=_[6])*ae+(pt=_[7])*Pe,o[5]=it*w+nt*V+lt*he+pt*qe,o[6]=it*S+nt*H+lt*ye+pt*Be,o[7]=it*M+nt*j+lt*Le+pt*et,o[8]=(it=_[8])*b+(nt=_[9])*O+(lt=_[10])*ae+(pt=_[11])*Pe,o[9]=it*w+nt*V+lt*he+pt*qe,o[10]=it*S+nt*H+lt*ye+pt*Be,o[11]=it*M+nt*j+lt*Le+pt*et,o[12]=(it=_[12])*b+(nt=_[13])*O+(lt=_[14])*ae+(pt=_[15])*Pe,o[13]=it*w+nt*V+lt*he+pt*qe,o[14]=it*S+nt*H+lt*ye+pt*Be,o[15]=it*M+nt*j+lt*Le+pt*et,o}Math.hypot||(Math.hypot=function(){for(var o=arguments,c=0,_=arguments.length;_--;)c+=o[_]*o[_];return Math.sqrt(c)});var od,RI=Cs;function Wf(o,c,_){var b=c[0],w=c[1],S=c[2],M=c[3];return o[0]=_[0]*b+_[4]*w+_[8]*S+_[12]*M,o[1]=_[1]*b+_[5]*w+_[9]*S+_[13]*M,o[2]=_[2]*b+_[6]*w+_[10]*S+_[14]*M,o[3]=_[3]*b+_[7]*w+_[11]*S+_[15]*M,o}od=new Pi(3),Pi!=Float32Array&&(od[0]=0,od[1]=0,od[2]=0),(function(){var o=new Pi(4);Pi!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0,o[3]=0)})();var kI=((function(){var o=new Pi(2);Pi!=Float32Array&&(o[0]=0,o[1]=0)})(),(function(o){function c(_){o.call(this,_,sd)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.createBucket=function(_){return new cs(_)},c.prototype.queryRadius=function(_){var b=_;return Ol("circle-radius",this,b)+Ol("circle-stroke-width",this,b)+br(this.paint.get("circle-translate"))},c.prototype.queryIntersectsFeature=function(_,b,w,S,M,O,V,H){for(var j=ou(_,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),O.angle,V),ae=this.paint.get("circle-radius").evaluate(b,w)+this.paint.get("circle-stroke-width").evaluate(b,w),he=this.paint.get("circle-pitch-alignment")==="map",ye=he?j:(function(Mt,Vt){return Mt.map((function(ma){return J_(ma,Vt)}))})(j,H),Le=he?ae*V:ae,Pe=0,qe=S;Pe<qe.length;Pe+=1)for(var Be=0,et=qe[Pe];Be<et.length;Be+=1){var it=et[Be],nt=he?it:J_(it,H),lt=Le,pt=Wf([],[it.x,it.y,0,1],H);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?lt*=pt[3]/O.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(lt*=O.cameraToCenterDistance/pt[3]),ws(ye,nt,lt))return!0}return!1},c})(Pl));function J_(o,c){var _=Wf([],[o.x,o.y,0,1],c);return new h(_[0]/_[3],_[1]/_[3])}var _v=(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c})(cs);function Ch(o,c,_,b){var w=c.width,S=c.height;if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==w*S*_)throw new RangeError("mismatched image size")}else b=new Uint8Array(w*S*_);return o.width=w,o.height=S,o.data=b,o}function Of(o,c,_){var b=c.width,w=c.height;if(b!==o.width||w!==o.height){var S=Ch({},{width:b,height:w},_);PI(o,S,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,b),height:Math.min(o.height,w)},_),o.width=b,o.height=w,o.data=S.data}}function PI(o,c,_,b,w,S){if(w.width===0||w.height===0)return c;if(w.width>o.width||w.height>o.height||_.x>o.width-w.width||_.y>o.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>c.width||w.height>c.height||b.x>c.width-w.width||b.y>c.height-w.height)throw new RangeError("out of range destination coordinates for image copy");for(var M=o.data,O=c.data,V=0;V<w.height;V++)for(var H=((_.y+V)*o.width+_.x)*S,j=((b.y+V)*c.width+b.x)*S,ae=0;ae<w.width*S;ae++)O[j+ae]=M[H+ae];return c}na("HeatmapBucket",_v,{omit:["layers"]});var Q_=function(o,c){Ch(this,o,1,c)};Q_.prototype.resize=function(o){Of(this,o,1)},Q_.prototype.clone=function(){return new Q_({width:this.width,height:this.height},new Uint8Array(this.data))},Q_.copy=function(o,c,_,b,w){PI(o,c,_,b,w,1)};var Zs=function(o,c){Ch(this,o,4,c)};Zs.prototype.resize=function(o){Of(this,o,4)},Zs.prototype.replace=function(o,c){c?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o},Zs.prototype.clone=function(){return new Zs({width:this.width,height:this.height},new Uint8Array(this.data))},Zs.copy=function(o,c,_,b,w){PI(o,c,_,b,w,4)},na("AlphaImage",Q_),na("RGBAImage",Zs);var AB={paint:new Hr({"heatmap-radius":new oa(pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new oa(pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new pa(pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ll(pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new pa(pe.paint_heatmap["heatmap-opacity"])})};function NE(o){var c={},_=o.resolution||256,b=o.clips?o.clips.length:1,w=o.image||new Zs({width:_,height:b}),S=function(Le,Pe,qe){c[o.evaluationKey]=qe;var Be=o.expression.evaluate(c);w.data[Le+Pe+0]=Math.floor(255*Be.r/Be.a),w.data[Le+Pe+1]=Math.floor(255*Be.g/Be.a),w.data[Le+Pe+2]=Math.floor(255*Be.b/Be.a),w.data[Le+Pe+3]=Math.floor(255*Be.a)};if(o.clips)for(var M=0,O=0;M<b;++M,O+=4*_)for(var V=0,H=0;V<_;V++,H+=4){var j=V/(_-1),ae=o.clips[M];S(O,H,ae.start*(1-j)+ae.end*j)}else for(var he=0,ye=0;he<_;he++,ye+=4)S(0,ye,he/(_-1));return w}var TB=(function(o){function c(_){o.call(this,_,AB),this._updateColorRamp()}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.createBucket=function(_){return new _v(_)},c.prototype._handleSpecialPaintPropertyUpdate=function(_){_==="heatmap-color"&&this._updateColorRamp()},c.prototype._updateColorRamp=function(){this.colorRamp=NE({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},c.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},c.prototype.queryRadius=function(){return 0},c.prototype.queryIntersectsFeature=function(){return!1},c.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},c})(Pl),EB={paint:new Hr({"hillshade-illumination-direction":new pa(pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new pa(pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new pa(pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new pa(pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new pa(pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new pa(pe.paint_hillshade["hillshade-accent-color"])})},MB=(function(o){function c(_){o.call(this,_,EB)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},c})(Pl),LB=Mr([{name:"a_pos",components:2,type:"Int16"}],4).members,GI=mv,RB=mv;function mv(o,c,_){_=_||2;var b,w,S,M,O,V,H,j=c&&c.length,ae=j?c[0]*_:o.length,he=BE(o,0,ae,_,!0),ye=[];if(!he||he.next===he.prev)return ye;if(j&&(he=(function(Pe,qe,Be,et){var it,nt,lt,pt=[];for(it=0,nt=qe.length;it<nt;it++)(lt=BE(Pe,qe[it]*et,it<nt-1?qe[it+1]*et:Pe.length,et,!1))===lt.next&&(lt.steiner=!0),pt.push(BB(lt));for(pt.sort(OB),it=0;it<pt.length;it++)FB(pt[it],Be),Be=Ih(Be,Be.next);return Be})(o,c,he,_)),o.length>80*_){b=S=o[0],w=M=o[1];for(var Le=_;Le<ae;Le+=_)(O=o[Le])<b&&(b=O),(V=o[Le+1])<w&&(w=V),O>S&&(S=O),V>M&&(M=V);H=(H=Math.max(S-b,M-w))!==0?1/H:0}return wy(he,ye,_,b,w,H),ye}function BE(o,c,_,b,w){var S,M;if(w===FI(o,c,_,b)>0)for(S=c;S<_;S+=b)M=ZE(S,o[S],o[S+1],M);else for(S=_-b;S>=c;S-=b)M=ZE(S,o[S],o[S+1],M);return M&&fv(M,M.next)&&(Iy(M),M=M.next),M}function Ih(o,c){if(!o)return o;c||(c=o);var _,b=o;do if(_=!1,b.steiner||!fv(b,b.next)&&sr(b.prev,b,b.next)!==0)b=b.next;else{if(Iy(b),(b=c=b.prev)===b.next)break;_=!0}while(_||b!==c);return c}function wy(o,c,_,b,w,S,M){if(o){!M&&S&&(function(j,ae,he,ye){var Le=j;do Le.z===null&&(Le.z=WI(Le.x,Le.y,ae,he,ye)),Le.prevZ=Le.prev,Le.nextZ=Le.next,Le=Le.next;while(Le!==j);Le.prevZ.nextZ=null,Le.prevZ=null,(function(Pe){var qe,Be,et,it,nt,lt,pt,Mt,Vt=1;do{for(Be=Pe,Pe=null,nt=null,lt=0;Be;){for(lt++,et=Be,pt=0,qe=0;qe<Vt&&(pt++,et=et.nextZ);qe++);for(Mt=Vt;pt>0||Mt>0&&et;)pt!==0&&(Mt===0||!et||Be.z<=et.z)?(it=Be,Be=Be.nextZ,pt--):(it=et,et=et.nextZ,Mt--),nt?nt.nextZ=it:Pe=it,it.prevZ=nt,nt=it;Be=et}nt.nextZ=null,Vt*=2}while(lt>1)})(Le)})(o,b,w,S);for(var O,V,H=o;o.prev!==o.next;)if(O=o.prev,V=o.next,S?PB(o,b,w,S):kB(o))c.push(O.i/_),c.push(o.i/_),c.push(V.i/_),Iy(o),o=V.next,H=V.next;else if((o=V)===H){M?M===1?wy(o=GB(Ih(o),c,_),c,_,b,w,S,2):M===2&&WB(o,c,_,b,w,S):wy(Ih(o),c,_,b,w,S,1);break}}}function kB(o){var c=o.prev,_=o,b=o.next;if(sr(c,_,b)>=0)return!1;for(var w=o.next.next;w!==o.prev;){if(Ff(c.x,c.y,_.x,_.y,b.x,b.y,w.x,w.y)&&sr(w.prev,w,w.next)>=0)return!1;w=w.next}return!0}function PB(o,c,_,b){var w=o.prev,S=o,M=o.next;if(sr(w,S,M)>=0)return!1;for(var O=w.x>S.x?w.x>M.x?w.x:M.x:S.x>M.x?S.x:M.x,V=w.y>S.y?w.y>M.y?w.y:M.y:S.y>M.y?S.y:M.y,H=WI(w.x<S.x?w.x<M.x?w.x:M.x:S.x<M.x?S.x:M.x,w.y<S.y?w.y<M.y?w.y:M.y:S.y<M.y?S.y:M.y,c,_,b),j=WI(O,V,c,_,b),ae=o.prevZ,he=o.nextZ;ae&&ae.z>=H&&he&&he.z<=j;){if(ae!==o.prev&&ae!==o.next&&Ff(w.x,w.y,S.x,S.y,M.x,M.y,ae.x,ae.y)&&sr(ae.prev,ae,ae.next)>=0||(ae=ae.prevZ,he!==o.prev&&he!==o.next&&Ff(w.x,w.y,S.x,S.y,M.x,M.y,he.x,he.y)&&sr(he.prev,he,he.next)>=0))return!1;he=he.nextZ}for(;ae&&ae.z>=H;){if(ae!==o.prev&&ae!==o.next&&Ff(w.x,w.y,S.x,S.y,M.x,M.y,ae.x,ae.y)&&sr(ae.prev,ae,ae.next)>=0)return!1;ae=ae.prevZ}for(;he&&he.z<=j;){if(he!==o.prev&&he!==o.next&&Ff(w.x,w.y,S.x,S.y,M.x,M.y,he.x,he.y)&&sr(he.prev,he,he.next)>=0)return!1;he=he.nextZ}return!0}function GB(o,c,_){var b=o;do{var w=b.prev,S=b.next.next;!fv(w,S)&&DE(w,b,b.next,S)&&Cy(w,S)&&Cy(S,w)&&(c.push(w.i/_),c.push(b.i/_),c.push(S.i/_),Iy(b),Iy(b.next),b=o=S),b=b.next}while(b!==o);return Ih(b)}function WB(o,c,_,b,w,S){var M=o;do{for(var O=M.next.next;O!==M.prev;){if(M.i!==O.i&&DB(M,O)){var V=VE(M,O);return M=Ih(M,M.next),V=Ih(V,V.next),wy(M,c,_,b,w,S),void wy(V,c,_,b,w,S)}O=O.next}M=M.next}while(M!==o)}function OB(o,c){return o.x-c.x}function FB(o,c){if(c=(function(b,w){var S,M=w,O=b.x,V=b.y,H=-1/0;do{if(V<=M.y&&V>=M.next.y&&M.next.y!==M.y){var j=M.x+(V-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(j<=O&&j>H){if(H=j,j===O){if(V===M.y)return M;if(V===M.next.y)return M.next}S=M.x<M.next.x?M:M.next}}M=M.next}while(M!==w);if(!S)return null;if(O===H)return S;var ae,he=S,ye=S.x,Le=S.y,Pe=1/0;M=S;do O>=M.x&&M.x>=ye&&O!==M.x&&Ff(V<Le?O:H,V,ye,Le,V<Le?H:O,V,M.x,M.y)&&(ae=Math.abs(V-M.y)/(O-M.x),Cy(M,b)&&(ae<Pe||ae===Pe&&(M.x>S.x||M.x===S.x&&NB(S,M)))&&(S=M,Pe=ae)),M=M.next;while(M!==he);return S})(o,c)){var _=VE(c,o);Ih(c,c.next),Ih(_,_.next)}}function NB(o,c){return sr(o.prev,o,c.prev)<0&&sr(c.next,o,o.next)<0}function WI(o,c,_,b,w){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-_)*w)|o<<8))|o<<4))|o<<2))|o<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-b)*w)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function BB(o){var c=o,_=o;do(c.x<_.x||c.x===_.x&&c.y<_.y)&&(_=c),c=c.next;while(c!==o);return _}function Ff(o,c,_,b,w,S,M,O){return(w-M)*(c-O)-(o-M)*(S-O)>=0&&(o-M)*(b-O)-(_-M)*(c-O)>=0&&(_-M)*(S-O)-(w-M)*(b-O)>=0}function DB(o,c){return o.next.i!==c.i&&o.prev.i!==c.i&&!(function(_,b){var w=_;do{if(w.i!==_.i&&w.next.i!==_.i&&w.i!==b.i&&w.next.i!==b.i&&DE(w,w.next,_,b))return!0;w=w.next}while(w!==_);return!1})(o,c)&&(Cy(o,c)&&Cy(c,o)&&(function(_,b){var w=_,S=!1,M=(_.x+b.x)/2,O=(_.y+b.y)/2;do w.y>O!=w.next.y>O&&w.next.y!==w.y&&M<(w.next.x-w.x)*(O-w.y)/(w.next.y-w.y)+w.x&&(S=!S),w=w.next;while(w!==_);return S})(o,c)&&(sr(o.prev,o,c.prev)||sr(o,c.prev,c))||fv(o,c)&&sr(o.prev,o,o.next)>0&&sr(c.prev,c,c.next)>0)}function sr(o,c,_){return(c.y-o.y)*(_.x-c.x)-(c.x-o.x)*(_.y-c.y)}function fv(o,c){return o.x===c.x&&o.y===c.y}function DE(o,c,_,b){var w=pv(sr(o,c,_)),S=pv(sr(o,c,b)),M=pv(sr(_,b,o)),O=pv(sr(_,b,c));return w!==S&&M!==O||!(w!==0||!gv(o,_,c))||!(S!==0||!gv(o,b,c))||!(M!==0||!gv(_,o,b))||!(O!==0||!gv(_,c,b))}function gv(o,c,_){return c.x<=Math.max(o.x,_.x)&&c.x>=Math.min(o.x,_.x)&&c.y<=Math.max(o.y,_.y)&&c.y>=Math.min(o.y,_.y)}function pv(o){return o>0?1:o<0?-1:0}function Cy(o,c){return sr(o.prev,o,o.next)<0?sr(o,c,o.next)>=0&&sr(o,o.prev,c)>=0:sr(o,c,o.prev)<0||sr(o,o.next,c)<0}function VE(o,c){var _=new OI(o.i,o.x,o.y),b=new OI(c.i,c.x,c.y),w=o.next,S=c.prev;return o.next=c,c.prev=o,_.next=w,w.prev=_,b.next=_,_.prev=b,S.next=b,b.prev=S,b}function ZE(o,c,_,b){var w=new OI(o,c,_);return b?(w.next=b.next,w.prev=b,b.next.prev=w,b.next=w):(w.prev=w,w.next=w),w}function Iy(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function OI(o,c,_){this.i=o,this.x=c,this.y=_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function FI(o,c,_,b){for(var w=0,S=c,M=_-b;S<_;S+=b)w+=(o[M]-o[S])*(o[S+1]+o[M+1]),M=S;return w}function VB(o,c,_,b,w){(function S(M,O,V,H,j){for(;H>V;){if(H-V>600){var ae=H-V+1,he=O-V+1,ye=Math.log(ae),Le=.5*Math.exp(2*ye/3),Pe=.5*Math.sqrt(ye*Le*(ae-Le)/ae)*(he-ae/2<0?-1:1);S(M,O,Math.max(V,Math.floor(O-he*Le/ae+Pe)),Math.min(H,Math.floor(O+(ae-he)*Le/ae+Pe)),j)}var qe=M[O],Be=V,et=H;for(Sy(M,V,O),j(M[H],qe)>0&&Sy(M,V,H);Be<et;){for(Sy(M,Be,et),Be++,et--;j(M[Be],qe)<0;)Be++;for(;j(M[et],qe)>0;)et--}j(M[V],qe)===0?Sy(M,V,et):Sy(M,++et,H),et<=O&&(V=et+1),O<=et&&(H=et-1)}})(o,c,_,b||o.length-1,w||ZB)}function Sy(o,c,_){var b=o[c];o[c]=o[_],o[_]=b}function ZB(o,c){return o<c?-1:o>c?1:0}function NI(o,c){var _=o.length;if(_<=1)return[o];for(var b,w,S=[],M=0;M<_;M++){var O=ne(o[M]);O!==0&&(o[M].area=Math.abs(O),w===void 0&&(w=O<0),w===O<0?(b&&S.push(b),b=[o[M]]):b.push(o[M]))}if(b&&S.push(b),c>1)for(var V=0;V<S.length;V++)S[V].length<=c||(VB(S[V],c,1,S[V].length-1,zB),S[V]=S[V].slice(0,c));return S}function zB(o,c){return c.area-o.area}function BI(o,c,_){for(var b=_.patternDependencies,w=!1,S=0,M=c;S<M.length;S+=1){var O=M[S].paint.get(o+"-pattern");O.isConstant()||(w=!0);var V=O.constantOr(null);V&&(w=!0,b[V.to]=!0,b[V.from]=!0)}return w}function DI(o,c,_,b,w){for(var S=w.patternDependencies,M=0,O=c;M<O.length;M+=1){var V=O[M],H=V.paint.get(o+"-pattern").value;if(H.kind!=="constant"){var j=H.evaluate({zoom:b-1},_,{},w.availableImages),ae=H.evaluate({zoom:b},_,{},w.availableImages),he=H.evaluate({zoom:b+1},_,{},w.availableImages);ae=ae&&ae.name?ae.name:ae,he=he&&he.name?he.name:he,S[j=j&&j.name?j.name:j]=!0,S[ae]=!0,S[he]=!0,_.patterns[V.id]={min:j,mid:ae,max:he}}}return _}mv.deviation=function(o,c,_,b){var w=c&&c.length,S=Math.abs(FI(o,0,w?c[0]*_:o.length,_));if(w)for(var M=0,O=c.length;M<O;M++)S-=Math.abs(FI(o,c[M]*_,M<O-1?c[M+1]*_:o.length,_));var V=0;for(M=0;M<b.length;M+=3){var H=b[M]*_,j=b[M+1]*_,ae=b[M+2]*_;V+=Math.abs((o[H]-o[ae])*(o[j+1]-o[H+1])-(o[H]-o[j])*(o[ae+1]-o[H+1]))}return S===0&&V===0?0:Math.abs((V-S)/S)},mv.flatten=function(o){for(var c=o[0][0].length,_={vertices:[],holes:[],dimensions:c},b=0,w=0;w<o.length;w++){for(var S=0;S<o[w].length;S++)for(var M=0;M<c;M++)_.vertices.push(o[w][S][M]);w>0&&_.holes.push(b+=o[w-1].length)}return _},GI.default=RB;var lu=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((function(c){return c.id})),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new nd,this.indexArray=new Qu,this.indexArray2=new Y_,this.programConfigurations=new Ta(o.layers,o.zoom),this.segments=new ve,this.segments2=new ve,this.stateDependentLayerIds=this.layers.filter((function(c){return c.isStateDependent()})).map((function(c){return c.id}))};lu.prototype.populate=function(o,c,_){this.hasPattern=BI("fill",this.layers,c);for(var b=this.layers[0].layout.get("fill-sort-key"),w=[],S=0,M=o;S<M.length;S+=1){var O=M[S],V=O.feature,H=O.id,j=O.index,ae=O.sourceLayerIndex,he=this.layers[0]._featureFilter.needGeometry,ye=Hn(V,he);if(this.layers[0]._featureFilter.filter(new oi(this.zoom),ye,_)){var Le=b?b.evaluate(ye,{},_,c.availableImages):void 0,Pe={id:H,properties:V.properties,type:V.type,sourceLayerIndex:ae,index:j,geometry:he?ye.geometry:Rn(V),patterns:{},sortKey:Le};w.push(Pe)}}b&&w.sort((function(Mt,Vt){return Mt.sortKey-Vt.sortKey}));for(var qe=0,Be=w;qe<Be.length;qe+=1){var et=Be[qe],it=et.geometry,nt=et.index,lt=et.sourceLayerIndex;if(this.hasPattern){var pt=DI("fill",this.layers,et,this.zoom,c);this.patternFeatures.push(pt)}else this.addFeature(et,it,nt,_,{});c.featureIndex.insert(o[nt].feature,it,nt,lt,this.index)}},lu.prototype.update=function(o,c,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,_)},lu.prototype.addFeatures=function(o,c,_){for(var b=0,w=this.patternFeatures;b<w.length;b+=1){var S=w[b];this.addFeature(S,S.geometry,S.index,c,_)}},lu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},lu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},lu.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,LB),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0},lu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},lu.prototype.addFeature=function(o,c,_,b,w){for(var S=0,M=NI(c,500);S<M.length;S+=1){for(var O=M[S],V=0,H=0,j=O;H<j.length;H+=1)V+=j[H].length;for(var ae=this.segments.prepareSegment(V,this.layoutVertexArray,this.indexArray),he=ae.vertexLength,ye=[],Le=[],Pe=0,qe=O;Pe<qe.length;Pe+=1){var Be=qe[Pe];if(Be.length!==0){Be!==O[0]&&Le.push(ye.length/2);var et=this.segments2.prepareSegment(Be.length,this.layoutVertexArray,this.indexArray2),it=et.vertexLength;this.layoutVertexArray.emplaceBack(Be[0].x,Be[0].y),this.indexArray2.emplaceBack(it+Be.length-1,it),ye.push(Be[0].x),ye.push(Be[0].y);for(var nt=1;nt<Be.length;nt++)this.layoutVertexArray.emplaceBack(Be[nt].x,Be[nt].y),this.indexArray2.emplaceBack(it+nt-1,it+nt),ye.push(Be[nt].x),ye.push(Be[nt].y);et.vertexLength+=Be.length,et.primitiveLength+=Be.length}}for(var lt=GI(ye,Le),pt=0;pt<lt.length;pt+=3)this.indexArray.emplaceBack(he+lt[pt],he+lt[pt+1],he+lt[pt+2]);ae.vertexLength+=V,ae.primitiveLength+=lt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,_,w,b)},na("FillBucket",lu,{omit:["layers","patternFeatures"]});var UB=new Hr({"fill-sort-key":new oa(pe.layout_fill["fill-sort-key"])}),HB={paint:new Hr({"fill-antialias":new pa(pe.paint_fill["fill-antialias"]),"fill-opacity":new oa(pe.paint_fill["fill-opacity"]),"fill-color":new oa(pe.paint_fill["fill-color"]),"fill-outline-color":new oa(pe.paint_fill["fill-outline-color"]),"fill-translate":new pa(pe.paint_fill["fill-translate"]),"fill-translate-anchor":new pa(pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Lf(pe.paint_fill["fill-pattern"])}),layout:UB},XB=(function(o){function c(_){o.call(this,_,HB)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.recalculate=function(_,b){o.prototype.recalculate.call(this,_,b);var w=this.paint._values["fill-outline-color"];w.value.kind==="constant"&&w.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},c.prototype.createBucket=function(_){return new lu(_)},c.prototype.queryRadius=function(){return br(this.paint.get("fill-translate"))},c.prototype.queryIntersectsFeature=function(_,b,w,S,M,O,V){return ul(ou(_,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),O.angle,V),S)},c.prototype.isTileClipped=function(){return!0},c})(Pl),qB=Mr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,zE=Nf;function Nf(o,c,_,b,w){this.properties={},this.extent=_,this.type=0,this._pbf=o,this._geometry=-1,this._keys=b,this._values=w,o.readFields(YB,this,c)}function YB(o,c,_){o==1?c.id=_.readVarint():o==2?(function(b,w){for(var S=b.readVarint()+b.pos;b.pos<S;){var M=w._keys[b.readVarint()],O=w._values[b.readVarint()];w.properties[M]=O}})(_,c):o==3?c.type=_.readVarint():o==4&&(c._geometry=_.pos)}function KB(o){for(var c,_,b=0,w=0,S=o.length,M=S-1;w<S;M=w++)b+=((_=o[M]).x-(c=o[w]).x)*(c.y+_.y);return b}Nf.types=["Unknown","Point","LineString","Polygon"],Nf.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var c,_=o.readVarint()+o.pos,b=1,w=0,S=0,M=0,O=[];o.pos<_;){if(w<=0){var V=o.readVarint();b=7&V,w=V>>3}if(w--,b===1||b===2)S+=o.readSVarint(),M+=o.readSVarint(),b===1&&(c&&O.push(c),c=[]),c.push(new h(S,M));else{if(b!==7)throw new Error("unknown command "+b);c&&c.push(c[0].clone())}}return c&&O.push(c),O},Nf.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var c=o.readVarint()+o.pos,_=1,b=0,w=0,S=0,M=1/0,O=-1/0,V=1/0,H=-1/0;o.pos<c;){if(b<=0){var j=o.readVarint();_=7&j,b=j>>3}if(b--,_===1||_===2)(w+=o.readSVarint())<M&&(M=w),w>O&&(O=w),(S+=o.readSVarint())<V&&(V=S),S>H&&(H=S);else if(_!==7)throw new Error("unknown command "+_)}return[M,V,O,H]},Nf.prototype.toGeoJSON=function(o,c,_){var b,w,S=this.extent*Math.pow(2,_),M=this.extent*o,O=this.extent*c,V=this.loadGeometry(),H=Nf.types[this.type];function j(ye){for(var Le=0;Le<ye.length;Le++){var Pe=ye[Le];ye[Le]=[360*(Pe.x+M)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pe.y+O)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var ae=[];for(b=0;b<V.length;b++)ae[b]=V[b][0];j(V=ae);break;case 2:for(b=0;b<V.length;b++)j(V[b]);break;case 3:for(V=(function(ye){var Le=ye.length;if(Le<=1)return[ye];for(var Pe,qe,Be=[],et=0;et<Le;et++){var it=KB(ye[et]);it!==0&&(qe===void 0&&(qe=it<0),qe===it<0?(Pe&&Be.push(Pe),Pe=[ye[et]]):Pe.push(ye[et]))}return Pe&&Be.push(Pe),Be})(V),b=0;b<V.length;b++)for(w=0;w<V[b].length;w++)j(V[b][w])}V.length===1?V=V[0]:H="Multi"+H;var he={type:"Feature",geometry:{type:H,coordinates:V},properties:this.properties};return"id"in this&&(he.id=this.id),he};var UE=HE;function HE(o,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(jB,this,c),this.length=this._features.length}function jB(o,c,_){o===15?c.version=_.readVarint():o===1?c.name=_.readString():o===5?c.extent=_.readVarint():o===2?c._features.push(_.pos):o===3?c._keys.push(_.readString()):o===4&&c._values.push((function(b){for(var w=null,S=b.readVarint()+b.pos;b.pos<S;){var M=b.readVarint()>>3;w=M===1?b.readString():M===2?b.readFloat():M===3?b.readDouble():M===4?b.readVarint64():M===5?b.readVarint():M===6?b.readSVarint():M===7?b.readBoolean():null}return w})(_))}function $B(o,c,_){if(o===3){var b=new UE(_,_.readVarint()+_.pos);b.length&&(c[b.name]=b)}}HE.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var c=this._pbf.readVarint()+this._pbf.pos;return new zE(this._pbf,c,this.extent,this._keys,this._values)};var Bf={VectorTile:function(o,c){this.layers=o.readFields($B,{},c)},VectorTileFeature:zE,VectorTileLayer:UE},JB=Bf.VectorTileFeature.types,VI=Math.pow(2,13);function Ay(o,c,_,b,w,S,M,O){o.emplaceBack(c,_,2*Math.floor(b*VI)+M,w*VI*2,S*VI*2,Math.round(O))}var uu=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((function(c){return c.id})),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new su,this.indexArray=new Qu,this.programConfigurations=new Ta(o.layers,o.zoom),this.segments=new ve,this.stateDependentLayerIds=this.layers.filter((function(c){return c.isStateDependent()})).map((function(c){return c.id}))};function QB(o,c){return o.x===c.x&&(o.x<0||o.x>8192)||o.y===c.y&&(o.y<0||o.y>8192)}uu.prototype.populate=function(o,c,_){this.features=[],this.hasPattern=BI("fill-extrusion",this.layers,c);for(var b=0,w=o;b<w.length;b+=1){var S=w[b],M=S.feature,O=S.id,V=S.index,H=S.sourceLayerIndex,j=this.layers[0]._featureFilter.needGeometry,ae=Hn(M,j);if(this.layers[0]._featureFilter.filter(new oi(this.zoom),ae,_)){var he={id:O,sourceLayerIndex:H,index:V,geometry:j?ae.geometry:Rn(M),properties:M.properties,type:M.type,patterns:{}};this.hasPattern?this.features.push(DI("fill-extrusion",this.layers,he,this.zoom,c)):this.addFeature(he,he.geometry,V,_,{}),c.featureIndex.insert(M,he.geometry,V,H,this.index,!0)}}},uu.prototype.addFeatures=function(o,c,_){for(var b=0,w=this.features;b<w.length;b+=1){var S=w[b];this.addFeature(S,S.geometry,S.index,c,_)}},uu.prototype.update=function(o,c,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,_)},uu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},uu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},uu.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,qB),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},uu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},uu.prototype.addFeature=function(o,c,_,b,w){for(var S=0,M=NI(c,500);S<M.length;S+=1){for(var O=M[S],V=0,H=0,j=O;H<j.length;H+=1)V+=j[H].length;for(var ae=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),he=0,ye=O;he<ye.length;he+=1){var Le=ye[he];if(Le.length!==0&&!((ti=Le).every((function(za){return za.x<0}))||ti.every((function(za){return za.x>8192}))||ti.every((function(za){return za.y<0}))||ti.every((function(za){return za.y>8192}))))for(var Pe=0,qe=0;qe<Le.length;qe++){var Be=Le[qe];if(qe>=1){var et=Le[qe-1];if(!QB(Be,et)){ae.vertexLength+4>ve.MAX_VERTEX_ARRAY_LENGTH&&(ae=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var it=Be.sub(et)._perp()._unit(),nt=et.dist(Be);Pe+nt>32768&&(Pe=0),Ay(this.layoutVertexArray,Be.x,Be.y,it.x,it.y,0,0,Pe),Ay(this.layoutVertexArray,Be.x,Be.y,it.x,it.y,0,1,Pe),Ay(this.layoutVertexArray,et.x,et.y,it.x,it.y,0,0,Pe+=nt),Ay(this.layoutVertexArray,et.x,et.y,it.x,it.y,0,1,Pe);var lt=ae.vertexLength;this.indexArray.emplaceBack(lt,lt+2,lt+1),this.indexArray.emplaceBack(lt+1,lt+2,lt+3),ae.vertexLength+=4,ae.primitiveLength+=2}}}}if(ae.vertexLength+V>ve.MAX_VERTEX_ARRAY_LENGTH&&(ae=this.segments.prepareSegment(V,this.layoutVertexArray,this.indexArray)),JB[o.type]==="Polygon"){for(var pt=[],Mt=[],Vt=ae.vertexLength,ma=0,$t=O;ma<$t.length;ma+=1){var ba=$t[ma];if(ba.length!==0){ba!==O[0]&&Mt.push(pt.length/2);for(var Qt=0;Qt<ba.length;Qt++){var Ya=ba[Qt];Ay(this.layoutVertexArray,Ya.x,Ya.y,0,0,1,1,0),pt.push(Ya.x),pt.push(Ya.y)}}}for(var Ma=GI(pt,Mt),la=0;la<Ma.length;la+=3)this.indexArray.emplaceBack(Vt+Ma[la],Vt+Ma[la+2],Vt+Ma[la+1]);ae.primitiveLength+=Ma.length/3,ae.vertexLength+=V}}var ti;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,_,w,b)},na("FillExtrusionBucket",uu,{omit:["layers","features"]});var eD={paint:new Hr({"fill-extrusion-opacity":new pa(pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new oa(pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new pa(pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new pa(pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Lf(pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new oa(pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new oa(pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new pa(pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},tD=(function(o){function c(_){o.call(this,_,eD)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.createBucket=function(_){return new uu(_)},c.prototype.queryRadius=function(){return br(this.paint.get("fill-extrusion-translate"))},c.prototype.is3D=function(){return!0},c.prototype.queryIntersectsFeature=function(_,b,w,S,M,O,V,H){var j=ou(_,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),O.angle,V),ae=this.paint.get("fill-extrusion-height").evaluate(b,w),he=this.paint.get("fill-extrusion-base").evaluate(b,w),ye=(function(Pe,qe,Be,et){for(var it=[],nt=0,lt=Pe;nt<lt.length;nt+=1){var pt=lt[nt],Mt=[pt.x,pt.y,0,1];Wf(Mt,Mt,qe),it.push(new h(Mt[0]/Mt[3],Mt[1]/Mt[3]))}return it})(j,H),Le=(function(Pe,qe,Be,et){for(var it=[],nt=[],lt=et[8]*qe,pt=et[9]*qe,Mt=et[10]*qe,Vt=et[11]*qe,ma=et[8]*Be,$t=et[9]*Be,ba=et[10]*Be,Qt=et[11]*Be,Ya=0,Ma=Pe;Ya<Ma.length;Ya+=1){for(var la=[],ti=[],za=0,pi=Ma[Ya];za<pi.length;za+=1){var va=pi[za],Ei=va.x,In=va.y,On=et[0]*Ei+et[4]*In+et[12],kn=et[1]*Ei+et[5]*In+et[13],Sn=et[2]*Ei+et[6]*In+et[14],Fn=et[3]*Ei+et[7]*In+et[15],vr=Sn+Mt,xr=Fn+Vt,hs=On+ma,kr=kn+$t,_s=Sn+ba,Xn=Fn+Qt,Pr=new h((On+lt)/xr,(kn+pt)/xr);Pr.z=vr/xr,la.push(Pr);var ui=new h(hs/Xn,kr/Xn);ui.z=_s/Xn,ti.push(ui)}it.push(la),nt.push(ti)}return[it,nt]})(S,he,ae,H);return(function(Pe,qe,Be){var et=1/0;ul(Be,qe)&&(et=XE(Be,qe[0]));for(var it=0;it<qe.length;it++)for(var nt=qe[it],lt=Pe[it],pt=0;pt<nt.length-1;pt++){var Mt=nt[pt],Vt=[Mt,nt[pt+1],lt[pt+1],lt[pt],Mt];ac(Be,Vt)&&(et=Math.min(et,XE(Be,Vt)))}return et!==1/0&&et})(Le[0],Le[1],ye)},c})(Pl);function Ty(o,c){return o.x*c.x+o.y*c.y}function XE(o,c){if(o.length===1){for(var _,b=0,w=c[b++];!_||w.equals(_);)if(!(_=c[b++]))return 1/0;for(;b<c.length;b++){var S=c[b],M=o[0],O=_.sub(w),V=S.sub(w),H=M.sub(w),j=Ty(O,O),ae=Ty(O,V),he=Ty(V,V),ye=Ty(H,O),Le=Ty(H,V),Pe=j*he-ae*ae,qe=(he*ye-ae*Le)/Pe,Be=(j*Le-ae*ye)/Pe,et=w.z*(1-qe-Be)+_.z*qe+S.z*Be;if(isFinite(et))return et}return 1/0}for(var it=1/0,nt=0,lt=c;nt<lt.length;nt+=1)it=Math.min(it,lt[nt].z);return it}var aD=Mr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,iD=Mr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,nD=Bf.VectorTileFeature.types,rD=Math.cos(Math.PI/180*37.5),qE=Math.pow(2,14)/.5,Is=function(o){var c=this;this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((function(_){return _.id})),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(_){c.gradients[_.id]={}})),this.layoutVertexArray=new Ds,this.layoutVertexArray2=new yh,this.indexArray=new Qu,this.programConfigurations=new Ta(o.layers,o.zoom),this.segments=new ve,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(_){return _.isStateDependent()})).map((function(_){return _.id}))};Is.prototype.populate=function(o,c,_){this.hasPattern=BI("line",this.layers,c);for(var b=this.layers[0].layout.get("line-sort-key"),w=[],S=0,M=o;S<M.length;S+=1){var O=M[S],V=O.feature,H=O.id,j=O.index,ae=O.sourceLayerIndex,he=this.layers[0]._featureFilter.needGeometry,ye=Hn(V,he);if(this.layers[0]._featureFilter.filter(new oi(this.zoom),ye,_)){var Le=b?b.evaluate(ye,{},_):void 0,Pe={id:H,properties:V.properties,type:V.type,sourceLayerIndex:ae,index:j,geometry:he?ye.geometry:Rn(V),patterns:{},sortKey:Le};w.push(Pe)}}b&&w.sort((function(Mt,Vt){return Mt.sortKey-Vt.sortKey}));for(var qe=0,Be=w;qe<Be.length;qe+=1){var et=Be[qe],it=et.geometry,nt=et.index,lt=et.sourceLayerIndex;if(this.hasPattern){var pt=DI("line",this.layers,et,this.zoom,c);this.patternFeatures.push(pt)}else this.addFeature(et,it,nt,_,{});c.featureIndex.insert(o[nt].feature,it,nt,lt,this.index)}},Is.prototype.update=function(o,c,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,_)},Is.prototype.addFeatures=function(o,c,_){for(var b=0,w=this.patternFeatures;b<w.length;b+=1){var S=w[b];this.addFeature(S,S.geometry,S.index,c,_)}},Is.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Is.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Is.prototype.upload=function(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,iD)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,aD),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},Is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Is.prototype.lineFeatureClips=function(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}},Is.prototype.addFeature=function(o,c,_,b,w){var S=this.layers[0].layout,M=S.get("line-join").evaluate(o,{}),O=S.get("line-cap"),V=S.get("line-miter-limit"),H=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(var j=0,ae=c;j<ae.length;j+=1)this.addLine(ae[j],o,M,O,V,H);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,_,w,b)},Is.prototype.addLine=function(o,c,_,b,w,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var M=0;M<o.length-1;M++)this.totalDistance+=o[M].dist(o[M+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var O=nD[c.type]==="Polygon",V=o.length;V>=2&&o[V-1].equals(o[V-2]);)V--;for(var H=0;H<V-1&&o[H].equals(o[H+1]);)H++;if(!(V<(O?3:2))){_==="bevel"&&(w=1.05);var j,ae=this.overscaling<=16?122880/(512*this.overscaling):0,he=this.segments.prepareSegment(10*V,this.layoutVertexArray,this.indexArray),ye=void 0,Le=void 0,Pe=void 0,qe=void 0;this.e1=this.e2=-1,O&&(qe=o[H].sub(j=o[V-2])._unit()._perp());for(var Be=H;Be<V;Be++)if(!(Le=Be===V-1?O?o[H+1]:void 0:o[Be+1])||!o[Be].equals(Le)){qe&&(Pe=qe),j&&(ye=j),j=o[Be],qe=Le?Le.sub(j)._unit()._perp():Pe;var et=(Pe=Pe||qe).add(qe);et.x===0&&et.y===0||et._unit();var it=Pe.x*qe.x+Pe.y*qe.y,nt=et.x*qe.x+et.y*qe.y,lt=nt!==0?1/nt:1/0,pt=2*Math.sqrt(2-2*nt),Mt=nt<rD&&ye&&Le,Vt=Pe.x*qe.y-Pe.y*qe.x>0;if(Mt&&Be>H){var ma=j.dist(ye);if(ma>2*ae){var $t=j.sub(j.sub(ye)._mult(ae/ma)._round());this.updateDistance(ye,$t),this.addCurrentVertex($t,Pe,0,0,he),ye=$t}}var ba=ye&&Le,Qt=ba?_:O?"butt":b;if(ba&&Qt==="round"&&(lt<S?Qt="miter":lt<=2&&(Qt="fakeround")),Qt==="miter"&&lt>w&&(Qt="bevel"),Qt==="bevel"&&(lt>2&&(Qt="flipbevel"),lt<w&&(Qt="miter")),ye&&this.updateDistance(ye,j),Qt==="miter")et._mult(lt),this.addCurrentVertex(j,et,0,0,he);else if(Qt==="flipbevel"){if(lt>100)et=qe.mult(-1);else{var Ya=lt*Pe.add(qe).mag()/Pe.sub(qe).mag();et._perp()._mult(Ya*(Vt?-1:1))}this.addCurrentVertex(j,et,0,0,he),this.addCurrentVertex(j,et.mult(-1),0,0,he)}else if(Qt==="bevel"||Qt==="fakeround"){var Ma=-Math.sqrt(lt*lt-1),la=Vt?Ma:0,ti=Vt?0:Ma;if(ye&&this.addCurrentVertex(j,Pe,la,ti,he),Qt==="fakeround")for(var za=Math.round(180*pt/Math.PI/20),pi=1;pi<za;pi++){var va=pi/za;if(va!==.5){var Ei=va-.5;va+=va*Ei*(va-1)*((1.0904+it*(it*(3.55645-1.43519*it)-3.2452))*Ei*Ei+(.848013+it*(.215638*it-1.06021)))}var In=qe.sub(Pe)._mult(va)._add(Pe)._unit()._mult(Vt?-1:1);this.addHalfVertex(j,In.x,In.y,!1,Vt,0,he)}Le&&this.addCurrentVertex(j,qe,-la,-ti,he)}else if(Qt==="butt")this.addCurrentVertex(j,et,0,0,he);else if(Qt==="square"){var On=ye?1:-1;this.addCurrentVertex(j,et,On,On,he)}else Qt==="round"&&(ye&&(this.addCurrentVertex(j,Pe,0,0,he),this.addCurrentVertex(j,Pe,1,1,he,!0)),Le&&(this.addCurrentVertex(j,qe,-1,-1,he,!0),this.addCurrentVertex(j,qe,0,0,he)));if(Mt&&Be<V-1){var kn=j.dist(Le);if(kn>2*ae){var Sn=j.add(Le.sub(j)._mult(ae/kn)._round());this.updateDistance(j,Sn),this.addCurrentVertex(Sn,qe,0,0,he),j=Sn}}}}},Is.prototype.addCurrentVertex=function(o,c,_,b,w,S){S===void 0&&(S=!1);var M=c.y*b-c.x,O=-c.y-c.x*b;this.addHalfVertex(o,c.x+c.y*_,c.y-c.x*_,S,!1,_,w),this.addHalfVertex(o,M,O,S,!0,-b,w),this.distance>qE/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(o,c,_,b,w,S))},Is.prototype.addHalfVertex=function(o,c,_,b,w,S,M){var O=.5*(this.lineClips?this.scaledDistance*(qE-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o.x<<1)+(b?1:0),(o.y<<1)+(w?1:0),Math.round(63*c)+128,Math.round(63*_)+128,1+(S===0?0:S<0?-1:1)|(63&O)<<2,O>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var V=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,V),M.primitiveLength++),w?this.e2=V:this.e1=V},Is.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Is.prototype.updateDistance=function(o,c){this.distance+=o.dist(c),this.updateScaledDistance()},na("LineBucket",Is,{omit:["layers","patternFeatures"]});var sD=new Hr({"line-cap":new pa(pe.layout_line["line-cap"]),"line-join":new oa(pe.layout_line["line-join"]),"line-miter-limit":new pa(pe.layout_line["line-miter-limit"]),"line-round-limit":new pa(pe.layout_line["line-round-limit"]),"line-sort-key":new oa(pe.layout_line["line-sort-key"])}),YE={paint:new Hr({"line-opacity":new oa(pe.paint_line["line-opacity"]),"line-color":new oa(pe.paint_line["line-color"]),"line-translate":new pa(pe.paint_line["line-translate"]),"line-translate-anchor":new pa(pe.paint_line["line-translate-anchor"]),"line-width":new oa(pe.paint_line["line-width"]),"line-gap-width":new oa(pe.paint_line["line-gap-width"]),"line-offset":new oa(pe.paint_line["line-offset"]),"line-blur":new oa(pe.paint_line["line-blur"]),"line-dasharray":new us(pe.paint_line["line-dasharray"]),"line-pattern":new Lf(pe.paint_line["line-pattern"]),"line-gradient":new ll(pe.paint_line["line-gradient"])}),layout:sD},KE=new((function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.possiblyEvaluate=function(_,b){return b=new oi(Math.floor(b.zoom),{now:b.now,fadeDuration:b.fadeDuration,zoomHistory:b.zoomHistory,transition:b.transition}),o.prototype.possiblyEvaluate.call(this,_,b)},c.prototype.evaluate=function(_,b,w,S){return b=L({},b,{zoom:Math.floor(b.zoom)}),o.prototype.evaluate.call(this,_,b,w,S)},c})(oa))(YE.paint.properties["line-width"].specification);KE.useIntegerZoom=!0;var oD=(function(o){function c(_){o.call(this,_,YE),this.gradientVersion=0}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._handleSpecialPaintPropertyUpdate=function(_){_==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ws,this.gradientVersion=(this.gradientVersion+1)%x)},c.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},c.prototype.recalculate=function(_,b){o.prototype.recalculate.call(this,_,b),this.paint._values["line-floorwidth"]=KE.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,_)},c.prototype.createBucket=function(_){return new Is(_)},c.prototype.queryRadius=function(_){var b=_,w=jE(Ol("line-width",this,b),Ol("line-gap-width",this,b)),S=Ol("line-offset",this,b);return w/2+Math.abs(S)+br(this.paint.get("line-translate"))},c.prototype.queryIntersectsFeature=function(_,b,w,S,M,O,V){var H=ou(_,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),O.angle,V),j=V/2*jE(this.paint.get("line-width").evaluate(b,w),this.paint.get("line-gap-width").evaluate(b,w)),ae=this.paint.get("line-offset").evaluate(b,w);return ae&&(S=(function(he,ye){for(var Le=[],Pe=new h(0,0),qe=0;qe<he.length;qe++){for(var Be=he[qe],et=[],it=0;it<Be.length;it++){var nt=Be[it],lt=Be[it+1],pt=it===0?Pe:nt.sub(Be[it-1])._unit()._perp(),Mt=it===Be.length-1?Pe:lt.sub(nt)._unit()._perp(),Vt=pt._add(Mt)._unit();Vt._mult(1/(Vt.x*Mt.x+Vt.y*Mt.y)),et.push(Vt._mult(ye)._add(nt))}Le.push(et)}return Le})(S,ae*V)),(function(he,ye,Le){for(var Pe=0;Pe<ye.length;Pe++){var qe=ye[Pe];if(he.length>=3){for(var Be=0;Be<qe.length;Be++)if(Wl(he,qe[Be]))return!0}if(Go(he,qe,Le))return!0}return!1})(H,S,j)},c.prototype.isTileClipped=function(){return!0},c})(Pl);function jE(o,c){return c>0?c+2*o:o}var lD=Mr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),uD=Mr([{name:"a_projected_pos",components:3,type:"Float32"}],4),cD=(Mr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Mr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),$E=(Mr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Mr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),dD=Mr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hD(o,c,_){return o.sections.forEach((function(b){b.text=(function(w,S,M){var O=S.layout.get("text-transform").evaluate(M,{});return O==="uppercase"?w=w.toLocaleUpperCase():O==="lowercase"&&(w=w.toLocaleLowerCase()),ho.applyArabicShaping&&(w=ho.applyArabicShaping(w)),w})(b.text,c,_)})),o}Mr([{name:"triangle",components:3,type:"Uint16"}]),Mr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Mr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Mr([{type:"Float32",name:"offsetX"}]),Mr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ey={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},JE=function(o,c,_,b,w){var S,M,O=8*w-b-1,V=(1<<O)-1,H=V>>1,j=-7,ae=w-1,he=-1,ye=o[c+ae];for(ae+=he,S=ye&(1<<-j)-1,ye>>=-j,j+=O;j>0;S=256*S+o[c+ae],ae+=he,j-=8);for(M=S&(1<<-j)-1,S>>=-j,j+=b;j>0;M=256*M+o[c+ae],ae+=he,j-=8);if(S===0)S=1-H;else{if(S===V)return M?NaN:1/0*(ye?-1:1);M+=Math.pow(2,b),S-=H}return(ye?-1:1)*M*Math.pow(2,S-b)},QE=function(o,c,_,b,w,S){var M,O,V,H=8*S-w-1,j=(1<<H)-1,ae=j>>1,he=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,ye=0,Le=1,Pe=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(O=isNaN(c)?1:0,M=j):(M=Math.floor(Math.log(c)/Math.LN2),c*(V=Math.pow(2,-M))<1&&(M--,V*=2),(c+=M+ae>=1?he/V:he*Math.pow(2,1-ae))*V>=2&&(M++,V/=2),M+ae>=j?(O=0,M=j):M+ae>=1?(O=(c*V-1)*Math.pow(2,w),M+=ae):(O=c*Math.pow(2,ae-1)*Math.pow(2,w),M=0));w>=8;o[_+ye]=255&O,ye+=Le,O/=256,w-=8);for(M=M<<w|O,H+=w;H>0;o[_+ye]=255&M,ye+=Le,M/=256,H-=8);o[_+ye-Le]|=128*Pe},yv=un;function un(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}un.Varint=0,un.Fixed64=1,un.Bytes=2,un.Fixed32=5;var eM=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ld(o){return o.type===un.Bytes?o.readVarint()+o.pos:o.pos+1}function Df(o,c,_){return _?4294967296*c+(o>>>0):4294967296*(c>>>0)+(o>>>0)}function tM(o,c,_){var b=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));_.realloc(b);for(var w=_.pos-1;w>=o;w--)_.buf[w+b]=_.buf[w]}function _D(o,c){for(var _=0;_<o.length;_++)c.writeVarint(o[_])}function mD(o,c){for(var _=0;_<o.length;_++)c.writeSVarint(o[_])}function fD(o,c){for(var _=0;_<o.length;_++)c.writeFloat(o[_])}function gD(o,c){for(var _=0;_<o.length;_++)c.writeDouble(o[_])}function pD(o,c){for(var _=0;_<o.length;_++)c.writeBoolean(o[_])}function yD(o,c){for(var _=0;_<o.length;_++)c.writeFixed32(o[_])}function bD(o,c){for(var _=0;_<o.length;_++)c.writeSFixed32(o[_])}function vD(o,c){for(var _=0;_<o.length;_++)c.writeFixed64(o[_])}function xD(o,c){for(var _=0;_<o.length;_++)c.writeSFixed64(o[_])}function bv(o,c){return(o[c]|o[c+1]<<8|o[c+2]<<16)+16777216*o[c+3]}function Vf(o,c,_){o[_]=c,o[_+1]=c>>>8,o[_+2]=c>>>16,o[_+3]=c>>>24}function aM(o,c){return(o[c]|o[c+1]<<8|o[c+2]<<16)+(o[c+3]<<24)}function wD(o,c,_){o===1&&_.readMessage(CD,c)}function CD(o,c,_){if(o===3){var b=_.readMessage(ID,{}),w=b.width,S=b.height,M=b.left,O=b.top,V=b.advance;c.push({id:b.id,bitmap:new Q_({width:w+6,height:S+6},b.bitmap),metrics:{width:w,height:S,left:M,top:O,advance:V}})}}function ID(o,c,_){o===1?c.id=_.readVarint():o===2?c.bitmap=_.readBytes():o===3?c.width=_.readVarint():o===4?c.height=_.readVarint():o===5?c.left=_.readSVarint():o===6?c.top=_.readSVarint():o===7&&(c.advance=_.readVarint())}function iM(o){for(var c=0,_=0,b=0,w=o;b<w.length;b+=1){var S=w[b];c+=S.w*S.h,_=Math.max(_,S.w)}o.sort((function(Pe,qe){return qe.h-Pe.h}));for(var M=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),_),h:1/0}],O=0,V=0,H=0,j=o;H<j.length;H+=1)for(var ae=j[H],he=M.length-1;he>=0;he--){var ye=M[he];if(!(ae.w>ye.w||ae.h>ye.h)){if(ae.x=ye.x,ae.y=ye.y,V=Math.max(V,ae.y+ae.h),O=Math.max(O,ae.x+ae.w),ae.w===ye.w&&ae.h===ye.h){var Le=M.pop();he<M.length&&(M[he]=Le)}else ae.h===ye.h?(ye.x+=ae.w,ye.w-=ae.w):ae.w===ye.w?(ye.y+=ae.h,ye.h-=ae.h):(M.push({x:ye.x+ae.w,y:ye.y,w:ye.w-ae.w,h:ae.h}),ye.y+=ae.h,ye.h-=ae.h);break}}return{w:O,h:V,fill:c/(O*V)||0}}un.prototype={destroy:function(){this.buf=null},readFields:function(o,c,_){for(_=_||this.length;this.pos<_;){var b=this.readVarint(),w=b>>3,S=this.pos;this.type=7&b,o(w,c,this),this.pos===S&&this.skip(b)}return c},readMessage:function(o,c){return this.readFields(o,c,this.readVarint()+this.pos)},readFixed32:function(){var o=bv(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=aM(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=bv(this.buf,this.pos)+4294967296*bv(this.buf,this.pos+4);return this.pos+=8,o},readSFixed64:function(){var o=bv(this.buf,this.pos)+4294967296*aM(this.buf,this.pos+4);return this.pos+=8,o},readFloat:function(){var o=JE(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=JE(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var c,_,b=this.buf;return c=127&(_=b[this.pos++]),_<128?c:(c|=(127&(_=b[this.pos++]))<<7,_<128?c:(c|=(127&(_=b[this.pos++]))<<14,_<128?c:(c|=(127&(_=b[this.pos++]))<<21,_<128?c:(function(w,S,M){var O,V,H=M.buf;if(O=(112&(V=H[M.pos++]))>>4,V<128||(O|=(127&(V=H[M.pos++]))<<3,V<128)||(O|=(127&(V=H[M.pos++]))<<10,V<128)||(O|=(127&(V=H[M.pos++]))<<17,V<128)||(O|=(127&(V=H[M.pos++]))<<24,V<128)||(O|=(1&(V=H[M.pos++]))<<31,V<128))return Df(w,O,S);throw new Error("Expected varint not more than 10 bytes")})(c|=(15&(_=b[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,c=this.pos;return this.pos=o,o-c>=12&&eM?(function(_,b,w){return eM.decode(_.subarray(b,w))})(this.buf,c,o):(function(_,b,w){for(var S="",M=b;M<w;){var O,V,H,j=_[M],ae=null,he=j>239?4:j>223?3:j>191?2:1;if(M+he>w)break;he===1?j<128&&(ae=j):he===2?(192&(O=_[M+1]))==128&&(ae=(31&j)<<6|63&O)<=127&&(ae=null):he===3?(V=_[M+2],(192&(O=_[M+1]))==128&&(192&V)==128&&((ae=(15&j)<<12|(63&O)<<6|63&V)<=2047||ae>=55296&&ae<=57343)&&(ae=null)):he===4&&(V=_[M+2],H=_[M+3],(192&(O=_[M+1]))==128&&(192&V)==128&&(192&H)==128&&((ae=(15&j)<<18|(63&O)<<12|(63&V)<<6|63&H)<=65535||ae>=1114112)&&(ae=null)),ae===null?(ae=65533,he=1):ae>65535&&(ae-=65536,S+=String.fromCharCode(ae>>>10&1023|55296),ae=56320|1023&ae),S+=String.fromCharCode(ae),M+=he}return S})(this.buf,c,o)},readBytes:function(){var o=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,o);return this.pos=o,c},readPackedVarint:function(o,c){if(this.type!==un.Bytes)return o.push(this.readVarint(c));var _=ld(this);for(o=o||[];this.pos<_;)o.push(this.readVarint(c));return o},readPackedSVarint:function(o){if(this.type!==un.Bytes)return o.push(this.readSVarint());var c=ld(this);for(o=o||[];this.pos<c;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==un.Bytes)return o.push(this.readBoolean());var c=ld(this);for(o=o||[];this.pos<c;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==un.Bytes)return o.push(this.readFloat());var c=ld(this);for(o=o||[];this.pos<c;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==un.Bytes)return o.push(this.readDouble());var c=ld(this);for(o=o||[];this.pos<c;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==un.Bytes)return o.push(this.readFixed32());var c=ld(this);for(o=o||[];this.pos<c;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==un.Bytes)return o.push(this.readSFixed32());var c=ld(this);for(o=o||[];this.pos<c;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==un.Bytes)return o.push(this.readFixed64());var c=ld(this);for(o=o||[];this.pos<c;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==un.Bytes)return o.push(this.readSFixed64());var c=ld(this);for(o=o||[];this.pos<c;)o.push(this.readSFixed64());return o},skip:function(o){var c=7&o;if(c===un.Varint)for(;this.buf[this.pos++]>127;);else if(c===un.Bytes)this.pos=this.readVarint()+this.pos;else if(c===un.Fixed32)this.pos+=4;else{if(c!==un.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(o,c){this.writeVarint(o<<3|c)},realloc:function(o){for(var c=this.length||16;c<this.pos+o;)c*=2;if(c!==this.length){var _=new Uint8Array(c);_.set(this.buf),this.buf=_,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Vf(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Vf(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Vf(this.buf,-1&o,this.pos),Vf(this.buf,Math.floor(o*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Vf(this.buf,-1&o,this.pos),Vf(this.buf,Math.floor(o*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?(function(c,_){var b,w;if(c>=0?(b=c%4294967296|0,w=c/4294967296|0):(w=~(-c/4294967296),4294967295^(b=~(-c%4294967296))?b=b+1|0:(b=0,w=w+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),(function(S,M,O){O.buf[O.pos++]=127&S|128,S>>>=7,O.buf[O.pos++]=127&S|128,S>>>=7,O.buf[O.pos++]=127&S|128,S>>>=7,O.buf[O.pos++]=127&S|128,O.buf[O.pos]=127&(S>>>=7)})(b,0,_),(function(S,M){var O=(7&S)<<4;M.buf[M.pos++]|=O|((S>>>=3)?128:0),S&&(M.buf[M.pos++]=127&S|((S>>>=7)?128:0),S&&(M.buf[M.pos++]=127&S|((S>>>=7)?128:0),S&&(M.buf[M.pos++]=127&S|((S>>>=7)?128:0),S&&(M.buf[M.pos++]=127&S|((S>>>=7)?128:0),S&&(M.buf[M.pos++]=127&S)))))})(w,_)})(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var c=this.pos;this.pos=(function(b,w,S){for(var M,O,V=0;V<w.length;V++){if((M=w.charCodeAt(V))>55295&&M<57344){if(!O){M>56319||V+1===w.length?(b[S++]=239,b[S++]=191,b[S++]=189):O=M;continue}if(M<56320){b[S++]=239,b[S++]=191,b[S++]=189,O=M;continue}M=O-55296<<10|M-56320|65536,O=null}else O&&(b[S++]=239,b[S++]=191,b[S++]=189,O=null);M<128?b[S++]=M:(M<2048?b[S++]=M>>6|192:(M<65536?b[S++]=M>>12|224:(b[S++]=M>>18|240,b[S++]=M>>12&63|128),b[S++]=M>>6&63|128),b[S++]=63&M|128)}return S})(this.buf,o,this.pos);var _=this.pos-c;_>=128&&tM(c,_,this),this.pos=c-1,this.writeVarint(_),this.pos+=_},writeFloat:function(o){this.realloc(4),QE(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),QE(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var c=o.length;this.writeVarint(c),this.realloc(c);for(var _=0;_<c;_++)this.buf[this.pos++]=o[_]},writeRawMessage:function(o,c){this.pos++;var _=this.pos;o(c,this);var b=this.pos-_;b>=128&&tM(_,b,this),this.pos=_-1,this.writeVarint(b),this.pos+=b},writeMessage:function(o,c,_){this.writeTag(o,un.Bytes),this.writeRawMessage(c,_)},writePackedVarint:function(o,c){c.length&&this.writeMessage(o,_D,c)},writePackedSVarint:function(o,c){c.length&&this.writeMessage(o,mD,c)},writePackedBoolean:function(o,c){c.length&&this.writeMessage(o,pD,c)},writePackedFloat:function(o,c){c.length&&this.writeMessage(o,fD,c)},writePackedDouble:function(o,c){c.length&&this.writeMessage(o,gD,c)},writePackedFixed32:function(o,c){c.length&&this.writeMessage(o,yD,c)},writePackedSFixed32:function(o,c){c.length&&this.writeMessage(o,bD,c)},writePackedFixed64:function(o,c){c.length&&this.writeMessage(o,vD,c)},writePackedSFixed64:function(o,c){c.length&&this.writeMessage(o,xD,c)},writeBytesField:function(o,c){this.writeTag(o,un.Bytes),this.writeBytes(c)},writeFixed32Field:function(o,c){this.writeTag(o,un.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(o,c){this.writeTag(o,un.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(o,c){this.writeTag(o,un.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(o,c){this.writeTag(o,un.Fixed64),this.writeSFixed64(c)},writeVarintField:function(o,c){this.writeTag(o,un.Varint),this.writeVarint(c)},writeSVarintField:function(o,c){this.writeTag(o,un.Varint),this.writeSVarint(c)},writeStringField:function(o,c){this.writeTag(o,un.Bytes),this.writeString(c)},writeFloatField:function(o,c){this.writeTag(o,un.Fixed32),this.writeFloat(c)},writeDoubleField:function(o,c){this.writeTag(o,un.Fixed64),this.writeDouble(c)},writeBooleanField:function(o,c){this.writeVarintField(o,!!c)}};var vv=function(o,c){var _=c.pixelRatio,b=c.version,w=c.stretchX,S=c.stretchY,M=c.content;this.paddedRect=o,this.pixelRatio=_,this.stretchX=w,this.stretchY=S,this.content=M,this.version=b},My={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};My.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},My.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},My.tlbr.get=function(){return this.tl.concat(this.br)},My.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(vv.prototype,My);var Ly=function(o,c){var _={},b={};this.haveRenderCallbacks=[];var w=[];this.addImages(o,_,w),this.addImages(c,b,w);var S=iM(w),M=new Zs({width:S.w||1,height:S.h||1});for(var O in o){var V=o[O],H=_[O].paddedRect;Zs.copy(V.data,M,{x:0,y:0},{x:H.x+1,y:H.y+1},V.data)}for(var j in c){var ae=c[j],he=b[j].paddedRect,ye=he.x+1,Le=he.y+1,Pe=ae.data.width,qe=ae.data.height;Zs.copy(ae.data,M,{x:0,y:0},{x:ye,y:Le},ae.data),Zs.copy(ae.data,M,{x:0,y:qe-1},{x:ye,y:Le-1},{width:Pe,height:1}),Zs.copy(ae.data,M,{x:0,y:0},{x:ye,y:Le+qe},{width:Pe,height:1}),Zs.copy(ae.data,M,{x:Pe-1,y:0},{x:ye-1,y:Le},{width:1,height:qe}),Zs.copy(ae.data,M,{x:0,y:0},{x:ye+Pe,y:Le},{width:1,height:qe})}this.image=M,this.iconPositions=_,this.patternPositions=b};Ly.prototype.addImages=function(o,c,_){for(var b in o){var w=o[b],S={x:0,y:0,w:w.data.width+2,h:w.data.height+2};_.push(S),c[b]=new vv(S,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(b)}},Ly.prototype.patchUpdatedImages=function(o,c){for(var _ in o.dispatchRenderCallbacks(this.haveRenderCallbacks),o.updatedImages)this.patchUpdatedImage(this.iconPositions[_],o.getImage(_),c),this.patchUpdatedImage(this.patternPositions[_],o.getImage(_),c)},Ly.prototype.patchUpdatedImage=function(o,c,_){if(o&&c&&o.version!==c.version){o.version=c.version;var b=o.tl;_.update(c.data,void 0,{x:b[0],y:b[1]})}},na("ImagePosition",vv),na("ImageAtlas",Ly);var Wo={horizontal:1,vertical:2,horizontalOnly:3},Zf=function(){this.scale=1,this.fontStack="",this.imageName=null};Zf.forText=function(o,c){var _=new Zf;return _.scale=o||1,_.fontStack=c,_},Zf.forImage=function(o){var c=new Zf;return c.imageName=o,c};var ds=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function xv(o,c,_,b,w,S,M,O,V,H,j,ae,he,ye,Le,Pe){var qe,Be=ds.fromFeature(o,w);ae===Wo.vertical&&Be.verticalizePunctuation();var et=ho.processBidirectionalText,it=ho.processStyledBidirectionalText;if(et&&Be.sections.length===1){qe=[];for(var nt=0,lt=et(Be.toString(),ZI(Be,H,S,c,b,ye,Le));nt<lt.length;nt+=1){var pt=lt[nt],Mt=new ds;Mt.text=pt,Mt.sections=Be.sections;for(var Vt=0;Vt<pt.length;Vt++)Mt.sectionIndex.push(0);qe.push(Mt)}}else if(it){qe=[];for(var ma=0,$t=it(Be.text,Be.sectionIndex,ZI(Be,H,S,c,b,ye,Le));ma<$t.length;ma+=1){var ba=$t[ma],Qt=new ds;Qt.text=ba[0],Qt.sectionIndex=ba[1],Qt.sections=Be.sections,qe.push(Qt)}}else qe=(function(la,ti){for(var za=[],pi=la.text,va=0,Ei=0,In=ti;Ei<In.length;Ei+=1){var On=In[Ei];za.push(la.substring(va,On)),va=On}return va<pi.length&&za.push(la.substring(va,pi.length)),za})(Be,ZI(Be,H,S,c,b,ye,Le));var Ya=[],Ma={positionedLines:Ya,text:Be.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:ae,iconsInText:!1,verticalizable:!1};return(function(la,ti,za,pi,va,Ei,In,On,kn,Sn,Fn,vr){for(var xr=0,hs=-17,kr=0,_s=0,Xn=On==="right"?1:On==="left"?0:.5,Pr=0,ui=0,Qi=va;ui<Qi.length;ui+=1){var Zi=Qi[ui];Zi.trim();var xi=Zi.getMaxScale(),Ss=24*(xi-1),as={positionedGlyphs:[],lineOffset:0};la.positionedLines[Pr]=as;var gn=as.positionedGlyphs,er=0;if(Zi.length()){for(var is=0;is<Zi.length();is++){var Mi=Zi.getSection(is),rc=Zi.getSectionIndex(is),Oo=Zi.getCharCode(is),sc=0,qn=null,oc=null,Fl=null,jf=24,im=!(kn===Wo.horizontal||!Fn&&!Tf(Oo)||Fn&&(wv[Oo]||(hd=Oo,qt.Arabic(hd)||qt["Arabic Supplement"](hd)||qt["Arabic Extended-A"](hd)||qt["Arabic Presentation Forms-A"](hd)||qt["Arabic Presentation Forms-B"](hd))));if(Mi.imageName){var $f=pi[Mi.imageName];if(!$f)continue;Fl=Mi.imageName,la.iconsInText=la.iconsInText||!0,oc=$f.paddedRect;var dd=$f.displaySize;Mi.scale=24*Mi.scale/vr,sc=Ss+(24-dd[1]*Mi.scale),jf=(qn={width:dd[0],height:dd[1],left:1,top:-3,advance:im?dd[1]:dd[0]}).advance;var Jf=im?dd[0]*Mi.scale-24*xi:dd[1]*Mi.scale-24*xi;Jf>0&&Jf>er&&(er=Jf)}else{var Rv=za[Mi.fontStack],Qf=Rv&&Rv[Oo];if(Qf&&Qf.rect)oc=Qf.rect,qn=Qf.metrics;else{var Py=ti[Mi.fontStack],kv=Py&&Py[Oo];if(!kv)continue;qn=kv.metrics}sc=24*(xi-Mi.scale)}im?(la.verticalizable=!0,gn.push({glyph:Oo,imageName:Fl,x:xr,y:hs+sc,vertical:im,scale:Mi.scale,fontStack:Mi.fontStack,sectionIndex:rc,metrics:qn,rect:oc}),xr+=jf*Mi.scale+Sn):(gn.push({glyph:Oo,imageName:Fl,x:xr,y:hs+sc,vertical:im,scale:Mi.scale,fontStack:Mi.fontStack,sectionIndex:rc,metrics:qn,rect:oc}),xr+=qn.advance*Mi.scale+Sn)}gn.length!==0&&(kr=Math.max(xr-Sn,kr),AD(gn,0,gn.length-1,Xn,er)),xr=0;var Pv=Ei*xi+er;as.lineOffset=Math.max(er,Ss),hs+=Pv,_s=Math.max(Pv,_s),++Pr}else hs+=Ei,++Pr}var hd,Gy=hs- -17,eg=zI(In),Ah=eg.horizontalAlign,tg=eg.verticalAlign;(function(Gv,Wv,Wy,Oy,Ov,Fy,Ny,By,Fv){var ag,Nv=(Wv-Wy)*Ov;ag=Fy!==Ny?-By*Oy- -17:(-Oy*Fv+.5)*Ny;for(var ig=0,Dy=Gv;ig<Dy.length;ig+=1)for(var nm=0,Vy=Dy[ig].positionedGlyphs;nm<Vy.length;nm+=1){var ng=Vy[nm];ng.x+=Nv,ng.y+=ag}})(la.positionedLines,Xn,Ah,tg,kr,_s,Ei,Gy,va.length),la.top+=-tg*Gy,la.bottom=la.top+Gy,la.left+=-Ah*kr,la.right=la.left+kr})(Ma,c,_,b,qe,M,O,V,ae,H,he,Pe),!(function(la){for(var ti=0,za=la;ti<za.length;ti+=1)if(za[ti].positionedGlyphs.length!==0)return!1;return!0})(Ya)&&Ma}ds.fromFeature=function(o,c){for(var _=new ds,b=0;b<o.sections.length;b++){var w=o.sections[b];w.image?_.addImageSection(w):_.addTextSection(w,c)}return _},ds.prototype.length=function(){return this.text.length},ds.prototype.getSection=function(o){return this.sections[this.sectionIndex[o]]},ds.prototype.getSectionIndex=function(o){return this.sectionIndex[o]},ds.prototype.getCharCode=function(o){return this.text.charCodeAt(o)},ds.prototype.verticalizePunctuation=function(){this.text=(function(o){for(var c="",_=0;_<o.length;_++){var b=o.charCodeAt(_+1)||null,w=o.charCodeAt(_-1)||null;c+=b&&_y(b)&&!Ey[o[_+1]]||w&&_y(w)&&!Ey[o[_-1]]||!Ey[o[_]]?o[_]:Ey[o[_]]}return c})(this.text)},ds.prototype.trim=function(){for(var o=0,c=0;c<this.text.length&&wv[this.text.charCodeAt(c)];c++)o++;for(var _=this.text.length,b=this.text.length-1;b>=0&&b>=o&&wv[this.text.charCodeAt(b)];b--)_--;this.text=this.text.substring(o,_),this.sectionIndex=this.sectionIndex.slice(o,_)},ds.prototype.substring=function(o,c){var _=new ds;return _.text=this.text.substring(o,c),_.sectionIndex=this.sectionIndex.slice(o,c),_.sections=this.sections,_},ds.prototype.toString=function(){return this.text},ds.prototype.getMaxScale=function(){var o=this;return this.sectionIndex.reduce((function(c,_){return Math.max(c,o.sections[_].scale)}),0)},ds.prototype.addTextSection=function(o,c){this.text+=o.text,this.sections.push(Zf.forText(o.scale,o.fontStack||c));for(var _=this.sections.length-1,b=0;b<o.text.length;++b)this.sectionIndex.push(_)},ds.prototype.addImageSection=function(o){var c=o.image?o.image.name:"";if(c.length!==0){var _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(Zf.forImage(c)),this.sectionIndex.push(this.sections.length-1)):de("Reached maximum number of images 6401")}else de("Can't add FormattedSection with an empty image.")},ds.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var wv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},mo={};function nM(o,c,_,b,w,S){if(c.imageName){var M=b[c.imageName];return M?M.displaySize[0]*c.scale*24/S+w:0}var O=_[c.fontStack],V=O&&O[o];return V?V.metrics.advance*c.scale+w:0}function rM(o,c,_,b){var w=Math.pow(o-c,2);return b?o<c?w/2:2*w:w+Math.abs(_)*_}function SD(o,c,_){var b=0;return o===10&&(b-=1e4),_&&(b+=150),o!==40&&o!==65288||(b+=50),c!==41&&c!==65289||(b+=50),b}function sM(o,c,_,b,w,S){for(var M=null,O=rM(c,_,w,S),V=0,H=b;V<H.length;V+=1){var j=H[V],ae=rM(c-j.x,_,w,S)+j.badness;ae<=O&&(M=j,O=ae)}return{index:o,x:c,priorBreak:M,badness:O}}function ZI(o,c,_,b,w,S,M){if(S!=="point")return[];if(!o)return[];for(var O,V=[],H=(function(qe,Be,et,it,nt,lt){for(var pt=0,Mt=0;Mt<qe.length();Mt++){var Vt=qe.getSection(Mt);pt+=nM(qe.getCharCode(Mt),Vt,it,nt,Be,lt)}return pt/Math.max(1,Math.ceil(pt/et))})(o,c,_,b,w,M),j=o.text.indexOf("")>=0,ae=0,he=0;he<o.length();he++){var ye=o.getSection(he),Le=o.getCharCode(he);if(wv[Le]||(ae+=nM(Le,ye,b,w,c,M)),he<o.length()-1){var Pe=!((O=Le)<11904||!(qt["Bopomofo Extended"](O)||qt.Bopomofo(O)||qt["CJK Compatibility Forms"](O)||qt["CJK Compatibility Ideographs"](O)||qt["CJK Compatibility"](O)||qt["CJK Radicals Supplement"](O)||qt["CJK Strokes"](O)||qt["CJK Symbols and Punctuation"](O)||qt["CJK Unified Ideographs Extension A"](O)||qt["CJK Unified Ideographs"](O)||qt["Enclosed CJK Letters and Months"](O)||qt["Halfwidth and Fullwidth Forms"](O)||qt.Hiragana(O)||qt["Ideographic Description Characters"](O)||qt["Kangxi Radicals"](O)||qt["Katakana Phonetic Extensions"](O)||qt.Katakana(O)||qt["Vertical Forms"](O)||qt["Yi Radicals"](O)||qt["Yi Syllables"](O)));(mo[Le]||Pe||ye.imageName)&&V.push(sM(he+1,ae,H,V,SD(Le,o.getCharCode(he+1),Pe&&j),!1))}}return(function qe(Be){return Be?qe(Be.priorBreak).concat(Be.index):[]})(sM(o.length(),ae,H,V,0,!0))}function zI(o){var c=.5,_=.5;switch(o){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":_=1;break;case"top":case"top-right":case"top-left":_=0}return{horizontalAlign:c,verticalAlign:_}}function AD(o,c,_,b,w){if(b||w)for(var S=o[_],M=(o[_].x+S.metrics.advance*S.scale)*b,O=c;O<=_;O++)o[O].x-=M,o[O].y+=w}function oM(o,c,_,b,w,S){var M,O=o.image;if(O.content){var V=O.content,H=O.pixelRatio||1;M=[V[0]/H,V[1]/H,O.displaySize[0]-V[2]/H,O.displaySize[1]-V[3]/H]}var j,ae,he,ye,Le=c.left*S,Pe=c.right*S;_==="width"||_==="both"?(ye=w[0]+Le-b[3],ae=w[0]+Pe+b[1]):ae=(ye=w[0]+(Le+Pe-O.displaySize[0])/2)+O.displaySize[0];var qe=c.top*S,Be=c.bottom*S;return _==="height"||_==="both"?(j=w[1]+qe-b[0],he=w[1]+Be+b[2]):he=(j=w[1]+(qe+Be-O.displaySize[1])/2)+O.displaySize[1],{image:O,top:j,right:ae,bottom:he,left:ye,collisionPadding:M}}mo[10]=!0,mo[32]=!0,mo[38]=!0,mo[40]=!0,mo[41]=!0,mo[43]=!0,mo[45]=!0,mo[47]=!0,mo[173]=!0,mo[183]=!0,mo[8203]=!0,mo[8208]=!0,mo[8211]=!0,mo[8231]=!0;var zf=(function(o){function c(_,b,w,S){o.call(this,_,b),this.angle=w,S!==void 0&&(this.segment=S)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.clone=function(){return new c(this.x,this.y,this.angle,this.segment)},c})(h);function UI(o,c){var _=c.expression;if(_.kind==="constant")return{kind:"constant",layoutSize:_.evaluate(new oi(o+1))};if(_.kind==="source")return{kind:"source"};for(var b=_.zoomStops,w=_.interpolationType,S=0;S<b.length&&b[S]<=o;)S++;for(var M=S=Math.max(0,S-1);M<b.length&&b[M]<o+1;)M++;M=Math.min(b.length-1,M);var O=b[S],V=b[M];return _.kind==="composite"?{kind:"composite",minZoom:O,maxZoom:V,interpolationType:w}:{kind:"camera",minZoom:O,maxZoom:V,minSize:_.evaluate(new oi(O)),maxSize:_.evaluate(new oi(V)),interpolationType:w}}function lM(o,c,_){var b=c.uSize,w=_.lowerSize;return o.kind==="source"?w/128:o.kind==="composite"?Jn(w/128,_.upperSize/128,c.uSizeT):b}function uM(o,c){var _=0,b=0;if(o.kind==="constant")b=o.layoutSize;else if(o.kind!=="source"){var w=o.interpolationType,S=w?A(zr.interpolationFactor(w,c,o.minZoom,o.maxZoom),0,1):0;o.kind==="camera"?b=Jn(o.minSize,o.maxSize,S):_=S}return{uSizeT:_,uSize:b}}na("Anchor",zf);var TD=Object.freeze({__proto__:null,getSizeData:UI,evaluateSizeForFeature:lM,evaluateSizeForZoom:uM,SIZE_PACK_FACTOR:128});function cM(o,c,_,b,w){if(c.segment===void 0)return!0;for(var S=c,M=c.segment+1,O=0;O>-_/2;){if(--M<0)return!1;O-=o[M].dist(S),S=o[M]}O+=o[M].dist(o[M+1]),M++;for(var V=[],H=0;O<_/2;){var j=o[M],ae=o[M+1];if(!ae)return!1;var he=o[M-1].angleTo(j)-j.angleTo(ae);for(he=Math.abs((he+3*Math.PI)%(2*Math.PI)-Math.PI),V.push({distance:O,angleDelta:he}),H+=he;O-V[0].distance>b;)H-=V.shift().angleDelta;if(H>w)return!1;M++,O+=j.dist(ae)}return!0}function dM(o){for(var c=0,_=0;_<o.length-1;_++)c+=o[_].dist(o[_+1]);return c}function hM(o,c,_){return o?.6*c*_:0}function _M(o,c){return Math.max(o?o.right-o.left:0,c?c.right-c.left:0)}function ED(o,c,_,b,w,S){for(var M=hM(_,w,S),O=_M(_,b)*S,V=0,H=dM(o)/2,j=0;j<o.length-1;j++){var ae=o[j],he=o[j+1],ye=ae.dist(he);if(V+ye>H){var Le=(H-V)/ye,Pe=Jn(ae.x,he.x,Le),qe=Jn(ae.y,he.y,Le),Be=new zf(Pe,qe,he.angleTo(ae),j);return Be._round(),!M||cM(o,Be,O,M,c)?Be:void 0}V+=ye}}function MD(o,c,_,b,w,S,M,O,V){var H=hM(b,S,M),j=_M(b,w),ae=j*M,he=o[0].x===0||o[0].x===V||o[0].y===0||o[0].y===V;return c-ae<c/4&&(c=ae+c/4),(function ye(Le,Pe,qe,Be,et,it,nt,lt,pt){for(var Mt=it/2,Vt=dM(Le),ma=0,$t=Pe-qe,ba=[],Qt=0;Qt<Le.length-1;Qt++){for(var Ya=Le[Qt],Ma=Le[Qt+1],la=Ya.dist(Ma),ti=Ma.angleTo(Ya);$t+qe<ma+la;){var za=(($t+=qe)-ma)/la,pi=Jn(Ya.x,Ma.x,za),va=Jn(Ya.y,Ma.y,za);if(pi>=0&&pi<pt&&va>=0&&va<pt&&$t-Mt>=0&&$t+Mt<=Vt){var Ei=new zf(pi,va,ti,Qt);Ei._round(),Be&&!cM(Le,Ei,it,Be,et)||ba.push(Ei)}}ma+=la}return lt||ba.length||nt||(ba=ye(Le,ma/2,qe,Be,et,it,nt,!0,pt)),ba})(o,he?c/2*O%c:(j/2+2*S)*M*O%c,c,H,_,ae,he,!1,V)}function mM(o,c,_,b,w){for(var S=[],M=0;M<o.length;M++)for(var O=o[M],V=void 0,H=0;H<O.length-1;H++){var j=O[H],ae=O[H+1];j.x<c&&ae.x<c||(j.x<c?j=new h(c,j.y+(c-j.x)/(ae.x-j.x)*(ae.y-j.y))._round():ae.x<c&&(ae=new h(c,j.y+(c-j.x)/(ae.x-j.x)*(ae.y-j.y))._round()),j.y<_&&ae.y<_||(j.y<_?j=new h(j.x+(_-j.y)/(ae.y-j.y)*(ae.x-j.x),_)._round():ae.y<_&&(ae=new h(j.x+(_-j.y)/(ae.y-j.y)*(ae.x-j.x),_)._round()),j.x>=b&&ae.x>=b||(j.x>=b?j=new h(b,j.y+(b-j.x)/(ae.x-j.x)*(ae.y-j.y))._round():ae.x>=b&&(ae=new h(b,j.y+(b-j.x)/(ae.x-j.x)*(ae.y-j.y))._round()),j.y>=w&&ae.y>=w||(j.y>=w?j=new h(j.x+(w-j.y)/(ae.y-j.y)*(ae.x-j.x),w)._round():ae.y>=w&&(ae=new h(j.x+(w-j.y)/(ae.y-j.y)*(ae.x-j.x),w)._round()),V&&j.equals(V[V.length-1])||S.push(V=[j]),V.push(ae)))))}return S}function fM(o,c,_,b){var w=[],S=o.image,M=S.pixelRatio,O=S.paddedRect.w-2,V=S.paddedRect.h-2,H=o.right-o.left,j=o.bottom-o.top,ae=S.stretchX||[[0,O]],he=S.stretchY||[[0,V]],ye=function(pi,va){return pi+va[1]-va[0]},Le=ae.reduce(ye,0),Pe=he.reduce(ye,0),qe=O-Le,Be=V-Pe,et=0,it=Le,nt=0,lt=Pe,pt=0,Mt=qe,Vt=0,ma=Be;if(S.content&&b){var $t=S.content;et=Cv(ae,0,$t[0]),nt=Cv(he,0,$t[1]),it=Cv(ae,$t[0],$t[2]),lt=Cv(he,$t[1],$t[3]),pt=$t[0]-et,Vt=$t[1]-nt,Mt=$t[2]-$t[0]-it,ma=$t[3]-$t[1]-lt}var ba=function(pi,va,Ei,In){var On=Iv(pi.stretch-et,it,H,o.left),kn=Sv(pi.fixed-pt,Mt,pi.stretch,Le),Sn=Iv(va.stretch-nt,lt,j,o.top),Fn=Sv(va.fixed-Vt,ma,va.stretch,Pe),vr=Iv(Ei.stretch-et,it,H,o.left),xr=Sv(Ei.fixed-pt,Mt,Ei.stretch,Le),hs=Iv(In.stretch-nt,lt,j,o.top),kr=Sv(In.fixed-Vt,ma,In.stretch,Pe),_s=new h(On,Sn),Xn=new h(vr,Sn),Pr=new h(vr,hs),ui=new h(On,hs),Qi=new h(kn/M,Fn/M),Zi=new h(xr/M,kr/M),xi=c*Math.PI/180;if(xi){var Ss=Math.sin(xi),as=Math.cos(xi),gn=[as,-Ss,Ss,as];_s._matMult(gn),Xn._matMult(gn),ui._matMult(gn),Pr._matMult(gn)}var er=pi.stretch+pi.fixed,is=va.stretch+va.fixed;return{tl:_s,tr:Xn,bl:ui,br:Pr,tex:{x:S.paddedRect.x+1+er,y:S.paddedRect.y+1+is,w:Ei.stretch+Ei.fixed-er,h:In.stretch+In.fixed-is},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Qi,pixelOffsetBR:Zi,minFontScaleX:Mt/M/H,minFontScaleY:ma/M/j,isSDF:_}};if(b&&(S.stretchX||S.stretchY))for(var Qt=gM(ae,qe,Le),Ya=gM(he,Be,Pe),Ma=0;Ma<Qt.length-1;Ma++)for(var la=Qt[Ma],ti=Qt[Ma+1],za=0;za<Ya.length-1;za++)w.push(ba(la,Ya[za],ti,Ya[za+1]));else w.push(ba({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:V+1}));return w}function Cv(o,c,_){for(var b=0,w=0,S=o;w<S.length;w+=1){var M=S[w];b+=Math.max(c,Math.min(_,M[1]))-Math.max(c,Math.min(_,M[0]))}return b}function gM(o,c,_){for(var b=[{fixed:-1,stretch:0}],w=0,S=o;w<S.length;w+=1){var M=S[w],O=M[0],V=M[1],H=b[b.length-1];b.push({fixed:O-H.stretch,stretch:H.stretch}),b.push({fixed:O-H.stretch,stretch:H.stretch+(V-O)})}return b.push({fixed:c+1,stretch:_}),b}function Iv(o,c,_,b){return o/c*_+b}function Sv(o,c,_,b){return o-c*_/b}var Av=function(o,c,_,b,w,S,M,O,V,H){if(this.boxStartIndex=o.length,V){var j=S.top,ae=S.bottom,he=S.collisionPadding;he&&(j-=he[1],ae+=he[3]);var ye=ae-j;ye>0&&(ye=Math.max(10,ye),this.circleDiameter=ye)}else{var Le=S.top*M-O,Pe=S.bottom*M+O,qe=S.left*M-O,Be=S.right*M+O,et=S.collisionPadding;if(et&&(qe-=et[0]*M,Le-=et[1]*M,Be+=et[2]*M,Pe+=et[3]*M),H){var it=new h(qe,Le),nt=new h(Be,Le),lt=new h(qe,Pe),pt=new h(Be,Pe),Mt=H*Math.PI/180;it._rotate(Mt),nt._rotate(Mt),lt._rotate(Mt),pt._rotate(Mt),qe=Math.min(it.x,nt.x,lt.x,pt.x),Be=Math.max(it.x,nt.x,lt.x,pt.x),Le=Math.min(it.y,nt.y,lt.y,pt.y),Pe=Math.max(it.y,nt.y,lt.y,pt.y)}o.emplaceBack(c.x,c.y,qe,Le,Be,Pe,_,b,w)}this.boxEndIndex=o.length},Uf=function(o,c){if(o===void 0&&(o=[]),c===void 0&&(c=LD),this.data=o,this.length=this.data.length,this.compare=c,this.length>0)for(var _=(this.length>>1)-1;_>=0;_--)this._down(_)};function LD(o,c){return o<c?-1:o>c?1:0}function RD(o,c,_){_===void 0&&(_=!1);for(var b=1/0,w=1/0,S=-1/0,M=-1/0,O=o[0],V=0;V<O.length;V++){var H=O[V];(!V||H.x<b)&&(b=H.x),(!V||H.y<w)&&(w=H.y),(!V||H.x>S)&&(S=H.x),(!V||H.y>M)&&(M=H.y)}var j=Math.min(S-b,M-w),ae=j/2,he=new Uf([],kD);if(j===0)return new h(b,w);for(var ye=b;ye<S;ye+=j)for(var Le=w;Le<M;Le+=j)he.push(new Hf(ye+ae,Le+ae,ae,o));for(var Pe=(function(et){for(var it=0,nt=0,lt=0,pt=et[0],Mt=0,Vt=pt.length,ma=Vt-1;Mt<Vt;ma=Mt++){var $t=pt[Mt],ba=pt[ma],Qt=$t.x*ba.y-ba.x*$t.y;nt+=($t.x+ba.x)*Qt,lt+=($t.y+ba.y)*Qt,it+=3*Qt}return new Hf(nt/it,lt/it,0,et)})(o),qe=he.length;he.length;){var Be=he.pop();(Be.d>Pe.d||!Pe.d)&&(Pe=Be,_&&console.log("found best %d after %d probes",Math.round(1e4*Be.d)/1e4,qe)),Be.max-Pe.d<=c||(he.push(new Hf(Be.p.x-(ae=Be.h/2),Be.p.y-ae,ae,o)),he.push(new Hf(Be.p.x+ae,Be.p.y-ae,ae,o)),he.push(new Hf(Be.p.x-ae,Be.p.y+ae,ae,o)),he.push(new Hf(Be.p.x+ae,Be.p.y+ae,ae,o)),qe+=4)}return _&&(console.log("num probes: "+qe),console.log("best distance: "+Pe.d)),Pe.p}function kD(o,c){return c.max-o.max}function Hf(o,c,_,b){this.p=new h(o,c),this.h=_,this.d=(function(w,S){for(var M=!1,O=1/0,V=0;V<S.length;V++)for(var H=S[V],j=0,ae=H.length,he=ae-1;j<ae;he=j++){var ye=H[j],Le=H[he];ye.y>w.y!=Le.y>w.y&&w.x<(Le.x-ye.x)*(w.y-ye.y)/(Le.y-ye.y)+ye.x&&(M=!M),O=Math.min(O,wh(w,ye,Le))}return(M?1:-1)*Math.sqrt(O)})(this.p,b),this.max=this.d+this.h*Math.SQRT2}Uf.prototype.push=function(o){this.data.push(o),this.length++,this._up(this.length-1)},Uf.prototype.pop=function(){if(this.length!==0){var o=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),o}},Uf.prototype.peek=function(){return this.data[0]},Uf.prototype._up=function(o){for(var c=this.data,_=this.compare,b=c[o];o>0;){var w=o-1>>1,S=c[w];if(_(b,S)>=0)break;c[o]=S,o=w}c[o]=b},Uf.prototype._down=function(o){for(var c=this.data,_=this.compare,b=this.length>>1,w=c[o];o<b;){var S=1+(o<<1),M=c[S],O=S+1;if(O<this.length&&_(c[O],M)<0&&(S=O,M=c[O]),_(M,w)>=0)break;c[o]=M,o=S}c[o]=w};var HI=Number.POSITIVE_INFINITY;function pM(o,c){return c[1]!==HI?(function(_,b,w){var S=0,M=0;switch(b=Math.abs(b),w=Math.abs(w),_){case"top-right":case"top-left":case"top":M=w-7;break;case"bottom-right":case"bottom-left":case"bottom":M=7-w}switch(_){case"top-right":case"bottom-right":case"right":S=-b;break;case"top-left":case"bottom-left":case"left":S=b}return[S,M]})(o,c[0],c[1]):(function(_,b){var w=0,S=0;b<0&&(b=0);var M=b/Math.sqrt(2);switch(_){case"top-right":case"top-left":S=M-7;break;case"bottom-right":case"bottom-left":S=7-M;break;case"bottom":S=7-b;break;case"top":S=b-7}switch(_){case"top-right":case"bottom-right":w=-M;break;case"top-left":case"bottom-left":w=M;break;case"left":w=b;break;case"right":w=-b}return[w,S]})(o,c[0])}function XI(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function yM(o,c,_,b,w,S,M,O,V,H,j,ae,he,ye,Le){var Pe=(function(nt,lt,pt,Mt,Vt,ma,$t,ba){for(var Qt=Mt.layout.get("text-rotate").evaluate(ma,{})*Math.PI/180,Ya=[],Ma=0,la=lt.positionedLines;Ma<la.length;Ma+=1)for(var ti=la[Ma],za=0,pi=ti.positionedGlyphs;za<pi.length;za+=1){var va=pi[za];if(va.rect){var Ei=va.rect||{},In=4,On=!0,kn=1,Sn=0,Fn=(Vt||ba)&&va.vertical,vr=va.metrics.advance*va.scale/2;if(ba&&lt.verticalizable&&(Sn=ti.lineOffset/2-(va.imageName?-(24-va.metrics.width*va.scale)/2:24*(va.scale-1))),va.imageName){var xr=$t[va.imageName];On=xr.sdf,In=1/(kn=xr.pixelRatio)}var hs=Vt?[va.x+vr,va.y]:[0,0],kr=Vt?[0,0]:[va.x+vr+pt[0],va.y+pt[1]-Sn],_s=[0,0];Fn&&(_s=kr,kr=[0,0]);var Xn=(va.metrics.left-In)*va.scale-vr+kr[0],Pr=(-va.metrics.top-In)*va.scale+kr[1],ui=Xn+Ei.w*va.scale/kn,Qi=Pr+Ei.h*va.scale/kn,Zi=new h(Xn,Pr),xi=new h(ui,Pr),Ss=new h(Xn,Qi),as=new h(ui,Qi);if(Fn){var gn=new h(-vr,vr- -17),er=-Math.PI/2,is=12-vr,Mi=new h(22-is,-(va.imageName?is:0)),rc=new(Function.prototype.bind.apply(h,[null].concat(_s)));Zi._rotateAround(er,gn)._add(Mi)._add(rc),xi._rotateAround(er,gn)._add(Mi)._add(rc),Ss._rotateAround(er,gn)._add(Mi)._add(rc),as._rotateAround(er,gn)._add(Mi)._add(rc)}if(Qt){var Oo=Math.sin(Qt),sc=Math.cos(Qt),qn=[sc,-Oo,Oo,sc];Zi._matMult(qn),xi._matMult(qn),Ss._matMult(qn),as._matMult(qn)}var oc=new h(0,0),Fl=new h(0,0);Ya.push({tl:Zi,tr:xi,bl:Ss,br:as,tex:Ei,writingMode:lt.writingMode,glyphOffset:hs,sectionIndex:va.sectionIndex,isSDF:On,pixelOffsetTL:oc,pixelOffsetBR:Fl,minFontScaleX:0,minFontScaleY:0})}}return Ya})(0,_,O,w,S,M,b,o.allowVerticalPlacement),qe=o.textSizeData,Be=null;qe.kind==="source"?(Be=[128*w.layout.get("text-size").evaluate(M,{})])[0]>32640&&de(o.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):qe.kind==="composite"&&((Be=[128*ye.compositeTextSizes[0].evaluate(M,{},Le),128*ye.compositeTextSizes[1].evaluate(M,{},Le)])[0]>32640||Be[1]>32640)&&de(o.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),o.addSymbols(o.text,Pe,Be,O,S,M,H,c,V.lineStartIndex,V.lineLength,he,Le);for(var et=0,it=j;et<it.length;et+=1)ae[it[et]]=o.text.placedSymbolArray.length-1;return 4*Pe.length}function bM(o){for(var c in o)return o[c];return null}function PD(o,c,_,b){var w=o.compareText;if(c in w){for(var S=w[c],M=S.length-1;M>=0;M--)if(b.dist(S[M])<_)return!0}else w[c]=[];return w[c].push(b),!1}var GD=Bf.VectorTileFeature.types,WD=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tv(o,c,_,b,w,S,M,O,V,H,j,ae,he){var ye=O?Math.min(32640,Math.round(O[0])):0,Le=O?Math.min(32640,Math.round(O[1])):0;o.emplaceBack(c,_,Math.round(32*b),Math.round(32*w),S,M,(ye<<1)+(V?1:0),Le,16*H,16*j,256*ae,256*he)}function qI(o,c,_){o.emplaceBack(c.x,c.y,_),o.emplaceBack(c.x,c.y,_),o.emplaceBack(c.x,c.y,_),o.emplaceBack(c.x,c.y,_)}function OD(o){for(var c=0,_=o.sections;c<_.length;c+=1)if(Ef(_[c].text))return!0;return!1}var Xf=function(o){this.layoutVertexArray=new kf,this.indexArray=new Qu,this.programConfigurations=o,this.segments=new ve,this.dynamicLayoutVertexArray=new bh,this.opacityVertexArray=new q_,this.placedSymbolArray=new v};Xf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Xf.prototype.upload=function(o,c,_,b){this.isEmpty()||(_&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,lD.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,uD.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,WD,!0),this.opacityVertexBuffer.itemSize=1),(_||b)&&this.programConfigurations.upload(o))},Xf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},na("SymbolBuffers",Xf);var Ry=function(o,c,_){this.layoutVertexArray=new o,this.layoutAttributes=c,this.indexArray=new _,this.segments=new ve,this.collisionVertexArray=new by};Ry.prototype.upload=function(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,cD.members,!0)},Ry.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},na("CollisionBuffers",Ry);var qi=function(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((function(S){return S.id})),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=_o([]),this.placementViewportMatrix=_o([]);var c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=UI(this.zoom,c["text-size"]),this.iconSizeData=UI(this.zoom,c["icon-size"]);var _=this.layers[0].layout,b=_.get("symbol-sort-key"),w=_.get("symbol-z-order");this.canOverlap=_.get("text-allow-overlap")||_.get("icon-allow-overlap")||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&b.constantOr(1)!==void 0,this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map((function(S){return Wo[S]}))),this.stateDependentLayerIds=this.layers.filter((function(S){return S.isStateDependent()})).map((function(S){return S.id})),this.sourceID=o.sourceID};qi.prototype.createArrays=function(){this.text=new Xf(new Ta(this.layers,this.zoom,(function(o){return/^text/.test(o)}))),this.icon=new Xf(new Ta(this.layers,this.zoom,(function(o){return/^icon/.test(o)}))),this.glyphOffsetArray=new W,this.lineVertexArray=new D,this.symbolInstances=new k},qi.prototype.calculateGlyphDependencies=function(o,c,_,b,w){for(var S=0;S<o.length;S++)if(c[o.charCodeAt(S)]=!0,(_||b)&&w){var M=Ey[o.charAt(S)];M&&(c[M.charCodeAt(0)]=!0)}},qi.prototype.populate=function(o,c,_){var b=this.layers[0],w=b.layout,S=w.get("text-font"),M=w.get("text-field"),O=w.get("icon-image"),V=(M.value.kind!=="constant"||M.value.value instanceof Tr&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),H=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,j=w.get("symbol-sort-key");if(this.features=[],V||H){for(var ae=c.iconDependencies,he=c.glyphDependencies,ye=c.availableImages,Le=new oi(this.zoom),Pe=0,qe=o;Pe<qe.length;Pe+=1){var Be=qe[Pe],et=Be.feature,it=Be.id,nt=Be.index,lt=Be.sourceLayerIndex,pt=b._featureFilter.needGeometry,Mt=Hn(et,pt);if(b._featureFilter.filter(Le,Mt,_)){pt||(Mt.geometry=Rn(et));var Vt=void 0;if(V){var ma=b.getValueAndResolveTokens("text-field",Mt,_,ye),$t=Tr.factory(ma);OD($t)&&(this.hasRTLText=!0),(!this.hasRTLText||fy()==="unavailable"||this.hasRTLText&&ho.isParsed())&&(Vt=hD($t,b,Mt))}var ba=void 0;if(H){var Qt=b.getValueAndResolveTokens("icon-image",Mt,_,ye);ba=Qt instanceof xs?Qt:xs.fromString(Qt)}if(Vt||ba){var Ya=this.sortFeaturesByKey?j.evaluate(Mt,{},_):void 0;if(this.features.push({id:it,text:Vt,icon:ba,index:nt,sourceLayerIndex:lt,geometry:Mt.geometry,properties:et.properties,type:GD[et.type],sortKey:Ya}),ba&&(ae[ba.name]=!0),Vt){var Ma=S.evaluate(Mt,{},_).join(","),la=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Wo.vertical)>=0;for(var ti=0,za=Vt.sections;ti<za.length;ti+=1){var pi=za[ti];if(pi.image)ae[pi.image.name]=!0;else{var va=hy(Vt.toString()),Ei=pi.fontStack||Ma,In=he[Ei]=he[Ei]||{};this.calculateGlyphDependencies(pi.text,In,la,this.allowVerticalPlacement,va)}}}}}}w.get("symbol-placement")==="line"&&(this.features=(function(On){var kn={},Sn={},Fn=[],vr=0;function xr(gn){Fn.push(On[gn]),vr++}function hs(gn,er,is){var Mi=Sn[gn];return delete Sn[gn],Sn[er]=Mi,Fn[Mi].geometry[0].pop(),Fn[Mi].geometry[0]=Fn[Mi].geometry[0].concat(is[0]),Mi}function kr(gn,er,is){var Mi=kn[er];return delete kn[er],kn[gn]=Mi,Fn[Mi].geometry[0].shift(),Fn[Mi].geometry[0]=is[0].concat(Fn[Mi].geometry[0]),Mi}function _s(gn,er,is){var Mi=is?er[0][er[0].length-1]:er[0][0];return gn+":"+Mi.x+":"+Mi.y}for(var Xn=0;Xn<On.length;Xn++){var Pr=On[Xn],ui=Pr.geometry,Qi=Pr.text?Pr.text.toString():null;if(Qi){var Zi=_s(Qi,ui),xi=_s(Qi,ui,!0);if(Zi in Sn&&xi in kn&&Sn[Zi]!==kn[xi]){var Ss=kr(Zi,xi,ui),as=hs(Zi,xi,Fn[Ss].geometry);delete kn[Zi],delete Sn[xi],Sn[_s(Qi,Fn[as].geometry,!0)]=as,Fn[Ss].geometry=null}else Zi in Sn?hs(Zi,xi,ui):xi in kn?kr(Zi,xi,ui):(xr(Xn),kn[Zi]=vr-1,Sn[xi]=vr-1)}else xr(Xn)}return Fn.filter((function(gn){return gn.geometry}))})(this.features)),this.sortFeaturesByKey&&this.features.sort((function(On,kn){return On.sortKey-kn.sortKey}))}},qi.prototype.update=function(o,c,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,c,this.layers,_),this.icon.programConfigurations.updatePaintArrays(o,c,this.layers,_))},qi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},qi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},qi.prototype.upload=function(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},qi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},qi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},qi.prototype.addToLineVertexArray=function(o,c){var _=this.lineVertexArray.length;if(o.segment!==void 0){for(var b=o.dist(c[o.segment+1]),w=o.dist(c[o.segment]),S={},M=o.segment+1;M<c.length;M++)S[M]={x:c[M].x,y:c[M].y,tileUnitDistanceFromAnchor:b},M<c.length-1&&(b+=c[M+1].dist(c[M]));for(var O=o.segment||0;O>=0;O--)S[O]={x:c[O].x,y:c[O].y,tileUnitDistanceFromAnchor:w},O>0&&(w+=c[O-1].dist(c[O]));for(var V=0;V<c.length;V++){var H=S[V];this.lineVertexArray.emplaceBack(H.x,H.y,H.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}},qi.prototype.addSymbols=function(o,c,_,b,w,S,M,O,V,H,j,ae){for(var he=o.indexArray,ye=o.layoutVertexArray,Le=o.segments.prepareSegment(4*c.length,ye,he,this.canOverlap?S.sortKey:void 0),Pe=this.glyphOffsetArray.length,qe=Le.vertexLength,Be=this.allowVerticalPlacement&&M===Wo.vertical?Math.PI/2:0,et=S.text&&S.text.sections,it=0;it<c.length;it++){var nt=c[it],lt=nt.tl,pt=nt.tr,Mt=nt.bl,Vt=nt.br,ma=nt.tex,$t=nt.pixelOffsetTL,ba=nt.pixelOffsetBR,Qt=nt.minFontScaleX,Ya=nt.minFontScaleY,Ma=nt.glyphOffset,la=nt.isSDF,ti=nt.sectionIndex,za=Le.vertexLength,pi=Ma[1];Tv(ye,O.x,O.y,lt.x,pi+lt.y,ma.x,ma.y,_,la,$t.x,$t.y,Qt,Ya),Tv(ye,O.x,O.y,pt.x,pi+pt.y,ma.x+ma.w,ma.y,_,la,ba.x,$t.y,Qt,Ya),Tv(ye,O.x,O.y,Mt.x,pi+Mt.y,ma.x,ma.y+ma.h,_,la,$t.x,ba.y,Qt,Ya),Tv(ye,O.x,O.y,Vt.x,pi+Vt.y,ma.x+ma.w,ma.y+ma.h,_,la,ba.x,ba.y,Qt,Ya),qI(o.dynamicLayoutVertexArray,O,Be),he.emplaceBack(za,za+1,za+2),he.emplaceBack(za+1,za+2,za+3),Le.vertexLength+=4,Le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ma[0]),it!==c.length-1&&ti===c[it+1].sectionIndex||o.programConfigurations.populatePaintArrays(ye.length,S,S.index,{},ae,et&&et[ti])}o.placedSymbolArray.emplaceBack(O.x,O.y,Pe,this.glyphOffsetArray.length-Pe,qe,V,H,O.segment,_?_[0]:0,_?_[1]:0,b[0],b[1],M,0,!1,0,j)},qi.prototype._addCollisionDebugVertex=function(o,c,_,b,w,S){return c.emplaceBack(0,0),o.emplaceBack(_.x,_.y,b,w,Math.round(S.x),Math.round(S.y))},qi.prototype.addCollisionDebugVertices=function(o,c,_,b,w,S,M){var O=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),V=O.vertexLength,H=w.layoutVertexArray,j=w.collisionVertexArray,ae=M.anchorX,he=M.anchorY;this._addCollisionDebugVertex(H,j,S,ae,he,new h(o,c)),this._addCollisionDebugVertex(H,j,S,ae,he,new h(_,c)),this._addCollisionDebugVertex(H,j,S,ae,he,new h(_,b)),this._addCollisionDebugVertex(H,j,S,ae,he,new h(o,b)),O.vertexLength+=4;var ye=w.indexArray;ye.emplaceBack(V,V+1),ye.emplaceBack(V+1,V+2),ye.emplaceBack(V+2,V+3),ye.emplaceBack(V+3,V),O.primitiveLength+=4},qi.prototype.addDebugCollisionBoxes=function(o,c,_,b){for(var w=o;w<c;w++){var S=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(S.x1,S.y1,S.x2,S.y2,b?this.textCollisionBox:this.iconCollisionBox,S.anchorPoint,_)}},qi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ry(vh,$E.members,Y_),this.iconCollisionBox=new Ry(vh,$E.members,Y_);for(var o=0;o<this.symbolInstances.length;o++){var c=this.symbolInstances.get(o);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}},qi.prototype._deserializeCollisionBoxesForSymbol=function(o,c,_,b,w,S,M,O,V){for(var H={},j=c;j<_;j++){var ae=o.get(j);H.textBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},H.textFeatureIndex=ae.featureIndex;break}for(var he=b;he<w;he++){var ye=o.get(he);H.verticalTextBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},H.verticalTextFeatureIndex=ye.featureIndex;break}for(var Le=S;Le<M;Le++){var Pe=o.get(Le);H.iconBox={x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,anchorPointX:Pe.anchorPointX,anchorPointY:Pe.anchorPointY},H.iconFeatureIndex=Pe.featureIndex;break}for(var qe=O;qe<V;qe++){var Be=o.get(qe);H.verticalIconBox={x1:Be.x1,y1:Be.y1,x2:Be.x2,y2:Be.y2,anchorPointX:Be.anchorPointX,anchorPointY:Be.anchorPointY},H.verticalIconFeatureIndex=Be.featureIndex;break}return H},qi.prototype.deserializeCollisionBoxes=function(o){this.collisionArrays=[];for(var c=0;c<this.symbolInstances.length;c++){var _=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}},qi.prototype.hasTextData=function(){return this.text.segments.get().length>0},qi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},qi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},qi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},qi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},qi.prototype.addIndicesForPlacedSymbol=function(o,c){for(var _=o.placedSymbolArray.get(c),b=_.vertexStartIndex+4*_.numGlyphs,w=_.vertexStartIndex;w<b;w+=4)o.indexArray.emplaceBack(w,w+1,w+2),o.indexArray.emplaceBack(w+1,w+2,w+3)},qi.prototype.getSortedSymbolIndexes=function(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var c=Math.sin(o),_=Math.cos(o),b=[],w=[],S=[],M=0;M<this.symbolInstances.length;++M){S.push(M);var O=this.symbolInstances.get(M);b.push(0|Math.round(c*O.anchorX+_*O.anchorY)),w.push(O.featureIndex)}return S.sort((function(V,H){return b[V]-b[H]||w[H]-w[V]})),S},qi.prototype.addToSortKeyRanges=function(o,c){var _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===c?_.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:o,symbolInstanceEnd:o+1})},qi.prototype.sortFeatures=function(o){var c=this;if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var _=0,b=this.symbolInstanceIndexes;_<b.length;_+=1){var w=this.symbolInstances.get(b[_]);this.featureSortOrder.push(w.featureIndex),[w.rightJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.leftJustifiedTextSymbolIndex].forEach((function(S,M,O){S>=0&&O.indexOf(S)===M&&c.addIndicesForPlacedSymbol(c.text,S)})),w.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,w.verticalPlacedTextSymbolIndex),w.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,w.placedIconSymbolIndex),w.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,w.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},na("SymbolBucket",qi,{omit:["layers","collisionBoxArray","features","compareText"]}),qi.MAX_GLYPHS=65535,qi.addDynamicAttributes=qI;var FD=new Hr({"symbol-placement":new pa(pe.layout_symbol["symbol-placement"]),"symbol-spacing":new pa(pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new pa(pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new oa(pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new pa(pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new pa(pe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new pa(pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new pa(pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new pa(pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new oa(pe.layout_symbol["icon-size"]),"icon-text-fit":new pa(pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new pa(pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new oa(pe.layout_symbol["icon-image"]),"icon-rotate":new oa(pe.layout_symbol["icon-rotate"]),"icon-padding":new pa(pe.layout_symbol["icon-padding"]),"icon-keep-upright":new pa(pe.layout_symbol["icon-keep-upright"]),"icon-offset":new oa(pe.layout_symbol["icon-offset"]),"icon-anchor":new oa(pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new pa(pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new pa(pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new pa(pe.layout_symbol["text-rotation-alignment"]),"text-field":new oa(pe.layout_symbol["text-field"]),"text-font":new oa(pe.layout_symbol["text-font"]),"text-size":new oa(pe.layout_symbol["text-size"]),"text-max-width":new oa(pe.layout_symbol["text-max-width"]),"text-line-height":new pa(pe.layout_symbol["text-line-height"]),"text-letter-spacing":new oa(pe.layout_symbol["text-letter-spacing"]),"text-justify":new oa(pe.layout_symbol["text-justify"]),"text-radial-offset":new oa(pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new pa(pe.layout_symbol["text-variable-anchor"]),"text-anchor":new oa(pe.layout_symbol["text-anchor"]),"text-max-angle":new pa(pe.layout_symbol["text-max-angle"]),"text-writing-mode":new pa(pe.layout_symbol["text-writing-mode"]),"text-rotate":new oa(pe.layout_symbol["text-rotate"]),"text-padding":new pa(pe.layout_symbol["text-padding"]),"text-keep-upright":new pa(pe.layout_symbol["text-keep-upright"]),"text-transform":new oa(pe.layout_symbol["text-transform"]),"text-offset":new oa(pe.layout_symbol["text-offset"]),"text-allow-overlap":new pa(pe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new pa(pe.layout_symbol["text-ignore-placement"]),"text-optional":new pa(pe.layout_symbol["text-optional"])}),YI={paint:new Hr({"icon-opacity":new oa(pe.paint_symbol["icon-opacity"]),"icon-color":new oa(pe.paint_symbol["icon-color"]),"icon-halo-color":new oa(pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new oa(pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new oa(pe.paint_symbol["icon-halo-blur"]),"icon-translate":new pa(pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new pa(pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new oa(pe.paint_symbol["text-opacity"]),"text-color":new oa(pe.paint_symbol["text-color"],{runtimeType:Xt,getOverride:function(o){return o.textColor},hasOverride:function(o){return!!o.textColor}}),"text-halo-color":new oa(pe.paint_symbol["text-halo-color"]),"text-halo-width":new oa(pe.paint_symbol["text-halo-width"]),"text-halo-blur":new oa(pe.paint_symbol["text-halo-blur"]),"text-translate":new pa(pe.paint_symbol["text-translate"]),"text-translate-anchor":new pa(pe.paint_symbol["text-translate-anchor"])}),layout:FD},qf=function(o){this.type=o.property.overrides?o.property.overrides.runtimeType:aa,this.defaultValue=o};qf.prototype.evaluate=function(o){if(o.formattedSection){var c=this.defaultValue.property.overrides;if(c&&c.hasOverride(o.formattedSection))return c.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default},qf.prototype.eachChild=function(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)},qf.prototype.outputDefined=function(){return!1},qf.prototype.serialize=function(){return null},na("FormatSectionOverride",qf,{omit:["defaultValue"]});var ND=(function(o){function c(_){o.call(this,_,YI)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.recalculate=function(_,b){if(o.prototype.recalculate.call(this,_,b),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var w=this.layout.get("text-writing-mode");if(w){for(var S=[],M=0,O=w;M<O.length;M+=1){var V=O[M];S.indexOf(V)<0&&S.push(V)}this.layout._values["text-writing-mode"]=S}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},c.prototype.getValueAndResolveTokens=function(_,b,w,S){var M=this.layout.get(_).evaluate(b,{},w,S),O=this._unevaluatedLayout._values[_];return O.isDataDriven()||O_(O.value)||!M?M:(function(V,H){return H.replace(/{([^{}]+)}/g,(function(j,ae){return ae in V?String(V[ae]):""}))})(b.properties,M)},c.prototype.createBucket=function(_){return new qi(_)},c.prototype.queryRadius=function(){return 0},c.prototype.queryIntersectsFeature=function(){return!1},c.prototype._setPaintOverrides=function(){for(var _=0,b=YI.paint.overridableProperties;_<b.length;_+=1){var w=b[_];if(c.hasPaintOverride(this.layout,w)){var S,M=this.paint.get(w),O=new qf(M),V=new _h(O,M.property.specification);S=M.value.kind==="constant"||M.value.kind==="source"?new F_("source",V):new mh("composite",V,M.value.zoomStops,M.value._interpolationType),this.paint._values[w]=new ls(M.property,S,M.parameters)}}},c.prototype._handleOverridablePaintPropertyUpdate=function(_,b,w){return!(!this.layout||b.isDataDriven()||w.isDataDriven())&&c.hasPaintOverride(this.layout,_)},c.hasPaintOverride=function(_,b){var w=_.get("text-field"),S=YI.paint.properties[b],M=!1,O=function(j){for(var ae=0,he=j;ae<he.length;ae+=1)if(S.overrides&&S.overrides.hasOverride(he[ae]))return void(M=!0)};if(w.value.kind==="constant"&&w.value.value instanceof Tr)O(w.value.value.sections);else if(w.value.kind==="source"){var V=function(j){M||(j instanceof ss&&Un(j.value)===Yt?O(j.value.sections):j instanceof il?O(j.sections):j.eachChild(V))},H=w.value;H._styleExpression&&V(H._styleExpression.expression)}return M},c})(Pl),BD={paint:new Hr({"background-color":new pa(pe.paint_background["background-color"]),"background-pattern":new us(pe.paint_background["background-pattern"]),"background-opacity":new pa(pe.paint_background["background-opacity"])})},DD=(function(o){function c(_){o.call(this,_,BD)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c})(Pl),VD={paint:new Hr({"raster-opacity":new pa(pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new pa(pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new pa(pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new pa(pe.paint_raster["raster-brightness-max"]),"raster-saturation":new pa(pe.paint_raster["raster-saturation"]),"raster-contrast":new pa(pe.paint_raster["raster-contrast"]),"raster-resampling":new pa(pe.paint_raster["raster-resampling"]),"raster-fade-duration":new pa(pe.paint_raster["raster-fade-duration"])})},ZD=(function(o){function c(_){o.call(this,_,VD)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c})(Pl),zD=(function(o){function c(_){o.call(this,_,{}),this.implementation=_}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},c.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},c.prototype.recalculate=function(){},c.prototype.updateTransitions=function(){},c.prototype.hasTransition=function(){},c.prototype.serialize=function(){},c.prototype.onAdd=function(_){this.implementation.onAdd&&this.implementation.onAdd(_,_.painter.context.gl)},c.prototype.onRemove=function(_){this.implementation.onRemove&&this.implementation.onRemove(_,_.painter.context.gl)},c})(Pl),UD={circle:kI,heatmap:TB,hillshade:MB,fill:XB,"fill-extrusion":tD,line:oD,symbol:ND,background:DD,raster:ZD},vM=y.HTMLImageElement,xM=y.HTMLCanvasElement,wM=y.HTMLVideoElement,CM=y.ImageData,Ev=y.ImageBitmap,em=function(o,c,_,b){this.context=o,this.format=_,this.texture=o.gl.createTexture(),this.update(c,b)};em.prototype.update=function(o,c,_){var b=o.width,w=o.height,S=!(this.size&&this.size[0]===b&&this.size[1]===w||_),M=this.context,O=M.gl;if(this.useMipmap=!!(c&&c.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!c||c.premultiply!==!1)),S)this.size=[b,w],o instanceof vM||o instanceof xM||o instanceof wM||o instanceof CM||Ev&&o instanceof Ev?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,o):O.texImage2D(O.TEXTURE_2D,0,this.format,b,w,0,this.format,O.UNSIGNED_BYTE,o.data);else{var V=_||{x:0,y:0},H=V.x,j=V.y;o instanceof vM||o instanceof xM||o instanceof wM||o instanceof CM||Ev&&o instanceof Ev?O.texSubImage2D(O.TEXTURE_2D,0,H,j,O.RGBA,O.UNSIGNED_BYTE,o):O.texSubImage2D(O.TEXTURE_2D,0,H,j,b,w,O.RGBA,O.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)},em.prototype.bind=function(o,c,_){var b=this.context.gl;b.bindTexture(b.TEXTURE_2D,this.texture),_!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=b.LINEAR),o!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,o),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,_||o),this.filter=o),c!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,c),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,c),this.wrap=c)},em.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},em.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var KI=function(o){var c=this;this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){c._triggered=!1,c._callback()})};KI.prototype.trigger=function(){var o=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){o._triggered=!1,o._callback()}),0))},KI.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Yf=function(o,c,_){this.target=o,this.parent=c,this.mapId=_,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Y(["receive","process"],this),this.invoker=new KI(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=le()?o:y};function IM(o,c,_){var b=2*Math.PI*6378137/256/Math.pow(2,_);return[o*b-2*Math.PI*6378137/2,c*b-2*Math.PI*6378137/2]}Yf.prototype.send=function(o,c,_,b,w){var S=this;w===void 0&&(w=!1);var M=Math.round(1e18*Math.random()).toString(36).substring(0,10);_&&(this.callbacks[M]=_);var O=Ie(this.globalScope)?void 0:[];return this.target.postMessage({id:M,type:o,hasCallback:!!_,targetMapId:b,mustQueue:w,sourceMapId:this.mapId,data:rl(c,O)},O),{cancel:function(){_&&delete S.callbacks[M],S.target.postMessage({id:M,type:"<cancel>",targetMapId:b,sourceMapId:S.mapId})}}},Yf.prototype.receive=function(o){var c=o.data,_=c.id;if(_&&(!c.targetMapId||this.mapId===c.targetMapId))if(c.type==="<cancel>"){delete this.tasks[_];var b=this.cancelCallbacks[_];delete this.cancelCallbacks[_],b&&b()}else le()||c.mustQueue?(this.tasks[_]=c,this.taskQueue.push(_),this.invoker.trigger()):this.processTask(_,c)},Yf.prototype.process=function(){if(this.taskQueue.length){var o=this.taskQueue.shift(),c=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),c&&this.processTask(o,c)}},Yf.prototype.processTask=function(o,c){var _=this;if(c.type==="<response>"){var b=this.callbacks[o];delete this.callbacks[o],b&&(c.error?b(Fs(c.error)):b(null,Fs(c.data)))}else{var w=!1,S=Ie(this.globalScope)?void 0:[],M=c.hasCallback?function(j,ae){w=!0,delete _.cancelCallbacks[o],_.target.postMessage({id:o,type:"<response>",sourceMapId:_.mapId,error:j?rl(j):null,data:rl(ae,S)},S)}:function(j){w=!0},O=null,V=Fs(c.data);if(this.parent[c.type])O=this.parent[c.type](c.sourceMapId,V,M);else if(this.parent.getWorkerSource){var H=c.type.split(".");O=this.parent.getWorkerSource(c.sourceMapId,H[0],V.source)[H[1]](V,M)}else M(new Error("Could not find function "+c.type));!w&&O&&O.cancel&&(this.cancelCallbacks[o]=O.cancel)}},Yf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var or=function(o,c){o&&(c?this.setSouthWest(o).setNorthEast(c):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))};or.prototype.setNorthEast=function(o){return this._ne=o instanceof Cn?new Cn(o.lng,o.lat):Cn.convert(o),this},or.prototype.setSouthWest=function(o){return this._sw=o instanceof Cn?new Cn(o.lng,o.lat):Cn.convert(o),this},or.prototype.extend=function(o){var c,_,b=this._sw,w=this._ne;if(o instanceof Cn)c=o,_=o;else{if(!(o instanceof or))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(or.convert(o)):this.extend(Cn.convert(o)):this;if(_=o._ne,!(c=o._sw)||!_)return this}return b||w?(b.lng=Math.min(c.lng,b.lng),b.lat=Math.min(c.lat,b.lat),w.lng=Math.max(_.lng,w.lng),w.lat=Math.max(_.lat,w.lat)):(this._sw=new Cn(c.lng,c.lat),this._ne=new Cn(_.lng,_.lat)),this},or.prototype.getCenter=function(){return new Cn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},or.prototype.getSouthWest=function(){return this._sw},or.prototype.getNorthEast=function(){return this._ne},or.prototype.getNorthWest=function(){return new Cn(this.getWest(),this.getNorth())},or.prototype.getSouthEast=function(){return new Cn(this.getEast(),this.getSouth())},or.prototype.getWest=function(){return this._sw.lng},or.prototype.getSouth=function(){return this._sw.lat},or.prototype.getEast=function(){return this._ne.lng},or.prototype.getNorth=function(){return this._ne.lat},or.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},or.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},or.prototype.isEmpty=function(){return!(this._sw&&this._ne)},or.prototype.contains=function(o){var c=Cn.convert(o),_=c.lng,b=c.lat,w=this._sw.lng<=_&&_<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=_&&_>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&w},or.convert=function(o){return!o||o instanceof or?o:new or(o)};var Cn=function(o,c){if(isNaN(o)||isNaN(c))throw new Error("Invalid LngLat object: ("+o+", "+c+")");if(this.lng=+o,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Cn.prototype.wrap=function(){return new Cn(E(this.lng,-180,180),this.lat)},Cn.prototype.toArray=function(){return[this.lng,this.lat]},Cn.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Cn.prototype.distanceTo=function(o){var c=Math.PI/180,_=this.lat*c,b=o.lat*c,w=Math.sin(_)*Math.sin(b)+Math.cos(_)*Math.cos(b)*Math.cos((o.lng-this.lng)*c);return 63710088e-1*Math.acos(Math.min(w,1))},Cn.prototype.toBounds=function(o){o===void 0&&(o=0);var c=360*o/40075017,_=c/Math.cos(Math.PI/180*this.lat);return new or(new Cn(this.lng-_,this.lat-c),new Cn(this.lng+_,this.lat+c))},Cn.convert=function(o){if(o instanceof Cn)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Cn(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Cn(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var SM=2*Math.PI*63710088e-1;function AM(o){return SM*Math.cos(o*Math.PI/180)}function TM(o){return(180+o)/360}function EM(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function MM(o,c){return o/AM(c)}function jI(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}var tm=function(o,c,_){_===void 0&&(_=0),this.x=+o,this.y=+c,this.z=+_};tm.fromLngLat=function(o,c){c===void 0&&(c=0);var _=Cn.convert(o);return new tm(TM(_.lng),EM(_.lat),MM(c,_.lat))},tm.prototype.toLngLat=function(){return new Cn(360*this.x-180,jI(this.y))},tm.prototype.toAltitude=function(){return this.z*AM(jI(this.y))},tm.prototype.meterInMercatorCoordinateUnits=function(){return 1/SM*(o=jI(this.y),1/Math.cos(o*Math.PI/180));var o};var am=function(o,c,_){this.z=o,this.x=c,this.y=_,this.key=ky(0,o,o,c,_)};am.prototype.equals=function(o){return this.z===o.z&&this.x===o.x&&this.y===o.y},am.prototype.url=function(o,c){var _,b,w,S,M,O=(b=this.y,w=this.z,S=IM(256*(_=this.x),256*(b=Math.pow(2,w)-b-1),w),M=IM(256*(_+1),256*(b+1),w),S[0]+","+S[1]+","+M[0]+","+M[1]),V=(function(H,j,ae){for(var he,ye="",Le=H;Le>0;Le--)ye+=(j&(he=1<<Le-1)?1:0)+(ae&he?2:0);return ye})(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",V).replace("{bbox-epsg-3857}",O)},am.prototype.getTilePoint=function(o){var c=Math.pow(2,this.z);return new h(8192*(o.x*c-this.x),8192*(o.y*c-this.y))},am.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var LM=function(o,c){this.wrap=o,this.canonical=c,this.key=ky(o,c.z,c.z,c.x,c.y)},lr=function(o,c,_,b,w){this.overscaledZ=o,this.wrap=c,this.canonical=new am(_,+b,+w),this.key=ky(c,o,_,b,w)};function ky(o,c,_,b,w){(o*=2)<0&&(o=-1*o-1);var S=1<<_;return(S*S*o+S*w+b).toString(36)+_.toString(36)+c.toString(36)}lr.prototype.equals=function(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)},lr.prototype.scaledTo=function(o){var c=this.canonical.z-o;return o>this.canonical.z?new lr(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new lr(o,this.wrap,o,this.canonical.x>>c,this.canonical.y>>c)},lr.prototype.calculateScaledKey=function(o,c){var _=this.canonical.z-o;return o>this.canonical.z?ky(this.wrap*+c,o,this.canonical.z,this.canonical.x,this.canonical.y):ky(this.wrap*+c,o,o,this.canonical.x>>_,this.canonical.y>>_)},lr.prototype.isChildOf=function(o){if(o.wrap!==this.wrap)return!1;var c=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>c&&o.canonical.y===this.canonical.y>>c},lr.prototype.children=function(o){if(this.overscaledZ>=o)return[new lr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var c=this.canonical.z+1,_=2*this.canonical.x,b=2*this.canonical.y;return[new lr(c,this.wrap,c,_,b),new lr(c,this.wrap,c,_+1,b),new lr(c,this.wrap,c,_,b+1),new lr(c,this.wrap,c,_+1,b+1)]},lr.prototype.isLessThan=function(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))},lr.prototype.wrapped=function(){return new lr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},lr.prototype.unwrapTo=function(o){return new lr(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)},lr.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},lr.prototype.toUnwrapped=function(){return new LM(this.wrap,this.canonical)},lr.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},lr.prototype.getTilePoint=function(o){return this.canonical.getTilePoint(new tm(o.x-this.wrap,o.y))},na("CanonicalTileID",am),na("OverscaledTileID",lr,{omit:["posMatrix"]});var ud=function(o,c,_){if(this.uid=o,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(_&&_!=="mapbox"&&_!=="terrarium")return de('"'+_+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=c.height;var b=this.dim=c.height-2;this.data=new Uint32Array(c.data.buffer),this.encoding=_||"mapbox";for(var w=0;w<b;w++)this.data[this._idx(-1,w)]=this.data[this._idx(0,w)],this.data[this._idx(b,w)]=this.data[this._idx(b-1,w)],this.data[this._idx(w,-1)]=this.data[this._idx(w,0)],this.data[this._idx(w,b)]=this.data[this._idx(w,b-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(b,-1)]=this.data[this._idx(b-1,0)],this.data[this._idx(-1,b)]=this.data[this._idx(0,b-1)],this.data[this._idx(b,b)]=this.data[this._idx(b-1,b-1)]};ud.prototype.get=function(o,c){var _=new Uint8Array(this.data.buffer),b=4*this._idx(o,c);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(_[b],_[b+1],_[b+2])},ud.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},ud.prototype._idx=function(o,c){if(o<-1||o>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(o+1)},ud.prototype._unpackMapbox=function(o,c,_){return(256*o*256+256*c+_)/10-1e4},ud.prototype._unpackTerrarium=function(o,c,_){return 256*o+c+_/256-32768},ud.prototype.getPixels=function(){return new Zs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ud.prototype.backfillBorder=function(o,c,_){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");var b=c*this.dim,w=c*this.dim+this.dim,S=_*this.dim,M=_*this.dim+this.dim;switch(c){case-1:b=w-1;break;case 1:w=b+1}switch(_){case-1:S=M-1;break;case 1:M=S+1}for(var O=-c*this.dim,V=-_*this.dim,H=S;H<M;H++)for(var j=b;j<w;j++)this.data[this._idx(j,H)]=o.data[this._idx(j+O,H+V)]},na("DEMData",ud);var Mv=function(o){this._stringToNumber={},this._numberToString=[];for(var c=0;c<o.length;c++){var _=o[c];this._stringToNumber[_]=c,this._numberToString[c]=_}};Mv.prototype.encode=function(o){return this._stringToNumber[o]},Mv.prototype.decode=function(o){return this._numberToString[o]};var Lv=function(o,c,_,b,w){this.type="Feature",this._vectorTileFeature=o,o._z=c,o._x=_,o._y=b,this.properties=o.properties,this.id=w},$I={geometry:{configurable:!0}};$I.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},$I.geometry.set=function(o){this._geometry=o},Lv.prototype.toJSON=function(){var o={geometry:this.geometry};for(var c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(o[c]=this[c]);return o},Object.defineProperties(Lv.prototype,$I);var Kf=function(){this.state={},this.stateChanges={},this.deletedStates={}};Kf.prototype.updateState=function(o,c,_){var b=String(c);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][b]=this.stateChanges[o][b]||{},L(this.stateChanges[o][b],_),this.deletedStates[o]===null)for(var w in this.deletedStates[o]={},this.state[o])w!==b&&(this.deletedStates[o][w]=null);else if(this.deletedStates[o]&&this.deletedStates[o][b]===null)for(var S in this.deletedStates[o][b]={},this.state[o][b])_[S]||(this.deletedStates[o][b][S]=null);else for(var M in _)this.deletedStates[o]&&this.deletedStates[o][b]&&this.deletedStates[o][b][M]===null&&delete this.deletedStates[o][b][M]},Kf.prototype.removeFeatureState=function(o,c,_){if(this.deletedStates[o]!==null){var b=String(c);if(this.deletedStates[o]=this.deletedStates[o]||{},_&&c!==void 0)this.deletedStates[o][b]!==null&&(this.deletedStates[o][b]=this.deletedStates[o][b]||{},this.deletedStates[o][b][_]=null);else if(c!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][b])for(_ in this.deletedStates[o][b]={},this.stateChanges[o][b])this.deletedStates[o][b][_]=null;else this.deletedStates[o][b]=null;else this.deletedStates[o]=null}},Kf.prototype.getState=function(o,c){var _=String(c),b=L({},(this.state[o]||{})[_],(this.stateChanges[o]||{})[_]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){var w=this.deletedStates[o][c];if(w===null)return{};for(var S in w)delete b[S]}return b},Kf.prototype.initializeTileState=function(o,c){o.setFeatureState(this.state,c)},Kf.prototype.coalesceChanges=function(o,c){var _={};for(var b in this.stateChanges){this.state[b]=this.state[b]||{};var w={};for(var S in this.stateChanges[b])this.state[b][S]||(this.state[b][S]={}),L(this.state[b][S],this.stateChanges[b][S]),w[S]=this.state[b][S];_[b]=w}for(var M in this.deletedStates){this.state[M]=this.state[M]||{};var O={};if(this.deletedStates[M]===null)for(var V in this.state[M])O[V]={},this.state[M][V]={};else for(var H in this.deletedStates[M]){if(this.deletedStates[M][H]===null)this.state[M][H]={};else for(var j=0,ae=Object.keys(this.deletedStates[M][H]);j<ae.length;j+=1)delete this.state[M][H][ae[j]];O[H]=this.state[M][H]}_[M]=_[M]||{},L(_[M],O)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(var he in o)o[he].setFeatureState(_,c)};var cd=function(o,c){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new nu(8192,16,0),this.grid3D=new nu(8192,16,0),this.featureIndexArray=new oe,this.promoteId=c};function RM(o,c,_,b,w){return te(o,(function(S,M){var O=c instanceof X_?c.get(M):null;return O&&O.evaluate?O.evaluate(_,b,w):O}))}function kM(o){for(var c=1/0,_=1/0,b=-1/0,w=-1/0,S=0,M=o;S<M.length;S+=1){var O=M[S];c=Math.min(c,O.x),_=Math.min(_,O.y),b=Math.max(b,O.x),w=Math.max(w,O.y)}return{minX:c,minY:_,maxX:b,maxY:w}}function HD(o,c){return c-o}cd.prototype.insert=function(o,c,_,b,w,S){var M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,b,w);for(var O=S?this.grid3D:this.grid,V=0;V<c.length;V++){for(var H=c[V],j=[1/0,1/0,-1/0,-1/0],ae=0;ae<H.length;ae++){var he=H[ae];j[0]=Math.min(j[0],he.x),j[1]=Math.min(j[1],he.y),j[2]=Math.max(j[2],he.x),j[3]=Math.max(j[3],he.y)}j[0]<8192&&j[1]<8192&&j[2]>=0&&j[3]>=0&&O.insert(M,j[0],j[1],j[2],j[3])}},cd.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Bf.VectorTile(new yv(this.rawTileData)).layers,this.sourceLayerCoder=new Mv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},cd.prototype.query=function(o,c,_,b){var w=this;this.loadVTLayers();for(var S=o.params||{},M=8192/o.tileSize/o.scale,O=wf(S.filter),V=o.queryGeometry,H=o.queryPadding*M,j=kM(V),ae=this.grid.query(j.minX-H,j.minY-H,j.maxX+H,j.maxY+H),he=kM(o.cameraQueryGeometry),ye=this.grid3D.query(he.minX-H,he.minY-H,he.maxX+H,he.maxY+H,(function(nt,lt,pt,Mt){return(function(Vt,ma,$t,ba,Qt){for(var Ya=0,Ma=Vt;Ya<Ma.length;Ya+=1){var la=Ma[Ya];if(ma<=la.x&&$t<=la.y&&ba>=la.x&&Qt>=la.y)return!0}var ti=[new h(ma,$t),new h(ma,Qt),new h(ba,Qt),new h(ba,$t)];if(Vt.length>2){for(var za=0,pi=ti;za<pi.length;za+=1)if(Wl(Vt,pi[za]))return!0}for(var va=0;va<Vt.length-1;va++)if($_(Vt[va],Vt[va+1],ti))return!0;return!1})(o.cameraQueryGeometry,nt-H,lt-H,pt+H,Mt+H)})),Le=0,Pe=ye;Le<Pe.length;Le+=1)ae.push(Pe[Le]);ae.sort(HD);for(var qe,Be={},et=function(nt){var lt=ae[nt];if(lt!==qe){qe=lt;var pt=w.featureIndexArray.get(lt),Mt=null;w.loadMatchingFeature(Be,pt.bucketIndex,pt.sourceLayerIndex,pt.featureIndex,O,S.layers,S.availableImages,c,_,b,(function(Vt,ma,$t){return Mt||(Mt=Rn(Vt)),ma.queryIntersectsFeature(V,Vt,$t,Mt,w.z,o.transform,M,o.pixelPosMatrix)}))}},it=0;it<ae.length;it++)et(it);return Be},cd.prototype.loadMatchingFeature=function(o,c,_,b,w,S,M,O,V,H,j){var ae=this.bucketLayerIDs[c];if(!S||(function(Vt,ma){for(var $t=0;$t<Vt.length;$t++)if(ma.indexOf(Vt[$t])>=0)return!0;return!1})(S,ae)){var he=this.sourceLayerCoder.decode(_),ye=this.vtLayers[he].feature(b);if(w.needGeometry){var Le=Hn(ye,!0);if(!w.filter(new oi(this.tileID.overscaledZ),Le,this.tileID.canonical))return}else if(!w.filter(new oi(this.tileID.overscaledZ),ye))return;for(var Pe=this.getId(ye,he),qe=0;qe<ae.length;qe++){var Be=ae[qe];if(!(S&&S.indexOf(Be)<0)){var et=O[Be];if(et){var it={};Pe!==void 0&&H&&(it=H.getState(et.sourceLayer||"_geojsonTileLayer",Pe));var nt=L({},V[Be]);nt.paint=RM(nt.paint,et.paint,ye,it,M),nt.layout=RM(nt.layout,et.layout,ye,it,M);var lt=!j||j(ye,et,it);if(lt){var pt=new Lv(ye,this.z,this.x,this.y,Pe);pt.layer=nt;var Mt=o[Be];Mt===void 0&&(Mt=o[Be]=[]),Mt.push({featureIndex:b,feature:pt,intersectionZ:lt})}}}}}},cd.prototype.lookupSymbolFeatures=function(o,c,_,b,w,S,M,O){var V={};this.loadVTLayers();for(var H=wf(w),j=0,ae=o;j<ae.length;j+=1)this.loadMatchingFeature(V,_,b,ae[j],H,S,M,O,c);return V},cd.prototype.hasLayer=function(o){for(var c=0,_=this.bucketLayerIDs;c<_.length;c+=1)for(var b=0,w=_[c];b<w.length;b+=1)if(o===w[b])return!0;return!1},cd.prototype.getId=function(o,c){var _=o.id;return this.promoteId&&typeof(_=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]])=="boolean"&&(_=Number(_)),_},na("FeatureIndex",cd,{omit:["rawTileData","sourceLayerCoder"]});var Rr=function(o,c){this.tileID=o,this.uid=F(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Rr.prototype.registerFadeDuration=function(o){var c=o+this.timeAdded;c<zt.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)},Rr.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Rr.prototype.loadVectorData=function(o,c,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){for(var b in o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=(function(H,j){var ae={};if(!j)return ae;for(var he=function(){var Pe=Le[ye],qe=Pe.layerIds.map((function(it){return j.getLayer(it)})).filter(Boolean);if(qe.length!==0){Pe.layers=qe,Pe.stateDependentLayerIds&&(Pe.stateDependentLayers=Pe.stateDependentLayerIds.map((function(it){return qe.filter((function(nt){return nt.id===it}))[0]})));for(var Be=0,et=qe;Be<et.length;Be+=1)ae[et[Be].id]=Pe}},ye=0,Le=H;ye<Le.length;ye+=1)he();return ae})(o.buckets,c.style),this.hasSymbolBuckets=!1,this.buckets){var w=this.buckets[b];if(w instanceof qi){if(this.hasSymbolBuckets=!0,!_)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var S in this.buckets){var M=this.buckets[S];if(M instanceof qi&&M.hasRTLText){this.hasRTLText=!0,ho.isLoading()||ho.isLoaded()||fy()!=="deferred"||sl();break}}for(var O in this.queryPadding=0,this.buckets){var V=this.buckets[O];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(O).queryRadius(V))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new p},Rr.prototype.unloadVectorData=function(){for(var o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Rr.prototype.getBucket=function(o){return this.buckets[o.id]},Rr.prototype.upload=function(o){for(var c in this.buckets){var _=this.buckets[c];_.uploadPending()&&_.upload(o)}var b=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new em(o,this.imageAtlas.image,b.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new em(o,this.glyphAtlasImage,b.ALPHA),this.glyphAtlasImage=null)},Rr.prototype.prepare=function(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)},Rr.prototype.queryRenderedFeatures=function(o,c,_,b,w,S,M,O,V,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:w,scale:S,tileSize:this.tileSize,pixelPosMatrix:H,transform:O,params:M,queryPadding:this.queryPadding*V},o,c,_):{}},Rr.prototype.querySourceFeatures=function(o,c){var _=this.latestFeatureIndex;if(_&&_.rawTileData){var b=_.loadVTLayers(),w=c?c.sourceLayer:"",S=b._geojsonTileLayer||b[w];if(S)for(var M=wf(c&&c.filter),O=this.tileID.canonical,V=O.z,H=O.x,j=O.y,ae={z:V,x:H,y:j},he=0;he<S.length;he++){var ye=S.feature(he);if(M.needGeometry){var Le=Hn(ye,!0);if(!M.filter(new oi(this.tileID.overscaledZ),Le,this.tileID.canonical))continue}else if(!M.filter(new oi(this.tileID.overscaledZ),ye))continue;var Pe=_.getId(ye,w),qe=new Lv(ye,V,H,j,Pe);qe.tile=ae,o.push(qe)}}},Rr.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Rr.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Rr.prototype.setExpiryData=function(o){var c=this.expirationTime;if(o.cacheControl){var _=_e(o.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){var b=Date.now(),w=!1;if(this.expirationTime>b)w=!1;else if(c)if(this.expirationTime<c)w=!0;else{var S=this.expirationTime-c;S?this.expirationTime=b+Math.max(S,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Rr.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Rr.prototype.setFeatureState=function(o,c){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(o).length!==0){var _=this.latestFeatureIndex.loadVTLayers();for(var b in this.buckets)if(c.style.hasLayer(b)){var w=this.buckets[b],S=w.layers[0].sourceLayer||"_geojsonTileLayer",M=_[S],O=o[S];if(M&&O&&Object.keys(O).length!==0){w.update(O,M,this.imageAtlas&&this.imageAtlas.patternPositions||{});var V=c&&c.style&&c.style.getLayer(b);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(w)))}}}},Rr.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Rr.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<zt.now()},Rr.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Rr.prototype.setHoldDuration=function(o){this.symbolFadeHoldUntil=zt.now()+o},Rr.prototype.setDependencies=function(o,c){for(var _={},b=0,w=c;b<w.length;b+=1)_[w[b]]=!0;this.dependencies[o]=_},Rr.prototype.hasDependency=function(o,c){for(var _=0,b=o;_<b.length;_+=1){var w=this.dependencies[b[_]];if(w){for(var S=0,M=c;S<M.length;S+=1)if(w[M[S]])return!0}}return!1};var Sh=y.performance,PM=function(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},Sh.mark(this._marks.start)};PM.prototype.finish=function(){Sh.mark(this._marks.end);var o=Sh.getEntriesByName(this._marks.measure);return o.length===0&&(Sh.measure(this._marks.measure,this._marks.start,this._marks.end),o=Sh.getEntriesByName(this._marks.measure),Sh.clearMarks(this._marks.start),Sh.clearMarks(this._marks.end),Sh.clearMeasures(this._marks.measure)),o},r.Actor=Yf,r.AlphaImage=Q_,r.CanonicalTileID=am,r.CollisionBoxArray=p,r.Color=bi,r.DEMData=ud,r.DataConstantProperty=pa,r.DictionaryCoder=Mv,r.EXTENT=8192,r.ErrorEvent=Xe,r.EvaluationParameters=oi,r.Event=Se,r.Evented=ze,r.FeatureIndex=cd,r.FillBucket=lu,r.FillExtrusionBucket=uu,r.ImageAtlas=Ly,r.ImagePosition=vv,r.LineBucket=Is,r.LngLat=Cn,r.LngLatBounds=or,r.MercatorCoordinate=tm,r.ONE_EM=24,r.OverscaledTileID=lr,r.Point=h,r.Point$1=h,r.Properties=Hr,r.Protobuf=yv,r.RGBAImage=Zs,r.RequestManager=Ze,r.RequestPerformance=PM,r.ResourceType=vs,r.SegmentVector=ve,r.SourceFeatureState=Kf,r.StructArrayLayout1ui2=xy,r.StructArrayLayout2f1f2i16=rd,r.StructArrayLayout2i4=nd,r.StructArrayLayout3ui6=Qu,r.StructArrayLayout4i8=py,r.SymbolBucket=qi,r.Texture=em,r.Tile=Rr,r.Transitionable=Ur,r.Uniform1f=Ft,r.Uniform1i=bt,r.Uniform2f=Gt,r.Uniform3f=ea,r.Uniform4f=ya,r.UniformColor=Ca,r.UniformMatrix4f=vi,r.UnwrappedTileID=LM,r.ValidationError=Ae,r.WritingMode=Wo,r.ZoomHistory=dy,r.add=function(o,c,_){return o[0]=c[0]+_[0],o[1]=c[1]+_[1],o[2]=c[2]+_[2],o},r.addDynamicAttributes=qI,r.asyncAll=function(o,c,_){if(!o.length)return _(null,[]);var b=o.length,w=new Array(o.length),S=null;o.forEach((function(M,O){c(M,(function(V,H){V&&(S=V),w[O]=H,--b==0&&_(S,w)}))}))},r.bezier=C,r.bindAll=Y,r.browser=zt,r.cacheEntryPossiblyAdded=function(o){++Ti>En&&(o.getActor().send("enforceCacheSizeLimit",Ri),Ti=0)},r.clamp=A,r.clearTileCache=function(o){var c=y.caches.delete("mapbox-tiles");o&&c.catch(o).then((function(){return o()}))},r.clipLine=mM,r.clone=function(o){var c=new Pi(16);return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c},r.clone$1=me,r.clone$2=function(o){var c=new Pi(3);return c[0]=o[0],c[1]=o[1],c[2]=o[2],c},r.collisionCircleLayout=dD,r.config=Nt,r.create=function(){var o=new Pi(16);return Pi!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},r.create$1=function(){var o=new Pi(9);return Pi!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o},r.create$2=function(){var o=new Pi(4);return Pi!=Float32Array&&(o[1]=0,o[2]=0),o[0]=1,o[3]=1,o},r.createCommonjsModule=l,r.createExpression=vf,r.createLayout=Mr,r.createStyleLayer=function(o){return o.type==="custom"?new zD(o):new UD[o.type](o)},r.cross=function(o,c,_){var b=c[0],w=c[1],S=c[2],M=_[0],O=_[1],V=_[2];return o[0]=w*V-S*O,o[1]=S*M-b*V,o[2]=b*O-w*M,o},r.deepEqual=function o(c,_){if(Array.isArray(c)){if(!Array.isArray(_)||c.length!==_.length)return!1;for(var b=0;b<c.length;b++)if(!o(c[b],_[b]))return!1;return!0}if(typeof c=="object"&&c!==null&&_!==null){if(typeof _!="object"||Object.keys(c).length!==Object.keys(_).length)return!1;for(var w in c)if(!o(c[w],_[w]))return!1;return!0}return c===_},r.dot=function(o,c){return o[0]*c[0]+o[1]*c[1]+o[2]*c[2]},r.dot$1=function(o,c){return o[0]*c[0]+o[1]*c[1]+o[2]*c[2]+o[3]*c[3]},r.ease=I,r.emitValidationErrors=z_,r.endsWith=$,r.enforceCacheSizeLimit=function(o){_i(),ht&&ht.then((function(c){c.keys().then((function(_){for(var b=0;b<_.length-o;b++)c.delete(_[b])}))}))},r.evaluateSizeForFeature=lM,r.evaluateSizeForZoom=uM,r.evaluateVariableOffset=pM,r.evented=my,r.extend=L,r.featureFilter=wf,r.filterObject=ce,r.fromRotation=function(o,c){var _=Math.sin(c),b=Math.cos(c);return o[0]=b,o[1]=_,o[2]=0,o[3]=-_,o[4]=b,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},r.getAnchorAlignment=zI,r.getAnchorJustification=XI,r.getArrayBuffer=Ll,r.getImage=ue,r.getJSON=function(o,c){return pr(L(o,{type:"json"}),c)},r.getRTLTextPluginStatus=fy,r.getReferrer=gr,r.getVideo=function(o,c){var _,b,w=y.document.createElement("video");w.muted=!0,w.onloadstart=function(){c(null,w)};for(var S=0;S<o.length;S++){var M=y.document.createElement("source");_=o[S],b=void 0,(b=y.document.createElement("a")).href=_,(b.protocol!==y.document.location.protocol||b.host!==y.document.location.host)&&(w.crossOrigin="Anonymous"),M.src=o[S],w.appendChild(M)}return{cancel:function(){}}},r.identity=_o,r.invert=function(o,c){var _=c[0],b=c[1],w=c[2],S=c[3],M=c[4],O=c[5],V=c[6],H=c[7],j=c[8],ae=c[9],he=c[10],ye=c[11],Le=c[12],Pe=c[13],qe=c[14],Be=c[15],et=_*O-b*M,it=_*V-w*M,nt=_*H-S*M,lt=b*V-w*O,pt=b*H-S*O,Mt=w*H-S*V,Vt=j*Pe-ae*Le,ma=j*qe-he*Le,$t=j*Be-ye*Le,ba=ae*qe-he*Pe,Qt=ae*Be-ye*Pe,Ya=he*Be-ye*qe,Ma=et*Ya-it*Qt+nt*ba+lt*$t-pt*ma+Mt*Vt;return Ma?(o[0]=(O*Ya-V*Qt+H*ba)*(Ma=1/Ma),o[1]=(w*Qt-b*Ya-S*ba)*Ma,o[2]=(Pe*Mt-qe*pt+Be*lt)*Ma,o[3]=(he*pt-ae*Mt-ye*lt)*Ma,o[4]=(V*$t-M*Ya-H*ma)*Ma,o[5]=(_*Ya-w*$t+S*ma)*Ma,o[6]=(qe*nt-Le*Mt-Be*it)*Ma,o[7]=(j*Mt-he*nt+ye*it)*Ma,o[8]=(M*Qt-O*$t+H*Vt)*Ma,o[9]=(b*$t-_*Qt-S*Vt)*Ma,o[10]=(Le*pt-Pe*nt+Be*et)*Ma,o[11]=(ae*nt-j*pt-ye*et)*Ma,o[12]=(O*ma-M*ba-V*Vt)*Ma,o[13]=(_*ba-b*ma+w*Vt)*Ma,o[14]=(Pe*it-Le*lt-qe*et)*Ma,o[15]=(j*lt-ae*it+he*et)*Ma,o):null},r.isChar=qt,r.isMapboxURL=Re,r.keysDifference=function(o,c){var _=[];for(var b in o)b in c||_.push(b);return _},r.makeRequest=pr,r.mapObject=te,r.mercatorXfromLng=TM,r.mercatorYfromLat=EM,r.mercatorZfromAltitude=MM,r.mul=RI,r.multiply=Cs,r.mvt=Bf,r.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},r.normalize=function(o,c){var _=c[0],b=c[1],w=c[2],S=_*_+b*b+w*w;return S>0&&(S=1/Math.sqrt(S)),o[0]=c[0]*S,o[1]=c[1]*S,o[2]=c[2]*S,o},r.number=Jn,r.offscreenCanvasSupported=Dr,r.ortho=function(o,c,_,b,w,S,M){var O=1/(c-_),V=1/(b-w),H=1/(S-M);return o[0]=-2*O,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*V,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*H,o[11]=0,o[12]=(c+_)*O,o[13]=(w+b)*V,o[14]=(M+S)*H,o[15]=1,o},r.parseGlyphPBF=function(o){return new yv(o).readFields(wD,[])},r.pbf=yv,r.performSymbolLayout=function(o,c,_,b,w,S,M){o.createArrays(),o.tilePixelRatio=8192/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;var O=o.layers[0].layout,V=o.layers[0]._unevaluatedLayout._values,H={};if(o.textSizeData.kind==="composite"){var j=o.textSizeData,ae=j.maxZoom;H.compositeTextSizes=[V["text-size"].possiblyEvaluate(new oi(j.minZoom),M),V["text-size"].possiblyEvaluate(new oi(ae),M)]}if(o.iconSizeData.kind==="composite"){var he=o.iconSizeData,ye=he.maxZoom;H.compositeIconSizes=[V["icon-size"].possiblyEvaluate(new oi(he.minZoom),M),V["icon-size"].possiblyEvaluate(new oi(ye),M)]}H.layoutTextSize=V["text-size"].possiblyEvaluate(new oi(o.zoom+1),M),H.layoutIconSize=V["icon-size"].possiblyEvaluate(new oi(o.zoom+1),M),H.textMaxSize=V["text-size"].possiblyEvaluate(new oi(18));for(var Le=24*O.get("text-line-height"),Pe=O.get("text-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",qe=O.get("text-keep-upright"),Be=O.get("text-size"),et=function(){var lt=nt[it],pt=O.get("text-font").evaluate(lt,{},M).join(","),Mt=Be.evaluate(lt,{},M),Vt=H.layoutTextSize.evaluate(lt,{},M),ma=H.layoutIconSize.evaluate(lt,{},M),$t={horizontal:{},vertical:void 0},ba=lt.text,Qt=[0,0];if(ba){var Ya=ba.toString(),Ma=24*O.get("text-letter-spacing").evaluate(lt,{},M),la=(function(ui){for(var Qi=0,Zi=ui;Qi<Zi.length;Qi+=1)if(xi=Zi[Qi].charCodeAt(0),qt.Arabic(xi)||qt["Arabic Supplement"](xi)||qt["Arabic Extended-A"](xi)||qt["Arabic Presentation Forms-A"](xi)||qt["Arabic Presentation Forms-B"](xi))return!1;var xi;return!0})(Ya)?Ma:0,ti=O.get("text-anchor").evaluate(lt,{},M),za=O.get("text-variable-anchor");if(!za){var pi=O.get("text-radial-offset").evaluate(lt,{},M);Qt=pi?pM(ti,[24*pi,HI]):O.get("text-offset").evaluate(lt,{},M).map((function(ui){return 24*ui}))}var va=Pe?"center":O.get("text-justify").evaluate(lt,{},M),Ei=O.get("symbol-placement"),In=Ei==="point"?24*O.get("text-max-width").evaluate(lt,{},M):0,On=function(){o.allowVerticalPlacement&&hy(Ya)&&($t.vertical=xv(ba,c,_,w,pt,In,Le,ti,"left",la,Qt,Wo.vertical,!0,Ei,Vt,Mt))};if(!Pe&&za){for(var kn=va==="auto"?za.map((function(ui){return XI(ui)})):[va],Sn=!1,Fn=0;Fn<kn.length;Fn++){var vr=kn[Fn];if(!$t.horizontal[vr])if(Sn)$t.horizontal[vr]=$t.horizontal[0];else{var xr=xv(ba,c,_,w,pt,In,Le,"center",vr,la,Qt,Wo.horizontal,!1,Ei,Vt,Mt);xr&&($t.horizontal[vr]=xr,Sn=xr.positionedLines.length===1)}}On()}else{va==="auto"&&(va=XI(ti));var hs=xv(ba,c,_,w,pt,In,Le,ti,va,la,Qt,Wo.horizontal,!1,Ei,Vt,Mt);hs&&($t.horizontal[va]=hs),On(),hy(Ya)&&Pe&&qe&&($t.vertical=xv(ba,c,_,w,pt,In,Le,ti,va,la,Qt,Wo.vertical,!1,Ei,Vt,Mt))}}var kr=void 0,_s=!1;if(lt.icon&&lt.icon.name){var Xn=b[lt.icon.name];Xn&&(kr=(function(ui,Qi,Zi){var xi=zI(Zi),Ss=Qi[0]-ui.displaySize[0]*xi.horizontalAlign,as=Qi[1]-ui.displaySize[1]*xi.verticalAlign;return{image:ui,top:as,bottom:as+ui.displaySize[1],left:Ss,right:Ss+ui.displaySize[0]}})(w[lt.icon.name],O.get("icon-offset").evaluate(lt,{},M),O.get("icon-anchor").evaluate(lt,{},M)),_s=Xn.sdf,o.sdfIcons===void 0?o.sdfIcons=Xn.sdf:o.sdfIcons!==Xn.sdf&&de("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xn.pixelRatio!==o.pixelRatio||O.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}var Pr=bM($t.horizontal)||$t.vertical;o.iconsInText=!!Pr&&Pr.iconsInText,(Pr||kr)&&(function(ui,Qi,Zi,xi,Ss,as,gn,er,is,Mi,rc){var Oo=as.textMaxSize.evaluate(Qi,{});Oo===void 0&&(Oo=gn);var sc,qn=ui.layers[0].layout,oc=qn.get("icon-offset").evaluate(Qi,{},rc),Fl=bM(Zi.horizontal),jf=gn/24,im=ui.tilePixelRatio*jf,$f=ui.tilePixelRatio*Oo/24,dd=ui.tilePixelRatio*er,Jf=ui.tilePixelRatio*qn.get("symbol-spacing"),Rv=qn.get("text-padding")*ui.tilePixelRatio,Qf=qn.get("icon-padding")*ui.tilePixelRatio,Py=qn.get("text-max-angle")/180*Math.PI,kv=qn.get("text-rotation-alignment")==="map"&&qn.get("symbol-placement")!=="point",Pv=qn.get("icon-rotation-alignment")==="map"&&qn.get("symbol-placement")!=="point",hd=qn.get("symbol-placement"),Gy=Jf/2,eg=qn.get("icon-text-fit");xi&&eg!=="none"&&(ui.allowVerticalPlacement&&Zi.vertical&&(sc=oM(xi,Zi.vertical,eg,qn.get("icon-text-fit-padding"),oc,jf)),Fl&&(xi=oM(xi,Fl,eg,qn.get("icon-text-fit-padding"),oc,jf)));var Ah=function(XD,Zy){Zy.x<0||Zy.x>=8192||Zy.y<0||Zy.y>=8192||(function(Yn,cu,qD,Th,tS,OM,Bv,lc,Dv,zy,Vv,Zv,aS,FM,Uy,NM,BM,DM,VM,ZM,Fo,zv,zM,uc,YD){var UM,rm,rg,sg,og,lg=Yn.addToLineVertexArray(cu,qD),HM=0,XM=0,qM=0,YM=0,iS=-1,nS=-1,_d={},KM=Te(""),rS=0,sS=0;if(lc._unevaluatedLayout.getValue("text-radial-offset")===void 0?(rS=(UM=lc.layout.get("text-offset").evaluate(Fo,{},uc).map((function(Xy){return 24*Xy})))[0],sS=UM[1]):(rS=24*lc.layout.get("text-radial-offset").evaluate(Fo,{},uc),sS=HI),Yn.allowVerticalPlacement&&Th.vertical){var jM=lc.layout.get("text-rotate").evaluate(Fo,{},uc)+90;sg=new Av(Dv,cu,zy,Vv,Zv,Th.vertical,aS,FM,Uy,jM),Bv&&(og=new Av(Dv,cu,zy,Vv,Zv,Bv,BM,DM,Uy,jM))}if(tS){var oS=lc.layout.get("icon-rotate").evaluate(Fo,{}),$M=lc.layout.get("icon-text-fit")!=="none",JM=fM(tS,oS,zM,$M),lS=Bv?fM(Bv,oS,zM,$M):void 0;rg=new Av(Dv,cu,zy,Vv,Zv,tS,BM,DM,!1,oS),HM=4*JM.length;var QM=Yn.iconSizeData,Hy=null;QM.kind==="source"?(Hy=[128*lc.layout.get("icon-size").evaluate(Fo,{})])[0]>32640&&de(Yn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):QM.kind==="composite"&&((Hy=[128*zv.compositeIconSizes[0].evaluate(Fo,{},uc),128*zv.compositeIconSizes[1].evaluate(Fo,{},uc)])[0]>32640||Hy[1]>32640)&&de(Yn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Yn.addSymbols(Yn.icon,JM,Hy,ZM,VM,Fo,!1,cu,lg.lineStartIndex,lg.lineLength,-1,uc),iS=Yn.icon.placedSymbolArray.length-1,lS&&(XM=4*lS.length,Yn.addSymbols(Yn.icon,lS,Hy,ZM,VM,Fo,Wo.vertical,cu,lg.lineStartIndex,lg.lineLength,-1,uc),nS=Yn.icon.placedSymbolArray.length-1)}for(var e8 in Th.horizontal){var Uv=Th.horizontal[e8];if(!rm){KM=Te(Uv.text);var KD=lc.layout.get("text-rotate").evaluate(Fo,{},uc);rm=new Av(Dv,cu,zy,Vv,Zv,Uv,aS,FM,Uy,KD)}var t8=Uv.positionedLines.length===1;if(qM+=yM(Yn,cu,Uv,OM,lc,Uy,Fo,NM,lg,Th.vertical?Wo.horizontal:Wo.horizontalOnly,t8?Object.keys(Th.horizontal):[e8],_d,iS,zv,uc),t8)break}Th.vertical&&(YM+=yM(Yn,cu,Th.vertical,OM,lc,Uy,Fo,NM,lg,Wo.vertical,["vertical"],_d,nS,zv,uc));var jD=rm?rm.boxStartIndex:Yn.collisionBoxArray.length,$D=rm?rm.boxEndIndex:Yn.collisionBoxArray.length,JD=sg?sg.boxStartIndex:Yn.collisionBoxArray.length,QD=sg?sg.boxEndIndex:Yn.collisionBoxArray.length,eV=rg?rg.boxStartIndex:Yn.collisionBoxArray.length,tV=rg?rg.boxEndIndex:Yn.collisionBoxArray.length,aV=og?og.boxStartIndex:Yn.collisionBoxArray.length,iV=og?og.boxEndIndex:Yn.collisionBoxArray.length,cc=-1,Hv=function(Xy,i8){return Xy&&Xy.circleDiameter?Math.max(Xy.circleDiameter,i8):i8};cc=Hv(rm,cc),cc=Hv(sg,cc),cc=Hv(rg,cc);var a8=(cc=Hv(og,cc))>-1?1:0;a8&&(cc*=YD/24),Yn.glyphOffsetArray.length>=qi.MAX_GLYPHS&&de("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Fo.sortKey!==void 0&&Yn.addToSortKeyRanges(Yn.symbolInstances.length,Fo.sortKey),Yn.symbolInstances.emplaceBack(cu.x,cu.y,_d.right>=0?_d.right:-1,_d.center>=0?_d.center:-1,_d.left>=0?_d.left:-1,_d.vertical||-1,iS,nS,KM,jD,$D,JD,QD,eV,tV,aV,iV,zy,qM,YM,HM,XM,a8,0,aS,rS,sS,cc)})(ui,Zy,XD,Zi,xi,Ss,sc,ui.layers[0],ui.collisionBoxArray,Qi.index,Qi.sourceLayerIndex,ui.index,im,Rv,kv,is,dd,Qf,Pv,oc,Qi,as,Mi,rc,gn)};if(hd==="line")for(var tg=0,Gv=mM(Qi.geometry,0,0,8192,8192);tg<Gv.length;tg+=1)for(var Wv=Gv[tg],Wy=0,Oy=MD(Wv,Jf,Py,Zi.vertical||Fl,xi,24,$f,ui.overscaling,8192);Wy<Oy.length;Wy+=1){var Ov=Oy[Wy];Fl&&PD(ui,Fl.text,Gy,Ov)||Ah(Wv,Ov)}else if(hd==="line-center")for(var Fy=0,Ny=Qi.geometry;Fy<Ny.length;Fy+=1){var By=Ny[Fy];if(By.length>1){var Fv=ED(By,Py,Zi.vertical||Fl,xi,24,$f);Fv&&Ah(By,Fv)}}else if(Qi.type==="Polygon")for(var ag=0,Nv=NI(Qi.geometry,0);ag<Nv.length;ag+=1){var ig=Nv[ag],Dy=RD(ig,16);Ah(ig[0],new zf(Dy.x,Dy.y,0))}else if(Qi.type==="LineString")for(var nm=0,Vy=Qi.geometry;nm<Vy.length;nm+=1){var ng=Vy[nm];Ah(ng,new zf(ng[0].x,ng[0].y,0))}else if(Qi.type==="Point")for(var JI=0,GM=Qi.geometry;JI<GM.length;JI+=1)for(var QI=0,WM=GM[JI];QI<WM.length;QI+=1){var eS=WM[QI];Ah([eS],new zf(eS.x,eS.y,0))}})(o,lt,$t,kr,b,H,Vt,ma,Qt,_s,M)},it=0,nt=o.features;it<nt.length;it+=1)et();S&&o.generateCollisionDebugBuffers()},r.perspective=function(o,c,_,b,w){var S,M=1/Math.tan(c/2);return o[0]=M/_,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=M,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,w!=null&&w!==1/0?(o[10]=(w+b)*(S=1/(b-w)),o[14]=2*w*b*S):(o[10]=-1,o[14]=-2*b),o},r.pick=function(o,c){for(var _={},b=0;b<c.length;b++){var w=c[b];w in o&&(_[w]=o[w])}return _},r.plugin=ho,r.polygonIntersectsPolygon=ac,r.postMapLoadEvent=Xi,r.postTurnstileEvent=ua,r.potpack=iM,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=na,r.registerForPluginStateChange=function(o){return o({pluginStatus:Bs,pluginURL:ru}),my.on("pluginStateChange",o),o},r.renderColorRamp=NE,r.rotate=function(o,c,_){var b=c[0],w=c[1],S=c[2],M=c[3],O=Math.sin(_),V=Math.cos(_);return o[0]=b*V+S*O,o[1]=w*V+M*O,o[2]=b*-O+S*V,o[3]=w*-O+M*V,o},r.rotateX=function(o,c,_){var b=Math.sin(_),w=Math.cos(_),S=c[4],M=c[5],O=c[6],V=c[7],H=c[8],j=c[9],ae=c[10],he=c[11];return c!==o&&(o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15]),o[4]=S*w+H*b,o[5]=M*w+j*b,o[6]=O*w+ae*b,o[7]=V*w+he*b,o[8]=H*w-S*b,o[9]=j*w-M*b,o[10]=ae*w-O*b,o[11]=he*w-V*b,o},r.rotateZ=function(o,c,_){var b=Math.sin(_),w=Math.cos(_),S=c[0],M=c[1],O=c[2],V=c[3],H=c[4],j=c[5],ae=c[6],he=c[7];return c!==o&&(o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15]),o[0]=S*w+H*b,o[1]=M*w+j*b,o[2]=O*w+ae*b,o[3]=V*w+he*b,o[4]=H*w-S*b,o[5]=j*w-M*b,o[6]=ae*w-O*b,o[7]=he*w-V*b,o},r.scale=function(o,c,_){var b=_[0],w=_[1],S=_[2];return o[0]=c[0]*b,o[1]=c[1]*b,o[2]=c[2]*b,o[3]=c[3]*b,o[4]=c[4]*w,o[5]=c[5]*w,o[6]=c[6]*w,o[7]=c[7]*w,o[8]=c[8]*S,o[9]=c[9]*S,o[10]=c[10]*S,o[11]=c[11]*S,o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o},r.scale$1=function(o,c,_){return o[0]=c[0]*_,o[1]=c[1]*_,o[2]=c[2]*_,o[3]=c[3]*_,o},r.scale$2=function(o,c,_){return o[0]=c[0]*_,o[1]=c[1]*_,o[2]=c[2]*_,o},r.setCacheLimits=function(o,c){Ri=o,En=c},r.setRTLTextPlugin=function(o,c,_){if(_===void 0&&(_=!1),Bs==="deferred"||Bs==="loading"||Bs==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");ru=zt.resolveURL(o),Bs="deferred",Mf=c,H_(),_||sl()},r.sphericalToCartesian=function(o){var c=o[0],_=o[1],b=o[2];return _+=90,_*=Math.PI/180,b*=Math.PI/180,{x:c*Math.cos(_)*Math.sin(b),y:c*Math.sin(_)*Math.sin(b),z:c*Math.cos(b)}},r.sqrLen=function(o){var c=o[0],_=o[1];return c*c+_*_},r.styleSpec=pe,r.sub=function(o,c,_){return o[0]=c[0]-_[0],o[1]=c[1]-_[1],o[2]=c[2]-_[2],o},r.symbolSize=TD,r.transformMat3=function(o,c,_){var b=c[0],w=c[1],S=c[2];return o[0]=b*_[0]+w*_[3]+S*_[6],o[1]=b*_[1]+w*_[4]+S*_[7],o[2]=b*_[2]+w*_[5]+S*_[8],o},r.transformMat4=Wf,r.translate=function(o,c,_){var b,w,S,M,O,V,H,j,ae,he,ye,Le,Pe=_[0],qe=_[1],Be=_[2];return c===o?(o[12]=c[0]*Pe+c[4]*qe+c[8]*Be+c[12],o[13]=c[1]*Pe+c[5]*qe+c[9]*Be+c[13],o[14]=c[2]*Pe+c[6]*qe+c[10]*Be+c[14],o[15]=c[3]*Pe+c[7]*qe+c[11]*Be+c[15]):(w=c[1],S=c[2],M=c[3],O=c[4],V=c[5],H=c[6],j=c[7],ae=c[8],he=c[9],ye=c[10],Le=c[11],o[0]=b=c[0],o[1]=w,o[2]=S,o[3]=M,o[4]=O,o[5]=V,o[6]=H,o[7]=j,o[8]=ae,o[9]=he,o[10]=ye,o[11]=Le,o[12]=b*Pe+O*qe+ae*Be+c[12],o[13]=w*Pe+V*qe+he*Be+c[13],o[14]=S*Pe+H*qe+ye*Be+c[14],o[15]=M*Pe+j*qe+Le*Be+c[15]),o},r.triggerPluginCompletionEvent=dv,r.uniqueId=F,r.validateCustomStyleLayer=function(o){var c=[],_=o.id;return _===void 0&&c.push({message:"layers."+_+': missing required property "id"'}),o.render===void 0&&c.push({message:"layers."+_+': missing required method "render"'}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&c.push({message:"layers."+_+': property "renderingMode" must be either "2d" or "3d"'}),c},r.validateLight=MI,r.validateStyle=V_,r.values=function(o){var c=[];for(var _ in o)c.push(o[_]);return c},r.vectorTile=Bf,r.version="1.13.3",r.warnOnce=de,r.webpSupported=ga,r.window=y,r.wrap=E})),s(["./shared"],(function(r){function l(ee){var ue=typeof ee;if(ue==="number"||ue==="boolean"||ue==="string"||ee==null)return JSON.stringify(ee);if(Array.isArray(ee)){for(var ge="[",xe=0,Se=ee;xe<Se.length;xe+=1)ge+=l(Se[xe])+",";return ge+"]"}for(var Xe=Object.keys(ee).sort(),ze="{",pe=0;pe<Xe.length;pe++)ze+=JSON.stringify(Xe[pe])+":"+l(ee[Xe[pe]])+",";return ze+"}"}function u(ee){for(var ue="",ge=0,xe=r.refProperties;ge<xe.length;ge+=1)ue+="/"+l(ee[xe[ge]]);return ue}var d=function(ee){this.keyCache={},ee&&this.replace(ee)};d.prototype.replace=function(ee){this._layerConfigs={},this._layers={},this.update(ee,[])},d.prototype.update=function(ee,ue){for(var ge=this,xe=0,Se=ee;xe<Se.length;xe+=1){var Xe=Se[xe];this._layerConfigs[Xe.id]=Xe;var ze=this._layers[Xe.id]=r.createStyleLayer(Xe);ze._featureFilter=r.featureFilter(ze.filter),this.keyCache[Xe.id]&&delete this.keyCache[Xe.id]}for(var pe=0,Ae=ue;pe<Ae.length;pe+=1){var tt=Ae[pe];delete this.keyCache[tt],delete this._layerConfigs[tt],delete this._layers[tt]}this.familiesBySource={};for(var vt=0,At=(function(Ut,Xt){for(var Ot={},Me=0;Me<Ut.length;Me++){var yt=Xt&&Xt[Ut[Me].id]||u(Ut[Me]);Xt&&(Xt[Ut[Me].id]=yt);var Yt=Ot[yt];Yt||(Yt=Ot[yt]=[]),Yt.push(Ut[Me])}var fa=[];for(var Ba in Ot)fa.push(Ot[Ba]);return fa})(r.values(this._layerConfigs),this.keyCache);vt<At.length;vt+=1){var ct=At[vt].map((function(Ut){return ge._layers[Ut.id]})),wt=ct[0];if(wt.visibility!=="none"){var Jt=wt.source||"",aa=this.familiesBySource[Jt];aa||(aa=this.familiesBySource[Jt]={});var mt=wt.sourceLayer||"_geojsonTileLayer",jt=aa[mt];jt||(jt=aa[mt]=[]),jt.push(ct)}}};var h=function(ee){var ue={},ge=[];for(var xe in ee){var Se=ee[xe],Xe=ue[xe]={};for(var ze in Se){var pe=Se[+ze];if(pe&&pe.bitmap.width!==0&&pe.bitmap.height!==0){var Ae={x:0,y:0,w:pe.bitmap.width+2,h:pe.bitmap.height+2};ge.push(Ae),Xe[ze]={rect:Ae,metrics:pe.metrics}}}}var tt=r.potpack(ge),vt=new r.AlphaImage({width:tt.w||1,height:tt.h||1});for(var At in ee){var ct=ee[At];for(var wt in ct){var Jt=ct[+wt];if(Jt&&Jt.bitmap.width!==0&&Jt.bitmap.height!==0){var aa=ue[At][wt].rect;r.AlphaImage.copy(Jt.bitmap,vt,{x:0,y:0},{x:aa.x+1,y:aa.y+1},Jt.bitmap)}}}this.image=vt,this.positions=ue};r.register("GlyphAtlas",h);var g=function(ee){this.tileID=new r.OverscaledTileID(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId};function y(ee,ue,ge){for(var xe=new r.EvaluationParameters(ue),Se=0,Xe=ee;Se<Xe.length;Se+=1)Xe[Se].recalculate(xe,ge)}function x(ee,ue){var ge=r.getArrayBuffer(ee.request,(function(xe,Se,Xe,ze){xe?ue(xe):Se&&ue(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(Se)),rawData:Se,cacheControl:Xe,expires:ze})}));return function(){ge.cancel(),ue()}}g.prototype.parse=function(ee,ue,ge,xe,Se){var Xe=this;this.status="parsing",this.data=ee,this.collisionBoxArray=new r.CollisionBoxArray;var ze=new r.DictionaryCoder(Object.keys(ee.layers).sort()),pe=new r.FeatureIndex(this.tileID,this.promoteId);pe.bucketLayerIDs=[];var Ae,tt,vt,At,ct={},wt={featureIndex:pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ge},Jt=ue.familiesBySource[this.source];for(var aa in Jt){var mt=ee.layers[aa];if(mt){mt.version===1&&r.warnOnce('Vector tile source "'+this.source+'" layer "'+aa+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var jt=ze.encode(aa),Ut=[],Xt=0;Xt<mt.length;Xt++){var Ot=mt.feature(Xt),Me=pe.getId(Ot,aa);Ut.push({feature:Ot,id:Me,index:Xt,sourceLayerIndex:jt})}for(var yt=0,Yt=Jt[aa];yt<Yt.length;yt+=1){var fa=Yt[yt],Ba=fa[0];Ba.minzoom&&this.zoom<Math.floor(Ba.minzoom)||Ba.maxzoom&&this.zoom>=Ba.maxzoom||Ba.visibility!=="none"&&(y(fa,this.zoom,ge),(ct[Ba.id]=Ba.createBucket({index:pe.bucketLayerIDs.length,layers:fa,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:jt,sourceID:this.source})).populate(Ut,wt,this.tileID.canonical),pe.bucketLayerIDs.push(fa.map((function(ki){return ki.id}))))}}}var Aa=r.mapObject(wt.glyphDependencies,(function(ki){return Object.keys(ki).map(Number)}));Object.keys(Aa).length?xe.send("getGlyphs",{uid:this.uid,stacks:Aa},(function(ki,Ea){Ae||(Ae=ki,tt=Ea,an.call(Xe))})):tt={};var $i=Object.keys(wt.iconDependencies);$i.length?xe.send("getImages",{icons:$i,source:this.source,tileID:this.tileID,type:"icons"},(function(ki,Ea){Ae||(Ae=ki,vt=Ea,an.call(Xe))})):vt={};var si=Object.keys(wt.patternDependencies);function an(){if(Ae)return Se(Ae);if(tt&&vt&&At){var ki=new h(tt),Ea=new r.ImageAtlas(vt,At);for(var bi in ct){var Vr=ct[bi];Vr instanceof r.SymbolBucket?(y(Vr.layers,this.zoom,ge),r.performSymbolLayout(Vr,tt,ki.positions,vt,Ea.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Vr.hasPattern&&(Vr instanceof r.LineBucket||Vr instanceof r.FillBucket||Vr instanceof r.FillExtrusionBucket)&&(y(Vr.layers,this.zoom,ge),Vr.addFeatures(wt,this.tileID.canonical,Ea.patternPositions))}this.status="done",Se(null,{buckets:r.values(ct).filter((function(M_){return!M_.isEmpty()})),featureIndex:pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ki.image,imageAtlas:Ea,glyphMap:this.returnDependencies?tt:null,iconMap:this.returnDependencies?vt:null,glyphPositions:this.returnDependencies?ki.positions:null})}}si.length?xe.send("getImages",{icons:si,source:this.source,tileID:this.tileID,type:"patterns"},(function(ki,Ea){Ae||(Ae=ki,At=Ea,an.call(Xe))})):At={},an.call(this)};var C=function(ee,ue,ge,xe){this.actor=ee,this.layerIndex=ue,this.availableImages=ge,this.loadVectorData=xe||x,this.loading={},this.loaded={}};C.prototype.loadTile=function(ee,ue){var ge=this,xe=ee.uid;this.loading||(this.loading={});var Se=!!(ee&&ee.request&&ee.request.collectResourceTiming)&&new r.RequestPerformance(ee.request),Xe=this.loading[xe]=new g(ee);Xe.abort=this.loadVectorData(ee,(function(ze,pe){if(delete ge.loading[xe],ze||!pe)return Xe.status="done",ge.loaded[xe]=Xe,ue(ze);var Ae=pe.rawData,tt={};pe.expires&&(tt.expires=pe.expires),pe.cacheControl&&(tt.cacheControl=pe.cacheControl);var vt={};if(Se){var At=Se.finish();At&&(vt.resourceTiming=JSON.parse(JSON.stringify(At)))}Xe.vectorTile=pe.vectorTile,Xe.parse(pe.vectorTile,ge.layerIndex,ge.availableImages,ge.actor,(function(ct,wt){if(ct||!wt)return ue(ct);ue(null,r.extend({rawTileData:Ae.slice(0)},wt,tt,vt))})),ge.loaded=ge.loaded||{},ge.loaded[xe]=Xe}))},C.prototype.reloadTile=function(ee,ue){var ge=this,xe=this.loaded,Se=ee.uid,Xe=this;if(xe&&xe[Se]){var ze=xe[Se];ze.showCollisionBoxes=ee.showCollisionBoxes;var pe=function(Ae,tt){var vt=ze.reloadCallback;vt&&(delete ze.reloadCallback,ze.parse(ze.vectorTile,Xe.layerIndex,ge.availableImages,Xe.actor,vt)),ue(Ae,tt)};ze.status==="parsing"?ze.reloadCallback=pe:ze.status==="done"&&(ze.vectorTile?ze.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.actor,pe):pe())}},C.prototype.abortTile=function(ee,ue){var ge=this.loading,xe=ee.uid;ge&&ge[xe]&&ge[xe].abort&&(ge[xe].abort(),delete ge[xe]),ue()},C.prototype.removeTile=function(ee,ue){var ge=this.loaded,xe=ee.uid;ge&&ge[xe]&&delete ge[xe],ue()};var I=r.window.ImageBitmap,A=function(){this.loaded={}};function E(ee,ue){if(ee.length!==0){L(ee[0],ue);for(var ge=1;ge<ee.length;ge++)L(ee[ge],!ue)}}function L(ee,ue){for(var ge=0,xe=0,Se=0,Xe=ee.length,ze=Xe-1;Se<Xe;ze=Se++){var pe=(ee[Se][0]-ee[ze][0])*(ee[ze][1]+ee[Se][1]),Ae=ge+pe;xe+=Math.abs(ge)>=Math.abs(pe)?ge-Ae+pe:pe-Ae+ge,ge=Ae}ge+xe>=0!=!!ue&&ee.reverse()}A.prototype.loadTile=function(ee,ue){var ge=ee.uid,xe=ee.encoding,Se=ee.rawImageData,Xe=I&&Se instanceof I?this.getImageData(Se):Se,ze=new r.DEMData(ge,Xe,xe);this.loaded=this.loaded||{},this.loaded[ge]=ze,ue(null,ze)},A.prototype.getImageData=function(ee){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ee.width,ee.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ee.width,this.offscreenCanvas.height=ee.height,this.offscreenCanvasContext.drawImage(ee,0,0,ee.width,ee.height);var ue=this.offscreenCanvasContext.getImageData(-1,-1,ee.width+2,ee.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:ue.width,height:ue.height},ue.data)},A.prototype.removeTile=function(ee){var ue=this.loaded,ge=ee.uid;ue&&ue[ge]&&delete ue[ge]};var G=r.vectorTile.VectorTileFeature.prototype.toGeoJSON,F=function(ee){this._feature=ee,this.extent=r.EXTENT,this.type=ee.type,this.properties=ee.tags,"id"in ee&&!isNaN(ee.id)&&(this.id=parseInt(ee.id,10))};F.prototype.loadGeometry=function(){if(this._feature.type===1){for(var ee=[],ue=0,ge=this._feature.geometry;ue<ge.length;ue+=1){var xe=ge[ue];ee.push([new r.Point$1(xe[0],xe[1])])}return ee}for(var Se=[],Xe=0,ze=this._feature.geometry;Xe<ze.length;Xe+=1){for(var pe=[],Ae=0,tt=ze[Xe];Ae<tt.length;Ae+=1){var vt=tt[Ae];pe.push(new r.Point$1(vt[0],vt[1]))}Se.push(pe)}return Se},F.prototype.toGeoJSON=function(ee,ue,ge){return G.call(this,ee,ue,ge)};var B=function(ee){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=ee.length,this._features=ee};B.prototype.feature=function(ee){return new F(this._features[ee])};var Z=r.vectorTile.VectorTileFeature,Y=$;function $(ee,ue){this.options=ue||{},this.features=ee,this.length=ee.length}function te(ee,ue){this.id=typeof ee.id=="number"?ee.id:void 0,this.type=ee.type,this.rawGeometry=ee.type===1?[ee.geometry]:ee.geometry,this.properties=ee.tags,this.extent=ue||4096}$.prototype.feature=function(ee){return new te(this.features[ee],this.options.extent)},te.prototype.loadGeometry=function(){var ee=this.rawGeometry;this.geometry=[];for(var ue=0;ue<ee.length;ue++){for(var ge=ee[ue],xe=[],Se=0;Se<ge.length;Se++)xe.push(new r.Point$1(ge[Se][0],ge[Se][1]));this.geometry.push(xe)}return this.geometry},te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ee=this.geometry,ue=1/0,ge=-1/0,xe=1/0,Se=-1/0,Xe=0;Xe<ee.length;Xe++)for(var ze=ee[Xe],pe=0;pe<ze.length;pe++){var Ae=ze[pe];ue=Math.min(ue,Ae.x),ge=Math.max(ge,Ae.x),xe=Math.min(xe,Ae.y),Se=Math.max(Se,Ae.y)}return[ue,xe,ge,Se]},te.prototype.toGeoJSON=Z.prototype.toGeoJSON;var ce=X,me=Y;function X(ee){var ue=new r.pbf;return(function(ge,xe){for(var Se in ge.layers)xe.writeMessage(3,de,ge.layers[Se])})(ee,ue),ue.finish()}function de(ee,ue){var ge;ue.writeVarintField(15,ee.version||1),ue.writeStringField(1,ee.name||""),ue.writeVarintField(5,ee.extent||4096);var xe={keys:[],values:[],keycache:{},valuecache:{}};for(ge=0;ge<ee.length;ge++)xe.feature=ee.feature(ge),ue.writeMessage(2,N,xe);var Se=xe.keys;for(ge=0;ge<Se.length;ge++)ue.writeStringField(3,Se[ge]);var Xe=xe.values;for(ge=0;ge<Xe.length;ge++)ue.writeMessage(4,Ie,Xe[ge])}function N(ee,ue){var ge=ee.feature;ge.id!==void 0&&ue.writeVarintField(1,ge.id),ue.writeMessage(2,ne,ee),ue.writeVarintField(3,ge.type),ue.writeMessage(4,ke,ge)}function ne(ee,ue){var ge=ee.feature,xe=ee.keys,Se=ee.values,Xe=ee.keycache,ze=ee.valuecache;for(var pe in ge.properties){var Ae=Xe[pe];Ae===void 0&&(xe.push(pe),Xe[pe]=Ae=xe.length-1),ue.writeVarint(Ae);var tt=ge.properties[pe],vt=typeof tt;vt!=="string"&&vt!=="boolean"&&vt!=="number"&&(tt=JSON.stringify(tt));var At=vt+":"+tt,ct=ze[At];ct===void 0&&(Se.push(tt),ze[At]=ct=Se.length-1),ue.writeVarint(ct)}}function le(ee,ue){return(ue<<3)+(7&ee)}function _e(ee){return ee<<1^ee>>31}function ke(ee,ue){for(var ge=ee.loadGeometry(),xe=ee.type,Se=0,Xe=0,ze=ge.length,pe=0;pe<ze;pe++){var Ae=ge[pe],tt=1;xe===1&&(tt=Ae.length),ue.writeVarint(le(1,tt));for(var vt=xe===3?Ae.length-1:Ae.length,At=0;At<vt;At++){At===1&&xe!==1&&ue.writeVarint(le(2,vt-1));var ct=Ae[At].x-Se,wt=Ae[At].y-Xe;ue.writeVarint(_e(ct)),ue.writeVarint(_e(wt)),Se+=ct,Xe+=wt}xe===3&&ue.writeVarint(le(7,1))}}function Ie(ee,ue){var ge=typeof ee;ge==="string"?ue.writeStringField(1,ee):ge==="boolean"?ue.writeBooleanField(7,ee):ge==="number"&&(ee%1!=0?ue.writeDoubleField(3,ee):ee<0?ue.writeSVarintField(6,ee):ue.writeVarintField(5,ee))}function re(ee,ue,ge,xe){Q(ee,ge,xe),Q(ue,2*ge,2*xe),Q(ue,2*ge+1,2*xe+1)}function Q(ee,ue,ge){var xe=ee[ue];ee[ue]=ee[ge],ee[ge]=xe}function J(ee,ue,ge,xe){var Se=ee-ge,Xe=ue-xe;return Se*Se+Xe*Xe}ce.fromVectorTileJs=X,ce.fromGeojsonVt=function(ee,ue){ue=ue||{};var ge={};for(var xe in ee)ge[xe]=new Y(ee[xe].features,ue),ge[xe].name=xe,ge[xe].version=ue.version,ge[xe].extent=ue.extent;return X({layers:ge})},ce.GeoJSONWrapper=me;var je=function(ee){return ee[0]},Qe=function(ee){return ee[1]},Je=function(ee,ue,ge,xe,Se){ue===void 0&&(ue=je),ge===void 0&&(ge=Qe),xe===void 0&&(xe=64),Se===void 0&&(Se=Float64Array),this.nodeSize=xe,this.points=ee;for(var Xe=ee.length<65536?Uint16Array:Uint32Array,ze=this.ids=new Xe(ee.length),pe=this.coords=new Se(2*ee.length),Ae=0;Ae<ee.length;Ae++)ze[Ae]=Ae,pe[2*Ae]=ue(ee[Ae]),pe[2*Ae+1]=ge(ee[Ae]);(function tt(vt,At,ct,wt,Jt,aa){if(!(Jt-wt<=ct)){var mt=wt+Jt>>1;(function jt(Ut,Xt,Ot,Me,yt,Yt){for(;yt>Me;){if(yt-Me>600){var fa=yt-Me+1,Ba=Ot-Me+1,Aa=Math.log(fa),$i=.5*Math.exp(2*Aa/3),si=.5*Math.sqrt(Aa*$i*(fa-$i)/fa)*(Ba-fa/2<0?-1:1);jt(Ut,Xt,Ot,Math.max(Me,Math.floor(Ot-Ba*$i/fa+si)),Math.min(yt,Math.floor(Ot+(fa-Ba)*$i/fa+si)),Yt)}var an=Xt[2*Ot+Yt],ki=Me,Ea=yt;for(re(Ut,Xt,Me,Ot),Xt[2*yt+Yt]>an&&re(Ut,Xt,Me,yt);ki<Ea;){for(re(Ut,Xt,ki,Ea),ki++,Ea--;Xt[2*ki+Yt]<an;)ki++;for(;Xt[2*Ea+Yt]>an;)Ea--}Xt[2*Me+Yt]===an?re(Ut,Xt,Me,Ea):re(Ut,Xt,++Ea,yt),Ea<=Ot&&(Me=Ea+1),Ot<=Ea&&(yt=Ea-1)}})(vt,At,mt,wt,Jt,aa%2),tt(vt,At,ct,wt,mt-1,aa+1),tt(vt,At,ct,mt+1,Jt,aa+1)}})(ze,pe,xe,0,ze.length-1,0)};Je.prototype.range=function(ee,ue,ge,xe){return(function(Se,Xe,ze,pe,Ae,tt,vt){for(var At,ct,wt=[0,Se.length-1,0],Jt=[];wt.length;){var aa=wt.pop(),mt=wt.pop(),jt=wt.pop();if(mt-jt<=vt)for(var Ut=jt;Ut<=mt;Ut++)ct=Xe[2*Ut+1],(At=Xe[2*Ut])>=ze&&At<=Ae&&ct>=pe&&ct<=tt&&Jt.push(Se[Ut]);else{var Xt=Math.floor((jt+mt)/2);ct=Xe[2*Xt+1],(At=Xe[2*Xt])>=ze&&At<=Ae&&ct>=pe&&ct<=tt&&Jt.push(Se[Xt]);var Ot=(aa+1)%2;(aa===0?ze<=At:pe<=ct)&&(wt.push(jt),wt.push(Xt-1),wt.push(Ot)),(aa===0?Ae>=At:tt>=ct)&&(wt.push(Xt+1),wt.push(mt),wt.push(Ot))}}return Jt})(this.ids,this.coords,ee,ue,ge,xe,this.nodeSize)},Je.prototype.within=function(ee,ue,ge){return(function(xe,Se,Xe,ze,pe,Ae){for(var tt=[0,xe.length-1,0],vt=[],At=pe*pe;tt.length;){var ct=tt.pop(),wt=tt.pop(),Jt=tt.pop();if(wt-Jt<=Ae)for(var aa=Jt;aa<=wt;aa++)J(Se[2*aa],Se[2*aa+1],Xe,ze)<=At&&vt.push(xe[aa]);else{var mt=Math.floor((Jt+wt)/2),jt=Se[2*mt],Ut=Se[2*mt+1];J(jt,Ut,Xe,ze)<=At&&vt.push(xe[mt]);var Xt=(ct+1)%2;(ct===0?Xe-pe<=jt:ze-pe<=Ut)&&(tt.push(Jt),tt.push(mt-1),tt.push(Xt)),(ct===0?Xe+pe>=jt:ze+pe>=Ut)&&(tt.push(mt+1),tt.push(wt),tt.push(Xt))}}return vt})(this.ids,this.coords,ee,ue,ge,this.nodeSize)};var kt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ee){return ee}},Pt=function(ee){this.options=z(Object.create(kt),ee),this.trees=new Array(this.options.maxZoom+1)};function zt(ee,ue,ge,xe,Se){return{x:ee,y:ue,zoom:1/0,id:ge,parentId:-1,numPoints:xe,properties:Se}}function Nt(ee,ue){var ge=ee.geometry.coordinates,xe=ge[1];return{x:Fe(ge[0]),y:De(xe),zoom:1/0,index:ue,parentId:-1}}function ga(ee){return{type:"Feature",id:ee.id,properties:ta(ee),geometry:{type:"Point",coordinates:[(xe=ee.x,360*(xe-.5)),(ue=ee.y,ge=(180-360*ue)*Math.PI/180,360*Math.atan(Math.exp(ge))/Math.PI-90)]}};var ue,ge,xe}function ta(ee){var ue=ee.numPoints,ge=ue>=1e4?Math.round(ue/1e3)+"k":ue>=1e3?Math.round(ue/100)/10+"k":ue;return z(z({},ee.properties),{cluster:!0,cluster_id:ee.id,point_count:ue,point_count_abbreviated:ge})}function Fe(ee){return ee/360+.5}function De(ee){var ue=Math.sin(ee*Math.PI/180),ge=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return ge<0?0:ge>1?1:ge}function z(ee,ue){for(var ge in ue)ee[ge]=ue[ge];return ee}function Ze(ee){return ee.x}function Re(ee){return ee.y}function fe(ee,ue,ge,xe,Se,Xe){var ze=Se-ge,pe=Xe-xe;if(ze!==0||pe!==0){var Ae=((ee-ge)*ze+(ue-xe)*pe)/(ze*ze+pe*pe);Ae>1?(ge=Se,xe=Xe):Ae>0&&(ge+=ze*Ae,xe+=pe*Ae)}return(ze=ee-ge)*ze+(pe=ue-xe)*pe}function ie(ee,ue,ge,xe){var Se={id:ee===void 0?null:ee,type:ue,geometry:ge,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return(function(Xe){var ze=Xe.geometry,pe=Xe.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")Ce(Xe,ze);else if(pe==="Polygon"||pe==="MultiLineString")for(var Ae=0;Ae<ze.length;Ae++)Ce(Xe,ze[Ae]);else if(pe==="MultiPolygon")for(Ae=0;Ae<ze.length;Ae++)for(var tt=0;tt<ze[Ae].length;tt++)Ce(Xe,ze[Ae][tt])})(Se),Se}function Ce(ee,ue){for(var ge=0;ge<ue.length;ge+=3)ee.minX=Math.min(ee.minX,ue[ge]),ee.minY=Math.min(ee.minY,ue[ge+1]),ee.maxX=Math.max(ee.maxX,ue[ge]),ee.maxY=Math.max(ee.maxY,ue[ge+1])}function Ee(ee,ue,ge,xe){if(ue.geometry){var Se=ue.geometry.coordinates,Xe=ue.geometry.type,ze=Math.pow(ge.tolerance/((1<<ge.maxZoom)*ge.extent),2),pe=[],Ae=ue.id;if(ge.promoteId?Ae=ue.properties[ge.promoteId]:ge.generateId&&(Ae=xe||0),Xe==="Point")Ne(Se,pe);else if(Xe==="MultiPoint")for(var tt=0;tt<Se.length;tt++)Ne(Se[tt],pe);else if(Xe==="LineString")Ve(Se,pe,ze,!1);else if(Xe==="MultiLineString"){if(ge.lineMetrics){for(tt=0;tt<Se.length;tt++)Ve(Se[tt],pe=[],ze,!1),ee.push(ie(Ae,"LineString",pe,ue.properties));return}$e(Se,pe,ze,!1)}else if(Xe==="Polygon")$e(Se,pe,ze,!0);else{if(Xe!=="MultiPolygon"){if(Xe==="GeometryCollection"){for(tt=0;tt<ue.geometry.geometries.length;tt++)Ee(ee,{id:Ae,geometry:ue.geometry.geometries[tt],properties:ue.properties},ge,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(tt=0;tt<Se.length;tt++){var vt=[];$e(Se[tt],vt,ze,!0),pe.push(vt)}}ee.push(ie(Ae,Xe,pe,ue.properties))}}function Ne(ee,ue){ue.push(ht(ee[0])),ue.push(_t(ee[1])),ue.push(0)}function Ve(ee,ue,ge,xe){for(var Se,Xe,ze=0,pe=0;pe<ee.length;pe++){var Ae=ht(ee[pe][0]),tt=_t(ee[pe][1]);ue.push(Ae),ue.push(tt),ue.push(0),pe>0&&(ze+=xe?(Se*tt-Ae*Xe)/2:Math.sqrt(Math.pow(Ae-Se,2)+Math.pow(tt-Xe,2))),Se=Ae,Xe=tt}var vt=ue.length-3;ue[2]=1,(function At(ct,wt,Jt,aa){for(var mt,jt=aa,Ut=Jt-wt>>1,Xt=Jt-wt,Ot=ct[wt],Me=ct[wt+1],yt=ct[Jt],Yt=ct[Jt+1],fa=wt+3;fa<Jt;fa+=3){var Ba=fe(ct[fa],ct[fa+1],Ot,Me,yt,Yt);if(Ba>jt)mt=fa,jt=Ba;else if(Ba===jt){var Aa=Math.abs(fa-Ut);Aa<Xt&&(mt=fa,Xt=Aa)}}jt>aa&&(mt-wt>3&&At(ct,wt,mt,aa),ct[mt+2]=jt,Jt-mt>3&&At(ct,mt,Jt,aa))})(ue,0,vt,ge),ue[vt+2]=1,ue.size=Math.abs(ze),ue.start=0,ue.end=ue.size}function $e(ee,ue,ge,xe){for(var Se=0;Se<ee.length;Se++){var Xe=[];Ve(ee[Se],Xe,ge,xe),ue.push(Xe)}}function ht(ee){return ee/360+.5}function _t(ee){var ue=Math.sin(ee*Math.PI/180),ge=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return ge<0?0:ge>1?1:ge}function Et(ee,ue,ge,xe,Se,Xe,ze,pe){if(xe/=ue,Xe>=(ge/=ue)&&ze<xe)return ee;if(ze<ge||Xe>=xe)return null;for(var Ae=[],tt=0;tt<ee.length;tt++){var vt=ee[tt],At=vt.geometry,ct=vt.type,wt=Se===0?vt.minX:vt.minY,Jt=Se===0?vt.maxX:vt.maxY;if(wt>=ge&&Jt<xe)Ae.push(vt);else if(!(Jt<ge||wt>=xe)){var aa=[];if(ct==="Point"||ct==="MultiPoint")ca(At,aa,ge,xe,Se);else if(ct==="LineString")ua(At,aa,ge,xe,Se,!1,pe.lineMetrics);else if(ct==="MultiLineString")Xi(At,aa,ge,xe,Se,!1);else if(ct==="Polygon")Xi(At,aa,ge,xe,Se,!0);else if(ct==="MultiPolygon")for(var mt=0;mt<At.length;mt++){var jt=[];Xi(At[mt],jt,ge,xe,Se,!0),jt.length&&aa.push(jt)}if(aa.length){if(pe.lineMetrics&&ct==="LineString"){for(mt=0;mt<aa.length;mt++)Ae.push(ie(vt.id,ct,aa[mt],vt.tags));continue}ct!=="LineString"&&ct!=="MultiLineString"||(aa.length===1?(ct="LineString",aa=aa[0]):ct="MultiLineString"),ct!=="Point"&&ct!=="MultiPoint"||(ct=aa.length===3?"Point":"MultiPoint"),Ae.push(ie(vt.id,ct,aa,vt.tags))}}}return Ae.length?Ae:null}function ca(ee,ue,ge,xe,Se){for(var Xe=0;Xe<ee.length;Xe+=3){var ze=ee[Xe+Se];ze>=ge&&ze<=xe&&(ue.push(ee[Xe]),ue.push(ee[Xe+1]),ue.push(ee[Xe+2]))}}function ua(ee,ue,ge,xe,Se,Xe,ze){for(var pe,Ae,tt=yi(ee),vt=Se===0?En:_i,At=ee.start,ct=0;ct<ee.length-3;ct+=3){var wt=ee[ct],Jt=ee[ct+1],aa=ee[ct+2],mt=ee[ct+3],jt=ee[ct+4],Ut=Se===0?wt:Jt,Xt=Se===0?mt:jt,Ot=!1;ze&&(pe=Math.sqrt(Math.pow(wt-mt,2)+Math.pow(Jt-jt,2))),Ut<ge?Xt>ge&&(Ae=vt(tt,wt,Jt,mt,jt,ge),ze&&(tt.start=At+pe*Ae)):Ut>xe?Xt<xe&&(Ae=vt(tt,wt,Jt,mt,jt,xe),ze&&(tt.start=At+pe*Ae)):Ri(tt,wt,Jt,aa),Xt<ge&&Ut>=ge&&(Ae=vt(tt,wt,Jt,mt,jt,ge),Ot=!0),Xt>xe&&Ut<=xe&&(Ae=vt(tt,wt,Jt,mt,jt,xe),Ot=!0),!Xe&&Ot&&(ze&&(tt.end=At+pe*Ae),ue.push(tt),tt=yi(ee)),ze&&(At+=pe)}var Me=ee.length-3;wt=ee[Me],Jt=ee[Me+1],aa=ee[Me+2],(Ut=Se===0?wt:Jt)>=ge&&Ut<=xe&&Ri(tt,wt,Jt,aa),Me=tt.length-3,Xe&&Me>=3&&(tt[Me]!==tt[0]||tt[Me+1]!==tt[1])&&Ri(tt,tt[0],tt[1],tt[2]),tt.length&&ue.push(tt)}function yi(ee){var ue=[];return ue.size=ee.size,ue.start=ee.start,ue.end=ee.end,ue}function Xi(ee,ue,ge,xe,Se,Xe){for(var ze=0;ze<ee.length;ze++)ua(ee[ze],ue,ge,xe,Se,Xe,!1)}function Ri(ee,ue,ge,xe){ee.push(ue),ee.push(ge),ee.push(xe)}function En(ee,ue,ge,xe,Se,Xe){var ze=(Xe-ue)/(xe-ue);return ee.push(Xe),ee.push(ge+(Se-ge)*ze),ee.push(1),ze}function _i(ee,ue,ge,xe,Se,Xe){var ze=(Xe-ge)/(Se-ge);return ee.push(ue+(xe-ue)*ze),ee.push(Xe),ee.push(1),ze}function nr(ee,ue){for(var ge=[],xe=0;xe<ee.length;xe++){var Se,Xe=ee[xe],ze=Xe.type;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")Se=Ci(Xe.geometry,ue);else if(ze==="MultiLineString"||ze==="Polygon"){Se=[];for(var pe=0;pe<Xe.geometry.length;pe++)Se.push(Ci(Xe.geometry[pe],ue))}else if(ze==="MultiPolygon")for(Se=[],pe=0;pe<Xe.geometry.length;pe++){for(var Ae=[],tt=0;tt<Xe.geometry[pe].length;tt++)Ae.push(Ci(Xe.geometry[pe][tt],ue));Se.push(Ae)}ge.push(ie(Xe.id,ze,Se,Xe.tags))}return ge}function Ci(ee,ue){var ge=[];ge.size=ee.size,ee.start!==void 0&&(ge.start=ee.start,ge.end=ee.end);for(var xe=0;xe<ee.length;xe+=3)ge.push(ee[xe]+ue,ee[xe+1],ee[xe+2]);return ge}function Ti(ee,ue){if(ee.transformed)return ee;var ge,xe,Se,Xe=1<<ee.z,ze=ee.x,pe=ee.y;for(ge=0;ge<ee.features.length;ge++){var Ae=ee.features[ge],tt=Ae.geometry,vt=Ae.type;if(Ae.geometry=[],vt===1)for(xe=0;xe<tt.length;xe+=2)Ae.geometry.push(Dr(tt[xe],tt[xe+1],ue,Xe,ze,pe));else for(xe=0;xe<tt.length;xe++){var At=[];for(Se=0;Se<tt[xe].length;Se+=2)At.push(Dr(tt[xe][Se],tt[xe][Se+1],ue,Xe,ze,pe));Ae.geometry.push(At)}}return ee.transformed=!0,ee}function Dr(ee,ue,ge,xe,Se,Xe){return[Math.round(ge*(ee*xe-Se)),Math.round(ge*(ue*xe-Xe))]}function vs(ee,ue,ge,xe,Se){for(var Xe=ue===Se.maxZoom?0:Se.tolerance/((1<<ue)*Se.extent),ze={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ge,y:xe,z:ue,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pe=0;pe<ee.length;pe++){ze.numFeatures++,To(ze,ee[pe],Xe,Se);var Ae=ee[pe].minX,tt=ee[pe].minY,vt=ee[pe].maxX,At=ee[pe].maxY;Ae<ze.minX&&(ze.minX=Ae),tt<ze.minY&&(ze.minY=tt),vt>ze.maxX&&(ze.maxX=vt),At>ze.maxY&&(ze.maxY=At)}return ze}function To(ee,ue,ge,xe){var Se=ue.geometry,Xe=ue.type,ze=[];if(Xe==="Point"||Xe==="MultiPoint")for(var pe=0;pe<Se.length;pe+=3)ze.push(Se[pe]),ze.push(Se[pe+1]),ee.numPoints++,ee.numSimplified++;else if(Xe==="LineString")gr(ze,Se,ee,ge,!1,!1);else if(Xe==="MultiLineString"||Xe==="Polygon")for(pe=0;pe<Se.length;pe++)gr(ze,Se[pe],ee,ge,Xe==="Polygon",pe===0);else if(Xe==="MultiPolygon")for(var Ae=0;Ae<Se.length;Ae++){var tt=Se[Ae];for(pe=0;pe<tt.length;pe++)gr(ze,tt[pe],ee,ge,!0,pe===0)}if(ze.length){var vt=ue.tags||null;if(Xe==="LineString"&&xe.lineMetrics){for(var At in vt={},ue.tags)vt[At]=ue.tags[At];vt.mapbox_clip_start=Se.start/Se.size,vt.mapbox_clip_end=Se.end/Se.size}var ct={geometry:ze,type:Xe==="Polygon"||Xe==="MultiPolygon"?3:Xe==="LineString"||Xe==="MultiLineString"?2:1,tags:vt};ue.id!==null&&(ct.id=ue.id),ee.features.push(ct)}}function gr(ee,ue,ge,xe,Se,Xe){var ze=xe*xe;if(xe>0&&ue.size<(Se?ze:xe))ge.numPoints+=ue.length/3;else{for(var pe=[],Ae=0;Ae<ue.length;Ae+=3)(xe===0||ue[Ae+2]>ze)&&(ge.numSimplified++,pe.push(ue[Ae]),pe.push(ue[Ae+1])),ge.numPoints++;Se&&(function(tt,vt){for(var At=0,ct=0,wt=tt.length,Jt=wt-2;ct<wt;Jt=ct,ct+=2)At+=(tt[ct]-tt[Jt])*(tt[ct+1]+tt[Jt+1]);if(At>0===vt)for(ct=0,wt=tt.length;ct<wt/2;ct+=2){var aa=tt[ct],mt=tt[ct+1];tt[ct]=tt[wt-2-ct],tt[ct+1]=tt[wt-1-ct],tt[wt-2-ct]=aa,tt[wt-1-ct]=mt}})(pe,Xe),ee.push(pe)}}function Zn(ee,ue){var ge=(ue=this.options=(function(Se,Xe){for(var ze in Xe)Se[ze]=Xe[ze];return Se})(Object.create(this.options),ue)).debug;if(ge&&console.time("preprocess data"),ue.maxZoom<0||ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ue.promoteId&&ue.generateId)throw new Error("promoteId and generateId cannot be used together.");var xe=(function(Se,Xe){var ze=[];if(Se.type==="FeatureCollection")for(var pe=0;pe<Se.features.length;pe++)Ee(ze,Se.features[pe],Xe,pe);else Ee(ze,Se.type==="Feature"?Se:{geometry:Se},Xe);return ze})(ee,ue);this.tiles={},this.tileCoords=[],ge&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ue.indexMaxZoom,ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(xe=(function(Se,Xe){var ze=Xe.buffer/Xe.extent,pe=Se,Ae=Et(Se,1,-1-ze,ze,0,-1,2,Xe),tt=Et(Se,1,1-ze,2+ze,0,-1,2,Xe);return(Ae||tt)&&(pe=Et(Se,1,-ze,1+ze,0,-1,2,Xe)||[],Ae&&(pe=nr(Ae,1).concat(pe)),tt&&(pe=pe.concat(nr(tt,-1)))),pe})(xe,ue)).length&&this.splitTile(xe,0,0,0),ge&&(xe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function zn(ee,ue,ge){return 32*((1<<ee)*ge+ue)+ee}function pr(ee,ue){var ge=ee.tileID.canonical;if(!this._geoJSONIndex)return ue(null,null);var xe=this._geoJSONIndex.getTile(ge.z,ge.x,ge.y);if(!xe)return ue(null,null);var Se=new B(xe.features),Xe=ce(Se);Xe.byteOffset===0&&Xe.byteLength===Xe.buffer.byteLength||(Xe=new Uint8Array(Xe)),ue(null,{vectorTile:Se,rawData:Xe.buffer})}Pt.prototype.load=function(ee){var ue=this.options,ge=ue.log,xe=ue.minZoom,Se=ue.maxZoom,Xe=ue.nodeSize;ge&&console.time("total time");var ze="prepare "+ee.length+" points";ge&&console.time(ze),this.points=ee;for(var pe=[],Ae=0;Ae<ee.length;Ae++)ee[Ae].geometry&&pe.push(Nt(ee[Ae],Ae));this.trees[Se+1]=new Je(pe,Ze,Re,Xe,Float32Array),ge&&console.timeEnd(ze);for(var tt=Se;tt>=xe;tt--){var vt=+Date.now();pe=this._cluster(pe,tt),this.trees[tt]=new Je(pe,Ze,Re,Xe,Float32Array),ge&&console.log("z%d: %d clusters in %dms",tt,pe.length,+Date.now()-vt)}return ge&&console.timeEnd("total time"),this},Pt.prototype.getClusters=function(ee,ue){var ge=((ee[0]+180)%360+360)%360-180,xe=Math.max(-90,Math.min(90,ee[1])),Se=ee[2]===180?180:((ee[2]+180)%360+360)%360-180,Xe=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)ge=-180,Se=180;else if(ge>Se){var ze=this.getClusters([ge,xe,180,Xe],ue),pe=this.getClusters([-180,xe,Se,Xe],ue);return ze.concat(pe)}for(var Ae=this.trees[this._limitZoom(ue)],tt=[],vt=0,At=Ae.range(Fe(ge),De(Xe),Fe(Se),De(xe));vt<At.length;vt+=1){var ct=Ae.points[At[vt]];tt.push(ct.numPoints?ga(ct):this.points[ct.index])}return tt},Pt.prototype.getChildren=function(ee){var ue=this._getOriginId(ee),ge=this._getOriginZoom(ee),xe="No cluster with the specified id.",Se=this.trees[ge];if(!Se)throw new Error(xe);var Xe=Se.points[ue];if(!Xe)throw new Error(xe);for(var ze=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),pe=[],Ae=0,tt=Se.within(Xe.x,Xe.y,ze);Ae<tt.length;Ae+=1){var vt=Se.points[tt[Ae]];vt.parentId===ee&&pe.push(vt.numPoints?ga(vt):this.points[vt.index])}if(pe.length===0)throw new Error(xe);return pe},Pt.prototype.getLeaves=function(ee,ue,ge){var xe=[];return this._appendLeaves(xe,ee,ue=ue||10,ge=ge||0,0),xe},Pt.prototype.getTile=function(ee,ue,ge){var xe=this.trees[this._limitZoom(ee)],Se=Math.pow(2,ee),Xe=this.options,ze=Xe.radius/Xe.extent,pe=(ge-ze)/Se,Ae=(ge+1+ze)/Se,tt={features:[]};return this._addTileFeatures(xe.range((ue-ze)/Se,pe,(ue+1+ze)/Se,Ae),xe.points,ue,ge,Se,tt),ue===0&&this._addTileFeatures(xe.range(1-ze/Se,pe,1,Ae),xe.points,Se,ge,Se,tt),ue===Se-1&&this._addTileFeatures(xe.range(0,pe,ze/Se,Ae),xe.points,-1,ge,Se,tt),tt.features.length?tt:null},Pt.prototype.getClusterExpansionZoom=function(ee){for(var ue=this._getOriginZoom(ee)-1;ue<=this.options.maxZoom;){var ge=this.getChildren(ee);if(ue++,ge.length!==1)break;ee=ge[0].properties.cluster_id}return ue},Pt.prototype._appendLeaves=function(ee,ue,ge,xe,Se){for(var Xe=0,ze=this.getChildren(ue);Xe<ze.length;Xe+=1){var pe=ze[Xe],Ae=pe.properties;if(Ae&&Ae.cluster?Se+Ae.point_count<=xe?Se+=Ae.point_count:Se=this._appendLeaves(ee,Ae.cluster_id,ge,xe,Se):Se<xe?Se++:ee.push(pe),ee.length===ge)break}return Se},Pt.prototype._addTileFeatures=function(ee,ue,ge,xe,Se,Xe){for(var ze=0,pe=ee;ze<pe.length;ze+=1){var Ae=ue[pe[ze]],tt=Ae.numPoints,vt={type:1,geometry:[[Math.round(this.options.extent*(Ae.x*Se-ge)),Math.round(this.options.extent*(Ae.y*Se-xe))]],tags:tt?ta(Ae):this.points[Ae.index].properties},At=void 0;tt?At=Ae.id:this.options.generateId?At=Ae.index:this.points[Ae.index].id&&(At=this.points[Ae.index].id),At!==void 0&&(vt.id=At),Xe.features.push(vt)}},Pt.prototype._limitZoom=function(ee){return Math.max(this.options.minZoom,Math.min(+ee,this.options.maxZoom+1))},Pt.prototype._cluster=function(ee,ue){for(var ge=[],xe=this.options,Se=xe.reduce,Xe=xe.minPoints,ze=xe.radius/(xe.extent*Math.pow(2,ue)),pe=0;pe<ee.length;pe++){var Ae=ee[pe];if(!(Ae.zoom<=ue)){Ae.zoom=ue;for(var tt=this.trees[ue+1],vt=tt.within(Ae.x,Ae.y,ze),At=Ae.numPoints||1,ct=At,wt=0,Jt=vt;wt<Jt.length;wt+=1){var aa=tt.points[Jt[wt]];aa.zoom>ue&&(ct+=aa.numPoints||1)}if(ct>=Xe){for(var mt=Ae.x*At,jt=Ae.y*At,Ut=Se&&At>1?this._map(Ae,!0):null,Xt=(pe<<5)+(ue+1)+this.points.length,Ot=0,Me=vt;Ot<Me.length;Ot+=1){var yt=tt.points[Me[Ot]];if(!(yt.zoom<=ue)){yt.zoom=ue;var Yt=yt.numPoints||1;mt+=yt.x*Yt,jt+=yt.y*Yt,yt.parentId=Xt,Se&&(Ut||(Ut=this._map(Ae,!0)),Se(Ut,this._map(yt)))}}Ae.parentId=Xt,ge.push(zt(mt/ct,jt/ct,Xt,ct,Ut))}else if(ge.push(Ae),ct>1)for(var fa=0,Ba=vt;fa<Ba.length;fa+=1){var Aa=tt.points[Ba[fa]];Aa.zoom<=ue||(Aa.zoom=ue,ge.push(Aa))}}}return ge},Pt.prototype._getOriginId=function(ee){return ee-this.points.length>>5},Pt.prototype._getOriginZoom=function(ee){return(ee-this.points.length)%32},Pt.prototype._map=function(ee,ue){if(ee.numPoints)return ue?z({},ee.properties):ee.properties;var ge=this.points[ee.index].properties,xe=this.options.map(ge);return ue&&xe===ge?z({},xe):xe},Zn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Zn.prototype.splitTile=function(ee,ue,ge,xe,Se,Xe,ze){for(var pe=[ee,ue,ge,xe],Ae=this.options,tt=Ae.debug;pe.length;){xe=pe.pop(),ge=pe.pop(),ue=pe.pop(),ee=pe.pop();var vt=1<<ue,At=zn(ue,ge,xe),ct=this.tiles[At];if(!ct&&(tt>1&&console.time("creation"),ct=this.tiles[At]=vs(ee,ue,ge,xe,Ae),this.tileCoords.push({z:ue,x:ge,y:xe}),tt)){tt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ue,ge,xe,ct.numFeatures,ct.numPoints,ct.numSimplified),console.timeEnd("creation"));var wt="z"+ue;this.stats[wt]=(this.stats[wt]||0)+1,this.total++}if(ct.source=ee,Se){if(ue===Ae.maxZoom||ue===Se)continue;var Jt=1<<Se-ue;if(ge!==Math.floor(Xe/Jt)||xe!==Math.floor(ze/Jt))continue}else if(ue===Ae.indexMaxZoom||ct.numPoints<=Ae.indexMaxPoints)continue;if(ct.source=null,ee.length!==0){tt>1&&console.time("clipping");var aa,mt,jt,Ut,Xt,Ot,Me=.5*Ae.buffer/Ae.extent,yt=.5-Me,Yt=.5+Me,fa=1+Me;aa=mt=jt=Ut=null,Xt=Et(ee,vt,ge-Me,ge+Yt,0,ct.minX,ct.maxX,Ae),Ot=Et(ee,vt,ge+yt,ge+fa,0,ct.minX,ct.maxX,Ae),ee=null,Xt&&(aa=Et(Xt,vt,xe-Me,xe+Yt,1,ct.minY,ct.maxY,Ae),mt=Et(Xt,vt,xe+yt,xe+fa,1,ct.minY,ct.maxY,Ae),Xt=null),Ot&&(jt=Et(Ot,vt,xe-Me,xe+Yt,1,ct.minY,ct.maxY,Ae),Ut=Et(Ot,vt,xe+yt,xe+fa,1,ct.minY,ct.maxY,Ae),Ot=null),tt>1&&console.timeEnd("clipping"),pe.push(aa||[],ue+1,2*ge,2*xe),pe.push(mt||[],ue+1,2*ge,2*xe+1),pe.push(jt||[],ue+1,2*ge+1,2*xe),pe.push(Ut||[],ue+1,2*ge+1,2*xe+1)}}},Zn.prototype.getTile=function(ee,ue,ge){var xe=this.options,Se=xe.extent,Xe=xe.debug;if(ee<0||ee>24)return null;var ze=1<<ee,pe=zn(ee,ue=(ue%ze+ze)%ze,ge);if(this.tiles[pe])return Ti(this.tiles[pe],Se);Xe>1&&console.log("drilling down to z%d-%d-%d",ee,ue,ge);for(var Ae,tt=ee,vt=ue,At=ge;!Ae&&tt>0;)tt--,vt=Math.floor(vt/2),At=Math.floor(At/2),Ae=this.tiles[zn(tt,vt,At)];return Ae&&Ae.source?(Xe>1&&console.log("found parent tile z%d-%d-%d",tt,vt,At),Xe>1&&console.time("drilling down"),this.splitTile(Ae.source,tt,vt,At,ee,ue,ge),Xe>1&&console.timeEnd("drilling down"),this.tiles[pe]?Ti(this.tiles[pe],Se):null):null};var Ll=(function(ee){function ue(ge,xe,Se,Xe){ee.call(this,ge,xe,Se,pr),Xe&&(this.loadGeoJSON=Xe)}return ee&&(ue.__proto__=ee),(ue.prototype=Object.create(ee&&ee.prototype)).constructor=ue,ue.prototype.loadData=function(ge,xe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=xe,this._pendingLoadDataParams=ge,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ue.prototype._loadData=function(){var ge=this;if(this._pendingCallback&&this._pendingLoadDataParams){var xe=this._pendingCallback,Se=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Xe=!!(Se&&Se.request&&Se.request.collectResourceTiming)&&new r.RequestPerformance(Se.request);this.loadGeoJSON(Se,(function(ze,pe){if(ze||!pe)return xe(ze);if(typeof pe!="object")return xe(new Error("Input data given to '"+Se.source+"' is not a valid GeoJSON object."));(function ct(wt,Jt){var aa,mt=wt&&wt.type;if(mt==="FeatureCollection")for(aa=0;aa<wt.features.length;aa++)ct(wt.features[aa],Jt);else if(mt==="GeometryCollection")for(aa=0;aa<wt.geometries.length;aa++)ct(wt.geometries[aa],Jt);else if(mt==="Feature")ct(wt.geometry,Jt);else if(mt==="Polygon")E(wt.coordinates,Jt);else if(mt==="MultiPolygon")for(aa=0;aa<wt.coordinates.length;aa++)E(wt.coordinates[aa],Jt);return wt})(pe,!0);try{if(Se.filter){var Ae=r.createExpression(Se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ae.result==="error")throw new Error(Ae.value.map((function(ct){return ct.key+": "+ct.message})).join(", "));var tt=pe.features.filter((function(ct){return Ae.value.evaluate({zoom:0},ct)}));pe={type:"FeatureCollection",features:tt}}ge._geoJSONIndex=Se.cluster?new Pt((function(ct){var wt=ct.superclusterOptions,Jt=ct.clusterProperties;if(!Jt||!wt)return wt;for(var aa={},mt={},jt={accumulated:null,zoom:0},Ut={properties:null},Xt=Object.keys(Jt),Ot=0,Me=Xt;Ot<Me.length;Ot+=1){var yt=Me[Ot],Yt=Jt[yt],fa=Yt[0],Ba=r.createExpression(Yt[1]),Aa=r.createExpression(typeof fa=="string"?[fa,["accumulated"],["get",yt]]:fa);aa[yt]=Ba.value,mt[yt]=Aa.value}return wt.map=function($i){Ut.properties=$i;for(var si={},an=0,ki=Xt;an<ki.length;an+=1){var Ea=ki[an];si[Ea]=aa[Ea].evaluate(jt,Ut)}return si},wt.reduce=function($i,si){Ut.properties=si;for(var an=0,ki=Xt;an<ki.length;an+=1){var Ea=ki[an];jt.accumulated=$i[Ea],$i[Ea]=mt[Ea].evaluate(jt,Ut)}},wt})(Se)).load(pe.features):(function(ct,wt){return new Zn(ct,wt)})(pe,Se.geojsonVtOptions)}catch(ct){return xe(ct)}ge.loaded={};var vt={};if(Xe){var At=Xe.finish();At&&(vt.resourceTiming={},vt.resourceTiming[Se.source]=JSON.parse(JSON.stringify(At)))}xe(null,vt)}))}},ue.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ue.prototype.reloadTile=function(ge,xe){var Se=this.loaded;return Se&&Se[ge.uid]?ee.prototype.reloadTile.call(this,ge,xe):this.loadTile(ge,xe)},ue.prototype.loadGeoJSON=function(ge,xe){if(ge.request)r.getJSON(ge.request,xe);else{if(typeof ge.data!="string")return xe(new Error("Input data given to '"+ge.source+"' is not a valid GeoJSON object."));try{return xe(null,JSON.parse(ge.data))}catch{return xe(new Error("Input data given to '"+ge.source+"' is not a valid GeoJSON object."))}}},ue.prototype.removeSource=function(ge,xe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),xe()},ue.prototype.getClusterExpansionZoom=function(ge,xe){try{xe(null,this._geoJSONIndex.getClusterExpansionZoom(ge.clusterId))}catch(Se){xe(Se)}},ue.prototype.getClusterChildren=function(ge,xe){try{xe(null,this._geoJSONIndex.getChildren(ge.clusterId))}catch(Se){xe(Se)}},ue.prototype.getClusterLeaves=function(ge,xe){try{xe(null,this._geoJSONIndex.getLeaves(ge.clusterId,ge.limit,ge.offset))}catch(Se){xe(Se)}},ue})(C),Ii=function(ee){var ue=this;this.self=ee,this.actor=new r.Actor(ee,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:C,geojson:Ll},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ge,xe){if(ue.workerSourceTypes[ge])throw new Error('Worker source with name "'+ge+'" already registered.');ue.workerSourceTypes[ge]=xe},this.self.registerRTLTextPlugin=function(ge){if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=ge.applyArabicShaping,r.plugin.processBidirectionalText=ge.processBidirectionalText,r.plugin.processStyledBidirectionalText=ge.processStyledBidirectionalText}};return Ii.prototype.setReferrer=function(ee,ue){this.referrer=ue},Ii.prototype.setImages=function(ee,ue,ge){for(var xe in this.availableImages[ee]=ue,this.workerSources[ee]){var Se=this.workerSources[ee][xe];for(var Xe in Se)Se[Xe].availableImages=ue}ge()},Ii.prototype.setLayers=function(ee,ue,ge){this.getLayerIndex(ee).replace(ue),ge()},Ii.prototype.updateLayers=function(ee,ue,ge){this.getLayerIndex(ee).update(ue.layers,ue.removedIds),ge()},Ii.prototype.loadTile=function(ee,ue,ge){this.getWorkerSource(ee,ue.type,ue.source).loadTile(ue,ge)},Ii.prototype.loadDEMTile=function(ee,ue,ge){this.getDEMWorkerSource(ee,ue.source).loadTile(ue,ge)},Ii.prototype.reloadTile=function(ee,ue,ge){this.getWorkerSource(ee,ue.type,ue.source).reloadTile(ue,ge)},Ii.prototype.abortTile=function(ee,ue,ge){this.getWorkerSource(ee,ue.type,ue.source).abortTile(ue,ge)},Ii.prototype.removeTile=function(ee,ue,ge){this.getWorkerSource(ee,ue.type,ue.source).removeTile(ue,ge)},Ii.prototype.removeDEMTile=function(ee,ue){this.getDEMWorkerSource(ee,ue.source).removeTile(ue)},Ii.prototype.removeSource=function(ee,ue,ge){if(this.workerSources[ee]&&this.workerSources[ee][ue.type]&&this.workerSources[ee][ue.type][ue.source]){var xe=this.workerSources[ee][ue.type][ue.source];delete this.workerSources[ee][ue.type][ue.source],xe.removeSource!==void 0?xe.removeSource(ue,ge):ge()}},Ii.prototype.loadWorkerSource=function(ee,ue,ge){try{this.self.importScripts(ue.url),ge()}catch(xe){ge(xe.toString())}},Ii.prototype.syncRTLPluginState=function(ee,ue,ge){try{r.plugin.setState(ue);var xe=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&xe!=null){this.self.importScripts(xe);var Se=r.plugin.isParsed();ge(Se?void 0:new Error("RTL Text Plugin failed to import scripts from "+xe),Se)}}catch(Xe){ge(Xe.toString())}},Ii.prototype.getAvailableImages=function(ee){var ue=this.availableImages[ee];return ue||(ue=[]),ue},Ii.prototype.getLayerIndex=function(ee){var ue=this.layerIndexes[ee];return ue||(ue=this.layerIndexes[ee]=new d),ue},Ii.prototype.getWorkerSource=function(ee,ue,ge){var xe=this;return this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][ue]||(this.workerSources[ee][ue]={}),this.workerSources[ee][ue][ge]||(this.workerSources[ee][ue][ge]=new this.workerSourceTypes[ue]({send:function(Se,Xe,ze){xe.actor.send(Se,Xe,ze,ee)}},this.getLayerIndex(ee),this.getAvailableImages(ee))),this.workerSources[ee][ue][ge]},Ii.prototype.getDEMWorkerSource=function(ee,ue){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][ue]||(this.demWorkerSources[ee][ue]=new A),this.demWorkerSources[ee][ue]},Ii.prototype.enforceCacheSizeLimit=function(ee,ue){r.enforceCacheSizeLimit(ue)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Ii(self)),Ii})),s(["./shared"],(function(r){var l=r.createCommonjsModule((function(m){function p(T){return!f(T)}function f(T){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var W,D,q=new Blob([""],{type:"text/javascript"}),oe=URL.createObjectURL(q);try{D=new Worker(oe),W=!0}catch{W=!1}return D&&D.terminate(),URL.revokeObjectURL(oe),W})()?"Uint8ClampedArray"in window?ArrayBuffer.isView?(function(){var W=document.createElement("canvas");W.width=W.height=1;var D=W.getContext("2d");if(!D)return!1;var q=D.getImageData(0,0,1,1);return q&&q.width===W.width})()?(v[k=T&&T.failIfMajorPerformanceCaveat]===void 0&&(v[k]=(function(W){var D=(function(oe){var be=document.createElement("canvas"),ve=Object.create(p.webGLContextAttributes);return ve.failIfMajorPerformanceCaveat=oe,be.probablySupportsContext?be.probablySupportsContext("webgl",ve)||be.probablySupportsContext("experimental-webgl",ve):be.supportsContext?be.supportsContext("webgl",ve)||be.supportsContext("experimental-webgl",ve):be.getContext("webgl",ve)||be.getContext("experimental-webgl",ve)})(W);if(!D)return!1;var q=D.createShader(D.VERTEX_SHADER);return!(!q||D.isContextLost())&&(D.shaderSource(q,"void main() {}"),D.compileShader(q),D.getShaderParameter(q,D.COMPILE_STATUS)===!0)})(k)),v[k]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var k}m.exports?m.exports=p:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=p,window.mapboxgl.notSupportedReason=f);var v={};p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),u={create:function(m,p,f){var v=r.window.document.createElement(m);return p!==void 0&&(v.className=p),f&&f.appendChild(v),v},createNS:function(m,p){return r.window.document.createElementNS(m,p)}},d=r.window.document&&r.window.document.documentElement.style;function h(m){if(!d)return m[0];for(var p=0;p<m.length;p++)if(m[p]in d)return m[p];return m[0]}var g,y=h(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);u.disableDrag=function(){d&&y&&(g=d[y],d[y]="none")},u.enableDrag=function(){d&&y&&(d[y]=g)};var x=h(["transform","WebkitTransform"]);u.setTransform=function(m,p){m.style[x]=p};var C=!1;try{var I=Object.defineProperty({},"passive",{get:function(){C=!0}});r.window.addEventListener("test",I,I),r.window.removeEventListener("test",I,I)}catch{C=!1}u.addEventListener=function(m,p,f,v){v===void 0&&(v={}),m.addEventListener(p,f,"passive"in v&&C?v:v.capture)},u.removeEventListener=function(m,p,f,v){v===void 0&&(v={}),m.removeEventListener(p,f,"passive"in v&&C?v:v.capture)};var A=function(m){m.preventDefault(),m.stopPropagation(),r.window.removeEventListener("click",A,!0)};function E(m){var p=m.userImage;return!!(p&&p.render&&p.render())&&(m.data.replace(new Uint8Array(p.data.buffer)),!0)}u.suppressClick=function(){r.window.addEventListener("click",A,!0),r.window.setTimeout((function(){r.window.removeEventListener("click",A,!0)}),0)},u.mousePos=function(m,p){var f=m.getBoundingClientRect();return new r.Point(p.clientX-f.left-m.clientLeft,p.clientY-f.top-m.clientTop)},u.touchPos=function(m,p){for(var f=m.getBoundingClientRect(),v=[],T=0;T<p.length;T++)v.push(new r.Point(p[T].clientX-f.left-m.clientLeft,p[T].clientY-f.top-m.clientTop));return v},u.mouseButton=function(m){return r.window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&r.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button},u.remove=function(m){m.parentNode&&m.parentNode.removeChild(m)};var L=(function(m){function p(){m.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.isLoaded=function(){return this.loaded},p.prototype.setLoaded=function(f){if(this.loaded!==f&&(this.loaded=f,f)){for(var v=0,T=this.requestors;v<T.length;v+=1){var k=T[v];this._notify(k.ids,k.callback)}this.requestors=[]}},p.prototype.getImage=function(f){return this.images[f]},p.prototype.addImage=function(f,v){this._validate(f,v)&&(this.images[f]=v)},p.prototype._validate=function(f,v){var T=!0;return this._validateStretch(v.stretchX,v.data&&v.data.width)||(this.fire(new r.ErrorEvent(new Error('Image "'+f+'" has invalid "stretchX" value'))),T=!1),this._validateStretch(v.stretchY,v.data&&v.data.height)||(this.fire(new r.ErrorEvent(new Error('Image "'+f+'" has invalid "stretchY" value'))),T=!1),this._validateContent(v.content,v)||(this.fire(new r.ErrorEvent(new Error('Image "'+f+'" has invalid "content" value'))),T=!1),T},p.prototype._validateStretch=function(f,v){if(!f)return!0;for(var T=0,k=0,W=f;k<W.length;k+=1){var D=W[k];if(D[0]<T||D[1]<D[0]||v<D[1])return!1;T=D[1]}return!0},p.prototype._validateContent=function(f,v){return!(f&&(f.length!==4||f[0]<0||v.data.width<f[0]||f[1]<0||v.data.height<f[1]||f[2]<0||v.data.width<f[2]||f[3]<0||v.data.height<f[3]||f[2]<f[0]||f[3]<f[1]))},p.prototype.updateImage=function(f,v){v.version=this.images[f].version+1,this.images[f]=v,this.updatedImages[f]=!0},p.prototype.removeImage=function(f){var v=this.images[f];delete this.images[f],delete this.patterns[f],v.userImage&&v.userImage.onRemove&&v.userImage.onRemove()},p.prototype.listImages=function(){return Object.keys(this.images)},p.prototype.getImages=function(f,v){var T=!0;if(!this.isLoaded())for(var k=0,W=f;k<W.length;k+=1)this.images[W[k]]||(T=!1);this.isLoaded()||T?this._notify(f,v):this.requestors.push({ids:f,callback:v})},p.prototype._notify=function(f,v){for(var T={},k=0,W=f;k<W.length;k+=1){var D=W[k];this.images[D]||this.fire(new r.Event("styleimagemissing",{id:D}));var q=this.images[D];q?T[D]={data:q.data.clone(),pixelRatio:q.pixelRatio,sdf:q.sdf,version:q.version,stretchX:q.stretchX,stretchY:q.stretchY,content:q.content,hasRenderCallback:!!(q.userImage&&q.userImage.render)}:r.warnOnce('Image "'+D+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}v(null,T)},p.prototype.getPixelSize=function(){var f=this.atlasImage;return{width:f.width,height:f.height}},p.prototype.getPattern=function(f){var v=this.patterns[f],T=this.getImage(f);if(!T)return null;if(v&&v.position.version===T.version)return v.position;if(v)v.position.version=T.version;else{var k={w:T.data.width+2,h:T.data.height+2,x:0,y:0},W=new r.ImagePosition(k,T);this.patterns[f]={bin:k,position:W}}return this._updatePatternAtlas(),this.patterns[f].position},p.prototype.bind=function(f){var v=f.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new r.Texture(f,this.atlasImage,v.RGBA),this.atlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE)},p.prototype._updatePatternAtlas=function(){var f=[];for(var v in this.patterns)f.push(this.patterns[v].bin);var T=r.potpack(f),k=T.w,W=T.h,D=this.atlasImage;for(var q in D.resize({width:k||1,height:W||1}),this.patterns){var oe=this.patterns[q].bin,be=oe.x+1,ve=oe.y+1,we=this.images[q].data,Oe=we.width,We=we.height;r.RGBAImage.copy(we,D,{x:0,y:0},{x:be,y:ve},{width:Oe,height:We}),r.RGBAImage.copy(we,D,{x:0,y:We-1},{x:be,y:ve-1},{width:Oe,height:1}),r.RGBAImage.copy(we,D,{x:0,y:0},{x:be,y:ve+We},{width:Oe,height:1}),r.RGBAImage.copy(we,D,{x:Oe-1,y:0},{x:be-1,y:ve},{width:1,height:We}),r.RGBAImage.copy(we,D,{x:0,y:0},{x:be+Oe,y:ve},{width:1,height:We})}this.dirty=!0},p.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},p.prototype.dispatchRenderCallbacks=function(f){for(var v=0,T=f;v<T.length;v+=1){var k=T[v];if(!this.callbackDispatchedThisFrame[k]){this.callbackDispatchedThisFrame[k]=!0;var W=this.images[k];E(W)&&this.updateImage(k,W)}}},p})(r.Evented),G=Z,F=Z,B=1e20;function Z(m,p,f,v,T,k){this.fontSize=m||24,this.buffer=p===void 0?3:p,this.cutoff=v||.25,this.fontFamily=T||"sans-serif",this.fontWeight=k||"normal",this.radius=f||8;var W=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=W,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(W*W),this.gridInner=new Float64Array(W*W),this.f=new Float64Array(W),this.d=new Float64Array(W),this.z=new Float64Array(W+1),this.v=new Int16Array(W),this.middle=Math.round(W/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Y(m,p,f,v,T,k,W){for(var D=0;D<p;D++){for(var q=0;q<f;q++)v[q]=m[q*p+D];for($(v,T,k,W,f),q=0;q<f;q++)m[q*p+D]=T[q]}for(q=0;q<f;q++){for(D=0;D<p;D++)v[D]=m[q*p+D];for($(v,T,k,W,p),D=0;D<p;D++)m[q*p+D]=Math.sqrt(T[D])}}function $(m,p,f,v,T){f[0]=0,v[0]=-B,v[1]=+B;for(var k=1,W=0;k<T;k++){for(var D=(m[k]+k*k-(m[f[W]]+f[W]*f[W]))/(2*k-2*f[W]);D<=v[W];)W--,D=(m[k]+k*k-(m[f[W]]+f[W]*f[W]))/(2*k-2*f[W]);f[++W]=k,v[W]=D,v[W+1]=+B}for(k=0,W=0;k<T;k++){for(;v[W+1]<k;)W++;p[k]=(k-f[W])*(k-f[W])+m[f[W]]}}Z.prototype.draw=function(m){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(m,this.buffer,this.middle);for(var p=this.ctx.getImageData(0,0,this.size,this.size),f=new Uint8ClampedArray(this.size*this.size),v=0;v<this.size*this.size;v++){var T=p.data[4*v+3]/255;this.gridOuter[v]=T===1?0:T===0?B:Math.pow(Math.max(0,.5-T),2),this.gridInner[v]=T===1?B:T===0?0:Math.pow(Math.max(0,T-.5),2)}for(Y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),v=0;v<this.size*this.size;v++)f[v]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[v]-this.gridInner[v])/this.radius+this.cutoff))));return f},G.default=F;var te=function(m,p){this.requestManager=m,this.localIdeographFontFamily=p,this.entries={}};te.prototype.setURL=function(m){this.url=m},te.prototype.getGlyphs=function(m,p){var f=this,v=[];for(var T in m)for(var k=0,W=m[T];k<W.length;k+=1)v.push({stack:T,id:W[k]});r.asyncAll(v,(function(D,q){var oe=D.stack,be=D.id,ve=f.entries[oe];ve||(ve=f.entries[oe]={glyphs:{},requests:{},ranges:{}});var we=ve.glyphs[be];if(we===void 0){if(we=f._tinySDF(ve,oe,be))return ve.glyphs[be]=we,void q(null,{stack:oe,id:be,glyph:we});var Oe=Math.floor(be/256);if(256*Oe>65535)q(new Error("glyphs > 65535 not supported"));else if(ve.ranges[Oe])q(null,{stack:oe,id:be,glyph:we});else{var We=ve.requests[Oe];We||(We=ve.requests[Oe]=[],te.loadGlyphRange(oe,Oe,f.url,f.requestManager,(function(He,Te){if(Te){for(var Ue in Te)f._doesCharSupportLocalGlyph(+Ue)||(ve.glyphs[+Ue]=Te[+Ue]);ve.ranges[Oe]=!0}for(var Ke=0,at=We;Ke<at.length;Ke+=1)(0,at[Ke])(He,Te);delete ve.requests[Oe]}))),We.push((function(He,Te){He?q(He):Te&&q(null,{stack:oe,id:be,glyph:Te[be]||null})}))}}else q(null,{stack:oe,id:be,glyph:we})}),(function(D,q){if(D)p(D);else if(q){for(var oe={},be=0,ve=q;be<ve.length;be+=1){var we=ve[be],Oe=we.stack,We=we.id,He=we.glyph;(oe[Oe]||(oe[Oe]={}))[We]=He&&{id:He.id,bitmap:He.bitmap.clone(),metrics:He.metrics}}p(null,oe)}}))},te.prototype._doesCharSupportLocalGlyph=function(m){return!!this.localIdeographFontFamily&&(r.isChar["CJK Unified Ideographs"](m)||r.isChar["Hangul Syllables"](m)||r.isChar.Hiragana(m)||r.isChar.Katakana(m))},te.prototype._tinySDF=function(m,p,f){var v=this.localIdeographFontFamily;if(v&&this._doesCharSupportLocalGlyph(f)){var T=m.tinySDF;if(!T){var k="400";/bold/i.test(p)?k="900":/medium/i.test(p)?k="500":/light/i.test(p)&&(k="200"),T=m.tinySDF=new te.TinySDF(24,3,8,.25,v,k)}return{id:f,bitmap:new r.AlphaImage({width:30,height:30},T.draw(String.fromCharCode(f))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},te.loadGlyphRange=function(m,p,f,v,T){var k=256*p,W=k+255,D=v.transformRequest(v.normalizeGlyphsURL(f).replace("{fontstack}",m).replace("{range}",k+"-"+W),r.ResourceType.Glyphs);r.getArrayBuffer(D,(function(q,oe){if(q)T(q);else if(oe){for(var be={},ve=0,we=r.parseGlyphPBF(oe);ve<we.length;ve+=1){var Oe=we[ve];be[Oe.id]=Oe}T(null,be)}}))},te.TinySDF=G;var ce=function(){this.specification=r.styleSpec.light.position};ce.prototype.possiblyEvaluate=function(m,p){return r.sphericalToCartesian(m.expression.evaluate(p))},ce.prototype.interpolate=function(m,p,f){return{x:r.number(m.x,p.x,f),y:r.number(m.y,p.y,f),z:r.number(m.z,p.z,f)}};var me=new r.Properties({anchor:new r.DataConstantProperty(r.styleSpec.light.anchor),position:new ce,color:new r.DataConstantProperty(r.styleSpec.light.color),intensity:new r.DataConstantProperty(r.styleSpec.light.intensity)}),X=(function(m){function p(f){m.call(this),this._transitionable=new r.Transitionable(me),this.setLight(f),this._transitioning=this._transitionable.untransitioned()}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getLight=function(){return this._transitionable.serialize()},p.prototype.setLight=function(f,v){if(v===void 0&&(v={}),!this._validate(r.validateLight,f,v))for(var T in f){var k=f[T];r.endsWith(T,"-transition")?this._transitionable.setTransition(T.slice(0,-11),k):this._transitionable.setValue(T,k)}},p.prototype.updateTransitions=function(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)},p.prototype.hasTransition=function(){return this._transitioning.hasTransition()},p.prototype.recalculate=function(f){this.properties=this._transitioning.possiblyEvaluate(f)},p.prototype._validate=function(f,v,T){return(!T||T.validate!==!1)&&r.emitValidationErrors(this,f.call(r.validateStyle,r.extend({value:v,style:{glyphs:!0,sprite:!0},styleSpec:r.styleSpec})))},p})(r.Evented),de=function(m,p){this.width=m,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};de.prototype.getDash=function(m,p){var f=m.join(",")+String(p);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(m,p)),this.dashEntry[f]},de.prototype.getDashRanges=function(m,p,f){var v=[],T=m.length%2==1?-m[m.length-1]*f:0,k=m[0]*f,W=!0;v.push({left:T,right:k,isDash:W,zeroLength:m[0]===0});for(var D=m[0],q=1;q<m.length;q++){var oe=m[q];v.push({left:T=D*f,right:k=(D+=oe)*f,isDash:W=!W,zeroLength:oe===0})}return v},de.prototype.addRoundDash=function(m,p,f){for(var v=p/2,T=-f;T<=f;T++)for(var k=this.width*(this.nextRow+f+T),W=0,D=m[W],q=0;q<this.width;q++){q/D.right>1&&(D=m[++W]);var oe=Math.abs(q-D.left),be=Math.abs(q-D.right),ve=Math.min(oe,be),we=void 0,Oe=T/f*(v+1);if(D.isDash){var We=v-Math.abs(Oe);we=Math.sqrt(ve*ve+We*We)}else we=v-Math.sqrt(ve*ve+Oe*Oe);this.data[k+q]=Math.max(0,Math.min(255,we+128))}},de.prototype.addRegularDash=function(m){for(var p=m.length-1;p>=0;--p){var f=m[p],v=m[p+1];f.zeroLength?m.splice(p,1):v&&v.isDash===f.isDash&&(v.left=f.left,m.splice(p,1))}var T=m[0],k=m[m.length-1];T.isDash===k.isDash&&(T.left=k.left-this.width,k.right=T.right+this.width);for(var W=this.width*this.nextRow,D=0,q=m[D],oe=0;oe<this.width;oe++){oe/q.right>1&&(q=m[++D]);var be=Math.abs(oe-q.left),ve=Math.abs(oe-q.right),we=Math.min(be,ve);this.data[W+oe]=Math.max(0,Math.min(255,(q.isDash?we:-we)+128))}},de.prototype.addDash=function(m,p){var f=p?7:0,v=2*f+1;if(this.nextRow+v>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var T=0,k=0;k<m.length;k++)T+=m[k];if(T!==0){var W=this.width/T,D=this.getDashRanges(m,this.width,W);p?this.addRoundDash(D,W,f):this.addRegularDash(D)}var q={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:T};return this.nextRow+=v,this.dirty=!0,q},de.prototype.bind=function(m){var p=m.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))};var N=function m(p,f){this.workerPool=p,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var v=this.workerPool.acquire(this.id),T=0;T<v.length;T++){var k=new m.Actor(v[T],f,this.id);k.name="Worker "+T,this.actors.push(k)}};function ne(m,p,f){var v=function(T,k){if(T)return f(T);if(k){var W=r.pick(r.extend(k,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);k.vector_layers&&(W.vectorLayers=k.vector_layers,W.vectorLayerIds=W.vectorLayers.map((function(D){return D.id}))),W.tiles=p.canonicalizeTileset(W,m.url),f(null,W)}};return m.url?r.getJSON(p.transformRequest(p.normalizeSourceURL(m.url),r.ResourceType.Source),v):r.browser.frame((function(){return v(null,m)}))}N.prototype.broadcast=function(m,p,f){r.asyncAll(this.actors,(function(v,T){v.send(m,p,T)}),f=f||function(){})},N.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},N.prototype.remove=function(){this.actors.forEach((function(m){m.remove()})),this.actors=[],this.workerPool.release(this.id)},N.Actor=r.Actor;var le=function(m,p,f){this.bounds=r.LngLatBounds.convert(this.validateBounds(m)),this.minzoom=p||0,this.maxzoom=f||24};le.prototype.validateBounds=function(m){return Array.isArray(m)&&m.length===4?[Math.max(-180,m[0]),Math.max(-90,m[1]),Math.min(180,m[2]),Math.min(90,m[3])]:[-180,-90,180,90]},le.prototype.contains=function(m){var p=Math.pow(2,m.z),f=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*p),v=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*p),T=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*p),k=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*p);return m.x>=f&&m.x<T&&m.y>=v&&m.y<k};var _e=(function(m){function p(f,v,T,k){if(m.call(this),this.id=f,this.dispatcher=T,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(v,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},v),this._collectResourceTiming=v.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(k)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.load=function(){var f=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ne(this._options,this.map._requestManager,(function(v,T){f._tileJSONRequest=null,f._loaded=!0,v?f.fire(new r.ErrorEvent(v)):T&&(r.extend(f,T),T.bounds&&(f.tileBounds=new le(T.bounds,f.minzoom,f.maxzoom)),r.postTurnstileEvent(T.tiles,f.map._requestManager._customAccessToken),r.postMapLoadEvent(T.tiles,f.map._getMapId(),f.map._requestManager._skuToken,f.map._requestManager._customAccessToken),f.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),f.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))}))},p.prototype.loaded=function(){return this._loaded},p.prototype.hasTile=function(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)},p.prototype.onAdd=function(f){this.map=f,this.load()},p.prototype.setSourceProperty=function(f){this._tileJSONRequest&&this._tileJSONRequest.cancel(),f(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},p.prototype.setTiles=function(f){var v=this;return this.setSourceProperty((function(){v._options.tiles=f})),this},p.prototype.setUrl=function(f){var v=this;return this.setSourceProperty((function(){v.url=f,v._options.url=f})),this},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return r.extend({},this._options)},p.prototype.loadTile=function(f,v){var T=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme)),k={request:this.map._requestManager.transformRequest(T,r.ResourceType.Tile),uid:f.uid,tileID:f.tileID,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function W(D,q){return delete f.request,f.aborted?v(null):D&&D.status!==404?v(D):(q&&q.resourceTiming&&(f.resourceTiming=q.resourceTiming),this.map._refreshExpiredTiles&&q&&f.setExpiryData(q),f.loadVectorData(q,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),v(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}k.request.collectResourceTiming=this._collectResourceTiming,f.actor&&f.state!=="expired"?f.state==="loading"?f.reloadCallback=v:f.request=f.actor.send("reloadTile",k,W.bind(this)):(f.actor=this.dispatcher.getActor(),f.request=f.actor.send("loadTile",k,W.bind(this)))},p.prototype.abortTile=function(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id},void 0)},p.prototype.unloadTile=function(f){f.unloadVectorData(),f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id},void 0)},p.prototype.hasTransition=function(){return!1},p})(r.Evented),ke=(function(m){function p(f,v,T,k){m.call(this),this.id=f,this.dispatcher=T,this.setEventedParent(k),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},v),r.extend(this,r.pick(v,["url","scheme","tileSize"]))}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.load=function(){var f=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ne(this._options,this.map._requestManager,(function(v,T){f._tileJSONRequest=null,f._loaded=!0,v?f.fire(new r.ErrorEvent(v)):T&&(r.extend(f,T),T.bounds&&(f.tileBounds=new le(T.bounds,f.minzoom,f.maxzoom)),r.postTurnstileEvent(T.tiles),r.postMapLoadEvent(T.tiles,f.map._getMapId(),f.map._requestManager._skuToken),f.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),f.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))}))},p.prototype.loaded=function(){return this._loaded},p.prototype.onAdd=function(f){this.map=f,this.load()},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return r.extend({},this._options)},p.prototype.hasTile=function(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)},p.prototype.loadTile=function(f,v){var T=this,k=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);f.request=r.getImage(this.map._requestManager.transformRequest(k,r.ResourceType.Tile),(function(W,D){if(delete f.request,f.aborted)f.state="unloaded",v(null);else if(W)f.state="errored",v(W);else if(D){T.map._refreshExpiredTiles&&f.setExpiryData(D),delete D.cacheControl,delete D.expires;var q=T.map.painter.context,oe=q.gl;f.texture=T.map.painter.getTileTexture(D.width),f.texture?f.texture.update(D,{useMipmap:!0}):(f.texture=new r.Texture(q,D,oe.RGBA,{useMipmap:!0}),f.texture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST),q.extTextureFilterAnisotropic&&oe.texParameterf(oe.TEXTURE_2D,q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,q.extTextureFilterAnisotropicMax)),f.state="loaded",r.cacheEntryPossiblyAdded(T.dispatcher),v(null)}}))},p.prototype.abortTile=function(f,v){f.request&&(f.request.cancel(),delete f.request),v()},p.prototype.unloadTile=function(f,v){f.texture&&this.map.painter.saveTileTexture(f.texture),v()},p.prototype.hasTransition=function(){return!1},p})(r.Evented),Ie=(function(m){function p(f,v,T,k){m.call(this,f,v,T,k),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},v),this.encoding=v.encoding||"mapbox"}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},p.prototype.loadTile=function(f,v){var T=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function k(W,D){W&&(f.state="errored",v(W)),D&&(f.dem=D,f.needsHillshadePrepare=!0,f.state="loaded",v(null))}f.request=r.getImage(this.map._requestManager.transformRequest(T,r.ResourceType.Tile),(function(W,D){if(delete f.request,f.aborted)f.state="unloaded",v(null);else if(W)f.state="errored",v(W);else if(D){this.map._refreshExpiredTiles&&f.setExpiryData(D),delete D.cacheControl,delete D.expires;var q=r.window.ImageBitmap&&D instanceof r.window.ImageBitmap&&r.offscreenCanvasSupported()?D:r.browser.getImageData(D,1),oe={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:q,encoding:this.encoding};f.actor&&f.state!=="expired"||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",oe,k.bind(this)))}}).bind(this)),f.neighboringTiles=this._getNeighboringTiles(f.tileID)},p.prototype._getNeighboringTiles=function(f){var v=f.canonical,T=Math.pow(2,v.z),k=(v.x-1+T)%T,W=v.x===0?f.wrap-1:f.wrap,D=(v.x+1+T)%T,q=v.x+1===T?f.wrap+1:f.wrap,oe={};return oe[new r.OverscaledTileID(f.overscaledZ,W,v.z,k,v.y).key]={backfilled:!1},oe[new r.OverscaledTileID(f.overscaledZ,q,v.z,D,v.y).key]={backfilled:!1},v.y>0&&(oe[new r.OverscaledTileID(f.overscaledZ,W,v.z,k,v.y-1).key]={backfilled:!1},oe[new r.OverscaledTileID(f.overscaledZ,f.wrap,v.z,v.x,v.y-1).key]={backfilled:!1},oe[new r.OverscaledTileID(f.overscaledZ,q,v.z,D,v.y-1).key]={backfilled:!1}),v.y+1<T&&(oe[new r.OverscaledTileID(f.overscaledZ,W,v.z,k,v.y+1).key]={backfilled:!1},oe[new r.OverscaledTileID(f.overscaledZ,f.wrap,v.z,v.x,v.y+1).key]={backfilled:!1},oe[new r.OverscaledTileID(f.overscaledZ,q,v.z,D,v.y+1).key]={backfilled:!1}),oe},p.prototype.unloadTile=function(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded",f.actor&&f.actor.send("removeDEMTile",{uid:f.uid,source:this.id})},p})(ke),re=(function(m){function p(f,v,T,k){m.call(this),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=T.getActor(),this.setEventedParent(k),this._data=v.data,this._options=r.extend({},v),this._collectResourceTiming=v.collectResourceTiming,this._resourceTiming=[],v.maxzoom!==void 0&&(this.maxzoom=v.maxzoom),v.type&&(this.type=v.type),v.attribution&&(this.attribution=v.attribution),this.promoteId=v.promoteId;var W=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:v.cluster||!1,geojsonVtOptions:{buffer:(v.buffer!==void 0?v.buffer:128)*W,tolerance:(v.tolerance!==void 0?v.tolerance:.375)*W,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:v.lineMetrics||!1,generateId:v.generateId||!1},superclusterOptions:{maxZoom:v.clusterMaxZoom!==void 0?Math.min(v.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,v.clusterMinPoints||2),extent:r.EXTENT,radius:(v.clusterRadius||50)*W,log:!1,generateId:v.generateId||!1},clusterProperties:v.clusterProperties,filter:v.filter},v.workerOptions)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.load=function(){var f=this;this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(v){if(v)f.fire(new r.ErrorEvent(v));else{var T={dataType:"source",sourceDataType:"metadata"};f._collectResourceTiming&&f._resourceTiming&&f._resourceTiming.length>0&&(T.resourceTiming=f._resourceTiming,f._resourceTiming=[]),f.fire(new r.Event("data",T))}}))},p.prototype.onAdd=function(f){this.map=f,this.load()},p.prototype.setData=function(f){var v=this;return this._data=f,this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(T){if(T)v.fire(new r.ErrorEvent(T));else{var k={dataType:"source",sourceDataType:"content"};v._collectResourceTiming&&v._resourceTiming&&v._resourceTiming.length>0&&(k.resourceTiming=v._resourceTiming,v._resourceTiming=[]),v.fire(new r.Event("data",k))}})),this},p.prototype.getClusterExpansionZoom=function(f,v){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},v),this},p.prototype.getClusterChildren=function(f,v){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},v),this},p.prototype.getClusterLeaves=function(f,v,T,k){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:v,offset:T},k),this},p.prototype._updateWorkerData=function(f){var v=this;this._loaded=!1;var T=r.extend({},this.workerOptions),k=this._data;typeof k=="string"?(T.request=this.map._requestManager.transformRequest(r.browser.resolveURL(k),r.ResourceType.Source),T.request.collectResourceTiming=this._collectResourceTiming):T.data=JSON.stringify(k),this.actor.send(this.type+".loadData",T,(function(W,D){v._removed||D&&D.abandoned||(v._loaded=!0,D&&D.resourceTiming&&D.resourceTiming[v.id]&&(v._resourceTiming=D.resourceTiming[v.id].slice(0)),v.actor.send(v.type+".coalesce",{source:T.source},null),f(W))}))},p.prototype.loaded=function(){return this._loaded},p.prototype.loadTile=function(f,v){var T=this,k=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(k,{type:this.type,uid:f.uid,tileID:f.tileID,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(W,D){return delete f.request,f.unloadVectorData(),f.aborted?v(null):W?v(W):(f.loadVectorData(D,T.map.painter,k==="reloadTile"),v(null))}))},p.prototype.abortTile=function(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0},p.prototype.unloadTile=function(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})},p.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},p.prototype.serialize=function(){return r.extend({},this._options,{type:this.type,data:this._data})},p.prototype.hasTransition=function(){return!1},p})(r.Evented),Q=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),J=(function(m){function p(f,v,T,k){m.call(this),this.id=f,this.dispatcher=T,this.coordinates=v.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(k),this.options=v}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.load=function(f,v){var T=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),(function(k,W){T._loaded=!0,k?T.fire(new r.ErrorEvent(k)):W&&(T.image=W,f&&(T.coordinates=f),v&&v(),T._finishLoading())}))},p.prototype.loaded=function(){return this._loaded},p.prototype.updateImage=function(f){var v=this;return this.image&&f.url?(this.options.url=f.url,this.load(f.coordinates,(function(){v.texture=null})),this):this},p.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))},p.prototype.onAdd=function(f){this.map=f,this.load()},p.prototype.setCoordinates=function(f){var v=this;this.coordinates=f;var T=f.map(r.MercatorCoordinate.fromLngLat);this.tileID=(function(W){for(var D=1/0,q=1/0,oe=-1/0,be=-1/0,ve=0,we=W;ve<we.length;ve+=1){var Oe=we[ve];D=Math.min(D,Oe.x),q=Math.min(q,Oe.y),oe=Math.max(oe,Oe.x),be=Math.max(be,Oe.y)}var We=Math.max(oe-D,be-q),He=Math.max(0,Math.floor(-Math.log(We)/Math.LN2)),Te=Math.pow(2,He);return new r.CanonicalTileID(He,Math.floor((D+oe)/2*Te),Math.floor((q+be)/2*Te))})(T),this.minzoom=this.maxzoom=this.tileID.z;var k=T.map((function(W){return v.tileID.getTilePoint(W)._round()}));return this._boundsArray=new r.StructArrayLayout4i8,this._boundsArray.emplaceBack(k[0].x,k[0].y,0,0),this._boundsArray.emplaceBack(k[1].x,k[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(k[3].x,k[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(k[2].x,k[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this},p.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var f=this.map.painter.context,v=f.gl;for(var T in this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,Q.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new r.Texture(f,this.image,v.RGBA),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE)),this.tiles){var k=this.tiles[T];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}},p.prototype.loadTile=function(f,v){this.tileID&&this.tileID.equals(f.tileID.canonical)?(this.tiles[String(f.tileID.wrap)]=f,f.buckets={},v(null)):(f.state="errored",v(null))},p.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return!1},p})(r.Evented),je=(function(m){function p(f,v,T,k){m.call(this,f,v,T,k),this.roundZoom=!0,this.type="video",this.options=v}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.load=function(){var f=this;this._loaded=!1;var v=this.options;this.urls=[];for(var T=0,k=v.urls;T<k.length;T+=1)this.urls.push(this.map._requestManager.transformRequest(k[T],r.ResourceType.Source).url);r.getVideo(this.urls,(function(W,D){f._loaded=!0,W?f.fire(new r.ErrorEvent(W)):D&&(f.video=D,f.video.loop=!0,f.video.setAttribute("playsinline",""),f.video.addEventListener("playing",(function(){f.map.triggerRepaint()})),f.map&&f.video.play(),f._finishLoading())}))},p.prototype.pause=function(){this.video&&this.video.pause()},p.prototype.play=function(){this.video&&this.video.play()},p.prototype.seek=function(f){if(this.video){var v=this.video.seekable;f<v.start(0)||f>v.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+v.start(0)+" and "+v.end(0)+"-second mark."))):this.video.currentTime=f}},p.prototype.getVideo=function(){return this.video},p.prototype.onAdd=function(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},p.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var f=this.map.painter.context,v=f.gl;for(var T in this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,Q.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE),v.texSubImage2D(v.TEXTURE_2D,0,0,0,v.RGBA,v.UNSIGNED_BYTE,this.video)):(this.texture=new r.Texture(f,this.video,v.RGBA),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE)),this.tiles){var k=this.tiles[T];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this.video&&!this.video.paused},p})(J),Qe=(function(m){function p(f,v,T,k){m.call(this,f,v,T,k),v.coordinates?Array.isArray(v.coordinates)&&v.coordinates.length===4&&!v.coordinates.some((function(W){return!Array.isArray(W)||W.length!==2||W.some((function(D){return typeof D!="number"}))}))||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+f,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+f,null,'missing required property "coordinates"'))),v.animate&&typeof v.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError("sources."+f,null,'optional "animate" property must be a boolean value'))),v.canvas?typeof v.canvas=="string"||v.canvas instanceof r.window.HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+f,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+f,null,'missing required property "canvas"'))),this.options=v,this.animate=v.animate===void 0||v.animate}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof r.window.HTMLCanvasElement?this.options.canvas:r.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},p.prototype.getCanvas=function(){return this.canvas},p.prototype.onAdd=function(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()},p.prototype.onRemove=function(){this.pause()},p.prototype.prepare=function(){var f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var v=this.map.painter.context,T=v.gl;for(var k in this.boundsBuffer||(this.boundsBuffer=v.createVertexBuffer(this._boundsArray,Q.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.Texture(v,this.canvas,T.RGBA,{premultiply:!0}),this.tiles){var W=this.tiles[k];W.state!=="loaded"&&(W.state="loaded",W.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this._playing},p.prototype._hasInvalidDimensions=function(){for(var f=0,v=[this.canvas.width,this.canvas.height];f<v.length;f+=1){var T=v[f];if(isNaN(T)||T<=0)return!0}return!1},p})(J),Je={vector:_e,raster:ke,"raster-dem":Ie,geojson:re,video:je,image:J,canvas:Qe};function kt(m,p){var f=r.identity([]);return r.translate(f,f,[1,1,0]),r.scale(f,f,[.5*m.width,.5*m.height,1]),r.multiply(f,f,m.calculatePosMatrix(p.toUnwrapped()))}function Pt(m,p,f,v,T,k){var W=(function(He,Te,Ue){if(He)for(var Ke=0,at=He;Ke<at.length;Ke+=1){var ut=Te[at[Ke]];if(ut&&ut.source===Ue&&ut.type==="fill-extrusion")return!0}else for(var st in Te){var dt=Te[st];if(dt.source===Ue&&dt.type==="fill-extrusion")return!0}return!1})(T&&T.layers,p,m.id),D=k.maxPitchScaleFactor(),q=m.tilesIn(v,D,W);q.sort(zt);for(var oe=[],be=0,ve=q;be<ve.length;be+=1){var we=ve[be];oe.push({wrappedTileID:we.tileID.wrapped().key,queryResults:we.tile.queryRenderedFeatures(p,f,m._state,we.queryGeometry,we.cameraQueryGeometry,we.scale,T,k,D,kt(m.transform,we.tileID))})}var Oe=(function(He){for(var Te={},Ue={},Ke=0,at=He;Ke<at.length;Ke+=1){var ut=at[Ke],st=ut.queryResults,dt=ut.wrappedTileID,bt=Ue[dt]=Ue[dt]||{};for(var Ft in st)for(var Gt=st[Ft],ea=bt[Ft]=bt[Ft]||{},ya=Te[Ft]=Te[Ft]||[],Ca=0,wa=Gt;Ca<wa.length;Ca+=1){var vi=wa[Ca];ea[vi.featureIndex]||(ea[vi.featureIndex]=!0,ya.push(vi))}}return Te})(oe);for(var We in Oe)Oe[We].forEach((function(He){var Te=He.feature,Ue=m.getFeatureState(Te.layer["source-layer"],Te.id);Te.source=Te.layer.source,Te.layer["source-layer"]&&(Te.sourceLayer=Te.layer["source-layer"]),Te.state=Ue}));return Oe}function zt(m,p){var f=m.tileID,v=p.tileID;return f.overscaledZ-v.overscaledZ||f.canonical.y-v.canonical.y||f.wrap-v.wrap||f.canonical.x-v.canonical.x}var Nt=function(m,p){this.max=m,this.onRemove=p,this.reset()};Nt.prototype.reset=function(){for(var m in this.data)for(var p=0,f=this.data[m];p<f.length;p+=1){var v=f[p];v.timeout&&clearTimeout(v.timeout),this.onRemove(v.value)}return this.data={},this.order=[],this},Nt.prototype.add=function(m,p,f){var v=this,T=m.wrapped().key;this.data[T]===void 0&&(this.data[T]=[]);var k={value:p,timeout:void 0};if(f!==void 0&&(k.timeout=setTimeout((function(){v.remove(m,k)}),f)),this.data[T].push(k),this.order.push(T),this.order.length>this.max){var W=this._getAndRemoveByKey(this.order[0]);W&&this.onRemove(W)}return this},Nt.prototype.has=function(m){return m.wrapped().key in this.data},Nt.prototype.getAndRemove=function(m){return this.has(m)?this._getAndRemoveByKey(m.wrapped().key):null},Nt.prototype._getAndRemoveByKey=function(m){var p=this.data[m].shift();return p.timeout&&clearTimeout(p.timeout),this.data[m].length===0&&delete this.data[m],this.order.splice(this.order.indexOf(m),1),p.value},Nt.prototype.getByKey=function(m){var p=this.data[m];return p?p[0].value:null},Nt.prototype.get=function(m){return this.has(m)?this.data[m.wrapped().key][0].value:null},Nt.prototype.remove=function(m,p){if(!this.has(m))return this;var f=m.wrapped().key,v=p===void 0?0:this.data[f].indexOf(p),T=this.data[f][v];return this.data[f].splice(v,1),T.timeout&&clearTimeout(T.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(T.value),this.order.splice(this.order.indexOf(f),1),this},Nt.prototype.setMaxSize=function(m){for(this.max=m;this.order.length>this.max;){var p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this},Nt.prototype.filter=function(m){var p=[];for(var f in this.data)for(var v=0,T=this.data[f];v<T.length;v+=1){var k=T[v];m(k.value)||p.push(k)}for(var W=0,D=p;W<D.length;W+=1){var q=D[W];this.remove(q.value.tileID,q)}};var ga=function(m,p,f){this.context=m;var v=m.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),m.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};ga.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ga.prototype.updateData=function(m){var p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,m.arrayBuffer)},ga.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ta={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Fe=function(m,p,f,v){this.length=p.length,this.attributes=f,this.itemSize=p.bytesPerElement,this.dynamicDraw=v,this.context=m;var T=m.gl;this.buffer=T.createBuffer(),m.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};Fe.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Fe.prototype.updateData=function(m){var p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,m.arrayBuffer)},Fe.prototype.enableAttributes=function(m,p){for(var f=0;f<this.attributes.length;f++){var v=p.attributes[this.attributes[f].name];v!==void 0&&m.enableVertexAttribArray(v)}},Fe.prototype.setVertexAttribPointers=function(m,p,f){for(var v=0;v<this.attributes.length;v++){var T=this.attributes[v],k=p.attributes[T.name];k!==void 0&&m.vertexAttribPointer(k,T.components,m[ta[T.type]],!1,this.itemSize,T.offset+this.itemSize*(f||0))}},Fe.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var De=function(m){this.gl=m.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};De.prototype.get=function(){return this.current},De.prototype.set=function(m){},De.prototype.getDefault=function(){return this.default},De.prototype.setDefault=function(){this.set(this.default)};var z=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return r.Color.transparent},p.prototype.set=function(f){var v=this.current;(f.r!==v.r||f.g!==v.g||f.b!==v.b||f.a!==v.a||this.dirty)&&(this.gl.clearColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)},p})(De),Ze=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return 1},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.clearDepth(f),this.current=f,this.dirty=!1)},p})(De),Re=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return 0},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.clearStencil(f),this.current=f,this.dirty=!1)},p})(De),fe=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return[!0,!0,!0,!0]},p.prototype.set=function(f){var v=this.current;(f[0]!==v[0]||f[1]!==v[1]||f[2]!==v[2]||f[3]!==v[3]||this.dirty)&&(this.gl.colorMask(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)},p})(De),ie=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return!0},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.depthMask(f),this.current=f,this.dirty=!1)},p})(De),Ce=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return 255},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.stencilMask(f),this.current=f,this.dirty=!1)},p})(De),Ee=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},p.prototype.set=function(f){var v=this.current;(f.func!==v.func||f.ref!==v.ref||f.mask!==v.mask||this.dirty)&&(this.gl.stencilFunc(f.func,f.ref,f.mask),this.current=f,this.dirty=!1)},p})(De),Ne=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){var f=this.gl;return[f.KEEP,f.KEEP,f.KEEP]},p.prototype.set=function(f){var v=this.current;(f[0]!==v[0]||f[1]!==v[1]||f[2]!==v[2]||this.dirty)&&(this.gl.stencilOp(f[0],f[1],f[2]),this.current=f,this.dirty=!1)},p})(De),Ve=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(f){if(f!==this.current||this.dirty){var v=this.gl;f?v.enable(v.STENCIL_TEST):v.disable(v.STENCIL_TEST),this.current=f,this.dirty=!1}},p})(De),$e=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return[0,1]},p.prototype.set=function(f){var v=this.current;(f[0]!==v[0]||f[1]!==v[1]||this.dirty)&&(this.gl.depthRange(f[0],f[1]),this.current=f,this.dirty=!1)},p})(De),ht=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(f){if(f!==this.current||this.dirty){var v=this.gl;f?v.enable(v.DEPTH_TEST):v.disable(v.DEPTH_TEST),this.current=f,this.dirty=!1}},p})(De),_t=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.LESS},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.depthFunc(f),this.current=f,this.dirty=!1)},p})(De),Et=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(f){if(f!==this.current||this.dirty){var v=this.gl;f?v.enable(v.BLEND):v.disable(v.BLEND),this.current=f,this.dirty=!1}},p})(De),ca=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){var f=this.gl;return[f.ONE,f.ZERO]},p.prototype.set=function(f){var v=this.current;(f[0]!==v[0]||f[1]!==v[1]||this.dirty)&&(this.gl.blendFunc(f[0],f[1]),this.current=f,this.dirty=!1)},p})(De),ua=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return r.Color.transparent},p.prototype.set=function(f){var v=this.current;(f.r!==v.r||f.g!==v.g||f.b!==v.b||f.a!==v.a||this.dirty)&&(this.gl.blendColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)},p})(De),yi=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.FUNC_ADD},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.blendEquation(f),this.current=f,this.dirty=!1)},p})(De),Xi=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(f){if(f!==this.current||this.dirty){var v=this.gl;f?v.enable(v.CULL_FACE):v.disable(v.CULL_FACE),this.current=f,this.dirty=!1}},p})(De),Ri=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.BACK},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.cullFace(f),this.current=f,this.dirty=!1)},p})(De),En=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.CCW},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.frontFace(f),this.current=f,this.dirty=!1)},p})(De),_i=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)},p})(De),nr=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.TEXTURE0},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.activeTexture(f),this.current=f,this.dirty=!1)},p})(De),Ci=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){var f=this.gl;return[0,0,f.drawingBufferWidth,f.drawingBufferHeight]},p.prototype.set=function(f){var v=this.current;(f[0]!==v[0]||f[1]!==v[1]||f[2]!==v[2]||f[3]!==v[3]||this.dirty)&&(this.gl.viewport(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)},p})(De),Ti=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){if(f!==this.current||this.dirty){var v=this.gl;v.bindFramebuffer(v.FRAMEBUFFER,f),this.current=f,this.dirty=!1}},p})(De),Dr=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){if(f!==this.current||this.dirty){var v=this.gl;v.bindRenderbuffer(v.RENDERBUFFER,f),this.current=f,this.dirty=!1}},p})(De),vs=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){if(f!==this.current||this.dirty){var v=this.gl;v.bindTexture(v.TEXTURE_2D,f),this.current=f,this.dirty=!1}},p})(De),To=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){if(f!==this.current||this.dirty){var v=this.gl;v.bindBuffer(v.ARRAY_BUFFER,f),this.current=f,this.dirty=!1}},p})(De),gr=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){var v=this.gl;v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,f),this.current=f,this.dirty=!1},p})(De),Zn=(function(m){function p(f){m.call(this,f),this.vao=f.extVertexArrayObject}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){this.vao&&(f!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(f),this.current=f,this.dirty=!1)},p})(De),zn=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return 4},p.prototype.set=function(f){if(f!==this.current||this.dirty){var v=this.gl;v.pixelStorei(v.UNPACK_ALIGNMENT,f),this.current=f,this.dirty=!1}},p})(De),pr=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(f){if(f!==this.current||this.dirty){var v=this.gl;v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f),this.current=f,this.dirty=!1}},p})(De),Ll=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(f){if(f!==this.current||this.dirty){var v=this.gl;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,f),this.current=f,this.dirty=!1}},p})(De),Ii=(function(m){function p(f,v){m.call(this,f),this.context=f,this.parent=v}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p})(De),ee=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.setDirty=function(){this.dirty=!0},p.prototype.set=function(f){if(f!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var v=this.gl;v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,f,0),this.current=f,this.dirty=!1}},p})(Ii),ue=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.set=function(f){if(f!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var v=this.gl;v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.RENDERBUFFER,f),this.current=f,this.dirty=!1}},p})(Ii),ge=function(m,p,f,v){this.context=m,this.width=p,this.height=f;var T=this.framebuffer=m.gl.createFramebuffer();this.colorAttachment=new ee(m,T),v&&(this.depthAttachment=new ue(m,T))};ge.prototype.destroy=function(){var m=this.context.gl,p=this.colorAttachment.get();if(p&&m.deleteTexture(p),this.depthAttachment){var f=this.depthAttachment.get();f&&m.deleteRenderbuffer(f)}m.deleteFramebuffer(this.framebuffer)};var xe=function(m,p,f){this.func=m,this.mask=p,this.range=f};xe.ReadOnly=!1,xe.ReadWrite=!0,xe.disabled=new xe(519,xe.ReadOnly,[0,1]);var Se=function(m,p,f,v,T,k){this.test=m,this.ref=p,this.mask=f,this.fail=v,this.depthFail=T,this.pass=k};Se.disabled=new Se({func:519,mask:0},0,0,7680,7680,7680);var Xe=function(m,p,f){this.blendFunction=m,this.blendColor=p,this.mask=f};Xe.disabled=new Xe(Xe.Replace=[1,0],r.Color.transparent,[!1,!1,!1,!1]),Xe.unblended=new Xe(Xe.Replace,r.Color.transparent,[!0,!0,!0,!0]),Xe.alphaBlended=new Xe([1,771],r.Color.transparent,[!0,!0,!0,!0]);var ze=function(m,p,f){this.enable=m,this.mode=p,this.frontFace=f};ze.disabled=new ze(!1,1029,2305),ze.backCCW=new ze(!0,1029,2305);var pe=function(m){this.gl=m,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new z(this),this.clearDepth=new Ze(this),this.clearStencil=new Re(this),this.colorMask=new fe(this),this.depthMask=new ie(this),this.stencilMask=new Ce(this),this.stencilFunc=new Ee(this),this.stencilOp=new Ne(this),this.stencilTest=new Ve(this),this.depthRange=new $e(this),this.depthTest=new ht(this),this.depthFunc=new _t(this),this.blend=new Et(this),this.blendFunc=new ca(this),this.blendColor=new ua(this),this.blendEquation=new yi(this),this.cullFace=new Xi(this),this.cullFaceSide=new Ri(this),this.frontFace=new En(this),this.program=new _i(this),this.activeTexture=new nr(this),this.viewport=new Ci(this),this.bindFramebuffer=new Ti(this),this.bindRenderbuffer=new Dr(this),this.bindTexture=new vs(this),this.bindVertexBuffer=new To(this),this.bindElementBuffer=new gr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Zn(this),this.pixelStoreUnpack=new zn(this),this.pixelStoreUnpackPremultiplyAlpha=new pr(this),this.pixelStoreUnpackFlipY=new Ll(this),this.extTextureFilterAnisotropic=m.getExtension("EXT_texture_filter_anisotropic")||m.getExtension("MOZ_EXT_texture_filter_anisotropic")||m.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=m.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=m.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(m.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=m.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=m.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=m.getParameter(m.MAX_TEXTURE_SIZE)};pe.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},pe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},pe.prototype.createIndexBuffer=function(m,p){return new ga(this,m,p)},pe.prototype.createVertexBuffer=function(m,p,f){return new Fe(this,m,p,f)},pe.prototype.createRenderbuffer=function(m,p,f){var v=this.gl,T=v.createRenderbuffer();return this.bindRenderbuffer.set(T),v.renderbufferStorage(v.RENDERBUFFER,m,p,f),this.bindRenderbuffer.set(null),T},pe.prototype.createFramebuffer=function(m,p,f){return new ge(this,m,p,f)},pe.prototype.clear=function(m){var p=m.color,f=m.depth,v=this.gl,T=0;p&&(T|=v.COLOR_BUFFER_BIT,this.clearColor.set(p),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(T|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),v.clear(T)},pe.prototype.setCullFace=function(m){m.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(m.mode),this.frontFace.set(m.frontFace))},pe.prototype.setDepthMode=function(m){m.func!==this.gl.ALWAYS||m.mask?(this.depthTest.set(!0),this.depthFunc.set(m.func),this.depthMask.set(m.mask),this.depthRange.set(m.range)):this.depthTest.set(!1)},pe.prototype.setStencilMode=function(m){m.test.func!==this.gl.ALWAYS||m.mask?(this.stencilTest.set(!0),this.stencilMask.set(m.mask),this.stencilOp.set([m.fail,m.depthFail,m.pass]),this.stencilFunc.set({func:m.test.func,ref:m.ref,mask:m.test.mask})):this.stencilTest.set(!1)},pe.prototype.setColorMode=function(m){r.deepEqual(m.blendFunction,Xe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(m.blendFunction),this.blendColor.set(m.blendColor)),this.colorMask.set(m.mask)},pe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ae=(function(m){function p(f,v,T){var k=this;m.call(this),this.id=f,this.dispatcher=T,this.on("data",(function(W){W.dataType==="source"&&W.sourceDataType==="metadata"&&(k._sourceLoaded=!0),k._sourceLoaded&&!k._paused&&W.dataType==="source"&&W.sourceDataType==="content"&&(k.reload(),k.transform&&k.update(k.transform))})),this.on("error",(function(){k._sourceErrored=!0})),this._source=(function(W,D,q,oe){var be=new Je[D.type](W,D,q,oe);if(be.id!==W)throw new Error("Expected Source id to be "+W+" instead of "+be.id);return r.bindAll(["load","abort","unload","serialize","prepare"],be),be})(f,v,T,this),this._tiles={},this._cache=new Nt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new r.SourceFeatureState}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.onAdd=function(f){this.map=f,this._maxTileCacheSize=f?f._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(f)},p.prototype.onRemove=function(f){this._source&&this._source.onRemove&&this._source.onRemove(f)},p.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var f in this._tiles){var v=this._tiles[f];if(v.state!=="loaded"&&v.state!=="errored")return!1}return!0},p.prototype.getSource=function(){return this._source},p.prototype.pause=function(){this._paused=!0},p.prototype.resume=function(){if(this._paused){var f=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,f&&this.reload(),this.transform&&this.update(this.transform)}},p.prototype._loadTile=function(f,v){return this._source.loadTile(f,v)},p.prototype._unloadTile=function(f){if(this._source.unloadTile)return this._source.unloadTile(f,(function(){}))},p.prototype._abortTile=function(f){if(this._source.abortTile)return this._source.abortTile(f,(function(){}))},p.prototype.serialize=function(){return this._source.serialize()},p.prototype.prepare=function(f){for(var v in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var T=this._tiles[v];T.upload(f),T.prepare(this.map.style.imageManager)}},p.prototype.getIds=function(){return r.values(this._tiles).map((function(f){return f.tileID})).sort(tt).map((function(f){return f.key}))},p.prototype.getRenderableIds=function(f){var v=this,T=[];for(var k in this._tiles)this._isIdRenderable(k,f)&&T.push(this._tiles[k]);return f?T.sort((function(W,D){var q=W.tileID,oe=D.tileID,be=new r.Point(q.canonical.x,q.canonical.y)._rotate(v.transform.angle),ve=new r.Point(oe.canonical.x,oe.canonical.y)._rotate(v.transform.angle);return q.overscaledZ-oe.overscaledZ||ve.y-be.y||ve.x-be.x})).map((function(W){return W.tileID.key})):T.map((function(W){return W.tileID})).sort(tt).map((function(W){return W.key}))},p.prototype.hasRenderableParent=function(f){var v=this.findLoadedParent(f,0);return!!v&&this._isIdRenderable(v.tileID.key)},p.prototype._isIdRenderable=function(f,v){return this._tiles[f]&&this._tiles[f].hasData()&&!this._coveredTiles[f]&&(v||!this._tiles[f].holdingForFade())},p.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var f in this._cache.reset(),this._tiles)this._tiles[f].state!=="errored"&&this._reloadTile(f,"reloading")},p.prototype._reloadTile=function(f,v){var T=this._tiles[f];T&&(T.state!=="loading"&&(T.state=v),this._loadTile(T,this._tileLoaded.bind(this,T,f,v)))},p.prototype._tileLoaded=function(f,v,T,k){if(k)return f.state="errored",void(k.status!==404?this._source.fire(new r.ErrorEvent(k,{tile:f})):this.update(this.transform));f.timeAdded=r.browser.now(),T==="expired"&&(f.refreshedUponExpiration=!0),this._setTileReloadTimer(v,f),this.getSource().type==="raster-dem"&&f.dem&&this._backfillDEM(f),this._state.initializeTileState(f,this.map?this.map.painter:null),this._source.fire(new r.Event("data",{dataType:"source",tile:f,coord:f.tileID}))},p.prototype._backfillDEM=function(f){for(var v=this.getRenderableIds(),T=0;T<v.length;T++){var k=v[T];if(f.neighboringTiles&&f.neighboringTiles[k]){var W=this.getTileByID(k);D(f,W),D(W,f)}}function D(q,oe){q.needsHillshadePrepare=!0;var be=oe.tileID.canonical.x-q.tileID.canonical.x,ve=oe.tileID.canonical.y-q.tileID.canonical.y,we=Math.pow(2,q.tileID.canonical.z),Oe=oe.tileID.key;be===0&&ve===0||Math.abs(ve)>1||(Math.abs(be)>1&&(Math.abs(be+we)===1?be+=we:Math.abs(be-we)===1&&(be-=we)),oe.dem&&q.dem&&(q.dem.backfillBorder(oe.dem,be,ve),q.neighboringTiles&&q.neighboringTiles[Oe]&&(q.neighboringTiles[Oe].backfilled=!0)))}},p.prototype.getTile=function(f){return this.getTileByID(f.key)},p.prototype.getTileByID=function(f){return this._tiles[f]},p.prototype._retainLoadedChildren=function(f,v,T,k){for(var W in this._tiles){var D=this._tiles[W];if(!(k[W]||!D.hasData()||D.tileID.overscaledZ<=v||D.tileID.overscaledZ>T)){for(var q=D.tileID;D&&D.tileID.overscaledZ>v+1;){var oe=D.tileID.scaledTo(D.tileID.overscaledZ-1);(D=this._tiles[oe.key])&&D.hasData()&&(q=oe)}for(var be=q;be.overscaledZ>v;)if(f[(be=be.scaledTo(be.overscaledZ-1)).key]){k[q.key]=q;break}}}},p.prototype.findLoadedParent=function(f,v){if(f.key in this._loadedParentTiles){var T=this._loadedParentTiles[f.key];return T&&T.tileID.overscaledZ>=v?T:null}for(var k=f.overscaledZ-1;k>=v;k--){var W=f.scaledTo(k),D=this._getLoadedTile(W);if(D)return D}},p.prototype._getLoadedTile=function(f){var v=this._tiles[f.key];return v&&v.hasData()?v:this._cache.getByKey(f.wrapped().key)},p.prototype.updateCacheSize=function(f){var v=Math.ceil(f.width/this._source.tileSize)+1,T=Math.ceil(f.height/this._source.tileSize)+1,k=Math.floor(v*T*5),W=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,k):k;this._cache.setMaxSize(W)},p.prototype.handleWrapJump=function(f){var v=Math.round((f-(this._prevLng===void 0?f:this._prevLng))/360);if(this._prevLng=f,v){var T={};for(var k in this._tiles){var W=this._tiles[k];W.tileID=W.tileID.unwrapTo(W.tileID.wrap+v),T[W.tileID.key]=W}for(var D in this._tiles=T,this._timers)clearTimeout(this._timers[D]),delete this._timers[D];for(var q in this._tiles)this._setTileReloadTimer(q,this._tiles[q])}},p.prototype.update=function(f){var v=this;if(this.transform=f,this._sourceLoaded&&!this._paused){var T;this.updateCacheSize(f),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?T=f.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(bt){return new r.OverscaledTileID(bt.canonical.z,bt.wrap,bt.canonical.z,bt.canonical.x,bt.canonical.y)})):(T=f.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(T=T.filter((function(bt){return v._source.hasTile(bt)})))):T=[];var k=f.coveringZoomLevel(this._source),W=Math.max(k-p.maxOverzooming,this._source.minzoom),D=Math.max(k+p.maxUnderzooming,this._source.minzoom),q=this._updateRetainedTiles(T,k);if(vt(this._source.type)){for(var oe={},be={},ve=0,we=Object.keys(q);ve<we.length;ve+=1){var Oe=we[ve],We=q[Oe],He=this._tiles[Oe];if(He&&!(He.fadeEndTime&&He.fadeEndTime<=r.browser.now())){var Te=this.findLoadedParent(We,W);Te&&(this._addTile(Te.tileID),oe[Te.tileID.key]=Te.tileID),be[Oe]=We}}for(var Ue in this._retainLoadedChildren(be,k,D,q),oe)q[Ue]||(this._coveredTiles[Ue]=!0,q[Ue]=oe[Ue])}for(var Ke in q)this._tiles[Ke].clearFadeHold();for(var at=0,ut=r.keysDifference(this._tiles,q);at<ut.length;at+=1){var st=ut[at],dt=this._tiles[st];dt.hasSymbolBuckets&&!dt.holdingForFade()?dt.setHoldDuration(this.map._fadeDuration):dt.hasSymbolBuckets&&!dt.symbolFadeFinished()||this._removeTile(st)}this._updateLoadedParentTileCache()}},p.prototype.releaseSymbolFadeTiles=function(){for(var f in this._tiles)this._tiles[f].holdingForFade()&&this._removeTile(f)},p.prototype._updateRetainedTiles=function(f,v){for(var T={},k={},W=Math.max(v-p.maxOverzooming,this._source.minzoom),D=Math.max(v+p.maxUnderzooming,this._source.minzoom),q={},oe=0,be=f;oe<be.length;oe+=1){var ve=be[oe],we=this._addTile(ve);T[ve.key]=ve,we.hasData()||v<this._source.maxzoom&&(q[ve.key]=ve)}this._retainLoadedChildren(q,v,D,T);for(var Oe=0,We=f;Oe<We.length;Oe+=1){var He=We[Oe],Te=this._tiles[He.key];if(!Te.hasData()){if(v+1>this._source.maxzoom){var Ue=He.children(this._source.maxzoom)[0],Ke=this.getTile(Ue);if(Ke&&Ke.hasData()){T[Ue.key]=Ue;continue}}else{var at=He.children(this._source.maxzoom);if(T[at[0].key]&&T[at[1].key]&&T[at[2].key]&&T[at[3].key])continue}for(var ut=Te.wasRequested(),st=He.overscaledZ-1;st>=W;--st){var dt=He.scaledTo(st);if(k[dt.key]||(k[dt.key]=!0,!(Te=this.getTile(dt))&&ut&&(Te=this._addTile(dt)),Te&&(T[dt.key]=dt,ut=Te.wasRequested(),Te.hasData())))break}}}return T},p.prototype._updateLoadedParentTileCache=function(){for(var f in this._loadedParentTiles={},this._tiles){for(var v=[],T=void 0,k=this._tiles[f].tileID;k.overscaledZ>0;){if(k.key in this._loadedParentTiles){T=this._loadedParentTiles[k.key];break}v.push(k.key);var W=k.scaledTo(k.overscaledZ-1);if(T=this._getLoadedTile(W))break;k=W}for(var D=0,q=v;D<q.length;D+=1)this._loadedParentTiles[q[D]]=T}},p.prototype._addTile=function(f){var v=this._tiles[f.key];if(v)return v;(v=this._cache.getAndRemove(f))&&(this._setTileReloadTimer(f.key,v),v.tileID=f,this._state.initializeTileState(v,this.map?this.map.painter:null),this._cacheTimers[f.key]&&(clearTimeout(this._cacheTimers[f.key]),delete this._cacheTimers[f.key],this._setTileReloadTimer(f.key,v)));var T=!!v;return T||(v=new r.Tile(f,this._source.tileSize*f.overscaleFactor()),this._loadTile(v,this._tileLoaded.bind(this,v,f.key,v.state))),v?(v.uses++,this._tiles[f.key]=v,T||this._source.fire(new r.Event("dataloading",{tile:v,coord:v.tileID,dataType:"source"})),v):null},p.prototype._setTileReloadTimer=function(f,v){var T=this;f in this._timers&&(clearTimeout(this._timers[f]),delete this._timers[f]);var k=v.getExpiryTimeout();k&&(this._timers[f]=setTimeout((function(){T._reloadTile(f,"expired"),delete T._timers[f]}),k))},p.prototype._removeTile=function(f){var v=this._tiles[f];v&&(v.uses--,delete this._tiles[f],this._timers[f]&&(clearTimeout(this._timers[f]),delete this._timers[f]),v.uses>0||(v.hasData()&&v.state!=="reloading"?this._cache.add(v.tileID,v,v.getExpiryTimeout()):(v.aborted=!0,this._abortTile(v),this._unloadTile(v))))},p.prototype.clearTiles=function(){for(var f in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(f);this._cache.reset()},p.prototype.tilesIn=function(f,v,T){var k=this,W=[],D=this.transform;if(!D)return W;for(var q=T?D.getCameraQueryGeometry(f):f,oe=f.map((function(st){return D.pointCoordinate(st)})),be=q.map((function(st){return D.pointCoordinate(st)})),ve=this.getIds(),we=1/0,Oe=1/0,We=-1/0,He=-1/0,Te=0,Ue=be;Te<Ue.length;Te+=1){var Ke=Ue[Te];we=Math.min(we,Ke.x),Oe=Math.min(Oe,Ke.y),We=Math.max(We,Ke.x),He=Math.max(He,Ke.y)}for(var at=function(st){var dt=k._tiles[ve[st]];if(!dt.holdingForFade()){var bt=dt.tileID,Ft=Math.pow(2,D.zoom-dt.tileID.overscaledZ),Gt=v*dt.queryPadding*r.EXTENT/dt.tileSize/Ft,ea=[bt.getTilePoint(new r.MercatorCoordinate(we,Oe)),bt.getTilePoint(new r.MercatorCoordinate(We,He))];if(ea[0].x-Gt<r.EXTENT&&ea[0].y-Gt<r.EXTENT&&ea[1].x+Gt>=0&&ea[1].y+Gt>=0){var ya=oe.map((function(wa){return bt.getTilePoint(wa)})),Ca=be.map((function(wa){return bt.getTilePoint(wa)}));W.push({tile:dt,tileID:bt,queryGeometry:ya,cameraQueryGeometry:Ca,scale:Ft})}}},ut=0;ut<ve.length;ut++)at(ut);return W},p.prototype.getVisibleCoordinates=function(f){for(var v=this,T=this.getRenderableIds(f).map((function(q){return v._tiles[q].tileID})),k=0,W=T;k<W.length;k+=1){var D=W[k];D.posMatrix=this.transform.calculatePosMatrix(D.toUnwrapped())}return T},p.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(vt(this._source.type))for(var f in this._tiles){var v=this._tiles[f];if(v.fadeEndTime!==void 0&&v.fadeEndTime>=r.browser.now())return!0}return!1},p.prototype.setFeatureState=function(f,v,T){this._state.updateState(f=f||"_geojsonTileLayer",v,T)},p.prototype.removeFeatureState=function(f,v,T){this._state.removeFeatureState(f=f||"_geojsonTileLayer",v,T)},p.prototype.getFeatureState=function(f,v){return this._state.getState(f=f||"_geojsonTileLayer",v)},p.prototype.setDependencies=function(f,v,T){var k=this._tiles[f];k&&k.setDependencies(v,T)},p.prototype.reloadTilesForDependencies=function(f,v){for(var T in this._tiles)this._tiles[T].hasDependency(f,v)&&this._reloadTile(T,"reloading");this._cache.filter((function(k){return!k.hasDependency(f,v)}))},p})(r.Evented);function tt(m,p){var f=Math.abs(2*m.wrap)-+(m.wrap<0),v=Math.abs(2*p.wrap)-+(p.wrap<0);return m.overscaledZ-p.overscaledZ||v-f||p.canonical.y-m.canonical.y||p.canonical.x-m.canonical.x}function vt(m){return m==="raster"||m==="image"||m==="video"}function At(){return new r.window.Worker(Gf.workerUrl)}Ae.maxOverzooming=10,Ae.maxUnderzooming=3;var ct="mapboxgl_preloaded_worker_pool",wt=function(){this.active={}};wt.prototype.acquire=function(m){if(!this.workers)for(this.workers=[];this.workers.length<wt.workerCount;)this.workers.push(new At);return this.active[m]=!0,this.workers.slice()},wt.prototype.release=function(m){delete this.active[m],this.numActive()===0&&(this.workers.forEach((function(p){p.terminate()})),this.workers=null)},wt.prototype.isPreloaded=function(){return!!this.active[ct]},wt.prototype.numActive=function(){return Object.keys(this.active).length};var Jt,aa=Math.floor(r.browser.hardwareConcurrency/2);function mt(){return Jt||(Jt=new wt),Jt}function jt(m,p){var f={};for(var v in m)v!=="ref"&&(f[v]=m[v]);return r.refProperties.forEach((function(T){T in p&&(f[T]=p[T])})),f}function Ut(m){m=m.slice();for(var p=Object.create(null),f=0;f<m.length;f++)p[m[f].id]=m[f];for(var v=0;v<m.length;v++)"ref"in m[v]&&(m[v]=jt(m[v],p[m[v].ref]));return m}wt.workerCount=Math.max(Math.min(aa,6),1);var Xt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ot(m,p,f){f.push({command:Xt.addSource,args:[m,p[m]]})}function Me(m,p,f){p.push({command:Xt.removeSource,args:[m]}),f[m]=!0}function yt(m,p,f,v){Me(m,f,v),Ot(m,p,f)}function Yt(m,p,f){var v;for(v in m[f])if(m[f].hasOwnProperty(v)&&v!=="data"&&!r.deepEqual(m[f][v],p[f][v]))return!1;for(v in p[f])if(p[f].hasOwnProperty(v)&&v!=="data"&&!r.deepEqual(m[f][v],p[f][v]))return!1;return!0}function fa(m,p,f,v,T,k){var W;for(W in p=p||{},m=m||{})m.hasOwnProperty(W)&&(r.deepEqual(m[W],p[W])||f.push({command:k,args:[v,W,p[W],T]}));for(W in p)p.hasOwnProperty(W)&&!m.hasOwnProperty(W)&&(r.deepEqual(m[W],p[W])||f.push({command:k,args:[v,W,p[W],T]}))}function Ba(m){return m.id}function Aa(m,p){return m[p.id]=p,m}var $i=function(m,p){this.reset(m,p)};$i.prototype.reset=function(m,p){this.points=m||[],this._distances=[0];for(var f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding},$i.prototype.lerp=function(m){if(this.points.length===1)return this.points[0];m=r.clamp(m,0,1);for(var p=1,f=this._distances[p],v=m*this.paddedLength+this.padding;f<v&&p<this._distances.length;)f=this._distances[++p];var T=p-1,k=this._distances[T],W=f-k,D=W>0?(v-k)/W:0;return this.points[T].mult(1-D).add(this.points[p].mult(D))};var si=function(m,p,f){var v=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(m/f),this.yCellCount=Math.ceil(p/f);for(var k=0;k<this.xCellCount*this.yCellCount;k++)v.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=m,this.height=p,this.xScale=this.xCellCount/m,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0};function an(m,p,f,v,T){var k=r.create();return p?(r.scale(k,k,[1/T,1/T,1]),f||r.rotateZ(k,k,v.angle)):r.multiply(k,v.labelPlaneMatrix,m),k}function ki(m,p,f,v,T){if(p){var k=r.clone(m);return r.scale(k,k,[T,T,1]),f||r.rotateZ(k,k,-v.angle),k}return v.glCoordMatrix}function Ea(m,p){var f=[m.x,m.y,0,1];Er(f,f,p);var v=f[3];return{point:new r.Point(f[0]/v,f[1]/v),signedDistanceFromCamera:v}}function bi(m,p){return .5+m/p*.5}function Vr(m,p){var f=m[0]/m[3],v=m[1]/m[3];return f>=-p[0]&&f<=p[0]&&v>=-p[1]&&v<=p[1]}function M_(m,p,f,v,T,k,W,D){var q=v?m.textSizeData:m.iconSizeData,oe=r.evaluateSizeForZoom(q,f.transform.zoom),be=[256/f.width*2+1,256/f.height*2+1],ve=v?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;ve.clear();for(var we=m.lineVertexArray,Oe=v?m.text.placedSymbolArray:m.icon.placedSymbolArray,We=f.transform.width/f.transform.height,He=!1,Te=0;Te<Oe.length;Te++){var Ue=Oe.get(Te);if(Ue.hidden||Ue.writingMode===r.WritingMode.vertical&&!He)ss(Ue.numGlyphs,ve);else{He=!1;var Ke=[Ue.anchorX,Ue.anchorY,0,1];if(r.transformMat4(Ke,Ke,p),Vr(Ke,be)){var at=bi(f.transform.cameraToCenterDistance,Ke[3]),ut=r.evaluateSizeForFeature(q,oe,Ue),st=W?ut/at:ut*at,dt=new r.Point(Ue.anchorX,Ue.anchorY),bt=Ea(dt,T).point,Ft={},Gt=$p(Ue,st,!1,D,p,T,k,m.glyphOffsetArray,we,ve,bt,dt,Ft,We);He=Gt.useVertical,(Gt.notEnoughRoom||He||Gt.needsFlipping&&$p(Ue,st,!0,D,p,T,k,m.glyphOffsetArray,we,ve,bt,dt,Ft,We).notEnoughRoom)&&ss(Ue.numGlyphs,ve)}else ss(Ue.numGlyphs,ve)}}v?m.text.dynamicLayoutVertexBuffer.updateData(ve):m.icon.dynamicLayoutVertexBuffer.updateData(ve)}function Tr(m,p,f,v,T,k,W,D,q,oe,be){var ve=D.glyphStartIndex+D.numGlyphs,we=D.lineStartIndex,Oe=D.lineStartIndex+D.lineLength,We=p.getoffsetX(D.glyphStartIndex),He=p.getoffsetX(ve-1),Te=Un(m*We,f,v,T,k,W,D.segment,we,Oe,q,oe,be);if(!Te)return null;var Ue=Un(m*He,f,v,T,k,W,D.segment,we,Oe,q,oe,be);return Ue?{first:Te,last:Ue}:null}function xs(m,p,f,v){return m===r.WritingMode.horizontal&&Math.abs(f.y-p.y)>Math.abs(f.x-p.x)*v?{useVertical:!0}:(m===r.WritingMode.vertical?p.y<f.y:p.x>f.x)?{needsFlipping:!0}:null}function $p(m,p,f,v,T,k,W,D,q,oe,be,ve,we,Oe){var We,He=p/24,Te=m.lineOffsetX*He,Ue=m.lineOffsetY*He;if(m.numGlyphs>1){var Ke=m.glyphStartIndex+m.numGlyphs,at=m.lineStartIndex,ut=m.lineStartIndex+m.lineLength,st=Tr(He,D,Te,Ue,f,be,ve,m,q,k,we);if(!st)return{notEnoughRoom:!0};var dt=Ea(st.first.point,W).point,bt=Ea(st.last.point,W).point;if(v&&!f){var Ft=xs(m.writingMode,dt,bt,Oe);if(Ft)return Ft}We=[st.first];for(var Gt=m.glyphStartIndex+1;Gt<Ke-1;Gt++)We.push(Un(He*D.getoffsetX(Gt),Te,Ue,f,be,ve,m.segment,at,ut,q,k,we));We.push(st.last)}else{if(v&&!f){var ea=Ea(ve,T).point,ya=m.lineStartIndex+m.segment+1,Ca=new r.Point(q.getx(ya),q.gety(ya)),wa=Ea(Ca,T),vi=wa.signedDistanceFromCamera>0?wa.point:L_(ve,Ca,ea,1,T),ia=xs(m.writingMode,ea,vi,Oe);if(ia)return ia}var Wa=Un(He*D.getoffsetX(m.glyphStartIndex),Te,Ue,f,be,ve,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,q,k,we);if(!Wa)return{notEnoughRoom:!0};We=[Wa]}for(var Xa=0,Ga=We;Xa<Ga.length;Xa+=1){var Pa=Ga[Xa];r.addDynamicAttributes(oe,Pa.point,Pa.angle)}return{}}function L_(m,p,f,v,T){var k=Ea(m.add(m.sub(p)._unit()),T).point,W=f.sub(k);return f.add(W._mult(v/W.mag()))}function Un(m,p,f,v,T,k,W,D,q,oe,be,ve){var we=v?m-p:m+p,Oe=we>0?1:-1,We=0;v&&(Oe*=-1,We=Math.PI),Oe<0&&(We+=Math.PI);for(var He=Oe>0?D+W:D+W+1,Te=T,Ue=T,Ke=0,at=0,ut=Math.abs(we),st=[];Ke+at<=ut;){if((He+=Oe)<D||He>=q)return null;if(Ue=Te,st.push(Te),(Te=ve[He])===void 0){var dt=new r.Point(oe.getx(He),oe.gety(He)),bt=Ea(dt,be);if(bt.signedDistanceFromCamera>0)Te=ve[He]=bt.point;else{var Ft=He-Oe;Te=L_(Ke===0?k:new r.Point(oe.getx(Ft),oe.gety(Ft)),dt,Ue,ut-Ke+1,be)}}Ke+=at,at=Ue.dist(Te)}var Gt=(ut-Ke)/at,ea=Te.sub(Ue),ya=ea.mult(Gt)._add(Ue);ya._add(ea._unit()._perp()._mult(f*Oe));var Ca=We+Math.atan2(Te.y-Ue.y,Te.x-Ue.x);return st.push(ya),{point:ya,angle:Ca,path:st}}si.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},si.prototype.insert=function(m,p,f,v,T){this._forEachCell(p,f,v,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(m),this.bboxes.push(p),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(T)},si.prototype.insertCircle=function(m,p,f,v){this._forEachCell(p-v,f-v,p+v,f+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(m),this.circles.push(p),this.circles.push(f),this.circles.push(v)},si.prototype._insertBoxCell=function(m,p,f,v,T,k){this.boxCells[T].push(k)},si.prototype._insertCircleCell=function(m,p,f,v,T,k){this.circleCells[T].push(k)},si.prototype._query=function(m,p,f,v,T,k){if(f<0||m>this.width||v<0||p>this.height)return!T&&[];var W=[];if(m<=0&&p<=0&&this.width<=f&&this.height<=v){if(T)return!0;for(var D=0;D<this.boxKeys.length;D++)W.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(var q=0;q<this.circleKeys.length;q++){var oe=this.circles[3*q],be=this.circles[3*q+1],ve=this.circles[3*q+2];W.push({key:this.circleKeys[q],x1:oe-ve,y1:be-ve,x2:oe+ve,y2:be+ve})}return k?W.filter(k):W}return this._forEachCell(m,p,f,v,this._queryCell,W,{hitTest:T,seenUids:{box:{},circle:{}}},k),T?W.length>0:W},si.prototype._queryCircle=function(m,p,f,v,T){var k=m-f,W=m+f,D=p-f,q=p+f;if(W<0||k>this.width||q<0||D>this.height)return!v&&[];var oe=[];return this._forEachCell(k,D,W,q,this._queryCellCircle,oe,{hitTest:v,circle:{x:m,y:p,radius:f},seenUids:{box:{},circle:{}}},T),v?oe.length>0:oe},si.prototype.query=function(m,p,f,v,T){return this._query(m,p,f,v,!1,T)},si.prototype.hitTest=function(m,p,f,v,T){return this._query(m,p,f,v,!0,T)},si.prototype.hitTestCircle=function(m,p,f,v){return this._queryCircle(m,p,f,!0,v)},si.prototype._queryCell=function(m,p,f,v,T,k,W,D){var q=W.seenUids,oe=this.boxCells[T];if(oe!==null)for(var be=this.bboxes,ve=0,we=oe;ve<we.length;ve+=1){var Oe=we[ve];if(!q.box[Oe]){q.box[Oe]=!0;var We=4*Oe;if(m<=be[We+2]&&p<=be[We+3]&&f>=be[We+0]&&v>=be[We+1]&&(!D||D(this.boxKeys[Oe]))){if(W.hitTest)return k.push(!0),!0;k.push({key:this.boxKeys[Oe],x1:be[We],y1:be[We+1],x2:be[We+2],y2:be[We+3]})}}}var He=this.circleCells[T];if(He!==null)for(var Te=this.circles,Ue=0,Ke=He;Ue<Ke.length;Ue+=1){var at=Ke[Ue];if(!q.circle[at]){q.circle[at]=!0;var ut=3*at;if(this._circleAndRectCollide(Te[ut],Te[ut+1],Te[ut+2],m,p,f,v)&&(!D||D(this.circleKeys[at]))){if(W.hitTest)return k.push(!0),!0;var st=Te[ut],dt=Te[ut+1],bt=Te[ut+2];k.push({key:this.circleKeys[at],x1:st-bt,y1:dt-bt,x2:st+bt,y2:dt+bt})}}}},si.prototype._queryCellCircle=function(m,p,f,v,T,k,W,D){var q=W.circle,oe=W.seenUids,be=this.boxCells[T];if(be!==null)for(var ve=this.bboxes,we=0,Oe=be;we<Oe.length;we+=1){var We=Oe[we];if(!oe.box[We]){oe.box[We]=!0;var He=4*We;if(this._circleAndRectCollide(q.x,q.y,q.radius,ve[He+0],ve[He+1],ve[He+2],ve[He+3])&&(!D||D(this.boxKeys[We])))return k.push(!0),!0}}var Te=this.circleCells[T];if(Te!==null)for(var Ue=this.circles,Ke=0,at=Te;Ke<at.length;Ke+=1){var ut=at[Ke];if(!oe.circle[ut]){oe.circle[ut]=!0;var st=3*ut;if(this._circlesCollide(Ue[st],Ue[st+1],Ue[st+2],q.x,q.y,q.radius)&&(!D||D(this.circleKeys[ut])))return k.push(!0),!0}}},si.prototype._forEachCell=function(m,p,f,v,T,k,W,D){for(var q=this._convertToXCellCoord(m),oe=this._convertToYCellCoord(p),be=this._convertToXCellCoord(f),ve=this._convertToYCellCoord(v),we=q;we<=be;we++)for(var Oe=oe;Oe<=ve;Oe++)if(T.call(this,m,p,f,v,this.xCellCount*Oe+we,k,W,D))return},si.prototype._convertToXCellCoord=function(m){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(m*this.xScale)))},si.prototype._convertToYCellCoord=function(m){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(m*this.yScale)))},si.prototype._circlesCollide=function(m,p,f,v,T,k){var W=v-m,D=T-p,q=f+k;return q*q>W*W+D*D},si.prototype._circleAndRectCollide=function(m,p,f,v,T,k,W){var D=(k-v)/2,q=Math.abs(m-(v+D));if(q>D+f)return!1;var oe=(W-T)/2,be=Math.abs(p-(T+oe));if(be>oe+f)return!1;if(q<=D||be<=oe)return!0;var ve=q-D,we=be-oe;return ve*ve+we*we<=f*f};var R_=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ss(m,p){for(var f=0;f<m;f++){var v=p.length;p.resize(v+4),p.float32.set(R_,3*v)}}function Er(m,p,f){var v=p[0],T=p[1];return m[0]=f[0]*v+f[4]*T+f[12],m[1]=f[1]*v+f[5]*T+f[13],m[3]=f[3]*v+f[7]*T+f[15],m}var Eo=function(m,p,f){p===void 0&&(p=new si(m.width+200,m.height+200,25)),f===void 0&&(f=new si(m.width+200,m.height+200,25)),this.transform=m,this.grid=p,this.ignoredGrid=f,this.pitchfactor=Math.cos(m._pitch)*m.cameraToCenterDistance,this.screenRightBoundary=m.width+100,this.screenBottomBoundary=m.height+100,this.gridRightBoundary=m.width+200,this.gridBottomBoundary=m.height+200};function xn(m,p,f){return p*(r.EXTENT/(m.tileSize*Math.pow(2,f-m.tileID.overscaledZ)))}Eo.prototype.placeCollisionBox=function(m,p,f,v,T){var k=this.projectAndGetPerspectiveRatio(v,m.anchorPointX,m.anchorPointY),W=f*k.perspectiveRatio,D=m.x1*W+k.point.x,q=m.y1*W+k.point.y,oe=m.x2*W+k.point.x,be=m.y2*W+k.point.y;return!this.isInsideGrid(D,q,oe,be)||!p&&this.grid.hitTest(D,q,oe,be,T)?{box:[],offscreen:!1}:{box:[D,q,oe,be],offscreen:this.isOffscreen(D,q,oe,be)}},Eo.prototype.placeCollisionCircles=function(m,p,f,v,T,k,W,D,q,oe,be,ve,we){var Oe=[],We=new r.Point(p.anchorX,p.anchorY),He=Ea(We,k),Te=bi(this.transform.cameraToCenterDistance,He.signedDistanceFromCamera),Ue=(oe?T/Te:T*Te)/r.ONE_EM,Ke=Ea(We,W).point,at=Tr(Ue,v,p.lineOffsetX*Ue,p.lineOffsetY*Ue,!1,Ke,We,p,f,W,{}),ut=!1,st=!1,dt=!0;if(at){for(var bt=.5*ve*Te+we,Ft=new r.Point(-100,-100),Gt=new r.Point(this.screenRightBoundary,this.screenBottomBoundary),ea=new $i,ya=at.first,Ca=at.last,wa=[],vi=ya.path.length-1;vi>=1;vi--)wa.push(ya.path[vi]);for(var ia=1;ia<Ca.path.length;ia++)wa.push(Ca.path[ia]);var Wa=2.5*bt;if(D){var Xa=wa.map((function(Go){return Ea(Go,D)}));wa=Xa.some((function(Go){return Go.signedDistanceFromCamera<=0}))?[]:Xa.map((function(Go){return Go.point}))}var Ga=[];if(wa.length>0){for(var Pa=wa[0].clone(),Ha=wa[0].clone(),Ra=1;Ra<wa.length;Ra++)Pa.x=Math.min(Pa.x,wa[Ra].x),Pa.y=Math.min(Pa.y,wa[Ra].y),Ha.x=Math.max(Ha.x,wa[Ra].x),Ha.y=Math.max(Ha.y,wa[Ra].y);Ga=Pa.x>=Ft.x&&Ha.x<=Gt.x&&Pa.y>=Ft.y&&Ha.y<=Gt.y?[wa]:Ha.x<Ft.x||Pa.x>Gt.x||Ha.y<Ft.y||Pa.y>Gt.y?[]:r.clipLine([wa],Ft.x,Ft.y,Gt.x,Gt.y)}for(var Ta=0,yr=Ga;Ta<yr.length;Ta+=1){var Wn;ea.reset(yr[Ta],.25*bt),Wn=ea.length<=.5*bt?1:Math.ceil(ea.paddedLength/Wa)+1;for(var ts=0;ts<Wn;ts++){var Lr=ts/Math.max(Wn-1,1),Rn=ea.lerp(Lr),Hn=Rn.x+100,Vs=Rn.y+100;Oe.push(Hn,Vs,bt,0);var cs=Hn-bt,ac=Vs-bt,ws=Hn+bt,ul=Vs+bt;if(dt=dt&&this.isOffscreen(cs,ac,ws,ul),st=st||this.isInsideGrid(cs,ac,ws,ul),!m&&this.grid.hitTestCircle(Hn,Vs,bt,be)&&(ut=!0,!q))return{circles:[],offscreen:!1,collisionDetected:ut}}}}return{circles:!q&&ut||!st?[]:Oe,offscreen:dt,collisionDetected:ut}},Eo.prototype.queryRenderedSymbols=function(m){if(m.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var p=[],f=1/0,v=1/0,T=-1/0,k=-1/0,W=0,D=m;W<D.length;W+=1){var q=D[W],oe=new r.Point(q.x+100,q.y+100);f=Math.min(f,oe.x),v=Math.min(v,oe.y),T=Math.max(T,oe.x),k=Math.max(k,oe.y),p.push(oe)}for(var be={},ve={},we=0,Oe=this.grid.query(f,v,T,k).concat(this.ignoredGrid.query(f,v,T,k));we<Oe.length;we+=1){var We=Oe[we],He=We.key;if(be[He.bucketInstanceId]===void 0&&(be[He.bucketInstanceId]={}),!be[He.bucketInstanceId][He.featureIndex]){var Te=[new r.Point(We.x1,We.y1),new r.Point(We.x2,We.y1),new r.Point(We.x2,We.y2),new r.Point(We.x1,We.y2)];r.polygonIntersectsPolygon(p,Te)&&(be[He.bucketInstanceId][He.featureIndex]=!0,ve[He.bucketInstanceId]===void 0&&(ve[He.bucketInstanceId]=[]),ve[He.bucketInstanceId].push(He.featureIndex))}}return ve},Eo.prototype.insertCollisionBox=function(m,p,f,v,T){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:v,collisionGroupID:T},m[0],m[1],m[2],m[3])},Eo.prototype.insertCollisionCircles=function(m,p,f,v,T){for(var k=p?this.ignoredGrid:this.grid,W={bucketInstanceId:f,featureIndex:v,collisionGroupID:T},D=0;D<m.length;D+=4)k.insertCircle(W,m[D],m[D+1],m[D+2])},Eo.prototype.projectAndGetPerspectiveRatio=function(m,p,f){var v=[p,f,0,1];return Er(v,v,m),{point:new r.Point((v[0]/v[3]+1)/2*this.transform.width+100,(-v[1]/v[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}},Eo.prototype.isOffscreen=function(m,p,f,v){return f<100||m>=this.screenRightBoundary||v<100||p>this.screenBottomBoundary},Eo.prototype.isInsideGrid=function(m,p,f,v){return f>=0&&m<this.gridRightBoundary&&v>=0&&p<this.gridBottomBoundary},Eo.prototype.getViewportMatrix=function(){var m=r.identity([]);return r.translate(m,m,[-100,-100,0]),m};var il=function(m,p,f,v){this.opacity=m?Math.max(0,Math.min(1,m.opacity+(m.placed?p:-p))):v&&f?1:0,this.placed=f};il.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var uo=function(m,p,f,v,T){this.text=new il(m?m.text:null,p,f,T),this.icon=new il(m?m.icon:null,p,v,T)};uo.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ob=function(m,p,f){this.text=m,this.icon=p,this.skipFade=f},Mo=function(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]},pI=function(m,p,f,v,T){this.bucketInstanceId=m,this.featureIndex=p,this.sourceLayerIndex=f,this.bucketIndex=v,this.tileID=T},iu=function(m){this.crossSourceCollisions=m,this.maxGroupID=0,this.collisionGroups={}};function Zr(m,p,f,v,T){var k=r.getAnchorAlignment(m),W=-(k.horizontalAlign-.5)*p,D=-(k.verticalAlign-.5)*f,q=r.evaluateVariableOffset(m,v);return new r.Point(W+q[0]*T,D+q[1]*T)}function Rl(m,p,f,v,T,k){var W=m.x1,D=m.x2,q=m.y1,oe=m.y2,be=m.anchorPointX,ve=m.anchorPointY,we=new r.Point(p,f);return v&&we._rotate(T?k:-k),{x1:W+we.x,y1:q+we.y,x2:D+we.x,y2:oe+we.y,anchorPointX:be,anchorPointY:ve}}iu.prototype.get=function(m){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[m]){var p=++this.maxGroupID;this.collisionGroups[m]={ID:p,predicate:function(f){return f.collisionGroupID===p}}}return this.collisionGroups[m]};var os=function(m,p,f,v){this.transform=m.clone(),this.collisionIndex=new Eo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new iu(f),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}};function zc(m,p,f,v,T){m.emplaceBack(p?1:0,f?1:0,v||0,T||0),m.emplaceBack(p?1:0,f?1:0,v||0,T||0),m.emplaceBack(p?1:0,f?1:0,v||0,T||0),m.emplaceBack(p?1:0,f?1:0,v||0,T||0)}os.prototype.getBucketParts=function(m,p,f,v){var T=f.getBucket(p),k=f.latestFeatureIndex;if(T&&k&&p.id===T.layerIds[0]){var W=f.collisionBoxArray,D=T.layers[0].layout,q=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),oe=f.tileSize/r.EXTENT,be=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),ve=D.get("text-pitch-alignment")==="map",we=D.get("text-rotation-alignment")==="map",Oe=xn(f,1,this.transform.zoom),We=an(be,ve,we,this.transform,Oe),He=null;if(ve){var Te=ki(be,ve,we,this.transform,Oe);He=r.multiply([],this.transform.labelPlaneMatrix,Te)}this.retainedQueryData[T.bucketInstanceId]=new pI(T.bucketInstanceId,k,T.sourceLayerIndex,T.index,f.tileID);var Ue={bucket:T,layout:D,posMatrix:be,textLabelPlaneMatrix:We,labelToScreenMatrix:He,scale:q,textPixelRatio:oe,holdingForFade:f.holdingForFade(),collisionBoxArray:W,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(v)for(var Ke=0,at=T.sortKeyRanges;Ke<at.length;Ke+=1){var ut=at[Ke];m.push({sortKey:ut.sortKey,symbolInstanceStart:ut.symbolInstanceStart,symbolInstanceEnd:ut.symbolInstanceEnd,parameters:Ue})}else m.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:Ue})}},os.prototype.attemptAnchorPlacement=function(m,p,f,v,T,k,W,D,q,oe,be,ve,we,Oe,We){var He,Te=[ve.textOffset0,ve.textOffset1],Ue=Zr(m,f,v,Te,T),Ke=this.collisionIndex.placeCollisionBox(Rl(p,Ue.x,Ue.y,k,W,this.transform.angle),be,D,q,oe.predicate);if(!We||this.collisionIndex.placeCollisionBox(Rl(We,Ue.x,Ue.y,k,W,this.transform.angle),be,D,q,oe.predicate).box.length!==0)return Ke.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[ve.crossTileID]&&this.prevPlacement.placements[ve.crossTileID]&&this.prevPlacement.placements[ve.crossTileID].text&&(He=this.prevPlacement.variableOffsets[ve.crossTileID].anchor),this.variableOffsets[ve.crossTileID]={textOffset:Te,width:f,height:v,anchor:m,textBoxScale:T,prevAnchor:He},this.markUsedJustification(we,m,ve,Oe),we.allowVerticalPlacement&&(this.markUsedOrientation(we,Oe,ve),this.placedOrientations[ve.crossTileID]=Oe),{shift:Ue,placedGlyphBoxes:Ke}):void 0},os.prototype.placeLayerBucketPart=function(m,p,f){var v=this,T=m.parameters,k=T.bucket,W=T.layout,D=T.posMatrix,q=T.textLabelPlaneMatrix,oe=T.labelToScreenMatrix,be=T.textPixelRatio,ve=T.holdingForFade,we=T.collisionBoxArray,Oe=T.partiallyEvaluatedTextSize,We=T.collisionGroup,He=W.get("text-optional"),Te=W.get("icon-optional"),Ue=W.get("text-allow-overlap"),Ke=W.get("icon-allow-overlap"),at=W.get("text-rotation-alignment")==="map",ut=W.get("text-pitch-alignment")==="map",st=W.get("icon-text-fit")!=="none",dt=W.get("symbol-z-order")==="viewport-y",bt=Ue&&(Ke||!k.hasIconData()||Te),Ft=Ke&&(Ue||!k.hasTextData()||He);!k.collisionArrays&&we&&k.deserializeCollisionBoxes(we);var Gt=function(ia,Wa){if(!p[ia.crossTileID])if(ve)v.placements[ia.crossTileID]=new Ob(!1,!1,!1);else{var Xa,Ga=!1,Pa=!1,Ha=!0,Ra=null,Ta={box:null,offscreen:null},yr={box:null,offscreen:null},Wn=null,ts=null,Lr=0,Rn=0,Hn=0;Wa.textFeatureIndex?Lr=Wa.textFeatureIndex:ia.useRuntimeCollisionCircles&&(Lr=ia.featureIndex),Wa.verticalTextFeatureIndex&&(Rn=Wa.verticalTextFeatureIndex);var Vs=Wa.textBox;if(Vs){var cs=function(Pi){var _o=r.WritingMode.horizontal;if(k.allowVerticalPlacement&&!Pi&&v.prevPlacement){var Cs=v.prevPlacement.placedOrientations[ia.crossTileID];Cs&&(v.placedOrientations[ia.crossTileID]=Cs,v.markUsedOrientation(k,_o=Cs,ia))}return _o},ac=function(Pi,_o){if(k.allowVerticalPlacement&&ia.numVerticalGlyphVertices>0&&Wa.verticalTextBox)for(var Cs=0,od=k.writingModes;Cs<od.length&&(od[Cs]===r.WritingMode.vertical?(Ta=_o(),yr=Ta):Ta=Pi(),!(Ta&&Ta.box&&Ta.box.length));Cs+=1);else Ta=Pi()};if(W.get("text-variable-anchor")){var ws=W.get("text-variable-anchor");if(v.prevPlacement&&v.prevPlacement.variableOffsets[ia.crossTileID]){var ul=v.prevPlacement.variableOffsets[ia.crossTileID];ws.indexOf(ul.anchor)>0&&(ws=ws.filter((function(Pi){return Pi!==ul.anchor}))).unshift(ul.anchor)}var Go=function(Pi,_o,Cs){for(var od=Pi.x2-Pi.x1,RI=Pi.y2-Pi.y1,Wf=ia.textBoxScale,kI=st&&!Ke?_o:null,J_={box:[],offscreen:!1},_v=Ue?2*ws.length:ws.length,Ch=0;Ch<_v;++Ch){var Of=v.attemptAnchorPlacement(ws[Ch%ws.length],Pi,od,RI,Wf,at,ut,be,D,We,Ch>=ws.length,ia,k,Cs,kI);if(Of&&(J_=Of.placedGlyphBoxes)&&J_.box&&J_.box.length){Ga=!0,Ra=Of.shift;break}}return J_};ac((function(){return Go(Vs,Wa.iconBox,r.WritingMode.horizontal)}),(function(){var Pi=Wa.verticalTextBox;return k.allowVerticalPlacement&&!(Ta&&Ta.box&&Ta.box.length)&&ia.numVerticalGlyphVertices>0&&Pi?Go(Pi,Wa.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}})),Ta&&(Ga=Ta.box,Ha=Ta.offscreen);var K_=cs(Ta&&Ta.box);if(!Ga&&v.prevPlacement){var xh=v.prevPlacement.variableOffsets[ia.crossTileID];xh&&(v.variableOffsets[ia.crossTileID]=xh,v.markUsedJustification(k,xh.anchor,ia,K_))}}else{var ic=function(Pi,_o){var Cs=v.collisionIndex.placeCollisionBox(Pi,Ue,be,D,We.predicate);return Cs&&Cs.box&&Cs.box.length&&(v.markUsedOrientation(k,_o,ia),v.placedOrientations[ia.crossTileID]=_o),Cs};ac((function(){return ic(Vs,r.WritingMode.horizontal)}),(function(){var Pi=Wa.verticalTextBox;return k.allowVerticalPlacement&&ia.numVerticalGlyphVertices>0&&Pi?ic(Pi,r.WritingMode.vertical):{box:null,offscreen:null}})),cs(Ta&&Ta.box&&Ta.box.length)}}if(Ga=(Xa=Ta)&&Xa.box&&Xa.box.length>0,Ha=Xa&&Xa.offscreen,ia.useRuntimeCollisionCircles){var wh=k.text.placedSymbolArray.get(ia.centerJustifiedTextSymbolIndex),j_=r.evaluateSizeForFeature(k.textSizeData,Oe,wh),Wl=W.get("text-padding");Wn=v.collisionIndex.placeCollisionCircles(Ue,wh,k.lineVertexArray,k.glyphOffsetArray,j_,D,q,oe,f,ut,We.predicate,ia.collisionCircleDiameter,Wl),Ga=Ue||Wn.circles.length>0&&!Wn.collisionDetected,Ha=Ha&&Wn.offscreen}if(Wa.iconFeatureIndex&&(Hn=Wa.iconFeatureIndex),Wa.iconBox){var $_=function(Pi){var _o=st&&Ra?Rl(Pi,Ra.x,Ra.y,at,ut,v.transform.angle):Pi;return v.collisionIndex.placeCollisionBox(_o,Ke,be,D,We.predicate)};Pa=yr&&yr.box&&yr.box.length&&Wa.verticalIconBox?(ts=$_(Wa.verticalIconBox)).box.length>0:(ts=$_(Wa.iconBox)).box.length>0,Ha=Ha&&ts.offscreen}var Ol=He||ia.numHorizontalGlyphVertices===0&&ia.numVerticalGlyphVertices===0,br=Te||ia.numIconVertices===0;if(Ol||br?br?Ol||(Pa=Pa&&Ga):Ga=Pa&&Ga:Pa=Ga=Pa&&Ga,Ga&&Xa&&Xa.box&&v.collisionIndex.insertCollisionBox(Xa.box,W.get("text-ignore-placement"),k.bucketInstanceId,yr&&yr.box&&Rn?Rn:Lr,We.ID),Pa&&ts&&v.collisionIndex.insertCollisionBox(ts.box,W.get("icon-ignore-placement"),k.bucketInstanceId,Hn,We.ID),Wn&&(Ga&&v.collisionIndex.insertCollisionCircles(Wn.circles,W.get("text-ignore-placement"),k.bucketInstanceId,Lr,We.ID),f)){var ou=k.bucketInstanceId,nc=v.collisionCircleArrays[ou];nc===void 0&&(nc=v.collisionCircleArrays[ou]=new Mo);for(var sd=0;sd<Wn.circles.length;sd+=4)nc.circles.push(Wn.circles[sd+0]),nc.circles.push(Wn.circles[sd+1]),nc.circles.push(Wn.circles[sd+2]),nc.circles.push(Wn.collisionDetected?1:0)}v.placements[ia.crossTileID]=new Ob(Ga||bt,Pa||Ft,Ha||k.justReloaded),p[ia.crossTileID]=!0}};if(dt)for(var ea=k.getSortedSymbolIndexes(this.transform.angle),ya=ea.length-1;ya>=0;--ya){var Ca=ea[ya];Gt(k.symbolInstances.get(Ca),k.collisionArrays[Ca])}else for(var wa=m.symbolInstanceStart;wa<m.symbolInstanceEnd;wa++)Gt(k.symbolInstances.get(wa),k.collisionArrays[wa]);if(f&&k.bucketInstanceId in this.collisionCircleArrays){var vi=this.collisionCircleArrays[k.bucketInstanceId];r.invert(vi.invProjMatrix,D),vi.viewportMatrix=this.collisionIndex.getViewportMatrix()}k.justReloaded=!1},os.prototype.markUsedJustification=function(m,p,f,v){var T;T=v===r.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(p)];for(var k=0,W=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];k<W.length;k+=1){var D=W[k];D>=0&&(m.text.placedSymbolArray.get(D).crossTileID=T>=0&&D!==T?0:f.crossTileID)}},os.prototype.markUsedOrientation=function(m,p,f){for(var v=p===r.WritingMode.horizontal||p===r.WritingMode.horizontalOnly?p:0,T=p===r.WritingMode.vertical?p:0,k=0,W=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];k<W.length;k+=1)m.text.placedSymbolArray.get(W[k]).placedOrientation=v;f.verticalPlacedTextSymbolIndex&&(m.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=T)},os.prototype.commit=function(m){this.commitTime=m,this.zoomAtLastRecencyCheck=this.transform.zoom;var p=this.prevPlacement,f=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;var v=p?p.symbolFadeChange(m):1,T=p?p.opacities:{},k=p?p.variableOffsets:{},W=p?p.placedOrientations:{};for(var D in this.placements){var q=this.placements[D],oe=T[D];oe?(this.opacities[D]=new uo(oe,v,q.text,q.icon),f=f||q.text!==oe.text.placed||q.icon!==oe.icon.placed):(this.opacities[D]=new uo(null,v,q.text,q.icon,q.skipFade),f=f||q.text||q.icon)}for(var be in T){var ve=T[be];if(!this.opacities[be]){var we=new uo(ve,v,!1,!1);we.isHidden()||(this.opacities[be]=we,f=f||ve.text.placed||ve.icon.placed)}}for(var Oe in k)this.variableOffsets[Oe]||!this.opacities[Oe]||this.opacities[Oe].isHidden()||(this.variableOffsets[Oe]=k[Oe]);for(var We in W)this.placedOrientations[We]||!this.opacities[We]||this.opacities[We].isHidden()||(this.placedOrientations[We]=W[We]);f?this.lastPlacementChangeTime=m:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:m)},os.prototype.updateLayerOpacities=function(m,p){for(var f={},v=0,T=p;v<T.length;v+=1){var k=T[v],W=k.getBucket(m);W&&k.latestFeatureIndex&&m.id===W.layerIds[0]&&this.updateBucketOpacities(W,f,k.collisionBoxArray)}},os.prototype.updateBucketOpacities=function(m,p,f){var v=this;m.hasTextData()&&m.text.opacityVertexArray.clear(),m.hasIconData()&&m.icon.opacityVertexArray.clear(),m.hasIconCollisionBoxData()&&m.iconCollisionBox.collisionVertexArray.clear(),m.hasTextCollisionBoxData()&&m.textCollisionBox.collisionVertexArray.clear();var T=m.layers[0].layout,k=new uo(null,0,!1,!1,!0),W=T.get("text-allow-overlap"),D=T.get("icon-allow-overlap"),q=T.get("text-variable-anchor"),oe=T.get("text-rotation-alignment")==="map",be=T.get("text-pitch-alignment")==="map",ve=T.get("icon-text-fit")!=="none",we=new uo(null,0,W&&(D||!m.hasIconData()||T.get("icon-optional")),D&&(W||!m.hasTextData()||T.get("text-optional")),!0);!m.collisionArrays&&f&&(m.hasIconCollisionBoxData()||m.hasTextCollisionBoxData())&&m.deserializeCollisionBoxes(f);for(var Oe=function(Ue,Ke,at){for(var ut=0;ut<Ke/4;ut++)Ue.opacityVertexArray.emplaceBack(at)},We=function(Ue){var Ke=m.symbolInstances.get(Ue),at=Ke.numHorizontalGlyphVertices,ut=Ke.numVerticalGlyphVertices,st=Ke.crossTileID,dt=v.opacities[st];p[st]?dt=k:dt||(v.opacities[st]=dt=we),p[st]=!0;var bt=Ke.numIconVertices>0,Ft=v.placedOrientations[Ke.crossTileID],Gt=Ft===r.WritingMode.vertical,ea=Ft===r.WritingMode.horizontal||Ft===r.WritingMode.horizontalOnly;if(at>0||ut>0){var ya=Bb(dt.text);Oe(m.text,at,Gt?ch:ya),Oe(m.text,ut,ea?ch:ya);var Ca=dt.text.isHidden();[Ke.rightJustifiedTextSymbolIndex,Ke.centerJustifiedTextSymbolIndex,Ke.leftJustifiedTextSymbolIndex].forEach((function(Ta){Ta>=0&&(m.text.placedSymbolArray.get(Ta).hidden=Ca||Gt?1:0)})),Ke.verticalPlacedTextSymbolIndex>=0&&(m.text.placedSymbolArray.get(Ke.verticalPlacedTextSymbolIndex).hidden=Ca||ea?1:0);var wa=v.variableOffsets[Ke.crossTileID];wa&&v.markUsedJustification(m,wa.anchor,Ke,Ft);var vi=v.placedOrientations[Ke.crossTileID];vi&&(v.markUsedJustification(m,"left",Ke,vi),v.markUsedOrientation(m,vi,Ke))}if(bt){var ia=Bb(dt.icon),Wa=!(ve&&Ke.verticalPlacedIconSymbolIndex&&Gt);Ke.placedIconSymbolIndex>=0&&(Oe(m.icon,Ke.numIconVertices,Wa?ia:ch),m.icon.placedSymbolArray.get(Ke.placedIconSymbolIndex).hidden=dt.icon.isHidden()),Ke.verticalPlacedIconSymbolIndex>=0&&(Oe(m.icon,Ke.numVerticalIconVertices,Wa?ch:ia),m.icon.placedSymbolArray.get(Ke.verticalPlacedIconSymbolIndex).hidden=dt.icon.isHidden())}if(m.hasIconCollisionBoxData()||m.hasTextCollisionBoxData()){var Xa=m.collisionArrays[Ue];if(Xa){var Ga=new r.Point(0,0);if(Xa.textBox||Xa.verticalTextBox){var Pa=!0;if(q){var Ha=v.variableOffsets[st];Ha?(Ga=Zr(Ha.anchor,Ha.width,Ha.height,Ha.textOffset,Ha.textBoxScale),oe&&Ga._rotate(be?v.transform.angle:-v.transform.angle)):Pa=!1}Xa.textBox&&zc(m.textCollisionBox.collisionVertexArray,dt.text.placed,!Pa||Gt,Ga.x,Ga.y),Xa.verticalTextBox&&zc(m.textCollisionBox.collisionVertexArray,dt.text.placed,!Pa||ea,Ga.x,Ga.y)}var Ra=!!(!ea&&Xa.verticalIconBox);Xa.iconBox&&zc(m.iconCollisionBox.collisionVertexArray,dt.icon.placed,Ra,ve?Ga.x:0,ve?Ga.y:0),Xa.verticalIconBox&&zc(m.iconCollisionBox.collisionVertexArray,dt.icon.placed,!Ra,ve?Ga.x:0,ve?Ga.y:0)}}},He=0;He<m.symbolInstances.length;He++)We(He);if(m.sortFeatures(this.transform.angle),this.retainedQueryData[m.bucketInstanceId]&&(this.retainedQueryData[m.bucketInstanceId].featureSortOrder=m.featureSortOrder),m.hasTextData()&&m.text.opacityVertexBuffer&&m.text.opacityVertexBuffer.updateData(m.text.opacityVertexArray),m.hasIconData()&&m.icon.opacityVertexBuffer&&m.icon.opacityVertexBuffer.updateData(m.icon.opacityVertexArray),m.hasIconCollisionBoxData()&&m.iconCollisionBox.collisionVertexBuffer&&m.iconCollisionBox.collisionVertexBuffer.updateData(m.iconCollisionBox.collisionVertexArray),m.hasTextCollisionBoxData()&&m.textCollisionBox.collisionVertexBuffer&&m.textCollisionBox.collisionVertexBuffer.updateData(m.textCollisionBox.collisionVertexArray),m.bucketInstanceId in this.collisionCircleArrays){var Te=this.collisionCircleArrays[m.bucketInstanceId];m.placementInvProjMatrix=Te.invProjMatrix,m.placementViewportMatrix=Te.viewportMatrix,m.collisionCircleArray=Te.circles,delete this.collisionCircleArrays[m.bucketInstanceId]}},os.prototype.symbolFadeChange=function(m){return this.fadeDuration===0?1:(m-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},os.prototype.zoomAdjustment=function(m){return Math.max(0,(this.transform.zoom-m)/1.5)},os.prototype.hasTransitions=function(m){return this.stale||m-this.lastPlacementChangeTime<this.fadeDuration},os.prototype.stillRecent=function(m,p){var f=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*f>m},os.prototype.setStale=function(){this.stale=!0};var yI=Math.pow(2,25),bI=Math.pow(2,24),Jp=Math.pow(2,17),vI=Math.pow(2,16),Fb=Math.pow(2,9),xI=Math.pow(2,8),Nb=Math.pow(2,1);function Bb(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;var p=m.placed?1:0,f=Math.floor(127*m.opacity);return f*yI+p*bI+f*Jp+p*vI+f*Fb+p*xI+f*Nb+p}var ch=0,Qp=function(m){this._sortAcrossTiles=m.layout.get("symbol-z-order")!=="viewport-y"&&m.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Qp.prototype.continuePlacement=function(m,p,f,v,T){for(var k=this._bucketParts;this._currentTileIndex<m.length;)if(p.getBucketParts(k,v,m[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((function(W,D){return W.sortKey-D.sortKey})));this._currentPartIndex<k.length;)if(p.placeLayerBucketPart(k[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,T())return!0;return!1};var k_=function(m,p,f,v,T,k,W){this.placement=new os(m,T,k,W),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=v,this._done=!1};k_.prototype.isDone=function(){return this._done},k_.prototype.continuePlacement=function(m,p,f){for(var v=this,T=r.browser.now(),k=function(){var q=r.browser.now()-T;return!v._forceFullPlacement&&q>2};this._currentPlacementIndex>=0;){var W=p[m[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if(W.type==="symbol"&&(!W.minzoom||W.minzoom<=D)&&(!W.maxzoom||W.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new Qp(W)),this._inProgressLayer.continuePlacement(f[W.source],this.placement,this._showCollisionBoxes,W,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},k_.prototype.commit=function(m){return this.placement.commit(m),this.placement};var Db=512/r.EXTENT/2,ff=function(m,p,f){this.tileID=m,this.indexedSymbolInstances={},this.bucketInstanceId=f;for(var v=0;v<p.length;v++){var T=p.get(v),k=T.key;this.indexedSymbolInstances[k]||(this.indexedSymbolInstances[k]=[]),this.indexedSymbolInstances[k].push({crossTileID:T.crossTileID,coord:this.getScaledCoordinates(T,m)})}};ff.prototype.getScaledCoordinates=function(m,p){var f=Db/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*r.EXTENT+m.anchorX)*f),y:Math.floor((p.canonical.y*r.EXTENT+m.anchorY)*f)}},ff.prototype.findMatches=function(m,p,f){for(var v=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z),T=0;T<m.length;T++){var k=m.get(T);if(!k.crossTileID){var W=this.indexedSymbolInstances[k.key];if(W)for(var D=this.getScaledCoordinates(k,p),q=0,oe=W;q<oe.length;q+=1){var be=oe[q];if(Math.abs(be.coord.x-D.x)<=v&&Math.abs(be.coord.y-D.y)<=v&&!f[be.crossTileID]){f[be.crossTileID]=!0,k.crossTileID=be.crossTileID;break}}}}};var Lo=function(){this.maxCrossTileID=0};Lo.prototype.generate=function(){return++this.maxCrossTileID};var Zu=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Zu.prototype.handleWrapJump=function(m){var p=Math.round((m-this.lng)/360);if(p!==0)for(var f in this.indexes){var v=this.indexes[f],T={};for(var k in v){var W=v[k];W.tileID=W.tileID.unwrapTo(W.tileID.wrap+p),T[W.tileID.key]=W}this.indexes[f]=T}this.lng=m},Zu.prototype.addBucket=function(m,p,f){if(this.indexes[m.overscaledZ]&&this.indexes[m.overscaledZ][m.key]){if(this.indexes[m.overscaledZ][m.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(m.overscaledZ,this.indexes[m.overscaledZ][m.key])}for(var v=0;v<p.symbolInstances.length;v++)p.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[m.overscaledZ]||(this.usedCrossTileIDs[m.overscaledZ]={});var T=this.usedCrossTileIDs[m.overscaledZ];for(var k in this.indexes){var W=this.indexes[k];if(Number(k)>m.overscaledZ)for(var D in W){var q=W[D];q.tileID.isChildOf(m)&&q.findMatches(p.symbolInstances,m,T)}else{var oe=W[m.scaledTo(Number(k)).key];oe&&oe.findMatches(p.symbolInstances,m,T)}}for(var be=0;be<p.symbolInstances.length;be++){var ve=p.symbolInstances.get(be);ve.crossTileID||(ve.crossTileID=f.generate(),T[ve.crossTileID]=!0)}return this.indexes[m.overscaledZ]===void 0&&(this.indexes[m.overscaledZ]={}),this.indexes[m.overscaledZ][m.key]=new ff(m,p.symbolInstances,p.bucketInstanceId),!0},Zu.prototype.removeBucketCrossTileIDs=function(m,p){for(var f in p.indexedSymbolInstances)for(var v=0,T=p.indexedSymbolInstances[f];v<T.length;v+=1)delete this.usedCrossTileIDs[m][T[v].crossTileID]},Zu.prototype.removeStaleBuckets=function(m){var p=!1;for(var f in this.indexes){var v=this.indexes[f];for(var T in v)m[v[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,v[T]),delete v[T],p=!0)}return p};var zu=function(){this.layerIndexes={},this.crossTileIDs=new Lo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};zu.prototype.addLayer=function(m,p,f){var v=this.layerIndexes[m.id];v===void 0&&(v=this.layerIndexes[m.id]=new Zu);var T=!1,k={};v.handleWrapJump(f);for(var W=0,D=p;W<D.length;W+=1){var q=D[W],oe=q.getBucket(m);oe&&m.id===oe.layerIds[0]&&(oe.bucketInstanceId||(oe.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(q.tileID,oe,this.crossTileIDs)&&(T=!0),k[oe.bucketInstanceId]=!0)}return v.removeStaleBuckets(k)&&(T=!0),T},zu.prototype.pruneUnusedLayers=function(m){var p={};for(var f in m.forEach((function(v){p[v]=!0})),this.layerIndexes)p[f]||delete this.layerIndexes[f]};var Uc=function(m,p){return r.emitValidationErrors(m,p&&p.filter((function(f){return f.identifier!=="source.canvas"})))},Uu=r.pick(Xt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Hu=r.pick(Xt,["setCenter","setZoom","setBearing","setPitch"]),gf=(function(){var m={},p=r.styleSpec.$version;for(var f in r.styleSpec.$root){var v,T=r.styleSpec.$root[f];T.required&&(v=f==="version"?p:T.type==="array"?[]:{})!=null&&(m[f]=v)}return m})(),Ws=(function(m){function p(f,v){var T=this;v===void 0&&(v={}),m.call(this),this.map=f,this.dispatcher=new N(mt(),this),this.imageManager=new L,this.imageManager.setEventedParent(this),this.glyphManager=new te(f._requestManager,v.localIdeographFontFamily),this.lineAtlas=new de(256,512),this.crossTileSymbolIndex=new zu,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());var k=this;this._rtlTextPluginCallback=p.registerForPluginStateChange((function(W){k.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:W.pluginStatus,pluginURL:W.pluginURL},(function(D,q){if(r.triggerPluginCompletionEvent(D),q&&q.every((function(be){return be})))for(var oe in k.sourceCaches)k.sourceCaches[oe].reload()}))})),this.on("data",(function(W){if(W.dataType==="source"&&W.sourceDataType==="metadata"){var D=T.sourceCaches[W.sourceId];if(D){var q=D.getSource();if(q&&q.vectorLayerIds)for(var oe in T._layers){var be=T._layers[oe];be.source===q.id&&T._validateLayer(be)}}}}))}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.loadURL=function(f,v){var T=this;v===void 0&&(v={}),this.fire(new r.Event("dataloading",{dataType:"style"}));var k=typeof v.validate=="boolean"?v.validate:!r.isMapboxURL(f);f=this.map._requestManager.normalizeStyleURL(f,v.accessToken);var W=this.map._requestManager.transformRequest(f,r.ResourceType.Style);this._request=r.getJSON(W,(function(D,q){T._request=null,D?T.fire(new r.ErrorEvent(D)):q&&T._load(q,k)}))},p.prototype.loadJSON=function(f,v){var T=this;v===void 0&&(v={}),this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.browser.frame((function(){T._request=null,T._load(f,v.validate!==!1)}))},p.prototype.loadEmpty=function(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(gf,!1)},p.prototype._load=function(f,v){if(!v||!Uc(this,r.validateStyle(f))){for(var T in this._loaded=!0,this.stylesheet=f,f.sources)this.addSource(T,f.sources[T],{validate:!1});f.sprite?this._loadSprite(f.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(f.glyphs);var k=Ut(this.stylesheet.layers);this._order=k.map((function(oe){return oe.id})),this._layers={},this._serializedLayers={};for(var W=0,D=k;W<D.length;W+=1){var q=D[W];(q=r.createStyleLayer(q)).setEventedParent(this,{layer:{id:q.id}}),this._layers[q.id]=q,this._serializedLayers[q.id]=q.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new X(this.stylesheet.light),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}},p.prototype._loadSprite=function(f){var v=this;this._spriteRequest=(function(T,k,W){var D,q,oe,be=r.browser.devicePixelRatio>1?"@2x":"",ve=r.getJSON(k.transformRequest(k.normalizeSpriteURL(T,be,".json"),r.ResourceType.SpriteJSON),(function(We,He){ve=null,oe||(oe=We,D=He,Oe())})),we=r.getImage(k.transformRequest(k.normalizeSpriteURL(T,be,".png"),r.ResourceType.SpriteImage),(function(We,He){we=null,oe||(oe=We,q=He,Oe())}));function Oe(){if(oe)W(oe);else if(D&&q){var We=r.browser.getImageData(q),He={};for(var Te in D){var Ue=D[Te],Ke=Ue.width,at=Ue.height,ut=Ue.x,st=Ue.y,dt=Ue.sdf,bt=Ue.pixelRatio,Ft=Ue.stretchX,Gt=Ue.stretchY,ea=Ue.content,ya=new r.RGBAImage({width:Ke,height:at});r.RGBAImage.copy(We,ya,{x:ut,y:st},{x:0,y:0},{width:Ke,height:at}),He[Te]={data:ya,pixelRatio:bt,sdf:dt,stretchX:Ft,stretchY:Gt,content:ea}}W(null,He)}}return{cancel:function(){ve&&(ve.cancel(),ve=null),we&&(we.cancel(),we=null)}}})(f,this.map._requestManager,(function(T,k){if(v._spriteRequest=null,T)v.fire(new r.ErrorEvent(T));else if(k)for(var W in k)v.imageManager.addImage(W,k[W]);v.imageManager.setLoaded(!0),v._availableImages=v.imageManager.listImages(),v.dispatcher.broadcast("setImages",v._availableImages),v.fire(new r.Event("data",{dataType:"style"}))}))},p.prototype._validateLayer=function(f){var v=this.sourceCaches[f.source];if(v){var T=f.sourceLayer;if(T){var k=v.getSource();(k.type==="geojson"||k.vectorLayerIds&&k.vectorLayerIds.indexOf(T)===-1)&&this.fire(new r.ErrorEvent(new Error('Source layer "'+T+'" does not exist on source "'+k.id+'" as specified by style layer "'+f.id+'"')))}}},p.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var f in this.sourceCaches)if(!this.sourceCaches[f].loaded())return!1;return!!this.imageManager.isLoaded()},p.prototype._serializeLayers=function(f){for(var v=[],T=0,k=f;T<k.length;T+=1){var W=this._layers[k[T]];W.type!=="custom"&&v.push(W.serialize())}return v},p.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var f in this.sourceCaches)if(this.sourceCaches[f].hasTransition())return!0;for(var v in this._layers)if(this._layers[v].hasTransition())return!0;return!1},p.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},p.prototype.update=function(f){if(this._loaded){var v=this._changed;if(this._changed){var T=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);for(var W in(T.length||k.length)&&this._updateWorkerLayers(T,k),this._updatedSources){var D=this._updatedSources[W];D==="reload"?this._reloadSource(W):D==="clear"&&this._clearSource(W)}for(var q in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[q].updateTransitions(f);this.light.updateTransitions(f),this._resetUpdates()}var oe={};for(var be in this.sourceCaches){var ve=this.sourceCaches[be];oe[be]=ve.used,ve.used=!1}for(var we=0,Oe=this._order;we<Oe.length;we+=1){var We=this._layers[Oe[we]];We.recalculate(f,this._availableImages),!We.isHidden(f.zoom)&&We.source&&(this.sourceCaches[We.source].used=!0)}for(var He in oe){var Te=this.sourceCaches[He];oe[He]!==Te.used&&Te.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:He}))}this.light.recalculate(f),this.z=f.zoom,v&&this.fire(new r.Event("data",{dataType:"style"}))}},p.prototype._updateTilesForChangedImages=function(){var f=Object.keys(this._changedImages);if(f.length){for(var v in this.sourceCaches)this.sourceCaches[v].reloadTilesForDependencies(["icons","patterns"],f);this._changedImages={}}},p.prototype._updateWorkerLayers=function(f,v){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(f),removedIds:v})},p.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},p.prototype.setState=function(f){var v=this;if(this._checkLoaded(),Uc(this,r.validateStyle(f)))return!1;(f=r.clone$1(f)).layers=Ut(f.layers);var T=(function(W,D){if(!W)return[{command:Xt.setStyle,args:[D]}];var q=[];try{if(!r.deepEqual(W.version,D.version))return[{command:Xt.setStyle,args:[D]}];r.deepEqual(W.center,D.center)||q.push({command:Xt.setCenter,args:[D.center]}),r.deepEqual(W.zoom,D.zoom)||q.push({command:Xt.setZoom,args:[D.zoom]}),r.deepEqual(W.bearing,D.bearing)||q.push({command:Xt.setBearing,args:[D.bearing]}),r.deepEqual(W.pitch,D.pitch)||q.push({command:Xt.setPitch,args:[D.pitch]}),r.deepEqual(W.sprite,D.sprite)||q.push({command:Xt.setSprite,args:[D.sprite]}),r.deepEqual(W.glyphs,D.glyphs)||q.push({command:Xt.setGlyphs,args:[D.glyphs]}),r.deepEqual(W.transition,D.transition)||q.push({command:Xt.setTransition,args:[D.transition]}),r.deepEqual(W.light,D.light)||q.push({command:Xt.setLight,args:[D.light]});var oe={},be=[];(function(we,Oe,We,He){var Te;for(Te in Oe=Oe||{},we=we||{})we.hasOwnProperty(Te)&&(Oe.hasOwnProperty(Te)||Me(Te,We,He));for(Te in Oe)Oe.hasOwnProperty(Te)&&(we.hasOwnProperty(Te)?r.deepEqual(we[Te],Oe[Te])||(we[Te].type==="geojson"&&Oe[Te].type==="geojson"&&Yt(we,Oe,Te)?We.push({command:Xt.setGeoJSONSourceData,args:[Te,Oe[Te].data]}):yt(Te,Oe,We,He)):Ot(Te,Oe,We))})(W.sources,D.sources,be,oe);var ve=[];W.layers&&W.layers.forEach((function(we){oe[we.source]?q.push({command:Xt.removeLayer,args:[we.id]}):ve.push(we)})),q=q.concat(be),(function(we,Oe,We){Oe=Oe||[];var He,Te,Ue,Ke,at,ut,st,dt=(we=we||[]).map(Ba),bt=Oe.map(Ba),Ft=we.reduce(Aa,{}),Gt=Oe.reduce(Aa,{}),ea=dt.slice(),ya=Object.create(null);for(He=0,Te=0;He<dt.length;He++)Gt.hasOwnProperty(Ue=dt[He])?Te++:(We.push({command:Xt.removeLayer,args:[Ue]}),ea.splice(ea.indexOf(Ue,Te),1));for(He=0,Te=0;He<bt.length;He++)ea[ea.length-1-He]!==(Ue=bt[bt.length-1-He])&&(Ft.hasOwnProperty(Ue)?(We.push({command:Xt.removeLayer,args:[Ue]}),ea.splice(ea.lastIndexOf(Ue,ea.length-Te),1)):Te++,We.push({command:Xt.addLayer,args:[Gt[Ue],ut=ea[ea.length-He]]}),ea.splice(ea.length-He,0,Ue),ya[Ue]=!0);for(He=0;He<bt.length;He++)if(Ke=Ft[Ue=bt[He]],at=Gt[Ue],!ya[Ue]&&!r.deepEqual(Ke,at))if(r.deepEqual(Ke.source,at.source)&&r.deepEqual(Ke["source-layer"],at["source-layer"])&&r.deepEqual(Ke.type,at.type)){for(st in fa(Ke.layout,at.layout,We,Ue,null,Xt.setLayoutProperty),fa(Ke.paint,at.paint,We,Ue,null,Xt.setPaintProperty),r.deepEqual(Ke.filter,at.filter)||We.push({command:Xt.setFilter,args:[Ue,at.filter]}),r.deepEqual(Ke.minzoom,at.minzoom)&&r.deepEqual(Ke.maxzoom,at.maxzoom)||We.push({command:Xt.setLayerZoomRange,args:[Ue,at.minzoom,at.maxzoom]}),Ke)Ke.hasOwnProperty(st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&(st.indexOf("paint.")===0?fa(Ke[st],at[st],We,Ue,st.slice(6),Xt.setPaintProperty):r.deepEqual(Ke[st],at[st])||We.push({command:Xt.setLayerProperty,args:[Ue,st,at[st]]}));for(st in at)at.hasOwnProperty(st)&&!Ke.hasOwnProperty(st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&(st.indexOf("paint.")===0?fa(Ke[st],at[st],We,Ue,st.slice(6),Xt.setPaintProperty):r.deepEqual(Ke[st],at[st])||We.push({command:Xt.setLayerProperty,args:[Ue,st,at[st]]}))}else We.push({command:Xt.removeLayer,args:[Ue]}),ut=ea[ea.lastIndexOf(Ue)+1],We.push({command:Xt.addLayer,args:[at,ut]})})(ve,D.layers,q)}catch(we){console.warn("Unable to compute style diff:",we),q=[{command:Xt.setStyle,args:[D]}]}return q})(this.serialize(),f).filter((function(W){return!(W.command in Hu)}));if(T.length===0)return!1;var k=T.filter((function(W){return!(W.command in Uu)}));if(k.length>0)throw new Error("Unimplemented: "+k.map((function(W){return W.command})).join(", ")+".");return T.forEach((function(W){W.command!=="setTransition"&&v[W.command].apply(v,W.args)})),this.stylesheet=f,!0},p.prototype.addImage=function(f,v){if(this.getImage(f))return this.fire(new r.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(f,v),this._afterImageUpdated(f)},p.prototype.updateImage=function(f,v){this.imageManager.updateImage(f,v)},p.prototype.getImage=function(f){return this.imageManager.getImage(f)},p.prototype.removeImage=function(f){if(!this.getImage(f))return this.fire(new r.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(f),this._afterImageUpdated(f)},p.prototype._afterImageUpdated=function(f){this._availableImages=this.imageManager.listImages(),this._changedImages[f]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))},p.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},p.prototype.addSource=function(f,v,T){var k=this;if(T===void 0&&(T={}),this._checkLoaded(),this.sourceCaches[f]!==void 0)throw new Error("There is already a source with this ID");if(!v.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(v).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(v.type)>=0&&this._validate(r.validateStyle.source,"sources."+f,v,null,T))){this.map&&this.map._collectResourceTiming&&(v.collectResourceTiming=!0);var W=this.sourceCaches[f]=new Ae(f,v,this.dispatcher);W.style=this,W.setEventedParent(this,(function(){return{isSourceLoaded:k.loaded(),source:W.serialize(),sourceId:f}})),W.onAdd(this.map),this._changed=!0}},p.prototype.removeSource=function(f){if(this._checkLoaded(),this.sourceCaches[f]===void 0)throw new Error("There is no source with this ID");for(var v in this._layers)if(this._layers[v].source===f)return this.fire(new r.ErrorEvent(new Error('Source "'+f+'" cannot be removed while layer "'+v+'" is using it.')));var T=this.sourceCaches[f];delete this.sourceCaches[f],delete this._updatedSources[f],T.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:f})),T.setEventedParent(null),T.clearTiles(),T.onRemove&&T.onRemove(this.map),this._changed=!0},p.prototype.setGeoJSONSourceData=function(f,v){this._checkLoaded(),this.sourceCaches[f].getSource().setData(v),this._changed=!0},p.prototype.getSource=function(f){return this.sourceCaches[f]&&this.sourceCaches[f].getSource()},p.prototype.addLayer=function(f,v,T){T===void 0&&(T={}),this._checkLoaded();var k=f.id;if(this.getLayer(k))this.fire(new r.ErrorEvent(new Error('Layer with id "'+k+'" already exists on this map')));else{var W;if(f.type==="custom"){if(Uc(this,r.validateCustomStyleLayer(f)))return;W=r.createStyleLayer(f)}else{if(typeof f.source=="object"&&(this.addSource(k,f.source),f=r.clone$1(f),f=r.extend(f,{source:k})),this._validate(r.validateStyle.layer,"layers."+k,f,{arrayIndex:-1},T))return;W=r.createStyleLayer(f),this._validateLayer(W),W.setEventedParent(this,{layer:{id:k}}),this._serializedLayers[W.id]=W.serialize()}var D=v?this._order.indexOf(v):this._order.length;if(v&&D===-1)this.fire(new r.ErrorEvent(new Error('Layer with id "'+v+'" does not exist on this map.')));else{if(this._order.splice(D,0,k),this._layerOrderChanged=!0,this._layers[k]=W,this._removedLayers[k]&&W.source&&W.type!=="custom"){var q=this._removedLayers[k];delete this._removedLayers[k],q.type!==W.type?this._updatedSources[W.source]="clear":(this._updatedSources[W.source]="reload",this.sourceCaches[W.source].pause())}this._updateLayer(W),W.onAdd&&W.onAdd(this.map)}}},p.prototype.moveLayer=function(f,v){if(this._checkLoaded(),this._changed=!0,this._layers[f]){if(f!==v){var T=this._order.indexOf(f);this._order.splice(T,1);var k=v?this._order.indexOf(v):this._order.length;v&&k===-1?this.fire(new r.ErrorEvent(new Error('Layer with id "'+v+'" does not exist on this map.'))):(this._order.splice(k,0,f),this._layerOrderChanged=!0)}}else this.fire(new r.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be moved.")))},p.prototype.removeLayer=function(f){this._checkLoaded();var v=this._layers[f];if(v){v.setEventedParent(null);var T=this._order.indexOf(f);this._order.splice(T,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[f]=v,delete this._layers[f],delete this._serializedLayers[f],delete this._updatedLayers[f],delete this._updatedPaintProps[f],v.onRemove&&v.onRemove(this.map)}else this.fire(new r.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be removed.")))},p.prototype.getLayer=function(f){return this._layers[f]},p.prototype.hasLayer=function(f){return f in this._layers},p.prototype.setLayerZoomRange=function(f,v,T){this._checkLoaded();var k=this.getLayer(f);k?k.minzoom===v&&k.maxzoom===T||(v!=null&&(k.minzoom=v),T!=null&&(k.maxzoom=T),this._updateLayer(k)):this.fire(new r.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot have zoom extent.")))},p.prototype.setFilter=function(f,v,T){T===void 0&&(T={}),this._checkLoaded();var k=this.getLayer(f);if(k){if(!r.deepEqual(k.filter,v))return v==null?(k.filter=void 0,void this._updateLayer(k)):void(this._validate(r.validateStyle.filter,"layers."+k.id+".filter",v,null,T)||(k.filter=r.clone$1(v),this._updateLayer(k)))}else this.fire(new r.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be filtered.")))},p.prototype.getFilter=function(f){return r.clone$1(this.getLayer(f).filter)},p.prototype.setLayoutProperty=function(f,v,T,k){k===void 0&&(k={}),this._checkLoaded();var W=this.getLayer(f);W?r.deepEqual(W.getLayoutProperty(v),T)||(W.setLayoutProperty(v,T,k),this._updateLayer(W)):this.fire(new r.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getLayoutProperty=function(f,v){var T=this.getLayer(f);if(T)return T.getLayoutProperty(v);this.fire(new r.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style.")))},p.prototype.setPaintProperty=function(f,v,T,k){k===void 0&&(k={}),this._checkLoaded();var W=this.getLayer(f);W?r.deepEqual(W.getPaintProperty(v),T)||(W.setPaintProperty(v,T,k)&&this._updateLayer(W),this._changed=!0,this._updatedPaintProps[f]=!0):this.fire(new r.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getPaintProperty=function(f,v){return this.getLayer(f).getPaintProperty(v)},p.prototype.setFeatureState=function(f,v){this._checkLoaded();var T=f.source,k=f.sourceLayer,W=this.sourceCaches[T];if(W!==void 0){var D=W.getSource().type;D==="geojson"&&k?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):D!=="vector"||k?(f.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),W.setFeatureState(k,f.id,v)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+T+"' does not exist in the map's style.")))},p.prototype.removeFeatureState=function(f,v){this._checkLoaded();var T=f.source,k=this.sourceCaches[T];if(k!==void 0){var W=k.getSource().type,D=W==="vector"?f.sourceLayer:void 0;W!=="vector"||D?v&&typeof f.id!="string"&&typeof f.id!="number"?this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):k.removeFeatureState(D,f.id,v):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+T+"' does not exist in the map's style.")))},p.prototype.getFeatureState=function(f){this._checkLoaded();var v=f.source,T=f.sourceLayer,k=this.sourceCaches[v];if(k!==void 0){if(k.getSource().type!=="vector"||T)return f.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),k.getFeatureState(T,f.id);this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+v+"' does not exist in the map's style.")))},p.prototype.getTransition=function(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},p.prototype.serialize=function(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,(function(f){return f.serialize()})),layers:this._serializeLayers(this._order)},(function(f){return f!==void 0}))},p.prototype._updateLayer=function(f){this._updatedLayers[f.id]=!0,f.source&&!this._updatedSources[f.source]&&this.sourceCaches[f.source].getSource().type!=="raster"&&(this._updatedSources[f.source]="reload",this.sourceCaches[f.source].pause()),this._changed=!0},p.prototype._flattenAndSortRenderedFeatures=function(f){for(var v=this,T=function(Ft){return v._layers[Ft].type==="fill-extrusion"},k={},W=[],D=this._order.length-1;D>=0;D--){var q=this._order[D];if(T(q)){k[q]=D;for(var oe=0,be=f;oe<be.length;oe+=1){var ve=be[oe][q];if(ve)for(var we=0,Oe=ve;we<Oe.length;we+=1)W.push(Oe[we])}}}W.sort((function(Ft,Gt){return Gt.intersectionZ-Ft.intersectionZ}));for(var We=[],He=this._order.length-1;He>=0;He--){var Te=this._order[He];if(T(Te))for(var Ue=W.length-1;Ue>=0;Ue--){var Ke=W[Ue].feature;if(k[Ke.layer.id]<He)break;We.push(Ke),W.pop()}else for(var at=0,ut=f;at<ut.length;at+=1){var st=ut[at][Te];if(st)for(var dt=0,bt=st;dt<bt.length;dt+=1)We.push(bt[dt].feature)}}return We},p.prototype.queryRenderedFeatures=function(f,v,T){v&&v.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",v.filter,null,v);var k={};if(v&&v.layers){if(!Array.isArray(v.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var W=0,D=v.layers;W<D.length;W+=1){var q=D[W],oe=this._layers[q];if(!oe)return this.fire(new r.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be queried for features."))),[];k[oe.source]=!0}}var be=[];for(var ve in v.availableImages=this._availableImages,this.sourceCaches)v.layers&&!k[ve]||be.push(Pt(this.sourceCaches[ve],this._layers,this._serializedLayers,f,v,T));return this.placement&&be.push((function(we,Oe,We,He,Te,Ue,Ke){for(var at={},ut=Ue.queryRenderedSymbols(He),st=[],dt=0,bt=Object.keys(ut).map(Number);dt<bt.length;dt+=1)st.push(Ke[bt[dt]]);st.sort(zt);for(var Ft=function(){var wa=ea[Gt],vi=wa.featureIndex.lookupSymbolFeatures(ut[wa.bucketInstanceId],Oe,wa.bucketIndex,wa.sourceLayerIndex,Te.filter,Te.layers,Te.availableImages,we);for(var ia in vi){var Wa=at[ia]=at[ia]||[],Xa=vi[ia];Xa.sort((function(Ha,Ra){var Ta=wa.featureSortOrder;if(Ta){var yr=Ta.indexOf(Ha.featureIndex);return Ta.indexOf(Ra.featureIndex)-yr}return Ra.featureIndex-Ha.featureIndex}));for(var Ga=0,Pa=Xa;Ga<Pa.length;Ga+=1)Wa.push(Pa[Ga])}},Gt=0,ea=st;Gt<ea.length;Gt+=1)Ft();var ya=function(wa){at[wa].forEach((function(vi){var ia=vi.feature,Wa=We[we[wa].source].getFeatureState(ia.layer["source-layer"],ia.id);ia.source=ia.layer.source,ia.layer["source-layer"]&&(ia.sourceLayer=ia.layer["source-layer"]),ia.state=Wa}))};for(var Ca in at)ya(Ca);return at})(this._layers,this._serializedLayers,this.sourceCaches,f,v,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(be)},p.prototype.querySourceFeatures=function(f,v){v&&v.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",v.filter,null,v);var T=this.sourceCaches[f];return T?(function(k,W){for(var D=k.getRenderableIds().map((function(Oe){return k.getTileByID(Oe)})),q=[],oe={},be=0;be<D.length;be++){var ve=D[be],we=ve.tileID.canonical.key;oe[we]||(oe[we]=!0,ve.querySourceFeatures(q,W))}return q})(T,v):[]},p.prototype.addSourceType=function(f,v,T){return p.getSourceType(f)?T(new Error('A source type called "'+f+'" already exists.')):(p.setSourceType(f,v),v.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:f,url:v.workerSourceURL},T):T(null,null))},p.prototype.getLight=function(){return this.light.getLight()},p.prototype.setLight=function(f,v){v===void 0&&(v={}),this._checkLoaded();var T=this.light.getLight(),k=!1;for(var W in f)if(!r.deepEqual(f[W],T[W])){k=!0;break}if(k){var D={now:r.browser.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(f,v),this.light.updateTransitions(D)}},p.prototype._validate=function(f,v,T,k,W){return W===void 0&&(W={}),(!W||W.validate!==!1)&&Uc(this,f.call(r.validateStyle,r.extend({key:v,style:this.serialize(),value:T,styleSpec:r.styleSpec},k)))},p.prototype._remove=function(){for(var f in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[f].setEventedParent(null);for(var v in this.sourceCaches)this.sourceCaches[v].clearTiles(),this.sourceCaches[v].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},p.prototype._clearSource=function(f){this.sourceCaches[f].clearTiles()},p.prototype._reloadSource=function(f){this.sourceCaches[f].resume(),this.sourceCaches[f].reload()},p.prototype._updateSources=function(f){for(var v in this.sourceCaches)this.sourceCaches[v].update(f)},p.prototype._generateCollisionBoxes=function(){for(var f in this.sourceCaches)this._reloadSource(f)},p.prototype._updatePlacement=function(f,v,T,k,W){W===void 0&&(W=!1);for(var D=!1,q=!1,oe={},be=0,ve=this._order;be<ve.length;be+=1){var we=this._layers[ve[be]];if(we.type==="symbol"){if(!oe[we.source]){var Oe=this.sourceCaches[we.source];oe[we.source]=Oe.getRenderableIds(!0).map((function(Ke){return Oe.getTileByID(Ke)})).sort((function(Ke,at){return at.tileID.overscaledZ-Ke.tileID.overscaledZ||(Ke.tileID.isLessThan(at.tileID)?-1:1)}))}var We=this.crossTileSymbolIndex.addLayer(we,oe[we.source],f.center.lng);D=D||We}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((W=W||this._layerOrderChanged||T===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.browser.now(),f.zoom))&&(this.pauseablePlacement=new k_(f,this._order,W,v,T,k,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,oe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.browser.now()),q=!0),D&&this.pauseablePlacement.placement.setStale()),q||D)for(var He=0,Te=this._order;He<Te.length;He+=1){var Ue=this._layers[Te[He]];Ue.type==="symbol"&&this.placement.updateLayerOpacities(Ue,oe[Ue.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.browser.now())},p.prototype._releaseSymbolFadeTiles=function(){for(var f in this.sourceCaches)this.sourceCaches[f].releaseSymbolFadeTiles()},p.prototype.getImages=function(f,v,T){this.imageManager.getImages(v.icons,T),this._updateTilesForChangedImages();var k=this.sourceCaches[v.source];k&&k.setDependencies(v.tileID.key,v.type,v.icons)},p.prototype.getGlyphs=function(f,v,T){this.glyphManager.getGlyphs(v.stacks,T)},p.prototype.getResource=function(f,v,T){return r.makeRequest(v,T)},p})(r.Evented);Ws.getSourceType=function(m){return Je[m]},Ws.setSourceType=function(m,p){Je[m]=p},Ws.registerForPluginStateChange=r.registerForPluginStateChange;var Jn=r.createLayout([{name:"a_pos",type:"Int16",components:2}]),dh=Ji(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Vb=Ji(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),wI=Ji(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),CI=Ji(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),ey=Ji("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ty=Ji(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),ay=Ji(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),iy=Ji("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Zb=Ji("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),zb=Ji("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),II=Ji(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),P_=Ji(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),G_=Ji(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ub=Ji(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),zr=Ji(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),ny=Ji(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Xu=Ji(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),qu=Ji(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Hc=Ji(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Xc=Ji(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Yu=Ji(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),qc=Ji(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Yc=Ji(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ku=Ji(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Hb=Ji(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Xb=Ji(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Ji(m,p){var f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=p.match(/attribute ([\w]+) ([\w]+)/g),T=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),W=k?k.concat(T):T,D={};return{fragmentSource:m=m.replace(f,(function(q,oe,be,ve,we){return D[we]=!0,oe==="define"?`
#ifndef HAS_UNIFORM_u_`+we+`
varying `+be+" "+ve+" "+we+`;
#else
uniform `+be+" "+ve+" u_"+we+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+we+`
    `+be+" "+ve+" "+we+" = u_"+we+`;
#endif
`})),vertexSource:p=p.replace(f,(function(q,oe,be,ve,we){var Oe=ve==="float"?"vec2":"vec4",We=we.match(/color/)?"color":Oe;return D[we]?oe==="define"?`
#ifndef HAS_UNIFORM_u_`+we+`
uniform lowp float u_`+we+`_t;
attribute `+be+" "+Oe+" a_"+we+`;
varying `+be+" "+ve+" "+we+`;
#else
uniform `+be+" "+ve+" u_"+we+`;
#endif
`:We==="vec4"?`
#ifndef HAS_UNIFORM_u_`+we+`
    `+we+" = a_"+we+`;
#else
    `+be+" "+ve+" "+we+" = u_"+we+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+we+`
    `+we+" = unpack_mix_"+We+"(a_"+we+", u_"+we+`_t);
#else
    `+be+" "+ve+" "+we+" = u_"+we+`;
#endif
`:oe==="define"?`
#ifndef HAS_UNIFORM_u_`+we+`
uniform lowp float u_`+we+`_t;
attribute `+be+" "+Oe+" a_"+we+`;
#else
uniform `+be+" "+ve+" u_"+we+`;
#endif
`:We==="vec4"?`
#ifndef HAS_UNIFORM_u_`+we+`
    `+be+" "+ve+" "+we+" = a_"+we+`;
#else
    `+be+" "+ve+" "+we+" = u_"+we+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+we+`
    `+be+" "+ve+" "+we+" = unpack_mix_"+We+"(a_"+we+", u_"+we+`_t);
#else
    `+be+" "+ve+" "+we+" = u_"+we+`;
#endif
`})),staticAttributes:v,staticUniforms:W}}var SI=Object.freeze({__proto__:null,prelude:dh,background:Vb,backgroundPattern:wI,circle:CI,clippingMask:ey,heatmap:ty,heatmapTexture:ay,collisionBox:iy,collisionCircle:Zb,debug:zb,fill:II,fillOutline:P_,fillOutlinePattern:G_,fillPattern:Ub,fillExtrusion:zr,fillExtrusionPattern:ny,hillshadePrepare:Xu,hillshade:qu,line:Hc,lineGradient:Xc,linePattern:Yu,lineSDF:qc,raster:Yc,symbolIcon:Ku,symbolSDF:Hb,symbolTextAndIcon:Xb}),pf=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function qb(m){for(var p=[],f=0;f<m.length;f++)if(m[f]!==null){var v=m[f].split(" ");p.push(v.pop())}return p}pf.prototype.bind=function(m,p,f,v,T,k,W,D){this.context=m;for(var q=this.boundPaintVertexBuffers.length!==v.length,oe=0;!q&&oe<v.length;oe++)this.boundPaintVertexBuffers[oe]!==v[oe]&&(q=!0);m.extVertexArrayObject&&this.vao&&this.boundProgram===p&&this.boundLayoutVertexBuffer===f&&!q&&this.boundIndexBuffer===T&&this.boundVertexOffset===k&&this.boundDynamicVertexBuffer===W&&this.boundDynamicVertexBuffer2===D?(m.bindVertexArrayOES.set(this.vao),W&&W.bind(),T&&T.dynamicDraw&&T.bind(),D&&D.bind()):this.freshBind(p,f,v,T,k,W,D)},pf.prototype.freshBind=function(m,p,f,v,T,k,W){var D,q=m.numAttributes,oe=this.context,be=oe.gl;if(oe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=oe.extVertexArrayObject.createVertexArrayOES(),oe.bindVertexArrayOES.set(this.vao),D=0,this.boundProgram=m,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=v,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=W;else{D=oe.currentNumAttributes||0;for(var ve=q;ve<D;ve++)be.disableVertexAttribArray(ve)}p.enableAttributes(be,m);for(var we=0,Oe=f;we<Oe.length;we+=1)Oe[we].enableAttributes(be,m);k&&k.enableAttributes(be,m),W&&W.enableAttributes(be,m),p.bind(),p.setVertexAttribPointers(be,m,T);for(var We=0,He=f;We<He.length;We+=1){var Te=He[We];Te.bind(),Te.setVertexAttribPointers(be,m,T)}k&&(k.bind(),k.setVertexAttribPointers(be,m,T)),v&&v.bind(),W&&(W.bind(),W.setVertexAttribPointers(be,m,T)),oe.currentNumAttributes=q},pf.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Yb=function(m,p,f,v,T,k){var W=m.gl;this.program=W.createProgram();for(var D=qb(f.staticAttributes),q=v?v.getBinderAttributes():[],oe=D.concat(q),be=f.staticUniforms?qb(f.staticUniforms):[],ve=v?v.getBinderUniforms():[],we=[],Oe=0,We=be.concat(ve);Oe<We.length;Oe+=1){var He=We[Oe];we.indexOf(He)<0&&we.push(He)}var Te=v?v.defines():[];k&&Te.push("#define OVERDRAW_INSPECTOR;");var Ue=Te.concat(dh.fragmentSource,f.fragmentSource).join(`
`),Ke=Te.concat(dh.vertexSource,f.vertexSource).join(`
`),at=W.createShader(W.FRAGMENT_SHADER);if(W.isContextLost())this.failedToCreate=!0;else{W.shaderSource(at,Ue),W.compileShader(at),W.attachShader(this.program,at);var ut=W.createShader(W.VERTEX_SHADER);if(W.isContextLost())this.failedToCreate=!0;else{W.shaderSource(ut,Ke),W.compileShader(ut),W.attachShader(this.program,ut),this.attributes={};var st={};this.numAttributes=oe.length;for(var dt=0;dt<this.numAttributes;dt++)oe[dt]&&(W.bindAttribLocation(this.program,dt,oe[dt]),this.attributes[oe[dt]]=dt);W.linkProgram(this.program),W.deleteShader(ut),W.deleteShader(at);for(var bt=0;bt<we.length;bt++){var Ft=we[bt];if(Ft&&!st[Ft]){var Gt=W.getUniformLocation(this.program,Ft);Gt&&(st[Ft]=Gt)}}this.fixedUniforms=T(m,st),this.binderUniforms=v?v.getUniforms(m,st):[]}}};function Kb(m,p,f){var v=1/xn(f,1,p.transform.tileZoom),T=Math.pow(2,f.tileID.overscaledZ),k=f.tileSize*Math.pow(2,p.transform.tileZoom)/T,W=k*(f.tileID.canonical.x+f.tileID.wrap*T),D=k*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[v,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[W>>16,D>>16],u_pixel_coord_lower:[65535&W,65535&D]}}Yb.prototype.draw=function(m,p,f,v,T,k,W,D,q,oe,be,ve,we,Oe,We,He){var Te,Ue=m.gl;if(!this.failedToCreate){for(var Ke in m.program.set(this.program),m.setDepthMode(f),m.setStencilMode(v),m.setColorMode(T),m.setCullFace(k),this.fixedUniforms)this.fixedUniforms[Ke].set(W[Ke]);Oe&&Oe.setUniforms(m,this.binderUniforms,ve,{zoom:we});for(var at=(Te={},Te[Ue.LINES]=2,Te[Ue.TRIANGLES]=3,Te[Ue.LINE_STRIP]=1,Te)[p],ut=0,st=be.get();ut<st.length;ut+=1){var dt=st[ut],bt=dt.vaos||(dt.vaos={});(bt[D]||(bt[D]=new pf)).bind(m,this,q,Oe?Oe.getPaintVertexBuffers():[],oe,dt.vertexOffset,We,He),Ue.drawElements(p,dt.primitiveLength*at,Ue.UNSIGNED_SHORT,dt.primitiveOffset*at*2)}}};var jb=function(m,p,f,v){var T=p.style.light,k=T.properties.get("position"),W=[k.x,k.y,k.z],D=r.create$1();T.properties.get("anchor")==="viewport"&&r.fromRotation(D,-p.transform.angle),r.transformMat3(W,W,D);var q=T.properties.get("color");return{u_matrix:m,u_lightpos:W,u_lightintensity:T.properties.get("intensity"),u_lightcolor:[q.r,q.g,q.b],u_vertical_gradient:+f,u_opacity:v}},Kc=function(m,p,f,v,T,k,W){return r.extend(jb(m,p,f,v),Kb(k,p,W),{u_height_factor:-Math.pow(2,T.overscaledZ)/W.tileSize/8})},ju=function(m){return{u_matrix:m}},jc=function(m,p,f,v){return r.extend(ju(m),Kb(f,p,v))},$b=function(m,p){return{u_matrix:m,u_world:p}},Jb=function(m,p,f,v,T){return r.extend(jc(m,p,f,v),{u_world:T})},ry=function(m,p,f,v){var T,k,W=m.transform;if(v.paint.get("circle-pitch-alignment")==="map"){var D=xn(f,1,W.zoom);T=!0,k=[D,D]}else T=!1,k=W.pixelsToGLUnits;return{u_camera_to_center_distance:W.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:m.translatePosMatrix(p.posMatrix,f,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+T,u_device_pixel_ratio:r.browser.devicePixelRatio,u_extrude_scale:k}},$c=function(m,p,f){var v=xn(f,1,p.zoom),T=Math.pow(2,p.zoom-f.tileID.overscaledZ),k=f.tileID.overscaleFactor();return{u_matrix:m,u_camera_to_center_distance:p.cameraToCenterDistance,u_pixels_to_tile_units:v,u_extrude_scale:[p.pixelsToGLUnits[0]/(v*T),p.pixelsToGLUnits[1]/(v*T)],u_overscale_factor:k}},Qb=function(m,p,f){return{u_matrix:m,u_inv_matrix:p,u_camera_to_center_distance:f.cameraToCenterDistance,u_viewport_size:[f.width,f.height]}},Jc=function(m,p,f){return f===void 0&&(f=1),{u_matrix:m,u_color:p,u_overlay:0,u_overlay_scale:f}},Qc=function(m){return{u_matrix:m}},ev=function(m,p,f,v){return{u_matrix:m,u_extrude_scale:xn(p,1,f),u_intensity:v}},W_=function(m,p,f){var v=m.transform;return{u_matrix:tv(m,p,f),u_ratio:1/xn(p,1,v.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},on=function(m,p,f,v){return r.extend(W_(m,p,f),{u_image:0,u_image_height:v})},yf=function(m,p,f,v){var T=m.transform,k=hh(p,T);return{u_matrix:tv(m,p,f),u_texsize:p.imageAtlasTexture.size,u_ratio:1/xn(p,1,T.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_image:0,u_scale:[k,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},AI=function(m,p,f,v,T){var k=m.lineAtlas,W=hh(p,m.transform),D=f.layout.get("line-cap")==="round",q=k.getDash(v.from,D),oe=k.getDash(v.to,D),be=q.width*T.fromScale,ve=oe.width*T.toScale;return r.extend(W_(m,p,f),{u_patternscale_a:[W/be,-q.height/2],u_patternscale_b:[W/ve,-oe.height/2],u_sdfgamma:k.width/(256*Math.min(be,ve)*r.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:q.y,u_tex_y_b:oe.y,u_mix:T.t})};function hh(m,p){return 1/xn(m,1,p.tileZoom)}function tv(m,p,f){return m.translatePosMatrix(p.tileID.posMatrix,p,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}var TI=function(m,p,f,v,T){return{u_matrix:m,u_tl_parent:p,u_scale_parent:f,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*T.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:T.paint.get("raster-brightness-min"),u_brightness_high:T.paint.get("raster-brightness-max"),u_saturation_factor:(W=T.paint.get("raster-saturation"),W>0?1-1/(1.001-W):-W),u_contrast_factor:(k=T.paint.get("raster-contrast"),k>0?1/(1-k):1+k),u_spin_weights:av(T.paint.get("raster-hue-rotate"))};var k,W};function av(m){m*=Math.PI/180;var p=Math.sin(m),f=Math.cos(m);return[(2*f+1)/3,(-Math.sqrt(3)*p-f+1)/3,(Math.sqrt(3)*p-f+1)/3]}var bf,_h=function(m,p,f,v,T,k,W,D,q,oe){var be=T.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:p?p.uSizeT:0,u_size:p?p.uSize:0,u_camera_to_center_distance:be.cameraToCenterDistance,u_pitch:be.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:be.width/be.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:k,u_label_plane_matrix:W,u_coord_matrix:D,u_is_text:+q,u_pitch_with_map:+v,u_texsize:oe,u_texture:0}},O_=function(m,p,f,v,T,k,W,D,q,oe,be){var ve=T.transform;return r.extend(_h(m,p,f,v,T,k,W,D,q,oe),{u_gamma_scale:v?Math.cos(ve._pitch)*ve.cameraToCenterDistance:1,u_device_pixel_ratio:r.browser.devicePixelRatio,u_is_halo:1})},vf=function(m,p,f,v,T,k,W,D,q,oe){return r.extend(O_(m,p,f,v,T,k,W,D,!0,q),{u_texsize_icon:oe,u_texture_icon:1})},F_=function(m,p,f){return{u_matrix:m,u_opacity:p,u_color:f}},mh=function(m,p,f,v,T,k){return r.extend((function(W,D,q,oe){var be=q.imageManager.getPattern(W.from.toString()),ve=q.imageManager.getPattern(W.to.toString()),we=q.imageManager.getPixelSize(),Oe=we.width,We=we.height,He=Math.pow(2,oe.tileID.overscaledZ),Te=oe.tileSize*Math.pow(2,q.transform.tileZoom)/He,Ue=Te*(oe.tileID.canonical.x+oe.tileID.wrap*He),Ke=Te*oe.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:be.tl,u_pattern_br_a:be.br,u_pattern_tl_b:ve.tl,u_pattern_br_b:ve.br,u_texsize:[Oe,We],u_mix:D.t,u_pattern_size_a:be.displaySize,u_pattern_size_b:ve.displaySize,u_scale_a:D.fromScale,u_scale_b:D.toScale,u_tile_units_to_pixels:1/xn(oe,1,q.transform.tileZoom),u_pixel_coord_upper:[Ue>>16,Ke>>16],u_pixel_coord_lower:[65535&Ue,65535&Ke]}})(v,k,f,T),{u_matrix:m,u_opacity:p})},iv={fillExtrusion:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_lightpos:new r.Uniform3f(m,p.u_lightpos),u_lightintensity:new r.Uniform1f(m,p.u_lightintensity),u_lightcolor:new r.Uniform3f(m,p.u_lightcolor),u_vertical_gradient:new r.Uniform1f(m,p.u_vertical_gradient),u_opacity:new r.Uniform1f(m,p.u_opacity)}},fillExtrusionPattern:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_lightpos:new r.Uniform3f(m,p.u_lightpos),u_lightintensity:new r.Uniform1f(m,p.u_lightintensity),u_lightcolor:new r.Uniform3f(m,p.u_lightcolor),u_vertical_gradient:new r.Uniform1f(m,p.u_vertical_gradient),u_height_factor:new r.Uniform1f(m,p.u_height_factor),u_image:new r.Uniform1i(m,p.u_image),u_texsize:new r.Uniform2f(m,p.u_texsize),u_pixel_coord_upper:new r.Uniform2f(m,p.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(m,p.u_pixel_coord_lower),u_scale:new r.Uniform3f(m,p.u_scale),u_fade:new r.Uniform1f(m,p.u_fade),u_opacity:new r.Uniform1f(m,p.u_opacity)}},fill:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix)}},fillPattern:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_image:new r.Uniform1i(m,p.u_image),u_texsize:new r.Uniform2f(m,p.u_texsize),u_pixel_coord_upper:new r.Uniform2f(m,p.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(m,p.u_pixel_coord_lower),u_scale:new r.Uniform3f(m,p.u_scale),u_fade:new r.Uniform1f(m,p.u_fade)}},fillOutline:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_world:new r.Uniform2f(m,p.u_world)}},fillOutlinePattern:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_world:new r.Uniform2f(m,p.u_world),u_image:new r.Uniform1i(m,p.u_image),u_texsize:new r.Uniform2f(m,p.u_texsize),u_pixel_coord_upper:new r.Uniform2f(m,p.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(m,p.u_pixel_coord_lower),u_scale:new r.Uniform3f(m,p.u_scale),u_fade:new r.Uniform1f(m,p.u_fade)}},circle:function(m,p){return{u_camera_to_center_distance:new r.Uniform1f(m,p.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(m,p.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(m,p.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(m,p.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(m,p.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(m,p.u_matrix)}},collisionBox:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_camera_to_center_distance:new r.Uniform1f(m,p.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(m,p.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(m,p.u_extrude_scale),u_overscale_factor:new r.Uniform1f(m,p.u_overscale_factor)}},collisionCircle:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_inv_matrix:new r.UniformMatrix4f(m,p.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(m,p.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(m,p.u_viewport_size)}},debug:function(m,p){return{u_color:new r.UniformColor(m,p.u_color),u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_overlay:new r.Uniform1i(m,p.u_overlay),u_overlay_scale:new r.Uniform1f(m,p.u_overlay_scale)}},clippingMask:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix)}},heatmap:function(m,p){return{u_extrude_scale:new r.Uniform1f(m,p.u_extrude_scale),u_intensity:new r.Uniform1f(m,p.u_intensity),u_matrix:new r.UniformMatrix4f(m,p.u_matrix)}},heatmapTexture:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_world:new r.Uniform2f(m,p.u_world),u_image:new r.Uniform1i(m,p.u_image),u_color_ramp:new r.Uniform1i(m,p.u_color_ramp),u_opacity:new r.Uniform1f(m,p.u_opacity)}},hillshade:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_image:new r.Uniform1i(m,p.u_image),u_latrange:new r.Uniform2f(m,p.u_latrange),u_light:new r.Uniform2f(m,p.u_light),u_shadow:new r.UniformColor(m,p.u_shadow),u_highlight:new r.UniformColor(m,p.u_highlight),u_accent:new r.UniformColor(m,p.u_accent)}},hillshadePrepare:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_image:new r.Uniform1i(m,p.u_image),u_dimension:new r.Uniform2f(m,p.u_dimension),u_zoom:new r.Uniform1f(m,p.u_zoom),u_unpack:new r.Uniform4f(m,p.u_unpack)}},line:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_ratio:new r.Uniform1f(m,p.u_ratio),u_device_pixel_ratio:new r.Uniform1f(m,p.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(m,p.u_units_to_pixels)}},lineGradient:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_ratio:new r.Uniform1f(m,p.u_ratio),u_device_pixel_ratio:new r.Uniform1f(m,p.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(m,p.u_units_to_pixels),u_image:new r.Uniform1i(m,p.u_image),u_image_height:new r.Uniform1f(m,p.u_image_height)}},linePattern:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_texsize:new r.Uniform2f(m,p.u_texsize),u_ratio:new r.Uniform1f(m,p.u_ratio),u_device_pixel_ratio:new r.Uniform1f(m,p.u_device_pixel_ratio),u_image:new r.Uniform1i(m,p.u_image),u_units_to_pixels:new r.Uniform2f(m,p.u_units_to_pixels),u_scale:new r.Uniform3f(m,p.u_scale),u_fade:new r.Uniform1f(m,p.u_fade)}},lineSDF:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_ratio:new r.Uniform1f(m,p.u_ratio),u_device_pixel_ratio:new r.Uniform1f(m,p.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(m,p.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(m,p.u_patternscale_a),u_patternscale_b:new r.Uniform2f(m,p.u_patternscale_b),u_sdfgamma:new r.Uniform1f(m,p.u_sdfgamma),u_image:new r.Uniform1i(m,p.u_image),u_tex_y_a:new r.Uniform1f(m,p.u_tex_y_a),u_tex_y_b:new r.Uniform1f(m,p.u_tex_y_b),u_mix:new r.Uniform1f(m,p.u_mix)}},raster:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_tl_parent:new r.Uniform2f(m,p.u_tl_parent),u_scale_parent:new r.Uniform1f(m,p.u_scale_parent),u_buffer_scale:new r.Uniform1f(m,p.u_buffer_scale),u_fade_t:new r.Uniform1f(m,p.u_fade_t),u_opacity:new r.Uniform1f(m,p.u_opacity),u_image0:new r.Uniform1i(m,p.u_image0),u_image1:new r.Uniform1i(m,p.u_image1),u_brightness_low:new r.Uniform1f(m,p.u_brightness_low),u_brightness_high:new r.Uniform1f(m,p.u_brightness_high),u_saturation_factor:new r.Uniform1f(m,p.u_saturation_factor),u_contrast_factor:new r.Uniform1f(m,p.u_contrast_factor),u_spin_weights:new r.Uniform3f(m,p.u_spin_weights)}},symbolIcon:function(m,p){return{u_is_size_zoom_constant:new r.Uniform1i(m,p.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(m,p.u_is_size_feature_constant),u_size_t:new r.Uniform1f(m,p.u_size_t),u_size:new r.Uniform1f(m,p.u_size),u_camera_to_center_distance:new r.Uniform1f(m,p.u_camera_to_center_distance),u_pitch:new r.Uniform1f(m,p.u_pitch),u_rotate_symbol:new r.Uniform1i(m,p.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(m,p.u_aspect_ratio),u_fade_change:new r.Uniform1f(m,p.u_fade_change),u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(m,p.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(m,p.u_coord_matrix),u_is_text:new r.Uniform1i(m,p.u_is_text),u_pitch_with_map:new r.Uniform1i(m,p.u_pitch_with_map),u_texsize:new r.Uniform2f(m,p.u_texsize),u_texture:new r.Uniform1i(m,p.u_texture)}},symbolSDF:function(m,p){return{u_is_size_zoom_constant:new r.Uniform1i(m,p.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(m,p.u_is_size_feature_constant),u_size_t:new r.Uniform1f(m,p.u_size_t),u_size:new r.Uniform1f(m,p.u_size),u_camera_to_center_distance:new r.Uniform1f(m,p.u_camera_to_center_distance),u_pitch:new r.Uniform1f(m,p.u_pitch),u_rotate_symbol:new r.Uniform1i(m,p.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(m,p.u_aspect_ratio),u_fade_change:new r.Uniform1f(m,p.u_fade_change),u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(m,p.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(m,p.u_coord_matrix),u_is_text:new r.Uniform1i(m,p.u_is_text),u_pitch_with_map:new r.Uniform1i(m,p.u_pitch_with_map),u_texsize:new r.Uniform2f(m,p.u_texsize),u_texture:new r.Uniform1i(m,p.u_texture),u_gamma_scale:new r.Uniform1f(m,p.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(m,p.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(m,p.u_is_halo)}},symbolTextAndIcon:function(m,p){return{u_is_size_zoom_constant:new r.Uniform1i(m,p.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(m,p.u_is_size_feature_constant),u_size_t:new r.Uniform1f(m,p.u_size_t),u_size:new r.Uniform1f(m,p.u_size),u_camera_to_center_distance:new r.Uniform1f(m,p.u_camera_to_center_distance),u_pitch:new r.Uniform1f(m,p.u_pitch),u_rotate_symbol:new r.Uniform1i(m,p.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(m,p.u_aspect_ratio),u_fade_change:new r.Uniform1f(m,p.u_fade_change),u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(m,p.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(m,p.u_coord_matrix),u_is_text:new r.Uniform1i(m,p.u_is_text),u_pitch_with_map:new r.Uniform1i(m,p.u_pitch_with_map),u_texsize:new r.Uniform2f(m,p.u_texsize),u_texsize_icon:new r.Uniform2f(m,p.u_texsize_icon),u_texture:new r.Uniform1i(m,p.u_texture),u_texture_icon:new r.Uniform1i(m,p.u_texture_icon),u_gamma_scale:new r.Uniform1f(m,p.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(m,p.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(m,p.u_is_halo)}},background:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_opacity:new r.Uniform1f(m,p.u_opacity),u_color:new r.UniformColor(m,p.u_color)}},backgroundPattern:function(m,p){return{u_matrix:new r.UniformMatrix4f(m,p.u_matrix),u_opacity:new r.Uniform1f(m,p.u_opacity),u_image:new r.Uniform1i(m,p.u_image),u_pattern_tl_a:new r.Uniform2f(m,p.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(m,p.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(m,p.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(m,p.u_pattern_br_b),u_texsize:new r.Uniform2f(m,p.u_texsize),u_mix:new r.Uniform1f(m,p.u_mix),u_pattern_size_a:new r.Uniform2f(m,p.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(m,p.u_pattern_size_b),u_scale_a:new r.Uniform1f(m,p.u_scale_a),u_scale_b:new r.Uniform1f(m,p.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(m,p.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(m,p.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(m,p.u_tile_units_to_pixels)}}};function fh(m,p,f,v,T,k,W){for(var D=m.context,q=D.gl,oe=m.useProgram("collisionBox"),be=[],ve=0,we=0,Oe=0;Oe<v.length;Oe++){var We=v[Oe],He=p.getTile(We),Te=He.getBucket(f);if(Te){var Ue=We.posMatrix;T[0]===0&&T[1]===0||(Ue=m.translatePosMatrix(We.posMatrix,He,T,k));var Ke=W?Te.textCollisionBox:Te.iconCollisionBox,at=Te.collisionCircleArray;if(at.length>0){var ut=r.create(),st=Ue;r.mul(ut,Te.placementInvProjMatrix,m.transform.glCoordMatrix),r.mul(ut,ut,Te.placementViewportMatrix),be.push({circleArray:at,circleOffset:we,transform:st,invTransform:ut}),we=ve+=at.length/4}Ke&&oe.draw(D,q.LINES,xe.disabled,Se.disabled,m.colorModeForRenderPass(),ze.disabled,$c(Ue,m.transform,He),f.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,null,m.transform.zoom,null,null,Ke.collisionVertexBuffer)}}if(W&&be.length){var dt=m.useProgram("collisionCircle"),bt=new r.StructArrayLayout2f1f2i16;bt.resize(4*ve),bt._trim();for(var Ft=0,Gt=0,ea=be;Gt<ea.length;Gt+=1)for(var ya=ea[Gt],Ca=0;Ca<ya.circleArray.length/4;Ca++){var wa=4*Ca,vi=ya.circleArray[wa+0],ia=ya.circleArray[wa+1],Wa=ya.circleArray[wa+2],Xa=ya.circleArray[wa+3];bt.emplace(Ft++,vi,ia,Wa,Xa,0),bt.emplace(Ft++,vi,ia,Wa,Xa,1),bt.emplace(Ft++,vi,ia,Wa,Xa,2),bt.emplace(Ft++,vi,ia,Wa,Xa,3)}(!bf||bf.length<2*ve)&&(bf=(function(Wn){var ts=2*Wn,Lr=new r.StructArrayLayout3ui6;Lr.resize(ts),Lr._trim();for(var Rn=0;Rn<ts;Rn++){var Hn=6*Rn;Lr.uint16[Hn+0]=4*Rn+0,Lr.uint16[Hn+1]=4*Rn+1,Lr.uint16[Hn+2]=4*Rn+2,Lr.uint16[Hn+3]=4*Rn+2,Lr.uint16[Hn+4]=4*Rn+3,Lr.uint16[Hn+5]=4*Rn+0}return Lr})(ve));for(var Ga=D.createIndexBuffer(bf,!0),Pa=D.createVertexBuffer(bt,r.collisionCircleLayout.members,!0),Ha=0,Ra=be;Ha<Ra.length;Ha+=1){var Ta=Ra[Ha],yr=Qb(Ta.transform,Ta.invTransform,m.transform);dt.draw(D,q.TRIANGLES,xe.disabled,Se.disabled,m.colorModeForRenderPass(),ze.disabled,yr,f.id,Pa,Ga,r.SegmentVector.simpleSegment(0,2*Ta.circleOffset,Ta.circleArray.length,Ta.circleArray.length/2),null,m.transform.zoom,null,null,null)}Pa.destroy(),Ga.destroy()}}var nl=r.identity(new Float32Array(16));function nv(m,p,f,v,T,k){var W=r.getAnchorAlignment(m),D=-(W.horizontalAlign-.5)*p,q=-(W.verticalAlign-.5)*f,oe=r.evaluateVariableOffset(m,v);return new r.Point((D/T+oe[0])*k,(q/T+oe[1])*k)}function rv(m,p,f,v,T,k,W,D,q,oe,be){var ve=m.text.placedSymbolArray,we=m.text.dynamicLayoutVertexArray,Oe=m.icon.dynamicLayoutVertexArray,We={};we.clear();for(var He=0;He<ve.length;He++){var Te=ve.get(He),Ue=Te.hidden||!Te.crossTileID||m.allowVerticalPlacement&&!Te.placedOrientation?null:v[Te.crossTileID];if(Ue){var Ke=new r.Point(Te.anchorX,Te.anchorY),at=Ea(Ke,f?D:W),ut=bi(k.cameraToCenterDistance,at.signedDistanceFromCamera),st=T.evaluateSizeForFeature(m.textSizeData,oe,Te)*ut/r.ONE_EM;f&&(st*=m.tilePixelRatio/q);for(var dt=nv(Ue.anchor,Ue.width,Ue.height,Ue.textOffset,Ue.textBoxScale,st),bt=f?Ea(Ke.add(dt),W).point:at.point.add(p?dt.rotate(-k.angle):dt),Ft=m.allowVerticalPlacement&&Te.placedOrientation===r.WritingMode.vertical?Math.PI/2:0,Gt=0;Gt<Te.numGlyphs;Gt++)r.addDynamicAttributes(we,bt,Ft);be&&Te.associatedIconIndex>=0&&(We[Te.associatedIconIndex]={shiftedAnchor:bt,angle:Ft})}else ss(Te.numGlyphs,we)}if(be){Oe.clear();for(var ea=m.icon.placedSymbolArray,ya=0;ya<ea.length;ya++){var Ca=ea.get(ya);if(Ca.hidden)ss(Ca.numGlyphs,Oe);else{var wa=We[ya];if(wa)for(var vi=0;vi<Ca.numGlyphs;vi++)r.addDynamicAttributes(Oe,wa.shiftedAnchor,wa.angle);else ss(Ca.numGlyphs,Oe)}}m.icon.dynamicLayoutVertexBuffer.updateData(Oe)}m.text.dynamicLayoutVertexBuffer.updateData(we)}function sv(m,p,f){return f.iconsInText&&p?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function ed(m,p,f,v,T,k,W,D,q,oe,be,ve){for(var we=m.context,Oe=we.gl,We=m.transform,He=D==="map",Te=q==="map",Ue=He&&f.layout.get("symbol-placement")!=="point",Ke=He&&!Te&&!Ue,at=f.layout.get("symbol-sort-key").constantOr(1)!==void 0,ut=!1,st=m.depthModeForSublayer(0,xe.ReadOnly),dt=f.layout.get("text-variable-anchor"),bt=[],Ft=0,Gt=v;Ft<Gt.length;Ft+=1){var ea=Gt[Ft],ya=p.getTile(ea),Ca=ya.getBucket(f);if(Ca){var wa=T?Ca.text:Ca.icon;if(wa&&wa.segments.get().length){var vi=wa.programConfigurations.get(f.id),ia=T||Ca.sdfIcons,Wa=T?Ca.textSizeData:Ca.iconSizeData,Xa=Te||We.pitch!==0,Ga=m.useProgram(sv(ia,T,Ca),vi),Pa=r.evaluateSizeForZoom(Wa,We.zoom),Ha=void 0,Ra=[0,0],Ta=void 0,yr=void 0,Wn=null,ts=void 0;if(T)Ta=ya.glyphAtlasTexture,yr=Oe.LINEAR,Ha=ya.glyphAtlasTexture.size,Ca.iconsInText&&(Ra=ya.imageAtlasTexture.size,Wn=ya.imageAtlasTexture,ts=Xa||m.options.rotating||m.options.zooming||Wa.kind==="composite"||Wa.kind==="camera"?Oe.LINEAR:Oe.NEAREST);else{var Lr=f.layout.get("icon-size").constantOr(0)!==1||Ca.iconsNeedLinear;Ta=ya.imageAtlasTexture,yr=ia||m.options.rotating||m.options.zooming||Lr||Xa?Oe.LINEAR:Oe.NEAREST,Ha=ya.imageAtlasTexture.size}var Rn=xn(ya,1,m.transform.zoom),Hn=an(ea.posMatrix,Te,He,m.transform,Rn),Vs=ki(ea.posMatrix,Te,He,m.transform,Rn),cs=dt&&Ca.hasTextData(),ac=f.layout.get("icon-text-fit")!=="none"&&cs&&Ca.hasIconData();Ue&&M_(Ca,ea.posMatrix,m,T,Hn,Vs,Te,oe);var ws=m.translatePosMatrix(ea.posMatrix,ya,k,W),ul=Ue||T&&dt||ac?nl:Hn,Go=m.translatePosMatrix(Vs,ya,k,W,!0),K_=ia&&f.paint.get(T?"text-halo-width":"icon-halo-width").constantOr(1)!==0,xh={program:Ga,buffers:wa,uniformValues:ia?Ca.iconsInText?vf(Wa.kind,Pa,Ke,Te,m,ws,ul,Go,Ha,Ra):O_(Wa.kind,Pa,Ke,Te,m,ws,ul,Go,T,Ha):_h(Wa.kind,Pa,Ke,Te,m,ws,ul,Go,T,Ha),atlasTexture:Ta,atlasTextureIcon:Wn,atlasInterpolation:yr,atlasInterpolationIcon:ts,isSDF:ia,hasHalo:K_};if(at&&Ca.canOverlap){ut=!0;for(var ic=0,wh=wa.segments.get();ic<wh.length;ic+=1){var j_=wh[ic];bt.push({segments:new r.SegmentVector([j_]),sortKey:j_.sortKey,state:xh})}}else bt.push({segments:wa.segments,sortKey:0,state:xh})}}}ut&&bt.sort((function(nc,sd){return nc.sortKey-sd.sortKey}));for(var Wl=0,$_=bt;Wl<$_.length;Wl+=1){var Ol=$_[Wl],br=Ol.state;if(we.activeTexture.set(Oe.TEXTURE0),br.atlasTexture.bind(br.atlasInterpolation,Oe.CLAMP_TO_EDGE),br.atlasTextureIcon&&(we.activeTexture.set(Oe.TEXTURE1),br.atlasTextureIcon&&br.atlasTextureIcon.bind(br.atlasInterpolationIcon,Oe.CLAMP_TO_EDGE)),br.isSDF){var ou=br.uniformValues;br.hasHalo&&(ou.u_is_halo=1,N_(br.buffers,Ol.segments,f,m,br.program,st,be,ve,ou)),ou.u_is_halo=0}N_(br.buffers,Ol.segments,f,m,br.program,st,be,ve,br.uniformValues)}}function N_(m,p,f,v,T,k,W,D,q){var oe=v.context;T.draw(oe,oe.gl.TRIANGLES,k,W,D,ze.disabled,q,f.id,m.layoutVertexBuffer,m.indexBuffer,p,f.paint,v.transform.zoom,m.programConfigurations.get(f.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function xf(m,p,f,v,T,k,W){var D,q,oe,be,ve,we=m.context.gl,Oe=f.paint.get("fill-pattern"),We=Oe&&Oe.constantOr(1),He=f.getCrossfadeParameters();W?(q=We&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",D=we.LINES):(q=We?"fillPattern":"fill",D=we.TRIANGLES);for(var Te=0,Ue=v;Te<Ue.length;Te+=1){var Ke=Ue[Te],at=p.getTile(Ke);if(!We||at.patternsLoaded()){var ut=at.getBucket(f);if(ut){var st=ut.programConfigurations.get(f.id),dt=m.useProgram(q,st);We&&(m.context.activeTexture.set(we.TEXTURE0),at.imageAtlasTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE),st.updatePaintBuffers(He));var bt=Oe.constantOr(null);if(bt&&at.imageAtlas){var Ft=at.imageAtlas,Gt=Ft.patternPositions[bt.to.toString()],ea=Ft.patternPositions[bt.from.toString()];Gt&&ea&&st.setConstantPatternPositions(Gt,ea)}var ya=m.translatePosMatrix(Ke.posMatrix,at,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(W){be=ut.indexBuffer2,ve=ut.segments2;var Ca=[we.drawingBufferWidth,we.drawingBufferHeight];oe=q==="fillOutlinePattern"&&We?Jb(ya,m,He,at,Ca):$b(ya,Ca)}else be=ut.indexBuffer,ve=ut.segments,oe=We?jc(ya,m,He,at):ju(ya);dt.draw(m.context,D,T,m.stencilModeForClipping(Ke),k,ze.disabled,oe,f.id,ut.layoutVertexBuffer,be,ve,f.paint,m.transform.zoom,st)}}}}function sy(m,p,f,v,T,k,W){for(var D=m.context,q=D.gl,oe=f.paint.get("fill-extrusion-pattern"),be=oe.constantOr(1),ve=f.getCrossfadeParameters(),we=f.paint.get("fill-extrusion-opacity"),Oe=0,We=v;Oe<We.length;Oe+=1){var He=We[Oe],Te=p.getTile(He),Ue=Te.getBucket(f);if(Ue){var Ke=Ue.programConfigurations.get(f.id),at=m.useProgram(be?"fillExtrusionPattern":"fillExtrusion",Ke);be&&(m.context.activeTexture.set(q.TEXTURE0),Te.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Ke.updatePaintBuffers(ve));var ut=oe.constantOr(null);if(ut&&Te.imageAtlas){var st=Te.imageAtlas,dt=st.patternPositions[ut.to.toString()],bt=st.patternPositions[ut.from.toString()];dt&&bt&&Ke.setConstantPatternPositions(dt,bt)}var Ft=m.translatePosMatrix(He.posMatrix,Te,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),Gt=f.paint.get("fill-extrusion-vertical-gradient"),ea=be?Kc(Ft,m,Gt,we,He,ve,Te):jb(Ft,m,Gt,we);at.draw(D,D.gl.TRIANGLES,T,k,W,ze.backCCW,ea,f.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,f.paint,m.transform.zoom,Ke)}}}function wf(m,p,f,v,T,k){var W=m.context,D=W.gl,q=p.fbo;if(q){var oe=m.useProgram("hillshade");W.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,q.colorAttachment.get());var be=(function(ve,we,Oe){var We=Oe.paint.get("hillshade-shadow-color"),He=Oe.paint.get("hillshade-highlight-color"),Te=Oe.paint.get("hillshade-accent-color"),Ue=Oe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Oe.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ue-=ve.transform.angle);var Ke,at,ut,st=!ve.options.moving;return{u_matrix:ve.transform.calculatePosMatrix(we.tileID.toUnwrapped(),st),u_image:0,u_latrange:(Ke=we.tileID,at=Math.pow(2,Ke.canonical.z),ut=Ke.canonical.y,[new r.MercatorCoordinate(0,ut/at).toLngLat().lat,new r.MercatorCoordinate(0,(ut+1)/at).toLngLat().lat]),u_light:[Oe.paint.get("hillshade-exaggeration"),Ue],u_shadow:We,u_highlight:He,u_accent:Te}})(m,p,f);oe.draw(W,D.TRIANGLES,v,T,k,ze.disabled,be,f.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}}function EI(m,p,f,v,T,k){var W=m.context,D=W.gl,q=p.dem;if(q&&q.data){var oe=q.dim,be=q.stride,ve=q.getPixels();if(W.activeTexture.set(D.TEXTURE1),W.pixelStoreUnpackPremultiplyAlpha.set(!1),p.demTexture=p.demTexture||m.getTileTexture(be),p.demTexture){var we=p.demTexture;we.update(ve,{premultiply:!1}),we.bind(D.NEAREST,D.CLAMP_TO_EDGE)}else p.demTexture=new r.Texture(W,ve,D.RGBA,{premultiply:!1}),p.demTexture.bind(D.NEAREST,D.CLAMP_TO_EDGE);W.activeTexture.set(D.TEXTURE0);var Oe=p.fbo;if(!Oe){var We=new r.Texture(W,{width:oe,height:oe,data:null},D.RGBA);We.bind(D.LINEAR,D.CLAMP_TO_EDGE),(Oe=p.fbo=W.createFramebuffer(oe,oe,!0)).colorAttachment.set(We.texture)}W.bindFramebuffer.set(Oe.framebuffer),W.viewport.set([0,0,oe,oe]),m.useProgram("hillshadePrepare").draw(W,D.TRIANGLES,v,T,k,ze.disabled,(function(He,Te){var Ue=Te.stride,Ke=r.create();return r.ortho(Ke,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(Ke,Ke,[0,-r.EXTENT,0]),{u_matrix:Ke,u_image:1,u_dimension:[Ue,Ue],u_zoom:He.overscaledZ,u_unpack:Te.getUnpackVector()}})(p.tileID,q),f.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments),p.needsHillshadePrepare=!1}}function Cf(m,p,f,v,T){var k=v.paint.get("raster-fade-duration");if(k>0){var W=r.browser.now(),D=(W-m.timeAdded)/k,q=p?(W-p.timeAdded)/k:-1,oe=f.getSource(),be=T.coveringZoomLevel({tileSize:oe.tileSize,roundZoom:oe.roundZoom}),ve=!p||Math.abs(p.tileID.overscaledZ-be)>Math.abs(m.tileID.overscaledZ-be),we=ve&&m.refreshedUponExpiration?1:r.clamp(ve?D:1-q,0,1);return m.refreshedUponExpiration&&D>=1&&(m.refreshedUponExpiration=!1),p?{opacity:1,mix:1-we}:{opacity:we,mix:0}}return{opacity:1,mix:0}}var oy=new r.Color(1,0,0,1),ov=new r.Color(0,1,0,1),lv=new r.Color(0,0,1,1),If=new r.Color(1,0,1,1),ly=new r.Color(0,1,1,1);function uy(m,p,f,v){B_(m,0,p+f/2,m.transform.width,f,v)}function cy(m,p,f,v){B_(m,p-f/2,0,f,m.transform.height,v)}function B_(m,p,f,v,T,k){var W=m.context,D=W.gl;D.enable(D.SCISSOR_TEST),D.scissor(p*r.browser.devicePixelRatio,f*r.browser.devicePixelRatio,v*r.browser.devicePixelRatio,T*r.browser.devicePixelRatio),W.clear({color:k}),D.disable(D.SCISSOR_TEST)}function uv(m,p,f){var v=m.context,T=v.gl,k=f.posMatrix,W=m.useProgram("debug"),D=xe.disabled,q=Se.disabled,oe=m.colorModeForRenderPass();v.activeTexture.set(T.TEXTURE0),m.emptyTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),W.draw(v,T.LINE_STRIP,D,q,oe,ze.disabled,Jc(k,r.Color.red),"$debug",m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments);var be=p.getTileByID(f.key).latestRawTileData,ve=Math.floor((be&&be.byteLength||0)/1024),we=p.getTile(f).tileSize,Oe=512/Math.min(we,512)*(f.overscaledZ/m.transform.zoom)*.5,We=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(We+=" => "+f.overscaledZ),(function(He,Te){He.initDebugOverlayCanvas();var Ue=He.debugOverlayCanvas,Ke=He.context.gl,at=He.debugOverlayCanvas.getContext("2d");at.clearRect(0,0,Ue.width,Ue.height),at.shadowColor="white",at.shadowBlur=2,at.lineWidth=1.5,at.strokeStyle="white",at.textBaseline="top",at.font="bold 36px Open Sans, sans-serif",at.fillText(Te,5,5),at.strokeText(Te,5,5),He.debugOverlayTexture.update(Ue),He.debugOverlayTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE)})(m,We+" "+ve+"kb"),W.draw(v,T.TRIANGLES,D,q,Xe.alphaBlended,ze.disabled,Jc(k,r.Color.transparent,Oe),"$debug",m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments)}var td={symbol:function(m,p,f,v,T){if(m.renderPass==="translucent"){var k=Se.disabled,W=m.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&(function(D,q,oe,be,ve,we,Oe){for(var We=q.transform,He=ve==="map",Te=we==="map",Ue=0,Ke=D;Ue<Ke.length;Ue+=1){var at=Ke[Ue],ut=be.getTile(at),st=ut.getBucket(oe);if(st&&st.text&&st.text.segments.get().length){var dt=r.evaluateSizeForZoom(st.textSizeData,We.zoom),bt=xn(ut,1,q.transform.zoom),Ft=an(at.posMatrix,Te,He,q.transform,bt),Gt=oe.layout.get("icon-text-fit")!=="none"&&st.hasIconData();if(dt){var ea=Math.pow(2,We.zoom-ut.tileID.overscaledZ);rv(st,He,Te,Oe,r.symbolSize,We,Ft,at.posMatrix,ea,dt,Gt)}}}})(v,m,f,p,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),T),f.paint.get("icon-opacity").constantOr(1)!==0&&ed(m,p,f,v,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),k,W),f.paint.get("text-opacity").constantOr(1)!==0&&ed(m,p,f,v,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),k,W),p.map.showCollisionBoxes&&(fh(m,p,f,v,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),fh(m,p,f,v,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))}},circle:function(m,p,f,v){if(m.renderPass==="translucent"){var T=f.paint.get("circle-opacity"),k=f.paint.get("circle-stroke-width"),W=f.paint.get("circle-stroke-opacity"),D=f.layout.get("circle-sort-key").constantOr(1)!==void 0;if(T.constantOr(1)!==0||k.constantOr(1)!==0&&W.constantOr(1)!==0){for(var q=m.context,oe=q.gl,be=m.depthModeForSublayer(0,xe.ReadOnly),ve=Se.disabled,we=m.colorModeForRenderPass(),Oe=[],We=0;We<v.length;We++){var He=v[We],Te=p.getTile(He),Ue=Te.getBucket(f);if(Ue){var Ke=Ue.programConfigurations.get(f.id),at={programConfiguration:Ke,program:m.useProgram("circle",Ke),layoutVertexBuffer:Ue.layoutVertexBuffer,indexBuffer:Ue.indexBuffer,uniformValues:ry(m,He,Te,f)};if(D)for(var ut=0,st=Ue.segments.get();ut<st.length;ut+=1){var dt=st[ut];Oe.push({segments:new r.SegmentVector([dt]),sortKey:dt.sortKey,state:at})}else Oe.push({segments:Ue.segments,sortKey:0,state:at})}}D&&Oe.sort((function(ya,Ca){return ya.sortKey-Ca.sortKey}));for(var bt=0,Ft=Oe;bt<Ft.length;bt+=1){var Gt=Ft[bt],ea=Gt.state;ea.program.draw(q,oe.TRIANGLES,be,ve,we,ze.disabled,ea.uniformValues,f.id,ea.layoutVertexBuffer,ea.indexBuffer,Gt.segments,f.paint,m.transform.zoom,ea.programConfiguration)}}}},heatmap:function(m,p,f,v){if(f.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){var T=m.context,k=T.gl,W=Se.disabled,D=new Xe([k.ONE,k.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(Oe,We,He){var Te=Oe.gl;Oe.activeTexture.set(Te.TEXTURE1),Oe.viewport.set([0,0,We.width/4,We.height/4]);var Ue=He.heatmapFbo;if(Ue)Te.bindTexture(Te.TEXTURE_2D,Ue.colorAttachment.get()),Oe.bindFramebuffer.set(Ue.framebuffer);else{var Ke=Te.createTexture();Te.bindTexture(Te.TEXTURE_2D,Ke),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_S,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_T,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,Te.LINEAR),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,Te.LINEAR),Ue=He.heatmapFbo=Oe.createFramebuffer(We.width/4,We.height/4,!1),(function(at,ut,st,dt){var bt=at.gl;bt.texImage2D(bt.TEXTURE_2D,0,bt.RGBA,ut.width/4,ut.height/4,0,bt.RGBA,at.extRenderToTextureHalfFloat?at.extTextureHalfFloat.HALF_FLOAT_OES:bt.UNSIGNED_BYTE,null),dt.colorAttachment.set(st)})(Oe,We,Ke,Ue)}})(T,m,f),T.clear({color:r.Color.transparent});for(var q=0;q<v.length;q++){var oe=v[q];if(!p.hasRenderableParent(oe)){var be=p.getTile(oe),ve=be.getBucket(f);if(ve){var we=ve.programConfigurations.get(f.id);m.useProgram("heatmap",we).draw(T,k.TRIANGLES,xe.disabled,W,D,ze.disabled,ev(oe.posMatrix,be,m.transform.zoom,f.paint.get("heatmap-intensity")),f.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,f.paint,m.transform.zoom,we)}}}T.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),(function(Oe,We){var He=Oe.context,Te=He.gl,Ue=We.heatmapFbo;if(Ue){He.activeTexture.set(Te.TEXTURE0),Te.bindTexture(Te.TEXTURE_2D,Ue.colorAttachment.get()),He.activeTexture.set(Te.TEXTURE1);var Ke=We.colorRampTexture;Ke||(Ke=We.colorRampTexture=new r.Texture(He,We.colorRamp,Te.RGBA)),Ke.bind(Te.LINEAR,Te.CLAMP_TO_EDGE),Oe.useProgram("heatmapTexture").draw(He,Te.TRIANGLES,xe.disabled,Se.disabled,Oe.colorModeForRenderPass(),ze.disabled,(function(at,ut,st,dt){var bt=r.create();r.ortho(bt,0,at.width,at.height,0,0,1);var Ft=at.context.gl;return{u_matrix:bt,u_world:[Ft.drawingBufferWidth,Ft.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ut.paint.get("heatmap-opacity")}})(Oe,We),We.id,Oe.viewportBuffer,Oe.quadTriangleIndexBuffer,Oe.viewportSegments,We.paint,Oe.transform.zoom)}})(m,f))},line:function(m,p,f,v){if(m.renderPass==="translucent"){var T=f.paint.get("line-opacity"),k=f.paint.get("line-width");if(T.constantOr(1)!==0&&k.constantOr(1)!==0)for(var W=m.depthModeForSublayer(0,xe.ReadOnly),D=m.colorModeForRenderPass(),q=f.paint.get("line-dasharray"),oe=f.paint.get("line-pattern"),be=oe.constantOr(1),ve=f.paint.get("line-gradient"),we=f.getCrossfadeParameters(),Oe=be?"linePattern":q?"lineSDF":ve?"lineGradient":"line",We=m.context,He=We.gl,Te=!0,Ue=0,Ke=v;Ue<Ke.length;Ue+=1){var at=Ke[Ue],ut=p.getTile(at);if(!be||ut.patternsLoaded()){var st=ut.getBucket(f);if(st){var dt=st.programConfigurations.get(f.id),bt=m.context.program.get(),Ft=m.useProgram(Oe,dt),Gt=Te||Ft.program!==bt,ea=oe.constantOr(null);if(ea&&ut.imageAtlas){var ya=ut.imageAtlas,Ca=ya.patternPositions[ea.to.toString()],wa=ya.patternPositions[ea.from.toString()];Ca&&wa&&dt.setConstantPatternPositions(Ca,wa)}var vi=be?yf(m,ut,f,we):q?AI(m,ut,f,q,we):ve?on(m,ut,f,st.lineClipsArray.length):W_(m,ut,f);if(be)We.activeTexture.set(He.TEXTURE0),ut.imageAtlasTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE),dt.updatePaintBuffers(we);else if(q&&(Gt||m.lineAtlas.dirty))We.activeTexture.set(He.TEXTURE0),m.lineAtlas.bind(We);else if(ve){var ia=st.gradients[f.id],Wa=ia.texture;if(f.gradientVersion!==ia.version){var Xa=256;if(f.stepInterpolant){var Ga=p.getSource().maxzoom,Pa=at.canonical.z===Ga?Math.ceil(1<<m.transform.maxZoom-at.canonical.z):1;Xa=r.clamp(r.nextPowerOfTwo(st.maxLineLength/r.EXTENT*1024*Pa),256,We.maxTextureSize)}ia.gradient=r.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:Xa,image:ia.gradient||void 0,clips:st.lineClipsArray}),ia.texture?ia.texture.update(ia.gradient):ia.texture=new r.Texture(We,ia.gradient,He.RGBA),ia.version=f.gradientVersion,Wa=ia.texture}We.activeTexture.set(He.TEXTURE0),Wa.bind(f.stepInterpolant?He.NEAREST:He.LINEAR,He.CLAMP_TO_EDGE)}Ft.draw(We,He.TRIANGLES,W,m.stencilModeForClipping(at),D,ze.disabled,vi,f.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,f.paint,m.transform.zoom,dt,st.layoutVertexBuffer2),Te=!1}}}}},fill:function(m,p,f,v){var T=f.paint.get("fill-color"),k=f.paint.get("fill-opacity");if(k.constantOr(1)!==0){var W=m.colorModeForRenderPass(),D=f.paint.get("fill-pattern"),q=m.opaquePassEnabledForLayer()&&!D.constantOr(1)&&T.constantOr(r.Color.transparent).a===1&&k.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===q){var oe=m.depthModeForSublayer(1,m.renderPass==="opaque"?xe.ReadWrite:xe.ReadOnly);xf(m,p,f,v,oe,W,!1)}if(m.renderPass==="translucent"&&f.paint.get("fill-antialias")){var be=m.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,xe.ReadOnly);xf(m,p,f,v,be,W,!0)}}},"fill-extrusion":function(m,p,f,v){var T=f.paint.get("fill-extrusion-opacity");if(T!==0&&m.renderPass==="translucent"){var k=new xe(m.context.gl.LEQUAL,xe.ReadWrite,m.depthRangeFor3D);if(T!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))sy(m,p,f,v,k,Se.disabled,Xe.disabled),sy(m,p,f,v,k,m.stencilModeFor3D(),m.colorModeForRenderPass());else{var W=m.colorModeForRenderPass();sy(m,p,f,v,k,Se.disabled,W)}}},hillshade:function(m,p,f,v){if(m.renderPass==="offscreen"||m.renderPass==="translucent"){for(var T=m.context,k=m.depthModeForSublayer(0,xe.ReadOnly),W=m.colorModeForRenderPass(),D=m.renderPass==="translucent"?m.stencilConfigForOverlap(v):[{},v],q=D[0],oe=0,be=D[1];oe<be.length;oe+=1){var ve=be[oe],we=p.getTile(ve);we.needsHillshadePrepare&&m.renderPass==="offscreen"?EI(m,we,f,k,Se.disabled,W):m.renderPass==="translucent"&&wf(m,we,f,k,q[ve.overscaledZ],W)}T.viewport.set([0,0,m.width,m.height])}},raster:function(m,p,f,v){if(m.renderPass==="translucent"&&f.paint.get("raster-opacity")!==0&&v.length)for(var T=m.context,k=T.gl,W=p.getSource(),D=m.useProgram("raster"),q=m.colorModeForRenderPass(),oe=W instanceof J?[{},v]:m.stencilConfigForOverlap(v),be=oe[0],ve=oe[1],we=ve[ve.length-1].overscaledZ,Oe=!m.options.moving,We=0,He=ve;We<He.length;We+=1){var Te=He[We],Ue=m.depthModeForSublayer(Te.overscaledZ-we,f.paint.get("raster-opacity")===1?xe.ReadWrite:xe.ReadOnly,k.LESS),Ke=p.getTile(Te),at=m.transform.calculatePosMatrix(Te.toUnwrapped(),Oe);Ke.registerFadeDuration(f.paint.get("raster-fade-duration"));var ut=p.findLoadedParent(Te,0),st=Cf(Ke,ut,p,f,m.transform),dt=void 0,bt=void 0,Ft=f.paint.get("raster-resampling")==="nearest"?k.NEAREST:k.LINEAR;T.activeTexture.set(k.TEXTURE0),Ke.texture.bind(Ft,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),T.activeTexture.set(k.TEXTURE1),ut?(ut.texture.bind(Ft,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),dt=Math.pow(2,ut.tileID.overscaledZ-Ke.tileID.overscaledZ),bt=[Ke.tileID.canonical.x*dt%1,Ke.tileID.canonical.y*dt%1]):Ke.texture.bind(Ft,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST);var Gt=TI(at,bt||[0,0],dt||1,st,f);W instanceof J?D.draw(T,k.TRIANGLES,Ue,Se.disabled,q,ze.disabled,Gt,f.id,W.boundsBuffer,m.quadTriangleIndexBuffer,W.boundsSegments):D.draw(T,k.TRIANGLES,Ue,be[Te.overscaledZ],q,ze.disabled,Gt,f.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}},background:function(m,p,f){var v=f.paint.get("background-color"),T=f.paint.get("background-opacity");if(T!==0){var k=m.context,W=k.gl,D=m.transform,q=D.tileSize,oe=f.paint.get("background-pattern");if(!m.isPatternMissing(oe)){var be=!oe&&v.a===1&&T===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass===be){var ve=Se.disabled,we=m.depthModeForSublayer(0,be==="opaque"?xe.ReadWrite:xe.ReadOnly),Oe=m.colorModeForRenderPass(),We=m.useProgram(oe?"backgroundPattern":"background"),He=D.coveringTiles({tileSize:q});oe&&(k.activeTexture.set(W.TEXTURE0),m.imageManager.bind(m.context));for(var Te=f.getCrossfadeParameters(),Ue=0,Ke=He;Ue<Ke.length;Ue+=1){var at=Ke[Ue],ut=m.transform.calculatePosMatrix(at.toUnwrapped()),st=oe?mh(ut,T,m,oe,{tileID:at,tileSize:q},Te):F_(ut,T,v);We.draw(k,W.TRIANGLES,we,ve,Oe,ze.disabled,st,f.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}}}}},debug:function(m,p,f){for(var v=0;v<f.length;v++)uv(m,p,f[v])},custom:function(m,p,f){var v=m.context,T=f.implementation;if(m.renderPass==="offscreen"){var k=T.prerender;k&&(m.setCustomLayerDefaults(),v.setColorMode(m.colorModeForRenderPass()),k.call(T,v.gl,m.transform.customLayerMatrix()),v.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),v.setColorMode(m.colorModeForRenderPass()),v.setStencilMode(Se.disabled);var W=T.renderingMode==="3d"?new xe(m.context.gl.LEQUAL,xe.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,xe.ReadOnly);v.setDepthMode(W),T.render(v.gl,m.transform.customLayerMatrix()),v.setDirty(),m.setBaseState(),v.bindFramebuffer.set(null)}}},wn=function(m,p){this.context=new pe(m),this.transform=p,this._tileTextures={},this.setup(),this.numSublayers=Ae.maxUnderzooming+Ae.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new zu,this.gpuTimers={}};wn.prototype.resize=function(m,p){if(this.width=m*r.browser.devicePixelRatio,this.height=p*r.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var f=0,v=this.style._order;f<v.length;f+=1)this.style._layers[v[f]].resize()},wn.prototype.setup=function(){var m=this.context,p=new r.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(r.EXTENT,0),p.emplaceBack(0,r.EXTENT),p.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=m.createVertexBuffer(p,Jn.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);var f=new r.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(r.EXTENT,0),f.emplaceBack(0,r.EXTENT),f.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=m.createVertexBuffer(f,Jn.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);var v=new r.StructArrayLayout4i8;v.emplaceBack(0,0,0,0),v.emplaceBack(r.EXTENT,0,r.EXTENT,0),v.emplaceBack(0,r.EXTENT,0,r.EXTENT),v.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=m.createVertexBuffer(v,Q.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);var T=new r.StructArrayLayout2i4;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=m.createVertexBuffer(T,Jn.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);var k=new r.StructArrayLayout1ui2;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=m.createIndexBuffer(k);var W=new r.StructArrayLayout3ui6;W.emplaceBack(0,1,2),W.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=m.createIndexBuffer(W),this.emptyTexture=new r.Texture(m,{width:1,height:1,data:new Uint8Array([0,0,0,0])},m.gl.RGBA);var D=this.context.gl;this.stencilClearMode=new Se({func:D.ALWAYS,mask:0},0,255,D.ZERO,D.ZERO,D.ZERO)},wn.prototype.clearStencil=function(){var m=this.context,p=m.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var f=r.create();r.ortho(f,0,this.width,this.height,0,0,1),r.scale(f,f,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(m,p.TRIANGLES,xe.disabled,this.stencilClearMode,Xe.disabled,ze.disabled,Qc(f),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},wn.prototype._renderTileClippingMasks=function(m,p){if(this.currentStencilSource!==m.source&&m.isTileClipped()&&p&&p.length){this.currentStencilSource=m.source;var f=this.context,v=f.gl;this.nextStencilID+p.length>256&&this.clearStencil(),f.setColorMode(Xe.disabled),f.setDepthMode(xe.disabled);var T=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var k=0,W=p;k<W.length;k+=1){var D=W[k],q=this._tileClippingMaskIDs[D.key]=this.nextStencilID++;T.draw(f,v.TRIANGLES,xe.disabled,new Se({func:v.ALWAYS,mask:0},q,255,v.KEEP,v.KEEP,v.REPLACE),Xe.disabled,ze.disabled,Qc(D.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},wn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var m=this.nextStencilID++,p=this.context.gl;return new Se({func:p.NOTEQUAL,mask:255},m,255,p.KEEP,p.KEEP,p.REPLACE)},wn.prototype.stencilModeForClipping=function(m){var p=this.context.gl;return new Se({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[m.key],0,p.KEEP,p.KEEP,p.REPLACE)},wn.prototype.stencilConfigForOverlap=function(m){var p,f=this.context.gl,v=m.sort((function(q,oe){return oe.overscaledZ-q.overscaledZ})),T=v[v.length-1].overscaledZ,k=v[0].overscaledZ-T+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();for(var W={},D=0;D<k;D++)W[D+T]=new Se({func:f.GEQUAL,mask:255},D+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=k,[W,v]}return[(p={},p[T]=Se.disabled,p),v]},wn.prototype.colorModeForRenderPass=function(){var m=this.context.gl;return this._showOverdrawInspector?new Xe([m.CONSTANT_COLOR,m.ONE],new r.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Xe.unblended:Xe.alphaBlended},wn.prototype.depthModeForSublayer=function(m,p,f){if(!this.opaquePassEnabledForLayer())return xe.disabled;var v=1-((1+this.currentLayer)*this.numSublayers+m)*this.depthEpsilon;return new xe(f||this.context.gl.LEQUAL,p,[v,v])},wn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},wn.prototype.render=function(m,p){var f=this;this.style=m,this.options=p,this.lineAtlas=m.lineAtlas,this.imageManager=m.imageManager,this.glyphManager=m.glyphManager,this.symbolFadeChange=m.placement.symbolFadeChange(r.browser.now()),this.imageManager.beginFrame();var v=this.style._order,T=this.style.sourceCaches;for(var k in T){var W=T[k];W.used&&W.prepare(this.context)}var D,q,oe={},be={},ve={};for(var we in T){var Oe=T[we];oe[we]=Oe.getVisibleCoordinates(),be[we]=oe[we].slice().reverse(),ve[we]=Oe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var We=0;We<v.length;We++)if(this.style._layers[v[We]].is3D()){this.opaquePassCutoff=We;break}this.renderPass="offscreen";for(var He=0,Te=v;He<Te.length;He+=1){var Ue=this.style._layers[Te[He]];if(Ue.hasOffscreenPass()&&!Ue.isHidden(this.transform.zoom)){var Ke=be[Ue.source];(Ue.type==="custom"||Ke.length)&&this.renderLayer(this,T[Ue.source],Ue,Ke)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(m._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){var at=this.style._layers[v[this.currentLayer]],ut=T[at.source],st=oe[at.source];this._renderTileClippingMasks(at,st),this.renderLayer(this,ut,at,st)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){var dt=this.style._layers[v[this.currentLayer]],bt=T[dt.source],Ft=(dt.type==="symbol"?ve:be)[dt.source];this._renderTileClippingMasks(dt,oe[dt.source]),this.renderLayer(this,bt,dt,Ft)}this.options.showTileBoundaries&&(r.values(this.style._layers).forEach((function(Gt){Gt.source&&!Gt.isHidden(f.transform.zoom)&&(Gt.source!==(q&&q.id)&&(q=f.style.sourceCaches[Gt.source]),(!D||D.getSource().maxzoom<q.getSource().maxzoom)&&(D=q))})),D&&td.debug(this,D,D.getVisibleCoordinates())),this.options.showPadding&&(function(Gt){var ea=Gt.transform.padding;uy(Gt,Gt.transform.height-(ea.top||0),3,oy),uy(Gt,ea.bottom||0,3,ov),cy(Gt,ea.left||0,3,lv),cy(Gt,Gt.transform.width-(ea.right||0),3,If);var ya=Gt.transform.centerPoint;(function(Ca,wa,vi,ia){B_(Ca,wa-1,vi-10,2,20,ia),B_(Ca,wa-10,vi-1,20,2,ia)})(Gt,ya.x,Gt.transform.height-ya.y,ly)})(this),this.context.setDefault()},wn.prototype.renderLayer=function(m,p,f,v){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||v.length)&&(this.id=f.id,this.gpuTimingStart(f),td[f.type](m,p,f,v,this.style.placement.variableOffsets),this.gpuTimingEnd())},wn.prototype.gpuTimingStart=function(m){if(this.options.gpuTiming){var p=this.context.extTimerQuery,f=this.gpuTimers[m.id];f||(f=this.gpuTimers[m.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),f.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,f.query)}},wn.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var m=this.context.extTimerQuery;m.endQueryEXT(m.TIME_ELAPSED_EXT)}},wn.prototype.collectGpuTimers=function(){var m=this.gpuTimers;return this.gpuTimers={},m},wn.prototype.queryGpuTimers=function(m){var p={};for(var f in m){var v=m[f],T=this.context.extTimerQuery,k=T.getQueryObjectEXT(v.query,T.QUERY_RESULT_EXT)/1e6;T.deleteQueryEXT(v.query),p[f]=k}return p},wn.prototype.translatePosMatrix=function(m,p,f,v,T){if(!f[0]&&!f[1])return m;var k=T?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(k){var W=Math.sin(k),D=Math.cos(k);f=[f[0]*D-f[1]*W,f[0]*W+f[1]*D]}var q=[T?f[0]:xn(p,f[0],this.transform.zoom),T?f[1]:xn(p,f[1],this.transform.zoom),0],oe=new Float32Array(16);return r.translate(oe,m,q),oe},wn.prototype.saveTileTexture=function(m){var p=this._tileTextures[m.size[0]];p?p.push(m):this._tileTextures[m.size[0]]=[m]},wn.prototype.getTileTexture=function(m){var p=this._tileTextures[m];return p&&p.length>0?p.pop():null},wn.prototype.isPatternMissing=function(m){if(!m)return!1;if(!m.from||!m.to)return!0;var p=this.imageManager.getPattern(m.from.toString()),f=this.imageManager.getPattern(m.to.toString());return!p||!f},wn.prototype.useProgram=function(m,p){this.cache=this.cache||{};var f=""+m+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[f]||(this.cache[f]=new Yb(this.context,m,SI[m],p,iv[m],this._showOverdrawInspector)),this.cache[f]},wn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},wn.prototype.setBaseState=function(){var m=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(m.FUNC_ADD)},wn.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=r.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new r.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},wn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Sf=function(m,p){this.points=m,this.planes=p};Sf.fromInvProjectionMatrix=function(m,p,f){var v=Math.pow(2,f),T=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(W){return r.transformMat4([],W,m)})).map((function(W){return r.scale$1([],W,1/W[3]/p*v)})),k=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(W){var D=r.sub([],T[W[0]],T[W[1]]),q=r.sub([],T[W[2]],T[W[1]]),oe=r.normalize([],r.cross([],D,q)),be=-r.dot(oe,T[W[1]]);return oe.concat(be)}));return new Sf(T,k)};var ad=function(m,p){this.min=m,this.max=p,this.center=r.scale$2([],r.add([],this.min,this.max),.5)};ad.prototype.quadrant=function(m){for(var p=[m%2==0,m<2],f=r.clone$2(this.min),v=r.clone$2(this.max),T=0;T<p.length;T++)f[T]=p[T]?this.min[T]:this.center[T],v[T]=p[T]?this.center[T]:this.max[T];return v[2]=this.max[2],new ad(f,v)},ad.prototype.distanceX=function(m){return Math.max(Math.min(this.max[0],m[0]),this.min[0])-m[0]},ad.prototype.distanceY=function(m){return Math.max(Math.min(this.max[1],m[1]),this.min[1])-m[1]},ad.prototype.intersects=function(m){for(var p=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],f=!0,v=0;v<m.planes.length;v++){for(var T=m.planes[v],k=0,W=0;W<p.length;W++)k+=r.dot$1(T,p[W])>=0;if(k===0)return 0;k!==p.length&&(f=!1)}if(f)return 2;for(var D=0;D<3;D++){for(var q=Number.MAX_VALUE,oe=-Number.MAX_VALUE,be=0;be<m.points.length;be++){var ve=m.points[be][D]-this.min[D];q=Math.min(q,ve),oe=Math.max(oe,ve)}if(oe<0||q>this.max[D]-this.min[D])return 0}return 1};var $u=function(m,p,f,v){if(m===void 0&&(m=0),p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=0),isNaN(m)||m<0||isNaN(p)||p<0||isNaN(f)||f<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=m,this.bottom=p,this.left=f,this.right=v};$u.prototype.interpolate=function(m,p,f){return p.top!=null&&m.top!=null&&(this.top=r.number(m.top,p.top,f)),p.bottom!=null&&m.bottom!=null&&(this.bottom=r.number(m.bottom,p.bottom,f)),p.left!=null&&m.left!=null&&(this.left=r.number(m.left,p.left,f)),p.right!=null&&m.right!=null&&(this.right=r.number(m.right,p.right,f)),this},$u.prototype.getCenter=function(m,p){var f=r.clamp((this.left+m-this.right)/2,0,m),v=r.clamp((this.top+p-this.bottom)/2,0,p);return new r.Point(f,v)},$u.prototype.equals=function(m){return this.top===m.top&&this.bottom===m.bottom&&this.left===m.left&&this.right===m.right},$u.prototype.clone=function(){return new $u(this.top,this.bottom,this.left,this.right)},$u.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var mi=function(m,p,f,v,T){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=T===void 0||T,this._minZoom=m||0,this._maxZoom=p||22,this._minPitch=f??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new $u,this._posMatrixCache={},this._alignedPosMatrixCache={}},ln={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};mi.prototype.clone=function(){var m=new mi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return m.tileSize=this.tileSize,m.latRange=this.latRange,m.width=this.width,m.height=this.height,m._center=this._center,m.zoom=this.zoom,m.angle=this.angle,m._fov=this._fov,m._pitch=this._pitch,m._unmodified=this._unmodified,m._edgeInsets=this._edgeInsets.clone(),m._calcMatrices(),m},ln.minZoom.get=function(){return this._minZoom},ln.minZoom.set=function(m){this._minZoom!==m&&(this._minZoom=m,this.zoom=Math.max(this.zoom,m))},ln.maxZoom.get=function(){return this._maxZoom},ln.maxZoom.set=function(m){this._maxZoom!==m&&(this._maxZoom=m,this.zoom=Math.min(this.zoom,m))},ln.minPitch.get=function(){return this._minPitch},ln.minPitch.set=function(m){this._minPitch!==m&&(this._minPitch=m,this.pitch=Math.max(this.pitch,m))},ln.maxPitch.get=function(){return this._maxPitch},ln.maxPitch.set=function(m){this._maxPitch!==m&&(this._maxPitch=m,this.pitch=Math.min(this.pitch,m))},ln.renderWorldCopies.get=function(){return this._renderWorldCopies},ln.renderWorldCopies.set=function(m){m===void 0?m=!0:m===null&&(m=!1),this._renderWorldCopies=m},ln.worldSize.get=function(){return this.tileSize*this.scale},ln.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ln.size.get=function(){return new r.Point(this.width,this.height)},ln.bearing.get=function(){return-this.angle/Math.PI*180},ln.bearing.set=function(m){var p=-r.wrap(m,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=r.create$2(),r.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ln.pitch.get=function(){return this._pitch/Math.PI*180},ln.pitch.set=function(m){var p=r.clamp(m,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())},ln.fov.get=function(){return this._fov/Math.PI*180},ln.fov.set=function(m){m=Math.max(.01,Math.min(60,m)),this._fov!==m&&(this._unmodified=!1,this._fov=m/180*Math.PI,this._calcMatrices())},ln.zoom.get=function(){return this._zoom},ln.zoom.set=function(m){var p=Math.min(Math.max(m,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.scale=this.zoomScale(p),this.tileZoom=Math.floor(p),this.zoomFraction=p-this.tileZoom,this._constrain(),this._calcMatrices())},ln.center.get=function(){return this._center},ln.center.set=function(m){m.lat===this._center.lat&&m.lng===this._center.lng||(this._unmodified=!1,this._center=m,this._constrain(),this._calcMatrices())},ln.padding.get=function(){return this._edgeInsets.toJSON()},ln.padding.set=function(m){this._edgeInsets.equals(m)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,m,1),this._calcMatrices())},ln.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},mi.prototype.isPaddingEqual=function(m){return this._edgeInsets.equals(m)},mi.prototype.interpolatePadding=function(m,p,f){this._unmodified=!1,this._edgeInsets.interpolate(m,p,f),this._constrain(),this._calcMatrices()},mi.prototype.coveringZoomLevel=function(m){var p=(m.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/m.tileSize));return Math.max(0,p)},mi.prototype.getVisibleUnwrappedCoordinates=function(m){var p=[new r.UnwrappedTileID(0,m)];if(this._renderWorldCopies)for(var f=this.pointCoordinate(new r.Point(0,0)),v=this.pointCoordinate(new r.Point(this.width,0)),T=this.pointCoordinate(new r.Point(this.width,this.height)),k=this.pointCoordinate(new r.Point(0,this.height)),W=Math.floor(Math.min(f.x,v.x,T.x,k.x)),D=Math.floor(Math.max(f.x,v.x,T.x,k.x)),q=W-1;q<=D+1;q++)q!==0&&p.push(new r.UnwrappedTileID(q,m));return p},mi.prototype.coveringTiles=function(m){var p=this.coveringZoomLevel(m),f=p;if(m.minzoom!==void 0&&p<m.minzoom)return[];m.maxzoom!==void 0&&p>m.maxzoom&&(p=m.maxzoom);var v=r.MercatorCoordinate.fromLngLat(this.center),T=Math.pow(2,p),k=[T*v.x,T*v.y,0],W=Sf.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p),D=m.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(D=p);var q=function(Gt){return{aabb:new ad([Gt*T,0,0],[(Gt+1)*T,T,0]),zoom:0,x:0,y:0,wrap:Gt,fullyVisible:!1}},oe=[],be=[],ve=p,we=m.reparseOverscaled?f:p;if(this._renderWorldCopies)for(var Oe=1;Oe<=3;Oe++)oe.push(q(-Oe)),oe.push(q(Oe));for(oe.push(q(0));oe.length>0;){var We=oe.pop(),He=We.x,Te=We.y,Ue=We.fullyVisible;if(!Ue){var Ke=We.aabb.intersects(W);if(Ke===0)continue;Ue=Ke===2}var at=We.aabb.distanceX(k),ut=We.aabb.distanceY(k),st=Math.max(Math.abs(at),Math.abs(ut));if(We.zoom===ve||st>3+(1<<ve-We.zoom)-2&&We.zoom>=D)be.push({tileID:new r.OverscaledTileID(We.zoom===ve?we:We.zoom,We.wrap,We.zoom,He,Te),distanceSq:r.sqrLen([k[0]-.5-He,k[1]-.5-Te])});else for(var dt=0;dt<4;dt++){var bt=(He<<1)+dt%2,Ft=(Te<<1)+(dt>>1);oe.push({aabb:We.aabb.quadrant(dt),zoom:We.zoom+1,x:bt,y:Ft,wrap:We.wrap,fullyVisible:Ue})}}return be.sort((function(Gt,ea){return Gt.distanceSq-ea.distanceSq})).map((function(Gt){return Gt.tileID}))},mi.prototype.resize=function(m,p){this.width=m,this.height=p,this.pixelsToGLUnits=[2/m,-2/p],this._constrain(),this._calcMatrices()},ln.unmodified.get=function(){return this._unmodified},mi.prototype.zoomScale=function(m){return Math.pow(2,m)},mi.prototype.scaleZoom=function(m){return Math.log(m)/Math.LN2},mi.prototype.project=function(m){var p=r.clamp(m.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.Point(r.mercatorXfromLng(m.lng)*this.worldSize,r.mercatorYfromLat(p)*this.worldSize)},mi.prototype.unproject=function(m){return new r.MercatorCoordinate(m.x/this.worldSize,m.y/this.worldSize).toLngLat()},ln.point.get=function(){return this.project(this.center)},mi.prototype.setLocationAtPoint=function(m,p){var f=this.pointCoordinate(p),v=this.pointCoordinate(this.centerPoint),T=this.locationCoordinate(m),k=new r.MercatorCoordinate(T.x-(f.x-v.x),T.y-(f.y-v.y));this.center=this.coordinateLocation(k),this._renderWorldCopies&&(this.center=this.center.wrap())},mi.prototype.locationPoint=function(m){return this.coordinatePoint(this.locationCoordinate(m))},mi.prototype.pointLocation=function(m){return this.coordinateLocation(this.pointCoordinate(m))},mi.prototype.locationCoordinate=function(m){return r.MercatorCoordinate.fromLngLat(m)},mi.prototype.coordinateLocation=function(m){return m.toLngLat()},mi.prototype.pointCoordinate=function(m){var p=[m.x,m.y,0,1],f=[m.x,m.y,1,1];r.transformMat4(p,p,this.pixelMatrixInverse),r.transformMat4(f,f,this.pixelMatrixInverse);var v=p[3],T=f[3],k=p[1]/v,W=f[1]/T,D=p[2]/v,q=f[2]/T,oe=D===q?0:(0-D)/(q-D);return new r.MercatorCoordinate(r.number(p[0]/v,f[0]/T,oe)/this.worldSize,r.number(k,W,oe)/this.worldSize)},mi.prototype.coordinatePoint=function(m){var p=[m.x*this.worldSize,m.y*this.worldSize,0,1];return r.transformMat4(p,p,this.pixelMatrix),new r.Point(p[0]/p[3],p[1]/p[3])},mi.prototype.getBounds=function(){return new r.LngLatBounds().extend(this.pointLocation(new r.Point(0,0))).extend(this.pointLocation(new r.Point(this.width,0))).extend(this.pointLocation(new r.Point(this.width,this.height))).extend(this.pointLocation(new r.Point(0,this.height)))},mi.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},mi.prototype.setMaxBounds=function(m){m?(this.lngRange=[m.getWest(),m.getEast()],this.latRange=[m.getSouth(),m.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},mi.prototype.calculatePosMatrix=function(m,p){p===void 0&&(p=!1);var f=m.key,v=p?this._alignedPosMatrixCache:this._posMatrixCache;if(v[f])return v[f];var T=m.canonical,k=this.worldSize/this.zoomScale(T.z),W=T.x+Math.pow(2,T.z)*m.wrap,D=r.identity(new Float64Array(16));return r.translate(D,D,[W*k,T.y*k,0]),r.scale(D,D,[k/r.EXTENT,k/r.EXTENT,1]),r.multiply(D,p?this.alignedProjMatrix:this.projMatrix,D),v[f]=new Float32Array(D),v[f]},mi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},mi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var m,p,f,v,T=-90,k=90,W=-180,D=180,q=this.size,oe=this._unmodified;if(this.latRange){var be=this.latRange;T=r.mercatorYfromLat(be[1])*this.worldSize,m=(k=r.mercatorYfromLat(be[0])*this.worldSize)-T<q.y?q.y/(k-T):0}if(this.lngRange){var ve=this.lngRange;W=r.mercatorXfromLng(ve[0])*this.worldSize,p=(D=r.mercatorXfromLng(ve[1])*this.worldSize)-W<q.x?q.x/(D-W):0}var we=this.point,Oe=Math.max(p||0,m||0);if(Oe)return this.center=this.unproject(new r.Point(p?(D+W)/2:we.x,m?(k+T)/2:we.y)),this.zoom+=this.scaleZoom(Oe),this._unmodified=oe,void(this._constraining=!1);if(this.latRange){var We=we.y,He=q.y/2;We-He<T&&(v=T+He),We+He>k&&(v=k-He)}if(this.lngRange){var Te=we.x,Ue=q.x/2;Te-Ue<W&&(f=W+Ue),Te+Ue>D&&(f=D-Ue)}f===void 0&&v===void 0||(this.center=this.unproject(new r.Point(f!==void 0?f:we.x,v!==void 0?v:we.y))),this._unmodified=oe,this._constraining=!1}},mi.prototype._calcMatrices=function(){if(this.height){var m=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var p=Math.PI/2+this._pitch,f=this._fov*(.5+m.y/this.height),v=Math.sin(f)*this.cameraToCenterDistance/Math.sin(r.clamp(Math.PI-p-f,.01,Math.PI-.01)),T=this.point,k=T.x,W=T.y,D=1.01*(Math.cos(Math.PI/2-this._pitch)*v+this.cameraToCenterDistance),q=this.height/50,oe=new Float64Array(16);r.perspective(oe,this._fov,this.width/this.height,q,D),oe[8]=2*-m.x/this.width,oe[9]=2*m.y/this.height,r.scale(oe,oe,[1,-1,1]),r.translate(oe,oe,[0,0,-this.cameraToCenterDistance]),r.rotateX(oe,oe,this._pitch),r.rotateZ(oe,oe,this.angle),r.translate(oe,oe,[-k,-W,0]),this.mercatorMatrix=r.scale([],oe,[this.worldSize,this.worldSize,this.worldSize]),r.scale(oe,oe,[1,1,r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=oe,this.invProjMatrix=r.invert([],this.projMatrix);var be=this.width%2/2,ve=this.height%2/2,we=Math.cos(this.angle),Oe=Math.sin(this.angle),We=k-Math.round(k)+we*be+Oe*ve,He=W-Math.round(W)+we*ve+Oe*be,Te=new Float64Array(oe);if(r.translate(Te,Te,[We>.5?We-1:We,He>.5?He-1:He,0]),this.alignedProjMatrix=Te,oe=r.create(),r.scale(oe,oe,[this.width/2,-this.height/2,1]),r.translate(oe,oe,[1,-1,0]),this.labelPlaneMatrix=oe,oe=r.create(),r.scale(oe,oe,[1,-1,1]),r.translate(oe,oe,[-1,-1,0]),r.scale(oe,oe,[2/this.width,2/this.height,1]),this.glCoordMatrix=oe,this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(oe=r.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=oe,this._posMatrixCache={},this._alignedPosMatrixCache={}}},mi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var m=this.pointCoordinate(new r.Point(0,0)),p=[m.x*this.worldSize,m.y*this.worldSize,0,1];return r.transformMat4(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance},mi.prototype.getCameraPoint=function(){var m=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.Point(0,m))},mi.prototype.getCameraQueryGeometry=function(m){var p=this.getCameraPoint();if(m.length===1)return[m[0],p];for(var f=p.x,v=p.y,T=p.x,k=p.y,W=0,D=m;W<D.length;W+=1){var q=D[W];f=Math.min(f,q.x),v=Math.min(v,q.y),T=Math.max(T,q.x),k=Math.max(k,q.y)}return[new r.Point(f,v),new r.Point(T,v),new r.Point(T,k),new r.Point(f,k),new r.Point(f,v)]},Object.defineProperties(mi.prototype,ln);var co=function(m){var p,f,v,T;this._hashName=m&&encodeURIComponent(m),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(p=this._updateHashUnthrottled.bind(this),f=!1,v=null,T=function(){v=null,f&&(p(),v=setTimeout(T,300),f=!1)},function(){return f=!0,v||T(),v})};co.prototype.addTo=function(m){return this._map=m,r.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},co.prototype.remove=function(){return r.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},co.prototype.getHashString=function(m){var p=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,v=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,v),k=Math.round(p.lng*T)/T,W=Math.round(p.lat*T)/T,D=this._map.getBearing(),q=this._map.getPitch(),oe="";if(oe+=m?"/"+k+"/"+W+"/"+f:f+"/"+W+"/"+k,(D||q)&&(oe+="/"+Math.round(10*D)/10),q&&(oe+="/"+Math.round(q)),this._hashName){var be=this._hashName,ve=!1,we=r.window.location.hash.slice(1).split("&").map((function(Oe){var We=Oe.split("=")[0];return We===be?(ve=!0,We+"="+oe):Oe})).filter((function(Oe){return Oe}));return ve||we.push(be+"="+oe),"#"+we.join("&")}return"#"+oe},co.prototype._getCurrentHash=function(){var m,p=this,f=r.window.location.hash.replace("#","");return this._hashName?(f.split("&").map((function(v){return v.split("=")})).forEach((function(v){v[0]===p._hashName&&(m=v)})),(m&&m[1]||"").split("/")):f.split("/")},co.prototype._onHashChange=function(){var m=this._getCurrentHash();if(m.length>=3&&!m.some((function(f){return isNaN(f)}))){var p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(m[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:p,pitch:+(m[4]||0)}),!0}return!1},co.prototype._updateHashUnthrottled=function(){var m=r.window.location.href.replace(/(#.+)?$/,this.getHashString());try{r.window.history.replaceState(r.window.history.state,null,m)}catch{}};var D_={linearity:.3,easing:r.bezier(0,0,.3,1)},gh=r.extend({deceleration:2500,maxSpeed:1400},D_),V_=r.extend({deceleration:20,maxSpeed:1400},D_),MI=r.extend({deceleration:1e3,maxSpeed:360},D_),LI=r.extend({deceleration:1e3,maxSpeed:90},D_),Z_=function(m){this._map=m,this.clear()};function z_(m,p){(!m.duration||m.duration<p.duration)&&(m.duration=p.duration,m.easing=p.easing)}function nu(m,p,f){var v=f.maxSpeed,T=f.linearity,k=f.deceleration,W=r.clamp(m*T/(p/1e3),-v,v),D=Math.abs(W)/(k*T);return{easing:f.easing,duration:1e3*D,amount:W*(D/2)}}Z_.prototype.clear=function(){this._inertiaBuffer=[]},Z_.prototype.record=function(m){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.browser.now(),settings:m})},Z_.prototype._drainInertiaBuffer=function(){for(var m=this._inertiaBuffer,p=r.browser.now();m.length>0&&p-m[0].time>160;)m.shift()},Z_.prototype._onMoveEnd=function(m){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var p={zoom:0,bearing:0,pitch:0,pan:new r.Point(0,0),pinchAround:void 0,around:void 0},f=0,v=this._inertiaBuffer;f<v.length;f+=1){var T=v[f].settings;p.zoom+=T.zoomDelta||0,p.bearing+=T.bearingDelta||0,p.pitch+=T.pitchDelta||0,T.panDelta&&p.pan._add(T.panDelta),T.around&&(p.around=T.around),T.pinchAround&&(p.pinchAround=T.pinchAround)}var k=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,W={};if(p.pan.mag()){var D=nu(p.pan.mag(),k,r.extend({},gh,m||{}));W.offset=p.pan.mult(D.amount/p.pan.mag()),W.center=this._map.transform.center,z_(W,D)}if(p.zoom){var q=nu(p.zoom,k,V_);W.zoom=this._map.transform.zoom+q.amount,z_(W,q)}if(p.bearing){var oe=nu(p.bearing,k,MI);W.bearing=this._map.transform.bearing+r.clamp(oe.amount,-179,179),z_(W,oe)}if(p.pitch){var be=nu(p.pitch,k,LI);W.pitch=this._map.transform.pitch+be.amount,z_(W,be)}if(W.zoom||W.bearing){var ve=p.pinchAround===void 0?p.around:p.pinchAround;W.around=ve?this._map.unproject(ve):this._map.getCenter()}return this.clear(),r.extend(W,{noMoveStart:!0})}};var rr=(function(m){function p(v,T,k,W){W===void 0&&(W={});var D=u.mousePos(T.getCanvasContainer(),k),q=T.unproject(D);m.call(this,v,r.extend({point:D,lngLat:q,originalEvent:k},W)),this._defaultPrevented=!1,this.target=T}m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p;var f={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,f),p})(r.Event),U_=(function(m){function p(v,T,k){var W=v==="touchend"?k.changedTouches:k.touches,D=u.touchPos(T.getCanvasContainer(),W),q=D.map((function(ve){return T.unproject(ve)})),oe=D.reduce((function(ve,we,Oe,We){return ve.add(we.div(We.length))}),new r.Point(0,0)),be=T.unproject(oe);m.call(this,v,{points:D,point:oe,lngLats:q,lngLat:be,originalEvent:k}),this._defaultPrevented=!1}m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p;var f={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,f),p})(r.Event),cv=(function(m){function p(v,T,k){m.call(this,v,{originalEvent:k}),this._defaultPrevented=!1}m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p;var f={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,f),p})(r.Event),Qn=function(m,p){this._map=m,this._clickTolerance=p.clickTolerance};Qn.prototype.reset=function(){delete this._mousedownPos},Qn.prototype.wheel=function(m){return this._firePreventable(new cv(m.type,this._map,m))},Qn.prototype.mousedown=function(m,p){return this._mousedownPos=p,this._firePreventable(new rr(m.type,this._map,m))},Qn.prototype.mouseup=function(m){this._map.fire(new rr(m.type,this._map,m))},Qn.prototype.click=function(m,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new rr(m.type,this._map,m))},Qn.prototype.dblclick=function(m){return this._firePreventable(new rr(m.type,this._map,m))},Qn.prototype.mouseover=function(m){this._map.fire(new rr(m.type,this._map,m))},Qn.prototype.mouseout=function(m){this._map.fire(new rr(m.type,this._map,m))},Qn.prototype.touchstart=function(m){return this._firePreventable(new U_(m.type,this._map,m))},Qn.prototype.touchmove=function(m){this._map.fire(new U_(m.type,this._map,m))},Qn.prototype.touchend=function(m){this._map.fire(new U_(m.type,this._map,m))},Qn.prototype.touchcancel=function(m){this._map.fire(new U_(m.type,this._map,m))},Qn.prototype._firePreventable=function(m){if(this._map.fire(m),m.defaultPrevented)return{}},Qn.prototype.isEnabled=function(){return!0},Qn.prototype.isActive=function(){return!1},Qn.prototype.enable=function(){},Qn.prototype.disable=function(){};var na=function(m){this._map=m};na.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},na.prototype.mousemove=function(m){this._map.fire(new rr(m.type,this._map,m))},na.prototype.mousedown=function(){this._delayContextMenu=!0},na.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new rr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},na.prototype.contextmenu=function(m){this._delayContextMenu?this._contextMenuEvent=m:this._map.fire(new rr(m.type,this._map,m)),this._map.listens("contextmenu")&&m.preventDefault()},na.prototype.isEnabled=function(){return!0},na.prototype.isActive=function(){return!1},na.prototype.enable=function(){},na.prototype.disable=function(){};var Os=function(m,p){this._map=m,this._el=m.getCanvasContainer(),this._container=m.getContainer(),this._clickTolerance=p.clickTolerance||1};function Af(m,p){for(var f={},v=0;v<m.length;v++)f[m[v].identifier]=p[v];return f}Os.prototype.isEnabled=function(){return!!this._enabled},Os.prototype.isActive=function(){return!!this._active},Os.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Os.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Os.prototype.mousedown=function(m,p){this.isEnabled()&&m.shiftKey&&m.button===0&&(u.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)},Os.prototype.mousemoveWindow=function(m,p){if(this._active){var f=p;if(!(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)){var v=this._startPos;this._lastPos=f,this._box||(this._box=u.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",m));var T=Math.min(v.x,f.x),k=Math.max(v.x,f.x),W=Math.min(v.y,f.y),D=Math.max(v.y,f.y);u.setTransform(this._box,"translate("+T+"px,"+W+"px)"),this._box.style.width=k-T+"px",this._box.style.height=D-W+"px"}}},Os.prototype.mouseupWindow=function(m,p){var f=this;if(this._active&&m.button===0){var v=this._startPos,T=p;if(this.reset(),u.suppressClick(),v.x!==T.x||v.y!==T.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:m})),{cameraAnimation:function(k){return k.fitScreenCoordinates(v,T,f._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",m)}},Os.prototype.keydown=function(m){this._active&&m.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",m))},Os.prototype.blur=function(){this.reset()},Os.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(u.remove(this._box),this._box=null),u.enableDrag(),delete this._startPos,delete this._lastPos},Os.prototype._fireEvent=function(m,p){return this._map.fire(new r.Event(m,{originalEvent:p}))};var ph=function(m){this.reset(),this.numTouches=m.numTouches};ph.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ph.prototype.touchstart=function(m,p,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=m.timeStamp),f.length===this.numTouches&&(this.centroid=(function(v){for(var T=new r.Point(0,0),k=0,W=v;k<W.length;k+=1)T._add(W[k]);return T.div(v.length)})(p),this.touches=Af(f,p)))},ph.prototype.touchmove=function(m,p,f){if(!this.aborted&&this.centroid){var v=Af(f,p);for(var T in this.touches){var k=v[T];(!k||k.dist(this.touches[T])>30)&&(this.aborted=!0)}}},ph.prototype.touchend=function(m,p,f){if((!this.centroid||m.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){var v=!this.aborted&&this.centroid;if(this.reset(),v)return v}};var rl=function(m){this.singleTap=new ph(m),this.numTaps=m.numTaps,this.reset()};rl.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},rl.prototype.touchstart=function(m,p,f){this.singleTap.touchstart(m,p,f)},rl.prototype.touchmove=function(m,p,f){this.singleTap.touchmove(m,p,f)},rl.prototype.touchend=function(m,p,f){var v=this.singleTap.touchend(m,p,f);if(v){var T=m.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(v)<30;if(T&&k||this.reset(),this.count++,this.lastTime=m.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}};var Fs=function(){this._zoomIn=new rl({numTouches:1,numTaps:2}),this._zoomOut=new rl({numTouches:2,numTaps:1}),this.reset()};Fs.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Fs.prototype.touchstart=function(m,p,f){this._zoomIn.touchstart(m,p,f),this._zoomOut.touchstart(m,p,f)},Fs.prototype.touchmove=function(m,p,f){this._zoomIn.touchmove(m,p,f),this._zoomOut.touchmove(m,p,f)},Fs.prototype.touchend=function(m,p,f){var v=this,T=this._zoomIn.touchend(m,p,f),k=this._zoomOut.touchend(m,p,f);return T?(this._active=!0,m.preventDefault(),setTimeout((function(){return v.reset()}),0),{cameraAnimation:function(W){return W.easeTo({duration:300,zoom:W.getZoom()+1,around:W.unproject(T)},{originalEvent:m})}}):k?(this._active=!0,m.preventDefault(),setTimeout((function(){return v.reset()}),0),{cameraAnimation:function(W){return W.easeTo({duration:300,zoom:W.getZoom()-1,around:W.unproject(k)},{originalEvent:m})}}):void 0},Fs.prototype.touchcancel=function(){this.reset()},Fs.prototype.enable=function(){this._enabled=!0},Fs.prototype.disable=function(){this._enabled=!1,this.reset()},Fs.prototype.isEnabled=function(){return this._enabled},Fs.prototype.isActive=function(){return this._active};var dy={0:1,2:2},qt=function(m){this.reset(),this._clickTolerance=m.clickTolerance||1};qt.prototype.blur=function(){this.reset()},qt.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},qt.prototype._correctButton=function(m,p){return!1},qt.prototype._move=function(m,p){return{}},qt.prototype.mousedown=function(m,p){if(!this._lastPoint){var f=u.mouseButton(m);this._correctButton(m,f)&&(this._lastPoint=p,this._eventButton=f)}},qt.prototype.mousemoveWindow=function(m,p){var f=this._lastPoint;if(f){if(m.preventDefault(),(function(v,T){var k=dy[T];return v.buttons===void 0||(v.buttons&k)!==k})(m,this._eventButton))this.reset();else if(this._moved||!(p.dist(f)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(f,p)}},qt.prototype.mouseupWindow=function(m){this._lastPoint&&u.mouseButton(m)===this._eventButton&&(this._moved&&u.suppressClick(),this.reset())},qt.prototype.enable=function(){this._enabled=!0},qt.prototype.disable=function(){this._enabled=!1,this.reset()},qt.prototype.isEnabled=function(){return this._enabled},qt.prototype.isActive=function(){return this._active};var hy=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.mousedown=function(f,v){m.prototype.mousedown.call(this,f,v),this._lastPoint&&(this._active=!0)},p.prototype._correctButton=function(f,v){return v===0&&!f.ctrlKey},p.prototype._move=function(f,v){return{around:v,panDelta:v.sub(f)}},p})(qt),Tf=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype._correctButton=function(f,v){return v===0&&f.ctrlKey||v===2},p.prototype._move=function(f,v){var T=.8*(v.x-f.x);if(T)return this._active=!0,{bearingDelta:T}},p.prototype.contextmenu=function(f){f.preventDefault()},p})(qt),_y=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype._correctButton=function(f,v){return v===0&&f.ctrlKey||v===2},p.prototype._move=function(f,v){var T=-.5*(v.y-f.y);if(T)return this._active=!0,{pitchDelta:T}},p.prototype.contextmenu=function(f){f.preventDefault()},p})(qt),Ro=function(m){this._minTouches=1,this._clickTolerance=m.clickTolerance||1,this.reset()};Ro.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new r.Point(0,0)},Ro.prototype.touchstart=function(m,p,f){return this._calculateTransform(m,p,f)},Ro.prototype.touchmove=function(m,p,f){if(this._active&&!(f.length<this._minTouches))return m.preventDefault(),this._calculateTransform(m,p,f)},Ro.prototype.touchend=function(m,p,f){this._calculateTransform(m,p,f),this._active&&f.length<this._minTouches&&this.reset()},Ro.prototype.touchcancel=function(){this.reset()},Ro.prototype._calculateTransform=function(m,p,f){f.length>0&&(this._active=!0);var v=Af(f,p),T=new r.Point(0,0),k=new r.Point(0,0),W=0;for(var D in v){var q=v[D],oe=this._touches[D];oe&&(T._add(q),k._add(q.sub(oe)),W++,v[D]=q)}if(this._touches=v,!(W<this._minTouches)&&k.mag()){var be=k.div(W);if(this._sum._add(be),!(this._sum.mag()<this._clickTolerance))return{around:T.div(W),panDelta:be}}},Ro.prototype.enable=function(){this._enabled=!0},Ro.prototype.disable=function(){this._enabled=!1,this.reset()},Ro.prototype.isEnabled=function(){return this._enabled},Ro.prototype.isActive=function(){return this._active};var Ns=function(){this.reset()};function Ef(m,p,f){for(var v=0;v<m.length;v++)if(m[v].identifier===f)return p[v]}function Mf(m,p){return Math.log(m/p)/Math.LN2}Ns.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ns.prototype._start=function(m){},Ns.prototype._move=function(m,p,f){return{}},Ns.prototype.touchstart=function(m,p,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([p[0],p[1]]))},Ns.prototype.touchmove=function(m,p,f){if(this._firstTwoTouches){m.preventDefault();var v=this._firstTwoTouches,T=v[1],k=Ef(f,p,v[0]),W=Ef(f,p,T);if(k&&W){var D=this._aroundCenter?null:k.add(W).div(2);return this._move([k,W],D,m)}}},Ns.prototype.touchend=function(m,p,f){if(this._firstTwoTouches){var v=this._firstTwoTouches,T=v[1],k=Ef(f,p,v[0]),W=Ef(f,p,T);k&&W||(this._active&&u.suppressClick(),this.reset())}},Ns.prototype.touchcancel=function(){this.reset()},Ns.prototype.enable=function(m){this._enabled=!0,this._aroundCenter=!!m&&m.around==="center"},Ns.prototype.disable=function(){this._enabled=!1,this.reset()},Ns.prototype.isEnabled=function(){return this._enabled},Ns.prototype.isActive=function(){return this._active};var Bs=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.reset=function(){m.prototype.reset.call(this),delete this._distance,delete this._startDistance},p.prototype._start=function(f){this._startDistance=this._distance=f[0].dist(f[1])},p.prototype._move=function(f,v){var T=this._distance;if(this._distance=f[0].dist(f[1]),this._active||!(Math.abs(Mf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mf(this._distance,T),pinchAround:v}},p})(Ns);function ru(m,p){return 180*m.angleWith(p)/Math.PI}var dv=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.reset=function(){m.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},p.prototype._start=function(f){this._startVector=this._vector=f[0].sub(f[1]),this._minDiameter=f[0].dist(f[1])},p.prototype._move=function(f,v){var T=this._vector;if(this._vector=f[0].sub(f[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ru(this._vector,T),pinchAround:v}},p.prototype._isBelowThreshold=function(f){this._minDiameter=Math.min(this._minDiameter,f.mag());var v=25/(Math.PI*this._minDiameter)*360,T=ru(f,this._startVector);return Math.abs(T)<v},p})(Ns);function H_(m){return Math.abs(m.y)>Math.abs(m.x)}var my=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.reset=function(){m.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},p.prototype._start=function(f){this._lastPoints=f,H_(f[0].sub(f[1]))&&(this._valid=!1)},p.prototype._move=function(f,v,T){var k=f[0].sub(this._lastPoints[0]),W=f[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(k,W,T.timeStamp),this._valid)return this._lastPoints=f,this._active=!0,{pitchDelta:(k.y+W.y)/2*-.5}},p.prototype.gestureBeginsVertically=function(f,v,T){if(this._valid!==void 0)return this._valid;var k=f.mag()>=2,W=v.mag()>=2;if(k||W){if(!k||!W)return this._firstMove===void 0&&(this._firstMove=T),T-this._firstMove<100&&void 0;var D=f.y>0==v.y>0;return H_(f)&&H_(v)&&D}},p})(Ns),fy={panStep:100,bearingStep:15,pitchStep:10},sl=function(){var m=fy;this._panStep=m.panStep,this._bearingStep=m.bearingStep,this._pitchStep=m.pitchStep,this._rotationDisabled=!1};function ho(m){return m*(2-m)}sl.prototype.blur=function(){this.reset()},sl.prototype.reset=function(){this._active=!1},sl.prototype.keydown=function(m){var p=this;if(!(m.altKey||m.ctrlKey||m.metaKey)){var f=0,v=0,T=0,k=0,W=0;switch(m.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:m.shiftKey?v=-1:(m.preventDefault(),k=-1);break;case 39:m.shiftKey?v=1:(m.preventDefault(),k=1);break;case 38:m.shiftKey?T=1:(m.preventDefault(),W=-1);break;case 40:m.shiftKey?T=-1:(m.preventDefault(),W=1);break;default:return}return this._rotationDisabled&&(v=0,T=0),{cameraAnimation:function(D){var q=D.getZoom();D.easeTo({duration:300,easeId:"keyboardHandler",easing:ho,zoom:f?Math.round(q)+f*(m.shiftKey?2:1):q,bearing:D.getBearing()+v*p._bearingStep,pitch:D.getPitch()+T*p._pitchStep,offset:[-k*p._panStep,-W*p._panStep],center:D.getCenter()},{originalEvent:m})}}}},sl.prototype.enable=function(){this._enabled=!0},sl.prototype.disable=function(){this._enabled=!1,this.reset()},sl.prototype.isEnabled=function(){return this._enabled},sl.prototype.isActive=function(){return this._active},sl.prototype.disableRotation=function(){this._rotationDisabled=!0},sl.prototype.enableRotation=function(){this._rotationDisabled=!1};var oi=function(m,p){this._map=m,this._el=m.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,r.bindAll(["_onTimeout"],this)};oi.prototype.setZoomRate=function(m){this._defaultZoomRate=m},oi.prototype.setWheelZoomRate=function(m){this._wheelZoomRate=m},oi.prototype.isEnabled=function(){return!!this._enabled},oi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},oi.prototype.isZooming=function(){return!!this._zooming},oi.prototype.enable=function(m){this.isEnabled()||(this._enabled=!0,this._aroundCenter=m&&m.around==="center")},oi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},oi.prototype.wheel=function(m){if(this.isEnabled()){var p=m.deltaMode===r.window.WheelEvent.DOM_DELTA_LINE?40*m.deltaY:m.deltaY,f=r.browser.now(),v=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,p!==0&&p%4.000244140625==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,m)):this._type||(this._type=Math.abs(v*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),m.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=m,this._delta-=p,this._active||this._start(m)),m.preventDefault()}},oi.prototype._onTimeout=function(m){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},oi.prototype._start=function(m){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var p=u.mousePos(this._el,m);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(p)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},oi.prototype.renderFrame=function(){var m=this;if(this._frameId&&(this._frameId=null,this.isActive())){var p=this._map.transform;if(this._delta!==0){var f=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,v=2/(1+Math.exp(-Math.abs(this._delta*f)));this._delta<0&&v!==0&&(v=1/v);var T=typeof this._targetZoom=="number"?p.zoomScale(this._targetZoom):p.scale;this._targetZoom=Math.min(p.maxZoom,Math.max(p.minZoom,p.scaleZoom(T*v))),this._type==="wheel"&&(this._startZoom=p.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var k,W=typeof this._targetZoom=="number"?this._targetZoom:p.zoom,D=this._startZoom,q=this._easing,oe=!1;if(this._type==="wheel"&&D&&q){var be=Math.min((r.browser.now()-this._lastWheelEventTime)/200,1),ve=q(be);k=r.number(D,W,ve),be<1?this._frameId||(this._frameId=!0):oe=!0}else k=W,oe=!0;return this._active=!0,oe&&(this._active=!1,this._finishTimeout=setTimeout((function(){m._zooming=!1,m._handler._triggerRenderFrame(),delete m._targetZoom,delete m._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!oe,zoomDelta:k-p.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},oi.prototype._smoothOutEasing=function(m){var p=r.ease;if(this._prevEase){var f=this._prevEase,v=(r.browser.now()-f.start)/f.duration,T=f.easing(v+.01)-f.easing(v),k=.27/Math.sqrt(T*T+1e-4)*.01,W=Math.sqrt(.0729-k*k);p=r.bezier(k,W,.25,1)}return this._prevEase={start:r.browser.now(),duration:m,easing:p},p},oi.prototype.blur=function(){this.reset()},oi.prototype.reset=function(){this._active=!1};var kl=function(m,p){this._clickZoom=m,this._tapZoom=p};kl.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},kl.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},kl.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},kl.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ko=function(){this.reset()};ko.prototype.reset=function(){this._active=!1},ko.prototype.blur=function(){this.reset()},ko.prototype.dblclick=function(m,p){return m.preventDefault(),{cameraAnimation:function(f){f.easeTo({duration:300,zoom:f.getZoom()+(m.shiftKey?-1:1),around:f.unproject(p)},{originalEvent:m})}}},ko.prototype.enable=function(){this._enabled=!0},ko.prototype.disable=function(){this._enabled=!1,this.reset()},ko.prototype.isEnabled=function(){return this._enabled},ko.prototype.isActive=function(){return this._active};var Ur=function(){this._tap=new rl({numTouches:1,numTaps:1}),this.reset()};Ur.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ur.prototype.touchstart=function(m,p,f){this._swipePoint||(this._tapTime&&m.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=p[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(m,p,f))},Ur.prototype.touchmove=function(m,p,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;var v=p[0],T=v.y-this._swipePoint.y;return this._swipePoint=v,m.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(m,p,f)},Ur.prototype.touchend=function(m,p,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(m,p,f)&&(this._tapTime=m.timeStamp)},Ur.prototype.touchcancel=function(){this.reset()},Ur.prototype.enable=function(){this._enabled=!0},Ur.prototype.disable=function(){this._enabled=!1,this.reset()},Ur.prototype.isEnabled=function(){return this._enabled},Ur.prototype.isActive=function(){return this._active};var id=function(m,p,f){this._el=m,this._mousePan=p,this._touchPan=f};id.prototype.enable=function(m){this._inertiaOptions=m||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},id.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},id.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},id.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ju=function(m,p,f){this._pitchWithRotate=m.pitchWithRotate,this._mouseRotate=p,this._mousePitch=f};Ju.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ju.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ju.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ju.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ol=function(m,p,f,v){this._el=m,this._touchZoom=p,this._touchRotate=f,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0};ol.prototype.enable=function(m){this._touchZoom.enable(m),this._rotationDisabled||this._touchRotate.enable(m),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ol.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ol.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ol.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ol.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ol.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ls=function(m){return m.zoom||m.drag||m.pitch||m.rotate},X_=(function(m){function p(){m.apply(this,arguments)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p})(r.Event);function pa(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}var oa=function(m,p){this._map=m,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Z_(m),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p),r.bindAll(["handleEvent","handleWindowEvent"],this);var f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[r.window.document,"mousemove",{capture:!0}],[r.window.document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[r.window,"blur",void 0]];for(var v=0,T=this._listeners;v<T.length;v+=1){var k=T[v],W=k[0];u.addEventListener(W,k[1],W===r.window.document?this.handleWindowEvent:this.handleEvent,k[2])}};oa.prototype.destroy=function(){for(var m=0,p=this._listeners;m<p.length;m+=1){var f=p[m],v=f[0];u.removeEventListener(v,f[1],v===r.window.document?this.handleWindowEvent:this.handleEvent,f[2])}},oa.prototype._addDefaultHandlers=function(m){var p=this._map,f=p.getCanvasContainer();this._add("mapEvent",new Qn(p,m));var v=p.boxZoom=new Os(p,m);this._add("boxZoom",v);var T=new Fs,k=new ko;p.doubleClickZoom=new kl(k,T),this._add("tapZoom",T),this._add("clickZoom",k);var W=new Ur;this._add("tapDragZoom",W);var D=p.touchPitch=new my;this._add("touchPitch",D);var q=new Tf(m),oe=new _y(m);p.dragRotate=new Ju(m,q,oe),this._add("mouseRotate",q,["mousePitch"]),this._add("mousePitch",oe,["mouseRotate"]);var be=new hy(m),ve=new Ro(m);p.dragPan=new id(f,be,ve),this._add("mousePan",be),this._add("touchPan",ve,["touchZoom","touchRotate"]);var we=new dv,Oe=new Bs;p.touchZoomRotate=new ol(f,Oe,we,W),this._add("touchRotate",we,["touchPan","touchZoom"]),this._add("touchZoom",Oe,["touchPan","touchRotate"]);var We=p.scrollZoom=new oi(p,this);this._add("scrollZoom",We,["mousePan"]);var He=p.keyboard=new sl;this._add("keyboard",He),this._add("blockableMapEvent",new na(p));for(var Te=0,Ue=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Te<Ue.length;Te+=1){var Ke=Ue[Te];m.interactive&&m[Ke]&&p[Ke].enable(m[Ke])}},oa.prototype._add=function(m,p,f){this._handlers.push({handlerName:m,handler:p,allowed:f}),this._handlersById[m]=p},oa.prototype.stop=function(m){if(!this._updatingCamera){for(var p=0,f=this._handlers;p<f.length;p+=1)f[p].handler.reset();this._inertia.clear(),this._fireEvents({},{},m),this._changes=[]}},oa.prototype.isActive=function(){for(var m=0,p=this._handlers;m<p.length;m+=1)if(p[m].handler.isActive())return!0;return!1},oa.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},oa.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},oa.prototype.isMoving=function(){return!!ls(this._eventsInProgress)||this.isZooming()},oa.prototype._blockedByActive=function(m,p,f){for(var v in m)if(v!==f&&(!p||p.indexOf(v)<0))return!0;return!1},oa.prototype.handleWindowEvent=function(m){this.handleEvent(m,m.type+"Window")},oa.prototype._getMapTouches=function(m){for(var p=[],f=0,v=m;f<v.length;f+=1){var T=v[f];this._el.contains(T.target)&&p.push(T)}return p},oa.prototype.handleEvent=function(m,p){this._updatingCamera=!0;for(var f=m.type==="renderFrame"?void 0:m,v={needsRenderFrame:!1},T={},k={},W=m.touches?this._getMapTouches(m.touches):void 0,D=W?u.touchPos(this._el,W):u.mousePos(this._el,m),q=0,oe=this._handlers;q<oe.length;q+=1){var be=oe[q],ve=be.handlerName,we=be.handler,Oe=be.allowed;if(we.isEnabled()){var We=void 0;this._blockedByActive(k,Oe,ve)?we.reset():we[p||m.type]&&(We=we[p||m.type](m,D,W),this.mergeHandlerResult(v,T,We,ve,f),We&&We.needsRenderFrame&&this._triggerRenderFrame()),(We||we.isActive())&&(k[ve]=we)}}var He={};for(var Te in this._previousActiveHandlers)k[Te]||(He[Te]=f);this._previousActiveHandlers=k,(Object.keys(He).length||pa(v))&&(this._changes.push([v,T,He]),this._triggerRenderFrame()),(Object.keys(k).length||pa(v))&&this._map._stop(!0),this._updatingCamera=!1;var Ue=v.cameraAnimation;Ue&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ue(this._map))},oa.prototype.mergeHandlerResult=function(m,p,f,v,T){if(f){r.extend(m,f);var k={handlerName:v,originalEvent:f.originalEvent||T};f.zoomDelta!==void 0&&(p.zoom=k),f.panDelta!==void 0&&(p.drag=k),f.pitchDelta!==void 0&&(p.pitch=k),f.bearingDelta!==void 0&&(p.rotate=k)}},oa.prototype._applyChanges=function(){for(var m={},p={},f={},v=0,T=this._changes;v<T.length;v+=1){var k=T[v],W=k[0],D=k[1],q=k[2];W.panDelta&&(m.panDelta=(m.panDelta||new r.Point(0,0))._add(W.panDelta)),W.zoomDelta&&(m.zoomDelta=(m.zoomDelta||0)+W.zoomDelta),W.bearingDelta&&(m.bearingDelta=(m.bearingDelta||0)+W.bearingDelta),W.pitchDelta&&(m.pitchDelta=(m.pitchDelta||0)+W.pitchDelta),W.around!==void 0&&(m.around=W.around),W.pinchAround!==void 0&&(m.pinchAround=W.pinchAround),W.noInertia&&(m.noInertia=W.noInertia),r.extend(p,D),r.extend(f,q)}this._updateMapTransform(m,p,f),this._changes=[]},oa.prototype._updateMapTransform=function(m,p,f){var v=this._map,T=v.transform;if(!pa(m))return this._fireEvents(p,f,!0);var k=m.panDelta,W=m.zoomDelta,D=m.bearingDelta,q=m.pitchDelta,oe=m.around,be=m.pinchAround;be!==void 0&&(oe=be),v._stop(!0),oe=oe||v.transform.centerPoint;var ve=T.pointLocation(k?oe.sub(k):oe);D&&(T.bearing+=D),q&&(T.pitch+=q),W&&(T.zoom+=W),T.setLocationAtPoint(ve,oe),this._map._update(),m.noInertia||this._inertia.record(m),this._fireEvents(p,f,!0)},oa.prototype._fireEvents=function(m,p,f){var v=this,T=ls(this._eventsInProgress),k=ls(m),W={};for(var D in m)this._eventsInProgress[D]||(W[D+"start"]=m[D].originalEvent),this._eventsInProgress[D]=m[D];for(var q in!T&&k&&this._fireEvent("movestart",k.originalEvent),W)this._fireEvent(q,W[q]);for(var oe in k&&this._fireEvent("move",k.originalEvent),m)this._fireEvent(oe,m[oe].originalEvent);var be,ve={};for(var we in this._eventsInProgress){var Oe=this._eventsInProgress[we],We=Oe.handlerName,He=Oe.originalEvent;this._handlersById[We].isActive()||(delete this._eventsInProgress[we],ve[we+"end"]=be=p[We]||He)}for(var Te in ve)this._fireEvent(Te,ve[Te]);var Ue=ls(this._eventsInProgress);if(f&&(T||k)&&!Ue){this._updatingCamera=!0;var Ke=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),at=function(ut){return ut!==0&&-v._bearingSnap<ut&&ut<v._bearingSnap};Ke?(at(Ke.bearing||this._map.getBearing())&&(Ke.bearing=0),this._map.easeTo(Ke,{originalEvent:be})):(this._map.fire(new r.Event("moveend",{originalEvent:be})),at(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},oa.prototype._fireEvent=function(m,p){this._map.fire(new r.Event(m,p?{originalEvent:p}:{}))},oa.prototype._requestFrame=function(){var m=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(p){delete m._frameId,m.handleEvent(new X_("renderFrame",{timeStamp:p})),m._applyChanges()}))},oa.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Lf=(function(m){function p(f,v){m.call(this),this._moving=!1,this._zooming=!1,this.transform=f,this._bearingSnap=v.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.getCenter=function(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)},p.prototype.setCenter=function(f,v){return this.jumpTo({center:f},v)},p.prototype.panBy=function(f,v,T){return f=r.Point.convert(f).mult(-1),this.panTo(this.transform.center,r.extend({offset:f},v),T)},p.prototype.panTo=function(f,v,T){return this.easeTo(r.extend({center:f},v),T)},p.prototype.getZoom=function(){return this.transform.zoom},p.prototype.setZoom=function(f,v){return this.jumpTo({zoom:f},v),this},p.prototype.zoomTo=function(f,v,T){return this.easeTo(r.extend({zoom:f},v),T)},p.prototype.zoomIn=function(f,v){return this.zoomTo(this.getZoom()+1,f,v),this},p.prototype.zoomOut=function(f,v){return this.zoomTo(this.getZoom()-1,f,v),this},p.prototype.getBearing=function(){return this.transform.bearing},p.prototype.setBearing=function(f,v){return this.jumpTo({bearing:f},v),this},p.prototype.getPadding=function(){return this.transform.padding},p.prototype.setPadding=function(f,v){return this.jumpTo({padding:f},v),this},p.prototype.rotateTo=function(f,v,T){return this.easeTo(r.extend({bearing:f},v),T)},p.prototype.resetNorth=function(f,v){return this.rotateTo(0,r.extend({duration:1e3},f),v),this},p.prototype.resetNorthPitch=function(f,v){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},f),v),this},p.prototype.snapToNorth=function(f,v){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(f,v):this},p.prototype.getPitch=function(){return this.transform.pitch},p.prototype.setPitch=function(f,v){return this.jumpTo({pitch:f},v),this},p.prototype.cameraForBounds=function(f,v){f=r.LngLatBounds.convert(f);var T=v&&v.bearing||0;return this._cameraForBoxAndBearing(f.getNorthWest(),f.getSouthEast(),T,v)},p.prototype._cameraForBoxAndBearing=function(f,v,T,k){var W={top:0,bottom:0,right:0,left:0};if(typeof(k=r.extend({padding:W,offset:[0,0],maxZoom:this.transform.maxZoom},k)).padding=="number"){var D=k.padding;k.padding={top:D,bottom:D,right:D,left:D}}k.padding=r.extend(W,k.padding);var q=this.transform,oe=q.padding,be=q.project(r.LngLat.convert(f)),ve=q.project(r.LngLat.convert(v)),we=be.rotate(-T*Math.PI/180),Oe=ve.rotate(-T*Math.PI/180),We=new r.Point(Math.max(we.x,Oe.x),Math.max(we.y,Oe.y)),He=new r.Point(Math.min(we.x,Oe.x),Math.min(we.y,Oe.y)),Te=We.sub(He),Ue=(q.width-(oe.left+oe.right+k.padding.left+k.padding.right))/Te.x,Ke=(q.height-(oe.top+oe.bottom+k.padding.top+k.padding.bottom))/Te.y;if(!(Ke<0||Ue<0)){var at=Math.min(q.scaleZoom(q.scale*Math.min(Ue,Ke)),k.maxZoom),ut=typeof k.offset.x=="number"?new r.Point(k.offset.x,k.offset.y):r.Point.convert(k.offset),st=new r.Point((k.padding.left-k.padding.right)/2,(k.padding.top-k.padding.bottom)/2).rotate(T*Math.PI/180),dt=ut.add(st).mult(q.scale/q.zoomScale(at));return{center:q.unproject(be.add(ve).div(2).sub(dt)),zoom:at,bearing:T}}r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},p.prototype.fitBounds=function(f,v,T){return this._fitInternal(this.cameraForBounds(f,v),v,T)},p.prototype.fitScreenCoordinates=function(f,v,T,k,W){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.Point.convert(f)),this.transform.pointLocation(r.Point.convert(v)),T,k),k,W)},p.prototype._fitInternal=function(f,v,T){return f?(delete(v=r.extend(f,v)).padding,v.linear?this.easeTo(v,T):this.flyTo(v,T)):this},p.prototype.jumpTo=function(f,v){this.stop();var T=this.transform,k=!1,W=!1,D=!1;return"zoom"in f&&T.zoom!==+f.zoom&&(k=!0,T.zoom=+f.zoom),f.center!==void 0&&(T.center=r.LngLat.convert(f.center)),"bearing"in f&&T.bearing!==+f.bearing&&(W=!0,T.bearing=+f.bearing),"pitch"in f&&T.pitch!==+f.pitch&&(D=!0,T.pitch=+f.pitch),f.padding==null||T.isPaddingEqual(f.padding)||(T.padding=f.padding),this.fire(new r.Event("movestart",v)).fire(new r.Event("move",v)),k&&this.fire(new r.Event("zoomstart",v)).fire(new r.Event("zoom",v)).fire(new r.Event("zoomend",v)),W&&this.fire(new r.Event("rotatestart",v)).fire(new r.Event("rotate",v)).fire(new r.Event("rotateend",v)),D&&this.fire(new r.Event("pitchstart",v)).fire(new r.Event("pitch",v)).fire(new r.Event("pitchend",v)),this.fire(new r.Event("moveend",v))},p.prototype.easeTo=function(f,v){var T=this;this._stop(!1,f.easeId),((f=r.extend({offset:[0,0],duration:500,easing:r.ease},f)).animate===!1||!f.essential&&r.browser.prefersReducedMotion)&&(f.duration=0);var k=this.transform,W=this.getZoom(),D=this.getBearing(),q=this.getPitch(),oe=this.getPadding(),be="zoom"in f?+f.zoom:W,ve="bearing"in f?this._normalizeBearing(f.bearing,D):D,we="pitch"in f?+f.pitch:q,Oe="padding"in f?f.padding:k.padding,We=r.Point.convert(f.offset),He=k.centerPoint.add(We),Te=k.pointLocation(He),Ue=r.LngLat.convert(f.center||Te);this._normalizeCenter(Ue);var Ke,at,ut=k.project(Te),st=k.project(Ue).sub(ut),dt=k.zoomScale(be-W);f.around&&(Ke=r.LngLat.convert(f.around),at=k.locationPoint(Ke));var bt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||be!==W,this._rotating=this._rotating||D!==ve,this._pitching=this._pitching||we!==q,this._padding=!k.isPaddingEqual(Oe),this._easeId=f.easeId,this._prepareEase(v,f.noMoveStart,bt),this._ease((function(Ft){if(T._zooming&&(k.zoom=r.number(W,be,Ft)),T._rotating&&(k.bearing=r.number(D,ve,Ft)),T._pitching&&(k.pitch=r.number(q,we,Ft)),T._padding&&(k.interpolatePadding(oe,Oe,Ft),He=k.centerPoint.add(We)),Ke)k.setLocationAtPoint(Ke,at);else{var Gt=k.zoomScale(k.zoom-W),ea=be>W?Math.min(2,dt):Math.max(.5,dt),ya=Math.pow(ea,1-Ft),Ca=k.unproject(ut.add(st.mult(Ft*ya)).mult(Gt));k.setLocationAtPoint(k.renderWorldCopies?Ca.wrap():Ca,He)}T._fireMoveEvents(v)}),(function(Ft){T._afterEase(v,Ft)}),f),this},p.prototype._prepareEase=function(f,v,T){T===void 0&&(T={}),this._moving=!0,v||T.moving||this.fire(new r.Event("movestart",f)),this._zooming&&!T.zooming&&this.fire(new r.Event("zoomstart",f)),this._rotating&&!T.rotating&&this.fire(new r.Event("rotatestart",f)),this._pitching&&!T.pitching&&this.fire(new r.Event("pitchstart",f))},p.prototype._fireMoveEvents=function(f){this.fire(new r.Event("move",f)),this._zooming&&this.fire(new r.Event("zoom",f)),this._rotating&&this.fire(new r.Event("rotate",f)),this._pitching&&this.fire(new r.Event("pitch",f))},p.prototype._afterEase=function(f,v){if(!this._easeId||!v||this._easeId!==v){delete this._easeId;var T=this._zooming,k=this._rotating,W=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,T&&this.fire(new r.Event("zoomend",f)),k&&this.fire(new r.Event("rotateend",f)),W&&this.fire(new r.Event("pitchend",f)),this.fire(new r.Event("moveend",f))}},p.prototype.flyTo=function(f,v){var T=this;if(!f.essential&&r.browser.prefersReducedMotion){var k=r.pick(f,["center","zoom","bearing","pitch","around"]);return this.jumpTo(k,v)}this.stop(),f=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},f);var W=this.transform,D=this.getZoom(),q=this.getBearing(),oe=this.getPitch(),be=this.getPadding(),ve="zoom"in f?r.clamp(+f.zoom,W.minZoom,W.maxZoom):D,we="bearing"in f?this._normalizeBearing(f.bearing,q):q,Oe="pitch"in f?+f.pitch:oe,We="padding"in f?f.padding:W.padding,He=W.zoomScale(ve-D),Te=r.Point.convert(f.offset),Ue=W.centerPoint.add(Te),Ke=W.pointLocation(Ue),at=r.LngLat.convert(f.center||Ke);this._normalizeCenter(at);var ut=W.project(Ke),st=W.project(at).sub(ut),dt=f.curve,bt=Math.max(W.width,W.height),Ft=bt/He,Gt=st.mag();if("minZoom"in f){var ea=r.clamp(Math.min(f.minZoom,D,ve),W.minZoom,W.maxZoom),ya=bt/W.zoomScale(ea-D);dt=Math.sqrt(ya/Gt*2)}var Ca=dt*dt;function wa(Ra){var Ta=(Ft*Ft-bt*bt+(Ra?-1:1)*Ca*Ca*Gt*Gt)/(2*(Ra?Ft:bt)*Ca*Gt);return Math.log(Math.sqrt(Ta*Ta+1)-Ta)}function vi(Ra){return(Math.exp(Ra)-Math.exp(-Ra))/2}function ia(Ra){return(Math.exp(Ra)+Math.exp(-Ra))/2}var Wa=wa(0),Xa=function(Ra){return ia(Wa)/ia(Wa+dt*Ra)},Ga=function(Ra){return bt*((ia(Wa)*(vi(Ta=Wa+dt*Ra)/ia(Ta))-vi(Wa))/Ca)/Gt;var Ta},Pa=(wa(1)-Wa)/dt;if(Math.abs(Gt)<1e-6||!isFinite(Pa)){if(Math.abs(bt-Ft)<1e-6)return this.easeTo(f,v);var Ha=Ft<bt?-1:1;Pa=Math.abs(Math.log(Ft/bt))/dt,Ga=function(){return 0},Xa=function(Ra){return Math.exp(Ha*dt*Ra)}}return f.duration="duration"in f?+f.duration:1e3*Pa/("screenSpeed"in f?+f.screenSpeed/dt:+f.speed),f.maxDuration&&f.duration>f.maxDuration&&(f.duration=0),this._zooming=!0,this._rotating=q!==we,this._pitching=Oe!==oe,this._padding=!W.isPaddingEqual(We),this._prepareEase(v,!1),this._ease((function(Ra){var Ta=Ra*Pa,yr=1/Xa(Ta);W.zoom=Ra===1?ve:D+W.scaleZoom(yr),T._rotating&&(W.bearing=r.number(q,we,Ra)),T._pitching&&(W.pitch=r.number(oe,Oe,Ra)),T._padding&&(W.interpolatePadding(be,We,Ra),Ue=W.centerPoint.add(Te));var Wn=Ra===1?at:W.unproject(ut.add(st.mult(Ga(Ta))).mult(yr));W.setLocationAtPoint(W.renderWorldCopies?Wn.wrap():Wn,Ue),T._fireMoveEvents(v)}),(function(){return T._afterEase(v)}),f),this},p.prototype.isEasing=function(){return!!this._easeFrameId},p.prototype.stop=function(){return this._stop()},p.prototype._stop=function(f,v){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var T=this._onEaseEnd;delete this._onEaseEnd,T.call(this,v)}if(!f){var k=this.handlers;k&&k.stop(!1)}return this},p.prototype._ease=function(f,v,T){T.animate===!1||T.duration===0?(f(1),v()):(this._easeStart=r.browser.now(),this._easeOptions=T,this._onEaseFrame=f,this._onEaseEnd=v,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},p.prototype._renderFrameCallback=function(){var f=Math.min((r.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},p.prototype._normalizeBearing=function(f,v){f=r.wrap(f,-180,180);var T=Math.abs(f-v);return Math.abs(f-360-v)<T&&(f-=360),Math.abs(f+360-v)<T&&(f+=360),f},p.prototype._normalizeCenter=function(f){var v=this.transform;if(v.renderWorldCopies&&!v.lngRange){var T=f.lng-v.center.lng;f.lng+=T>180?-360:T<-180?360:0}},p})(r.Evented),us=function(m){m===void 0&&(m={}),this.options=m,r.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};us.prototype.getDefaultPosition=function(){return"bottom-right"},us.prototype.onAdd=function(m){var p=this.options&&this.options.compact;return this._map=m,this._container=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=u.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=u.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),p===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},us.prototype.onRemove=function(){u.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},us.prototype._setElementTitle=function(m,p){var f=this._map._getUIString("AttributionControl."+p);m.title=f,m.setAttribute("aria-label",f)},us.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},us.prototype._updateEditLink=function(){var m=this._editLink;m||(m=this._editLink=this._container.querySelector(".mapbox-improve-map"));var p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.config.ACCESS_TOKEN}];if(m){var f=p.reduce((function(v,T,k){return T.value&&(v+=T.key+"="+T.value+(k<p.length-1?"&":"")),v}),"?");m.href=r.config.FEEDBACK_URL+"/"+f+(this._map._hash?this._map._hash.getHashString(!0):""),m.rel="noopener nofollow",this._setElementTitle(m,"MapFeedback")}},us.prototype._updateData=function(m){!m||m.sourceDataType!=="metadata"&&m.sourceDataType!=="visibility"&&m.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},us.prototype._updateAttributions=function(){if(this._map.style){var m=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?m=m.concat(this.options.customAttribution.map((function(D){return typeof D!="string"?"":D}))):typeof this.options.customAttribution=="string"&&m.push(this.options.customAttribution)),this._map.style.stylesheet){var p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}var f=this._map.style.sourceCaches;for(var v in f){var T=f[v];if(T.used){var k=T.getSource();k.attribution&&m.indexOf(k.attribution)<0&&m.push(k.attribution)}}m.sort((function(D,q){return D.length-q.length}));var W=(m=m.filter((function(D,q){for(var oe=q+1;oe<m.length;oe++)if(m[oe].indexOf(D)>=0)return!1;return!0}))).join(" | ");W!==this._attribHTML&&(this._attribHTML=W,m.length?(this._innerContainer.innerHTML=W,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},us.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ll=function(){r.bindAll(["_updateLogo"],this),r.bindAll(["_updateCompact"],this)};ll.prototype.onAdd=function(m){this._map=m,this._container=u.create("div","mapboxgl-ctrl");var p=u.create("a","mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://www.mapbox.com/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ll.prototype.onRemove=function(){u.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ll.prototype.getDefaultPosition=function(){return"bottom-left"},ll.prototype._updateLogo=function(m){m&&m.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ll.prototype._logoRequired=function(){if(this._map.style){var m=this._map.style.sourceCaches;for(var p in m)if(m[p].getSource().mapbox_logo)return!0;return!1}},ll.prototype._updateCompact=function(){var m=this._container.children;if(m.length){var p=m[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("mapboxgl-compact"):p.classList.remove("mapboxgl-compact")}};var Hr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Hr.prototype.add=function(m){var p=++this._id;return this._queue.push({callback:m,id:p,cancelled:!1}),p},Hr.prototype.remove=function(m){for(var p=this._currentlyRunning,f=0,v=p?this._queue.concat(p):this._queue;f<v.length;f+=1){var T=v[f];if(T.id===m)return void(T.cancelled=!0)}},Hr.prototype.run=function(m){m===void 0&&(m=0);var p=this._currentlyRunning=this._queue;this._queue=[];for(var f=0,v=p;f<v.length;f+=1){var T=v[f];if(!T.cancelled&&(T.callback(m),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Hr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Pl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},gy=r.window.HTMLImageElement,Rf=r.window.HTMLElement,Fi=r.window.ImageBitmap,Mr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},hv=(function(m){function p(v){var T=this;if((v=r.extend({},Mr,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var k=new mi(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies);if(m.call(this,k,v),this._interactive=v.interactive,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new Hr,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},Pl,v.locale),this._clickTolerance=v.clickTolerance,this._requestManager=new r.RequestManager(v.transformRequest,v.accessToken),typeof v.container=="string"){if(this._container=r.window.document.getElementById(v.container),!this._container)throw new Error("Container '"+v.container+"' not found.")}else{if(!(v.container instanceof Rf))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return T._update(!1)})),this.on("moveend",(function(){return T._update(!1)})),this.on("zoom",(function(){return T._update(!0)})),r.window!==void 0&&(r.window.addEventListener("online",this._onWindowOnline,!1),r.window.addEventListener("resize",this._onWindowResize,!1),r.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new oa(this,v),this._hash=v.hash&&new co(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,r.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new us({customAttribution:v.customAttribution})),this.addControl(new ll,v.logoPosition),this.on("style.load",(function(){T.transform.unmodified&&T.jumpTo(T.style.stylesheet)})),this.on("data",(function(W){T._update(W.dataType==="style"),T.fire(new r.Event(W.dataType+"data",W))})),this.on("dataloading",(function(W){T.fire(new r.Event(W.dataType+"dataloading",W))}))}m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p;var f={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return p.prototype._getMapId=function(){return this._mapId},p.prototype.addControl=function(v,T){if(T===void 0&&(T=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var k=v.onAdd(this);this._controls.push(v);var W=this._controlPositions[T];return T.indexOf("bottom")!==-1?W.insertBefore(k,W.firstChild):W.appendChild(k),this},p.prototype.removeControl=function(v){if(!v||!v.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var T=this._controls.indexOf(v);return T>-1&&this._controls.splice(T,1),v.onRemove(this),this},p.prototype.hasControl=function(v){return this._controls.indexOf(v)>-1},p.prototype.resize=function(v){var T=this._containerDimensions(),k=T[0],W=T[1];if(k===this.transform.width&&W===this.transform.height)return this;this._resizeCanvas(k,W),this.transform.resize(k,W),this.painter.resize(k,W);var D=!this._moving;return D&&this.fire(new r.Event("movestart",v)).fire(new r.Event("move",v)),this.fire(new r.Event("resize",v)),D&&this.fire(new r.Event("moveend",v)),this},p.prototype.getBounds=function(){return this.transform.getBounds()},p.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},p.prototype.setMaxBounds=function(v){return this.transform.setMaxBounds(r.LngLatBounds.convert(v)),this._update()},p.prototype.setMinZoom=function(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},p.prototype.getMinZoom=function(){return this.transform.minZoom},p.prototype.setMaxZoom=function(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")},p.prototype.getMaxZoom=function(){return this.transform.maxZoom},p.prototype.setMinPitch=function(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},p.prototype.getMinPitch=function(){return this.transform.minPitch},p.prototype.setMaxPitch=function(v){if((v=v??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")},p.prototype.getMaxPitch=function(){return this.transform.maxPitch},p.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},p.prototype.setRenderWorldCopies=function(v){return this.transform.renderWorldCopies=v,this._update()},p.prototype.project=function(v){return this.transform.locationPoint(r.LngLat.convert(v))},p.prototype.unproject=function(v){return this.transform.pointLocation(r.Point.convert(v))},p.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},p.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},p.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},p.prototype._createDelegatedListener=function(v,T,k){var W,D=this;if(v==="mouseenter"||v==="mouseover"){var q=!1;return{layer:T,listener:k,delegates:{mousemove:function(be){var ve=D.getLayer(T)?D.queryRenderedFeatures(be.point,{layers:[T]}):[];ve.length?q||(q=!0,k.call(D,new rr(v,D,be.originalEvent,{features:ve}))):q=!1},mouseout:function(){q=!1}}}}if(v==="mouseleave"||v==="mouseout"){var oe=!1;return{layer:T,listener:k,delegates:{mousemove:function(be){(D.getLayer(T)?D.queryRenderedFeatures(be.point,{layers:[T]}):[]).length?oe=!0:oe&&(oe=!1,k.call(D,new rr(v,D,be.originalEvent)))},mouseout:function(be){oe&&(oe=!1,k.call(D,new rr(v,D,be.originalEvent)))}}}}return{layer:T,listener:k,delegates:(W={},W[v]=function(be){var ve=D.getLayer(T)?D.queryRenderedFeatures(be.point,{layers:[T]}):[];ve.length&&(be.features=ve,k.call(D,be),delete be.features)},W)}},p.prototype.on=function(v,T,k){if(k===void 0)return m.prototype.on.call(this,v,T);var W=this._createDelegatedListener(v,T,k);for(var D in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(W),W.delegates)this.on(D,W.delegates[D]);return this},p.prototype.once=function(v,T,k){if(k===void 0)return m.prototype.once.call(this,v,T);var W=this._createDelegatedListener(v,T,k);for(var D in W.delegates)this.once(D,W.delegates[D]);return this},p.prototype.off=function(v,T,k){var W=this;return k===void 0?m.prototype.off.call(this,v,T):(this._delegatedListeners&&this._delegatedListeners[v]&&(function(D){for(var q=D[v],oe=0;oe<q.length;oe++){var be=q[oe];if(be.layer===T&&be.listener===k){for(var ve in be.delegates)W.off(ve,be.delegates[ve]);return q.splice(oe,1),W}}})(this._delegatedListeners),this)},p.prototype.queryRenderedFeatures=function(v,T){if(!this.style)return[];var k;if(T!==void 0||v===void 0||v instanceof r.Point||Array.isArray(v)||(T=v,v=void 0),T=T||{},(v=v||[[0,0],[this.transform.width,this.transform.height]])instanceof r.Point||typeof v[0]=="number")k=[r.Point.convert(v)];else{var W=r.Point.convert(v[0]),D=r.Point.convert(v[1]);k=[W,new r.Point(D.x,W.y),D,new r.Point(W.x,D.y),W]}return this.style.queryRenderedFeatures(k,T,this.transform)},p.prototype.querySourceFeatures=function(v,T){return this.style.querySourceFeatures(v,T)},p.prototype.setStyle=function(v,T){return(T=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},T)).diff!==!1&&T.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,T),this):(this._localIdeographFontFamily=T.localIdeographFontFamily,this._updateStyle(v,T))},p.prototype._getUIString=function(v){var T=this._locale[v];if(T==null)throw new Error("Missing UI string '"+v+"'");return T},p.prototype._updateStyle=function(v,T){return this.style&&(this.style.setEventedParent(null),this.style._remove()),v?(this.style=new Ws(this,T||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v):this.style.loadJSON(v),this):(delete this.style,this)},p.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ws(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},p.prototype._diffStyle=function(v,T){var k=this;if(typeof v=="string"){var W=this._requestManager.normalizeStyleURL(v),D=this._requestManager.transformRequest(W,r.ResourceType.Style);r.getJSON(D,(function(q,oe){q?k.fire(new r.ErrorEvent(q)):oe&&k._updateDiff(oe,T)}))}else typeof v=="object"&&this._updateDiff(v,T)},p.prototype._updateDiff=function(v,T){try{this.style.setState(v)&&this._update(!0)}catch(k){r.warnOnce("Unable to perform style diff: "+(k.message||k.error||k)+".  Rebuilding the style from scratch."),this._updateStyle(v,T)}},p.prototype.getStyle=function(){if(this.style)return this.style.serialize()},p.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")},p.prototype.addSource=function(v,T){return this._lazyInitEmptyStyle(),this.style.addSource(v,T),this._update(!0)},p.prototype.isSourceLoaded=function(v){var T=this.style&&this.style.sourceCaches[v];if(T!==void 0)return T.loaded();this.fire(new r.ErrorEvent(new Error("There is no source with ID '"+v+"'")))},p.prototype.areTilesLoaded=function(){var v=this.style&&this.style.sourceCaches;for(var T in v){var k=v[T]._tiles;for(var W in k){var D=k[W];if(D.state!=="loaded"&&D.state!=="errored")return!1}}return!0},p.prototype.addSourceType=function(v,T,k){return this._lazyInitEmptyStyle(),this.style.addSourceType(v,T,k)},p.prototype.removeSource=function(v){return this.style.removeSource(v),this._update(!0)},p.prototype.getSource=function(v){return this.style.getSource(v)},p.prototype.addImage=function(v,T,k){k===void 0&&(k={});var W=k.pixelRatio;W===void 0&&(W=1);var D=k.sdf;D===void 0&&(D=!1);var q=k.stretchX,oe=k.stretchY,be=k.content;if(this._lazyInitEmptyStyle(),T instanceof gy||Fi&&T instanceof Fi){var ve=r.browser.getImageData(T);this.style.addImage(v,{data:new r.RGBAImage({width:ve.width,height:ve.height},ve.data),pixelRatio:W,stretchX:q,stretchY:oe,content:be,sdf:D,version:0})}else{if(T.width===void 0||T.height===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var we=T;this.style.addImage(v,{data:new r.RGBAImage({width:T.width,height:T.height},new Uint8Array(T.data)),pixelRatio:W,stretchX:q,stretchY:oe,content:be,sdf:D,version:0,userImage:we}),we.onAdd&&we.onAdd(this,v)}},p.prototype.updateImage=function(v,T){var k=this.style.getImage(v);if(!k)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var W=T instanceof gy||Fi&&T instanceof Fi?r.browser.getImageData(T):T,D=W.width,q=W.height,oe=W.data;return D===void 0||q===void 0?this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):D!==k.data.width||q!==k.data.height?this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(k.data.replace(oe,!(T instanceof gy||Fi&&T instanceof Fi)),void this.style.updateImage(v,k))},p.prototype.hasImage=function(v){return v?!!this.style.getImage(v):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)},p.prototype.removeImage=function(v){this.style.removeImage(v)},p.prototype.loadImage=function(v,T){r.getImage(this._requestManager.transformRequest(v,r.ResourceType.Image),T)},p.prototype.listImages=function(){return this.style.listImages()},p.prototype.addLayer=function(v,T){return this._lazyInitEmptyStyle(),this.style.addLayer(v,T),this._update(!0)},p.prototype.moveLayer=function(v,T){return this.style.moveLayer(v,T),this._update(!0)},p.prototype.removeLayer=function(v){return this.style.removeLayer(v),this._update(!0)},p.prototype.getLayer=function(v){return this.style.getLayer(v)},p.prototype.setLayerZoomRange=function(v,T,k){return this.style.setLayerZoomRange(v,T,k),this._update(!0)},p.prototype.setFilter=function(v,T,k){return k===void 0&&(k={}),this.style.setFilter(v,T,k),this._update(!0)},p.prototype.getFilter=function(v){return this.style.getFilter(v)},p.prototype.setPaintProperty=function(v,T,k,W){return W===void 0&&(W={}),this.style.setPaintProperty(v,T,k,W),this._update(!0)},p.prototype.getPaintProperty=function(v,T){return this.style.getPaintProperty(v,T)},p.prototype.setLayoutProperty=function(v,T,k,W){return W===void 0&&(W={}),this.style.setLayoutProperty(v,T,k,W),this._update(!0)},p.prototype.getLayoutProperty=function(v,T){return this.style.getLayoutProperty(v,T)},p.prototype.setLight=function(v,T){return T===void 0&&(T={}),this._lazyInitEmptyStyle(),this.style.setLight(v,T),this._update(!0)},p.prototype.getLight=function(){return this.style.getLight()},p.prototype.setFeatureState=function(v,T){return this.style.setFeatureState(v,T),this._update()},p.prototype.removeFeatureState=function(v,T){return this.style.removeFeatureState(v,T),this._update()},p.prototype.getFeatureState=function(v){return this.style.getFeatureState(v)},p.prototype.getContainer=function(){return this._container},p.prototype.getCanvasContainer=function(){return this._canvasContainer},p.prototype.getCanvas=function(){return this._canvas},p.prototype._containerDimensions=function(){var v=0,T=0;return this._container&&(v=this._container.clientWidth||400,T=this._container.clientHeight||300),[v,T]},p.prototype._detectMissingCSS=function(){r.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&r.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},p.prototype._setupContainer=function(){var v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=u.create("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();var T=this._canvasContainer=u.create("div","mapboxgl-canvas-container",v);this._interactive&&T.classList.add("mapboxgl-interactive"),this._canvas=u.create("canvas","mapboxgl-canvas",T),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var k=this._containerDimensions();this._resizeCanvas(k[0],k[1]);var W=this._controlContainer=u.create("div","mapboxgl-control-container",v),D=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(q){D[q]=u.create("div","mapboxgl-ctrl-"+q,W)})),this._container.addEventListener("scroll",this._onMapScroll,!1)},p.prototype._resizeCanvas=function(v,T){var k=r.browser.devicePixelRatio||1;this._canvas.width=k*v,this._canvas.height=k*T,this._canvas.style.width=v+"px",this._canvas.style.height=T+"px"},p.prototype._setupPainter=function(){var v=r.extend({},l.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),T=this._canvas.getContext("webgl",v)||this._canvas.getContext("experimental-webgl",v);T?(this.painter=new wn(T,this.transform),r.webpSupported.testSupport(T)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))},p.prototype._contextLost=function(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:v}))},p.prototype._contextRestored=function(v){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:v}))},p.prototype._onMapScroll=function(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},p.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},p.prototype._update=function(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this},p.prototype._requestRenderFrame=function(v){return this._update(),this._renderTaskQueue.add(v)},p.prototype._cancelRenderFrame=function(v){this._renderTaskQueue.remove(v)},p.prototype._render=function(v){var T,k=this,W=0,D=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(T=D.createQueryEXT(),D.beginQueryEXT(D.TIME_ELAPSED_EXT,T),W=r.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),!this._removed){var q=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var oe=this.transform.zoom,be=r.browser.now();this.style.zoomHistory.update(oe,be);var ve=new r.EvaluationParameters(oe,{now:be,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),we=ve.crossFadingFactor();we===1&&we===this._crossFadingFactor||(q=!0,this._crossFadingFactor=we),this.style.update(ve)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Oe=r.browser.now()-W;D.endQueryEXT(D.TIME_ELAPSED_EXT,T),setTimeout((function(){var Te=D.getQueryObjectEXT(T,D.QUERY_RESULT_EXT)/1e6;D.deleteQueryEXT(T),k.fire(new r.Event("gpu-timing-frame",{cpuTime:Oe,gpuTime:Te}))}),50)}if(this.listens("gpu-timing-layer")){var We=this.painter.collectGpuTimers();setTimeout((function(){var Te=k.painter.queryGpuTimers(We);k.fire(new r.Event("gpu-timing-layer",{layerTimes:Te}))}),50)}var He=this._sourcesDirty||this._styleDirty||this._placementDirty;return He||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||He||(this._fullyLoaded=!0),this}},p.prototype.remove=function(){this._hash&&this._hash.remove();for(var v=0,T=this._controls;v<T.length;v+=1)T[v].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),r.window!==void 0&&(r.window.removeEventListener("resize",this._onWindowResize,!1),r.window.removeEventListener("orientationchange",this._onWindowResize,!1),r.window.removeEventListener("online",this._onWindowOnline,!1));var k=this.painter.context.gl.getExtension("WEBGL_lose_context");k&&k.loseContext(),nd(this._canvasContainer),nd(this._controlContainer),nd(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new r.Event("remove"))},p.prototype.triggerRepaint=function(){var v=this;this.style&&!this._frame&&(this._frame=r.browser.frame((function(T){v._frame=null,v._render(T)})))},p.prototype._onWindowOnline=function(){this._update()},p.prototype._onWindowResize=function(v){this._trackResize&&this.resize({originalEvent:v})._update()},f.showTileBoundaries.get=function(){return!!this._showTileBoundaries},f.showTileBoundaries.set=function(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())},f.showPadding.get=function(){return!!this._showPadding},f.showPadding.set=function(v){this._showPadding!==v&&(this._showPadding=v,this._update())},f.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},f.showCollisionBoxes.set=function(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())},f.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},f.showOverdrawInspector.set=function(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())},f.repaint.get=function(){return!!this._repaint},f.repaint.set=function(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())},f.vertices.get=function(){return!!this._vertices},f.vertices.set=function(v){this._vertices=v,this._update()},p.prototype._setCacheLimits=function(v,T){r.setCacheLimits(v,T)},f.version.get=function(){return r.version},Object.defineProperties(p.prototype,f),p})(Lf);function nd(m){m.parentNode&&m.parentNode.removeChild(m)}var py={showCompass:!0,showZoom:!0,visualizePitch:!1},su=function(m){var p=this;this.options=r.extend({},py,m),this._container=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(f){return f.preventDefault()})),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(f){return p._map.zoomIn({},{originalEvent:f})})),u.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(f){return p._map.zoomOut({},{originalEvent:f})})),u.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(f){p.options.visualizePitch?p._map.resetNorthPitch({},{originalEvent:f}):p._map.resetNorth({},{originalEvent:f})})),this._compassIcon=u.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};su.prototype._updateZoomButtons=function(){var m=this._map.getZoom(),p=m===this._map.getMaxZoom(),f=m===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},su.prototype._rotateCompassArrow=function(){var m=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=m},su.prototype.onAdd=function(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ds(this._map,this._compass,this.options.visualizePitch)),this._container},su.prototype.onRemove=function(){u.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},su.prototype._createButton=function(m,p){var f=u.create("button",m,this._container);return f.type="button",f.addEventListener("click",p),f},su.prototype._setButtonTitle=function(m,p){var f=this._map._getUIString("NavigationControl."+p);m.title=f,m.setAttribute("aria-label",f)};var Ds=function(m,p,f){f===void 0&&(f=!1),this._clickTolerance=10,this.element=p,this.mouseRotate=new Tf({clickTolerance:m.dragRotate._mouseRotate._clickTolerance}),this.map=m,f&&(this.mousePitch=new _y({clickTolerance:m.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),u.addEventListener(p,"mousedown",this.mousedown),u.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),u.addEventListener(p,"touchmove",this.touchmove),u.addEventListener(p,"touchend",this.touchend),u.addEventListener(p,"touchcancel",this.reset)};function yh(m,p,f){if(m=new r.LngLat(m.lng,m.lat),p){var v=new r.LngLat(m.lng-360,m.lat),T=new r.LngLat(m.lng+360,m.lat),k=f.locationPoint(m).distSqr(p);f.locationPoint(v).distSqr(p)<k?m=v:f.locationPoint(T).distSqr(p)<k&&(m=T)}for(;Math.abs(m.lng-f.center.lng)>180;){var W=f.locationPoint(m);if(W.x>=0&&W.y>=0&&W.x<=f.width&&W.y<=f.height)break;m.lng>f.center.lng?m.lng-=360:m.lng+=360}return m}Ds.prototype.down=function(m,p){this.mouseRotate.mousedown(m,p),this.mousePitch&&this.mousePitch.mousedown(m,p),u.disableDrag()},Ds.prototype.move=function(m,p){var f=this.map,v=this.mouseRotate.mousemoveWindow(m,p);if(v&&v.bearingDelta&&f.setBearing(f.getBearing()+v.bearingDelta),this.mousePitch){var T=this.mousePitch.mousemoveWindow(m,p);T&&T.pitchDelta&&f.setPitch(f.getPitch()+T.pitchDelta)}},Ds.prototype.off=function(){var m=this.element;u.removeEventListener(m,"mousedown",this.mousedown),u.removeEventListener(m,"touchstart",this.touchstart,{passive:!1}),u.removeEventListener(m,"touchmove",this.touchmove),u.removeEventListener(m,"touchend",this.touchend),u.removeEventListener(m,"touchcancel",this.reset),this.offTemp()},Ds.prototype.offTemp=function(){u.enableDrag(),u.removeEventListener(r.window,"mousemove",this.mousemove),u.removeEventListener(r.window,"mouseup",this.mouseup)},Ds.prototype.mousedown=function(m){this.down(r.extend({},m,{ctrlKey:!0,preventDefault:function(){return m.preventDefault()}}),u.mousePos(this.element,m)),u.addEventListener(r.window,"mousemove",this.mousemove),u.addEventListener(r.window,"mouseup",this.mouseup)},Ds.prototype.mousemove=function(m){this.move(m,u.mousePos(this.element,m))},Ds.prototype.mouseup=function(m){this.mouseRotate.mouseupWindow(m),this.mousePitch&&this.mousePitch.mouseupWindow(m),this.offTemp()},Ds.prototype.touchstart=function(m){m.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=u.touchPos(this.element,m.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return m.preventDefault()}},this._startPos))},Ds.prototype.touchmove=function(m){m.targetTouches.length!==1?this.reset():(this._lastPos=u.touchPos(this.element,m.targetTouches)[0],this.move({preventDefault:function(){return m.preventDefault()}},this._lastPos))},Ds.prototype.touchend=function(m){m.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ds.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Gl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kf(m,p,f){var v=m.classList;for(var T in Gl)v.remove("mapboxgl-"+f+"-anchor-"+T);v.add("mapboxgl-"+f+"-anchor-"+p)}var bh,q_=(function(m){function p(f,v){if(m.call(this),(f instanceof r.window.HTMLElement||v)&&(f=r.extend({element:f},v)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=f&&f.anchor||"center",this._color=f&&f.color||"#3FB1CE",this._scale=f&&f.scale||1,this._draggable=f&&f.draggable||!1,this._clickTolerance=f&&f.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=f&&f.rotation||0,this._rotationAlignment=f&&f.rotationAlignment||"auto",this._pitchAlignment=f&&f.pitchAlignment&&f.pitchAlignment!=="auto"?f.pitchAlignment:this._rotationAlignment,f&&f.element)this._element=f.element,this._offset=r.Point.convert(f&&f.offset||[0,0]);else{this._defaultMarker=!0,this._element=u.create("div"),this._element.setAttribute("aria-label","Map marker");var T=u.createNS("http://www.w3.org/2000/svg","svg");T.setAttributeNS(null,"display","block"),T.setAttributeNS(null,"height","41px"),T.setAttributeNS(null,"width","27px"),T.setAttributeNS(null,"viewBox","0 0 27 41");var k=u.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");var W=u.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"fill-rule","nonzero");var D=u.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(3.0, 29.0)"),D.setAttributeNS(null,"fill","#000000");for(var q=0,oe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];q<oe.length;q+=1){var be=oe[q],ve=u.createNS("http://www.w3.org/2000/svg","ellipse");ve.setAttributeNS(null,"opacity","0.04"),ve.setAttributeNS(null,"cx","10.5"),ve.setAttributeNS(null,"cy","5.80029008"),ve.setAttributeNS(null,"rx",be.rx),ve.setAttributeNS(null,"ry",be.ry),D.appendChild(ve)}var we=u.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"fill",this._color);var Oe=u.createNS("http://www.w3.org/2000/svg","path");Oe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),we.appendChild(Oe);var We=u.createNS("http://www.w3.org/2000/svg","g");We.setAttributeNS(null,"opacity","0.25"),We.setAttributeNS(null,"fill","#000000");var He=u.createNS("http://www.w3.org/2000/svg","path");He.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),We.appendChild(He);var Te=u.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Te.setAttributeNS(null,"fill","#FFFFFF");var Ue=u.createNS("http://www.w3.org/2000/svg","g");Ue.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ke=u.createNS("http://www.w3.org/2000/svg","circle");Ke.setAttributeNS(null,"fill","#000000"),Ke.setAttributeNS(null,"opacity","0.25"),Ke.setAttributeNS(null,"cx","5.5"),Ke.setAttributeNS(null,"cy","5.5"),Ke.setAttributeNS(null,"r","5.4999962");var at=u.createNS("http://www.w3.org/2000/svg","circle");at.setAttributeNS(null,"fill","#FFFFFF"),at.setAttributeNS(null,"cx","5.5"),at.setAttributeNS(null,"cy","5.5"),at.setAttributeNS(null,"r","5.4999962"),Ue.appendChild(Ke),Ue.appendChild(at),W.appendChild(D),W.appendChild(we),W.appendChild(We),W.appendChild(Te),W.appendChild(Ue),T.appendChild(W),T.setAttributeNS(null,"height",41*this._scale+"px"),T.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(T),this._offset=r.Point.convert(f&&f.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(ut){ut.preventDefault()})),this._element.addEventListener("mousedown",(function(ut){ut.preventDefault()})),kf(this._element,this._anchor,"marker"),this._popup=null}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.addTo=function(f){return this.remove(),this._map=f,f.getCanvasContainer().appendChild(this._element),f.on("move",this._update),f.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},p.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),u.remove(this._element),this._popup&&this._popup.remove(),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(f){return this._lngLat=r.LngLat.convert(f),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},p.prototype.getElement=function(){return this._element},p.prototype.setPopup=function(f){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),f){if(!("offset"in f.options)){var v=Math.sqrt(Math.pow(13.5,2)/2);f.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(24.6+v)],"bottom-right":[-v,-1*(24.6+v)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=f,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},p.prototype._onKeyPress=function(f){var v=f.code,T=f.charCode||f.keyCode;v!=="Space"&&v!=="Enter"&&T!==32&&T!==13||this.togglePopup()},p.prototype._onMapClick=function(f){var v=f.originalEvent.target,T=this._element;this._popup&&(v===T||T.contains(v))&&this.togglePopup()},p.prototype.getPopup=function(){return this._popup},p.prototype.togglePopup=function(){var f=this._popup;return f?(f.isOpen()?f.remove():f.addTo(this._map),this):this},p.prototype._update=function(f){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=yh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(v="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T="rotateX("+this._map.getPitch()+"deg)"),f&&f.type!=="moveend"||(this._pos=this._pos.round()),u.setTransform(this._element,Gl[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+T+" "+v)}},p.prototype.getOffset=function(){return this._offset},p.prototype.setOffset=function(f){return this._offset=r.Point.convert(f),this._update(),this},p.prototype._onMove=function(f){if(!this._isDragging){var v=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))},p.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"},p.prototype._addDragHandler=function(f){this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},p.prototype.setDraggable=function(f){return this._draggable=!!f,this._map&&(f?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},p.prototype.isDraggable=function(){return this._draggable},p.prototype.setRotation=function(f){return this._rotation=f||0,this._update(),this},p.prototype.getRotation=function(){return this._rotation},p.prototype.setRotationAlignment=function(f){return this._rotationAlignment=f||"auto",this._update(),this},p.prototype.getRotationAlignment=function(){return this._rotationAlignment},p.prototype.setPitchAlignment=function(f){return this._pitchAlignment=f&&f!=="auto"?f:this._rotationAlignment,this._update(),this},p.prototype.getPitchAlignment=function(){return this._pitchAlignment},p})(r.Evented),yy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},vh=0,rd=!1,by=(function(m){function p(f){m.call(this),this.options=r.extend({},yy,f),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.onAdd=function(f){var v;return this._map=f,this._container=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),v=this._setupUI,bh!==void 0?v(bh):r.window.navigator.permissions!==void 0?r.window.navigator.permissions.query({name:"geolocation"}).then((function(T){v(bh=T.state!=="denied")})):v(bh=!!r.window.navigator.geolocation),this._container},p.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),u.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,vh=0,rd=!1},p.prototype._isOutOfMapMaxBounds=function(f){var v=this._map.getMaxBounds(),T=f.coords;return v&&(T.longitude<v.getWest()||T.longitude>v.getEast()||T.latitude<v.getSouth()||T.latitude>v.getNorth())},p.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},p.prototype._onSuccess=function(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",f)),this._finish()}},p.prototype._updateCamera=function(f){var v=new r.LngLat(f.coords.longitude,f.coords.latitude),T=f.coords.accuracy,k=this._map.getBearing(),W=r.extend({bearing:k},this.options.fitBoundsOptions);this._map.fitBounds(v.toBounds(T),W,{geolocateSource:!0})},p.prototype._updateMarker=function(f){if(f){var v=new r.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(v).addTo(this._map),this._userLocationDotMarker.setLngLat(v).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},p.prototype._updateCircleRadius=function(){var f=this._map._container.clientHeight/2,v=this._map.unproject([0,f]),T=this._map.unproject([1,f]),k=v.distanceTo(T),W=Math.ceil(2*this._accuracy/k);this._circleElement.style.width=W+"px",this._circleElement.style.height=W+"px"},p.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},p.prototype._onError=function(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var v=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=v,this._geolocateButton.setAttribute("aria-label",v),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&rd)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",f)),this._finish()}},p.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},p.prototype._setupUI=function(f){var v=this;if(this._container.addEventListener("contextmenu",(function(W){return W.preventDefault()})),this._geolocateButton=u.create("button","mapboxgl-ctrl-geolocate",this._container),u.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",f===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var T=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=T,this._geolocateButton.setAttribute("aria-label",T)}else{var k=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=k,this._geolocateButton.setAttribute("aria-label",k)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=u.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new q_(this._dotElement),this._circleElement=u.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new q_({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(W){W.geolocateSource||v._watchState!=="ACTIVE_LOCK"||W.originalEvent&&W.originalEvent.type==="resize"||(v._watchState="BACKGROUND",v._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),v._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),v.fire(new r.Event("trackuserlocationend")))}))},p.prototype.trigger=function(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":vh--,rd=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++vh>1?(f={maximumAge:6e5,timeout:0},rd=!0):(f=this.options.positionOptions,rd=!1),this._geolocationWatchID=r.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else r.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},p.prototype._clearWatch=function(){r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},p})(r.Evented),Qu={maxWidth:100,unit:"metric"},ec=function(m){this.options=r.extend({},Qu,m),r.bindAll(["_onMove","setUnit"],this)};function Pf(m,p,f){var v=f&&f.maxWidth||100,T=m._container.clientHeight/2,k=m.unproject([0,T]),W=m.unproject([v,T]),D=k.distanceTo(W);if(f&&f.unit==="imperial"){var q=3.2808*D;q>5280?tc(p,v,q/5280,m._getUIString("ScaleControl.Miles")):tc(p,v,q,m._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?tc(p,v,D/1852,m._getUIString("ScaleControl.NauticalMiles")):D>=1e3?tc(p,v,D/1e3,m._getUIString("ScaleControl.Kilometers")):tc(p,v,D,m._getUIString("ScaleControl.Meters"))}function tc(m,p,f,v){var T,k,W,D=(T=f,(k=Math.pow(10,(""+Math.floor(T)).length-1))*(W=(W=T/k)>=10?10:W>=5?5:W>=3?3:W>=2?2:W>=1?1:(function(q){var oe=Math.pow(10,Math.ceil(-Math.log(q)/Math.LN10));return Math.round(q*oe)/oe})(W)));m.style.width=p*(D/f)+"px",m.innerHTML=D+"&nbsp;"+v}ec.prototype.getDefaultPosition=function(){return"bottom-left"},ec.prototype._onMove=function(){Pf(this._map,this._container,this.options)},ec.prototype.onAdd=function(m){return this._map=m,this._container=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ec.prototype.onRemove=function(){u.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ec.prototype.setUnit=function(m){this.options.unit=m,Pf(this._map,this._container,this.options)};var Po=function(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof r.window.HTMLElement?this._container=m.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in r.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in r.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in r.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in r.window.document&&(this._fullscreenchange="MSFullscreenChange")};Po.prototype.onAdd=function(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Po.prototype.onRemove=function(){u.remove(this._controlContainer),this._map=null,r.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Po.prototype._checkFullscreenSupport=function(){return!!(r.window.document.fullscreenEnabled||r.window.document.mozFullScreenEnabled||r.window.document.msFullscreenEnabled||r.window.document.webkitFullscreenEnabled)},Po.prototype._setupUI=function(){var m=this._fullscreenButton=u.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);u.create("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden",!0),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),r.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Po.prototype._updateTitle=function(){var m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m},Po.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Po.prototype._isFullscreen=function(){return this._fullscreen},Po.prototype._changeIcon=function(){(r.window.document.fullscreenElement||r.window.document.mozFullScreenElement||r.window.document.webkitFullscreenElement||r.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Po.prototype._onClickFullscreen=function(){this._isFullscreen()?r.window.document.exitFullscreen?r.window.document.exitFullscreen():r.window.document.mozCancelFullScreen?r.window.document.mozCancelFullScreen():r.window.document.msExitFullscreen?r.window.document.msExitFullscreen():r.window.document.webkitCancelFullScreen&&r.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var vy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Y_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),xy=(function(m){function p(f){m.call(this),this.options=r.extend(Object.create(vy),f),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return m&&(p.__proto__=m),(p.prototype=Object.create(m&&m.prototype)).constructor=p,p.prototype.addTo=function(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this},p.prototype.isOpen=function(){return!!this._map},p.prototype.remove=function(){return this._content&&u.remove(this._content),this._container&&(u.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(f){return this._lngLat=r.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},p.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},p.prototype.getElement=function(){return this._container},p.prototype.setText=function(f){return this.setDOMContent(r.window.document.createTextNode(f))},p.prototype.setHTML=function(f){var v,T=r.window.document.createDocumentFragment(),k=r.window.document.createElement("body");for(k.innerHTML=f;v=k.firstChild;)T.appendChild(v);return this.setDOMContent(T)},p.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},p.prototype.setMaxWidth=function(f){return this.options.maxWidth=f,this._update(),this},p.prototype.setDOMContent=function(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=u.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this},p.prototype.addClassName=function(f){this._container&&this._container.classList.add(f)},p.prototype.removeClassName=function(f){this._container&&this._container.classList.remove(f)},p.prototype.setOffset=function(f){return this.options.offset=f,this._update(),this},p.prototype.toggleClassName=function(f){if(this._container)return this._container.classList.toggle(f)},p.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=u.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},p.prototype._onMouseUp=function(f){this._update(f.point)},p.prototype._onMouseMove=function(f){this._update(f.point)},p.prototype._onDrag=function(f){this._update(f.point)},p.prototype._update=function(f){var v=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=u.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=u.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(ve){return v._container.classList.add(ve)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=yh(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||f)){var T=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat),k=this.options.anchor,W=(function ve(we){if(we){if(typeof we=="number"){var Oe=Math.round(Math.sqrt(.5*Math.pow(we,2)));return{center:new r.Point(0,0),top:new r.Point(0,we),"top-left":new r.Point(Oe,Oe),"top-right":new r.Point(-Oe,Oe),bottom:new r.Point(0,-we),"bottom-left":new r.Point(Oe,-Oe),"bottom-right":new r.Point(-Oe,-Oe),left:new r.Point(we,0),right:new r.Point(-we,0)}}if(we instanceof r.Point||Array.isArray(we)){var We=r.Point.convert(we);return{center:We,top:We,"top-left":We,"top-right":We,bottom:We,"bottom-left":We,"bottom-right":We,left:We,right:We}}return{center:r.Point.convert(we.center||[0,0]),top:r.Point.convert(we.top||[0,0]),"top-left":r.Point.convert(we["top-left"]||[0,0]),"top-right":r.Point.convert(we["top-right"]||[0,0]),bottom:r.Point.convert(we.bottom||[0,0]),"bottom-left":r.Point.convert(we["bottom-left"]||[0,0]),"bottom-right":r.Point.convert(we["bottom-right"]||[0,0]),left:r.Point.convert(we.left||[0,0]),right:r.Point.convert(we.right||[0,0])}}return ve(new r.Point(0,0))})(this.options.offset);if(!k){var D,q=this._container.offsetWidth,oe=this._container.offsetHeight;D=T.y+W.bottom.y<oe?["top"]:T.y>this._map.transform.height-oe?["bottom"]:[],T.x<q/2?D.push("left"):T.x>this._map.transform.width-q/2&&D.push("right"),k=D.length===0?"bottom":D.join("-")}var be=T.add(W[k]).round();u.setTransform(this._container,Gl[k]+" translate("+be.x+"px,"+be.y+"px)"),kf(this._container,k,"popup")}},p.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var f=this._container.querySelector(Y_);f&&f.focus()}},p.prototype._onClose=function(){this.remove()},p})(r.Evented),Gf={version:r.version,supported:l,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:hv,NavigationControl:su,GeolocateControl:by,AttributionControl:us,ScaleControl:ec,FullscreenControl:Po,Popup:xy,Marker:q_,Style:Ws,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.Point,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,config:r.config,prewarm:function(){mt().acquire(ct)},clearPrewarmedResources:function(){var m=Jt;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(ct),Jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return r.config.ACCESS_TOKEN},set accessToken(m){r.config.ACCESS_TOKEN=m},get baseApiUrl(){return r.config.API_URL},set baseApiUrl(m){r.config.API_URL=m},get workerCount(){return wt.workerCount},set workerCount(m){wt.workerCount=m},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){r.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage:function(m){r.clearTileCache(m)},workerUrl:""};return Gf})),n}))})(ox)),ox.exports}var vY=bY();const n9=cG(vY);class gT extends cf{constructor(e){const t=Object.assign({},e);delete t.accessToken,delete t.style,delete t.container,delete t.xyz,super(t),this.set("xyz",e.maplibreOptions.xyz),this.set("xyz_custom",e.maplibreOptions.xyz_custom),this.xyz_=e.xyz,e.accessToken&&(n9.accessToken=e.accessToken),this.map_=new n9.Map({container:e.maplibreOptions.container,style:e.maplibreOptions.style,attributionControl:!1,interactive:!1}),this.maplibreMap=this.map_}getMapBoxMap(){return this.map_}getMapLibreMap(){return this.map_}render(e){const t=this.map_.getCanvas(),i=e.viewState;t.style.position="absolute";const n=this.getVisible();t.style.display=n?"block":"none";const s=this.getOpacity().toString();s!==t.style.opacity&&(t.style.opacity=s);const r=i.rotation;return r&&this.map_.rotateTo(Yd(-r),{animate:!1}),this.map_.jumpTo({center:bc(i.center),zoom:i.zoom-1,animate:!1}),this.map_._frame&&(this.map_._frame.cancel(),this.map_._frame=null),this.map_._render(),t}setLayerVisibility(e,t){this.map_.setLayoutProperty(e,"visibility",t?"visible":"none")}getStyle(){return this.map_.getStyle()}getXYZ(){return this.get("xyz")}}function dG(a,e,t){t(a,e)&&a instanceof C_&&a.getLayers().forEach(n=>{dG(n,[...e,a],t)})}const hG=parseInt("19",10),xY=parseInt("8",10);var pT=(a=>(a.ON_LAYER_TYPE="ON_LAYER_TYPE",a))(pT||{});const Fm="EPSG:3857",Wu="EPSG:4326",tu="EPSG:2169",wY=JSON.parse("[2.6, 47.7, 8.6, 51]"),CY=parseInt("8",10);let qS;const YS=Ai();function qa(){function a(){return qS}function e(){return!!YS.value}function t(){return YS.value=qS=new gY({view:new gc({center:[682439,6379152],constrainResolution:!0,enableRotation:!0,extent:db(wY,"EPSG:4326","EPSG:3857"),multiWorld:!1,zoom:CY}),controls:[],keyboardEventTarget:document}),qS}function i(x,C){return x.id===C.id}function n(x,C){return x===C}function s(x,C){return x.layers?.some(I=>i(I,C))}function r(x,C){const I=x?.layers?.find(A=>i(A,C));return!n(I,C)}function l(x,C){return!(C===null||!("layers"in x)||!("layers"in C)||typeof C.layers>"u"||typeof x.layers>"u"||x.layers===C.layers)}function u(x,C){return!("layers"in x)||typeof x.layers>"u"?[]:C===null||!("layers"in C)?x.layers.map((I,A)=>({layer:I,position:A})):x.layers===C.layers?[]:x.layers.reduce((I,A,E)=>s(C,A)?I:[...I,{layer:A,position:E}],[])}function d(x,C){return l(x,C)?C.layers.reduce((I,A)=>s(x,A)?I:[...I,A],[]):[]}function h(x,C){return l(x,C)?x.layers.reduce((I,A)=>r(C,A)?[...I,A]:I,[]):[]}function g(x,C,I){const A=C.layers?.find(L=>L.id===x),E=I?.layers?.find(L=>L.id===x);return A?.type!==E?.type?pT.ON_LAYER_TYPE:null}function y(){const x=qa().getOlMap();x.updateSize(),dG(x.getLayerGroup(),[],C=>(C instanceof gT&&C.getMapLibreMap().resize(),!0))}return{olMap:YS,getOlMap:a,hasOlMap:e,createMap:t,equalsLayer:i,hasLayer:s,layerHasChanged:r,contextHasChanged:l,getAddedLayers:u,getRemovedLayers:d,getMutatedLayers:h,getMutationType:g,resize:y}}function yT(a,e="fr-FR"){return a?new Intl.DateTimeFormat(e,{dateStyle:"short",timeStyle:"short"}).format(new Date(a)):""}function IY(a,e,t){if(a==null||isNaN(a))return Va.t("N/A",{ns:"client"});switch(t){case"elevation":return bT(a,e);case"area":return YA(a,e);case"length":default:return s_(a,e)}}function bT(a,e=0){return isNaN(+a)?a:`${(+a).toFixed(e)} m`}function s_(a,e=2){return a===null?Va.t("N/A",{ns:"client"}):a<1e3?`${a.toFixed(e)} m`:a>=1e3?`${(a/1e3).toFixed(e)} km`:""}function YA(a,e=2){return a===null?Va.t("N/A",{ns:"client"}):a<1e6?`${a.toFixed(e)} m`:a>=1e6?`${(a/1e6).toFixed(e)} km`:""}function r9(a){return a===void 0?Va.t("N/A",{ns:"client"}):`${a.number}, ${a.street}, ${a.postal_code} ${a.locality}`}function SY(a,e,t){const i=t.split(":")[2];let n=t,s;i!==void 0?n=t.slice(0,t.lastIndexOf(":")):t.endsWith("*")&&(s=bc(a,e)[0]<=6?"UTM31N":"UTM32N",n=t.replace("3*",s.slice(3,5)));const r=fr(a,e,n),l=n===Wu,u=r.map((h,g)=>(l?AY(h):h)<0?"WS"[g]:"EN"[g]),d=r.map(h=>l?TY(h,i):Math.abs(Math.round(h)).toString());return s!==void 0?`${d.join(" | ")}  (${s})`:d.map((h,g)=>`${h} ${u[g]}`).join(" | ")}function AY(a){return(a+180)%360-180}function TY(a,e){const t=(a+180)%360-180,i=Math.abs(t);if(e===void 0)return Math.round(i*1e6)/1e6;const n=Math.floor(i),s=i%1*60;if(e==="DMm"){const r=Math.round(s*1e6)/1e6;return`${n} ${r}`}if(e==="DMS"){const r=Math.floor(s),l=Math.round(s%1*600)/10;return`${n} ${r} ${l}`}return"N/A"}const EY={install(a){a.directive("format-measure",MY)}};function MY(a,e){let t,i=e.value;const n=e?.arg!==void 0?+e?.arg:void 0;try{t=Object.keys(e.modifiers)[0]}catch{}i=IY(i,n,t),a.textContent=i}function LY(a){const e=Object.keys(a.defs),t=e.length;let i,n;for(i=0;i<t;++i){const s=e[i];if(!nx(s)){const r=a.defs(s);let l=r.units;!l&&r.projName==="longlat"&&(l="degrees"),tw(new PC({code:s,axisOrientation:r.axis,metersPerUnit:r.to_meter,units:l}))}}for(i=0;i<t;++i){const s=e[i],r=nx(s);for(n=0;n<t;++n){const l=e[n],u=nx(l);if(!rx(s,l))if(a.defs[s]===a.defs[l])GA([r,u]);else{const d=a(s,l);LH(r,u,LL(r,u,d.forward),LL(u,r,d.inverse))}}}}function RY(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)a("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),a("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");a("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),a("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]}var $m=1,Jm=2,np=3,kY=4,KA=5,s9=6378137,PY=6356752314e-3,o9=.0066943799901413165,K0=484813681109536e-20,Bt=Math.PI/2,GY=.16666666666666666,WY=.04722222222222222,OY=.022156084656084655,ra=1e-10,Ir=.017453292519943295,jo=57.29577951308232,yn=Math.PI/4,F1=Math.PI*2,Wr=3.14159265359,tl={};tl.greenwich=0;tl.lisbon=-9.131906111111;tl.paris=2.337229166667;tl.bogota=-74.080916666667;tl.madrid=-3.687938888889;tl.rome=12.452333333333;tl.bern=7.439583333333;tl.jakarta=106.807719444444;tl.ferro=-17.666666666667;tl.brussels=4.367975;tl.stockholm=18.058277777778;tl.athens=23.7163375;tl.oslo=10.722916666667;const FY={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var l9=/[\s_\-\/\(\)]/g;function __(a,e){if(a[e])return a[e];for(var t=Object.keys(a),i=e.toLowerCase().replace(l9,""),n=-1,s,r;++n<t.length;)if(s=t[n],r=s.toLowerCase().replace(l9,""),r===i)return a[s]}function jA(a){var e={},t=a.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,u){var d=u.split("=");return d.push(!0),l[d[0].toLowerCase()]=d[1],l},{}),i,n,s,r={proj:"projName",datum:"datumCode",rf:function(l){e.rf=parseFloat(l)},lat_0:function(l){e.lat0=l*Ir},lat_1:function(l){e.lat1=l*Ir},lat_2:function(l){e.lat2=l*Ir},lat_ts:function(l){e.lat_ts=l*Ir},lon_0:function(l){e.long0=l*Ir},lon_1:function(l){e.long1=l*Ir},lon_2:function(l){e.long2=l*Ir},alpha:function(l){e.alpha=parseFloat(l)*Ir},gamma:function(l){e.rectified_grid_angle=parseFloat(l)*Ir},lonc:function(l){e.longc=l*Ir},x_0:function(l){e.x0=parseFloat(l)},y_0:function(l){e.y0=parseFloat(l)},k_0:function(l){e.k0=parseFloat(l)},k:function(l){e.k0=parseFloat(l)},a:function(l){e.a=parseFloat(l)},b:function(l){e.b=parseFloat(l)},r:function(l){e.a=e.b=parseFloat(l)},r_a:function(){e.R_A=!0},zone:function(l){e.zone=parseInt(l,10)},south:function(){e.utmSouth=!0},towgs84:function(l){e.datum_params=l.split(",").map(function(u){return parseFloat(u)})},to_meter:function(l){e.to_meter=parseFloat(l)},units:function(l){e.units=l;var u=__(FY,l);u&&(e.to_meter=u.to_meter)},from_greenwich:function(l){e.from_greenwich=l*Ir},pm:function(l){var u=__(tl,l);e.from_greenwich=(u||parseFloat(l))*Ir},nadgrids:function(l){l==="@null"?e.datumCode="none":e.nadgrids=l},axis:function(l){var u="ewnsud";l.length===3&&u.indexOf(l.substr(0,1))!==-1&&u.indexOf(l.substr(1,1))!==-1&&u.indexOf(l.substr(2,1))!==-1&&(e.axis=l)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(i in t)n=t[i],i in r?(s=r[i],typeof s=="function"?s(n):e[s]=n):e[i]=n;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=a,e}class _G{static getId(e){const t=e.find(i=>Array.isArray(i)&&i[0]==="ID");return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(e,t="unit"){if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};const i=e[1],n=parseFloat(e[2])||null,s=e.find(l=>Array.isArray(l)&&l[0]==="ID"),r=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:t,name:i,conversion_factor:n,id:r}}static convertAxis(e){const t=e[1]||"Unknown";let i;const n=t.match(/^\((.)\)$/);if(n){const d=n[1].toUpperCase();if(d==="E")i="east";else if(d==="N")i="north";else if(d==="U")i="up";else throw new Error(`Unknown axis abbreviation: ${d}`)}else i=e[2]?e[2].toLowerCase():"unknown";const s=e.find(d=>Array.isArray(d)&&d[0]==="ORDER"),r=s?parseInt(s[1],10):null,l=e.find(d=>Array.isArray(d)&&(d[0]==="LENGTHUNIT"||d[0]==="ANGLEUNIT"||d[0]==="SCALEUNIT")),u=this.convertUnit(l);return{name:t,direction:i,unit:u,order:r}}static extractAxes(e){return e.filter(t=>Array.isArray(t)&&t[0]==="AXIS").map(t=>this.convertAxis(t)).sort((t,i)=>(t.order||0)-(i.order||0))}static convert(e,t={}){switch(e[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=e[1],t.base_crs=e.find(y=>Array.isArray(y)&&y[0]==="BASEGEOGCRS")?this.convert(e.find(y=>Array.isArray(y)&&y[0]==="BASEGEOGCRS")):null,t.conversion=e.find(y=>Array.isArray(y)&&y[0]==="CONVERSION")?this.convert(e.find(y=>Array.isArray(y)&&y[0]==="CONVERSION")):null;const i=e.find(y=>Array.isArray(y)&&y[0]==="CS");i&&(t.coordinate_system={type:i[1],axis:this.extractAxes(e)});const n=e.find(y=>Array.isArray(y)&&y[0]==="LENGTHUNIT");if(n){const y=this.convertUnit(n);t.coordinate_system.unit=y}t.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=e[1];const s=e.find(y=>Array.isArray(y)&&(y[0]==="DATUM"||y[0]==="ENSEMBLE"));if(s){const y=this.convert(s);s[0]==="ENSEMBLE"?t.datum_ensemble=y:t.datum=y;const x=e.find(C=>Array.isArray(C)&&C[0]==="PRIMEM");x&&x[1]!=="Greenwich"&&(y.prime_meridian={name:x[1],longitude:parseFloat(x[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},t.id=this.getId(e);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=e[1],t.ellipsoid=e.find(y=>Array.isArray(y)&&y[0]==="ELLIPSOID")?this.convert(e.find(y=>Array.isArray(y)&&y[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=e[1],t.members=e.filter(y=>Array.isArray(y)&&y[0]==="MEMBER").map(y=>({type:"DatumEnsembleMember",name:y[1],id:this.getId(y)}));const r=e.find(y=>Array.isArray(y)&&y[0]==="ENSEMBLEACCURACY");r&&(t.accuracy=parseFloat(r[1]));const l=e.find(y=>Array.isArray(y)&&y[0]==="ELLIPSOID");l&&(t.ellipsoid=this.convert(l)),t.id=this.getId(e);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=e[1],t.semi_major_axis=parseFloat(e[2]),t.inverse_flattening=parseFloat(e[3]),e.find(y=>Array.isArray(y)&&y[0]==="LENGTHUNIT")&&this.convert(e.find(y=>Array.isArray(y)&&y[0]==="LENGTHUNIT"),t);break;case"CONVERSION":t.type="Conversion",t.name=e[1],t.method=e.find(y=>Array.isArray(y)&&y[0]==="METHOD")?this.convert(e.find(y=>Array.isArray(y)&&y[0]==="METHOD")):null,t.parameters=e.filter(y=>Array.isArray(y)&&y[0]==="PARAMETER").map(y=>this.convert(y));break;case"METHOD":t.type="Method",t.name=e[1],t.id=this.getId(e);break;case"PARAMETER":t.type="Parameter",t.name=e[1],t.value=parseFloat(e[2]),t.unit=this.convertUnit(e.find(y=>Array.isArray(y)&&(y[0]==="LENGTHUNIT"||y[0]==="ANGLEUNIT"||y[0]==="SCALEUNIT"))),t.id=this.getId(e);break;case"BOUNDCRS":t.type="BoundCRS";const u=e.find(y=>Array.isArray(y)&&y[0]==="SOURCECRS");if(u){const y=u.find(x=>Array.isArray(x));t.source_crs=y?this.convert(y):null}const d=e.find(y=>Array.isArray(y)&&y[0]==="TARGETCRS");if(d){const y=d.find(x=>Array.isArray(x));t.target_crs=y?this.convert(y):null}const h=e.find(y=>Array.isArray(y)&&y[0]==="ABRIDGEDTRANSFORMATION");h?t.transformation=this.convert(h):t.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=e[1],t.method=e.find(y=>Array.isArray(y)&&y[0]==="METHOD")?this.convert(e.find(y=>Array.isArray(y)&&y[0]==="METHOD")):null,t.parameters=e.filter(y=>Array.isArray(y)&&(y[0]==="PARAMETER"||y[0]==="PARAMETERFILE")).map(y=>{if(y[0]==="PARAMETER")return this.convert(y);if(y[0]==="PARAMETERFILE")return{name:y[1],value:y[2],id:{authority:"EPSG",code:8656}}}),t.parameters.length===7){const y=t.parameters[6];y.name==="Scale difference"&&(y.value=Math.round((y.value-1)*1e12)/1e6)}t.id=this.getId(e);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const g=this.convertUnit(e,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach(y=>{y.unit||(y.unit=g)}),g.conversion_factor&&g.conversion_factor!==1&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:g});break;default:t.keyword=e[0];break}return t}}class NY extends _G{static convert(e,t={}){return super.convert(e,t),t.coordinate_system&&t.coordinate_system.subtype==="Cartesian"&&delete t.coordinate_system,t.usage&&delete t.usage,t}}class BY extends _G{static convert(e,t={}){super.convert(e,t);const i=e.find(s=>Array.isArray(s)&&s[0]==="CS");i&&(t.coordinate_system={subtype:i[1],axis:this.extractAxes(e)});const n=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(n){const s=n.find(u=>Array.isArray(u)&&u[0]==="SCOPE"),r=n.find(u=>Array.isArray(u)&&u[0]==="AREA"),l=n.find(u=>Array.isArray(u)&&u[0]==="BBOX");t.usage={},s&&(t.usage.scope=s[1]),r&&(t.usage.area=r[1]),l&&(t.usage.bbox=l.slice(1))}return t}}function DY(a){return a.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(a.find(e=>Array.isArray(e)&&e[0]==="CS")||a[0]==="BOUNDCRS"||a[0]==="PROJCRS"||a[0]==="GEOGCRS","2015")}function VY(a){return(DY(a)==="2019"?BY:NY).convert(a)}function ZY(a){const e=a.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var N1=1,mG=2,fG=3,_w=4,gG=5,vT=-1,zY=/\s/,UY=/[A-Za-z]/,HY=/[A-Za-z84_]/,XC=/[,\]]/,pG=/[\d\.E\-\+]/;function sh(a){if(typeof a!="string")throw new Error("not a string");this.text=a.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=N1}sh.prototype.readCharicter=function(){var a=this.text[this.place++];if(this.state!==_w)for(;zY.test(a);){if(this.place>=this.text.length)return;a=this.text[this.place++]}switch(this.state){case N1:return this.neutral(a);case mG:return this.keyword(a);case _w:return this.quoted(a);case gG:return this.afterquote(a);case fG:return this.number(a);case vT:return}};sh.prototype.afterquote=function(a){if(a==='"'){this.word+='"',this.state=_w;return}if(XC.test(a)){this.word=this.word.trim(),this.afterItem(a);return}throw new Error(`havn't handled "`+a+'" in afterquote yet, index '+this.place)};sh.prototype.afterItem=function(a){if(a===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=N1;return}if(a==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=N1,this.currentObject=this.stack.pop(),this.currentObject||(this.state=vT);return}};sh.prototype.number=function(a){if(pG.test(a)){this.word+=a;return}if(XC.test(a)){this.word=parseFloat(this.word),this.afterItem(a);return}throw new Error(`havn't handled "`+a+'" in number yet, index '+this.place)};sh.prototype.quoted=function(a){if(a==='"'){this.state=gG;return}this.word+=a};sh.prototype.keyword=function(a){if(HY.test(a)){this.word+=a;return}if(a==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=N1;return}if(XC.test(a)){this.afterItem(a);return}throw new Error(`havn't handled "`+a+'" in keyword yet, index '+this.place)};sh.prototype.neutral=function(a){if(UY.test(a)){this.word=a,this.state=mG;return}if(a==='"'){this.word="",this.state=_w;return}if(pG.test(a)){this.word=a,this.state=fG;return}if(XC.test(a)){this.afterItem(a);return}throw new Error(`havn't handled "`+a+'" in neutral yet, index '+this.place)};sh.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===vT)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function XY(a){var e=new sh(a);return e.output()}function KS(a,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var i=e?{}:a,n=t.reduce(function(s,r){return Bg(r,s),s},i);e&&(a[e]=n)}function Bg(a,e){if(!Array.isArray(a)){e[a]=!0;return}var t=a.shift();if(t==="PARAMETER"&&(t=a.shift()),a.length===1){if(Array.isArray(a[0])){e[t]={},Bg(a[0],e[t]);return}e[t]=a[0];return}if(!a.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=a;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(a);return}Array.isArray(t)||(e[t]={});var i;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:a[0].toLowerCase(),convert:a[1]},a.length===3&&Bg(a[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:a[0],a:a[1],rf:a[2]},a.length===4&&Bg(a[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":a[0]=["name",a[0]],KS(e,t,a);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":a[0]=["name",a[0]],KS(e,t,a),e[t].type=t;return;default:for(i=-1;++i<a.length;)if(!Array.isArray(a[i]))return Bg(a,e[t]);return KS(e,t,a)}}var qY=.017453292519943295;function gu(a){return a*qY}function yG(a){const e=(a.projName||"").toLowerCase().replace(/_/g," ");!a.long0&&a.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(a.long0=a.longc),!a.lat_ts&&a.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(a.lat0=gu(a.lat1>0?90:-90),a.lat_ts=a.lat1,delete a.lat1):!a.lat_ts&&a.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(a.lat_ts=a.lat0,a.lat0=gu(a.lat0>0?90:-90),delete a.lat1)}function u9(a){let e={units:null,to_meter:void 0};return typeof a=="string"?(e.units=a.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):a&&a.name&&(e.units=a.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=a.conversion_factor),e}function c9(a){return typeof a=="object"?a.value*a.unit.conversion_factor:a}function d9(a,e){a.ellipsoid.radius?(e.a=a.ellipsoid.radius,e.rf=0):(e.a=c9(a.ellipsoid.semi_major_axis),a.ellipsoid.inverse_flattening!==void 0?e.rf=a.ellipsoid.inverse_flattening:a.ellipsoid.semi_major_axis!==void 0&&a.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-c9(a.ellipsoid.semi_minor_axis))))}function mw(a,e={}){return!a||typeof a!="object"?a:a.type==="BoundCRS"?(mw(a.source_crs,e),a.transformation&&(a.transformation.method&&a.transformation.method.name==="NTv2"?e.nadgrids=a.transformation.parameters[0].value:e.datum_params=a.transformation.parameters.map(t=>t.value)),e):(Object.keys(a).forEach(t=>{const i=a[t];if(i!==null)switch(t){case"name":if(e.srsCode)break;e.name=i,e.srsCode=i;break;case"type":i==="GeographicCRS"?e.projName="longlat":i==="ProjectedCRS"&&a.conversion&&a.conversion.method&&(e.projName=a.conversion.method.name);break;case"datum":case"datum_ensemble":i.ellipsoid&&(e.ellps=i.ellipsoid.name,d9(i,e)),i.prime_meridian&&(e.from_greenwich=i.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=i.name,d9(i,e);break;case"prime_meridian":e.long0=(i.longitude||0)*Math.PI/180;break;case"coordinate_system":if(i.axis){if(e.axis=i.axis.map(n=>{const s=n.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",i.unit){const{units:n,to_meter:s}=u9(i.unit);e.units=n,e.to_meter=s}else if(i.axis[0]&&i.axis[0].unit){const{units:n,to_meter:s}=u9(i.axis[0].unit);e.units=n,e.to_meter=s}}break;case"id":i.authority&&i.code&&(e.title=i.authority+":"+i.code);break;case"conversion":i.method&&i.method.name&&(e.projName=i.method.name),i.parameters&&i.parameters.forEach(n=>{const s=n.name.toLowerCase().replace(/\s+/g,"_"),r=n.value;n.unit&&n.unit.conversion_factor?e[s]=r*n.unit.conversion_factor:n.unit==="degree"?e[s]=r*Math.PI/180:e[s]=r});break;case"unit":i.name&&(e.units=i.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),i.conversion_factor&&(e.to_meter=i.conversion_factor);break;case"base_crs":mw(i,e),e.datumCode=i.id?i.id.authority+"_"+i.id.code:i.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),yG(e),e)}var YY=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function KY(a,e){var t=e[0],i=e[1];!(t in a)&&i in a&&(a[t]=a[i],e.length===3&&(a[t]=e[2](a[t])))}function bG(a){for(var e=Object.keys(a),t=0,i=e.length;t<i;++t){var n=e[t];YY.indexOf(n)!==-1&&jY(a[n]),typeof a[n]=="object"&&bG(a[n])}}function jY(a){if(a.AUTHORITY){var e=Object.keys(a.AUTHORITY)[0];e&&e in a.AUTHORITY&&(a.title=e+":"+a.AUTHORITY[e])}if(a.type==="GEOGCS"?a.projName="longlat":a.type==="LOCAL_CS"?(a.projName="identity",a.local=!0):typeof a.PROJECTION=="object"?a.projName=Object.keys(a.PROJECTION)[0]:a.projName=a.PROJECTION,a.AXIS){for(var t="",i=0,n=a.AXIS.length;i<n;++i){var s=[a.AXIS[i][0].toLowerCase(),a.AXIS[i][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(a.axis=t)}a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),a.units==="metre"&&(a.units="meter"),a.UNIT.convert&&(a.type==="GEOGCS"?a.DATUM&&a.DATUM.SPHEROID&&(a.to_meter=a.UNIT.convert*a.DATUM.SPHEROID.a):a.to_meter=a.UNIT.convert));var r=a.GEOGCS;a.type==="GEOGCS"&&(r=a),r&&(r.DATUM?a.datumCode=r.DATUM.name.toLowerCase():a.datumCode=r.name.toLowerCase(),a.datumCode.slice(0,2)==="d_"&&(a.datumCode=a.datumCode.slice(2)),a.datumCode==="new_zealand_1949"&&(a.datumCode="nzgd49"),(a.datumCode==="wgs_1984"||a.datumCode==="world_geodetic_system_1984")&&(a.PROJECTION==="Mercator_Auxiliary_Sphere"&&(a.sphere=!0),a.datumCode="wgs84"),a.datumCode==="belge_1972"&&(a.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(a.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),a.ellps.toLowerCase().slice(0,13)==="international"&&(a.ellps="intl"),a.a=r.DATUM.SPHEROID.a,a.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(a.datum_params=r.DATUM.TOWGS84),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36"),~a.datumCode.indexOf("osni_1952")&&(a.datumCode="osni52"),(~a.datumCode.indexOf("tm65")||~a.datumCode.indexOf("geodetic_datum_of_1965"))&&(a.datumCode="ire65"),a.datumCode==="ch1903+"&&(a.datumCode="ch1903"),~a.datumCode.indexOf("israel")&&(a.datumCode="isr93")),a.b&&!isFinite(a.b)&&(a.b=a.a),a.rectified_grid_angle&&(a.rectified_grid_angle=gu(a.rectified_grid_angle));function l(h){var g=a.to_meter||1;return h*g}var u=function(h){return KY(a,h)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",gu],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",gu],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",gu],["lat0","latitude_of_origin",gu],["lat0","standard_parallel_1",gu],["lat1","standard_parallel_1",gu],["lat2","standard_parallel_2",gu],["azimuth","Azimuth"],["alpha","azimuth",gu],["srsCode","name"]];d.forEach(u),yG(a)}function fw(a){if(typeof a=="object")return mw(a);const e=ZY(a);var t=XY(a);if(e==="WKT2"){const s=VY(t);return mw(s)}var i=t[0],n={};return Bg(t,n),bG(n),n[i]}function Es(a){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?Es[a]=jA(arguments[1]):Es[a]=fw(arguments[1]):t&&typeof t=="object"&&!("projName"in t)?Es[a]=fw(arguments[1]):(Es[a]=t,t||delete Es[a])}else if(arguments.length===1){if(Array.isArray(a))return a.map(function(i){return Array.isArray(i)?Es.apply(e,i):Es(i)});if(typeof a=="string"){if(a in Es)return Es[a]}else"EPSG"in a?Es["EPSG:"+a.EPSG]=a:"ESRI"in a?Es["ESRI:"+a.ESRI]=a:"IAU2000"in a?Es["IAU2000:"+a.IAU2000]=a:console.log(a);return}}RY(Es);function $Y(a){return typeof a=="string"}function JY(a){return a in Es}function QY(a){return a.indexOf("+")!==0&&a.indexOf("[")!==-1||typeof a=="object"&&!("srsCode"in a)}var eK=["3857","900913","3785","102113"];function tK(a){var e=__(a,"authority");if(e){var t=__(e,"epsg");return t&&eK.indexOf(t)>-1}}function aK(a){var e=__(a,"extension");if(e)return __(e,"proj4")}function iK(a){return a[0]==="+"}function nK(a){if($Y(a)){if(JY(a))return Es[a];if(QY(a)){var e=fw(a);if(tK(e))return Es["EPSG:3857"];var t=aK(e);return t?jA(t):e}if(iK(a))return jA(a)}else return"projName"in a?a:fw(a)}function h9(a,e){a=a||{};var t,i;if(!e)return a;for(i in e)t=e[i],t!==void 0&&(a[i]=t);return a}function Gc(a,e,t){var i=a*e;return t/Math.sqrt(1-i*i)}function yb(a){return a<0?-1:1}function da(a,e){return e||Math.abs(a)<=Wr?a:a-yb(a)*F1}function Au(a,e,t){var i=a*t,n=.5*a;return i=Math.pow((1-i)/(1+i),n),Math.tan(.5*(Bt-e))/i}function B1(a,e){for(var t=.5*a,i,n,s=Bt-2*Math.atan(e),r=0;r<=15;r++)if(i=a*Math.sin(s),n=Bt-2*Math.atan(e*Math.pow((1-i)/(1+i),t))-s,s+=n,Math.abs(n)<=1e-10)return s;return-9999}function rK(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Gc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function sK(a){var e=a.x,t=a.y;if(t*jo>90&&t*jo<-90&&e*jo>180&&e*jo<-180)return null;var i,n;if(Math.abs(Math.abs(t)-Bt)<=ra)return null;if(this.sphere)i=this.x0+this.a*this.k0*da(e-this.long0,this.over),n=this.y0+this.a*this.k0*Math.log(Math.tan(yn+.5*t));else{var s=Math.sin(t),r=Au(this.e,t,s);i=this.x0+this.a*this.k0*da(e-this.long0,this.over),n=this.y0-this.a*this.k0*Math.log(r)}return a.x=i,a.y=n,a}function oK(a){var e=a.x-this.x0,t=a.y-this.y0,i,n;if(this.sphere)n=Bt-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(n=B1(this.e,s),n===-9999)return null}return i=da(this.long0+e/(this.a*this.k0),this.over),a.x=i,a.y=n,a}var lK=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const uK={init:rK,forward:sK,inverse:oK,names:lK};function cK(){}function _9(a){return a}var vG=["longlat","identity"];const dK={init:cK,forward:_9,inverse:_9,names:vG};var hK=[uK,dK],vm={},Dg=[];function xG(a,e){var t=Dg.length;return a.names?(Dg[t]=a,a.names.forEach(function(i){vm[i.toLowerCase()]=t}),this):(console.log(e),!0)}function wG(a){return a.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function _K(a){if(!a)return!1;var e=a.toLowerCase();if(typeof vm[e]<"u"&&Dg[vm[e]]||(e=wG(e),e in vm&&Dg[vm[e]]))return Dg[vm[e]]}function mK(){hK.forEach(xG)}const fK={start:mK,add:xG,get:_K};var CG={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const gK=CG.WGS84;function pK(a,e,t,i){var n=a*a,s=e*e,r=(n-s)/n,l=0;i?(a*=1-r*(GY+r*(WY+r*OY)),n=a*a,r=0):l=Math.sqrt(r);var u=(n-s)/s;return{es:r,e:l,ep2:u}}function yK(a,e,t,i,n){if(!a){var s=__(CG,i);s||(s=gK),a=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*a),(t===0||Math.abs(a-e)<ra)&&(n=!0,e=a),{a,b:e,rf:t,sphere:n}}var lx={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var bK in lx){var jS=lx[bK];jS.datumName&&(lx[jS.datumName]=jS)}function vK(a,e,t,i,n,s,r){var l={};return a===void 0||a==="none"?l.datum_type=KA:l.datum_type=kY,e&&(l.datum_params=e.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=$m),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=Jm,l.datum_params[3]*=K0,l.datum_params[4]*=K0,l.datum_params[5]*=K0,l.datum_params[6]=l.datum_params[6]/1e6+1)),r&&(l.datum_type=np,l.grids=r),l.a=t,l.b=i,l.es=n,l.ep2=s,l}var xT={};function xK(a,e,t){return e instanceof ArrayBuffer?wK(a,e,t):{ready:CK(a,e)}}function wK(a,e,t){var i=!0;t!==void 0&&t.includeErrorFields===!1&&(i=!1);var n=new DataView(e),s=AK(n),r=TK(n,s),l=EK(n,r,s,i),u={header:r,subgrids:l};return xT[a]=u,u}async function CK(a,e){for(var t=[],i=await e.getImageCount(),n=i-1;n>=0;n--){var s=await e.getImage(n),r=await s.readRasters(),l=r,u=[s.getWidth(),s.getHeight()],d=s.getBoundingBox().map(m9),h=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(m9),g=d[0]+(u[0]-1)*h[0],y=d[3]-(u[1]-1)*h[1],x=l[0],C=l[1],I=[];for(let L=u[1]-1;L>=0;L--)for(let G=u[0]-1;G>=0;G--){var A=L*u[0]+G;I.push([-Jh(C[A]),Jh(x[A])])}t.push({del:h,lim:u,ll:[-g,y],cvs:I})}var E={header:{nSubgrids:i},subgrids:t};return xT[a]=E,E}function IK(a){if(a===void 0)return null;var e=a.split(",");return e.map(SK)}function SK(a){if(a.length===0)return null;var e=a[0]==="@";return e&&(a=a.slice(1)),a==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:a,mandatory:!e,grid:xT[a]||null,isNull:!1}}function m9(a){return a*Math.PI/180}function Jh(a){return a/3600*Math.PI/180}function AK(a){var e=a.getInt32(8,!1);return e===11?!1:(e=a.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function TK(a,e){return{nFields:a.getInt32(8,e),nSubgridFields:a.getInt32(24,e),nSubgrids:a.getInt32(40,e),shiftType:$A(a,56,64).trim(),fromSemiMajorAxis:a.getFloat64(120,e),fromSemiMinorAxis:a.getFloat64(136,e),toSemiMajorAxis:a.getFloat64(152,e),toSemiMinorAxis:a.getFloat64(168,e)}}function $A(a,e,t){return String.fromCharCode.apply(null,new Uint8Array(a.buffer.slice(e,t)))}function EK(a,e,t,i){for(var n=176,s=[],r=0;r<e.nSubgrids;r++){var l=LK(a,n,t),u=RK(a,n,l,t,i),d=Math.round(1+(l.upperLongitude-l.lowerLongitude)/l.longitudeInterval),h=Math.round(1+(l.upperLatitude-l.lowerLatitude)/l.latitudeInterval);s.push({ll:[Jh(l.lowerLongitude),Jh(l.lowerLatitude)],del:[Jh(l.longitudeInterval),Jh(l.latitudeInterval)],lim:[d,h],count:l.gridNodeCount,cvs:MK(u)});var g=16;i===!1&&(g=8),n+=176+l.gridNodeCount*g}return s}function MK(a){return a.map(function(e){return[Jh(e.longitudeShift),Jh(e.latitudeShift)]})}function LK(a,e,t){return{name:$A(a,e+8,e+16).trim(),parent:$A(a,e+24,e+24+8).trim(),lowerLatitude:a.getFloat64(e+72,t),upperLatitude:a.getFloat64(e+88,t),lowerLongitude:a.getFloat64(e+104,t),upperLongitude:a.getFloat64(e+120,t),latitudeInterval:a.getFloat64(e+136,t),longitudeInterval:a.getFloat64(e+152,t),gridNodeCount:a.getInt32(e+168,t)}}function RK(a,e,t,i,n){var s=e+176,r=16;n===!1&&(r=8);for(var l=[],u=0;u<t.gridNodeCount;u++){var d={latitudeShift:a.getFloat32(s+u*r,i),longitudeShift:a.getFloat32(s+u*r+4,i)};n!==!1&&(d.latitudeAccuracy=a.getFloat32(s+u*r+8,i),d.longitudeAccuracy=a.getFloat32(s+u*r+12,i)),l.push(d)}return l}function Yl(a,e){if(!(this instanceof Yl))return new Yl(a);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(d){if(d)throw d};var t=nK(a);if(typeof t!="object"){e("Could not parse to valid json: "+a);return}var i=Yl.projections.get(t.projName);if(!i){e("Could not get projection name from: "+a);return}if(t.datumCode&&t.datumCode!=="none"){var n=__(lx,t.datumCode);n&&(t.datum_params=t.datum_params||(n.towgs84?n.towgs84.split(","):null),t.ellps=n.ellipse,t.datumName=n.datumName?n.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=yK(t.a,t.b,t.rf,t.ellps,t.sphere),r=pK(s.a,s.b,s.rf,t.R_A),l=IK(t.nadgrids),u=t.datum||vK(t.datumCode,t.datum_params,s.a,s.b,r.es,r.ep2,l);h9(this,t),h9(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=u,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}Yl.projections=fK;Yl.projections.start();function kK(a,e){return a.datum_type!==e.datum_type||a.a!==e.a||Math.abs(a.es-e.es)>5e-11?!1:a.datum_type===$m?a.datum_params[0]===e.datum_params[0]&&a.datum_params[1]===e.datum_params[1]&&a.datum_params[2]===e.datum_params[2]:a.datum_type===Jm?a.datum_params[0]===e.datum_params[0]&&a.datum_params[1]===e.datum_params[1]&&a.datum_params[2]===e.datum_params[2]&&a.datum_params[3]===e.datum_params[3]&&a.datum_params[4]===e.datum_params[4]&&a.datum_params[5]===e.datum_params[5]&&a.datum_params[6]===e.datum_params[6]:!0}function IG(a,e,t){var i=a.x,n=a.y,s=a.z?a.z:0,r,l,u,d;if(n<-Bt&&n>-1.001*Bt)n=-Bt;else if(n>Bt&&n<1.001*Bt)n=Bt;else{if(n<-Bt)return{x:-1/0,y:-1/0,z:a.z};if(n>Bt)return{x:1/0,y:1/0,z:a.z}}return i>Math.PI&&(i-=2*Math.PI),l=Math.sin(n),d=Math.cos(n),u=l*l,r=t/Math.sqrt(1-e*u),{x:(r+s)*d*Math.cos(i),y:(r+s)*d*Math.sin(i),z:(r*(1-e)+s)*l}}function SG(a,e,t,i){var n=1e-12,s=n*n,r=30,l,u,d,h,g,y,x,C,I,A,E,L,G,F=a.x,B=a.y,Z=a.z?a.z:0,Y,$,te;if(l=Math.sqrt(F*F+B*B),u=Math.sqrt(F*F+B*B+Z*Z),l/t<n){if(Y=0,u/t<n)return $=Bt,te=-i,{x:a.x,y:a.y,z:a.z}}else Y=Math.atan2(B,F);d=Z/u,h=l/u,g=1/Math.sqrt(1-e*(2-e)*h*h),C=h*(1-e)*g,I=d*g,G=0;do G++,x=t/Math.sqrt(1-e*I*I),te=l*C+Z*I-x*(1-e*I*I),y=e*x/(x+te),g=1/Math.sqrt(1-y*(2-y)*h*h),A=h*(1-y)*g,E=d*g,L=E*C-A*I,C=A,I=E;while(L*L>s&&G<r);return $=Math.atan(E/Math.abs(A)),{x:Y,y:$,z:te}}function PK(a,e,t){if(e===$m)return{x:a.x+t[0],y:a.y+t[1],z:a.z+t[2]};if(e===Jm){var i=t[0],n=t[1],s=t[2],r=t[3],l=t[4],u=t[5],d=t[6];return{x:d*(a.x-u*a.y+l*a.z)+i,y:d*(u*a.x+a.y-r*a.z)+n,z:d*(-l*a.x+r*a.y+a.z)+s}}}function GK(a,e,t){if(e===$m)return{x:a.x-t[0],y:a.y-t[1],z:a.z-t[2]};if(e===Jm){var i=t[0],n=t[1],s=t[2],r=t[3],l=t[4],u=t[5],d=t[6],h=(a.x-i)/d,g=(a.y-n)/d,y=(a.z-s)/d;return{x:h+u*g-l*y,y:-u*h+g+r*y,z:l*h-r*g+y}}}function u2(a){return a===$m||a===Jm}function WK(a,e,t){if(kK(a,e)||a.datum_type===KA||e.datum_type===KA)return t;var i=a.a,n=a.es;if(a.datum_type===np){var s=f9(a,!1,t);if(s!==0)return;i=s9,n=o9}var r=e.a,l=e.b,u=e.es;if(e.datum_type===np&&(r=s9,l=PY,u=o9),n===u&&i===r&&!u2(a.datum_type)&&!u2(e.datum_type))return t;if(t=IG(t,n,i),u2(a.datum_type)&&(t=PK(t,a.datum_type,a.datum_params)),u2(e.datum_type)&&(t=GK(t,e.datum_type,e.datum_params)),t=SG(t,u,r,l),e.datum_type===np){var d=f9(e,!0,t);if(d!==0)return}return t}function f9(a,e,t){if(a.grids===null||a.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-t.x,y:t.y},n={x:Number.NaN,y:Number.NaN},s=[];e:for(var r=0;r<a.grids.length;r++){var l=a.grids[r];if(s.push(l.name),l.isNull){n=i;break}if(l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}for(var u=l.grid.subgrids,d=0,h=u.length;d<h;d++){var g=u[d],y=(Math.abs(g.del[1])+Math.abs(g.del[0]))/1e4,x=g.ll[0]-y,C=g.ll[1]-y,I=g.ll[0]+(g.lim[0]-1)*g.del[0]+y,A=g.ll[1]+(g.lim[1]-1)*g.del[1]+y;if(!(C>i.y||x>i.x||A<i.y||I<i.x)&&(n=OK(i,e,g),!isNaN(n.x)))break e}}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*jo+" "+i.y*jo+" tried: '"+s+"'"),-1):(t.x=-n.x,t.y=n.y,0)}function OK(a,e,t){var i={x:Number.NaN,y:Number.NaN};if(isNaN(a.x))return i;var n={x:a.x,y:a.y};n.x-=t.ll[0],n.y-=t.ll[1],n.x=da(n.x-Math.PI)+Math.PI;var s=g9(n,t);if(e){if(isNaN(s.x))return i;s.x=n.x-s.x,s.y=n.y-s.y;var r=9,l=1e-12,u,d;do{if(d=g9(s,t),isNaN(d.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}u={x:n.x-(d.x+s.x),y:n.y-(d.y+s.y)},s.x+=u.x,s.y+=u.y}while(r--&&Math.abs(u.x)>l&&Math.abs(u.y)>l);if(r<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=da(s.x+t.ll[0]),i.y=s.y+t.ll[1]}else isNaN(s.x)||(i.x=a.x+s.x,i.y=a.y+s.y);return i}function g9(a,e){var t={x:a.x/e.del[0],y:a.y/e.del[1]},i={x:Math.floor(t.x),y:Math.floor(t.y)},n={x:t.x-1*i.x,y:t.y-1*i.y},s={x:Number.NaN,y:Number.NaN},r;if(i.x<0||i.x>=e.lim[0]||i.y<0||i.y>=e.lim[1])return s;r=i.y*e.lim[0]+i.x;var l={x:e.cvs[r][0],y:e.cvs[r][1]};r++;var u={x:e.cvs[r][0],y:e.cvs[r][1]};r+=e.lim[0];var d={x:e.cvs[r][0],y:e.cvs[r][1]};r--;var h={x:e.cvs[r][0],y:e.cvs[r][1]},g=n.x*n.y,y=n.x*(1-n.y),x=(1-n.x)*(1-n.y),C=(1-n.x)*n.y;return s.x=x*l.x+y*u.x+C*h.x+g*d.x,s.y=x*l.y+y*u.y+C*h.y+g*d.y,s}function p9(a,e,t){var i=t.x,n=t.y,s=t.z||0,r,l,u,d={};for(u=0;u<3;u++)if(!(e&&u===2&&t.z===void 0))switch(u===0?(r=i,"ew".indexOf(a.axis[u])!==-1?l="x":l="y"):u===1?(r=n,"ns".indexOf(a.axis[u])!==-1?l="y":l="x"):(r=s,l="z"),a.axis[u]){case"e":d[l]=r;break;case"w":d[l]=-r;break;case"n":d[l]=r;break;case"s":d[l]=-r;break;case"u":t[l]!==void 0&&(d.z=r);break;case"d":t[l]!==void 0&&(d.z=-r);break;default:return null}return d}function AG(a){var e={x:a[0],y:a[1]};return a.length>2&&(e.z=a[2]),a.length>3&&(e.m=a[3]),e}function FK(a){y9(a.x),y9(a.y)}function y9(a){if(typeof Number.isFinite=="function"){if(Number.isFinite(a))return;throw new TypeError("coordinates must be finite numbers")}if(typeof a!="number"||a!==a||!isFinite(a))throw new TypeError("coordinates must be finite numbers")}function NK(a,e){return(a.datum.datum_type===$m||a.datum.datum_type===Jm||a.datum.datum_type===np)&&e.datumCode!=="WGS84"||(e.datum.datum_type===$m||e.datum.datum_type===Jm||e.datum.datum_type===np)&&a.datumCode!=="WGS84"}function gw(a,e,t,i){var n;Array.isArray(t)?t=AG(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(FK(t),a.datum&&e.datum&&NK(a,e)&&(n=new Yl("WGS84"),t=gw(a,n,t,i),a=n),i&&a.axis!=="enu"&&(t=p9(a,!1,t)),a.projName==="longlat")t={x:t.x*Ir,y:t.y*Ir,z:t.z||0};else if(a.to_meter&&(t={x:t.x*a.to_meter,y:t.y*a.to_meter,z:t.z||0}),t=a.inverse(t),!t)return;if(a.from_greenwich&&(t.x+=a.from_greenwich),t=WK(a.datum,e.datum,t),!!t)return t=t,e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*jo,y:t.y*jo,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),i&&e.axis!=="enu"?p9(e,!0,t):(t&&!s&&delete t.z,t)}var b9=Yl("WGS84");function $S(a,e,t,i){var n,s,r;return Array.isArray(t)?(n=gw(a,e,t,i)||{x:NaN,y:NaN},t.length>2?typeof a.name<"u"&&a.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(t.slice(3)):[n.x,n.y,t[2]].concat(t.slice(3)):[n.x,n.y].concat(t.slice(2)):[n.x,n.y]):(s=gw(a,e,t,i),r=Object.keys(t),r.length===2||r.forEach(function(l){if(typeof a.name<"u"&&a.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;s[l]=t[l]}),s)}function c2(a){return a instanceof Yl?a:typeof a=="object"&&"oProj"in a?a.oProj:Yl(a)}function BK(a,e,t){var i,n,s=!1,r;return typeof e>"u"?(n=c2(a),i=b9,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,n=c2(a),i=b9,s=!0),i||(i=c2(a)),n||(n=c2(e)),t?$S(i,n,t):(r={forward:function(l,u){return $S(i,n,l,u)},inverse:function(l,u){return $S(n,i,l,u)}},s&&(r.oProj=n),r)}var v9=6,TG="AJSAJS",EG="AFAFAF",Vg=65,Bo=73,Dl=79,I0=86,S0=90;const DK={forward:MG,inverse:VK,toPoint:LG};function MG(a,e){return e=e||5,UK(ZK({lat:a[1],lon:a[0]}),e)}function VK(a){var e=wT(kG(a.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function LG(a){var e=wT(kG(a.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function JS(a){return a*(Math.PI/180)}function x9(a){return 180*(a/Math.PI)}function ZK(a){var e=a.lat,t=a.lon,i=6378137,n=.00669438,s=.9996,r,l,u,d,h,g,y,x=JS(e),C=JS(t),I,A;A=Math.floor((t+180)/6)+1,t===180&&(A=60),e>=56&&e<64&&t>=3&&t<12&&(A=32),e>=72&&e<84&&(t>=0&&t<9?A=31:t>=9&&t<21?A=33:t>=21&&t<33?A=35:t>=33&&t<42&&(A=37)),r=(A-1)*6-180+3,I=JS(r),l=n/(1-n),u=i/Math.sqrt(1-n*Math.sin(x)*Math.sin(x)),d=Math.tan(x)*Math.tan(x),h=l*Math.cos(x)*Math.cos(x),g=Math.cos(x)*(C-I),y=i*((1-n/4-3*n*n/64-5*n*n*n/256)*x-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*x)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*x)-35*n*n*n/3072*Math.sin(6*x));var E=s*u*(g+(1-d+h)*g*g*g/6+(5-18*d+d*d+72*h-58*l)*g*g*g*g*g/120)+5e5,L=s*(y+u*Math.tan(x)*(g*g/2+(5-d+9*h+4*h*h)*g*g*g*g/24+(61-58*d+d*d+600*h-330*l)*g*g*g*g*g*g/720));return e<0&&(L+=1e7),{northing:Math.round(L),easting:Math.round(E),zoneNumber:A,zoneLetter:zK(e)}}function wT(a){var e=a.northing,t=a.easting,i=a.zoneLetter,n=a.zoneNumber;if(n<0||n>60)return null;var s=.9996,r=6378137,l=.00669438,u,d=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),h,g,y,x,C,I,A,E,L,G=t-5e5,F=e;i<"N"&&(F-=1e7),A=(n-1)*6-180+3,u=l/(1-l),I=F/s,E=I/(r*(1-l/4-3*l*l/64-5*l*l*l/256)),L=E+(3*d/2-27*d*d*d/32)*Math.sin(2*E)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*E)+151*d*d*d/96*Math.sin(6*E),h=r/Math.sqrt(1-l*Math.sin(L)*Math.sin(L)),g=Math.tan(L)*Math.tan(L),y=u*Math.cos(L)*Math.cos(L),x=r*(1-l)/Math.pow(1-l*Math.sin(L)*Math.sin(L),1.5),C=G/(h*s);var B=L-h*Math.tan(L)/x*(C*C/2-(5+3*g+10*y-4*y*y-9*u)*C*C*C*C/24+(61+90*g+298*y+45*g*g-252*u-3*y*y)*C*C*C*C*C*C/720);B=x9(B);var Z=(C-(1+2*g+y)*C*C*C/6+(5-2*y+28*g-3*y*y+8*u+24*g*g)*C*C*C*C*C/120)/Math.cos(L);Z=A+x9(Z);var Y;if(a.accuracy){var $=wT({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});Y={top:$.lat,right:$.lon,bottom:B,left:Z}}else Y={lat:B,lon:Z};return Y}function zK(a){var e="Z";return 84>=a&&a>=72?e="X":72>a&&a>=64?e="W":64>a&&a>=56?e="V":56>a&&a>=48?e="U":48>a&&a>=40?e="T":40>a&&a>=32?e="S":32>a&&a>=24?e="R":24>a&&a>=16?e="Q":16>a&&a>=8?e="P":8>a&&a>=0?e="N":0>a&&a>=-8?e="M":-8>a&&a>=-16?e="L":-16>a&&a>=-24?e="K":-24>a&&a>=-32?e="J":-32>a&&a>=-40?e="H":-40>a&&a>=-48?e="G":-48>a&&a>=-56?e="F":-56>a&&a>=-64?e="E":-64>a&&a>=-72?e="D":-72>a&&a>=-80&&(e="C"),e}function UK(a,e){var t="00000"+a.easting,i="00000"+a.northing;return a.zoneNumber+a.zoneLetter+HK(a.easting,a.northing,a.zoneNumber)+t.substr(t.length-5,e)+i.substr(i.length-5,e)}function HK(a,e,t){var i=RG(t),n=Math.floor(a/1e5),s=Math.floor(e/1e5)%20;return XK(n,s,i)}function RG(a){var e=a%v9;return e===0&&(e=v9),e}function XK(a,e,t){var i=t-1,n=TG.charCodeAt(i),s=EG.charCodeAt(i),r=n+a-1,l=s+e,u=!1;r>S0&&(r=r-S0+Vg-1,u=!0),(r===Bo||n<Bo&&r>Bo||(r>Bo||n<Bo)&&u)&&r++,(r===Dl||n<Dl&&r>Dl||(r>Dl||n<Dl)&&u)&&(r++,r===Bo&&r++),r>S0&&(r=r-S0+Vg-1),l>I0?(l=l-I0+Vg-1,u=!0):u=!1,(l===Bo||s<Bo&&l>Bo||(l>Bo||s<Bo)&&u)&&l++,(l===Dl||s<Dl&&l>Dl||(l>Dl||s<Dl)&&u)&&(l++,l===Bo&&l++),l>I0&&(l=l-I0+Vg-1);var d=String.fromCharCode(r)+String.fromCharCode(l);return d}function kG(a){if(a&&a.length===0)throw"MGRSPoint coverting from nothing";for(var e=a.length,t=null,i="",n,s=0;!/[A-Z]/.test(n=a.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+a;i+=n,s++}var r=parseInt(i,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+a;var l=a.charAt(s++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+a;t=a.substring(s,s+=2);for(var u=RG(r),d=qK(t.charAt(0),u),h=YK(t.charAt(1),u);h<KK(l);)h+=2e6;var g=e-s;if(g%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+a;var y=g/2,x=0,C=0,I,A,E,L,G;return y>0&&(I=1e5/Math.pow(10,y),A=a.substring(s,s+y),x=parseFloat(A)*I,E=a.substring(s+y),C=parseFloat(E)*I),L=x+d,G=C+h,{easting:L,northing:G,zoneLetter:l,zoneNumber:r,accuracy:I}}function qK(a,e){for(var t=TG.charCodeAt(e-1),i=1e5,n=!1;t!==a.charCodeAt(0);){if(t++,t===Bo&&t++,t===Dl&&t++,t>S0){if(n)throw"Bad character: "+a;t=Vg,n=!0}i+=1e5}return i}function YK(a,e){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var t=EG.charCodeAt(e-1),i=0,n=!1;t!==a.charCodeAt(0);){if(t++,t===Bo&&t++,t===Dl&&t++,t>I0){if(n)throw"Bad character: "+a;t=Vg,n=!0}i+=1e5}return i}function KK(a){var e;switch(a){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+a}function Sp(a,e,t){if(!(this instanceof Sp))return new Sp(a,e,t);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if(typeof a=="object")this.x=a.x,this.y=a.y,this.z=a.z||0;else if(typeof a=="string"&&typeof e>"u"){var i=a.split(",");this.x=parseFloat(i[0]),this.y=parseFloat(i[1]),this.z=parseFloat(i[2])||0}else this.x=a,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Sp.fromMGRS=function(a){return new Sp(LG(a))};Sp.prototype.toMGRS=function(a){return MG([this.x,this.y],a)};var jK=1,$K=.25,w9=.046875,C9=.01953125,I9=.01068115234375,JK=.75,QK=.46875,ej=.013020833333333334,tj=.007120768229166667,aj=.3645833333333333,ij=.005696614583333333,nj=.3076171875;function CT(a){var e=[];e[0]=jK-a*($K+a*(w9+a*(C9+a*I9))),e[1]=a*(JK-a*(w9+a*(C9+a*I9)));var t=a*a;return e[2]=t*(QK-a*(ej+a*tj)),t*=a,e[3]=t*(aj-a*ij),e[4]=t*a*nj,e}function Dp(a,e,t,i){return t*=e,e*=e,i[0]*a-t*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var rj=20;function IT(a,e,t){for(var i=1/(1-e),n=a,s=rj;s;--s){var r=Math.sin(n),l=1-e*r*r;if(l=(Dp(n,r,Math.cos(n),t)-a)*(l*Math.sqrt(l))*i,n-=l,Math.abs(l)<ra)return n}return n}function sj(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=CT(this.es),this.ml0=Dp(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function oj(a){var e=a.x,t=a.y,i=da(e-this.long0,this.over),n,s,r,l=Math.sin(t),u=Math.cos(t);if(this.es){var h=u*i,g=Math.pow(h,2),y=this.ep2*Math.pow(u,2),x=Math.pow(y,2),C=Math.abs(u)>ra?Math.tan(t):0,I=Math.pow(C,2),A=Math.pow(I,2);n=1-this.es*Math.pow(l,2),h=h/Math.sqrt(n);var E=Dp(t,l,u,this.en);s=this.a*(this.k0*h*(1+g/6*(1-I+y+g/20*(5-18*I+A+14*y-58*I*y+g/42*(61+179*A-A*I-479*I)))))+this.x0,r=this.a*(this.k0*(E-this.ml0+l*i*h/2*(1+g/12*(5-I+9*y+4*x+g/30*(61+A-58*I+270*y-330*I*y+g/56*(1385+543*A-A*I-3111*I))))))+this.y0}else{var d=u*Math.sin(i);if(Math.abs(Math.abs(d)-1)<ra)return 93;if(s=.5*this.a*this.k0*Math.log((1+d)/(1-d))+this.x0,r=u*Math.cos(i)/Math.sqrt(1-Math.pow(d,2)),d=Math.abs(r),d>=1){if(d-1>ra)return 93;r=0}else r=Math.acos(r);t<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return a.x=s,a.y=r,a}function lj(a){var e,t,i,n,s=(a.x-this.x0)*(1/this.a),r=(a.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+r/this.k0,t=IT(e,this.es,this.en),Math.abs(t)<Bt){var g=Math.sin(t),y=Math.cos(t),x=Math.abs(y)>ra?Math.tan(t):0,C=this.ep2*Math.pow(y,2),I=Math.pow(C,2),A=Math.pow(x,2),E=Math.pow(A,2);e=1-this.es*Math.pow(g,2);var L=s*Math.sqrt(e)/this.k0,G=Math.pow(L,2);e=e*x,i=t-e*G/(1-this.es)*.5*(1-G/12*(5+3*A-9*C*A+C-4*I-G/30*(61+90*A-252*C*A+45*E+46*C-G/56*(1385+3633*A+4095*E+1574*E*A)))),n=da(this.long0+L*(1-G/6*(1+2*A+C-G/20*(5+28*A+24*E+8*C*A+6*C-G/42*(61+662*A+1320*E+720*E*A))))/y,this.over)}else i=Bt*yb(r),n=0;else{var l=Math.exp(s/this.k0),u=.5*(l-1/l),d=this.lat0+r/this.k0,h=Math.cos(d);e=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(u,2))),i=Math.asin(e),r<0&&(i=-i),u===0&&h===0?n=0:n=da(Math.atan2(u,h)+this.long0,this.over)}return a.x=n,a.y=i,a}var uj=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const ux={init:sj,forward:oj,inverse:lj,names:uj};function PG(a){var e=Math.exp(a);return e=(e-1/e)/2,e}function Xo(a,e){a=Math.abs(a),e=Math.abs(e);var t=Math.max(a,e),i=Math.min(a,e)/(t||1);return t*Math.sqrt(1+Math.pow(i,2))}function cj(a){var e=1+a,t=e-1;return t===0?a:a*Math.log(e)/t}function dj(a){var e=Math.abs(a);return e=cj(e*(1+e/(Xo(1,e)+1))),a<0?-e:e}function ST(a,e){for(var t=2*Math.cos(2*e),i=a.length-1,n=a[i],s=0,r;--i>=0;)r=-s+t*n+a[i],s=n,n=r;return e+r*Math.sin(2*e)}function hj(a,e){for(var t=2*Math.cos(e),i=a.length-1,n=a[i],s=0,r;--i>=0;)r=-s+t*n+a[i],s=n,n=r;return Math.sin(e)*r}function _j(a){var e=Math.exp(a);return e=(e+1/e)/2,e}function GG(a,e,t){for(var i=Math.sin(e),n=Math.cos(e),s=PG(t),r=_j(t),l=2*n*r,u=-2*i*s,d=a.length-1,h=a[d],g=0,y=0,x=0,C,I;--d>=0;)C=y,I=g,y=h,g=x,h=-C+l*y-u*g+a[d],x=-I+u*y+l*g;return l=i*r,u=n*s,[l*h-u*x,l*x+u*h]}function mj(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(ux.init.apply(this),this.forward=ux.forward,this.inverse=ux.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var a=this.es/(1+Math.sqrt(1-this.es)),e=a/(2-a),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var i=ST(this.cbg,this.lat0);this.Zb=-this.Qn*(i+hj(this.gtu,2*i))}function fj(a){var e=da(a.x-this.long0,this.over),t=a.y;t=ST(this.cbg,t);var i=Math.sin(t),n=Math.cos(t),s=Math.sin(e),r=Math.cos(e);t=Math.atan2(i,r*n),e=Math.atan2(s*n,Xo(i,n*r)),e=dj(Math.tan(e));var l=GG(this.gtu,2*t,2*e);t=t+l[0],e=e+l[1];var u,d;return Math.abs(e)<=2.623395162778?(u=this.a*(this.Qn*e)+this.x0,d=this.a*(this.Qn*t+this.Zb)+this.y0):(u=1/0,d=1/0),a.x=u,a.y=d,a}function gj(a){var e=(a.x-this.x0)*(1/this.a),t=(a.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var i,n;if(Math.abs(e)<=2.623395162778){var s=GG(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(PG(e));var r=Math.sin(t),l=Math.cos(t),u=Math.sin(e),d=Math.cos(e);t=Math.atan2(r*d,Xo(u,d*l)),e=Math.atan2(u,d*l),i=da(e+this.long0,this.over),n=ST(this.cgb,t)}else i=1/0,n=1/0;return a.x=i,a.y=n,a}var pj=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const cx={init:mj,forward:fj,inverse:gj,names:pj};function yj(a,e){if(a===void 0){if(a=Math.floor((da(e)+Math.PI)*30/Math.PI)+1,a<0)return 0;if(a>60)return 60}return a}var bj="etmerc";function vj(){var a=yj(this.zone,this.long0);if(a===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(a)-183)*Ir,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,cx.init.apply(this),this.forward=cx.forward,this.inverse=cx.inverse}var xj=["Universal Transverse Mercator System","utm"];const wj={init:vj,names:xj,dependsOn:bj};function AT(a,e){return Math.pow((1-a)/(1+a),e)}var Cj=20;function Ij(){var a=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+yn)/(Math.pow(Math.tan(.5*this.lat0+yn),this.C)*AT(this.e*a,this.ratexp))}function Sj(a){var e=a.x,t=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+yn),this.C)*AT(this.e*Math.sin(t),this.ratexp))-Bt,a.x=this.C*e,a}function Aj(a){for(var e=1e-14,t=a.x/this.C,i=a.y,n=Math.pow(Math.tan(.5*i+yn)/this.K,1/this.C),s=Cj;s>0&&(i=2*Math.atan(n*AT(this.e*Math.sin(a.y),-.5*this.e))-Bt,!(Math.abs(i-a.y)<e));--s)a.y=i;return s?(a.x=t,a.y=i,a):null}const TT={init:Ij,forward:Sj,inverse:Aj};function Tj(){TT.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Ej(a){var e,t,i,n;return a.x=da(a.x-this.long0,this.over),TT.forward.apply(this,[a]),e=Math.sin(a.y),t=Math.cos(a.y),i=Math.cos(a.x),n=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*i),a.x=n*t*Math.sin(a.x),a.y=n*(this.cosc0*e-this.sinc0*t*i),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a}function Mj(a){var e,t,i,n,s;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,s=Xo(a.x,a.y)){var r=2*Math.atan2(s,this.R2);e=Math.sin(r),t=Math.cos(r),n=Math.asin(t*this.sinc0+a.y*e*this.cosc0/s),i=Math.atan2(a.x*e,s*this.cosc0*t-a.y*this.sinc0*e)}else n=this.phic0,i=0;return a.x=i,a.y=n,TT.inverse.apply(this,[a]),a.x=da(a.x+this.long0,this.over),a}var Lj=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Rj={init:Tj,forward:Ej,inverse:Mj,names:Lj};function ET(a,e,t){return e*=t,Math.tan(.5*(Bt+a))*Math.pow((1-e)/(1+e),.5*t)}function kj(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ra&&(this.k0=.5*(1+yb(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ra&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ra&&Math.abs(Math.cos(this.lat_ts))>ra&&(this.k0=.5*this.cons*Gc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Au(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Gc(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(ET(this.lat0,this.sinlat0,this.e))-Bt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Pj(a){var e=a.x,t=a.y,i=Math.sin(t),n=Math.cos(t),s,r,l,u,d,h,g=da(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=ra&&Math.abs(t+this.lat0)<=ra?(a.x=NaN,a.y=NaN,a):this.sphere?(s=2*this.k0/(1+this.sinlat0*i+this.coslat0*n*Math.cos(g)),a.x=this.a*s*n*Math.sin(g)+this.x0,a.y=this.a*s*(this.coslat0*i-this.sinlat0*n*Math.cos(g))+this.y0,a):(r=2*Math.atan(ET(t,i,this.e))-Bt,u=Math.cos(r),l=Math.sin(r),Math.abs(this.coslat0)<=ra?(d=Au(this.e,t*this.con,this.con*i),h=2*this.a*this.k0*d/this.cons,a.x=this.x0+h*Math.sin(e-this.long0),a.y=this.y0-this.con*h*Math.cos(e-this.long0),a):(Math.abs(this.sinlat0)<ra?(s=2*this.a*this.k0/(1+u*Math.cos(g)),a.y=s*l):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*u*Math.cos(g))),a.y=s*(this.cosX0*l-this.sinX0*u*Math.cos(g))+this.y0),a.x=s*u*Math.sin(g)+this.x0,a))}function Gj(a){a.x-=this.x0,a.y-=this.y0;var e,t,i,n,s,r=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var l=2*Math.atan(r/(2*this.a*this.k0));return e=this.long0,t=this.lat0,r<=ra?(a.x=e,a.y=t,a):(t=Math.asin(Math.cos(l)*this.sinlat0+a.y*Math.sin(l)*this.coslat0/r),Math.abs(this.coslat0)<ra?this.lat0>0?e=da(this.long0+Math.atan2(a.x,-1*a.y),this.over):e=da(this.long0+Math.atan2(a.x,a.y),this.over):e=da(this.long0+Math.atan2(a.x*Math.sin(l),r*this.coslat0*Math.cos(l)-a.y*this.sinlat0*Math.sin(l)),this.over),a.x=e,a.y=t,a)}else if(Math.abs(this.coslat0)<=ra){if(r<=ra)return t=this.lat0,e=this.long0,a.x=e,a.y=t,a;a.x*=this.con,a.y*=this.con,i=r*this.cons/(2*this.a*this.k0),t=this.con*B1(this.e,i),e=this.con*da(this.con*this.long0+Math.atan2(a.x,-1*a.y),this.over)}else n=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,r<=ra?s=this.X0:(s=Math.asin(Math.cos(n)*this.sinX0+a.y*Math.sin(n)*this.cosX0/r),e=da(this.long0+Math.atan2(a.x*Math.sin(n),r*this.cosX0*Math.cos(n)-a.y*this.sinX0*Math.sin(n)),this.over)),t=-1*B1(this.e,Math.tan(.5*(Bt+s)));return a.x=e,a.y=t,a}var Wj=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const Oj={init:kj,forward:Pj,inverse:Gj,names:Wj,ssfn_:ET};function Fj(){var a=this.lat0;this.lambda0=this.long0;var e=Math.sin(a),t=this.a,i=this.rf,n=1/i,s=2*n-Math.pow(n,2),r=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(e/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),u=Math.log(Math.tan(Math.PI/4+a/2)),d=Math.log((1+r*e)/(1-r*e));this.K=l-this.alpha*u+this.alpha*r/2*d}function Nj(a){var e=Math.log(Math.tan(Math.PI/4-a.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),i=-this.alpha*(e+t)+this.K,n=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(a.x-this.lambda0),r=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(s))),l=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(s));return a.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,a.x=this.R*r+this.x0,a}function Bj(a){for(var e=a.x-this.x0,t=a.y-this.y0,i=e/this.R,n=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i)),r=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n))),l=this.lambda0+r/this.alpha,u=0,d=s,h=-1e3,g=0;Math.abs(d-h)>1e-7;){if(++g>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(d))/2)),h=d,d=2*Math.atan(Math.exp(u))-Math.PI/2}return a.x=l,a.y=d,a}var Dj=["somerc"];const Vj={init:Fj,forward:Nj,inverse:Bj,names:Dj};var Rg=1e-7;function Zj(a){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof a.projName=="object"?Object.keys(a.projName)[0]:a.projName;return"no_uoff"in a||"no_off"in a||e.indexOf(t)!==-1||e.indexOf(wG(t))!==-1}function zj(){var a,e,t,i,n,s,r,l,u,d,h=0,g,y=0,x=0,C=0,I=0,A=0,E=0;this.no_off=Zj(this),this.no_rot="no_rot"in this;var L=!1;"alpha"in this&&(L=!0);var G=!1;if("rectified_grid_angle"in this&&(G=!0),L&&(E=this.alpha),G&&(h=this.rectified_grid_angle),L||G)y=this.longc;else if(x=this.long1,I=this.lat1,C=this.long2,A=this.lat2,Math.abs(I-A)<=Rg||(a=Math.abs(I))<=Rg||Math.abs(a-Bt)<=Rg||Math.abs(Math.abs(this.lat0)-Bt)<=Rg||Math.abs(Math.abs(A)-Bt)<=Rg)throw new Error;var F=1-this.es;e=Math.sqrt(F),Math.abs(this.lat0)>ra?(l=Math.sin(this.lat0),t=Math.cos(this.lat0),a=1-this.es*l*l,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/F),this.A=this.B*this.k0*e/a,i=this.B*e/(t*Math.sqrt(a)),n=i*i-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=i,this.E*=Math.pow(Au(this.e,this.lat0,l),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=n=1),L||G?(L?(g=Math.asin(Math.sin(E)/i),G||(h=E)):(g=h,E=Math.asin(i*Math.sin(g))),this.lam0=y-Math.asin(.5*(n-1/n)*Math.tan(g))/this.B):(s=Math.pow(Au(this.e,I,Math.sin(I)),this.B),r=Math.pow(Au(this.e,A,Math.sin(A)),this.B),n=this.E/s,u=(r-s)/(r+s),d=this.E*this.E,d=(d-r*s)/(d+r*s),a=x-C,a<-Math.PI?C-=F1:a>Math.PI&&(C+=F1),this.lam0=da(.5*(x+C)-Math.atan(d*Math.tan(.5*this.B*(x-C))/u)/this.B,this.over),g=Math.atan(2*Math.sin(this.B*da(x-this.lam0,this.over))/(n-1/n)),h=E=Math.asin(i*Math.sin(g))),this.singam=Math.sin(g),this.cosgam=Math.cos(g),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(E))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*g,this.v_pole_n=this.ArB*Math.log(Math.tan(yn-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(yn+n))}function Uj(a){var e={},t,i,n,s,r,l,u,d;if(a.x=a.x-this.lam0,Math.abs(Math.abs(a.y)-Bt)>ra){if(r=this.E/Math.pow(Au(this.e,a.y,Math.sin(a.y)),this.B),l=1/r,t=.5*(r-l),i=.5*(r+l),s=Math.sin(this.B*a.x),n=(t*this.singam-s*this.cosgam)/i,Math.abs(Math.abs(n)-1)<ra)throw new Error;d=.5*this.ArB*Math.log((1-n)/(1+n)),l=Math.cos(this.B*a.x),Math.abs(l)<Rg?u=this.A*a.x:u=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,l)}else d=a.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*a.y;return this.no_rot?(e.x=u,e.y=d):(u-=this.u_0,e.x=d*this.cosrot+u*this.sinrot,e.y=u*this.cosrot-d*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Hj(a){var e,t,i,n,s,r,l,u={};if(a.x=(a.x-this.x0)*(1/this.a),a.y=(a.y-this.y0)*(1/this.a),this.no_rot?(t=a.y,e=a.x):(t=a.x*this.cosrot-a.y*this.sinrot,e=a.y*this.cosrot+a.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*t),n=.5*(i-1/i),s=.5*(i+1/i),r=Math.sin(this.BrA*e),l=(r*this.cosgam+n*this.singam)/s,Math.abs(Math.abs(l)-1)<ra)u.x=0,u.y=l<0?-Bt:Bt;else{if(u.y=this.E/Math.sqrt((1+l)/(1-l)),u.y=B1(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(n*this.cosgam-r*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u}var Xj=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const qj={init:zj,forward:Uj,inverse:Hj,names:Xj};function Yj(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ra)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),i=Gc(this.e,e,t),n=Au(this.e,this.lat1,e),s=Math.sin(this.lat2),r=Math.cos(this.lat2),l=Gc(this.e,s,r),u=Au(this.e,this.lat2,s),d=Math.abs(Math.abs(this.lat0)-Bt)<ra?0:Au(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ra?this.ns=Math.log(i/l)/Math.log(n/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(d,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Kj(a){var e=a.x,t=a.y;Math.abs(2*Math.abs(t)-Math.PI)<=ra&&(t=yb(t)*(Bt-2*ra));var i=Math.abs(Math.abs(t)-Bt),n,s;if(i>ra)n=Au(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(i=t*this.ns,i<=0)return null;s=0}var r=this.ns*da(e-this.long0,this.over);return a.x=this.k0*(s*Math.sin(r))+this.x0,a.y=this.k0*(this.rh-s*Math.cos(r))+this.y0,a}function jj(a){var e,t,i,n,s,r=(a.x-this.x0)/this.k0,l=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(r*r+l*l),t=1):(e=-Math.sqrt(r*r+l*l),t=-1);var u=0;if(e!==0&&(u=Math.atan2(t*r,t*l)),e!==0||this.ns>0){if(t=1/this.ns,i=Math.pow(e/(this.a*this.f0),t),n=B1(this.e,i),n===-9999)return null}else n=-Bt;return s=da(u/this.ns+this.long0,this.over),a.x=s,a.y=n,a}var $j=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Jj={init:Yj,forward:Kj,inverse:jj,names:$j};function Qj(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function e$(a){var e,t,i,n,s,r,l,u=a.x,d=a.y,h=da(u-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(d))/(1-this.e*Math.sin(d)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(d/2+this.s45),this.alfa)/e)-this.s45),i=-h*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(i)),s=Math.asin(Math.cos(t)*Math.sin(i)/Math.cos(n)),r=this.n*s,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),a.y=l*Math.cos(r)/1,a.x=l*Math.sin(r)/1,this.czech||(a.y*=-1,a.x*=-1),a}function t$(a){var e,t,i,n,s,r,l,u,d=a.x;a.x=a.y,a.y=d,this.czech||(a.y*=-1,a.x*=-1),r=Math.sqrt(a.x*a.x+a.y*a.y),s=Math.atan2(a.y,a.x),n=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),t=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(e)),a.x=this.long0-t/this.alfa,l=e,u=0;var h=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-a.y)<1e-10&&(u=1),l=a.y,h+=1;while(u===0&&h<15);return h>=15?null:a}var a$=["Krovak","krovak"];const i$={init:Qj,forward:e$,inverse:t$,names:a$};function xo(a,e,t,i,n){return a*n-e*Math.sin(2*n)+t*Math.sin(4*n)-i*Math.sin(6*n)}function bb(a){return 1-.25*a*(1+a/16*(3+1.25*a))}function vb(a){return .375*a*(1+.25*a*(1+.46875*a))}function xb(a){return .05859375*a*a*(1+.75*a)}function wb(a){return a*a*a*(35/3072)}function MT(a,e,t){var i=e*t;return a/Math.sqrt(1-i*i)}function I_(a){return Math.abs(a)<Bt?a:a-yb(a)*Math.PI}function pw(a,e,t,i,n){var s,r;s=a/e;for(var l=0;l<15;l++)if(r=(a-(e*s-t*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*i*Math.cos(4*s)-6*n*Math.cos(6*s)),s+=r,Math.abs(r)<=1e-10)return s;return NaN}function n$(){this.sphere||(this.e0=bb(this.es),this.e1=vb(this.es),this.e2=xb(this.es),this.e3=wb(this.es),this.ml0=this.a*xo(this.e0,this.e1,this.e2,this.e3,this.lat0))}function r$(a){var e,t,i=a.x,n=a.y;if(i=da(i-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(i)),t=this.a*(Math.atan2(Math.tan(n),Math.cos(i))-this.lat0);else{var s=Math.sin(n),r=Math.cos(n),l=MT(this.a,this.e,s),u=Math.tan(n)*Math.tan(n),d=i*Math.cos(n),h=d*d,g=this.es*r*r/(1-this.es),y=this.a*xo(this.e0,this.e1,this.e2,this.e3,n);e=l*d*(1-h*u*(1/6-(8-u+8*g)*h/120)),t=y-this.ml0+l*s/r*h*(.5+(5-u+6*g)*h/24)}return a.x=e+this.x0,a.y=t+this.y0,a}function s$(a){a.x-=this.x0,a.y-=this.y0;var e=a.x/this.a,t=a.y/this.a,i,n;if(this.sphere){var s=t+this.lat0;i=Math.asin(Math.sin(s)*Math.cos(e)),n=Math.atan2(Math.tan(e),Math.cos(s))}else{var r=this.ml0/this.a+t,l=pw(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-Bt)<=ra)return a.x=this.long0,a.y=Bt,t<0&&(a.y*=-1),a;var u=MT(this.a,this.e,Math.sin(l)),d=u*u*u/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(l),2),g=e*this.a/u,y=g*g;i=l-u*Math.tan(l)/d*g*g*(.5-(1+3*h)*g*g/24),n=g*(1-y*(h/3+(1+3*h)*h*y/15))/Math.cos(l)}return a.x=da(n+this.long0,this.over),a.y=I_(i),a}var o$=["Cassini","Cassini_Soldner","cass"];const l$={init:n$,forward:r$,inverse:s$,names:o$};function o_(a,e){var t;return a>1e-7?(t=a*e,(1-a*a)*(e/(1-t*t)-.5/a*Math.log((1-t)/(1+t)))):2*e}var JA=1,QA=2,e3=3,dx=4;function u$(){var a=Math.abs(this.lat0);if(Math.abs(a-Bt)<ra?this.mode=this.lat0<0?JA:QA:Math.abs(a)<ra?this.mode=e3:this.mode=dx,this.es>0){var e;switch(this.qp=o_(this.e,1),this.mmf=.5/(1-this.es),this.apa=y$(this.es),this.mode){case QA:this.dd=1;break;case JA:this.dd=1;break;case e3:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case dx:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=o_(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===dx&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function c$(a){var e,t,i,n,s,r,l,u,d,h,g=a.x,y=a.y;if(g=da(g-this.long0,this.over),this.sphere){if(s=Math.sin(y),h=Math.cos(y),i=Math.cos(g),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+h*i:1+this.sinph0*s+this.cosph0*h*i,t<=ra)return null;t=Math.sqrt(2/t),e=t*h*Math.sin(g),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*h*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(y+this.lat0)<ra)return null;t=yn-y*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(g),t*=i}}else{switch(l=0,u=0,d=0,i=Math.cos(g),n=Math.sin(g),s=Math.sin(y),r=o_(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=r/this.qp,u=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:d=1+this.sinb1*l+this.cosb1*u*i;break;case this.EQUIT:d=1+u*i;break;case this.N_POLE:d=Bt+y,r=this.qp-r;break;case this.S_POLE:d=y-Bt,r=this.qp+r;break}if(Math.abs(d)<ra)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),this.mode===this.OBLIQ?t=this.ymf*d*(this.cosb1*l-this.sinb1*u*i):t=(d=Math.sqrt(2/(1+u*i)))*l*this.ymf,e=this.xmf*d*u*n;break;case this.N_POLE:case this.S_POLE:r>=0?(e=(d=Math.sqrt(r))*n,t=i*(this.mode===this.S_POLE?d:-d)):e=t=0;break}}return a.x=this.a*e+this.x0,a.y=this.a*t+this.y0,a}function d$(a){a.x-=this.x0,a.y-=this.y0;var e=a.x/this.a,t=a.y/this.a,i,n,s,r,l,u,d;if(this.sphere){var h=0,g,y=0;if(g=Math.sqrt(e*e+t*t),n=g*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(g)<=ra?0:Math.asin(t*y/g),e*=y,t=h*g;break;case this.OBLIQ:n=Math.abs(g)<=ra?this.lat0:Math.asin(h*this.sinph0+t*y*this.cosph0/g),e*=y*this.cosph0,t=(h-Math.sin(n)*this.sinph0)*g;break;case this.N_POLE:t=-t,n=Bt-n;break;case this.S_POLE:n-=Bt;break}i=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(d=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,u=Math.sqrt(e*e+t*t),u<ra)return a.x=this.long0,a.y=this.lat0,a;r=2*Math.asin(.5*u/this.rq),s=Math.cos(r),e*=r=Math.sin(r),this.mode===this.OBLIQ?(d=s*this.sinb1+t*r*this.cosb1/u,l=this.qp*d,t=u*this.cosb1*s-t*this.sinb1*r):(d=t*r/u,l=this.qp*d,t=u*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),l=e*e+t*t,!l)return a.x=this.long0,a.y=this.lat0,a;d=1-l/this.qp,this.mode===this.S_POLE&&(d=-d)}i=Math.atan2(e,t),n=b$(Math.asin(d),this.apa)}return a.x=da(this.long0+i,this.over),a.y=n,a}var h$=.3333333333333333,_$=.17222222222222222,m$=.10257936507936508,f$=.06388888888888888,g$=.0664021164021164,p$=.016415012942191543;function y$(a){var e,t=[];return t[0]=a*h$,e=a*a,t[0]+=e*_$,t[1]=e*f$,e*=a,t[0]+=e*m$,t[1]+=e*g$,t[2]=e*p$,t}function b$(a,e){var t=a+a;return a+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var v$=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const x$={init:u$,forward:c$,inverse:d$,names:v$,S_POLE:JA,N_POLE:QA,EQUIT:e3,OBLIQ:dx};function m_(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)}function w$(){Math.abs(this.lat1+this.lat2)<ra||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Gc(this.e3,this.sin_po,this.cos_po),this.qs1=o_(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Gc(this.e3,this.sin_po,this.cos_po),this.qs2=o_(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=o_(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ra?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function C$(a){var e=a.x,t=a.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var i=o_(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*da(e-this.long0,this.over),r=n*Math.sin(s)+this.x0,l=this.rh-n*Math.cos(s)+this.y0;return a.x=r,a.y=l,a}function I$(a){var e,t,i,n,s,r;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(e=Math.sqrt(a.x*a.x+a.y*a.y),i=1):(e=-Math.sqrt(a.x*a.x+a.y*a.y),i=-1),n=0,e!==0&&(n=Math.atan2(i*a.x,i*a.y)),i=e*this.ns0/this.a,this.sphere?r=Math.asin((this.c-i*i)/(2*this.ns0)):(t=(this.c-i*i)/this.ns0,r=this.phi1z(this.e3,t)),s=da(n/this.ns0+this.long0,this.over),a.x=s,a.y=r,a}function S$(a,e){var t,i,n,s,r,l=m_(.5*e);if(a<ra)return l;for(var u=a*a,d=1;d<=25;d++)if(t=Math.sin(l),i=Math.cos(l),n=a*t,s=1-n*n,r=.5*s*s/i*(e/(1-u)-t/s+.5/a*Math.log((1-n)/(1+n))),l=l+r,Math.abs(r)<=1e-7)return l;return null}var A$=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const T$={init:w$,forward:C$,inverse:I$,names:A$,phi1z:S$};function E$(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function M$(a){var e,t,i,n,s,r,l,u,d=a.x,h=a.y;return i=da(d-this.long0,this.over),e=Math.sin(h),t=Math.cos(h),n=Math.cos(i),r=this.sin_p14*e+this.cos_p14*t*n,s=1,r>0||Math.abs(r)<=ra?(l=this.x0+this.a*s*t*Math.sin(i)/r,u=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*n)/r):(l=this.x0+this.infinity_dist*t*Math.sin(i),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*n)),a.x=l,a.y=u,a}function L$(a){var e,t,i,n,s,r;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(e=Math.sqrt(a.x*a.x+a.y*a.y))?(n=Math.atan2(e,this.rc),t=Math.sin(n),i=Math.cos(n),r=m_(i*this.sin_p14+a.y*t*this.cos_p14/e),s=Math.atan2(a.x*t,e*this.cos_p14*i-a.y*this.sin_p14*t),s=da(this.long0+s,this.over)):(r=this.phic0,s=0),a.x=s,a.y=r,a}var R$=["gnom"];const k$={init:E$,forward:M$,inverse:L$,names:R$};function P$(a,e){var t=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*Bt:Bt;for(var i=Math.asin(.5*e),n,s,r,l,u=0;u<30;u++)if(s=Math.sin(i),r=Math.cos(i),l=a*s,n=Math.pow(1-l*l,2)/(2*r)*(e/(1-a*a)-s/(1-l*l)+.5/a*Math.log((1-l)/(1+l))),i+=n,Math.abs(n)<=1e-10)return i;return NaN}function G$(){this.sphere||(this.k0=Gc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function W$(a){var e=a.x,t=a.y,i,n,s=da(e-this.long0,this.over);if(this.sphere)i=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var r=o_(this.e,Math.sin(t));i=this.x0+this.a*this.k0*s,n=this.y0+this.a*r*.5/this.k0}return a.x=i,a.y=n,a}function O$(a){a.x-=this.x0,a.y-=this.y0;var e,t;return this.sphere?(e=da(this.long0+a.x/this.a/Math.cos(this.lat_ts),this.over),t=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(t=P$(this.e,2*a.y*this.k0/this.a),e=da(this.long0+a.x/(this.a*this.k0),this.over)),a.x=e,a.y=t,a}var F$=["cea"];const N$={init:G$,forward:W$,inverse:O$,names:F$};function B$(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function D$(a){var e=a.x,t=a.y,i=da(e-this.long0,this.over),n=I_(t-this.lat0);return a.x=this.x0+this.a*i*this.rc,a.y=this.y0+this.a*n,a}function V$(a){var e=a.x,t=a.y;return a.x=da(this.long0+(e-this.x0)/(this.a*this.rc),this.over),a.y=I_(this.lat0+(t-this.y0)/this.a),a}var Z$=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const z$={init:B$,forward:D$,inverse:V$,names:Z$};var S9=20;function U$(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=bb(this.es),this.e1=vb(this.es),this.e2=xb(this.es),this.e3=wb(this.es),this.ml0=this.a*xo(this.e0,this.e1,this.e2,this.e3,this.lat0)}function H$(a){var e=a.x,t=a.y,i,n,s,r=da(e-this.long0,this.over);if(s=r*Math.sin(t),this.sphere)Math.abs(t)<=ra?(i=this.a*r,n=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(t),n=this.a*(I_(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=ra)i=this.a*r,n=-1*this.ml0;else{var l=MT(this.a,this.e,Math.sin(t))/Math.tan(t);i=l*Math.sin(s),n=this.a*xo(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+l*(1-Math.cos(s))}return a.x=i+this.x0,a.y=n+this.y0,a}function X$(a){var e,t,i,n,s,r,l,u,d;if(i=a.x-this.x0,n=a.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=ra)e=da(i/this.a+this.long0,this.over),t=0;else{r=this.lat0+n/this.a,l=i*i/this.a/this.a+r*r,u=r;var h;for(s=S9;s;--s)if(h=Math.tan(u),d=-1*(r*(u*h+1)-u-.5*(u*u+l)*h)/((u-r)/h-1),u+=d,Math.abs(d)<=ra){t=u;break}e=da(this.long0+Math.asin(i*Math.tan(u)/this.a)/Math.sin(t),this.over)}else if(Math.abs(n+this.ml0)<=ra)t=0,e=da(this.long0+i/this.a,this.over);else{r=(this.ml0+n)/this.a,l=i*i/this.a/this.a+r*r,u=r;var g,y,x,C,I;for(s=S9;s;--s)if(I=this.e*Math.sin(u),g=Math.sqrt(1-I*I)*Math.tan(u),y=this.a*xo(this.e0,this.e1,this.e2,this.e3,u),x=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),C=y/this.a,d=(r*(g*C+1)-C-.5*g*(C*C+l))/(this.es*Math.sin(2*u)*(C*C+l-2*r*C)/(4*g)+(r-C)*(g*x-2/Math.sin(2*u))-x),u-=d,Math.abs(d)<=ra){t=u;break}g=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=da(this.long0+Math.asin(i*g/this.a)/Math.sin(t),this.over)}return a.x=e,a.y=t,a}var q$=["Polyconic","American_Polyconic","poly"];const Y$={init:U$,forward:H$,inverse:X$,names:q$};function K$(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function j$(a){var e,t=a.x,i=a.y,n=i-this.lat0,s=t-this.long0,r=n/K0*1e-5,l=s,u=1,d=0;for(e=1;e<=10;e++)u=u*r,d=d+this.A[e]*u;var h=d,g=l,y=1,x=0,C,I,A=0,E=0;for(e=1;e<=6;e++)C=y*h-x*g,I=x*h+y*g,y=C,x=I,A=A+this.B_re[e]*y-this.B_im[e]*x,E=E+this.B_im[e]*y+this.B_re[e]*x;return a.x=E*this.a+this.x0,a.y=A*this.a+this.y0,a}function $$(a){var e,t=a.x,i=a.y,n=t-this.x0,s=i-this.y0,r=s/this.a,l=n/this.a,u=1,d=0,h,g,y=0,x=0;for(e=1;e<=6;e++)h=u*r-d*l,g=d*r+u*l,u=h,d=g,y=y+this.C_re[e]*u-this.C_im[e]*d,x=x+this.C_im[e]*u+this.C_re[e]*d;for(var C=0;C<this.iterations;C++){var I=y,A=x,E,L,G=r,F=l;for(e=2;e<=6;e++)E=I*y-A*x,L=A*y+I*x,I=E,A=L,G=G+(e-1)*(this.B_re[e]*I-this.B_im[e]*A),F=F+(e-1)*(this.B_im[e]*I+this.B_re[e]*A);I=1,A=0;var B=this.B_re[1],Z=this.B_im[1];for(e=2;e<=6;e++)E=I*y-A*x,L=A*y+I*x,I=E,A=L,B=B+e*(this.B_re[e]*I-this.B_im[e]*A),Z=Z+e*(this.B_im[e]*I+this.B_re[e]*A);var Y=B*B+Z*Z;y=(G*B+F*Z)/Y,x=(F*B-G*Z)/Y}var $=y,te=x,ce=1,me=0;for(e=1;e<=9;e++)ce=ce*$,me=me+this.D[e]*ce;var X=this.lat0+me*K0*1e5,de=this.long0+te;return a.x=de,a.y=X,a}var J$=["New_Zealand_Map_Grid","nzmg"];const Q$={init:K$,forward:j$,inverse:$$,names:J$};function eJ(){}function tJ(a){var e=a.x,t=a.y,i=da(e-this.long0,this.over),n=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return a.x=n,a.y=s,a}function aJ(a){a.x-=this.x0,a.y-=this.y0;var e=da(this.long0+a.x/this.a,this.over),t=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=e,a.y=t,a}var iJ=["Miller_Cylindrical","mill"];const nJ={init:eJ,forward:tJ,inverse:aJ,names:iJ};var rJ=20;function sJ(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=CT(this.es)}function oJ(a){var e,t,i=a.x,n=a.y;if(i=da(i-this.long0,this.over),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var s=this.n*Math.sin(n),r=rJ;r;--r){var l=(this.m*n+Math.sin(n)-s)/(this.m+Math.cos(n));if(n-=l,Math.abs(l)<ra)break}e=this.a*this.C_x*i*(this.m+Math.cos(n)),t=this.a*this.C_y*n}else{var u=Math.sin(n),d=Math.cos(n);t=this.a*Dp(n,u,d,this.en),e=this.a*i*d/Math.sqrt(1-this.es*u*u)}return a.x=e,a.y=t,a}function lJ(a){var e,t,i,n;return a.x-=this.x0,i=a.x/this.a,a.y-=this.y0,e=a.y/this.a,this.sphere?(e/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(e))),this.m?e=m_((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=m_(Math.sin(e)/this.n)),i=da(i+this.long0,this.over),e=I_(e)):(e=IT(a.y/this.a,this.es,this.en),n=Math.abs(e),n<Bt?(n=Math.sin(e),t=this.long0+a.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)),i=da(t,this.over)):n-ra<Bt&&(i=this.long0)),a.x=i,a.y=e,a}var uJ=["Sinusoidal","sinu"];const cJ={init:sJ,forward:oJ,inverse:lJ,names:uJ};function dJ(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function hJ(a){for(var e=a.x,t=a.y,i=da(e-this.long0,this.over),n=t,s=Math.PI*Math.sin(t);;){var r=-(n+Math.sin(n)-s)/(1+Math.cos(n));if(n+=r,Math.abs(r)<ra)break}n/=2,Math.PI/2-Math.abs(t)<ra&&(i=0);var l=.900316316158*this.a*i*Math.cos(n)+this.x0,u=1.4142135623731*this.a*Math.sin(n)+this.y0;return a.x=l,a.y=u,a}function _J(a){var e,t;a.x-=this.x0,a.y-=this.y0,t=a.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var i=da(this.long0+a.x/(.900316316158*this.a*Math.cos(e)),this.over);i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var n=Math.asin(t);return a.x=i,a.y=n,a}var mJ=["Mollweide","moll"];const fJ={init:dJ,forward:hJ,inverse:_J,names:mJ};function gJ(){Math.abs(this.lat1+this.lat2)<ra||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=bb(this.es),this.e1=vb(this.es),this.e2=xb(this.es),this.e3=wb(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Gc(this.e,this.sin_phi,this.cos_phi),this.ml1=xo(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ra?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Gc(this.e,this.sin_phi,this.cos_phi),this.ml2=xo(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=xo(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function pJ(a){var e=a.x,t=a.y,i;if(this.sphere)i=this.a*(this.g-t);else{var n=xo(this.e0,this.e1,this.e2,this.e3,t);i=this.a*(this.g-n)}var s=this.ns*da(e-this.long0,this.over),r=this.x0+i*Math.sin(s),l=this.y0+this.rh-i*Math.cos(s);return a.x=r,a.y=l,a}function yJ(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var e,t,i,n;this.ns>=0?(t=Math.sqrt(a.x*a.x+a.y*a.y),e=1):(t=-Math.sqrt(a.x*a.x+a.y*a.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*a.x,e*a.y)),this.sphere)return n=da(this.long0+s/this.ns,this.over),i=I_(this.g-t/this.a),a.x=n,a.y=i,a;var r=this.g-t/this.a;return i=pw(r,this.e0,this.e1,this.e2,this.e3),n=da(this.long0+s/this.ns,this.over),a.x=n,a.y=i,a}var bJ=["Equidistant_Conic","eqdc"];const vJ={init:gJ,forward:pJ,inverse:yJ,names:bJ};function xJ(){this.R=this.a}function wJ(a){var e=a.x,t=a.y,i=da(e-this.long0,this.over),n,s;Math.abs(t)<=ra&&(n=this.x0+this.R*i,s=this.y0);var r=m_(2*Math.abs(t/Math.PI));(Math.abs(i)<=ra||Math.abs(Math.abs(t)-Bt)<=ra)&&(n=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*r):s=this.y0+Math.PI*this.R*-Math.tan(.5*r));var l=.5*Math.abs(Math.PI/i-i/Math.PI),u=l*l,d=Math.sin(r),h=Math.cos(r),g=h/(d+h-1),y=g*g,x=g*(2/d-1),C=x*x,I=Math.PI*this.R*(l*(g-C)+Math.sqrt(u*(g-C)*(g-C)-(C+u)*(y-C)))/(C+u);i<0&&(I=-I),n=this.x0+I;var A=u+g;return I=Math.PI*this.R*(x*A-l*Math.sqrt((C+u)*(u+1)-A*A))/(C+u),t>=0?s=this.y0+I:s=this.y0-I,a.x=n,a.y=s,a}function CJ(a){var e,t,i,n,s,r,l,u,d,h,g,y,x;return a.x-=this.x0,a.y-=this.y0,g=Math.PI*this.R,i=a.x/g,n=a.y/g,s=i*i+n*n,r=-Math.abs(n)*(1+s),l=r-2*n*n+i*i,u=-2*r+1+2*n*n+s*s,x=n*n/u+(2*l*l*l/u/u/u-9*r*l/u/u)/27,d=(r-l*l/3/u)/u,h=2*Math.sqrt(-d/3),g=3*x/d/h,Math.abs(g)>1&&(g>=0?g=1:g=-1),y=Math.acos(g)/3,a.y>=0?t=(-h*Math.cos(y+Math.PI/3)-l/3/u)*Math.PI:t=-(-h*Math.cos(y+Math.PI/3)-l/3/u)*Math.PI,Math.abs(i)<ra?e=this.long0:e=da(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-n*n)+s*s))/2/i,this.over),a.x=e,a.y=t,a}var IJ=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const SJ={init:xJ,forward:wJ,inverse:CJ,names:IJ};function AJ(a,e,t,i,n,s){const r=i-e,l=Math.atan((1-s)*Math.tan(a)),u=Math.atan((1-s)*Math.tan(t)),d=Math.sin(l),h=Math.cos(l),g=Math.sin(u),y=Math.cos(u);let x=r,C,I=100,A,E,L,G,F,B,Z,Y,$,te,ce,me,X,de;do{if(A=Math.sin(x),E=Math.cos(x),L=Math.sqrt(y*A*(y*A)+(h*g-d*y*E)*(h*g-d*y*E)),L===0)return{azi1:0,s12:0};G=d*g+h*y*E,F=Math.atan2(L,G),B=h*y*A/L,Z=1-B*B,Y=Z!==0?G-2*d*g/Z:0,$=s/16*Z*(4+s*(4-3*Z)),C=x,x=r+(1-$)*s*B*(F+$*L*(Y+$*G*(-1+2*Y*Y)))}while(Math.abs(x-C)>1e-12&&--I>0);return I===0?{azi1:NaN,s12:NaN}:(te=Z*(n*n-n*(1-s)*(n*(1-s)))/(n*(1-s)*(n*(1-s))),ce=1+te/16384*(4096+te*(-768+te*(320-175*te))),me=te/1024*(256+te*(-128+te*(74-47*te))),X=me*L*(Y+me/4*(G*(-1+2*Y*Y)-me/6*Y*(-3+4*L*L)*(-3+4*Y*Y))),de=n*(1-s)*ce*(F-X),{azi1:Math.atan2(y*A,h*g-d*y*E),s12:de})}function TJ(a,e,t,i,n,s){const r=Math.atan((1-s)*Math.tan(a)),l=Math.sin(r),u=Math.cos(r),d=Math.sin(t),h=Math.cos(t),g=Math.atan2(l,u*h),y=u*d,x=1-y*y,C=x*(n*n-n*(1-s)*(n*(1-s)))/(n*(1-s)*(n*(1-s))),I=1+C/16384*(4096+C*(-768+C*(320-175*C))),A=C/1024*(256+C*(-128+C*(74-47*C)));let E=i/(n*(1-s)*I),L,G=100,F,B,Z,Y;do F=Math.cos(2*g+E),B=Math.sin(E),Z=Math.cos(E),Y=A*B*(F+A/4*(Z*(-1+2*F*F)-A/6*F*(-3+4*B*B)*(-3+4*F*F))),L=E,E=i/(n*(1-s)*I)+Y;while(Math.abs(E-L)>1e-12&&--G>0);if(G===0)return{lat2:NaN,lon2:NaN};const $=l*B-u*Z*h,te=Math.atan2(l*Z+u*B*h,(1-s)*Math.sqrt(y*y+$*$)),ce=Math.atan2(B*d,u*Z-l*B*h),me=s/16*x*(4+s*(4-3*x)),X=ce-(1-me)*s*y*(E+me*B*(F+me*Z*(-1+2*F*F))),de=e+X;return{lat2:te,lon2:de}}function EJ(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function MJ(a){var e=a.x,t=a.y,i=Math.sin(a.y),n=Math.cos(a.y),s=da(e-this.long0,this.over),r,l,u,d,h,g,y,x,C,I,A;return this.sphere?Math.abs(this.sin_p12-1)<=ra?(a.x=this.x0+this.a*(Bt-t)*Math.sin(s),a.y=this.y0-this.a*(Bt-t)*Math.cos(s),a):Math.abs(this.sin_p12+1)<=ra?(a.x=this.x0+this.a*(Bt+t)*Math.sin(s),a.y=this.y0+this.a*(Bt+t)*Math.cos(s),a):(C=this.sin_p12*i+this.cos_p12*n*Math.cos(s),y=Math.acos(C),x=y?y/Math.sin(y):1,a.x=this.x0+this.a*x*n*Math.sin(s),a.y=this.y0+this.a*x*(this.cos_p12*i-this.sin_p12*n*Math.cos(s)),a):(r=bb(this.es),l=vb(this.es),u=xb(this.es),d=wb(this.es),Math.abs(this.sin_p12-1)<=ra?(h=this.a*xo(r,l,u,d,Bt),g=this.a*xo(r,l,u,d,t),a.x=this.x0+(h-g)*Math.sin(s),a.y=this.y0-(h-g)*Math.cos(s),a):Math.abs(this.sin_p12+1)<=ra?(h=this.a*xo(r,l,u,d,Bt),g=this.a*xo(r,l,u,d,t),a.x=this.x0+(h+g)*Math.sin(s),a.y=this.y0+(h+g)*Math.cos(s),a):Math.abs(e)<ra&&Math.abs(t-this.lat0)<ra?(a.x=a.y=0,a):(I=AJ(this.lat0,this.long0,t,e,this.a,this.f),A=I.azi1,a.x=I.s12*Math.sin(A),a.y=I.s12*Math.cos(A),a))}function LJ(a){a.x-=this.x0,a.y-=this.y0;var e,t,i,n,s,r,l,u,d,h,g,y,x,C,I,A;return this.sphere?(e=Math.sqrt(a.x*a.x+a.y*a.y),e>2*Bt*this.a?void 0:(t=e/this.a,i=Math.sin(t),n=Math.cos(t),s=this.long0,Math.abs(e)<=ra?r=this.lat0:(r=m_(n*this.sin_p12+a.y*i*this.cos_p12/e),l=Math.abs(this.lat0)-Bt,Math.abs(l)<=ra?this.lat0>=0?s=da(this.long0+Math.atan2(a.x,-a.y),this.over):s=da(this.long0-Math.atan2(-a.x,a.y),this.over):s=da(this.long0+Math.atan2(a.x*i,e*this.cos_p12*n-a.y*this.sin_p12*i),this.over)),a.x=s,a.y=r,a)):(u=bb(this.es),d=vb(this.es),h=xb(this.es),g=wb(this.es),Math.abs(this.sin_p12-1)<=ra?(y=this.a*xo(u,d,h,g,Bt),e=Math.sqrt(a.x*a.x+a.y*a.y),x=y-e,r=pw(x/this.a,u,d,h,g),s=da(this.long0+Math.atan2(a.x,-1*a.y),this.over),a.x=s,a.y=r,a):Math.abs(this.sin_p12+1)<=ra?(y=this.a*xo(u,d,h,g,Bt),e=Math.sqrt(a.x*a.x+a.y*a.y),x=e-y,r=pw(x/this.a,u,d,h,g),s=da(this.long0+Math.atan2(a.x,a.y),this.over),a.x=s,a.y=r,a):(C=Math.atan2(a.x,a.y),I=Math.sqrt(a.x*a.x+a.y*a.y),A=TJ(this.lat0,this.long0,C,I,this.a,this.f),a.x=A.lon2,a.y=A.lat2,a))}var RJ=["Azimuthal_Equidistant","aeqd"];const kJ={init:EJ,forward:MJ,inverse:LJ,names:RJ};function PJ(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function GJ(a){var e,t,i,n,s,r,l,u,d=a.x,h=a.y;return i=da(d-this.long0,this.over),e=Math.sin(h),t=Math.cos(h),n=Math.cos(i),r=this.sin_p14*e+this.cos_p14*t*n,s=1,(r>0||Math.abs(r)<=ra)&&(l=this.a*s*t*Math.sin(i),u=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*n)),a.x=l,a.y=u,a}function WJ(a){var e,t,i,n,s,r,l;return a.x-=this.x0,a.y-=this.y0,e=Math.sqrt(a.x*a.x+a.y*a.y),t=m_(e/this.a),i=Math.sin(t),n=Math.cos(t),r=this.long0,Math.abs(e)<=ra?(l=this.lat0,a.x=r,a.y=l,a):(l=m_(n*this.sin_p14+a.y*i*this.cos_p14/e),s=Math.abs(this.lat0)-Bt,Math.abs(s)<=ra?(this.lat0>=0?r=da(this.long0+Math.atan2(a.x,-a.y),this.over):r=da(this.long0-Math.atan2(-a.x,a.y),this.over),a.x=r,a.y=l,a):(r=da(this.long0+Math.atan2(a.x*i,e*this.cos_p14*n-a.y*this.sin_p14*i),this.over),a.x=r,a.y=l,a))}var OJ=["ortho"];const FJ={init:PJ,forward:GJ,inverse:WJ,names:OJ};var dr={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},bn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function NJ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Bt-yn/2?this.face=dr.TOP:this.lat0<=-(Bt-yn/2)?this.face=dr.BOTTOM:Math.abs(this.long0)<=yn?this.face=dr.FRONT:Math.abs(this.long0)<=Bt+yn?this.face=this.long0>0?dr.RIGHT:dr.LEFT:this.face=dr.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function BJ(a){var e={x:0,y:0},t,i,n,s,r,l,u={value:0};if(a.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(a.y)):t=a.y,i=a.x,this.face===dr.TOP)s=Bt-t,i>=yn&&i<=Bt+yn?(u.value=bn.AREA_0,n=i-Bt):i>Bt+yn||i<=-(Bt+yn)?(u.value=bn.AREA_1,n=i>0?i-Wr:i+Wr):i>-(Bt+yn)&&i<=-yn?(u.value=bn.AREA_2,n=i+Bt):(u.value=bn.AREA_3,n=i);else if(this.face===dr.BOTTOM)s=Bt+t,i>=yn&&i<=Bt+yn?(u.value=bn.AREA_0,n=-i+Bt):i<yn&&i>=-yn?(u.value=bn.AREA_1,n=-i):i<-yn&&i>=-(Bt+yn)?(u.value=bn.AREA_2,n=-i-Bt):(u.value=bn.AREA_3,n=i>0?-i+Wr:-i-Wr);else{var d,h,g,y,x,C,I;this.face===dr.RIGHT?i=rp(i,+Bt):this.face===dr.BACK?i=rp(i,+Wr):this.face===dr.LEFT&&(i=rp(i,-Bt)),y=Math.sin(t),x=Math.cos(t),C=Math.sin(i),I=Math.cos(i),d=x*I,h=x*C,g=y,this.face===dr.FRONT?(s=Math.acos(d),n=d2(s,g,h,u)):this.face===dr.RIGHT?(s=Math.acos(h),n=d2(s,g,-d,u)):this.face===dr.BACK?(s=Math.acos(-d),n=d2(s,g,-h,u)):this.face===dr.LEFT?(s=Math.acos(-h),n=d2(s,g,d,u)):(s=n=0,u.value=bn.AREA_0)}return l=Math.atan(12/Wr*(n+Math.acos(Math.sin(n)*Math.cos(yn))-Bt)),r=Math.sqrt((1-Math.cos(s))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===bn.AREA_1?l+=Bt:u.value===bn.AREA_2?l+=Wr:u.value===bn.AREA_3&&(l+=1.5*Wr),e.x=r*Math.cos(l),e.y=r*Math.sin(l),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,a.x=e.x,a.y=e.y,a}function DJ(a){var e={lam:0,phi:0},t,i,n,s,r,l,u,d,h,g={value:0};if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,i=Math.atan(Math.sqrt(a.x*a.x+a.y*a.y)),t=Math.atan2(a.y,a.x),a.x>=0&&a.x>=Math.abs(a.y)?g.value=bn.AREA_0:a.y>=0&&a.y>=Math.abs(a.x)?(g.value=bn.AREA_1,t-=Bt):a.x<0&&-a.x>=Math.abs(a.y)?(g.value=bn.AREA_2,t=t<0?t+Wr:t-Wr):(g.value=bn.AREA_3,t+=Bt),h=Wr/12*Math.tan(t),r=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),l=Math.atan(r),n=Math.cos(t),s=Math.tan(i),u=1-n*n*s*s*(1-Math.cos(Math.atan(1/Math.cos(l)))),u<-1?u=-1:u>1&&(u=1),this.face===dr.TOP)d=Math.acos(u),e.phi=Bt-d,g.value===bn.AREA_0?e.lam=l+Bt:g.value===bn.AREA_1?e.lam=l<0?l+Wr:l-Wr:g.value===bn.AREA_2?e.lam=l-Bt:e.lam=l;else if(this.face===dr.BOTTOM)d=Math.acos(u),e.phi=d-Bt,g.value===bn.AREA_0?e.lam=-l+Bt:g.value===bn.AREA_1?e.lam=-l:g.value===bn.AREA_2?e.lam=-l-Bt:e.lam=l<0?-l-Wr:-l+Wr;else{var y,x,C;y=u,h=y*y,h>=1?C=0:C=Math.sqrt(1-h)*Math.sin(l),h+=C*C,h>=1?x=0:x=Math.sqrt(1-h),g.value===bn.AREA_1?(h=x,x=-C,C=h):g.value===bn.AREA_2?(x=-x,C=-C):g.value===bn.AREA_3&&(h=x,x=C,C=-h),this.face===dr.RIGHT?(h=y,y=-x,x=h):this.face===dr.BACK?(y=-y,x=-x):this.face===dr.LEFT&&(h=y,y=x,x=-h),e.phi=Math.acos(-C)-Bt,e.lam=Math.atan2(x,y),this.face===dr.RIGHT?e.lam=rp(e.lam,-Bt):this.face===dr.BACK?e.lam=rp(e.lam,-Wr):this.face===dr.LEFT&&(e.lam=rp(e.lam,+Bt))}if(this.es!==0){var I,A,E;I=e.phi<0?1:0,A=Math.tan(e.phi),E=this.b/Math.sqrt(A*A+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-E*E)/(this.one_minus_f*E)),I&&(e.phi=-e.phi)}return e.lam+=this.long0,a.x=e.lam,a.y=e.phi,a}function d2(a,e,t,i){var n;return a<ra?(i.value=bn.AREA_0,n=0):(n=Math.atan2(e,t),Math.abs(n)<=yn?i.value=bn.AREA_0:n>yn&&n<=Bt+yn?(i.value=bn.AREA_1,n-=Bt):n>Bt+yn||n<=-(Bt+yn)?(i.value=bn.AREA_2,n=n>=0?n-Wr:n+Wr):(i.value=bn.AREA_3,n+=Bt)),n}function rp(a,e){var t=a+e;return t<-Wr?t+=F1:t>+Wr&&(t-=F1),t}var VJ=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const ZJ={init:NJ,forward:BJ,inverse:DJ,names:VJ};var t3=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],A0=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],WG=.8487,OG=1.3523,FG=jo/5,zJ=1/FG,Zg=18,yw=function(a,e){return a[0]+e*(a[1]+e*(a[2]+e*a[3]))},UJ=function(a,e){return a[1]+e*(2*a[2]+e*3*a[3])};function HJ(a,e,t,i){for(var n=e;i;--i){var s=a(n);if(n-=s,Math.abs(s)<t)break}return n}function XJ(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function qJ(a){var e=da(a.x-this.long0,this.over),t=Math.abs(a.y),i=Math.floor(t*FG);i<0?i=0:i>=Zg&&(i=Zg-1),t=jo*(t-zJ*i);var n={x:yw(t3[i],t)*e,y:yw(A0[i],t)};return a.y<0&&(n.y=-n.y),n.x=n.x*this.a*WG+this.x0,n.y=n.y*this.a*OG+this.y0,n}function YJ(a){var e={x:(a.x-this.x0)/(this.a*WG),y:Math.abs(a.y-this.y0)/(this.a*OG)};if(e.y>=1)e.x/=t3[Zg][0],e.y=a.y<0?-Bt:Bt;else{var t=Math.floor(e.y*Zg);for(t<0?t=0:t>=Zg&&(t=Zg-1);;)if(A0[t][0]>e.y)--t;else if(A0[t+1][0]<=e.y)++t;else break;var i=A0[t],n=5*(e.y-i[0])/(A0[t+1][0]-i[0]);n=HJ(function(s){return(yw(i,s)-e.y)/UJ(i,s)},n,ra,100),e.x/=yw(t3[t],n),e.y=(5*t+n)*Ir,a.y<0&&(e.y=-e.y)}return e.x=da(e.x+this.long0,this.over),e}var KJ=["Robinson","robin"];const jJ={init:XJ,forward:qJ,inverse:YJ,names:KJ};function $J(){this.name="geocent"}function JJ(a){var e=IG(a,this.es,this.a);return e}function QJ(a){var e=SG(a,this.es,this.a,this.b);return e}var eQ=["Geocentric","geocentric","geocent","Geocent"];const tQ={init:$J,forward:JJ,inverse:QJ,names:eQ};var qs={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},l0={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function aQ(){if(Object.keys(l0).forEach((function(t){if(typeof this[t]>"u")this[t]=l0[t].def;else{if(l0[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);l0[t].num&&(this[t]=parseFloat(this[t]))}l0[t].degrees&&(this[t]=this[t]*Ir)}).bind(this)),Math.abs(Math.abs(this.lat0)-Bt)<ra?this.mode=this.lat0<0?qs.S_POLE:qs.N_POLE:Math.abs(this.lat0)<ra?this.mode=qs.EQUIT:(this.mode=qs.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var a=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(a),this.sw=Math.sin(a)}function iQ(a){a.x-=this.long0;var e=Math.sin(a.y),t=Math.cos(a.y),i=Math.cos(a.x),n,s;switch(this.mode){case qs.OBLIQ:s=this.sinph0*e+this.cosph0*t*i;break;case qs.EQUIT:s=t*i;break;case qs.S_POLE:s=-e;break;case qs.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),n=s*t*Math.sin(a.x),this.mode){case qs.OBLIQ:s*=this.cosph0*e-this.sinph0*t*i;break;case qs.EQUIT:s*=e;break;case qs.N_POLE:s*=-(t*i);break;case qs.S_POLE:s*=t*i;break}var r,l;return r=s*this.cg+n*this.sg,l=1/(r*this.sw*this.h1+this.cw),n=(n*this.cg-s*this.sg)*this.cw*l,s=r*l,a.x=n*this.a,a.y=s*this.a,a}function nQ(a){a.x/=this.a,a.y/=this.a;var e={x:a.x,y:a.y},t,i,n;n=1/(this.pn1-a.y*this.sw),t=this.pn1*a.x*n,i=this.pn1*a.y*this.cw*n,a.x=t*this.cg+i*this.sg,a.y=i*this.cg-t*this.sg;var s=Xo(a.x,a.y);if(Math.abs(s)<ra)e.x=0,e.y=a.y;else{var r,l;switch(l=1-s*s*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/s+s/this.pn1),r=Math.sqrt(1-l*l),this.mode){case qs.OBLIQ:e.y=Math.asin(r*this.sinph0+a.y*l*this.cosph0/s),a.y=(r-this.sinph0*Math.sin(e.y))*s,a.x*=l*this.cosph0;break;case qs.EQUIT:e.y=Math.asin(a.y*l/s),a.y=r*s,a.x*=l;break;case qs.N_POLE:e.y=Math.asin(r),a.y=-a.y;break;case qs.S_POLE:e.y=-Math.asin(r);break}e.x=Math.atan2(a.x,a.y)}return a.x=e.x+this.long0,a.y=e.y,a}var rQ=["Tilted_Perspective","tpers"];const sQ={init:aQ,forward:iQ,inverse:nQ,names:rQ};function oQ(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var a=1-this.es,e=1/a;this.radius_p=Math.sqrt(a),this.radius_p2=a,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function lQ(a){var e=a.x,t=a.y,i,n,s,r;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var l=this.radius_p/Xo(this.radius_p*Math.cos(t),Math.sin(t));if(n=l*Math.cos(e)*Math.cos(t),s=l*Math.sin(e)*Math.cos(t),r=l*Math.sin(t),(this.radius_g-n)*n-s*s-r*r*this.radius_p_inv2<0)return a.x=Number.NaN,a.y=Number.NaN,a;i=this.radius_g-n,this.flip_axis?(a.x=this.radius_g_1*Math.atan(s/Xo(r,i)),a.y=this.radius_g_1*Math.atan(r/i)):(a.x=this.radius_g_1*Math.atan(s/i),a.y=this.radius_g_1*Math.atan(r/Xo(s,i)))}else this.shape==="sphere"&&(i=Math.cos(t),n=Math.cos(e)*i,s=Math.sin(e)*i,r=Math.sin(t),i=this.radius_g-n,this.flip_axis?(a.x=this.radius_g_1*Math.atan(s/Xo(r,i)),a.y=this.radius_g_1*Math.atan(r/i)):(a.x=this.radius_g_1*Math.atan(s/i),a.y=this.radius_g_1*Math.atan(r/Xo(s,i))));return a.x=a.x*this.a,a.y=a.y*this.a,a}function uQ(a){var e=-1,t=0,i=0,n,s,r,l;if(a.x=a.x/this.a,a.y=a.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(a.y/this.radius_g_1),t=Math.tan(a.x/this.radius_g_1)*Xo(1,i)):(t=Math.tan(a.x/this.radius_g_1),i=Math.tan(a.y/this.radius_g_1)*Xo(1,t));var u=i/this.radius_p;if(n=t*t+u*u+e*e,s=2*this.radius_g*e,r=s*s-4*n*this.C,r<0)return a.x=Number.NaN,a.y=Number.NaN,a;l=(-s-Math.sqrt(r))/(2*n),e=this.radius_g+l*e,t*=l,i*=l,a.x=Math.atan2(t,e),a.y=Math.atan(i*Math.cos(a.x)/e),a.y=Math.atan(this.radius_p_inv2*Math.tan(a.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(a.y/this.radius_g_1),t=Math.tan(a.x/this.radius_g_1)*Math.sqrt(1+i*i)):(t=Math.tan(a.x/this.radius_g_1),i=Math.tan(a.y/this.radius_g_1)*Math.sqrt(1+t*t)),n=t*t+i*i+e*e,s=2*this.radius_g*e,r=s*s-4*n*this.C,r<0)return a.x=Number.NaN,a.y=Number.NaN,a;l=(-s-Math.sqrt(r))/(2*n),e=this.radius_g+l*e,t*=l,i*=l,a.x=Math.atan2(t,e),a.y=Math.atan(i*Math.cos(a.x)/e)}return a.x=a.x+this.long0,a}var cQ=["Geostationary Satellite View","Geostationary_Satellite","geos"];const dQ={init:oQ,forward:lQ,inverse:uQ,names:cQ};var j0=1.340264,$0=-.081106,J0=893e-6,Q0=.003796,bw=Math.sqrt(3)/2;function hQ(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function _Q(a){var e=da(a.x-this.long0,this.over),t=a.y,i=Math.asin(bw*Math.sin(t)),n=i*i,s=n*n*n;return a.x=e*Math.cos(i)/(bw*(j0+3*$0*n+s*(7*J0+9*Q0*n))),a.y=i*(j0+$0*n+s*(J0+Q0*n)),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a}function mQ(a){a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a;var e=1e-9,t=12,i=a.y,n,s,r,l,u,d;for(d=0;d<t&&(n=i*i,s=n*n*n,r=i*(j0+$0*n+s*(J0+Q0*n))-a.y,l=j0+3*$0*n+s*(7*J0+9*Q0*n),i-=u=r/l,!(Math.abs(u)<e));++d);return n=i*i,s=n*n*n,a.x=bw*a.x*(j0+3*$0*n+s*(7*J0+9*Q0*n))/Math.cos(i),a.y=Math.asin(Math.sin(i)/bw),a.x=da(a.x+this.long0,this.over),a}var fQ=["eqearth","Equal Earth","Equal_Earth"];const gQ={init:hQ,forward:_Q,inverse:mQ,names:fQ};var D1=1e-10;function pQ(){var a;if(this.phi1=this.lat1,Math.abs(this.phi1)<D1)throw new Error;this.es?(this.en=CT(this.es),this.m1=Dp(this.phi1,this.am1=Math.sin(this.phi1),a=Math.cos(this.phi1),this.en),this.am1=a/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=bQ,this.forward=yQ):(Math.abs(this.phi1)+D1>=Bt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=xQ,this.forward=vQ)}function yQ(a){var e=da(a.x-(this.long0||0),this.over),t=a.y,i,n,s;return i=this.am1+this.m1-Dp(t,n=Math.sin(t),s=Math.cos(t),this.en),n=s*e/(i*Math.sqrt(1-this.es*n*n)),a.x=i*Math.sin(n),a.y=this.am1-i*Math.cos(n),a.x=this.a*a.x+(this.x0||0),a.y=this.a*a.y+(this.y0||0),a}function bQ(a){a.x=(a.x-(this.x0||0))/this.a,a.y=(a.y-(this.y0||0))/this.a;var e,t,i,n;if(t=Xo(a.x,a.y=this.am1-a.y),n=IT(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(n))<Bt)e=Math.sin(n),i=t*Math.atan2(a.x,a.y)*Math.sqrt(1-this.es*e*e)/Math.cos(n);else if(Math.abs(e-Bt)<=D1)i=0;else throw new Error;return a.x=da(i+(this.long0||0),this.over),a.y=I_(n),a}function vQ(a){var e=da(a.x-(this.long0||0),this.over),t=a.y,i,n;return n=this.cphi1+this.phi1-t,Math.abs(n)>D1?(a.x=n*Math.sin(i=e*Math.cos(t)/n),a.y=this.cphi1-n*Math.cos(i)):a.x=a.y=0,a.x=this.a*a.x+(this.x0||0),a.y=this.a*a.y+(this.y0||0),a}function xQ(a){a.x=(a.x-(this.x0||0))/this.a,a.y=(a.y-(this.y0||0))/this.a;var e,t,i=Xo(a.x,a.y=this.cphi1-a.y);if(t=this.cphi1+this.phi1-i,Math.abs(t)>Bt)throw new Error;return Math.abs(Math.abs(t)-Bt)<=D1?e=0:e=i*Math.atan2(a.x,a.y)/Math.cos(t),a.x=da(e+(this.long0||0),this.over),a.y=I_(t),a}var wQ=["bonne","Bonne (Werner lat_1=90)"];const CQ={init:pQ,names:wQ},A9={OBLIQUE:{forward:EQ,inverse:LQ},TRANSVERSE:{forward:MQ,inverse:RQ}},vw={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function IQ(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=vG.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const a=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=Yl(a);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let t;const i=Object.keys(vw),n=l=>{if(typeof this[l]>"u")return;const u=parseFloat(this[l])*Ir;if(isNaN(u))throw new Error("Invalid value for "+l+": "+this[l]);return u};for(let l=0;l<i.length;l++){const u=i[l],d=vw[u],h=Object.entries(d);if(h.some(([y])=>typeof this[y]<"u")){t=d;for(let y=0;y<h.length;y++){const[x,C]=h[y],I=n(x);if(typeof I>"u")throw new Error("Missing parameter: "+x+".");this[C]=I}break}}if(!t)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:r}=TQ(this,t);this.lamp=s,Math.abs(r)>ra?(this.cphip=Math.cos(r),this.sphip=Math.sin(r),this.projectionType=A9.OBLIQUE):this.projectionType=A9.TRANSVERSE}function SQ(a){return this.projectionType.forward(this,a)}function AQ(a){return this.projectionType.inverse(this,a)}function TQ(a,e){let t,i;if(e===vw.ROTATE){let n=a.oLongC,s=a.oLatC,r=a.oAlpha;if(Math.abs(Math.abs(s)-Bt)<=ra)throw new Error("Invalid value for o_lat_c: "+a.o_lat_c+" should be < 90");i=n+Math.atan2(-1*Math.cos(r),-1*Math.sin(r)*Math.sin(s)),t=Math.asin(Math.cos(s)*Math.sin(r))}else if(e===vw.NEW_POLE)i=a.oLongP,t=a.oLatP;else{let n=a.oLong1,s=a.oLat1,r=a.oLong2,l=a.oLat2,u=Math.abs(s);if(Math.abs(s)>Bt-ra)throw new Error("Invalid value for o_lat_1: "+a.o_lat_1+" should be < 90");if(Math.abs(l)>Bt-ra)throw new Error("Invalid value for o_lat_2: "+a.o_lat_2+" should be < 90");if(Math.abs(s-l)<ra)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(u<ra)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");i=Math.atan2(Math.cos(s)*Math.sin(l)*Math.cos(n)-Math.sin(s)*Math.cos(l)*Math.cos(r),Math.sin(s)*Math.cos(l)*Math.sin(r)-Math.cos(s)*Math.sin(l)*Math.sin(n)),t=Math.atan(-1*Math.cos(i-n)/Math.tan(s))}return{lamp:i,phip:t}}function EQ(a,e){let{x:t,y:i}=e;t+=a.long0;const n=Math.cos(t),s=Math.sin(i),r=Math.cos(i);e.x=da(Math.atan2(r*Math.sin(t),a.sphip*r*n+a.cphip*s)+a.lamp),e.y=Math.asin(a.sphip*s-a.cphip*r*n);const l=a.obliqueProjection.forward(e);return a.isIdentity&&(l.x*=jo,l.y*=jo),l}function MQ(a,e){let{x:t,y:i}=e;t+=a.long0;const n=Math.cos(i),s=Math.cos(t);e.x=da(Math.atan2(n*Math.sin(t),Math.sin(i))+a.lamp),e.y=Math.asin(-1*n*s);const r=a.obliqueProjection.forward(e);return a.isIdentity&&(r.x*=jo,r.y*=jo),r}function LQ(a,e){a.isIdentity&&(e.x*=Ir,e.y*=Ir);const t=a.obliqueProjection.inverse(e);let{x:i,y:n}=t;if(i<Number.MAX_VALUE){i-=a.lamp;const s=Math.cos(i),r=Math.sin(n),l=Math.cos(n);e.x=Math.atan2(l*Math.sin(i),a.sphip*l*s-a.cphip*r),e.y=Math.asin(a.sphip*r+a.cphip*l*s)}return e.x=da(e.x+a.long0),e}function RQ(a,e){a.isIdentity&&(e.x*=Ir,e.y*=Ir);const t=a.obliqueProjection.inverse(e);let{x:i,y:n}=t;if(i<Number.MAX_VALUE){const s=Math.cos(n);i-=a.lamp,e.x=Math.atan2(s*Math.sin(i),-1*Math.sin(n)),e.y=Math.asin(s*Math.cos(i))}return e.x=da(e.x+a.long0),e}var kQ=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const PQ={init:IQ,forward:SQ,inverse:AQ,names:kQ};function GQ(a){a.Proj.projections.add(ux),a.Proj.projections.add(cx),a.Proj.projections.add(wj),a.Proj.projections.add(Rj),a.Proj.projections.add(Oj),a.Proj.projections.add(Vj),a.Proj.projections.add(qj),a.Proj.projections.add(Jj),a.Proj.projections.add(i$),a.Proj.projections.add(l$),a.Proj.projections.add(x$),a.Proj.projections.add(T$),a.Proj.projections.add(k$),a.Proj.projections.add(N$),a.Proj.projections.add(z$),a.Proj.projections.add(Y$),a.Proj.projections.add(Q$),a.Proj.projections.add(nJ),a.Proj.projections.add(cJ),a.Proj.projections.add(fJ),a.Proj.projections.add(vJ),a.Proj.projections.add(SJ),a.Proj.projections.add(kJ),a.Proj.projections.add(FJ),a.Proj.projections.add(ZJ),a.Proj.projections.add(jJ),a.Proj.projections.add(tQ),a.Proj.projections.add(sQ),a.Proj.projections.add(dQ),a.Proj.projections.add(gQ),a.Proj.projections.add(CQ),a.Proj.projections.add(PQ)}const T0=Object.assign(BK,{defaultDatum:"WGS84",Proj:Yl,WGS84:new Yl("WGS84"),Point:Sp,toPoint:AG,defs:Es,nadgrid:xK,transform:gw,mgrs:DK,version:"__VERSION__"});GQ(T0);function NG(){T0.defs("EPSG:32632","+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs"),T0.defs("EPSG:32631","+proj=utm +zone=31 +datum=WGS84 +units=m +no_defs"),T0.defs("EPSG:2169","+proj=tmerc +lat_0=49.83333333333334 +lon_0=6.166666666666667 +k=1 +x_0=80000 +y_0=100000 +ellps=intl +towgs84=-189.681,18.3463,-42.7695,-0.33746,-3.09264,2.53861,0.4598 +units=m +no_defs"),LY(T0),Wi("EPSG:32632")?.setExtent([166021.44,0,833978.55,932900518e-2]),Wi("EPSG:32631")?.setExtent([166021.44,0,833978.55,932900518e-2]),Wi("EPSG:2169")?.setExtent([48225.17,56225.6,105842.04,139616.4])}const T9=()=>({ogcServers:{"source for config://my_maps?category_id=117":{url:"https://ws.geoportail.lu/mymaps?category_id=117",urlWfs:"https://ws.geoportail.lu/mymaps?category_id=117",type:"mapserver",credential:!1,imageType:"image/png",wfsSupport:!1,isSingleTile:!0,namespace:null,attributes:null},"source for image/jpeg":{url:"https://migration.geoportail.lu/mapserv_proxy?ogcserver=source+for+image%2Fjpeg&cache_version=ddc9f661fc1b496c919d096d89f6f3fb",urlWfs:"https://migration.geoportail.lu/mapserv_proxy?ogcserver=source+for+image%2Fjpeg&cache_version=ddc9f661fc1b496c919d096d89f6f3fb",type:"mapserver",credential:!0,imageType:"image/jpeg",wfsSupport:!1,isSingleTile:!1,namespace:null,attributes:null},"Internal WMS Geoserver":{url:"https://migration.geoportail.lu/ogcproxywms",urlWfs:"https://migration.geoportail.lu/ogcproxywms",type:"geoserver",credential:!1,imageType:"image/png",wfsSupport:!1,isSingleTile:!1,namespace:null,attributes:null},"Internal WMS":{url:"https://migration.geoportail.lu/ogcproxywms",urlWfs:"https://migration.geoportail.lu/ogcproxywms",type:"mapserver",credential:!1,imageType:"image/png",wfsSupport:!1,isSingleTile:!1,namespace:null,attributes:null},"source for image/png":{url:"https://migration.geoportail.lu/mapserv_proxy?ogcserver=source+for+image%2Fpng&cache_version=ddc9f661fc1b496c919d096d89f6f3fb",urlWfs:"https://migration.geoportail.lu/mapserv_proxy?ogcserver=source+for+image%2Fpng&cache_version=ddc9f661fc1b496c919d096d89f6f3fb",type:"mapserver",credential:!0,imageType:"image/png",wfsSupport:!1,isSingleTile:!1,namespace:null,attributes:null}},themes:[{id:116,name:"main",icon:"main",children:[{id:2841,name:"Couches populaires",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:262,name:"cadastre",metadata:{exclusion:"[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115]",is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"cadastre",imageType:"image/png"},{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:698,name:"pag_pag",metadata:{is_queryable:!0,legend_name:"pag",linked_layers:["697","696","1366","709","710"],max_dpi:128,metadata_id:"12c67295-d150-430f-aa28-fa004ecba3c7",start_opacity:.7},dimensions:{},type:"WMS",layers:"pag_pag",imageType:"image/png",style:"default",childLayers:[{name:"pag_pag__28"},{name:"pag_pag__27"},{name:"pag_pag__26"},{name:"pag_pag__25"},{name:"pag_pag__24"},{name:"pag_pag__23"},{name:"pag_pag__22"},{name:"pag_pag__21"},{name:"pag_pag__20"},{name:"pag_pag__19"},{name:"pag_pag__18"},{name:"pag_pag__17"},{name:"pag_pag__16"},{name:"pag_pag__15"},{name:"pag_pag__14"},{name:"pag_pag__13"},{name:"pag_pag__12"},{name:"pag_pag__11"},{name:"pag_pag__9"},{name:"pag_pag__8"},{name:"pag_pag__7"},{name:"pag_pag__6"},{name:"pag_pag__202"},{name:"pag_pag__5"},{name:"pag_pag__200"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:2811,name:"tour_randonnee_all",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_randonnee_all",imageType:"image/png",style:"default",childLayers:[{name:"tour_randonnee_all__category"}]},{id:1813,name:"myenergy_solarkataster_luxemburg_solar_potentials",metadata:{is_queryable:!0,legend_name:"energie:potentiel_solaire",metadata_id:"97628fac-c53b-4426-a829-b188105b9ead",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857",ogc_query_layers:["st_luxemburg_22_feature_info"]},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_solar_potentials",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_solar_potentials__st_luxemburg_22_solar_potentials"}]},{id:245,name:"env_zones_protegees",children:[{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:334,name:"env_zones_protegees_communautaires",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{is_expanded:!0},mixed:!0},{id:2846,name:"Couches rcentes",children:[{id:1734,name:"log_prix_app",children:[{id:1739,name:"log_prix_app_existants",metadata:{is_queryable:!0,legend_name:"logt_prix_app_exist",metadata_id:"9679921a-f90e-4d26-9918-96e66225a171"},dimensions:{},type:"WMS",layers:"log_prix_app_existants",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_existants__21"}]},{id:1740,name:"log_prix_app_en_construction",metadata:{is_queryable:!0,legend_name:"logt_prix_app_enconstruction",metadata_id:"bbb36662-64ba-4d2e-a9a4-7ab00d0bb264"},dimensions:{},type:"WMS",layers:"log_prix_app_en_construction",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_en_construction__20"}]}],metadata:{},mixed:!0},{id:1735,name:"log_loyers",children:[{id:1741,name:"log_loyers_app",metadata:{is_queryable:!0,legend_name:"logt_loyers_app",metadata_id:"2c3dc437-77ac-4030-a8d0-f61fd12e8f5e"},dimensions:{},type:"WMS",layers:"log_loyers_app",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_app__18"}]},{id:1742,name:"log_loyers_maisons",metadata:{is_queryable:!0,legend_name:"logt_loyers_maisons",metadata_id:"f914e59b-6684-4a94-b5ec-b5a782708371"},dimensions:{},type:"WMS",layers:"log_loyers_maisons",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_maisons__17"}]}],metadata:{},mixed:!0},{id:2835,name:"ortho2023_IR",metadata:{exclusion:'["exclusion_ortho2023IR","exclusion_ortho2023IR_bati"]',metadata_id:"3bb6099a-67f2-4243-b820-ffaeb03e439b"},dimensions:{},type:"WMS",layers:"ortho2023_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2023_IR__0"}]},{id:2812,name:"aev_pacte_climat_2023",metadata:{is_queryable:!0,legend_name:"aev:klimapakt2023",metadata_id:"223a6d2c-ac2c-4b95-9beb-900fd9b3e168"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2023__10"}]},{id:2794,name:"eau_restrictions_forages_prives_prelevement",metadata:{legend_name:"eau:restrictions_nouveaux_forages_prives",metadata_id:"b2f60fc1-c2e8-4472-a8e2-4e11a862b257"},dimensions:{},type:"WMS",layers:"eau_restrictions_forages_prives_prelevement",imageType:"image/png",style:"default",childLayers:[{name:"eau_restrictions_forages_prives_prelevement__475"}]}],metadata:{is_expanded:!1},mixed:!0},{id:242,name:"basisden",children:[{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0},{id:248,name:"flurstucke_grundstucke",children:[{id:359,name:"parcels",metadata:{exclusion:'[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,"exclusion_ortho2022","exclusion_ortho2022IR","exclusion_ortho2023","exclusion_ortho2023_bati","exclusion_ortho2023IR"]',is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"parcels",imageType:"image/png"},{id:353,name:"parcels_labels",metadata:{metadata_id:"a65629c7-ddd6-43de-b0c3-c49647d8fd2b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"parcels_labels",imageType:"image/png"},{id:199,name:"buildings",metadata:{is_queryable:!0,legend_name:"pcn_batiments:show",metadata_id:"5d0efc9d-a05a-4964-9f9d-a0ab9932af04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"buildings",imageType:"image/png"},{id:320,name:"toponymes",metadata:{metadata_id:"ffa537f7-a438-47da-9e0c-8e32260646a9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"toponymes",imageType:"image/png"},{id:350,name:"communes_cadastrales_labels",metadata:{is_queryable:!0,metadata_id:"5ae8fdfb-bb8f-4f72-b7ee-36c7664fe4b5"},dimensions:{},type:"WMS",layers:"communes_cadastrales_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_cadastrales_labels__COMMUNES_CADASTRALES_LABELS"}]},{id:153,name:"communes_cadastrales",metadata:{is_queryable:!0,metadata_id:"8a95f8b2-2cfb-42e7-a51c-02084228b364"},dimensions:{},type:"WMS",layers:"communes_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"communes_cadastrales__COMMUNES_CADASTRALES"}]},{id:266,name:"sections_cadastrales_labels",metadata:{is_queryable:!0,metadata_id:"69d1b609-11f7-4587-872a-508ee98ea76c"},dimensions:{},type:"WMS",layers:"sections_cadastrales_labels",imageType:"image/png",style:"default",childLayers:[{name:"sections_cadastrales_labels__SECTIONS_CADASTRALES_LABELS"}]},{id:355,name:"sections_cadastrales",metadata:{is_queryable:!0,metadata_id:"c9122320-8f06-4499-ac86-eb469e911369"},dimensions:{},type:"WMS",layers:"sections_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"sections_cadastrales__SECTIONS_CADASTRALES"}]},{id:256,name:"feuilles_cadastrales",metadata:{is_queryable:!0,metadata_id:"51333029-c8cf-490f-b4a6-80ba239f0cb4"},dimensions:{},type:"WMS",layers:"feuilles_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"feuilles_cadastrales__FEUILLES_CADASTRALES"}]},{id:417,name:"remembrements",metadata:{exclusion:"[301,302,303,304,305,306,307,308,309,310]",is_queryable:!0,max_dpi:128,metadata_id:"03d079f3-61fb-48bc-ab39-f3427b208702",start_opacity:.7},dimensions:{},type:"WMS",layers:"remembrements",imageType:"image/png",style:"default",childLayers:[{name:"remembrements__0"},{name:"remembrements__1"}]},{id:1643,name:"act_grid_land_tenure",children:[{id:1644,name:"act_privately_owned_land",metadata:{is_queryable:!0,legend_name:"act:privately",metadata_id:"75cb5ae7-7c48-478f-b2a6-1e5bfbdd5958"},dimensions:{},type:"WMS",layers:"act_privately_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_privately_owned_land__6"}]},{id:1645,name:"act_state_owned_land",metadata:{is_queryable:!0,legend_name:"act:stateowned",metadata_id:"e8813b4e-43c4-4a72-853e-bd7c06fd1111"},dimensions:{},type:"WMS",layers:"act_state_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_state_owned_land__5"}]},{id:1646,name:"act_municipality_owned_land",metadata:{is_queryable:!0,legend_name:"act:municipality",metadata_id:"89d42e03-93ae-444f-a49e-eb869b30071e"},dimensions:{},type:"WMS",layers:"act_municipality_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_municipality_owned_land__4"}]},{id:1647,name:"act_domainepublic_owned_land",metadata:{is_queryable:!0,legend_name:"act:domainepublic",metadata_id:"ac32c380-37df-4594-bbf2-0fd394482fd9"},dimensions:{},type:"WMS",layers:"act_domainepublic_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_domainepublic_owned_land__1"}]},{id:1648,name:"act_publicly_owned_land",metadata:{is_queryable:!0,legend_name:"act:publicly",metadata_id:"0a1852f5-1f32-4bdc-8bbc-d6103921d862"},dimensions:{},type:"WMS",layers:"act_publicly_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_publicly_owned_land__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:165,name:"adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0},{id:291,name:"topographische_karten",children:[{id:295,name:"topo",metadata:{exclusion:"[33,43]",metadata_id:"fe530846-9991-455e-a036-edcde4c3c566"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo",imageType:"image/png"},{id:223,name:"topo_250k",metadata:{metadata_id:"e1f601a5-ed8f-4043-8719-0cad50cbb483"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_250k",imageType:"image/png"},{id:1730,name:"topo_100k_2019",metadata:{legend_name:"topo_100k_sans_tour",metadata_id:"ce051f08-bca6-43c0-af7b-5fcf3e02376e"},dimensions:{},type:"WMS",layers:"topo_100k_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_100k_2019__topo_100k"}]},{id:1729,name:"topo_100k_BW_2019",metadata:{legend_name:"topo_100k_sans_tour",metadata_id:"8d02ddc3-8482-4e47-8ee0-520af99d4966"},dimensions:{},type:"WMS",layers:"topo_100k_BW_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_100k_BW_2019__topo_100k_bw"}]},{id:1727,name:"topo_50k_2019",metadata:{legend_name:"topo_50k_sans_tour",metadata_id:"abc505e1-224c-455e-9e7f-4f094eb4e7b0"},dimensions:{},type:"WMS",layers:"topo_50k_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_50k_2019__50K-2019-LUX_avec_ETRANGER"}]},{id:1728,name:"topo_50k_BW_2019",metadata:{legend_name:"topo_50k_sans_tour",metadata_id:"b8ccc3e8-fcf0-479c-b322-c0aee5a480e5"},dimensions:{},type:"WMS",layers:"topo_50k_BW_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_50k_BW_2019__50K-2019-LUX_avec_ETRANGER-BW"}]},{id:206,name:"topo_20k",metadata:{legend_name:"topo_20k",metadata_id:"ea998ae8-731a-43bc-aa9f-171684f97602"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_20k",imageType:"image/png"},{id:149,name:"topo_tour_20k",metadata:{legend_name:"topo_tour_20k",metadata_id:"1173_"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_tour_20k",imageType:"image/png"},{id:265,name:"topo_decoupage_r",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_r",imageType:"image/png"},{id:195,name:"topo_5k",metadata:{exclusion:"[32,42]",legend_name:"topo_5k",metadata_id:"270_2012"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_5k",imageType:"image/png"},{id:313,name:"topo_carteshisto",children:[{id:2615,name:"FERRARIS",metadata:{metadata_id:"783cb2a8-a143-4263-aaf0-b4f032835e0c"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"FERRARIS",imageType:"image/png"},{id:328,name:"1907_CAHANSEN",metadata:{metadata_id:"b88e6524-67d3-4e34-b998-6f30120e3718"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"1907_CAHANSEN",imageType:"image/png"},{id:252,name:"1927_CAHANSEN",metadata:{metadata_id:"90750f9f-856d-41ac-a90f-a8befbd75434"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"1927_CAHANSEN",imageType:"image/png"},{id:220,name:"TOPO_CARTES_1944",metadata:{metadata_id:"e78c1d0a-ef3d-4552-9bba-f72a1d1d3173"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTES_1944",imageType:"image/png"},{id:2616,name:"TOPO_CARTEHISTO_1950",metadata:{metadata_id:"f29901f2-c4b0-4250-a332-640e25a84d2e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"TOPO_CARTEHISTO_1950",imageType:"image/png"},{id:274,name:"TOPO25K1954C24",metadata:{metadata_id:"7a8bc9a4-e7c7-4584-bc4f-03deaf7b69b2"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO25K1954C24",imageType:"image/png"},{id:201,name:"TOPO_CARTESHISTO_1964",metadata:{metadata_id:"58bec8c3-c9f1-44ba-ab3a-860122694952"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1964",imageType:"image/png"},{id:173,name:"TOPO_CARTESHISTO_1964_RGB",metadata:{metadata_id:"27818c9d-19f1-4c3c-bcf6-0856d766d27d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1964_RGB",imageType:"image/png"},{id:217,name:"TOPO_CARTESHISTO_1966-74_50k",metadata:{metadata_id:"0cda7940-0268-4595-97ed-ae5854da628b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1966-74_50k",imageType:"image/png"},{id:156,name:"TOPO_CARTESHISTO_1979",metadata:{metadata_id:"6c2b8b34-0eb8-4b2c-8586-e8a515ad1860"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1979",imageType:"image/png"},{id:191,name:"TOPO_CARTESHISTO_1979_RGB",metadata:{metadata_id:"44675358-e65a-4e3b-ac6f-e4f19fd7bfb5"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1979_RGB",imageType:"image/png"},{id:285,name:"TOPO_CARTESHISTO_1989",metadata:{metadata_id:"d3e2a6d0-52b6-4f06-b833-021647f6de4c"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1989",imageType:"image/png"},{id:185,name:"TOPO_CARTESHISTO_1990_50k",metadata:{metadata_id:"b68a8131-2e42-40de-99ce-5a1433d80cbf"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1990_50k",imageType:"image/png"},{id:299,name:"TOPO_CARTESHISTO_1993_50k",metadata:{metadata_id:"f15bf68d-593f-422a-b855-2e05dfb34fcc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1993_50k",imageType:"image/png"},{id:278,name:"TOPO_CARTESHISTO_2000_50k",metadata:{metadata_id:"ccdd1b07-401d-48cb-821d-1ae51d489f36"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_2000_50k",imageType:"image/png"},{id:237,name:"TOPO_CARTESHISTO_2000",metadata:{metadata_id:"21a56aff-4a9e-4be5-9ed8-cd60dd56d5a1"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_2000",imageType:"image/png"},{id:155,name:"topo_50k",metadata:{legend_name:"topo_50k",metadata_id:"262"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_50k",imageType:"image/png"}],metadata:{},mixed:!0},{id:734,name:"utm_grid",metadata:{max_dpi:128,metadata_id:"84f59e51-2772-4b6d-8c5b-3ec19aa7d8f2"},dimensions:{},type:"WMS",layers:"utm_grid",imageType:"image/png",style:"default",childLayers:[{name:"utm_grid__2"},{name:"utm_grid__3"}]},{id:738,name:"luref_graticules",metadata:{max_dpi:128,metadata_id:"0d1a431c-36b0-406f-8cfd-d264d4949bf0"},dimensions:{},type:"WMS",layers:"luref_graticules",imageType:"image/png",style:"default",childLayers:[{name:"luref_graticules__0"},{name:"luref_graticules__1"}]}],metadata:{},mixed:!0},{id:330,name:"geodesy",children:[{id:1831,name:"ng_new",metadata:{is_queryable:!0,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"ng_new",imageType:"image/png",style:"default",childLayers:[{name:"ng_new__0"}]},{id:411,name:"ng",metadata:{is_queryable:!0,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"ng",imageType:"image/png",style:"default",childLayers:[{name:"ng__POINT_NG"}]},{id:1724,name:"points_reference_gps",metadata:{is_queryable:!0,metadata_id:"fd406ca9-2542-4de9-8cee-7ee0a16c7f42"},dimensions:{},type:"WMS",layers:"points_reference_gps",imageType:"image/png",style:"default",childLayers:[{name:"points_reference_gps__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:555,name:"editus_pois",children:[{id:542,name:"editus_poi_299",metadata:{is_queryable:!0,legend_name:"editus_1",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"542",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_299__POI"}]},{id:543,name:"editus_poi_286",metadata:{is_queryable:!0,legend_name:"editus_2",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"543",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_286__POI"}]},{id:544,name:"editus_poi_285",metadata:{is_queryable:!0,legend_name:"editus_3",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"544",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_285__POI"}]},{id:545,name:"editus_poi_287",metadata:{is_queryable:!0,legend_name:"editus_4",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"545",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_287__POI"}]},{id:546,name:"editus_poi_289",metadata:{is_queryable:!0,legend_name:"editus_5",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"546",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_289__POI"}]},{id:547,name:"editus_poi_290",metadata:{is_queryable:!0,legend_name:"editus_6",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"547",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_290__POI"}]},{id:549,name:"editus_poi_291",metadata:{is_queryable:!0,legend_name:"editus_7",metadata_id:"4a04ebff-4954-4c4d-9387-46d3587eccef",start_opacity:.9},dimensions:{},type:"WMS",layers:"549",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_291__POI"}]},{id:550,name:"editus_poi_292",metadata:{is_queryable:!0,legend_name:"editus_8",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"550",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_292__POI"}]},{id:551,name:"editus_poi_293",metadata:{is_queryable:!0,legend_name:"editus_9",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"551",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_293__POI"}]},{id:548,name:"editus_poi_294",metadata:{is_queryable:!0,legend_name:"editus_10",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"548",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_294__POI"}]},{id:552,name:"editus_poi_295",metadata:{is_queryable:!0,legend_name:"editus_11",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"552",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_295__POI"}]},{id:553,name:"editus_poi_296",metadata:{is_queryable:!0,legend_name:"editus_12",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"553",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_296__POI"}]},{id:554,name:"editus_poi_298",metadata:{is_queryable:!0,legend_name:"editus_13",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"554",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_298__POI"}]}],metadata:{},mixed:!0},{id:194,name:"infrastrucktur_une_kommunikation",children:[{id:339,name:"gebaude",children:[{id:199,name:"buildings",metadata:{is_queryable:!0,legend_name:"pcn_batiments:show",metadata_id:"5d0efc9d-a05a-4964-9f9d-a0ab9932af04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"buildings",imageType:"image/png"}],metadata:{},mixed:!0},{id:196,name:"verkehrsnetze",children:[{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:351,name:"roads_labels",metadata:{metadata_id:"5d606cae-cbc6-44c3-a465-edb981e44a39"},dimensions:{},type:"WMS",layers:"roads_labels",imageType:"image/png",style:"default",childLayers:[{name:"roads_labels__ROADS_LABELS"}]},{id:2401,name:"act_ponts",metadata:{is_queryable:!0,metadata_id:"2b7d36db-987f-49b4-96d7-60e934ddf926"},dimensions:{},type:"WMS",layers:"act_ponts",imageType:"image/png",childLayers:[{name:"act_ponts__0"},{name:"act_ponts__1"},{name:"act_ponts__2"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:813,name:"cdt_lignes_all",metadata:{is_queryable:!0,metadata_id:"bbe0523f-374d-4c94-a27d-7ce81d8bae3b"},dimensions:{},type:"WMS",layers:"cdt_lignes_all",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_all__lignes_de_bus_detaillees"},{name:"cdt_lignes_all__lignes_de_bus_detaillees_mymaps"}]},{id:812,name:"cdt_lignes_bus_par_operateur",children:[{id:814,name:"cdt_lignes_avl",metadata:{is_queryable:!0,metadata_id:"1e6f614b-e347-4115-82d7-74a72f51389f"},dimensions:{},type:"WMS",layers:"cdt_lignes_avl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_avl__category"}]},{id:815,name:"cdt_lignes_rgtr",metadata:{is_queryable:!0,metadata_id:"eae3ed54-d2ae-45ae-a62c-0dec4d44acdf"},dimensions:{},type:"WMS",layers:"cdt_lignes_rgtr",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_rgtr__category"}]},{id:816,name:"cdt_lignes_tice",metadata:{is_queryable:!0,metadata_id:"a3cb973c-12b0-4e41-bfc0-b2fb67637513"},dimensions:{},type:"WMS",layers:"cdt_lignes_tice",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tice__category"}]},{id:817,name:"cdt_lignes_cfl",metadata:{is_queryable:!0,metadata_id:"84ebdfbc-ba25-464c-af86-e74e588978ef"},dimensions:{},type:"WMS",layers:"cdt_lignes_cfl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_cfl__category"}]},{id:1374,name:"cdt_lignes_tram",metadata:{is_queryable:!0,metadata_id:"0f46c673-d4b4-4c25-8d9a-fca41035f587"},dimensions:{},type:"WMS",layers:"cdt_lignes_tram",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tram__category"}]}],metadata:{},mixed:!0},{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:2707,name:"mmtp_electromobilite_AC",metadata:{is_queryable:!0,metadata_id:"08885ef4-d534-47d4-8b93-2883c71a8452"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_AC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_AC__0"}]},{id:2708,name:"mmtp_electromobilite_DC",metadata:{is_queryable:!0,metadata_id:"624d34e4-1192-40bb-871a-e6c8720d766b"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_DC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_DC__2"}]},{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:377,name:"mobiliteit_pr",metadata:{is_queryable:!0,legend_name:"mobiliteit:pr",max_dpi:128,metadata_id:"9e0c97ae-aff9-41fc-9489-bbf97999163d"},dimensions:{},type:"WMS",layers:"mobiliteit_pr",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_pr__0"}]},{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]},{id:512,name:"tour_pistes_velo_mymaps2",metadata:{is_queryable:!0,legend_name:"tour_velo_national",metadata_id:"e9fea021-2aab-4f58-a777-8c7536898d9b"},dimensions:{},type:"WMS",layers:"tour_pistes_velo_mymaps2",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_velo_mymaps2__category"}]},{id:352,name:"cfl_hecto",metadata:{is_queryable:!0,metadata_id:"938f9e8e-071c-4e6b-940f-64b2a60eca74"},dimensions:{},type:"WMS",layers:"cfl_hecto",imageType:"image/png",style:"default",childLayers:[{name:"cfl_hecto__points_hecto"}]},{id:685,name:"cita_chantiers_actuel",metadata:{is_queryable:!0,metadata_id:"9c823038-5965-47cc-8dad-21496e57e3f2",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_actuel",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_actuel__CHANTIERS_ACTUEL"}]},{id:686,name:"cita_chantiers_futur",metadata:{is_queryable:!0,metadata_id:"063cb796-640f-4ab0-8430-955983a00e3b",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_futur",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_futur__CHANTIERS_FUTUR"}]},{id:1713,name:"chantiers_actuels_pc",metadata:{is_queryable:!0,metadata_id:"7d59f3a6-e8d8-464b-bbf9-73c6ca358a51",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_actuels_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_actuels_pc__CHANTIERS_ACTUEL_PC"}]},{id:1714,name:"chantiers_futurs_pc",metadata:{is_queryable:!0,metadata_id:"f6b9df36-5e62-46d1-ae91-c7c58c7e2e45",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_futurs_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_futurs_pc__CHANTIERS_FUTUR_PC"}]},{id:713,name:"pch_radars",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"385180ba-a9bc-49d4-8858-ba5f19942a66",start_opacity:1},dimensions:{},type:"WMS",layers:"pch_radars",imageType:"image/png",style:"default",childLayers:[{name:"pch_radars__1"},{name:"pch_radars__2"}]},{id:2729,name:"pch_points_repere",metadata:{geocatalog_open_data_last_update_date:"2024-07-26T08:50:03.7336833",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a3633bcf73e6f52fd83901",is_queryable:!0,metadata_id:"1dbe9ca0-638e-4034-94ef-c8a12fdaa57a"},dimensions:{},type:"WMS",layers:"pch_points_repere",imageType:"image/png",style:"default",childLayers:[{name:"pch_points_repere__6"}]}],metadata:{},mixed:!0},{id:1495,name:"fourniture_energie",children:[{id:1494,name:"gaz_naturel",metadata:{is_queryable:!0,legend_name:"gaz",metadata_id:"9e04e366-fcb7-4836-8d09-41b20f280cb0",start_opacity:.75},dimensions:{},type:"WMS",layers:"gaz_naturel",imageType:"image/png",style:"default",childLayers:[{name:"gaz_naturel__1"},{name:"gaz_naturel__3"}]}],metadata:{},mixed:!0},{id:2354,name:"ilr_couverture",children:[{id:2355,name:"ilr_couverture_selon_technologie",children:[{id:2351,name:"ilr_vhcn",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"30ced97b-5b19-4ef0-bf25-cad75bcf3f74",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_vhcn_adresses",imageType:"image/png",childLayers:[{name:"ilr_vhcn__1"},{name:"ilr_vhcn__2"},{name:"ilr_vhcn__3"}]},{id:2352,name:"ilr_fibre_optique",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"8ae6a358-f7ee-4d5e-81e2-5407dd34cc4e",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_fibre_optique",imageType:"image/png",childLayers:[{name:"ilr_fibre_optique__5"},{name:"ilr_fibre_optique__6"},{name:"ilr_fibre_optique__7"}]},{id:2353,name:"ilr_docsis",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"2dd35dd3-381b-405e-b870-1489698ddd23",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_docsis",imageType:"image/png",childLayers:[{name:"ilr_docsis__9"},{name:"ilr_docsis__10"},{name:"ilr_docsis__11"}]}],metadata:{},mixed:!0},{id:2367,name:"ilr_reseau_mobile_group",children:[{id:2356,name:"ilr_technologie_5G",children:[{id:2363,name:"ilr_technologie_5G_vitesse_max",metadata:{exclusion:"[360]",is_queryable:!0,legend_name:"ilr_vitesse_realisable_5g",metadata_id:"72954d5b-29dd-47ea-a5d8-bf6f3b3ec832",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_vitesse_max",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_vitesse_max__99"}]},{id:2361,name:"ilr_technologie_5G_Post",children:[{id:2369,name:"ilr_technologie_5G_post_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"d4b2509f-9bc1-41b5-bcd4-c7086da93f14",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_post_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_post_satisfaisant__37"}]},{id:2370,name:"ilr_technologie_5G_post_tres_bien",metadata:{exclusion:"[360]",metadata_id:"d4b2509f-9bc1-41b5-bcd4-c7086da93f14",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_post_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_post_tres_bien__40"}]},{id:2371,name:"ilr_technologie_5G_post_excellent",metadata:{exclusion:"[360]",metadata_id:"d4b2509f-9bc1-41b5-bcd4-c7086da93f14",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_post_excellent",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_post_excellent__43"}]}],metadata:{},mixed:!0},{id:2360,name:"ilr_technologie_5G_Proximus",children:[{id:2364,name:"ilr_technologie_5G_proximus_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"e0e72895-45a1-46b9-87ce-0ed7d02ddce5",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_proximus_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_proximus_satisfaisant__61"}]},{id:2365,name:"ilr_technologie_5G_proximus_tres_bien",metadata:{exclusion:"[360]",metadata_id:"e0e72895-45a1-46b9-87ce-0ed7d02ddce5",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_proximus_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_proximus_tres_bien__64"}]},{id:2366,name:"ilr_technologie_5G_proximus_excellent",metadata:{exclusion:"[360]",metadata_id:"e0e72895-45a1-46b9-87ce-0ed7d02ddce5",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_proximus_excellent",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_proximus_excellent__67"}]}],metadata:{},mixed:!0},{id:2362,name:"ilr_technologie_5G_Orange",children:[{id:2373,name:"ilr_technologie_5G_orange_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"aba4901e-7a64-4ac8-898f-24b8554177d6",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_orange_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_orange_satisfaisant__16"}]},{id:2572,name:"ilr_technologie_5G_orange_tresbien",metadata:{exclusion:"[360]",metadata_id:"aba4901e-7a64-4ac8-898f-24b8554177d6",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_orange_tresbien",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_orange_tresbien__1"}]},{id:2372,name:"ilr_technologie_5G_orange_excellent",metadata:{exclusion:"[360]",metadata_id:"aba4901e-7a64-4ac8-898f-24b8554177d6",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_orange_excellent",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_orange_excellent__19"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2357,name:"ilr_technologie_4G",children:[{id:2374,name:"ilr_technologie_4G_vitesse_max",metadata:{exclusion:"[360]",is_queryable:!0,legend_name:"ilr_vitesse_realisable",metadata_id:"9eb3d402-080b-4443-9fc3-1cffa4c334bb",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_vitesse_max",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_vitesse_max__88"}]},{id:2394,name:"ilr_technologie_4G_Post",children:[{id:2378,name:"ilr_technologie_4G_post_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"d14aee71-6ad4-418c-bbf8-136317632163",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_post_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_post_satisfaisant__28"}]},{id:2380,name:"ilr_technologie_4G_post_bien",metadata:{exclusion:"[360]",metadata_id:"d14aee71-6ad4-418c-bbf8-136317632163",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_post_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_post_bien__31"}]},{id:2379,name:"ilr_technologie_4G_post_tres_bien",metadata:{exclusion:"[360]",metadata_id:"d14aee71-6ad4-418c-bbf8-136317632163",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_post_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_post_tres_bien__34"}]}],metadata:{},mixed:!0},{id:2393,name:"ilr_technologie_4G_Proximus",children:[{id:2375,name:"ilr_technologie_4G_proximus_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"71e3d058-b034-4cf4-bc6c-6c0bda6dde19",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_proximus_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_proximus_satisfaisant__52"}]},{id:2377,name:"ilr_technologie_4G_proximus_bien",metadata:{exclusion:"[360]",metadata_id:"71e3d058-b034-4cf4-bc6c-6c0bda6dde19",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_proximus_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_proximus_bien__55"}]},{id:2376,name:"ilr_technologie_4G_proximus_tres_bien",metadata:{exclusion:"[360]",metadata_id:"71e3d058-b034-4cf4-bc6c-6c0bda6dde19",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_proximus_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_proximus_tres_bien__58"}]}],metadata:{},mixed:!0},{id:2395,name:"ilr_technologie_4G_Orange",children:[{id:2383,name:"ilr_technologie_4G_orange_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"f5b0958f-7f6d-408f-9670-241a27697c3a",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_orange_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_orange_satisfaisant__7"}]},{id:2381,name:"ilr_technologie_4G_orange_bien",metadata:{exclusion:"[360]",metadata_id:"f5b0958f-7f6d-408f-9670-241a27697c3a",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_orange_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_orange_bien__10"}]},{id:2382,name:"ilr_technologie_4G_orange_tres_bien",metadata:{exclusion:"[360]",metadata_id:"f5b0958f-7f6d-408f-9670-241a27697c3a",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_orange_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_orange_tres_bien__13"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2358,name:"ilr_technologie_3G",children:[{id:2391,name:"ilr_technologie_3G_vitesse_max",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"9cef87ab-e423-4ea8-9f31-3b1473f05bfe",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_3G_vitesse_max",imageType:"image/png",childLayers:[{name:"ilr_technologie_3G_vitesse_max__110"}]},{id:2387,name:"ilr_technologie_3G_orange",metadata:{exclusion:"[360]",metadata_id:"b7d64c10-a1be-4afc-9a70-686fd2cc4c02",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_3G_orange",imageType:"image/png",childLayers:[{name:"ilr_technologie_3G_orange__4"}]}],metadata:{},mixed:!0},{id:2368,name:"ilr_technologie_2G",children:[{id:2392,name:"ilr_technologie_2G_vitesse_max",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"f5c6ed13-5ab1-4980-8b57-e247b0f57d88",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_2G_vitesse_max",imageType:"image/png",childLayers:[{name:"ilr_technologie_2G_vitesse_max__77"}]},{id:2390,name:"ilr_technologie_2G_post",metadata:{exclusion:"[360]",metadata_id:"cc98e250-ab5a-4a1b-9dc8-2ffc689477ad",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_2G_post",imageType:"image/png",childLayers:[{name:"ilr_technologie_2G_post__76"}]},{id:2389,name:"ilr_technologie_2G_proximus",metadata:{exclusion:"[360]",metadata_id:"c93f8596-313f-4068-ad4f-0f0b11a92853",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_2G_proximus",imageType:"image/png",childLayers:[{name:"ilr_technologie_2G_proximus__46"}]},{id:2388,name:"ilr_technologie_2G_orange",metadata:{exclusion:"[360]",metadata_id:"4829085e-21b1-4c5c-945e-f731e812e29e",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_2G_orange",imageType:"image/png",childLayers:[{name:"ilr_technologie_2G_orange__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2438,name:"seveso_group",children:[{id:798,name:"seveso",metadata:{is_queryable:!0,legend_name:"seveso",metadata_id:"b9ab14d8-4e51-4146-b019-3937715a8fe8"},dimensions:{},type:"WMS",layers:"seveso",imageType:"image/png",style:"default",childLayers:[{name:"seveso__POI"}]}],metadata:{},mixed:!0},{id:2276,name:"radio_group",children:[{id:2275,name:"smc_radio_haute_puissance",metadata:{is_queryable:!0,legend_name:"smc_radio",metadata_id:"ebfdb83f-dbc6-44fb-973d-5a782eed32e2"},dimensions:{},type:"WMS",layers:"2275",imageType:"image/png",style:"default",childLayers:[{name:"smc_radio_haute_puissance__POI"}]},{id:2278,name:"smc_radio_reseau_emission",metadata:{is_queryable:!0,legend_name:"smc_radio",metadata_id:"ebfdb83f-dbc6-44fb-973d-5a782eed32e2"},dimensions:{},type:"WMS",layers:"2278",imageType:"image/png",style:"default",childLayers:[{name:"smc_radio_reseau_emission__POI"}]},{id:2277,name:"smc_radio_locale",metadata:{is_queryable:!0,legend_name:"smc_radio",metadata_id:"ebfdb83f-dbc6-44fb-973d-5a782eed32e2"},dimensions:{},type:"WMS",layers:"2277",imageType:"image/png",style:"default",childLayers:[{name:"smc_radio_locale__POI"}]}],metadata:{},mixed:!0},{id:1832,name:"sante_group",children:[{id:1810,name:"sante_covid_altersheemer",metadata:{is_queryable:!0,legend_name:"structures_acceuil",metadata_id:"0019f21d-e492-42ce-83a9-f4212c43e2c6",start_opacity:.9},dimensions:{},type:"WMS",layers:"1810",imageType:"image/png",style:"default",childLayers:[{name:"sante_covid_altersheemer__POI"}]},{id:2004,name:"pharmacies",metadata:{is_queryable:!0,legend_name:"pharmacies",metadata_id:"4fed0407-cb2b-4c75-982a-e96f926d6b0d"},dimensions:{},type:"WMS",layers:"2004",imageType:"image/png",style:"default",childLayers:[{name:"pharmacies__POI"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:324,name:"oberflachendarstellung",children:[{id:178,name:"luft_und_satellitenbilder",children:[{id:2592,name:"act_ortho_time",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"1adb95b0-d0a5-4afa-936a-c9faa9edba2c",time_config:'{"default_time":"2023-08","time_links":{"2001-08":"ortho_2001","2004-08":"ortho_2004","2007-08":"ortho_2007","2010-08":"ortho_2010","2013-08":"ortho_2013","2016-08":"ortho_2016","2017-08":"ortho_2017","2018-08":"ortho_2018","2019-01":"ortho_2019_winter","2019-08":"ortho_2019","2020-08":"ortho_2020","2021-08":"ortho_2021","2022-08":"ortho_2022","2023-08":"ortho_2023"}}',time_layers:{"2001-08-01T00:00:00Z":"ortho_2001","2004-08-01T00:00:00Z":"ortho_2004","2007-08-01T00:00:00Z":"ortho_2007","2010-08-01T00:00:00Z":"ortho_2010","2013-08-01T00:00:00Z":"ortho_2013","2016-08-01T00:00:00Z":"ortho_2016","2017-08-01T00:00:00Z":"ortho_2017","2018-08-01T00:00:00Z":"ortho_2018","2019-01-01T00:00:00Z":"ortho_2019_winter","2019-08-01T00:00:00Z":"ortho_2019","2020-08-01T00:00:00Z":"ortho_2020","2021-08-01T00:00:00Z":"ortho_2021","2022-08-01T00:00:00Z":"ortho_2022","2023-08-01T00:00:00Z":"ortho_2023"}},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"act_ortho_time",imageType:"image/jpeg",time:{minValue:"2001-08-01T00:00:00Z",maxValue:"2023-08-01T00:00:00Z",values:["2001-08-01T00:00:00Z","2004-08-01T00:00:00Z","2007-08-01T00:00:00Z","2010-08-01T00:00:00Z","2013-08-01T00:00:00Z","2016-08-01T00:00:00Z","2017-08-01T00:00:00Z","2018-08-01T00:00:00Z","2019-01-01T00:00:00Z","2019-08-01T00:00:00Z","2020-08-01T00:00:00Z","2021-08-01T00:00:00Z","2022-08-01T00:00:00Z","2023-08-01T00:00:00Z"],resolution:"month",minDefValue:"2023-08-01T00:00:00Z",maxDefValue:null,mode:"value",widget:"slider"}},{id:2792,name:"ortho_2023",metadata:{exclusion:'["exclusion_ortho2023","exclusion_ortho2023_bati"]',metadata_id:"742d2a2e-eb7a-4a0b-a6d8-00d70831ef04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2023",imageType:"image/jpeg"},{id:2537,name:"ortho_2022",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"63f18835-55ac-448c-a0ea-dc998933077b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2022",imageType:"image/jpeg"},{id:2272,name:"ortho_2021",metadata:{exclusion:"[121,221]",metadata_id:"ea0bd2ff-b743-4f3a-bd9b-450976563de9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2021",imageType:"image/jpeg"},{id:2056,name:"ortho_2020",metadata:{exclusion:"[119,219]",metadata_id:"87870b8a-10a1-4c33-bf50-7efe851fd450"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2020",imageType:"image/jpeg"},{id:1784,name:"ortho_2019",metadata:{exclusion:"[116,216]",metadata_id:"97c88ef6-6c64-4cb0-a134-06bb42b2b448"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019",imageType:"image/jpeg"},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1527,name:"ortho_2018",metadata:{exclusion:"[113,213]",metadata_id:"6fde72c4-802f-4663-be74-5fa5901cb4f0"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2018",imageType:"image/jpeg"},{id:1371,name:"ortho_2017",metadata:{exclusion:"[111,211]",metadata_id:"1cdae616-1a7a-49d5-b35d-05864891641f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017",imageType:"image/jpeg"},{id:745,name:"ortho_2016",metadata:{exclusion:"[107,207]",metadata_id:"bba79b6d-4205-4ce4-98e4-7b7922afcd55"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016",imageType:"image/jpeg"},{id:360,name:"ortho_2013",metadata:{exclusion:"[106,206]",metadata_id:"ced4a3dd-135e-43d0-86b9-2318982581f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013",imageType:"image/jpeg"},{id:342,name:"ortho_2010",metadata:{exclusion:"[105,205]",metadata_id:"0faf4bdb-a54b-42d7-942c-4e52fa66e963"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010",imageType:"image/jpeg"},{id:231,name:"ortho_2007",metadata:{exclusion:"[101,201]",metadata_id:"3be3d98e-7997-4ff6-8d77-e393a5fc4fdd"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2007",imageType:"image/jpeg"},{id:224,name:"ortho_2004",metadata:{exclusion:"[103,203]",metadata_id:"a185f78a-ca9c-43f8-8d06-b1abba8ff056"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2004",imageType:"image/jpeg"},{id:225,name:"ortho_2001",metadata:{exclusion:"[104,204]",metadata_id:"e6ff269c-1c7c-401f-a90b-b805e80a046e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2001",imageType:"image/jpeg"},{id:2787,name:"ortho_1967",metadata:{metadata_id:"9be42a5c-7a6f-46b5-8815-8adb17e6aff6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_1967",imageType:"image/jpeg"},{id:345,name:"topo_decoupage_ortho",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_ortho",imageType:"image/png"},{id:292,name:"wg_ikonos_satellitendaten",metadata:{legend_name:"wg:ikonos_satellitendaten",metadata_id:"db0eea79-114a-4e61-a1f2-7e064f92cdd3"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_ikonos_satellitendaten",imageType:"image/png"},{id:341,name:"aero_1951_10k",metadata:{is_queryable:!0,metadata_id:"16586649-8e46-4b04-b75c-5537a4bf214e"},dimensions:{},type:"WMS",layers:"aero_1951_10k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1951_10k__1951_10k"}]},{id:229,name:"aero_1951_25k",metadata:{is_queryable:!0,metadata_id:"b3b5fc05-323c-4f0b-804c-a4c186d62a96"},dimensions:{},type:"WMS",layers:"aero_1951_25k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1951_25k__1951_25k"}]},{id:140,name:"aero_1963_20k",metadata:{is_queryable:!0,metadata_id:"56b65f04-d3ab-45b6-9e93-95c8c9524c3e"},dimensions:{},type:"WMS",layers:"aero_1963_20k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1963_20k__1963_20k"}]},{id:665,name:"aero_1977_30k",metadata:{is_queryable:!0,metadata_id:"d9dd951e-7345-4ba2-9a76-ce54305edf2f"},dimensions:{},type:"WMS",layers:"aero_1977_30k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1977_30k__1977_30k"}]},{id:743,name:"aero_1987_30k",metadata:{is_queryable:!0,metadata_id:"98b63794-8cb1-42ff-9872-214f990ec8cd"},dimensions:{},type:"WMS",layers:"aero_1987_30k",imageType:"image/png",style:"defaults",childLayers:[{name:"aero_1987_30k__1987_30k"}]},{id:748,name:"aero_1994_30k",metadata:{is_queryable:!0,metadata_id:"abf7f6f5-8647-4317-98f6-8d4f5cd38585"},dimensions:{},type:"WMS",layers:"aero_1994_30k",imageType:"image/png",style:"defaults",childLayers:[{name:"aero_1994_30k__1994_30k"}]},{id:790,name:"Orthophotos Infrarouge",children:[{id:2835,name:"ortho2023_IR",metadata:{exclusion:'["exclusion_ortho2023IR","exclusion_ortho2023IR_bati"]',metadata_id:"3bb6099a-67f2-4243-b820-ffaeb03e439b"},dimensions:{},type:"WMS",layers:"ortho2023_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2023_IR__0"}]},{id:2595,name:"ortho2022_IR",metadata:{exclusion:'["exclusion_ortho2022IR","exclusion_ortho2022IR_bati"]',metadata_id:"c58ceaa0-d36d-4edf-ab68-ed1040bea10c"},dimensions:{},type:"WMS",layers:"ortho2022_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2022_IR__0"}]},{id:2283,name:"ortho2021_IR",metadata:{exclusion:"[122,222]",metadata_id:"067dc519-f507-45db-8e7a-f3ccc9125bc5"},dimensions:{},type:"WMS",layers:"ortho2021_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2021_IR__3"},{name:"ortho2021_IR__2"},{name:"ortho2021_IR__1"},{name:"ortho2021_IR__0"}]},{id:2089,name:"ortho2020_IR",metadata:{exclusion:"[120,220]",metadata_id:"134fb490-c022-476d-b484-dc652ae8c626"},dimensions:{},type:"WMS",layers:"ortho2020_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2020_IR__4"},{name:"ortho2020_IR__3"},{name:"ortho2020_IR__2"},{name:"ortho2020_IR__1"}]},{id:1785,name:"ortho2019_IR",metadata:{exclusion:"[117,217]",metadata_id:"3dfd031a-1721-4f35-b358-25062d5d4c26"},dimensions:{},type:"WMS",layers:"ortho2019_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2019_IR__9"},{name:"ortho2019_IR__8"},{name:"ortho2019_IR__7"},{name:"ortho2019_IR__6"}]},{id:1529,name:"ortho2018_IR",metadata:{exclusion:"[114,214]",metadata_id:"2edf6bcb-2a1c-4b8c-8488-56000133abb4"},dimensions:{},type:"WMS",layers:"ortho2018_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2018_IR__14"},{name:"ortho2018_IR__13"},{name:"ortho2018_IR__12"},{name:"ortho2018_IR__11"}]},{id:1372,name:"ortho_2017_irc",metadata:{exclusion:"[112,212]",metadata_id:"659a3236-a22e-44ae-9fa3-025cdf5d0043"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017_irc",imageType:"image/jpeg"},{id:793,name:"ortho_2016_irc",metadata:{exclusion:"[110,210]",is_queryable:!0,metadata_id:"c313da75-7d8b-4570-9db5-bb6add56309e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016_irc",imageType:"image/jpeg"},{id:792,name:"ortho_2013_irc",metadata:{exclusion:"[109,209]",is_queryable:!0,metadata_id:"649b34a1-a195-40b4-81c9-0100343b9661"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013_irc",imageType:"image/jpeg"},{id:791,name:"ortho_2010_irc",metadata:{exclusion:"[108,208]",is_queryable:!0,metadata_id:"728ffc2a-9062-4822-8596-01f0e93f6b40"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010_irc",imageType:"image/jpeg"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:161,name:"env_obs",children:[{id:1963,name:"env_couverture_sol",children:[{id:1951,name:"LISL_Landcover_2018",metadata:{is_queryable:!0,legend_name:"lisl:lc2018",metadata_id:"6142a6a6-9356-47ac-babe-eaa2ae3628b6"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2018__0"},{name:"LISL_Landcover_2018__1"}]},{id:1950,name:"LISL_Landcover_2015_v2",metadata:{is_queryable:!0,legend_name:"lisl:lc2015_2",metadata_id:"67f4ecb8-5d4b-4a9e-a60b-239fc92b25a7"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2015_v2",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2015_v2__0"},{name:"LISL_Landcover_2015_v2__1"}]},{id:2714,name:"LISL_Landcover_2021",metadata:{is_queryable:!0,legend_name:"lisl:lc2018",metadata_id:"e7afeac8-c649-4c91-ab15-ea40b8986ebc"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2021",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2021__0"},{name:"LISL_Landcover_2021__4"}]}],metadata:{},mixed:!0},{id:1964,name:"env_utilisation_sol",children:[{id:1970,name:"LISL_Landuse_2018",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2018",metadata_id:"e4572e0b-1b40-4834-b6c3-ccab83f75f57"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2018__0"}]},{id:2054,name:"LISL_Landuse_2015_v3",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2015_v3",metadata_id:"65e04718-1890-4c5e-8be7-08a73f69c0cc"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2015_v3",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2015_v3__0"}]},{id:1969,name:"LISL_Landuse_2007",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2007",metadata_id:"257556b9-560b-4193-b773-e16a9137a690"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2007",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2007__0"}]}],metadata:{},mixed:!0},{id:1965,name:"env_impermeabilisation",children:[{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]},{id:2216,name:"at_impermeabilisation_grid_2018_100m",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_100m",metadata_id:"210db74a-e33a-401b-9e17-2cd966cdcd1f"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_100m",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_100m__0"}]},{id:2215,name:"at_impermeabilisation_grid_2018_1km",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_1km",metadata_id:"8dc777d0-f910-4c69-a476-85a73dcd8474"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_1km",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_1km__0"}]}],metadata:{},mixed:!0},{id:2212,name:"at_batiments_group",children:[{id:2214,name:"at_batiments_periode_construction",metadata:{is_queryable:!0,legend_name:"at:periode_construction_batiments",metadata_id:"7c138282-86de-4adb-91c2-467b06786821"},dimensions:{},type:"WMS",layers:"at_batiments_periode_construction",imageType:"image/png",style:"default",childLayers:[{name:"at_batiments_periode_construction__0"}]}],metadata:{},mixed:!0},{id:1966,name:"env_occupation_biophysique",children:[{id:215,name:"env_obs2007",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"bd672300-0851-4901-82c4-6099aff1fcf7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_obs2007",imageType:"image/png"},{id:163,name:"env_obs1999",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"b4836d86-2803-4dcf-a991-7e78ab9c41b6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_obs1999",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:416,name:"map_morphometrie",children:[{id:415,name:"wg_hohenlinien_10m_map",metadata:{is_queryable:!0,legend_name:"wg:hohenlinien_10m",metadata_id:"012801f3-5d2b-4ab7-ae58-1da1b3256390"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_hohenlinien_10m_map",imageType:"image/png"},{id:2311,name:"act_hillshade_2019",metadata:{is_queryable:!0,metadata_id:"8171b99e-df8b-4cf0-af36-f77c222e1690"},dimensions:{},type:"WMS",layers:"act_hillshade_2019",imageType:"image/png",style:"default",childLayers:[{name:"act_hillshade_2019__3"}]},{id:1461,name:"wg_hangneigung_map",metadata:{legend_name:"wg:hangneigung",metadata_id:"6ffa94a4-af02-43ec-82e0-6796cd01a948"},dimensions:{},type:"WMS",layers:"wg_hangneigung_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_hangneigung_map__0"}]},{id:1462,name:"wg_exposition_map",metadata:{legend_name:"wg:exposition",metadata_id:"7a42e4c5-6f3c-45ea-a909-3f8f28874fde"},dimensions:{},type:"WMS",layers:"wg_exposition_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_exposition_map__0"}]},{id:1460,name:"wg_relief_map",metadata:{metadata_id:"7d195815-23c2-4963-863c-60e3a39ab8af"},dimensions:{},type:"WMS",layers:"wg_relief_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_relief_map__0"}]}],metadata:{},mixed:!0},{id:1380,name:"lidar_group",children:[{id:1792,name:"act_lidar_2019_group",children:[{id:1753,name:"lidar_2019_mns",metadata:{legend_name:"lidar:mns2019",metadata_id:"d7bd80d7-23de-462f-bd3e-6bd863e1fc1d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mns",imageType:"image/png"},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"},{id:2188,name:"act_mnt_2019_coloration_alternative_Lux",metadata:{is_queryable:!0,metadata_id:"faf3a8e8-6f3a-424a-9bee-945e99d544dd"},dimensions:{},type:"WMS",layers:"act_mnt_2019_coloration_alternative_Lux",imageType:"image/png",style:"default",childLayers:[{name:"act_mnt_2019_coloration_alternative_Lux__0"}]},{id:2187,name:"act_mnt2017_GR",metadata:{is_queryable:!0,metadata_id:"b5bad4e6-b6cf-45f4-a543-da619b07f567"},dimensions:{},type:"WMS",layers:"act_mnt2017_GR",imageType:"image/png",style:"default",childLayers:[{name:"act_mnt2017_GR__1"}]},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1788,name:"lidar_tiles_2019",metadata:{is_queryable:!0,metadata_id:"b19a500a-b8d5-4a87-a8f3-00f58c3dffcd",start_opacity:.7},dimensions:{},type:"WMS",layers:"lidar_tiles_2019",imageType:"image/png",style:"default",childLayers:[{name:"lidar_tiles_2019__3"},{name:"lidar_tiles_2019__2"}]}],metadata:{},mixed:!0},{id:1791,name:"act_lidar_2017_group",children:[{id:1377,name:"lidar_mns",metadata:{legend_name:"lidar:mns2017",metadata_id:"e7184a37-7a6a-4e07-ae8d-ff06d9969da0"},dimensions:{},type:"WMS",layers:"lidar_mns",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mns__0"}]},{id:1378,name:"lidar_mnt",metadata:{legend_name:"lidar:mnt2017",metadata_id:"1adab94e-d80a-4e19-a808-28f52f633186"},dimensions:{},type:"WMS",layers:"lidar_mnt",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mnt__0"}]},{id:1463,name:"lidar_mnh",metadata:{legend_name:"lidar:mnh",metadata_id:"5f189f5b-08f9-4abc-b3f0-78c37ddf0db1"},dimensions:{},type:"WMS",layers:"lidar_mnh",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mnh__0"}]},{id:1787,name:"lidar_tiles_2017",metadata:{is_queryable:!0,metadata_id:"3c565aff-7394-4d51-915c-0e06dde7765a",start_opacity:.7},dimensions:{},type:"WMS",layers:"lidar_tiles_2017",imageType:"image/png",style:"default",childLayers:[{name:"lidar_tiles_2017__1"},{name:"lidar_tiles_2017__0"}]}],metadata:{},mixed:!0},{id:2470,name:"act_lidar_derivates",children:[{id:2401,name:"act_ponts",metadata:{is_queryable:!0,metadata_id:"2b7d36db-987f-49b4-96d7-60e934ddf926"},dimensions:{},type:"WMS",layers:"act_ponts",imageType:"image/png",childLayers:[{name:"act_ponts__0"},{name:"act_ponts__1"},{name:"act_ponts__2"}]},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"},{id:1753,name:"lidar_2019_mns",metadata:{legend_name:"lidar:mns2019",metadata_id:"d7bd80d7-23de-462f-bd3e-6bd863e1fc1d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mns",imageType:"image/png"},{id:2311,name:"act_hillshade_2019",metadata:{is_queryable:!0,metadata_id:"8171b99e-df8b-4cf0-af36-f77c222e1690"},dimensions:{},type:"WMS",layers:"act_hillshade_2019",imageType:"image/png",style:"default",childLayers:[{name:"act_hillshade_2019__3"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:484,name:"eau_new_Hydrografie",children:[{id:450,name:"eau_new_Gewaessernetz",children:[{id:749,name:"eau_new_Gewsser",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewsser__23"},{name:"eau_new_Gewsser__24"},{name:"eau_new_Gewsser__25"}]},{id:651,name:"eau_new_Kanal_-__Muehlgraben",metadata:{is_queryable:!0,legend_name:"eau:kanal_-__muehlgraben",max_dpi:128,metadata_id:"909501fc-a0a9-4af8-8e82-f2a8d7f2fe2f"},dimensions:{},type:"WMS",layers:"eau_new_Kanal_-__Muehlgraben",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kanal_-__Muehlgraben__26"}]},{id:750,name:"eau_new_Kilometrierung der Gewsser",metadata:{legend_name:"eau:kilometrierung_primaere_gewaesser_kilometrierung_sekundaere_gewaesser",metadata_id:"4002b1cf-08b5-421a-bc92-40271d62f03c"},dimensions:{},type:"WMS",layers:"eau_new_Kilometrierung der Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kilometrierung der Gewsser__27"},{name:"eau_new_Kilometrierung der Gewsser__28"}]},{id:636,name:"eau_new_Einzugsgebiete",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.8156287",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb010cc765e17f1820811",is_queryable:!0,legend_name:"eau:einzugsgebiete",max_dpi:128,metadata_id:"a295a30a-f819-400c-842c-d0ccc695bea5"},dimensions:{},type:"WMS",layers:"eau_new_Einzugsgebiete",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einzugsgebiete__29"}]},{id:569,name:"eau_new_Stausee_Sauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:09.6659471",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece210cc765e1a2422811f",is_queryable:!0,legend_name:"eau:stausee_sauer",max_dpi:128,metadata_id:"119ad2e3-b44f-4777-883d-d2d522bafeca"},dimensions:{},type:"WMS",layers:"eau_new_Stausee_Sauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Stausee_Sauer__30"}]}],metadata:{},mixed:!0},{id:451,name:"eau_new_Fischerei",children:[{id:626,name:"eau_new_Fischereiabschnitte",metadata:{geocatalog_open_data_last_update_date:"2024-09-11T01:02:43.2828183",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecb079111e9b02db9a6ece",is_queryable:!0,legend_name:"eau:fischereiabschnitte",max_dpi:128,metadata_id:"bd6be85a-cec4-4e4d-9657-cffa242db28f"},dimensions:{},type:"WMS",layers:"eau_new_Fischereiabschnitte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fischereiabschnitte__37"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:187,name:"unwelt_biologie_geologie",children:[{id:338,name:"lebensraume_une_biotope",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:335,name:"weinbau",children:[{id:297,name:"ivv_flik_parcels",metadata:{is_queryable:!0,metadata_id:"884ed54c-3b36-417e-b44b-ed7f3283302c"},dimensions:{},type:"WMS",layers:"ivv_flik_parcels",imageType:"image/png",style:"default",childLayers:[{name:"ivv_flik_parcels__0"}]},{id:510,name:"ivv_parcels",metadata:{is_queryable:!0,metadata_id:"7d372c69-4144-43bf-9622-70dcdc7bbf0b"},dimensions:{},type:"WMS",layers:"ivv_parcels",imageType:"image/png",style:"default",childLayers:[{name:"ivv_parcels__0"}]},{id:175,name:"ivv_grosslagen",metadata:{is_queryable:!0,metadata_id:"89274b7e-4742-4673-b254-9105a4a066b7",start_opacity:.5},dimensions:{},type:"WMS",layers:"ivv_grosslagen",imageType:"image/png",style:"default",childLayers:[{name:"ivv_grosslagen__lagen"},{name:"ivv_grosslagen__lagen_labels"}]},{id:240,name:"ivv_kleinlagen",metadata:{is_queryable:!0,metadata_id:"a040071a-3a72-4d69-93e0-c06d4d4c3bd1"},dimensions:{},type:"WMS",layers:"ivv_kleinlagen",imageType:"image/png",style:"default",childLayers:[{name:"ivv_kleinlagen__0"}]},{id:221,name:"ivv_klimakarte",metadata:{is_queryable:!0,legend_name:"ivv_klimakarte",metadata_id:"6d989c64-998c-499f-a196-1032e9470666",start_opacity:.5},dimensions:{},type:"WMS",layers:"ivv_klimakarte",imageType:"image/png",style:"default",childLayers:[{name:"ivv_klimakarte__klimakarte"}]},{id:2799,name:"IVV_MonESCA",children:[{id:2800,name:"IVV_MonESCA_Bonitur",children:[{id:2798,name:"ivv_bonitur_remich_2019",metadata:{metadata_id:"ece93d8a-df79-434f-a8af-6ba2e6e2b90e"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2019",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2019__18"}]},{id:2801,name:"ivv_bonitur_remich_2020",metadata:{metadata_id:"99601a0c-3820-4f1c-93d8-4c2fac3634cd"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2020",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2020__19"}]},{id:2802,name:"ivv_bonitur_remich_2021",metadata:{metadata_id:"4cdd8990-d1e3-462f-9f86-fa2bb58c791c"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2021",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2021__20"}]},{id:2803,name:"ivv_bonitur_remich_2022",metadata:{metadata_id:"331fb74f-2bb9-4510-8a1d-c69271987b81"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2022",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2022__21"}]},{id:2804,name:"ivv_bonitur_remich_2023",metadata:{metadata_id:"6a29aa9f-753b-40c0-9af8-db3b319c5e26"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2023",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2023__22"}]}],metadata:{},mixed:!0},{id:2807,name:"IVV_MonESCA_Stress_Index",children:[{id:2805,name:"ivv_cwsi_remich_2023",metadata:{metadata_id:"bb0ac384-71f8-4aca-ab1f-3c99beeec690"},dimensions:{},type:"WMS",layers:"ivv_cwsi_remich_2023",imageType:"image/png",style:"default",childLayers:[{name:"ivv_cwsi_remich_2023__7"}]},{id:2806,name:"ivv_tir_remich_2023",metadata:{metadata_id:"95663e4b-2802-4862-b611-9b338df9bc41"},dimensions:{},type:"WMS",layers:"ivv_tir_remich_2023",imageType:"image/png",style:"default",childLayers:[{name:"ivv_tir_remich_2023__8"}]}],metadata:{},mixed:!0},{id:2808,name:"IVV_MonESCA_NDVI",children:[{id:2814,name:"ivv_ndvi_2019_09_03",metadata:{metadata_id:"7b33e77b-3d60-41cd-98af-92c1e28973fa"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2019_09_03",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2019_09_03__10"}]},{id:2815,name:"ivv_ndvi_2020_07_30",metadata:{metadata_id:"0f5b69ec-5d97-470a-8992-4e5654939208"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2020_07_30",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2020_07_30__11"}]},{id:2816,name:"ivv_ndvi_2020_09_08",metadata:{metadata_id:"cde967b0-724d-46b9-a13a-05fe890d394a"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2020_09_08",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2020_09_08__12"}]},{id:2817,name:"ivv_ndvi_2021_09_13",metadata:{metadata_id:"e58a2ef8-0c13-4203-b4d8-835f04a07401"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2021_09_13",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2021_09_13__13"}]},{id:2818,name:"ivv_ndvi_2022_08_29",metadata:{metadata_id:"80c0415d-f233-4111-846f-b11b6c3f31ed"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2022_08_29",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2022_08_29__14"}]},{id:2819,name:"ivv_ndvi_2023_08_22",metadata:{metadata_id:"7e1866c7-def5-4874-a5ad-71cd69c8e970"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2023_08_22",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2023_08_22__15"}]},{id:2820,name:"ivv_ndvi_2023_08_23",metadata:{metadata_id:"7925907a-08ce-48ed-bb84-5b3cb6bfe5b5"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2023_08_23",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2023_08_23__16"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:233,name:"geologie_",children:[{id:2167,name:"geo_carte_geol_harmonisee",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee",metadata_id:"542a0caa-4b33-4019-8ce7-b8541b436106"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee__6"},{name:"geo_carte_geol_harmonisee__1"},{name:"geo_carte_geol_harmonisee__2"},{name:"geo_carte_geol_harmonisee__3"}]},{id:2168,name:"geo_carte_geol_harmonisee_decouverte",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee_decouverte",metadata_id:"d03be720-e33c-4bd4-8829-559dc951dc2d"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee_decouverte",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee_decouverte__5"},{name:"geo_carte_geol_harmonisee_decouverte__1"},{name:"geo_carte_geol_harmonisee_decouverte__2"},{name:"geo_carte_geol_harmonisee_decouverte__3"}]},{id:2169,name:"geo_carte_geol_simplifiee",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee",metadata_id:"d5235bf1-96c8-4fc8-8d6d-2a0cde246aad"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee__2"},{name:"geo_carte_geol_simplifiee__1"},{name:"geo_carte_geol_simplifiee__0"}]},{id:2170,name:"geo_carte_geol_simplifiee_decouverte",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee_decouverte",metadata_id:"d8d627ee-ec11-4054-8a05-f4cd98adbd72"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee_decouverte",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee_decouverte__0"},{name:"geo_carte_geol_simplifiee_decouverte__2"}]},{id:2173,name:"geo_coupes_geologiques",metadata:{is_queryable:!0,legend_name:"geol:coupes_geologiques",metadata_id:"8a35490a-8dc8-4dfd-9136-edfdd6d08281"},dimensions:{},type:"WMS",layers:"geo_coupes_geologiques",imageType:"image/png",style:"default",childLayers:[{name:"geo_coupes_geologiques__0"}]},{id:2175,name:"geo_epaisseurs_unites",metadata:{is_queryable:!0,legend_name:"geol:epaisseurs_unites",metadata_id:"3fab8010-2f8b-43e2-96a7-155a24233db4"},dimensions:{},type:"WMS",layers:"geo_epaisseurs_unites",imageType:"image/png",style:"default",childLayers:[{name:"geo_epaisseurs_unites__0"}]},{id:2266,name:"forages_grand_public_group",children:[{id:2176,name:"geo_forages_ref",metadata:{is_queryable:!0,legend_name:"geol:forages_ref",metadata_id:"0564eda7-c92d-4a80-b3c7-be94f5d67186"},dimensions:{},type:"WMS",layers:"geo_forages_ref",imageType:"image/png",style:"default",childLayers:[{name:"geo_forages_ref__0"}]},{id:2265,name:"eau_new_Bohrungen_grand_public",metadata:{is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen_grand_public",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen_grand_public__39"}]}],metadata:{},mixed:!0},{id:2267,name:"eaux_souterraines_grand_public_group",children:[{id:631,name:"eau_new_Grundwasserleiter",metadata:{geocatalog_open_data_last_update_date:"2024-06-03T01:02:35.1743465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecafe1cc765e18ae5ed87e",is_queryable:!0,legend_name:"eau:grundwasserleiter",max_dpi:128,metadata_id:"783a8608-e4b3-44ed-8864-68525da33760"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserleiter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserleiter__41"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]}],metadata:{},mixed:!0},{id:2191,name:"geo_geomorphologie_carte100K",metadata:{is_queryable:!0,legend_name:"geol:geomorphologie100k",metadata_id:"3fd5088b-021d-4207-9d4b-4040e1ccfe22"},dimensions:{},type:"WMS",layers:"geo_geomorphologie_carte100K",imageType:"image/png",style:"default",childLayers:[{name:"geo_geomorphologie_carte100K__0"}]}],metadata:{},mixed:!0},{id:321,name:"pedologie",children:[{id:272,name:"pedologie_100k",metadata:{legend_name:"pedologie",metadata_id:"2d712a34-ce79-426d-a57b-b7cadf97b80f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"pedologie_100k",imageType:"image/png"},{id:702,name:"asta_pedologie_new",metadata:{legend_name:"pedologie_new",max_dpi:128,metadata_id:"37686d89-0173-4040-88c7-be84a3648d01"},dimensions:{},type:"WMS",layers:"asta_pedologie_new",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_new__9"},{name:"asta_pedologie_new__10"},{name:"asta_pedologie_new__11"},{name:"asta_pedologie_new__12"},{name:"asta_pedologie_new__13"},{name:"asta_pedologie_new__14"},{name:"asta_pedologie_new__15"}]},{id:704,name:"asta_pedologie_humus",metadata:{legend_name:"asta_corg",max_dpi:128,metadata_id:"a1b0807c-9bff-4f6a-a5e7-130316742f56"},dimensions:{},type:"WMS",layers:"asta_pedologie_humus",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_humus__0"}]},{id:703,name:"asta_pedologie_ph",metadata:{legend_name:"asta_ph",max_dpi:128,metadata_id:"628ee73f-4c37-4689-bc4c-1fd9f6bd2663"},dimensions:{},type:"WMS",layers:"asta_pedologie_ph",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_ph__0"}]},{id:2408,name:"asta_erosion_group",children:[{id:2760,name:"asta_rigoles_erosion_enquete",metadata:{is_queryable:!0,metadata_id:"00c1398d-604f-4e1b-9abd-af05261d80ba"},dimensions:{},type:"WMS",layers:"asta_rigoles_erosion_enquete",imageType:"image/png",childLayers:[{name:"asta_rigoles_erosion_enquete__2"}]},{id:2407,name:"asta_erosion_2023",metadata:{is_queryable:!0,metadata_id:"427aff9b-b988-455c-8cd9-1c029cfd6b6e",start_opacity:.25},dimensions:{},type:"WMS",layers:"asta_erosion_2023",imageType:"image/png",childLayers:[{name:"asta_erosion_2023__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:486,name:"eau_new_Hochwasserrisikomanagement-Richtlinie [HWRM-RL]",children:[{id:1696,name:"eau_new_Risikogewaesser_2019_group",children:[{id:1703,name:"eau_Risikogewaesser_2019",metadata:{is_queryable:!0,legend_name:"eau:risikogewaesser_2019",metadata_id:"762cd956-9733-4855-afa7-38768a38e8a1"},dimensions:{},type:"WMS",layers:"eau_Risikogewaesser_2019",imageType:"image/png",style:"default",childLayers:[{name:"eau_Risikogewaesser_2019__16"}]}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:1711,name:"eau_atlas_crues_subites",children:[{id:2045,name:"age_dangers_fortes",metadata:{legend_name:"age_dangers_fortes",metadata_id:"55dbe91c-f1e5-4c56-b0b9-4590988e23e5"},dimensions:{},type:"WMS",layers:"age_dangers_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_dangers_fortes__0"},{name:"age_dangers_fortes__1"}]},{id:2046,name:"age_risques_fortes",metadata:{legend_name:"age_risques_fortes",metadata_id:"f1d9b1cd-ad78-44df-89ac-ad591138243f"},dimensions:{},type:"WMS",layers:"age_risques_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_risques_fortes__1"},{name:"age_risques_fortes__2"},{name:"age_risques_fortes__3"},{name:"age_risques_fortes__4"},{name:"age_risques_fortes__5"}]}],metadata:{},mixed:!0},{id:461,name:"eau_new_Historische_Ueberschwemmungsgebiete",children:[{id:637,name:"eau_new_UESG_1983_-_Mosel",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.2797021",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde16111e9b03b03833be",is_queryable:!0,legend_name:"eau:uesg_1983_-_mosel",max_dpi:128,metadata_id:"e6896207-c0f9-417e-9661-119128628e8e"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1983_-_Mosel",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1983_-_Mosel__122"}]},{id:641,name:"eau_new_UESG_1993_(ausser_Mosel)",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:25.7826569",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde1e111e9b03b03833bf",is_queryable:!0,legend_name:"eau:uesg_1993_ausser_mosel",max_dpi:128,metadata_id:"78c692f3-ad20-467b-b03a-0d020a821647"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1993_(ausser_Mosel)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1993_(ausser_Mosel)__123"}]},{id:642,name:"eau_new_UESG_Alzette_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.5894792",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde26111e9b03b03833c0",is_queryable:!0,legend_name:"eau:uesg_alzette_1995",max_dpi:128,metadata_id:"aaf81780-df85-4580-a890-fded8ae03db7"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Alzette_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Alzette_1995__124"}]},{id:633,name:"eau_new_UESG_Sauer_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.4493603",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde30111e9b03b222c3b5",is_queryable:!0,legend_name:"eau:uesg_sauer_1995",max_dpi:128,metadata_id:"f01f7be2-0423-4571-8fff-57dd617ae632"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Sauer_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Sauer_1995__125"}]},{id:2116,name:"eau_Hochwasserkarten_2021",children:[{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:463,name:"eau_new_Zusaetzliche_Informationen",children:[{id:756,name:"eau_new_Hochwasser Brennpunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.8729061",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"5fd1cadde9996e5faf62ea6f",is_queryable:!0,legend_name:"eau:hochwasser_brennpunkte",metadata_id:"b2bfd06d-5f05-4abf-8f41-103d40a380e7"},dimensions:{},type:"WMS",layers:"eau_new_Hochwasser Brennpunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hochwasser Brennpunkte__309"}]},{id:758,name:"eau_new_Manahmens des Hochwasserrisikomanagementplans",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:03:13.4638796",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"66e4e0d15a1785364d6db3fb",is_queryable:!0,legend_name:"eau:massnahmens_des_hochwasserrisikomanagementplans",metadata_id:"4326fea6-7ec4-4bb9-861f-4476b0d4ceac"},dimensions:{},type:"WMS",layers:"eau_new_Manahmens des Hochwasserrisikomanagementplans",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Manahmens des Hochwasserrisikomanagementplans__314"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:373,name:"eau_new_Trinkwasser_Schutzzonen_(ZPS)",children:[{id:214,name:"eau_new_Provisorische_ZPS",metadata:{geocatalog_open_data_last_update_date:"2024-10-03T01:04:17.082383",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece254111e9b03b03833c4",is_queryable:!0,legend_name:"eau:provisorische_zps",max_dpi:128,metadata_id:"ddc51f25-2fb7-4d14-866a-a08f8af8ef03"},dimensions:{},type:"WMS",layers:"eau_new_Provisorische_ZPS",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Provisorische_ZPS__130"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:1464,name:"eau_prgd_zones_protection_lac",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.5407176",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5b571c9546f3b55625dc355c",is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_prgd_zones_protection_lac__349"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]},{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]}],metadata:{},mixed:!0},{id:469,name:"eau_new_Schutzgebiete",children:[{id:656,name:"eau_new_Badegewaesser",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecaff2cc765e18ae5ed87f",is_queryable:!0,legend_name:"eau:badegewaesser",max_dpi:128,metadata_id:"72f770ee-7290-4ecb-9358-580b7cfcadf7"},dimensions:{},type:"WMS",layers:"eau_new_Badegewaesser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Badegewaesser__135"}]},{id:581,name:"eau_new_Badegewaesser_-_Qualitaet",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece261cc765e1a24228120",is_queryable:!0,legend_name:"eau:badegewaesser_-_qualitaet",max_dpi:128,metadata_id:"c0c9c705-8b26-4a0b-b9bb-e2243cd5386a"},dimensions:{},type:"WMS",layers:"eau_new_Badegewaesser_-_Qualitaet",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Badegewaesser_-_Qualitaet__136"}]},{id:612,name:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_uuid:"57ece27bcc765e1a270cf61d",is_queryable:!0,legend_name:"eau:empfindliche_gebiete_kommunalabwasserrichtlinie",max_dpi:128,metadata_id:"39952e6c-8e73-4a23-a19c-78c4f06c84d9"},dimensions:{},type:"WMS",layers:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)__139"}]},{id:492,name:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)",metadata:{geocatalog_open_data_last_update_date:"2024-09-04T01:02:59.0520396",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66d7b1c287ac9208bf4692e9",is_queryable:!0,legend_name:"eau:gefaehrdete_gebiete_nitratrichtlinie",max_dpi:128,metadata_id:"9426a9a6-7cb1-4c1a-a504-40dabc4429c0"},dimensions:{},type:"WMS",layers:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)__140"}]}],metadata:{},mixed:!0},{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:470,name:"eau_new_Gewaesserschutz",children:[{id:643,name:"eau_new_Abwassersyndikate",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.7305149",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece2dd111e9b03b03833c5",is_queryable:!0,legend_name:"eau:abwassersyndikate",max_dpi:128,metadata_id:"4b5e384c-5603-4cf4-9bd5-6e520df5c375"},dimensions:{},type:"WMS",layers:"eau_new_Abwassersyndikate",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Abwassersyndikate__143"}]},{id:645,name:"eau_new_Klaeranlagen",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.116702",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece288cc765e1a25470f74",is_queryable:!0,legend_name:"eau:klaeranlagen",max_dpi:128,metadata_id:"53e55765-90eb-438f-a744-3ac878b06334"},dimensions:{},type:"WMS",layers:"eau_new_Klaeranlagen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Klaeranlagen__142"}]}],metadata:{},mixed:!0},{id:474,name:"eau_new_Wasserrahmenrichtlinie",children:[{id:1469,name:"eau_strahlwirkungskonzept",metadata:{is_queryable:!0,legend_name:"eau:strahlwirkungskonzept",metadata_id:"e1744b8e-101e-406d-b742-776d488a00b5"},dimensions:{},type:"WMS",layers:"eau_strahlwirkungskonzept",imageType:"image/png",style:"default",childLayers:[{name:"eau_strahlwirkungskonzept__351"},{name:"eau_strahlwirkungskonzept__352"}]},{id:475,name:"eau_new_Bewirtschaftungsplan_2009",children:[{id:644,name:"eau_new_Betrachtungsraeume_2009",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2009",max_dpi:128,metadata_id:"be15dd7d-df57-44e1-b724-0929cf05eef9"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2009__146"}]},{id:607,name:"eau_new_Typologie_Oberflaechengewasser_2009",metadata:{is_queryable:!0,legend_name:"eau:typologie_oberflaechengewasser_2009",max_dpi:128,metadata_id:"0d1d73f0-7644-4217-a0df-b6c497508592"},dimensions:{},type:"WMS",layers:"eau_new_Typologie_Oberflaechengewasser_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Typologie_Oberflaechengewasser_2009__147"}]},{id:601,name:"eau_new_Oberflaechenwasserkoerper_2009",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2009",max_dpi:128,metadata_id:"404cf7b4-f70b-4c2c-a44b-89e297fab0f8"},dimensions:{},type:"WMS",layers:"eau_new_Oberflaechenwasserkoerper_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflaechenwasserkoerper_2009__148"}]},{id:634,name:"eau_new_Erheblich vernderte Wasserkrper 2009",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_owk_2009",max_dpi:128,metadata_id:"78da31c2-55eb-40c9-99fe-22ff409468c2"},dimensions:{},type:"WMS",layers:"eau_new_Erheblich vernderte Wasserkrper 2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erheblich vernderte Wasserkrper 2009__149"}]},{id:603,name:"eau_new_Grundwasserkoerper_2009",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2009",max_dpi:128,metadata_id:"f23ca424-ec87-4c53-929c-7e627a8e06af"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserkoerper_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserkoerper_2009__151"}]},{id:468,name:"eau_new_Zustand_der_Wasserkoerper_(WK)_2009",children:[{id:464,name:"eau_new_Oberflaechengewaesser_2009",children:[{id:585,name:"eau_new_Gesamtzustand_2009",metadata:{is_queryable:!0,legend_name:"eau:gesamtzustand_2009",max_dpi:128,metadata_id:"44862c13-7006-44a4-99e6-2877ea512714"},dimensions:{},type:"WMS",layers:"eau_new_Gesamtzustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gesamtzustand_2009__154"}]},{id:586,name:"eau_new_Chemischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2009",max_dpi:128,metadata_id:"d934fbcc-02c6-47fa-a23d-cfbe49214709"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_2009__155"}]},{id:614,name:"eau_new_Oekologischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:oekologischer_zustand_2009",max_dpi:128,metadata_id:"92d28c19-ed51-4e9e-8a80-831144fe3553"},dimensions:{},type:"WMS",layers:"eau_new_Oekologischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oekologischer_Zustand_2009__156"}]},{id:593,name:"eau_new_Hydromorphologischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologischer_zustand_2009",max_dpi:128,metadata_id:"0227e64f-11ef-4f0a-8853-48fd7385f2b1"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologischer_Zustand_2009__157"}]}],metadata:{},mixed:!0},{id:435,name:"eau_new_Grundwasser_2009",children:[{id:657,name:"eau_new_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_wk_2009",max_dpi:128,metadata_id:"2df25c38-15d5-447f-a269-4184ce781050"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_WK_2009__159"}]},{id:605,name:"eau_new_Quantitativer_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_wk_2009",max_dpi:128,metadata_id:"a9ebce38-6c8b-447e-9d22-46ba333fa63c"},dimensions:{},type:"WMS",layers:"eau_new_Quantitativer_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quantitativer_Zustand_der_WK_2009__160"}]},{id:441,name:"eau_new_Chemischer_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_wk_2009",max_dpi:128,metadata_id:"e9a72fec-29a0-4183-9e3a-6d4f49c9fea7"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_der_WK_2009__161"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:480,name:"eau_new_Bewirtschaftungsplan_2015",children:[{id:536,name:"eau_new_Oberflaechenwasserkoerper_2015",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2015",max_dpi:128,metadata_id:"ead261ed-7be1-4435-9cf5-d1527a18bd19"},dimensions:{},type:"WMS",layers:"eau_new_Oberflaechenwasserkoerper_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflaechenwasserkoerper_2015__165"}]},{id:658,name:"eau_new_Erheblich vernderte Wasserkrper 2015",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_wk_2015",max_dpi:128,metadata_id:"78da31c2-55eb-40c9-99fe-22ff409468c2"},dimensions:{},type:"WMS",layers:"eau_new_Erheblich vernderte Wasserkrper 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erheblich vernderte Wasserkrper 2015__166"}]},{id:619,name:"eau_new_Betrachtungsraeume_2015",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2015",max_dpi:128,metadata_id:"be15dd7d-df57-44e1-b724-0929cf05eef9"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2015__163"}]},{id:588,name:"eau_new_Typologie_Gewaesser_2015",metadata:{is_queryable:!0,legend_name:"eau:typologie_gewaesser_2015",max_dpi:128,metadata_id:"c7eea236-ad59-47fc-8c02-630fee3292dc"},dimensions:{},type:"WMS",layers:"eau_new_Typologie_Gewaesser_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Typologie_Gewaesser_2015__164"}]},{id:1470,name:"eau_fliessgewaessertypen_2015",metadata:{is_queryable:!0,legend_name:"eau:fliessgewaessertypen_2015_lawa",metadata_id:"79f4588f-a264-4921-a382-d1f83cf48da3"},dimensions:{},type:"WMS",layers:"eau_fliessgewaessertypen_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_fliessgewaessertypen_2015__354"}]},{id:759,name:"eau_new_Strukturgtekartierung 2015 [7-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2015_7-stufige_bewertung",metadata_id:"dd28de7b-6182-4054-89a6-dd92b80b565f"},dimensions:{},type:"WMS",layers:"eau_new_Strukturgtekartierung 2015 [7-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Strukturgtekartierung 2015 [7-stufige Bewertung]__315"}]},{id:760,name:"eau_new_Strukturgtekartierung 2015 [5-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2015_5-stufige_bewertung",metadata_id:"ff70c904-a6b9-4989-88c0-8359ff52e57e"},dimensions:{},type:"WMS",layers:"eau_new_Strukturgtekartierung 2015 [5-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Strukturgtekartierung 2015 [5-stufige Bewertung]__316"}]},{id:761,name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:5-band_sohle_7-stufige_bewertung_5-band_ufer_links_7-stufige_bewertung_5-band_ufer_rechts_7-stufige_bewertung_5-band_umfeld_links_7-stufige_bewertung_5-band_umfeld_rechts_7-stufige_bewertung",metadata_id:"429d3552-5f72-4be6-9c03-95c76f0a6c07"},dimensions:{},type:"WMS",layers:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__336"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__337"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__338"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__339"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__340"}]},{id:763,name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:5-band_sohle_5-stufige_bewertung_5-band_ufer_links_5-stufige_bewertung_5-band_ufer_rechts_5-stufige_bewertung_5-band_umfeld_links_5-stufige_bewertung_5-band_umfeld_rechts_5-stufige_bewertung",metadata_id:"4c64f3a4-627f-4aa7-9e0c-d3ad003d9afe"},dimensions:{},type:"WMS",layers:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__342"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__343"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__344"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__345"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__346"}]},{id:785,name:"eau_new_WRRL und HWRM-RL Massnahmen",metadata:{is_queryable:!0,legend_name:"eau:wrrl_und_hwrm-rl_-_massnahmen",metadata_id:"9a339e4e-eb04-42a0-ac0d-5a5f354c9548"},dimensions:{},type:"WMS",layers:"eau_new_WRRL und HWRM-RL Massnahmen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL und HWRM-RL Massnahmen__347"}]},{id:1471,name:"eau_detailliertes_massnahmenprogramm_sww",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_sww",metadata_id:"5b9d1544-da64-4a58-b519-9a03e5491e07"},dimensions:{},type:"WMS",layers:"eau_detailliertes_massnahmenprogramm_sww",imageType:"image/png",style:"default",childLayers:[{name:"eau_detailliertes_massnahmenprogramm_sww__355"}]},{id:659,name:"eau_new_Grundwasserkoerper_2015",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2015",max_dpi:128,metadata_id:"bb5f17b7-ddac-46cc-a59d-25f82d422b5b"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserkoerper_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserkoerper_2015__168"}]},{id:476,name:"eau_new_Zustand_der_Wasserkoerper_(WK)_2015",children:[{id:479,name:"eau_new_Oberflaechengewaesser_2015",children:[{id:622,name:"eau_new_Oekologischer_Zustand_2015",metadata:{is_queryable:!0,legend_name:"eau:oekologischer_zustand_2015",max_dpi:128,metadata_id:"5b78d0a5-1984-4efc-9e7d-0cb9d7ca829d"},dimensions:{},type:"WMS",layers:"eau_new_Oekologischer_Zustand_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oekologischer_Zustand_2015__173"}]},{id:663,name:"eau_new_Gesamtzustand_2015",metadata:{is_queryable:!0,legend_name:"eau:gesamtzustand_2015",max_dpi:128,metadata_id:"bea7140f-b938-4494-ac14-a2252a1d0fcb"},dimensions:{},type:"WMS",layers:"eau_new_Gesamtzustand_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gesamtzustand_2015__171"}]},{id:621,name:"eau_new_Chemischer Zustand 2015_Richtlinie 2008_105_EG",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2015",max_dpi:128,metadata_id:"7df87ec3-bfad-4d1b-a10b-68670c8073f4"},dimensions:{},type:"WMS",layers:"621",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer Zustand 2015_Richtlinie 2008_105_EG__172"}]},{id:764,name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe 2015_Richtlinie_2008_105_EG",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2015_richtlinie_2008_105_eg",metadata_id:"68f761b4-e1d1-4cda-b4aa-1e61fc812588"},dimensions:{},type:"WMS",layers:"764",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe 2015_Richtlinie_2008_105_EG__318"}]},{id:765,name:"eau_new_Chemischer_Zustand_2015_Richtlinie 2013_39_EU",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2015_richtlinie_2013_39_eu",metadata_id:"7df87ec3-bfad-4d1b-a10b-68670c8073f4"},dimensions:{},type:"WMS",layers:"765",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_2015_Richtlinie 2013_39_EU__319"}]},{id:766,name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe_2015_Richtlinie 2013_39_EU",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2015_richtlinie_2013_39_eu",metadata_id:"d78ac813-7ab3-4162-945a-f87512e66654"},dimensions:{},type:"WMS",layers:"766",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe_2015_Richtlinie 2013_39_EU__320"}]},{id:466,name:"eau_new_Qualitaetskomponenten_des_oekologischen_Zustands_2015",children:[{id:767,name:"eau_new_Hydromorphologische Gesamtbewertung 2015",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologischer_zustand_2015",metadata_id:"767e0a8a-31e0-4a53-913f-6ab1c76ca27c"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologische Gesamtbewertung 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologische Gesamtbewertung 2015__174"}]},{id:769,name:"eau_new_Morphologie 2015",metadata:{is_queryable:!0,legend_name:"eau:morphologie_2015",metadata_id:"b7812f62-a8b5-4ef4-bbb8-c2e3a9688c93"},dimensions:{},type:"WMS",layers:"eau_new_Morphologie 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Morphologie 2015__330"}]},{id:770,name:"eau_new_Durchgngigkeit 2015",metadata:{is_queryable:!0,legend_name:"eau:durchgaengigkeit_2015",metadata_id:"4983c058-3d33-4b6f-b801-de1113a11f27"},dimensions:{},type:"WMS",layers:"eau_new_Durchgngigkeit 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchgngigkeit 2015__331"}]},{id:583,name:"eau_new_Physiko-Chemie_2015",metadata:{is_queryable:!0,legend_name:"eau:physiko-chemie_2015",max_dpi:128,metadata_id:"45702d13-2608-4300-ba54-0e078c96386c"},dimensions:{},type:"WMS",layers:"eau_new_Physiko-Chemie_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Physiko-Chemie_2015__176"}]},{id:771,name:"eau_new_Phytoplankton 2015",metadata:{is_queryable:!0,legend_name:"eau:phytoplankton_2015",metadata_id:"e5d8434c-c367-4a56-a7d1-aa60f70a301f"},dimensions:{},type:"WMS",layers:"eau_new_Phytoplankton 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytoplankton 2015__321"}]},{id:662,name:"eau_new_Makrophyten_2015",metadata:{is_queryable:!0,legend_name:"eau:aquatische_flora_2015",max_dpi:128,metadata_id:"fe673001-2447-4e3c-bce6-4606b6bf222d"},dimensions:{},type:"WMS",layers:"eau_new_Makrophyten_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrophyten_2015__177"}]},{id:600,name:"eau_new_Makro-Invertebraten_2015",metadata:{is_queryable:!0,legend_name:"eau:makro-invertebraten_2015",max_dpi:128,metadata_id:"b8a59482-2696-4b9a-a527-3201597a4caf"},dimensions:{},type:"WMS",layers:"eau_new_Makro-Invertebraten_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makro-Invertebraten_2015__180"}]},{id:646,name:"eau_new_Fische_2015",metadata:{is_queryable:!0,legend_name:"eau:fische_2015",max_dpi:128,metadata_id:"f44a6aa7-6dcc-4d99-9033-c13ef23ebef4"},dimensions:{},type:"WMS",layers:"eau_new_Fische_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fische_2015__179"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:471,name:"eau_new_Grundwasser_2015",children:[{id:591,name:"eau_new_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_wk_2015",max_dpi:128,metadata_id:"489c9b85-6c3c-4019-b3ee-096936b2683c"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_WK_2015__182"}]},{id:592,name:"eau_new_Quantitativer_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_wk_2015",max_dpi:128,metadata_id:"333c7e4f-cdc3-439a-aa13-ca0f9138c764"},dimensions:{},type:"WMS",layers:"eau_new_Quantitativer_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quantitativer_Zustand_der_WK_2015__183"}]},{id:632,name:"eau_new_Chemischer_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_wk_2015",max_dpi:128,metadata_id:"ddd64c4a-f5af-4bbb-a7d3-3db1016ee541"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_der_WK_2015__184"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2085,name:"eau_Bewirtschaftungsplan_2021",children:[{id:2090,name:"eau_Oberflaechenwasserkoerper_2021",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2021",max_dpi:128,metadata_id:"c50b2bc7-aeb7-4d3e-9349-09eb3ec0f927"},dimensions:{},type:"WMS",layers:"eau_Oberflaechenwasserkoerper_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Oberflaechenwasserkoerper_2021__386"}]},{id:2091,name:"eau_Erheblich vernderte Wasserkrper 2021",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_wk_2021",max_dpi:128,metadata_id:"311cc30b-8092-4816-9f86-87d5f2995706"},dimensions:{},type:"WMS",layers:"eau_Erheblich vernderte Wasserkrper 2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Erheblich vernderte Wasserkrper 2021__387"}]},{id:2491,name:"eau_new_Betrachtungsraeume_2021",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2021",metadata_id:"af21fbbf-3f63-4742-8c44-f8a377930197"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2021__455"}]},{id:2223,name:"eau_typologie_Gewsser_2021",metadata:{is_queryable:!0,legend_name:"eau:fleissgewaessertypen_2021_lu",metadata_id:"492d6faa-5c91-45d4-83d7-733398cc48d1"},dimensions:{},type:"WMS",layers:"eau_typologie_Gewsser_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_typologie_Gewsser_2021__419"}]},{id:2224,name:"eau_Fliegewssertypen_2021",metadata:{is_queryable:!0,legend_name:"eau:fleissgewaessertypen_2021_lawa",metadata_id:"8608d8c5-def8-4050-9f44-7746edd7a32e"},dimensions:{},type:"WMS",layers:"eau_Fliegewssertypen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Fliegewssertypen_2021__420"}]},{id:2269,name:"eau_grundwasserkoerper_2021",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2021",metadata_id:"3bd42cf4-93ce-451f-8749-e3f6d1750eeb"},dimensions:{},type:"WMS",layers:"eau_grundwasserkoerper_2021",imageType:"image/png",childLayers:[{name:"eau_grundwasserkoerper_2021__444"}]},{id:2222,name:"eau_Strukturgtekartierung_2021",children:[{id:2225,name:"eau_Strukturgtekartierung_2021_7stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2021_7-stufige_bewertung",metadata_id:"87e3688f-b831-44e9-aa4f-38d89a41139a"},dimensions:{},type:"WMS",layers:"eau_Strukturgtekartierung_2021_7stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturgtekartierung_2021_7stufige_bewertung__405"}]},{id:2226,name:"eau_Strukturgtekartierung_2021_5stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2021_5-stufige_bewertung",metadata_id:"0e36b3e4-8811-43b6-9f2d-a2ea26c817cb"},dimensions:{},type:"WMS",layers:"eau_Strukturgtekartierung_2021_5stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturgtekartierung_2021_5stufige_bewertung__406"}]},{id:2227,name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:struktukartierung_2021_5_band_7-stufige_bewertung",metadata_id:"27c60680-00ac-4e28-857f-41a1021ae4d9"},dimensions:{},type:"WMS",layers:"eau_Struktukartierung_2021_5_band_7stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__408"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__409"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__410"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__411"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__412"}]},{id:2228,name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:struktukartierung_2021_5_band_5-stufige_bewertung",metadata_id:"dedcc2a3-b587-4dfe-a967-5f4bfd8f575a"},dimensions:{},type:"WMS",layers:"eau_Struktukartierung_2021_5_band_5stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__414"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__415"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__416"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__417"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__418"}]},{id:2492,name:"eau_new_Querbauwerke_2021",metadata:{geocatalog_open_data_last_update_date:"2024-08-01T01:02:32.8749807",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a2f595f96f574ccd9e7e7c",is_queryable:!0,legend_name:"eau:Querbauwerke%202021",metadata_id:"88b06474-f029-4544-a60d-7c46c5f32191"},dimensions:{},type:"WMS",layers:"eau_new_Querbauwerke_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Querbauwerke_2021__422"}]},{id:2493,name:"eau_new_Durchlaesse_Verrohrungen_2021",metadata:{geocatalog_open_data_last_update_date:"2024-07-31T01:02:20.8968264",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a2f58e7af13982e1abe7e7",is_queryable:!0,legend_name:"eau:durchlaesseverrohrungen_2021",metadata_id:"6eb34108-4bad-4cb7-881e-7db3174c7531"},dimensions:{},type:"WMS",layers:"eau_new_Durchlaesse_Verrohrungen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchlaesse_Verrohrungen_2021__423"}]},{id:2494,name:"eau_new_Querprofile_2021",metadata:{is_queryable:!0,legend_name:"eau:querprofile_2021",metadata_id:"a40281d4-1ee2-42d0-9378-012f1f415afa"},dimensions:{},type:"WMS",layers:"eau_new_Querprofile_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Querprofile_2021__424"}]},{id:2495,name:"eau_new_Substratkartierung_2021",metadata:{is_queryable:!0,legend_name:"eau:substratkartierung_2021",metadata_id:"c4eb10fd-305d-43f7-ae01-b9caa32ed484"},dimensions:{},type:"WMS",layers:"eau_new_Substratkartierung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Substratkartierung_2021__425"}]}],metadata:{},mixed:!0},{id:2497,name:"eau_new_Massnahmenprogramm_2021",children:[{id:2106,name:"eau_Masssnahmenprogramm_SWW_2021",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_sww_2021",metadata_id:"10f4a12e-1a67-42d5-b575-8993e2f3aa68"},dimensions:{},type:"WMS",layers:"eau_Masssnahmenprogramm_SWW_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Masssnahmenprogramm_SWW_2021__403"}]},{id:2496,name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_hy_2021_alle",metadata_id:"4b00cf8c-d4e6-486d-8bda-d385302792f6"},dimensions:{},type:"WMS",layers:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__389"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__390"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__391"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__392"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__393"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__394"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__395"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__396"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__397"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__398"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__399"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__400"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__401"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__402"}]},{id:2086,name:"eau_Entwurf_Massnahmenprogramm_HY_2021",children:[{id:2092,name:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_der_oekologischen_durchgaengigkeit",metadata_id:"c150f6a5-41c7-477a-9d44-c0a26a502d85"},dimensions:{},type:"WMS",layers:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk",imageType:"image/png",style:"default",childLayers:[{name:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk_2021__389"}]},{id:2093,name:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_der_oekologischen_durchgaengigkeit_durchlass",metadata_id:"569bf0ea-c428-4171-aba6-8f2ace180a10"},dimensions:{},type:"WMS",layers:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021__390"}]},{id:2094,name:"eau_Strukturelemente_Sohle_2021",metadata:{is_queryable:!0,legend_name:"eau:einbau_von_strukturelementen_in_sohle",metadata_id:"2d233ca6-553e-43bf-ba25-f46b88f63710"},dimensions:{},type:"WMS",layers:"eau_Strukturelemente_Sohle_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturelemente_Sohle_2021__391"}]},{id:2095,name:"eau_Umgestalten_Sohlverbau_2021",metadata:{is_queryable:!0,legend_name:"eau:entfernen_umgestalten_von_sohlverbau",metadata_id:"0d30a3ee-e860-4816-b5c8-9f43e93020e3"},dimensions:{},type:"WMS",layers:"eau_Umgestalten_Sohlverbau_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Umgestalten_Sohlverbau_2021__392"}]},{id:2096,name:"eau_Stroemungslenkern_2021",metadata:{is_queryable:!0,legend_name:"eau:einbau_von_stroemungslenkern_fuer_eigendynamik",metadata_id:"b86c62a9-0ec8-4d35-878f-b275e74ff02e"},dimensions:{},type:"WMS",layers:"eau_Stroemungslenkern_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Stroemungslenkern_2021__393"}]},{id:2097,name:"eau_Umgestalten_Uferverbau_2021",metadata:{is_queryable:!0,legend_name:"eau:entfernen_umgestalten_von_uferverbau",metadata_id:"bec0ccbc-09b5-4351-8b72-f0e458fc7d19"},dimensions:{},type:"WMS",layers:"eau_Umgestalten_Uferverbau_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Umgestalten_Uferverbau_2021__394"}]},{id:2098,name:"eau_naturnah_Gewaesserbett_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_von_naturnaher_laufentwicklung_und_gewaesserbett",metadata_id:"3ddf627c-90ae-4b58-a05e-20925493dcf9"},dimensions:{},type:"WMS",layers:"eau_naturnah_Gewaesserbett_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnah_Gewaesserbett_2021__395"}]},{id:2099,name:"eau_Gewaesserrandstreifen_2021",metadata:{is_queryable:!0,legend_name:"eau:anlage_eines_gewaesserrandstreifens",metadata_id:"3bc0e52d-954b-47d3-8905-1ecfe7108ce0"},dimensions:{},type:"WMS",layers:"eau_Gewaesserrandstreifen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Gewaesserrandstreifen_2021__396"}]},{id:2100,name:"eau_Gewaesserentwicklungskorridor_2021",metadata:{is_queryable:!0,legend_name:"eau:anlage_eines_gewaesser_entwicklungskorridors",metadata_id:"13299bf5-57ca-4538-993e-7c00f6247722"},dimensions:{},type:"WMS",layers:"eau_Gewaesserentwicklungskorridor_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Gewaesserentwicklungskorridor_2021__397"}]},{id:2101,name:"eau_natuerlich_Ueberflutungsraeume_2021",metadata:{is_queryable:!0,legend_name:"eau:sicherung_und_erweiterung_natuerlicher_ueberflutungsraeume_und_augewaesser",metadata_id:"7fb0080e-d178-401d-83de-7595ef1885b5"},dimensions:{},type:"WMS",layers:"eau_natuerlich_Ueberflutungsraeume_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_natuerlich_Ueberflutungsraeume_2021__398"}]},{id:2102,name:"eau_eigendynamische_Entwicklung_2021",metadata:{is_queryable:!0,legend_name:"eau:zulassen_von_eigendynamischer_entwicklung",metadata_id:"d13e22e9-d22a-48a0-838d-3d7c914ccfe3"},dimensions:{},type:"WMS",layers:"eau_eigendynamische_Entwicklung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_eigendynamische_Entwicklung_2021__399"}]},{id:2103,name:"eau_naturnahe_Abflussverhaeltnisse_2021",metadata:{is_queryable:!0,legend_name:"eau:widerherstellung_und_sicherung_naturnaher_abflussverhaeltnisse",metadata_id:"b3f8a9e0-17f7-4b64-a34b-6ee6de972b52"},dimensions:{},type:"WMS",layers:"eau_naturnahe_Abflussverhaeltnisse_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnahe_Abflussverhaeltnisse_2021__400"}]},{id:2104,name:"eau_naturnaher_Wasserhaushalt_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_und_sicherung_naturnahem_wasserhaushalt",metadata_id:"91008390-557e-4db3-8d7c-e608a5478edb"},dimensions:{},type:"WMS",layers:"eau_naturnaher_Wasserhaushalt_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnaher_Wasserhaushalt_2021__401"}]},{id:2105,name:"eau_Abflussregulierung_2021",metadata:{is_queryable:!0,legend_name:"eau:abflussregulierung",metadata_id:"393be87d-44ce-42e1-9b81-9585aa2d7678"},dimensions:{},type:"WMS",layers:"eau_Abflussregulierung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Abflussregulierung_2021__402"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2498,name:"eau_new_Zustand_Wasserkoerper_2021",children:[{id:2501,name:"eau_new_OWK_2021",children:[{id:2516,name:"eau_new_oekologischer_Zustand_2021",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.9819519",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:oekologischer_zustand_2021",metadata_id:"d6e11b40-6e70-4f68-86c2-1c69c1e41c04"},dimensions:{},type:"WMS",layers:"eau_new_oekologischer_Zustand_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_oekologischer_Zustand_2021__428"}]},{id:2517,name:"eau_new_oekologisches_Potenzial_2021",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.9441803",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:oekologisches_potenzial_2021",metadata_id:"ed63b4ab-aee0-4402-8f30-98f2a08b98a4"},dimensions:{},type:"WMS",layers:"eau_new_oekologisches_Potenzial_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_oekologisches_Potenzial_2021__429"}]},{id:2518,name:"eau_new_chemischer_Zustand_2021_2013_39_EU",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.8760847",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2021",metadata_id:"2973678d-b858-4c7b-abfa-b99c206c32be"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_2021_2013_39_EU",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_2021_2013_39_EU__430"}]},{id:2519,name:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.4632089",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2021",metadata_id:"e32c56b5-a839-4cd1-a724-85153d87c5d5"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU__431"}]},{id:2499,name:"eau_new_Qualitaetskomponenten_oekologischer_Zustand_2021",children:[{id:2520,name:"eau_new_biologische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:biologische_qk_-_gesamtbewertung_2021",metadata_id:"61ac19af-e01b-48e3-8730-d955709d92ce"},dimensions:{},type:"WMS",layers:"eau_new_biologische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_biologische_QK_Gesamtbewertung_2021__435"}]},{id:2521,name:"eau_new_Phytoplankton_2021",metadata:{is_queryable:!0,legend_name:"eau:phytoplankton_2021",metadata_id:"f1bb6a6e-cc76-420a-8426-cf78bebea0aa"},dimensions:{},type:"WMS",layers:"eau_new_Phytoplankton_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytoplankton_2021__436"}]},{id:2522,name:"eau_new_Makrophyten_und_Phytobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:makrophyten_und_phytobenthos_2021",metadata_id:"53087821-654a-4fad-b891-b6f86f347482"},dimensions:{},type:"WMS",layers:"eau_new_Makrophyten_und_Phytobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrophyten_und_Phytobenthos_2021__437"}]},{id:2536,name:"eau_new_Macrophytes_2021",metadata:{is_queryable:!0,legend_name:"eau:macrophytes_2021",metadata_id:"060dc4f4-8486-4b5a-ae46-2b608bd87386"},dimensions:{},type:"WMS",layers:"eau_new_Macrophytes_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Macrophytes_2021__438"}]},{id:2523,name:"eau_new_Phytobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:phytobenthos_2021",metadata_id:"83f6b866-467a-4b00-9641-0252426c0808"},dimensions:{},type:"WMS",layers:"eau_new_Phytobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytobenthos_2021__439"}]},{id:2524,name:"eau_new_Makrozoobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:makrozoobenthos_2021",metadata_id:"d4028c85-831b-4950-905a-6df780d6b57d"},dimensions:{},type:"WMS",layers:"eau_new_Makrozoobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrozoobenthos_2021__440"}]},{id:2525,name:"eau_new_Fische_2021",metadata:{is_queryable:!0,legend_name:"eau:fische_2021",metadata_id:"961e396d-f123-4842-9a58-7968806e084d"},dimensions:{},type:"WMS",layers:"eau_new_Fische_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fische_2021__441"}]},{id:2526,name:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:physikalisch-chemische_qk_-_gesamtbewertung_2021",metadata_id:"a254a96a-8179-4a85-bd3d-c371d84e3884"},dimensions:{},type:"WMS",layers:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021__442"}]},{id:2527,name:"eau_new_allg_physikalisch_chemische_Parameter_2021",metadata:{is_queryable:!0,legend_name:"eau:allgemein_physikalisch-chemische_parameter_2021",metadata_id:"405ff58f-aca0-4781-9b28-c3481a7a0b0d"},dimensions:{},type:"WMS",layers:"eau_new_allg_physikalisch_chemische_Parameter_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_allg_physikalisch_chemische_Parameter_2021__443"}]},{id:2528,name:"eau_new_Flussgebietsspezifische_Schadstoffe_2021",metadata:{is_queryable:!0,legend_name:"eau:flussgebietsspezifische_schadstoffe_2021",metadata_id:"f321c03f-196d-4d12-992a-f6914088fd11"},dimensions:{},type:"WMS",layers:"eau_new_Flussgebietsspezifische_Schadstoffe_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Flussgebietsspezifische_Schadstoffe_2021__457"}]},{id:2529,name:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologische_qk_-_gesamtbewertung_2021",metadata_id:"673ef74f-1257-4de4-9c63-be9a82e7fbf7"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021__458"}]},{id:2530,name:"eau_new_Morphologie_2021",metadata:{is_queryable:!0,legend_name:"eau:morphologie_2021",metadata_id:"877aecd9-f5b3-4266-a520-e8cfd9d861c9"},dimensions:{},type:"WMS",layers:"eau_new_Morphologie_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Morphologie_2021__459"}]},{id:2531,name:"eau_new_Durchgaengigkeit_2021",metadata:{is_queryable:!0,legend_name:"eau:durchgaengigkeit_2021",metadata_id:"afa4a183-b069-4b65-9d9e-ca692f91f140"},dimensions:{},type:"WMS",layers:"eau_new_Durchgaengigkeit_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchgaengigkeit_2021__460"}]},{id:2532,name:"eau_new_Wasserhaushalt_2021",metadata:{is_queryable:!0,legend_name:"eau:wasserhaushalt_2021",metadata_id:"299eb814-3703-4119-b8d3-e9581c234c3b"},dimensions:{},type:"WMS",layers:"eau_new_Wasserhaushalt_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Wasserhaushalt_2021__461"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2500,name:"eau_new_GWK_2021",children:[{id:2533,name:"eau_new_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_gwk_2021",metadata_id:"ef79616f-fd66-45dd-a73a-e5677948dd56"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_GWK_2021__463"}]},{id:2534,name:"eau_new_quantitativer_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_gwk_2021",metadata_id:"5b9fbb7b-26b1-4b74-a709-80df547a755d"},dimensions:{},type:"WMS",layers:"eau_new_quantitativer_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_quantitativer_Zustand_der_GWK_2021__464"}]},{id:2535,name:"eau_new_chemischer_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_gwk_2021",metadata_id:"efa9de18-5db0-498f-aebb-fd659f689da7"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_der_GWK_2021__465"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:312,name:"umweltuberwachung",children:[{id:283,name:"asta_meteo",metadata:{is_queryable:!0,metadata_id:"23e4b02d-a93d-47a4-8597-060319ae2af5"},dimensions:{},type:"WMS",layers:"asta_meteo",imageType:"image/png",style:"default",childLayers:[{name:"asta_meteo__meteo"}]}],metadata:{},mixed:!0},{id:273,name:"anf_data_map",children:[{id:427,name:"anf_arrondissements",metadata:{is_queryable:!0,metadata_id:"0ed72c13-1975-4cef-90de-1e4b737f5fbd"},dimensions:{},type:"WMS",layers:"anf_arrondissements",imageType:"image/png",style:"default",childLayers:[{name:"anf_arrondissements__ARRONDISSEMENTS"}]},{id:428,name:"anf_triages",metadata:{is_queryable:!0,metadata_id:"d4bb012a-73ab-4d3c-ac0c-f31e9df07d34"},dimensions:{},type:"WMS",layers:"anf_triages",imageType:"image/png",style:"default",childLayers:[{name:"anf_triages__TRIAGES"}]},{id:1783,name:"anf_lots_chasse_2021",metadata:{exclusion:"[340]",is_queryable:!0,metadata_id:"a8d8f46d-f6b1-4bb0-9935-be825cffab3f"},dimensions:{},type:"WMS",layers:"anf_lots_chasse_2021",imageType:"image/png",style:"default",childLayers:[{name:"anf_lots_chasse_2021__LOTS_CHASSE_2021"}]},{id:444,name:"anf_dates_battues",metadata:{exclusion:"[340]",is_queryable:!1,metadata_id:"cd5c65e3-ce29-4317-bc07-127bc679861f"},dimensions:{},type:"WMS",layers:"anf_dates_battues",imageType:"image/png",style:"default",childLayers:[{name:"anf_dates_battues__BATTUES_CHASSE"}]},{id:677,name:"anf_proprietes_forestieres",metadata:{is_queryable:!0,legend_name:"anf:proprietes_forestieres",metadata_id:"fa6d38c7-263c-4349-b208-45652f9b98ca"},dimensions:{},type:"WMS",layers:"anf_proprietes_forestieres",imageType:"image/png",style:"default",childLayers:[{name:"anf_proprietes_forestieres__PROPRIETES_FORESTIERES"}]}],metadata:{},mixed:!0},{id:381,name:"Archeo",children:[{id:2560,name:"arch_zoa",metadata:{legend_name:"arch:zoa",metadata_id:"3bbec7de-44af-4515-a2d2-04ac569ac657",start_opacity:.5},dimensions:{},type:"WMS",layers:"arch_zoa",imageType:"image/png",childLayers:[{name:"arch_zoa__1"},{name:"arch_zoa__2"},{name:"arch_zoa__3"},{name:"arch_zoa__4"},{name:"arch_zoa__5"},{name:"arch_zoa__6"},{name:"arch_zoa__7"},{name:"arch_zoa__8"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1657,name:"main_culture",children:[{id:1656,name:"unesco_patrimoine",children:[{id:1651,name:"unesco_city_boundary",metadata:{is_queryable:!0,metadata_id:"50b22938-4d06-48de-9ff0-d1b7f5f6f39d"},dimensions:{},type:"WMS",layers:"unesco_city_boundary",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_boundary__category"}]},{id:1655,name:"unesco_city_bufferzone",metadata:{is_queryable:!0,metadata_id:"39935dc9-9529-4adb-8cd4-97f9c9600c63"},dimensions:{},type:"WMS",layers:"unesco_city_bufferzone",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_bufferzone__category"}]},{id:1652,name:"unesco_city_old_quarters",metadata:{is_queryable:!0,metadata_id:"168b93e8-7bc4-451c-a642-e2c788e1cc59"},dimensions:{},type:"WMS",layers:"unesco_city_old_quarters",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_old_quarters__category"}]},{id:1653,name:"unesco_city_other_quarters",metadata:{is_queryable:!0,metadata_id:"1d4e8d00-541a-4600-931d-b768b7a42fdb"},dimensions:{},type:"WMS",layers:"unesco_city_other_quarters",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_other_quarters__category"}]},{id:1654,name:"unesco_city_fortress",metadata:{is_queryable:!0,metadata_id:"bc00d9de-4a11-4375-ae74-2f46fb6f7359"},dimensions:{},type:"WMS",layers:"unesco_city_fortress",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_fortress__category"}]}],metadata:{},mixed:!0},{id:1811,name:"culture_institutions",children:[{id:1800,name:"sip_theatres",metadata:{is_queryable:!0,metadata_id:"6745d7eb-93e3-4f55-be5f-2286903e46f0",start_opacity:.9},dimensions:{},type:"WMS",layers:"1800",imageType:"image/png",style:"default",childLayers:[{name:"sip_theatres__POI"}]}],metadata:{},mixed:!0},{id:2561,name:"arch_group",children:[{id:2560,name:"arch_zoa",metadata:{legend_name:"arch:zoa",metadata_id:"3bbec7de-44af-4515-a2d2-04ac569ac657",start_opacity:.5},dimensions:{},type:"WMS",layers:"arch_zoa",imageType:"image/png",childLayers:[{name:"arch_zoa__1"},{name:"arch_zoa__2"},{name:"arch_zoa__3"},{name:"arch_zoa__4"},{name:"arch_zoa__5"},{name:"arch_zoa__6"},{name:"arch_zoa__7"},{name:"arch_zoa__8"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1380,name:"lidar_group",children:[{id:1792,name:"act_lidar_2019_group",children:[{id:1753,name:"lidar_2019_mns",metadata:{legend_name:"lidar:mns2019",metadata_id:"d7bd80d7-23de-462f-bd3e-6bd863e1fc1d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mns",imageType:"image/png"},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"},{id:2188,name:"act_mnt_2019_coloration_alternative_Lux",metadata:{is_queryable:!0,metadata_id:"faf3a8e8-6f3a-424a-9bee-945e99d544dd"},dimensions:{},type:"WMS",layers:"act_mnt_2019_coloration_alternative_Lux",imageType:"image/png",style:"default",childLayers:[{name:"act_mnt_2019_coloration_alternative_Lux__0"}]},{id:2187,name:"act_mnt2017_GR",metadata:{is_queryable:!0,metadata_id:"b5bad4e6-b6cf-45f4-a543-da619b07f567"},dimensions:{},type:"WMS",layers:"act_mnt2017_GR",imageType:"image/png",style:"default",childLayers:[{name:"act_mnt2017_GR__1"}]},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1788,name:"lidar_tiles_2019",metadata:{is_queryable:!0,metadata_id:"b19a500a-b8d5-4a87-a8f3-00f58c3dffcd",start_opacity:.7},dimensions:{},type:"WMS",layers:"lidar_tiles_2019",imageType:"image/png",style:"default",childLayers:[{name:"lidar_tiles_2019__3"},{name:"lidar_tiles_2019__2"}]}],metadata:{},mixed:!0},{id:1791,name:"act_lidar_2017_group",children:[{id:1377,name:"lidar_mns",metadata:{legend_name:"lidar:mns2017",metadata_id:"e7184a37-7a6a-4e07-ae8d-ff06d9969da0"},dimensions:{},type:"WMS",layers:"lidar_mns",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mns__0"}]},{id:1378,name:"lidar_mnt",metadata:{legend_name:"lidar:mnt2017",metadata_id:"1adab94e-d80a-4e19-a808-28f52f633186"},dimensions:{},type:"WMS",layers:"lidar_mnt",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mnt__0"}]},{id:1463,name:"lidar_mnh",metadata:{legend_name:"lidar:mnh",metadata_id:"5f189f5b-08f9-4abc-b3f0-78c37ddf0db1"},dimensions:{},type:"WMS",layers:"lidar_mnh",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mnh__0"}]},{id:1787,name:"lidar_tiles_2017",metadata:{is_queryable:!0,metadata_id:"3c565aff-7394-4d51-915c-0e06dde7765a",start_opacity:.7},dimensions:{},type:"WMS",layers:"lidar_tiles_2017",imageType:"image/png",style:"default",childLayers:[{name:"lidar_tiles_2017__1"},{name:"lidar_tiles_2017__0"}]}],metadata:{},mixed:!0},{id:2470,name:"act_lidar_derivates",children:[{id:2401,name:"act_ponts",metadata:{is_queryable:!0,metadata_id:"2b7d36db-987f-49b4-96d7-60e934ddf926"},dimensions:{},type:"WMS",layers:"act_ponts",imageType:"image/png",childLayers:[{name:"act_ponts__0"},{name:"act_ponts__1"},{name:"act_ponts__2"}]},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"},{id:1753,name:"lidar_2019_mns",metadata:{legend_name:"lidar:mns2019",metadata_id:"d7bd80d7-23de-462f-bd3e-6bd863e1fc1d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mns",imageType:"image/png"},{id:2311,name:"act_hillshade_2019",metadata:{is_queryable:!0,metadata_id:"8171b99e-df8b-4cf0-af36-f77c222e1690"},dimensions:{},type:"WMS",layers:"act_hillshade_2019",imageType:"image/png",style:"default",childLayers:[{name:"act_hillshade_2019__3"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1929,name:"zones_UAS",children:[{id:1927,name:"zones_UAS_0_50m",metadata:{is_queryable:!0,legend_name:"drones",metadata_id:"5589a912-bfa0-4b57-a560-b67e5ff342b9",start_opacity:.6},dimensions:{},type:"WMS",layers:"zones_UAS_0_50m",imageType:"image/png",childLayers:[{name:"zones_UAS_0_50m__0"}]},{id:1928,name:"zones_UAS_50_120m",metadata:{is_queryable:!0,legend_name:"drones",metadata_id:"9e5b263b-4a81-4841-824c-8c44e6261470",start_opacity:.6},dimensions:{},type:"WMS",layers:"zones_UAS_50_120m",imageType:"image/png",childLayers:[{name:"zones_UAS_50_120m__1"}]}],metadata:{},mixed:!0},{id:2132,name:"meteo_live",children:[{id:2133,name:"meteo_live_temp",metadata:{metadata_id:"60fd8ad2-e4aa-45c7-80a7-62b7551e0c6b"},dimensions:{},type:"WMS",layers:"meteo_live_temp",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_temp__MF.PointTimeSeriesObservation_Live_ASTA_avg_ta200"}]},{id:2139,name:"meteo_live_precipitation_sum",metadata:{metadata_id:"cd98c205-6413-49f0-88dd-8c68b02bb68c"},dimensions:{},type:"WMS",layers:"meteo_live_precipitation_sum",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_precipitation_sum__MF.PointTimeSeriesObservation_Live_ASTA_sum_nn050"}]},{id:2135,name:"meteo_live_humidity",metadata:{metadata_id:"7b09bc66-20a9-4d8b-9ae9-0c89f4fddcdf"},dimensions:{},type:"WMS",layers:"meteo_live_humidity",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_humidity__MF.PointTimeSeriesObservation_Live_ASTA_avg_rh200"}]},{id:2136,name:"meteo_live_windspeed",metadata:{metadata_id:"8f12d598-539c-4f58-a401-4422a392f995"},dimensions:{},type:"WMS",layers:"meteo_live_windspeed",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_windspeed__MF.PointTimeSeriesObservation_Live_ASTA_avg_wv1000"}]},{id:2138,name:"meteo_live_sunshine",metadata:{metadata_id:"b05144c8-f416-4bd7-96fe-2d992650db9f"},dimensions:{},type:"WMS",layers:"meteo_live_sunshine",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_sunshine__MF.PointTimeSeriesObservation_Live_ASTA_sum_ssd"}]},{id:2137,name:"meteo_live_irradiation",metadata:{metadata_id:"f1fb363e-1d4e-4fba-9c05-82ddcc8f1e72"},dimensions:{},type:"WMS",layers:"meteo_live_irradiation",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_irradiation__MF.PointTimeSeriesObservation_Live_ASTA_sum_gs200"}]}],metadata:{},mixed:!0},{id:2316,name:"cadastre_commerce_group",children:[{id:2315,name:"cadastre_commerce_wirtschaftszweig",metadata:{is_queryable:!0,metadata_id:"2b6047e0-5092-4f66-926a-e9c79d6b6b88"},dimensions:{},type:"WMS",layers:"cadastre_commerce_wirtschaftszweig",imageType:"image/png",childLayers:[{name:"cadastre_commerce_wirtschaftszweig__5"}]},{id:2439,name:"cadastre_commerce_branchen",metadata:{is_queryable:!0,metadata_id:"5229ca5c-12b8-489b-b5c6-6abd373ac998"},dimensions:{},type:"WMS",layers:"cadastre_commerce_branchen",imageType:"image/png",childLayers:[{name:"cadastre_commerce_branchen__4"}]},{id:2444,name:"cadastre_commerce_betriebsform",metadata:{is_queryable:!0,metadata_id:"70f15780-a4d7-4170-8b2d-4868389c4eef"},dimensions:{},type:"WMS",layers:"cadastre_commerce_betriebsform",imageType:"image/png",childLayers:[{name:"cadastre_commerce_betriebsform__6"}]}],metadata:{},mixed:!0},{id:9999992316,name:"time_layers_e2e",children:[{id:9999991858,name:"starkregen",metadata:{time_config:'{"time_override": {"timepositions": ["2014-08-31T12:43:47.000Z/2020-12-31T23:59:59.000Z/P1M"]}}'},dimensions:{},type:"WMS",layers:"starkregen",imageType:"image/png",childLayers:[{name:"starkregen__0"}],time:{minValue:"2014-08-31T12:43:47Z",maxValue:"2020-12-31T23:59:59Z",interval:[0,1,0,0],resolution:"second",minDefValue:null,maxDefValue:null,mode:"range",widget:"slider"}},{id:9999991859,name:"parz",metadata:{time_config:'{"time_override": {"timepositions": ["2014-08-31T12:43:47.000Z/2020-12-31T23:59:59.000Z/P1M"]}}'},dimensions:{},type:"WMS",layers:"parzelle",imageType:"image/png",childLayers:[{}],time:{minValue:"2014-08-31T12:43:47Z",maxValue:"2020-12-31T23:59:59Z",interval:[0,1,0,0],resolution:"second",minDefValue:"2014-08-31T12:43:47Z",maxDefValue:null,mode:"value",widget:"datepicker"}},{id:9999991860,name:"parz_slider",metadata:{time_config:'{"time_override": {"timepositions": ["2014-08-31T12:43:47.000Z/2020-12-31T23:59:59.000Z/P1M"]}}'},dimensions:{},type:"WMS",layers:"parzelle_slider",imageType:"image/png",childLayers:[{}],time:{minValue:"2014-08-31T12:43:47Z",maxValue:"2020-12-31T23:59:59Z",interval:[0,1,0,0],resolution:"second",minDefValue:"2014-08-31T12:43:47Z",maxDefValue:null,mode:"value",widget:"slider"}},{id:9999991861,name:"act_ortho_time",metadata:{time_config:'{"default_time":"2022-08","time_links":{"2001-08":"ortho_2001","2004-08":"ortho_2004","2007-08":"ortho_2007","2010-08":"ortho_2010","2013-08":"ortho_2013","2016-08":"ortho_2016","2017-08":"ortho_2017","2018-08":"ortho_2018","2019-01":"ortho_2019_winter","2019-08":"ortho_2019","2020-08":"ortho_2020","2021-08":"ortho_2021","2022-08":"ortho_2022"}}',time_layers:{"2001-08-01T00:00:00Z":"ortho_2001","2004-08-01T00:00:00Z":"ortho_2004","2007-08-01T00:00:00Z":"ortho_2007","2010-08-01T00:00:00Z":"ortho_2010","2013-08-01T00:00:00Z":"ortho_2013","2016-08-01T00:00:00Z":"ortho_2016","2017-08-01T00:00:00Z":"ortho_2017","2018-08-01T00:00:00Z":"ortho_2018","2019-01-01T00:00:00Z":"ortho_2019_winter","2019-08-01T00:00:00Z":"ortho_2019","2020-08-01T00:00:00Z":"ortho_2020","2021-08-01T00:00:00Z":"ortho_2021","2022-08-01T00:00:00Z":"ortho_2022"}},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",layer:"act_ortho_time",imageType:"image/jpeg",time:{minValue:"2001-08-01T00:00:00Z",maxValue:"2022-08-01T00:00:00Z",values:["2001-08-01T00:00:00Z","2004-08-01T00:00:00Z","2007-08-01T00:00:00Z","2010-08-01T00:00:00Z","2013-08-01T00:00:00Z","2016-08-01T00:00:00Z","2017-08-01T00:00:00Z","2018-08-01T00:00:00Z","2019-01-01T00:00:00Z","2019-08-01T00:00:00Z","2020-08-01T00:00:00Z","2021-08-01T00:00:00Z","2022-08-01T00:00:00Z"],resolution:"month",minDefValue:"2022-08-01T00:00:00Z",maxDefValue:null,mode:"value",widget:"slider"}},{id:999999,name:"layer_datepicker_range",metadata:{time_config:'{"time_override": {"timepositions": ["2014-08-31T12:43:47.000Z/2020-12-31T23:59:59.000Z/P1M"]}}'},dimensions:{},type:"WMS",layers:"layer_datepicker_range",imageType:"image/png",childLayers:[{}],time:{minValue:"2014-08-31T12:43:47Z",maxValue:"2020-12-31T23:59:59Z",interval:[0,1,0,0],resolution:"second",minDefValue:"2014-08-31T12:43:47Z",maxDefValue:null,mode:"range",widget:"datepicker"}}]}],functionalities:{},metadata:{css:"main.css",display_in_switcher:!0,fake_scales:["750","1500","3000","6000","15000","30000","60000","150000","300000","450000","700000","1500000"],page_title:"map.geoportail.lu",print_img:"bandeau.jpg",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"map.geoportal.lu",print_short_txt_en:"map.geoportal.lu",print_short_txt_fr:"map.geoportal.lu",print_short_txt_lu:"map.geoportal.lu",resolutions:["500.0","250.0","150.0","100.0","50.0","20.0","10.0","5.0","2.0","1.0","0.5","0.25"],show_in_mobile:!0}},{id:122,name:"tourisme",icon:"tourisme",children:[{id:2005,name:"tour_rando_new",children:[{id:2006,name:"tour_rando_highlights_new",children:[{id:189,name:"tour_mullerthal_trail",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"be71ab82-8930-4da7-840d-a99374312093"},dimensions:{},type:"WMS",layers:"tour_mullerthal_trail",imageType:"image/png",style:"default",childLayers:[{name:"tour_mullerthal_trail__category"}]},{id:205,name:"tour_escape_ardenne",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"f01f9d77-cb2e-4189-89a9-df7eed16525b"},dimensions:{},type:"WMS",layers:"tour_escape_ardenne",imageType:"image/png",style:"default",childLayers:[{name:"tour_escape_ardenne__category"}]},{id:1518,name:"tour_rando_eislekpied_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"43514e15-d64c-4c53-b540-e9995a06c52e"},dimensions:{},type:"WMS",layers:"tour_rando_eislekpied_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_eislekpied_new__category"}]},{id:2019,name:"tour_rando_guttlandtrails_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"905f1710-7cb4-4f5b-9da9-3d09f82597a3"},dimensions:{},type:"WMS",layers:"tour_rando_guttlandtrails_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_guttlandtrails_new__category"}]},{id:168,name:"tour_rando_traumschleifen_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"109f2940-b476-4bdd-96a8-7301fa3c7e39"},dimensions:{},type:"WMS",layers:"tour_rando_traumschleifen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_traumschleifen_new__category"}]},{id:250,name:"tour_DeLux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"df101633-54fb-46bb-9d33-91d241c69ae2"},dimensions:{},type:"WMS",layers:"tour_DeLux",imageType:"image/png",style:"default",childLayers:[{name:"tour_DeLux__category"}]},{id:2020,name:"tour_rando_minetttrail_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"84002ce6-1e76-4c38-9c25-3883aa0071ba"},dimensions:{},type:"WMS",layers:"tour_rando_minetttrail_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_minetttrail_new__category"}]},{id:2141,name:"tour_circuit_du_lac",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"61ae77c3-9a90-429c-9590-60b0f616d447"},dimensions:{},type:"WMS",layers:"tour_circuit_du_lac",imageType:"image/png",style:"default",childLayers:[{name:"tour_circuit_du_lac__category"}]},{id:2142,name:"tour_sentier_adrien_ries",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"91563b6c-a5d1-4583-9633-9554e5bbda49"},dimensions:{},type:"WMS",layers:"tour_sentier_adrien_ries",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentier_adrien_ries__category"}]}],metadata:{},mixed:!0},{id:2007,name:"tour_rando_rundwege_new",children:[{id:176,name:"tour_autopedestre",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"1514749f-19e9-4873-9c70-68b34ebc2e30"},dimensions:{},type:"WMS",layers:"tour_autopedestre",imageType:"image/png",style:"default",childLayers:[{name:"tour_autopedestre__category"}]},{id:2048,name:"tour_rando_lokale_wanderwege_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"5c82ad5e-8568-4f95-820d-5689a7eff3ee"},dimensions:{},type:"WMS",layers:"tour_rando_lokale_wanderwege_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_lokale_wanderwege_new__category"}]},{id:2658,name:"tour_komfort_wanderwege_public",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"5f5b3935-1645-4080-a916-24e55acc2395"},dimensions:{},type:"WMS",layers:"tour_komfort_wanderwege_public",imageType:"image/png",style:"default",childLayers:[{name:"tour_komfort_wanderwege_public__category"}]}],metadata:{},mixed:!0},{id:2008,name:"tour_rando_streckenwanderwege_new",children:[{id:235,name:"tour_sentiers_gr",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"004e728b-6e63-4ab7-9b65-f327eb2f7618"},dimensions:{},type:"WMS",layers:"tour_sentiers_gr",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_gr__category"}]},{id:227,name:"tour_sentiers_nationaux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"05311fc8-28fa-470c-984e-879a410ce753"},dimensions:{},type:"WMS",layers:"tour_sentiers_nationaux",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_nationaux__category"}]},{id:158,name:"tour_cfl",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfa696a6-1c25-4ba5-bde1-beb140776881"},dimensions:{},type:"WMS",layers:"tour_cfl",imageType:"image/png",style:"default",childLayers:[{name:"tour_cfl__category"}]},{id:197,name:"tour_sentiers_ajl",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"c2587c18-ed11-44da-99dd-760a3fd73126"},dimensions:{},type:"WMS",layers:"tour_sentiers_ajl",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_ajl__category"}]},{id:218,name:"tour_saint_jacques",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"431c5622-7941-482b-a629-42bd1db17dfe"},dimensions:{},type:"WMS",layers:"tour_saint_jacques",imageType:"image/png",style:"default",childLayers:[{name:"tour_saint_jacques__category"}]},{id:2675,name:"tour_liberation_route",metadata:{is_queryable:!0,metadata_id:"348236c5-0894-4a5b-8a2e-39e22f0b8272"},dimensions:{},type:"WMS",layers:"tour_liberation_route",imageType:"image/png",style:"default",childLayers:[{name:"tour_liberation_route__category"}]}],metadata:{},mixed:!0},{id:2009,name:"tour_rando_thematique_new",children:[{id:2021,name:"tour_rando_natur_geologie_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"4f360781-3708-416a-a6d5-8944a4864737"},dimensions:{},type:"WMS",layers:"tour_rando_natur_geologie_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_natur_geologie_new__category"}]},{id:316,name:"env_sentiersnature",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfc8de82-e187-4547-a1da-83385f86c786"},dimensions:{},type:"WMS",layers:"env_sentiersnature",imageType:"image/png",style:"default",childLayers:[{name:"env_sentiersnature__sentiers_nature"}]},{id:2022,name:"tour_rando_kunst_kultur_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"8fd3ce05-52b9-4104-9ecc-c671281eb8de"},dimensions:{},type:"WMS",layers:"tour_rando_kunst_kultur_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_kunst_kultur_new__category"}]},{id:2023,name:"tour_rando_geschichte_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"92ad7d05-c898-4ed9-8833-8f5ffa4645d3"},dimensions:{},type:"WMS",layers:"tour_rando_geschichte_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_geschichte_new__category"}]},{id:2028,name:"tour_rando_wein_genuss_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"b906a49a-3f35-442d-bada-1a28f132d8fc"},dimensions:{},type:"WMS",layers:"tour_rando_wein_genuss_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_wein_genuss_new__category"}]},{id:2024,name:"tour_rando_barrierefrei_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"7d274be4-fdf0-4a33-995d-cfb45c3d27ba"},dimensions:{},type:"WMS",layers:"tour_rando_barrierefrei_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_barrierefrei_new__category"}]},{id:2029,name:"tour_rando_fitness_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"d4c74795-d5dd-40b3-b17f-1d77eacd352a"},dimensions:{},type:"WMS",layers:"tour_rando_fitness_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_fitness_new__category"}]},{id:2025,name:"tour_rando_kinder_familie_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"6ff5faaa-5a08-4619-a2e5-bdfc29feb9e0"},dimensions:{},type:"WMS",layers:"tour_rando_kinder_familie_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_kinder_familie_new__category"}]},{id:370,name:"luxembourg_on_horse",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"e142f06a-349a-4163-a2a2-9dbdffe3fc95"},dimensions:{},type:"WMS",layers:"luxembourg_on_horse",imageType:"image/png",style:"default",childLayers:[{name:"luxembourg_on_horse__category"}]}],metadata:{},mixed:!0},{id:692,name:"tour_ivv",children:[{id:688,name:"tour_ivv_perm",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"83a51232-c3f3-4670-9f48-22e66a3c2a98"},dimensions:{},type:"WMS",layers:"tour_ivv_perm",imageType:"image/png",style:"default",childLayers:[{name:"tour_ivv_perm__category"}]},{id:693,name:"tour_ivv_temp",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"f2b4174d-65d6-41f4-a612-188ca5f936be"},dimensions:{},type:"WMS",layers:"tour_ivv_temp",imageType:"image/png",style:"default",childLayers:[{name:"tour_ivv_temp__category"}]}],metadata:{},mixed:!0},{id:668,name:"tour_restrictions",children:[{id:667,name:"tour_restrictions_autre",metadata:{is_queryable:!0,metadata_id:"08bf0fb9-1158-46d7-a91a-e8bd6d3bb7f8"},dimensions:{},type:"WMS",layers:"tour_restrictions_autre",imageType:"image/png",style:"default",childLayers:[{name:"tour_restrictions_autre__category"}]},{id:444,name:"anf_dates_battues",metadata:{exclusion:"[340]",is_queryable:!1,metadata_id:"cd5c65e3-ce29-4317-bc07-127bc679861f"},dimensions:{},type:"WMS",layers:"anf_dates_battues",imageType:"image/png",style:"default",childLayers:[{name:"anf_dates_battues__BATTUES_CHASSE"}]}],metadata:{},mixed:!0},{id:2811,name:"tour_randonnee_all",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_randonnee_all",imageType:"image/png",style:"default",childLayers:[{name:"tour_randonnee_all__category"}]}],metadata:{},mixed:!0},{id:2010,name:"tour_velo_new",children:[{id:2011,name:"tour_velo_radwege_new",children:[{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]},{id:512,name:"tour_pistes_velo_mymaps2",metadata:{is_queryable:!0,legend_name:"tour_velo_national",metadata_id:"e9fea021-2aab-4f58-a777-8c7536898d9b"},dimensions:{},type:"WMS",layers:"tour_pistes_velo_mymaps2",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_velo_mymaps2__category"}]},{id:2732,name:"tour_kommunales_radwegenetz",metadata:{is_queryable:!0,metadata_id:"dc769481-d0b2-430b-b350-41698fc3df79"},dimensions:{},type:"WMS",layers:"tour_kommunales_radwegenetz",imageType:"image/png",style:"default",childLayers:[{name:"tour_kommunales_radwegenetz__category"}]},{id:2705,name:"tour_Radwege_Nachbarlaender",metadata:{is_queryable:!0,metadata_id:"3c9b8eb4-310c-4918-abd6-8462c6d16a43"},dimensions:{},type:"WMS",layers:"tour_Radwege_Nachbarlaender",imageType:"image/png",style:"default",childLayers:[{name:"tour_Radwege_Nachbarlaender__category"}]}],metadata:{},mixed:!0},{id:2012,name:"tour_velo_radtouren_new",children:[{id:809,name:"lvi_circuits_cyclables",metadata:{is_queryable:!0,metadata_id:"e5e9ddf6-dfdb-4d3b-a0e2-d1be2272bf38"},dimensions:{},type:"WMS",layers:"lvi_circuits_cyclables",imageType:"image/png",style:"default",childLayers:[{name:"lvi_circuits_cyclables__category"}]},{id:676,name:"tour_velo_route",metadata:{is_queryable:!0,linked_layers:["1713","1714"],metadata_id:"2a07d7fb-ae3e-4385-bf61-b071a7f6ffbd"},dimensions:{},type:"WMS",layers:"tour_velo_route",imageType:"image/png",style:"default",childLayers:[{name:"tour_velo_route__category"}]},{id:293,name:"tour_pistes_vtt",metadata:{is_queryable:!0,linked_layers:["2026"],metadata_id:"2ea699a2-dc3c-4bd6-92fc-f7325b0c7fee"},dimensions:{},type:"WMS",layers:"tour_pistes_vtt",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_vtt__category"}]}],metadata:{},mixed:!0},{id:2706,name:"tour_Fernradwege",children:[{id:2701,name:"tour_EuroVelo5",metadata:{is_queryable:!0,metadata_id:"2355f6bd-8b91-42fc-8071-b47747fef4c8"},dimensions:{},type:"WMS",layers:"tour_EuroVelo5",imageType:"image/png",style:"default",childLayers:[{name:"tour_EuroVelo5__category"}]},{id:2702,name:"tour_Vennbahn",metadata:{is_queryable:!0,metadata_id:"07a2c2d2-f642-4a5a-9c76-bac2a641e481"},dimensions:{},type:"WMS",layers:"tour_Vennbahn",imageType:"image/png",style:"default",childLayers:[{name:"tour_Vennbahn__category"}]},{id:2703,name:"tour_SaarLorLux",metadata:{is_queryable:!0,metadata_id:"23815b5b-6d7a-49a3-9635-69f8a56ce835"},dimensions:{},type:"WMS",layers:"tour_SaarLorLux",imageType:"image/png",style:"default",childLayers:[{name:"tour_SaarLorLux__category"}]},{id:2704,name:"tour_Voie_bleue",metadata:{is_queryable:!0,metadata_id:"aa88ba5e-f09c-4d8f-9bb8-a3ba09b5f6f7"},dimensions:{},type:"WMS",layers:"tour_Voie_bleue",imageType:"image/png",style:"default",childLayers:[{name:"tour_Voie_bleue__category"}]}],metadata:{},mixed:!0},{id:2013,name:"tour_fahrradstationen_new",children:[{id:2821,name:"tour_fahrradverleih",metadata:{is_queryable:!0,metadata_id:"657c2a5f-9aac-4a7f-bf0d-1bd8500c8891"},dimensions:{},type:"WMS",layers:"tour_fahrradverleih",imageType:"image/png",style:"default",childLayers:[{name:"tour_fahrradverleih__21"},{name:"tour_fahrradverleih__22"}]},{id:2040,name:"tour_ebike_ladestationen",metadata:{is_queryable:!0,metadata_id:"f2a97908-06ba-4654-b302-039e5c14ee48"},dimensions:{},type:"WMS",layers:"tour_ebike_ladestationen",imageType:"image/png",style:"default",childLayers:[{name:"tour_ebike_ladestationen__10"}]},{id:2039,name:"tour_fahrradstationen_reparatur_wasch_new",metadata:{is_queryable:!0,metadata_id:"43adb071-d70e-415d-8c4e-3b64bff2a1cb"},dimensions:{},type:"WMS",layers:"tour_fahrradstationen_reparatur_wasch_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_fahrradstationen_reparatur_wasch_new__9"}]},{id:2733,name:"tour_fahrradstationen_waschstationen_new",metadata:{is_queryable:!0,metadata_id:"4cb92c0e-933a-4c6d-8a92-8f6755594641"},dimensions:{},type:"WMS",layers:"tour_fahrradstationen_waschstationen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_fahrradstationen_waschstationen_new__19"}]}],metadata:{},mixed:!0},{id:2014,name:"tour_restrictions_velo_new",children:[{id:1713,name:"chantiers_actuels_pc",metadata:{is_queryable:!0,metadata_id:"7d59f3a6-e8d8-464b-bbf9-73c6ca358a51",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_actuels_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_actuels_pc__CHANTIERS_ACTUEL_PC"}]},{id:1714,name:"chantiers_futurs_pc",metadata:{is_queryable:!0,metadata_id:"f6b9df36-5e62-46d1-ae91-c7c58c7e2e45",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_futurs_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_futurs_pc__CHANTIERS_FUTUR_PC"}]},{id:2026,name:"tour_restrictions_MTB_new",metadata:{is_queryable:!0,metadata_id:"ec4ddb2e-40b2-4844-9f1b-042427772e7b"},dimensions:{},type:"WMS",layers:"tour_restrictions_MTB_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_restrictions_MTB_new__category"}]},{id:444,name:"anf_dates_battues",metadata:{exclusion:"[340]",is_queryable:!1,metadata_id:"cd5c65e3-ce29-4317-bc07-127bc679861f"},dimensions:{},type:"WMS",layers:"anf_dates_battues",imageType:"image/png",style:"default",childLayers:[{name:"anf_dates_battues__BATTUES_CHASSE"}]}],metadata:{},mixed:!0},{id:725,name:"tour_tdl",metadata:{is_queryable:!0,metadata_id:"35226642-3f09-4f98-86b6-6e55316bce53"},dimensions:{},type:"WMS",layers:"tour_tdl",imageType:"image/png",style:"default",childLayers:[{name:"tour_tdl__category"}]}],metadata:{},mixed:!0},{id:336,name:"tour_auto_moto_v2",children:[{id:681,name:"tour_moto",metadata:{is_queryable:!0,metadata_id:"5256618e-6c50-4044-84cb-ce5740abe508"},dimensions:{},type:"WMS",layers:"tour_moto",imageType:"image/png",style:"default",childLayers:[{name:"tour_moto__category"}]},{id:254,name:"tour_touring",metadata:{is_queryable:!0,metadata_id:"89e49996-258f-4a7e-86a3-80e2e9af51c9"},dimensions:{},type:"WMS",layers:"tour_touring",imageType:"image/png",style:"default",childLayers:[{name:"tour_touring__category"}]},{id:685,name:"cita_chantiers_actuel",metadata:{is_queryable:!0,metadata_id:"9c823038-5965-47cc-8dad-21496e57e3f2",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_actuel",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_actuel__CHANTIERS_ACTUEL"}]},{id:2058,name:"grand_tour_luxembourg",metadata:{is_queryable:!0,metadata_id:"d0157590-ddaf-487a-8994-d7142fd07ed8"},dimensions:{},type:"WMS",layers:"grand_tour_luxembourg",imageType:"image/png",style:"default",childLayers:[{name:"grand_tour_luxembourg__category"}]},{id:2674,name:"tour_grand_tour_regionale_touren",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_grand_tour_regionale_touren",imageType:"image/png",style:"default",childLayers:[{name:"tour_grand_tour_regionale_touren__category"}]}],metadata:{},mixed:!0},{id:2015,name:"tour_mobilite_new",children:[{id:2016,name:"tour_bus_bahn_new",children:[{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:817,name:"cdt_lignes_cfl",metadata:{is_queryable:!0,metadata_id:"84ebdfbc-ba25-464c-af86-e74e588978ef"},dimensions:{},type:"WMS",layers:"cdt_lignes_cfl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_cfl__category"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:813,name:"cdt_lignes_all",metadata:{is_queryable:!0,metadata_id:"bbe0523f-374d-4c94-a27d-7ce81d8bae3b"},dimensions:{},type:"WMS",layers:"cdt_lignes_all",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_all__lignes_de_bus_detaillees"},{name:"cdt_lignes_all__lignes_de_bus_detaillees_mymaps"}]},{id:1374,name:"cdt_lignes_tram",metadata:{is_queryable:!0,metadata_id:"0f46c673-d4b4-4c25-8d9a-fca41035f587"},dimensions:{},type:"WMS",layers:"cdt_lignes_tram",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tram__category"}]}],metadata:{},mixed:!0},{id:2017,name:"tour_auto_new",children:[{id:377,name:"mobiliteit_pr",metadata:{is_queryable:!0,legend_name:"mobiliteit:pr",max_dpi:128,metadata_id:"9e0c97ae-aff9-41fc-9489-bbf97999163d"},dimensions:{},type:"WMS",layers:"mobiliteit_pr",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_pr__0"}]},{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:2707,name:"mmtp_electromobilite_AC",metadata:{is_queryable:!0,metadata_id:"08885ef4-d534-47d4-8b93-2883c71a8452"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_AC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_AC__0"}]},{id:2708,name:"mmtp_electromobilite_DC",metadata:{is_queryable:!0,metadata_id:"624d34e4-1192-40bb-871a-e6c8720d766b"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_DC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_DC__2"}]},{id:713,name:"pch_radars",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"385180ba-a9bc-49d4-8858-ba5f19942a66",start_opacity:1},dimensions:{},type:"WMS",layers:"pch_radars",imageType:"image/png",style:"default",childLayers:[{name:"pch_radars__1"},{name:"pch_radars__2"}]},{id:685,name:"cita_chantiers_actuel",metadata:{is_queryable:!0,metadata_id:"9c823038-5965-47cc-8dad-21496e57e3f2",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_actuel",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_actuel__CHANTIERS_ACTUEL"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2018,name:"tour_erleben_new",children:[{id:2042,name:"tour_tourist_info_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_tourist_info_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_tourist_info_new__7"}]},{id:2030,name:"tour_essen_uebernachten_new",children:[{id:2038,name:"tour_hotels_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_hotels_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_hotels_new__2"}]},{id:2037,name:"tour_camping_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_camping_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_camping_new__11"}]},{id:2036,name:"tour_jugendherberge_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_jugendherberge_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_jugendherberge_new__12"}]},{id:2035,name:"tour_fewo_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_fewo_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_fewo_new__13"}]},{id:2034,name:"tour_bb_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_bb_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_bb_new__14"}]},{id:2033,name:"tour_restaurants_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_restaurants_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_restaurants_new__15"}]}],metadata:{},mixed:!0},{id:2031,name:"tour_kultur_new",children:[{id:2044,name:"tour_burgen_schloesser_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_burgen_schloesser_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_burgen_schloesser_new__16"}]},{id:2043,name:"tour_museen_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_museen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_museen_new__17"}]},{id:2027,name:"tour_unesco_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_unesco_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_unesco_new__category"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2032,name:"tour_erste_hilfe_new",children:[{id:2047,name:"hopitaux",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"2047",imageType:"image/png",style:"default",childLayers:[{name:"hopitaux__POI"}]},{id:1621,name:"points_sauvetage_vdl",metadata:{is_queryable:!0,metadata_id:"f8938381-7f09-45d1-becd-506b76327562"},dimensions:{},type:"WMS",layers:"points_sauvetage_vdl",imageType:"image/png",style:"default",childLayers:[{name:"points_sauvetage_vdl__0"}]}],metadata:{},mixed:!0},{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",css:"tourisme.css",display_in_switcher:!0,link_title:"Send email",page_title:"tourisme.geoportail.lu",print_img:"bandeautourisme.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"tourisme.geoportal.lu",print_short_txt_en:"tourisme.geoportal.lu",print_short_txt_fr:"tourisme.geoportail.lu",print_short_txt_lu:"tourisme.geoportal.lu",show_in_mobile:!0}},{id:105,name:"emwelt",icon:"emwelt",children:[{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0},{id:245,name:"env_zones_protegees",children:[{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:334,name:"env_zones_protegees_communautaires",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1823,name:"anf_mesures_compensatoires_group",children:[{id:1827,name:"anf_secteurs_ecologiques_compensation_ecopoint",metadata:{is_queryable:!0,metadata_id:"22033820-7317-4bcc-9c4c-df5b9ca80550"},dimensions:{},type:"WMS",layers:"anf_secteurs_ecologiques_compensation_ecopoint",imageType:"image/png",style:"default",childLayers:[{name:"anf_secteurs_ecologiques_compensation_ecopoint__SECTEURS_COMPENSATION"}]},{id:1822,name:"anf_projets_compensation_approuves",metadata:{is_queryable:!0,metadata_id:"03aafc0c-c443-42ea-963a-8538a3f089d4"},dimensions:{},type:"WMS",layers:"anf_projets_compensation_approuves",imageType:"image/png",style:"default",childLayers:[{name:"anf_projets_compensation_approuves__ZONES_COMPENSATION_APPROUVEES"}]}],metadata:{},mixed:!0},{id:161,name:"env_obs",children:[{id:1963,name:"env_couverture_sol",children:[{id:1951,name:"LISL_Landcover_2018",metadata:{is_queryable:!0,legend_name:"lisl:lc2018",metadata_id:"6142a6a6-9356-47ac-babe-eaa2ae3628b6"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2018__0"},{name:"LISL_Landcover_2018__1"}]},{id:1950,name:"LISL_Landcover_2015_v2",metadata:{is_queryable:!0,legend_name:"lisl:lc2015_2",metadata_id:"67f4ecb8-5d4b-4a9e-a60b-239fc92b25a7"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2015_v2",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2015_v2__0"},{name:"LISL_Landcover_2015_v2__1"}]},{id:2714,name:"LISL_Landcover_2021",metadata:{is_queryable:!0,legend_name:"lisl:lc2018",metadata_id:"e7afeac8-c649-4c91-ab15-ea40b8986ebc"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2021",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2021__0"},{name:"LISL_Landcover_2021__4"}]}],metadata:{},mixed:!0},{id:1964,name:"env_utilisation_sol",children:[{id:1970,name:"LISL_Landuse_2018",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2018",metadata_id:"e4572e0b-1b40-4834-b6c3-ccab83f75f57"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2018__0"}]},{id:2054,name:"LISL_Landuse_2015_v3",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2015_v3",metadata_id:"65e04718-1890-4c5e-8be7-08a73f69c0cc"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2015_v3",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2015_v3__0"}]},{id:1969,name:"LISL_Landuse_2007",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2007",metadata_id:"257556b9-560b-4193-b773-e16a9137a690"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2007",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2007__0"}]}],metadata:{},mixed:!0},{id:1965,name:"env_impermeabilisation",children:[{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]},{id:2216,name:"at_impermeabilisation_grid_2018_100m",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_100m",metadata_id:"210db74a-e33a-401b-9e17-2cd966cdcd1f"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_100m",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_100m__0"}]},{id:2215,name:"at_impermeabilisation_grid_2018_1km",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_1km",metadata_id:"8dc777d0-f910-4c69-a476-85a73dcd8474"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_1km",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_1km__0"}]}],metadata:{},mixed:!0},{id:2212,name:"at_batiments_group",children:[{id:2214,name:"at_batiments_periode_construction",metadata:{is_queryable:!0,legend_name:"at:periode_construction_batiments",metadata_id:"7c138282-86de-4adb-91c2-467b06786821"},dimensions:{},type:"WMS",layers:"at_batiments_periode_construction",imageType:"image/png",style:"default",childLayers:[{name:"at_batiments_periode_construction__0"}]}],metadata:{},mixed:!0},{id:1966,name:"env_occupation_biophysique",children:[{id:215,name:"env_obs2007",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"bd672300-0851-4901-82c4-6099aff1fcf7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_obs2007",imageType:"image/png"},{id:163,name:"env_obs1999",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"b4836d86-2803-4dcf-a991-7e78ab9c41b6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_obs1999",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:276,name:"env_sentiers",children:[{id:316,name:"env_sentiersnature",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfc8de82-e187-4547-a1da-83385f86c786"},dimensions:{},type:"WMS",layers:"env_sentiersnature",imageType:"image/png",style:"default",childLayers:[{name:"env_sentiersnature__sentiers_nature"}]},{id:1857,name:"anf_itineraire_nature",metadata:{is_queryable:!0,legend_name:"anf:vakanz_doheem",metadata_id:"fb71d4b6-b11a-4bf0-9b23-cddaa17e058c"},dimensions:{},type:"WMS",layers:"anf_itineraire_nature",imageType:"image/png",style:"default",childLayers:[{name:"anf_itineraire_nature__0"}]},{id:1968,name:"np_uewersauer_randonnee_eau",metadata:{is_queryable:!0,metadata_id:"2bfd404c-1734-491d-94c3-59a16a3edf2c"},dimensions:{},type:"WMS",layers:"np_uewersauer_randonnee_eau",imageType:"image/png",style:"default",childLayers:[{name:"np_uewersauer_randonnee_eau__category"}]}],metadata:{},mixed:!0},{id:280,name:"anf_unites_admin",children:[{id:427,name:"anf_arrondissements",metadata:{is_queryable:!0,metadata_id:"0ed72c13-1975-4cef-90de-1e4b737f5fbd"},dimensions:{},type:"WMS",layers:"anf_arrondissements",imageType:"image/png",style:"default",childLayers:[{name:"anf_arrondissements__ARRONDISSEMENTS"}]},{id:428,name:"anf_triages",metadata:{is_queryable:!0,metadata_id:"d4bb012a-73ab-4d3c-ac0c-f31e9df07d34"},dimensions:{},type:"WMS",layers:"anf_triages",imageType:"image/png",style:"default",childLayers:[{name:"anf_triages__TRIAGES"}]}],metadata:{},mixed:!0},{id:241,name:"anf_forets",children:[{id:677,name:"anf_proprietes_forestieres",metadata:{is_queryable:!0,legend_name:"anf:proprietes_forestieres",metadata_id:"fa6d38c7-263c-4349-b208-45652f9b98ca"},dimensions:{},type:"WMS",layers:"anf_proprietes_forestieres",imageType:"image/png",style:"default",childLayers:[{name:"anf_proprietes_forestieres__PROPRIETES_FORESTIERES"}]},{id:1514,name:"anf_forets_publiques_fsc_pefc",metadata:{is_queryable:!0,legend_name:"anf:proprietes_forestieres",metadata_id:"ad654091-a8b2-45db-91ff-f3eef50bbe38"},dimensions:{},type:"WMS",layers:"anf_forets_publiques_fsc_pefc",imageType:"image/png",style:"default",childLayers:[{name:"anf_forets_publiques_fsc_pefc__PROPRIETES_FORESTIERES_CERTIFIEES"}]},{id:389,name:"anf_peuplements_semenciers",metadata:{is_queryable:!0,metadata_id:"5d2b9400-3f94-4962-ad67-8b7e923d6d8b"},dimensions:{},type:"WMS",layers:"anf_peuplements_semenciers",imageType:"image/png",style:"default",childLayers:[{name:"anf_peuplements_semenciers__PEUPLEMENTS_SEMENCIERS"}]}],metadata:{},mixed:!0},{id:1953,name:"anf_especes",children:[{id:1961,name:"anf_amphibiens",children:[{id:1962,name:"anf_amphibiens_sauvetage",metadata:{is_queryable:!0,metadata_id:"348a241e-27c4-4d31-8cf0-e99626efa6a1"},dimensions:{},type:"WMS",layers:"anf_amphibiens_sauvetage",imageType:"image/png",style:"default",childLayers:[{name:"anf_amphibiens_sauvetage__0"}]},{id:2759,name:"anf_roadkill",metadata:{is_queryable:!0,metadata_id:"7868aa30-1480-49a7-85ad-bb117974c55e"},dimensions:{},type:"WMS",layers:"anf_roadkill",imageType:"image/png",style:"default",childLayers:[{name:"anf_roadkill__1"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2483,name:"anf_corridors_faune_sauvage_group",children:[{id:2482,name:"anf_corridors_faune_sauvage",metadata:{metadata_id:"58a2c50b-0f4e-4d9c-95ff-5851eebf6e58"},dimensions:{},type:"WMS",layers:"anf_corridors_faune_sauvage",imageType:"image/png",style:"default",childLayers:[{name:"anf_corridors_faune_sauvage__corridors_ecologiques"}]}],metadata:{},mixed:!0},{id:180,name:"anf_secteurs_ecologiques_group",children:[{id:690,name:"anf_secteurs_ecologiques",metadata:{is_queryable:!0,metadata_id:"8afa4162-c23b-4001-b737-4074d4f5360f"},dimensions:{},type:"WMS",layers:"anf_secteurs_ecologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_secteurs_ecologiques__SECTEURS_ECOLOGIQUES"}]}],metadata:{},mixed:!0},{id:322,name:"anf_chasse",children:[{id:1783,name:"anf_lots_chasse_2021",metadata:{exclusion:"[340]",is_queryable:!0,metadata_id:"a8d8f46d-f6b1-4bb0-9935-be825cffab3f"},dimensions:{},type:"WMS",layers:"anf_lots_chasse_2021",imageType:"image/png",style:"default",childLayers:[{name:"anf_lots_chasse_2021__LOTS_CHASSE_2021"}]},{id:444,name:"anf_dates_battues",metadata:{exclusion:"[340]",is_queryable:!1,metadata_id:"cd5c65e3-ce29-4317-bc07-127bc679861f"},dimensions:{},type:"WMS",layers:"anf_dates_battues",imageType:"image/png",style:"default",childLayers:[{name:"anf_dates_battues__BATTUES_CHASSE"}]},{id:1496,name:"anf_centre_ramassage",metadata:{is_queryable:!0,metadata_id:"44f25bb0-6b7d-46fa-8388-ccdf682797ce"},dimensions:{},type:"WMS",layers:"anf_centre_ramassage",imageType:"image/png",style:"default",childLayers:[{name:"anf_centre_ramassage__RAMASSAGE_GIBIER"}]},{id:1658,name:"anf_zone_prevention_ppa",metadata:{is_queryable:!0,metadata_id:"62f2a3ed-5893-4ed2-aba7-77159b10fb2e"},dimensions:{},type:"WMS",layers:"anf_zone_prevention_ppa",imageType:"image/png",style:"default",childLayers:[{name:"anf_zone_prevention_ppa__0"}]}],metadata:{},mixed:!0},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0},{id:1361,name:"aev_casipo_group",children:[{id:1362,name:"aev_casipo",metadata:{is_queryable:!0,metadata_id:"974688ed-130e-4704-ba2c-72154ed0cecb"},dimensions:{},type:"WMS",layers:"aev_casipo",imageType:"image/png",style:"default",childLayers:[{name:"aev_casipo__PARCELLES"}]},{id:1858,name:"aev_anciennes_decharges",metadata:{is_queryable:!0,metadata_id:"ec1a8607-5f8d-4baa-9b14-1aa8ed0a828a"},dimensions:{},type:"WMS",layers:"aev_anciennes_decharges",imageType:"image/png",style:"default",childLayers:[{name:"aev_anciennes_decharges__1"}]}],metadata:{},mixed:!0},{id:1355,name:"aev_qualite_air",children:[{id:2697,name:"aev_qualite_air_zonage",children:[{id:2698,name:"aev_qualite_air_zonage_2021",metadata:{is_queryable:!0,metadata_id:"51eddfec-31e8-4b2a-adba-595e09816ff5"},dimensions:{},type:"WMS",layers:"aev_qualite_air_zonage_2021",imageType:"image/png",style:"default",childLayers:[{name:"aev_qualite_air_zonage_2021__4"},{name:"aev_qualite_air_zonage_2021__5"}]},{id:2725,name:"aev_qualite_air_ancien_zonage",metadata:{is_queryable:!0,metadata_id:"f3a40ebf-e5ad-4495-a0ce-83bbb3df02ed"},dimensions:{},type:"WMS",layers:"aev_qualite_air_ancien_zonage",imageType:"image/png",style:"default",childLayers:[{name:"aev_qualite_air_ancien_zonage__3"}]}],metadata:{},mixed:!0},{id:1472,name:"aev_modelisation",children:[{id:1430,name:"air_quality_o3",metadata:{is_queryable:!0,legend_name:"aev:air_quality_o3",metadata_id:"4ebe5c4d-2318-4caa-bace-3e3784a41509",start_opacity:.75},dimensions:{},type:"WMS",layers:"air_quality_no2",imageType:"image/png",style:"default",childLayers:[{name:"air_quality_o3__1"},{name:"air_quality_o3__7"}]},{id:1429,name:"air_quality_no2",metadata:{is_queryable:!0,legend_name:"aev:air_quality",metadata_id:"d405406f-c1c7-4f47-ae40-e76008a91c4a",start_opacity:.75},dimensions:{},type:"WMS",layers:"air_quality_o3",imageType:"image/png",style:"default",childLayers:[{name:"air_quality_no2__0"},{name:"air_quality_no2__7"}]},{id:1425,name:"air_quality_pm10",metadata:{is_queryable:!0,legend_name:"aev:air_quality_pm10",metadata_id:"94d2f0ea-f0ce-4a79-be7f-1d018deffb61",start_opacity:.7},dimensions:{},type:"WMS",layers:"air_quality_pm10",imageType:"image/png",style:"default",childLayers:[{name:"air_quality_pm10__2"},{name:"air_quality_pm10__7"}]},{id:1480,name:"air_quality_pm2_5",metadata:{is_queryable:!0,legend_name:"aev:air_quality_pm2_5",metadata_id:"5b62c615-448c-4d74-8914-3275e64fbc1e",start_opacity:.75},dimensions:{},type:"WMS",layers:"air_quality_pm2_5",imageType:"image/png",style:"default",childLayers:[{name:"air_quality_pm2_5__7"},{name:"air_quality_pm2_5__9"}]}],metadata:{},mixed:!0},{id:1473,name:"aev_air_mesures",children:[{id:1357,name:"aev_reseau_telemetrique",metadata:{is_queryable:!0,metadata_id:"1be21b78-5824-47d6-87c1-db60c5e3d856"},dimensions:{},type:"WMS",layers:"aev_reseau_telemetrique",imageType:"image/png",style:"default",childLayers:[{name:"aev_reseau_telemetrique__0"}]},{id:1358,name:"aev_poussieres_fines",metadata:{is_queryable:!0,metadata_id:"5e6fa76e-d6d7-41d8-b88f-9ae00e3222d5"},dimensions:{},type:"WMS",layers:"aev_poussieres_fines",imageType:"image/png",style:"default",childLayers:[{name:"aev_poussieres_fines__3"}]},{id:1359,name:"aev_reseau_bergerhoff",metadata:{is_queryable:!0,metadata_id:"735a1453-00f3-402e-91b0-2cd9e677cd2c"},dimensions:{},type:"WMS",layers:"aev_reseau_bergerhoff",imageType:"image/png",style:"default",childLayers:[{name:"aev_reseau_bergerhoff__5"}]},{id:1426,name:"aev_reseau_biosurveillance",metadata:{is_queryable:!0,metadata_id:"68871fde-72b1-45e6-b891-14a8746264ea"},dimensions:{},type:"WMS",layers:"aev_reseau_biosurveillance",imageType:"image/png",style:"default",childLayers:[{name:"aev_reseau_biosurveillance__1"}]}],metadata:{},mixed:!0},{id:1704,name:"aev_mesurage_no2",children:[{id:2696,name:"aev_pacte_climat_participation_communes",metadata:{is_queryable:!0,metadata_id:"60879bfa-1eaa-4b58-984d-405bf2282b1b"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_participation_communes",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_participation_communes__0"}]},{id:2812,name:"aev_pacte_climat_2023",metadata:{is_queryable:!0,legend_name:"aev:klimapakt2023",metadata_id:"223a6d2c-ac2c-4b95-9beb-900fd9b3e168"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2023__10"}]},{id:2594,name:"aev_pacte_climat_2022",metadata:{is_queryable:!0,legend_name:"aev:klimapakt",metadata_id:"9bbf8bb1-b693-49db-8c03-222425195ddc"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2022",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2022__9"}]},{id:2400,name:"aev_pacte_climat_2021",metadata:{is_queryable:!0,legend_name:"aev:klimapakt",metadata_id:"4ce0368e-af4e-456f-9dd1-7969b73360d7"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2021",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2021__8"}]},{id:2088,name:"aev_pacte_climat_2020",metadata:{is_queryable:!0,legend_name:"aev:pacte_climat_2020",metadata_id:"805db173-9621-4b9a-ae8a-a8fae34a791b"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2020",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2020__7"}]},{id:1848,name:"aev_pacte_climat_2019",metadata:{is_queryable:!0,legend_name:"aev:pacte_climat_2019",metadata_id:"aff9f715-babc-4f0b-a86b-16651d626bde"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2019",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2019__5"},{name:"aev_pacte_climat_2019__6"}]},{id:1477,name:"aev_pacte_climat_2018",metadata:{is_queryable:!0,legend_name:"aev:pacte_climat",metadata_id:"bb5aa932-2669-4802-9c34-c370addbc798"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2018",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2018__2"},{name:"aev_pacte_climat_2018__3"}]}],metadata:{},mixed:!0},{id:2171,name:"env_air_inventaires_emissions",children:[{id:2143,name:"env_GRETA",children:[{id:2144,name:"aev_GRETA_A_PublicPower_NOX",metadata:{is_queryable:!0,metadata_id:"587c5d9a-ac3d-42ae-8544-6688020d80df"},dimensions:{},type:"WMS",layers:"aev_GRETA_A_PublicPower_NOX",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_A_PublicPower_NOX__1"}]},{id:2145,name:"aev_GRETA_B_Industry_PCB",metadata:{is_queryable:!0,metadata_id:"a6c3a9cd-9c3d-4f68-9252-403a0a8241c8"},dimensions:{},type:"WMS",layers:"aev_GRETA_B_Industry_PCB",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_B_Industry_PCB__2"}]},{id:2146,name:"aev_GRETA_C_OtherStationaryComb_CO",metadata:{is_queryable:!0,metadata_id:"b922e53c-cfb9-4f7d-8cfe-166b3e518642"},dimensions:{},type:"WMS",layers:"aev_GRETA_C_OtherStationaryComb_CO",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_C_OtherStationaryComb_CO__3"}]},{id:2147,name:"aev_GRETA_D_Fugitive_NMVOC",metadata:{is_queryable:!0,metadata_id:"68f34bfe-dfa8-4d8e-a6df-d8ef47ea296a"},dimensions:{},type:"WMS",layers:"aev_GRETA_D_Fugitive_NMVOC",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_D_Fugitive_NMVOC__4"}]},{id:2148,name:"aev_GRETA_E_Solvents_NMVOC",metadata:{is_queryable:!0,metadata_id:"49ef5406-e0cb-4d36-91f0-c8cd349bb79e"},dimensions:{},type:"WMS",layers:"aev_GRETA_E_Solvents_NMVOC",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_E_Solvents_NMVOC__5"}]},{id:2149,name:"aev_GRETA_F_RoadTransport_NOX",metadata:{is_queryable:!0,metadata_id:"b262fc22-b815-47b4-8a58-8f4c958f0b8e"},dimensions:{},type:"WMS",layers:"aev_GRETA_F_RoadTransport_NOX",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_F_RoadTransport_NOX__6"}]},{id:2150,name:"aev_GRETA_G_Shipping_CO",metadata:{is_queryable:!0,metadata_id:"16a8476a-67ad-43e0-bf86-a0f75eb25d51"},dimensions:{},type:"WMS",layers:"aev_GRETA_G_Shipping_CO",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_G_Shipping_CO__7"}]},{id:2151,name:"aev_GRETA_H_Aviation_NOX",metadata:{is_queryable:!0,metadata_id:"86c039b8-58e8-45b4-8c80-57d341e6a192"},dimensions:{},type:"WMS",layers:"aev_GRETA_H_Aviation_NOX",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_H_Aviation_NOX__8"}]},{id:2152,name:"aev_GRETA_I_Offroad_CO",metadata:{is_queryable:!0,metadata_id:"09fed776-d254-46c3-85ad-21f4f05ac902"},dimensions:{},type:"WMS",layers:"aev_GRETA_I_Offroad_CO",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_I_Offroad_CO__9"}]},{id:2153,name:"aev_GRETA_J_Waste_PCDD",metadata:{is_queryable:!0,metadata_id:"f2219f8d-c455-4c14-9f72-5a0b62fd1fa6"},dimensions:{},type:"WMS",layers:"aev_GRETA_J_Waste_PCDD",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_J_Waste_PCDD__10"}]},{id:2154,name:"aev_GRETA_K_AgrilLivestock_NH3",metadata:{is_queryable:!0,metadata_id:"789a7a4a-0006-4512-b53d-b76173401231"},dimensions:{},type:"WMS",layers:"aev_GRETA_K_AgrilLivestock_NH3",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_K_AgrilLivestock_NH3__11"}]},{id:2155,name:"aev_GRETA_L_AgriOther_NH3",metadata:{is_queryable:!0,metadata_id:"a55b1da7-7e0e-4de0-8e4e-02700bc77a21"},dimensions:{},type:"WMS",layers:"aev_GRETA_L_AgriOther_NH3",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_L_AgriOther_NH3__12"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2172,name:"env_air_installations_tegistres",children:[{id:1465,name:"aev_medium_combustion_plants",metadata:{geocatalog_open_data_last_update_date:"2024-02-09T02:03:38.8412602",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65af7951656c669c7e2c7b68",is_queryable:!0,metadata_id:"1c8dc7c5-f94f-49f6-9d96-3a129b28a922"},dimensions:{},type:"WMS",layers:"aev_medium_combustion_plants",imageType:"image/png",style:"default",childLayers:[{name:"aev_medium_combustion_plants__0"}]},{id:2459,name:"aev_ets_quota",children:[{id:2460,name:"aev_ets_quota_phase3",children:[{id:2450,name:"aev_ets_quota_2013",metadata:{is_queryable:!0,metadata_id:"3a525901-e999-43b7-b76f-4b2685c3126f"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2013",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2013__9"}]},{id:2451,name:"aev_ets_quota_2014",metadata:{is_queryable:!0,metadata_id:"fb7bd65d-1ba7-46ea-bd0a-8fea5ad31fa0"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2014",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2014__8"}]},{id:2452,name:"aev_ets_quota_2015",metadata:{is_queryable:!0,metadata_id:"8c5c24de-6cd4-4799-b15f-be94147f338f"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2015",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2015__7"}]},{id:2453,name:"aev_ets_quota_2016",metadata:{is_queryable:!0,metadata_id:"ae7abf2b-fcd7-4f77-8ffb-b973cdd8efe2"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2016",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2016__6"}]},{id:2454,name:"aev_ets_quota_2017",metadata:{is_queryable:!0,metadata_id:"49168300-890e-4005-9ff2-50db00430846"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2017",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2017__5"}]},{id:2455,name:"aev_ets_quota_2018",metadata:{is_queryable:!0,metadata_id:"75c126a0-0778-4c08-87a1-d568a0112674"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2018",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2018__4"}]},{id:2456,name:"aev_ets_quota_2019",metadata:{is_queryable:!0,metadata_id:"1fbfd062-d911-4186-900d-7ea60f49a533"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2019",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2019__3"}]},{id:2457,name:"aev_ets_quota_2020",metadata:{is_queryable:!0,metadata_id:"b6ad5f19-97bd-4617-8f78-b1805cd8381f"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2020",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2020__2"}]}],metadata:{},mixed:!0},{id:2461,name:"aev_ets_quota_phase4",children:[{id:2458,name:"aev_ets_quota_2021",metadata:{is_queryable:!0,metadata_id:"bbbc661a-2f1c-43f3-9f38-ef7cf7156081"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2021",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2021__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:166,name:"env_bruit",children:[{id:2123,name:"env_bruit_modelisation",children:[{id:232,name:"env_bruit_axes_routiers",children:[{id:2764,name:"aev_bruit_roads_2021_Lden",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lden",metadata_id:"5504291e-3457-416d-84a3-438a83ae029d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lden",imageType:"image/png"},{id:2763,name:"aev_bruit_roads_2021_Lngt",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lngt",metadata_id:"43e0ddd5-7575-4ce7-b558-2114196bd6fe",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lngt",imageType:"image/png"},{id:1497,name:"env_bruit2016_axes_routiers_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"cf1a21cc-8208-420e-bd7e-091d755b6ace",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lden",imageType:"image/png"},{id:1500,name:"env_bruit2016_axes_routiers_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"83ae2d3b-f0d9-4584-8c48-f6722bd4f517",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lngt",imageType:"image/png"},{id:1504,name:"env_bruit_axes_routiers_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"c5a6e3c5-6bef-4ff9-ac3e-aa494a34e602"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots_2016__3"},{name:"env_bruit_axes_routiers_hotspots_2016__13"}]},{id:1505,name:"env_bruit_axes_routiers_agglomeration_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"a6c63355-6e42-4795-9d72-8744b907b151"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration_2016__6"},{name:"env_bruit_axes_routiers_agglomeration_2016__13"}]},{id:326,name:"env_bruit_axes_routiers_lden",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"3e3aa044-89e0-4676-9404-744f64dd7ba0",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lden",imageType:"image/png"},{id:255,name:"env_bruit_axes_routiers_lngt",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"5e4f2607-b114-4884-8e48-8e1faa997eb4",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lngt",imageType:"image/png"},{id:1475,name:"env_bruit_axes_routiers_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"ff6b3d63-871c-4e88-8fc0-0f276abe259a"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots__10"},{name:"env_bruit_axes_routiers_hotspots__13"}]},{id:1485,name:"env_bruit_axes_routiers_agglomeration",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"f1dd0dd5-4dd5-4d88-b556-af39a20ab137",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration__12"},{name:"env_bruit_axes_routiers_agglomeration__13"}]}],metadata:{},mixed:!0},{id:183,name:"env_bruit_axes_ferroviaires",children:[{id:2761,name:"aev_bruit_railways_2021_Lden",metadata:{is_queryable:!0,metadata_id:"e48e5b8f-9388-47ae-b12f-575ed7416ce1",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lden__46"}]},{id:2762,name:"aev_bruit_railways_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"c2106415-df81-4208-9714-7dad0479ab71",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lngt__47"}]},{id:1498,name:"env_bruit2016_axes_ferroviaires_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"7975b71b-2fd4-45e6-8c0a-306671d665c6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lden",imageType:"image/png"},{id:1502,name:"env_bruit2016_axes_ferroviaires_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"170143ce-53ef-4b2b-997c-a2ccb1b84477",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lngt",imageType:"image/png"},{id:1503,name:"env_bruit_axes_ferroviaires_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"29ef44c6-f357-4d21-829c-f2fdd5fe1149"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots_2016__1"},{name:"env_bruit_axes_ferroviaires_hotspots_2016__13"}]},{id:310,name:"env_bruit_axes_ferroviaires_lden",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"32b40d1c-111e-4eed-91c7-61d61ef27b8d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lden",imageType:"image/png"},{id:259,name:"env_bruit_axes_ferroviaires_lngt",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"2d7e26ad-e448-45a2-9045-3dfb3e3ec15b",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lngt",imageType:"image/png"},{id:1476,name:"env_bruit_axes_ferroviaires_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"d3b30653-d0bf-4924-96b2-251e9f61c979"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots__8"},{name:"env_bruit_axes_ferroviaires_hotspots__13"}]}],metadata:{},mixed:!0},{id:190,name:"env_bruit_air",children:[{id:2667,name:"aev_bruit_aeroport_2021_Lden",metadata:{is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"4ceeb788-86c8-420d-a161-43607ed4e89a",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lden__40"}]},{id:2668,name:"aev_bruit_aeroport_2021_Lngt",metadata:{is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"71277cc9-4b62-4199-8a2e-71ca4a863519",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lngt__41"}]},{id:1501,name:"env_bruit2016_axes_aeroport_lden",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"26e208ff-39a3-4cf6-92db-4c6707fe972a",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lden",imageType:"image/png"},{id:1499,name:"env_bruit2016_axes_aeroport_lngt",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"2aa6f79d-74cc-4f22-bedd-748f8e8e30b9",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lngt",imageType:"image/png"},{id:157,name:"env_bruit_air_lden",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"0f4dcfc5-e947-4e5c-9460-702b8e1a572f",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lden",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lden__70"}]},{id:327,name:"env_bruit_air_lngt",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"6b031060-1f82-467d-af86-afe02a3f04fa",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lngt",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lngt__72"}]}],metadata:{},mixed:!0},{id:2771,name:"env_bruit_agglo",children:[{id:2769,name:"aev_bruit_agglo_industry_2021_Lden",metadata:{is_queryable:!0,metadata_id:"4faed79e-f82c-4758-b4bf-df654951b27f",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_industry_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_industry_2021_Lden__37"}]},{id:2770,name:"aev_bruit_agglo_industry_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"e1e006c9-c637-4e2a-840f-3b7e8a04ce1e",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_industry_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_industry_2021_Lngt__38"}]},{id:2768,name:"aev_bruit_agglo_roads_2021_Lden",metadata:{is_queryable:!0,metadata_id:"0015e212-a7e5-42f6-ba94-3fdb5014513c",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_roads_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_roads_2021_Lden__35"}]},{id:2767,name:"aev_bruit_agglo_roads_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"9718d119-a073-4406-8bf1-d4b409ed6a68",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_roads_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_roads_2021_Lngt__36"}]},{id:2765,name:"aev_bruit_agglo_tram_2021_Lden",metadata:{is_queryable:!0,metadata_id:"47bbe08f-dbb4-4a4f-bbf7-8c6084e6da45",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_tram_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_tram_2021_Lden__33"}]},{id:2766,name:"aev_bruit_agglo_tram_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"e11fbfdf-29c4-4845-ad12-e2fc2ef5f530",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_tram_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_tram_2021_Lngt__34"}]}],metadata:{},mixed:!0},{id:2124,name:"env_bruit_multiexposition",children:[{id:2125,name:"aev_multiexposition_Lden",metadata:{is_queryable:!0,metadata_id:"37c1c1a2-1926-4c92-8c2a-b9ce0ac6cfef"},dimensions:{},type:"WMS",layers:"aev_multiexposition_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_multiexposition_Lden__1"}]},{id:2126,name:"aev_multiexposition_Lnight",metadata:{is_queryable:!0,metadata_id:"a536e129-3c0f-4a6c-a767-0519eec880c1"},dimensions:{},type:"WMS",layers:"aev_multiexposition_Lnight",imageType:"image/png",style:"default",childLayers:[{name:"aev_multiexposition_Lnight__2"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1641,name:"aev_campagne_mesure_bruit",children:[{id:2618,name:"aev_bruit_campagne_2023",children:[{id:2726,name:"aev_campagne_bruit_aeroportuaire_2023",metadata:{is_queryable:!0,metadata_id:"3c6a1f70-51ab-4c8b-9a09-c163bafd23ff"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_aeroportuaire_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_aeroportuaire_2023__109"}]}],metadata:{},mixed:!0},{id:2475,name:"env_bruit_campagne_2022",children:[{id:2619,name:"aev_campagne_bruit_routier_2023",metadata:{is_queryable:!0,metadata_id:"e242b817-86a7-4f70-bc41-8e90d264fd19"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_routier_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_routier_2023__97"}]},{id:2620,name:"aev_campagne_bruit_ferroviaire_2023",metadata:{is_queryable:!0,metadata_id:"c3c06743-6876-4f55-802d-4599000c1681"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_ferroviaire_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_ferroviaire_2023__94"}]}],metadata:{},mixed:!0},{id:1916,name:"aev_silent_cities_2020",children:[{id:1917,name:"aev_silent_cities_2020_phase1",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase1",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase1__7"}]},{id:1918,name:"aev_silent_cities_2020_phase2",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase2",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase2__8"}]},{id:1919,name:"aev_silent_cities_2020_phase3",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase3",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase3__9"}]}],metadata:{},mixed:!0},{id:1921,name:"env_bruit_routes_hotspots_2019_group",children:[{id:1642,name:"env_bruit_routes_hotspots_2019",metadata:{is_queryable:!0,legend_name:"aev:hotspots_rail",metadata_id:"f898e289-c5dd-432b-b3e6-de4c3681b77a"},dimensions:{},type:"WMS",layers:"env_bruit_routes_hotspots_2019",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_routes_hotspots_2019__4"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1382,name:"aev_zones_calmes",children:[{id:1383,name:"aev_zones_calmes_rurales",metadata:{is_queryable:!0,legend_name:"aev:zones_calmes",metadata_id:"49cfe40d-b006-4aaa-831b-11d1e19e1411"},dimensions:{},type:"WMS",layers:"aev_zones_calmes_rurales",imageType:"image/png",style:"default",childLayers:[{name:"aev_zones_calmes_rurales__12"}]},{id:1384,name:"aev_zones_calmes_urbaines",metadata:{is_queryable:!0,legend_name:"aev:zones_calmes",metadata_id:"82ba068d-81c3-41d3-a24a-f5dc2545d005"},dimensions:{},type:"WMS",layers:"aev_zones_calmes_urbaines",imageType:"image/png",style:"default",childLayers:[{name:"aev_zones_calmes_urbaines__10"},{name:"aev_zones_calmes_urbaines__7"}]},{id:1385,name:"aev_oases_urbaines",metadata:{is_queryable:!0,legend_name:"aev:zones_calmes",metadata_id:"655d2f1e-c4b6-4f33-a4d1-4171d64bc3b1"},dimensions:{},type:"WMS",layers:"aev_oases_urbaines",imageType:"image/png",style:"default",childLayers:[{name:"aev_oases_urbaines__11"},{name:"aev_oases_urbaines__8"}]},{id:1828,name:"aev_zones_calmes_campagne_groupe",children:[{id:1829,name:"aev_zones_calmes_camp2020_ZCP",metadata:{is_queryable:!0,legend_name:"aev:zones_calmes_20",metadata_id:"d6f1740a-4c8a-40aa-a564-ddb6735f5a34"},dimensions:{},type:"WMS",layers:"aev_zones_calmes_camp2020_ZCP",imageType:"image/png",style:"default",childLayers:[{name:"aev_zones_calmes_camp2020_ZCP__13"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2131,name:"env_esch22",children:[{id:2130,name:"env_esch22_soundwalks",children:[{id:2127,name:"aev_soundwalks_fading_thunders",metadata:{is_queryable:!0,metadata_id:"1374bb36-c9c4-4be0-b81c-d7d1d7ae9684"},dimensions:{},type:"WMS",layers:"aev_soundwalks_fading_thunders",imageType:"image/png",style:"default",childLayers:[{name:"aev_soundwalks_fading_thunders__1"},{name:"aev_soundwalks_fading_thunders__2"}]},{id:2128,name:"aev_soundwalks_city_stories",metadata:{is_queryable:!0,metadata_id:"0e47e8c5-1a26-4928-9a94-d26eba39c738"},dimensions:{},type:"WMS",layers:"aev_soundwalks_city_stories",imageType:"image/png",style:"default",childLayers:[{name:"aev_soundwalks_city_stories__4"},{name:"aev_soundwalks_city_stories__5"}]},{id:2129,name:"aev_soundwalks_blue_noise",metadata:{is_queryable:!0,metadata_id:"3e7eea7f-c751-4c7a-9abb-7bdda313628c"},dimensions:{},type:"WMS",layers:"aev_soundwalks_blue_noise",imageType:"image/png",style:"default",childLayers:[{name:"aev_soundwalks_blue_noise__7"},{name:"aev_soundwalks_blue_noise__8"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1510,name:"aev_dechets",children:[{id:1509,name:"aev_dechets_biogas",metadata:{is_queryable:!0,metadata_id:"2f4a0025-33a4-4015-9acd-4660cef27129"},dimensions:{},type:"WMS",layers:"aev_dechets_biogas",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_biogas__1"}]},{id:1506,name:"aev_dechets_composting",metadata:{is_queryable:!0,metadata_id:"fe751427-564d-44b3-9d06-90a5d1a5054c"},dimensions:{},type:"WMS",layers:"aev_dechets_composting",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_composting__0"}]},{id:1507,name:"aev_dechets_inert_waste",metadata:{is_queryable:!0,metadata_id:"e17908a0-c45d-4312-bc8b-fdde4b5c5d83"},dimensions:{},type:"WMS",layers:"aev_dechets_inert_waste",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_inert_waste__2"}]},{id:1508,name:"aev_dechets_recycling",metadata:{is_queryable:!0,metadata_id:"7dc38059-fbac-4287-99aa-4d04bb7dd761"},dimensions:{},type:"WMS",layers:"aev_dechets_recycling",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_recycling__3"}]},{id:1801,name:"aev_dechets_menager",metadata:{is_queryable:!0,metadata_id:"8e63ec89-7d10-4374-88bc-580caabf9783"},dimensions:{},type:"WMS",layers:"aev_dechets_menager",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_menager__5"}]},{id:1933,name:"aev_dechets_stations_epuration",metadata:{is_queryable:!0,metadata_id:"b821085f-91a1-431e-a385-2f9e0dfef43d"},dimensions:{},type:"WMS",layers:"aev_dechets_stations_epuration",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_stations_epuration__6"}]},{id:2723,name:"aev_dechets_boues_epuration",metadata:{is_queryable:!0,metadata_id:"2c6d717e-6534-4c2b-86a7-b3b99c4cf114"},dimensions:{},type:"WMS",layers:"aev_dechets_boues_epuration",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_boues_epuration__7"}]}],metadata:{},mixed:!0},{id:1466,name:"aev_facilities_registers",children:[{id:803,name:"cadastre_hertzien_group",children:[{id:811,name:"mat_antennes_moins_50_watt",metadata:{is_queryable:!0,legend_name:"at:antennesbelow50w",metadata_id:"cbf57825-26ba-4e36-98e8-083c1945066c"},dimensions:{},type:"WMS",layers:"mat_antennes_moins_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_antennes_moins_50_watt__0"}]},{id:1930,name:"mat_5G_antennes_plus_50_watt",metadata:{is_queryable:!0,metadata_id:"76e25a5d-8e78-40cb-a54b-9cfc27b16e60"},dimensions:{},type:"WMS",layers:"mat_5G_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_5G_antennes_plus_50_watt__0"}]},{id:2053,name:"mat_5G-3.6GHZ_antennes_plus_50_watt",metadata:{is_queryable:!0,metadata_id:"e048acda-0ec7-4f52-8221-613d9312c28b"},dimensions:{},type:"WMS",layers:"mat_5G-3.6GHZ_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_5G-3.6GHZ_antennes_plus_50_watt__0"}]},{id:801,name:"mat_antennes_plus_50_watt",metadata:{is_queryable:!0,legend_name:"at:antennes",metadata_id:"e4a24392-591c-4d20-a62b-f75a9191488d"},dimensions:{},type:"WMS",layers:"mat_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_antennes_plus_50_watt__0"}]},{id:802,name:"mat_points_mesure",metadata:{is_queryable:!0,legend_name:"at:pointmesure",metadata_id:"f8f71353-40b8-4e10-b72c-85d8fe9e0577"},dimensions:{},type:"WMS",layers:"mat_points_mesure",imageType:"image/png",style:"default",childLayers:[{name:"mat_points_mesure__0"}]}],metadata:{is_expanded:!0},mixed:!0},{id:1360,name:"aev_emplacements_eoliennes",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:02:39.4998465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"5e739028d2bfb222b781c722",is_queryable:!0,legend_name:"aev:eoliennes",metadata_id:"354c5313-a733-4121-8f0d-5e0932d563b7"},dimensions:{},type:"WMS",layers:"aev_emplacements_eoliennes",imageType:"image/png",style:"default",childLayers:[{name:"aev_emplacements_eoliennes__2"}]},{id:1826,name:"aev_facilities_ied",metadata:{geocatalog_open_data_last_update_date:"2024-07-17T01:05:05.5508376",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"6690f0b6663adf116ea5d0f9",is_queryable:!0,legend_name:"aev_facilities_ied",metadata_id:"2606152c-0169-41a2-843e-861e15e9024c"},dimensions:{},type:"WMS",layers:"aev_facilities_ied",imageType:"image/png",style:"default",childLayers:[{name:"aev_facilities_ied__0"}]},{id:798,name:"seveso",metadata:{is_queryable:!0,legend_name:"seveso",metadata_id:"b9ab14d8-4e51-4146-b019-3937715a8fe8"},dimensions:{},type:"WMS",layers:"seveso",imageType:"image/png",style:"default",childLayers:[{name:"seveso__POI"}]}],metadata:{},mixed:!0},{id:1467,name:"radon",children:[{id:1468,name:"carte_radon_communes",metadata:{is_queryable:!0,legend_name:"radon",metadata_id:"80309cdb-b664-4ea8-a3a4-c602f5814f79",start_opacity:.7},dimensions:{},type:"WMS",layers:"carte_radon_communes",imageType:"image/png",style:"default",childLayers:[{name:"carte_radon_communes__3"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",css:"anf.css",display_in_switcher:!0,link_title:"Portail Environnement",page_title:"emwelt.geoportail.lu",print_img:"anf_right.jpg",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"emwelt.geoportal.lu",print_short_txt_en:"emwelt.geoportal.lu",print_short_txt_fr:"emwelt.geoportail.lu",print_short_txt_lu:"emwelt.geoportal.lu",show_in_mobile:!0}},{id:128,name:"eau",icon:"eau",children:[{id:234,name:"eau_basisdaten",children:[{id:317,name:"eau_topographie",children:[{id:206,name:"topo_20k",metadata:{legend_name:"topo_20k",metadata_id:"ea998ae8-731a-43bc-aa9f-171684f97602"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_20k",imageType:"image/png"}],metadata:{},mixed:!0},{id:160,name:"eau_luft_sat_bilder",children:[{id:2056,name:"ortho_2020",metadata:{exclusion:"[119,219]",metadata_id:"87870b8a-10a1-4c33-bf50-7efe851fd450"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2020",imageType:"image/jpeg"},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1784,name:"ortho_2019",metadata:{exclusion:"[116,216]",metadata_id:"97c88ef6-6c64-4cb0-a134-06bb42b2b448"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019",imageType:"image/jpeg"},{id:1527,name:"ortho_2018",metadata:{exclusion:"[113,213]",metadata_id:"6fde72c4-802f-4663-be74-5fa5901cb4f0"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2018",imageType:"image/jpeg"},{id:1371,name:"ortho_2017",metadata:{exclusion:"[111,211]",metadata_id:"1cdae616-1a7a-49d5-b35d-05864891641f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017",imageType:"image/jpeg"},{id:745,name:"ortho_2016",metadata:{exclusion:"[107,207]",metadata_id:"bba79b6d-4205-4ce4-98e4-7b7922afcd55"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016",imageType:"image/jpeg"},{id:224,name:"ortho_2004",metadata:{exclusion:"[103,203]",metadata_id:"a185f78a-ca9c-43f8-8d06-b1abba8ff056"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2004",imageType:"image/jpeg"},{id:225,name:"ortho_2001",metadata:{exclusion:"[104,204]",metadata_id:"e6ff269c-1c7c-401f-a90b-b805e80a046e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2001",imageType:"image/jpeg"},{id:292,name:"wg_ikonos_satellitendaten",metadata:{legend_name:"wg:ikonos_satellitendaten",metadata_id:"db0eea79-114a-4e61-a1f2-7e064f92cdd3"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_ikonos_satellitendaten",imageType:"image/png"}],metadata:{},mixed:!0},{id:318,name:"eau_landnutzung",children:[{id:301,name:"wg_landnutzung",metadata:{is_queryable:!0,legend_name:"wg:landnutzung",metadata_id:"f53e9c0b-a269-48e6-b77c-061e7ac2e116",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_landnutzung",imageType:"image/png"},{id:308,name:"wg_versiegelungsklassen",metadata:{legend_name:"wg:versiegelungsklassen",metadata_id:"7e48b187-3080-4bf6-aaa8-6a58fe513380",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_versiegelungsklassen",imageType:"image/png"}],metadata:{},mixed:!0},{id:186,name:"eau_grenzen",children:[{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]}],metadata:{},mixed:!0},{id:165,name:"adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0},{id:169,name:"eau_zones_protegees",children:[{id:207,name:"eau_zones_protegees_nationales",children:[{id:319,name:"eau_anf_reserves",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:330,name:"geodesy",children:[{id:1831,name:"ng_new",metadata:{is_queryable:!0,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"ng_new",imageType:"image/png",style:"default",childLayers:[{name:"ng_new__0"}]},{id:411,name:"ng",metadata:{is_queryable:!0,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"ng",imageType:"image/png",style:"default",childLayers:[{name:"ng__POINT_NG"}]},{id:1724,name:"points_reference_gps",metadata:{is_queryable:!0,metadata_id:"fd406ca9-2542-4de9-8cee-7ee0a16c7f42"},dimensions:{},type:"WMS",layers:"points_reference_gps",imageType:"image/png",style:"default",childLayers:[{name:"points_reference_gps__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:453,name:"eau_new_Messstationen",children:[{id:485,name:"eau_new_Hydrologische_Messstationen",children:[{id:655,name:"eau_new_Wasserstand",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:12.0164112",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"59c220a4111e9b1de61d8864",is_queryable:!0,legend_name:"eau:wasserstand",max_dpi:128,metadata_id:"124abb10-1d87-4449-912b-06fbf307a95f"},dimensions:{},type:"WMS",layers:"eau_new_Wasserstand",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Wasserstand__2"}]},{id:653,name:"eau_new_Alluvialer_Grundwasserspiegel",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.915308",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5fd1caf5e9996e5faf62ea74",is_queryable:!0,legend_name:"eau:alluvialer_grundwasserspiegel",max_dpi:128,metadata_id:"4d328b62-5df3-4205-a45a-4d3d36dc0fa8"},dimensions:{},type:"WMS",layers:"eau_new_Alluvialer_Grundwasserspiegel",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Alluvialer_Grundwasserspiegel__3"}]}],metadata:{},mixed:!0},{id:460,name:"eau_new_Klimatologische_Messstationen",children:[{id:609,name:"eau_new_Niederschlag",metadata:{is_queryable:!0,legend_name:"eau:niederschlag",max_dpi:128,metadata_id:"288300c6-5d83-45a6-98ef-4146f37129e2"},dimensions:{},type:"WMS",layers:"eau_new_Niederschlag",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Niederschlag__5"}]},{id:595,name:"eau_new_Lufttemperatur",metadata:{is_queryable:!0,legend_name:"eau:lufttemperatur",max_dpi:128,metadata_id:"6d73e310-0ef2-4e19-863d-387a90405e78"},dimensions:{},type:"WMS",layers:"eau_new_Lufttemperatur",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Lufttemperatur__6"}]},{id:620,name:"eau_new_Bodentemperatur",metadata:{is_queryable:!0,legend_name:"eau:bodentemperatur",max_dpi:128,metadata_id:"ebded1e9-613e-4f58-a47f-386676a0a39f"},dimensions:{},type:"WMS",layers:"eau_new_Bodentemperatur",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bodentemperatur__7"}]},{id:610,name:"eau_new_Schneehoehe",metadata:{is_queryable:!0,legend_name:"eau:schneehoehe",max_dpi:128,metadata_id:"60c9ec41-6fa8-4aed-8822-bfdad9ab755d"},dimensions:{},type:"WMS",layers:"eau_new_Schneehoehe",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Schneehoehe__8"}]},{id:615,name:"eau_new_Luftfeucht",metadata:{is_queryable:!0,legend_name:"eau:luftfeucht",max_dpi:128,metadata_id:"bbb784cd-a8f2-4f60-8d2d-8a7bd341ac73"},dimensions:{},type:"WMS",layers:"eau_new_Luftfeucht",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Luftfeucht__9"}]},{id:563,name:"eau_new_Luftdruck",metadata:{is_queryable:!0,legend_name:"eau:luftdruck",max_dpi:128,metadata_id:"1ebc644b-0643-495f-84ed-c820459920cc"},dimensions:{},type:"WMS",layers:"eau_new_Luftdruck",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Luftdruck__10"}]},{id:616,name:"eau_new_Globalstrahlung",metadata:{is_queryable:!0,legend_name:"eau:globalstrahlung",max_dpi:128,metadata_id:"f5d2d484-adb2-46fc-95f0-9a94c85db5de"},dimensions:{},type:"WMS",layers:"eau_new_Globalstrahlung",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Globalstrahlung__11"}]}],metadata:{},mixed:!0},{id:472,name:"eau_new_Oberflaechengewaesser_Messstationen",children:[{id:2487,name:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_2e_zyklus",metadata:{is_queryable:!0,legend_name:"eau:wrrl_ueberwachungsnetzwerk_owk_-_2e_zyklus",metadata_id:"97e6564c-7758-4850-9606-c690a1c1c4ba"},dimensions:{},type:"WMS",layers:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_2e_zyklus",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_2e_zyklus__432"}]},{id:2488,name:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_3e_zyklus",metadata:{is_queryable:!0,legend_name:"eau:wrrl_ueberwachungsnetzwerk_owk_-_3e_zyklus",metadata_id:"01a0bbed-f787-4f5b-a89f-1abed736896c"},dimensions:{},type:"WMS",layers:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_3e_zyklus",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_3e_zyklus__433"}]},{id:654,name:"eau_new_Oberflchengewsser_Nitratrichtlinie_91_676_CEE",metadata:{geocatalog_open_data_last_update_date:"2024-09-03T01:02:57.1228277",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66d6604000b5fead3c39cf42",is_queryable:!0,legend_name:"eau:nitratrichtlinie_messstationen",max_dpi:128,metadata_id:"dc7d9871-2693-4714-b1f6-ab202a59d28b"},dimensions:{},type:"WMS",layers:"654",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflchengewsser_Nitratrichtlinie_91_676_CEE__16"}]}],metadata:{},mixed:!0},{id:473,name:"eau_new_Grundwasser_Messstationen",children:[{id:2489,name:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_2e_zyklus",metadata:{is_queryable:!0,legend_name:"eau:wrrl_ueberwachungsnetzwerk_gwk_-_2e_zyklus",metadata_id:"b3fda5d5-c071-4ea0-bb1c-d2bf9ca36af1"},dimensions:{},type:"WMS",layers:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_2e_zyklus",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_2e_zyklus__466"}]},{id:2490,name:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_3e_zyklus",metadata:{is_queryable:!0,legend_name:"eau:wrrl_ueberwachungsnetzwerk_gwk_-_3e_zyklus",metadata_id:"d0f6a240-48c4-434c-a762-cd2fdb427cf9"},dimensions:{},type:"WMS",layers:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_3e_zyklus",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_3e_zyklus__467"}]},{id:570,name:"eau_new_Grundwasser_Nitratrichtlinie_91_676_CEE",metadata:{geocatalog_open_data_last_update_date:"2024-09-04T01:03:05.9320276",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66d7b1c987ac9208bf4692ea",is_queryable:!0,legend_name:"eau:grundwasser_nitratrichtlinie",max_dpi:128,metadata_id:"9b358488-a605-46af-81eb-90c4ab7c9931"},dimensions:{},type:"WMS",layers:"570",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasser_Nitratrichtlinie_91_676_CEE__320"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:484,name:"eau_new_Hydrografie",children:[{id:450,name:"eau_new_Gewaessernetz",children:[{id:749,name:"eau_new_Gewsser",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewsser__23"},{name:"eau_new_Gewsser__24"},{name:"eau_new_Gewsser__25"}]},{id:651,name:"eau_new_Kanal_-__Muehlgraben",metadata:{is_queryable:!0,legend_name:"eau:kanal_-__muehlgraben",max_dpi:128,metadata_id:"909501fc-a0a9-4af8-8e82-f2a8d7f2fe2f"},dimensions:{},type:"WMS",layers:"eau_new_Kanal_-__Muehlgraben",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kanal_-__Muehlgraben__26"}]},{id:750,name:"eau_new_Kilometrierung der Gewsser",metadata:{legend_name:"eau:kilometrierung_primaere_gewaesser_kilometrierung_sekundaere_gewaesser",metadata_id:"4002b1cf-08b5-421a-bc92-40271d62f03c"},dimensions:{},type:"WMS",layers:"eau_new_Kilometrierung der Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kilometrierung der Gewsser__27"},{name:"eau_new_Kilometrierung der Gewsser__28"}]},{id:636,name:"eau_new_Einzugsgebiete",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.8156287",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb010cc765e17f1820811",is_queryable:!0,legend_name:"eau:einzugsgebiete",max_dpi:128,metadata_id:"a295a30a-f819-400c-842c-d0ccc695bea5"},dimensions:{},type:"WMS",layers:"eau_new_Einzugsgebiete",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einzugsgebiete__29"}]},{id:569,name:"eau_new_Stausee_Sauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:09.6659471",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece210cc765e1a2422811f",is_queryable:!0,legend_name:"eau:stausee_sauer",max_dpi:128,metadata_id:"119ad2e3-b44f-4777-883d-d2d522bafeca"},dimensions:{},type:"WMS",layers:"eau_new_Stausee_Sauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Stausee_Sauer__30"}]}],metadata:{},mixed:!0},{id:451,name:"eau_new_Fischerei",children:[{id:626,name:"eau_new_Fischereiabschnitte",metadata:{geocatalog_open_data_last_update_date:"2024-09-11T01:02:43.2828183",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecb079111e9b02db9a6ece",is_queryable:!0,legend_name:"eau:fischereiabschnitte",max_dpi:128,metadata_id:"bd6be85a-cec4-4e4d-9657-cffa242db28f"},dimensions:{},type:"WMS",layers:"eau_new_Fischereiabschnitte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fischereiabschnitte__37"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:483,name:"eau_new_Grundwasser",children:[{id:628,name:"eau_new_Bohrungen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:16.7602644",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb039cc765e18ae5ed882",is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen__39"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]},{id:631,name:"eau_new_Grundwasserleiter",metadata:{geocatalog_open_data_last_update_date:"2024-06-03T01:02:35.1743465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecafe1cc765e18ae5ed87e",is_queryable:!0,legend_name:"eau:grundwasserleiter",max_dpi:128,metadata_id:"783a8608-e4b3-44ed-8864-68525da33760"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserleiter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserleiter__41"}]},{id:2396,name:"eau_new_Einschraenkung_Waermepumpe_(public)",metadata:{legend_name:"eau:einschraenkung_waermepumpe",max_dpi:128,metadata_id:"ed3ff125-47cc-4247-abaf-77e05cf60984"},dimensions:{},type:"WMS",layers:"eau_new_Einschraenkung_Waermepumpe_(public)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einschraenkung_Waermepumpe_(public)__453"}]},{id:2288,name:"eau_new_Einschraenkung_Waermepumpe_nouvelle_couche",metadata:{legend_name:"eau:einschraenkung_waermepumpe_15m",max_dpi:128,metadata_id:"b2d715ed-660e-46e6-8c5f-ee3327e0fcb9"},dimensions:{},type:"WMS",layers:"eau_new_Einschraenkung_Waermepumpe_nouvelle_couche",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einschraenkung_Waermepumpe_nouvelle_couche__446"}]},{id:2794,name:"eau_restrictions_forages_prives_prelevement",metadata:{legend_name:"eau:restrictions_nouveaux_forages_prives",metadata_id:"b2f60fc1-c2e8-4472-a8e2-4e11a862b257"},dimensions:{},type:"WMS",layers:"eau_restrictions_forages_prives_prelevement",imageType:"image/png",style:"default",childLayers:[{name:"eau_restrictions_forages_prives_prelevement__475"}]}],metadata:{},mixed:!0},{id:448,name:"eau_new_Trinkwasser",children:[{id:567,name:"eau_new_Trinkwasserentnahmepunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.3958552",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb044cc765e17f1820812",is_queryable:!0,legend_name:"eau:trinkwasserentnahmepunkte",max_dpi:128,metadata_id:"a049086b-9c17-4ba6-b9bf-78cb4af8ee68"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwasserentnahmepunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwasserentnahmepunkte__47"}]},{id:598,name:"eau_new_Trinkwasserbehaelter",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:23.7053926",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb062cc765e18ae5ed883",is_queryable:!0,legend_name:"eau:trinkwasserbehaelter",max_dpi:128,metadata_id:"abe5466d-e045-4872-a17c-7379adc497f5"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwasserbehaelter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwasserbehaelter__49"}]},{id:538,name:"eau_new_Trinkwassersyndikate",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.3237467",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecb057111e9b02db9a6ecd",is_queryable:!0,legend_name:"eau_new:trinkwassersyndikate",max_dpi:128,metadata_id:"63ecd69e-5714-4311-b05a-5bfa191ac546"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwassersyndikate",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwassersyndikate__50"}]},{id:2573,name:"eau_certificat_drepsi",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:09.7919567",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"665921c12d0aeb8d9802c3d3",is_queryable:!0,legend_name:"eau:drepsi",metadata_id:"5ecb8e6f-383d-424c-a399-f2faa3e24a8d"},dimensions:{},type:"WMS",layers:"eau_certificat_drepsi",imageType:"image/png",style:"default",childLayers:[{name:"eau_certificat_drepsi__468"}]},{id:1754,name:"eau_new_qualite_eau_potable",children:[{id:1767,name:"eau_new_wasserhaerte",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.6951685",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"665921c72d0aeb8d9802c3d4",legend_name:"eau:wasserhaerte",metadata_id:"28e8de6e-9274-4e62-be68-a071b6e8db1c"},dimensions:{},type:"WMS",layers:"eau_new_wasserhaerte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_wasserhaerte__361"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:373,name:"eau_new_Trinkwasser_Schutzzonen_(ZPS)",children:[{id:214,name:"eau_new_Provisorische_ZPS",metadata:{geocatalog_open_data_last_update_date:"2024-10-03T01:04:17.082383",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece254111e9b03b03833c4",is_queryable:!0,legend_name:"eau:provisorische_zps",max_dpi:128,metadata_id:"ddc51f25-2fb7-4d14-866a-a08f8af8ef03"},dimensions:{},type:"WMS",layers:"eau_new_Provisorische_ZPS",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Provisorische_ZPS__130"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:1464,name:"eau_prgd_zones_protection_lac",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.5407176",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5b571c9546f3b55625dc355c",is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_prgd_zones_protection_lac__349"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]},{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]}],metadata:{},mixed:!0},{id:469,name:"eau_new_Schutzgebiete",children:[{id:656,name:"eau_new_Badegewaesser",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecaff2cc765e18ae5ed87f",is_queryable:!0,legend_name:"eau:badegewaesser",max_dpi:128,metadata_id:"72f770ee-7290-4ecb-9358-580b7cfcadf7"},dimensions:{},type:"WMS",layers:"eau_new_Badegewaesser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Badegewaesser__135"}]},{id:581,name:"eau_new_Badegewaesser_-_Qualitaet",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece261cc765e1a24228120",is_queryable:!0,legend_name:"eau:badegewaesser_-_qualitaet",max_dpi:128,metadata_id:"c0c9c705-8b26-4a0b-b9bb-e2243cd5386a"},dimensions:{},type:"WMS",layers:"eau_new_Badegewaesser_-_Qualitaet",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Badegewaesser_-_Qualitaet__136"}]},{id:612,name:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_uuid:"57ece27bcc765e1a270cf61d",is_queryable:!0,legend_name:"eau:empfindliche_gebiete_kommunalabwasserrichtlinie",max_dpi:128,metadata_id:"39952e6c-8e73-4a23-a19c-78c4f06c84d9"},dimensions:{},type:"WMS",layers:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)__139"}]},{id:492,name:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)",metadata:{geocatalog_open_data_last_update_date:"2024-09-04T01:02:59.0520396",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66d7b1c287ac9208bf4692e9",is_queryable:!0,legend_name:"eau:gefaehrdete_gebiete_nitratrichtlinie",max_dpi:128,metadata_id:"9426a9a6-7cb1-4c1a-a504-40dabc4429c0"},dimensions:{},type:"WMS",layers:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)__140"}]}],metadata:{},mixed:!0},{id:470,name:"eau_new_Gewaesserschutz",children:[{id:643,name:"eau_new_Abwassersyndikate",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.7305149",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece2dd111e9b03b03833c5",is_queryable:!0,legend_name:"eau:abwassersyndikate",max_dpi:128,metadata_id:"4b5e384c-5603-4cf4-9bd5-6e520df5c375"},dimensions:{},type:"WMS",layers:"eau_new_Abwassersyndikate",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Abwassersyndikate__143"}]},{id:645,name:"eau_new_Klaeranlagen",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.116702",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece288cc765e1a25470f74",is_queryable:!0,legend_name:"eau:klaeranlagen",max_dpi:128,metadata_id:"53e55765-90eb-438f-a744-3ac878b06334"},dimensions:{},type:"WMS",layers:"eau_new_Klaeranlagen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Klaeranlagen__142"}]}],metadata:{},mixed:!0},{id:486,name:"eau_new_Hochwasserrisikomanagement-Richtlinie [HWRM-RL]",children:[{id:1696,name:"eau_new_Risikogewaesser_2019_group",children:[{id:1703,name:"eau_Risikogewaesser_2019",metadata:{is_queryable:!0,legend_name:"eau:risikogewaesser_2019",metadata_id:"762cd956-9733-4855-afa7-38768a38e8a1"},dimensions:{},type:"WMS",layers:"eau_Risikogewaesser_2019",imageType:"image/png",style:"default",childLayers:[{name:"eau_Risikogewaesser_2019__16"}]}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:1711,name:"eau_atlas_crues_subites",children:[{id:2045,name:"age_dangers_fortes",metadata:{legend_name:"age_dangers_fortes",metadata_id:"55dbe91c-f1e5-4c56-b0b9-4590988e23e5"},dimensions:{},type:"WMS",layers:"age_dangers_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_dangers_fortes__0"},{name:"age_dangers_fortes__1"}]},{id:2046,name:"age_risques_fortes",metadata:{legend_name:"age_risques_fortes",metadata_id:"f1d9b1cd-ad78-44df-89ac-ad591138243f"},dimensions:{},type:"WMS",layers:"age_risques_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_risques_fortes__1"},{name:"age_risques_fortes__2"},{name:"age_risques_fortes__3"},{name:"age_risques_fortes__4"},{name:"age_risques_fortes__5"}]}],metadata:{},mixed:!0},{id:461,name:"eau_new_Historische_Ueberschwemmungsgebiete",children:[{id:637,name:"eau_new_UESG_1983_-_Mosel",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.2797021",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde16111e9b03b03833be",is_queryable:!0,legend_name:"eau:uesg_1983_-_mosel",max_dpi:128,metadata_id:"e6896207-c0f9-417e-9661-119128628e8e"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1983_-_Mosel",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1983_-_Mosel__122"}]},{id:641,name:"eau_new_UESG_1993_(ausser_Mosel)",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:25.7826569",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde1e111e9b03b03833bf",is_queryable:!0,legend_name:"eau:uesg_1993_ausser_mosel",max_dpi:128,metadata_id:"78c692f3-ad20-467b-b03a-0d020a821647"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1993_(ausser_Mosel)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1993_(ausser_Mosel)__123"}]},{id:642,name:"eau_new_UESG_Alzette_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.5894792",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde26111e9b03b03833c0",is_queryable:!0,legend_name:"eau:uesg_alzette_1995",max_dpi:128,metadata_id:"aaf81780-df85-4580-a890-fded8ae03db7"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Alzette_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Alzette_1995__124"}]},{id:633,name:"eau_new_UESG_Sauer_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.4493603",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde30111e9b03b222c3b5",is_queryable:!0,legend_name:"eau:uesg_sauer_1995",max_dpi:128,metadata_id:"f01f7be2-0423-4571-8fff-57dd617ae632"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Sauer_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Sauer_1995__125"}]},{id:2116,name:"eau_Hochwasserkarten_2021",children:[{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:463,name:"eau_new_Zusaetzliche_Informationen",children:[{id:756,name:"eau_new_Hochwasser Brennpunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.8729061",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"5fd1cadde9996e5faf62ea6f",is_queryable:!0,legend_name:"eau:hochwasser_brennpunkte",metadata_id:"b2bfd06d-5f05-4abf-8f41-103d40a380e7"},dimensions:{},type:"WMS",layers:"eau_new_Hochwasser Brennpunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hochwasser Brennpunkte__309"}]},{id:758,name:"eau_new_Manahmens des Hochwasserrisikomanagementplans",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:03:13.4638796",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"66e4e0d15a1785364d6db3fb",is_queryable:!0,legend_name:"eau:massnahmens_des_hochwasserrisikomanagementplans",metadata_id:"4326fea6-7ec4-4bb9-861f-4476b0d4ceac"},dimensions:{},type:"WMS",layers:"eau_new_Manahmens des Hochwasserrisikomanagementplans",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Manahmens des Hochwasserrisikomanagementplans__314"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:474,name:"eau_new_Wasserrahmenrichtlinie",children:[{id:1469,name:"eau_strahlwirkungskonzept",metadata:{is_queryable:!0,legend_name:"eau:strahlwirkungskonzept",metadata_id:"e1744b8e-101e-406d-b742-776d488a00b5"},dimensions:{},type:"WMS",layers:"eau_strahlwirkungskonzept",imageType:"image/png",style:"default",childLayers:[{name:"eau_strahlwirkungskonzept__351"},{name:"eau_strahlwirkungskonzept__352"}]},{id:475,name:"eau_new_Bewirtschaftungsplan_2009",children:[{id:644,name:"eau_new_Betrachtungsraeume_2009",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2009",max_dpi:128,metadata_id:"be15dd7d-df57-44e1-b724-0929cf05eef9"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2009__146"}]},{id:607,name:"eau_new_Typologie_Oberflaechengewasser_2009",metadata:{is_queryable:!0,legend_name:"eau:typologie_oberflaechengewasser_2009",max_dpi:128,metadata_id:"0d1d73f0-7644-4217-a0df-b6c497508592"},dimensions:{},type:"WMS",layers:"eau_new_Typologie_Oberflaechengewasser_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Typologie_Oberflaechengewasser_2009__147"}]},{id:601,name:"eau_new_Oberflaechenwasserkoerper_2009",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2009",max_dpi:128,metadata_id:"404cf7b4-f70b-4c2c-a44b-89e297fab0f8"},dimensions:{},type:"WMS",layers:"eau_new_Oberflaechenwasserkoerper_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflaechenwasserkoerper_2009__148"}]},{id:634,name:"eau_new_Erheblich vernderte Wasserkrper 2009",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_owk_2009",max_dpi:128,metadata_id:"78da31c2-55eb-40c9-99fe-22ff409468c2"},dimensions:{},type:"WMS",layers:"eau_new_Erheblich vernderte Wasserkrper 2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erheblich vernderte Wasserkrper 2009__149"}]},{id:603,name:"eau_new_Grundwasserkoerper_2009",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2009",max_dpi:128,metadata_id:"f23ca424-ec87-4c53-929c-7e627a8e06af"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserkoerper_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserkoerper_2009__151"}]},{id:468,name:"eau_new_Zustand_der_Wasserkoerper_(WK)_2009",children:[{id:464,name:"eau_new_Oberflaechengewaesser_2009",children:[{id:585,name:"eau_new_Gesamtzustand_2009",metadata:{is_queryable:!0,legend_name:"eau:gesamtzustand_2009",max_dpi:128,metadata_id:"44862c13-7006-44a4-99e6-2877ea512714"},dimensions:{},type:"WMS",layers:"eau_new_Gesamtzustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gesamtzustand_2009__154"}]},{id:586,name:"eau_new_Chemischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2009",max_dpi:128,metadata_id:"d934fbcc-02c6-47fa-a23d-cfbe49214709"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_2009__155"}]},{id:614,name:"eau_new_Oekologischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:oekologischer_zustand_2009",max_dpi:128,metadata_id:"92d28c19-ed51-4e9e-8a80-831144fe3553"},dimensions:{},type:"WMS",layers:"eau_new_Oekologischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oekologischer_Zustand_2009__156"}]},{id:593,name:"eau_new_Hydromorphologischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologischer_zustand_2009",max_dpi:128,metadata_id:"0227e64f-11ef-4f0a-8853-48fd7385f2b1"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologischer_Zustand_2009__157"}]}],metadata:{},mixed:!0},{id:435,name:"eau_new_Grundwasser_2009",children:[{id:657,name:"eau_new_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_wk_2009",max_dpi:128,metadata_id:"2df25c38-15d5-447f-a269-4184ce781050"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_WK_2009__159"}]},{id:605,name:"eau_new_Quantitativer_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_wk_2009",max_dpi:128,metadata_id:"a9ebce38-6c8b-447e-9d22-46ba333fa63c"},dimensions:{},type:"WMS",layers:"eau_new_Quantitativer_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quantitativer_Zustand_der_WK_2009__160"}]},{id:441,name:"eau_new_Chemischer_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_wk_2009",max_dpi:128,metadata_id:"e9a72fec-29a0-4183-9e3a-6d4f49c9fea7"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_der_WK_2009__161"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:480,name:"eau_new_Bewirtschaftungsplan_2015",children:[{id:536,name:"eau_new_Oberflaechenwasserkoerper_2015",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2015",max_dpi:128,metadata_id:"ead261ed-7be1-4435-9cf5-d1527a18bd19"},dimensions:{},type:"WMS",layers:"eau_new_Oberflaechenwasserkoerper_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflaechenwasserkoerper_2015__165"}]},{id:658,name:"eau_new_Erheblich vernderte Wasserkrper 2015",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_wk_2015",max_dpi:128,metadata_id:"78da31c2-55eb-40c9-99fe-22ff409468c2"},dimensions:{},type:"WMS",layers:"eau_new_Erheblich vernderte Wasserkrper 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erheblich vernderte Wasserkrper 2015__166"}]},{id:619,name:"eau_new_Betrachtungsraeume_2015",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2015",max_dpi:128,metadata_id:"be15dd7d-df57-44e1-b724-0929cf05eef9"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2015__163"}]},{id:588,name:"eau_new_Typologie_Gewaesser_2015",metadata:{is_queryable:!0,legend_name:"eau:typologie_gewaesser_2015",max_dpi:128,metadata_id:"c7eea236-ad59-47fc-8c02-630fee3292dc"},dimensions:{},type:"WMS",layers:"eau_new_Typologie_Gewaesser_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Typologie_Gewaesser_2015__164"}]},{id:1470,name:"eau_fliessgewaessertypen_2015",metadata:{is_queryable:!0,legend_name:"eau:fliessgewaessertypen_2015_lawa",metadata_id:"79f4588f-a264-4921-a382-d1f83cf48da3"},dimensions:{},type:"WMS",layers:"eau_fliessgewaessertypen_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_fliessgewaessertypen_2015__354"}]},{id:759,name:"eau_new_Strukturgtekartierung 2015 [7-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2015_7-stufige_bewertung",metadata_id:"dd28de7b-6182-4054-89a6-dd92b80b565f"},dimensions:{},type:"WMS",layers:"eau_new_Strukturgtekartierung 2015 [7-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Strukturgtekartierung 2015 [7-stufige Bewertung]__315"}]},{id:760,name:"eau_new_Strukturgtekartierung 2015 [5-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2015_5-stufige_bewertung",metadata_id:"ff70c904-a6b9-4989-88c0-8359ff52e57e"},dimensions:{},type:"WMS",layers:"eau_new_Strukturgtekartierung 2015 [5-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Strukturgtekartierung 2015 [5-stufige Bewertung]__316"}]},{id:761,name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:5-band_sohle_7-stufige_bewertung_5-band_ufer_links_7-stufige_bewertung_5-band_ufer_rechts_7-stufige_bewertung_5-band_umfeld_links_7-stufige_bewertung_5-band_umfeld_rechts_7-stufige_bewertung",metadata_id:"429d3552-5f72-4be6-9c03-95c76f0a6c07"},dimensions:{},type:"WMS",layers:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__336"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__337"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__338"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__339"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__340"}]},{id:763,name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:5-band_sohle_5-stufige_bewertung_5-band_ufer_links_5-stufige_bewertung_5-band_ufer_rechts_5-stufige_bewertung_5-band_umfeld_links_5-stufige_bewertung_5-band_umfeld_rechts_5-stufige_bewertung",metadata_id:"4c64f3a4-627f-4aa7-9e0c-d3ad003d9afe"},dimensions:{},type:"WMS",layers:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__342"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__343"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__344"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__345"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__346"}]},{id:785,name:"eau_new_WRRL und HWRM-RL Massnahmen",metadata:{is_queryable:!0,legend_name:"eau:wrrl_und_hwrm-rl_-_massnahmen",metadata_id:"9a339e4e-eb04-42a0-ac0d-5a5f354c9548"},dimensions:{},type:"WMS",layers:"eau_new_WRRL und HWRM-RL Massnahmen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL und HWRM-RL Massnahmen__347"}]},{id:1471,name:"eau_detailliertes_massnahmenprogramm_sww",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_sww",metadata_id:"5b9d1544-da64-4a58-b519-9a03e5491e07"},dimensions:{},type:"WMS",layers:"eau_detailliertes_massnahmenprogramm_sww",imageType:"image/png",style:"default",childLayers:[{name:"eau_detailliertes_massnahmenprogramm_sww__355"}]},{id:659,name:"eau_new_Grundwasserkoerper_2015",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2015",max_dpi:128,metadata_id:"bb5f17b7-ddac-46cc-a59d-25f82d422b5b"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserkoerper_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserkoerper_2015__168"}]},{id:476,name:"eau_new_Zustand_der_Wasserkoerper_(WK)_2015",children:[{id:479,name:"eau_new_Oberflaechengewaesser_2015",children:[{id:622,name:"eau_new_Oekologischer_Zustand_2015",metadata:{is_queryable:!0,legend_name:"eau:oekologischer_zustand_2015",max_dpi:128,metadata_id:"5b78d0a5-1984-4efc-9e7d-0cb9d7ca829d"},dimensions:{},type:"WMS",layers:"eau_new_Oekologischer_Zustand_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oekologischer_Zustand_2015__173"}]},{id:663,name:"eau_new_Gesamtzustand_2015",metadata:{is_queryable:!0,legend_name:"eau:gesamtzustand_2015",max_dpi:128,metadata_id:"bea7140f-b938-4494-ac14-a2252a1d0fcb"},dimensions:{},type:"WMS",layers:"eau_new_Gesamtzustand_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gesamtzustand_2015__171"}]},{id:621,name:"eau_new_Chemischer Zustand 2015_Richtlinie 2008_105_EG",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2015",max_dpi:128,metadata_id:"7df87ec3-bfad-4d1b-a10b-68670c8073f4"},dimensions:{},type:"WMS",layers:"621",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer Zustand 2015_Richtlinie 2008_105_EG__172"}]},{id:764,name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe 2015_Richtlinie_2008_105_EG",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2015_richtlinie_2008_105_eg",metadata_id:"68f761b4-e1d1-4cda-b4aa-1e61fc812588"},dimensions:{},type:"WMS",layers:"764",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe 2015_Richtlinie_2008_105_EG__318"}]},{id:765,name:"eau_new_Chemischer_Zustand_2015_Richtlinie 2013_39_EU",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2015_richtlinie_2013_39_eu",metadata_id:"7df87ec3-bfad-4d1b-a10b-68670c8073f4"},dimensions:{},type:"WMS",layers:"765",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_2015_Richtlinie 2013_39_EU__319"}]},{id:766,name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe_2015_Richtlinie 2013_39_EU",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2015_richtlinie_2013_39_eu",metadata_id:"d78ac813-7ab3-4162-945a-f87512e66654"},dimensions:{},type:"WMS",layers:"766",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe_2015_Richtlinie 2013_39_EU__320"}]},{id:466,name:"eau_new_Qualitaetskomponenten_des_oekologischen_Zustands_2015",children:[{id:767,name:"eau_new_Hydromorphologische Gesamtbewertung 2015",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologischer_zustand_2015",metadata_id:"767e0a8a-31e0-4a53-913f-6ab1c76ca27c"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologische Gesamtbewertung 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologische Gesamtbewertung 2015__174"}]},{id:769,name:"eau_new_Morphologie 2015",metadata:{is_queryable:!0,legend_name:"eau:morphologie_2015",metadata_id:"b7812f62-a8b5-4ef4-bbb8-c2e3a9688c93"},dimensions:{},type:"WMS",layers:"eau_new_Morphologie 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Morphologie 2015__330"}]},{id:770,name:"eau_new_Durchgngigkeit 2015",metadata:{is_queryable:!0,legend_name:"eau:durchgaengigkeit_2015",metadata_id:"4983c058-3d33-4b6f-b801-de1113a11f27"},dimensions:{},type:"WMS",layers:"eau_new_Durchgngigkeit 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchgngigkeit 2015__331"}]},{id:583,name:"eau_new_Physiko-Chemie_2015",metadata:{is_queryable:!0,legend_name:"eau:physiko-chemie_2015",max_dpi:128,metadata_id:"45702d13-2608-4300-ba54-0e078c96386c"},dimensions:{},type:"WMS",layers:"eau_new_Physiko-Chemie_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Physiko-Chemie_2015__176"}]},{id:771,name:"eau_new_Phytoplankton 2015",metadata:{is_queryable:!0,legend_name:"eau:phytoplankton_2015",metadata_id:"e5d8434c-c367-4a56-a7d1-aa60f70a301f"},dimensions:{},type:"WMS",layers:"eau_new_Phytoplankton 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytoplankton 2015__321"}]},{id:662,name:"eau_new_Makrophyten_2015",metadata:{is_queryable:!0,legend_name:"eau:aquatische_flora_2015",max_dpi:128,metadata_id:"fe673001-2447-4e3c-bce6-4606b6bf222d"},dimensions:{},type:"WMS",layers:"eau_new_Makrophyten_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrophyten_2015__177"}]},{id:600,name:"eau_new_Makro-Invertebraten_2015",metadata:{is_queryable:!0,legend_name:"eau:makro-invertebraten_2015",max_dpi:128,metadata_id:"b8a59482-2696-4b9a-a527-3201597a4caf"},dimensions:{},type:"WMS",layers:"eau_new_Makro-Invertebraten_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makro-Invertebraten_2015__180"}]},{id:646,name:"eau_new_Fische_2015",metadata:{is_queryable:!0,legend_name:"eau:fische_2015",max_dpi:128,metadata_id:"f44a6aa7-6dcc-4d99-9033-c13ef23ebef4"},dimensions:{},type:"WMS",layers:"eau_new_Fische_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fische_2015__179"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:471,name:"eau_new_Grundwasser_2015",children:[{id:591,name:"eau_new_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_wk_2015",max_dpi:128,metadata_id:"489c9b85-6c3c-4019-b3ee-096936b2683c"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_WK_2015__182"}]},{id:592,name:"eau_new_Quantitativer_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_wk_2015",max_dpi:128,metadata_id:"333c7e4f-cdc3-439a-aa13-ca0f9138c764"},dimensions:{},type:"WMS",layers:"eau_new_Quantitativer_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quantitativer_Zustand_der_WK_2015__183"}]},{id:632,name:"eau_new_Chemischer_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_wk_2015",max_dpi:128,metadata_id:"ddd64c4a-f5af-4bbb-a7d3-3db1016ee541"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_der_WK_2015__184"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2085,name:"eau_Bewirtschaftungsplan_2021",children:[{id:2090,name:"eau_Oberflaechenwasserkoerper_2021",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2021",max_dpi:128,metadata_id:"c50b2bc7-aeb7-4d3e-9349-09eb3ec0f927"},dimensions:{},type:"WMS",layers:"eau_Oberflaechenwasserkoerper_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Oberflaechenwasserkoerper_2021__386"}]},{id:2091,name:"eau_Erheblich vernderte Wasserkrper 2021",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_wk_2021",max_dpi:128,metadata_id:"311cc30b-8092-4816-9f86-87d5f2995706"},dimensions:{},type:"WMS",layers:"eau_Erheblich vernderte Wasserkrper 2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Erheblich vernderte Wasserkrper 2021__387"}]},{id:2491,name:"eau_new_Betrachtungsraeume_2021",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2021",metadata_id:"af21fbbf-3f63-4742-8c44-f8a377930197"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2021__455"}]},{id:2223,name:"eau_typologie_Gewsser_2021",metadata:{is_queryable:!0,legend_name:"eau:fleissgewaessertypen_2021_lu",metadata_id:"492d6faa-5c91-45d4-83d7-733398cc48d1"},dimensions:{},type:"WMS",layers:"eau_typologie_Gewsser_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_typologie_Gewsser_2021__419"}]},{id:2224,name:"eau_Fliegewssertypen_2021",metadata:{is_queryable:!0,legend_name:"eau:fleissgewaessertypen_2021_lawa",metadata_id:"8608d8c5-def8-4050-9f44-7746edd7a32e"},dimensions:{},type:"WMS",layers:"eau_Fliegewssertypen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Fliegewssertypen_2021__420"}]},{id:2269,name:"eau_grundwasserkoerper_2021",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2021",metadata_id:"3bd42cf4-93ce-451f-8749-e3f6d1750eeb"},dimensions:{},type:"WMS",layers:"eau_grundwasserkoerper_2021",imageType:"image/png",childLayers:[{name:"eau_grundwasserkoerper_2021__444"}]},{id:2222,name:"eau_Strukturgtekartierung_2021",children:[{id:2225,name:"eau_Strukturgtekartierung_2021_7stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2021_7-stufige_bewertung",metadata_id:"87e3688f-b831-44e9-aa4f-38d89a41139a"},dimensions:{},type:"WMS",layers:"eau_Strukturgtekartierung_2021_7stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturgtekartierung_2021_7stufige_bewertung__405"}]},{id:2226,name:"eau_Strukturgtekartierung_2021_5stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2021_5-stufige_bewertung",metadata_id:"0e36b3e4-8811-43b6-9f2d-a2ea26c817cb"},dimensions:{},type:"WMS",layers:"eau_Strukturgtekartierung_2021_5stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturgtekartierung_2021_5stufige_bewertung__406"}]},{id:2227,name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:struktukartierung_2021_5_band_7-stufige_bewertung",metadata_id:"27c60680-00ac-4e28-857f-41a1021ae4d9"},dimensions:{},type:"WMS",layers:"eau_Struktukartierung_2021_5_band_7stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__408"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__409"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__410"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__411"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__412"}]},{id:2228,name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:struktukartierung_2021_5_band_5-stufige_bewertung",metadata_id:"dedcc2a3-b587-4dfe-a967-5f4bfd8f575a"},dimensions:{},type:"WMS",layers:"eau_Struktukartierung_2021_5_band_5stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__414"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__415"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__416"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__417"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__418"}]},{id:2492,name:"eau_new_Querbauwerke_2021",metadata:{geocatalog_open_data_last_update_date:"2024-08-01T01:02:32.8749807",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a2f595f96f574ccd9e7e7c",is_queryable:!0,legend_name:"eau:Querbauwerke%202021",metadata_id:"88b06474-f029-4544-a60d-7c46c5f32191"},dimensions:{},type:"WMS",layers:"eau_new_Querbauwerke_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Querbauwerke_2021__422"}]},{id:2493,name:"eau_new_Durchlaesse_Verrohrungen_2021",metadata:{geocatalog_open_data_last_update_date:"2024-07-31T01:02:20.8968264",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a2f58e7af13982e1abe7e7",is_queryable:!0,legend_name:"eau:durchlaesseverrohrungen_2021",metadata_id:"6eb34108-4bad-4cb7-881e-7db3174c7531"},dimensions:{},type:"WMS",layers:"eau_new_Durchlaesse_Verrohrungen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchlaesse_Verrohrungen_2021__423"}]},{id:2494,name:"eau_new_Querprofile_2021",metadata:{is_queryable:!0,legend_name:"eau:querprofile_2021",metadata_id:"a40281d4-1ee2-42d0-9378-012f1f415afa"},dimensions:{},type:"WMS",layers:"eau_new_Querprofile_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Querprofile_2021__424"}]},{id:2495,name:"eau_new_Substratkartierung_2021",metadata:{is_queryable:!0,legend_name:"eau:substratkartierung_2021",metadata_id:"c4eb10fd-305d-43f7-ae01-b9caa32ed484"},dimensions:{},type:"WMS",layers:"eau_new_Substratkartierung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Substratkartierung_2021__425"}]}],metadata:{},mixed:!0},{id:2497,name:"eau_new_Massnahmenprogramm_2021",children:[{id:2106,name:"eau_Masssnahmenprogramm_SWW_2021",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_sww_2021",metadata_id:"10f4a12e-1a67-42d5-b575-8993e2f3aa68"},dimensions:{},type:"WMS",layers:"eau_Masssnahmenprogramm_SWW_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Masssnahmenprogramm_SWW_2021__403"}]},{id:2496,name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_hy_2021_alle",metadata_id:"4b00cf8c-d4e6-486d-8bda-d385302792f6"},dimensions:{},type:"WMS",layers:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__389"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__390"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__391"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__392"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__393"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__394"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__395"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__396"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__397"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__398"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__399"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__400"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__401"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__402"}]},{id:2086,name:"eau_Entwurf_Massnahmenprogramm_HY_2021",children:[{id:2092,name:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_der_oekologischen_durchgaengigkeit",metadata_id:"c150f6a5-41c7-477a-9d44-c0a26a502d85"},dimensions:{},type:"WMS",layers:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk",imageType:"image/png",style:"default",childLayers:[{name:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk_2021__389"}]},{id:2093,name:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_der_oekologischen_durchgaengigkeit_durchlass",metadata_id:"569bf0ea-c428-4171-aba6-8f2ace180a10"},dimensions:{},type:"WMS",layers:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021__390"}]},{id:2094,name:"eau_Strukturelemente_Sohle_2021",metadata:{is_queryable:!0,legend_name:"eau:einbau_von_strukturelementen_in_sohle",metadata_id:"2d233ca6-553e-43bf-ba25-f46b88f63710"},dimensions:{},type:"WMS",layers:"eau_Strukturelemente_Sohle_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturelemente_Sohle_2021__391"}]},{id:2095,name:"eau_Umgestalten_Sohlverbau_2021",metadata:{is_queryable:!0,legend_name:"eau:entfernen_umgestalten_von_sohlverbau",metadata_id:"0d30a3ee-e860-4816-b5c8-9f43e93020e3"},dimensions:{},type:"WMS",layers:"eau_Umgestalten_Sohlverbau_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Umgestalten_Sohlverbau_2021__392"}]},{id:2096,name:"eau_Stroemungslenkern_2021",metadata:{is_queryable:!0,legend_name:"eau:einbau_von_stroemungslenkern_fuer_eigendynamik",metadata_id:"b86c62a9-0ec8-4d35-878f-b275e74ff02e"},dimensions:{},type:"WMS",layers:"eau_Stroemungslenkern_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Stroemungslenkern_2021__393"}]},{id:2097,name:"eau_Umgestalten_Uferverbau_2021",metadata:{is_queryable:!0,legend_name:"eau:entfernen_umgestalten_von_uferverbau",metadata_id:"bec0ccbc-09b5-4351-8b72-f0e458fc7d19"},dimensions:{},type:"WMS",layers:"eau_Umgestalten_Uferverbau_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Umgestalten_Uferverbau_2021__394"}]},{id:2098,name:"eau_naturnah_Gewaesserbett_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_von_naturnaher_laufentwicklung_und_gewaesserbett",metadata_id:"3ddf627c-90ae-4b58-a05e-20925493dcf9"},dimensions:{},type:"WMS",layers:"eau_naturnah_Gewaesserbett_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnah_Gewaesserbett_2021__395"}]},{id:2099,name:"eau_Gewaesserrandstreifen_2021",metadata:{is_queryable:!0,legend_name:"eau:anlage_eines_gewaesserrandstreifens",metadata_id:"3bc0e52d-954b-47d3-8905-1ecfe7108ce0"},dimensions:{},type:"WMS",layers:"eau_Gewaesserrandstreifen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Gewaesserrandstreifen_2021__396"}]},{id:2100,name:"eau_Gewaesserentwicklungskorridor_2021",metadata:{is_queryable:!0,legend_name:"eau:anlage_eines_gewaesser_entwicklungskorridors",metadata_id:"13299bf5-57ca-4538-993e-7c00f6247722"},dimensions:{},type:"WMS",layers:"eau_Gewaesserentwicklungskorridor_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Gewaesserentwicklungskorridor_2021__397"}]},{id:2101,name:"eau_natuerlich_Ueberflutungsraeume_2021",metadata:{is_queryable:!0,legend_name:"eau:sicherung_und_erweiterung_natuerlicher_ueberflutungsraeume_und_augewaesser",metadata_id:"7fb0080e-d178-401d-83de-7595ef1885b5"},dimensions:{},type:"WMS",layers:"eau_natuerlich_Ueberflutungsraeume_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_natuerlich_Ueberflutungsraeume_2021__398"}]},{id:2102,name:"eau_eigendynamische_Entwicklung_2021",metadata:{is_queryable:!0,legend_name:"eau:zulassen_von_eigendynamischer_entwicklung",metadata_id:"d13e22e9-d22a-48a0-838d-3d7c914ccfe3"},dimensions:{},type:"WMS",layers:"eau_eigendynamische_Entwicklung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_eigendynamische_Entwicklung_2021__399"}]},{id:2103,name:"eau_naturnahe_Abflussverhaeltnisse_2021",metadata:{is_queryable:!0,legend_name:"eau:widerherstellung_und_sicherung_naturnaher_abflussverhaeltnisse",metadata_id:"b3f8a9e0-17f7-4b64-a34b-6ee6de972b52"},dimensions:{},type:"WMS",layers:"eau_naturnahe_Abflussverhaeltnisse_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnahe_Abflussverhaeltnisse_2021__400"}]},{id:2104,name:"eau_naturnaher_Wasserhaushalt_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_und_sicherung_naturnahem_wasserhaushalt",metadata_id:"91008390-557e-4db3-8d7c-e608a5478edb"},dimensions:{},type:"WMS",layers:"eau_naturnaher_Wasserhaushalt_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnaher_Wasserhaushalt_2021__401"}]},{id:2105,name:"eau_Abflussregulierung_2021",metadata:{is_queryable:!0,legend_name:"eau:abflussregulierung",metadata_id:"393be87d-44ce-42e1-9b81-9585aa2d7678"},dimensions:{},type:"WMS",layers:"eau_Abflussregulierung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Abflussregulierung_2021__402"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2498,name:"eau_new_Zustand_Wasserkoerper_2021",children:[{id:2501,name:"eau_new_OWK_2021",children:[{id:2516,name:"eau_new_oekologischer_Zustand_2021",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.9819519",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:oekologischer_zustand_2021",metadata_id:"d6e11b40-6e70-4f68-86c2-1c69c1e41c04"},dimensions:{},type:"WMS",layers:"eau_new_oekologischer_Zustand_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_oekologischer_Zustand_2021__428"}]},{id:2517,name:"eau_new_oekologisches_Potenzial_2021",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.9441803",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:oekologisches_potenzial_2021",metadata_id:"ed63b4ab-aee0-4402-8f30-98f2a08b98a4"},dimensions:{},type:"WMS",layers:"eau_new_oekologisches_Potenzial_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_oekologisches_Potenzial_2021__429"}]},{id:2518,name:"eau_new_chemischer_Zustand_2021_2013_39_EU",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.8760847",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2021",metadata_id:"2973678d-b858-4c7b-abfa-b99c206c32be"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_2021_2013_39_EU",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_2021_2013_39_EU__430"}]},{id:2519,name:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.4632089",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2021",metadata_id:"e32c56b5-a839-4cd1-a724-85153d87c5d5"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU__431"}]},{id:2499,name:"eau_new_Qualitaetskomponenten_oekologischer_Zustand_2021",children:[{id:2520,name:"eau_new_biologische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:biologische_qk_-_gesamtbewertung_2021",metadata_id:"61ac19af-e01b-48e3-8730-d955709d92ce"},dimensions:{},type:"WMS",layers:"eau_new_biologische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_biologische_QK_Gesamtbewertung_2021__435"}]},{id:2521,name:"eau_new_Phytoplankton_2021",metadata:{is_queryable:!0,legend_name:"eau:phytoplankton_2021",metadata_id:"f1bb6a6e-cc76-420a-8426-cf78bebea0aa"},dimensions:{},type:"WMS",layers:"eau_new_Phytoplankton_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytoplankton_2021__436"}]},{id:2522,name:"eau_new_Makrophyten_und_Phytobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:makrophyten_und_phytobenthos_2021",metadata_id:"53087821-654a-4fad-b891-b6f86f347482"},dimensions:{},type:"WMS",layers:"eau_new_Makrophyten_und_Phytobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrophyten_und_Phytobenthos_2021__437"}]},{id:2536,name:"eau_new_Macrophytes_2021",metadata:{is_queryable:!0,legend_name:"eau:macrophytes_2021",metadata_id:"060dc4f4-8486-4b5a-ae46-2b608bd87386"},dimensions:{},type:"WMS",layers:"eau_new_Macrophytes_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Macrophytes_2021__438"}]},{id:2523,name:"eau_new_Phytobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:phytobenthos_2021",metadata_id:"83f6b866-467a-4b00-9641-0252426c0808"},dimensions:{},type:"WMS",layers:"eau_new_Phytobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytobenthos_2021__439"}]},{id:2524,name:"eau_new_Makrozoobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:makrozoobenthos_2021",metadata_id:"d4028c85-831b-4950-905a-6df780d6b57d"},dimensions:{},type:"WMS",layers:"eau_new_Makrozoobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrozoobenthos_2021__440"}]},{id:2525,name:"eau_new_Fische_2021",metadata:{is_queryable:!0,legend_name:"eau:fische_2021",metadata_id:"961e396d-f123-4842-9a58-7968806e084d"},dimensions:{},type:"WMS",layers:"eau_new_Fische_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fische_2021__441"}]},{id:2526,name:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:physikalisch-chemische_qk_-_gesamtbewertung_2021",metadata_id:"a254a96a-8179-4a85-bd3d-c371d84e3884"},dimensions:{},type:"WMS",layers:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021__442"}]},{id:2527,name:"eau_new_allg_physikalisch_chemische_Parameter_2021",metadata:{is_queryable:!0,legend_name:"eau:allgemein_physikalisch-chemische_parameter_2021",metadata_id:"405ff58f-aca0-4781-9b28-c3481a7a0b0d"},dimensions:{},type:"WMS",layers:"eau_new_allg_physikalisch_chemische_Parameter_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_allg_physikalisch_chemische_Parameter_2021__443"}]},{id:2528,name:"eau_new_Flussgebietsspezifische_Schadstoffe_2021",metadata:{is_queryable:!0,legend_name:"eau:flussgebietsspezifische_schadstoffe_2021",metadata_id:"f321c03f-196d-4d12-992a-f6914088fd11"},dimensions:{},type:"WMS",layers:"eau_new_Flussgebietsspezifische_Schadstoffe_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Flussgebietsspezifische_Schadstoffe_2021__457"}]},{id:2529,name:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologische_qk_-_gesamtbewertung_2021",metadata_id:"673ef74f-1257-4de4-9c63-be9a82e7fbf7"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021__458"}]},{id:2530,name:"eau_new_Morphologie_2021",metadata:{is_queryable:!0,legend_name:"eau:morphologie_2021",metadata_id:"877aecd9-f5b3-4266-a520-e8cfd9d861c9"},dimensions:{},type:"WMS",layers:"eau_new_Morphologie_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Morphologie_2021__459"}]},{id:2531,name:"eau_new_Durchgaengigkeit_2021",metadata:{is_queryable:!0,legend_name:"eau:durchgaengigkeit_2021",metadata_id:"afa4a183-b069-4b65-9d9e-ca692f91f140"},dimensions:{},type:"WMS",layers:"eau_new_Durchgaengigkeit_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchgaengigkeit_2021__460"}]},{id:2532,name:"eau_new_Wasserhaushalt_2021",metadata:{is_queryable:!0,legend_name:"eau:wasserhaushalt_2021",metadata_id:"299eb814-3703-4119-b8d3-e9581c234c3b"},dimensions:{},type:"WMS",layers:"eau_new_Wasserhaushalt_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Wasserhaushalt_2021__461"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2500,name:"eau_new_GWK_2021",children:[{id:2533,name:"eau_new_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_gwk_2021",metadata_id:"ef79616f-fd66-45dd-a73a-e5677948dd56"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_GWK_2021__463"}]},{id:2534,name:"eau_new_quantitativer_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_gwk_2021",metadata_id:"5b9fbb7b-26b1-4b74-a709-80df547a755d"},dimensions:{},type:"WMS",layers:"eau_new_quantitativer_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_quantitativer_Zustand_der_GWK_2021__464"}]},{id:2535,name:"eau_new_chemischer_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_gwk_2021",metadata_id:"efa9de18-5db0-498f-aebb-fd659f689da7"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_der_GWK_2021__465"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:482,name:"eau_new_Nitratrichtlinie",children:[{id:589,name:"eau_new_Messstationen_Oberflaechengewaesser_-_Nitratrichtlinie",metadata:{is_queryable:!0,legend_name:"eau:messstationen_oberflaechengewaesser_-_nitratrichtlinie",max_dpi:128,metadata_id:"e3d8df5f-eb08-4e11-831f-ae2a90294ccf"},dimensions:{},type:"WMS",layers:"eau_new_Messstationen_Oberflaechengewaesser_-_Nitratrichtlinie",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Messstationen_Oberflaechengewaesser_-_Nitratrichtlinie__192"}]},{id:582,name:"eau_new_Messstationen_Grundwasser_-_Nitratrichtlinie",metadata:{is_queryable:!0,legend_name:"eau:messstationen_grundwasser_-_nitratrichtlinie",max_dpi:128,metadata_id:"e15fcc8c-217c-4577-b5a0-e62f08e480c1"},dimensions:{},type:"WMS",layers:"eau_new_Messstationen_Grundwasser_-_Nitratrichtlinie",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Messstationen_Grundwasser_-_Nitratrichtlinie__193"}]}],metadata:{},mixed:!0},{id:478,name:"eau_new_Plan_im_Fall_einer_Trockenheit",children:[{id:797,name:"eau_new_trockenheit_gelb",metadata:{is_queryable:!0,legend_name:"eau:vorbeugungsphase_phase_gelb",metadata_id:"2ec1e46e-2411-4828-b702-cc3f41b3ad04"},dimensions:{},type:"WMS",layers:"eau_new_trockenheit_gelb",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_trockenheit_gelb__348"}]},{id:617,name:"eau_new_Trinkwasserknappheit_(Zustand_orange)",metadata:{is_queryable:!0,legend_name:"eau:trinkwasserknappheit_zustand_orange",max_dpi:128,metadata_id:"c5a93247-af34-494d-bce2-9bc112fa50d8"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwasserknappheit_(Zustand_orange)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwasserknappheit_(Zustand_orange)__195"}]},{id:481,name:"eau_new_Erhoehte_Trinkwasserknappheit_(Zustand_rot)",metadata:{is_queryable:!0,legend_name:"eau:erhoehte_trinkwasserknappheit_zustand_rot",max_dpi:128,metadata_id:"620eea7b-266a-4ba5-9646-8006ff5915d4"},dimensions:{},type:"WMS",layers:"eau_new_Erhoehte_Trinkwasserknappheit_(Zustand_rot)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erhoehte_Trinkwasserknappheit_(Zustand_rot)__196"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",css:"eau.css",display_in_switcher:!0,link_title:"Administration de la gestion d'eau",page_title:"eau.geoportail.lu",print_img:"bandeauEau.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"eau.geoportal.lu",print_short_txt_en:"eau.geoportal.lu",print_short_txt_fr:"eau.geoportail.lu",print_short_txt_lu:"eau.geoportal.lu"}},{id:130,name:"pag",icon:"pag",children:[{id:706,name:"basisden_pag",children:[{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0},{id:165,name:"adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:694,name:"pag_group",children:[{id:698,name:"pag_pag",metadata:{is_queryable:!0,legend_name:"pag",linked_layers:["697","696","1366","709","710"],max_dpi:128,metadata_id:"12c67295-d150-430f-aa28-fa004ecba3c7",start_opacity:.7},dimensions:{},type:"WMS",layers:"pag_pag",imageType:"image/png",style:"default",childLayers:[{name:"pag_pag__28"},{name:"pag_pag__27"},{name:"pag_pag__26"},{name:"pag_pag__25"},{name:"pag_pag__24"},{name:"pag_pag__23"},{name:"pag_pag__22"},{name:"pag_pag__21"},{name:"pag_pag__20"},{name:"pag_pag__19"},{name:"pag_pag__18"},{name:"pag_pag__17"},{name:"pag_pag__16"},{name:"pag_pag__15"},{name:"pag_pag__14"},{name:"pag_pag__13"},{name:"pag_pag__12"},{name:"pag_pag__11"},{name:"pag_pag__9"},{name:"pag_pag__8"},{name:"pag_pag__7"},{name:"pag_pag__6"},{name:"pag_pag__202"},{name:"pag_pag__5"},{name:"pag_pag__200"}]},{id:696,name:"pag_pap_approuves",metadata:{is_queryable:!1,max_dpi:128,metadata_id:"7fd67f56-d2f6-4697-9d3b-5d9a6be770c9",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_pap_approuves",imageType:"image/png",style:"default",childLayers:[{name:"pag_pap_approuves__2"}]},{id:1366,name:"pag_infos_supp",metadata:{metadata_id:"5ab48871-aa35-4b74-ada2-3033c6666748"},dimensions:{},type:"WMS",layers:"pag_infos_supp",imageType:"image/png",style:"default",childLayers:[{name:"pag_infos_supp__103"},{name:"pag_infos_supp__102"},{name:"pag_infos_supp__101"}]},{id:697,name:"pag_pcn",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"672e2e56-b888-45bb-b665-1b8132a0e147",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_pcn",imageType:"image/png",style:"default",childLayers:[{name:"pag_pcn__pag_fonds"}]}],metadata:{},mixed:!0},{id:695,name:"pag_addtional_layers",children:[{id:716,name:"pag_at",children:[{id:710,name:"pag_pos",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a5f51e0e-c737-44e6-b0e0-7a0016d87707",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_pos",imageType:"image/png",style:"default",childLayers:[{name:"pag_pos__0"}]}],metadata:{},mixed:!0},{id:717,name:"pag_env",children:[{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:720,name:"pag_eau",children:[{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]}],metadata:{},mixed:!0},{id:718,name:"pag_hum",children:[{id:232,name:"env_bruit_axes_routiers",children:[{id:2764,name:"aev_bruit_roads_2021_Lden",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lden",metadata_id:"5504291e-3457-416d-84a3-438a83ae029d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lden",imageType:"image/png"},{id:2763,name:"aev_bruit_roads_2021_Lngt",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lngt",metadata_id:"43e0ddd5-7575-4ce7-b558-2114196bd6fe",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lngt",imageType:"image/png"},{id:1497,name:"env_bruit2016_axes_routiers_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"cf1a21cc-8208-420e-bd7e-091d755b6ace",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lden",imageType:"image/png"},{id:1500,name:"env_bruit2016_axes_routiers_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"83ae2d3b-f0d9-4584-8c48-f6722bd4f517",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lngt",imageType:"image/png"},{id:1504,name:"env_bruit_axes_routiers_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"c5a6e3c5-6bef-4ff9-ac3e-aa494a34e602"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots_2016__3"},{name:"env_bruit_axes_routiers_hotspots_2016__13"}]},{id:1505,name:"env_bruit_axes_routiers_agglomeration_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"a6c63355-6e42-4795-9d72-8744b907b151"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration_2016__6"},{name:"env_bruit_axes_routiers_agglomeration_2016__13"}]},{id:326,name:"env_bruit_axes_routiers_lden",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"3e3aa044-89e0-4676-9404-744f64dd7ba0",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lden",imageType:"image/png"},{id:255,name:"env_bruit_axes_routiers_lngt",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"5e4f2607-b114-4884-8e48-8e1faa997eb4",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lngt",imageType:"image/png"},{id:1475,name:"env_bruit_axes_routiers_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"ff6b3d63-871c-4e88-8fc0-0f276abe259a"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots__10"},{name:"env_bruit_axes_routiers_hotspots__13"}]},{id:1485,name:"env_bruit_axes_routiers_agglomeration",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"f1dd0dd5-4dd5-4d88-b556-af39a20ab137",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration__12"},{name:"env_bruit_axes_routiers_agglomeration__13"}]}],metadata:{},mixed:!0},{id:183,name:"env_bruit_axes_ferroviaires",children:[{id:2761,name:"aev_bruit_railways_2021_Lden",metadata:{is_queryable:!0,metadata_id:"e48e5b8f-9388-47ae-b12f-575ed7416ce1",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lden__46"}]},{id:2762,name:"aev_bruit_railways_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"c2106415-df81-4208-9714-7dad0479ab71",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lngt__47"}]},{id:1498,name:"env_bruit2016_axes_ferroviaires_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"7975b71b-2fd4-45e6-8c0a-306671d665c6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lden",imageType:"image/png"},{id:1502,name:"env_bruit2016_axes_ferroviaires_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"170143ce-53ef-4b2b-997c-a2ccb1b84477",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lngt",imageType:"image/png"},{id:1503,name:"env_bruit_axes_ferroviaires_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"29ef44c6-f357-4d21-829c-f2fdd5fe1149"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots_2016__1"},{name:"env_bruit_axes_ferroviaires_hotspots_2016__13"}]},{id:310,name:"env_bruit_axes_ferroviaires_lden",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"32b40d1c-111e-4eed-91c7-61d61ef27b8d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lden",imageType:"image/png"},{id:259,name:"env_bruit_axes_ferroviaires_lngt",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"2d7e26ad-e448-45a2-9045-3dfb3e3ec15b",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lngt",imageType:"image/png"},{id:1476,name:"env_bruit_axes_ferroviaires_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"d3b30653-d0bf-4924-96b2-251e9f61c979"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots__8"},{name:"env_bruit_axes_ferroviaires_hotspots__13"}]}],metadata:{},mixed:!0},{id:190,name:"env_bruit_air",children:[{id:2667,name:"aev_bruit_aeroport_2021_Lden",metadata:{is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"4ceeb788-86c8-420d-a161-43607ed4e89a",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lden__40"}]},{id:2668,name:"aev_bruit_aeroport_2021_Lngt",metadata:{is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"71277cc9-4b62-4199-8a2e-71ca4a863519",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lngt__41"}]},{id:1501,name:"env_bruit2016_axes_aeroport_lden",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"26e208ff-39a3-4cf6-92db-4c6707fe972a",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lden",imageType:"image/png"},{id:1499,name:"env_bruit2016_axes_aeroport_lngt",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"2aa6f79d-74cc-4f22-bedd-748f8e8e30b9",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lngt",imageType:"image/png"},{id:157,name:"env_bruit_air_lden",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"0f4dcfc5-e947-4e5c-9460-702b8e1a572f",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lden",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lden__70"}]},{id:327,name:"env_bruit_air_lngt",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"6b031060-1f82-467d-af86-afe02a3f04fa",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lngt",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lngt__72"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:719,name:"pag_sites_et_monuments",children:[{id:709,name:"pag_ssmn",metadata:{is_queryable:!1,max_dpi:128,metadata_id:"ab8bba00-fe68-4e1f-8fad-9dbd2f8c7809",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_ssmn",imageType:"image/png",style:"default",childLayers:[{name:"pag_ssmn__2"},{name:"pag_ssmn__1"},{name:"pag_ssmn__0"}]}],metadata:{},mixed:!0},{id:196,name:"verkehrsnetze",children:[{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:351,name:"roads_labels",metadata:{metadata_id:"5d606cae-cbc6-44c3-a465-edb981e44a39"},dimensions:{},type:"WMS",layers:"roads_labels",imageType:"image/png",style:"default",childLayers:[{name:"roads_labels__ROADS_LABELS"}]},{id:2401,name:"act_ponts",metadata:{is_queryable:!0,metadata_id:"2b7d36db-987f-49b4-96d7-60e934ddf926"},dimensions:{},type:"WMS",layers:"act_ponts",imageType:"image/png",childLayers:[{name:"act_ponts__0"},{name:"act_ponts__1"},{name:"act_ponts__2"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:813,name:"cdt_lignes_all",metadata:{is_queryable:!0,metadata_id:"bbe0523f-374d-4c94-a27d-7ce81d8bae3b"},dimensions:{},type:"WMS",layers:"cdt_lignes_all",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_all__lignes_de_bus_detaillees"},{name:"cdt_lignes_all__lignes_de_bus_detaillees_mymaps"}]},{id:812,name:"cdt_lignes_bus_par_operateur",children:[{id:814,name:"cdt_lignes_avl",metadata:{is_queryable:!0,metadata_id:"1e6f614b-e347-4115-82d7-74a72f51389f"},dimensions:{},type:"WMS",layers:"cdt_lignes_avl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_avl__category"}]},{id:815,name:"cdt_lignes_rgtr",metadata:{is_queryable:!0,metadata_id:"eae3ed54-d2ae-45ae-a62c-0dec4d44acdf"},dimensions:{},type:"WMS",layers:"cdt_lignes_rgtr",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_rgtr__category"}]},{id:816,name:"cdt_lignes_tice",metadata:{is_queryable:!0,metadata_id:"a3cb973c-12b0-4e41-bfc0-b2fb67637513"},dimensions:{},type:"WMS",layers:"cdt_lignes_tice",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tice__category"}]},{id:817,name:"cdt_lignes_cfl",metadata:{is_queryable:!0,metadata_id:"84ebdfbc-ba25-464c-af86-e74e588978ef"},dimensions:{},type:"WMS",layers:"cdt_lignes_cfl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_cfl__category"}]},{id:1374,name:"cdt_lignes_tram",metadata:{is_queryable:!0,metadata_id:"0f46c673-d4b4-4c25-8d9a-fca41035f587"},dimensions:{},type:"WMS",layers:"cdt_lignes_tram",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tram__category"}]}],metadata:{},mixed:!0},{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:2707,name:"mmtp_electromobilite_AC",metadata:{is_queryable:!0,metadata_id:"08885ef4-d534-47d4-8b93-2883c71a8452"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_AC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_AC__0"}]},{id:2708,name:"mmtp_electromobilite_DC",metadata:{is_queryable:!0,metadata_id:"624d34e4-1192-40bb-871a-e6c8720d766b"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_DC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_DC__2"}]},{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:377,name:"mobiliteit_pr",metadata:{is_queryable:!0,legend_name:"mobiliteit:pr",max_dpi:128,metadata_id:"9e0c97ae-aff9-41fc-9489-bbf97999163d"},dimensions:{},type:"WMS",layers:"mobiliteit_pr",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_pr__0"}]},{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]},{id:512,name:"tour_pistes_velo_mymaps2",metadata:{is_queryable:!0,legend_name:"tour_velo_national",metadata_id:"e9fea021-2aab-4f58-a777-8c7536898d9b"},dimensions:{},type:"WMS",layers:"tour_pistes_velo_mymaps2",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_velo_mymaps2__category"}]},{id:352,name:"cfl_hecto",metadata:{is_queryable:!0,metadata_id:"938f9e8e-071c-4e6b-940f-64b2a60eca74"},dimensions:{},type:"WMS",layers:"cfl_hecto",imageType:"image/png",style:"default",childLayers:[{name:"cfl_hecto__points_hecto"}]},{id:685,name:"cita_chantiers_actuel",metadata:{is_queryable:!0,metadata_id:"9c823038-5965-47cc-8dad-21496e57e3f2",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_actuel",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_actuel__CHANTIERS_ACTUEL"}]},{id:686,name:"cita_chantiers_futur",metadata:{is_queryable:!0,metadata_id:"063cb796-640f-4ab0-8430-955983a00e3b",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_futur",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_futur__CHANTIERS_FUTUR"}]},{id:1713,name:"chantiers_actuels_pc",metadata:{is_queryable:!0,metadata_id:"7d59f3a6-e8d8-464b-bbf9-73c6ca358a51",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_actuels_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_actuels_pc__CHANTIERS_ACTUEL_PC"}]},{id:1714,name:"chantiers_futurs_pc",metadata:{is_queryable:!0,metadata_id:"f6b9df36-5e62-46d1-ae91-c7c58c7e2e45",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_futurs_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_futurs_pc__CHANTIERS_FUTUR_PC"}]},{id:713,name:"pch_radars",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"385180ba-a9bc-49d4-8858-ba5f19942a66",start_opacity:1},dimensions:{},type:"WMS",layers:"pch_radars",imageType:"image/png",style:"default",childLayers:[{name:"pch_radars__1"},{name:"pch_radars__2"}]},{id:2729,name:"pch_points_repere",metadata:{geocatalog_open_data_last_update_date:"2024-07-26T08:50:03.7336833",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a3633bcf73e6f52fd83901",is_queryable:!0,metadata_id:"1dbe9ca0-638e-4034-94ef-c8a12fdaa57a"},dimensions:{},type:"WMS",layers:"pch_points_repere",imageType:"image/png",style:"default",childLayers:[{name:"pch_points_repere__6"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",bg_opacity:.01,css:"pag.css",display_in_switcher:!0,page_title:"pag.geoportail.lu",print_img:"PAG.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["2500","5000","10000","15000","20000","25000","50000","100000","200000","250000","400000"],print_short_txt_de:"pag.geoportal.lu",print_short_txt_en:"pag.geoportal.lu",print_short_txt_fr:"pag.geoportail.lu",print_short_txt_lu:"pag.geoportal.lu",show_in_mobile:!1,start_layers:["pag_pag","pag_pcn","pag_pap_approuves","pag_ssmn","pag_pos"]}},{id:126,name:"agriculture",icon:"agriculture",children:[{id:307,name:"asta",children:[{id:1637,name:"asta_flik_parcels",metadata:{is_queryable:!0,metadata_id:"f511a4ee-928a-4900-ac05-52aa0ce03bba"},dimensions:{},type:"WMS",layers:"asta_flik_parcels",imageType:"image/png",style:"default",childLayers:[{name:"asta_flik_parcels__3"}]},{id:1511,name:"asta_prairies_permanentes",metadata:{is_queryable:!0,metadata_id:"f6f493c2-f57b-419d-8953-ab8018576ac7"},dimensions:{},type:"WMS",layers:"asta_prairies_permanentes",imageType:"image/png",style:"default",childLayers:[{name:"asta_prairies_permanentes__0"}]},{id:740,name:"asta_herbages_sensibles",metadata:{metadata_id:"e5d2717e-4541-43f1-b586-1b18cdf11827"},dimensions:{},type:"WMS",layers:"asta_herbages_sensibles",imageType:"image/png",style:"default",childLayers:[{name:"asta_herbages_sensibles__gruenland"}]}],metadata:{},mixed:!0},{id:340,name:"asta_zones_prot",children:[{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]},{id:214,name:"eau_new_Provisorische_ZPS",metadata:{geocatalog_open_data_last_update_date:"2024-10-03T01:04:17.082383",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece254111e9b03b03833c4",is_queryable:!0,legend_name:"eau:provisorische_zps",max_dpi:128,metadata_id:"ddc51f25-2fb7-4d14-866a-a08f8af8ef03"},dimensions:{},type:"WMS",layers:"eau_new_Provisorische_ZPS",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Provisorische_ZPS__130"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:1464,name:"eau_prgd_zones_protection_lac",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.5407176",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5b571c9546f3b55625dc355c",is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_prgd_zones_protection_lac__349"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]},{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]},{id:1481,name:"asta_projet_rgd",children:[{id:1484,name:"eau_asta_prgd_zones_protection_lac",metadata:{is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_asta_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_asta_prgd_zones_protection_lac__349"}]},{id:1482,name:"asta_contrainte_stockage_engrais",metadata:{legend_name:"asta:stockage_engrais",metadata_id:"e94ac1bb-890b-412e-97e9-f71dbef88ab7"},dimensions:{},type:"WMS",layers:"asta_contrainte_stockage_engrais",imageType:"image/png",style:"default",childLayers:[{name:"asta_contrainte_stockage_engrais__1"}]},{id:1483,name:"asta_contrainte_utilisation_engrais",metadata:{legend_name:"asta:utilisation_engrais",metadata_id:"47f9de64-9636-4ce6-bf73-cb85cdd7b8d9"},dimensions:{},type:"WMS",layers:"asta_contrainte_utilisation_engrais",imageType:"image/png",style:"default",childLayers:[{name:"asta_contrainte_utilisation_engrais__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:321,name:"pedologie",children:[{id:272,name:"pedologie_100k",metadata:{legend_name:"pedologie",metadata_id:"2d712a34-ce79-426d-a57b-b7cadf97b80f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"pedologie_100k",imageType:"image/png"},{id:702,name:"asta_pedologie_new",metadata:{legend_name:"pedologie_new",max_dpi:128,metadata_id:"37686d89-0173-4040-88c7-be84a3648d01"},dimensions:{},type:"WMS",layers:"asta_pedologie_new",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_new__9"},{name:"asta_pedologie_new__10"},{name:"asta_pedologie_new__11"},{name:"asta_pedologie_new__12"},{name:"asta_pedologie_new__13"},{name:"asta_pedologie_new__14"},{name:"asta_pedologie_new__15"}]},{id:704,name:"asta_pedologie_humus",metadata:{legend_name:"asta_corg",max_dpi:128,metadata_id:"a1b0807c-9bff-4f6a-a5e7-130316742f56"},dimensions:{},type:"WMS",layers:"asta_pedologie_humus",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_humus__0"}]},{id:703,name:"asta_pedologie_ph",metadata:{legend_name:"asta_ph",max_dpi:128,metadata_id:"628ee73f-4c37-4689-bc4c-1fd9f6bd2663"},dimensions:{},type:"WMS",layers:"asta_pedologie_ph",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_ph__0"}]},{id:2408,name:"asta_erosion_group",children:[{id:2760,name:"asta_rigoles_erosion_enquete",metadata:{is_queryable:!0,metadata_id:"00c1398d-604f-4e1b-9abd-af05261d80ba"},dimensions:{},type:"WMS",layers:"asta_rigoles_erosion_enquete",imageType:"image/png",childLayers:[{name:"asta_rigoles_erosion_enquete__2"}]},{id:2407,name:"asta_erosion_2023",metadata:{is_queryable:!0,metadata_id:"427aff9b-b988-455c-8cd9-1c029cfd6b6e",start_opacity:.25},dimensions:{},type:"WMS",layers:"asta_erosion_2023",imageType:"image/png",childLayers:[{name:"asta_erosion_2023__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:204,name:"asta_meteo_group",children:[{id:283,name:"asta_meteo",metadata:{is_queryable:!0,metadata_id:"23e4b02d-a93d-47a4-8597-060319ae2af5"},dimensions:{},type:"WMS",layers:"asta_meteo",imageType:"image/png",style:"default",childLayers:[{name:"asta_meteo__meteo"}]}],metadata:{},mixed:!0},{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0},{id:509,name:"asta_esp_group",children:[{id:139,name:"asta_esp_esp",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"16f911c8-1008-4f86-b8c1-75584010f79b",start_opacity:.75},dimensions:{},type:"WMS",layers:"asta_esp_esp",imageType:"image/png",style:"default",childLayers:[{name:"asta_esp_esp__0"},{name:"asta_esp_esp__1"}]},{id:138,name:"asta_esp_lisiere",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"e3dd4b8c-760b-44b3-887a-08c6be34c72d",start_opacity:.5},dimensions:{},type:"WMS",layers:"asta_esp_lisiere",imageType:"image/png",style:"default",childLayers:[{name:"asta_esp_lisiere__2"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"streets",bg_opacity:.01,css:"agriculture.css",display_in_switcher:!0,link_title:"Administration des services techniques de l'agriculture",page_title:"agriculture.geoportail.lu",print_img:"bandeau_asta.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"agriculture.geoportal.lu",print_short_txt_en:"agriculture.geoportal.lu",print_short_txt_fr:"agriculture.geoportail.lu",print_short_txt_lu:"agriculture.geoportal.lu",start_layers:["asta_flik_parcels_2016"]}},{id:132,name:"lenoz",icon:"lenoz",children:[{id:429,name:"group_lenoz",children:[{id:494,name:"lenoz_lmg",metadata:{is_queryable:!0,metadata_id:"22d587f3-2b7d-4ebc-8564-7816cd3f2f13"},dimensions:{},type:"WMS",layers:"494",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_lmg__POI"}]},{id:496,name:"lenoz_creches",metadata:{is_queryable:!0,metadata_id:"b355d9f7-174c-4349-b1c6-0e4d6f091ab3"},dimensions:{},type:"WMS",layers:"496",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_creches__POI"}]},{id:495,name:"lenoz_ecoles",metadata:{is_queryable:!0,metadata_id:"f528b8f4-e84f-4e0c-9cf3-0b46c272f85d"},dimensions:{},type:"WMS",layers:"495",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_ecoles__POI"}]},{id:511,name:"lenoz_Post",metadata:{is_queryable:!0,metadata_id:"efa463e0-9d5d-4120-9430-e1dd816c0ad2"},dimensions:{},type:"WMS",layers:"511",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Post__POI"}]},{id:516,name:"lenoz_Banken",metadata:{is_queryable:!0,metadata_id:"ccb93f63-b711-4113-9ffb-5ad40016ed05"},dimensions:{},type:"WMS",layers:"516",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Banken__POI"}]},{id:504,name:"lenoz_rzte",metadata:{is_queryable:!0,metadata_id:"7f97be71-db0c-4b2c-8b17-f5913d9b70aa"},dimensions:{},type:"WMS",layers:"504",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_rzte__POI"}]},{id:519,name:"lenoz_Restaurants",metadata:{is_queryable:!0,metadata_id:"5fffa197-d8ba-43a2-9e6b-d4f593cb2f41"},dimensions:{},type:"WMS",layers:"519",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Restaurants__POI"}]},{id:505,name:"lenoz_Lycees",metadata:{is_queryable:!0,metadata_id:"35ffa708-81e1-48b8-814e-3a81647f108d"},dimensions:{},type:"WMS",layers:"505",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Lycees__POI"}]},{id:506,name:"lenoz_Tankstelle",metadata:{is_queryable:!0,metadata_id:"7301092d-ff3c-48a5-b3b7-d6a35ccab45f"},dimensions:{},type:"WMS",layers:"506",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Tankstelle__POI"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]}],metadata:{},mixed:!0},{id:486,name:"eau_new_Hochwasserrisikomanagement-Richtlinie [HWRM-RL]",children:[{id:1696,name:"eau_new_Risikogewaesser_2019_group",children:[{id:1703,name:"eau_Risikogewaesser_2019",metadata:{is_queryable:!0,legend_name:"eau:risikogewaesser_2019",metadata_id:"762cd956-9733-4855-afa7-38768a38e8a1"},dimensions:{},type:"WMS",layers:"eau_Risikogewaesser_2019",imageType:"image/png",style:"default",childLayers:[{name:"eau_Risikogewaesser_2019__16"}]}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:1711,name:"eau_atlas_crues_subites",children:[{id:2045,name:"age_dangers_fortes",metadata:{legend_name:"age_dangers_fortes",metadata_id:"55dbe91c-f1e5-4c56-b0b9-4590988e23e5"},dimensions:{},type:"WMS",layers:"age_dangers_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_dangers_fortes__0"},{name:"age_dangers_fortes__1"}]},{id:2046,name:"age_risques_fortes",metadata:{legend_name:"age_risques_fortes",metadata_id:"f1d9b1cd-ad78-44df-89ac-ad591138243f"},dimensions:{},type:"WMS",layers:"age_risques_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_risques_fortes__1"},{name:"age_risques_fortes__2"},{name:"age_risques_fortes__3"},{name:"age_risques_fortes__4"},{name:"age_risques_fortes__5"}]}],metadata:{},mixed:!0},{id:461,name:"eau_new_Historische_Ueberschwemmungsgebiete",children:[{id:637,name:"eau_new_UESG_1983_-_Mosel",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.2797021",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde16111e9b03b03833be",is_queryable:!0,legend_name:"eau:uesg_1983_-_mosel",max_dpi:128,metadata_id:"e6896207-c0f9-417e-9661-119128628e8e"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1983_-_Mosel",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1983_-_Mosel__122"}]},{id:641,name:"eau_new_UESG_1993_(ausser_Mosel)",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:25.7826569",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde1e111e9b03b03833bf",is_queryable:!0,legend_name:"eau:uesg_1993_ausser_mosel",max_dpi:128,metadata_id:"78c692f3-ad20-467b-b03a-0d020a821647"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1993_(ausser_Mosel)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1993_(ausser_Mosel)__123"}]},{id:642,name:"eau_new_UESG_Alzette_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.5894792",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde26111e9b03b03833c0",is_queryable:!0,legend_name:"eau:uesg_alzette_1995",max_dpi:128,metadata_id:"aaf81780-df85-4580-a890-fded8ae03db7"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Alzette_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Alzette_1995__124"}]},{id:633,name:"eau_new_UESG_Sauer_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.4493603",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde30111e9b03b222c3b5",is_queryable:!0,legend_name:"eau:uesg_sauer_1995",max_dpi:128,metadata_id:"f01f7be2-0423-4571-8fff-57dd617ae632"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Sauer_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Sauer_1995__125"}]},{id:2116,name:"eau_Hochwasserkarten_2021",children:[{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:463,name:"eau_new_Zusaetzliche_Informationen",children:[{id:756,name:"eau_new_Hochwasser Brennpunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.8729061",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"5fd1cadde9996e5faf62ea6f",is_queryable:!0,legend_name:"eau:hochwasser_brennpunkte",metadata_id:"b2bfd06d-5f05-4abf-8f41-103d40a380e7"},dimensions:{},type:"WMS",layers:"eau_new_Hochwasser Brennpunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hochwasser Brennpunkte__309"}]},{id:758,name:"eau_new_Manahmens des Hochwasserrisikomanagementplans",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:03:13.4638796",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"66e4e0d15a1785364d6db3fb",is_queryable:!0,legend_name:"eau:massnahmens_des_hochwasserrisikomanagementplans",metadata_id:"4326fea6-7ec4-4bb9-861f-4476b0d4ceac"},dimensions:{},type:"WMS",layers:"eau_new_Manahmens des Hochwasserrisikomanagementplans",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Manahmens des Hochwasserrisikomanagementplans__314"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:166,name:"env_bruit",children:[{id:2123,name:"env_bruit_modelisation",children:[{id:232,name:"env_bruit_axes_routiers",children:[{id:2764,name:"aev_bruit_roads_2021_Lden",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lden",metadata_id:"5504291e-3457-416d-84a3-438a83ae029d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lden",imageType:"image/png"},{id:2763,name:"aev_bruit_roads_2021_Lngt",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lngt",metadata_id:"43e0ddd5-7575-4ce7-b558-2114196bd6fe",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lngt",imageType:"image/png"},{id:1497,name:"env_bruit2016_axes_routiers_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"cf1a21cc-8208-420e-bd7e-091d755b6ace",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lden",imageType:"image/png"},{id:1500,name:"env_bruit2016_axes_routiers_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"83ae2d3b-f0d9-4584-8c48-f6722bd4f517",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lngt",imageType:"image/png"},{id:1504,name:"env_bruit_axes_routiers_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"c5a6e3c5-6bef-4ff9-ac3e-aa494a34e602"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots_2016__3"},{name:"env_bruit_axes_routiers_hotspots_2016__13"}]},{id:1505,name:"env_bruit_axes_routiers_agglomeration_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"a6c63355-6e42-4795-9d72-8744b907b151"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration_2016__6"},{name:"env_bruit_axes_routiers_agglomeration_2016__13"}]},{id:326,name:"env_bruit_axes_routiers_lden",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"3e3aa044-89e0-4676-9404-744f64dd7ba0",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lden",imageType:"image/png"},{id:255,name:"env_bruit_axes_routiers_lngt",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"5e4f2607-b114-4884-8e48-8e1faa997eb4",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lngt",imageType:"image/png"},{id:1475,name:"env_bruit_axes_routiers_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"ff6b3d63-871c-4e88-8fc0-0f276abe259a"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots__10"},{name:"env_bruit_axes_routiers_hotspots__13"}]},{id:1485,name:"env_bruit_axes_routiers_agglomeration",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"f1dd0dd5-4dd5-4d88-b556-af39a20ab137",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration__12"},{name:"env_bruit_axes_routiers_agglomeration__13"}]}],metadata:{},mixed:!0},{id:183,name:"env_bruit_axes_ferroviaires",children:[{id:2761,name:"aev_bruit_railways_2021_Lden",metadata:{is_queryable:!0,metadata_id:"e48e5b8f-9388-47ae-b12f-575ed7416ce1",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lden__46"}]},{id:2762,name:"aev_bruit_railways_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"c2106415-df81-4208-9714-7dad0479ab71",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lngt__47"}]},{id:1498,name:"env_bruit2016_axes_ferroviaires_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"7975b71b-2fd4-45e6-8c0a-306671d665c6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lden",imageType:"image/png"},{id:1502,name:"env_bruit2016_axes_ferroviaires_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"170143ce-53ef-4b2b-997c-a2ccb1b84477",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lngt",imageType:"image/png"},{id:1503,name:"env_bruit_axes_ferroviaires_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"29ef44c6-f357-4d21-829c-f2fdd5fe1149"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots_2016__1"},{name:"env_bruit_axes_ferroviaires_hotspots_2016__13"}]},{id:310,name:"env_bruit_axes_ferroviaires_lden",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"32b40d1c-111e-4eed-91c7-61d61ef27b8d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lden",imageType:"image/png"},{id:259,name:"env_bruit_axes_ferroviaires_lngt",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"2d7e26ad-e448-45a2-9045-3dfb3e3ec15b",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lngt",imageType:"image/png"},{id:1476,name:"env_bruit_axes_ferroviaires_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"d3b30653-d0bf-4924-96b2-251e9f61c979"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots__8"},{name:"env_bruit_axes_ferroviaires_hotspots__13"}]}],metadata:{},mixed:!0},{id:190,name:"env_bruit_air",children:[{id:2667,name:"aev_bruit_aeroport_2021_Lden",metadata:{is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"4ceeb788-86c8-420d-a161-43607ed4e89a",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lden__40"}]},{id:2668,name:"aev_bruit_aeroport_2021_Lngt",metadata:{is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"71277cc9-4b62-4199-8a2e-71ca4a863519",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lngt__41"}]},{id:1501,name:"env_bruit2016_axes_aeroport_lden",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"26e208ff-39a3-4cf6-92db-4c6707fe972a",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lden",imageType:"image/png"},{id:1499,name:"env_bruit2016_axes_aeroport_lngt",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"2aa6f79d-74cc-4f22-bedd-748f8e8e30b9",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lngt",imageType:"image/png"},{id:157,name:"env_bruit_air_lden",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"0f4dcfc5-e947-4e5c-9460-702b8e1a572f",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lden",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lden__70"}]},{id:327,name:"env_bruit_air_lngt",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"6b031060-1f82-467d-af86-afe02a3f04fa",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lngt",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lngt__72"}]}],metadata:{},mixed:!0},{id:2771,name:"env_bruit_agglo",children:[{id:2769,name:"aev_bruit_agglo_industry_2021_Lden",metadata:{is_queryable:!0,metadata_id:"4faed79e-f82c-4758-b4bf-df654951b27f",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_industry_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_industry_2021_Lden__37"}]},{id:2770,name:"aev_bruit_agglo_industry_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"e1e006c9-c637-4e2a-840f-3b7e8a04ce1e",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_industry_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_industry_2021_Lngt__38"}]},{id:2768,name:"aev_bruit_agglo_roads_2021_Lden",metadata:{is_queryable:!0,metadata_id:"0015e212-a7e5-42f6-ba94-3fdb5014513c",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_roads_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_roads_2021_Lden__35"}]},{id:2767,name:"aev_bruit_agglo_roads_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"9718d119-a073-4406-8bf1-d4b409ed6a68",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_roads_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_roads_2021_Lngt__36"}]},{id:2765,name:"aev_bruit_agglo_tram_2021_Lden",metadata:{is_queryable:!0,metadata_id:"47bbe08f-dbb4-4a4f-bbf7-8c6084e6da45",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_tram_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_tram_2021_Lden__33"}]},{id:2766,name:"aev_bruit_agglo_tram_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"e11fbfdf-29c4-4845-ad12-e2fc2ef5f530",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_tram_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_tram_2021_Lngt__34"}]}],metadata:{},mixed:!0},{id:2124,name:"env_bruit_multiexposition",children:[{id:2125,name:"aev_multiexposition_Lden",metadata:{is_queryable:!0,metadata_id:"37c1c1a2-1926-4c92-8c2a-b9ce0ac6cfef"},dimensions:{},type:"WMS",layers:"aev_multiexposition_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_multiexposition_Lden__1"}]},{id:2126,name:"aev_multiexposition_Lnight",metadata:{is_queryable:!0,metadata_id:"a536e129-3c0f-4a6c-a767-0519eec880c1"},dimensions:{},type:"WMS",layers:"aev_multiexposition_Lnight",imageType:"image/png",style:"default",childLayers:[{name:"aev_multiexposition_Lnight__2"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1641,name:"aev_campagne_mesure_bruit",children:[{id:2618,name:"aev_bruit_campagne_2023",children:[{id:2726,name:"aev_campagne_bruit_aeroportuaire_2023",metadata:{is_queryable:!0,metadata_id:"3c6a1f70-51ab-4c8b-9a09-c163bafd23ff"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_aeroportuaire_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_aeroportuaire_2023__109"}]}],metadata:{},mixed:!0},{id:2475,name:"env_bruit_campagne_2022",children:[{id:2619,name:"aev_campagne_bruit_routier_2023",metadata:{is_queryable:!0,metadata_id:"e242b817-86a7-4f70-bc41-8e90d264fd19"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_routier_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_routier_2023__97"}]},{id:2620,name:"aev_campagne_bruit_ferroviaire_2023",metadata:{is_queryable:!0,metadata_id:"c3c06743-6876-4f55-802d-4599000c1681"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_ferroviaire_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_ferroviaire_2023__94"}]}],metadata:{},mixed:!0},{id:1916,name:"aev_silent_cities_2020",children:[{id:1917,name:"aev_silent_cities_2020_phase1",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase1",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase1__7"}]},{id:1918,name:"aev_silent_cities_2020_phase2",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase2",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase2__8"}]},{id:1919,name:"aev_silent_cities_2020_phase3",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase3",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase3__9"}]}],metadata:{},mixed:!0},{id:1921,name:"env_bruit_routes_hotspots_2019_group",children:[{id:1642,name:"env_bruit_routes_hotspots_2019",metadata:{is_queryable:!0,legend_name:"aev:hotspots_rail",metadata_id:"f898e289-c5dd-432b-b3e6-de4c3681b77a"},dimensions:{},type:"WMS",layers:"env_bruit_routes_hotspots_2019",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_routes_hotspots_2019__4"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"webbasemap",css:"lenoz.css",display_in_switcher:!0,fake_scales:["3000","6000","15000","30000","60000","150000","300000","450000","700000","1500000"],page_title:"lenoz.geoportail.lu",print_img:"bandeaulenoz.png",print_long_txt_de:"Luxemburgische Nachhaltigkeitszertifierung",print_long_txt_en:"Luxembourgish durability certification",print_long_txt_fr:"Certification en durabilit luxembourgeoise",print_long_txt_lu:"Ltzebuergesch Nohaltgkeetszertifizirung",print_scales:["10000"],print_short_txt_de:"lenoz.geoportail.lu",print_short_txt_en:"lenoz.geoportail.lu",print_short_txt_fr:"lenoz.geoportail.lu",print_short_txt_lu:"lenoz.geoportail.lu",resolutions:["500.0","250.0","150.0","100.0","50.0","20.0","10.0","5.0","2.0","1.0"],start_layers:["poi_ecoles"]}},{id:124,name:"preizerdaul",icon:"preizerdaul",children:[{id:287,name:"group_ac_preizerdaul_pag",children:[{id:331,name:"ac_preizerdaul_pag",metadata:{is_queryable:!0,legend_name:"preizerdaul:pag",max_dpi:128,metadata_id:"2eb99e09-635c-400f-a32f-fbc7129854c3",start_opacity:.7},dimensions:{},type:"WMS",layers:"ac_preizerdaul_pag",imageType:"image/png",style:"default",childLayers:[{name:"ac_preizerdaul_pag__0"}]},{id:363,name:"ac_preizerdaul_ortho",metadata:{max_dpi:128,metadata_id:"83700e3f-2590-4bab-b93f-47390186a04f"},dimensions:{},type:"WMS",layers:"ac_preizerdaul_ortho",imageType:"image/png",style:"default",childLayers:[{name:"ac_preizerdaul_ortho__0"}]},{id:137,name:"ac_preizerdaul_ortho_2009",metadata:{max_dpi:128,metadata_id:"2d9a745c-4574-42dd-9c7b-ce8f6ddeb4e3"},dimensions:{},type:"WMS",layers:"ac_preizerdaul_ortho_2009",imageType:"image/png",style:"default",childLayers:[{name:"ac_preizerdaul_ortho_2009__1"},{name:"ac_preizerdaul_ortho_2009__0"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"webbasemap",bg_opacity:0,css:"preizerdaul.css",link_title:"Administration communale de Prizerdaul",page_title:"preizerdaul.geoportail.lu",print_img:"preizerdaul.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"preizerdaul.geoportal.lu",print_short_txt_en:"preizerdaul.geoportal.lu",print_short_txt_fr:"preizerdaul.geoportail.lu",print_short_txt_lu:"preizerdaul.geoportal.lu",start_layers:["ac_preizerdaul_ortho","ac_preizerdaul_pag"],start_x:95500,start_y:63500,start_zoom:7}},{id:125,name:"wellenstein",icon:"wellenstein",children:[{id:279,name:"group_ac_wellenstein_pag",children:[{id:210,name:"ac_wellenstein_pag_complet",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_complet",imageType:"image/png"},{id:182,name:"ac_wellenstein_pag_zones",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_zones",imageType:"image/png"},{id:257,name:"ac_wellenstein_pag_limites",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_limites",imageType:"image/png"},{id:258,name:"ac_wellenstein_pag_voies_acces",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"310c9c19-b3fd-42f2-a537-41a5525fa4a2"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_voies_acces",imageType:"image/png"},{id:300,name:"ac_wellenstein_pag_perimetres_zones",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_perimetres_zones",imageType:"image/png"},{id:305,name:"ac_wellenstein_pag_volumes_a_sauvegarder",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_volumes_a_sauvegarder",imageType:"image/png"},{id:162,name:"ac_wellenstein_pag_volumes_batiments",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_volumes_batiments",imageType:"image/png"},{id:282,name:"ac_wellenstein_pag_alignements_a_preserver",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_alignements_a_preserver",imageType:"image/png"}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"streets",css:"wellenstein.css",link_title:"Commune de Wellenstein",page_title:"wellenstein.geoportail.lu",print_img:"wellenstein.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"wellenstein.geoportal.lu",print_short_txt_en:"wellenstein.geoportal.lu",print_short_txt_fr:"wellenstein.geoportail.lu",print_short_txt_lu:"wellenstein.geoportal.lu",start_layers:["ac_wellenstein_pag_complet"],start_x:64965,start_y:93325.5,start_zoom:6}},{id:131,name:"lintgen",icon:"lintgen",children:[{id:422,name:"pag_lintgen",children:[{id:425,name:"pag_lintgen_layer",metadata:{legend_name:"lintgen",metadata_id:"809bceff-4802-47d2-983d-290a0956b327",start_opacity:.6},dimensions:{},type:"WMS",layers:"pag_lintgen_layer",imageType:"image/png",style:"default",childLayers:[{name:"pag_lintgen_layer__pag_lintgen"}]}],metadata:{},mixed:!0},{id:421,name:"eau_4_lintgen",children:[{id:628,name:"eau_new_Bohrungen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:16.7602644",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb039cc765e18ae5ed882",is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen__39"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]},{id:641,name:"eau_new_UESG_1993_(ausser_Mosel)",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:25.7826569",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde1e111e9b03b03833bf",is_queryable:!0,legend_name:"eau:uesg_1993_ausser_mosel",max_dpi:128,metadata_id:"78c692f3-ad20-467b-b03a-0d020a821647"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1993_(ausser_Mosel)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1993_(ausser_Mosel)__123"}]},{id:642,name:"eau_new_UESG_Alzette_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.5894792",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde26111e9b03b03833c0",is_queryable:!0,legend_name:"eau:uesg_alzette_1995",max_dpi:128,metadata_id:"aaf81780-df85-4580-a890-fded8ae03db7"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Alzette_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Alzette_1995__124"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"voidLayer",bg_opacity:.01,css:"lintgen.css",fake_scales:["2000","2500","5000","10000","15000","30000"],page_title:"lintgen.geoportail.lu",print_img:"Lintgen.jpg",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["5000","10000","15000","20000","25000"],print_short_txt_de:"lintgen.geoportal.lu",print_short_txt_en:"lintgen.geoportal.lu",print_short_txt_fr:"lintgen.geoportail.lu",print_short_txt_lu:"lintgen.geoportal.lu",start_layers:["pag_lintgen_layer"],start_x:87430,start_y:77248,start_zoom:1}},{id:120,name:"remich",icon:"remich",children:[{id:236,name:"group_ac_remich_pag",children:[{id:344,name:"ac_remich_pag",metadata:{legend_name:"remich:pag",metadata_id:"14d4159d-e103-4cac-a2a0-418ff24edaee",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_remich_pag",imageType:"image/png"},{id:267,name:"ac_remich_ortho",metadata:{metadata_id:"a2d86966-e7e6-477e-b581-ae3a0e9f8e68"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_remich_ortho",imageType:"image/png"}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"streets",css:"remich.css",link_title:"Administration communale de Remich",page_title:"remich.geoportail.lu",print_img:"remich.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"remich.geoportal.lu",print_short_txt_en:"remich.geoportal.lu",print_short_txt_fr:"remich.geoportail.lu",print_short_txt_lu:"remich.geoportal.lu",start_layers:["ac_remich_ortho","ac_remich_pag"],start_x:67965,start_y:94325.5,start_zoom:6}},{id:114,name:"commande",icon:"commande",children:[{id:253,name:"commande_grp",children:[{id:200,name:"topo_decoupage_100k",metadata:{is_queryable:!0,metadata_id:"0d331d41-73ff-4091-84e1-bf949e092a52"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_100k",imageType:"image/png"},{id:219,name:"topo_decoupage_50k",metadata:{is_queryable:!0,metadata_id:"f3714ffe-11ec-4a4a-8d51-549ba41086da"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_50k",imageType:"image/png"},{id:193,name:"topo_decoupage_5000",metadata:{is_queryable:!0,metadata_id:"036d0cd3-c605-40cb-90d3-8c7afd4ddff6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_5000",imageType:"image/png"},{id:188,name:"topo_decoupage_tc",metadata:{is_queryable:!0,metadata_id:"ef075fce-9bea-4ecd-89a5-73a2587a464a"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_tc",imageType:"image/png"},{id:216,name:"decoupage_communes",metadata:{is_queryable:!0,metadata_id:"e71c2d85-3495-435d-90b7-98ac18f9235f"},dimensions:{},type:"WMS",layers:"decoupage_communes",imageType:"image/png",style:"default",childLayers:[{name:"decoupage_communes__DECOUPAGE_COMMUNE"}]},{id:306,name:"decoupage_geo25k",metadata:{is_queryable:!0,metadata_id:"5cf702be-f598-4d49-9af0-67724acf5ae2"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"decoupage_geo25k",imageType:"image/png"},{id:211,name:"decoupage_geo25_50k",metadata:{is_queryable:!0,metadata_id:"26ebc97c-166b-426c-ac5c-60ae42256f9e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"decoupage_geo25_50k",imageType:"image/png"},{id:262,name:"cadastre",metadata:{exclusion:"[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115]",is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"cadastre",imageType:"image/png"},{id:374,name:"topo_decoupage_ortho_2013",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMS",layers:"topo_decoupage_ortho_2013",imageType:"image/png",style:"default",childLayers:[{name:"topo_decoupage_ortho_2013__DECOUPAGE_ORTHO_2013"}]},{id:418,name:"repere_alti",metadata:{is_queryable:!1,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"418",imageType:"image/png",style:"default",childLayers:[{name:"repere_alti__POI"}]},{id:457,name:"topo_decoupage_5000_ed2015",metadata:{is_queryable:!0,metadata_id:"01182ea0-3c30-4fc0-9bc2-e2dc778592da"},dimensions:{},type:"WMS",layers:"topo_decoupage_5000_ed2015",imageType:"image/png",style:"default",childLayers:[{name:"topo_decoupage_5000_ed2015__DECOUPAGE_5000_ED2015"}]},{id:823,name:"feuilles_cadastrales_urplang2",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMS",layers:"feuilles_cadastrales_urplang",imageType:"image/png",style:"default",childLayers:[{name:"feuilles_cadastrales_urplang2__FEUILLES_CADASTRALES"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{css:"main.css",page_title:"map.geoportail.lu",print_img:"bandeau.jpg",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"map.geoportal.lu",print_short_txt_en:"map.geoportal.lu",print_short_txt_fr:"map.geoportal.lu",print_short_txt_lu:"map.geoportal.lu"}},{id:123,name:"at",icon:"at",children:[{id:394,name:"at_ps",children:[{id:392,name:"at_pst",children:[{id:410,name:"at_pst1",metadata:{is_queryable:!0,legend_name:"at:projetspst",max_dpi:128,metadata_id:"10568679-86b2-487b-b19b-b371c39773c1",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pst1",imageType:"image/png",style:"default",childLayers:[{name:"at_pst1__0"},{name:"at_pst1__1"}]},{id:408,name:"at_pst2",metadata:{is_queryable:!0,legend_name:"at:couloirpst",max_dpi:128,metadata_id:"10568679-86b2-487b-b19b-b371c39773c1",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pst2",imageType:"image/png",style:"default",childLayers:[{name:"at_pst2__0"}]}],metadata:{},mixed:!0},{id:398,name:"at_psp",children:[{id:396,name:"at_psp_cv",metadata:{is_queryable:!0,legend_name:"at:coupureverte",max_dpi:128,metadata_id:"84763751-9311-4d45-8f30-06e8370aeffa",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_psp_cv",imageType:"image/png",style:"default",childLayers:[{name:"at_psp_cv__0"}]},{id:409,name:"at_psp_zvi",metadata:{is_queryable:!0,legend_name:"at:zoneverteinterurbaine",max_dpi:128,metadata_id:"7428ad86-57d1-4186-98aa-c4c2fb94578f",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_psp_zvi",imageType:"image/png",style:"default",childLayers:[{name:"at_psp_zvi__0"}]},{id:395,name:"at_psp_gep",metadata:{is_queryable:!0,legend_name:"at:grandsensemblespaysagers",max_dpi:128,metadata_id:"84763751-9311-4d45-8f30-06e8370aeffa",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_psp_gep",imageType:"image/png",style:"default",childLayers:[{name:"at_psp_gep__0"}]}],metadata:{},mixed:!0},{id:393,name:"at_pszae",children:[{id:407,name:"at_pszae1",metadata:{is_queryable:!0,legend_name:"at:zaeexistante",max_dpi:128,metadata_id:"2133d9bd-6941-4181-8866-0d8db0e1d041",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pszae1",imageType:"image/png",style:"default",childLayers:[{name:"at_pszae1__0"},{name:"at_pszae1__1"}]},{id:402,name:"at_pszae2",metadata:{is_queryable:!0,legend_name:"at:zaenouvext",max_dpi:128,metadata_id:"ea5da181-a572-43fb-9813-e373ad3ac0c1",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pszae2",imageType:"image/png",style:"default",childLayers:[{name:"at_pszae2__0"},{name:"at_pszae2__1"}]},{id:403,name:"at_pszae3",metadata:{is_queryable:!0,legend_name:"at:zoneareclasser",max_dpi:128,metadata_id:"ea5da181-a572-43fb-9813-e373ad3ac0c1",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pszae3",imageType:"image/png",style:"default",childLayers:[{name:"at_pszae3__0"},{name:"at_pszae3__1"}]},{id:1435,name:"at_pszae_droit_preemption",metadata:{is_queryable:!0,metadata_id:"ac28744b-e9cd-4db1-8904-7bfe137aafcd"},dimensions:{},type:"WMS",layers:"at_pszae_droit_preemption",imageType:"image/png",style:"default",childLayers:[{name:"at_pszae_droit_preemption__0"}]}],metadata:{},mixed:!0},{id:400,name:"at_psl",children:[{id:401,name:"at_psl1",metadata:{is_queryable:!0,legend_name:"at:zoneprojenvergurehabitat",max_dpi:128,metadata_id:"a0c94819-73be-40b8-9327-e3b8b0407633",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_psl1",imageType:"image/png",style:"default",childLayers:[{name:"at_psl1__0"},{name:"at_psl1__1"}]},{id:1436,name:"at_psl_droit_preemption",metadata:{is_queryable:!0,metadata_id:"ec647d3d-46bf-4c3d-84dc-fc42f5c875a7"},dimensions:{},type:"WMS",layers:"at_psl_droit_preemption",imageType:"image/png",style:"default",childLayers:[{name:"at_psl_droit_preemption__0"}]}],metadata:{},mixed:!0},{id:1493,name:"at_pds_parcels_group",children:[{id:1492,name:"at_pds_parcels",metadata:{is_queryable:!0,legend_name:"attestation_pds",metadata_id:"2b5a9769-3c31-4468-b457-724037bc8657"},dimensions:{},type:"WMS",layers:"at_pds_parcels",imageType:"image/png",style:"default",childLayers:[{name:"at_pds_parcels__0"}]},{id:1712,name:"at_psl_fond_de_plan",metadata:{metadata_id:"6c0d4541-6626-4ab4-8d02-baebcd2496bb"},dimensions:{},type:"WMS",layers:"at_psl_fond_de_plan",imageType:"image/png",style:"default",childLayers:[{name:"at_psl_fond_de_plan__0"}]}],metadata:{},mixed:!0}],metadata:{is_expanded:!0},mixed:!0},{id:2208,name:"at_diagnostique_terr_group",children:[{id:2209,name:"at_impermeabilisation_group",children:[{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]},{id:2281,name:"at_impermeabilisation_communes_2018",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_communes_2018",metadata_id:"dae9931e-abd9-4f88-8180-024815cd0e1f"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_communes_2018",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_communes_2018__0"}]},{id:2282,name:"at_impermeabilisation_communes_utilisateur_2018",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_communes_utilisateur_2018",metadata_id:"6bd9208a-01a0-42fc-b7dc-55c26ea95e02"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_communes_utilisateur_2018",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_communes_utilisateur_2018__0"}]},{id:2216,name:"at_impermeabilisation_grid_2018_100m",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_100m",metadata_id:"210db74a-e33a-401b-9e17-2cd966cdcd1f"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_100m",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_100m__0"}]},{id:2215,name:"at_impermeabilisation_grid_2018_1km",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_1km",metadata_id:"8dc777d0-f910-4c69-a476-85a73dcd8474"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_1km",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_1km__0"}]}],metadata:{},mixed:!0},{id:2212,name:"at_batiments_group",children:[{id:2214,name:"at_batiments_periode_construction",metadata:{is_queryable:!0,legend_name:"at:periode_construction_batiments",metadata_id:"7c138282-86de-4adb-91c2-467b06786821"},dimensions:{},type:"WMS",layers:"at_batiments_periode_construction",imageType:"image/png",style:"default",childLayers:[{name:"at_batiments_periode_construction__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2211,name:"at_regional_group",children:[{id:2218,name:"at_region_sud_group",children:[{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:2603,name:"at_fruitiers",metadata:{is_queryable:!0,metadata_id:"d47a0780-2fb9-4d01-8774-64a1532f6280"},dimensions:{},type:"WMS",layers:"at_fruitiers",imageType:"image/png",style:"default",childLayers:[{name:"at_fruitiers__0"}]},{id:2604,name:"at_fruitiers_parking",metadata:{is_queryable:!0,metadata_id:"87fca8cd-aa11-4bd6-bc55-72f96a6016b4"},dimensions:{},type:"WMS",layers:"at_fruitiers_parking",imageType:"image/png",style:"default",childLayers:[{name:"at_fruitiers_parking__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2313,name:"at_pos_group",children:[{id:710,name:"pag_pos",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a5f51e0e-c737-44e6-b0e0-7a0016d87707",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_pos",imageType:"image/png",style:"default",childLayers:[{name:"pag_pos__0"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",bg_opacity:100,css:"at.css",display_in_switcher:!0,fake_scales:["750","1500","3000","6000","15000","30000","60000","150000","300000","450000","700000","1500000"],link_title:"Amnagement du territoire",page_title:"at.geoportail.lu",print_img:"bandeau_at.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"at.geoportal.lu",print_short_txt_en:"at.geoportal.lu",print_short_txt_fr:"at.geoportail.lu",print_short_txt_lu:"at.geoportal.lu",resolutions:["500.0","250.0","150.0","100.0","50.0","20.0","10.0","5.0","2.0","1.0","0.5","0.25"]}},{id:800,name:"cadastre_hertzien",icon:"main",children:[{id:803,name:"cadastre_hertzien_group",children:[{id:811,name:"mat_antennes_moins_50_watt",metadata:{is_queryable:!0,legend_name:"at:antennesbelow50w",metadata_id:"cbf57825-26ba-4e36-98e8-083c1945066c"},dimensions:{},type:"WMS",layers:"mat_antennes_moins_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_antennes_moins_50_watt__0"}]},{id:1930,name:"mat_5G_antennes_plus_50_watt",metadata:{is_queryable:!0,metadata_id:"76e25a5d-8e78-40cb-a54b-9cfc27b16e60"},dimensions:{},type:"WMS",layers:"mat_5G_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_5G_antennes_plus_50_watt__0"}]},{id:2053,name:"mat_5G-3.6GHZ_antennes_plus_50_watt",metadata:{is_queryable:!0,metadata_id:"e048acda-0ec7-4f52-8221-613d9312c28b"},dimensions:{},type:"WMS",layers:"mat_5G-3.6GHZ_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_5G-3.6GHZ_antennes_plus_50_watt__0"}]},{id:801,name:"mat_antennes_plus_50_watt",metadata:{is_queryable:!0,legend_name:"at:antennes",metadata_id:"e4a24392-591c-4d20-a62b-f75a9191488d"},dimensions:{},type:"WMS",layers:"mat_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_antennes_plus_50_watt__0"}]},{id:802,name:"mat_points_mesure",metadata:{is_queryable:!0,legend_name:"at:pointmesure",metadata_id:"f8f71353-40b8-4e10-b72c-85d8fe9e0577"},dimensions:{},type:"WMS",layers:"mat_points_mesure",imageType:"image/png",style:"default",childLayers:[{name:"mat_points_mesure__0"}]}],metadata:{is_expanded:!0},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:1672,name:"urban_farming",icon:"urban_farming",children:[{id:1678,name:"urban_farming_donnees_disponibles_group",children:[{id:1679,name:"Donnes disponibles",metadata:{is_queryable:!0,legend_name:"uf:donnees_disponibles",metadata_id:"aaa7619b-8b65-4283-829d-f990c62e7f4c"},dimensions:{},type:"WMS",layers:"Donnes disponibles",imageType:"image/png",style:"default",childLayers:[{name:"Donnes disponibles__2"},{name:"Donnes disponibles__3"}]}],metadata:{},mixed:!0},{id:1690,name:"Analyse Ensoleillement",children:[{id:1806,name:"Ensoleillement au 15.02",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"ece9ef19-b1ff-4acc-9d19-c00f7233d648"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.02__15"}]},{id:1683,name:"Ensoleillement au 15.05",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"ece9ef19-b1ff-4acc-9d19-c00f7233d648"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.05",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.05__16"}]},{id:1682,name:"Ensoleillement au 15.08",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"89b63cab-2220-4b00-abd5-2bfbe35352cd"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.08",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.08__17"}]}],metadata:{legend_name:"uf:solar_hiver",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},mixed:!0},{id:1673,name:"Projet en extrieur, hors sol, professionnel, en toiture",children:[{id:1674,name:"Toitures plates",metadata:{legend_name:"uf:roof_type",metadata_id:"65ba3e71-d581-4cde-b037-b6e852963fe6"},dimensions:{},type:"WMS",layers:"Toitures plates",imageType:"image/png",style:"default",childLayers:[{name:"Toitures plates__7"}]},{id:1675,name:"Hauteur des btiments",metadata:{legend_name:"uf:building_height",metadata_id:"021f0cc2-68ea-46b9-97c5-169cc5052e5e"},dimensions:{},type:"WMS",layers:"Hauteur des btiments",imageType:"image/png",style:"default",childLayers:[{name:"Hauteur des btiments__8"}]},{id:1680,name:"Accessibilit lgale",metadata:{legend_name:"uf:parcels_streets",metadata_id:"a53e2022-a799-47b3-9d21-414c992f1019"},dimensions:{},type:"WMS",layers:"Accessibilit lgale",imageType:"image/png",style:"default",childLayers:[{name:"Accessibilit lgale__6"}]},{id:1676,name:"Ensoleillement",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},dimensions:{},type:"WMS",layers:"Ensoleillement",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement__9"}]},{id:1681,name:"Sites de commercialisation et consommation",metadata:{is_queryable:!0,legend_name:"uf:commerce_closeby",metadata_id:"54c3973e-3168-4a0a-9df0-ce5c97360d0d"},dimensions:{},type:"WMS",layers:"Sites de commercialisation et consommation",imageType:"image/png",style:"default",childLayers:[{name:"Sites de commercialisation et consommation__5"}]},{id:1687,name:"Typologie 1 - Carte pondre pour le 15.02",metadata:{is_queryable:!0,legend_name:"uf:typologie1",metadata_id:"aa400ef6-b447-403e-9070-8795067e9017"},dimensions:{},type:"WMS",layers:"Typologie 1 - Carte pondre pour le 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Typologie 1 - Carte pondre pour le 15.02__11"}]}],metadata:{},mixed:!0},{id:1685,name:"Projet en extrieur, hors sol, professionnel, au sol",children:[{id:1676,name:"Ensoleillement",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},dimensions:{},type:"WMS",layers:"Ensoleillement",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement__9"}]},{id:1681,name:"Sites de commercialisation et consommation",metadata:{is_queryable:!0,legend_name:"uf:commerce_closeby",metadata_id:"54c3973e-3168-4a0a-9df0-ce5c97360d0d"},dimensions:{},type:"WMS",layers:"Sites de commercialisation et consommation",imageType:"image/png",style:"default",childLayers:[{name:"Sites de commercialisation et consommation__5"}]},{id:1688,name:"Typologie 2 - Carte pondre pour le 15.02",metadata:{legend_name:"uf:typologie2",metadata_id:"2fdba3ac-42ef-4a4d-9480-a0641b9d9cdc"},dimensions:{},type:"WMS",layers:"Typologie 2 - Carte pondre pour le 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Typologie 2 - Carte pondre pour le 15.02__12"}]}],metadata:{},mixed:!0},{id:1686,name:"Projet en extrieur, hors sol, communautaire, en toiture",children:[{id:1674,name:"Toitures plates",metadata:{legend_name:"uf:roof_type",metadata_id:"65ba3e71-d581-4cde-b037-b6e852963fe6"},dimensions:{},type:"WMS",layers:"Toitures plates",imageType:"image/png",style:"default",childLayers:[{name:"Toitures plates__7"}]},{id:1675,name:"Hauteur des btiments",metadata:{legend_name:"uf:building_height",metadata_id:"021f0cc2-68ea-46b9-97c5-169cc5052e5e"},dimensions:{},type:"WMS",layers:"Hauteur des btiments",imageType:"image/png",style:"default",childLayers:[{name:"Hauteur des btiments__8"}]},{id:1676,name:"Ensoleillement",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},dimensions:{},type:"WMS",layers:"Ensoleillement",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement__9"}]},{id:1689,name:"Typologie 3 - Carte pondre pour le 15.02",metadata:{legend_name:"uf:typologie3",metadata_id:"1fe3fa11-8d55-4612-b044-95a124cb5740"},dimensions:{},type:"WMS",layers:"Typologie 3 - Carte pondre pour le 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Typologie 3 - Carte pondre pour le 15.02__13"}]}],metadata:{},mixed:!0},{id:248,name:"flurstucke_grundstucke",children:[{id:359,name:"parcels",metadata:{exclusion:'[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,"exclusion_ortho2022","exclusion_ortho2022IR","exclusion_ortho2023","exclusion_ortho2023_bati","exclusion_ortho2023IR"]',is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"parcels",imageType:"image/png"},{id:353,name:"parcels_labels",metadata:{metadata_id:"a65629c7-ddd6-43de-b0c3-c49647d8fd2b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"parcels_labels",imageType:"image/png"},{id:199,name:"buildings",metadata:{is_queryable:!0,legend_name:"pcn_batiments:show",metadata_id:"5d0efc9d-a05a-4964-9f9d-a0ab9932af04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"buildings",imageType:"image/png"},{id:320,name:"toponymes",metadata:{metadata_id:"ffa537f7-a438-47da-9e0c-8e32260646a9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"toponymes",imageType:"image/png"},{id:350,name:"communes_cadastrales_labels",metadata:{is_queryable:!0,metadata_id:"5ae8fdfb-bb8f-4f72-b7ee-36c7664fe4b5"},dimensions:{},type:"WMS",layers:"communes_cadastrales_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_cadastrales_labels__COMMUNES_CADASTRALES_LABELS"}]},{id:153,name:"communes_cadastrales",metadata:{is_queryable:!0,metadata_id:"8a95f8b2-2cfb-42e7-a51c-02084228b364"},dimensions:{},type:"WMS",layers:"communes_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"communes_cadastrales__COMMUNES_CADASTRALES"}]},{id:266,name:"sections_cadastrales_labels",metadata:{is_queryable:!0,metadata_id:"69d1b609-11f7-4587-872a-508ee98ea76c"},dimensions:{},type:"WMS",layers:"sections_cadastrales_labels",imageType:"image/png",style:"default",childLayers:[{name:"sections_cadastrales_labels__SECTIONS_CADASTRALES_LABELS"}]},{id:355,name:"sections_cadastrales",metadata:{is_queryable:!0,metadata_id:"c9122320-8f06-4499-ac86-eb469e911369"},dimensions:{},type:"WMS",layers:"sections_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"sections_cadastrales__SECTIONS_CADASTRALES"}]},{id:256,name:"feuilles_cadastrales",metadata:{is_queryable:!0,metadata_id:"51333029-c8cf-490f-b4a6-80ba239f0cb4"},dimensions:{},type:"WMS",layers:"feuilles_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"feuilles_cadastrales__FEUILLES_CADASTRALES"}]},{id:417,name:"remembrements",metadata:{exclusion:"[301,302,303,304,305,306,307,308,309,310]",is_queryable:!0,max_dpi:128,metadata_id:"03d079f3-61fb-48bc-ab39-f3427b208702",start_opacity:.7},dimensions:{},type:"WMS",layers:"remembrements",imageType:"image/png",style:"default",childLayers:[{name:"remembrements__0"},{name:"remembrements__1"}]},{id:1643,name:"act_grid_land_tenure",children:[{id:1644,name:"act_privately_owned_land",metadata:{is_queryable:!0,legend_name:"act:privately",metadata_id:"75cb5ae7-7c48-478f-b2a6-1e5bfbdd5958"},dimensions:{},type:"WMS",layers:"act_privately_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_privately_owned_land__6"}]},{id:1645,name:"act_state_owned_land",metadata:{is_queryable:!0,legend_name:"act:stateowned",metadata_id:"e8813b4e-43c4-4a72-853e-bd7c06fd1111"},dimensions:{},type:"WMS",layers:"act_state_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_state_owned_land__5"}]},{id:1646,name:"act_municipality_owned_land",metadata:{is_queryable:!0,legend_name:"act:municipality",metadata_id:"89d42e03-93ae-444f-a49e-eb869b30071e"},dimensions:{},type:"WMS",layers:"act_municipality_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_municipality_owned_land__4"}]},{id:1647,name:"act_domainepublic_owned_land",metadata:{is_queryable:!0,legend_name:"act:domainepublic",metadata_id:"ac32c380-37df-4594-bbf2-0fd394482fd9"},dimensions:{},type:"WMS",layers:"act_domainepublic_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_domainepublic_owned_land__1"}]},{id:1648,name:"act_publicly_owned_land",metadata:{is_queryable:!0,legend_name:"act:publicly",metadata_id:"0a1852f5-1f32-4bdc-8bbc-d6103921d862"},dimensions:{},type:"WMS",layers:"act_publicly_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_publicly_owned_land__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:1530,name:"atlas_demographique",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:2515,name:"statec_census_grid",children:[{id:2720,name:"statec_census_group_repartition_territoriale",children:[{id:2596,name:"statec_population_commune",metadata:{is_queryable:!0,metadata_id:"5b0ec0de-1ed8-467c-b750-b4421e532cee",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_population_commune",imageType:"image/png",style:"default",childLayers:[{name:"statec_population_commune__0"},{name:"statec_population_commune__1"}]},{id:2597,name:"statec_densite_population_commune",metadata:{is_queryable:!0,metadata_id:"e469230d-68bd-4d9c-8c0b-beda13b4c713",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_densite_population_commune",imageType:"image/png",style:"default",childLayers:[{name:"statec_densite_population_commune__0"},{name:"statec_densite_population_commune__2"}]}],metadata:{},mixed:!0},{id:2721,name:"statec_census_group_repartition_km2",children:[{id:2514,name:"statec_population_grid",metadata:{is_queryable:!0,metadata_id:"3d252bbe-6491-4d22-b03b-d8070d863448",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_population_grid",imageType:"image/png",childLayers:[{name:"statec_population_grid__0"},{name:"statec_population_grid__1"},{name:"statec_population_grid__2"},{name:"statec_population_grid__3"},{name:"statec_population_grid__4"}]}],metadata:{},mixed:!0},{id:2719,name:"statec_census_group_nationalite",children:[{id:2613,name:"statec_census_etrangers",metadata:{is_queryable:!0,metadata_id:"45428d05-75c1-4eb9-93fd-9bbd7030be01",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_etrangers",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_etrangers__0"},{name:"statec_census_etrangers__1"}]},{id:2612,name:"statec_census_allemands",metadata:{is_queryable:!0,metadata_id:"e4a62561-3787-4cee-a28b-cd79975df871",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_allemands",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_allemands__0"},{name:"statec_census_allemands__6"}]},{id:2611,name:"statec_census_belges",metadata:{is_queryable:!0,metadata_id:"9d44ce99-10bf-40c6-b34f-2197aa78d0e3",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_belges",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_belges__0"},{name:"statec_census_belges__5"}]},{id:2609,name:"statec_census_francais",metadata:{is_queryable:!0,metadata_id:"eae3d241-9146-48f6-b1fb-cfd9d6ef8b45",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_francais",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_francais__0"},{name:"statec_census_francais__3"}]},{id:2610,name:"statec_census_italiens",metadata:{is_queryable:!0,metadata_id:"4906e802-8b67-4e46-8d32-daf5ee442d4c",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_italiens",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_italiens__0"},{name:"statec_census_italiens__4"}]},{id:2608,name:"statec_census_portugais",metadata:{is_queryable:!0,metadata_id:"2d0daf15-9519-4d10-af52-8fcda45a352c",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_portugais",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_portugais__0"},{name:"statec_census_portugais__2"}]}],metadata:{},mixed:!0},{id:2722,name:"statec_census_group_structure_urbaine",children:[{id:2715,name:"statec_census_nuclei",metadata:{is_queryable:!0,metadata_id:"7da8cd39-c078-4ed0-8015-49aef4b47aae",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_nuclei",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_nuclei__11"},{name:"statec_census_nuclei__10"},{name:"statec_census_nuclei__7"}]},{id:2717,name:"statec_census_degre_urbanisation",metadata:{is_queryable:!0,metadata_id:"409e0940-6c92-49a7-84b0-3b064cf41e30",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_degre_urbanisation",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_degre_urbanisation__7"},{name:"statec_census_degre_urbanisation__8"},{name:"statec_census_degre_urbanisation__2"},{name:"statec_census_degre_urbanisation__5"}]},{id:2718,name:"statec_census_evolution_poulation_grid",metadata:{is_queryable:!0,metadata_id:"3f7216af-0849-40cd-8c3a-de71065fd51b",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_evolution_poulation_grid",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_evolution_poulation_grid__9"},{name:"statec_census_evolution_poulation_grid__8"},{name:"statec_census_evolution_poulation_grid__3"},{name:"statec_census_evolution_poulation_grid__4"}]}],metadata:{},mixed:!0},{id:2741,name:"statec_recensement_2011_langues",children:[{id:2735,name:"statec_rec_langue_lux",metadata:{is_queryable:!0,metadata_id:"f3e10304-cf5a-4578-b126-90474e40cdf5",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_lux",imageType:"image/png",childLayers:[{name:"statec_rec_langue_lux__3"},{name:"statec_rec_langue_lux__4"},{name:"statec_rec_langue_lux__7"}]},{id:2736,name:"statec_rec_langue_fr",metadata:{is_queryable:!0,metadata_id:"8f95bc60-c665-4429-b04e-afcd13580e9a",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_fr",imageType:"image/png",childLayers:[{name:"statec_rec_langue_fr__3"},{name:"statec_rec_langue_fr__4"},{name:"statec_rec_langue_fr__8"}]},{id:2737,name:"statec_rec_langue_all",metadata:{is_queryable:!0,metadata_id:"e6531436-b506-4229-a1fa-7f1e69a93e8f",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_all",imageType:"image/png",childLayers:[{name:"statec_rec_langue_all__3"},{name:"statec_rec_langue_all__4"},{name:"statec_rec_langue_all__9"}]},{id:2739,name:"statec_rec_langue_eng",metadata:{is_queryable:!0,metadata_id:"0a382635-e8e6-408a-a8f0-20c6a07c3913",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_eng",imageType:"image/png",childLayers:[{name:"statec_rec_langue_eng__3"},{name:"statec_rec_langue_eng__4"},{name:"statec_rec_langue_eng__11"}]},{id:2738,name:"statec_rec_langue_por",metadata:{is_queryable:!0,metadata_id:"54df3b86-a6cd-423e-aafa-8f24075f6402",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_por",imageType:"image/png",childLayers:[{name:"statec_rec_langue_por__3"},{name:"statec_rec_langue_por__4"},{name:"statec_rec_langue_por__10"}]},{id:2740,name:"statec_rec_langue_allo",metadata:{is_queryable:!0,metadata_id:"ae08301b-2fe3-4ed5-8dd4-45d94961e518",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_allo",imageType:"image/png",childLayers:[{name:"statec_rec_langue_allo__12"}]}],metadata:{},mixed:!0},{id:2772,name:"statec_recensement_2011_immigration",children:[{id:2773,name:"statec_nee_etr_pop_tot",children:[{id:2776,name:"statec_nee_etr_pop_tot_par_grid",metadata:{is_queryable:!0,metadata_id:"44f3db25-9487-4735-8148-2704fc5573d0",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_pop_tot_par_grid",imageType:"image/png",childLayers:[{name:"statec_nee_etr_pop_tot_par_grid__23"},{name:"statec_nee_etr_pop_tot_par_grid__28"},{name:"statec_nee_etr_pop_tot_par_grid__21"}]}],metadata:{},mixed:!0},{id:2774,name:"statec_nee_etr_region",children:[{id:2780,name:"statec_nee_etr_region_portugal",metadata:{is_queryable:!0,metadata_id:"0fedc058-9bcb-4abf-a32b-53af46b7b3fd",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_region_portugal",imageType:"image/png",childLayers:[{name:"statec_nee_etr_region_portugal__27"},{name:"statec_nee_etr_region_portugal__28"},{name:"statec_nee_etr_region_portugal__21"}]},{id:2778,name:"statec_nee_etr_region_UE",metadata:{is_queryable:!0,metadata_id:"ced2cc65-dac6-4804-ab9e-46673c3777d7",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_region_UE",imageType:"image/png",childLayers:[{name:"statec_nee_etr_region_UE__25"},{name:"statec_nee_etr_region_UE__28"},{name:"statec_nee_etr_region_UE__21"}]},{id:2779,name:"statec_nee_etr_region_hors_UE",metadata:{is_queryable:!0,metadata_id:"d7eb9236-facf-4130-a2e2-71d3962cb081",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_region_hors_UE",imageType:"image/png",childLayers:[{name:"statec_nee_etr_region_hors_UE__26"},{name:"statec_nee_etr_region_hors_UE__28"},{name:"statec_nee_etr_region_hors_UE__21"}]}],metadata:{},mixed:!0},{id:2775,name:"statec_nee_etr_duree_sejour",children:[{id:2781,name:"statec_nee_etr_duree_sejour_0_4",metadata:{is_queryable:!0,metadata_id:"bebdb67a-db53-4f21-9f55-8f6b9f6b8242",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_duree_sejour_0_4",imageType:"image/png",childLayers:[{name:"statec_nee_etr_duree_sejour_0_4__2"},{name:"statec_nee_etr_duree_sejour_0_4__0"}]},{id:2782,name:"statec_nee_etr_duree_sejour_5_10",metadata:{is_queryable:!0,metadata_id:"26468daa-2fb2-4285-9e29-ed9b5212f6d8",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_duree_sejour_5_10",imageType:"image/png",childLayers:[{name:"statec_nee_etr_duree_sejour_5_10__30"},{name:"statec_nee_etr_duree_sejour_5_10__28"},{name:"statec_nee_etr_duree_sejour_5_10__21"}]},{id:2783,name:"statec_nee_etr_duree_sejour_11_20",metadata:{is_queryable:!0,metadata_id:"f3d49e73-7c46-4dd2-961a-6a0ee484954f",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_duree_sejour_11_20",imageType:"image/png",childLayers:[{name:"statec_nee_etr_duree_sejour_11_20__31"},{name:"statec_nee_etr_duree_sejour_11_20__28"},{name:"statec_nee_etr_duree_sejour_11_20__21"}]},{id:2784,name:"statec_nee_etr_duree_sejour_plus_20",metadata:{is_queryable:!0,metadata_id:"7eaff321-ad4c-4134-8180-e5c8c61d4721",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_duree_sejour_plus_20",imageType:"image/png",childLayers:[{name:"statec_nee_etr_duree_sejour_plus_20__32"},{name:"statec_nee_etr_duree_sejour_plus_20__28"},{name:"statec_nee_etr_duree_sejour_plus_20__21"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2728,name:"statec_atlas_demographique_group",children:[{id:1546,name:"ad_org_territoriale",children:[{id:1547,name:"ad_org_terr_lux",children:[{id:1532,name:"ad_communes_cantons",metadata:{is_queryable:!0,legend_name:"ad:communes_cantons",metadata_id:"fbf159ad-4c67-40f4-9b40-547d1eb35642"},dimensions:{},type:"WMS",layers:"ad_communes_cantons",imageType:"image/png",style:"default",childLayers:[{name:"ad_communes_cantons__1"},{name:"ad_communes_cantons__0"}]},{id:1531,name:"ad_fusions_communes",metadata:{is_queryable:!0,legend_name:"ad:fusions_communes",metadata_id:"07ce11d6-1cc7-4e87-9d09-ceb89c39bfe1"},dimensions:{},type:"WMS",layers:"ad_fusions_communes",imageType:"image/png",style:"default",childLayers:[{name:"ad_fusions_communes__9"},{name:"ad_fusions_communes__10"},{name:"ad_fusions_communes__11"},{name:"ad_fusions_communes__12"},{name:"ad_fusions_communes__13"},{name:"ad_fusions_communes__14"},{name:"ad_fusions_communes__15"},{name:"ad_fusions_communes__0"}]},{id:1574,name:"ad_poles_urbains",metadata:{is_queryable:!0,legend_name:"ad:poles_urbains",metadata_id:"891c4e2b-8972-4fd7-a1aa-6330f6dafbf8"},dimensions:{},type:"WMS",layers:"ad_poles_urbains",imageType:"image/png",style:"default",childLayers:[{name:"ad_poles_urbains__17"},{name:"ad_poles_urbains__18"},{name:"ad_poles_urbains__19"},{name:"ad_poles_urbains__20"},{name:"ad_poles_urbains__21"},{name:"ad_poles_urbains__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1548,name:"ad_etat_population",children:[{id:1549,name:"ad_population_stock_evolution_densite",children:[{id:1575,name:"ad_population_commune_canton",children:[{id:1576,name:"ad_population_canton",metadata:{is_queryable:!0,legend_name:"ad:population_canton",metadata_id:"18ceedb6-1867-419f-ab92-11e9787782a0"},dimensions:{},type:"WMS",layers:"ad_population_canton",imageType:"image/png",style:"default",childLayers:[{name:"ad_population_canton__24"},{name:"ad_population_canton__0"}]},{id:1577,name:"ad_population_commune",metadata:{is_queryable:!0,legend_name:"ad:population_commune",metadata_id:"26308dad-cae4-4ba7-af9f-5585488efb9d"},dimensions:{},type:"WMS",layers:"ad_population_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_population_commune__23"},{name:"ad_population_commune__0"}]}],metadata:{},mixed:!0},{id:1550,name:"ad_evolution_pop_comm",children:[{id:1533,name:"ad_evol_pop_1981_2018",metadata:{is_queryable:!0,legend_name:"ad:accroissement:1981:2018",metadata_id:"bb9534dd-5a4c-4cfd-8733-90f4b4501379"},dimensions:{},type:"WMS",layers:"ad_evol_pop_1981_2018",imageType:"image/png",style:"default",childLayers:[{name:"ad_evol_pop_1981_2018__25"},{name:"ad_evol_pop_1981_2018__0"}]}],metadata:{},mixed:!0},{id:1551,name:"ad_densite_pop",children:[{id:1535,name:"ad_densite_pop_comm",metadata:{is_queryable:!0,legend_name:"ad:population_densite_commune",metadata_id:"1c6bd461-d2f8-4d87-ab8e-48291eb18cbd"},dimensions:{},type:"WMS",layers:"ad_densite_pop_comm",imageType:"image/png",style:"default",childLayers:[{name:"ad_densite_pop_comm__28"},{name:"ad_densite_pop_comm__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1552,name:"ad_rapport_hommes_femmes",children:[{id:1578,name:"ad_prop_femmes_comm_2018",metadata:{is_queryable:!0,legend_name:"ad:proportion_femmes",metadata_id:"4424bbe2-bb9b-4bab-b0fd-b754d833ce07"},dimensions:{},type:"WMS",layers:"ad_prop_femmes_comm_2018",imageType:"image/png",style:"default",childLayers:[{name:"ad_prop_femmes_comm_2018__29"},{name:"ad_prop_femmes_comm_2018__0"}]}],metadata:{},mixed:!0},{id:1554,name:"ad_etrangers_lieu_naissance",children:[{id:1545,name:"ad_part_etrangers_comm",children:[{id:1579,name:"ad_structure_pop_comm",metadata:{is_queryable:!0,legend_name:"ad:structure_population",metadata_id:"a12c27e9-37a5-4a1e-a98d-6cfccff42c21"},dimensions:{},type:"WMS",layers:"ad_structure_pop_comm",imageType:"image/png",style:"default",childLayers:[{name:"ad_structure_pop_comm__27"},{name:"ad_structure_pop_comm__0"}]}],metadata:{},mixed:!0},{id:1555,name:"ad_nationalites_commune_2018",children:[{id:1536,name:"ad_part_portugais_commune",metadata:{is_queryable:!0,legend_name:"ad:part_portugais",metadata_id:"78513942-ee02-43c1-bd56-a32e57688bf7"},dimensions:{},type:"WMS",layers:"ad_part_portugais_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_portugais_commune__34"},{name:"ad_part_portugais_commune__35"},{name:"ad_part_portugais_commune__0"}]},{id:1534,name:"ad_part_francais_commune",metadata:{is_queryable:!0,legend_name:"ad:part_francais",metadata_id:"aff2570e-da08-47a3-a943-a9d8b16bcebb"},dimensions:{},type:"WMS",layers:"ad_part_francais_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_francais_commune__36"},{name:"ad_part_francais_commune__37"},{name:"ad_part_francais_commune__0"}]},{id:1544,name:"ad_part_italiens_commune",metadata:{is_queryable:!0,legend_name:"ad:part_italiens",metadata_id:"c983db23-867c-40b0-8388-80a6bc35cc96"},dimensions:{},type:"WMS",layers:"ad_part_italiens_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_italiens_commune__38"},{name:"ad_part_italiens_commune__39"},{name:"ad_part_italiens_commune__0"}]},{id:1541,name:"ad_part_belges_commune",metadata:{is_queryable:!0,legend_name:"ad:part_belges",metadata_id:"9b2484d9-1085-43df-bab0-e1ada3a02fde"},dimensions:{},type:"WMS",layers:"ad_part_belges_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_belges_commune__40"},{name:"ad_part_belges_commune__41"},{name:"ad_part_belges_commune__0"}]},{id:1538,name:"ad_part_allemands_commune",metadata:{is_queryable:!0,legend_name:"ad:part_allemands",metadata_id:"0c638f13-5530-41fc-8f3b-68eba2cbf8db"},dimensions:{},type:"WMS",layers:"ad_part_allemands_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_allemands_commune__42"},{name:"ad_part_allemands_commune__43"},{name:"ad_part_allemands_commune__0"}]},{id:1543,name:"ad_part_UE28_commune",metadata:{is_queryable:!0,legend_name:"ad:part_ue28",metadata_id:"2e232af1-5a76-44ba-b793-2e891c4d2056"},dimensions:{},type:"WMS",layers:"ad_part_UE28_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_UE28_commune__44"},{name:"ad_part_UE28_commune__45"},{name:"ad_part_UE28_commune__0"}]},{id:1542,name:"ad_part_nonUE28_commune",metadata:{is_queryable:!0,legend_name:"ad:part_non_ue28",metadata_id:"448fb00f-a7e6-442e-bc45-4f4eb2ba57b8"},dimensions:{},type:"WMS",layers:"ad_part_nonUE28_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_nonUE28_commune__46"},{name:"ad_part_nonUE28_commune__47"},{name:"ad_part_nonUE28_commune__0"}]},{id:1537,name:"ad_part_africains_commune",metadata:{is_queryable:!0,legend_name:"ad:part_africains",metadata_id:"4cda15de-4bf7-442c-b4ea-cf9eb48132e2"},dimensions:{},type:"WMS",layers:"ad_part_africains_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_africains_commune__48"},{name:"ad_part_africains_commune__49"},{name:"ad_part_africains_commune__0"}]},{id:1539,name:"ad_part_americains_commune",metadata:{is_queryable:!0,legend_name:"ad:part_americains",metadata_id:"5b9181b3-29a1-41a6-a44a-9e54a8677efd"},dimensions:{},type:"WMS",layers:"ad_part_americains_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_americains_commune__50"},{name:"ad_part_americains_commune__51"},{name:"ad_part_americains_commune__0"}]},{id:1540,name:"ad_part_asiates_commune",metadata:{is_queryable:!0,legend_name:"ad:part_asiates",metadata_id:"8f83aa66-4b95-4632-90c3-164f591ad99d"},dimensions:{},type:"WMS",layers:"ad_part_asiates_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_asiates_commune__52"},{name:"ad_part_asiates_commune__53"},{name:"ad_part_asiates_commune__0"}]}],metadata:{},mixed:!0},{id:1580,name:"ad_lieu_naissance_lux_etr",children:[{id:1581,name:"ad_lieu_naissance_commune",metadata:{is_queryable:!0,legend_name:"ad:lieu_naissance",metadata_id:"34c8f0cb-08fd-41d9-8f6c-e0036e48a7a2"},dimensions:{},type:"WMS",layers:"ad_lieu_naissance_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_lieu_naissance_commune__54"},{name:"ad_lieu_naissance_commune__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1556,name:"ad_structure_age",children:[{id:1557,name:"ad_age_moyen",children:[{id:1561,name:"ad_age_moyen_femmes",metadata:{is_queryable:!0,legend_name:"ad:age_moyen_femmes",metadata_id:"d371cccb-da30-4a98-9d6e-1b0a6cb43e84"},dimensions:{},type:"WMS",layers:"ad_age_moyen_femmes",imageType:"image/png",style:"default",childLayers:[{name:"ad_age_moyen_femmes__3"},{name:"ad_age_moyen_femmes__0"}]},{id:1562,name:"ad_age_moyen_hommes",metadata:{is_queryable:!0,legend_name:"ad:age_moyen_hommes",metadata_id:"6448bc58-c7a2-483e-8fef-381bcd24c007"},dimensions:{},type:"WMS",layers:"ad_age_moyen_hommes",imageType:"image/png",style:"default",childLayers:[{name:"ad_age_moyen_hommes__4"},{name:"ad_age_moyen_hommes__0"}]},{id:1563,name:"ad_age_moyen_2",metadata:{is_queryable:!0,legend_name:"ad:age_moyen_2",metadata_id:"d5e02e7a-859e-445e-984f-c88cc03f107e"},dimensions:{},type:"WMS",layers:"ad_age_moyen_2",imageType:"image/png",style:"default",childLayers:[{name:"ad_age_moyen_2__5"},{name:"ad_age_moyen_2__0"}]}],metadata:{},mixed:!0},{id:1558,name:"ad_proportion_classes_age",children:[{id:1564,name:"ad_moins20",metadata:{is_queryable:!0,legend_name:"ad:age_moins20",metadata_id:"5834d06d-316a-41e8-823d-68e522b77550"},dimensions:{},type:"WMS",layers:"ad_moins20",imageType:"image/png",style:"default",childLayers:[{name:"ad_moins20__7"},{name:"ad_moins20__0"}]},{id:1565,name:"ad_20_64",metadata:{is_queryable:!0,legend_name:"ad:age_20_64",metadata_id:"8d1624c9-9c5e-4131-8ebe-4989a1214be1"},dimensions:{},type:"WMS",layers:"ad_20_64",imageType:"image/png",style:"default",childLayers:[{name:"ad_20_64__8"},{name:"ad_20_64__0"}]},{id:1566,name:"ad_65plus",metadata:{is_queryable:!0,legend_name:"ad:age_65plus",metadata_id:"e263aee4-2f0f-454c-84d5-7abd64406211"},dimensions:{},type:"WMS",layers:"ad_65plus",imageType:"image/png",style:"default",childLayers:[{name:"ad_65plus__9"},{name:"ad_65plus__0"}]}],metadata:{},mixed:!0},{id:1559,name:"ad_proportion_jeunes",children:[{id:1567,name:"ad_moins3",metadata:{is_queryable:!0,legend_name:"ad:age_moin3",metadata_id:"e270926d-1f82-42c5-be80-c8f0d551e52c"},dimensions:{},type:"WMS",layers:"ad_moins3",imageType:"image/png",style:"default",childLayers:[{name:"ad_moins3__11"},{name:"ad_moins3__0"}]},{id:1568,name:"ad_3_5",metadata:{is_queryable:!0,legend_name:"ad:age_3_5",metadata_id:"68791225-c16c-45c8-ba06-fa88be4ef4e0"},dimensions:{},type:"WMS",layers:"ad_3_5",imageType:"image/png",style:"default",childLayers:[{name:"ad_3_5__12"},{name:"ad_3_5__0"}]},{id:1569,name:"ad_6_10",metadata:{is_queryable:!0,legend_name:"ad:age_6_10",metadata_id:"2e54caf6-b57c-4da5-855e-0dd521518862"},dimensions:{},type:"WMS",layers:"ad_6_10",imageType:"image/png",style:"default",childLayers:[{name:"ad_6_10__13"},{name:"ad_6_10__0"}]},{id:1570,name:"ad_11_17",metadata:{is_queryable:!0,legend_name:"ad:age_11_17",metadata_id:"cc51e192-a9b7-4d2f-9406-4ed6639280ed"},dimensions:{},type:"WMS",layers:"ad_11_17",imageType:"image/png",style:"default",childLayers:[{name:"ad_11_17__14"},{name:"ad_11_17__0"}]}],metadata:{},mixed:!0},{id:1560,name:"ad_proportion_ages",children:[{id:1571,name:"ad_65_74",metadata:{is_queryable:!0,legend_name:"ad:age_65_74",metadata_id:"fb59a479-3177-417b-a905-bff71f9eb335"},dimensions:{},type:"WMS",layers:"ad_65_74",imageType:"image/png",style:"default",childLayers:[{name:"ad_65_74__16"},{name:"ad_65_74__0"}]},{id:1572,name:"ad_75_89",metadata:{is_queryable:!0,legend_name:"ad:age_75_89",metadata_id:"ee4a9399-501f-4a1f-93b0-d3827d3dd016"},dimensions:{},type:"WMS",layers:"ad_75_89",imageType:"image/png",style:"default",childLayers:[{name:"ad_75_89__17"},{name:"ad_75_89__0"}]},{id:1573,name:"ad_90plus",metadata:{is_queryable:!0,legend_name:"ad:age_90plus",metadata_id:"c859f388-6e37-49c5-bc23-404703ad9215"},dimensions:{},type:"WMS",layers:"ad_90plus",imageType:"image/png",style:"default",childLayers:[{name:"ad_90plus__18"},{name:"ad_90plus__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1589,name:"ad_rapport_dependance",children:[{id:1582,name:"ad_rapport_dependance_personnes_agees",metadata:{is_queryable:!0,legend_name:"ad:rapport_dependance_ages",metadata_id:"b739896e-28cb-471b-afc8-4c9d8a36fcf5"},dimensions:{},type:"WMS",layers:"ad_rapport_dependance_personnes_agees",imageType:"image/png",style:"default",childLayers:[{name:"ad_rapport_dependance_personnes_agees__19"},{name:"ad_rapport_dependance_personnes_agees__0"}]},{id:1583,name:"ad_rapport_dependance_jeunes",metadata:{is_queryable:!0,legend_name:"ad:rapport_dependance_jeunes",metadata_id:"711df835-4cf0-4557-80dc-67c7c18d5f3c"},dimensions:{},type:"WMS",layers:"ad_rapport_dependance_jeunes",imageType:"image/png",style:"default",childLayers:[{name:"ad_rapport_dependance_jeunes__20"},{name:"ad_rapport_dependance_jeunes__0"}]},{id:1584,name:"ad_rapport_dependance_total",metadata:{is_queryable:!0,legend_name:"ad:rapport_dependance_total",metadata_id:"b898fae0-2073-4cc2-88b4-a4851e93e16f"},dimensions:{},type:"WMS",layers:"ad_rapport_dependance_total",imageType:"image/png",style:"default",childLayers:[{name:"ad_rapport_dependance_total__21"},{name:"ad_rapport_dependance_total__0"}]}],metadata:{},mixed:!0},{id:1590,name:"ad_situation_matrimoniale",children:[{id:1585,name:"ad_celibataires",metadata:{is_queryable:!0,legend_name:"ad:celibataires",metadata_id:"40c3ab92-f09b-4722-b401-a6a271f083a4"},dimensions:{},type:"WMS",layers:"ad_celibataires",imageType:"image/png",style:"default",childLayers:[{name:"ad_celibataires__23"},{name:"ad_celibataires__0"}]},{id:1586,name:"ad_maries_pacses",metadata:{is_queryable:!0,legend_name:"ad:maries",metadata_id:"764c6af3-bc24-43a6-9741-d3e4f7cf83bb"},dimensions:{},type:"WMS",layers:"ad_maries_pacses",imageType:"image/png",style:"default",childLayers:[{name:"ad_maries_pacses__24"},{name:"ad_maries_pacses__0"}]},{id:1587,name:"ad_divorces_separes",metadata:{is_queryable:!0,legend_name:"ad:divorces",metadata_id:"7eb6a7f9-1419-4b34-adbc-fecaef5b5954"},dimensions:{},type:"WMS",layers:"ad_divorces_separes",imageType:"image/png",style:"default",childLayers:[{name:"ad_divorces_separes__25"},{name:"ad_divorces_separes__0"}]},{id:1588,name:"ad_veufs_veuves",metadata:{is_queryable:!0,legend_name:"ad:veufs",metadata_id:"e17b3af4-b31b-47ec-9a38-c01e8d3ccb30"},dimensions:{},type:"WMS",layers:"ad_veufs_veuves",imageType:"image/png",style:"default",childLayers:[{name:"ad_veufs_veuves__26"},{name:"ad_veufs_veuves__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1591,name:"ad_mouvement_population",children:[{id:1592,name:"ad_naissances",children:[{id:1597,name:"ad_naissances_taux_natalite",metadata:{is_queryable:!0,legend_name:"ad:naissances_taux_natalite",metadata_id:"9930d837-0412-47a3-bca1-711cdd61af6a"},dimensions:{},type:"WMS",layers:"ad_naissances_taux_natalite",imageType:"image/png",style:"default",childLayers:[{name:"ad_naissances_taux_natalite__4"},{name:"ad_naissances_taux_natalite__5"},{name:"ad_naissances_taux_natalite__0"}]},{id:1598,name:"ad_naissances_mariage",metadata:{is_queryable:!0,legend_name:"ad:naissances_mariage",metadata_id:"535ff8a9-86b6-486d-8a68-2e73e0c7a979"},dimensions:{},type:"WMS",layers:"ad_naissances_mariage",imageType:"image/png",style:"default",childLayers:[{name:"ad_naissances_mariage__7"},{name:"ad_naissances_mariage__0"}]},{id:1599,name:"ad_naissances_age_maternite",metadata:{is_queryable:!0,legend_name:"ad:naissances_age_maternite",metadata_id:"75a40efe-456c-4f72-8ce7-ea860143ea29"},dimensions:{},type:"WMS",layers:"ad_naissances_age_maternite",imageType:"image/png",style:"default",childLayers:[{name:"ad_naissances_age_maternite__9"},{name:"ad_naissances_age_maternite__0"}]}],metadata:{},mixed:!0},{id:1593,name:"ad_deces",children:[{id:1600,name:"ad_deces_taux_mortalite",metadata:{is_queryable:!0,legend_name:"ad:deces_taux_mortalite",metadata_id:"68b8de6b-b71f-4f93-9d07-150181d2dfba"},dimensions:{},type:"WMS",layers:"ad_deces_taux_mortalite",imageType:"image/png",style:"default",childLayers:[{name:"ad_deces_taux_mortalite__12"},{name:"ad_deces_taux_mortalite__13"},{name:"ad_deces_taux_mortalite__0"}]}],metadata:{},mixed:!0},{id:1594,name:"ad_solde_naturel",children:[{id:1601,name:"ad_solde_naturel_nombre_absolu",metadata:{is_queryable:!0,legend_name:"ad:solde_naturel",metadata_id:"7a2fd409-5e34-48b6-89a1-83d14b519dff"},dimensions:{},type:"WMS",layers:"ad_solde_naturel_nombre_absolu",imageType:"image/png",style:"default",childLayers:[{name:"ad_solde_naturel_nombre_absolu__16"},{name:"ad_solde_naturel_nombre_absolu__17"},{name:"ad_solde_naturel_nombre_absolu__18"},{name:"ad_solde_naturel_nombre_absolu__0"}]}],metadata:{},mixed:!0},{id:1595,name:"ad_migrations",children:[{id:1603,name:"ad_migrations_solde_interne",metadata:{is_queryable:!0,legend_name:"ad:migrations_solde",metadata_id:"2d500aa2-fe45-4a07-ab9f-506b11153744"},dimensions:{},type:"WMS",layers:"ad_migrations_solde_interne",imageType:"image/png",style:"default",childLayers:[{name:"ad_migrations_solde_interne__21"},{name:"ad_migrations_solde_interne__22"},{name:"ad_migrations_solde_interne__23"},{name:"ad_migrations_solde_interne__0"}]},{id:1604,name:"ad_migrations_solde_international",metadata:{is_queryable:!0,legend_name:"ad:migrations_solde_international",metadata_id:"48795eb2-baf4-4f60-bb41-bed3b7dac520"},dimensions:{},type:"WMS",layers:"ad_migrations_solde_international",imageType:"image/png",style:"default",childLayers:[{name:"ad_migrations_solde_international__25"},{name:"ad_migrations_solde_international__26"},{name:"ad_migrations_solde_international__27"},{name:"ad_migrations_solde_international__0"}]},{id:1605,name:"ad_migrations_solde_total",metadata:{is_queryable:!0,legend_name:"ad:migrations_solde_total",metadata_id:"27cdcc17-8190-4381-94df-e06dcbe7808a"},dimensions:{},type:"WMS",layers:"ad_migrations_solde_total",imageType:"image/png",style:"default",childLayers:[{name:"ad_migrations_solde_total__29"},{name:"ad_migrations_solde_total__30"},{name:"ad_migrations_solde_total__31"},{name:"ad_migrations_solde_total__0"}]}],metadata:{},mixed:!0},{id:1596,name:"ad_mariages",children:[{id:1606,name:"ad_mariages_taux_nuptialite",metadata:{is_queryable:!0,legend_name:"ad:mariages_taux_nuptialite",metadata_id:"25192002-b1b7-49fd-a0d7-b83642c07c68"},dimensions:{},type:"WMS",layers:"ad_mariages_taux_nuptialite",imageType:"image/png",style:"default",childLayers:[{name:"ad_mariages_taux_nuptialite__34"},{name:"ad_mariages_taux_nuptialite__35"},{name:"ad_mariages_taux_nuptialite__0"}]},{id:1607,name:"ad_mariages_age_femme",metadata:{is_queryable:!0,legend_name:"ad:mariages_age_femmes",metadata_id:"727febc6-600f-425c-a8d6-1349890f5e31"},dimensions:{},type:"WMS",layers:"ad_mariages_age_femme",imageType:"image/png",style:"default",childLayers:[{name:"ad_mariages_age_femme__37"},{name:"ad_mariages_age_femme__0"}]},{id:1608,name:"ad_mariage_age_hommes",metadata:{is_queryable:!0,legend_name:"ad:mariages_age_homme",metadata_id:"e7334b68-11fe-430f-95d5-d2f792d24011"},dimensions:{},type:"WMS",layers:"ad_mariage_age_hommes",imageType:"image/png",style:"default",childLayers:[{name:"ad_mariage_age_hommes__38"},{name:"ad_mariage_age_hommes__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1602,name:"ad_langues_lux",children:[{id:1616,name:"ad_langue_principale_2018",children:[{id:1609,name:"ad_langues_luxembourgeois",metadata:{is_queryable:!0,legend_name:"ad:langues_lux",metadata_id:"665006fe-aaff-40d3-8adc-76f41909a2cf"},dimensions:{},type:"WMS",layers:"ad_langues_luxembourgeois",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_luxembourgeois__42"},{name:"ad_langues_luxembourgeois__43"},{name:"ad_langues_luxembourgeois__0"}]},{id:1610,name:"ad_langues_francais",metadata:{is_queryable:!0,legend_name:"ad:langues_francais",metadata_id:"207b92c0-6479-4bbc-b8a3-3ddef53d3029"},dimensions:{},type:"WMS",layers:"ad_langues_francais",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_francais__45"},{name:"ad_langues_francais__46"},{name:"ad_langues_francais__0"}]},{id:1611,name:"ad_langues_allemand",metadata:{is_queryable:!0,legend_name:"ad:langues_allemand",metadata_id:"2fbdab89-6330-426c-af00-a1ce4b6294f5"},dimensions:{},type:"WMS",layers:"ad_langues_allemand",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_allemand__48"},{name:"ad_langues_allemand__49"},{name:"ad_langues_allemand__0"}]},{id:1612,name:"ad_langues_portugais",metadata:{is_queryable:!0,legend_name:"ad:langues_portugais",metadata_id:"a0efcf68-9445-4d39-8193-a6f9cebf500b"},dimensions:{},type:"WMS",layers:"ad_langues_portugais",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_portugais__51"},{name:"ad_langues_portugais__52"},{name:"ad_langues_portugais__0"}]},{id:1613,name:"ad_langues_italien",metadata:{is_queryable:!0,legend_name:"ad:langues_italien",metadata_id:"aa83ba2b-297e-4d1a-9dbf-00853a3a01bd"},dimensions:{},type:"WMS",layers:"ad_langues_italien",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_italien__54"},{name:"ad_langues_italien__55"},{name:"ad_langues_italien__0"}]},{id:1614,name:"ad_langues_anglais",metadata:{is_queryable:!0,legend_name:"ad:langues_anglais",metadata_id:"2fef731d-4c11-4c56-be6c-69b2f800931d"},dimensions:{},type:"WMS",layers:"ad_langues_anglais",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_anglais__57"},{name:"ad_langues_anglais__58"},{name:"ad_langues_anglais__0"}]},{id:1615,name:"ad_langues_autre",metadata:{is_queryable:!0,legend_name:"ad:langues_autre",metadata_id:"6c87f276-7219-4507-b4ba-a7f8a2378856"},dimensions:{},type:"WMS",layers:"ad_langues_autre",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_autre__60"},{name:"ad_langues_autre__61"},{name:"ad_langues_autre__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:818,name:"API_ONLY",icon:"main",children:[{id:2841,name:"Couches populaires",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:262,name:"cadastre",metadata:{exclusion:"[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115]",is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"cadastre",imageType:"image/png"},{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:698,name:"pag_pag",metadata:{is_queryable:!0,legend_name:"pag",linked_layers:["697","696","1366","709","710"],max_dpi:128,metadata_id:"12c67295-d150-430f-aa28-fa004ecba3c7",start_opacity:.7},dimensions:{},type:"WMS",layers:"pag_pag",imageType:"image/png",style:"default",childLayers:[{name:"pag_pag__28"},{name:"pag_pag__27"},{name:"pag_pag__26"},{name:"pag_pag__25"},{name:"pag_pag__24"},{name:"pag_pag__23"},{name:"pag_pag__22"},{name:"pag_pag__21"},{name:"pag_pag__20"},{name:"pag_pag__19"},{name:"pag_pag__18"},{name:"pag_pag__17"},{name:"pag_pag__16"},{name:"pag_pag__15"},{name:"pag_pag__14"},{name:"pag_pag__13"},{name:"pag_pag__12"},{name:"pag_pag__11"},{name:"pag_pag__9"},{name:"pag_pag__8"},{name:"pag_pag__7"},{name:"pag_pag__6"},{name:"pag_pag__202"},{name:"pag_pag__5"},{name:"pag_pag__200"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:2811,name:"tour_randonnee_all",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_randonnee_all",imageType:"image/png",style:"default",childLayers:[{name:"tour_randonnee_all__category"}]},{id:1813,name:"myenergy_solarkataster_luxemburg_solar_potentials",metadata:{is_queryable:!0,legend_name:"energie:potentiel_solaire",metadata_id:"97628fac-c53b-4426-a829-b188105b9ead",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857",ogc_query_layers:["st_luxemburg_22_feature_info"]},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_solar_potentials",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_solar_potentials__st_luxemburg_22_solar_potentials"}]},{id:245,name:"env_zones_protegees",children:[{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:334,name:"env_zones_protegees_communautaires",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{is_expanded:!0},mixed:!0},{id:2846,name:"Couches rcentes",children:[{id:1734,name:"log_prix_app",children:[{id:1739,name:"log_prix_app_existants",metadata:{is_queryable:!0,legend_name:"logt_prix_app_exist",metadata_id:"9679921a-f90e-4d26-9918-96e66225a171"},dimensions:{},type:"WMS",layers:"log_prix_app_existants",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_existants__21"}]},{id:1740,name:"log_prix_app_en_construction",metadata:{is_queryable:!0,legend_name:"logt_prix_app_enconstruction",metadata_id:"bbb36662-64ba-4d2e-a9a4-7ab00d0bb264"},dimensions:{},type:"WMS",layers:"log_prix_app_en_construction",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_en_construction__20"}]}],metadata:{},mixed:!0},{id:1735,name:"log_loyers",children:[{id:1741,name:"log_loyers_app",metadata:{is_queryable:!0,legend_name:"logt_loyers_app",metadata_id:"2c3dc437-77ac-4030-a8d0-f61fd12e8f5e"},dimensions:{},type:"WMS",layers:"log_loyers_app",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_app__18"}]},{id:1742,name:"log_loyers_maisons",metadata:{is_queryable:!0,legend_name:"logt_loyers_maisons",metadata_id:"f914e59b-6684-4a94-b5ec-b5a782708371"},dimensions:{},type:"WMS",layers:"log_loyers_maisons",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_maisons__17"}]}],metadata:{},mixed:!0},{id:2835,name:"ortho2023_IR",metadata:{exclusion:'["exclusion_ortho2023IR","exclusion_ortho2023IR_bati"]',metadata_id:"3bb6099a-67f2-4243-b820-ffaeb03e439b"},dimensions:{},type:"WMS",layers:"ortho2023_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2023_IR__0"}]},{id:2812,name:"aev_pacte_climat_2023",metadata:{is_queryable:!0,legend_name:"aev:klimapakt2023",metadata_id:"223a6d2c-ac2c-4b95-9beb-900fd9b3e168"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2023__10"}]},{id:2794,name:"eau_restrictions_forages_prives_prelevement",metadata:{legend_name:"eau:restrictions_nouveaux_forages_prives",metadata_id:"b2f60fc1-c2e8-4472-a8e2-4e11a862b257"},dimensions:{},type:"WMS",layers:"eau_restrictions_forages_prives_prelevement",imageType:"image/png",style:"default",childLayers:[{name:"eau_restrictions_forages_prives_prelevement__475"}]}],metadata:{is_expanded:!1},mixed:!0},{id:820,name:"API_ONLY_LAYERS",children:[{id:1363,name:"reagis",metadata:{is_queryable:!0,metadata_id:"aafa412b-a2df-428e-a6d2-19a5774c8000"},dimensions:{},type:"WMS",layers:"reagis",imageType:"image/png",style:"dfault",childLayers:[{name:"reagis__POI"}]},{id:1375,name:"makerspaces",metadata:{is_queryable:!0,metadata_id:"4344ba7d-463c-499f-8a15-29e8baf46d9a"},dimensions:{},type:"WMS",layers:"makerspaces",imageType:"image/png",style:"default",childLayers:[{name:"makerspaces__POI"}]},{id:1376,name:"parcels_daily",metadata:{is_queryable:!0,metadata_id:"205a55db-473d-4f0e-8fbb-265dcb4dd8e2"},dimensions:{},type:"WMS",layers:"parcels_daily",imageType:"image/png",style:"default",childLayers:[{name:"parcels_daily__PARCELLES"}]},{id:1459,name:"OSM_MQ",metadata:{attribution:'&copy; <a href="https://www.mapzen.com/rights">CARTO</a>  &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors for data outside of Luxembourg',metadata_id:"537f7a04-3d75-4f03-9ac4-7212ad78219c"},dimensions:{},type:"WMS",layers:"OSM_MQ",imageType:"image/png",style:"default",childLayers:[{name:"OSM_MQ__category"}]},{id:1798,name:"sante_infrastructures_covid19",metadata:{is_queryable:!0,legend_name:"sante_infrastructures_covid19",metadata_id:"3f86620b-cb97-49fb-a363-898575f6628c",start_opacity:.9},dimensions:{},type:"WMS",layers:"1798",imageType:"image/png",style:"default",childLayers:[{name:"sante_infrastructures_covid19__POI"}]},{id:1800,name:"sip_theatres",metadata:{is_queryable:!0,metadata_id:"6745d7eb-93e3-4f55-be5f-2286903e46f0",start_opacity:.9},dimensions:{},type:"WMS",layers:"1800",imageType:"image/png",style:"default",childLayers:[{name:"sip_theatres__POI"}]},{id:1960,name:"stations_sps_Lux",metadata:{},dimensions:{},type:"WMS",layers:"1078",imageType:"image/png",style:"default",childLayers:[{name:"stations_sps_Lux__POI"}]},{id:2575,name:"asta_uferrandstreifen",metadata:{is_queryable:!0,metadata_id:"b8f5042b-793f-4d78-a96a-b9a7c8837c7c"},dimensions:{},type:"WMS",layers:"asta_uferrandstreifen",imageType:"image/png",childLayers:[{name:"asta_uferrandstreifen__0"}]},{id:2709,name:"geo_carte_geol_harmonisee_forage_virtuel",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee",return_clicked_point:"true"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee_forage_virtuel",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee_forage_virtuel__6"},{name:"geo_carte_geol_harmonisee_forage_virtuel__1"},{name:"geo_carte_geol_harmonisee_forage_virtuel__2"},{name:"geo_carte_geol_harmonisee_forage_virtuel__3"}]},{id:2710,name:"meteolux_meteo_en_europe",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"meteolux_meteo_en_europe",imageType:"image/png",style:"default",childLayers:[{name:"meteolux_meteo_en_europe__0"}]},{id:2711,name:"meteolux_meteo_gr",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"meteolux_meteo_gr",imageType:"image/png",style:"default",childLayers:[{name:"meteolux_meteo_gr__1"}]},{id:2787,name:"ortho_1967",metadata:{metadata_id:"9be42a5c-7a6f-46b5-8815-8adb17e6aff6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_1967",imageType:"image/jpeg"},{id:2825,name:"geoportail_minecraft_exports",metadata:{is_queryable:!0,metadata_id:"0fedc058-9bcb-4abf-a32b-53af46b7b3fd",start_opacity:.7},dimensions:{},type:"WMS",layers:"geoportail_minecraft_exports",imageType:"image/png",childLayers:[{name:"geoportail_minecraft_exports__0"}]},{id:2836,name:"map_new-geoportail-lu-roadmap",metadata:{},dimensions:{},type:"WMTS",url:"https://maptiler.geoportail.lu/api/maps/new-geoportail-lu-roadmap/WMTSCapabilities.xml",style:"default",matrixSet:"map_new-geoportail-lu-roadmap",layer:"map_new-geoportail-lu-roadmap",imageType:"image/jpeg"},{id:2842,name:"test_sproochatlas_audio",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"test_sproochatlas_audio",imageType:"image/png",style:"default",childLayers:[{name:"test_sproochatlas_audio__1"},{name:"test_sproochatlas_audio__2"},{name:"test_sproochatlas_audio__23"},{name:"test_sproochatlas_audio__24"},{name:"test_sproochatlas_audio__25"}]},{id:2868,name:"aev_enoise_hotspots_2021_major_roads",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_hotspots_2021_major_roads",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_hotspots_2021_major_roads__9"}]},{id:2869,name:"aev_enoise_hotspots_2021_major_railways",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_hotspots_2021_major_railways",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_hotspots_2021_major_railways__8"}]},{id:2870,name:"aev_enoise_hotspots_2021_agglo_lux",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_hotspots_2021_agglo_lux",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_hotspots_2021_agglo_lux__7"}]},{id:2871,name:"aev_enoise_hotspots_2021_agglo_sud",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_hotspots_2021_agglo_sud",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_hotspots_2021_agglo_sud__6"}]},{id:2872,name:"aev_enoise_batiments_sensibles_2021",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_batiments_sensibles_2021",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_batiments_sensibles_2021__12"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{ol3d_options:{cesium3DTileStyle:{show:"${id} !== 'gml1c41b6db-cb10-4593-9eed-62b660c786b9' && ${id} !== 'gml6a0ef1e9-a3f5-4962-84b0-e776b0eb9b21'"}}}},{id:1732,name:"logement",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:1733,name:"log_prix",children:[{id:1734,name:"log_prix_app",children:[{id:1739,name:"log_prix_app_existants",metadata:{is_queryable:!0,legend_name:"logt_prix_app_exist",metadata_id:"9679921a-f90e-4d26-9918-96e66225a171"},dimensions:{},type:"WMS",layers:"log_prix_app_existants",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_existants__21"}]},{id:1740,name:"log_prix_app_en_construction",metadata:{is_queryable:!0,legend_name:"logt_prix_app_enconstruction",metadata_id:"bbb36662-64ba-4d2e-a9a4-7ab00d0bb264"},dimensions:{},type:"WMS",layers:"log_prix_app_en_construction",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_en_construction__20"}]}],metadata:{},mixed:!0},{id:1735,name:"log_loyers",children:[{id:1741,name:"log_loyers_app",metadata:{is_queryable:!0,legend_name:"logt_loyers_app",metadata_id:"2c3dc437-77ac-4030-a8d0-f61fd12e8f5e"},dimensions:{},type:"WMS",layers:"log_loyers_app",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_app__18"}]},{id:1742,name:"log_loyers_maisons",metadata:{is_queryable:!0,legend_name:"logt_loyers_maisons",metadata_id:"f914e59b-6684-4a94-b5ec-b5a782708371"},dimensions:{},type:"WMS",layers:"log_loyers_maisons",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_maisons__17"}]}],metadata:{},mixed:!0},{id:1736,name:"log_prix_terrains",children:[{id:1743,name:"log_prix_median_terrain_15_17",metadata:{is_queryable:!0,legend_name:"logt_prix_median_terrain",metadata_id:"3d5b4a58-3817-41fe-b2db-9310fa605635"},dimensions:{},type:"WMS",layers:"log_prix_median_terrain_15_17",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_median_terrain_15_17__14"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1737,name:"log_potentiel_foncier",children:[{id:1744,name:"log_superficie_2016",metadata:{is_queryable:!0,legend_name:"logt_superficie_dispo",metadata_id:"c3fb1ec8-10d3-4e2b-9272-bb0a7396cdb5"},dimensions:{},type:"WMS",layers:"log_superficie_2016",imageType:"image/png",style:"default",childLayers:[{name:"log_superficie_2016__12"}]},{id:1745,name:"log_superficie_selon_type_2016",metadata:{is_queryable:!0,legend_name:"logt_superficie_selon_type",metadata_id:"8c6408ca-4195-4cf0-b4bc-8c095f372c42"},dimensions:{},type:"WMS",layers:"log_superficie_selon_type_2016",imageType:"image/png",style:"default",childLayers:[{name:"log_superficie_selon_type_2016__11"}]}],metadata:{},mixed:!0},{id:1738,name:"log_consommation_fonciere",children:[{id:1746,name:"log_superficie_consommee",metadata:{is_queryable:!0,legend_name:"logt_superficie_consommee",metadata_id:"6766fa1f-26fe-402b-9f21-e3d6e903f13b"},dimensions:{},type:"WMS",layers:"log_superficie_consommee",imageType:"image/png",style:"default",childLayers:[{name:"log_superficie_consommee__9"}]},{id:1747,name:"log_superficie_reconstruite",metadata:{is_queryable:!0,legend_name:"logt_superficie_reconstruite",metadata_id:"ea8570b2-f85b-4445-a5d1-a63ac01fa2c1"},dimensions:{},type:"WMS",layers:"log_superficie_reconstruite",imageType:"image/png",style:"default",childLayers:[{name:"log_superficie_reconstruite__8"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:1833,name:"energie",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:1842,name:"energie_solaire_group",children:[{id:1821,name:"myenergy_solarkataster",children:[{id:1813,name:"myenergy_solarkataster_luxemburg_solar_potentials",metadata:{is_queryable:!0,legend_name:"energie:potentiel_solaire",metadata_id:"97628fac-c53b-4426-a829-b188105b9ead",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857",ogc_query_layers:["st_luxemburg_22_feature_info"]},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_solar_potentials",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_solar_potentials__st_luxemburg_22_solar_potentials"}]},{id:1819,name:"myenergy_solarkataster_luxemburg_feed_in_potential",metadata:{is_queryable:!0,legend_name:"energie:tarifs_injection",metadata_id:"23e8adfb-b628-4a4f-89ea-0f057baf6ec8",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857"},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_feed_in_potential",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_feed_in_potential__st_luxemburg_22_feed_in_potential"}]},{id:1818,name:"myenergy_solarkataster_luxemburg_roofs_above_30_kWp",metadata:{is_queryable:!0,legend_name:"energie:toitures",metadata_id:"a16c315e-abae-4904-95bc-90199393e8ae",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857"},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_roofs_above_30_kWp",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_roofs_above_30_kWp__st_luxemburg_22_roofs_above_30_kWp"}]},{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0},{id:1690,name:"Analyse Ensoleillement",children:[{id:1806,name:"Ensoleillement au 15.02",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"ece9ef19-b1ff-4acc-9d19-c00f7233d648"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.02__15"}]},{id:1683,name:"Ensoleillement au 15.05",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"ece9ef19-b1ff-4acc-9d19-c00f7233d648"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.05",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.05__16"}]},{id:1682,name:"Ensoleillement au 15.08",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"89b63cab-2220-4b00-abd5-2bfbe35352cd"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.08",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.08__17"}]}],metadata:{legend_name:"uf:solar_hiver",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},mixed:!0}],metadata:{},mixed:!0},{id:1843,name:"energie_eolienne_group",children:[{id:1360,name:"aev_emplacements_eoliennes",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:02:39.4998465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"5e739028d2bfb222b781c722",is_queryable:!0,legend_name:"aev:eoliennes",metadata_id:"354c5313-a733-4121-8f0d-5e0932d563b7"},dimensions:{},type:"WMS",layers:"aev_emplacements_eoliennes",imageType:"image/png",style:"default",childLayers:[{name:"aev_emplacements_eoliennes__2"}]}],metadata:{},mixed:!0},{id:1835,name:"ilr_energie_group",children:[{id:2473,name:"ilr_energie_canton_commune",children:[{id:1836,name:"ilr_energie_biogas",metadata:{is_queryable:!0,legend_name:"energie:ilr:biogaz",metadata_id:"3caf3f4a-f492-4635-8c8e-b1b7ad37ae24-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_biogas",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_biogas__1"},{name:"ilr_energie_biogas__2"},{name:"ilr_energie_biogas__0"}]},{id:1837,name:"ilr_energie_biomasse",metadata:{is_queryable:!0,legend_name:"energie:ilr:biomasse",metadata_id:"021ba8d1-2af9-45b7-8e30-c461ae56416a",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_biomasse",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_biomasse__3"},{name:"ilr_energie_biomasse__4"},{name:"ilr_energie_biomasse__0"}]},{id:1838,name:"ilr_energie_cogeneration",metadata:{is_queryable:!0,legend_name:"energie:ilr:cogeneration",metadata_id:"71a854b4-010d-48a4-acc1-8eddc2bb87c1-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_cogeneration",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_cogeneration__5"},{name:"ilr_energie_cogeneration__6"},{name:"ilr_energie_cogeneration__0"}]},{id:1839,name:"ilr_energie_eolienne",metadata:{is_queryable:!0,legend_name:"energie:ilr:eolienne",metadata_id:"97ce42fc-848c-4c1c-a361-61a9736ae97f-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_eolienne",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_eolienne__7"},{name:"ilr_energie_eolienne__8"},{name:"ilr_energie_eolienne__0"}]},{id:1840,name:"ilr_energie_hydroelectrique",metadata:{is_queryable:!0,legend_name:"energie:ilr:hydroelectrique",metadata_id:"a96e0c84-8dcc-49af-a753-7321072aa198-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_hydroelectrique",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_hydroelectrique__9"},{name:"ilr_energie_hydroelectrique__10"},{name:"ilr_energie_hydroelectrique__0"}]},{id:1841,name:"ilr_energie_photovoltaique",metadata:{is_queryable:!0,legend_name:"energie:ilr:solaire",metadata_id:"1bd8193e-5728-4020-be60-9677f3a2c2d6-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_photovoltaique",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_photovoltaique__11"},{name:"ilr_energie_photovoltaique__12"},{name:"ilr_energie_photovoltaique__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1847,name:"energie_disponibilite",children:[{id:1494,name:"gaz_naturel",metadata:{is_queryable:!0,legend_name:"gaz",metadata_id:"9e04e366-fcb7-4836-8d09-41b20f280cb0",start_opacity:.75},dimensions:{},type:"WMS",layers:"gaz_naturel",imageType:"image/png",style:"default",childLayers:[{name:"gaz_naturel__1"},{name:"gaz_naturel__3"}]}],metadata:{},mixed:!0},{id:1845,name:"electromobilite_group",children:[{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:2707,name:"mmtp_electromobilite_AC",metadata:{is_queryable:!0,metadata_id:"08885ef4-d534-47d4-8b93-2883c71a8452"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_AC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_AC__0"}]},{id:2708,name:"mmtp_electromobilite_DC",metadata:{is_queryable:!0,metadata_id:"624d34e4-1192-40bb-871a-e6c8720d766b"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_DC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_DC__2"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:1834,name:"np_our",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:1860,name:"npour_basisdaten",children:[{id:1861,name:"npour_basisdaten_verwaltungseinheiten",children:[{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]}],metadata:{},mixed:!0},{id:1862,name:"npour_basisdaten_adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0},{id:1863,name:"npour_basisdaten_topo",children:[{id:223,name:"topo_250k",metadata:{metadata_id:"e1f601a5-ed8f-4043-8719-0cad50cbb483"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_250k",imageType:"image/png"},{id:1730,name:"topo_100k_2019",metadata:{legend_name:"topo_100k_sans_tour",metadata_id:"ce051f08-bca6-43c0-af7b-5fcf3e02376e"},dimensions:{},type:"WMS",layers:"topo_100k_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_100k_2019__topo_100k"}]},{id:1727,name:"topo_50k_2019",metadata:{legend_name:"topo_50k_sans_tour",metadata_id:"abc505e1-224c-455e-9e7f-4f094eb4e7b0"},dimensions:{},type:"WMS",layers:"topo_50k_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_50k_2019__50K-2019-LUX_avec_ETRANGER"}]},{id:206,name:"topo_20k",metadata:{legend_name:"topo_20k",metadata_id:"ea998ae8-731a-43bc-aa9f-171684f97602"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_20k",imageType:"image/png"},{id:149,name:"topo_tour_20k",metadata:{legend_name:"topo_tour_20k",metadata_id:"1173_"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_tour_20k",imageType:"image/png"},{id:195,name:"topo_5k",metadata:{exclusion:"[32,42]",legend_name:"topo_5k",metadata_id:"270_2012"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_5k",imageType:"image/png"}],metadata:{},mixed:!0},{id:178,name:"luft_und_satellitenbilder",children:[{id:2592,name:"act_ortho_time",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"1adb95b0-d0a5-4afa-936a-c9faa9edba2c",time_config:'{"default_time":"2023-08","time_links":{"2001-08":"ortho_2001","2004-08":"ortho_2004","2007-08":"ortho_2007","2010-08":"ortho_2010","2013-08":"ortho_2013","2016-08":"ortho_2016","2017-08":"ortho_2017","2018-08":"ortho_2018","2019-01":"ortho_2019_winter","2019-08":"ortho_2019","2020-08":"ortho_2020","2021-08":"ortho_2021","2022-08":"ortho_2022","2023-08":"ortho_2023"}}',time_layers:{"2001-08-01T00:00:00Z":"ortho_2001","2004-08-01T00:00:00Z":"ortho_2004","2007-08-01T00:00:00Z":"ortho_2007","2010-08-01T00:00:00Z":"ortho_2010","2013-08-01T00:00:00Z":"ortho_2013","2016-08-01T00:00:00Z":"ortho_2016","2017-08-01T00:00:00Z":"ortho_2017","2018-08-01T00:00:00Z":"ortho_2018","2019-01-01T00:00:00Z":"ortho_2019_winter","2019-08-01T00:00:00Z":"ortho_2019","2020-08-01T00:00:00Z":"ortho_2020","2021-08-01T00:00:00Z":"ortho_2021","2022-08-01T00:00:00Z":"ortho_2022","2023-08-01T00:00:00Z":"ortho_2023"}},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"act_ortho_time",imageType:"image/jpeg",time:{minValue:"2001-08-01T00:00:00Z",maxValue:"2023-08-01T00:00:00Z",values:["2001-08-01T00:00:00Z","2004-08-01T00:00:00Z","2007-08-01T00:00:00Z","2010-08-01T00:00:00Z","2013-08-01T00:00:00Z","2016-08-01T00:00:00Z","2017-08-01T00:00:00Z","2018-08-01T00:00:00Z","2019-01-01T00:00:00Z","2019-08-01T00:00:00Z","2020-08-01T00:00:00Z","2021-08-01T00:00:00Z","2022-08-01T00:00:00Z","2023-08-01T00:00:00Z"],resolution:"month",minDefValue:"2023-08-01T00:00:00Z",maxDefValue:null,mode:"value",widget:"slider"}},{id:2792,name:"ortho_2023",metadata:{exclusion:'["exclusion_ortho2023","exclusion_ortho2023_bati"]',metadata_id:"742d2a2e-eb7a-4a0b-a6d8-00d70831ef04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2023",imageType:"image/jpeg"},{id:2537,name:"ortho_2022",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"63f18835-55ac-448c-a0ea-dc998933077b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2022",imageType:"image/jpeg"},{id:2272,name:"ortho_2021",metadata:{exclusion:"[121,221]",metadata_id:"ea0bd2ff-b743-4f3a-bd9b-450976563de9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2021",imageType:"image/jpeg"},{id:2056,name:"ortho_2020",metadata:{exclusion:"[119,219]",metadata_id:"87870b8a-10a1-4c33-bf50-7efe851fd450"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2020",imageType:"image/jpeg"},{id:1784,name:"ortho_2019",metadata:{exclusion:"[116,216]",metadata_id:"97c88ef6-6c64-4cb0-a134-06bb42b2b448"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019",imageType:"image/jpeg"},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1527,name:"ortho_2018",metadata:{exclusion:"[113,213]",metadata_id:"6fde72c4-802f-4663-be74-5fa5901cb4f0"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2018",imageType:"image/jpeg"},{id:1371,name:"ortho_2017",metadata:{exclusion:"[111,211]",metadata_id:"1cdae616-1a7a-49d5-b35d-05864891641f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017",imageType:"image/jpeg"},{id:745,name:"ortho_2016",metadata:{exclusion:"[107,207]",metadata_id:"bba79b6d-4205-4ce4-98e4-7b7922afcd55"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016",imageType:"image/jpeg"},{id:360,name:"ortho_2013",metadata:{exclusion:"[106,206]",metadata_id:"ced4a3dd-135e-43d0-86b9-2318982581f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013",imageType:"image/jpeg"},{id:342,name:"ortho_2010",metadata:{exclusion:"[105,205]",metadata_id:"0faf4bdb-a54b-42d7-942c-4e52fa66e963"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010",imageType:"image/jpeg"},{id:231,name:"ortho_2007",metadata:{exclusion:"[101,201]",metadata_id:"3be3d98e-7997-4ff6-8d77-e393a5fc4fdd"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2007",imageType:"image/jpeg"},{id:224,name:"ortho_2004",metadata:{exclusion:"[103,203]",metadata_id:"a185f78a-ca9c-43f8-8d06-b1abba8ff056"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2004",imageType:"image/jpeg"},{id:225,name:"ortho_2001",metadata:{exclusion:"[104,204]",metadata_id:"e6ff269c-1c7c-401f-a90b-b805e80a046e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2001",imageType:"image/jpeg"},{id:2787,name:"ortho_1967",metadata:{metadata_id:"9be42a5c-7a6f-46b5-8815-8adb17e6aff6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_1967",imageType:"image/jpeg"},{id:345,name:"topo_decoupage_ortho",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_ortho",imageType:"image/png"},{id:292,name:"wg_ikonos_satellitendaten",metadata:{legend_name:"wg:ikonos_satellitendaten",metadata_id:"db0eea79-114a-4e61-a1f2-7e064f92cdd3"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_ikonos_satellitendaten",imageType:"image/png"},{id:341,name:"aero_1951_10k",metadata:{is_queryable:!0,metadata_id:"16586649-8e46-4b04-b75c-5537a4bf214e"},dimensions:{},type:"WMS",layers:"aero_1951_10k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1951_10k__1951_10k"}]},{id:229,name:"aero_1951_25k",metadata:{is_queryable:!0,metadata_id:"b3b5fc05-323c-4f0b-804c-a4c186d62a96"},dimensions:{},type:"WMS",layers:"aero_1951_25k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1951_25k__1951_25k"}]},{id:140,name:"aero_1963_20k",metadata:{is_queryable:!0,metadata_id:"56b65f04-d3ab-45b6-9e93-95c8c9524c3e"},dimensions:{},type:"WMS",layers:"aero_1963_20k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1963_20k__1963_20k"}]},{id:665,name:"aero_1977_30k",metadata:{is_queryable:!0,metadata_id:"d9dd951e-7345-4ba2-9a76-ce54305edf2f"},dimensions:{},type:"WMS",layers:"aero_1977_30k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1977_30k__1977_30k"}]},{id:743,name:"aero_1987_30k",metadata:{is_queryable:!0,metadata_id:"98b63794-8cb1-42ff-9872-214f990ec8cd"},dimensions:{},type:"WMS",layers:"aero_1987_30k",imageType:"image/png",style:"defaults",childLayers:[{name:"aero_1987_30k__1987_30k"}]},{id:748,name:"aero_1994_30k",metadata:{is_queryable:!0,metadata_id:"abf7f6f5-8647-4317-98f6-8d4f5cd38585"},dimensions:{},type:"WMS",layers:"aero_1994_30k",imageType:"image/png",style:"defaults",childLayers:[{name:"aero_1994_30k__1994_30k"}]},{id:790,name:"Orthophotos Infrarouge",children:[{id:2835,name:"ortho2023_IR",metadata:{exclusion:'["exclusion_ortho2023IR","exclusion_ortho2023IR_bati"]',metadata_id:"3bb6099a-67f2-4243-b820-ffaeb03e439b"},dimensions:{},type:"WMS",layers:"ortho2023_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2023_IR__0"}]},{id:2595,name:"ortho2022_IR",metadata:{exclusion:'["exclusion_ortho2022IR","exclusion_ortho2022IR_bati"]',metadata_id:"c58ceaa0-d36d-4edf-ab68-ed1040bea10c"},dimensions:{},type:"WMS",layers:"ortho2022_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2022_IR__0"}]},{id:2283,name:"ortho2021_IR",metadata:{exclusion:"[122,222]",metadata_id:"067dc519-f507-45db-8e7a-f3ccc9125bc5"},dimensions:{},type:"WMS",layers:"ortho2021_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2021_IR__3"},{name:"ortho2021_IR__2"},{name:"ortho2021_IR__1"},{name:"ortho2021_IR__0"}]},{id:2089,name:"ortho2020_IR",metadata:{exclusion:"[120,220]",metadata_id:"134fb490-c022-476d-b484-dc652ae8c626"},dimensions:{},type:"WMS",layers:"ortho2020_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2020_IR__4"},{name:"ortho2020_IR__3"},{name:"ortho2020_IR__2"},{name:"ortho2020_IR__1"}]},{id:1785,name:"ortho2019_IR",metadata:{exclusion:"[117,217]",metadata_id:"3dfd031a-1721-4f35-b358-25062d5d4c26"},dimensions:{},type:"WMS",layers:"ortho2019_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2019_IR__9"},{name:"ortho2019_IR__8"},{name:"ortho2019_IR__7"},{name:"ortho2019_IR__6"}]},{id:1529,name:"ortho2018_IR",metadata:{exclusion:"[114,214]",metadata_id:"2edf6bcb-2a1c-4b8c-8488-56000133abb4"},dimensions:{},type:"WMS",layers:"ortho2018_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2018_IR__14"},{name:"ortho2018_IR__13"},{name:"ortho2018_IR__12"},{name:"ortho2018_IR__11"}]},{id:1372,name:"ortho_2017_irc",metadata:{exclusion:"[112,212]",metadata_id:"659a3236-a22e-44ae-9fa3-025cdf5d0043"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017_irc",imageType:"image/jpeg"},{id:793,name:"ortho_2016_irc",metadata:{exclusion:"[110,210]",is_queryable:!0,metadata_id:"c313da75-7d8b-4570-9db5-bb6add56309e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016_irc",imageType:"image/jpeg"},{id:792,name:"ortho_2013_irc",metadata:{exclusion:"[109,209]",is_queryable:!0,metadata_id:"649b34a1-a195-40b4-81c9-0100343b9661"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013_irc",imageType:"image/jpeg"},{id:791,name:"ortho_2010_irc",metadata:{exclusion:"[108,208]",is_queryable:!0,metadata_id:"728ffc2a-9062-4822-8596-01f0e93f6b40"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010_irc",imageType:"image/jpeg"}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1865,name:"npour_poi_group",children:[{id:1879,name:"npour_poi_propres",children:[{id:1880,name:"npour_poi_admin",metadata:{is_queryable:!0,metadata_id:"d5e79fbd-4a11-428f-a7be-4a765508e791"},dimensions:{},type:"WMS",layers:"npour_poi_admin",imageType:"image/png",childLayers:[{name:"npour_poi_admin__14"}]},{id:1881,name:"npour_poi_batiments_reli",metadata:{is_queryable:!0,metadata_id:"a3384282-5913-4610-b28e-72fa46ea18ea"},dimensions:{},type:"WMS",layers:"npour_poi_batiments_reli",imageType:"image/png",childLayers:[{name:"npour_poi_batiments_reli__12"}]},{id:1894,name:"npour_poi_culture",metadata:{is_queryable:!0,metadata_id:"d4b40114-f351-484d-9b09-bbfc0fd20abd"},dimensions:{},type:"WMS",layers:"npour_poi_culture",imageType:"image/png",childLayers:[{name:"npour_poi_culture__2"}]},{id:1883,name:"npour_poi_secours",metadata:{is_queryable:!0,metadata_id:"988f5449-959b-488b-acfe-bfb2eee23247"},dimensions:{},type:"WMS",layers:"npour_poi_secours",imageType:"image/png",childLayers:[{name:"npour_poi_secours__0"}]},{id:1884,name:"npour_poi_autres",metadata:{is_queryable:!0,metadata_id:"ed8ad1e0-d4ff-46ee-8c2b-91323f45786b"},dimensions:{},type:"WMS",layers:"npour_poi_autres",imageType:"image/png",childLayers:[{name:"npour_poi_autres__3"}]},{id:1878,name:"npour_poi_transport",metadata:{is_queryable:!0,metadata_id:"3821f8ee-0d90-47a0-b54f-02235af78fc2"},dimensions:{},type:"WMS",layers:"npour_poi_transport",imageType:"image/png",childLayers:[{name:"npour_poi_transport__4"}]},{id:1885,name:"npour_poi_sociale",metadata:{is_queryable:!0,metadata_id:"fa6c56a3-1bb6-4147-916b-956d0ce795e8"},dimensions:{},type:"WMS",layers:"npour_poi_sociale",imageType:"image/png",childLayers:[{name:"npour_poi_sociale__7"}]},{id:1886,name:"npour_poi_enseignement",metadata:{is_queryable:!0,metadata_id:"6b31dedb-5bd7-44f3-a34e-48871adae269"},dimensions:{},type:"WMS",layers:"npour_poi_enseignement",imageType:"image/png",childLayers:[{name:"npour_poi_enseignement__10"}]},{id:1887,name:"npour_poi_sante",metadata:{is_queryable:!0,metadata_id:"f6480b65-fd0e-441d-a5fe-fd240540b57b"},dimensions:{},type:"WMS",layers:"npour_poi_sante",imageType:"image/png",childLayers:[{name:"npour_poi_sante__8"}]},{id:1888,name:"npour_poi_attraction",metadata:{is_queryable:!0,metadata_id:"7e66c353-2a0d-4d58-a782-f2ec67371166"},dimensions:{},type:"WMS",layers:"npour_poi_attraction",imageType:"image/png",childLayers:[{name:"npour_poi_attraction__13"}]},{id:1889,name:"npour_poi_logement",metadata:{is_queryable:!0,metadata_id:"d9f9d25d-2c2e-41a8-84fb-ba6d941ddb05"},dimensions:{},type:"WMS",layers:"npour_poi_logement",imageType:"image/png",childLayers:[{name:"npour_poi_logement__9"}]},{id:1890,name:"npour_poi_gastronomie",metadata:{is_queryable:!0,metadata_id:"54de547d-f500-4985-9893-96f58f9b8bc1"},dimensions:{},type:"WMS",layers:"npour_poi_gastronomie",imageType:"image/png",childLayers:[{name:"npour_poi_gastronomie__1"}]},{id:1891,name:"npour_poi_sport",metadata:{is_queryable:!0,metadata_id:"43b24d55-7198-41f2-86d4-e6203d71ec09"},dimensions:{},type:"WMS",layers:"npour_poi_sport",imageType:"image/png",childLayers:[{name:"npour_poi_sport__6"}]},{id:1892,name:"npour_poi_tourisme",metadata:{is_queryable:!0,metadata_id:"c36ba1cd-0d28-491f-8d51-e268e420a8f9"},dimensions:{},type:"WMS",layers:"npour_poi_tourisme",imageType:"image/png",childLayers:[{name:"npour_poi_tourisme__5"}]},{id:1893,name:"npour_poi_commerce",metadata:{is_queryable:!0,metadata_id:"87c0fcc6-3452-47f7-9b23-0fd9c9f38189"},dimensions:{},type:"WMS",layers:"npour_poi_commerce",imageType:"image/png",childLayers:[{name:"npour_poi_commerce__11"}]}],metadata:{},mixed:!0},{id:684,name:"editus_pois_tourisme",children:[{id:542,name:"editus_poi_299",metadata:{is_queryable:!0,legend_name:"editus_1",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"542",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_299__POI"}]},{id:543,name:"editus_poi_286",metadata:{is_queryable:!0,legend_name:"editus_2",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"543",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_286__POI"}]},{id:544,name:"editus_poi_285",metadata:{is_queryable:!0,legend_name:"editus_3",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"544",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_285__POI"}]},{id:545,name:"editus_poi_287",metadata:{is_queryable:!0,legend_name:"editus_4",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"545",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_287__POI"}]},{id:546,name:"editus_poi_289",metadata:{is_queryable:!0,legend_name:"editus_5",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"546",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_289__POI"}]},{id:547,name:"editus_poi_290",metadata:{is_queryable:!0,legend_name:"editus_6",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"547",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_290__POI"}]},{id:549,name:"editus_poi_291",metadata:{is_queryable:!0,legend_name:"editus_7",metadata_id:"4a04ebff-4954-4c4d-9387-46d3587eccef",start_opacity:.9},dimensions:{},type:"WMS",layers:"549",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_291__POI"}]},{id:550,name:"editus_poi_292",metadata:{is_queryable:!0,legend_name:"editus_8",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"550",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_292__POI"}]},{id:551,name:"editus_poi_293",metadata:{is_queryable:!0,legend_name:"editus_9",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"551",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_293__POI"}]},{id:548,name:"editus_poi_294",metadata:{is_queryable:!0,legend_name:"editus_10",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"548",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_294__POI"}]},{id:552,name:"editus_poi_295",metadata:{is_queryable:!0,legend_name:"editus_11",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"552",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_295__POI"}]},{id:553,name:"editus_poi_296",metadata:{is_queryable:!0,legend_name:"editus_12",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"553",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_296__POI"}]},{id:554,name:"editus_poi_298",metadata:{is_queryable:!0,legend_name:"editus_13",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"554",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_298__POI"}]}],metadata:{},mixed:!0},{id:2018,name:"tour_erleben_new",children:[{id:2042,name:"tour_tourist_info_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_tourist_info_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_tourist_info_new__7"}]},{id:2030,name:"tour_essen_uebernachten_new",children:[{id:2038,name:"tour_hotels_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_hotels_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_hotels_new__2"}]},{id:2037,name:"tour_camping_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_camping_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_camping_new__11"}]},{id:2036,name:"tour_jugendherberge_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_jugendherberge_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_jugendherberge_new__12"}]},{id:2035,name:"tour_fewo_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_fewo_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_fewo_new__13"}]},{id:2034,name:"tour_bb_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_bb_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_bb_new__14"}]},{id:2033,name:"tour_restaurants_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_restaurants_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_restaurants_new__15"}]}],metadata:{},mixed:!0},{id:2031,name:"tour_kultur_new",children:[{id:2044,name:"tour_burgen_schloesser_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_burgen_schloesser_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_burgen_schloesser_new__16"}]},{id:2043,name:"tour_museen_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_museen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_museen_new__17"}]},{id:2027,name:"tour_unesco_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_unesco_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_unesco_new__category"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1866,name:"npour_wanderwege_group",children:[{id:1867,name:"npour_wanderwege_eigene_group",children:[{id:1895,name:"npour_wanderwege_eigene",metadata:{is_queryable:!0,metadata_id:"ef5983e1-a28f-4770-845a-8fcbd6f22fc0"},dimensions:{},type:"WMS",layers:"npour_wanderwege_eigene",imageType:"image/png",childLayers:[{name:"npour_wanderwege_eigene__15"}]}],metadata:{},mixed:!0},{id:304,name:"tour_quality",children:[{id:189,name:"tour_mullerthal_trail",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"be71ab82-8930-4da7-840d-a99374312093"},dimensions:{},type:"WMS",layers:"tour_mullerthal_trail",imageType:"image/png",style:"default",childLayers:[{name:"tour_mullerthal_trail__category"}]},{id:205,name:"tour_escape_ardenne",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"f01f9d77-cb2e-4189-89a9-df7eed16525b"},dimensions:{},type:"WMS",layers:"tour_escape_ardenne",imageType:"image/png",style:"default",childLayers:[{name:"tour_escape_ardenne__category"}]},{id:250,name:"tour_DeLux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"df101633-54fb-46bb-9d33-91d241c69ae2"},dimensions:{},type:"WMS",layers:"tour_DeLux",imageType:"image/png",style:"default",childLayers:[{name:"tour_DeLux__category"}]},{id:168,name:"tour_rando_traumschleifen_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"109f2940-b476-4bdd-96a8-7301fa3c7e39"},dimensions:{},type:"WMS",layers:"tour_rando_traumschleifen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_traumschleifen_new__category"}]}],metadata:{is_expanded:!0},mixed:!0},{id:1868,name:"npour_wanderwege_andere",children:[{id:176,name:"tour_autopedestre",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"1514749f-19e9-4873-9c70-68b34ebc2e30"},dimensions:{},type:"WMS",layers:"tour_autopedestre",imageType:"image/png",style:"default",childLayers:[{name:"tour_autopedestre__category"}]},{id:227,name:"tour_sentiers_nationaux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"05311fc8-28fa-470c-984e-879a410ce753"},dimensions:{},type:"WMS",layers:"tour_sentiers_nationaux",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_nationaux__category"}]},{id:158,name:"tour_cfl",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfa696a6-1c25-4ba5-bde1-beb140776881"},dimensions:{},type:"WMS",layers:"tour_cfl",imageType:"image/png",style:"default",childLayers:[{name:"tour_cfl__category"}]},{id:197,name:"tour_sentiers_ajl",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"c2587c18-ed11-44da-99dd-760a3fd73126"},dimensions:{},type:"WMS",layers:"tour_sentiers_ajl",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_ajl__category"}]},{id:235,name:"tour_sentiers_gr",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"004e728b-6e63-4ab7-9b65-f327eb2f7618"},dimensions:{},type:"WMS",layers:"tour_sentiers_gr",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_gr__category"}]},{id:218,name:"tour_saint_jacques",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"431c5622-7941-482b-a629-42bd1db17dfe"},dimensions:{},type:"WMS",layers:"tour_saint_jacques",imageType:"image/png",style:"default",childLayers:[{name:"tour_saint_jacques__category"}]},{id:316,name:"env_sentiersnature",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfc8de82-e187-4547-a1da-83385f86c786"},dimensions:{},type:"WMS",layers:"env_sentiersnature",imageType:"image/png",style:"default",childLayers:[{name:"env_sentiersnature__sentiers_nature"}]},{id:179,name:"tour_sentiers_locaux",children:[{id:177,name:"tour_sentiers_communaux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"4d39824a-6a5d-4020-bc88-a0bb3d3e28e6"},dimensions:{},type:"WMS",layers:"tour_sentiers_communaux",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_communaux__category"}]},{id:246,name:"tour_sentiers_syndicats",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"3e98c2a3-b991-4b11-b3cc-d18aaf6eac80"},dimensions:{},type:"WMS",layers:"tour_sentiers_syndicats",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_syndicats__category"}]}],metadata:{is_expanded:!0},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1869,name:"npour_radwege_group",children:[{id:281,name:"tour_velo_v2",children:[{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]},{id:512,name:"tour_pistes_velo_mymaps2",metadata:{is_queryable:!0,legend_name:"tour_velo_national",metadata_id:"e9fea021-2aab-4f58-a777-8c7536898d9b"},dimensions:{},type:"WMS",layers:"tour_pistes_velo_mymaps2",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_velo_mymaps2__category"}]},{id:809,name:"lvi_circuits_cyclables",metadata:{is_queryable:!0,metadata_id:"e5e9ddf6-dfdb-4d3b-a0e2-d1be2272bf38"},dimensions:{},type:"WMS",layers:"lvi_circuits_cyclables",imageType:"image/png",style:"default",childLayers:[{name:"lvi_circuits_cyclables__category"}]},{id:293,name:"tour_pistes_vtt",metadata:{is_queryable:!0,linked_layers:["2026"],metadata_id:"2ea699a2-dc3c-4bd6-92fc-f7325b0c7fee"},dimensions:{},type:"WMS",layers:"tour_pistes_vtt",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_vtt__category"}]},{id:676,name:"tour_velo_route",metadata:{is_queryable:!0,linked_layers:["1713","1714"],metadata_id:"2a07d7fb-ae3e-4385-bf61-b071a7f6ffbd"},dimensions:{},type:"WMS",layers:"tour_velo_route",imageType:"image/png",style:"default",childLayers:[{name:"tour_velo_route__category"}]},{id:1650,name:"unseco_biketour",metadata:{is_queryable:!0,metadata_id:"eda8222e-b76f-4016-8fea-87b27d0f622f"},dimensions:{},type:"WMS",layers:"unseco_biketour",imageType:"image/png",style:"default",childLayers:[{name:"unseco_biketour__category"}]},{id:725,name:"tour_tdl",metadata:{is_queryable:!0,metadata_id:"35226642-3f09-4f98-86b6-6e55316bce53"},dimensions:{},type:"WMS",layers:"tour_tdl",imageType:"image/png",style:"default",childLayers:[{name:"tour_tdl__category"}]},{id:1913,name:"tour_restrictions_velo",children:[{id:1713,name:"chantiers_actuels_pc",metadata:{is_queryable:!0,metadata_id:"7d59f3a6-e8d8-464b-bbf9-73c6ca358a51",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_actuels_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_actuels_pc__CHANTIERS_ACTUEL_PC"}]},{id:1714,name:"chantiers_futurs_pc",metadata:{is_queryable:!0,metadata_id:"f6b9df36-5e62-46d1-ae91-c7c58c7e2e45",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_futurs_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_futurs_pc__CHANTIERS_FUTUR_PC"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1870,name:"npour_infrastruktur",children:[{id:1871,name:"npour_verkehrsnetze",children:[{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:351,name:"roads_labels",metadata:{metadata_id:"5d606cae-cbc6-44c3-a465-edb981e44a39"},dimensions:{},type:"WMS",layers:"roads_labels",imageType:"image/png",style:"default",childLayers:[{name:"roads_labels__ROADS_LABELS"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:813,name:"cdt_lignes_all",metadata:{is_queryable:!0,metadata_id:"bbe0523f-374d-4c94-a27d-7ce81d8bae3b"},dimensions:{},type:"WMS",layers:"cdt_lignes_all",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_all__lignes_de_bus_detaillees"},{name:"cdt_lignes_all__lignes_de_bus_detaillees_mymaps"}]},{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:377,name:"mobiliteit_pr",metadata:{is_queryable:!0,legend_name:"mobiliteit:pr",max_dpi:128,metadata_id:"9e0c97ae-aff9-41fc-9489-bbf97999163d"},dimensions:{},type:"WMS",layers:"mobiliteit_pr",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_pr__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1924,name:"npour_umwelt",children:[{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:334,name:"env_zones_protegees_communautaires",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:180,name:"anf_secteurs_ecologiques_group",children:[{id:690,name:"anf_secteurs_ecologiques",metadata:{is_queryable:!0,metadata_id:"8afa4162-c23b-4001-b737-4074d4f5360f"},dimensions:{},type:"WMS",layers:"anf_secteurs_ecologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_secteurs_ecologiques__SECTEURS_ECOLOGIQUES"}]}],metadata:{},mixed:!0},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1872,name:"npour_agri",children:[{id:307,name:"asta",children:[{id:1637,name:"asta_flik_parcels",metadata:{is_queryable:!0,metadata_id:"f511a4ee-928a-4900-ac05-52aa0ce03bba"},dimensions:{},type:"WMS",layers:"asta_flik_parcels",imageType:"image/png",style:"default",childLayers:[{name:"asta_flik_parcels__3"}]},{id:1511,name:"asta_prairies_permanentes",metadata:{is_queryable:!0,metadata_id:"f6f493c2-f57b-419d-8953-ab8018576ac7"},dimensions:{},type:"WMS",layers:"asta_prairies_permanentes",imageType:"image/png",style:"default",childLayers:[{name:"asta_prairies_permanentes__0"}]},{id:740,name:"asta_herbages_sensibles",metadata:{metadata_id:"e5d2717e-4541-43f1-b586-1b18cdf11827"},dimensions:{},type:"WMS",layers:"asta_herbages_sensibles",imageType:"image/png",style:"default",childLayers:[{name:"asta_herbages_sensibles__gruenland"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1873,name:"npour_eau",children:[{id:1874,name:"npour_eau_surface",children:[{id:749,name:"eau_new_Gewsser",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewsser__23"},{name:"eau_new_Gewsser__24"},{name:"eau_new_Gewsser__25"}]},{id:651,name:"eau_new_Kanal_-__Muehlgraben",metadata:{is_queryable:!0,legend_name:"eau:kanal_-__muehlgraben",max_dpi:128,metadata_id:"909501fc-a0a9-4af8-8e82-f2a8d7f2fe2f"},dimensions:{},type:"WMS",layers:"eau_new_Kanal_-__Muehlgraben",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kanal_-__Muehlgraben__26"}]},{id:750,name:"eau_new_Kilometrierung der Gewsser",metadata:{legend_name:"eau:kilometrierung_primaere_gewaesser_kilometrierung_sekundaere_gewaesser",metadata_id:"4002b1cf-08b5-421a-bc92-40271d62f03c"},dimensions:{},type:"WMS",layers:"eau_new_Kilometrierung der Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kilometrierung der Gewsser__27"},{name:"eau_new_Kilometrierung der Gewsser__28"}]},{id:636,name:"eau_new_Einzugsgebiete",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.8156287",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb010cc765e17f1820811",is_queryable:!0,legend_name:"eau:einzugsgebiete",max_dpi:128,metadata_id:"a295a30a-f819-400c-842c-d0ccc695bea5"},dimensions:{},type:"WMS",layers:"eau_new_Einzugsgebiete",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einzugsgebiete__29"}]}],metadata:{},mixed:!0},{id:1875,name:"npour_eau_souterraine",children:[{id:628,name:"eau_new_Bohrungen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:16.7602644",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb039cc765e18ae5ed882",is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen__39"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]},{id:631,name:"eau_new_Grundwasserleiter",metadata:{geocatalog_open_data_last_update_date:"2024-06-03T01:02:35.1743465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecafe1cc765e18ae5ed87e",is_queryable:!0,legend_name:"eau:grundwasserleiter",max_dpi:128,metadata_id:"783a8608-e4b3-44ed-8864-68525da33760"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserleiter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserleiter__41"}]}],metadata:{},mixed:!0},{id:1876,name:"npour_eau_zps",children:[{id:214,name:"eau_new_Provisorische_ZPS",metadata:{geocatalog_open_data_last_update_date:"2024-10-03T01:04:17.082383",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece254111e9b03b03833c4",is_queryable:!0,legend_name:"eau:provisorische_zps",max_dpi:128,metadata_id:"ddc51f25-2fb7-4d14-866a-a08f8af8ef03"},dimensions:{},type:"WMS",layers:"eau_new_Provisorische_ZPS",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Provisorische_ZPS__130"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:1464,name:"eau_prgd_zones_protection_lac",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.5407176",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5b571c9546f3b55625dc355c",is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_prgd_zones_protection_lac__349"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]},{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]}],metadata:{},mixed:!0},{id:1877,name:"npour_eau_protection",children:[{id:643,name:"eau_new_Abwassersyndikate",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.7305149",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece2dd111e9b03b03833c5",is_queryable:!0,legend_name:"eau:abwassersyndikate",max_dpi:128,metadata_id:"4b5e384c-5603-4cf4-9bd5-6e520df5c375"},dimensions:{},type:"WMS",layers:"eau_new_Abwassersyndikate",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Abwassersyndikate__143"}]},{id:645,name:"eau_new_Klaeranlagen",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.116702",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece288cc765e1a25470f74",is_queryable:!0,legend_name:"eau:klaeranlagen",max_dpi:128,metadata_id:"53e55765-90eb-438f-a744-3ac878b06334"},dimensions:{},type:"WMS",layers:"eau_new_Klaeranlagen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Klaeranlagen__142"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:2177,name:"geosciences",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:2178,name:"geo_geologie_group",children:[{id:2167,name:"geo_carte_geol_harmonisee",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee",metadata_id:"542a0caa-4b33-4019-8ce7-b8541b436106"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee__6"},{name:"geo_carte_geol_harmonisee__1"},{name:"geo_carte_geol_harmonisee__2"},{name:"geo_carte_geol_harmonisee__3"}]},{id:2168,name:"geo_carte_geol_harmonisee_decouverte",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee_decouverte",metadata_id:"d03be720-e33c-4bd4-8829-559dc951dc2d"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee_decouverte",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee_decouverte__5"},{name:"geo_carte_geol_harmonisee_decouverte__1"},{name:"geo_carte_geol_harmonisee_decouverte__2"},{name:"geo_carte_geol_harmonisee_decouverte__3"}]},{id:2185,name:"geo_carte_detail_25k",metadata:{is_queryable:!0,legend_name:"geol:geo25k_ned",metadata_id:"f8e6c6ca-948a-404e-9d15-54d9a423627b"},dimensions:{},type:"WMS",layers:"geo_carte_detail_25k",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_detail_25k__0"}]},{id:2186,name:"geo_carte_generale_100k",metadata:{is_queryable:!0,legend_name:"geol:geologie_generale",metadata_id:"61b929b6-7964-449d-bc3e-87483a7997f5"},dimensions:{},type:"WMS",layers:"geo_carte_generale_100k",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_generale_100k__0"}]},{id:2169,name:"geo_carte_geol_simplifiee",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee",metadata_id:"d5235bf1-96c8-4fc8-8d6d-2a0cde246aad"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee__2"},{name:"geo_carte_geol_simplifiee__1"},{name:"geo_carte_geol_simplifiee__0"}]},{id:2170,name:"geo_carte_geol_simplifiee_decouverte",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee_decouverte",metadata_id:"d8d627ee-ec11-4054-8a05-f4cd98adbd72"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee_decouverte",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee_decouverte__0"},{name:"geo_carte_geol_simplifiee_decouverte__2"}]},{id:2199,name:"geo_cartes_geologiques_historiques",children:[{id:2202,name:"geo_geologie_wies_siegen",metadata:{is_queryable:!0,legend_name:"geol:geologie_wies_siegen",metadata_id:"f595fd68-0036-433f-ae93-2bbace506f0a"},dimensions:{},type:"WMS",layers:"geo_geologie_wies_siegen",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_wies_siegen__0"}]},{id:2203,name:"geo_geologie_van_werweke",metadata:{is_queryable:!0,legend_name:"geol:geologie_van_werweke",metadata_id:"5156b574-f67c-4bee-b349-e769581fe079"},dimensions:{},type:"WMS",layers:"geo_geologie_van_werweke",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_van_werweke__1"}]},{id:2204,name:"geo_geologie_lucius",metadata:{is_queryable:!0,legend_name:"geol:geologie_lucius",metadata_id:"34e148cb-7d47-455a-8d5f-0f2623ab6a4e"},dimensions:{},type:"WMS",layers:"geo_geologie_lucius",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_lucius__3"}]},{id:2205,name:"geo_geologie_robert",metadata:{is_queryable:!0,legend_name:"geol:geologie_robert",metadata_id:"a299b930-a36c-4709-8712-b52cfd7c9fa1"},dimensions:{},type:"WMS",layers:"geo_geologie_robert",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_robert__2"}]},{id:2206,name:"geo_geologie_detail_anc_edition",metadata:{is_queryable:!0,legend_name:"geol:geo25_50k_aed",metadata_id:"a3342917-2a84-48ee-bf20-668810bb4c80"},dimensions:{},type:"WMS",layers:"geo_geologie_detail_anc_edition",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_detail_anc_edition__12"}]}],metadata:{},mixed:!0},{id:2173,name:"geo_coupes_geologiques",metadata:{is_queryable:!0,legend_name:"geol:coupes_geologiques",metadata_id:"8a35490a-8dc8-4dfd-9136-edfdd6d08281"},dimensions:{},type:"WMS",layers:"geo_coupes_geologiques",imageType:"image/png",style:"default",childLayers:[{name:"geo_coupes_geologiques__0"}]},{id:2175,name:"geo_epaisseurs_unites",metadata:{is_queryable:!0,legend_name:"geol:epaisseurs_unites",metadata_id:"3fab8010-2f8b-43e2-96a7-155a24233db4"},dimensions:{},type:"WMS",layers:"geo_epaisseurs_unites",imageType:"image/png",style:"default",childLayers:[{name:"geo_epaisseurs_unites__0"}]},{id:2201,name:"geo_forages_group",children:[{id:2176,name:"geo_forages_ref",metadata:{is_queryable:!0,legend_name:"geol:forages_ref",metadata_id:"0564eda7-c92d-4a80-b3c7-be94f5d67186"},dimensions:{},type:"WMS",layers:"geo_forages_ref",imageType:"image/png",style:"default",childLayers:[{name:"geo_forages_ref__0"}]},{id:628,name:"eau_new_Bohrungen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:16.7602644",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb039cc765e18ae5ed882",is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen__39"}]},{id:2791,name:"pch_sgl_demande_forage_virtuel",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee",linked_layers:["2847"],metadata_id:"4858f69e-4ce5-4d49-984f-fecb1d8b61ac",return_clicked_point:"true"},dimensions:{},type:"WMS",layers:"pch_sgl_demande_forage_virtuel",imageType:"image/png",style:"default",childLayers:[{name:"pch_sgl_demande_forage_virtuel__6"},{name:"pch_sgl_demande_forage_virtuel__1"},{name:"pch_sgl_demande_forage_virtuel__2"},{name:"pch_sgl_demande_forage_virtuel__3"}]},{id:2847,name:"pch_sgl_demande_forage_virtuel_masque",metadata:{metadata_id:"b1f69cb4-30ad-4856-926c-0fc28bb331ca"},dimensions:{},type:"WMS",layers:"pch_sgl_demande_forage_virtuel_masque",imageType:"image/png",style:"default",childLayers:[{name:"pch_sgl_demande_forage_virtuel_masque__0"}]}],metadata:{},mixed:!0},{id:2200,name:"geo_eaux_souterraines",children:[{id:631,name:"eau_new_Grundwasserleiter",metadata:{geocatalog_open_data_last_update_date:"2024-06-03T01:02:35.1743465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecafe1cc765e18ae5ed87e",is_queryable:!0,legend_name:"eau:grundwasserleiter",max_dpi:128,metadata_id:"783a8608-e4b3-44ed-8864-68525da33760"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserleiter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserleiter__41"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]}],metadata:{},mixed:!0},{id:2191,name:"geo_geomorphologie_carte100K",metadata:{is_queryable:!0,legend_name:"geol:geomorphologie100k",metadata_id:"3fd5088b-021d-4207-9d4b-4040e1ccfe22"},dimensions:{},type:"WMS",layers:"geo_geomorphologie_carte100K",imageType:"image/png",style:"default",childLayers:[{name:"geo_geomorphologie_carte100K__0"}]}],metadata:{},mixed:!0},{id:2182,name:"geo_geophysique_group",children:[{id:2192,name:"geo_geophysique_comptage_uranium",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_uranium",metadata_id:"6b9443de-b85c-4360-9c3b-b937c5804303"},dimensions:{},type:"WMS",layers:"geo_geophysique_comptage_uranium",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_comptage_uranium__0"}]},{id:2193,name:"geo_geophysique_comptage_thorium",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_thorium",metadata_id:"335aec3a-52e5-49c4-8325-cd57b0751b47"},dimensions:{},type:"WMS",layers:"geo_geophysique_comptage_thorium",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_comptage_thorium__1"}]},{id:2194,name:"geo_geophysique_comptage_potassium",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_potassium",metadata_id:"39b205a1-2a16-44fe-9a16-c6e1fdd60084"},dimensions:{},type:"WMS",layers:"geo_geophysique_comptage_potassium",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_comptage_potassium__2"}]},{id:2195,name:"geo_geophysique_synthese_uthk",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_uthk",metadata_id:"bcbbc55a-e6b7-4b5a-ac62-dc5ce8b0825a"},dimensions:{},type:"WMS",layers:"geo_geophysique_synthese_uthk",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_synthese_uthk__3"}]},{id:2196,name:"geo_geophysique_champ_vlf",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_vlf",metadata_id:"ce816301-b6eb-480a-a891-6d394b635ff7"},dimensions:{},type:"WMS",layers:"geo_geophysique_champ_vlf",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_champ_vlf__4"}]},{id:2197,name:"geo_geophysique_champ_total",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_total_residuel",metadata_id:"efcea741-1392-4c97-8233-3d31b64eb82a"},dimensions:{},type:"WMS",layers:"geo_geophysique_champ_total",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_champ_total__5"}]},{id:2198,name:"geo_geophysique_champ_total_reduit_pole",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_total_residuel_reduit_pole",metadata_id:"b1b387a3-96d2-4a4b-9a1f-0add1712840c"},dimensions:{},type:"WMS",layers:"geo_geophysique_champ_total_reduit_pole",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_champ_total_reduit_pole__6"}]}],metadata:{},mixed:!0},{id:321,name:"pedologie",children:[{id:272,name:"pedologie_100k",metadata:{legend_name:"pedologie",metadata_id:"2d712a34-ce79-426d-a57b-b7cadf97b80f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"pedologie_100k",imageType:"image/png"},{id:702,name:"asta_pedologie_new",metadata:{legend_name:"pedologie_new",max_dpi:128,metadata_id:"37686d89-0173-4040-88c7-be84a3648d01"},dimensions:{},type:"WMS",layers:"asta_pedologie_new",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_new__9"},{name:"asta_pedologie_new__10"},{name:"asta_pedologie_new__11"},{name:"asta_pedologie_new__12"},{name:"asta_pedologie_new__13"},{name:"asta_pedologie_new__14"},{name:"asta_pedologie_new__15"}]},{id:704,name:"asta_pedologie_humus",metadata:{legend_name:"asta_corg",max_dpi:128,metadata_id:"a1b0807c-9bff-4f6a-a5e7-130316742f56"},dimensions:{},type:"WMS",layers:"asta_pedologie_humus",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_humus__0"}]},{id:703,name:"asta_pedologie_ph",metadata:{legend_name:"asta_ph",max_dpi:128,metadata_id:"628ee73f-4c37-4689-bc4c-1fd9f6bd2663"},dimensions:{},type:"WMS",layers:"asta_pedologie_ph",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_ph__0"}]},{id:2408,name:"asta_erosion_group",children:[{id:2760,name:"asta_rigoles_erosion_enquete",metadata:{is_queryable:!0,metadata_id:"00c1398d-604f-4e1b-9abd-af05261d80ba"},dimensions:{},type:"WMS",layers:"asta_rigoles_erosion_enquete",imageType:"image/png",childLayers:[{name:"asta_rigoles_erosion_enquete__2"}]},{id:2407,name:"asta_erosion_2023",metadata:{is_queryable:!0,metadata_id:"427aff9b-b988-455c-8cd9-1c029cfd6b6e",start_opacity:.25},dimensions:{},type:"WMS",layers:"asta_erosion_2023",imageType:"image/png",childLayers:[{name:"asta_erosion_2023__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2183,name:"geo_relief_group",children:[{id:1460,name:"wg_relief_map",metadata:{metadata_id:"7d195815-23c2-4963-863c-60e3a39ab8af"},dimensions:{},type:"WMS",layers:"wg_relief_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_relief_map__0"}]},{id:1461,name:"wg_hangneigung_map",metadata:{legend_name:"wg:hangneigung",metadata_id:"6ffa94a4-af02-43ec-82e0-6796cd01a948"},dimensions:{},type:"WMS",layers:"wg_hangneigung_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_hangneigung_map__0"}]},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"}],metadata:{},mixed:!0},{id:2184,name:"geo_decouverte_group",children:[{id:2021,name:"tour_rando_natur_geologie_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"4f360781-3708-416a-a6d5-8944a4864737"},dimensions:{},type:"WMS",layers:"tour_rando_natur_geologie_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_natur_geologie_new__category"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:2332,name:"3D Layers",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:1958,name:"3d Layers",children:[{id:2346,name:"ACT2022_BD_L_BATI3D_LOD2",metadata:{exclusion:'["mesh_2020_vs_bd-l-bati-3d"]',metadata_id:"2e8b722a-87ea-4b62-a307-423832adabab",ol3d_defaultlayer:!0,ol3d_options:{cesium3DTileStyle:{show:"! ( ${id} === '00855_00750-000001'||${id} === '00850_00755-000001_1on9'||${id} === '00850_00755-000001_2on9'||${id} === '00850_00755-000001_3on9'||${id} === '00850_00755-000001_4on9'||${id} === '00850_00755-000001_5on9'||${id} === '00850_00755-000001_6on9'||${id} === '00850_00755-000001_7on9'||${id} === '00850_00755-000001_8on9'||${id} === '00850_00755-000001_9on9'||${id} === '00850_00750-000001'||${id} === '00635_00675-000004_1on8'||${id} === '00635_00675-000004_2on8'||${id} === '00635_00675-000004_3on8'||${id} === '00635_00675-000004_4on8'||${id} === '00635_00675-000004_5on8'||${id} === '00635_00675-000004_6on8'||${id} === '00635_00675-000004_7on8'||${id} === '00635_00675-000004_8on8'||${id} === '00635_00675-000005_1on5'||${id} === '00635_00675-000005_2on5'||${id} === '00635_00675-000005_3on5'||${id} === '00635_00675-000005_4on5'||${id} === '00635_00675-000005_5on5'||${id} === '00635_00675-000002_1on2'||${id} === '00635_00675-000002_2on2'||${id} === '00635_00675-000003_1on2'||${id} === '00635_00675-000003_2on2'||${id} === '01020_00905-000023_1on9'||${id} === '01020_00905-000023_2on9'||${id} === '01020_00905-000023_3on9'||${id} === '01020_00905-000023_4on9'||${id} === '01020_00905-000023_5on9'||${id} === '01020_00905-000023_6on9'||${id} === '01020_00905-000023_7on9'||${id} === '01020_00905-000023_8on9'||${id} === '01020_00905-000023_9on9' )"}}},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"ACT2022_BD_L_BATI3D_LOD2",imageType:"image/png"},{id:2348,name:"VDL2022_LOD2_IMPORT",metadata:{exclusion:'["mesh_2020_vs_bd-l-bati-3d_vdl"]',metadata_id:"a116f21e-faf1-4bdd-9a29-064fd9a30b8d",ol3d_defaultlayer:!0},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"VDL2022_LOD2_IMPORT_old",imageType:"image/png"},{id:2350,name:"VDL2022_BRIDGES_IMPORT",metadata:{exclusion:'["mesh_2020_vs_bridges_vdl"]',metadata_id:"95c91657-5d7b-4b1f-bc74-de0e2db0f5c7",ol3d_defaultlayer:!0},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"Bridges_LOD2",imageType:"image/png"},{id:2397,name:"ACT2019_LiDAR_Bridges",metadata:{exclusion:'["mesh_2020_vs_bridges_ACT"]',metadata_id:"0690e5cb-50df-4cf8-8cf3-d12dbecfc171",ol3d_defaultlayer:!0},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"ACT2019_LiDAR_Bridges_LOD1",imageType:"image/png"},{id:2384,name:"ACT2019_LiDAR_Vegetation",metadata:{exclusion:'["mesh_2020_vs_trees"]',metadata_id:"99180a32-bf64-46c2-b901-ce055b0f01fe",ol3d_defaultlayer:!0},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"ACT2019_LiDAR_Vegetation",imageType:"image/png"},{id:2538,name:"ACT2019_LiDAR_Powerlines",metadata:{},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"ACT2019_LiDAR_Powerlines",imageType:"image/png"}],metadata:{display_in_switcher:!0,is_expanded:!0},mixed:!0},{id:2447,name:"reference_objects_3d",children:[{id:2446,name:"OBJ3D_sharedBikes",metadata:{},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles/OBJECTS3D",layer:"SharedBikes",imageType:"image/png"}],metadata:{},mixed:!0}],functionalities:{},metadata:{ol3d_type:"data"}},{id:2576,name:"anf_expo",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:2577,name:"anf_expo_einleitung",children:[{id:2601,name:"anf_overlay_expo_biosphere",metadata:{is_queryable:!0,start_opacity:.7},dimensions:{},type:"WMS",layers:"anf_overlay_expo_ort",imageType:"image/png",style:"default",childLayers:[{name:"anf_overlay_expo_biosphere__2"},{name:"anf_overlay_expo_biosphere__3"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]}],metadata:{},mixed:!0},{id:2578,name:"anf_expo_biodiversitaet",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:2482,name:"anf_corridors_faune_sauvage",metadata:{metadata_id:"58a2c50b-0f4e-4d9c-95ff-5851eebf6e58"},dimensions:{},type:"WMS",layers:"anf_corridors_faune_sauvage",imageType:"image/png",style:"default",childLayers:[{name:"anf_corridors_faune_sauvage__corridors_ecologiques"}]},{id:1822,name:"anf_projets_compensation_approuves",metadata:{is_queryable:!0,metadata_id:"03aafc0c-c443-42ea-963a-8538a3f089d4"},dimensions:{},type:"WMS",layers:"anf_projets_compensation_approuves",imageType:"image/png",style:"default",childLayers:[{name:"anf_projets_compensation_approuves__ZONES_COMPENSATION_APPROUVEES"}]}],metadata:{},mixed:!0},{id:2580,name:"anf_expo_landwirtschaft",children:[{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]}],metadata:{},mixed:!0},{id:2582,name:"anf_expo_wasser",children:[{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:567,name:"eau_new_Trinkwasserentnahmepunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.3958552",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb044cc765e17f1820812",is_queryable:!0,legend_name:"eau:trinkwasserentnahmepunkte",max_dpi:128,metadata_id:"a049086b-9c17-4ba6-b9bf-78cb4af8ee68"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwasserentnahmepunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwasserentnahmepunkte__47"}]},{id:749,name:"eau_new_Gewsser",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewsser__23"},{name:"eau_new_Gewsser__24"},{name:"eau_new_Gewsser__25"}]},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2581,name:"anf_expo_stadt",children:[{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]},{id:1813,name:"myenergy_solarkataster_luxemburg_solar_potentials",metadata:{is_queryable:!0,legend_name:"energie:potentiel_solaire",metadata_id:"97628fac-c53b-4426-a829-b188105b9ead",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857",ogc_query_layers:["st_luxemburg_22_feature_info"]},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_solar_potentials",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_solar_potentials__st_luxemburg_22_solar_potentials"}]}],metadata:{},mixed:!0},{id:2579,name:"anf_expo_wald",children:[{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{}},{id:2742,name:"school",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:2753,name:"school_basisdaten",children:[{id:2754,name:"school_verwaltungseinheiten",children:[{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]}],metadata:{},mixed:!0},{id:2755,name:"school_adressen",children:[{id:165,name:"adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2757,name:"school_topo_karten",children:[{id:734,name:"utm_grid",metadata:{max_dpi:128,metadata_id:"84f59e51-2772-4b6d-8c5b-3ec19aa7d8f2"},dimensions:{},type:"WMS",layers:"utm_grid",imageType:"image/png",style:"default",childLayers:[{name:"utm_grid__2"},{name:"utm_grid__3"}]},{id:738,name:"luref_graticules",metadata:{max_dpi:128,metadata_id:"0d1a431c-36b0-406f-8cfd-d264d4949bf0"},dimensions:{},type:"WMS",layers:"luref_graticules",imageType:"image/png",style:"default",childLayers:[{name:"luref_graticules__0"},{name:"luref_graticules__1"}]}],metadata:{},mixed:!0},{id:2756,name:"school_luftbilder",children:[{id:2537,name:"ortho_2022",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"63f18835-55ac-448c-a0ea-dc998933077b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2022",imageType:"image/jpeg"},{id:2272,name:"ortho_2021",metadata:{exclusion:"[121,221]",metadata_id:"ea0bd2ff-b743-4f3a-bd9b-450976563de9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2021",imageType:"image/jpeg"},{id:2056,name:"ortho_2020",metadata:{exclusion:"[119,219]",metadata_id:"87870b8a-10a1-4c33-bf50-7efe851fd450"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2020",imageType:"image/jpeg"},{id:1784,name:"ortho_2019",metadata:{exclusion:"[116,216]",metadata_id:"97c88ef6-6c64-4cb0-a134-06bb42b2b448"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019",imageType:"image/jpeg"},{id:1527,name:"ortho_2018",metadata:{exclusion:"[113,213]",metadata_id:"6fde72c4-802f-4663-be74-5fa5901cb4f0"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2018",imageType:"image/jpeg"},{id:1371,name:"ortho_2017",metadata:{exclusion:"[111,211]",metadata_id:"1cdae616-1a7a-49d5-b35d-05864891641f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017",imageType:"image/jpeg"},{id:745,name:"ortho_2016",metadata:{exclusion:"[107,207]",metadata_id:"bba79b6d-4205-4ce4-98e4-7b7922afcd55"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016",imageType:"image/jpeg"},{id:360,name:"ortho_2013",metadata:{exclusion:"[106,206]",metadata_id:"ced4a3dd-135e-43d0-86b9-2318982581f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013",imageType:"image/jpeg"},{id:342,name:"ortho_2010",metadata:{exclusion:"[105,205]",metadata_id:"0faf4bdb-a54b-42d7-942c-4e52fa66e963"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010",imageType:"image/jpeg"},{id:231,name:"ortho_2007",metadata:{exclusion:"[101,201]",metadata_id:"3be3d98e-7997-4ff6-8d77-e393a5fc4fdd"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2007",imageType:"image/jpeg"},{id:224,name:"ortho_2004",metadata:{exclusion:"[103,203]",metadata_id:"a185f78a-ca9c-43f8-8d06-b1abba8ff056"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2004",imageType:"image/jpeg"},{id:225,name:"ortho_2001",metadata:{exclusion:"[104,204]",metadata_id:"e6ff269c-1c7c-401f-a90b-b805e80a046e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2001",imageType:"image/jpeg"},{id:2592,name:"act_ortho_time",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"1adb95b0-d0a5-4afa-936a-c9faa9edba2c",time_config:'{"default_time":"2023-08","time_links":{"2001-08":"ortho_2001","2004-08":"ortho_2004","2007-08":"ortho_2007","2010-08":"ortho_2010","2013-08":"ortho_2013","2016-08":"ortho_2016","2017-08":"ortho_2017","2018-08":"ortho_2018","2019-01":"ortho_2019_winter","2019-08":"ortho_2019","2020-08":"ortho_2020","2021-08":"ortho_2021","2022-08":"ortho_2022","2023-08":"ortho_2023"}}',time_layers:{"2001-08-01T00:00:00Z":"ortho_2001","2004-08-01T00:00:00Z":"ortho_2004","2007-08-01T00:00:00Z":"ortho_2007","2010-08-01T00:00:00Z":"ortho_2010","2013-08-01T00:00:00Z":"ortho_2013","2016-08-01T00:00:00Z":"ortho_2016","2017-08-01T00:00:00Z":"ortho_2017","2018-08-01T00:00:00Z":"ortho_2018","2019-01-01T00:00:00Z":"ortho_2019_winter","2019-08-01T00:00:00Z":"ortho_2019","2020-08-01T00:00:00Z":"ortho_2020","2021-08-01T00:00:00Z":"ortho_2021","2022-08-01T00:00:00Z":"ortho_2022","2023-08-01T00:00:00Z":"ortho_2023"}},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"act_ortho_time",imageType:"image/jpeg",time:{minValue:"2001-08-01T00:00:00Z",maxValue:"2023-08-01T00:00:00Z",values:["2001-08-01T00:00:00Z","2004-08-01T00:00:00Z","2007-08-01T00:00:00Z","2010-08-01T00:00:00Z","2013-08-01T00:00:00Z","2016-08-01T00:00:00Z","2017-08-01T00:00:00Z","2018-08-01T00:00:00Z","2019-01-01T00:00:00Z","2019-08-01T00:00:00Z","2020-08-01T00:00:00Z","2021-08-01T00:00:00Z","2022-08-01T00:00:00Z","2023-08-01T00:00:00Z"],resolution:"month",minDefValue:"2023-08-01T00:00:00Z",maxDefValue:null,mode:"value",widget:"slider"}}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2747,name:"school_themen",children:[{id:2743,name:"school_thema_gesteinskreislauf",children:[{id:2169,name:"geo_carte_geol_simplifiee",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee",metadata_id:"d5235bf1-96c8-4fc8-8d6d-2a0cde246aad"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee__2"},{name:"geo_carte_geol_simplifiee__1"},{name:"geo_carte_geol_simplifiee__0"}]},{id:2173,name:"geo_coupes_geologiques",metadata:{is_queryable:!0,legend_name:"geol:coupes_geologiques",metadata_id:"8a35490a-8dc8-4dfd-9136-edfdd6d08281"},dimensions:{},type:"WMS",layers:"geo_coupes_geologiques",imageType:"image/png",style:"default",childLayers:[{name:"geo_coupes_geologiques__0"}]},{id:2176,name:"geo_forages_ref",metadata:{is_queryable:!0,legend_name:"geol:forages_ref",metadata_id:"0564eda7-c92d-4a80-b3c7-be94f5d67186"},dimensions:{},type:"WMS",layers:"geo_forages_ref",imageType:"image/png",style:"default",childLayers:[{name:"geo_forages_ref__0"}]},{id:2021,name:"tour_rando_natur_geologie_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"4f360781-3708-416a-a6d5-8944a4864737"},dimensions:{},type:"WMS",layers:"tour_rando_natur_geologie_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_natur_geologie_new__category"}]}],metadata:{},mixed:!0},{id:2744,name:"school_thema_fluesse",children:[{id:749,name:"eau_new_Gewsser",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewsser__23"},{name:"eau_new_Gewsser__24"},{name:"eau_new_Gewsser__25"}]},{id:655,name:"eau_new_Wasserstand",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:12.0164112",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"59c220a4111e9b1de61d8864",is_queryable:!0,legend_name:"eau:wasserstand",max_dpi:128,metadata_id:"124abb10-1d87-4449-912b-06fbf307a95f"},dimensions:{},type:"WMS",layers:"eau_new_Wasserstand",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Wasserstand__2"}]}],metadata:{},mixed:!0},{id:2745,name:"school_thema_ueberschwemmungen",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2045,name:"age_dangers_fortes",metadata:{legend_name:"age_dangers_fortes",metadata_id:"55dbe91c-f1e5-4c56-b0b9-4590988e23e5"},dimensions:{},type:"WMS",layers:"age_dangers_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_dangers_fortes__0"},{name:"age_dangers_fortes__1"}]},{id:758,name:"eau_new_Manahmens des Hochwasserrisikomanagementplans",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:03:13.4638796",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"66e4e0d15a1785364d6db3fb",is_queryable:!0,legend_name:"eau:massnahmens_des_hochwasserrisikomanagementplans",metadata_id:"4326fea6-7ec4-4bb9-861f-4476b0d4ceac"},dimensions:{},type:"WMS",layers:"eau_new_Manahmens des Hochwasserrisikomanagementplans",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Manahmens des Hochwasserrisikomanagementplans__314"}]},{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]}],metadata:{},mixed:!0},{id:2746,name:"school_thema_minette",children:[{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{}}],background_layers:[{id:556,name:"basemap_2015_global",metadata:{attribution:`&copy; <a href='https://www.maptiler.com/copyright/'>MapTiler</a> &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors for data outside of Luxembourg`,exclusion:"[31, 32]",legend_name:"act:roadmap_vt",metadata_id:"a1fea2a0-e0a0-4e5f-a61d-9b3c3a9426bd"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"basemap_2015_global",imageType:"image/png"},{id:502,name:"topo_bw_jpeg",metadata:{attribution:`&copy; <a href='https://www.maptiler.com/copyright/'>MapTiler</a> &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors for data outside of Luxembourg`,exclusion:"[35, 45]",legend_name:"act_topovt_bw",metadata_id:"b786acc2-b87e-4c7a-aff7-52778357243b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_bw_jpeg",imageType:"image/jpeg"},{id:529,name:"topogr_global",metadata:{attribution:`&copy; <a href='https://www.maptiler.com/copyright/'>MapTiler</a> &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors for data outside of Luxembourg`,exclusion:"[36, 46]",legend_name:"act_topovt",metadata_id:"b786acc2-b87e-4c7a-aff7-52778357243b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topogr_global",imageType:"image/png"},{id:530,name:"orthogr_2013_global",metadata:{exclusion:"[21, 22]",hasRetina:!1,metadata_id:"554cb3f9-a6e7-4e0e-8d62-0853dfd33c32"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"orthogr_2013_global",imageType:"image/jpeg"},{id:501,name:"streets_jpeg",metadata:{exclusion:"[11, 12]",hasRetina:!1,metadata_id:"c427b194-53ba-418d-9b4a-226a8cbfd568"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"streets_jpeg",imageType:"image/png"}],errors:[],lux_3d:{terrain_url:"https://acts3.geoportail.lu/3d-data/3d-tiles/terrain3D/lidar_2019_terrain/3DTiles"}}),WQ="main",OQ="root_3d",FQ=-222,Bn=Ao("config",()=>{const a=Ai(),e=Ye(WQ),t=St(()=>a.value?.themes),i=St(()=>t.value?.find(d=>d.name===e.value)),n=St(()=>a.value?.background_layers||[]),s=St(()=>{const d=t.value?.filter(h=>h.metadata?.ol3d_type!==void 0);if(d)return{name:OQ,id:FQ,children:d.flatMap(h=>h?.children?h.children:h),metadata:{}}});function r(d){a.value=d}function l(d){e.value=decodeURIComponent(d)}async function u(){const h="https://migration.geoportail.lu/".replace(/\/$/,""),g=Date.now(),y=h?`${h}/themes?interface=main&background=background&cache_version=${g}`:`/themes?interface=main&background=background&cache_version=${g}`;try{const x=await fetch(y,{credentials:"include"});if(!x.ok)throw new Error(`Failed to fetch themes: ${x.status}`);const C=await x.json();if(!Array.isArray(C?.themes)||C.themes.length===0){r(T9());return}r(C)}catch{r(T9())}}return{config:a,themes:t,themeName:e,theme:i,bgLayers:n,layerTrees_3d:s,setTheme:l,setThemes:r,loadThemes:u}},{}),BG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM0AAAAoCAMAAABq645qAAACPVBMVEUAAABaW13////tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy5DjxTaAAAAvXRSTlMAAAABAgMEBQYHCAkKCwwNDg8QERESFBUWFxkaGx0eHyAhIiInKSosMTIzNTY5Ojs8PUFCQ0RERkpMTk9QU1RVVldaXmFjZWZmamtwcXJzdXd3eHl7fX+AgYKDhIaHiIiKi4yOj5CTlJWWl5iZmZqcnZ+goaKjpKanqKqqq6ywsbK0tbW4u7u8vb6/wMHExcbHysvMzM7P0NDS1NXa29zd3t/g4eTl5ujp6uvs7e7u8PLz9PX29/j5+vv8/f5cALqzAAAEcklEQVRo3u3Z+ZPUVBAH8O63LsLKijoIgotHFI+HgiKNeGC8MCqgUUFAJYjgAQ6HKMgGEQQiqChIPFh1iciiwPIEhvv49t/mD5lBORa2tHbLTO2rmqnUTCrJZ3r65ZuEjDHGGLrMWGcKMah7mh/7NP8PzXBqbqgfzdtPb7i/fjQPvq8r5jUVXNNIY4moYeL6+XNfn9Ov6LUZ2/Z7Pxo3YaZWTp/uLPw/reXYbqLRPz/38g+qJ/oTEV396IzmgmquXHZoIRHd/sTs31T1DqIBcyqHZjQWtTbf6nQiokHLVVWn7ju4euXGjsX9LtTAGgPAGGMzOPZSOGFYtmAXsO8skFkgZovQgi2QcZKyIGAAjJQtIgAB/5vRTc2IvbqSqOWNJQdUVdfe+/zitmsu2jeQ/GWMC43HacRhxhAWcJRyEgmYBSVYgROwgJkzeGVEDGEGotqnPaih1Xp63KSvVFVVtz0wt23AvMVda5AZY2FM7OWO/N2DwBMgESBiQZyABUgYSYQkYSBjhAh7QXN3Zfey7YdyzXh6aQpdu2fIpWsD30CykKOU4XPgmBPEnNcmC1jgIT9uCx9ZkOW1kQi9oBm6aMvO3KIVomUPES19/KIaoNo34uA8cUgtB4DzmQXCFoCFhbXgMtgC8DNGKMj7xnIKtj2toeGf55X5c9+ZRpo1lWjyq5c/33Avj+5obpz25miiwd+p6q4/2jfvIrqtrYlemF5MzZObTuhHCw6cUd2y/91ftj5DRJOn0JKniqm56jPtUNXDx44u6NywvaPzPqL+G5v3jCimhhqaX/vyi6VTxtzyYkVV9dSsRvrmnVXUI5oo7GkNEV2RH/igaRVV1Y8fOdE+tEc0tlzqBU1tND+7U1W18t51F8/QAFJrkUccL4VjABFb+MwoMyznszWzBZxfDT2SIbZgm0/TzBbIpLqcr8GwScJxfF4UiliAgGEZ1gKx8VK4bmuafmpdrqr6cFdXBJBSORPkp9A0ZI8hAi4jYQY8CEN8MDML2K/FBBdwKU80kOp3eSBirq7BkJJLstK5UShw+eYhDBGUYNPQeN3WTND2rd+r6oquNUZQ00A49gCEJQg8RhJD8j0DQX6IEBZYMLMAAANZrpHa8lkNBwjOi0Ion90KRIDIQEzsdVfzlurhT1X11F2XqE3qwfNQMiYLGYIYNgAQMcTltXHV3z9w1dAD/8LapH/XJt9eycWudG4U8lGrjYeSIAtMFlaD1SU1NxAR0cA9qrpqr6ruaOmybxLPREBojLEOzoMNkAXsO4YNYRnIpNo3WS30+EByXt+kttY3AEdAyGmZ4/TcKORCDgDhEAg5D0wO7vK1mbmwhajxA9XWkXTTh8dVj6wZX9gr6ZFL9eTm1nbVhUREdOs2Vb25sJqmRTuOq+r+rwfmgGEHVYcU+H7a8KNrdP6kYTXBJ6qPFVjT2DxwzD/msbWqE+vnrvqvevSeutGMUm0dXC+ahk3asb5unt+8cvLIqOvr52nU7Dv7nq31afo0/0mzrhiavwAx1n2SsZnMdgAAAABJRU5ErkJggg==",NQ="fr",BQ=!0,DQ=!1,VQ=!1,ZQ=!1,zQ=!1,UQ=!1,HQ=!1,XQ=!1,qQ=!1,YQ=!1,KQ=!1,jQ=!1,ri=Ao("app",()=>{const a=Ye(!1),e=Ye(!1),t=Ye(NQ),i=Ye(BQ),n=Ye(DQ),s=Ye(VQ),r=Ye(ZQ),l=Ye(),u=Ye(void 0),d=Ye(!1),h=Ye(!1),g=Ye(zQ),y=Ye(UQ),x=Ye(jQ),C=Ye(KQ),I=Ye(HQ),A=Ye(XQ),E=Ye(qQ),L=Ye(YQ),G=Ye(),F=Ye(!1),B=Ye(void 0),Z=Ye(!1),Y=Ye(!1),$=Ye(!1),te=Ye(!1),ce=Ye(!1),me=Ye(!1);function X(ta){me.value=ta}function de(ta){t.value=ta}function N(ta){i.value=ta}function ne(ta){s.value=ta,s.value&&(r.value=!1,n.value=!1)}function le(ta){r.value=ta,r.value&&(F.value=!1,n.value=!1)}function _e(){r.value?(i.value=!1,n.value=!1,g.value=!1,r.value=!1,C.value=!1):(r.value=!0,i.value=!0,n.value=!1,g.value=!1,y.value=!1,C.value=!1,F.value=!1,s.value&&(s.value=!1))}function ke(ta){G.value=ta}function Ie(){F.value=!0,i.value=!1}function re(){F.value=!1,i.value=!0}function Q(ta){a.value=ta??!a.value}function J(ta){Z.value=ta??!Z.value}function je(ta){g.value=ta??!g.value}function Qe(ta){n.value=ta??!n.value}function Je(ta){y.value=ta??!y.value}function kt(ta){x.value=ta??!x.value,x.value&&(Z.value=!1,Y.value=!1,te.value=!1)}function Pt(ta){C.value=ta??!C.value}function zt(ta){te.value=ta??!te.value}function Nt(ta){$.value=ta??!$.value}function ga(ta){I.value=ta??!I.value}return{authFormOpened:a,embedded:e,lang:t,layersOpen:i,legendsOpen:n,myLayersTabOpen:s,themeGridOpen:r,myMapId:l,myMap:u,myMapIsLoading:d,myMapLayersChanged:h,myMapsOpen:g,infoOpen:y,shareOpen:x,lidarOpen:C,feedbackOpen:I,feedbackanfOpen:A,feedbackageOpen:E,feedbackcruesOpen:L,styleEditorOpen:F,styleEditorOpenedSection:B,remoteLayersOpen:G,drawToolbarOpen:Z,measureToolbarOpen:Y,elevationProfileToolbarOpen:$,isOffLine:ce,isApp:me,printToolbarOpen:te,setIsApp:X,setLang:de,setLayersOpen:N,setMyLayersTabOpen:ne,setThemeGridOpen:le,setRemoteLayersOpen:ke,openStyleEditorPanel:Ie,closeStyleEditorPanel:re,toggleAuthFormOpen:Q,toggleDrawToolbarOpen:J,togglePrintToolbarOpen:zt,toggleMyMapsOpen:je,toggleInfoOpen:Je,toggleShareOpen:kt,toggleLidarOpen:Pt,toggleThemeGrid:_e,toggleLegendsOpen:Qe,toggleElevationProfileToolbarOpen:Nt,toggleFeedbackOpen:ga}},{}),Nu=Ao("user-manager",()=>{const a=ri(),{isOffLine:e}=xt(a),t=Ye(void 0),i=St(()=>e.value||!!t.value);function n(){return i.value}function s(l){if(l.login)t.value=l;else throw r(),new Error("Invalid username or password")}function r(){t.value=void 0}return{authenticated:i,currentUser:t,clearUser:r,isAuthenticated:n,setCurrentUser:s}},{}),QS="include",$Q="https://migration.geoportail.lu/login",JQ="https://migration.geoportail.lu/logout",QQ="https://migration.geoportail.lu/getuserinfo";class eee{async authenticate(e,t,i=!1){const n=new URLSearchParams({login:e,password:t,app:i?"true":"false"}),s=await fetch($Q,{method:"POST",credentials:QS,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n});if(!s.ok)throw new Error("Error while trying to authenticate user");const r=await s.json();return this.mapUserApiToUser(r)}async logout(){const e=await fetch(JQ,{credentials:QS});if(!e.ok)throw new Error("Error while trying to logout user");return await e.text()}async getUserInfo(){const e=new URLSearchParams({}),t=await fetch(QQ,{method:"POST",credentials:QS,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),i=t.ok&&await t.json();if(!i.login)throw new Error("Error while trying to get user info");return this.mapUserApiToUser(i)}mapUserApiToUser(e){const{is_admin:t,login:i,mail:n,mymaps_role:s,role:r,role_id:l,sn:u,typeUtilisateur:d}=e;return{login:i,mail:n,isAdmin:t,mymapsRole:s,name:u,role:r,roleId:l,sn:u,typeUtilisateur:d}}}const e4=new eee;var As=[];for(var t4=0;t4<256;++t4)As.push((t4+256).toString(16).slice(1));function tee(a,e=0){return(As[a[e+0]]+As[a[e+1]]+As[a[e+2]]+As[a[e+3]]+"-"+As[a[e+4]]+As[a[e+5]]+"-"+As[a[e+6]]+As[a[e+7]]+"-"+As[a[e+8]]+As[a[e+9]]+"-"+As[a[e+10]]+As[a[e+11]]+As[a[e+12]]+As[a[e+13]]+As[a[e+14]]+As[a[e+15]]).toLowerCase()}var h2,aee=new Uint8Array(16);function iee(){if(!h2&&(h2=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!h2))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return h2(aee)}var nee=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const E9={randomUUID:nee};function V1(a,e,t){if(E9.randomUUID&&!a)return E9.randomUUID();a=a||{};var i=a.random||(a.rng||iee)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,tee(i)}var fi=(a=>(a.INFO="alert-info",a.WARNING="alert-warning",a.ERROR="alert-danger",a))(fi||{});class ree{constructor(e,t,i,n,s){this.uuid=e,this.message=t,this.type=i,this.duration=n,this.timer=s,this.start()}timeoutID;start(){this.timer&&(this.timeoutID=setTimeout(()=>this.timer(this.uuid),this.duration))}cancel(){clearTimeout(this.timeoutID)}}const see=fi.INFO,oee=7e3,lee=4e3,ar=Ao("alert-notifications",()=>{const a=Ye([]);function e(i,n=see,s){s=s??(n===fi.WARNING?lee:oee);const r=new ree(V1(),i,n,s,l=>t(l));return a.value.push(r),r.uuid}function t(i){a.value=a.value.filter(n=>(n.uuid===i&&n.cancel(),n.uuid!==i))}return{notifications:a,addNotification:e,removeNotification:t}},{}),uee={"data-cy":"authForm",class:"lux-account bg-secondary"},cee={class:"lux-panel-title pt-5 mb-5 pl-5 h-16 shrink-0 flex justify-between"},dee={class:"lux-account-content"},hee={class:"flex flex-col gap-2 mb-2"},_ee=["placeholder"],mee=["placeholder"],fee={class:"flex mt-3 items-center"},gee={class:"grow leading-5"},pee=["href"],yee=["href"],bee=["value"],vee={key:1},xee={class:"flex flex-col gap-[1px] mb-2 text-white"},wee={class:"bg-secondary py-1 px-3"},Cee={class:"bg-secondary py-1 px-3"},Iee={class:"flex items-center gap-3 justify-end"},See=["href"],Aee=rt({__name:"auth-form",setup(a){const e="https://myaccount.geoportail.lu",t="https://myaccount.geoportail.lu/recover-password",i="https://myaccount.geoportail.lu/new-user",{t:n}=Ct(),{addNotification:s}=ar(),{lang:r,isApp:l}=xt(ri()),u=Bn(),d=Nu(),{setCurrentUser:h,clearUser:g}=d,{authenticated:y,currentUser:x}=xt(d),C=Ye(!1),I=Ye(""),A=Ye("");Rt(y,Z=>{!C.value&&Z&&s(n("Vous tes maintenant correctement connect."))}),fn(()=>{e4.getUserInfo().then(Z=>{C.value=!0,G(Z)}).catch(()=>{})});function E(){e4.logout().then(()=>{g(),u.loadThemes()}).catch(()=>s(n("Une erreur est survenue durant la dconnexion."),fi.ERROR)),B()}function L(){e4.authenticate(I.value,A.value,l.value).then(Z=>{C.value=!1,G(Z)}).catch(F),B()}function G(Z){h(Z),u.loadThemes()}function F(){s(n("Invalid username or password."),fi.WARNING),g()}function B(){I.value="",A.value=""}return(Z,Y)=>(U(),se("div",uee,[P("h4",cee,K(R(n)("My account")),1),P("fieldset",null,[Y[2]||(Y[2]=P("legend",{class:"lux-account-tab"},null,-1)),P("div",dee,[R(y)?(U(),se("div",vee,[P("div",xee,[P("div",wee,K(R(x)?.login),1),P("div",Cee,K(R(x)?.mail),1)]),P("div",Iee,[P("div",null,[P("a",{class:"text-secondary hover:underline hover:text-white",target:"_blank",href:`${R(e)}?lang=${R(r)}`},K(R(n)("My account")),9,See)]),P("div",null,[P("button",{class:"lux-btn",onClick:E},K(R(n)("Logout")),1)])])])):(U(),se("form",{key:0,onSubmit:_r(L,["prevent"])},[P("div",hee,[P("div",null,[Sa(P("input",{class:"w-full lux-input h-11",type:"text",name:"userName","onUpdate:modelValue":Y[0]||(Y[0]=$=>I.value=$),placeholder:R(n)("Username"),required:""},null,8,_ee),[[Vn,I.value]])]),P("div",null,[Sa(P("input",{class:"w-full lux-input h-11",type:"password",name:"userPassword","onUpdate:modelValue":Y[1]||(Y[1]=$=>A.value=$),placeholder:R(n)("Password"),required:""},null,8,mee),[[Vn,A.value]])])]),P("div",fee,[P("div",gee,[P("p",null,[P("a",{"data-cy":"authFormLostPwd",class:"text-secondary hover:underline hover:text-white",target:"_blank",href:R(t)},K(R(n)("I lost my password")),9,pee)]),P("p",null,[P("a",{"data-cy":"authFormNewAccount",class:"text-secondary hover:underline hover:text-white",target:"_blank",href:R(i)},K(R(n)("Create a new user account")),9,yee)])]),P("div",null,[P("input",{class:"lux-btn h-11 w-24 text-white placeholder:italic bg-secondary border-none uppercase hover:text-primary hover:bg-secondary",type:"submit",value:R(n)("Submit")},null,8,bee)])])],32))])])]))}}),Tee={class:"h-full w-full"},Eee=["aria-expanded"],Mee=["title"],Lee={class:"lux-dropdown-wrapper",ref:"dropdownWrapperDOM"},Ree=rt({__name:"dropdown-content",props:{placeholder:{},enableClickOutside:{type:Boolean,default:!0},isOpen:{type:Boolean,default:!1},direction:{}},emits:["toggleDropdown"],setup(a,{emit:e}){const t=a,i=e,n=Ai(t.isOpen);Rt(()=>t.isOpen,h=>{n.value=h});function s(h){n.value=h===void 0?!n.value:h,i("toggleDropdown",n.value)}function r(h){h.stopImmediatePropagation(),s()}function l(){s(!1)}const u=Ye(null),d=Ye("");return fn(()=>{t.enableClickOutside&&document.addEventListener("click",l),d.value=u.value?"lux-btn-"+getComputedStyle(u.value).getPropertyValue("--button-theme"):""}),Nr(()=>t.enableClickOutside&&document.removeEventListener("click",l)),(h,g)=>(U(),se("div",L5({class:"lux-dropdown"},h.$attrs,{ref_key:"root",ref:u}),[P("div",Tee,[P("button",{type:"button",class:Fa(["lux-btn lux-dropdown-btn flex items-center text-ellipsis max-w-full",[n.value?"expanded":"",d.value]]),"aria-expanded":n.value,"aria-haspopup":"true",onClick:r},[P("span",{class:"grow text-left text-ellipsis max-w-full overflow-hidden text-nowrap",title:t.placeholder},K(t.placeholder),9,Mee),P("span",{class:Fa(["lux-caret ml-1",{up:a.direction==="up"}])},null,2)],10,Eee)]),P("div",Lee,[P("div",{class:Fa(["lux-dropdown-content",n.value?"":"hidden"]),tabindex:"-1"},[ja(h.$slots,"default",{},void 0,!0)],2)],512)],16))}}),ir=(a,e)=>{const t=a.__vccOpts||a;for(const[i,n]of e)t[i]=n;return t},DG=ir(Ree,[["__scopeId","data-v-22e52595"]]),kee=["data-cy"],Pee=["aria-label","data-value"],Qm=rt({__name:"dropdown-list",props:{placeholder:{},options:{default:()=>[{label:"Default label",value:"Default value"}]},modelValue:{},direction:{default:"down"}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Ai(),s=K6(t.direction);function r(u){u.preventDefault(),n.value=u.target.dataset.value,i("change",n.value)}function l(){return t.modelValue!==void 0?t.options.find(u=>u.value===t.modelValue)?.label:t.placeholder}return(u,d)=>(U(),Lt(DG,L5({placeholder:l(),direction:s.value},u.$attrs),{default:Ht(()=>[P("ul",{class:Fa(["lux-dropdown-list",s.value])},[(U(!0),se(Tt,null,gi(t.options,h=>(U(),se("li",{key:h.value,class:Fa(a.modelValue===h.value?"selected":""),"data-cy":`dropdownItem-${h.value}`},[P("button",{class:"lux-dropdown-list-item","aria-label":h.ariaLabel,"data-value":h.value,onClick:r},K(h.label),9,Pee)],10,kee))),128))],2)]),_:1},16,["placeholder","direction"]))}});function Gee(a){return{fr:"fre",en:"eng",de:"ger",lb:"ltz"}[a.toLowerCase()]}function Wee(a){return new DOMParser().parseFromString(a,"text/html").body}function Oee(a){const e=[];function t(i){if(!i)return;const n=i.split("|");n[3]==="WWW:LINK-1.0-http--link"&&e.indexOf(n[2])===-1&&e.push(n[2])}return Array.isArray(a)?a.forEach(t,a):t(a),e}function Fee(a){const t=(Array.isArray(a)?a:[a]).filter(i=>{const n=i.split("|")[1];return n==="metadata"||n==="resource"});return t.length===0?{organisaton:"",name:"",unknown:"",address:"",email:""}:{organisaton:t[0].split("|")[2],name:t[0].split("|")[5],unknown:t[0].split("|")[6],address:t[0].split("|")[7],email:t[0].split("|")[4]}}const Nee="/";var VG=(a=>(a.PNG="image/png",a.JPG="image/jpeg",a))(VG||{}),Ld=(a=>(a.VALUE="value",a.RANGE="range",a))(Ld||{}),hx=(a=>(a.DATEPICKER="datepicker",a.SLIDER="slider",a))(hx||{});function no(){const a=Al();function e(d,h){try{const g=JSON.parse(d).concat(JSON.parse(h));return new Set(g).size<g.length}catch{return!1}}function t(d){return d.opacity=d.previousOpacity=d.metadata?.start_opacity??1,i(d),d}function i(d){d.currentTimeMinValue||(d.currentTimeMinValue=d.time?.minDefValue??d.time?.minValue);const h=d.time?.mode===Ld.RANGE;!d.currentTimeMaxValue&&h&&(d.currentTimeMaxValue=d.time?.maxDefValue??d.time?.maxValue)}function n(d){const h=s(d);let g=d.name;return h&&(g=d.metadata?.time_layers?.[h]??g),g}function s(d){return[d.currentTimeMinValue,...d.currentTimeMaxValue?[d.currentTimeMaxValue]:[]].join(Nee)}function r(d){const h=ar();if(!d.metadata?.exclusion)return;const g=Vi(),y=g.layers.filter(x=>e(d?.metadata?.exclusion,x?.metadata?.exclusion));y.length>0&&(g.removeLayers(...y.map(x=>x.id)),h.addNotification(Va.t("The layer <b>{{layersToRemove}}</b> has been removed because it cannot be displayed while the layer <b>{{layer}}</b> is displayed",{count:y.length,layersToRemove:y.map(x=>Va.t(x.name,{ns:"client"})).join(", "),layer:Va.t(d.name,{ns:"client"}),ns:"client"}),fi.WARNING)),d.id!==g.bgLayer?.id&&l(d)}function l(d){const h=Vi(),g=ar();e(d.metadata?.exclusion,h.bgLayer?.metadata?.exclusion)&&(h.setBgLayer(null),g.addNotification(Va.t("Background has been deactivated because the layer {{layer}} cannot be displayed on top of it.",{layer:Va.t(d.name,{ns:"client"}),ns:"client"}),fi.WARNING))}function u(d,h=!0,g,y){const x=Bn(),C=Vi(),I=g?x.layerTrees_3d:x.theme,A=a.findById(d,y?I:void 0);if(A){const E=A.metadata?.linked_layers||[];h===!1?C.removeLayers(A.id,...E):(r(A),(g?C.add3dLayers:C.addLayers)(t(A),...E.map(G=>t(a.findById(parseInt(G,10))))))}}return{initLayer:t,getLayerCurrentLabel:n,getLayerCurrentTime:s,handleExclusionLayers:r,toggleLayer:u}}class hf extends Error{}class Bee extends hf{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Dee extends hf{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class Vee extends hf{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class zg extends hf{}class ZG extends hf{constructor(e){super(`Invalid unit ${e}`)}}class Ys extends hf{}class Rh extends hf{constructor(){super("Zone is an abstract class")}}const ha="numeric",Ou="short",Sl="long",xw={year:ha,month:ha,day:ha},zG={year:ha,month:Ou,day:ha},Zee={year:ha,month:Ou,day:ha,weekday:Ou},UG={year:ha,month:Sl,day:ha},HG={year:ha,month:Sl,day:ha,weekday:Sl},XG={hour:ha,minute:ha},qG={hour:ha,minute:ha,second:ha},YG={hour:ha,minute:ha,second:ha,timeZoneName:Ou},KG={hour:ha,minute:ha,second:ha,timeZoneName:Sl},jG={hour:ha,minute:ha,hourCycle:"h23"},$G={hour:ha,minute:ha,second:ha,hourCycle:"h23"},JG={hour:ha,minute:ha,second:ha,hourCycle:"h23",timeZoneName:Ou},QG={hour:ha,minute:ha,second:ha,hourCycle:"h23",timeZoneName:Sl},eW={year:ha,month:ha,day:ha,hour:ha,minute:ha},tW={year:ha,month:ha,day:ha,hour:ha,minute:ha,second:ha},aW={year:ha,month:Ou,day:ha,hour:ha,minute:ha},iW={year:ha,month:Ou,day:ha,hour:ha,minute:ha,second:ha},zee={year:ha,month:Ou,day:ha,weekday:Ou,hour:ha,minute:ha},nW={year:ha,month:Sl,day:ha,hour:ha,minute:ha,timeZoneName:Ou},rW={year:ha,month:Sl,day:ha,hour:ha,minute:ha,second:ha,timeZoneName:Ou},sW={year:ha,month:Sl,day:ha,weekday:Sl,hour:ha,minute:ha,timeZoneName:Sl},oW={year:ha,month:Sl,day:ha,weekday:Sl,hour:ha,minute:ha,second:ha,timeZoneName:Sl};class Cb{get type(){throw new Rh}get name(){throw new Rh}get ianaName(){return this.name}get isUniversal(){throw new Rh}offsetName(e,t){throw new Rh}formatOffset(e,t){throw new Rh}offset(e){throw new Rh}equals(e){throw new Rh}get isValid(){throw new Rh}}let a4=null;class qC extends Cb{static get instance(){return a4===null&&(a4=new qC),a4}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return yW(e,t,i)}formatOffset(e,t){return e1(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const a3=new Map;function Uee(a){let e=a3.get(a);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),a3.set(a,e)),e}const Hee={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Xee(a,e){const t=a.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,n,s,r,l,u,d,h]=i;return[r,n,s,l,u,d,h]}function qee(a,e){const t=a.formatToParts(e),i=[];for(let n=0;n<t.length;n++){const{type:s,value:r}=t[n],l=Hee[s];s==="era"?i[l]=r:ni(l)||(i[l]=parseInt(r,10))}return i}const i4=new Map;class Kd extends Cb{static create(e){let t=i4.get(e);return t===void 0&&i4.set(e,t=new Kd(e)),t}static resetCache(){i4.clear(),a3.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Kd.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return yW(e,t,i,this.name)}formatOffset(e,t){return e1(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const i=Uee(this.name);let[n,s,r,l,u,d,h]=i.formatToParts?qee(i,t):Xee(i,t);l==="BC"&&(n=-Math.abs(n)+1);const y=KC({year:n,month:s,day:r,hour:u===24?0:u,minute:d,second:h,millisecond:0});let x=+t;const C=x%1e3;return x-=C>=0?C:1e3+C,(y-x)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let M9={};function Yee(a,e={}){const t=JSON.stringify([a,e]);let i=M9[t];return i||(i=new Intl.ListFormat(a,e),M9[t]=i),i}const i3=new Map;function n3(a,e={}){const t=JSON.stringify([a,e]);let i=i3.get(t);return i===void 0&&(i=new Intl.DateTimeFormat(a,e),i3.set(t,i)),i}const r3=new Map;function Kee(a,e={}){const t=JSON.stringify([a,e]);let i=r3.get(t);return i===void 0&&(i=new Intl.NumberFormat(a,e),r3.set(t,i)),i}const s3=new Map;function jee(a,e={}){const{base:t,...i}=e,n=JSON.stringify([a,i]);let s=s3.get(n);return s===void 0&&(s=new Intl.RelativeTimeFormat(a,e),s3.set(n,s)),s}let E0=null;function $ee(){return E0||(E0=new Intl.DateTimeFormat().resolvedOptions().locale,E0)}const o3=new Map;function lW(a){let e=o3.get(a);return e===void 0&&(e=new Intl.DateTimeFormat(a).resolvedOptions(),o3.set(a,e)),e}const l3=new Map;function Jee(a){let e=l3.get(a);if(!e){const t=new Intl.Locale(a);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...uW,...e}),l3.set(a,e)}return e}function Qee(a){const e=a.indexOf("-x-");e!==-1&&(a=a.substring(0,e));const t=a.indexOf("-u-");if(t===-1)return[a];{let i,n;try{i=n3(a).resolvedOptions(),n=a}catch{const u=a.substring(0,t);i=n3(u).resolvedOptions(),n=u}const{numberingSystem:s,calendar:r}=i;return[n,s,r]}}function ete(a,e,t){return(t||e)&&(a.includes("-u-")||(a+="-u"),t&&(a+=`-ca-${t}`),e&&(a+=`-nu-${e}`)),a}function tte(a){const e=[];for(let t=1;t<=12;t++){const i=ii.utc(2009,t,1);e.push(a(i))}return e}function ate(a){const e=[];for(let t=1;t<=7;t++){const i=ii.utc(2016,11,13+t);e.push(a(i))}return e}function _2(a,e,t,i){const n=a.listingMode();return n==="error"?null:n==="en"?t(e):i(e)}function ite(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||lW(a.locale).numberingSystem==="latn"}class nte{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:s,...r}=i;if(!t||Object.keys(r).length>0){const l={useGrouping:!1,...i};i.padTo>0&&(l.minimumIntegerDigits=i.padTo),this.inf=Kee(e,l)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):GT(e,3);return Kr(t,this.padTo)}}}class rte{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const r=-1*(e.offset/60),l=r>=0?`Etc/GMT+${r}`:`Etc/GMT${r}`;e.offset!==0&&Kd.create(l).valid?(n=l,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=n3(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class ste{constructor(e,t,i){this.opts={style:"long",...i},!t&&gW()&&(this.rtf=jee(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):Ete(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const uW={firstDay:1,minimalDays:4,weekend:[6,7]};class vn{static fromOpts(e){return vn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,i,n,s=!1){const r=e||Sr.defaultLocale,l=r||(s?"en-US":$ee()),u=t||Sr.defaultNumberingSystem,d=i||Sr.defaultOutputCalendar,h=c3(n)||Sr.defaultWeekSettings;return new vn(l,u,d,h,r)}static resetCache(){E0=null,i3.clear(),r3.clear(),s3.clear(),o3.clear(),l3.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:i,weekSettings:n}={}){return vn.create(e,t,i,n)}constructor(e,t,i,n,s){const[r,l,u]=Qee(e);this.locale=r,this.numberingSystem=t||l||null,this.outputCalendar=i||u||null,this.weekSettings=n,this.intl=ete(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=ite(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:vn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,c3(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return _2(this,e,xW,()=>{const i=this.intl==="ja"||this.intl.startsWith("ja-");t&=!i;const n=t?{month:e,day:"numeric"}:{month:e},s=t?"format":"standalone";if(!this.monthsCache[s][e]){const r=i?l=>this.dtFormatter(l,n).format():l=>this.extract(l,n,"month");this.monthsCache[s][e]=tte(r)}return this.monthsCache[s][e]})}weekdays(e,t=!1){return _2(this,e,IW,()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=t?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=ate(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return _2(this,void 0,()=>SW,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ii.utc(2016,11,13,9),ii.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return _2(this,e,AW,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[ii.utc(-40,1,1),ii.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){const n=this.dtFormatter(e,t),s=n.formatToParts(),r=s.find(l=>l.type.toLowerCase()===i);return r?r.value:null}numberFormatter(e={}){return new nte(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new rte(e,this.intl,t)}relFormatter(e={}){return new ste(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Yee(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||lW(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:pW()?Jee(this.locale):uW}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let n4=null;class wo extends Cb{static get utcInstance(){return n4===null&&(n4=new wo(0)),n4}static instance(e){return e===0?wo.utcInstance:new wo(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new wo(jC(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${e1(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${e1(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return e1(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class ote extends Cb{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Xh(a,e){if(ni(a)||a===null)return e;if(a instanceof Cb)return a;if(_te(a)){const t=a.toLowerCase();return t==="default"?e:t==="local"||t==="system"?qC.instance:t==="utc"||t==="gmt"?wo.utcInstance:wo.parseSpecifier(t)||Kd.create(a)}else return l_(a)?wo.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new ote(a)}const LT={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},L9={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},lte=LT.hanidec.replace(/[\[|\]]/g,"").split("");function ute(a){let e=parseInt(a,10);if(isNaN(e)){e="";for(let t=0;t<a.length;t++){const i=a.charCodeAt(t);if(a[t].search(LT.hanidec)!==-1)e+=lte.indexOf(a[t]);else for(const n in L9){const[s,r]=L9[n];i>=s&&i<=r&&(e+=i-s)}}return parseInt(e,10)}else return e}const u3=new Map;function cte(){u3.clear()}function hu({numberingSystem:a},e=""){const t=a||"latn";let i=u3.get(t);i===void 0&&(i=new Map,u3.set(t,i));let n=i.get(e);return n===void 0&&(n=new RegExp(`${LT[t]}${e}`),i.set(e,n)),n}let R9=()=>Date.now(),k9="system",P9=null,G9=null,W9=null,O9=60,F9,N9=null;class Sr{static get now(){return R9}static set now(e){R9=e}static set defaultZone(e){k9=e}static get defaultZone(){return Xh(k9,qC.instance)}static get defaultLocale(){return P9}static set defaultLocale(e){P9=e}static get defaultNumberingSystem(){return G9}static set defaultNumberingSystem(e){G9=e}static get defaultOutputCalendar(){return W9}static set defaultOutputCalendar(e){W9=e}static get defaultWeekSettings(){return N9}static set defaultWeekSettings(e){N9=c3(e)}static get twoDigitCutoffYear(){return O9}static set twoDigitCutoffYear(e){O9=e%100}static get throwOnInvalid(){return F9}static set throwOnInvalid(e){F9=e}static resetCaches(){vn.resetCache(),Kd.resetCache(),ii.resetCache(),cte()}}class Cu{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const cW=[0,31,59,90,120,151,181,212,243,273,304,334],dW=[0,31,60,91,121,152,182,213,244,274,305,335];function Ul(a,e){return new Cu("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${a}, which is invalid`)}function RT(a,e,t){const i=new Date(Date.UTC(a,e-1,t));a<100&&a>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function hW(a,e,t){return t+(Ib(a)?dW:cW)[e-1]}function _W(a,e){const t=Ib(a)?dW:cW,i=t.findIndex(s=>s<e),n=e-t[i];return{month:i+1,day:n}}function kT(a,e){return(a-e+7)%7+1}function ww(a,e=4,t=1){const{year:i,month:n,day:s}=a,r=hW(i,n,s),l=kT(RT(i,n,s),t);let u=Math.floor((r-l+14-e)/7),d;return u<1?(d=i-1,u=Z1(d,e,t)):u>Z1(i,e,t)?(d=i+1,u=1):d=i,{weekYear:d,weekNumber:u,weekday:l,...$C(a)}}function B9(a,e=4,t=1){const{weekYear:i,weekNumber:n,weekday:s}=a,r=kT(RT(i,1,e),t),l=sp(i);let u=n*7+s-r-7+e,d;u<1?(d=i-1,u+=sp(d)):u>l?(d=i+1,u-=sp(i)):d=i;const{month:h,day:g}=_W(d,u);return{year:d,month:h,day:g,...$C(a)}}function r4(a){const{year:e,month:t,day:i}=a,n=hW(e,t,i);return{year:e,ordinal:n,...$C(a)}}function D9(a){const{year:e,ordinal:t}=a,{month:i,day:n}=_W(e,t);return{year:e,month:i,day:n,...$C(a)}}function V9(a,e){if(!ni(a.localWeekday)||!ni(a.localWeekNumber)||!ni(a.localWeekYear)){if(!ni(a.weekday)||!ni(a.weekNumber)||!ni(a.weekYear))throw new zg("Cannot mix locale-based week fields with ISO-based week fields");return ni(a.localWeekday)||(a.weekday=a.localWeekday),ni(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),ni(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function dte(a,e=4,t=1){const i=YC(a.weekYear),n=Hl(a.weekNumber,1,Z1(a.weekYear,e,t)),s=Hl(a.weekday,1,7);return i?n?s?!1:Ul("weekday",a.weekday):Ul("week",a.weekNumber):Ul("weekYear",a.weekYear)}function hte(a){const e=YC(a.year),t=Hl(a.ordinal,1,sp(a.year));return e?t?!1:Ul("ordinal",a.ordinal):Ul("year",a.year)}function mW(a){const e=YC(a.year),t=Hl(a.month,1,12),i=Hl(a.day,1,Cw(a.year,a.month));return e?t?i?!1:Ul("day",a.day):Ul("month",a.month):Ul("year",a.year)}function fW(a){const{hour:e,minute:t,second:i,millisecond:n}=a,s=Hl(e,0,23)||e===24&&t===0&&i===0&&n===0,r=Hl(t,0,59),l=Hl(i,0,59),u=Hl(n,0,999);return s?r?l?u?!1:Ul("millisecond",n):Ul("second",i):Ul("minute",t):Ul("hour",e)}function ni(a){return typeof a>"u"}function l_(a){return typeof a=="number"}function YC(a){return typeof a=="number"&&a%1===0}function _te(a){return typeof a=="string"}function mte(a){return Object.prototype.toString.call(a)==="[object Date]"}function gW(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function pW(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function fte(a){return Array.isArray(a)?a:[a]}function Z9(a,e,t){if(a.length!==0)return a.reduce((i,n)=>{const s=[e(n),n];return i&&t(i[0],s[0])===i[0]?i:s},null)[1]}function gte(a,e){return e.reduce((t,i)=>(t[i]=a[i],t),{})}function Ap(a,e){return Object.prototype.hasOwnProperty.call(a,e)}function c3(a){if(a==null)return null;if(typeof a!="object")throw new Ys("Week settings must be an object");if(!Hl(a.firstDay,1,7)||!Hl(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(e=>!Hl(e,1,7)))throw new Ys("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function Hl(a,e,t){return YC(a)&&a>=e&&a<=t}function pte(a,e){return a-e*Math.floor(a/e)}function Kr(a,e=2){const t=a<0;let i;return t?i="-"+(""+-a).padStart(e,"0"):i=(""+a).padStart(e,"0"),i}function Zh(a){if(!(ni(a)||a===null||a===""))return parseInt(a,10)}function hm(a){if(!(ni(a)||a===null||a===""))return parseFloat(a)}function PT(a){if(!(ni(a)||a===null||a==="")){const e=parseFloat("0."+a)*1e3;return Math.floor(e)}}function GT(a,e,t="round"){const i=10**e;switch(t){case"expand":return a>0?Math.ceil(a*i)/i:Math.floor(a*i)/i;case"trunc":return Math.trunc(a*i)/i;case"round":return Math.round(a*i)/i;case"floor":return Math.floor(a*i)/i;case"ceil":return Math.ceil(a*i)/i;default:throw new RangeError(`Value rounding ${t} is out of range`)}}function Ib(a){return a%4===0&&(a%100!==0||a%400===0)}function sp(a){return Ib(a)?366:365}function Cw(a,e){const t=pte(e-1,12)+1,i=a+(e-t)/12;return t===2?Ib(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function KC(a){let e=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(e=new Date(e),e.setUTCFullYear(a.year,a.month-1,a.day)),+e}function z9(a,e,t){return-kT(RT(a,1,e),t)+e-1}function Z1(a,e=4,t=1){const i=z9(a,e,t),n=z9(a+1,e,t);return(sp(a)-i+n)/7}function d3(a){return a>99?a:a>Sr.twoDigitCutoffYear?1900+a:2e3+a}function yW(a,e,t,i=null){const n=new Date(a),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const r={timeZoneName:e,...s},l=new Intl.DateTimeFormat(t,r).formatToParts(n).find(u=>u.type.toLowerCase()==="timezonename");return l?l.value:null}function jC(a,e){let t=parseInt(a,10);Number.isNaN(t)&&(t=0);const i=parseInt(e,10)||0,n=t<0||Object.is(t,-0)?-i:i;return t*60+n}function bW(a){const e=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(e))throw new Ys(`Invalid unit value ${a}`);return e}function Iw(a,e){const t={};for(const i in a)if(Ap(a,i)){const n=a[i];if(n==null)continue;t[e(i)]=bW(n)}return t}function e1(a,e){const t=Math.trunc(Math.abs(a/60)),i=Math.trunc(Math.abs(a%60)),n=a>=0?"+":"-";switch(e){case"short":return`${n}${Kr(t,2)}:${Kr(i,2)}`;case"narrow":return`${n}${t}${i>0?`:${i}`:""}`;case"techie":return`${n}${Kr(t,2)}${Kr(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function $C(a){return gte(a,["hour","minute","second","millisecond"])}const yte=["January","February","March","April","May","June","July","August","September","October","November","December"],vW=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],bte=["J","F","M","A","M","J","J","A","S","O","N","D"];function xW(a){switch(a){case"narrow":return[...bte];case"short":return[...vW];case"long":return[...yte];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const wW=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],CW=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],vte=["M","T","W","T","F","S","S"];function IW(a){switch(a){case"narrow":return[...vte];case"short":return[...CW];case"long":return[...wW];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const SW=["AM","PM"],xte=["Before Christ","Anno Domini"],wte=["BC","AD"],Cte=["B","A"];function AW(a){switch(a){case"narrow":return[...Cte];case"short":return[...wte];case"long":return[...xte];default:return null}}function Ite(a){return SW[a.hour<12?0:1]}function Ste(a,e){return IW(e)[a.weekday-1]}function Ate(a,e){return xW(e)[a.month-1]}function Tte(a,e){return AW(e)[a.year<0?0:1]}function Ete(a,e,t="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(a)===-1;if(t==="auto"&&s){const g=a==="days";switch(e){case 1:return g?"tomorrow":`next ${n[a][0]}`;case-1:return g?"yesterday":`last ${n[a][0]}`;case 0:return g?"today":`this ${n[a][0]}`}}const r=Object.is(e,-0)||e<0,l=Math.abs(e),u=l===1,d=n[a],h=i?u?d[1]:d[2]||d[1]:u?n[a][0]:a;return r?`${l} ${h} ago`:`in ${l} ${h}`}function U9(a,e){let t="";for(const i of a)i.literal?t+=i.val:t+=e(i.val);return t}const Mte={D:xw,DD:zG,DDD:UG,DDDD:HG,t:XG,tt:qG,ttt:YG,tttt:KG,T:jG,TT:$G,TTT:JG,TTTT:QG,f:eW,ff:aW,fff:nW,ffff:sW,F:tW,FF:iW,FFF:rW,FFFF:oW};class Qs{static create(e,t={}){return new Qs(e,t)}static parseFormat(e){let t=null,i="",n=!1;const s=[];for(let r=0;r<e.length;r++){const l=e.charAt(r);l==="'"?((i.length>0||n)&&s.push({literal:n||/^\s+$/.test(i),val:i===""?"'":i}),t=null,i="",n=!n):n||l===t?i+=l:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=l,t=l)}return i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(e){return Mte[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,i=void 0){if(this.opts.forceSimple)return Kr(e,t);const n={...this.opts};return t>0&&(n.padTo=t),i&&(n.signDisplay=i),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(x,C)=>this.loc.extract(e,x,C),r=x=>e.isOffsetFixed&&e.offset===0&&x.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,x.format):"",l=()=>i?Ite(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(x,C)=>i?Ate(e,x):s(C?{month:x}:{month:x,day:"numeric"},"month"),d=(x,C)=>i?Ste(e,x):s(C?{weekday:x}:{weekday:x,month:"long",day:"numeric"},"weekday"),h=x=>{const C=Qs.macroTokenToFormatOpts(x);return C?this.formatWithSystemDefault(e,C):x},g=x=>i?Tte(e,x):s({era:x},"era"),y=x=>{switch(x){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return g("short");case"GG":return g("long");case"GGGGG":return g("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(x)}};return U9(Qs.parseFormat(t),y)}formatDurationFromString(e,t){const i=this.opts.signMode==="negativeLargestOnly"?-1:1,n=h=>{switch(h[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(h,g)=>y=>{const x=n(y);if(x){const C=g.isNegativeDuration&&x!==g.largestUnit?i:1;let I;return this.opts.signMode==="negativeLargestOnly"&&x!==g.largestUnit?I="never":this.opts.signMode==="all"?I="always":I="auto",this.num(h.get(x)*C,y.length,I)}else return y},r=Qs.parseFormat(t),l=r.reduce((h,{literal:g,val:y})=>g?h:h.concat(y),[]),u=e.shiftTo(...l.map(n).filter(h=>h)),d={isNegativeDuration:u<0,largestUnit:Object.keys(u.values)[0]};return U9(r,s(u,d))}}const TW=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Vp(...a){const e=a.reduce((t,i)=>t+i.source,"");return RegExp(`^${e}$`)}function Zp(...a){return e=>a.reduce(([t,i,n],s)=>{const[r,l,u]=s(e,n);return[{...t,...r},l||i,u]},[{},null,1]).slice(0,2)}function zp(a,...e){if(a==null)return[null,null];for(const[t,i]of e){const n=t.exec(a);if(n)return i(n)}return[null,null]}function EW(...a){return(e,t)=>{const i={};let n;for(n=0;n<a.length;n++)i[a[n]]=Zh(e[t+n]);return[i,null,t+n]}}const MW=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,Lte=`(?:${MW.source}?(?:\\[(${TW.source})\\])?)?`,WT=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,LW=RegExp(`${WT.source}${Lte}`),OT=RegExp(`(?:[Tt]${LW.source})?`),Rte=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,kte=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Pte=/(\d{4})-?(\d{3})/,Gte=EW("weekYear","weekNumber","weekDay"),Wte=EW("year","ordinal"),Ote=/(\d{4})-(\d\d)-(\d\d)/,RW=RegExp(`${WT.source} ?(?:${MW.source}|(${TW.source}))?`),Fte=RegExp(`(?: ${RW.source})?`);function op(a,e,t){const i=a[e];return ni(i)?t:Zh(i)}function Nte(a,e){return[{year:op(a,e),month:op(a,e+1,1),day:op(a,e+2,1)},null,e+3]}function Up(a,e){return[{hours:op(a,e,0),minutes:op(a,e+1,0),seconds:op(a,e+2,0),milliseconds:PT(a[e+3])},null,e+4]}function Sb(a,e){const t=!a[e]&&!a[e+1],i=jC(a[e+1],a[e+2]),n=t?null:wo.instance(i);return[{},n,e+3]}function Ab(a,e){const t=a[e]?Kd.create(a[e]):null;return[{},t,e+1]}const Bte=RegExp(`^T?${WT.source}$`),Dte=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Vte(a){const[e,t,i,n,s,r,l,u,d]=a,h=e[0]==="-",g=u&&u[0]==="-",y=(x,C=!1)=>x!==void 0&&(C||x&&h)?-x:x;return[{years:y(hm(t)),months:y(hm(i)),weeks:y(hm(n)),days:y(hm(s)),hours:y(hm(r)),minutes:y(hm(l)),seconds:y(hm(u),u==="-0"),milliseconds:y(PT(d),g)}]}const Zte={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function FT(a,e,t,i,n,s,r){const l={year:e.length===2?d3(Zh(e)):Zh(e),month:vW.indexOf(t)+1,day:Zh(i),hour:Zh(n),minute:Zh(s)};return r&&(l.second=Zh(r)),a&&(l.weekday=a.length>3?wW.indexOf(a)+1:CW.indexOf(a)+1),l}const zte=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Ute(a){const[,e,t,i,n,s,r,l,u,d,h,g]=a,y=FT(e,n,i,t,s,r,l);let x;return u?x=Zte[u]:d?x=0:x=jC(h,g),[y,new wo(x)]}function Hte(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Xte=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,qte=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Yte=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function H9(a){const[,e,t,i,n,s,r,l]=a;return[FT(e,n,i,t,s,r,l),wo.utcInstance]}function Kte(a){const[,e,t,i,n,s,r,l]=a;return[FT(e,l,t,i,n,s,r),wo.utcInstance]}const jte=Vp(Rte,OT),$te=Vp(kte,OT),Jte=Vp(Pte,OT),Qte=Vp(LW),kW=Zp(Nte,Up,Sb,Ab),eae=Zp(Gte,Up,Sb,Ab),tae=Zp(Wte,Up,Sb,Ab),aae=Zp(Up,Sb,Ab);function iae(a){return zp(a,[jte,kW],[$te,eae],[Jte,tae],[Qte,aae])}function nae(a){return zp(Hte(a),[zte,Ute])}function rae(a){return zp(a,[Xte,H9],[qte,H9],[Yte,Kte])}function sae(a){return zp(a,[Dte,Vte])}const oae=Zp(Up);function lae(a){return zp(a,[Bte,oae])}const uae=Vp(Ote,Fte),cae=Vp(RW),dae=Zp(Up,Sb,Ab);function hae(a){return zp(a,[uae,kW],[cae,dae])}const X9="Invalid Duration",PW={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},_ae={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...PW},Bl=146097/400,pg=146097/4800,mae={years:{quarters:4,months:12,weeks:Bl/7,days:Bl,hours:Bl*24,minutes:Bl*24*60,seconds:Bl*24*60*60,milliseconds:Bl*24*60*60*1e3},quarters:{months:3,weeks:Bl/28,days:Bl/4,hours:Bl*24/4,minutes:Bl*24*60/4,seconds:Bl*24*60*60/4,milliseconds:Bl*24*60*60*1e3/4},months:{weeks:pg/7,days:pg,hours:pg*24,minutes:pg*24*60,seconds:pg*24*60*60,milliseconds:pg*24*60*60*1e3},...PW},Mm=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],fae=Mm.slice(0).reverse();function gd(a,e,t=!1){const i={values:t?e.values:{...a.values,...e.values||{}},loc:a.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||a.conversionAccuracy,matrix:e.matrix||a.matrix};return new en(i)}function GW(a,e){let t=e.milliseconds??0;for(const i of fae.slice(1))e[i]&&(t+=e[i]*a[i].milliseconds);return t}function q9(a,e){const t=GW(a,e)<0?-1:1;Mm.reduceRight((i,n)=>{if(ni(e[n]))return i;if(i){const s=e[i]*t,r=a[n][i],l=Math.floor(s/r);e[n]+=l*t,e[i]-=l*r*t}return n},null),Mm.reduce((i,n)=>{if(ni(e[n]))return i;if(i){const s=e[i]%1;e[i]-=s,e[n]+=s*a[i][n]}return n},null)}function Y9(a){const e={};for(const[t,i]of Object.entries(a))i!==0&&(e[t]=i);return e}class en{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let i=t?mae:_ae;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||vn.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return en.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Ys(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new en({values:Iw(e,en.normalizeUnit),loc:vn.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(l_(e))return en.fromMillis(e);if(en.isDuration(e))return e;if(typeof e=="object")return en.fromObject(e);throw new Ys(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=sae(e);return i?en.fromObject(i,t):en.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=lae(e);return i?en.fromObject(i,t):en.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Ys("need to specify a reason the Duration is invalid");const i=e instanceof Cu?e:new Cu(e,t);if(Sr.throwOnInvalid)throw new Vee(i);return new en({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new ZG(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Qs.create(this.loc,i).formatDurationFromString(this,e):X9}toHuman(e={}){if(!this.isValid)return X9;const t=e.showZeros!==!1,i=Mm.map(n=>{const s=this.values[n];return ni(s)||s===0&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(s)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=GT(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},ii.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?GW(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=en.fromDurationLike(e),i={};for(const n of Mm)(Ap(t.values,n)||Ap(this.values,n))&&(i[n]=t.get(n)+this.get(n));return gd(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=en.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=bW(e(this.values[i],i));return gd(this,{values:t},!0)}get(e){return this[en.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...Iw(e,en.normalizeUnit)};return gd(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:n}={}){const r={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:n,conversionAccuracy:i};return gd(this,r)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return q9(this.matrix,e),gd(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Y9(this.normalize().shiftToAll().toObject());return gd(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(r=>en.normalizeUnit(r));const t={},i={},n=this.toObject();let s;for(const r of Mm)if(e.indexOf(r)>=0){s=r;let l=0;for(const d in i)l+=this.matrix[d][r]*i[d],i[d]=0;l_(n[r])&&(l+=n[r]);const u=Math.trunc(l);t[r]=u,i[r]=(l*1e3-u*1e3)/1e3}else l_(n[r])&&(i[r]=n[r]);for(const r in i)i[r]!==0&&(t[s]+=r===s?i[r]:i[r]/this.matrix[s][r]);return q9(this.matrix,t),gd(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return gd(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=Y9(this.values);return gd(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of Mm)if(!t(this.values[i],e.values[i]))return!1;return!0}}const yg="Invalid Interval";function gae(a,e){return!a||!a.isValid?Cr.invalid("missing or invalid start"):!e||!e.isValid?Cr.invalid("missing or invalid end"):e<a?Cr.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${e.toISO()}`):null}class Cr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Ys("need to specify a reason the Interval is invalid");const i=e instanceof Cu?e:new Cu(e,t);if(Sr.throwOnInvalid)throw new Dee(i);return new Cr({invalid:i})}static fromDateTimes(e,t){const i=u0(e),n=u0(t),s=gae(i,n);return s??new Cr({start:i,end:n})}static after(e,t){const i=en.fromDurationLike(t),n=u0(e);return Cr.fromDateTimes(n,n.plus(i))}static before(e,t){const i=en.fromDurationLike(t),n=u0(e);return Cr.fromDateTimes(n.minus(i),n)}static fromISO(e,t){const[i,n]=(e||"").split("/",2);if(i&&n){let s,r;try{s=ii.fromISO(i,t),r=s.isValid}catch{r=!1}let l,u;try{l=ii.fromISO(n,t),u=l.isValid}catch{u=!1}if(r&&u)return Cr.fromDateTimes(s,l);if(r){const d=en.fromISO(n,t);if(d.isValid)return Cr.after(s,d)}else if(u){const d=en.fromISO(i,t);if(d.isValid)return Cr.before(l,d)}}return Cr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const i=this.start.startOf(e,t);let n;return t?.useLocaleWeeks?n=this.end.reconfigure({locale:i.locale}):n=this.end,n=n.startOf(e,t),Math.floor(n.diff(i,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Cr.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(u0).filter(r=>this.contains(r)).sort((r,l)=>r.toMillis()-l.toMillis()),i=[];let{s:n}=this,s=0;for(;n<this.e;){const r=t[s]||this.e,l=+r>+this.e?this.e:r;i.push(Cr.fromDateTimes(n,l)),n=l,s+=1}return i}splitBy(e){const t=en.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const r=[];for(;i<this.e;){const l=this.start.plus(t.mapUnits(u=>u*n));s=+l>+this.e?this.e:l,r.push(Cr.fromDateTimes(i,s)),i=s,n+=1}return r}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:Cr.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return Cr.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],r)=>s?s.overlaps(r)||s.abutsStart(r)?[n,s.union(r)]:[n.concat([s]),r]:[n,r],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const n=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),r=Array.prototype.concat(...s),l=r.sort((u,d)=>u.time-d.time);for(const u of l)i+=u.type==="s"?1:-1,i===1?t=u.time:(t&&+t!=+u.time&&n.push(Cr.fromDateTimes(t,u.time)),t=null);return Cr.merge(n)}difference(...e){return Cr.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:yg}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=xw,t={}){return this.isValid?Qs.create(this.s.loc.clone(t),e).formatInterval(this):yg}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:yg}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:yg}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:yg}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:yg}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):en.invalid(this.invalidReason)}mapEndpoints(e){return Cr.fromDateTimes(e(this.s),e(this.e))}}class m2{static hasDST(e=Sr.defaultZone){const t=ii.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Kd.isValidZone(e)}static normalizeZone(e){return Xh(e,Sr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||vn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||vn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||vn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||vn.create(t,i,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||vn.create(t,i,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:n=null}={}){return(n||vn.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:n=null}={}){return(n||vn.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return vn.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return vn.create(t,null,"gregory").eras(e)}static features(){return{relative:gW(),localeWeek:pW()}}}function K9(a,e){const t=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(a);return Math.floor(en.fromMillis(i).as("days"))}function pae(a,e,t){const i=[["years",(u,d)=>d.year-u.year],["quarters",(u,d)=>d.quarter-u.quarter+(d.year-u.year)*4],["months",(u,d)=>d.month-u.month+(d.year-u.year)*12],["weeks",(u,d)=>{const h=K9(u,d);return(h-h%7)/7}],["days",K9]],n={},s=a;let r,l;for(const[u,d]of i)t.indexOf(u)>=0&&(r=u,n[u]=d(a,e),l=s.plus(n),l>e?(n[u]--,a=s.plus(n),a>e&&(l=a,n[u]--,a=s.plus(n))):a=l);return[a,n,l,r]}function yae(a,e,t,i){let[n,s,r,l]=pae(a,e,t);const u=e-n,d=t.filter(g=>["hours","minutes","seconds","milliseconds"].indexOf(g)>=0);d.length===0&&(r<e&&(r=n.plus({[l]:1})),r!==n&&(s[l]=(s[l]||0)+u/(r-n)));const h=en.fromObject(s,i);return d.length>0?en.fromMillis(u,i).shiftTo(...d).plus(h):h}const bae="missing Intl.DateTimeFormat.formatToParts support";function dn(a,e=t=>t){return{regex:a,deser:([t])=>e(ute(t))}}const vae="",WW=`[ ${vae}]`,OW=new RegExp(WW,"g");function xae(a){return a.replace(/\./g,"\\.?").replace(OW,WW)}function j9(a){return a.replace(/\./g,"").replace(OW," ").toLowerCase()}function _u(a,e){return a===null?null:{regex:RegExp(a.map(xae).join("|")),deser:([t])=>a.findIndex(i=>j9(t)===j9(i))+e}}function $9(a,e){return{regex:a,deser:([,t,i])=>jC(t,i),groups:e}}function f2(a){return{regex:a,deser:([e])=>e}}function wae(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Cae(a,e){const t=hu(e),i=hu(e,"{2}"),n=hu(e,"{3}"),s=hu(e,"{4}"),r=hu(e,"{6}"),l=hu(e,"{1,2}"),u=hu(e,"{1,3}"),d=hu(e,"{1,6}"),h=hu(e,"{1,9}"),g=hu(e,"{2,4}"),y=hu(e,"{4,6}"),x=A=>({regex:RegExp(wae(A.val)),deser:([E])=>E,literal:!0}),I=(A=>{if(a.literal)return x(A);switch(A.val){case"G":return _u(e.eras("short"),0);case"GG":return _u(e.eras("long"),0);case"y":return dn(d);case"yy":return dn(g,d3);case"yyyy":return dn(s);case"yyyyy":return dn(y);case"yyyyyy":return dn(r);case"M":return dn(l);case"MM":return dn(i);case"MMM":return _u(e.months("short",!0),1);case"MMMM":return _u(e.months("long",!0),1);case"L":return dn(l);case"LL":return dn(i);case"LLL":return _u(e.months("short",!1),1);case"LLLL":return _u(e.months("long",!1),1);case"d":return dn(l);case"dd":return dn(i);case"o":return dn(u);case"ooo":return dn(n);case"HH":return dn(i);case"H":return dn(l);case"hh":return dn(i);case"h":return dn(l);case"mm":return dn(i);case"m":return dn(l);case"q":return dn(l);case"qq":return dn(i);case"s":return dn(l);case"ss":return dn(i);case"S":return dn(u);case"SSS":return dn(n);case"u":return f2(h);case"uu":return f2(l);case"uuu":return dn(t);case"a":return _u(e.meridiems(),0);case"kkkk":return dn(s);case"kk":return dn(g,d3);case"W":return dn(l);case"WW":return dn(i);case"E":case"c":return dn(t);case"EEE":return _u(e.weekdays("short",!1),1);case"EEEE":return _u(e.weekdays("long",!1),1);case"ccc":return _u(e.weekdays("short",!0),1);case"cccc":return _u(e.weekdays("long",!0),1);case"Z":case"ZZ":return $9(new RegExp(`([+-]${l.source})(?::(${i.source}))?`),2);case"ZZZ":return $9(new RegExp(`([+-]${l.source})(${i.source})?`),2);case"z":return f2(/[a-z_+-/]{1,256}?/i);case" ":return f2(/[^\S\n\r]/);default:return x(A)}})(a)||{invalidReason:bae};return I.token=a,I}const Iae={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Sae(a,e,t){const{type:i,value:n}=a;if(i==="literal"){const u=/^\s+$/.test(n);return{literal:!u,val:u?" ":n}}const s=e[i];let r=i;i==="hour"&&(e.hour12!=null?r=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?r="hour12":r="hour24":r=t.hour12?"hour12":"hour24");let l=Iae[r];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function Aae(a){return[`^${a.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,a]}function Tae(a,e,t){const i=a.match(e);if(i){const n={};let s=1;for(const r in t)if(Ap(t,r)){const l=t[r],u=l.groups?l.groups+1:1;!l.literal&&l.token&&(n[l.token.val[0]]=l.deser(i.slice(s,s+u))),s+=u}return[i,n]}else return[i,{}]}function Eae(a){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,i;return ni(a.z)||(t=Kd.create(a.z)),ni(a.Z)||(t||(t=new wo(a.Z)),i=a.Z),ni(a.q)||(a.M=(a.q-1)*3+1),ni(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),ni(a.u)||(a.S=PT(a.u)),[Object.keys(a).reduce((s,r)=>{const l=e(r);return l&&(s[l]=a[r]),s},{}),t,i]}let s4=null;function Mae(){return s4||(s4=ii.fromMillis(1555555555555)),s4}function Lae(a,e){if(a.literal)return a;const t=Qs.macroTokenToFormatOpts(a.val),i=DW(t,e);return i==null||i.includes(void 0)?a:i}function FW(a,e){return Array.prototype.concat(...a.map(t=>Lae(t,e)))}class NW{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=FW(Qs.parseFormat(t),e),this.units=this.tokens.map(i=>Cae(i,e)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,n]=Aae(this.units);this.regex=RegExp(i,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[t,i]=Tae(e,this.regex,this.handlers),[n,s,r]=i?Eae(i):[null,null,void 0];if(Ap(i,"a")&&Ap(i,"H"))throw new zg("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:i,result:n,zone:s,specificOffset:r}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function BW(a,e,t){return new NW(a,t).explainFromTokens(e)}function Rae(a,e,t){const{result:i,zone:n,specificOffset:s,invalidReason:r}=BW(a,e,t);return[i,n,s,r]}function DW(a,e){if(!a)return null;const i=Qs.create(e,a).dtFormatter(Mae()),n=i.formatToParts(),s=i.resolvedOptions();return n.map(r=>Sae(r,a,s))}const o4="Invalid DateTime",J9=864e13;function M0(a){return new Cu("unsupported zone",`the zone "${a.name}" is not supported`)}function l4(a){return a.weekData===null&&(a.weekData=ww(a.c)),a.weekData}function u4(a){return a.localWeekData===null&&(a.localWeekData=ww(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function _m(a,e){const t={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new ii({...t,...e,old:t})}function VW(a,e,t){let i=a-e*60*1e3;const n=t.offset(i);if(e===n)return[i,e];i-=(n-e)*60*1e3;const s=t.offset(i);return n===s?[i,n]:[a-Math.min(n,s)*60*1e3,Math.max(n,s)]}function g2(a,e){a+=e*60*1e3;const t=new Date(a);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function _x(a,e,t){return VW(KC(a),e,t)}function Q9(a,e){const t=a.o,i=a.c.year+Math.trunc(e.years),n=a.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...a.c,year:i,month:n,day:Math.min(a.c.day,Cw(i,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},r=en.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=KC(s);let[u,d]=VW(l,t,a.zone);return r!==0&&(u+=r,d=a.zone.offset(u)),{ts:u,o:d}}function bg(a,e,t,i,n,s){const{setZone:r,zone:l}=t;if(a&&Object.keys(a).length!==0||e){const u=e||l,d=ii.fromObject(a,{...t,zone:u,specificOffset:s});return r?d:d.setZone(l)}else return ii.invalid(new Cu("unparsable",`the input "${n}" can't be parsed as ${i}`))}function p2(a,e,t=!0){return a.isValid?Qs.create(vn.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(a,e):null}function c4(a,e,t){const i=a.c.year>9999||a.c.year<0;let n="";if(i&&a.c.year>=0&&(n+="+"),n+=Kr(a.c.year,i?6:4),t==="year")return n;if(e){if(n+="-",n+=Kr(a.c.month),t==="month")return n;n+="-"}else if(n+=Kr(a.c.month),t==="month")return n;return n+=Kr(a.c.day),n}function eR(a,e,t,i,n,s,r){let l=!t||a.c.millisecond!==0||a.c.second!==0,u="";switch(r){case"day":case"month":case"year":break;default:if(u+=Kr(a.c.hour),r==="hour")break;if(e){if(u+=":",u+=Kr(a.c.minute),r==="minute")break;l&&(u+=":",u+=Kr(a.c.second))}else{if(u+=Kr(a.c.minute),r==="minute")break;l&&(u+=Kr(a.c.second))}if(r==="second")break;l&&(!i||a.c.millisecond!==0)&&(u+=".",u+=Kr(a.c.millisecond,3))}return n&&(a.isOffsetFixed&&a.offset===0&&!s?u+="Z":a.o<0?(u+="-",u+=Kr(Math.trunc(-a.o/60)),u+=":",u+=Kr(Math.trunc(-a.o%60))):(u+="+",u+=Kr(Math.trunc(a.o/60)),u+=":",u+=Kr(Math.trunc(a.o%60)))),s&&(u+="["+a.zone.ianaName+"]"),u}const ZW={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},kae={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Pae={ordinal:1,hour:0,minute:0,second:0,millisecond:0},mx=["year","month","day","hour","minute","second","millisecond"],Gae=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Wae=["year","ordinal","hour","minute","second","millisecond"];function fx(a){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!e)throw new ZG(a);return e}function tR(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return fx(a)}}function Oae(a){if(L0===void 0&&(L0=Sr.now()),a.type!=="iana")return a.offset(L0);const e=a.name;let t=h3.get(e);return t===void 0&&(t=a.offset(L0),h3.set(e,t)),t}function aR(a,e){const t=Xh(e.zone,Sr.defaultZone);if(!t.isValid)return ii.invalid(M0(t));const i=vn.fromObject(e);let n,s;if(ni(a.year))n=Sr.now();else{for(const u of mx)ni(a[u])&&(a[u]=ZW[u]);const r=mW(a)||fW(a);if(r)return ii.invalid(r);const l=Oae(t);[n,s]=_x(a,l,t)}return new ii({ts:n,zone:t,loc:i,o:s})}function iR(a,e,t){const i=ni(t.round)?!0:t.round,n=ni(t.rounding)?"trunc":t.rounding,s=(l,u)=>(l=GT(l,i||t.calendary?0:2,t.calendary?"round":n),e.loc.clone(t).relFormatter(t).format(l,u)),r=l=>t.calendary?e.hasSame(a,l)?0:e.startOf(l).diff(a.startOf(l),l).get(l):e.diff(a,l).get(l);if(t.unit)return s(r(t.unit),t.unit);for(const l of t.units){const u=r(l);if(Math.abs(u)>=1)return s(u,l)}return s(a>e?-0:0,t.units[t.units.length-1])}function nR(a){let e={},t;return a.length>0&&typeof a[a.length-1]=="object"?(e=a[a.length-1],t=Array.from(a).slice(0,a.length-1)):t=Array.from(a),[e,t]}let L0;const h3=new Map;class ii{constructor(e){const t=e.zone||Sr.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new Cu("invalid input"):null)||(t.isValid?null:M0(t));this.ts=ni(e.ts)?Sr.now():e.ts;let n=null,s=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[n,s]=[e.old.c,e.old.o];else{const l=l_(e.o)&&!e.old?e.o:t.offset(this.ts);n=g2(this.ts,l),i=Number.isNaN(n.year)?new Cu("invalid input"):null,n=i?null:n,s=i?null:l}this._zone=t,this.loc=e.loc||vn.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new ii({})}static local(){const[e,t]=nR(arguments),[i,n,s,r,l,u,d]=t;return aR({year:i,month:n,day:s,hour:r,minute:l,second:u,millisecond:d},e)}static utc(){const[e,t]=nR(arguments),[i,n,s,r,l,u,d]=t;return e.zone=wo.utcInstance,aR({year:i,month:n,day:s,hour:r,minute:l,second:u,millisecond:d},e)}static fromJSDate(e,t={}){const i=mte(e)?e.valueOf():NaN;if(Number.isNaN(i))return ii.invalid("invalid input");const n=Xh(t.zone,Sr.defaultZone);return n.isValid?new ii({ts:i,zone:n,loc:vn.fromObject(t)}):ii.invalid(M0(n))}static fromMillis(e,t={}){if(l_(e))return e<-J9||e>J9?ii.invalid("Timestamp out of range"):new ii({ts:e,zone:Xh(t.zone,Sr.defaultZone),loc:vn.fromObject(t)});throw new Ys(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(l_(e))return new ii({ts:e*1e3,zone:Xh(t.zone,Sr.defaultZone),loc:vn.fromObject(t)});throw new Ys("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=Xh(t.zone,Sr.defaultZone);if(!i.isValid)return ii.invalid(M0(i));const n=vn.fromObject(t),s=Iw(e,tR),{minDaysInFirstWeek:r,startOfWeek:l}=V9(s,n),u=Sr.now(),d=ni(t.specificOffset)?i.offset(u):t.specificOffset,h=!ni(s.ordinal),g=!ni(s.year),y=!ni(s.month)||!ni(s.day),x=g||y,C=s.weekYear||s.weekNumber;if((x||h)&&C)throw new zg("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&h)throw new zg("Can't mix ordinal dates with month/day");const I=C||s.weekday&&!x;let A,E,L=g2(u,d);I?(A=Gae,E=kae,L=ww(L,r,l)):h?(A=Wae,E=Pae,L=r4(L)):(A=mx,E=ZW);let G=!1;for(const ce of A){const me=s[ce];ni(me)?G?s[ce]=E[ce]:s[ce]=L[ce]:G=!0}const F=I?dte(s,r,l):h?hte(s):mW(s),B=F||fW(s);if(B)return ii.invalid(B);const Z=I?B9(s,r,l):h?D9(s):s,[Y,$]=_x(Z,d,i),te=new ii({ts:Y,zone:i,o:$,loc:n});return s.weekday&&x&&e.weekday!==te.weekday?ii.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${te.toISO()}`):te.isValid?te:ii.invalid(te.invalid)}static fromISO(e,t={}){const[i,n]=iae(e);return bg(i,n,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,n]=nae(e);return bg(i,n,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,n]=rae(e);return bg(i,n,t,"HTTP",t)}static fromFormat(e,t,i={}){if(ni(e)||ni(t))throw new Ys("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,r=vn.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[l,u,d,h]=Rae(r,e,t);return h?ii.invalid(h):bg(l,u,i,`format ${t}`,e,d)}static fromString(e,t,i={}){return ii.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,n]=hae(e);return bg(i,n,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Ys("need to specify a reason the DateTime is invalid");const i=e instanceof Cu?e:new Cu(e,t);if(Sr.throwOnInvalid)throw new Bee(i);return new ii({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=DW(e,vn.fromObject(t));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(e,t={}){return FW(Qs.parseFormat(e),vn.fromObject(t)).map(n=>n.val).join("")}static resetCache(){L0=void 0,h3.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?l4(this).weekYear:NaN}get weekNumber(){return this.isValid?l4(this).weekNumber:NaN}get weekday(){return this.isValid?l4(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?u4(this).weekday:NaN}get localWeekNumber(){return this.isValid?u4(this).weekNumber:NaN}get localWeekYear(){return this.isValid?u4(this).weekYear:NaN}get ordinal(){return this.isValid?r4(this.c).ordinal:NaN}get monthShort(){return this.isValid?m2.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?m2.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?m2.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?m2.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=KC(this.c),n=this.zone.offset(i-e),s=this.zone.offset(i+e),r=this.zone.offset(i-n*t),l=this.zone.offset(i-s*t);if(r===l)return[this];const u=i-r*t,d=i-l*t,h=g2(u,r),g=g2(d,l);return h.hour===g.hour&&h.minute===g.minute&&h.second===g.second&&h.millisecond===g.millisecond?[_m(this,{ts:u}),_m(this,{ts:d})]:[this]}get isInLeapYear(){return Ib(this.year)}get daysInMonth(){return Cw(this.year,this.month)}get daysInYear(){return this.isValid?sp(this.year):NaN}get weeksInWeekYear(){return this.isValid?Z1(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Z1(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:n}=Qs.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:n}}toUTC(e=0,t={}){return this.setZone(wo.instance(e),t)}toLocal(){return this.setZone(Sr.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=Xh(e,Sr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(t||i){const s=e.offset(this.ts),r=this.toObject();[n]=_x(r,s,e)}return _m(this,{ts:n,zone:e})}else return ii.invalid(M0(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){const n=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return _m(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Iw(e,tR),{minDaysInFirstWeek:i,startOfWeek:n}=V9(t,this.loc),s=!ni(t.weekYear)||!ni(t.weekNumber)||!ni(t.weekday),r=!ni(t.ordinal),l=!ni(t.year),u=!ni(t.month)||!ni(t.day),d=l||u,h=t.weekYear||t.weekNumber;if((d||r)&&h)throw new zg("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&r)throw new zg("Can't mix ordinal dates with month/day");let g;s?g=B9({...ww(this.c,i,n),...t},i,n):ni(t.ordinal)?(g={...this.toObject(),...t},ni(t.day)&&(g.day=Math.min(Cw(g.year,g.month),g.day))):g=D9({...r4(this.c),...t});const[y,x]=_x(g,this.o,this.zone);return _m(this,{ts:y,o:x})}plus(e){if(!this.isValid)return this;const t=en.fromDurationLike(e);return _m(this,Q9(this,t))}minus(e){if(!this.isValid)return this;const t=en.fromDurationLike(e).negate();return _m(this,Q9(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const i={},n=en.normalizeUnit(e);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(n==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:r}=this;r<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Qs.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):o4}toLocaleString(e=xw,t={}){return this.isValid?Qs.create(this.loc.clone(t),e).formatDateTime(this):o4}toLocaleParts(e={}){return this.isValid?Qs.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1,precision:r="milliseconds"}={}){if(!this.isValid)return null;r=fx(r);const l=e==="extended";let u=c4(this,l,r);return mx.indexOf(r)>=3&&(u+="T"),u+=eR(this,l,t,i,n,s,r),u}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?c4(this,e==="extended",fx(t)):null}toISOWeekDate(){return p2(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:r="extended",precision:l="milliseconds"}={}){return this.isValid?(l=fx(l),(n&&mx.indexOf(l)>=3?"T":"")+eR(this,r==="extended",t,e,i,s,l)):null}toRFC2822(){return p2(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return p2(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?c4(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(t||e)&&(i&&(n+=" "),t?n+="z":e&&(n+="ZZ")),p2(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():o4}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return en.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=fte(t).map(en.normalizeUnit),r=e.valueOf()>this.valueOf(),l=r?this:e,u=r?e:this,d=yae(l,u,s,n);return r?d.negate():d}diffNow(e="milliseconds",t={}){return this.diff(ii.now(),e,t)}until(e){return this.isValid?Cr.fromDateTimes(this,e):this}hasSame(e,t,i){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,i)<=n&&n<=s.endOf(t,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||ii.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),iR(t,this.plus(i),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?iR(e.base||ii.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ii.isDateTime))throw new Ys("min requires all arguments be DateTimes");return Z9(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(ii.isDateTime))throw new Ys("max requires all arguments be DateTimes");return Z9(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:n=null,numberingSystem:s=null}=i,r=vn.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return BW(r,e,t)}static fromStringExplain(e,t,i={}){return ii.fromFormatExplain(e,t,i)}static buildFormatParser(e,t={}){const{locale:i=null,numberingSystem:n=null}=t,s=vn.fromOpts({locale:i,numberingSystem:n,defaultToEN:!0});return new NW(s,e)}static fromFormatParser(e,t,i={}){if(ni(e)||ni(t))throw new Ys("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=i,r=vn.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!r.equals(t.locale))throw new Ys(`fromFormatParser called with a locale of ${r}, but the format parser was created for ${t.locale}`);const{result:l,zone:u,specificOffset:d,invalidReason:h}=t.explainFromTokens(e);return h?ii.invalid(h):bg(l,u,i,`format ${t.format}`,e,d)}static get DATE_SHORT(){return xw}static get DATE_MED(){return zG}static get DATE_MED_WITH_WEEKDAY(){return Zee}static get DATE_FULL(){return UG}static get DATE_HUGE(){return HG}static get TIME_SIMPLE(){return XG}static get TIME_WITH_SECONDS(){return qG}static get TIME_WITH_SHORT_OFFSET(){return YG}static get TIME_WITH_LONG_OFFSET(){return KG}static get TIME_24_SIMPLE(){return jG}static get TIME_24_WITH_SECONDS(){return $G}static get TIME_24_WITH_SHORT_OFFSET(){return JG}static get TIME_24_WITH_LONG_OFFSET(){return QG}static get DATETIME_SHORT(){return eW}static get DATETIME_SHORT_WITH_SECONDS(){return tW}static get DATETIME_MED(){return aW}static get DATETIME_MED_WITH_SECONDS(){return iW}static get DATETIME_MED_WITH_WEEKDAY(){return zee}static get DATETIME_FULL(){return nW}static get DATETIME_FULL_WITH_SECONDS(){return rW}static get DATETIME_HUGE(){return sW}static get DATETIME_HUGE_WITH_SECONDS(){return oW}}function u0(a){if(ii.isDateTime(a))return a;if(a&&a.valueOf&&l_(a.valueOf()))return ii.fromJSDate(a);if(a&&typeof a=="object")return ii.fromObject(a);throw new Ys(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const zW=[0,1,0,0];function rR(a,e="second",t,i){const{t:n}=Ct(),s=new Date(a).toISOString(),r={year:n("yyyy"),month:n("M/yyyy"),day:n("M/d/yyyy"),second:n("M/d/yyyy HH:mm:ss")},u=(t?{year:"yyyy",month:"yyyy-MM",day:"yyyy-MM-dd",second:void 0}:r)[e];return u?ii.fromISO(s).toFormat(`${i?"UTC:":""}${u}`):s.replace(/\.\d{3}/,"")}function _3(a){return new Date(a).toISOString().split(".")[0]+"Z"}function d4(a){return ii.fromISO(a).toFormat("yyyy-MM-dd")}function Fae(a,e){return a<=e.minValue?e.minValue:a>=e.maxValue?e.maxValue:e.timeValueList?Nae(a,e):Bae(a,e)}function Nae(a,e){const t=e.timeValueList??[];let i,n=0,s=t.length-1;for(;s-n>1;)i=Math.floor((n+s)/2),t[i]>=a?s=i:n=i;const r=Math.abs(t[n]-a),l=Math.abs(t[s]-a);return t[r<l?n:s]}function Bae(a,e){const t=e.timeInterval??zW,i=new Date(a).getTime(),n=new Date(e.minValue),s=e.maxValue;let r=e.minValue,l=Math.abs(i-r);for(let u=1;;u++){const d=new Date(n.getTime());if(d.setFullYear(n.getFullYear()+u*t[0]),d.setMonth(n.getMonth()+u*t[1],n.getDate()+u*t[2]),d.setSeconds(n.getSeconds()+u*t[3]),d.getTime()>s)break;const h=Math.abs(i-d.getTime());if(h<=l)r=d.getTime(),l=h;else break}return r}const Vi=Ao("map",()=>{const a=no(),e=Ye({}),t=Ai([]),i=Ai([]),n=Ye(!1),s=Ye(!1),r=Ye(void 0),l=Ye(void 0),u=Ye(void 0),d=Ye(void 0),h=Ye(void 0),g=Ye(void 0),y=Ye(void 0);function x($){r.value=$}function C(...$){t.value=[...new Set([...t.value,...$])]}function I(...$){i.value=[...new Set([...i.value,...$])]}function A(...$){t.value=t.value.filter(te=>$.indexOf(te.id)===-1),i.value=i.value.filter(te=>$.indexOf(te.id)===-1)}function E(){t.value=[]}function L($){return!!t.value?.find(te=>te.id===$)}function G($,te=!1){const ce=te?i:t;ce.value=[...ce.value?.sort((me,X)=>$.indexOf(me.id)-$.indexOf(X.id))||[]]}function F($,te){t.value=t.value.map(ce=>ce.id===$?{...ce,opacity:te,previousOpacity:ce.opacity}:ce)}function B($,te,ce){t.value=t.value.map(me=>{if(me.id===$){const X={...me,currentTimeMinValue:te?_3(te):void 0,currentTimeMaxValue:ce?_3(ce):void 0};return X.type==="WMTS"&&(X.name=a.getLayerCurrentLabel(X)),X}return me})}function Z($){n.value=$}function Y($){s.value=$}return{map:e,layers:t,layers3d:i,is3dActive:n,is3dMesh:s,bgLayer:r,minZoom:l,maxZoom:u,x:d,y:h,zoom:g,rotation:y,addLayers:C,add3dLayers:I,removeLayers:A,removeAllLayers:E,reorderLayers:G,setLayerOpacity:F,setLayerTime:B,setBgLayer:x,setIs3dActive:Z,setIs3dMesh:Y,hasLayer:L}});function Al(){function a(h,g){return t(h,void 0,g)}function e(h,g){return t(void 0,h,g)}function t(h,g,y){const{themes:x}=Bn();if(y=y||x?.find(C=>t(h,g,C)),h&&y?.id===+h||g&&y?.name===g)return y;if(y?.children)for(const C of y.children){const I=t(h,g,C);if(I)return I}}function i(h){const{themes:g}=Bn(),y=[];function x(C,I){C.id===+h&&y.push(I),C.children&&C.children.forEach(A=>x(A,I))}return g&&Array.isArray(g)&&g.forEach(C=>{C?.metadata?.display_in_switcher&&x(C,C.name)}),[...new Set(y)]}function n(h){const{layerTrees_3d:g}=Bn();return t(h,void 0,g)}function s(h){const{bgLayers:g}=Bn();return g.find(y=>y.id===h)}function r(h){const{bgLayers:g}=Bn();return g.find(y=>y.name===h)}function l(h){return s(+h)||a(+h)||n(+h)}function u(h){const{setTheme:g}=Bn();g(h),d(h)}function d(h){const{maxZoom:g}=xt(Vi()),y=e(h),{resolutions:x}=y?.metadata||{};g.value=x?x.length+7:hG}return{findById:a,findByName:e,find3dLayerById:n,findBgLayerById:s,findBgLayerByName:r,findAnyLayerById:l,setTheme:u,findThemeNamesByLayerId:i}}var Ec=(a=>(a.WMS="WMS",a.WMTS="WMTS",a))(Ec||{});let Dae=0;function Vae(){return Dae++}var NT=Object.defineProperty,Zae=Object.getOwnPropertyDescriptor,zae=Object.getOwnPropertyNames,Uae=Object.prototype.hasOwnProperty,Hae=(a,e)=>{for(var t in e)NT(a,t,{get:e[t],enumerable:!0})},Xae=(a,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of zae(e))!Uae.call(a,n)&&n!==t&&NT(a,n,{get:()=>e[n],enumerable:!(i=Zae(e,n))||i.enumerable});return a},qae=a=>Xae(NT({},"__esModule",{value:!0}),a),UW={};Hae(UW,{XmlCdata:()=>YW,XmlComment:()=>KW,XmlDeclaration:()=>jW,XmlDocument:()=>$W,XmlDocumentType:()=>JW,XmlElement:()=>JC,XmlError:()=>QW,XmlNode:()=>rn,XmlProcessingInstruction:()=>m3,XmlText:()=>DT,parseXml:()=>nie});qae(UW);var mm="",Yae=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Kae=class{constructor(a){if(this.k=this.q(a,!0),this.d=0,this.length=a.length,this.n=this.k!==this.length,this.m=a,this.n){let e=[];for(let t=0,i=0;i<this.k;++i)e[i]=t,t+=a.codePointAt(t)>65535?2:1;this.y=e}}get z(){return this.d>=this.k}q(a,e=this.n){return e?a.replace(Yae,"_").length:a.length}g(a=1){this.d=Math.min(this.k,this.d+a)}i(a=this.d){var e;return this.n?(e=this.y[a])!=null?e:1/0:a}F(a=1){let e=this.h(a);return this.g(a),e}G(a){if(!a.sticky)throw new Error('`regex` must have a sticky flag ("y")');a.lastIndex=this.i();let e=a.exec(this.m);if(e===null||e.length===0)return mm;let t=e[0];return this.g(this.q(t)),t}v(a){let e,t=mm;for(;(e=this.h())&&a(e);)t+=e,this.g();return t}Q(a){if(this.b(a))return a;if(this.n){let{length:e}=a,t=this.q(a);if(t!==e&&a===this.h(t))return this.g(t),a}return mm}b(a){let{length:e}=a;return this.h(e)===a?(this.g(e),a):mm}A(a){let e=this.m.slice(this.i()),t=e.search(a);if(t<=0)return mm;let i=e.slice(0,t);return this.g(this.q(i)),i}t(a){let{m:e}=this,t=this.i(),i=e.indexOf(a,t);if(i<=0)return mm;let n=e.slice(t,i);return this.g(this.q(n)),n}h(a=1){let{d:e,n:t,m:i}=this;return t?e>=this.k?mm:i.slice(this.i(e),this.i(e+a)):i.slice(e,e+a)}o(a=0){this.d=a>=0?Math.min(this.k,a):Math.max(0,this.d+a)}},jae=/[^"&<]+/y,$ae=/[^'&<]+/y,Jae=/\r\n|[\n\r\t]/g,Qae=/<|&|]]>/,eie=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));function HW(a){let e=BT(a);return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57||e===45||e===46||e===183||e>=768&&e<=879||e>=8255&&e<=8256||XW(a,e)}function XW(a,e=BT(a)){return e>=97&&e<=122||e>=65&&e<=90||e===58||e===95||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function tie(a){return a==="#"||HW(a)}function aie(a){let e=BT(a);return e===32||e===9||e===10||e===13}function sR(a){return a===9||a===10||a===13||a>=32&&a<=55295||a>=57344&&a<=65533||a>=65536&&a<=1114111}function BT(a){return a.codePointAt(0)||-1}var qW=class{constructor(){this.parent=null,this.start=-1,this.end=-1}get document(){var a,e;return(e=(a=this.parent)==null?void 0:a.document)!=null?e:null}get isRootNode(){return this.parent!==null&&this.parent===this.document&&this.type===qW.TYPE_ELEMENT}get preserveWhitespace(){var a;return!!((a=this.parent)!=null&&a.preserveWhitespace)}get type(){return""}toJSON(){let a={type:this.type};return this.isRootNode&&(a.isRootNode=!0),this.preserveWhitespace&&(a.preserveWhitespace=!0),this.start!==-1&&(a.start=this.start,a.end=this.end),a}},rn=qW;rn.TYPE_CDATA="cdata";rn.TYPE_COMMENT="comment";rn.TYPE_DOCUMENT="document";rn.TYPE_DOCUMENT_TYPE="doctype";rn.TYPE_ELEMENT="element";rn.TYPE_PROCESSING_INSTRUCTION="pi";rn.TYPE_TEXT="text";rn.TYPE_XML_DECLARATION="xmldecl";var DT=class extends rn{constructor(a=""){super(),this.text=a}get type(){return rn.TYPE_TEXT}toJSON(){return Object.assign(rn.prototype.toJSON.call(this),{text:this.text})}},YW=class extends DT{get type(){return rn.TYPE_CDATA}},KW=class extends rn{constructor(a=""){super(),this.content=a}get type(){return rn.TYPE_COMMENT}toJSON(){return Object.assign(rn.prototype.toJSON.call(this),{content:this.content})}},jW=class extends rn{constructor(a,e,t){super(),this.version=a,this.encoding=e??null,this.standalone=t??null}get type(){return rn.TYPE_XML_DECLARATION}toJSON(){let a=rn.prototype.toJSON.call(this);a.version=this.version;for(let e of["encoding","standalone"])this[e]!==null&&(a[e]=this[e]);return a}},JC=class extends rn{constructor(a,e=Object.create(null),t=[]){super(),this.name=a,this.attributes=e,this.children=t}get isEmpty(){return this.children.length===0}get preserveWhitespace(){let a=this;for(;a instanceof JC;){if("xml:space"in a.attributes)return a.attributes["xml:space"]==="preserve";a=a.parent}return!1}get text(){return this.children.map(a=>"text"in a?a.text:"").join("")}get type(){return rn.TYPE_ELEMENT}toJSON(){return Object.assign(rn.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(a=>a.toJSON())})}},$W=class extends rn{constructor(a=[]){super(),this.children=a}get document(){return this}get root(){for(let a of this.children)if(a instanceof JC)return a;return null}get text(){return this.children.map(a=>"text"in a?a.text:"").join("")}get type(){return rn.TYPE_DOCUMENT}toJSON(){return Object.assign(rn.prototype.toJSON.call(this),{children:this.children.map(a=>a.toJSON())})}},JW=class extends rn{constructor(a,e,t,i){super(),this.name=a,this.publicId=e??null,this.systemId=t??null,this.internalSubset=i??null}get type(){return rn.TYPE_DOCUMENT_TYPE}toJSON(){let a=rn.prototype.toJSON.call(this);a.name=this.name;for(let e of["publicId","systemId","internalSubset"])this[e]!==null&&(a[e]=this[e]);return a}},QW=class extends Error{constructor(a,e,t){let i=1,n="",s=1;for(let u=0;u<e;++u){let d=t[u];d===`
`?(i=1,n="",s+=1):(i+=1,n+=d)}let r=t.indexOf(`
`,e);n+=r===-1?t.slice(e):t.slice(e,r);let l=0;n.length>50&&(i<40?n=n.slice(0,50):(l=i-20,n=n.slice(l,i+30))),super(`${a} (line ${s}, column ${i})
  ${n}
`+" ".repeat(i-l+1)+`^
`),this.column=i,this.excerpt=n,this.line=s,this.name="XmlError",this.pos=e}},m3=class extends rn{constructor(a,e=""){super(),this.name=a,this.content=e}get type(){return rn.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(rn.prototype.toJSON.call(this),{name:this.name,content:this.content})}},h4="",iie=class{constructor(a,e={}){let t=this.document=new $W,i=this.c=new Kae(a);if(this.l=t,this.f=e,this.f.includeOffsets&&(t.start=0,t.end=a.length),i.b("\uFEFF"),this.H(),!this.B())throw this.a("Root element is missing or invalid");for(;this.w(););if(!i.z)throw this.a("Extra content at the end of the document")}j(a,e){return a.parent=this.l,this.f.includeOffsets&&(a.start=this.c.i(e),a.end=this.c.i()),this.l.children.push(a),!0}x(a,e){let{children:t}=this.l,{length:i}=t;if(a=y2(a),i>0){let n=t[i-1];if(n?.type===rn.TYPE_TEXT){let s=n;return s.text+=a,this.f.includeOffsets&&(s.end=this.c.i()),!0}}return this.j(new DT(a),e)}I(){let a=Object.create(null);for(;this.e();){let e=this.r();if(!e)break;let t=this.u()&&this.J();if(t===!1)throw this.a("Attribute value expected");if(e in a)throw this.a(`Duplicate attribute: ${e}`);if(e==="xml:space"&&t!=="default"&&t!=="preserve")throw this.a('Value of the `xml:space` attribute must be "default" or "preserve"');a[e]=t}if(this.f.sortAttributes){let e=Object.keys(a).sort(),t=Object.create(null);for(let i=0;i<e.length;++i){let n=e[i];t[n]=a[n]}a=t}return a}J(){let{c:a}=this,e=a.h();if(e!=='"'&&e!=="'")return!1;a.g();let t,i=!1,n=h4,s=e==='"'?jae:$ae;e:for(;!a.z;)switch(t=a.G(s),t&&(this.p(t),n+=t.replace(Jae," ")),a.h()){case e:i=!0;break e;case"&":n+=this.C();continue;case"<":throw this.a("Unescaped `<` is not allowed in an attribute value");case h4:break e}if(!i)throw this.a("Unclosed attribute");return a.g(),n}K(){let{c:a}=this,e=a.d;if(!a.b("<![CDATA["))return!1;let t=a.t("]]>");if(this.p(t),!a.b("]]>"))throw this.a("Unclosed CDATA section");return this.f.preserveCdata?this.j(new YW(y2(t)),e):this.x(t,e)}L(){let{c:a}=this,e=a.d,t=a.A(Qae);if(!t)return!1;if(this.p(t),a.h(3)==="]]>")throw this.a("Element content may not contain the CDATA section close delimiter `]]>`");return this.x(t,e)}D(){let{c:a}=this,e=a.d;if(!a.b("<!--"))return!1;let t=a.t("--");if(this.p(t),!a.b("-->"))throw a.h(2)==="--"?this.a("The string `--` isn't allowed inside a comment"):this.a("Unclosed comment");return this.f.preserveComments?this.j(new KW(y2(t)),e):!0}M(){let a=this.c.d,e=this.C();return e?this.x(e,a):!1}N(){let{c:a}=this,e=a.d;if(!a.b("<!DOCTYPE"))return!1;let t=this.e()&&this.r();if(!t)throw this.a("Expected a name");let i,n;if(this.e()){if(a.b("PUBLIC")){if(i=this.e()&&this.O(),i===!1)throw this.a("Expected a public identifier");this.e()}if(i!==void 0||a.b("SYSTEM")){if(this.e(),n=this.s(),n===!1)throw this.a("Expected a system identifier");this.e()}}let s;if(a.b("[")){if(s=a.A(/\][\x20\t\r\n]*>/),!a.b("]"))throw this.a("Unclosed internal subset");this.e()}if(!a.b(">"))throw this.a("Unclosed doctype declaration");return this.f.preserveDocumentType?this.j(new JW(t,i,n,s),e):!0}B(){let{c:a}=this,e=a.d;if(!a.b("<"))return!1;let t=this.r();if(!t)return a.o(e),!1;let i=this.I(),n=!!a.b("/>"),s=new JC(t,i);if(s.parent=this.l,!n){if(!a.b(">"))throw this.a(`Unclosed start tag for element \`${t}\``);this.l=s;do this.L();while(this.B()||this.M()||this.K()||this.E()||this.D());let r=a.d,l;if(!a.b("</")||!(l=this.r())||l!==t)throw a.o(r),this.a(`Missing end tag for element ${t}`);if(this.e(),!a.b(">"))throw this.a(`Unclosed end tag for element ${t}`);this.l=s.parent}return this.j(s,e)}u(){return this.e(),this.c.b("=")?(this.e(),!0):!1}w(){return this.D()||this.E()||this.e()}r(){return XW(this.c.h())?this.c.v(HW):h4}E(){let{c:a}=this,e=a.d;if(!a.b("<?"))return!1;let t=this.r();if(t){if(t.toLowerCase()==="xml")throw a.o(e),this.a("XML declaration isn't allowed here")}else throw this.a("Invalid processing instruction");if(!this.e()){if(a.b("?>"))return this.j(new m3(t),e);throw this.a("Whitespace is required after a processing instruction name")}let i=a.t("?>");if(this.p(i),!a.b("?>"))throw this.a("Unterminated processing instruction");return this.j(new m3(t,y2(i)),e)}H(){let{c:a}=this,e=a.d;for(this.P();this.w(););if(this.N())for(;this.w(););return e<a.d}O(){let a=this.c.d,e=this.s();if(e!==!1&&!/^[-\x20\r\na-zA-Z0-9'()+,./:=?;!*#@$_%]*$/.test(e))throw this.c.o(a),this.a("Invalid character in public identifier");return e}C(){let{c:a}=this;if(!a.b("&"))return!1;let e=a.v(tie);if(a.F()!==";")throw this.a("Unterminated reference (a reference must end with `;`)");let t;if(e[0]==="#"){let i=e[1]==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);if(isNaN(i))throw this.a("Invalid character reference");if(!sR(i))throw this.a("Character reference resolves to an invalid character");t=String.fromCodePoint(i)}else if(t=eie[e],t===void 0){let{ignoreUndefinedEntities:i,resolveUndefinedEntity:n}=this.f,s=`&${e};`;if(n){let r=n(s);if(r!=null){let l=typeof r;if(l!=="string")throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${l}`);return r}}if(i)return s;throw a.o(-s.length),this.a(`Named entity isn't defined: ${s}`)}return t}s(){let{c:a}=this,e=a.b('"')||a.b("'");if(!e)return!1;let t=a.t(e);if(this.p(t),!a.b(e))throw this.a("Missing end quote");return t}e(){return!!this.c.v(aie)}P(){let{c:a}=this,e=a.d;if(!a.b("<?xml"))return!1;if(!this.e())throw this.a("Invalid XML declaration");let t=!!a.b("version")&&this.u()&&this.s();if(t===!1)throw this.a("XML version is missing or invalid");if(!/^1\.[0-9]+$/.test(t))throw this.a("Invalid character in version number");let i,n;if(this.e()&&(i=!!a.b("encoding")&&this.u()&&this.s(),i&&this.e(),n=!!a.b("standalone")&&this.u()&&this.s(),n)){if(n!=="yes"&&n!=="no")throw this.a('Only "yes" and "no" are permitted as values of `standalone`');this.e()}if(!a.b("?>"))throw this.a("Invalid or unclosed XML declaration");return this.f.preserveXmlDeclaration?this.j(new jW(t,i||void 0,n||void 0),e):!0}a(a){let{c:e}=this;return new QW(a,e.d,e.m)}p(a){let{length:e}=a;for(let t=0;t<e;++t){let i=a.codePointAt(t);if(!sR(i))throw this.c.o(-([...a].length-t)),this.a("Invalid character");i>65535&&(t+=1)}}};function y2(a){let e=0;for(;(e=a.indexOf("\r",e))!==-1;)a=a[e+1]===`
`?a.slice(0,e)+a.slice(e+1):a.slice(0,e)+`
`+a.slice(e+1);return a}function nie(a,e){return new iie(a,e).document}let rie=class extends Error{constructor(e,t,i){super(e),this.httpStatus=t,this.isCrossOriginRelated=i,this.name="EndpointError"}},sie=class extends Error{constructor(e,t,i,n,s){super(e),this.requestUrl=t,this.code=i,this.locator=n,this.response=s,this.name="ServiceExceptionError"}};function oie(a){if(a.name==="ServiceExceptionError"){const t=new sie(a.message,a.requestUrl,a.code,a.locator,a.response);return t.stack=a.stack,t}if(a.name==="EndpointError"){const t=new rie(a.message,a.httpStatus,a.isCrossOriginRelated);return t.stack=a.stack,t}const e=new Error(a.message);return e.stack=a.stack,e}const _4=new EventTarget;function lie(a,e,t){return new Promise((i,n)=>{const s=Vae(),r={requestId:s,taskName:a,params:t};e===null?_4.dispatchEvent(new CustomEvent("ogc-client.request",{detail:r})):e.postMessage(r);const l=h=>{h.requestId===s&&(e===null?_4.removeEventListener("ogc-client.response",u):e.removeEventListener("message",d),"error"in h?n(oie(h.error)):i(h.response))},u=h=>l(h.detail),d=h=>l(h.data);e===null?_4.addEventListener("ogc-client.response",u):e.addEventListener("message",d)})}const eO="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICAvKiEgQHJncm92ZS9wYXJzZS14bWwgdjQuMS4wIHwgSVNDIExpY2Vuc2UgfCBDb3B5cmlnaHQgUnlhbiBHcm92ZSAqLwogIHZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7CiAgdmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogIHZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzOwogIHZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwogIHZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4gewogICAgZm9yICh2YXIgbmFtZSBpbiBhbGwpCiAgICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7CiAgfTsKICB2YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4gewogICAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09ICJvYmplY3QiIHx8IHR5cGVvZiBmcm9tID09PSAiZnVuY3Rpb24iKSB7CiAgICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSkKICAgICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KQogICAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pOwogICAgfQogICAgcmV0dXJuIHRvOwogIH07CiAgdmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpOwogIHZhciBzcmNfZXhwb3J0cyA9IHt9OwogIF9fZXhwb3J0KHNyY19leHBvcnRzLCB7CiAgICBYbWxDZGF0YTogKCkgPT4gWG1sQ2RhdGEsCiAgICBYbWxDb21tZW50OiAoKSA9PiBYbWxDb21tZW50LAogICAgWG1sRGVjbGFyYXRpb246ICgpID0+IFhtbERlY2xhcmF0aW9uLAogICAgWG1sRG9jdW1lbnQ6ICgpID0+IFhtbERvY3VtZW50LAogICAgWG1sRG9jdW1lbnRUeXBlOiAoKSA9PiBYbWxEb2N1bWVudFR5cGUsCiAgICBYbWxFbGVtZW50OiAoKSA9PiBYbWxFbGVtZW50LAogICAgWG1sRXJyb3I6ICgpID0+IFhtbEVycm9yLAogICAgWG1sTm9kZTogKCkgPT4gWG1sTm9kZSwKICAgIFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbjogKCkgPT4gWG1sUHJvY2Vzc2luZ0luc3RydWN0aW9uLAogICAgWG1sVGV4dDogKCkgPT4gWG1sVGV4dCwKICAgIHBhcnNlWG1sOiAoKSA9PiBwYXJzZVhtbAogIH0pOwogIHZhciBicm93c2VyID0gX190b0NvbW1vbkpTKHNyY19leHBvcnRzKTsKICB2YXIgZW1wdHlTdHJpbmcgPSAiIjsKICB2YXIgc3Vycm9nYXRlUGFpciA9IC9bXHVEODAwLVx1REJGRl1bXHVEQzAwLVx1REZGRl0vZzsKICB2YXIgU3RyaW5nU2Nhbm5lciA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKHN0cmluZykgewogICAgICB0aGlzLmsgPSB0aGlzLnEoc3RyaW5nLCB0cnVlKTsKICAgICAgdGhpcy5kID0gMDsKICAgICAgdGhpcy5sZW5ndGggPSBzdHJpbmcubGVuZ3RoOwogICAgICB0aGlzLm4gPSB0aGlzLmsgIT09IHRoaXMubGVuZ3RoOwogICAgICB0aGlzLm0gPSBzdHJpbmc7CiAgICAgIGlmICh0aGlzLm4pIHsKICAgICAgICBsZXQgY2hhcnNUb0J5dGVzID0gW107CiAgICAgICAgZm9yIChsZXQgYnl0ZUluZGV4ID0gMCwgY2hhckluZGV4ID0gMDsgY2hhckluZGV4IDwgdGhpcy5rOyArK2NoYXJJbmRleCkgewogICAgICAgICAgY2hhcnNUb0J5dGVzW2NoYXJJbmRleF0gPSBieXRlSW5kZXg7CiAgICAgICAgICBieXRlSW5kZXggKz0gc3RyaW5nLmNvZGVQb2ludEF0KGJ5dGVJbmRleCkgPiA2NTUzNSA/IDIgOiAxOwogICAgICAgIH0KICAgICAgICB0aGlzLnkgPSBjaGFyc1RvQnl0ZXM7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogV2hldGhlciB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaW5kZXggaXMgYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQgc3RyaW5nLgogICAgICovCiAgICBnZXQgeigpIHsKICAgICAgcmV0dXJuIHRoaXMuZCA+PSB0aGlzLms7CiAgICB9CiAgICAvLyAtLSBQcm90ZWN0ZWQgTWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgaW4gdGhlIGdpdmVuIHN0cmluZywgd2hpY2ggbWF5IGRpZmZlciBmcm9tCiAgICAgKiB0aGUgYnl0ZSBsZW5ndGggaWYgdGhlIHN0cmluZyBjb250YWlucyBtdWx0aWJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgcShzdHJpbmcsIG11bHRpQnl0ZVNhZmUgPSB0aGlzLm4pIHsKICAgICAgcmV0dXJuIG11bHRpQnl0ZVNhZmUgPyBzdHJpbmcucmVwbGFjZShzdXJyb2dhdGVQYWlyLCAiXyIpLmxlbmd0aCA6IHN0cmluZy5sZW5ndGg7CiAgICB9CiAgICAvLyAtLSBQdWJsaWMgTWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogQWR2YW5jZXMgdGhlIHNjYW5uZXIgYnkgdGhlIGdpdmVuIG51bWJlciBvZiBjaGFyYWN0ZXJzLCBzdG9wcGluZyBpZiB0aGUgZW5kCiAgICAgKiBvZiB0aGUgc3RyaW5nIGlzIHJlYWNoZWQuCiAgICAgKi8KICAgIGcoY291bnQgPSAxKSB7CiAgICAgIHRoaXMuZCA9IE1hdGgubWluKHRoaXMuaywgdGhpcy5kICsgY291bnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBieXRlIGluZGV4IG9mIHRoZSBnaXZlbiBjaGFyYWN0ZXIgaW5kZXggaW4gdGhlIHN0cmluZy4gVGhlIHR3bwogICAgICogbWF5IGRpZmZlciBpbiBzdHJpbmdzIHRoYXQgY29udGFpbiBtdWx0aWJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgaShjaGFySW5kZXggPSB0aGlzLmQpIHsKICAgICAgdmFyIF9hOwogICAgICByZXR1cm4gdGhpcy5uID8gKF9hID0gdGhpcy55W2NoYXJJbmRleF0pICE9IG51bGwgPyBfYSA6IEluZmluaXR5IDogY2hhckluZGV4OwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbmQgcmV0dXJucyB0aGUgZ2l2ZW4gbnVtYmVyIG9mIGNoYXJhY3RlcnMgaWYgcG9zc2libGUsIGFkdmFuY2luZwogICAgICogdGhlIHNjYW5uZXIgYW5kIHN0b3BwaW5nIGlmIHRoZSBlbmQgb2YgdGhlIHN0cmluZyBpcyByZWFjaGVkLgogICAgICoKICAgICAqIElmIG5vIGNoYXJhY3RlcnMgY291bGQgYmUgY29uc3VtZWQsIGFuIGVtcHR5IHN0cmluZyB3aWxsIGJlIHJldHVybmVkLgogICAgICovCiAgICBGKGNvdW50ID0gMSkgewogICAgICBsZXQgY2hhcnMgPSB0aGlzLmgoY291bnQpOwogICAgICB0aGlzLmcoY291bnQpOwogICAgICByZXR1cm4gY2hhcnM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgbWF0Y2ggZm9yIHRoZSBnaXZlbiBzdGlja3kgcmVnZXgsIGFkdmFuY2VzIHRoZSBzY2FubmVyLCB1cGRhdGVzCiAgICAgKiB0aGUgYGxhc3RJbmRleGAgcHJvcGVydHkgb2YgdGhlIHJlZ2V4LCBhbmQgcmV0dXJucyB0aGUgbWF0Y2hpbmcgc3RyaW5nLgogICAgICoKICAgICAqIFRoZSByZWdleCBtdXN0IGhhdmUgYSBzdGlja3kgZmxhZyAoInkiKSBzbyB0aGF0IGl0cyBgbGFzdEluZGV4YCBwcm9wIGNhbiBiZQogICAgICogdXNlZCB0byBhbmNob3IgdGhlIG1hdGNoIGF0IHRoZSBjdXJyZW50IHNjYW5uZXIgcG9zaXRpb24uCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgY29uc3VtZWQgc3RyaW5nLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKi8KICAgIEcocmVnZXgpIHsKICAgICAgaWYgKCFyZWdleC5zdGlja3kpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ByZWdleGAgbXVzdCBoYXZlIGEgc3RpY2t5IGZsYWcgKCJ5IiknKTsKICAgICAgfQogICAgICByZWdleC5sYXN0SW5kZXggPSB0aGlzLmkoKTsKICAgICAgbGV0IHJlc3VsdCA9IHJlZ2V4LmV4ZWModGhpcy5tKTsKICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICB9CiAgICAgIGxldCBtYXRjaCA9IHJlc3VsdFswXTsKICAgICAgdGhpcy5nKHRoaXMucShtYXRjaCkpOwogICAgICByZXR1cm4gbWF0Y2g7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGFuZCByZXR1cm5zIGFsbCBjaGFyYWN0ZXJzIGZvciB3aGljaCB0aGUgZ2l2ZW4gZnVuY3Rpb24gcmV0dXJucyBhCiAgICAgKiB0cnV0aHkgdmFsdWUsIHN0b3BwaW5nIG9uIHRoZSBmaXJzdCBmYWxzeSByZXR1cm4gdmFsdWUgb3IgaWYgdGhlIGVuZCBvZiB0aGUKICAgICAqIGlucHV0IGlzIHJlYWNoZWQuCiAgICAgKi8KICAgIHYoZm4pIHsKICAgICAgbGV0IGNoYXI7CiAgICAgIGxldCBtYXRjaCA9IGVtcHR5U3RyaW5nOwogICAgICB3aGlsZSAoKGNoYXIgPSB0aGlzLmgoKSkgJiYgZm4oY2hhcikpIHsKICAgICAgICBtYXRjaCArPSBjaGFyOwogICAgICAgIHRoaXMuZygpOwogICAgICB9CiAgICAgIHJldHVybiBtYXRjaDsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgdGhlIGdpdmVuIHN0cmluZyBpZiBpdCBleGlzdHMgYXQgdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGluZGV4LCBhbmQKICAgICAqIGFkdmFuY2VzIHRoZSBzY2FubmVyLgogICAgICoKICAgICAqIElmIHRoZSBnaXZlbiBzdHJpbmcgZG9lc24ndCBleGlzdCBhdCB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaW5kZXgsIGFuIGVtcHR5CiAgICAgKiBzdHJpbmcgd2lsbCBiZSByZXR1cm5lZCBhbmQgdGhlIHNjYW5uZXIgd2lsbCBub3QgYmUgYWR2YW5jZWQuCiAgICAgKi8KICAgIFEoc3RyaW5nVG9Db25zdW1lKSB7CiAgICAgIGlmICh0aGlzLmIoc3RyaW5nVG9Db25zdW1lKSkgewogICAgICAgIHJldHVybiBzdHJpbmdUb0NvbnN1bWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubikgewogICAgICAgIGxldCB7IGxlbmd0aCB9ID0gc3RyaW5nVG9Db25zdW1lOwogICAgICAgIGxldCBjaGFyTGVuZ3RoVG9NYXRjaCA9IHRoaXMucShzdHJpbmdUb0NvbnN1bWUpOwogICAgICAgIGlmIChjaGFyTGVuZ3RoVG9NYXRjaCAhPT0gbGVuZ3RoICYmIHN0cmluZ1RvQ29uc3VtZSA9PT0gdGhpcy5oKGNoYXJMZW5ndGhUb01hdGNoKSkgewogICAgICAgICAgdGhpcy5nKGNoYXJMZW5ndGhUb01hdGNoKTsKICAgICAgICAgIHJldHVybiBzdHJpbmdUb0NvbnN1bWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBlbXB0eVN0cmluZzsKICAgIH0KICAgIC8qKgogICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBgY29uc3VtZVN0cmluZygpYCwgYnV0IGRvZXNuJ3Qgc3VwcG9ydCBjb25zdW1pbmcKICAgICAqIG11bHRpYnl0ZSBjaGFyYWN0ZXJzLiBUaGlzIGNhbiBiZSBmYXN0ZXIgaWYgeW91IG9ubHkgbmVlZCB0byBtYXRjaCBzaW5nbGUKICAgICAqIGJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgYihzdHJpbmdUb0NvbnN1bWUpIHsKICAgICAgbGV0IHsgbGVuZ3RoIH0gPSBzdHJpbmdUb0NvbnN1bWU7CiAgICAgIGlmICh0aGlzLmgobGVuZ3RoKSA9PT0gc3RyaW5nVG9Db25zdW1lKSB7CiAgICAgICAgdGhpcy5nKGxlbmd0aCk7CiAgICAgICAgcmV0dXJuIHN0cmluZ1RvQ29uc3VtZTsKICAgICAgfQogICAgICByZXR1cm4gZW1wdHlTdHJpbmc7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGNoYXJhY3RlcnMgdW50aWwgdGhlIGdpdmVuIGdsb2JhbCByZWdleCBpcyBtYXRjaGVkLCBhZHZhbmNpbmcgdGhlCiAgICAgKiBzY2FubmVyIHVwIHRvIChidXQgbm90IGJleW9uZCkgdGhlIGJlZ2lubmluZyBvZiB0aGUgbWF0Y2guIElmIHRoZSByZWdleAogICAgICogZG9lc24ndCBtYXRjaCwgbm90aGluZyB3aWxsIGJlIGNvbnN1bWVkLgogICAgICoKICAgICAqIFJldHVybnMgdGhlIGNvbnN1bWVkIHN0cmluZywgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIGNvbnN1bWVkLgogICAgICovCiAgICBBKHJlZ2V4KSB7CiAgICAgIGxldCByZXN0T2ZTdHJpbmcgPSB0aGlzLm0uc2xpY2UodGhpcy5pKCkpOwogICAgICBsZXQgbWF0Y2hCeXRlSW5kZXggPSByZXN0T2ZTdHJpbmcuc2VhcmNoKHJlZ2V4KTsKICAgICAgaWYgKG1hdGNoQnl0ZUluZGV4IDw9IDApIHsKICAgICAgICByZXR1cm4gZW1wdHlTdHJpbmc7CiAgICAgIH0KICAgICAgbGV0IHJlc3VsdCA9IHJlc3RPZlN0cmluZy5zbGljZSgwLCBtYXRjaEJ5dGVJbmRleCk7CiAgICAgIHRoaXMuZyh0aGlzLnEocmVzdWx0KSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGNoYXJhY3RlcnMgdW50aWwgdGhlIGdpdmVuIHN0cmluZyBpcyBmb3VuZCwgYWR2YW5jaW5nIHRoZSBzY2FubmVyCiAgICAgKiB1cCB0byAoYnV0IG5vdCBiZXlvbmQpIHRoYXQgcG9pbnQuIElmIHRoZSBzdHJpbmcgaXMgbmV2ZXIgZm91bmQsIG5vdGhpbmcKICAgICAqIHdpbGwgYmUgY29uc3VtZWQuCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgY29uc3VtZWQgc3RyaW5nLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKi8KICAgIHQoc2VhcmNoU3RyaW5nKSB7CiAgICAgIGxldCB7IG06IHN0cmluZyB9ID0gdGhpczsKICAgICAgbGV0IGJ5dGVJbmRleCA9IHRoaXMuaSgpOwogICAgICBsZXQgbWF0Y2hCeXRlSW5kZXggPSBzdHJpbmcuaW5kZXhPZihzZWFyY2hTdHJpbmcsIGJ5dGVJbmRleCk7CiAgICAgIGlmIChtYXRjaEJ5dGVJbmRleCA8PSAwKSB7CiAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICB9CiAgICAgIGxldCByZXN1bHQgPSBzdHJpbmcuc2xpY2UoYnl0ZUluZGV4LCBtYXRjaEJ5dGVJbmRleCk7CiAgICAgIHRoaXMuZyh0aGlzLnEocmVzdWx0KSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGdpdmVuIG51bWJlciBvZiBjaGFyYWN0ZXJzIHN0YXJ0aW5nIGF0IHRoZSBjdXJyZW50IGNoYXJhY3RlcgogICAgICogaW5kZXgsIHdpdGhvdXQgYWR2YW5jaW5nIHRoZSBzY2FubmVyIGFuZCB3aXRob3V0IGV4Y2VlZGluZyB0aGUgZW5kIG9mIHRoZQogICAgICogaW5wdXQgc3RyaW5nLgogICAgICovCiAgICBoKGNvdW50ID0gMSkgewogICAgICBsZXQgeyBkOiBjaGFySW5kZXgsIG46IG11bHRpQnl0ZU1vZGUsIG06IHN0cmluZyB9ID0gdGhpczsKICAgICAgaWYgKG11bHRpQnl0ZU1vZGUpIHsKICAgICAgICBpZiAoY2hhckluZGV4ID49IHRoaXMuaykgewogICAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKAogICAgICAgICAgdGhpcy5pKGNoYXJJbmRleCksCiAgICAgICAgICB0aGlzLmkoY2hhckluZGV4ICsgY291bnQpCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKGNoYXJJbmRleCwgY2hhckluZGV4ICsgY291bnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXNldHMgdGhlIHNjYW5uZXIgcG9zaXRpb24gdG8gdGhlIGdpdmVuIGNoYXJhY3RlciBfaW5kZXhfLCBvciB0byB0aGUgc3RhcnQKICAgICAqIG9mIHRoZSBpbnB1dCBzdHJpbmcgaWYgbm8gaW5kZXggaXMgZ2l2ZW4uCiAgICAgKgogICAgICogSWYgX2luZGV4XyBpcyBuZWdhdGl2ZSwgdGhlIHNjYW5uZXIgcG9zaXRpb24gd2lsbCBiZSBtb3ZlZCBiYWNrd2FyZCBieSB0aGF0CiAgICAgKiBtYW55IGNoYXJhY3RlcnMsIHN0b3BwaW5nIGlmIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZyBpcyByZWFjaGVkLgogICAgICovCiAgICBvKGluZGV4ID0gMCkgewogICAgICB0aGlzLmQgPSBpbmRleCA+PSAwID8gTWF0aC5taW4odGhpcy5rLCBpbmRleCkgOiBNYXRoLm1heCgwLCB0aGlzLmQgKyBpbmRleCk7CiAgICB9CiAgfTsKICB2YXIgYXR0VmFsdWVDaGFyRG91YmxlUXVvdGUgPSAvW14iJjxdKy95OwogIHZhciBhdHRWYWx1ZUNoYXJTaW5nbGVRdW90ZSA9IC9bXicmPF0rL3k7CiAgdmFyIGF0dFZhbHVlTm9ybWFsaXplZFdoaXRlc3BhY2UgPSAvXHJcbnxbXG5cclx0XS9nOwogIHZhciBlbmRDaGFyRGF0YSA9IC88fCZ8XV0+LzsKICB2YXIgcHJlZGVmaW5lZEVudGl0aWVzID0gT2JqZWN0LmZyZWV6ZShPYmplY3QuYXNzaWduKC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCB7CiAgICBhbXA6ICImIiwKICAgIGFwb3M6ICInIiwKICAgIGd0OiAiPiIsCiAgICBsdDogIjwiLAogICAgcXVvdDogJyInCiAgfSkpOwogIGZ1bmN0aW9uIGlzTmFtZUNoYXIoY2hhcikgewogICAgbGV0IGNwID0gZ2V0Q29kZVBvaW50KGNoYXIpOwogICAgcmV0dXJuIGNwID49IDk3ICYmIGNwIDw9IDEyMiB8fCBjcCA+PSA2NSAmJiBjcCA8PSA5MCB8fCBjcCA+PSA0OCAmJiBjcCA8PSA1NyB8fCBjcCA9PT0gNDUgfHwgY3AgPT09IDQ2IHx8IGNwID09PSAxODMgfHwgY3AgPj0gNzY4ICYmIGNwIDw9IDg3OSB8fCBjcCA+PSA4MjU1ICYmIGNwIDw9IDgyNTYgfHwgaXNOYW1lU3RhcnRDaGFyKGNoYXIsIGNwKTsKICB9CiAgZnVuY3Rpb24gaXNOYW1lU3RhcnRDaGFyKGNoYXIsIGNwID0gZ2V0Q29kZVBvaW50KGNoYXIpKSB7CiAgICByZXR1cm4gY3AgPj0gOTcgJiYgY3AgPD0gMTIyIHx8IGNwID49IDY1ICYmIGNwIDw9IDkwIHx8IGNwID09PSA1OCB8fCBjcCA9PT0gOTUgfHwgY3AgPj0gMTkyICYmIGNwIDw9IDIxNCB8fCBjcCA+PSAyMTYgJiYgY3AgPD0gMjQ2IHx8IGNwID49IDI0OCAmJiBjcCA8PSA3NjcgfHwgY3AgPj0gODgwICYmIGNwIDw9IDg5MyB8fCBjcCA+PSA4OTUgJiYgY3AgPD0gODE5MSB8fCBjcCA+PSA4MjA0ICYmIGNwIDw9IDgyMDUgfHwgY3AgPj0gODMwNCAmJiBjcCA8PSA4NTkxIHx8IGNwID49IDExMjY0ICYmIGNwIDw9IDEyMjcxIHx8IGNwID49IDEyMjg5ICYmIGNwIDw9IDU1Mjk1IHx8IGNwID49IDYzNzQ0ICYmIGNwIDw9IDY0OTc1IHx8IGNwID49IDY1MDA4ICYmIGNwIDw9IDY1NTMzIHx8IGNwID49IDY1NTM2ICYmIGNwIDw9IDk4MzAzOTsKICB9CiAgZnVuY3Rpb24gaXNSZWZlcmVuY2VDaGFyKGNoYXIpIHsKICAgIHJldHVybiBjaGFyID09PSAiIyIgfHwgaXNOYW1lQ2hhcihjaGFyKTsKICB9CiAgZnVuY3Rpb24gaXNXaGl0ZXNwYWNlKGNoYXIpIHsKICAgIGxldCBjcCA9IGdldENvZGVQb2ludChjaGFyKTsKICAgIHJldHVybiBjcCA9PT0gMzIgfHwgY3AgPT09IDkgfHwgY3AgPT09IDEwIHx8IGNwID09PSAxMzsKICB9CiAgZnVuY3Rpb24gaXNYbWxDb2RlUG9pbnQoY3ApIHsKICAgIHJldHVybiBjcCA9PT0gOSB8fCBjcCA9PT0gMTAgfHwgY3AgPT09IDEzIHx8IGNwID49IDMyICYmIGNwIDw9IDU1Mjk1IHx8IGNwID49IDU3MzQ0ICYmIGNwIDw9IDY1NTMzIHx8IGNwID49IDY1NTM2ICYmIGNwIDw9IDExMTQxMTE7CiAgfQogIGZ1bmN0aW9uIGdldENvZGVQb2ludChjaGFyKSB7CiAgICByZXR1cm4gY2hhci5jb2RlUG9pbnRBdCgwKSB8fCAtMTsKICB9CiAgdmFyIF9YbWxOb2RlID0gY2xhc3MgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMucGFyZW50ID0gbnVsbDsKICAgICAgdGhpcy5zdGFydCA9IC0xOwogICAgICB0aGlzLmVuZCA9IC0xOwogICAgfQogICAgLyoqCiAgICAgKiBEb2N1bWVudCB0aGF0IGNvbnRhaW5zIHRoaXMgbm9kZSwgb3IgYG51bGxgIGlmIHRoaXMgbm9kZSBpcyBub3QgYXNzb2NpYXRlZAogICAgICogd2l0aCBhIGRvY3VtZW50LgogICAgICovCiAgICBnZXQgZG9jdW1lbnQoKSB7CiAgICAgIHZhciBfYSwgX2I7CiAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLnBhcmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRvY3VtZW50KSAhPSBudWxsID8gX2IgOiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoaXMgbm9kZSBpcyB0aGUgcm9vdCBub2RlIG9mIHRoZSBkb2N1bWVudCAoYWxzbyBrbm93biBhcyB0aGUKICAgICAqIGRvY3VtZW50IGVsZW1lbnQpLgogICAgICovCiAgICBnZXQgaXNSb290Tm9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFyZW50ICE9PSBudWxsICYmIHRoaXMucGFyZW50ID09PSB0aGlzLmRvY3VtZW50ICYmIHRoaXMudHlwZSA9PT0gX1htbE5vZGUuVFlQRV9FTEVNRU5UOwogICAgfQogICAgLyoqCiAgICAgKiBXaGV0aGVyIHdoaXRlc3BhY2Ugc2hvdWxkIGJlIHByZXNlcnZlZCBpbiB0aGUgY29udGVudCBvZiB0aGlzIGVsZW1lbnQgYW5kCiAgICAgKiBpdHMgY2hpbGRyZW4uCiAgICAgKgogICAgICogVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHRoZSB2YWx1ZSBvZiB0aGUgc3BlY2lhbCBgeG1sOnNwYWNlYCBhdHRyaWJ1dGUsIGFuZAogICAgICogd2lsbCBiZSBgdHJ1ZWAgZm9yIGFueSBub2RlIHdob3NlIGB4bWw6c3BhY2VgIGF0dHJpYnV0ZSBpcyBzZXQgdG8KICAgICAqICJwcmVzZXJ2ZSIuIElmIGEgbm9kZSBoYXMgbm8gc3VjaCBhdHRyaWJ1dGUsIGl0IHdpbGwgaW5oZXJpdCB0aGUgdmFsdWUgb2YKICAgICAqIHRoZSBuZWFyZXN0IGFuY2VzdG9yIHRoYXQgZG9lcyAoaWYgYW55KS4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy13aGl0ZS1zcGFjZQogICAgICovCiAgICBnZXQgcHJlc2VydmVXaGl0ZXNwYWNlKCkgewogICAgICB2YXIgX2E7CiAgICAgIHJldHVybiAhISgoX2EgPSB0aGlzLnBhcmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnByZXNlcnZlV2hpdGVzcGFjZSk7CiAgICB9CiAgICAvKioKICAgICAqIFR5cGUgb2YgdGhpcyBub2RlLgogICAgICoKICAgICAqIFRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IGlzIGEgc3RyaW5nIHRoYXQgbWF0Y2hlcyBvbmUgb2YgdGhlIHN0YXRpYwogICAgICogYFRZUEVfKmAgcHJvcGVydGllcyBvbiB0aGUgYFhtbE5vZGVgIGNsYXNzIChlLmcuIGBUWVBFX0VMRU1FTlRgLAogICAgICogYFRZUEVfVEVYVGAsIGV0Yy4pLgogICAgICoKICAgICAqIFRoZSBgWG1sTm9kZWAgY2xhc3MgaXRzZWxmIGlzIGEgYmFzZSBjbGFzcyBhbmQgZG9lc24ndCBoYXZlIGl0cyBvd24gdHlwZQogICAgICogbmFtZS4KICAgICAqLwogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiAiIjsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIG9iamVjdCByZXByZXNlbnRpbmcgdGhpcyBub2RlLCBtaW51cyBwcm9wZXJ0aWVzCiAgICAgKiB0aGF0IGNvdWxkIHJlc3VsdCBpbiBjaXJjdWxhciByZWZlcmVuY2VzLgogICAgICovCiAgICB0b0pTT04oKSB7CiAgICAgIGxldCBqc29uID0gewogICAgICAgIHR5cGU6IHRoaXMudHlwZQogICAgICB9OwogICAgICBpZiAodGhpcy5pc1Jvb3ROb2RlKSB7CiAgICAgICAganNvbi5pc1Jvb3ROb2RlID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAodGhpcy5wcmVzZXJ2ZVdoaXRlc3BhY2UpIHsKICAgICAgICBqc29uLnByZXNlcnZlV2hpdGVzcGFjZSA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc3RhcnQgIT09IC0xKSB7CiAgICAgICAganNvbi5zdGFydCA9IHRoaXMuc3RhcnQ7CiAgICAgICAganNvbi5lbmQgPSB0aGlzLmVuZDsKICAgICAgfQogICAgICByZXR1cm4ganNvbjsKICAgIH0KICB9OwogIHZhciBYbWxOb2RlID0gX1htbE5vZGU7CiAgWG1sTm9kZS5UWVBFX0NEQVRBID0gImNkYXRhIjsKICBYbWxOb2RlLlRZUEVfQ09NTUVOVCA9ICJjb21tZW50IjsKICBYbWxOb2RlLlRZUEVfRE9DVU1FTlQgPSAiZG9jdW1lbnQiOwogIFhtbE5vZGUuVFlQRV9ET0NVTUVOVF9UWVBFID0gImRvY3R5cGUiOwogIFhtbE5vZGUuVFlQRV9FTEVNRU5UID0gImVsZW1lbnQiOwogIFhtbE5vZGUuVFlQRV9QUk9DRVNTSU5HX0lOU1RSVUNUSU9OID0gInBpIjsKICBYbWxOb2RlLlRZUEVfVEVYVCA9ICJ0ZXh0IjsKICBYbWxOb2RlLlRZUEVfWE1MX0RFQ0xBUkFUSU9OID0gInhtbGRlY2wiOwogIHZhciBYbWxUZXh0ID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKHRleHQgPSAiIikgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLnRleHQgPSB0ZXh0OwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfVEVYVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICB0ZXh0OiB0aGlzLnRleHQKICAgICAgfSk7CiAgICB9CiAgfTsKICB2YXIgWG1sQ2RhdGEgPSBjbGFzcyBleHRlbmRzIFhtbFRleHQgewogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfQ0RBVEE7CiAgICB9CiAgfTsKICB2YXIgWG1sQ29tbWVudCA9IGNsYXNzIGV4dGVuZHMgWG1sTm9kZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZW50ID0gIiIpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX0NPTU1FTlQ7CiAgICB9CiAgICB0b0pTT04oKSB7CiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKFhtbE5vZGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpLCB7CiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50CiAgICAgIH0pOwogICAgfQogIH07CiAgdmFyIFhtbERlY2xhcmF0aW9uID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247CiAgICAgIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZyAhPSBudWxsID8gZW5jb2RpbmcgOiBudWxsOwogICAgICB0aGlzLnN0YW5kYWxvbmUgPSBzdGFuZGFsb25lICE9IG51bGwgPyBzdGFuZGFsb25lIDogbnVsbDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX1hNTF9ERUNMQVJBVElPTjsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgbGV0IGpzb24gPSBYbWxOb2RlLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTsKICAgICAganNvbi52ZXJzaW9uID0gdGhpcy52ZXJzaW9uOwogICAgICBmb3IgKGxldCBrZXkgb2YgWyJlbmNvZGluZyIsICJzdGFuZGFsb25lIl0pIHsKICAgICAgICBpZiAodGhpc1trZXldICE9PSBudWxsKSB7CiAgICAgICAgICBqc29uW2tleV0gPSB0aGlzW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBqc29uOwogICAgfQogIH07CiAgdmFyIFhtbEVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIFhtbE5vZGUgewogICAgY29uc3RydWN0b3IobmFtZSwgYXR0cmlidXRlcyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCBjaGlsZHJlbiA9IFtdKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgIH0KICAgIC8qKgogICAgICogV2hldGhlciB0aGlzIGVsZW1lbnQgaXMgZW1wdHkgKG1lYW5pbmcgaXQgaGFzIG5vIGNoaWxkcmVuKS4KICAgICAqLwogICAgZ2V0IGlzRW1wdHkoKSB7CiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmxlbmd0aCA9PT0gMDsKICAgIH0KICAgIGdldCBwcmVzZXJ2ZVdoaXRlc3BhY2UoKSB7CiAgICAgIGxldCBub2RlID0gdGhpczsKICAgICAgd2hpbGUgKG5vZGUgaW5zdGFuY2VvZiBYbWxFbGVtZW50KSB7CiAgICAgICAgaWYgKCJ4bWw6c3BhY2UiIGluIG5vZGUuYXR0cmlidXRlcykgewogICAgICAgICAgcmV0dXJuIG5vZGUuYXR0cmlidXRlc1sieG1sOnNwYWNlIl0gPT09ICJwcmVzZXJ2ZSI7CiAgICAgICAgfQogICAgICAgIG5vZGUgPSBub2RlLnBhcmVudDsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFRleHQgY29udGVudCBvZiB0aGlzIGVsZW1lbnQgYW5kIGFsbCBpdHMgZGVzY2VuZGFudHMuCiAgICAgKi8KICAgIGdldCB0ZXh0KCkgewogICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiAidGV4dCIgaW4gY2hpbGQgPyBjaGlsZC50ZXh0IDogIiIpLmpvaW4oIiIpOwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfRUxFTUVOVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgYXR0cmlidXRlczogdGhpcy5hdHRyaWJ1dGVzLAogICAgICAgIGNoaWxkcmVuOiB0aGlzLmNoaWxkcmVuLm1hcCgoY2hpbGQpID0+IGNoaWxkLnRvSlNPTigpKQogICAgICB9KTsKICAgIH0KICB9OwogIHZhciBYbWxEb2N1bWVudCA9IGNsYXNzIGV4dGVuZHMgWG1sTm9kZSB7CiAgICBjb25zdHJ1Y3RvcihjaGlsZHJlbiA9IFtdKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgIH0KICAgIGdldCBkb2N1bWVudCgpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJvb3QgZWxlbWVudCBvZiB0aGlzIGRvY3VtZW50LCBvciBgbnVsbGAgaWYgdGhpcyBkb2N1bWVudCBpcyBlbXB0eS4KICAgICAqLwogICAgZ2V0IHJvb3QoKSB7CiAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHsKICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBYbWxFbGVtZW50KSB7CiAgICAgICAgICByZXR1cm4gY2hpbGQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBUZXh0IGNvbnRlbnQgb2YgdGhpcyBkb2N1bWVudCBhbmQgYWxsIGl0cyBkZXNjZW5kYW50cy4KICAgICAqLwogICAgZ2V0IHRleHQoKSB7CiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLm1hcCgoY2hpbGQpID0+ICJ0ZXh0IiBpbiBjaGlsZCA/IGNoaWxkLnRleHQgOiAiIikuam9pbigiIik7CiAgICB9CiAgICBnZXQgdHlwZSgpIHsKICAgICAgcmV0dXJuIFhtbE5vZGUuVFlQRV9ET0NVTUVOVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBjaGlsZHJlbjogdGhpcy5jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiBjaGlsZC50b0pTT04oKSkKICAgICAgfSk7CiAgICB9CiAgfTsKICB2YXIgWG1sRG9jdW1lbnRUeXBlID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKG5hbWUsIHB1YmxpY0lkLCBzeXN0ZW1JZCwgaW50ZXJuYWxTdWJzZXQpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgICAgdGhpcy5wdWJsaWNJZCA9IHB1YmxpY0lkICE9IG51bGwgPyBwdWJsaWNJZCA6IG51bGw7CiAgICAgIHRoaXMuc3lzdGVtSWQgPSBzeXN0ZW1JZCAhPSBudWxsID8gc3lzdGVtSWQgOiBudWxsOwogICAgICB0aGlzLmludGVybmFsU3Vic2V0ID0gaW50ZXJuYWxTdWJzZXQgIT0gbnVsbCA/IGludGVybmFsU3Vic2V0IDogbnVsbDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX0RPQ1VNRU5UX1RZUEU7CiAgICB9CiAgICB0b0pTT04oKSB7CiAgICAgIGxldCBqc29uID0gWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7CiAgICAgIGpzb24ubmFtZSA9IHRoaXMubmFtZTsKICAgICAgZm9yIChsZXQga2V5IG9mIFsicHVibGljSWQiLCAic3lzdGVtSWQiLCAiaW50ZXJuYWxTdWJzZXQiXSkgewogICAgICAgIGlmICh0aGlzW2tleV0gIT09IG51bGwpIHsKICAgICAgICAgIGpzb25ba2V5XSA9IHRoaXNba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGpzb247CiAgICB9CiAgfTsKICB2YXIgWG1sRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHsKICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGNoYXJJbmRleCwgeG1sKSB7CiAgICAgIGxldCBjb2x1bW4gPSAxOwogICAgICBsZXQgZXhjZXJwdCA9ICIiOwogICAgICBsZXQgbGluZSA9IDE7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckluZGV4OyArK2kpIHsKICAgICAgICBsZXQgY2hhciA9IHhtbFtpXTsKICAgICAgICBpZiAoY2hhciA9PT0gIlxuIikgewogICAgICAgICAgY29sdW1uID0gMTsKICAgICAgICAgIGV4Y2VycHQgPSAiIjsKICAgICAgICAgIGxpbmUgKz0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29sdW1uICs9IDE7CiAgICAgICAgICBleGNlcnB0ICs9IGNoYXI7CiAgICAgICAgfQogICAgICB9CiAgICAgIGxldCBlb2wgPSB4bWwuaW5kZXhPZigiXG4iLCBjaGFySW5kZXgpOwogICAgICBleGNlcnB0ICs9IGVvbCA9PT0gLTEgPyB4bWwuc2xpY2UoY2hhckluZGV4KSA6IHhtbC5zbGljZShjaGFySW5kZXgsIGVvbCk7CiAgICAgIGxldCBleGNlcnB0U3RhcnQgPSAwOwogICAgICBpZiAoZXhjZXJwdC5sZW5ndGggPiA1MCkgewogICAgICAgIGlmIChjb2x1bW4gPCA0MCkgewogICAgICAgICAgZXhjZXJwdCA9IGV4Y2VycHQuc2xpY2UoMCwgNTApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBleGNlcnB0U3RhcnQgPSBjb2x1bW4gLSAyMDsKICAgICAgICAgIGV4Y2VycHQgPSBleGNlcnB0LnNsaWNlKGV4Y2VycHRTdGFydCwgY29sdW1uICsgMzApOwogICAgICAgIH0KICAgICAgfQogICAgICBzdXBlcigKICAgICAgICBgJHttZXNzYWdlfSAobGluZSAke2xpbmV9LCBjb2x1bW4gJHtjb2x1bW59KQogICR7ZXhjZXJwdH0KYCArICIgIi5yZXBlYXQoY29sdW1uIC0gZXhjZXJwdFN0YXJ0ICsgMSkgKyAiXlxuIgogICAgICApOwogICAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbjsKICAgICAgdGhpcy5leGNlcnB0ID0gZXhjZXJwdDsKICAgICAgdGhpcy5saW5lID0gbGluZTsKICAgICAgdGhpcy5uYW1lID0gIlhtbEVycm9yIjsKICAgICAgdGhpcy5wb3MgPSBjaGFySW5kZXg7CiAgICB9CiAgfTsKICB2YXIgWG1sUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRlbnQgPSAiIikgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50OwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfUFJPQ0VTU0lOR19JTlNUUlVDVElPTjsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50CiAgICAgIH0pOwogICAgfQogIH07CiAgdmFyIGVtcHR5U3RyaW5nMiA9ICIiOwogIHZhciBQYXJzZXIgPSBjbGFzcyB7CiAgICAvKioKICAgICAqIEBwYXJhbSB4bWwgWE1MIHN0cmluZyB0byBwYXJzZS4KICAgICAqIEBwYXJhbSBvcHRpb25zIFBhcnNlciBvcHRpb25zLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcih4bWwsIG9wdGlvbnMgPSB7fSkgewogICAgICBsZXQgZG9jID0gdGhpcy5kb2N1bWVudCA9IG5ldyBYbWxEb2N1bWVudCgpOwogICAgICBsZXQgc2Nhbm5lciA9IHRoaXMuYyA9IG5ldyBTdHJpbmdTY2FubmVyKHhtbCk7CiAgICAgIHRoaXMubCA9IGRvYzsKICAgICAgdGhpcy5mID0gb3B0aW9uczsKICAgICAgaWYgKHRoaXMuZi5pbmNsdWRlT2Zmc2V0cykgewogICAgICAgIGRvYy5zdGFydCA9IDA7CiAgICAgICAgZG9jLmVuZCA9IHhtbC5sZW5ndGg7CiAgICAgIH0KICAgICAgc2Nhbm5lci5iKCJcdUZFRkYiKTsKICAgICAgdGhpcy5IKCk7CiAgICAgIGlmICghdGhpcy5CKCkpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlJvb3QgZWxlbWVudCBpcyBtaXNzaW5nIG9yIGludmFsaWQiKTsKICAgICAgfQogICAgICB3aGlsZSAodGhpcy53KCkpIHsKICAgICAgfQogICAgICBpZiAoIXNjYW5uZXIueikgewogICAgICAgIHRocm93IHRoaXMuYSgiRXh0cmEgY29udGVudCBhdCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgdGhlIGdpdmVuIGBYbWxOb2RlYCBhcyBhIGNoaWxkIG9mIGB0aGlzLmN1cnJlbnROb2RlYC4KICAgICAqLwogICAgaihub2RlLCBjaGFySW5kZXgpIHsKICAgICAgbm9kZS5wYXJlbnQgPSB0aGlzLmw7CiAgICAgIGlmICh0aGlzLmYuaW5jbHVkZU9mZnNldHMpIHsKICAgICAgICBub2RlLnN0YXJ0ID0gdGhpcy5jLmkoY2hhckluZGV4KTsKICAgICAgICBub2RlLmVuZCA9IHRoaXMuYy5pKCk7CiAgICAgIH0KICAgICAgdGhpcy5sLmNoaWxkcmVuLnB1c2gobm9kZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIHRoZSBnaXZlbiBfdGV4dF8gdG8gdGhlIGRvY3VtZW50LCBlaXRoZXIgYnkgYXBwZW5kaW5nIGl0IHRvIGEKICAgICAqIHByZWNlZGluZyBgWG1sVGV4dGAgbm9kZSAoaWYgcG9zc2libGUpIG9yIGJ5IGNyZWF0aW5nIGEgbmV3IGBYbWxUZXh0YCBub2RlLgogICAgICovCiAgICB4KHRleHQsIGNoYXJJbmRleCkgewogICAgICBsZXQgeyBjaGlsZHJlbiB9ID0gdGhpcy5sOwogICAgICBsZXQgeyBsZW5ndGggfSA9IGNoaWxkcmVuOwogICAgICB0ZXh0ID0gbm9ybWFsaXplTGluZUJyZWFrcyh0ZXh0KTsKICAgICAgaWYgKGxlbmd0aCA+IDApIHsKICAgICAgICBsZXQgcHJldk5vZGUgPSBjaGlsZHJlbltsZW5ndGggLSAxXTsKICAgICAgICBpZiAoKHByZXZOb2RlID09IG51bGwgPyB2b2lkIDAgOiBwcmV2Tm9kZS50eXBlKSA9PT0gWG1sTm9kZS5UWVBFX1RFWFQpIHsKICAgICAgICAgIGxldCB0ZXh0Tm9kZSA9IHByZXZOb2RlOwogICAgICAgICAgdGV4dE5vZGUudGV4dCArPSB0ZXh0OwogICAgICAgICAgaWYgKHRoaXMuZi5pbmNsdWRlT2Zmc2V0cykgewogICAgICAgICAgICB0ZXh0Tm9kZS5lbmQgPSB0aGlzLmMuaSgpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFRleHQodGV4dCksIGNoYXJJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGVsZW1lbnQgYXR0cmlidXRlcy4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1zdGFydHRhZ3MKICAgICAqLwogICAgSSgpIHsKICAgICAgbGV0IGF0dHJpYnV0ZXMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgd2hpbGUgKHRoaXMuZSgpKSB7CiAgICAgICAgbGV0IGF0dHJOYW1lID0gdGhpcy5yKCk7CiAgICAgICAgaWYgKCFhdHRyTmFtZSkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGxldCBhdHRyVmFsdWUgPSB0aGlzLnUoKSAmJiB0aGlzLkooKTsKICAgICAgICBpZiAoYXR0clZhbHVlID09PSBmYWxzZSkgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJBdHRyaWJ1dGUgdmFsdWUgZXhwZWN0ZWQiKTsKICAgICAgICB9CiAgICAgICAgaWYgKGF0dHJOYW1lIGluIGF0dHJpYnV0ZXMpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgRHVwbGljYXRlIGF0dHJpYnV0ZTogJHthdHRyTmFtZX1gKTsKICAgICAgICB9CiAgICAgICAgaWYgKGF0dHJOYW1lID09PSAieG1sOnNwYWNlIiAmJiBhdHRyVmFsdWUgIT09ICJkZWZhdWx0IiAmJiBhdHRyVmFsdWUgIT09ICJwcmVzZXJ2ZSIpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgnVmFsdWUgb2YgdGhlIGB4bWw6c3BhY2VgIGF0dHJpYnV0ZSBtdXN0IGJlICJkZWZhdWx0IiBvciAicHJlc2VydmUiJyk7CiAgICAgICAgfQogICAgICAgIGF0dHJpYnV0ZXNbYXR0ck5hbWVdID0gYXR0clZhbHVlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmYuc29ydEF0dHJpYnV0ZXMpIHsKICAgICAgICBsZXQgYXR0ck5hbWVzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlcykuc29ydCgpOwogICAgICAgIGxldCBzb3J0ZWRBdHRyaWJ1dGVzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyTmFtZXMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgIGxldCBhdHRyTmFtZSA9IGF0dHJOYW1lc1tpXTsKICAgICAgICAgIHNvcnRlZEF0dHJpYnV0ZXNbYXR0ck5hbWVdID0gYXR0cmlidXRlc1thdHRyTmFtZV07CiAgICAgICAgfQogICAgICAgIGF0dHJpYnV0ZXMgPSBzb3J0ZWRBdHRyaWJ1dGVzOwogICAgICB9CiAgICAgIHJldHVybiBhdHRyaWJ1dGVzOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbiBgQXR0VmFsdWVgIChhdHRyaWJ1dGUgdmFsdWUpIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zCiAgICAgKiAgIENvbnRlbnRzIG9mIHRoZSBgQXR0VmFsdWVgIG1pbnVzIHF1b3Rlcywgb3IgYGZhbHNlYCBpZiBub3RoaW5nIHdhcwogICAgICogICBjb25zdW1lZC4gQW4gZW1wdHkgc3RyaW5nIGluZGljYXRlcyB0aGF0IGFuIGBBdHRWYWx1ZWAgd2FzIGNvbnN1bWVkIGJ1dAogICAgICogICB3YXMgZW1wdHkuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1BdHRWYWx1ZQogICAgICovCiAgICBKKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgcXVvdGUgPSBzY2FubmVyLmgoKTsKICAgICAgaWYgKHF1b3RlICE9PSAnIicgJiYgcXVvdGUgIT09ICInIikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzY2FubmVyLmcoKTsKICAgICAgbGV0IGNoYXJzOwogICAgICBsZXQgaXNDbG9zZWQgPSBmYWxzZTsKICAgICAgbGV0IHZhbHVlID0gZW1wdHlTdHJpbmcyOwogICAgICBsZXQgcmVnZXggPSBxdW90ZSA9PT0gJyInID8gYXR0VmFsdWVDaGFyRG91YmxlUXVvdGUgOiBhdHRWYWx1ZUNoYXJTaW5nbGVRdW90ZTsKICAgICAgbWF0Y2hMb29wOgogICAgICAgIHdoaWxlICghc2Nhbm5lci56KSB7CiAgICAgICAgICBjaGFycyA9IHNjYW5uZXIuRyhyZWdleCk7CiAgICAgICAgICBpZiAoY2hhcnMpIHsKICAgICAgICAgICAgdGhpcy5wKGNoYXJzKTsKICAgICAgICAgICAgdmFsdWUgKz0gY2hhcnMucmVwbGFjZShhdHRWYWx1ZU5vcm1hbGl6ZWRXaGl0ZXNwYWNlLCAiICIpOwogICAgICAgICAgfQogICAgICAgICAgc3dpdGNoIChzY2FubmVyLmgoKSkgewogICAgICAgICAgICBjYXNlIHF1b3RlOgogICAgICAgICAgICAgIGlzQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgICAgICBicmVhayBtYXRjaExvb3A7CiAgICAgICAgICAgIGNhc2UgIiYiOgogICAgICAgICAgICAgIHZhbHVlICs9IHRoaXMuQygpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBjYXNlICI8IjoKICAgICAgICAgICAgICB0aHJvdyB0aGlzLmEoIlVuZXNjYXBlZCBgPGAgaXMgbm90IGFsbG93ZWQgaW4gYW4gYXR0cmlidXRlIHZhbHVlIik7CiAgICAgICAgICAgIGNhc2UgZW1wdHlTdHJpbmcyOgogICAgICAgICAgICAgIGJyZWFrIG1hdGNoTG9vcDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIGlmICghaXNDbG9zZWQpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlVuY2xvc2VkIGF0dHJpYnV0ZSIpOwogICAgICB9CiAgICAgIHNjYW5uZXIuZygpOwogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgQ0RBVEEgc2VjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgQ0RBVEEgc2VjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1jZGF0YS1zZWN0CiAgICAgKi8KICAgIEsoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCFbQ0RBVEFbIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IHRleHQgPSBzY2FubmVyLnQoIl1dPiIpOwogICAgICB0aGlzLnAodGV4dCk7CiAgICAgIGlmICghc2Nhbm5lci5iKCJdXT4iKSkgewogICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgQ0RBVEEgc2VjdGlvbiIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmYucHJlc2VydmVDZGF0YSA/IHRoaXMuaihuZXcgWG1sQ2RhdGEobm9ybWFsaXplTGluZUJyZWFrcyh0ZXh0KSksIHN0YXJ0SW5kZXgpIDogdGhpcy54KHRleHQsIHN0YXJ0SW5kZXgpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBjaGFyYWN0ZXIgZGF0YSBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGNoYXJhY3RlciBkYXRhIHdhcyBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jZHQtY2hhcmRhdGEKICAgICAqLwogICAgTCgpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSBzY2FubmVyLmQ7CiAgICAgIGxldCBjaGFyRGF0YSA9IHNjYW5uZXIuQShlbmRDaGFyRGF0YSk7CiAgICAgIGlmICghY2hhckRhdGEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy5wKGNoYXJEYXRhKTsKICAgICAgaWYgKHNjYW5uZXIuaCgzKSA9PT0gIl1dPiIpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIkVsZW1lbnQgY29udGVudCBtYXkgbm90IGNvbnRhaW4gdGhlIENEQVRBIHNlY3Rpb24gY2xvc2UgZGVsaW1pdGVyIGBdXT5gIik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMueChjaGFyRGF0YSwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgY29tbWVudCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgY29tbWVudCB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULUNvbW1lbnQKICAgICAqLwogICAgRCgpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSBzY2FubmVyLmQ7CiAgICAgIGlmICghc2Nhbm5lci5iKCI8IS0tIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IGNvbnRlbnQgPSBzY2FubmVyLnQoIi0tIik7CiAgICAgIHRoaXMucChjb250ZW50KTsKICAgICAgaWYgKCFzY2FubmVyLmIoIi0tPiIpKSB7CiAgICAgICAgaWYgKHNjYW5uZXIuaCgyKSA9PT0gIi0tIikgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJUaGUgc3RyaW5nIGAtLWAgaXNuJ3QgYWxsb3dlZCBpbnNpZGUgYSBjb21tZW50Iik7CiAgICAgICAgfQogICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgY29tbWVudCIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmYucHJlc2VydmVDb21tZW50cyA/IHRoaXMuaihuZXcgWG1sQ29tbWVudChub3JtYWxpemVMaW5lQnJlYWtzKGNvbnRlbnQpKSwgc3RhcnRJbmRleCkgOiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhIHJlZmVyZW5jZSBpbiBhIGNvbnRlbnQgY29udGV4dCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGRpZmZlcnMgZnJvbSBgY29uc3VtZVJlZmVyZW5jZSgpYCBpbiB0aGF0IGEgY29uc3VtZWQgcmVmZXJlbmNlIHdpbGwgYmUKICAgICAqIGFkZGVkIHRvIHRoZSBkb2N1bWVudCBhcyBhIHRleHQgbm9kZSBpbnN0ZWFkIG9mIHJldHVybmVkLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSByZWZlcmVuY2Ugd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNlbnRwcm9jCiAgICAgKi8KICAgIE0oKSB7CiAgICAgIGxldCBzdGFydEluZGV4ID0gdGhpcy5jLmQ7CiAgICAgIGxldCByZWYgPSB0aGlzLkMoKTsKICAgICAgcmV0dXJuIHJlZiA/IHRoaXMueChyZWYsIHN0YXJ0SW5kZXgpIDogZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgZG9jdHlwZSBkZWNsYXJhdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGlzIGEgbG9vc2UgaW1wbGVtZW50YXRpb24gc2luY2UgZG9jdHlwZSBkZWNsYXJhdGlvbnMgYXJlIGN1cnJlbnRseQogICAgICogZGlzY2FyZGVkIHdpdGhvdXQgZnVydGhlciBwYXJzaW5nLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSBkb2N0eXBlIGRlY2xhcmF0aW9uIHdhcyBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jZHRkCiAgICAgKi8KICAgIE4oKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCFET0NUWVBFIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IG5hbWUgPSB0aGlzLmUoKSAmJiB0aGlzLnIoKTsKICAgICAgaWYgKCFuYW1lKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJFeHBlY3RlZCBhIG5hbWUiKTsKICAgICAgfQogICAgICBsZXQgcHVibGljSWQ7CiAgICAgIGxldCBzeXN0ZW1JZDsKICAgICAgaWYgKHRoaXMuZSgpKSB7CiAgICAgICAgaWYgKHNjYW5uZXIuYigiUFVCTElDIikpIHsKICAgICAgICAgIHB1YmxpY0lkID0gdGhpcy5lKCkgJiYgdGhpcy5PKCk7CiAgICAgICAgICBpZiAocHVibGljSWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHRocm93IHRoaXMuYSgiRXhwZWN0ZWQgYSBwdWJsaWMgaWRlbnRpZmllciIpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5lKCk7CiAgICAgICAgfQogICAgICAgIGlmIChwdWJsaWNJZCAhPT0gdm9pZCAwIHx8IHNjYW5uZXIuYigiU1lTVEVNIikpIHsKICAgICAgICAgIHRoaXMuZSgpOwogICAgICAgICAgc3lzdGVtSWQgPSB0aGlzLnMoKTsKICAgICAgICAgIGlmIChzeXN0ZW1JZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgdGhyb3cgdGhpcy5hKCJFeHBlY3RlZCBhIHN5c3RlbSBpZGVudGlmaWVyIik7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmUoKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgbGV0IGludGVybmFsU3Vic2V0OwogICAgICBpZiAoc2Nhbm5lci5iKCJbIikpIHsKICAgICAgICBpbnRlcm5hbFN1YnNldCA9IHNjYW5uZXIuQSgvXF1bXHgyMFx0XHJcbl0qPi8pOwogICAgICAgIGlmICghc2Nhbm5lci5iKCJdIikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgaW50ZXJuYWwgc3Vic2V0Iik7CiAgICAgICAgfQogICAgICAgIHRoaXMuZSgpOwogICAgICB9CiAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlVuY2xvc2VkIGRvY3R5cGUgZGVjbGFyYXRpb24iKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5mLnByZXNlcnZlRG9jdW1lbnRUeXBlID8gdGhpcy5qKG5ldyBYbWxEb2N1bWVudFR5cGUobmFtZSwgcHVibGljSWQsIHN5c3RlbUlkLCBpbnRlcm5hbFN1YnNldCksIHN0YXJ0SW5kZXgpIDogdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYW4gZWxlbWVudCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGFuIGVsZW1lbnQgd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1lbGVtZW50CiAgICAgKi8KICAgIEIoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCIpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGxldCBuYW1lID0gdGhpcy5yKCk7CiAgICAgIGlmICghbmFtZSkgewogICAgICAgIHNjYW5uZXIubyhzdGFydEluZGV4KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IGF0dHJpYnV0ZXMgPSB0aGlzLkkoKTsKICAgICAgbGV0IGlzRW1wdHkgPSAhIXNjYW5uZXIuYigiLz4iKTsKICAgICAgbGV0IGVsZW1lbnQgPSBuZXcgWG1sRWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzKTsKICAgICAgZWxlbWVudC5wYXJlbnQgPSB0aGlzLmw7CiAgICAgIGlmICghaXNFbXB0eSkgewogICAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgVW5jbG9zZWQgc3RhcnQgdGFnIGZvciBlbGVtZW50IFxgJHtuYW1lfVxgYCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubCA9IGVsZW1lbnQ7CiAgICAgICAgZG8gewogICAgICAgICAgdGhpcy5MKCk7CiAgICAgICAgfSB3aGlsZSAodGhpcy5CKCkgfHwgdGhpcy5NKCkgfHwgdGhpcy5LKCkgfHwgdGhpcy5FKCkgfHwgdGhpcy5EKCkpOwogICAgICAgIGxldCBlbmRUYWdNYXJrID0gc2Nhbm5lci5kOwogICAgICAgIGxldCBlbmRUYWdOYW1lOwogICAgICAgIGlmICghc2Nhbm5lci5iKCI8LyIpIHx8ICEoZW5kVGFnTmFtZSA9IHRoaXMucigpKSB8fCBlbmRUYWdOYW1lICE9PSBuYW1lKSB7CiAgICAgICAgICBzY2FubmVyLm8oZW5kVGFnTWFyayk7CiAgICAgICAgICB0aHJvdyB0aGlzLmEoYE1pc3NpbmcgZW5kIHRhZyBmb3IgZWxlbWVudCAke25hbWV9YCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZSgpOwogICAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgVW5jbG9zZWQgZW5kIHRhZyBmb3IgZWxlbWVudCAke25hbWV9YCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubCA9IGVsZW1lbnQucGFyZW50OwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmooZWxlbWVudCwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGFuIGBFcWAgcHJvZHVjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGFuIGBFcWAgcHJvZHVjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULUVxCiAgICAgKi8KICAgIHUoKSB7CiAgICAgIHRoaXMuZSgpOwogICAgICBpZiAodGhpcy5jLmIoIj0iKSkgewogICAgICAgIHRoaXMuZSgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYE1pc2NgIGNvbnRlbnQgaWYgcG9zc2libGUuCiAgICAgKgogICAgICogQHJldHVybnMgV2hldGhlciBhbnl0aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULU1pc2MKICAgICAqLwogICAgdygpIHsKICAgICAgcmV0dXJuIHRoaXMuRCgpIHx8IHRoaXMuRSgpIHx8IHRoaXMuZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBvbmUgb3IgbW9yZSBgTmFtZWAgY2hhcmFjdGVycyBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBgTmFtZWAgY2hhcmFjdGVycywgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vbmUgd2VyZSBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jTlQtTmFtZQogICAgICovCiAgICByKCkgewogICAgICByZXR1cm4gaXNOYW1lU3RhcnRDaGFyKHRoaXMuYy5oKCkpID8gdGhpcy5jLnYoaXNOYW1lQ2hhcikgOiBlbXB0eVN0cmluZzI7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1waQogICAgICovCiAgICBFKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgc3RhcnRJbmRleCA9IHNjYW5uZXIuZDsKICAgICAgaWYgKCFzY2FubmVyLmIoIjw/IikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IG5hbWUgPSB0aGlzLnIoKTsKICAgICAgaWYgKG5hbWUpIHsKICAgICAgICBpZiAobmFtZS50b0xvd2VyQ2FzZSgpID09PSAieG1sIikgewogICAgICAgICAgc2Nhbm5lci5vKHN0YXJ0SW5kZXgpOwogICAgICAgICAgdGhyb3cgdGhpcy5hKCJYTUwgZGVjbGFyYXRpb24gaXNuJ3QgYWxsb3dlZCBoZXJlIik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBwcm9jZXNzaW5nIGluc3RydWN0aW9uIik7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmUoKSkgewogICAgICAgIGlmIChzY2FubmVyLmIoIj8+IikpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbihuYW1lKSwgc3RhcnRJbmRleCk7CiAgICAgICAgfQogICAgICAgIHRocm93IHRoaXMuYSgiV2hpdGVzcGFjZSBpcyByZXF1aXJlZCBhZnRlciBhIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbmFtZSIpOwogICAgICB9CiAgICAgIGxldCBjb250ZW50ID0gc2Nhbm5lci50KCI/PiIpOwogICAgICB0aGlzLnAoY29udGVudCk7CiAgICAgIGlmICghc2Nhbm5lci5iKCI/PiIpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJVbnRlcm1pbmF0ZWQgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbihuYW1lLCBub3JtYWxpemVMaW5lQnJlYWtzKGNvbnRlbnQpKSwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgcHJvbG9nIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSBwcm9sb2cgd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNzZWMtcHJvbG9nLWR0ZAogICAgICovCiAgICBIKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgc3RhcnRJbmRleCA9IHNjYW5uZXIuZDsKICAgICAgdGhpcy5QKCk7CiAgICAgIHdoaWxlICh0aGlzLncoKSkgewogICAgICB9CiAgICAgIGlmICh0aGlzLk4oKSkgewogICAgICAgIHdoaWxlICh0aGlzLncoKSkgewogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3RhcnRJbmRleCA8IHNjYW5uZXIuZDsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYSBwdWJsaWMgaWRlbnRpZmllciBsaXRlcmFsIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zCiAgICAgKiAgIFZhbHVlIG9mIHRoZSBwdWJsaWMgaWRlbnRpZmllciBsaXRlcmFsIG1pbnVzIHF1b3Rlcywgb3IgYGZhbHNlYCBpZgogICAgICogICBub3RoaW5nIHdhcyBjb25zdW1lZC4gQW4gZW1wdHkgc3RyaW5nIGluZGljYXRlcyB0aGF0IGEgcHVibGljIGlkIGxpdGVyYWwKICAgICAqICAgd2FzIGNvbnN1bWVkIGJ1dCB3YXMgZW1wdHkuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1QdWJpZExpdGVyYWwKICAgICAqLwogICAgTygpIHsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSB0aGlzLmMuZDsKICAgICAgbGV0IHZhbHVlID0gdGhpcy5zKCk7CiAgICAgIGlmICh2YWx1ZSAhPT0gZmFsc2UgJiYgIS9eWy1ceDIwXHJcbmEtekEtWjAtOScoKSssLi86PT87ISojQCRfJV0qJC8udGVzdCh2YWx1ZSkpIHsKICAgICAgICB0aGlzLmMubyhzdGFydEluZGV4KTsKICAgICAgICB0aHJvdyB0aGlzLmEoIkludmFsaWQgY2hhcmFjdGVyIGluIHB1YmxpYyBpZGVudGlmaWVyIik7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhIHJlZmVyZW5jZSBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGRpZmZlcnMgZnJvbSBgY29uc3VtZUNvbnRlbnRSZWZlcmVuY2UoKWAgaW4gdGhhdCBhIGNvbnN1bWVkIHJlZmVyZW5jZQogICAgICogd2lsbCBiZSByZXR1cm5lZCByYXRoZXIgdGhhbiBhZGRlZCB0byB0aGUgZG9jdW1lbnQuCiAgICAgKgogICAgICogQHJldHVybnMKICAgICAqICAgUGFyc2VkIHJlZmVyZW5jZSB2YWx1ZSwgb3IgYGZhbHNlYCBpZiBub3RoaW5nIHdhcyBjb25zdW1lZCAodG8KICAgICAqICAgZGlzdGluZ3Vpc2ggZnJvbSBhIHJlZmVyZW5jZSB0aGF0IHJlc29sdmVzIHRvIGFuIGVtcHR5IHN0cmluZykuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1SZWZlcmVuY2UKICAgICAqLwogICAgQygpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgaWYgKCFzY2FubmVyLmIoIiYiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBsZXQgcmVmID0gc2Nhbm5lci52KGlzUmVmZXJlbmNlQ2hhcik7CiAgICAgIGlmIChzY2FubmVyLkYoKSAhPT0gIjsiKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJVbnRlcm1pbmF0ZWQgcmVmZXJlbmNlIChhIHJlZmVyZW5jZSBtdXN0IGVuZCB3aXRoIGA7YCkiKTsKICAgICAgfQogICAgICBsZXQgcGFyc2VkVmFsdWU7CiAgICAgIGlmIChyZWZbMF0gPT09ICIjIikgewogICAgICAgIGxldCBjb2RlUG9pbnQgPSByZWZbMV0gPT09ICJ4IiA/IHBhcnNlSW50KHJlZi5zbGljZSgyKSwgMTYpIDogcGFyc2VJbnQocmVmLnNsaWNlKDEpLCAxMCk7CiAgICAgICAgaWYgKGlzTmFOKGNvZGVQb2ludCkpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBjaGFyYWN0ZXIgcmVmZXJlbmNlIik7CiAgICAgICAgfQogICAgICAgIGlmICghaXNYbWxDb2RlUG9pbnQoY29kZVBvaW50KSkgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJDaGFyYWN0ZXIgcmVmZXJlbmNlIHJlc29sdmVzIHRvIGFuIGludmFsaWQgY2hhcmFjdGVyIik7CiAgICAgICAgfQogICAgICAgIHBhcnNlZFZhbHVlID0gU3RyaW5nLmZyb21Db2RlUG9pbnQoY29kZVBvaW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJzZWRWYWx1ZSA9IHByZWRlZmluZWRFbnRpdGllc1tyZWZdOwogICAgICAgIGlmIChwYXJzZWRWYWx1ZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICBsZXQgewogICAgICAgICAgICBpZ25vcmVVbmRlZmluZWRFbnRpdGllcywKICAgICAgICAgICAgcmVzb2x2ZVVuZGVmaW5lZEVudGl0eQogICAgICAgICAgfSA9IHRoaXMuZjsKICAgICAgICAgIGxldCB3cmFwcGVkUmVmID0gYCYke3JlZn07YDsKICAgICAgICAgIGlmIChyZXNvbHZlVW5kZWZpbmVkRW50aXR5KSB7CiAgICAgICAgICAgIGxldCByZXNvbHZlZFZhbHVlID0gcmVzb2x2ZVVuZGVmaW5lZEVudGl0eSh3cmFwcGVkUmVmKTsKICAgICAgICAgICAgaWYgKHJlc29sdmVkVmFsdWUgIT09IG51bGwgJiYgcmVzb2x2ZWRWYWx1ZSAhPT0gdm9pZCAwKSB7CiAgICAgICAgICAgICAgbGV0IHR5cGUgPSB0eXBlb2YgcmVzb2x2ZWRWYWx1ZTsKICAgICAgICAgICAgICBpZiAodHlwZSAhPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFxgcmVzb2x2ZVVuZGVmaW5lZEVudGl0eSgpXGAgbXVzdCByZXR1cm4gYSBzdHJpbmcsIFxgbnVsbFxgLCBvciBcYHVuZGVmaW5lZFxgLCBidXQgcmV0dXJuZWQgYSB2YWx1ZSBvZiB0eXBlICR7dHlwZX1gKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVkVmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChpZ25vcmVVbmRlZmluZWRFbnRpdGllcykgewogICAgICAgICAgICByZXR1cm4gd3JhcHBlZFJlZjsKICAgICAgICAgIH0KICAgICAgICAgIHNjYW5uZXIubygtd3JhcHBlZFJlZi5sZW5ndGgpOwogICAgICAgICAgdGhyb3cgdGhpcy5hKGBOYW1lZCBlbnRpdHkgaXNuJ3QgZGVmaW5lZDogJHt3cmFwcGVkUmVmfWApOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcGFyc2VkVmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgYFN5c3RlbUxpdGVyYWxgIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEEgYFN5c3RlbUxpdGVyYWxgIGlzIHNpbWlsYXIgdG8gYW4gYXR0cmlidXRlIHZhbHVlLCBidXQgYWxsb3dzIHRoZQogICAgICogY2hhcmFjdGVycyBgPGAgYW5kIGAmYCBhbmQgZG9lc24ndCByZXBsYWNlIHJlZmVyZW5jZXMuCiAgICAgKgogICAgICogQHJldHVybnMKICAgICAqICAgVmFsdWUgb2YgdGhlIGBTeXN0ZW1MaXRlcmFsYCBtaW51cyBxdW90ZXMsIG9yIGBmYWxzZWAgaWYgbm90aGluZyB3YXMKICAgICAqICAgY29uc3VtZWQuIEFuIGVtcHR5IHN0cmluZyBpbmRpY2F0ZXMgdGhhdCBhIGBTeXN0ZW1MaXRlcmFsYCB3YXMgY29uc3VtZWQKICAgICAqICAgYnV0IHdhcyBlbXB0eS4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULVN5c3RlbUxpdGVyYWwKICAgICAqLwogICAgcygpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHF1b3RlID0gc2Nhbm5lci5iKCciJykgfHwgc2Nhbm5lci5iKCInIik7CiAgICAgIGlmICghcXVvdGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IHZhbHVlID0gc2Nhbm5lci50KHF1b3RlKTsKICAgICAgdGhpcy5wKHZhbHVlKTsKICAgICAgaWYgKCFzY2FubmVyLmIocXVvdGUpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJNaXNzaW5nIGVuZCBxdW90ZSIpOwogICAgICB9CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgb25lIG9yIG1vcmUgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYW55IHdoaXRlc3BhY2UgY2hhcmFjdGVycyB3ZXJlIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyN3aGl0ZQogICAgICovCiAgICBlKCkgewogICAgICByZXR1cm4gISF0aGlzLmMudihpc1doaXRlc3BhY2UpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbiBYTUwgZGVjbGFyYXRpb24gaWYgcG9zc2libGUuCiAgICAgKgogICAgICogQHJldHVybnMgV2hldGhlciBhbiBYTUwgZGVjbGFyYXRpb24gd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1YTUxEZWNsCiAgICAgKi8KICAgIFAoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPD94bWwiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuZSgpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJJbnZhbGlkIFhNTCBkZWNsYXJhdGlvbiIpOwogICAgICB9CiAgICAgIGxldCB2ZXJzaW9uID0gISFzY2FubmVyLmIoInZlcnNpb24iKSAmJiB0aGlzLnUoKSAmJiB0aGlzLnMoKTsKICAgICAgaWYgKHZlcnNpb24gPT09IGZhbHNlKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJYTUwgdmVyc2lvbiBpcyBtaXNzaW5nIG9yIGludmFsaWQiKTsKICAgICAgfSBlbHNlIGlmICghL14xXC5bMC05XSskLy50ZXN0KHZlcnNpb24pKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJJbnZhbGlkIGNoYXJhY3RlciBpbiB2ZXJzaW9uIG51bWJlciIpOwogICAgICB9CiAgICAgIGxldCBlbmNvZGluZzsKICAgICAgbGV0IHN0YW5kYWxvbmU7CiAgICAgIGlmICh0aGlzLmUoKSkgewogICAgICAgIGVuY29kaW5nID0gISFzY2FubmVyLmIoImVuY29kaW5nIikgJiYgdGhpcy51KCkgJiYgdGhpcy5zKCk7CiAgICAgICAgaWYgKGVuY29kaW5nKSB7CiAgICAgICAgICB0aGlzLmUoKTsKICAgICAgICB9CiAgICAgICAgc3RhbmRhbG9uZSA9ICEhc2Nhbm5lci5iKCJzdGFuZGFsb25lIikgJiYgdGhpcy51KCkgJiYgdGhpcy5zKCk7CiAgICAgICAgaWYgKHN0YW5kYWxvbmUpIHsKICAgICAgICAgIGlmIChzdGFuZGFsb25lICE9PSAieWVzIiAmJiBzdGFuZGFsb25lICE9PSAibm8iKSB7CiAgICAgICAgICAgIHRocm93IHRoaXMuYSgnT25seSAieWVzIiBhbmQgIm5vIiBhcmUgcGVybWl0dGVkIGFzIHZhbHVlcyBvZiBgc3RhbmRhbG9uZWAnKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZSgpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIXNjYW5uZXIuYigiPz4iKSkgewogICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBvciB1bmNsb3NlZCBYTUwgZGVjbGFyYXRpb24iKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5mLnByZXNlcnZlWG1sRGVjbGFyYXRpb24gPyB0aGlzLmoobmV3IFhtbERlY2xhcmF0aW9uKAogICAgICAgIHZlcnNpb24sCiAgICAgICAgZW5jb2RpbmcgfHwgdm9pZCAwLAogICAgICAgIHN0YW5kYWxvbmUgfHwgdm9pZCAwCiAgICAgICksIHN0YXJ0SW5kZXgpIDogdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbiBgWG1sRXJyb3JgIGZvciB0aGUgY3VycmVudCBzY2FubmVyIHBvc2l0aW9uLgogICAgICovCiAgICBhKG1lc3NhZ2UpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBYbWxFcnJvcihtZXNzYWdlLCBzY2FubmVyLmQsIHNjYW5uZXIubSk7CiAgICB9CiAgICAvKioKICAgICAqIFRocm93cyBhbiBpbnZhbGlkIGNoYXJhY3RlciBlcnJvciBpZiBhbnkgY2hhcmFjdGVyIGluIHRoZSBnaXZlbiBfc3RyaW5nXwogICAgICogaXNuJ3QgYSB2YWxpZCBYTUwgY2hhcmFjdGVyLgogICAgICovCiAgICBwKHN0cmluZykgewogICAgICBsZXQgeyBsZW5ndGggfSA9IHN0cmluZzsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgICAgIGxldCBjcCA9IHN0cmluZy5jb2RlUG9pbnRBdChpKTsKICAgICAgICBpZiAoIWlzWG1sQ29kZVBvaW50KGNwKSkgewogICAgICAgICAgdGhpcy5jLm8oLShbLi4uc3RyaW5nXS5sZW5ndGggLSBpKSk7CiAgICAgICAgICB0aHJvdyB0aGlzLmEoIkludmFsaWQgY2hhcmFjdGVyIik7CiAgICAgICAgfQogICAgICAgIGlmIChjcCA+IDY1NTM1KSB7CiAgICAgICAgICBpICs9IDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKICBmdW5jdGlvbiBub3JtYWxpemVMaW5lQnJlYWtzKHRleHQpIHsKICAgIGxldCBpID0gMDsKICAgIHdoaWxlICgoaSA9IHRleHQuaW5kZXhPZigiXHIiLCBpKSkgIT09IC0xKSB7CiAgICAgIHRleHQgPSB0ZXh0W2kgKyAxXSA9PT0gIlxuIiA/IHRleHQuc2xpY2UoMCwgaSkgKyB0ZXh0LnNsaWNlKGkgKyAxKSA6IHRleHQuc2xpY2UoMCwgaSkgKyAiXG4iICsgdGV4dC5zbGljZShpICsgMSk7CiAgICB9CiAgICByZXR1cm4gdGV4dDsKICB9CiAgZnVuY3Rpb24gcGFyc2VYbWwoeG1sLCBvcHRpb25zKSB7CiAgICByZXR1cm4gbmV3IFBhcnNlcih4bWwsIG9wdGlvbnMpLmRvY3VtZW50OwogIH0KICBjbGFzcyBYbWxQYXJzZUVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgY29uc3RydWN0b3IobWVzc2FnZSkgewogICAgICBzdXBlcihtZXNzYWdlKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gcGFyc2VYbWxTdHJpbmcoeG1sU3RyaW5nKSB7CiAgICBsZXQgZG9jID0gbnVsbDsKICAgIHRyeSB7CiAgICAgIGRvYyA9IGJyb3dzZXIucGFyc2VYbWwoeG1sU3RyaW5nKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgbmV3IFhtbFBhcnNlRXJyb3IoZS5tZXNzYWdlKTsKICAgIH0KICAgIHJldHVybiBkb2M7CiAgfQogIGZ1bmN0aW9uIHN0cmlwTmFtZXNwYWNlKG5hbWUpIHsKICAgIGNvbnN0IGNvbG9uID0gbmFtZS5pbmRleE9mKCI6Iik7CiAgICByZXR1cm4gY29sb24gPiAtMSA/IG5hbWUuc3Vic3RyKGNvbG9uICsgMSkgOiBuYW1lOwogIH0KICBmdW5jdGlvbiBnZXRSb290RWxlbWVudCh4bWxEb2MpIHsKICAgIHJldHVybiB4bWxEb2MuY2hpbGRyZW5bMF07CiAgfQogIGZ1bmN0aW9uIGdldEVsZW1lbnROYW1lKGVsZW1lbnQpIHsKICAgIHJldHVybiBlbGVtZW50Lm5hbWUgfHwgIiI7CiAgfQogIGZ1bmN0aW9uIGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgbmFtZSwgbmVzdGVkID0gZmFsc2UpIHsKICAgIGNvbnN0IHN0cmlwcGVkTmFtZSA9IHN0cmlwTmFtZXNwYWNlKG5hbWUpOwogICAgZnVuY3Rpb24gcmVkdWNlcihwcmV2LCBjdXJyKSB7CiAgICAgIGlmIChzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShjdXJyKSkgPT09IHN0cmlwcGVkTmFtZSkgewogICAgICAgIHByZXYucHVzaChjdXJyKTsKICAgICAgfQogICAgICBpZiAobmVzdGVkICYmIEFycmF5LmlzQXJyYXkoY3Vyci5jaGlsZHJlbikpIHsKICAgICAgICByZXR1cm4gWy4uLnByZXYsIC4uLmN1cnIuY2hpbGRyZW4ucmVkdWNlKHJlZHVjZXIsIFtdKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHByZXY7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBlbGVtZW50ICYmIEFycmF5LmlzQXJyYXkoZWxlbWVudC5jaGlsZHJlbikgPyBlbGVtZW50LmNoaWxkcmVuLnJlZHVjZShyZWR1Y2VyLCBbXSkgOiBbXTsKICB9CiAgZnVuY3Rpb24gZmluZENoaWxkRWxlbWVudChlbGVtZW50LCBuYW1lLCBuZXN0ZWQgPSBmYWxzZSkgewogICAgcmV0dXJuIGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgbmFtZSwgbmVzdGVkKVswXSB8fCBudWxsOwogIH0KICBmdW5jdGlvbiBnZXRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCkgewogICAgcmV0dXJuIGVsZW1lbnQgJiYgQXJyYXkuaXNBcnJheShlbGVtZW50LmNoaWxkcmVuKSA/IFsKICAgICAgLi4uZWxlbWVudC5jaGlsZHJlbi5maWx0ZXIoCiAgICAgICAgKGVsKSA9PiBlbCBpbnN0YW5jZW9mIGJyb3dzZXIuWG1sRWxlbWVudAogICAgICApCiAgICBdIDogW107CiAgfQogIGZ1bmN0aW9uIGdldEVsZW1lbnRUZXh0KGVsZW1lbnQpIHsKICAgIGNvbnN0IHRleHROb2RlID0gZWxlbWVudCAmJiBBcnJheS5pc0FycmF5KGVsZW1lbnQuY2hpbGRyZW4pID8gZWxlbWVudC5jaGlsZHJlbi5maW5kKChub2RlKSA9PiBub2RlLnR5cGUgPT09ICJ0ZXh0IikgOiBudWxsOwogICAgcmV0dXJuIHRleHROb2RlID8gdGV4dE5vZGUudGV4dCA6ICIiOwogIH0KICBmdW5jdGlvbiBnZXRFbGVtZW50QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJOYW1lKSB7CiAgICByZXR1cm4gZWxlbWVudCAmJiBlbGVtZW50LmF0dHJpYnV0ZXNbYXR0ck5hbWVdIHx8ICIiOwogIH0KICBjbGFzcyBFbmRwb2ludEVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgY29uc3RydWN0b3IobWVzc2FnZSwgaHR0cFN0YXR1cywgaXNDcm9zc09yaWdpblJlbGF0ZWQpIHsKICAgICAgc3VwZXIobWVzc2FnZSk7CiAgICAgIHRoaXMuaHR0cFN0YXR1cyA9IGh0dHBTdGF0dXM7CiAgICAgIHRoaXMuaXNDcm9zc09yaWdpblJlbGF0ZWQgPSBpc0Nyb3NzT3JpZ2luUmVsYXRlZDsKICAgICAgdGhpcy5uYW1lID0gIkVuZHBvaW50RXJyb3IiOwogICAgfQogIH0KICBjbGFzcyBTZXJ2aWNlRXhjZXB0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKiBAcGFyYW0gbWVzc2FnZSBFcnJvciBtZXNzYWdlCiAgICAgKiBAcGFyYW0gcmVxdWVzdFVybCBVUkwgd2hpY2ggcmVzdWx0ZWQgaW4gdGhlIFNlcnZpY2VFeGNlcHRpb24KICAgICAqIEBwYXJhbSBjb2RlIE9wdGlvbmFsIFNlcnZpY2VFeGNlcHRpb24gY29kZQogICAgICogQHBhcmFtIGxvY2F0b3IgT3B0aW9uYWwgU2VydmljZUV4Y2VwdGlvbiBsb2NhdG9yCiAgICAgKiBAcGFyYW0gcmVzcG9uc2UgT3B0aW9uYWwgcmVzcG9uc2UgY29udGVudCByZWNlaXZlZAogICAgICovCiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXF1ZXN0VXJsLCBjb2RlLCBsb2NhdG9yLCByZXNwb25zZSkgewogICAgICBzdXBlcihtZXNzYWdlKTsKICAgICAgdGhpcy5yZXF1ZXN0VXJsID0gcmVxdWVzdFVybDsKICAgICAgdGhpcy5jb2RlID0gY29kZTsKICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjsKICAgICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlOwogICAgICB0aGlzLm5hbWUgPSAiU2VydmljZUV4Y2VwdGlvbkVycm9yIjsKICAgIH0KICB9CiAgZnVuY3Rpb24gcGFyc2Uoc2VydmljZUV4Y2VwdGlvbiwgdXJsKSB7CiAgICBjb25zdCBlcnJvckNvZGUgPSBnZXRFbGVtZW50QXR0cmlidXRlKHNlcnZpY2VFeGNlcHRpb24sICJjb2RlIikgfHwgZ2V0RWxlbWVudEF0dHJpYnV0ZShzZXJ2aWNlRXhjZXB0aW9uLCAiZXhjZXB0aW9uQ29kZSIpOwogICAgY29uc3QgZXJyb3JMb2NhdG9yID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShzZXJ2aWNlRXhjZXB0aW9uLCAibG9jYXRvciIpOwogICAgY29uc3QgdGV4dEVsZW1lbnQgPSBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VFeGNlcHRpb24sICJFeGNlcHRpb25UZXh0IikgfHwgc2VydmljZUV4Y2VwdGlvbjsKICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGdldEVsZW1lbnRUZXh0KHRleHRFbGVtZW50KS50cmltKCk7CiAgICByZXR1cm4gbmV3IFNlcnZpY2VFeGNlcHRpb25FcnJvcigKICAgICAgZXJyb3JNZXNzYWdlLAogICAgICB1cmwsCiAgICAgIGVycm9yQ29kZSwKICAgICAgZXJyb3JMb2NhdG9yLAogICAgICBzZXJ2aWNlRXhjZXB0aW9uLmRvY3VtZW50CiAgICApOwogIH0KICBmdW5jdGlvbiBjaGVjayhyZXNwb25zZSwgdXJsKSB7CiAgICBjb25zdCByb290RWwgPSBnZXRSb290RWxlbWVudChyZXNwb25zZSk7CiAgICBjb25zdCByb290RWxOYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUocm9vdEVsKSk7CiAgICBpZiAocm9vdEVsTmFtZSA9PT0gIlNlcnZpY2VFeGNlcHRpb25SZXBvcnQiKSB7CiAgICAgIGNvbnN0IGVycm9yID0gZmluZENoaWxkRWxlbWVudChyb290RWwsICJTZXJ2aWNlRXhjZXB0aW9uIik7CiAgICAgIGlmIChlcnJvcikgewogICAgICAgIHRocm93IHBhcnNlKGVycm9yLCB1cmwpOwogICAgICB9CiAgICB9CiAgICBpZiAocm9vdEVsTmFtZSA9PT0gIkV4Y2VwdGlvblJlcG9ydCIpIHsKICAgICAgY29uc3QgZXJyb3IgPSBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIkV4Y2VwdGlvbiIpOwogICAgICBpZiAoZXJyb3IpIHsKICAgICAgICB0aHJvdyBwYXJzZShlcnJvciwgdXJsKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0KICBmdW5jdGlvbiBlbmNvZGVFcnJvcihlcnJvcikgewogICAgY29uc3QgYmFzZSA9IHsKICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLAogICAgICBuYW1lOiBlcnJvci5uYW1lCiAgICB9OwogICAgaWYgKGVycm9yIGluc3RhbmNlb2YgU2VydmljZUV4Y2VwdGlvbkVycm9yKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgLi4uYmFzZSwKICAgICAgICBjb2RlOiBlcnJvci5jb2RlLAogICAgICAgIGxvY2F0b3I6IGVycm9yLmxvY2F0b3IsCiAgICAgICAgcmVzcG9uc2U6IGVycm9yLnJlc3BvbnNlLAogICAgICAgIHJlcXVlc3RVcmw6IGVycm9yLnJlcXVlc3RVcmwKICAgICAgfTsKICAgIH0KICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVuZHBvaW50RXJyb3IpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5iYXNlLAogICAgICAgIGh0dHBTdGF0dXM6IGVycm9yLmh0dHBTdGF0dXMsCiAgICAgICAgaXNDcm9zc09yaWdpblJlbGF0ZWQ6IGVycm9yLmlzQ3Jvc3NPcmlnaW5SZWxhdGVkCiAgICAgIH07CiAgICB9CiAgICByZXR1cm4gYmFzZTsKICB9CiAgY29uc3QgZmFsbGJhY2tFdmVudFRhcmdldCA9IG5ldyBFdmVudFRhcmdldCgpOwogIGZ1bmN0aW9uIGFkZFRhc2tIYW5kbGVyKHRhc2tOYW1lLCBzY29wZSwgaGFuZGxlcikgewogICAgY29uc3QgdXNlV29ya2VyID0gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAidW5kZWZpbmVkIjsKICAgIGNvbnN0IGV2ZW50SGFuZGxlciA9IGFzeW5jIChyZXF1ZXN0KSA9PiB7CiAgICAgIGlmIChyZXF1ZXN0LnRhc2tOYW1lID09PSB0YXNrTmFtZSkgewogICAgICAgIGxldCByZXNwb25zZSwgZXJyb3I7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgaGFuZGxlcihyZXF1ZXN0LnBhcmFtcyk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgZXJyb3IgPSBlbmNvZGVFcnJvcihlKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICgKICAgICAgICAgIC8qKiBAdHlwZSB7V29ya2VyUmVzcG9uc2V9ICovCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhc2tOYW1lLAogICAgICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3QucmVxdWVzdElkLAogICAgICAgICAgICAuLi5yZXNwb25zZSAmJiB7IHJlc3BvbnNlIH0sCiAgICAgICAgICAgIC4uLmVycm9yICYmIHsgZXJyb3IgfQogICAgICAgICAgfQogICAgICAgICk7CiAgICAgICAgaWYgKHVzZVdvcmtlcikgewogICAgICAgICAgc2NvcGUucG9zdE1lc3NhZ2UobWVzc2FnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZhbGxiYWNrRXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudCgKICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KCJvZ2MtY2xpZW50LnJlc3BvbnNlIiwgewogICAgICAgICAgICAgIGRldGFpbDogbWVzc2FnZQogICAgICAgICAgICB9KQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBpZiAodXNlV29ya2VyKSB7CiAgICAgIHNjb3BlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCAoZXZlbnQpID0+IGV2ZW50SGFuZGxlcihldmVudC5kYXRhKSk7CiAgICB9IGVsc2UgewogICAgICBmYWxsYmFja0V2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgIm9nYy1jbGllbnQucmVxdWVzdCIsCiAgICAgICAgKGV2ZW50KSA9PiBldmVudEhhbmRsZXIoZXZlbnQuZGV0YWlsKQogICAgICApOwogICAgfQogIH0KICBjb25zdCBFTkNPRElOR1MgPSBbInV0Zi04IiwgInV0Zi0xNiIsICJpc28tODg1OS0xIl07CiAgY29uc3QgRkFMTEJBQ0tfRU5DT0RJTkcgPSAidXRmLTgiOwogIGZ1bmN0aW9uIGV4dHJhY3RFbmNvZGluZyhjb250ZW50VHlwZSkgewogICAgY29uc3QgbWF0Y2hlcyA9IC9jaGFyc2V0PShbXjtdKykvLmV4ZWMoY29udGVudFR5cGUpOwogICAgcmV0dXJuIG1hdGNoZXMgPyBtYXRjaGVzWzFdIDogbnVsbDsKICB9CiAgZnVuY3Rpb24gZGVjb2RlU3RyaW5nKGJ1ZmZlciwgY29udGVudFR5cGUpIHsKICAgIGNvbnN0IGVuY29kaW5nSGludCA9IGNvbnRlbnRUeXBlID8gZXh0cmFjdEVuY29kaW5nKGNvbnRlbnRUeXBlKSA6IG51bGw7CiAgICBjb25zdCBlbmNvZGluZ0F0dGVtcHRzID0gZW5jb2RpbmdIaW50ID8gW2VuY29kaW5nSGludCwgLi4uRU5DT0RJTkdTXSA6IEVOQ09ESU5HUzsKICAgIGZvciAoY29uc3QgZW5jb2Rpbmcgb2YgZW5jb2RpbmdBdHRlbXB0cykgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmcsIHsgZmF0YWw6IHRydWUgfSk7CiAgICAgICAgcmV0dXJuIGRlY29kZXIuZGVjb2RlKGJ1ZmZlcik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgfQogICAgfQogICAgY29uc29sZS53YXJuKAogICAgICBgW29nYy1jbGllbnRdIFhNTCBkb2N1bWVudCBlbmNvZGluZyBjb3VsZCBub3QgYmUgZGV0ZXJtaW5lZCwgZmFsbGluZyBiYWNrIHRvICR7RkFMTEJBQ0tfRU5DT0RJTkd9LmAKICAgICk7CiAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKEZBTExCQUNLX0VOQ09ESU5HKS5kZWNvZGUoYnVmZmVyKTsKICB9CiAgY29uc3QgZmV0Y2hQcm9taXNlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgbGV0IGZldGNoT3B0aW9ucyA9IHt9OwogIGZ1bmN0aW9uIHNldEZldGNoT3B0aW9ucyhvcHRpb25zKSB7CiAgICBmZXRjaE9wdGlvbnMgPSBvcHRpb25zOwogIH0KICBmdW5jdGlvbiBnZXRGZXRjaE9wdGlvbnMoKSB7CiAgICByZXR1cm4gZmV0Y2hPcHRpb25zOwogIH0KICBmdW5jdGlvbiBzaGFyZWRGZXRjaCh1cmwsIG1ldGhvZCA9ICJHRVQiLCBhc0pzb24pIHsKICAgIGxldCBmZXRjaEtleSA9IGAke21ldGhvZH0jJHt1cmx9YDsKICAgIGlmIChhc0pzb24pIHsKICAgICAgZmV0Y2hLZXkgPSBgJHttZXRob2R9I2FzSnNvbiMke3VybH1gOwogICAgfQogICAgaWYgKGZldGNoUHJvbWlzZXMuaGFzKGZldGNoS2V5KSkgewogICAgICByZXR1cm4gZmV0Y2hQcm9taXNlcy5nZXQoZmV0Y2hLZXkpOwogICAgfQogICAgY29uc3Qgb3B0aW9ucyA9IHsgLi4uZ2V0RmV0Y2hPcHRpb25zKCkgfTsKICAgIG9wdGlvbnMubWV0aG9kID0gbWV0aG9kOwogICAgaWYgKGFzSnNvbikgewogICAgICBvcHRpb25zLmhlYWRlcnMgPSAiaGVhZGVycyIgaW4gb3B0aW9ucyA/IG9wdGlvbnMuaGVhZGVycyA6IHt9OwogICAgICBvcHRpb25zLmhlYWRlcnNbIkFjY2VwdCJdID0gImFwcGxpY2F0aW9uL2pzb24sYXBwbGljYXRpb24vc2NoZW1hK2pzb24iOwogICAgfQogICAgY29uc3QgcHJvbWlzZSA9IGZldGNoKHVybCwgb3B0aW9ucykuY2F0Y2goKGUpID0+IGUpLnRoZW4oKHJlc3ApID0+IHsKICAgICAgZmV0Y2hQcm9taXNlcy5kZWxldGUoZmV0Y2hLZXkpOwogICAgICByZXR1cm4gcmVzcDsKICAgIH0pOwogICAgZmV0Y2hQcm9taXNlcy5zZXQoZmV0Y2hLZXksIHByb21pc2UpOwogICAgcmV0dXJuIHByb21pc2UudGhlbigocmVzcCkgPT4gewogICAgICBpZiAocmVzcCBpbnN0YW5jZW9mIEVycm9yKQogICAgICAgIHRocm93IHJlc3A7CiAgICAgIHJldHVybiByZXNwLmNsb25lKCk7CiAgICB9KTsKICB9CiAgZnVuY3Rpb24gcXVlcnlYbWxEb2N1bWVudCh1cmwpIHsKICAgIHJldHVybiBzaGFyZWRGZXRjaCh1cmwpLmNhdGNoKAogICAgICAoKSA9PiAoCiAgICAgICAgLy8gYXR0ZW1wdCBhIEhFQUQgdG8gc2VlIGlmIHRoZSBmYWlsdXJlIGNvbWVzIGZyb20gQ09SUyBvciB0aGUgc2VydmljZSBpcyBnZW5lcmFsbHkgdW5yZWFjaGFibGUKICAgICAgICBmZXRjaCh1cmwsIHsgLi4uZ2V0RmV0Y2hPcHRpb25zKCksIG1ldGhvZDogIkhFQUQiLCBtb2RlOiAibm8tY29ycyIgfSkuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aHJvdyBuZXcgRW5kcG9pbnRFcnJvcigKICAgICAgICAgICAgYEZldGNoaW5nIHRoZSBkb2N1bWVudCBmYWlsZWQgZWl0aGVyIGR1ZSB0byBuZXR3b3JrIGVycm9ycyBvciB1bnJlYWNoYWJsZSBob3N0LCBlcnJvciBpczogJHtlcnJvci5tZXNzYWdlfWAsCiAgICAgICAgICAgIDAsCiAgICAgICAgICAgIGZhbHNlCiAgICAgICAgICApOwogICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhyb3cgbmV3IEVuZHBvaW50RXJyb3IoCiAgICAgICAgICAgIGBUaGUgZG9jdW1lbnQgY291bGQgbm90IGJlIGZldGNoZWQgZHVlIHRvIENPUlMgbGltaXRhdGlvbnNgLAogICAgICAgICAgICAwLAogICAgICAgICAgICB0cnVlCiAgICAgICAgICApOwogICAgICAgIH0pCiAgICAgICkKICAgICkudGhlbihhc3luYyAocmVzcCkgPT4gewogICAgICBpZiAoIXJlc3Aub2spIHsKICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcC50ZXh0KCk7CiAgICAgICAgdGhyb3cgbmV3IEVuZHBvaW50RXJyb3IoCiAgICAgICAgICBgUmVjZWl2ZWQgYW4gZXJyb3Igd2l0aCBjb2RlICR7cmVzcC5zdGF0dXN9OiAke3RleHR9YCwKICAgICAgICAgIHJlc3Auc3RhdHVzLAogICAgICAgICAgZmFsc2UKICAgICAgICApOwogICAgICB9CiAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHJlc3AuYXJyYXlCdWZmZXIoKTsKICAgICAgY29uc3QgY29udGVudFR5cGVIZWFkZXIgPSByZXNwLmhlYWRlcnMuZ2V0KCJDb250ZW50LVR5cGUiKTsKICAgICAgcmV0dXJuIGRlY29kZVN0cmluZyhidWZmZXIsIGNvbnRlbnRUeXBlSGVhZGVyKTsKICAgIH0pLnRoZW4oKHhtbCkgPT4gcGFyc2VYbWxTdHJpbmcoeG1sKSk7CiAgfQogIGZ1bmN0aW9uIHNldFF1ZXJ5UGFyYW1zKHVybCwgcGFyYW1zKSB7CiAgICBjb25zdCBlbmNvZGVkVXJsTWF0Y2ggPSB1cmwubWF0Y2goLyhodHRwcz8lM0ElMkYlMkZbXi9dKykkLyk7CiAgICBpZiAoZW5jb2RlZFVybE1hdGNoKSB7CiAgICAgIGNvbnN0IGVuY29kZWRVcmwgPSBlbmNvZGVkVXJsTWF0Y2hbMV07CiAgICAgIGNvbnN0IG1vZGlmaWVkVXJsID0gc2V0UXVlcnlQYXJhbXMoZGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZWRVcmwpLCBwYXJhbXMpOwogICAgICByZXR1cm4gdXJsLnJlcGxhY2UoZW5jb2RlZFVybCwgZW5jb2RlVVJJQ29tcG9uZW50KG1vZGlmaWVkVXJsKSk7CiAgICB9CiAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKHVybCk7CiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocGFyYW1zKTsKICAgIGNvbnN0IGtleXNMb3dlciA9IGtleXMubWFwKChrZXkpID0+IGtleS50b0xvd2VyQ2FzZSgpKTsKICAgIGNvbnN0IHRvRGVsZXRlID0gW107CiAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHVybE9iai5zZWFyY2hQYXJhbXMua2V5cygpKSB7CiAgICAgIGlmIChrZXlzTG93ZXIuaW5kZXhPZihwYXJhbS50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7CiAgICAgICAgdG9EZWxldGUucHVzaChwYXJhbSk7CiAgICAgIH0KICAgIH0KICAgIHRvRGVsZXRlLm1hcCgocGFyYW0pID0+IHVybE9iai5zZWFyY2hQYXJhbXMuZGVsZXRlKHBhcmFtKSk7CiAgICBrZXlzLmZvckVhY2goCiAgICAgIChrZXkpID0+IHVybE9iai5zZWFyY2hQYXJhbXMuc2V0KAogICAgICAgIGtleSwKICAgICAgICBwYXJhbXNba2V5XSA9PT0gdHJ1ZSA/ICIiIDogcGFyYW1zW2tleV0KICAgICAgKQogICAgKTsKICAgIHJldHVybiB1cmxPYmoudG9TdHJpbmcoKTsKICB9CiAgY29uc3QgTGF0TG9uQ3JzTGlzdCA9IFsKICAgICJFUFNHOjQwNDYiLAogICAgLy8gUkdSREMgMjAwNQogICAgIkVQU0c6NDA3NSIsCiAgICAvLyBTUkVGOTgKICAgICJFUFNHOjQxMjAiLAogICAgLy8gR3JlZWsKICAgICJFUFNHOjQxMjIiLAogICAgLy8gQVRTNzcKICAgICJFUFNHOjQxMjQiLAogICAgLy8gUlQ5MAogICAgIkVQU0c6NDEyNiIsCiAgICAvLyBMS1M5NCAoRVRSUzg5KQogICAgIkVQU0c6NDE0OSIsCiAgICAvLyBDSDE5MDMKICAgICJFUFNHOjQxNTEiLAogICAgLy8gQ0hUUkY5NQogICAgIkVQU0c6NDE1MyIsCiAgICAvLyBSYXNzYWRpcmFuCiAgICAiRVBTRzo0MTU1IiwKICAgIC8vIERhYm9sYSAxOTgxCiAgICAiRVBTRzo0MTU3IiwKICAgIC8vIE1vdW50IERpbGxvbgogICAgIkVQU0c6NDE1OSIsCiAgICAvLyBFTEQ3OQogICAgIkVQU0c6NDE2MSIsCiAgICAvLyBQYW1wYSBkZWwgQ2FzdGlsbG8KICAgICJFUFNHOjQxNjMiLAogICAgLy8gWWVtZW4gTkdOOTYKICAgICJFUFNHOjQxNjUiLAogICAgLy8gQmlzc2F1CiAgICAiRVBTRzo0MTY3IiwKICAgIC8vIE5aR0QyMDAwCiAgICAiRVBTRzo0MTY5IiwKICAgIC8vIEFtZXJpY2FuIFNhbW9hIDE5NjIKICAgICJFUFNHOjQxNzEiLAogICAgLy8gUkdGOTMKICAgICJFUFNHOjQxNzMiLAogICAgLy8gSVJFTkVUOTUKICAgICJFUFNHOjQxNzUiLAogICAgLy8gU2llcnJhIExlb25lIDE5NjgKICAgICJFUFNHOjQxNzgiLAogICAgLy8gUHVsa292byAxOTQyKDgzKQogICAgIkVQU0c6NDE4MCIsCiAgICAvLyBFU1Q5NwogICAgIkVQU0c6NDE4MiIsCiAgICAvLyBBem9yZXMgT2NjaWRlbnRhbCAxOTM5CiAgICAiRVBTRzo0MTg0IiwKICAgIC8vIEF6b3JlcyBPcmllbnRhbCAxOTQwCiAgICAiRVBTRzo0MTg4IiwKICAgIC8vIE9TTkkgMTk1MgogICAgIkVQU0c6NDE5MCIsCiAgICAvLyBQT1NHQVIgOTgKICAgICJFUFNHOjQxOTEiLAogICAgLy8gQWxiYW5pYW4gMTk4NwogICAgIkVQU0c6NDE5NiIsCiAgICAvLyBBbW1hc3NhbGlrIDE5NTgKICAgICJFUFNHOjQxOTgiLAogICAgLy8gS291c3NlcmkKICAgICJFUFNHOjQyMDIiLAogICAgLy8gQUdENjYKICAgICJFUFNHOjQyMTAiLAogICAgLy8gQXJjIDE5NjAKICAgICJFUFNHOjQyMTEiLAogICAgLy8gQmF0YXZpYQogICAgIkVQU0c6NDIxNCIsCiAgICAvLyBCZWlqaW5nIDE5NTQKICAgICJFUFNHOjQyMjYiLAogICAgLy8gQ290ZSBkJ0l2b2lyZQogICAgIkVQU0c6NDIyOSIsCiAgICAvLyBFZ3lwdCAxOTA3CiAgICAiRVBTRzo0MjMxIiwKICAgIC8vIEVEODcKICAgICJFUFNHOjQyMzMiLAogICAgLy8gR2FuZGFqaWthIDE5NzAKICAgICJFUFNHOjQyMzYiLAogICAgLy8gSHUgVHp1IFNoYW4gMTk1MAogICAgIkVQU0c6NDIzOCIsCiAgICAvLyBJRDc0CiAgICAiRVBTRzo0MjQwIiwKICAgIC8vIEluZGlhbiAxOTc1CiAgICAiRVBTRzo0MjQyIiwKICAgIC8vIEpBRDY5CiAgICAiRVBTRzo0MjQ0IiwKICAgIC8vIEthbmRhd2FsYQogICAgIkVQU0c6NDI0NiIsCiAgICAvLyBLT0MKICAgICJFUFNHOjQyNDgiLAogICAgLy8gUFNBRDU2CiAgICAiRVBTRzo0MjUwIiwKICAgIC8vIExlaWdvbgogICAgIkVQU0c6NDI1MiIsCiAgICAvLyBMb21lCiAgICAiRVBTRzo0MjU1IiwKICAgIC8vIEhlcmF0IE5vcnRoCiAgICAiRVBTRzo0MjU4IiwKICAgIC8vIEVUUlM4OQogICAgIkVQU0c6NDI2MSIsCiAgICAvLyBNZXJjaGljaAogICAgIkVQU0c6NDI2NCIsCiAgICAvLyBNaGFzdAogICAgIkVQU0c6NDI2NyIsCiAgICAvLyBOQUQyNwogICAgIkVQU0c6NDI3MCIsCiAgICAvLyBOYWhyd2FuIDE5NjcKICAgICJFUFNHOjQyNzMiLAogICAgLy8gTkdPIDE5NDgKICAgICJFUFNHOjQyNzYiLAogICAgLy8gTlNXQyA5Wi0yCiAgICAiRVBTRzo0Mjc5IiwKICAgIC8vIE9TKFNOKTgwCiAgICAiRVBTRzo0MjgxIiwKICAgIC8vIFBhbGVzdGluZSAxOTIzCiAgICAiRVBTRzo0Mjg0IiwKICAgIC8vIFB1bGtvdm8gMTk0MgogICAgIkVQU0c6NDI4NiIsCiAgICAvLyBRYXRhciAxOTQ4CiAgICAiRVBTRzo0Mjg4IiwKICAgIC8vIExvbWEgUXVpbnRhbmEKICAgICJFUFNHOjQyOTIiLAogICAgLy8gU2FwcGVyIEhpbGwgMTk0MwogICAgIkVQU0c6NDI5NSIsCiAgICAvLyBTZXJpbmR1bmcKICAgICJFUFNHOjQyOTciLAogICAgLy8gVGFuYW5hcml2ZQogICAgIkVQU0c6NDI5OSIsCiAgICAvLyBUTTY1CiAgICAiRVBTRzo0MzAyIiwKICAgIC8vIFRyaW5pZGFkIDE5MDMKICAgICJFUFNHOjQzMjQiLAogICAgLy8gV0dTIDcyQkUKICAgICJFUFNHOjQzMjYiCiAgICAvLyBXR1MgODQKICBdOwogIGZ1bmN0aW9uIGhhc0ludmVydGVkQ29vcmRpbmF0ZXMoY3JzTmFtZSkgewogICAgcmV0dXJuIExhdExvbkNyc0xpc3QuaW5kZXhPZihzaW1wbGlmeUVwc2dVcm4oY3JzTmFtZSkpID4gLTE7CiAgfQogIGZ1bmN0aW9uIHNpbXBsaWZ5RXBzZ1VybihmdWxsQ3JzTmFtZSkgewogICAgaWYgKC9edXJuOig/OngtKT9vZ2M6ZGVmOmNyczplcHNnOi8udGVzdChmdWxsQ3JzTmFtZS50b0xvd2VyQ2FzZSgpKSkgewogICAgICBjb25zdCBjb2RlID0gLyhbMC05XSspJC8uZXhlYyhmdWxsQ3JzTmFtZSlbMV07CiAgICAgIHJldHVybiBgRVBTRzoke2NvZGV9YDsKICAgIH0KICAgIHJldHVybiBmdWxsQ3JzTmFtZTsKICB9CiAgZnVuY3Rpb24gcmVhZE9wZXJhdGlvblVybHNGcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCB1cmxzID0ge307CiAgICBjb25zdCBjYXBhYmlsaXR5ID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgIkNhcGFiaWxpdHkiCiAgICApOwogICAgY29uc3QgcmVxdWVzdCA9IGZpbmRDaGlsZEVsZW1lbnQoY2FwYWJpbGl0eSwgIlJlcXVlc3QiKTsKICAgIGdldENoaWxkcmVuRWxlbWVudChyZXF1ZXN0KS5mb3JFYWNoKChvcGVyYXRpb24pID0+IHsKICAgICAgY29uc3Qgb3BlcmF0aW9uTmFtZSA9IHN0cmlwTmFtZXNwYWNlKGdldEVsZW1lbnROYW1lKG9wZXJhdGlvbikpOwogICAgICB1cmxzW29wZXJhdGlvbk5hbWVdID0gcGFyc2VPcGVyYXRpb24ob3BlcmF0aW9uKTsKICAgIH0pOwogICAgcmV0dXJuIHVybHM7CiAgfQogIGZ1bmN0aW9uIHJlYWRWZXJzaW9uRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYykgewogICAgcmV0dXJuIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYykuYXR0cmlidXRlc1sidmVyc2lvbiJdOwogIH0KICBmdW5jdGlvbiByZWFkTGF5ZXJzRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgdmVyc2lvbiA9IHJlYWRWZXJzaW9uRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBjYXBhYmlsaXR5ID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgIkNhcGFiaWxpdHkiCiAgICApOwogICAgcmV0dXJuIGZpbmRDaGlsZHJlbkVsZW1lbnQoY2FwYWJpbGl0eSwgIkxheWVyIikubWFwKAogICAgICAobGF5ZXJFbCkgPT4gcGFyc2VMYXllcihsYXllckVsLCB2ZXJzaW9uKQogICAgKTsKICB9CiAgZnVuY3Rpb24gcmVhZE91dHB1dEZvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCBjYXBhYmlsaXR5ID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgIkNhcGFiaWxpdHkiCiAgICApOwogICAgY29uc3QgZ2V0TWFwID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChjYXBhYmlsaXR5LCAiUmVxdWVzdCIpLAogICAgICAiR2V0TWFwIgogICAgKTsKICAgIGNvbnN0IG91dHB1dEZvcm1hdHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGdldE1hcCwgIkZvcm1hdCIpLm1hcCgKICAgICAgZ2V0RWxlbWVudFRleHQKICAgICk7CiAgICByZXR1cm4gb3V0cHV0Rm9ybWF0czsKICB9CiAgZnVuY3Rpb24gcmVhZEluZm9Gb3JtYXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiQ2FwYWJpbGl0eSIKICAgICk7CiAgICBjb25zdCBnZXRGZWF0dXJlSW5mbyA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY2FwYWJpbGl0eSwgIlJlcXVlc3QiKSwKICAgICAgIkdldEZlYXR1cmVJbmZvIgogICAgKTsKICAgIGNvbnN0IG91dHB1dEZvcm1hdHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGdldEZlYXR1cmVJbmZvLCAiRm9ybWF0IikubWFwKAogICAgICBnZXRFbGVtZW50VGV4dAogICAgKTsKICAgIHJldHVybiBvdXRwdXRGb3JtYXRzOwogIH0KICBmdW5jdGlvbiByZWFkRXhjZXB0aW9uRm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCBjYXBhYmlsaXR5ID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgIkNhcGFiaWxpdHkiCiAgICApOwogICAgY29uc3QgZXhjZXB0aW9uID0gZmluZENoaWxkRWxlbWVudChjYXBhYmlsaXR5LCAiRXhjZXB0aW9uIik7CiAgICBjb25zdCBleGNlcHRpb25Gb3JtYXRzID0gZmluZENoaWxkcmVuRWxlbWVudChleGNlcHRpb24sICJGb3JtYXQiKS5tYXAoCiAgICAgIGdldEVsZW1lbnRUZXh0CiAgICApOwogICAgcmV0dXJuIGV4Y2VwdGlvbkZvcm1hdHM7CiAgfQogIGZ1bmN0aW9uIHJlYWRJbmZvRnJvbUNhcGFiaWxpdGllcyQyKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3Qgc2VydmljZSA9IGZpbmRDaGlsZEVsZW1lbnQoZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwgIlNlcnZpY2UiKTsKICAgIGNvbnN0IG91dHB1dEZvcm1hdHMgPSByZWFkT3V0cHV0Rm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3QgaW5mb0Zvcm1hdHMgPSByZWFkSW5mb0Zvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBleGNlcHRpb25Gb3JtYXRzID0gcmVhZEV4Y2VwdGlvbkZvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBrZXl3b3JkcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIktleXdvcmRMaXN0IiksCiAgICAgICJLZXl3b3JkIgogICAgKS5tYXAoZ2V0RWxlbWVudFRleHQpLmZpbHRlcigodiwgaSwgYXJyKSA9PiBhcnIuaW5kZXhPZih2KSA9PT0gaSk7CiAgICBjb25zdCBwcm92aWRlciA9IHJlYWRQcm92aWRlckZyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpOwogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIlRpdGxlIikpLAogICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJOYW1lIikpLAogICAgICBhYnN0cmFjdDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiQWJzdHJhY3QiKSksCiAgICAgIG91dHB1dEZvcm1hdHMsCiAgICAgIGluZm9Gb3JtYXRzLAogICAgICBleGNlcHRpb25Gb3JtYXRzLAogICAgICBmZWVzOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJGZWVzIikpLAogICAgICBjb25zdHJhaW50czogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiQWNjZXNzQ29uc3RyYWludHMiKSksCiAgICAgIHByb3ZpZGVyLAogICAgICBrZXl3b3JkcwogICAgfTsKICB9CiAgZnVuY3Rpb24gcGFyc2VPcGVyYXRpb24ob3BlcmF0aW9uKSB7CiAgICBjb25zdCB1cmxzID0ge307CiAgICBjb25zdCBkY3BUeXBlID0gZmluZENoaWxkcmVuRWxlbWVudChvcGVyYXRpb24sICJEQ1BUeXBlIik7CiAgICBjb25zdCBodHRwID0gZGNwVHlwZS5mbGF0TWFwKChkKSA9PiBmaW5kQ2hpbGRFbGVtZW50KGQsICJIVFRQIikpOwogICAgY29uc3QgbWV0aG9kcyA9IGh0dHAuZmxhdE1hcCgoaCkgPT4gZ2V0Q2hpbGRyZW5FbGVtZW50KGgpKTsKICAgIG1ldGhvZHMuZm9yRWFjaCgobWV0aG9kKSA9PiB7CiAgICAgIGNvbnN0IG9ubGluZVJlc291cmNlID0gZmluZENoaWxkRWxlbWVudChtZXRob2QsICJPbmxpbmVSZXNvdXJjZSIpOwogICAgICBjb25zdCBtZXRob2ROYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUobWV0aG9kKSk7CiAgICAgIHVybHNbbWV0aG9kTmFtZV0gPSBnZXRFbGVtZW50QXR0cmlidXRlKG9ubGluZVJlc291cmNlLCAieGxpbms6aHJlZiIpOwogICAgfSk7CiAgICByZXR1cm4gdXJsczsKICB9CiAgZnVuY3Rpb24gcGFyc2VMYXllcihsYXllckVsLCB2ZXJzaW9uLCBpbmhlcml0ZWRTcnMgPSBbXSwgaW5oZXJpdGVkU3R5bGVzID0gW10sIGluaGVyaXRlZEF0dHJpYnV0aW9uID0gbnVsbCwgaW5oZXJpdGVkQm91bmRpbmdCb3hlcyA9IG51bGwsIGluaGVyaXRlZE1heFNjYWxlRGVub20gPSBudWxsLCBpbmhlcml0ZWRNaW5TY2FsZURlbm9tID0gbnVsbCkgewogICAgY29uc3Qgc3JzVGFnID0gdmVyc2lvbiA9PT0gIjEuMy4wIiA/ICJDUlMiIDogIlNSUyI7CiAgICBjb25zdCBzcnNMaXN0ID0gZmluZENoaWxkcmVuRWxlbWVudChsYXllckVsLCBzcnNUYWcpLm1hcChnZXRFbGVtZW50VGV4dCk7CiAgICBjb25zdCBhdmFpbGFibGVDcnMgPSBzcnNMaXN0Lmxlbmd0aCA+IDAgPyBzcnNMaXN0IDogaW5oZXJpdGVkU3JzOwogICAgY29uc3QgbGF5ZXJTdHlsZXMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGxheWVyRWwsICJTdHlsZSIpLm1hcCgKICAgICAgcGFyc2VMYXllclN0eWxlCiAgICApOwogICAgY29uc3Qgc3R5bGVzID0gbGF5ZXJTdHlsZXMubGVuZ3RoID4gMCA/IGxheWVyU3R5bGVzIDogaW5oZXJpdGVkU3R5bGVzOwogICAgZnVuY3Rpb24gcGFyc2VCQm94MihiYm94RWwpIHsKICAgICAgY29uc3Qgc3JzID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShiYm94RWwsIHNyc1RhZyk7CiAgICAgIGNvbnN0IGF0dHJzID0gaGFzSW52ZXJ0ZWRDb29yZGluYXRlcyhzcnMpICYmIHZlcnNpb24gPT09ICIxLjMuMCIgPyBbIm1pbnkiLCAibWlueCIsICJtYXh5IiwgIm1heHgiXSA6IFsibWlueCIsICJtaW55IiwgIm1heHgiLCAibWF4eSJdOwogICAgICByZXR1cm4gYXR0cnMubWFwKChuYW1lKSA9PiBnZXRFbGVtZW50QXR0cmlidXRlKGJib3hFbCwgbmFtZSkpOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VFeEdlb2dyYXBoaWNCb3VuZGluZ0JveChiYm94RWwpIHsKICAgICAgcmV0dXJuIFsKICAgICAgICAid2VzdEJvdW5kTG9uZ2l0dWRlIiwKICAgICAgICAic291dGhCb3VuZExhdGl0dWRlIiwKICAgICAgICAiZWFzdEJvdW5kTG9uZ2l0dWRlIiwKICAgICAgICAibm9ydGhCb3VuZExhdGl0dWRlIgogICAgICBdLm1hcCgobmFtZSkgPT4gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChiYm94RWwsIG5hbWUpKSk7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZUxhdExvbkJvdW5kaW5nQm94KGJib3hFbCkgewogICAgICByZXR1cm4gWyJtaW54IiwgIm1pbnkiLCAibWF4eCIsICJtYXh5Il0ubWFwKAogICAgICAgIChuYW1lKSA9PiBnZXRFbGVtZW50QXR0cmlidXRlKGJib3hFbCwgbmFtZSkKICAgICAgKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlU2NhbGVIaW50VmFsdWUodGV4dFZhbHVlLCBkZWZhdWx0VmFsdWUpIHsKICAgICAgaWYgKHRleHRWYWx1ZSA9PT0gIiIpIHsKICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlOwogICAgICB9CiAgICAgIHJldHVybiBNYXRoLnNxcnQoMC41ICogcGFyc2VGbG9hdCh0ZXh0VmFsdWUpICoqIDIpIC8gMjhlLTU7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZVNjYWxlSGludCgpIHsKICAgICAgY29uc3Qgc2NhbGVIaW50ID0gZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiU2NhbGVIaW50Iik7CiAgICAgIGlmICghc2NhbGVIaW50KSB7CiAgICAgICAgcmV0dXJuIFtpbmhlcml0ZWRNaW5TY2FsZURlbm9tLCBpbmhlcml0ZWRNYXhTY2FsZURlbm9tXTsKICAgICAgfQogICAgICBjb25zdCBtaW4gPSBnZXRFbGVtZW50QXR0cmlidXRlKHNjYWxlSGludCwgIm1pbiIpOwogICAgICBjb25zdCBtYXggPSBnZXRFbGVtZW50QXR0cmlidXRlKHNjYWxlSGludCwgIm1heCIpOwogICAgICByZXR1cm4gWwogICAgICAgIHBhcnNlU2NhbGVIaW50VmFsdWUobWluLCBpbmhlcml0ZWRNaW5TY2FsZURlbm9tKSwKICAgICAgICBwYXJzZVNjYWxlSGludFZhbHVlKG1heCwgaW5oZXJpdGVkTWF4U2NhbGVEZW5vbSkKICAgICAgXTsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlU2NhbGVEZW5vbWluYXRvcihuYW1lLCBpbmhlcml0ZWRWYWx1ZSkgewogICAgICBjb25zdCB0ZXh0VmFsdWUgPSBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsIG5hbWUpKTsKICAgICAgcmV0dXJuIHRleHRWYWx1ZSA9PT0gIiIgPyBpbmhlcml0ZWRWYWx1ZSA6IHBhcnNlRmxvYXQodGV4dFZhbHVlKTsKICAgIH0KICAgIGNvbnN0IGF0dHJpYnV0aW9uRWwgPSBmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJBdHRyaWJ1dGlvbiIpOwogICAgY29uc3QgYXR0cmlidXRpb24gPSBhdHRyaWJ1dGlvbkVsICE9PSBudWxsID8gcGFyc2VMYXllckF0dHJpYnV0aW9uKGF0dHJpYnV0aW9uRWwpIDogaW5oZXJpdGVkQXR0cmlidXRpb247CiAgICBjb25zdCBsYXRMb25CYm94RWwgPSB2ZXJzaW9uID09PSAiMS4zLjAiID8gZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiRVhfR2VvZ3JhcGhpY0JvdW5kaW5nQm94IikgOiBmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJMYXRMb25Cb3VuZGluZ0JveCIpOwogICAgY29uc3QgYmFzZUJvdW5kaW5nQm94ID0ge307CiAgICBpZiAobGF0TG9uQmJveEVsKSB7CiAgICAgIGJhc2VCb3VuZGluZ0JveFsiRVBTRzo0MzI2Il0gPSB2ZXJzaW9uID09PSAiMS4zLjAiID8gcGFyc2VFeEdlb2dyYXBoaWNCb3VuZGluZ0JveChsYXRMb25CYm94RWwpIDogcGFyc2VMYXRMb25Cb3VuZGluZ0JveChsYXRMb25CYm94RWwpOwogICAgfQogICAgbGV0IGJvdW5kaW5nQm94ZXMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGxheWVyRWwsICJCb3VuZGluZ0JveCIpLnJlZHVjZSgKICAgICAgKHByZXYsIGJib3hFbCkgPT4gKHsKICAgICAgICAuLi5wcmV2LAogICAgICAgIFtnZXRFbGVtZW50QXR0cmlidXRlKGJib3hFbCwgc3JzVGFnKV06IHBhcnNlQkJveDIoYmJveEVsKQogICAgICB9KSwKICAgICAgYmFzZUJvdW5kaW5nQm94CiAgICApOwogICAgYm91bmRpbmdCb3hlcyA9IE9iamVjdC5rZXlzKGJvdW5kaW5nQm94ZXMpLmxlbmd0aCA+IDAgfHwgaW5oZXJpdGVkQm91bmRpbmdCb3hlcyA9PT0gbnVsbCA/IGJvdW5kaW5nQm94ZXMgOiBpbmhlcml0ZWRCb3VuZGluZ0JveGVzOwogICAgY29uc3QgcXVlcnlhYmxlID0gbGF5ZXJFbC5hdHRyaWJ1dGVzLnF1ZXJ5YWJsZSA9PT0gIjEiIHx8IGxheWVyRWwuYXR0cmlidXRlcy5xdWVyeWFibGUgPT09ICJ0cnVlIiA/IHRydWUgOiBmYWxzZTsKICAgIGNvbnN0IG9wYXF1ZSA9IGxheWVyRWwuYXR0cmlidXRlcy5vcGFxdWUgPT09ICIxIiB8fCBsYXllckVsLmF0dHJpYnV0ZXMub3BhcXVlID09PSAidHJ1ZSIgPyB0cnVlIDogZmFsc2U7CiAgICBjb25zdCBrZXl3b3JkcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIktleXdvcmRMaXN0IiksCiAgICAgICJLZXl3b3JkIgogICAgKS5tYXAoZ2V0RWxlbWVudFRleHQpLmZpbHRlcigodiwgaSwgYXJyKSA9PiBhcnIuaW5kZXhPZih2KSA9PT0gaSk7CiAgICBsZXQgbWluU2NhbGVEZW5vbWluYXRvciwgbWF4U2NhbGVEZW5vbWluYXRvcjsKICAgIGlmICh2ZXJzaW9uID09PSAiMS4zLjAiKSB7CiAgICAgIG1pblNjYWxlRGVub21pbmF0b3IgPSBwYXJzZVNjYWxlRGVub21pbmF0b3IoCiAgICAgICAgIk1pblNjYWxlRGVub21pbmF0b3IiLAogICAgICAgIGluaGVyaXRlZE1pblNjYWxlRGVub20KICAgICAgKTsKICAgICAgbWF4U2NhbGVEZW5vbWluYXRvciA9IHBhcnNlU2NhbGVEZW5vbWluYXRvcigKICAgICAgICAiTWF4U2NhbGVEZW5vbWluYXRvciIsCiAgICAgICAgaW5oZXJpdGVkTWF4U2NhbGVEZW5vbQogICAgICApOwogICAgfSBlbHNlIHsKICAgICAgW21pblNjYWxlRGVub21pbmF0b3IsIG1heFNjYWxlRGVub21pbmF0b3JdID0gcGFyc2VTY2FsZUhpbnQoKTsKICAgIH0KICAgIGNvbnN0IG1ldGFkYXRhID0gZmluZENoaWxkcmVuRWxlbWVudChsYXllckVsLCAiTWV0YWRhdGFVUkwiKS5tYXAoCiAgICAgIChtZXRhZGF0YVVybEVsKSA9PiAoewogICAgICAgIHR5cGU6IGdldEVsZW1lbnRBdHRyaWJ1dGUobWV0YWRhdGFVcmxFbCwgInR5cGUiKSwKICAgICAgICBmb3JtYXQ6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQobWV0YWRhdGFVcmxFbCwgIkZvcm1hdCIpKSwKICAgICAgICB1cmw6IGdldEVsZW1lbnRBdHRyaWJ1dGUoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KG1ldGFkYXRhVXJsRWwsICJPbmxpbmVSZXNvdXJjZSIpLAogICAgICAgICAgInhsaW5rOmhyZWYiCiAgICAgICAgKQogICAgICB9KQogICAgKTsKICAgIGNvbnN0IGNoaWxkcmVuID0gZmluZENoaWxkcmVuRWxlbWVudChsYXllckVsLCAiTGF5ZXIiKS5tYXAoCiAgICAgIChsYXllcikgPT4gcGFyc2VMYXllcigKICAgICAgICBsYXllciwKICAgICAgICB2ZXJzaW9uLAogICAgICAgIGF2YWlsYWJsZUNycywKICAgICAgICBzdHlsZXMsCiAgICAgICAgYXR0cmlidXRpb24sCiAgICAgICAgYm91bmRpbmdCb3hlcywKICAgICAgICBtYXhTY2FsZURlbm9taW5hdG9yLAogICAgICAgIG1pblNjYWxlRGVub21pbmF0b3IKICAgICAgKQogICAgKTsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIk5hbWUiKSksCiAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJUaXRsZSIpKSwKICAgICAgYWJzdHJhY3Q6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIkFic3RyYWN0IikpLAogICAgICBhdmFpbGFibGVDcnMsCiAgICAgIHN0eWxlcywKICAgICAgYXR0cmlidXRpb24sCiAgICAgIGJvdW5kaW5nQm94ZXMsCiAgICAgIGtleXdvcmRzLAogICAgICBxdWVyeWFibGUsCiAgICAgIG9wYXF1ZSwKICAgICAgLi4ubWluU2NhbGVEZW5vbWluYXRvciAhPT0gbnVsbCA/IHsgbWluU2NhbGVEZW5vbWluYXRvciB9IDoge30sCiAgICAgIC4uLm1heFNjYWxlRGVub21pbmF0b3IgIT09IG51bGwgPyB7IG1heFNjYWxlRGVub21pbmF0b3IgfSA6IHt9LAogICAgICAuLi5tZXRhZGF0YS5sZW5ndGggJiYgeyBtZXRhZGF0YSB9LAogICAgICAuLi5jaGlsZHJlbi5sZW5ndGggJiYgeyBjaGlsZHJlbiB9CiAgICB9OwogIH0KICBmdW5jdGlvbiBwYXJzZUxheWVyU3R5bGUoc3R5bGVFbCkgewogICAgY29uc3QgbGVnZW5kVXJsID0gZ2V0RWxlbWVudEF0dHJpYnV0ZSgKICAgICAgZmluZENoaWxkRWxlbWVudChmaW5kQ2hpbGRFbGVtZW50KHN0eWxlRWwsICJMZWdlbmRVUkwiKSwgIk9ubGluZVJlc291cmNlIiksCiAgICAgICJ4bGluazpocmVmIgogICAgKTsKICAgIGNvbnN0IGFic3RyYWN0ID0gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzdHlsZUVsLCAiQWJzdHJhY3QiKSk7CiAgICByZXR1cm4gewogICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHN0eWxlRWwsICJOYW1lIikpLAogICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzdHlsZUVsLCAiVGl0bGUiKSksCiAgICAgIC4uLmFic3RyYWN0ICYmIHsgYWJzdHJhY3QgfSwKICAgICAgLi4ubGVnZW5kVXJsICYmIHsgbGVnZW5kVXJsIH0KICAgIH07CiAgfQogIGZ1bmN0aW9uIHBhcnNlTGF5ZXJBdHRyaWJ1dGlvbihhdHRyaWJ1dGlvbkVsKSB7CiAgICBjb25zdCBsb2dvVXJsID0gZ2V0RWxlbWVudEF0dHJpYnV0ZSgKICAgICAgZmluZENoaWxkRWxlbWVudCgKICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGF0dHJpYnV0aW9uRWwsICJMb2dvVVJMIiksCiAgICAgICAgIk9ubGluZVJlc291cmNlIgogICAgICApLAogICAgICAieGxpbms6aHJlZiIKICAgICk7CiAgICBjb25zdCB1cmwgPSBnZXRFbGVtZW50QXR0cmlidXRlKAogICAgICBmaW5kQ2hpbGRFbGVtZW50KGF0dHJpYnV0aW9uRWwsICJPbmxpbmVSZXNvdXJjZSIpLAogICAgICAieGxpbms6aHJlZiIKICAgICk7CiAgICBjb25zdCB0aXRsZSA9IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYXR0cmlidXRpb25FbCwgIlRpdGxlIikpOwogICAgcmV0dXJuIHsKICAgICAgLi4udGl0bGUgJiYgeyB0aXRsZSB9LAogICAgICAuLi51cmwgJiYgeyB1cmwgfSwKICAgICAgLi4ubG9nb1VybCAmJiB7IGxvZ29VcmwgfQogICAgfTsKICB9CiAgZnVuY3Rpb24gcmVhZFByb3ZpZGVyRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3Qgc2VydmljZSA9IGZpbmRDaGlsZEVsZW1lbnQoZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwgIlNlcnZpY2UiKTsKICAgIGNvbnN0IGNvbnRhY3RJbmZvcm1hdGlvbiA9IGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkNvbnRhY3RJbmZvcm1hdGlvbiIpOwogICAgY29uc3QgY29udGFjdFBlcnNvblByaW1hcnkgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBjb250YWN0SW5mb3JtYXRpb24sCiAgICAgICJDb250YWN0UGVyc29uUHJpbWFyeSIKICAgICk7CiAgICBjb25zdCBhZGRyZXNzID0gZmluZENoaWxkRWxlbWVudChjb250YWN0SW5mb3JtYXRpb24sICJDb250YWN0QWRkcmVzcyIpOwogICAgcmV0dXJuIHsKICAgICAgY29udGFjdDogewogICAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChjb250YWN0UGVyc29uUHJpbWFyeSwgIkNvbnRhY3RQZXJzb24iKQogICAgICAgICksCiAgICAgICAgb3JnYW5pemF0aW9uOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdFBlcnNvblByaW1hcnksICJDb250YWN0T3JnYW5pemF0aW9uIikKICAgICAgICApLAogICAgICAgIHBvc2l0aW9uOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdEluZm9ybWF0aW9uLCAiQ29udGFjdFBvc2l0aW9uIikKICAgICAgICApLAogICAgICAgIHBob25lOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdEluZm9ybWF0aW9uLCAiQ29udGFjdFZvaWNlVGVsZXBob25lIikKICAgICAgICApLAogICAgICAgIGZheDogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvcm1hdGlvbiwgIkNvbnRhY3RGYWNzaW1pbGVUZWxlcGhvbmUiKQogICAgICAgICksCiAgICAgICAgYWRkcmVzczogewogICAgICAgICAgZGVsaXZlcnlQb2ludDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiQWRkcmVzcyIpKSwKICAgICAgICAgIGNpdHk6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkNpdHkiKSksCiAgICAgICAgICBhZG1pbmlzdHJhdGl2ZUFyZWE6IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJTdGF0ZU9yUHJvdmluY2UiKQogICAgICAgICAgKSwKICAgICAgICAgIHBvc3RhbENvZGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIlBvc3RDb2RlIikpLAogICAgICAgICAgY291bnRyeTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiQ291bnRyeSIpKQogICAgICAgIH0sCiAgICAgICAgZW1haWw6IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChjb250YWN0SW5mb3JtYXRpb24sICJDb250YWN0RWxlY3Ryb25pY01haWxBZGRyZXNzIikKICAgICAgICApCiAgICAgIH0KICAgIH07CiAgfQogIGZ1bmN0aW9uIHJlYWRQcm92aWRlckZyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCBzZXJ2aWNlUHJvdmlkZXIgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiU2VydmljZVByb3ZpZGVyIgogICAgKTsKICAgIGNvbnN0IHNlcnZpY2VDb250YWN0ID0gZmluZENoaWxkRWxlbWVudChzZXJ2aWNlUHJvdmlkZXIsICJTZXJ2aWNlQ29udGFjdCIpOwogICAgY29uc3QgY29udGFjdEluZm8gPSBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VDb250YWN0LCAiQ29udGFjdEluZm8iKTsKICAgIGNvbnN0IHBob25lID0gZmluZENoaWxkRWxlbWVudChjb250YWN0SW5mbywgIlBob25lIik7CiAgICBjb25zdCBhZGRyZXNzID0gZmluZENoaWxkRWxlbWVudChjb250YWN0SW5mbywgIkFkZHJlc3MiKTsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZVByb3ZpZGVyLCAiUHJvdmlkZXJOYW1lIikpLAogICAgICBzaXRlOiBnZXRFbGVtZW50QXR0cmlidXRlKAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZVByb3ZpZGVyLCAiUHJvdmlkZXJTaXRlIiksCiAgICAgICAgInhsaW5rOmhyZWYiCiAgICAgICksCiAgICAgIGNvbnRhY3Q6IHsKICAgICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VDb250YWN0LCAiSW5kaXZpZHVhbE5hbWUiKSksCiAgICAgICAgcG9zaXRpb246IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChzZXJ2aWNlQ29udGFjdCwgIlBvc2l0aW9uTmFtZSIpCiAgICAgICAgKSwKICAgICAgICBwaG9uZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChwaG9uZSwgIlZvaWNlIikpLAogICAgICAgIGZheDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChwaG9uZSwgIkZhY3NpbWlsZSIpKSwKICAgICAgICBhZGRyZXNzOiB7CiAgICAgICAgICBkZWxpdmVyeVBvaW50OiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgICAgZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiRGVsaXZlcnlQb2ludCIpCiAgICAgICAgICApLAogICAgICAgICAgY2l0eTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiQ2l0eSIpKSwKICAgICAgICAgIGFkbWluaXN0cmF0aXZlQXJlYTogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkFkbWluaXN0cmF0aXZlQXJlYSIpCiAgICAgICAgICApLAogICAgICAgICAgcG9zdGFsQ29kZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiUG9zdGFsQ29kZSIpKSwKICAgICAgICAgIGNvdW50cnk6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkNvdW50cnkiKSkKICAgICAgICB9LAogICAgICAgIGVtYWlsOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJFbGVjdHJvbmljTWFpbEFkZHJlc3MiKSkKICAgICAgfQogICAgfTsKICB9CiAgZnVuY3Rpb24gcmVhZE9wZXJhdGlvblVybHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgdXJscyA9IHt9OwogICAgY29uc3QgY2FwYWJpbGl0aWVzID0gZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IG9wZXJhdGlvbnNNZXRhZGF0YSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGNhcGFiaWxpdGllcywKICAgICAgIk9wZXJhdGlvbnNNZXRhZGF0YSIKICAgICk7CiAgICBpZiAob3BlcmF0aW9uc01ldGFkYXRhKSB7CiAgICAgIGZpbmRDaGlsZHJlbkVsZW1lbnQob3BlcmF0aW9uc01ldGFkYXRhLCAiT3BlcmF0aW9uIikuZm9yRWFjaCgKICAgICAgICAob3BlcmF0aW9uKSA9PiB7CiAgICAgICAgICBjb25zdCBuYW1lID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShvcGVyYXRpb24sICJuYW1lIik7CiAgICAgICAgICB1cmxzW25hbWVdID0gcGFyc2VPcGVyYXRpb24xMTAob3BlcmF0aW9uKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBjYXBhYmlsaXR5ID0gZmluZENoaWxkRWxlbWVudChjYXBhYmlsaXRpZXMsICJDYXBhYmlsaXR5Iik7CiAgICAgIGNvbnN0IHJlcXVlc3QgPSBmaW5kQ2hpbGRFbGVtZW50KGNhcGFiaWxpdHksICJSZXF1ZXN0Iik7CiAgICAgIGdldENoaWxkcmVuRWxlbWVudChyZXF1ZXN0KS5mb3JFYWNoKChvcGVyYXRpb24pID0+IHsKICAgICAgICBjb25zdCBuYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUob3BlcmF0aW9uKSk7CiAgICAgICAgdXJsc1tuYW1lXSA9IHBhcnNlT3BlcmF0aW9uMTAwKG9wZXJhdGlvbik7CiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIHVybHM7CiAgfQogIGZ1bmN0aW9uIHJlYWRWZXJzaW9uRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIHJldHVybiBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLmF0dHJpYnV0ZXNbInZlcnNpb24iXTsKICB9CiAgZnVuY3Rpb24gcmVhZE91dHB1dEZvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgdmVyc2lvbiA9IHJlYWRWZXJzaW9uRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpOwogICAgbGV0IG91dHB1dEZvcm1hdHM7CiAgICBpZiAodmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSkgewogICAgICBjb25zdCBnZXRGZWF0dXJlID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLCAiQ2FwYWJpbGl0eSIpLAogICAgICAgICAgIlJlcXVlc3QiCiAgICAgICAgKSwKICAgICAgICAiR2V0RmVhdHVyZSIKICAgICAgKTsKICAgICAgb3V0cHV0Rm9ybWF0cyA9IGdldENoaWxkcmVuRWxlbWVudCgKICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGdldEZlYXR1cmUsICJSZXN1bHRGb3JtYXQiKQogICAgICApLm1hcChnZXRFbGVtZW50TmFtZSk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBvcGVyYXRpb25zID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAgICJPcGVyYXRpb25zTWV0YWRhdGEiCiAgICAgICk7CiAgICAgIGNvbnN0IGdldEZlYXR1cmUgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KG9wZXJhdGlvbnMsICJPcGVyYXRpb24iKS5maW5kKAogICAgICAgIChlbCkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgIm5hbWUiKSA9PT0gIkdldEZlYXR1cmUiCiAgICAgICk7CiAgICAgIGNvbnN0IHBhcmFtZXRlciA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZ2V0RmVhdHVyZSwgIlBhcmFtZXRlciIpLmZpbmQoCiAgICAgICAgKGVsKSA9PiBnZXRFbGVtZW50QXR0cmlidXRlKGVsLCAibmFtZSIpID09PSAib3V0cHV0Rm9ybWF0IgogICAgICApOwogICAgICBvdXRwdXRGb3JtYXRzID0gZmluZENoaWxkcmVuRWxlbWVudChwYXJhbWV0ZXIsICJWYWx1ZSIsIHRydWUpLm1hcCgKICAgICAgICBnZXRFbGVtZW50VGV4dAogICAgICApOwogICAgfQogICAgcmV0dXJuIG91dHB1dEZvcm1hdHM7CiAgfQogIGZ1bmN0aW9uIHJlYWRJbmZvRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgdmVyc2lvbiA9IHJlYWRWZXJzaW9uRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3Qgc2VydmljZVRhZyA9IHZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikgPyAiU2VydmljZSIgOiAiU2VydmljZUlkZW50aWZpY2F0aW9uIjsKICAgIGNvbnN0IG5hbWVUYWcgPSB2ZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpID8gIk5hbWUiIDogIlNlcnZpY2VUeXBlIjsKICAgIGNvbnN0IHNlcnZpY2UgPSBmaW5kQ2hpbGRFbGVtZW50KGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksIHNlcnZpY2VUYWcpOwogICAgbGV0IGtleXdvcmRzOwogICAgaWYgKHZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikpIHsKICAgICAga2V5d29yZHMgPSBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJLZXl3b3JkcyIpKS5zcGxpdCgiLCIpLm1hcCgoa2V5d29yZCkgPT4ga2V5d29yZC50cmltKCkpOwogICAgfSBlbHNlIHsKICAgICAga2V5d29yZHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIktleXdvcmRzIiksCiAgICAgICAgIktleXdvcmQiCiAgICAgICkubWFwKGdldEVsZW1lbnRUZXh0KTsKICAgIH0KICAgIGxldCBwcm92aWRlcjsKICAgIGlmICh2ZXJzaW9uICE9PSAiMS4wLjAiKSB7CiAgICAgIHByb3ZpZGVyID0gcmVhZFByb3ZpZGVyRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIlRpdGxlIikpLAogICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsIG5hbWVUYWcpKSwKICAgICAgYWJzdHJhY3Q6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkFic3RyYWN0IikpLAogICAgICBmZWVzOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJGZWVzIikpLAogICAgICBjb25zdHJhaW50czogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiQWNjZXNzQ29uc3RyYWludHMiKSksCiAgICAgIGtleXdvcmRzLAogICAgICBwcm92aWRlciwKICAgICAgb3V0cHV0Rm9ybWF0czogcmVhZE91dHB1dEZvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykKICAgIH07CiAgfQogIGZ1bmN0aW9uIHJlYWRGZWF0dXJlVHlwZXNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgdmVyc2lvbiA9IHJlYWRWZXJzaW9uRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3Qgb3V0cHV0Rm9ybWF0cyA9IHJlYWRPdXRwdXRGb3JtYXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJGZWF0dXJlVHlwZUxpc3QiCiAgICApOwogICAgcmV0dXJuIGZpbmRDaGlsZHJlbkVsZW1lbnQoY2FwYWJpbGl0eSwgIkZlYXR1cmVUeXBlIikubWFwKAogICAgICAoZmVhdHVyZVR5cGVFbCkgPT4gcGFyc2VGZWF0dXJlVHlwZShmZWF0dXJlVHlwZUVsLCB2ZXJzaW9uLCBvdXRwdXRGb3JtYXRzKQogICAgKTsKICB9CiAgZnVuY3Rpb24gcGFyc2VPcGVyYXRpb24xMDAob3BlcmF0aW9uKSB7CiAgICBjb25zdCB1cmxzID0ge307CiAgICBjb25zdCBkY3BUeXBlID0gZmluZENoaWxkcmVuRWxlbWVudChvcGVyYXRpb24sICJEQ1BUeXBlIik7CiAgICBjb25zdCBodHRwID0gZGNwVHlwZS5mbGF0TWFwKChkKSA9PiBmaW5kQ2hpbGRyZW5FbGVtZW50KGQsICJIVFRQIikpOwogICAgY29uc3QgbWV0aG9kcyA9IGh0dHAuZmxhdE1hcCgoaCkgPT4gZ2V0Q2hpbGRyZW5FbGVtZW50KGgpKTsKICAgIG1ldGhvZHMuZm9yRWFjaCgobWV0aG9kKSA9PiB7CiAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShtZXRob2QpKTsKICAgICAgdXJsc1ttZXRob2ROYW1lXSA9IGdldEVsZW1lbnRBdHRyaWJ1dGUobWV0aG9kLCAib25saW5lUmVzb3VyY2UiKTsKICAgIH0pOwogICAgcmV0dXJuIHVybHM7CiAgfQogIGZ1bmN0aW9uIHBhcnNlT3BlcmF0aW9uMTEwKG9wZXJhdGlvbikgewogICAgY29uc3QgdXJscyA9IHt9OwogICAgY29uc3QgZGNwVHlwZSA9IGZpbmRDaGlsZHJlbkVsZW1lbnQob3BlcmF0aW9uLCAiRENQIik7CiAgICBjb25zdCBodHRwID0gZGNwVHlwZS5mbGF0TWFwKChkKSA9PiBmaW5kQ2hpbGRFbGVtZW50KGQsICJIVFRQIikpOwogICAgY29uc3QgbWV0aG9kcyA9IGh0dHAuZmxhdE1hcCgoaCkgPT4gZ2V0Q2hpbGRyZW5FbGVtZW50KGgpKTsKICAgIG1ldGhvZHMuZm9yRWFjaCgobWV0aG9kKSA9PiB7CiAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShtZXRob2QpKTsKICAgICAgdXJsc1ttZXRob2ROYW1lXSA9IGdldEVsZW1lbnRBdHRyaWJ1dGUobWV0aG9kLCAieGxpbms6aHJlZiIpOwogICAgfSk7CiAgICByZXR1cm4gdXJsczsKICB9CiAgZnVuY3Rpb24gcGFyc2VGZWF0dXJlVHlwZShmZWF0dXJlVHlwZUVsLCBzZXJ2aWNlVmVyc2lvbiwgZGVmYXVsdE91dHB1dEZvcm1hdHMpIHsKICAgIGNvbnN0IHNyc1RhZyA9IHNlcnZpY2VWZXJzaW9uLnN0YXJ0c1dpdGgoIjIuIikgPyAiQ1JTIiA6ICJTUlMiOwogICAgY29uc3QgZGVmYXVsdFNyc1RhZyA9IHNlcnZpY2VWZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpID8gIlNSUyIgOiBgRGVmYXVsdCR7c3JzVGFnfWA7CiAgICBmdW5jdGlvbiBwYXJzZUJCb3gxMDAoKSB7CiAgICAgIGNvbnN0IGJib3hFbCA9IGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIkxhdExvbmdCb3VuZGluZ0JveCIpOwogICAgICByZXR1cm4gWyJtaW54IiwgIm1pbnkiLCAibWF4eCIsICJtYXh5Il0ubWFwKChuYW1lKSA9PiBnZXRFbGVtZW50QXR0cmlidXRlKGJib3hFbCwgbmFtZSkpLm1hcChwYXJzZUZsb2F0KTsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlQkJveDIoKSB7CiAgICAgIGNvbnN0IGJib3hFbCA9IGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIldHUzg0Qm91bmRpbmdCb3giKTsKICAgICAgcmV0dXJuIFsiTG93ZXJDb3JuZXIiLCAiVXBwZXJDb3JuZXIiXS5tYXAoKGVsTmFtZSkgPT4gZmluZENoaWxkRWxlbWVudChiYm94RWwsIGVsTmFtZSkpLm1hcCgoY29ybmVyRWwpID0+IGdldEVsZW1lbnRUZXh0KGNvcm5lckVsKS5zcGxpdCgiICIpKS5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IFsuLi5wcmV2LCAuLi5jdXJyXSkubWFwKHBhcnNlRmxvYXQpOwogICAgfQogICAgY29uc3Qgb3RoZXJDcnMgPSBzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/IFtdIDogZmluZENoaWxkcmVuRWxlbWVudChmZWF0dXJlVHlwZUVsLCBgT3RoZXIke3Nyc1RhZ31gKS5tYXAoZ2V0RWxlbWVudFRleHQpLm1hcChzaW1wbGlmeUVwc2dVcm4pOwogICAgY29uc3Qgb3V0cHV0Rm9ybWF0cyA9IHNlcnZpY2VWZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpID8gW10gOiBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJPdXRwdXRGb3JtYXRzIiksCiAgICAgICJGb3JtYXQiCiAgICApLm1hcChnZXRFbGVtZW50VGV4dCk7CiAgICBjb25zdCBrZXl3b3JkcyA9IHNlcnZpY2VWZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpID8gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiS2V5d29yZHMiKSkuc3BsaXQoIiwiKS5tYXAoKGtleXdvcmQpID0+IGtleXdvcmQudHJpbSgpKSA6IGZpbmRDaGlsZHJlbkVsZW1lbnQoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIktleXdvcmRzIiksCiAgICAgICJLZXl3b3JkIgogICAgKS5tYXAoZ2V0RWxlbWVudFRleHQpLmZpbHRlcigodiwgaSwgYXJyKSA9PiBhcnIuaW5kZXhPZih2KSA9PT0gaSk7CiAgICBjb25zdCBtZXRhZGF0YSA9IHNlcnZpY2VWZXJzaW9uID09PSAiMi4wLjAiID8gZmluZENoaWxkcmVuRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiTWV0YWRhdGFVUkwiKS5tYXAoCiAgICAgIChtZXRhZGF0YVVybEVsKSA9PiAoewogICAgICAgIHVybDogZ2V0RWxlbWVudEF0dHJpYnV0ZShtZXRhZGF0YVVybEVsLCAieGxpbms6aHJlZiIpCiAgICAgIH0pCiAgICApIDogZmluZENoaWxkcmVuRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiTWV0YWRhdGFVUkwiKS5tYXAoCiAgICAgIChtZXRhZGF0YVVybEVsKSA9PiAoewogICAgICAgIGZvcm1hdDogZ2V0RWxlbWVudEF0dHJpYnV0ZShtZXRhZGF0YVVybEVsLCAiZm9ybWF0IiksCiAgICAgICAgdHlwZTogZ2V0RWxlbWVudEF0dHJpYnV0ZShtZXRhZGF0YVVybEVsLCAidHlwZSIpLAogICAgICAgIHVybDogZ2V0RWxlbWVudFRleHQobWV0YWRhdGFVcmxFbCkudHJpbSgpCiAgICAgIH0pCiAgICApOwogICAgcmV0dXJuIHsKICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiTmFtZSIpKSwKICAgICAgdGl0bGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIlRpdGxlIikpLAogICAgICBhYnN0cmFjdDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiQWJzdHJhY3QiKSksCiAgICAgIGRlZmF1bHRDcnM6IHNpbXBsaWZ5RXBzZ1VybigKICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsIGRlZmF1bHRTcnNUYWcpKQogICAgICApLAogICAgICBvdGhlckNycywKICAgICAgb3V0cHV0Rm9ybWF0czogb3V0cHV0Rm9ybWF0cy5sZW5ndGggPiAwID8gb3V0cHV0Rm9ybWF0cyA6IGRlZmF1bHRPdXRwdXRGb3JtYXRzLAogICAgICBsYXRMb25Cb3VuZGluZ0JveDogc2VydmljZVZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikgPyBwYXJzZUJCb3gxMDAoKSA6IHBhcnNlQkJveDIoKSwKICAgICAga2V5d29yZHMsCiAgICAgIC4uLm1ldGFkYXRhLmxlbmd0aCAmJiB7IG1ldGFkYXRhIH0KICAgIH07CiAgfQogIGZ1bmN0aW9uIHBhcnNlQkJveCh4bWxFbGVtZW50KSB7CiAgICBjb25zdCByZXN1bHQgPSBbIkxvd2VyQ29ybmVyIiwgIlVwcGVyQ29ybmVyIl0ubWFwKChlbE5hbWUpID0+IGZpbmRDaGlsZEVsZW1lbnQoeG1sRWxlbWVudCwgZWxOYW1lKSkubWFwKChjb3JuZXJFbCkgPT4gZ2V0RWxlbWVudFRleHQoY29ybmVyRWwpLnNwbGl0KCIgIikpLnJlZHVjZSgocHJldiwgY3VycikgPT4gWy4uLnByZXYsIC4uLmN1cnJdKS5tYXAocGFyc2VGbG9hdCk7CiAgICBpZiAocmVzdWx0LnNvbWUoTnVtYmVyLmlzTmFOKSkKICAgICAgcmV0dXJuIG51bGw7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KICBmdW5jdGlvbiByZWFkSW5mb0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCByb290RWwgPSBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3Qgc2VydmljZSA9IGZpbmRDaGlsZEVsZW1lbnQocm9vdEVsLCAiU2VydmljZUlkZW50aWZpY2F0aW9uIik7CiAgICBjb25zdCBrZXl3b3JkcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIktleXdvcmRzIiksCiAgICAgICJLZXl3b3JkIgogICAgKS5tYXAoZ2V0RWxlbWVudFRleHQpOwogICAgY29uc3QgbWV0YWRhdGEgPSBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIk9wZXJhdGlvbnNNZXRhZGF0YSIpOwogICAgY29uc3QgZ2V0VGlsZU9wZXJhdGlvbiA9IGZpbmRDaGlsZHJlbkVsZW1lbnQobWV0YWRhdGEsICJPcGVyYXRpb24iKS5maW5kKAogICAgICAoZWwpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWwsICJuYW1lIikgPT0gIkdldFRpbGUiCiAgICApOwogICAgY29uc3QgZ2V0VGlsZVVybHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGdldFRpbGVPcGVyYXRpb24sICJHZXQiLCB0cnVlKS5yZWR1Y2UoCiAgICAgIChwcmV2LCBjdXJyKSA9PiB7CiAgICAgICAgY29uc3QgZW5jb2RpbmdUeXBlID0gZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGN1cnIsICJWYWx1ZSIsIHRydWUpCiAgICAgICAgKTsKICAgICAgICBjb25zdCB1cmwgPSBnZXRFbGVtZW50QXR0cmlidXRlKGN1cnIsICJ4bGluazpocmVmIik7CiAgICAgICAgaWYgKGVuY29kaW5nVHlwZS50b0xvd2VyQ2FzZSgpID09PSAicmVzdGZ1bCIpCiAgICAgICAgICByZXR1cm4geyAuLi5wcmV2LCByZXN0OiB1cmwgfTsKICAgICAgICByZXR1cm4geyAuLi5wcmV2LCBrdnA6IHVybCB9OwogICAgICB9LAogICAgICB7fQogICAgKTsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJUaXRsZSIpKSwKICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiU2VydmljZVR5cGUiKSksCiAgICAgIGFic3RyYWN0OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJBYnN0cmFjdCIpKSwKICAgICAgZmVlczogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiRmVlcyIpKSwKICAgICAgY29uc3RyYWludHM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkFjY2Vzc0NvbnN0cmFpbnRzIikpLAogICAgICBrZXl3b3JkcywKICAgICAgcHJvdmlkZXI6IHJlYWRQcm92aWRlckZyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgZ2V0VGlsZVVybHMKICAgIH07CiAgfQogIGZ1bmN0aW9uIHJlYWRNYXRyaXhTZXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGZ1bmN0aW9uIHBhcnNlTWF0cml4U2V0KGVsZW1lbnQpIHsKICAgICAgY29uc3QgdG9wTGVmdCA9IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIlRvcExlZnRDb3JuZXIiKSkuc3BsaXQoIiAiKS5tYXAocGFyc2VGbG9hdCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWRlbnRpZmllcjogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiSWRlbnRpZmllciIpKSwKICAgICAgICB0aWxlV2lkdGg6IHBhcnNlSW50KAogICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiVGlsZVdpZHRoIikpCiAgICAgICAgKSwKICAgICAgICB0aWxlSGVpZ2h0OiBwYXJzZUludCgKICAgICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIlRpbGVIZWlnaHQiKSkKICAgICAgICApLAogICAgICAgIG1hdHJpeFdpZHRoOiBwYXJzZUludCgKICAgICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIk1hdHJpeFdpZHRoIikpCiAgICAgICAgKSwKICAgICAgICBtYXRyaXhIZWlnaHQ6IHBhcnNlSW50KAogICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiTWF0cml4SGVpZ2h0IikpCiAgICAgICAgKSwKICAgICAgICBzY2FsZURlbm9taW5hdG9yOiBwYXJzZUZsb2F0KAogICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiU2NhbGVEZW5vbWluYXRvciIpKQogICAgICAgICksCiAgICAgICAgdG9wTGVmdAogICAgICB9OwogICAgfQogICAgY29uc3QgY29udGVudHMgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiQ29udGVudHMiCiAgICApOwogICAgY29uc3QgbWF0cml4U2V0cyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoY29udGVudHMsICJUaWxlTWF0cml4U2V0Iik7CiAgICByZXR1cm4gbWF0cml4U2V0cy5tYXAoKGVsZW1lbnQpID0+IHsKICAgICAgY29uc3Qgd2VsbEtub3duU2NhbGVTZXQgPSBnZXRFbGVtZW50VGV4dCgKICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJXZWxsS25vd25TY2FsZVNldCIpCiAgICAgICk7CiAgICAgIGNvbnN0IGJvdW5kaW5nQm94ID0gcGFyc2VCQm94KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIkJvdW5kaW5nQm94IikpOwogICAgICByZXR1cm4gewogICAgICAgIGlkZW50aWZpZXI6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIklkZW50aWZpZXIiKSksCiAgICAgICAgY3JzOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJTdXBwb3J0ZWRDUlMiKSksCiAgICAgICAgdGlsZU1hdHJpY2VzOiBmaW5kQ2hpbGRyZW5FbGVtZW50KGVsZW1lbnQsICJUaWxlTWF0cml4IikubWFwKAogICAgICAgICAgcGFyc2VNYXRyaXhTZXQKICAgICAgICApLAogICAgICAgIC4uLmJvdW5kaW5nQm94ICYmIHsgYm91bmRpbmdCb3ggfSwKICAgICAgICAuLi53ZWxsS25vd25TY2FsZVNldCAmJiB7IHdlbGxLbm93blNjYWxlU2V0IH0KICAgICAgfTsKICAgIH0pOwogIH0KICBmdW5jdGlvbiByZWFkTGF5ZXJzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHJvb3RFbCA9IGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBjb250ZW50c0VsID0gZmluZENoaWxkRWxlbWVudChyb290RWwsICJDb250ZW50cyIpOwogICAgZnVuY3Rpb24gZ2V0TWF0cml4U2V0Q3JzKGNvbnRlbnRzRWwyLCBpZGVudGlmaWVyKSB7CiAgICAgIGNvbnN0IG1hdHJpeFNldCA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoY29udGVudHNFbDIsICJUaWxlTWF0cml4U2V0IikuZmluZCgKICAgICAgICAobWF0cml4U2V0RWwpID0+IHsKICAgICAgICAgIGNvbnN0IGlkZW50aWZpZXJFbCA9IGZpbmRDaGlsZEVsZW1lbnQobWF0cml4U2V0RWwsICJJZGVudGlmaWVyIik7CiAgICAgICAgICByZXR1cm4gZ2V0RWxlbWVudFRleHQoaWRlbnRpZmllckVsKSA9PT0gaWRlbnRpZmllcjsKICAgICAgICB9CiAgICAgICk7CiAgICAgIHJldHVybiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KG1hdHJpeFNldCwgIlN1cHBvcnRlZENSUyIpKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlTWF0cml4U2V0TGluayhlbGVtZW50KSB7CiAgICAgIGNvbnN0IGlkZW50aWZpZXIgPSBnZXRFbGVtZW50VGV4dCgKICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJUaWxlTWF0cml4U2V0IikKICAgICAgKTsKICAgICAgY29uc3QgY3JzID0gZ2V0TWF0cml4U2V0Q3JzKGNvbnRlbnRzRWwsIGlkZW50aWZpZXIpOwogICAgICByZXR1cm4gewogICAgICAgIGlkZW50aWZpZXIsCiAgICAgICAgY3JzLAogICAgICAgIGxpbWl0czogZmluZENoaWxkcmVuRWxlbWVudChlbGVtZW50LCAiVGlsZU1hdHJpeExpbWl0cyIsIHRydWUpLm1hcCgKICAgICAgICAgIChlbGVtZW50MikgPT4gKHsKICAgICAgICAgICAgdGlsZU1hdHJpeDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIlRpbGVNYXRyaXgiKSksCiAgICAgICAgICAgIG1pblRpbGVSb3c6IHBhcnNlSW50KAogICAgICAgICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJNaW5UaWxlUm93IikpCiAgICAgICAgICAgICksCiAgICAgICAgICAgIG1pblRpbGVDb2w6IHBhcnNlSW50KAogICAgICAgICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJNaW5UaWxlQ29sIikpCiAgICAgICAgICAgICksCiAgICAgICAgICAgIG1heFRpbGVSb3c6IHBhcnNlSW50KAogICAgICAgICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJNYXhUaWxlUm93IikpCiAgICAgICAgICAgICksCiAgICAgICAgICAgIG1heFRpbGVDb2w6IHBhcnNlSW50KAogICAgICAgICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJNYXhUaWxlQ29sIikpCiAgICAgICAgICAgICkKICAgICAgICAgIH0pCiAgICAgICAgKQogICAgICB9OwogICAgfQogICAgY29uc3QgZ2V0VGlsZU9wZXJhdGlvbiA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQocm9vdEVsLCAiT3BlcmF0aW9uc01ldGFkYXRhIiksCiAgICAgICJPcGVyYXRpb24iCiAgICApLmZpbmQoKGVsKSA9PiBnZXRFbGVtZW50QXR0cmlidXRlKGVsLCAibmFtZSIpID09ICJHZXRUaWxlIik7CiAgICBjb25zdCBnZXRLdnBFbHQgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGdldFRpbGVPcGVyYXRpb24sICJHZXQiLCB0cnVlKS5maWx0ZXIoCiAgICAgIChlbHQpID0+IHsKICAgICAgICBjb25zdCBlbmNvZGluZ1R5cGUgPSBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsdCwgIlZhbHVlIiwgdHJ1ZSkpOwogICAgICAgIHJldHVybiBlbmNvZGluZ1R5cGUudG9Mb3dlckNhc2UoKSA9PT0gImt2cCI7CiAgICAgIH0KICAgIClbMF07CiAgICBjb25zdCBnZXRLdnBVcmwgPSBnZXRLdnBFbHQgPyBnZXRFbGVtZW50QXR0cmlidXRlKGdldEt2cEVsdCwgInhsaW5rOmhyZWYiKSA6ICIiOwogICAgY29uc3QgY29udGVudHMgPSBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIkNvbnRlbnRzIik7CiAgICBjb25zdCBsYXllcnMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGNvbnRlbnRzLCAiTGF5ZXIiKTsKICAgIHJldHVybiBsYXllcnMubWFwKChlbGVtZW50KSA9PiB7CiAgICAgIGNvbnN0IGxhdExvbkJvdW5kaW5nQm94ID0gcGFyc2VCQm94KAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIldHUzg0Qm91bmRpbmdCb3giKQogICAgICApOwogICAgICBsZXQgZGVmYXVsdFN0eWxlID0gIiI7CiAgICAgIGNvbnN0IHN0eWxlcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgIlN0eWxlIikubWFwKChlbGVtZW50MikgPT4gewogICAgICAgIGNvbnN0IGxlZ2VuZFVybCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiTGVnZW5kVVJMIiksCiAgICAgICAgICAieGxpbms6aHJlZiIKICAgICAgICApOwogICAgICAgIGNvbnN0IGFic3RyYWN0ID0gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIkFic3RyYWN0IikpOwogICAgICAgIGNvbnN0IHN0eWxlID0gewogICAgICAgICAgdGl0bGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJUaXRsZSIpKSwKICAgICAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJJZGVudGlmaWVyIikpLAogICAgICAgICAgLi4uYWJzdHJhY3QgJiYgeyBhYnN0cmFjdCB9LAogICAgICAgICAgLi4ubGVnZW5kVXJsICYmIHsgbGVnZW5kVXJsIH0KICAgICAgICB9OwogICAgICAgIGlmIChnZXRFbGVtZW50QXR0cmlidXRlKGVsZW1lbnQyLCAiaXNEZWZhdWx0IikgPT09ICJ0cnVlIikgewogICAgICAgICAgZGVmYXVsdFN0eWxlID0gc3R5bGUubmFtZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0eWxlOwogICAgICB9KTsKICAgICAgY29uc3Qgb3V0cHV0Rm9ybWF0cyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgIkZvcm1hdCIpLm1hcCgKICAgICAgICBnZXRFbGVtZW50VGV4dAogICAgICApOwogICAgICBjb25zdCByZXNvdXJjZUxpbmtzID0gZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgICBlbGVtZW50LAogICAgICAgICJSZXNvdXJjZVVSTCIKICAgICAgKS5maWx0ZXIoCiAgICAgICAgKGVsZW1lbnQyKSA9PiBnZXRFbGVtZW50QXR0cmlidXRlKGVsZW1lbnQyLCAicmVzb3VyY2VUeXBlIikgPT09ICJ0aWxlIgogICAgICApLm1hcCgoZWxlbWVudDIpID0+IHsKICAgICAgICBjb25zdCBmb3JtYXQgPSBnZXRFbGVtZW50QXR0cmlidXRlKGVsZW1lbnQyLCAiZm9ybWF0Iik7CiAgICAgICAgY29uc3QgdXJsID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShlbGVtZW50MiwgInRlbXBsYXRlIik7CiAgICAgICAgcmV0dXJuIHsgZm9ybWF0LCB1cmwsIGVuY29kaW5nOiAiUkVTVCIgfTsKICAgICAgfSk7CiAgICAgIGlmIChnZXRLdnBVcmwpIHsKICAgICAgICByZXNvdXJjZUxpbmtzLnB1c2goCiAgICAgICAgICAuLi5vdXRwdXRGb3JtYXRzLm1hcCgoZm9ybWF0KSA9PiAoewogICAgICAgICAgICBlbmNvZGluZzogIktWUCIsCiAgICAgICAgICAgIHVybDogZ2V0S3ZwVXJsLAogICAgICAgICAgICBmb3JtYXQKICAgICAgICAgIH0pKQogICAgICAgICk7CiAgICAgIH0KICAgICAgY29uc3QgbWF0cml4U2V0cyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgIlRpbGVNYXRyaXhTZXRMaW5rIikubWFwKAogICAgICAgIHBhcnNlTWF0cml4U2V0TGluawogICAgICApOwogICAgICBjb25zdCBkaW1lbnNpb25zID0gZmluZENoaWxkcmVuRWxlbWVudChlbGVtZW50LCAiRGltZW5zaW9uIikubWFwKAogICAgICAgIChlbGVtZW50MikgPT4gewogICAgICAgICAgY29uc3QgaWRlbnRpZmllciA9IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiSWRlbnRpZmllciIpCiAgICAgICAgICApOwogICAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJEZWZhdWx0IikKICAgICAgICAgICk7CiAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGVsZW1lbnQyLCAiVmFsdWVzIikubWFwKAogICAgICAgICAgICBnZXRFbGVtZW50VGV4dAogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybiB7IGlkZW50aWZpZXIsIGRlZmF1bHRWYWx1ZSwgdmFsdWVzIH07CiAgICAgICAgfQogICAgICApOwogICAgICByZXR1cm4gewogICAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIklkZW50aWZpZXIiKSksCiAgICAgICAgdGl0bGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIlRpdGxlIikpLAogICAgICAgIGFic3RyYWN0OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJBYnN0cmFjdCIpKSwKICAgICAgICBzdHlsZXMsCiAgICAgICAgcmVzb3VyY2VMaW5rcywKICAgICAgICBtYXRyaXhTZXRzLAogICAgICAgIGRlZmF1bHRTdHlsZSwKICAgICAgICAuLi5sYXRMb25Cb3VuZGluZ0JveCAmJiB7IGxhdExvbkJvdW5kaW5nQm94IH0sCiAgICAgICAgLi4uZGltZW5zaW9ucyAmJiB7IGRpbWVuc2lvbnMgfQogICAgICB9OwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIHBhcnNlRmVhdHVyZVByb3BzKGdldEZlYXR1cmVzRG9jLCBmZWF0dXJlVHlwZUZ1bGwsIHNlcnZpY2VWZXJzaW9uKSB7CiAgICBjb25zdCBjb2xsZWN0aW9uID0gZ2V0Um9vdEVsZW1lbnQoZ2V0RmVhdHVyZXNEb2MpOwogICAgbGV0IG1lbWJlcnM7CiAgICBpZiAoc2VydmljZVZlcnNpb24uc3RhcnRzV2l0aCgiMi4wIikpIHsKICAgICAgbWVtYmVycyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoY29sbGVjdGlvbiwgIm1lbWJlciIpLm1hcCgKICAgICAgICAocGFyZW50KSA9PiBnZXRDaGlsZHJlbkVsZW1lbnQocGFyZW50KVswXQogICAgICApOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgbWVtYmVyc1Jvb3QgPSBmaW5kQ2hpbGRFbGVtZW50KGNvbGxlY3Rpb24sICJmZWF0dXJlTWVtYmVycyIpOwogICAgICBtZW1iZXJzID0gbWVtYmVyc1Jvb3QgPyBnZXRDaGlsZHJlbkVsZW1lbnQobWVtYmVyc1Jvb3QpIDogZmluZENoaWxkcmVuRWxlbWVudChjb2xsZWN0aW9uLCAiZmVhdHVyZU1lbWJlciIpLm1hcCgKICAgICAgICAocGFyZW50KSA9PiBnZXRDaGlsZHJlbkVsZW1lbnQocGFyZW50KVswXQogICAgICApOwogICAgfQogICAgY29uc3QgaWRBdHRyID0gc2VydmljZVZlcnNpb24gPT09ICIxLjAuMCIgPyAiZmlkIiA6ICJnbWw6aWQiOwogICAgZnVuY3Rpb24gaXNFbGVtZW50UHJvcGVydHkocHJvcE5hbWUpIHsKICAgICAgcmV0dXJuIHByb3BOYW1lIGluIGZlYXR1cmVUeXBlRnVsbC5wcm9wZXJ0aWVzOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VFbGVtZW50UHJvcGVydHlWYWx1ZShwcm9wTmFtZSwgdmFsdWVBc1N0cmluZykgewogICAgICBjb25zdCB0eXBlID0gZmVhdHVyZVR5cGVGdWxsLnByb3BlcnRpZXNbcHJvcE5hbWVdOwogICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICBjYXNlICJpbnRlZ2VyIjoKICAgICAgICAgIHJldHVybiBwYXJzZUludCh2YWx1ZUFzU3RyaW5nKTsKICAgICAgICBjYXNlICJmbG9hdCI6CiAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZUFzU3RyaW5nKTsKICAgICAgICBjYXNlICJib29sZWFuIjoKICAgICAgICAgIHJldHVybiB2YWx1ZUFzU3RyaW5nID09PSAidHJ1ZSI7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiB2YWx1ZUFzU3RyaW5nOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBnZXRQcm9wZXJ0aWVzKG1lbWJlckVsKSB7CiAgICAgIHJldHVybiBnZXRDaGlsZHJlbkVsZW1lbnQobWVtYmVyRWwpLmZpbHRlcigoZWwpID0+IGlzRWxlbWVudFByb3BlcnR5KHN0cmlwTmFtZXNwYWNlKGdldEVsZW1lbnROYW1lKGVsKSkpKS5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IHsKICAgICAgICBjb25zdCBwcm9wTmFtZSA9IHN0cmlwTmFtZXNwYWNlKGdldEVsZW1lbnROYW1lKGN1cnIpKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4ucHJldiwKICAgICAgICAgIFtwcm9wTmFtZV06IHBhcnNlRWxlbWVudFByb3BlcnR5VmFsdWUocHJvcE5hbWUsIGdldEVsZW1lbnRUZXh0KGN1cnIpKQogICAgICAgIH07CiAgICAgIH0sIHt9KTsKICAgIH0KICAgIHJldHVybiBtZW1iZXJzLm1hcCgoZWwpID0+ICh7CiAgICAgIGlkOiBnZXRFbGVtZW50QXR0cmlidXRlKGVsLCBpZEF0dHIpLAogICAgICBwcm9wZXJ0aWVzOiBnZXRQcm9wZXJ0aWVzKGVsKQogICAgfSkpOwogIH0KICBmdW5jdGlvbiBjb21wdXRlRmVhdHVyZVByb3BzRGV0YWlscyhmZWF0dXJlc1dpdGhQcm9wcykgewogICAgcmV0dXJuIGZlYXR1cmVzV2l0aFByb3BzLnJlZHVjZSgocHJldiwgY3VycikgPT4gewogICAgICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIGN1cnIucHJvcGVydGllcykgewogICAgICAgIGNvbnN0IHByb3BWYWx1ZSA9IGN1cnIucHJvcGVydGllc1twcm9wTmFtZV07CiAgICAgICAgaWYgKCEocHJvcE5hbWUgaW4gcHJldikpIHsKICAgICAgICAgIHByZXZbcHJvcE5hbWVdID0geyB1bmlxdWVWYWx1ZXM6IFtdIH07CiAgICAgICAgfQogICAgICAgIGNvbnN0IHVuaXF1ZVZhbHVlID0gcHJldltwcm9wTmFtZV0udW5pcXVlVmFsdWVzLmZpbmQoCiAgICAgICAgICAodikgPT4gdi52YWx1ZSA9PT0gcHJvcFZhbHVlCiAgICAgICAgKTsKICAgICAgICBpZiAodW5pcXVlVmFsdWUpCiAgICAgICAgICB1bmlxdWVWYWx1ZS5jb3VudCsrOwogICAgICAgIGVsc2UKICAgICAgICAgIHByZXZbcHJvcE5hbWVdLnVuaXF1ZVZhbHVlcy5wdXNoKHsgdmFsdWU6IHByb3BWYWx1ZSwgY291bnQ6IDEgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHByZXY7CiAgICB9LCB7fSk7CiAgfQogIGZ1bmN0aW9uIGdlbmVyYXRlR2V0RmVhdHVyZVVybChzZXJ2aWNlVXJsLCB2ZXJzaW9uLCBmZWF0dXJlVHlwZSwgb3V0cHV0Rm9ybWF0LCBtYXhGZWF0dXJlcywgYXR0cmlidXRlcywgaGl0c09ubHksIG91dHB1dENycywgZXh0ZW50LCBleHRlbnRDcnMsIHN0YXJ0SW5kZXgsIHNvcnRCeSkgewogICAgY29uc3QgdHlwZVBhcmFtID0gdmVyc2lvbiA9PT0gIjIuMC4wIiA/ICJUWVBFTkFNRVMiIDogIlRZUEVOQU1FIjsKICAgIGNvbnN0IGNvdW50UGFyYW0gPSB2ZXJzaW9uID09PSAiMi4wLjAiID8gIkNPVU5UIiA6ICJNQVhGRUFUVVJFUyI7CiAgICBjb25zdCBuZXdQYXJhbXMgPSB7CiAgICAgIFNFUlZJQ0U6ICJXRlMiLAogICAgICBSRVFVRVNUOiAiR2V0RmVhdHVyZSIsCiAgICAgIFZFUlNJT046IHZlcnNpb24sCiAgICAgIFt0eXBlUGFyYW1dOiBmZWF0dXJlVHlwZQogICAgfTsKICAgIGlmIChvdXRwdXRGb3JtYXQgIT09IHZvaWQgMCkKICAgICAgbmV3UGFyYW1zLk9VVFBVVEZPUk1BVCA9IG91dHB1dEZvcm1hdDsKICAgIGlmIChhdHRyaWJ1dGVzICE9PSB2b2lkIDApCiAgICAgIG5ld1BhcmFtcy5QUk9QRVJUWU5BTUUgPSBhdHRyaWJ1dGVzLmpvaW4oIiwiKTsKICAgIGlmIChoaXRzT25seSkgewogICAgICBuZXdQYXJhbXMuUkVTVUxUVFlQRSA9ICJoaXRzIjsKICAgICAgbmV3UGFyYW1zW2NvdW50UGFyYW1dID0gIjEiOwogICAgfSBlbHNlIGlmIChtYXhGZWF0dXJlcyAhPT0gdm9pZCAwKQogICAgICBuZXdQYXJhbXNbY291bnRQYXJhbV0gPSBtYXhGZWF0dXJlcy50b1N0cmluZygxMCk7CiAgICBpZiAob3V0cHV0Q3JzKSB7CiAgICAgIG5ld1BhcmFtcy5TUlNOQU1FID0gb3V0cHV0Q3JzOwogICAgfQogICAgaWYgKGV4dGVudCkgewogICAgICBjb25zdCBleHRlbnRKb2luZWQgPSBleHRlbnQuam9pbigiLCIpOwogICAgICBuZXdQYXJhbXMuQkJPWCA9IGV4dGVudENycyA/IGAke2V4dGVudEpvaW5lZH0sJHtleHRlbnRDcnN9YCA6IGV4dGVudEpvaW5lZDsKICAgIH0KICAgIGlmIChzdGFydEluZGV4KSB7CiAgICAgIG5ld1BhcmFtcy5TVEFSVElOREVYID0gc3RhcnRJbmRleC50b1N0cmluZygxMCk7CiAgICB9CiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHNldFF1ZXJ5UGFyYW1zKHNlcnZpY2VVcmwsIG5ld1BhcmFtcykpOwogICAgaWYgKEFycmF5LmlzQXJyYXkoc29ydEJ5KSAmJiBzb3J0QnkubGVuZ3RoID4gMCkgewogICAgICBjb25zdCBzb3J0cyA9IHNvcnRCeS5tYXAoKGZpZWxkU29ydCkgPT4gYCR7ZmllbGRTb3J0WzFdfSAke2ZpZWxkU29ydFswXX1gKS5qb2luKCIsIik7CiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCJTT1JUQlkiLCBzb3J0cyk7CiAgICB9CiAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7CiAgfQogIGFkZFRhc2tIYW5kbGVyKAogICAgInBhcnNlV21zQ2FwYWJpbGl0aWVzIiwKICAgIGdsb2JhbFRoaXMsCiAgICAoeyB1cmwgfSkgPT4gcXVlcnlYbWxEb2N1bWVudCh1cmwpLnRoZW4oKHhtbERvYykgPT4gY2hlY2soeG1sRG9jLCB1cmwpKS50aGVuKCh4bWxEb2MpID0+ICh7CiAgICAgIGluZm86IHJlYWRJbmZvRnJvbUNhcGFiaWxpdGllcyQyKHhtbERvYyksCiAgICAgIGxheWVyczogcmVhZExheWVyc0Zyb21DYXBhYmlsaXRpZXMkMSh4bWxEb2MpLAogICAgICB1cmw6IHJlYWRPcGVyYXRpb25VcmxzRnJvbUNhcGFiaWxpdGllcyQxKHhtbERvYyksCiAgICAgIHZlcnNpb246IHJlYWRWZXJzaW9uRnJvbUNhcGFiaWxpdGllcyQxKHhtbERvYykKICAgIH0pKQogICk7CiAgYWRkVGFza0hhbmRsZXIoCiAgICAicGFyc2VXZnNDYXBhYmlsaXRpZXMiLAogICAgZ2xvYmFsVGhpcywKICAgICh7IHVybCB9KSA9PiBxdWVyeVhtbERvY3VtZW50KHVybCkudGhlbigoeG1sRG9jKSA9PiBjaGVjayh4bWxEb2MsIHVybCkpLnRoZW4oKHhtbERvYykgPT4gKHsKICAgICAgaW5mbzogcmVhZEluZm9Gcm9tQ2FwYWJpbGl0aWVzJDEoeG1sRG9jKSwKICAgICAgZmVhdHVyZVR5cGVzOiByZWFkRmVhdHVyZVR5cGVzRnJvbUNhcGFiaWxpdGllcyh4bWxEb2MpLAogICAgICB1cmw6IHJlYWRPcGVyYXRpb25VcmxzRnJvbUNhcGFiaWxpdGllcyh4bWxEb2MpLAogICAgICB2ZXJzaW9uOiByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMoeG1sRG9jKQogICAgfSkpCiAgKTsKICBhZGRUYXNrSGFuZGxlcigKICAgICJxdWVyeVdmc0ZlYXR1cmVUeXBlRGV0YWlscyIsCiAgICBnbG9iYWxUaGlzLAogICAgKHsKICAgICAgdXJsLAogICAgICBzZXJ2aWNlVmVyc2lvbiwKICAgICAgZmVhdHVyZVR5cGVGdWxsCiAgICB9KSA9PiB7CiAgICAgIGNvbnN0IGdldEZlYXR1cmVVcmwgPSBnZW5lcmF0ZUdldEZlYXR1cmVVcmwoCiAgICAgICAgdXJsLAogICAgICAgIHNlcnZpY2VWZXJzaW9uLAogICAgICAgIGZlYXR1cmVUeXBlRnVsbC5uYW1lLAogICAgICAgIHZvaWQgMCwKICAgICAgICB2b2lkIDAsCiAgICAgICAgT2JqZWN0LmtleXMoZmVhdHVyZVR5cGVGdWxsLnByb3BlcnRpZXMpCiAgICAgICk7CiAgICAgIHJldHVybiBxdWVyeVhtbERvY3VtZW50KGdldEZlYXR1cmVVcmwpLnRoZW4oKGdldEZlYXR1cmVEb2MpID0+ICh7CiAgICAgICAgcHJvcHM6IGNvbXB1dGVGZWF0dXJlUHJvcHNEZXRhaWxzKAogICAgICAgICAgcGFyc2VGZWF0dXJlUHJvcHMoZ2V0RmVhdHVyZURvYywgZmVhdHVyZVR5cGVGdWxsLCBzZXJ2aWNlVmVyc2lvbikKICAgICAgICApCiAgICAgIH0pKTsKICAgIH0KICApOwogIGFkZFRhc2tIYW5kbGVyKAogICAgInVwZGF0ZUZldGNoT3B0aW9ucyIsCiAgICBnbG9iYWxUaGlzLAogICAgKHsgb3B0aW9ucyB9KSA9PiB7CiAgICAgIHNldEZldGNoT3B0aW9ucyhvcHRpb25zKTsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7fSk7CiAgICB9CiAgKTsKICBhZGRUYXNrSGFuZGxlcigKICAgICJwYXJzZVdtdHNDYXBhYmlsaXRpZXMiLAogICAgZ2xvYmFsVGhpcywKICAgICh7IHVybCB9KSA9PiBxdWVyeVhtbERvY3VtZW50KHVybCkudGhlbigoeG1sRG9jKSA9PiBjaGVjayh4bWxEb2MsIHVybCkpLnRoZW4oKHhtbERvYykgPT4gKHsKICAgICAgaW5mbzogcmVhZEluZm9Gcm9tQ2FwYWJpbGl0aWVzKHhtbERvYyksCiAgICAgIGxheWVyczogcmVhZExheWVyc0Zyb21DYXBhYmlsaXRpZXMoeG1sRG9jKSwKICAgICAgbWF0cml4U2V0czogcmVhZE1hdHJpeFNldHNGcm9tQ2FwYWJpbGl0aWVzKHhtbERvYykKICAgIH0pKQogICk7Cn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmtlci1MRGtNT3gwZC5qcy5tYXAK",oR=typeof window<"u"&&window.Blob&&new Blob([atob(eO)],{type:"text/javascript;charset=utf-8"});function uie(a){let e;try{if(e=oR&&(window.URL||window.webkitURL).createObjectURL(oR),!e)throw"";const t=new Worker(e,{name:a?.name});return t.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;base64,"+eO,{name:a?.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}let m4;function cie(){return m4||(m4=new uie),m4}function die(a){return lie("parseWmsCapabilities",cie(),{url:a})}var f4,lR;function hie(){if(lR)return f4;lR=1;var a=Object.defineProperty,e=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,n=(re,Q)=>{for(var J in Q)a(re,J,{get:Q[J],enumerable:!0})},s=(re,Q,J,je)=>{if(Q&&typeof Q=="object"||typeof Q=="function")for(let Qe of t(Q))!i.call(re,Qe)&&Qe!==J&&a(re,Qe,{get:()=>Q[Qe],enumerable:!(je=e(Q,Qe))||je.enumerable});return re},r=re=>s(a({},"__esModule",{value:!0}),re),l={};n(l,{XmlCdata:()=>$,XmlComment:()=>te,XmlDeclaration:()=>ce,XmlDocument:()=>X,XmlDocumentType:()=>de,XmlElement:()=>me,XmlError:()=>N,XmlNode:()=>Z,XmlProcessingInstruction:()=>ne,XmlText:()=>Y,parseXml:()=>Ie}),f4=r(l);var u="",d=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=class{constructor(re){if(this.k=this.u(re,!0),this.d=0,this.length=re.length,this.l=this.k!==this.length,this.h=re,this.l){let Q=[];for(let J=0,je=0;je<this.k;++je)Q[je]=J,J+=re.codePointAt(J)>65535?2:1;this.A=Q}}get B(){return this.d>=this.k}u(re,Q=this.l){return Q?re.replace(d,"_").length:re.length}p(re=1){this.d=Math.min(this.k,this.d+re)}f(re=this.d){var Q;return this.l?(Q=this.A[re])!=null?Q:1/0:re}G(re=1){let Q=this.m(re);return this.p(re),Q}v(re){let Q=this.f(),J=this.h.slice(Q,Q+re);return this.p(this.u(J)),J}w(re){let{length:Q,l:J,h:je}=this,Qe=this.f(),Je=Qe;if(J)for(;Je<Q;){let kt=je[Je],Pt=kt>="\uD800"&&kt<="\uDBFF";if(Pt&&(kt+=je[Je+1]),!re(kt))break;Je+=Pt?2:1}else for(;Je<Q&&re(je[Je]);)++Je;return this.v(Je-Qe)}b(re){let{length:Q}=re,J=this.f();return re===this.h.slice(J,J+Q)?(this.p(Q===1?1:this.u(re)),re):u}x(re){let Q=this.h.slice(this.f()).search(re);return Q>0?this.v(Q):u}s(re){let Q=this.f(),J=this.h.indexOf(re,Q);return J>0?this.v(J-Q):u}m(re=1){let{d:Q,h:J}=this;return this.l?J.slice(this.f(Q),this.f(Q+re)):J.slice(Q,Q+re)}n(re=0){this.d=re>=0?Math.min(this.k,re):Math.max(0,this.d+re)}},g=/["&<]/,y=/['&<]/,x=/\r\n|[\n\r\t]/g,C=/<|&|]]>/,I=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));function A(re){let Q=re.codePointAt(0);return Q>=97&&Q<=122||Q>=65&&Q<=90||Q>=48&&Q<=57||Q===45||Q===46||Q===183||Q>=768&&Q<=879||Q===8255||Q===8256||E(re,Q)}function E(re,Q=re.codePointAt(0)){return Q>=97&&Q<=122||Q>=65&&Q<=90||Q===58||Q===95||Q>=192&&Q<=214||Q>=216&&Q<=246||Q>=248&&Q<=767||Q>=880&&Q<=893||Q>=895&&Q<=8191||Q===8204||Q===8205||Q>=8304&&Q<=8591||Q>=11264&&Q<=12271||Q>=12289&&Q<=55295||Q>=63744&&Q<=64975||Q>=65008&&Q<=65533||Q>=65536&&Q<=983039}function L(re){return re==="#"||A(re)}function G(re){let Q=re.codePointAt(0);return Q===32||Q===9||Q===10||Q===13}function F(re){return re>=32&&re<=55295||re===10||re===9||re===13||re>=57344&&re<=65533||re>=65536&&re<=1114111}var B=class tO{constructor(){this.parent=null,this.start=-1,this.end=-1}get document(){var Q,J;return(J=(Q=this.parent)==null?void 0:Q.document)!=null?J:null}get isRootNode(){return this.parent!==null&&this.parent===this.document&&this.type===tO.TYPE_ELEMENT}get preserveWhitespace(){var Q;return!!((Q=this.parent)!=null&&Q.preserveWhitespace)}get type(){return""}toJSON(){let Q={type:this.type};return this.isRootNode&&(Q.isRootNode=!0),this.preserveWhitespace&&(Q.preserveWhitespace=!0),this.start!==-1&&(Q.start=this.start,Q.end=this.end),Q}};B.TYPE_CDATA="cdata",B.TYPE_COMMENT="comment",B.TYPE_DOCUMENT="document",B.TYPE_DOCUMENT_TYPE="doctype",B.TYPE_ELEMENT="element",B.TYPE_PROCESSING_INSTRUCTION="pi",B.TYPE_TEXT="text",B.TYPE_XML_DECLARATION="xmldecl";var Z=B,Y=class extends Z{constructor(re=""){super(),this.text=re}get type(){return Z.TYPE_TEXT}toJSON(){return Object.assign(Z.prototype.toJSON.call(this),{text:this.text})}},$=class extends Y{get type(){return Z.TYPE_CDATA}},te=class extends Z{constructor(re=""){super(),this.content=re}get type(){return Z.TYPE_COMMENT}toJSON(){return Object.assign(Z.prototype.toJSON.call(this),{content:this.content})}},ce=class extends Z{constructor(re,Q,J){super(),this.version=re,this.encoding=Q??null,this.standalone=J??null}get type(){return Z.TYPE_XML_DECLARATION}toJSON(){let re=Z.prototype.toJSON.call(this);re.version=this.version;for(let Q of["encoding","standalone"])this[Q]!==null&&(re[Q]=this[Q]);return re}},me=class aO extends Z{constructor(Q,J=Object.create(null),je=[]){super(),this.name=Q,this.attributes=J,this.children=je}get isEmpty(){return this.children.length===0}get preserveWhitespace(){let Q=this;for(;Q instanceof aO;){if("xml:space"in Q.attributes)return Q.attributes["xml:space"]==="preserve";Q=Q.parent}return!1}get text(){return this.children.map(Q=>"text"in Q?Q.text:"").join("")}get type(){return Z.TYPE_ELEMENT}toJSON(){return Object.assign(Z.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(Q=>Q.toJSON())})}},X=class extends Z{constructor(re=[]){super(),this.children=re}get document(){return this}get root(){for(let re of this.children)if(re instanceof me)return re;return null}get text(){return this.children.map(re=>"text"in re?re.text:"").join("")}get type(){return Z.TYPE_DOCUMENT}toJSON(){return Object.assign(Z.prototype.toJSON.call(this),{children:this.children.map(re=>re.toJSON())})}},de=class extends Z{constructor(re,Q,J,je){super(),this.name=re,this.publicId=Q??null,this.systemId=J??null,this.internalSubset=je??null}get type(){return Z.TYPE_DOCUMENT_TYPE}toJSON(){let re=Z.prototype.toJSON.call(this);re.name=this.name;for(let Q of["publicId","systemId","internalSubset"])this[Q]!==null&&(re[Q]=this[Q]);return re}},N=class extends Error{constructor(re,Q,J){let je=1,Qe="",Je=1;for(let zt=0;zt<Q;++zt){let Nt=J[zt];Nt===`
`?(je=1,Qe="",Je+=1):(je+=1,Qe+=Nt)}let kt=J.indexOf(`
`,Q);Qe+=kt===-1?J.slice(Q):J.slice(Q,kt);let Pt=0;Qe.length>50&&(je<40?Qe=Qe.slice(0,50):(Pt=je-20,Qe=Qe.slice(Pt,je+30))),super(`${re} (line ${Je}, column ${je})
  ${Qe}
`+" ".repeat(je-Pt+1)+`^
`),this.column=je,this.excerpt=Qe,this.line=Je,this.name="XmlError",this.pos=Q}},ne=class extends Z{constructor(re,Q=""){super(),this.name=re,this.content=Q}get type(){return Z.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(Z.prototype.toJSON.call(this),{name:this.name,content:this.content})}},le="",_e=class{constructor(re,Q={}){let J=this.document=new X;this.j=J,this.g=Q,this.c=new h(re),this.g.includeOffsets&&(J.start=0,J.end=re.length),this.parse()}i(re,Q){return re.parent=this.j,this.g.includeOffsets&&(re.start=this.c.f(Q),re.end=this.c.f()),this.j.children.push(re),!0}y(re,Q){let{children:J}=this.j,{length:je}=J;if(re=ke(re),je>0){let Qe=J[je-1];if(Qe?.type===Z.TYPE_TEXT){let Je=Qe;return Je.text+=re,this.g.includeOffsets&&(Je.end=this.c.f()),!0}}return this.i(new Y(re),Q)}H(){let re=Object.create(null);for(;this.e();){let Q=this.q();if(!Q)break;let J=this.t()&&this.I();if(J===!1)throw this.a("Attribute value expected");if(Q in re)throw this.a(`Duplicate attribute: ${Q}`);if(Q==="xml:space"&&J!=="default"&&J!=="preserve")throw this.a('Value of the `xml:space` attribute must be "default" or "preserve"');re[Q]=J}if(this.g.sortAttributes){let Q=Object.keys(re).sort(),J=Object.create(null);for(let je=0;je<Q.length;++je){let Qe=Q[je];J[Qe]=re[Qe]}re=J}return re}I(){let{c:re}=this,Q=re.m();if(Q!=='"'&&Q!=="'")return!1;re.p();let J,je=!1,Qe=le,Je=Q==='"'?g:y;e:for(;!re.B;)switch(J=re.x(Je),J&&(this.o(J),Qe+=J.replace(x," ")),re.m()){case Q:je=!0;break e;case"&":Qe+=this.C();continue;case"<":throw this.a("Unescaped `<` is not allowed in an attribute value");default:break e}if(!je)throw this.a("Unclosed attribute");return re.p(),Qe}J(){let{c:re}=this,Q=re.d;if(!re.b("<![CDATA["))return!1;let J=re.s("]]>");if(this.o(J),!re.b("]]>"))throw this.a("Unclosed CDATA section");return this.g.preserveCdata?this.i(new $(ke(J)),Q):this.y(J,Q)}K(){let{c:re}=this,Q=re.d,J=re.x(C);if(!J)return!1;if(this.o(J),re.m(3)==="]]>")throw this.a("Element content may not contain the CDATA section close delimiter `]]>`");return this.y(J,Q)}D(){let{c:re}=this,Q=re.d;if(!re.b("<!--"))return!1;let J=re.s("--");if(this.o(J),!re.b("-->"))throw re.m(2)==="--"?this.a("The string `--` isn't allowed inside a comment"):this.a("Unclosed comment");return this.g.preserveComments?this.i(new te(ke(J)),Q):!0}L(){let re=this.c.d,Q=this.C();return Q?this.y(Q,re):!1}M(){let{c:re}=this,Q=re.d;if(!re.b("<!DOCTYPE"))return!1;let J=this.e()&&this.q();if(!J)throw this.a("Expected a name");let je,Qe;if(this.e()){if(re.b("PUBLIC")){if(je=this.e()&&this.N(),je===!1)throw this.a("Expected a public identifier");this.e()}if(je!==void 0||re.b("SYSTEM")){if(this.e(),Qe=this.r(),Qe===!1)throw this.a("Expected a system identifier");this.e()}}let Je;if(re.b("[")){if(Je=re.x(/\][\x20\t\r\n]*>/),!re.b("]"))throw this.a("Unclosed internal subset");this.e()}if(!re.b(">"))throw this.a("Unclosed doctype declaration");return this.g.preserveDocumentType?this.i(new de(J,je,Qe,Je),Q):!0}E(){let{c:re}=this,Q=re.d;if(!re.b("<"))return!1;let J=this.q();if(!J)return re.n(Q),!1;let je=this.H(),Qe=!!re.b("/>"),Je=new me(J,je);if(Je.parent=this.j,!Qe){if(!re.b(">"))throw this.a(`Unclosed start tag for element \`${J}\``);this.j=Je;do this.K();while(this.E()||this.L()||this.J()||this.F()||this.D());let kt=re.d,Pt;if(!re.b("</")||!(Pt=this.q())||Pt!==J)throw re.n(kt),this.a(`Missing end tag for element ${J}`);if(this.e(),!re.b(">"))throw this.a(`Unclosed end tag for element ${J}`);this.j=Je.parent}return this.i(Je,Q)}t(){return this.e(),this.c.b("=")?(this.e(),!0):!1}z(){return this.D()||this.F()||this.e()}q(){return E(this.c.m())?this.c.w(A):le}F(){let{c:re}=this,Q=re.d;if(!re.b("<?"))return!1;let J=this.q();if(J){if(J.toLowerCase()==="xml")throw re.n(Q),this.a("XML declaration isn't allowed here")}else throw this.a("Invalid processing instruction");if(!this.e()){if(re.b("?>"))return this.i(new ne(J),Q);throw this.a("Whitespace is required after a processing instruction name")}let je=re.s("?>");if(this.o(je),!re.b("?>"))throw this.a("Unterminated processing instruction");return this.i(new ne(J,ke(je)),Q)}O(){let{c:re}=this,Q=re.d;for(this.P();this.z(););if(this.M())for(;this.z(););return Q<re.d}N(){let re=this.c.d,Q=this.r();if(Q!==!1&&!/^[-\x20\r\na-zA-Z0-9'()+,./:=?;!*#@$_%]*$/.test(Q))throw this.c.n(re),this.a("Invalid character in public identifier");return Q}C(){let{c:re}=this;if(!re.b("&"))return!1;let Q=re.w(L);if(re.G()!==";")throw this.a("Unterminated reference (a reference must end with `;`)");let J;if(Q[0]==="#"){let je=Q[1]==="x"?parseInt(Q.slice(2),16):parseInt(Q.slice(1),10);if(isNaN(je))throw this.a("Invalid character reference");if(!F(je))throw this.a("Character reference resolves to an invalid character");J=String.fromCodePoint(je)}else if(J=I[Q],J===void 0){let{ignoreUndefinedEntities:je,resolveUndefinedEntity:Qe}=this.g,Je=`&${Q};`;if(Qe){let kt=Qe(Je);if(kt!=null){let Pt=typeof kt;if(Pt!=="string")throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${Pt}`);return kt}}if(je)return Je;throw re.n(-Je.length),this.a(`Named entity isn't defined: ${Je}`)}return J}r(){let{c:re}=this,Q=re.b('"')||re.b("'");if(!Q)return!1;let J=re.s(Q);if(this.o(J),!re.b(Q))throw this.a("Missing end quote");return J}e(){return!!this.c.w(G)}P(){let{c:re}=this,Q=re.d;if(!re.b("<?xml"))return!1;if(!this.e())throw this.a("Invalid XML declaration");let J=!!re.b("version")&&this.t()&&this.r();if(J===!1)throw this.a("XML version is missing or invalid");if(!/^1\.[0-9]+$/.test(J))throw this.a("Invalid character in version number");let je,Qe;if(this.e()){if(je=!!re.b("encoding")&&this.t()&&this.r(),je){if(!/^[A-Za-z][\w.-]*$/.test(je))throw this.a("Invalid character in encoding name");this.e()}if(Qe=!!re.b("standalone")&&this.t()&&this.r(),Qe){if(Qe!=="yes"&&Qe!=="no")throw this.a('Only "yes" and "no" are permitted as values of `standalone`');this.e()}}if(!re.b("?>"))throw this.a("Invalid or unclosed XML declaration");return this.g.preserveXmlDeclaration?this.i(new ce(J,je||void 0,Qe||void 0),Q):!0}a(re){let{c:Q}=this;return new N(re,Q.d,Q.h)}parse(){if(this.c.b("\uFEFF"),this.O(),!this.E())throw this.a("Root element is missing or invalid");for(;this.z(););if(!this.c.B)throw this.a("Extra content at the end of the document")}o(re){let{length:Q}=re;for(let J=0;J<Q;++J){let je=re.codePointAt(J);if(!F(je))throw this.c.n(-([...re].length-J)),this.a("Invalid character");je>65535&&(J+=1)}}};function ke(re){let Q=0;for(;(Q=re.indexOf("\r",Q))!==-1;)re=re[Q+1]===`
`?re.slice(0,Q)+re.slice(Q+1):re.slice(0,Q)+`
`+re.slice(Q+1);return re}function Ie(re,Q){return new _e(re,Q).document}return f4}var iO=hie();class _ie extends Error{constructor(e){super(e)}}function mie(a){let e=null;try{e=iO.parseXml(a)}catch(t){throw new _ie(t.message)}return e}function Wc(a){const e=a.indexOf(":");return e>-1?a.substr(e+1):a}function es(a){return a.children[0]}function Oc(a){return a.name||""}function di(a,e,t=!1){const i=Wc(e);function n(s,r){return Wc(Oc(r))===i&&s.push(r),t&&Array.isArray(r.children)?[...s,...r.children.reduce(n,[])]:s}return a&&Array.isArray(a.children)?a.children.reduce(n,[]):[]}function ft(a,e,t=!1){return di(a,e,t)[0]||null}function xc(a){return a&&Array.isArray(a.children)?[...a.children.filter(e=>e instanceof iO.XmlElement)]:[]}function Zt(a){const e=a&&Array.isArray(a.children)?a.children.find(t=>t.type==="text"):null;return e?e.text:""}function Hi(a,e){return a&&a.attributes[e]||""}class gx extends Error{constructor(e,t,i){super(e),this.httpStatus=t,this.isCrossOriginRelated=i,this.name="EndpointError"}}class nO extends Error{constructor(e,t,i,n,s){super(e),this.requestUrl=t,this.code=i,this.locator=n,this.response=s,this.name="ServiceExceptionError"}}function uR(a,e){const t=Hi(a,"code")||Hi(a,"exceptionCode"),i=Hi(a,"locator"),n=ft(a,"ExceptionText")||a,s=Zt(n).trim();return new nO(s,e,t,i,a.document)}function VT(a,e){const t=es(a),i=Wc(Oc(t));if(i==="ServiceExceptionReport"){const n=ft(t,"ServiceException");if(n)throw uR(n,e)}if(i==="ExceptionReport"){const n=ft(t,"Exception");if(n)throw uR(n,e)}return a}function fie(a){const e={message:a.message,stack:a.stack,name:a.name};return a instanceof nO?{...e,code:a.code,locator:a.locator,response:a.response,requestUrl:a.requestUrl}:a instanceof gx?{...e,httpStatus:a.httpStatus,isCrossOriginRelated:a.isCrossOriginRelated}:e}const cR=["utf-8","utf-16","iso-8859-1"],dR="utf-8";function gie(a){const e=/charset=([^;]+)/.exec(a);return e?e[1]:null}function pie(a,e){const t=e?gie(e):null,i=t?[t,...cR]:cR;for(const n of i)try{return new TextDecoder(n,{fatal:!0}).decode(a)}catch{}return console.warn(`[ogc-client] XML document encoding could not be determined, falling back to ${dR}.`),new TextDecoder(dR).decode(a)}const b2=new Map;let rO={};function yie(a){rO=a}function sO(){return rO}function bie(a,e="GET",t){let i=`${e}#${a}`;if(b2.has(i))return b2.get(i);const n={...sO()};n.method=e;const s=fetch(a,n).catch(r=>r).then(r=>(b2.delete(i),r));return b2.set(i,s),s.then(r=>{if(r instanceof Error)throw r;return r.clone()})}function QC(a){return bie(a).catch(()=>fetch(a,{...sO(),method:"HEAD",mode:"no-cors"}).catch(e=>{throw new gx(`Fetching the document failed either due to network errors or unreachable host, error is: ${e.message}`,0,!1)}).then(()=>{throw new gx("The document could not be fetched due to CORS limitations",0,!0)})).then(async e=>{if(!e.ok){const n=await e.text();throw new gx(`Received an error with code ${e.status}: ${n}`,e.status,!1)}const t=await e.arrayBuffer(),i=e.headers.get("Content-Type");return pie(t,i)}).then(e=>mie(e))}function z1(a,e){const t=a.match(/(https?%3A%2F%2F[^/]+)$/);if(t){const l=t[1],u=z1(decodeURIComponent(l),e);return a.replace(l,encodeURIComponent(u))}const i=new URL(a),n=Object.keys(e),s=n.map(l=>l.toLowerCase()),r=[];for(const l of i.searchParams.keys())s.indexOf(l.toLowerCase())>-1&&r.push(l);return r.map(l=>i.searchParams.delete(l)),n.forEach(l=>i.searchParams.set(l,e[l]===!0?"":e[l])),i.toString()}let vie=1e3*60*60;function xie(){return vie}let xm;function eI(){return xm!==void 0?xm:"caches"in globalThis?(xm=caches.open("ogc-client").catch(a=>(console.info("[ogc-client] Cache could not be accessed for the following reason:",a),null)),xm):(xm=Promise.resolve(null),xm)}async function wie(a,...e){const t=await eI();if(!t)return;const i="https://cache/"+e.join("/");try{await t.put(i,new Response(JSON.stringify(a),{headers:{"x-expiry":(Date.now()+xie()).toString(10)}}))}catch(n){console.info("[ogc-client] Caching failed once for the following reason and will not be retried:",n),xm=Promise.resolve(null)}}async function Cie(...a){const e=await eI();if(!e)return;const t="https://cache/"+a.join("/");return e.match(t).then(i=>!!i&&parseInt(i.headers.get("x-expiry"))>Date.now())}async function Iie(...a){const e=await eI();if(!e)return;const t="https://cache/"+a.join("/"),i=await e.match(t);return i?i.clone().json():null}const v2=new Map;async function Sie(a,...e){if(await Aie(),await Cie(...e))return Iie(...e);const t=e.join("#");if(v2.has(t))return v2.get(t);const i=a();i instanceof Promise&&(i.then(()=>v2.delete(t)),v2.set(t,i));const n=await i;return await wie(n,...e),n}async function Aie(){const a=await eI();if(!a)return;const e=await a.keys();for(const t of e){const i=await a.match(t);parseInt(i.headers.get("x-expiry"))<=Date.now()&&await a.delete(t)}}function Tie(a,e,t,i,n,s,r,l,u,d,h,g){const x={SERVICE:"WFS",REQUEST:"GetFeature",VERSION:e,[e==="2.0.0"?"TYPENAMES":"TYPENAME"]:t};s!==void 0&&(x.PROPERTYNAME=s.join(","));const C=new URL(z1(a,x));if(Array.isArray(g)&&g.length>0){const I=g.map(A=>`${A[1]} ${A[0]}`).join(",");C.searchParams.set("SORTBY",I)}return C.toString()}function Eie(a,e,t,i,n,s,r,l,u){const d=e==="1.3.0"?"CRS":"SRS",h={SERVICE:"WMS",REQUEST:"GetMap",VERSION:e,LAYERS:t,STYLES:u??""};return h.WIDTH=i.toString(),h.HEIGHT=n.toString(),h.FORMAT=l??"image/png",h[d]=s,h.BBOX=r.join(","),z1(a,h)}class Mie{_capabilitiesUrl;_capabilitiesPromise;_info;_layers;_url;_version;constructor(e){this._capabilitiesUrl=z1(e,{SERVICE:"WMS",REQUEST:"GetCapabilities"}),this._capabilitiesPromise=Sie(()=>die(this._capabilitiesUrl),"WMS","CAPABILITIES",this._capabilitiesUrl).then(({info:t,layers:i,url:n,version:s})=>{this._info=t,this._layers=i,this._url=n,this._version=s})}isReady(){return this._capabilitiesPromise.then(()=>this)}getServiceInfo(){return this._info}getLayers(){function e(t){return{title:t.title,name:t.name,abstract:t.abstract,..."children"in t&&{children:t.children.map(e)}}}return this._layers.map(e)}getFlattenedLayers(){return this.getLayers().flatMap(oO)}getLayerByName(e){let t=null;function i(n){if(t===null){if(n.name===e){t=n;return}"children"in n&&n.children.map(i)}}return this._layers.map(i),t}getSingleLayerName(){if(!this._layers)return null;const e=[];function t(i){i.name&&e.push(i),"children"in i&&i.children.map(t)}return this._layers.map(t),e.length===1?e[0].name:null}getVersion(){return this._version}getMapUrl(e,t){if(!this._layers)return null;const{widthPx:i,heightPx:n,crs:s,extent:r,outputFormat:l,styles:u}=t;return Eie(this.getOperationUrl("GetMap")||this._capabilitiesUrl,this._version,e.join(","),i,n,s,r,l,u!==void 0?u.join(","):"")}getCapabilitiesUrl(){const e=this.getOperationUrl("GetCapabilities");return e?z1(e,{SERVICE:"WMS",REQUEST:"GetCapabilities"}):this._capabilitiesUrl}getOperationUrl(e,t="Get"){return this._url?this._url[e]?.[t]:null}}function oO(a){const e={title:a.title,name:a.name,abstract:a.abstract};return"children"in a&&Array.isArray(a.children)?[e,...a.children.flatMap(oO)]:[e]}const hR=new EventTarget;function Tb(a,e,t){const i=typeof WorkerGlobalScope<"u",n=async s=>{if(s.taskName===a){let r,l;try{r=await t(s.params)}catch(d){l=fie(d)}const u={taskName:a,requestId:s.requestId,...r&&{response:r},...l&&{error:l}};i?e.postMessage(u):hR.dispatchEvent(new CustomEvent("ogc-client.response",{detail:u}))}};i?e.addEventListener("message",s=>n(s.data)):hR.addEventListener("ogc-client.request",s=>n(s.detail))}const Lie=["EPSG:4046","EPSG:4075","EPSG:4120","EPSG:4122","EPSG:4124","EPSG:4126","EPSG:4149","EPSG:4151","EPSG:4153","EPSG:4155","EPSG:4157","EPSG:4159","EPSG:4161","EPSG:4163","EPSG:4165","EPSG:4167","EPSG:4169","EPSG:4171","EPSG:4173","EPSG:4175","EPSG:4178","EPSG:4180","EPSG:4182","EPSG:4184","EPSG:4188","EPSG:4190","EPSG:4191","EPSG:4196","EPSG:4198","EPSG:4202","EPSG:4210","EPSG:4211","EPSG:4214","EPSG:4226","EPSG:4229","EPSG:4231","EPSG:4233","EPSG:4236","EPSG:4238","EPSG:4240","EPSG:4242","EPSG:4244","EPSG:4246","EPSG:4248","EPSG:4250","EPSG:4252","EPSG:4255","EPSG:4258","EPSG:4261","EPSG:4264","EPSG:4267","EPSG:4270","EPSG:4273","EPSG:4276","EPSG:4279","EPSG:4281","EPSG:4284","EPSG:4286","EPSG:4288","EPSG:4292","EPSG:4295","EPSG:4297","EPSG:4299","EPSG:4302","EPSG:4324","EPSG:4326"];function Rie(a){return Lie.indexOf(f3(a))>-1}function f3(a){return/^urn:(?:x-)?ogc:def:crs:epsg:/.test(a.toLowerCase())?`EPSG:${/([0-9]+)$/.exec(a)[1]}`:a}function kie(a){const e={},t=ft(es(a),"Capability"),i=ft(t,"Request");return xc(i).forEach(n=>{const s=Wc(Oc(n));e[s]=Nie(n)}),e}function lO(a){return es(a).attributes.version}function Pie(a){const e=lO(a),t=ft(es(a),"Capability");return di(t,"Layer").map(i=>uO(i,e))}function Gie(a){const e=ft(es(a),"Capability"),t=ft(ft(e,"Request"),"GetMap");return di(t,"Format").map(Zt)}function Wie(a){const e=ft(es(a),"Capability"),t=ft(ft(e,"Request"),"GetFeatureInfo");return di(t,"Format").map(Zt)}function Oie(a){const e=ft(es(a),"Capability"),t=ft(e,"Exception");return di(t,"Format").map(Zt)}function Fie(a){const e=ft(es(a),"Service"),t=Gie(a),i=Wie(a),n=Oie(a),s=di(ft(e,"KeywordList"),"Keyword").map(Zt).filter((l,u,d)=>d.indexOf(l)===u),r=Vie(a);return{title:Zt(ft(e,"Title")),name:Zt(ft(e,"Name")),abstract:Zt(ft(e,"Abstract")),outputFormats:t,infoFormats:i,exceptionFormats:n,fees:Zt(ft(e,"Fees")),constraints:Zt(ft(e,"AccessConstraints")),provider:r,keywords:s}}function Nie(a){const e={};return di(a,"DCPType").flatMap(s=>ft(s,"HTTP")).flatMap(s=>xc(s)).forEach(s=>{const r=ft(s,"OnlineResource"),l=Wc(Oc(s));e[l]=Hi(r,"xlink:href")}),e}function uO(a,e,t=[],i=[],n=null,s=null,r=null,l=null){const u=e==="1.3.0"?"CRS":"SRS",d=di(a,u).map(Zt),h=d.length>0?d:t,g=di(a,"Style").map(Bie),y=g.length>0?g:i;function x(ne){const le=Hi(ne,u);return(Rie(le)&&e==="1.3.0"?["miny","minx","maxy","maxx"]:["minx","miny","maxx","maxy"]).map(ke=>Hi(ne,ke))}function C(ne){return["westBoundLongitude","southBoundLatitude","eastBoundLongitude","northBoundLatitude"].map(le=>Zt(ft(ne,le)))}function I(ne){return["minx","miny","maxx","maxy"].map(le=>Hi(ne,le))}function A(ne,le){return ne===""?le:Math.sqrt(.5*parseFloat(ne)**2)/28e-5}function E(){const ne=ft(a,"ScaleHint");if(!ne)return[l,r];const le=Hi(ne,"min"),_e=Hi(ne,"max");return[A(le,l),A(_e,r)]}function L(ne,le){const _e=Zt(ft(a,ne));return _e===""?le:parseFloat(_e)}const G=ft(a,"Attribution"),F=G!==null?Die(G):n,B=e==="1.3.0"?ft(a,"EX_GeographicBoundingBox"):ft(a,"LatLonBoundingBox"),Z={};B&&(Z["EPSG:4326"]=e==="1.3.0"?C(B):I(B));let Y=di(a,"BoundingBox").reduce((ne,le)=>({...ne,[Hi(le,u)]:x(le)}),Z);Y=Object.keys(Y).length>0||s===null?Y:s;const $=a.attributes.queryable==="1"||a.attributes.queryable==="true",te=a.attributes.opaque==="1"||a.attributes.opaque==="true",ce=di(ft(a,"KeywordList"),"Keyword").map(Zt).filter((ne,le,_e)=>_e.indexOf(ne)===le);let me,X;e==="1.3.0"?(me=L("MinScaleDenominator",l),X=L("MaxScaleDenominator",r)):[me,X]=E();const de=di(a,"MetadataURL").map(ne=>({type:Hi(ne,"type"),format:Zt(ft(ne,"Format")),url:Hi(ft(ne,"OnlineResource"),"xlink:href")})),N=di(a,"Layer").map(ne=>uO(ne,e,h,y,F,Y,X,me));return{name:Zt(ft(a,"Name")),title:Zt(ft(a,"Title")),abstract:Zt(ft(a,"Abstract")),availableCrs:h,styles:y,attribution:F,boundingBoxes:Y,keywords:ce,queryable:$,opaque:te,...me!==null?{minScaleDenominator:me}:{},...X!==null?{maxScaleDenominator:X}:{},...de.length&&{metadata:de},...N.length&&{children:N}}}function Bie(a){const e=Hi(ft(ft(a,"LegendURL"),"OnlineResource"),"xlink:href"),t=Zt(ft(a,"Abstract"));return{name:Zt(ft(a,"Name")),title:Zt(ft(a,"Title")),...t&&{abstract:t},...e&&{legendUrl:e}}}function Die(a){const e=Hi(ft(ft(a,"LogoURL"),"OnlineResource"),"xlink:href"),t=Hi(ft(a,"OnlineResource"),"xlink:href"),i=Zt(ft(a,"Title"));return{...i&&{title:i},...t&&{url:t},...e&&{logoUrl:e}}}function Vie(a){const e=ft(es(a),"Service"),t=ft(e,"ContactInformation"),i=ft(t,"ContactPersonPrimary"),n=ft(t,"ContactAddress");return{contact:{name:Zt(ft(i,"ContactPerson")),organization:Zt(ft(i,"ContactOrganization")),position:Zt(ft(t,"ContactPosition")),phone:Zt(ft(t,"ContactVoiceTelephone")),fax:Zt(ft(t,"ContactFacsimileTelephone")),address:{deliveryPoint:Zt(ft(n,"Address")),city:Zt(ft(n,"City")),administrativeArea:Zt(ft(n,"StateOrProvince")),postalCode:Zt(ft(n,"PostCode")),country:Zt(ft(n,"Country"))},email:Zt(ft(t,"ContactElectronicMailAddress"))}}}function cO(a){const e=ft(es(a),"ServiceProvider"),t=ft(e,"ServiceContact"),i=ft(t,"ContactInfo"),n=ft(i,"Phone"),s=ft(i,"Address");return{name:Zt(ft(e,"ProviderName")),site:Hi(ft(e,"ProviderSite"),"xlink:href"),contact:{name:Zt(ft(t,"IndividualName")),position:Zt(ft(t,"PositionName")),phone:Zt(ft(n,"Voice")),fax:Zt(ft(n,"Facsimile")),address:{deliveryPoint:Zt(ft(s,"DeliveryPoint")),city:Zt(ft(s,"City")),administrativeArea:Zt(ft(s,"AdministrativeArea")),postalCode:Zt(ft(s,"PostalCode")),country:Zt(ft(s,"Country"))},email:Zt(ft(s,"ElectronicMailAddress"))}}}function Zie(a){const e={},t=es(a),i=ft(t,"OperationsMetadata");if(i)di(i,"Operation").forEach(n=>{const s=Hi(n,"name");e[s]=Xie(n)});else{const n=ft(t,"Capability"),s=ft(n,"Request");xc(s).forEach(r=>{const l=Wc(Oc(r));e[l]=Hie(r)})}return e}function tI(a){return es(a).attributes.version}function dO(a){const e=tI(a);let t;if(e.startsWith("1.0")){const i=ft(ft(ft(es(a),"Capability"),"Request"),"GetFeature");t=xc(ft(i,"ResultFormat")).map(Oc)}else{const i=ft(es(a),"OperationsMetadata"),n=di(i,"Operation").find(r=>Hi(r,"name")==="GetFeature"),s=di(n,"Parameter").find(r=>Hi(r,"name")==="outputFormat");t=di(s,"Value",!0).map(Zt)}return t}function zie(a){const e=tI(a),t=e.startsWith("1.0")?"Service":"ServiceIdentification",i=e.startsWith("1.0")?"Name":"ServiceType",n=ft(es(a),t);let s;e.startsWith("1.0")?s=Zt(ft(n,"Keywords")).split(",").map(l=>l.trim()):s=di(ft(n,"Keywords"),"Keyword").map(Zt);let r;return e!=="1.0.0"&&(r=cO(a)),{title:Zt(ft(n,"Title")),name:Zt(ft(n,i)),abstract:Zt(ft(n,"Abstract")),fees:Zt(ft(n,"Fees")),constraints:Zt(ft(n,"AccessConstraints")),keywords:s,provider:r,outputFormats:dO(a)}}function Uie(a){const e=tI(a),t=dO(a),i=ft(es(a),"FeatureTypeList");return di(i,"FeatureType").map(n=>qie(n,e,t))}function Hie(a){const e={};return di(a,"DCPType").flatMap(s=>di(s,"HTTP")).flatMap(s=>xc(s)).forEach(s=>{const r=Wc(Oc(s));e[r]=Hi(s,"onlineResource")}),e}function Xie(a){const e={};return di(a,"DCP").flatMap(s=>ft(s,"HTTP")).flatMap(s=>xc(s)).forEach(s=>{const r=Wc(Oc(s));e[r]=Hi(s,"xlink:href")}),e}function qie(a,e,t){const i=e.startsWith("2.")?"CRS":"SRS",n=e.startsWith("1.0")?"SRS":`Default${i}`;function s(){const g=ft(a,"LatLongBoundingBox");return["minx","miny","maxx","maxy"].map(y=>Hi(g,y)).map(parseFloat)}function r(){const g=ft(a,"WGS84BoundingBox");return["LowerCorner","UpperCorner"].map(y=>ft(g,y)).map(y=>Zt(y).split(" ")).reduce((y,x)=>[...y,...x]).map(parseFloat)}const l=e.startsWith("1.0")?[]:di(a,`Other${i}`).map(Zt).map(f3),u=e.startsWith("1.0")?[]:di(ft(a,"OutputFormats"),"Format").map(Zt),d=e.startsWith("1.0")?Zt(ft(a,"Keywords")).split(",").map(g=>g.trim()):di(ft(a,"Keywords"),"Keyword").map(Zt).filter((g,y,x)=>x.indexOf(g)===y),h=e==="2.0.0"?di(a,"MetadataURL").map(g=>({url:Hi(g,"xlink:href")})):di(a,"MetadataURL").map(g=>({format:Hi(g,"format"),type:Hi(g,"type"),url:Zt(g).trim()}));return{name:Zt(ft(a,"Name")),title:Zt(ft(a,"Title")),abstract:Zt(ft(a,"Abstract")),defaultCrs:f3(Zt(ft(a,n))),otherCrs:l,outputFormats:u.length>0?u:t,latLonBoundingBox:e.startsWith("1.0")?s():r(),keywords:d,...h.length&&{metadata:h}}}function hO(a){const e=["LowerCorner","UpperCorner"].map(t=>ft(a,t)).map(t=>Zt(t).split(" ")).reduce((t,i)=>[...t,...i]).map(parseFloat);return e.some(Number.isNaN)?null:e}function Yie(a){const e=es(a),t=ft(e,"ServiceIdentification"),i=di(ft(t,"Keywords"),"Keyword").map(Zt),n=ft(e,"OperationsMetadata"),s=di(n,"Operation").find(l=>Hi(l,"name")=="GetTile"),r=di(s,"Get",!0).reduce((l,u)=>{const d=Zt(ft(u,"Value",!0)),h=Hi(u,"xlink:href");return d.toLowerCase()==="restful"?{...l,rest:h}:{...l,kvp:h}},{});return{title:Zt(ft(t,"Title")),name:Zt(ft(t,"ServiceType")),abstract:Zt(ft(t,"Abstract")),fees:Zt(ft(t,"Fees")),constraints:Zt(ft(t,"AccessConstraints")),keywords:i,provider:cO(a),getTileUrls:r}}function Kie(a){function e(n){const s=Zt(ft(n,"TopLeftCorner")).split(" ").map(parseFloat);return{identifier:Zt(ft(n,"Identifier")),tileWidth:parseInt(Zt(ft(n,"TileWidth"))),tileHeight:parseInt(Zt(ft(n,"TileHeight"))),matrixWidth:parseInt(Zt(ft(n,"MatrixWidth"))),matrixHeight:parseInt(Zt(ft(n,"MatrixHeight"))),scaleDenominator:parseFloat(Zt(ft(n,"ScaleDenominator"))),topLeft:s}}const t=ft(es(a),"Contents");return di(t,"TileMatrixSet").map(n=>{const s=Zt(ft(n,"WellKnownScaleSet")),r=hO(ft(n,"BoundingBox"));return{identifier:Zt(ft(n,"Identifier")),crs:Zt(ft(n,"SupportedCRS")),tileMatrices:di(n,"TileMatrix").map(e),...r&&{boundingBox:r},...s&&{wellKnownScaleSet:s}}})}function jie(a){const e=es(a),t=ft(e,"Contents");function i(h,g){const y=di(h,"TileMatrixSet").find(x=>{const C=ft(x,"Identifier");return Zt(C)===g});return Zt(ft(y,"SupportedCRS"))}function n(h){const g=Zt(ft(h,"TileMatrixSet")),y=i(t,g);return{identifier:g,crs:y,limits:di(h,"TileMatrixLimits",!0).map(x=>({tileMatrix:Zt(ft(x,"TileMatrix")),minTileRow:parseInt(Zt(ft(x,"MinTileRow"))),minTileCol:parseInt(Zt(ft(x,"MinTileCol"))),maxTileRow:parseInt(Zt(ft(x,"MaxTileRow"))),maxTileCol:parseInt(Zt(ft(x,"MaxTileCol")))}))}}const s=di(ft(e,"OperationsMetadata"),"Operation").find(h=>Hi(h,"name")=="GetTile"),r=di(s,"Get",!0).filter(h=>Zt(ft(h,"Value",!0)).toLowerCase()==="kvp")[0],l=r?Hi(r,"xlink:href"):"",u=ft(e,"Contents");return di(u,"Layer").map(h=>{const g=hO(ft(h,"WGS84BoundingBox"));let y="";const x=di(h,"Style").map(L=>{const G=Hi(ft(L,"LegendURL"),"xlink:href"),F=Zt(ft(L,"Abstract")),B={title:Zt(ft(L,"Title")),name:Zt(ft(L,"Identifier")),...F&&{abstract:F},...G&&{legendUrl:G}};return Hi(L,"isDefault")==="true"&&(y=B.name),B}),C=di(h,"Format").map(Zt),I=di(h,"ResourceURL").filter(L=>Hi(L,"resourceType")==="tile").map(L=>{const G=Hi(L,"format"),F=Hi(L,"template");return{format:G,url:F,encoding:"REST"}});l&&I.push(...C.map(L=>({encoding:"KVP",url:l,format:L})));const A=di(h,"TileMatrixSetLink").map(n),E=di(h,"Dimension").map(L=>{const G=Zt(ft(L,"Identifier")),F=Zt(ft(L,"Default")),B=di(L,"Values").map(Zt);return{identifier:G,defaultValue:F,values:B}});return{name:Zt(ft(h,"Identifier")),title:Zt(ft(h,"Title")),abstract:Zt(ft(h,"Abstract")),styles:x,resourceLinks:I,matrixSets:A,defaultStyle:y,...g&&{latLonBoundingBox:g},...E&&{dimensions:E}}})}function $ie(a,e,t){const i=es(a);let n;if(t.startsWith("2.0"))n=di(i,"member").map(d=>xc(d)[0]);else{const d=ft(i,"featureMembers");n=d?xc(d):di(i,"featureMember").map(h=>xc(h)[0])}const s=t==="1.0.0"?"fid":"gml:id";function r(d){return d in e.properties}function l(d,h){switch(e.properties[d]){case"integer":return parseInt(h);case"float":return parseFloat(h);case"boolean":return h==="true";default:return h}}function u(d){return xc(d).filter(h=>r(Wc(Oc(h)))).reduce((h,g)=>{const y=Wc(Oc(g));return{...h,[y]:l(y,Zt(g))}},{})}return n.map(d=>({id:Hi(d,s),properties:u(d)}))}function Jie(a){return a.reduce((e,t)=>{for(const i in t.properties){const n=t.properties[i];i in e||(e[i]={uniqueValues:[]});const s=e[i].uniqueValues.find(r=>r.value===n);s?s.count++:e[i].uniqueValues.push({value:n,count:1})}return e},{})}Tb("parseWmsCapabilities",globalThis,({url:a})=>QC(a).then(e=>VT(e,a)).then(e=>({info:Fie(e),layers:Pie(e),url:kie(e),version:lO(e)})));Tb("parseWfsCapabilities",globalThis,({url:a})=>QC(a).then(e=>VT(e,a)).then(e=>({info:zie(e),featureTypes:Uie(e),url:Zie(e),version:tI(e)})));Tb("queryWfsFeatureTypeDetails",globalThis,({url:a,serviceVersion:e,featureTypeFull:t})=>{const i=Tie(a,e,t.name,void 0,void 0,Object.keys(t.properties));return QC(i).then(n=>({props:Jie($ie(n,t,e))}))});Tb("updateFetchOptions",globalThis,({options:a})=>(yie(a),Promise.resolve({})));Tb("parseWmtsCapabilities",globalThis,({url:a})=>QC(a).then(e=>VT(e,a)).then(e=>({info:Yie(e),layers:jie(e),matrixSets:Kie(e)})));const Qie=()=>[{url:"http://wmts1.geoportail.lu/opendata/service",label:"Open Data Webservices WMS"},{url:"http://ows.terrestris.de/osm-gray/service",label:"OpenStreetMap by Terrestris (Grey)"},{url:"http://ows.terrestris.de/osm/service",label:"OpenStreetMap by Terrestris (Color)"}],Sw="http://www.w3.org/2001/XMLSchema-instance";function jd(a,e){return Hp().createElementNS(a,e)}function Bu(a,e){return _O(a,e,[]).join("")}function _O(a,e,t){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)t.push(a.nodeValue);else{let i;for(i=a.firstChild;i;i=i.nextSibling)_O(i,e,t)}return t}function wc(a){return"documentElement"in a}function Cc(a){return new DOMParser().parseFromString(a,"application/xml")}function _R(a,e){return(function(t,i){const n=a.call(e??this,t,i);if(n!==void 0){const s=i[i.length-1];hn(s,n)}})}function qo(a,e){return(function(t,i){const n=a.call(e??this,t,i);n!==void 0&&i[i.length-1].push(n)})}function ZT(a,e){return(function(t,i){const n=a.call(this,t,i);n!==void 0&&(i[i.length-1]=n)})}function Uo(a,e,t){return(function(i,n){const s=a.call(this,i,n);if(s!==void 0){const r=n[n.length-1],l=i.localName;let u;l in r?u=r[l]:(u=[],r[l]=u),u.push(s)}})}function ot(a,e,t){return(function(i,n){const s=a.call(this,i,n);if(s!==void 0){const r=n[n.length-1],l=e!==void 0?e:i.localName;r[l]=s}})}function Kt(a,e){return(function(t,i,n){a.call(this,t,i,n),n[n.length-1].node.appendChild(t)})}function mO(a,e){let t,i;return function(n,s,r){if(t===void 0){t={};const l={};l[n.localName]=a,t[n.namespaceURI]=l,i=Du(n.localName)}fO(t,i,s,r)}}function Du(a,e){return(function(t,i,n){const r=i[i.length-1].node;let l=a;l===void 0&&(l=n);const u=r.namespaceURI;return jd(u,l)})}const ro=Du();function el(a,e){const t=e.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=a[e[n]];return i}function Wt(a,e,t){t=t!==void 0?t:{};let i,n;for(i=0,n=a.length;i<n;++i)t[a[i]]=e;return t}function S_(a,e,t,i){let n;for(n=e.firstElementChild;n;n=n.nextElementSibling){const s=a[n.namespaceURI];if(s!==void 0){const r=s[n.localName];r!==void 0&&r.call(i,n,t)}}}function La(a,e,t,i,n){return i.push(a),S_(e,t,i,n),i.pop()}function fO(a,e,t,i,n,s){const r=(n!==void 0?n:t).length;let l,u;for(let d=0;d<r;++d)l=t[d],l!==void 0&&(u=e.call(s,l,i,n!==void 0?n[d]:void 0),u!==void 0&&a[u.namespaceURI][u.localName].call(s,u,l,i))}function Gn(a,e,t,i,n,s,r){return n.push(a),fO(e,t,i,n,s,r),n.pop()}let g4;function ene(){return g4===void 0&&typeof XMLSerializer<"u"&&(g4=new XMLSerializer),g4}let p4;function Hp(){return p4===void 0&&typeof document<"u"&&(p4=document.implementation.createDocument("","",null)),p4}class gO{read(e){if(!e)return null;if(typeof e=="string"){const t=Cc(e);return this.readFromDocument(t)}return wc(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){Da()}}const tne="http://www.w3.org/1999/xlink";function zT(a){return a.getAttributeNS(tne,"href")}function f_(a){const e=Bu(a,!1);return ane(e)}function ane(a){const e=/^\s*(true|1)|(false|0)\s*$/.exec(a);if(e)return e[1]!==void 0||!1}function aI(a){const e=Bu(a,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function tn(a){const e=Bu(a,!1);return ine(e)}function ine(a){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a);if(e)return parseFloat(e[1])}function Cl(a){const e=Bu(a,!1);return nne(e)}function nne(a){const e=/^\s*(\d+)\s*$/.exec(a);if(e)return parseInt(e[1],10)}function _a(a){return Bu(a,!1).trim()}function Tp(a,e){nn(a,e?"1":"0")}function rne(a,e){a.appendChild(Hp().createCDATASection(e))}function sne(a,e){const t=new Date(e*1e3),i=t.getUTCFullYear()+"-"+Hh(t.getUTCMonth()+1,2)+"-"+Hh(t.getUTCDate(),2)+"T"+Hh(t.getUTCHours(),2)+":"+Hh(t.getUTCMinutes(),2)+":"+Hh(t.getUTCSeconds(),2)+"Z";a.appendChild(Hp().createTextNode(i))}function Vo(a,e){const t=e.toPrecision();a.appendChild(Hp().createTextNode(t))}function Aw(a,e){const t=e.toString();a.appendChild(Hp().createTextNode(t))}const one=/^\s/,lne=/\s$/,une=/(\n|\t|\r|<|&| {2})/;function nn(a,e){typeof e=="string"&&(one.test(e)||lne.test(e)||une.test(e))?e.split("]]>").forEach((t,i,n)=>{i<n.length-1&&(t+="]]"),i>0&&(t=">"+t),rne(a,t)}):a.appendChild(Hp().createTextNode(e))}const al=[null,"http://www.opengis.net/ows/1.1"],cne=Wt(al,{ServiceIdentification:ot(Wne),ServiceProvider:ot(Fne),OperationsMetadata:ot(Pne)});class dne extends gO{constructor(){super()}readFromNode(e){const t=La({},cne,e,[]);return t||null}}const hne=Wt(al,{DeliveryPoint:ot(_a),City:ot(_a),AdministrativeArea:ot(_a),PostalCode:ot(_a),Country:ot(_a),ElectronicMailAddress:ot(_a)}),_ne=Wt(al,{Value:Uo(Nne)}),mne=Wt(al,{AllowedValues:ot(Ane)}),fne=Wt(al,{Phone:ot(Gne),Address:ot(Sne)}),gne=Wt(al,{HTTP:ot(Rne)}),pne=Wt(al,{Get:Uo(Lne),Post:void 0}),yne=Wt(al,{DCP:ot(Mne)}),bne=Wt(al,{Operation:kne}),vne=Wt(al,{Voice:ot(_a),Facsimile:ot(_a)}),xne=Wt(al,{Constraint:Uo(Tne)}),wne=Wt(al,{IndividualName:ot(_a),PositionName:ot(_a),ContactInfo:ot(Ene)}),Cne=Wt(al,{Abstract:ot(_a),AccessConstraints:ot(_a),Fees:ot(_a),Title:ot(_a),ServiceTypeVersion:ot(_a),ServiceType:ot(_a)}),Ine=Wt(al,{ProviderName:ot(_a),ProviderSite:ot(zT),ServiceContact:ot(One)});function Sne(a,e){return La({},hne,a,e)}function Ane(a,e){return La({},_ne,a,e)}function Tne(a,e){const t=a.getAttribute("name");if(t)return La({name:t},mne,a,e)}function Ene(a,e){return La({},fne,a,e)}function Mne(a,e){return La({},gne,a,e)}function Lne(a,e){const t=zT(a);if(t)return La({href:t},xne,a,e)}function Rne(a,e){return La({},pne,a,e)}function kne(a,e){const t=a.getAttribute("name"),i=La({},yne,a,e);if(!i)return;const n=e[e.length-1];n[t]=i}function Pne(a,e){return La({},bne,a,e)}function Gne(a,e){return La({},vne,a,e)}function Wne(a,e){return La({},Cne,a,e)}function One(a,e){return La({},wne,a,e)}function Fne(a,e){return La({},Ine,a,e)}function Nne(a,e){return _a(a)}const Vc=[null,"http://www.opengis.net/wmts/1.0"],Xp=[null,"http://www.opengis.net/ows/1.1"],Bne=Wt(Vc,{Contents:ot(jne)});class Dne extends gO{constructor(){super(),this.owsParser_=new dne}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let i=this.owsParser_.readFromNode(e);return i?(i.version=t,i=La(i,Bne,e,[]),i||null):null}}const Vne=Wt(Vc,{Layer:Uo($ne),TileMatrixSet:Uo(Jne)}),Zne=Wt(Vc,{Style:Uo(Qne),Format:Uo(_a),TileMatrixSetLink:Uo(ere),Dimension:Uo(tre),ResourceURL:Uo(are)},Wt(Xp,{Title:ot(_a),Abstract:ot(_a),WGS84BoundingBox:ot(yO),BoundingBox:Uo(ire),Identifier:ot(_a)})),zne=Wt(Vc,{LegendURL:Uo(nre)},Wt(Xp,{Title:ot(_a),Identifier:ot(_a)})),Une=Wt(Vc,{TileMatrixSet:ot(_a),TileMatrixSetLimits:ot(sre)}),Hne=Wt(Vc,{TileMatrixLimits:qo(ore)}),Xne=Wt(Vc,{TileMatrix:ot(_a),MinTileRow:ot(Cl),MaxTileRow:ot(Cl),MinTileCol:ot(Cl),MaxTileCol:ot(Cl)}),qne=Wt(Vc,{Default:ot(_a),Value:Uo(_a)},Wt(Xp,{Identifier:ot(_a)})),pO=Wt(Xp,{LowerCorner:qo(g3),UpperCorner:qo(g3)}),Yne=Wt(Vc,{WellKnownScaleSet:ot(_a),TileMatrix:Uo(rre)},Wt(Xp,{SupportedCRS:ot(_a),Identifier:ot(_a),BoundingBox:ot(yO)})),Kne=Wt(Vc,{TopLeftCorner:ot(g3),ScaleDenominator:ot(tn),TileWidth:ot(Cl),TileHeight:ot(Cl),MatrixWidth:ot(Cl),MatrixHeight:ot(Cl)},Wt(Xp,{Identifier:ot(_a)}));function jne(a,e){return La({},Vne,a,e)}function $ne(a,e){return La({},Zne,a,e)}function Jne(a,e){return La({},Yne,a,e)}function Qne(a,e){const t=La({},zne,a,e);if(!t)return;const i=a.getAttribute("isDefault")==="true";return t.isDefault=i,t}function ere(a,e){return La({},Une,a,e)}function tre(a,e){return La({},qne,a,e)}function are(a,e){const t=a.getAttribute("format"),i=a.getAttribute("template"),n=a.getAttribute("resourceType"),s={};return t&&(s.format=t),i&&(s.template=i),n&&(s.resourceType=n),s}function yO(a,e){const t=La([],pO,a,e);if(t.length==2)return Yr(t)}function ire(a,e){const t=a.getAttribute("crs"),i=La([],pO,a,e);if(i.length==2)return{extent:Yr(i),crs:t}}function nre(a,e){const t={};return t.format=a.getAttribute("format"),t.href=zT(a),t}function g3(a,e){const t=_a(a).split(/\s+/);if(!t||t.length!=2)return;const i=+t[0],n=+t[1];if(!(isNaN(i)||isNaN(n)))return[i,n]}function rre(a,e){return La({},Kne,a,e)}function sre(a,e){return La([],Hne,a,e)}function ore(a,e){return La({},Xne,a,e)}class lre{capabilitiesPromise;serviceInfo;layers;constructor(e){const t=new Dne;let i="&";e.indexOf("?")===-1&&(i="?"),e.indexOf("Capabilities")===-1&&(e=e+i+"SERVICE=WMTS&REQUEST=GetCapabilities"),this.capabilitiesPromise=fetch(e).then(n=>n.text()).then(n=>{const s=t.read(n);this.serviceInfo=this.mapServiceInfo(s.ServiceIdentification),this.layers=this.mapToRemoteLayers(s.Contents?.Layer)})}mapToRemoteLayers(e){return[{type:Ec.WMTS,children:e.map(t=>({type:Ec.WMTS,abstract:t.Abstract,format:t.Format,name:t.Identifier,title:t.Title,tileMatrixSetLink:t.TileMatrixSetLink,wgs84BoundingBox:t.WGS84BoundingBox}))}]}mapServiceInfo(e){return{type:Ec.WMTS,title:e.Title,abstract:e.Abstract,fees:e.Fees,constraints:e.AccessConstraints,serviceTypeVersion:e.ServiceTypeVersion}}isReady(){return this.capabilitiesPromise.then(()=>this)}getLayerByName(e){return this.layers[0].children.filter(t=>t.name===e)[0]}getLayers(){return this.layers}getServiceInfo(){return this.serviceInfo}}const ure="https://migration.geoportail.lu/ogcproxywms",cre="https://migration.geoportail.lu/httpsproxy";class dre{_wmsProxyUrl=ure;_remoteProxyUrl=cre;get wmsProxyUrl(){return this._wmsProxyUrl===void 0&&console.warn("Warning: proxyWmsUrl is not set."),this._wmsProxyUrl}get remoteProxyUrl(){return this._remoteProxyUrl===void 0&&console.warn("Warning: remoteProxy is not set."),this._remoteProxyUrl}getProxyfiedUrl(e){return e.indexOf("httpsproxy")>0?e:this.remoteProxyUrl+"?url="+encodeURIComponent(e)}init_v3(e,t){e&&(this._wmsProxyUrl=e),t&&(this._remoteProxyUrl=t),console.warn("Deprecated: ProxyUrlHelper.init_v3() is meant to be removed when v4 is fully operational")}}const U1=new dre;class hre{async getRemoteEndpoint(e){let t;return await this.getWmsEndpoint(e).isReady().catch(async()=>{t=await this.getWmtsEndpoint(e).isReady()})||t}getWmsEndpoint(e){return new Mie(U1.getProxyfiedUrl(e))}getWmtsEndpoint(e){return new lre(U1.getProxyfiedUrl(e))}async fetchRemoteWmsEndpoint(){return new Promise(e=>e(Qie()))}isRemoteLayer(e){return typeof e=="string"&&(e.indexOf(Ec.WMS)===0||e.indexOf(Ec.WMTS)===0)}}const H1=new hre;class bO{}class _re extends bO{async getMetadata(e,t,i){const n=H1.getWmsEndpoint(t);await n.isReady();const s=n?.getServiceInfo(),r=n?.getLayerByName(i);return{title:r.title,description:r.abstract,keywords:s.keywords,accessConstraints:s.constraints,serviceDescription:s.abstract}}}const mre=new _re;class fre extends bO{async getMetadata(e,t,i){const n=H1.getWmtsEndpoint(t);await n.isReady();const s=n?.getServiceInfo(),r=n?.getLayerByName(i);return{title:r.title,description:r.abstract,accessConstraints:s.constraints,serviceDescription:s.abstract}}}const gre=new fre;class pre{async getMetadata(e,t,i){if(e===Ec.WMS)return mre.getMetadata(e,t,i);if(e===Ec.WMTS)return gre.getMetadata(e,t,i);throw new Error(`Unsupported service type: ${e}`)}}const yre=new pre,x2=new Map,bre="https://geocatalogue.geoportail.lu/geonetwork/srv",vre="https://migration.geoportail.lu/legends/get_html",xre="https://migration.geoportail.lu/getMetadata";class wre{async getLayerMetadata(e,t){let i;const s=Al().findAnyLayerById(e);return x2.has(e)?x2.get(e):(s?i=this.getLayerMetadataLocal(s,t):i=this.getLayerMetadataRemote(e),x2.set(e,i),i)}async getLayerMetadataRemote(e){const[t,i,n]=String(e).split("%2D").join("-").split("||");return yre.getMetadata(t,i,n)}async getLayerMetadataLocal(e,t){const i=e.metadata,n=i?.metadata_id,s=n?await this.getLocalMetadata(xre,n,t):{isError:!0},r=e.name,l=i?.legend_name||"",u=e?.id,d=await this.getLegendHtml(vre,l,u,t),h=!!d&&d.hasChildNodes();return{...s,title:r,hasLegend:h,...h&&{legendHtml:d}}}getLocalMetadata(e,t,i){return fetch(`${e}?lang=${i}&uid=${t}`).then(async n=>{const s=(await n.json()).metadata;return{name:s.title,serviceDescription:s.serviceDescription,description:s.abstract,legalConstraints:s.legalConstraints,link:Oee(s.link),revisionDate:s.revisionDate,keyword:s.keyword,responsibleParty:s.responsibleParty?Fee(s.responsibleParty):void 0,metadataLink:`${bre}/${Gee(i)}/catalog.search#/metadata/${t}`,isError:!1}}).catch(()=>({isError:!0}))}getLegendHtml(e,t,i,n){const s={lang:n,...t&&{name:t},...i&&{id:i.toString()}};if(s.lang){window.devicePixelRatio>1&&(s.dpi=(window.devicePixelRatio*96).toString());const r=`${e}?${new URLSearchParams(s).toString()}`;return fetch(r).then(async l=>{if(l.status>=400&&l.status<600)throw new Error("Server responded with error code");const u=await l.text();return u?Wee(u):void 0}).catch(()=>{})}}clearCache(){x2.clear()}}const Tw=new wre,qp="ipv6",Ew="address",_f="applogin",g_="localforage",lp="debug",Cre="embedded",vO="embeddedserver",xO="embeddedserverprotocol",p3="features",Ep="fid",u_="lang",Mw="layersOpen",y3="version",y4="map_id",mR="layers",fR="bgLayer",gR="opacities",Lw="theme",pR="time",yR="zoom",bR="rotation",Ire="SRS",b3="X",v3="Y",b4="crosshair",X1="serial",wO=["basemap_2015_global","topogr_global","topo_bw_jpeg"],x3="lc",w3="sliderRatio",CO="bgOpacity",Sre="layers_indices",vR="layers_opacity",xR="layers_visibility";var Ms=(a=>(a[a.localStorage=0]="localStorage",a[a.permalink=1]="permalink",a[a.permalinkAsPath=2]="permalinkAsPath",a[a.permalinkAndLocalStorage=3]="permalinkAndLocalStorage",a))(Ms||{});class IO{}function up(a,e){let t;return(...i)=>{clearTimeout(t),t=setTimeout(()=>{a.apply(i)},e)}}const Are=(a,e)=>{let t=null;return(...i)=>new Promise((n,s)=>{t&&clearTimeout(t),t=setTimeout(async()=>{try{const r=await a(...i);n(r)}catch(r){s(r)}},e)})};function SO(a,e){let t,i;return function(...n){const s=this;i?(clearTimeout(t),t=setTimeout(function(){Date.now()-i>=e&&(a.apply(s,n),i=Date.now())},e-(Date.now()-i))):(a.apply(s,n),i=Date.now())}}function Lm(a){return a?.trim()&&!isNaN(Number(a))?Number(a):void 0}function Tre(a,e){return a?.split(e).map(t=>t!==null&&!isNaN(Number(t))?parseFloat(t):void 0)||[]}function Ere(a,e){return a?.split(e).map(UT)||[]}function UT(a){return a?.trim()==="true"?!0:a?.trim()==="false"?!1:void 0}function AO(){return window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches}function Mc(a){return typeof window<"u"&&window.navigator&&a.test(navigator.userAgent)}function Mre(a){const e=new RegExp("[^/]*//[^/]+/(.*)"),t=a.match(e);return t?t[1]:null}const Lre=Mc(/firefox/i);Mc(/safari/i)&&!Mc(/chrome/i)&&Mc(/android/i);Mc(/iP(ad|od|hone)/i);Mc(/chrome/i)&&Mc(/android/i);Mc(/chrome/i);Mc(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i);Mc(/Edge/i);function wR(a){return a.replace(/\s+/g,"_").replace(/[^a-z0-9\-_]/gi,"")||"_"}async function Rre(a,e){const t=await fetch(a);if(!t.ok)throw new Error;const i=await t.blob();EO(e,i)}function TO(a,e,t="text/plain"){const i=new Blob([e],{type:t});EO(a,i)}function EO(a,e){const t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)}function kre(a){return a.charAt(0).toUpperCase()+a.slice(1)}class Rw extends IO{static processRules(e){return Rw.ruleUseLocalStorage(e)?Ms.localStorage:Ms.permalink}static processRulesForKey(e,t){if(wO.includes(e))return Ms.localStorage;if(e===X1)return Ms.permalink;if(e===Mw)return Ms.localStorage}static ruleUseLocalStorage(e){return[Pre,Gre,Wre].reduce((t,i)=>t||i(e),!1)}}const Pre=a=>Object.keys(a).length===0,Gre=a=>Object.keys(a).length===1&&(a.hasOwnProperty(qp)||a.hasOwnProperty(_f)||a.hasOwnProperty(g_)),Wre=a=>Object.keys(a).length===3&&a.hasOwnProperty(qp)&&a.hasOwnProperty(_f)&&a.hasOwnProperty(g_);class kw extends IO{static processRules(){return Ms.permalinkAndLocalStorage}static processRulesForKey(e,t){if(kw.ruleUsePermalink(e))return Ms.permalink;if(e===Mw||wO.includes(e))return Ms.localStorage;if(e===X1||e===p3)return Ms.permalink;if(e===Lw)return Ms.permalinkAsPath}static ruleUsePermalink(e){return[Ore,Fre,Nre].reduce((t,i)=>t||i(e),!1)}}const Ore=a=>a===x3||a===w3,Fre=a=>a===y3,Nre=a=>a===Lw&&!0;class MO{snappedUrl;constructor(){this.snappedUrl=new URL(window.location.toString())}get length(){throw new Error("Method not implemented.")}clear(){throw new Error("Method not implemented.")}key(e){throw new Error("Method key() not implemented. "+e)}getStrippedUrl(e){const t=new URL(window.location.toString()),i=new URLSearchParams(t.search);return e!==void 0&&(i.set("X",Math.round(e[0]).toString()),i.set("Y",Math.round(e[1]).toString())),i.delete(g_),i.delete(_f),i.delete(qp),i.delete(vO),i.delete(xO),t.search=i.toString(),t}getRelativeUrl(){const e=this.getStrippedUrl(void 0);return e.pathname+e.search}async getShortUrl(e){const t=this.getStrippedUrl(e).toString().replace(/https:\/\/geoportail-luxembourg.github.io\/luxembourg-geoportail\/.+\//,"https://migration.geoportail.lu/").replace(/http:\/\/localhost:[45]173\//,"https://migration.geoportail.lu/"),i=new URLSearchParams;return i.set("url",t),await(await fetch("https://migration.geoportail.lu/short/create",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i.toString()})).json()}getSnappedUrl(){return this.snappedUrl}getSnappedParamsAsObj(){return this.getSnappedParams().reduce((e,t)=>{const[i,n]=t.split("=");return{...e,[i]:n}},{})}getSnappedParams(){return this.getSnappedUrl().search.replace("?","").split("&").filter(e=>e.split("=")[1])}setItem(e,t){const i=new URLSearchParams(new URL(window.location.toString()).search);i.set(encodeURIComponent(e),encodeURIComponent(t));try{window.history.replaceState(null,"","?"+i.toString())}catch{}}getItem(e){const t=this.getSnappedUrl().searchParams.get(e);return t!==null?decodeURIComponent(t):t}removeItem(e){const t=new URLSearchParams(new URL(window.location.toString()).search);t.delete(e);try{window.history.replaceState(null,"","?"+t.toString())}catch{}}encodeQueryParam(e,t){return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`}removeQueryParam(e){const t=new URL(window.location.href);t.searchParams.delete(e),window.history.replaceState({},document.title,t.toString())}}const Kl=new MO;class Bre extends MO{getItem(e){const t=this.getSnappedUrl().pathname.split("/"),i=t.findIndex(n=>n===e);return t[i+1]}setItem(e,t){const i=new URL(window.location.toString()).search,n=`/luxembourg-geoportail/main/${e}/${t}${i}`;try{window.history.replaceState(null,"",n)}catch{}}}const LO=new Bre;class Dre{get length(){throw new Error("Method not implemented.")}clear(){throw new Error("Method not implemented.")}key(e){throw new Error("Method key() not implemented. "+e)}removeItem(e){this.getWriteStorages(e)?.map(i=>i.removeItem(e))}setItem(e,t){this.setValue(e,t)}getItem(e){return this.getValue(e)}get paramKeys(){return Kl.getSnappedParamsAsObj()}getValue(e){const t=this.correspondingStorages(Rw.processRules(this.paramKeys))?.pop(),i=this.storageForKey(e,Rw,t);return i?i.getItem(e):null}setValue(e,t){this.getWriteStorages(e)?.map(n=>n.setItem(e,t))}getWriteStorages(e){const t=this.correspondingStorages(kw.processRules()),i=this.storageForKey(e,kw);return i?[i]:t}storageForKey(e,t,i){return this.correspondingStorages(t.processRulesForKey(e,this.paramKeys))?.pop()??i}correspondingStorages(e){if(e===Ms.permalinkAndLocalStorage)return[Kl,localStorage];if(e===Ms.localStorage)return[localStorage];if(e===Ms.permalink)return[Kl];if(e===Ms.permalinkAsPath)return[LO]}}const w2=new Dre;function Vre(a){return Zre(a)||zre(a)||Ure(a)||Hre(a)}const Zre=a=>Object.keys(a).length===0,zre=a=>{const e=Object.keys(a);return Object.keys(a).length===1&&[qp,_f,g_,Ep,u_,Ew,lp].some(t=>e.indexOf(t)!==-1)},Ure=a=>{const e=Object.keys(a),t=n=>e.indexOf(n)!==-1,i=[[_f,g_],[lp,Ep],[u_,Ep],[lp,u_],[lp,Ew],[u_,Ew]];return Object.keys(a).length===2&&i.reduce((n,s)=>n||s.every(t),!1)},Hre=a=>{const e=Object.keys(a),t=r=>e.indexOf(r)!==-1,i=[qp,_f,g_].every(t),n=[lp,Ep,u_].every(t),s=[lp,Ew,u_].every(t);return Object.keys(a).length===3&&(i||n||s)};class Xre{intialVersion;constructor(){const e=w2.paramKeys,t=this.getValue(y3,Lm);this.intialVersion=t?Math.max(2,Math.min(t,3)):Vre(e)?3:2,this.setValue(y3,3)}getInitialVersion(){return this.intialVersion}mapToEntity(e,t){return t?t(e):e}mapToStorage(e,t){return t?t(e):String(e)}getValue(e,t){return this.mapToEntity(w2.getValue(e),t)}setValue(e,t,i){w2.setValue(e,this.mapToStorage(t,i))}removeItem(e){w2.removeItem(e)}}const Oa=new Xre;class qre{bootstrap(){this.restore();let e;e=Ar(()=>{this.persist(),e&&e()})}persist(){const e=ri(),{lang:t}=xt(e);Rt(t,(i,n)=>{n!==i&&(Oa.setValue(u_,i),document.documentElement.setAttribute("lang",i))},{immediate:!0})}restore(){const e=Oa.getValue(u_);if(e){const{setLang:t}=ri(),{i18next:i}=Ct();i.changeLanguage(e),t(e)}}}const Yre=new qre,Kre=rt({__name:"language-selector",setup(a){const{i18next:e,t}=Ct(),{setLang:i}=ri(),{lang:n}=xt(ri()),s=St(()=>["en","de","fr","lb"].map(u=>({label:t(u),value:u,ariaLabel:t("Change language: {{lang}}",{ns:"app",lang:u})}))),r=t("Change language",{ns:"app"});Yre.bootstrap(),Rt(()=>e.language,()=>{Tw.clearCache()});function l(u){e.changeLanguage(u),i(u)}return(u,d)=>(U(),Lt(Qm,{class:"lux-navbar-dropdown lux-dropdown-inline text-white h-full",options:s.value,placeholder:R(r),modelValue:R(n),"onUpdate:modelValue":d[0]||(d[0]=h=>Pn(n)?n.value=h:null),onChange:l},null,8,["options","placeholder","modelValue"]))}}),jre="include";async function Br(a,e,t="GET",i){const n={},s={method:t,credentials:jre,headers:n};let r=a;if(t==="GET"){const u=new URLSearchParams(e);r=`${a}?${u.toString()}`}else e instanceof FormData?s.body=e:i==="application/json"?(n["Content-Type"]="application/json",s.body=JSON.stringify(e)):(n["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",s.body=new URLSearchParams(e));const l=await fetch(r,s);if(!l.ok)throw new Error("Error while trying to call api");return l}class RO{drawCustom(e,t,i,n,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const Ua={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},C2=[Ua.FILL],Qh=[Ua.STROKE],Rm=[Ua.BEGIN_PATH],CR=[Ua.CLOSE_PATH];class Eb extends RO{constructor(e,t,i,n){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates;let r=s.length;for(let l=0,u=e.length;l<u;l+=t)n[0]=e[l],n[1]=e[l+1],kc(i,n)&&(s[r++]=n[0],s[r++]=n[1]);return r}appendFlatLineCoordinates(e,t,i,n,s,r){const l=this.coordinates;let u=l.length;const d=this.getBufferedMaxExtent();r&&(t+=n);let h=e[t],g=e[t+1];const y=this.tmpCoordinate_;let x=!0,C,I,A;for(C=t+n;C<i;C+=n)y[0]=e[C],y[1]=e[C+1],A=EA(d,y),A!==I?(x&&(l[u++]=h,l[u++]=g,x=!1),l[u++]=y[0],l[u++]=y[1]):A===ps.INTERSECTING?(l[u++]=y[0],l[u++]=y[1],x=!1):x=!0,h=y[0],g=y[1],I=A;return(s&&x||C===t+n)&&(l[u++]=h,l[u++]=g),u}drawCustomCoordinates_(e,t,i,n,s){for(let r=0,l=i.length;r<l;++r){const u=i[r],d=this.appendFlatLineCoordinates(e,t,u,n,!1,!1);s.push(d),t=u}return t}drawCustom(e,t,i,n,s){this.beginGeometry(e,t,s);const r=e.getType(),l=e.getStride(),u=this.coordinates.length;let d,h,g,y,x;switch(r){case"MultiPolygon":d=e.getOrientedFlatCoordinates(),y=[];const C=e.getEndss();x=0;for(let I=0,A=C.length;I<A;++I){const E=[];x=this.drawCustomCoordinates_(d,x,C[I],l,E),y.push(E)}this.instructions.push([Ua.CUSTOM,u,y,e,i,FA,s]),this.hitDetectionInstructions.push([Ua.CUSTOM,u,y,e,n||i,FA,s]);break;case"Polygon":case"MultiLineString":g=[],d=r=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),x=this.drawCustomCoordinates_(d,0,e.getEnds(),l,g),this.instructions.push([Ua.CUSTOM,u,g,e,i,M1,s]),this.hitDetectionInstructions.push([Ua.CUSTOM,u,g,e,n||i,M1,s]);break;case"LineString":case"Circle":d=e.getFlatCoordinates(),h=this.appendFlatLineCoordinates(d,0,d.length,l,!1,!1),this.instructions.push([Ua.CUSTOM,u,h,e,i,Kh,s]),this.hitDetectionInstructions.push([Ua.CUSTOM,u,h,e,n||i,Kh,s]);break;case"MultiPoint":d=e.getFlatCoordinates(),h=this.appendFlatPointCoordinates(d,l),h>u&&(this.instructions.push([Ua.CUSTOM,u,h,e,i,Kh,s]),this.hitDetectionInstructions.push([Ua.CUSTOM,u,h,e,n||i,Kh,s]));break;case"Point":d=e.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),h=this.coordinates.length,this.instructions.push([Ua.CUSTOM,u,h,e,i,void 0,s]),this.hitDetectionInstructions.push([Ua.CUSTOM,u,h,e,n||i,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[Ua.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Ua.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let n,s,r=-1;for(t=0;t<i;++t)n=e[t],s=n[0],s==Ua.END_GEOMETRY?r=t:s==Ua.BEGIN_GEOMETRY&&(n[2]=t,OH(this.hitDetectionInstructions,r,t),r=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=vc(i||zo)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=vc(i||k1);const n=e.getLineCap();t.lineCap=n!==void 0?n:Cp;const s=e.getLineDash();t.lineDash=s?s.slice():Nd;const r=e.getLineDashOffset();t.lineDashOffset=r||Bd;const l=e.getLineJoin();t.lineJoin=l!==void 0?l:Ip;const u=e.getWidth();t.lineWidth=u!==void 0?u:G1;const d=e.getMiterLimit();t.miterLimit=d!==void 0?d:R1,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[Ua.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Ua.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,n=e.lineCap,s=e.lineDash,r=e.lineDashOffset,l=e.lineJoin,u=e.lineWidth,d=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=n||s!=e.currentLineDash&&!ah(e.currentLineDash,s)||e.currentLineDashOffset!=r||e.currentLineJoin!=l||e.currentLineWidth!=u||e.currentMiterLimit!=d)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=n,e.currentLineDash=s,e.currentLineDashOffset=r,e.currentLineJoin=l,e.currentLineWidth=u,e.currentMiterLimit=d)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Ua.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Q7(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;qd(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class $re extends Eb{constructor(e,t,i,n){super(e,t,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!kc(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const n=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,l=this.appendFlatPointCoordinates(n,s);this.instructions.push([Ua.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ua.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const n=e.getFlatCoordinates(),s=[];for(let u=0,d=n.length;u<d;u+=e.getStride())(!this.maxExtent||kc(this.maxExtent,n.slice(u,u+2)))&&s.push(n[u],n[u+1]);const r=this.coordinates.length,l=this.appendFlatPointCoordinates(s,2);this.instructions.push([Ua.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ua.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),n=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=n[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Jre extends Eb{constructor(e,t,i,n){super(e,t,i,n)}drawFlatCoordinates_(e,t,i,n){const s=this.coordinates.length,r=this.appendFlatLineCoordinates(e,t,i,n,!1,!1),l=[Ua.MOVE_TO_LINE_TO,s,r];return this.instructions.push(l),this.hitDetectionInstructions.push(l),i}drawLineString(e,t,i){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Ua.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Nd,Bd],Rm);const l=e.getFlatCoordinates(),u=e.getStride();this.drawFlatCoordinates_(l,0,l.length,u),this.hitDetectionInstructions.push(Qh),this.endGeometry(t)}drawMultiLineString(e,t,i){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Ua.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Nd,Bd],Rm);const l=e.getEnds(),u=e.getFlatCoordinates(),d=e.getStride();let h=0;for(let g=0,y=l.length;g<y;++g)h=this.drawFlatCoordinates_(u,h,l[g],d);this.hitDetectionInstructions.push(Qh),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Qh),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Qh),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Rm)}}class IR extends Eb{constructor(e,t,i,n){super(e,t,i,n)}drawFlatCoordinatess_(e,t,i,n){const s=this.state,r=s.fillStyle!==void 0,l=s.strokeStyle!==void 0,u=i.length;this.instructions.push(Rm),this.hitDetectionInstructions.push(Rm);for(let d=0;d<u;++d){const h=i[d],g=this.coordinates.length,y=this.appendFlatLineCoordinates(e,t,h,n,!0,!l),x=[Ua.MOVE_TO_LINE_TO,g,y];this.instructions.push(x),this.hitDetectionInstructions.push(x),l&&(this.instructions.push(CR),this.hitDetectionInstructions.push(CR)),t=h}return r&&(this.instructions.push(C2),this.hitDetectionInstructions.push(C2)),l&&(this.instructions.push(Qh),this.hitDetectionInstructions.push(Qh)),t}drawCircle(e,t,i){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ua.SET_FILL_STYLE,zo]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ua.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Nd,Bd]);const l=e.getFlatCoordinates(),u=e.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,u,!1,!1);const h=[Ua.CIRCLE,d];this.instructions.push(Rm,h),this.hitDetectionInstructions.push(Rm,h),n.fillStyle!==void 0&&(this.instructions.push(C2),this.hitDetectionInstructions.push(C2)),n.strokeStyle!==void 0&&(this.instructions.push(Qh),this.hitDetectionInstructions.push(Qh)),this.endGeometry(t)}drawPolygon(e,t,i){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ua.SET_FILL_STYLE,zo]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ua.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Nd,Bd]);const l=e.getEnds(),u=e.getOrientedFlatCoordinates(),d=e.getStride();this.drawFlatCoordinatess_(u,0,l,d),this.endGeometry(t)}drawMultiPolygon(e,t,i){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ua.SET_FILL_STYLE,zo]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ua.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Nd,Bd]);const l=e.getEndss(),u=e.getOrientedFlatCoordinates(),d=e.getStride();let h=0;for(let g=0,y=l.length;g<y;++g)h=this.drawFlatCoordinatess_(u,h,l[g],d);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,n=t.length;i<n;++i)t[i]=bm(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function Qre(a,e,t,i,n){const s=[];let r=t,l=0,u=e.slice(t,2);for(;l<a&&r+n<i;){const[d,h]=u.slice(-2),g=e[r+n],y=e[r+n+1],x=Math.sqrt((g-d)*(g-d)+(y-h)*(y-h));if(l+=x,l>=a){const C=(a-l+x)/x,I=gl(d,g,C),A=gl(h,y,C);u.push(I,A),s.push(u),u=[I,A],l==a&&(r+=n),l=0}else if(l<a)u.push(e[r+n],e[r+n+1]),r+=n;else{const C=x-l,I=gl(d,g,C/x),A=gl(h,y,C/x);u.push(I,A),s.push(u),u=[I,A],l=0,r+=n}}return l>0&&s.push(u),s}function ese(a,e,t,i,n){let s=t,r=t,l=0,u=0,d=t,h,g,y,x,C,I,A,E,L,G;for(g=t;g<i;g+=n){const F=e[g],B=e[g+1];C!==void 0&&(L=F-C,G=B-I,x=Math.sqrt(L*L+G*G),A!==void 0&&(u+=y,h=Math.acos((A*L+E*G)/(y*x)),h>a&&(u>l&&(l=u,s=d,r=g),u=0,d=g-n)),y=x,A=L,E=G),C=F,I=B}return u+=x,u>l?[d,g]:[s,r]}const Pw={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class tse extends Eb{constructor(e,t,i,n){super(e,t,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[zo]={fillStyle:zo},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const n=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!n&&!s)return;const l=this.coordinates;let u=l.length;const d=e.getType();let h=null,g=e.getStride();if(r.placement==="line"&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!Or(this.maxExtent,e.getExtent()))return;let y;if(h=e.getFlatCoordinates(),d=="LineString")y=[h.length];else if(d=="MultiLineString")y=e.getEnds();else if(d=="Polygon")y=e.getEnds().slice(0,1);else if(d=="MultiPolygon"){const A=e.getEndss();y=[];for(let E=0,L=A.length;E<L;++E)y.push(A[E][0])}this.beginGeometry(e,t,i);const x=r.repeat,C=x?void 0:r.textAlign;let I=0;for(let A=0,E=y.length;A<E;++A){let L;x?L=Qre(x*this.resolution,h,I,y[A],g):L=[h.slice(I,y[A])];for(let G=0,F=L.length;G<F;++G){const B=L[G];let Z=0,Y=B.length;if(C==null){const te=ese(r.maxAngle,B,0,B.length,2);Z=te[0],Y=te[1]}for(let te=Z;te<Y;te+=g)l.push(B[te],B[te+1]);const $=l.length;I=y[A],this.drawChars_(u,$),u=$}}this.endGeometry(t)}else{let y=r.overflow?null:[];switch(d){case"Point":case"MultiPoint":h=e.getFlatCoordinates();break;case"LineString":h=e.getFlatMidpoint();break;case"Circle":h=e.getCenter();break;case"MultiLineString":h=e.getFlatMidpoints(),g=2;break;case"Polygon":h=e.getFlatInteriorPoint(),r.overflow||y.push(h[2]/this.resolution),g=3;break;case"MultiPolygon":const F=e.getFlatInteriorPoints();h=[];for(let B=0,Z=F.length;B<Z;B+=3)r.overflow||y.push(F[B+2]/this.resolution),h.push(F[B],F[B+1]);if(h.length===0)return;g=2;break}const x=this.appendFlatPointCoordinates(h,g);if(x===u)return;if(y&&(x-u)/2!==h.length/g){let F=u/2;y=y.filter((B,Z)=>{const Y=l[(F+Z)*2]===h[Z*g]&&l[(F+Z)*2+1]===h[Z*g+1];return Y||--F,Y})}this.saveTextStates_();const C=r.backgroundFill?this.createFill(this.fillStyleToState(r.backgroundFill)):null,I=r.backgroundStroke?this.createStroke(this.strokeStyleToState(r.backgroundStroke)):null;this.beginGeometry(e,t,i);let A=r.padding;if(A!=Em&&(r.scale[0]<0||r.scale[1]<0)){let F=r.padding[0],B=r.padding[1],Z=r.padding[2],Y=r.padding[3];r.scale[0]<0&&(B=-B,Y=-Y),r.scale[1]<0&&(F=-F,Z=-Z),A=[F,B,Z,Y]}const E=this.pixelRatio;this.instructions.push([Ua.DRAW_IMAGE,u,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,A==Em?Em:A.map(function(F){return F*E}),C,I,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const L=1/E,G=C?C.slice(0):null;G&&(G[1]=zo),this.hitDetectionInstructions.push([Ua.DRAW_IMAGE,u,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[L,L],NaN,this.declutterMode_,this.declutterImageWithText_,A,G,I,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?zo:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,n=this.strokeKey_;e&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||P1,justify:t.justify,textBaseline:t.textBaseline||cw,scale:t.scale});const r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,r=this.textKey_,l=this.fillKey_;this.saveTextStates_();const u=this.pixelRatio,d=Pw[n.textBaseline],h=this.textOffsetY_*u,g=this.text_,y=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([Ua.DRAW_CHARS,e,t,d,n.overflow,l,n.maxAngle,u,h,s,y*u,g,r,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Ua.DRAW_CHARS,e,t,d,n.overflow,l&&zo,n.maxAngle,u,h,s,y*u,g,r,1/u,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,n,s;if(!e)this.text_="";else{const r=e.getFill();r?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=vc(r.getColor()||zo)):(n=null,this.textFillState_=n);const l=e.getStroke();if(!l)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const I=l.getLineDash(),A=l.getLineDashOffset(),E=l.getWidth(),L=l.getMiterLimit();s.lineCap=l.getLineCap()||Cp,s.lineDash=I?I.slice():Nd,s.lineDashOffset=A===void 0?Bd:A,s.lineJoin=l.getLineJoin()||Ip,s.lineWidth=E===void 0?G1:E,s.miterLimit=L===void 0?R1:L,s.strokeStyle=vc(l.getColor()||k1)}i=this.textState_;const u=e.getFont()||QP;Hq(u);const d=e.getScaleArray();i.overflow=e.getOverflow(),i.font=u,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||cw,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Em,i.scale=d===void 0?[1,1]:d;const h=e.getOffsetX(),g=e.getOffsetY(),y=e.getRotateWithView(),x=e.getKeepUpright(),C=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=g===void 0?0:g,this.textRotateWithView_=y===void 0?!1:y,this.textKeepUpright_=x===void 0?!0:x,this.textRotation_=C===void 0?0:C,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:ei(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?typeof n.fillStyle=="string"?n.fillStyle:"|"+ei(n.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const ase={Circle:IR,Default:Eb,Image:$re,LineString:Jre,Polygon:IR,Text:tse};class kO{constructor(e,t,i,n){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const n in i){const s=i[n].finish();e[t][n]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let n=this.buildersByZIndex_[i];n===void 0&&(n={},this.buildersByZIndex_[i]=n);let s=n[t];if(s===void 0){const r=ase[t];s=new r(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=s}return s}}function HT(a,e,t,i){let n=a[e],s=a[e+1],r=0;for(let l=e+i;l<t;l+=i){const u=a[l],d=a[l+1];r+=Math.sqrt((u-n)*(u-n)+(d-s)*(d-s)),n=u,s=d}return r}function ise(a,e,t,i,n,s,r,l,u,d,h,g,y=!0){let x=a[e],C=a[e+1],I=0,A=0,E=0,L=0;function G(){I=x,A=C,e+=i,x=a[e],C=a[e+1],L+=E,E=Math.sqrt((x-I)*(x-I)+(C-A)*(C-A))}do G();while(e<t-i&&L+E<s);let F=E===0?0:(s-L)/E;const B=gl(I,x,F),Z=gl(A,C,F),Y=e-i,$=L,te=s+l*u(d,n,h);for(;e<t-i&&L+E<te;)G();F=E===0?0:(te-L)/E;const ce=gl(I,x,F),me=gl(A,C,F);let X=!1;if(y)if(g){const _e=[B,Z,ce,me];H5(_e,0,4,2,g,_e,_e),X=_e[0]>_e[2]}else X=B>ce;const de=Math.PI,N=[],ne=Y+i===e;e=Y,E=0,L=$,x=a[e],C=a[e+1];let le;if(ne){G(),le=Math.atan2(C-A,x-I),X&&(le+=le>0?-de:de);const _e=(ce+B)/2,ke=(me+Z)/2;return N[0]=[_e,ke,(te-s)/2,le,n],N}n=n.replace(/\n/g," ");for(let _e=0,ke=n.length;_e<ke;){G();let Ie=Math.atan2(C-A,x-I);if(X&&(Ie+=Ie>0?-de:de),le!==void 0){let Je=Ie-le;if(Je+=Je>de?-2*de:Je<-de?2*de:0,Math.abs(Je)>r)return null}le=Ie;const re=_e;let Q=0;for(;_e<ke;++_e){const Je=X?ke-_e-1:_e,kt=l*u(d,n[Je],h);if(e+i<t&&L+E<s+Q+kt/2)break;Q+=kt}if(_e===re)continue;const J=X?n.substring(ke-re,ke-_e):n.substring(re,_e);F=E===0?0:(s+Q/2-L)/E;const je=gl(I,x,F),Qe=gl(A,C,F);N.push([je,Qe,Q/2,Ie,J]),s+=Q}return N}class XT{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(ow(),{get:(e,t)=>{if(typeof ow()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,n=t.length;i<n;++i){const s=t[i];if(typeof s=="function"){s(e);continue}const r=t[++i];if(typeof e[s]=="function")e[s](...r);else{if(typeof r=="function"){e[s]=r(e);continue}e[s]=r}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const vg=Qo(),kh=[],pd=[],yd=[],Ph=[];function SR(a){return a[3].declutterBox}const AR=new RegExp("[-----]");function v4(a,e){return e==="start"?e=AR.test(a)?"right":"left":e==="end"&&(e=AR.test(a)?"left":"right"),Pw[e]}function nse(a,e,t){return t>0&&a.push(`
`,""),a.push(e,""),a}function rse(a,e,t){return t%2===0&&(a+=e),a}class sse{constructor(e,t,i,n,s){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=Jo(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new XT:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,n){const s=e+t+i+n;if(this.labels_[s])return this.labels_[s];const r=n?this.strokeStates[n]:null,l=i?this.fillStates[i]:null,u=this.textStates[t],d=this.pixelRatio,h=[u.scale[0]*d,u.scale[1]*d],g=u.justify?Pw[u.justify]:v4(Array.isArray(e)?e[0]:e,u.textAlign||P1),y=n&&r.lineWidth?r.lineWidth:0,x=Array.isArray(e)?e:String(e).split(`
`).reduce(nse,[]),{width:C,height:I,widths:A,heights:E,lineWidths:L}=qq(u,x),G=C+y,F=[],B=(G+2)*h[0],Z=(I+y)*h[1],Y={width:B<0?Math.floor(B):Math.ceil(B),height:Z<0?Math.floor(Z):Math.ceil(Z),contextInstructions:F};(h[0]!=1||h[1]!=1)&&F.push("scale",h),n&&(F.push("strokeStyle",r.strokeStyle),F.push("lineWidth",y),F.push("lineCap",r.lineCap),F.push("lineJoin",r.lineJoin),F.push("miterLimit",r.miterLimit),F.push("setLineDash",[r.lineDash]),F.push("lineDashOffset",r.lineDashOffset)),i&&F.push("fillStyle",l.fillStyle),F.push("textBaseline","middle"),F.push("textAlign","center");const $=.5-g;let te=g*G+$*y;const ce=[],me=[];let X=0,de=0,N=0,ne=0,le;for(let _e=0,ke=x.length;_e<ke;_e+=2){const Ie=x[_e];if(Ie===`
`){de+=X,X=0,te=g*G+$*y,++ne;continue}const re=x[_e+1]||u.font;re!==le&&(n&&ce.push("font",re),i&&me.push("font",re),le=re),X=Math.max(X,E[N]);const Q=[Ie,te+$*A[N]+g*(A[N]-L[ne]),.5*(y+X)+de];te+=A[N],n&&ce.push("strokeText",Q),i&&me.push("fillText",Q),++N}return Array.prototype.push.apply(F,ce),Array.prototype.push.apply(F,me),this.labels_[s]=Y,Y}replayTextBackground_(e,t,i,n,s,r,l){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,t),r&&(this.alignAndScaleFill_=r[2],e.fillStyle=r[1],this.fill_(e)),l&&(this.setStrokeStyle_(e,l),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,n,s,r,l,u,d,h,g,y,x,C,I,A){l*=y[0],u*=y[1];let E=i-l,L=n-u;const G=s+d>e?e-d:s,F=r+h>t?t-h:r,B=C[3]+G*y[0]+C[1],Z=C[0]+F*y[1]+C[2],Y=E-C[3],$=L-C[0];(I||g!==0)&&(kh[0]=Y,Ph[0]=Y,kh[1]=$,pd[1]=$,pd[0]=Y+B,yd[0]=pd[0],yd[1]=$+Z,Ph[1]=yd[1]);let te;return g!==0?(te=ku(Jo(),i,n,1,1,g,-i,-n),Gr(te,kh),Gr(te,pd),Gr(te,yd),Gr(te,Ph),Pc(Math.min(kh[0],pd[0],yd[0],Ph[0]),Math.min(kh[1],pd[1],yd[1],Ph[1]),Math.max(kh[0],pd[0],yd[0],Ph[0]),Math.max(kh[1],pd[1],yd[1],Ph[1]),vg)):Pc(Math.min(Y,Y+B),Math.min($,$+Z),Math.max(Y,Y+B),Math.max($,$+Z),vg),x&&(E=Math.round(E),L=Math.round(L)),{drawImageX:E,drawImageY:L,drawImageW:G,drawImageH:F,originX:d,originY:h,declutterBox:{minX:vg[0],minY:vg[1],maxX:vg[2],maxY:vg[3],value:A},canvasTransform:te,scale:y}}replayImageOrLabel_(e,t,i,n,s,r,l){const u=!!(r||l),d=n.declutterBox,h=l?l[2]*n.scale[0]/2:0;return d.minX-h<=t[0]&&d.maxX+h>=0&&d.minY-h<=t[1]&&d.maxY+h>=0&&(u&&this.replayTextBackground_(e,kh,pd,yd,Ph,r,l),Yq(e,n.canvasTransform,s,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Gr(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(i[0]%n,i[1]%n),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,n){const s=this.textStates[t],r=this.createLabel(e,t,n,i),l=this.strokeStates[i],u=this.pixelRatio,d=v4(Array.isArray(e)?e[0]:e,s.textAlign||P1),h=Pw[s.textBaseline||cw],g=l&&l.lineWidth?l.lineWidth:0,y=r.width/u-2*s.scale[0],x=d*y+2*(.5-d)*g,C=h*r.height/u+2*(.5-h)*g;return{label:r,anchorX:x,anchorY:C}}execute_(e,t,i,n,s,r,l,u){const d=this.zIndexContext_;let h;this.pixelCoordinates_&&ah(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Fd(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),YH(this.renderedTransform_,i));let g=0;const y=n.length;let x=0,C,I,A,E,L,G,F,B,Z,Y,$,te,ce,me=0,X=0;const de=this.coordinateCache_,N=this.viewRotation_,ne=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,le={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},_e=this.instructions!=n||this.overlaps?0:200;let ke,Ie,re,Q;for(;g<y;){const J=n[g];switch(J[0]){case Ua.BEGIN_GEOMETRY:ke=J[1],Q=J[3],ke.getGeometry()?l!==void 0&&!Or(l,Q.getExtent())?g=J[2]+1:++g:g=J[2],d&&(d.zIndex=J[4]);break;case Ua.BEGIN_PATH:me>_e&&(this.fill_(e),me=0),X>_e&&(e.stroke(),X=0),!me&&!X&&(e.beginPath(),L=NaN,G=NaN),++g;break;case Ua.CIRCLE:x=J[1];const Qe=h[x],Je=h[x+1],kt=h[x+2],Pt=h[x+3],zt=kt-Qe,Nt=Pt-Je,ga=Math.sqrt(zt*zt+Nt*Nt);e.moveTo(Qe+ga,Je),e.arc(Qe,Je,ga,0,2*Math.PI,!0),++g;break;case Ua.CLOSE_PATH:e.closePath(),++g;break;case Ua.CUSTOM:x=J[1],C=J[2];const ta=J[3],Fe=J[4],De=J[5];le.geometry=ta,le.feature=ke,g in de||(de[g]=[]);const z=de[g];De?De(h,x,C,2,z):(z[0]=h[x],z[1]=h[x+1],z.length=2),d&&(d.zIndex=J[6]),Fe(z,le),++g;break;case Ua.DRAW_IMAGE:x=J[1],C=J[2],Z=J[3],I=J[4],A=J[5];let Ze=J[6];const Re=J[7],fe=J[8],ie=J[9],Ce=J[10];let Ee=J[11];const Ne=J[12];let Ve=J[13];E=J[14]||"declutter";const $e=J[15];if(!Z&&J.length>=20){Y=J[19],$=J[20],te=J[21],ce=J[22];const Ii=this.drawLabelWithPointPlacement_(Y,$,te,ce);Z=Ii.label,J[3]=Z;const ee=J[23];I=(Ii.anchorX-ee)*this.pixelRatio,J[4]=I;const ue=J[24];A=(Ii.anchorY-ue)*this.pixelRatio,J[5]=A,Ze=Z.height,J[6]=Ze,Ve=Z.width,J[13]=Ve}let ht;J.length>25&&(ht=J[25]);let _t,Et,ca;J.length>17?(_t=J[16],Et=J[17],ca=J[18]):(_t=Em,Et=null,ca=null),Ce&&ne?Ee+=N:!Ce&&!ne&&(Ee-=N);let ua=0;for(;x<C;x+=2){if(ht&&ht[ua++]<Ve/this.pixelRatio)continue;const Ii=this.calculateImageOrLabelDimensions_(Z.width,Z.height,h[x],h[x+1],Ve,Ze,I,A,fe,ie,Ee,Ne,s,_t,!!Et||!!ca,ke),ee=[e,t,Z,Ii,Re,Et,ca];if(u){let ue,ge,xe;if($e){const ze=C-x;if(!$e[ze]){$e[ze]={args:ee,declutterMode:E};continue}const pe=$e[ze];ue=pe.args,ge=pe.declutterMode,delete $e[ze],xe=SR(ue)}let Se,Xe;if(ue&&(ge!=="declutter"||!u.collides(xe))&&(Se=!0),(E!=="declutter"||!u.collides(Ii.declutterBox))&&(Xe=!0),ge==="declutter"&&E==="declutter"){const ze=Se&&Xe;Se=ze,Xe=ze}Se&&(ge!=="none"&&u.insert(xe),this.replayImageOrLabel_.apply(this,ue)),Xe&&(E!=="none"&&u.insert(Ii.declutterBox),this.replayImageOrLabel_.apply(this,ee))}else this.replayImageOrLabel_.apply(this,ee)}++g;break;case Ua.DRAW_CHARS:const yi=J[1],Xi=J[2],Ri=J[3],En=J[4];ce=J[5];const _i=J[6],nr=J[7],Ci=J[8];te=J[9];const Ti=J[10];Y=J[11],Array.isArray(Y)&&(Y=Y.reduce(rse,"")),$=J[12];const Dr=[J[13],J[13]];E=J[14]||"declutter";const vs=J[15],To=this.textStates[$],gr=To.font,Zn=[To.scale[0]*nr,To.scale[1]*nr];let zn;gr in this.widths_?zn=this.widths_[gr]:(zn={},this.widths_[gr]=zn);const pr=HT(h,yi,Xi,2),Ll=Math.abs(Zn[0])*KL(gr,Y,zn);if(En||Ll<=pr){const Ii=this.textStates[$].textAlign,ee=(pr-Ll)*v4(Y,Ii),ue=ise(h,yi,Xi,2,Y,ee,_i,Math.abs(Zn[0]),KL,gr,zn,ne?0:this.viewRotation_,vs);e:if(ue){const ge=[];let xe,Se,Xe,ze,pe;if(te)for(xe=0,Se=ue.length;xe<Se;++xe){pe=ue[xe],Xe=pe[4],ze=this.createLabel(Xe,$,"",te),I=pe[2]+(Zn[0]<0?-Ti:Ti),A=Ri*ze.height+(.5-Ri)*2*Ti*Zn[1]/Zn[0]-Ci;const Ae=this.calculateImageOrLabelDimensions_(ze.width,ze.height,pe[0],pe[1],ze.width,ze.height,I,A,0,0,pe[3],Dr,!1,Em,!1,ke);if(u&&E==="declutter"&&u.collides(Ae.declutterBox))break e;ge.push([e,t,ze,Ae,1,null,null])}if(ce)for(xe=0,Se=ue.length;xe<Se;++xe){pe=ue[xe],Xe=pe[4],ze=this.createLabel(Xe,$,ce,""),I=pe[2],A=Ri*ze.height-Ci;const Ae=this.calculateImageOrLabelDimensions_(ze.width,ze.height,pe[0],pe[1],ze.width,ze.height,I,A,0,0,pe[3],Dr,!1,Em,!1,ke);if(u&&E==="declutter"&&u.collides(Ae.declutterBox))break e;ge.push([e,t,ze,Ae,1,null,null])}u&&E!=="none"&&u.load(ge.map(SR));for(let Ae=0,tt=ge.length;Ae<tt;++Ae)this.replayImageOrLabel_.apply(this,ge[Ae])}}++g;break;case Ua.END_GEOMETRY:if(r!==void 0){ke=J[1];const Ii=r(ke,Q,E);if(Ii)return Ii}++g;break;case Ua.FILL:_e?me++:this.fill_(e),++g;break;case Ua.MOVE_TO_LINE_TO:for(x=J[1],C=J[2],Ie=h[x],re=h[x+1],e.moveTo(Ie,re),L=Ie+.5|0,G=re+.5|0,x+=2;x<C;x+=2)Ie=h[x],re=h[x+1],F=Ie+.5|0,B=re+.5|0,(x==C-2||F!==L||B!==G)&&(e.lineTo(Ie,re),L=F,G=B);++g;break;case Ua.SET_FILL_STYLE:this.alignAndScaleFill_=J[2],me&&(this.fill_(e),me=0,X&&(e.stroke(),X=0)),e.fillStyle=J[1],++g;break;case Ua.SET_STROKE_STYLE:X&&(e.stroke(),X=0),this.setStrokeStyle_(e,J),++g;break;case Ua.STROKE:_e?X++:e.stroke(),++g;break;default:++g;break}}me&&this.fill_(e),X&&e.stroke()}execute(e,t,i,n,s,r){this.viewRotation_=n,this.execute_(e,t,i,this.instructions,s,void 0,void 0,r)}executeHitDetection(e,t,i,n,s){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,n,s)}}const Sm=["Polygon","Circle","LineString","Image","Text","Default"],Gw=["Image","Text"],ose=Sm.filter(a=>!Gw.includes(a));class PO{constructor(e,t,i,n,s,r,l){this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Jo(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,l)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let n=this.executorsByZIndex_[i];n===void 0&&(n={},this.executorsByZIndex_[i]=n);const s=e[i];for(const r in s){const l=s[r];n[r]=new sse(this.resolution_,this.pixelRatio_,this.overlaps_,l,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let n=0,s=e.length;n<s;++n)if(e[n]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,n,s,r){n=Math.round(n);const l=n*2+1,u=ku(this.hitDetectionTransform_,n+.5,n+.5,1/t,-1/t,-i,-e[0],-e[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=Jr(l,l));const h=this.hitDetectionContext_;h.canvas.width!==l||h.canvas.height!==l?(h.canvas.width=l,h.canvas.height=l):d||h.clearRect(0,0,l,l);let g;this.renderBuffer_!==void 0&&(g=Qo(),q0(g,e),qd(g,t*(this.renderBuffer_+n),g));const y=lse(n);let x;function C(B,Z,Y){const $=h.getImageData(0,0,l,l).data;for(let te=0,ce=y.length;te<ce;te++)if($[y[te]]>0){if(!r||Y==="none"||x!=="Image"&&x!=="Text"||r.includes(B)){const me=(y[te]-3)/4,X=n-me%l,de=n-(me/l|0),N=s(B,Z,X*X+de*de);if(N)return N}h.clearRect(0,0,l,l);break}}const I=Object.keys(this.executorsByZIndex_).map(Number);I.sort(Tc);let A,E,L,G,F;for(A=I.length-1;A>=0;--A){const B=I[A].toString();for(L=this.executorsByZIndex_[B],E=Sm.length-1;E>=0;--E)if(x=Sm[E],G=L[x],G!==void 0&&(F=G.executeHitDetection(h,u,i,C,g),F))return F}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],n=t[1],s=t[2],r=t[3],l=[i,n,i,r,s,r,s,n];return Fd(l,0,8,2,e,l),l}isEmpty(){return Hm(this.executorsByZIndex_)}execute(e,t,i,n,s,r,l){const u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(l?WH:Tc),r=r||Sm;const d=Sm.length;for(let h=0,g=u.length;h<g;++h){const y=u[h].toString(),x=this.executorsByZIndex_[y];for(let C=0,I=r.length;C<I;++C){const A=r[C],E=x[A];if(E!==void 0){const L=l===null?void 0:E.getZIndexContext(),G=L?L.getContext():e,F=this.maxExtent_&&A!=="Image"&&A!=="Text";if(F&&(G.save(),this.clip(G,i)),!L||A==="Text"||A==="Image"?E.execute(G,t,i,n,s,l):L.pushFunction(B=>E.execute(B,t,i,n,s,l)),F&&G.restore(),L){L.offset();const B=u[h]*d+Sm.indexOf(A);this.deferredZIndexContexts_[B]||(this.deferredZIndexContexts_[B]=[]),this.deferredZIndexContexts_[B].push(L)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Tc);for(let i=0,n=t.length;i<n;++i)e[t[i]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[i]].length=0}}const x4={};function lse(a){if(x4[a]!==void 0)return x4[a];const e=a*2+1,t=a*a,i=new Array(t+1);for(let s=0;s<=a;++s)for(let r=0;r<=a;++r){const l=s*s+r*r;if(l>t)break;let u=i[l];u||(u=[],i[l]=u),u.push(((a+s)*e+(a+r))*4+3),s>0&&u.push(((a-s)*e+(a+r))*4+3),r>0&&(u.push(((a+s)*e+(a-r))*4+3),s>0&&u.push(((a-s)*e+(a-r))*4+3))}const n=[];for(let s=0,r=i.length;s<r;++s)i[s]&&n.push(...i[s]);return x4[a]=n,n}const TR=Object.freeze(Object.defineProperty({__proto__:null,Circle:Qr,Fill:ji,Icon:Gu,IconImage:hT,Image:gb,RegularShape:bl,Stroke:Li,Style:$a,Text:rh},Symbol.toStringTag,{value:"Module"}));class GO extends RO{constructor(e,t,i,n,s,r,l){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=n,this.transformRotation_=n?Op(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=r,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Jo()}drawImages_(e,t,i,n){if(!this.image_)return;const s=Fd(e,t,i,n,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.tmpLocalTransform_,u=r.globalAlpha;this.imageOpacity_!=1&&(r.globalAlpha=u*this.imageOpacity_);let d=this.imageRotation_;this.transformRotation_===0&&(d-=this.viewRotation_),this.imageRotateWithView_&&(d+=this.viewRotation_);for(let h=0,g=s.length;h<g;h+=2){const y=s[h]-this.imageAnchorX_,x=s[h+1]-this.imageAnchorY_;if(d!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const C=y+this.imageAnchorX_,I=x+this.imageAnchorY_;ku(l,C,I,1,1,d,-C,-I),r.save(),r.transform.apply(r,l),r.translate(C,I),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,x,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(r.globalAlpha=u)}drawText_(e,t,i,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Fd(e,t,i,n,this.transform_,this.pixelCoordinates_),r=this.context_;let l=this.textRotation_;for(this.transformRotation_===0&&(l-=this.viewRotation_),this.textRotateWithView_&&(l+=this.viewRotation_);t<i;t+=n){const u=s[t]+this.textOffsetX_,d=s[t+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(r.save(),r.translate(u-this.textOffsetX_,d-this.textOffsetY_),r.rotate(l),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.restore()):(this.textStrokeState_&&r.strokeText(this.text_,u,d),this.textFillState_&&r.fillText(this.text_,u,d))}}moveToLineTo_(e,t,i,n,s){const r=this.context_,l=Fd(e,t,i,n,this.transform_,this.pixelCoordinates_);r.moveTo(l[0],l[1]);let u=l.length;s&&(u-=2);for(let d=2;d<u;d+=2)r.lineTo(l[d],l[d+1]);return s&&r.closePath(),i}drawRings_(e,t,i,n){for(let s=0,r=i.length;s<r;++s)t=this.moveToLineTo_(e,t,i[s],n,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Or(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=iX(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],n=t[3]-t[1],s=Math.sqrt(i*i+n*n),r=this.context_;r.beginPath(),r.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,n=t.length;i<n;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Or(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Or(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=e.getFlatCoordinates();let s=0;const r=e.getEnds(),l=e.getStride();i.beginPath();for(let u=0,d=r.length;u<d;++u)s=this.moveToLineTo_(n,s,r[u],l,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Or(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Or(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let n=0;const s=e.getEndss(),r=e.getStride();t.beginPath();for(let l=0,u=s.length;l<u;++l){const d=s[l];n=this.drawRings_(i,n,d,r)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),ah(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,n=e.textAlign?e.textAlign:P1;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=n&&(i.textAlign=n,t.textAlign=n),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=n,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:vc(i||zo)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),n=t.getLineCap(),s=t.getLineDash(),r=t.getLineDashOffset(),l=t.getLineJoin(),u=t.getWidth(),d=t.getMiterLimit(),h=s||Nd;this.strokeState_={lineCap:n!==void 0?n:Cp,lineDash:this.pixelRatio_===1?h:h.map(g=>g*this.pixelRatio_),lineDashOffset:(r||Bd)*this.pixelRatio_,lineJoin:l!==void 0?l:Ip,lineWidth:(u!==void 0?u:G1)*this.pixelRatio_,miterLimit:d!==void 0?d:R1,strokeStyle:vc(i||k1)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),n=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const r=e.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/i,r[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const x=t.getColor();this.textFillState_={fillStyle:vc(x||zo)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const x=i.getColor(),C=i.getLineCap(),I=i.getLineDash(),A=i.getLineDashOffset(),E=i.getLineJoin(),L=i.getWidth(),G=i.getMiterLimit();this.textStrokeState_={lineCap:C!==void 0?C:Cp,lineDash:I||Nd,lineDashOffset:A||Bd,lineJoin:E!==void 0?E:Ip,lineWidth:L!==void 0?L:G1,miterLimit:G!==void 0?G:R1,strokeStyle:vc(x||k1)}}const n=e.getFont(),s=e.getOffsetX(),r=e.getOffsetY(),l=e.getRotateWithView(),u=e.getRotation(),d=e.getScaleArray(),h=e.getText(),g=e.getTextAlign(),y=e.getTextBaseline();this.textState_={font:n!==void 0?n:QP,textAlign:g!==void 0?g:P1,textBaseline:y!==void 0?y:cw},this.text_=h!==void 0?Array.isArray(h)?h.reduce((x,C,I)=>x+=I%2?" ":C,""):h:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=r!==void 0?this.pixelRatio_*r:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=u!==void 0?u:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}}}const vl=.5;function WO(a,e,t,i,n,s,r,l,u){const d=u?OC(n):n,h=a[0]*vl,g=a[1]*vl,y=Jr(h,g);y.imageSmoothingEnabled=!1;const x=y.canvas,C=new GO(y,vl,n,null,r,l,u?Fp(kH(),u):null),I=t.length,A=Math.floor((256*256*256-1)/I),E={};for(let G=1;G<=I;++G){const F=t[G-1],B=F.getStyleFunction()||i;if(!B)continue;let Z=B(F,s);if(!Z)continue;Array.isArray(Z)||(Z=[Z]);const $=(G*A).toString(16).padStart(7,"#00000");for(let te=0,ce=Z.length;te<ce;++te){const me=Z[te],X=me.getGeometryFunction()(F);if(!X||!Or(d,X.getExtent()))continue;const de=me.clone(),N=de.getFill();N&&N.setColor($);const ne=de.getStroke();ne&&(ne.setColor($),ne.setLineDash(null)),de.setText(void 0);const le=me.getImage();if(le){const re=le.getImageSize();if(!re)continue;const Q=Jr(re[0],re[1],void 0,{alpha:!1}),J=Q.canvas;Q.fillStyle=$,Q.fillRect(0,0,J.width,J.height),de.setImage(new Gu({img:J,anchor:le.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:le.getOrigin(),opacity:1,size:le.getSize(),scale:le.getScale(),rotation:le.getRotation(),rotateWithView:le.getRotateWithView()}))}const _e=de.getZIndex()||0;let ke=E[_e];ke||(ke={},E[_e]=ke,ke.Polygon=[],ke.Circle=[],ke.LineString=[],ke.Point=[]);const Ie=X.getType();if(Ie==="GeometryCollection"){const re=X.getGeometriesArrayRecursive();for(let Q=0,J=re.length;Q<J;++Q){const je=re[Q];ke[je.getType().replace("Multi","")].push(je,de)}}else ke[Ie.replace("Multi","")].push(X,de)}}const L=Object.keys(E).map(Number).sort(Tc);for(let G=0,F=L.length;G<F;++G){const B=E[L[G]];for(const Z in B){const Y=B[Z];for(let $=0,te=Y.length;$<te;$+=2){C.setStyle(Y[$+1]);for(let ce=0,me=e.length;ce<me;++ce)C.setTransform(e[ce]),C.drawGeometry(Y[$])}}}return y.getImageData(0,0,x.width,x.height)}function OO(a,e,t){const i=[];if(t){const n=Math.floor(Math.round(a[0])*vl),s=Math.floor(Math.round(a[1])*vl),r=(Dn(n,0,t.width-1)+Dn(s,0,t.height-1)*t.width)*4,l=t.data[r],u=t.data[r+1],h=t.data[r+2]+256*(u+256*l),g=Math.floor((256*256*256-1)/e.length);h&&h%g===0&&i.push(e[h/g-1])}return i}const use=.5,FO={Point:pse,LineString:mse,Polygon:bse,MultiPoint:yse,MultiLineString:fse,MultiPolygon:gse,GeometryCollection:_se,Circle:dse};function cse(a,e){return parseInt(ei(a),10)-parseInt(ei(e),10)}function C3(a,e){const t=NO(a,e);return t*t}function NO(a,e){return use*a/e}function dse(a,e,t,i,n){const s=t.getFill(),r=t.getStroke();if(s||r){const u=a.getBuilder(t.getZIndex(),"Circle");u.setFillStrokeStyle(s,r),u.drawCircle(e,i,n)}const l=t.getText();if(l&&l.getText()){const u=a.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(e,i)}}function Ww(a,e,t,i,n,s,r,l){const u=[],d=t.getImage();if(d){let y=!0;const x=d.getImageState();x==Ia.LOADED||x==Ia.ERROR?y=!1:x==Ia.IDLE&&d.load(),y&&u.push(d.ready())}const h=t.getFill();h&&h.loading()&&u.push(h.ready());const g=u.length>0;return g&&Promise.all(u).then(()=>n(null)),hse(a,e,t,i,s,r,l),g}function hse(a,e,t,i,n,s,r){const l=t.getGeometryFunction()(e);if(!l)return;const u=l.simplifyTransformed(i,n);if(t.getRenderer())BO(a,u,t,e,r);else{const h=FO[u.getType()];h(a,u,t,e,r,s)}}function BO(a,e,t,i,n){if(e.getType()=="GeometryCollection"){const r=e.getGeometries();for(let l=0,u=r.length;l<u;++l)BO(a,r[l],t,i,n);return}a.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),n)}function _se(a,e,t,i,n,s){const r=e.getGeometriesArray();let l,u;for(l=0,u=r.length;l<u;++l){const d=FO[r[l].getType()];d(a,r[l],t,i,n,s)}}function mse(a,e,t,i,n){const s=t.getStroke();if(s){const l=a.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawLineString(e,i,n)}const r=t.getText();if(r&&r.getText()){const l=a.getBuilder(t.getZIndex(),"Text");l.setTextStyle(r),l.drawText(e,i,n)}}function fse(a,e,t,i,n){const s=t.getStroke();if(s){const l=a.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawMultiLineString(e,i,n)}const r=t.getText();if(r&&r.getText()){const l=a.getBuilder(t.getZIndex(),"Text");l.setTextStyle(r),l.drawText(e,i,n)}}function gse(a,e,t,i,n){const s=t.getFill(),r=t.getStroke();if(r||s){const u=a.getBuilder(t.getZIndex(),"Polygon");u.setFillStrokeStyle(s,r),u.drawMultiPolygon(e,i,n)}const l=t.getText();if(l&&l.getText()){const u=a.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(e,i,n)}}function pse(a,e,t,i,n,s){const r=t.getImage(),l=t.getText(),u=l&&l.getText(),d=s&&r&&u?{}:void 0;if(r){if(r.getImageState()!=Ia.LOADED)return;const h=a.getBuilder(t.getZIndex(),"Image");h.setImageStyle(r,d),h.drawPoint(e,i,n)}if(u){const h=a.getBuilder(t.getZIndex(),"Text");h.setTextStyle(l,d),h.drawText(e,i,n)}}function yse(a,e,t,i,n,s){const r=t.getImage(),l=r&&r.getOpacity()!==0,u=t.getText(),d=u&&u.getText(),h=s&&l&&d?{}:void 0;if(l){if(r.getImageState()!=Ia.LOADED)return;const g=a.getBuilder(t.getZIndex(),"Image");g.setImageStyle(r,h),g.drawMultiPoint(e,i,n)}if(d){const g=a.getBuilder(t.getZIndex(),"Text");g.setTextStyle(u,h),g.drawText(e,i,n)}}function bse(a,e,t,i,n){const s=t.getFill(),r=t.getStroke();if(s||r){const u=a.getBuilder(t.getZIndex(),"Polygon");u.setFillStrokeStyle(s,r),u.drawPolygon(e,i,n)}const l=t.getText();if(l&&l.getText()){const u=a.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(e,i,n)}}const vse=5;class xse extends _b{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=vse}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Da()}getData(e){return null}prepareFrame(e){return Da()}renderFrame(e,t){return Da()}forEachFeatureAtCoordinate(e,t,i,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Ia.LOADED||t.getState()===Ia.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Ia.LOADED&&t!=Ia.ERROR&&e.addEventListener(Ka.CHANGE,this.boundHandleImageChange_),t==Ia.IDLE&&(e.load(),t=e.getState()),t==Ia.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const ER=[];let kg=null;function wse(){kg=Jr(1,1,void 0,{willReadFrequently:!0})}class qT extends xse{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Jo(),this.pixelTransform=Jo(),this.inversePixelTransform=Jo(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){kg||wse(),kg.clearRect(0,0,1,1);let n;try{kg.drawImage(e,t,i,1,1,0,0,1,1),n=kg.getImageData(0,0,1,1).data}catch{return kg=null,null}return n}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const n=this.getLayer().getClassName();let s,r;if(e&&e.className===n&&(!i||e&&e.style.backgroundColor&&ah(ql(e.style.backgroundColor),ql(i)))){const l=e.firstElementChild;jh(l)&&(r=l.getContext("2d"))}if(r&&QH(r.canvas.style.transform,t)?(this.container=e,this.context=r,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=wl?GP():document.createElement("div"),s.className=n;let l=s.style;l.position="absolute",l.width="100%",l.height="100%",r=Jr();const u=r.canvas;s.appendChild(u),l=u.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=s,this.context=r}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const n=th(i),s=RC(i),r=LC(i),l=MC(i);Gr(t.coordinateToPixelTransform,n),Gr(t.coordinateToPixelTransform,s),Gr(t.coordinateToPixelTransform,r),Gr(t.coordinateToPixelTransform,l);const u=this.inversePixelTransform;Gr(u,n),Gr(u,s),Gr(u,r),Gr(u,l),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()}prepareContainer(e,t){const i=e.extent,n=e.viewState.resolution,s=e.viewState.rotation,r=e.pixelRatio,l=Math.round(Oi(i)/n*r),u=Math.round(Fr(i)/n*r);ku(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/r,1/r,s,-l/2,-u/2),bP(this.inversePixelTransform,this.pixelTransform);const d=JH(this.pixelTransform);if(this.useContainer(t,d,this.getBackground(e)),!this.containerReused){const h=this.context.canvas;h.width!=l||h.height!=u?(h.width=l,h.height=u):this.context.clearRect(0,0,l,u),d!==h.style.transform&&(h.style.transform=d)}}dispatchRenderEvent_(e,t,i){const n=this.getLayer();if(n.hasListener(e)){const s=new oG(e,this.inversePixelTransform,i,t);n.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ko.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ko.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new XT),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ko.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ko.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,n,s,r,l){const u=s/2,d=r/2,h=n/t,g=-h,y=-e[0]+l,x=-e[1];return ku(this.tempTransform,u,d,h,g,-i,y,x)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Cse extends qT{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Qo(),this.wrappedRenderedExtent_=Qo(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const n=t.extent,s=t.viewState,r=s.center,l=s.resolution,u=s.projection,d=s.rotation,h=u.getExtent(),g=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),x=t.pixelRatio,C=t.viewHints,I=!(C[Kn.ANIMATING]||C[Kn.INTERACTING]),A=this.context,E=Math.round(Oi(n)/l*x),L=Math.round(Fr(n)/l*x),G=g.getWrapX()&&u.canWrapX(),F=G?Oi(h):null,B=G?Math.ceil((n[2]-h[2])/F)+1:1;let Z=G?Math.floor((n[0]-h[0])/F):0;do{let Y=this.getRenderTransform(r,l,0,x,E,L,Z*F);t.declutter&&(Y=Y.slice(0)),e.execute(A,[A.canvas.width,A.canvas.height],Y,d,I,i===void 0?Sm:i?Gw:ose,i?y&&t.declutter[y]:void 0)}while(++Z<B)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Jr(this.context.canvas.width,this.context.canvas.height,ER))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,ZC(this.context),ER.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const n=e.viewState;this.prepareContainer(e,t);const s=this.context,r=this.replayGroup_;let l=r&&!r.isEmpty();if(!l&&!(this.getLayer().hasListener(Ko.PRERENDER)||this.getLayer().hasListener(Ko.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),n.projection,this.clipped_=!1,l&&i.extent&&this.clipping){const u=Zl(i.extent);l=Or(u,e.extent),this.clipped_=l&&!yc(u,e.extent),this.clipped_&&this.clipUnrotated(s,e,u)}return l&&this.renderWorlds(r,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),n=this.renderedCenter_,s=this.renderedResolution_,r=this.renderedRotation_,l=this.renderedProjection_,u=this.wrappedRenderedExtent_,d=this.getLayer(),h=[],g=i[0]*vl,y=i[1]*vl;h.push(this.getRenderTransform(n,s,r,vl,g,y,0).slice());const x=d.getSource(),C=l.getExtent();if(x.getWrapX()&&l.canWrapX()&&!yc(C,u)){let I=u[0];const A=Oi(C);let E=0,L;for(;I<C[0];)--E,L=A*E,h.push(this.getRenderTransform(n,s,r,vl,g,y,L).slice()),I+=A;for(E=0,I=u[2];I>C[2];)++E,L=A*E,h.push(this.getRenderTransform(n,s,r,vl,g,y,L).slice()),I-=A}this.hitDetectionImageData_=WO(i,h,this.renderedFeatures_,d.getStyleFunction(),u,s,r,C3(s,this.renderedPixelRatio_),null)}t(OO(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,n,s){if(!this.replayGroup_)return;const r=t.viewState.resolution,l=t.viewState.rotation,u=this.getLayer(),d={},h=function(y,x,C){const I=ei(y),A=d[I];if(A){if(A!==!0&&C<A.distanceSq){if(C===0)return d[I]=!0,s.splice(s.lastIndexOf(A),1),n(y,u,x);A.geometry=x,A.distanceSq=C}}else{if(C===0)return d[I]=!0,n(y,u,x);s.push(d[I]={feature:y,layer:u,geometry:x,distanceSq:C,callback:n})}},g=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,r,l,i,h,g?t.declutter?.[g]?.all().map(y=>y.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const n=e.viewHints[Kn.ANIMATING],s=e.viewHints[Kn.INTERACTING],r=t.getUpdateWhileAnimating(),l=t.getUpdateWhileInteracting();if(this.ready&&!r&&n||!l&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const u=e.extent,d=e.viewState,h=d.projection,g=d.resolution,y=e.pixelRatio,x=t.getRevision(),C=t.getRenderBuffer();let I=t.getRenderOrder();I===void 0&&(I=cse);const A=d.center.slice(),E=qd(u,C*g),L=E.slice(),G=[E.slice()],F=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!yc(F,e.extent)){const N=Oi(F),ne=Math.max(Oi(E)/2,N);E[0]=F[0]-ne,E[2]=F[2]+ne,kC(A,h);const le=aP(G[0],h);le[0]<F[0]&&le[2]<F[2]?G.push([le[0]+N,le[1],le[2]+N,le[3]]):le[0]>F[0]&&le[2]>F[2]&&G.push([le[0]-N,le[1],le[2]-N,le[3]])}if(this.ready&&this.renderedResolution_==g&&this.renderedRevision_==x&&this.renderedRenderOrder_==I&&this.renderedFrameDeclutter_===!!e.declutter&&yc(this.wrappedRenderedExtent_,E))return ah(this.renderedExtent_,L)||(this.hitDetectionImageData_=null,this.renderedExtent_=L),this.renderedCenter_=A,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const B=new kO(NO(g,y),E,g,y);let Z;for(let N=0,ne=G.length;N<ne;++N)i.loadFeatures(G[N],g,h);const Y=C3(g,y);let $=!0;const te=(N,ne)=>{let le;const _e=N.getStyleFunction()||t.getStyleFunction();if(_e&&(le=_e(N,g)),le){const ke=this.renderFeature(N,Y,le,B,Z,this.getLayer().getDeclutter(),ne);$=$&&!ke}},ce=OC(E),me=i.getFeaturesInExtent(ce);I&&me.sort(I);for(let N=0,ne=me.length;N<ne;++N)te(me[N],N);this.renderedFeatures_=me,this.ready=$;const X=B.finish(),de=new PO(E,g,y,i.getOverlaps(),X,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=g,this.renderedRevision_=x,this.renderedRenderOrder_=I,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=L,this.wrappedRenderedExtent_=E,this.renderedCenter_=A,this.renderedProjection_=h,this.renderedPixelRatio_=y,this.replayGroup_=de,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,n,s,r,l){if(!i)return!1;let u=!1;if(Array.isArray(i))for(let d=0,h=i.length;d<h;++d)u=Ww(n,e,i[d],t,this.boundHandleStyleImageChange_,s,r,l)||u;else u=Ww(n,e,i,t,this.boundHandleStyleImageChange_,s,r,l);return u}}class bs extends fT{constructor(e){super(e)}createRenderer(){return new Cse(this)}}let Ise=!1;function Sse(a,e,t,i,n,s,r){const l=new XMLHttpRequest;l.open("GET",typeof a=="function"?a(t,i,n):a,!0),e.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=Ise,l.onload=function(u){if(!l.status||l.status>=200&&l.status<300){const d=e.getType();try{let h;d=="text"||d=="json"?h=l.responseText:d=="xml"?h=l.responseXML||l.responseText:d=="arraybuffer"&&(h=l.response),h?s(e.readFeatures(h,{extent:t,featureProjection:n}),e.readProjection(h)):r()}catch{r()}}else r()},l.onerror=r,l.send()}function MR(a,e){return function(t,i,n,s,r){Sse(a,e,t,i,n,(l,u)=>{this.addFeatures(l),s!==void 0&&s(l)},()=>{this.changed(),r!==void 0&&r()})}}function Ase(a,e){return[[-1/0,-1/0,1/0,1/0]]}class Di extends eu{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Di(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(mn(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=xa(e,Ka.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Tse(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Tse(a){if(typeof a=="function")return a;let e;return Array.isArray(a)?e=a:(_n(typeof a.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[a]),function(){return e}}function DO(a,e,t,i){const n=[];let s=Qo();for(let r=0,l=t.length;r<l;++r){const u=t[r];s=k5(a,e,u[0],i),n.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=u[u.length-1]}return n}function Ow(a,e,t,i,n,s,r){let l,u;const d=(t-e)/i;if(d===1)l=e;else if(d===2)l=e,u=n;else if(d!==0){let h=a[e],g=a[e+1],y=0;const x=[0];for(let A=e+i;A<t;A+=i){const E=a[A],L=a[A+1];y+=Math.sqrt((E-h)*(E-h)+(L-g)*(L-g)),x.push(y),h=E,g=L}const C=n*y,I=GH(x,C);I<0?(u=(C-x[-I-2])/(x[-I-1]-x[-I-2]),l=e+(-I-2)*i):l=e+I*i}r=r>1?r:2,s=s||new Array(r);for(let h=0;h<r;++h)s[h]=l===void 0?NaN:u===void 0?a[l+h]:gl(a[l+h],a[l+i+h],u);return s}function I3(a,e,t,i,n,s){if(t==e)return null;let r;if(n<a[e+i-1])return s?(r=a.slice(e,e+i),r[i-1]=n,r):null;if(a[t-1]<n)return s?(r=a.slice(t-i,t),r[i-1]=n,r):null;if(n==a[e+i-1])return a.slice(e,e+i);let l=e/i,u=t/i;for(;l<u;){const y=l+u>>1;n<a[(y+1)*i-1]?u=y:l=y+1}const d=a[l*i-1];if(n==d)return a.slice((l-1)*i,(l-1)*i+i);const h=a[(l+1)*i-1],g=(n-d)/(h-d);r=[];for(let y=0;y<i-1;++y)r.push(gl(a[(l-1)*i+y],a[l*i+y],g));return r.push(n),r}function Ese(a,e,t,i,n,s,r){if(r)return I3(a,e,t[t.length-1],i,n,s);let l;if(n<a[i-1])return s?(l=a.slice(0,i),l[i-1]=n,l):null;if(a[a.length-1]<n)return s?(l=a.slice(a.length-i),l[i-1]=n,l):null;for(let u=0,d=t.length;u<d;++u){const h=t[u];if(e!=h){if(n<a[e+i-1])return null;if(n<=a[h-1])return I3(a,e,h,i,n,!1);e=h}}return null}class p_ extends x_{constructor(e,t,i){super(),i!==void 0&&t===void 0?this.setFlatCoordinates(i,e):(t=t||0,this.setCenterAndRadius(e,t,i))}clone(){const e=new p_(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){const s=this.flatCoordinates,r=e-s[0],l=t-s[1],u=r*r+l*l;if(u<n){if(u===0)for(let d=0;d<this.stride;++d)i[d]=s[d];else{const d=this.getRadius()/Math.sqrt(u);i[0]=s[0]+d*r,i[1]=s[1]+d*l;for(let h=2;h<this.stride;++h)i[h]=s[h]}return i.length=this.stride,u}return n}containsXY(e,t){const i=this.flatCoordinates,n=e-i[0],s=t-i[1];return n*n+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return Pc(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(Or(e,t)){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]?!0:P5(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+i;for(let s=1;s<t;++s)n[t+s]=e[s];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let s=CP(n,0,e,this.stride);n[s++]=n[0]+t;for(let r=1,l=this.stride;r<l;++r)n[s++]=n[r];n.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),n=this.getStride();this.setCenter(H5(i,0,i.length,n,e,t,i)),this.changed()}}p_.prototype.transform;class jl extends vP{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(mn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(xa(e[t],Ka.CHANGE,this.changed,this))}clone(){const e=new jl(w4(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,n){if(n<of(this.getExtent(),e,t))return n;const s=this.geometries_;for(let r=0,l=s.length;r<l;++r)n=s[r].closestPointXY(e,t,i,n);return n}containsXY(e,t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)if(i[n].containsXY(e,t))return!0;return!1}computeExtent(e){Wp(e);const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)vp(e,t[i].getExtent());return e}getGeometries(){return w4(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let n=!1;for(let s=0,r=i.length;s<r;++s){const l=i[s],u=l.getSimplifiedGeometry(e);t.push(u),u!==l&&(n=!0)}return n?new jl(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Ru(this.getExtent()));const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(w4(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function w4(a){return a.map(e=>e.clone())}class Ki extends x_{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){hn(this.flatCoordinates,e),this.changed()}clone(){const e=new Ki(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<of(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(X5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Y5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,n))}forEachSegment(e){return EP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,I3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Kh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Ow(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return HT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=DC(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ki(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return VC(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=BC(this.flatCoordinates,0,e,this.stride),this.changed()}}class Fu extends x_{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const n=e,s=[],r=[];for(let u=0,d=n.length;u<d;++u){const h=n[u];hn(s,h.getFlatCoordinates()),r.push(s.length)}const l=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(l,s),this.ends_=r}}appendLineString(e){hn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Fu(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<of(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(q5(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),K5(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,n))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,Ese(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return M1(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Ki(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,n=[];let s=0;for(let r=0,l=t.length;r<l;++r){const u=t[r],d=new Ki(e.slice(s,u),i);n.push(d),s=u}return n}getLength(){const e=this.ends_;let t=0,i=0;for(let n=0,s=e.length;n<s;++n)i+=HT(this.flatCoordinates,t,e[n],this.stride),t=e[n];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const n=this.ends_,s=this.stride;for(let r=0,l=n.length;r<l;++r){const u=n[r],d=Ow(t,i,u,s,.5);hn(e,d),i=u}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=SP(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new Fu(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return dX(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=mb(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class $d extends x_{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){hn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new $d(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){if(n<of(this.getExtent(),e,t))return n;const s=this.flatCoordinates,r=this.stride;for(let l=0,u=s.length;l<u;l+=r){const d=Pd(e,t,s[l],s[l+1]);if(d<n){n=d;for(let h=0;h<r;++h)i[h]=s[l+h];i.length=r}}return n}getCoordinates(){return Kh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Ln(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,n=[];for(let s=0,r=e.length;s<r;s+=i){const l=new Ln(e.slice(s,s+i),t);n.push(l)}return n}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let n=0,s=t.length;n<s;n+=i){const r=t[n],l=t[n+1];if(R5(e,r,l))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=BC(this.flatCoordinates,0,e,this.stride),this.changed()}}class y_ extends x_{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const n=e,s=[],r=[];for(let l=0,u=n.length;l<u;++l){const d=n[l],h=s.length,g=d.getEnds();for(let y=0,x=g.length;y<x;++y)g[y]+=h;hn(s,d.getFlatCoordinates()),r.push(g)}t=n.length===0?this.getLayout():n[0].getLayout(),e=s,i=r}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;hn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let n=0,s=t.length;n<s;++n)t[n]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let n=0;n<e;++n)t[n]=this.endss_[n].slice();const i=new y_(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,n){return n<of(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(rX(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),sX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,n))}containsXY(e,t){return cX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return nX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),NA(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,FA(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=DO(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=TP(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new $d(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;RP(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=NA(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=lX(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new y_(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),n=i[i.length-1];if(t!==0)for(let s=0,r=i.length;s<r;++s)i[s]-=t;return new Gs(this.flatCoordinates.slice(t,n),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,n=[];let s=0;for(let r=0,l=i.length;r<l;++r){const u=i[r].slice(),d=u[u.length-1];if(s!==0)for(let g=0,y=u.length;g<y;++g)u[g]-=s;const h=new Gs(t.slice(s,d),e,u);n.push(h),s=d}return n}getType(){return"MultiPolygon"}intersectsExtent(e){return hX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=IP(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const n=i[i.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}const LR=Jo();class pl{constructor(e,t,i,n,s,r){this.styleFunction,this.extent_,this.id_=r,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?ep(this.flatCoordinates_):k5(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Ru(this.getExtent());this.flatInteriorPoints_=J5(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=mX(this.flatCoordinates_,this.ends_),t=DO(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=TP(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Ow(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let n=0,s=i.length;n<s;++n){const r=i[n],l=Ow(e,t,r,2,.5);hn(this.flatMidpoints_,l),t=r}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Wi(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const n=Fr(i)/Fr(t);ku(LR,i[0],i[3],n,-n,0,0,0),Fd(this.flatCoordinates_,0,this.flatCoordinates_.length,2,LR,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new pl(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=hP((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let n;switch(this.type_){case"LineString":i.length=DC(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),n=[i.length];break;case"MultiLineString":n=[],i.length=SP(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,n);break;case"Polygon":n=[],i.length=j5(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,n);break}return n&&(this.simplifiedGeometry_=new pl(this.type_,i,n,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}pl.prototype.getFlatCoordinates=pl.prototype.getOrientedFlatCoordinates;class Fw{constructor(e){this.rbush_=new HP(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[ei(t)]=i}load(e,t){const i=new Array(t.length);for(let n=0,s=t.length;n<s;n++){const r=e[n],l=t[n],u={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:l};i[n]=u,this.items_[ei(l)]=u}this.rbush_.load(i)}remove(e){const t=ei(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[ei(t)],n=[i.minX,i.minY,i.maxX,i.maxY];zm(n,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(n){return n.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let n=0,s=e.length;n<s;n++)if(i=t(e[n]),i)return i;return i}isEmpty(){return Hm(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Pc(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class YT extends eu{constructor(e){super(),this.projection=Wi(e.projection),this.attributions_=RR(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,n){t.viewResolver=i,t.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=RR(e),this.changed()}setState(e){this.state_=e,this.changed()}}function RR(a){return a?typeof a=="function"?a:(Array.isArray(a)||(a=[a]),e=>a):null}const Do={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Gh extends oo{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class lo extends YT{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=T1,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(_n(this.format_,"`format` must be set when `url` is set"),this.loader_=MR(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Ase;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Fw:null,this.loadedExtentsRtree_=new Fw,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,n;Array.isArray(e.features)?n=e.features:e.features&&(i=e.features,n=i.getArray()),!t&&i===void 0&&(i=new to(n)),n!==void 0&&this.addFeaturesInternal(n),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=ei(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Gh(Do.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof pl||(this.featureChangeKeys_[e]=[xa(t,Ka.CHANGE,this.handleFeatureChange_,this),xa(t,Ym.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const n=String(t.getId());if(!(n in this.idIndex_))this.idIndex_[n]=t;else if(t instanceof pl){const s=this.idIndex_[n];s instanceof pl?Array.isArray(s)?s.push(t):this.idIndex_[n]=[s,t]:i=!1}else i=!1}return i&&(_n(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],n=[];for(let s=0,r=e.length;s<r;s++){const l=e[s],u=ei(l);this.addToIndex_(u,l)&&i.push(l)}for(let s=0,r=i.length;s<r;s++){const l=i[s],u=ei(l);this.setupChangeEvents_(u,l);const d=l.getGeometry();if(d){const h=d.getExtent();t.push(h),n.push(l)}else this.nullGeometryFeatures_[u]=l}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(Do.ADDFEATURE))for(let s=0,r=i.length;s<r;s++)this.dispatchEvent(new Gh(Do.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Do.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(Do.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(js.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(js.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(mn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Gh(Do.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(n){const s=n.getGeometry();if(s instanceof pl||s.intersectsCoordinate(e))return t(n)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const n=i.getGeometry();if(n instanceof pl||n.intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Hm(this.nullGeometryFeatures_)||hn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const n=iP(e,t);return[].concat(...n.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],n=e[1];let s=null;const r=[NaN,NaN];let l=1/0;const u=[-1/0,-1/0,1/0,1/0];return t=t||wp,this.featuresRtree_.forEachInExtent(u,function(d){if(t(d)){const h=d.getGeometry(),g=l;if(l=h instanceof pl?0:h.closestPointXY(i,n,r,l),l<g){s=d;const y=Math.sqrt(l);u[0]=i-y,u[1]=n-y,u[2]=i+y,u[3]=n+y}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=ei(t),n=t.getGeometry();if(!n)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const r=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(r,t)):this.featuresRtree_&&this.featuresRtree_.update(r,t)}const s=t.getId();if(s!==void 0){const r=s.toString();this.idIndex_[r]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[r]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Gh(Do.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:ei(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Hm(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const n=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let r=0,l=s.length;r<l;++r){const u=s[r];n.forEachInExtent(u,function(h){return yc(h.extent,u)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Gh(Do.FEATURESLOADSTART)),this.loader_.call(this,u,t,i,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new Gh(Do.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Gh(Do.FEATURESLOADERROR))}),n.insert(u,{extent:u.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(n){if(zm(n.extent,e))return n});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,n=e.length;i<n;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=ei(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(mn),delete this.featureChangeKeys_[t];const n=e.getId();if(n!==void 0){const s=n.toString(),r=this.idIndex_[s];r===e?delete this.idIndex_[s]:Array.isArray(r)&&(r.splice(r.indexOf(e),1),r.length===1&&(this.idIndex_[s]=r[0]))}return delete this.uidIndex_[t],this.hasListener(Do.REMOVEFEATURE)&&this.dispatchEvent(new Gh(Do.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){_n(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(MR(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class KT{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Di,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Wi(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Wi(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Da()}readFeature(e,t){return Da()}readFeatures(e,t){return Da()}readGeometry(e,t){return Da()}readProjection(e){return Da()}writeFeature(e,t){return Da()}writeFeatures(e,t){return Da()}writeGeometry(e,t){return Da()}}function au(a,e,t){const i=t?Wi(t.featureProjection):null,n=t?Wi(t.dataProjection):null;let s=a;if(i&&n&&!Od(i,n)){e&&(s=a.clone());const r=e?i:n,l=e?n:i;r.getUnits()==="tile-pixels"?s.transform(r,l):s.applyTransform(h_(r,l))}if(e&&t&&t.decimals!==void 0){const r=Math.pow(10,t.decimals),l=function(u){for(let d=0,h=u.length;d<h;++d)u[d]=Math.round(u[d]*r)/r;return u};s===a&&(s=a.clone()),s.applyTransform(l)}return s}const Mse={Point:Ln,LineString:Ki,Polygon:Gs,MultiPoint:$d,MultiLineString:Fu,MultiPolygon:y_};function Lse(a,e,t){return Array.isArray(e[0])?(RP(a,0,e,t)||(a=a.slice(),NA(a,0,e,t)),a):(eT(a,0,e,t)||(a=a.slice(),rw(a,0,e,t)),a)}function VO(a,e){const t=a.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>VO({...a,geometry:s})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const n=t.layout.length;return au(new pl(i,i==="Polygon"?Lse(t.flatCoordinates,t.ends,n):t.flatCoordinates,t.ends?.flat(),n,a.properties||{},a.id).enableSimplifyTransformed(),!1,e)}function jT(a,e){if(!a)return null;if(Array.isArray(a)){const i=a.map(n=>jT(n,e));return new jl(i)}const t=Mse[a.type];return au(new t(a.flatCoordinates,a.layout||"XY",a.ends),!1,e)}class Rse extends KT{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(I2(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(I2(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Da()}readFeaturesFromObject(e,t){return Da()}readGeometry(e,t){return this.readGeometryFromObject(I2(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Da()}readProjection(e){return this.readProjectionFromObject(I2(e))}readProjectionFromObject(e){return Da()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Da()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Da()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Da()}}function I2(a){if(typeof a=="string"){const e=JSON.parse(a);return e||null}return a!==null?a:null}class $l extends Rse{constructor(e){e=e||{},super(),this.dataProjection=Wi(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Wi(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const n=$T(i.geometry);if(this.featureClass===pl)return VO({geometry:n,id:i.id,properties:i.properties},t);const s=new Di;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&s.setGeometryName(i.geometry_name),s.setGeometry(jT(n,t)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){const i=e;let n=null;if(i.type==="FeatureCollection"){const s=e;n=[];const r=s.features;for(let l=0,u=r.length;l<u;++l){const d=this.readFeatureFromObject(r[l],t);d&&n.push(d)}}else n=[this.readFeatureFromObject(e,t)];return n.flat()}readGeometryFromObject(e,t){return kse(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=Wi(t.properties.name);else if(t.type==="EPSG")i=Wi("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},n=e.getId();if(n!==void 0&&(i.id=n),!e.hasProperties())return i;const s=e.getProperties(),r=e.getGeometry();return r&&(i.geometry=S3(r,t),delete s[e.getGeometryName()]),Hm(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let n=0,s=e.length;n<s;++n)i.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return S3(e,this.adaptOptions(t))}}function $T(a,e){if(!a)return null;let t;switch(a.type){case"Point":{t=Gse(a);break}case"LineString":{t=Wse(a);break}case"Polygon":{t=Bse(a);break}case"MultiPoint":{t=Fse(a);break}case"MultiLineString":{t=Ose(a);break}case"MultiPolygon":{t=Nse(a);break}case"GeometryCollection":{t=Pse(a);break}default:throw new Error("Unsupported GeoJSON type: "+a.type)}return t}function kse(a,e){const t=$T(a);return jT(t,e)}function Pse(a,e){return a.geometries.map(function(i){return $T(i)})}function Gse(a){const e=a.coordinates;return{type:"Point",flatCoordinates:e,layout:uf(e.length)}}function Wse(a){const e=a.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:uf(e[0]?.length||2)}}function Ose(a){const e=a.coordinates,t=e[0]?.[0]?.length||2,i=[],n=mb(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:n,layout:uf(t)}}function Fse(a){const e=a.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:uf(e[0]?.length||2)}}function Nse(a){const e=a.coordinates,t=[],i=e[0]?.[0]?.[0].length||2,n=IP(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:n,layout:uf(i)}}function Bse(a){const e=a.coordinates,t=[],i=e[0]?.[0]?.length,n=mb(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:n,layout:uf(i)}}function S3(a,e){a=au(a,!0,e);const t=a.getType();let i;switch(t){case"Point":{i=Hse(a);break}case"LineString":{i=Vse(a);break}case"Polygon":{i=Xse(a,e);break}case"MultiPoint":{i=zse(a);break}case"MultiLineString":{i=Zse(a);break}case"MultiPolygon":{i=Use(a,e);break}case"GeometryCollection":{i=Dse(a,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function Dse(a,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:a.getGeometriesArray().map(function(i){return S3(i,e)})}}function Vse(a,e){return{type:"LineString",coordinates:a.getCoordinates()}}function Zse(a,e){return{type:"MultiLineString",coordinates:a.getCoordinates()}}function zse(a,e){return{type:"MultiPoint",coordinates:a.getCoordinates()}}function Use(a,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:a.getCoordinates(t)}}function Hse(a,e){return{type:"Point",coordinates:a.getCoordinates()}}function Xse(a,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:a.getCoordinates(t)}}const qse="searchLayer",kR=17;class Yse{map;featureLayer;init(e){this.map=e,this.createFeatureLayer()}createFeatureLayer(){this.featureLayer=new bs({source:new lo,zIndex:1e3});const e=new ji({color:[255,255,0,.6]}),t=new Li({color:[255,155,55,1],width:3}),i=new Qr({radius:10,fill:e,stroke:t});this.featureLayer.set("cyLayerType",qse),this.featureLayer.setStyle(function(n){const s=n.get("color")||"#ffcc33",r=n.get("width")||3,l=[new $a({fill:new ji({color:[255,255,0,.6]})}),new $a({stroke:new Li({color:"#ffffff",width:5})}),new $a({stroke:new Li({color:s,width:r})})],u=n.getGeometry?.()?.getType?.();return u==="Point"||u==="MultiPoint"?[new $a({image:i})]:l}),this.map.addLayer(this.featureLayer)}clearFeatures(){this.featureLayer.getSource()?.clear()}fitFeatures(e,t,i){const n={dataProjection:i||Wu,featureProjection:this.map.getView().getProjection()},s=new $l().readFeatures({type:"FeatureCollection",features:e},n);if(s.length>0){let r=s[0].getGeometry()?.getExtent()||[0,0,0,0];for(const l of s){const u=l.getGeometry()?.getExtent()||[0,0,0,0];r=vp(r,u)}if(r){const l={size:this.map.getSize(),maxZoom:t||kR};this.map.getView().fit(r,l)}}}isGeoJsonArray(e){return e.length>0&&typeof e[0].type=="string"}isFeatureArray(e){return e.length>0&&typeof e[0].getGeometry=="function"}highlightFeatures(e,t,i,n){if(this.clearFeatures(),e!=null){this.map.getLayers().getArray().indexOf(this.featureLayer)===-1&&this.map.addLayer(this.featureLayer);const s={dataProjection:n||Wu,featureProjection:this.map.getView().getProjection()};let r=[];if(this.isGeoJsonArray(e)?r=new $l().readFeatures({type:"FeatureCollection",features:e},s):this.isFeatureArray(e)&&(r=e),r.length>0){let l=r[0].getGeometry()?.getExtent()||[0,0,0,0];for(const u of r){const d=u.getGeometry()?.getExtent()||[0,0,0,0];l=vp(l,d),u.getId()==null&&u.setId(void 0),u.getGeometry()?.getType()==="GeometryCollection"?u.getGeometry().getGeometriesArray().forEach(g=>{const y=u.clone();y.setGeometry(g),this.featureLayer.getSource()?.addFeature(y)}):this.featureLayer.getSource()?.addFeature(u)}if(t&&l){const u={size:this.map.getSize(),maxZoom:i||kR};this.map.getView().fit(l,u)}}}}}const xd=new Yse;function S2(a,e){return a.indexOf(e)>=0}function ZO(){function a(s,r,l,u=!1,d=!1){let h="",g=l;if(l==="EPSG:3263*"){const x=fr(s,r,"EPSG:4326");g=Math.floor(x[0])>=6?"EPSG:32632":"EPSG:32631"}const y=fr(s,r,g);switch(g){case"EPSG:2169":h=a0(y,"{x} E | {y} N",0);break;case"EPSG:4326":if(u){const x=e(y),C=x.split(" ").slice(0,4).join(" ");h=`${x.split(" ").slice(4,8).join(" ")} | ${C}`}else if(d){const x=t(y),C=x.split(" ").slice(0,3).join(" ");h=`${x.split(" ").slice(3,6).join(" ")} | ${C}`}else h=a0(y,"{x} E | {y} N",5);break;case"EPSG:32632":h=a0(y,"{x} | {y} (UTM32N)",0);break;case"EPSG:32631":h=a0(y,"{x} | {y} (UTM31N)",0);break;default:h=a0(y,"{x} E | {y} N",0);break}return h}function e(s){return s?i(s[1],"NS")+" "+i(s[0],"EW"):""}function t(s){return s?n(s[1],"NS")+" "+n(s[0],"EW"):""}function i(s,r){const l=(s+180)%360-180,u=Math.abs(3600*l);return Math.floor(u/3600)+" "+Hh(Math.floor(u/60%60),2)+" "+Hh(Math.floor(u%60),2)+","+Math.floor((u-(u<0?Math.ceil(u):Math.floor(u)))*10)+" "+r.charAt(l<0?1:0)}function n(s,r){const l=(s+180)%360-180,d=Math.abs(3600*l)/3600,h=(d-Math.floor(d))*60,g=(h%1).toString();return Math.floor(d)+" "+Hh(Math.floor(h),2)+","+g.substring(g.indexOf(".")+1,g.indexOf(".")+6)+" "+r.charAt(l<0?1:0)}return{coordinateString:a}}function Kse(a,e){const t=JSON.parse("[2.6, 47.7, 8.6, 51]"),i=db(t,"EPSG:4326",e);a=a.replace(/,/gi,".");const n=[],s={"EPSG:32631":{regex:/(\d{6,6}[,.]?\d{0,3})\s*?\W*(\d{7,7}[,.]?\d{0,3})\s*?/,label:"UTM31N",epsgCode:"EPSG:32631"},"EPSG:32632":{regex:/(\d{6,6}[,.]?\d{0,3})\s*?\W*(\d{7,7}[,.]?\d{0,3})\s*?/,label:"UTM32N",epsgCode:"EPSG:32632"},"EPSG:2169":{regex:/(\d{4,6}[,.]?\d{0,3})\s*([E|N])?\W*(\d{4,6}\s*[,.|]?\s*?\d{0,3})\s*([E|N])?/,label:"LUREF",epsgCode:"EPSG:2169"},"EPSG:2169:V2":{regex:/(\d{4,6})\s*([E|N])?\s*[,.|]?\s*(\d{4,6})\s*([E|N])?/,label:"LUREF",epsgCode:"EPSG:2169"},"EPSG:4326":{regex:/(\d{1,2}[,.]\d{1,6})\d*\s?(latitude|lat|N|longitude|long|lon|E|east|est)?\W*(\d{1,2}[,.]\d{1,6})\d*\s?(longitude|long|lon|E|latitude|lat|N|north|nord)?/i,label:"long/lat WGS84",epsgCode:"EPSG:4326"},"EPSG:4326:DMS":{regex:/([NSEW])?(-)?(\d+(?:\.\d+)?)[:d\s]?\s?(?:(\d+(?:\.\d+)?)[':]\s?(?:(\d{1,2}(?:\.\d+)?)(?:"|||'')?)?)?\s?([NSEW])?/i,label:"long/lat WGS84 DMS",epsgCode:"EPSG:4326"}},r=["LATITUDE","LAT","N","NORTH","NORD"],l=["LONGITUDE","LONG","LON","E","EAST","EST"];for(const u in s){let d=s[u].regex.exec(a);if(u==="EPSG:2169"&&(a.match(/\./g)||[]).length===1&&(d=null),d){const h=s[u].epsgCode;let g=!1,y,x;if(h==="EPSG:32631"||h==="EPSG:32632"){if(d[1]&&d[2]){const C=[parseFloat(d[1].replace(",",".")),parseFloat(d[2].replace(",","."))],I=fr(C,h,"EPSG:4326");(Math.floor(I[0])===5||Math.floor(I[0])===6)&&(y=parseFloat(d[1].replace(",",".")),x=parseFloat(d[2].replace(",",".")))}}else if(u==="EPSG:4326"||u==="EPSG:2169"||u==="EPSG:2169:V2")d[2]&&d[4]?S2(r,d[2].toUpperCase())&&S2(l,d[4].toUpperCase())?(y=parseFloat(d[3].replace(",",".")),x=parseFloat(d[1].replace(",","."))):S2(r,d[4].toUpperCase())&&S2(l,d[2].toUpperCase())&&(y=parseFloat(d[1].replace(",",".")),x=parseFloat(d[3].replace(",","."))):(!d[2]||d[2]==="|")&&d[4]===void 0&&(y=parseFloat(d[1].replace(",",".")),x=parseFloat(d[3].replace(",",".")));else if(u==="EPSG:4326:DMS"){const C=d;let I;C[1]?(C[6]="",I=a.substring(C[0].length-1).trim()):I=a.substring(C[0].length).trim();const A=PR(C);if(A!==void 0){const E=s[u].regex.exec(I),L=E?PR(E):void 0;L!==void 0&&(typeof A.latLon>"u"&&!isNaN(A.decDeg)&&!isNaN(L.decDeg)&&(A.latLon="lat"),A.latLon==="lat"?(x=A.decDeg,y=L.decDeg):(y=A.decDeg,x=L.decDeg),g=!0)}}if(y!==void 0&&x!==void 0){const C=new Ln([y,x]).transform(h,e),I=new Ln([x,y]).transform(h,e);let A=null;if(i&&kc(i,C.getCoordinates())?A=new Di(C):h==="EPSG:4326"&&i&&kc(i,I.getCoordinates())&&(A=new Di(I)),A){const E=A.getGeometry(),{coordinateString:L}=ZO(),G=L(E.getCoordinates(),e,h,g,!1);A.set("label",G),A.set("epsgLabel",s[u].label),n.push(A)}}}}return n}function PR(a){const e={"-":-1,N:1,S:-1,E:1,W:-1},t={N:"lat",S:"lat",E:"lon",W:"lon"},i=e[a[2]]||e[a[1]]||e[a[6]]||1;if(a[3]===void 0)return;const n=Number(a[3]),s=a[4]!==void 0?Number(a[4]):0,r=a[5]!==void 0?Number(a[5]):0,l=t[a[1]]||t[a[6]];return{decDeg:i*(n+s/60+r/3600),latLon:l}}const Dd=()=>({bg_layers:[{icon_id:"route",vector_id:"roadmap",simple_style_class:"road",medium_style_class:"road",expert_style_class:"maputnik",id:556,is_default:!0},{icon_id:"topo",vector_id:"topomap",medium_style_class:"topo",expert_style_class:"maputnik",id:529},{icon_id:"topo_bw",vector_id:"topomap_gray",medium_style_class:"topo",expert_style_class:"maputnik",id:502},{icon_id:"ortho",id:530},{icon_id:"hybrid",id:501},{icon_id:"blank",id:0}],bg_layer_theme_defaults:{tourisme:502},simple_styles:{road:[{unlocalized_label:"Light grey",hillshade:!1,colors:["#ffffff","#ffffff","#d6e0d7","#e1e1e1","#cccccc","#f2f2f2"],selected:!1},{unlocalized_label:"Dark grey",hillshade:!1,colors:["#808080","#808080","#494b4a","#505052","#232426","#454545"],selected:!1},{unlocalized_label:"Dark sand",hillshade:!1,colors:["#9e9375","#9e9375","#6b6249","#403928","#b8aa84","#1a1814"],selected:!1},{unlocalized_label:"Kids",hillshade:!1,colors:["#f9c50d","#ffffff","#839836","#d6d3ce","#2a5ba8","#eeeeee"],selected:!1},{unlocalized_label:"Light mauve",hillshade:!1,colors:["#f3edf5","#f3edf5","#9d7da8","#caa9d1","#613b5c","#e5d3e6"],selected:!1},{unlocalized_label:"Light Blue",hillshade:!1,colors:["#dceaf5","#dceaf5","#5598cf","#81b7e3","#3b576e","#b6cde0"],selected:!1}]},medium_default_styles:{road:[{label:"Roads primary",color:"#f7f7f7",lines:["lu_road_trunk_primary","lu_bridge_major","lu_tunnel_major","lu_road_major_motorway"],visible:!0},{label:"Roads secondary",color:"#f7f7f7",lines:["lu_road_minor","lu_road_secondary_tertiary","lu_bridge_minor","lu_road_path","lu_bridge_path","lu_bridge_railway case","lu_bridge_path case"],visible:!0},{label:"Vegetation",color:"#B8D293",opacity:"1",fills:["lu_landcover_wood","lu_landcover_grass","lu_landuse_stadium","lu_landuse_cemetery"],visible:!0},{label:"Buildings",color:"#D6AA85",opacity:"1",fillExtrusions:["lu_building-3d_public","lu_building-3d"],fills:["lu_building","lu_building_public"],lines:["lu_bridge_railway","lu_railway","lu_tunnel_railway"],visible:!0},{label:"Water",color:"#94c1e1",lines:["lu_waterway","lu_waterway_tunnel","lu_waterway_intermittent"],fills:["lu_water"],visible:!0},{label:"Background",color:"#e7e7e7",backgrounds:["background"],visible:!0},{label:"Hillshade",hillshades:["hillshade"],visible:!0}],topo:[{label:"Primary Names",symbols:["lu_place-label_other","lu_place-label_city","lu_place-label_canton","lu_country-label-other","lu_country-label","place_label_other","place_label_city","country_label-other","country_label"],visible:!0},{label:"Secondary Names",symbols:["lu_place-label_isolated","lu_place-label_locality_forest","lu_place-label_locality_lieudit"],visible:!0},{label:"Transport",lines:["lu_tunnel_track-casing","lu_tunnel_major_motorway-casing","lu_tunnel_railway_transit","lu_tunnel_railway","lu_tunnel_railway-hatching","lu_tunnel_path","lu_tunnel_track","lu_tunnel_minor","lu_tunnel_major_motorway","lu_tunnel_secondary_tertiary","lu_tunnel_trunk_primary","lu_road_track-casing","lu_road_minor-casing","lu_road_major_motorway-casing","lu_road_secondary_tertiary-casing","lu_road_trunk_primary-casing","lu_road_pier","lu_road_path","lu_road_track","lu_road_minor","lu_road_major_motorway","lu_road_secondary_tertiary","lu_road_trunk_primary","lu_tram","lu_tram-hatching","lu_railway_transit","lu_railway","lu_railway-hatching","lu_bridge_railway-casing","lu_bridge_track-casing","lu_bridge_path-casing","lu_bridge_minor-casing","lu_bridge_major_motorway-casing","lu_bridge_secondary_tertiary-casing","lu_bridge_trunk_primary-casing","lu_bridge_railway","lu_bridge_path","lu_bridge_track","lu_bridge_minor","lu_bridge_major_motorway","lu_bridge_secondary_tertiary","lu_bridge_trunk_primary","tunnel_track-casing","tunnel_major_motorway-casing","tunnel_railway_transit","tunnel_railway_transit-hatching","tunnel_railway","tunnel_railway-hatching","tunnel_path","tunnel_track","tunnel_minor","tunnel_major_motorway","tunnel_secondary_tertiary","tunnel_trunk_primary","road_track-casing","road_minor-casing","road_major_motorway-casing","road_secondary_tertiary-casing","road_trunk_primary-casing","road_pier","road_path","road_track","road_minor","road_major_motorway","road_secondary_tertiary","road_trunk_primary","railway-transit","railway-transit-hatching","railway","railway-hatching","bridge_railway-casing","bridge_path-casing","bridge_track_casing","bridge_minor-casing","bridge_major_motorway-casing","bridge_secondary_tertiary-casing","bridge_trunk_primary-casing","bridge_railway","bridge_path","bridge_track","bridge_minor","bridge_major_motorway","bridge_secondary_tertiary","bridge_trunk_primary"],symbols:["lu_road_major-label","lu_motorway-shield","lu_road-shield"],visible:!0},{label:"Vegetation",fills:["lu_landuse_stadium","lu_landuse_cemetery","lu_landuse_gras","lu_landuse_park","lu_landuse_park-outline","lu_landuse_vineyard","lu_landuse_orchard","lu_landuse_wood","landcover_grass","landcover_wood"],visible:!0},{label:"Electricity",fills:["lu_power_station","lu_power_pylone"],lines:["lu_power_line","lu_power_station-outline"],symbols:["lu_power_station-label","lu_eolienne"],visible:!0},{label:"Contours and Height Points",lines:["lu_contour-100","lu_contour-50","lu_contour-20","lu_contour-10","lu_contour"],symbols:["lu_contour-label-100","lu_contour-label-20","lu_apex-label"],visible:!0},{label:"Hillshade",hillshades:["lu_hillshade"],visible:!0}]},http_bg_server:"wmts{1-2}",https_bg_server:"wmts{3-4}",bg_wmts_server_path:"mapproxy_4_v3/wmts/{Layer}",bg_wmts_tile_template:"{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}",bg_layer_projection:"EPSG:3857",olcs_extent:[5.31,49.38,6.64,50.21],olcs_extent_projection:"EPSG:3857",bg_layer_resolutions:[156543.033928,78271.516964,39135.758482,19567.879241,9783.9396205,4891.96981025,2445.98490513,1222.99245256,611.496226281,305.748113141,152.87405657,76.4370282852,38.2185141426,19.1092570713,9.55462853565,4.77731426782,2.38865713391,1.19432856696,.597164283478,.298582141739,.1492910708695,.07464553543475],bg_matrix_ids:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21"]}),Nw={name:"blank",id:0};var Vd=(a=>(a.WMS="WMS",a.WFS="WFS",a.WMTS="WMTS",a.BG_WMTS="BG WMTS",a.BG_MVT="BG MVT",a["3D"]="3D",a.TILE_WMS="tileWMS",a))(Vd||{});function iI(){const a=ri(),{myMapId:e}=xt(a),t=Al(),i=Vi(),n=no(),s=St(()=>{if(!e.value){const g=Bn().theme?.name;if(g)return Dd().bg_layer_theme_defaults[g]||u()}return u()});function r(g,y){const x=y?t.findBgLayerByName(y)??null:g?t.findBgLayerById(g)??null:null;l(x)}function l(g){if(g){if(g.type===Vd.WMTS||g.type===Vd.BG_WMTS)g.type="BG WMTS";else throw new Error(`Only WMTS and MVT BG layers are currently implemented (not ${g.type} for ${g.name})`);n.handleExclusionLayers(g),i.setBgLayer(n.initLayer(g))}else i.setBgLayer(null)}function u(){return h().find(g=>g.is_default)?.id||Nw.id}function d(){return Nw.id}function h(){return Dd().bg_layers}return{setBgLayer:r,setMapBackground:l,getBgLayersFromConfig:h,getNullId:d,getDefaultSelectedId:u,defaultSelectedBgId:s}}const jse=["aria-checked","aria-label"],$se={class:"ml-1 hover:underline"},c0=rt({__name:"filter-toggle",props:{label:{},checked:{type:Boolean}},emits:["toggle"],setup(a,{emit:e}){const t=e;function i(){t("toggle")}return(n,s)=>(U(),se("button",{class:"w-full text-left filter-toggle-btn",onClick:i,role:"checkbox","aria-checked":a.checked,"aria-label":a.label,tabindex:"0"},[P("i",{class:Fa(["fa-solid",a.checked?"fa-check-square":"fa-square"])},null,2),P("span",$se,K(a.label),1)],8,jse))}}),px={cms:!0,layers:!0,address:!1,parcels:!1,localite:!1,lieudit:!1,commune:!1,flik:!1,hydro:!1,biotopes:!1,extent:!1,activeLayers:!0},_l=Ye(Object.assign({},localStorage.getItem("searchFacets")?JSON.parse(localStorage.getItem("searchFacets")):px)),Jse={address:"Adresses",parcels:"Parcelles cadastrales",localite:"Localits",lieudit:"Lieux-dits",commune:"Communes",flik:"lments agricoles",hydro:"Hydrographie",biotopes:"Biotopes"},GR={address:["Adresse","nom_de_rue"],parcels:["Parcelle"],localite:["Localit"],lieudit:["lieu_dit"],commune:["Commune"],flik:["FLIK","asta esp","FLIK_Provisoire"],hydro:["hydro","hydro_km"],biotopes:["biotope"]},Qse={class:"filter-panel bg-secondary text-tertiary"},eoe={class:"flex"},toe=rt({__name:"filter-panel",emits:["close"],setup(a,{expose:e,emit:t}){const i=Object.keys(px).length,{t:n}=Ct(),s=t;function r(y){_l.value[y]=!_l.value[y]}function l(){localStorage.setItem("searchFacets",JSON.stringify(_l.value)),s("close")}function u(){_l.value=Object.assign({},px)}const d=Ye(null);function h(y){const x=document.querySelectorAll(".filter-toggle-btn")[y];x&&x.focus()}function g(y){if(y.stopPropagation(),d.value===null&&(d.value=-1),y.key==="Tab"&&y.shiftKey&&d.value<=0){d.value=-1;return}if(y.key==="Tab"&&!y.shiftKey&&d.value>=i-1){d.value=-1;return}if(y.key==="ArrowDown"||y.key==="Tab"&&!y.shiftKey)y.preventDefault(),d.value<i-1&&(d.value++,h(d.value));else if(y.key==="ArrowUp"||y.key==="Tab"&&y.shiftKey)y.preventDefault(),d.value>0&&(d.value--,h(d.value));else if(y.key==="Enter"||y.key===" "||y.code==="Space"){y.preventDefault();const x=Object.keys(px);r(x[d.value])}}return e({focusedIndex:d,focusItem:h}),(y,x)=>(U(),se("div",Qse,[P("h3",null,K(R(n)("Paramtres de recherche")),1),P("button",{class:"close-panel",onClick:x[0]||(x[0]=C=>y.$emit("close"))},""),P("div",{onKeydown:g},[P("h4",null,K(R(n)("Inclure")),1),gt(c0,{label:R(n)("Pages du site"),checked:R(_l).cms,onToggle:x[1]||(x[1]=C=>r("cms"))},null,8,["label","checked"]),gt(c0,{label:R(n)("Couches"),checked:R(_l).layers,onToggle:x[2]||(x[2]=C=>r("layers"))},null,8,["label","checked"]),x[7]||(x[7]=P("hr",{class:"section-divider"},null,-1)),P("h4",null,K(R(n)("Limiter la recherche ")),1),(U(!0),se(Tt,null,gi(R(Jse),(C,I)=>(U(),Lt(c0,{key:I,label:R(n)(C),checked:R(_l)[I],onToggle:A=>r(I)},null,8,["label","checked","onToggle"]))),128)),x[8]||(x[8]=P("hr",{class:"section-divider"},null,-1)),P("h4",null,K(R(n)("tendue")),1),gt(c0,{label:R(n)("Uniquement dans la partie actuellement visible de la carte"),checked:R(_l).extent,onToggle:x[3]||(x[3]=C=>r("extent"))},null,8,["label","checked"]),x[9]||(x[9]=P("hr",{class:"section-divider"},null,-1)),P("h4",null,K(R(n)("Avance")),1),gt(c0,{label:R(n)("Chercher dans les couches actives"),checked:R(_l).activeLayers,onToggle:x[4]||(x[4]=C=>r("activeLayers"))},null,8,["label","checked"]),x[10]||(x[10]=P("hr",{class:"section-divider"},null,-1))],32),P("div",eoe,[P("button",{class:"lux-btn mr-auto",onClick:x[5]||(x[5]=C=>u())},K(R(n)("Rinitialiser")),1),P("button",{class:"lux-btn ml-auto",onClick:x[6]||(x[6]=C=>l())},K(R(n)("Sauvegarder la recherche")),1)])]))}}),aoe=ir(toe,[["__scopeId","data-v-7268e4a2"]]),nI=Ao("metadata",()=>{const a=Ai();function e(i){a.value=i}function t(){a.value=void 0}return{metadataLayer:a,setMetadataLayer:e,clearMetadataLayer:t}},{}),ioe={class:"search-dropdown"},noe={class:"search-input-wrapper"},roe=["placeholder"],soe={role:"listbox"},ooe={key:0,class:"dropdown-title"},loe=["onClick","onKeydown","aria-selected"],uoe=["innerHTML"],coe={key:0,class:"search-result-routing"},doe=["onClick"],hoe=["onClick","onKeydown"],_oe={key:1,class:"loading-indicator"},moe=rt({__name:"search-dropdown",setup(a){const{setMetadataLayer:e}=nI(),t=St(()=>kt.value?"var(--color-tertiary)":"#ffffff"),{findThemeNamesByLayerId:i}=Al(),{t:n,i18next:s}=Ct(),{maxZoom:r}=xt(Vi()),l=Ye(),u=Ye(""),d=Ye(!1),h=Ye([]),g=Ye(!1),y={Adresse:["addresses"],Parcelle:["parcels","parcels_labels"],Parcelle_go:["parcels_go","parcels_labels_go"],Parcelle_prof:["parcels_prof","parcels_labels"],lieu_dit:["toponymes"],FLIK:["asta_flik_parcels"],FLIK_Provisoire:["asta_flik_parcels_provisoire"],asta_esp:["asta_esp_esp"],nom_de_rue:["roads","roads_labels"]};let x=0;const C=["Addresses","Parcelles","Features","Layers","Website Pages","Background Layers","Coordinates"],I=St(()=>h.value.slice().sort((ie,Ce)=>{const Ee=C.indexOf(ie.groupKey),Ne=C.indexOf(Ce.groupKey);return(Ee===-1?999:Ee)-(Ne===-1?999:Ne)}));function A(ie){const{theme:Ce}=Bn();let Ee=ie;ie==="Parcelle"&&typeof Ce=="string"&&["go","prof"].includes(Ce)&&(Ee=Ee+"_"+Ce);const Ne=y[Ee]||[],{findByName:Ve}=Al(),$e=no();Ne.forEach(function(ht){const _t=Ve(ht);_t!==void 0&&$e.toggleLayer(_t.id,!0,!1,!1)})}function E(ie,Ce){const Ee=ie.features.filter(Ve=>Ve.properties.layer_name==="Parcelle"),Ne=ie.features.filter(Ve=>Ve.properties.layer_name!=="Parcelle");Ee.length&&h.value.push({header:n("Parcelles"),groupKey:"Parcelles",selectResult:Ce,results:Ee.map(function(Ve){return{label:Ve.properties.label+(Ve.properties.layer_name?` (${n(Ve.properties.layer_name)})`:""),layer_name:Ve.properties.layer_name,entry:Ve,showRoutingButton:!0,showInfoButton:!1}})}),Ne.length&&h.value.push({header:n("Addresses"),groupKey:"Addresses",selectResult:Ce,results:Ne.map(function(Ve){return{label:Ve.properties.label+(Ve.properties.layer_name?` (${n(Ve.properties.layer_name)})`:""),layer_name:Ve.properties.layer_name,entry:Ve,showRoutingButton:!0,showInfoButton:!1}})})}function L(ie,Ce){h.value.push({header:n("Features"),groupKey:"Features",selectResult:Ce,results:ie.features.map(function(Ee){return{label:Ee.properties.label+(Ee.properties.layer_name?` (${n(Ee.properties.layer_name)})`:""),layer_name:Ee.properties.layer_name,entry:Ee,showRoutingButton:!1,showInfoButton:!1}})})}function G(ie){const Ce=ie.target;Ce.tagName==="A"&&Ce.hasAttribute("data-theme")&&(ie.preventDefault(),F(Ce.getAttribute("data-theme")))}function F(ie){Bn().setTheme(ie),ga()}function B(ie,Ce){h.value.push({header:n("Layers"),groupKey:"Layers",selectResult:Ce,results:ie.map(function(Ee){const Ne=fe(Ee.layer_id);return{label:n(Ee.name)+Ne,layer_id:Ee.layer_id,name:Ee.name,language:Ee.language,showRoutingButton:!1,showInfoButton:!0}})})}function Z(ie){const{findAnyLayerById:Ce}=Al();if(ie.layer_id){const Ee=Ce(ie.layer_id);Ee&&e(Ee)}}function Y(ie){}function $(ie,Ce){h.value.push({header:n("Website Pages"),groupKey:"Website Pages",selectResult:Ce,results:ie.map(Ee=>({label:n(Ee.title),url:Ee.url,text:Ee.text,language:Ee.language,showRoutingButton:!1,showInfoButton:!1}))})}function te(ie){u.value=ie.label,xd.highlightFeatures([ie.entry],!0,r.value,qa().getOlMap().getView().getProjection().getCode())}function ce(ie){switch(u.value=ie.label,A(ie.layer_name),ie.layer_name){case"Parcelle":xd.highlightFeatures([ie.entry],!0,r.value);break;case"Adresse":xd.highlightFeatures([ie.entry],!0,r.value);break;default:xd.clearFeatures(),xd.fitFeatures([ie.entry],r.value)}ga()}function me(ie){iI().setBgLayer(ie.layer_id),ga()}function X(ie){no().toggleLayer(ie.layer_id,!0,!1,!1),ga()}function de(ie){window.open("https://www.geoportail.lu"+ie.url,"_blank"),ga(),u.value=ie.label}function N(ie){u.value=ie.label,xd.highlightFeatures([ie.entry],!0,r.value),ga()}function ne(ie,Ce){h.value.push({header:n("Background Layers"),groupKey:"Background Layers",selectResult:Ce,results:ie.map(Ee=>({label:n(Ee.name),layer_id:Ee.id,name:Ee.name,showRoutingButton:!1,showInfoButton:!0}))})}async function le(ie,Ce){return await(await Br(ie,Ce,"GET")).json()}async function _e(ie,Ce){if(!_l.value.activeLayers)return!1;let Ee={query:ie,limit:8,language:s.language},Ne=qa().getOlMap().getLayers().getArray().map($e=>$e.get("queryable_id")).filter($e=>$e!==void 0);if(Ee.layers=Ne.join(","),_l.value.extent){let $e=qa().getOlMap().getView().calculateExtent();Ee.extent=$e.join(",")}const Ve=await le("https://migration.geoportail.lu/featuresearch",Ee);Ce===x&&L(Ve,te)}async function ke(ie,Ce){let Ee={query:ie,limit:8},Ne=Object.keys(GR).filter($e=>_l.value[$e]).map($e=>GR[$e]).flat();if(Ne.length>0&&(Ee.layer=Ne.join(",")),_l.value.extent){let $e=db(qa().getOlMap().getView().calculateExtent(),"EPSG:3857","EPSG:4326");Ee.extent=$e.join(",")}const Ve=await le("https://migration.geoportail.lu/fulltextsearch",Ee);Ce===x&&E(Ve,ce)}async function Ie(ie,Ce){const Ne=await le("https://migration.geoportail.lu/layersearch",{query:ie,limit:8});Ce===x&&B(Ne,X)}async function re(ie,Ce){const Ne=await le("https://migration.geoportail.lu/cmssearch",{query:ie,limit:8});Ce===x&&$(Ne,de)}function Q(ie,Ce){const{bgLayers:Ee}=Bn();if(ie.length===0)return;const Ne=Ee.filter(Ve=>n(Ve.name).toLowerCase().includes(ie.toLowerCase()));Ce===x&&ne(Ne,me)}const J={backgroundsearch:{getData:Q},fulltextsearch:{getData:ke},layersearch:{getData:Ie},cmssearch:{getData:re},featuresearch:{getData:_e},coordinate:{getData:je}};function je(ie,Ce){if(Ce!==x)return;const Ee=ie,Ne=xd.map.getView().getProjection().getCode(),Ve=Kse(Ee,Ne);h.value.push({header:n("Coordinates"),groupKey:"Coordinates",selectResult:N,results:Ve.map(function($e){return{label:$e.get("label")+" ("+$e.get("epsgLabel")+")",layer_name:"Coordinates",entry:$e,showRoutingButton:!1,showInfoButton:!1}})})}async function Qe(ie,Ce){if(h.value=[],ie.length===0)return Je();g.value=!0,Nt(),await Promise.all(Object.entries(J).map(async([,Ee])=>{"getData"in Ee&&typeof Ee.getData=="function"&&Ee.getData(ie,Ce)})),Ce===x&&(g.value=!1,d.value=!0)}Rt(u,async ie=>{x++,Qe(ie,x)});function Je(){xd.clearFeatures(),u.value="",h.value=[],ga()}const kt=Ye(!1);Rt(kt,ie=>{ie&&so(()=>{l.value&&(l.value.focusedIndex=0,l.value.focusItem(0))})});function Pt(){if(kt.value){Nt();return}ga(),zt()}function zt(){kt.value=!0}function Nt(){kt.value=!1}function ga(){d.value=!1}const ta=Ye(null);function Fe(ie){const Ce=document.querySelectorAll(".dropdown-item")[ie];Ce&&Ce.focus()}function De(ie){if(ie.stopPropagation(),kt.value||!h.value.length)return;const Ce=h.value.flatMap(Ee=>Ee.results);if(ta.value===null&&(ta.value=0),ie.key==="ArrowDown")ie.preventDefault(),ta.value<Ce.length-1&&(ta.value++,Fe(ta.value));else if(ie.key==="ArrowUp")ie.preventDefault(),ta.value>0&&(ta.value--,Fe(ta.value));else if(ie.key==="Enter"||ie.key===" "||ie.code==="Space"){ie.preventDefault();let Ee=ta.value;for(const Ne of h.value){if(Ee<Ne.results.length){Ne.selectResult(Ne.results[Ee]);break}Ee-=Ne.results.length}}}function z(ie,Ce){let Ee=0;for(let Ne=0;Ne<ie;Ne++)Ee+=h.value[Ne].results.length;return Ee+=Ce,ta.value===Ee}const Ze=Ye(null);function Re(ie){(ie.key==="ArrowDown"||ie.key==="ArrowUp")&&d.value&&h.value.length&&(ie.preventDefault(),d.value&&(ta.value=0,so(()=>{Ze.value?.focus()})))}function fe(ie){const Ce=i(ie),{themeName:Ee}=xt(Bn());return Ce.map(Ne=>Ee.value!==Ne?`<br><a href="#" data-theme="${Ne}">(${n("open in theme")} ${n(Ne)})</a>`:"").join("")}return(ie,Ce)=>(U(),se("div",ioe,[P("div",noe,[Sa(P("input",{type:"text",placeholder:R(n)("Recherche adresse, parcelles, couches ..."),"onUpdate:modelValue":Ce[0]||(Ce[0]=Ee=>u.value=Ee),class:"w-full lux-input search-input",onKeydown:Re},null,40,roe),[[Vn,u.value]]),u.value.length?(U(),se("button",{key:0,onClick:Je,class:"clear-button"},"  ")):Ge("",!0),P("button",{class:"filter-button",onClick:Pt},[P("span",{class:"filter-icon",style:Nc({color:t.value})},null,4)])]),d.value&&h.value.some(Ee=>Ee.results.length>0)?(U(),se("div",{key:0,class:"dropdown",onKeydown:De,onClick:G,tabindex:"0",ref_key:"dropdownRef",ref:Ze},[P("ul",soe,[(U(!0),se(Tt,null,gi(I.value,(Ee,Ne)=>(U(),se("li",{key:Ne},[Ee.results.length>0?(U(),se("div",ooe,K(R(n)(Ee.header)),1)):Ge("",!0),P("ul",null,[(U(!0),se(Tt,null,gi(Ee.results,(Ve,$e)=>(U(),se("li",{key:$e,onClick:ht=>Ee.selectResult(Ve),class:Fa(["dropdown-item",{focused:z(Ne,$e)}]),tabindex:"0",onKeydown:$r(ht=>Ee.selectResult(Ve),["enter"]),role:"option","aria-selected":z(Ne,$e)},[P("span",{innerHTML:Ve.label},null,8,uoe),Ve.showRoutingButton?(U(),se("span",coe,[P("button",{class:"lux-btn-primary routing-button",onClick:_r(ht=>void 0,["stop"])},[...Ce[1]||(Ce[1]=[P("span",{class:"routing-icon"},null,-1)])],8,doe)])):Ge("",!0),Ve.showInfoButton?(U(),se("button",{key:1,class:"search-result-info self-start before:text-[.85rem] before:transform before:translate-y-[.1rem] before:inline-block before:content-['\\f129'] fa-solid fa-fw fa-fh fa-info",onClick:[ht=>Z(Ve),_r(ht=>Z(Ve),["stop"])],onKeydown:[$r(_r(ht=>Z(Ve),["stop"]),["enter"]),$r(_r(ht=>Z(Ve),["stop","prevent"]),["space"])]},null,40,hoe)):Ge("",!0)],42,loe))),128))])]))),128))])],544)):Ge("",!0),g.value?(U(),se("div",_oe,K(R(n)("Loading...")),1)):Ge("",!0),kt.value?(U(),Lt(aoe,{key:2,ref_key:"filterPanelRef",ref:l,onClose:Nt},null,512)):Ge("",!0)]))}}),WR=ir(moe,[["__scopeId","data-v-a0ea9508"]]),foe={class:"w-full h-14 flex bg-white shadow-header z-10 shrink-0"},goe={class:"grow flex justify-center items-center"},poe={class:"h-full flex"},yoe={class:"hidden md:flex"},boe={class:"hidden lg:inline-block"},voe={class:"block md:hidden"},xoe={class:"border-l-[1px] border-stone-300 h-full"},woe={class:"border-l-[1px] border-stone-300 h-full"},Coe=rt({__name:"header-bar",setup(a){const{t:e}=Ct(),t=ri(),{toggleAuthFormOpen:i,toggleThemeGrid:n}=t,{authFormOpened:s}=xt(t),{themeName:r}=xt(Bn()),{authenticated:l}=xt(Nu()),u=Ye(!1),d=Ye(!1);Rt(l,y=>y&&i(!1));function h(y){u.value=y,y&&i(!1)}function g(y){i(y),y&&(u.value=!1)}return(y,x)=>(U(),se("header",foe,[x[2]||(x[2]=P("div",{class:"flex-2 p-[5px]"},[P("img",{src:BG})],-1)),P("div",goe,[gt(WR,{class:"hidden md:block"}),d.value?(U(),Lt(WR,{key:0,class:"block md:hidden"})):Ge("",!0)]),P("div",null,[P("ul",poe,[P("li",yoe,[P("button",{class:Fa(["flex items-center before:font-icons before:text-3xl before:w-16 text-primary uppercase h-full mr-3",`before:content-${R(r)}`]),"data-cy":"selectedThemeIcon",onClick:x[0]||(x[0]=(...C)=>R(n)&&R(n)(...C))},[P("span",boe,K(R(e)(`${R(r)}`)),1)],2)]),P("li",voe,[P("button",{class:"lux-btn lux-dropdown-btn h-full",onClick:x[1]||(x[1]=C=>d.value=!d.value)},[P("span",{class:Fa(["before:font-icons before:text-3xl after:font-icons after:text-3xl",[{"lux-navbar-search-dropdown":!d.value},{"lux-navbar-search-close":d.value}]])},null,2)])]),P("li",xoe,[gt(Kre,{"data-cy":"langSelect",class:"flex-none h-full",isOpen:u.value,onToggleDropdown:h},null,8,["isOpen"])]),P("li",woe,[gt(DG,{"data-cy":"authFormIcon",class:"lux-navbar-dropdown lux-navbar-dropdown-auth h-full",enableClickOutside:!1,isOpen:R(s),onToggleDropdown:g},{default:Ht(()=>[gt(Aee,{class:"w-80"})]),_:1},8,["isOpen"])])])])]))}}),Ioe={class:"w-full h-14 flex items-center justify-center bg-orange-600 shadow-header z-10 shrink-0",role:"alert","aria-live":"polite"},Soe={class:"flex items-center gap-3 px-4"},Aoe={class:"text-white"},Toe={class:"font-semibold text-base","data-cy":"offlineHeaderMessage"},Eoe={class:"text-xs opacity-90 hidden sm:block"},Moe=rt({__name:"header-bar-offline",setup(a){const{t:e}=Ct();return(t,i)=>(U(),se("header",Ioe,[P("div",Soe,[i[0]||(i[0]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3"})],-1)),P("div",Aoe,[P("p",Toe,K(R(e)("You are currently disconnected")),1),P("p",Eoe,K(R(e)("Features requiring network connection are temporarily hidden")),1)]),i[1]||(i[1]=P("div",{class:"ml-auto hidden md:block opacity-80"},[P("img",{src:BG,alt:"Luxembourg Government",class:"h-8 brightness-0 invert"})],-1))])]))}}),Loe=ir(Moe,[["__scopeId","data-v-01f0cfe8"]]),Ml="https://migration.geoportail.lu/mymaps";async function Roe(){const a=await Br(Ml+"/maps",{});if(!a.ok)throw new Error("Error while trying to get My Maps");return await a.json()}async function koe(a){const e=await Br(Ml+"/map/"+a,{});if(!e.ok)throw new Error("Error while trying to get My Map info");return await e.json()}async function Poe(){const a=await Br(Ml+"/categories",{});if(!a.ok)throw new Error("Error while trying to get categories");return await a.json()}async function Goe(a,e,t,i){const n={title:a,description:e,category_id:t,public:i},s=await Br(Ml+"/create",n,"POST");if(!s.ok)throw new Error("Error while trying to create My Map");return await s.json()}async function Woe(a,e,t,i,n){const s={title:e,description:t,category_id:i,public:n,dirty:!0},r=await Br(Ml+"/update/"+a,s,"PUT");if(!r.ok)throw new Error("Error while trying to update My Map");return await r.json()}async function zO(a,e,t,i,n,s,r,l){const u={bgLayer:e,bgOpacity:t,layers:i,layers_opacity:n,layers_visibility:s,layers_indices:r,theme:l},d=await Br(Ml+"/update/"+a,u,"PUT");if(!d.ok)throw new Error("Error while trying to update My Map");return await d.json()}async function Ooe(a,e,t,i,n){const s={title:e,description:t,category_id:i,public:n},r=await Br(Ml+"/copy/"+a,s,"POST");if(!r.ok)throw new Error("Error while trying to copy My Map");return await r.json()}async function Foe(a){const e=await Br(Ml+"/delete/"+a,{},"DELETE");if(!e.ok)throw new Error("Error while trying to delete My Map");return(await e.json()).success}async function Noe(a){const e=await Br(Ml+"/delete_all_features/"+a,{},"DELETE");if(!e.ok)throw new Error("Error while trying to clear My Map");return(await e.json()).success}async function A3(a,e){const t={feature:e},i=await Br(Ml+"/save_feature/"+a,t,"POST");if(!i.ok)throw new Error("Error while trying to save feature to My Map");return await i.json()}async function Boe(a,e){const t={orders:JSON.stringify(e)},i=await Br(Ml+"/save_order/"+a,t,"POST");if(!i.ok)throw new Error("Error while trying to save features order to My Map");return await i.json()}async function UO(a){const e=await Br(Ml+"/delete_feature/"+a,{},"DELETE");if(!e.ok)throw new Error("Error while trying to delete feature to My Map");return await e.json()}async function Doe(a){const e=await Br(Ml+"/features/"+a,{});if(!e.ok)throw new Error("Error while trying to fetch My Map features");return await e.json()}const $n=Ao("draw",()=>{const{t:a}=Ct(),{addNotification:e}=ar(),t=Ye(void 0),i=Ye(void 0),n=Ye(void 0),s=Ye(void 0),r=Ye([]),l=St(()=>r.value.filter(J=>!J.map_id)),u=St(()=>r.value.filter(J=>J.map_id)),d=St(()=>i.value?r.value.find(J=>J.id===i.value):void 0),h=Ye(!1),g=Ye(void 0),y=Ye(!1),x=Ye(!1),C=Ai([]),I=Ye(!1);function A(){B("drawPoint")}function E(){B("drawLabel")}function L(){B("drawLine")}function G(){B("drawPolygon")}function F(){B("drawCircle")}function B(J){const je=s.value?.replace("edit","").replace("Continue",""),Qe=J?.replace("draw","").replace("Continue","");je===Qe?(n.value=void 0,s.value=void 0,i.value=void 0):n.value===J?n.value=void 0:Z(J)}function Z(J){J&&(s.value=void 0,i.value=void 0),n.value=J}function Y(J){J?n.value=void 0:i.value=void 0,s.value=J}function $(){n.value=void 0,i.value=void 0,s.value=void 0}function te(){Z("drawLineContinue")}async function ce(J){if(C.value=[J],r.value=[...r.value,J],J.map_id!==void 0){const je=await A3(J.map_id,J.toGeoJSONString()).catch(Qe=>e(a("Erreur inattendue lors de la sauvegarde de votre modification."),fi.ERROR));J.id=je.id,J.fid=je.id}}function me(J){t.value=J.id,i.value=J.id,s.value=J.featureType.replace("drawn","edit").replace("Continue",""),n.value=void 0}function X(J){const je=r.value.findIndex(Qe=>Qe.id===J.id);je!==-1&&(r.value[je]=J),r.value=[...r.value],J.map_id!==void 0&&A3(J.map_id,J.toGeoJSONString())}function de(J){r.value=J}function N(J,je=!0){const Qe=Array.isArray(J)?J:[J];je&&Qe.forEach(Je=>{const kt=r.value.find(Pt=>Pt.id===Je);kt&&kt.map_id&&je&&UO(kt.id).catch(Pt=>e(a("Erreur inattendue lors de la sauvegarde de votre modification."),fi.ERROR))}),r.value=r.value.filter(Je=>!Qe.includes(Je.id)),(Qe.includes(t.value)||Qe.includes(i.value))&&(t.value=void 0,i.value=void 0)}function ne(J){t.value=void 0,i.value=void 0;const je=r.value.filter(Qe=>Qe.map_id===J).map(Qe=>Qe.id);return N(je,!1)}function le(){t.value=void 0,i.value=void 0,r.value=r.value.filter(J=>J.map_id)}function _e(J){r.value=r.value.map(Qe=>Object.assign(Qe,{display_order:J.indexOf(`f-${Qe.id}`)}));const je=r.value.filter(Qe=>Qe.map_id);if(je.length>0){const Qe=je[0].map_id,Je=je.map(kt=>({fid:kt.id,display_order:kt.display_order}));Boe(Qe,Je)}}function ke(J){return r.value.filter(je=>je.getGeometry()&&J.includes(je.getGeometry()?.getType()))}function Ie(J){return r.value.filter(je=>J.includes(je.id))}function re(J){I.value=J??!I.value}function Q(J){y.value=J??!y.value}return{activeFeatureId:t,editingFeatureId:i,drawStateActive:n,editStateActive:s,drawnFeatures:r,drawnFeaturesExceptMyMaps:l,drawnFeaturesMyMaps:u,editingFeature:d,featureEditionDocked:h,currentDrawInteraction:g,clipLineActive:y,followRoads:x,queueAddedDrawnFeatures:C,showModalMergeLines:I,deactivateDraw:$,removeFeature:N,removeMyMapsFeature:ne,removeAllFeatures:le,reorderFeatures:_e,toggleDrawCircle:F,toggleDrawLabel:E,toggleDrawLine:L,toggleDrawPolygon:G,toggleDrawPoint:A,toggleDrawActiveState:B,setDrawActiveState:Z,setEditActiveState:Y,activateDrawLineContinue:te,addDrawnFeatureToCollection:ce,selectDrawnFeature:me,updateDrawnFeature:X,setDrawnFeatures:de,getDrawnFeaturesOfTypes:ke,getDrawnFeaturesWithIds:Ie,toggleDrawMergeLinesModal:re,toggleDrawCutLineMode:Q}}),ef=Ao("featureInfo",()=>{const a=Ai(),e=Ai(),t=Ai(!1),i=Ai(!1);function n(d){!d||d.length===0?a.value=void 0:(a.value=[...d],t.value=!1)}function s(){a.value=void 0,t.value=!1}function r(d){e.value=d}function l(d){t.value=d}function u(d){i.value=d}return{featureInfoPanelContent:a,fid:e,isLoading:t,displayStarOnMobile:i,setFeatureInfoPanelContent:n,clearContent:s,setFid:r,setLoading:l,setDisplayStarOnMobile:u}},{}),Voe=["aria-label","aria-pressed"],Zoe={class:"block text-[13px] sm:text-base uppercase"},bd=rt({__name:"button-icon",props:{label:{},icon:{},active:{type:Boolean},ariaLabel:{}},setup(a){const e=a;return(t,i)=>(U(),se("button",{class:Fa(["h-[42px] w-full sm:h-full sm:w-16 hover:text-white hover:bg-primary",e.active?"bg-primary text-white":""]),"aria-label":e.ariaLabel||e.label,"aria-pressed":e.active!==void 0?e.active:void 0},[P("span",{class:Fa(["block text-[1.7rem] sm:text-[2rem] -mt-1.5 -mb-3 after:font-icons",e.active?"lux-close-cross":`after:content-${e.icon}`]),"aria-hidden":"true"},null,2),P("span",Zoe,K(e.label),1)],10,Voe))}}),zoe=["href"],fm=rt({__name:"button-link",props:{label:{},link:{}},setup(a){const e=a;return(t,i)=>(U(),se("a",{class:"h-full flex flex-col justify-center px-[7px] uppercase hover:text-white hover:bg-primary",href:`${e.link}`,target:"_blank"},K(t.$props.label),9,zoe))}});function e_(a,e){const t=a.length;return e<0?a[e+t]:e>=t?a[e-t]:a[e]}function Ug(a,e){const t=a.length;let i=Math.floor(e);const n=e-i;i>=t?i-=t:i<0&&(i+=t);let s=i+1;s>=t&&(s-=t);const r=a[i],l=r[0],u=r[1],d=a[s],h=d[0]-l,g=d[1]-u;return[l+h*n,u+g*n]}const A2={index:-1,endIndex:NaN,closestTargetDistance:1/0};function HO(a,e,t,i){const n=a[0],s=a[1];let r=1/0,l=-1,u=NaN;for(let g=0;g<e.targets.length;++g){const y=e.targets[g],x=y.coordinates;let C=1/0,I;for(let A=0;A<x.length-1;++A){const E=x[A],L=x[A+1],G=YO(n,s,E,L);G.squaredDistance<C&&(C=G.squaredDistance,I=A+G.along)}C<r&&(r=C,y.ring&&e.targetIndex===g&&(y.endIndex>y.startIndex?I<y.startIndex&&(I+=x.length):y.endIndex<y.startIndex&&I>y.startIndex&&(I-=x.length)),u=I,l=g)}const d=e.targets[l];let h=d.ring;if(e.targetIndex===l&&h){const g=Ug(d.coordinates,u),y=t.getPixelFromCoordinate(g),x=t.getPixelFromCoordinate(e.startCoord);Fg(y,x)>i&&(h=!1)}if(h){const g=d.coordinates,y=g.length,x=d.startIndex,C=u;if(x<C){const I=M2(g,x,C);M2(g,x,C-y)<I&&(u-=y)}else{const I=M2(g,x,C);M2(g,x,C+y)<I&&(u+=y)}}return A2.index=l,A2.endIndex=u,A2.closestTargetDistance=r,A2}function XO(a,e){const t=[];for(let i=0;i<e.length;++i){const s=e[i].getGeometry();qO(a,s,t)}return t}function qO(a,e,t){if(e instanceof Ki){T2(a,e.getCoordinates(),!1,t);return}if(e instanceof Fu){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n)T2(a,i[n],!1,t);return}if(e instanceof Gs){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n)T2(a,i[n],!0,t);return}if(e instanceof y_){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n];for(let l=0,u=r.length;l<u;++l)T2(a,r[l],!0,t)}return}if(e instanceof jl){const i=e.getGeometries();for(let n=0;n<i.length;++n)qO(a,i[n],t);return}}function T2(a,e,t,i){const n=a[0],s=a[1];for(let r=0,l=e.length-1;r<l;++r){const u=e[r],d=e[r+1],h=YO(n,s,u,d);if(h.squaredDistance===0){const g=r+h.along;i.push({coordinates:e,ring:t,startIndex:g,endIndex:g});return}}}function E2(a,e){return Pd(a[0],a[1],e[0],e[1])}function M2(a,e,t){let i,n;e<t?(i=e,n=t):(i=t,n=e);const s=Math.ceil(i),r=Math.floor(n);if(s>r){const u=Ug(a,i),d=Ug(a,n);return E2(u,d)}let l=0;if(i<s){const u=Ug(a,i),d=e_(a,s);l+=E2(u,d)}if(r<n){const u=e_(a,r),d=Ug(a,n);l+=E2(u,d)}for(let u=s;u<r-1;++u){const d=e_(a,u),h=e_(a,u+1);l+=E2(d,h)}return l}const C4={along:0,squaredDistance:0};function YO(a,e,t,i){const n=t[0],s=t[1],r=i[0],l=i[1],u=r-n,d=l-s;let h=0,g=n,y=s;return(u!==0||d!==0)&&(h=Dn(((a-n)*u+(e-s)*d)/(u*u+d*d),0,1),g+=u*h,y+=d*h),C4.along=h,C4.squaredDistance=Op(Pd(a,e,g,y),10),C4}const L2={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class R2 extends oo{constructor(e,t){super(e),this.feature=t}}class Yp extends Dc{constructor(e){const t=e;t.stopDown||(t.stopDown=Np),super(t),this.on,this.once,this.un,this.options_=e,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=Hoe(this.type_),this.stopClick_=!!e.stopClick,this.ignoreNextUpEvent_=!1,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:wp,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const n=this.mode_;if(n==="Circle")i=(s,r,l)=>{const u=r||new p_([NaN,NaN]),d=hr(s[0]),h=Wd(d,hr(s[s.length-1]));return u.setCenterAndRadius(d,Math.sqrt(h),this.geometryLayout_),u};else{let s;n==="Point"?s=Ln:n==="LineString"?s=Ki:n==="Polygon"&&(s=Gs),i=(r,l,u)=>(l?n==="Polygon"?r[0].length?l.setCoordinates([r[0].concat([r[0][0]])],this.geometryLayout_):l.setCoordinates([],this.geometryLayout_):l.setCoordinates(r,this.geometryLayout_):l=new s(r,this.geometryLayout_),l)}}this.geometryFunction_=i,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new bs({source:new lo({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:Uoe(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:zC,this.freehandCondition_,e.freehand?this.freehandCondition_=ap:this.freehandCondition_=e.freehandCondition?e.freehandCondition:zA,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(VA.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=ap:t=e:t=BP,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}setFreehand(e){this.freehand_=e,this.freehand_?this.freehandCondition_=ap:this.freehandCondition_=this.options_&&this.options_.freehandCondition?this.options_.freehandCondition:zA}getOverlay(){return this.overlay_}getFreehand(){return this.freehand_}handleEvent(e){e.originalEvent.type===Ka.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Bi.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Bi.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Bi.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===Bi.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===Bi.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Bi.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Bi.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new mc(Bi.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),i=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),n=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=Yr([i,n]),r=this.traceSource_.getFeaturesInExtent(s);if(r.length===0)return;const l=XO(e.coordinate,r);l.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:l,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex,n=e.startIndex<=t;i===n?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const n=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),i=s-n+1}else{const n=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),i=n-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const n=[];if(t<i){const s=Math.ceil(t);let r=Math.floor(i);r===i&&(r-=1);for(let l=s;l<=r;++l)n.push(e_(e.coordinates,l))}else{const s=Math.floor(t);let r=Math.ceil(i);r===i&&(r+=1);for(let l=s;l>=r;--l)n.push(e_(e.coordinates,l))}n.length&&this.appendCoordinates(n)}updateTrace_(e){const t=this.traceState_;if(!t.active)return;if(t.targetIndex===-1){const l=e.map.getPixelFromCoordinate(t.startCoord);if(Fg(l,e.pixel)<this.snapTolerance_)return}const i=HO(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(t.targetIndex!==-1){const u=t.targets[t.targetIndex];this.removeTracedCoordinates_(u.startIndex,u.endIndex)}const l=t.targets[i.index];this.addTracedCoordinates_(l,l.startIndex,i.endIndex)}else{const l=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(l,i.endIndex)}t.targetIndex=i.index;const n=t.targets[t.targetIndex];n.endIndex=i.endIndex;const s=Ug(n.coordinates,n.endIndex),r=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(r[0]),Math.round(r[1])]}handleDragEvent(e){this.ignoreNextUpEvent_=!0,super.handleDragEvent(e)}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.ignoreNextUpEvent_||this.toggleTraceState_(e),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(e.coordinate),!n&&this.freehand_?this.finishDrawing():!this.freehand_&&(!n||this.mode_==="Point")&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return this.ignoreNextUpEvent_=!1,!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,n=t[0]-i[0],s=t[1]-i[1],r=n*n+s*s;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let n=!1,s=[this.finishCoordinate_];const r=this.mode_;if(r==="Point")i=!0;else if(r==="Circle")i=this.sketchCoords_.length===2;else if(r==="LineString")n=!t&&this.sketchCoords_.length>this.minPoints_;else if(r==="Polygon"){const l=this.sketchCoords_;n=l[0].length>this.minPoints_,s=[l[0][0],l[0][l[0].length-2]],t?s=[l[0][0]]:s=[l[0][0],l[0][l[0].length-2]]}if(n){const l=this.getMap();for(let u=0,d=s.length;u<d;u++){const h=s[u],g=l.getPixelFromCoordinate(h),y=e[0]-g[0],x=e[1]-g[1],C=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(y*y+x*x)<=C,i){this.finishCoordinate_=h;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Di(new Ln(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Di);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new Ki(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=nw(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Di(new Ki(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Di,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new R2(L2.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),n=t.getView().getProjection(),s=nw(this.geometryLayout_);let r,l;for(;e.length<s;)e.push(0);this.mode_==="Point"?l=this.sketchCoords_:this.mode_==="Polygon"?(r=this.sketchCoords_[0],l=r[r.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(r=this.sketchCoords_,l=r[r.length-1]),l[0]=e[0],l[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let n,s;const r=this.mode_;return r==="LineString"||r==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),this.geometryFunction_(s,t,i)):r==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),n&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),n?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;for(let s=0;s<e;++s){let r;if(n==="LineString"||n==="Circle"){if(r=this.sketchCoords_,r.splice(-2,1),r.length>=2){this.finishCoordinate_=r[r.length-2].slice();const l=this.finishCoordinate_.slice();r[r.length-1]=l,this.createOrUpdateSketchPoint_(l)}this.geometryFunction_(r,t,i),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(n==="Polygon"){r=this.sketchCoords_[0],r.splice(-2,1);const l=this.sketchLine_.getGeometry();if(r.length>=2){const u=r[r.length-2].slice();r[r.length-1]=u,this.createOrUpdateSketchPoint_(u)}l.setCoordinates(r),this.geometryFunction_(this.sketchCoords_,t,i)}if(r.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const i=e.getGeometry(),n=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,i,n)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,i,n),t=i.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new $d([t])):this.type_==="MultiLineString"?e.setGeometry(new Fu([t])):this.type_==="MultiPolygon"&&e.setGeometry(new y_([t])),this.dispatchEvent(new R2(L2.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new R2(L2.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(e[0]);let n;if(t==="LineString"||t==="Circle")n=this.sketchCoords_;else if(t==="Polygon")n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&n.shift(),n.pop();for(let r=0;r<e.length;r++)this.addToDrawing_(e[r]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new Di(new Ln(n)),this.updateSketchFeatures_(),this.dispatchEvent(new R2(L2.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function Uoe(){const a=aG();return function(e,t){return a[e.getGeometry().getType()]}}function Hoe(a){switch(a){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+a)}}const OR=0,t1=1,FR=[0,0,0,0],cp=[],I4={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};function S4(a,e,t){let i;switch(e){case"LineString":i=a;break;case"MultiLineString":case"Polygon":i=a[t[0]];break;case"MultiPolygon":i=a[t[1]][t[0]];break}return i}class yx extends oo{constructor(e,t,i){super(e),this.features=t,this.mapBrowserEvent=i}}class Xoe extends Dc{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:ZP,this.defaultDeleteCondition_=function(i){return OX(i)&&DP(i)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:ap,this.vertexFeature_=null,this.vertexSegments_=null,this.lastCoordinate_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new Fw,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new bs({source:new lo({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:Yoe(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.traceSource_=e.traceSource||e.source||null,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSegments_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new to(this.source_.getFeatures()),this.source_.addEventListener(Do.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(Do.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(js.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(js.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}setTrace(e){let t;e?e===!0?t=ap:t=e:t=BP,this.traceCondition_=t}addFeature_(e){const t=e.getGeometry();if(t){const n=this.SEGMENT_WRITERS_[t.getType()];n&&n(e,t)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastCoordinate_),e.addEventListener(Ka.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new to;const i=this.featuresBeingModified_.getArray();for(let n=0,s=t.length;n<s;++n){const r=t[n].feature;r&&!i.includes(r)&&this.featuresBeingModified_.push(r)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new yx(I4.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(Ka.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,i=[];t.forEach(function(n){e===n.feature&&i.push(n)});for(let n=i.length-1;n>=0;--n){const s=i[n];for(let r=this.dragSegments_.length-1;r>=0;--r)this.dragSegments_[r][0]===s&&this.dragSegments_.splice(r,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const i=t.getCoordinates(),n={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),n)}writeMultiPointGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n],l={feature:e,geometry:t,depth:[n],index:n,segment:[r,r]};this.rBush_.insert(t.getExtent(),l)}}writeLineStringGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length-1;n<s;++n){const r=i.slice(n,n+2),l={feature:e,geometry:t,index:n,segment:r};this.rBush_.insert(Yr(r),l)}}writeMultiLineStringGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n];for(let l=0,u=r.length-1;l<u;++l){const d=r.slice(l,l+2),h={feature:e,geometry:t,depth:[n],index:l,segment:d};this.rBush_.insert(Yr(d),h)}}}writePolygonGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n];for(let l=0,u=r.length-1;l<u;++l){const d=r.slice(l,l+2),h={feature:e,geometry:t,depth:[n],index:l,segment:d};this.rBush_.insert(Yr(d),h)}}}writeMultiPolygonGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n];for(let l=0,u=r.length;l<u;++l){const d=r[l];for(let h=0,g=d.length-1;h<g;++h){const y=d.slice(h,h+2),x={feature:e,geometry:t,depth:[l,n],index:h,segment:y};this.rBush_.insert(Yr(y),x)}}}}writeCircleGeometry_(e,t){const i=t.getCenter(),n={feature:e,geometry:t,index:OR,segment:[i,i]},s={feature:e,geometry:t,index:t1,segment:[i,i]},r=[n,s];n.featureSegments=r,s.featureSegments=r,this.rBush_.insert(ep(i),n);let l=t;this.rBush_.insert(l.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const i=t.getGeometriesArray();for(let n=0;n<i.length;++n){const s=i[n],r=this.SEGMENT_WRITERS_[s.getType()];r(e,s)}}createOrUpdateVertexFeature_(e,t,i,n){let s=this.vertexFeature_;return s?s.getGeometry().setCoordinates(e):(s=new Di(new Ln(e)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s)),s.set("features",t),s.set("geometries",i),s.set("existing",n),s}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==Bi.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=Bi.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==Bi.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}findInsertVerticesAndUpdateDragSegments_(e){if(this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null,!this.vertexFeature_)return;this.getMap().getView().getProjection();const i=[],n=this.vertexFeature_.getGeometry().getCoordinates(),s=Yr([n]),r=this.rBush_.getInExtent(s),l={};r.sort(qoe);for(let u=0,d=r.length;u<d;++u){const h=r[u],g=h.segment;let y=ei(h.geometry);const x=h.depth;if(x&&(y+="-"+x.join("-")),l[y]||(l[y]=new Array(2)),h.geometry.getType()==="Circle"&&h.index===t1){const C=BR(e,h);Hs(C,n)&&!l[y][0]&&(this.dragSegments_.push([h,0]),l[y][0]=h);continue}if(Hs(g[0],n)&&!l[y][0]){this.dragSegments_.push([h,0]),l[y][0]=h;continue}if(Hs(g[1],n)&&!l[y][1]){if(l[y][0]&&l[y][0].index===0){let C=h.geometry.getCoordinates();switch(h.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":C=C[x[1]];case"Polygon":if(h.index!==C[x[0]].length-2)continue;break}}this.dragSegments_.push([h,1]),l[y][1]=h;continue}ei(g)in this.vertexSegments_&&!l[y][0]&&!l[y][1]&&i.push(h)}return i}deactivateTrace_(){this.traceState_={active:!1}}updateTrace_(e){const t=this.traceState_;if(!t.active)return;if(t.targetIndex===-1){const s=e.map.getPixelFromCoordinate(t.startCoord);if(Fg(s,e.pixel)<this.pixelTolerance_)return}const i=HO(e.coordinate,t,e.map,this.pixelTolerance_);if(t.targetIndex===-1&&Math.sqrt(i.closestTargetDistance)/e.map.getView().getResolution()>this.pixelTolerance_)return;if(t.targetIndex!==i.index){if(t.targetIndex!==-1){const r=t.targets[t.targetIndex];this.removeTracedCoordinates_(r.startIndex,r.endIndex)}else for(const r of this.traceSegments_){const l=r[0],u=l.geometry,d=r[1],h=u.getCoordinates();S4(h,u.getType(),l.depth).splice(l.index+d,1),u.setCoordinates(h),d===0&&(l.index-=1)}const s=t.targets[i.index];this.addTracedCoordinates_(s,s.startIndex,i.endIndex)}else{const s=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(s,i.endIndex)}t.targetIndex=i.index;const n=t.targets[t.targetIndex];n.endIndex=i.endIndex}getTraceCandidates_(e){const t=this.getMap(),i=this.pixelTolerance_,n=t.getCoordinateFromPixel([e.pixel[0]-i,e.pixel[1]+i]),s=t.getCoordinateFromPixel([e.pixel[0]+i,e.pixel[1]-i]),r=Yr([n,s]);return this.traceSource_.getFeaturesInExtent(r)}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_(),this.traceSegments_=null;return}const t=this.getTraceCandidates_(e);if(t.length===0)return;const i=XO(e.coordinate,t);i.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:i,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex,n=e.startIndex<=t;i===n?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const n=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),i=s-n+1}else{const n=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),i=n-s+1}if(i>0)for(const n of this.traceSegments_){const s=n[0],r=s.geometry,l=n[1];let u=n[0].index+1;l===1&&(u-=i);const d=r.getCoordinates();S4(d,r.getType(),s.depth).splice(u,i),r.setCoordinates(d),l===1&&(s.index-=i)}}addTracedCoordinates_(e,t,i){if(t===i)return;const n=[];if(t<i){const s=Math.ceil(t);let r=Math.floor(i);r===i&&(r-=1);for(let l=s;l<=r;++l)n.push(e_(e.coordinates,l))}else{const s=Math.floor(t);let r=Math.ceil(i);r===i&&(r+=1);for(let l=s;l>=r;--l)n.push(e_(e.coordinates,l))}if(n.length)for(const s of this.traceSegments_){const r=s[0],l=r.geometry,u=s[1],d=r.index+1;u===0&&n.reverse();const h=l.getCoordinates();S4(h,l.getType(),r.depth).splice(d,0,...n),l.setCoordinates(h),u===1&&(r.index+=n.length)}}updateGeometry_(e,t){const i=t[0],n=i.depth;let s;const r=i.segment,l=i.geometry,u=t[1];for(;e.length<l.getStride();)e.push(r[u][e.length]);switch(l.getType()){case"Point":s=e,r[0]=e,r[1]=e;break;case"MultiPoint":s=l.getCoordinates(),s[i.index]=e,r[0]=e,r[1]=e;break;case"LineString":s=l.getCoordinates(),s[i.index+u]=e,r[u]=e;break;case"MultiLineString":s=l.getCoordinates(),s[n[0]][i.index+u]=e,r[u]=e;break;case"Polygon":s=l.getCoordinates(),s[n[0]][i.index+u]=e,r[u]=e;break;case"MultiPolygon":s=l.getCoordinates(),s[n[1]][n[0]][i.index+u]=e,r[u]=e;break;case"Circle":const d=l;if(r[0]=e,r[1]=e,i.index===OR)this.changingFeature_=!0,d.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0,this.getMap().getView().getProjection();let h=Fg(hr(d.getCenter()),hr(e));d.setRadius(h),this.changingFeature_=!1}break}s&&this.setGeometryCoordinates_(l,s)}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([r])=>r));const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],i=[],n=[],s=this.traceState_.active&&!this.traceSegments_?this.traceState_.startCoord:null;if(s){this.traceSegments_=[];for(const r of this.dragSegments_){const l=r[0];Fg(lb(s,l.segment),s)/e.map.getView().getResolution()<1&&this.traceSegments_.push(r)}}for(let r=0,l=this.dragSegments_.length;r<l;++r){const u=this.dragSegments_[r],d=u[0],h=d.feature;i.includes(h)||i.push(h);const g=d.geometry;n.includes(g)||n.push(g),this.updateGeometry_(t,u)}this.updateTrace_(e),this.createOrUpdateVertexFeature_(t,i,n,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate,i=this.findInsertVerticesAndUpdateDragSegments_(t);if(i?.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,i),this.vertexFeature_)){const n=this.vertexFeature_.getGeometry().getCoordinates();for(let s=i.length-1;s>=0;--s)this.insertVertex_(i[s],n);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const i=this.dragSegments_[t][0],n=i.geometry;if(n.getType()==="Circle"){const s=n,r=s.getCenter(),l=i.featureSegments[0],u=i.featureSegments[1];l.segment[0]=r,l.segment[1]=r,u.segment[0]=r,u.segment[1]=r,this.rBush_.update(ep(r),l);let d=s;this.rBush_.update(d.getExtent(),u)}else this.rBush_.update(Yr(i.segment),i)}return this.featuresBeingModified_&&(this.toggleTraceState_(e),this.dispatchEvent(new yx(I4.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastCoordinate_=e.coordinate,this.handlePointerAtPixel_(this.lastCoordinate_)}handlePointerAtPixel_(e){const t=this.getMap(),i=t.getPixelFromCoordinate(e);t.getView().getProjection();const n=function(l,u){return NR(e,l)-NR(e,u)};let s,r;if(this.hitDetection_){const l=typeof this.hitDetection_=="object"?u=>u===this.hitDetection_:void 0;t.forEachFeatureAtPixel(i,(u,d,h)=>{h&&h.getType()==="Point"&&(h=new Ln(qm(h.getCoordinates())));const g=h||u.getGeometry();if(g&&g.getType()==="Point"&&u instanceof Di&&this.features_.getArray().includes(u)){r=g;const y=u.getGeometry().getFlatCoordinates().slice(0,2);s=[{feature:u,geometry:r,segment:[y,y]}]}return!0},{layerFilter:l})}if(!s){const l=Zl(ep(e,FR)),u=t.getView().getResolution()*this.pixelTolerance_,d=OC(qd(l,u,FR));s=this.rBush_.getInExtent(d)}if(s&&s.length>0){const l=s.sort(n)[0],u=l.segment;let d=BR(e,l);const h=t.getPixelFromCoordinate(d);let g=Fg(i,h);if(r||g<=this.pixelTolerance_){const y={};if(y[ei(u)]=!0,this.snapToPointer_||(this.delta_[0]=d[0]-e[0],this.delta_[1]=d[1]-e[1]),l.geometry.getType()==="Circle"&&l.index===t1)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(d,[l.feature],[l.geometry],this.snappedToVertex_);else{const x=t.getPixelFromCoordinate(u[0]),C=t.getPixelFromCoordinate(u[1]),I=Wd(h,x),A=Wd(h,C);if(g=Math.sqrt(Math.min(I,A)),this.snappedToVertex_=g<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(d=I>A?u[1]:u[0]),this.createOrUpdateVertexFeature_(d,[l.feature],[l.geometry],this.snappedToVertex_);const E={};E[ei(l.geometry)]=!0;for(let L=1,G=s.length;L<G;++L){const F=s[L].segment;if(Hs(u[0],F[0])&&Hs(u[1],F[1])||Hs(u[0],F[1])&&Hs(u[1],F[0])){const B=ei(s[L].geometry);B in E||(E[B]=!0,y[ei(F)]=!0)}else break}}this.vertexSegments_=y;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const i=e.segment,n=e.feature,s=e.geometry,r=e.depth,l=e.index;let u;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":u=s.getCoordinates(),u[r[0]].splice(l+1,0,t);break;case"Polygon":u=s.getCoordinates(),u[r[0]].splice(l+1,0,t);break;case"MultiPolygon":u=s.getCoordinates(),u[r[1]][r[0]].splice(l+1,0,t);break;case"LineString":u=s.getCoordinates(),u.splice(l+1,0,t);break;default:return!1}this.setGeometryCoordinates_(s,u);const d=this.rBush_;d.remove(e),this.updateSegmentIndices_(s,l,r,1);const h={segment:[i[0],t],feature:n,geometry:s,depth:r,index:l};d.insert(Yr(h.segment),h),this.dragSegments_.push([h,1]);const g={segment:[t,i[1]],feature:n,geometry:s,depth:r,index:l+1};return d.insert(Yr(g.segment),g),this.dragSegments_.push([g,0]),!0}updatePointer_(e){return e&&this.findInsertVerticesAndUpdateDragSegments_(e),this.vertexFeature_?.getGeometry().getCoordinates()}getPoint(){const e=this.vertexFeature_?.getGeometry().getCoordinates();return e?qm(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(i=>i.getType()==="Circle"||i.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(Yr([e])).some(({segment:i})=>Hs(i[0],e)||Hs(i[1],e))}removePoint(e){if(e&&(e=hr(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=Bi.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map(([n])=>n));const i=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new yx(I4.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,i}return!1}removeVertex_(){const e=this.dragSegments_,t={};let i=!1,n,s,r,l,u,d,h,g,y,x,C;for(u=e.length-1;u>=0;--u)r=e[u],x=r[0],C=ei(x.feature),x.depth&&(C+="-"+x.depth.join("-")),C in t||(t[C]={}),r[1]===0?(t[C].right=x,t[C].index=x.index):r[1]==1&&(t[C].left=x,t[C].index=x.index+1);for(C in t){switch(y=t[C].right,h=t[C].left,d=t[C].index,g=d-1,h!==void 0?x=h:x=y,g<0&&(g=0),l=x.geometry,s=l.getCoordinates(),n=s,i=!1,l.getType()){case"MultiLineString":s[x.depth[0]].length>2&&(s[x.depth[0]].splice(d,1),i=!0);break;case"LineString":s.length>2&&(s.splice(d,1),i=!0);break;case"MultiPolygon":n=n[x.depth[1]];case"Polygon":n=n[x.depth[0]],n.length>4&&(d==n.length-1&&(d=0),n.splice(d,1),i=!0,d===0&&(n.pop(),n.push(n[0]),g=n.length-1));break}if(i){this.setGeometryCoordinates_(l,s);const I=[];if(h!==void 0&&(this.rBush_.remove(h),I.push(h.segment[0])),y!==void 0&&(this.rBush_.remove(y),I.push(y.segment[1])),h!==void 0&&y!==void 0){const A={depth:x.depth,feature:x.feature,geometry:x.geometry,index:g,segment:I};this.rBush_.insert(Yr(A.segment),A)}this.updateSegmentIndices_(l,d,x.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(i=>i.getType()==="Circle"||i.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(Yr([e])).some(({segment:i})=>!(Hs(i[0],e)||Hs(i[1],e)))}insertPoint(e){const t=e?hr(e,this.getMap().getView().getProjection()):this.vertexFeature_?.getGeometry().getCoordinates();return t?this.findInsertVerticesAndUpdateDragSegments_(t).reduce((n,s)=>n||this.insertVertex_(s,t),!1):!1}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,i,n){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(i===void 0||s.depth===void 0||ah(s.depth,i))&&s.index>t&&(s.index+=n)})}}function qoe(a,e){return a.index-e.index}function NR(a,e,t){const i=e.geometry;if(i.getType()==="Circle"){let s=i;if(e.index===t1){const r=Wd(s.getCenter(),hr(a)),l=Math.sqrt(r)-s.getRadius();return l*l}}const n=hr(a);return cp[0]=hr(e.segment[0]),cp[1]=hr(e.segment[1]),RA(n,cp)}function BR(a,e,t){const i=e.geometry;if(i.getType()==="Circle"&&e.index===t1)return qm(i.getClosestPoint(hr(a)));const n=hr(a);return cp[0]=hr(e.segment[0]),cp[1]=hr(e.segment[1]),qm(lb(n,cp))}function Yoe(){const a=aG();return function(e,t){return a.Point}}class Koe extends oo{feature;constructor(e,t){super(e),this.feature=t}}class joe extends Dc{source_;features_;mapMatching_;getRouteUrl_;maxPoints_;freehand_;style_;sketchFeature_=null;sketchPoint_=null;sketchLine_=null;sketchCoords_=[];finishCoordinate_=null;lastWaypoints_="";isRequestingRoute_=!1;pointsCnt_=[];finishAfterRoute_=!1;isDoubleClick_=!1;clickTimeout_=null;active_=!0;constructor(e={}){if(super({stopDown:()=>!1,handleDownEvent:Joe,handleUpEvent:Qoe,handleMoveEvent:ele,handleEvent:$oe}),this.source_=e.source,this.features_=e.features,this.mapMatching_=e.mapMatching??!1,this.getRouteUrl_=e.getRouteUrl,this.maxPoints_=e.maxPoints??1/0,this.freehand_=e.freehand??!1,e.style)this.style_=e.style;else{const i=new Yp({type:"LineString",source:new lo}).overlay_;i?this.style_=i.getStyleFunction():this.style_=_T}e.existingSketch&&this.adoptExistingSketch_(e.existingSketch)}setActive(e){this.active_=e}getActive(){return this.active_}setMapMatching(e){this.mapMatching_=e}getMapMatching(){return this.mapMatching_}toggleMapMatching(){return this.mapMatching_=!this.mapMatching_,this.mapMatching_}startDrawing_(e){this.finishCoordinate_=e,this.sketchCoords_=[e.slice(),e.slice()];const t=new Ki(this.sketchCoords_);this.sketchFeature_=new Di({geometry:t}),this.sketchFeature_.setStyle(this.style_),this.sketchPoint_=new Di({geometry:new Ln(e)}),this.sketchPoint_.setStyle(this.style_),this.source_&&(this.source_.addFeature(this.sketchFeature_),this.sketchPoint_&&this.source_.addFeature(this.sketchPoint_)),this.updateSketchFeatures_()}adoptExistingSketch_(e){const t=e.getGeometry();if(!(t instanceof Ki))return;this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates(),this.sketchFeature_.setStyle(this.style_),this.source_&&(this.source_.getFeatures().includes(this.sketchFeature_)||this.source_.addFeature(this.sketchFeature_)),this.sketchCoords_.length>=2?this.finishCoordinate_=this.sketchCoords_[this.sketchCoords_.length-2].slice():this.sketchCoords_.length===1&&(this.finishCoordinate_=this.sketchCoords_[0].slice());const i=this.sketchCoords_[this.sketchCoords_.length-1];this.sketchPoint_=new Di({geometry:new Ln(i)}),this.sketchPoint_.setStyle(this.style_),this.source_&&this.sketchPoint_&&this.source_.addFeature(this.sketchPoint_)}modifyDrawing_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.sketchCoords_,n=i[i.length-1];n[0]=e[0],n[1]=e[1],this.isRequestingRoute_||t.setCoordinates(this.sketchCoords_),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),this.updateSketchFeatures_()}async addToDrawing_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.sketchCoords_;if(this.finishCoordinate_=e.slice(),i.length>=this.maxPoints_){this.finishDrawing();return}if(i[i.length-1]=e.slice(),i.push(e.slice()),!this.mapMatching_||this.freehand_||!this.getRouteUrl_){this.pointsCnt_.push(1),t.setCoordinates(i),this.updateSketchFeatures_();return}if(i.length>2){const n=fr(i[i.length-2],"EPSG:3857","EPSG:4326"),s=fr(i[i.length-3],"EPSG:3857","EPSG:4326"),r=`${s[1]},${s[0]},${n[1]},${n[0]}`;r!==this.lastWaypoints_&&!this.isRequestingRoute_&&(this.lastWaypoints_=r,await this.requestRoute_(r,t,e))}if(!this.isRequestingRoute_){const n=t.getCoordinates().slice(0,-1);n.push(e),t.setCoordinates(n)}}async requestRoute_(e,t,i){if(!this.getRouteUrl_)return;this.isRequestingRoute_=!0;const n=`${this.getRouteUrl_}?waypoints=${e}`;try{const r=await(await fetch(n)).json();if(r.success){const u=new $l().readGeometry(r.geom);this.pointsCnt_.push(u.getCoordinates().length);const d=t.getCoordinates().slice(0,-2).concat(u.transform("EPSG:4326","EPSG:3857").getCoordinates());this.finishAfterRoute_||d.push(i),t.setCoordinates(d),this.sketchCoords_=d,this.finishAfterRoute_?(this.finishAfterRoute_=!1,this.finishCoordinate_=null,this.finishDrawing()):(this.updateSketchFeatures_(),d.length>=2&&(this.finishCoordinate_=d[d.length-2].slice()))}}catch{}finally{this.isRequestingRoute_=!1}}removeLastPoint(){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),t=this.sketchCoords_;if(this.mapMatching_&&this.pointsCnt_.length>0){const i=this.pointsCnt_.pop();t.splice(-1*i-1,i)}else t.splice(-2,1);e.setCoordinates(t),t.length>=2?this.finishCoordinate_=t[t.length-2].slice():this.finishCoordinate_=null,this.updateSketchFeatures_()}finishDrawing(){const e=this.abortDrawing_();e&&(this.dispatchEvent(new Koe("drawend",e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e))}suspendDrawing(){this.sketchPoint_&&this.source_&&this.source_.removeFeature(this.sketchPoint_),this.sketchPoint_=null,this.finishCoordinate_=null}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.clickTimeout_!==null&&(window.clearTimeout(this.clickTimeout_),this.clickTimeout_=null),e&&(this.source_&&(this.source_.removeFeature(e),this.sketchPoint_&&this.source_.removeFeature(this.sketchPoint_)),this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.updateSketchFeatures_()),e}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_)}handlePointerMove_(e){return this.sketchFeature_&&this.modifyDrawing_(e.coordinate),!0}}function $oe(a){const e=this;if(!e.active_)return!0;if(a.type===Bi.DBLCLICK)return e.isDoubleClick_=!0,e.clickTimeout_!==null&&(window.clearTimeout(e.clickTimeout_),e.clickTimeout_=null),e.finishDrawing(),setTimeout(()=>{e.isDoubleClick_=!1},300),!1;if(a.type==="singleclick"){if(e.isDoubleClick_)return!1;const t=a.coordinate;return e.sketchFeature_?e.addToDrawing_(t):e.startDrawing_(t),!1}return a.type==="pointermove"&&e.finishCoordinate_&&e.modifyDrawing_(a.coordinate),!0}function Joe(){return!0}function Qoe(){return!1}function ele(a){return this.handlePointerMove_(a)}const ur={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},tle={ERROR:"error"};class ale extends oo{constructor(e){super(tle.ERROR),this.code=e.code,this.message=e.message}}class ile extends eu{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=dP,this.watchId_=void 0,this.addChangeListener(ur.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(ur.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=Fp(Wi("EPSG:4326"),e),this.position_&&this.set(ur.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(ur.ACCURACY,t.accuracy),this.set(ur.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(ur.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(ur.HEADING,t.heading===null?void 0:io(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const i=this.transform_(this.position_);this.set(ur.POSITION,i.slice()),this.set(ur.SPEED,t.speed===null?void 0:t.speed);const n=fX(this.position_,t.accuracy);n.applyTransform(this.transform_),this.set(ur.ACCURACY_GEOMETRY,n),this.changed()}positionError_(e){this.dispatchEvent(new ale(e))}getAccuracy(){return this.get(ur.ACCURACY)}getAccuracyGeometry(){return this.get(ur.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(ur.ALTITUDE)}getAltitudeAccuracy(){return this.get(ur.ALTITUDE_ACCURACY)}getHeading(){return this.get(ur.HEADING)}getPosition(){return this.get(ur.POSITION)}getProjection(){return this.get(ur.PROJECTION)}getSpeed(){return this.get(ur.SPEED)}getTracking(){return this.get(ur.TRACKING)}getTrackingOptions(){return this.get(ur.TRACKING_OPTIONS)}setProjection(e){this.set(ur.PROJECTION,Wi(e))}setTracking(e){this.set(ur.TRACKING,e)}setTrackingOptions(e){this.set(ur.TRACKING_OPTIONS,e)}}function nle(a,e){const t=a.canvas;e=e||{};const i=e.pixelRatio||mP,n=e.size;n&&(t.width=n[0]*i,t.height=n[1]*i,t.style.width=n[0]+"px",t.style.height=n[1]+"px");const s=[0,0,t.width,t.height],r=sx(Jo(),i,i);return new GO(a,i,s,r,0)}function k2(a,e){return Gr(a.inversePixelTransform,e.slice(0))}class JT extends hb{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Ka.CHANGE)}release(){this.setState(Na.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Na.EMPTY){if(this.state!==Na.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Da()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const n=t-i+1e3/60;return n>=this.transition_?1:pP(n/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class KO extends JT{constructor(e,t,i,n,s,r){super(e,t,r),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_,wl?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,n!==null&&(this.image_.crossOrigin=n)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Na.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=Na.ERROR,this.unlistenImage_(),this.image_=rle(),this.changed()}handleImageLoad_(){if(wl)this.state=Na.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Na.LOADED:this.state=Na.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==Na.ERROR&&(this.state=Na.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Na.IDLE&&(this.state=Na.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Bq(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function rle(){const a=Jr(1,1);return a.fillStyle="rgba(0,0,0,0)",a.fillRect(0,0,1,1),a.canvas}const zs={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Nm extends eu{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+AX,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(zs.ELEMENT,this.handleElementChanged),this.addChangeListener(zs.MAP,this.handleMapChanged),this.addChangeListener(zs.OFFSET,this.handleOffsetChanged),this.addChangeListener(zs.POSITION,this.handlePositionChanged),this.addChangeListener(zs.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(zs.ELEMENT)}getId(){return this.id}getMap(){return this.get(zs.MAP)||null}getOffset(){return this.get(zs.OFFSET)}getPosition(){return this.get(zs.POSITION)}getPositioning(){return this.get(zs.POSITIONING)}handleElementChanged(){PP(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),mn(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=xa(e,Cd.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(zs.ELEMENT,e)}setMap(e){this.set(zs.MAP,e)}setOffset(e){this.set(zs.OFFSET,e)}setPosition(e){this.set(zs.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(zs.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),s=this.getRect(n,[EX(n),MX(n)]);e=e||{};const r=e.margin===void 0?20:e.margin;if(!yc(i,s)){const l=s[0]-i[0],u=i[2]-s[2],d=s[1]-i[1],h=i[3]-s[3],g=[0,0];if(l<0?g[0]=l-r:u<0&&(g[0]=Math.abs(u)+r),d<0?g[1]=d-r:h<0&&(g[1]=Math.abs(h)+r),g[0]!==0||g[1]!==0){const y=t.getView().getCenterInternal(),x=t.getPixelFromCoordinateInternal(y);if(!x)return;const C=[x[0]+g[0],x[1]+g[1]],I=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(C),duration:I.duration,easing:I.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+t[0],s+t[1]]}setPositioning(e){this.set(zs.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(e,t){const i=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const r=`${e[0]+n[0]}px`,l=`${e[1]+n[1]}px`;let u="0%",d="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?u="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(u="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?d="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(d="-50%");const h=`translate(${u}, ${d}) translate(${r}, ${l})`;this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h)}getOptions(){return this.options}}class QT{constructor(e,t,i,n){this.minX=e,this.maxX=t,this.minY=i,this.maxY=n}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function xg(a,e,t,i,n){return n!==void 0?(n.minX=a,n.maxX=e,n.minY=t,n.maxY=i,n):new QT(a,e,t,i)}function Mb(a,e=console){const t=a.startsWith("[")?a:`[${a}]`,i=(s,r)=>{const l=[t,...r];try{if(typeof e[s]=="function"){e[s](...l);return}}catch{}try{typeof e.log=="function"&&e.log(...l)}catch{}},n=s=>(...r)=>{i(s,r)};return{log:n("log"),info:n("info"),warn:n("warn"),error:n("error"),debug:n("debug")}}const sle="https://migration.geoportail.lu/profile.json";async function ole(a,e,t="dhm",i=100){const n={geom:a,nbPoints:i+"",layers:t,id:e+""},s=await Br(sle,n,"POST");if(!s.ok){let l="";try{l=await s.text()}catch{}const{error:u}=Mb("PROFILE");throw u("[fetchProfileJson] non-ok response",{status:s.status,body:l}),new Error("Error while trying to get profile")}return await s.json()}function DR(a,e=1){if(!/^#[0-9A-Fa-f]{6}$/.test(a))throw new Error(`Invalid hex color string: ${a}`);const i=parseInt(a.slice(1,3),16),n=parseInt(a.slice(3,5),16),s=parseInt(a.slice(5,7),16);return[i,n,s,e]}function jO(a){const[e,t,i]=a;if(e!==(e&255)||t!==(t&255)||i!==(i&255))throw Error(`"(${e},${t},${i})" is not a valid RGB color`);const n=A4(e.toString(16)),s=A4(t.toString(16)),r=A4(i.toString(16));return`#${n}${s}${r}`}function A4(a){return a.length===1?`0${a}`:a}function lle(){return{angle:0,color:"#ed1c24",arrowcolor:void 0,stroke:1.25,linestyle:"plain",opacity:.2,showOrientation:!1,shape:"circle",symbolId:void 0,symboltype:void 0,size:10}}const Bm=function(a,e){let t=0,i=[];a.getType()==="Polygon"?i=a.getCoordinates()[0]:a.getType()==="LineString"&&(i=a.getCoordinates());for(let n=0,s=i.length-1;n<s;++n){const r=fr(i[n],e,Wu),l=fr(i[n+1],e,Wu);t+=ew(r,l)}return t},T3=function(a){return Math.abs(cP(a))},ule=function(a,e){const t=q1(a,e);return 2*Math.PI*t},cle=function(a,e){return Math.PI*Math.pow(q1(a,e),2)},q1=function(a,e){const t=a.getLastCoordinate(),i=a.getCenter();return i!==null&&t!==null?Bm(new Ki([i,t]),e):0},eE=function(a,e,t){const i=a.getCenter(),n=t.getView().getProjection(),s=t.getView().getResolution()||0,r=A1(n,s,i),l=s/r;e=e/Um.m*l,a.setRadius(e)};function tE(a){const e=a.getGeometry();return a.featureType==="drawnCircle"&&e?.getType()==="Circle"&&a.setGeometry(kP(e,64)),a}function $O(a){const e=qa().getOlMap();if(!e)return a;const t=a.getGeometry();if(a.featureType==="drawnCircle"&&t?.getType()==="Polygon"){const i=t.getExtent(),n=[(i[0]+i[2])/2,(i[1]+i[3])/2],s=t.getCoordinates()[0];let r=0;s.forEach(u=>{const d=ew(bc(n),bc(u));d>r&&(r=d)});const l=new p_(n);e?eE(l,r,e):l.setRadius(r),a.setGeometry(l)}return a}function JO(a){const e=a.getGeometry().getCoordinates().reverse();a.setGeometry(new Ki(e))}function dle(a){const e=$n(),t=a.filter(r=>["LineString","MultiLineString"].includes(r.getGeometry()?.getType())),i=t.shift(),n=t.map(r=>r.id);if(!i)return;const s=i.getGeometry();for(;t.length>0;){const r=s.getFirstCoordinate(),l=s.getLastCoordinate();let u,d=!1,h=!1;for(let x=0;x<t.length;x++){const I=t[x].getGeometry(),A=I.getFirstCoordinate(),E=I.getLastCoordinate(),L=new Ki([r,A]),G=new Ki([l,E]),F=new Ki([l,A]),B=new Ki([r,E]),Z=L.getLength(),Y=F.getLength(),$=B.getLength(),te=G.getLength();Z<Y&&Z<$&&Z<te?(u===void 0||Z<u)&&(u=Z,d=!0,h=!0):te<Z&&te<Y&&te<$?(u===void 0||te<u)&&(u=te,d=!1,h=!0):Y<Z&&Y<$&&Y<te?(u===void 0||Y<u)&&(u=Y,d=!1,h=!1):(u===void 0||$<u)&&(u=$,d=!0,h=!1)}let y=t.shift().getGeometry();return h&&(y=new Ki(y.getCoordinates().reverse())),s.setCoordinates(d?y.getCoordinates().concat(s.getCoordinates()):s.getCoordinates().concat(y.getCoordinates())),i.resetProfileData(),e.removeFeature(n),i}}function hle(){const a=$n(),{activateDrawLineContinue:e}=a,{currentDrawInteraction:t}=xt(a),i=qa().getOlMap();function n(r,l){const u=Tl.clone(r),d=u.getGeometry();return eE(d,l,i),u}async function s(r){e(),t.value&&(await so(),t.value?.setActive(!0),t.value?.extend(r))}return{createConcentricCircle:n,continueLine:s}}const _le="https://migration.geoportail.lu/mymaps",mle="https://migration.geoportail.lu/mymaps/symbol",fle=_le+"/getarrow",T4={dataProjection:tu,featureProjection:Fm};class Tl extends Di{id;fid;label;description;display_order;selected;editable;map_id;saving;featureType;_featureStyle;map=qa().getOlMap();profileData=void 0;constructor(e,t){e?(super(e.getGeometry()),this.label=e.label,this.featureType=e.featureType,this.map_id=e.map_id,this.description=e.description,this.display_order=e.display_order,this.selected=e.selected,this.editable=e.editable,this._featureStyle=e.featureStyle,this.id=e.id,this.saving=e.saving,this.setProperties(e.getProperties())):(super(t),this.editable=!1)}clone(){const e=new Tl(this,this.hasProperties()?this.getProperties():void 0);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e.id=V1(),e}static clone(e){return e.clone()}static generateFromFeature(e,t={}){const i=Object.assign(new Tl,e,{id:V1(),label:void 0,description:"",display_order:void 0,selected:!1,editable:!1,map_id:void 0,saving:!1,featureType:void 0},t);i.editable=i.map_id===void 0;const n=e.getGeometry()?.getType(),s={Point:"drawnPoint",LineString:"drawnLine",Polygon:"drawnPolygon",Circle:"drawnCircle"};return i.featureType===void 0&&(i.featureType=s[n]||"drawnPolygon"),i.featureStyle=lle(),i.fromProperties(e.getProperties()),i.setStyle(i.getStyleFunction()),i}static generateFromGeoJson(e,t={}){const i=new $l(T4).readFeature(e),n=Tl.generateFromFeature(i,t),s=i.getProperties();return n.fromProperties(s),n.setStyle(n.getStyleFunction()),n}get featureStyle(){return this._featureStyle}set featureStyle(e){this._featureStyle=e,this.changed()}fit(){const e=this.map.getSize(),t=this.getGeometry()?.getExtent();this.map.getView().fit(t,{size:e})}resetProfileData(){this.profileData=void 0}async getProfile(){const e=this.getGeometry();if(!(e?.getType()!=="LineString"&&e?.getType()!=="MultiLineString")){if(this.profileData===void 0){const t=new $l().writeGeometry(this.getGeometry(),T4),i=await ole(t,this.id);let n=0,s=0,r=0,l;this.profileData=i.profile.map(u=>{const d={...u,cumulativeElevation:0,elevationGain:0,elevationLoss:0},h=d.values.dhm;if(l!==void 0){const g=h-l;r=r+g,g>0?n=n+g:s=s+g}return d.cumulativeElevation=r,d.elevationGain=n,d.elevationLoss=s,l=h,d})}return this.profileData}}toProperties(){return{angle:this.featureStyle.angle,color:this.featureStyle.color,description:this.description,display_order:this.display_order,fid:this.fid,stroke:this.featureStyle.stroke,isLabel:this.featureType==="drawnLabel",linestyle:this.featureStyle.linestyle,name:this.label,opacity:this.featureStyle.opacity,showOrientation:this.featureStyle.showOrientation,shape:this.featureStyle.shape,size:this.featureStyle.size,isCircle:this.featureType==="drawnCircle",symbolId:this.featureStyle.symbolId,symboltype:this.featureStyle.symboltype,__map_id__:this.map_id}}fromProperties(e){e&&(this.description=e.description??this.description,this.display_order=e.display_order??this.display_order,this.label=e.name??this.label,this.map_id=e.__map_id__??this.map_id,e.isCircle===!0?this.featureType="drawnCircle":e.isLabel===!0&&(this.featureType="drawnLabel"),this.featureStyle={angle:e.angle??this.featureStyle.angle,color:e.color??this.featureStyle.color,stroke:e.stroke??this.featureStyle.stroke,linestyle:e.linestyle??this.featureStyle.linestyle,opacity:e.opacity??this.featureStyle.opacity,showOrientation:e.showOrientation??this.featureStyle.showOrientation,shape:e.shape??this.featureStyle.shape,size:e.size??this.featureStyle.size,symbolId:e.symbolId??this.featureStyle.symbolId,symboltype:e.symboltype??this.featureStyle.symboltype,arrowcolor:e.arrowcolor??this.featureStyle.arrowcolor})}toGeoJSONString(){const e=this.clone();return e.setProperties(this.toProperties()),new $l().writeFeature(e.getGeometry()?.getType()==="Circle"?tE(e):e,T4)}getStyleFunction(){const e=[],t=new $a({image:new bl({radius:6,points:4,angle:Math.PI/4,fill:new ji({color:[255,255,255,.5]}),stroke:new Li({color:[0,0,0,1]})}),geometry:function(l){const u=l.getGeometry();let d;return u instanceof Ki?(d=u.getCoordinates(),new $d(d)):u instanceof Gs?(d=u.getCoordinates()[0],new $d(d)):u}}),i=new $a({image:new Qr({radius:8,fill:new ji({color:[0,0,255,.8]}),stroke:new Li({color:[255,255,255,1],width:2})}),geometry:function(l){const u=l.getGeometry();if(u instanceof p_)return new Ln(u.getCenter())}}),n=new ji,s=fle,r=this.map;return function(l,u){u===void 0&&(u=l,l=this),e.length=0,l.get("__isBeingEdited__")&&(e.push(t),l.featureType==="drawnCircle"&&l.getGeometry()?.getType()==="Circle"&&e.push(i));const d=l.display_order??0,h=l.featureStyle.color||"#FF0000",g=DR(h,1),y=DR(h,l.featureStyle.opacity??1);if(n.setColor(y),l.getGeometry()?.getType()==="LineString"&&l.featureStyle.showOrientation){let G,F,B=l.featureStyle.arrowcolor;B==null&&(B=h),l.getGeometry()?.forEachSegment(function(Z,Y){const $=new Ln([(Z[0]+Y[0])/2,(Z[1]+Y[1])/2]),te=Y[0]-Z[0],ce=Y[1]-Z[1];if(G!=null){const me=r.getPixelFromCoordinate($.getCoordinates()),X=r.getPixelFromCoordinate(G.getCoordinates()),de=X[0]-me[0],N=X[1]-me[1];F=Math.sqrt(de*de+N*N)}if(!G||F>600){const me=s,X=Math.PI/2-Math.atan2(ce,te);e.push(new $a({geometry:$,zIndex:d,image:new Gu({color:B,rotation:X,src:me})})),G=$}})}let x;if(l.featureStyle.linestyle)switch(l.featureStyle.linestyle){case"dashed":x=[10,10];break;case"dotted":x=[1,6];break}let C,I=l.featureStyle.stroke;I>0&&(l.selected&&(I=I+3),C=new Li({color:g,width:I,lineDash:x}));let A=l.featureStyle.size;l.selected&&(A=A+3);const E={fill:n,stroke:new Li({color:g,width:A/7}),radius:A};let L=null;if(l.featureType==="drawnPoint"||l.featureType==="drawnLabel")if(l.featureStyle.symbolId){const G={...E,src:mle+"/"+l.featureStyle.symbolId+"?scale="+A,scale:1,rotation:l.featureStyle.angle};L=new Gu(G)}else{const G=l.featureStyle.shape;G==="circle"?L=new Qr(E):G==="square"?(Object.assign(E,{points:4,angle:Math.PI/4,rotation:l.featureStyle.angle}),L=new bl(E)):G==="triangle"?(Object.assign(E,{points:3,angle:0,rotation:l.featureStyle.angle}),L=new bl(E)):G==="star"?(Object.assign(E,{points:5,angle:Math.PI/4,rotation:l.featureStyle.angle,radius2:A}),L=new bl(E)):G==="cross"&&(Object.assign(E,{points:4,angle:0,rotation:l.featureStyle.angle,radius2:0}),L=new bl(E))}return l.featureType==="drawnLabel"?[new $a({text:new rh({text:l.label,textAlign:"left",font:"normal "+A+"px Sans-serif",rotation:l.featureStyle.angle,fill:new ji({color:g}),stroke:new Li({color:[255,255,255],width:2})})})]:(L?e.push(new $a({image:L,fill:n,stroke:C,zIndex:d})):e.push(new $a({fill:n,stroke:C,zIndex:d})),e)}}}let VR=!1;function A_(){const{t:a}=Ct(),e=ri(),t=Vi(),i=$n(),{drawnFeatures:n,drawnFeaturesMyMaps:s,drawnFeaturesExceptMyMaps:r}=xt(i),l=Bn(),{addNotification:u}=ar(),{authenticated:d}=xt(Nu()),{myMap:h,myMapId:g,myMapIsLoading:y,myMapLayersChanged:x}=xt(e),{layers:C,bgLayer:I}=xt(t),A=Al(),{themeName:E}=xt(l),{initLayer:L}=no(),{setBgLayer:G}=iI(),F=St(()=>h.value?.is_editable&&d.value?h.value.uuid:void 0);function B(){u(a("Erreur inattendue lors du chargement de votre carte."),fi.ERROR)}async function Z(ne){h.value=void 0,y.value=!0;try{const[le,_e]=await Promise.all([koe(ne),Doe(ne)]),ke=_e.features?.map(Ie=>{const re=Tl.generateFromGeoJson(Ie,{map_id:ne,id:Ie.id,fid:Ie.id,display_order:Ie.properties?.display_order});return $O(re)});h.value=le,ke.forEach(Ie=>{Ie.editable=d.value&&le.is_editable}),n.value=[...n.value,...ke]}catch(le){console.error("[MyMaps] loadMyMap() - ERROR",le),B()}finally{y.value=!1}}function Y(ne){g.value=ne}function $(){g.value&&i.removeMyMapsFeature(g.value),g.value=void 0,h.value=void 0}async function te(ne){const le=await Noe(ne);return le&&(s.value.forEach(_e=>UO(_e.id)),i.removeMyMapsFeature(ne)),le}async function ce(){if(h.value){const ne=C.value.reverse();h.value.bg_layer=I.value?.name??"blank",h.value.bg_opacity=1,h.value.layers=ne.map(le=>le.name).join(","),h.value.layers_opacity=ne.map(le=>le.opacity??"1").join(","),h.value.layers_visibility=ne.map(()=>"true").join(","),h.value.layers_indices=ne.map((le,_e)=>_e).join(","),zO(h.value.uuid,h.value.bg_layer,h.value.bg_opacity,h.value.layers,h.value.layers_opacity,h.value.layers_visibility,h.value.layers_indices,E.value).catch(()=>u(a("Erreur inattendue lors de la mise  jour de votre carte."),fi.ERROR))}}function me(){G(void 0,h.value?.bg_layer);const ne=h.value?.layers_opacity?h.value?.layers_opacity.split(",").map(ke=>parseInt(ke,10)):[],le=h.value?.layers_visibility?h.value?.layers_visibility.split(",").map(ke=>ke!=="false"):[],_e=h.value?.layers?h.value?.layers.split(",").map((ke,Ie)=>{const re=A.findByName(ke.trim());if(re){const Q=L(re);return Q.opacity=le[Ie]??!0?ne[Ie]:0,Q}}).filter(ke=>ke!==void 0):[];if(t.removeAllLayers(),t.addLayers(..._e),h.value&&h.value.zoom!==null&&h.value.x!==null&&h.value.y!==null){const ke=qa().getOlMap();ke.getView().setZoom(h.value.zoom),ke.getView().setCenter([h.value.x,h.value.y])}else{const ke=qa().getOlMap(),Ie=Qo();s.value.forEach(re=>{re.getGeometry()&&vp(Ie,re.getGeometry().getExtent())}),Ie[0]!==1/0&&Ie[1]!==1/0&&Ie[2]!==-1/0&&Ie[3]!==-1/0&&Ie[0]<Ie[2]&&Ie[1]<Ie[3]&&ke.getView().fit(Ie,{padding:[20,20,20,20]})}}function X(){VR||(Rt(g,async(ne,le)=>{ne&&ne!==le&&qa().getOlMap()?Z(ne):!ne&&le&&(s.value.forEach(_e=>{_e.map_id=void 0,_e.editable=!0,_e.changed()}),h.value=void 0)},{immediate:!0}),Rt(()=>qa().olMap,ne=>{ne&&g.value&&!h.value&&Z(g.value)}),Rt(h,ne=>ne&&me()),Rt(d,ne=>{s.value.forEach(le=>{le.editable=ne&&(h.value?.is_editable??!1),le.changed()}),ne&&g.value&&h.value&&Z(g.value)}),Rt([C,I,h],([ne,le,_e])=>x.value=_e?gle(_e,ne,le):!1,{immediate:!0,deep:!0}),VR=!0)}async function de(){if(F.value){const ne=[...r.value],le=ne.map(_e=>_e.id).filter(_e=>_e!==void 0);le.length>0&&i.removeFeature(le,!1),await Promise.all(ne.map(async _e=>{_e.map_id=F.value;const ke=await A3(_e.map_id,_e.toGeoJSONString()).catch(Ie=>{console.error("[MyMaps] Error saving feature:",Ie),u(a("Erreur inattendue lors de la sauvegarde de votre modification."),fi.ERROR)});ke&&(_e.id=ke.id,_e.fid=ke.id)})),n.value=[...n.value,...ne]}}function N(){return d.value?!0:(u(a("Veuillez vous identifier afin d'accder  vos cartes")),e.toggleAuthFormOpen(!0),!1)}return{isMyMapEditable:F,init:X,addInMyMap:de,loadMyMap:Z,checkAuth:N,clearMyMap:te,closeMyMap:$,openMyMap:Y,applyToMyMap:ce,resetFromMyMap:me}}function gle(a,e,t){const i=e.map(s=>s.name).join(","),n=e.map(s=>s.opacity).join(",");return i!==(a.layers??"")||n!==(a.layers_opacity??"")||(t?.name??"blank")!==(a.bg_layer??"blank")}function rI(){const a=$n(),{drawStateActive:e,drawnFeatures:t}=xt(a),{isMyMapEditable:i}=A_();function n(s){const r=s.getGeometry()?.getType().replace("String",""),l=e.value==="drawCircle"?"drawnCircle":e.value==="drawLabel"?"drawnLabel":`drawn${r}`,u=s.get("name")||`${wV(r)} ${t.value.length+1}`,d=Tl.generateFromFeature(s,{label:u,display_order:t.value.length,featureType:l,map_id:i.value});return d.fromProperties(s.getProperties()),d}return{generateDrawnFeature:n}}function ple(){const a=qa().getOlMap(),e=$n(),{drawStateActive:t,editStateActive:i,followRoads:n}=xt(e),{generateDrawnFeature:s}=rI(),r=Ye(!1),l=Ye(!0);let u=null,d=null;function h(){return"https://map.geoportail.lu/mymaps/getroute"}function g(){if(!a)return null;const L=a.getLayers().getArray();for(const G of L)if(G instanceof bs&&G.get("cyLayerType")==="interactionDrawLayer")return G.getSource();return null}function y(L={}){if(!a)return;let G=null;a.getInteractions().getArray().forEach(Y=>{if(Y instanceof Yp&&Y.getActive()){const $=Y.overlay_;if($){const te=$.getSource(),ce=te?.getFeatures();ce&&ce.length>0&&(G=ce[0],te.clear())}d=Y,Y.setActive(!1)}});const B=g();if(!B)return;u=new joe({source:B,mapMatching:L.mapMatching??l.value,getRouteUrl:h(),maxPoints:1/0,freehand:!1,existingSketch:G||void 0});const Z=Y=>{E(Y)};u.addEventListener("drawend",Z),a.addInteraction(u),r.value=!0}function x(){if(!a||!u)return;u.setActive(!1);const L=u.sketchFeature_,G=u.sketchCoords_;u.suspendDrawing(),a.removeInteraction(u),u=null,r.value=!1,d&&(i.value||(d.setActive(!0),L&&G&&(d.sketchFeature_=L,d.sketchCoords_=G,d.updateSketchFeatures_())),d=null)}function C(){if(u){const L=u.toggleMapMatching();return l.value=L,L}return l.value=!l.value,l.value}function I(){u&&u.removeLastPoint()}function A(){u&&u.finishDrawing()}function E(L){const G=L.feature,F=s(G);e.addDrawnFeatureToCollection(F),e.selectDrawnFeature(F)}return Rt(n,L=>{t.value==="drawLine"&&i.value!=="editLine"&&(L?y({mapMatching:!0}):x())}),Rt(t,(L,G)=>{L==="drawLine"&&n.value&&i.value!=="editLine"&&y({mapMatching:!0}),G==="drawLine"&&L!=="drawLine"&&i.value!=="editLine"&&(r.value&&x(),n.value=!1)}),Rt(i,(L,G)=>{L!==void 0&&r.value&&x(),G!==void 0&&L===void 0&&t.value==="drawLine"&&n.value&&y({mapMatching:!0})}),Nr(()=>{x()}),{isActive:r,mapMatchingEnabled:l,activate:y,deactivate:x,toggleMapMatching:C,removeLastPoint:I,finishDrawing:A}}const yle={class:"block"},Pg=rt({__name:"button-text",props:{label:{},active:{type:Boolean}},setup(a){const e=a;return(t,i)=>(U(),se("button",{class:Fa(["h-16 w-16 text-white hover:bg-primary",e.active?"bg-primary":"bg-tertiary"])},[P("span",yle,K(e.label),1)],2))}}),ble={"data-cy":"toolbarDraw"},vle={class:"absolute bottom-full top-auto z-20 flex flex-row justify-start divide-y-0 divide-x divide-gray-400 divide-solid box-content border-y-0 border-x border-gray-400"},xle={key:0,class:"absolute bottom-full top-auto z-10 pl-[130px] pb-16 w-[326px]","data-cy":"followRoads"},wle={class:"flex flex-row justify-center text-white bg-tertiary hover:bg-primary py-2 box-content border-y border-x border-gray-400"},Cle={class:"cursor-pointer"},Ile=["disabled"],Sle=rt({__name:"toolbar-draw",setup(a){const{t:e}=Ct(),t=$n(),{toggleDrawCircle:i,toggleDrawLabel:n,toggleDrawLine:s,toggleDrawPolygon:r,toggleDrawPoint:l,setDrawActiveState:u}=t,{drawStateActive:d,editStateActive:h,followRoads:g}=xt(t);return ple(),sf(()=>{u(void 0)}),(y,x)=>(U(),se("div",ble,[P("ul",vle,[P("li",null,[gt(Pg,{label:R(e)("Draw Point",{ns:"client"}),active:R(d)==="drawPoint"||R(h)==="editPoint",onClick:R(l),"data-cy":"drawPointButton"},null,8,["label","active","onClick"])]),P("li",null,[gt(Pg,{label:R(e)("Label",{ns:"client"}),active:R(d)==="drawLabel"||R(h)==="editLabel",onClick:R(n),"data-cy":"drawLabelButton"},null,8,["label","active","onClick"])]),P("li",null,[gt(Pg,{label:R(e)("Line",{ns:"client"}),active:R(d)==="drawLine"||R(h)==="editLine",onClick:R(s),"data-cy":"drawLineButton"},null,8,["label","active","onClick"])]),P("li",null,[gt(Pg,{label:R(e)("Polygon",{ns:"client"}),active:R(d)==="drawPolygon"||R(h)==="editPolygon",onClick:R(r),"data-cy":"drawPolygonButton"},null,8,["label","active","onClick"])]),P("li",null,[gt(Pg,{label:R(e)("Circle",{ns:"client"}),active:R(d)==="drawCircle"||R(h)==="editCircle",onClick:R(i),"data-cy":"drawCircleButton"},null,8,["label","active","onClick"])])]),R(d)==="drawLine"||R(h)==="editLine"?(U(),se("ul",xle,[P("li",wle,[P("label",Cle,[Sa(P("input",{type:"checkbox","onUpdate:modelValue":x[0]||(x[0]=C=>Pn(g)?g.value=C:null),disabled:R(h)==="editLine",class:"mr-2 cursor-pointer"},null,8,Ile),[[Xd,R(g)]]),Dt(" "+K(R(e)("Suivre la route",{ns:"client"})),1)])])])):Ge("",!0)]))}}),Ale="https://migration.geoportail.lu/raster",Tle="EPSG:3857",Ele="EPSG:2169",Y1=async(a,e)=>{const t=fr(a,Tle,Ele);try{const i=await fetch(`${Ale}?lon=${t[0]}&lat=${t[1]}`,{signal:e});if(!i.ok)throw new Error("Network response was not ok");return(await i.json()).dhm}catch{return null}},QO=Are(Y1,300);class Mle{measureTooltipElement=null;measureTooltipOverlay=null;changeEventKey=null;add(e,t){this.createMeasureTooltip(e);const i=t.feature.getGeometry();if(i===void 0)return;const n=e.getView().getProjection();this.changeEventKey=xa(i,"change",()=>this.updateTootip(i,n),this)}remove(){this.removeMeasureTooltip(),this.changeEventKey!==null&&(yl(this.changeEventKey),this.changeEventKey=null)}createPersistentMeasurement(e,t){const i=document.createElement("div");i.classList.add("lux-tooltip");const n=new Nm({element:i,offset:[0,-15],positioning:"bottom-center",stopEvent:!1});e.addOverlay(n);const s=e.getView().getProjection(),r=()=>{let u,d="";if(t.getType()==="LineString"){const h=t;u=h.getCoordinateAt(.5),u!=null&&(d=s_(Bm(h,s),1))}else if(t.getType()==="Polygon"){const h=t;h.getCoordinates()[0].length>2&&(u=h.getInteriorPoint().getCoordinates()),u!=null&&(d=YA(T3(h)))}i.innerText=d,n.setPosition(u)},l=xa(t,"change",r,this);return r(),()=>{try{e.removeOverlay(n)}catch{}try{yl(l)}catch{}try{i.parentNode&&i.parentNode.removeChild(i)}catch{}}}createMeasureTooltip(e){this.removeMeasureTooltip(),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.classList.add("lux-tooltip"),this.measureTooltipOverlay=new Nm({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center",stopEvent:!1}),e.addOverlay(this.measureTooltipOverlay)}removeMeasureTooltip(){this.measureTooltipElement!==null&&(this.measureTooltipElement.parentNode?.removeChild(this.measureTooltipElement),this.measureTooltipElement=null,this.measureTooltipOverlay=null)}updateTootip(e,t){let i,n="";if(e.getType()==="LineString"){const s=e;i=s.getCoordinateAt(.5),i!=null&&(n=s_(Bm(s,t)))}else if(e.getType()==="Polygon"){const s=e;s.getCoordinates()[0].length>2&&(i=s.getInteriorPoint().getCoordinates()),i!=null&&(n=YA(T3(s)))}else if(e.getType()==="Circle"){const s=e;i=s.getLastCoordinate();const r=s.getCenter();r!=null&&i!=null&&(n=s_(Bm(new Ki([r,i]),t),1))}this.measureTooltipElement&&(this.measureTooltipElement.innerText=n,this.measureTooltipOverlay?.setPosition(i))}}const Iu=new Mle;function Lle(){const a=Ye(void 0),e=Ye(null),t=Ye(null),{t:i}=Ct(),{warn:n,error:s}=Mb("MEASURE"),r=qa().getOlMap(),l=Ye(!1),u=Ye(null),d=Ye(null),h=Ye(null),g=Ye(null),y=Ye(null),x=[],C=new $a({stroke:new Li({color:"#ff8c00",width:4})}),I=new $a({stroke:new Li({color:"#ff8c00",width:2,lineDash:[6,6]})}),A=-15,E=-30,L=[0,A],G=[0,E],F="bottom-center";function B(){if(!(!y.value||!r)){try{r.removeOverlay(y.value)}catch(X){n("[measure] removeHintOverlay failed",X)}y.value=null}}function Z(X,de){if(r)try{B();const N=document.createElement("div");N.className="lux-tooltip lux-tooltip--hint",N.innerHTML=X;const ne=new Nm({element:N,offset:G,positioning:F,stopEvent:!1});y.value=ne,r.addOverlay(y.value);const le=de||r.getView()&&r.getView().getCenter();le&&y.value.setPosition(le)}catch(N){n("[measure] showHintOverlay failed",N)}}function Y([X,de],[N,ne]){const le=de*Math.PI/180,_e=ne*Math.PI/180,ke=X*Math.PI/180,Ie=N*Math.PI/180,re=Math.sin(Ie-ke)*Math.cos(_e),Q=Math.cos(le)*Math.sin(_e)-Math.sin(le)*Math.cos(_e)*Math.cos(Ie-ke),je=(Math.atan2(re,Q)*180/Math.PI+360)%360;return je>180?je-360:je}function $(X,de,N){const ne=document.createElement("div");ne.className="lux-tooltip",ne.innerHTML=X,N&&ne.dataset&&(ne.dataset.measurementId=N);const le=new Nm({element:ne,offset:L,positioning:F,stopEvent:!1});return le.setPosition(de),r.addOverlay(le),le}function te(X){if(!r)return;let de=u.value?.getSource();if(!de){try{const le=r.getLayers().getArray();for(const _e of le)try{if(_e.get&&_e.get("cyLayerType")==="interactionMeasureLayer"){u.value=_e,de=u.value.getSource();break}}catch{}}catch{}de||(de=new lo,u.value=new bs({source:de}),u.value.set("cyLayerType","interactionMeasureLayer"),r.addLayer(u.value))}const N=X==="azimuth"?"Circle":X==="area"?"Polygon":"LineString",ne=new Yp({type:N,source:de});h.value=xa(r,"pointermove",le=>{g.value=le.coordinate;try{y.value&&r&&y.value.setPosition(le.coordinate)}catch(_e){n("[measure] pointermove handler failed",_e)}}),xa(ne,"drawstart",le=>{try{if(X!=="azimuth"){Iu.add(r,le);try{const _e=le.feature?.getGeometry();let ke;if(_e&&_e.getType&&_e.getType()==="LineString"){const Ie=_e.getCoordinateAt(.5);Ie&&Ie.length>=2&&(ke=[Ie[0],Ie[1]])}Z(i(X==="area"?"measure_continue_instruction_area":"measure_continue_instruction"),ke)}catch(_e){n("[measure] drawstart hint update failed",_e)}}}catch(_e){n("[measure] drawstart handler failed",_e)}}),xa(ne,"drawstart",le=>{if(!(X!=="azimuth"||!r))try{const ke=le.feature.getGeometry(),Ie=ke&&ke.getCenter?ke.getCenter():null;if(!Ie)return;const re=new Di({geometry:new Ki([Ie,Ie])});re.set("isMeasurement",!0),re.set("isAzimuthPreview",!0),re.setStyle(I),de.addFeature(re);const Q=new Di({geometry:new p_(Ie,0)});Q.set("isMeasurement",!0),Q.set("isAzimuthPreview",!0),Q.setStyle(I),de.addFeature(Q);const J=document.createElement("div");J.className="lux-tooltip",J.innerHTML="";const je=new Nm({element:J,offset:L,positioning:F,stopEvent:!1});e.value=je,r.addOverlay(e.value);try{Z(i("measure_continue_instruction_azimuth"),Ie)}catch(Je){n("[measure] showHintOverlay (azimuth) failed",Je)}const Qe=xa(r,"pointermove",Je=>{try{const kt=Je.coordinate;g.value=kt;const Pt=[kt[0],kt[1]];try{re.getGeometry().setCoordinates([Ie,Pt])}catch(zt){n("[measure] previewRadial.setCoordinates failed",zt)}try{Q.getGeometry().setRadius(Math.sqrt((Pt[0]-Ie[0])**2+(Pt[1]-Ie[1])**2))}catch(zt){n("[measure] previewCircle.setRadius failed",zt)}try{const zt=Y(bc(Ie),bc(Pt)),Nt=s_(Bm(new Ki([Ie,Pt]),r.getView().getProjection()));J.innerHTML=`${zt.toFixed(1)}  ${Nt}`;const ga=[(Ie[0]+Pt[0])/2,(Ie[1]+Pt[1])/2];e.value?.setPosition(ga)}catch(zt){n("[measure] azimuth preview overlay update failed",zt)}}catch(kt){n("[measure] azimuth pointermove outer failed",kt)}});t.value={radial:re,preview:Q,key:Qe},x.push(()=>{try{const Je=t.value?.key;Je&&yl(Je)}catch(Je){n("[measure] unByKey for azimuth preview failed",Je)}try{e.value&&r&&r.removeOverlay(e.value),e.value=null}catch(Je){n("[measure] removing azimuth preview overlay failed",Je)}try{t.value?.radial&&de.removeFeature(t.value.radial),t.value?.preview&&de.removeFeature(t.value.preview)}catch(Je){n("[measure] removing azimuth preview features failed",Je)}})}catch(_e){n("[measure] azimuth drawstart handler failed",_e)}}),xa(ne,"drawend",le=>{const _e=le.feature?.getGeometry();if(_e&&r&&a.value!=="azimuth"){const Ie=Iu.createPersistentMeasurement(r,_e);x.push(Ie)}if(Iu.remove(),B(),h.value){try{yl(h.value)}catch(Ie){n("[measure] unByKey(pointerMoveKey) failed",Ie)}h.value=null}const ke=le.feature;if(ke){if(X==="area")Vx(async()=>{const{Fill:Ie}=await Promise.resolve().then(()=>TR);return{Fill:Ie}},void 0).then(({Fill:Ie})=>{ke.setStyle(new $a({stroke:new Li({color:"#ff8c00",width:3}),fill:new Ie({color:"rgba(255,140,0,0.15)"})}))});else if(X==="azimuth"){Vx(async()=>{const{Fill:re}=await Promise.resolve().then(()=>TR);return{Fill:re}},void 0).then(({Fill:re})=>{ke.setStyle(new $a({stroke:new Li({color:"#ff8c00",width:3}),fill:new re({color:"rgba(255,140,0,0.05)"})}))});const Ie=ke.getGeometry();if(Ie&&Ie.getCenter&&Ie.getRadius){const re=Ie.getCenter(),Q=Ie.getRadius(),J=g.value;let je=0;J&&(je=Math.atan2(J[1]-re[1],J[0]-re[0]));const Qe=[re[0]+Q*Math.cos(je),re[1]+Q*Math.sin(je)],Je=new p_(re,Q);ke.setGeometry(Je);const kt=new Di({geometry:new Ki([re,Qe])});kt.setStyle(new $a({stroke:new Li({color:"#ff8c00",width:2})})),kt.set("isMeasurement",!0),kt.set("isAzimuthRadial",!0),de.addFeature(kt),x.push(()=>de.removeFeature(kt));const Pt=[(re[0]+Qe[0])/2,(re[1]+Qe[1])/2],zt=Y(bc(re),bc(Qe)),Nt=s_(Bm(new Ki([re,Qe]),r.getView().getProjection())),ga=`${zt.toFixed(1)}`;if(e.value&&r){try{r.removeOverlay(e.value)}catch(Re){n("[measure] removing azimuth preview overlay failed",Re)}try{e.value=null}catch{}}let ta=!1;try{ta=ke?.get&&(!!ke.get("measurementId")||!!ke.get("finalOverlayRef"))}catch(Re){n("[measure] checking measurementId/finalOverlayRef failed",Re)}let Fe=null;if(!ta){const Re=V1();try{ke.set("measurementId",Re)}catch(fe){n("[measure] setting measurementId on feature failed",fe)}try{kt.set("measurementId",Re)}catch(fe){n("[measure] setting measurementId on radial failed",fe)}Fe=$(`${ga}  ${Nt}  h: N/A`,Pt,Re);try{const fe=Fe?Fe.getElement&&Fe.getElement():null;fe&&fe.dataset&&(fe.dataset.measurementId=Re)}catch(fe){n("[measure] annotating final overlay element failed",fe)}try{ke.set("finalOverlayRef",Fe)}catch(fe){n("[measure] setting finalOverlayRef failed",fe)}try{x.push(()=>{try{de.removeFeature(ke)}catch(fe){n("[measure] removing persistent feature failed",fe)}})}catch(fe){n("[measure] registering persistent remover failed",fe)}}const De=(Re,fe,ie,Ce,Ee)=>{if(Re)try{const Ne=Re?Re.getElement&&Re.getElement():null;Ne&&(Ne.innerHTML=Ee===null?`${ie.toFixed(1)}  ${Ce}  h: N/A`:`${ie.toFixed(1)}  ${Ce}  h: ${Ee} m`),Re.setPosition(fe)}catch(Ne){n("[measure] updating final overlay failed",Ne)}},z=new AbortController,Ze=()=>{try{z.abort()}catch{}};x.push(Ze),(async()=>{try{const[Re,fe]=await Promise.all([Y1(re,z.signal),Y1(Qe,z.signal)]);try{const ie=r.getOverlays().getArray();if(!Fe||ie.indexOf(Fe)===-1){const Ce=x.indexOf(Ze);Ce!==-1&&x.splice(Ce,1);return}}catch{}if(Re===null||fe===null)n("[measure][azimuth] elevation data missing for points",{eCenter:Re,eEdge:fe,center:re,edge:Qe}),De(Fe,Pt,zt,Nt,null);else{const ie=Math.round(fe-Re);De(Fe,Pt,zt,Nt,ie)}}catch(Re){s("[measure][azimuth] elevation request failed",Re);try{const fe=r.getOverlays().getArray();if(!Fe||fe.indexOf(Fe)===-1)return}catch{}De(Fe,Pt,zt,Nt,null)}finally{const Re=x.indexOf(Ze);Re!==-1&&x.splice(Re,1)}})()}}else ke.setStyle(C);ke.set("isMeasurement",!0)}try{ne.setActive(!1),r.removeInteraction(ne)}catch(Ie){n("[measure] removing draw interaction failed",Ie)}if(t.value){try{const{radial:Ie,preview:re,key:Q}=t.value;Q&&yl(Q),Ie&&de.removeFeature(Ie),re&&de.removeFeature(re)}catch(Ie){n("[measure] cleanup azimuth preview state failed",Ie)}t.value=null}d.value=null,a.value=void 0,l.value=!1}),r.addInteraction(ne),d.value=ne,a.value=X,l.value=!0;try{const le=X==="azimuth"?"measure_start_instruction_azimuth":X==="area"?"measure_start_instruction_area":"measure_start_instruction",_e=g.value??(r.getView()&&r.getView().getCenter());Z(i(le),_e)}catch(le){n("[measure] showHintOverlay (start hint) failed",le)}}function ce(){if(r&&l.value){if(d.value&&(d.value.setActive(!1),r.removeInteraction(d.value),d.value=null),Iu.remove(),h.value){try{yl(h.value)}catch(X){n("[measure] unByKey(pointerMoveKey) failed",X)}h.value=null}if(B(),t.value){try{const{radial:X,preview:de,key:N}=t.value;N&&yl(N);const ne=u.value?.getSource();ne&&(X&&ne.removeFeature(X),de&&ne.removeFeature(de))}catch(X){n("[measure] cleaning up azimuthPreviewState in deactivate failed",X)}t.value=null}if(e.value&&r){try{r.removeOverlay(e.value)}catch(X){n("[measure] removing azimuth preview overlay in deactivate failed",X)}e.value=null}g.value=null,l.value=!1}}function me(){ce();try{x.forEach(X=>X())}catch(X){n("[measure] running persistent removers failed",X)}x.length=0;try{r.getLayers().getArray().slice().forEach(de=>{try{const N=de.getSource&&de.getSource();if(!N||!N.getFeatures)return;N.getFeatures().slice().forEach(ne=>{try{const le=ne.get&&(ne.get("isMeasurement")||ne.get("isAzimuthRadial")||ne.get("isAzimuth")||ne.get("isAzimuthPreview")||ne.get("measurementId")||ne.get("finalOverlayRef")),_e=ne.getGeometry&&ne.getGeometry().getType&&ne.getGeometry().getType()==="Circle";(le||_e)&&N.removeFeature(ne)}catch(le){n("[measure] removing measurement features failed",le)}});try{de.get&&de.get("cyLayerType")==="interactionMeasureLayer"&&r.removeLayer(de)}catch(ne){n("[measure] removing interaction measure layer failed",ne)}}catch(N){n("[measure] iterating layers during reset failed",N)}});try{Rle(r)}catch(de){n("[measure] removeAllMeasurementOverlays failed",de)}u.value=null}catch(X){n("[measure] reset encountered an unexpected error",X)}g.value=null}return Nr(()=>{try{me()}catch(X){n("[measure] reset on unmount failed",X)}}),{activate:te,deactivate:ce,reset:me,isActive:l,currentMode:a,measureLayer:u}}function Rle(a){if(a)try{a.getOverlays().getArray().slice().forEach(t=>{try{const i=t.getElement&&t.getElement(),n=i&&i.dataset&&i.dataset.measurementId,s=i&&i.classList&&i.classList.contains("lux-tooltip");(n||s)&&a.removeOverlay(t)}catch{}})}catch{}}const kle={"data-cy":"toolbarMeasure"},Ple={class:"absolute bottom-full top-auto z-20 flex flex-row justify-start divide-y-0 divide-x divide-gray-400 divide-solid box-content border-y-0 border-x border-gray-400"},Gle=rt({__name:"toolbar-measure",setup(a){const{toggleLidarOpen:e,toggleElevationProfileToolbarOpen:t}=ri(),{t:i}=Ct(),{activate:n,deactivate:s,reset:r,currentMode:l}=Lle(),u=[{label:i("Length"),active:()=>l.value==="length",onClick:()=>l.value==="length"?s():n("length")},{label:i("Surface"),active:()=>l.value==="area",onClick:()=>l.value==="area"?s():n("area")},{label:i("Azimut"),active:()=>l.value==="azimuth",onClick:()=>l.value==="azimuth"?s():n("azimuth")},{label:i("Profile"),active:()=>!1,onClick:()=>t(!0)},{label:i("Profil Lidar"),active:()=>!1,onClick:()=>e(!0)},{label:i("Reset"),active:()=>!1,onClick:()=>r()}];return(d,h)=>(U(),se("div",kle,[P("ul",Ple,[(U(),se(Tt,null,gi(u,(g,y)=>P("li",{key:y},[gt(Pg,{label:g.label,active:g.active(),onClick:g.onClick},null,8,["label","active","onClick"])])),64))])]))}}),Wle="/luxembourg-geoportail/main/assets/images/profile-CttQMPxA.png";var E3="http://www.w3.org/1999/xhtml";const ZR={svg:"http://www.w3.org/2000/svg",xhtml:E3,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sI(a){var e=a+="",t=e.indexOf(":");return t>=0&&(e=a.slice(0,t))!=="xmlns"&&(a=a.slice(t+1)),ZR.hasOwnProperty(e)?{space:ZR[e],local:a}:a}function Ole(a){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===E3&&e.documentElement.namespaceURI===E3?e.createElement(a):e.createElementNS(t,a)}}function Fle(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function eF(a){var e=sI(a);return(e.local?Fle:Ole)(e)}function Nle(){}function aE(a){return a==null?Nle:function(){return this.querySelector(a)}}function Ble(a){typeof a!="function"&&(a=aE(a));for(var e=this._groups,t=e.length,i=new Array(t),n=0;n<t;++n)for(var s=e[n],r=s.length,l=i[n]=new Array(r),u,d,h=0;h<r;++h)(u=s[h])&&(d=a.call(u,u.__data__,h,s))&&("__data__"in u&&(d.__data__=u.__data__),l[h]=d);return new So(i,this._parents)}function tF(a){return a==null?[]:Array.isArray(a)?a:Array.from(a)}function Dle(){return[]}function aF(a){return a==null?Dle:function(){return this.querySelectorAll(a)}}function Vle(a){return function(){return tF(a.apply(this,arguments))}}function Zle(a){typeof a=="function"?a=Vle(a):a=aF(a);for(var e=this._groups,t=e.length,i=[],n=[],s=0;s<t;++s)for(var r=e[s],l=r.length,u,d=0;d<l;++d)(u=r[d])&&(i.push(a.call(u,u.__data__,d,r)),n.push(u));return new So(i,n)}function iF(a){return function(){return this.matches(a)}}function nF(a){return function(e){return e.matches(a)}}var zle=Array.prototype.find;function Ule(a){return function(){return zle.call(this.children,a)}}function Hle(){return this.firstElementChild}function Xle(a){return this.select(a==null?Hle:Ule(typeof a=="function"?a:nF(a)))}var qle=Array.prototype.filter;function Yle(){return Array.from(this.children)}function Kle(a){return function(){return qle.call(this.children,a)}}function jle(a){return this.selectAll(a==null?Yle:Kle(typeof a=="function"?a:nF(a)))}function $le(a){typeof a!="function"&&(a=iF(a));for(var e=this._groups,t=e.length,i=new Array(t),n=0;n<t;++n)for(var s=e[n],r=s.length,l=i[n]=[],u,d=0;d<r;++d)(u=s[d])&&a.call(u,u.__data__,d,s)&&l.push(u);return new So(i,this._parents)}function rF(a){return new Array(a.length)}function Jle(){return new So(this._enter||this._groups.map(rF),this._parents)}function Bw(a,e){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=e}Bw.prototype={constructor:Bw,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,e){return this._parent.insertBefore(a,e)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};function Qle(a){return function(){return a}}function eue(a,e,t,i,n,s){for(var r=0,l,u=e.length,d=s.length;r<d;++r)(l=e[r])?(l.__data__=s[r],i[r]=l):t[r]=new Bw(a,s[r]);for(;r<u;++r)(l=e[r])&&(n[r]=l)}function tue(a,e,t,i,n,s,r){var l,u,d=new Map,h=e.length,g=s.length,y=new Array(h),x;for(l=0;l<h;++l)(u=e[l])&&(y[l]=x=r.call(u,u.__data__,l,e)+"",d.has(x)?n[l]=u:d.set(x,u));for(l=0;l<g;++l)x=r.call(a,s[l],l,s)+"",(u=d.get(x))?(i[l]=u,u.__data__=s[l],d.delete(x)):t[l]=new Bw(a,s[l]);for(l=0;l<h;++l)(u=e[l])&&d.get(y[l])===u&&(n[l]=u)}function aue(a){return a.__data__}function iue(a,e){if(!arguments.length)return Array.from(this,aue);var t=e?tue:eue,i=this._parents,n=this._groups;typeof a!="function"&&(a=Qle(a));for(var s=n.length,r=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var h=i[d],g=n[d],y=g.length,x=nue(a.call(h,h&&h.__data__,d,i)),C=x.length,I=l[d]=new Array(C),A=r[d]=new Array(C),E=u[d]=new Array(y);t(h,g,I,A,E,x,e);for(var L=0,G=0,F,B;L<C;++L)if(F=I[L]){for(L>=G&&(G=L+1);!(B=A[G])&&++G<C;);F._next=B||null}}return r=new So(r,i),r._enter=l,r._exit=u,r}function nue(a){return typeof a=="object"&&"length"in a?a:Array.from(a)}function rue(){return new So(this._exit||this._groups.map(rF),this._parents)}function sue(a,e,t){var i=this.enter(),n=this,s=this.exit();return typeof a=="function"?(i=a(i),i&&(i=i.selection())):i=i.append(a+""),e!=null&&(n=e(n),n&&(n=n.selection())),t==null?s.remove():t(s),i&&n?i.merge(n).order():n}function oue(a){for(var e=a.selection?a.selection():a,t=this._groups,i=e._groups,n=t.length,s=i.length,r=Math.min(n,s),l=new Array(n),u=0;u<r;++u)for(var d=t[u],h=i[u],g=d.length,y=l[u]=new Array(g),x,C=0;C<g;++C)(x=d[C]||h[C])&&(y[C]=x);for(;u<n;++u)l[u]=t[u];return new So(l,this._parents)}function lue(){for(var a=this._groups,e=-1,t=a.length;++e<t;)for(var i=a[e],n=i.length-1,s=i[n],r;--n>=0;)(r=i[n])&&(s&&r.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(r,s),s=r);return this}function uue(a){a||(a=cue);function e(g,y){return g&&y?a(g.__data__,y.__data__):!g-!y}for(var t=this._groups,i=t.length,n=new Array(i),s=0;s<i;++s){for(var r=t[s],l=r.length,u=n[s]=new Array(l),d,h=0;h<l;++h)(d=r[h])&&(u[h]=d);u.sort(e)}return new So(n,this._parents).order()}function cue(a,e){return a<e?-1:a>e?1:a>=e?0:NaN}function due(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this}function hue(){return Array.from(this)}function _ue(){for(var a=this._groups,e=0,t=a.length;e<t;++e)for(var i=a[e],n=0,s=i.length;n<s;++n){var r=i[n];if(r)return r}return null}function mue(){let a=0;for(const e of this)++a;return a}function fue(){return!this.node()}function gue(a){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],s=0,r=n.length,l;s<r;++s)(l=n[s])&&a.call(l,l.__data__,s,n);return this}function pue(a){return function(){this.removeAttribute(a)}}function yue(a){return function(){this.removeAttributeNS(a.space,a.local)}}function bue(a,e){return function(){this.setAttribute(a,e)}}function vue(a,e){return function(){this.setAttributeNS(a.space,a.local,e)}}function xue(a,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(a):this.setAttribute(a,t)}}function wue(a,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,t)}}function Cue(a,e){var t=sI(a);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?yue:pue:typeof e=="function"?t.local?wue:xue:t.local?vue:bue)(t,e))}function sF(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function Iue(a){return function(){this.style.removeProperty(a)}}function Sue(a,e,t){return function(){this.style.setProperty(a,e,t)}}function Aue(a,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(a):this.style.setProperty(a,i,t)}}function Tue(a,e,t){return arguments.length>1?this.each((e==null?Iue:typeof e=="function"?Aue:Sue)(a,e,t??"")):Mp(this.node(),a)}function Mp(a,e){return a.style.getPropertyValue(e)||sF(a).getComputedStyle(a,null).getPropertyValue(e)}function Eue(a){return function(){delete this[a]}}function Mue(a,e){return function(){this[a]=e}}function Lue(a,e){return function(){var t=e.apply(this,arguments);t==null?delete this[a]:this[a]=t}}function Rue(a,e){return arguments.length>1?this.each((e==null?Eue:typeof e=="function"?Lue:Mue)(a,e)):this.node()[a]}function oF(a){return a.trim().split(/^|\s+/)}function iE(a){return a.classList||new lF(a)}function lF(a){this._node=a,this._names=oF(a.getAttribute("class")||"")}lF.prototype={add:function(a){var e=this._names.indexOf(a);e<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var e=this._names.indexOf(a);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};function uF(a,e){for(var t=iE(a),i=-1,n=e.length;++i<n;)t.add(e[i])}function cF(a,e){for(var t=iE(a),i=-1,n=e.length;++i<n;)t.remove(e[i])}function kue(a){return function(){uF(this,a)}}function Pue(a){return function(){cF(this,a)}}function Gue(a,e){return function(){(e.apply(this,arguments)?uF:cF)(this,a)}}function Wue(a,e){var t=oF(a+"");if(arguments.length<2){for(var i=iE(this.node()),n=-1,s=t.length;++n<s;)if(!i.contains(t[n]))return!1;return!0}return this.each((typeof e=="function"?Gue:e?kue:Pue)(t,e))}function Oue(){this.textContent=""}function Fue(a){return function(){this.textContent=a}}function Nue(a){return function(){var e=a.apply(this,arguments);this.textContent=e??""}}function Bue(a){return arguments.length?this.each(a==null?Oue:(typeof a=="function"?Nue:Fue)(a)):this.node().textContent}function Due(){this.innerHTML=""}function Vue(a){return function(){this.innerHTML=a}}function Zue(a){return function(){var e=a.apply(this,arguments);this.innerHTML=e??""}}function zue(a){return arguments.length?this.each(a==null?Due:(typeof a=="function"?Zue:Vue)(a)):this.node().innerHTML}function Uue(){this.nextSibling&&this.parentNode.appendChild(this)}function Hue(){return this.each(Uue)}function Xue(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function que(){return this.each(Xue)}function Yue(a){var e=typeof a=="function"?a:eF(a);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Kue(){return null}function jue(a,e){var t=typeof a=="function"?a:eF(a),i=e==null?Kue:typeof e=="function"?e:aE(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function $ue(){var a=this.parentNode;a&&a.removeChild(this)}function Jue(){return this.each($ue)}function Que(){var a=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(a,this.nextSibling):a}function ece(){var a=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(a,this.nextSibling):a}function tce(a){return this.select(a?ece:Que)}function ace(a){return arguments.length?this.property("__data__",a):this.node().__data__}function ice(a){return function(e){a.call(this,e,this.__data__)}}function nce(a){return a.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function rce(a){return function(){var e=this.__on;if(e){for(var t=0,i=-1,n=e.length,s;t<n;++t)s=e[t],(!a.type||s.type===a.type)&&s.name===a.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function sce(a,e,t){return function(){var i=this.__on,n,s=ice(e);if(i){for(var r=0,l=i.length;r<l;++r)if((n=i[r]).type===a.type&&n.name===a.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=t),n.value=e;return}}this.addEventListener(a.type,s,t),n={type:a.type,name:a.name,value:e,listener:s,options:t},i?i.push(n):this.__on=[n]}}function oce(a,e,t){var i=nce(a+""),n,s=i.length,r;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,h;u<d;++u)for(n=0,h=l[u];n<s;++n)if((r=i[n]).type===h.type&&r.name===h.name)return h.value}return}for(l=e?sce:rce,n=0;n<s;++n)this.each(l(i[n],e,t));return this}function dF(a,e,t){var i=sF(a),n=i.CustomEvent;typeof n=="function"?n=new n(e,t):(n=i.document.createEvent("Event"),t?(n.initEvent(e,t.bubbles,t.cancelable),n.detail=t.detail):n.initEvent(e,!1,!1)),a.dispatchEvent(n)}function lce(a,e){return function(){return dF(this,a,e)}}function uce(a,e){return function(){return dF(this,a,e.apply(this,arguments))}}function cce(a,e){return this.each((typeof e=="function"?uce:lce)(a,e))}function*dce(){for(var a=this._groups,e=0,t=a.length;e<t;++e)for(var i=a[e],n=0,s=i.length,r;n<s;++n)(r=i[n])&&(yield r)}var nE=[null];function So(a,e){this._groups=a,this._parents=e}function Lb(){return new So([[document.documentElement]],nE)}function hce(){return this}So.prototype=Lb.prototype={constructor:So,select:Ble,selectAll:Zle,selectChild:Xle,selectChildren:jle,filter:$le,data:iue,enter:Jle,exit:rue,join:sue,merge:oue,selection:hce,order:lue,sort:uue,call:due,nodes:hue,node:_ue,size:mue,empty:fue,each:gue,attr:Cue,style:Tue,property:Rue,classed:Wue,text:Bue,html:zue,raise:Hue,lower:que,append:Yue,insert:jue,remove:Jue,clone:tce,datum:ace,on:oce,dispatch:cce,[Symbol.iterator]:dce};function eo(a){return typeof a=="string"?new So([[document.querySelector(a)]],[document.documentElement]):new So([[a]],nE)}function _ce(a){let e;for(;e=a.sourceEvent;)a=e;return a}function pu(a,e){if(a=_ce(a),e===void 0&&(e=a.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=a.clientX,i.y=a.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();return[a.clientX-n.left-e.clientLeft,a.clientY-n.top-e.clientTop]}}return[a.pageX,a.pageY]}function mce(a){return typeof a=="string"?new So([document.querySelectorAll(a)],[document.documentElement]):new So([tF(a)],nE)}var fce={value:()=>{}};function rE(){for(var a=0,e=arguments.length,t={},i;a<e;++a){if(!(i=arguments[a]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new bx(t)}function bx(a){this._=a}function gce(a,e){return a.trim().split(/^|\s+/).map(function(t){var i="",n=t.indexOf(".");if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}bx.prototype=rE.prototype={constructor:bx,on:function(a,e){var t=this._,i=gce(a+"",t),n,s=-1,r=i.length;if(arguments.length<2){for(;++s<r;)if((n=(a=i[s]).type)&&(n=pce(t[n],a.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<r;)if(n=(a=i[s]).type)t[n]=zR(t[n],a.name,e);else if(e==null)for(n in t)t[n]=zR(t[n],a.name,null);return this},copy:function(){var a={},e=this._;for(var t in e)a[t]=e[t].slice();return new bx(a)},call:function(a,e){if((n=arguments.length-2)>0)for(var t=new Array(n),i=0,n,s;i<n;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(s=this._[a],i=0,n=s.length;i<n;++i)s[i].value.apply(e,t)},apply:function(a,e,t){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var i=this._[a],n=0,s=i.length;n<s;++n)i[n].value.apply(e,t)}};function pce(a,e){for(var t=0,i=a.length,n;t<i;++t)if((n=a[t]).name===e)return n.value}function zR(a,e,t){for(var i=0,n=a.length;i<n;++i)if(a[i].name===e){a[i]=fce,a=a.slice(0,i).concat(a.slice(i+1));break}return t!=null&&a.push({name:e,value:t}),a}var Lp=0,R0=0,d0=0,hF=1e3,Dw,k0,Vw=0,tf=0,oI=0,K1=typeof performance=="object"&&performance.now?performance:Date,_F=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function sE(){return tf||(_F(yce),tf=K1.now()+oI)}function yce(){tf=0}function Zw(){this._call=this._time=this._next=null}Zw.prototype=mF.prototype={constructor:Zw,restart:function(a,e,t){if(typeof a!="function")throw new TypeError("callback is not a function");t=(t==null?sE():+t)+(e==null?0:+e),!this._next&&k0!==this&&(k0?k0._next=this:Dw=this,k0=this),this._call=a,this._time=t,M3()},stop:function(){this._call&&(this._call=null,this._time=1/0,M3())}};function mF(a,e,t){var i=new Zw;return i.restart(a,e,t),i}function bce(){sE(),++Lp;for(var a=Dw,e;a;)(e=tf-a._time)>=0&&a._call.call(void 0,e),a=a._next;--Lp}function UR(){tf=(Vw=K1.now())+oI,Lp=R0=0;try{bce()}finally{Lp=0,xce(),tf=0}}function vce(){var a=K1.now(),e=a-Vw;e>hF&&(oI-=e,Vw=a)}function xce(){for(var a,e=Dw,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),a=e,e=e._next):(t=e._next,e._next=null,e=a?a._next=t:Dw=t);k0=a,M3(i)}function M3(a){if(!Lp){R0&&(R0=clearTimeout(R0));var e=a-tf;e>24?(a<1/0&&(R0=setTimeout(UR,a-K1.now()-oI)),d0&&(d0=clearInterval(d0))):(d0||(Vw=K1.now(),d0=setInterval(vce,hF)),Lp=1,_F(UR))}}function HR(a,e,t){var i=new Zw;return e=e==null?0:+e,i.restart(n=>{i.stop(),a(n+e)},e,t),i}var wce=rE("start","end","cancel","interrupt"),Cce=[],fF=0,XR=1,L3=2,vx=3,qR=4,R3=5,xx=6;function lI(a,e,t,i,n,s){var r=a.__transition;if(!r)a.__transition={};else if(t in r)return;Ice(a,t,{name:e,index:i,group:n,on:wce,tween:Cce,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:fF})}function oE(a,e){var t=Vu(a,e);if(t.state>fF)throw new Error("too late; already scheduled");return t}function Zc(a,e){var t=Vu(a,e);if(t.state>vx)throw new Error("too late; already running");return t}function Vu(a,e){var t=a.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Ice(a,e,t){var i=a.__transition,n;i[e]=t,t.timer=mF(s,0,t.time);function s(d){t.state=XR,t.timer.restart(r,t.delay,t.time),t.delay<=d&&r(d-t.delay)}function r(d){var h,g,y,x;if(t.state!==XR)return u();for(h in i)if(x=i[h],x.name===t.name){if(x.state===vx)return HR(r);x.state===qR?(x.state=xx,x.timer.stop(),x.on.call("interrupt",a,a.__data__,x.index,x.group),delete i[h]):+h<e&&(x.state=xx,x.timer.stop(),x.on.call("cancel",a,a.__data__,x.index,x.group),delete i[h])}if(HR(function(){t.state===vx&&(t.state=qR,t.timer.restart(l,t.delay,t.time),l(d))}),t.state=L3,t.on.call("start",a,a.__data__,t.index,t.group),t.state===L3){for(t.state=vx,n=new Array(y=t.tween.length),h=0,g=-1;h<y;++h)(x=t.tween[h].value.call(a,a.__data__,t.index,t.group))&&(n[++g]=x);n.length=g+1}}function l(d){for(var h=d<t.duration?t.ease.call(null,d/t.duration):(t.timer.restart(u),t.state=R3,1),g=-1,y=n.length;++g<y;)n[g].call(a,h);t.state===R3&&(t.on.call("end",a,a.__data__,t.index,t.group),u())}function u(){t.state=xx,t.timer.stop(),delete i[e];for(var d in i)return;delete a.__transition}}function wx(a,e){var t=a.__transition,i,n,s=!0,r;if(t){e=e==null?null:e+"";for(r in t){if((i=t[r]).name!==e){s=!1;continue}n=i.state>L3&&i.state<R3,i.state=xx,i.timer.stop(),i.on.call(n?"interrupt":"cancel",a,a.__data__,i.index,i.group),delete t[r]}s&&delete a.__transition}}function Sce(a){return this.each(function(){wx(this,a)})}function lE(a,e,t){a.prototype=e.prototype=t,t.constructor=a}function gF(a,e){var t=Object.create(a.prototype);for(var i in e)t[i]=e[i];return t}function Rb(){}var j1=.7,zw=1/j1,dp="\\s*([+-]?\\d+)\\s*",$1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ace=/^#([0-9a-f]{3,8})$/,Tce=new RegExp(`^rgb\\(${dp},${dp},${dp}\\)$`),Ece=new RegExp(`^rgb\\(${Lc},${Lc},${Lc}\\)$`),Mce=new RegExp(`^rgba\\(${dp},${dp},${dp},${$1}\\)$`),Lce=new RegExp(`^rgba\\(${Lc},${Lc},${Lc},${$1}\\)$`),Rce=new RegExp(`^hsl\\(${$1},${Lc},${Lc}\\)$`),kce=new RegExp(`^hsla\\(${$1},${Lc},${Lc},${$1}\\)$`),YR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lE(Rb,af,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:KR,formatHex:KR,formatHex8:Pce,formatHsl:Gce,formatRgb:jR,toString:jR});function KR(){return this.rgb().formatHex()}function Pce(){return this.rgb().formatHex8()}function Gce(){return pF(this).formatHsl()}function jR(){return this.rgb().formatRgb()}function af(a){var e,t;return a=(a+"").trim().toLowerCase(),(e=Ace.exec(a))?(t=e[1].length,e=parseInt(e[1],16),t===6?$R(e):t===3?new $o(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?P2(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?P2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Tce.exec(a))?new $o(e[1],e[2],e[3],1):(e=Ece.exec(a))?new $o(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Mce.exec(a))?P2(e[1],e[2],e[3],e[4]):(e=Lce.exec(a))?P2(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Rce.exec(a))?ek(e[1],e[2]/100,e[3]/100,1):(e=kce.exec(a))?ek(e[1],e[2]/100,e[3]/100,e[4]):YR.hasOwnProperty(a)?$R(YR[a]):a==="transparent"?new $o(NaN,NaN,NaN,0):null}function $R(a){return new $o(a>>16&255,a>>8&255,a&255,1)}function P2(a,e,t,i){return i<=0&&(a=e=t=NaN),new $o(a,e,t,i)}function Wce(a){return a instanceof Rb||(a=af(a)),a?(a=a.rgb(),new $o(a.r,a.g,a.b,a.opacity)):new $o}function k3(a,e,t,i){return arguments.length===1?Wce(a):new $o(a,e,t,i??1)}function $o(a,e,t,i){this.r=+a,this.g=+e,this.b=+t,this.opacity=+i}lE($o,k3,gF(Rb,{brighter(a){return a=a==null?zw:Math.pow(zw,a),new $o(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=a==null?j1:Math.pow(j1,a),new $o(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new $o(Dm(this.r),Dm(this.g),Dm(this.b),Uw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:JR,formatHex:JR,formatHex8:Oce,formatRgb:QR,toString:QR}));function JR(){return`#${km(this.r)}${km(this.g)}${km(this.b)}`}function Oce(){return`#${km(this.r)}${km(this.g)}${km(this.b)}${km((isNaN(this.opacity)?1:this.opacity)*255)}`}function QR(){const a=Uw(this.opacity);return`${a===1?"rgb(":"rgba("}${Dm(this.r)}, ${Dm(this.g)}, ${Dm(this.b)}${a===1?")":`, ${a})`}`}function Uw(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function Dm(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function km(a){return a=Dm(a),(a<16?"0":"")+a.toString(16)}function ek(a,e,t,i){return i<=0?a=e=t=NaN:t<=0||t>=1?a=e=NaN:e<=0&&(a=NaN),new wu(a,e,t,i)}function pF(a){if(a instanceof wu)return new wu(a.h,a.s,a.l,a.opacity);if(a instanceof Rb||(a=af(a)),!a)return new wu;if(a instanceof wu)return a;a=a.rgb();var e=a.r/255,t=a.g/255,i=a.b/255,n=Math.min(e,t,i),s=Math.max(e,t,i),r=NaN,l=s-n,u=(s+n)/2;return l?(e===s?r=(t-i)/l+(t<i)*6:t===s?r=(i-e)/l+2:r=(e-t)/l+4,l/=u<.5?s+n:2-s-n,r*=60):l=u>0&&u<1?0:r,new wu(r,l,u,a.opacity)}function Fce(a,e,t,i){return arguments.length===1?pF(a):new wu(a,e,t,i??1)}function wu(a,e,t,i){this.h=+a,this.s=+e,this.l=+t,this.opacity=+i}lE(wu,Fce,gF(Rb,{brighter(a){return a=a==null?zw:Math.pow(zw,a),new wu(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=a==null?j1:Math.pow(j1,a),new wu(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,e=isNaN(a)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,n=2*t-i;return new $o(E4(a>=240?a-240:a+120,n,i),E4(a,n,i),E4(a<120?a+240:a-120,n,i),this.opacity)},clamp(){return new wu(tk(this.h),G2(this.s),G2(this.l),Uw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a=Uw(this.opacity);return`${a===1?"hsl(":"hsla("}${tk(this.h)}, ${G2(this.s)*100}%, ${G2(this.l)*100}%${a===1?")":`, ${a})`}`}}));function tk(a){return a=(a||0)%360,a<0?a+360:a}function G2(a){return Math.max(0,Math.min(1,a||0))}function E4(a,e,t){return(a<60?e+(t-e)*a/60:a<180?t:a<240?e+(t-e)*(240-a)/60:e)*255}const uE=a=>()=>a;function Nce(a,e){return function(t){return a+t*e}}function Bce(a,e,t){return a=Math.pow(a,t),e=Math.pow(e,t)-a,t=1/t,function(i){return Math.pow(a+i*e,t)}}function Dce(a){return(a=+a)==1?yF:function(e,t){return t-e?Bce(e,t,a):uE(isNaN(e)?t:e)}}function yF(a,e){var t=e-a;return t?Nce(a,t):uE(isNaN(a)?e:a)}const Hw=(function a(e){var t=Dce(e);function i(n,s){var r=t((n=k3(n)).r,(s=k3(s)).r),l=t(n.g,s.g),u=t(n.b,s.b),d=yF(n.opacity,s.opacity);return function(h){return n.r=r(h),n.g=l(h),n.b=u(h),n.opacity=d(h),n+""}}return i.gamma=a,i})(1);function Vce(a,e){e||(e=[]);var t=a?Math.min(e.length,a.length):0,i=e.slice(),n;return function(s){for(n=0;n<t;++n)i[n]=a[n]*(1-s)+e[n]*s;return i}}function Zce(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function zce(a,e){var t=e?e.length:0,i=a?Math.min(t,a.length):0,n=new Array(i),s=new Array(t),r;for(r=0;r<i;++r)n[r]=cE(a[r],e[r]);for(;r<t;++r)s[r]=e[r];return function(l){for(r=0;r<i;++r)s[r]=n[r](l);return s}}function Uce(a,e){var t=new Date;return a=+a,e=+e,function(i){return t.setTime(a*(1-i)+e*i),t}}function bu(a,e){return a=+a,e=+e,function(t){return a*(1-t)+e*t}}function Hce(a,e){var t={},i={},n;(a===null||typeof a!="object")&&(a={}),(e===null||typeof e!="object")&&(e={});for(n in e)n in a?t[n]=cE(a[n],e[n]):i[n]=e[n];return function(s){for(n in t)i[n]=t[n](s);return i}}var P3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M4=new RegExp(P3.source,"g");function Xce(a){return function(){return a}}function qce(a){return function(e){return a(e)+""}}function bF(a,e){var t=P3.lastIndex=M4.lastIndex=0,i,n,s,r=-1,l=[],u=[];for(a=a+"",e=e+"";(i=P3.exec(a))&&(n=M4.exec(e));)(s=n.index)>t&&(s=e.slice(t,s),l[r]?l[r]+=s:l[++r]=s),(i=i[0])===(n=n[0])?l[r]?l[r]+=n:l[++r]=n:(l[++r]=null,u.push({i:r,x:bu(i,n)})),t=M4.lastIndex;return t<e.length&&(s=e.slice(t),l[r]?l[r]+=s:l[++r]=s),l.length<2?u[0]?qce(u[0].x):Xce(e):(e=u.length,function(d){for(var h=0,g;h<e;++h)l[(g=u[h]).i]=g.x(d);return l.join("")})}function cE(a,e){var t=typeof e,i;return e==null||t==="boolean"?uE(e):(t==="number"?bu:t==="string"?(i=af(e))?(e=i,Hw):bF:e instanceof af?Hw:e instanceof Date?Uce:Zce(e)?Vce:Array.isArray(e)?zce:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Hce:bu)(a,e)}function Yce(a,e){return a=+a,e=+e,function(t){return Math.round(a*(1-t)+e*t)}}var ak=180/Math.PI,G3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vF(a,e,t,i,n,s){var r,l,u;return(r=Math.sqrt(a*a+e*e))&&(a/=r,e/=r),(u=a*t+e*i)&&(t-=a*u,i-=e*u),(l=Math.sqrt(t*t+i*i))&&(t/=l,i/=l,u/=l),a*i<e*t&&(a=-a,e=-e,u=-u,r=-r),{translateX:n,translateY:s,rotate:Math.atan2(e,a)*ak,skewX:Math.atan(u)*ak,scaleX:r,scaleY:l}}var W2;function Kce(a){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(a+"");return e.isIdentity?G3:vF(e.a,e.b,e.c,e.d,e.e,e.f)}function jce(a){return a==null||(W2||(W2=document.createElementNS("http://www.w3.org/2000/svg","g")),W2.setAttribute("transform",a),!(a=W2.transform.baseVal.consolidate()))?G3:(a=a.matrix,vF(a.a,a.b,a.c,a.d,a.e,a.f))}function xF(a,e,t,i){function n(d){return d.length?d.pop()+" ":""}function s(d,h,g,y,x,C){if(d!==g||h!==y){var I=x.push("translate(",null,e,null,t);C.push({i:I-4,x:bu(d,g)},{i:I-2,x:bu(h,y)})}else(g||y)&&x.push("translate("+g+e+y+t)}function r(d,h,g,y){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),y.push({i:g.push(n(g)+"rotate(",null,i)-2,x:bu(d,h)})):h&&g.push(n(g)+"rotate("+h+i)}function l(d,h,g,y){d!==h?y.push({i:g.push(n(g)+"skewX(",null,i)-2,x:bu(d,h)}):h&&g.push(n(g)+"skewX("+h+i)}function u(d,h,g,y,x,C){if(d!==g||h!==y){var I=x.push(n(x)+"scale(",null,",",null,")");C.push({i:I-4,x:bu(d,g)},{i:I-2,x:bu(h,y)})}else(g!==1||y!==1)&&x.push(n(x)+"scale("+g+","+y+")")}return function(d,h){var g=[],y=[];return d=a(d),h=a(h),s(d.translateX,d.translateY,h.translateX,h.translateY,g,y),r(d.rotate,h.rotate,g,y),l(d.skewX,h.skewX,g,y),u(d.scaleX,d.scaleY,h.scaleX,h.scaleY,g,y),d=h=null,function(x){for(var C=-1,I=y.length,A;++C<I;)g[(A=y[C]).i]=A.x(x);return g.join("")}}}var $ce=xF(Kce,"px, ","px)","deg)"),Jce=xF(jce,", ",")",")"),Qce=1e-12;function ik(a){return((a=Math.exp(a))+1/a)/2}function ede(a){return((a=Math.exp(a))-1/a)/2}function tde(a){return((a=Math.exp(2*a))-1)/(a+1)}const ade=(function a(e,t,i){function n(s,r){var l=s[0],u=s[1],d=s[2],h=r[0],g=r[1],y=r[2],x=h-l,C=g-u,I=x*x+C*C,A,E;if(I<Qce)E=Math.log(y/d)/e,A=function(Y){return[l+Y*x,u+Y*C,d*Math.exp(e*Y*E)]};else{var L=Math.sqrt(I),G=(y*y-d*d+i*I)/(2*d*t*L),F=(y*y-d*d-i*I)/(2*y*t*L),B=Math.log(Math.sqrt(G*G+1)-G),Z=Math.log(Math.sqrt(F*F+1)-F);E=(Z-B)/e,A=function(Y){var $=Y*E,te=ik(B),ce=d/(t*L)*(te*tde(e*$+B)-ede(B));return[l+ce*x,u+ce*C,d*te/ik(e*$+B)]}}return A.duration=E*1e3*e/Math.SQRT2,A}return n.rho=function(s){var r=Math.max(.001,+s),l=r*r,u=l*l;return a(r,l,u)},n})(Math.SQRT2,2,4);function ide(a,e){var t,i;return function(){var n=Zc(this,a),s=n.tween;if(s!==t){i=t=s;for(var r=0,l=i.length;r<l;++r)if(i[r].name===e){i=i.slice(),i.splice(r,1);break}}n.tween=i}}function nde(a,e,t){var i,n;if(typeof t!="function")throw new Error;return function(){var s=Zc(this,a),r=s.tween;if(r!==i){n=(i=r).slice();for(var l={name:e,value:t},u=0,d=n.length;u<d;++u)if(n[u].name===e){n[u]=l;break}u===d&&n.push(l)}s.tween=n}}function rde(a,e){var t=this._id;if(a+="",arguments.length<2){for(var i=Vu(this.node(),t).tween,n=0,s=i.length,r;n<s;++n)if((r=i[n]).name===a)return r.value;return null}return this.each((e==null?ide:nde)(t,a,e))}function dE(a,e,t){var i=a._id;return a.each(function(){var n=Zc(this,i);(n.value||(n.value={}))[e]=t.apply(this,arguments)}),function(n){return Vu(n,i).value[e]}}function wF(a,e){var t;return(typeof e=="number"?bu:e instanceof af?Hw:(t=af(e))?(e=t,Hw):bF)(a,e)}function sde(a){return function(){this.removeAttribute(a)}}function ode(a){return function(){this.removeAttributeNS(a.space,a.local)}}function lde(a,e,t){var i,n=t+"",s;return function(){var r=this.getAttribute(a);return r===n?null:r===i?s:s=e(i=r,t)}}function ude(a,e,t){var i,n=t+"",s;return function(){var r=this.getAttributeNS(a.space,a.local);return r===n?null:r===i?s:s=e(i=r,t)}}function cde(a,e,t){var i,n,s;return function(){var r,l=t(this),u;return l==null?void this.removeAttribute(a):(r=this.getAttribute(a),u=l+"",r===u?null:r===i&&u===n?s:(n=u,s=e(i=r,l)))}}function dde(a,e,t){var i,n,s;return function(){var r,l=t(this),u;return l==null?void this.removeAttributeNS(a.space,a.local):(r=this.getAttributeNS(a.space,a.local),u=l+"",r===u?null:r===i&&u===n?s:(n=u,s=e(i=r,l)))}}function hde(a,e){var t=sI(a),i=t==="transform"?Jce:wF;return this.attrTween(a,typeof e=="function"?(t.local?dde:cde)(t,i,dE(this,"attr."+a,e)):e==null?(t.local?ode:sde)(t):(t.local?ude:lde)(t,i,e))}function _de(a,e){return function(t){this.setAttribute(a,e.call(this,t))}}function mde(a,e){return function(t){this.setAttributeNS(a.space,a.local,e.call(this,t))}}function fde(a,e){var t,i;function n(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&mde(a,s)),t}return n._value=e,n}function gde(a,e){var t,i;function n(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&_de(a,s)),t}return n._value=e,n}function pde(a,e){var t="attr."+a;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=sI(a);return this.tween(t,(i.local?fde:gde)(i,e))}function yde(a,e){return function(){oE(this,a).delay=+e.apply(this,arguments)}}function bde(a,e){return e=+e,function(){oE(this,a).delay=e}}function vde(a){var e=this._id;return arguments.length?this.each((typeof a=="function"?yde:bde)(e,a)):Vu(this.node(),e).delay}function xde(a,e){return function(){Zc(this,a).duration=+e.apply(this,arguments)}}function wde(a,e){return e=+e,function(){Zc(this,a).duration=e}}function Cde(a){var e=this._id;return arguments.length?this.each((typeof a=="function"?xde:wde)(e,a)):Vu(this.node(),e).duration}function Ide(a,e){if(typeof e!="function")throw new Error;return function(){Zc(this,a).ease=e}}function Sde(a){var e=this._id;return arguments.length?this.each(Ide(e,a)):Vu(this.node(),e).ease}function Ade(a,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Zc(this,a).ease=t}}function Tde(a){if(typeof a!="function")throw new Error;return this.each(Ade(this._id,a))}function Ede(a){typeof a!="function"&&(a=iF(a));for(var e=this._groups,t=e.length,i=new Array(t),n=0;n<t;++n)for(var s=e[n],r=s.length,l=i[n]=[],u,d=0;d<r;++d)(u=s[d])&&a.call(u,u.__data__,d,s)&&l.push(u);return new Jd(i,this._parents,this._name,this._id)}function Mde(a){if(a._id!==this._id)throw new Error;for(var e=this._groups,t=a._groups,i=e.length,n=t.length,s=Math.min(i,n),r=new Array(i),l=0;l<s;++l)for(var u=e[l],d=t[l],h=u.length,g=r[l]=new Array(h),y,x=0;x<h;++x)(y=u[x]||d[x])&&(g[x]=y);for(;l<i;++l)r[l]=e[l];return new Jd(r,this._parents,this._name,this._id)}function Lde(a){return(a+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Rde(a,e,t){var i,n,s=Lde(e)?oE:Zc;return function(){var r=s(this,a),l=r.on;l!==i&&(n=(i=l).copy()).on(e,t),r.on=n}}function kde(a,e){var t=this._id;return arguments.length<2?Vu(this.node(),t).on.on(a):this.each(Rde(t,a,e))}function Pde(a){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==a)return;e&&e.removeChild(this)}}function Gde(){return this.on("end.remove",Pde(this._id))}function Wde(a){var e=this._name,t=this._id;typeof a!="function"&&(a=aE(a));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var l=i[r],u=l.length,d=s[r]=new Array(u),h,g,y=0;y<u;++y)(h=l[y])&&(g=a.call(h,h.__data__,y,l))&&("__data__"in h&&(g.__data__=h.__data__),d[y]=g,lI(d[y],e,t,y,d,Vu(h,t)));return new Jd(s,this._parents,e,t)}function Ode(a){var e=this._name,t=this._id;typeof a!="function"&&(a=aF(a));for(var i=this._groups,n=i.length,s=[],r=[],l=0;l<n;++l)for(var u=i[l],d=u.length,h,g=0;g<d;++g)if(h=u[g]){for(var y=a.call(h,h.__data__,g,u),x,C=Vu(h,t),I=0,A=y.length;I<A;++I)(x=y[I])&&lI(x,e,t,I,y,C);s.push(y),r.push(h)}return new Jd(s,r,e,t)}var Fde=Lb.prototype.constructor;function Nde(){return new Fde(this._groups,this._parents)}function Bde(a,e){var t,i,n;return function(){var s=Mp(this,a),r=(this.style.removeProperty(a),Mp(this,a));return s===r?null:s===t&&r===i?n:n=e(t=s,i=r)}}function CF(a){return function(){this.style.removeProperty(a)}}function Dde(a,e,t){var i,n=t+"",s;return function(){var r=Mp(this,a);return r===n?null:r===i?s:s=e(i=r,t)}}function Vde(a,e,t){var i,n,s;return function(){var r=Mp(this,a),l=t(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(a),Mp(this,a))),r===u?null:r===i&&u===n?s:(n=u,s=e(i=r,l))}}function Zde(a,e){var t,i,n,s="style."+e,r="end."+s,l;return function(){var u=Zc(this,a),d=u.on,h=u.value[s]==null?l||(l=CF(e)):void 0;(d!==t||n!==h)&&(i=(t=d).copy()).on(r,n=h),u.on=i}}function zde(a,e,t){var i=(a+="")=="transform"?$ce:wF;return e==null?this.styleTween(a,Bde(a,i)).on("end.style."+a,CF(a)):typeof e=="function"?this.styleTween(a,Vde(a,i,dE(this,"style."+a,e))).each(Zde(this._id,a)):this.styleTween(a,Dde(a,i,e),t).on("end.style."+a,null)}function Ude(a,e,t){return function(i){this.style.setProperty(a,e.call(this,i),t)}}function Hde(a,e,t){var i,n;function s(){var r=e.apply(this,arguments);return r!==n&&(i=(n=r)&&Ude(a,r,t)),i}return s._value=e,s}function Xde(a,e,t){var i="style."+(a+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Hde(a,e,t??""))}function qde(a){return function(){this.textContent=a}}function Yde(a){return function(){var e=a(this);this.textContent=e??""}}function Kde(a){return this.tween("text",typeof a=="function"?Yde(dE(this,"text",a)):qde(a==null?"":a+""))}function jde(a){return function(e){this.textContent=a.call(this,e)}}function $de(a){var e,t;function i(){var n=a.apply(this,arguments);return n!==t&&(e=(t=n)&&jde(n)),e}return i._value=a,i}function Jde(a){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(a==null)return this.tween(e,null);if(typeof a!="function")throw new Error;return this.tween(e,$de(a))}function Qde(){for(var a=this._name,e=this._id,t=IF(),i=this._groups,n=i.length,s=0;s<n;++s)for(var r=i[s],l=r.length,u,d=0;d<l;++d)if(u=r[d]){var h=Vu(u,e);lI(u,a,t,d,r,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Jd(i,this._parents,a,t)}function ehe(){var a,e,t=this,i=t._id,n=t.size();return new Promise(function(s,r){var l={value:r},u={value:function(){--n===0&&s()}};t.each(function(){var d=Zc(this,i),h=d.on;h!==a&&(e=(a=h).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),d.on=e}),n===0&&s()})}var the=0;function Jd(a,e,t,i){this._groups=a,this._parents=e,this._name=t,this._id=i}function IF(){return++the}var vd=Lb.prototype;Jd.prototype={constructor:Jd,select:Wde,selectAll:Ode,selectChild:vd.selectChild,selectChildren:vd.selectChildren,filter:Ede,merge:Mde,selection:Nde,transition:Qde,call:vd.call,nodes:vd.nodes,node:vd.node,size:vd.size,empty:vd.empty,each:vd.each,on:kde,attr:hde,attrTween:pde,style:zde,styleTween:Xde,text:Kde,textTween:Jde,remove:Gde,tween:rde,delay:vde,duration:Cde,ease:Sde,easeVarying:Tde,end:ehe,[Symbol.iterator]:vd[Symbol.iterator]};function ahe(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}var ihe={time:null,delay:0,duration:250,ease:ahe};function nhe(a,e){for(var t;!(t=a.__transition)||!(t=t[e]);)if(!(a=a.parentNode))throw new Error(`transition ${e} not found`);return t}function rhe(a){var e,t;a instanceof Jd?(e=a._id,a=a._name):(e=IF(),(t=ihe).time=sE(),a=a==null?null:a+"");for(var i=this._groups,n=i.length,s=0;s<n;++s)for(var r=i[s],l=r.length,u,d=0;d<l;++d)(u=r[d])&&lI(u,a,e,d,r,t||nhe(u,e));return new Jd(i,this._parents,a,e)}Lb.prototype.interrupt=Sce;Lb.prototype.transition=rhe;function Cx(a,e){return a==null||e==null?NaN:a<e?-1:a>e?1:a>=e?0:NaN}function she(a,e){return a==null||e==null?NaN:e<a?-1:e>a?1:e>=a?0:NaN}function hE(a){let e,t,i;a.length!==2?(e=Cx,t=(l,u)=>Cx(a(l),u),i=(l,u)=>a(l)-u):(e=a===Cx||a===she?a:ohe,t=a,i=a);function n(l,u,d=0,h=l.length){if(d<h){if(e(u,u)!==0)return h;do{const g=d+h>>>1;t(l[g],u)<0?d=g+1:h=g}while(d<h)}return d}function s(l,u,d=0,h=l.length){if(d<h){if(e(u,u)!==0)return h;do{const g=d+h>>>1;t(l[g],u)<=0?d=g+1:h=g}while(d<h)}return d}function r(l,u,d=0,h=l.length){const g=n(l,u,d,h-1);return g>d&&i(l[g-1],u)>-i(l[g],u)?g-1:g}return{left:n,center:r,right:s}}function ohe(){return 0}function lhe(a){return a===null?NaN:+a}const uhe=hE(Cx),che=uhe.right;hE(lhe).center;function dhe(a,e){let t,i;if(e===void 0)for(const n of a)n!=null&&(t===void 0?n>=n&&(t=i=n):(t>n&&(t=n),i<n&&(i=n)));else{let n=-1;for(let s of a)(s=e(s,++n,a))!=null&&(t===void 0?s>=s&&(t=i=s):(t>s&&(t=s),i<s&&(i=s)))}return[t,i]}const hhe=Math.sqrt(50),_he=Math.sqrt(10),mhe=Math.sqrt(2);function Xw(a,e,t){const i=(e-a)/Math.max(0,t),n=Math.floor(Math.log10(i)),s=i/Math.pow(10,n),r=s>=hhe?10:s>=_he?5:s>=mhe?2:1;let l,u,d;return n<0?(d=Math.pow(10,-n)/r,l=Math.round(a*d),u=Math.round(e*d),l/d<a&&++l,u/d>e&&--u,d=-d):(d=Math.pow(10,n)*r,l=Math.round(a/d),u=Math.round(e/d),l*d<a&&++l,u*d>e&&--u),u<l&&.5<=t&&t<2?Xw(a,e,t*2):[l,u,d]}function fhe(a,e,t){if(e=+e,a=+a,t=+t,!(t>0))return[];if(a===e)return[a];const i=e<a,[n,s,r]=i?Xw(e,a,t):Xw(a,e,t);if(!(s>=n))return[];const l=s-n+1,u=new Array(l);if(i)if(r<0)for(let d=0;d<l;++d)u[d]=(s-d)/-r;else for(let d=0;d<l;++d)u[d]=(s-d)*r;else if(r<0)for(let d=0;d<l;++d)u[d]=(n+d)/-r;else for(let d=0;d<l;++d)u[d]=(n+d)*r;return u}function W3(a,e,t){return e=+e,a=+a,t=+t,Xw(a,e,t)[2]}function ghe(a,e,t){e=+e,a=+a,t=+t;const i=e<a,n=i?W3(e,a,t):W3(a,e,t);return(i?-1:1)*(n<0?1/-n:n)}function phe(a){return a}var L4=1,R4=2,O3=3,P0=4,nk=1e-6;function yhe(a){return"translate("+a+",0)"}function bhe(a){return"translate(0,"+a+")"}function vhe(a){return e=>+a(e)}function xhe(a,e){return e=Math.max(0,a.bandwidth()-e*2)/2,a.round()&&(e=Math.round(e)),t=>+a(t)+e}function whe(){return!this.__axis}function SF(a,e){var t=[],i=null,n=null,s=6,r=6,l=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,d=a===L4||a===P0?-1:1,h=a===P0||a===R4?"x":"y",g=a===L4||a===O3?yhe:bhe;function y(x){var C=i??(e.ticks?e.ticks.apply(e,t):e.domain()),I=n??(e.tickFormat?e.tickFormat.apply(e,t):phe),A=Math.max(s,0)+l,E=e.range(),L=+E[0]+u,G=+E[E.length-1]+u,F=(e.bandwidth?xhe:vhe)(e.copy(),u),B=x.selection?x.selection():x,Z=B.selectAll(".domain").data([null]),Y=B.selectAll(".tick").data(C,e).order(),$=Y.exit(),te=Y.enter().append("g").attr("class","tick"),ce=Y.select("line"),me=Y.select("text");Z=Z.merge(Z.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Y=Y.merge(te),ce=ce.merge(te.append("line").attr("stroke","currentColor").attr(h+"2",d*s)),me=me.merge(te.append("text").attr("fill","currentColor").attr(h,d*A).attr("dy",a===L4?"0em":a===O3?"0.71em":"0.32em")),x!==B&&(Z=Z.transition(x),Y=Y.transition(x),ce=ce.transition(x),me=me.transition(x),$=$.transition(x).attr("opacity",nk).attr("transform",function(X){return isFinite(X=F(X))?g(X+u):this.getAttribute("transform")}),te.attr("opacity",nk).attr("transform",function(X){var de=this.parentNode.__axis;return g((de&&isFinite(de=de(X))?de:F(X))+u)})),$.remove(),Z.attr("d",a===P0||a===R4?r?"M"+d*r+","+L+"H"+u+"V"+G+"H"+d*r:"M"+u+","+L+"V"+G:r?"M"+L+","+d*r+"V"+u+"H"+G+"V"+d*r:"M"+L+","+u+"H"+G),Y.attr("opacity",1).attr("transform",function(X){return g(F(X)+u)}),ce.attr(h+"2",d*s),me.attr(h,d*A).text(I),B.filter(whe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",a===R4?"start":a===P0?"end":"middle"),B.each(function(){this.__axis=F})}return y.scale=function(x){return arguments.length?(e=x,y):e},y.ticks=function(){return t=Array.from(arguments),y},y.tickArguments=function(x){return arguments.length?(t=x==null?[]:Array.from(x),y):t.slice()},y.tickValues=function(x){return arguments.length?(i=x==null?null:Array.from(x),y):i&&i.slice()},y.tickFormat=function(x){return arguments.length?(n=x,y):n},y.tickSize=function(x){return arguments.length?(s=r=+x,y):s},y.tickSizeInner=function(x){return arguments.length?(s=+x,y):s},y.tickSizeOuter=function(x){return arguments.length?(r=+x,y):r},y.tickPadding=function(x){return arguments.length?(l=+x,y):l},y.offset=function(x){return arguments.length?(u=+x,y):u},y}function AF(a){return SF(O3,a)}function TF(a){return SF(P0,a)}function Che(a,e){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(e).domain(a);break}return this}function Ihe(a){return function(){return a}}function She(a){return+a}var rk=[0,1];function Hg(a){return a}function F3(a,e){return(e-=a=+a)?function(t){return(t-a)/e}:Ihe(isNaN(e)?NaN:.5)}function Ahe(a,e){var t;return a>e&&(t=a,a=e,e=t),function(i){return Math.max(a,Math.min(e,i))}}function The(a,e,t){var i=a[0],n=a[1],s=e[0],r=e[1];return n<i?(i=F3(n,i),s=t(r,s)):(i=F3(i,n),s=t(s,r)),function(l){return s(i(l))}}function Ehe(a,e,t){var i=Math.min(a.length,e.length)-1,n=new Array(i),s=new Array(i),r=-1;for(a[i]<a[0]&&(a=a.slice().reverse(),e=e.slice().reverse());++r<i;)n[r]=F3(a[r],a[r+1]),s[r]=t(e[r],e[r+1]);return function(l){var u=che(a,l,1,i)-1;return s[u](n[u](l))}}function Mhe(a,e){return e.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function Lhe(){var a=rk,e=rk,t=cE,i,n,s,r=Hg,l,u,d;function h(){var y=Math.min(a.length,e.length);return r!==Hg&&(r=Ahe(a[0],a[y-1])),l=y>2?Ehe:The,u=d=null,g}function g(y){return y==null||isNaN(y=+y)?s:(u||(u=l(a.map(i),e,t)))(i(r(y)))}return g.invert=function(y){return r(n((d||(d=l(e,a.map(i),bu)))(y)))},g.domain=function(y){return arguments.length?(a=Array.from(y,She),h()):a.slice()},g.range=function(y){return arguments.length?(e=Array.from(y),h()):e.slice()},g.rangeRound=function(y){return e=Array.from(y),t=Yce,h()},g.clamp=function(y){return arguments.length?(r=y?!0:Hg,h()):r!==Hg},g.interpolate=function(y){return arguments.length?(t=y,h()):t},g.unknown=function(y){return arguments.length?(s=y,g):s},function(y,x){return i=y,n=x,h()}}function Rhe(){return Lhe()(Hg,Hg)}function khe(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function qw(a,e){if((t=(a=e?a.toExponential(e-1):a.toExponential()).indexOf("e"))<0)return null;var t,i=a.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+a.slice(t+1)]}function Rp(a){return a=qw(Math.abs(a)),a?a[1]:NaN}function Phe(a,e){return function(t,i){for(var n=t.length,s=[],r=0,l=a[0],u=0;n>0&&l>0&&(u+l+1>i&&(l=Math.max(1,i-u)),s.push(t.substring(n-=l,n+l)),!((u+=l+1)>i));)l=a[r=(r+1)%a.length];return s.reverse().join(e)}}function Ghe(a){return function(e){return e.replace(/[0-9]/g,function(t){return a[+t]})}}var Whe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yw(a){if(!(e=Whe.exec(a)))throw new Error("invalid format: "+a);var e;return new _E({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Yw.prototype=_E.prototype;function _E(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}_E.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ohe(a){e:for(var e=a.length,t=1,i=-1,n;t<e;++t)switch(a[t]){case".":i=n=t;break;case"0":i===0&&(i=t),n=t;break;default:if(!+a[t])break e;i>0&&(i=0);break}return i>0?a.slice(0,i)+a.slice(n+1):a}var EF;function Fhe(a,e){var t=qw(a,e);if(!t)return a+"";var i=t[0],n=t[1],s=n-(EF=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,r=i.length;return s===r?i:s>r?i+new Array(s-r+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+qw(a,Math.max(0,e+s-1))[0]}function sk(a,e){var t=qw(a,e);if(!t)return a+"";var i=t[0],n=t[1];return n<0?"0."+new Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+new Array(n-i.length+2).join("0")}const ok={"%":(a,e)=>(a*100).toFixed(e),b:a=>Math.round(a).toString(2),c:a=>a+"",d:khe,e:(a,e)=>a.toExponential(e),f:(a,e)=>a.toFixed(e),g:(a,e)=>a.toPrecision(e),o:a=>Math.round(a).toString(8),p:(a,e)=>sk(a*100,e),r:sk,s:Fhe,X:a=>Math.round(a).toString(16).toUpperCase(),x:a=>Math.round(a).toString(16)};function lk(a){return a}var uk=Array.prototype.map,ck=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Nhe(a){var e=a.grouping===void 0||a.thousands===void 0?lk:Phe(uk.call(a.grouping,Number),a.thousands+""),t=a.currency===void 0?"":a.currency[0]+"",i=a.currency===void 0?"":a.currency[1]+"",n=a.decimal===void 0?".":a.decimal+"",s=a.numerals===void 0?lk:Ghe(uk.call(a.numerals,String)),r=a.percent===void 0?"%":a.percent+"",l=a.minus===void 0?"":a.minus+"",u=a.nan===void 0?"NaN":a.nan+"";function d(g){g=Yw(g);var y=g.fill,x=g.align,C=g.sign,I=g.symbol,A=g.zero,E=g.width,L=g.comma,G=g.precision,F=g.trim,B=g.type;B==="n"?(L=!0,B="g"):ok[B]||(G===void 0&&(G=12),F=!0,B="g"),(A||y==="0"&&x==="=")&&(A=!0,y="0",x="=");var Z=I==="$"?t:I==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",Y=I==="$"?i:/[%p]/.test(B)?r:"",$=ok[B],te=/[defgprs%]/.test(B);G=G===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,G)):Math.max(0,Math.min(20,G));function ce(me){var X=Z,de=Y,N,ne,le;if(B==="c")de=$(me)+de,me="";else{me=+me;var _e=me<0||1/me<0;if(me=isNaN(me)?u:$(Math.abs(me),G),F&&(me=Ohe(me)),_e&&+me==0&&C!=="+"&&(_e=!1),X=(_e?C==="("?C:l:C==="-"||C==="("?"":C)+X,de=(B==="s"?ck[8+EF/3]:"")+de+(_e&&C==="("?")":""),te){for(N=-1,ne=me.length;++N<ne;)if(le=me.charCodeAt(N),48>le||le>57){de=(le===46?n+me.slice(N+1):me.slice(N))+de,me=me.slice(0,N);break}}}L&&!A&&(me=e(me,1/0));var ke=X.length+me.length+de.length,Ie=ke<E?new Array(E-ke+1).join(y):"";switch(L&&A&&(me=e(Ie+me,Ie.length?E-de.length:1/0),Ie=""),x){case"<":me=X+me+de+Ie;break;case"=":me=X+Ie+me+de;break;case"^":me=Ie.slice(0,ke=Ie.length>>1)+X+me+de+Ie.slice(ke);break;default:me=Ie+X+me+de;break}return s(me)}return ce.toString=function(){return g+""},ce}function h(g,y){var x=d((g=Yw(g),g.type="f",g)),C=Math.max(-8,Math.min(8,Math.floor(Rp(y)/3)))*3,I=Math.pow(10,-C),A=ck[8+C/3];return function(E){return x(I*E)+A}}return{format:d,formatPrefix:h}}var O2,MF,LF;Bhe({thousands:",",grouping:[3],currency:["$",""]});function Bhe(a){return O2=Nhe(a),MF=O2.format,LF=O2.formatPrefix,O2}function Dhe(a){return Math.max(0,-Rp(Math.abs(a)))}function Vhe(a,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rp(e)/3)))*3-Rp(Math.abs(a)))}function Zhe(a,e){return a=Math.abs(a),e=Math.abs(e)-a,Math.max(0,Rp(e)-Rp(a))+1}function zhe(a,e,t,i){var n=ghe(a,e,t),s;switch(i=Yw(i??",f"),i.type){case"s":{var r=Math.max(Math.abs(a),Math.abs(e));return i.precision==null&&!isNaN(s=Vhe(n,r))&&(i.precision=s),LF(i,r)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=Zhe(n,Math.max(Math.abs(a),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=Dhe(n))&&(i.precision=s-(i.type==="%")*2);break}}return MF(i)}function Uhe(a){var e=a.domain;return a.ticks=function(t){var i=e();return fhe(i[0],i[i.length-1],t??10)},a.tickFormat=function(t,i){var n=e();return zhe(n[0],n[n.length-1],t??10,i)},a.nice=function(t){t==null&&(t=10);var i=e(),n=0,s=i.length-1,r=i[n],l=i[s],u,d,h=10;for(l<r&&(d=r,r=l,l=d,d=n,n=s,s=d);h-- >0;){if(d=W3(r,l,t),d===u)return i[n]=r,i[s]=l,e(i);if(d>0)r=Math.floor(r/d)*d,l=Math.ceil(l/d)*d;else if(d<0)r=Math.ceil(r*d)/d,l=Math.floor(l*d)/d;else break;u=d}return a},a}function mE(){var a=Rhe();return a.copy=function(){return Mhe(a,mE())},Che.apply(a,arguments),Uhe(a)}function gs(a){return function(){return a}}const N3=Math.PI,B3=2*N3,wm=1e-6,Hhe=B3-wm;function RF(a){this._+=a[0];for(let e=1,t=a.length;e<t;++e)this._+=arguments[e]+a[e]}function Xhe(a){let e=Math.floor(a);if(!(e>=0))throw new Error(`invalid digits: ${a}`);if(e>15)return RF;const t=10**e;return function(i){this._+=i[0];for(let n=1,s=i.length;n<s;++n)this._+=Math.round(arguments[n]*t)/t+i[n]}}class qhe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?RF:Xhe(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,n){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(e,t,i,n,s,r){this._append`C${+e},${+t},${+i},${+n},${this._x1=+s},${this._y1=+r}`}arcTo(e,t,i,n,s){if(e=+e,t=+t,i=+i,n=+n,s=+s,s<0)throw new Error(`negative radius: ${s}`);let r=this._x1,l=this._y1,u=i-e,d=n-t,h=r-e,g=l-t,y=h*h+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(y>wm)if(!(Math.abs(g*u-d*h)>wm)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let x=i-r,C=n-l,I=u*u+d*d,A=x*x+C*C,E=Math.sqrt(I),L=Math.sqrt(y),G=s*Math.tan((N3-Math.acos((I+y-A)/(2*E*L)))/2),F=G/L,B=G/E;Math.abs(F-1)>wm&&this._append`L${e+F*h},${t+F*g}`,this._append`A${s},${s},0,0,${+(g*x>h*C)},${this._x1=e+B*u},${this._y1=t+B*d}`}}arc(e,t,i,n,s,r){if(e=+e,t=+t,i=+i,r=!!r,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(n),u=i*Math.sin(n),d=e+l,h=t+u,g=1^r,y=r?n-s:s-n;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>wm||Math.abs(this._y1-h)>wm)&&this._append`L${d},${h}`,i&&(y<0&&(y=y%B3+B3),y>Hhe?this._append`A${i},${i},0,1,${g},${e-l},${t-u}A${i},${i},0,1,${g},${this._x1=d},${this._y1=h}`:y>wm&&this._append`A${i},${i},0,${+(y>=N3)},${g},${this._x1=e+i*Math.cos(s)},${this._y1=t+i*Math.sin(s)}`)}rect(e,t,i,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}}function kF(a){let e=3;return a.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return a},()=>new qhe(e)}function PF(a){return typeof a=="object"&&"length"in a?a:Array.from(a)}function GF(a){this._context=a}GF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(a,e){switch(a=+a,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,e):this._context.moveTo(a,e);break;case 1:this._point=2;default:this._context.lineTo(a,e);break}}};function WF(a){return new GF(a)}function OF(a){return a[0]}function FF(a){return a[1]}function NF(a,e){var t=gs(!0),i=null,n=WF,s=null,r=kF(l);a=typeof a=="function"?a:a===void 0?OF:gs(a),e=typeof e=="function"?e:e===void 0?FF:gs(e);function l(u){var d,h=(u=PF(u)).length,g,y=!1,x;for(i==null&&(s=n(x=r())),d=0;d<=h;++d)!(d<h&&t(g=u[d],d,u))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+a(g,d,u),+e(g,d,u));if(x)return s=null,x+""||null}return l.x=function(u){return arguments.length?(a=typeof u=="function"?u:gs(+u),l):a},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:gs(+u),l):e},l.defined=function(u){return arguments.length?(t=typeof u=="function"?u:gs(!!u),l):t},l.curve=function(u){return arguments.length?(n=u,i!=null&&(s=n(i)),l):n},l.context=function(u){return arguments.length?(u==null?i=s=null:s=n(i=u),l):i},l}function Yhe(a,e,t){var i=null,n=gs(!0),s=null,r=WF,l=null,u=kF(d);a=typeof a=="function"?a:a===void 0?OF:gs(+a),e=typeof e=="function"?e:gs(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?FF:gs(+t);function d(g){var y,x,C,I=(g=PF(g)).length,A,E=!1,L,G=new Array(I),F=new Array(I);for(s==null&&(l=r(L=u())),y=0;y<=I;++y){if(!(y<I&&n(A=g[y],y,g))===E)if(E=!E)x=y,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),C=y-1;C>=x;--C)l.point(G[C],F[C]);l.lineEnd(),l.areaEnd()}E&&(G[y]=+a(A,y,g),F[y]=+e(A,y,g),l.point(i?+i(A,y,g):G[y],t?+t(A,y,g):F[y]))}if(L)return l=null,L+""||null}function h(){return NF().defined(n).curve(r).context(s)}return d.x=function(g){return arguments.length?(a=typeof g=="function"?g:gs(+g),i=null,d):a},d.x0=function(g){return arguments.length?(a=typeof g=="function"?g:gs(+g),d):a},d.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:gs(+g),d):i},d.y=function(g){return arguments.length?(e=typeof g=="function"?g:gs(+g),t=null,d):e},d.y0=function(g){return arguments.length?(e=typeof g=="function"?g:gs(+g),d):e},d.y1=function(g){return arguments.length?(t=g==null?null:typeof g=="function"?g:gs(+g),d):t},d.lineX0=d.lineY0=function(){return h().x(a).y(e)},d.lineY1=function(){return h().x(a).y(t)},d.lineX1=function(){return h().x(i).y(e)},d.defined=function(g){return arguments.length?(n=typeof g=="function"?g:gs(!!g),d):n},d.curve=function(g){return arguments.length?(r=g,s!=null&&(l=r(s)),d):r},d.context=function(g){return arguments.length?(g==null?s=l=null:l=r(s=g),d):s},d}const cl={bisector:hE,extent:dhe,axisBottom:AF,axisLeft:TF,scaleLinear:mE,pointer:pu,select:eo,selectAll:mce,area:Yhe,line:NF};function Khe(a){const e=a.light!==void 0?a.light:!1,t=e?{top:0,right:0,bottom:0,left:0}:{top:10,right:20,bottom:30,left:40},i=a.hoverCallback!==void 0?a.hoverCallback:()=>{},n=a.outCallback!==void 0?a.outCallback:()=>{},s=a.distanceExtractor,r=a.linesConfiguration,l=Object.keys(r).length,u=cl.bisector(ce=>s(ce)).left,d=a.poiExtractor,h=a.styleDefs,g=a.poiLabelAngle!==void 0?a.poiLabelAngle:-60,y=ce=>String(ce),x={xhover:y,yhover:y,xtick:y,ytick:y,xlabel:()=>"Distance",ylabel:()=>"Elevation",...a.formatter},C=a.lightXAxis!==void 0?a.lightXAxis:!1;let I,A,E;const L=a.scaleModifier;let G,F,B,Z,Y;const $=ce=>{ce.each(function(me){if(cl.select(this).selectAll("svg").remove(),me===void 0)return;B=Math.max(this.clientWidth-t.right-t.left,0),A=cl.scaleLinear().range([0,B]),F=Math.max(this.clientHeight-t.top-t.bottom,0),E=cl.scaleLinear().range([F,0]);const X=cl.axisBottom(A),de=cl.axisLeft(E),N=l===1?cl.area().x(J=>A(s(J))).y0(F).y1(J=>{const je=Object.keys(r)[0];return E(r[je].zExtractor(J))}):void 0;I=cl.select(this).selectAll("svg").data([me]);const ne=I.enter().append("svg");I=cl.select(this).selectAll("svg").data([me]),h!==void 0&&ne.append("defs").append("style").attr("type","text/css").text(h);const le=ne.append("g");te(),le.style("font","11px Arial"),l===1&&le.append("path").attr("class","area").style("fill","rgba(222, 222, 222, 0.5)"),le.insert("g",":first-child").attr("class","grid-y"),e||(le.append("g").attr("class","x axis").attr("transform",`translate(0,${F})`),le.append("text").attr("class","x label").attr("text-anchor","end").attr("x",B-4).attr("y",F-4),le.append("g").attr("class","y axis"),le.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").style("fill","grey").text(x.ylabel()),le.append("g").attr("class","metas").attr("transform",`translate(${B+3}, 0)`)),le.append("g").attr("class","pois");const _e=le.append("g").attr("class","x grid-hover");_e.append("svg:line").attr("stroke-dasharray","5,5"),_e.append("text"),le.append("rect").attr("class","overlay").attr("width",B).attr("height",F).style("fill","none").style("pointer-events","all"),I.attr("width",B+t.left+t.right).attr("height",F+t.top+t.bottom),G=I.select("g").attr("transform",`translate(${t.left},${t.top})`),Y=cl.extent(me,J=>s(J)),A.domain(Y);const ke=(()=>{let J=[];for(const je in r){const Qe=cl.extent(me,Je=>r[je].zExtractor(Je));Qe.every(Number.isFinite)&&(J=J.concat(Qe))}return[Math.min.apply(null,J),Math.max.apply(null,J)]})();if(E.domain(ke),L!==void 0)L(A,E,B,F);else{const J=(ke[1]-ke[0])*.1;E.domain([ke[0]-J,ke[1]+J])}l===1&&G.select(".area").transition().attr("d",N);let Ie,re,Q;for(re in r)le.append("path").attr("class",`line ${re}`).style("stroke",r[re].color||"#F00").style("fill","none"),Q=le.append("g").attr("class",`y grid-hover ${re}`),Q.append("svg:line").attr("stroke-dasharray","5,5"),Q.append("text"),Ie=cl.line().x(J=>A(s(J))).y(J=>E(r[re].zExtractor(J))).defined(J=>r[re].zExtractor(J)!==null),G.select(`.line.${re}`).transition().attr("d",Ie);Y[1]>2e3?Z=1e3:Z=1,e||(X.tickFormat(J=>x.xtick(J/Z)),C&&X.tickValues([0,A.domain()[1]]),de.tickFormat(J=>x.ytick(J)),G.select(".x.axis").transition().call(X),G.select(".x.label").text(x.xlabel(Z)).style("fill","grey").style("shape-rendering","crispEdges"),F/15<10&&de.ticks(F/15),G.select(".y.axis").transition().call(de)),G.select(".grid-y").transition().call(de.tickSize(-B).tickFormat(()=>"")).selectAll(".tick line").style("stroke","#ccc").style("opacity",.7),G.selectAll(".axis").selectAll("path, line").style("fill","none").style("stroke","#000").style("shape-rendering","crispEdges"),G.select(".grid-y").select("path").style("stroke","none"),G.selectAll(".grid-hover line").style("stroke","#222").style("opacity",.8),G.select(".overlay").on("mouseout",()=>$.clearHighlight()).on("mousemove",J=>{const[je]=cl.pointer(J),Qe=A.invert(je);$.highlight(Qe)})})};$.clearHighlight=()=>{G.selectAll(".grid-hover").style("display","none"),n.call(null)},$.highlight=ce=>{const me=I.datum(),X=u(me,ce);if(X>=me.length)return;const de=me[X],N=s(de);let ne;const le=[],_e={};let ke;for(ke in r)ne=r[ke].zExtractor(de),Number.isFinite(ne)?(le.push(ne),_e[ke]=ne,G.select(`.y.grid-hover.${ke}`).style("display","inline").select("line").attr("x1",A(0)).attr("y1",E(ne)).attr("x2",B).attr("y2",E(ne))):G.select(`.y.grid-hover.${ke}`).style("display","none");const Ie=E(Math.max.apply(null,le));G.select(".x.grid-hover").style("display","inline").select("line").attr("x1",A(N)).attr("y1",F).attr("x2",A(N)).attr("y2",Number.isFinite(Ie)?Ie:0);const re=N>Y[1]/2;let Q=A(N);if(Q+=re?-10:10,G.select(".x.grid-hover text").text(x.xhover(N)).style("text-anchor",re?"end":"start").attr("transform",`translate(${Q},${F-10})`),l===1){const J=le[0]===null?"no value":x.yhover(le[0]);G.select(".y.grid-hover text").text(J).style("text-anchor",re?"end":"start").attr("transform",`translate(${Q},${E(le[0])-10})`)}i.call(null,de,N,_e)},$.showPois=ce=>{ce=ce!==void 0?ce:[];const me=d,X=I.select("g"),de=I.datum(),le=X.select(".pois").selectAll(".poi").data(ce,_e=>{const ke=u(de,me?Math.round(me.dist(_e)*10)/10:void 0,1),Ie=de[ke];if(Ie){let re;const Q=[];for(re in r)Q.push(r[re].zExtractor(Ie));const J=Math.max.apply(null,Q);me?.z(_e,J)}return me?.id(_e)}).enter().append("g").attr("class","poi");le.append("text").attr("x",e?0:9).attr("dy",".35em").attr("text-anchor",e?"middle":"start"),le.append("line").style("shape-rendering","crispEdges"),le.style("opacity",0).transition().duration(1e3).delay(100).style("opacity",1),le.selectAll("text").attr("transform",_e=>e?[`translate(${A(me.dist(_e))},${E(me.z(_e))-10})`]:[`translate(${A(me.dist(_e))},${E(me.z(_e))-20}) rotate(${g})`]).text(_e=>me.sort(_e)+(e?"":` - ${me.title(_e)}`)),le.selectAll("line").style("stroke","grey").attr("x1",_e=>A(me.dist(_e))).attr("y1",()=>E(E.domain()[0])).attr("x2",_e=>A(me.dist(_e))).attr("y2",_e=>E(me.z(_e))),le.exit().remove()};function te(){$.showPois([])}return $}const jhe=rt({__name:"d3-graph-elevation",props:{showTooltip:{type:Boolean,default:!0},dataset:{},highlightDistance:{},labelXFormatter:{},labelYFormatter:{},xFormatter:{},yFormatter:{}},emits:["hover:profile","out:profile"],setup(a,{emit:e}){const t=e,i=a,n=Ye();let s,r,l=(h,g,y)=>t("hover:profile",h,g,y);fn(()=>{r=eo(n.value),s=Khe(d()),u()}),Rt(()=>i.highlightDistance,h=>{h&&h>0?s.highlight(h):s.clearHighlight()}),xa(window,"resize",up(u,50));function u(){s!==void 0&&r.datum(i.dataset).call(s)}function d(){return{linesConfiguration:{line1:{zExtractor:h=>parseFloat(h?.values?.dhm?.toPrecision(5))||0}},distanceExtractor:h=>h.dist??0,hoverCallback:l,outCallback:()=>t("out:profile"),formatter:{xhover:i.xFormatter,yhover:i.yFormatter,xlabel:i.labelXFormatter,ylabel:i.labelYFormatter}}}return(h,g)=>(U(),se("div",{class:"h-[250px]",ref_key:"graphElement",ref:n},null,512))}}),$he={key:1,class:"text-center"},Jhe=rt({__name:"elevation-profile",props:{profileData:{},highlightDistance:{}},setup(a){const{t:e}=Ct();return(t,i)=>a.profileData?(U(),Lt(jhe,{key:0,dataset:a.profileData,highlightDistance:a.highlightDistance,labelXFormatter:n=>`${R(e)("Distance")} [${n===1?"m":"km"}]`,labelYFormatter:()=>`${R(e)("Elevation")} [m]`,xFormatter:n=>R(s_)(n,2),yFormatter:n=>R(bT)(n,1)},null,8,["dataset","highlightDistance","labelXFormatter","labelYFormatter","xFormatter","yFormatter"])):(U(),se("div",$he,[...i[0]||(i[0]=[P("img",{class:"inline-block min-h-64 p-1",src:Wle,alt:""},null,-1)])]))}}),Gg=new Map;function Qhe(){Gg.clear()}class e_e{styleSerialToStyle(e){return e?JSON.parse(decodeURIComponent(e))||[]:[]}styleLocalStorageToStyle(e){return e?JSON.parse(e).medium||[]:[]}styleToSerial(e){return e&&e.length>0?JSON.stringify(e):""}styleToLocalStorage(e){return e&&e.length>0?JSON.stringify({medium:e}):""}}const F2=new e_e;var ml=(a=>(a[a.simpleStyle=0]="simpleStyle",a[a.mediumStyle=1]="mediumStyle",a[a.advancedStyle=2]="advancedStyle",a))(ml||{});const t_e=["line","fill","symbol","fill-extrusion","background","hillshade"],a_e="https://vectortiles-staging.geoportail.lu",i_e="https://migration.geoportail.lu/getvtstyle",n_e="https://migration.geoportail.lu/uploadvtstyle",r_e="https://migration.geoportail.lu/deletevtstyle";class s_e{_vectortilesUrl=a_e;_mvtStylesGetUrl=i_e;_mvtStylesUploadUrl=n_e;_mvtStylesDeleteUrl=r_e;get vectortilesUrl(){return this._vectortilesUrl===void 0&&console.warn("Warning: vectortilesUrl is not set."),this._vectortilesUrl}get mvtStylesGetUrl(){return this._mvtStylesGetUrl===void 0&&console.warn("Warning: mvtStylesGetUrl is not set."),this._mvtStylesGetUrl}get mvtStylesUploadUrl(){return this._mvtStylesUploadUrl===void 0&&console.warn("Warning: mvtStylesUploadUrl is not set."),this._mvtStylesUploadUrl}get mvtStylesDeleteUrl(){return this._mvtStylesDeleteUrl===void 0&&console.warn("Warning: mvtStylesDeleteUrl is not set."),this._mvtStylesDeleteUrl}setRegisterUrl_v3(e){e.get&&(this._mvtStylesGetUrl=e.get),e.upload&&(this._mvtStylesUploadUrl=e.upload),e.delete&&(this._mvtStylesDeleteUrl=e.delete),e.vectortiles&&(this._vectortilesUrl=e.vectortiles),console.warn("Deprecated: StylesUrlHelper.setRegisterUrl_v3() is meant to be removed when v4 is fully operational")}}const G0=new s_e;function T_(){function a(I){const A=Kl.getItem(vO),E=Kl.getItem(xO)||"http";return(A?`${E}://${A}`:G0.vectortilesUrl)+`/styles/${I}/style.json`}function e(I){return`${G0.vectortilesUrl}/styles/${I}/{z}/{x}/{y}.png`}function t(I,A){const E=Tu();if(I==null)return;const L=new Map;E.bgVectorSources.forEach((G,F)=>{if(F===I.id){const B={...G,xyz_custom:A};L.set(F,B)}else L.set(F,G)}),E.setBgVectorSources(L)}function i(I,A,E=!1){const G=a(A),F=e(A),B={label:I,defaultMapBoxStyle:G,defaultMapBoxStyleXYZ:F,xyz:F,xyz_custom:"",style:G};if(!Kl.getItem(X1)){if(!E)return Promise.resolve(B)}return Promise.resolve(B)}function n(I){const A=Dd().medium_default_styles.road;if(I){I.colors.forEach((L,G)=>{A[G].color=L});const E=A.findIndex(L=>L.label==="Hillshade");A[E].visible=I.hillshade}return A}function s(I,A,E){if(!I||!A.get(I.id))return;const L=JSON.parse(JSON.stringify(A.get(I.id)));if(L&&!(!L||!L.layers))return E&&E.forEach(G=>{L?.layers.forEach((F,B)=>{for(const Z of t_e)if((G[`${Z}s`]||[]).includes(F.id)){const $=Object.assign({},L.layers[B].paint);G.color&&($[`${Z}-color`]=G.color,$[`${Z}-opacity`]=1,L.layers[B].paint=$),L.layers[B].layout=Object.assign({},L.layers[B].layout,{visibility:G.visible?"visible":"none"})}})}),L}function r(I){return I?fetch(`${G0.mvtStylesDeleteUrl}?id=${I}`).catch(console.warn):Promise.resolve()}async function l(I,A){await r(A);const E=new FormData,L=JSON.stringify(I),G=new Blob([L],{type:"application/json"});E.append("style",G,"style.json");const F={method:"POST",body:E};return fetch(G0.mvtStylesUploadUrl,F).then(B=>B.json()).then(B=>B.id).catch(console.warn)}function u(I,A){if(!A)return;const E=I.maplibreMap;E&&(E.loaded()?E.setStyle(A):new Promise(L=>E.once("data",L)).then(()=>E.setStyle(A)))}function d(I){return Dd().bg_layers.find(A=>A.id==I?.id)}function h(I){return d(I)?.vector_id}function g(I){return d(I)?.vector_id!==void 0}function y(I){const A=d(I),E=[...A?.simple_style_class?[ml.simpleStyle]:[],...A?.medium_style_class?[ml.mediumStyle]:[],...A?.expert_style_class?[ml.advancedStyle]:[]];return{isEditable:A?.vector_id!==void 0,styleEditors:E}}function x(I,A){return A.map(E=>Object.assign(E,{selected:E.colors.every((L,G)=>I[G]?.color===L)}))}function C(){const I=[],A=Tu();Dd().bg_layers.forEach(E=>{if(E.vector_id){const L=i(E.icon_id,E.vector_id);I.push(L.then(G=>({id:E.id,config:G})))}}),Promise.all(I).then(E=>{const L=new Map;E.forEach(G=>L.set(G.id,G.config)),A.setBgVectorSources(L)})}return{getDefaultMapBoxStyleUrl:a,getDefaultMapBoxStyleXYZ:e,setConfigForLayer:i,getRoadStyleFromSimpleStyle:n,applyDefaultStyle:s,applyConsolidatedStyle:u,getVectorId:h,setCustomStyleSerial:t,unregisterStyle:r,registerStyle:l,checkSelection:x,isLayerStyleEditable:g,getStyleCapabilitiesFromLayer:y,initBackgroundsConfigs:C}}const Tu=Ao("style",()=>{const a=T_(),e=Ai(),t=Ai(new Map),i=Ai(new Map),n=Ai(!1),s=Ai(null),r=Ai();function l(C){t.value=C}function u(C){const I=new Map;i.value.forEach((A,E)=>{E!==C&&I.set(E,A)}),i.value=I}function d(C,I){const A=new Map;i.value.forEach((E,L)=>A.set(L,E)),A.set(C,I),i.value=A}function h(C){e.value=a.getRoadStyleFromSimpleStyle(C),y()}function g(C){e.value=C,y()}function y(){n.value=!1}function x(){n.value=!0}return{bgStyle:e,bgVectorSources:t,bgVectorBaseStyles:i,isExpertStyleActive:n,appliedStyle:r,removeBaseStyle:u,setBaseStyle:d,setBgVectorSources:l,setSimpleStyle:h,setStyle:g,disableExpertStyle:y,enableExpertStyle:x,styleSerial:s}},{});class o_e{styleWatcher;bootstrap(){const e=Tu();let t,i=!1;t=Ar(()=>{e.bgVectorSources&&(this.restore(!1),i&&this.persist(),i=!0,t&&t())})}persist(){const e=Tu(),{bgStyle:t}=xt(e);this.styleWatcher||(this.styleWatcher=Rt(t,(i,n)=>{if(n!==i){const s=Vi();s.bgLayer&&e.bgVectorSources.has(s.bgLayer.id)&&(i&&i.length?Oa.setValue(s.bgLayer.name,i||[],F2.styleToLocalStorage):Oa.removeItem(s.bgLayer.name),Oa.setValue(X1,i||[],F2.styleToSerial))}},{immediate:!0}))}restore(e){const t=Tu();t.setStyle(null);const n=Vi().bgLayer;if(n){let s=[];e||(s=Oa.getValue(X1,F2.styleSerialToStyle)),s.length===0&&(s=Oa.getValue(n.name,F2.styleLocalStorageToStyle)),s&&s.length>0&&t.setStyle(s)}}}const BF=new o_e;var Pm=(a=>(a.LAYER_OFFLINE_TILE="tile",a.LAYER_OFFLINE_VECTOR="vector",a.LAYER_OFFLINE_BG_VECTOR="bg_vector",a.LAYER_OFFLINE_BG_WMTS="off_bg_wmts",a))(Pm||{});const D3="id",V3="label",DF="layer_name",Kw="metadata",l_e="queryable_id",u_e="current_time",c_e="time",d_e="defaultMapBoxStyle";class h_e extends qT{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,n=e.viewState,s=n.resolution,r=this.getLayer().getSource(),l=e.viewHints;let u=e.extent;if(t.extent!==void 0&&(u=Ac(u,Zl(t.extent,n.projection))),!l[Kn.ANIMATING]&&!l[Kn.INTERACTING]&&!lf(u))if(r){const d=n.projection,h=r.getImage(u,s,i,d);h&&(this.loadImage(h)?this.image=h:h.getState()===Ia.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),n=Gr(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!kc(s,n))return null;const r=this.image.getExtent(),l=this.image.getImage(),u=Oi(r),d=Math.floor(l.width*((n[0]-r[0])/u));if(d<0||d>=l.width)return null;const h=Fr(r),g=Math.floor(l.height*((r[3]-n[1])/h));return g<0||g>=l.height?null:this.getImageData(l,d,g)}renderFrame(e,t){const i=this.image,n=i.getExtent(),s=i.getResolution(),[r,l]=Array.isArray(s)?s:[s,s],u=i.getPixelRatio(),d=e.layerStatesArray[e.layerIndex],h=e.pixelRatio,g=e.viewState,y=g.center,x=g.resolution,C=h*r/(x*u),I=h*l/(x*u);this.prepareContainer(e,t);const A=this.context.canvas.width,E=this.context.canvas.height,L=this.getRenderContext(e);let G=!1,F=!0;if(d.extent){const te=Zl(d.extent,g.projection);F=Or(te,e.extent),G=F&&!yc(te,e.extent),G&&this.clipUnrotated(L,e,te)}const B=i.getImage(),Z=ku(this.tempTransform,A/2,E/2,C,I,0,u*(n[0]-y[0])/r,u*(y[1]-n[3])/l);this.renderedResolution=l*h/u;const Y=B.width*Z[0],$=B.height*Z[3];if(this.getLayer().getSource().getInterpolate()||(L.imageSmoothingEnabled=!1),this.preRender(L,e),F&&Y>=.5&&$>=.5){const te=Z[4],ce=Z[5],me=d.opacity;me!==1&&(L.save(),L.globalAlpha=me),L.drawImage(B,0,0,+B.width,+B.height,te,ce,Y,$),me!==1&&L.restore()}return this.postRender(this.context,e),G&&L.restore(),L.imageSmoothingEnabled=!0,this.container}}class __e extends cf{constructor(e){e=e||{},super(e)}}class a1 extends __e{constructor(e){super(e)}createRenderer(){return new h_e(this)}getData(e){return super.getData(e)}}let k4;const hp=[];function dk(a,e,t,i,n){a.beginPath(),a.moveTo(0,0),a.lineTo(e,t),a.lineTo(i,n),a.closePath(),a.save(),a.clip(),a.fillRect(0,0,Math.max(e,i)+1,Math.max(t,n)),a.restore()}function P4(a,e){return Math.abs(a[e*4]-210)>2||Math.abs(a[e*4+3]-.75*255)>2}function m_e(){if(k4===void 0){const a=Jr(6,6,hp);a.globalCompositeOperation="lighter",a.fillStyle="rgba(210, 0, 0, 0.75)",dk(a,4,5,4,0),dk(a,4,5,0,5);const e=a.getImageData(0,0,3,3).data;k4=P4(e,0)||P4(e,4)||P4(e,8),ZC(a),hp.push(a.canvas)}return k4}function J1(a,e,t,i){const n=fr(t,e,a);let s=A1(e,i,t);const r=e.getMetersPerUnit();r!==void 0&&(s*=r);const l=a.getMetersPerUnit();l!==void 0&&(s/=l);const u=a.getExtent();if(!u||kc(u,n)){const d=A1(a,s,n)/s;isFinite(d)&&d>0&&(s/=d)}return s}function f_e(a,e,t,i){const n=Ru(t);let s=J1(a,e,n,i);return(!isFinite(s)||s<=0)&&P5(t,function(r){return s=J1(a,e,r,i),isFinite(s)&&s>0}),s}function VF(a,e,t,i,n,s,r,l,u,d,h,g,y,x){const C=Jr(Math.round(t*a),Math.round(t*e),hp);if(g||(C.imageSmoothingEnabled=!1),u.length===0)return C.canvas;C.scale(t,t);function I(B){return Math.round(B*t)/t}C.globalCompositeOperation="lighter";const A=Qo();u.forEach(function(B,Z,Y){vp(A,B.extent)});let E;const L=t/i,G=(g?1:1+Math.pow(2,-24))/L;(!y||u.length!==1||d!==0)&&(E=Jr(Math.round(Oi(A)*L),Math.round(Fr(A)*L),hp),g||(E.imageSmoothingEnabled=!1),u.forEach(function(B,Z,Y){if(B.image.width>0&&B.image.height>0){if(B.clipExtent){E.save();const X=(B.clipExtent[0]-A[0])*L,de=-(B.clipExtent[3]-A[3])*L,N=Oi(B.clipExtent)*L,ne=Fr(B.clipExtent)*L;E.rect(g?X:Math.round(X),g?de:Math.round(de),g?N:Math.round(X+N)-Math.round(X),g?ne:Math.round(de+ne)-Math.round(de)),E.clip()}const $=(B.extent[0]-A[0])*L,te=-(B.extent[3]-A[3])*L,ce=Oi(B.extent)*L,me=Fr(B.extent)*L;E.drawImage(B.image,d,d,B.image.width-2*d,B.image.height-2*d,g?$:Math.round($),g?te:Math.round(te),g?ce:Math.round($+ce)-Math.round($),g?me:Math.round(te+me)-Math.round(te)),B.clipExtent&&E.restore()}}));const F=th(r);return l.getTriangles().forEach(function(B,Z,Y){const $=B.source,te=B.target;let ce=$[0][0],me=$[0][1],X=$[1][0],de=$[1][1],N=$[2][0],ne=$[2][1];const le=I((te[0][0]-F[0])/s),_e=I(-(te[0][1]-F[1])/s),ke=I((te[1][0]-F[0])/s),Ie=I(-(te[1][1]-F[1])/s),re=I((te[2][0]-F[0])/s),Q=I(-(te[2][1]-F[1])/s),J=ce,je=me;ce=0,me=0,X-=J,de-=je,N-=J,ne-=je;const Qe=[[X,de,0,0,ke-le],[N,ne,0,0,re-le],[0,0,X,de,Ie-_e],[0,0,N,ne,Q-_e]],Je=eH(Qe);if(!Je)return;if(C.save(),C.beginPath(),m_e()||!g){C.moveTo(ke,Ie);const Pt=4,zt=le-ke,Nt=_e-Ie;for(let ga=0;ga<Pt;ga++)C.lineTo(ke+I((ga+1)*zt/Pt),Ie+I(ga*Nt/(Pt-1))),ga!=Pt-1&&C.lineTo(ke+I((ga+1)*zt/Pt),Ie+I((ga+1)*Nt/(Pt-1)));C.lineTo(re,Q)}else C.moveTo(ke,Ie),C.lineTo(le,_e),C.lineTo(re,Q);C.clip(),C.transform(Je[0],Je[2],Je[1],Je[3],le,_e),C.translate(A[0]-J,A[3]-je);let kt;if(E)kt=E.canvas,C.scale(G,-G);else{const Pt=u[0],zt=Pt.extent;kt=Pt.image,C.scale(Oi(zt)/kt.width,-Fr(zt)/kt.height)}C.drawImage(kt,0,0),C.restore()}),E&&(ZC(E),hp.push(E.canvas)),h&&(C.save(),C.globalCompositeOperation="source-over",C.strokeStyle="black",C.lineWidth=1,l.getTriangles().forEach(function(B,Z,Y){const $=B.target,te=($[0][0]-F[0])/s,ce=-($[0][1]-F[1])/s,me=($[1][0]-F[0])/s,X=-($[1][1]-F[1])/s,de=($[2][0]-F[0])/s,N=-($[2][1]-F[1])/s;C.beginPath(),C.moveTo(me,X),C.lineTo(te,ce),C.lineTo(de,N),C.closePath(),C.stroke()}),C.restore()),C.canvas}function Z3(a){return Array.isArray(a)?Math.min(...a):a}const g_e=10,hk=.25;class ZF{constructor(e,t,i,n,s,r,l){this.sourceProj_=e,this.targetProj_=t;let u={};const d=l?WA(G=>Gr(l,fr(G,this.targetProj_,this.sourceProj_))):h_(this.targetProj_,this.sourceProj_);this.transformInv_=function(G){const F=G[0]+"/"+G[1];return u[F]||(u[F]=d(G)),u[F]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Oi(n)>=Oi(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Oi(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Oi(this.targetProj_.getExtent()):null;const h=th(i),g=RC(i),y=LC(i),x=MC(i),C=this.transformInv_(h),I=this.transformInv_(g),A=this.transformInv_(y),E=this.transformInv_(x),L=g_e+(r?Math.max(0,Math.ceil(Math.log2(MA(i)/(r*r*256*256)))):0);if(this.addQuad_(h,g,y,x,C,I,A,E,L),this.wrapsXInSource_){let G=1/0;this.triangles_.forEach(function(F,B,Z){G=Math.min(G,F.source[0][0],F.source[1][0],F.source[2][0])}),this.triangles_.forEach(F=>{if(Math.max(F.source[0][0],F.source[1][0],F.source[2][0])-G>this.sourceWorldWidth_/2){const B=[[F.source[0][0],F.source[0][1]],[F.source[1][0],F.source[1][1]],[F.source[2][0],F.source[2][1]]];B[0][0]-G>this.sourceWorldWidth_/2&&(B[0][0]-=this.sourceWorldWidth_),B[1][0]-G>this.sourceWorldWidth_/2&&(B[1][0]-=this.sourceWorldWidth_),B[2][0]-G>this.sourceWorldWidth_/2&&(B[2][0]-=this.sourceWorldWidth_);const Z=Math.min(B[0][0],B[1][0],B[2][0]);Math.max(B[0][0],B[1][0],B[2][0])-Z<this.sourceWorldWidth_/2&&(F.source=B)}})}u={}}addTriangle_(e,t,i,n,s,r){this.triangles_.push({source:[n,s,r],target:[e,t,i]})}addQuad_(e,t,i,n,s,r,l,u,d){const h=Yr([s,r,l,u]),g=this.sourceWorldWidth_?Oi(h)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,x=this.sourceProj_.canWrapX()&&g>.5&&g<1;let C=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const A=Yr([e,t,i,n]);C=Oi(A)/this.targetWorldWidth_>hk||C}!x&&this.sourceProj_.isGlobal()&&g&&(C=g>hk||C)}if(!C&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Or(h,this.maxSourceExtent_))return;let I=0;if(!C&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(r[0])||!isFinite(r[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(u[0])||!isFinite(u[1]))){if(d>0)C=!0;else if(I=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(r[0])||!isFinite(r[1])?4:0)+(!isFinite(l[0])||!isFinite(l[1])?2:0)+(!isFinite(u[0])||!isFinite(u[1])?1:0),I!=1&&I!=2&&I!=4&&I!=8)return}if(d>0){if(!C){const A=[(e[0]+i[0])/2,(e[1]+i[1])/2],E=this.transformInv_(A);let L;x?L=(Gd(s[0],y)+Gd(l[0],y))/2-Gd(E[0],y):L=(s[0]+l[0])/2-E[0];const G=(s[1]+l[1])/2-E[1];C=L*L+G*G>this.errorThresholdSquared_}if(C){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const A=[(t[0]+i[0])/2,(t[1]+i[1])/2],E=this.transformInv_(A),L=[(n[0]+e[0])/2,(n[1]+e[1])/2],G=this.transformInv_(L);this.addQuad_(e,t,A,L,s,r,E,G,d-1),this.addQuad_(L,A,i,n,G,E,l,u,d-1)}else{const A=[(e[0]+t[0])/2,(e[1]+t[1])/2],E=this.transformInv_(A),L=[(i[0]+n[0])/2,(i[1]+n[1])/2],G=this.transformInv_(L);this.addQuad_(e,A,L,n,s,E,G,u,d-1),this.addQuad_(A,t,i,L,E,r,l,G,d-1)}return}}if(x){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(I&11)==0&&this.addTriangle_(e,i,n,s,l,u),(I&14)==0&&this.addTriangle_(e,i,t,s,l,r),I&&((I&13)==0&&this.addTriangle_(t,n,e,r,u,s),(I&7)==0&&this.addTriangle_(t,n,i,r,u,l))}calculateSourceExtent(){const e=Qo();return this.triangles_.forEach(function(t,i,n){const s=t.source;q0(e,s[0]),q0(e,s[1]),q0(e,s[2])}),e}getTriangles(){return this.triangles_}}const zF=.5;class p_e extends jP{constructor(e,t,i,n,s,r,l){let u=e.getExtent();u&&e.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);let d=t.getExtent();d&&t.canWrapX()&&(d=d.slice(),d[0]=-1/0,d[2]=1/0);const h=d?Ac(i,d):i,g=Ru(h),y=J1(e,t,g,n),x=zF,C=new ZF(e,t,h,u,y*x,n),I=C.calculateSourceExtent(),A=lf(I)?null:r(I,y,s),E=A?Ia.IDLE:Ia.EMPTY,L=A?A.getPixelRatio():1;super(i,n,L,E),this.targetProj_=t,this.maxSourceExtent_=u,this.triangulation_=C,this.targetResolution_=n,this.targetExtent_=i,this.sourceImage_=A,this.sourcePixelRatio_=L,this.interpolate_=l,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Ia.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Ia.LOADED){const t=Oi(this.targetExtent_)/this.targetResolution_,i=Fr(this.targetExtent_)/this.targetResolution_;this.canvas_=VF(t,i,this.sourcePixelRatio_,Z3(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Ia.IDLE){this.state=Ia.LOADING,this.changed();const e=this.sourceImage_.getState();e==Ia.LOADED||e==Ia.ERROR?this.reproject_():(this.sourceListenerKey_=xa(this.sourceImage_,Ka.CHANGE,t=>{const i=this.sourceImage_.getState();(i==Ia.LOADED||i==Ia.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){mn(this.sourceListenerKey_),this.sourceListenerKey_=null}}const t_=4,G4={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class y_e extends oo{constructor(e,t){super(e),this.image=t}}class b_e extends YT{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=NC(t,e,0);e=t[i]}return e}getImage(e,t,i,n){const s=this.getProjection();if(!s||!n||Od(s,n))return s&&(n=s),this.getImageInternal(e,t,i,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Od(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&zm(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new p_e(s,n,e,t,i,(r,l,u)=>this.getImageInternal(r,l,u,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,n){if(this.loader){const s=UF(e,t,i,1),r=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&yc(this.wantedExtent_,s)||yc(this.image.getExtent(),s))&&(this.wantedResolution_&&Z3(this.wantedResolution_)===r||Z3(this.image.getResolution())===r)))return this.image;this.wantedProjection_=n,this.wantedExtent_=s,this.wantedResolution_=r,this.image=new jP(s,r,i,this.loader),this.image.addEventListener(Ka.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case Ia.LOADING:this.loading=!0,i=G4.IMAGELOADSTART;break;case Ia.LOADED:this.loading=!1,i=G4.IMAGELOADEND;break;case Ia.ERROR:this.loading=!1,i=G4.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new y_e(i,t))}}function v_e(a,e){a.getImage().src=e}function UF(a,e,t,i){const n=e/t,s=Ru(a),r=Yh(Oi(a)/n,t_),l=Yh(Fr(a)/n,t_),u=Yh((i-1)*r/2,t_),d=r+2*u,h=Yh((i-1)*l/2,t_),g=l+2*h;return S1(s,n,0,[d,g])}function jw(a,e,t,i){return i!==void 0?(i[0]=a,i[1]=e,i[2]=t,i):[a,e,t]}function x_e(a,e,t){return a+"/"+e+"/"+t}function Ix(a,e,t,i,n){return`${ei(a)},${e},${x_e(t,i,n)}`}function HF(a){return w_e(a[0],a[1],a[2])}function w_e(a,e,t){return(e<<a)+t}function C_e(a,e){const t=a[0],i=a[1],n=a[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,n):!0}function Q1(a,e){const t=[];Object.keys(e).forEach(function(n){e[n]!==null&&e[n]!==void 0&&t.push(n+"="+encodeURIComponent(e[n]))});const i=t.join("&");return a=a.replace(/[?&]$/,""),a+=a.includes("?")?"&":"?",a+i}const I_e=/\{z\}/g,S_e=/\{x\}/g,A_e=/\{y\}/g,T_e=/\{-y\}/g;function E_e(a,e,t,i,n){return a.replace(I_e,e.toString()).replace(S_e,t.toString()).replace(A_e,i.toString()).replace(T_e,function(){if(n===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(n-i).toString()})}function XF(a){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(a);if(t){const i=t[1].charCodeAt(0),n=t[2].charCodeAt(0);let s;for(s=i;s<=n;++s)e.push(a.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(a),t){const i=parseInt(t[2],10);for(let n=parseInt(t[1],10);n<=i;n++)e.push(a.replace(t[0],n.toString()));return e}return e.push(a),e}const $w="1.3.0",_k=[101,101];function qF(a,e,t,i,n){n.WIDTH=t[0],n.HEIGHT=t[1];const s=i.getAxisOrientation(),r=G5(n.VERSION,"1.3")>=0;n[r?"CRS":"SRS"]=i.getCode();const l=r&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return n.BBOX=l.join(","),Q1(a,n)}function YF(a,e,t,i,n,s,r){s=Object.assign({REQUEST:"GetMap"},s);const l=e/t,u=[wL(Oi(a)/l,t_),wL(Fr(a)/l,t_)];if(t!=1)switch(r){case"geoserver":const h=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+h:s.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return qF(n,a,u,i,s)}function Jw(a,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:$w,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},a)}function M_e(a){const e=a.hidpi===void 0?!0:a.hidpi,t=Wi(a.projection||"EPSG:3857"),i=a.ratio||1.5,n=a.load||JP,s=a.crossOrigin??null;return(r,l,u)=>{r=UF(r,l,u,i),u!=1&&(!e||a.serverType===void 0)&&(u=1);const d=YF(r,l,u,t,a.url,Jw(a.params,"GetMap"),a.serverType),h=new Image;return h.crossOrigin=s,n(h,d).then(g=>({image:g,extent:r,pixelRatio:u}))}}function L_e(a,e,t){if(a.url===void 0)return;const i=Wi(a.projection||"EPSG:3857"),n=S1(e,t,0,_k),s={QUERY_LAYERS:a.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,Jw(a.params,"GetFeatureInfo"),a.params);const r=Og((e[0]-n[0])/t,t_),l=Og((n[3]-e[1])/t,t_),u=G5(s.VERSION,"1.3")>=0;return s[u?"I":"X"]=r,s[u?"J":"Y"]=l,qF(a.url,n,_k,i,s)}function R_e(a,e){if(a.url===void 0)return;const t={SERVICE:"WMS",VERSION:$w,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e!==void 0){const i=Wi(a.projection||"EPSG:3857").getMetersPerUnit()||1,n=28e-5;t.SCALE=e*i/n}if(Object.assign(t,a.params),a.params!==void 0&&t.LAYER===void 0){const i=t.LAYERS;if(!(!Array.isArray(i)||i.length!==1))return;t.LAYER=i}return Q1(a.url,t)}class Qw extends b_e{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:v_e,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,i,n){const s=Wi(i),r=this.getProjection();r&&r!==s&&(t=J1(r,s,e,t),e=fr(e,s,r));const l={url:this.url_,params:{...this.params_,...n},projection:r||s};return L_e(l,e,t)}getLegendUrl(e,t){return R_e({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,i,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=M_e({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,r)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,r),JP(s))})),super.getImageInternal(e,t,i,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}function KF(){return db([5.31,49.38,6.64,50.21],Wu,Fm)}function jF(a){return!!a?.metadata?.hasRetina&&AO()}function k_e(a,e="https"){const t=a.imageType.split("/")[1],i=Oa.getValue(qp,UT)?"app.geoportail.lu":"geoportail.lu";return`${e==="https"?"//wmts{3-4}.":"//wmts{1-2}."}${i}/mapproxy_4_v3/wmts/{Layer}${jF(a)?"_hd":""}/{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}.${t}`}class P_e{createOlLayer(e){const{name:t,layers:i,imageType:n,url:s,id:r}=e,l=new Qw({url:s||U1.wmsProxyUrl,hidpi:AO(),serverType:"mapserver",params:{FORMAT:n,LAYERS:i},crossOrigin:"anonymous"});return new a1({properties:{"olcs.extent":KF(),label:t,id:r},source:l})}setLayerTime(e,t){const i=e.getParams();i.TIME=t,e.updateParams(i)}}const $F=new P_e;function z3(a){return a instanceof Image||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageBitmap?a:null}const G_e=new Error("disposed"),W_e=[256,256];class mk extends JT{constructor(e){const t=Na.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=z3(this.data_);return e?[e.width,e.height]:W_e}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Na.IDLE&&this.state!==Na.ERROR)return;this.state=Na.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Na.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Na.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(G_e),this.controller_=null),super.disposeInternal()}}class JF extends JT{constructor(e,t,i,n,s,r,l,u,d,h,g,y){super(s,Na.IDLE,y),this.renderEdges_=g!==void 0?g:!1,this.pixelRatio_=l,this.gutter_=u,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=n,this.wrappedTileCoord_=r||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const x=n.getTileCoordExtent(this.wrappedTileCoord_),C=this.targetTileGrid_.getExtent();let I=this.sourceTileGrid_.getExtent();const A=C?Ac(x,C):x;if(MA(A)===0){this.state=Na.EMPTY;return}const E=e.getExtent();E&&(I?I=Ac(I,E):I=E);const L=n.getResolution(this.wrappedTileCoord_[0]),G=f_e(e,i,A,L);if(!isFinite(G)||G<=0){this.state=Na.EMPTY;return}const F=h!==void 0?h:zF;if(this.triangulation_=new ZF(e,i,A,I,G*F,L),this.triangulation_.getTriangles().length===0){this.state=Na.EMPTY;return}this.sourceZ_=t.getZForResolution(G);let B=this.triangulation_.calculateSourceExtent();if(I&&(e.canWrapX()?(B[1]=Dn(B[1],I[1],I[3]),B[3]=Dn(B[3],I[1],I[3])):B=Ac(B,I)),!MA(B))this.state=Na.EMPTY;else{let Z=0,Y=0;e.canWrapX()&&(Z=Oi(E),Y=Math.floor((B[0]-E[0])/Z)),iP(B.slice(),e,!0).forEach(te=>{const ce=t.getTileRangeForExtentAndZ(te,this.sourceZ_);for(let me=ce.minX;me<=ce.maxX;me++)for(let X=ce.minY;X<=ce.maxY;X++){const de=d(this.sourceZ_,me,X,l);if(de){const N=Y*Z;this.sourceTiles_.push({tile:de,offset:N})}}++Y}),this.sourceTiles_.length===0&&(this.state=Na.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const i=t.tile;if(i&&i.getState()==Na.LOADED){const n=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);n[0]+=t.offset,n[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:n,clipExtent:s,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Na.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),n=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],r=this.targetTileGrid_.getResolution(t),l=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=VF(n,s,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),r,u,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Na.LOADED}this.changed()}load(){if(this.state==Na.IDLE){this.state=Na.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==Na.IDLE||i==Na.LOADING){e++;const n=xa(t,Ka.CHANGE,s=>{const r=t.getState();(r==Na.LOADED||r==Na.ERROR||r==Na.EMPTY)&&(mn(n),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,n){t.getState()==Na.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(mn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(ZC(this.canvas_.getContext("2d")),hp.push(this.canvas_),this.canvas_=null),super.release()}}class fk{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof FC&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return _n(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return _n(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){_n(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function W4(a,e,t){if(!(t in a))return a[t]=new Set([e]),!0;const i=a[t],n=i.has(e);return n||i.add(e),!n}function O_e(a,e,t){const i=a[t];return i?i.delete(e):!1}function gk(a,e){const t=a.layerStatesArray[a.layerIndex];t.extent&&(e=Ac(e,Zl(t.extent,a.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const n=i.getTileGridForProjection(a.viewState.projection).getExtent();n&&(e=Ac(e,n))}return e}class QF extends qT{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Qo(),this.tempTileRange_=new QT(0,0,0,0),this.tempTileCoord_=jw(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new fk(i),this.sourceTileCache_=null,this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new fk(512)),this.sourceTileCache_}getOrCreateTile(e,t,i,n){const s=this.tileCache_,l=this.getLayer().getSource(),u=Ix(l,l.getKey(),e,t,i);let d;if(s.containsKey(u))d=s.get(u);else{const h=n.viewState.projection,g=l.getProjection();if(d=l.getTile(e,t,i,n.pixelRatio,h,!g||Od(g,h)?void 0:this.getSourceTileCache()),!d)return null;s.set(u,d)}return d}getTile(e,t,i,n){const s=this.getOrCreateTile(e,t,i,n);return s||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),n=Gr(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!kc(s,n))return null;const r=t.viewState,l=i.getRenderSource(),u=l.getTileGridForProjection(r.projection),d=l.getTilePixelRatio(t.pixelRatio);for(let h=u.getZForResolution(r.resolution);h>=u.getMinZoom();--h){const g=u.getTileCoordForCoordAndZ(n,h),y=this.getTile(h,g[1],g[2],t);if(!y||y.getState()!==Na.LOADED)continue;const x=u.getOrigin(h),C=ao(u.getTileSize(h)),I=u.getResolution(h);let A;if(y instanceof KO||y instanceof JF)A=y.getImage();else if(y instanceof mk){if(A=z3(y.getData()),!A)continue}else continue;const E=Math.floor(d*((n[0]-x[0])/I-g[1]*C[0])),L=Math.floor(d*((x[1]-n[1])/I-g[2]*C[1])),G=Math.round(d*l.getGutterForProjection(r.projection));return this.getImageData(A,E+G,L+G)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=i,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,i,n,s){const r=e.viewState,l=this.getLayer(),u=l.getRenderSource(),d=u.getTileGridForProjection(r.projection),h=ei(u);h in e.wantedTiles||(e.wantedTiles[h]={});const g=e.wantedTiles[h],y=l.getMapInternal(),x=Math.max(i-s,d.getMinZoom(),d.getZForResolution(Math.min(l.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(l.getMinZoom(),0)):d.getResolution(0)),u.zDirection)),C=r.rotation,I=C?tP(r.center,r.resolution,C,e.size):void 0;for(let A=i;A>=x;--A){const E=d.getTileRangeForExtentAndZ(t,A,this.tempTileRange_),L=d.getResolution(A);for(let G=E.minX;G<=E.maxX;++G)for(let F=E.minY;F<=E.maxY;++F){if(C&&!d.tileCoordIntersectsViewport([A,G,F],I))continue;const B=this.getTile(A,G,F,e);if(!B||!W4(n,B,A))continue;const Y=B.getKey();if(g[Y]=!0,B.getState()===Na.IDLE&&!e.tileQueue.isKeyQueued(Y)){const $=jw(A,G,F,this.tempTileCoord_);e.tileQueue.enqueue([B,h,d.getTileCoordCenter($),L])}}}}findStaleTile_(e,t){const i=this.tileCache_,n=e[0],s=e[1],r=e[2],l=this.getStaleKeys();for(let u=0;u<l.length;++u){const d=Ix(this.getLayer().getSource(),l[u],n,s,r);if(i.containsKey(d)){const h=i.peek(d);if(h.getState()===Na.LOADED)return h.endTransition(ei(this)),W4(t,h,n),!0}}return!1}findAltTiles_(e,t,i,n){const s=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!s)return!1;let r=!0;const l=this.tileCache_,u=this.getLayer().getRenderSource(),d=u.getKey();for(let h=s.minX;h<=s.maxX;++h)for(let g=s.minY;g<=s.maxY;++g){const y=Ix(u,d,i,h,g);let x=!1;if(l.containsKey(y)){const C=l.peek(y);C.getState()===Na.LOADED&&(W4(n,C,i),x=!0)}x||(r=!1)}return r}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],n=e.viewState,s=n.projection,r=n.resolution,l=n.center,u=e.pixelRatio,d=this.getLayer(),h=d.getSource(),g=h.getTileGridForProjection(s),y=g.getZForResolution(r,h.zDirection),x=g.getResolution(y),C=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==C&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=C):this.renderedSourceKey_=C;let I=e.extent;const A=h.getTilePixelRatio(u);this.prepareContainer(e,t);const E=this.context.canvas.width,L=this.context.canvas.height,G=i.extent&&Zl(i.extent);G&&(I=Ac(I,Zl(i.extent)));const F=x*E/2/A,B=x*L/2/A,Z=[l[0]-F,l[1]-B,l[0]+F,l[1]+B],Y={};this.renderedTiles.length=0;const $=d.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const ke=g.getZForResolution(n.nextResolution,h.zDirection),Ie=gk(e,e.nextExtent);this.enqueueTiles(e,Ie,ke,Y,$)}const te=gk(e,I);if(this.enqueueTiles(e,te,y,Y,0),$>0&&setTimeout(()=>{this.enqueueTiles(e,te,y-1,Y,$-1)},0),!(y in Y))return this.container;const ce=ei(this),me=e.time;for(const ke of Y[y]){const Ie=ke.getState();if(Ie===Na.EMPTY)continue;const re=ke.tileCoord;if(Ie===Na.LOADED&&ke.getAlpha(ce,me)===1){ke.endTransition(ce);continue}if(Ie!==Na.ERROR&&(this.renderComplete=!1),this.findStaleTile_(re,Y)){O_e(Y,ke,y),e.animate=!0;continue}if(this.findAltTiles_(g,re,y+1,Y))continue;const je=g.getMinZoom();for(let Qe=y-1;Qe>=je&&!this.findAltTiles_(g,re,Qe,Y);--Qe);}const X=x/r*u/A,de=this.getRenderContext(e);ku(this.tempTransform,E/2,L/2,X,X,0,-E/2,-L/2),i.extent&&this.clipUnrotated(de,e,G),h.getInterpolate()||(de.imageSmoothingEnabled=!1),this.preRender(de,e);const N=Object.keys(Y).map(Number);N.sort(Tc);let ne;const le=[],_e=[];for(let ke=N.length-1;ke>=0;--ke){const Ie=N[ke],re=h.getTilePixelSize(Ie,u,s),J=g.getResolution(Ie)/x,je=re[0]*J*X,Qe=re[1]*J*X,Je=g.getTileCoordForCoordAndZ(th(Z),Ie),kt=g.getTileCoordExtent(Je),Pt=Gr(this.tempTransform,[A*(kt[0]-Z[0])/x,A*(Z[3]-kt[3])/x]),zt=A*h.getGutterForProjection(s);for(const Nt of Y[Ie]){if(Nt.getState()!==Na.LOADED)continue;const ga=Nt.tileCoord,ta=Je[1]-ga[1],Fe=Math.round(Pt[0]-(ta-1)*je),De=Je[2]-ga[2],z=Math.round(Pt[1]-(De-1)*Qe),Ze=Math.round(Pt[0]-ta*je),Re=Math.round(Pt[1]-De*Qe),fe=Fe-Ze,ie=z-Re,Ce=N.length===1;let Ee=!1;ne=[Ze,Re,Ze+fe,Re,Ze+fe,Re+ie,Ze,Re+ie];for(let Ne=0,Ve=le.length;Ne<Ve;++Ne)if(!Ce&&Ie<_e[Ne]){const $e=le[Ne];Or([Ze,Re,Ze+fe,Re+ie],[$e[0],$e[3],$e[4],$e[7]])&&(Ee||(de.save(),Ee=!0),de.beginPath(),de.moveTo(ne[0],ne[1]),de.lineTo(ne[2],ne[3]),de.lineTo(ne[4],ne[5]),de.lineTo(ne[6],ne[7]),de.moveTo($e[6],$e[7]),de.lineTo($e[4],$e[5]),de.lineTo($e[2],$e[3]),de.lineTo($e[0],$e[1]),de.clip())}le.push(ne),_e.push(Ie),this.drawTile(Nt,e,Ze,Re,fe,ie,zt,Ce),Ee&&de.restore(),this.renderedTiles.unshift(Nt),this.updateUsedTiles(e.usedTiles,h,Nt)}}if(this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!zm(this.renderedExtent_,Z),this.renderedExtent_=Z,this.renderedPixelRatio=u,this.postRender(this.context,e),i.extent&&de.restore(),de.imageSmoothingEnabled=!0,this.renderComplete){const ke=(Ie,re)=>{const Q=ei(h),J=re.wantedTiles[Q],je=J?Object.keys(J).length:0;this.updateCacheSize(je),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(ke)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,n,s,r,l,u){let d;if(e instanceof mk){if(d=z3(e.getData()),!d)throw new Error("Rendering array data is not yet supported")}else d=this.getTileImage(e);if(!d)return;const h=this.getRenderContext(t),g=ei(this),y=t.layerStatesArray[t.layerIndex],x=y.opacity*(u?e.getAlpha(g,t.time):1),C=x!==h.globalAlpha;C&&(h.save(),h.globalAlpha=x),h.drawImage(d,l,l,d.width-2*l,d.height-2*l,i,n,s,r),C&&h.restore(),x!==y.opacity?t.animate=!0:u&&e.endTransition(g)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const n=ei(t);n in e||(e[n]={}),e[n][i.getKey()]=!0}}const a_={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class F_e extends cf{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(a_.PRELOAD)}setPreload(e){this.set(a_.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(a_.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(a_.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Xg extends F_e{constructor(e){super(e)}createRenderer(){return new QF(this,{cacheSize:this.getCacheSize()})}}const wg=[0,0,0],Wh=5;class uI{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,_n(FH(this.resolutions_,(n,s)=>s-n),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let n=0,s=this.resolutions_.length-1;n<s;++n)if(!t)t=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,_n(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=th(i)),_n(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,_n(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:nT,_n(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((n,s)=>{const r=new QT(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(i){const l=this.getTileRangeForExtentAndZ(i,s);r.minX=Math.max(l.minX,r.minX),r.maxX=Math.min(l.maxX,r.maxX),r.minY=Math.max(l.minY,r.minY),r.maxY=Math.min(l.maxY,r.maxY)}return r}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const n=this.getTileRangeForExtentAndZ(e,t);for(let s=n.minX,r=n.maxX;s<=r;++s)for(let l=n.minY,u=n.maxY;l<=u;++l)i([t,s,l])}forEachTileCoordParentTileRange(e,t,i,n){let s,r,l,u=null,d=e[0]-1;for(this.zoomFactor_===2?(r=e[1],l=e[2]):u=this.getTileCoordExtent(e,n);d>=this.minZoom;){if(r!==void 0&&l!==void 0?(r=Math.floor(r/2),l=Math.floor(l/2),s=xg(r,r,l,l,i)):s=this.getTileRangeForExtentAndZ(u,d,i),t(d,s))return!0;--d}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,r=e[2]*2;return xg(s,s+1,r,r+1,t)}const n=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const n=e[0],s=e[1],r=e[2];if(t===n)return xg(s,r,s,r,i);if(this.zoomFactor_){const u=Math.pow(this.zoomFactor_,t-n),d=Math.floor(s*u),h=Math.floor(r*u);if(t<n)return xg(d,d,h,h,i);const g=Math.floor(u*(s+1))-1,y=Math.floor(u*(r+1))-1;return xg(d,g,h,y,i)}const l=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,wg);const n=wg[1],s=wg[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,wg);const r=wg[1],l=wg[2];return xg(n,r,s,l,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),n=ao(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*n[0]*i,t[1]-(e[2]+.5)*n[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=ao(this.getTileSize(e[0]),this.tmpSize_),r=i[0]+e[1]*s[0]*n,l=i[1]-(e[2]+1)*s[1]*n,u=r+s[0]*n,d=l+s[1]*n;return Pc(r,l,u,d,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,n,s){const r=this.getZForResolution(i),l=i/this.getResolution(r),u=this.getOrigin(r),d=ao(this.getTileSize(r),this.tmpSize_);let h=l*(e-u[0])/i/d[0],g=l*(u[1]-t)/i/d[1];return n?(h=Yh(h,Wh)-1,g=Yh(g,Wh)-1):(h=Og(h,Wh),g=Og(g,Wh)),jw(r,h,g,s)}getTileCoordForXYAndZ_(e,t,i,n,s){const r=this.getOrigin(i),l=this.getResolution(i),u=ao(this.getTileSize(i),this.tmpSize_);let d=(e-r[0])/l/u[0],h=(r[1]-t)/l/u[1];return n?(d=Yh(d,Wh)-1,h=Yh(h,Wh)-1):(d=Og(d,Wh),h=Og(h,Wh)),jw(i,d,h,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=NC(this.resolutions_,e,t||0);return Dn(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return MP(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let n=this.minZoom;n<t;++n)i[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=i}}class fE extends uI{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function N_e(a,e){return(function(t,i,n){if(!t)return;let s;const r=t[0];if(e){const l=e.getFullTileRange(r);l&&(s=l.getHeight()-1)}return E_e(a,r,t[1],t[2],s)})}function B_e(a,e){const t=a.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=N_e(a[n],e);return U3(i)}function U3(a){return a.length===1?a[0]:(function(e,t,i){if(!e)return;const n=HF(e),s=Gd(n,a.length);return a[s](e,t,i)})}function eN(a){let e=a.getDefaultTileGrid();return e||(e=z_e(a),a.setDefaultTileGrid(e)),e}function D_e(a,e,t){const i=e[0],n=a.getTileCoordCenter(e),s=gE(t);if(!kc(s,n)){const r=Oi(s),l=Math.ceil((s[0]-n[0])/r);return n[0]+=r*l,a.getTileCoordForCoordAndZ(n,i)}return e}function V_e(a,e,t,i){i=i!==void 0?i:"top-left";const n=tN(a,e,t);return new uI({extent:a,origin:KU(a,i),resolutions:n,tileSize:t})}function Z_e(a){const e=a||{},t=e.extent||Wi("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:tN(t,e.maxZoom,e.tileSize,e.maxResolution)};return new uI(i)}function tN(a,e,t,i){e=e!==void 0?e:xX,t=ao(t!==void 0?t:nT);const n=Fr(a),s=Oi(a);i=i>0?i:Math.max(s/t[0],n/t[1]);const r=e+1,l=new Array(r);for(let u=0;u<r;++u)l[u]=i/Math.pow(2,u);return l}function z_e(a,e,t,i){const n=gE(a);return V_e(n,e,t,i)}function gE(a){a=Wi(a);let e=a.getExtent();if(!e){const t=180*Um.degrees/a.getMetersPerUnit();e=Pc(-t,-t,t,t)}return e}class U_e extends YT{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&ao(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||ei(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,n,s,r){return Da()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:eN(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const n=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),r=ao(n.getTileSize(e),this.tmpSize);return s==1?r:mq(r,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),n=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=D_e(n,e,i)),C_e(e,n)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class H_e extends oo{constructor(e,t){super(e),this.tile=t}}const O4={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class pE extends U_e{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===pE.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=ei(t),n=t.getState();let s;n==Na.LOADING?(this.tileLoadingKeys_[i]=!0,s=O4.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=n==Na.ERROR?O4.TILELOADERROR:n==Na.LOADED?O4.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new H_e(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=XF(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(B_e(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class yE extends pE{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:aN,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:KO,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Od(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Od(t,e)))return this.tileGrid;const i=ei(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=eN(e)),this.tileGridForProjection[i]}createTile_(e,t,i,n,s,r){const l=[e,t,i],u=this.getTileCoordForTileUrlFunction(l,s),d=u?this.tileUrlFunction(u,n,s):void 0,h=new this.tileClass(l,d!==void 0?Na.IDLE:Na.EMPTY,d!==void 0?d:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=r,h.addEventListener(Ka.CHANGE,this.handleTileChange.bind(this)),h}getTile(e,t,i,n,s,r){const l=this.getProjection();if(!l||!s||Od(l,s))return this.getTileInternal(e,t,i,n,l||s);const u=[e,t,i],d=this.getKey(),h=this.getTileGridForProjection(l),g=this.getTileGridForProjection(s),y=this.getTileCoordForTileUrlFunction(u,s),x=new JF(l,h,s,g,u,y,this.getTilePixelRatio(n),this.getGutter(),(C,I,A,E)=>this.getTileInternal(C,I,A,E,l,r),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return x.key=d,x}getTileInternal(e,t,i,n,s,r){const l=this.getKey(),u=Ix(this,l,e,t,i);if(r&&r.containsKey(u))return r.get(u);const d=this.createTile_(e,t,i,n,s,l);return r?.set(u,d),d}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Wi(e);if(i){const n=ei(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=t)}}}function aN(a,e){if(wl){const t=a.getCrossOrigin();let i="same-origin",n="same-origin";t==="anonymous"||t===""?(i="cors",n="omit"):t==="use-credentials"&&(i="cors",n="include"),fetch(e,{mode:i,credentials:n}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const r=a.getImage();r.width=s.width,r.height=s.height,r.getContext("2d").drawImage(s,0,0),s.close?.(),r.dispatchEvent(new Event("load"))}).catch(()=>{a.getImage().dispatchEvent(new Event("error"))});return}a.getImage().src=e}class eb extends yE{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",i=e.tileGrid;let n=e.urls;n===void 0&&e.url!==void 0&&(n=XF(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:n,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=U3(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(U3(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?Q1(e,i):e.replace(/\{(\w+?)\}/g,function(r,l){return l.toLowerCase()in i?i[l.toLowerCase()]:r});const n=this.tileGrid,s=this.dimensions_;return(function(r,l,u){if(!r)return;const d={TileMatrix:n.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};Object.assign(d,s);let h=e;return t=="KVP"?h=Q1(h,d):h=h.replace(/\{(\w+?)\}/g,function(g,y){return encodeURIComponent(d[y])}),h})}}const X_e=[156543.033928,78271.516964,39135.758482,19567.879241,9783.9396205,4891.96981025,2445.98490513,1222.99245256,611.496226281,305.748113141,152.87405657,76.4370282852,38.2185141426,19.1092570713,9.55462853565,4.77731426782,2.38865713391,1.19432856696,.597164283478,.298582141739,.1492910708695,.07464553543475],q_e=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21"];class Y_e{createOlLayer(e){const{name:t,imageType:i,id:n}=e,s=jF(e),r=Wi(Fm),l=r.getExtent(),u=new eb({url:k_e(e),tilePixelRatio:s?2:1,layer:t,matrixSet:`GLOBAL_WEBMERCATOR_4_V3${s?"_HD":""}`,format:i,requestEncoding:"REST",projection:r,tileGrid:new fE({origin:th(l),extent:l,resolutions:X_e,matrixIds:q_e}),style:"default",crossOrigin:"anonymous"});return new Xg({source:u,properties:{"olcs.extent":KF(),label:t,id:n}})}setLayerTime(e,t,i){const n=e.get(Kw).time_layers[i],s=t.getUrls();if(s){const r=this.transformUrls(s,n);t.setUrls(r),e.set(V3,n),e.set(DF,n)}}transformUrls(e,t){return e.map(i=>i.replace(/[/][^/]*[/]{TileMatrixSet}/,`/${t}/{TileMatrixSet}`))}}const iN=new Y_e;class K_e{createOlLayer(e,t){const i=qa(),{id:n,metadata:s,name:r}=e,l=t.get(n);if(!l)return;const u={container:i.getOlMap().getTarget(),...l},d=new gT({maplibreOptions:u,label:r,id:n,queryable_id:n,metadata:s}),h=Tu(),g=T_();return d.getMapLibreMap().loaded()?h.setBaseStyle(n,d.getMapLibreMap().getStyle()):new Promise(y=>d.getMapLibreMap().once("data",y)).then(()=>h.setBaseStyle(n,d.getMapLibreMap().getStyle())),d.set(d_e,g.getDefaultMapBoxStyleUrl(g.getVectorId(e))),d}}const j_e=new K_e;class H3 extends yE{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Qo(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,i,n){const s=Wi(i),r=this.getProjection()||s;let l=this.getTileGrid();l||(l=this.getTileGridForProjection(r));const u=fr(e,s,r),d=J1(r,s,e,t),h=l.getZForResolution(d,this.zDirection),g=l.getResolution(h),y=l.getTileCoordForCoordAndZ(u,h);if(l.getResolutions().length<=y[0])return;let x=l.getTileCoordExtent(y,this.tmpExtent_);const C=this.gutter_;C!==0&&(x=qd(x,g*C,x));const I={QUERY_LAYERS:this.params_.LAYERS};Object.assign(I,Jw(this.params_,"GetFeatureInfo"),n);const A=Math.floor((u[0]-x[0])/g),E=Math.floor((x[3]-u[1])/g);return I[this.v13_?"I":"X"]=A,I[this.v13_?"J":"Y"]=E,this.getRequestUrl_(y,x,1,r||s,I)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const i={SERVICE:"WMS",VERSION:$w,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const n=this.params_.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;i.LAYER=n}if(e!==void 0){const n=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;i.SCALE=e*n/s}return Object.assign(i,t),Q1(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,i,n,s){const r=this.urls;if(!r)return;let l;if(r.length==1)l=r[0];else{const u=Gd(HF(e),r.length);l=r[u]}return YF(t,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(e[0]),i,n,l,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const i in this.params_)t[e++]=i+"-"+this.params_[i];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||$w;this.v13_=G5(e,"1.3")>=0}tileUrlFunction(e,t,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=n.getResolution(e[0]);let r=n.getTileCoordExtent(e,this.tmpExtent_);const l=this.gutter_;l!==0&&(r=qd(r,s*l,r));const u=Object.assign({},Jw(this.params_,"GetMap"));return this.getRequestUrl_(e,r,t,i,u)}}function $_e(){const{initLayer:a}=no(),{addLayers:e,setBgLayer:t}=Vi(),{findBgLayerByName:i}=Al();function n(r){if(r.layerType===Pm.LAYER_OFFLINE_BG_VECTOR)return i(r.key);{const l=JSON.parse(r.layerSerialization),{id:u,label:d,opacity:h}=l;let g=r.layerType;return g===Vd.BG_WMTS&&(g=Pm.LAYER_OFFLINE_BG_WMTS),{id:u,name:d,options:l,type:g,metadata:{start_opacity:h}}}}function s(r){if([Pm.LAYER_OFFLINE_TILE,Pm.LAYER_OFFLINE_BG_VECTOR].includes(r.layerType))try{const u=a(n(r));r.backgroundLayer?t(u):e(u)}catch{throw new Error("Invalid offline layer specification.")}}return{createOfflineLayer:s,offlineLayerToLayer:n}}let pk;function kp(){const a=Vi(),e=$_e(),{isOffLine:t}=xt(ri()),{minZoom:i,maxZoom:n}=xt(a),{removeAllLayers:s,setBgLayer:r}=a;function l(C){pk=C,console.warn("Deprecated: useOffline.initLocalforage_v3() is meant to be removed when v4 is fully operational")}function u(){return t.value}function d(C){t.value=C}function h(C){g(),y(C),x(C)}function g(){Qhe(),s(),r(null)}function y(C){const{zooms:I}=C;i.value=I[0],n.value=I[I.length-1]}function x(C){[...C.layers].reverse().forEach(I=>e.createOfflineLayer(I))}return{localforage_v3:pk,isOffLine:t,initLocalforage_v3:l,getIsOffline:u,setIsOffline:d,doRestore:h}}class nN{createOlLayer(e){const t=this.deserializeTileLayer(e.options);return new Xg(t)}createTileLoadFunction(){const e=kp().localforage_v3;return(i,n)=>{const s=Mre(n);e.getItem(s).then(r=>{i.getImage().src=r||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}).catch(()=>i.setState(3))}}}class J_e extends nN{deserializeTileLayer(e){const t=JSON.parse(e.source);if(t.tileLoadFunction=this.createTileLoadFunction(),t.gutter=parseInt("96",10),t.tileGrid){const i=new uI(JSON.parse(t.tileGrid));t.tileGrid=i}return e.source=new H3(t),e}serializeTileLayer(){throw new Error("Method not implemented.")}}const Q_e=new J_e;class eme extends nN{deserializeTileLayer(e){const t=JSON.parse(e.source);if(t.tileLoadFunction=this.createTileLoadFunction(),t.tileGrid){const i=new fE(JSON.parse(t.tileGrid));t.tileGrid=i}return e.source=new eb(t),e}serializeTileLayer(){throw new Error("Method not implemented.")}}const tme=new eme;class ame{createOlLayer(e){let t;switch(this.getOfflineLayerSourceType(e)){case Vd.WMTS:t=tme.createOlLayer(e);break;case Vd.TILE_WMS:t=Q_e.createOlLayer(e);break;default:throw new Error(`Unrecognized offline layer type: ${e.type}`)}return t}getOfflineLayerSourceType(e){return e.options.sourceType}}const ime=new ame;function nme(){return new $a({image:rme})}const rme=new Qr({radius:4,fill:new ji({color:"white"}),stroke:new Li({color:"white",width:1})}),sme=1002,ome="featurePositionLayer";class lme extends bs{geoMarker;constructor(e){const t=new lo({features:[],useSpatialIndex:!1});super({...e,source:t})}moveGeoMarker(e,t){this.geoMarker?.getGeometry()||this.createGeoMarker(),this.geoMarker?.getGeometry()?.setCoordinates([e,t])}createGeoMarker(){this.geoMarker=new Di({geometry:new Ln([0,0])}),this.getSource()?.clear(),this.getSource()?.addFeature(this.geoMarker)}removeGeoMarker(){this.getSource()?.clear(),this.geoMarker=void 0}}class ume{createOlLayer(){const e=nme(),t=new lme({declutter:!0,zIndex:sme,style:e,updateWhileAnimating:!0,updateWhileInteracting:!0});return t.set("cyLayerType",ome),t}}const cme=new ume,rN=1e3,sN="interactionDrawLayer";class dme{createOlLayer(){const e=new bs({source:new lo({features:[]}),zIndex:rN,style:(t,i)=>{const n=t.getStyle();return typeof n=="function"?n.call(t,t,i):n}});return e.set("cyLayerType",sN),e}}const yk=new dme;class hme{createOlLayer(e,t){let i;if(t&&(i=j_e.createOlLayer(e,t)),!i)switch(e.type){case"position":return this.createOlLayerFeaturePosition(e);case Vd.WMS:i=$F.createOlLayer(e);break;case Vd.WMTS:case Vd.BG_WMTS:i=iN.createOlLayer(e);break;case Pm.LAYER_OFFLINE_TILE:case Pm.LAYER_OFFLINE_BG_VECTOR:i=ime.createOlLayer(e);break;default:throw new Error(`Unrecognized layer type: ${e.type}`)}return this.setOlProps(e,i),i}createOlLayerInteractionDraw(){return yk.createOlLayer()}createOlLayerInteractionClip(){return yk.createOlLayer()}createOlLayerFeaturePosition(e){const t=cme.createOlLayer();return t.set(D3,e.id),t.set(V3,e.name),t}setOlProps(e,t){t.set(D3,e.id),t.set(V3,e.name),t.set(DF,e.name),t.set(Kw,e.metadata),t.set(l_e,e.id),t.set(u_e,no().getLayerCurrentTime(e)),t.set(c_e,e.time),t.setOpacity(e.opacity)}}const i1=new hme;class _me{setLayerTime(e,t){const i=e.getSource();i instanceof Qw&&$F.setLayerTime(i,t),i instanceof eb&&iN.setLayerTime(e,i,t)}}const mme=new _me,N2=-200;function bE(){function a(C,I){if(!I)return;const A=h(I);C.addLayer(A)}function e(C,I){if(!I)return;const A=i1.createOlLayer(I);return C.addLayer(A),A}function t(C,I){return C.getLayers().getArray().find(A=>A.get("id")===I)}function i(C,I){const A=t(C,I);A&&C.removeLayer(A)}function n(C,I){const A=C.getLayers().getArray();I.forEach((E,L)=>{A.find(F=>F.get("id")===E.id)?.setZIndex(L+1)})}function s(C,I,A){const E=C.getLayers().getArray().find(L=>L.get("id")===I);E&&E.setOpacity(A)}function r(C,I){const A=no(),E=t(C,I.id),L=A.getLayerCurrentTime(I);L&&E&&mme.setLayerTime(E,L)}function l(C){Gg.delete(C)}function u(C){return Gg.has(C.id)}function d(C,I){Gg.set(C,I)}function h(C){const I=C.id,A=Gg.get(I);if(A)return A;{const E=i1.createOlLayer(C);return d(I,E),E}}function g(C){return C&&Gg.get(C.id)||null}function y(C,I){const E=C.getLayers().getArray().find(L=>L.getZIndex()===N2);E&&I(E)}function x(C,I,A){const E=C.getLayers(),L=E.getArray().findIndex(B=>B.getZIndex()===N2),G=E.getArray()[L]?.get("id");let F;I&&(u(I)?F=g(I):(F=i1.createOlLayer(I,A),d(I.id,F))),L>=0?F?(F.setZIndex(N2),E.setAt(L,F)):E.removeAt(L):F&&(F.setZIndex(N2),C.addLayer(F)),G&&G!==I?.id&&BF.restore(!0)}return{addLayer:a,addFeatureLayer:e,findLayer:t,removeLayer:i,removeFromCache:l,reorderLayers:n,setLayerOpacity:s,setLayerTime:r,getLayerFromCache:g,setBgLayer:x,applyOnBgLayer:y}}const oN=Ao("profile-position",()=>{const a=Ye(void 0),e=Ye(void 0);function t(i,n){a.value=i,e.value=n}return{x:a,y:e,setPosition:t}},{}),lN="lux-feat-position";let Cg;function fme(a,e=!0){const t=bE(),i=oN(),n=$n(),{drawStateActive:s,editStateActive:r}=xt(n),{x:l,y:u}=xt(i),d=Ai(a),h=Ai(void 0),g=Ye(!0),y=new Ki([0,0]),x=Ye(!0),C=SO(Z=>B(Z),15);let I,A;fn(()=>{I=qa().getOlMap(),E(),G()}),Nr(()=>F()),Rt(()=>yZ(e),Z=>{x.value=Z??!0,Z||Cg?.removeGeoMarker()}),Rt(d,Z=>{Z&&L(Z)}),Rt([l,u],([Z,Y])=>{x.value&&!s.value&&Z&&Y&&g.value?Cg?.moveGeoMarker(Z,Y):Cg?.removeGeoMarker()});function E(){if(Cg)return;const Z={id:lN,type:"position"};Cg=t.addFeatureLayer(I,Z)}function L(Z){const Y=Z?.map($=>{const te=fr([$.x,$.y],tu,I.getView().getProjection());return new Ln(te).getCoordinates().concat($.dist)});y.setCoordinates(Y)}function G(){A===void 0&&(A=xa(I,"pointermove",C))}function F(){A&&(mn(A),A=void 0,Cg?.removeGeoMarker())}function B(Z){if(Z.dragging||s.value||!x.value)return;let Y,$;const te=I.getEventCoordinate(Z.originalEvent),ce=y.getClosestPoint(te),me=ce[0]-te[0],X=ce[1]-te[1],de=me*me+X*X,N=I.getView().getResolution();de/(N*N)<64?(h.value=ce[2],g.value=r.value!=="editLine",Y=ce[0],$=ce[1]):(h.value=-1,g.value=!0),Y!==void 0&&$!==void 0&&i.setPosition(Y,$)}return{profileData:d,highlightDistance:h}}class cI{encodeOptions;constructor(e){this.encodeOptions={dataProjection:Wu,featureProjection:e.getView().getProjection()}}download(e,t,i="txt",n="text/plain"){const s=`${wR(e)}.${wR(i)}`;TO(s,t,n)}exploseFeatures(e){const t=[];return(Array.isArray(e)?e:[e]).forEach(i=>{switch(i.getGeometry()?.getType()){case"GeometryCollection":{i.getGeometry().getGeometriesArray().forEach(s=>t.push(this.cloneFeatureWithGeom(i,s)));break}case"MultiLineString":{i.getGeometry().getLineStrings().forEach(s=>t.push(this.cloneFeatureWithGeom(i,s)));break}case"Circle":{const n=new Tl(i);t.push(tE(n));break}default:t.push(i);break}}),t}cloneFeatureWithGeom(e,t){const i=e.clone();return i.setGeometry(t),i}}class uN extends KT{constructor(){super(),this.xmlSerializer_=ene()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const i=Cc(e);return this.readFeatureFromDocument(i,t)}return wc(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const i=this.readFeaturesFromDocument(e,t);return i.length>0?i[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const i=Cc(e);return this.readFeaturesFromDocument(i,t)}return wc(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const i=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&hn(i,this.readFeaturesFromNode(n,t));return i}readFeaturesFromNode(e,t){return Da()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const i=Cc(e);return this.readGeometryFromDocument(i,t)}return wc(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=Cc(e);return this.readProjectionFromDocument(t)}return wc(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const i=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const i=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const i=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeGeometryNode(e,t){return null}}const jn=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],gme="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",pme={rte:dN,trk:hN,wpt:_N},yme=Wt(jn,{rte:qo(dN),trk:qo(hN),wpt:qo(_N)}),bme=Wt(jn,{text:ot(_a,"linkText"),type:ot(_a,"linkType")}),vme=Wt(jn,{name:ot(_a),email:Xme,link:kb}),xme=Wt(jn,{name:ot(_a),desc:ot(_a),author:ot(zme),copyright:ot(Ume),link:kb,time:ot(aI),keywords:ot(_a),bounds:Hme,extensions:dI}),wme=Wt(jn,{year:ot(Cl),license:ot(_a)}),Cme=Wt(jn,{rte:Kt(jme),trk:Kt($me),wpt:Kt(Qme)});let cN=class extends uN{constructor(e){super(),e=e||{},this.dataProjection=Wi("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,i=e.length;t<i;++t){const n=e[t];if(this.readExtensions_){const s=n.get("extensionsNode_")||null;this.readExtensions_(n,s)}n.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(Cc(e)):wc(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const i=this.readMetadataFromNode(t);if(i)return i}return null}readMetadataFromNode(e){if(!jn.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(jn.includes(t.namespaceURI)&&t.localName==="metadata")return La({},xme,t,[]);return null}readFeatureFromNode(e,t){if(!jn.includes(e.namespaceURI))return null;const i=pme[e.localName];if(!i)return null;const n=i(e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_([n]),n):null}readFeaturesFromNode(e,t){if(!jn.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const i=La([],yme,e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_(i),i):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const i=jd("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Sw),i.setAttributeNS(Sw,"xsi:schemaLocation",gme),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Gn({node:i},Cme,Zme,e,[t]),i}};const Ime=Wt(jn,{name:ot(_a),cmt:ot(_a),desc:ot(_a),src:ot(_a),link:kb,number:ot(Cl),extensions:dI,type:ot(_a),rtept:qme}),Sme=Wt(jn,{ele:ot(tn),time:ot(aI)}),Ame=Wt(jn,{name:ot(_a),cmt:ot(_a),desc:ot(_a),src:ot(_a),link:kb,number:ot(Cl),type:ot(_a),extensions:dI,trkseg:Kme}),Tme=Wt(jn,{trkpt:Yme}),Eme=Wt(jn,{ele:ot(tn),time:ot(aI)}),Mme=Wt(jn,{ele:ot(tn),time:ot(aI),magvar:ot(tn),geoidheight:ot(tn),name:ot(_a),cmt:ot(_a),desc:ot(_a),src:ot(_a),link:kb,sym:ot(_a),type:ot(_a),fix:ot(_a),sat:ot(Cl),hdop:ot(tn),vdop:ot(tn),pdop:ot(tn),ageofdgpsdata:ot(tn),dgpsid:ot(Cl),extensions:dI}),Lme=["text","type"],Rme=Wt(jn,{text:Kt(nn),type:Kt(nn)}),kme=Wt(jn,["name","cmt","desc","src","link","number","type","rtept"]),Pme=Wt(jn,{name:Kt(nn),cmt:Kt(nn),desc:Kt(nn),src:Kt(nn),link:Kt(wE),number:Kt(Aw),type:Kt(nn),rtept:mO(Kt(CE))}),Gme=Wt(jn,["ele","time"]),Wme=Wt(jn,["name","cmt","desc","src","link","number","type","trkseg"]),Ome=Wt(jn,{name:Kt(nn),cmt:Kt(nn),desc:Kt(nn),src:Kt(nn),link:Kt(wE),number:Kt(Aw),type:Kt(nn),trkseg:mO(Kt(Jme))}),Fme=Du("trkpt"),Nme=Wt(jn,{trkpt:Kt(CE)}),Bme=Wt(jn,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Dme=Wt(jn,{ele:Kt(Vo),time:Kt(sne),magvar:Kt(Vo),geoidheight:Kt(Vo),name:Kt(nn),cmt:Kt(nn),desc:Kt(nn),src:Kt(nn),link:Kt(wE),sym:Kt(nn),type:Kt(nn),fix:Kt(nn),sat:Kt(Aw),hdop:Kt(Vo),vdop:Kt(Vo),pdop:Kt(Vo),ageofdgpsdata:Kt(Vo),dgpsid:Kt(Aw)}),Vme={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Zme(a,e,t){const i=a.getGeometry();if(i){const n=Vme[i.getType()];if(n){const s=e[e.length-1].node;return jd(s.namespaceURI,n)}}}function vE(a,e,t,i){return a.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in i?(a.push(i.ele),delete i.ele,e.hasZ=!0):a.push(0),"time"in i?(a.push(i.time),delete i.time,e.hasM=!0):a.push(0),a}function xE(a,e,t){let i="XY",n=2;if(a.hasZ&&a.hasM?(i="XYZM",n=4):a.hasZ?(i="XYZ",n=3):a.hasM&&(i="XYM",n=3),n!==4){for(let s=0,r=e.length/4;s<r;s++)e[s*n]=e[s*4],e[s*n+1]=e[s*4+1],a.hasZ&&(e[s*n+2]=e[s*4+2]),a.hasM&&(e[s*n+2]=e[s*4+3]);if(e.length=e.length/4*n,t)for(let s=0,r=t.length;s<r;s++)t[s]=t[s]/4*n}return i}function zme(a,e){const t=La({},vme,a,e);if(t)return t}function Ume(a,e){const t=La({},wme,a,e);if(t){const i=a.getAttribute("author");return i!==null&&(t.author=i),t}}function Hme(a,e){const t=e[e.length-1],i=a.getAttribute("minlat"),n=a.getAttribute("minlon"),s=a.getAttribute("maxlat"),r=a.getAttribute("maxlon");n!==null&&i!==null&&r!==null&&s!==null&&(t.bounds=[[parseFloat(n),parseFloat(i)],[parseFloat(r),parseFloat(s)]])}function Xme(a,e){const t=e[e.length-1],i=a.getAttribute("id"),n=a.getAttribute("domain");i!==null&&n!==null&&(t.email=`${i}@${n}`)}function kb(a,e){const t=e[e.length-1],i=a.getAttribute("href");i!==null&&(t.link=i),S_(bme,a,e)}function dI(a,e){const t=e[e.length-1];t.extensionsNode_=a}function qme(a,e){const t=La({},Sme,a,e);if(t){const i=e[e.length-1],n=i.flatCoordinates,s=i.layoutOptions;vE(n,s,a,t)}}function Yme(a,e){const t=La({},Eme,a,e);if(t){const i=e[e.length-1],n=i.flatCoordinates,s=i.layoutOptions;vE(n,s,a,t)}}function Kme(a,e){const t=e[e.length-1];S_(Tme,a,e);const i=t.flatCoordinates;t.ends.push(i.length)}function dN(a,e){const t=e[0],i=La({flatCoordinates:[],layoutOptions:{}},Ime,a,e);if(!i)return;const n=i.flatCoordinates;delete i.flatCoordinates;const s=i.layoutOptions;delete i.layoutOptions;const r=xE(s,n),l=new Ki(n,r);au(l,!1,t);const u=new Di(l);return u.setProperties(i,!0),u}function hN(a,e){const t=e[0],i=La({flatCoordinates:[],ends:[],layoutOptions:{}},Ame,a,e);if(!i)return;const n=i.flatCoordinates;delete i.flatCoordinates;const s=i.ends;delete i.ends;const r=i.layoutOptions;delete i.layoutOptions;const l=xE(r,n,s),u=new Fu(n,l,s);au(u,!1,t);const d=new Di(u);return d.setProperties(i,!0),d}function _N(a,e){const t=e[0],i=La({},Mme,a,e);if(!i)return;const n={},s=vE([],n,a,i),r=xE(n,s),l=new Ln(s,r);au(l,!1,t);const u=new Di(l);return u.setProperties(i,!0),u}function wE(a,e,t){a.setAttribute("href",e);const n=t[t.length-1].properties,s=[n.linkText,n.linkType];Gn({node:a},Rme,ro,s,t,Lme)}function CE(a,e,t){const i=t[t.length-1],s=i.node.namespaceURI,r=i.properties;switch(a.setAttributeNS(null,"lat",String(e[1])),a.setAttributeNS(null,"lon",String(e[0])),i.geometryLayout){case"XYZM":e[3]!==0&&(r.time=e[3]);case"XYZ":e[2]!==0&&(r.ele=e[2]);break;case"XYM":e[2]!==0&&(r.time=e[2]);break}const u=a.nodeName=="rtept"?Gme[s]:Bme[s],d=el(r,u);Gn({node:a,properties:r},Dme,ro,d,t,u)}function jme(a,e,t){const i=t[0],n=e.getProperties(),s={node:a};s.properties=n;const r=e.getGeometry();if(r.getType()=="LineString"){const h=au(r,!0,i);s.geometryLayout=h.getLayout(),n.rtept=h.getCoordinates()}const l=t[t.length-1].node,u=kme[l.namespaceURI],d=el(n,u);Gn(s,Pme,ro,d,t,u)}function $me(a,e,t){const i=t[0],n=e.getProperties(),s={node:a};s.properties=n;const r=e.getGeometry();if(r.getType()=="MultiLineString"){const h=au(r,!0,i);n.trkseg=h.getLineStrings()}const l=t[t.length-1].node,u=Wme[l.namespaceURI],d=el(n,u);Gn(s,Ome,ro,d,t,u)}function Jme(a,e,t){const i={node:a};i.geometryLayout=e.getLayout(),i.properties={},Gn(i,Nme,Fme,e.getCoordinates(),t)}function Qme(a,e,t){const i=t[0],n=t[t.length-1];n.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const r=au(s,!0,i);n.geometryLayout=r.getLayout(),CE(a,r.getCoordinates(),t)}}class efe extends cN{writeFeaturesNode(e,t){const i=super.writeFeaturesNode(e,t);if("metadata"in t&&"name"in t.metadata){const n="http://www.topografix.com/GPX/1/1",s=jd(n,"metadata"),r=jd(n,"name");nn(r,t.metadata.name),s.appendChild(r),i.childNodes.length>0?i.insertBefore(s,i.childNodes[0]):i.appendChild(s)}return i}}class tfe extends cI{export(e,t,i=!1){const n=this.prepareFeatures(e,i),s=this.generateContent(n,t);this.download(t,s,"gpx","application/gpx")}prepareFeatures(e,t=!1){e.forEach(n=>{const s=n.getProperties();"feature_name"in s&&n.set("name",s.feature_name,!0)});let i=this.exploseFeatures(e);return t?i=this.changeLineToMultiline(i):i=this.changeMultilineToLine(i),i=this.changePolygonToLine(i),i}generateContent(e,t){return new efe().writeFeatures(this.orderFeaturesForGpx(e),{...this.encodeOptions,metadata:{name:t}})}changePolygonToLine(e){return e.map(t=>{if(t.getGeometry()?.getType()==="Polygon"){const s=t.getGeometry().getLinearRing(0)?.getCoordinates()||[],r=new Ki(s);return this.cloneFeatureWithGeom(t,r)}return t})}changeMultilineToLine(e){return e.reduce((t,i)=>{const n=i.getGeometry();return n?.getType()==="MultiLineString"?n.getLineStrings().forEach(r=>t.push(this.cloneFeatureWithGeom(i,r))):t.push(i),t},[])}changeLineToMultiline(e){return e.map(t=>{const i=t.getGeometry();return i?.getType()==="LineString"?this.cloneFeatureWithGeom(t,new Fu([i.getCoordinates()])):t})}orderFeaturesForGpx(e){const t=[],i=[],n=[];return e.forEach(s=>{switch(s.getGeometry()?.getType()){case"Point":t.push(s);break;case"LineString":i.push(s);break;default:n.push(s);break}}),[...t,...i,...n]}}const oh=["http://www.google.com/kml/ext/2.2"],ka=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],afe="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",bk={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},ife=Wt(ka,{ExtendedData:MN,Region:LN,MultiGeometry:ot(AN,"geometry"),LineString:ot(IN,"geometry"),LinearRing:ot(SN,"geometry"),Point:ot(TN,"geometry"),Polygon:ot(EN,"geometry"),Style:ot(AE),StyleMap:Bfe,address:ot(_a),description:ot(_a),name:ot(_a),open:ot(f_),phoneNumber:ot(_a),styleUrl:ot(bN),visibility:ot(f_)},Wt(oh,{MultiTrack:ot(Afe,"geometry"),Track:ot(CN,"geometry")})),nfe=Wt(ka,{ExtendedData:MN,Region:LN,Link:$fe,address:ot(_a),description:ot(_a),name:ot(_a),open:ot(f_),phoneNumber:ot(_a),visibility:ot(f_)}),rfe=Wt(ka,{href:ot(yN)}),sfe=Wt(ka,{Altitude:ot(tn),Longitude:ot(tn),Latitude:ot(tn),Tilt:ot(tn),AltitudeMode:ot(_a),Heading:ot(tn),Roll:ot(tn)}),mN=Wt(ka,{LatLonAltBox:Ufe,Lod:Xfe}),ofe=Wt(ka,["Document","Placemark"]),lfe=Wt(ka,{Document:Kt(rge),Placemark:Kt(PN)});let _p,Sx=null,X3,n1,r1,s1,eC,q3=null,IE,Y3=null,K3,Gm=null,vk=null,j3=null;function tC(a){return 32/Math.min(a[0],a[1])}function ufe(){_p=[255,255,255,1],Sx=new ji({color:_p}),X3=[20,2],n1="pixels",r1="pixels",s1=[64,64],eC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",q3=new Gu({anchor:X3,anchorOrigin:"bottom-left",anchorXUnits:n1,anchorYUnits:r1,crossOrigin:"anonymous",rotation:0,scale:tC(s1),size:s1,src:eC}),IE="NO_IMAGE",Y3=new Li({color:_p,width:1}),K3=new Li({color:[51,51,51,1],width:2}),Gm=new rh({font:"bold 16px Helvetica",fill:Sx,stroke:K3,scale:.8}),vk=new $a({fill:Sx,image:q3,text:Gm,stroke:Y3,zIndex:0}),j3=[vk]}let B2;function cfe(a){return a}class fN extends uN{constructor(e){super(),e=e||{},j3||ufe(),this.dataProjection=Wi("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:j3,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:cfe,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const i=Wt(ka,{Document:_R(this.readDocumentOrFolder_,this),Folder:_R(this.readDocumentOrFolder_,this),Placemark:qo(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),n=La([],i,e,t,this);if(n)return n}readPlacemark_(e,t){const i=La({geometry:null},ife,e,t,this);if(!i)return;const n=new Di,s=e.getAttribute("id");s!==null&&n.setId(s);const r=t[0],l=i.geometry;if(l&&au(l,!1,r),n.setGeometry(l),delete i.geometry,this.extractStyles_){const u=i.Style,d=i.styleUrl,h=hfe(u,d,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(h)}return delete i.Style,n.setProperties(i,!0),n}readSharedStyle_(e,t){const i=e.getAttribute("id");if(i!==null){const n=AE.call(this,e,t);if(n){let s,r=e.baseURI;(!r||r=="about:blank")&&(r=window.location.href),r?s=new URL("#"+i,r).href:s="#"+i,this.sharedStyles_[s]=n}}}readSharedStyleMap_(e,t){const i=e.getAttribute("id");if(i===null)return;const n=xN.call(this,e,t);if(!n)return;let s,r=e.baseURI;(!r||r=="about:blank")&&(r=window.location.href),r?s=new URL("#"+i,r).href:s="#"+i,this.sharedStyles_[s]=n}readFeatureFromNode(e,t){if(!ka.includes(e.namespaceURI))return null;const i=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return i||null}readFeaturesFromNode(e,t){if(!ka.includes(e.namespaceURI))return[];let i;const n=e.localName;if(n=="Document"||n=="Folder")return i=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),i||[];if(n=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(n=="kml"){i=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const r=this.readFeaturesFromNode(s,t);r&&hn(i,r)}return i}return[]}readName(e){if(e){if(typeof e=="string"){const t=Cc(e);return this.readNameFromDocument(t)}return wc(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const i=this.readNameFromNode(t);if(i)return i}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(ka.includes(t.namespaceURI)&&t.localName=="name")return _a(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const i=t.localName;if(ka.includes(t.namespaceURI)&&(i=="Document"||i=="Folder"||i=="Placemark"||i=="kml")){const n=this.readNameFromNode(t);if(n)return n}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const i=Cc(e);hn(t,this.readNetworkLinksFromDocument(i))}else wc(e)?hn(t,this.readNetworkLinksFromDocument(e)):hn(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&hn(t,this.readNetworkLinksFromNode(i));return t}readNetworkLinksFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(ka.includes(i.namespaceURI)&&i.localName=="NetworkLink"){const n=La({},nfe,i,[]);t.push(n)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const n=i.localName;ka.includes(i.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&hn(t,this.readNetworkLinksFromNode(i))}return t}readRegion(e){const t=[];if(typeof e=="string"){const i=Cc(e);hn(t,this.readRegionFromDocument(i))}else wc(e)?hn(t,this.readRegionFromDocument(e)):hn(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&hn(t,this.readRegionFromNode(i));return t}readRegionFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(ka.includes(i.namespaceURI)&&i.localName=="Region"){const n=La({},mN,i,[]);t.push(n)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const n=i.localName;ka.includes(i.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&hn(t,this.readRegionFromNode(i))}return t}readCamera(e){const t=[];if(typeof e=="string"){const i=Cc(e);hn(t,this.readCameraFromDocument(i))}else wc(e)?hn(t,this.readCameraFromDocument(e)):hn(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType===Node.ELEMENT_NODE&&hn(t,this.readCameraFromNode(i));return t}readCameraFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(ka.includes(i.namespaceURI)&&i.localName==="Camera"){const n=La({},sfe,i,[]);t.push(n)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const n=i.localName;ka.includes(i.namespaceURI)&&(n==="Document"||n==="Folder"||n==="Placemark"||n==="kml")&&hn(t,this.readCameraFromNode(i))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const i=jd(ka[4],"kml"),n="http://www.w3.org/2000/xmlns/";i.setAttributeNS(n,"xmlns:gx",oh[0]),i.setAttributeNS(n,"xmlns:xsi",Sw),i.setAttributeNS(Sw,"xsi:schemaLocation",afe);const s={node:i},r={};e.length>1?r.Document=e:e.length==1&&(r.Placemark=e[0]);const l=ofe[i.namespaceURI],u=el(r,l);return Gn(s,lfe,ro,u,[t],l,this),i}}function dfe(a,e){const t=[0,0];let i="start";const n=a.getImage();if(n){const l=n.getSize();if(l&&l.length==2){const u=n.getScaleArray(),d=n.getAnchor();t[0]=u[0]*(l[0]-d[0]),t[1]=u[1]*(l[1]/2-d[1]),i="left"}}let s=a.getText();return s?(s=s.clone(),s.setFont(s.getFont()||Gm.getFont()),s.setScale(s.getScale()||Gm.getScale()),s.setFill(s.getFill()||Gm.getFill()),s.setStroke(s.getStroke()||K3)):s=Gm.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(i),new $a({image:n,text:s})}function hfe(a,e,t,i,n){return(function(s,r){let l=n,u="",d=[];if(l){const g=s.getGeometry();if(g)if(g instanceof jl)d=g.getGeometriesArrayRecursive().filter(function(y){const x=y.getType();return x==="Point"||x==="MultiPoint"}),l=d.length>0;else{const y=g.getType();l=y==="Point"||y==="MultiPoint"}}l&&(u=s.get("name"),l=l&&!!u,l&&/&[^&]+;/.test(u)&&(B2||(B2=document.createElement("textarea")),B2.innerHTML=u,u=B2.value));let h=t;if(a?h=a:e&&(h=gN(e,t,i)),l){const g=dfe(h[0],u);if(d.length>0){g.setGeometry(new jl(d));const y=new $a({geometry:h[0].getGeometry(),image:null,fill:h[0].getFill(),stroke:h[0].getStroke(),text:null});return[g,y].concat(h.slice(1))}return g}return h})}function gN(a,e,t){return Array.isArray(a)?a:typeof a=="string"?gN(t[a],e,t):e}function hI(a){const e=Bu(a,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const i=t[1];return[parseInt(i.substr(6,2),16),parseInt(i.substr(4,2),16),parseInt(i.substr(2,2),16),parseInt(i.substr(0,2),16)/255]}}function pN(a){let e=Bu(a,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let n;for(;n=i.exec(e);){const s=parseFloat(n[1]),r=parseFloat(n[2]),l=n[3]?parseFloat(n[3]):0;t.push(s,r,l),e=e.substr(n[0].length)}if(e==="")return t}function yN(a){const e=Bu(a,!1).trim();let t=a.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function bN(a){const e=Bu(a,!1).trim().replace(/^(?!.*#)/,"#");let t=a.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function _fe(a){const e=a.getAttribute("xunits"),t=a.getAttribute("yunits");let i;return e!=="insetPixels"?t!=="insetPixels"?i="bottom-left":i="top-left":t!=="insetPixels"?i="bottom-right":i="top-right",{x:parseFloat(a.getAttribute("x")),xunits:bk[e],y:parseFloat(a.getAttribute("y")),yunits:bk[t],origin:i}}function vN(a){return tn(a)}const mfe=Wt(ka,{Pair:Nfe});function xN(a,e){return La(void 0,mfe,a,e,this)}const ffe=Wt(ka,{Icon:ot(Mfe),color:ot(hI),heading:ot(tn),hotSpot:ot(_fe),scale:ot(vN)});function gfe(a,e){const t=La({},ffe,a,e);if(!t)return;const i=e[e.length-1],n="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(n).length>0;let r;const l=n.href;l?r=l:s&&(r=eC);let u,d,h,g="bottom-left";const y=t.hotSpot;y?(u=[y.x,y.y],d=y.xunits,h=y.yunits,g=y.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(r.includes("pushpin")?(u=X3,d=n1,h=r1):r.includes("arrow-reverse")?(u=[54,42],d=n1,h=r1):r.includes("paddle")&&(u=[32,1],d=n1,h=r1));let x;const C=n.x,I=n.y;C!==void 0&&I!==void 0&&(x=[C,I]);let A;const E=n.w,L=n.h;E!==void 0&&L!==void 0&&(A=[E,L]);let G;const F=t.heading;F!==void 0&&(G=io(F));const B=t.scale,Z=t.color;if(s){r==eC&&(A=s1);const Y=new Gu({anchor:u,anchorOrigin:g,anchorXUnits:d,anchorYUnits:h,crossOrigin:this.crossOrigin_,offset:x,offsetOrigin:"bottom-left",rotation:G,scale:B,size:A,src:this.iconUrlFunction_(r),color:Z}),$=Y.getScaleArray()[0],te=Y.getSize();if(te===null){const ce=Y.getImageState();if(ce===Ia.IDLE||ce===Ia.LOADING){const me=function(){const X=Y.getImageState();if(!(X===Ia.IDLE||X===Ia.LOADING)){const de=Y.getSize();if(de&&de.length==2){const N=tC(de);Y.setScale($*N)}Y.unlistenImageChange(me)}};Y.listenImageChange(me),ce===Ia.IDLE&&Y.load()}}else if(te.length==2){const ce=tC(te);Y.setScale($*ce)}i.imageStyle=Y}else i.imageStyle=IE}const pfe=Wt(ka,{color:ot(hI),scale:ot(vN)});function yfe(a,e){const t=La({},pfe,a,e);if(!t)return;const i=e[e.length-1],n=new rh({fill:new ji({color:"color"in t?t.color:_p}),scale:t.scale});i.textStyle=n}const bfe=Wt(ka,{color:ot(hI),width:ot(tn)});function vfe(a,e){const t=La({},bfe,a,e);if(!t)return;const i=e[e.length-1],n=new Li({color:"color"in t?t.color:_p,width:"width"in t?t.width:1});i.strokeStyle=n}const xfe=Wt(ka,{color:ot(hI),fill:ot(f_),outline:ot(f_)});function wfe(a,e){const t=La({},xfe,a,e);if(!t)return;const i=e[e.length-1],n=new ji({color:"color"in t?t.color:_p});i.fillStyle=n;const s=t.fill;s!==void 0&&(i.fill=s);const r=t.outline;r!==void 0&&(i.outline=r)}const Cfe=Wt(ka,{coordinates:ZT(pN)});function wN(a,e){return La(null,Cfe,a,e)}function Ife(a,e){const i=e[e.length-1].coordinates,n=Bu(a,!1),r=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(r){const l=parseFloat(r[1]),u=parseFloat(r[2]),d=parseFloat(r[3]);i.push([l,u,d])}else i.push([])}const Sfe=Wt(oh,{Track:qo(CN)});function Afe(a,e){const t=La([],Sfe,a,e);if(t)return new Fu(t)}const Tfe=Wt(ka,{when:Jfe},Wt(oh,{coord:Ife}));function CN(a,e){const t=La({coordinates:[],whens:[]},Tfe,a,e);if(!t)return;const i=[],n=t.coordinates,s=t.whens;for(let r=0,l=Math.min(n.length,s.length);r<l;++r)n[r].length==3&&i.push(n[r][0],n[r][1],n[r][2],s[r]);return new Ki(i,"XYZM")}const Efe=Wt(ka,{href:ot(yN)},Wt(oh,{x:ot(tn),y:ot(tn),w:ot(tn),h:ot(tn)}));function Mfe(a,e){const t=La({},Efe,a,e);return t||null}const Lfe=Wt(ka,{coordinates:ZT(pN)});function SE(a,e){return La(null,Lfe,a,e)}const _I=Wt(ka,{extrude:ot(f_),tessellate:ot(f_),altitudeMode:ot(_a)});function IN(a,e){const t=La({},_I,a,e),i=SE(a,e);if(i){const n=new Ki(i,"XYZ");return n.setProperties(t,!0),n}}function SN(a,e){const t=La({},_I,a,e),i=SE(a,e);if(i){const n=new Gs(i,"XYZ",[i.length]);return n.setProperties(t,!0),n}}const Rfe=Wt(ka,{LineString:qo(IN),LinearRing:qo(SN),MultiGeometry:qo(AN),Point:qo(TN),Polygon:qo(EN)});function AN(a,e){const t=La([],Rfe,a,e);if(!t)return null;if(t.length===0)return new jl(t);let i,n=!0;const s=t[0].getType();let r;for(let l=1,u=t.length;l<u;++l)if(r=t[l],r.getType()!=s){n=!1;break}if(n){let l,u;if(s=="Point"){const d=t[0];l=d.getLayout(),u=d.getFlatCoordinates();for(let h=1,g=t.length;h<g;++h)r=t[h],hn(u,r.getFlatCoordinates());i=new $d(u,l),F4(i,t)}else if(s=="LineString")i=new Fu(t),F4(i,t);else if(s=="Polygon")i=new y_(t),F4(i,t);else if(s=="GeometryCollection"||s.startsWith("Multi"))i=new jl(t);else throw new Error("Unknown geometry type found")}else i=new jl(t);return i}function TN(a,e){const t=La({},_I,a,e),i=SE(a,e);if(i){const n=new Ln(i,"XYZ");return n.setProperties(t,!0),n}}const kfe=Wt(ka,{innerBoundaryIs:Yfe,outerBoundaryIs:jfe});function EN(a,e){const t=La({},_I,a,e),i=La([null],kfe,a,e);if(i&&i[0]){const n=i[0],s=[n.length];for(let l=1,u=i.length;l<u;++l)hn(n,i[l]),s.push(n.length);const r=new Gs(n,"XYZ",s);return r.setProperties(t,!0),r}}const Pfe=Wt(ka,{IconStyle:gfe,LabelStyle:yfe,LineStyle:vfe,PolyStyle:wfe});function AE(a,e){const t=La({},Pfe,a,e,this);if(!t)return null;let i="fillStyle"in t?t.fillStyle:Sx;const n=t.fill;n!==void 0&&!n&&(i=null);let s;"imageStyle"in t?t.imageStyle!=IE&&(s=t.imageStyle):s=q3;const r="textStyle"in t?t.textStyle:Gm,l="strokeStyle"in t?t.strokeStyle:Y3,u=t.outline;return u!==void 0&&!u?[new $a({geometry:function(d){const h=d.getGeometry(),g=h.getType();if(g==="GeometryCollection"){const y=h;return new jl(y.getGeometriesArrayRecursive().filter(function(x){const C=x.getType();return C!=="Polygon"&&C!=="MultiPolygon"}))}if(g!=="Polygon"&&g!=="MultiPolygon")return h},fill:i,image:s,stroke:l,text:r,zIndex:void 0}),new $a({geometry:function(d){const h=d.getGeometry(),g=h.getType();if(g==="GeometryCollection"){const y=h;return new jl(y.getGeometriesArrayRecursive().filter(function(x){const C=x.getType();return C==="Polygon"||C==="MultiPolygon"}))}if(g==="Polygon"||g==="MultiPolygon")return h},fill:i,stroke:null,zIndex:void 0})]:[new $a({fill:i,image:s,stroke:l,text:r,zIndex:void 0})]}function F4(a,e){const t=e.length,i=new Array(e.length),n=new Array(e.length),s=new Array(e.length);let r,l,u;r=!1,l=!1,u=!1;for(let d=0;d<t;++d){const h=e[d];i[d]=h.get("extrude"),n[d]=h.get("tessellate"),s[d]=h.get("altitudeMode"),r=r||i[d]!==void 0,l=l||n[d]!==void 0,u=u||s[d]}r&&a.set("extrude",i),l&&a.set("tessellate",n),u&&a.set("altitudeMode",s)}const Gfe=Wt(ka,{displayName:ot(_a),value:ot(_a)});function Wfe(a,e){const t=a.getAttribute("name");S_(Gfe,a,e);const i=e[e.length-1];t&&i.displayName?i[t]={value:i.value,displayName:i.displayName,toString:function(){return i.value}}:t!==null?i[t]=i.value:i.displayName!==null&&(i[i.displayName]=i.value),delete i.value}const Ofe=Wt(ka,{Data:Wfe,SchemaData:Vfe});function MN(a,e){S_(Ofe,a,e)}function LN(a,e){S_(mN,a,e)}const Ffe=Wt(ka,{Style:ot(AE),key:ot(_a),styleUrl:ot(bN)});function Nfe(a,e){const t=La({},Ffe,a,e,this);if(!t)return;const i=t.key;if(i&&i=="normal"){const n=t.styleUrl;n&&(e[e.length-1]=n);const s=t.Style;s&&(e[e.length-1]=s)}}function Bfe(a,e){const t=xN.call(this,a,e);if(!t)return;const i=e[e.length-1];if(Array.isArray(t))i.Style=t;else if(typeof t=="string")i.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const Dfe=Wt(ka,{SimpleData:Zfe});function Vfe(a,e){S_(Dfe,a,e)}function Zfe(a,e){const t=a.getAttribute("name");if(t!==null){const i=_a(a),n=e[e.length-1];n[t]=i}}const zfe=Wt(ka,{altitudeMode:ot(_a),minAltitude:ot(tn),maxAltitude:ot(tn),north:ot(tn),south:ot(tn),east:ot(tn),west:ot(tn)});function Ufe(a,e){const t=La({},zfe,a,e);if(!t)return;const i=e[e.length-1],n=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];i.extent=n,i.altitudeMode=t.altitudeMode,i.minAltitude=parseFloat(t.minAltitude),i.maxAltitude=parseFloat(t.maxAltitude)}const Hfe=Wt(ka,{minLodPixels:ot(tn),maxLodPixels:ot(tn),minFadeExtent:ot(tn),maxFadeExtent:ot(tn)});function Xfe(a,e){const t=La({},Hfe,a,e);if(!t)return;const i=e[e.length-1];i.minLodPixels=parseFloat(t.minLodPixels),i.maxLodPixels=parseFloat(t.maxLodPixels),i.minFadeExtent=parseFloat(t.minFadeExtent),i.maxFadeExtent=parseFloat(t.maxFadeExtent)}const qfe=Wt(ka,{LinearRing:qo(wN)});function Yfe(a,e){const t=La([],qfe,a,e);t.length>0&&e[e.length-1].push(...t)}const Kfe=Wt(ka,{LinearRing:ZT(wN)});function jfe(a,e){const t=La(void 0,Kfe,a,e);if(t){const i=e[e.length-1];i[0]=t}}function $fe(a,e){S_(rfe,a,e)}function Jfe(a,e){const i=e[e.length-1].whens,n=Bu(a,!1),s=Date.parse(n);i.push(isNaN(s)?0:s)}function mI(a,e){const t=ql(e),n=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const r=Math.floor(n[s]).toString(16);n[s]=r.length==1?"0"+r:r}nn(a,n.join(""))}function Qfe(a,e,t){const i=t[t.length-1],n=i.layout,s=i.stride;let r;if(n=="XY"||n=="XYM")r=2;else if(n=="XYZ"||n=="XYZM")r=3;else throw new Error("Invalid geometry layout");const l=e.length;let u="";if(l>0){u+=e[0];for(let d=1;d<r;++d)u+=","+e[d];for(let d=s;d<l;d+=s){u+=" "+e[d];for(let h=1;h<r;++h)u+=","+e[d+h]}}nn(a,u)}const Ax=Wt(ka,{Data:Kt(ege),value:Kt(age),displayName:Kt(tge)});function ege(a,e,t){a.setAttribute("name",e.name);const i={node:a},n=e.value;typeof n=="object"?(n!==null&&n.displayName&&Gn(i,Ax,ro,[n.displayName],t,["displayName"]),n!==null&&n.value&&Gn(i,Ax,ro,[n.value],t,["value"])):Gn(i,Ax,ro,[n],t,["value"])}function tge(a,e){nn(a,e)}function age(a,e){nn(a,e)}const ige=Wt(ka,{Placemark:Kt(PN)}),nge=function(a,e,t){const i=e[e.length-1].node;return jd(i.namespaceURI,"Placemark")};function rge(a,e,t){Gn({node:a},ige,nge,e,t,void 0,this)}const sge=Du("Data");function oge(a,e,t){const i={node:a},n=e.names,s=e.values,r=n.length;for(let l=0;l<r;l++)Gn(i,Ax,sge,[{name:n[l],value:s[l]}],t)}const xk=Wt(ka,["href"],Wt(oh,["x","y","w","h"])),wk=Wt(ka,{href:Kt(nn)},Wt(oh,{x:Kt(Vo),y:Kt(Vo),w:Kt(Vo),h:Kt(Vo)})),lge=function(a,e,t){return jd(oh[0],"gx:"+t)};function uge(a,e,t){const i={node:a},n=t[t.length-1].node;let s=xk[n.namespaceURI],r=el(e,s);Gn(i,wk,ro,r,t,s),s=xk[oh[0]],r=el(e,s),Gn(i,wk,lge,r,t,s)}const cge=Wt(ka,["scale","heading","Icon","color","hotSpot"]),dge=Wt(ka,{Icon:Kt(uge),color:Kt(mI),heading:Kt(Vo),hotSpot:Kt(Nge),scale:Kt(WN)});function hge(a,e,t){const i={node:a},n={},s=e.getSrc(),r=e.getSize(),l=e.getImageSize(),u={href:s};if(r){u.w=r[0],u.h=r[1];const A=e.getAnchor(),E=e.getOrigin();if(E&&l&&E[0]!==0&&E[1]!==r[1]&&(u.x=E[0],u.y=l[1]-(E[1]+r[1])),A&&(A[0]!==r[0]/2||A[1]!==r[1]/2)){const L={x:A[0],xunits:"pixels",y:r[1]-A[1],yunits:"pixels"};n.hotSpot=L}}n.Icon=u;let d=e.getScaleArray()[0],h=r;if(h===null&&(h=s1),h.length==2){const A=tC(h);d=d/A}d!==1&&(n.scale=d);const g=e.getRotation();g!==0&&(n.heading=g);const y=e.getColor();y&&(n.color=y);const x=t[t.length-1].node,C=cge[x.namespaceURI],I=el(n,C);Gn(i,dge,ro,I,t,C)}const _ge=Wt(ka,["color","scale"]),mge=Wt(ka,{color:Kt(mI),scale:Kt(WN)});function fge(a,e,t){const i={node:a},n={},s=e.getFill();s&&(n.color=s.getColor());const r=e.getScale();r&&r!==1&&(n.scale=r);const l=t[t.length-1].node,u=_ge[l.namespaceURI],d=el(n,u);Gn(i,mge,ro,d,t,u)}const gge=Wt(ka,["color","width"]),pge=Wt(ka,{color:Kt(mI),width:Kt(Vo)});function yge(a,e,t){const i={node:a},n={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,r=gge[s.namespaceURI],l=el(n,r);Gn(i,pge,ro,l,t,r)}const bge={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},RN=function(a,e,t){if(a){const i=e[e.length-1].node;return jd(i.namespaceURI,bge[a.getType()])}},vge=Du("Point"),xge=Du("LineString"),wge=Du("LinearRing"),Cge=Du("Polygon"),Ige=Wt(ka,{LineString:Kt(mp),Point:Kt(mp),Polygon:Kt(GN),GeometryCollection:Kt(kN)});function kN(a,e,t){const i={node:a},n=e.getType();let s=[],r;if(n==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(l){const u=l.getType();if(u==="MultiPoint")s=s.concat(l.getPoints());else if(u==="MultiLineString")s=s.concat(l.getLineStrings());else if(u==="MultiPolygon")s=s.concat(l.getPolygons());else if(u==="Point"||u==="LineString"||u==="Polygon")s.push(l);else throw new Error("Unknown geometry type")}),r=RN;else if(n==="MultiPoint")s=e.getPoints(),r=vge;else if(n==="MultiLineString")s=e.getLineStrings(),r=xge;else if(n==="MultiPolygon")s=e.getPolygons(),r=Cge;else throw new Error("Unknown geometry type");Gn(i,Ige,r,s,t)}const Sge=Wt(ka,{LinearRing:Kt(mp)});function Ck(a,e,t){Gn({node:a},Sge,wge,[e],t)}const N4=Wt(ka,{ExtendedData:Kt(oge),MultiGeometry:Kt(kN),LineString:Kt(mp),LinearRing:Kt(mp),Point:Kt(mp),Polygon:Kt(GN),Style:Kt(Fge),address:Kt(nn),description:Kt(nn),name:Kt(nn),open:Kt(Tp),phoneNumber:Kt(nn),styleUrl:Kt(nn),visibility:Kt(Tp)}),Age=Wt(ka,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Tge=Du("ExtendedData");function PN(a,e,t){const i={node:a};e.getId()&&a.setAttribute("id",e.getId());const n=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const r=Object.keys(n||{}).sort().filter(function(x){return!s[x]}),l=e.getStyleFunction();if(l){const x=l(e,0);if(x){const C=Array.isArray(x)?x:[x];let I=C;if(e.getGeometry()&&(I=C.filter(function(A){const E=A.getGeometryFunction()(e);if(E){const L=E.getType();return L==="GeometryCollection"?E.getGeometriesArrayRecursive().filter(function(G){const F=G.getType();return F==="Point"||F==="MultiPoint"}).length:L==="Point"||L==="MultiPoint"}})),this.writeStyles_){let A=C,E=C;e.getGeometry()&&(A=C.filter(function(L){const G=L.getGeometryFunction()(e);if(G){const F=G.getType();return F==="GeometryCollection"?G.getGeometriesArrayRecursive().filter(function(B){const Z=B.getType();return Z==="LineString"||Z==="MultiLineString"}).length:F==="LineString"||F==="MultiLineString"}}),E=C.filter(function(L){const G=L.getGeometryFunction()(e);if(G){const F=G.getType();return F==="GeometryCollection"?G.getGeometriesArrayRecursive().filter(function(B){const Z=B.getType();return Z==="Polygon"||Z==="MultiPolygon"}).length:F==="Polygon"||F==="MultiPolygon"}})),n.Style={pointStyles:I,lineStyles:A,polyStyles:E}}if(I.length&&n.name===void 0){const A=I[0].getText();A&&(n.name=A.getText())}}}const u=t[t.length-1].node,d=Age[u.namespaceURI],h=el(n,d);if(Gn(i,N4,ro,h,t,d),r.length>0){const x=el(n,r);Gn(i,N4,Tge,[{names:r,values:x}],t)}const g=t[0];let y=e.getGeometry();y&&(y=au(y,!0,g)),Gn(i,N4,RN,[y],t)}const Ege=Wt(ka,["extrude","tessellate","altitudeMode","coordinates"]),Mge=Wt(ka,{extrude:Kt(Tp),tessellate:Kt(Tp),altitudeMode:Kt(nn),coordinates:Kt(Qfe)});function mp(a,e,t){const i=e.getFlatCoordinates(),n={node:a};n.layout=e.getLayout(),n.stride=e.getStride();const s=e.getProperties();s.coordinates=i;const r=t[t.length-1].node,l=Ege[r.namespaceURI],u=el(s,l);Gn(n,Mge,ro,u,t,l)}const Lge=Wt(ka,["color","fill","outline"]),Ik=Wt(ka,{outerBoundaryIs:Kt(Ck),innerBoundaryIs:Kt(Ck)}),Rge=Du("innerBoundaryIs"),kge=Du("outerBoundaryIs");function GN(a,e,t){const i=e.getLinearRings(),n=i.shift(),s={node:a};Gn(s,Ik,Rge,i,t),Gn(s,Ik,kge,[n],t)}const Pge=Wt(ka,{color:Kt(mI),fill:Kt(Tp),outline:Kt(Tp)});function Gge(a,e,t){const i={node:a},n=e.getFill(),s=e.getStroke(),r={color:n?n.getColor():void 0,fill:n?void 0:!1,outline:s?void 0:!1},l=t[t.length-1].node,u=Lge[l.namespaceURI],d=el(r,u);Gn(i,Pge,ro,d,t,u)}function WN(a,e){Vo(a,Math.round(e*1e6)/1e6)}const Wge=Wt(ka,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Oge=Wt(ka,{IconStyle:Kt(hge),LabelStyle:Kt(fge),LineStyle:Kt(yge),PolyStyle:Kt(Gge)});function Fge(a,e,t){const i={node:a},n={};if(e.pointStyles.length){const u=e.pointStyles[0].getText();u&&(n.LabelStyle=u);const d=e.pointStyles[0].getImage();d&&typeof d.getSrc=="function"&&(n.IconStyle=d)}if(e.lineStyles.length){const u=e.lineStyles[0].getStroke();u&&(n.LineStyle=u)}if(e.polyStyles.length){const u=e.polyStyles[0].getStroke();u&&!n.LineStyle&&(n.LineStyle=u),n.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,r=Wge[s.namespaceURI],l=el(n,r);Gn(i,Oge,ro,l,t,r)}function Nge(a,e){a.setAttribute("x",String(e.x)),a.setAttribute("y",String(e.y)),a.setAttribute("xunits",e.xunits),a.setAttribute("yunits",e.yunits)}class Bge extends cI{export(e,t){const i=this.generateContent(e);this.download(t,i,"kml","application/vnd.google-earth.kml+xml")}generateContent(e){return new fN().writeFeatures(this.exploseFeatures(e),this.encodeOptions)}}const Dge="https://migration.geoportail.lu/mymaps/exportgpxkml";class Vge extends cI{constructor(e){super(e),this.encodeOptions.dataProjection=tu}async export(e,t){const i=this.generateContent(e),n=Dge,s=new URLSearchParams({format:"shape",name:t,doc:i}),r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()});if(!r.ok)throw new Error("Error while requesting shapefile");const l=await r.blob();this.download(t,l,"zip","application/octet-stream")}generateContent(e){return new $l().writeFeatures(this.exploseFeatures(e),this.encodeOptions)}async fetchFileContent(e,t){return await(await fetch("mymaps/exportgpxkml",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify({doc:e,format:"shape",name:t})})).blob()}}class Zge extends cI{async export(e,t){const i=await this.generateContent(e);this.download(t,i,"csv","application/csv")}async generateContent(e){const t=await e.getProfile();return t?this.getCsvContent(t):""}getCsvContent(e){return e.reduce((i,n)=>i+this.getCsvContentRow(n),`dist,MNT,y,x,lon,lat
`)}getCsvContentRow(e){const t=bc([e.x,e.y],tu);return`${e.dist},${e.values.dhm},${e.x},${e.y},${t[0]},${t[1]}
`}}class zge{export(e,t,i,n,s=!1){this.getExporter(e,t)?.export(i,n,s)}getExporter(e,t){switch(t){case"gpx":return new tfe(e);case"kml":return new Bge(e);case"shapefile":return new Vge(e);case"csv":return new Zge(e)}}}const fI=new zge,Uge={"data-cy":"featItemProfile",class:"lux-profile relative"},Hge={class:"flex justify-between w-full px-1 gap-3 whitespace-nowrap"},Xge={class:"grow cursor-default","data-cy":"featItemProfileCumul"},qge=["aria-label"],Yge={key:0,class:"no-print w-full absolute mt-2 text-center"},Kge={class:"text-gray-700 rounded p-2 bg-[rgba(120,120,120,0.5)]"},jge="mnt",TE=rt({__name:"feature-elevation-profile",props:{feature:{},enableExportCSV:{type:Boolean,default:!0},activatePositioning:{type:Boolean,default:!0}},emits:["close"],setup(a){const e=a,t=fme(void 0,()=>e.activatePositioning),i=oN(),{t:n}=Ct(),s=St(()=>sb()?.vnode?.props?.onClose),r=Ai(void 0),l=St(()=>r.value?.length||0),u=St(()=>r.value&&r.value[l.value-1]),d=St(()=>u.value?.elevationGain),h=St(()=>u.value?.elevationLoss),g=St(()=>u.value?.cumulativeElevation),y=St(()=>e.feature&&!r.value),x=St(()=>!e.feature);fn(()=>{e.feature&&e.feature.getProfile().then(E=>r.value=E)}),Nr(()=>{i.setPosition(void 0,void 0)}),Rt(()=>e.feature,(E,L)=>{E!==L&&(e.feature&&!e.feature.profileData?(r.value=void 0,e.feature?.getProfile().then(G=>r.value=G)):r.value=void 0)}),Rt(()=>e.feature?.profileData,(E,L)=>{E!==L&&(e.feature&&!e.feature.profileData?(r.value=void 0,e.feature?.getProfile().then(G=>r.value=G)):r.value=void 0)}),Rt(r,E=>t.profileData.value=E);function C(){e.feature&&fI.export(e.feature?.map,"csv",e.feature,e.feature.label||jge)}function I(E){const L=fr([E.x,E.y],tu,e.feature?.map.getView().getProjection());i.setPosition(L[0],L[1])}function A(){i.setPosition(void 0,void 0)}return(E,L)=>{const G=El("format-measure");return U(),se("div",Uge,[P("div",Hge,[P("div",Xge,[r.value?(U(),se(Tt,{key:0},[P("span",null,[L[2]||(L[2]=Dt(" +",-1)),Sa(P("span",null,null,512),[[G,d.value,void 0,{elevation:!0}]])]),P("span",null,[L[3]||(L[3]=Dt(" ",-1)),Sa(P("span",null,null,512),[[G,h.value,void 0,{elevation:!0}]])]),P("span",null,[L[4]||(L[4]=Dt(" ",-1)),Sa(P("span",null,null,512),[[G,g.value,void 0,{elevation:!0}]])])],64)):Ge("",!0)]),a.enableExportCSV&&r.value?(U(),se("button",{key:0,"data-cy":"featItemProfileCSV",class:"profile-export no-print text-secondary hover:underline",onClick:L[0]||(L[0]=()=>C())},K(R(n)("Export csv")),1)):Ge("",!0),s.value?(U(),se("button",{key:1,"aria-label":R(n)("Close"),class:"fa-solid fa-close text-secondary hover:text-tertiary",onClick:L[1]||(L[1]=F=>E.$emit("close"))},null,8,qge)):Ge("",!0)]),y.value||x.value?(U(),se("div",Yge,[P("span",Kge,K(y.value?R(n)("Please wait, the profile is loading."):x.value?R(n)("Draw a line on the map to display an elevation profile."):""),1)])):Ge("",!0),gt(Jhe,{profileData:r.value,class:"w-full",highlightDistance:R(t).highlightDistance.value,"onHover:profile":I,"onOut:profile":A},null,8,["profileData","highlightDistance"])])}}}),ON=Ao("elevation-profile",()=>{const a=Ye(!1),e=Ye(null);return{drawElevationProfileActive:a,currentProfileFeature:e}});function $ge(){const a=ri(),e=ON(),{drawElevationProfileActive:t,currentProfileFeature:i}=xt(e),{elevationProfileToolbarOpen:n}=xt(a);let s;const r=new Yp({type:"LineString"});let l;const u=new $a({fill:new ji({color:"rgba(255, 204, 51, 0.2)"}),stroke:new Li({color:"rgba(255, 204, 51, 1)",width:2}),image:new Qr({radius:7,fill:new ji({color:"rgba(255, 204, 51, 0.3)"})}),text:new rh({font:"bold 12px Calibri,sans-serif",fill:new ji({color:"rgb(0 0 0)"}),stroke:new Li({color:"rgba(255, 204, 51, 1)",width:4}),overflow:!0})}),d=new bs({source:new lo,zIndex:1001});function h(){s=qa().getOlMap(),Rt(n,A=>{if(A)t.value=!0;else{t.value=!1;const E=d.getSource();E&&E.clear(),i.value=null}}),Rt(()=>i.value,A=>{const E=d.getSource();E&&(E.clear(),A&&A instanceof Di&&E.addFeature(A))}),r.setActive(!1),Rt(t,A=>{r.setActive(A)}),s.addInteraction(r),s.addLayer(d),d.setStyle(u),xa(r,"drawstart",A=>{const E=d.getSource();E&&E.clear(),i.value=null,Iu.add(s,A)}),xa(r,"drawend",A=>{g(A)}),l=xa(document,"keyup",A=>{y(A)})}function g(A){Iu.remove(),r.finishDrawing(),t.value=!1,A.stopPropagation(),i.value=A.feature}function y(A){A.key==="Escape"&&(Iu.remove(),r.finishDrawing(),r.setActive(!1))}function x(){const A=d.getSource();A&&A.clear(),i.value=null}function C(){const A=i.value;return!!A&&typeof A.getGeometry=="function"&&A.getGeometry()&&A.getGeometry().getType&&A.getGeometry().getType()==="LineString"}function I(){l&&(mn(l),l=void 0);const A=d.getSource();A&&A.clear(),s&&(s.removeLayer(d),s.removeInteraction(r))}return{drawInteraction:r,drawElevationProfileActive:t,currentProfileFeature:i,init:h,clearFeature:x,hasLineFeature:C,destroy:I}}const Jge={"data-cy":"toolbarElevationProfile",class:"relative"},Qge={class:"absolute bottom-full top-auto z-20 flex flex-col gap-2 bg-white border border-gray-400 p-2 rounded shadow-lg"},epe={class:"flex gap-2"},tpe=rt({__name:"toolbar-elevation-profile",setup(a){const{t:e}=Ct(),t=ON(),{currentProfileFeature:i}=xt(t),n=$ge(),s=qa().getOlMap(),r=St(()=>{if(!i.value)return;const u=new Tl;return u.setGeometry(i.value.getGeometry()),u.map=s,u.id=Date.now(),u.label=e("Elevation Profile"),u.featureType="drawnLine",u});fn(()=>{n.init()}),Nr(()=>{n.destroy()});function l(){n.clearFeature(),n.drawElevationProfileActive.value=!0}return(u,d)=>(U(),se("div",Jge,[P("div",Qge,[P("div",epe,[P("button",{"data-cy":"elevationProfileRedraw",class:"px-3 py-1 bg-primary text-white rounded hover:bg-secondary",onClick:l},K(R(e)("Draw new line")),1),R(i)?(U(),se("button",{key:0,"data-cy":"elevationProfileClear",class:"px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600",onClick:d[0]||(d[0]=(...h)=>R(n).clearFeature&&R(n).clearFeature(...h))},K(R(e)("Clear")),1)):Ge("",!0)]),gt(TE,{class:"w-[450px]",feature:r.value,"enable-export-c-s-v":!0,"activate-positioning":!0},null,8,["feature"])])]))}});class ape{printExtent;constructor(e){this.setPrintExtent(e||[0,0,1/0,1/0])}getPrintExtent(){return this.printExtent}setPrintExtent(e){this.printExtent=e}layerFilter(e){return!0}geometryFilter(e){return!0}feature(e,t){}line(e,t,i,n){}point(e,t,i,n){}text(e,t,i,n){}wmtsLayer(e,t,i){}wmsLayer(e,t,i){}}const FN={WMTS_PIXEL_SIZE:28e-5,CIRCLE_TO_POLYGON_SIDES:64};function B4(a){return a.length===1?`0${a}`:a}function D4(a){const e=a[0],t=a[1],i=a[2];if(e!==(e&255)||t!==(t&255)||i!==(i&255))throw new Error(`"(${e},${t},${i})" is not a valid RGB color`);const n=B4(e.toString(16)),s=B4(t.toString(16)),r=B4(i.toString(16));return`#${n}${s}${r}`}function ipe(a){const e=a.getProjection(),t=a.getTileGrid();console.assert(t instanceof fE);const i=t.getMatrixIds(),n=[],s=e.getMetersPerUnit();console.assert(!!s);for(let r=0;r<i.length;r++){const l=t.getFullTileRange(r),u=t.getResolution(r)*s;n.push({identifier:i[r],scaleDenominator:u/FN.WMTS_PIXEL_SIZE,tileSize:ao(t.getTileSize(r)),topLeftCorner:t.getOrigin(r),matrixSize:[l.maxX-l.minX+1,l.maxY-l.minY+1]})}return n}const D2=document.createElement("canvas");function npe(a,e){const t=D2.getContext("2d");return D2.width=a.width,D2.height=a.height,t.globalAlpha=e,t.drawImage(a,0,0),D2}function rpe(a){const e=document.createElement("a");return e.href=encodeURI(a),decodeURI(e.href)}function spe(a){const e=a.getUrls();return console.assert(e.length>0),rpe(e[0])}function ope(a,e,t,i,n,s){e&&a.forEach(r=>{const l=r.getGeometry();if(!l)return;const u=l.clone();u.applyTransform((h,g,y)=>Fd(h,0,h.length,y||2,i,g));const d=e(r,t);d&&(Array.isArray(d)?d.forEach(h=>{n.setStyle(h),n.drawGeometry(u)}):(n.setStyle(d),n.drawGeometry(u)),s&&s(n,u))})}function lpe(a,e,t){const i=Jo(),n=Ru(a);return ku(i,t[0]/2,t[1]/2,1/e,-1/e,0,-n[0],-n[1]),i}class upe extends yE{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:Z_e({extent:gE(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const cpe='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class dpe extends upe{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[cpe];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",n=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,r)=>{const l=s.getImage();!wl&&l instanceof HTMLImageElement&&(l.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||aN)(s,r)},transition:e.transition,url:n,wrapX:e.wrapX,zDirection:e.zDirection})}}const hpe={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Sk={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class _pe extends QF{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Jo(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(e,t,i,n,s,r,l,u){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,n,s,r,l,u)}getTile(e,t,i,n){const s=this.getOrCreateTile(e,t,i,n);if(!s)return null;const r=n.viewState,l=r.resolution,u=n.viewHints,d=this.getLayer().getSource(),h=d.getTileGridForProjection(r.projection),g=!(u[Kn.ANIMATING]||u[Kn.INTERACTING]),y=h.getZForResolution(l,d.zDirection)===e;return g&&y?s.wantedResolution=l:s.wantedResolution||(s.wantedResolution=h.getResolution(e)),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const n=this.getLayer(),s=n.getRevision(),r=n.getRenderOrder()||null,l=e.wantedResolution,u=e.getReplayState(n);if(!u.dirty&&u.renderedResolution===l&&u.renderedRevision==s&&u.renderedRenderOrder==r)return;const d=n.getSource(),h=!!n.getDeclutter(),g=d.getTileGrid(),x=d.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),C=d.getSourceTiles(t,i,e),I=ei(n);delete e.hitDetectionImageData[I],e.executorGroups[I]=[],u.dirty=!1;for(let A=0,E=C.length;A<E;++A){const L=C[A];if(L.getState()!=Na.LOADED)continue;const G=d.getProjection(),F=L.tileCoord;let B=g.getTileCoordExtent(F);i&&G&&!Od(i,G)&&(B=db(B,G,i,32));const Z=Ac(x,B),Y=qd(Z,n.getRenderBuffer()*l,this.tempExtent),$=zm(B,Z)?null:Y,te=new kO(0,Z,l,t),ce=C3(l,t),me=function(le,_e){let ke;const Ie=le.getStyleFunction()||n.getStyleFunction();if(Ie&&(ke=Ie(le,l)),ke){const re=this.renderFeature(le,ce,ke,te,h,_e);u.dirty=u.dirty||re}},X=L.getFeatures();r&&r!==u.renderedRenderOrder&&X.sort(r);for(let le=0,_e=X.length;le<_e;++le){let ke=X[le];i&&L.projection&&!Od(i,L.projection)&&(ke=ke.clone(),ke.getGeometry().applyTransform(h_(L.projection,i))),(!$||Or($,ke.getGeometry().getExtent()))&&me.call(this,ke,le)}const de=te.finish(),N=n.getRenderMode()!=="vector"&&h&&C.length===1?null:Z,ne=new PO(N,l,t,d.getOverlaps(),de,n.getRenderBuffer(),!0);e.executorGroups[I].push(ne)}u.renderedRevision=s,u.renderedRenderOrder=r,u.renderedResolution=l}forEachFeatureAtCoordinate(e,t,i,n,s){const r=t.viewState.resolution,l=t.viewState.rotation;i=i??0;const u=this.getLayer(),h=u.getSource().getTileGridForProjection(t.viewState.projection),g=Yr([e]);qd(g,r*i,g);const y={},x=function(G,F,B){let Z=G.getId();Z===void 0&&(Z=ei(G));const Y=y[Z];if(Y){if(Y!==!0&&B<Y.distanceSq){if(B===0)return y[Z]=!0,s.splice(s.lastIndexOf(Y),1),n(G,u,F);Y.geometry=F,Y.distanceSq=B}}else{if(B===0)return y[Z]=!0,n(G,u,F);s.push(y[Z]={feature:G,layer:u,geometry:F,distanceSq:B,callback:n})}},C=this.renderedTiles,I=ei(u),A=u.getDeclutter(),E=A?t.declutter?.[A]?.all().map(G=>G.value):null;let L;e:for(let G=0,F=C.length;G<F;++G){const B=C[G],Z=h.getTileCoordExtent(B.wrappedTileCoord);if(!Or(Z,g))continue;const Y=B.executorGroups[I];for(let $=0,te=Y.length;$<te;++$)if(L=Y[$].forEachFeatureAtCoordinate(e,r,l,i,x,E),L)break e}return L}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const n=this.getLayer(),s=n.getSource(),r=this.renderedProjection,l=r.getExtent(),u=this.renderedResolution,d=s.getTileGridForProjection(r),h=Gr(this.renderedPixelToCoordinateTransform_,e.slice()),g=d.getTileCoordForCoordAndResolution(h,u).toString(),y=this.renderedTiles.find(G=>G.tileCoord.toString()===g&&G.getState()===Na.LOADED);if(!y||y.loadingSourceTiles>0){t([]);return}s.getWrapX()&&r.canWrapX()&&!yc(l,d.getTileCoordExtent(y.tileCoord))&&kC(h,r);const x=ei(n),C=d.getTileCoordExtent(y.wrappedTileCoord),I=th(C),A=[(h[0]-I[0])/u,(I[1]-h[1])/u],E=y.getSourceTiles().reduce((G,F)=>G.concat(F.getFeatures()),[]);let L=y.hitDetectionImageData[x];if(!L){const G=ao(d.getTileSize(d.getZForResolution(u,s.zDirection))),F=this.renderedRotation_,B=[this.getRenderTransform(d.getTileCoordCenter(y.wrappedTileCoord),u,0,vl,G[0]*vl,G[1]*vl,0)];L=WO(G,B,E,n.getStyleFunction(),d.getTileCoordExtent(y.wrappedTileCoord),y.getReplayState(n).renderedResolution,F),y.hitDetectionImageData[x]=L}t(OO(A,E,L))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),r=s.getZForResolution(this.renderedResolution),l={};return i.forEach(u=>{if(u.tileCoord[0]!==r||u.getState()!==Na.LOADED)return;const d=u.getSourceTiles();for(let h=0,g=d.length;h<g;++h){const y=d[h],x=y.getKey();if(x in l)continue;l[x]=!0;const C=y.tileCoord;if(Or(e,s.getTileCoordExtent(C))){const I=y.getFeatures();if(I)for(let A=0,E=I.length;A<E;++A){const L=I[A],G=L.getGeometry();Or(e,G.getExtent())&&t.push(L)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const i=this.context,n=i.globalAlpha;i.globalAlpha=t.opacity;const s=e.viewHints,r=!(s[Kn.ANIMATING]||s[Kn.INTERACTING]),l=[this.context.canvas.width,this.context.canvas.height],u=this.getLayer().getDeclutter(),d=u?e.declutter?.[u]:void 0,h=ei(this.getLayer()),g=this.renderedTiles;for(let y=0,x=g.length;y<x;++y){const C=g[y],I=C.executorGroups[h];if(I)for(let A=I.length-1;A>=0;--A)I[A].execute(this.context,l,this.getTileRenderTransform(C,e),e.viewState.rotation,r,Gw,d)}i.globalAlpha=n}renderDeferredInternal(e){const t=this.renderedTiles,i=ei(this.getLayer()),n=t.reduce((u,d,h)=>(d.executorGroups[i].forEach(g=>u.push({executorGroup:g,index:h})),u),[]),s=n.map(({executorGroup:u})=>u.getDeferredZIndexContexts()),r={};for(let u=0,d=n.length;u<d;++u){const h=n[u].executorGroup.getDeferredZIndexContexts();for(const g in h)r[g]=!0}Object.keys(r).map(Number).sort(Tc).forEach(u=>{s.forEach((d,h)=>{d[u]&&(d[u].forEach(g=>{const{executorGroup:y,index:x}=n[h],C=y.getRenderedContext(),I=C.globalAlpha;C.globalAlpha=this.renderedOpacity_;const A=this.tileClipContexts_[x];A&&A.draw(C),g.draw(C),A&&C.restore(),C.globalAlpha=I,g.clear()}),d[u].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,n=t.viewState,s=n.center,r=n.resolution,l=n.rotation,u=t.size,d=Math.round(u[0]*i),h=Math.round(u[1]*i),y=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),x=e.tileCoord,C=y.getTileCoordExtent(e.wrappedTileCoord),I=y.getTileCoordExtent(x,this.tempExtent)[0]-C[0];return z5(sx(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(s,r,l,i,d,h,I))}postRender(e,t){const i=t.viewHints,n=!(i[Kn.ANIMATING]||i[Kn.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),r=s.getRenderMode(),l=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const u=s.getDeclutter(),d=u?Sk[r].filter(B=>!Gw.includes(B)):Sk[r],h=t.viewState,g=h.rotation,y=s.getSource(),C=y.getTileGridForProjection(h.projection).getZForResolution(h.resolution,y.zDirection),I=this.renderedTiles,A=[],E=[],L=[],G=ei(s);let F=!0;for(let B=I.length-1;B>=0;--B){const Z=I[B];F=F&&!Z.getReplayState(s).dirty;const Y=Z.executorGroups[G].filter(N=>N.hasExecutors(d));if(Y.length===0)continue;const $=this.getTileRenderTransform(Z,t),te=Z.tileCoord[0];let ce=!1;const me=Y[0].getClipCoords($);let X=e,de;if(me){de=new XT,X=de.getContext();for(let N=0,ne=A.length;N<ne;++N)if(C!==te&&te<E[N]){const le=A[N];Or([me[0],me[3],me[4],me[7]],[le[0],le[3],le[4],le[7]])&&(ce||(X.save(),ce=!0),X.beginPath(),X.moveTo(me[0],me[1]),X.lineTo(me[2],me[3]),X.lineTo(me[4],me[5]),X.lineTo(me[6],me[7]),X.moveTo(le[6],le[7]),X.lineTo(le[4],le[5]),X.lineTo(le[2],le[3]),X.lineTo(le[0],le[1]),X.clip())}A.push(me),E.push(te)}for(let N=0,ne=Y.length;N<ne;++N)Y[N].execute(e,[e.canvas.width,e.canvas.height],$,g,n,d,t.declutter?.[u]);ce&&(X===e?X.restore():L[B]=de)}e.globalAlpha=l,this.ready=F,this.tileClipContexts_=L,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,n,s,r){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let u=0,d=i.length;u<d;++u)l=Ww(n,e,i[u],t,this.boundHandleStyleImageChange_,void 0,s,r)||l;else l=Ww(n,e,i,t,this.boundHandleStyleImageChange_,void 0,s,r);return l}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),n=t.getRevision(),s=e.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==n}renderTileImage_(e,t){const i=this.getLayer(),n=e.getReplayState(i),s=i.getRevision(),r=e.executorGroups[ei(i)];n.renderedTileRevision=s;const l=e.wrappedTileCoord,u=l[0],d=i.getSource();let h=t.pixelRatio;const y=t.viewState.projection,x=d.getTileGridForProjection(y),C=x.getResolution(e.tileCoord[0]),I=t.pixelRatio/e.wantedResolution*C,A=x.getResolution(u),E=e.getContext();h=Math.round(Math.max(h,I/h));const L=d.getTilePixelSize(u,h,y);E.canvas.width=L[0],E.canvas.height=L[1];const G=h/I;if(G!==1){const Y=GL(this.tmpTransform_);sx(Y,G,G),E.setTransform.apply(E,Y)}const F=x.getTileCoordExtent(l,this.tempExtent),B=I/A,Z=GL(this.tmpTransform_);sx(Z,B,-B),KH(Z,-F[0],-F[3]);for(let Y=0,$=r.length;Y<$;++Y)r[Y].execute(E,[E.canvas.width*G,E.canvas.height*G],Z,0,!0,hpe[i.getRenderMode()],null);n.renderedTileResolution=e.wantedResolution}}class mpe extends fT{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const n=e.renderMode||"hybrid";_n(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new _pe(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(a_.PRELOAD)}getUseInterimTilesOnError(){return this.get(a_.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(a_.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(a_.USE_INTERIM_TILES_ON_ERROR,e)}}class fpe extends KT{constructor(){super()}getType(){return"text"}readFeature(e,t){return this.readFeatureFromText(V2(e),this.adaptOptions(t))}readFeatureFromText(e,t){return Da()}readFeatures(e,t){return this.readFeaturesFromText(V2(e),this.adaptOptions(t))}readFeaturesFromText(e,t){return Da()}readGeometry(e,t){return this.readGeometryFromText(V2(e),this.adaptOptions(t))}readGeometryFromText(e,t){return Da()}readProjection(e){return this.readProjectionFromText(V2(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}writeFeatureText(e,t){return Da()}writeFeatures(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}writeFeaturesText(e,t){return Da()}writeGeometry(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}writeGeometryText(e,t){return Da()}}function V2(a){return typeof a=="string"?a:""}const Ad={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"},NN=Object.freeze({LineString:Ad.LINE_STRING,Point:Ad.POINT,Polygon:Ad.POLYGON,MultiLineString:Ad.LINE_STRING,MultiPoint:Ad.POINT,MultiPolygon:Ad.POLYGON});function gpe(a){return a in NN}const Tx="_mfp_style",ppe=a=>{const e=a.geometry;return e&&e.type==="Point"?0:1},V4=a=>{const e=Array.isArray(a)?a.join(","):a;return`[${Tx} = '${e}']`};class BN{layerState_;layer_;customizer_;geojsonFormat=new $l;deepIds_=new Map;lastDeepId_=0;constructor(e,t){this.layerState_=e,this.layer_=this.layerState_.layer,this.customizer_=t}encodeVectorLayer(e){const t=this.layer_.getSource();if(!t)return null;console.assert(t instanceof lo);const i=t.getFeaturesInExtent(this.customizer_.getPrintExtent()),n=[],s={version:2};return i.forEach(l=>this.encodeFeature(l,e,n,s)),n.length<=0||Object.keys(s).length<=1?null:(n.sort((l,u)=>{const d=ppe;return d(u)-d(l)}),{geoJson:{type:"FeatureCollection",features:n},opacity:this.layerState_.opacity,style:s,type:"geojson",name:this.layer_.get("name")})}encodeFeature(e,t,i,n){let s=null;const r=e.getStyleFunction()||this.layer_.getStyleFunction();r&&(s=r(e,t)),e.getGeometry().getType()==="Circle"&&(e=this.featureCircleAsPolygon(e));const l=this.geojsonFormat.writeFeatureObject(e);let u=s!==null&&!Array.isArray(s)?[s]:s;if(!u||(u=u.filter(h=>!!h),u.length===0))return;console.assert(Array.isArray(u));let d=!1;u.forEach(h=>{let g=h.getGeometry(),y;if(typeof g=="function"&&(g=g(e)),g&&typeof g=="object"){const x=e.clone();x.setGeometry(g),y=this.geojsonFormat.writeFeatureObject(x),i.push(y)}else{if(y=l,g=e.getGeometry(),!g||!this.customizer_.geometryFilter(g))return;d||(i.push(y),d=!0)}this.addVectorStyle(n,y,h)})}getDeepStyleUid(e){const t=[e];let i="";for(;t.length;){const s=t.pop();i+="_k"+ei(s);for(const[r,l]of Object.entries(s))l!=null&&(["number","string","boolean"].includes(typeof l)?i+=`_${r}:${l}`:t.push(l))}if(this.deepIds_.has(i))return this.deepIds_.get(i).toString();const n=++this.lastDeepId_;return this.deepIds_.set(i,n),n.toString()}addVectorStyle(e,t,i){const n=this.getDeepStyleUid(i),s=V4(n);let r;if(s in e)r=!0;else{const l=this.encodeVectorStyle(t,i);r=l&&l.symbolizers.length!==0,r&&(e[s]=l)}if(r){t.properties||(t.properties={}),this.customizer_.feature(this.layerState_,t);const l=t.properties[Tx];if(l){const u=[...l.split(","),n];e[V4(u)]={symbolizers:[...e[V4(l)].symbolizers,...e[s].symbolizers]},t.properties[Tx]=u.join(",")}else t.properties[Tx]=n}}encodeVectorStyle(e,t){const i=e.geometry.type;if(!gpe(i))return console.warn("Unsupported geometry type: ",i),null;const n=NN[i],s={symbolizers:[]},r=t.getFill(),l=t.getImage(),u=t.getStroke(),d=t.getText();return n===Ad.POLYGON?r!==null&&this.encodeVectorStylePolygon(e,s.symbolizers,r,u):n===Ad.LINE_STRING?u!==null&&this.encodeVectorStyleLine(e,s.symbolizers,u):n===Ad.POINT&&l!==null&&this.encodeVectorStylePoint(e,s.symbolizers,l),d!==null&&this.encodeVectorStyleText(e,s.symbolizers,d),s}encodeVectorStyleFill(e,t,i){let n=i.getColor();n!==null&&(console.assert(typeof n=="string"||Array.isArray(n)),n=ql(n),console.assert(Array.isArray(n),"only supporting fill colors"),t.fillColor=D4(n),t.fillOpacity=n[3])}encodeVectorStyleLine(e,t,i){const n={type:"line"};this.encodeVectorStyleStroke(e,n,i),this.customizer_.line(this.layerState_,e,n,i),t.push(n)}encodeVectorStylePoint(e,t,i){let n;i instanceof Qr?n=this.encodeVectorStylePointStyleCircle(e,i):i instanceof Gu&&(n=this.encodeVectorStylePointStyleIcon(e,i)),n&&(this.customizer_.point(this.layerState_,e,n,i),t.push(n))}encodeVectorStylePointStyleCircle(e,t){const i={type:"point"};i.pointRadius=t.getRadius();const n=t.getScale();n&&(Array.isArray(n)?i.pointRadius*=(n[0]+n[1])/2:i.pointRadius*=n);const s=t.getFill();let r=t.getStroke();return s!==null&&(this.encodeVectorStyleFill(e,i,s),r||(r=new Li({color:s.getColor()}))),r!==null&&this.encodeVectorStyleStroke(e,i,r),i}encodeVectorStylePointStyleIcon(e,t){const i=t.getSrc();if(i===void 0)return;const n={type:"point",externalGraphic:i},s=t.getOpacity();s!==null&&(n.graphicOpacity=s);const r=t.getSize();if(r!==null){let u=t.getScale();Array.isArray(u)&&(u=(u[0]+u[1])/2),isNaN(u)&&(u=1);const d=r[0]*u,h=r[1]*u;n.graphicWidth=h,this.addGraphicOffset_(n,t,d,h)}let l=t.getRotation();return isNaN(l)&&(l=0),n.rotation=Yd(l),n}addGraphicOffset_(e,t,i,n){if(this.hasDefaultAnchor_(t))return;const s=t.getAnchor(),r=i/2-s[0],l=n/2-s[1];e.graphicXOffset=r,e.graphicYOffset=l}hasDefaultAnchor_(e){const t=e,i=t.anchor_[0]===.5&&t.anchor_[1]===.5,n=t.anchorOrigin_==="top-left",s=t.anchorXUnits_==="fraction",r=t.anchorYUnits_==="fraction";return i&&n&&s&&r}encodeVectorStylePolygon(e,t,i,n){const s={type:"polygon"};this.encodeVectorStyleFill(e,s,i),n!==null&&this.encodeVectorStyleStroke(e,s,n),t.push(s)}encodeVectorStyleStroke(e,t,i){const n=i.getColor();if(n!==null){console.assert(typeof n=="string"||Array.isArray(n));const d=ql(n);console.assert(Array.isArray(d),"only supporting stroke colors"),t.strokeColor=D4(d),t.strokeOpacity=d[3]}const s=i.getLineDash();s!==null&&(t.strokeDashstyle=s.join(" "));const r=i.getWidth();r!==void 0&&(t.strokeWidth=r);const l=i.getLineCap();l&&(t.strokeLinecap=l);const u=i.getLineJoin();u&&(t.strokeLinejoin=u)}encodeVectorStyleText(e,t,i){if(i.getText()){const s=sw(i.getFont()||"12px sans-serif"),r={type:"text",label:i.getText(),fontFamily:s?.family??"sans-serif",fontSize:s?.size??"12px",fontStyle:s?.style??"normal",fontWeight:s?.weight??"normal",labelXOffset:i.getOffsetX(),labelYOffset:-i.getOffsetY(),labelAlign:"cm"},l=i.getFill();l!==null&&(this.encodeVectorStyleFill(e,r,l),r.fontColor=r.fillColor);const u=i.getStroke();if(u!==null){const d=u.getColor();if(d){console.assert(typeof d=="string"||Array.isArray(d));const g=ql(d);console.assert(Array.isArray(g),"only supporting stroke colors"),r.haloColor=D4(g),r.haloOpacity=g[3]}const h=u.getWidth();h!==void 0&&(r.haloRadius=h)}this.customizer_.text(this.layerState_,e,r,i),t.push(r)}}featureCircleAsPolygon(e){return new Di({...e.getProperties(),geometry:kP(e.getGeometry(),FN.CIRCLE_TO_POLYGON_SIDES)})}}class ype{url;scratchCanvas=document.createElement("canvas");constructor(e){this.url=e}async encodeMap(e){const t=e.map.getView(),i=t.getCenter(),n=t.getProjection().getCode(),s=Yd(t.getRotation()),r=e.map.getLayerGroup(),l=await this.encodeLayerGroup(r,e.printResolution,e.customizer);return{center:i,dpi:e.dpi,projection:n,rotation:s,scale:e.scale,layers:l}}async encodeLayerGroup(e,t,i){const n=e.getLayerStatesArray().filter(i.layerFilter).sort((r,l)=>(r.zIndex||0)-(l.zIndex||0)).reverse(),s=[];for(const r of n){const l=await this.encodeLayerState(r,t,i);l&&(Array.isArray(l)?s.push(...l):s.push(l))}return s}async encodeLayerState(e,t,i){if(!e.visible||t<e.minResolution||t>=e.maxResolution)return null;const n=e.layer;if(n instanceof a1)return this.encodeImageLayerState(e,i);if(n instanceof bs){const s=new BN(e,i).encodeVectorLayer(t),r=e.layer.get("renderAsSvg");return r!==void 0&&(s.renderAsSvg=r),s}return n instanceof Xg?this.encodeTileLayerState(e,i):n instanceof mpe?await this.encodeMVTLayerState(e,t,i):null}encodeImageLayerState(e,t){const i=e.layer;return i instanceof a1||console.assert(i instanceof a1),i.getSource()instanceof Qw?this.encodeImageWmsLayerState(e,t):null}encodeImageWmsLayerState(e,t){const n=e.layer.getSource();console.assert(n instanceof Qw);const s=n.getUrl();return s!==void 0?this.encodeWmsLayerState(e,s,n.getParams(),t):null}encodeWmsLayerState(e,t,i,n){const s=e.layer,r={...i};return["SERVICE","REQUEST","FORMAT","LAYERS","VERSION","STYLES"].forEach(l=>delete r[l]),{name:s.get("name"),baseURL:t,imageFormat:i.FORMAT,layers:i.LAYERS.split(","),customParams:r,serverType:"mapserver",type:"wms",opacity:s.getOpacity(),version:i.VERSION,useNativeAngle:!0,styles:i.STYLES?.split(",")??[""]}}encodeTileLayerState(e,t){const i=e.layer;console.assert(i instanceof Xg);const n=i.getSource();return n instanceof eb?this.encodeTileWmtsLayerState(e,t):n instanceof H3?this.encodeTileWmsLayerState(e,t):n instanceof dpe?this.encodeOSMLayerState(e,t):null}encodeTileWmsLayerState(e,t){const i=e.layer;console.assert(i instanceof Xg);const n=i.getSource();console.assert(n instanceof H3);const s=n.getUrls();console.assert(!!s);const r=this.encodeWmsLayerState(e,s[0],n.getParams(),t);return t.wmsLayer(e,r,n),r}encodeOSMLayerState(e,t){const i=e.layer;return{type:"osm",baseURL:i.getSource().getUrls()[0],opacity:e.opacity,name:i.get("name")}}encodeTileWmtsLayerState(e,t){const i=e.layer;console.assert(i instanceof Xg);const n=i.getSource();console.assert(n instanceof eb);const s=n.getDimensions(),r=Object.keys(s),l={type:"wmts",baseURL:spe(n),dimensions:r,dimensionParams:s,imageFormat:n.getFormat(),name:i.get("name"),layer:n.getLayer(),matrices:ipe(n),matrixSet:n.getMatrixSet(),opacity:e.opacity,requestEncoding:n.getRequestEncoding(),style:n.getStyle(),version:n.getVersion()};return t.wmtsLayer(e,l,n),l}async encodeMVTLayerState(e,t,i){const n=e.layer,{MVTEncoder:s}=await Vx(async()=>{const{MVTEncoder:x}=await import("./main-DjAb-QeO.js");return{MVTEncoder:x}},[]),r=new s,l=i.getPrintExtent(),u=Oi(l)/t,d=Fr(l)/t,h=[u,d],g={layer:n,printExtent:i.getPrintExtent(),tileResolution:t,styleResolution:t,canvasSize:h};return(await r.encodeMVTLayer(g)).filter(x=>x.baseURL.length>6).map(x=>Object.assign({type:"image",name:n.get("name"),opacity:1,imageFormat:"image/png"},x))}async encodeAsImageLayer(e,t,i,n){const s=e.layer,r=i.getPrintExtent(),l=Oi(r)/t,u=Fr(r)/t,d=[l,u],h=nle(this.scratchCanvas.getContext("2d"),{size:d,pixelRatio:1}),g=lpe(r,t,d),y=s.getSource().getFeatures(),x=s.getStyleFunction();return ope(y,x,t,g,h,n),{type:"image",extent:r,imageFormat:"image/png",opacity:1,name:s.get("name"),baseURL:npe(this.scratchCanvas,s.getOpacity()).toDataURL("PNG")}}}const $3=39.37,J3=72;class bpe extends cf{constructor(e={}){super(e),this.context_=Jr(),this.context_.canvas.style.opacity="0.5",this.context_.canvas.style.position="absolute",this.size=void 0,this.rotation=void 0,this.scale=void 0}render(e){const t=this.context_.canvas.width=e.size[0],i=this.context_.canvas.height=e.size[1],n=[t/2,i/2];this.context_.beginPath(),this.context_.moveTo(0,0),this.context_.lineTo(t,0),this.context_.lineTo(t,i),this.context_.lineTo(0,i),this.context_.lineTo(0,0),this.context_.closePath();const s=this.getSize();if(!s)return;const r=s[1],l=s[0],u=this.getScale();if(!u)return;const d=e.viewState.resolution,h=l/J3/$3*u/d/2,g=r/J3/$3*u/d/2,y=this.getRotation()!==void 0?io(this.getRotation()):0,x=Math.sqrt(Math.pow(h,2)+Math.pow(g,2)),C=Math.atan(g/h)-y,I=Math.atan(h/g)-y,A=n[0]-Math.cos(C)*x,E=n[1]+Math.sin(C)*x,L=n[0]+Math.sin(I)*x,G=n[1]+Math.cos(I)*x,F=n[0]+Math.cos(C)*x,B=n[1]-Math.sin(C)*x,Z=n[0]-Math.sin(I)*x,Y=n[1]-Math.cos(I)*x;return this.context_.moveTo(A,E),this.context_.lineTo(L,G),this.context_.lineTo(F,B),this.context_.lineTo(Z,Y),this.context_.lineTo(A,E),this.context_.closePath(),this.context_.fillStyle="#000",this.context_.fill(),this.context_.canvas}getSize(){return this.size}getScale(){return this.scale}getRotation(){return this.rotation}setSize(e){this.size=e}setScale(e){this.scale=e}setRotation(e){this.rotation=e}}const vpe=rt({__name:"notification-item",props:{notification:{}},emits:["close"],setup(a){const e=a,t=Ai(!0);function i(n,s){setTimeout(()=>{t.value=!1},e.notification.duration),s()}return(n,s)=>{const r=El("dompurify-html");return U(),Lt(TC,{name:"fade-out",appear:"","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0",onEnter:i,onAfterLeave:s[0]||(s[0]=l=>n.$emit("close"))},{default:Ht(()=>[t.value?Sa((U(),se("div",{key:0,"data-cy":"notification",class:Fa(["lux-alert",`lux-${e.notification.type}`]),role:"alert"},null,2)),[[r,e.notification.message]]):Ge("",!0)]),_:1})}}}),xpe={key:0,class:"lux-notifications fixed w-[500px] top-10 left-1/2 ml-[-250px] z-[9999]","data-cy":"alertNotifications"},wpe=rt({__name:"alert-notifications",setup(a){const e=ar(),{notifications:t}=xt(e);function i(n){e.removeNotification(n)}return(n,s)=>(U(),Lt(vC,{to:"body"},[R(t).length?(U(),se("div",xpe,[(U(!0),se(Tt,null,gi(R(t),(r,l)=>(U(),Lt(vpe,{key:l,notification:r,onClose:()=>i(r.uuid)},null,8,["notification","onClose"]))),128))])):Ge("",!0)]))}}),Cpe=["title"],Ak=rt({__name:"background-selector-item",props:{bgTitle:{type:String,default:""},bgName:{type:String,default:""}},setup(a){const{t:e}=Ct(),t=a,i=St(()=>{const s=e(t.bgTitle),r=t.bgTitle.length>0,l=e(t.bgName);return`${s}${r?" - ":""}${l}`}),n=St(()=>`h-full w-full rounded-sm lux-bg-sel-icon
        lux-bg-sel-${t.bgName}
        bg-${t.bgName}_sm
        md:bg-${t.bgName}
        hd:bg-${t.bgName}_sm_hi
        hd_md:bg-${t.bgName}_hi`);return(s,r)=>(U(),se("button",{title:i.value,class:Fa(n.value)},null,10,Cpe))}}),Ipe={key:0,class:"flex flex-row-reverse"},Tk=rt({__name:"background-selector",props:{isOpen:{type:Boolean,default:!1}},setup(a){const{t:e,i18next:t}=Ct(),i=iI(),n=Vi(),s=Bn(),{bgLayer:r,is3dMesh:l}=xt(n),d=Ye(a.isOpen),h=Ye(!1),g=Ye([]),y=St(()=>r.value?.id??i.getNullId()),x=St(()=>g.value?.find(A=>A.id===y.value)?.name);Rt(()=>s.bgLayers,A=>{g.value=Dd().bg_layers.map(E=>Object.assign({id:E.id},A.find(L=>E.id===L.id),{name:E.icon_id}))},{immediate:!0}),Rt(()=>n.bgLayer,(A,E)=>{const L=n.layers;E===void 0&&A===null&&L?.length===0&&(i.setBgLayer(i.defaultSelectedBgId.value),A===null&&(h.value=!0))}),Rt([h,()=>t.isInitialized],([A,E])=>{A&&E&&ar().addNotification(e("Aucune couche n'tant dfinie pour cette carte, une couche de fond a automatiquement t ajoute."))});function C(A){i.setBgLayer(A.id),d.value=!1}function I(){d.value=!d.value}return(A,E)=>R(l)?Ge("",!0):(U(),se("div",Ipe,[P("div",{"data-cy":"selectedBg",class:Fa(["lux-bg-sel border border-black",d.value===!0?"hidden":"block"])},[gt(Ak,{"aria-expanded":d.value,"bg-title":"Select BG layer","bg-name":x.value,onClick:I},null,8,["aria-expanded","bg-name"])],2),P("div",{"data-cy":"available-bgs",class:Fa(d.value===!0?"flex flex-col md:flex-row":"hidden")},[(U(!0),se(Tt,null,gi(g.value,L=>(U(),se("div",{key:L.id,class:Fa(["lux-bg-sel hover:bg-cyan-600",L.id===y.value?"border-red-500 border-2":"border-black border"])},[gt(Ak,{"bg-name":L.name,onClick:G=>C(L)},null,8,["bg-name","onClick"])],2))),128))],2)]))}}),nf=Ao("info",()=>{const a=Ye(void 0),e=Ye(void 0),t=Ye(!1),i=Ye(!1),n=Ye(!0),s=Ye(!1),r=Ye(!1),l=Ye(void 0),u=Ye(void 0);return{locationInfoCoords:a,locationInfoInfos:e,hidePointer:t,isStreetviewActive:i,noDataAtLocation:n,streetViewLoading:s,panoPositionChanging:r,svFeature:l,routingFeatureTemp:u}}),Spe=1501,Ape="infoFeatureLayer";function Tpe(){const a=qa().getOlMap();let e,t=null;const{infoOpen:i}=xt(ri()),{locationInfoCoords:n,hidePointer:s}=xt(nf()),{clearContent:r}=ef(),l=new bs({source:new lo({features:[]}),zIndex:Spe});l.set("cyLayerType",Ape),h(l),a.addLayer(l),Rt(i,g=>{g||(n.value=void 0)}),Rt([n,s],([g,y])=>{if(l.getSource()?.clear(),g&&!y){i.value=!0;const x=new Di(new Ln(g));l.getSource()?.addFeature(x)}},{immediate:!0}),a.getViewport().addEventListener("contextmenu",g=>g.preventDefault()),xa(a,"pointerdown",g=>d(g));function u(g){return a.getEventCoordinate(g.originalEvent)}function d(g){t=g.pixel,g.originalEvent.button===2?(n.value=u(g),r()):g.originalEvent.pointerType==="touch"&&(window.clearTimeout(e),e=window.setTimeout(()=>{n.value=u(g),r()}))}xa(a,"pointerup",g=>{t&&g.originalEvent.button===0&&(s.value||(n.value=void 0)),window.clearTimeout(e),t=null}),xa(a,"pointermove",g=>{if(t!==null){const y=g.pixel,x=Math.abs(t[0]-y[0]),C=Math.abs(t[1]-y[1]);x+C>6&&(window.clearTimeout(e),t=null)}});function h(g){const y=new ji({color:[255,255,0,.6]}),x=new Li({color:[255,155,55,1],width:3}),C=new Qr({radius:10,fill:y,stroke:x});g.setStyle([new $a({image:C})])}}const Epe={"EPSG:2169":"Luref","EPSG:4326":"Lon/Lat WGS84","EPSG:4326:DMS":"Lon/Lat WGS84 DMS","EPSG:4326:DMm":"Lon/Lat WGS84 DM","EPSG:3263*":"WGS84 UTM"},Mpe=[46602,53725,106944,141219];async function Lpe(a,e){const t=fr(a,e,tu),[i,n,s]=(await Promise.allSettled([kpe(a),Y1(a),Ppe(t)])).map(r=>r.status==="fulfilled"?r.value:void 0);return{shortUrl:i,elevation:n,address:s,clickCoordinateLuref:t,isInBoxOfLidar:Rpe(t)}}function Rpe(a){return kc(Mpe,a)}async function kpe(a){return(await Kl.getShortUrl(a)).short_url.replace("http://g-o.lu/migration/","https://migration.geoportail.lu/s/")}async function Ppe(a){return(await(await fetch(`https://migration.geoportail.lu/geocode/reverse?easting=${a[0]}&northing=${a[1]}`)).json()).results[0]}const EE=Ao("print",()=>{const a=Ye(void 0),e=Ye(void 0);return{featureInfoPrintableRef:a,locationInfoPrintableRef:e}},{});function Gpe(a){return a&&`https://migration.geoportail.lu/qr?url=${a}`}function Wpe(a){return a!==void 0?`https://migration.geoportail.lu/qr?url=https://migration.geoportail.lu/qr?map_id=${a}`:void 0}function Ek(a){if(a)return a.startsWith("data:image")?a:(a.startsWith("/")&&"https://migration.geoportail.lu/".endsWith("/")&&(a="."+a),`https://migration.geoportail.lu/${a}`)}const Ope={class:"flex flex-row"},Fpe={class:"no-print grow-[2] flex flex-col justify-end content-end"},Npe={id:"short_url_title",class:"text-3xl text-white"},Bpe=["value"],Dpe=["src"],Vpe={class:"mt-5 text-3xl text-white"},Zpe={class:"lux-info-table"},zpe={style:{"text-align":"left"}},Upe={style:{"text-align":"left"}},Hpe=["disabled"],Xpe={class:"flex flex-wrap mt-1 gap-x-1"},qpe=["href"],Ype=["href"],Kpe=["href"],jpe={class:"create-itinerary-text"},$pe={class:"lux-panel-content relative grow p-2.5 bg-primary overflow-auto"},Jpe={class:"text-white"},Qpe={class:"flex justify-center flex-col items-center"},eye=["href"],tye=rt({__name:"location-info",setup(a){const{t:e}=Ct(),{locationInfoCoords:t,locationInfoInfos:i,routingFeatureTemp:n}=xt(nf()),{currentUser:s}=xt(Nu()),{addNotification:r}=ar(),l=qa().getOlMap(),u=Ye(),d=Ye(),h=Ye(),g=Ye(),y=Ye(),x=Ye({}),C=Ye(!1),I=Ye(!1),A=Ye("ACT"),E=Ye("base");Tpe(),L(t.value),Rt(t,L);async function L(ne){ne&&(i.value=await Lpe(ne,l.getView().getProjection()),u.value=i.value.shortUrl,d.value=Gpe(i.value.shortUrl),y.value=i.value.clickCoordinateLuref,x.value=Object.fromEntries(Object.entries(Epe).map(([le,_e])=>[_e,SY(ne,l.getView().getProjection(),le)])),h.value=i.value.elevation===null?"N/A":bT(i.value.elevation),g.value=i.value.address,I.value=i.value.isInBoxOfLidar)}Rt(s,ne=>{A.value=ne?.role||"anonymous",E.value=ne?.role||"base"});const{locationInfoPrintableRef:G}=xt(EE()),F=ne=>G.value=ne,B=St(()=>A.value==="ACT"),Z=St(()=>E.value==="etat"||E.value==="commune"||A.value==="MinTour"),Y=St(()=>!0),$=St(()=>y.value?`https://lidar.geoportail.lu?COORD_X=${y.value[0]}&COORD_Y=${y.value[1]}&COORD_Z=${parseInt(h.value||"0")}`:""),te=St(()=>y.value?`/getRapportForageVirtuel?x=${y.value[0]}&y=${y.value[1]}`:""),ce=St(()=>y.value?`http://streetsmart.cyclomedia.com/streetsmart?q=${y.value[0]};${y.value[1]}`:""),me=St(()=>y.value?`https://oblique.geoportail.lu/publication/viewer?x=${y.value[0]}&y=${y.value[1]}&crs=2169`:""),X=St(function(){const ne=y.value?fr(y.value,tu,Wu):void 0;return y.value?`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${(ne??[0,0])[1]},${(ne??[0,0])[0]}&heading=0&pitch=0&fov=90`:""});function de(){if(!t.value)return;const ne=new Di(new Ln(t.value));g.value&&g.value.distance<=100?ne.set("label",r9(g.value)):ne.set("label",x.value.Luref),n.value=ne}async function N(){C.value=!0;try{await Rre(te.value,"")}catch{r(e("An error occurred while downloading forage."),fi.ERROR)}finally{C.value=!1}}return Rt(C,ne=>{ne?l.getViewport().style.cursor="wait":l.getViewport().style.cursor=""}),(ne,le)=>(U(),se(Tt,null,[P("div",{ref:F},[P("div",Ope,[P("div",Fpe,[P("h3",Npe,K(R(e)("Short Url",{ns:"client"})),1),P("input",{"aria-labelledby":"short_url_title",onclick:"this.select();",class:"lux-input",type:"text",value:u.value,readonly:"true"},null,8,Bpe)]),d.value?(U(),se("img",{key:0,class:"mx-5 mt-5",src:d.value},null,8,Dpe)):Ge("",!0)]),P("div",null,[P("h3",Vpe,K(R(e)("Location Coordinates",{ns:"client"})),1),P("table",null,[P("tbody",Zpe,[(U(!0),se(Tt,null,gi(x.value,(_e,ke)=>(U(),se("tr",{key:ke},[P("th",null,K(R(e)(ke)),1),P("td",null,K(_e),1)]))),128)),P("tr",null,[P("th",null,K(R(e)("Elevation")),1),P("td",null,K(h.value),1)]),P("tr",null,[P("th",zpe,K(R(e)("Adresse la plus proche")),1),P("td",null,K(R(r9)(g.value)),1)]),P("tr",null,[P("th",Upe,K(R(e)("Distance approximative")),1),P("td",null,K(R(s_)(g.value?.distance||null,0)),1)])])])])]),P("div",null,[le[3]||(le[3]=P("hr",null,null,-1)),B.value?(U(),se("button",{key:0,disabled:C.value,class:"lux-btn mt-1",onClick:le[0]||(le[0]=_e=>N())},K(R(e)("Rapport forage virtuel")),9,Hpe)):Ge("",!0),P("div",Xpe,[I.value?(U(),se("a",{key:0,class:"lux-btn whitespace-nowrap",href:$.value,target:"_geoportal_ext_lidar"},K(R(e)("Lien vers la dmo lidar")),9,qpe)):Ge("",!0),Z.value?(U(),se("a",{key:1,class:"lux-btn whitespace-nowrap",href:ce.value,target:"_geoportal_ext_cyclomedia"},K(R(e)("Lien vers Cyclomdia")),9,Ype)):Ge("",!0),Y.value?(U(),se("a",{key:2,class:"lux-btn whitespace-nowrap",href:me.value,target:"_geoportal_ext_obliques"},K(R(e)("Images obliques")),9,Kpe)):Ge("",!0)]),P("div",null,[P("button",{class:"lux-btn mt-1",onClick:le[1]||(le[1]=_e=>de())},[P("span",jpe,K(R(e)("Ajouter tape  mon itinraire")),1)])]),P("div",$pe,[le[2]||(le[2]=P("hr",null,null,-1)),P("span",Jpe,K(R(e)("Suite  la modification des conditions d'utilisation de Google Street View, nous avons dsactiv son intgration dans la carte et proposons dsormais un lien direct vers le service de Google.")),1),P("div",Qpe,[P("a",{class:"lux-btn whitespace-nowrap",href:X.value,target:"_streetview_ext"},K(R(e)("Ouvrir streetView")),9,eye)])])])],64))}}),aye=["role"],iye={class:"bg-white shadow-modal rounded-lg overflow-hidden w-[700px]"},nye={class:"relative flex flex-row items-center py-2 px-4 border-b-[1px]"},rye={class:"text-xl grow"},sye={key:0,class:"p-[15px] border-t-[1px]"},oye={class:"flex flex-row justify-end"},E_=rt({__name:"modal-dialog",props:{footer:{type:Boolean,default:!0},maxHeight:{type:Boolean,default:!1},title:String,role:{type:String,default:"dialog"}},emits:["close"],setup(a){const{t:e}=Ct(),t=Ye();fn(()=>{t.value.focus()});const i=Ai(!0);function n(){i.value=!1}return(s,r)=>(U(),Lt(vC,{to:"body"},[r[5]||(r[5]=P("div",{class:"fixed inset-0 bg-gray-900 opacity-40 z-[1050]"},null,-1)),gt(TC,{appear:"","enter-active-class":"duration-200 ease-out","enter-from-class":"transform opacity-0 -translate-y-60","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"transform opacity-0 -translate-y-60",onAfterLeave:r[3]||(r[3]=l=>s.$emit("close"))},{default:Ht(()=>[i.value?(U(),se("div",{key:0,role:a.role,ref_key:"modal",ref:t,tabindex:"0",onKeydown:r[2]||(r[2]=$r(_r(l=>n(),["stop"]),["esc"])),class:"fixed inset-x-0 inset-y-8 flex items-start justify-center z-[1100] outline-none"},[P("div",iye,[P("div",nye,[P("h4",rye,K(a.title),1),P("button",{type:"button",class:"text-slate-400 text-2xl","data-dismiss":"modal","aria-label":"Close",onClick:r[0]||(r[0]=l=>n())},[...r[4]||(r[4]=[P("span",{"aria-hidden":"true"},"",-1)])])]),P("div",{class:Fa(["p-[15px] overflow-y-auto",a.maxHeight?"max-h-96":"max-h-full"])},[ja(s.$slots,"content")],2),a.footer?(U(),se("div",sye,[ja(s.$slots,"footer",{},()=>[P("div",oye,[P("button",{class:"lux-btn","data-dismiss":"modal",onClick:r[1]||(r[1]=l=>n())},K(R(e)("Close",{ns:"client"})),1)])])])):Ge("",!0)])],40,aye)):Ge("",!0)]),_:3})]))}});function lye(){const{t:a}=Ct();return{translate:(t,i)=>{const s=new DOMParser().parseFromString(t,"text/html");return s.querySelectorAll("[translate]").forEach(l=>{const u=l.textContent?.trim();u&&(l.textContent=a(u,i),l.removeAttribute("translate"))}),new XMLSerializer().serializeToString(s)}}}const uye={key:0,class:"lux-legend"},cye={key:1},Q3=rt({__name:"legend-item",props:{layer:{},displayEmptyLegend:{type:Boolean,default:!1}},emits:["hasLegend","removedLegend"],setup(a,{emit:e}){const{t,i18next:i}=Ct(),{translate:n}=lye(),s=Ye(),r=a,l=e;Rt(()=>i.language,()=>u()),fn(()=>u()),Nr(()=>l("removedLegend"));async function u(){s.value=await Tw.getLayerMetadata(r.layer.id,i.language),l("hasLegend",!!s.value?.hasLegend)}return(d,h)=>{const g=El("dompurify-html");return s.value&&s.value.legendHtml?.innerHTML?(U(),se("div",uye,[ja(d.$slots,"title"),Sa(P("div",null,null,512),[[g,R(n)(s.value.legendHtml?.innerHTML)]])])):!s.value?.hasLegend&&a.displayEmptyLegend?(U(),se("div",cye,K(R(t)("The legend is not available for this layer")),1)):Ge("",!0)}}}),dye={class:"font-bold"},hye={class:"col-span-2"},h0=rt({__name:"layer-metadata-item",props:{label:{},value:{}},setup(a){const e=a;return(t,i)=>(U(),se(Tt,null,[P("span",dye,K(e.label),1),P("span",hye,K(e.value),1)],64))}}),_ye={"data-cy":"metadata",class:"grid gap-2 grid-cols-3 pt-3 text-[13px] font-arial break-words"},mye={key:2,class:"col-span-3 grid gap-2 grid-cols-3"},fye={class:"font-bold"},gye={class:"col-span-2"},pye=["title"],yye=["title"],bye={key:4,class:"col-span-3"},vye={class:"font-bold"},xye={class:"col-span-2"},wye=["href"],Cye={key:7,class:"col-span-3 grid gap-2 grid-cols-3"},Iye={class:"font-bold"},Sye={class:"col-span-2"},Aye={key:0},Tye={key:1},Eye={key:2},Mye={key:3},Lye={key:4},Rye=["href"],kye={key:8,class:"grid gap-2 grid-cols-3 col-span-3"},Pye={class:"font-bold"},Gye={class:"col-span-2"},Wye=["href"],Oye={key:9,class:"col-span-3"},Z4=220,Fye=rt({__name:"layer-metadata",setup(a){const e=nI(),{metadataLayer:t}=xt(e),{t:i,i18next:n}=Ct(),s=Ye(),r=Ye(!0);Rt(t,async g=>{s.value=g?await Tw.getLayerMetadata(g.id,n.language):void 0,r.value=(s.value?.description?.length||0)<Z4}),Rt(()=>n.language,async g=>{t.value&&(s.value=await Tw.getLayerMetadata(t.value.id,g))});const l=St(()=>r.value?s.value?.description:s.value?.description?.slice(0,Z4));function u(){r.value=!0}function d(){r.value=!1}function h(){e.clearMetadataLayer()}return(g,y)=>{const x=El("dompurify-html");return s.value?(U(),Lt(E_,{key:0,footer:!1,"max-height":!0,title:R(i)(`${s.value.title}`,{ns:"client"}),onClose:h},{content:Ht(()=>[P("div",_ye,[s.value.name?(U(),Lt(h0,{key:0,label:R(i)("Name"),value:s.value.name},null,8,["label","value"])):Ge("",!0),s.value.serviceDescription?(U(),Lt(h0,{key:1,label:R(i)("Description du Service"),value:s.value.serviceDescription},null,8,["label","value"])):Ge("",!0),s.value.description?(U(),se("div",mye,[P("span",fye,K(R(i)("Description")),1),P("span",gye,[Sa(P("span",null,null,512),[[x,l.value]]),r.value?Ge("",!0):(U(),se("button",{key:0,title:R(i)("Display full description",{ns:"app"}),onClick:u,class:"text-secondary hover:underline"}," ... ",8,pye)),r.value&&(l.value?.length||0)>Z4?(U(),se("button",{key:1,title:R(i)("Hide full description",{ns:"app"}),onClick:d,class:"text-secondary hover:underline"}," - ",8,yye)):Ge("",!0)])])):Ge("",!0),s.value.legalConstraints?(U(),Lt(h0,{key:3,label:R(i)("Contrainte d'utilisation"),value:s.value.legalConstraints},null,8,["label","value"])):Ge("",!0),s.value.link?.length!==0?(U(),se("div",bye,[(U(!0),se(Tt,null,gi(s.value.link,C=>(U(),se("div",{class:"grid gap-2 grid-cols-3",key:C},[P("span",vye,K(R(i)("Url vers la resource")),1),P("span",xye,[P("a",{class:"text-secondary hover:underline",target:"_blank",href:C},K(C),9,wye)])]))),128))])):Ge("",!0),s.value.revisionDate?(U(),Lt(h0,{key:5,label:R(i)("Revision date"),value:R(yT)(s.value.revisionDate,R(n).language)},null,8,["label","value"])):Ge("",!0),s.value.keyword?(U(),Lt(h0,{key:6,label:R(i)("Keywords"),value:s.value.keyword?.join(",")},null,8,["label","value"])):Ge("",!0),s.value.responsibleParty?(U(),se("div",Cye,[P("div",Iye,K(R(i)("Contact")),1),P("div",Sye,[s.value.responsibleParty?.organisaton?(U(),se("p",Aye,K(s.value.responsibleParty?.organisaton),1)):Ge("",!0),s.value.responsibleParty?.name?(U(),se("p",Tye,K(s.value.responsibleParty?.name),1)):Ge("",!0),s.value.responsibleParty?.unknown?(U(),se("p",Eye,K(s.value.responsibleParty?.unknown),1)):Ge("",!0),s.value.responsibleParty?.address?(U(),se("p",Mye,K(s.value.responsibleParty?.address),1)):Ge("",!0),s.value.responsibleParty?.email?(U(),se("p",Lye,[P("a",{class:"text-secondary hover:underline",href:"mailto:"+s.value.responsibleParty?.email},K(s.value.responsibleParty?.email),9,Rye)])):Ge("",!0)])])):Ge("",!0),s.value.metadataLink?(U(),se("div",kye,[P("span",Pye,K(R(i)("Link to the metadata")),1),P("span",Gye,[P("a",{class:"text-secondary hover:underline",target:"_blank",href:s.value.metadataLink},K(R(i)("link")),9,Wye)])])):Ge("",!0),s.value.isError?(U(),se("div",Oye,K(R(i)("The metadata is right now not available")),1)):R(t)?(U(),Lt(Q3,{key:10,class:"mt-5 col-span-3",layer:R(t),displayEmptyLegend:!0},{title:Ht(()=>[P("h4",null,K(R(i)("Legend")),1)]),_:1},8,["layer"])):Ge("",!0)])]),_:1},8,["title"])):Ge("",!0)}}}),Nye={class:"flex flex-row flex-wrap pl-2.5","data-cy":"themeGrid"},Bye=["onClick"],Dye={class:"text-2xl absolute top-5"},Vye=rt({__name:"theme-grid",props:{themes:{}},setup(a){const{t:e}=Ct(),t=a;return(i,n)=>(U(),se("div",Nye,[(U(!0),se(Tt,null,gi(t.themes,s=>(U(),se("button",{class:Fa(["relative shrink-0 h-[150px] w-1/2 px-2.5 text-start text-gray-100/40 uppercase hover:bg-[#ccc]",`bg-${s.name}-primary hover:text-${s.name}-primary`]),key:s.id,onClick:r=>i.$emit("setTheme",s.name)},[P("div",Dye,K(R(e)(`${s.name}`)),1),P("div",{class:Fa(["text-6xl absolute bottom-1 after:font-icons",`after:content-${s.name}`])},null,2)],10,Bye))),128))]))}}),Zye=["aria-expanded"],zye={class:"py-0.5"},Uye={class:"px-1 py-0.5 shrink-0 flex flex-row text-[12px] bg-secondary text-white"},Hye={class:"py-[3px]"},Xye={class:"flex flex-row flex-wrap ml-1 w-12"},qye=rt({__name:"theme-selector-button",props:{themes:{},themeName:{},currentTheme:{},isOpen:{type:Boolean}},setup(a){const{t:e}=Ct(),t=a,i=St(()=>t.themes?.slice(0,8)||[]);return(n,s)=>(U(),se("button",{class:"w-full flex flex-row justify-between bg-tertiary text-white px-2 py-1.5 uppercase cursor-pointer hover:bg-white hover:text-primary","aria-expanded":t.isOpen},[P("span",zye,K(R(e)("Theme"))+": "+K(R(e)(`${t.themeName}`)),1),P("span",Uye,[P("span",Hye,K(R(e)("Changer")),1),P("span",Xye,[(U(!0),se(Tt,null,gi(i.value,r=>(U(),se("div",{class:Fa(`h-2.5 w-2.5 m-px bg-${r.name}-primary`),key:r.id},null,2))),128))])])],8,Zye))}});class Yye{setCurrentThemeColors(e){const t=document.querySelector(":root");["primary","secondary","tertiary","quaternary"].forEach(n=>{const s=getComputedStyle(t).getPropertyValue(`--${e.replace(/\s/g,"_")}-${n}`);t.style.setProperty(`--color-${n}`,s)})}}const Kye=new Yye,jye={key:0,class:"absolute inset-x-0 top-14 bottom-0 mt-1 bg-primary overflow-y-auto overflow-x-hidden"},$ye=rt({__name:"theme-selector",setup(a){const e=ri(),{setThemeGridOpen:t}=e,{themeGridOpen:i}=xt(e),n=Bn(),s=Al(),{theme:r,themes:l,themeName:u}=xt(n),d=St(()=>l.value?.filter(y=>y.metadata?.display_in_switcher===!0)||[]);Rt(u,y=>{y&&Kye.setCurrentThemeColors(y)},{immediate:!0});function h(){t(!i.value)}function g(y){s.setTheme(y),h()}return(y,x)=>(U(),se(Tt,null,[gt(qye,{"data-cy":"themeSelectorButton",onClick:h,themes:d.value,currentTheme:R(r),themeName:R(u),isOpen:R(i)},null,8,["themes","currentTheme","themeName","isOpen"]),R(i)?(U(),se("div",jye,[gt(Vye,{onSetTheme:g,themes:d.value},null,8,["themes"])])):Ge("",!0)],64))}}),Jye=["aria-expanded"],Qye={class:"leading-6"},e0e={key:0},Ex=rt({__name:"expandable-panel",props:{expanded:{type:Boolean},title:{}},emits:["togglePanel"],setup(a){return(e,t)=>(U(),se(Tt,null,[P("button",{onClick:t[0]||(t[0]=i=>e.$emit("togglePanel")),class:"group w-full text-left flex px-2 py-1.5 uppercase bg-tertiary","aria-expanded":a.expanded},[P("span",{class:Fa(["grow",a.expanded?"text-white":"text-secondary"])},K(a.title),3),P("span",Qye,[P("span",{class:Fa(["fa fa-sharp fa-solid group-hover:text-white text-primary",a.expanded?"fa-caret-up":"fa-caret-down"])},null,2)])],8,Jye),gt(TC,{name:"slide"},{default:Ht(()=>[a.expanded?(U(),se("div",e0e,[ja(e.$slots,"default")])):Ge("",!0)]),_:3})],64))}}),t0e={class:"mb-px",key:"node.id"},a0e=["data-cy"],i0e=["aria-expanded","data-cy"],n0e={class:"grow"},r0e={class:"leading-6"},s0e=["data-cy"],o0e={key:1,class:"flex text-tertiary pr-2"},l0e=["data-cy"],u0e=["data-cy"],c0e={class:"ml-1 hover:underline"},e5=rt({__name:"layer-tree-node",props:{node:{}},emits:["toggleLayer","toggleParent"],setup(a,{emit:e}){const t=a,i=e,{t:n}=Ct(),{setMetadataLayer:s}=nI(),r=!!t.node.children,l=t.node.depth===0,u=t.node.depth>=10,d=St(()=>n(t.node.name,{ns:"client"}));function h(y){i("toggleLayer",y)}function g(y){i("toggleParent",y)}return(y,x)=>{const C=zZ("layer-tree-node",!0);return r?(U(),se("div",t0e,[a.node.depth===1?(U(),se("div",{key:0,"data-cy":`parentLayerLabel-${a.node.id}`},[gt(Ex,{title:d.value,expanded:a.node.expanded,onTogglePanel:x[0]||(x[0]=I=>g(a.node))},null,8,["title","expanded"])],8,a0e)):a.node.depth>1&&!u?(U(),se("button",{key:1,class:Fa(["w-full text-left flex px-2 py-1.5 pl-2",a.node.expanded?"text-tertiary":"bg-white text-primary"]),"aria-expanded":a.node.expanded,onClick:x[1]||(x[1]=I=>g(a.node)),"data-cy":`parentLayerLabel-${a.node.id}`},[P("div",n0e,K(d.value),1),P("div",r0e,[P("div",{class:Fa(["fa-sharp fa-solid",a.node.expanded?"fa-minus":"fa-plus"])},null,2)])],10,i0e)):Ge("",!0),u?Ge("",!0):(U(),se("div",{key:2,class:Fa(["bg-secondary",[{"pl-2":a.node.depth>1},{"lux-collapse":!l},{expanded:!l&&a.node.expanded}]]),"data-cy":`subLayerLabel-${a.node.id}`},[(U(!0),se(Tt,null,gi(a.node.children,I=>(U(),Lt(C,{key:I.id,node:I,onToggleParent:x[2]||(x[2]=A=>g(A)),onToggleLayer:x[3]||(x[3]=A=>h(A))},null,8,["node"]))),128))],10,s0e))])):(U(),se("div",o0e,[P("button",{"data-cy":`layerMetadata-${a.node.id}`,class:"self-start before:text-[.85rem] before:transform before:translate-y-[.1rem] before:inline-block before:content-['\\f129'] fa-solid fa-fw fa-fh fa-info",onClick:x[4]||(x[4]=I=>R(s)(a.node))},null,8,l0e),P("button",{class:Fa(["w-full text-left",{"font-bold":a.node.checked}]),onClick:x[5]||(x[5]=I=>h(a.node)),"data-cy":`layerLabel-${a.node.id}`},[P("i",{class:Fa(["fa-solid",a.node.checked?"fa-check-square":"fa-square"])},null,2),P("span",c0e,K(d.value),1)],10,u0e)]))}}});function t5(a,e=0){const{name:t,id:i,children:n,metadata:s}=a;return{name:t,id:i,depth:e,children:n?.map(r=>t5(r,e+1)),checked:!1,expanded:s?.is_expanded||!1}}class d0e{toggleNode(e,t,i){return t?.id===e?{...t,[i]:!t[i]}:{...t,children:t.children?.map(n=>this.toggleNode(e,n,i))}}updateLayers(e,t){const{id:i}=e;if(e.children)return{...e,children:e.children.map(n=>this.updateLayers(n,t))};{const n=!!t?.find(s=>s.id===i);return{...e,checked:n}}}}const fp=new d0e,h0e={key:0,class:"mb-7"},_0e=rt({__name:"catalog-tree",setup(a){const e=Vi(),t=Bn(),i=no(),n=Ai(),s=Ai(),r=St(()=>!e.is3dActive||e.is3dActive&&!e.is3dMesh),{layerTrees_3d:l}=xt(t);Ar(u);function u(){if(t.theme&&e.layers){const g=n.value&&n.value.id===t.theme?.id?n.value:t5(t.theme);n.value=fp.updateLayers(g,e.layers)}}Ar(()=>{if(l.value){const g=s.value?s.value:t5(l.value);s.value=fp.updateLayers(g,e.layers3d)}});function d(g,y){const x=y?s:n;x.value=fp.toggleNode(g.id,x.value,"expanded")}function h(g,y){i.toggleLayer(+g.id,!g.checked,y,!0)}return(g,y)=>(U(),se("div",null,[s.value&&R(e).is3dActive?(U(),se("div",h0e,[(U(),Lt(e5,{node:s.value,key:s.value.id,onToggleParent:y[0]||(y[0]=x=>d(x,!0)),onToggleLayer:y[1]||(y[1]=x=>h(x,!0))},null,8,["node"]))])):Ge("",!0),n.value&&r.value?(U(),Lt(e5,{node:n.value,key:n.value.id,onToggleParent:y[2]||(y[2]=x=>d(x,!1)),onToggleLayer:y[3]||(y[3]=x=>h(x,!1))},null,8,["node"])):Ge("",!0)]))}}),m0e=rt({__name:"catalog-tab",setup(a){const{themeGridOpen:e}=xt(ri());return(t,i)=>(U(),se(Tt,null,[gt($ye),R(e)===!1?(U(),Lt(_0e,{key:0,"data-cy":"catalog",class:"pt-5 absolute inset-x-2.5 bg-primary overflow-y-auto overflow-x-hidden"})):Ge("",!0)],64))}});function Mk(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,i)}return t}function Fc(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mk(Object(t),!0).forEach(function(i){f0e(a,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Mk(Object(t)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))})}return a}function Mx(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mx=function(e){return typeof e}:Mx=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mx(a)}function f0e(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function Qd(){return Qd=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i])}return a},Qd.apply(this,arguments)}function g0e(a,e){if(a==null)return{};var t={},i=Object.keys(a),n,s;for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&(t[n]=a[n]);return t}function p0e(a,e){if(a==null)return{};var t=g0e(a,e),i,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);for(n=0;n<s.length;n++)i=s[n],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(a,i)&&(t[i]=a[i])}return t}var y0e="1.15.6";function Zd(a){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(a)}var lh=Zd(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Pb=Zd(/Edge/i),Lk=Zd(/firefox/i),o1=Zd(/safari/i)&&!Zd(/chrome/i)&&!Zd(/android/i),ME=Zd(/iP(ad|od|hone)/i),DN=Zd(/chrome/i)&&Zd(/android/i),VN={capture:!1,passive:!1};function zi(a,e,t){a.addEventListener(e,t,!lh&&VN)}function Ni(a,e,t){a.removeEventListener(e,t,!lh&&VN)}function aC(a,e){if(e){if(e[0]===">"&&(e=e.substring(1)),a)try{if(a.matches)return a.matches(e);if(a.msMatchesSelector)return a.msMatchesSelector(e);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(e)}catch{return!1}return!1}}function ZN(a){return a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode}function yu(a,e,t,i){if(a){t=t||document;do{if(e!=null&&(e[0]===">"?a.parentNode===t&&aC(a,e):aC(a,e))||i&&a===t)return a;if(a===t)break}while(a=ZN(a))}return null}var Rk=/\s+/g;function dl(a,e,t){if(a&&e)if(a.classList)a.classList[t?"add":"remove"](e);else{var i=(" "+a.className+" ").replace(Rk," ").replace(" "+e+" "," ");a.className=(i+(t?" "+e:"")).replace(Rk," ")}}function Ja(a,e,t){var i=a&&a.style;if(i){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(t=a.currentStyle),e===void 0?t:t[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=t+(typeof t=="string"?"":"px")}}function gp(a,e){var t="";if(typeof a=="string")t=a;else do{var i=Ja(a,"transform");i&&i!=="none"&&(t=i+" "+t)}while(!e&&(a=a.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(t)}function zN(a,e,t){if(a){var i=a.getElementsByTagName(e),n=0,s=i.length;if(t)for(;n<s;n++)t(i[n],n);return i}return[]}function Rc(){var a=document.scrollingElement;return a||document.documentElement}function jr(a,e,t,i,n){if(!(!a.getBoundingClientRect&&a!==window)){var s,r,l,u,d,h,g;if(a!==window&&a.parentNode&&a!==Rc()?(s=a.getBoundingClientRect(),r=s.top,l=s.left,u=s.bottom,d=s.right,h=s.height,g=s.width):(r=0,l=0,u=window.innerHeight,d=window.innerWidth,h=window.innerHeight,g=window.innerWidth),(e||t)&&a!==window&&(n=n||a.parentNode,!lh))do if(n&&n.getBoundingClientRect&&(Ja(n,"transform")!=="none"||t&&Ja(n,"position")!=="static")){var y=n.getBoundingClientRect();r-=y.top+parseInt(Ja(n,"border-top-width")),l-=y.left+parseInt(Ja(n,"border-left-width")),u=r+s.height,d=l+s.width;break}while(n=n.parentNode);if(i&&a!==window){var x=gp(n||a),C=x&&x.a,I=x&&x.d;x&&(r/=I,l/=C,g/=C,h/=I,u=r+h,d=l+g)}return{top:r,left:l,bottom:u,right:d,width:g,height:h}}}function kk(a,e,t){for(var i=i_(a,!0),n=jr(a)[e];i;){var s=jr(i)[t],r=void 0;if(r=n>=s,!r)return i;if(i===Rc())break;i=i_(i,!1)}return!1}function Pp(a,e,t,i){for(var n=0,s=0,r=a.children;s<r.length;){if(r[s].style.display!=="none"&&r[s]!==Qa.ghost&&(i||r[s]!==Qa.dragged)&&yu(r[s],t.draggable,a,!1)){if(n===e)return r[s];n++}s++}return null}function LE(a,e){for(var t=a.lastElementChild;t&&(t===Qa.ghost||Ja(t,"display")==="none"||e&&!aC(t,e));)t=t.previousElementSibling;return t||null}function Vl(a,e){var t=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)a.nodeName.toUpperCase()!=="TEMPLATE"&&a!==Qa.clone&&(!e||aC(a,e))&&t++;return t}function Pk(a){var e=0,t=0,i=Rc();if(a)do{var n=gp(a),s=n.a,r=n.d;e+=a.scrollLeft*s,t+=a.scrollTop*r}while(a!==i&&(a=a.parentNode));return[e,t]}function b0e(a,e){for(var t in a)if(a.hasOwnProperty(t)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===a[t][i])return Number(t)}return-1}function i_(a,e){if(!a||!a.getBoundingClientRect)return Rc();var t=a,i=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var n=Ja(t);if(t.clientWidth<t.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Rc();if(i||e)return t;i=!0}}while(t=t.parentNode);return Rc()}function v0e(a,e){if(a&&e)for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);return a}function z4(a,e){return Math.round(a.top)===Math.round(e.top)&&Math.round(a.left)===Math.round(e.left)&&Math.round(a.height)===Math.round(e.height)&&Math.round(a.width)===Math.round(e.width)}var l1;function UN(a,e){return function(){if(!l1){var t=arguments,i=this;t.length===1?a.call(i,t[0]):a.apply(i,t),l1=setTimeout(function(){l1=void 0},e)}}}function x0e(){clearTimeout(l1),l1=void 0}function HN(a,e,t){a.scrollLeft+=e,a.scrollTop+=t}function XN(a){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(a).cloneNode(!0):t?t(a).clone(!0)[0]:a.cloneNode(!0)}function qN(a,e,t){var i={};return Array.from(a.children).forEach(function(n){var s,r,l,u;if(!(!yu(n,e.draggable,a,!1)||n.animated||n===t)){var d=jr(n);i.left=Math.min((s=i.left)!==null&&s!==void 0?s:1/0,d.left),i.top=Math.min((r=i.top)!==null&&r!==void 0?r:1/0,d.top),i.right=Math.max((l=i.right)!==null&&l!==void 0?l:-1/0,d.right),i.bottom=Math.max((u=i.bottom)!==null&&u!==void 0?u:-1/0,d.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Yo="Sortable"+new Date().getTime();function w0e(){var a=[],e;return{captureAnimationState:function(){if(a=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(n){if(!(Ja(n,"display")==="none"||n===Qa.ghost)){a.push({target:n,rect:jr(n)});var s=Fc({},a[a.length-1].rect);if(n.thisAnimationDuration){var r=gp(n,!0);r&&(s.top-=r.f,s.left-=r.e)}n.fromRect=s}})}},addAnimationState:function(i){a.push(i)},removeAnimationState:function(i){a.splice(b0e(a,{target:i}),1)},animateAll:function(i){var n=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var s=!1,r=0;a.forEach(function(l){var u=0,d=l.target,h=d.fromRect,g=jr(d),y=d.prevFromRect,x=d.prevToRect,C=l.rect,I=gp(d,!0);I&&(g.top-=I.f,g.left-=I.e),d.toRect=g,d.thisAnimationDuration&&z4(y,g)&&!z4(h,g)&&(C.top-g.top)/(C.left-g.left)===(h.top-g.top)/(h.left-g.left)&&(u=I0e(C,y,x,n.options)),z4(g,h)||(d.prevFromRect=h,d.prevToRect=g,u||(u=n.options.animation),n.animate(d,C,g,u)),u&&(s=!0,r=Math.max(r,u),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},u),d.thisAnimationDuration=u)}),clearTimeout(e),s?e=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),a=[]},animate:function(i,n,s,r){if(r){Ja(i,"transition",""),Ja(i,"transform","");var l=gp(this.el),u=l&&l.a,d=l&&l.d,h=(n.left-s.left)/(u||1),g=(n.top-s.top)/(d||1);i.animatingX=!!h,i.animatingY=!!g,Ja(i,"transform","translate3d("+h+"px,"+g+"px,0)"),this.forRepaintDummy=C0e(i),Ja(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),Ja(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){Ja(i,"transition",""),Ja(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function C0e(a){return a.offsetWidth}function I0e(a,e,t,i){return Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*i.animation}var Ig=[],U4={initializeByDefault:!0},Gb={mount:function(e){for(var t in U4)U4.hasOwnProperty(t)&&!(t in e)&&(e[t]=U4[t]);Ig.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ig.push(e)},pluginEvent:function(e,t,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var s=e+"Global";Ig.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][s]&&t[r.pluginName][s](Fc({sortable:t},i)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](Fc({sortable:t},i)))})},initializePlugins:function(e,t,i,n){Ig.forEach(function(l){var u=l.pluginName;if(!(!e.options[u]&&!l.initializeByDefault)){var d=new l(e,t,e.options);d.sortable=e,d.options=e.options,e[u]=d,Qd(i,d.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var r=this.modifyOption(e,s,e.options[s]);typeof r<"u"&&(e.options[s]=r)}},getEventProperties:function(e,t){var i={};return Ig.forEach(function(n){typeof n.eventProperties=="function"&&Qd(i,n.eventProperties.call(t[n.pluginName],e))}),i},modifyOption:function(e,t,i){var n;return Ig.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(n=s.optionListeners[t].call(e[s.pluginName],i))}),n}};function S0e(a){var e=a.sortable,t=a.rootEl,i=a.name,n=a.targetEl,s=a.cloneEl,r=a.toEl,l=a.fromEl,u=a.oldIndex,d=a.newIndex,h=a.oldDraggableIndex,g=a.newDraggableIndex,y=a.originalEvent,x=a.putSortable,C=a.extraEventProperties;if(e=e||t&&t[Yo],!!e){var I,A=e.options,E="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!lh&&!Pb?I=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(I=document.createEvent("Event"),I.initEvent(i,!0,!0)),I.to=r||t,I.from=l||t,I.item=n||t,I.clone=s,I.oldIndex=u,I.newIndex=d,I.oldDraggableIndex=h,I.newDraggableIndex=g,I.originalEvent=y,I.pullMode=x?x.lastPutMode:void 0;var L=Fc(Fc({},C),Gb.getEventProperties(i,e));for(var G in L)I[G]=L[G];t&&t.dispatchEvent(I),A[E]&&A[E].call(e,I)}}var A0e=["evt"],No=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.evt,s=p0e(i,A0e);Gb.pluginEvent.bind(Qa)(e,t,Fc({dragEl:sa,parentEl:wr,ghostEl:hi,rootEl:tr,nextEl:Cm,lastDownEl:Lx,cloneEl:cr,cloneHidden:qh,dragStarted:W0,putSortable:Ts,activeSortable:Qa.active,originalEvent:n,oldIndex:qg,oldDraggableIndex:u1,newIndex:hl,newDraggableIndex:zh,hideGhostForTarget:$N,unhideGhostForTarget:JN,cloneNowHidden:function(){qh=!0},cloneNowShown:function(){qh=!1},dispatchSortableEvent:function(l){po({sortable:t,name:l,originalEvent:n})}},s))};function po(a){S0e(Fc({putSortable:Ts,cloneEl:cr,targetEl:sa,rootEl:tr,oldIndex:qg,oldDraggableIndex:u1,newIndex:hl,newDraggableIndex:zh},a))}var sa,wr,hi,tr,Cm,Lx,cr,qh,qg,hl,u1,zh,Z2,Ts,Wg=!1,iC=!1,nC=[],gm,mu,H4,X4,Gk,Wk,W0,Sg,c1,d1=!1,z2=!1,Rx,Us,q4=[],a5=!1,rC=[],gI=typeof document<"u",U2=ME,Ok=Pb||lh?"cssFloat":"float",T0e=gI&&!DN&&!ME&&"draggable"in document.createElement("div"),YN=(function(){if(gI){if(lh)return!1;var a=document.createElement("x");return a.style.cssText="pointer-events:auto",a.style.pointerEvents==="auto"}})(),KN=function(e,t){var i=Ja(e),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=Pp(e,0,t),r=Pp(e,1,t),l=s&&Ja(s),u=r&&Ja(r),d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+jr(s).width,h=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+jr(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&l.float&&l.float!=="none"){var g=l.float==="left"?"left":"right";return r&&(u.clear==="both"||u.clear===g)?"vertical":"horizontal"}return s&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||d>=n&&i[Ok]==="none"||r&&i[Ok]==="none"&&d+h>n)?"vertical":"horizontal"},E0e=function(e,t,i){var n=i?e.left:e.top,s=i?e.right:e.bottom,r=i?e.width:e.height,l=i?t.left:t.top,u=i?t.right:t.bottom,d=i?t.width:t.height;return n===l||s===u||n+r/2===l+d/2},M0e=function(e,t){var i;return nC.some(function(n){var s=n[Yo].options.emptyInsertThreshold;if(!(!s||LE(n))){var r=jr(n),l=e>=r.left-s&&e<=r.right+s,u=t>=r.top-s&&t<=r.bottom+s;if(l&&u)return i=n}}),i},jN=function(e){function t(s,r){return function(l,u,d,h){var g=l.options.group.name&&u.options.group.name&&l.options.group.name===u.options.group.name;if(s==null&&(r||g))return!0;if(s==null||s===!1)return!1;if(r&&s==="clone")return s;if(typeof s=="function")return t(s(l,u,d,h),r)(l,u,d,h);var y=(r?l:u).options.group.name;return s===!0||typeof s=="string"&&s===y||s.join&&s.indexOf(y)>-1}}var i={},n=e.group;(!n||Mx(n)!="object")&&(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i},$N=function(){!YN&&hi&&Ja(hi,"display","none")},JN=function(){!YN&&hi&&Ja(hi,"display","")};gI&&!DN&&document.addEventListener("click",function(a){if(iC)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),iC=!1,!1},!0);var pm=function(e){if(sa){e=e.touches?e.touches[0]:e;var t=M0e(e.clientX,e.clientY);if(t){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[Yo]._onDragOver(i)}}},L0e=function(e){sa&&sa.parentNode[Yo]._isOutsideThisEl(e.target)};function Qa(a,e){if(!(a&&a.nodeType&&a.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a,this.options=e=Qd({},e),a[Yo]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return KN(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,l){r.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Qa.supportPointer!==!1&&"PointerEvent"in window&&(!o1||ME),emptyInsertThreshold:5};Gb.initializePlugins(this,a,t);for(var i in t)!(i in e)&&(e[i]=t[i]);jN(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:T0e,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?zi(a,"pointerdown",this._onTapStart):(zi(a,"mousedown",this._onTapStart),zi(a,"touchstart",this._onTapStart)),this.nativeDraggable&&(zi(a,"dragover",this),zi(a,"dragenter",this)),nC.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Qd(this,w0e())}Qa.prototype={constructor:Qa,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Sg=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,sa):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,n=this.options,s=n.preventOnFilter,r=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(l||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,h=n.filter;if(N0e(i),!sa&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||n.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&o1&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=yu(u,n.draggable,i,!1),!(u&&u.animated)&&Lx!==u)){if(qg=Vl(u),u1=Vl(u,n.draggable),typeof h=="function"){if(h.call(this,e,u,this)){po({sortable:t,rootEl:d,name:"filter",targetEl:u,toEl:i,fromEl:i}),No("filter",t,{evt:e}),s&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(g){if(g=yu(d,g.trim(),i,!1),g)return po({sortable:t,rootEl:g,name:"filter",targetEl:u,fromEl:i,toEl:i}),No("filter",t,{evt:e}),!0}),h)){s&&e.preventDefault();return}n.handle&&!yu(d,n.handle,i,!1)||this._prepareDragStart(e,l,u)}}},_prepareDragStart:function(e,t,i){var n=this,s=n.el,r=n.options,l=s.ownerDocument,u;if(i&&!sa&&i.parentNode===s){var d=jr(i);if(tr=s,sa=i,wr=sa.parentNode,Cm=sa.nextSibling,Lx=i,Z2=r.group,Qa.dragged=sa,gm={target:sa,clientX:(t||e).clientX,clientY:(t||e).clientY},Gk=gm.clientX-d.left,Wk=gm.clientY-d.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,sa.style["will-change"]="all",u=function(){if(No("delayEnded",n,{evt:e}),Qa.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Lk&&n.nativeDraggable&&(sa.draggable=!0),n._triggerDragStart(e,t),po({sortable:n,name:"choose",originalEvent:e}),dl(sa,r.chosenClass,!0)},r.ignore.split(",").forEach(function(h){zN(sa,h.trim(),Y4)}),zi(l,"dragover",pm),zi(l,"mousemove",pm),zi(l,"touchmove",pm),r.supportPointer?(zi(l,"pointerup",n._onDrop),!this.nativeDraggable&&zi(l,"pointercancel",n._onDrop)):(zi(l,"mouseup",n._onDrop),zi(l,"touchend",n._onDrop),zi(l,"touchcancel",n._onDrop)),Lk&&this.nativeDraggable&&(this.options.touchStartThreshold=4,sa.draggable=!0),No("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Pb||lh))){if(Qa.eventCanceled){this._onDrop();return}r.supportPointer?(zi(l,"pointerup",n._disableDelayedDrag),zi(l,"pointercancel",n._disableDelayedDrag)):(zi(l,"mouseup",n._disableDelayedDrag),zi(l,"touchend",n._disableDelayedDrag),zi(l,"touchcancel",n._disableDelayedDrag)),zi(l,"mousemove",n._delayedDragTouchMoveHandler),zi(l,"touchmove",n._delayedDragTouchMoveHandler),r.supportPointer&&zi(l,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(u,r.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){sa&&Y4(sa),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Ni(e,"mouseup",this._disableDelayedDrag),Ni(e,"touchend",this._disableDelayedDrag),Ni(e,"touchcancel",this._disableDelayedDrag),Ni(e,"pointerup",this._disableDelayedDrag),Ni(e,"pointercancel",this._disableDelayedDrag),Ni(e,"mousemove",this._delayedDragTouchMoveHandler),Ni(e,"touchmove",this._delayedDragTouchMoveHandler),Ni(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?zi(document,"pointermove",this._onTouchMove):t?zi(document,"touchmove",this._onTouchMove):zi(document,"mousemove",this._onTouchMove):(zi(sa,"dragend",this),zi(tr,"dragstart",this._onDragStart));try{document.selection?kx(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Wg=!1,tr&&sa){No("dragStarted",this,{evt:t}),this.nativeDraggable&&zi(document,"dragover",L0e);var i=this.options;!e&&dl(sa,i.dragClass,!1),dl(sa,i.ghostClass,!0),Qa.active=this,e&&this._appendGhost(),po({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(mu){this._lastX=mu.clientX,this._lastY=mu.clientY,$N();for(var e=document.elementFromPoint(mu.clientX,mu.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(mu.clientX,mu.clientY),e!==t);)t=e;if(sa.parentNode[Yo]._isOutsideThisEl(e),t)do{if(t[Yo]){var i=void 0;if(i=t[Yo]._onDragOver({clientX:mu.clientX,clientY:mu.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=ZN(t));JN()}},_onTouchMove:function(e){if(gm){var t=this.options,i=t.fallbackTolerance,n=t.fallbackOffset,s=e.touches?e.touches[0]:e,r=hi&&gp(hi,!0),l=hi&&r&&r.a,u=hi&&r&&r.d,d=U2&&Us&&Pk(Us),h=(s.clientX-gm.clientX+n.x)/(l||1)+(d?d[0]-q4[0]:0)/(l||1),g=(s.clientY-gm.clientY+n.y)/(u||1)+(d?d[1]-q4[1]:0)/(u||1);if(!Qa.active&&!Wg){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(hi){r?(r.e+=h-(H4||0),r.f+=g-(X4||0)):r={a:1,b:0,c:0,d:1,e:h,f:g};var y="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");Ja(hi,"webkitTransform",y),Ja(hi,"mozTransform",y),Ja(hi,"msTransform",y),Ja(hi,"transform",y),H4=h,X4=g,mu=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!hi){var e=this.options.fallbackOnBody?document.body:tr,t=jr(sa,!0,U2,!0,e),i=this.options;if(U2){for(Us=e;Ja(Us,"position")==="static"&&Ja(Us,"transform")==="none"&&Us!==document;)Us=Us.parentNode;Us!==document.body&&Us!==document.documentElement?(Us===document&&(Us=Rc()),t.top+=Us.scrollTop,t.left+=Us.scrollLeft):Us=Rc(),q4=Pk(Us)}hi=sa.cloneNode(!0),dl(hi,i.ghostClass,!1),dl(hi,i.fallbackClass,!0),dl(hi,i.dragClass,!0),Ja(hi,"transition",""),Ja(hi,"transform",""),Ja(hi,"box-sizing","border-box"),Ja(hi,"margin",0),Ja(hi,"top",t.top),Ja(hi,"left",t.left),Ja(hi,"width",t.width),Ja(hi,"height",t.height),Ja(hi,"opacity","0.8"),Ja(hi,"position",U2?"absolute":"fixed"),Ja(hi,"zIndex","100000"),Ja(hi,"pointerEvents","none"),Qa.ghost=hi,e.appendChild(hi),Ja(hi,"transform-origin",Gk/parseInt(hi.style.width)*100+"% "+Wk/parseInt(hi.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,n=e.dataTransfer,s=i.options;if(No("dragStart",this,{evt:e}),Qa.eventCanceled){this._onDrop();return}No("setupClone",this),Qa.eventCanceled||(cr=XN(sa),cr.removeAttribute("id"),cr.draggable=!1,cr.style["will-change"]="",this._hideClone(),dl(cr,this.options.chosenClass,!1),Qa.clone=cr),i.cloneId=kx(function(){No("clone",i),!Qa.eventCanceled&&(i.options.removeCloneOnHide||tr.insertBefore(cr,sa),i._hideClone(),po({sortable:i,name:"clone"}))}),!t&&dl(sa,s.dragClass,!0),t?(iC=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Ni(document,"mouseup",i._onDrop),Ni(document,"touchend",i._onDrop),Ni(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(i,n,sa)),zi(document,"drop",i),Ja(sa,"transform","translateZ(0)")),Wg=!0,i._dragStartId=kx(i._dragStarted.bind(i,t,e)),zi(document,"selectstart",i),W0=!0,window.getSelection().removeAllRanges(),o1&&Ja(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,i=e.target,n,s,r,l=this.options,u=l.group,d=Qa.active,h=Z2===u,g=l.sort,y=Ts||d,x,C=this,I=!1;if(a5)return;function A(ke,Ie){No(ke,C,Fc({evt:e,isOwner:h,axis:x?"vertical":"horizontal",revert:r,dragRect:n,targetRect:s,canSort:g,fromSortable:y,target:i,completed:L,onMove:function(Q,J){return H2(tr,t,sa,n,Q,jr(Q),e,J)},changed:G},Ie))}function E(){A("dragOverAnimationCapture"),C.captureAnimationState(),C!==y&&y.captureAnimationState()}function L(ke){return A("dragOverCompleted",{insertion:ke}),ke&&(h?d._hideClone():d._showClone(C),C!==y&&(dl(sa,Ts?Ts.options.ghostClass:d.options.ghostClass,!1),dl(sa,l.ghostClass,!0)),Ts!==C&&C!==Qa.active?Ts=C:C===Qa.active&&Ts&&(Ts=null),y===C&&(C._ignoreWhileAnimating=i),C.animateAll(function(){A("dragOverAnimationComplete"),C._ignoreWhileAnimating=null}),C!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(i===sa&&!sa.animated||i===t&&!i.animated)&&(Sg=null),!l.dragoverBubble&&!e.rootEl&&i!==document&&(sa.parentNode[Yo]._isOutsideThisEl(e.target),!ke&&pm(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),I=!0}function G(){hl=Vl(sa),zh=Vl(sa,l.draggable),po({sortable:C,name:"change",toEl:t,newIndex:hl,newDraggableIndex:zh,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=yu(i,l.draggable,t,!0),A("dragOver"),Qa.eventCanceled)return I;if(sa.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||C._ignoreWhileAnimating===i)return L(!1);if(iC=!1,d&&!l.disabled&&(h?g||(r=wr!==tr):Ts===this||(this.lastPutMode=Z2.checkPull(this,d,sa,e))&&u.checkPut(this,d,sa,e))){if(x=this._getDirection(e,i)==="vertical",n=jr(sa),A("dragOverValid"),Qa.eventCanceled)return I;if(r)return wr=tr,E(),this._hideClone(),A("revert"),Qa.eventCanceled||(Cm?tr.insertBefore(sa,Cm):tr.appendChild(sa)),L(!0);var F=LE(t,l.draggable);if(!F||G0e(e,x,this)&&!F.animated){if(F===sa)return L(!1);if(F&&t===e.target&&(i=F),i&&(s=jr(i)),H2(tr,t,sa,n,i,s,e,!!i)!==!1)return E(),F&&F.nextSibling?t.insertBefore(sa,F.nextSibling):t.appendChild(sa),wr=t,G(),L(!0)}else if(F&&P0e(e,x,this)){var B=Pp(t,0,l,!0);if(B===sa)return L(!1);if(i=B,s=jr(i),H2(tr,t,sa,n,i,s,e,!1)!==!1)return E(),t.insertBefore(sa,B),wr=t,G(),L(!0)}else if(i.parentNode===t){s=jr(i);var Z=0,Y,$=sa.parentNode!==t,te=!E0e(sa.animated&&sa.toRect||n,i.animated&&i.toRect||s,x),ce=x?"top":"left",me=kk(i,"top","top")||kk(sa,"top","top"),X=me?me.scrollTop:void 0;Sg!==i&&(Y=s[ce],d1=!1,z2=!te&&l.invertSwap||$),Z=W0e(e,i,s,x,te?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,z2,Sg===i);var de;if(Z!==0){var N=Vl(sa);do N-=Z,de=wr.children[N];while(de&&(Ja(de,"display")==="none"||de===hi))}if(Z===0||de===i)return L(!1);Sg=i,c1=Z;var ne=i.nextElementSibling,le=!1;le=Z===1;var _e=H2(tr,t,sa,n,i,s,e,le);if(_e!==!1)return(_e===1||_e===-1)&&(le=_e===1),a5=!0,setTimeout(k0e,30),E(),le&&!ne?t.appendChild(sa):i.parentNode.insertBefore(sa,le?ne:i),me&&HN(me,0,X-me.scrollTop),wr=sa.parentNode,Y!==void 0&&!z2&&(Rx=Math.abs(Y-jr(i)[ce])),G(),L(!0)}if(t.contains(sa))return L(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ni(document,"mousemove",this._onTouchMove),Ni(document,"touchmove",this._onTouchMove),Ni(document,"pointermove",this._onTouchMove),Ni(document,"dragover",pm),Ni(document,"mousemove",pm),Ni(document,"touchmove",pm)},_offUpEvents:function(){var e=this.el.ownerDocument;Ni(e,"mouseup",this._onDrop),Ni(e,"touchend",this._onDrop),Ni(e,"pointerup",this._onDrop),Ni(e,"pointercancel",this._onDrop),Ni(e,"touchcancel",this._onDrop),Ni(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;if(hl=Vl(sa),zh=Vl(sa,i.draggable),No("drop",this,{evt:e}),wr=sa&&sa.parentNode,hl=Vl(sa),zh=Vl(sa,i.draggable),Qa.eventCanceled){this._nulling();return}Wg=!1,z2=!1,d1=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),i5(this.cloneId),i5(this._dragStartId),this.nativeDraggable&&(Ni(document,"drop",this),Ni(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),o1&&Ja(document.body,"user-select",""),Ja(sa,"transform",""),e&&(W0&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),hi&&hi.parentNode&&hi.parentNode.removeChild(hi),(tr===wr||Ts&&Ts.lastPutMode!=="clone")&&cr&&cr.parentNode&&cr.parentNode.removeChild(cr),sa&&(this.nativeDraggable&&Ni(sa,"dragend",this),Y4(sa),sa.style["will-change"]="",W0&&!Wg&&dl(sa,Ts?Ts.options.ghostClass:this.options.ghostClass,!1),dl(sa,this.options.chosenClass,!1),po({sortable:this,name:"unchoose",toEl:wr,newIndex:null,newDraggableIndex:null,originalEvent:e}),tr!==wr?(hl>=0&&(po({rootEl:wr,name:"add",toEl:wr,fromEl:tr,originalEvent:e}),po({sortable:this,name:"remove",toEl:wr,originalEvent:e}),po({rootEl:wr,name:"sort",toEl:wr,fromEl:tr,originalEvent:e}),po({sortable:this,name:"sort",toEl:wr,originalEvent:e})),Ts&&Ts.save()):hl!==qg&&hl>=0&&(po({sortable:this,name:"update",toEl:wr,originalEvent:e}),po({sortable:this,name:"sort",toEl:wr,originalEvent:e})),Qa.active&&((hl==null||hl===-1)&&(hl=qg,zh=u1),po({sortable:this,name:"end",toEl:wr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){No("nulling",this),tr=sa=wr=hi=Cm=cr=Lx=qh=gm=mu=W0=hl=zh=qg=u1=Sg=c1=Ts=Z2=Qa.dragged=Qa.ghost=Qa.clone=Qa.active=null,rC.forEach(function(e){e.checked=!0}),rC.length=H4=X4=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":sa&&(this._onDragOver(e),R0e(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,i=this.el.children,n=0,s=i.length,r=this.options;n<s;n++)t=i[n],yu(t,r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||F0e(t));return e},sort:function(e,t){var i={},n=this.el;this.toArray().forEach(function(s,r){var l=n.children[r];yu(l,this.options.draggable,n,!1)&&(i[s]=l)},this),t&&this.captureAnimationState(),e.forEach(function(s){i[s]&&(n.removeChild(i[s]),n.appendChild(i[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return yu(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(t===void 0)return i[e];var n=Gb.modifyOption(this,e,t);typeof n<"u"?i[e]=n:i[e]=t,e==="group"&&jN(i)},destroy:function(){No("destroy",this);var e=this.el;e[Yo]=null,Ni(e,"mousedown",this._onTapStart),Ni(e,"touchstart",this._onTapStart),Ni(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ni(e,"dragover",this),Ni(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),nC.splice(nC.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!qh){if(No("hideClone",this),Qa.eventCanceled)return;Ja(cr,"display","none"),this.options.removeCloneOnHide&&cr.parentNode&&cr.parentNode.removeChild(cr),qh=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(qh){if(No("showClone",this),Qa.eventCanceled)return;sa.parentNode==tr&&!this.options.group.revertClone?tr.insertBefore(cr,sa):Cm?tr.insertBefore(cr,Cm):tr.appendChild(cr),this.options.group.revertClone&&this.animate(sa,cr),Ja(cr,"display",""),qh=!1}}};function R0e(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault()}function H2(a,e,t,i,n,s,r,l){var u,d=a[Yo],h=d.options.onMove,g;return window.CustomEvent&&!lh&&!Pb?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=a,u.dragged=t,u.draggedRect=i,u.related=n||e,u.relatedRect=s||jr(e),u.willInsertAfter=l,u.originalEvent=r,a.dispatchEvent(u),h&&(g=h.call(d,u,r)),g}function Y4(a){a.draggable=!1}function k0e(){a5=!1}function P0e(a,e,t){var i=jr(Pp(t.el,0,t.options,!0)),n=qN(t.el,t.options,hi),s=10;return e?a.clientX<n.left-s||a.clientY<i.top&&a.clientX<i.right:a.clientY<n.top-s||a.clientY<i.bottom&&a.clientX<i.left}function G0e(a,e,t){var i=jr(LE(t.el,t.options.draggable)),n=qN(t.el,t.options,hi),s=10;return e?a.clientX>n.right+s||a.clientY>i.bottom&&a.clientX>i.left:a.clientY>n.bottom+s||a.clientX>i.right&&a.clientY>i.top}function W0e(a,e,t,i,n,s,r,l){var u=i?a.clientY:a.clientX,d=i?t.height:t.width,h=i?t.top:t.left,g=i?t.bottom:t.right,y=!1;if(!r){if(l&&Rx<d*n){if(!d1&&(c1===1?u>h+d*s/2:u<g-d*s/2)&&(d1=!0),d1)y=!0;else if(c1===1?u<h+Rx:u>g-Rx)return-c1}else if(u>h+d*(1-n)/2&&u<g-d*(1-n)/2)return O0e(e)}return y=y||r,y&&(u<h+d*s/2||u>g-d*s/2)?u>h+d/2?1:-1:0}function O0e(a){return Vl(sa)<Vl(a)?1:-1}function F0e(a){for(var e=a.tagName+a.className+a.src+a.href+a.textContent,t=e.length,i=0;t--;)i+=e.charCodeAt(t);return i.toString(36)}function N0e(a){rC.length=0;for(var e=a.getElementsByTagName("input"),t=e.length;t--;){var i=e[t];i.checked&&rC.push(i)}}function kx(a){return setTimeout(a,0)}function i5(a){return clearTimeout(a)}gI&&zi(document,"touchmove",function(a){(Qa.active||Wg)&&a.cancelable&&a.preventDefault()});Qa.utils={on:zi,off:Ni,css:Ja,find:zN,is:function(e,t){return!!yu(e,t,e,!1)},extend:v0e,throttle:UN,closest:yu,toggleClass:dl,clone:XN,index:Vl,nextTick:kx,cancelNextTick:i5,detectDirection:KN,getChild:Pp,expando:Yo};Qa.get=function(a){return a[Yo]};Qa.mount=function(){for(var a=arguments.length,e=new Array(a),t=0;t<a;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(Qa.utils=Fc(Fc({},Qa.utils),i.utils)),Gb.mount(i)})};Qa.create=function(a,e){return new Qa(a,e)};Qa.version=y0e;var qr=[],O0,n5,r5=!1,K4,j4,sC,F0;function B0e(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return a.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?zi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?zi(document,"pointermove",this._handleFallbackAutoScroll):i.touches?zi(document,"touchmove",this._handleFallbackAutoScroll):zi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?Ni(document,"dragover",this._handleAutoScroll):(Ni(document,"pointermove",this._handleFallbackAutoScroll),Ni(document,"touchmove",this._handleFallbackAutoScroll),Ni(document,"mousemove",this._handleFallbackAutoScroll)),Fk(),Px(),x0e()},nulling:function(){sC=n5=O0=r5=F0=K4=j4=null,qr.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var n=this,s=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(s,r);if(sC=t,i||this.options.forceAutoScrollFallback||Pb||lh||o1){$4(t,this.options,l,i);var u=i_(l,!0);r5&&(!F0||s!==K4||r!==j4)&&(F0&&Fk(),F0=setInterval(function(){var d=i_(document.elementFromPoint(s,r),!0);d!==u&&(u=d,Px()),$4(t,n.options,d,i)},10),K4=s,j4=r)}else{if(!this.options.bubbleScroll||i_(l,!0)===Rc()){Px();return}$4(t,this.options,i_(l,!1),!1)}}},Qd(a,{pluginName:"scroll",initializeByDefault:!0})}function Px(){qr.forEach(function(a){clearInterval(a.pid)}),qr=[]}function Fk(){clearInterval(F0)}var $4=UN(function(a,e,t,i){if(e.scroll){var n=(a.touches?a.touches[0]:a).clientX,s=(a.touches?a.touches[0]:a).clientY,r=e.scrollSensitivity,l=e.scrollSpeed,u=Rc(),d=!1,h;n5!==t&&(n5=t,Px(),O0=e.scroll,h=e.scrollFn,O0===!0&&(O0=i_(t,!0)));var g=0,y=O0;do{var x=y,C=jr(x),I=C.top,A=C.bottom,E=C.left,L=C.right,G=C.width,F=C.height,B=void 0,Z=void 0,Y=x.scrollWidth,$=x.scrollHeight,te=Ja(x),ce=x.scrollLeft,me=x.scrollTop;x===u?(B=G<Y&&(te.overflowX==="auto"||te.overflowX==="scroll"||te.overflowX==="visible"),Z=F<$&&(te.overflowY==="auto"||te.overflowY==="scroll"||te.overflowY==="visible")):(B=G<Y&&(te.overflowX==="auto"||te.overflowX==="scroll"),Z=F<$&&(te.overflowY==="auto"||te.overflowY==="scroll"));var X=B&&(Math.abs(L-n)<=r&&ce+G<Y)-(Math.abs(E-n)<=r&&!!ce),de=Z&&(Math.abs(A-s)<=r&&me+F<$)-(Math.abs(I-s)<=r&&!!me);if(!qr[g])for(var N=0;N<=g;N++)qr[N]||(qr[N]={});(qr[g].vx!=X||qr[g].vy!=de||qr[g].el!==x)&&(qr[g].el=x,qr[g].vx=X,qr[g].vy=de,clearInterval(qr[g].pid),(X!=0||de!=0)&&(d=!0,qr[g].pid=setInterval((function(){i&&this.layer===0&&Qa.active._onTouchMove(sC);var ne=qr[this.layer].vy?qr[this.layer].vy*l:0,le=qr[this.layer].vx?qr[this.layer].vx*l:0;typeof h=="function"&&h.call(Qa.dragged.parentNode[Yo],le,ne,a,sC,qr[this.layer].el)!=="continue"||HN(qr[this.layer].el,le,ne)}).bind({layer:g}),24))),g++}while(e.bubbleScroll&&y!==u&&(y=i_(y,!1)));r5=d}},30),QN=function(e){var t=e.originalEvent,i=e.putSortable,n=e.dragEl,s=e.activeSortable,r=e.dispatchSortableEvent,l=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(t){var d=i||s;l();var h=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,g=document.elementFromPoint(h.clientX,h.clientY);u(),d&&!d.el.contains(g)&&(r("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function RE(){}RE.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=Pp(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:QN};Qd(RE,{pluginName:"revertOnSpill"});function kE(){}kE.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,n=i||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:QN};Qd(kE,{pluginName:"removeOnSpill"});Qa.mount(new B0e);Qa.mount(kE,RE);function s5(a,e){let t;const i={dragClass:"lux-sortable-drag",ghostClass:"lux-sortable-ghost",sort:!0,handle:".drag-handle",forceFallback:Lre};e?.onSort&&(i.onSort=r=>e.onSort(r.to.children)),n();function n(){a&&(t=Qa.create(a,{...i,...e&&(({onSort:r,...l})=>l)(e)||{}}))}function s(){t?.destroy()}return{sortable:t,destroy:s}}const eB=.5,D0e=!1,oC=Ao("slider",()=>{const a=Vi(),e=Ye(eB),t=Ye(D0e),i=St(()=>[...a.layers].reverse()[0]);function n(r){let l=r;r<.1?l=.1:r>.9&&(l=.9),e.value=l}function s(r){t.value=r??!t.value}return{sliderActive:t,sliderRatio:e,sliderTopLayer:i,setRatio:n,toggleSlider:s}},{});function tB(a,e){const{t}=Ct();function i(){e?.emit("clickInfo",a)}return{t,onClickInfo:i}}const V0e={class:"lux-layer-manager-item mt-2.5"},Z0e=["title"],z0e={class:"flex-1 text-left cursor-default"},U0e=["aria-label","title"],H0e=rt({__name:"layer-item-background",props:{showEditButton:{type:Boolean},layer:{}},emits:["clickEdit","clickInfo"],setup(a,{emit:e}){const t=a,i=e,{t:n,onClickInfo:s}=tB(t.layer,{emit:i}),r=St(()=>n('Display informations for "{{layerName}}"',{ns:"app",layerName:u()})),l=St(()=>!kp().isOffLine.value);function u(){return n(t.layer.name,{ns:"client"})}return(d,h)=>(U(),se("div",V0e,[l.value?(U(),se("button",{key:0,class:"fa fa-info w-3",title:r.value,onClick:h[0]||(h[0]=(...g)=>R(s)&&R(s)(...g))},null,8,Z0e)):Ge("",!0),P("span",z0e,K(u()),1),a.showEditButton?(U(),se("button",{key:1,"data-cy":"openStylePanel",class:"fa fa-pencil","aria-label":R(n)("Open editor panel",{ns:"app"}),title:R(n)("Open editor panel",{ns:"app"}),onClick:h[1]||(h[1]=g=>d.$emit("clickEdit"))},null,8,U0e)):Ge("",!0)]))}}),X0e=["id"],q0e=["aria-checked","title"],Y0e=["id","value","aria-label"],K0e=["aria-checked","aria-label"],j0e=rt({__name:"layer-item-sub",props:{layer:{},isOpen:{type:Boolean},isLayerComparatorOpen:{type:Boolean},displayLayerComparatorOpen:{type:Boolean}},emits:["changeOpacity","clickToggleLayerComparator"],setup(a,{emit:e}){const t=a,i=e,{t:n}=Ct(),s=no(),r=St(()=>n(s.getLayerCurrentLabel(t.layer),{ns:"client"})),l=Ai((t.layer?.opacity??1)*100),u=Ai((t.layer?.previousOpacity??l.value)*100);function d(){l.value===0?l.value=u.value:(u.value=l.value,l.value=0),y()}function h(x){x.target&&(l.value=parseInt(x.target.value),y())}function g(){i("clickToggleLayerComparator",t.layer)}function y(){i("changeOpacity",t.layer,l.value)}return(x,C)=>(U(),se("div",{class:Fa(["lux-layer-manager-item-content",a.isOpen?"h-6":"h-0"]),id:`layer-manager-item-content-${a.layer.id}`,"data-cy":"myLayerSubContent"},[P("button",{class:Fa(["w-5 fa-solid",l.value===0?"fa-eye-slash":"fa-eye"]),role:"switch","aria-checked":l.value===0,title:R(n)("Toggle layer opacity for {{layerName}}",{ns:"app",layerName:r.value}),onClick:d},null,10,q0e),P("input",{id:`${a.layer.id}-steps-range`,type:"range",min:"0",max:"100",value:l.value,step:"25",onChange:h,class:"m-2.5 w-16 h-[5px] rounded-lg appearance-none cursor-pointer","aria-label":R(n)("Change opacity for {{layerName}}",{ns:"app",layerName:r.value})},null,40,Y0e),a.displayLayerComparatorOpen?(U(),se("button",{key:0,"data-cy":"myLayerComparatorBtn",role:"switch",class:Fa(["fa ml-auto text-sm cursor-pointer",a.isLayerComparatorOpen?"fa-adjust":"fa-circle"]),"aria-checked":a.isLayerComparatorOpen,"aria-label":R(n)("Toggle layer comparator for {{ layerName }}",{ns:"app",layerName:r.value}),onClick:g},null,10,K0e)):Ge("",!0)],10,X0e))}}),$0e=["min","max","value"],o5=rt({__name:"layer-time-datepicker",props:{minDateAllowed:{default:""},maxDateAllowed:{default:""},dateValue:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=St(()=>d4(t.minDateAllowed)),s=St(()=>d4(t.maxDateAllowed));function r(l){i("change",l.target.value)}return(l,u)=>(U(),se("input",{class:"lux-time-datepicker",type:"date",min:n.value,max:s.value,value:a.dateValue?R(d4)(a.dateValue):"",onChange:r},null,40,$0e))}}),J0e={class:"lux-time-slider w-full"},Q0e=["for"],e1e=rt({__name:"layer-time-datepicker-value",props:{layer:{}},emits:["changeTime"],setup(a){const{t:e}=Ct(),t=a,i=Ai(t.layer.currentTimeMinValue);return(n,s)=>(U(),se("div",J0e,[P("div",null,[P("label",{for:`${a.layer.id}-time-slider-start`,class:"lux-time-slider-label"},K(R(e)("Date:")),9,Q0e),gt(o5,{id:`${a.layer.id}-time-slider-start`,"date-value":i.value,"min-date-allowed":t.layer.time?.minValue,"max-date-allowed":t.layer.time?.maxValue,onChange:s[0]||(s[0]=r=>n.$emit("changeTime",r))},null,8,["id","date-value","min-date-allowed","max-date-allowed"])])]))}}),t1e={class:"lux-time-slider w-full"},a1e=["for"],i1e=["for"],n1e=rt({__name:"layer-time-datepicker-range",props:{layer:{}},emits:["changeTime"],setup(a,{emit:e}){const{t}=Ct(),i=a,n=e,s=Ai(i.layer.currentTimeMinValue),r=Ai(i.layer.currentTimeMaxValue);function l(d){n("changeTime",d,i.layer.currentTimeMaxValue)}function u(d){n("changeTime",i.layer.currentTimeMinValue,d)}return(d,h)=>(U(),se("div",t1e,[P("div",null,[P("label",{for:`${a.layer.id}-time-slider-start`,class:"lux-time-slider-label"},K(R(t)("From:")),9,a1e),gt(o5,{id:`${a.layer.id}-time-slider-start`,"date-value":s.value,"min-date-allowed":i.layer.time?.minValue,"max-date-allowed":i.layer.time?.maxValue,onChange:l},null,8,["id","date-value","min-date-allowed","max-date-allowed"])]),P("div",null,[P("label",{for:`${a.layer.id}-time-slider-end`,class:"lux-time-slider-label"},K(R(t)("To:")),9,i1e),gt(o5,{id:`${a.layer.id}-time-slider-end`,"date-value":r.value,"min-date-allowed":i.layer.time?.minValue,"max-date-allowed":i.layer.time?.maxValue,onChange:u},null,8,["id","date-value","min-date-allowed","max-date-allowed"])])]))}}),r1e=["onKeydown","aria-label","title"],Nk=rt({__name:"slider-range-thumb",props:{ariaLabel:{},maxLimit:{default:100},minLimit:{default:0},selectedValue:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Ye(!1),s=Ye(),r=Ye(),l=St(()=>s.value?.offsetWidth||274),u=St(()=>r.value?.offsetWidth||9),d=Ye(t.selectedValue),h=St(()=>l.value*d.value/100-u.value/2),g=St(()=>({left:`${h.value}px`}));Nr(()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",E)}),Rt(()=>t.selectedValue,G=>{d.value=G});function y(G){d.value=Math.max(Math.min(G,100),0),i("change",d.value,n.value)}function x(){y(d.value-1)}function C(){y(d.value+1)}function I(){n.value=!0,document.addEventListener("mousemove",A),document.addEventListener("mouseup",E)}function A(G){n.value&&y(L(G))}function E(G){n.value=!1,y(L(G)),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",E)}function L(G){const F=s.value?.offsetWidth?(G.clientX-u.value*2)*100/s.value?.offsetWidth:0;return Math.round(Math.max(Math.min(F,t.maxLimit),t.minLimit))}return(G,F)=>(U(),se("div",{class:"w-full",role:"slider",ref_key:"elRefTrack",ref:s},[P("button",{class:Fa(["lux-slidebar-thumb",n.value?"dragging":""]),ref_key:"elRefThumb",ref:r,style:Nc(g.value),onKeydown:[$r(_r(C,["stop"]),["space"]),$r(_r(C,["stop"]),["right"]),$r(_r(x,["stop"]),["left"]),$r(_r(x,["stop"]),["delete"])],onMousedown:I,onMousemove:A,onMouseup:E,"aria-label":a.ariaLabel,title:a.ariaLabel},null,46,r1e)],512))}}),s1e=rt({__name:"slider-range-active-track",props:{selectedMinValue:{},selectedMaxValue:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Ye(),s=Ye(),r=St(()=>n.value?Math.round(n.value.offsetWidth*t.selectedMinValue/100):0),l=St(()=>{let h=0;return t.selectedMaxValue!==void 0&&n.value?.offsetWidth&&(h=n.value?.offsetWidth*t.selectedMaxValue/100-r.value),Math.round(h)}),u=St(()=>({left:`${r.value}px`,width:`${l.value}px`}));function d(h){if(n.value){const g=n.value.getBoundingClientRect().x,y=(h.clientX-g)*100/n.value.offsetWidth;i("change",y)}}return(h,g)=>(U(),se("div",{ref_key:"elRefFullTrack",ref:n,class:"lux-slidebar-track"},[a.selectedMaxValue!==void 0?(U(),se("div",{key:0,ref_key:"elRefSelectionTrack",ref:s,class:"lux-slidebar-track-selection",style:Nc(u.value),onClick:d},null,4)):Ge("",!0),P("div",{class:"lux-slidebar-track-full",onClick:d})],512))}}),o1e={class:"lux-slidebar-fake"},Bk=rt({__name:"slider-range",props:{selectedMinValue:{},selectedMaxValue:{},ariaLabelMin:{},ariaLabelMax:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Ye(t.selectedMinValue),s=Ye(t.selectedMaxValue);function r(d,h){i("change",d,t.selectedMaxValue,h)}function l(d,h){i("change",t.selectedMinValue,d,h)}function u(d){s.value===void 0?n.value=d:d>=s.value?s.value=d:d<=t.selectedMinValue?n.value=d:Math.abs(s.value-d)<Math.abs(n.value-d)?s.value=d:n.value=d,i("change",n.value,s.value,!1)}return(d,h)=>(U(),se("div",o1e,[s.value!==void 0?(U(),Lt(Nk,{key:0,ariaLabel:a.ariaLabelMax,minLimit:a.selectedMinValue,selectedValue:s.value,onChange:l},null,8,["ariaLabel","minLimit","selectedValue"])):Ge("",!0),gt(Nk,{ariaLabel:a.ariaLabelMin,maxLimit:a.selectedMaxValue,selectedValue:n.value,onChange:r},null,8,["ariaLabel","maxLimit","selectedValue"]),gt(s1e,{selectedMinValue:a.selectedMinValue,selectedMaxValue:a.selectedMaxValue,onChange:u},null,8,["selectedMinValue","selectedMaxValue"])]))}}),l1e={class:"lux-time-slider w-full"},u1e={key:0,class:"lux-time-slider-value mr-1.5"},c1e={key:1,class:"lux-time-slider-range mr-1.5"},d1e={class:"lux-time-displayed-dates"},h1e={key:0,class:"lux-time-start-date grow"},_1e={key:1,class:"lux-time-slider-end-date grow text-right"},m1e=rt({__name:"layer-time-slider",props:{layer:{}},emits:["changeTime"],setup(a,{emit:e}){const{t}=Ct(),i=a,n=e,s=St(A),r=St(()=>i.layer.time?.minValue?new Date(i.layer.time?.minValue).getTime():0),l=St(()=>i.layer.time?.maxValue?new Date(i.layer.time?.maxValue).getTime():0),u=St(()=>l.value-r.value),d=Ye(i.layer.currentTimeMaxValue),h=Ye(i.layer.currentTimeMinValue),g=St(()=>h.value?new Date(h.value).getTime():void 0),y=St(()=>d.value?new Date(d.value).getTime():void 0),x=St(()=>I(g.value)),C=St(()=>I(y.value));function I(F){return F?(F-r.value)/u.value*100:0}function A(){const F=i.layer.time,B=[];if(!F)return;if(F.values)return F.values.map(me=>new Date(me).getTime());const Z=new Date(F.minValue),Y=new Date(F.maxValue??Date.now()),$=1024,te=new Date(Z.getTime()),ce=F.interval??zW;if(te.setFullYear(Z.getFullYear()+$*ce[0]),te.setMonth(Z.getMonth()+$*ce[1],Z.getDate()+$*ce[2]),te.setSeconds(Z.getSeconds()+$*ce[3]),te>Y)for(let me=0;;me++){const X=new Date(Z.getTime());if(X.setFullYear(Z.getFullYear()+me*ce[0]),X.setMonth(Z.getMonth()+me*ce[1],Z.getDate()+me*ce[2]),X.setSeconds(Z.getSeconds()+me*ce[3]),X<=Y)B.push(X.getTime());else break}return B}function E(F){const B=F/100*(l.value-r.value)+r.value,Z=Fae(B,{minValue:r.value,maxValue:l.value,timeValueList:s.value,timeInterval:i.layer.time?.interval});return _3(Z)}function L(F,B){const Z=E(F);if(h.value=Z,B){const Y=E(B);d.value=Y}}function G(F,B,Z){L(F,B),Z||n("changeTime",h.value,d.value)}return(F,B)=>(U(),se("div",l1e,[a.layer.time?.mode===R(Ld).VALUE?(U(),se("div",u1e,[gt(Bk,{ariaLabelMin:`${R(t)("Edit the start date",{ns:"app"})}`,selectedMinValue:x.value,onChange:G},null,8,["ariaLabelMin","selectedMinValue"])])):Ge("",!0),a.layer.time?.mode===R(Ld).RANGE?(U(),se("div",c1e,[gt(Bk,{ariaLabelMin:`${R(t)("Edit the start date",{ns:"app"})}`,ariaLabelMax:`${R(t)("Edit the end date",{ns:"app"})}`,selectedMinValue:x.value,selectedMaxValue:C.value,onChange:G},null,8,["ariaLabelMin","ariaLabelMax","selectedMinValue","selectedMaxValue"])])):Ge("",!0),P("div",d1e,[a.layer.time?.mode===R(Ld).RANGE||a.layer.time?.mode===R(Ld).VALUE?(U(),se("div",h1e,[P("span",null,K(h.value?R(rR)(h.value,a.layer.time?.resolution):"-"),1)])):Ge("",!0),a.layer.time?.mode===R(Ld).RANGE?(U(),se("div",_1e,[P("span",null,K(d.value?R(rR)(d.value,a.layer.time?.resolution):"-"),1)])):Ge("",!0)])]))}}),f1e=rt({__name:"layer-time",props:{layer:{}},emits:["changeTime"],setup(a,{emit:e}){const t=e;function i(n,s){t("changeTime",n,s)}return(n,s)=>(U(),se(Tt,null,[a.layer.time?.widget===R(hx).SLIDER?(U(),Lt(m1e,{key:0,layer:a.layer,onChangeTime:i},null,8,["layer"])):Ge("",!0),a.layer.time?.widget===R(hx).DATEPICKER&&a.layer.time?.mode===R(Ld).VALUE?(U(),Lt(e1e,{key:1,layer:a.layer,onChangeTime:i},null,8,["layer"])):Ge("",!0),a.layer.time?.widget===R(hx).DATEPICKER&&a.layer.time?.mode===R(Ld).RANGE?(U(),Lt(n1e,{key:2,layer:a.layer,onChangeTime:i},null,8,["layer"])):Ge("",!0)],64))}}),g1e={class:"lux-layer-manager-item relative"},p1e={class:"w-full flex flex-nowrap items-start gap-x-2"},y1e=["title"],b1e=["aria-label","title"],v1e=["aria-expanded","aria-controls","data-cy"],x1e={class:"grow"},w1e=["title","aria-label"],Dk=rt({__name:"layer-item",props:{is3d:{type:Boolean},layer:{},dragHandleClassName:{},isOpen:{type:Boolean},isLayerComparatorOpen:{type:Boolean},displayLayerComparatorOpen:{type:Boolean}},emits:["clickInfo","clickToggle","clickToggleLayerComparator","clickRemove","changeOpacity","changeTime"],setup(a,{emit:e}){const t=a,i=e,{t:n,onClickInfo:s}=tB(t.layer,{emit:i}),r=no(),l=St(()=>n(r.getLayerCurrentLabel(t.layer),{ns:"client"})),u=St(()=>!kp().isOffLine.value),d=St(()=>n('Sort "{{layerName}}" in the list',{ns:"app",layerName:l.value})),h=St(()=>n('Display informations for "{{layerName}}"',{ns:"app",layerName:l.value})),g=St(()=>n('Remove layer "{{layerName}}"',{ns:"app",layerName:l.value}));function y(x,C){i("changeTime",x,C)}return(x,C)=>(U(),se("div",g1e,[P("div",p1e,[P("button",{class:Fa(["fa-solid fa-bars cursor-move mt-1",a.dragHandleClassName]),title:d.value},null,10,y1e),u.value?(U(),se("button",{key:0,class:"fa-solid fa-info mt-1","aria-label":h.value,title:h.value,onClick:C[0]||(C[0]=(...I)=>R(s)&&R(s)(...I))},null,8,b1e)):Ge("",!0),P("button",{"aria-expanded":a.isOpen,"aria-controls":`layer-manager-item-content-${a.layer.id}`,"data-cy":`myLayerItemLabel-${a.layer.id}`,class:Fa([a.is3d?"cursor-default":"","grow text-left break-words w-[70%] flex items-center"]),onClick:C[1]||(C[1]=I=>x.$emit("clickToggle",a.layer))},[P("span",x1e,K(l.value),1),a.is3d?Ge("",!0):(U(),se("span",{key:0,class:Fa(["w-3.5 fa-solid",a.isOpen?"fa-xmark":"fa-ellipsis"]),"aria-hidden":"true"},null,2))],10,v1e),P("button",{class:"mt-1 fa-regular fa-trash-can",title:g.value,"aria-label":g.value,onClick:C[2]||(C[2]=I=>x.$emit("clickRemove",a.layer))},null,8,w1e)]),a.is3d?Ge("",!0):(U(),Lt(j0e,{key:0,layer:a.layer,isOpen:a.isOpen,isLayerComparatorOpen:a.isLayerComparatorOpen,displayLayerComparatorOpen:a.displayLayerComparatorOpen,onClickToggleLayerComparator:C[3]||(C[3]=I=>x.$emit("clickToggleLayerComparator",I)),onChangeOpacity:C[4]||(C[4]=(I,A)=>x.$emit("changeOpacity",I,A))},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen"])),a.layer.time?(U(),Lt(f1e,{key:1,layer:a.layer,onChangeTime:y},null,8,["layer"])):Ge("",!0)]))}}),C1e={key:0,class:"text-black"},I1e=["id"],S1e=["id"],A1e={key:2,class:"flex flex-row justify-center space-x-1 my-2"},Vk="drag-handle",T1e=rt({__name:"layer-manager",emits:["displayCatalog"],setup(a,{emit:e}){const{t}=Ct(),{setMetadataLayer:i}=nI(),n=Vi(),s=ri(),r=T_(),l=oC(),{bgLayer:u}=xt(n),{sliderActive:d}=xt(l),{isOffLine:h}=xt(s),{setRemoteLayersOpen:g}=s,y=b1("sortableLayers"),x=b1("sortableLayers3d"),C=St(()=>[...n.layers].reverse()),I=St(()=>[...n.layers3d].reverse()),A=Ai(),E=St(()=>r.isLayerStyleEditable(u.value)),L=St(()=>!h.value),G=e;fn(()=>{s5(y.value,{onSort:F}),s5(x.value,{onSort:B})});function F(X,de){const N=[...X].map(ne=>Number(ne.id)).reverse();n.reorderLayers(N,de)}function B(X){F(X,!0)}function Z(X,de){n.setLayerOpacity(X.id,de/100)}function Y(X,de,N){n.setLayerTime(X.id,de,N)}function $(X){n.removeLayers(X.id)}function te(X){A.value=A.value!==X.id?X.id:void 0}function ce(){s.openStyleEditorPanel()}function me(){l.toggleSlider()}return(X,de)=>(U(),se("div",null,[R(h)&&C.value.length===0?(U(),se("div",C1e,K(R(t)("No layer selected",{ns:"client"})),1)):Ge("",!0),I.value.length>0?(U(),se("ul",{key:1,ref_key:"sortableLayers3d",ref:x,class:"mb-4 sortable-layers-3d"},[(U(!0),se(Tt,null,gi(I.value,(N,ne)=>(U(),se("li",{key:N.id,id:N.id,"data-cy":"myLayer"},[gt(Dk,{is3d:!0,dragHandleClassName:Vk,layer:N,isOpen:A.value===N.id,isLayerComparatorOpen:R(d),displayLayerComparatorOpen:ne===0,onClickRemove:$,onClickToggle:te,onClickToggleLayerComparator:me,onClickInfo:le=>R(i)(N),onChangeOpacity:Z,onChangeTime:(le,_e)=>Y(N,le,_e)},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen","onClickInfo","onChangeTime"])],8,I1e))),128))],512)):Ge("",!0),P("ul",{ref_key:"sortableLayers",ref:y,class:"sortable-layers"},[(U(!0),se(Tt,null,gi(C.value,(N,ne)=>(U(),se("li",{key:N.id,id:N.id,"data-cy":"myLayer"},[gt(Dk,{is3d:!1,dragHandleClassName:Vk,layer:N,isOpen:A.value===N.id,isLayerComparatorOpen:R(d),displayLayerComparatorOpen:ne===0,onClickRemove:$,onClickToggle:te,onClickToggleLayerComparator:me,onClickInfo:le=>R(i)(N),onChangeOpacity:Z,onChangeTime:(le,_e)=>Y(N,le,_e)},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen","onClickInfo","onChangeTime"])],8,S1e))),128))],512),gt(H0e,{layer:R(u)||R(Nw),showEditButton:E.value,onClickInfo:de[0]||(de[0]=()=>R(u)&&R(i)(R(u))),onClickEdit:ce},null,8,["layer","showEditButton"]),L.value?(U(),se("div",A1e,[P("button",{"data-cy":"addLayer",class:"bg-white text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:de[1]||(de[1]=N=>G("displayCatalog"))},K(R(t)("+ Add layers",{ns:"client"})),1),P("button",{"data-cy":"addRemoteLayer",class:"bg-white text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:de[2]||(de[2]=N=>R(g)(!0))},K(R(t)("+ Add external Wms",{ns:"client"})),1)])):Ge("",!0),de[3]||(de[3]=P("div",{class:"lux-preload"},[P("i",{class:"fa-regular fa-trash-can"})],-1))]))}}),E1e=["data-cy"],M1e={key:0,class:"lux-panel-title h-16 shrink-0 flex justify-between"},L1e=["aria-label"],R1e={key:1,class:"lux-panel-tabs flex flex-row gap-2 h-10 text-2xl"},k1e={class:"lux-panel-content relative grow p-2.5 bg-primary overflow-auto"},mf=rt({__name:"side-panel-layout",props:{dataCyValue:{},closeFn:{type:Function}},setup(a){const{t:e}=Ct();return(t,i)=>(U(),se("div",{"data-cy":a.dataCyValue,class:"lux-panel flex flex-col h-full pt-1.5"},[t.$slots.header?(U(),se("div",M1e,[ja(t.$slots,"header"),P("span",null,[P("button",{"data-cy":"panelClose",onClick:i[0]||(i[0]=()=>a.closeFn()),"aria-label":R(e)("Close",{ns:"client"}),class:"fa-sharp fa-solid fa-close"},null,8,L1e)])])):Ge("",!0),t.$slots.tabs?(U(),se("div",R1e,[ja(t.$slots,"tabs")])):Ge("",!0),P("div",k1e,[ja(t.$slots,"content")])],8,E1e))}}),P1e=["aria-expanded"],G1e={key:0},W1e=["aria-expanded"],O1e=rt({__name:"layer-panel",setup(a){const{t:e}=Ct(),t=ri(),{setLayersOpen:i}=t,{myLayersTabOpen:n}=xt(t),{layers:s}=xt(Vi()),r=St(()=>!kp().isOffLine.value),l=St(()=>n.value||kp().isOffLine.value);function u(){t.setMyLayersTabOpen(!0)}function d(){t.setMyLayersTabOpen(!1)}return(h,g)=>(U(),Lt(mf,{"data-cy-value":"layerPanel","close-fn":()=>R(i)(!1)},{header:Ht(()=>[P("h1",null,K(R(e)("layers",{ns:"client"})),1)]),tabs:Ht(()=>[P("button",{"data-cy":"myLayersButton",onClick:u,class:Fa(["text-white px-4 hover:bg-primary cursor-pointer text-center uppercase",l.value?"bg-primary":"bg-tertiary"]),"aria-expanded":l.value},[Dt(K(R(e)("my_layers",{ns:"client"}))+" ",1),R(s).length?(U(),se("span",G1e,"("+K(R(s).length)+")",1)):Ge("",!0)],10,P1e),r.value?(U(),se("button",{key:0,"data-cy":"catalogButton",onClick:d,class:Fa(["text-white px-4 hover:bg-primary cursor-pointer text-center uppercase",l.value?"bg-tertiary":"bg-primary"]),"aria-expanded":!l.value},K(R(e)("Catalog",{ns:"client"})),11,W1e)):Ge("",!0)]),content:Ht(()=>[Sa(gt(T1e,{"data-cy":"myLayers",onDisplayCatalog:d},null,512),[[Zm,l.value]]),Sa(P("div",null,[gt(m0e)],512),[[Zm,!l.value]])]),_:1},8,["close-fn"]))}}),F1e={class:"lux-legends absolute"},N1e={key:0,class:"text-white"},B1e={class:"pb-5"},D1e={class:"pb-5"},V1e=rt({__name:"legends-panel",setup(a){const{t:e}=Ct(),t=ri(),i=Vi(),n=no(),{layers:s,bgLayer:r}=xt(i),l=St(()=>[...s.value].reverse()),u=Ye(new Map),d=Ye(!1);return Ar(()=>d.value=[...u.value].some(([h,g])=>g)),Nr(()=>u.value.clear()),h7(()=>u.value.clear()),(h,g)=>(U(),Lt(mf,{"data-cy-value":"legendsPanel","close-fn":()=>R(t).toggleLegendsOpen(!1)},{header:Ht(()=>[P("h1",null,K(R(e)("Legends")),1)]),content:Ht(()=>[P("div",F1e,[d.value?Ge("",!0):(U(),se("div",N1e,K(R(e)("Aucune lgende n'est disponible pour les couches slectionnes.")),1)),(U(!0),se(Tt,null,gi(l.value,y=>(U(),Lt(Q3,{"data-cy":"legendLayer",class:"pt-10",key:y.id,layer:y,onHasLegend:x=>u.value.set(y.id,x),onRemovedLegend:()=>u.value.delete(y.id)},{title:Ht(()=>[P("h1",B1e,K(R(e)(R(n).getLayerCurrentLabel(y))),1)]),_:2},1032,["layer","onHasLegend","onRemovedLegend"]))),128)),R(r)?(U(),Lt(Q3,{"data-cy":"legendBgLayer",class:"pt-10",key:R(r).id,layer:R(r)},{title:Ht(()=>[P("h1",D1e,K(R(e)(R(n).getLayerCurrentLabel(R(r)))),1)]),_:1},8,["layer"])):Ge("",!0)])]),_:1},8,["close-fn"]))}});class Z1e{timeoutID;constructor(e){const t=Vi(),i=Tu(),n=qa(),s=T_(),r=bE(),{getIsOffline:l}=kp(),{appliedStyle:u}=xt(i);Rt(()=>t.layers,(d,h)=>{const g={layers:h},y={layers:d},x=n.getRemovedLayers(y,g),C=n.getAddedLayers(y,g),I=n.getMutatedLayers(y,g);x.forEach(A=>r.removeLayer(e,A.id)),C.forEach(A=>{r.addLayer(e,A.layer),r.setLayerTime(e,A.layer)}),I.forEach(A=>{n.getMutationType(A.id,y,g)===pT.ON_LAYER_TYPE?(r.removeLayer(e,A.id),r.addLayer(e,A)):r.setLayerOpacity(e,A.id,A.opacity),r.setLayerTime(e,A)}),y.layers&&r.reorderLayers(e,y.layers)}),Rt(()=>t.bgLayer,d=>d!==void 0&&r.setBgLayer(e,d,i.bgVectorSources)),Ar(()=>{i.isExpertStyleActive||(u.value=s.applyDefaultStyle(t.bgLayer,i.bgVectorBaseStyles,i.bgStyle))}),Rt(u,d=>{l()||(i.bgStyle===null&&!i.isExpertStyleActive?s.unregisterStyle(i.styleSerial).then(i.styleSerial=null):(clearTimeout(this.timeoutID),this.timeoutID=setTimeout(()=>{s.registerStyle(d,i.styleSerial).then(h=>{i.styleSerial=h;const g=t?.bgLayer?.id;t?.bgLayer&&g!==void 0&&h!==void 0&&r.setBgLayer(e,t?.bgLayer,i.bgVectorSources)})},2e3))),r.applyOnBgLayer(e,h=>s.applyConsolidatedStyle(h,d))}),Rt(()=>i.bgVectorSources,(d,h)=>{for(const g of d.keys())(!h||h.get(g)!==d.get(g))&&(r.removeFromCache(g),g===t?.bgLayer?.id&&r.setBgLayer(e,t?.bgLayer,d))})}}class z1e{constructor(e){const t=e.getView(),i=Vi();t.setMaxZoom(hG),t.setMinZoom(xY),t.setConstrainResolution(!0),Rt(()=>i.minZoom,n=>n!==void 0&&t.setMinZoom(n)),Rt(()=>i.maxZoom,n=>n!==void 0&&t.setMaxZoom(n))}}function U1e(){const a=$n(),{generateDrawnFeature:e}=rI(),{addDrawnFeatureToCollection:t}=a,{activeFeatureId:i,drawnFeatures:n}=xt(a),s=qa().getOlMap();function r(d,h="new"){let g;Iu.remove(),d.stopPropagation(),h==="new"?(g=e(d.feature),t(g)):g=n.value.find(y=>y.id===i.value),g.resetProfileData(),a.selectDrawnFeature(g)}function l(d,h){h.key==="Escape"&&(Iu.remove(),d.finishDrawing())}function u(d,h="new"){const g=new Yp(d);return g.setActive(!1),xa(g,"drawstart",y=>Iu.add(s,y)),xa(g,"drawend",y=>r(y,h)),xa(document,"keyup",y=>l(g,y)),s.addInteraction(g),g}return{createDrawInteraction:u}}function H1e(){const a=$n(),{drawStateActive:e,editStateActive:t,drawnFeatures:i,currentDrawInteraction:n,editingFeatureId:s}=xt(a),{createDrawInteraction:r}=U1e(),l=i1.createOlLayerInteractionDraw(),u={drawPoint:r({type:"Point"}),drawLabel:r({type:"Point"}),drawLine:r({type:"LineString"}),drawLineContinue:r({type:"LineString"},"update"),drawCircle:r({type:"Circle"}),drawPolygon:r({type:"Polygon"})};Rt(e,g=>{Object.keys(u).forEach(y=>{const x=u[y];`${[y]}`==`${g}`&&!t.value?(x.setActive(!0),n.value=x):x.setActive(!1)})}),Rt(t,g=>{if(g)Object.values(u).forEach(y=>{y.setActive(!1)});else if(e.value){const y=e.value;u[y]&&(u[y].setActive(!0),n.value=u[y])}}),Rt(i,g=>{h(g,s.value)},{flush:"post"}),Rt(s,()=>{h(i.value,s.value)});function d(g){g.addLayer(l)}function h(g,y){const x=l.getSource(),C=y?g.filter(A=>A.id!==y):g,I=x?.getFeatures()||[];I.forEach(A=>{const E=A;C.find(L=>L.id===E.id)||x?.removeFeature(A)}),C.forEach(A=>{I.find(E=>E.id===A.id)||(A.changed(),x?.addFeature(A))})}return{addDrawLayer:d,drawInteractions:u}}function X1e(){const a=qa().getOlMap(),e=ri(),{drawStateActive:t,editStateActive:i,activeFeatureId:n,editingFeatureId:s,drawnFeatures:r}=xt($n()),{layersOpen:l,myMapsOpen:u}=xt(e),{layers:d}=xt(Vi());xa(a,"click",g=>h(g)),Rt([n,s],([g,y],[x,C])=>{C!==y&&y!==g&&(s.value=void 0),x!==void 0&&x!==g&&r.value.filter(I=>I.id===x).forEach(I=>{I.selected=!1,I.changed()}),r.value.filter(I=>I.id===g).forEach(I=>{I.selected=!0,I.changed()})});const h=function(g){const y=g.pixel;if(t.value!==void 0||i.value!==void 0)return!0;if(a.forEachFeatureAtPixel(y,C=>{const I=r.value.includes(C);if(I&&(l.value||u.value)&&r.value.length>0||I&&d.value.length===0)return e.toggleMyMapsOpen(!0),n.value=C.id,!0},{hitTolerance:5}))return!1}}const q1e="featureInfoLayer",Y1e=17;class K1e{map;featureLayer;init(e){this.map=e,this.createFeatureLayer()}createFeatureLayer(){this.featureLayer=new bs({source:new lo,zIndex:1e3});const e=new ji({color:[255,255,0,.6]}),t=new Li({color:[255,155,55,1],width:3}),i=new Qr({radius:10,fill:e,stroke:t});this.featureLayer.set("cyLayerType",q1e),this.featureLayer.setStyle(function(n){const s=n.get("color")||"#ffcc33",r=n.get("width")||3,l=[new $a({fill:new ji({color:[255,255,0,.6]})}),new $a({stroke:new Li({color:"#ffffff",width:5})}),new $a({stroke:new Li({color:s,width:r})})],u=n.getGeometry()?.getType();return u==="Point"||u==="MultiPoint"?[new $a({image:i})]:l}),this.map.addLayer(this.featureLayer)}highlightFeatures(e,t,i){if(e!=null){this.map.getLayers().getArray().indexOf(this.featureLayer)===-1&&this.map.addLayer(this.featureLayer);const n={dataProjection:tu,featureProjection:this.map.getView().getProjection()},s=new $l().readFeatures({type:"FeatureCollection",features:e},n);if(s.length>0){let r=s[0].getGeometry()?.getExtent()||[0,0,0,0];for(const l of s){const u=l.getGeometry()?.getExtent()||[0,0,0,0];r=vp(r,u),l.getId()==null&&l.setId(void 0),l.getGeometry()?.getType()==="GeometryCollection"?l.getGeometry().getGeometriesArray().forEach(h=>{const g=l.clone();g.setGeometry(h),this.featureLayer.getSource()?.addFeature(g)}):this.featureLayer.getSource()?.addFeature(l)}if(t&&r){const l={size:this.map.getSize(),maxZoom:i||Y1e};this.map.getView().fit(r,l)}}}}clearFeatures(){this.featureLayer.getSource()?.clear()}}const X2=new K1e,j1e={xs:0,sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function PE(a){return window.innerWidth>=j1e[a]}const $1e="https://migration.geoportail.lu/getfeatureinfo";async function Zk(a){const e=await Br($1e,a,"GET");if(!e.ok)throw new Error("Error while trying to get profile");return await e.json()}function J1e(){const a=qa().getOlMap(),{setFeatureInfoPanelContent:e,setLoading:t,setDisplayStarOnMobile:i}=ef(),{fid:n,isLoading:s}=xt(ef()),{toggleInfoOpen:r}=ri(),{layersOpen:l,myMapsOpen:u}=xt(ri()),{findById:d}=Al(),{drawStateActive:h,editStateActive:g,drawnFeatures:y}=xt($n()),{locationInfoCoords:x,isStreetviewActive:C}=xt(nf()),{maxZoom:I}=xt(Vi()),A=Ye([]),E=Ye([]),L=Ye([]),G=Ye([]),F=Ye(null);function B(){X2.init(a),xa(a,"pointerdown",de=>{L.value=de.pixel}),xa(a,"pointerup",SO(de=>Z(de),499)),xa(a,"pointermove",de=>{Y(de)}),Ar(()=>{n.value&&(async()=>await $(n.value))()})}function Z(de){(async()=>(G.value=de.pixel,!(de.originalEvent.button===2||C.value&&x.value||h.value||g.value||s.value)&&(F.value=window.setTimeout(()=>{let N=!1;if((l.value||u.value)&&y.value.length>0&&(N=X(de.pixel)),!N&&L.value&&G.value){const ne=Math.abs(L.value[0]-G.value[0]),le=Math.abs(L.value[1]-G.value[1]);ne+le<6&&(te(de),L.value=null,G.value=null)}},500))))()}async function Y(de){if(de.dragging||s.value)return;const N=await Promise.all(a.getLayers().getArray().filter(ne=>ne instanceof a1).map(async ne=>{const le=ne.getData(de.pixel);if(ne.getVisible()&&ne.getOpacity()>0&&!le?.every(_e=>_e===0)){const _e=ne.get(Kw);return _e&&_e.is_queryable}return!1})).then(ne=>ne.some(Boolean));a.getViewport().style.cursor=N?"pointer":""}async function $(de){const N=de.split(",");for(const ne of N){const le=ne.split("_")[0],_e=[le],ke={};try{if(_e.length>0){t(!0),a.getViewport().style.cursor="wait";const Ie=await Zk({fid:ne});let re=!1;PE("sm")?(re=!0,i(!1)):i(!0);const Q=d(le);Q&&(ke[le]=Q.layers),Ie.length>0&&ce(!0,Ie,ke,re,!0)}}catch{me()}}}async function te(de){const N=a.getLayers().getArray(),ne=[],le={};for(let _e=N.length-1;_e>=0;_e--){const ke=N[_e].get(Kw);if(ke!=null&&ke.is_queryable&&N[_e].getVisible()&&N[_e].getOpacity()>0){const Ie=N[_e].get("queryable_id");ne.push(Ie),le[Ie]=N[_e].get("label")}}if(ne.length>0){const _e=a.getView().getResolution();let ke=0,Ie=0;_e&&(ke=20*_e,Ie=1*_e);const re=fr(de.coordinate,a.getView().getProjection(),tu),Q=[[re[0]-ke,re[1]+ke],[re[0]+ke,re[1]-ke]],J=[[re[0]-Ie,re[1]+Ie],[re[0]+Ie,re[1]-Ie]];t(!0),a.getViewport().style.cursor="wait";const je=a.getSize()||[0,0],Je=a.getView().calculateExtent(je).join(","),kt={layers:ne.join(),box1:Q.join(),box2:J.join(),srs:Fm,zoom:a.getView().getZoom(),BBOX:Je,WIDTH:je[0],HEIGHT:je[1],X:de.pixel[0],Y:de.pixel[1]};try{const Pt=await Zk(kt);Pt.length>0?ce(de.originalEvent.shiftKey,Pt,le,!0,!1):(E.value=[],X2.highlightFeatures(E.value,!1,I.value),me())}catch{me()}}}function ce(de,N,ne,le,_e){de?N.forEach(re=>{re.layerLabel=ne[re.layer];let Q=!1;for(let J=0;J<A.value.length;J++)if(A.value[J].layer===re.layer){Q=!0;let je=!1;for(let Qe=0;Qe<re.features.length;Qe++){for(let Je=0;Je<A.value[J].features.length;Je++)if(A.value[J].features[Je].fid==re.features[Qe].fid){je=!0,A.value[J].features.splice(Je,1);break}je||(A.value[J].features=A.value[J].features.concat(re.features[Qe]))}break}Q||A.value.push(re)}):(A.value=N,A.value.forEach(re=>{re.layerLabel=ne[re.layer]}));const ke=A.value.filter(re=>"features"in re&&re.features.length>0),Ie=A.value.length>0?le:!1;me(Ie),E.value=[];for(let re=0;re<A.value.length;re++)E.value.push(...A.value[re].features);X2.highlightFeatures(E.value,_e,I.value),e(ke)}function me(de=!1){r(de),t(!1),a.getViewport().style.cursor="",X2.clearFeatures()}function X(de){const N=[];return a.forEachFeatureAtPixel(de,ne=>y.value.indexOf(ne)!==-1?(N.push(ne),!1):!0,{hitTolerance:5}),N.length>0}return{init:B}}function Q1e(){const{t:a}=Ct(),{addNotification:e}=ar(),{drawStateActive:t}=xt($n());Rt(t,i);function i(n){let s;switch(n){case"drawPoint":s=a("Click to draw the point");break;case"drawLine":case"drawLineContinue":s=a("Click to start drawing line<br>Double-click to finish");break;case"drawPolygon":s=a("Click to start drawing polygon<br>Double-click or click last point to finish");break;case"drawCircle":s=a("Click to start drawing circle");break;case"drawLabel":s=a("Click to place the label");break}s&&e(s)}return{}}function ebe(){let a,e,t;const{editStateActive:i,editingFeatureId:n,drawnFeatures:s}=xt($n()),{updateDrawnFeature:r}=$n(),l=qa().getOlMap(),u=new bs({source:new lo({features:[]}),zIndex:rN+1,style:(y,x)=>{const C=y,I=C.getStyleFunction();return I?I.call(C,C,x):[]}});u.set("cyLayerType",sN);const d=u.getSource();l.addLayer(u),Rt(i,y=>{h(),y&&g()}),Rt(n,y=>{d.clear();const x=s.value.find(C=>C.id===y);if(x){t=x;const C=new Tl(x);C.setGeometry(x.getGeometry()?.clone()),C.set("__isBeingEdited__",!0),d.addFeature(C),l.render()}else t=void 0},{flush:"post"});function h(){a&&e&&(a.un("modifyend",e),l.removeInteraction(a),a=void 0,e=void 0)}function g(){a=new Xoe({source:d,pixelTolerance:20,deleteCondition:y=>zC(y)&&DP(y)}),e=y=>{const x=y.features.getArray()[0];x.resetProfileData(),t&&x&&(t.setGeometry(x.getGeometry()?.clone()),t.resetProfileData(),t.setStyle(t.getStyleFunction()),t.changed(),r(t)),x.setStyle(x.getStyleFunction()),x.changed()},a.on("modifyend",e),l.addInteraction(a)}return{}}const tbe={0:8,1:9,2:9,3:10,4:11,5:12,6:13,7:14,8:16,9:17,10:18,11:19,12:20,13:21};class abe{bootstrap(){this.restore(),this.persist()}persistZoom(){const e=Vi(),{zoom:t}=xt(e),i=qa().getOlMap().getView(),n=()=>{const s=i.getZoom(),r=s?Math.ceil(s):null;Oa.setValue(yR,r),t.value=r};n(),xa(i,"change:resolution",up(n,300))}persistRotation(){const e=Vi(),{rotation:t}=xt(e),i=qa().getOlMap().getView(),n=()=>{const s=i.getRotation()||0;Oa.setValue(bR,s),t.value=s};n(),xa(i,"change:rotation",up(n,300))}persistXY(){const e=Vi(),{x:t,y:i}=xt(e),n=qa().getOlMap().getView(),s=()=>{const r=n.getCenter(),l=r?Math.round(r[0]):null,u=r?Math.round(r[1]):null;Oa.setValue(b3,l),Oa.setValue(v3,u),t.value=l,i.value=u};s(),xa(n,Ym.PROPERTYCHANGE,up(s,300))}persist(){this.persistXY(),this.persistZoom(),this.persistRotation()}restore(){const e=qa().getOlMap().getView(),t=Oa.getValue(yR,Lm),i=Oa.getValue(bR,Lm),n=Oa.getInitialVersion(),s=Oa.getValue(b3,Lm),r=Oa.getValue(v3,Lm),l=Oa.getValue(Ire),u=h_(tu,Fm);let d,h;t!==void 0?h=n===3?Number(t):tbe[t]:h=parseInt("8",10),s!=null&&r!=null?n===3&&l!=null?d=fr([s,r],l,Fm):d=n===3?[s,r]:u([r,s],void 0,2):d=fr([6,49.7],Wu,Fm),e.setCenter(d),e.setZoom(h),e.setRotation(i||0)}}const ibe=new abe,Fh={ANGLE:"a",IS_RECTANGLE:"r",IS_TEXT:"t",OPACITY:"o",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"},Td={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"},nbe={LineString:Td.LINE_STRING,Point:Td.POINT,Polygon:Td.POLYGON,MultiLineString:Td.LINE_STRING,MultiPoint:Td.POINT,MultiPolygon:Td.POLYGON};let h1={};class rbe extends fpe{accuracy_;encodeStyles_;propertiesFunction_;setStyle_;prevX_;prevY_;constructor(e){super();const t=e??{};this.accuracy_=t.accuracy??sbe,this.encodeStyles_=t.encodeStyles??!0,this.propertiesFunction_=t.properties??obe,this.setStyle_=t.setStyle??!0,this.prevX_=0,this.prevY_=0,h1=t.propertiesType!==void 0&&t.propertiesType}decodeCoordinates_(e,t){const i=e.length;let n=0;const s=t!==void 0?t:[];let r=s.length;for(;n<i;){let l,u=0,d=0;do l=lC.indexOf(e.charAt(n++)),d|=(l&31)<<u,u+=5;while(l>=32);const h=d&1?~(d>>1):d>>1;this.prevX_+=h,u=0,d=0;do l=lC.indexOf(e.charAt(n++)),d|=(l&31)<<u,u+=5;while(l>=32);const g=d&1?~(d>>1):d>>1;this.prevY_+=g,s[r++]=this.prevX_*this.accuracy_,s[r++]=this.prevY_*this.accuracy_}return s}encodeCoordinates_(e,t,i,n){let s="";for(let r=i;r<n;r+=t){let l=e[r],u=e[r+1];l=Math.floor(l/this.accuracy_),u=Math.floor(u/this.accuracy_);const d=l-this.prevX_,h=u-this.prevY_;this.prevX_=l,this.prevY_=u,s+=zk(d)+zk(h)}return s}readFeatureFromText(e){let t=e.indexOf("~");const i=t>=0?e.substring(0,t)+")":e,n=this.readGeometryFromText(i),s=new Di(n);if(t>=0){const r=e.substring(t+1,e.length-1);t=r.indexOf("~");const l=t>=0?r.substring(0,t):r;if(l!=""){const u=l.split("'");for(let d=0;d<u.length;++d){const g=u[d].split("*");let y=g[0];const x=g[1];!this.setStyle_&&h1[y]&&(y=h1[y]),s.set(y,x)}}if(t>=0){const u=r.substring(t+1);this.setStyle_?vbe(u,s):xbe(u,s)}}return s}readFeaturesFromText(e){const t=[];for(e=e.substring(1);e.length>0;){const i=e.indexOf(")"),n=this.readFeatureFromText(e.substring(0,i+1));t.push(n),e=e.substring(i+1)}return t}readGeometryFromText(e){const t=Ebe[e[0]];return this.prevX_=0,this.prevY_=0,t.call(this,e)}getCastShortProperty(e,t){const i=Yg[t];return aB(t,e.get(i))}decodeShortProperties(e,t){const i=e.getGeometry()?.getType(),n=this.getCastShortProperty(e,"isCircle")?"drawnCircle":this.getCastShortProperty(e,"isLabel")?"drawnLabel":`drawn${i?.replace("String","")}`,s={showOrientation:!1,...Object.fromEntries(Lbe.map(d=>[d,this.getCastShortProperty(e,d)]))},r=e.get(Yg.name),l=e.get(Yg.description);Object.values(Yg).forEach(d=>e.unset(d));const u=Object.assign(new Tl,e,{id:Math.floor(Math.random()*Date.now()),label:r,description:l,display_order:t,selected:!1,map_id:void 0,saving:!1,featureType:n,featureStyle:s});return u.editable=u.map_id===void 0,u.setStyle(u.getStyleFunction()),u}writeFeatureText(e,t){const i=[];let n="";const s=e.getGeometry();s!=null&&(n=this.writeGeometryText(s,t)),n.length>0&&(n=n.substring(0,n.length-1),i.push(n));const r=[],l=function(d,h){if(h!==e.getGeometryName()){r.length!==0&&r.push("'");const g=h.replace(/[()'*]/g,"_")+"*"+d.toString().replace(/[()'*]/g,"_");r.push(g)}},u=this.propertiesFunction_(e);for(const d in u)l(u[d],d);if(r.length>0&&(i.push("~"),Array.prototype.push.apply(i,r)),this.encodeStyles_){const d=e.getStyleFunction();if(d!==void 0){let h=d.call(this,e,0);if(h!==null){const g=[];h=Array.isArray(h)?h:[h],ube(h,s?.getType(),g),g.length>0&&(i.push("~"),Array.prototype.push.apply(i,g))}}}return i.push(")"),i.join("")}writeFeaturesText(e,t){const i=[];if(e.length>0){i.push("F");for(let n=0,s=e.length;n<s;++n)i.push(this.writeFeatureText(e[n],t))}return i.join("")}writeGeometryText(e,t){const i=Mbe[e.getType()],n=au(e,!0,t);return this.prevX_=0,this.prevY_=0,i.call(this,n)}}const lC=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz",sbe=1;function obe(a){return a.getProperties()}function zk(a){let e=a<<1;return a<0&&(e=~e),lbe(e)}function lbe(a){let e="";for(;a>=32;)e+=lC.charAt(32|a&31),a>>=5;return e+=lC.charAt(a),e}function ube(a,e,t){const i=nbe[e];for(let n=0;n<a.length;++n){const s=a[n],r=s.getFill(),l=s.getImage(),u=s.getStroke(),d=s.getText();i==Td.POLYGON?r!==null&&u&&hbe(r,u,t):i==Td.LINE_STRING?u!==null&&cbe(u,t):i==Td.POINT&&l!==null&&dbe(l,t),d!==null&&_be(d,t)}}function cbe(a,e){WE(a,e)}function dbe(a,e){if(a instanceof Qr){const t=a.getRadius();e.length>0&&e.push("'"),e.push("pointRadius*"+t);const i=a.getFill();i!==null&&GE(i,e);const n=a.getStroke();n!==null&&WE(n,e)}}function hbe(a,e,t){GE(a,t),e!==null&&WE(e,t)}function GE(a,e,t){const i=t!==void 0?t:"fillColor",n=a.getColor();if(n!==null){const s=ql(n),r=jO(s);e.length>0&&e.push("'"),e.push(i+"*"+r)}}function WE(a,e){const t=a.getColor();if(t!==null){const n=ql(t),s=jO(n);e.length>0&&e.push("'"),e.push("strokeColor*"+s)}const i=a.getWidth();i!==void 0&&(e.length>0&&e.push("'"),e.push("strokeWidth*"+i))}function _be(a,e){const t=a.getFont();if(t!==void 0){const n=t.split(" ");n.length>=3&&(e.length>0&&e.push("'"),e.push("fontSize*"+n[1]))}const i=a.getFill();i!==null&&GE(i,e,"fontColor")}function mbe(a){a=a.substring(2,a.length-1);const e=this.decodeCoordinates_(a,[]);return new Ki(e,"XY")}function fbe(a){a=a.substring(2,a.length-1);let e=[];const t=[],i=a.split("'");for(let n=0,s=i.length;n<s;++n)e=this?.decodeCoordinates_(i[n],e),t[n]=e.length;return new Fu(e,"XY",t)}function gbe(a){a=a.substring(2,a.length-1);const e=this?.decodeCoordinates_(a);return new Ln(e)}function pbe(a){a=a.substring(2,a.length-1);const e=this?.decodeCoordinates_(a);return new $d(e)}function ybe(a){a=a.substring(2,a.length-1);let e=[];const t=[],i=a.split("'");for(let n=0,s=i.length;n<s;++n){e=this?.decodeCoordinates_(i[n],e);let r=e.length;n===0?(e[r++]=e[0],e[r++]=e[1]):(e[r++]=e[t[n-1]],e[r++]=e[t[n-1]+1]),t[n]=r}return new Gs(e,"XY",t)}function bbe(a){a=a.substring(2,a.length-1);let e=[];const t=[],i=a.split(")(");for(let n=0,s=i.length;n<s;++n){const r=i[n].split("'"),l=t[n]=[];for(let u=0,d=r.length;u<d;++u){e=this?.decodeCoordinates_(r[u],e);let h=e.length;u===0?(e[h++]=e[0],e[h++]=e[1]):(e[h++]=e[l[u-1]],e[h++]=e[l[u-1]+1]),l[u]=h}}return new y_(e,"XY",t)}function vbe(a,e){if(a=="")return;const t=iB(a),i=t.fillColor,n=t.fontSize,s=t.fontColor,r=t.pointRadius,l=t.strokeColor,u=t.strokeWidth;let d;i!==void 0&&(d=new ji({color:i}));let h;l!==void 0&&u!==void 0&&(h=new Li({color:l,width:u}));let g;r!==void 0&&(g=new Qr({radius:r,fill:d,stroke:h}),d=h=void 0);let y;n!==void 0&&s!==void 0&&(y=new rh({font:n+" sans-serif",fill:new ji({color:s})}));const x=new $a({fill:d,image:g,stroke:h,text:y});e.setStyle(x)}function xbe(a,e){const t=iB(a),i=e.getGeometry();if(i instanceof Ln?t.isLabel||t[Fh.IS_TEXT]?(delete t.strokeColor,delete t.fillColor):(delete t.fontColor,delete t.fontSize):(delete t.fontColor,i instanceof Ki&&(delete t.fillColor,delete t.fillOpacity)),t.fontSize){let s=parseFloat(t.fontSize);t.fontSize.indexOf("px")!==-1&&(s=Math.round(s/1.333333)),t.fontSize=s}const n={};for(const s in t){const r=t[s];h1[s]?n[h1[s]]=r:n[s]=r}e.setProperties(n)}function aB(a,e){const t=[Fh.ANGLE,Fh.OPACITY,Fh.SIZE,Fh.STROKE,"pointRadius","strokeWidth","stroke","angle","opacity","size"],i=[Fh.IS_RECTANGLE,Fh.IS_TEXT,Fh.SHOW_MEASURE,"isCircle","isRectangle","isLabel","showMeasure","showOrientation"];return t.includes(a)?+e:i.includes(a)?e==="true":e}function iB(a){const e=a.split("'"),t={};for(let i=0;i<e.length;++i){const s=e[i].split("*"),r=s[0],l=s[1];t[r]=aB(r,l)}return t}function wbe(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=t.length;return"l("+this?.encodeCoordinates_(t,i,0,n)+")"}function Cbe(a){const e=a,t=e.getEnds(),i=t.length,n=e.getFlatCoordinates(),s=e.getStride();let r=0;const l=["L("];for(let u=0;u<i;++u){const d=t[u],h=this?.encodeCoordinates_(n,s,r,d);u!==0&&l.push("'"),l.push(h),r=d}return l.push(")"),l.join("")}function Ibe(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=t.length;return"p("+this?.encodeCoordinates_(t,i,0,n)+")"}function Sbe(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=t.length;return"P("+this?.encodeCoordinates_(t,i,0,n)+")"}function nB(a,e,t,i,n){const s=i.length;for(let r=0;r<s;++r){const l=i[r]-e,u=this?.encodeCoordinates_(a,e,t,l);r!==0&&n.push("'"),n.push(u),t=i[r]}return t}function Abe(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=e.getEnds(),s=0,r=["a("];return nB.call(this,t,i,s,n,r),r.push(")"),r.join("")}function Tbe(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=e.getEndss(),s=n.length;let r=0;const l=["A"];for(let u=0;u<s;++u){const d=n[u];l.push("("),r=nB.call(this,t,i,r,d,l),l.push(")")}return l.join("")}const Ebe={P:pbe,L:fbe,A:bbe,l:mbe,p:gbe,a:ybe},Mbe={MultiLineString:Cbe,MultiPoint:Sbe,MultiPolygon:Tbe,LineString:wbe,Point:Ibe,Polygon:Abe},Yg={angle:"a",color:"c",description:"d",stroke:"e",isLabel:"i",linestyle:"l",name:"n",opacity:"o",showOrientation:"r",shape:"s",size:"t",isCircle:"u",symbolId:"symbolId",symboltype:"symboltype"},Lbe=["angle","color","stroke","linestyle","opacity","showOrientation","shape","size","symbolId","symboltype"],Gx=new rbe({encodeStyles:!1,properties:function(a){const e=a.toProperties();for(const t in e)if(e[t]===null||e[t]===void 0)delete e[t];else if(t==="__map_id__"||t==="fid")delete e[t];else if(Yg[t]){const i=e[t];delete e[t],e[Yg[t]]=i}return e}});window.Cypress&&(window.featureHash=Gx);class Rbe{featuresToUrl(e){if(!e)return"";const t=e.filter(i=>!i.map_id).sort((i,n)=>i.display_order-n.display_order).map(i=>{const n=new Tl(i);return tE(n)});return t.length>0?Gx.writeFeatures(t):""}urlToFeatures(e){return(e?Gx.readFeatures(e):[]).map((n,s)=>Gx.decodeShortProperties(n,s)).map(n=>$O(n))}}const Uk=new Rbe;class kbe{bootstrap(){this.restore();let e;e=Ar(()=>{this.persist(),e&&e()})}persist(){const{drawnFeatures:e}=xt($n());Rt(e,t=>{Oa.setValue(p3,t,Uk.featuresToUrl)},{immediate:!0})}restore(){const{drawnFeatures:e}=xt($n()),i=Oa.getValue(p3,Uk.urlToFeatures).filter(n=>n!=null);i.forEach(n=>{n.map_id=void 0}),e.value=[...e.value,...i]}}const Pbe=new kbe;class Gbe{bootstrap(){this.restore();let e;e=Ar(()=>{this.persist(),e&&e()})}persist(){const{locationInfoCoords:e}=xt(nf());Rt(e,t=>{t===void 0?Oa.removeItem(b4):(Oa.setValue(b4,!0),Oa.setValue(b3,t[0]),Oa.setValue(v3,t[1]))},{immediate:!0})}restore(){const{locationInfoCoords:e}=xt(nf()),t=qa().getOlMap(),i=Oa.getValue(b4);i&&i!=="false"&&(e.value=t.getView().getCenter())}}const Wbe=new Gbe,Obe={key:0,"data-cy":"attributionControl",class:"absolute bottom-0 z-10 text-[0.8em] px-[4px] text-[#6b818f] bg-[#ffffffb3]"},Fbe=rt({__name:"attribution-control",setup(a){const e=Vi(),t=Ye("");return Ar(()=>{t.value=e.bgLayer?.metadata?.attribution||""}),(i,n)=>{const s=El("dompurify-html");return t.value?Sa((U(),se("div",Obe,null,512)),[[s,t.value]]):Ge("",!0)}}});function Kp(a,e){const t=new a(e),i=qa(),n=Ps("olMap");return fn(()=>{n.addControl(t),n.changed()}),Nr(()=>{const s=i.getOlMap();s.removeControl(t),s.changed()}),{control:t}}const Nbe=["title"],Bbe=rt({__name:"location-control",props:{className:{default:"location-button"},label:{default:""},tipLabel:{default:"Location"}},setup(a){const{t:e}=Ct(),{addNotification:t}=ar(),i=a,n=Ye(null),s=Ye(!1);let r=null,l=null,u=null,d=null,h=null;function g(){if(window.location.protocol!=="https:"&&window.location.hostname!=="localhost"){t(e("La geolocalisation n'est disponible que dans la version scurise du Geoportail (https). Voulez-vous tre automatiquement redirig?",{ns:"client"}),fi.WARNING);return}r===null&&y(),r?.getTracking()?(C(),r?.setTracking(!1)):(x(),h?.getView().setZoom(17),r?.setTracking(!0))}function y(){h&&(r=new ile({projection:h.getView().getProjection(),trackingOptions:{enableHighAccuracy:!0,maximumAge:6e4,timeout:7e3}}),r.on("change:tracking",()=>{s.value=r?.getTracking()??!1}),r.on("change:position",()=>{const I=r?.getPosition();I&&l&&(l.setGeometry(new Ln(I)),h?.getView().setCenter(I))}),r.on("change:accuracyGeometry",()=>{const I=r?.getAccuracyGeometry();I&&u&&u.setGeometry(I)}),r.on("error",I=>{if(C(),I.message&&I.message.length>0){const A=e("Erreur lors de l'acquisition de la position :",{ns:"client"})+" "+I.message;t(A,fi.ERROR)}}))}function x(){h&&(d||(l=new Di,l.setStyle(new $a({image:new Qr({radius:6,fill:new ji({color:"#3399CC"}),stroke:new Li({color:"#fff",width:2})})})),u=new Di,u.setStyle(new $a({fill:new ji({color:"rgba(51, 153, 204, 0.2)"}),stroke:new Li({color:"#3399CC",width:2})})),d=new bs({source:new lo({features:[]}),zIndex:1e3}),h.addLayer(d)),d.getSource()?.clear(),u?.setGeometry(void 0),l?.setGeometry(void 0),u&&l&&(d.getSource()?.addFeature(u),d.getSource()?.addFeature(l)))}function C(){d?.getSource()?.clear()}return fn(()=>{h=qa().getOlMap(),Kp(ih,{...i,target:n})}),Nr(()=>{r&&r.setTracking(!1),d&&h&&h.removeLayer(d)}),(I,A)=>(U(),se("div",{ref_key:"controlElement",ref:n,class:Fa([{"tracker-on":s.value,"tracker-off":!s.value},i.className,R(Bc),R(w_)])},[P("button",{title:R(e)(i.tipLabel),onClick:g},K(i.label),9,Nbe)],2))}}),Dbe=ir(Bbe,[["__scopeId","data-v-74224a7f"]]),Vbe={class:"scale-selector dropup"},Zbe=["aria-label","aria-expanded","aria-controls"],zbe=["innerHTML"],Ube=["aria-labelledby"],Hbe=["onClick","aria-label"],Xbe=["innerHTML"],qbe=rt({__name:"scale-selector",setup(a){const{t:e}=Ct(),{getOlMap:t}=qa(),i=t(),{minZoom:n,maxZoom:s}=xt(Vi()),r=Ye(!1),l=Ye(null),u=Ye(null);let d=null,h=null;const g={8:"1&nbsp;:&nbsp;1'500'000",9:"1&nbsp;:&nbsp;750'000",10:"1&nbsp;:&nbsp;400'000",11:"1&nbsp;:&nbsp;200'000",12:"1&nbsp;:&nbsp;100'000",13:"1&nbsp;:&nbsp;50'000",14:"1&nbsp;:&nbsp;25'000",15:"1&nbsp;:&nbsp;12'000",16:"1&nbsp;:&nbsp;6'000",17:"1&nbsp;:&nbsp;3'000",18:"1&nbsp;:&nbsp;1'500",19:"1&nbsp;:&nbsp;750",20:"1&nbsp;:&nbsp;400",21:"1&nbsp;:&nbsp;200"},y=Ye(void 0),x=St(()=>{const ce=n.value??8,me=s.value??19,X={};return Object.keys(g).forEach(de=>{const N=Number(de);N>=ce&&N<=me&&(X[N]=g[N])}),X}),C=St(()=>Object.keys(x.value).map(Number).sort((ce,me)=>ce-me)),I=ce=>x.value[ce]||g[ce]||"",A=ce=>ce.replace(/&nbsp;/g," ").replace(/'/g,"'"),E=St(()=>y.value!==void 0?y.value:""),L=St(()=>y.value?A(y.value):e("No scale")),G=ce=>{const me=i.getView();me&&(me.setZoom(ce),r.value=!1),so(()=>{l.value?.focus()})},F=()=>{const ce=i.getView();if(!ce)return;const me=Math.round(ce.getZoom()||0),X=g[me];X!==void 0&&(y.value=X)},B=()=>{d!==null&&yl(d);const ce=i.getView();ce&&(d=ce.on("change:resolution",F))},Z=()=>{r.value=!r.value,r.value&&so(()=>{u.value?.querySelector("a")?.focus()})},Y=ce=>{ce.key==="Enter"||ce.key===" "?(ce.preventDefault(),ce.stopPropagation(),Z()):ce.key==="Escape"&&r.value?(ce.preventDefault(),ce.stopPropagation(),r.value=!1):ce.key==="ArrowDown"&&!r.value?(ce.preventDefault(),ce.stopPropagation(),Z()):(ce.key==="ArrowUp"||ce.key==="ArrowDown")&&ce.stopPropagation()},$=ce=>{const me=Array.from(u.value?.querySelectorAll("a")||[]),X=me.findIndex(de=>de===document.activeElement);if(ce.key==="Escape")ce.preventDefault(),ce.stopPropagation(),r.value=!1,l.value?.focus();else if(ce.key==="ArrowDown"){ce.preventDefault(),ce.stopPropagation();const de=(X+1)%me.length;me[de]?.focus()}else if(ce.key==="ArrowUp"){ce.preventDefault(),ce.stopPropagation();const de=X<=0?me.length-1:X-1;me[de]?.focus()}else ce.key==="Home"?(ce.preventDefault(),ce.stopPropagation(),me[0]?.focus()):ce.key==="End"?(ce.preventDefault(),ce.stopPropagation(),me[me.length-1]?.focus()):ce.key==="Tab"&&(r.value=!1)},te=ce=>{const me=ce.target;l.value&&!l.value.contains(me)&&u.value&&!u.value.contains(me)&&(r.value=!1)};return fn(()=>{const ce=i.getView();if(ce){const X=ce.getZoom();X!==void 0&&(y.value=g[Math.round(X)])}B();const me=i.getView();me&&(h=me.on("change",()=>{B(),F()})),document.addEventListener("click",te)}),sf(()=>{d!==null&&yl(d),h!==null&&yl(h),document.removeEventListener("click",te)}),(ce,me)=>(U(),se("div",Vbe,[P("button",{type:"button",class:"scale-button",onClick:Z,onKeydown:Y,ref_key:"dropdownButton",ref:l,"aria-label":R(e)("Select scale")+": "+L.value,"aria-expanded":r.value,"aria-haspopup":"true","aria-controls":r.value?"scale-menu":void 0},[P("span",{innerHTML:E.value,"aria-hidden":"true"},null,8,zbe),me[0]||(me[0]=Dt("",-1)),me[1]||(me[1]=P("span",{class:"caret","aria-hidden":"true"},null,-1))],40,Zbe),Sa(P("ul",{ref_key:"dropdownMenu",ref:u,id:"scale-menu",class:"scale-dropdown",role:"menu",onKeydown:$,"aria-labelledby":l.value?"scale-button":void 0},[(U(!0),se(Tt,null,gi(C.value,X=>(U(),se("li",{key:X,role:"none"},[P("a",{href:"#",role:"menuitem",onClick:_r(de=>G(X),["prevent"]),"aria-label":A(I(X)),tabindex:"0"},[P("span",{innerHTML:I(X)},null,8,Xbe)],8,Hbe)]))),128))],40,Ube),[[Zm,r.value]])]))}}),Ybe=ir(qbe,[["__scopeId","data-v-1f8cd5e5"]]),J4="units",Kbe=[1,2,5],_0=25.4/.28;let jbe=class extends ih{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+Bc,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(J4,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(J4)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(J4,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,i=e.projection,n=this.getUnits(),s=n=="degrees"?"degrees":"m";let r=A1(i,e.resolution,t,s);const l=this.minWidth_*(this.dpi_||_0)/_0,u=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||_0)/_0:void 0;let d=l*r,h="";if(n=="degrees"){const G=Um.degrees;d*=G,d<G/60?(h="",r*=3600):d<G?(h="",r*=60):h=""}else if(n=="imperial")d<.9144?(h="in",r/=.0254):d<1609.344?(h="ft",r/=.3048):(h="mi",r/=1609.344);else if(n=="nautical")r/=1852,h="NM";else if(n=="metric")d<1e-6?(h="nm",r*=1e9):d<.001?(h="m",r*=1e6):d<1?(h="mm",r*=1e3):d<1e3?h="m":(h="km",r/=1e3);else if(n=="us")d<.9144?(h="in",r*=39.37):d<1609.344?(h="ft",r/=.30480061):(h="mi",r/=1609.3472);else throw new Error("Invalid units");let g=3*Math.floor(Math.log(l*r)/Math.log(10)),y,x,C,I=0,A,E;for(;;){C=Math.floor(g/3);const G=Math.pow(10,C);if(y=Kbe[(g%3+3)%3]*G,x=Math.round(y/r),isNaN(x)){this.element.style.display="none",this.renderedVisible_=!1;return}if(u!==void 0&&x>=u){y=I,x=A,C=E;break}else if(x>=l)break;I=y,A=x,E=C,++g}const L=this.scaleBar_?this.createScaleBar(x,y,h):y.toFixed(C<0?-C:0)+" "+h;this.renderedHTML_!=L&&(this.innerElement_.innerHTML=L,this.renderedHTML_=L),this.renderedWidth_!=x&&(this.innerElement_.style.width=x+"px",this.renderedWidth_=x),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){const n=this.getScaleForResolution(),s=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),r=this.scaleBarSteps_,l=e/r,u=[this.createMarker("absolute")];for(let h=0;h<r;++h){const g=h%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";u.push(`<div><div class="ol-scale-singlebar ${g}" style="width: ${l}px;"></div>`+this.createMarker("relative")+(h%2===0||r===2?this.createStepText(h,e,!1,t,i):"")+"</div>")}return u.push(this.createStepText(r,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+u.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,i,n,s){const l=(e===0?0:Math.round(n/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),u=e===0?-3:t/this.scaleBarSteps_*-1,d=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${u}px;text-align: ${e===0?"left":"center"};min-width: ${d}px;left: ${i?t+"px":"unset"};">`+l+"</div>"}getScaleForResolution(){const e=A1(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||_0,i=1e3/25.4;return e*i*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}};const $be={class:"scaleline-wrapper"},Jbe=rt({__name:"scale-line",setup(a){const{getOlMap:e}=qa(),t=e(),i=Ye(null);let n=null;return fn(()=>{i.value&&(n=new jbe({target:i.value,units:"metric",bar:!1,text:!0,minWidth:64}),t.addControl(n))}),sf(()=>{n&&(t.removeControl(n),n=null)}),(s,r)=>(U(),se("div",$be,[P("div",{ref_key:"scaleLineContainer",ref:i,class:"scaleline-container"},null,512)]))}}),Qbe=ir(Jbe,[["__scopeId","data-v-21f5738c"]]),Q4="projection",Hk="coordinateFormat";class eve extends ih{constructor(e){e=e||{};const t=document.createElement("div");t.className=e.className!==void 0?e.className:"ol-mouse-position",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(Q4,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=e.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=t.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=e.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(Hk)}getProjection(){return this.get(Q4)}handleMouseMove(e){const t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const t=e.getViewport();this.listenerKeys.push(xa(t,E1.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(xa(t,E1.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(Hk,e)}setProjection(e){this.set(Q4,Wi(e))}updateHTML_(e){let t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){const s=this.getProjection();s?this.transform_=Fp(this.mapProjection_,s):this.transform_=dP}const n=this.getMap().getCoordinateFromPixelInternal(e);if(n){if(this.transform_(n,n),this.wrapX_){const r=this.getProjection()||this.mapProjection_;kC(n,r)}const s=this.getCoordinateFormat();s?t=s(n):t=n.toString()}}(!this.renderedHTML_||t!==this.renderedHTML_)&&(this.element.innerHTML=t,this.renderedHTML_=t)}render(e){const t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}const tve={class:"projection-selector-wrapper"},ave={class:"projection-selector dropup"},ive=["aria-label","aria-expanded","aria-controls"],nve={class:"projection-label","aria-hidden":"true"},rve=["aria-labelledby"],sve=["onClick","aria-current"],ove=["aria-label"],lve=rt({__name:"projection-selector",setup(a){const{t:e}=Ct(),{getOlMap:t}=qa(),i=t(),{coordinateString:n}=ZO(),s=Ye(!1),r=Ye(null),l=Ye(null),u=Ye(null);let d=null;const h=[{label:"LUREF",value:"EPSG:2169"},{label:"Lon/Lat WGS84",value:"EPSG:4326"},{label:"Lon/Lat WGS84 DMS",value:"EPSG:4326:DMS"},{label:"Lon/Lat WGS84 DM",value:"EPSG:4326:DMm"},{label:"WGS84 UTM 32|31",value:"EPSG:3263*"}],g=Ye(h[0]),y=St(()=>g.value.label),x=G=>{if(!G)return"";const F=i.getView().getProjection().getCode(),B=g.value.value;return B==="EPSG:4326:DMS"?n(G,F,"EPSG:4326",!0,!1):B==="EPSG:4326:DMm"?n(G,F,"EPSG:4326",!1,!0):n(G,F,B,!1,!1)},C=G=>{g.value=G,s.value=!1,d&&d.setCoordinateFormat(x),so(()=>{r.value?.focus()})},I=()=>{s.value=!s.value,s.value&&so(()=>{l.value?.querySelector("a")?.focus()})},A=G=>{G.key==="Enter"||G.key===" "?(G.preventDefault(),G.stopPropagation(),I()):G.key==="Escape"&&s.value?(G.preventDefault(),G.stopPropagation(),s.value=!1):G.key==="ArrowDown"&&!s.value&&(G.preventDefault(),G.stopPropagation(),I())},E=G=>{const F=Array.from(l.value?.querySelectorAll("a")||[]),B=F.findIndex(Z=>Z===document.activeElement);if(G.key==="Escape")G.preventDefault(),G.stopPropagation(),s.value=!1,r.value?.focus();else if(G.key==="ArrowDown"){G.preventDefault(),G.stopPropagation();const Z=(B+1)%F.length;F[Z]?.focus()}else if(G.key==="ArrowUp"){G.preventDefault(),G.stopPropagation();const Z=B<=0?F.length-1:B-1;F[Z]?.focus()}else G.key==="Home"?(G.preventDefault(),G.stopPropagation(),F[0]?.focus()):G.key==="End"?(G.preventDefault(),G.stopPropagation(),F[F.length-1]?.focus()):G.key==="Tab"&&(s.value=!1)},L=G=>{const F=G.target;r.value&&!r.value.contains(F)&&l.value&&!l.value.contains(F)&&(s.value=!1)};return fn(()=>{u.value&&(d=new eve({className:"custom-mouse-coordinates",target:u.value,coordinateFormat:x,projection:void 0}),i.addControl(d)),document.addEventListener("click",L)}),sf(()=>{d&&(i.removeControl(d),d=null),document.removeEventListener("click",L)}),(G,F)=>(U(),se("div",tve,[P("div",ave,[P("button",{type:"button",class:"projection-button",onClick:I,onKeydown:A,ref_key:"dropdownButton",ref:r,"aria-label":R(e)("Select projection")+": "+y.value,"aria-expanded":s.value,"aria-haspopup":"true","aria-controls":s.value?"projection-menu":void 0},[P("span",nve,K(y.value),1),F[0]||(F[0]=P("span",{class:"caret","aria-hidden":"true"},null,-1))],40,ive),Sa(P("ul",{ref_key:"dropdownMenu",ref:l,id:"projection-menu",class:"projection-dropdown",role:"menu",onKeydown:E,"aria-labelledby":r.value?"projection-button":void 0},[(U(),se(Tt,null,gi(h,B=>P("li",{key:B.value,role:"none"},[P("a",{href:"#",role:"menuitem",onClick:_r(Z=>C(B),["prevent"]),class:Fa({active:B.value===g.value.value}),"aria-current":B.value===g.value.value?"true":void 0,tabindex:"0"},K(B.label),11,sve)])),64))],40,rve),[[Zm,s.value]])]),P("div",{ref_key:"mousePositionContainer",ref:u,class:"mouse-position",role:"status","aria-live":"polite","aria-label":R(e)("Current coordinates")},null,8,ove)]))}}),uve=ir(lve,[["__scopeId","data-v-5fe08aa6"]]),cve=["aria-label"],dve={class:"elevation-label"},hve={class:"elevation-value",role:"status","aria-live":"polite"},_ve=rt({__name:"elevation-display",setup(a){const{t:e}=Ct(),{getOlMap:t}=qa(),i=t(),n=Ye("N/A");let s=null;const r=d=>d===null||d<=0?"N/A":`${d.toFixed(2)} m`,l=async d=>{if(d.coordinate)try{const h=await QO(d.coordinate);n.value=r(h)}catch{n.value="N/A"}},u=d=>{l(d)};return fn(()=>{s=xa(i,"pointermove",u)}),sf(()=>{s&&(yl(s),s=null)}),(d,h)=>(U(),se("div",{class:"elevation-display","aria-label":R(e)("Elevation at cursor position")},[P("span",dve,K(R(e)("Elevation"))+":",1),P("span",hve,K(n.value),1)],8,cve))}}),mve=ir(_ve,[["__scopeId","data-v-71c32fcf"]]),fve=["aria-label"],gve={class:"infobar-item"},pve={class:"infobar-item"},yve={class:"!hidden lg:!flex infobar-item-projection"},bve={class:"!hidden lg:!flex infobar-item-elevation"},vve=rt({__name:"infobar-content",setup(a){const{t:e}=Ct();return(t,i)=>(U(),se("div",{class:"infobar",role:"toolbar","aria-label":R(e)("Map information toolbar")},[P("div",gve,[gt(Ybe)]),i[0]||(i[0]=P("div",{class:"infobar-separator","aria-hidden":"true"},null,-1)),P("div",pve,[gt(Qbe)]),i[1]||(i[1]=P("div",{class:"!hidden lg:!block infobar-separator","aria-hidden":"true"},null,-1)),P("div",yve,[gt(uve)]),i[2]||(i[2]=P("div",{class:"!hidden lg:!block infobar-separator","aria-hidden":"true"},null,-1)),P("div",bve,[gt(mve)])],8,fve))}}),xve=ir(vve,[["__scopeId","data-v-f917cdb1"]]),wve={key:0,class:"infobar-container"},Cve=["title"],Ive=rt({__name:"infobar-control",props:{className:{default:"infobar-button"},label:{default:""},tipLabel:{default:"Infobar"}},setup(a){const e=Ye(!1),{t}=Ct(),i=a;function n(){e.value=!e.value}return(s,r)=>(U(),se("div",{class:Fa([[i.className,R(w_)],"infobar-wrapper"])},[e.value?(U(),se("div",wve,[gt(xve)])):Ge("",!0),P("div",{ref:"controlElement",class:Fa([{"infobar-on":e.value,"infobar-off":!e.value},R(Bc)])},[P("button",{title:R(t)(i.tipLabel),onClick:n},K(i.label),9,Cve)],2)],2))}}),Sve=ir(Ive,[["__scopeId","data-v-d41d0ac3"]]),Ave=["href","title"],Tve=rt({__name:"map-3d",props:{className:{default:"map-3d-button"},label:{default:"3D"},tipLabel:{default:"3D"}},setup(a){const e="https://geoportail-luxembourg.github.io/3dviewer/lux/",t=[6.13,49.61],i=["catalogConfig","LuxConfig"],n={9:35e4,10:18e4,11:1e5,12:4e4,13:25e3,14:9e3,15:6e3,16:3500,17:1900,18:900,19:600},s=Vi(),{t:r}=Ct(),l=a,{x:u,y:d,zoom:h,layers:g,bgLayer:y,rotation:x}=xt(s),C=Ye(null),I=St(()=>{const[G,F]=A(u.value,d.value),B=E(h.value??12),Z=L(x.value??0),Y=g.value.map(ce=>JSON.stringify([ce.name,1,0])),$=y.value?JSON.stringify([y.value.name,1,0]):null;$&&Y.unshift($);const te=`[[[${[G,F,B].join(",")}],[${[G,F,B].join(",")}],300,${Z},-90,0],"cesium",["${i.join('","')}"],[${Y.join(",")}],[],0]`;return`${e}?state=${encodeURIComponent(te)}`});fn(()=>{window.name="lux2d",Kp(ih,{...l,target:C})});function A(G,F){return G&&F?bc([G,F]):t}function E(G){const Z=Math.max(9,Math.min(19,Math.round(G)));return n[Z]}function L(G){const F=-((G*(180/Math.PI)+360)%360);return Math.round(F)}return(G,F)=>(U(),se("div",{"data-cy":"3dViewerLink",ref_key:"controlElement",ref:C,class:Fa(`${l.className} ${R(Bc)} ${R(w_)}`)},[P("a",{type:"button",target:"lux3d",href:I.value,title:R(r)(l.tipLabel)},"3D",8,Ave)],2))}}),Eve=ir(Tve,[["__scopeId","data-v-05085833"]]),Xk=["fullscreenchange","webkitfullscreenchange"],qk={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class Mve extends ih{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const i=e.labelActive!==void 0?e.labelActive:"";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const n=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=n,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(Ka.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Bc} ${w_}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(Yk(t))if(Kk(t))Rve(t);else{let i;this.source_?i=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:i=e.getTargetElement(),this.keys_?Lve(i):rB(i)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=Kk(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(lw(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(qk.ENTERFULLSCREEN)):(lw(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(qk.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(fs.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(fs.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let i=0,n=e.length;i<n;++i)mn(e[i]);e.length=0;const t=this.getMap();if(t){const i=t.getOwnerDocument();Yk(i)?this.element.classList.remove(BL):this.element.classList.add(BL);for(let n=0,s=Xk.length;n<s;++n)e.push(xa(i,Xk[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function Yk(a){const e=a.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&a.fullscreenEnabled)}function Kk(a){return!!(a.webkitIsFullScreen||a.fullscreenElement)}function rB(a){a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()}function Lve(a){a.webkitRequestFullscreen?a.webkitRequestFullscreen():rB(a)}function Rve(a){a.exitFullscreen?a.exitFullscreen():a.webkitExitFullscreen&&a.webkitExitFullscreen()}const kve=rt({__name:"fullscreen-control",props:{className:{},label:{default:""},labelActive:{default:""}},setup(a){return Kp(Mve,a),(t,i)=>Ge("",!0)}}),Pve=rt({__name:"zoom-control",props:{className:{},zoomInLabel:{default:""},zoomOutLabel:{default:""}},setup(a){return Kp(OP,a),(t,i)=>Ge("",!0)}}),Gve=rt({__name:"rotate-control",props:{className:{},label:{}},setup(a){return Kp(WP,a),(t,i)=>Ge("",!0)}});let Wve=class extends ih{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null,this.fitOptions=e.fitOptions||{};const t=e.className!==void 0?e.className:"ol-zoom-extent",i=e.label!==void 0?e.label:"E",n=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=n,s.appendChild(typeof i=="string"?document.createTextNode(i):i),s.addEventListener(Ka.CLICK,this.handleClick_.bind(this),!1);const r=t+" "+Bc+" "+w_,l=this.element;l.className=r,l.appendChild(s)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),i=this.extent?Zl(this.extent,t.getProjection()):t.getProjection().getExtent();t.fitInternal(BA(i),this.fitOptions)}};class Ove extends Wve{ol3dm;constructor(e){super(e)}handleZoomToExtent(){this.ol3dm&&this.ol3dm.luxCameraExtentInRadians&&this.ol3dm.is3dEnabled()||super.handleZoomToExtent()}}const Fve=rt({__name:"zoom-to-extent-control",props:{className:{},label:{default:""},tipLabel:{},extent:{}},setup(a){return Kp(Ove,a),(t,i)=>Ge("",!0)}}),jk=rt({__name:"map-container",props:{v4_standalone:{type:Boolean,default:!1}},setup(a){const e=ri(),{embedded:t}=xt(e),i=qa(),n=Ye(null),s=i.createMap(),r=a;s.getInteractions().forEach(d=>{d instanceof UA&&s.removeInteraction(d)});const l=new UA({condition:BX});s.addInteraction(l),r.v4_standalone&&(Q1e(),ebe(),H1e().addDrawLayer(s),X1e(),J1e().init(),xd.init(s));const u=[425152.9429259216,632446599999133e-8,914349.9239510496,6507914867875754e-9];return fn(()=>{n.value&&(new Z1e(s),new z1e(s),ibe.bootstrap(),Pbe.bootstrap(),Wbe.bootstrap(),s.setTarget(n.value),window.olMap=s)}),Ar(()=>{n.value&&t.value&&setTimeout(()=>{i.resize()},1e3)}),CC("olMap",s),(d,h)=>(U(),se("div",{id:"map-container","data-cy":"mapContainer",ref_key:"mapContainer",ref:n,class:"h-full w-full bg-white relative"},[gt(Pve),gt(Fve,{extent:u}),R(t)?Ge("",!0):(U(),se(Tt,{key:0},[gt(kve),gt(Fbe),a.v4_standalone?(U(),Lt(Eve,{key:0})):Ge("",!0),gt(Dbe),gt(Sve),gt(Gve)],64))],512))}});function Nve(a,e){return a.children&&!e.children||e.children?.length===0?1:e.children&&!a.children||a.children?.length===0?-1:0}function sB(a,e,t=0){const{name:i="",type:n=Ec.WMS,children:s}=a,r=`${n}||${e}||${i}`.split("-").join("%2D"),l=Vi();return{id:r,name:i,depth:t,children:s?.sort(Nve).map(u=>sB(u,e,t+1)),checked:l.hasLayer(r),expanded:!1}}function Bve(a){const e=decodeURIComponent(a),[t,i,n]=e.split("||");return oB({id:e,url:U1.getProxyfiedUrl(i),remoteLayer:{name:n,type:t}})}function oB({id:a,url:e,remoteLayer:t}){const{name:i="",type:n=Ec.WMS}=t;return{id:a,name:i,layers:i,url:e,type:n,imageType:VG.PNG}}const Dve={class:"relative text-center","data-cy":"remoteLayerModalContent"},Vve=["placeholder","value"],Zve={key:0,class:"text-center"},zve={class:"lux-label"},Uve={key:1,class:"text-center"},Hve={class:"lux-label"},Xve={key:2,class:"text-center"},qve={key:3,class:"overflow-auto max-h-[calc(400px-36px)]"},Yve=rt({__name:"remote-layers",setup(a){const{t:e}=Ct(),t=Vi(),i=no(),n=Ai([]),s=Ai(),{remoteLayersOpen:r}=xt(ri()),{setRemoteLayersOpen:l}=ri();let u=!1,d,h,g;Ar(y);function y(){s.value=s.value?fp.updateLayers(s.value,t.layers):void 0}H1.fetchRemoteWmsEndpoint().then(F=>{n.value=F.map(({url:B,label:Z})=>({label:Z,value:B}))});async function x(F){u=!0,g=await H1.getRemoteEndpoint(F).catch(()=>alert(e("Impossible de contacter ce WMS",{ns:"client"}))),h=F,u=!1}async function C(){const B=g?.getLayers();if(B&&B[0]){const Z=sB(B[0],h);s.value=fp.updateLayers(Z,t.layers)}}async function I(F){h=d=F,await x(h),C()}function A(F){d=F.target.value}async function E(){await x(d),C()}function L(F){s.value=fp.toggleNode(F.id,s.value,"expanded")}function G(F){const{id:B,name:Z}=F,Y=g;if(F.checked===!0)t.removeLayers(B);else{const $=Y?.getLayerByName(Z);if($){const te=i.initLayer(oB({id:B,url:U1.getProxyfiedUrl(h),remoteLayer:$}));t.addLayers(te)}}}return(F,B)=>R(r)?(U(),Lt(E_,{key:0,title:R(e)("Add external data",{ns:"client"}),onClose:B[0]||(B[0]=Z=>R(l)(!1))},{content:Ht(()=>[P("div",Dve,[gt(Qm,{class:"lux-remote-services-dropdown",options:n.value,placeholder:R(e)("Predefined wms",{ns:"client"}),onChange:I},null,8,["options","placeholder"]),P("input",{class:"lux-input w-[300px]",type:"url",placeholder:R(e)("Choose or write a WMS url",{ns:"client"}),value:R(h)||"",onChange:A},null,40,Vve),P("button",{type:"button",class:"lux-btn",onClick:E},K(R(e)("Get the layers",{ns:"client"})),1)]),!R(u)&&R(g)?(U(),se("div",Zve,[P("span",zve,K(R(e)("Description du service :",{ns:"client"})),1),Dt(" "+K(R(g).getServiceInfo()?.abstract),1)])):Ge("",!0),!R(u)&&R(g)?(U(),se("div",Uve,[P("span",Hve,K(R(e)("Access constraints :",{ns:"client"})),1),Dt(" "+K(R(g).getServiceInfo()?.constraints),1)])):Ge("",!0),R(u)?(U(),se("div",Xve,[B[1]||(B[1]=P("div",{class:"fa fa-refresh fa-spin"},null,-1)),P("span",null,K(R(e)("Chargement des informations",{ns:"client"})),1)])):Ge("",!0),R(u)?Ge("",!0):(U(),se("div",qve,[s.value?(U(),Lt(e5,{key:0,class:"block p-[10px] mb-[11px]",node:s.value,onToggleParent:L,onToggleLayer:G},null,8,["node"])):Ge("",!0)]))]),_:1},8,["title"])):Ge("",!0)}});class Kve{bootstrap(){let e;e=Ar(()=>{this.restore(),this.persist(),e&&e()})}persist(){const e=oC();Rt([()=>e.sliderActive,()=>e.sliderRatio],([t,i],[n])=>{t!==n&&Oa.setValue(x3,t),Oa.setValue(w3,i)})}restore(){const e=Oa.getValue(x3,UT),t=Oa.getValue(w3,Lm),{toggleSlider:i,setRatio:n}=oC();typeof e<"u"&&e!==null&&(i(e),typeof t!==void 0&&t!==null&&n(t??eB))}}const jve=new Kve,$ve=["onKeydown"],Jve={key:0,"data-cy":"sliderLayerLabel",class:"lux-slider-layer-label"},$k=30,Qve=rt({__name:"splitter-element",props:{sliderActive:{type:Boolean},sliderRatio:{},sliderTopLayer:{},sliderOffset:{},containerOffset:{}},emits:["moveSplitBar","escSplitBar"],setup(a,{expose:e,emit:t}){const i=a,n=t,{t:s}=Ct(),r=Ye(null),l=St(()=>({left:`${i.sliderOffset}px`}));let u=!1;e({sliderElement:r});function d(A){n("moveSplitBar",A+r.value.offsetWidth/2)}function h(){u=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",y)}function g(A){u&&d(A.clientX)}function y(){u=!1,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y)}function x(){const A=i.containerOffset+r.value.offsetLeft;d(A+$k)}function C(){const A=i.containerOffset+r.value.offsetLeft;d(A-$k)}function I(){n("escSplitBar")}return fn(()=>{r.value?.focus({focusVisible:!0})}),Nr(()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y)}),(A,E)=>(U(),se("button",{ref_key:"sliderElement",ref:r,onMousedown:h,onMousemove:g,onMouseup:y,onKeydown:[$r(_r(x,["stop"]),["space"]),$r(_r(x,["stop"]),["right"]),$r(_r(C,["stop"]),["left"]),$r(_r(C,["stop"]),["delete"]),$r(_r(I,["stop"]),["esc"])],class:"left-[20px] absolute h-full w-[32px] block",style:Nc(l.value),role:"seperator","aria-controls":"map-container","data-cy":"sliderElement"},[E[1]||(E[1]=P("span",{class:"lux-slider-line"},null,-1)),E[2]||(E[2]=P("span",{class:"lux-slider-arrows"},[P("span"),P("span")],-1)),a.sliderTopLayer?(U(),se("span",Jve,[E[0]||(E[0]=P("i",{class:"fa fa-arrow-left mr-2"},null,-1)),P("span",null,K(R(s)(a.sliderTopLayer.name)),1)])):Ge("",!0)],44,$ve))}}),e2e=rt({__name:"slider-comparator",setup(a){const e=oC(),t=bE(),i=qa().olMap,n=Ye(null),{sliderActive:s,sliderRatio:r,sliderTopLayer:l}=xt(e),u=St(()=>n.value?.sliderElement?.offsetWidth||0),d=Ye([0,0]),h=function(){let F=i.value?.getViewport()?.parentElement?.offsetLeft;return(F===void 0||F===0)&&(F=I?.offsetLeft),F!==void 0?F:0},g=St(()=>i.value&&n.value?r.value*d.value[0]-n.value?.sliderElement?.offsetWidth/2:0);let y,x,C,I;jve.bootstrap(),Rt([l,s],([F,B],[Z])=>{F&&B?(F!==Z&&E(),A()):E(),i.value?.render()}),Rt(g,()=>{i.value?.render()});function A(){const F=t.getLayerFromCache(l.value);d.value=i.value?.getSize(),F&&(y=F.on(Ko.PRERENDER,function(B){const Z=B.context,Y=g.value+u.value/2,$=k2(B,[0,0]),te=k2(B,[Y,0]),ce=k2(B,[0,d.value[1]]),me=k2(B,[Y,d.value[1]]);Z.save(),Z.beginPath(),Z.moveTo($[0],$[1]),Z.lineTo(ce[0],ce[1]),Z.lineTo(me[0],me[1]),Z.lineTo(te[0],te[1]),Z.closePath(),Z.clip()}),x=F.on(Ko.POSTRENDER,function(B){B.context.restore()}),C=i?.value.on("change:size",()=>{d.value=i.value?.getSize()}))}function E(){yl([y,x,C])}function L(F){const B=i.value?.getSize(),Z=(F-h())/B[0];e.setRatio(Z)}function G(){e.toggleSlider()}return fn(()=>{I=i.value?.getTargetElement()?.closest(".map-wrapper")}),Nr(()=>{E()}),(F,B)=>R(l)&&R(s)?(U(),Lt(Qve,{key:0,ref_key:"splitterElement",ref:n,sliderActive:R(s),sliderRatio:R(r),sliderTopLayer:R(l),sliderOffset:g.value,containerOffset:h(),onMoveSplitBar:L,onEscSplitBar:G},null,8,["sliderActive","sliderRatio","sliderTopLayer","sliderOffset","containerOffset"])):Ge("",!0)}}),t2e=rt({__name:"simple-style-item",props:{styleName:{},colors:{}},setup(a){const e=a;return(t,i)=>(U(!0),se(Tt,null,gi(e.colors,(n,s)=>(U(),se("span",{key:`${a.styleName}-${s}`,class:"grow m-px",style:Nc(`background-color: ${n}`)},"  ",4))),128))}}),a2e={class:"text-white border-2 p-[10px] m-[10px]"},i2e={class:"text-center mb-3"},n2e=["title"],r2e={class:"text-white"},s2e=["title","onClick"],o2e={class:"flex"},l2e=rt({__name:"simple-style-selector",setup(a){const{t:e}=Ct(),t=Tu(),i=T_(),{bgStyle:n}=xt(t),s=Dd().simple_styles.road,r=Ye(s);Rt(n,u=>r.value=i.checkSelection(u||[],s),{immediate:!0});function l(u){t.setSimpleStyle(u)}return(u,d)=>(U(),se("div",a2e,[P("h5",i2e,K(R(e)("Slectionner un set de couleurs",{ns:"client"})),1),(U(!0),se(Tt,null,gi(r.value,h=>(U(),se("div",{key:h.unlocalized_label,title:R(e)(h.unlocalized_label,{ns:"client"}),class:Fa(`${h.selected?"border-dotted":"border-hidden"} border-2 p-px`)},[P("span",r2e,K(R(e)(h.unlocalized_label,{ns:"client"}))+" : ",1),P("button",{title:R(e)("Select style: {{styleName}}",{ns:"app",styleName:R(e)(h.unlocalized_label)}),onClick:g=>l(h),class:"w-full"},[P("span",o2e,[gt(t2e,{colors:h.colors,"style-name":h.unlocalized_label},null,8,["colors","style-name"])])],8,s2e)],10,n2e))),128))]))}});function u2e(a){const e=c2e(a);return!e||!e.medium_style_class?[]:Dd().medium_default_styles[e.medium_style_class]}function c2e(a){return Dd().bg_layers.find(e=>e.id==a?.id)}const d2e={class:"flex w-full items-center"},h2e={for:"colorId",class:"w-40 m-0 font-medium"},_2e={class:"grow"},m2e=["value"],f2e=["checked","aria-label"],g2e=rt({__name:"medium-style-item",props:{style:{},colorEditable:{type:Boolean}},emits:["changeStyle"],setup(a,{emit:e}){const{t}=Ct(),i=a,n=e;function s(l){if(l.target){const u={...i.style,color:l.target.value};n("changeStyle",u)}}function r(l){if(l){const u={...i.style,visible:l.target.checked};n("changeStyle",u)}}return(l,u)=>(U(),se("div",d2e,[P("label",h2e,K(R(t)(a.style.label)),1),P("div",_2e,[a.colorEditable&&i.style.color?(U(),se("input",{key:0,id:"colorId",type:"color",class:"w-11 h-5 py-[1px] px-[2px]",value:i.style.color,onInput:s},null,40,m2e)):Ge("",!0)]),P("input",{type:"checkbox",class:"flex-none mr-3",checked:i.style.visible,onChange:r,"aria-label":R(t)("Show or hide {{thematicName}}",{ns:"app",thematicName:i.style.label})},null,40,f2e)]))}}),p2e={class:"text-white border-2 p-[10px] m-[10px]"},y2e={class:"text-center mb-3"},b2e=rt({__name:"medium-style-selector",props:{layer:{}},setup(a){const e=["basemap_2015_global"],t=Tu(),{bgStyle:i}=xt(t),{t:n}=Ct(),s=a,r=St(()=>e.includes(s.layer.name)),l=St(()=>i.value||u2e(s.layer));function u(d,h){i.value=l.value.map((g,y)=>y===d?h:g),t.disableExpertStyle()}return(d,h)=>(U(),se("div",p2e,[P("h5",y2e,K(r.value?R(n)("Slectionner une couleur par couche"):R(n)("Afficher une catgorie par couche")),1),(U(!0),se(Tt,null,gi(l.value,(g,y)=>(U(),Lt(g2e,{key:g.label,style:Nc(g),onChangeStyle:x=>u(y,x),colorEditable:r.value},null,8,["style","onChangeStyle","colorEditable"]))),128))]))}});var Wx={exports:{}},v2e=Wx.exports,Jk;function x2e(){return Jk||(Jk=1,(function(a,e){(function(t,i){i()})(v2e,function(){function t(d,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function i(d,h,g){var y=new XMLHttpRequest;y.open("GET",d),y.responseType="blob",y.onload=function(){u(y.response,h,g)},y.onerror=function(){console.error("could not download file")},y.send()}function n(d){var h=new XMLHttpRequest;h.open("HEAD",d,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function s(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(h)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof $h=="object"&&$h.global===$h?$h:void 0,l=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(d,h,g){var y=r.URL||r.webkitURL,x=document.createElement("a");h=h||d.name||"download",x.download=h,x.rel="noopener",typeof d=="string"?(x.href=d,x.origin===location.origin?s(x):n(x.href)?i(d,h,g):s(x,x.target="_blank")):(x.href=y.createObjectURL(d),setTimeout(function(){y.revokeObjectURL(x.href)},4e4),setTimeout(function(){s(x)},0))}:"msSaveOrOpenBlob"in navigator?function(d,h,g){if(h=h||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(t(d,g),h);else if(n(d))i(d,h,g);else{var y=document.createElement("a");y.href=d,y.target="_blank",setTimeout(function(){s(y)})}}:function(d,h,g,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof d=="string")return i(d,h,g);var x=d.type==="application/octet-stream",C=/constructor/i.test(r.HTMLElement)||r.safari,I=/CriOS\/[\d]+/.test(navigator.userAgent);if((I||x&&C||l)&&typeof FileReader<"u"){var A=new FileReader;A.onloadend=function(){var G=A.result;G=I?G:G.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=G:location=G,y=null},A.readAsDataURL(d)}else{var E=r.URL||r.webkitURL,L=E.createObjectURL(d);y?y.location=L:location.href=L,y=null,setTimeout(function(){E.revokeObjectURL(L)},4e4)}});r.saveAs=u.saveAs=u,a.exports=u})})(Wx)),Wx.exports}var lB=x2e();const w2e={class:"text-white border-2 p-[10px] m-[10px] flex flex-col overflow-hidden"},C2e={class:"text-center mb-3"},I2e={class:"flex flex-row justify-center"},S2e={class:"absolute top-[70px] w-full text-center text-base leading-3 font-medium text-white"},A2e={class:"text-white border-2 relative h-[100px] w-[85px] mx-[10px] my-0 mb-[15px] text-sm hover:bg-secondary"},T2e={class:"'block z-[5] w-full h-full cursor-pointer after:absolute after:pt-[15px] after:px-[15px] after:w-full after:text-center after:content-upload",for:"uploadMvtStyle"},E2e={class:"absolute top-[70px] w-full text-center text-base leading-3 font-medium"},M2e=["href"],L2e=rt({__name:"expert-style-selector",setup(a){const e=Vi(),t=Tu(),i=T_(),{appliedStyle:n}=xt(t),{t:s}=Ct();function r(){const d=n.value,h=JSON.stringify(d),g=new Blob([h],{type:"text/plain;charset=utf-8"});lB.saveAs(g,"styles.json")}function l(d){const h=d.target.files;if(h?.length!==1)return;const g=h[0];g.type==="application/json"&&(g.text().then(y=>{t.enableExpertStyle(),n.value=JSON.parse(y)}),d.target.value="")}function u(){return t.styleSerial===null?i.getDefaultMapBoxStyleUrl(i.getVectorId(e.bgLayer)):`${G0.mvtStylesGetUrl}?id=${t.styleSerial}`}return(d,h)=>(U(),se("div",w2e,[P("h5",C2e,K(R(s)("Lancer diteur externe ou importer json")),1),P("div",I2e,[P("a",{href:"#",class:"text-white border-2 relative h-[100px] w-[85px] mx-[10px] my-0 mb-[15px] z-5 text-sm after:absolute after:left-[20px] after:top-[10px] after:z-4 after:w-[3.6em] after:text-center after:content-download hover:bg-secondary",onClick:h[0]||(h[0]=g=>r())},[P("span",S2e,K(R(s)("Download style")),1)]),P("div",A2e,[P("label",T2e,[P("span",E2e,K(R(s)("Upload style")),1)]),P("input",{class:"invisible",type:"file",name:"uploadMvtStyle",id:"uploadMvtStyle",onChange:l},null,32)])]),P("a",{href:`https://maputnik.github.io/editor/?style=${u()}`,target:"_blank",class:"lux-btn text-center"},K(R(s)("Open Maputnik editor")),9,M2e)]))}}),R2e={key:0,class:"lux","data-cy":"styleSelector"},k2e={key:0,class:"mb-px"},P2e={key:1,class:"mb-px"},G2e={key:2,class:"mb-px"},W2e=rt({__name:"style-selector",setup(a){const{t:e}=Ct(),t=Vi(),i=ri(),n=Tu(),{bgStyle:s,isExpertStyleActive:r}=xt(n),{bgLayer:l}=xt(t),{styleEditorOpenedSection:u}=xt(i),d=T_(),h=St(()=>d.getStyleCapabilitiesFromLayer(l.value)),g=St(()=>h.value.styleEditors);Rt(l,I=>{d.isLayerStyleEditable(I)?y():i.closeStyleEditorPanel()}),fn(()=>{y()});function y(){(!u.value||!g.value.includes(u.value))&&(u.value=g.value[0])}function x(){n.setStyle(null)}function C(I){u.value=u.value===I?void 0:I}return(I,A)=>h.value.isEditable?(U(),se("div",R2e,[g.value.includes(R(ml).simpleStyle)?(U(),se("div",k2e,[gt(Ex,{title:R(e)("Simple"),expanded:R(u)===R(ml).simpleStyle,onTogglePanel:A[0]||(A[0]=()=>C(R(ml).simpleStyle))},{default:Ht(()=>[gt(l2e)]),_:1},8,["title","expanded"])])):Ge("",!0),g.value.includes(R(ml).mediumStyle)?(U(),se("div",P2e,[gt(Ex,{title:R(e)("Medium"),expanded:R(u)===R(ml).mediumStyle,onTogglePanel:A[1]||(A[1]=()=>C(R(ml).mediumStyle))},{default:Ht(()=>[R(l)?(U(),Lt(b2e,{key:0,layer:R(l)},null,8,["layer"])):Ge("",!0)]),_:1},8,["title","expanded"])])):Ge("",!0),g.value.includes(R(ml).advancedStyle)?(U(),se("div",G2e,[gt(Ex,{title:R(e)("Expert (style.json)"),expanded:R(u)===R(ml).advancedStyle,onTogglePanel:A[2]||(A[2]=()=>C(R(ml).advancedStyle))},{default:Ht(()=>[R(l)?(U(),Lt(L2e,{key:0,layer:R(l)},null,8,["layer"])):Ge("",!0)]),_:1},8,["title","expanded"])])):Ge("",!0),R(s)||R(r)?(U(),se("button",{key:3,onClick:x,class:"lux-btn my-2"},K(R(e)("Rinitialiser style",{ns:"client"})),1)):Ge("",!0)])):Ge("",!0)}}),O2e=rt({__name:"style-panel",setup(a){const{t:e}=Ct(),t=ri();return(i,n)=>(U(),Lt(mf,{"data-cy-value":"stylePanel","close-fn":R(t).closeStyleEditorPanel},{header:Ht(()=>[P("h1",null,K(R(e)("Vector tiles editor",{ns:"client"})),1)]),content:Ht(()=>[gt(W2e)]),_:1},8,["close-fn"]))}});class F2e{bootstrap(){this.restore();let e;e=Ar(()=>{this.persist(),e&&e()})}persist(){this.persistLayersOpen()}persistLayersOpen(){const e=ri(),{layersOpen:t}=xt(e);Rt(t,(i,n)=>{n!==i&&Oa.setValue(Mw,i)},{immediate:!0})}restore(){this.restoreLayersOpen(),this.restoreEmbeddedMode(),this.restoreIsAppMode()}restoreEmbeddedMode(){const e=Oa.getValue(Cre),t=e!==null&&e!=="false",{embedded:i}=xt(ri());i.value=t}restoreLayersOpen(){const e=Oa.getValue(Mw)!=="false",{setLayersOpen:t}=ri();t(e)}restoreIsAppMode(){const{setIsApp:e}=ri(),t=Oa.getValue(g_)==="android"||Oa.getValue(g_)==="ios"||Oa.getValue(_f)==="yes";e(t)}}const N2e=new F2e,q2="-",eA=",",Qk="--";class B2e{layerTimesToStrings(e){return e?e.split(Qk):[]}layerIdsToLayers(e){const t=Al(),i=no();return(e?e.split(q2):[]).map(s=>{const r=H1.isRemoteLayer(s)?Bve(s):t.findById(parseInt(s,10));return r?i.initLayer(r):void 0}).reverse()}layerNamesToLayersV2(e){const t=Al(),i=no();return(e?e.split(eA):[]).map(s=>{const r=t.findByName(s);return r?i.initLayer(r):void 0}).reverse()}layersOpacitiesToNumbers(e,t=q2){return Tre(e,t).reverse()}layersOpacitiesToNumbersV2=e=>this.layersOpacitiesToNumbers(e,eA);layersVisibilitiesToBooleansV2(e){return Ere(e,eA)}layersToLayerIds(e){return e?.map(t=>t.id).reverse().join(q2)||""}layersToLayerOpacities(e){return e?.map(t=>t.opacity??1).reverse().join(q2)||""}layersToLayerTimes(e){return e?.map(t=>no().getLayerCurrentTime(t)??"").reverse().join(Qk)||""}bgLayerNameToBgLayer(e){const t=Al();return e?t.findBgLayerByName(e):null}bgLayerToBgLayerName(e){return e?.name||Nw.name}}const fl=new B2e,D2e="basemap_2015_global",V2e="orthogr_2013_global",Z2e={webbasemap:"basemap_2015_global","pixelmaps-color":"topogr_global","pixelmaps-gray":"topo_bw_jpeg",streets:"streets_jpeg",voidlayer:"blank"};class z2e{bootstrap(){const e=Bn();let t;t=Ar(()=>{e.bgLayers.length>0&&(this.restore(),this.persist(),t&&t())})}persist(){const e=Vi(),{bgLayer:t}=xt(e);Rt(t,(i,n)=>{n!==i&&Oa.setValue(fR,i,fl.bgLayerToBgLayerName)},{immediate:!0})}restore(){const{setMapBackground:e}=iI(),t=this.getBgLayerFromStorage();e(t)}getBgLayerFromStorage(){const e=Oa.getInitialVersion(),t=Oa.getValue(fR);return t?e===2?this.getBgLayerFromStorageV2(t):fl.bgLayerNameToBgLayer(t):fl.bgLayerNameToBgLayer(D2e)}getBgLayerFromStorageV2(e){const t=Oa.getValue(CO,Lm);let i="";return e?i=Z2e[e]:t===0&&(i=V2e),fl.bgLayerNameToBgLayer(i)}}const U2e=new z2e;class H2e{bootstrap(){const e=Bn();let t;t=Ar(()=>{e.themes&&(this.restore(),this.persist(),t&&t())})}persist(){const e=Vi(),{layers:t}=xt(e);Rt(t,(i,n)=>{n!==i&&(Oa.setValue(mR,i,fl.layersToLayerIds),Oa.setValue(gR,i,fl.layersToLayerOpacities),Oa.setValue(pR,i,fl.layersToLayerTimes))},{immediate:!0})}restore(){const e=Oa.getInitialVersion(),t=Vi(),i=Oa.getValue(mR,e===2?fl.layerNamesToLayersV2:fl.layerIdsToLayers);this.restoreLayersOpacities(i,e),this.restoreLayersTimes(i),e===2&&(Oa.removeItem(CO),Oa.removeItem(Sre),Oa.removeItem(vR),Oa.removeItem(xR)),t.addLayers(...i?.filter(n=>n)||[])}restoreLayersOpacities(e,t){const i=t===2?this.getOpacitiesFromStorageV2():this.getOpacitiesFromStorage();i.length&&e?.forEach((n,s)=>n&&(n.opacity=i[s]??1))}restoreLayersTimes(e){const t=Oa.getValue(pR,fl.layerTimesToStrings);t.length&&e?.forEach((i,n)=>i&&t[n]&&this.restoreLayerTime(i,t[n]))}restoreLayerTime(e,t){const i=t.split("/");e.currentTimeMinValue=i[0],e.currentTimeMaxValue=i[1]}getOpacitiesFromStorage(){return Oa.getValue(gR,fl.layersOpacitiesToNumbers)}getOpacitiesFromStorageV2(){const e=Oa.getValue(vR,fl.layersOpacitiesToNumbersV2),t=Oa.getValue(xR,fl.layersVisibilitiesToBooleansV2);return e.map((i,n)=>t[n]?i:0).reverse()}}const X2e=new H2e;class q2e{bootstrap(){this.restore();let e;e=Ar(()=>{this.persist(),e&&e()})}persist(){const e=ri(),{myMap:t}=xt(e);Rt(t,(i,n)=>{n?.uuid!==i?.uuid&&(i?Oa.setValue(y4,i.uuid):Oa.removeItem(y4))},{immediate:!0})}restore(){const e=Oa.getValue(y4);e&&A_().openMyMap(e)}}const Y2e=new q2e;class K2e{themeToThemeName(e){return e?.name||""}}const j2e=new K2e;class $2e{bootstrap(){this.restore();let e;e=Ar(()=>{this.persist(),e&&e()})}persist(){const e=Bn();Rt(()=>e.theme,(t,i)=>{i!==t&&t&&Oa.setValue(Lw,t,j2e.themeToThemeName)},{immediate:!0})}restore(){const e=Oa.getValue(Lw);if(e){const{setTheme:t}=Bn();t(e)}}}const J2e=new $2e;NG();class Q2e extends BN{geojsonFormatCustom=new $l;encodeVectorStylePoint(e,t,i){let n;i instanceof Qr?n=this.encodeVectorStylePointStyleCircle(e,i):i instanceof Gu?n=this.encodeVectorStylePointStyleIcon(e,i):i instanceof bl&&(n=this.encodeVectorStylePointRegularShape(e,i)),n&&(this.customizer_.point(this.layerState_,e,n,i),t.push(n))}encodeVectorStylePointRegularShape(e,t){const i={type:"point"},n=t.getPoints(),s=t.getAngle();n===4&&s!==0?i.graphicName="square":n===4&&s===0?i.graphicName="cross":n===3?i.graphicName="triangle":n===5?i.graphicName="star":n===8&&(i.graphicName="cross");const r=t.getOpacity();r!==null&&(i.graphicOpacity=r);const l=t.getSize();if(l!==null){let g=t.getScale();Array.isArray(g)&&(g=(g[0]+g[1])/2),isNaN(g)&&(g=1),i.graphicWidth=l[1]*g}let u=t.getRotation();isNaN(u)&&(u=0),i.rotation=Yd(u);const d=t.getFill(),h=t.getStroke();return d!==null&&this.encodeVectorStyleFill(e,i,d),h!==null&&this.encodeVectorStyleStroke(e,i,h),i!==void 0&&i.graphicName==="cross"&&(i.strokeWidth=0,i.fillOpacity=1),i}encodeVectorStylePointStyleIcon(e,t){const i=t.getSrc();if(i===void 0)return;const n={type:"point",externalGraphic:i},s=t.getOpacity();s!==null&&(n.graphicOpacity=s);const r=t.getSize();if(r!==null){let u=t.getScale();Array.isArray(u)&&(u=(u[0]+u[1])/2),isNaN(u)&&(u=1);const d=r[0]*u,h=r[1]*u;n.graphicWidth=h,this.addGraphicOffset_(n,t,d,h)}let l=t.getRotation();return isNaN(l)&&(l=0),n.rotation=Yd(l),n.labelAlign&&(n.labelAlign="lm"),n.externalGraphic&&(n.graphicFormat="image/png",n.externalGraphic.indexOf("scale=")>0?delete n.graphicWidth:n.externalGraphic.indexOf("getarrow")>0&&(n.graphicWidth=10)),n}}const e6=127;class exe extends ype{async encodeLayerState(e,t,i){let n;const s=e.layer;if(s instanceof gT)n=this.encodeXYZLayer_(s.getXYZ());else if(s instanceof bs){n=new Q2e(e,i).encodeVectorLayer(t);const r=e.layer.get("renderAsSvg");r!==void 0&&(n.renderAsSvg=r)}else n=await super.encodeLayerState(e,t,i);return Array.isArray(n)?n=n.map(r=>this.legacyMFPAppendCustomParams(s,r)):n&&(n=this.legacyMFPAppendCustomParams(s,n)),n}legacyMFPAppendCustomParams(e,t){return t?{...t,...e instanceof bs?{}:{customParams:{TRANSPARENT:!0,MAP_RESOLUTION:e6}}}:null}encodeXYZLayer_(e){const t=e.indexOf("/{z}/{x}/{y}"),i=e.lastIndexOf(".");if(t===-1||i===-1)return;const n=e.substring(0,t),s=e.substring(i+1),r=n.substring(n.lastIndexOf("/styles/")+8);return r==="topomap"||r==="roadmap"||r==="topomap_gray"?{baseURL:"https://wms.geoportail.lu/vectortiles_wms_4_print/service",imageFormat:"image/"+s,layers:[r],customParams:{TRANSPARENT:!0,MAP_RESOLUTION:e6},type:"wms",opacity:1,version:"1.1.1",useNativeAngle:!0}:{baseURL:n,type:"OSM",imageExtension:s}}}const m0="https://migration.geoportail.lu",txe="https://migration.geoportail.lu/legends/get_html",axe="https://migration.geoportail.lu/short/create",t6="https://migration.geoportail.lu/printproxy",ixe="https://migration.geoportail.lu/qr",nxe=[1500,2500,5e3,1e4,15e3,2e4,25e3,5e4,8e4,1e5,125e3,2e5,25e4,4e5],tA=[[715,395],[470,650],[1065,640],[715,975],[1558,985],[1064,1475],[2255,1482],[1558,2175],[3241,2173],[2254,3155]],aA=["A4 landscape","A4 portrait","A3 landscape","A3 portrait","A2 landscape","A2 portrait","A1 landscape","A1 portrait","A0 landscape","A0 portrait"],a6=127,rxe=(a,e,t)=>Math.round(e/J3/$3*a/t);class sxe{getScales(){return Bn().theme?.metadata?.print_scales?.map(t=>+t).sort((t,i)=>t-i)||nxe}getLayouts(){return aA}async print(e,t){const i=`${t6}/report.${t.toLocaleLowerCase()||"pdf"}`,s=await(await fetch(i,{method:"POST",body:JSON.stringify(e)})).json(),r=m0+s.statusURL.replace(/print/,"printproxy");return{downloadURL:m0+s.downloadURL.replace(/print/,"printproxy"),ref:s.ref,statusURL:r}}cancel(e){return fetch(`${t6}/cancel/${e}`,{method:"DELETE"})}async getJobStatus(e){const t=await(await fetch(e)).json();return t.downloadURL&&(t.downloadURL=m0+t.downloadURL.replace(/print/,"printproxy")),t}async getSpec(e,t){const i=new exe(m0),n=new ape,s=await this.getShortLink(),r=await i.encodeMap({map:t,scale:e.scale,printResolution:t.getView().getResolution(),dpi:a6,customizer:n});r.layers=r.layers.filter(h=>h!==null);const l=await this.getLegends(t.getLayers().getArray(),e.lang),u=[];return uB(t.getLayerGroup(),u,e.framestate),{attributes:{map:r,disclaimer:e.disclaimer,scaleTitle:e.scaleTitle,appTitle:e.appTitle,scale:e.scale,name:e.title,url:s,qrimage:`${ixe}?url=${s}`,lang:e.lang,legend:e.legend?l:null,scalebar:{geodetic:!0},dataOwner:[...new Set(u)].join(" "),dateText:e.dateText,queryResults:e.queryResults},format:e.format.toLowerCase(),layout:e.layout}}getLayersForPrint(e){return e.getLayers().getArray().filter(i=>i.get(D3)!==lN)}getSize(e){return tA[aA.indexOf(e)]}getNearestScale(e,t,i){const n=this.getScales(),s=tA[aA.indexOf(t)][0]||tA[0][0];return n.reverse().find(r=>rxe(r,s,i)<e)||n[0]}async getShortLink(){const t={url:m0+LO.getRelativeUrl()};return(await(await Br(axe,t,"POST")).json()).short_url}async getLegends(e,t){const i=[];let n=a6;const s=txe;return e.reverse().forEach(r=>{const l=r.get("metadata"),u=l?.max_dpi;if(u!==void 0){const h=parseInt(u,10);n>h&&(n=h)}const d=l?.legend_name;if(d!==void 0)i.push({name:d});else{const h=r.get("queryable_id");if(l?.isExternalWms){const g=l?.legendUrl,y=l?.legendAccessConstraints,x=l?.legendTitle;g!==void 0&&i.push({name:null,legendUrl:g,accessConstraints:y,legendTitle:x})}else if(h!==void 0){const g=new URLSearchParams({lang:t,id:h,dpi:n.toString(),legend_title:r.get("label")});i.push({name:r.get("label"),restUrl:s+"?"+g.toString(),legendTitle:r.get("label")})}}}),i}}function uB(a,e,t){if(a instanceof C_)a.getLayers().forEach(i=>uB(i,e,t));else{const i=a.getSource()?.getAttributions(),n=a.get("metadata")?.attribution,s=[];i&&s.push(...i(t)),n&&s.push(n),e.push(...s)}}const n_=new sxe,oxe=1e3;function lxe(a){return typeof a=="number"&&a>=400&&a<=500||a==="error"}function uxe(){const a=Ye(null),e=Ye(null),t=Ye(!1),i=Ye(!1);let n=null;const s=async u=>{try{const{status:d,done:h,downloadURL:g}=await n_.getJobStatus(u);a.value=d,lxe(d)&&(t.value=!0,l()),d==="finished"&&h&&g&&(e.value=g,l())}catch{l()}},r=(u,d=oxe)=>{t.value=!1,l(),i.value=!0,n=window.setInterval(()=>s(u),d)},l=()=>{n!==null&&(clearInterval(n),n=null),a.value=null,i.value=!1,t.value=!1};return Nr(()=>l()),{jobStatus:a,url:e,startPolling:r,clearPolling:l,error:t,loading:i}}function cxe(){const{t:a}=Ct(),{featureInfoPrintableRef:e,locationInfoPrintableRef:t}=xt(EE()),{locationInfoCoords:i}=xt(nf()),{startPolling:n,clearPolling:s,url:r,error:l,loading:u}=uxe(),d=qa().getOlMap(),h=Ye(null);async function g(E){const L=y(),G={disclaimer:a(`www.geoportail.lu est un portail d'accs aux informations golocalises, donnes et services qui sont mis  disposition par les administrations publiques luxembourgeoises. Responsabilit: Malgr la grande attention quelles portent  la justesse des informations diffuses sur ce site, les autorits ne peuvent endosser aucune responsabilit quant  la fidlit,  lexactitude,  lactualit,  la fiabilit et  lintgralit de ces informations. Information dpourvue de foi publique. 
Droits d'auteur: Administration du Cadastre et de la Topographie. http://g-o.lu/copyright`),scaleTitle:a("Echelle approximative 1:"),appTitle:a("Le goportail national du Grand-Duch du Luxembourg",{ns:"app"}),dateText:a("Date d'impression:"),queryResults:L,...E},F=await n_.getSpec(G,d);try{const B=await n_.print(F,E.format);h.value=B.ref,n(B.statusURL)}catch{h.value=null,l.value=!0,s()}}function y(){const E=C(),L=I();return`${E??""}${L??""}`||void 0}async function x(){h.value&&(await n_.cancel(h.value),h.value=null,s())}function C(){if(!(!i.value||!t.value))return A(t.value)}function I(){if(!(i.value||!e.value))return A(e.value)}function A(E){const L=E.cloneNode(!0);return L.querySelectorAll("[data-cy], [v-]").forEach(B=>{B.removeAttribute("data-cy"),B.removeAttribute("v-")}),L.querySelectorAll(".no-print").forEach(B=>B.remove()),L.innerHTML}return{print:g,abortPrint:x,url:r,error:l,loading:u}}var l5=(a=>(a.PDF="PDF",a.PNG="PNG",a))(l5||{});const dxe={"data-cy":"toolbarPrint"},hxe={class:"absolute bottom-full top-auto z-20 flex flex-col divide-gray-400 divide-solid box-content border-y border-x border-gray-400 bg-primary md:w-64 p-3 gap-3"},_xe={class:"md:w-full"},mxe=["placeholder"],fxe={class:"flex gap-1 items-center"},gxe=["id"],pxe=["for"],yxe={class:"flex gap-1 items-center secondary-button"},bxe={class:"md:w-1/2"},vxe={class:"md:w-1/2"},xxe={class:"flex gap-1 justify-end items-center"},wxe={key:0,"data-cy":"printLoading",class:"mr-4 flex gap-2 items-center"},Cxe=["disabled"],Ixe=["disabled"],Sxe=2e3,Axe=rt({__name:"toolbar-print",setup(a){const{addNotification:e}=ar(),{t}=Ct(),{lang:i}=ri(),{print:n,abortPrint:s,url:r,error:l,loading:u}=cxe(),d=V1();let h=null;const g=qa().getOlMap(),y=new bpe({id:"mask",opacity:0});y.setZIndex(Sxe);const x=Ye(""),C=Ye(!1),I=St(()=>!C.value),A=Ye(""),E=St(()=>n_.getLayouts().map($=>({label:t($),value:$,ariaLabel:t("Change layout:",{ns:"app"})}))),L=$=>{A.value=$,G.value=$,y.setSize(n_.getSize($)),g.render()},G=Ye(""),F=Ye(""),B=St(()=>n_.getScales().map($=>({label:`1 : ${$.toLocaleString()}`,value:$.toString(),ariaLabel:t("Change scale:",{ns:"app"})}))),Z=$=>{F.value=$,y.setScale(parseInt($,10)),g.render()};function Y($){n({format:$,layout:A.value,scale:parseInt(F.value,10),resolution:g.getView().getResolution(),title:x.value,legend:C.value,lang:i,framestate:h})}return Rt(l,$=>{$&&e(t("An error occurred while printing"),fi.ERROR)}),Rt(r,$=>$&&window.open($,"_blank")),fn(()=>{g.addLayer(y),y.setOpacity(.5),g.on("rendercomplete",$=>{h=$.frameState||null}),L(E.value[0].value),Z(n_.getNearestScale(g.getSize()[0],A.value,g.getView().getResolution()).toString())}),Nr(()=>{g.removeLayer(y),y.setOpacity(0)}),($,te)=>(U(),se("div",dxe,[P("div",hxe,[P("div",_xe,[Sa(P("input",{class:"cursor-pointer w-full p-2 lux-input",type:"text","onUpdate:modelValue":te[0]||(te[0]=ce=>x.value=ce),placeholder:R(t)("Title",{ns:"client"}),"data-cy":"printTitle"},null,8,mxe),[[Vn,x.value]])]),P("div",fxe,[Sa(P("input",{id:R(d),class:"hover:cursor-pointer",type:"checkbox","onUpdate:modelValue":te[1]||(te[1]=ce=>C.value=ce),"data-cy":"printWithLegend"},null,8,gxe),[[Xd,C.value]]),P("label",{class:"font-bold block lux-text-default hover:cursor-pointer",for:R(d)},K(R(t)("Avec lgende")),9,pxe)]),P("div",yxe,[P("div",bxe,[gt(Qm,{"data-cy":"printLayouts",class:"w-full",options:E.value,modelValue:A.value,"onUpdate:modelValue":te[2]||(te[2]=ce=>A.value=ce),onChange:L,direction:"up"},null,8,["options","modelValue"])]),P("div",vxe,[gt(Qm,{"data-cy":"printScales",class:"w-full",options:B.value,modelValue:F.value,"onUpdate:modelValue":te[3]||(te[3]=ce=>F.value=ce),onChange:Z,direction:"up"},null,8,["options","modelValue"])])]),P("div",xxe,[R(u)?(U(),se("div",wxe,[te[7]||(te[7]=P("span",{class:"text-black fa-solid fa-arrows-rotate animate-spin","aria-hidden":"true"},null,-1)),P("button",{class:"btn btn-link opacity-75 text-white hover:underline hover:opacity-100",onClick:te[4]||(te[4]=ce=>R(s)())},K(R(t)("Abort")),1)])):Ge("",!0),P("button",{"data-cy":"printPng",class:"bg-white disabled:opacity-75 disabled:cursor-not-allowed text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:te[5]||(te[5]=ce=>Y(R(l5).PNG)),disabled:R(u)||!I.value},K(R(t)("PNG")),9,Cxe),P("button",{"data-cy":"printPdf",class:"bg-white disabled:opacity-75 disabled:cursor-not-allowed text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:te[6]||(te[6]=ce=>Y(R(l5).PDF)),disabled:R(u)},K(R(t)("PDF")),9,Ixe)])])]))}}),Txe=ir(Axe,[["__scopeId","data-v-9820d18c"]]),Exe={class:"flex flex-col gap-3"},Mxe={class:"md:w-full"},Lxe={for:"share-url-input",class:"block text-white text-sm font-medium mb-2"},Rxe=["value","aria-label"],kxe=["value","aria-label"],Pxe={class:"flex gap-1 items-center"},Gxe={for:"show-long-url-checkbox",class:"font-bold block lux-text-default hover:cursor-pointer"},Wxe={key:0,class:"flex gap-1 items-center"},Oxe={for:"only-mymaps-checkbox",class:"font-bold block lux-text-default hover:cursor-pointer"},Fxe=rt({__name:"share-url",setup(a){const{t:e}=Ct(),t=ri(),{myMapId:i,shareOpen:n}=xt(t),s=Ye(""),r=Ye(""),l=Ye(!1),u=Ye(!1);let d=null,h="";function g(E){if(u.value&&i.value){const L=new URL(E);return L.search=`?map_id=${i.value}`,L.toString()}return E}async function y(){const E=Kl.getStrippedUrl(),L=g(E.toString());r.value=L,h=L;try{if(u.value&&i.value){const G=new URLSearchParams;G.set("url",L);const B=await(await fetch("https://migration.geoportail.lu/short/create",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:G.toString()})).json();s.value=B.short_url}else{const G=await Kl.getShortUrl(void 0);s.value=G.short_url}}catch{s.value=L}}function x(E){E.target.select()}function C(){d!==null&&clearInterval(d),d=setInterval(()=>{const E=Kl.getStrippedUrl().toString(),L=g(E);h!==L&&y()},500)}function I(){d!==null&&(clearInterval(d),d=null)}Rt(u,()=>{n.value&&y()}),Rt(n,E=>{E?(y(),C()):I()},{immediate:!0}),Nr(()=>{I()});const A=()=>!!i.value;return(E,L)=>(U(),se("div",Exe,[P("div",Mxe,[P("label",Lxe,K(R(e)("Short Url",{ns:"client"})),1),l.value?(U(),se("input",{key:1,id:"share-url-input",type:"text",class:"w-full px-3 py-2 lux-input cursor-pointer",value:r.value,"aria-label":R(e)("Long Url",{ns:"client"}),onClick:x,readonly:"","data-cy":"shareLongUrl"},null,8,kxe)):(U(),se("input",{key:0,id:"share-url-input",type:"text",class:"w-full px-3 py-2 lux-input cursor-pointer",value:s.value,"aria-label":R(e)("Short Url",{ns:"client"}),onClick:x,readonly:"","data-cy":"shareShortUrl"},null,8,Rxe))]),P("div",Pxe,[Sa(P("input",{id:"show-long-url-checkbox",type:"checkbox","onUpdate:modelValue":L[0]||(L[0]=G=>l.value=G),class:"hover:cursor-pointer","data-cy":"showLongUrlCheckbox"},null,512),[[Xd,l.value]]),P("label",Gxe,K(R(e)("Show long url",{ns:"client"})),1)]),A()?(U(),se("div",Wxe,[Sa(P("input",{id:"only-mymaps-checkbox",type:"checkbox","onUpdate:modelValue":L[1]||(L[1]=G=>u.value=G),class:"hover:cursor-pointer","data-cy":"onlyMymapsCheckbox"},null,512),[[Xd,u.value]]),P("label",Oxe,K(R(e)("Share only Mymaps",{ns:"client"})),1)])):Ge("",!0)]))}}),Nxe={class:"md:w-full"},Bxe={for:"embed-code-input",class:"block text-white text-sm font-medium mb-2"},Dxe={class:"flex gap-2"},Vxe=["value","aria-label"],Zxe=["aria-label"],zxe={class:"flex justify-between items-center p-4 border-b"},Uxe={id:"modal-title",class:"text-xl font-semibold"},Hxe=["aria-label"],Xxe={class:"p-4 space-y-4"},qxe={for:"iframe-size-select",class:"sr-only"},Yxe=["aria-label"],Kxe={value:"small"},jxe={value:"medium"},$xe={value:"large"},Jxe={value:"custom"},Qxe={key:0,class:"flex gap-2 items-center"},ewe={class:"border border-gray-300 overflow-auto"},twe=["src","width","height","title"],awe={class:"flex gap-2"},iwe={for:"iframe-code-input",class:"sr-only"},nwe=["value","aria-label"],rwe=["aria-label"],swe=rt({__name:"share-embed",setup(a){const{t:e}=Ct(),t=Ye(!1),i=Ye("small"),n=Ye(800),s=Ye(600),r=Ye(null),l={small:[400,300],medium:[600,450],large:[800,600],custom:[800,600]},u=St(()=>i.value==="custom"?n.value:l[i.value][0]),d=St(()=>i.value==="custom"?s.value:l[i.value][1]),h=St(()=>{const L=new URL(window.location.href);return L.searchParams.set("embedded","true"),L.href}),g=St(()=>`<iframe src="${h.value}" width="${u.value}" height="${d.value}" frameborder="0" style="border:0"></iframe>`),y=St(()=>`${u.value+48}px`);function x(L){L.target.select()}function C(){t.value=!0}function I(){t.value=!1}function A(){navigator.clipboard.writeText(g.value)}function E(L){if(!t.value||!r.value)return;const G=r.value.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),F=G[0],B=G[G.length-1];L.key==="Tab"?L.shiftKey&&document.activeElement===F?(L.preventDefault(),B.focus()):!L.shiftKey&&document.activeElement===B&&(L.preventDefault(),F.focus()):L.key==="Escape"&&I()}return Rt(t,L=>{L?document.addEventListener("keydown",E):document.removeEventListener("keydown",E)}),Nr(()=>{document.removeEventListener("keydown",E)}),(L,G)=>(U(),se("div",null,[P("div",Nxe,[P("label",Bxe,K(R(e)("Integrate",{ns:"client"})),1),P("div",Dxe,[P("input",{id:"embed-code-input",type:"text",class:"flex-1 px-3 py-2 lux-input cursor-pointer",value:g.value,"aria-label":R(e)("Integrate",{ns:"client"}),onClick:x,readonly:"","data-cy":"embedCodeInput"},null,8,Vxe),P("button",{onClick:C,class:"bg-white disabled:opacity-75 disabled:cursor-not-allowed text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5","aria-label":R(e)("Preview",{ns:"client"}),"data-cy":"previewButton"},K(R(e)("Preview",{ns:"client"})),9,Zxe)])]),t.value?(U(),se("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",onClick:_r(I,["self"]),"data-cy":"iframePreviewModal"},[P("div",{ref_key:"modalRef",ref:r,class:"bg-white rounded-lg shadow-xl mx-4 max-h-[90vh] overflow-auto",style:Nc({width:y.value,maxWidth:"90vw"})},[P("div",zxe,[P("h2",Uxe,K(R(e)("Embed map",{ns:"app"})),1),P("button",{onClick:I,class:"text-gray-500 hover:text-gray-700 text-2xl leading-none","aria-label":R(e)("Close",{ns:"app"}),"data-cy":"closePreviewButton"},"  ",8,Hxe)]),P("div",Xxe,[P("div",null,[P("label",qxe,K(R(e)("Select iframe size",{ns:"client"})),1),Sa(P("select",{id:"iframe-size-select","onUpdate:modelValue":G[0]||(G[0]=F=>i.value=F),class:"w-full px-3 py-2 border border-gray-300 rounded","aria-label":R(e)("Select iframe size",{ns:"client"}),"data-cy":"iframeSizeSelect"},[P("option",Kxe,K(R(e)("small",{ns:"app"})),1),P("option",jxe,K(R(e)("medium",{ns:"app"})),1),P("option",$xe,K(R(e)("large",{ns:"app"})),1),P("option",Jxe,K(R(e)("custom",{ns:"app"})),1)],8,Yxe),[[B7,i.value]])]),i.value==="custom"?(U(),se("div",Qxe,[G[3]||(G[3]=P("label",{for:"custom-width-input",class:"sr-only"},"Width",-1)),Sa(P("input",{id:"custom-width-input",type:"number","onUpdate:modelValue":G[1]||(G[1]=F=>n.value=F),min:"0",class:"w-24 px-3 py-2 border border-gray-300 rounded","aria-label":"Custom width","data-cy":"customWidthInput"},null,512),[[Vn,n.value,void 0,{number:!0}]]),G[4]||(G[4]=P("span",{"aria-hidden":"true"},"X",-1)),G[5]||(G[5]=P("label",{for:"custom-height-input",class:"sr-only"},"Height",-1)),Sa(P("input",{id:"custom-height-input",type:"number","onUpdate:modelValue":G[2]||(G[2]=F=>s.value=F),min:"0",class:"w-24 px-3 py-2 border border-gray-300 rounded","aria-label":"Custom height","data-cy":"customHeightInput"},null,512),[[Vn,s.value,void 0,{number:!0}]])])):Ge("",!0),P("div",ewe,[P("iframe",{src:h.value,width:u.value,height:d.value,frameborder:"0",style:{border:"0"},title:R(e)("Embed map preview",{ns:"client"}),"data-cy":"iframePreview"},null,8,twe)]),P("div",awe,[P("label",iwe,K(R(e)("Iframe code",{ns:"client"})),1),P("input",{id:"iframe-code-input",type:"text",value:g.value,onClick:x,readonly:"",class:"flex-1 px-3 py-2 border border-gray-300 rounded cursor-pointer","aria-label":R(e)("Iframe code",{ns:"client"}),"data-cy":"iframeCodeInput"},null,8,nwe),P("button",{onClick:A,class:"bg-white disabled:opacity-75 disabled:cursor-not-allowed text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5","aria-label":R(e)("Copy",{ns:"client"}),"data-cy":"copyIframeCodeButton"},K(R(e)("Copy",{ns:"client"})),9,rwe)])])],4)])):Ge("",!0)]))}}),owe={"data-cy":"sharePanel"},lwe={class:"absolute bottom-full top-auto z-20 flex flex-col divide-gray-400 divide-solid box-content border-y border-x border-gray-400 bg-primary md:w-80 p-3 gap-3"},uwe=rt({__name:"share-panel",setup(a){return(e,t)=>(U(),se("div",owe,[P("div",lwe,[gt(Fxe),gt(swe)])]))}}),cwe={class:"flex flex-col w-12 justify-between bg-white z-5 shrink-0 sm:flex-row sm:w-full sm:h-14 sm:shadow-footer"},dwe={class:"flex flex-col w-full sm:w-80 sm:flex-row justify-start text-primary divide-y sm:divide-y-0 sm:divide-x divide-gray-400 divide-solid box-content border-y sm:border-y-0 border-x border-gray-400"},hwe={"data-cy":"layersOpenClose"},_we={"data-cy":"mymapsOpenClose"},mwe={key:0,"data-cy":"infoOpenClose"},fwe={key:1,"data-cy":"legendsOpenClose"},gwe={key:2},pwe={key:0,class:"hidden sm:block sm:flex-grow"},ywe={key:1,class:"hidden sm:block sm:flex-grow"},bwe={key:2,class:"w-[466px] hidden sm:flex flex-row justify-end text-gray-500 whitespace-nowrap"},vwe=["aria-pressed","aria-label"],xwe=rt({__name:"footer-bar",setup(a){const{t:e,i18next:t}=Ct(),i=ri(),n=$n(),s="https://geocatalogue.geoportail.lu/geonetwork/srv",{setLayersOpen:r,togglePrintToolbarOpen:l,toggleDrawToolbarOpen:u,toggleMyMapsOpen:d,toggleLegendsOpen:h,toggleInfoOpen:g,toggleShareOpen:y,toggleFeedbackOpen:x}=i,{layersOpen:C,legendsOpen:I,drawToolbarOpen:A,measureToolbarOpen:E,elevationProfileToolbarOpen:L,styleEditorOpen:G,myMapLayersChanged:F,myMapsOpen:B,infoOpen:Z,shareOpen:Y,lidarOpen:$,themeGridOpen:te,printToolbarOpen:ce,feedbackOpen:me,isOffLine:X}=xt(i),{setEditActiveState:de}=n;function N(){const Ie=!C.value;r(Ie),Ie&&(G.value=!1,B.value=!1,Z.value=!1,$.value=!1),te.value=!1}Rt(A,Ie=>{Ie?(E.value=!1,L.value=!1,ce.value=!1,Y.value=!1,$.value=!1):de(void 0)}),Rt(E,Ie=>{Ie&&(A.value=!1,L.value=!1,ce.value=!1,Y.value=!1,$.value=!1)}),Rt(L,Ie=>{Ie&&(A.value=!1,E.value=!1,ce.value=!1,Y.value=!1,$.value=!1)}),Rt(ce,Ie=>{Ie&&(A.value=!1,E.value=!1,L.value=!1,Y.value=!1,$.value=!1)}),Rt(Y,Ie=>{Ie&&(A.value=!1,E.value=!1,L.value=!1,ce.value=!1,$.value=!1)}),Rt($,Ie=>{Ie&&(C.value=I.value=te.value=ce.value=A.value=E.value=L.value=Y.value=G.value=B.value=Z.value=!1)});const ne=ef(),{displayStarOnMobile:le}=xt(ne),{setDisplayStarOnMobile:_e}=ne;function ke(){g(),_e(!1)}return(Ie,re)=>(U(),se("footer",cwe,[P("ul",dwe,[P("li",hwe,[gt(bd,{label:R(e)("layers",{ns:"client"}),"aria-label":R(C)?R(e)("Close layers panel"):R(e)("Open layers panel to browse and add map layers"),icon:"layers",active:R(C),onClick:N},null,8,["label","aria-label","active"])]),P("li",_we,[gt(bd,{label:R(e)("my_maps",{ns:"client"})+(R(F)?"(*)":""),"aria-label":R(B)?R(e)("Close my maps panel"):R(e)("Open my maps panel to access saved maps"),icon:"mymaps",active:R(B),onClick:re[0]||(re[0]=()=>R(d)())},null,8,["label","aria-label","active"])]),R(X)?Ge("",!0):(U(),se("li",mwe,[gt(bd,{label:`${R(e)("Infos",{ns:"client"})}${R(le)?"(*)":""}`,"aria-label":R(Z)?R(e)("Close feature info panel"):R(e)("Open feature info panel to view map details"),icon:"infos",active:R(Z),onClick:ke},null,8,["label","aria-label","active"])])),R(X)?Ge("",!0):(U(),se("li",fwe,[gt(bd,{label:R(e)("Legends",{ns:"client"}),"aria-label":R(I)?R(e)("Close legends panel"):R(e)("Open legends panel"),icon:"legends",active:R(I),onClick:re[1]||(re[1]=()=>R(h)())},null,8,["label","aria-label","active"])])),R(X)?Ge("",!0):(U(),se("li",gwe,[gt(bd,{class:"text-gray-300",label:R(e)("Routing",{ns:"client"}),"aria-label":R(e)("Routing tool - not yet implemented"),icon:"routing"},null,8,["label","aria-label"])]))]),R(X)?(U(),se("div",pwe)):Ge("",!0),P("div",{class:Fa(["relative flex flex-col w-12 sm:flex-row justify-start text-primary divide-y sm:divide-y-0 sm:divide-x divide-gray-400 divide-solid box-content border-y sm:border-y-0 border-x border-gray-400",R(X)?"sm:w-16":"sm:w-64"])},[R(A)?(U(),Lt(Sle,{key:0})):Ge("",!0),R(ce)?(U(),Lt(Txe,{key:1})):Ge("",!0),R(Y)?(U(),Lt(uwe,{key:2})):Ge("",!0),R(L)?(U(),Lt(tpe,{key:3})):Ge("",!0),gt(bd,{label:R(e)("Dessin",{ns:"client"}),"aria-label":R(A)?R(e)("Close drawing toolbar"):R(e)("Open drawing toolbar to draw on the map"),icon:"draw",active:R(A),onClick:re[2]||(re[2]=()=>R(u)()),"data-cy":"drawButton"},null,8,["label","aria-label","active"]),R(X)?Ge("",!0):(U(),se(Tt,{key:4},[R(E)?(U(),Lt(Gle,{key:0})):Ge("",!0),gt(bd,{label:R(e)("Mesurer",{ns:"client"}),"aria-label":R(E)?R(e)("Close measure toolbar"):R(e)("Open measure toolbar to measure distances and areas"),active:R(E),icon:"measure",onClick:re[3]||(re[3]=()=>E.value=!R(E))},null,8,["label","aria-label","active"])],64)),R(X)?Ge("",!0):(U(),Lt(bd,{key:5,class:"hidden sm:block",label:R(e)("Imprimer",{ns:"client"}),"aria-label":R(ce)?R(e)("Close print toolbar"):R(e)("Open print toolbar to create a PDF of the map"),active:R(ce),onClick:re[4]||(re[4]=()=>R(l)()),icon:"print","data-cy":"printButton"},null,8,["label","aria-label","active"])),R(X)?Ge("",!0):(U(),Lt(bd,{key:6,label:R(e)("Partager",{ns:"client"}),"aria-label":R(Y)?R(e)("Close share panel"):R(e)("Open share panel to create a shareable link"),active:R(Y),icon:"share",onClick:re[5]||(re[5]=()=>R(y)()),"data-cy":"shareButton"},null,8,["label","aria-label","active"]))],2),R(X)?(U(),se("div",ywe)):(U(),se("div",bwe,[gt(fm,{class:"hidden lg:flex text-gray-500",label:R(e)("What's new",{ns:"client"}),link:`https://geoportail.lu/${R(t).language}/questions/whats-new/`},null,8,["label","link"]),gt(fm,{class:"hidden lg:flex text-gray-500",label:R(e)("Geocatalogue",{ns:"client"}),link:R(s)},null,8,["label","link"]),P("button",{class:Fa(["hidden lg:flex h-full flex-col justify-center px-[7px] uppercase hover:text-white hover:bg-primary text-gray-500",{"bg-primary text-white":R(me)}]),"aria-pressed":R(me)?"true":"false","aria-label":R(e)("Feedback",{ns:"client"}),onClick:re[6]||(re[6]=()=>R(x)()),"data-cy":"feedbackButton"},K(R(e)("Feedback",{ns:"client"})),11,vwe),gt(fm,{class:"hidden lg:flex text-gray-500",label:R(e)("A Propos",{ns:"client"}),link:`https://www.geoportail.lu/${R(t).language}/propos/`},null,8,["label","link"]),gt(fm,{class:"hidden lg:flex text-gray-500",label:R(e)("Aide",{ns:"client"}),link:`https://www.geoportail.lu/${R(t).language}/documentation/`},null,8,["label","link"]),gt(fm,{class:"hidden lg:flex text-gray-500",label:R(e)("Contact",{ns:"client"}),link:`https://www.geoportail.lu/${R(t).language}/propos/contactez-nous/`},null,8,["label","link"]),gt(fm,{class:"text-gray-500",label:R(e)("Legalites",{ns:"client"}),link:`https://www.geoportail.lu/${R(t).language}/propos/mentions-legales/`},null,8,["label","link"]),gt(fm,{class:"text-gray-500",label:R(e)("ACT",{ns:"client"}),link:"http://www.act.public.lu/"},null,8,["label"])]))]))}}),tb=Ao("lidar",()=>{const a=Ye(!1),e=Ye(!1),t=Ye(5),i=Ye(null);return{drawLidarActive:a,profileWidth:t,currentProfileFeature:i,lidarConfig:{clientConfig:{autoWidth:!0,margin:{left:40,top:10,right:0,bottom:40},pointAttributes:{},pointSum:0,tolerance:5},serverConfig:{classification_colors:{1:{color:"120, 120, 120",name:{fr:"points non classifis",en:"unclassified points",de:"nicht klassifizierte Punkte",lb:"onklassiert Punkten"},value:"unclassified points",visible:1},2:{color:"160, 82, 40",name:{fr:"sol",en:"ground",de:"Boden",lb:"Buedem"},value:"ground",visible:1},3:{color:"0, 240, 0",name:{fr:"vgtation basse",en:"low vegetation",de:"niedrige Vegetation",lb:"niddereg Vegetatioun"},value:"low vegetation",visible:1},4:{color:"0, 204, 0",name:{fr:"vgtation moyenne",en:"average vegetation",de:"mittlere Vegetation",lb:"mttel Vegetatioun"},value:"average vegetation",visible:1},5:{color:"0, 150, 0",name:{fr:"vgtation haute",en:"high vegetation",de:"hohe Vegetation",lb:"hich Vegetatioun"},value:"high vegetation",visible:1},6:{color:"255, 170, 0",name:{fr:"btiments",en:"buildings",de:"Gebude",lb:"Gebai"},value:"buildings",visible:1},7:{color:"0, 0, 0",name:{fr:"points bas (bruit)",en:"low points (noise)",de:"niedrige Punkte",lb:"niddereg Punkten"},value:"low points (noise)",visible:1},9:{color:"60, 130, 250",name:{fr:"eau",en:"water",de:"Wasser",lb:"Waasser"},value:"water",visible:1},13:{color:"255, 0, 0",name:{fr:"ponts, passerelles, viaducs",en:"bridges",de:"Brcken",lb:"Brcke"},value:"bridges",visible:1},15:{color:"255, 255, 0",name:{fr:"lignes  haute tension",en:"high voltage lines",de:"Hochspannungsleitung",lb:"hich Volt Linn"},value:"high voltage lines",visible:1}},debug:!1,default_attribute:"CLASSIFICATION",default_color:"RGB(250,150,150)",default_point_attribute:"CLASSIFICATION",default_point_cloud:"luxembourg",initialLOD:10,max_levels:{25:{max:14,width:2},50:{max:13,width:2},75:{max:13,width:3},100:{max:12,width:3},150:{max:12,width:4},250:{max:11,width:4},350:{max:11,width:4},500:{max:10,width:5},1e3:{max:10,width:5},5e3:{max:9,width:6},7500:{max:9,width:6},1e5:{max:9,width:7}},max_point_number:15e4,minLOD:0,point_attributes:{CLASSIFICATION:{bytes:1,elements:1,name:"Classification",value:"CLASSIFICATION",visible:1},COLOR_PACKED:{bytes:4,elements:4,name:"Couleur",value:"COLOR_PACKED",visible:1},INTENSITY:{bytes:2,element:1,name:"Intensit",value:"INTENSITY",visible:1},POSITION_CARTESIAN:{bytes:12,elements:3,name:"Position-cartesian",value:"POSITION_CARTESIAN",visible:0},POSITION_PROJECTED_PROFILE:{bytes:8,elements:2,name:"Position-projected",value:"POSITION_PROJECTED_PROFILE",visible:0},RGB:{bytes:3,elements:4,name:"Couleur",value:"RGBA",visible:0}},point_size:1,width:10}},measureActive:e}}),u5={capture:!0,passive:!1};function c5(a){a.preventDefault(),a.stopImmediatePropagation()}function wwe(a){var e=a.document.documentElement,t=eo(a).on("dragstart.drag",c5,u5);"onselectstart"in e?t.on("selectstart.drag",c5,u5):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Cwe(a,e){var t=a.document.documentElement,i=eo(a).on("dragstart.drag",null);e&&(i.on("click.drag",c5,u5),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const Y2=a=>()=>a;function Iwe(a,{sourceEvent:e,target:t,transform:i,dispatch:n}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:n}})}function Rd(a,e,t){this.k=a,this.x=e,this.y=t}Rd.prototype={constructor:Rd,scale:function(a){return a===1?this:new Rd(this.k*a,this.x,this.y)},translate:function(a,e){return a===0&e===0?this:new Rd(this.k,this.x+this.k*a,this.y+this.k*e)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cB=new Rd(1,0,0);Rd.prototype;function iA(a){a.stopImmediatePropagation()}function f0(a){a.preventDefault(),a.stopImmediatePropagation()}function Swe(a){return(!a.ctrlKey||a.type==="wheel")&&!a.button}function Awe(){var a=this;return a instanceof SVGElement?(a=a.ownerSVGElement||a,a.hasAttribute("viewBox")?(a=a.viewBox.baseVal,[[a.x,a.y],[a.x+a.width,a.y+a.height]]):[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]):[[0,0],[a.clientWidth,a.clientHeight]]}function i6(){return this.__zoom||cB}function Twe(a){return-a.deltaY*(a.deltaMode===1?.05:a.deltaMode?1:.002)*(a.ctrlKey?10:1)}function Ewe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mwe(a,e,t){var i=a.invertX(e[0][0])-t[0][0],n=a.invertX(e[1][0])-t[1][0],s=a.invertY(e[0][1])-t[0][1],r=a.invertY(e[1][1])-t[1][1];return a.translate(n>i?(i+n)/2:Math.min(0,i)||Math.max(0,n),r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r))}function Lwe(){var a=Swe,e=Awe,t=Mwe,i=Twe,n=Ewe,s=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],l=250,u=ade,d=rE("start","zoom","end"),h,g,y,x=500,C=150,I=0,A=10;function E(N){N.property("__zoom",i6).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",te).on("dblclick.zoom",ce).filter(n).on("touchstart.zoom",me).on("touchmove.zoom",X).on("touchend.zoom touchcancel.zoom",de).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(N,ne,le,_e){var ke=N.selection?N.selection():N;ke.property("__zoom",i6),N!==ke?B(N,ne,le,_e):ke.interrupt().each(function(){Z(this,arguments).event(_e).start().zoom(null,typeof ne=="function"?ne.apply(this,arguments):ne).end()})},E.scaleBy=function(N,ne,le,_e){E.scaleTo(N,function(){var ke=this.__zoom.k,Ie=typeof ne=="function"?ne.apply(this,arguments):ne;return ke*Ie},le,_e)},E.scaleTo=function(N,ne,le,_e){E.transform(N,function(){var ke=e.apply(this,arguments),Ie=this.__zoom,re=le==null?F(ke):typeof le=="function"?le.apply(this,arguments):le,Q=Ie.invert(re),J=typeof ne=="function"?ne.apply(this,arguments):ne;return t(G(L(Ie,J),re,Q),ke,r)},le,_e)},E.translateBy=function(N,ne,le,_e){E.transform(N,function(){return t(this.__zoom.translate(typeof ne=="function"?ne.apply(this,arguments):ne,typeof le=="function"?le.apply(this,arguments):le),e.apply(this,arguments),r)},null,_e)},E.translateTo=function(N,ne,le,_e,ke){E.transform(N,function(){var Ie=e.apply(this,arguments),re=this.__zoom,Q=_e==null?F(Ie):typeof _e=="function"?_e.apply(this,arguments):_e;return t(cB.translate(Q[0],Q[1]).scale(re.k).translate(typeof ne=="function"?-ne.apply(this,arguments):-ne,typeof le=="function"?-le.apply(this,arguments):-le),Ie,r)},_e,ke)};function L(N,ne){return ne=Math.max(s[0],Math.min(s[1],ne)),ne===N.k?N:new Rd(ne,N.x,N.y)}function G(N,ne,le){var _e=ne[0]-le[0]*N.k,ke=ne[1]-le[1]*N.k;return _e===N.x&&ke===N.y?N:new Rd(N.k,_e,ke)}function F(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function B(N,ne,le,_e){N.on("start.zoom",function(){Z(this,arguments).event(_e).start()}).on("interrupt.zoom end.zoom",function(){Z(this,arguments).event(_e).end()}).tween("zoom",function(){var ke=this,Ie=arguments,re=Z(ke,Ie).event(_e),Q=e.apply(ke,Ie),J=le==null?F(Q):typeof le=="function"?le.apply(ke,Ie):le,je=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),Qe=ke.__zoom,Je=typeof ne=="function"?ne.apply(ke,Ie):ne,kt=u(Qe.invert(J).concat(je/Qe.k),Je.invert(J).concat(je/Je.k));return function(Pt){if(Pt===1)Pt=Je;else{var zt=kt(Pt),Nt=je/zt[2];Pt=new Rd(Nt,J[0]-zt[0]*Nt,J[1]-zt[1]*Nt)}re.zoom(null,Pt)}})}function Z(N,ne,le){return!le&&N.__zooming||new Y(N,ne)}function Y(N,ne){this.that=N,this.args=ne,this.active=0,this.sourceEvent=null,this.extent=e.apply(N,ne),this.taps=0}Y.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,ne){return this.mouse&&N!=="mouse"&&(this.mouse[1]=ne.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=ne.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=ne.invert(this.touch1[0])),this.that.__zoom=ne,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var ne=eo(this.that).datum();d.call(N,this.that,new Iwe(N,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:d}),ne)}};function $(N,...ne){if(!a.apply(this,arguments))return;var le=Z(this,ne).event(N),_e=this.__zoom,ke=Math.max(s[0],Math.min(s[1],_e.k*Math.pow(2,i.apply(this,arguments)))),Ie=pu(N);if(le.wheel)(le.mouse[0][0]!==Ie[0]||le.mouse[0][1]!==Ie[1])&&(le.mouse[1]=_e.invert(le.mouse[0]=Ie)),clearTimeout(le.wheel);else{if(_e.k===ke)return;le.mouse=[Ie,_e.invert(Ie)],wx(this),le.start()}f0(N),le.wheel=setTimeout(re,C),le.zoom("mouse",t(G(L(_e,ke),le.mouse[0],le.mouse[1]),le.extent,r));function re(){le.wheel=null,le.end()}}function te(N,...ne){if(y||!a.apply(this,arguments))return;var le=N.currentTarget,_e=Z(this,ne,!0).event(N),ke=eo(N.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",je,!0),Ie=pu(N,le),re=N.clientX,Q=N.clientY;wwe(N.view),iA(N),_e.mouse=[Ie,this.__zoom.invert(Ie)],wx(this),_e.start();function J(Qe){if(f0(Qe),!_e.moved){var Je=Qe.clientX-re,kt=Qe.clientY-Q;_e.moved=Je*Je+kt*kt>I}_e.event(Qe).zoom("mouse",t(G(_e.that.__zoom,_e.mouse[0]=pu(Qe,le),_e.mouse[1]),_e.extent,r))}function je(Qe){ke.on("mousemove.zoom mouseup.zoom",null),Cwe(Qe.view,_e.moved),f0(Qe),_e.event(Qe).end()}}function ce(N,...ne){if(a.apply(this,arguments)){var le=this.__zoom,_e=pu(N.changedTouches?N.changedTouches[0]:N,this),ke=le.invert(_e),Ie=le.k*(N.shiftKey?.5:2),re=t(G(L(le,Ie),_e,ke),e.apply(this,ne),r);f0(N),l>0?eo(this).transition().duration(l).call(B,re,_e,N):eo(this).call(E.transform,re,_e,N)}}function me(N,...ne){if(a.apply(this,arguments)){var le=N.touches,_e=le.length,ke=Z(this,ne,N.changedTouches.length===_e).event(N),Ie,re,Q,J;for(iA(N),re=0;re<_e;++re)Q=le[re],J=pu(Q,this),J=[J,this.__zoom.invert(J),Q.identifier],ke.touch0?!ke.touch1&&ke.touch0[2]!==J[2]&&(ke.touch1=J,ke.taps=0):(ke.touch0=J,Ie=!0,ke.taps=1+!!h);h&&(h=clearTimeout(h)),Ie&&(ke.taps<2&&(g=J[0],h=setTimeout(function(){h=null},x)),wx(this),ke.start())}}function X(N,...ne){if(this.__zooming){var le=Z(this,ne).event(N),_e=N.changedTouches,ke=_e.length,Ie,re,Q,J;for(f0(N),Ie=0;Ie<ke;++Ie)re=_e[Ie],Q=pu(re,this),le.touch0&&le.touch0[2]===re.identifier?le.touch0[0]=Q:le.touch1&&le.touch1[2]===re.identifier&&(le.touch1[0]=Q);if(re=le.that.__zoom,le.touch1){var je=le.touch0[0],Qe=le.touch0[1],Je=le.touch1[0],kt=le.touch1[1],Pt=(Pt=Je[0]-je[0])*Pt+(Pt=Je[1]-je[1])*Pt,zt=(zt=kt[0]-Qe[0])*zt+(zt=kt[1]-Qe[1])*zt;re=L(re,Math.sqrt(Pt/zt)),Q=[(je[0]+Je[0])/2,(je[1]+Je[1])/2],J=[(Qe[0]+kt[0])/2,(Qe[1]+kt[1])/2]}else if(le.touch0)Q=le.touch0[0],J=le.touch0[1];else return;le.zoom("touch",t(G(re,Q,J),le.extent,r))}}function de(N,...ne){if(this.__zooming){var le=Z(this,ne).event(N),_e=N.changedTouches,ke=_e.length,Ie,re;for(iA(N),y&&clearTimeout(y),y=setTimeout(function(){y=null},x),Ie=0;Ie<ke;++Ie)re=_e[Ie],le.touch0&&le.touch0[2]===re.identifier?delete le.touch0:le.touch1&&le.touch1[2]===re.identifier&&delete le.touch1;if(le.touch1&&!le.touch0&&(le.touch0=le.touch1,delete le.touch1),le.touch0)le.touch0[1]=this.__zoom.invert(le.touch0[0]);else if(le.end(),le.taps===2&&(re=pu(re,this),Math.hypot(g[0]-re[0],g[1]-re[1])<A)){var Q=eo(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return E.wheelDelta=function(N){return arguments.length?(i=typeof N=="function"?N:Y2(+N),E):i},E.filter=function(N){return arguments.length?(a=typeof N=="function"?N:Y2(!!N),E):a},E.touchable=function(N){return arguments.length?(n=typeof N=="function"?N:Y2(!!N),E):n},E.extent=function(N){return arguments.length?(e=typeof N=="function"?N:Y2([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),E):e},E.scaleExtent=function(N){return arguments.length?(s[0]=+N[0],s[1]=+N[1],E):[s[0],s[1]]},E.translateExtent=function(N){return arguments.length?(r[0][0]=+N[0][0],r[1][0]=+N[1][0],r[0][1]=+N[0][1],r[1][1]=+N[1][1],E):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},E.constrain=function(N){return arguments.length?(t=N,E):t},E.duration=function(N){return arguments.length?(l=+N,E):l},E.interpolate=function(N){return arguments.length?(u=N,E):u},E.on=function(){var N=d.on.apply(d,arguments);return N===d?E:N},E.clickDistance=function(N){return arguments.length?(I=(N=+N)*N,E):Math.sqrt(I)},E.tapDistance=function(N){return arguments.length?(A=+N,E):A},E}const Xr={axisBottom:AF,axisLeft:TF,scaleLinear:mE,select:eo,zoom:Lwe};class Rwe{manager_;scaleX;scaleY;updateScaleX=e=>e;updateScaleY=e=>e;material;width_;height_;previousDomainX=[];zoom_;svg_;constructor(e){this.manager_=e}drawPoints(e){const t=e.distance.length,i=Xr.select(".lidarprofile-container .lidar-canvas").node().getContext("2d"),n=this.manager_.config.serverConfig;for(let s=0;s<t;++s){const r=e.distance[s],l=e.altitude[s],u=e.color_packed[s],d=e.intensity[s],h=e.classification[s];if(n.classification_colors[h]&&n.classification_colors[h].visible){const g=this.updateScaleX(r),y=this.updateScaleY(l);i.beginPath(),i.moveTo(g,y),this.material==="COLOR_PACKED"?i.fillStyle=`rgb(${u[0]}, ${u[1]}, ${u[2]})`:this.material==="INTENSITY"?i.fillStyle=`rgb(${d}, ${d}, ${d})`:this.material==="CLASSIFICATION"?i.fillStyle=`rgb(${n.classification_colors[h].color})`:i.fillStyle=n.default_color,i.arc(g,y,n.point_size,0,2*Math.PI,!1),i.fill()}}}setupPlot(e,t){const i=Xr.select(".lidarprofile-container .lidar-canvas"),n=i.node();n.getContext("2d").clearRect(0,0,n.getBoundingClientRect().width,n.getBoundingClientRect().height);const r=this.manager_.config.clientConfig.margin,l=Xr.select(".lidarprofile-container").node(),u=l.getBoundingClientRect().width,d=l.getBoundingClientRect().height;this.width_=Math.max(u-(r.left+r.right),0),this.height_=Math.max(d-(r.top+r.bottom),0),this.material=this.manager_.config.serverConfig.default_attribute,i.attr("height",this.height_).attr("width",this.width_).style("background-color","white").style("z-index",0).style("position","absolute").style("margin-left",`${r.left}px`).style("margin-top",`${r.top}px`);const h=e[1]-e[0],g=t[1]-t[0],y=h/g,x=this.width_,C=this.height_,I=x/C;if(y<I)this.scaleX=Xr.scaleLinear().domain(e).range([0,this.width_]),this.scaleY=Xr.scaleLinear().domain(t).range([this.height_,0]);else{const L=y/I,G=g*L,F=(t[1]+t[0])/2;this.scaleX=Xr.scaleLinear().domain(e).range([0,this.width_]),this.scaleY=Xr.scaleLinear().domain([F-G/2,F+G/2]).range([this.height_,0])}this.zoom_=Xr.zoom().scaleExtent([-10,100]).translateExtent([[0,0],[this.width_+1e3,this.height_]]).extent([[0,0],[this.width_+1e3,this.height_]]).on("zoom",this.zoomed.bind(this)).on("end",this.zoomEnd.bind(this)),this.previousDomainX=this.scaleX.domain(),this.updateScaleX=this.scaleX,this.updateScaleY=this.scaleY,this.svg_=Xr.select(".lidarprofile-container svg.lidar-svg"),this.svg_.call(this.zoom_).on("dblclick.zoom",null),this.svg_.selectAll("*").remove(),this.svg_.attr("width",this.width_+r.left).attr("height",this.height_+r.top+r.bottom),this.svg_.on("mousemove",L=>{this.pointHighlight(L)});const A=Xr.axisBottom(this.scaleX),E=Xr.axisLeft(this.scaleY).tickSize(-this.width_);this.svg_.append("g").attr("class","y axis").call(E),this.svg_.append("g").attr("class","x axis").call(A),this.svg_.select(".y.axis").attr("transform",`translate(${r.left}, ${r.top})`),this.svg_.select(".x.axis").attr("transform",`translate(${r.left}, ${this.height_+r.top})`),this.svg_.select(".y.axis").selectAll("g.tick line").style("opacity","0.5").style("stroke","#b7cff7")}activateZoom(){this.svg_.call(this.zoom_)}deactivateZoom(){this.svg_.on(".zoom",null)}zoomEnd(){Xr.select(".lidarprofile-container .lidar-canvas").node().getContext("2d").clearRect(0,0,this.width_,this.height_),this.manager_.updateData()}zoomed(e){this.manager_.clearMeasure();const t=e.transform,i=Xr.select(".lidarprofile-container svg.lidar-svg"),n=Xr.axisBottom(this.scaleX),s=Xr.axisLeft(this.scaleY).tickSize(-this.width_),r=t.rescaleX(this.scaleX),l=t.rescaleY(this.scaleY),u=n.scale(r),d=s.scale(l);i.select(".x.axis").call(u),i.select(".y.axis").call(d),Xr.select(".lidarprofile-container .lidar-canvas").node().getContext("2d").clearRect(0,0,this.width_,this.height_),i.select(".y.axis").selectAll("g.tick line").style("opacity","0.5").style("stroke","#b7cff7"),this.updateScaleX=r,this.updateScaleY=l}pointHighlight(e){const t=Xr.select(".lidarprofile-container svg.lidar-svg"),i=Xr.select(".lidarprofile-container .lidar-info"),n=this.manager_.config.serverConfig.point_size,s=this.manager_.config.clientConfig.margin,r=this.manager_.config.clientConfig.tolerance||0,l=Xr.select(".lidarprofile-container .lidar-canvas").node(),u=pu(e,l),d=this.manager_.config.serverConfig.classification_colors,h=this.manager_.utils.getClosestPoint(this.manager_.profilePoints,u[0],u[1],r,this.updateScaleX,this.updateScaleY,d);if(h!=null){const g=this.updateScaleX(h.distance)+s.left,y=this.updateScaleY(h.altitude)+s.top;t.selectAll("#highlightCircle").remove(),t.append("circle").attr("id","highlightCircle").attr("cx",g).attr("cy",y).attr("r",n+3).style("fill","red");const x=h.classification??-1,C=d[x]||{},I=this.getInfoHTML(h,C,1);i.html(I),this.manager_.cartoHighlight.setElement(void 0);const A=document.createElement("div");A.className+="tooltip gmf-tooltip-measure",A.innerHTML=I,this.manager_.cartoHighlight.setElement(A);const E=new Ln([h.coords[0],h.coords[1]]).transform("EPSG:2169","EPSG:3857");this.manager_.cartoHighlight.setPosition(E.getCoordinates());const L=this.manager_.lidarPointHighlight.getSource();L&&L.clear();const G=new Di(E);typeof C.color<"u"&&G.setStyle(new $a({image:new Qr({fill:new ji({color:`rgba(${C.color}, 1)`}),radius:3})})),L&&L.addFeature(G)}else{const g=this.manager_.lidarPointHighlight.getSource();g&&g.clear(),t.select("#highlightCircle").remove(),i.html(""),this.manager_.cartoHighlight.setPosition(void 0)}}getInfoHTML(e,t,i){const n=(g,y)=>parseFloat(`${g}`).toFixed(y),s=e.distance,r=e.altitude,l=t.name?t.name[Va.language]:"",u=l!=null?String(l):"",d=e.intensity,h=[];if(s!==void 0){const g=Va.t("Distance: ");h.push(`${g+n(s,i)}`)}if(r!==void 0){const g=Va.t("Altitude: ");h.push(`${g+n(r,i)}`)}if(u.length>0){const g=Va.t("Classification: ");h.push(`${g+u}`)}if(d!==void 0){const g=Va.t("Intensity: ");h.push(`${g+n(d,0)}`)}return h.join("</br>")}changeStyle(e){this.material=e,this.clear(),this.drawPoints(this.manager_.profilePoints)}clear(){const e=Xr.select(".lidarprofile-container .lidar-canvas").node();e.getContext("2d").clearRect(0,0,e.width,e.height)}setClassActive(e,t){this.manager_.config.serverConfig.classification_colors=e,this.changeStyle(t)}}const n6={select:eo};class kwe{clipLineByMeasure(e,t,i){const n=new Ki([]);let s=0,r=0;const l=e.getLength(),u=t/l,d=i/l;let h=e.getCoordinates().length-1,g=0;e.forEachSegment((B,Z)=>{g+=1;const Y=new Ki([B,Z]);r+=Y.getLength(),t==s?n.appendCoordinate(B):t>s&&t<r&&n.appendCoordinate(e.getCoordinateAt(u)),s>t&&s<i&&n.appendCoordinate(B),i==r?n.appendCoordinate(Z):(i>s&&i<r||i>s&&i>r&&g===h)&&n.appendCoordinate(e.getCoordinateAt(d)),s+=Y.getLength()});const y=n.clone(),x=new Di({geometry:n.transform("EPSG:2169","EPSG:3857")}),C=new $a({stroke:new Li({color:"rgba(255,0,0,1)",width:2,lineCap:"square"})});let I=0,A=0;h=n.getCoordinates().length-1;let E=1;n.forEachSegment((B,Z)=>{if(E==1){const Y=Z[0]-B[0],$=Z[1]-B[1];I=Math.atan2(Y,$)}if(E==h){const Y=Z[0]-B[0],$=Z[1]-B[1];A=Math.atan2(Y,$)}E+=1});const L=[C],G=n.getLastCoordinate(),F=n.getFirstCoordinate();return L.push(new $a({geometry:new Ln(F),image:new bl({fill:new ji({color:"rgba(255, 0, 0, 1)"}),stroke:new Li({color:"rgba(255,0,0,1)",width:1,lineCap:"square"}),points:3,radius:5,rotation:I,angle:Math.PI/3})}),new $a({geometry:new Ln(G),image:new bl({fill:new ji({color:"rgba(255, 0, 0, 1)"}),stroke:new Li({color:"rgba(255,0,0,1)",width:1,lineCap:"square"}),points:3,radius:5,rotation:A,angle:4*Math.PI/3})})),{clippedLine:y.getCoordinates(),distanceOffset:t,bufferGeom:x,bufferStyle:L}}getNiceLOD(e,t){let i=0,n=0;for(const s in t){const r=parseInt(s,10);e<r&&t[r].max>i&&(i=t[r].max,n=t[r].width)}return{maxLOD:i,width:n}}downloadProfileAsImageFile(e){const t=n6.select(".lidarprofile-container svg.lidar-svg"),i=parseInt(t.attr("width"),10),n=parseInt(t.attr("height"),10),s=e.margin,r=document.createElement("canvas");r.style.display="none",r.width=i,r.height=n;const l=r.getContext("2d");if(l){l.fillStyle="white",l.fillRect(0,0,i,n);const u=n6.select(".lidarprofile-container .lidar-canvas").node();u instanceof HTMLCanvasElement&&l.drawImage(u,s.left,s.top,i-(s.left+s.right),n-(s.top+s.bottom));const d=new Image,h=new XMLSerializer,g=t.node(),y=h.serializeToString(g),x="lidar_profile_for_export_uid";d.id=x,d.src=`data:image/svg+xml;base64, ${btoa(y)}`,d.style.setProperty("display","none");const C=document.getElementsByTagName("body")[0];d.onload=()=>{l.drawImage(d,0,0,i,n);const I=document.getElementById(x);I&&C.removeChild(I),r.toBlob(A=>{lB.saveAs(A,"LIDAR_profile.png")})},C.appendChild(d)}}getFlatPointsByDistance(e){const t=[];for(let i=0;i<e.distance.length;i++){const n={distance:e.distance[i],altitude:e.altitude[i],color_packed:e.color_packed[i],intensity:e.intensity[i],classification:e.classification[i],coords:e.coords[i]};t.push(n)}return t.sort((i,n)=>i.distance-n.distance),t}getCSVData(e){return e.map(t=>{const i={};for(const n in t){const s=t[n];n==="altitude"?i[n]=s?s.toFixed(4):null:n==="color_packed"||n=="coords"?i[n]=s?s.join(" "):null:i[n]=s}return i})}arrayMax(e){return Math.max(...e)}arrayMin(e){let t=1/0;for(let i=0;i<e.length;i++)e[i]<t&&(t=e[i]);return t}getPytreeLinestring(e){const t=e.getCoordinates();let i="";for(let n=0;n<t.length;n++){const s=t[n][0],r=t[n][1];i+=`{${Math.round(100*s)/100}, ${Math.round(100*r)/100}},`}return i.slice(0,-1)}getClosestPoint(e,t,i,n,s,r,l){const u=e,d=n,h=[],g=[];if(u.distance&&u.altitude&&u.classification&&u.color_packed&&u.intensity&&u.coords){for(let x=0;x<u.distance.length;x++)if(s(u.distance[x])<t+d&&s(u.distance[x])>t-d&&r(u.altitude[x])<i+d&&r(u.altitude[x])>i-d){const C=Math.sqrt(Math.pow(s(u.distance[x])-t,2)+Math.pow(r(u.altitude[x])-i,2)),I=l[u.classification[x]];I&&I.visible==1&&(g.push({distance:u.distance[x],altitude:u.altitude[x],classification:u.classification[x],color_packed:u.color_packed[x],intensity:u.intensity[x],coords:u.coords[x]}),h.push(C))}}let y;if(g.length>0){const x=Math.min(...h),C=h.indexOf(x);C!=-1?y=g[C]:y=g[0]}return y}}class Pwe{manager;pStart;pEnd;constructor(e){this.manager=e,this.pStart={},this.pEnd={}}clearMeasure(){this.manager.plot.activateZoom(),this.pStart={},this.pEnd={};const e=eo(".lidarprofile-container svg.lidar-svg");e.selectAll("#text_m").remove(),e.selectAll("#start_m").remove(),e.selectAll("#end_m").remove(),e.selectAll("#line_m").remove(),e.on("click",null),e.style("cursor","default")}setMeasureActive(){this.manager.plot.deactivateZoom();const e=eo(".lidarprofile-container svg.lidar-svg");e.style("cursor","pointer"),e.on("click",t=>this.measureHeight(t))}measureHeight(e){const t=eo(".lidarprofile-container svg.lidar-svg"),i=t.node(),n=eo(".lidarprofile-container .lidar-canvas").node();if(!i||!n)return;const s=pu(e,i),r=pu(e,n),l=this.manager.config.clientConfig.margin,u=s[0],d=s[1],h=2,g=this.manager.plot.updateScaleX,y=this.manager.plot.updateScaleY,x=3,C=this.manager.utils.getClosestPoint(this.manager.profilePoints,r[0],r[1],h,g,y,this.manager.config.serverConfig.classification_colors);if(this.pStart.set?this.pEnd.set||(C!==void 0?(this.pEnd.distance=C.distance,this.pEnd.altitude=C.altitude,this.pEnd.cx=g(C.distance)+l.left,this.pEnd.cy=y(C.altitude)+l.top):(this.pEnd.distance=g.invert(u),this.pEnd.altitude=y.invert(d),this.pEnd.cx=u,this.pEnd.cy=d),this.pEnd.set=!0,t.append("circle").attr("id","end_m").attr("cx",this.pEnd.cx).attr("cy",this.pEnd.cy).attr("r",x).style("fill","red"),t.append("line").attr("id","line_m").attr("x1",this.pStart.cx).attr("y1",this.pStart.cy).attr("x2",this.pEnd.cx).attr("y2",this.pEnd.cy).attr("stroke-width",2).attr("stroke","red")):(C!==void 0?(this.pStart.distance=C.distance,this.pStart.altitude=C.altitude,this.pStart.cx=g(C.distance)+l.left,this.pStart.cy=y(C.altitude)+l.top):(this.pStart.distance=g.invert(u),this.pStart.altitude=y.invert(d),this.pStart.cx=u,this.pStart.cy=d),this.pStart.set=!0,t.append("circle").attr("id","start_m").attr("cx",this.pStart.cx).attr("cy",this.pStart.cy).attr("r",x).style("fill","red")),this.pStart.set&&this.pEnd.set){const I=this.pEnd.altitude-this.pStart.altitude,A=this.pEnd.distance-this.pStart.distance,E=Math.round(10*Math.sqrt(Math.pow(I,2)+Math.pow(A,2)))/10;isNaN(E)||t.append("text").attr("id","text_m").attr("x",10+(this.pStart.cx+this.pEnd.cx)/2).attr("y",(this.pStart.cy+this.pEnd.cy)/2).text(`${E} m`).attr("font-family","sans-serif").attr("font-size","14px").style("font-weight","bold").attr("fill","red"),this.pEnd.set=!1,this.pStart.set=!1}}}const Ag={select:eo};class Gwe{map=qa().getOlMap();utils=new kwe;promise=null;plot=null;measure=null;config=null;cartoHighlight=new Nm({offset:[0,-15],positioning:"bottom-center"});lidarPointHighlight=new bs({source:new lo({}),style:new $a({image:new Qr({fill:new ji({color:"rgba(0, 0, 255, 1)"}),radius:3})})});lidarBuffer=new bs({source:new lo({})});profilePoints=this.getEmptyProfilePoints_();isPlotSetup_=!1;line_;constructor(){}init(e){this.config=e,this.plot=new Rwe(this),this.lidarBuffer.setMap(this.map),this.lidarPointHighlight.setMap(this.map),this.measure=new Pwe(this)}clearBuffer(){if(this.lidarBuffer){const e=this.lidarBuffer.getSource();e&&e.clear()}}setLine(e){this.line_=e}getEmptyProfilePoints_(){return{distance:[],altitude:[],color_packed:[],intensity:[],classification:[],coords:[]}}resetPlot(){this.isPlotSetup_=!1,this.plot.clear()}arrayToCsvString(e){if(!e.length)return"";const t=Object.keys(e[0]),i=e.map(n=>t.map(s=>JSON.stringify(n[s]??"")).join(","));return[t.join(","),...i].join(`\r
`)}exportCsv(){const e=this.utils.getFlatPointsByDistance(this.profilePoints)||{},t=this.utils.getCSVData(e),i=this.arrayToCsvString(t),n=new Blob([i],{type:"text/csv"});TO("export-lidar.csv",n,"text/csv")}exportPng(){this.utils.downloadProfileAsImageFile(this.config.clientConfig)}exportLas(){const e=tb(),{profileWidth:t}=xt(e);this.getProfileByLOD([],0,0,!0,t.value)}getProfileByLOD(e,t,i,n,s){this.profilePoints=this.getEmptyProfilePoints_(),Ag.select(".lidarprofile-container .lidar-error").style("visibility","hidden");let r=this.utils.getPytreeLinestring(this.line_),l;Ag.select(".lidarprofile-container .lod-info").html("");const u=this.config.serverConfig.max_levels;let d=0;if(t==0)l=this.utils.getNiceLOD(this.line_.getLength(),u);else{const g=this.plot.updateScaleX.domain();r="";for(let y=0;y<e.length;y++)r+=`{${e[y][0]},${e[y][1]}},`;r=r.slice(0,-1),l=this.utils.getNiceLOD(g[1]-g[0],u)}this.config.clientConfig.pointSum=0,this.config.clientConfig.autoWidth?d=l.width:d=this.config.serverConfig.width,d=s;const h=Va.t("Profile width: ");if(Ag.select(".lidarprofile-container .width-info").html(`${h} ${d}m`),n)this.queryPytree_(void 0,void 0,r,t,d,!0);else for(let g=0;g<l.maxLOD;g++)g==0?(this.queryPytree_(i,this.config.serverConfig.initialLOD,r,t,d,!1),g+=this.config.serverConfig.initialLOD-1):this.queryPytree_(i+g,i+g+1,r,t,d,!1)}queryPytree_(e,t,i,n,s,r){if(!this.config)throw new Error("Missing config");if(!this.config.serverConfig)throw new Error("Missing config.serverConfig");this.map.getViewport().style.cursor="wait",document.body.style.cursor="wait";const l=Ag.select(".lidarprofile-container .lod-info");if(this.config.serverConfig.debug){let g=l.html();const y=Va.t("Loading LOD: ");g+=`${y} ${e}-${t}...<br>`,l.html(g)}const u=this.config.serverConfig.default_point_cloud,d=r?1:0,h={method:"GET",headers:{"Content-Type":"text/plain; charset=x-user-defined"},responseType:"arraybuffer"};if(r){const g=`https://map.geoportail.lu/profile/get?width=${s}&coordinates=${i}&pointCloud=${u}&attributes=&getLAS=${d}`;fetch(g,h).then(y=>y.blob()).then(y=>{const x=window.URL.createObjectURL(y),C=document.createElement("a");C.style.display="none",C.href=x,C.download="output.las",document.body.appendChild(C),C.click(),window.URL.revokeObjectURL(x)}).finally(()=>{this.map.getViewport().style.cursor="",document.body.style.cursor=""})}else{let g=`https://map.geoportail.lu/profile/get?minLOD=${e}&maxLOD=${t}&width=${s}&coordinates=${i}&pointCloud=${u}&attributes=&getLAS=${d}`;(e===void 0||t===void 0)&&(g=`https://map.geoportail.lu/profile/get?width=${s}&coordinates=${i}&pointCloud=${u}&attributes=&getLAS=${d}`),fetch(g,h).then(y=>y.arrayBuffer()).then(y=>{if(!this.config)throw new Error("Missing config");if(!this.config.serverConfig)throw new Error("Missing config.serverConfig");if(this.config.serverConfig.debug){let x=l.html();const C=Va.t("LOD: "),I=Va.t("loaded");x+=`${C} ${e}-${t} ${I}<br>`,l.html(x)}this.processBuffer_(y,n)}).catch(y=>{throw`Error on pytree query: ${y.message}`}).finally(()=>{this.map.getViewport().style.cursor="",document.body.style.cursor=""})}}processBuffer_(e,t){const i=Ag.select(".lidarprofile-container .lidar-error"),s=new Int32Array(e,0,4)[0],r=new Uint8Array(e,4,s);let l="";for(let E=0;E<r.length;E++)l+=String.fromCharCode(r[E]);try{JSON.parse(l)}catch{if(!this.isPlotSetup_){const L=Ag.select(".lidarprofile-container .lidar-canvas"),G=L.node();if(G&&G instanceof HTMLCanvasElement){const F=G.getContext("2d");F&&F.clearRect(0,0,G.getBoundingClientRect().width,G.getBoundingClientRect().height),L.selectAll("*").remove();const B=this.getHTMLError_();i.style("visibility","visible"),i.html(B)}}return}i.style("visibility","hidden");const u=JSON.parse(l);this.config.clientConfig.pointSum+=u.points,this.config.clientConfig.pointSum>this.config.serverConfig.max_point_number&&console.warn("Number of points is higher than Pytree configuration max value !");const d=u.pointAttributes,h=[];for(let E=0;E<d.length;E++)this.config.serverConfig.point_attributes[d[E]]!=null&&h.push(this.config.serverConfig.point_attributes[d[E]]);const g=u.scale;if(u.points<3)return;const y=this.getEmptyProfilePoints_(),x=u.bytesPerPoint,C=e.slice(4+s);for(let E=0;E<u.points;E++){const L=x*E,G=new DataView(C,L,x);let F=0;for(let B=0;B<h.length;B++){if(h[B].value=="POSITION_PROJECTED_PROFILE"){const Y=G.getUint32(F,!0)*g;y.distance.push(Math.round(100*(t+Y))/100),this.profilePoints.distance.push(Math.round(100*(t+Y))/100)}else if(h[B].value=="CLASSIFICATION"){const Z=G.getUint8(F);y.classification.push(Z),this.profilePoints.classification.push(Z)}else if(h[B].value=="INTENSITY"){const Z=G.getUint8(F);y.intensity.push(Z),this.profilePoints.intensity.push(Z)}else if(h[B].value=="COLOR_PACKED"){const Z=G.getUint8(F),Y=G.getUint8(F+1),$=G.getUint8(F+2);y.color_packed.push([Z,Y,$]),this.profilePoints.color_packed.push([Z,Y,$])}else if(h[B].value=="POSITION_CARTESIAN"){const Z=G.getInt32(F,!0)*g+u.boundingBox.lx,Y=G.getInt32(F+4,!0)*g+u.boundingBox.ly,$=G.getInt32(F+8,!0)*g+u.boundingBox.lz;y.coords.push([Z,Y]),y.altitude.push($),this.profilePoints.altitude.push($),this.profilePoints.coords.push([Z,Y])}F=F+h[B].bytes}}const I=[0,this.line_.getLength()],A=[this.utils.arrayMin(y.altitude),this.utils.arrayMax(y.altitude)];this.isPlotSetup_||(this.plot.setupPlot(I,A),this.isPlotSetup_=!0),this.plot.drawPoints(y)}getHTMLError_(){const e=Va.t("Lidar profile service error"),t=Va.t("It might be offline"),i=Va.t("Or did you attempt to draw a profile outside data extent?"),n=Va.t("Or did you attempt to draw such a small profile that no point was returned?");return`
      <div class="lidarprofile-error">
      <p class="bold">${e}</p>
      <p>${t}</p>
      <p>${i}</p>
      <p>${n}</p>
    `}updateData(){up(this.updateData_.bind(this),200)()}updateData_(){const e=this.plot.updateScaleX.domain(),t=this.utils.clipLineByMeasure(this.line_,e[0],e[1]),i=this.lidarBuffer.getSource();i&&(i.clear(),i.addFeature(t.bufferGeom)),this.lidarBuffer.setStyle(t.bufferStyle);const n=e[1]-e[0],s=this.utils.getNiceLOD(n,this.config.serverConfig.max_levels),r=.2;if(Math.abs(e[0]-this.plot.previousDomainX[0])<r&&Math.abs(e[1]-this.plot.previousDomainX[1])<r)this.plot.drawPoints(this.profilePoints);else if(s.maxLOD<=this.config.serverConfig.initialLOD)this.plot.drawPoints(this.profilePoints);else{const l=tb(),{profileWidth:u}=xt(l);this.getProfileByLOD(t.clippedLine,t.distanceOffset,0,!1,u.value)}this.plot.previousDomainX=e}clearMeasure(){this.measure&&this.measure.clearMeasure()}setMeasureActive(){this.measure&&(this.clearMeasure(),this.measure.setMeasureActive())}}let ms;function dB(){const a=ri(),e=tb(),{drawLidarActive:t,currentProfileFeature:i,profileWidth:n}=xt(e),{lidarOpen:s}=xt(a);let r;const l=new Yp({type:"LineString"}),u=new $a({fill:new ji({color:"rgba(255,204,51,0.5)"}),stroke:new Li({color:"rgba(255,204,51,0.5)",width:4,lineCap:"square"})}),d=new bs({source:new lo,zIndex:1001});function h(){r=qa().getOlMap(),ms=new Gwe,ms.init(e.lidarConfig),Rt(s,$=>{if($)t.value=!0;else{t.value=!1;const te=d.getSource();te&&te.clear()}}),Rt(()=>i.value,$=>{const te=d.getSource();te&&(te.clear(),$&&x($.getGeometry()))}),Rt(()=>n.value,()=>{const $=d.getSource();$&&($.clear(),i.value&&i.value&&x(i.value.getGeometry()))}),l.setActive(!1),Rt(t,$=>{l.setActive($)}),r.addInteraction(l),r.addLayer(d),d.setStyle(u),xa(l,"drawstart",$=>Iu.add(r,$)),xa(l,"drawend",$=>{g($)}),xa(document,"keyup",$=>{y($)})}function g($){l.finishDrawing(),t.value=!1,$.stopPropagation(),i.value=$.feature,A()}function y($){$.key==="Escape"&&(l.finishDrawing(),l.setActive(!1))}function x($){const te=$.getCoordinates();for(let ce=0;ce<te.length-1;ce++){const me=fr(te[ce],r.getView().getProjection(),"EPSG:2169"),X=fr(te[ce+1],r.getView().getProjection(),"EPSG:2169"),N=C(me,X,n.value/2).transform("EPSG:2169",r.getView().getProjection()),ne=new Di({geometry:N});d.getSource().addFeature(ne)}}function C($,te,ce){const[me,X]=$,[de,N]=te,ne=(de-me)/(N-X),le=Math.sqrt(Math.pow(ce,2)/(Math.pow(ne,2)+1)),_e=-ne*le,ke=me+le,Ie=X+_e,re=de-le,Q=N-_e,J=me-le,je=X-_e,Qe=de+le,Je=N+_e;return new Gs([[[ke,Ie],[J,je],[re,Q],[Qe,Je],[ke,Ie]]])}function I(){ms.clearBuffer(),ms.resetPlot(),ms.getProfileByLOD([],0,e.lidarConfig.serverConfig.minLOD,!1,n.value)}function A(){ms.resetPlot(),ms.clearBuffer(),ms.setLine(i.value.clone().getGeometry().transform("EPSG:3857","EPSG:2169")),ms.getProfileByLOD([],0,e.lidarConfig.serverConfig.minLOD,!1,n.value)}function E(){ms.exportCsv()}function L(){ms.exportPng()}function G(){ms.exportLas()}function F(){const $=i.value;return!!$&&typeof $.getGeometry=="function"&&$.getGeometry()&&$.getGeometry().getType&&$.getGeometry().getType()==="LineString"}function B(){ms.resetPlot(),ms.updateData()}function Z(){ms.clearMeasure(),ms.setMeasureActive()}function Y(){ms.clearMeasure()}return{drawInteraction:l,drawLidarActive:t,resetPlot:I,lidarManager:ms,hasLineFeature:F,exportCsv:E,exportPng:L,exportLas:G,init:h,updateData:B,setMeasureActive:Z,clearMeasure:Y}}const Wwe={class:"lidarprofile-container"},Owe={class:"lidar-flex"},Fwe={class:"lidar-legend p-2.5 bg-primary text-white"},Nwe={class:"export-tools"},Bwe=["disabled"],Dwe=["disabled"],Vwe=["disabled"],Zwe=["disabled"],zwe=["disabled"],Uwe={key:0,class:"lux-alert-info"},Hwe={class:"lidarprofile"},Xwe={class:"lidar-svg",style:{fill:"#ffff00",position:"absolute","z-index":"1"}},qwe=rt({__name:"lidar-graph-panel",setup(a){const{toggleLidarOpen:e}=ri(),t=tb(),{measureActive:i}=xt(t),{t:n}=Ct(),s=dB();function r(){s.exportCsv()}function l(){s.exportPng()}function u(){s.exportLas()}function d(){i.value=!i.value,i.value?h():g()}function h(){s.setMeasureActive()}function g(){i.value=!1,s.clearMeasure()}return(y,x)=>(U(),se("div",Wwe,[P("div",{class:"close",onClick:x[0]||(x[0]=C=>R(e)(!1))},""),P("div",Owe,[P("div",Fwe,[P("div",Nwe,[P("div",null,[P("button",{class:"lux-btn mt-3",disabled:!(R(s)&&R(s).hasLineFeature()),onClick:r},K(R(n)("Export CSV")),9,Bwe),P("button",{class:"lux-btn mt-3",disabled:!(R(s)&&R(s).hasLineFeature()),onClick:l},K(R(n)("Export PNG")),9,Dwe),P("button",{class:"lux-btn mt-3",disabled:!(R(s)&&R(s).hasLineFeature()),onClick:u},K(R(n)("Export LAS")),9,Vwe),P("div",null,[P("p",null,[P("button",{class:Fa(["lux-btn mt-3",{active:R(i)}]),disabled:!(R(s)&&R(s).hasLineFeature()),onClick:d},K(R(n)("Take measure")),11,Zwe),P("button",{class:"lux-btn mt-3",onClick:g,disabled:!(R(s)&&R(s).hasLineFeature())},[...x[1]||(x[1]=[P("span",{class:"fa fa-eraser"},null,-1)])],8,zwe)]),R(i)?(U(),se("p",Uwe,[Dt(K(R(n)("Measure distances on the profile below."))+" ",1),P("em",null,K(R(n)("(Deactivates zoom and pan on the profile!)")),1)])):Ge("",!0)])])]),x[2]||(x[2]=P("hr",{style:{"margin-top":"10px"}},null,-1)),x[3]||(x[3]=P("div",{class:"width-info"},null,-1)),x[4]||(x[4]=P("div",{class:"lod-info"},null,-1)),x[5]||(x[5]=P("div",{class:"lidar-info poi-feature"},null,-1))]),P("div",Hwe,[x[6]||(x[6]=P("div",{class:"lidar-error"},null,-1)),x[7]||(x[7]=P("canvas",{class:"lidar-canvas"},null,-1)),(U(),se("svg",Xwe))])])]))}}),Ywe=ir(qwe,[["__scopeId","data-v-07412ff6"]]),Kwe={class:"lux-menu-popup"},jwe=["aria-expanded","aria-label"],$we=["aria-label","aria-labelledby"],OE=rt({__name:"menu-popup",props:{items:{},direction:{},ariaLabel:{},ariaLabelledby:{}},setup(a){const e=a,t=Ai(!1),i=Ye(null),n=Ye(null),s=Ye(-1);function r(C){C.stopPropagation(),l()}function l(C){const I=t.value;t.value=C??!t.value,!I&&t.value?(s.value=0,setTimeout(()=>{y(0),n.value?.focus()},100)):I&&!t.value&&(s.value=-1,i.value?.focus())}function u(){l(!1)}function d(C){if(!t.value){["Enter"," ","ArrowDown"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),l(!0));return}switch(C.key){case"Escape":C.preventDefault(),C.stopPropagation(),l(!1);break;case"ArrowDown":C.preventDefault(),C.stopPropagation(),h();break;case"ArrowUp":C.preventDefault(),C.stopPropagation(),g();break;case"ArrowLeft":case"ArrowRight":C.preventDefault(),C.stopPropagation();break;case"Home":C.preventDefault(),C.stopPropagation(),y(0);break;case"End":C.preventDefault(),C.stopPropagation(),y(e.items.length-1);break;case"Tab":C.stopPropagation(),l(!1);break;default:C.stopPropagation();break}}function h(){const C=(s.value+1)%e.items.length;y(C)}function g(){const C=s.value<=0?e.items.length-1:s.value-1;y(C)}function y(C){if(s.value=C,!n.value)return;const I=n.value.querySelectorAll('[role="menuitem"]');if(!(!I||I.length===0)&&I[C])try{I[C].focus()}catch(A){console.error("[MenuPopup] Error focusing item:",A)}}function x(C){if(t.value)try{d(C)}catch(I){console.error("[MenuPopup] Error in handleGlobalKeyDown:",I)}}return fn(()=>{document.addEventListener("click",u),document.addEventListener("keydown",x,!0)}),Nr(()=>{document.removeEventListener("click",u),document.removeEventListener("keydown",x,!0)}),Rt(t,C=>{if(!C)return;const I=i.value,A=n.value,E=I.getBoundingClientRect(),L=e.direction==="down"?E.bottom:E.top-A.offsetHeight;A.style.top=`${L}px`,A.style.left=`${E.left+E.width-A.offsetWidth}px`}),(C,I)=>(U(),se("div",Kwe,[P("button",{onClick:r,onKeydown:d,ref_key:"btnElement",ref:i,"aria-expanded":t.value,"aria-haspopup":!0,"aria-label":a.ariaLabel},[ja(C.$slots,"default")],40,jwe),(U(),Lt(vC,{to:"body"},[P("ul",{"aria-label":a.ariaLabel,"aria-labelledby":a.ariaLabelledby,class:Fa(["lux-menu-popup-list",t.value?"":"invisible"]),ref_key:"ddElement",ref:n,role:"menu",tabindex:"-1"},[(U(!0),se(Tt,null,gi(e.items,(A,E)=>(U(),se("li",{key:A.label,class:Fa(A.separator?"border-b-[1px] pb-2 mb-2":""),role:"none"},[A.label?ja(C.$slots,"item",{key:0,item:A,index:E,isFocused:s.value===E},()=>[Dt(K(A.label)+" "+K(A.separator),1)]):Ge("",!0)],2))),128))],10,$we)]))]))}}),FE=rt({__name:"menu-popup-item",props:{item:{},index:{},isFocused:{type:Boolean}},emits:["click"],setup(a,{emit:e}){const t=a,i=e;function n(){i("click",t.item)}function s(r){r.key==="Enter"||r.key===" "?(r.preventDefault(),r.stopPropagation(),n()):r.stopPropagation()}return(r,l)=>(U(),se("button",{class:"lux-dropdown-list-item",onClick:n,onKeydown:_r(s,["stop"]),role:"menuitem",tabindex:"-1"},[ja(r.$slots,"default",{},()=>[Dt(K(a.item.label),1)])],32))}});class Jwe extends Dc{dragSegments_;features_;lastPixel_=[0,0];listener;modified_=!1;overlay_;pixelTolerance_=10;rBush_=new Fw;snappedToVertex_=!1;vertexFeature_=null;constructor(){super({handleDownEvent:tCe,handleEvent:aCe,handleUpEvent:eCe}),this.features_=new to,this.overlay_=i1.createOlLayerInteractionClip()}get overlay(){return this.overlay_}addFeature_(e){if(e.getGeometry()?.getType()==="LineString"){const t=e.getGeometry(),i=this.getMap();this.writeLineStringGeometry_(e,t),i&&this.lastPixel_[0]!==0&&this.lastPixel_[1]!==0&&this.handlePointerAtPixel_(this.lastPixel_,i)}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource()?.removeFeature(this.vertexFeature_),this.vertexFeature_=null),this.listener&&mn(this.listener)}removeFeatureSegmentData_(e){const t=this.rBush_,i=[];t.forEach(function(n){e===n.feature&&i.push(n)});for(let n=i.length-1;n>=0;--n)t.remove(i[n])}setMap(e){super.setMap(e),this.features_&&(this.features_.on("add",t=>{this.addFeature_(t.element)}),this.features_.on("remove",t=>{this.removeFeature_(t.element)}))}handleFeatureChange_(e){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}handleFeatureChanged(e){this.removeFeature_(e),this.addFeature_(e)}writeLineStringGeometry_(e,t){const i=t.getCoordinates();let n,s,r,l;for(n=0,s=i.length-1;n<s;++n)r=i.slice(n,n+2),l={feature:e,geometry:t,index:n,segment:r},this.rBush_.insert(Yr(r),l)}createOrUpdateVertexFeature_(e){let t=this.vertexFeature_;return t?t.getGeometry().setCoordinates(e):(t=new Di(new Ln(e)),this.vertexFeature_=t,this.overlay_.getSource()?.addFeature(t)),t}setActive(e){this.handlingDownUpSequence=!1,this.overlay_!==void 0&&this.vertexFeature_&&(this.overlay_.getSource()?.removeFeature(this.vertexFeature_),this.vertexFeature_=null);const t=this.getMap();t&&(e?t.getTargetElement().style.cursor="crosshair":t.getTargetElement().style.cursor=""),super.setActive(e)}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map)}handlePointerAtPixel_(e,t){if(!this.getActive())return;const i=t.getCoordinateFromPixel(e),n=function(u,d){return RA(i,u.segment)-RA(i,d.segment)},s=qd(ep(i),t.getView().getResolution()*this.pixelTolerance_),l=this.rBush_.getInExtent(s);if(l.length>0){l.sort(n);const d=l[0].segment;let h=lb(i,d);const g=t.getPixelFromCoordinate(h);if(Math.sqrt(Wd(e,g))<=this.pixelTolerance_){const y=t.getPixelFromCoordinate(d[0]),x=t.getPixelFromCoordinate(d[1]),C=Wd(g,y),I=Wd(g,x),A=Math.sqrt(Math.min(C,I));this.snappedToVertex_=A<=this.pixelTolerance_,this.snappedToVertex_&&(h=C>I?d[1]:d[0]),this.createOrUpdateVertexFeature_(h);return}}this.vertexFeature_&&(this.overlay_.getSource()?.removeFeature(this.vertexFeature_),this.vertexFeature_=null)}}function Qwe(a,e){return a.index-e.index}function eCe(){return this.handlingDownUpSequence=!1,!1}function tCe(a){if(!this.getActive())return!1;this.handlePointerAtPixel_(a.pixel,a.map),this.dragSegments_=[],this.modified_=!1;const e=this.vertexFeature_;if(e){const i=e.getGeometry().getCoordinates(),n=Yr([i]),s=this.rBush_.getInExtent(n);s.sort(Qwe);for(let r=0,l=s.length;r<l;++r){const u=s[r];if(u.feature!==void 0&&this.features_.getArray().indexOf(u.feature)>=0){const d=lb(i,u.segment);if(!Hs(d,i)){this.getActive()&&this.dispatchEvent(new oo("clickmiss"));continue}this.features_.remove(u.feature);const h=u.feature.id;h&&u.feature.set("originalFeatureId",h);const g=u.feature.clone(),y=u.feature.clone(),x=g.getGeometry(),C=y.getGeometry(),I=u.feature.getGeometry(),A=I.getCoordinates().slice(0,[u.index+1]);A.push(i);const E=I.getCoordinates().slice([u.index+1]);A.push(i),E.splice(0,0,i),x.setCoordinates(A),C.setCoordinates(E),this.features_.push(g),this.features_.push(y),this.dispatchEvent(new yx("modifyend",new to([g,y,u.feature]),a)),this.modified_=!0}}}else this.getActive()&&this.dispatchEvent(new oo("clickmiss"));return this.handlePointerAtPixel_(a.pixel,a.map),!!this.vertexFeature_}function aCe(a){return a instanceof mc?(!a.map.getView().getHints()[Kn.INTERACTING]&&a.type=="pointermove"&&!this.handlingDownUpSequence&&this.handlePointerMove_(a),Dc.prototype.handleEvent.call(this,a)):!0}function iCe(){const{t:a}=Ct(),e=$n(),t=qa().getOlMap(),{addNotification:i}=ar(),{clipLineActive:n,queueAddedDrawnFeatures:s,drawnFeatures:r,activeFeatureId:l}=xt(e),{generateDrawnFeature:u}=rI(),d=new Jwe;fn(()=>{t.addLayer(d.overlay),t.addInteraction(d),xa(d,"clickmiss",()=>{n.value&&i(a("Vous tes en mode dcoupage.<br> Veuillez cliquer sur une ligne pour la couper en deux."))}),xa(d,"modifyend",g=>{const y=g.features.getArray();if(y.length>=3){const[x,C,I]=y,A=I.get("originalFeatureId");if(!A){console.error("[ClipLine] Could not find original feature ID");return}const E=I.getProperties();Object.keys(E).forEach(Z=>{Z!=="geometry"&&Z!=="id"&&Z!=="originalFeatureId"&&(x.set(Z,E[Z]),C.set(Z,E[Z]))});const L=t.getAllLayers().filter(Z=>Z.get&&Z.get("cyLayerType")==="interactionDrawLayer");if(L.length>0){const Y=L[0].getSource();Y&&Y.removeFeature(I)}e.removeFeature(A);let G,F;typeof I.clone=="function"&&I.featureStyle!==void 0?(G=I.clone(),G.setGeometry(x.getGeometry().clone()),F=I.clone(),F.setGeometry(C.getGeometry().clone())):(G=u(x),F=u(C)),e.addDrawnFeatureToCollection(G),e.addDrawnFeatureToCollection(F),n.value=!1}})}),Rt(n,g=>{d.setActive(g),g&&i(a("Vous tes en mode dcoupage.<br> Veuillez cliquer sur une ligne pour la couper en deux."))}),Rt(s,g=>{g.length!==0&&so(()=>{g.forEach(y=>{if(n.value){const x=d.features_;x&&!x.getArray().includes(y)&&x.push(y)}}),s.value=[]})}),Rt(l,g=>{if(!n.value||!g)return;const y=d.features_;if(!y)return;const x=r.value.find(C=>C.id===g);x&&x.featureType==="drawnLine"&&(y.getArray().includes(x)||y.push(x))}),Rt(n,g=>{const y=d.features_;if(y)if(g){if(l.value){const x=r.value.find(C=>C.id===l.value);x&&x.featureType==="drawnLine"&&(y.getArray().includes(x)||y.push(x))}}else y.clear()});function h(g){n.value=g??!n.value}return{toggle:h}}const nCe=rt({__name:"feature-menu-popup",emits:["newConcentricCircle","continueLine"],setup(a,{emit:e}){const{t}=Ct(),i=A_(),n=Ps("feature"),s=e,r=St(()=>n.map_id?!!i.isMyMapEditable.value:!0);function l(d){fI.export(n.map,d,[n],n.label,!0)}let u=[{label:"Exporter un GPX",action:()=>l("gpx")},{label:"Exporter un KML",action:()=>l("kml")},{label:"Exporter un Shapefile",action:()=>l("shapefile")}];return n?.featureType==="drawnLine"&&r.value&&(u=[...u,{label:"Continuer la ligne",action:()=>s("continueLine")},{label:"Changer sens de la ligne",action:()=>JO(n)}]),n?.featureType==="drawnCircle"&&r.value&&(u=[...u,{label:"Crer cercle concentrique",action:()=>s("newConcentricCircle")}]),(d,h)=>(U(),Lt(OE,{"data-cy":"featMenuPopup",items:R(u),direction:"up",ariaLabel:R(t)("Drawings menu")},{item:Ht(({item:g})=>[gt(FE,{"data-cy":"featMenuPopupItem",item:g,onClick:()=>g.action&&g.action()},{default:Ht(()=>[Dt(K(R(t)(g.label)),1)]),_:2},1032,["item","onClick"])]),default:Ht(()=>[h[0]||(h[0]=P("i",{class:"fa-solid fa-square-caret-down hover:text-tertiary"},null,-1))]),_:1},8,["items","ariaLabel"]))}}),r6=rt({__name:"feature-confirm-delete",emits:["cancel","validate"],setup(a){const{t:e}=Ct();return(t,i)=>(U(),se(Tt,null,[Dt(K(R(e)("tes-vous certain de vouloir effacer cet lment de la carte ?"))+" ",1),ja(t.$slots,"footer")],64))}}),s6=rt({__name:"feature-edit-info",emits:["cancel","validate"],setup(a){const{t:e}=Ct(),t=Ps("feature");return(i,n)=>(U(),se(Tt,null,[Dt(K(R(e)("Modification des informations"))+" ",1),R(t)?Sa((U(),se("input",{key:0,"data-cy":"featureLabelEdit",type:"text",class:"form-control block mt-2 mb-4","onUpdate:modelValue":n[0]||(n[0]=s=>R(t).label=s)},null,512)),[[Vn,R(t).label]]):Ge("",!0),R(t)?Sa((U(),se("textarea",{key:1,rows:"3",class:"form-control block w-full","onUpdate:modelValue":n[1]||(n[1]=s=>R(t).description=s)},null,512)),[[Vn,R(t).description]]):Ge("",!0),ja(i.$slots,"footer")],64))}}),rCe={class:"flex"},sCe=["min","max","name","step"],oCe=["min","max","name","step"],K2=rt({__name:"range-input",props:{min:{default:0},max:{default:10},step:{default:1},value:{default:0},name:{default:"range"}},emits:["change"],setup(a){const t=Ye(a.value);return(i,n)=>(U(),se("div",rCe,[Sa(P("input",{type:"range",class:"m-2.5 w-16 h-[5px] rounded-lg appearance-none cursor-pointer",min:a.min,max:a.max,name:`range-${a.name}`,step:a.step,"onUpdate:modelValue":n[0]||(n[0]=s=>t.value=s),onInput:n[1]||(n[1]=s=>i.$emit("change",t.value))},null,40,sCe),[[Vn,t.value,void 0,{number:!0}]]),Sa(P("input",{type:"number",class:"w-12",min:a.min,max:a.max,name:a.name,step:a.step,"onUpdate:modelValue":n[2]||(n[2]=s=>t.value=s),onChange:n[3]||(n[3]=s=>i.$emit("change",t.value))},null,40,oCe),[[Vn,t.value]])]))}}),lCe=rt({__name:"feature-edit-style-circle",props:{feature:{}},setup(a){return(e,t)=>(U(),se(Tt,null,[ja(e.$slots,"title"),ja(e.$slots,"color"),ja(e.$slots,"lineWidth"),ja(e.$slots,"transparency"),ja(e.$slots,"footer")],64))}}),uCe=rt({__name:"feature-edit-style-point",props:{feature:{}},setup(a){const e=Ye(!1);function t(){e.value=!1}return(i,n)=>e.value?ja(i.$slots,"symbolIcon",{key:1,closeEditIcon:t},()=>[ja(i.$slots,"symbolcolor")]):(U(),se(Tt,{key:0},[ja(i.$slots,"title"),ja(i.$slots,"color"),ja(i.$slots,"styleSymbol",{openEditIcon:()=>e.value=!0}),ja(i.$slots,"size",{maxsize:900}),ja(i.$slots,"angle"),ja(i.$slots,"footer")],64))}}),cCe=rt({__name:"feature-edit-style-line",props:{feature:{}},setup(a){return(e,t)=>(U(),se(Tt,null,[ja(e.$slots,"title"),ja(e.$slots,"color"),ja(e.$slots,"lineWidth"),ja(e.$slots,"style"),ja(e.$slots,"orientation"),ja(e.$slots,"footer")],64))}}),dCe=rt({__name:"feature-edit-style-polygon",props:{feature:{}},setup(a){return(e,t)=>(U(),se(Tt,null,[ja(e.$slots,"title"),ja(e.$slots,"color"),ja(e.$slots,"lineWidth"),ja(e.$slots,"transparency"),ja(e.$slots,"footer")],64))}}),hCe=rt({__name:"feature-edit-style-label",props:{feature:{}},setup(a){return(e,t)=>(U(),se(Tt,null,[ja(e.$slots,"title"),ja(e.$slots,"color"),ja(e.$slots,"size",{maxsize:40}),ja(e.$slots,"angle"),ja(e.$slots,"footer")],64))}}),_Ce=rt({__name:"feature-edit-linestyle-item",props:{linestyle:{}},emits:["changeLinestyle"],setup(a,{emit:e}){const{t}=Ct(),i=e,n=Ps("feature");function s(r){i("changeLinestyle",r)}return(r,l)=>(U(),se("button",{class:Fa(`lux-btn-grey${R(n).featureStyle.linestyle===a.linestyle?" pressed":""}`),onClick:l[0]||(l[0]=u=>s(a.linestyle))},K(R(t)(R(kre)(a.linestyle))),3))}}),mCe=["cx","cy","r","fill"],hB=rt({__name:"circleSymbol",props:{radius:{default:9},fillColor:{default:"red"}},setup(a){const t=a.radius*2;return(i,n)=>(U(),se("svg",{height:t,width:t},[P("circle",{cx:a.radius,cy:a.radius,r:a.radius,fill:a.fillColor},null,8,mCe)]))}}),fCe=["height","width"],gCe=["fill"],_B=rt({__name:"squareSymbol",props:{fillColor:{default:"red"},height:{default:18},width:{default:18}},setup(a){return(e,t)=>(U(),se("svg",{height:a.height,width:a.width},[P("rect",{height:"100%",width:"100%",fill:a.fillColor},null,8,gCe)],8,fCe))}}),pCe=["height","width"],yCe=["y","font-size","fill"],mB=rt({__name:"crossSymbol",props:{fillColor:{default:"red"},fontSize:{default:42},height:{default:18},width:{default:18}},setup(a){return(e,t)=>(U(),se("svg",{height:a.height,width:a.width},[P("text",{x:"1",y:a.height+2,"font-size":a.fontSize,fill:a.fillColor},"+",8,yCe)],8,pCe))}}),bCe=["height","width"],vCe=["fill"],fB=rt({__name:"triangleSymbol",props:{fillColor:{default:"red"},size:{default:18}},setup(a){const e=a,t=e.size/2,i=`0,${e.size} ${t},0 ${e.size},${e.size}`;return(n,s)=>(U(),se("svg",{height:a.size,width:a.size},[P("polygon",{points:i,fill:a.fillColor},null,8,vCe)],8,bCe))}}),xCe={class:"flex gap-2 items-center mt-1 mb-2"},wCe={class:"font-bold block"},CCe=["src"],ICe=rt({__name:"feature-edit-style-symbol",emits:["clickSymbolIcon"],setup(a){const e="https://migration.geoportail.lu/mymaps/symbol",{t}=Ct(),i=Ps("feature"),n={circle:hB,square:_B,cross:mB,triangle:fB};return(s,r)=>(U(),se("div",xCe,[P("label",wCe,K(R(t)("Symbol")),1),R(i).featureStyle.symbolId?(U(),se("button",{key:0,class:"lux-btn items-center",onClick:r[0]||(r[0]=l=>s.$emit("clickSymbolIcon")),"data-cy":"featStyleSymbolEdit"},[P("img",{class:"symbol-style max-h-10",src:`${R(e)}/${R(i).featureStyle.symbolId}`},null,8,CCe)])):(U(),se("button",{key:1,class:"lux-btn items-center flex gap-2",onClick:r[1]||(r[1]=l=>s.$emit("clickSymbolIcon")),"data-cy":"featStyleSymbolEdit"},[Dt(K(R(t)("Symbole"))+" ",1),R(i).featureStyle.shape?(U(),Lt(rb(n[R(i).featureStyle.shape]),{key:0,fillColor:R(i).featureStyle.color},null,8,["fillColor"])):Ge("",!0)]))]))}}),gB="https://migration.geoportail.lu/mymaps/symbols",SCe="https://migration.geoportail.lu/mymaps",ACe="http://migration.geoportail.lu/mymaps/upload_symbol";let nA,rA;async function TCe(a=!1){return(!nA?.results||a)&&(nA=await(await Br(gB,{symboltype:"public"},"GET")).json()),nA?.results}async function ECe(a=!1){return(!rA?.results||a)&&(rA=await(await Br(gB,{symboltype:"us"},"GET")).json()),rA?.results}async function MCe(a){const e=new FormData;return e.append("file",a),await Br(ACe,e,"POST")}const LCe=["placeholder"],RCe=["id","title","onClick"],kCe={class:"w-12"},PCe=["src"],GCe={class:"break-all"},WCe=rt({__name:"feature-edit-symbol-list",props:{symbols:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,{t:n}=Ct(),s=Ye(""),r=St(()=>s.value?t.symbols.filter(u=>u.name.includes(s.value)):t.symbols);function l(u){i("change",u)}return(u,d)=>(U(),se("div",null,[Sa(P("input",{"data-cy":"featStyleSymbolFilterList",class:"text-white w-full placeholder-white border-[1px] border-gray-300 mb-2",type:"text",placeholder:R(n)("Rechercher un symbole"),"onUpdate:modelValue":d[0]||(d[0]=h=>s.value=h)},null,8,LCe),[[Vn,s.value,void 0,{trim:!0}]]),Dt(" "+K(R(n)("Symbole"))+" ",1),P("ul",null,[(U(!0),se(Tt,null,gi(r.value,h=>(U(),se("li",{key:h.id,class:"border-b-[1px] border-b-gray-300"},[P("button",{id:h.id.toString(),class:"leading-5 p-1 items-center flex hover:bg-slate-100 w-full text-left",title:h.name,onClick:()=>l(h.id),"data-cy":"featStyleSymbolIcon"},[P("span",kCe,[P("img",{class:"max-h-10",src:`${R(SCe)}${h.url}`},null,8,PCe)]),P("span",GCe,K(h.name),1)],8,RCe)]))),128))])]))}}),OCe={class:"border-b-gray-300 border-b-[1px] mb-2"},FCe=["data-cy","onClick"],NCe={class:"flex gap-1 my-2"},BCe=["onClick","data-cy"],DCe={class:"text-right mt-3"};var pB=(a=>(a.configurables="Configurables",a.mySymbols="Mes symboles",a.publics="Publics",a))(pB||{});const VCe=rt({__name:"feature-edit-symbol-icon",emits:["close","changeSymbolIcon","changeSymbolShape"],setup(a,{emit:e}){const t=e,{t:i}=Ct(),{addNotification:n}=ar(),s=Nu(),r=Ps("feature"),l={circle:hB,square:_B,cross:mB,triangle:fB},u=Ye("Configurables"),d=Ye(void 0),h=Ye([]);Rt(u,async C=>{if(C==="Mes symboles"||C==="Publics")try{h.value=await g(C==="Mes symboles")}catch{h.value=[]}}),fn(()=>{r.featureStyle.symbolId&&(u.value=r.featureStyle.symboltype==="us"?"Mes symboles":"Publics")});async function g(C=!1,I=!1){const A=C?await ECe(I):await TCe(I);return A.sort((E,L)=>E.name.localeCompare(L.name)),A}async function y(){if(d.value?.files&&d.value.files[0]){const C=d.value.files[0];try{await MCe(C),h.value=await g(!0,!0)}catch{n(i("Error while trying to upload new symbol."),fi.ERROR)}}}function x(C){t("changeSymbolShape",C)}return(C,I)=>(U(),se(Tt,null,[Dt(K(R(i)("Veuillez choisir un symbole dans une des catgories"))+" ",1),P("div",OCe,[(U(),se(Tt,null,gi(pB,(A,E)=>(U(),se(Tt,{key:E},[E==="mySymbols"&&!R(s).isAuthenticated()?Ge("",!0):(U(),se("button",{key:0,"data-cy":`featStyleSymbolTab${E==="mySymbols"?"_private":""}`,onClick:()=>u.value=A,class:Fa(["lux-tab",{active:u.value===A}])},K(R(i)(A)),11,FCe))],64))),64))]),u.value==="Configurables"?(U(),se(Tt,{key:0},[P("div",NCe,[(U(!0),se(Tt,null,gi(Object.keys(l),A=>(U(),se("button",{key:A,class:"lux-btn p-2 rounded-sm border-gray-600",onClick:E=>x(A),"data-cy":`featStyleSymbol_${A}`},[(U(),Lt(rb(l[A]),{fillColor:R(r).featureStyle.color},null,8,["fillColor"]))],8,BCe))),128))]),ja(C.$slots,"symbolcolor")],64)):Ge("",!0),u.value==="Publics"||u.value==="Mes symboles"?(U(),Lt(WCe,{key:1,symbols:h.value,class:"max-h-80 overflow-y-auto",onChange:I[0]||(I[0]=A=>C.$emit("changeSymbolIcon",`${A}`,u.value==="Mes symboles"?"us":"public"))},null,8,["symbols"])):Ge("",!0),P("div",DCe,[u.value==="Mes symboles"?(U(),se(Tt,{key:0},[P("input",{accept:"image/*",ref_key:"fileInput",ref:d,type:"file",id:"file",hidden:"",onChange:y},null,544),P("button",{class:"lux-btn mr-2",onClick:I[1]||(I[1]=()=>d.value?.click())},K(R(i)("Importer un symbole")),1)],64)):Ge("",!0),P("button",{class:"lux-btn",onClick:I[2]||(I[2]=()=>C.$emit("close")),"data-cy":"featClosePopup"},K(R(i)("Fermer")),1)])],64))}}),ZCe={class:"flex gap-1 items-center"},zCe={class:"font-bold block",for:"color"},UCe={class:"md:w-2/3"},HCe=["value"],XCe={class:"flex gap-1 items-center mt-1"},qCe={class:"font-bold block",for:"size"},YCe={key:0,class:"flex gap-1 items-center mt-1 mb-2"},KCe={class:"font-bold block",for:"angle"},jCe={class:"flex gap-1 items-center mt-1 mb-2","data-cy":"featStyleLineStyle"},$Ce={class:"font-bold block"},JCe={class:"flex gap-1"},QCe={class:"flex gap-1 items-center"},eIe={class:"font-bold block",for:"color"},tIe={class:"md:w-2/3"},aIe=["value"],iIe={class:"flex gap-1 items-center mt-1"},nIe={class:"font-bold block",for:"stroke"},rIe={class:"flex gap-1 items-center mt-1"},sIe={class:"font-bold block",for:"transparency"},oIe={class:"flex gap-2 items-center mt-1 mb-2"},lIe={class:"font-bold block",for:"showOrientation"},uIe=["checked"],cIe={class:"flex gap-1 items-center mt-1 mb-2"},o6=rt({__name:"feature-edit-style",emits:["cancel","validate"],setup(a){const{t:e}=Ct(),t=Ps("feature"),i=St(()=>!(t.featureType==="drawnPoint"&&t.featureStyle.shape==="circle")),n={FeatureEditStyleCircle:lCe,FeatureEditStyleLine:cCe,FeatureEditStylePoint:uCe,FeatureEditStylePolygon:dCe,FeatureEditStyleLabel:hCe},s=["plain","dashed","dotted"],r=St(()=>t?.featureType.replace("drawn","FeatureEditStyle"));function l(E){t.featureStyle={...t.featureStyle,color:E.target.value}}function u(E){t.featureStyle={...t.featureStyle,size:E}}function d(E){t.featureStyle={...t.featureStyle,angle:E*Math.PI/180}}function h(E){t.featureStyle={...t.featureStyle,stroke:E}}function g(E){t.featureStyle={...t.featureStyle,opacity:(100-E)/100}}function y(E){t.featureStyle={...t.featureStyle,showOrientation:E.target.checked}}function x(){JO(t)}function C(E){t.featureStyle={...t.featureStyle,linestyle:E}}function I(E,L){t.featureStyle={...t.featureStyle,shape:E,symbolId:void 0,symboltype:void 0},L&&L()}function A(E,L,G){t.featureStyle={...t.featureStyle,symbolId:E,symboltype:L,size:100,shape:void 0},G&&G()}return(E,L)=>(U(),Lt(rb(n[r.value]),{feature:R(t)},{title:Ht(()=>[Dt(K(R(e)("Style your drawing")),1)]),color:Ht(()=>[P("div",ZCe,[P("label",zCe,K(R(e)("Color")),1),P("div",UCe,[P("input",{name:"color",class:"cursor-pointer",type:"color",value:R(t).featureStyle.color,onInput:l,"data-cy":"featStyleColor"},null,40,HCe)])])]),size:Ht(G=>[P("div",XCe,[P("label",qCe,K(R(e)("Size")),1),gt(K2,{name:"size",class:"md:w-2/3",max:G.maxsize,value:R(t).featureStyle.size,"data-cy":"featStyleSize",onChange:u},null,8,["max","value"])])]),angle:Ht(()=>[i.value?(U(),se("div",YCe,[P("label",KCe,K(R(e)("Angle")),1),gt(K2,{name:"angle",class:"md:w-2/3",min:-180,max:180,value:(Math.round(R(t).featureStyle.angle*180/Math.PI)+180)%360-180,onChange:d,"data-cy":"featStyleAngle"},null,8,["value"])])):Ge("",!0)]),style:Ht(()=>[P("div",jCe,[P("label",$Ce,K(R(e)("Style")),1),P("div",JCe,[(U(),se(Tt,null,gi(s,(G,F)=>gt(_Ce,{key:F,linestyle:G,onChangeLinestyle:C},null,8,["linestyle"])),64))])])]),styleSymbol:Ht(({openEditIcon:G})=>[gt(ICe,{"data-cy":"featStyleSymbol",onClickSymbolIcon:G},null,8,["onClickSymbolIcon"])]),symbolIcon:Ht(({closeEditIcon:G})=>[gt(VCe,{onChangeSymbolIcon:(F,B)=>A(F,B,G),onChangeSymbolShape:F=>I(F,G),onClose:G},{symbolcolor:Ht(()=>[P("div",QCe,[P("label",eIe,K(R(e)("Color")),1),P("div",tIe,[P("input",{name:"color",class:"cursor-pointer",type:"color",value:R(t).featureStyle.color,onInput:l,"data-cy":"featStyleColor"},null,40,aIe)])])]),_:1},8,["onChangeSymbolIcon","onChangeSymbolShape","onClose"])]),lineWidth:Ht(()=>[P("div",iIe,[P("label",nIe,K(R(e)("Stroke width")),1),gt(K2,{name:"stroke","data-cy":"featStyleLineWidth",value:R(t).featureStyle.stroke,onChange:h},null,8,["value"])])]),transparency:Ht(()=>[P("div",rIe,[P("label",sIe,K(R(e)("Transparence")),1),gt(K2,{name:"transparency",class:"md:w-2/3","data-cy":"featStyleTransparency",max:100,value:100-R(t).featureStyle.opacity*100,onChange:g},null,8,["value"])])]),orientation:Ht(()=>[P("div",oIe,[P("label",lIe,K(R(e)("Show orientation")),1),P("input",{type:"checkbox",id:"showOrientation",onChange:y,checked:R(t).featureStyle.showOrientation},null,40,uIe)]),P("div",cIe,[P("button",{class:"lux-btn-primary",onClick:x},K(R(e)("Changer sens de la ligne")),1)])]),footer:Ht(()=>[ja(E.$slots,"footer")]),_:3},8,["feature"]))}}),dIe={class:"flex gap-2 items-center"},hIe={class:"flex items-center"},_Ie={class:"mt-3 text-right"},l6=rt({__name:"feature-concentric-circle",emits:["cancel","validate"],setup(a,{emit:e}){const t=e,{t:i}=Ct(),n=qa().getOlMap(),s=Ps("feature"),r=Ye(parseFloat(q1(s.getGeometry(),n.getView().getProjection()).toFixed(2)));return(l,u)=>(U(),se(Tt,null,[Dt(K(R(i)("Veuillez entrer les caractristiques de votre nouveau cercle"))+" ",1),P("div",dIe,[P("span",null,K(R(i)("Rayon:")),1),P("div",hIe,[Sa(P("input",{class:"form-control block bg-secondary border !border-gray-300 mr-1",type:"number","onUpdate:modelValue":u[0]||(u[0]=d=>r.value=d)},null,512),[[Vn,r.value,void 0,{number:!0}]]),P("span",null,K(R(i)("mtres")),1)])]),P("div",_Ie,[P("button",{"data-cy":"featureEditCancel",class:"lux-btn mr-2",onClick:u[1]||(u[1]=d=>t("cancel"))},K(R(i)("Cancel")),1),P("button",{"data-cy":"featureEditValidate",class:"lux-btn-primary",onClick:u[2]||(u[2]=d=>t("validate",{radius:r.value,baseFeature:R(s)}))},K(R(i)("Validate")),1)])],64))}}),mIe={class:"lux-drawing-item-measurements"},fIe={key:0,"data-cy":"featItemLength"},gIe={key:1,"data-cy":"featItemArea"},pIe={key:2,"data-cy":"featItemRadius",class:"flex items-center"},yIe={key:0},bIe={key:1,class:"flex"},vIe={key:3},xIe={"data-cy":"featItemElevation"},wIe=rt({__name:"feature-measurements",props:{isEditingFeature:{type:Boolean}},setup(a){const{t:e}=Ct(),t=$n(),i=qa().getOlMap(),n=i.getView().getProjection(),s=Ye(Ps("feature")),r=Ye(s.value?.featureType||""),l=Ye(s.value?.getGeometry()),u=St(()=>{if(l.value){if(["drawnLine","drawnPolygon"].includes(r.value))return Bm(l.value,n);if(r.value==="drawnCircle")return ule(l.value,n)}}),d=St(()=>{if(l.value){if(r.value==="drawnPolygon")return T3(l.value);if(r.value==="drawnCircle")return cle(l.value,n)}}),h=St(()=>l.value&&r.value==="drawnCircle"?q1(l.value,n):void 0),g=Ye(h.value||0),y=Ye();Ar(async()=>{const C=l.value.getCoordinates();l.value&&r.value==="drawnPoint"?y.value?y.value=await QO(C):y.value=await Y1(C):y.value=void 0}),Ar(()=>{g.value=r.value==="drawnCircle"?parseFloat(q1(l.value,n).toFixed(2)):0});function x(C){if(s.value){const I=s.value.getGeometry();I?.getType()==="Circle"&&(eE(I,C,i),t.updateDrawnFeature(s.value))}}return(C,I)=>{const A=El("format-measure");return U(),se("div",mIe,[u.value?(U(),se("div",fIe,[P("span",null,K(R(e)("Length:"))+"",1),Sa(P("span",null,null,512),[[A,u.value,void 0,{length:!0}]])])):Ge("",!0),d.value?(U(),se("div",gIe,[P("span",null,K(R(e)("Area:"))+"",1),Sa(P("span",null,null,512),[[A,d.value,void 0,{area:!0}]])])):Ge("",!0),r.value==="drawnCircle"?(U(),se("div",pIe,[P("span",null,K(R(e)("Rayon:"))+"",1),a.isEditingFeature?(U(),se("div",bIe,[Sa(P("input",{"data-cy":"featItemInputRadius",class:"form-control block bg-secondary border !border-gray-300",type:"number","onUpdate:modelValue":I[0]||(I[0]=E=>g.value=E),onKeyup:I[1]||(I[1]=$r(E=>x(g.value),["enter"]))},null,544),[[Vn,g.value,void 0,{number:!0}]]),P("button",{class:"lux-btn-primary",onClick:I[2]||(I[2]=E=>x(g.value))},K(R(e)("Valider")),1)])):Sa((U(),se("span",yIe,null,512)),[[A,h.value,void 0,{length:!0}]])])):Ge("",!0),r.value==="drawnPoint"?(U(),se("div",vIe,[P("span",null,K(R(e)("Elevation"))+":",1),Sa(P("span",xIe,null,512),[[A,y.value,"2",{elevation:!0}]])])):Ge("",!0),r.value==="drawnLine"?(U(),Lt(TE,{key:4,class:"mb-2",feature:s.value},null,8,["feature"])):Ge("",!0)])}}}),CIe={key:1},IIe={class:"flex justify-between items-center mt-1 gap-2"},SIe={"data-cy":"featItemActions"},AIe={class:"flex text-primary items-center gap-1"},TIe={class:"mt-3 text-right"},EIe=rt({__name:"feature-sub-content",props:{isDocked:{type:Boolean},isEditingFeature:{type:Boolean}},emits:["continueLine","toggleEditFeature","toggleDock","clickDelete","resetInfo","resetStyle","submitEditFeature","submitNewConcentricCircle"],setup(a,{emit:e}){const t=e,{t:i}=Ct(),n=A_(),s=Ps("feature"),r=St(()=>s.map_id?!!n.isMyMapEditable.value:!0);let l=s.label,u=s.description,d={...s.featureStyle};const h={FeatureConcentricCircle:l6,FeatureEditInfo:s6,FeatureEditStyle:o6,FeatureConfirmDelete:r6},g=Ye(void 0);CC("currentEditCompKey",g);function y(){g.value==="FeatureEditStyle"?(s.selected=!0,t("resetStyle",d)):g.value==="FeatureEditInfo"&&t("resetInfo",l,u),g.value=void 0}function x(C){const I=h[g.value];switch(l=s.label,u=s.description,d={...s.featureStyle},I){case l6:t("submitNewConcentricCircle",C);break;case r6:t("clickDelete");break;case s6:case o6:s.selected=!0,t("submitEditFeature");break;default:alert("Not implemented")}g.value=void 0}return(C,I)=>g.value?(U(),Lt(rb(h[g.value]),{key:1,onCancel:y,onValidate:x},{footer:Ht(()=>[P("div",TIe,[P("button",{"data-cy":"featureEditCancel",class:"lux-btn mr-2",onClick:y},K(R(i)("Cancel")),1),P("button",{"data-cy":"featureEditValidate",class:"lux-btn-primary",onClick:x},K(R(i)("Validate")),1)])]),_:1},32)):(U(),se(Tt,{key:0},[a.isDocked?Ge("",!0):(U(),se("i",{key:0,"data-cy":"featItemDock",class:"fa fa-object-ungroup float-right",role:"button",onClick:I[0]||(I[0]=()=>t("toggleDock"))})),a.isDocked?(U(),se("h6",CIe,K(R(s)?.label),1)):Ge("",!0),I[12]||(I[12]=P("div",{class:"min-h-2"},null,-1)),gt(wIe,{isEditingFeature:a.isEditingFeature},null,8,["isEditingFeature"]),P("div",IIe,[P("div",null,[r.value?(U(),se("button",{key:0,"data-cy":"featItemToggleEdit",class:"lux-btn-primary",onClick:I[1]||(I[1]=A=>t("toggleEditFeature"))},K(a.isEditingFeature?R(i)("Terminer dition"):R(i)("Editer l'objet")),1)):Ge("",!0)]),P("div",SIe,[P("div",AIe,[P("button",{"data-cy":"featItemActionSearch",class:"hover:text-tertiary",onClick:I[2]||(I[2]=()=>R(s)?.fit())},[...I[8]||(I[8]=[P("i",{class:"fa fa-search"},null,-1)])]),r.value?(U(),se("button",{key:0,"data-cy":"featItemActionEdit",class:"hover:text-tertiary",onClick:I[3]||(I[3]=()=>g.value="FeatureEditInfo")},[...I[9]||(I[9]=[P("i",{class:"fa fa-pencil"},null,-1)])])):Ge("",!0),r.value?(U(),se("button",{key:1,"data-cy":"featItemActionStyle",class:"hover:text-tertiary",onClick:I[4]||(I[4]=()=>g.value="FeatureEditStyle")},[...I[10]||(I[10]=[P("i",{class:"fa fa-paint-brush"},null,-1)])])):Ge("",!0),r.value?(U(),se("button",{key:2,"data-cy":"featItemActionDelete",class:"hover:text-tertiary",onClick:I[5]||(I[5]=()=>g.value="FeatureConfirmDelete")},[...I[11]||(I[11]=[P("i",{class:"fa fa-trash"},null,-1)])])):Ge("",!0),gt(nCe,{onContinueLine:I[6]||(I[6]=A=>t("continueLine")),onNewConcentricCircle:I[7]||(I[7]=()=>g.value="FeatureConcentricCircle")})])])])],64))}}),MIe=rt({__name:"map-popup",props:{anchor:{}},emits:["closePopup"],setup(a,{emit:e}){const t=a,i=e,n=qa(),s=Ye(null),r=Ai(new Nm({autoPan:{animation:{duration:250}}}));return fn(()=>{s.value&&(r.value.setElement(s.value),n.getOlMap().addOverlay(r.value))}),Ar(()=>{r.value.setPosition(t.anchor)}),(l,u)=>(U(),Lt(vC,{to:"body"},[P("div",{ref_key:"popupContainer",ref:s,"data-cy":"mapPopup",class:"popup"},[P("button",{class:"fa-sharp fa-solid fa-close float-right mt-2 hover:text-primary",onClick:u[0]||(u[0]=()=>i("closePopup"))}),ja(l.$slots,"default")],512)]))}});function u6(a){const e=a.getGeometry();let t;if(e)switch(e.getType()){case"Point":t=e.getFlatCoordinates();break;case"LineString":t=e.getFlatMidpoint();break;case"Polygon":t=e.getFlatInteriorPoint();break;case"Circle":t=e.getCenter();break;case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":default:console.warn(`getFeatCoordinates: Geometry type ${e.getType()} not supported, please convert to a supported geometry type before calling this function.`);break}return t}const LIe=rt({__name:"feature-sub-wrapper",props:{isDocked:{type:Boolean}},emits:["closePopup"],setup(a,{emit:e}){const t=e,i=Ps("feature"),n=Ye(l());function s(){t("closePopup")}const r=up(()=>{n.value=l()},1e3);function l(){return JSON.parse(JSON.stringify(u6(i)))}return Ar(()=>{i?.getGeometry()&&u6(i)&&r()}),(u,d)=>a.isDocked?(U(),Lt(MIe,{key:0,anchor:n.value,onClosePopup:s},{default:Ht(()=>[ja(u.$slots,"default")]),_:3},8,["anchor"])):ja(u.$slots,"default",{key:1})}}),RIe=["aria-expanded","aria-controls"],kIe=["id"],PIe=rt({__name:"feature-item",props:{isDocked:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},feature:{}},emits:["clickDelete","closePopup","continueLine","toggleFeatureSub","toggleEditFeature","toggleDock","submitFeature","submitNewConcentricCircle"],setup(a,{emit:e}){const t=a,i=t.feature,n=e;CC("feature",i);function s(){n("toggleFeatureSub",i.id,!t.isOpen)}function r(){n("toggleEditFeature",i.id,!t.isEditing)}function l(){n("clickDelete",i.id)}function u(y,x){i.label=y,i.description=x}function d(y){i.featureStyle={...y}}function h(){n("submitFeature",i)}function g(y,x){n("submitNewConcentricCircle",y,x)}return(y,x)=>(U(),se(Tt,null,[P("button",{"data-cy":"featItemName",class:"lux-drawing-item-label flex items-center gap-1","aria-expanded":a.isOpen,"aria-controls":`drawing-item-content-${R(i).id}`,onClick:s},[x[3]||(x[3]=P("span",{class:"sortable-handle drag-handle fa fa-reorder ui-sortable-handle cursor-move"},null,-1)),P("span",{class:Fa(["lux-icon",{point:R(i).featureType==="drawnPoint"||R(i).featureType==="drawnLabel",line:R(i).featureType==="drawnLine",polygon:R(i).featureType==="drawnPolygon"||R(i).featureType==="drawnCircle"}])},null,2),P("span",{class:Fa({selected:a.isOpen})},K(R(i).label),3)],8,RIe),a.isOpen?(U(),Lt(LIe,{key:0,isDocked:a.isDocked,onClosePopup:x[2]||(x[2]=()=>n("toggleDock"))},{default:Ht(()=>[P("div",{class:"lux-drawing-item-content",id:`drawing-item-content-${R(i).id}`},[gt(EIe,{isDocked:a.isDocked,isEditingFeature:a.isEditing,onToggleEditFeature:r,onToggleDock:x[0]||(x[0]=()=>n("toggleDock")),onClickDelete:l,onContinueLine:x[1]||(x[1]=()=>n("continueLine")),onResetInfo:u,onResetStyle:d,onSubmitEditFeature:h,onSubmitNewConcentricCircle:g},null,8,["isDocked","isEditingFeature"])],8,kIe)]),_:1},8,["isDocked"])):Ge("",!0)],64))}}),GIe=["aria-activedescendant"],WIe=["id","tabindex","aria-selected","onFocus"],yB=rt({__name:"features-list",props:{features:{},idPrefix:{}},setup(a){const e=$n(),t=hle(),{activeFeatureId:i,editingFeatureId:n,editStateActive:s,featureEditionDocked:r,drawnFeatures:l}=xt(e),u=Ye(),d=b1("sortableFeatures");let h;function g(L){u.value=L}function y(L){if(L.key==="Tab"||!["ArrowDown","ArrowUp"," "].includes(L.key))return;if(L.preventDefault(),L.stopImmediatePropagation(),L.key===" "){u.value&&(i.value=i.value===u.value?void 0:u.value);return}const G=a.features.findIndex(B=>B.id===u.value),F=G===-1?0:G;if(L.key==="ArrowDown"){const B=(F+1)%a.features.length;u.value=a.features[B].id}else{const B=(F-1+a.features.length)%a.features.length;u.value=a.features[B].id}so(()=>document.getElementById(`${a.idPrefix}-${u.value}`)?.focus())}function x(L){L.fit(),t.continueLine(L)}function C(L,G){i.value=G?L:void 0,n.value=void 0,u.value=G?L:void 0,G&&so(()=>{document.getElementById(`${a.idPrefix}-${L}`)?.focus()})}function I(L,G){if(G){if(n.value===L)return;i.value=L,u.value=L;const F=l.value.find(B=>B.id===L);if(F){if(!F.editable)return;n.value=L,s.value=F.featureType.replace("drawn","edit").replace("Continue","")}}else{if(n.value===void 0)return;const F=l.value.find(B=>B.id===L);F&&F.changed(),n.value=void 0,s.value=void 0}}function A(L){const{baseFeature:G,radius:F}=L,B=t.createConcentricCircle(G,F);e.addDrawnFeatureToCollection(B),e.selectDrawnFeature(B)}function E(L){const G=[...L].map(F=>F.id);e.reorderFeatures(G)}return Rt(d,L=>{L?h=s5(L,{onSort:E}):(h?.destroy(),h=void 0)}),(L,G)=>a.features.length?(U(),se("ul",{key:0,class:"mx-1 sortable-features",ref_key:"sortableFeatures",ref:d,role:"listbox","aria-label":"Liste des objets dessins","aria-activedescendant":u.value?`${a.idPrefix}-${u.value}`:void 0,onKeydown:y},[(U(!0),se(Tt,null,gi(a.features,F=>(U(),se("li",{class:"lux-drawing-item",id:`${a.idPrefix}-${F.id}`,key:F.id,role:"option",tabindex:R(i)===F.id?0:-1,"aria-selected":R(i)===F.id,onFocus:()=>g(F.id)},[gt(PIe,{isDocked:R(r),isEditing:R(n)===F.id,isOpen:R(i)===F.id,feature:F,onToggleFeatureSub:C,onToggleEditFeature:I,onToggleDock:G[0]||(G[0]=()=>r.value=!R(r)),onClosePopup:G[1]||(G[1]=()=>r.value=!1),onClickDelete:G[2]||(G[2]=B=>R(e).removeFeature(B)),onContinueLine:()=>x(F),onSubmitFeature:B=>R(e).updateDrawnFeature(B),onSubmitNewConcentricCircle:A},null,8,["isDocked","isEditing","isOpen","feature","onContinueLine","onSubmitFeature"])],40,WIe))),128))],40,GIe)):Ge("",!0)}}),OIe=rt({__name:"draw-panel-features",setup(a){const e=$n(),{drawnFeaturesExceptMyMaps:t}=xt(e);return(i,n)=>(U(),Lt(yB,{features:R(t),idPrefix:"draw"},null,8,["features"]))}}),FIe={class:"text-lg"},NIe={class:"flex flex-row justify-end gap-2"},BIe=rt({__name:"modal-confirm-delete-all",emits:["cancel","confirm"],setup(a,{emit:e}){const t=e,{t:i}=Ct();return(n,s)=>(U(),Lt(E_,{title:R(i)("Confirmation de suppression des dessins"),onClose:s[2]||(s[2]=r=>t("cancel"))},{content:Ht(()=>[P("p",FIe,K(R(i)("Etes-vous certain de vouloir effacer tous les dessins ?")),1)]),footer:Ht(()=>[P("div",NIe,[P("button",{class:"lux-btn","data-dismiss":"modal",onClick:s[0]||(s[0]=r=>t("cancel"))},K(R(i)("Annuler")),1),P("button",{class:"lux-btn","data-dismiss":"modal",onClick:s[1]||(s[1]=r=>t("confirm"))},K(R(i)("Effacer")),1)])]),_:1},8,["title"]))}}),DIe={class:"flex flex-col gap-4"},VIe={class:"flex flex-col"},ZIe={for:"mergedLineName",class:"lux-label"},zIe={class:"flex flex-col"},UIe={for:"mergedLineDescription",class:"lux-label"},HIe={class:"list-unstyled ml-2"},XIe=["id","value"],qIe=["for"],YIe={class:"flex flex-row justify-end gap-2"},KIe=["disabled"],jIe=rt({__name:"modal-merge-lines",setup(a){const{addNotification:e}=ar(),{t}=Ct(),i=$n(),{showModalMergeLines:n}=xt(i),s=Ye(t("Nouvelle ligne")),r=Ye(""),l=Ye([]);Rt(n,d=>{d&&i.getDrawnFeaturesOfTypes(["LineString","MultiLineString"]).length<=1&&(e(t("Il faut au moins 2 lignes disponibles pour pouvoir les fusionner."),fi.WARNING),i.toggleDrawMergeLinesModal(!1))});function u(){const d=i.getDrawnFeaturesWithIds(l.value),h=dle(d);h&&(h.label=s.value,h.description=r.value),i.toggleDrawMergeLinesModal(!1)}return(d,h)=>R(n)?(U(),Lt(E_,{key:0,title:R(t)("Fusionner des lignes"),onClose:h[4]||(h[4]=g=>R(i).toggleDrawMergeLinesModal(!1))},{content:Ht(()=>[P("form",DIe,[P("div",VIe,[P("label",ZIe,K(R(t)("Nouveau nom")),1),Sa(P("input",{id:"mergedLineName",class:"lux-input",type:"text","onUpdate:modelValue":h[0]||(h[0]=g=>s.value=g)},null,512),[[Vn,s.value]])]),P("div",zIe,[P("label",UIe,K(R(t)("Nouvelle description")),1),Sa(P("textarea",{id:"mergedLineDescription",class:"lux-input",rows:"3","onUpdate:modelValue":h[1]||(h[1]=g=>r.value=g)},null,512),[[Vn,r.value]])]),P("ul",HIe,[(U(!0),se(Tt,null,gi(R(i).getDrawnFeaturesOfTypes(["LineString","MultiLineString"]),g=>(U(),se("li",{key:g.id},[Sa(P("input",{id:`featureLine-${g.id}`,type:"checkbox",class:"hidden",value:g.id,"onUpdate:modelValue":h[2]||(h[2]=y=>l.value=y)},null,8,XIe),[[Xd,l.value]]),P("label",{for:`featureLine-${g.id}`},[P("i",{class:Fa(["fa fa-solid mr-2",`${l.value.find(y=>y===g.id)?"fa-check-square":"fa-square"}`])},null,2),Dt(" "+K(g.label),1)],8,qIe)]))),128))])])]),footer:Ht(()=>[P("div",YIe,[P("button",{class:"lux-btn","data-dismiss":"modal",onClick:h[3]||(h[3]=g=>R(i).toggleDrawMergeLinesModal(!1))},K(R(t)("Annuler")),1),P("button",{class:"lux-btn","data-dismiss":"modal",onClick:u,disabled:l.value.length<2},K(R(t)("Fusionner")),9,KIe)])]),_:1},8,["title"])):Ge("",!0)}}),$Ie={class:"lux-draw-panel absolute w-[93%]","data-cy":"drawPanel"},JIe={class:"lux-draw-panel-title flex"},QIe={class:"grow"},eSe=rt({__name:"draw-panel",emits:["moveInMyMap","createNewMyMap"],setup(a,{emit:e}){const t=e,{t:i}=Ct(),n=ri(),s=iCe(),{toggleMyMapsOpen:r}=n,{feedbackOpen:l,feedbackanfOpen:u,feedbackageOpen:d,feedbackcruesOpen:h}=xt(n),g=$n(),{drawnFeaturesExceptMyMaps:y,clipLineActive:x}=xt(g),C=A_(),I=St(()=>{const L=[{label:"Effacer tous les dessins",action:()=>A.value=!0},{label:"Crer une nouvelle carte  partir de ces dessins",action:()=>t("createNewMyMap")},{label:"Fusionner des lignes",action:()=>g.toggleDrawMergeLinesModal(!0)},{label:x.value?"Dsactiver mode couper une ligne":"Couper une ligne",action:()=>{s.toggle(),g.deactivateDraw()}}];return C.isMyMapEditable.value&&L.unshift({label:"Copier dans ma carte",action:()=>t("moveInMyMap")}),L}),A=Ye(!1);function E(){g.removeAllFeatures()}return Rt(y,()=>{PE("md")&&l.value!==!0&&u.value!==!0&&d.value!==!0&&h.value!==!0&&r(!0)}),(L,G)=>(U(),se(Tt,null,[R(y).length>0?(U(),se(Tt,{key:0},[G[3]||(G[3]=P("hr",{class:"separator my-5"},null,-1)),P("div",$Ie,[P("div",JIe,[P("h5",QIe,K(R(i)("Dessins")),1),gt(OE,{"data-cy":"drawPanelMenuPopup",items:I.value,direction:"down",ariaLabel:R(i)("Drawings menu")},{item:Ht(({item:F})=>[gt(FE,{"data-cy":"drawPanelMenuPopupItem",item:F,onClick:F.action},{default:Ht(()=>[Dt(K(R(i)(F.label)),1)]),_:2},1032,["item","onClick"])]),default:Ht(()=>[G[2]||(G[2]=P("i",{class:"fa-solid fa-square-caret-down hover:text-tertiary"},null,-1))]),_:1},8,["items","ariaLabel"])]),gt(OIe)]),A.value?(U(),Lt(BIe,{key:0,onCancel:G[0]||(G[0]=()=>A.value=!1),onConfirm:G[1]||(G[1]=()=>{A.value=!1,E()})})):Ge("",!0)],64)):Ge("",!0),gt(jIe)],64))}}),tSe=ir(eSe,[["__scopeId","data-v-35e42ace"]]);var vu=(a=>(a.COPY="copy",a.CREATE="create",a.CREATE_FROM_FEATURES="create_from_features",a.EDIT="edit",a))(vu||{});const aSe={class:"flex flex-col gap-4"},iSe={class:"flex flex-col"},nSe={for:"map-title-input"},rSe={class:"ml-2 hover:cursor-pointer",for:"mapIsPublic"},sSe={for:"category-select",class:"sr-only"},oSe={class:"flex flex-col"},lSe={for:"map-description-input"},uSe={class:"flex flex-row justify-end gap-2"},cSe=rt({__name:"my-map-edit-form",props:{map:{},mode:{}},emits:["cancel","confirm"],setup(a,{emit:e}){const t=e,i=a,{t:n}=Ct(),{addNotification:s}=ar(),r=A_(),l=ri(),{myMapId:u}=xt(l),d=Vi(),{bgLayer:h}=xt(d),g=Bn(),{theme:y}=xt(g),x=i.map&&i.mode===vu.COPY,C=Ye(i.map?i.map.public:!1),I=Ye(i.map?i.map.title:n("Map without Title")),A=Ye(i.map?i.map.description:""),E=Ye(i.map?i.map.category_id+"":void 0),L=Ai([]),G=St(()=>L.value.map(B=>({label:B.name,value:""+B.id})));async function F(){const B=E.value?parseInt(E.value,10):999;let Z;try{i.map&&i.mode===vu.COPY?Z=await Ooe(i.map.uuid,I.value,A.value,B,C.value):i.map&&i.mode===vu.EDIT?Z=await Woe(i.map.uuid,I.value,A.value,B,C.value):(Z=await Goe(I.value,A.value,B,C.value),await zO(Z.uuid,h.value?.name||"",1,"","","","",y.value?.name||""),Z?.success&&i.mode===vu.CREATE_FROM_FEATURES&&(u.value=Z.uuid,so(()=>{r.addInMyMap()}))),Z?.success?t("confirm",Z.uuid):t("cancel")}catch(Y){s(Y,fi.ERROR)}}return m7(async()=>{L.value=await Poe()}),(B,Z)=>(U(),Lt(E_,{title:R(x)?R(n)("Modify title and description of the map"):R(n)("Title and description of the map"),onClose:Z[6]||(Z[6]=Y=>t("cancel"))},{content:Ht(()=>[P("form",aSe,[P("div",iSe,[P("label",nSe,K(R(n)("Titre de la carte")),1),Sa(P("input",{id:"map-title-input",class:"lux-input",type:"text","onUpdate:modelValue":Z[0]||(Z[0]=Y=>I.value=Y),required:"","aria-required":!0},null,512),[[Vn,I.value]])]),P("div",null,[Sa(P("input",{id:"mapIsPublic","onUpdate:modelValue":Z[1]||(Z[1]=Y=>C.value=Y),type:"checkbox"},null,512),[[Xd,C.value]]),P("label",rSe,K(R(n)("Public Map")),1)]),P("div",null,[P("label",sSe,K(R(n)("Please select a Category")),1),gt(Qm,{id:"category-select",class:"min-w-36",placeholder:R(n)("Please select a Category"),options:G.value,modelValue:E.value,"onUpdate:modelValue":Z[2]||(Z[2]=Y=>E.value=Y),onChange:Z[3]||(Z[3]=Y=>E.value=Y),"aria-label":R(n)("Please select a Category")},null,8,["placeholder","options","modelValue","aria-label"])]),P("div",oSe,[P("label",lSe,K(R(n)("Description")),1),Sa(P("textarea",{id:"map-description-input",class:"lux-input",rows:"3","onUpdate:modelValue":Z[4]||(Z[4]=Y=>A.value=Y)},null,512),[[Vn,A.value]])])])]),footer:Ht(()=>[P("div",uSe,[P("button",{class:"lux-btn","data-dismiss":"modal",onClick:Z[5]||(Z[5]=Y=>t("cancel"))},K(R(n)("Annuler")),1),P("button",{class:"lux-btn-primary","data-dismiss":"modal",onClick:F},K(a.map&&!R(x)?R(n)("Save changes"):R(n)("Save new map")),1)])]),_:1},8,["title"]))}});function j2(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sA={exports:{}};var c6;function dSe(){return c6||(c6=1,(function(a,e){(function(t){a.exports=t()})(function(){return(function t(i,n,s){function r(d,h){if(!n[d]){if(!i[d]){var g=typeof j2=="function"&&j2;if(!h&&g)return g(d,!0);if(l)return l(d,!0);var y=new Error("Cannot find module '"+d+"'");throw y.code="MODULE_NOT_FOUND",y}var x=n[d]={exports:{}};i[d][0].call(x.exports,function(C){var I=i[d][1][C];return r(I||C)},x,x.exports,t,i,n,s)}return n[d].exports}for(var l=typeof j2=="function"&&j2,u=0;u<s.length;u++)r(s[u]);return r})({1:[function(t,i,n){var s=t("./utils"),r=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(u){for(var d,h,g,y,x,C,I,A=[],E=0,L=u.length,G=L,F=s.getTypeOf(u)!=="string";E<u.length;)G=L-E,g=F?(d=u[E++],h=E<L?u[E++]:0,E<L?u[E++]:0):(d=u.charCodeAt(E++),h=E<L?u.charCodeAt(E++):0,E<L?u.charCodeAt(E++):0),y=d>>2,x=(3&d)<<4|h>>4,C=1<G?(15&h)<<2|g>>6:64,I=2<G?63&g:64,A.push(l.charAt(y)+l.charAt(x)+l.charAt(C)+l.charAt(I));return A.join("")},n.decode=function(u){var d,h,g,y,x,C,I=0,A=0,E="data:";if(u.substr(0,E.length)===E)throw new Error("Invalid base64 input, it looks like a data url.");var L,G=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&G--,u.charAt(u.length-2)===l.charAt(64)&&G--,G%1!=0)throw new Error("Invalid base64 input, bad content length.");for(L=r.uint8array?new Uint8Array(0|G):new Array(0|G);I<u.length;)d=l.indexOf(u.charAt(I++))<<2|(y=l.indexOf(u.charAt(I++)))>>4,h=(15&y)<<4|(x=l.indexOf(u.charAt(I++)))>>2,g=(3&x)<<6|(C=l.indexOf(u.charAt(I++))),L[A++]=d,x!==64&&(L[A++]=h),C!==64&&(L[A++]=g);return L}},{"./support":30,"./utils":32}],2:[function(t,i,n){var s=t("./external"),r=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function d(h,g,y,x,C){this.compressedSize=h,this.uncompressedSize=g,this.crc32=y,this.compression=x,this.compressedContent=C}d.prototype={getContentWorker:function(){var h=new r(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),g=this;return h.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new r(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(h,g,y){return h.pipe(new l).pipe(new u("uncompressedSize")).pipe(g.compressWorker(y)).pipe(new u("compressedSize")).withStreamInfo("compression",g)},i.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,n){var s=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,n){var s=t("./utils"),r=(function(){for(var l,u=[],d=0;d<256;d++){l=d;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;u[d]=l}return u})();i.exports=function(l,u){return l!==void 0&&l.length?s.getTypeOf(l)!=="string"?(function(d,h,g,y){var x=r,C=y+g;d^=-1;for(var I=y;I<C;I++)d=d>>>8^x[255&(d^h[I])];return-1^d})(0|u,l,l.length,0):(function(d,h,g,y){var x=r,C=y+g;d^=-1;for(var I=y;I<C;I++)d=d>>>8^x[255&(d^h.charCodeAt(I))];return-1^d})(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(t,i,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,i,n){var s=null;s=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:s}},{lie:37}],7:[function(t,i,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",r=t("pako"),l=t("./utils"),u=t("./stream/GenericWorker"),d=s?"uint8array":"array";function h(g,y){u.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=y,this.meta={}}n.magic="\b\0",l.inherits(h,u),h.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(d,g.data),!1)},h.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(y){g.push({data:y,meta:g.meta})}},n.compressWorker=function(g){return new h("Deflate",g)},n.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,n){function s(x,C){var I,A="";for(I=0;I<C;I++)A+=String.fromCharCode(255&x),x>>>=8;return A}function r(x,C,I,A,E,L){var G,F,B=x.file,Z=x.compression,Y=L!==d.utf8encode,$=l.transformTo("string",L(B.name)),te=l.transformTo("string",d.utf8encode(B.name)),ce=B.comment,me=l.transformTo("string",L(ce)),X=l.transformTo("string",d.utf8encode(ce)),de=te.length!==B.name.length,N=X.length!==ce.length,ne="",le="",_e="",ke=B.dir,Ie=B.date,re={crc32:0,compressedSize:0,uncompressedSize:0};C&&!I||(re.crc32=x.crc32,re.compressedSize=x.compressedSize,re.uncompressedSize=x.uncompressedSize);var Q=0;C&&(Q|=8),Y||!de&&!N||(Q|=2048);var J=0,je=0;ke&&(J|=16),E==="UNIX"?(je=798,J|=(function(Je,kt){var Pt=Je;return Je||(Pt=kt?16893:33204),(65535&Pt)<<16})(B.unixPermissions,ke)):(je=20,J|=(function(Je){return 63&(Je||0)})(B.dosPermissions)),G=Ie.getUTCHours(),G<<=6,G|=Ie.getUTCMinutes(),G<<=5,G|=Ie.getUTCSeconds()/2,F=Ie.getUTCFullYear()-1980,F<<=4,F|=Ie.getUTCMonth()+1,F<<=5,F|=Ie.getUTCDate(),de&&(le=s(1,1)+s(h($),4)+te,ne+="up"+s(le.length,2)+le),N&&(_e=s(1,1)+s(h(me),4)+X,ne+="uc"+s(_e.length,2)+_e);var Qe="";return Qe+=`
\0`,Qe+=s(Q,2),Qe+=Z.magic,Qe+=s(G,2),Qe+=s(F,2),Qe+=s(re.crc32,4),Qe+=s(re.compressedSize,4),Qe+=s(re.uncompressedSize,4),Qe+=s($.length,2),Qe+=s(ne.length,2),{fileRecord:g.LOCAL_FILE_HEADER+Qe+$+ne,dirRecord:g.CENTRAL_FILE_HEADER+s(je,2)+Qe+s(me.length,2)+"\0\0\0\0"+s(J,4)+s(A,4)+$+ne+me}}var l=t("../utils"),u=t("../stream/GenericWorker"),d=t("../utf8"),h=t("../crc32"),g=t("../signature");function y(x,C,I,A){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=C,this.zipPlatform=I,this.encodeFileName=A,this.streamFiles=x,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(y,u),y.prototype.push=function(x){var C=x.meta.percent||0,I=this.entriesCount,A=this._sources.length;this.accumulate?this.contentBuffer.push(x):(this.bytesWritten+=x.data.length,u.prototype.push.call(this,{data:x.data,meta:{currentFile:this.currentFile,percent:I?(C+100*(I-A-1))/I:100}}))},y.prototype.openedSource=function(x){this.currentSourceOffset=this.bytesWritten,this.currentFile=x.file.name;var C=this.streamFiles&&!x.file.dir;if(C){var I=r(x,C,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:I.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(x){this.accumulate=!1;var C=this.streamFiles&&!x.file.dir,I=r(x,C,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(I.dirRecord),C)this.push({data:(function(A){return g.DATA_DESCRIPTOR+s(A.crc32,4)+s(A.compressedSize,4)+s(A.uncompressedSize,4)})(x),meta:{percent:100}});else for(this.push({data:I.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var x=this.bytesWritten,C=0;C<this.dirRecords.length;C++)this.push({data:this.dirRecords[C],meta:{percent:100}});var I=this.bytesWritten-x,A=(function(E,L,G,F,B){var Z=l.transformTo("string",B(F));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(E,2)+s(E,2)+s(L,4)+s(G,4)+s(Z.length,2)+Z})(this.dirRecords.length,I,x,this.zipComment,this.encodeFileName);this.push({data:A,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(x){this._sources.push(x);var C=this;return x.on("data",function(I){C.processChunk(I)}),x.on("end",function(){C.closedSource(C.previous.streamInfo),C._sources.length?C.prepareNextSource():C.end()}),x.on("error",function(I){C.error(I)}),this},y.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(x){var C=this._sources;if(!u.prototype.error.call(this,x))return!1;for(var I=0;I<C.length;I++)try{C[I].error(x)}catch{}return!0},y.prototype.lock=function(){u.prototype.lock.call(this);for(var x=this._sources,C=0;C<x.length;C++)x[C].lock()},i.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,n){var s=t("../compressions"),r=t("./ZipFileWorker");n.generateWorker=function(l,u,d){var h=new r(u.streamFiles,d,u.platform,u.encodeFileName),g=0;try{l.forEach(function(y,x){g++;var C=(function(L,G){var F=L||G,B=s[F];if(!B)throw new Error(F+" is not a valid compression method !");return B})(x.options.compression,u.compression),I=x.options.compressionOptions||u.compressionOptions||{},A=x.dir,E=x.date;x._compressWorker(C,I).withStreamInfo("file",{name:y,dir:A,date:E,comment:x.comment||"",unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions}).pipe(h)}),h.entriesCount=g}catch(y){h.error(y)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,n){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new s;for(var l in this)typeof this[l]!="function"&&(r[l]=this[l]);return r}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(r,l){return new s().loadAsync(r,l)},s.external=t("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,n){var s=t("./utils"),r=t("./external"),l=t("./utf8"),u=t("./zipEntries"),d=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function g(y){return new r.Promise(function(x,C){var I=y.decompressed.getContentWorker().pipe(new d);I.on("error",function(A){C(A)}).on("end",function(){I.streamInfo.crc32!==y.decompressed.crc32?C(new Error("Corrupted zip : CRC32 mismatch")):x()}).resume()})}i.exports=function(y,x){var C=this;return x=s.extend(x||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),h.isNode&&h.isStream(y)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",y,!0,x.optimizedBinaryString,x.base64).then(function(I){var A=new u(x);return A.load(I),A}).then(function(I){var A=[r.Promise.resolve(I)],E=I.files;if(x.checkCRC32)for(var L=0;L<E.length;L++)A.push(g(E[L]));return r.Promise.all(A)}).then(function(I){for(var A=I.shift(),E=A.files,L=0;L<E.length;L++){var G=E[L],F=G.fileNameStr,B=s.resolve(G.fileNameStr);C.file(B,G.decompressed,{binary:!0,optimizedBinaryString:!0,date:G.date,dir:G.dir,comment:G.fileCommentStr.length?G.fileCommentStr:null,unixPermissions:G.unixPermissions,dosPermissions:G.dosPermissions,createFolders:x.createFolders}),G.dir||(C.file(B).unsafeOriginalName=F)}return A.zipComment.length&&(C.comment=A.zipComment),C})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,n){var s=t("../utils"),r=t("../stream/GenericWorker");function l(u,d){r.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(d)}s.inherits(l,r),l.prototype._bindStream=function(u){var d=this;(this._stream=u).pause(),u.on("data",function(h){d.push({data:h,meta:{percent:0}})}).on("error",function(h){d.isPaused?this.generatedError=h:d.error(h)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},l.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,n){var s=t("readable-stream").Readable;function r(l,u,d){s.call(this,u),this._helper=l;var h=this;l.on("data",function(g,y){h.push(g)||h._helper.pause(),d&&d(y)}).on("error",function(g){h.emit("error",g)}).on("end",function(){h.push(null)})}t("../utils").inherits(r,s),r.prototype._read=function(){this._helper.resume()},i.exports=r},{"../utils":32,"readable-stream":16}],14:[function(t,i,n){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,r);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,r)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var r=new Buffer(s);return r.fill(0),r},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,i,n){function s(B,Z,Y){var $,te=l.getTypeOf(Z),ce=l.extend(Y||{},h);ce.date=ce.date||new Date,ce.compression!==null&&(ce.compression=ce.compression.toUpperCase()),typeof ce.unixPermissions=="string"&&(ce.unixPermissions=parseInt(ce.unixPermissions,8)),ce.unixPermissions&&16384&ce.unixPermissions&&(ce.dir=!0),ce.dosPermissions&&16&ce.dosPermissions&&(ce.dir=!0),ce.dir&&(B=E(B)),ce.createFolders&&($=A(B))&&L.call(this,$,!0);var me=te==="string"&&ce.binary===!1&&ce.base64===!1;Y&&Y.binary!==void 0||(ce.binary=!me),(Z instanceof g&&Z.uncompressedSize===0||ce.dir||!Z||Z.length===0)&&(ce.base64=!1,ce.binary=!0,Z="",ce.compression="STORE",te="string");var X=null;X=Z instanceof g||Z instanceof u?Z:C.isNode&&C.isStream(Z)?new I(B,Z):l.prepareContent(B,Z,ce.binary,ce.optimizedBinaryString,ce.base64);var de=new y(B,X,ce);this.files[B]=de}var r=t("./utf8"),l=t("./utils"),u=t("./stream/GenericWorker"),d=t("./stream/StreamHelper"),h=t("./defaults"),g=t("./compressedObject"),y=t("./zipObject"),x=t("./generate"),C=t("./nodejsUtils"),I=t("./nodejs/NodejsStreamInputAdapter"),A=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var Z=B.lastIndexOf("/");return 0<Z?B.substring(0,Z):""},E=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},L=function(B,Z){return Z=Z!==void 0?Z:h.createFolders,B=E(B),this.files[B]||s.call(this,B,null,{dir:!0,createFolders:Z}),this.files[B]};function G(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var F={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var Z,Y,$;for(Z in this.files)$=this.files[Z],(Y=Z.slice(this.root.length,Z.length))&&Z.slice(0,this.root.length)===this.root&&B(Y,$)},filter:function(B){var Z=[];return this.forEach(function(Y,$){B(Y,$)&&Z.push($)}),Z},file:function(B,Z,Y){if(arguments.length!==1)return B=this.root+B,s.call(this,B,Z,Y),this;if(G(B)){var $=B;return this.filter(function(ce,me){return!me.dir&&$.test(ce)})}var te=this.files[this.root+B];return te&&!te.dir?te:null},folder:function(B){if(!B)return this;if(G(B))return this.filter(function(te,ce){return ce.dir&&B.test(te)});var Z=this.root+B,Y=L.call(this,Z),$=this.clone();return $.root=Y.name,$},remove:function(B){B=this.root+B;var Z=this.files[B];if(Z||(B.slice(-1)!=="/"&&(B+="/"),Z=this.files[B]),Z&&!Z.dir)delete this.files[B];else for(var Y=this.filter(function(te,ce){return ce.name.slice(0,B.length)===B}),$=0;$<Y.length;$++)delete this.files[Y[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var Z,Y={};try{if((Y=l.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=Y.type.toLowerCase(),Y.compression=Y.compression.toUpperCase(),Y.type==="binarystring"&&(Y.type="string"),!Y.type)throw new Error("No output type specified.");l.checkSupport(Y.type),Y.platform!=="darwin"&&Y.platform!=="freebsd"&&Y.platform!=="linux"&&Y.platform!=="sunos"||(Y.platform="UNIX"),Y.platform==="win32"&&(Y.platform="DOS");var $=Y.comment||this.comment||"";Z=x.generateWorker(this,Y,$)}catch(te){(Z=new u("error")).error(te)}return new d(Z,Y.type||"string",Y.mimeType)},generateAsync:function(B,Z){return this.generateInternalStream(B).accumulate(Z)},generateNodeStream:function(B,Z){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(Z)}};i.exports=F},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,n){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,n){var s=t("./DataReader");function r(l){s.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}t("../utils").inherits(r,s),r.prototype.byteAt=function(l){return this.data[this.zero+l]},r.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),d=l.charCodeAt(1),h=l.charCodeAt(2),g=l.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===u&&this.data[y+1]===d&&this.data[y+2]===h&&this.data[y+3]===g)return y-this.zero;return-1},r.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),d=l.charCodeAt(1),h=l.charCodeAt(2),g=l.charCodeAt(3),y=this.readData(4);return u===y[0]&&d===y[1]&&h===y[2]&&g===y[3]},r.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},i.exports=r},{"../utils":32,"./DataReader":18}],18:[function(t,i,n){var s=t("../utils");function r(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,d=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)d=(d<<8)+this.byteAt(u);return this.index+=l,d},readString:function(l){return s.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},i.exports=r},{"../utils":32}],19:[function(t,i,n){var s=t("./Uint8ArrayReader");function r(l){s.call(this,l)}t("../utils").inherits(r,s),r.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},i.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,n){var s=t("./DataReader");function r(l){s.call(this,l)}t("../utils").inherits(r,s),r.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},r.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},r.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},r.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},i.exports=r},{"../utils":32,"./DataReader":18}],21:[function(t,i,n){var s=t("./ArrayReader");function r(l){s.call(this,l)}t("../utils").inherits(r,s),r.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},i.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,n){var s=t("../utils"),r=t("../support"),l=t("./ArrayReader"),u=t("./StringReader"),d=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");i.exports=function(g){var y=s.getTypeOf(g);return s.checkSupport(y),y!=="string"||r.uint8array?y==="nodebuffer"?new d(g):r.uint8array?new h(s.transformTo("uint8array",g)):new l(s.transformTo("array",g)):new u(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,n){var s=t("./GenericWorker"),r=t("../utils");function l(u){s.call(this,"ConvertWorker to "+u),this.destType=u}r.inherits(l,s),l.prototype.processChunk=function(u){this.push({data:r.transformTo(this.destType,u.data),meta:u.meta})},i.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,n){var s=t("./GenericWorker"),r=t("../crc32");function l(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,s),l.prototype.processChunk=function(u){this.streamInfo.crc32=r(u.data,this.streamInfo.crc32||0),this.push(u)},i.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,n){var s=t("../utils"),r=t("./GenericWorker");function l(u){r.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(l,r),l.prototype.processChunk=function(u){if(u){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+u.data.length}r.prototype.processChunk.call(this,u)},i.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,n){var s=t("../utils"),r=t("./GenericWorker");function l(u){r.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(h){d.dataIsReady=!0,d.data=h,d.max=h&&h.length||0,d.type=s.getTypeOf(h),d.isPaused||d._tickAndRepeat()},function(h){d.error(h)})}s.inherits(l,r),l.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,d);break;case"uint8array":u=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":u=this.data.slice(this.index,d)}return this.index=d,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,n){function s(r){this.name=r||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(r){this.emit("data",r)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(r){this.emit("error",r)}return!0},error:function(r){return!this.isFinished&&(this.isPaused?this.generatedError=r:(this.isFinished=!0,this.emit("error",r),this.previous&&this.previous.error(r),this.cleanUp()),!0)},on:function(r,l){return this._listeners[r].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(r,l){if(this._listeners[r])for(var u=0;u<this._listeners[r].length;u++)this._listeners[r][u].call(this,l)},pipe:function(r){return r.registerPrevious(this)},registerPrevious:function(r){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=r.streamInfo,this.mergeStreamInfo(),this.previous=r;var l=this;return r.on("data",function(u){l.processChunk(u)}),r.on("end",function(){l.end()}),r.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var r=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),r=!0),this.previous&&this.previous.resume(),!r},flush:function(){},processChunk:function(r){this.push(r)},withStreamInfo:function(r,l){return this.extraStreamInfo[r]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var r in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,r)&&(this.streamInfo[r]=this.extraStreamInfo[r])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var r="Worker "+this.name;return this.previous?this.previous+" -> "+r:r}},i.exports=s},{}],29:[function(t,i,n){var s=t("../utils"),r=t("./ConvertWorker"),l=t("./GenericWorker"),u=t("../base64"),d=t("../support"),h=t("../external"),g=null;if(d.nodestream)try{g=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(C,I){return new h.Promise(function(A,E){var L=[],G=C._internalType,F=C._outputType,B=C._mimeType;C.on("data",function(Z,Y){L.push(Z),I&&I(Y)}).on("error",function(Z){L=[],E(Z)}).on("end",function(){try{var Z=(function(Y,$,te){switch(Y){case"blob":return s.newBlob(s.transformTo("arraybuffer",$),te);case"base64":return u.encode($);default:return s.transformTo(Y,$)}})(F,(function(Y,$){var te,ce=0,me=null,X=0;for(te=0;te<$.length;te++)X+=$[te].length;switch(Y){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(me=new Uint8Array(X),te=0;te<$.length;te++)me.set($[te],ce),ce+=$[te].length;return me;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+Y+"'")}})(G,L),B);A(Z)}catch(Y){E(Y)}L=[]}).resume()})}function x(C,I,A){var E=I;switch(I){case"blob":case"arraybuffer":E="uint8array";break;case"base64":E="string"}try{this._internalType=E,this._outputType=I,this._mimeType=A,s.checkSupport(E),this._worker=C.pipe(new r(E)),C.lock()}catch(L){this._worker=new l("error"),this._worker.error(L)}}x.prototype={accumulate:function(C){return y(this,C)},on:function(C,I){var A=this;return C==="data"?this._worker.on(C,function(E){I.call(A,E.data,E.meta)}):this._worker.on(C,function(){s.delay(I,arguments,A)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(C){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},C)}},i.exports=x},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var s=new ArrayBuffer(0);try{n.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(s),n.blob=r.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,n){for(var s=t("./utils"),r=t("./support"),l=t("./nodejsUtils"),u=t("./stream/GenericWorker"),d=new Array(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;d[254]=d[254]=1;function g(){u.call(this,"utf-8 decode"),this.leftOver=null}function y(){u.call(this,"utf-8 encode")}n.utf8encode=function(x){return r.nodebuffer?l.newBufferFrom(x,"utf-8"):(function(C){var I,A,E,L,G,F=C.length,B=0;for(L=0;L<F;L++)(64512&(A=C.charCodeAt(L)))==55296&&L+1<F&&(64512&(E=C.charCodeAt(L+1)))==56320&&(A=65536+(A-55296<<10)+(E-56320),L++),B+=A<128?1:A<2048?2:A<65536?3:4;for(I=r.uint8array?new Uint8Array(B):new Array(B),L=G=0;G<B;L++)(64512&(A=C.charCodeAt(L)))==55296&&L+1<F&&(64512&(E=C.charCodeAt(L+1)))==56320&&(A=65536+(A-55296<<10)+(E-56320),L++),A<128?I[G++]=A:(A<2048?I[G++]=192|A>>>6:(A<65536?I[G++]=224|A>>>12:(I[G++]=240|A>>>18,I[G++]=128|A>>>12&63),I[G++]=128|A>>>6&63),I[G++]=128|63&A);return I})(x)},n.utf8decode=function(x){return r.nodebuffer?s.transformTo("nodebuffer",x).toString("utf-8"):(function(C){var I,A,E,L,G=C.length,F=new Array(2*G);for(I=A=0;I<G;)if((E=C[I++])<128)F[A++]=E;else if(4<(L=d[E]))F[A++]=65533,I+=L-1;else{for(E&=L===2?31:L===3?15:7;1<L&&I<G;)E=E<<6|63&C[I++],L--;1<L?F[A++]=65533:E<65536?F[A++]=E:(E-=65536,F[A++]=55296|E>>10&1023,F[A++]=56320|1023&E)}return F.length!==A&&(F.subarray?F=F.subarray(0,A):F.length=A),s.applyFromCharCode(F)})(x=s.transformTo(r.uint8array?"uint8array":"array",x))},s.inherits(g,u),g.prototype.processChunk=function(x){var C=s.transformTo(r.uint8array?"uint8array":"array",x.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var I=C;(C=new Uint8Array(I.length+this.leftOver.length)).set(this.leftOver,0),C.set(I,this.leftOver.length)}else C=this.leftOver.concat(C);this.leftOver=null}var A=(function(L,G){var F;for((G=G||L.length)>L.length&&(G=L.length),F=G-1;0<=F&&(192&L[F])==128;)F--;return F<0||F===0?G:F+d[L[F]]>G?F:G})(C),E=C;A!==C.length&&(r.uint8array?(E=C.subarray(0,A),this.leftOver=C.subarray(A,C.length)):(E=C.slice(0,A),this.leftOver=C.slice(A,C.length))),this.push({data:n.utf8decode(E),meta:x.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=g,s.inherits(y,u),y.prototype.processChunk=function(x){this.push({data:n.utf8encode(x.data),meta:x.meta})},n.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,n){var s=t("./support"),r=t("./base64"),l=t("./nodejsUtils"),u=t("./external");function d(I){return I}function h(I,A){for(var E=0;E<I.length;++E)A[E]=255&I.charCodeAt(E);return A}t("setimmediate"),n.newBlob=function(I,A){n.checkSupport("blob");try{return new Blob([I],{type:A})}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return E.append(I),E.getBlob(A)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(I,A,E){var L=[],G=0,F=I.length;if(F<=E)return String.fromCharCode.apply(null,I);for(;G<F;)A==="array"||A==="nodebuffer"?L.push(String.fromCharCode.apply(null,I.slice(G,Math.min(G+E,F)))):L.push(String.fromCharCode.apply(null,I.subarray(G,Math.min(G+E,F)))),G+=E;return L.join("")},stringifyByChar:function(I){for(var A="",E=0;E<I.length;E++)A+=String.fromCharCode(I[E]);return A},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}})()}};function y(I){var A=65536,E=n.getTypeOf(I),L=!0;if(E==="uint8array"?L=g.applyCanBeUsed.uint8array:E==="nodebuffer"&&(L=g.applyCanBeUsed.nodebuffer),L)for(;1<A;)try{return g.stringifyByChunk(I,E,A)}catch{A=Math.floor(A/2)}return g.stringifyByChar(I)}function x(I,A){for(var E=0;E<I.length;E++)A[E]=I[E];return A}n.applyFromCharCode=y;var C={};C.string={string:d,array:function(I){return h(I,new Array(I.length))},arraybuffer:function(I){return C.string.uint8array(I).buffer},uint8array:function(I){return h(I,new Uint8Array(I.length))},nodebuffer:function(I){return h(I,l.allocBuffer(I.length))}},C.array={string:y,array:d,arraybuffer:function(I){return new Uint8Array(I).buffer},uint8array:function(I){return new Uint8Array(I)},nodebuffer:function(I){return l.newBufferFrom(I)}},C.arraybuffer={string:function(I){return y(new Uint8Array(I))},array:function(I){return x(new Uint8Array(I),new Array(I.byteLength))},arraybuffer:d,uint8array:function(I){return new Uint8Array(I)},nodebuffer:function(I){return l.newBufferFrom(new Uint8Array(I))}},C.uint8array={string:y,array:function(I){return x(I,new Array(I.length))},arraybuffer:function(I){return I.buffer},uint8array:d,nodebuffer:function(I){return l.newBufferFrom(I)}},C.nodebuffer={string:y,array:function(I){return x(I,new Array(I.length))},arraybuffer:function(I){return C.nodebuffer.uint8array(I).buffer},uint8array:function(I){return x(I,new Uint8Array(I.length))},nodebuffer:d},n.transformTo=function(I,A){if(A=A||"",!I)return A;n.checkSupport(I);var E=n.getTypeOf(A);return C[E][I](A)},n.resolve=function(I){for(var A=I.split("/"),E=[],L=0;L<A.length;L++){var G=A[L];G==="."||G===""&&L!==0&&L!==A.length-1||(G===".."?E.pop():E.push(G))}return E.join("/")},n.getTypeOf=function(I){return typeof I=="string"?"string":Object.prototype.toString.call(I)==="[object Array]"?"array":s.nodebuffer&&l.isBuffer(I)?"nodebuffer":s.uint8array&&I instanceof Uint8Array?"uint8array":s.arraybuffer&&I instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(I){if(!s[I.toLowerCase()])throw new Error(I+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(I){var A,E,L="";for(E=0;E<(I||"").length;E++)L+="\\x"+((A=I.charCodeAt(E))<16?"0":"")+A.toString(16).toUpperCase();return L},n.delay=function(I,A,E){setImmediate(function(){I.apply(E||null,A||[])})},n.inherits=function(I,A){function E(){}E.prototype=A.prototype,I.prototype=new E},n.extend=function(){var I,A,E={};for(I=0;I<arguments.length;I++)for(A in arguments[I])Object.prototype.hasOwnProperty.call(arguments[I],A)&&E[A]===void 0&&(E[A]=arguments[I][A]);return E},n.prepareContent=function(I,A,E,L,G){return u.Promise.resolve(A).then(function(F){return s.blob&&(F instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(F))!==-1)&&typeof FileReader<"u"?new u.Promise(function(B,Z){var Y=new FileReader;Y.onload=function($){B($.target.result)},Y.onerror=function($){Z($.target.error)},Y.readAsArrayBuffer(F)}):F}).then(function(F){var B=n.getTypeOf(F);return B?(B==="arraybuffer"?F=n.transformTo("uint8array",F):B==="string"&&(G?F=r.decode(F):E&&L!==!0&&(F=(function(Z){return h(Z,s.uint8array?new Uint8Array(Z.length):new Array(Z.length))})(F))),F):u.Promise.reject(new Error("Can't read the data of '"+I+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,n){var s=t("./reader/readerFor"),r=t("./utils"),l=t("./signature"),u=t("./zipEntry"),d=t("./support");function h(g){this.files=[],this.loadOptions=g}h.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(y)+", expected "+r.pretty(g)+")")}},isSignature:function(g,y){var x=this.reader.index;this.reader.setIndex(g);var C=this.reader.readString(4)===y;return this.reader.setIndex(x),C},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),y=d.uint8array?"uint8array":"array",x=r.transformTo(y,g);this.zipComment=this.loadOptions.decodeFileName(x)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,y,x,C=this.zip64EndOfCentralSize-44;0<C;)g=this.reader.readInt(2),y=this.reader.readInt(4),x=this.reader.readData(y),this.zip64ExtensibleData[g]={id:g,length:y,value:x}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,y;for(g=0;g<this.files.length;g++)y=this.files[g],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(g=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var y=g;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var x=this.centralDirOffset+this.centralDirSize;this.zip64&&(x+=20,x+=12+this.zip64EndOfCentralSize);var C=y-x;if(0<C)this.isSignature(y,l.CENTRAL_FILE_HEADER)||(this.reader.zero=C);else if(C<0)throw new Error("Corrupted zip: missing "+Math.abs(C)+" bytes.")},prepareReader:function(g){this.reader=s(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,n){var s=t("./reader/readerFor"),r=t("./utils"),l=t("./compressedObject"),u=t("./crc32"),d=t("./utf8"),h=t("./compressions"),g=t("./support");function y(x,C){this.options=x,this.loadOptions=C}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(x){var C,I;if(x.skip(22),this.fileNameLength=x.readInt(2),I=x.readInt(2),this.fileName=x.readData(this.fileNameLength),x.skip(I),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((C=(function(A){for(var E in h)if(Object.prototype.hasOwnProperty.call(h,E)&&h[E].magic===A)return h[E];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,C,x.readData(this.compressedSize))},readCentralPart:function(x){this.versionMadeBy=x.readInt(2),x.skip(2),this.bitFlag=x.readInt(2),this.compressionMethod=x.readString(2),this.date=x.readDate(),this.crc32=x.readInt(4),this.compressedSize=x.readInt(4),this.uncompressedSize=x.readInt(4);var C=x.readInt(2);if(this.extraFieldsLength=x.readInt(2),this.fileCommentLength=x.readInt(2),this.diskNumberStart=x.readInt(2),this.internalFileAttributes=x.readInt(2),this.externalFileAttributes=x.readInt(4),this.localHeaderOffset=x.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");x.skip(C),this.readExtraFields(x),this.parseZIP64ExtraField(x),this.fileComment=x.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var x=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),x==0&&(this.dosPermissions=63&this.externalFileAttributes),x==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var x=s(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=x.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=x.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=x.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=x.readInt(4))}},readExtraFields:function(x){var C,I,A,E=x.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});x.index+4<E;)C=x.readInt(2),I=x.readInt(2),A=x.readData(I),this.extraFields[C]={id:C,length:I,value:A};x.setIndex(E)},handleUTF8:function(){var x=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var C=this.findExtraFieldUnicodePath();if(C!==null)this.fileNameStr=C;else{var I=r.transformTo(x,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(I)}var A=this.findExtraFieldUnicodeComment();if(A!==null)this.fileCommentStr=A;else{var E=r.transformTo(x,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(E)}}},findExtraFieldUnicodePath:function(){var x=this.extraFields[28789];if(x){var C=s(x.value);return C.readInt(1)!==1||u(this.fileName)!==C.readInt(4)?null:d.utf8decode(C.readData(x.length-5))}return null},findExtraFieldUnicodeComment:function(){var x=this.extraFields[25461];if(x){var C=s(x.value);return C.readInt(1)!==1||u(this.fileComment)!==C.readInt(4)?null:d.utf8decode(C.readData(x.length-5))}return null}},i.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,n){function s(C,I,A){this.name=C,this.dir=A.dir,this.date=A.date,this.comment=A.comment,this.unixPermissions=A.unixPermissions,this.dosPermissions=A.dosPermissions,this._data=I,this._dataBinary=A.binary,this.options={compression:A.compression,compressionOptions:A.compressionOptions}}var r=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),u=t("./utf8"),d=t("./compressedObject"),h=t("./stream/GenericWorker");s.prototype={internalStream:function(C){var I=null,A="string";try{if(!C)throw new Error("No output type specified.");var E=(A=C.toLowerCase())==="string"||A==="text";A!=="binarystring"&&A!=="text"||(A="string"),I=this._decompressWorker();var L=!this._dataBinary;L&&!E&&(I=I.pipe(new u.Utf8EncodeWorker)),!L&&E&&(I=I.pipe(new u.Utf8DecodeWorker))}catch(G){(I=new h("error")).error(G)}return new r(I,A,"")},async:function(C,I){return this.internalStream(C).accumulate(I)},nodeStream:function(C,I){return this.internalStream(C||"nodebuffer").toNodejsStream(I)},_compressWorker:function(C,I){if(this._data instanceof d&&this._data.compression.magic===C.magic)return this._data.getCompressedWorker();var A=this._decompressWorker();return this._dataBinary||(A=A.pipe(new u.Utf8EncodeWorker)),d.createWorkerFrom(A,C,I)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof h?this._data:new l(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},x=0;x<g.length;x++)s.prototype[g[x]]=y;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,n){(function(s){var r,l,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var d=0,h=new u(C),g=s.document.createTextNode("");h.observe(g,{characterData:!0}),r=function(){g.data=d=++d%2}}else if(s.setImmediate||s.MessageChannel===void 0)r="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var I=s.document.createElement("script");I.onreadystatechange=function(){C(),I.onreadystatechange=null,I.parentNode.removeChild(I),I=null},s.document.documentElement.appendChild(I)}:function(){setTimeout(C,0)};else{var y=new s.MessageChannel;y.port1.onmessage=C,r=function(){y.port2.postMessage(0)}}var x=[];function C(){var I,A;l=!0;for(var E=x.length;E;){for(A=x,x=[],I=-1;++I<E;)A[I]();E=x.length}l=!1}i.exports=function(I){x.push(I)!==1||l||r()}}).call(this,typeof $h<"u"?$h:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,n){var s=t("immediate");function r(){}var l={},u=["REJECTED"],d=["FULFILLED"],h=["PENDING"];function g(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,E!==r&&I(this,E)}function y(E,L,G){this.promise=E,typeof L=="function"&&(this.onFulfilled=L,this.callFulfilled=this.otherCallFulfilled),typeof G=="function"&&(this.onRejected=G,this.callRejected=this.otherCallRejected)}function x(E,L,G){s(function(){var F;try{F=L(G)}catch(B){return l.reject(E,B)}F===E?l.reject(E,new TypeError("Cannot resolve promise with itself")):l.resolve(E,F)})}function C(E){var L=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof L=="function")return function(){L.apply(E,arguments)}}function I(E,L){var G=!1;function F(Y){G||(G=!0,l.reject(E,Y))}function B(Y){G||(G=!0,l.resolve(E,Y))}var Z=A(function(){L(B,F)});Z.status==="error"&&F(Z.value)}function A(E,L){var G={};try{G.value=E(L),G.status="success"}catch(F){G.status="error",G.value=F}return G}(i.exports=g).prototype.finally=function(E){if(typeof E!="function")return this;var L=this.constructor;return this.then(function(G){return L.resolve(E()).then(function(){return G})},function(G){return L.resolve(E()).then(function(){throw G})})},g.prototype.catch=function(E){return this.then(null,E)},g.prototype.then=function(E,L){if(typeof E!="function"&&this.state===d||typeof L!="function"&&this.state===u)return this;var G=new this.constructor(r);return this.state!==h?x(G,this.state===d?E:L,this.outcome):this.queue.push(new y(G,E,L)),G},y.prototype.callFulfilled=function(E){l.resolve(this.promise,E)},y.prototype.otherCallFulfilled=function(E){x(this.promise,this.onFulfilled,E)},y.prototype.callRejected=function(E){l.reject(this.promise,E)},y.prototype.otherCallRejected=function(E){x(this.promise,this.onRejected,E)},l.resolve=function(E,L){var G=A(C,L);if(G.status==="error")return l.reject(E,G.value);var F=G.value;if(F)I(E,F);else{E.state=d,E.outcome=L;for(var B=-1,Z=E.queue.length;++B<Z;)E.queue[B].callFulfilled(L)}return E},l.reject=function(E,L){E.state=u,E.outcome=L;for(var G=-1,F=E.queue.length;++G<F;)E.queue[G].callRejected(L);return E},g.resolve=function(E){return E instanceof this?E:l.resolve(new this(r),E)},g.reject=function(E){var L=new this(r);return l.reject(L,E)},g.all=function(E){var L=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var G=E.length,F=!1;if(!G)return this.resolve([]);for(var B=new Array(G),Z=0,Y=-1,$=new this(r);++Y<G;)te(E[Y],Y);return $;function te(ce,me){L.resolve(ce).then(function(X){B[me]=X,++Z!==G||F||(F=!0,l.resolve($,B))},function(X){F||(F=!0,l.reject($,X))})}},g.race=function(E){var L=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var G=E.length,F=!1;if(!G)return this.resolve([]);for(var B=-1,Z=new this(r);++B<G;)Y=E[B],L.resolve(Y).then(function($){F||(F=!0,l.resolve(Z,$))},function($){F||(F=!0,l.reject(Z,$))});var Y;return Z}},{immediate:36}],38:[function(t,i,n){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,n){var s=t("./zlib/deflate"),r=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/messages"),d=t("./zlib/zstream"),h=Object.prototype.toString,g=0,y=-1,x=0,C=8;function I(E){if(!(this instanceof I))return new I(E);this.options=r.assign({level:y,method:C,chunkSize:16384,windowBits:15,memLevel:8,strategy:x,to:""},E||{});var L=this.options;L.raw&&0<L.windowBits?L.windowBits=-L.windowBits:L.gzip&&0<L.windowBits&&L.windowBits<16&&(L.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var G=s.deflateInit2(this.strm,L.level,L.method,L.windowBits,L.memLevel,L.strategy);if(G!==g)throw new Error(u[G]);if(L.header&&s.deflateSetHeader(this.strm,L.header),L.dictionary){var F;if(F=typeof L.dictionary=="string"?l.string2buf(L.dictionary):h.call(L.dictionary)==="[object ArrayBuffer]"?new Uint8Array(L.dictionary):L.dictionary,(G=s.deflateSetDictionary(this.strm,F))!==g)throw new Error(u[G]);this._dict_set=!0}}function A(E,L){var G=new I(L);if(G.push(E,!0),G.err)throw G.msg||u[G.err];return G.result}I.prototype.push=function(E,L){var G,F,B=this.strm,Z=this.options.chunkSize;if(this.ended)return!1;F=L===~~L?L:L===!0?4:0,typeof E=="string"?B.input=l.string2buf(E):h.call(E)==="[object ArrayBuffer]"?B.input=new Uint8Array(E):B.input=E,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new r.Buf8(Z),B.next_out=0,B.avail_out=Z),(G=s.deflate(B,F))!==1&&G!==g)return this.onEnd(G),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||F!==4&&F!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(r.shrinkBuf(B.output,B.next_out))):this.onData(r.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&G!==1);return F===4?(G=s.deflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===g):F!==2||(this.onEnd(g),!(B.avail_out=0))},I.prototype.onData=function(E){this.chunks.push(E)},I.prototype.onEnd=function(E){E===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg},n.Deflate=I,n.deflate=A,n.deflateRaw=function(E,L){return(L=L||{}).raw=!0,A(E,L)},n.gzip=function(E,L){return(L=L||{}).gzip=!0,A(E,L)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,n){var s=t("./zlib/inflate"),r=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/constants"),d=t("./zlib/messages"),h=t("./zlib/zstream"),g=t("./zlib/gzheader"),y=Object.prototype.toString;function x(I){if(!(this instanceof x))return new x(I);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},I||{});var A=this.options;A.raw&&0<=A.windowBits&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(0<=A.windowBits&&A.windowBits<16)||I&&I.windowBits||(A.windowBits+=32),15<A.windowBits&&A.windowBits<48&&(15&A.windowBits)==0&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var E=s.inflateInit2(this.strm,A.windowBits);if(E!==u.Z_OK)throw new Error(d[E]);this.header=new g,s.inflateGetHeader(this.strm,this.header)}function C(I,A){var E=new x(A);if(E.push(I,!0),E.err)throw E.msg||d[E.err];return E.result}x.prototype.push=function(I,A){var E,L,G,F,B,Z,Y=this.strm,$=this.options.chunkSize,te=this.options.dictionary,ce=!1;if(this.ended)return!1;L=A===~~A?A:A===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof I=="string"?Y.input=l.binstring2buf(I):y.call(I)==="[object ArrayBuffer]"?Y.input=new Uint8Array(I):Y.input=I,Y.next_in=0,Y.avail_in=Y.input.length;do{if(Y.avail_out===0&&(Y.output=new r.Buf8($),Y.next_out=0,Y.avail_out=$),(E=s.inflate(Y,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&te&&(Z=typeof te=="string"?l.string2buf(te):y.call(te)==="[object ArrayBuffer]"?new Uint8Array(te):te,E=s.inflateSetDictionary(this.strm,Z)),E===u.Z_BUF_ERROR&&ce===!0&&(E=u.Z_OK,ce=!1),E!==u.Z_STREAM_END&&E!==u.Z_OK)return this.onEnd(E),!(this.ended=!0);Y.next_out&&(Y.avail_out!==0&&E!==u.Z_STREAM_END&&(Y.avail_in!==0||L!==u.Z_FINISH&&L!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(G=l.utf8border(Y.output,Y.next_out),F=Y.next_out-G,B=l.buf2string(Y.output,G),Y.next_out=F,Y.avail_out=$-F,F&&r.arraySet(Y.output,Y.output,G,F,0),this.onData(B)):this.onData(r.shrinkBuf(Y.output,Y.next_out)))),Y.avail_in===0&&Y.avail_out===0&&(ce=!0)}while((0<Y.avail_in||Y.avail_out===0)&&E!==u.Z_STREAM_END);return E===u.Z_STREAM_END&&(L=u.Z_FINISH),L===u.Z_FINISH?(E=s.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===u.Z_OK):L!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(Y.avail_out=0))},x.prototype.onData=function(I){this.chunks.push(I)},x.prototype.onEnd=function(I){I===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=I,this.msg=this.strm.msg},n.Inflate=x,n.inflate=C,n.inflateRaw=function(I,A){return(A=A||{}).raw=!0,C(I,A)},n.ungzip=C},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(u){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var h=d.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var g in h)h.hasOwnProperty(g)&&(u[g]=h[g])}}return u},n.shrinkBuf=function(u,d){return u.length===d?u:u.subarray?u.subarray(0,d):(u.length=d,u)};var r={arraySet:function(u,d,h,g,y){if(d.subarray&&u.subarray)u.set(d.subarray(h,h+g),y);else for(var x=0;x<g;x++)u[y+x]=d[h+x]},flattenChunks:function(u){var d,h,g,y,x,C;for(d=g=0,h=u.length;d<h;d++)g+=u[d].length;for(C=new Uint8Array(g),d=y=0,h=u.length;d<h;d++)x=u[d],C.set(x,y),y+=x.length;return C}},l={arraySet:function(u,d,h,g,y){for(var x=0;x<g;x++)u[y+x]=d[h+x]},flattenChunks:function(u){return[].concat.apply([],u)}};n.setTyped=function(u){u?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,l))},n.setTyped(s)},{}],42:[function(t,i,n){var s=t("./common"),r=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new s.Buf8(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function h(g,y){if(y<65537&&(g.subarray&&l||!g.subarray&&r))return String.fromCharCode.apply(null,s.shrinkBuf(g,y));for(var x="",C=0;C<y;C++)x+=String.fromCharCode(g[C]);return x}u[254]=u[254]=1,n.string2buf=function(g){var y,x,C,I,A,E=g.length,L=0;for(I=0;I<E;I++)(64512&(x=g.charCodeAt(I)))==55296&&I+1<E&&(64512&(C=g.charCodeAt(I+1)))==56320&&(x=65536+(x-55296<<10)+(C-56320),I++),L+=x<128?1:x<2048?2:x<65536?3:4;for(y=new s.Buf8(L),I=A=0;A<L;I++)(64512&(x=g.charCodeAt(I)))==55296&&I+1<E&&(64512&(C=g.charCodeAt(I+1)))==56320&&(x=65536+(x-55296<<10)+(C-56320),I++),x<128?y[A++]=x:(x<2048?y[A++]=192|x>>>6:(x<65536?y[A++]=224|x>>>12:(y[A++]=240|x>>>18,y[A++]=128|x>>>12&63),y[A++]=128|x>>>6&63),y[A++]=128|63&x);return y},n.buf2binstring=function(g){return h(g,g.length)},n.binstring2buf=function(g){for(var y=new s.Buf8(g.length),x=0,C=y.length;x<C;x++)y[x]=g.charCodeAt(x);return y},n.buf2string=function(g,y){var x,C,I,A,E=y||g.length,L=new Array(2*E);for(x=C=0;x<E;)if((I=g[x++])<128)L[C++]=I;else if(4<(A=u[I]))L[C++]=65533,x+=A-1;else{for(I&=A===2?31:A===3?15:7;1<A&&x<E;)I=I<<6|63&g[x++],A--;1<A?L[C++]=65533:I<65536?L[C++]=I:(I-=65536,L[C++]=55296|I>>10&1023,L[C++]=56320|1023&I)}return h(L,C)},n.utf8border=function(g,y){var x;for((y=y||g.length)>g.length&&(y=g.length),x=y-1;0<=x&&(192&g[x])==128;)x--;return x<0||x===0?y:x+u[g[x]]>y?x:y}},{"./common":41}],43:[function(t,i,n){i.exports=function(s,r,l,u){for(var d=65535&s|0,h=s>>>16&65535|0,g=0;l!==0;){for(l-=g=2e3<l?2e3:l;h=h+(d=d+r[u++]|0)|0,--g;);d%=65521,h%=65521}return d|h<<16|0}},{}],44:[function(t,i,n){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,n){var s=(function(){for(var r,l=[],u=0;u<256;u++){r=u;for(var d=0;d<8;d++)r=1&r?3988292384^r>>>1:r>>>1;l[u]=r}return l})();i.exports=function(r,l,u,d){var h=s,g=d+u;r^=-1;for(var y=d;y<g;y++)r=r>>>8^h[255&(r^l[y])];return-1^r}},{}],46:[function(t,i,n){var s,r=t("../utils/common"),l=t("./trees"),u=t("./adler32"),d=t("./crc32"),h=t("./messages"),g=0,y=4,x=0,C=-2,I=-1,A=4,E=2,L=8,G=9,F=286,B=30,Z=19,Y=2*F+1,$=15,te=3,ce=258,me=ce+te+1,X=42,de=113,N=1,ne=2,le=3,_e=4;function ke(z,Ze){return z.msg=h[Ze],Ze}function Ie(z){return(z<<1)-(4<z?9:0)}function re(z){for(var Ze=z.length;0<=--Ze;)z[Ze]=0}function Q(z){var Ze=z.state,Re=Ze.pending;Re>z.avail_out&&(Re=z.avail_out),Re!==0&&(r.arraySet(z.output,Ze.pending_buf,Ze.pending_out,Re,z.next_out),z.next_out+=Re,Ze.pending_out+=Re,z.total_out+=Re,z.avail_out-=Re,Ze.pending-=Re,Ze.pending===0&&(Ze.pending_out=0))}function J(z,Ze){l._tr_flush_block(z,0<=z.block_start?z.block_start:-1,z.strstart-z.block_start,Ze),z.block_start=z.strstart,Q(z.strm)}function je(z,Ze){z.pending_buf[z.pending++]=Ze}function Qe(z,Ze){z.pending_buf[z.pending++]=Ze>>>8&255,z.pending_buf[z.pending++]=255&Ze}function Je(z,Ze){var Re,fe,ie=z.max_chain_length,Ce=z.strstart,Ee=z.prev_length,Ne=z.nice_match,Ve=z.strstart>z.w_size-me?z.strstart-(z.w_size-me):0,$e=z.window,ht=z.w_mask,_t=z.prev,Et=z.strstart+ce,ca=$e[Ce+Ee-1],ua=$e[Ce+Ee];z.prev_length>=z.good_match&&(ie>>=2),Ne>z.lookahead&&(Ne=z.lookahead);do if($e[(Re=Ze)+Ee]===ua&&$e[Re+Ee-1]===ca&&$e[Re]===$e[Ce]&&$e[++Re]===$e[Ce+1]){Ce+=2,Re++;do;while($e[++Ce]===$e[++Re]&&$e[++Ce]===$e[++Re]&&$e[++Ce]===$e[++Re]&&$e[++Ce]===$e[++Re]&&$e[++Ce]===$e[++Re]&&$e[++Ce]===$e[++Re]&&$e[++Ce]===$e[++Re]&&$e[++Ce]===$e[++Re]&&Ce<Et);if(fe=ce-(Et-Ce),Ce=Et-ce,Ee<fe){if(z.match_start=Ze,Ne<=(Ee=fe))break;ca=$e[Ce+Ee-1],ua=$e[Ce+Ee]}}while((Ze=_t[Ze&ht])>Ve&&--ie!=0);return Ee<=z.lookahead?Ee:z.lookahead}function kt(z){var Ze,Re,fe,ie,Ce,Ee,Ne,Ve,$e,ht,_t=z.w_size;do{if(ie=z.window_size-z.lookahead-z.strstart,z.strstart>=_t+(_t-me)){for(r.arraySet(z.window,z.window,_t,_t,0),z.match_start-=_t,z.strstart-=_t,z.block_start-=_t,Ze=Re=z.hash_size;fe=z.head[--Ze],z.head[Ze]=_t<=fe?fe-_t:0,--Re;);for(Ze=Re=_t;fe=z.prev[--Ze],z.prev[Ze]=_t<=fe?fe-_t:0,--Re;);ie+=_t}if(z.strm.avail_in===0)break;if(Ee=z.strm,Ne=z.window,Ve=z.strstart+z.lookahead,$e=ie,ht=void 0,ht=Ee.avail_in,$e<ht&&(ht=$e),Re=ht===0?0:(Ee.avail_in-=ht,r.arraySet(Ne,Ee.input,Ee.next_in,ht,Ve),Ee.state.wrap===1?Ee.adler=u(Ee.adler,Ne,ht,Ve):Ee.state.wrap===2&&(Ee.adler=d(Ee.adler,Ne,ht,Ve)),Ee.next_in+=ht,Ee.total_in+=ht,ht),z.lookahead+=Re,z.lookahead+z.insert>=te)for(Ce=z.strstart-z.insert,z.ins_h=z.window[Ce],z.ins_h=(z.ins_h<<z.hash_shift^z.window[Ce+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[Ce+te-1])&z.hash_mask,z.prev[Ce&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=Ce,Ce++,z.insert--,!(z.lookahead+z.insert<te)););}while(z.lookahead<me&&z.strm.avail_in!==0)}function Pt(z,Ze){for(var Re,fe;;){if(z.lookahead<me){if(kt(z),z.lookahead<me&&Ze===g)return N;if(z.lookahead===0)break}if(Re=0,z.lookahead>=te&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+te-1])&z.hash_mask,Re=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),Re!==0&&z.strstart-Re<=z.w_size-me&&(z.match_length=Je(z,Re)),z.match_length>=te)if(fe=l._tr_tally(z,z.strstart-z.match_start,z.match_length-te),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=te){for(z.match_length--;z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+te-1])&z.hash_mask,Re=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart,--z.match_length!=0;);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else fe=l._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(fe&&(J(z,!1),z.strm.avail_out===0))return N}return z.insert=z.strstart<te-1?z.strstart:te-1,Ze===y?(J(z,!0),z.strm.avail_out===0?le:_e):z.last_lit&&(J(z,!1),z.strm.avail_out===0)?N:ne}function zt(z,Ze){for(var Re,fe,ie;;){if(z.lookahead<me){if(kt(z),z.lookahead<me&&Ze===g)return N;if(z.lookahead===0)break}if(Re=0,z.lookahead>=te&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+te-1])&z.hash_mask,Re=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=te-1,Re!==0&&z.prev_length<z.max_lazy_match&&z.strstart-Re<=z.w_size-me&&(z.match_length=Je(z,Re),z.match_length<=5&&(z.strategy===1||z.match_length===te&&4096<z.strstart-z.match_start)&&(z.match_length=te-1)),z.prev_length>=te&&z.match_length<=z.prev_length){for(ie=z.strstart+z.lookahead-te,fe=l._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-te),z.lookahead-=z.prev_length-1,z.prev_length-=2;++z.strstart<=ie&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+te-1])&z.hash_mask,Re=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),--z.prev_length!=0;);if(z.match_available=0,z.match_length=te-1,z.strstart++,fe&&(J(z,!1),z.strm.avail_out===0))return N}else if(z.match_available){if((fe=l._tr_tally(z,0,z.window[z.strstart-1]))&&J(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return N}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(fe=l._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<te-1?z.strstart:te-1,Ze===y?(J(z,!0),z.strm.avail_out===0?le:_e):z.last_lit&&(J(z,!1),z.strm.avail_out===0)?N:ne}function Nt(z,Ze,Re,fe,ie){this.good_length=z,this.max_lazy=Ze,this.nice_length=Re,this.max_chain=fe,this.func=ie}function ga(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=L,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*Y),this.dyn_dtree=new r.Buf16(2*(2*B+1)),this.bl_tree=new r.Buf16(2*(2*Z+1)),re(this.dyn_ltree),re(this.dyn_dtree),re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16($+1),this.heap=new r.Buf16(2*F+1),re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*F+1),re(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ta(z){var Ze;return z&&z.state?(z.total_in=z.total_out=0,z.data_type=E,(Ze=z.state).pending=0,Ze.pending_out=0,Ze.wrap<0&&(Ze.wrap=-Ze.wrap),Ze.status=Ze.wrap?X:de,z.adler=Ze.wrap===2?0:1,Ze.last_flush=g,l._tr_init(Ze),x):ke(z,C)}function Fe(z){var Ze=ta(z);return Ze===x&&(function(Re){Re.window_size=2*Re.w_size,re(Re.head),Re.max_lazy_match=s[Re.level].max_lazy,Re.good_match=s[Re.level].good_length,Re.nice_match=s[Re.level].nice_length,Re.max_chain_length=s[Re.level].max_chain,Re.strstart=0,Re.block_start=0,Re.lookahead=0,Re.insert=0,Re.match_length=Re.prev_length=te-1,Re.match_available=0,Re.ins_h=0})(z.state),Ze}function De(z,Ze,Re,fe,ie,Ce){if(!z)return C;var Ee=1;if(Ze===I&&(Ze=6),fe<0?(Ee=0,fe=-fe):15<fe&&(Ee=2,fe-=16),ie<1||G<ie||Re!==L||fe<8||15<fe||Ze<0||9<Ze||Ce<0||A<Ce)return ke(z,C);fe===8&&(fe=9);var Ne=new ga;return(z.state=Ne).strm=z,Ne.wrap=Ee,Ne.gzhead=null,Ne.w_bits=fe,Ne.w_size=1<<Ne.w_bits,Ne.w_mask=Ne.w_size-1,Ne.hash_bits=ie+7,Ne.hash_size=1<<Ne.hash_bits,Ne.hash_mask=Ne.hash_size-1,Ne.hash_shift=~~((Ne.hash_bits+te-1)/te),Ne.window=new r.Buf8(2*Ne.w_size),Ne.head=new r.Buf16(Ne.hash_size),Ne.prev=new r.Buf16(Ne.w_size),Ne.lit_bufsize=1<<ie+6,Ne.pending_buf_size=4*Ne.lit_bufsize,Ne.pending_buf=new r.Buf8(Ne.pending_buf_size),Ne.d_buf=1*Ne.lit_bufsize,Ne.l_buf=3*Ne.lit_bufsize,Ne.level=Ze,Ne.strategy=Ce,Ne.method=Re,Fe(z)}s=[new Nt(0,0,0,0,function(z,Ze){var Re=65535;for(Re>z.pending_buf_size-5&&(Re=z.pending_buf_size-5);;){if(z.lookahead<=1){if(kt(z),z.lookahead===0&&Ze===g)return N;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var fe=z.block_start+Re;if((z.strstart===0||z.strstart>=fe)&&(z.lookahead=z.strstart-fe,z.strstart=fe,J(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-me&&(J(z,!1),z.strm.avail_out===0))return N}return z.insert=0,Ze===y?(J(z,!0),z.strm.avail_out===0?le:_e):(z.strstart>z.block_start&&(J(z,!1),z.strm.avail_out),N)}),new Nt(4,4,8,4,Pt),new Nt(4,5,16,8,Pt),new Nt(4,6,32,32,Pt),new Nt(4,4,16,16,zt),new Nt(8,16,32,32,zt),new Nt(8,16,128,128,zt),new Nt(8,32,128,256,zt),new Nt(32,128,258,1024,zt),new Nt(32,258,258,4096,zt)],n.deflateInit=function(z,Ze){return De(z,Ze,L,15,8,0)},n.deflateInit2=De,n.deflateReset=Fe,n.deflateResetKeep=ta,n.deflateSetHeader=function(z,Ze){return z&&z.state?z.state.wrap!==2?C:(z.state.gzhead=Ze,x):C},n.deflate=function(z,Ze){var Re,fe,ie,Ce;if(!z||!z.state||5<Ze||Ze<0)return z?ke(z,C):C;if(fe=z.state,!z.output||!z.input&&z.avail_in!==0||fe.status===666&&Ze!==y)return ke(z,z.avail_out===0?-5:C);if(fe.strm=z,Re=fe.last_flush,fe.last_flush=Ze,fe.status===X)if(fe.wrap===2)z.adler=0,je(fe,31),je(fe,139),je(fe,8),fe.gzhead?(je(fe,(fe.gzhead.text?1:0)+(fe.gzhead.hcrc?2:0)+(fe.gzhead.extra?4:0)+(fe.gzhead.name?8:0)+(fe.gzhead.comment?16:0)),je(fe,255&fe.gzhead.time),je(fe,fe.gzhead.time>>8&255),je(fe,fe.gzhead.time>>16&255),je(fe,fe.gzhead.time>>24&255),je(fe,fe.level===9?2:2<=fe.strategy||fe.level<2?4:0),je(fe,255&fe.gzhead.os),fe.gzhead.extra&&fe.gzhead.extra.length&&(je(fe,255&fe.gzhead.extra.length),je(fe,fe.gzhead.extra.length>>8&255)),fe.gzhead.hcrc&&(z.adler=d(z.adler,fe.pending_buf,fe.pending,0)),fe.gzindex=0,fe.status=69):(je(fe,0),je(fe,0),je(fe,0),je(fe,0),je(fe,0),je(fe,fe.level===9?2:2<=fe.strategy||fe.level<2?4:0),je(fe,3),fe.status=de);else{var Ee=L+(fe.w_bits-8<<4)<<8;Ee|=(2<=fe.strategy||fe.level<2?0:fe.level<6?1:fe.level===6?2:3)<<6,fe.strstart!==0&&(Ee|=32),Ee+=31-Ee%31,fe.status=de,Qe(fe,Ee),fe.strstart!==0&&(Qe(fe,z.adler>>>16),Qe(fe,65535&z.adler)),z.adler=1}if(fe.status===69)if(fe.gzhead.extra){for(ie=fe.pending;fe.gzindex<(65535&fe.gzhead.extra.length)&&(fe.pending!==fe.pending_buf_size||(fe.gzhead.hcrc&&fe.pending>ie&&(z.adler=d(z.adler,fe.pending_buf,fe.pending-ie,ie)),Q(z),ie=fe.pending,fe.pending!==fe.pending_buf_size));)je(fe,255&fe.gzhead.extra[fe.gzindex]),fe.gzindex++;fe.gzhead.hcrc&&fe.pending>ie&&(z.adler=d(z.adler,fe.pending_buf,fe.pending-ie,ie)),fe.gzindex===fe.gzhead.extra.length&&(fe.gzindex=0,fe.status=73)}else fe.status=73;if(fe.status===73)if(fe.gzhead.name){ie=fe.pending;do{if(fe.pending===fe.pending_buf_size&&(fe.gzhead.hcrc&&fe.pending>ie&&(z.adler=d(z.adler,fe.pending_buf,fe.pending-ie,ie)),Q(z),ie=fe.pending,fe.pending===fe.pending_buf_size)){Ce=1;break}Ce=fe.gzindex<fe.gzhead.name.length?255&fe.gzhead.name.charCodeAt(fe.gzindex++):0,je(fe,Ce)}while(Ce!==0);fe.gzhead.hcrc&&fe.pending>ie&&(z.adler=d(z.adler,fe.pending_buf,fe.pending-ie,ie)),Ce===0&&(fe.gzindex=0,fe.status=91)}else fe.status=91;if(fe.status===91)if(fe.gzhead.comment){ie=fe.pending;do{if(fe.pending===fe.pending_buf_size&&(fe.gzhead.hcrc&&fe.pending>ie&&(z.adler=d(z.adler,fe.pending_buf,fe.pending-ie,ie)),Q(z),ie=fe.pending,fe.pending===fe.pending_buf_size)){Ce=1;break}Ce=fe.gzindex<fe.gzhead.comment.length?255&fe.gzhead.comment.charCodeAt(fe.gzindex++):0,je(fe,Ce)}while(Ce!==0);fe.gzhead.hcrc&&fe.pending>ie&&(z.adler=d(z.adler,fe.pending_buf,fe.pending-ie,ie)),Ce===0&&(fe.status=103)}else fe.status=103;if(fe.status===103&&(fe.gzhead.hcrc?(fe.pending+2>fe.pending_buf_size&&Q(z),fe.pending+2<=fe.pending_buf_size&&(je(fe,255&z.adler),je(fe,z.adler>>8&255),z.adler=0,fe.status=de)):fe.status=de),fe.pending!==0){if(Q(z),z.avail_out===0)return fe.last_flush=-1,x}else if(z.avail_in===0&&Ie(Ze)<=Ie(Re)&&Ze!==y)return ke(z,-5);if(fe.status===666&&z.avail_in!==0)return ke(z,-5);if(z.avail_in!==0||fe.lookahead!==0||Ze!==g&&fe.status!==666){var Ne=fe.strategy===2?(function(Ve,$e){for(var ht;;){if(Ve.lookahead===0&&(kt(Ve),Ve.lookahead===0)){if($e===g)return N;break}if(Ve.match_length=0,ht=l._tr_tally(Ve,0,Ve.window[Ve.strstart]),Ve.lookahead--,Ve.strstart++,ht&&(J(Ve,!1),Ve.strm.avail_out===0))return N}return Ve.insert=0,$e===y?(J(Ve,!0),Ve.strm.avail_out===0?le:_e):Ve.last_lit&&(J(Ve,!1),Ve.strm.avail_out===0)?N:ne})(fe,Ze):fe.strategy===3?(function(Ve,$e){for(var ht,_t,Et,ca,ua=Ve.window;;){if(Ve.lookahead<=ce){if(kt(Ve),Ve.lookahead<=ce&&$e===g)return N;if(Ve.lookahead===0)break}if(Ve.match_length=0,Ve.lookahead>=te&&0<Ve.strstart&&(_t=ua[Et=Ve.strstart-1])===ua[++Et]&&_t===ua[++Et]&&_t===ua[++Et]){ca=Ve.strstart+ce;do;while(_t===ua[++Et]&&_t===ua[++Et]&&_t===ua[++Et]&&_t===ua[++Et]&&_t===ua[++Et]&&_t===ua[++Et]&&_t===ua[++Et]&&_t===ua[++Et]&&Et<ca);Ve.match_length=ce-(ca-Et),Ve.match_length>Ve.lookahead&&(Ve.match_length=Ve.lookahead)}if(Ve.match_length>=te?(ht=l._tr_tally(Ve,1,Ve.match_length-te),Ve.lookahead-=Ve.match_length,Ve.strstart+=Ve.match_length,Ve.match_length=0):(ht=l._tr_tally(Ve,0,Ve.window[Ve.strstart]),Ve.lookahead--,Ve.strstart++),ht&&(J(Ve,!1),Ve.strm.avail_out===0))return N}return Ve.insert=0,$e===y?(J(Ve,!0),Ve.strm.avail_out===0?le:_e):Ve.last_lit&&(J(Ve,!1),Ve.strm.avail_out===0)?N:ne})(fe,Ze):s[fe.level].func(fe,Ze);if(Ne!==le&&Ne!==_e||(fe.status=666),Ne===N||Ne===le)return z.avail_out===0&&(fe.last_flush=-1),x;if(Ne===ne&&(Ze===1?l._tr_align(fe):Ze!==5&&(l._tr_stored_block(fe,0,0,!1),Ze===3&&(re(fe.head),fe.lookahead===0&&(fe.strstart=0,fe.block_start=0,fe.insert=0))),Q(z),z.avail_out===0))return fe.last_flush=-1,x}return Ze!==y?x:fe.wrap<=0?1:(fe.wrap===2?(je(fe,255&z.adler),je(fe,z.adler>>8&255),je(fe,z.adler>>16&255),je(fe,z.adler>>24&255),je(fe,255&z.total_in),je(fe,z.total_in>>8&255),je(fe,z.total_in>>16&255),je(fe,z.total_in>>24&255)):(Qe(fe,z.adler>>>16),Qe(fe,65535&z.adler)),Q(z),0<fe.wrap&&(fe.wrap=-fe.wrap),fe.pending!==0?x:1)},n.deflateEnd=function(z){var Ze;return z&&z.state?(Ze=z.state.status)!==X&&Ze!==69&&Ze!==73&&Ze!==91&&Ze!==103&&Ze!==de&&Ze!==666?ke(z,C):(z.state=null,Ze===de?ke(z,-3):x):C},n.deflateSetDictionary=function(z,Ze){var Re,fe,ie,Ce,Ee,Ne,Ve,$e,ht=Ze.length;if(!z||!z.state||(Ce=(Re=z.state).wrap)===2||Ce===1&&Re.status!==X||Re.lookahead)return C;for(Ce===1&&(z.adler=u(z.adler,Ze,ht,0)),Re.wrap=0,ht>=Re.w_size&&(Ce===0&&(re(Re.head),Re.strstart=0,Re.block_start=0,Re.insert=0),$e=new r.Buf8(Re.w_size),r.arraySet($e,Ze,ht-Re.w_size,Re.w_size,0),Ze=$e,ht=Re.w_size),Ee=z.avail_in,Ne=z.next_in,Ve=z.input,z.avail_in=ht,z.next_in=0,z.input=Ze,kt(Re);Re.lookahead>=te;){for(fe=Re.strstart,ie=Re.lookahead-(te-1);Re.ins_h=(Re.ins_h<<Re.hash_shift^Re.window[fe+te-1])&Re.hash_mask,Re.prev[fe&Re.w_mask]=Re.head[Re.ins_h],Re.head[Re.ins_h]=fe,fe++,--ie;);Re.strstart=fe,Re.lookahead=te-1,kt(Re)}return Re.strstart+=Re.lookahead,Re.block_start=Re.strstart,Re.insert=Re.lookahead,Re.lookahead=0,Re.match_length=Re.prev_length=te-1,Re.match_available=0,z.next_in=Ne,z.input=Ve,z.avail_in=Ee,Re.wrap=Ce,x},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,n){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,n){i.exports=function(s,r){var l,u,d,h,g,y,x,C,I,A,E,L,G,F,B,Z,Y,$,te,ce,me,X,de,N,ne;l=s.state,u=s.next_in,N=s.input,d=u+(s.avail_in-5),h=s.next_out,ne=s.output,g=h-(r-s.avail_out),y=h+(s.avail_out-257),x=l.dmax,C=l.wsize,I=l.whave,A=l.wnext,E=l.window,L=l.hold,G=l.bits,F=l.lencode,B=l.distcode,Z=(1<<l.lenbits)-1,Y=(1<<l.distbits)-1;e:do{G<15&&(L+=N[u++]<<G,G+=8,L+=N[u++]<<G,G+=8),$=F[L&Z];t:for(;;){if(L>>>=te=$>>>24,G-=te,(te=$>>>16&255)===0)ne[h++]=65535&$;else{if(!(16&te)){if((64&te)==0){$=F[(65535&$)+(L&(1<<te)-1)];continue t}if(32&te){l.mode=12;break e}s.msg="invalid literal/length code",l.mode=30;break e}ce=65535&$,(te&=15)&&(G<te&&(L+=N[u++]<<G,G+=8),ce+=L&(1<<te)-1,L>>>=te,G-=te),G<15&&(L+=N[u++]<<G,G+=8,L+=N[u++]<<G,G+=8),$=B[L&Y];a:for(;;){if(L>>>=te=$>>>24,G-=te,!(16&(te=$>>>16&255))){if((64&te)==0){$=B[(65535&$)+(L&(1<<te)-1)];continue a}s.msg="invalid distance code",l.mode=30;break e}if(me=65535&$,G<(te&=15)&&(L+=N[u++]<<G,(G+=8)<te&&(L+=N[u++]<<G,G+=8)),x<(me+=L&(1<<te)-1)){s.msg="invalid distance too far back",l.mode=30;break e}if(L>>>=te,G-=te,(te=h-g)<me){if(I<(te=me-te)&&l.sane){s.msg="invalid distance too far back",l.mode=30;break e}if(de=E,(X=0)===A){if(X+=C-te,te<ce){for(ce-=te;ne[h++]=E[X++],--te;);X=h-me,de=ne}}else if(A<te){if(X+=C+A-te,(te-=A)<ce){for(ce-=te;ne[h++]=E[X++],--te;);if(X=0,A<ce){for(ce-=te=A;ne[h++]=E[X++],--te;);X=h-me,de=ne}}}else if(X+=A-te,te<ce){for(ce-=te;ne[h++]=E[X++],--te;);X=h-me,de=ne}for(;2<ce;)ne[h++]=de[X++],ne[h++]=de[X++],ne[h++]=de[X++],ce-=3;ce&&(ne[h++]=de[X++],1<ce&&(ne[h++]=de[X++]))}else{for(X=h-me;ne[h++]=ne[X++],ne[h++]=ne[X++],ne[h++]=ne[X++],2<(ce-=3););ce&&(ne[h++]=ne[X++],1<ce&&(ne[h++]=ne[X++]))}break}}break}}while(u<d&&h<y);u-=ce=G>>3,L&=(1<<(G-=ce<<3))-1,s.next_in=u,s.next_out=h,s.avail_in=u<d?d-u+5:5-(u-d),s.avail_out=h<y?y-h+257:257-(h-y),l.hold=L,l.bits=G}},{}],49:[function(t,i,n){var s=t("../utils/common"),r=t("./adler32"),l=t("./crc32"),u=t("./inffast"),d=t("./inftrees"),h=1,g=2,y=0,x=-2,C=1,I=852,A=592;function E(X){return(X>>>24&255)+(X>>>8&65280)+((65280&X)<<8)+((255&X)<<24)}function L(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function G(X){var de;return X&&X.state?(de=X.state,X.total_in=X.total_out=de.total=0,X.msg="",de.wrap&&(X.adler=1&de.wrap),de.mode=C,de.last=0,de.havedict=0,de.dmax=32768,de.head=null,de.hold=0,de.bits=0,de.lencode=de.lendyn=new s.Buf32(I),de.distcode=de.distdyn=new s.Buf32(A),de.sane=1,de.back=-1,y):x}function F(X){var de;return X&&X.state?((de=X.state).wsize=0,de.whave=0,de.wnext=0,G(X)):x}function B(X,de){var N,ne;return X&&X.state?(ne=X.state,de<0?(N=0,de=-de):(N=1+(de>>4),de<48&&(de&=15)),de&&(de<8||15<de)?x:(ne.window!==null&&ne.wbits!==de&&(ne.window=null),ne.wrap=N,ne.wbits=de,F(X))):x}function Z(X,de){var N,ne;return X?(ne=new L,(X.state=ne).window=null,(N=B(X,de))!==y&&(X.state=null),N):x}var Y,$,te=!0;function ce(X){if(te){var de;for(Y=new s.Buf32(512),$=new s.Buf32(32),de=0;de<144;)X.lens[de++]=8;for(;de<256;)X.lens[de++]=9;for(;de<280;)X.lens[de++]=7;for(;de<288;)X.lens[de++]=8;for(d(h,X.lens,0,288,Y,0,X.work,{bits:9}),de=0;de<32;)X.lens[de++]=5;d(g,X.lens,0,32,$,0,X.work,{bits:5}),te=!1}X.lencode=Y,X.lenbits=9,X.distcode=$,X.distbits=5}function me(X,de,N,ne){var le,_e=X.state;return _e.window===null&&(_e.wsize=1<<_e.wbits,_e.wnext=0,_e.whave=0,_e.window=new s.Buf8(_e.wsize)),ne>=_e.wsize?(s.arraySet(_e.window,de,N-_e.wsize,_e.wsize,0),_e.wnext=0,_e.whave=_e.wsize):(ne<(le=_e.wsize-_e.wnext)&&(le=ne),s.arraySet(_e.window,de,N-ne,le,_e.wnext),(ne-=le)?(s.arraySet(_e.window,de,N-ne,ne,0),_e.wnext=ne,_e.whave=_e.wsize):(_e.wnext+=le,_e.wnext===_e.wsize&&(_e.wnext=0),_e.whave<_e.wsize&&(_e.whave+=le))),0}n.inflateReset=F,n.inflateReset2=B,n.inflateResetKeep=G,n.inflateInit=function(X){return Z(X,15)},n.inflateInit2=Z,n.inflate=function(X,de){var N,ne,le,_e,ke,Ie,re,Q,J,je,Qe,Je,kt,Pt,zt,Nt,ga,ta,Fe,De,z,Ze,Re,fe,ie=0,Ce=new s.Buf8(4),Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!X||!X.state||!X.output||!X.input&&X.avail_in!==0)return x;(N=X.state).mode===12&&(N.mode=13),ke=X.next_out,le=X.output,re=X.avail_out,_e=X.next_in,ne=X.input,Ie=X.avail_in,Q=N.hold,J=N.bits,je=Ie,Qe=re,Ze=y;e:for(;;)switch(N.mode){case C:if(N.wrap===0){N.mode=13;break}for(;J<16;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}if(2&N.wrap&&Q===35615){Ce[N.check=0]=255&Q,Ce[1]=Q>>>8&255,N.check=l(N.check,Ce,2,0),J=Q=0,N.mode=2;break}if(N.flags=0,N.head&&(N.head.done=!1),!(1&N.wrap)||(((255&Q)<<8)+(Q>>8))%31){X.msg="incorrect header check",N.mode=30;break}if((15&Q)!=8){X.msg="unknown compression method",N.mode=30;break}if(J-=4,z=8+(15&(Q>>>=4)),N.wbits===0)N.wbits=z;else if(z>N.wbits){X.msg="invalid window size",N.mode=30;break}N.dmax=1<<z,X.adler=N.check=1,N.mode=512&Q?10:12,J=Q=0;break;case 2:for(;J<16;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}if(N.flags=Q,(255&N.flags)!=8){X.msg="unknown compression method",N.mode=30;break}if(57344&N.flags){X.msg="unknown header flags set",N.mode=30;break}N.head&&(N.head.text=Q>>8&1),512&N.flags&&(Ce[0]=255&Q,Ce[1]=Q>>>8&255,N.check=l(N.check,Ce,2,0)),J=Q=0,N.mode=3;case 3:for(;J<32;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}N.head&&(N.head.time=Q),512&N.flags&&(Ce[0]=255&Q,Ce[1]=Q>>>8&255,Ce[2]=Q>>>16&255,Ce[3]=Q>>>24&255,N.check=l(N.check,Ce,4,0)),J=Q=0,N.mode=4;case 4:for(;J<16;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}N.head&&(N.head.xflags=255&Q,N.head.os=Q>>8),512&N.flags&&(Ce[0]=255&Q,Ce[1]=Q>>>8&255,N.check=l(N.check,Ce,2,0)),J=Q=0,N.mode=5;case 5:if(1024&N.flags){for(;J<16;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}N.length=Q,N.head&&(N.head.extra_len=Q),512&N.flags&&(Ce[0]=255&Q,Ce[1]=Q>>>8&255,N.check=l(N.check,Ce,2,0)),J=Q=0}else N.head&&(N.head.extra=null);N.mode=6;case 6:if(1024&N.flags&&(Ie<(Je=N.length)&&(Je=Ie),Je&&(N.head&&(z=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),s.arraySet(N.head.extra,ne,_e,Je,z)),512&N.flags&&(N.check=l(N.check,ne,Je,_e)),Ie-=Je,_e+=Je,N.length-=Je),N.length))break e;N.length=0,N.mode=7;case 7:if(2048&N.flags){if(Ie===0)break e;for(Je=0;z=ne[_e+Je++],N.head&&z&&N.length<65536&&(N.head.name+=String.fromCharCode(z)),z&&Je<Ie;);if(512&N.flags&&(N.check=l(N.check,ne,Je,_e)),Ie-=Je,_e+=Je,z)break e}else N.head&&(N.head.name=null);N.length=0,N.mode=8;case 8:if(4096&N.flags){if(Ie===0)break e;for(Je=0;z=ne[_e+Je++],N.head&&z&&N.length<65536&&(N.head.comment+=String.fromCharCode(z)),z&&Je<Ie;);if(512&N.flags&&(N.check=l(N.check,ne,Je,_e)),Ie-=Je,_e+=Je,z)break e}else N.head&&(N.head.comment=null);N.mode=9;case 9:if(512&N.flags){for(;J<16;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}if(Q!==(65535&N.check)){X.msg="header crc mismatch",N.mode=30;break}J=Q=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),X.adler=N.check=0,N.mode=12;break;case 10:for(;J<32;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}X.adler=N.check=E(Q),J=Q=0,N.mode=11;case 11:if(N.havedict===0)return X.next_out=ke,X.avail_out=re,X.next_in=_e,X.avail_in=Ie,N.hold=Q,N.bits=J,2;X.adler=N.check=1,N.mode=12;case 12:if(de===5||de===6)break e;case 13:if(N.last){Q>>>=7&J,J-=7&J,N.mode=27;break}for(;J<3;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}switch(N.last=1&Q,J-=1,3&(Q>>>=1)){case 0:N.mode=14;break;case 1:if(ce(N),N.mode=20,de!==6)break;Q>>>=2,J-=2;break e;case 2:N.mode=17;break;case 3:X.msg="invalid block type",N.mode=30}Q>>>=2,J-=2;break;case 14:for(Q>>>=7&J,J-=7&J;J<32;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}if((65535&Q)!=(Q>>>16^65535)){X.msg="invalid stored block lengths",N.mode=30;break}if(N.length=65535&Q,J=Q=0,N.mode=15,de===6)break e;case 15:N.mode=16;case 16:if(Je=N.length){if(Ie<Je&&(Je=Ie),re<Je&&(Je=re),Je===0)break e;s.arraySet(le,ne,_e,Je,ke),Ie-=Je,_e+=Je,re-=Je,ke+=Je,N.length-=Je;break}N.mode=12;break;case 17:for(;J<14;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}if(N.nlen=257+(31&Q),Q>>>=5,J-=5,N.ndist=1+(31&Q),Q>>>=5,J-=5,N.ncode=4+(15&Q),Q>>>=4,J-=4,286<N.nlen||30<N.ndist){X.msg="too many length or distance symbols",N.mode=30;break}N.have=0,N.mode=18;case 18:for(;N.have<N.ncode;){for(;J<3;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}N.lens[Ee[N.have++]]=7&Q,Q>>>=3,J-=3}for(;N.have<19;)N.lens[Ee[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,Re={bits:N.lenbits},Ze=d(0,N.lens,0,19,N.lencode,0,N.work,Re),N.lenbits=Re.bits,Ze){X.msg="invalid code lengths set",N.mode=30;break}N.have=0,N.mode=19;case 19:for(;N.have<N.nlen+N.ndist;){for(;Nt=(ie=N.lencode[Q&(1<<N.lenbits)-1])>>>16&255,ga=65535&ie,!((zt=ie>>>24)<=J);){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}if(ga<16)Q>>>=zt,J-=zt,N.lens[N.have++]=ga;else{if(ga===16){for(fe=zt+2;J<fe;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}if(Q>>>=zt,J-=zt,N.have===0){X.msg="invalid bit length repeat",N.mode=30;break}z=N.lens[N.have-1],Je=3+(3&Q),Q>>>=2,J-=2}else if(ga===17){for(fe=zt+3;J<fe;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}J-=zt,z=0,Je=3+(7&(Q>>>=zt)),Q>>>=3,J-=3}else{for(fe=zt+7;J<fe;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}J-=zt,z=0,Je=11+(127&(Q>>>=zt)),Q>>>=7,J-=7}if(N.have+Je>N.nlen+N.ndist){X.msg="invalid bit length repeat",N.mode=30;break}for(;Je--;)N.lens[N.have++]=z}}if(N.mode===30)break;if(N.lens[256]===0){X.msg="invalid code -- missing end-of-block",N.mode=30;break}if(N.lenbits=9,Re={bits:N.lenbits},Ze=d(h,N.lens,0,N.nlen,N.lencode,0,N.work,Re),N.lenbits=Re.bits,Ze){X.msg="invalid literal/lengths set",N.mode=30;break}if(N.distbits=6,N.distcode=N.distdyn,Re={bits:N.distbits},Ze=d(g,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,Re),N.distbits=Re.bits,Ze){X.msg="invalid distances set",N.mode=30;break}if(N.mode=20,de===6)break e;case 20:N.mode=21;case 21:if(6<=Ie&&258<=re){X.next_out=ke,X.avail_out=re,X.next_in=_e,X.avail_in=Ie,N.hold=Q,N.bits=J,u(X,Qe),ke=X.next_out,le=X.output,re=X.avail_out,_e=X.next_in,ne=X.input,Ie=X.avail_in,Q=N.hold,J=N.bits,N.mode===12&&(N.back=-1);break}for(N.back=0;Nt=(ie=N.lencode[Q&(1<<N.lenbits)-1])>>>16&255,ga=65535&ie,!((zt=ie>>>24)<=J);){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}if(Nt&&(240&Nt)==0){for(ta=zt,Fe=Nt,De=ga;Nt=(ie=N.lencode[De+((Q&(1<<ta+Fe)-1)>>ta)])>>>16&255,ga=65535&ie,!(ta+(zt=ie>>>24)<=J);){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}Q>>>=ta,J-=ta,N.back+=ta}if(Q>>>=zt,J-=zt,N.back+=zt,N.length=ga,Nt===0){N.mode=26;break}if(32&Nt){N.back=-1,N.mode=12;break}if(64&Nt){X.msg="invalid literal/length code",N.mode=30;break}N.extra=15&Nt,N.mode=22;case 22:if(N.extra){for(fe=N.extra;J<fe;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}N.length+=Q&(1<<N.extra)-1,Q>>>=N.extra,J-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=23;case 23:for(;Nt=(ie=N.distcode[Q&(1<<N.distbits)-1])>>>16&255,ga=65535&ie,!((zt=ie>>>24)<=J);){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}if((240&Nt)==0){for(ta=zt,Fe=Nt,De=ga;Nt=(ie=N.distcode[De+((Q&(1<<ta+Fe)-1)>>ta)])>>>16&255,ga=65535&ie,!(ta+(zt=ie>>>24)<=J);){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}Q>>>=ta,J-=ta,N.back+=ta}if(Q>>>=zt,J-=zt,N.back+=zt,64&Nt){X.msg="invalid distance code",N.mode=30;break}N.offset=ga,N.extra=15&Nt,N.mode=24;case 24:if(N.extra){for(fe=N.extra;J<fe;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}N.offset+=Q&(1<<N.extra)-1,Q>>>=N.extra,J-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){X.msg="invalid distance too far back",N.mode=30;break}N.mode=25;case 25:if(re===0)break e;if(Je=Qe-re,N.offset>Je){if((Je=N.offset-Je)>N.whave&&N.sane){X.msg="invalid distance too far back",N.mode=30;break}kt=Je>N.wnext?(Je-=N.wnext,N.wsize-Je):N.wnext-Je,Je>N.length&&(Je=N.length),Pt=N.window}else Pt=le,kt=ke-N.offset,Je=N.length;for(re<Je&&(Je=re),re-=Je,N.length-=Je;le[ke++]=Pt[kt++],--Je;);N.length===0&&(N.mode=21);break;case 26:if(re===0)break e;le[ke++]=N.length,re--,N.mode=21;break;case 27:if(N.wrap){for(;J<32;){if(Ie===0)break e;Ie--,Q|=ne[_e++]<<J,J+=8}if(Qe-=re,X.total_out+=Qe,N.total+=Qe,Qe&&(X.adler=N.check=N.flags?l(N.check,le,Qe,ke-Qe):r(N.check,le,Qe,ke-Qe)),Qe=re,(N.flags?Q:E(Q))!==N.check){X.msg="incorrect data check",N.mode=30;break}J=Q=0}N.mode=28;case 28:if(N.wrap&&N.flags){for(;J<32;){if(Ie===0)break e;Ie--,Q+=ne[_e++]<<J,J+=8}if(Q!==(4294967295&N.total)){X.msg="incorrect length check",N.mode=30;break}J=Q=0}N.mode=29;case 29:Ze=1;break e;case 30:Ze=-3;break e;case 31:return-4;case 32:default:return x}return X.next_out=ke,X.avail_out=re,X.next_in=_e,X.avail_in=Ie,N.hold=Q,N.bits=J,(N.wsize||Qe!==X.avail_out&&N.mode<30&&(N.mode<27||de!==4))&&me(X,X.output,X.next_out,Qe-X.avail_out)?(N.mode=31,-4):(je-=X.avail_in,Qe-=X.avail_out,X.total_in+=je,X.total_out+=Qe,N.total+=Qe,N.wrap&&Qe&&(X.adler=N.check=N.flags?l(N.check,le,Qe,X.next_out-Qe):r(N.check,le,Qe,X.next_out-Qe)),X.data_type=N.bits+(N.last?64:0)+(N.mode===12?128:0)+(N.mode===20||N.mode===15?256:0),(je==0&&Qe===0||de===4)&&Ze===y&&(Ze=-5),Ze)},n.inflateEnd=function(X){if(!X||!X.state)return x;var de=X.state;return de.window&&(de.window=null),X.state=null,y},n.inflateGetHeader=function(X,de){var N;return X&&X.state?(2&(N=X.state).wrap)==0?x:((N.head=de).done=!1,y):x},n.inflateSetDictionary=function(X,de){var N,ne=de.length;return X&&X.state?(N=X.state).wrap!==0&&N.mode!==11?x:N.mode===11&&r(1,de,ne,0)!==N.check?-3:me(X,de,ne,ne)?(N.mode=31,-4):(N.havedict=1,y):x},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,n){var s=t("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(h,g,y,x,C,I,A,E){var L,G,F,B,Z,Y,$,te,ce,me=E.bits,X=0,de=0,N=0,ne=0,le=0,_e=0,ke=0,Ie=0,re=0,Q=0,J=null,je=0,Qe=new s.Buf16(16),Je=new s.Buf16(16),kt=null,Pt=0;for(X=0;X<=15;X++)Qe[X]=0;for(de=0;de<x;de++)Qe[g[y+de]]++;for(le=me,ne=15;1<=ne&&Qe[ne]===0;ne--);if(ne<le&&(le=ne),ne===0)return C[I++]=20971520,C[I++]=20971520,E.bits=1,0;for(N=1;N<ne&&Qe[N]===0;N++);for(le<N&&(le=N),X=Ie=1;X<=15;X++)if(Ie<<=1,(Ie-=Qe[X])<0)return-1;if(0<Ie&&(h===0||ne!==1))return-1;for(Je[1]=0,X=1;X<15;X++)Je[X+1]=Je[X]+Qe[X];for(de=0;de<x;de++)g[y+de]!==0&&(A[Je[g[y+de]]++]=de);if(Y=h===0?(J=kt=A,19):h===1?(J=r,je-=257,kt=l,Pt-=257,256):(J=u,kt=d,-1),X=N,Z=I,ke=de=Q=0,F=-1,B=(re=1<<(_e=le))-1,h===1&&852<re||h===2&&592<re)return 1;for(;;){for($=X-ke,ce=A[de]<Y?(te=0,A[de]):A[de]>Y?(te=kt[Pt+A[de]],J[je+A[de]]):(te=96,0),L=1<<X-ke,N=G=1<<_e;C[Z+(Q>>ke)+(G-=L)]=$<<24|te<<16|ce|0,G!==0;);for(L=1<<X-1;Q&L;)L>>=1;if(L!==0?(Q&=L-1,Q+=L):Q=0,de++,--Qe[X]==0){if(X===ne)break;X=g[y+A[de]]}if(le<X&&(Q&B)!==F){for(ke===0&&(ke=le),Z+=N,Ie=1<<(_e=X-ke);_e+ke<ne&&!((Ie-=Qe[_e+ke])<=0);)_e++,Ie<<=1;if(re+=1<<_e,h===1&&852<re||h===2&&592<re)return 1;C[F=Q&B]=le<<24|_e<<16|Z-I|0}}return Q!==0&&(C[Z+Q]=X-ke<<24|64<<16|0),E.bits=le,0}},{"../utils/common":41}],51:[function(t,i,n){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,n){var s=t("../utils/common"),r=0,l=1;function u(ie){for(var Ce=ie.length;0<=--Ce;)ie[Ce]=0}var d=0,h=29,g=256,y=g+1+h,x=30,C=19,I=2*y+1,A=15,E=16,L=7,G=256,F=16,B=17,Z=18,Y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],me=new Array(2*(y+2));u(me);var X=new Array(2*x);u(X);var de=new Array(512);u(de);var N=new Array(256);u(N);var ne=new Array(h);u(ne);var le,_e,ke,Ie=new Array(x);function re(ie,Ce,Ee,Ne,Ve){this.static_tree=ie,this.extra_bits=Ce,this.extra_base=Ee,this.elems=Ne,this.max_length=Ve,this.has_stree=ie&&ie.length}function Q(ie,Ce){this.dyn_tree=ie,this.max_code=0,this.stat_desc=Ce}function J(ie){return ie<256?de[ie]:de[256+(ie>>>7)]}function je(ie,Ce){ie.pending_buf[ie.pending++]=255&Ce,ie.pending_buf[ie.pending++]=Ce>>>8&255}function Qe(ie,Ce,Ee){ie.bi_valid>E-Ee?(ie.bi_buf|=Ce<<ie.bi_valid&65535,je(ie,ie.bi_buf),ie.bi_buf=Ce>>E-ie.bi_valid,ie.bi_valid+=Ee-E):(ie.bi_buf|=Ce<<ie.bi_valid&65535,ie.bi_valid+=Ee)}function Je(ie,Ce,Ee){Qe(ie,Ee[2*Ce],Ee[2*Ce+1])}function kt(ie,Ce){for(var Ee=0;Ee|=1&ie,ie>>>=1,Ee<<=1,0<--Ce;);return Ee>>>1}function Pt(ie,Ce,Ee){var Ne,Ve,$e=new Array(A+1),ht=0;for(Ne=1;Ne<=A;Ne++)$e[Ne]=ht=ht+Ee[Ne-1]<<1;for(Ve=0;Ve<=Ce;Ve++){var _t=ie[2*Ve+1];_t!==0&&(ie[2*Ve]=kt($e[_t]++,_t))}}function zt(ie){var Ce;for(Ce=0;Ce<y;Ce++)ie.dyn_ltree[2*Ce]=0;for(Ce=0;Ce<x;Ce++)ie.dyn_dtree[2*Ce]=0;for(Ce=0;Ce<C;Ce++)ie.bl_tree[2*Ce]=0;ie.dyn_ltree[2*G]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function Nt(ie){8<ie.bi_valid?je(ie,ie.bi_buf):0<ie.bi_valid&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function ga(ie,Ce,Ee,Ne){var Ve=2*Ce,$e=2*Ee;return ie[Ve]<ie[$e]||ie[Ve]===ie[$e]&&Ne[Ce]<=Ne[Ee]}function ta(ie,Ce,Ee){for(var Ne=ie.heap[Ee],Ve=Ee<<1;Ve<=ie.heap_len&&(Ve<ie.heap_len&&ga(Ce,ie.heap[Ve+1],ie.heap[Ve],ie.depth)&&Ve++,!ga(Ce,Ne,ie.heap[Ve],ie.depth));)ie.heap[Ee]=ie.heap[Ve],Ee=Ve,Ve<<=1;ie.heap[Ee]=Ne}function Fe(ie,Ce,Ee){var Ne,Ve,$e,ht,_t=0;if(ie.last_lit!==0)for(;Ne=ie.pending_buf[ie.d_buf+2*_t]<<8|ie.pending_buf[ie.d_buf+2*_t+1],Ve=ie.pending_buf[ie.l_buf+_t],_t++,Ne===0?Je(ie,Ve,Ce):(Je(ie,($e=N[Ve])+g+1,Ce),(ht=Y[$e])!==0&&Qe(ie,Ve-=ne[$e],ht),Je(ie,$e=J(--Ne),Ee),(ht=$[$e])!==0&&Qe(ie,Ne-=Ie[$e],ht)),_t<ie.last_lit;);Je(ie,G,Ce)}function De(ie,Ce){var Ee,Ne,Ve,$e=Ce.dyn_tree,ht=Ce.stat_desc.static_tree,_t=Ce.stat_desc.has_stree,Et=Ce.stat_desc.elems,ca=-1;for(ie.heap_len=0,ie.heap_max=I,Ee=0;Ee<Et;Ee++)$e[2*Ee]!==0?(ie.heap[++ie.heap_len]=ca=Ee,ie.depth[Ee]=0):$e[2*Ee+1]=0;for(;ie.heap_len<2;)$e[2*(Ve=ie.heap[++ie.heap_len]=ca<2?++ca:0)]=1,ie.depth[Ve]=0,ie.opt_len--,_t&&(ie.static_len-=ht[2*Ve+1]);for(Ce.max_code=ca,Ee=ie.heap_len>>1;1<=Ee;Ee--)ta(ie,$e,Ee);for(Ve=Et;Ee=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],ta(ie,$e,1),Ne=ie.heap[1],ie.heap[--ie.heap_max]=Ee,ie.heap[--ie.heap_max]=Ne,$e[2*Ve]=$e[2*Ee]+$e[2*Ne],ie.depth[Ve]=(ie.depth[Ee]>=ie.depth[Ne]?ie.depth[Ee]:ie.depth[Ne])+1,$e[2*Ee+1]=$e[2*Ne+1]=Ve,ie.heap[1]=Ve++,ta(ie,$e,1),2<=ie.heap_len;);ie.heap[--ie.heap_max]=ie.heap[1],(function(ua,yi){var Xi,Ri,En,_i,nr,Ci,Ti=yi.dyn_tree,Dr=yi.max_code,vs=yi.stat_desc.static_tree,To=yi.stat_desc.has_stree,gr=yi.stat_desc.extra_bits,Zn=yi.stat_desc.extra_base,zn=yi.stat_desc.max_length,pr=0;for(_i=0;_i<=A;_i++)ua.bl_count[_i]=0;for(Ti[2*ua.heap[ua.heap_max]+1]=0,Xi=ua.heap_max+1;Xi<I;Xi++)zn<(_i=Ti[2*Ti[2*(Ri=ua.heap[Xi])+1]+1]+1)&&(_i=zn,pr++),Ti[2*Ri+1]=_i,Dr<Ri||(ua.bl_count[_i]++,nr=0,Zn<=Ri&&(nr=gr[Ri-Zn]),Ci=Ti[2*Ri],ua.opt_len+=Ci*(_i+nr),To&&(ua.static_len+=Ci*(vs[2*Ri+1]+nr)));if(pr!==0){do{for(_i=zn-1;ua.bl_count[_i]===0;)_i--;ua.bl_count[_i]--,ua.bl_count[_i+1]+=2,ua.bl_count[zn]--,pr-=2}while(0<pr);for(_i=zn;_i!==0;_i--)for(Ri=ua.bl_count[_i];Ri!==0;)Dr<(En=ua.heap[--Xi])||(Ti[2*En+1]!==_i&&(ua.opt_len+=(_i-Ti[2*En+1])*Ti[2*En],Ti[2*En+1]=_i),Ri--)}})(ie,Ce),Pt($e,ca,ie.bl_count)}function z(ie,Ce,Ee){var Ne,Ve,$e=-1,ht=Ce[1],_t=0,Et=7,ca=4;for(ht===0&&(Et=138,ca=3),Ce[2*(Ee+1)+1]=65535,Ne=0;Ne<=Ee;Ne++)Ve=ht,ht=Ce[2*(Ne+1)+1],++_t<Et&&Ve===ht||(_t<ca?ie.bl_tree[2*Ve]+=_t:Ve!==0?(Ve!==$e&&ie.bl_tree[2*Ve]++,ie.bl_tree[2*F]++):_t<=10?ie.bl_tree[2*B]++:ie.bl_tree[2*Z]++,$e=Ve,ca=(_t=0)===ht?(Et=138,3):Ve===ht?(Et=6,3):(Et=7,4))}function Ze(ie,Ce,Ee){var Ne,Ve,$e=-1,ht=Ce[1],_t=0,Et=7,ca=4;for(ht===0&&(Et=138,ca=3),Ne=0;Ne<=Ee;Ne++)if(Ve=ht,ht=Ce[2*(Ne+1)+1],!(++_t<Et&&Ve===ht)){if(_t<ca)for(;Je(ie,Ve,ie.bl_tree),--_t!=0;);else Ve!==0?(Ve!==$e&&(Je(ie,Ve,ie.bl_tree),_t--),Je(ie,F,ie.bl_tree),Qe(ie,_t-3,2)):_t<=10?(Je(ie,B,ie.bl_tree),Qe(ie,_t-3,3)):(Je(ie,Z,ie.bl_tree),Qe(ie,_t-11,7));$e=Ve,ca=(_t=0)===ht?(Et=138,3):Ve===ht?(Et=6,3):(Et=7,4)}}u(Ie);var Re=!1;function fe(ie,Ce,Ee,Ne){Qe(ie,(d<<1)+(Ne?1:0),3),(function(Ve,$e,ht,_t){Nt(Ve),je(Ve,ht),je(Ve,~ht),s.arraySet(Ve.pending_buf,Ve.window,$e,ht,Ve.pending),Ve.pending+=ht})(ie,Ce,Ee)}n._tr_init=function(ie){Re||((function(){var Ce,Ee,Ne,Ve,$e,ht=new Array(A+1);for(Ve=Ne=0;Ve<h-1;Ve++)for(ne[Ve]=Ne,Ce=0;Ce<1<<Y[Ve];Ce++)N[Ne++]=Ve;for(N[Ne-1]=Ve,Ve=$e=0;Ve<16;Ve++)for(Ie[Ve]=$e,Ce=0;Ce<1<<$[Ve];Ce++)de[$e++]=Ve;for($e>>=7;Ve<x;Ve++)for(Ie[Ve]=$e<<7,Ce=0;Ce<1<<$[Ve]-7;Ce++)de[256+$e++]=Ve;for(Ee=0;Ee<=A;Ee++)ht[Ee]=0;for(Ce=0;Ce<=143;)me[2*Ce+1]=8,Ce++,ht[8]++;for(;Ce<=255;)me[2*Ce+1]=9,Ce++,ht[9]++;for(;Ce<=279;)me[2*Ce+1]=7,Ce++,ht[7]++;for(;Ce<=287;)me[2*Ce+1]=8,Ce++,ht[8]++;for(Pt(me,y+1,ht),Ce=0;Ce<x;Ce++)X[2*Ce+1]=5,X[2*Ce]=kt(Ce,5);le=new re(me,Y,g+1,y,A),_e=new re(X,$,0,x,A),ke=new re(new Array(0),te,0,C,L)})(),Re=!0),ie.l_desc=new Q(ie.dyn_ltree,le),ie.d_desc=new Q(ie.dyn_dtree,_e),ie.bl_desc=new Q(ie.bl_tree,ke),ie.bi_buf=0,ie.bi_valid=0,zt(ie)},n._tr_stored_block=fe,n._tr_flush_block=function(ie,Ce,Ee,Ne){var Ve,$e,ht=0;0<ie.level?(ie.strm.data_type===2&&(ie.strm.data_type=(function(_t){var Et,ca=4093624447;for(Et=0;Et<=31;Et++,ca>>>=1)if(1&ca&&_t.dyn_ltree[2*Et]!==0)return r;if(_t.dyn_ltree[18]!==0||_t.dyn_ltree[20]!==0||_t.dyn_ltree[26]!==0)return l;for(Et=32;Et<g;Et++)if(_t.dyn_ltree[2*Et]!==0)return l;return r})(ie)),De(ie,ie.l_desc),De(ie,ie.d_desc),ht=(function(_t){var Et;for(z(_t,_t.dyn_ltree,_t.l_desc.max_code),z(_t,_t.dyn_dtree,_t.d_desc.max_code),De(_t,_t.bl_desc),Et=C-1;3<=Et&&_t.bl_tree[2*ce[Et]+1]===0;Et--);return _t.opt_len+=3*(Et+1)+5+5+4,Et})(ie),Ve=ie.opt_len+3+7>>>3,($e=ie.static_len+3+7>>>3)<=Ve&&(Ve=$e)):Ve=$e=Ee+5,Ee+4<=Ve&&Ce!==-1?fe(ie,Ce,Ee,Ne):ie.strategy===4||$e===Ve?(Qe(ie,2+(Ne?1:0),3),Fe(ie,me,X)):(Qe(ie,4+(Ne?1:0),3),(function(_t,Et,ca,ua){var yi;for(Qe(_t,Et-257,5),Qe(_t,ca-1,5),Qe(_t,ua-4,4),yi=0;yi<ua;yi++)Qe(_t,_t.bl_tree[2*ce[yi]+1],3);Ze(_t,_t.dyn_ltree,Et-1),Ze(_t,_t.dyn_dtree,ca-1)})(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,ht+1),Fe(ie,ie.dyn_ltree,ie.dyn_dtree)),zt(ie),Ne&&Nt(ie)},n._tr_tally=function(ie,Ce,Ee){return ie.pending_buf[ie.d_buf+2*ie.last_lit]=Ce>>>8&255,ie.pending_buf[ie.d_buf+2*ie.last_lit+1]=255&Ce,ie.pending_buf[ie.l_buf+ie.last_lit]=255&Ee,ie.last_lit++,Ce===0?ie.dyn_ltree[2*Ee]++:(ie.matches++,Ce--,ie.dyn_ltree[2*(N[Ee]+g+1)]++,ie.dyn_dtree[2*J(Ce)]++),ie.last_lit===ie.lit_bufsize-1},n._tr_align=function(ie){Qe(ie,2,3),Je(ie,G,me),(function(Ce){Ce.bi_valid===16?(je(Ce,Ce.bi_buf),Ce.bi_buf=0,Ce.bi_valid=0):8<=Ce.bi_valid&&(Ce.pending_buf[Ce.pending++]=255&Ce.bi_buf,Ce.bi_buf>>=8,Ce.bi_valid-=8)})(ie)}},{"../utils/common":41}],53:[function(t,i,n){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,n){(function(s){(function(r,l){if(!r.setImmediate){var u,d,h,g,y=1,x={},C=!1,I=r.document,A=Object.getPrototypeOf&&Object.getPrototypeOf(r);A=A&&A.setTimeout?A:r,u={}.toString.call(r.process)==="[object process]"?function(F){process.nextTick(function(){L(F)})}:(function(){if(r.postMessage&&!r.importScripts){var F=!0,B=r.onmessage;return r.onmessage=function(){F=!1},r.postMessage("","*"),r.onmessage=B,F}})()?(g="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",G,!1):r.attachEvent("onmessage",G),function(F){r.postMessage(g+F,"*")}):r.MessageChannel?((h=new MessageChannel).port1.onmessage=function(F){L(F.data)},function(F){h.port2.postMessage(F)}):I&&"onreadystatechange"in I.createElement("script")?(d=I.documentElement,function(F){var B=I.createElement("script");B.onreadystatechange=function(){L(F),B.onreadystatechange=null,d.removeChild(B),B=null},d.appendChild(B)}):function(F){setTimeout(L,0,F)},A.setImmediate=function(F){typeof F!="function"&&(F=new Function(""+F));for(var B=new Array(arguments.length-1),Z=0;Z<B.length;Z++)B[Z]=arguments[Z+1];var Y={callback:F,args:B};return x[y]=Y,u(y),y++},A.clearImmediate=E}function E(F){delete x[F]}function L(F){if(C)setTimeout(L,0,F);else{var B=x[F];if(B){C=!0;try{(function(Z){var Y=Z.callback,$=Z.args;switch($.length){case 0:Y();break;case 1:Y($[0]);break;case 2:Y($[0],$[1]);break;case 3:Y($[0],$[1],$[2]);break;default:Y.apply(l,$)}})(B)}finally{E(F),C=!1}}}}function G(F){F.source===r&&typeof F.data=="string"&&F.data.indexOf(g)===0&&L(+F.data.slice(g.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof $h<"u"?$h:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(sA)),sA.exports}var hSe=dSe();const _Se=cG(hSe);function mSe(a,e){const i=new fN({extractStyles:!0,showPointNames:!0}).readFeatures(a,{dataProjection:Wu,featureProjection:e.getView().getProjection()});return bB(i)}function fSe(a,e){const i=new cN().readFeatures(a,{dataProjection:Wu,featureProjection:e.getView().getProjection()});return bB(i)}function $2(a,e){const t=a.clone();return t.setGeometry(e),t}function bB(a){const e=[];return a.forEach(t=>{const i=t.getGeometry();switch(i?.getType()){case"MultiPolygon":{const n=i.getPolygons();e.push(...n.map(s=>$2(t,s)));break}case"MultiLineString":{const n=i.getLineStrings();e.push(...n.map(s=>$2(t,s)));break}case"MultiPoint":{const n=i.getPoints();e.push(...n.map(s=>$2(t,s)));break}case"GeometryCollection":{const n=i;e.push(...n.getGeometries().map(s=>$2(t,s)));break}default:e.push(t);break}}),e}function gSe(a){return a.split(".").pop()?.toLowerCase()}function pSe(a){return a!==void 0&&["gpx","kml","kmz"].includes(a)}function ySe(a,e){return new Promise((t,i)=>{const n=a.name,s=gSe(n);if(!pSe(s)){i(new Error(`Invalid file extension: ${s}`));return}const r=new FileReader;r.onload=async l=>{const u=l.target?.result;if(!u){i(new Error("Failed to read file content"));return}try{let d;s==="kmz"?d=await vSe(u,e):s==="kml"?d=vB(u,e):d=bSe(u,e),t({content:u,fileName:n,extension:s,features:d})}catch(d){i(d)}},r.onerror=()=>{i(r.error||new Error("Failed to read file"))},s==="kmz"?r.readAsArrayBuffer(a):r.readAsText(a)})}function vB(a,e){return mSe(a,e)}function bSe(a,e){return fSe(a,e)}async function vSe(a,e){const i=await new _Se().loadAsync(a),n=Object.keys(i.files).find(r=>r.toLowerCase().endsWith(".kml"));if(!n)throw new Error("No KML file found in KMZ archive");const s=await i.files[n].async("string");return vB(s,e)}const xSe={class:"flex items-center"},wSe=["title","aria-label"],CSe=["aria-label"],ISe=["aria-label"],SSe={key:1,class:"italic"},ASe={key:0,class:"lux-alert-warning p-4 mb-2"},TSe={class:"font-bold"},ESe=["innerHTML"],MSe={class:"flex gap-2 mt-2 justify-end"},LSe={class:"flex items-center text-white mr-0.5"},RSe={class:"text-sm italic grow"},kSe=["aria-label"],PSe=["aria-label"],GSe=["aria-label"],WSe=rt({__name:"my-map-info",props:{myMap:{}},emits:["close","new","open","copy","edit","share","delete","clear","resetLayers","saveLayers","draw:mergelines","draw:cutlines"],setup(a,{emit:e}){const{t}=Ct(),i=e,n=a,s=qa().getOlMap(),{generateDrawnFeature:r}=rI(),{myMapLayersChanged:l}=xt(ri()),u=$n(),{drawnFeaturesMyMaps:d,clipLineActive:h}=xt(u),g=Ye(null),y=Ye(null),x=St(()=>[{label:"Crer une nouvelle carte",action:()=>i("new")},{label:"Ouvrir une carte existante",action:()=>i("open")},{label:"Crer une copie",action:()=>i("copy",n.myMap)},{label:"Partager la carte",action:()=>i("share",n.myMap),separator:!0},{label:"Supprimer la carte",action:()=>i("delete",n.myMap)},{label:"Supprimer tous les lements de la carte",action:()=>i("clear",n.myMap)},{label:"Fusionner des lignes",action:()=>i("draw:mergelines",n.myMap)},{label:h.value?"Dsactiver mode couper une ligne":"Couper une ligne",action:()=>i("draw:cutlines",n.myMap),separator:!0},{label:"Fermer",action:()=>i("close"),separator:!0},{label:"Exporter un GPX",action:()=>C("gpx")},{label:"Exporter un KML",action:()=>C("kml")},{label:"Exporter un Shapefile",action:()=>C("shapefile")},{label:"Importer un fichier GPX/KML/KMZ",action:()=>I()}]);Rt(y,async A=>{if(A)try{const E=await ySe(A,s),{features:L}=E;L.forEach(G=>{const F=r(G);u.addDrawnFeatureToCollection(F),F.fit()})}catch(E){console.error("Error importing file:",E)}finally{y.value=null}});function C(A){fI.export(s,A,d.value,n.myMap.title,!0)}function I(){g.value?.click()}return(A,E)=>(U(),se(Tt,null,[P("div",xSe,[P("h2",{"data-cy":"mymap-title",class:"text-white font-bold grow max-w-full text-ellipsis overflow-hidden text-nowrap hover:cursor-pointer",role:"button",title:a.myMap.title,"aria-label":R(t)("diter le titre de la carte")+" : "+a.myMap.title,tabindex:"0",onClick:E[0]||(E[0]=L=>i("edit",a.myMap)),onKeydown:[E[1]||(E[1]=$r(L=>i("edit",a.myMap),["enter"])),E[2]||(E[2]=$r(_r(L=>i("edit",a.myMap),["prevent"]),["space"]))]},K(a.myMap.title),41,wSe),P("button",{onClick:E[3]||(E[3]=L=>i("close")),class:"text-slate-400 hover:text-slate-700 text-2xl","aria-label":R(t)("Close")},[...E[10]||(E[10]=[P("span",{"aria-hidden":"true"},"",-1)])],8,CSe)]),P("p",{"data-cy":"mymap-description",class:"text-white mb-2 hover:cursor-pointer",role:"button","aria-label":R(t)("diter la description de la carte"),tabindex:"0",onClick:E[4]||(E[4]=L=>i("edit",a.myMap)),onKeydown:[E[5]||(E[5]=$r(L=>i("edit",a.myMap),["enter"])),E[6]||(E[6]=$r(_r(L=>i("edit",a.myMap),["prevent"]),["space"]))]},[a.myMap.description?(U(),se(Tt,{key:0},[Dt(K(a.myMap.description),1)],64)):(U(),se("span",SSe,K(R(t)("Aucune description")),1))],40,ISe),R(l)?(U(),se("div",ASe,[P("span",TSe,K(R(t)("Attention!")),1),E[11]||(E[11]=Dt("",-1)),P("span",{innerHTML:R(t)("Les couches slectionnes dans le catalogue sont diffrentes de celles charges avec votre carte. Voulez vous sauvegarder ces modifications dans votre carte?")},null,8,ESe),P("div",MSe,[P("button",{class:"lux-btn",onClick:E[7]||(E[7]=L=>i("resetLayers",a.myMap))},K(R(t)("Reset")),1),P("button",{class:"lux-btn",onClick:E[8]||(E[8]=L=>i("saveLayers",a.myMap))},K(R(t)("Oui")),1)])])):Ge("",!0),P("div",LSe,[P("span",RSe,[a.myMap.public?(U(),se("i",{key:0,class:"fa fa-unlock mr-1","aria-label":R(t)("Carte publique")},null,8,kSe)):(U(),se("i",{key:1,class:"fa fa-lock mr-1","aria-label":R(t)("Carte prive")},null,8,PSe)),Dt(" "+K(R(t)("Carte cre par"))+" "+K(a.myMap.user_login),1)]),P("input",{type:"file",class:"sr-only",ref_key:"fileInputRef",ref:g,id:"gpx-kml-import",accept:".gpx,.kml,.kmz","aria-label":R(t)("Importer un fichier GPX/KML/KMZ"),onChange:E[9]||(E[9]=L=>y.value=L.target.files?.[0]||null)},null,40,GSe),gt(OE,{"data-cy":"drawPanelMenuPopup",items:x.value,direction:"down",ariaLabel:R(t)("My Map menu")},{item:Ht(({item:L})=>[gt(FE,{item:L,onClick:L.action},{default:Ht(()=>[Dt(K(R(t)(L.label)),1)]),_:2},1032,["item","onClick"])]),default:Ht(()=>[E[12]||(E[12]=P("i",{class:"fa-solid fa-square-caret-down hover:text-tertiary"},null,-1))]),_:1},8,["items","ariaLabel"])])],64))}}),OSe={ref:"filtersWrapperDOM",class:"mt-2 mb-8 mx-2 flex flex-row gap-2 fixed"},FSe={for:"map-search-input",class:"sr-only"},NSe=["placeholder","aria-label"],BSe={for:"category-filter",class:"sr-only"},DSe={for:"owner-filter",class:"sr-only"},VSe={ref:"resultsWrapperDOM",class:"px-2 h-96 overflow-y-auto"},ZSe=["aria-label"],zSe={scope:"col",class:"py-2 text-left w-40"},USe=["aria-label"],HSe={class:"w-5 inline-block","aria-hidden":"true"},XSe={scope:"col",class:"text-left"},qSe=["aria-label"],YSe={class:"w-5 inline-block","aria-hidden":"true"},KSe={scope:"col",class:"text-left"},jSe=["aria-label"],$Se={class:"w-5 inline-block","aria-hidden":"true"},JSe={scope:"col",class:"text-left"},QSe=["aria-label"],e4e={class:"w-5 inline-block","aria-hidden":"true"},t4e={scope:"col"},a4e={class:"sr-only"},i4e=["onClick","aria-label","onKeydown"],n4e=["title"],r4e=["aria-label"],s4e=["onClick"],o4e=["onClick"],l4e=["onClick"],u4e=["onClick","aria-label"],c4e=["onClick","aria-label"],d4e={key:0},h4e={colspan:"6",class:"pt-2 border-t-[1px] italic",role:"status"},_4e={key:1},m4e={colspan:"6",class:"pt-2 border-t-[1px] italic",role:"status","aria-live":"polite","aria-busy":"true"},f4e={class:"flex flex-row justify-end gap-2"},g4e=rt({__name:"my-maps-open-map-list",props:{maps:{},isLoadingMyMaps:{type:Boolean}},emits:["cancel","select","delete"],setup(a,{emit:e}){const t=e,i=a,{t:n}=Ct(),{isOffLine:s}=xt(ri()),r=Ye(""),l=Ye(""),u=St(()=>[{label:n("Filter results by category"),value:""}].concat([...new Set(i.maps.map(G=>G.category))].map(G=>({label:G,value:G})))),d=Ye(""),h=St(()=>[{label:n("Filter results by username"),value:""}].concat([...new Set(i.maps.map(G=>G.owner))].map(G=>({label:G,value:G})))),g=Ye(void 0),y=Ye(!0),x=St(()=>i.isLoadingMyMaps?[]:i.maps.filter(E).sort((G,F)=>L(G,F,g.value,y.value))),C=b1("filtersWrapperDOM"),I=b1("resultsWrapperDOM");fn(()=>{const G=C.value?.offsetHeight;G&&I.value&&(I.value.style.marginTop=G+32+"px"),C.value&&I.value&&(C.value.style.width=I.value.offsetWidth+"px",C.value.style.maxWidth=I.value.offsetWidth+"px")});function A(G){console.log("TODO",G)}function E(G){const F=r.value?G.title.toLowerCase().includes(r.value.toLowerCase()):!0,B=l.value?G.category.toLowerCase()===l.value.toLowerCase():!0,Z=d.value?G.owner.toLowerCase()===d.value.toLowerCase():!0;return F&&B&&Z}function L(G,F,B,Z){const Y=(Z?G[B]:F[B])||"",$=(Z?F[B]:G[B])||"";return Y<$?-1:Y>$?1:0}return(G,F)=>(U(),Lt(E_,{title:R(n)("Ouvrir une carte"),onClose:F[10]||(F[10]=B=>t("cancel"))},{content:Ht(()=>[P("div",OSe,[P("div",null,[P("label",FSe,K(R(n)("Search Maps")),1),Sa(P("input",{id:"map-search-input",placeholder:R(n)("Search Maps"),class:"lux-input",type:"text","onUpdate:modelValue":F[0]||(F[0]=B=>r.value=B),"aria-label":R(n)("Search Maps")},null,8,NSe),[[Vn,r.value]])]),P("div",null,[P("label",BSe,K(R(n)("Filter results by category")),1),gt(Qm,{id:"category-filter",class:"inline-block min-w-36 w-60",options:u.value,modelValue:l.value,"onUpdate:modelValue":F[1]||(F[1]=B=>l.value=B),onChange:F[2]||(F[2]=B=>l.value=B),"aria-label":R(n)("Filter results by category")},null,8,["options","modelValue","aria-label"])]),P("div",null,[P("label",DSe,K(R(n)("Filter results by username")),1),gt(Qm,{id:"owner-filter",class:"inline-block min-w-36 w-60",options:h.value,modelValue:d.value,"onUpdate:modelValue":F[3]||(F[3]=B=>d.value=B),onChange:F[4]||(F[4]=B=>d.value=B),"aria-label":R(n)("Filter results by username")},null,8,["options","modelValue","aria-label"])])],512),F[13]||(F[13]=P("div",{class:"separator border-b-[1px] bg-white mx-2","aria-hidden":"true"},null,-1)),P("div",VSe,[P("table",{class:"w-full",role:"table","aria-label":R(n)("Liste des cartes")},[P("thead",null,[P("tr",null,[P("th",zSe,[P("button",{class:"text-left text-primary w-full text-nowrap","aria-label":R(n)("Trier par titre")+(g.value==="title"?y.value?" (croissant)":" (dcroissant)":""),onClick:F[5]||(F[5]=()=>{g.value="title",y.value=!y.value})},[Dt(K(R(n)("Titre"))+" ",1),P("span",HSe,[g.value==="title"&&!y.value?(U(),se(Tt,{key:0},[Dt("")],64)):Ge("",!0),g.value==="title"&&y.value?(U(),se(Tt,{key:1},[Dt("")],64)):Ge("",!0)])],8,USe)]),P("th",XSe,[P("button",{class:"text-left text-primary text-nowrap w-full","aria-label":R(n)("Trier par catgorie")+(g.value==="category"?y.value?" (croissant)":" (dcroissant)":""),onClick:F[6]||(F[6]=()=>{g.value="category",y.value=!y.value})},[Dt(K(R(n)("Catgorie"))+" ",1),P("span",YSe,[g.value==="category"&&!y.value?(U(),se(Tt,{key:0},[Dt("")],64)):Ge("",!0),g.value==="category"&&y.value?(U(),se(Tt,{key:1},[Dt("")],64)):Ge("",!0)])],8,qSe)]),P("th",KSe,[P("button",{class:"text-left text-primary text-nowrap w-full","aria-label":R(n)("Trier par crateur")+(g.value==="owner"?y.value?" (croissant)":" (dcroissant)":""),onClick:F[7]||(F[7]=()=>{g.value="owner",y.value=!y.value})},[Dt(K(R(n)("Crateur carte"))+" ",1),P("span",$Se,[g.value==="owner"&&!y.value?(U(),se(Tt,{key:0},[Dt("")],64)):Ge("",!0),g.value==="owner"&&y.value?(U(),se(Tt,{key:1},[Dt("")],64)):Ge("",!0)])],8,jSe)]),P("th",JSe,[P("button",{class:"text-left text-primary text-nowrap w-full","aria-label":R(n)("Trier par date de mise  jour")+(g.value==="last_feature_update"?y.value?" (croissant)":" (dcroissant)":""),onClick:F[8]||(F[8]=()=>{g.value="last_feature_update",y.value=!y.value})},[Dt(K(R(n)("Dernire Actualisation"))+" ",1),P("span",e4e,[g.value==="last_feature_update"&&!y.value?(U(),se(Tt,{key:0},[Dt("")],64)):Ge("",!0),g.value==="last_feature_update"&&y.value?(U(),se(Tt,{key:1},[Dt("")],64)):Ge("",!0)])],8,QSe)]),P("th",t4e,[P("span",a4e,K(R(n)("Actions")),1)])])]),P("tbody",null,[(U(!0),se(Tt,null,gi(x.value,B=>(U(),se("tr",{class:"border-t-[1px]",key:B.uuid},[P("td",{class:"py-2 cursor-pointer text-left w-44",onClick:()=>t("select",B.uuid),role:"button","aria-label":R(n)("Ouvrir la carte")+" "+B.title,tabindex:"0",onKeydown:[$r(()=>t("select",B.uuid),["enter"]),$r(_r(()=>t("select",B.uuid),["prevent"]),["space"])]},[P("span",{class:"line-clamp-2 overflow-hidden",title:B.title},[P("i",{class:Fa(["mr-2 fa",{"fa-lock":!B.public,"fa-unlock":B.public}]),"aria-label":B.public?R(n)("Carte publique"):R(n)("Carte prive")},null,10,r4e),Dt(" "+K(B.title),1)],8,n4e)],40,i4e),P("td",{class:"cursor-pointer text-left",onClick:()=>t("select",B.uuid)},K(B.category),9,s4e),P("td",{class:"cursor-pointer text-left",onClick:()=>t("select",B.uuid)},K(B.owner),9,o4e),P("td",{class:"cursor-pointer text-left",onClick:()=>t("select",B.uuid)},K(R(yT)(B.last_feature_update)),9,l4e),P("td",null,[B.deletedWhileOffline?Ge("",!0):(U(),se("button",{key:0,onClick:Z=>t("delete",B),"aria-label":R(n)("Supprimer la carte")+" "+B.title,class:"hover:text-red-500"},[...F[11]||(F[11]=[P("i",{class:"fa fa-trash","aria-hidden":"true"},null,-1)])],8,u4e))]),P("td",null,[R(s)&&B.dirty?(U(),se("button",{key:0,onClick:Z=>A(B),"aria-label":R(n)("Synchroniser la carte")+" "+B.title,class:"hover:text-blue-500"},[...F[12]||(F[12]=[P("i",{class:"fa fa-refresh","aria-hidden":"true"},null,-1)])],8,c4e)):Ge("",!0)])]))),128)),!x.value.length&&!a.isLoadingMyMaps?(U(),se("tr",d4e,[P("td",h4e,K(R(n)("No result",{ns:"client"})),1)])):Ge("",!0),a.isLoadingMyMaps?(U(),se("tr",_4e,[P("td",m4e,K(R(n)("Chargement des cartes en cours",{ns:"client"})),1)])):Ge("",!0)])],8,ZSe)],512)]),footer:Ht(()=>[P("div",f4e,[P("button",{class:"lux-btn","data-dismiss":"modal",onClick:F[9]||(F[9]=B=>t("cancel"))},K(R(n)("Annuler")),1)])]),_:1},8,["title"]))}}),p4e={class:"font-bold"},y4e={class:"flex flex-row justify-end gap-2"},xB=rt({__name:"my-map-confirm",props:{map:{},mode:{}},emits:["cancel","confirm"],setup(a){const e=a,{t}=Ct(),i=e.mode==="clear"?t("Confirmation de suppression des lments de la carte"):t("Confirmation de suppression de la carte");return(n,s)=>(U(),Lt(E_,{title:R(i),onClose:s[2]||(s[2]=r=>n.$emit("cancel")),role:"alertdialog"},{content:Ht(()=>[e.mode==="clear"?(U(),se(Tt,{key:0},[Dt(K(R(t)("Etes-vous certain de vouloir effacer tous les lments de la carte ?")),1)],64)):(U(),se(Tt,{key:1},[Dt(K(R(t)("Etes-vous certain de vouloir effacer la carte intitule :"))+" ",1),P("span",p4e,K(a.map.title),1)],64))]),footer:Ht(()=>[P("div",y4e,[P("button",{class:"lux-btn","data-dismiss":"modal",onClick:s[0]||(s[0]=r=>n.$emit("cancel"))},K(R(t)("Annuler")),1),P("button",{class:"lux-btn","data-dismiss":"modal",onClick:s[1]||(s[1]=r=>n.$emit("confirm",a.map.uuid,a.mode))},K(R(t)("Effacer")),1)])]),_:1},8,["title"]))}}),b4e=rt({__name:"my-maps-open-map",props:{maps:{},isLoadingMyMaps:{type:Boolean}},emits:["cancel","select","delete"],setup(a,{emit:e}){const t=e,i=Ye(void 0);function n(r){i.value=r}function s(r){i.value=void 0,t("delete",r)}return(r,l)=>i.value?(U(),Lt(xB,{key:1,map:i.value,mode:"delete",onCancel:l[2]||(l[2]=u=>i.value=void 0),onConfirm:s},null,8,["map"])):(U(),Lt(g4e,{key:0,maps:a.maps,isLoadingMyMaps:a.isLoadingMyMaps,onCancel:l[0]||(l[0]=u=>t("cancel")),onSelect:l[1]||(l[1]=u=>t("select",u)),onDelete:n},null,8,["maps","isLoadingMyMaps"]))}}),v4e={key:0},x4e={class:"text-white"},w4e={class:"flex justify-center flex-col items-center"},C4e=["disabled","aria-busy","aria-label"],I4e=rt({__name:"my-maps-panel",setup(a){const{t:e}=Ct(),{addNotification:t}=ar(),i=ri(),n=A_(),{toggleShareOpen:s}=i,{myMap:r}=xt(i),l=$n(),{drawnFeaturesMyMaps:u}=xt(l),d=Ye(void 0),h=Ai(void 0),g=Ye(!1),y=Ye(void 0),x=Ye(void 0),C=Ai([]),I=Ye(!1);async function A(){I.value=!0;try{if(C.value=await Roe(),!C.value.length){t(e("You have no existing Maps, please create a New Map"),fi.WARNING);return}}catch{t(e("Erreur lors du chargement des cartes."),fi.ERROR)}finally{I.value=!1}}async function E(){n.checkAuth()&&(g.value=!0,A())}function L(N,ne){n.checkAuth()&&(h.value=N,d.value=ne)}async function G(N){await n.loadMyMap(N),d.value!==vu.EDIT&&t(e("Nouvelle carte cre")),d.value=void 0}async function F(N){n.openMyMap(N),g.value=!1}async function B(N){g.value=!1,$(N,"delete")}async function Z(N){C.value=[],await ce(N),await A()}function Y(N){$(N,"clear")}function $(N,ne){y.value=ne,x.value=N}function te(N,ne){ne==="delete"?ce(N):ne==="clear"&&me(N)}async function ce(N){await Foe(N)?(y.value=void 0,N===r.value?.uuid&&n.closeMyMap(),t(e("MyMap successfully deleted."))):t(e("Unable to delete MyMap."),fi.ERROR)}async function me(N){await n.clearMyMap(N)?(y.value=void 0,l.removeMyMapsFeature(N)):t(e("Unable to clear MyMap."),fi.ERROR)}function X(){n.checkAuth()&&n.addInMyMap()}function de(){L(void 0,vu.CREATE_FROM_FEATURES)}return Rt(d,N=>N===void 0&&(h.value=void 0)),Rt(y,N=>N===void 0&&(x.value=void 0)),Rt(r,(N,ne)=>!N&&ne&&l.removeMyMapsFeature(ne.uuid)),(N,ne)=>(U(),se(Tt,null,[gt(mf,{"data-cy-value":"myMapsPanel","close-fn":()=>R(i).toggleMyMapsOpen(!1)},{header:Ht(()=>[P("h1",null,K(R(e)("My Maps",{ns:"client"})),1)]),content:Ht(()=>[R(r)?(U(),se("div",v4e,[gt(WSe,{myMap:R(r),onClose:R(n).closeMyMap,onDelete:B,onClear:Y,onCopy:ne[0]||(ne[0]=le=>L(le,R(vu).COPY)),onEdit:ne[1]||(ne[1]=le=>L(le,R(vu).EDIT)),onNew:ne[2]||(ne[2]=()=>L(void 0,R(vu).CREATE)),onOpen:E,onShare:ne[3]||(ne[3]=()=>R(s)(!0)),onResetLayers:R(n).resetFromMyMap,onSaveLayers:R(n).applyToMyMap,"onDraw:mergelines":ne[4]||(ne[4]=()=>R(l).toggleDrawMergeLinesModal(!0)),"onDraw:cutlines":ne[5]||(ne[5]=()=>R(l).toggleDrawCutLineMode())},null,8,["myMap","onClose","onResetLayers","onSaveLayers"]),gt(yB,{features:R(u),idPrefix:"mymap"},null,8,["features"])])):(U(),se(Tt,{key:1},[P("div",x4e,K(R(e)("Create, save and share your own maps.",{ns:"client"})),1),P("div",w4e,[P("button",{class:"lux-btn mt-3",onClick:E,disabled:I.value,"aria-busy":I.value,"aria-label":I.value?R(e)("Chargement en cours..."):R(e)("Ouvrir une carte",{ns:"client"})},K(R(e)("Ouvrir une carte",{ns:"client"})),9,C4e),P("button",{class:"lux-btn mt-3",onClick:ne[6]||(ne[6]=le=>L(void 0,R(vu).CREATE))},K(R(e)("Crer une nouvelle carte",{ns:"client"})),1)])],64)),gt(tSe,{onMoveInMyMap:X,onCreateNewMyMap:de})]),_:1},8,["close-fn"]),x.value&&y.value?(U(),Lt(xB,{key:0,mode:y.value,map:x.value,onCancel:ne[7]||(ne[7]=le=>y.value=void 0),onConfirm:te},null,8,["mode","map"])):Ge("",!0),d.value?(U(),Lt(cSe,{key:1,mode:d.value,map:h.value,onCancel:ne[8]||(ne[8]=le=>d.value=void 0),onConfirm:G},null,8,["mode","map"])):Ge("",!0),g.value?(U(),Lt(b4e,{key:2,maps:C.value,isLoadingMyMaps:I.value,onCancel:ne[9]||(ne[9]=le=>g.value=!1),onSelect:F,onDelete:Z},null,8,["maps","isLoadingMyMaps"])):Ge("",!0)],64))}});var g0={},ns={},d6;function S4e(){return d6||(d6=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.BLANK_URL=ns.relativeFirstCharacters=ns.whitespaceEscapeCharsRegex=ns.urlSchemeRegex=ns.ctrlCharactersRegex=ns.htmlCtrlEntityRegex=ns.htmlEntitiesRegex=ns.invalidProtocolRegex=void 0,ns.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,ns.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,ns.htmlCtrlEntityRegex=/&(newline|tab);/gi,ns.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,ns.urlSchemeRegex=/^.+(:|&colon;)/gim,ns.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,ns.relativeFirstCharacters=[".","/"],ns.BLANK_URL="about:blank"),ns}var h6;function A4e(){if(h6)return g0;h6=1,Object.defineProperty(g0,"__esModule",{value:!0}),g0.sanitizeUrl=void 0;var a=S4e();function e(r){return a.relativeFirstCharacters.indexOf(r[0])>-1}function t(r){var l=r.replace(a.ctrlCharactersRegex,"");return l.replace(a.htmlEntitiesRegex,function(u,d){return String.fromCharCode(d)})}function i(r){return URL.canParse(r)}function n(r){try{return decodeURIComponent(r)}catch{return r}}function s(r){if(!r)return a.BLANK_URL;var l,u=n(r.trim());do u=t(u).replace(a.htmlCtrlEntityRegex,"").replace(a.ctrlCharactersRegex,"").replace(a.whitespaceEscapeCharsRegex,"").trim(),u=n(u),l=u.match(a.ctrlCharactersRegex)||u.match(a.htmlEntitiesRegex)||u.match(a.htmlCtrlEntityRegex)||u.match(a.whitespaceEscapeCharsRegex);while(l&&l.length>0);var d=u;if(!d)return a.BLANK_URL;if(e(d))return d;var h=d.trimStart(),g=h.match(a.urlSchemeRegex);if(!g)return d;var y=g[0].toLowerCase().trim();if(a.invalidProtocolRegex.test(y))return a.BLANK_URL;var x=h.replace(/\\/g,"/");if(y==="mailto:"||y.includes("://"))return x;if(y==="http:"||y==="https:"){if(!i(x))return a.BLANK_URL;var C=new URL(x);return C.protocol=C.protocol.toLowerCase(),C.hostname=C.hostname.toLowerCase(),C.toString()}return x}return g0.sanitizeUrl=s,g0}var Kg=A4e();function jp(a,e,t="f_"){return Object.entries(a).filter(([i])=>i!=="showProfile").map(([i,n])=>({key:t+i,value:n})).sort((i,n)=>e?0:i.key.localeCompare(n.key))}function b_(a){return a.attributes!==void 0&&Object.keys(a.attributes).length>0}function Si(a,e,t){return t==null&&(t=0),a in e.attributes&&(""+e.attributes[a]).length>t}function rf(a){return a==null||a.length===0}function Ls(a){const e=String(a).toLowerCase();return e.startsWith("http://")||e.startsWith("https://")}function Wb(a,e,t){const{key:i}=a;let n=!1;return e==="2407"&&(i==="f_Cl_erosion"||i==="f_Erosion_kl"||i==="f_Erosion_Cl"||i==="f_Erosioun_K")?(t==="fr"&&i==="f_Cl_erosion"||t==="de"&&i==="f_Erosion_kl"||t==="en"&&i==="f_Erosion_Cl"||t==="lb"&&i==="f_Erosioun_K")&&(n=!0):e==="2714"&&(i==="f_LABEL_eng"||i==="f_LC_class_name_fr"||i==="f_LC_class_name_de"||i==="f_LC_class_name")?(t==="fr"&&i==="f_LC_class_name_fr"||t==="de"&&i==="f_LC_class_name_de"||t==="en"&&i==="f_LABEL_eng"||t==="lb"&&i==="f_LC_class_name")&&(n=!0):e==="2444"&&(i==="f_Betriebsform"||i==="f_Forme_d_entreprise"||i==="f_Operation_Form"||i==="f_Form_vun_Geschaeft")?(t==="fr"&&i==="f_Forme_d_entreprise"||t==="de"&&i==="f_Betriebsform"||t==="en"&&i==="f_Operation_Form"||t==="lb"&&i==="f_Form_vun_Geschaeft")&&(n=!0):i.endsWith("_FR")||i.endsWith("_DE")||i.endsWith("_EN")||i.endsWith("_LU")||i.endsWith("_LB")?(t==="fr"&&i.endsWith("_FR")||t==="de"&&i.endsWith("_DE")||t==="en"&&i.endsWith("_EN")||t==="lb"&&(i.endsWith("_LB")||i.endsWith("_LU")))&&(n=!0):n=!0,n}function wB(a){return"fid"in a&&T4e(a.fid)}function T4e(a){return a==null?!1:a.split(",").every(t=>!!t&&t.split("_").length>=2)}function CB(a){return Kg.sanitizeUrl(a)}function IB(a,e,t,i){const{i18next:n}=Ct();switch(n.language){case"de":return Kg.sanitizeUrl(e??a);case"en":return Kg.sanitizeUrl(t??a);case"lb":return Kg.sanitizeUrl(i??a);case"fr":default:return Kg.sanitizeUrl(a)}}function E4e(a,e,t=","){return a.map(i=>i.attributes[e]).join(t)}function _6(a,e){if(typeof a===void 0)return"";const{t}=Ct();return a.map(i=>t(e+"_"+i)).join(", ")}function J2(a){const{themes:e}=xt(Bn());return e.value?.some(t=>t.name===a)}const M4e={class:"lux-poi-title","data-cy":"defaultTemplateTitle"},L4e={key:0},R4e=["href"],sn=rt({__name:"info-feature-layout",props:{layers:{},currentUrl:{},getDirectLink:{type:Function,default:(a,e)=>`${e}&fid=${a.fid}`}},emits:["export"],setup(a){const{t:e}=Ct();return(t,i)=>(U(),se(Tt,null,[P("h1",M4e,K(R(e)(a.layers.layerLabel)),1),ja(t.$slots,"layer-content"),(U(!0),se(Tt,null,gi(a.layers.features,n=>(U(),se("div",{key:n.id,class:"lux-feature-info","data-cy":"defaultTemplateAttributes"},[ja(t.$slots,"feature-content",{feature:n},()=>[Dt(K(n.id),1)]),R(wB)(n)?(U(),se("div",L4e,[P("a",{"data-cy":"defaultTemplateLink",class:"print:hidden",href:a.getDirectLink(n,a.currentUrl),target:"_blank"},K(R(e)("Lien direct vers cet objet")),9,R4e)])):Ge("",!0)]))),128))],64))}}),k4e=rt({__name:"adresse-template",props:{layers:{},currentUrl:{}},setup(a){return(e,t)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:i})=>[P("h4",null,K(i.attributes.num_affaire),1),Dt(" "+K(i.attributes.numero)+", "+K(i.attributes.rue),1),t[0]||(t[0]=P("br",null,null,-1)),Dt(" L-"+K(i.attributes.code_postal)+" "+K(i.attributes.localite),1),t[1]||(t[1]=P("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),P4e=["href"],G4e=["src"],W4e={class:"no-print"},O4e=rt({__name:"aero-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct();return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("h3",null,K(n.attributes.name),1),P("a",{href:n.attributes.path,target:"_blank"},[n.attributes.thumbnail_path?(U(),se("img",{key:0,src:n.attributes.thumbnail_path,alt:"thumbnail",width:"250"},null,8,G4e)):Ge("",!0)],8,P4e),P("span",W4e,K(R(e)("Cliquez dans l'image pour agrandir")),1),i[0]||(i[0]=P("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),F4e=rt({__name:"affaires-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct();return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("h4",null,K(n.attributes.num_affaire),1),P("span",null,K(R(e)("Numero")),1),Dt(" : "+K(n.attributes.num_affaire),1),i[0]||(i[0]=P("br",null,null,-1)),P("span",null,K(R(e)("Numero cadastral")),1),Dt(" : "+K(n.attributes.label),1),i[1]||(i[1]=P("br",null,null,-1)),P("span",null,K(R(e)("Geometre")),1),Dt(" : "+K(n.attributes.geometre),1),i[2]||(i[2]=P("br",null,null,-1)),P("span",null,K(R(e)("Region")),1),Dt(" : "+K(n.attributes.region),1),i[3]||(i[3]=P("br",null,null,-1)),P("span",null,K(R(e)("Type")),1),Dt(" : "+K(R(e)(n.attributes.type)),1),i[4]||(i[4]=P("br",null,null,-1)),P("span",null,K(R(e)("Statut")),1),Dt(" : "+K(R(e)(n.attributes.statut)),1),i[5]||(i[5]=P("br",null,null,-1)),P("span",null,K(R(e)("Date")),1),Dt(" : "+K(n.attributes.date),1),i[6]||(i[6]=P("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),N4e={key:0},B4e={key:1},D4e=rt({__name:"asta-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct();return(t,i)=>{const n=El("format-measure");return U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:s})=>[P("span",null,K(R(e)("Numero EFA")),1),Dt(" : "+K(s.attributes.code_elem)+K(s.attributes.efa),1),i[3]||(i[3]=P("br",null,null,-1)),s.attributes.surface?(U(),se("div",N4e,[P("span",null,K(R(e)("Surface")),1),Dt(" : "+K(Number(s.attributes.surface).toFixed(1))+" a",1),i[0]||(i[0]=P("br",null,null,-1))])):Ge("",!0),s.attributes.longueur?(U(),se("div",B4e,[P("span",null,K(R(e)("Longueur")),1),i[1]||(i[1]=Dt(" : ",-1)),Sa(P("span",null,null,512),[[n,s.attributes.longueur,"1",{length:!0}]]),i[2]||(i[2]=P("br",null,null,-1))])):Ge("",!0)]),_:1},8,["layers","currentUrl"])}}}),uh=rt({__name:"profile-feature-info",props:{feature:{}},emits:["export"],setup(a){const e=a,{t}=Ct(),i=qa().getOlMap(),n=St(()=>new Tl(new $l().readFeature(e.feature,{dataProjection:tu,featureProjection:i.getView().getProjection()})));return(s,r)=>(U(),se(Tt,null,[gt(TE,{feature:n.value},null,8,["feature"]),P("div",null,[P("button",{class:"lux-feature-info-export",onClick:r[0]||(r[0]=l=>s.$emit("export",{feature:a.feature,format:"kml"}))},K(R(t)("Exporter KMl")),1),P("button",{class:"lux-feature-info-export",onClick:r[1]||(r[1]=l=>s.$emit("export",{feature:a.feature,format:"gpx"}))},K(R(t)("Exporter GPX")),1)])],64))}}),V4e={key:0},Z4e={key:0},z4e={key:0},U4e={key:1},H4e=["href"],X4e={key:1},q4e={key:0},Y4e={key:1},K4e={key:2},j4e={key:3},$4e={key:4},J4e={key:5},Q4e={key:0},eAe={key:2},tAe=rt({__name:"automatic-sols-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{t:e}=Ct();return(t,i)=>{const n=El("dompurify-html");return U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:s})=>[s.attributes.label?(U(),se("h4",V4e,K(R(e)(s.attributes.label)),1)):Ge("",!0),R(b_)(s)?(U(),se(Tt,{key:1},[(U(!0),se(Tt,null,gi(R(jp)(s.attributes,a.layers.ordered),r=>(U(),se("div",{key:r.key},[!R(rf)(r.value)&&!r.key.startsWith("f_LC_class_name")&&!r.key.startsWith("f_LABEL_")?(U(),se("span",Z4e,[R(Ls)(r.value)?Ge("",!0):(U(),se("label",z4e,K(R(e)(r.key))+" : ",1)),R(Ls)(r.value)?Ge("",!0):Sa((U(),se("span",U4e,null,512)),[[n,r.value]]),R(Ls)(r.value)?(U(),se("a",{key:2,href:r.value,target:"_blank"},K(R(e)(r.key)),9,H4e)):Ge("",!0)])):Ge("",!0),!R(rf)(r.value)&&(r.key.startsWith("f_LC_class_name")||r.key.startsWith("f_LABEL_"))?(U(),se("span",X4e,[R(Va).language=="fr"&&(r.key=="f_LC_class_name_fr"||r.key=="f_LABEL_fr")?(U(),se("label",q4e,K(R(e)(r.key))+" : ",1)):Ge("",!0),R(Va).language=="fr"&&(r.key=="f_LC_class_name_fr"||r.key=="f_LABEL_fr")?Sa((U(),se("span",Y4e,null,512)),[[n,r.value]]):Ge("",!0),(R(Va).language=="de"||R(Va).language=="lb")&&(r.key=="f_LC_class_name_de"||r.key=="f_LABEL_de")?(U(),se("label",K4e,K(R(e)(r.key))+" : ",1)):Ge("",!0),(R(Va).language=="de"||R(Va).language=="lb")&&(r.key=="f_LC_class_name_de"||r.key=="f_LABEL_de")?Sa((U(),se("span",j4e,null,512)),[[n,r.value]]):Ge("",!0),R(Va).language=="en"&&(r.key=="f_LC_class_name"||r.key=="f_LABEL_eng")?(U(),se("label",$4e,K(R(e)(r.key))+" : ",1)):Ge("",!0),R(Va).language=="en"&&(r.key=="f_LC_class_name"||r.key=="f_LABEL_eng")?Sa((U(),se("span",J4e,null,512)),[[n,r.value]]):Ge("",!0)])):Ge("",!0)]))),128)),a.layers.has_profile?(U(),se("div",Q4e,[gt(uh,{feature:s,onExport:i[0]||(i[0]=r=>t.$emit("export",r))},null,8,["feature"])])):Ge("",!0)],64)):(U(),se("div",eAe,[P("span",null,K(R(e)("Aucune information disponible pour cette couche")),1)]))]),_:1},8,["layers","currentUrl"])}}}),aAe=rt({__name:"batiments-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct();return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("span",null,K(R(e)("Type")),1),i[0]||(i[0]=Dt(" : ",-1)),P("span",null,K(R(e)("bat_"+n.attributes.type)),1),i[1]||(i[1]=P("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),iAe=["src"],nAe=rt({__name:"bus-wo-title-template",props:{layers:{},currentUrl:{}},setup(a){const e="https://migration.geoportail.lu/getbuswidget";return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("h3",null,K(n.attributes.name),1),P("iframe",{class:"-ml-3.5",title:"bus widget",height:"300",width:"500",frameborder:"0",src:`${R(e)}${R(IB)(`?lang=fr&id=${n.attributes.extid}`,`?lang=de&id=${n.attributes.extid}`,`?lang=en&id=${n.attributes.extid}`,`?lang=fr&id=${n.attributes.extid}`)}`},null,8,iAe)]),_:1},8,["layers","currentUrl"]))}}),rAe=["src"],sAe=rt({__name:"bus-template",props:{layers:{},currentUrl:{}},setup(a){const e="https://migration.geoportail.lu/getbuswidget";return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("h3",null,K(n.attributes.name),1),P("iframe",{class:"-ml-3.5",title:"bus widget",height:"300",width:"500",frameborder:"0",src:`${R(e)}${R(IB)(`?lang=fr&id=${n.attributes.extid}`,`?lang=de&id=${n.attributes.extid}`,`?lang=en&id=${n.attributes.extid}`,`?lang=fr&id=${n.attributes.extid}`)}`},null,8,rAe)]),_:1},8,["layers","currentUrl"]))}}),oAe={class:"lux-poi-title"},lAe={class:"lux-feature-info"},uAe={class:"poi-feature"},cAe={class:"casipo-form-container"},dAe={class:"casipo-mail"},hAe={class:"casipo-checkbox"},_Ae=["innerHTML"],mAe=rt({__name:"casipo-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{authenticated:e,currentUser:t}=xt(Nu()),n=a.layers,{addNotification:s}=ar(),r=Ye(""),l=St(()=>e.value&&t.value?.mail||"");r.value=l.value;const u=Ye(!1),{t:d}=Ct(),h="https://migration.geoportail.lu/casipo";function g(x,C,I){return x.map(function(A){return A.attributes[C]}).join(I)}async function y(){if(!r.value&&!/^\S+@\S+\.\S+$/.test(r.value)){s(d("Veuillez saisir une adresse email valide"),fi.WARNING);return}if(!u.value){s(d("Veuillez accepter les termes du rapport"),fi.WARNING);return}const x=new URLSearchParams({email:r.value,staging:"false"});fetch(h+"/report/"+g(n.features,"textstring",",")+".pdf",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:x}),s(d("Votre rapport est en train d'tre gnr. Un email vous sera envoy  l'adresse {{email}} ds qu'il sera disponible",{email:r.value,ns:"client"}),fi.INFO)}return(x,C)=>(U(),se(Tt,null,[P("h1",oAe,K(R(d)(R(n).layerLabel)),1),P("div",lAe,[P("div",uAe,[P("label",null,K(R(d)("Ici vous pouvez commander le rapport relatif aux site potentiellement contamins")),1),C[3]||(C[3]=P("br",null,null,-1)),C[4]||(C[4]=P("br",null,null,-1)),P("div",cAe,[P("div",dAe,[P("label",null,K(R(d)("Adresse Email")),1),Sa(P("input",{type:"text","onUpdate:modelValue":C[0]||(C[0]=I=>r.value=I),style:{width:"165px"}},null,512),[[Vn,r.value]])]),P("div",hAe,[Sa(P("input",{type:"checkbox","onUpdate:modelValue":C[1]||(C[1]=I=>u.value=I),id:"terms"},null,512),[[Xd,u.value]]),P("label",{for:"terms",innerHTML:R(d)("En cochant cette case, l'utilisateur dclare avoir lu, compris et accept les <a target='_blank' rel='noopener noreferrer' href='https://files.geoportail.lu/Conditions_utilisation_CASIPO.pdf'>conditions gnrales d'utilisation </a>de ce site web")},null,8,_Ae)])]),P("button",{class:"lux-btn-grey",onClick:C[2]||(C[2]=I=>y()),target:"_blank"},K(R(d)("Commander rapport")),1)])])],64))}}),fAe=ir(mAe,[["__scopeId","data-v-c10938bd"]]),gAe={class:"flex flex-col"},pAe={class:"lux-poi-title","data-cy":"defaultTemplateTitle"},yAe={key:0},bAe={key:1,"data-cy":"defaultTemplateAttributes"},vAe={key:0},xAe={key:0},wAe={key:1},CAe=["href"],IAe=["href"],SAe={class:"lux-solarkataster-button"},AAe={key:4},TAe={controls:"",autoplay:"",style:{width:"260px",height:"50px"}},EAe=["src"],MAe=["src"],LAe={key:2},RAe={key:3,class:"no-print"},kAe={key:4,class:"no-print"},PAe=["href"],m6=rt({__name:"default-template",props:{layers:{type:Object,required:!0},currentUrl:{type:String,required:!1}},emits:["export"],setup(a){const{t:e}=Ct();function t(r,l){return!(r.startsWith("myenergy_solarkataster_luxemburg")||r.startsWith("eau_new_Wasserstand"))&&Ls(l.value)}function i(r,l){return r.startsWith("myenergy_solarkataster_luxemburg")&&Ls(l.value)&&l.key==="f_href"}function n(r,l){return r.startsWith("eau_new_Wasserstand")&&Ls(l.value)&&l.key==="f_Graph"}function s(r){return Ls(r.value)&&r.key==="f_AudioURL"}return(r,l)=>{const u=El("dompurify-html");return U(),se("div",gAe,[P("div",null,[P("h2",pAe,K(R(e)(a.layers.layerLabel)),1),(U(!0),se(Tt,null,gi(a.layers.features,d=>(U(),se("div",{key:d.id,class:"lux-feature-info"},[d.attributes.label?(U(),se("h4",yAe,K(R(e)(d.attributes.label)),1)):Ge("",!0),R(b_)(d)?(U(),se("div",bAe,[(U(!0),se(Tt,null,gi(R(jp)(d.attributes,a.layers.ordered),h=>(U(),se("div",{key:h.key},[!R(rf)(h.value)&&R(Wb)(h,a.layers.layer,R(Va).language)?(U(),se("div",vAe,[R(Ls)(h.value)?Ge("",!0):(U(),se("label",xAe,K(R(e)(h.key))+" : ",1)),R(Ls)(h.value)?Ge("",!0):Sa((U(),se("span",wAe,null,512)),[[u,h.value]]),t(a.layers.layerLabel,h)?(U(),se("a",{key:2,href:h.value,target:"_blank"},K(R(e)(h.key)),9,CAe)):Ge("",!0),i(a.layers.layerLabel,h)?(U(),se("a",{key:3,"data-cy":"defaultTemplateSolarLink",href:h.value,target:"_blank"},[P("button",SAe,[P("span",null,K(R(e)("Lien direct vers le calculateur d'efficacit conomique")),1)])],8,IAe)):Ge("",!0),s(h)?(U(),se("span",AAe,[P("audio",TAe,[P("source",{src:h.value,type:"audio/wav"},null,8,EAe)])])):Ge("",!0),n(a.layers.layerLabel,h)?(U(),se("iframe",{key:5,width:"260px",height:"560px",src:R(CB)(h.value),title:"water level graph"},null,8,MAe)):Ge("",!0)])):Ge("",!0)]))),128))])):Ge("",!0),a.layers.has_profile?(U(),se("div",LAe,[gt(uh,{feature:d,onExport:l[0]||(l[0]=h=>r.$emit("export",h))},null,8,["feature"])])):Ge("",!0),R(b_)(d)?Ge("",!0):(U(),se("div",RAe,[P("span",null,K(R(e)("Aucune information disponible pour cette couche")),1)])),R(wB)(d)?(U(),se("div",kAe,[P("span",null,[P("a",{"data-cy":"defaultTemplateLink",href:a.currentUrl+"&fid="+d.fid,target:"_blank"},K(R(e)("Lien direct vers cet objet")),9,PAe)])])):Ge("",!0)]))),128))])])}}}),GAe={key:0},WAe={key:0},OAe={key:0,class:"flex"},FAe={class:"w-1/3"},NAe={class:"w-2/3"},BAe={key:1,class:"flex"},DAe=["href"],VAe={key:0},ZAe={key:2},zAe=rt({__name:"default-table-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{t:e}=Ct();return(t,i)=>{const n=El("dompurify-html");return U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:s})=>[s.attributes.label?(U(),se("h4",GAe,K(R(e)(s.attributes.label)),1)):Ge("",!0),R(b_)(s)?(U(),se(Tt,{key:1},[(U(!0),se(Tt,null,gi(R(jp)(s.attributes,a.layers.ordered),r=>(U(),se("div",{key:r.key},[!R(rf)(r.value)&&R(Wb)(r,a.layers.layer,R(Va).language)?(U(),se("span",WAe,[R(Ls)(r.value)?Ge("",!0):(U(),se("div",OAe,[P("label",FAe,K(R(e)(r.key)),1),Sa(P("span",NAe,null,512),[[n,r.value]])])),R(Ls)(r.value)?(U(),se("div",BAe,[i[1]||(i[1]=P("label",{class:"w-1/3"},null,-1)),P("a",{class:"w-2/3",href:r.value,target:"_blank"},K(R(e)(r.key)),9,DAe)])):Ge("",!0)])):Ge("",!0)]))),128)),a.layers.has_profile?(U(),se("div",VAe,[gt(uh,{feature:s,onExport:i[0]||(i[0]=r=>t.$emit("export",r))},null,8,["feature"])])):Ge("",!0)],64)):(U(),se("div",ZAe,[P("span",null,K(R(e)("Aucune information disponible pour cette couche")),1)]))]),_:1},8,["layers","currentUrl"])}}}),UAe={key:0},HAe={key:0},XAe={key:0,class:"flex"},qAe={class:"w-1/3"},YAe={class:"w-2/3"},KAe={key:1,class:"flex"},jAe=["href"],$Ae={key:0},JAe={key:2},QAe=rt({__name:"default-table-no-prefix-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{t:e}=Ct();return(t,i)=>{const n=El("dompurify-html");return U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:s})=>[s.attributes.label?(U(),se("h4",UAe,K(R(e)(s.attributes.label)),1)):Ge("",!0),R(b_)(s)?(U(),se(Tt,{key:1},[(U(!0),se(Tt,null,gi(R(jp)(s.attributes,a.layers.ordered,""),r=>(U(),se("div",{key:r.key},[!R(rf)(r.value)&&R(Wb)(r,a.layers.layer,R(Va).language)?(U(),se("span",HAe,[R(Ls)(r.value)?Ge("",!0):(U(),se("div",XAe,[P("label",qAe,K(R(e)(r.key)),1),Sa(P("span",YAe,null,512),[[n,r.value]])])),R(Ls)(r.value)?(U(),se("div",KAe,[i[1]||(i[1]=P("label",{class:"w-1/3"},null,-1)),P("a",{class:"w-2/3",href:r.value,target:"_blank"},K(R(e)(r.key)),9,jAe)])):Ge("",!0)])):Ge("",!0)]))),128)),a.layers.has_profile?(U(),se("div",$Ae,[gt(uh,{feature:s,onExport:i[0]||(i[0]=r=>t.$emit("export",r))},null,8,["feature"])])):Ge("",!0)],64)):(U(),se("div",JAe,[P("span",null,K(R(e)("Aucune information disponible pour cette couche")),1)]))]),_:1},8,["layers","currentUrl"])}}}),e3e=rt({__name:"flik-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct();return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("span",null,K(R(e)("Numero FLIK"))+" : ",1),Dt(" "+K(n.attributes.element)+K(n.attributes.flik),1),i[0]||(i[0]=P("br",null,null,-1)),P("span",null,K(R(e)("Surface"))+" : ",1),Dt(" "+K(n.attributes.surface)+" a",1),i[1]||(i[1]=P("br",null,null,-1)),P("span",null,K(R(e)("Perimetre"))+" : ",1),Dt(" "+K(n.attributes.perimetre)+" m",1),i[2]||(i[2]=P("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),t3e={class:"lux-poi-title"},a3e={class:"lux-feature-info"},i3e={class:"poi-feature"},n3e={class:"forage-virtuel-form-container"},r3e={class:"forage-virtuel-mail"},s3e=rt({__name:"forage-virtuel-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{authenticated:e,currentUser:t}=xt(Nu()),n=a.layers,{addNotification:s}=ar(),r=Ye(""),l=St(()=>e.value&&t.value?.mail||"");r.value=l.value;const{t:u}=Ct(),d=void 0;async function h(){if(!r.value&&!/^\S+@\S+\.\S+$/.test(r.value)){s(u("Veuillez saisir une adresse email valide"),fi.WARNING);return}const g=new URLSearchParams({x:String(n.features[0].geometry.coordinates[0]),y:String(n.features[0].geometry.coordinates[1]),email:r.value,staging:"false"});fetch(d,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:g}),s(u("Votre rapport est en train d'tre gnr. Un email vous sera envoy  l'adresse {{email}} ds qu'il sera disponible",{email:r.value,ns:"client"}),fi.INFO)}return(g,y)=>(U(),se(Tt,null,[P("h1",t3e,K(R(u)(R(n).layerLabel)),1),P("div",a3e,[P("div",i3e,[P("label",null,K(R(u)("Ici vous pouvez commander le rapport relatif au forage virtuel")),1),y[2]||(y[2]=P("br",null,null,-1)),y[3]||(y[3]=P("br",null,null,-1)),P("div",n3e,[P("div",r3e,[P("label",null,K(R(u)("Adresse Email")),1),Sa(P("input",{type:"text","onUpdate:modelValue":y[0]||(y[0]=x=>r.value=x),style:{width:"165px"}},null,512),[[Vn,r.value]])])]),P("button",{class:"lux-btn-grey",onClick:y[1]||(y[1]=x=>h()),target:"_blank"},K(R(u)("Commander rapport")),1)])])],64))}}),o3e=ir(s3e,[["__scopeId","data-v-6d0be8d4"]]),l3e={class:"lux-poi-title"},u3e={key:0},c3e={href:"https://www.mobiliteit.lu/fr/horaires-et-lignes/tram/",target:"_blank"},d3e={key:1},h3e={href:"https://www.mobiliteit.lu/fr/horaires-et-lignes/trains/",target:"_blank"},_3e={key:2},m3e=["href"],f3e=["href"],g3e=rt({__name:"lignes-bus-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{t:e}=Ct();return(t,i)=>(U(),se(Tt,null,[P("h1",l3e,K(R(e)(a.layers.layerLabel)),1),P("table",null,[P("thead",null,[P("tr",null,[P("th",null,K(R(e)("Num ligne")),1),P("th",null,K(R(e)("Description")),1)])]),P("tbody",null,[(U(!0),se(Tt,null,gi(a.layers.features,n=>(U(),se("tr",{key:n.id,class:"lux-feature-info"},[n.attributes.category_id===404?(U(),se("td",u3e,[P("a",c3e,K(n.attributes.label),1)])):Ge("",!0),n.attributes.category_id===403?(U(),se("td",d3e,[P("a",h3e,K(n.attributes.label),1)])):Ge("",!0),(n.attributes.category_id??0)<403?(U(),se("td",_3e,[P("a",{href:`https://www.mobiliteit.lu/fr/ligne/bus-${n.attributes.label}-${n.attributes.category_id===400?"avl":n.attributes.category_id===401?"rgtr":"tice"}`,target:"_blank"},K(n.attributes.label),9,m3e)])):Ge("",!0),P("td",null,[P("a",{href:`?map_id=${n.attributes.map_id}`,target:"_blank"},K(n.attributes.map_description),9,f3e)])]))),128))])])],64))}}),p3e=["src"],y3e=rt({__name:"meteo-template",props:{layers:{},currentUrl:{}},setup(a){return(e,t)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:i})=>[P("h3",null,K(i.attributes.stationsname)+" "+K(i.attributes.sid),1),P("iframe",{title:"meteo widget",class:"-ml-3.5",height:"150",width:"300",frameborder:"0",src:`https://dlr-web-daten1.aspdienste.de/cgi-bin/sinfoam.pl?c=92&nid=01&lid=${i.attributes.sid}`},null,8,p3e)]),_:1},8,["layers","currentUrl"]))}}),b3e=rt({__name:"meteolux-europe-template",props:{layers:{},currentUrl:{}},setup(a){return(e,t)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:i})=>[P("h3",null,K(i.attributes.station)+" ("+K(i.attributes.icao)+")",1),P("label",null,K(i.attributes.weather),1),t[0]||(t[0]=Dt("",-1)),P("span",null,K(i.attributes.temperature)+"C",1)]),_:1},8,["layers","currentUrl"]))}}),v3e=rt({__name:"meteolux-gr-template",props:{layers:{},currentUrl:{}},setup(a){return(e,t)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:i})=>[P("h3",null,K(i.attributes.station)+" ("+K(i.attributes.icao)+")",1),t[0]||(t[0]=P("label",null,"TAF:",-1)),t[1]||(t[1]=Dt()),P("span",null,K(i.attributes.taf),1),t[2]||(t[2]=P("br",null,null,-1)),t[3]||(t[3]=P("label",null,"Metar:",-1)),t[4]||(t[4]=Dt()),P("span",null,K(i.attributes.metar),1)]),_:1},8,["layers","currentUrl"]))}}),x3e=["href"],w3e=["src"],C3e={key:1},I3e={key:2},S3e={key:3},A3e={key:4},T3e=["src"],E3e=["href"],M3e=rt({__name:"mymaps-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct();return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("h4",null,K(n.attributes.sentier),1),n.attributes.image&&n.attributes.image.trim()!==""?(U(),se("a",{key:0,href:R(Ek)(n.attributes.image),target:"_blank"},[n.attributes.thumbnail&&n.attributes.thumbnail.trim()!==""?(U(),se("img",{key:0,src:R(Ek)(n.attributes.thumbnail)},null,8,w3e)):Ge("",!0)],8,x3e)):Ge("",!0),i[5]||(i[5]=P("br",null,null,-1)),n.attributes.sentier?(U(),se("span",C3e,[P("span",null,K(R(e)("sentier")),1),Dt(" : "+K(n.attributes.sentier),1),i[1]||(i[1]=P("br",null,null,-1))])):Ge("",!0),n.attributes.name?(U(),se("span",I3e,[P("span",null,K(R(e)("Name")),1),Dt(" : "+K(n.attributes.name),1),i[2]||(i[2]=P("br",null,null,-1))])):Ge("",!0),n.attributes.description?(U(),se("span",S3e,[P("span",null,K(R(e)("Description")),1),Dt(" : "+K(n.attributes.description),1),i[3]||(i[3]=P("br",null,null,-1))])):Ge("",!0),n.attributes.length?(U(),se("span",A3e,[P("span",null,K(R(e)("Longeueur")),1),Dt(" : "+K(n.attributes.length)+" Km",1),i[4]||(i[4]=P("br",null,null,-1))])):Ge("",!0),gt(uh,{feature:n,onExport:i[0]||(i[0]=s=>t.$emit("export",s))},null,8,["feature"]),P("img",{src:R(Wpe)(n.attributes.map_id)},null,8,T3e),i[6]||(i[6]=P("br",null,null,-1)),P("a",{class:"fid-link no-print",href:`?map_id=${n.attributes.map_id}`,target:"_blank"},K(R(e)("Lien vers la carte")),9,E3e),i[7]||(i[7]=P("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),L3e=["onClick"],R3e=rt({__name:"mo-template",props:{layers:{},currentUrl:{}},setup(a){const{addNotification:e}=ar(),t="https://shop.geoportail.lu",i=void 0,{t:n}=Ct(),s=function(l){for(var u=l+"=",d=document.cookie.split(";"),h=0;h<d.length;h++){for(var g=d[h];g.charAt(0)==" ";)g=g.substring(1);if(g.indexOf(u)==0){var y=g.substring(u.length,g.length);return y.indexOf('"')===0&&(y=y.substring(1,y.length-1)),y}}return""},r=async function(l,u){const g=`${location.search.includes("ipv6=true")?i:t}/Portail/commande/webservices/orderAffaireV3.jsp?numCommune=${encodeURIComponent(l)}&numMesurage=${encodeURIComponent(u)}&ticket=${encodeURIComponent(s("appAuthtktCookieName"))}`;try{const y=await fetch(g,{method:"GET",headers:{"Content-Type":"application/json"}});y.ok?(await y.json(),e(n("Fichier GML command."),fi.INFO)):e(n("Erreur lors de la commande du fichier."),fi.ERROR)}catch{e(n("Erreur lors de la commande du fichier."),fi.ERROR)}};return(l,u)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:d})=>[P("h3",null,K(d.attributes.K_MEASUREMENTID),1),P("span",null,K(R(n)("Affaire")),1),Dt(" : "+K(d.attributes.K_MEASUREMENTID),1),u[0]||(u[0]=P("br",null,null,-1)),P("span",null,K(R(n)("Commune administrative")),1),Dt(" : "+K(d.attributes.K_NOM_COMMUNE_ADMINISTRATIVE),1),u[1]||(u[1]=P("br",null,null,-1)),P("span",null,K(R(n)("Commune cadastrale")),1),Dt(" : "+K(d.attributes.K_NOM_COMMUNE_CADASTRALE),1),u[2]||(u[2]=P("br",null,null,-1)),P("span",null,K(R(n)("Mesurage")),1),Dt(" : "+K(d.attributes.K_MEASUREMENTNUMBER),1),u[3]||(u[3]=P("br",null,null,-1)),P("button",{class:"lux-btn-grey",onClick:h=>r(d.attributes.K_KATASTERGEMEINDE,d.attributes.K_MEASUREMENTNUMBER)},K(R(n)("Commander fichier GML")),9,L3e)]),_:1},8,["layers","currentUrl"]))}}),k3e={key:0},P3e=["href"],G3e={key:1},W3e=rt({__name:"ng95-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct(),t="https://migration.geoportail.lu/downloadsketch";return(i,n)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:s})=>[P("h4",null,K(R(e)(s.attributes.nom)),1),P("span",null,K(R(e)("Elevation")),1),Dt(" : "+K(s.attributes.nouv_cote),1),n[0]||(n[0]=P("br",null,null,-1)),P("span",null,K(R(e)("Type")),1),Dt(" : "+K(s.attributes.type_rivet),1),n[1]||(n[1]=P("br",null,null,-1)),P("span",null,K(R(e)("Croquis")),1),n[2]||(n[2]=Dt(" : ",-1)),s.attributes.has_sketch?(U(),se("span",k3e,[P("a",{class:"no-print",target:"_blank",download:"",href:`${R(t)}?name=${s.attributes.nom_croq}`},K(R(e)("Obtenir le fichier sous format pdf")),9,P3e)])):Ge("",!0),s.attributes.has_sketch?Ge("",!0):(U(),se("span",G3e,K(R(e)("Croquis indisponible")),1))]),_:1},8,["layers","currentUrl"]))}}),O3e={key:0},F3e=["href"],N3e={key:1},B3e=rt({__name:"ng95-new-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct(),t="https://migration.geoportail.lu/downloadsketch";return(i,n)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:s})=>[P("h4",null,K(R(e)(s.attributes.Nom)),1),P("span",null,K(R(e)("Elevation")),1),Dt(" : "+K(s.attributes["nouv. cote"]),1),n[0]||(n[0]=P("br",null,null,-1)),P("span",null,K(R(e)("Type")),1),Dt(" : "+K(s.attributes["type rivet"]),1),n[1]||(n[1]=P("br",null,null,-1)),P("span",null,K(R(e)("Croquis")),1),n[2]||(n[2]=Dt(" : ",-1)),s.attributes.has_sketch?(U(),se("span",O3e,[P("a",{class:"no-print",target:"_blank",download:"",href:`${R(t)}?id=${s.attributes.OBJECTID}&type=new`},K(R(e)("Obtenir le fichier sous format pdf")),9,F3e)])):Ge("",!0),s.attributes.has_sketch?Ge("",!0):(U(),se("span",N3e,K(R(e)("Croquis indisponible")),1))]),_:1},8,["layers","currentUrl"]))}}),D3e={key:0},V3e={key:1},Z3e={key:2},z3e={key:3},U3e={key:4},H3e={key:5},X3e={key:6},q3e={key:7},Y3e={key:8},K3e={key:9},j3e={key:10},$3e={key:11},J3e={key:12},Q3e={key:13},e5e={key:14},t5e={key:15},a5e={key:16},i5e={key:17},n5e={key:18},r5e=["href"],s5e={key:19},o5e=["href"],l5e={key:20},u5e=["href"],c5e={key:21},d5e=["href"],h5e={key:22},_5e=["src"],m5e={key:23},f5e=rt({__name:"npour-poi-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{t:e}=Ct(),{i18next:t}=Ct();return(i,n)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:s})=>[R(t).language=="de"&&R(Si)("title_de",s,0)?(U(),se("h3",D3e,K(s.attributes.title_de),1)):Ge("",!0),R(t).language=="en"&&R(Si)("title_en",s,0)?(U(),se("h3",V3e,K(s.attributes.title_en),1)):Ge("",!0),R(t).language=="lb"&&R(Si)("title_nl",s,0)?(U(),se("h3",Z3e,K(s.attributes.title_nl),1)):Ge("",!0),R(t).language=="fr"&&R(Si)("title_fr",s,0)?(U(),se("h3",z3e,K(s.attributes.title_fr),1)):Ge("",!0),R(t).language=="de"&&R(Si)("nom_de",s,0)?(U(),se("h3",U3e,K(s.attributes.nom_de),1)):Ge("",!0),R(t).language=="fr"&&R(Si)("nom_fr",s,0)?(U(),se("h3",H3e,K(s.attributes.nom_fr),1)):Ge("",!0),R(t).language=="en"&&R(Si)("nom_en",s,0)?(U(),se("h3",X3e,K(s.attributes.nom_en),1)):Ge("",!0),R(t).language=="lb"&&R(Si)("nom_lu",s,0)?(U(),se("h3",q3e,K(s.attributes.nom_lu),1)):Ge("",!0),R(t).language=="de"&&R(Si)("descr_de",s,0)?(U(),se("span",Y3e,K(s.attributes.descr_de),1)):Ge("",!0),R(t).language=="fr"&&R(Si)("descr_fr",s,0)?(U(),se("span",K3e,K(s.attributes.descr_fr),1)):Ge("",!0),R(t).language=="en"&&R(Si)("descr_en",s,0)?(U(),se("span",j3e,K(s.attributes.descr_en),1)):Ge("",!0),R(t).language=="lb"&&R(Si)("descr_nl",s,0)?(U(),se("span",$3e,K(s.attributes.descr_nl),1)):Ge("",!0),R(Si)("number",s,0)?(U(),se("span",J3e,K(s.attributes.number)+",",1)):Ge("",!0),R(Si)("street",s,0)?(U(),se("span",Q3e,K(s.attributes.street),1)):Ge("",!0),R(Si)("town",s,0)?(U(),se("span",e5e,K(s.attributes.zip)+" "+K(s.attributes.town),1)):Ge("",!0),R(Si)("phone",s,1)?(U(),se("span",t5e,[n[1]||(n[1]=P("i",{class:"fa fa-phone","aria-hidden":"true"},null,-1)),P("span",null,K(s.attributes.phone),1)])):Ge("",!0),R(Si)("fax",s,1)?(U(),se("span",a5e,[n[2]||(n[2]=P("i",{class:"fa fa-fax","aria-hidden":"true"},null,-1)),P("span",null,K(s.attributes.fax),1)])):Ge("",!0),R(Si)("email",s,1)?(U(),se("span",i5e,[n[3]||(n[3]=P("i",{class:"fa fa-at","aria-hidden":"true"},null,-1)),P("span",null,K(s.attributes.email),1)])):Ge("",!0),R(Si)("website",s,3)&&s.attributes.website.startsWith("http")?(U(),se("span",n5e,[P("a",{target:"_blank",href:s.attributes.website},K(s.attributes.website),9,r5e)])):Ge("",!0),R(Si)("website",s,3)&&!s.attributes.website.startsWith("http")?(U(),se("span",s5e,[P("a",{target:"_blank",href:"http://"+s.attributes.website},K(s.attributes.website),9,o5e)])):Ge("",!0),R(t).language!="fr"&&R(Si)("link_de",s,3)?(U(),se("span",l5e,[P("a",{target:"_blank",href:s.attributes.link_de},K(s.attributes.link_de),9,u5e)])):Ge("",!0),R(t).language=="fr"&&R(Si)("link_fr",s,3)?(U(),se("span",c5e,[P("a",{target:"_blank",href:s.attributes.link_fr},K(s.attributes.link_fr),9,d5e)])):Ge("",!0),R(Si)("Bild",s,3)?(U(),se("span",h5e,[P("img",{src:s.attributes.Bild,width:"250"},null,8,_5e)])):Ge("",!0),R(Si)("longueur sentier",s,0)?(U(),se("div",m5e,[P("span",null,K(R(e)("Longueur du sentier :")),1),P("span",null,K(s.attributes["longueur sentier"]),1)])):Ge("",!0),gt(uh,{feature:s,onExport:n[0]||(n[0]=r=>i.$emit("export",r))},null,8,["feature"])]),_:1},8,["layers","currentUrl"]))}}),g5e=ir(f5e,[["__scopeId","data-v-e980fdd2"]]),p5e={key:0},y5e={key:1},b5e={key:2},v5e={key:3},x5e={key:4},w5e={key:5},C5e={key:6},I5e={key:7},S5e={key:8},A5e={key:9},T5e={key:10},E5e={key:11},M5e={key:12},L5e=["href"],R5e={key:13},k5e=["href"],P5e={key:14},G5e=["src"],W5e={key:15},O5e=rt({__name:"npour-wo-address-poi-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{t:e}=Ct(),{i18next:t}=Ct();return(i,n)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:s})=>[R(t).language=="de"&&R(Si)("title_de",s,0)?(U(),se("h3",p5e,K(s.attributes.title_de),1)):Ge("",!0),R(t).language=="en"&&R(Si)("title_en",s,0)?(U(),se("h3",y5e,K(s.attributes.title_en),1)):Ge("",!0),R(t).language=="lb"&&R(Si)("title_nl",s,0)?(U(),se("h3",b5e,K(s.attributes.title_nl),1)):Ge("",!0),R(t).language=="fr"&&R(Si)("title_fr",s,0)?(U(),se("h3",v5e,K(s.attributes.title_fr),1)):Ge("",!0),R(t).language=="de"&&R(Si)("nom_de",s,0)?(U(),se("h3",x5e,K(s.attributes.nom_de),1)):Ge("",!0),R(t).language=="fr"&&R(Si)("nom_fr",s,0)?(U(),se("h3",w5e,K(s.attributes.nom_fr),1)):Ge("",!0),R(t).language=="en"&&R(Si)("nom_en",s,0)?(U(),se("h3",C5e,K(s.attributes.nom_en),1)):Ge("",!0),R(t).language=="lb"&&R(Si)("nom_lu",s,0)?(U(),se("h3",I5e,K(s.attributes.nom_lu),1)):Ge("",!0),R(t).language=="de"&&R(Si)("descr_de",s,0)?(U(),se("span",S5e,K(s.attributes.descr_de),1)):Ge("",!0),R(t).language=="fr"&&R(Si)("descr_fr",s,0)?(U(),se("span",A5e,K(s.attributes.descr_fr),1)):Ge("",!0),R(t).language=="en"&&R(Si)("descr_en",s,0)?(U(),se("span",T5e,K(s.attributes.descr_en),1)):Ge("",!0),R(t).language=="lb"&&R(Si)("descr_nl",s,0)?(U(),se("span",E5e,K(s.attributes.descr_nl),1)):Ge("",!0),R(t).language!="fr"&&R(Si)("link_de",s,3)?(U(),se("span",M5e,[P("a",{target:"_blank",href:s.attributes.link_de},K(s.attributes.link_de),9,L5e)])):Ge("",!0),R(t).language=="fr"&&R(Si)("link_fr",s,3)?(U(),se("span",R5e,[P("a",{target:"_blank",href:s.attributes.link_fr},K(s.attributes.link_fr),9,k5e)])):Ge("",!0),R(Si)("Bild",s,3)?(U(),se("span",P5e,[P("img",{src:s.attributes.Bild,width:"250"},null,8,G5e)])):Ge("",!0),R(Si)("longueur sentier",s,0)?(U(),se("div",W5e,[P("span",null,K(R(e)("Longueur du sentier :")),1),P("span",null,K(s.attributes["longueur sentier"]),1)])):Ge("",!0)]),_:1},8,["layers","currentUrl"]))}}),F5e=ir(O5e,[["__scopeId","data-v-83fc1248"]]),N5e=["href"],B5e={key:1},D5e=["href"],V5e=rt({__name:"pcn-pag-template",props:{layers:{},currentUrl:{}},setup(a){const e="https://migration.geoportail.lu/pagreport",{t}=Ct();return(i,n)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"layer-content":Ht(()=>[a.layers.features.length?(U(),se("a",{key:0,class:"lux-btn",download:"",href:`${R(e)}/${R(E4e)(a.layers.features,"OBJECTID",",")}.pdf`,target:"_blank"},K(R(t)("Generer un rapport pour toutes les selections")),9,N5e)):(U(),se("span",B5e,K(R(t)("Aucune information disponible pour cette couche")),1))]),"feature-content":Ht(({feature:s})=>[P("span",null,K(R(t)("Identifiant")),1),Dt(" : "+K(s.attributes.OBJECTID),1),n[0]||(n[0]=P("br",null,null,-1)),P("a",{class:"lux-btn",download:"",href:`${R(e)}/${s.attributes.OBJECTID}.pdf`,target:"_blank"},K(R(t)("Generer Rapport (peut prendre 30 sec)")),9,D5e)]),_:1},8,["layers","currentUrl"]))}}),Z5e={class:"lux-poi-title"},z5e={class:"lux-feature-info"},U5e={class:"poi-feature"},H5e={class:"pag-form-container"},X5e={class:"pag-mail"},q5e={class:"pag-checkbox"},Y5e=["innerHTML"],K5e=rt({__name:"pag-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{authenticated:e,currentUser:t}=xt(Nu()),n=a.layers,{addNotification:s}=ar(),r=Ye(""),l=St(()=>e.value&&t.value?.mail||"");r.value=l.value;const u=Ye(!1),{t:d}=Ct(),h="https://migration.geoportail.lu/pag";function g(x,C,I){return x.map(function(A){return A.attributes[C]}).join(I)}async function y(){if(!r.value&&!/^\S+@\S+\.\S+$/.test(r.value)){s(d("Veuillez saisir une adresse email valide"),fi.WARNING);return}if(!u.value){s(d("Veuillez accepter les termes du rapport"),fi.WARNING);return}const x=new URLSearchParams({email:r.value,staging:"false"});fetch(h+"/report/"+g(n.features,"OBJECTID",",")+".pdf",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:x}),s(d("Votre rapport est en train d'tre gnr. Un email vous sera envoy  l'adresse {{email}} ds qu'il sera disponible",{email:r.value,ns:"client"}),fi.INFO)}return(x,C)=>(U(),se(Tt,null,[P("h1",Z5e,K(R(d)(R(n).layerLabel)),1),P("div",z5e,[P("div",U5e,[P("label",null,K(R(d)("Ici vous pouvez commander le rapport relatif aux rgles urbanistiques applicables au terrain sctionn")),1),C[3]||(C[3]=P("br",null,null,-1)),C[4]||(C[4]=P("br",null,null,-1)),P("div",H5e,[P("div",X5e,[P("label",null,K(R(d)("Adresse Email")),1),Sa(P("input",{type:"text","onUpdate:modelValue":C[0]||(C[0]=I=>r.value=I),style:{width:"165px"}},null,512),[[Vn,r.value]])]),P("div",q5e,[Sa(P("input",{type:"checkbox","onUpdate:modelValue":C[1]||(C[1]=I=>u.value=I),id:"terms"},null,512),[[Xd,u.value]]),P("label",{for:"terms",innerHTML:R(d)("En cochant cette case, l'utilisateur dclare avoir lu, compris et accept les <a target='_blank' rel='noopener noreferrer' href='https://files.geoportail.lu/pag/Disclaimer.pdf'>conditions gnrales d'utilisation </a>de ce site web")},null,8,Y5e)])]),P("button",{class:"lux-btn-grey",onClick:C[2]||(C[2]=I=>y()),target:"_blank"},K(R(d)("Commander rapport")),1)])])],64))}}),j5e=ir(K5e,[["__scopeId","data-v-d5f704f5"]]),$5e={class:"lux-poi-title"},J5e={class:"lux-feature-info"},Q5e={class:"poi-feature"},eTe={class:"pag-form-container"},tTe={class:"pag-mail"},aTe={class:"pag-checkbox"},iTe=["innerHTML"],nTe=rt({__name:"pag-staging-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{authenticated:e,currentUser:t}=xt(Nu()),n=a.layers,{addNotification:s}=ar(),r=Ye(""),l=St(()=>e.value&&t.value?.mail||"");r.value=l.value;const u=Ye(!1),{t:d}=Ct(),h="https://migration.geoportail.lu/pag";function g(x,C,I){return x.map(function(A){return A.attributes[C]}).join(I)}async function y(){if(!r.value&&!/^\S+@\S+\.\S+$/.test(r.value)){s(d("Veuillez saisir une adresse email valide"),fi.WARNING);return}if(!u.value){s(d("Veuillez accepter les termes du rapport"),fi.WARNING);return}const x=new URLSearchParams({email:r.value,staging:"true"});fetch(h+"/report/"+g(n.features,"OBJECTID",",")+".pdf",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:x}),s(d("Votre rapport est en train d'tre gnr. Un email vous sera envoy  l'adresse {{email}} ds qu'il sera disponible",{email:r.value,ns:"client"}),fi.INFO)}return(x,C)=>(U(),se(Tt,null,[P("h1",$5e,K(R(d)(R(n).layerLabel)),1),P("div",J5e,[P("div",Q5e,[P("label",null,K(R(d)("Ici vous pouvez commander le rapport relatif aux rgles urbanistiques applicables au terrain sctionn")),1),C[3]||(C[3]=P("br",null,null,-1)),C[4]||(C[4]=P("br",null,null,-1)),P("div",eTe,[P("div",tTe,[P("label",null,K(R(d)("Adresse Email")),1),Sa(P("input",{type:"text","onUpdate:modelValue":C[0]||(C[0]=I=>r.value=I),style:{width:"165px"}},null,512),[[Vn,r.value]])]),P("div",aTe,[Sa(P("input",{type:"checkbox","onUpdate:modelValue":C[1]||(C[1]=I=>u.value=I),id:"terms"},null,512),[[Xd,u.value]]),P("label",{for:"terms",innerHTML:R(d)("En cochant cette case, l'utilisateur dclare avoir lu, compris et accept les <a target='_blank' rel='noopener noreferrer' href='https://files.geoportail.lu/pag/Disclaimer.pdf'>conditions gnrales d'utilisation </a>de ce site web")},null,8,iTe)])]),P("button",{class:"lux-btn-grey",onClick:C[2]||(C[2]=I=>y()),target:"_blank"},K(R(d)("Commander rapport")),1)])])],64))}}),rTe=ir(nTe,[["__scopeId","data-v-5ecbf7b0"]]),sTe={class:"lux-poi-title"},oTe={class:"lux-feature-info"},lTe={class:"poi-feature"},uTe={class:"pds-form-container"},cTe={class:"pds-mail"},dTe=rt({__name:"pds-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{authenticated:e,currentUser:t}=xt(Nu()),n=a.layers,{addNotification:s}=ar(),r=Ye(""),l=St(()=>e.value&&t.value?.mail||"");r.value=l.value;const{t:u}=Ct(),d="https://migration.geoportail.lu/pds";function h(y,x,C){return y.map(function(I){return I.attributes[x]}).join(C)}async function g(){if(!r.value&&!/^\S+@\S+\.\S+$/.test(r.value)){s(u("Veuillez saisir une adresse email valide"),fi.WARNING);return}const y=new URLSearchParams({email:r.value,staging:"false"});fetch(d+"/report/"+h(n.features,"textstring",",")+".pdf",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:y}),s(u("Votre attestation est en train d'tre gnr. Un email vous sera envoy  l'adresse {{email}} ds qu'il sera disponible",{email:r.value,ns:"client"}),fi.INFO)}return(y,x)=>(U(),se(Tt,null,[P("h1",sTe,K(R(u)(R(n).layerLabel)),1),P("div",oTe,[P("div",lTe,[P("label",null,K(R(u)(`Ici vous pouvez commander l'attestation "plans directeurs sectoriels" par rapport au terrain sctionn`)),1),x[2]||(x[2]=P("br",null,null,-1)),x[3]||(x[3]=P("br",null,null,-1)),P("div",uTe,[P("div",cTe,[P("label",null,K(R(u)("Adresse Email")),1),Sa(P("input",{type:"text","onUpdate:modelValue":x[0]||(x[0]=C=>r.value=C),style:{width:"165px"}},null,512),[[Vn,r.value]])])]),P("button",{class:"lux-btn-grey",onClick:x[1]||(x[1]=C=>g()),target:"_blank"},K(R(u)("Commander rapport")),1)])])],64))}}),hTe=ir(dTe,[["__scopeId","data-v-eadcbafd"]]),_Te=["src"],mTe=rt({__name:"pegel-template",props:{layers:{},currentUrl:{}},setup(a){return(e,t)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:i})=>[P("h3",null,K(i.attributes.Nom),1),P("iframe",{width:"300",height:"1500",frameborder:"0",src:R(CB)("http://geoportail.eau.etat.lu/pdf/112/"+i.attributes.Nom+".html")},null,8,_Te)]),_:1},8,["layers","currentUrl"]))}}),fTe=rt({__name:"remembrements-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct();return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("span",null,K(R(e)("Nom")),1),Dt(" : "+K(n.attributes.K_NAME),1),i[0]||(i[0]=P("br",null,null,-1)),P("span",null,K(R(e)("Statut")),1),i[1]||(i[1]=Dt(" : ",-1)),P("span",null,K(R(e)("rem_status_"+n.attributes.K_STATUS)),1),i[2]||(i[2]=P("br",null,null,-1)),P("span",null,K(R(e)("Type")),1),i[3]||(i[3]=Dt(" : ",-1)),P("span",null,K(R(e)("rem_typ_"+n.attributes.K_TYP)),1)]),_:1},8,["layers","currentUrl"]))}}),gTe={key:0,class:"my-3"},pTe=["href"],yTe={key:1},bTe=rt({__name:"sentier-nature-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const e=a,t="https://migration.geoportail.lu/downloadresource",{t:i}=Ct();function n(s){return`${e.currentUrl}&fid=${e.layers.layer}_${s.attributes.id_qr}`}return(s,r)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl,getDirectLink:n},{"feature-content":Ht(({feature:l})=>[P("h4",null,K(l.attributes.sentier),1),R(b_)(l)?(U(),se(Tt,{key:0},[P("div",null,[P("label",null,K(R(i)("Longueur du parcours")),1),r[1]||(r[1]=Dt(" : ",-1)),P("span",null,K(l.attributes.formatted_length),1),l.attributes.link?(U(),se("div",gTe,[P("a",{class:"lux-btn py-2",href:`${R(t)}?fid=${a.layers.layer}_${l.attributes.objectid}&attribute=link&id_attribute=objectid`,target:"_blank"},K(R(i)("Tlcharger la brochure")),9,pTe)])):Ge("",!0)]),gt(uh,{feature:l,onExport:r[0]||(r[0]=u=>s.$emit("export",u))},null,8,["feature"])],64)):(U(),se("div",yTe,K(R(i)("Aucune information disponible pour cette couche")),1))]),_:1},8,["layers","currentUrl"]))}}),vTe={class:"text-white text-3xl"},xTe=["href"],wTe=["src"],CTe=rt({__name:"urplang-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct();return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("h2",vTe,K(n.attributes.nom_commune)+" "+K(n.attributes.section)+" "+K(n.attributes.feuille),1),n.attributes.thumb?(U(),se(Tt,{key:0},[P("a",{href:n.attributes.path,target:"_blank"},[P("img",{src:n.attributes.thumb,width:"250"},null,8,wTe)],8,xTe),P("span",null,K(R(e)("Cliquez dans l'image pour agrandir")),1)],64)):Ge("",!0)]),_:1},8,["layers","currentUrl"]))}}),ITe=rt({__name:"viti-flik",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct();return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("span",null,K(R(e)("Numero FLIK")),1),Dt(" : "+K(n.attributes.CODE_ELEM)+K(n.attributes.FLIK),1),i[0]||(i[0]=P("br",null,null,-1)),P("span",null,K(R(e)("Commune cadastrale")),1),Dt(" : "+K(n.attributes.CODE_COM),1),i[1]||(i[1]=P("br",null,null,-1)),P("span",null,K(R(e)("Section cadastrale")),1),Dt(" : "+K(n.attributes.CODE_SECT),1),i[2]||(i[2]=P("br",null,null,-1)),P("span",null,K(R(e)("Surface")),1),Dt(" : "+K(n.attributes.F_Area_2021)+" a ",1)]),_:1},8,["layers","currentUrl"]))}}),STe=rt({__name:"viti-kleinlage",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct();return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("span",null,K(R(e)("Nom")),1),Dt(" : "+K(n.attributes.kleinlage),1)]),_:1},8,["layers","currentUrl"]))}}),ATe=rt({__name:"viti-name",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct();return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("span",null,K(R(e)("Nom")),1),Dt(" : "+K(n.attributes.grosslage),1)]),_:1},8,["layers","currentUrl"]))}}),TTe=rt({__name:"viti-parcels",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=Ct();return(t,i)=>(U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:n})=>[P("span",null,K(R(e)("Numero")),1),Dt(" : V"+K(n.attributes.Weinbergsn),1),i[0]||(i[0]=P("br",null,null,-1)),P("span",null,K(R(e)("Commune")),1),Dt(" : "+K(n.attributes.CODE_COM),1),i[1]||(i[1]=P("br",null,null,-1)),P("span",null,K(R(e)("Section")),1),Dt(" : "+K(n.attributes.CODE_SECT),1),i[2]||(i[2]=P("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),ETe={key:0,class:"mt-2 mb-3"},MTe=["src"],LTe={class:"flex flex-row justify-end"},RTe=["href"],kTe=["href"],PTe=rt({__name:"info-feature-measurement-modale",props:{measurement:{}},setup(a){const e=a,t="https://migration.geoportail.lu/previewmeasurement",i="https://migration.geoportail.lu/downloadmeasurement",{t:n,i18next:s}=Ct(),r=St(()=>Kg.sanitizeUrl(t+"?document_id="+e.measurement.document_id));return(l,u)=>a.measurement?(U(),Lt(E_,{key:0,footer:!0,"max-height":!0,title:R(n)("Prvisualisation du mesurage"),onClose:u[1]||(u[1]=d=>l.$emit("close"))},{content:Ht(()=>[a.measurement.isDownloadable?Ge("",!0):(U(),se("p",ETe,K(R(n)("Pour des raisons de protection de donnes, nous ne pouvons pas afficher les documents de la mensuration officielle en rsolution complte, par contre vous avez la possibilit de les commander de manire individuelle et traable")),1)),r.value?(U(),se("img",{key:1,src:r.value},null,8,MTe)):Ge("",!0)]),footer:Ht(()=>[P("div",LTe,[P("button",{type:"button",class:"lux-btn","data-dismiss":"modal",onClick:u[0]||(u[0]=d=>l.$emit("close"))},K(R(n)("Annuler")),1),a.measurement.is_downloadable?(U(),se("a",{key:1,class:"lux-btn ml-3",target:"_blank",href:`${R(i)}?document_id=${a.measurement.document_id}`},K(R(n)("Tlcharger")),9,kTe)):(U(),se("a",{key:0,class:"lux-btn ml-3",target:"_blank",href:`https://commande.geoportail.lu?&camefrom=mapv3&lang=${R(s).language}&documents=MESURAGE;EXTRAIT_MIXTE&ids=['${a.measurement.parcelId}']&remark=${a.measurement.description}`},K(R(n)("Commander")),9,RTe))])]),_:1},8,["title"])):Ge("",!0)}}),GTe={key:0,class:"flex"},WTe={key:1,class:"flex"},OTe={class:"flex"},FTe={key:2},NTe=["href"],BTe={key:3},DTe=["href"],VTe={class:"list-disc pl-6"},ZTe=["onClick"],zTe=["href"],UTe=["href"],HTe=["href"],XTe=rt({__name:"parcels-template",props:{layers:{},currentUrl:{}},setup(a){const e="https://migration.geoportail.lu/downloadmeasurement",{t}=Ct(),i=Ye();function n(r){i.value=r}function s(){i.value=void 0}return(r,l)=>(U(),se(Tt,null,[i.value?(U(),Lt(PTe,{key:0,measurement:i.value,onClose:s},null,8,["measurement"])):Ge("",!0),gt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:u})=>[P("h2",null,K(u.attributes.PF.mainNumber)+"/"+K(u.attributes.PF.additionalNumber),1),P("span",null,K(R(t)("Commune")),1),Dt(" : "+K(u.attributes.PF.townName),1),l[1]||(l[1]=P("br",null,null,-1)),P("span",null,K(R(t)("Section")),1),Dt(" : "+K(u.attributes.PF.sectionDesignation),1),l[2]||(l[2]=P("br",null,null,-1)),P("span",null,K(R(t)("Numero cadastral")),1),Dt(" : "+K(u.attributes.PF.mainNumber)+"/"+K(u.attributes.PF.additionalNumber),1),l[3]||(l[3]=P("br",null,null,-1)),P("span",null,K(R(t)("Contenance")),1),Dt(" : "+K(u.attributes.PF.capacity),1),l[4]||(l[4]=P("br",null,null,-1)),P("span",null,K(R(t)("Lieudit")),1),Dt(" : "+K(u.attributes.PF.locality),1),l[5]||(l[5]=P("br",null,null,-1)),u.attributes.PF.farmingTypes&&Object.keys(u.attributes.PF.farmingTypes).length>0?(U(),se("div",GTe,[P("span",null,K(R(t)("Nature")),1),Dt(" : "+K(R(_6)(u.attributes.PF.farmingTypes,"pf")),1)])):Ge("",!0),u.attributes.PF.occupations&&Object.keys(u.attributes.PF.occupations).length>0?(U(),se("div",WTe,[P("span",null,K(R(t)("Occupation")),1),Dt(" : "+K(R(_6)(u.attributes.PF.occupations,"pf")),1)])):Ge("",!0),P("div",OTe,[P("span",null,K(R(t)("Dernier mesurage")),1),Dt(" : "+K(u.attributes.PF.measurementNumber),1)]),R(J2)("go")?(U(),se("div",FTe,[P("a",{class:"lux-btn inline-block mb-1",href:`https://shop.geoportail.lu/Portail/express_mesurage/?ids=['${u.attributes.textstring}']&camefrom=mapv3_go&lang=${R(Va).language}`,target:"_blank"},K(R(t)("Constitution de dossier de mesurage")),9,NTe)])):Ge("",!0),R(J2)("go")||R(J2)("prof")||R(J2)("municipalities")?(U(),se("div",BTe,[P("a",{class:"lux-btn inline-block mb-1",href:`https://xxpfo.intranet.etat.lu/xxpfoi/detail_parcelle.do?noParcelle=${u.attributes.textstring}`,target:"_blank"},K(R(t)("Ouvrir la PF")),9,DTe)])):Ge("",!0),P("span",null,K(R(t)("Lien vers les mesurages")),1),l[6]||(l[6]=Dt(" : ",-1)),P("ul",VTe,[(U(!0),se(Tt,null,gi(u.attributes.measurements,d=>(U(),se("li",{key:d.measurementNumber},[d.document_id?(U(),se(Tt,{key:0},[P("a",{class:"cursor-pointer",target:"_blank",onClick:h=>n(d)},"No "+K(d.measurementNumber)+" "+K(R(t)("MESURAGE_"+d.description))+" "+K(R(yT)(d.date_document)),9,ZTe),d.is_downloadable?(U(),se("a",{key:0,target:"_blank",href:`${R(e)}?document_id=${d.document_id}`},[...l[0]||(l[0]=[P("i",{class:"fa fa-download","aria-hidden":"true"},null,-1)])],8,zTe)):Ge("",!0)],64)):(U(),se(Tt,{key:1},[P("span",null,K(R(t)("Mesurage non disponible")),1),Dt(" : "+K(d.measurementNumber),1)],64))]))),128))]),P("a",{class:"lux-btn inline-block mb-1",href:`https://historique.geoportail.lu/?id=${u.attributes.textstring}`,target:"_blank"},K(R(t)("Historique de la parcelle")),9,UTe),P("a",{class:"lux-btn inline-block mb-1",href:`https://commande.geoportail.lu/?ids=['${u.attributes.textstring}']&camefrom=mapv3&lang=${R(Va).language}`,target:"_blank"},K(R(t)("Commander un extrait")),9,HTe)]),_:1},8,["layers","currentUrl"])],64))}}),oA=ir(XTe,[["__scopeId","data-v-1f727398"]]),qTe={key:0},YTe={key:0},KTe={key:0},jTe={key:1},$Te=["href"],JTe={key:1},QTe={key:0,class:"ng-hide"},eEe=["href"],tEe={key:0},aEe={key:2},iEe=rt({__name:"default-attachment-no-prefix-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const e="https://migration.geoportail.lu/downloadpdf",{t}=Ct();return(i,n)=>{const s=El("dompurify-html");return U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:r})=>[r.attributes.label?(U(),se("h4",qTe,K(R(t)(r.attributes.label)),1)):Ge("",!0),R(b_)(r)?(U(),se(Tt,{key:1},[(U(!0),se(Tt,null,gi(R(jp)(r.attributes,a.layers.ordered,""),l=>(U(),se("div",{key:l.key},[!["has_sketch","sketches"].includes(l.key)&&!R(rf)(l.value)&&R(Wb)(l,a.layers.layer,R(Va).language)?(U(),se("span",YTe,[R(Ls)(l.value)?Ge("",!0):(U(),se("div",KTe,[P("label",null,K(R(t)(l.key))+" : ",1),Sa(P("span",null,null,512),[[s,l.value]])])),R(Ls)(l.value)?(U(),se("div",jTe,[n[1]||(n[1]=P("label",null,null,-1)),P("a",{href:l.value,target:"_blank"},K(R(t)(l.key)),9,$Te)])):Ge("",!0)])):["sketches"].includes(l.key)?(U(),se("span",JTe,[P("label",null,K(R(t)("Attachment"))+" : ",1),r.attributes.has_sketch?(U(),se("span",QTe,[P("ul",null,[(U(!0),se(Tt,null,gi(r.attributes.sketches,u=>(U(),se("li",{key:u.id},[P("a",{class:"no-print",target:"_blank",download:"",href:`${R(e)}?fid=${r.fid}&sketch_id=${u.id}`},K(R(t)(u.name)),9,eEe)]))),128))])])):Ge("",!0)])):Ge("",!0)]))),128)),a.layers.has_profile?(U(),se("div",tEe,[gt(uh,{feature:r,onExport:n[0]||(n[0]=l=>i.$emit("export",l))},null,8,["feature"])])):Ge("",!0)],64)):(U(),se("div",aEe,[P("span",null,K(R(t)("Aucune information disponible pour cette couche")),1)]))]),_:1},8,["layers","currentUrl"])}}}),nEe={key:0},rEe={key:0},sEe={key:0},oEe={key:1},lEe=["href"],uEe={key:1},cEe={key:0,class:"ng-hide"},dEe=["href"],hEe={key:0},_Ee={key:2},mEe=rt({__name:"default-attachment-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const e="https://migration.geoportail.lu/downloadpdf",{t}=Ct();return(i,n)=>{const s=El("dompurify-html");return U(),Lt(sn,{layers:a.layers,currentUrl:a.currentUrl},{"feature-content":Ht(({feature:r})=>[r.attributes.label?(U(),se("h4",nEe,K(R(t)(r.attributes.label)),1)):Ge("",!0),R(b_)(r)?(U(),se(Tt,{key:1},[(U(!0),se(Tt,null,gi(R(jp)(r.attributes,a.layers.ordered),l=>(U(),se("div",{key:l.key},[!["f_has_sketch","f_sketches"].includes(l.key)&&!R(rf)(l.value)&&R(Wb)(l,a.layers.layer,R(Va).language)?(U(),se("span",rEe,[R(Ls)(l.value)?Ge("",!0):(U(),se("div",sEe,[P("label",null,K(R(t)(l.key))+" : ",1),Sa(P("span",null,null,512),[[s,l.value]])])),R(Ls)(l.value)?(U(),se("div",oEe,[n[1]||(n[1]=P("label",null,null,-1)),P("a",{href:l.value,target:"_blank"},K(R(t)(l.key)),9,lEe)])):Ge("",!0)])):["f_sketches"].includes(l.key)?(U(),se("span",uEe,[P("label",null,K(R(t)("Fichier  tlcharger"))+" : ",1),r.attributes.has_sketch?(U(),se("span",cEe,[P("ul",null,[(U(!0),se(Tt,null,gi(r.attributes.sketches,u=>(U(),se("li",{key:u.id},[P("a",{class:"no-print",target:"_blank",download:"",href:`${R(e)}?fid=${r.fid}&sketch_id=${u.id}`},K(R(t)(u.name)),9,dEe)]))),128))])])):Ge("",!0)])):Ge("",!0)]))),128)),a.layers.has_profile?(U(),se("div",hEe,[gt(uh,{feature:r,onExport:n[0]||(n[0]=l=>i.$emit("export",l))},null,8,["feature"])])):Ge("",!0)],64)):(U(),se("div",_Ee,[P("span",null,K(R(t)("Aucune information disponible pour cette couche")),1)]))]),_:1},8,["layers","currentUrl"])}}}),fEe=rt({__name:"feature-info",props:{content:{type:Array,required:!0}},setup(a){const e=window.location.href,t=qa().getOlMap(),{featureInfoPrintableRef:i}=xt(EE()),n=d=>i.value=d,s={"adresse.html":k4e,"aero.html":O4e,"affaires.html":F4e,"asta_esp.html":D4e,"automatic_sols.html":tAe,"batiments.html":aAe,"bus_wo_title.html":nAe,"bus.html":sAe,"casipo.html":fAe,"default.html":m6,"default_attachment.html":mEe,"default_attachment_no_prefix.html":iEe,"default_table.html":zAe,"default_table_no_prefix.html":QAe,"flik.html":e3e,"forage_virtuel.html":o3e,"lignes_bus.html":g3e,"meteo.html":y3e,"meteolux_europe.html":b3e,"meteolux_gr.html":v3e,"mymaps.html":M3e,"mo.html":R3e,"ng95.html":W3e,"ng95_new.html":B3e,"npour_poi.html":g5e,"npour_poi_wo_address.html":F5e,"parcels.html":oA,"parcels_prof.html":oA,"parcels_go.html":oA,"pcn_pag.html":V5e,"pag.html":j5e,"pag_staging.html":rTe,"pds.html":hTe,"pegel.html":mTe,"remembrements.html":fTe,"sentier_nature.html":bTe,"urplang.html":CTe,"viti_flik.html":ITe,"viti_kleinlage.html":STe,"viti_name.html":ATe,"viti_parcels.html":TTe},r=d=>s[d]||m6;function l(d){d.feature.attributes&&!d.feature.properties&&(d.feature.properties=d.feature.attributes);const h=new $l().readFeature(d.feature,{dataProjection:tu,featureProjection:t.getView().getProjection()});fI.export(t,d.format,[h],d.feature.attributes.name||d.format,!0)}function u(...d){const[h]=d;l(h)}return(d,h)=>a.content&&a.content.length?(U(),se("div",{key:0,ref:n,class:"absolute w-11/12"},[(U(!0),se(Tt,null,gi(a.content,(g,y)=>(U(),Lt(rb(r(g.template)),{key:y,layers:g,currentUrl:R(e),onExport:u},null,40,["layers","currentUrl"]))),128))])):Ge("",!0)}}),gEe={key:0,"data-cy":"locationInfo",class:"absolute"},pEe={key:1,class:"text-white absolute"},yEe={class:"flex flex-col gap-3 mr-5 mt-4 italic"},bEe=rt({__name:"info-panel",setup(a){const{t:e}=Ct(),t=ri(),{locationInfoCoords:i}=xt(nf()),n=qa().olMap,{infoOpen:s}=xt(t),{clearContent:r}=ef(),{featureInfoPanelContent:l,isLoading:u}=xt(ef());return Rt(s,d=>{d||r()}),(d,h)=>(U(),Lt(mf,{"data-cy-value":"infoPanel","close-fn":()=>R(t).toggleInfoOpen(!1)},{header:Ht(()=>[P("h1",null,K(R(e)("infos",{ns:"client"})),1)]),content:Ht(()=>[R(n)?Sa((U(),se("div",gEe,[gt(tye)],512)),[[Zm,R(i)]]):Ge("",!0),!R(i)&&!R(l)?(U(),se("div",pEe,[P("ul",yEe,[P("li",null,K(R(e)("A right click (tap and hold on mobile)...",{ns:"app"})),1),P("li",null,K(R(e)("A short click (tap on mobile)...",{ns:"app"})),1)])])):Ge("",!0),R(l)&&!R(u)?(U(),Lt(fEe,{key:2,content:R(l)},null,8,["content"])):Ge("",!0)]),_:1},8,["close-fn"]))}}),vEe={class:"text-white"},xEe={key:0,class:"small"};const wEe=["checked","onChange"],CEe=rt({__name:"lidar-config-panel",setup(a){const e=ri(),{t,i18next:i}=Ct(),n=tb(),{drawLidarActive:s,profileWidth:r,measureActive:l}=xt(n);function u(G,F){return["fr","en","de","lb"].includes(F)?G[F]:G.en}const d=n.lidarConfig.serverConfig.classification_colors;let h=dB();fn(()=>{h.init()});function g(){h.exportCsv()}function y(){h.exportPng()}function x(){h.exportLas()}function C(){h.resetPlot()}function I(){l.value=!l.value,l.value?A():E()}function A(){h.setMeasureActive()}function E(){l.value=!1,h.clearMeasure()}function L(G){G.visible=(G.visible+1)%2,h.updateData()}return(G,F)=>(U(),Lt(mf,{"data-cy-value":"lidarPanel","close-fn":()=>R(e).toggleLidarOpen(!1)},{header:Ht(()=>[P("h1",null,K(R(t)("lidar",{ns:"client"})),1)]),content:Ht(()=>[P("div",vEe,[P("p",null,[P("button",{class:Fa(["lux-btn mt-3",{active:R(s)}]),onClick:F[0]||(F[0]=B=>s.value=!R(s))},K(R(t)("Draw a lidar profile")),3)]),P("p",null,[Dt(K(R(t)("Profile width"))+" ",1),Sa(P("input",{type:"number",min:"0",max:"1000","onUpdate:modelValue":F[1]||(F[1]=B=>Pn(r)?r.value=B:null),style:{width:"5em","margin-right":"1em"}},null,512),[[Vn,R(r),void 0,{number:!0}]]),P("button",{class:"lux-btn mt-3",onClick:C},[...F[2]||(F[2]=[P("span",{class:"fa fa-refresh"},null,-1)])])]),R(s)?(U(),se("p",xEe,[P("em",null,K(R(t)("Draw a line on the map to display the corresponding LIDAR profile. Double clic to confirm.")),1)])):Ge("",!0),Ge("",!0),F[5]||(F[5]=P("hr",{style:{"margin-top":"10px"}},null,-1)),P("div",null,[P("div",null,K(R(t)("Classes")),1),(U(!0),se(Tt,null,gi(R(d),(B,Z)=>(U(),se("div",{key:Z,class:"checkbox"},[P("label",null,[P("input",{type:"checkbox",checked:B.visible===1,onChange:Y=>L(B)},null,40,wEe),P("span",null,K(u(B.name,R(i).language)),1)])]))),128))])])]),_:1},8,["close-fn"]))}}),IEe=ir(CEe,[["__scopeId","data-v-4bf93fb6"]]),SEe={class:"feedback-content text-white"},AEe={class:"text-lg font-bold mb-4"},TEe={class:"form-group"},EEe={for:"inputEmail",class:"block mb-2 font-medium"},MEe=["aria-label"],LEe={class:"form-group"},REe={for:"dropdownLayerPicker",class:"block mb-2 font-medium"},kEe={class:"relative"},PEe=["aria-label"],GEe={value:"",disabled:""},WEe=["value"],OEe={class:"form-group"},FEe={for:"inputDescription",class:"block mb-2 font-medium"},NEe=["aria-label"],BEe={class:"text-sm text-gray-200 mt-1","aria-live":"polite","aria-atomic":"true",role:"status"},DEe={"aria-live":"assertive","aria-atomic":"true",class:"sr-only"},VEe={key:0},ZEe={class:"form-group text-sm"},zEe={class:"mb-2"},UEe=["href"],HEe=["disabled","aria-disabled"],XEe=rt({__name:"feedback-panel",setup(a){const e="https://migration.geoportail.lu/feedback",{t}=Ct(),i=ri(),n=Vi(),s=Nu(),{addNotification:r}=ar(),{feedbackOpen:l,drawToolbarOpen:u}=xt(i),{layers:d,bgLayer:h}=xt(n),{authenticated:g,currentUser:y}=xt(s),x=Ye(""),C=Ye(""),I=Ye(""),A=Ye(""),E=Ye(!1);Rt(l,Z=>{Z&&(g.value&&y.value?.mail?x.value=y.value.mail:x.value="",I.value="",C.value="",L(),so(()=>{document.getElementById("inputEmail")?.focus()}))},{immediate:!0});function L(){A.value=Kl.getStrippedUrl().toString()}function G(){u.value=!0}async function F(){if(!x.value||!C.value||!I.value){r(t("Please fill all required fields",{ns:"client"}),fi.WARNING);return}E.value=!0;const Z={url:A.value,email:x.value,description:C.value,layer:I.value};try{if((await Br(e,Z,"POST","application/json")).ok)r(t('Feedback sent to <a href="mailto:{{email}}">{{email}}</a>',{email:"support@geoportail.lu",ns:"client"}),fi.INFO),i.toggleFeedbackOpen(!1);else throw new Error("Failed to send feedback")}catch{r(t('Feedback could not be sent to <a href="mailto:{{email}}">{{email}}</a>',{email:"support@geoportail.lu",ns:"client"}),fi.ERROR)}finally{E.value=!1}}const B=St(()=>{const Z=[];return h.value&&Z.push({id:String(h.value.id),name:String(h.value.name)}),d.value.forEach(Y=>{Z.push({id:String(Y.id),name:String(Y.name)})}),Z});return(Z,Y)=>(U(),Lt(mf,{"data-cy-value":"feedbackPanel","close-fn":()=>R(i).toggleFeedbackOpen(!1)},{header:Ht(()=>[P("h1",null,K(R(t)("Feedback",{ns:"client"})),1)]),content:Ht(()=>[P("div",SEe,[P("h3",AEe,K(R(t)("Report a map content problem:",{ns:"client"})),1),P("form",{onSubmit:_r(F,["prevent"]),class:"flex flex-col gap-4"},[P("div",TEe,[P("label",EEe,K(R(t)("Your email",{ns:"client"})),1),Sa(P("input",{type:"email",required:"","onUpdate:modelValue":Y[0]||(Y[0]=$=>x.value=$),class:"w-full px-3 py-2 lux-input",id:"inputEmail","aria-label":R(t)("Your email",{ns:"client"}),"data-cy":"feedbackEmail"},null,8,MEe),[[Vn,x.value]])]),P("div",LEe,[P("label",REe,K(R(t)("Pick layer where problem occurs",{ns:"client"})),1),P("div",kEe,[Sa(P("select",{id:"dropdownLayerPicker","onUpdate:modelValue":Y[1]||(Y[1]=$=>I.value=$),required:"",class:"w-full px-3 py-2 lux-input appearance-none cursor-pointer","aria-label":R(t)("Pick layer where problem occurs",{ns:"client"}),"data-cy":"feedbackLayerSelect"},[P("option",GEe,K(R(t)("Please pick a layer",{ns:"client"})),1),(U(!0),se(Tt,null,gi(B.value,$=>(U(),se("option",{key:$.id,value:$.name},K(R(t)($.name,{ns:"client"})),9,WEe))),128))],8,PEe),[[B7,I.value]]),Y[3]||(Y[3]=P("span",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none fa fa-caret-down text-primary","aria-hidden":"true"},null,-1))])]),P("div",OEe,[P("label",FEe,K(R(t)("Describe the problem within the current map extent:",{ns:"client"})),1),Sa(P("textarea",{rows:"5",required:"",maxlength:"500","onUpdate:modelValue":Y[2]||(Y[2]=$=>C.value=$),class:"w-full px-3 py-2 lux-input resize-none",id:"inputDescription","aria-label":R(t)("Describe the problem within the current map extent:",{ns:"client"}),"data-cy":"feedbackDescription"},null,8,NEe),[[Vn,C.value]]),P("p",BEe,K(C.value.length)+"/500 ",1)]),P("div",DEe,[E.value?(U(),se("span",VEe,K(R(t)("Sending...",{ns:"client"})),1)):Ge("",!0)]),P("div",ZEe,[P("p",zEe,[P("a",{href:A.value,target:"_blank",class:"text-blue-400 hover:text-blue-300 underline"},K(R(t)("Click to view the map link that will be sent to our support team",{ns:"client"})),9,UEe)]),P("p",null,[Dt(K(R(t)("You can also use the Drawing Tools to annotate the map and send it to the support team.",{ns:"client"}))+" ",1),P("button",{type:"button",onClick:G,class:"ml-2 text-blue-400 hover:text-blue-300 underline bg-transparent border-0 p-0 cursor-pointer font-normal"},K(R(t)("Open Drawing Tools",{ns:"client"})),1)])]),P("button",{type:"submit",disabled:E.value,"aria-disabled":E.value?"true":"false",class:"lux-btn self-end","data-cy":"feedbackSubmit"},K(E.value?R(t)("Sending...",{ns:"client"}):R(t)("Send feedback to support team",{ns:"client"})),9,HEe)],32)])]),_:1},8,["close-fn"]))}}),qEe={key:0,class:"w-full md:w-80 bg-secondary z-10"},YEe={key:1,class:"w-full md:w-80 bg-secondary z-10"},KEe={key:2,class:"w-full md:w-80 bg-secondary z-10"},jEe={key:3,class:"w-full md:w-80 bg-secondary z-10"},$Ee={class:"w-full md:w-80 bg-secondary z-10"},JEe={key:4,class:"w-full md:w-80 bg-secondary z-10"},QEe={class:"w-full md:w-80 bg-secondary z-10"},eMe=rt({__name:"side-panel",setup(a){const e=ri(),{layersOpen:t,legendsOpen:i,myMapsOpen:n,infoOpen:s,lidarOpen:r,feedbackOpen:l,styleEditorOpen:u,themeGridOpen:d,drawToolbarOpen:h}=xt(e);return Rt(t,g=>{g&&(r.value=i.value=n.value=u.value=l.value=!1)}),Rt(n,g=>{g&&(u.value=t.value=d.value=i.value=s.value=l.value=!1)}),Rt(i,g=>{g&&(n.value=u.value=t.value=d.value=s.value=r.value=l.value=!1)}),Rt(h,g=>{g&&PE("md")&&(n.value=!0,t.value=!1,i.value=!1,d.value=!1,s.value=!1,r.value=!1,l.value=!1)}),Rt(s,g=>{g&&(n.value=u.value=t.value=d.value=i.value=r.value=l.value=!1)}),Rt(l,g=>{g&&(n.value=u.value=t.value=d.value=i.value=r.value=s.value=!1)}),(g,y)=>(U(),se(Tt,null,[R(t)?(U(),se("div",qEe,[gt(O1e)])):Ge("",!0),R(i)?(U(),se("div",YEe,[gt(V1e)])):Ge("",!0),R(u)?(U(),se("div",KEe,[gt(O2e)])):Ge("",!0),R(n)?(U(),se("div",jEe,[gt(I4e)])):Ge("",!0),Sa(P("div",$Ee,[gt(bEe)],512),[[Zm,R(s)]]),R(l)?(U(),se("div",JEe,[gt(XEe)])):Ge("",!0),Sa(P("div",QEe,[gt(IEe)],512),[[Zm,R(r)]])],64))}});class tMe{bootstrap(){this.restore()}restore(){const e=Oa.getValue(Ep);if(e){const{setFid:t}=ef();t(e),Kl.removeQueryParam(Ep)}}}const aMe=new tMe;function iMe(){const a=ri(),e=ar(),{t}=Ct(),i=Ye(!1);let n=null;const{log:s}=Mb("SW");a.isOffLine=!navigator.onLine;const r=y=>{let x=y;for(;x;){const C=x.getAttribute("data-cy");if(C&&["infoOpenClose","legendsOpenClose","printOpenClose","shareOpenClose","feedbackOpenClose"].includes(C))return!0;x=x.parentElement}return!1},l=()=>{const y=document.querySelector('[data-cy="drawOpenClose"]');return y||document.querySelector(".map-wrapper")},u=()=>{a.isOffLine=!1,n&&document.contains(n)&&setTimeout(()=>{n?.focus(),n=null},100),i.value&&(e.addNotification(t("Connection restored"),fi.INFO,3e3),i.value=!1)},d=()=>{s("[Network] Going OFFLINE - navigator.onLine:",navigator.onLine),a.isOffLine=!0,s("[Network] Set appStore.isOffLine to:",a.isOffLine),i.value=!0;const y=document.activeElement;if(y&&y!==document.body&&r(y)){n=y;const x=l();x&&setTimeout(()=>{x.focus()},100)}};return{initialize:()=>{s("[Network] Initialize - navigator.onLine:",navigator.onLine);const y=!navigator.onLine;a.isOffLine!==y?(a.isOffLine=y,s("[Network] Set initial appStore.isOffLine to:",a.isOffLine)):s("[Network] appStore.isOffLine already set to:",a.isOffLine),window.addEventListener("online",u),window.addEventListener("offline",d),navigator.onLine||(i.value=!0),setTimeout(async()=>{s("[Network] Delayed check - navigator.onLine:",navigator.onLine);try{const x="https://migration.geoportail.lu/ping",C=new AbortController,I=setTimeout(()=>C.abort(),2e3),A=await fetch(x,{method:"HEAD",cache:"no-store",signal:C.signal});if(clearTimeout(I),!A.ok)throw new Error(`HTTP ${A.status}`);s("[Network] Connectivity test: ONLINE"),a.isOffLine&&(s("[Network] Correcting state to online"),u())}catch(x){s("[Network] Connectivity test: OFFLINE",x instanceof Error?x.message:String(x)),a.isOffLine||(s("[Network] Correcting state to offline"),d())}},100)},cleanup:()=>{window.removeEventListener("online",u),window.removeEventListener("offline",d)}}}const nMe={class:"h-screen flex flex-col overflow-hidden"},rMe={role:"status","aria-live":"polite","aria-atomic":"true",class:"sr-only"},sMe={key:0},oMe={class:"flex grow min-h-0"},lMe={class:"map-wrapper grow bg-blue-100 relative"},uMe={class:"absolute right-1 top-16"},cMe={key:0,class:"w-full flex-shrink-0",style:{height:"25rem"}},dMe={key:1,class:"flex grow"},hMe={class:"map-wrapper grow bg-blue-100 relative"},_Me={class:"absolute right-1 top-2"},mMe=rt({__name:"App",setup(a){const{t:e}=Ct(),t=ri(),i=T_(),n=qa(),s=iMe(),{log:r}=Mb("SW");r("[App.vue] After useNetwork() - appStore.isOffLine:",t.isOffLine,"navigator.onLine:",navigator.onLine),Y2e.bootstrap(),X2e.bootstrap(),J2e.bootstrap(),N2e.bootstrap(),BF.bootstrap(),U2e.bootstrap(),i.initBackgroundsConfigs(),aMe.bootstrap(),fn(()=>{A_().init()});const{embedded:l,layersOpen:u,legendsOpen:d,myMapsOpen:h,infoOpen:g,styleEditorOpen:y,lidarOpen:x,isOffLine:C}=xt(t);Rt(u,I),Rt(d,I),Rt(y,I),Rt(h,I),Rt(g,I),Rt(x,I);function I(){setTimeout(()=>n.resize(),50)}return fn(()=>{s.initialize(),window.addEventListener("resize",n.resize)}),Nr(()=>{s.cleanup(),window.removeEventListener("resize",n.resize)}),(A,E)=>(U(),se("div",nMe,[P("div",rMe,[R(C)?(U(),se("span",sMe,K(R(e)("You are offline. The following features are unavailable: Info panel, Legends, Routing, Measure tools, Print, Share, and external links.")),1)):Ge("",!0)]),R(l)?(U(),se("main",dMe,[P("div",hMe,[gt(jk,{v4_standalone:!0})]),P("div",_Me,[gt(Tk)])])):(U(),se(Tt,{key:0},[R(C)?(U(),Lt(Loe,{key:0})):(U(),Lt(Coe,{key:1})),P("main",oMe,[gt(eMe),P("div",lMe,[gt(jk,{v4_standalone:!0}),gt(e2e,{class:"absolute top-0"}),gt(Yve),gt(Fye)]),P("div",uMe,[gt(Tk)])]),gt(TC,{name:"fade"},{default:Ht(()=>[R(x)?(U(),se("div",cMe,[gt(Ywe,{class:"w-full h-full"})])):Ge("",!0)]),_:1}),gt(xwe,{class:"sm:w-full flex-shrink-0 md:h-14 fixed bottom-5 sm:static"}),gt(wpe)],64))]))}}),{log:Ox,error:f6,warn:SB}=Mb("SW");NG();Va.use(x6);Va.init({lng:"fr",debug:!1,defaultNS:"client",returnEmptyString:!1,supportedLngs:["de","en","fr","lb"],ns:["app","client","legends","server","tooltips"],fallbackLng:"en",backend:{loadPath:"/luxembourg-geoportail/main/assets/locales/{{ns}}.{{lng}}.json"},nsSeparator:!1,keySeparator:!1}).then(()=>{const a=uU(mMe);a.use(VU()),a.use(hU,{i18next:Va}),a.use(DU),a.use(EY),a.mount("#app"),Bn().loadThemes()});async function fMe(a){const e={type:"module"};try{return Ox("Registering service worker as module:",a),await navigator.serviceWorker.register(a,e)}catch(t){return SB("Module service worker registration failed, retrying as classic script",t),navigator.serviceWorker.register(a)}}function gMe(a){const e=window.setInterval(()=>{a.update()},36e5),t=()=>{window.clearInterval(e),window.removeEventListener("pagehide",t),window.removeEventListener("beforeunload",t)};return window.addEventListener("pagehide",t),window.addEventListener("beforeunload",t),t}"serviceWorker"in navigator?window.addEventListener("load",()=>{fMe("/luxembourg-geoportail/main/service-worker.js").then(e=>{Ox("[SW]  Registered successfully:",e.scope),Ox("[SW] State:",e.active?.state);const t=gMe(e);e.addEventListener("updatefound",()=>{const i=e.installing;i&&i.addEventListener("statechange",()=>{i.state==="installed"&&navigator.serviceWorker.controller&&(Ox("[SW] New version available"),t())})})}).catch(e=>{f6("[SW]  Registration failed:",e),f6("[SW] Error details:",{name:e.name,message:e.message,stack:e.stack})})}):SB("[SW]  Service Worker not supported in this browser");export{kO as B,PO as E,KT as F,Ki as L,$d as M,PC as P,pl as R,bMe as V,Wi as a,Ln as b,$h as c,Fu as d,y_ as e,Gs as f,cG as g,MC as h,mX as i,Oi as j,Fr as k,KH as l,Jo as m,Fd as n,HP as o,nle as p,Ww as r,sx as s,au as t};
