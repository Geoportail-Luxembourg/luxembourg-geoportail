import{F as Z,P as q,R as A,i as J,M as K,a as Q,b as ee,L as te,d as ie,e as re,t as ne,f as se,h as ae,j as X,k as H,l as G,s as oe,m as le,V as ue,C as U,n as j,o as he,p as de,q as ce,r as fe}from"./index-011c4c5c.js";const R=65536*65536,N=1/R,xe=12,O=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),B=0,T=1,S=2,k=5;class we{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,e,n=this.length){for(;this.pos<n;){const r=this.readVarint(),s=r>>3,a=this.pos;this.type=r&7,t(s,e,this),this.pos===a&&this.skip(r)}return e}readMessage(t,e){return this.readFields(t,e,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*R;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*R;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const e=this.buf;let n,r;return r=e[this.pos++],n=r&127,r<128||(r=e[this.pos++],n|=(r&127)<<7,r<128)||(r=e[this.pos++],n|=(r&127)<<14,r<128)||(r=e[this.pos++],n|=(r&127)<<21,r<128)?n:(r=e[this.pos],n|=(r&15)<<28,Fe(n,t,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2===1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=xe&&O?O.decode(this.buf.subarray(e,t)):Ce(this.buf,e,t)}readBytes(){const t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e}readPackedVarint(t=[],e){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readVarint(e));return t}readPackedSVarint(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===S?this.readVarint()+this.pos:this.pos+1}skip(t){const e=t&7;if(e===B)for(;this.buf[this.pos++]>127;);else if(e===S)this.pos=this.readVarint()+this.pos;else if(e===k)this.pos+=4;else if(e===T)this.pos+=8;else throw new Error(`Unimplemented type: ${e}`)}writeTag(t,e){this.writeVarint(t<<3|e)}realloc(t){let e=this.length||16;for(;e<this.pos+t;)e*=2;if(e!==this.length){const n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=e}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*N),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*N),!0),this.pos+=8}writeVarint(t){if(t=+t||0,t>268435455||t<0){ge(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))}writeSVarint(t){this.writeVarint(t<0?-t*2-1:t*2)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(t.length*4),this.pos++;const e=this.pos;this.pos=Be(this.buf,t,this.pos);const n=this.pos-e;n>=128&&z(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const e=t.length;this.writeVarint(e),this.realloc(e);for(let n=0;n<e;n++)this.buf[this.pos++]=t[n]}writeRawMessage(t,e){this.pos++;const n=this.pos;t(e,this);const r=this.pos-n;r>=128&&z(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r}writeMessage(t,e,n){this.writeTag(t,S),this.writeRawMessage(e,n)}writePackedVarint(t,e){e.length&&this.writeMessage(t,ve,e)}writePackedSVarint(t,e){e.length&&this.writeMessage(t,Ve,e)}writePackedBoolean(t,e){e.length&&this.writeMessage(t,Se,e)}writePackedFloat(t,e){e.length&&this.writeMessage(t,Pe,e)}writePackedDouble(t,e){e.length&&this.writeMessage(t,me,e)}writePackedFixed32(t,e){e.length&&this.writeMessage(t,Te,e)}writePackedSFixed32(t,e){e.length&&this.writeMessage(t,ke,e)}writePackedFixed64(t,e){e.length&&this.writeMessage(t,Ee,e)}writePackedSFixed64(t,e){e.length&&this.writeMessage(t,Ie,e)}writeBytesField(t,e){this.writeTag(t,S),this.writeBytes(e)}writeFixed32Field(t,e){this.writeTag(t,k),this.writeFixed32(e)}writeSFixed32Field(t,e){this.writeTag(t,k),this.writeSFixed32(e)}writeFixed64Field(t,e){this.writeTag(t,T),this.writeFixed64(e)}writeSFixed64Field(t,e){this.writeTag(t,T),this.writeSFixed64(e)}writeVarintField(t,e){this.writeTag(t,B),this.writeVarint(e)}writeSVarintField(t,e){this.writeTag(t,B),this.writeSVarint(e)}writeStringField(t,e){this.writeTag(t,S),this.writeString(e)}writeFloatField(t,e){this.writeTag(t,k),this.writeFloat(e)}writeDoubleField(t,e){this.writeTag(t,T),this.writeDouble(e)}writeBooleanField(t,e){this.writeVarintField(t,+e)}}function Fe(i,t,e){const n=e.buf;let r,s;if(s=n[e.pos++],r=(s&112)>>4,s<128||(s=n[e.pos++],r|=(s&127)<<3,s<128)||(s=n[e.pos++],r|=(s&127)<<10,s<128)||(s=n[e.pos++],r|=(s&127)<<17,s<128)||(s=n[e.pos++],r|=(s&127)<<24,s<128)||(s=n[e.pos++],r|=(s&1)<<31,s<128))return P(i,r,t);throw new Error("Expected varint not more than 10 bytes")}function P(i,t,e){return e?t*4294967296+(i>>>0):(t>>>0)*4294967296+(i>>>0)}function ge(i,t){let e,n;if(i>=0?(e=i%4294967296|0,n=i/4294967296|0):(e=~(-i%4294967296),n=~(-i/4294967296),e^4294967295?e=e+1|0:(e=0,n=n+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),pe(e,n,t),ye(n,t)}function pe(i,t,e){e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos]=i&127}function ye(i,t){const e=(i&7)<<4;t.buf[t.pos++]|=e|((i>>>=3)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127)))))}function z(i,t,e){const n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));e.realloc(n);for(let r=e.pos-1;r>=i;r--)e.buf[r+n]=e.buf[r]}function ve(i,t){for(let e=0;e<i.length;e++)t.writeVarint(i[e])}function Ve(i,t){for(let e=0;e<i.length;e++)t.writeSVarint(i[e])}function Pe(i,t){for(let e=0;e<i.length;e++)t.writeFloat(i[e])}function me(i,t){for(let e=0;e<i.length;e++)t.writeDouble(i[e])}function Se(i,t){for(let e=0;e<i.length;e++)t.writeBoolean(i[e])}function Te(i,t){for(let e=0;e<i.length;e++)t.writeFixed32(i[e])}function ke(i,t){for(let e=0;e<i.length;e++)t.writeSFixed32(i[e])}function Ee(i,t){for(let e=0;e<i.length;e++)t.writeFixed64(i[e])}function Ie(i,t){for(let e=0;e<i.length;e++)t.writeSFixed64(i[e])}function Ce(i,t,e){let n="",r=t;for(;r<e;){const s=i[r];let a=null,h=s>239?4:s>223?3:s>191?2:1;if(r+h>e)break;let l,o,u;h===1?s<128&&(a=s):h===2?(l=i[r+1],(l&192)===128&&(a=(s&31)<<6|l&63,a<=127&&(a=null))):h===3?(l=i[r+1],o=i[r+2],(l&192)===128&&(o&192)===128&&(a=(s&15)<<12|(l&63)<<6|o&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):h===4&&(l=i[r+1],o=i[r+2],u=i[r+3],(l&192)===128&&(o&192)===128&&(u&192)===128&&(a=(s&15)<<18|(l&63)<<12|(o&63)<<6|u&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,h=1):a>65535&&(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),n+=String.fromCharCode(a),r+=h}return n}function Be(i,t,e){for(let n=0,r,s;n<t.length;n++){if(r=t.charCodeAt(n),r>55295&&r<57344)if(s)if(r<56320){i[e++]=239,i[e++]=191,i[e++]=189,s=r;continue}else r=s-55296<<10|r-56320|65536,s=null;else{r>56319||n+1===t.length?(i[e++]=239,i[e++]=191,i[e++]=189):s=r;continue}else s&&(i[e++]=239,i[e++]=191,i[e++]=189,s=null);r<128?i[e++]=r:(r<2048?i[e++]=r>>6|192:(r<65536?i[e++]=r>>12|224:(i[e++]=r>>18|240,i[e++]=r>>12&63|128),i[e++]=r>>6&63|128),i[e++]=r&63|128)}return e}class Me extends Z{constructor(t){super(),t=t||{},this.dataProjection=new q({code:"",units:"tile-pixels"}),this.featureClass=t.featureClass?t.featureClass:A,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,n,r){t.pos=e.geometry;const s=t.readVarint()+t.pos;let a=1,h=0,l=0,o=0,u=0,d=0;for(;t.pos<s;){if(!h){const f=t.readVarint();a=f&7,h=f>>3}if(h--,a===1||a===2)l+=t.readSVarint(),o+=t.readSVarint(),a===1&&u>d&&(r.push(u),d=u),n.push(l,o),u+=2;else if(a===7)u>d&&(n.push(n[d],n[d+1]),u+=2);else throw new Error("Invalid command found in the PBF")}u>d&&(r.push(u),d=u)}createFeature_(t,e,n){const r=e.type;if(r===0)return null;let s;const a=e.properties;let h;this.idProperty_?(h=a[this.idProperty_],delete a[this.idProperty_]):h=e.id,a[this.layerName_]=e.layer.name;const l=[],o=[];this.readRawGeometry_(t,e,l,o);const u=be(r,o.length);if(this.featureClass===A)s=new this.featureClass(u,l,o,2,a,h),s.transform(n.dataProjection);else{let d;if(u=="Polygon"){const x=J(l,o);d=x.length>1?new K(l,"XY",x):new Q(l,"XY",o)}else d=u==="Point"?new ee(l,"XY"):u==="LineString"?new te(l,"XY"):u==="MultiPoint"?new ie(l,"XY"):u==="MultiLineString"?new re(l,"XY",o):null;const f=this.featureClass;s=new f,this.geometryName_&&s.setGeometryName(this.geometryName_);const c=ne(d,!1,n);s.setGeometry(c),h!==void 0&&s.setId(h),s.setProperties(a,!0)}return s}getType(){return"arraybuffer"}readFeatures(t,e){const n=this.layers_;e=this.adaptOptions(e);const r=se(e.dataProjection);r.setWorldExtent(e.extent),e.dataProjection=r;const s=new we(t),a=s.readFields(De,{}),h=[];for(const l in a){if(n&&!n.includes(l))continue;const o=a[l],u=o?[0,0,o.extent,o.extent]:null;r.setExtent(u);for(let d=0,f=o.length;d<f;++d){const c=Le(s,o,d),x=this.createFeature_(s,c,e);x!==null&&h.push(x)}}return h}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function De(i,t,e){if(i===3){const n={keys:[],values:[],features:[]},r=e.readVarint()+e.pos;e.readFields(_e,n,r),n.length=n.features.length,n.length&&(t[n.name]=n)}}function _e(i,t,e){if(i===15)t.version=e.readVarint();else if(i===1)t.name=e.readString();else if(i===5)t.extent=e.readVarint();else if(i===2)t.features.push(e.pos);else if(i===3)t.keys.push(e.readString());else if(i===4){let n=null;const r=e.readVarint()+e.pos;for(;e.pos<r;)i=e.readVarint()>>3,n=i===1?e.readString():i===2?e.readFloat():i===3?e.readDouble():i===4?e.readVarint64():i===5?e.readVarint():i===6?e.readSVarint():i===7?e.readBoolean():null;t.values.push(n)}}function Re(i,t,e){if(i==1)t.id=e.readVarint();else if(i==2){const n=e.readVarint()+e.pos;for(;e.pos<n;){const r=t.layer.keys[e.readVarint()],s=t.layer.values[e.readVarint()];t.properties[r]=s}}else i==3?t.type=e.readVarint():i==4&&(t.geometry=e.pos)}function Le(i,t,e){i.pos=t.features[e];const n=i.readVarint()+i.pos,r={layer:t,type:0,properties:{}};return i.readFields(Re,r,n),r}function be(i,t){let e;return i===1?e=t===1?"Point":"MultiPoint":i===2?e=t===1?"LineString":"MultiLineString":i===3&&(e="Polygon"),e}const Ae=Me;function Ge(i,t,e){var n=le(),r=ae(i),s=X(i),a=H(i),h=s/a,l=t/e;return console.assert(Math.abs(h/l-1)<.02,"extent and canvas don't have same ratio: ".concat(h,", ").concat(l)),G(n,0,e),oe(n,t/s,-e/a),G(n,-r[0],-r[1]),n}function Ue(i,t,e){var n=e.getZForResolution(t,.01),r=[];return e.forEachTileCoord(i,n,function(s){var a=e.getTileCoordExtent(s);r.push({coord:s,extent:a})}),r}var M;function je(i,t){if(t===1)return i;M||(M=document.createElement("canvas"));var e=M;e.width=i.width,e.height=i.height;var n=e.getContext("2d");return n.globalAlpha=t,n.drawImage(i,0,0),e}var D=globalThis&&globalThis.__awaiter||function(i,t,e,n){function r(s){return s instanceof e?s:new e(function(a){a(s)})}return new(e||(e=Promise))(function(s,a){function h(u){try{o(n.next(u))}catch(d){a(d)}}function l(u){try{o(n.throw(u))}catch(d){a(d)}}function o(u){u.done?s(u.value):r(u.value).then(h,l)}o((n=n.apply(i,t||[])).next())})},_=globalThis&&globalThis.__generator||function(i,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,r,s,a;return a={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function h(o){return function(u){return l([o,u])}}function l(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(e=0)),e;)try{if(n=1,r&&(s=o[0]&2?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[o[0]&2,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){e.label=o[1];break}if(o[0]===6&&e.label<s[1]){e.label=s[1],s=o;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(o);break}s[2]&&e.ops.pop(),e.trys.pop();continue}o=t.call(i,e)}catch(u){o=[6,u],r=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},E=Number.parseInt(ue.split(".")[0]),Ne=function(){function i(){}return i.prototype.fetch=function(t,e){return typeof fetch<"u"?fetch(t,e):Promise.reject("no Fetch")},i}(),Oe=new Ne,ze=new Ae,Xe=function(){function i(){}return i.prototype.drawFeaturesToContextUsingRenderAPI_=function(t,e,n,r,s,a,h){var l=1,o=new U(0,t.extent,n,l),u;h&&E<=9&&(u=new U(0,t.extent,n,l));function d(){console.log("FIXME: some resource is now available, we should regenerate the image")}var f=function(m){var V,L=m.getStyleFunction()||e;L&&(V=L(m,n));var I=!1;if(V){Array.isArray(V)||(V=[V]);for(var W=0,C=0,b=V;C<b.length;C++){var $=b[C];I=fe(o,m,$,W,d,void 0,E<=9?u:h)||I}}return I},c=!1;t.features.forEach(function(m){c=f(m)||c}),c&&console.log("FIXME: some styles are still loading");var x=!0,g=o.finish(),p=new j(t.extent,n,l,x,g,a),w=r,F=0,y=!0,v=E<9?1:[s.canvas.width,s.canvas.height];if(p.execute(s,v,w,F,y,void 0,null),u){var Y=new j(t.extent,n,l,x,u.finish(),a);Y.execute(s,v,w,F,y,void 0,h)}},i.prototype.drawFeaturesToContextUsingImmediateAPI_=function(t,e,n,r,s){var a=[],h=0;t.forEach(function(w){var F=e(w,n);F&&(Array.isArray(F)?F.forEach(function(y,v){a.push({zIndex:y.getZIndex(),feature:w,naturalOrder:++h,styleIdx:v})}):a.push({zIndex:F.getZIndex(),feature:w,naturalOrder:++h,styleIdx:-1}))}),a.sort(function(w,F){var y=(w.zIndex||0)-(F.zIndex||0);return y||w.naturalOrder-F.naturalOrder});for(var l=0,o=a;l<o.length;l++){var u=o[l],d=e(u.feature,n),f=u.styleIdx===-1?d:d[u.styleIdx];s.setStyle(f);var c=f.getGeometry();typeof c=="function"&&(c=c()),c||(c=u.feature.getGeometry()),c=Object.assign(Object.create(Object.getPrototypeOf(c)),c);var x=c.flatCoordinates_,g=c.flatCoordinates_=new Array(x.length),p=c.getStride();he(x,0,x.length,p,r,g),s.drawGeometry(c)}},i.prototype.snapTileResolution=function(t,e){for(var n=t.getResolutions(),r=n[n.length-2],s=n.length-2;s>=0;s--){var a=n[s];if(a<=e)r=a;else break}return r},i.prototype.assertCanvasSize=function(t,e){var n=X(t)/H(t),r=e[0]/e[1];if(Math.abs(n/r-1)>.02){var s="The print extent ratio ".concat(n," and the canvas ratio ").concat(r," mismatch: ").concat(Math.abs(n/r-1)*100," %");throw new Error(s)}},i.prototype.allFullfilled=function(t){return D(this,void 0,void 0,function(){var e,n,r,s;return _(this,function(a){switch(a.label){case 0:e=[],n=0,r=t,a.label=1;case 1:return n<r.length?(s=r[n],[4,s.then(function(h){return e.push(h)},function(){})]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},i.prototype.fetchFeatures=function(t,e){return D(this,void 0,void 0,function(){var n,r,s;return _(this,function(a){return n=e.getTileUrlFunction(),r=e.getProjection(),s=t.map(function(h){var l=n(h.coord,1,r);return l?Oe.fetch(l).then(function(o){return o.arrayBuffer()}).then(function(o){var u=ze.readFeatures(o,{extent:h.extent,featureProjection:r});return{features:u,extent:h.extent,url:l}}):Promise.reject("Could not create URL")}),[2,this.allFullfilled(s)]})})},i.prototype.encodeMVTLayer=function(t){return D(this,void 0,void 0,function(){var e,n,r,s,a,h,l,o,u,d,f,c,x,g,p,w,F=this;return _(this,function(y){switch(y.label){case 0:return e=t.layer,n=t.outputFormat||"png",r=e.getRenderBuffer()||100,s=e.getSource(),a=s.getTileGrid(),h=this.snapTileResolution(a,t.tileResolution),h!==t.tileResolution&&(console.warn("snapped and tile resolution mismatch: ".concat(h," != ").concat(t.tileResolution)),t.tileResolution=h),l=t.printExtent,o=Ue(l,h,a),[4,this.fetchFeatures(o,s)];case 1:return u=y.sent(),d=t.canvasSize,this.assertCanvasSize(l,d),f=[{printExtent:l,canvasSize:d}],c=t.styleResolution||h,x=e.getStyleFunction(),g=e.get("opacity"),p=E<9?e.getDeclutter()?new de(7):void 0:!!e.getDeclutter(),w=f.map(function(v){return F.renderTile(u,v.printExtent,v.canvasSize,c,x,g,r,p,n)}),[2,w]}})})},i.prototype.renderTile=function(t,e,n,r,s,a,h,l,o){var u=this,d=document.createElement("canvas"),f=d.getContext("2d");console.assert(f,"Could not get the context ".concat(d.width,"x").concat(d.height));var c=ce(f,{size:n,pixelRatio:1});t.forEach(function(g){var p=Ge(e,d.width,d.height);i.useImmediateAPI?u.drawFeaturesToContextUsingImmediateAPI_(g.features,s,r,p,c):u.drawFeaturesToContextUsingRenderAPI_(g,s,r,p,f,h,l)});var x=(a===1?d:je(d,a)).toDataURL(o);return{extent:e,baseURL:x}},i.useImmediateAPI=!1,i}();const Ye=Xe;export{Ye as MVTEncoder};
