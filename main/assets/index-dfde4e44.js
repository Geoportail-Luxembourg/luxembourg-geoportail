var SD=Object.defineProperty;var AD=(a,e,t)=>e in a?SD(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var zt=(a,e,t)=>(AD(a,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const si=a=>typeof a=="string",Dy=()=>{let a,e;const t=new Promise((i,n)=>{a=i,e=n});return t.resolve=a,t.reject=e,t},GM=a=>a==null?"":""+a,TD=(a,e,t)=>{a.forEach(i=>{e[i]&&(t[i]=e[i])})},ED=/###/g,OM=a=>a&&a.indexOf("###")>-1?a.replace(ED,"."):a,PM=a=>!a||si(a),S0=(a,e,t)=>{const i=si(e)?e.split("."):e;let n=0;for(;n<i.length-1;){if(PM(a))return{};const s=OM(i[n]);!a[s]&&t&&(a[s]=new t),Object.prototype.hasOwnProperty.call(a,s)?a=a[s]:a={},++n}return PM(a)?{}:{obj:a,k:OM(i[n])}},BM=(a,e,t)=>{const{obj:i,k:n}=S0(a,e,Object);if(i!==void 0||e.length===1){i[n]=t;return}let s=e[e.length-1],r=e.slice(0,e.length-1),l=S0(a,r,Object);for(;l.obj===void 0&&r.length;)s=`${r[r.length-1]}.${s}`,r=r.slice(0,r.length-1),l=S0(a,r,Object),l!=null&&l.obj&&typeof l.obj[`${l.k}.${s}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${s}`]=t},MD=(a,e,t,i)=>{const{obj:n,k:s}=S0(a,e,Object);n[s]=n[s]||[],n[s].push(t)},ux=(a,e)=>{const{obj:t,k:i}=S0(a,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},LD=(a,e,t)=>{const i=ux(a,t);return i!==void 0?i:ux(e,t)},Rk=(a,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in a?si(a[i])||a[i]instanceof String||si(e[i])||e[i]instanceof String?t&&(a[i]=e[i]):Rk(a[i],e[i],t):a[i]=e[i]);return a},$p=a=>a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var RD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const kD=a=>si(a)?a.replace(/[&<>"'\/]/g,e=>RD[e]):a;class WD{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const GD=[" ",",","?","!",";"],OD=new WD(20),PD=(a,e,t)=>{e=e||"",t=t||"";const i=GD.filter(r=>e.indexOf(r)<0&&t.indexOf(r)<0);if(i.length===0)return!0;const n=OD.getRegExp(`(${i.map(r=>r==="?"?"\\?":r).join("|")})`);let s=!n.test(a);if(!s){const r=a.indexOf(t);r>0&&!n.test(a.substring(0,r))&&(s=!0)}return s},WA=function(a,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!a)return;if(a[e])return Object.prototype.hasOwnProperty.call(a,e)?a[e]:void 0;const i=e.split(t);let n=a;for(let s=0;s<i.length;){if(!n||typeof n!="object")return;let r,l="";for(let u=s;u<i.length;++u)if(u!==s&&(l+=t),l+=i[u],r=n[l],r!==void 0){if(["string","number","boolean"].indexOf(typeof r)>-1&&u<i.length-1)continue;s+=u-s+1;break}n=r}return n},cx=a=>a==null?void 0:a.replace("_","-"),BD={type:"logger",log(a){this.output("log",a)},warn(a){this.output("warn",a)},error(a){this.output("error",a)},output(a,e){var t,i;(i=(t=console==null?void 0:console[a])==null?void 0:t.apply)==null||i.call(t,console,e)}};class dx{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||BD,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,n){return n&&!this.debug?null:(si(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new dx(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new dx(this.logger,e)}}var oc=new dx;class Vw{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const n=this.observers[i].get(t)||0;this.observers[i].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(r=>{let[l,u]=r;for(let d=0;d<u;d++)l(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(r=>{let[l,u]=r;for(let d=0;d<u;d++)l.apply(l,[e,...i])})}}class NM extends Vw{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i){var d,m;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,r=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],i&&(Array.isArray(i)?l.push(...i):si(i)&&s?l.push(...i.split(s)):l.push(i)));const u=ux(this.data,l);return!u&&!t&&!i&&e.indexOf(".")>-1&&(e=l[0],t=l[1],i=l.slice(2).join(".")),u||!r||!si(i)?u:WA((m=(d=this.data)==null?void 0:d[e])==null?void 0:m[t],i,s)}addResource(e,t,i,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const r=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let l=[e,t];i&&(l=l.concat(r?i.split(r):i)),e.indexOf(".")>-1&&(l=e.split("."),n=t,t=l[1]),this.addNamespaces(t),BM(this.data,l,n),s.silent||this.emit("added",e,t,i,n)}addResources(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in i)(si(i[s])||Array.isArray(i[s]))&&this.addResource(e,t,s,i[s],{silent:!0});n.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,n,s){let r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,t];e.indexOf(".")>-1&&(l=e.split("."),n=i,i=t,t=l[1]),this.addNamespaces(t);let u=ux(this.data,l)||{};r.skipCopy||(i=JSON.parse(JSON.stringify(i))),n?Rk(u,i,s):u={...u,...i},BM(this.data,l,u),r.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(n=>t[n]&&Object.keys(t[n]).length>0)}toJSON(){return this.data}}var kk={processors:{},addPostProcessor(a){this.processors[a.name]=a},handle(a,e,t,i,n){return a.forEach(s=>{var r;e=((r=this.processors[s])==null?void 0:r.process(e,t,i,n))??e}),e}};const FM={},DM=a=>!si(a)&&typeof a!="boolean"&&typeof a!="number";class hx extends Vw{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),TD(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=oc.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const i=this.resolve(e,t);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const n=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const r=i&&e.indexOf(i)>-1,l=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!PD(e,i,n);if(r&&!l){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:si(s)?[s]:s};const d=e.split(i);(i!==n||i===n&&this.options.ns.indexOf(d[0])>-1)&&(s=d.shift()),e=d.join(n)}return{key:e,namespaces:si(s)?[s]:s}}translate(e,t,i){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const n=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:r,namespaces:l}=this.extractFromKey(e[e.length-1],t),u=l[l.length-1],d=t.lng||this.language,m=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((d==null?void 0:d.toLowerCase())==="cimode"){if(m){const de=t.nsSeparator||this.options.nsSeparator;return n?{res:`${u}${de}${r}`,usedKey:r,exactUsedKey:r,usedLng:d,usedNS:u,usedParams:this.getUsedParamsDetails(t)}:`${u}${de}${r}`}return n?{res:r,usedKey:r,exactUsedKey:r,usedLng:d,usedNS:u,usedParams:this.getUsedParamsDetails(t)}:r}const f=this.resolve(e,t);let v=f==null?void 0:f.res;const w=(f==null?void 0:f.usedKey)||r,S=(f==null?void 0:f.exactUsedKey)||r,T=["[object Number]","[object Function]","[object RegExp]"],M=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,G=!this.i18nFormat||this.i18nFormat.handleAsObject,P=t.count!==void 0&&!si(t.count),F=hx.hasDefaultValue(t),N=P?this.pluralResolver.getSuffix(d,t.count,t):"",V=t.ordinal&&P?this.pluralResolver.getSuffix(d,t.count,{ordinal:!1}):"",K=P&&!t.ordinal&&t.count===0,te=K&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${N}`]||t[`defaultValue${V}`]||t.defaultValue;let J=v;G&&!v&&F&&(J=te);const ne=DM(J),se=Object.prototype.toString.apply(J);if(G&&J&&ne&&T.indexOf(se)<0&&!(si(M)&&Array.isArray(J))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const de=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,J,{...t,ns:l}):`key '${r} (${this.language})' returned an object instead of string.`;return n?(f.res=de,f.usedParams=this.getUsedParamsDetails(t),f):de}if(s){const de=Array.isArray(J),_e=de?[]:{},Se=de?S:w;for(const ce in J)if(Object.prototype.hasOwnProperty.call(J,ce)){const Ie=`${Se}${s}${ce}`;F&&!v?_e[ce]=this.translate(Ie,{...t,defaultValue:DM(te)?te[ce]:void 0,joinArrays:!1,ns:l}):_e[ce]=this.translate(Ie,{...t,joinArrays:!1,ns:l}),_e[ce]===Ie&&(_e[ce]=J[ce])}v=_e}}else if(G&&si(M)&&Array.isArray(v))v=v.join(M),v&&(v=this.extendTranslation(v,e,t,i));else{let de=!1,_e=!1;!this.isValidLookup(v)&&F&&(de=!0,v=te),this.isValidLookup(v)||(_e=!0,v=r);const ce=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&_e?void 0:v,Ie=F&&te!==v&&this.options.updateMissing;if(_e||de||Ie){if(this.logger.log(Ie?"updateKey":"missingKey",d,u,r,Ie?te:v),s){const Ye=this.resolve(r,{...t,keySeparator:!1});Ye&&Ye.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let he=[];const we=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&we&&we[0])for(let Ye=0;Ye<we.length;Ye++)he.push(we[Ye]);else this.options.saveMissingTo==="all"?he=this.languageUtils.toResolveHierarchy(t.lng||this.language):he.push(t.lng||this.language);const Oe=(Ye,at,yt)=>{var jt;const De=F&&yt!==v?yt:ce;this.options.missingKeyHandler?this.options.missingKeyHandler(Ye,u,at,De,Ie,t):(jt=this.backendConnector)!=null&&jt.saveMissing&&this.backendConnector.saveMissing(Ye,u,at,De,Ie,t),this.emit("missingKey",Ye,u,at,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?he.forEach(Ye=>{const at=this.pluralResolver.getSuffixes(Ye,t);K&&t[`defaultValue${this.options.pluralSeparator}zero`]&&at.indexOf(`${this.options.pluralSeparator}zero`)<0&&at.push(`${this.options.pluralSeparator}zero`),at.forEach(yt=>{Oe([Ye],r+yt,t[`defaultValue${yt}`]||te)})}):Oe(he,r,te))}v=this.extendTranslation(v,e,t,f,i),_e&&v===r&&this.options.appendNamespaceToMissingKey&&(v=`${u}:${r}`),(_e||de)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}:${r}`:r,de?v:void 0))}return n?(f.res=v,f.usedParams=this.getUsedParamsDetails(t),f):v}extendTranslation(e,t,i,n,s){var d,m;var r=this;if((d=this.i18nFormat)!=null&&d.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const f=si(e)&&(((m=i==null?void 0:i.interpolation)==null?void 0:m.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let v;if(f){const S=e.match(this.interpolator.nestingRegexp);v=S&&S.length}let w=i.replace&&!si(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(w={...this.options.interpolation.defaultVariables,...w}),e=this.interpolator.interpolate(e,w,i.lng||this.language||n.usedLng,i),f){const S=e.match(this.interpolator.nestingRegexp),T=S&&S.length;v<T&&(i.nest=!1)}!i.lng&&n&&n.res&&(i.lng=this.language||n.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var S=arguments.length,T=new Array(S),M=0;M<S;M++)T[M]=arguments[M];return(s==null?void 0:s[0])===T[0]&&!i.context?(r.logger.warn(`It seems you are nesting recursively key: ${T[0]} in key: ${t[0]}`),null):r.translate(...T,t)},i)),i.interpolation&&this.interpolator.reset()}const l=i.postProcess||this.options.postProcess,u=si(l)?[l]:l;return e!=null&&(u!=null&&u.length)&&i.applyPostProcessor!==!1&&(e=kk.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,n,s,r,l;return si(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(i))return;const d=this.extractFromKey(u,t),m=d.key;n=m;let f=d.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const v=t.count!==void 0&&!si(t.count),w=v&&!t.ordinal&&t.count===0,S=t.context!==void 0&&(si(t.context)||typeof t.context=="number")&&t.context!=="",T=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);f.forEach(M=>{var G,P;this.isValidLookup(i)||(l=M,!FM[`${T[0]}-${M}`]&&((G=this.utils)!=null&&G.hasLoadedNamespace)&&!((P=this.utils)!=null&&P.hasLoadedNamespace(l))&&(FM[`${T[0]}-${M}`]=!0,this.logger.warn(`key "${n}" for languages "${T.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),T.forEach(F=>{var K;if(this.isValidLookup(i))return;r=F;const N=[m];if((K=this.i18nFormat)!=null&&K.addLookupKeys)this.i18nFormat.addLookupKeys(N,m,F,M,t);else{let te;v&&(te=this.pluralResolver.getSuffix(F,t.count,t));const J=`${this.options.pluralSeparator}zero`,ne=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(N.push(m+te),t.ordinal&&te.indexOf(ne)===0&&N.push(m+te.replace(ne,this.options.pluralSeparator)),w&&N.push(m+J)),S){const se=`${m}${this.options.contextSeparator}${t.context}`;N.push(se),v&&(N.push(se+te),t.ordinal&&te.indexOf(ne)===0&&N.push(se+te.replace(ne,this.options.pluralSeparator)),w&&N.push(se+J))}}let V;for(;V=N.pop();)this.isValidLookup(i)||(s=V,i=this.getResource(F,M,V,t))}))})}),{res:i,usedKey:n,exactUsedKey:s,usedLng:r,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i){var s;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,t,i,n):this.resourceStore.getResource(e,t,i,n)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!si(e.replace);let n=i?e.replace:e;if(i&&typeof e.count<"u"&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!i){n={...n};for(const s of t)delete n[s]}return n}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class VM{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=oc.create("languageUtils")}getScriptPartFromCode(e){if(e=cx(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=cx(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(si(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const n=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const n=this.getLanguagePartFromCode(i);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(s=>{if(s===n)return s;if(!(s.indexOf("-")<0&&n.indexOf("-")<0)&&(s.indexOf("-")>0&&n.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===n||s.indexOf(n)===0&&n.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),si(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),n=[],s=r=>{r&&(this.isSupportedCode(r)?n.push(r):this.logger.warn(`rejecting language code not found in supportedLngs: ${r}`))};return si(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):si(e)&&s(this.formatLanguageCode(e)),i.forEach(r=>{n.indexOf(r)<0&&s(this.formatLanguageCode(r))}),n}}const ZM={zero:0,one:1,two:2,few:3,many:4,other:5},zM={select:a=>a===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class ND{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=oc.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=cx(e==="dev"?"en":e),n=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:i,type:n});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let r;try{r=new Intl.PluralRules(i,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),zM;if(!e.match(/-|_/))return zM;const u=this.languageUtils.getLanguagePartFromCode(e);r=this.getRule(u,t)}return this.pluralRulesCache[s]=r,r}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),(i==null?void 0:i.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(n=>`${t}${n}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((n,s)=>ZM[n]-ZM[s]).map(n=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=this.getRule(e,i);return n?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const UM=function(a,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=LD(a,e,t);return!s&&n&&si(t)&&(s=WA(a,t,i),s===void 0&&(s=WA(e,t,i))),s},NC=a=>a.replace(/\$/g,"$$$$");class FD{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=oc.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(i=>i),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:n,prefix:s,prefixEscaped:r,suffix:l,suffixEscaped:u,formatSeparator:d,unescapeSuffix:m,unescapePrefix:f,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:S,nestingSuffixEscaped:T,nestingOptionsSeparator:M,maxReplaces:G,alwaysFormat:P}=e.interpolation;this.escape=t!==void 0?t:kD,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=s?$p(s):r||"{{",this.suffix=l?$p(l):u||"}}",this.formatSeparator=d||",",this.unescapePrefix=m?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=v?$p(v):w||$p("$t("),this.nestingSuffix=S?$p(S):T||$p(")"),this.nestingOptionsSeparator=M||",",this.maxReplaces=G||1e3,this.alwaysFormat=P!==void 0?P:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>(t==null?void 0:t.source)===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,i,n){var w;let s,r,l;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=S=>{if(S.indexOf(this.formatSeparator)<0){const P=UM(t,u,S,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(P,void 0,i,{...n,...t,interpolationkey:S}):P}const T=S.split(this.formatSeparator),M=T.shift().trim(),G=T.join(this.formatSeparator).trim();return this.format(UM(t,u,M,this.options.keySeparator,this.options.ignoreJSONStructure),G,i,{...n,...t,interpolationkey:M})};this.resetRegExp();const m=(n==null?void 0:n.missingInterpolationHandler)||this.options.missingInterpolationHandler,f=((w=n==null?void 0:n.interpolation)==null?void 0:w.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:S=>NC(S)},{regex:this.regexp,safeValue:S=>this.escapeValue?NC(this.escape(S)):NC(S)}].forEach(S=>{for(l=0;s=S.regex.exec(e);){const T=s[1].trim();if(r=d(T),r===void 0)if(typeof m=="function"){const G=m(e,s,n);r=si(G)?G:""}else if(n&&Object.prototype.hasOwnProperty.call(n,T))r="";else if(f){r=s[0];continue}else this.logger.warn(`missed to pass in variable ${T} for interpolating ${e}`),r="";else!si(r)&&!this.useRawValueToEscape&&(r=GM(r));const M=S.safeValue(r);if(e=e.replace(s[0],M),f?(S.regex.lastIndex+=r.length,S.regex.lastIndex-=s[0].length):S.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,s,r;const l=(u,d)=>{const m=this.nestingOptionsSeparator;if(u.indexOf(m)<0)return u;const f=u.split(new RegExp(`${m}[ ]*{`));let v=`{${f[1]}`;u=f[0],v=this.interpolate(v,r);const w=v.match(/'/g),S=v.match(/"/g);(((w==null?void 0:w.length)??0)%2===0&&!S||S.length%2!==0)&&(v=v.replace(/'/g,'"'));try{r=JSON.parse(v),d&&(r={...d,...r})}catch(T){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,T),`${u}${m}${v}`}return r.defaultValue&&r.defaultValue.indexOf(this.prefix)>-1&&delete r.defaultValue,u};for(;n=this.nestingRegexp.exec(e);){let u=[];r={...i},r=r.replace&&!si(r.replace)?r.replace:r,r.applyPostProcessor=!1,delete r.defaultValue;let d=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){const m=n[1].split(this.formatSeparator).map(f=>f.trim());n[1]=m.shift(),u=m,d=!0}if(s=t(l.call(this,n[1].trim(),r),r),s&&n[0]===e&&!si(s))return s;si(s)||(s=GM(s)),s||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),s=""),d&&(s=u.reduce((m,f)=>this.format(m,f,i.lng,{...i,interpolationkey:n[1].trim()}),s.trim())),e=e.replace(n[0],s),this.regexp.lastIndex=0}return e}}const DD=a=>{let e=a.toLowerCase().trim();const t={};if(a.indexOf("(")>-1){const i=a.split("(");e=i[0].toLowerCase().trim();const n=i[1].substring(0,i[1].length-1);e==="currency"&&n.indexOf(":")<0?t.currency||(t.currency=n.trim()):e==="relativetime"&&n.indexOf(":")<0?t.range||(t.range=n.trim()):n.split(";").forEach(r=>{if(r){const[l,...u]=r.split(":"),d=u.join(":").trim().replace(/^'+|'+$/g,""),m=l.trim();t[m]||(t[m]=d),d==="false"&&(t[m]=!1),d==="true"&&(t[m]=!0),isNaN(d)||(t[m]=parseInt(d,10))}})}return{formatName:e,formatOptions:t}},Jp=a=>{const e={};return(t,i,n)=>{let s=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(s={...s,[n.interpolationkey]:void 0});const r=i+JSON.stringify(s);let l=e[r];return l||(l=a(cx(i),n),e[r]=l),l(t)}};let VD=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=oc.create("formatter"),this.options=e,this.formats={number:Jp((t,i)=>{const n=new Intl.NumberFormat(t,{...i});return s=>n.format(s)}),currency:Jp((t,i)=>{const n=new Intl.NumberFormat(t,{...i,style:"currency"});return s=>n.format(s)}),datetime:Jp((t,i)=>{const n=new Intl.DateTimeFormat(t,{...i});return s=>n.format(s)}),relativetime:Jp((t,i)=>{const n=new Intl.RelativeTimeFormat(t,{...i});return s=>n.format(s,i.range||"day")}),list:Jp((t,i)=>{const n=new Intl.ListFormat(t,{...i});return s=>n.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Jp(t)}format(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(l=>l.indexOf(")")>-1)){const l=s.findIndex(u=>u.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,l)].join(this.formatSeparator)}return s.reduce((l,u)=>{var f;const{formatName:d,formatOptions:m}=DD(u);if(this.formats[d]){let v=l;try{const w=((f=n==null?void 0:n.formatParams)==null?void 0:f[n.interpolationkey])||{},S=w.locale||w.lng||n.locale||n.lng||i;v=this.formats[d](l,S,{...m,...n,...w})}catch(w){this.logger.warn(w)}return v}else this.logger.warn(`there was no format function for ${d}`);return l},e)}};const ZD=(a,e)=>{a.pending[e]!==void 0&&(delete a.pending[e],a.pendingCount--)};class zD extends Vw{constructor(e,t,i){var s,r;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=n,this.logger=oc.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],(r=(s=this.backend)==null?void 0:s.init)==null||r.call(s,i,n.backend,n)}queueLoad(e,t,i,n){const s={},r={},l={},u={};return e.forEach(d=>{let m=!0;t.forEach(f=>{const v=`${d}|${f}`;!i.reload&&this.store.hasResourceBundle(d,f)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?r[v]===void 0&&(r[v]=!0):(this.state[v]=1,m=!1,r[v]===void 0&&(r[v]=!0),s[v]===void 0&&(s[v]=!0),u[f]===void 0&&(u[f]=!0)))}),m||(l[d]=!0)}),(Object.keys(s).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(s),pending:Object.keys(r),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(u)}}loaded(e,t,i){const n=e.split("|"),s=n[0],r=n[1];t&&this.emit("failedLoading",s,r,t),!t&&i&&this.store.addResourceBundle(s,r,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const l={};this.queue.forEach(u=>{MD(u.loaded,[s],r),ZD(u,e),t&&u.errors.push(t),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(d=>{l[d]||(l[d]={});const m=u.loaded[d];m.length&&m.forEach(f=>{l[d][f]===void 0&&(l[d][f]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(u=>!u.done)}read(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:n,wait:s,callback:r});return}this.readingCalls++;const l=(d,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(d&&m&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,n+1,s*2,r)},s);return}r(d,m)},u=this.backend[i].bind(this.backend);if(u.length===2){try{const d=u(e,t);d&&typeof d.then=="function"?d.then(m=>l(null,m)).catch(l):l(null,d)}catch(d){l(d)}return}return u(e,t,l)}prepareLoading(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();si(e)&&(e=this.languageUtils.toResolveHierarchy(e)),si(t)&&(t=[t]);const s=this.queueLoad(e,t,i,n);if(!s.toLoad.length)return s.pending.length||n(),null;s.toLoad.forEach(r=>{this.loadOne(r)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),n=i[0],s=i[1];this.read(n,s,"read",void 0,void 0,(r,l)=>{r&&this.logger.warn(`${t}loading namespace ${s} for language ${n} failed`,r),!r&&l&&this.logger.log(`${t}loaded namespace ${s} for language ${n}`,l),this.loaded(e,r,l)})}saveMissing(e,t,i,n,s){var u,d,m,f,v;let r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((d=(u=this.services)==null?void 0:u.utils)!=null&&d.hasLoadedNamespace&&!((f=(m=this.services)==null?void 0:m.utils)!=null&&f.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if((v=this.backend)!=null&&v.create){const w={...r,isUpdate:s},S=this.backend.create.bind(this.backend);if(S.length<6)try{let T;S.length===5?T=S(e,t,i,n,w):T=S(e,t,i,n),T&&typeof T.then=="function"?T.then(M=>l(null,M)).catch(l):l(null,T)}catch(T){l(T)}else S(e,t,i,n,l,w)}!e||!e[0]||this.store.addResource(e[0],t,i,n)}}}const HM=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:a=>{let e={};if(typeof a[1]=="object"&&(e=a[1]),si(a[1])&&(e.defaultValue=a[1]),si(a[2])&&(e.tDescription=a[2]),typeof a[2]=="object"||typeof a[3]=="object"){const t=a[3]||a[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:a=>a,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),XM=a=>{var e,t;return si(a.ns)&&(a.ns=[a.ns]),si(a.fallbackLng)&&(a.fallbackLng=[a.fallbackLng]),si(a.fallbackNS)&&(a.fallbackNS=[a.fallbackNS]),((t=(e=a.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(a.supportedLngs=a.supportedLngs.concat(["cimode"])),typeof a.initImmediate=="boolean"&&(a.initAsync=a.initImmediate),a},Tv=()=>{},UD=a=>{Object.getOwnPropertyNames(Object.getPrototypeOf(a)).forEach(t=>{typeof a[t]=="function"&&(a[t]=a[t].bind(a))})};class Q0 extends Vw{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=XM(e),this.services={},this.logger=oc,this.modules={external:[]},UD(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(i=t,t={}),t.defaultNS==null&&t.ns&&(si(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=HM();this.options={...n,...this.options,...XM(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=m=>m?typeof m=="function"?new m:m:null;if(!this.options.isClone){this.modules.logger?oc.init(s(this.modules.logger),this.options):oc.init(null,this.options);let m;this.modules.formatter?m=this.modules.formatter:m=VD;const f=new VM(this.options);this.store=new NM(this.options.resources,this.options);const v=this.services;v.logger=oc,v.resourceStore=this.store,v.languageUtils=f,v.pluralResolver=new ND(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),m&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(v.formatter=s(m),v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new FD(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new zD(s(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",function(w){for(var S=arguments.length,T=new Array(S>1?S-1:0),M=1;M<S;M++)T[M-1]=arguments[M];e.emit(w,...T)}),this.modules.languageDetector&&(v.languageDetector=s(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=s(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new hx(this.services,this.options),this.translator.on("*",function(w){for(var S=arguments.length,T=new Array(S>1?S-1:0),M=1;M<S;M++)T[M-1]=arguments[M];e.emit(w,...T)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,i||(i=Tv),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.length>0&&m[0]!=="dev"&&(this.options.lng=m[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(m=>{this[m]=function(){return e.store[m](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(m=>{this[m]=function(){return e.store[m](...arguments),e}});const u=Dy(),d=()=>{const m=(f,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(v),i(f,v)};if(this.languages&&!this.isInitialized)return m(null,this.t.bind(this));this.changeLanguage(this.options.lng,m)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),u}loadResources(e){var s,r;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tv;const n=si(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if((n==null?void 0:n.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const l=[],u=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(f=>{f!=="cimode"&&l.indexOf(f)<0&&l.push(f)})};n?u(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(m=>u(m)),(r=(s=this.options.preload)==null?void 0:s.forEach)==null||r.call(s,d=>u(d)),this.services.backendConnector.load(l,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(d)})}else i(null)}reloadResources(e,t,i){const n=Dy();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=Tv),this.services.backendConnector.reload(e,t,s=>{n.resolve(),i(s)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&kk.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,t){var i=this;this.isLanguageChangingTo=e;const n=Dy();this.emit("languageChanging",e);const s=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},r=(u,d)=>{d?(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve(function(){return i.t(...arguments)}),t&&t(u,function(){return i.t(...arguments)})},l=u=>{var m,f;!e&&!u&&this.services.languageDetector&&(u=[]);const d=si(u)?u:this.services.languageUtils.getBestMatchFromCodes(u);d&&(this.language||s(d),this.translator.language||this.translator.changeLanguage(d),(f=(m=this.services.languageDetector)==null?void 0:m.cacheUserLanguage)==null||f.call(m,d)),this.loadResources(d,v=>{r(v,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),n}getFixedT(e,t,i){var n=this;const s=function(r,l){let u;if(typeof l!="object"){for(var d=arguments.length,m=new Array(d>2?d-2:0),f=2;f<d;f++)m[f-2]=arguments[f];u=n.options.overloadTranslationOptionHandler([r,l].concat(m))}else u={...l};u.lng=u.lng||s.lng,u.lngs=u.lngs||s.lngs,u.ns=u.ns||s.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||i||s.keyPrefix);const v=n.options.keySeparator||".";let w;return u.keyPrefix&&Array.isArray(r)?w=r.map(S=>`${u.keyPrefix}${v}${S}`):w=u.keyPrefix?`${u.keyPrefix}${v}${r}`:r,n.t(w,u)};return si(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=i,s}t(){var n;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(n=this.translator)==null?void 0:n.translate(...t)}exists(){var n;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(n=this.translator)==null?void 0:n.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const r=(l,u)=>{const d=this.services.backendConnector.state[`${l}|${u}`];return d===-1||d===0||d===2};if(t.precheck){const l=t.precheck(this,r);if(l!==void 0)return l}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||r(i,e)&&(!n||r(s,e)))}loadNamespaces(e,t){const i=Dy();return this.options.ns?(si(e)&&(e=[e]),e.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{i.resolve(),t&&t(n)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=Dy();si(e)&&(e=[e]);const n=this.options.preload||[],s=e.filter(r=>n.indexOf(r)<0&&this.services.languageUtils.isSupportedCode(r));return s.length?(this.options.preload=n.concat(s),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}dir(e){var n,s;if(e||(e=this.resolvedLanguage||(((n=this.languages)==null?void 0:n.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=((s=this.services)==null?void 0:s.languageUtils)||new VM(HM());return t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Q0(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tv;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},s=new Q0(n);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(l=>{s[l]=this[l]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},i){const l=Object.keys(this.store.data).reduce((u,d)=>(u[d]={...this.store.data[d]},Object.keys(u[d]).reduce((m,f)=>(m[f]={...u[d][f]},m),{})),{});s.store=new NM(l,n),s.services.resourceStore=s.store}return s.translator=new hx(s.services,n),s.translator.on("*",function(l){for(var u=arguments.length,d=new Array(u>1?u-1:0),m=1;m<u;m++)d[m-1]=arguments[m];s.emit(l,...d)}),s.init(n,t),s.translator.options=n,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Wa=Q0.createInstance();Wa.createInstance=Q0.createInstance;Wa.createInstance;Wa.dir;Wa.init;Wa.loadResources;Wa.reloadResources;Wa.use;Wa.changeLanguage;Wa.getFixedT;const HD=Wa.t;Wa.exists;Wa.setDefaultNamespace;Wa.hasLoadedNamespace;Wa.loadNamespaces;Wa.loadLanguages;function GA(a){"@babel/helpers - typeof";return GA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GA(a)}function Wk(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":GA(XMLHttpRequest))==="object"}function XD(a){return!!a&&typeof a.then=="function"}function qD(a){return XD(a)?a:Promise.resolve(a)}const YD="modulepreload",KD=function(a){return"/luxembourg-geoportail/main/"+a},qM={},Gk=function(e,t,i){if(!t||t.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=KD(s),s in qM)return;qM[s]=!0;const r=s.endsWith(".css"),l=r?'[rel="stylesheet"]':"";if(!!i)for(let m=n.length-1;m>=0;m--){const f=n[m];if(f.href===s&&(!r||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const d=document.createElement("link");if(d.rel=r?"stylesheet":YD,r||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),r)return new Promise((m,f)=>{d.addEventListener("load",m),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s})};function YM(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,i)}return t}function KM(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YM(Object(t),!0).forEach(function(i){jD(a,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):YM(Object(t)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))})}return a}function jD(a,e,t){return(e=$D(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function $D(a){var e=JD(a,"string");return Am(e)=="symbol"?e:e+""}function JD(a,e){if(Am(a)!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var i=t.call(a,e||"default");if(Am(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function Am(a){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Am(a)}var qh=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?qh=global.fetch:typeof window<"u"&&window.fetch&&(qh=window.fetch);var e1;Wk()&&(typeof global<"u"&&global.XMLHttpRequest?e1=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(e1=window.XMLHttpRequest));var _x;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?_x=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(_x=window.ActiveXObject));typeof qh!="function"&&(qh=void 0);if(!qh&&!e1&&!_x)try{Gk(()=>import("./browser-ponyfill-50be31b5.js").then(a=>a.b),[]).then(function(a){qh=a.default}).catch(function(){})}catch{}var OA=function(e,t){if(t&&Am(t)==="object"){var i="";for(var n in t)i+="&"+encodeURIComponent(n)+"="+encodeURIComponent(t[n]);if(!i)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+i.slice(1)}return e},jM=function(e,t,i,n){var s=function(u){if(!u.ok)return i(u.statusText||"Error",{status:u.status});u.text().then(function(d){i(null,{status:u.status,data:d})}).catch(i)};if(n){var r=n(e,t);if(r instanceof Promise){r.then(s).catch(i);return}}typeof fetch=="function"?fetch(e,t).then(s).catch(i):qh(e,t).then(s).catch(i)},$M=!1,QD=function(e,t,i,n){e.queryStringParams&&(t=OA(t,e.queryStringParams));var s=KM({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),i&&(s["Content-Type"]="application/json");var r=typeof e.requestOptions=="function"?e.requestOptions(i):e.requestOptions,l=KM({method:i?"POST":"GET",body:i?e.stringify(i):void 0,headers:s},$M?{}:r),u=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{jM(t,l,n,u)}catch(d){if(!r||Object.keys(r).length===0||!d.message||d.message.indexOf("not implemented")<0)return n(d);try{Object.keys(r).forEach(function(m){delete l[m]}),jM(t,l,n,u),$M=!0}catch(m){n(m)}}},eV=function(e,t,i,n){i&&Am(i)==="object"&&(i=OA("",i).slice(1)),e.queryStringParams&&(t=OA(t,e.queryStringParams));try{var s=e1?new e1:new _x("MSXML2.XMLHTTP.3.0");s.open(i?"POST":"GET",t,1),e.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!e.withCredentials,i&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var r=e.customHeaders;if(r=typeof r=="function"?r():r,r)for(var l in r)s.setRequestHeader(l,r[l]);s.onreadystatechange=function(){s.readyState>3&&n(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(i)}catch(u){console&&console.log(u)}},tV=function(e,t,i,n){if(typeof i=="function"&&(n=i,i=void 0),n=n||function(){},qh&&t.indexOf("file:")!==0)return QD(e,t,i,n);if(Wk()||typeof ActiveXObject=="function")return eV(e,t,i,n);n(new Error("No fetch and no xhr implementation found!"))};function rf(a){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(a)}function JM(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,i)}return t}function FC(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JM(Object(t),!0).forEach(function(i){Ok(a,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):JM(Object(t)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))})}return a}function aV(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function QM(a,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,Pk(i.key),i)}}function iV(a,e,t){return e&&QM(a.prototype,e),t&&QM(a,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function Ok(a,e,t){return(e=Pk(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function Pk(a){var e=nV(a,"string");return rf(e)=="symbol"?e:e+""}function nV(a,e){if(rf(a)!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var i=t.call(a,e||"default");if(rf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}var rV=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,i,n){return Ok({},i,n||"")},parseLoadPayload:function(t,i){},request:tV,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Bk=function(){function a(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};aV(this,a),this.services=e,this.options=t,this.allOptions=i,this.type="backend",this.init(e,t,i)}return iV(a,[{key:"init",value:function(t){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=t,this.options=FC(FC(FC({},rV()),this.options||{}),n),this.allOptions=s,this.services&&this.options.reloadInterval){var r=setInterval(function(){return i.reload()},this.options.reloadInterval);rf(r)==="object"&&typeof r.unref=="function"&&r.unref()}}},{key:"readMulti",value:function(t,i,n){this._readAny(t,t,i,i,n)}},{key:"read",value:function(t,i,n){this._readAny([t],t,[i],i,n)}},{key:"_readAny",value:function(t,i,n,s,r){var l=this,u=this.options.loadPath;typeof this.options.loadPath=="function"&&(u=this.options.loadPath(t,n)),u=qD(u),u.then(function(d){if(!d)return r(null,{});var m=l.services.interpolator.interpolate(d,{lng:t.join("+"),ns:n.join("+")});l.loadUrl(m,r,i,s)})}},{key:"loadUrl",value:function(t,i,n,s){var r=this,l=typeof n=="string"?[n]:n,u=typeof s=="string"?[s]:s,d=this.options.parseLoadPayload(l,u);this.options.request(this.options,t,d,function(m,f){if(f&&(f.status>=500&&f.status<600||!f.status))return i("failed loading "+t+"; status code: "+f.status,!0);if(f&&f.status>=400&&f.status<500)return i("failed loading "+t+"; status code: "+f.status,!1);if(!f&&m&&m.message){var v=m.message.toLowerCase(),w=["failed","fetch","network","load"].find(function(M){return v.indexOf(M)>-1});if(w)return i("failed loading "+t+": "+m.message,!0)}if(m)return i(m,!1);var S,T;try{typeof f.data=="string"?S=r.options.parse(f.data,n,s):S=f.data}catch{T="failed parsing "+t+" to json"}if(T)return i(T,!1);i(null,S)})}},{key:"create",value:function(t,i,n,s,r){var l=this;if(this.options.addPath){typeof t=="string"&&(t=[t]);var u=this.options.parsePayload(i,n,s),d=0,m=[],f=[];t.forEach(function(v){var w=l.options.addPath;typeof l.options.addPath=="function"&&(w=l.options.addPath(v,i));var S=l.services.interpolator.interpolate(w,{lng:v,ns:i});l.options.request(l.options,S,u,function(T,M){d+=1,m.push(T),f.push(M),d===t.length&&typeof r=="function"&&r(m,f)})})}}},{key:"reload",value:function(){var t=this,i=this.services,n=i.backendConnector,s=i.languageUtils,r=i.logger,l=n.language;if(!(l&&l.toLowerCase()==="cimode")){var u=[],d=function(f){var v=s.toResolveHierarchy(f);v.forEach(function(w){u.indexOf(w)<0&&u.push(w)})};d(l),this.allOptions.preload&&this.allOptions.preload.forEach(function(m){return d(m)}),u.forEach(function(m){t.allOptions.ns.forEach(function(f){n.read(m,f,"read",null,null,function(v,w){v&&r.warn("loading namespace ".concat(f," for language ").concat(m," failed"),v),!v&&w&&r.log("loaded namespace ".concat(f," for language ").concat(m),w),n.loaded("".concat(m,"|").concat(f),v,w)})})})}}}])}();Bk.type="backend";/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function E4(a){const e=Object.create(null);for(const t of a.split(","))e[t]=1;return t=>t in e}const Rn={},Ng=[],fu=()=>{},sV=()=>!1,Zw=a=>a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&(a.charCodeAt(2)>122||a.charCodeAt(2)<97),M4=a=>a.startsWith("onUpdate:"),Ur=Object.assign,L4=(a,e)=>{const t=a.indexOf(e);t>-1&&a.splice(t,1)},oV=Object.prototype.hasOwnProperty,un=(a,e)=>oV.call(a,e),Ba=Array.isArray,Fg=a=>D1(a)==="[object Map]",Sf=a=>D1(a)==="[object Set]",eL=a=>D1(a)==="[object Date]",ai=a=>typeof a=="function",cr=a=>typeof a=="string",xu=a=>typeof a=="symbol",Sn=a=>a!==null&&typeof a=="object",Nk=a=>(Sn(a)||ai(a))&&ai(a.then)&&ai(a.catch),Fk=Object.prototype.toString,D1=a=>Fk.call(a),lV=a=>D1(a).slice(8,-1),Dk=a=>D1(a)==="[object Object]",R4=a=>cr(a)&&a!=="NaN"&&a[0]!=="-"&&""+parseInt(a,10)===a,A0=E4(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zw=a=>{const e=Object.create(null);return t=>e[t]||(e[t]=a(t))},uV=/-(\w)/g,Hl=zw(a=>a.replace(uV,(e,t)=>t?t.toUpperCase():"")),cV=/\B([A-Z])/g,a_=zw(a=>a.replace(cV,"-$1").toLowerCase()),Uw=zw(a=>a.charAt(0).toUpperCase()+a.slice(1)),DC=zw(a=>a?`on${Uw(a)}`:""),zh=(a,e)=>!Object.is(a,e),R2=(a,...e)=>{for(let t=0;t<a.length;t++)a[t](...e)},Vk=(a,e,t,i=!1)=>{Object.defineProperty(a,e,{configurable:!0,enumerable:!1,writable:i,value:t})},mx=a=>{const e=parseFloat(a);return isNaN(e)?a:e},dV=a=>{const e=cr(a)?Number(a):NaN;return isNaN(e)?a:e};let tL;const Hw=()=>tL||(tL=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Tc(a){if(Ba(a)){const e={};for(let t=0;t<a.length;t++){const i=a[t],n=cr(i)?pV(i):Tc(i);if(n)for(const s in n)e[s]=n[s]}return e}else if(cr(a)||Sn(a))return a}const hV=/;(?![^(]*\))/g,_V=/:([^]+)/,mV=/\/\*[^]*?\*\//g;function pV(a){const e={};return a.replace(mV,"").split(hV).forEach(t=>{if(t){const i=t.split(_V);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Pa(a){let e="";if(cr(a))e=a;else if(Ba(a))for(let t=0;t<a.length;t++){const i=Pa(a[t]);i&&(e+=i+" ")}else if(Sn(a))for(const t in a)a[t]&&(e+=t+" ");return e.trim()}const gV="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fV=E4(gV);function Zk(a){return!!a||a===""}function yV(a,e){if(a.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<a.length;i++)t=V1(a[i],e[i]);return t}function V1(a,e){if(a===e)return!0;let t=eL(a),i=eL(e);if(t||i)return t&&i?a.getTime()===e.getTime():!1;if(t=xu(a),i=xu(e),t||i)return a===e;if(t=Ba(a),i=Ba(e),t||i)return t&&i?yV(a,e):!1;if(t=Sn(a),i=Sn(e),t||i){if(!t||!i)return!1;const n=Object.keys(a).length,s=Object.keys(e).length;if(n!==s)return!1;for(const r in a){const l=a.hasOwnProperty(r),u=e.hasOwnProperty(r);if(l&&!u||!l&&u||!V1(a[r],e[r]))return!1}}return String(a)===String(e)}function k4(a,e){return a.findIndex(t=>V1(t,e))}const zk=a=>!!(a&&a.__v_isRef===!0),q=a=>cr(a)?a:a==null?"":Ba(a)||Sn(a)&&(a.toString===Fk||!ai(a.toString))?zk(a)?q(a.value):JSON.stringify(a,Uk,2):String(a),Uk=(a,e)=>zk(e)?Uk(a,e.value):Fg(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,n],s)=>(t[VC(i,s)+" =>"]=n,t),{})}:Sf(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>VC(t))}:xu(e)?VC(e):Sn(e)&&!Ba(e)&&!Dk(e)?String(e):e,VC=(a,e="")=>{var t;return xu(a)?`Symbol(${(t=a.description)!=null?t:e})`:a};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mo;class Hk{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=mo,!e&&mo&&(this.index=(mo.scopes||(mo.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=mo;try{return mo=this,e()}finally{mo=t}}}on(){mo=this}off(){mo=this.parent}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Xk(a){return new Hk(a)}function qk(){return mo}function bV(a,e=!1){mo&&mo.cleanups.push(a)}let Bn;const ZC=new WeakSet;class Yk{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,mo&&mo.active&&mo.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ZC.has(this)&&(ZC.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||jk(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,aL(this),$k(this);const e=Bn,t=yu;Bn=this,yu=!0;try{return this.fn()}finally{Jk(this),Bn=e,yu=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)O4(e);this.deps=this.depsTail=void 0,aL(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ZC.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){PA(this)&&this.run()}get dirty(){return PA(this)}}let Kk=0,T0,E0;function jk(a,e=!1){if(a.flags|=8,e){a.next=E0,E0=a;return}a.next=T0,T0=a}function W4(){Kk++}function G4(){if(--Kk>0)return;if(E0){let e=E0;for(E0=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let a;for(;T0;){let e=T0;for(T0=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){a||(a=i)}e=t}}if(a)throw a}function $k(a){for(let e=a.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Jk(a){let e,t=a.depsTail,i=t;for(;i;){const n=i.prevDep;i.version===-1?(i===t&&(t=n),O4(i),vV(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}a.deps=e,a.depsTail=t}function PA(a){for(let e=a.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Qk(e.dep.computed)||e.dep.version!==e.version))return!0;return!!a._dirty}function Qk(a){if(a.flags&4&&!(a.flags&16)||(a.flags&=-17,a.globalVersion===t1))return;a.globalVersion=t1;const e=a.dep;if(a.flags|=2,e.version>0&&!a.isSSR&&a.deps&&!PA(a)){a.flags&=-3;return}const t=Bn,i=yu;Bn=a,yu=!0;try{$k(a);const n=a.fn(a._value);(e.version===0||zh(n,a._value))&&(a._value=n,e.version++)}catch(n){throw e.version++,n}finally{Bn=t,yu=i,Jk(a),a.flags&=-3}}function O4(a,e=!1){const{dep:t,prevSub:i,nextSub:n}=a;if(i&&(i.nextSub=n,a.prevSub=void 0),n&&(n.prevSub=i,a.nextSub=void 0),t.subs===a&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)O4(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function vV(a){const{prevDep:e,nextDep:t}=a;e&&(e.nextDep=t,a.prevDep=void 0),t&&(t.prevDep=e,a.nextDep=void 0)}let yu=!0;const e6=[];function i_(){e6.push(yu),yu=!1}function n_(){const a=e6.pop();yu=a===void 0?!0:a}function aL(a){const{cleanup:e}=a;if(a.cleanup=void 0,e){const t=Bn;Bn=void 0;try{e()}finally{Bn=t}}}let t1=0;class xV{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class P4{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Bn||!yu||Bn===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Bn)t=this.activeLink=new xV(Bn,this),Bn.deps?(t.prevDep=Bn.depsTail,Bn.depsTail.nextDep=t,Bn.depsTail=t):Bn.deps=Bn.depsTail=t,t6(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=Bn.depsTail,t.nextDep=void 0,Bn.depsTail.nextDep=t,Bn.depsTail=t,Bn.deps===t&&(Bn.deps=i)}return t}trigger(e){this.version++,t1++,this.notify(e)}notify(e){W4();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{G4()}}}function t6(a){if(a.dep.sc++,a.sub.flags&4){const e=a.dep.computed;if(e&&!a.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)t6(i)}const t=a.dep.subs;t!==a&&(a.prevSub=t,t&&(t.nextSub=a)),a.dep.subs=a}}const px=new WeakMap,vm=Symbol(""),BA=Symbol(""),a1=Symbol("");function Us(a,e,t){if(yu&&Bn){let i=px.get(a);i||px.set(a,i=new Map);let n=i.get(t);n||(i.set(t,n=new P4),n.map=i,n.key=t),n.track()}}function yd(a,e,t,i,n,s){const r=px.get(a);if(!r){t1++;return}const l=u=>{u&&u.trigger()};if(W4(),e==="clear")r.forEach(l);else{const u=Ba(a),d=u&&R4(t);if(u&&t==="length"){const m=Number(i);r.forEach((f,v)=>{(v==="length"||v===a1||!xu(v)&&v>=m)&&l(f)})}else switch((t!==void 0||r.has(void 0))&&l(r.get(t)),d&&l(r.get(a1)),e){case"add":u?d&&l(r.get("length")):(l(r.get(vm)),Fg(a)&&l(r.get(BA)));break;case"delete":u||(l(r.get(vm)),Fg(a)&&l(r.get(BA)));break;case"set":Fg(a)&&l(r.get(vm));break}}G4()}function wV(a,e){const t=px.get(a);return t&&t.get(e)}function Qp(a){const e=Fi(a);return e===a?e:(Us(e,"iterate",a1),Dl(a)?e:e.map(Hs))}function Xw(a){return Us(a=Fi(a),"iterate",a1),a}const IV={__proto__:null,[Symbol.iterator](){return zC(this,Symbol.iterator,Hs)},concat(...a){return Qp(this).concat(...a.map(e=>Ba(e)?Qp(e):e))},entries(){return zC(this,"entries",a=>(a[1]=Hs(a[1]),a))},every(a,e){return id(this,"every",a,e,void 0,arguments)},filter(a,e){return id(this,"filter",a,e,t=>t.map(Hs),arguments)},find(a,e){return id(this,"find",a,e,Hs,arguments)},findIndex(a,e){return id(this,"findIndex",a,e,void 0,arguments)},findLast(a,e){return id(this,"findLast",a,e,Hs,arguments)},findLastIndex(a,e){return id(this,"findLastIndex",a,e,void 0,arguments)},forEach(a,e){return id(this,"forEach",a,e,void 0,arguments)},includes(...a){return UC(this,"includes",a)},indexOf(...a){return UC(this,"indexOf",a)},join(a){return Qp(this).join(a)},lastIndexOf(...a){return UC(this,"lastIndexOf",a)},map(a,e){return id(this,"map",a,e,void 0,arguments)},pop(){return Vy(this,"pop")},push(...a){return Vy(this,"push",a)},reduce(a,...e){return iL(this,"reduce",a,e)},reduceRight(a,...e){return iL(this,"reduceRight",a,e)},shift(){return Vy(this,"shift")},some(a,e){return id(this,"some",a,e,void 0,arguments)},splice(...a){return Vy(this,"splice",a)},toReversed(){return Qp(this).toReversed()},toSorted(a){return Qp(this).toSorted(a)},toSpliced(...a){return Qp(this).toSpliced(...a)},unshift(...a){return Vy(this,"unshift",a)},values(){return zC(this,"values",Hs)}};function zC(a,e,t){const i=Xw(a),n=i[e]();return i!==a&&!Dl(a)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.value&&(s.value=t(s.value)),s}),n}const CV=Array.prototype;function id(a,e,t,i,n,s){const r=Xw(a),l=r!==a&&!Dl(a),u=r[e];if(u!==CV[e]){const f=u.apply(a,s);return l?Hs(f):f}let d=t;r!==a&&(l?d=function(f,v){return t.call(this,Hs(f),v,a)}:t.length>2&&(d=function(f,v){return t.call(this,f,v,a)}));const m=u.call(r,d,i);return l&&n?n(m):m}function iL(a,e,t,i){const n=Xw(a);let s=t;return n!==a&&(Dl(a)?t.length>3&&(s=function(r,l,u){return t.call(this,r,l,u,a)}):s=function(r,l,u){return t.call(this,r,Hs(l),u,a)}),n[e](s,...i)}function UC(a,e,t){const i=Fi(a);Us(i,"iterate",a1);const n=i[e](...t);return(n===-1||n===!1)&&F4(t[0])?(t[0]=Fi(t[0]),i[e](...t)):n}function Vy(a,e,t=[]){i_(),W4();const i=Fi(a)[e].apply(a,t);return G4(),n_(),i}const SV=E4("__proto__,__v_isRef,__isVue"),a6=new Set(Object.getOwnPropertyNames(Symbol).filter(a=>a!=="arguments"&&a!=="caller").map(a=>Symbol[a]).filter(xu));function AV(a){xu(a)||(a=String(a));const e=Fi(this);return Us(e,"has",a),e.hasOwnProperty(a)}class i6{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const n=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!n;if(t==="__v_isReadonly")return n;if(t==="__v_isShallow")return s;if(t==="__v_raw")return i===(n?s?PV:o6:s?s6:r6).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const r=Ba(e);if(!n){let u;if(r&&(u=IV[t]))return u;if(t==="hasOwnProperty")return AV}const l=Reflect.get(e,t,Xn(e)?e:i);return(xu(t)?a6.has(t):SV(t))||(n||Us(e,"get",t),s)?l:Xn(l)?r&&R4(t)?l:l.value:Sn(l)?n?l6(l):qw(l):l}}class n6 extends i6{constructor(e=!1){super(!1,e)}set(e,t,i,n){let s=e[t];if(!this._isShallow){const u=Tm(s);if(!Dl(i)&&!Tm(i)&&(s=Fi(s),i=Fi(i)),!Ba(e)&&Xn(s)&&!Xn(i))return u?!1:(s.value=i,!0)}const r=Ba(e)&&R4(t)?Number(t)<e.length:un(e,t),l=Reflect.set(e,t,i,Xn(e)?e:n);return e===Fi(n)&&(r?zh(i,s)&&yd(e,"set",t,i):yd(e,"add",t,i)),l}deleteProperty(e,t){const i=un(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&yd(e,"delete",t,void 0),n}has(e,t){const i=Reflect.has(e,t);return(!xu(t)||!a6.has(t))&&Us(e,"has",t),i}ownKeys(e){return Us(e,"iterate",Ba(e)?"length":vm),Reflect.ownKeys(e)}}class TV extends i6{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const EV=new n6,MV=new TV,LV=new n6(!0);const NA=a=>a,Ev=a=>Reflect.getPrototypeOf(a);function RV(a,e,t){return function(...i){const n=this.__v_raw,s=Fi(n),r=Fg(s),l=a==="entries"||a===Symbol.iterator&&r,u=a==="keys"&&r,d=n[a](...i),m=t?NA:e?FA:Hs;return!e&&Us(s,"iterate",u?BA:vm),{next(){const{value:f,done:v}=d.next();return v?{value:f,done:v}:{value:l?[m(f[0]),m(f[1])]:m(f),done:v}},[Symbol.iterator](){return this}}}}function Mv(a){return function(...e){return a==="delete"?!1:a==="clear"?void 0:this}}function kV(a,e){const t={get(n){const s=this.__v_raw,r=Fi(s),l=Fi(n);a||(zh(n,l)&&Us(r,"get",n),Us(r,"get",l));const{has:u}=Ev(r),d=e?NA:a?FA:Hs;if(u.call(r,n))return d(s.get(n));if(u.call(r,l))return d(s.get(l));s!==r&&s.get(n)},get size(){const n=this.__v_raw;return!a&&Us(Fi(n),"iterate",vm),Reflect.get(n,"size",n)},has(n){const s=this.__v_raw,r=Fi(s),l=Fi(n);return a||(zh(n,l)&&Us(r,"has",n),Us(r,"has",l)),n===l?s.has(n):s.has(n)||s.has(l)},forEach(n,s){const r=this,l=r.__v_raw,u=Fi(l),d=e?NA:a?FA:Hs;return!a&&Us(u,"iterate",vm),l.forEach((m,f)=>n.call(s,d(m),d(f),r))}};return Ur(t,a?{add:Mv("add"),set:Mv("set"),delete:Mv("delete"),clear:Mv("clear")}:{add(n){!e&&!Dl(n)&&!Tm(n)&&(n=Fi(n));const s=Fi(this);return Ev(s).has.call(s,n)||(s.add(n),yd(s,"add",n,n)),this},set(n,s){!e&&!Dl(s)&&!Tm(s)&&(s=Fi(s));const r=Fi(this),{has:l,get:u}=Ev(r);let d=l.call(r,n);d||(n=Fi(n),d=l.call(r,n));const m=u.call(r,n);return r.set(n,s),d?zh(s,m)&&yd(r,"set",n,s):yd(r,"add",n,s),this},delete(n){const s=Fi(this),{has:r,get:l}=Ev(s);let u=r.call(s,n);u||(n=Fi(n),u=r.call(s,n)),l&&l.call(s,n);const d=s.delete(n);return u&&yd(s,"delete",n,void 0),d},clear(){const n=Fi(this),s=n.size!==0,r=n.clear();return s&&yd(n,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=RV(n,a,e)}),t}function B4(a,e){const t=kV(a,e);return(i,n,s)=>n==="__v_isReactive"?!a:n==="__v_isReadonly"?a:n==="__v_raw"?i:Reflect.get(un(t,n)&&n in i?t:i,n,s)}const WV={get:B4(!1,!1)},GV={get:B4(!1,!0)},OV={get:B4(!0,!1)};const r6=new WeakMap,s6=new WeakMap,o6=new WeakMap,PV=new WeakMap;function BV(a){switch(a){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function NV(a){return a.__v_skip||!Object.isExtensible(a)?0:BV(lV(a))}function qw(a){return Tm(a)?a:N4(a,!1,EV,WV,r6)}function FV(a){return N4(a,!1,LV,GV,s6)}function l6(a){return N4(a,!0,MV,OV,o6)}function N4(a,e,t,i,n){if(!Sn(a)||a.__v_raw&&!(e&&a.__v_isReactive))return a;const s=n.get(a);if(s)return s;const r=NV(a);if(r===0)return a;const l=new Proxy(a,r===2?i:t);return n.set(a,l),l}function wd(a){return Tm(a)?wd(a.__v_raw):!!(a&&a.__v_isReactive)}function Tm(a){return!!(a&&a.__v_isReadonly)}function Dl(a){return!!(a&&a.__v_isShallow)}function F4(a){return a?!!a.__v_raw:!1}function Fi(a){const e=a&&a.__v_raw;return e?Fi(e):a}function D4(a){return!un(a,"__v_skip")&&Object.isExtensible(a)&&Vk(a,"__v_skip",!0),a}const Hs=a=>Sn(a)?qw(a):a,FA=a=>Sn(a)?l6(a):a;function Xn(a){return a?a.__v_isRef===!0:!1}function Fe(a){return u6(a,!1)}function Di(a){return u6(a,!0)}function u6(a,e){return Xn(a)?a:new DV(a,e)}class DV{constructor(e,t){this.dep=new P4,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Fi(e),this._value=t?e:Hs(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||Dl(e)||Tm(e);e=i?e:Fi(e),zh(e,t)&&(this._rawValue=e,this._value=i?e:Hs(e),this.dep.trigger())}}function k(a){return Xn(a)?a.value:a}function VV(a){return ai(a)?a():k(a)}const ZV={get:(a,e,t)=>e==="__v_raw"?a:k(Reflect.get(a,e,t)),set:(a,e,t,i)=>{const n=a[e];return Xn(n)&&!Xn(t)?(n.value=t,!0):Reflect.set(a,e,t,i)}};function c6(a){return wd(a)?a:new Proxy(a,ZV)}function zV(a){const e=Ba(a)?new Array(a.length):{};for(const t in a)e[t]=h6(a,t);return e}class UV{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return wV(Fi(this._object),this._key)}}class HV{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function d6(a,e,t){return Xn(a)?a:ai(a)?new HV(a):Sn(a)&&arguments.length>1?h6(a,e,t):Fe(a)}function h6(a,e,t){const i=a[e];return Xn(i)?i:new UV(a,e,t)}class XV{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new P4(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=t1-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Bn!==this)return jk(this,!0),!0}get value(){const e=this.dep.track();return Qk(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function qV(a,e,t=!1){let i,n;return ai(a)?i=a:(i=a.get,n=a.set),new XV(i,n,t)}const Lv={},gx=new WeakMap;let nm;function YV(a,e=!1,t=nm){if(t){let i=gx.get(t);i||gx.set(t,i=[]),i.push(a)}}function KV(a,e,t=Rn){const{immediate:i,deep:n,once:s,scheduler:r,augmentJob:l,call:u}=t,d=N=>n?N:Dl(N)||n===!1||n===0?bd(N,1):bd(N);let m,f,v,w,S=!1,T=!1;if(Xn(a)?(f=()=>a.value,S=Dl(a)):wd(a)?(f=()=>d(a),S=!0):Ba(a)?(T=!0,S=a.some(N=>wd(N)||Dl(N)),f=()=>a.map(N=>{if(Xn(N))return N.value;if(wd(N))return d(N);if(ai(N))return u?u(N,2):N()})):ai(a)?e?f=u?()=>u(a,2):a:f=()=>{if(v){i_();try{v()}finally{n_()}}const N=nm;nm=m;try{return u?u(a,3,[w]):a(w)}finally{nm=N}}:f=fu,e&&n){const N=f,V=n===!0?1/0:n;f=()=>bd(N(),V)}const M=qk(),G=()=>{m.stop(),M&&M.active&&L4(M.effects,m)};if(s&&e){const N=e;e=(...V)=>{N(...V),G()}}let P=T?new Array(a.length).fill(Lv):Lv;const F=N=>{if(!(!(m.flags&1)||!m.dirty&&!N))if(e){const V=m.run();if(n||S||(T?V.some((K,te)=>zh(K,P[te])):zh(V,P))){v&&v();const K=nm;nm=m;try{const te=[V,P===Lv?void 0:T&&P[0]===Lv?[]:P,w];u?u(e,3,te):e(...te),P=V}finally{nm=K}}}else m.run()};return l&&l(F),m=new Yk(f),m.scheduler=r?()=>r(F,!1):F,w=N=>YV(N,!1,m),v=m.onStop=()=>{const N=gx.get(m);if(N){if(u)u(N,4);else for(const V of N)V();gx.delete(m)}},e?i?F(!0):P=m.run():r?r(F.bind(null,!0),!0):m.run(),G.pause=m.pause.bind(m),G.resume=m.resume.bind(m),G.stop=G,G}function bd(a,e=1/0,t){if(e<=0||!Sn(a)||a.__v_skip||(t=t||new Set,t.has(a)))return a;if(t.add(a),e--,Xn(a))bd(a.value,e,t);else if(Ba(a))for(let i=0;i<a.length;i++)bd(a[i],e,t);else if(Sf(a)||Fg(a))a.forEach(i=>{bd(i,e,t)});else if(Dk(a)){for(const i in a)bd(a[i],e,t);for(const i of Object.getOwnPropertySymbols(a))Object.prototype.propertyIsEnumerable.call(a,i)&&bd(a[i],e,t)}return a}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Z1(a,e,t,i){try{return i?a(...i):a()}catch(n){Yw(n,e,t)}}function wu(a,e,t,i){if(ai(a)){const n=Z1(a,e,t,i);return n&&Nk(n)&&n.catch(s=>{Yw(s,e,t)}),n}if(Ba(a)){const n=[];for(let s=0;s<a.length;s++)n.push(wu(a[s],e,t,i));return n}}function Yw(a,e,t,i=!0){const n=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:r}=e&&e.appContext.config||Rn;if(e){let l=e.parent;const u=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const m=l.ec;if(m){for(let f=0;f<m.length;f++)if(m[f](a,u,d)===!1)return}l=l.parent}if(s){i_(),Z1(s,null,10,[a,u,d]),n_();return}}jV(a,t,n,i,r)}function jV(a,e,t,i=!0,n=!1){if(n)throw a;console.error(a)}const po=[];let ic=-1;const Dg=[];let Ih=null,mg=0;const _6=Promise.resolve();let fx=null;function Iu(a){const e=fx||_6;return a?e.then(this?a.bind(this):a):e}function $V(a){let e=ic+1,t=po.length;for(;e<t;){const i=e+t>>>1,n=po[i],s=i1(n);s<a||s===a&&n.flags&2?e=i+1:t=i}return e}function V4(a){if(!(a.flags&1)){const e=i1(a),t=po[po.length-1];!t||!(a.flags&2)&&e>=i1(t)?po.push(a):po.splice($V(e),0,a),a.flags|=1,m6()}}function m6(){fx||(fx=_6.then(g6))}function JV(a){Ba(a)?Dg.push(...a):Ih&&a.id===-1?Ih.splice(mg+1,0,a):a.flags&1||(Dg.push(a),a.flags|=1),m6()}function nL(a,e,t=ic+1){for(;t<po.length;t++){const i=po[t];if(i&&i.flags&2){if(a&&i.id!==a.uid)continue;po.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function p6(a){if(Dg.length){const e=[...new Set(Dg)].sort((t,i)=>i1(t)-i1(i));if(Dg.length=0,Ih){Ih.push(...e);return}for(Ih=e,mg=0;mg<Ih.length;mg++){const t=Ih[mg];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Ih=null,mg=0}}const i1=a=>a.id==null?a.flags&2?-1:1/0:a.id;function g6(a){const e=fu;try{for(ic=0;ic<po.length;ic++){const t=po[ic];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Z1(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ic<po.length;ic++){const t=po[ic];t&&(t.flags&=-2)}ic=-1,po.length=0,p6(),fx=null,(po.length||Dg.length)&&g6()}}let Qr=null,f6=null;function yx(a){const e=Qr;return Qr=a,f6=a&&a.type.__scopeId||null,e}function Ht(a,e=Qr,t){if(!e||a._n)return a;const i=(...n)=>{i._d&&fL(-1);const s=yx(e);let r;try{r=a(...n)}finally{yx(s),i._d&&fL(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function La(a,e){if(Qr===null)return a;const t=tI(Qr),i=a.dirs||(a.dirs=[]);for(let n=0;n<e.length;n++){let[s,r,l,u=Rn]=e[n];s&&(ai(s)&&(s={mounted:s,updated:s}),s.deep&&bd(r),i.push({dir:s,instance:t,value:r,oldValue:void 0,arg:l,modifiers:u}))}return a}function z_(a,e,t,i){const n=a.dirs,s=e&&e.dirs;for(let r=0;r<n.length;r++){const l=n[r];s&&(l.oldValue=s[r].value);let u=l.dir[i];u&&(i_(),wu(u,t,8,[a.el,l,a,e]),n_())}}const y6=Symbol("_vte"),b6=a=>a.__isTeleport,M0=a=>a&&(a.disabled||a.disabled===""),rL=a=>a&&(a.defer||a.defer===""),sL=a=>typeof SVGElement<"u"&&a instanceof SVGElement,oL=a=>typeof MathMLElement=="function"&&a instanceof MathMLElement,DA=(a,e)=>{const t=a&&a.to;return cr(t)?e?e(t):null:t},v6={name:"Teleport",__isTeleport:!0,process(a,e,t,i,n,s,r,l,u,d){const{mc:m,pc:f,pbc:v,o:{insert:w,querySelector:S,createText:T,createComment:M}}=d,G=M0(e.props);let{shapeFlag:P,children:F,dynamicChildren:N}=e;if(a==null){const V=e.el=T(""),K=e.anchor=T("");w(V,t,i),w(K,t,i);const te=(ne,se)=>{P&16&&(n&&n.isCE&&(n.ce._teleportTarget=ne),m(F,ne,se,n,s,r,l,u))},J=()=>{const ne=e.target=DA(e.props,S),se=x6(ne,e,T,w);ne&&(r!=="svg"&&sL(ne)?r="svg":r!=="mathml"&&oL(ne)&&(r="mathml"),G||(te(ne,se),k2(e,!1)))};G&&(te(t,K),k2(e,!0)),rL(e.props)?co(()=>{J(),e.el.__isMounted=!0},s):J()}else{if(rL(e.props)&&!a.el.__isMounted){co(()=>{v6.process(a,e,t,i,n,s,r,l,u,d),delete a.el.__isMounted},s);return}e.el=a.el,e.targetStart=a.targetStart;const V=e.anchor=a.anchor,K=e.target=a.target,te=e.targetAnchor=a.targetAnchor,J=M0(a.props),ne=J?t:K,se=J?V:te;if(r==="svg"||sL(K)?r="svg":(r==="mathml"||oL(K))&&(r="mathml"),N?(v(a.dynamicChildren,N,ne,n,s,r,l),X4(a,e,!0)):u||f(a,e,ne,se,n,s,r,l,!1),G)J?e.props&&a.props&&e.props.to!==a.props.to&&(e.props.to=a.props.to):Rv(e,t,V,d,1);else if((e.props&&e.props.to)!==(a.props&&a.props.to)){const de=e.target=DA(e.props,S);de&&Rv(e,de,null,d,0)}else J&&Rv(e,K,te,d,1);k2(e,G)}},remove(a,e,t,{um:i,o:{remove:n}},s){const{shapeFlag:r,children:l,anchor:u,targetStart:d,targetAnchor:m,target:f,props:v}=a;if(f&&(n(d),n(m)),s&&n(u),r&16){const w=s||!M0(v);for(let S=0;S<l.length;S++){const T=l[S];i(T,e,t,w,!!T.dynamicChildren)}}},move:Rv,hydrate:QV};function Rv(a,e,t,{o:{insert:i},m:n},s=2){s===0&&i(a.targetAnchor,e,t);const{el:r,anchor:l,shapeFlag:u,children:d,props:m}=a,f=s===2;if(f&&i(r,e,t),(!f||M0(m))&&u&16)for(let v=0;v<d.length;v++)n(d[v],e,t,2);f&&i(l,e,t)}function QV(a,e,t,i,n,s,{o:{nextSibling:r,parentNode:l,querySelector:u,insert:d,createText:m}},f){const v=e.target=DA(e.props,u);if(v){const w=M0(e.props),S=v._lpa||v.firstChild;if(e.shapeFlag&16)if(w)e.anchor=f(r(a),e,l(a),t,i,n,s),e.targetStart=S,e.targetAnchor=S&&r(S);else{e.anchor=r(a);let T=S;for(;T;){if(T&&T.nodeType===8){if(T.data==="teleport start anchor")e.targetStart=T;else if(T.data==="teleport anchor"){e.targetAnchor=T,v._lpa=e.targetAnchor&&r(e.targetAnchor);break}}T=r(T)}e.targetAnchor||x6(v,e,m,d),f(S&&r(S),e,v,t,i,n,s)}k2(e,w)}return e.anchor&&r(e.anchor)}const Kw=v6;function k2(a,e){const t=a.ctx;if(t&&t.ut){let i,n;for(e?(i=a.el,n=a.anchor):(i=a.targetStart,n=a.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}function x6(a,e,t,i){const n=e.targetStart=t(""),s=e.targetAnchor=t("");return n[y6]=s,a&&(i(n,a),i(s,a)),s}const Ch=Symbol("_leaveCb"),kv=Symbol("_enterCb");function eZ(){const a={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return In(()=>{a.isMounted=!0}),qm(()=>{a.isUnmounting=!0}),a}const Rl=[Function,Array],w6={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Rl,onEnter:Rl,onAfterEnter:Rl,onEnterCancelled:Rl,onBeforeLeave:Rl,onLeave:Rl,onAfterLeave:Rl,onLeaveCancelled:Rl,onBeforeAppear:Rl,onAppear:Rl,onAfterAppear:Rl,onAppearCancelled:Rl},I6=a=>{const e=a.subTree;return e.component?I6(e.component):e},tZ={name:"BaseTransition",props:w6,setup(a,{slots:e}){const t=K6(),i=eZ();return()=>{const n=e.default&&A6(e.default(),!0);if(!n||!n.length)return;const s=C6(n),r=Fi(a),{mode:l}=r;if(i.isLeaving)return HC(s);const u=lL(s);if(!u)return HC(s);let d=VA(u,r,i,t,f=>d=f);u.type!==fo&&n1(u,d);let m=t.subTree&&lL(t.subTree);if(m&&m.type!==fo&&!um(u,m)&&I6(t).type!==fo){let f=VA(m,r,i,t);if(n1(m,f),l==="out-in"&&u.type!==fo)return i.isLeaving=!0,f.afterLeave=()=>{i.isLeaving=!1,t.job.flags&8||t.update(),delete f.afterLeave,m=void 0},HC(s);l==="in-out"&&u.type!==fo?f.delayLeave=(v,w,S)=>{const T=S6(i,m);T[String(m.key)]=m,v[Ch]=()=>{w(),v[Ch]=void 0,delete d.delayedLeave,m=void 0},d.delayedLeave=()=>{S(),delete d.delayedLeave,m=void 0}}:m=void 0}else m&&(m=void 0);return s}}};function C6(a){let e=a[0];if(a.length>1){for(const t of a)if(t.type!==fo){e=t;break}}return e}const aZ=tZ;function S6(a,e){const{leavingVNodes:t}=a;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function VA(a,e,t,i,n){const{appear:s,mode:r,persisted:l=!1,onBeforeEnter:u,onEnter:d,onAfterEnter:m,onEnterCancelled:f,onBeforeLeave:v,onLeave:w,onAfterLeave:S,onLeaveCancelled:T,onBeforeAppear:M,onAppear:G,onAfterAppear:P,onAppearCancelled:F}=e,N=String(a.key),V=S6(t,a),K=(ne,se)=>{ne&&wu(ne,i,9,se)},te=(ne,se)=>{const de=se[1];K(ne,se),Ba(ne)?ne.every(_e=>_e.length<=1)&&de():ne.length<=1&&de()},J={mode:r,persisted:l,beforeEnter(ne){let se=u;if(!t.isMounted)if(s)se=M||u;else return;ne[Ch]&&ne[Ch](!0);const de=V[N];de&&um(a,de)&&de.el[Ch]&&de.el[Ch](),K(se,[ne])},enter(ne){let se=d,de=m,_e=f;if(!t.isMounted)if(s)se=G||d,de=P||m,_e=F||f;else return;let Se=!1;const ce=ne[kv]=Ie=>{Se||(Se=!0,Ie?K(_e,[ne]):K(de,[ne]),J.delayedLeave&&J.delayedLeave(),ne[kv]=void 0)};se?te(se,[ne,ce]):ce()},leave(ne,se){const de=String(a.key);if(ne[kv]&&ne[kv](!0),t.isUnmounting)return se();K(v,[ne]);let _e=!1;const Se=ne[Ch]=ce=>{_e||(_e=!0,se(),ce?K(T,[ne]):K(S,[ne]),ne[Ch]=void 0,V[de]===a&&delete V[de])};V[de]=a,w?te(w,[ne,Se]):Se()},clone(ne){const se=VA(ne,e,t,i,n);return n&&n(se),se}};return J}function HC(a){if(jw(a))return a=Yh(a),a.children=null,a}function lL(a){if(!jw(a))return b6(a.type)&&a.children?C6(a.children):a;const{shapeFlag:e,children:t}=a;if(t){if(e&16)return t[0];if(e&32&&ai(t.default))return t.default()}}function n1(a,e){a.shapeFlag&6&&a.component?(a.transition=e,n1(a.component.subTree,e)):a.shapeFlag&128?(a.ssContent.transition=e.clone(a.ssContent),a.ssFallback.transition=e.clone(a.ssFallback)):a.transition=e}function A6(a,e=!1,t){let i=[],n=0;for(let s=0;s<a.length;s++){let r=a[s];const l=t==null?r.key:String(t)+String(r.key!=null?r.key:s);r.type===Ot?(r.patchFlag&128&&n++,i=i.concat(A6(r.children,e,l))):(e||r.type!==fo)&&i.push(l!=null?Yh(r,{key:l}):r)}if(n>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function $e(a,e){return ai(a)?(()=>Ur({name:a.name},e,{setup:a}))():a}function T6(a){a.ids=[a.ids[0]+a.ids[2]+++"-",0,0]}function bx(a,e,t,i,n=!1){if(Ba(a)){a.forEach((S,T)=>bx(S,e&&(Ba(e)?e[T]:e),t,i,n));return}if(Vg(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&bx(a,e,t,i.component.subTree);return}const s=i.shapeFlag&4?tI(i.component):i.el,r=n?null:s,{i:l,r:u}=a,d=e&&e.r,m=l.refs===Rn?l.refs={}:l.refs,f=l.setupState,v=Fi(f),w=f===Rn?()=>!1:S=>un(v,S);if(d!=null&&d!==u&&(cr(d)?(m[d]=null,w(d)&&(f[d]=null)):Xn(d)&&(d.value=null)),ai(u))Z1(u,l,12,[r,m]);else{const S=cr(u),T=Xn(u);if(S||T){const M=()=>{if(a.f){const G=S?w(u)?f[u]:m[u]:u.value;n?Ba(G)&&L4(G,s):Ba(G)?G.includes(s)||G.push(s):S?(m[u]=[s],w(u)&&(f[u]=m[u])):(u.value=[s],a.k&&(m[a.k]=u.value))}else S?(m[u]=r,w(u)&&(f[u]=r)):T&&(u.value=r,a.k&&(m[a.k]=r))};r?(M.id=-1,co(M,t)):M()}}}Hw().requestIdleCallback;Hw().cancelIdleCallback;const Vg=a=>!!a.type.__asyncLoader,jw=a=>a.type.__isKeepAlive;function E6(a,e){M6(a,"a",e)}function iZ(a,e){M6(a,"da",e)}function M6(a,e,t=ps){const i=a.__wdc||(a.__wdc=()=>{let n=t;for(;n;){if(n.isDeactivated)return;n=n.parent}return a()});if($w(e,i,t),t){let n=t.parent;for(;n&&n.parent;)jw(n.parent.vnode)&&nZ(i,e,t,n),n=n.parent}}function nZ(a,e,t,i){const n=$w(e,a,i,!0);es(()=>{L4(i[e],n)},t)}function $w(a,e,t=ps,i=!1){if(t){const n=t[a]||(t[a]=[]),s=e.__weh||(e.__weh=(...r)=>{i_();const l=U1(t),u=wu(e,t,a,r);return l(),n_(),u});return i?n.unshift(s):n.push(s),s}}const Dd=a=>(e,t=ps)=>{(!o1||a==="sp")&&$w(a,(...i)=>e(...i),t)},rZ=Dd("bm"),In=Dd("m"),sZ=Dd("bu"),oZ=Dd("u"),qm=Dd("bum"),es=Dd("um"),lZ=Dd("sp"),uZ=Dd("rtg"),cZ=Dd("rtc");function dZ(a,e=ps){$w("ec",a,e)}const Z4="components",hZ="directives";function _Z(a,e){return z4(Z4,a,!0,e)||a}const L6=Symbol.for("v-ndc");function z1(a){return cr(a)?z4(Z4,a,!1)||a:a||L6}function wl(a){return z4(hZ,a)}function z4(a,e,t=!0,i=!1){const n=Qr||ps;if(n){const s=n.type;if(a===Z4){const l=QZ(s,!1);if(l&&(l===e||l===Hl(e)||l===Uw(Hl(e))))return s}const r=uL(n[a]||s[a],e)||uL(n.appContext[a],e);return!r&&i?s:r}}function uL(a,e){return a&&(a[e]||a[Hl(e)]||a[Uw(Hl(e))])}function xi(a,e,t,i){let n;const s=t&&t[i],r=Ba(a);if(r||cr(a)){const l=r&&wd(a);let u=!1;l&&(u=!Dl(a),a=Xw(a)),n=new Array(a.length);for(let d=0,m=a.length;d<m;d++)n[d]=e(u?Hs(a[d]):a[d],d,void 0,s&&s[d])}else if(typeof a=="number"){n=new Array(a);for(let l=0;l<a;l++)n[l]=e(l+1,l,void 0,s&&s[l])}else if(Sn(a))if(a[Symbol.iterator])n=Array.from(a,(l,u)=>e(l,u,void 0,s&&s[u]));else{const l=Object.keys(a);n=new Array(l.length);for(let u=0,d=l.length;u<d;u++){const m=l[u];n[u]=e(a[m],m,u,s&&s[u])}}else n=[];return t&&(t[i]=n),n}function Xa(a,e,t={},i,n){if(Qr.ce||Qr.parent&&Vg(Qr.parent)&&Qr.parent.ce)return e!=="default"&&(t.name=e),U(),Gt(Ot,null,[lt("slot",t,i&&i())],64);let s=a[e];s&&s._c&&(s._d=!1),U();const r=s&&R6(s(t)),l=t.key||r&&r.key,u=Gt(Ot,{key:(l&&!xu(l)?l:`_${e}`)+(!r&&i?"_fb":"")},r||(i?i():[]),r&&a._===1?64:-2);return!n&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),s&&s._c&&(s._d=!0),u}function R6(a){return a.some(e=>s1(e)?!(e.type===fo||e.type===Ot&&!R6(e.children)):!0)?a:null}const ZA=a=>a?j6(a)?tI(a):ZA(a.parent):null,L0=Ur(Object.create(null),{$:a=>a,$el:a=>a.vnode.el,$data:a=>a.data,$props:a=>a.props,$attrs:a=>a.attrs,$slots:a=>a.slots,$refs:a=>a.refs,$parent:a=>ZA(a.parent),$root:a=>ZA(a.root),$host:a=>a.ce,$emit:a=>a.emit,$options:a=>U4(a),$forceUpdate:a=>a.f||(a.f=()=>{V4(a.update)}),$nextTick:a=>a.n||(a.n=Iu.bind(a.proxy)),$watch:a=>OZ.bind(a)}),XC=(a,e)=>a!==Rn&&!a.__isScriptSetup&&un(a,e),mZ={get({_:a},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:n,props:s,accessCache:r,type:l,appContext:u}=a;let d;if(e[0]!=="$"){const w=r[e];if(w!==void 0)switch(w){case 1:return i[e];case 2:return n[e];case 4:return t[e];case 3:return s[e]}else{if(XC(i,e))return r[e]=1,i[e];if(n!==Rn&&un(n,e))return r[e]=2,n[e];if((d=a.propsOptions[0])&&un(d,e))return r[e]=3,s[e];if(t!==Rn&&un(t,e))return r[e]=4,t[e];zA&&(r[e]=0)}}const m=L0[e];let f,v;if(m)return e==="$attrs"&&Us(a.attrs,"get",""),m(a);if((f=l.__cssModules)&&(f=f[e]))return f;if(t!==Rn&&un(t,e))return r[e]=4,t[e];if(v=u.config.globalProperties,un(v,e))return v[e]},set({_:a},e,t){const{data:i,setupState:n,ctx:s}=a;return XC(n,e)?(n[e]=t,!0):i!==Rn&&un(i,e)?(i[e]=t,!0):un(a.props,e)||e[0]==="$"&&e.slice(1)in a?!1:(s[e]=t,!0)},has({_:{data:a,setupState:e,accessCache:t,ctx:i,appContext:n,propsOptions:s}},r){let l;return!!t[r]||a!==Rn&&un(a,r)||XC(e,r)||(l=s[0])&&un(l,r)||un(i,r)||un(L0,r)||un(n.config.globalProperties,r)},defineProperty(a,e,t){return t.get!=null?a._.accessCache[e]=0:un(t,"value")&&this.set(a,e,t.value,null),Reflect.defineProperty(a,e,t)}};function cL(a){return Ba(a)?a.reduce((e,t)=>(e[t]=null,e),{}):a}let zA=!0;function pZ(a){const e=U4(a),t=a.proxy,i=a.ctx;zA=!1,e.beforeCreate&&dL(e.beforeCreate,a,"bc");const{data:n,computed:s,methods:r,watch:l,provide:u,inject:d,created:m,beforeMount:f,mounted:v,beforeUpdate:w,updated:S,activated:T,deactivated:M,beforeDestroy:G,beforeUnmount:P,destroyed:F,unmounted:N,render:V,renderTracked:K,renderTriggered:te,errorCaptured:J,serverPrefetch:ne,expose:se,inheritAttrs:de,components:_e,directives:Se,filters:ce}=e;if(d&&gZ(d,i,null),r)for(const we in r){const Oe=r[we];ai(Oe)&&(i[we]=Oe.bind(t))}if(n){const we=n.call(t,t);Sn(we)&&(a.data=qw(we))}if(zA=!0,s)for(const we in s){const Oe=s[we],Ye=ai(Oe)?Oe.bind(t,t):ai(Oe.get)?Oe.get.bind(t,t):fu,at=!ai(Oe)&&ai(Oe.set)?Oe.set.bind(t):fu,yt=St({get:Ye,set:at});Object.defineProperty(i,we,{enumerable:!0,configurable:!0,get:()=>yt.value,set:De=>yt.value=De})}if(l)for(const we in l)k6(l[we],i,t,we);if(u){const we=ai(u)?u.call(t):u;Reflect.ownKeys(we).forEach(Oe=>{Jw(Oe,we[Oe])})}m&&dL(m,a,"c");function he(we,Oe){Ba(Oe)?Oe.forEach(Ye=>we(Ye.bind(t))):Oe&&we(Oe.bind(t))}if(he(rZ,f),he(In,v),he(sZ,w),he(oZ,S),he(E6,T),he(iZ,M),he(dZ,J),he(cZ,K),he(uZ,te),he(qm,P),he(es,N),he(lZ,ne),Ba(se))if(se.length){const we=a.exposed||(a.exposed={});se.forEach(Oe=>{Object.defineProperty(we,Oe,{get:()=>t[Oe],set:Ye=>t[Oe]=Ye})})}else a.exposed||(a.exposed={});V&&a.render===fu&&(a.render=V),de!=null&&(a.inheritAttrs=de),_e&&(a.components=_e),Se&&(a.directives=Se),ne&&T6(a)}function gZ(a,e,t=fu){Ba(a)&&(a=UA(a));for(const i in a){const n=a[i];let s;Sn(n)?"default"in n?s=$s(n.from||i,n.default,!0):s=$s(n.from||i):s=$s(n),Xn(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:r=>s.value=r}):e[i]=s}}function dL(a,e,t){wu(Ba(a)?a.map(i=>i.bind(e.proxy)):a.bind(e.proxy),e,t)}function k6(a,e,t,i){let n=i.includes(".")?U6(t,i):()=>t[i];if(cr(a)){const s=e[a];ai(s)&&Ut(n,s)}else if(ai(a))Ut(n,a.bind(t));else if(Sn(a))if(Ba(a))a.forEach(s=>k6(s,e,t,i));else{const s=ai(a.handler)?a.handler.bind(t):e[a.handler];ai(s)&&Ut(n,s,a)}}function U4(a){const e=a.type,{mixins:t,extends:i}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:r}}=a.appContext,l=s.get(e);let u;return l?u=l:!n.length&&!t&&!i?u=e:(u={},n.length&&n.forEach(d=>vx(u,d,r,!0)),vx(u,e,r)),Sn(e)&&s.set(e,u),u}function vx(a,e,t,i=!1){const{mixins:n,extends:s}=e;s&&vx(a,s,t,!0),n&&n.forEach(r=>vx(a,r,t,!0));for(const r in e)if(!(i&&r==="expose")){const l=fZ[r]||t&&t[r];a[r]=l?l(a[r],e[r]):e[r]}return a}const fZ={data:hL,props:_L,emits:_L,methods:r0,computed:r0,beforeCreate:lo,created:lo,beforeMount:lo,mounted:lo,beforeUpdate:lo,updated:lo,beforeDestroy:lo,beforeUnmount:lo,destroyed:lo,unmounted:lo,activated:lo,deactivated:lo,errorCaptured:lo,serverPrefetch:lo,components:r0,directives:r0,watch:bZ,provide:hL,inject:yZ};function hL(a,e){return e?a?function(){return Ur(ai(a)?a.call(this,this):a,ai(e)?e.call(this,this):e)}:e:a}function yZ(a,e){return r0(UA(a),UA(e))}function UA(a){if(Ba(a)){const e={};for(let t=0;t<a.length;t++)e[a[t]]=a[t];return e}return a}function lo(a,e){return a?[...new Set([].concat(a,e))]:e}function r0(a,e){return a?Ur(Object.create(null),a,e):e}function _L(a,e){return a?Ba(a)&&Ba(e)?[...new Set([...a,...e])]:Ur(Object.create(null),cL(a),cL(e??{})):e}function bZ(a,e){if(!a)return e;if(!e)return a;const t=Ur(Object.create(null),a);for(const i in e)t[i]=lo(a[i],e[i]);return t}function W6(){return{app:null,config:{isNativeTag:sV,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vZ=0;function xZ(a,e){return function(i,n=null){ai(i)||(i=Ur({},i)),n!=null&&!Sn(n)&&(n=null);const s=W6(),r=new WeakSet,l=[];let u=!1;const d=s.app={_uid:vZ++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:az,get config(){return s.config},set config(m){},use(m,...f){return r.has(m)||(m&&ai(m.install)?(r.add(m),m.install(d,...f)):ai(m)&&(r.add(m),m(d,...f))),d},mixin(m){return s.mixins.includes(m)||s.mixins.push(m),d},component(m,f){return f?(s.components[m]=f,d):s.components[m]},directive(m,f){return f?(s.directives[m]=f,d):s.directives[m]},mount(m,f,v){if(!u){const w=d._ceVNode||lt(i,n);return w.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),f&&e?e(w,m):a(w,m,v),u=!0,d._container=m,m.__vue_app__=d,tI(w.component)}},onUnmount(m){l.push(m)},unmount(){u&&(wu(l,d._instance,16),a(null,d._container),delete d._container.__vue_app__)},provide(m,f){return s.provides[m]=f,d},runWithContext(m){const f=xm;xm=d;try{return m()}finally{xm=f}}};return d}}let xm=null;function Jw(a,e){if(ps){let t=ps.provides;const i=ps.parent&&ps.parent.provides;i===t&&(t=ps.provides=Object.create(i)),t[a]=e}}function $s(a,e,t=!1){const i=ps||Qr;if(i||xm){const n=xm?xm._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&a in n)return n[a];if(arguments.length>1)return t&&ai(e)?e.call(i&&i.proxy):e}}function wZ(){return!!(ps||Qr||xm)}const G6={},O6=()=>Object.create(G6),P6=a=>Object.getPrototypeOf(a)===G6;function IZ(a,e,t,i=!1){const n={},s=O6();a.propsDefaults=Object.create(null),B6(a,e,n,s);for(const r in a.propsOptions[0])r in n||(n[r]=void 0);t?a.props=i?n:FV(n):a.type.props?a.props=n:a.props=s,a.attrs=s}function CZ(a,e,t,i){const{props:n,attrs:s,vnode:{patchFlag:r}}=a,l=Fi(n),[u]=a.propsOptions;let d=!1;if((i||r>0)&&!(r&16)){if(r&8){const m=a.vnode.dynamicProps;for(let f=0;f<m.length;f++){let v=m[f];if(Qw(a.emitsOptions,v))continue;const w=e[v];if(u)if(un(s,v))w!==s[v]&&(s[v]=w,d=!0);else{const S=Hl(v);n[S]=HA(u,l,S,w,a,!1)}else w!==s[v]&&(s[v]=w,d=!0)}}}else{B6(a,e,n,s)&&(d=!0);let m;for(const f in l)(!e||!un(e,f)&&((m=a_(f))===f||!un(e,m)))&&(u?t&&(t[f]!==void 0||t[m]!==void 0)&&(n[f]=HA(u,l,f,void 0,a,!0)):delete n[f]);if(s!==l)for(const f in s)(!e||!un(e,f))&&(delete s[f],d=!0)}d&&yd(a.attrs,"set","")}function B6(a,e,t,i){const[n,s]=a.propsOptions;let r=!1,l;if(e)for(let u in e){if(A0(u))continue;const d=e[u];let m;n&&un(n,m=Hl(u))?!s||!s.includes(m)?t[m]=d:(l||(l={}))[m]=d:Qw(a.emitsOptions,u)||(!(u in i)||d!==i[u])&&(i[u]=d,r=!0)}if(s){const u=Fi(t),d=l||Rn;for(let m=0;m<s.length;m++){const f=s[m];t[f]=HA(n,u,f,d[f],a,!un(d,f))}}return r}function HA(a,e,t,i,n,s){const r=a[t];if(r!=null){const l=un(r,"default");if(l&&i===void 0){const u=r.default;if(r.type!==Function&&!r.skipFactory&&ai(u)){const{propsDefaults:d}=n;if(t in d)i=d[t];else{const m=U1(n);i=d[t]=u.call(null,e),m()}}else i=u;n.ce&&n.ce._setProp(t,i)}r[0]&&(s&&!l?i=!1:r[1]&&(i===""||i===a_(t))&&(i=!0))}return i}const SZ=new WeakMap;function N6(a,e,t=!1){const i=t?SZ:e.propsCache,n=i.get(a);if(n)return n;const s=a.props,r={},l=[];let u=!1;if(!ai(a)){const m=f=>{u=!0;const[v,w]=N6(f,e,!0);Ur(r,v),w&&l.push(...w)};!t&&e.mixins.length&&e.mixins.forEach(m),a.extends&&m(a.extends),a.mixins&&a.mixins.forEach(m)}if(!s&&!u)return Sn(a)&&i.set(a,Ng),Ng;if(Ba(s))for(let m=0;m<s.length;m++){const f=Hl(s[m]);mL(f)&&(r[f]=Rn)}else if(s)for(const m in s){const f=Hl(m);if(mL(f)){const v=s[m],w=r[f]=Ba(v)||ai(v)?{type:v}:Ur({},v),S=w.type;let T=!1,M=!0;if(Ba(S))for(let G=0;G<S.length;++G){const P=S[G],F=ai(P)&&P.name;if(F==="Boolean"){T=!0;break}else F==="String"&&(M=!1)}else T=ai(S)&&S.name==="Boolean";w[0]=T,w[1]=M,(T||un(w,"default"))&&l.push(f)}}const d=[r,l];return Sn(a)&&i.set(a,d),d}function mL(a){return a[0]!=="$"&&!A0(a)}const F6=a=>a[0]==="_"||a==="$stable",H4=a=>Ba(a)?a.map(nc):[nc(a)],AZ=(a,e,t)=>{if(e._n)return e;const i=Ht((...n)=>H4(e(...n)),t);return i._c=!1,i},D6=(a,e,t)=>{const i=a._ctx;for(const n in a){if(F6(n))continue;const s=a[n];if(ai(s))e[n]=AZ(n,s,i);else if(s!=null){const r=H4(s);e[n]=()=>r}}},V6=(a,e)=>{const t=H4(e);a.slots.default=()=>t},Z6=(a,e,t)=>{for(const i in e)(t||i!=="_")&&(a[i]=e[i])},TZ=(a,e,t)=>{const i=a.slots=O6();if(a.vnode.shapeFlag&32){const n=e._;n?(Z6(i,e,t),t&&Vk(i,"_",n,!0)):D6(e,i)}else e&&V6(a,e)},EZ=(a,e,t)=>{const{vnode:i,slots:n}=a;let s=!0,r=Rn;if(i.shapeFlag&32){const l=e._;l?t&&l===1?s=!1:Z6(n,e,t):(s=!e.$stable,D6(e,n)),r=e}else e&&(V6(a,e),r={default:1});if(s)for(const l in n)!F6(l)&&r[l]==null&&delete n[l]},co=ZZ;function MZ(a){return LZ(a)}function LZ(a,e){const t=Hw();t.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:r,createText:l,createComment:u,setText:d,setElementText:m,parentNode:f,nextSibling:v,setScopeId:w=fu,insertStaticContent:S}=a,T=(xe,Ge,qe,ut=null,gt=null,Pe=null,Qe=void 0,ze=null,st=!!Ge.dynamicChildren)=>{if(xe===Ge)return;xe&&!um(xe,Ge)&&(ut=bt(xe),De(xe,gt,Pe,!0),xe=null),Ge.patchFlag===-2&&(st=!1,Ge.dynamicChildren=null);const{type:nt,ref:xt,shapeFlag:Et}=Ge;switch(nt){case eI:M(xe,Ge,qe,ut);break;case fo:G(xe,Ge,qe,ut);break;case KC:xe==null&&P(Ge,qe,ut,Qe);break;case Ot:_e(xe,Ge,qe,ut,gt,Pe,Qe,ze,st);break;default:Et&1?V(xe,Ge,qe,ut,gt,Pe,Qe,ze,st):Et&6?Se(xe,Ge,qe,ut,gt,Pe,Qe,ze,st):(Et&64||Et&128)&&nt.process(xe,Ge,qe,ut,gt,Pe,Qe,ze,st,ii)}xt!=null&&gt&&bx(xt,xe&&xe.ref,Pe,Ge||xe,!Ge)},M=(xe,Ge,qe,ut)=>{if(xe==null)i(Ge.el=l(Ge.children),qe,ut);else{const gt=Ge.el=xe.el;Ge.children!==xe.children&&d(gt,Ge.children)}},G=(xe,Ge,qe,ut)=>{xe==null?i(Ge.el=u(Ge.children||""),qe,ut):Ge.el=xe.el},P=(xe,Ge,qe,ut)=>{[xe.el,xe.anchor]=S(xe.children,Ge,qe,ut,xe.el,xe.anchor)},F=({el:xe,anchor:Ge},qe,ut)=>{let gt;for(;xe&&xe!==Ge;)gt=v(xe),i(xe,qe,ut),xe=gt;i(Ge,qe,ut)},N=({el:xe,anchor:Ge})=>{let qe;for(;xe&&xe!==Ge;)qe=v(xe),n(xe),xe=qe;n(Ge)},V=(xe,Ge,qe,ut,gt,Pe,Qe,ze,st)=>{Ge.type==="svg"?Qe="svg":Ge.type==="math"&&(Qe="mathml"),xe==null?K(Ge,qe,ut,gt,Pe,Qe,ze,st):ne(xe,Ge,gt,Pe,Qe,ze,st)},K=(xe,Ge,qe,ut,gt,Pe,Qe,ze)=>{let st,nt;const{props:xt,shapeFlag:Et,transition:ta,dirs:oa}=xe;if(st=xe.el=r(xe.type,Pe,xt&&xt.is,xt),Et&8?m(st,xe.children):Et&16&&J(xe.children,st,null,ut,gt,qC(xe,Pe),Qe,ze),oa&&z_(xe,null,ut,"created"),te(st,xe,xe.scopeId,Qe,ut),xt){for(const mi in xt)mi!=="value"&&!A0(mi)&&s(st,mi,null,xt[mi],Pe,ut);"value"in xt&&s(st,"value",null,xt.value,Pe),(nt=xt.onVnodeBeforeMount)&&tc(nt,ut,xe)}oa&&z_(xe,null,ut,"beforeMount");const Na=RZ(gt,ta);Na&&ta.beforeEnter(st),i(st,Ge,qe),((nt=xt&&xt.onVnodeMounted)||Na||oa)&&co(()=>{nt&&tc(nt,ut,xe),Na&&ta.enter(st),oa&&z_(xe,null,ut,"mounted")},gt)},te=(xe,Ge,qe,ut,gt)=>{if(qe&&w(xe,qe),ut)for(let Pe=0;Pe<ut.length;Pe++)w(xe,ut[Pe]);if(gt){let Pe=gt.subTree;if(Ge===Pe||X6(Pe.type)&&(Pe.ssContent===Ge||Pe.ssFallback===Ge)){const Qe=gt.vnode;te(xe,Qe,Qe.scopeId,Qe.slotScopeIds,gt.parent)}}},J=(xe,Ge,qe,ut,gt,Pe,Qe,ze,st=0)=>{for(let nt=st;nt<xe.length;nt++){const xt=xe[nt]=ze?Sh(xe[nt]):nc(xe[nt]);T(null,xt,Ge,qe,ut,gt,Pe,Qe,ze)}},ne=(xe,Ge,qe,ut,gt,Pe,Qe)=>{const ze=Ge.el=xe.el;let{patchFlag:st,dynamicChildren:nt,dirs:xt}=Ge;st|=xe.patchFlag&16;const Et=xe.props||Rn,ta=Ge.props||Rn;let oa;if(qe&&U_(qe,!1),(oa=ta.onVnodeBeforeUpdate)&&tc(oa,qe,Ge,xe),xt&&z_(Ge,xe,qe,"beforeUpdate"),qe&&U_(qe,!0),(Et.innerHTML&&ta.innerHTML==null||Et.textContent&&ta.textContent==null)&&m(ze,""),nt?se(xe.dynamicChildren,nt,ze,qe,ut,qC(Ge,gt),Pe):Qe||Oe(xe,Ge,ze,null,qe,ut,qC(Ge,gt),Pe,!1),st>0){if(st&16)de(ze,Et,ta,qe,gt);else if(st&2&&Et.class!==ta.class&&s(ze,"class",null,ta.class,gt),st&4&&s(ze,"style",Et.style,ta.style,gt),st&8){const Na=Ge.dynamicProps;for(let mi=0;mi<Na.length;mi++){const di=Na[mi],Tn=Et[di],Ki=ta[di];(Ki!==Tn||di==="value")&&s(ze,di,Tn,Ki,gt,qe)}}st&1&&xe.children!==Ge.children&&m(ze,Ge.children)}else!Qe&&nt==null&&de(ze,Et,ta,qe,gt);((oa=ta.onVnodeUpdated)||xt)&&co(()=>{oa&&tc(oa,qe,Ge,xe),xt&&z_(Ge,xe,qe,"updated")},ut)},se=(xe,Ge,qe,ut,gt,Pe,Qe)=>{for(let ze=0;ze<Ge.length;ze++){const st=xe[ze],nt=Ge[ze],xt=st.el&&(st.type===Ot||!um(st,nt)||st.shapeFlag&70)?f(st.el):qe;T(st,nt,xt,null,ut,gt,Pe,Qe,!0)}},de=(xe,Ge,qe,ut,gt)=>{if(Ge!==qe){if(Ge!==Rn)for(const Pe in Ge)!A0(Pe)&&!(Pe in qe)&&s(xe,Pe,Ge[Pe],null,gt,ut);for(const Pe in qe){if(A0(Pe))continue;const Qe=qe[Pe],ze=Ge[Pe];Qe!==ze&&Pe!=="value"&&s(xe,Pe,ze,Qe,gt,ut)}"value"in qe&&s(xe,"value",Ge.value,qe.value,gt)}},_e=(xe,Ge,qe,ut,gt,Pe,Qe,ze,st)=>{const nt=Ge.el=xe?xe.el:l(""),xt=Ge.anchor=xe?xe.anchor:l("");let{patchFlag:Et,dynamicChildren:ta,slotScopeIds:oa}=Ge;oa&&(ze=ze?ze.concat(oa):oa),xe==null?(i(nt,qe,ut),i(xt,qe,ut),J(Ge.children||[],qe,xt,gt,Pe,Qe,ze,st)):Et>0&&Et&64&&ta&&xe.dynamicChildren?(se(xe.dynamicChildren,ta,qe,gt,Pe,Qe,ze),(Ge.key!=null||gt&&Ge===gt.subTree)&&X4(xe,Ge,!0)):Oe(xe,Ge,qe,xt,gt,Pe,Qe,ze,st)},Se=(xe,Ge,qe,ut,gt,Pe,Qe,ze,st)=>{Ge.slotScopeIds=ze,xe==null?Ge.shapeFlag&512?gt.ctx.activate(Ge,qe,ut,Qe,st):ce(Ge,qe,ut,gt,Pe,Qe,st):Ie(xe,Ge,st)},ce=(xe,Ge,qe,ut,gt,Pe,Qe)=>{const ze=xe.component=YZ(xe,ut,gt);if(jw(xe)&&(ze.ctx.renderer=ii),KZ(ze,!1,Qe),ze.asyncDep){if(gt&&gt.registerDep(ze,he,Qe),!xe.el){const st=ze.subTree=lt(fo);G(null,st,Ge,qe)}}else he(ze,xe,Ge,qe,gt,Pe,Qe)},Ie=(xe,Ge,qe)=>{const ut=Ge.component=xe.component;if(DZ(xe,Ge,qe))if(ut.asyncDep&&!ut.asyncResolved){we(ut,Ge,qe);return}else ut.next=Ge,ut.update();else Ge.el=xe.el,ut.vnode=Ge},he=(xe,Ge,qe,ut,gt,Pe,Qe)=>{const ze=()=>{if(xe.isMounted){let{next:Et,bu:ta,u:oa,parent:Na,vnode:mi}=xe;{const En=z6(xe);if(En){Et&&(Et.el=mi.el,we(xe,Et,Qe)),En.asyncDep.then(()=>{xe.isUnmounted||ze()});return}}let di=Et,Tn;U_(xe,!1),Et?(Et.el=mi.el,we(xe,Et,Qe)):Et=mi,ta&&R2(ta),(Tn=Et.props&&Et.props.onVnodeBeforeUpdate)&&tc(Tn,Na,Et,mi),U_(xe,!0);const Ki=YC(xe),qn=xe.subTree;xe.subTree=Ki,T(qn,Ki,f(qn.el),bt(qn),xe,gt,Pe),Et.el=Ki.el,di===null&&VZ(xe,Ki.el),oa&&co(oa,gt),(Tn=Et.props&&Et.props.onVnodeUpdated)&&co(()=>tc(Tn,Na,Et,mi),gt)}else{let Et;const{el:ta,props:oa}=Ge,{bm:Na,m:mi,parent:di,root:Tn,type:Ki}=xe,qn=Vg(Ge);if(U_(xe,!1),Na&&R2(Na),!qn&&(Et=oa&&oa.onVnodeBeforeMount)&&tc(Et,di,Ge),U_(xe,!0),ta&&An){const En=()=>{xe.subTree=YC(xe),An(ta,xe.subTree,xe,gt,null)};qn&&Ki.__asyncHydrate?Ki.__asyncHydrate(ta,xe,En):En()}else{Tn.ce&&Tn.ce._injectChildStyle(Ki);const En=xe.subTree=YC(xe);T(null,En,qe,ut,xe,gt,Pe),Ge.el=En.el}if(mi&&co(mi,gt),!qn&&(Et=oa&&oa.onVnodeMounted)){const En=Ge;co(()=>tc(Et,di,En),gt)}(Ge.shapeFlag&256||di&&Vg(di.vnode)&&di.vnode.shapeFlag&256)&&xe.a&&co(xe.a,gt),xe.isMounted=!0,Ge=qe=ut=null}};xe.scope.on();const st=xe.effect=new Yk(ze);xe.scope.off();const nt=xe.update=st.run.bind(st),xt=xe.job=st.runIfDirty.bind(st);xt.i=xe,xt.id=xe.uid,st.scheduler=()=>V4(xt),U_(xe,!0),nt()},we=(xe,Ge,qe)=>{Ge.component=xe;const ut=xe.vnode.props;xe.vnode=Ge,xe.next=null,CZ(xe,Ge.props,ut,qe),EZ(xe,Ge.children,qe),i_(),nL(xe),n_()},Oe=(xe,Ge,qe,ut,gt,Pe,Qe,ze,st=!1)=>{const nt=xe&&xe.children,xt=xe?xe.shapeFlag:0,Et=Ge.children,{patchFlag:ta,shapeFlag:oa}=Ge;if(ta>0){if(ta&128){at(nt,Et,qe,ut,gt,Pe,Qe,ze,st);return}else if(ta&256){Ye(nt,Et,qe,ut,gt,Pe,Qe,ze,st);return}}oa&8?(xt&16&&Ua(nt,gt,Pe),Et!==nt&&m(qe,Et)):xt&16?oa&16?at(nt,Et,qe,ut,gt,Pe,Qe,ze,st):Ua(nt,gt,Pe,!0):(xt&8&&m(qe,""),oa&16&&J(Et,qe,ut,gt,Pe,Qe,ze,st))},Ye=(xe,Ge,qe,ut,gt,Pe,Qe,ze,st)=>{xe=xe||Ng,Ge=Ge||Ng;const nt=xe.length,xt=Ge.length,Et=Math.min(nt,xt);let ta;for(ta=0;ta<Et;ta++){const oa=Ge[ta]=st?Sh(Ge[ta]):nc(Ge[ta]);T(xe[ta],oa,qe,null,gt,Pe,Qe,ze,st)}nt>xt?Ua(xe,gt,Pe,!0,!1,Et):J(Ge,qe,ut,gt,Pe,Qe,ze,st,Et)},at=(xe,Ge,qe,ut,gt,Pe,Qe,ze,st)=>{let nt=0;const xt=Ge.length;let Et=xe.length-1,ta=xt-1;for(;nt<=Et&&nt<=ta;){const oa=xe[nt],Na=Ge[nt]=st?Sh(Ge[nt]):nc(Ge[nt]);if(um(oa,Na))T(oa,Na,qe,null,gt,Pe,Qe,ze,st);else break;nt++}for(;nt<=Et&&nt<=ta;){const oa=xe[Et],Na=Ge[ta]=st?Sh(Ge[ta]):nc(Ge[ta]);if(um(oa,Na))T(oa,Na,qe,null,gt,Pe,Qe,ze,st);else break;Et--,ta--}if(nt>Et){if(nt<=ta){const oa=ta+1,Na=oa<xt?Ge[oa].el:ut;for(;nt<=ta;)T(null,Ge[nt]=st?Sh(Ge[nt]):nc(Ge[nt]),qe,Na,gt,Pe,Qe,ze,st),nt++}}else if(nt>ta)for(;nt<=Et;)De(xe[nt],gt,Pe,!0),nt++;else{const oa=nt,Na=nt,mi=new Map;for(nt=Na;nt<=ta;nt++){const Ri=Ge[nt]=st?Sh(Ge[nt]):nc(Ge[nt]);Ri.key!=null&&mi.set(Ri.key,nt)}let di,Tn=0;const Ki=ta-Na+1;let qn=!1,En=0;const xr=new Array(Ki);for(nt=0;nt<Ki;nt++)xr[nt]=0;for(nt=oa;nt<=Et;nt++){const Ri=xe[nt];if(Tn>=Ki){De(Ri,gt,Pe,!0);continue}let Cn;if(Ri.key!=null)Cn=mi.get(Ri.key);else for(di=Na;di<=ta;di++)if(xr[di-Na]===0&&um(Ri,Ge[di])){Cn=di;break}Cn===void 0?De(Ri,gt,Pe,!0):(xr[Cn-Na]=nt+1,Cn>=En?En=Cn:qn=!0,T(Ri,Ge[Cn],qe,null,gt,Pe,Qe,ze,st),Tn++)}const Wr=qn?kZ(xr):Ng;for(di=Wr.length-1,nt=Ki-1;nt>=0;nt--){const Ri=Na+nt,Cn=Ge[Ri],ao=Ri+1<xt?Ge[Ri+1].el:ut;xr[nt]===0?T(null,Cn,qe,ao,gt,Pe,Qe,ze,st):qn&&(di<0||nt!==Wr[di]?yt(Cn,qe,ao,2):di--)}}},yt=(xe,Ge,qe,ut,gt=null)=>{const{el:Pe,type:Qe,transition:ze,children:st,shapeFlag:nt}=xe;if(nt&6){yt(xe.component.subTree,Ge,qe,ut);return}if(nt&128){xe.suspense.move(Ge,qe,ut);return}if(nt&64){Qe.move(xe,Ge,qe,ii);return}if(Qe===Ot){i(Pe,Ge,qe);for(let Et=0;Et<st.length;Et++)yt(st[Et],Ge,qe,ut);i(xe.anchor,Ge,qe);return}if(Qe===KC){F(xe,Ge,qe);return}if(ut!==2&&nt&1&&ze)if(ut===0)ze.beforeEnter(Pe),i(Pe,Ge,qe),co(()=>ze.enter(Pe),gt);else{const{leave:Et,delayLeave:ta,afterLeave:oa}=ze,Na=()=>i(Pe,Ge,qe),mi=()=>{Et(Pe,()=>{Na(),oa&&oa()})};ta?ta(Pe,Na,mi):mi()}else i(Pe,Ge,qe)},De=(xe,Ge,qe,ut=!1,gt=!1)=>{const{type:Pe,props:Qe,ref:ze,children:st,dynamicChildren:nt,shapeFlag:xt,patchFlag:Et,dirs:ta,cacheIndex:oa}=xe;if(Et===-2&&(gt=!1),ze!=null&&bx(ze,null,qe,xe,!0),oa!=null&&(Ge.renderCache[oa]=void 0),xt&256){Ge.ctx.deactivate(xe);return}const Na=xt&1&&ta,mi=!Vg(xe);let di;if(mi&&(di=Qe&&Qe.onVnodeBeforeUnmount)&&tc(di,Ge,xe),xt&6)$t(xe.component,qe,ut);else{if(xt&128){xe.suspense.unmount(qe,ut);return}Na&&z_(xe,null,Ge,"beforeUnmount"),xt&64?xe.type.remove(xe,Ge,qe,ii,ut):nt&&!nt.hasOnce&&(Pe!==Ot||Et>0&&Et&64)?Ua(nt,Ge,qe,!1,!0):(Pe===Ot&&Et&384||!gt&&xt&16)&&Ua(st,Ge,qe),ut&&jt(xe)}(mi&&(di=Qe&&Qe.onVnodeUnmounted)||Na)&&co(()=>{di&&tc(di,Ge,xe),Na&&z_(xe,null,Ge,"unmounted")},qe)},jt=xe=>{const{type:Ge,el:qe,anchor:ut,transition:gt}=xe;if(Ge===Ot){pa(qe,ut);return}if(Ge===KC){N(xe);return}const Pe=()=>{n(qe),gt&&!gt.persisted&&gt.afterLeave&&gt.afterLeave()};if(xe.shapeFlag&1&&gt&&!gt.persisted){const{leave:Qe,delayLeave:ze}=gt,st=()=>Qe(qe,Pe);ze?ze(xe.el,Pe,st):st()}else Pe()},pa=(xe,Ge)=>{let qe;for(;xe!==Ge;)qe=v(xe),n(xe),xe=qe;n(Ge)},$t=(xe,Ge,qe)=>{const{bum:ut,scope:gt,job:Pe,subTree:Qe,um:ze,m:st,a:nt}=xe;pL(st),pL(nt),ut&&R2(ut),gt.stop(),Pe&&(Pe.flags|=8,De(Qe,xe,Ge,qe)),ze&&co(ze,Ge),co(()=>{xe.isUnmounted=!0},Ge),Ge&&Ge.pendingBranch&&!Ge.isUnmounted&&xe.asyncDep&&!xe.asyncResolved&&xe.suspenseId===Ge.pendingId&&(Ge.deps--,Ge.deps===0&&Ge.resolve())},Ua=(xe,Ge,qe,ut=!1,gt=!1,Pe=0)=>{for(let Qe=Pe;Qe<xe.length;Qe++)De(xe[Qe],Ge,qe,ut,gt)},bt=xe=>{if(xe.shapeFlag&6)return bt(xe.component.subTree);if(xe.shapeFlag&128)return xe.suspense.next();const Ge=v(xe.anchor||xe.el),qe=Ge&&Ge[y6];return qe?v(qe):Ge};let ui=!1;const Ca=(xe,Ge,qe)=>{xe==null?Ge._vnode&&De(Ge._vnode,null,null,!0):T(Ge._vnode||null,xe,Ge,null,null,null,qe),Ge._vnode=xe,ui||(ui=!0,nL(),p6(),ui=!1)},ii={p:T,um:De,m:yt,r:jt,mt:ce,mc:J,pc:Oe,pbc:se,n:bt,o:a};let zi,An;return e&&([zi,An]=e(ii)),{render:Ca,hydrate:zi,createApp:xZ(Ca,zi)}}function qC({type:a,props:e},t){return t==="svg"&&a==="foreignObject"||t==="mathml"&&a==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function U_({effect:a,job:e},t){t?(a.flags|=32,e.flags|=4):(a.flags&=-33,e.flags&=-5)}function RZ(a,e){return(!a||a&&!a.pendingBranch)&&e&&!e.persisted}function X4(a,e,t=!1){const i=a.children,n=e.children;if(Ba(i)&&Ba(n))for(let s=0;s<i.length;s++){const r=i[s];let l=n[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[s]=Sh(n[s]),l.el=r.el),!t&&l.patchFlag!==-2&&X4(r,l)),l.type===eI&&(l.el=r.el)}}function kZ(a){const e=a.slice(),t=[0];let i,n,s,r,l;const u=a.length;for(i=0;i<u;i++){const d=a[i];if(d!==0){if(n=t[t.length-1],a[n]<d){e[i]=n,t.push(i);continue}for(s=0,r=t.length-1;s<r;)l=s+r>>1,a[t[l]]<d?s=l+1:r=l;d<a[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,r=t[s-1];s-- >0;)t[s]=r,r=e[r];return t}function z6(a){const e=a.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:z6(e)}function pL(a){if(a)for(let e=0;e<a.length;e++)a[e].flags|=8}const WZ=Symbol.for("v-scx"),GZ=()=>$s(WZ);function dr(a,e){return q4(a,null,e)}function Ut(a,e,t){return q4(a,e,t)}function q4(a,e,t=Rn){const{immediate:i,deep:n,flush:s,once:r}=t,l=Ur({},t),u=e&&i||!e&&s!=="post";let d;if(o1){if(s==="sync"){const w=GZ();d=w.__watcherHandles||(w.__watcherHandles=[])}else if(!u){const w=()=>{};return w.stop=fu,w.resume=fu,w.pause=fu,w}}const m=ps;l.call=(w,S,T)=>wu(w,m,S,T);let f=!1;s==="post"?l.scheduler=w=>{co(w,m&&m.suspense)}:s!=="sync"&&(f=!0,l.scheduler=(w,S)=>{S?w():V4(w)}),l.augmentJob=w=>{e&&(w.flags|=4),f&&(w.flags|=2,m&&(w.id=m.uid,w.i=m))};const v=KV(a,e,l);return o1&&(d?d.push(v):u&&v()),v}function OZ(a,e,t){const i=this.proxy,n=cr(a)?a.includes(".")?U6(i,a):()=>i[a]:a.bind(i,i);let s;ai(e)?s=e:(s=e.handler,t=e);const r=U1(this),l=q4(n,s.bind(i),t);return r(),l}function U6(a,e){const t=e.split(".");return()=>{let i=a;for(let n=0;n<t.length&&i;n++)i=i[t[n]];return i}}const PZ=(a,e)=>e==="modelValue"||e==="model-value"?a.modelModifiers:a[`${e}Modifiers`]||a[`${Hl(e)}Modifiers`]||a[`${a_(e)}Modifiers`];function BZ(a,e,...t){if(a.isUnmounted)return;const i=a.vnode.props||Rn;let n=t;const s=e.startsWith("update:"),r=s&&PZ(i,e.slice(7));r&&(r.trim&&(n=t.map(m=>cr(m)?m.trim():m)),r.number&&(n=t.map(mx)));let l,u=i[l=DC(e)]||i[l=DC(Hl(e))];!u&&s&&(u=i[l=DC(a_(e))]),u&&wu(u,a,6,n);const d=i[l+"Once"];if(d){if(!a.emitted)a.emitted={};else if(a.emitted[l])return;a.emitted[l]=!0,wu(d,a,6,n)}}function H6(a,e,t=!1){const i=e.emitsCache,n=i.get(a);if(n!==void 0)return n;const s=a.emits;let r={},l=!1;if(!ai(a)){const u=d=>{const m=H6(d,e,!0);m&&(l=!0,Ur(r,m))};!t&&e.mixins.length&&e.mixins.forEach(u),a.extends&&u(a.extends),a.mixins&&a.mixins.forEach(u)}return!s&&!l?(Sn(a)&&i.set(a,null),null):(Ba(s)?s.forEach(u=>r[u]=null):Ur(r,s),Sn(a)&&i.set(a,r),r)}function Qw(a,e){return!a||!Zw(e)?!1:(e=e.slice(2).replace(/Once$/,""),un(a,e[0].toLowerCase()+e.slice(1))||un(a,a_(e))||un(a,e))}function YC(a){const{type:e,vnode:t,proxy:i,withProxy:n,propsOptions:[s],slots:r,attrs:l,emit:u,render:d,renderCache:m,props:f,data:v,setupState:w,ctx:S,inheritAttrs:T}=a,M=yx(a);let G,P;try{if(t.shapeFlag&4){const N=n||i,V=N;G=nc(d.call(V,N,m,f,w,v,S)),P=l}else{const N=e;G=nc(N.length>1?N(f,{attrs:l,slots:r,emit:u}):N(f,null)),P=e.props?l:NZ(l)}}catch(N){R0.length=0,Yw(N,a,1),G=lt(fo)}let F=G;if(P&&T!==!1){const N=Object.keys(P),{shapeFlag:V}=F;N.length&&V&7&&(s&&N.some(M4)&&(P=FZ(P,s)),F=Yh(F,P,!1,!0))}return t.dirs&&(F=Yh(F,null,!1,!0),F.dirs=F.dirs?F.dirs.concat(t.dirs):t.dirs),t.transition&&n1(F,t.transition),G=F,yx(M),G}const NZ=a=>{let e;for(const t in a)(t==="class"||t==="style"||Zw(t))&&((e||(e={}))[t]=a[t]);return e},FZ=(a,e)=>{const t={};for(const i in a)(!M4(i)||!(i.slice(9)in e))&&(t[i]=a[i]);return t};function DZ(a,e,t){const{props:i,children:n,component:s}=a,{props:r,children:l,patchFlag:u}=e,d=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&u>=0){if(u&1024)return!0;if(u&16)return i?gL(i,r,d):!!r;if(u&8){const m=e.dynamicProps;for(let f=0;f<m.length;f++){const v=m[f];if(r[v]!==i[v]&&!Qw(d,v))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===r?!1:i?r?gL(i,r,d):!0:!!r;return!1}function gL(a,e,t){const i=Object.keys(e);if(i.length!==Object.keys(a).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(e[s]!==a[s]&&!Qw(t,s))return!0}return!1}function VZ({vnode:a,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===a&&(i.el=a.el),i===a)(a=e.vnode).el=t,e=e.parent;else break}}const X6=a=>a.__isSuspense;function ZZ(a,e){e&&e.pendingBranch?Ba(a)?e.effects.push(...a):e.effects.push(a):JV(a)}const Ot=Symbol.for("v-fgt"),eI=Symbol.for("v-txt"),fo=Symbol.for("v-cmt"),KC=Symbol.for("v-stc"),R0=[];let yl=null;function U(a=!1){R0.push(yl=a?null:[])}function zZ(){R0.pop(),yl=R0[R0.length-1]||null}let r1=1;function fL(a,e=!1){r1+=a,a<0&&yl&&e&&(yl.hasOnce=!0)}function q6(a){return a.dynamicChildren=r1>0?yl||Ng:null,zZ(),r1>0&&yl&&yl.push(a),a}function $(a,e,t,i,n,s){return q6(W(a,e,t,i,n,s,!0))}function Gt(a,e,t,i,n){return q6(lt(a,e,t,i,n,!0))}function s1(a){return a?a.__v_isVNode===!0:!1}function um(a,e){return a.type===e.type&&a.key===e.key}const Y6=({key:a})=>a??null,W2=({ref:a,ref_key:e,ref_for:t})=>(typeof a=="number"&&(a=""+a),a!=null?cr(a)||Xn(a)||ai(a)?{i:Qr,r:a,k:e,f:!!t}:a:null);function W(a,e=null,t=null,i=0,n=null,s=a===Ot?0:1,r=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:a,props:e,key:e&&Y6(e),ref:e&&W2(e),scopeId:f6,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Qr};return l?(Y4(u,t),s&128&&a.normalize(u)):t&&(u.shapeFlag|=cr(t)?8:16),r1>0&&!r&&yl&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&yl.push(u),u}const lt=UZ;function UZ(a,e=null,t=null,i=0,n=null,s=!1){if((!a||a===L6)&&(a=fo),s1(a)){const l=Yh(a,e,!0);return t&&Y4(l,t),r1>0&&!s&&yl&&(l.shapeFlag&6?yl[yl.indexOf(a)]=l:yl.push(l)),l.patchFlag=-2,l}if(ez(a)&&(a=a.__vccOpts),e){e=HZ(e);let{class:l,style:u}=e;l&&!cr(l)&&(e.class=Pa(l)),Sn(u)&&(F4(u)&&!Ba(u)&&(u=Ur({},u)),e.style=Tc(u))}const r=cr(a)?1:X6(a)?128:b6(a)?64:Sn(a)?4:ai(a)?2:0;return W(a,e,t,i,n,r,s,!0)}function HZ(a){return a?F4(a)||P6(a)?Ur({},a):a:null}function Yh(a,e,t=!1,i=!1){const{props:n,ref:s,patchFlag:r,children:l,transition:u}=a,d=e?K4(n||{},e):n,m={__v_isVNode:!0,__v_skip:!0,type:a.type,props:d,key:d&&Y6(d),ref:e&&e.ref?t&&s?Ba(s)?s.concat(W2(e)):[s,W2(e)]:W2(e):s,scopeId:a.scopeId,slotScopeIds:a.slotScopeIds,children:l,target:a.target,targetStart:a.targetStart,targetAnchor:a.targetAnchor,staticCount:a.staticCount,shapeFlag:a.shapeFlag,patchFlag:e&&a.type!==Ot?r===-1?16:r|16:r,dynamicProps:a.dynamicProps,dynamicChildren:a.dynamicChildren,appContext:a.appContext,dirs:a.dirs,transition:u,component:a.component,suspense:a.suspense,ssContent:a.ssContent&&Yh(a.ssContent),ssFallback:a.ssFallback&&Yh(a.ssFallback),el:a.el,anchor:a.anchor,ctx:a.ctx,ce:a.ce};return u&&i&&n1(m,u.clone(m)),m}function Jt(a=" ",e=0){return lt(eI,null,a,e)}function Ae(a="",e=!1){return e?(U(),Gt(fo,null,a)):lt(fo,null,a)}function nc(a){return a==null||typeof a=="boolean"?lt(fo):Ba(a)?lt(Ot,null,a.slice()):s1(a)?Sh(a):lt(eI,null,String(a))}function Sh(a){return a.el===null&&a.patchFlag!==-1||a.memo?a:Yh(a)}function Y4(a,e){let t=0;const{shapeFlag:i}=a;if(e==null)e=null;else if(Ba(e))t=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),Y4(a,n()),n._c&&(n._d=!0));return}else{t=32;const n=e._;!n&&!P6(e)?e._ctx=Qr:n===3&&Qr&&(Qr.slots._===1?e._=1:(e._=2,a.patchFlag|=1024))}else ai(e)?(e={default:e,_ctx:Qr},t=32):(e=String(e),i&64?(t=16,e=[Jt(e)]):t=8);a.children=e,a.shapeFlag|=t}function K4(...a){const e={};for(let t=0;t<a.length;t++){const i=a[t];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=Pa([e.class,i.class]));else if(n==="style")e.style=Tc([e.style,i.style]);else if(Zw(n)){const s=e[n],r=i[n];r&&s!==r&&!(Ba(s)&&s.includes(r))&&(e[n]=s?[].concat(s,r):r)}else n!==""&&(e[n]=i[n])}return e}function tc(a,e,t,i=null){wu(a,e,7,[t,i])}const XZ=W6();let qZ=0;function YZ(a,e,t){const i=a.type,n=(e?e.appContext:a.appContext)||XZ,s={uid:qZ++,vnode:a,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Hk(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:N6(i,n),emitsOptions:H6(i,n),emit:null,emitted:null,propsDefaults:Rn,inheritAttrs:i.inheritAttrs,ctx:Rn,data:Rn,props:Rn,attrs:Rn,slots:Rn,refs:Rn,setupState:Rn,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=BZ.bind(null,s),a.ce&&a.ce(s),s}let ps=null;const K6=()=>ps||Qr;let xx,XA;{const a=Hw(),e=(t,i)=>{let n;return(n=a[t])||(n=a[t]=[]),n.push(i),s=>{n.length>1?n.forEach(r=>r(s)):n[0](s)}};xx=e("__VUE_INSTANCE_SETTERS__",t=>ps=t),XA=e("__VUE_SSR_SETTERS__",t=>o1=t)}const U1=a=>{const e=ps;return xx(a),a.scope.on(),()=>{a.scope.off(),xx(e)}},yL=()=>{ps&&ps.scope.off(),xx(null)};function j6(a){return a.vnode.shapeFlag&4}let o1=!1;function KZ(a,e=!1,t=!1){e&&XA(e);const{props:i,children:n}=a.vnode,s=j6(a);IZ(a,i,s,e),TZ(a,n,t);const r=s?jZ(a,e):void 0;return e&&XA(!1),r}function jZ(a,e){const t=a.type;a.accessCache=Object.create(null),a.proxy=new Proxy(a.ctx,mZ);const{setup:i}=t;if(i){i_();const n=a.setupContext=i.length>1?JZ(a):null,s=U1(a),r=Z1(i,a,0,[a.props,n]),l=Nk(r);if(n_(),s(),(l||a.sp)&&!Vg(a)&&T6(a),l){if(r.then(yL,yL),e)return r.then(u=>{bL(a,u,e)}).catch(u=>{Yw(u,a,0)});a.asyncDep=r}else bL(a,r,e)}else $6(a,e)}function bL(a,e,t){ai(e)?a.type.__ssrInlineRender?a.ssrRender=e:a.render=e:Sn(e)&&(a.setupState=c6(e)),$6(a,t)}let vL;function $6(a,e,t){const i=a.type;if(!a.render){if(!e&&vL&&!i.render){const n=i.template||U4(a).template;if(n){const{isCustomElement:s,compilerOptions:r}=a.appContext.config,{delimiters:l,compilerOptions:u}=i,d=Ur(Ur({isCustomElement:s,delimiters:l},r),u);i.render=vL(n,d)}}a.render=i.render||fu}{const n=U1(a);i_();try{pZ(a)}finally{n_(),n()}}}const $Z={get(a,e){return Us(a,"get",""),a[e]}};function JZ(a){const e=t=>{a.exposed=t||{}};return{attrs:new Proxy(a.attrs,$Z),slots:a.slots,emit:a.emit,expose:e}}function tI(a){return a.exposed?a.exposeProxy||(a.exposeProxy=new Proxy(c6(D4(a.exposed)),{get(e,t){if(t in e)return e[t];if(t in L0)return L0[t](a)},has(e,t){return t in e||t in L0}})):a.proxy}function QZ(a,e=!0){return ai(a)?a.displayName||a.name:a.name||e&&a.__name}function ez(a){return ai(a)&&"__vccOpts"in a}const St=(a,e)=>qV(a,e,o1);function tz(a,e,t){const i=arguments.length;return i===2?Sn(e)&&!Ba(e)?s1(e)?lt(a,null,[e]):lt(a,e):lt(a,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&s1(t)&&(t=[t]),lt(a,e,t))}const az="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qA;const xL=typeof window<"u"&&window.trustedTypes;if(xL)try{qA=xL.createPolicy("vue",{createHTML:a=>a})}catch{}const J6=qA?a=>qA.createHTML(a):a=>a,iz="http://www.w3.org/2000/svg",nz="http://www.w3.org/1998/Math/MathML",hd=typeof document<"u"?document:null,wL=hd&&hd.createElement("template"),rz={insert:(a,e,t)=>{e.insertBefore(a,t||null)},remove:a=>{const e=a.parentNode;e&&e.removeChild(a)},createElement:(a,e,t,i)=>{const n=e==="svg"?hd.createElementNS(iz,a):e==="mathml"?hd.createElementNS(nz,a):t?hd.createElement(a,{is:t}):hd.createElement(a);return a==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:a=>hd.createTextNode(a),createComment:a=>hd.createComment(a),setText:(a,e)=>{a.nodeValue=e},setElementText:(a,e)=>{a.textContent=e},parentNode:a=>a.parentNode,nextSibling:a=>a.nextSibling,querySelector:a=>hd.querySelector(a),setScopeId(a,e){a.setAttribute(e,"")},insertStaticContent(a,e,t,i,n,s){const r=t?t.previousSibling:e.lastChild;if(n&&(n===s||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),t),!(n===s||!(n=n.nextSibling)););else{wL.innerHTML=J6(i==="svg"?`<svg>${a}</svg>`:i==="mathml"?`<math>${a}</math>`:a);const l=wL.content;if(i==="svg"||i==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}e.insertBefore(l,t)}return[r?r.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},mh="transition",Zy="animation",l1=Symbol("_vtc"),Q6={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},sz=Ur({},w6,Q6),oz=a=>(a.displayName="Transition",a.props=sz,a),aI=oz((a,{slots:e})=>tz(aZ,lz(a),e)),H_=(a,e=[])=>{Ba(a)?a.forEach(t=>t(...e)):a&&a(...e)},IL=a=>a?Ba(a)?a.some(e=>e.length>1):a.length>1:!1;function lz(a){const e={};for(const _e in a)_e in Q6||(e[_e]=a[_e]);if(a.css===!1)return e;const{name:t="v",type:i,duration:n,enterFromClass:s=`${t}-enter-from`,enterActiveClass:r=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:u=s,appearActiveClass:d=r,appearToClass:m=l,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:v=`${t}-leave-active`,leaveToClass:w=`${t}-leave-to`}=a,S=uz(n),T=S&&S[0],M=S&&S[1],{onBeforeEnter:G,onEnter:P,onEnterCancelled:F,onLeave:N,onLeaveCancelled:V,onBeforeAppear:K=G,onAppear:te=P,onAppearCancelled:J=F}=e,ne=(_e,Se,ce,Ie)=>{_e._enterCancelled=Ie,X_(_e,Se?m:l),X_(_e,Se?d:r),ce&&ce()},se=(_e,Se)=>{_e._isLeaving=!1,X_(_e,f),X_(_e,w),X_(_e,v),Se&&Se()},de=_e=>(Se,ce)=>{const Ie=_e?te:P,he=()=>ne(Se,_e,ce);H_(Ie,[Se,he]),CL(()=>{X_(Se,_e?u:s),nd(Se,_e?m:l),IL(Ie)||SL(Se,i,T,he)})};return Ur(e,{onBeforeEnter(_e){H_(G,[_e]),nd(_e,s),nd(_e,r)},onBeforeAppear(_e){H_(K,[_e]),nd(_e,u),nd(_e,d)},onEnter:de(!1),onAppear:de(!0),onLeave(_e,Se){_e._isLeaving=!0;const ce=()=>se(_e,Se);nd(_e,f),_e._enterCancelled?(nd(_e,v),EL()):(EL(),nd(_e,v)),CL(()=>{_e._isLeaving&&(X_(_e,f),nd(_e,w),IL(N)||SL(_e,i,M,ce))}),H_(N,[_e,ce])},onEnterCancelled(_e){ne(_e,!1,void 0,!0),H_(F,[_e])},onAppearCancelled(_e){ne(_e,!0,void 0,!0),H_(J,[_e])},onLeaveCancelled(_e){se(_e),H_(V,[_e])}})}function uz(a){if(a==null)return null;if(Sn(a))return[jC(a.enter),jC(a.leave)];{const e=jC(a);return[e,e]}}function jC(a){return dV(a)}function nd(a,e){e.split(/\s+/).forEach(t=>t&&a.classList.add(t)),(a[l1]||(a[l1]=new Set)).add(e)}function X_(a,e){e.split(/\s+/).forEach(i=>i&&a.classList.remove(i));const t=a[l1];t&&(t.delete(e),t.size||(a[l1]=void 0))}function CL(a){requestAnimationFrame(()=>{requestAnimationFrame(a)})}let cz=0;function SL(a,e,t,i){const n=a._endId=++cz,s=()=>{n===a._endId&&i()};if(t!=null)return setTimeout(s,t);const{type:r,timeout:l,propCount:u}=dz(a,e);if(!r)return i();const d=r+"end";let m=0;const f=()=>{a.removeEventListener(d,v),s()},v=w=>{w.target===a&&++m>=u&&f()};setTimeout(()=>{m<u&&f()},l+1),a.addEventListener(d,v)}function dz(a,e){const t=window.getComputedStyle(a),i=S=>(t[S]||"").split(", "),n=i(`${mh}Delay`),s=i(`${mh}Duration`),r=AL(n,s),l=i(`${Zy}Delay`),u=i(`${Zy}Duration`),d=AL(l,u);let m=null,f=0,v=0;e===mh?r>0&&(m=mh,f=r,v=s.length):e===Zy?d>0&&(m=Zy,f=d,v=u.length):(f=Math.max(r,d),m=f>0?r>d?mh:Zy:null,v=m?m===mh?s.length:u.length:0);const w=m===mh&&/\b(transform|all)(,|$)/.test(i(`${mh}Property`).toString());return{type:m,timeout:f,propCount:v,hasTransform:w}}function AL(a,e){for(;a.length<e.length;)a=a.concat(a);return Math.max(...e.map((t,i)=>TL(t)+TL(a[i])))}function TL(a){return a==="auto"?0:Number(a.slice(0,-1).replace(",","."))*1e3}function EL(){return document.body.offsetHeight}function hz(a,e,t){const i=a[l1];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?a.removeAttribute("class"):t?a.setAttribute("class",e):a.className=e}const wx=Symbol("_vod"),eW=Symbol("_vsh"),Em={beforeMount(a,{value:e},{transition:t}){a[wx]=a.style.display==="none"?"":a.style.display,t&&e?t.beforeEnter(a):zy(a,e)},mounted(a,{value:e},{transition:t}){t&&e&&t.enter(a)},updated(a,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(a),zy(a,!0),i.enter(a)):i.leave(a,()=>{zy(a,!1)}):zy(a,e))},beforeUnmount(a,{value:e}){zy(a,e)}};function zy(a,e){a.style.display=e?a[wx]:"none",a[eW]=!e}const _z=Symbol(""),mz=/(^|;)\s*display\s*:/;function pz(a,e,t){const i=a.style,n=cr(t);let s=!1;if(t&&!n){if(e)if(cr(e))for(const r of e.split(";")){const l=r.slice(0,r.indexOf(":")).trim();t[l]==null&&G2(i,l,"")}else for(const r in e)t[r]==null&&G2(i,r,"");for(const r in t)r==="display"&&(s=!0),G2(i,r,t[r])}else if(n){if(e!==t){const r=i[_z];r&&(t+=";"+r),i.cssText=t,s=mz.test(t)}}else e&&a.removeAttribute("style");wx in a&&(a[wx]=s?i.display:"",a[eW]&&(i.display="none"))}const ML=/\s*!important$/;function G2(a,e,t){if(Ba(t))t.forEach(i=>G2(a,e,i));else if(t==null&&(t=""),e.startsWith("--"))a.setProperty(e,t);else{const i=gz(a,e);ML.test(t)?a.setProperty(a_(i),t.replace(ML,""),"important"):a[i]=t}}const LL=["Webkit","Moz","ms"],$C={};function gz(a,e){const t=$C[e];if(t)return t;let i=Hl(e);if(i!=="filter"&&i in a)return $C[e]=i;i=Uw(i);for(let n=0;n<LL.length;n++){const s=LL[n]+i;if(s in a)return $C[e]=s}return e}const RL="http://www.w3.org/1999/xlink";function kL(a,e,t,i,n,s=fV(e)){i&&e.startsWith("xlink:")?t==null?a.removeAttributeNS(RL,e.slice(6,e.length)):a.setAttributeNS(RL,e,t):t==null||s&&!Zk(t)?a.removeAttribute(e):a.setAttribute(e,s?"":xu(t)?String(t):t)}function WL(a,e,t,i,n){if(e==="innerHTML"||e==="textContent"){t!=null&&(a[e]=e==="innerHTML"?J6(t):t);return}const s=a.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?a.getAttribute("value")||"":a.value,u=t==null?a.type==="checkbox"?"on":"":String(t);(l!==u||!("_value"in a))&&(a.value=u),t==null&&a.removeAttribute(e),a._value=t;return}let r=!1;if(t===""||t==null){const l=typeof a[e];l==="boolean"?t=Zk(t):t==null&&l==="string"?(t="",r=!0):l==="number"&&(t=0,r=!0)}try{a[e]=t}catch{}r&&a.removeAttribute(n||e)}function Lh(a,e,t,i){a.addEventListener(e,t,i)}function fz(a,e,t,i){a.removeEventListener(e,t,i)}const GL=Symbol("_vei");function yz(a,e,t,i,n=null){const s=a[GL]||(a[GL]={}),r=s[e];if(i&&r)r.value=i;else{const[l,u]=bz(e);if(i){const d=s[e]=wz(i,n);Lh(a,l,d,u)}else r&&(fz(a,l,r,u),s[e]=void 0)}}const OL=/(?:Once|Passive|Capture)$/;function bz(a){let e;if(OL.test(a)){e={};let i;for(;i=a.match(OL);)a=a.slice(0,a.length-i[0].length),e[i[0].toLowerCase()]=!0}return[a[2]===":"?a.slice(3):a_(a.slice(2)),e]}let JC=0;const vz=Promise.resolve(),xz=()=>JC||(vz.then(()=>JC=0),JC=Date.now());function wz(a,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;wu(Iz(i,t.value),e,5,[i])};return t.value=a,t.attached=xz(),t}function Iz(a,e){if(Ba(e)){const t=a.stopImmediatePropagation;return a.stopImmediatePropagation=()=>{t.call(a),a._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const PL=a=>a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&a.charCodeAt(2)>96&&a.charCodeAt(2)<123,Cz=(a,e,t,i,n,s)=>{const r=n==="svg";e==="class"?hz(a,i,r):e==="style"?pz(a,t,i):Zw(e)?M4(e)||yz(a,e,t,i,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Sz(a,e,i,r))?(WL(a,e,i),!a.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&kL(a,e,i,r,s,e!=="value")):a._isVueCE&&(/[A-Z]/.test(e)||!cr(i))?WL(a,Hl(e),i,s,e):(e==="true-value"?a._trueValue=i:e==="false-value"&&(a._falseValue=i),kL(a,e,i,r))};function Sz(a,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in a&&PL(e)&&ai(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&a.tagName==="INPUT"||e==="type"&&a.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=a.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return PL(e)&&cr(t)?!1:e in a}const sf=a=>{const e=a.props["onUpdate:modelValue"]||!1;return Ba(e)?t=>R2(e,t):e};function Az(a){a.target.composing=!0}function BL(a){const e=a.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Id=Symbol("_assign"),Hr={created(a,{modifiers:{lazy:e,trim:t,number:i}},n){a[Id]=sf(n);const s=i||n.props&&n.props.type==="number";Lh(a,e?"change":"input",r=>{if(r.target.composing)return;let l=a.value;t&&(l=l.trim()),s&&(l=mx(l)),a[Id](l)}),t&&Lh(a,"change",()=>{a.value=a.value.trim()}),e||(Lh(a,"compositionstart",Az),Lh(a,"compositionend",BL),Lh(a,"change",BL))},mounted(a,{value:e}){a.value=e??""},beforeUpdate(a,{value:e,oldValue:t,modifiers:{lazy:i,trim:n,number:s}},r){if(a[Id]=sf(r),a.composing)return;const l=(s||a.type==="number")&&!/^0\d/.test(a.value)?mx(a.value):a.value,u=e??"";l!==u&&(document.activeElement===a&&a.type!=="range"&&(i&&e===t||n&&a.value.trim()===u)||(a.value=u))}},of={deep:!0,created(a,e,t){a[Id]=sf(t),Lh(a,"change",()=>{const i=a._modelValue,n=u1(a),s=a.checked,r=a[Id];if(Ba(i)){const l=k4(i,n),u=l!==-1;if(s&&!u)r(i.concat(n));else if(!s&&u){const d=[...i];d.splice(l,1),r(d)}}else if(Sf(i)){const l=new Set(i);s?l.add(n):l.delete(n),r(l)}else r(aW(a,s))})},mounted:NL,beforeUpdate(a,e,t){a[Id]=sf(t),NL(a,e,t)}};function NL(a,{value:e,oldValue:t},i){a._modelValue=e;let n;if(Ba(e))n=k4(e,i.props.value)>-1;else if(Sf(e))n=e.has(i.props.value);else{if(e===t)return;n=V1(e,aW(a,!0))}a.checked!==n&&(a.checked=n)}const tW={deep:!0,created(a,{value:e,modifiers:{number:t}},i){const n=Sf(e);Lh(a,"change",()=>{const s=Array.prototype.filter.call(a.options,r=>r.selected).map(r=>t?mx(u1(r)):u1(r));a[Id](a.multiple?n?new Set(s):s:s[0]),a._assigning=!0,Iu(()=>{a._assigning=!1})}),a[Id]=sf(i)},mounted(a,{value:e}){FL(a,e)},beforeUpdate(a,e,t){a[Id]=sf(t)},updated(a,{value:e}){a._assigning||FL(a,e)}};function FL(a,e){const t=a.multiple,i=Ba(e);if(!(t&&!i&&!Sf(e))){for(let n=0,s=a.options.length;n<s;n++){const r=a.options[n],l=u1(r);if(t)if(i){const u=typeof l;u==="string"||u==="number"?r.selected=e.some(d=>String(d)===String(l)):r.selected=k4(e,l)>-1}else r.selected=e.has(l);else if(V1(u1(r),e)){a.selectedIndex!==n&&(a.selectedIndex=n);return}}!t&&a.selectedIndex!==-1&&(a.selectedIndex=-1)}}function u1(a){return"_value"in a?a._value:a.value}function aW(a,e){const t=e?"_trueValue":"_falseValue";return t in a?a[t]:e}const Tz=["ctrl","shift","alt","meta"],Ez={stop:a=>a.stopPropagation(),prevent:a=>a.preventDefault(),self:a=>a.target!==a.currentTarget,ctrl:a=>!a.ctrlKey,shift:a=>!a.shiftKey,alt:a=>!a.altKey,meta:a=>!a.metaKey,left:a=>"button"in a&&a.button!==0,middle:a=>"button"in a&&a.button!==1,right:a=>"button"in a&&a.button!==2,exact:(a,e)=>Tz.some(t=>a[`${t}Key`]&&!e.includes(t))},Jr=(a,e)=>{const t=a._withMods||(a._withMods={}),i=e.join(".");return t[i]||(t[i]=(n,...s)=>{for(let r=0;r<e.length;r++){const l=Ez[e[r]];if(l&&l(n,e))return}return a(n,...s)})},Mz={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Uo=(a,e)=>{const t=a._withKeys||(a._withKeys={}),i=e.join(".");return t[i]||(t[i]=n=>{if(!("key"in n))return;const s=a_(n.key);if(e.some(r=>r===s||Mz[r]===s))return a(n)})},Lz=Ur({patchProp:Cz},rz);let DL;function Rz(){return DL||(DL=MZ(Lz))}const kz=(...a)=>{const e=Rz().createApp(...a),{mount:t}=e;return e.mount=i=>{const n=Gz(i);if(!n)return;const s=e._component;!ai(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const r=t(n,!1,Wz(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),r},e};function Wz(a){if(a instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&a instanceof MathMLElement)return"mathml"}function Gz(a){return cr(a)?document.querySelector(a):a}var iW=Symbol();function Oz(a,{i18next:e,rerenderOn:t=["languageChanged","loaded","added","removed"],slotStart:i="{",slotEnd:n="}"}){const s=Fe(new Date),r=()=>Iu(()=>{s.value=new Date}),l=()=>s.value;t.forEach(m=>{var f;switch(m){case"added":case"removed":(f=e.store)==null||f.on(m,r);break;default:e.on(m,r);break}}),a.component("i18next",Nz);const u=()=>e.isInitialized;a.config.globalProperties.$t=VL(e.t.bind(e),l,u);const d=new Proxy(e,{get(m,f){return l(),Reflect.get(m,f)}});a.config.globalProperties.$i18next=d,a.provide(iW,{i18next:d,slotPattern:Bz(i,n),withAccessRecording(m,f){return VL(m,l,f)}})}function wt(a,e){const{i18next:t,withAccessRecording:i}=nW();let n;return e!=null&&e.lng?n=t.getFixedT(e.lng,a,e==null?void 0:e.keyPrefix):n=t.getFixedT(null,a??null,e==null?void 0:e.keyPrefix),{i18next:t,t:i(n,Pz(t,a))}}function Pz(a,e=[]){let t;return()=>{if(t===void 0)if(a.isInitialized){const n=(typeof e=="string"?[e]:e).filter(s=>!a.hasLoadedNamespace(s));n.length?(t=!1,a.loadNamespaces(n).then(()=>t=!0)):t=!0}else return!1;return t}}function VL(a,e,t){return new Proxy(a,{apply:function(i,n,s){return e(),t()?Reflect.apply(i,n,s):""}})}function nW(){const a=$s(iW);if(!a)throw new Error("i18next-vue: Make sure to register the i18next-vue plugin using app.use(...).");return a}function Bz(a,e){const t=`${a}\\s*([a-z0-9\\-]+)\\s*${e}`;return new RegExp(t,"gi")}var Nz=$e({props:{translation:{type:String,required:!0}},setup(a,{slots:e}){const{slotPattern:t}=nW();return()=>{const i=a.translation,n=[];let s,r=0;for(;(s=t.exec(i))!==null;){n.push(i.substring(r,s.index));const l=e[s[1]];l?n.push(...l()):n.push(s[0]),r=t.lastIndex}return n.push(i.substring(r)),n}}});/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function Rh(a){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(a)}function YA(a,e){return YA=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i},YA(a,e)}function Fz(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O2(a,e,t){return Fz()?O2=Reflect.construct:O2=function(n,s,r){var l=[null];l.push.apply(l,s);var u=Function.bind.apply(n,l),d=new u;return r&&YA(d,r.prototype),d},O2.apply(null,arguments)}function cu(a){return Dz(a)||Vz(a)||Zz(a)||zz()}function Dz(a){if(Array.isArray(a))return KA(a)}function Vz(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Zz(a,e){if(a){if(typeof a=="string")return KA(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KA(a,e)}}function KA(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=a[t];return i}function zz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Uz=Object.hasOwnProperty,ZL=Object.setPrototypeOf,Hz=Object.isFrozen,Xz=Object.getPrototypeOf,qz=Object.getOwnPropertyDescriptor,xo=Object.freeze,Xl=Object.seal,Yz=Object.create,rW=typeof Reflect<"u"&&Reflect,Ix=rW.apply,jA=rW.construct;Ix||(Ix=function(e,t,i){return e.apply(t,i)});xo||(xo=function(e){return e});Xl||(Xl=function(e){return e});jA||(jA=function(e,t){return O2(e,cu(t))});var Kz=ql(Array.prototype.forEach),zL=ql(Array.prototype.pop),Uy=ql(Array.prototype.push),P2=ql(String.prototype.toLowerCase),QC=ql(String.prototype.toString),UL=ql(String.prototype.match),ru=ql(String.prototype.replace),jz=ql(String.prototype.indexOf),$z=ql(String.prototype.trim),ws=ql(RegExp.prototype.test),eS=Jz(TypeError);function ql(a){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Ix(a,e,i)}}function Jz(a){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return jA(a,t)}}function wi(a,e,t){var i;t=(i=t)!==null&&i!==void 0?i:P2,ZL&&ZL(a,null);for(var n=e.length;n--;){var s=e[n];if(typeof s=="string"){var r=t(s);r!==s&&(Hz(e)||(e[n]=r),s=r)}a[s]=!0}return a}function q_(a){var e=Yz(null),t;for(t in a)Ix(Uz,a,[t])===!0&&(e[t]=a[t]);return e}function Wv(a,e){for(;a!==null;){var t=qz(a,e);if(t){if(t.get)return ql(t.get);if(typeof t.value=="function")return ql(t.value)}a=Xz(a)}function i(n){return console.warn("fallback value for",n),null}return i}var HL=xo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),tS=xo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),aS=xo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Qz=xo(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),iS=xo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),eU=xo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),XL=xo(["#text"]),qL=xo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),nS=xo(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),YL=xo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Gv=xo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),tU=Xl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),aU=Xl(/<%[\w\W]*|[\w\W]*%>/gm),iU=Xl(/\${[\w\W]*}/gm),nU=Xl(/^data-[\-\w.\u00B7-\uFFFF]+$/),rU=Xl(/^aria-[\-\w]+$/),sU=Xl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),oU=Xl(/^(?:\w+script|data):/i),lU=Xl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),uU=Xl(/^html$/i),cU=Xl(/^[a-z][.\w]*(-[.\w]+)+$/i),dU=function(){return typeof window>"u"?null:window},hU=function(e,t){if(Rh(e)!=="object"||typeof e.createPolicy!="function")return null;var i=null,n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(i=t.currentScript.getAttribute(n));var s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML:function(l){return l},createScriptURL:function(l){return l}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function sW(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dU(),e=function(Re){return sW(Re)};if(e.version="2.5.8",e.removed=[],!a||!a.document||a.document.nodeType!==9)return e.isSupported=!1,e;var t=a.document,i=a.document,n=a.DocumentFragment,s=a.HTMLTemplateElement,r=a.Node,l=a.Element,u=a.NodeFilter,d=a.NamedNodeMap,m=d===void 0?a.NamedNodeMap||a.MozNamedAttrMap:d,f=a.HTMLFormElement,v=a.DOMParser,w=a.trustedTypes,S=l.prototype,T=Wv(S,"cloneNode"),M=Wv(S,"nextSibling"),G=Wv(S,"childNodes"),P=Wv(S,"parentNode");if(typeof s=="function"){var F=i.createElement("template");F.content&&F.content.ownerDocument&&(i=F.content.ownerDocument)}var N=hU(w,t),V=N?N.createHTML(""):"",K=i,te=K.implementation,J=K.createNodeIterator,ne=K.createDocumentFragment,se=K.getElementsByTagName,de=t.importNode,_e={};try{_e=q_(i).documentMode?i.documentMode:{}}catch{}var Se={};e.isSupported=typeof P=="function"&&te&&te.createHTMLDocument!==void 0&&_e!==9;var ce=tU,Ie=aU,he=iU,we=nU,Oe=rU,Ye=oU,at=lU,yt=cU,De=sU,jt=null,pa=wi({},[].concat(cu(HL),cu(tS),cu(aS),cu(iS),cu(XL))),$t=null,Ua=wi({},[].concat(cu(qL),cu(nS),cu(YL),cu(Gv))),bt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ui=null,Ca=null,ii=!0,zi=!0,An=!1,xe=!0,Ge=!1,qe=!0,ut=!1,gt=!1,Pe=!1,Qe=!1,ze=!1,st=!1,nt=!0,xt=!1,Et="user-content-",ta=!0,oa=!1,Na={},mi=null,di=wi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Tn=null,Ki=wi({},["audio","video","img","source","image","track"]),qn=null,En=wi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xr="http://www.w3.org/1998/Math/MathML",Wr="http://www.w3.org/2000/svg",Ri="http://www.w3.org/1999/xhtml",Cn=Ri,ao=!1,So=null,gs=wi({},[xr,Wr,Ri],QC),Fn,qr=["application/xhtml+xml","text/html"],al="text/html",pn,ni=null,H=i.createElement("form"),j=function(Re){return Re instanceof RegExp||Re instanceof Function},ee=function(Re){ni&&ni===Re||((!Re||Rh(Re)!=="object")&&(Re={}),Re=q_(Re),Fn=qr.indexOf(Re.PARSER_MEDIA_TYPE)===-1?Fn=al:Fn=Re.PARSER_MEDIA_TYPE,pn=Fn==="application/xhtml+xml"?QC:P2,jt="ALLOWED_TAGS"in Re?wi({},Re.ALLOWED_TAGS,pn):pa,$t="ALLOWED_ATTR"in Re?wi({},Re.ALLOWED_ATTR,pn):Ua,So="ALLOWED_NAMESPACES"in Re?wi({},Re.ALLOWED_NAMESPACES,QC):gs,qn="ADD_URI_SAFE_ATTR"in Re?wi(q_(En),Re.ADD_URI_SAFE_ATTR,pn):En,Tn="ADD_DATA_URI_TAGS"in Re?wi(q_(Ki),Re.ADD_DATA_URI_TAGS,pn):Ki,mi="FORBID_CONTENTS"in Re?wi({},Re.FORBID_CONTENTS,pn):di,ui="FORBID_TAGS"in Re?wi({},Re.FORBID_TAGS,pn):{},Ca="FORBID_ATTR"in Re?wi({},Re.FORBID_ATTR,pn):{},Na="USE_PROFILES"in Re?Re.USE_PROFILES:!1,ii=Re.ALLOW_ARIA_ATTR!==!1,zi=Re.ALLOW_DATA_ATTR!==!1,An=Re.ALLOW_UNKNOWN_PROTOCOLS||!1,xe=Re.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ge=Re.SAFE_FOR_TEMPLATES||!1,qe=Re.SAFE_FOR_XML!==!1,ut=Re.WHOLE_DOCUMENT||!1,Qe=Re.RETURN_DOM||!1,ze=Re.RETURN_DOM_FRAGMENT||!1,st=Re.RETURN_TRUSTED_TYPE||!1,Pe=Re.FORCE_BODY||!1,nt=Re.SANITIZE_DOM!==!1,xt=Re.SANITIZE_NAMED_PROPS||!1,ta=Re.KEEP_CONTENT!==!1,oa=Re.IN_PLACE||!1,De=Re.ALLOWED_URI_REGEXP||De,Cn=Re.NAMESPACE||Ri,bt=Re.CUSTOM_ELEMENT_HANDLING||{},Re.CUSTOM_ELEMENT_HANDLING&&j(Re.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(bt.tagNameCheck=Re.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Re.CUSTOM_ELEMENT_HANDLING&&j(Re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(bt.attributeNameCheck=Re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Re.CUSTOM_ELEMENT_HANDLING&&typeof Re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(bt.allowCustomizedBuiltInElements=Re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ge&&(zi=!1),ze&&(Qe=!0),Na&&(jt=wi({},cu(XL)),$t=[],Na.html===!0&&(wi(jt,HL),wi($t,qL)),Na.svg===!0&&(wi(jt,tS),wi($t,nS),wi($t,Gv)),Na.svgFilters===!0&&(wi(jt,aS),wi($t,nS),wi($t,Gv)),Na.mathMl===!0&&(wi(jt,iS),wi($t,YL),wi($t,Gv))),Re.ADD_TAGS&&(jt===pa&&(jt=q_(jt)),wi(jt,Re.ADD_TAGS,pn)),Re.ADD_ATTR&&($t===Ua&&($t=q_($t)),wi($t,Re.ADD_ATTR,pn)),Re.ADD_URI_SAFE_ATTR&&wi(qn,Re.ADD_URI_SAFE_ATTR,pn),Re.FORBID_CONTENTS&&(mi===di&&(mi=q_(mi)),wi(mi,Re.FORBID_CONTENTS,pn)),ta&&(jt["#text"]=!0),ut&&wi(jt,["html","head","body"]),jt.table&&(wi(jt,["tbody"]),delete ui.tbody),xo&&xo(Re),ni=Re)},le=wi({},["mi","mo","mn","ms","mtext"]),me=wi({},["annotation-xml"]),Le=wi({},["title","style","font","a","script"]),Te=wi({},tS);wi(Te,aS),wi(Te,Qz);var ae=wi({},iS);wi(ae,eU);var ye=function(Re){var dt=P(Re);(!dt||!dt.tagName)&&(dt={namespaceURI:Cn,tagName:"template"});var mt=P2(Re.tagName),la=P2(dt.tagName);return So[Re.namespaceURI]?Re.namespaceURI===Wr?dt.namespaceURI===Ri?mt==="svg":dt.namespaceURI===xr?mt==="svg"&&(la==="annotation-xml"||le[la]):!!Te[mt]:Re.namespaceURI===xr?dt.namespaceURI===Ri?mt==="math":dt.namespaceURI===Wr?mt==="math"&&me[la]:!!ae[mt]:Re.namespaceURI===Ri?dt.namespaceURI===Wr&&!me[la]||dt.namespaceURI===xr&&!le[la]?!1:!ae[mt]&&(Le[mt]||!Te[mt]):!!(Fn==="application/xhtml+xml"&&So[Re.namespaceURI]):!1},Ne=function(Re){Uy(e.removed,{element:Re});try{Re.parentNode.removeChild(Re)}catch{try{Re.outerHTML=V}catch{Re.remove()}}},ct=function(Re,dt){try{Uy(e.removed,{attribute:dt.getAttributeNode(Re),from:dt})}catch{Uy(e.removed,{attribute:null,from:dt})}if(dt.removeAttribute(Re),Re==="is"&&!$t[Re])if(Qe||ze)try{Ne(dt)}catch{}else try{dt.setAttribute(Re,"")}catch{}},ft=function(Re){var dt,mt;if(Pe)Re="<remove></remove>"+Re;else{var la=UL(Re,/^[\r\n\t ]+/);mt=la&&la[0]}Fn==="application/xhtml+xml"&&Cn===Ri&&(Re='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Re+"</body></html>");var Ea=N?N.createHTML(Re):Re;if(Cn===Ri)try{dt=new v().parseFromString(Ea,Fn)}catch{}if(!dt||!dt.documentElement){dt=te.createDocument(Cn,"template",null);try{dt.documentElement.innerHTML=ao?V:Ea}catch{}}var ki=dt.body||dt.documentElement;return Re&&mt&&ki.insertBefore(i.createTextNode(mt),ki.childNodes[0]||null),Cn===Ri?se.call(dt,ut?"html":"body")[0]:ut?dt.documentElement:ki},Je=function(Re){return J.call(Re.ownerDocument||Re,Re,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null,!1)},_t=function(Re){return Re instanceof f&&(typeof Re.nodeName!="string"||typeof Re.textContent!="string"||typeof Re.removeChild!="function"||!(Re.attributes instanceof m)||typeof Re.removeAttribute!="function"||typeof Re.setAttribute!="function"||typeof Re.namespaceURI!="string"||typeof Re.insertBefore!="function"||typeof Re.hasChildNodes!="function")},Xt=function(Re){return Rh(r)==="object"?Re instanceof r:Re&&Rh(Re)==="object"&&typeof Re.nodeType=="number"&&typeof Re.nodeName=="string"},Bt=function(Re,dt,mt){Se[Re]&&Kz(Se[Re],function(la){la.call(e,dt,mt,ni)})},tt=function(Re){var dt;if(Bt("beforeSanitizeElements",Re,null),_t(Re)||ws(/[\u0080-\uFFFF]/,Re.nodeName))return Ne(Re),!0;var mt=pn(Re.nodeName);if(Bt("uponSanitizeElement",Re,{tagName:mt,allowedTags:jt}),Re.hasChildNodes()&&!Xt(Re.firstElementChild)&&(!Xt(Re.content)||!Xt(Re.content.firstElementChild))&&ws(/<[/\w]/g,Re.innerHTML)&&ws(/<[/\w]/g,Re.textContent)||mt==="select"&&ws(/<template/i,Re.innerHTML)||Re.nodeType===7||qe&&Re.nodeType===8&&ws(/<[/\w]/g,Re.data))return Ne(Re),!0;if(!jt[mt]||ui[mt]){if(!ui[mt]&&Rt(mt)&&(bt.tagNameCheck instanceof RegExp&&ws(bt.tagNameCheck,mt)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(mt)))return!1;if(ta&&!mi[mt]){var la=P(Re)||Re.parentNode,Ea=G(Re)||Re.childNodes;if(Ea&&la)for(var ki=Ea.length,Ga=ki-1;Ga>=0;--Ga){var Ui=T(Ea[Ga],!0);Ui.__removalCount=(Re.__removalCount||0)+1,la.insertBefore(Ui,M(Re))}}return Ne(Re),!0}return Re instanceof l&&!ye(Re)||(mt==="noscript"||mt==="noembed"||mt==="noframes")&&ws(/<\/no(script|embed|frames)/i,Re.innerHTML)?(Ne(Re),!0):(Ge&&Re.nodeType===3&&(dt=Re.textContent,dt=ru(dt,ce," "),dt=ru(dt,Ie," "),dt=ru(dt,he," "),Re.textContent!==dt&&(Uy(e.removed,{element:Re.cloneNode()}),Re.textContent=dt)),Bt("afterSanitizeElements",Re,null),!1)},Ft=function(Re,dt,mt){if(nt&&(dt==="id"||dt==="name")&&(mt in i||mt in H))return!1;if(!(zi&&!Ca[dt]&&ws(we,dt))){if(!(ii&&ws(Oe,dt))){if(!$t[dt]||Ca[dt]){if(!(Rt(Re)&&(bt.tagNameCheck instanceof RegExp&&ws(bt.tagNameCheck,Re)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(Re))&&(bt.attributeNameCheck instanceof RegExp&&ws(bt.attributeNameCheck,dt)||bt.attributeNameCheck instanceof Function&&bt.attributeNameCheck(dt))||dt==="is"&&bt.allowCustomizedBuiltInElements&&(bt.tagNameCheck instanceof RegExp&&ws(bt.tagNameCheck,mt)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(mt))))return!1}else if(!qn[dt]){if(!ws(De,ru(mt,at,""))){if(!((dt==="src"||dt==="xlink:href"||dt==="href")&&Re!=="script"&&jz(mt,"data:")===0&&Tn[Re])){if(!(An&&!ws(Ye,ru(mt,at,"")))){if(mt)return!1}}}}}}return!0},Rt=function(Re){return Re!=="annotation-xml"&&UL(Re,yt)},Wt=function(Re){var dt,mt,la,Ea;Bt("beforeSanitizeAttributes",Re,null);var ki=Re.attributes;if(!(!ki||_t(Re))){var Ga={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$t};for(Ea=ki.length;Ea--;){dt=ki[Ea];var Ui=dt,Oa=Ui.name,Ya=Ui.namespaceURI;if(mt=Oa==="value"?dt.value:$z(dt.value),la=pn(Oa),Ga.attrName=la,Ga.attrValue=mt,Ga.keepAttr=!0,Ga.forceKeepAttr=void 0,Bt("uponSanitizeAttribute",Re,Ga),mt=Ga.attrValue,!Ga.forceKeepAttr&&(ct(Oa,Re),!!Ga.keepAttr)){if(!xe&&ws(/\/>/i,mt)){ct(Oa,Re);continue}Ge&&(mt=ru(mt,ce," "),mt=ru(mt,Ie," "),mt=ru(mt,he," "));var gi=pn(Re.nodeName);if(Ft(gi,la,mt)){if(xt&&(la==="id"||la==="name")&&(ct(Oa,Re),mt=Et+mt),qe&&ws(/((--!?|])>)|<\/(style|title)/i,mt)){ct(Oa,Re);continue}if(N&&Rh(w)==="object"&&typeof w.getAttributeType=="function"&&!Ya)switch(w.getAttributeType(gi,la)){case"TrustedHTML":{mt=N.createHTML(mt);break}case"TrustedScriptURL":{mt=N.createScriptURL(mt);break}}try{Ya?Re.setAttributeNS(Ya,Oa,mt):Re.setAttribute(Oa,mt),_t(Re)?Ne(Re):zL(e.removed)}catch{}}}}Bt("afterSanitizeAttributes",Re,null)}},Va=function rt(Re){var dt,mt=Je(Re);for(Bt("beforeSanitizeShadowDOM",Re,null);dt=mt.nextNode();)Bt("uponSanitizeShadowNode",dt,null),tt(dt),Wt(dt),dt.content instanceof n&&rt(dt.content);Bt("afterSanitizeShadowDOM",Re,null)};return e.sanitize=function(rt){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt,mt,la,Ea,ki;if(ao=!rt,ao&&(rt="<!-->"),typeof rt!="string"&&!Xt(rt))if(typeof rt.toString=="function"){if(rt=rt.toString(),typeof rt!="string")throw eS("dirty is not a string, aborting")}else throw eS("toString is not a function");if(!e.isSupported){if(Rh(a.toStaticHTML)==="object"||typeof a.toStaticHTML=="function"){if(typeof rt=="string")return a.toStaticHTML(rt);if(Xt(rt))return a.toStaticHTML(rt.outerHTML)}return rt}if(gt||ee(Re),e.removed=[],typeof rt=="string"&&(oa=!1),oa){if(rt.nodeName){var Ga=pn(rt.nodeName);if(!jt[Ga]||ui[Ga])throw eS("root node is forbidden and cannot be sanitized in-place")}}else if(rt instanceof r)dt=ft("<!---->"),mt=dt.ownerDocument.importNode(rt,!0),mt.nodeType===1&&mt.nodeName==="BODY"||mt.nodeName==="HTML"?dt=mt:dt.appendChild(mt);else{if(!Qe&&!Ge&&!ut&&rt.indexOf("<")===-1)return N&&st?N.createHTML(rt):rt;if(dt=ft(rt),!dt)return Qe?null:st?V:""}dt&&Pe&&Ne(dt.firstChild);for(var Ui=Je(oa?rt:dt);la=Ui.nextNode();)la.nodeType===3&&la===Ea||(tt(la),Wt(la),la.content instanceof n&&Va(la.content),Ea=la);if(Ea=null,oa)return rt;if(Qe){if(ze)for(ki=ne.call(dt.ownerDocument);dt.firstChild;)ki.appendChild(dt.firstChild);else ki=dt;return($t.shadowroot||$t.shadowrootmod)&&(ki=de.call(t,ki,!0)),ki}var Oa=ut?dt.outerHTML:dt.innerHTML;return ut&&jt["!doctype"]&&dt.ownerDocument&&dt.ownerDocument.doctype&&dt.ownerDocument.doctype.name&&ws(uU,dt.ownerDocument.doctype.name)&&(Oa="<!DOCTYPE "+dt.ownerDocument.doctype.name+`>
`+Oa),Ge&&(Oa=ru(Oa,ce," "),Oa=ru(Oa,Ie," "),Oa=ru(Oa,he," ")),N&&st?N.createHTML(Oa):Oa},e.setConfig=function(rt){ee(rt),gt=!0},e.clearConfig=function(){ni=null,gt=!1},e.isValidAttribute=function(rt,Re,dt){ni||ee({});var mt=pn(rt),la=pn(Re);return Ft(mt,la,dt)},e.addHook=function(rt,Re){typeof Re=="function"&&(Se[rt]=Se[rt]||[],Uy(Se[rt],Re))},e.removeHook=function(rt){if(Se[rt])return zL(Se[rt])},e.removeHooks=function(rt){Se[rt]&&(Se[rt]=[])},e.removeAllHooks=function(){Se={}},e}var _U=sW();function mU(a,e){const t=a.hooks??{};let i;for(i in t){const n=t[i];n!==void 0&&e.addHook(i,n)}}function oW(){return _U()}function pU(a={},e=oW){const t=e();mU(a,t);const i=function(n,s){const r=s.value;if(s.oldValue===r)return;const l=`${r}`,u=s.arg,d=a.namedConfigurations,m=a.default??{};if(d&&u!==void 0){n.innerHTML=t.sanitize(l,d[u]??m);return}n.innerHTML=t.sanitize(l,m)};return{mounted:i,updated:i}}const gU={install(a,e={},t=oW){a.directive("dompurify-html",pU(e,t))}};var fU=!1;/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let lW;const iI=a=>lW=a,uW=Symbol();function $A(a){return a&&typeof a=="object"&&Object.prototype.toString.call(a)==="[object Object]"&&typeof a.toJSON!="function"}var k0;(function(a){a.direct="direct",a.patchObject="patch object",a.patchFunction="patch function"})(k0||(k0={}));function yU(){const a=Xk(!0),e=a.run(()=>Fe({}));let t=[],i=[];const n=D4({install(s){iI(n),n._a=s,s.provide(uW,n),s.config.globalProperties.$pinia=n,i.forEach(r=>t.push(r)),i=[]},use(s){return!this._a&&!fU?i.push(s):t.push(s),this},_p:t,_a:null,_e:a,_s:new Map,state:e});return n}const cW=()=>{};function KL(a,e,t,i=cW){a.push(e);const n=()=>{const s=a.indexOf(e);s>-1&&(a.splice(s,1),i())};return!t&&qk()&&bV(n),n}function eg(a,...e){a.slice().forEach(t=>{t(...e)})}const bU=a=>a(),jL=Symbol(),rS=Symbol();function JA(a,e){a instanceof Map&&e instanceof Map?e.forEach((t,i)=>a.set(i,t)):a instanceof Set&&e instanceof Set&&e.forEach(a.add,a);for(const t in e){if(!e.hasOwnProperty(t))continue;const i=e[t],n=a[t];$A(n)&&$A(i)&&a.hasOwnProperty(t)&&!Xn(i)&&!wd(i)?a[t]=JA(n,i):a[t]=i}return a}const vU=Symbol();function xU(a){return!$A(a)||!a.hasOwnProperty(vU)}const{assign:wh}=Object;function wU(a){return!!(Xn(a)&&a.effect)}function IU(a,e,t,i){const{state:n,actions:s,getters:r}=e,l=t.state.value[a];let u;function d(){l||(t.state.value[a]=n?n():{});const m=zV(t.state.value[a]);return wh(m,s,Object.keys(r||{}).reduce((f,v)=>(f[v]=D4(St(()=>{iI(t);const w=t._s.get(a);return r[v].call(w,w)})),f),{}))}return u=dW(a,d,e,t,i,!0),u}function dW(a,e,t={},i,n,s){let r;const l=wh({actions:{}},t),u={deep:!0};let d,m,f=[],v=[],w;const S=i.state.value[a];!s&&!S&&(i.state.value[a]={}),Fe({});let T;function M(J){let ne;d=m=!1,typeof J=="function"?(J(i.state.value[a]),ne={type:k0.patchFunction,storeId:a,events:w}):(JA(i.state.value[a],J),ne={type:k0.patchObject,payload:J,storeId:a,events:w});const se=T=Symbol();Iu().then(()=>{T===se&&(d=!0)}),m=!0,eg(f,ne,i.state.value[a])}const G=s?function(){const{state:ne}=t,se=ne?ne():{};this.$patch(de=>{wh(de,se)})}:cW;function P(){r.stop(),f=[],v=[],i._s.delete(a)}const F=(J,ne="")=>{if(jL in J)return J[rS]=ne,J;const se=function(){iI(i);const de=Array.from(arguments),_e=[],Se=[];function ce(we){_e.push(we)}function Ie(we){Se.push(we)}eg(v,{args:de,name:se[rS],store:V,after:ce,onError:Ie});let he;try{he=J.apply(this&&this.$id===a?this:V,de)}catch(we){throw eg(Se,we),we}return he instanceof Promise?he.then(we=>(eg(_e,we),we)).catch(we=>(eg(Se,we),Promise.reject(we))):(eg(_e,he),he)};return se[jL]=!0,se[rS]=ne,se},N={_p:i,$id:a,$onAction:KL.bind(null,v),$patch:M,$reset:G,$subscribe(J,ne={}){const se=KL(f,J,ne.detached,()=>de()),de=r.run(()=>Ut(()=>i.state.value[a],_e=>{(ne.flush==="sync"?m:d)&&J({storeId:a,type:k0.direct,events:w},_e)},wh({},u,ne)));return se},$dispose:P},V=qw(N);i._s.set(a,V);const te=(i._a&&i._a.runWithContext||bU)(()=>i._e.run(()=>(r=Xk()).run(()=>e({action:F}))));for(const J in te){const ne=te[J];if(Xn(ne)&&!wU(ne)||wd(ne))s||(S&&xU(ne)&&(Xn(ne)?ne.value=S[J]:JA(ne,S[J])),i.state.value[a][J]=ne);else if(typeof ne=="function"){const se=F(ne,J);te[J]=se,l.actions[J]=ne}}return wh(V,te),wh(Fi(V),te),Object.defineProperty(V,"$state",{get:()=>i.state.value[a],set:J=>{M(ne=>{wh(ne,J)})}}),i._p.forEach(J=>{wh(V,r.run(()=>J({store:V,app:i._a,pinia:i,options:l})))}),S&&s&&t.hydrate&&t.hydrate(V.$state,S),d=!0,m=!0,V}/*! #__NO_SIDE_EFFECTS__ */function Co(a,e,t){let i,n;const s=typeof e=="function";typeof a=="string"?(i=a,n=s?t:e):(n=a,i=a.id);function r(l,u){const d=wZ();return l=l||(d?$s(uW,null):null),l&&iI(l),l=lW,l._s.has(i)||(s?dW(i,e,n,l):IU(i,n,l)),l._s.get(i)}return r.$id=i,r}function Tt(a){{const e=Fi(a),t={};for(const i in e){const n=e[i];n.effect?t[i]=St({get:()=>a[i],set(s){a[i]=s}}):(Xn(n)||wd(n))&&(t[i]=d6(a,i))}return t}}const hW={info:1,warn:2,error:3,none:4};let CU=hW.info;function _W(...a){CU>hW.warn||console.warn(...a)}const _s={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ss(a){const e=xl();for(let t=0,i=a.length;t<i;++t)G0(e,a[t]);return e}function SU(a,e,t){const i=Math.min.apply(null,a),n=Math.min.apply(null,e),s=Math.max.apply(null,a),r=Math.max.apply(null,e);return wc(i,n,s,r,t)}function Kh(a,e,t){return t?(t[0]=a[0]-e,t[1]=a[1]-e,t[2]=a[2]+e,t[3]=a[3]+e,t):[a[0]-e,a[1]-e,a[2]+e,a[3]+e]}function mW(a,e){return e?(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e):a.slice()}function Ym(a,e,t){let i,n;return e<a[0]?i=a[0]-e:a[2]<e?i=e-a[2]:i=0,t<a[1]?n=a[1]-t:a[3]<t?n=t-a[3]:n=0,i*i+n*n}function xc(a,e){return j4(a,e[0],e[1])}function lc(a,e){return a[0]<=e[0]&&e[2]<=a[2]&&a[1]<=e[1]&&e[3]<=a[3]}function j4(a,e,t){return a[0]<=e&&e<=a[2]&&a[1]<=t&&t<=a[3]}function QA(a,e){const t=a[0],i=a[1],n=a[2],s=a[3],r=e[0],l=e[1];let u=_s.UNKNOWN;return r<t?u=u|_s.LEFT:r>n&&(u=u|_s.RIGHT),l<i?u=u|_s.BELOW:l>s&&(u=u|_s.ABOVE),u===_s.UNKNOWN&&(u=_s.INTERSECTING),u}function xl(){return[1/0,1/0,-1/0,-1/0]}function wc(a,e,t,i,n){return n?(n[0]=a,n[1]=e,n[2]=t,n[3]=i,n):[a,e,t,i]}function Af(a){return wc(1/0,1/0,-1/0,-1/0,a)}function W0(a,e){const t=a[0],i=a[1];return wc(t,i,t,i,e)}function $4(a,e,t,i,n){const s=Af(n);return pW(s,a,e,t,i)}function Mm(a,e){return a[0]==e[0]&&a[2]==e[2]&&a[1]==e[1]&&a[3]==e[3]}function c1(a,e){return e[0]<a[0]&&(a[0]=e[0]),e[2]>a[2]&&(a[2]=e[2]),e[1]<a[1]&&(a[1]=e[1]),e[3]>a[3]&&(a[3]=e[3]),a}function G0(a,e){e[0]<a[0]&&(a[0]=e[0]),e[0]>a[2]&&(a[2]=e[0]),e[1]<a[1]&&(a[1]=e[1]),e[1]>a[3]&&(a[3]=e[1])}function pW(a,e,t,i,n){for(;t<i;t+=n)AU(a,e[t],e[t+1]);return a}function AU(a,e,t){a[0]=Math.min(a[0],e),a[1]=Math.min(a[1],t),a[2]=Math.max(a[2],e),a[3]=Math.max(a[3],t)}function J4(a,e){let t;return t=e(nI(a)),t||(t=e(rI(a)),t)||(t=e(sI(a)),t)||(t=e(Vd(a)),t)?t:!1}function eT(a){let e=0;return Km(a)||(e=Ti(a)*vr(a)),e}function nI(a){return[a[0],a[1]]}function rI(a){return[a[2],a[1]]}function Cu(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function TU(a,e){let t;if(e==="bottom-left")t=nI(a);else if(e==="bottom-right")t=rI(a);else if(e==="top-left")t=Vd(a);else if(e==="top-right")t=sI(a);else throw new Error("Invalid corner");return t}function d1(a,e,t,i,n){const[s,r,l,u,d,m,f,v]=gW(a,e,t,i);return wc(Math.min(s,l,d,f),Math.min(r,u,m,v),Math.max(s,l,d,f),Math.max(r,u,m,v),n)}function gW(a,e,t,i){const n=e*i[0]/2,s=e*i[1]/2,r=Math.cos(t),l=Math.sin(t),u=n*r,d=n*l,m=s*r,f=s*l,v=a[0],w=a[1];return[v-u+f,w-d-m,v-u-f,w-d+m,v+u-f,w+d+m,v+u+f,w+d-m,v-u+f,w-d-m]}function vr(a){return a[3]-a[1]}function mc(a,e,t){const i=t||xl();return Rr(a,e)?(a[0]>e[0]?i[0]=a[0]:i[0]=e[0],a[1]>e[1]?i[1]=a[1]:i[1]=e[1],a[2]<e[2]?i[2]=a[2]:i[2]=e[2],a[3]<e[3]?i[3]=a[3]:i[3]=e[3]):Af(i),i}function Vd(a){return[a[0],a[3]]}function sI(a){return[a[2],a[3]]}function Ti(a){return a[2]-a[0]}function Rr(a,e){return a[0]<=e[2]&&a[2]>=e[0]&&a[1]<=e[3]&&a[3]>=e[1]}function Km(a){return a[2]<a[0]||a[3]<a[1]}function EU(a,e){return e?(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e):a}function MU(a,e,t){let i=!1;const n=QA(a,e),s=QA(a,t);if(n===_s.INTERSECTING||s===_s.INTERSECTING)i=!0;else{const r=a[0],l=a[1],u=a[2],d=a[3],m=e[0],f=e[1],v=t[0],w=t[1],S=(w-f)/(v-m);let T,M;s&_s.ABOVE&&!(n&_s.ABOVE)&&(T=v-(w-d)/S,i=T>=r&&T<=u),!i&&s&_s.RIGHT&&!(n&_s.RIGHT)&&(M=w-(v-u)*S,i=M>=l&&M<=d),!i&&s&_s.BELOW&&!(n&_s.BELOW)&&(T=v-(w-l)/S,i=T>=r&&T<=u),!i&&s&_s.LEFT&&!(n&_s.LEFT)&&(M=w-(v-r)*S,i=M>=l&&M<=d)}return i}function LU(a,e,t,i){if(Km(a))return Af(t);let n=[];if(i>1){const l=a[2]-a[0],u=a[3]-a[1];for(let d=0;d<i;++d)n.push(a[0]+l*d/i,a[1],a[2],a[1]+u*d/i,a[2]-l*d/i,a[3],a[0],a[3]-u*d/i)}else n=[a[0],a[1],a[2],a[1],a[2],a[3],a[0],a[3]];e(n,n,2);const s=[],r=[];for(let l=0,u=n.length;l<u;l+=2)s.push(n[l]),r.push(n[l+1]);return SU(s,r,t)}function fW(a,e){const t=e.getExtent(),i=Cu(a);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const n=Ti(t),r=Math.floor((i[0]-t[0])/n)*n;a[0]-=r,a[2]-=r}return a}function yW(a,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(a[0])||!isFinite(a[2]))return[[i[0],a[1],i[2],a[3]]];fW(a,e);const n=Ti(i);if(Ti(a)>n&&!t)return[[i[0],a[1],i[2],a[3]]];if(a[0]<i[0])return[[a[0]+n,a[1],i[2],a[3]],[i[0],a[1],a[2],a[3]]];if(a[2]>i[2])return[[a[0],a[1],i[2],a[3]],[i[0],a[1],a[2]-n,a[3]]]}return[a]}function Nn(a,e,t){return Math.min(Math.max(a,e),t)}function RU(a,e,t,i,n,s){const r=n-t,l=s-i;if(r!==0||l!==0){const u=((a-t)*r+(e-i)*l)/(r*r+l*l);u>1?(t=n,i=s):u>0&&(t+=r*u,i+=l*u)}return Cd(a,e,t,i)}function Cd(a,e,t,i){const n=t-a,s=i-e;return n*n+s*s}function kU(a){const e=a.length;for(let i=0;i<e;i++){let n=i,s=Math.abs(a[i][i]);for(let l=i+1;l<e;l++){const u=Math.abs(a[l][i]);u>s&&(s=u,n=l)}if(s===0)return null;const r=a[n];a[n]=a[i],a[i]=r;for(let l=i+1;l<e;l++){const u=-a[l][i]/a[i][i];for(let d=i;d<e+1;d++)i==d?a[l][d]=0:a[l][d]+=u*a[i][d]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=a[i][e]/a[i][i];for(let n=i-1;n>=0;n--)a[n][e]-=a[n][i]*t[i]}return t}function Wd(a){return a*180/Math.PI}function Js(a){return a*Math.PI/180}function Sd(a,e){const t=a%e;return t*e<0?t+e:t}function gl(a,e,t){return a+t*(e-a)}function Tf(a,e){const t=Math.pow(10,e);return Math.round(a*t)/t}function $L(a,e){return Math.round(Tf(a,e))}function Cg(a,e){return Math.floor(Tf(a,e))}function Oh(a,e){return Math.ceil(Tf(a,e))}function tT(a,e,t){if(a>=e&&a<t)return a;const i=t-e;return((a-e)%i+i)%i+e}function kh(a,e,t){const i=t!==void 0?a.toFixed(t):""+a;let n=i.indexOf(".");return n=n===-1?i.length:n,n>e?i:new Array(1+e-n).join("0")+i}function Q4(a,e){const t=(""+a).split("."),i=(""+e).split(".");for(let n=0;n<Math.max(t.length,i.length);n++){const s=parseInt(t[n]||"0",10),r=parseInt(i[n]||"0",10);if(s>r)return 1;if(r>s)return-1}return 0}function WU(a,e){return a[0]+=+e[0],a[1]+=+e[1],a}function bW(a,e){const t=a[0],i=a[1],n=e[0],s=e[1],r=n[0],l=n[1],u=s[0],d=s[1],m=u-r,f=d-l,v=m===0&&f===0?0:(m*(t-r)+f*(i-l))/(m*m+f*f||0);let w,S;return v<=0?(w=r,S=l):v>=1?(w=u,S=d):(w=r+v*m,S=l+v*f),[w,S]}function Hy(a,e,t){return a?e.replace("{x}",a[0].toFixed(t)).replace("{y}",a[1].toFixed(t)):""}function ho(a,e){let t=!0;for(let i=a.length-1;i>=0;--i)if(a[i]!=e[i]){t=!1;break}return t}function e5(a,e){const t=Math.cos(e),i=Math.sin(e),n=a[0]*t-a[1]*i,s=a[1]*t+a[0]*i;return a[0]=n,a[1]=s,a}function GU(a,e){return a[0]*=e,a[1]*=e,a}function lf(a,e){const t=a[0]-e[0],i=a[1]-e[1];return t*t+i*i}function Cx(a,e){return Math.sqrt(lf(a,e))}function OU(a,e){return lf(a,bW(a,e))}function oI(a,e){if(e.canWrapX()){const t=Ti(e.getExtent()),i=vW(a,e,t);i&&(a[0]-=i*t)}return a}function vW(a,e,t){const i=e.getExtent();let n=0;return e.canWrapX()&&(a[0]<i[0]||a[0]>i[2])&&(t=t||Ti(i),n=Math.floor((a[0]-i[0])/t)),n}const Lm={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let PU=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Lm[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const lI=PU,H1=6378137,Sg=Math.PI*H1,BU=[-Sg,-Sg,Sg,Sg],NU=[-180,-85,180,85],Ov=H1*Math.log(Math.tan(Math.PI/2));class tg extends lI{constructor(e){super({code:e,units:"m",extent:BU,global:!0,worldExtent:NU,getPointResolution:function(t,i){return t/Math.cosh(i[1]/H1)}})}}const JL=[new tg("EPSG:3857"),new tg("EPSG:102100"),new tg("EPSG:102113"),new tg("EPSG:900913"),new tg("http://www.opengis.net/def/crs/EPSG/0/3857"),new tg("http://www.opengis.net/gml/srs/epsg.xml#3857")];function FU(a,e,t,i){const n=a.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=a.slice():e=new Array(n));for(let s=0;s<n;s+=i){e[s]=Sg*a[s]/180;let r=H1*Math.log(Math.tan(Math.PI*(+a[s+1]+90)/360));r>Ov?r=Ov:r<-Ov&&(r=-Ov),e[s+1]=r}return e}function DU(a,e,t,i){const n=a.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=a.slice():e=new Array(n));for(let s=0;s<n;s+=i)e[s]=180*a[s]/Sg,e[s+1]=360*Math.atan(Math.exp(a[s+1]/H1))/Math.PI-90;return e}const VU=6378137,QL=[-180,-90,180,90],ZU=Math.PI*VU/180;class Y_ extends lI{constructor(e,t){super({code:e,units:"degrees",extent:QL,axisOrientation:t,global:!0,metersPerUnit:ZU,worldExtent:QL})}}const eR=[new Y_("CRS:84"),new Y_("EPSG:4326","neu"),new Y_("urn:ogc:def:crs:OGC:1.3:CRS84"),new Y_("urn:ogc:def:crs:OGC:2:84"),new Y_("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Y_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Y_("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let aT={};function B2(a){return aT[a]||aT[a.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function zU(a,e){aT[a]=e}function X1(a){for(const e in a)delete a[e]}function Rm(a){let e;for(e in a)return!1;return!e}let Zg={};function km(a,e,t){const i=a.getCode(),n=e.getCode();i in Zg||(Zg[i]={}),Zg[i][n]=t}function N2(a,e){return a in Zg&&e in Zg[a]?Zg[a][e]:null}const Sx=.9996,Vl=.00669438,uI=Vl*Vl,cI=uI*Vl,cm=Vl/(1-Vl),tR=Math.sqrt(1-Vl),uf=(1-tR)/(1+tR),xW=uf*uf,t5=xW*uf,a5=t5*uf,wW=a5*uf,IW=1-Vl/4-3*uI/64-5*cI/256,UU=3*Vl/8+3*uI/32+45*cI/1024,HU=15*uI/256+45*cI/1024,XU=35*cI/3072,qU=3/2*uf-27/32*t5+269/512*wW,YU=21/16*xW-55/32*a5,KU=151/96*t5-417/128*wW,jU=1097/512*a5,Ax=6378137;function $U(a,e,t){const i=a-5e5,r=(t.north?e:e-1e7)/Sx/(Ax*IW),l=r+qU*Math.sin(2*r)+YU*Math.sin(4*r)+KU*Math.sin(6*r)+jU*Math.sin(8*r),u=Math.sin(l),d=u*u,m=Math.cos(l),f=u/m,v=f*f,w=v*v,S=1-Vl*d,T=Math.sqrt(1-Vl*d),M=Ax/T,G=(1-Vl)/S,P=cm*m**2,F=P*P,N=i/(M*Sx),V=N*N,K=V*N,te=K*N,J=te*N,ne=J*N,se=l-f/G*(V/2-te/24*(5+3*v+10*P-4*F-9*cm))+ne/720*(61+90*v+298*P+45*w-252*cm-3*F);let de=(N-K/6*(1+2*v+P)+J/120*(5-2*P+28*v-3*F+8*cm+24*w))/m;return de=tT(de+Js(CW(t.number)),-Math.PI,Math.PI),[Wd(de),Wd(se)]}const aR=-80,iR=84,JU=-180,QU=180;function eH(a,e,t){a=tT(a,JU,QU),e<aR?e=aR:e>iR&&(e=iR);const i=Js(e),n=Math.sin(i),s=Math.cos(i),r=n/s,l=r*r,u=l*l,d=Js(a),m=CW(t.number),f=Js(m),v=Ax/Math.sqrt(1-Vl*n**2),w=cm*s**2,S=s*tT(d-f,-Math.PI,Math.PI),T=S*S,M=T*S,G=M*S,P=G*S,F=P*S,N=Ax*(IW*i-UU*Math.sin(2*i)+HU*Math.sin(4*i)-XU*Math.sin(6*i)),V=Sx*v*(S+M/6*(1-l+w)+P/120*(5-18*l+u+72*w-58*cm))+5e5;let K=Sx*(N+v*r*(T/2+G/24*(5-l+9*w+4*w**2)+F/720*(61-58*l+u+600*w-330*cm)));return t.north||(K+=1e7),[V,K]}function CW(a){return(a-1)*6-180+3}const tH=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function SW(a){let e=0;for(const n of tH){const s=a.match(n);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function nR(a,e){return function(t,i,n,s){const r=t.length;n=n>1?n:2,s=s??n,i||(n>2?i=t.slice():i=new Array(r));for(let l=0;l<r;l+=s){const u=t[l],d=t[l+1],m=a(u,d,e);i[l]=m[0],i[l+1]=m[1]}return i}}function aH(a){return SW(a)?new lI({code:a,units:"m"}):null}function iH(a){const e=SW(a.getCode());return e?{forward:nR(eH,e),inverse:nR($U,e)}:null}const i5=63710088e-1;function Tx(a,e,t){t=t||i5;const i=Js(a[1]),n=Js(e[1]),s=(n-i)/2,r=Js(e[0]-a[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(r)*Math.sin(r)*Math.cos(i)*Math.cos(n);return 2*t*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function Pv(a,e){let t=0;const i=a.length;let n=a[i-1][0],s=a[i-1][1];for(let r=0;r<i;r++){const l=a[r][0],u=a[r][1];t+=Js(l-n)*(2+Math.sin(Js(s))+Math.sin(Js(u))),n=l,s=u}return t*e*e/2}function AW(a,e){e=e||{};const t=e.radius||i5,i=e.projection||"EPSG:3857",n=a.getType();n!=="GeometryCollection"&&(a=a.clone().transform(i,"EPSG:4326"));let s=0,r,l,u,d,m,f;switch(n){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(r=a.getCoordinates(),s=Math.abs(Pv(r[0],t)),u=1,d=r.length;u<d;++u)s-=Math.abs(Pv(r[u],t));break}case"MultiPolygon":{for(r=a.getCoordinates(),u=0,d=r.length;u<d;++u)for(l=r[u],s+=Math.abs(Pv(l[0],t)),m=1,f=l.length;m<f;++m)s-=Math.abs(Pv(l[m],t));break}case"GeometryCollection":{const v=a.getGeometries();for(u=0,d=v.length;u<d;++u)s+=AW(v[u],e);break}default:throw new Error("Unsupported geometry type: "+n)}return s}function nH(a,e,t,i){i=i||i5;const n=Js(a[1]),s=Js(a[0]),r=e/i,l=Math.asin(Math.sin(n)*Math.cos(r)+Math.cos(n)*Math.sin(r)*Math.cos(t)),u=s+Math.atan2(Math.sin(t)*Math.sin(r)*Math.cos(n),Math.cos(r)-Math.sin(n)*Math.sin(l));return[Wd(u),Wd(l)]}const rH=[iH],sH=[aH];let iT=!0;function oH(a){iT=!(a===void 0?!0:a)}function n5(a,e){if(e!==void 0){for(let t=0,i=a.length;t<i;++t)e[t]=a[t];e=e}else e=a.slice();return e}function TW(a,e){if(e!==void 0&&a!==e){for(let t=0,i=a.length;t<i;++t)e[t]=a[t];a=e}return a}function Ex(a){zU(a.getCode(),a),km(a,a,n5)}function lH(a){a.forEach(Ex)}function Ei(a){if(typeof a!="string")return a;const e=B2(a);if(e)return e;for(const t of sH){const i=t(a);if(i)return i}return null}function h1(a,e,t,i){a=Ei(a);let n;const s=a.getPointResolutionFunc();if(s){if(n=s(e,t),i&&i!==a.getUnits()){const r=a.getMetersPerUnit();r&&(n=n*r/Lm[i])}}else{const r=a.getUnits();if(r=="degrees"&&!i||i=="degrees")n=e;else{const l=Ef(a,Ei("EPSG:4326"));if(!l&&r!=="degrees")n=e*a.getMetersPerUnit();else{let d=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];d=l(d,d,2);const m=Tx(d.slice(0,2),d.slice(2,4)),f=Tx(d.slice(4,6),d.slice(6,8));n=(m+f)/2}const u=i?Lm[i]:a.getMetersPerUnit();u!==void 0&&(n/=u)}}return n}function nT(a){lH(a),a.forEach(function(e){a.forEach(function(t){e!==t&&km(e,t,n5)})})}function uH(a,e,t,i){a.forEach(function(n){e.forEach(function(s){km(n,s,t),km(s,n,i)})})}function r5(a,e){return a?typeof a=="string"?Ei(a):a:Ei(e)}function rT(a){return function(e,t,i,n){const s=e.length;i=i!==void 0?i:2,n=n??i,t=t!==void 0?t:new Array(s);for(let r=0;r<s;r+=n){const l=a(e.slice(r,r+i)),u=l.length;for(let d=0,m=n;d<m;++d)t[r+d]=d>=u?e[r+d]:l[d]}return t}}function cH(a,e,t,i){const n=Ei(a),s=Ei(e);km(n,s,rT(t)),km(s,n,rT(i))}function cf(a,e){const t=kr(a,e!==void 0?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Sd(i+180,360)-180),t}function zg(a,e){if(a===e)return!0;const t=a.getUnits()===e.getUnits();return(a.getCode()===e.getCode()||Ef(a,e)===n5)&&t}function Ef(a,e){const t=a.getCode(),i=e.getCode();let n=N2(t,i);if(n)return n;let s=null,r=null;for(const u of rH)s||(s=u(a)),r||(r=u(e));if(!s&&!r)return null;const l="EPSG:4326";if(r)if(s)n=sS(s.inverse,r.forward);else{const u=N2(t,l);u&&(n=sS(u,r.forward))}else{const u=N2(l,i);u&&(n=sS(s.inverse,u))}return n&&(Ex(a),Ex(e),km(a,e,n)),n}function sS(a,e){return function(t,i,n,s){return i=a(t,i,n,s),e(i,i,n,s)}}function Wm(a,e){const t=Ei(a),i=Ei(e);return Ef(t,i)}function kr(a,e,t){const i=Wm(e,t);if(!i){const n=Ei(e).getCode(),s=Ei(t).getCode();throw new Error(`No transform available between ${n} and ${s}`)}return i(a,void 0,a.length)}function dI(a,e,t,i){const n=Wm(e,t);return LU(a,n,void 0,i)}let dH=null;function hH(){return dH}function Gm(a,e){return a}function lr(a,e){return iT&&!ho(a,[0,0])&&a[0]>=-180&&a[0]<=180&&a[1]>=-90&&a[1]<=90&&(iT=!1,_W("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),a}function hI(a,e){return a}function Ol(a,e){return a}function rR(a,e,t){return function(i){let n,s;if(a.canWrapX()){const r=a.getExtent(),l=Ti(r);i=i.slice(0),s=vW(i,a,l),s&&(i[0]=i[0]-s*l),i[0]=Nn(i[0],r[0],r[2]),i[1]=Nn(i[1],r[1],r[3]),n=t(i)}else n=t(i);return s&&e.canWrapX()&&(n[0]+=s*Ti(e.getExtent())),n}}function _H(){nT(JL),nT(eR),uH(eR,JL,FU,DU)}_H();const Xs={ADD:"add",REMOVE:"remove"},Om={PROPERTYCHANGE:"propertychange"},za={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class mH{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const _I=mH;function pH(a,e,t){let i,n;t=t||pc;let s=0,r=a.length,l=!1;for(;s<r;)i=s+(r-s>>1),n=+t(a[i],e),n<0?s=i+1:(r=i,l=!n);return l?s:~s}function pc(a,e){return a>e?1:a<e?-1:0}function gH(a,e){return a<e?1:a>e?-1:0}function mI(a,e,t){if(a[0]<=e)return 0;const i=a.length;if(e<=a[i-1])return i-1;if(typeof t=="function"){for(let n=1;n<i;++n){const s=a[n];if(s===e)return n;if(s<e)return t(e,a[n-1],s)>0?n-1:n}return i-1}if(t>0){for(let n=1;n<i;++n)if(a[n]<e)return n-1;return i-1}if(t<0){for(let n=1;n<i;++n)if(a[n]<=e)return n;return i-1}for(let n=1;n<i;++n){if(a[n]==e)return n;if(a[n]<e)return a[n-1]-e<e-a[n]?n-1:n}return i-1}function fH(a,e,t){for(;e<t;){const i=a[e];a[e]=a[t],a[t]=i,++e,--t}}function rn(a,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let n=0;n<i;n++)a[a.length]=t[n]}function Zd(a,e){const t=a.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(a[i]!==e[i])return!1;return!0}function yH(a,e,t){const i=e||pc;return a.every(function(n,s){if(s===0)return!0;const r=i(a[s-1],n);return!(r>0||t&&r===0)})}function df(){return!0}function Mf(){return!1}function _1(){}function EW(a){let e,t,i;return function(){const n=Array.prototype.slice.call(arguments);return(!t||this!==i||!Zd(n,t))&&(i=this,t=n,e=a.apply(this,arguments)),e}}function MW(a){function e(){let t;try{t=a()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}class bH{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Il=bH;class vH extends _I{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),n=i[e]||(i[e]=[]);n.includes(t)||n.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const s=t?new Il(e):e;s.target||(s.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});i in r||(r[i]=0,l[i]=0),++r[i];let u;for(let d=0,m=n.length;d<m;++d)if("handleEvent"in n[d]?u=n[d].handleEvent(s):u=n[d].call(this,s),u===!1||s.propagationStopped){u=!1;break}if(--r[i]===0){let d=l[i];for(delete l[i];d--;)this.removeEventListener(i,_1);delete r[i]}return u}disposeInternal(){this.listeners_&&X1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const n=i.indexOf(t);n!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[n]=_1,++this.pendingRemovals_[e]):(i.splice(n,1),i.length===0&&delete this.listeners_[e]))}}const q1=vH;function ba(a,e,t,i,n){if(n){const r=t;t=function(l){return a.removeEventListener(e,t),r.call(i??this,l)}}else i&&i!==a&&(t=t.bind(i));const s={target:a,type:e,listener:t};return a.addEventListener(e,t),s}function Mx(a,e,t,i){return ba(a,e,t,i,!0)}function _n(a){a&&a.target&&(a.target.removeEventListener(a.type,a.listener),X1(a))}class pI extends q1{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(za.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=ba(this,e[s],t);return n}return ba(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const n=e.length;i=new Array(n);for(let s=0;s<n;++s)i[s]=Mx(this,e[s],t)}else i=Mx(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)wm(i);else if(Array.isArray(e))for(let n=0,s=e.length;n<s;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)}}pI.prototype.on;pI.prototype.once;pI.prototype.un;function wm(a){if(Array.isArray(a))for(let e=0,t=a.length;e<t;++e)_n(a[e]);else _n(a)}const LW=pI;function ka(){throw new Error("Unimplemented abstract method.")}let xH=0;function Ia(a){return a.ol_uid||(a.ol_uid=String(++xH))}const OEe="10.5.0";class sR extends Il{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class wH extends LW{constructor(e){super(),this.on,this.once,this.un,Ia(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new sR(i,e,t)),i=Om.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new sR(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const n=this.values_||(this.values_={});if(i)n[e]=t;else{const s=n[e];n[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Rm(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const Yl=wH,oR={LENGTH:"length"};class Bv extends Il{constructor(e,t,i){super(e),this.element=t,this.index=i}}class IH extends Yl{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,n=t.length;i<n;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(oR.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Bv(Xs.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,n=t.length;i<n;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Bv(Xs.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const n=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Bv(Xs.REMOVE,n,e)),this.dispatchEvent(new Bv(Xs.ADD,t,e))}updateLength_(){this.set(oR.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}const Pl=IH;class CH extends Il{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}const pg=CH;class SH extends pg{constructor(e,t,i,n,s,r){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0?n:!1,this.activePointers=r}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const _d=SH,Pi={SINGLECLICK:"singleclick",CLICK:za.CLICK,DBLCLICK:za.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Pm=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",AH=Pm.includes("safari")&&!Pm.includes("chrom");AH&&(Pm.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Pm));const TH=Pm.includes("webkit")&&!Pm.includes("edge"),s5=Pm.includes("macintosh"),RW=typeof devicePixelRatio<"u"?devicePixelRatio:1,kW=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,o5=typeof Image<"u"&&Image.prototype.decode,WW=typeof createImageBitmap=="function",GW=function(){let a=!1;try{const e=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return a}(),m1={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class EH extends q1{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=ba(i,m1.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ba(i,m1.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(za.TOUCHMOVE,this.boundHandleTouchMove_,GW?{passive:!1}:!1)}emulateClick_(e){let t=new _d(Pi.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new _d(Pi.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new _d(Pi.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Pi.POINTERUP||t.type==Pi.POINTERCANCEL){delete this.trackedTouches_[i];for(const n in this.trackedTouches_)if(this.trackedTouches_[n].target!==t.target){delete this.trackedTouches_[n];break}}else(t.type==Pi.POINTERDOWN||t.type==Pi.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new _d(Pi.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(_n),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new _d(Pi.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ba(i,Pi.POINTERMOVE,this.handlePointerMove_,this),ba(i,Pi.POINTERUP,this.handlePointerUp_,this),ba(this.element_,Pi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(ba(this.element_.getRootNode(),Pi.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new _d(Pi.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new _d(Pi.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(_n(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(za.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(_n(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(_n),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MH=EH,md={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ds={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Ra={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function sn(a,e){if(!a)throw new Error(e)}const Lx=1/0;class LH{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,X1(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(e){sn(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Lx?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,n=t.length,s=t[e],r=i[e],l=e;for(;e<n>>1;){const u=this.getLeftChildIndex_(e),d=this.getRightChildIndex_(e),m=d<n&&i[d]<i[u]?d:u;t[e]=t[m],i[e]=i[m],e=m}t[e]=s,i[e]=r,this.siftDown_(l,e)}siftDown_(e,t){const i=this.elements_,n=this.priorities_,s=i[t],r=n[t];for(;t>e;){const l=this.getParentIndex_(t);if(n[l]>r)i[t]=i[l],n[t]=n[l],t=l;else break}i[t]=s,n[t]=r}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let n=0;const s=t.length;let r,l,u;for(l=0;l<s;++l)r=t[l],u=e(r),u==Lx?delete this.queuedElements_[this.keyFunction_(r)]:(i[n]=u,t[n++]=r);t.length=n,i.length=n,this.heapify_()}}const RH=LH;class kH extends RH{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(za.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===Ra.LOADED||i===Ra.ERROR||i===Ra.EMPTY){i!==Ra.ERROR&&t.removeEventListener(za.CHANGE,this.boundHandleTileChange_);const n=t.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const n=this.dequeue()[0],s=n.getKey();n.getState()===Ra.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,n.load())}}}const WH=kH;function GH(a,e,t,i,n){if(!a||!(t in a.wantedTiles)||!a.wantedTiles[t][e.getKey()])return Lx;const s=a.viewState.center,r=i[0]-s[0],l=i[1]-s[1];return 65536*Math.log(n)+Math.sqrt(r*r+l*l)/n}const Jn={ANIMATING:0,INTERACTING:1},su={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function lR(a,e,t){return function(i,n,s,r,l){if(!i)return;if(!n&&!e)return i;const u=e?0:s[0]*n,d=e?0:s[1]*n,m=l?l[0]:0,f=l?l[1]:0;let v=a[0]+u/2+m,w=a[2]-u/2+m,S=a[1]+d/2+f,T=a[3]-d/2+f;v>w&&(v=(w+v)/2,w=v),S>T&&(S=(T+S)/2,T=S);let M=Nn(i[0],v,w),G=Nn(i[1],S,T);if(r&&t&&n){const P=30*n;M+=-P*Math.log(1+Math.max(0,v-i[0])/P)+P*Math.log(1+Math.max(0,i[0]-w)/P),G+=-P*Math.log(1+Math.max(0,S-i[1])/P)+P*Math.log(1+Math.max(0,i[1]-T)/P)}return[M,G]}}function OH(a){return a}function OW(a){return Math.pow(a,3)}function Lf(a){return 1-OW(1-a)}function PH(a){return 3*a*a-2*a*a*a}function BH(a){return a}const PW=new Array(6);function $o(){return[1,0,0,1,0,0]}function uR(a){return u5(a,1,0,0,1,0,0)}function l5(a,e){const t=a[0],i=a[1],n=a[2],s=a[3],r=a[4],l=a[5],u=e[0],d=e[1],m=e[2],f=e[3],v=e[4],w=e[5];return a[0]=t*u+n*d,a[1]=i*u+s*d,a[2]=t*m+n*f,a[3]=i*m+s*f,a[4]=t*v+n*w+r,a[5]=i*v+s*w+l,a}function u5(a,e,t,i,n,s,r){return a[0]=e,a[1]=t,a[2]=i,a[3]=n,a[4]=s,a[5]=r,a}function NH(a,e){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4],a[5]=e[5],a}function Mr(a,e){const t=e[0],i=e[1];return e[0]=a[0]*t+a[2]*i+a[4],e[1]=a[1]*t+a[3]*i+a[5],e}function F2(a,e,t){return l5(a,u5(PW,e,0,0,t,0,0))}function FH(a,e,t){return l5(a,u5(PW,1,0,0,1,e,t))}function Su(a,e,t,i,n,s,r,l){const u=Math.sin(s),d=Math.cos(s);return a[0]=i*d,a[1]=n*u,a[2]=-i*u,a[3]=n*d,a[4]=r*i*d-l*i*u+e,a[5]=r*n*u+l*n*d+t,a}function BW(a,e){const t=DH(e);sn(t!==0,"Transformation matrix cannot be inverted");const i=e[0],n=e[1],s=e[2],r=e[3],l=e[4],u=e[5];return a[0]=r/t,a[1]=-n/t,a[2]=-s/t,a[3]=i/t,a[4]=(s*u-r*l)/t,a[5]=-(i*u-n*l)/t,a}function DH(a){return a[0]*a[3]-a[1]*a[2]}const VH=[1e5,1e5,1e5,1e5,2,2];function ZH(a){return"matrix("+a.join(", ")+")"}function cR(a){return a.substring(7,a.length-1).split(",").map(parseFloat)}function zH(a,e){const t=cR(a),i=cR(e);for(let n=0;n<6;++n)if(Math.round((t[n]-i[n])*VH[n])!==0)return!1;return!0}function Ad(a,e,t,i,n,s,r){s=s||[],r=r||2;let l=0;for(let u=e;u<t;u+=i){const d=a[u],m=a[u+1];s[l++]=n[0]*d+n[2]*m+n[4],s[l++]=n[1]*d+n[3]*m+n[5];for(let f=2;f<r;f++)s[l++]=a[u+f]}return s&&s.length!=l&&(s.length=l),s}function c5(a,e,t,i,n,s,r){r=r||[];const l=Math.cos(n),u=Math.sin(n),d=s[0],m=s[1];let f=0;for(let v=e;v<t;v+=i){const w=a[v]-d,S=a[v+1]-m;r[f++]=d+w*l-S*u,r[f++]=m+w*u+S*l;for(let T=v+2;T<v+i;++T)r[f++]=a[T]}return r&&r.length!=f&&(r.length=f),r}function UH(a,e,t,i,n,s,r,l){l=l||[];const u=r[0],d=r[1];let m=0;for(let f=e;f<t;f+=i){const v=a[f]-u,w=a[f+1]-d;l[m++]=u+n*v,l[m++]=d+s*w;for(let S=f+2;S<f+i;++S)l[m++]=a[S]}return l&&l.length!=m&&(l.length=m),l}function HH(a,e,t,i,n,s,r){r=r||[];let l=0;for(let u=e;u<t;u+=i){r[l++]=a[u]+n,r[l++]=a[u+1]+s;for(let d=u+2;d<u+i;++d)r[l++]=a[d]}return r&&r.length!=l&&(r.length=l),r}const dR=$o(),XH=[NaN,NaN];class qH extends Yl{constructor(){super(),this.extent_=xl(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=EW((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ka()}closestPointXY(e,t,i,n){return ka()}containsXY(e,t){return this.closestPointXY(e,t,XH,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ka()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Af(t),this.extentRevision_=this.getRevision()}return EU(this.extent_,e)}rotate(e,t){ka()}scale(e,t,i){ka()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ka()}getType(){return ka()}applyTransform(e){ka()}intersectsExtent(e){return ka()}translate(e,t){ka()}transform(e,t){const i=Ei(e),n=i.getUnits()=="tile-pixels"?function(s,r,l){const u=i.getExtent(),d=i.getWorldExtent(),m=vr(d)/vr(u);Su(dR,d[0],d[3],m,-m,0,0,0);const f=Ad(s,0,s.length,l,dR,r),v=Wm(i,t);return v?v(f,f,l):f}:Wm(i,t);return this.applyTransform(n),this}}const NW=qH;class YH extends NW{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return $4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ka()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Rx(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ka()}setLayout(e,t,i){let n;if(e)n=Rx(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}n=t.length,e=jm(n)}this.layout=e,this.stride=n}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const n=this.getStride();c5(i,0,i.length,n,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Cu(this.getExtent()));const n=this.getFlatCoordinates();if(n){const s=this.getStride();UH(n,0,n.length,s,e,t,i,n),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const n=this.getStride();HH(i,0,i.length,n,e,t,i),this.changed()}}}function jm(a){let e;return a==2?e="XY":a==3?e="XYZ":a==4&&(e="XYZM"),e}function Rx(a){let e;return a=="XY"?e=2:a=="XYZ"||a=="XYM"?e=3:a=="XYZM"&&(e=4),e}function KH(a,e,t){const i=a.getFlatCoordinates();if(!i)return null;const n=a.getStride();return Ad(i,0,i.length,n,e,t)}const r_=YH;function FW(a,e,t,i){let n=0;const s=a[t-i],r=a[t-i+1];let l=0,u=0;for(;e<t;e+=i){const d=a[e]-s,m=a[e+1]-r;n+=u*d-l*m,l=d,u=m}return n/2}function DW(a,e,t,i){let n=0;for(let s=0,r=t.length;s<r;++s){const l=t[s];n+=FW(a,e,l,i),e=l}return n}function jH(a,e,t,i){let n=0;for(let s=0,r=t.length;s<r;++s){const l=t[s];n+=DW(a,e,l,i),e=l[l.length-1]}return n}function hR(a,e,t,i,n,s,r){const l=a[e],u=a[e+1],d=a[t]-l,m=a[t+1]-u;let f;if(d===0&&m===0)f=e;else{const v=((n-l)*d+(s-u)*m)/(d*d+m*m);if(v>1)f=t;else if(v>0){for(let w=0;w<i;++w)r[w]=gl(a[e+w],a[t+w],v);r.length=i;return}else f=e}for(let v=0;v<i;++v)r[v]=a[f+v];r.length=i}function d5(a,e,t,i,n){let s=a[e],r=a[e+1];for(e+=i;e<t;e+=i){const l=a[e],u=a[e+1],d=Cd(s,r,l,u);d>n&&(n=d),s=l,r=u}return n}function h5(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){const l=t[s];n=d5(a,e,l,i,n),e=l}return n}function $H(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){const l=t[s];n=h5(a,e,l,i,n),e=l[l.length-1]}return n}function _5(a,e,t,i,n,s,r,l,u,d,m){if(e==t)return d;let f,v;if(n===0){if(v=Cd(r,l,a[e],a[e+1]),v<d){for(f=0;f<i;++f)u[f]=a[e+f];return u.length=i,v}return d}m=m||[NaN,NaN];let w=e+i;for(;w<t;)if(hR(a,w-i,w,i,r,l,m),v=Cd(r,l,m[0],m[1]),v<d){for(d=v,f=0;f<i;++f)u[f]=m[f];u.length=i,w+=i}else w+=i*Math.max((Math.sqrt(v)-Math.sqrt(d))/n|0,1);if(s&&(hR(a,t-i,e,i,r,l,m),v=Cd(r,l,m[0],m[1]),v<d)){for(d=v,f=0;f<i;++f)u[f]=m[f];u.length=i}return d}function m5(a,e,t,i,n,s,r,l,u,d,m){m=m||[NaN,NaN];for(let f=0,v=t.length;f<v;++f){const w=t[f];d=_5(a,e,w,i,n,s,r,l,u,d,m),e=w}return d}function JH(a,e,t,i,n,s,r,l,u,d,m){m=m||[NaN,NaN];for(let f=0,v=t.length;f<v;++f){const w=t[f];d=m5(a,e,w,i,n,s,r,l,u,d,m),e=w[w.length-1]}return d}function VW(a,e,t,i){for(let n=0,s=t.length;n<s;++n)a[e++]=t[n];return e}function gI(a,e,t,i){for(let n=0,s=t.length;n<s;++n){const r=t[n];for(let l=0;l<i;++l)a[e++]=r[l]}return e}function Y1(a,e,t,i,n){n=n||[];let s=0;for(let r=0,l=t.length;r<l;++r){const u=gI(a,e,t[r],i);n[s++]=u,e=u}return n.length=s,n}function ZW(a,e,t,i,n){n=n||[];let s=0;for(let r=0,l=t.length;r<l;++r){const u=Y1(a,e,t[r],i,n[s]);u.length===0&&(u[0]=e),n[s++]=u,e=u[u.length-1]}return n.length=s,n}function Ph(a,e,t,i,n){n=n!==void 0?n:[];let s=0;for(let r=e;r<t;r+=i)n[s++]=a.slice(r,r+i);return n.length=s,n}function p1(a,e,t,i,n){n=n!==void 0?n:[];let s=0;for(let r=0,l=t.length;r<l;++r){const u=t[r];n[s++]=Ph(a,e,u,i,n[s]),e=u}return n.length=s,n}function sT(a,e,t,i,n){n=n!==void 0?n:[];let s=0;for(let r=0,l=t.length;r<l;++r){const u=t[r];n[s++]=u.length===1&&u[0]===e?[]:p1(a,e,u,i,n[s]),e=u[u.length-1]}return n.length=s,n}function fI(a,e,t,i,n,s,r){const l=(t-e)/i;if(l<3){for(;e<t;e+=i)s[r++]=a[e],s[r++]=a[e+1];return r}const u=new Array(l);u[0]=1,u[l-1]=1;const d=[e,t-i];let m=0;for(;d.length>0;){const f=d.pop(),v=d.pop();let w=0;const S=a[v],T=a[v+1],M=a[f],G=a[f+1];for(let P=v+i;P<f;P+=i){const F=a[P],N=a[P+1],V=RU(F,N,S,T,M,G);V>w&&(m=P,w=V)}w>n&&(u[(m-e)/i]=1,v+i<m&&d.push(v,m),m+i<f&&d.push(m,f))}for(let f=0;f<l;++f)u[f]&&(s[r++]=a[e+f*i],s[r++]=a[e+f*i+1]);return r}function zW(a,e,t,i,n,s,r,l){for(let u=0,d=t.length;u<d;++u){const m=t[u];r=fI(a,e,m,i,n,s,r),l.push(r),e=m}return r}function rm(a,e){return e*Math.round(a/e)}function QH(a,e,t,i,n,s,r){if(e==t)return r;let l=rm(a[e],n),u=rm(a[e+1],n);e+=i,s[r++]=l,s[r++]=u;let d,m;do if(d=rm(a[e],n),m=rm(a[e+1],n),e+=i,e==t)return s[r++]=d,s[r++]=m,r;while(d==l&&m==u);for(;e<t;){const f=rm(a[e],n),v=rm(a[e+1],n);if(e+=i,f==d&&v==m)continue;const w=d-l,S=m-u,T=f-l,M=v-u;if(w*M==S*T&&(w<0&&T<w||w==T||w>0&&T>w)&&(S<0&&M<S||S==M||S>0&&M>S)){d=f,m=v;continue}s[r++]=d,s[r++]=m,l=d,u=m,d=f,m=v}return s[r++]=d,s[r++]=m,r}function p5(a,e,t,i,n,s,r,l){for(let u=0,d=t.length;u<d;++u){const m=t[u];r=QH(a,e,m,i,n,s,r),l.push(r),e=m}return r}function eX(a,e,t,i,n,s,r,l){for(let u=0,d=t.length;u<d;++u){const m=t[u],f=[];r=p5(a,e,m,i,n,s,r,f),l.push(f),e=m[m.length-1]}return r}class kx extends r_{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new kx(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,n){return n<Ym(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(d5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,n))}getArea(){return FW(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ph(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=fI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new kx(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=gI(this.flatCoordinates,0,e,this.stride),this.changed()}}const _R=kx;let tX=class UW extends r_{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new UW(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){const s=this.flatCoordinates,r=Cd(e,t,s[0],s[1]);if(r<n){const l=this.stride;for(let u=0;u<l;++u)i[u]=s[u];return i.length=l,r}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return W0(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return j4(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=VW(this.flatCoordinates,0,e,this.stride),this.changed()}};const Qn=tX;function aX(a,e,t,i,n){return!J4(n,function(r){return!dm(a,e,t,i,r[0],r[1])})}function dm(a,e,t,i,n,s){let r=0,l=a[t-i],u=a[t-i+1];for(;e<t;e+=i){const d=a[e],m=a[e+1];u<=s?m>s&&(d-l)*(s-u)-(n-l)*(m-u)>0&&r++:m<=s&&(d-l)*(s-u)-(n-l)*(m-u)<0&&r--,l=d,u=m}return r!==0}function g5(a,e,t,i,n,s){if(t.length===0||!dm(a,e,t[0],i,n,s))return!1;for(let r=1,l=t.length;r<l;++r)if(dm(a,t[r-1],t[r],i,n,s))return!1;return!0}function iX(a,e,t,i,n,s){if(t.length===0)return!1;for(let r=0,l=t.length;r<l;++r){const u=t[r];if(g5(a,e,u,i,n,s))return!0;e=u[u.length-1]}return!1}function f5(a,e,t,i,n,s,r){let l,u,d,m,f,v,w;const S=n[s+1],T=[];for(let P=0,F=t.length;P<F;++P){const N=t[P];for(m=a[N-i],v=a[N-i+1],l=e;l<N;l+=i)f=a[l],w=a[l+1],(S<=v&&w<=S||v<=S&&S<=w)&&(d=(S-v)/(w-v)*(f-m)+m,T.push(d)),m=f,v=w}let M=NaN,G=-1/0;for(T.sort(pc),m=T[0],l=1,u=T.length;l<u;++l){f=T[l];const P=Math.abs(f-m);P>G&&(d=(m+f)/2,g5(a,e,t,i,d,S)&&(M=d,G=P)),m=f}return isNaN(M)&&(M=n[s]),r?(r.push(M,S,G),r):[M,S,G]}function HW(a,e,t,i,n){let s=[];for(let r=0,l=t.length;r<l;++r){const u=t[r];s=f5(a,e,u,i,n,2*r,s),e=u[u.length-1]}return s}function XW(a,e,t,i,n){let s;for(e+=i;e<t;e+=i)if(s=n(a.slice(e-i,e),a.slice(e,e+i)),s)return s;return!1}function yI(a,e,t,i,n,s){return s=s??pW(xl(),a,e,t,i),Rr(n,s)?s[0]>=n[0]&&s[2]<=n[2]||s[1]>=n[1]&&s[3]<=n[3]?!0:XW(a,e,t,i,function(r,l){return MU(n,r,l)}):!1}function nX(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){if(yI(a,e,t[s],i,n))return!0;e=t[s]}return!1}function qW(a,e,t,i,n){return!!(yI(a,e,t,i,n)||dm(a,e,t,i,n[0],n[1])||dm(a,e,t,i,n[0],n[3])||dm(a,e,t,i,n[2],n[1])||dm(a,e,t,i,n[2],n[3]))}function YW(a,e,t,i,n){if(!qW(a,e,t[0],i,n))return!1;if(t.length===1)return!0;for(let s=1,r=t.length;s<r;++s)if(aX(a,t[s-1],t[s],i,n)&&!yI(a,t[s-1],t[s],i,n))return!1;return!0}function rX(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){const l=t[s];if(YW(a,e,l,i,n))return!0;e=l[l.length-1]}return!1}function sX(a,e,t,i){for(;e<t-i;){for(let n=0;n<i;++n){const s=a[e+n];a[e+n]=a[t-i+n],a[t-i+n]=s}e+=i,t-=i}}function y5(a,e,t,i){let n=0,s=a[t-i],r=a[t-i+1];for(;e<t;e+=i){const l=a[e],u=a[e+1];n+=(l-s)*(u+r),s=l,r=u}return n===0?void 0:n>0}function b5(a,e,t,i,n){n=n!==void 0?n:!1;for(let s=0,r=t.length;s<r;++s){const l=t[s],u=y5(a,e,l,i);if(s===0){if(n&&u||!n&&!u)return!1}else if(n&&!u||!n&&u)return!1;e=l}return!0}function KW(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){const l=t[s];if(!b5(a,e,l,i,n))return!1;l.length&&(e=l[l.length-1])}return!0}function Wx(a,e,t,i,n){n=n!==void 0?n:!1;for(let s=0,r=t.length;s<r;++s){const l=t[s],u=y5(a,e,l,i);(s===0?n&&u||!n&&!u:n&&!u||!n&&u)&&sX(a,e,l,i),e=l}return e}function oT(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s)e=Wx(a,e,t[s],i,n);return e}function oX(a,e){const t=[];let i=0,n=0,s;for(let r=0,l=e.length;r<l;++r){const u=e[r],d=y5(a,i,u,2);if(s===void 0&&(s=d),d===s)t.push(e.slice(n,r+1));else{if(t.length===0)continue;t[t.length-1].push(e[n])}n=r+1,i=u}return t}class Bm extends r_{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?rn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Bm(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<Ym(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(h5(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),m5(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,n))}containsXY(e,t){return g5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return DW(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Wx(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,p1(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Cu(this.getExtent());this.flatInteriorPoint_=f5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Qn(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new _R(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,n=[];let s=0;for(let r=0,l=i.length;r<l;++r){const u=i[r],d=new _R(t.slice(s,u),e);n.push(d),s=u}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;b5(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Wx(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=p5(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Bm(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return YW(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Y1(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const Au=Bm;function lX(a,e,t,i){t=t||32;const n=[];for(let s=0;s<t;++s)rn(n,nH(a,e,2*Math.PI*s/t,i));return n.push(n[0],n[1]),new Bm(n,"XY",[n.length])}function lT(a){if(Km(a))throw new Error("Cannot create polygon from empty extent");const e=a[0],t=a[1],i=a[2],n=a[3],s=[e,t,e,n,i,n,i,t,e,t];return new Bm(s,"XY",[s.length])}function jW(a,e,t){e=e||32;const i=a.getStride(),n=a.getLayout(),s=a.getCenter(),r=i*(e+1),l=new Array(r);for(let m=0;m<r;m+=i){l[m]=0,l[m+1]=0;for(let f=2;f<i;f++)l[m+f]=s[f]}const u=[l.length],d=new Bm(l,n,u);return uX(d,s,a.getRadius(),t),d}function uX(a,e,t,i){const n=a.getFlatCoordinates(),s=a.getStride(),r=n.length/s-1,l=i||0;for(let u=0;u<=r;++u){const d=u*s,m=l+Sd(u,r)*2*Math.PI/r;n[d]=e[0]+t*Math.cos(m),n[d+1]=e[1]+t*Math.sin(m)}a.changed()}function v5(a,e,t,i){const n=Ti(e)/t[0],s=vr(e)/t[1];return i?Math.min(a,Math.max(n,s)):Math.min(a,Math.min(n,s))}function x5(a,e,t){let i=Math.min(a,e);const n=50;return i*=Math.log(1+n*Math.max(0,a/e-1))/n+1,t&&(i=Math.max(i,t),i/=Math.log(1+n*Math.max(0,t/a-1))/n+1),Nn(i,t/2,e*2)}function cX(a,e,t,i){return e=e!==void 0?e:!0,function(n,s,r,l){if(n!==void 0){const u=a[0],d=a[a.length-1],m=t?v5(u,t,r,i):u;if(l)return e?x5(n,m,d):Nn(n,d,m);const f=Math.min(m,n),v=Math.floor(mI(a,f,s));return a[v]>m&&v<a.length-1?a[v+1]:a[v]}}}function dX(a,e,t,i,n,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(r,l,u,d){if(r!==void 0){const m=n?v5(e,n,u,s):e;if(d)return i?x5(r,m,t):Nn(r,t,m);const f=1e-9,v=Math.ceil(Math.log(e/m)/Math.log(a)-f),w=-l*(.5-f)+.5,S=Math.min(m,r),T=Math.floor(Math.log(e/S)/Math.log(a)+w),M=Math.max(v,T),G=e/Math.pow(a,M);return Nn(G,t,m)}}}function mR(a,e,t,i,n){return t=t!==void 0?t:!0,function(s,r,l,u){if(s!==void 0){const d=i?v5(a,i,l,n):a;return!t||!u?Nn(s,e,d):x5(s,d,e)}}}function w5(a){if(a!==void 0)return 0}function pR(a){if(a!==void 0)return a}function hX(a){const e=2*Math.PI/a;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function _X(a){const e=a===void 0?Js(5):a;return function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t}}const mX=42,I5=256,oS=0;class pX extends Yl{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=r5(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&oH(),e.center&&(e.center=lr(e.center,this.projection_)),e.extent&&(e.extent=Ol(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const l in su)delete t[l];this.setProperties(t,!0);const i=fX(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const n=gX(e),s=i.constraint,r=yX(e);this.constraints_={center:n,resolution:s,rotation:r},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const n=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),r=s/2*(n[3]-t[3]+t[1]-n[1]),l=s/2*(n[0]-t[0]+t[2]-n[2]);this.setCenterInternal([i[0]+r,i[1]-l])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let n=arguments[i];n.center&&(n=Object.assign({},n),n.center=lr(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=lr(n.anchor,this.getProjection())),t[i]=n}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let n=0;for(;n<t&&!this.isDef();++n){const m=arguments[n];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(n===t){i&&Nv(i,!0);return}let s=Date.now(),r=this.targetCenter_.slice(),l=this.targetResolution_,u=this.targetRotation_;const d=[];for(;n<t;++n){const m=arguments[n],f={start:s,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||PH,callback:i};if(m.center&&(f.sourceCenter=r,f.targetCenter=m.center.slice(),r=f.targetCenter),m.zoom!==void 0?(f.sourceResolution=l,f.targetResolution=this.getResolutionForZoom(m.zoom),l=f.targetResolution):m.resolution&&(f.sourceResolution=l,f.targetResolution=m.resolution,l=f.targetResolution),m.rotation!==void 0){f.sourceRotation=u;const v=Sd(m.rotation-u+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=u+v,u=f.targetRotation}bX(f)?f.complete=!0:s+=f.duration,d.push(f)}this.animations_.push(d),this.setHint(Jn.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Jn.ANIMATING]>0}getInteracting(){return this.hints_[Jn.INTERACTING]>0}cancelAnimations(){this.setHint(Jn.ANIMATING,-this.hints_[Jn.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const n=this.animations_[t];if(n[0].callback&&Nv(n[0].callback,!1),!e)for(let s=0,r=n.length;s<r;++s){const l=n[s];if(!l.complete){e=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let s=!0;for(let r=0,l=n.length;r<l;++r){const u=n[r];if(u.complete)continue;const d=e-u.start;let m=u.duration>0?d/u.duration:1;m>=1?(u.complete=!0,m=1):s=!1;const f=u.easing(m);if(u.sourceCenter){const v=u.sourceCenter[0],w=u.sourceCenter[1],S=u.targetCenter[0],T=u.targetCenter[1];this.nextCenter_=u.targetCenter;const M=v+f*(S-v),G=w+f*(T-w);this.targetCenter_=[M,G]}if(u.sourceResolution&&u.targetResolution){const v=f===1?u.targetResolution:u.sourceResolution+f*(u.targetResolution-u.sourceResolution);if(u.anchor){const w=this.getViewportSize_(this.getRotation()),S=this.constraints_.resolution(v,0,w,!0);this.targetCenter_=this.calculateCenterZoom(S,u.anchor)}this.nextResolution_=u.targetResolution,this.targetResolution_=v,this.applyTargetState_(!0)}if(u.sourceRotation!==void 0&&u.targetRotation!==void 0){const v=f===1?Sd(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+f*(u.targetRotation-u.sourceRotation);if(u.anchor){const w=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(w,u.anchor)}this.nextRotation_=u.targetRotation,this.targetRotation_=v}if(this.applyTargetState_(!0),t=!0,!u.complete)break}if(s){this.animations_[i]=null,this.setHint(Jn.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const r=n[0].callback;r&&Nv(r,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const n=this.getCenterInternal();return n!==void 0&&(i=[n[0]-t[0],n[1]-t[1]],e5(i,e-this.getRotation()),WU(i,t)),i}calculateCenterZoom(e,t){let i;const n=this.getCenterInternal(),s=this.getResolution();if(n!==void 0&&s!==void 0){const r=t[0]-e*(t[0]-n[0])/s,l=t[1]-e*(t[1]-n[1])/s;i=[r,l]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],n=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(n*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(n*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Gm(e,this.getProjection())}getCenterInternal(){return this.get(su.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return hI(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();sn(t,"The view center is not defined");const i=this.getResolution();sn(i!==void 0,"The view resolution is not defined");const n=this.getRotation();return sn(n!==void 0,"The view rotation is not defined"),d1(t,i,n,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(su.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ol(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=Ti(e)/t[0],n=vr(e)/t[1];return Math.max(i,n)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(t/i)/Math.log(e);return function(s){return t/Math.pow(e,s*n)}}getRotation(){return this.get(su.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/t;return function(r){return Math.log(i/r)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const r=this.getViewportSizeMinusPadding_();n=lS(n,this.getViewportSize_(),[r[0]/2+s[3],r[1]/2+s[0]],t,i)}return{center:n.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,n;if(this.resolutions_){const s=mI(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?n=2:n=i/this.resolutions_[s+1]}else i=this.maxResolution_,n=this.zoomFactor_;return t+Math.log(i/e)/Math.log(n)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=Nn(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(n,Nn(e-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(sn(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){sn(!Km(e),"Cannot fit empty extent provided as `geometry`");const n=Ol(e,this.getProjection());i=lT(n)}else if(e.getType()==="Circle"){const n=Ol(e.getExtent(),this.getProjection());i=lT(n),i.rotate(this.getRotation(),Cu(n))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),n=Math.sin(-t),s=e.getFlatCoordinates(),r=e.getStride();let l=1/0,u=1/0,d=-1/0,m=-1/0;for(let f=0,v=s.length;f<v;f+=r){const w=s[f]*i-s[f+1]*n,S=s[f]*n+s[f+1]*i;l=Math.min(l,w),u=Math.min(u,S),d=Math.max(d,w),m=Math.max(m,S)}return[l,u,d,m]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const n=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let r;t.minResolution!==void 0?r=t.minResolution:t.maxZoom!==void 0?r=this.getResolutionForZoom(t.maxZoom):r=0;const l=this.rotatedExtentForGeometry(e);let u=this.getResolutionForExtentInternal(l,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);u=isNaN(u)?r:Math.max(u,r),u=this.getConstrainedResolution(u,s?0:1);const d=this.getRotation(),m=Math.sin(d),f=Math.cos(d),v=Cu(l);v[0]+=(n[1]-n[3])/2*u,v[1]+=(n[0]-n[2])/2*u;const w=v[0]*f-v[1]*m,S=v[1]*f+v[0]*m,T=this.getConstrainedCenter([w,S],u),M=t.callback?t.callback:_1;t.duration!==void 0?this.animateInternal({resolution:u,center:T,duration:t.duration,easing:t.easing},M):(this.targetResolution_=u,this.targetCenter_=T,this.applyTargetState_(!1,!0),Nv(M,!0))}centerOn(e,t,i){this.centerOnInternal(lr(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(lS(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,n){let s;const r=this.padding_;if(r&&e){const l=this.getViewportSizeMinusPadding_(-i),u=lS(e,n,[l[0]/2+r[3],l[1]/2+r[0]],t,i);s=[e[0]-u[0],e[1]-u[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Gm(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&lr(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,n,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=lr(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(n,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&lr(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,s,i),l=this.constraints_.center(this.targetCenter_,r,s,i,this.calculateCenterShift(this.targetCenter_,r,n,s));this.get(su.ROTATION)!==n&&this.set(su.ROTATION,n),this.get(su.RESOLUTION)!==r&&(this.set(su.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(su.CENTER)||!ho(this.get(su.CENTER),l))&&this.set(su.CENTER,l),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const n=t||0,s=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(s),l=this.constraints_.resolution(this.targetResolution_,n,r),u=this.constraints_.center(this.targetCenter_,l,r,!1,this.calculateCenterShift(this.targetCenter_,l,s,r));if(e===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=s,this.targetCenter_=u,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==s||!this.getCenterInternal()||!ho(this.getCenterInternal(),u))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:u,resolution:l,duration:e,easing:Lf,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Jn.INTERACTING,1)}endInteraction(e,t,i){i=i&&lr(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(Jn.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function Nv(a,e){setTimeout(function(){a(e)},0)}function gX(a){if(a.extent!==void 0){const t=a.smoothExtentConstraint!==void 0?a.smoothExtentConstraint:!0;return lR(a.extent,a.constrainOnlyCenter,t)}const e=r5(a.projection,"EPSG:3857");if(a.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,lR(t,!1,!1)}return OH}function fX(a){let e,t,i,r=a.minZoom!==void 0?a.minZoom:oS,l=a.maxZoom!==void 0?a.maxZoom:28;const u=a.zoomFactor!==void 0?a.zoomFactor:2,d=a.multiWorld!==void 0?a.multiWorld:!1,m=a.smoothResolutionConstraint!==void 0?a.smoothResolutionConstraint:!0,f=a.showFullExtent!==void 0?a.showFullExtent:!1,v=r5(a.projection,"EPSG:3857"),w=v.getExtent();let S=a.constrainOnlyCenter,T=a.extent;if(!d&&!T&&v.isGlobal()&&(S=!1,T=w),a.resolutions!==void 0){const M=a.resolutions;t=M[r],i=M[l]!==void 0?M[l]:M[M.length-1],a.constrainResolution?e=cX(M,m,!S&&T,f):e=mR(t,i,m,!S&&T,f)}else{const G=(w?Math.max(Ti(w),vr(w)):360*Lm.degrees/v.getMetersPerUnit())/I5/Math.pow(2,oS),P=G/Math.pow(2,28-oS);t=a.maxResolution,t!==void 0?r=0:t=G/Math.pow(u,r),i=a.minResolution,i===void 0&&(a.maxZoom!==void 0?a.maxResolution!==void 0?i=t/Math.pow(u,l):i=G/Math.pow(u,l):i=P),l=r+Math.floor(Math.log(t/i)/Math.log(u)),i=t/Math.pow(u,l-r),a.constrainResolution?e=dX(u,t,i,m,!S&&T,f):e=mR(t,i,m,!S&&T,f)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:r,zoomFactor:u}}function yX(a){if(a.enableRotation!==void 0?a.enableRotation:!0){const t=a.constrainRotation;return t===void 0||t===!0?_X():t===!1?pR:typeof t=="number"?hX(t):pR}return w5}function bX(a){return!(a.sourceCenter&&a.targetCenter&&!ho(a.sourceCenter,a.targetCenter)||a.sourceResolution!==a.targetResolution||a.sourceRotation!==a.targetRotation)}function lS(a,e,t,i,n){const s=Math.cos(-n);let r=Math.sin(-n),l=a[0]*s-a[1]*r,u=a[1]*s+a[0]*r;l+=(e[0]/2-t[0])*i,u+=(t[1]-e[1]/2)*i,r=-r;const d=l*s-u*r,m=u*s+l*r;return[d,m]}const rc=pX,Fv="ol-hidden",vX="ol-selectable",Ec="ol-unselectable",gR="ol-unsupported",s_="ol-control",fR="ol-collapsed",xX=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),yR=["style","variant","weight","size","lineHeight","family"],C5=function(a){const e=a.match(xX);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,n=yR.length;i<n;++i){const s=e[i+1];s!==void 0&&(t[yR[i]]=s)}return t.families=t.family.split(/,\s?/),t};function Zr(a,e,t,i){let n;return t&&t.length?n=t.shift():kW?n=new OffscreenCanvas(a||300,e||300):n=document.createElement("canvas"),a&&(n.width=a),e&&(n.height=e),n.getContext("2d",i)}let uS;function Gx(){return uS||(uS=Zr(1,1)),uS}function bI(a){const e=a.canvas;e.width=1,e.height=1,a.clearRect(0,0,1,1)}function wX(a){let e=a.offsetWidth;const t=getComputedStyle(a);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function IX(a){let e=a.offsetHeight;const t=getComputedStyle(a);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function Ox(a,e){const t=e.parentNode;t&&t.replaceChild(a,e)}function $W(a){for(;a.lastChild;)a.lastChild.remove()}function CX(a,e){const t=a.childNodes;for(let i=0;;++i){const n=t[i],s=e[i];if(!n&&!s)break;if(n!==s){if(!n){a.appendChild(s);continue}if(!s){a.removeChild(n),--i;continue}a.insertBefore(s,n)}}}class SX extends Yl{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let i=0,n=this.listenerKeys.length;i<n;++i)_n(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=e,e){const i=this.target_??e.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==_1&&this.listenerKeys.push(ba(e,md.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}const zd=SX;class AX extends zd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",n=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",r=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=r):this.collapseLabel_=s;const l=e.label!==void 0?e.label:"i";typeof l=="string"?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=n):this.label_=l;const u=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(u),this.toggleButton_.addEventListener(za.CLICK,this.handleClick_.bind(this),!1);const d=t+" "+Ec+" "+s_+(this.collapsed_&&this.collapsible_?" "+fR:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=d,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(n=>n.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(n=>i.add(n)):i.add(this.attributions_)),!this.overrideCollapsible_){const n=!t.some(s=>{var r;return((r=s.getSource())==null?void 0:r.getAttributionsCollapsible())===!1});this.setCollapsible(n)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(n=>MW(()=>n))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Zd(t,this.renderedAttributions_)){$W(this.ulElement_);for(let n=0,s=t.length;n<s;++n){const r=document.createElement("li");r.innerHTML=t[n],this.ulElement_.appendChild(r)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(fR),this.collapsed_?Ox(this.collapseLabel_,this.label_):Ox(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}const TX=AX;class EX extends zd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",n=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const s=e.tipLabel?e.tipLabel:"Reset rotation",r=document.createElement("button");r.className=t+"-reset",r.setAttribute("type","button"),r.title=s,r.appendChild(this.label_),r.addEventListener(za.CLICK,this.handleClick_.bind(this),!1);const l=t+" "+Ec+" "+s_,u=this.element;u.className=l,u.appendChild(r),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Fv)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Lf}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const n="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Fv);!s&&i===0?this.element.classList.add(Fv):s&&i!==0&&this.element.classList.remove(Fv)}this.label_.style.transform=n}this.rotation_=i}}const JW=EX;class MX extends zd{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,n=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",r=e.zoomInLabel!==void 0?e.zoomInLabel:"+",l=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",u=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",d=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=n,m.setAttribute("type","button"),m.title=u,m.appendChild(typeof r=="string"?document.createTextNode(r):r),m.addEventListener(za.CLICK,this.handleClick_.bind(this,i),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=d,f.appendChild(typeof l=="string"?document.createTextNode(l):l),f.addEventListener(za.CLICK,this.handleClick_.bind(this,-i),!1);const v=t+" "+Ec+" "+s_,w=this.element;w.className=v,w.appendChild(m),w.appendChild(f),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const n=i.getZoom();if(n!==void 0){const s=i.getConstrainedZoom(n+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:Lf})):i.setZoom(s)}}}const QW=MX;function LX(a){a=a||{};const e=new Pl;return(a.zoom!==void 0?a.zoom:!0)&&e.push(new QW(a.zoomOptions)),(a.rotate!==void 0?a.rotate:!0)&&e.push(new JW(a.rotateOptions)),(a.attribution!==void 0?a.attribution:!0)&&e.push(new TX(a.attributionOptions)),e}class RX{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const n=this.points_[t+2]-this.points_[i+2];if(n<1e3/60)return!1;const s=this.points_[t]-this.points_[i],r=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(r,s),this.initialVelocity_=Math.sqrt(s*s+r*r)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const kX=RX,uT={ACTIVE:"active"};class WX extends Yl{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(uT.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(uT.ACTIVE,e)}setMap(e){this.map_=e}}function GX(a,e,t){const i=a.getCenterInternal();if(i){const n=[i[0]+e[0],i[1]+e[1]];a.animateInternal({duration:t!==void 0?t:250,easing:BH,center:a.getConstrainedCenter(n)})}}function S5(a,e,t,i){const n=a.getZoom();if(n===void 0)return;const s=a.getConstrainedZoom(n+e),r=a.getResolutionForZoom(s);a.getAnimating()&&a.cancelAnimations(),a.animate({resolution:r,anchor:t,duration:i!==void 0?i:250,easing:Lf})}const K1=WX;class OX extends K1{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Pi.DBLCLICK){const i=e.originalEvent,n=e.map,s=e.coordinate,r=i.shiftKey?-this.delta_:this.delta_,l=n.getView();S5(l,r,s,this.duration_),i.preventDefault(),t=!0}return!t}}const PX=OX;function cT(a){const e=arguments;return function(t){let i=!0;for(let n=0,s=e.length;n<s&&(i=i&&e[n](t),!!i);++n);return i}}const BX=function(a){const e=a.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},NX=function(a){const e=a.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},FX=function(a){const e=a.map.getTargetElement(),t=e.getRootNode(),i=a.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},e7=function(a){const e=a.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?FX(a):!0},Px=df,t7=function(a){const e=a.originalEvent;return e instanceof PointerEvent&&e.button==0&&!(TH&&s5&&e.ctrlKey)},DX=Mf,a7=function(a){return a.type==Pi.SINGLECLICK},vI=function(a){const e=a.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},VX=function(a){const e=a.originalEvent;return!e.altKey&&(s5?e.metaKey:e.ctrlKey)&&!e.shiftKey},ZX=function(a){const e=a.originalEvent;return s5?e.metaKey:e.ctrlKey},i7=function(a){const e=a.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},n7=function(a){const e=a.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},cS=function(a){const e=a.originalEvent;return e instanceof PointerEvent&&e.pointerType=="mouse"},r7=function(a){const e=a.originalEvent;return e instanceof PointerEvent&&e.isPrimary&&e.button===0};class zX extends K1{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Pi.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Pi.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Pi.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Pi.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function A5(a){const e=a.length;let t=0,i=0;for(let n=0;n<e;n++)t+=a[n].clientX,i+=a[n].clientY;return{clientX:t/e,clientY:i/e}}const $m=zX;class UX extends $m{constructor(e){super({stopDown:Mf}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:cT(vI,r7);this.condition_=e.onFocusOnly?cT(e7,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,n=t.getEventPixel(A5(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const s=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],l=e.map.getView();GU(s,l.getResolution()),e5(s,l.getRotation()),l.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const n=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),r=i.getCenterInternal(),l=t.getPixelFromCoordinateInternal(r),u=t.getCoordinateFromPixelInternal([l[0]-n*Math.cos(s),l[1]-n*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(u),duration:500,easing:Lf})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const HX=UX;class XX extends $m{constructor(e){e=e||{},super({stopDown:Mf}),this.condition_=e.condition?e.condition:NX,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!cS(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===w5)return;const n=t.getSize(),s=e.pixel,r=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;i.adjustRotationInternal(-l)}this.lastAngle_=r}handleUpEvent(e){return cS(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return cS(e)&&t7(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const dT=XX;class qX extends _I{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(e[0],t[0])+i,n.top=Math.min(e[1],t[1])+i,n.width=Math.abs(t[0]-e[0])+i,n.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,n=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Au([n])}getGeometry(){return this.geometry_}}const YX=qX,ag={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Xy extends Il{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class KX extends $m{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new YX(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??t7,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const n=i[0]-t[0],s=i[1]-t[1];return n*n+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Xy(ag.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Xy(t?ag.BOXEND:ag.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Xy(ag.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Xy(ag.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Xy(ag.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}const jX=KX;class $X extends jX{constructor(e){e=e||{};const t=e.condition?e.condition:i7;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let n=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(n),r=i.getResolutionForExtentInternal(s),l=i.getResolution()/r;n=n.clone(),n.scale(l*l)}i.fitInternal(n,{duration:this.duration_,easing:Lf})}}const JX=$X,K_={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class QX extends K1{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return vI(t)&&n7(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==za.KEYDOWN){const i=e.originalEvent,n=i.key;if(this.condition_(e)&&(n==K_.DOWN||n==K_.LEFT||n==K_.RIGHT||n==K_.UP)){const r=e.map.getView(),l=r.getResolution()*this.pixelDelta_;let u=0,d=0;n==K_.DOWN?d=-l:n==K_.LEFT?u=-l:n==K_.RIGHT?u=l:d=l;const m=[u,d];e5(m,r.getRotation()),GX(r,m,this.duration_),i.preventDefault(),t=!0}}return!t}}const eq=QX;class tq extends K1{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!ZX(t)&&n7(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==za.KEYDOWN||e.type==za.KEYPRESS){const i=e.originalEvent,n=i.key;if(this.condition_(e)&&(n==="+"||n==="-")){const s=e.map,r=n==="+"?this.delta_:-this.delta_,l=s.getView();S5(l,r,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const aq=tq;class iq extends K1{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:Px;this.condition_=e.onFocusOnly?cT(e7,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==za.WHEEL)return!0;const i=e.map,n=e.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s;if(e.type==za.WHEEL&&(s=n.deltaY,n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const r=Date.now();this.startTime_===void 0&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const l=i.getView();if(this.mode_==="trackpad"&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=r,!1;this.totalDelta_+=s;const u=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),u),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Nn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),S5(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}const nq=iq;class rq extends $m{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Mf),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(this.lastAngle_!==void 0){const u=s-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=u}this.lastAngle_=s;const r=e.map,l=r.getView();l.getConstraints().rotation!==w5&&(this.anchor_=r.getCoordinateFromPixelInternal(r.getEventPixel(A5(this.targetPointers))),this.rotating_&&(r.render(),l.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const sq=rq;class oq extends $m{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Mf),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],n=this.targetPointers[1],s=i.clientX-n.clientX,r=i.clientY-n.clientY,l=Math.sqrt(s*s+r*r);this.lastDistance_!==void 0&&(t=this.lastDistance_/l),this.lastDistance_=l;const u=e.map,d=u.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=u.getCoordinateFromPixelInternal(u.getEventPixel(A5(this.targetPointers))),u.render(),d.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),n=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const lq=oq;function uq(a){a=a||{};const e=new Pl,t=new kX(-.005,.05,100);return(a.altShiftDragRotate!==void 0?a.altShiftDragRotate:!0)&&e.push(new dT),(a.doubleClickZoom!==void 0?a.doubleClickZoom:!0)&&e.push(new PX({delta:a.zoomDelta,duration:a.zoomDuration})),(a.dragPan!==void 0?a.dragPan:!0)&&e.push(new HX({onFocusOnly:a.onFocusOnly,kinetic:t})),(a.pinchRotate!==void 0?a.pinchRotate:!0)&&e.push(new sq),(a.pinchZoom!==void 0?a.pinchZoom:!0)&&e.push(new lq({duration:a.zoomDuration})),(a.keyboard!==void 0?a.keyboard:!0)&&(e.push(new eq),e.push(new aq({delta:a.zoomDelta,duration:a.zoomDuration}))),(a.mouseWheelZoom!==void 0?a.mouseWheelZoom:!0)&&e.push(new nq({onFocusOnly:a.onFocusOnly,duration:a.zoomDuration})),(a.shiftDragZoom!==void 0?a.shiftDragZoom:!0)&&e.push(new JX({duration:a.zoomDuration})),e}const xn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class cq extends Yl{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[xn.OPACITY]=e.opacity!==void 0?e.opacity:1,sn(typeof t[xn.OPACITY]=="number","Layer opacity must be a number"),t[xn.VISIBLE]=e.visible!==void 0?e.visible:!0,t[xn.Z_INDEX]=e.zIndex,t[xn.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[xn.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[xn.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[xn.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Nn(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ka()}getLayerStatesArray(e){return ka()}getExtent(){return this.get(xn.EXTENT)}getMaxResolution(){return this.get(xn.MAX_RESOLUTION)}getMinResolution(){return this.get(xn.MIN_RESOLUTION)}getMinZoom(){return this.get(xn.MIN_ZOOM)}getMaxZoom(){return this.get(xn.MAX_ZOOM)}getOpacity(){return this.get(xn.OPACITY)}getSourceState(){return ka()}getVisible(){return this.get(xn.VISIBLE)}getZIndex(){return this.get(xn.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(xn.EXTENT,e)}setMaxResolution(e){this.set(xn.MAX_RESOLUTION,e)}setMinResolution(e){this.set(xn.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(xn.MAX_ZOOM,e)}setMinZoom(e){this.set(xn.MIN_ZOOM,e)}setOpacity(e){sn(typeof e=="number","Layer opacity must be a number"),this.set(xn.OPACITY,e)}setVisible(e){this.set(xn.VISIBLE,e)}setZIndex(e){this.set(xn.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const s7=cq;class Ah extends Il{constructor(e,t){super(e),this.layer=t}}const dS={LAYERS:"layers"};class T5 extends s7{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(dS.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Pl(i.slice(),{unique:!0}):sn(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Pl(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(_n),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(ba(e,Xs.ADD,this.handleLayersAdd_,this),ba(e,Xs.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(_n);X1(this.listenerKeys_);const t=e.getArray();for(let i=0,n=t.length;i<n;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new Ah("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[ba(e,Om.PROPERTYCHANGE,this.handleLayerChange_,this),ba(e,za.CHANGE,this.handleLayerChange_,this)];e instanceof T5&&t.push(ba(e,"addlayer",this.handleLayerGroupAdd_,this),ba(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ia(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Ah("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Ah("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Ah("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Ia(t);this.listenerKeys_[i].forEach(_n),delete this.listenerKeys_[i],this.dispatchEvent(new Ah("removelayer",t)),this.changed()}getLayers(){return this.get(dS.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let n=0,s=i.length;n<s;++n)this.dispatchEvent(new Ah("removelayer",i[n]))}this.set(dS.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(r){r.getLayerStatesArray(t)});const n=this.getLayerState();let s=n.zIndex;!e&&n.zIndex===void 0&&(s=0);for(let r=i,l=t.length;r<l;r++){const u=t[r];u.opacity*=n.opacity,u.visible=u.visible&&n.visible,u.maxResolution=Math.min(u.maxResolution,n.maxResolution),u.minResolution=Math.max(u.minResolution,n.minResolution),u.minZoom=Math.max(u.minZoom,n.minZoom),u.maxZoom=Math.min(u.maxZoom,n.maxZoom),n.extent!==void 0&&(u.extent!==void 0?u.extent=mc(u.extent,n.extent):u.extent=n.extent),u.zIndex===void 0&&(u.zIndex=s)}return t}getSourceState(){return"ready"}}const Rf=T5,Ko={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class dq extends s7{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(xn.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(xn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(_n(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=ba(e,za.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof rc?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let n;if(t.layerStatesArray){if(n=t.layerStatesArray.find(r=>r.layer===this),!n)return!1}else n=this.getLayerState();const s=this.getExtent();return E5(n,t.viewState)&&(!s||Rr(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const i=e instanceof rc?e.getViewStateAndExtent():e;let n=t(i);return Array.isArray(n)||(n=[n]),n}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(xn.MAP,e)}getMapInternal(){return this.get(xn.MAP)}setMap(e){this.mapPrecomposeKey_&&(_n(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(_n(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=ba(e,Ko.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=ba(this,za.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);sn(!t.some(n=>n.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(xn.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function E5(a,e){if(!a.visible)return!1;const t=e.resolution;if(t<a.minResolution||t>=a.maxResolution)return!1;const i=e.zoom;return i>a.minZoom&&i<=a.maxZoom}const Jm=dq;function o7(a,e,t=0,i=a.length-1,n=hq){for(;i>t;){if(i-t>600){const u=i-t+1,d=e-t+1,m=Math.log(u),f=.5*Math.exp(2*m/3),v=.5*Math.sqrt(m*f*(u-f)/u)*(d-u/2<0?-1:1),w=Math.max(t,Math.floor(e-d*f/u+v)),S=Math.min(i,Math.floor(e+(u-d)*f/u+v));o7(a,e,w,S,n)}const s=a[e];let r=t,l=i;for(qy(a,t,e),n(a[i],s)>0&&qy(a,t,i);r<l;){for(qy(a,r,l),r++,l--;n(a[r],s)<0;)r++;for(;n(a[l],s)>0;)l--}n(a[t],s)===0?qy(a,t,l):(l++,qy(a,l,i)),l<=e&&(t=l+1),e<=l&&(i=l-1)}}function qy(a,e,t){const i=a[e];a[e]=a[t],a[t]=i}function hq(a,e){return a<e?-1:a>e?1:0}let l7=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Vv(e,t))return i;const n=this.toBBox,s=[];for(;t;){for(let r=0;r<t.children.length;r++){const l=t.children[r],u=t.leaf?n(l):l;Vv(e,u)&&(t.leaf?i.push(l):_S(e,u)?this._all(l,i):s.push(l))}t=s.pop()}return i}collides(e){let t=this.data;if(!Vv(e,t))return!1;const i=[];for(;t;){for(let n=0;n<t.children.length;n++){const s=t.children[n],r=t.leaf?this.toBBox(s):s;if(Vv(e,r)){if(t.leaf||_S(e,r))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=gg([]),this}remove(e,t){if(!e)return this;let i=this.data;const n=this.toBBox(e),s=[],r=[];let l,u,d;for(;i||s.length;){if(i||(i=s.pop(),u=s[s.length-1],l=r.pop(),d=!0),i.leaf){const m=_q(e,i.children,t);if(m!==-1)return i.children.splice(m,1),s.push(i),this._condense(s),this}!d&&!i.leaf&&_S(i,n)?(s.push(i),r.push(l),l=0,u=i,i=i.children[0]):u?(l++,i=u.children[l],d=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,n){const s=i-t+1;let r=this._maxEntries,l;if(s<=r)return l=gg(e.slice(t,i+1)),ig(l,this.toBBox),l;n||(n=Math.ceil(Math.log(s)/Math.log(r)),r=Math.ceil(s/Math.pow(r,n-1))),l=gg([]),l.leaf=!1,l.height=n;const u=Math.ceil(s/r),d=u*Math.ceil(Math.sqrt(r));bR(e,t,i,d,this.compareMinX);for(let m=t;m<=i;m+=d){const f=Math.min(m+d-1,i);bR(e,m,f,u,this.compareMinY);for(let v=m;v<=f;v+=u){const w=Math.min(v+u-1,f);l.children.push(this._build(e,v,w,n-1))}}return ig(l,this.toBBox),l}_chooseSubtree(e,t,i,n){for(;n.push(t),!(t.leaf||n.length-1===i);){let s=1/0,r=1/0,l;for(let u=0;u<t.children.length;u++){const d=t.children[u],m=hS(d),f=gq(e,d)-m;f<r?(r=f,s=m<s?m:s,l=d):f===r&&m<s&&(s=m,l=d)}t=l||t.children[0]}return t}_insert(e,t,i){const n=i?e:this.toBBox(e),s=[],r=this._chooseSubtree(n,this.data,t,s);for(r.children.push(e),o0(r,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)}_split(e,t){const i=e[t],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);const r=this._chooseSplitIndex(i,s,n),l=gg(i.children.splice(r,i.children.length-r));l.height=i.height,l.leaf=i.leaf,ig(i,this.toBBox),ig(l,this.toBBox),t?e[t-1].children.push(l):this._splitRoot(i,l)}_splitRoot(e,t){this.data=gg([e,t]),this.data.height=e.height+1,this.data.leaf=!1,ig(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let n,s=1/0,r=1/0;for(let l=t;l<=i-t;l++){const u=s0(e,0,l,this.toBBox),d=s0(e,l,i,this.toBBox),m=fq(u,d),f=hS(u)+hS(d);m<s?(s=m,n=l,r=f<r?f:r):m===s&&f<r&&(r=f,n=l)}return n||i-t}_chooseSplitAxis(e,t,i){const n=e.leaf?this.compareMinX:mq,s=e.leaf?this.compareMinY:pq,r=this._allDistMargin(e,t,i,n),l=this._allDistMargin(e,t,i,s);r<l&&e.children.sort(n)}_allDistMargin(e,t,i,n){e.children.sort(n);const s=this.toBBox,r=s0(e,0,t,s),l=s0(e,i-t,i,s);let u=Dv(r)+Dv(l);for(let d=t;d<i-t;d++){const m=e.children[d];o0(r,e.leaf?s(m):m),u+=Dv(r)}for(let d=i-t-1;d>=t;d--){const m=e.children[d];o0(l,e.leaf?s(m):m),u+=Dv(l)}return u}_adjustParentBBoxes(e,t,i){for(let n=i;n>=0;n--)o0(t[n],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():ig(e[t],this.toBBox)}};function _q(a,e,t){if(!t)return e.indexOf(a);for(let i=0;i<e.length;i++)if(t(a,e[i]))return i;return-1}function ig(a,e){s0(a,0,a.children.length,e,a)}function s0(a,e,t,i,n){n||(n=gg(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let s=e;s<t;s++){const r=a.children[s];o0(n,a.leaf?i(r):r)}return n}function o0(a,e){return a.minX=Math.min(a.minX,e.minX),a.minY=Math.min(a.minY,e.minY),a.maxX=Math.max(a.maxX,e.maxX),a.maxY=Math.max(a.maxY,e.maxY),a}function mq(a,e){return a.minX-e.minX}function pq(a,e){return a.minY-e.minY}function hS(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function Dv(a){return a.maxX-a.minX+(a.maxY-a.minY)}function gq(a,e){return(Math.max(e.maxX,a.maxX)-Math.min(e.minX,a.minX))*(Math.max(e.maxY,a.maxY)-Math.min(e.minY,a.minY))}function fq(a,e){const t=Math.max(a.minX,e.minX),i=Math.max(a.minY,e.minY),n=Math.min(a.maxX,e.maxX),s=Math.min(a.maxY,e.maxY);return Math.max(0,n-t)*Math.max(0,s-i)}function _S(a,e){return a.minX<=e.minX&&a.minY<=e.minY&&e.maxX<=a.maxX&&e.maxY<=a.maxY}function Vv(a,e){return e.minX<=a.maxX&&e.minY<=a.maxY&&e.maxX>=a.minX&&e.maxY>=a.minY}function gg(a){return{children:a,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function bR(a,e,t,i,n){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const r=e+Math.ceil((t-e)/i/2)*i;o7(a,r,e,t,n),s.push(e,r,r,t)}}const M5=[NaN,NaN,NaN,0];let mS;function yq(){return mS||(mS=Zr(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),mS}const bq=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,vq=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,xq=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,wq=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Zv(a,e){return a.endsWith("%")?Number(a.substring(0,a.length-1))/e:Number(a)}function O0(a){throw new Error('failed to parse "'+a+'" as color')}function u7(a){if(a.toLowerCase().startsWith("rgb")){const s=a.match(vq)||a.match(bq)||a.match(xq);if(s){const r=s[4],l=100/255;return[Nn(Zv(s[1],l)+.5|0,0,255),Nn(Zv(s[2],l)+.5|0,0,255),Nn(Zv(s[3],l)+.5|0,0,255),r!==void 0?Nn(Zv(r,100),0,1):1]}O0(a)}if(a.startsWith("#")){if(wq.test(a)){const s=a.substring(1),r=s.length<=4?1:2,l=[0,0,0,255];for(let u=0,d=s.length;u<d;u+=r){let m=parseInt(s.substring(u,u+r),16);r===1&&(m+=m<<4),l[u/r]=m}return l[3]=l[3]/255,l}O0(a)}const e=yq();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=a,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=a,e.fillStyle===t&&O0(a));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return u7(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const n=Array.from(e.getImageData(0,0,1,1).data);return n[3]=Tf(n[3]/255,3),n}function Iq(a){return typeof a=="string"?a:R5(a)}const Cq=1024,Yy={};let pS=0;function Sq(a){if(a.length===4)return a;const e=a.slice();return e[3]=1,e}function gS(a){return a>.0031308?Math.pow(a,1/2.4)*269.025-14.025:a*3294.6}function fS(a){return a>.2068965?Math.pow(a,3):(a-4/29)*(108/841)}function yS(a){return a>10.314724?Math.pow((a+14.025)/269.025,2.4):a/3294.6}function bS(a){return a>.0088564?Math.pow(a,1/3):a/(108/841)+4/29}function vR(a){const e=yS(a[0]),t=yS(a[1]),i=yS(a[2]),n=bS(e*.222488403+t*.716873169+i*.06060791),s=500*(bS(e*.452247074+t*.399439023+i*.148375274)-n),r=200*(n-bS(e*.016863605+t*.117638439+i*.865350722)),l=Math.atan2(r,s)*(180/Math.PI);return[116*n-16,Math.sqrt(s*s+r*r),l<0?l+360:l,a[3]]}function Aq(a){const e=(a[0]+16)/116,t=a[1],i=a[2]*Math.PI/180,n=fS(e),s=fS(e+t/500*Math.cos(i)),r=fS(e-t/200*Math.sin(i)),l=gS(s*3.021973625-n*1.617392459-r*.404875592),u=gS(s*-.943766287+n*1.916279586+r*.027607165),d=gS(s*.069407491-n*.22898585+r*1.159737864);return[Nn(l+.5|0,0,255),Nn(u+.5|0,0,255),Nn(d+.5|0,0,255),a[3]]}function L5(a){if(a==="none")return M5;if(Yy.hasOwnProperty(a))return Yy[a];if(pS>=Cq){let t=0;for(const i in Yy)t++&3||(delete Yy[i],--pS)}const e=u7(a);e.length!==4&&O0(a);for(const t of e)isNaN(t)&&O0(a);return Yy[a]=e,++pS,e}function Zl(a){return Array.isArray(a)?a:L5(a)}function R5(a){let e=a[0];e!=(e|0)&&(e=e+.5|0);let t=a[1];t!=(t|0)&&(t=t+.5|0);let i=a[2];i!=(i|0)&&(i=i+.5|0);const n=a[3]===void 0?1:Math.round(a[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+n+")"}function xR(a){return a[0]>0&&a[1]>0}function Tq(a,e,t){return t===void 0&&(t=[0,0]),t[0]=a[0]*e+.5|0,t[1]=a[1]*e+.5|0,t}function Ks(a,e){return Array.isArray(a)?a:(e===void 0?e=[a,a]:(e[0]=a,e[1]=a),e)}let Qm=0;const go=1<<Qm++,Oi=1<<Qm++,Vo=1<<Qm++,mu=1<<Qm++,Nm=1<<Qm++,l0=1<<Qm++,zv=Math.pow(2,Qm)-1,k5={[go]:"boolean",[Oi]:"number",[Vo]:"string",[mu]:"color",[Nm]:"number[]",[l0]:"size"},Eq=Object.keys(k5).map(Number).sort(pc);function Mq(a){return a in k5}function u0(a){const e=[];for(const t of Eq)c0(a,t)&&e.push(k5[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function c0(a,e){return(a&e)===e}function ph(a,e){return a===e}class $r{constructor(e,t){if(!Mq(e))throw new Error(`literal expressions must have a specific type, got ${u0(e)}`);this.type=e,this.value=t}}class Lq{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function c7(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Ms(a,e,t){switch(typeof a){case"boolean":{if(ph(e,Vo))return new $r(Vo,a?"true":"false");if(!c0(e,go))throw new Error(`got a boolean, but expected ${u0(e)}`);return new $r(go,a)}case"number":{if(ph(e,l0))return new $r(l0,Ks(a));if(ph(e,go))return new $r(go,!!a);if(ph(e,Vo))return new $r(Vo,a.toString());if(!c0(e,Oi))throw new Error(`got a number, but expected ${u0(e)}`);return new $r(Oi,a)}case"string":{if(ph(e,mu))return new $r(mu,L5(a));if(ph(e,go))return new $r(go,!!a);if(!c0(e,Vo))throw new Error(`got a string, but expected ${u0(e)}`);return new $r(Vo,a)}}if(!Array.isArray(a))throw new Error("expression must be an array or a primitive value");if(a.length===0)throw new Error("empty expression");if(typeof a[0]=="string")return Vq(a,e,t);for(const i of a)if(typeof i!="number")throw new Error("expected an array of numbers");if(ph(e,l0)){if(a.length!==2)throw new Error(`expected an array of two values for a size, got ${a.length}`);return new $r(l0,a)}if(ph(e,mu)){if(a.length===3)return new $r(mu,[...a,1]);if(a.length===4)return new $r(mu,a);throw new Error(`expected an array of 3 or 4 values for a color, got ${a.length}`)}if(!c0(e,Nm))throw new Error(`got an array of numbers, but expected ${u0(e)}`);return new $r(Nm,a)}const pt={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Rq={[pt.Get]:Ja(bi(1,1/0),wR),[pt.Var]:Ja(bi(1,1),kq),[pt.Has]:Ja(bi(1,1/0),wR),[pt.Id]:Ja(Wq,ng),[pt.Concat]:Ja(bi(2,1/0),an(Vo)),[pt.GeometryType]:Ja(Gq,ng),[pt.LineMetric]:Ja(ng),[pt.Resolution]:Ja(vS,ng),[pt.Zoom]:Ja(vS,ng),[pt.Time]:Ja(vS,ng),[pt.Any]:Ja(bi(2,1/0),an(go)),[pt.All]:Ja(bi(2,1/0),an(go)),[pt.Not]:Ja(bi(1,1),an(go)),[pt.Equal]:Ja(bi(2,2),an(zv)),[pt.NotEqual]:Ja(bi(2,2),an(zv)),[pt.GreaterThan]:Ja(bi(2,2),an(Oi)),[pt.GreaterThanOrEqualTo]:Ja(bi(2,2),an(Oi)),[pt.LessThan]:Ja(bi(2,2),an(Oi)),[pt.LessThanOrEqualTo]:Ja(bi(2,2),an(Oi)),[pt.Multiply]:Ja(bi(2,1/0),IR),[pt.Coalesce]:Ja(bi(2,1/0),IR),[pt.Divide]:Ja(bi(2,2),an(Oi)),[pt.Add]:Ja(bi(2,1/0),an(Oi)),[pt.Subtract]:Ja(bi(2,2),an(Oi)),[pt.Clamp]:Ja(bi(3,3),an(Oi)),[pt.Mod]:Ja(bi(2,2),an(Oi)),[pt.Pow]:Ja(bi(2,2),an(Oi)),[pt.Abs]:Ja(bi(1,1),an(Oi)),[pt.Floor]:Ja(bi(1,1),an(Oi)),[pt.Ceil]:Ja(bi(1,1),an(Oi)),[pt.Round]:Ja(bi(1,1),an(Oi)),[pt.Sin]:Ja(bi(1,1),an(Oi)),[pt.Cos]:Ja(bi(1,1),an(Oi)),[pt.Atan]:Ja(bi(1,2),an(Oi)),[pt.Sqrt]:Ja(bi(1,1),an(Oi)),[pt.Match]:Ja(bi(4,1/0),CR,Pq),[pt.Between]:Ja(bi(3,3),an(Oi)),[pt.Interpolate]:Ja(bi(6,1/0),CR,Bq),[pt.Case]:Ja(bi(3,1/0),Oq,Nq),[pt.In]:Ja(bi(2,2),Fq),[pt.Number]:Ja(bi(1,1/0),an(zv)),[pt.String]:Ja(bi(1,1/0),an(zv)),[pt.Array]:Ja(bi(1,1/0),an(Oi)),[pt.Color]:Ja(bi(1,4),an(Oi)),[pt.Band]:Ja(bi(1,3),an(Oi)),[pt.Palette]:Ja(bi(2,2),Dq),[pt.ToString]:Ja(bi(1,1),an(go|Oi|Vo|mu))};function wR(a,e,t){const i=a.length-1,n=new Array(i);for(let s=0;s<i;++s){const r=a[s+1];switch(typeof r){case"number":{n[s]=new $r(Oi,r);break}case"string":{n[s]=new $r(Vo,r);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${r}`)}s===0&&t.properties.add(String(r))}return n}function kq(a,e,t){const i=a[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new $r(Vo,i)]}function Wq(a,e,t){t.featureId=!0}function Gq(a,e,t){t.geometryType=!0}function vS(a,e,t){t.mapState=!0}function ng(a,e,t){const i=a[0];if(a.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function bi(a,e){return function(t,i,n){const s=t[0],r=t.length-1;if(a===e){if(r!==a){const l=a===1?"":"s";throw new Error(`expected ${a} argument${l} for ${s}, got ${r}`)}}else if(r<a||r>e){const l=e===1/0?`${a} or more`:`${a} to ${e}`;throw new Error(`expected ${l} arguments for ${s}, got ${r}`)}}}function IR(a,e,t){const i=a.length-1,n=new Array(i);for(let s=0;s<i;++s){const r=Ms(a[s+1],e,t);n[s]=r}return n}function an(a){return function(e,t,i){const n=e.length-1,s=new Array(n);for(let r=0;r<n;++r){const l=Ms(e[r+1],a,i);s[r]=l}return s}}function Oq(a,e,t){const i=a[0],n=a.length-1;if(n%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${n} instead`)}function CR(a,e,t){const i=a[0],n=a.length-1;if(n%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${n} instead`)}function Pq(a,e,t){const i=a.length-1,n=Vo|Oi|go,s=Ms(a[1],n,t),r=Ms(a[a.length-1],e,t),l=new Array(i-2);for(let u=0;u<i-2;u+=2){try{const d=Ms(a[u+2],s.type,t);l[u]=d}catch(d){throw new Error(`failed to parse argument ${u+1} of match expression: ${d.message}`)}try{const d=Ms(a[u+3],r.type,t);l[u+1]=d}catch(d){throw new Error(`failed to parse argument ${u+2} of match expression: ${d.message}`)}}return[s,...l,r]}function Bq(a,e,t){const i=a[1];let n;switch(i[0]){case"linear":n=1;break;case"exponential":const u=i[1];if(typeof u!="number"||u<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(u)} instead`);n=u;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new $r(Oi,n);let r;try{r=Ms(a[2],Oi,t)}catch(u){throw new Error(`failed to parse argument 1 in interpolate expression: ${u.message}`)}const l=new Array(a.length-3);for(let u=0;u<l.length;u+=2){try{const d=Ms(a[u+3],Oi,t);l[u]=d}catch(d){throw new Error(`failed to parse argument ${u+2} for interpolate expression: ${d.message}`)}try{const d=Ms(a[u+4],e,t);l[u+1]=d}catch(d){throw new Error(`failed to parse argument ${u+3} for interpolate expression: ${d.message}`)}}return[s,r,...l]}function Nq(a,e,t){const i=Ms(a[a.length-1],e,t),n=new Array(a.length-1);for(let s=0;s<n.length-1;s+=2){try{const r=Ms(a[s+1],go,t);n[s]=r}catch(r){throw new Error(`failed to parse argument ${s} of case expression: ${r.message}`)}try{const r=Ms(a[s+2],i.type,t);n[s+1]=r}catch(r){throw new Error(`failed to parse argument ${s+1} of case expression: ${r.message}`)}}return n[n.length-1]=i,n}function Fq(a,e,t){let i=a[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let n;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],n=Vo}else n=Oi;const s=new Array(i.length);for(let l=0;l<s.length;l++)try{const u=Ms(i[l],n,t);s[l]=u}catch(u){throw new Error(`failed to parse haystack item ${l} for "in" expression: ${u.message}`)}return[Ms(a[1],n,t),...s]}function Dq(a,e,t){let i;try{i=Ms(a[1],Oi,t)}catch(r){throw new Error(`failed to parse first argument in palette expression: ${r.message}`)}const n=a[2];if(!Array.isArray(n))throw new Error("the second argument of palette must be an array");const s=new Array(n.length);for(let r=0;r<s.length;r++){let l;try{l=Ms(n[r],mu,t)}catch(u){throw new Error(`failed to parse color at index ${r} in palette expression: ${u.message}`)}if(!(l instanceof $r))throw new Error(`the palette color at index ${r} must be a literal value`);s[r]=l}return[i,...s]}function Ja(...a){return function(e,t,i){const n=e[0];let s;for(let r=0;r<a.length;r++){const l=a[r](e,t,i);if(r==a.length-1){if(!l)throw new Error("expected last argument validator to return the parsed args");s=l}}return new Lq(t,n,...s)}}function Vq(a,e,t){const i=a[0],n=Rq[i];if(!n)throw new Error(`unknown operator: ${i}`);return n(a,e,t)}function d7(a){if(!a)return"";const e=a.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return d7(a.getGeometries()[0]);default:return""}}function h7(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ud(a,e,t){const i=Ms(a,e,t);return Tu(i)}function Tu(a,e){if(a instanceof $r){if(a.type===mu&&typeof a.value=="string"){const i=L5(a.value);return function(){return i}}return function(){return a.value}}const t=a.operator;switch(t){case pt.Number:case pt.String:case pt.Coalesce:return Zq(a);case pt.Get:case pt.Var:case pt.Has:return zq(a);case pt.Id:return i=>i.featureId;case pt.GeometryType:return i=>i.geometryType;case pt.Concat:{const i=a.args.map(n=>Tu(n));return n=>"".concat(...i.map(s=>s(n).toString()))}case pt.Resolution:return i=>i.resolution;case pt.Any:case pt.All:case pt.Between:case pt.In:case pt.Not:return Hq(a);case pt.Equal:case pt.NotEqual:case pt.LessThan:case pt.LessThanOrEqualTo:case pt.GreaterThan:case pt.GreaterThanOrEqualTo:return Uq(a);case pt.Multiply:case pt.Divide:case pt.Add:case pt.Subtract:case pt.Clamp:case pt.Mod:case pt.Pow:case pt.Abs:case pt.Floor:case pt.Ceil:case pt.Round:case pt.Sin:case pt.Cos:case pt.Atan:case pt.Sqrt:return Xq(a);case pt.Case:return qq(a);case pt.Match:return Yq(a);case pt.Interpolate:return Kq(a);case pt.ToString:return jq(a);default:throw new Error(`Unsupported operator ${t}`)}}function Zq(a,e){const t=a.operator,i=a.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Tu(a.args[s]);switch(t){case pt.Coalesce:return s=>{for(let r=0;r<i;++r){const l=n[r](s);if(typeof l<"u"&&l!==null)return l}throw new Error("Expected one of the values to be non-null")};case pt.Number:case pt.String:return s=>{for(let r=0;r<i;++r){const l=n[r](s);if(typeof l===t)return l}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function zq(a,e){const i=a.args[0].value;switch(a.operator){case pt.Get:return n=>{const s=a.args;let r=n.properties[i];for(let l=1,u=s.length;l<u;++l){const m=s[l].value;r=r[m]}return r};case pt.Var:return n=>n.variables[i];case pt.Has:return n=>{const s=a.args;if(!(i in n.properties))return!1;let r=n.properties[i];for(let l=1,u=s.length;l<u;++l){const m=s[l].value;if(!r||!Object.hasOwn(r,m))return!1;r=r[m]}return!0};default:throw new Error(`Unsupported accessor operator ${a.operator}`)}}function Uq(a,e){const t=a.operator,i=Tu(a.args[0]),n=Tu(a.args[1]);switch(t){case pt.Equal:return s=>i(s)===n(s);case pt.NotEqual:return s=>i(s)!==n(s);case pt.LessThan:return s=>i(s)<n(s);case pt.LessThanOrEqualTo:return s=>i(s)<=n(s);case pt.GreaterThan:return s=>i(s)>n(s);case pt.GreaterThanOrEqualTo:return s=>i(s)>=n(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Hq(a,e){const t=a.operator,i=a.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Tu(a.args[s]);switch(t){case pt.Any:return s=>{for(let r=0;r<i;++r)if(n[r](s))return!0;return!1};case pt.All:return s=>{for(let r=0;r<i;++r)if(!n[r](s))return!1;return!0};case pt.Between:return s=>{const r=n[0](s),l=n[1](s),u=n[2](s);return r>=l&&r<=u};case pt.In:return s=>{const r=n[0](s);for(let l=1;l<i;++l)if(r===n[l](s))return!0;return!1};case pt.Not:return s=>!n[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function Xq(a,e){const t=a.operator,i=a.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Tu(a.args[s]);switch(t){case pt.Multiply:return s=>{let r=1;for(let l=0;l<i;++l)r*=n[l](s);return r};case pt.Divide:return s=>n[0](s)/n[1](s);case pt.Add:return s=>{let r=0;for(let l=0;l<i;++l)r+=n[l](s);return r};case pt.Subtract:return s=>n[0](s)-n[1](s);case pt.Clamp:return s=>{const r=n[0](s),l=n[1](s);if(r<l)return l;const u=n[2](s);return r>u?u:r};case pt.Mod:return s=>n[0](s)%n[1](s);case pt.Pow:return s=>Math.pow(n[0](s),n[1](s));case pt.Abs:return s=>Math.abs(n[0](s));case pt.Floor:return s=>Math.floor(n[0](s));case pt.Ceil:return s=>Math.ceil(n[0](s));case pt.Round:return s=>Math.round(n[0](s));case pt.Sin:return s=>Math.sin(n[0](s));case pt.Cos:return s=>Math.cos(n[0](s));case pt.Atan:return i===2?s=>Math.atan2(n[0](s),n[1](s)):s=>Math.atan(n[0](s));case pt.Sqrt:return s=>Math.sqrt(n[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function qq(a,e){const t=a.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=Tu(a.args[n]);return n=>{for(let s=0;s<t-1;s+=2)if(i[s](n))return i[s+1](n);return i[t-1](n)}}function Yq(a,e){const t=a.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=Tu(a.args[n]);return n=>{const s=i[0](n);for(let r=1;r<t-1;r+=2)if(s===i[r](n))return i[r+1](n);return i[t-1](n)}}function Kq(a,e){const t=a.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=Tu(a.args[n]);return n=>{const s=i[0](n),r=i[1](n);let l,u;for(let d=2;d<t;d+=2){const m=i[d](n);let f=i[d+1](n);const v=Array.isArray(f);if(v&&(f=Sq(f)),m>=r)return d===2?f:v?$q(s,r,l,u,m,f):d0(s,r,l,u,m,f);l=m,u=f}return u}}function jq(a,e){const t=a.operator,i=a.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Tu(a.args[s]);switch(t){case pt.ToString:return s=>{const r=n[0](s);return a.args[0].type===mu?R5(r):r.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function d0(a,e,t,i,n,s){const r=n-t;if(r===0)return i;const l=e-t,u=a===1?l/r:(Math.pow(a,l)-1)/(Math.pow(a,r)-1);return i+u*(s-i)}function $q(a,e,t,i,n,s){if(n-t===0)return i;const l=vR(i),u=vR(s);let d=u[2]-l[2];d>180?d-=360:d<-180&&(d+=360);const m=[d0(a,e,t,l[0],n,u[0]),d0(a,e,t,l[1],n,u[1]),l[2]+d0(a,e,t,0,n,d),d0(a,e,t,i[3],n,s[3])];return Aq(m)}const ga={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class _7 extends q1{constructor(e,t,i,n){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof n=="function"?ga.IDLE:n,this.image_=null,this.loader=typeof n=="function"?n:null}changed(){this.dispatchEvent(za.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ga.IDLE&&this.loader){this.state=ga.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;MW(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||WW&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=ga.LOADED}).catch(i=>{this.state=ga.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function Jq(a,e,t){const i=a;let n=!0,s=!1,r=!1;const l=[Mx(i,za.LOAD,function(){r=!0,s||e()})];return i.src&&o5?(s=!0,i.decode().then(function(){n&&e()}).catch(function(u){n&&(r?e():t())})):l.push(Mx(i,za.ERROR,t)),function(){n=!1,l.forEach(_n)}}function Qq(a,e){return new Promise((t,i)=>{function n(){r(),t(a)}function s(){r(),i(new Error("Image load error"))}function r(){a.removeEventListener("load",n),a.removeEventListener("error",s)}a.addEventListener("load",n),a.addEventListener("error",s),e&&(a.src=e)})}function m7(a,e){return e&&(a.src=e),a.src&&o5?new Promise((t,i)=>a.decode().then(()=>t(a)).catch(n=>a.complete&&a.width?t(a):i(n))):Qq(a)}function p7(a,e){return e&&(a.src=e),a.src&&o5&&WW?a.decode().then(()=>createImageBitmap(a)).catch(t=>{if(a.complete&&a.width)return a;throw t}):m7(a)}class eY{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];!(e++&3)&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const n=xS(e,t,i);return n in this.cache_?this.cache_[n]:null}getPattern(e,t,i){const n=xS(e,t,i);return n in this.patternCache_?this.patternCache_[n]:null}set(e,t,i,n,s){const r=xS(e,t,i),l=r in this.cache_;this.cache_[r]=n,s&&(n.getImageState()===ga.IDLE&&n.load(),n.getImageState()===ga.LOADING?n.ready().then(()=>{this.patternCache_[r]=Gx().createPattern(n.getImage(1),"repeat")}):this.patternCache_[r]=Gx().createPattern(n.getImage(1),"repeat")),l||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function xS(a,e,t){const i=t?Zl(t):"null";return e+":"+a+":"+i}const Bl=new eY;let Ky=null;class g7 extends q1{constructor(e,t,i,n,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=n===void 0?ga.IDLE:n,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ga.LOADED){Ky||(Ky=Zr(1,1,void 0,{willReadFrequently:!0})),Ky.drawImage(this.image_,0,0);try{Ky.getImageData(0,0,1,1),this.tainted_=!1}catch{Ky=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(za.CHANGE)}handleImageError_(){this.imageState_=ga.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ga.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Zr(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ga.IDLE){this.image_||this.initializeImage_(),this.imageState_=ga.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&m7(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ga.LOADED)return;const t=this.image_,i=Zr(Math.ceil(t.width*e),Math.ceil(t.height*e)),n=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=Iq(this.color_),i.fillRect(0,0,n.width/e,n.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=n}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ga.LOADED||this.imageState_===ga.ERROR)e();else{const t=()=>{(this.imageState_===ga.LOADED||this.imageState_===ga.ERROR)&&(this.removeEventListener(za.CHANGE,t),e())};this.addEventListener(za.CHANGE,t)}})),this.ready_}}function W5(a,e,t,i,n,s){let r=e===void 0?void 0:Bl.get(e,t,n);return r||(r=new g7(a,a&&"src"in a?a.src||void 0:e,t,i,n),Bl.set(e,t,n,r,s)),s&&r&&!Bl.getPattern(e,t,n)&&Bl.set(e,t,n,r,s),r}function uc(a){return a?Array.isArray(a)?R5(a):typeof a=="object"&&"src"in a?tY(a):a:null}function tY(a){if(!a.offset||!a.size)return Bl.getPattern(a.src,"anonymous",a.color);const e=a.src+":"+a.offset,t=Bl.getPattern(e,void 0,a.color);if(t)return t;const i=Bl.get(a.src,"anonymous",null);if(i.getImageState()!==ga.LOADED)return null;const n=Zr(a.size[0],a.size[1]);return n.drawImage(i.getImage(1),a.offset[0],a.offset[1],a.size[0],a.size[1],0,0,a.size[0],a.size[1]),W5(n.canvas,e,void 0,ga.LOADED,a.color,!0),Bl.getPattern(e,void 0,a.color)}const f7="10px sans-serif",Zo="#000",hf="round",Td=[],Ed=0,_f="round",g1=10,f1="#000",y1="center",Bx="middle",hm=[0,0,0,0],b1=1,ud=new Yl;let fg=null,hT;const _T={},aY=function(){const e="32px ",t=["monospace","serif"],i=t.length,n="wmytzilWMYTZIL@#/&?$%10";let s,r;function l(d,m,f){let v=!0;for(let w=0;w<i;++w){const S=t[w];if(r=Nx(d+" "+m+" "+e+S,n),f!=S){const T=Nx(d+" "+m+" "+e+f+","+S,n);v=v&&T!=r}}return!!v}function u(){let d=!0;const m=ud.getKeys();for(let f=0,v=m.length;f<v;++f){const w=m[f];if(ud.get(w)<100){const[S,T,M]=w.split(`
`);l(S,T,M)?(X1(_T),fg=null,hT=void 0,ud.set(w,100)):(ud.set(w,ud.get(w)+1,!0),d=!1)}}d&&(clearInterval(s),s=void 0)}return function(d){const m=C5(d);if(!m)return;const f=m.families;for(let v=0,w=f.length;v<w;++v){const S=f[v],T=m.style+`
`+m.weight+`
`+S;ud.get(T)===void 0&&(ud.set(T,100,!0),l(m.style,m.weight,S)||(ud.set(T,0,!0),s===void 0&&(s=setInterval(u,32))))}}}(),iY=function(){let a;return function(e){let t=_T[e];if(t==null){if(kW){const i=C5(e),n=y7(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else a||(a=document.createElement("div"),a.innerHTML="M",a.style.minHeight="0",a.style.maxHeight="none",a.style.height="auto",a.style.padding="0",a.style.border="none",a.style.position="absolute",a.style.display="block",a.style.left="-99999px"),a.style.font=e,document.body.appendChild(a),t=a.offsetHeight,document.body.removeChild(a);_T[e]=t}return t}}();function y7(a,e){return fg||(fg=Zr(1,1)),a!=hT&&(fg.font=a,hT=fg.font),fg.measureText(e)}function Nx(a,e){return y7(a,e).width}function SR(a,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((n,s)=>Math.max(n,Nx(a,s)),0);return t[e]=i,i}function nY(a,e){const t=[],i=[],n=[];let s=0,r=0,l=0,u=0;for(let d=0,m=e.length;d<=m;d+=2){const f=e[d];if(f===`
`||d===m){s=Math.max(s,r),n.push(r),r=0,l+=u,u=0;continue}const v=e[d+1]||a.font,w=Nx(v,f);t.push(w),r+=w;const S=iY(v);i.push(S),u=Math.max(u,S)}return{width:s,height:l,widths:t,heights:i,lineWidths:n}}function rY(a,e,t,i,n,s,r,l,u,d,m){a.save(),t!==1&&(a.globalAlpha===void 0?a.globalAlpha=f=>f.globalAlpha*=t:a.globalAlpha*=t),e&&a.transform.apply(a,e),i.contextInstructions?(a.translate(u,d),a.scale(m[0],m[1]),sY(i,a)):m[0]<0||m[1]<0?(a.translate(u,d),a.scale(m[0],m[1]),a.drawImage(i,n,s,r,l,0,0,r,l)):a.drawImage(i,n,s,r,l,u,d,r*m[0],l*m[1]),a.restore()}function sY(a,e){const t=a.contextInstructions;for(let i=0,n=t.length;i<n;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class G5{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Ks(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new G5({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ka()}getImage(e){return ka()}getHitDetectionImage(){return ka()}getPixelRatio(e){return 1}getImageState(){return ka()}getImageSize(){return ka()}getOrigin(){return ka()}getSize(){return ka()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ks(e)}listenImageChange(e){ka()}load(){ka()}unlistenImageChange(e){ka()}ready(){return Promise.resolve()}}const b7=G5;class O5 extends b7{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ga.LOADING:ga.LOADED,this.imageState_===ga.LOADING&&this.ready().then(()=>this.imageState_=ga.LOADED),this.render()}clone(){const e=this.getScale(),t=new O5({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,r;const t=(s=this.fill_)==null?void 0:s.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let n=(r=Bl.get(i,null,null))==null?void 0:r.getImage(1);if(!n){const l=this.renderOptions_,u=Math.ceil(l.size*e),d=Zr(u,u);this.draw_(l,d,e),n=d.canvas,Bl.set(i,null,null,new g7(n,void 0,null,ga.LOADED,null))}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let n=this.radius,s=this.radius2_===void 0?n:this.radius2_;if(n<s){const K=n;n=s,s=K}const r=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/r,u=s*Math.sin(l),d=Math.sqrt(s*s-u*u),m=n-d,f=Math.sqrt(u*u+m*m),v=f/u;if(e==="miter"&&v<=i)return v*t;const w=t/2/v,S=t/2*(m/f),M=Math.sqrt((n+w)*(n+w)+S*S)-n;if(this.radius2_===void 0||e==="bevel")return M*2;const G=n*Math.sin(l),P=Math.sqrt(n*n-G*G),F=s-P,V=Math.sqrt(G*G+F*F)/G;if(V<=i){const K=V*t/2-s-n;return 2*Math.max(M,K)}return M*2}createRenderOptions(){let e=hf,t=_f,i=0,n=null,s=0,r,l=0;this.stroke_&&(r=uc(this.stroke_.getColor()??f1),l=this.stroke_.getWidth()??b1,n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??_f,e=this.stroke_.getLineCap()??hf,i=this.stroke_.getMiterLimit()??g1);const u=this.calculateLineJoinSize_(t,l,i),d=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*d+u);return{strokeStyle:r,strokeWidth:l,size:m,lineCap:e,lineDash:n,lineDashOffset:s,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let n=this.fill_.getColor();n===null&&(n=Zo),t.fillStyle=uc(n),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),n=0;typeof i=="string"&&(i=Zl(i)),i===null?n=1:Array.isArray(i)&&(n=i.length===4?i[3]:1),n===0&&(t=Zr(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const n=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,r=2*Math.PI/t;for(let l=0;l<t;l++){const u=s+l*r,d=l%2===0?i:n;e.lineTo(d*Math.cos(u),d*Math.sin(u))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Zo,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const sc=O5;class P5 extends sc{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new P5({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}const to=P5;class B5{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new B5({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=W5(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ga.IDLE&&t.load(),t.getImageState()===ga.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Ia(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Zl(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const wn=B5;function AR(a,e,t,i){return t!==void 0&&i!==void 0?[t/a,i/e]:t!==void 0?t/a:i!==void 0?i/e:1}class N5 extends b7{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,n=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:n,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const r=e.img!==void 0?e.img:null;let l=e.src;sn(!(l!==void 0&&r),"`image` and `src` cannot be provided at the same time"),(l===void 0||l.length===0)&&r&&(l=r.src||Ia(r)),sn(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),sn(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let u;if(e.src!==void 0?u=ga.IDLE:r!==void 0&&("complete"in r?r.complete?u=r.src?ga.LOADED:ga.IDLE:u=ga.LOADING:u=ga.LOADED),this.color_=e.color!==void 0?Zl(e.color):null,this.iconImage_=W5(r,l,this.crossOrigin_,u,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let d,m;if(e.size)[d,m]=e.size;else{const f=this.getImage(1);if(f.width&&f.height)d=f.width,m=f.height;else if(f instanceof HTMLImageElement){this.initialOptions_=e;const v=()=>{if(this.unlistenImageChange(v),!this.initialOptions_)return;const w=this.iconImage_.getSize();this.setScale(AR(w[0],w[1],e.width,e.height))};this.listenImageChange(v);return}}d!==void 0&&this.setScale(AR(d,m,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new N5({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=n[0]),this.anchorYUnits_=="fraction"&&(e[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+n[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+n[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ga.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ga.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(za.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(za.CHANGE,e)}ready(){return this.iconImage_.ready()}}const jh=N5;class F5{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new F5({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const mn=F5;class Bh{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=TR,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Bh({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=TR,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function oY(a){let e;if(typeof a=="function")e=a;else{let t;Array.isArray(a)?t=a:(sn(typeof a.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[a]),e=function(){return t}}return e}let wS=null;function v7(a,e){if(!wS){const t=new wn({color:"rgba(255,255,255,0.4)"}),i=new mn({color:"#3399CC",width:1.25});wS=[new Bh({image:new to({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return wS}function x7(){const a={},e=[255,255,255,1],t=[0,153,255,1],i=3;return a.Polygon=[new Bh({fill:new wn({color:[255,255,255,.5]})})],a.MultiPolygon=a.Polygon,a.LineString=[new Bh({stroke:new mn({color:e,width:i+2})}),new Bh({stroke:new mn({color:t,width:i})})],a.MultiLineString=a.LineString,a.Circle=a.Polygon.concat(a.LineString),a.Point=[new Bh({image:new to({radius:i*2,fill:new wn({color:t}),stroke:new mn({color:e,width:i/2})}),zIndex:1/0})],a.MultiPoint=a.Point,a.GeometryCollection=a.Polygon.concat(a.LineString,a.Point),a}function TR(a){return a.getGeometry()}const Vi=Bh,lY="#333";class D5{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Ks(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new wn({color:lY}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new D5({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ks(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const kf=D5;function uY(a){return!0}function cY(a){const e=c7(),t=dY(a,e),i=h7();return function(n,s){if(i.properties=n.getPropertiesInternal(),i.resolution=s,e.featureId){const r=n.getId();r!==void 0?i.featureId=r:i.featureId=null}return e.geometryType&&(i.geometryType=d7(n.getGeometry())),t(i)}}function ER(a){const e=c7(),t=a.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=mT(a[r],e);const n=h7(),s=new Array(t);return function(r,l){if(n.properties=r.getPropertiesInternal(),n.resolution=l,e.featureId){const d=r.getId();d!==void 0?n.featureId=d:n.featureId=null}let u=0;for(let d=0;d<t;++d){const m=i[d](n);m&&(s[u]=m,u+=1)}return s.length=u,s}}function dY(a,e){const t=a.length,i=new Array(t);for(let n=0;n<t;++n){const s=a[n],r="filter"in s?Ud(s.filter,go,e):uY;let l;if(Array.isArray(s.style)){const u=s.style.length;l=new Array(u);for(let d=0;d<u;++d)l[d]=mT(s.style[d],e)}else l=[mT(s.style,e)];i[n]={filter:r,styles:l}}return function(n){const s=[];let r=!1;for(let l=0;l<t;++l){const u=i[l].filter;if(u(n)&&!(a[l].else&&r)){r=!0;for(const d of i[l].styles){const m=d(n);m&&s.push(m)}}}return s}}function mT(a,e){const t=v1(a,"",e),i=x1(a,"",e),n=hY(a,e),s=_Y(a,e),r=Ho(a,"z-index",e);if(!t&&!i&&!n&&!s&&!Rm(a))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(a));const l=new Vi;return function(u){let d=!0;if(t){const m=t(u);m&&(d=!1),l.setFill(m)}if(i){const m=i(u);m&&(d=!1),l.setStroke(m)}if(n){const m=n(u);m&&(d=!1),l.setText(m)}if(s){const m=s(u);m&&(d=!1),l.setImage(m)}return r&&l.setZIndex(r(u)),d?null:l}}function v1(a,e,t){let i;if(e+"fill-pattern-src"in a)i=fY(a,e+"fill-",t);else{if(a[e+"fill-color"]==="none")return s=>null;i=V5(a,e+"fill-color",t)}if(!i)return null;const n=new wn;return function(s){const r=i(s);return r===M5?null:(n.setColor(r),n)}}function x1(a,e,t){const i=Ho(a,e+"stroke-width",t),n=V5(a,e+"stroke-color",t);if(!i&&!n)return null;const s=pd(a,e+"stroke-line-cap",t),r=pd(a,e+"stroke-line-join",t),l=w7(a,e+"stroke-line-dash",t),u=Ho(a,e+"stroke-line-dash-offset",t),d=Ho(a,e+"stroke-miter-limit",t),m=new mn;return function(f){if(n){const v=n(f);if(v===M5)return null;m.setColor(v)}if(i&&m.setWidth(i(f)),s){const v=s(f);if(v!=="butt"&&v!=="round"&&v!=="square")throw new Error("Expected butt, round, or square line cap");m.setLineCap(v)}if(r){const v=r(f);if(v!=="bevel"&&v!=="round"&&v!=="miter")throw new Error("Expected bevel, round, or miter line join");m.setLineJoin(v)}return l&&m.setLineDash(l(f)),u&&m.setLineDashOffset(u(f)),d&&m.setMiterLimit(d(f)),m}}function hY(a,e){const t="text-",i=pd(a,t+"value",e);if(!i)return null;const n=v1(a,t,e),s=v1(a,t+"background-",e),r=x1(a,t,e),l=x1(a,t+"background-",e),u=pd(a,t+"font",e),d=Ho(a,t+"max-angle",e),m=Ho(a,t+"offset-x",e),f=Ho(a,t+"offset-y",e),v=Ug(a,t+"overflow",e),w=pd(a,t+"placement",e),S=Ho(a,t+"repeat",e),T=xI(a,t+"scale",e),M=Ug(a,t+"rotate-with-view",e),G=Ho(a,t+"rotation",e),P=pd(a,t+"align",e),F=pd(a,t+"justify",e),N=pd(a,t+"baseline",e),V=Ug(a,t+"keep-upright",e),K=w7(a,t+"padding",e),te=wI(a,t+"declutter-mode"),J=new kf({declutterMode:te});return function(ne){if(J.setText(i(ne)),n&&J.setFill(n(ne)),s&&J.setBackgroundFill(s(ne)),r&&J.setStroke(r(ne)),l&&J.setBackgroundStroke(l(ne)),u&&J.setFont(u(ne)),d&&J.setMaxAngle(d(ne)),m&&J.setOffsetX(m(ne)),f&&J.setOffsetY(f(ne)),v&&J.setOverflow(v(ne)),w){const se=w(ne);if(se!=="point"&&se!=="line")throw new Error("Expected point or line for text-placement");J.setPlacement(se)}if(S&&J.setRepeat(S(ne)),T&&J.setScale(T(ne)),M&&J.setRotateWithView(M(ne)),G&&J.setRotation(G(ne)),P){const se=P(ne);if(se!=="left"&&se!=="center"&&se!=="right"&&se!=="end"&&se!=="start")throw new Error("Expected left, right, center, start, or end for text-align");J.setTextAlign(se)}if(F){const se=F(ne);if(se!=="left"&&se!=="right"&&se!=="center")throw new Error("Expected left, right, or center for text-justify");J.setJustify(se)}if(N){const se=N(ne);if(se!=="bottom"&&se!=="top"&&se!=="middle"&&se!=="alphabetic"&&se!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");J.setTextBaseline(se)}return K&&J.setPadding(K(ne)),V&&J.setKeepUpright(V(ne)),J}}function _Y(a,e){return"icon-src"in a?mY(a,e):"shape-points"in a?pY(a,e):"circle-radius"in a?gY(a,e):null}function mY(a,e){const t="icon-",i=t+"src",n=I7(a[i],i),s=Fx(a,t+"anchor",e),r=xI(a,t+"scale",e),l=Ho(a,t+"opacity",e),u=Fx(a,t+"displacement",e),d=Ho(a,t+"rotation",e),m=Ug(a,t+"rotate-with-view",e),f=LR(a,t+"anchor-origin"),v=RR(a,t+"anchor-x-units"),w=RR(a,t+"anchor-y-units"),S=xY(a,t+"color"),T=bY(a,t+"cross-origin"),M=vY(a,t+"offset"),G=LR(a,t+"offset-origin"),P=Dx(a,t+"width"),F=Dx(a,t+"height"),N=yY(a,t+"size"),V=wI(a,t+"declutter-mode"),K=new jh({src:n,anchorOrigin:f,anchorXUnits:v,anchorYUnits:w,color:S,crossOrigin:T,offset:M,offsetOrigin:G,height:F,width:P,size:N,declutterMode:V});return function(te){return l&&K.setOpacity(l(te)),u&&K.setDisplacement(u(te)),d&&K.setRotation(d(te)),m&&K.setRotateWithView(m(te)),r&&K.setScale(r(te)),s&&K.setAnchor(s(te)),K}}function pY(a,e){const t="shape-",i=t+"points",n=t+"radius",s=pT(a[i],i),r=pT(a[n],n),l=v1(a,t,e),u=x1(a,t,e),d=xI(a,t+"scale",e),m=Fx(a,t+"displacement",e),f=Ho(a,t+"rotation",e),v=Ug(a,t+"rotate-with-view",e),w=Dx(a,t+"radius2"),S=Dx(a,t+"angle"),T=wI(a,t+"declutter-mode"),M=new sc({points:s,radius:r,radius2:w,angle:S,declutterMode:T});return function(G){return l&&M.setFill(l(G)),u&&M.setStroke(u(G)),m&&M.setDisplacement(m(G)),f&&M.setRotation(f(G)),v&&M.setRotateWithView(v(G)),d&&M.setScale(d(G)),M}}function gY(a,e){const t="circle-",i=v1(a,t,e),n=x1(a,t,e),s=Ho(a,t+"radius",e),r=xI(a,t+"scale",e),l=Fx(a,t+"displacement",e),u=Ho(a,t+"rotation",e),d=Ug(a,t+"rotate-with-view",e),m=wI(a,t+"declutter-mode"),f=new to({radius:5,declutterMode:m});return function(v){return s&&f.setRadius(s(v)),i&&f.setFill(i(v)),n&&f.setStroke(n(v)),l&&f.setDisplacement(l(v)),u&&f.setRotation(u(v)),d&&f.setRotateWithView(d(v)),r&&f.setScale(r(v)),f}}function Ho(a,e,t){if(!(e in a))return;const i=Ud(a[e],Oi,t);return function(n){return pT(i(n),e)}}function pd(a,e,t){if(!(e in a))return null;const i=Ud(a[e],Vo,t);return function(n){return I7(i(n),e)}}function fY(a,e,t){const i=pd(a,e+"pattern-src",t),n=MR(a,e+"pattern-offset",t),s=MR(a,e+"pattern-size",t),r=V5(a,e+"color",t);return function(l){return{src:i(l),offset:n&&n(l),size:s&&s(l),color:r&&r(l)}}}function Ug(a,e,t){if(!(e in a))return null;const i=Ud(a[e],go,t);return function(n){const s=i(n);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function V5(a,e,t){if(!(e in a))return null;const i=Ud(a[e],mu,t);return function(n){return C7(i(n),e)}}function w7(a,e,t){if(!(e in a))return null;const i=Ud(a[e],Nm,t);return function(n){return j1(i(n),e)}}function Fx(a,e,t){if(!(e in a))return null;const i=Ud(a[e],Nm,t);return function(n){const s=j1(i(n),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function MR(a,e,t){if(!(e in a))return null;const i=Ud(a[e],Nm,t);return function(n){return S7(i(n),e)}}function xI(a,e,t){if(!(e in a))return null;const i=Ud(a[e],Nm|Oi,t);return function(n){return wY(i(n),e)}}function Dx(a,e){const t=a[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function yY(a,e){const t=a[e];if(t!==void 0){if(typeof t=="number")return Ks(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function bY(a,e){const t=a[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function LR(a,e){const t=a[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function RR(a,e){const t=a[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function vY(a,e){const t=a[e];if(t!==void 0)return j1(t,e)}function wI(a,e){const t=a[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function xY(a,e){const t=a[e];if(t!==void 0)return C7(t,e)}function j1(a,e){if(!Array.isArray(a))throw new Error(`Expected an array for ${e}`);const t=a.length;for(let i=0;i<t;++i)if(typeof a[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return a}function I7(a,e){if(typeof a!="string")throw new Error(`Expected a string for ${e}`);return a}function pT(a,e){if(typeof a!="number")throw new Error(`Expected a number for ${e}`);return a}function C7(a,e){if(typeof a=="string")return a;const t=j1(a,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function S7(a,e){const t=j1(a,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function wY(a,e){return typeof a=="number"?a:S7(a,e)}const kR={RENDER_ORDER:"renderOrder"};class IY extends Jm{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(kR.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new l7(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(kR.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?v7:e;const t=CY(e);this.styleFunction_=e===null?void 0:oY(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function CY(a){if(a===void 0)return v7;if(!a)return null;if(typeof a=="function"||a instanceof Vi)return a;if(!Array.isArray(a))return ER([a]);if(a.length===0)return[];const e=a.length,t=a[0];if(t instanceof Vi){const n=new Array(e);for(let s=0;s<e;++s){const r=a[s];if(!(r instanceof Vi))throw new Error("Expected a list of style instances");n[s]=r}return n}if("style"in t){const n=new Array(e);for(let s=0;s<e;++s){const r=a[s];if(!("style"in r))throw new Error("Expected a list of rules with a style property");n[s]=r}return cY(n)}return ER(a)}const Z5=IY;class SY extends Il{constructor(e,t,i,n){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=n}}const A7=SY;class AY extends _I{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ka()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;Su(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),BW(n,i)}forEachFeatureAtCoordinate(e,t,i,n,s,r,l,u){let d;const m=t.viewState;function f(N,V,K,te){return s.call(r,V,N?K:null,te)}const v=m.projection,w=oI(e.slice(),v),S=[[0,0]];if(v.canWrapX()&&n){const N=v.getExtent(),V=Ti(N);S.push([-V,0],[V,0])}const T=t.layerStatesArray,M=T.length,G=[],P=[];for(let N=0;N<S.length;N++)for(let V=M-1;V>=0;--V){const K=T[V],te=K.layer;if(te.hasRenderer()&&E5(K,m)&&l.call(u,te)){const J=te.getRenderer(),ne=te.getSource();if(J&&ne){const se=ne.getWrapX()?w:e,de=f.bind(null,K.managed);P[0]=se[0]+S[N][0],P[1]=se[1]+S[N][1],d=J.forEachFeatureAtCoordinate(P,t,i,de,G)}if(d)return d}}if(G.length===0)return;const F=1/G.length;return G.forEach((N,V)=>N.distanceSq+=V*F),G.sort((N,V)=>N.distanceSq-V.distanceSq),G.some(N=>d=N.callback(N.feature,N.layer,N.geometry)),d}hasFeatureAtCoordinate(e,t,i,n,s,r){return this.forEachFeatureAtCoordinate(e,t,i,n,df,this,s,r)!==void 0}getMap(){return this.map_}renderFrame(e){ka()}scheduleExpireIconCache(e){Bl.canExpireCache()&&e.postRenderFunctions.push(TY)}}function TY(a,e){Bl.expire()}const EY=AY;class MY extends EY{constructor(e){super(e),this.fontChangeListenerKey_=ba(ud,Om.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Ec+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const n=new A7(e,void 0,t);i.dispatchEvent(n)}}disposeInternal(){_n(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ko.PRECOMPOSE,e);const t=e.layerStatesArray.sort((l,u)=>l.zIndex-u.zIndex);t.some(l=>l.layer instanceof Z5&&l.layer.getDeclutter())&&(e.declutter={});const n=e.viewState;this.children_.length=0;const s=[];let r=null;for(let l=0,u=t.length;l<u;++l){const d=t[l];e.layerIndex=l;const m=d.layer,f=m.getSourceState();if(!E5(d,n)||f!="ready"&&f!="undefined"){m.unrender();continue}const v=m.render(e,r);v&&(v!==r&&(this.children_.push(v),r=v),s.push(d))}this.declutter(e,s),CX(this.element_,this.children_),this.dispatchRenderEvent(Ko.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const n=t[i],s=n.layer;s.getDeclutter()&&s.renderDeclutter(e,n)}t.forEach(i=>i.layer.renderDeferred(e))}}}const LY=MY;function T7(a){if(a instanceof Jm){a.setMapInternal(null);return}a instanceof Rf&&a.getLayers().forEach(T7)}function E7(a,e){if(a instanceof Jm){a.setMapInternal(e);return}if(a instanceof Rf){const t=a.getLayers().getArray();for(let i=0,n=t.length;i<n;++i)E7(t[i],e)}}let RY=class extends Yl{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=kY(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:RW,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=$o(),this.pixelToCoordinateTransform_=$o(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||LX(),this.interactions=t.interactions||uq({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new WH(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ds.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ds.VIEW,this.handleViewChanged_),this.addChangeListener(ds.SIZE,this.handleSizeChanged_),this.addChangeListener(ds.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof rc)&&e.view.then(function(n){i.setView(new rc(n))}),this.controls.addEventListener(Xs.ADD,n=>{n.element.setMap(this)}),this.controls.addEventListener(Xs.REMOVE,n=>{n.element.setMap(null)}),this.interactions.addEventListener(Xs.ADD,n=>{n.element.setMap(this)}),this.interactions.addEventListener(Xs.REMOVE,n=>{n.element.setMap(null)}),this.overlays_.addEventListener(Xs.ADD,n=>{this.addOverlayInternal_(n.element)}),this.overlays_.addEventListener(Xs.REMOVE,n=>{const s=n.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],n.element.setMap(null)}),this.controls.forEach(n=>{n.setMap(this)}),this.interactions.forEach(n=>{n.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){E7(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,r=i.layerFilter!==void 0?i.layerFilter:df,l=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,l,t,null,r,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(n){i.push(n)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(n){n instanceof Rf?t(n.getLayers()):e.push(n)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const n=t.layerFilter!==void 0?t.layerFilter:df,s=t.hitTolerance!==void 0?t.hitTolerance:0,r=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,r,n,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),n=this.getSize(),s=i.width/n[0],r=i.height/n[1],l="changedTouches"in e?e.changedTouches[0]:e;return[(l.clientX-i.left)/s,(l.clientY-i.top)/r]}getTarget(){return this.get(ds.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Gm(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Mr(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ds.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Pl){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const n=e[t];if(!n.visible)continue;const s=n.layer.getRenderer();if(s&&!s.ready)return!0;const r=n.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(e){const t=lr(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Mr(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ds.SIZE)}getView(){return this.get(ds.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,n){return GH(this.frameState_,e,t,i,n)}handleBrowserEvent(e,t){t=t||e.type;const i=new _d(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===m1.POINTERDOWN||i===za.WHEEL||i===za.KEYDOWN){const n=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():n,r=t.target,l=s instanceof ShadowRoot?s.host===r?s.host.ownerDocument:s:s===n?n.documentElement:s;if(this.overlayContainerStopEvent_.contains(r)||!l.contains(r))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const n=this.getInteractions().getArray().slice();for(let s=n.length-1;s>=0;s--){const r=n[s];if(r.getMap()!==this||!r.getActive()||!this.getTargetElement())continue;if(!r.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let n=this.maxTilesLoading_,s=n;if(e){const r=e.viewHints;if(r[Jn.ANIMATING]||r[Jn.INTERACTING]){const l=Date.now()-e.time>8;n=l?0:8,s=l?0:2}}t.getTilesLoading()<n&&(t.reprioritize(),t.loadMoreTiles(n,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ko.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ko.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new pg(md.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new pg(md.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let n=0,s=i.length;n<s;++n)i[n](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,n=this.targetChangeHandlerKeys_.length;i<n;++i)_n(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(za.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(za.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new LY(this)),this.mapBrowserEventHandler_=new MH(this,this.moveTolerance_);for(const s in Pi)this.mapBrowserEventHandler_.addEventListener(Pi[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(za.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(za.WHEEL,this.boundHandleBrowserEvent_,GW?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const s=t.getRootNode();i=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[ba(i,za.KEYDOWN,this.handleBrowserEvent,this),ba(i,za.KEYPRESS,this.handleBrowserEvent,this)];const n=t.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(_n(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(_n(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=ba(e,Om.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ba(e,za.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(_n),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Ah("addlayer",e)),this.layerGroupPropertyListenerKeys_=[ba(e,Om.PROPERTYCHANGE,this.render,this),ba(e,za.CHANGE,this.render,this),ba(e,"addlayer",this.handleLayerAdd_,this),ba(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){T7(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),n=this.frameState_;let s=null;if(t!==void 0&&xR(t)&&i&&i.isDef()){const r=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:d1(l.center,l.resolution,l.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:l,viewHints:r,wantedTiles:{},mapId:Ia(this),renderTargets:{}},l.nextCenter&&l.nextResolution){const u=isNaN(l.nextRotation)?l.rotation:l.nextRotation;s.nextExtent=d1(l.nextCenter,l.nextResolution,u,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n&&(!this.previousExtent_||!Km(this.previousExtent_)&&!Mm(s.extent,this.previousExtent_))&&(this.dispatchEvent(new pg(md.MOVESTART,this,n)),this.previousExtent_=Af(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Jn.ANIMATING]&&!s.viewHints[Jn.INTERACTING]&&!Mm(s.extent,this.previousExtent_)&&(this.dispatchEvent(new pg(md.MOVEEND,this,s)),mW(s.extent,this.previousExtent_))),this.dispatchEvent(new pg(md.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(md.LOADSTART)||this.hasListener(md.LOADEND)||this.hasListener(Ko.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Ah("removelayer",t)),this.set(ds.LAYERGROUP,e)}setSize(e){this.set(ds.SIZE,e)}setTarget(e){this.set(ds.TARGET,e)}setView(e){if(!e||e instanceof rc){this.set(ds.VIEW,e);return}this.set(ds.VIEW,new rc);const t=this;e.then(function(i){t.setView(new rc(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const n=getComputedStyle(e),s=e.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=e.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);!isNaN(s)&&!isNaN(r)&&(t=[Math.max(0,s),Math.max(0,r)],!xR(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&_W("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Zd(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function kY(a){let e=null;a.keyboardEventTarget!==void 0&&(e=typeof a.keyboardEventTarget=="string"?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);const t={},i=a.layers&&typeof a.layers.getLayers=="function"?a.layers:new Rf({layers:a.layers});t[ds.LAYERGROUP]=i,t[ds.TARGET]=a.target,t[ds.VIEW]=a.view instanceof rc?a.view:new rc;let n;a.controls!==void 0&&(Array.isArray(a.controls)?n=new Pl(a.controls.slice()):(sn(typeof a.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),n=a.controls));let s;a.interactions!==void 0&&(Array.isArray(a.interactions)?s=new Pl(a.interactions.slice()):(sn(typeof a.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=a.interactions));let r;return a.overlays!==void 0?Array.isArray(a.overlays)?r=new Pl(a.overlays.slice()):(sn(typeof a.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),r=a.overlays):r=new Pl,{controls:n,interactions:s,keyboardEventTarget:e,overlays:r,values:t}}const WY=RY;var yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GY(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var M7={exports:{}};(function(a,e){(function(t,i){a.exports=i()})(yg,function(){var t,i,n;function s(r,l){if(!t)t=l;else if(!i)i=l;else{var u="var sharedChunk = {}; ("+t+")(sharedChunk); ("+i+")(sharedChunk);",d={};t(d),n=l(d),typeof window<"u"&&(n.workerUrl=window.URL.createObjectURL(new Blob([u],{type:"text/javascript"})))}}return s(["exports"],function(r){function l(o,c){return o(c={exports:{}},c.exports),c.exports}var u=d;function d(o,c,h,y){this.cx=3*o,this.bx=3*(h-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(y-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=y,this.p2x=h,this.p2y=y}d.prototype.sampleCurveX=function(o){return((this.ax*o+this.bx)*o+this.cx)*o},d.prototype.sampleCurveY=function(o){return((this.ay*o+this.by)*o+this.cy)*o},d.prototype.sampleCurveDerivativeX=function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},d.prototype.solveCurveX=function(o,c){var h,y,x,I,A;for(c===void 0&&(c=1e-6),x=o,A=0;A<8;A++){if(I=this.sampleCurveX(x)-o,Math.abs(I)<c)return x;var R=this.sampleCurveDerivativeX(x);if(Math.abs(R)<1e-6)break;x-=I/R}if((x=o)<(h=0))return h;if(x>(y=1))return y;for(;h<y;){if(I=this.sampleCurveX(x),Math.abs(I-o)<c)return x;o>I?h=x:y=x,x=.5*(y-h)+h}return x},d.prototype.solve=function(o,c){return this.sampleCurveY(this.solveCurveX(o,c))};var m=f;function f(o,c){this.x=o,this.y=c}f.prototype={clone:function(){return new f(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,c){return this.clone()._rotateAround(o,c)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var c=o.x-this.x,h=o.y-this.y;return c*c+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,c){return Math.atan2(this.x*c-this.y*o,this.x*o+this.y*c)},_matMult:function(o){var c=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=c,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var c=Math.cos(o),h=Math.sin(o),y=h*this.x+c*this.y;return this.x=c*this.x-h*this.y,this.y=y,this},_rotateAround:function(o,c){var h=Math.cos(o),y=Math.sin(o),x=c.y+y*(this.x-c.x)+h*(this.y-c.y);return this.x=c.x+h*(this.x-c.x)-y*(this.y-c.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(o){return o instanceof f?o:Array.isArray(o)?new f(o[0],o[1]):o};var v=typeof self<"u"?self:{},w=Math.pow(2,53)-1;function S(o,c,h,y){var x=new u(o,c,h,y);return function(I){return x.solve(I)}}var T=S(.25,.1,.25,1);function M(o,c,h){return Math.min(h,Math.max(c,o))}function G(o,c,h){var y=h-c,x=((o-c)%y+y)%y+c;return x===c?h:x}function P(o){for(var c=[],h=arguments.length-1;h-- >0;)c[h]=arguments[h+1];for(var y=0,x=c;y<x.length;y+=1){var I=x[y];for(var A in I)o[A]=I[A]}return o}var F=1;function N(){return F++}function V(){return function o(c){return c?(c^16*Math.random()>>c/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,o)}()}function K(o){return!!o&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)}function te(o,c){o.forEach(function(h){c[h]&&(c[h]=c[h].bind(c))})}function J(o,c){return o.indexOf(c,o.length-c.length)!==-1}function ne(o,c,h){var y={};for(var x in o)y[x]=c.call(h||this,o[x],x,o);return y}function se(o,c,h){var y={};for(var x in o)c.call(h||this,o[x],x,o)&&(y[x]=o[x]);return y}function de(o){return Array.isArray(o)?o.map(de):typeof o=="object"&&o?ne(o,de):o}var _e={};function Se(o){_e[o]||(typeof console<"u"&&console.warn(o),_e[o]=!0)}function ce(o,c,h){return(h.y-o.y)*(c.x-o.x)>(c.y-o.y)*(h.x-o.x)}function Ie(o){for(var c=0,h=0,y=o.length,x=y-1,I=void 0,A=void 0;h<y;x=h++)c+=((A=o[x]).x-(I=o[h]).x)*(I.y+A.y);return c}function he(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function we(o){var c={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(y,x,I,A){var R=I||A;return c[x]=!R||R.toLowerCase(),""}),c["max-age"]){var h=parseInt(c["max-age"],10);isNaN(h)?delete c["max-age"]:c["max-age"]=h}return c}var Oe=null;function Ye(o){if(Oe==null){var c=o.navigator?o.navigator.userAgent:null;Oe=!!o.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return Oe}function at(o){try{var c=v[o];return c.setItem("_mapbox_test_",1),c.removeItem("_mapbox_test_"),!0}catch{return!1}}var yt,De,jt,pa,$t=v.performance&&v.performance.now?v.performance.now.bind(v.performance):Date.now.bind(Date),Ua=v.requestAnimationFrame||v.mozRequestAnimationFrame||v.webkitRequestAnimationFrame||v.msRequestAnimationFrame,bt=v.cancelAnimationFrame||v.mozCancelAnimationFrame||v.webkitCancelAnimationFrame||v.msCancelAnimationFrame,ui={now:$t,frame:function(o){var c=Ua(o);return{cancel:function(){return bt(c)}}},getImageData:function(o,c){c===void 0&&(c=0);var h=v.document.createElement("canvas"),y=h.getContext("2d");if(!y)throw new Error("failed to create canvas 2d context");return h.width=o.width,h.height=o.height,y.drawImage(o,0,0,o.width,o.height),y.getImageData(-c,-c,o.width+2*c,o.height+2*c)},resolveURL:function(o){return yt||(yt=v.document.createElement("a")),yt.href=o,yt.href},hardwareConcurrency:v.navigator&&v.navigator.hardwareConcurrency||4,get devicePixelRatio(){return v.devicePixelRatio},get prefersReducedMotion(){return!!v.matchMedia&&(De==null&&(De=v.matchMedia("(prefers-reduced-motion: reduce)")),De.matches)}},Ca={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ii={supported:!1,testSupport:function(o){!zi&&pa&&(An?xe(o):jt=o)}},zi=!1,An=!1;function xe(o){var c=o.createTexture();o.bindTexture(o.TEXTURE_2D,c);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,pa),o.isContextLost())return;ii.supported=!0}catch{}o.deleteTexture(c),zi=!0}v.document&&((pa=v.document.createElement("img")).onload=function(){jt&&xe(jt),jt=null,An=!0},pa.onerror=function(){zi=!0,jt=null},pa.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ge="01",qe=function(o,c){this._transformRequestFn=o,this._customAccessToken=c,this._createSkuToken()};function ut(o){return o.indexOf("mapbox:")===0}qe.prototype._createSkuToken=function(){var o=function(){for(var c="",h=0;h<10;h++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ge,c].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt},qe.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},qe.prototype.transformRequest=function(o,c){return this._transformRequestFn&&this._transformRequestFn(o,c)||{url:o}},qe.prototype.normalizeStyleURL=function(o,c){if(!ut(o))return o;var h=ze(o);return h.path="/styles/v1"+h.path,this._makeAPIURL(h,this._customAccessToken||c)},qe.prototype.normalizeGlyphsURL=function(o,c){if(!ut(o))return o;var h=ze(o);return h.path="/fonts/v1"+h.path,this._makeAPIURL(h,this._customAccessToken||c)},qe.prototype.normalizeSourceURL=function(o,c){if(!ut(o))return o;var h=ze(o);return h.path="/v4/"+h.authority+".json",h.params.push("secure"),this._makeAPIURL(h,this._customAccessToken||c)},qe.prototype.normalizeSpriteURL=function(o,c,h,y){var x=ze(o);return ut(o)?(x.path="/styles/v1"+x.path+"/sprite"+c+h,this._makeAPIURL(x,this._customAccessToken||y)):(x.path+=""+c+h,st(x))},qe.prototype.normalizeTileURL=function(o,c){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!ut(o))return o;var h=ze(o);h.path=h.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ui.devicePixelRatio>=2||c===512?"@2x":"")+(ii.supported?".webp":"$1")),h.path=h.path.replace(/^.+\/v4\//,"/"),h.path="/v4"+h.path;var y=this._customAccessToken||function(x){for(var I=0,A=x;I<A.length;I+=1){var R=A[I].match(/^access_token=(.*)$/);if(R)return R[1]}return null}(h.params)||Ca.ACCESS_TOKEN;return Ca.REQUIRE_ACCESS_TOKEN&&y&&this._skuToken&&h.params.push("sku="+this._skuToken),this._makeAPIURL(h,y)},qe.prototype.canonicalizeTileURL=function(o,c){var h=ze(o);if(!h.path.match(/(^\/v4\/)/)||!h.path.match(/\.[\w]+$/))return o;var y="mapbox://tiles/";y+=h.path.replace("/v4/","");var x=h.params;return c&&(x=x.filter(function(I){return!I.match(/^access_token=/)})),x.length&&(y+="?"+x.join("&")),y},qe.prototype.canonicalizeTileset=function(o,c){for(var h=!!c&&ut(c),y=[],x=0,I=o.tiles||[];x<I.length;x+=1){var A=I[x];Pe(A)?y.push(this.canonicalizeTileURL(A,h)):y.push(A)}return y},qe.prototype._makeAPIURL=function(o,c){var h="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",y=ze(Ca.API_URL);if(o.protocol=y.protocol,o.authority=y.authority,o.protocol==="http"){var x=o.params.indexOf("secure");x>=0&&o.params.splice(x,1)}if(y.path!=="/"&&(o.path=""+y.path+o.path),!Ca.REQUIRE_ACCESS_TOKEN)return st(o);if(!(c=c||Ca.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+h);if(c[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+h);return o.params=o.params.filter(function(I){return I.indexOf("access_token")===-1}),o.params.push("access_token="+c),st(o)};var gt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Pe(o){return gt.test(o)}var Qe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ze(o){var c=o.match(Qe);if(!c)throw new Error("Unable to parse URL object");return{protocol:c[1],authority:c[2],path:c[3]||"/",params:c[4]?c[4].split("&"):[]}}function st(o){var c=o.params.length?"?"+o.params.join("&"):"";return o.protocol+"://"+o.authority+o.path+c}function nt(o){if(!o)return null;var c=o.split(".");if(!c||c.length!==3)return null;try{return JSON.parse(decodeURIComponent(v.atob(c[1]).split("").map(function(h){return"%"+("00"+h.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var xt=function(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};xt.prototype.getStorageKey=function(o){var c,h=nt(Ca.ACCESS_TOKEN);return c=h&&h.u?v.btoa(encodeURIComponent(h.u).replace(/%([0-9A-F]{2})/g,function(y,x){return String.fromCharCode(+("0x"+x))})):Ca.ACCESS_TOKEN||"",o?"mapbox.eventData."+o+":"+c:"mapbox.eventData:"+c},xt.prototype.fetchEventData=function(){var o=at("localStorage"),c=this.getStorageKey(),h=this.getStorageKey("uuid");if(o)try{var y=v.localStorage.getItem(c);y&&(this.eventData=JSON.parse(y));var x=v.localStorage.getItem(h);x&&(this.anonId=x)}catch{Se("Unable to read from LocalStorage")}},xt.prototype.saveEventData=function(){var o=at("localStorage"),c=this.getStorageKey(),h=this.getStorageKey("uuid");if(o)try{v.localStorage.setItem(h,this.anonId),Object.keys(this.eventData).length>=1&&v.localStorage.setItem(c,JSON.stringify(this.eventData))}catch{Se("Unable to write to LocalStorage")}},xt.prototype.processRequests=function(o){},xt.prototype.postEvent=function(o,c,h,y){var x=this;if(Ca.EVENTS_URL){var I=ze(Ca.EVENTS_URL);I.params.push("access_token="+(y||Ca.ACCESS_TOKEN||""));var A={event:this.type,created:new Date(o).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Ge,userId:this.anonId},R=c?P(A,c):A,B={url:st(I),headers:{"Content-Type":"text/plain"},body:JSON.stringify([R])};this.pendingRequest=ni(B,function(D){x.pendingRequest=null,h(D),x.saveEventData(),x.processRequests(y)})}},xt.prototype.queueRequest=function(o,c){this.queue.push(o),this.processRequests(c)};var Et,ta,oa=function(o){function c(){o.call(this,"map.load"),this.success={},this.skuToken=""}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.postMapLoadEvent=function(h,y,x,I){this.skuToken=x;var A=!(!I&&!Ca.ACCESS_TOKEN),R=Array.isArray(h)&&h.some(function(B){return ut(B)||Pe(B)});Ca.EVENTS_URL&&A&&R&&this.queueRequest({id:y,timestamp:Date.now()},I)},c.prototype.processRequests=function(h){var y=this;if(!this.pendingRequest&&this.queue.length!==0){var x=this.queue.shift(),I=x.id,A=x.timestamp;I&&this.success[I]||(this.anonId||this.fetchEventData(),K(this.anonId)||(this.anonId=V()),this.postEvent(A,{skuToken:this.skuToken},function(R){R||I&&(y.success[I]=!0)},h))}},c}(xt),Na=new(function(o){function c(h){o.call(this,"appUserTurnstile"),this._customAccessToken=h}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.postTurnstileEvent=function(h,y){Ca.EVENTS_URL&&Ca.ACCESS_TOKEN&&Array.isArray(h)&&h.some(function(x){return ut(x)||Pe(x)})&&this.queueRequest(Date.now(),y)},c.prototype.processRequests=function(h){var y=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var x=nt(Ca.ACCESS_TOKEN),I=x?x.u:Ca.ACCESS_TOKEN,A=I!==this.eventData.tokenU;K(this.anonId)||(this.anonId=V(),A=!0);var R=this.queue.shift();if(this.eventData.lastSuccess){var B=new Date(this.eventData.lastSuccess),D=new Date(R),z=(R-this.eventData.lastSuccess)/864e5;A=A||z>=1||z<-1||B.getDate()!==D.getDate()}else A=!0;if(!A)return this.processRequests();this.postEvent(R,{"enabled.telemetry":!1},function(X){X||(y.eventData.lastSuccess=R,y.eventData.tokenU=I)},h)}},c}(xt)),mi=Na.postTurnstileEvent.bind(Na),di=new oa,Tn=di.postMapLoadEvent.bind(di),Ki=500,qn=50;function En(){v.caches&&!Et&&(Et=v.caches.open("mapbox-tiles"))}function xr(o){var c=o.indexOf("?");return c<0?o:o.slice(0,c)}var Wr,Ri=1/0;function Cn(){return Wr==null&&(Wr=v.OffscreenCanvas&&new v.OffscreenCanvas(1,1).getContext("2d")&&typeof v.createImageBitmap=="function"),Wr}var ao={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ao);var So=function(o){function c(h,y,x){y===401&&Pe(x)&&(h+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),o.call(this,h),this.status=y,this.url=x,this.name=this.constructor.name,this.message=h}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},c}(Error),gs=he()?function(){return self.worker&&self.worker.referrer}:function(){return(v.location.protocol==="blob:"?v.parent:v).location.href},Fn,qr,al=function(o,c){if(!(/^file:/.test(h=o.url)||/^file:/.test(gs())&&!/^\w+:/.test(h))){if(v.fetch&&v.Request&&v.AbortController&&v.Request.prototype.hasOwnProperty("signal"))return function(y,x){var I,A=new v.AbortController,R=new v.Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,referrer:gs(),signal:A.signal}),B=!1,D=!1,z=(I=R.url).indexOf("sku=")>0&&Pe(I);y.type==="json"&&R.headers.set("Accept","application/json");var X=function(ie,ge,fe){if(!D){if(ie&&ie.message!=="SecurityError"&&Se(ie),ge&&fe)return Q(ge);var ke=Date.now();v.fetch(R).then(function(Ce){if(Ce.ok){var Be=z?Ce.clone():null;return Q(Ce,Be,ke)}return x(new So(Ce.statusText,Ce.status,y.url))}).catch(function(Ce){Ce.code!==20&&x(new Error(Ce.message))})}},Q=function(ie,ge,fe){(y.type==="arrayBuffer"?ie.arrayBuffer():y.type==="json"?ie.json():ie.text()).then(function(ke){D||(ge&&fe&&function(Ce,Be,Ze){if(En(),Et){var Ue={status:Be.status,statusText:Be.statusText,headers:new v.Headers};Be.headers.forEach(function(ot,vt){return Ue.headers.set(vt,ot)});var Ke=we(Be.headers.get("Cache-Control")||"");Ke["no-store"]||(Ke["max-age"]&&Ue.headers.set("Expires",new Date(Ze+1e3*Ke["max-age"]).toUTCString()),new Date(Ue.headers.get("Expires")).getTime()-Ze<42e4||function(ot,vt){if(ta===void 0)try{new Response(new ReadableStream),ta=!0}catch{ta=!1}ta?vt(ot.body):ot.blob().then(vt)}(Be,function(ot){var vt=new v.Response(ot,Ue);En(),Et&&Et.then(function(Mt){return Mt.put(xr(Ce.url),vt)}).catch(function(Mt){return Se(Mt.message)})}))}}(R,ge,fe),B=!0,x(null,ke,ie.headers.get("Cache-Control"),ie.headers.get("Expires")))}).catch(function(ke){D||x(new Error(ke.message))})};return z?function(ie,ge){if(En(),!Et)return ge(null);var fe=xr(ie.url);Et.then(function(ke){ke.match(fe).then(function(Ce){var Be=function(Ze){if(!Ze)return!1;var Ue=new Date(Ze.headers.get("Expires")||0),Ke=we(Ze.headers.get("Cache-Control")||"");return Ue>Date.now()&&!Ke["no-cache"]}(Ce);ke.delete(fe),Be&&ke.put(fe,Ce.clone()),ge(null,Ce,Be)}).catch(ge)}).catch(ge)}(R,X):X(null,null),{cancel:function(){D=!0,B||A.abort()}}}(o,c);if(he()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,c,void 0,!0)}var h;return function(y,x){var I=new v.XMLHttpRequest;for(var A in I.open(y.method||"GET",y.url,!0),y.type==="arrayBuffer"&&(I.responseType="arraybuffer"),y.headers)I.setRequestHeader(A,y.headers[A]);return y.type==="json"&&(I.responseType="text",I.setRequestHeader("Accept","application/json")),I.withCredentials=y.credentials==="include",I.onerror=function(){x(new Error(I.statusText))},I.onload=function(){if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){var R=I.response;if(y.type==="json")try{R=JSON.parse(I.response)}catch(B){return x(B)}x(null,R,I.getResponseHeader("Cache-Control"),I.getResponseHeader("Expires"))}else x(new So(I.statusText,I.status,y.url))},I.send(y.body),{cancel:function(){return I.abort()}}}(o,c)},pn=function(o,c){return al(P(o,{type:"arrayBuffer"}),c)},ni=function(o,c){return al(P(o,{method:"POST"}),c)},H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Fn=[],qr=0;var j=function(o,c){if(ii.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),qr>=Ca.MAX_PARALLEL_IMAGE_REQUESTS){var h={requestParameters:o,callback:c,cancelled:!1,cancel:function(){this.cancelled=!0}};return Fn.push(h),h}qr++;var y=!1,x=function(){if(!y)for(y=!0,qr--;Fn.length&&qr<Ca.MAX_PARALLEL_IMAGE_REQUESTS;){var A=Fn.shift();A.cancelled||(A.cancel=j(A.requestParameters,A.callback).cancel)}},I=pn(o,function(A,R,B,D){x(),A?c(A):R&&(Cn()?function(z,X){var Q=new v.Blob([new Uint8Array(z)],{type:"image/png"});v.createImageBitmap(Q).then(function(ie){X(null,ie)}).catch(function(ie){X(new Error("Could not load image because of "+ie.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(R,c):function(z,X,Q,ie){var ge=new v.Image,fe=v.URL;ge.onload=function(){X(null,ge),fe.revokeObjectURL(ge.src),ge.onload=null,v.requestAnimationFrame(function(){ge.src=H})},ge.onerror=function(){return X(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ke=new v.Blob([new Uint8Array(z)],{type:"image/png"});ge.cacheControl=Q,ge.expires=ie,ge.src=z.byteLength?fe.createObjectURL(ke):H}(R,c,B,D))});return{cancel:function(){I.cancel(),x()}}};function ee(o,c,h){h[o]&&h[o].indexOf(c)!==-1||(h[o]=h[o]||[],h[o].push(c))}function le(o,c,h){if(h&&h[o]){var y=h[o].indexOf(c);y!==-1&&h[o].splice(y,1)}}var me=function(o,c){c===void 0&&(c={}),P(this,c),this.type=o},Le=function(o){function c(h,y){y===void 0&&(y={}),o.call(this,"error",P({error:h},y))}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c}(me),Te=function(){};Te.prototype.on=function(o,c){return this._listeners=this._listeners||{},ee(o,c,this._listeners),this},Te.prototype.off=function(o,c){return le(o,c,this._listeners),le(o,c,this._oneTimeListeners),this},Te.prototype.once=function(o,c){return this._oneTimeListeners=this._oneTimeListeners||{},ee(o,c,this._oneTimeListeners),this},Te.prototype.fire=function(o,c){typeof o=="string"&&(o=new me(o,c||{}));var h=o.type;if(this.listens(h)){o.target=this;for(var y=0,x=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];y<x.length;y+=1)x[y].call(this,o);for(var I=0,A=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];I<A.length;I+=1){var R=A[I];le(h,R,this._oneTimeListeners),R.call(this,o)}var B=this._eventedParent;B&&(P(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),B.fire(o))}else o instanceof Le&&console.error(o.error);return this},Te.prototype.listens=function(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)},Te.prototype.setEventedParent=function(o,c){return this._eventedParent=o,this._eventedParentData=c,this};var ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ye=function(o,c,h,y){this.message=(o?o+": ":"")+h,y&&(this.identifier=y),c!=null&&c.__line__&&(this.line=c.__line__)};function Ne(o){var c=o.value;return c?[new ye(o.key,c,"constants have been deprecated as of v8")]:[]}function ct(o){for(var c=[],h=arguments.length-1;h-- >0;)c[h]=arguments[h+1];for(var y=0,x=c;y<x.length;y+=1){var I=x[y];for(var A in I)o[A]=I[A]}return o}function ft(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Je(o){if(Array.isArray(o))return o.map(Je);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){var c={};for(var h in o)c[h]=Je(o[h]);return c}return ft(o)}var _t=function(o){function c(h,y){o.call(this,y),this.message=y,this.key=h}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c}(Error),Xt=function(o,c){c===void 0&&(c=[]),this.parent=o,this.bindings={};for(var h=0,y=c;h<y.length;h+=1){var x=y[h];this.bindings[x[0]]=x[1]}};Xt.prototype.concat=function(o){return new Xt(this,o)},Xt.prototype.get=function(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(o+" not found in scope.")},Xt.prototype.has=function(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)};var Bt={kind:"null"},tt={kind:"number"},Ft={kind:"string"},Rt={kind:"boolean"},Wt={kind:"color"},Va={kind:"object"},rt={kind:"value"},Re={kind:"collator"},dt={kind:"formatted"},mt={kind:"resolvedImage"};function la(o,c){return{kind:"array",itemType:o,N:c}}function Ea(o){if(o.kind==="array"){var c=Ea(o.itemType);return typeof o.N=="number"?"array<"+c+", "+o.N+">":o.itemType.kind==="value"?"array":"array<"+c+">"}return o.kind}var ki=[Bt,tt,Ft,Rt,Wt,dt,Va,la(rt),mt];function Ga(o,c){if(c.kind==="error")return null;if(o.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!Ga(o.itemType,c.itemType))&&(typeof o.N!="number"||o.N===c.N))return null}else{if(o.kind===c.kind)return null;if(o.kind==="value"){for(var h=0,y=ki;h<y.length;h+=1)if(!Ga(y[h],c))return null}}return"Expected "+Ea(o)+" but found "+Ea(c)+" instead."}function Ui(o,c){return c.some(function(h){return h.kind===o.kind})}function Oa(o,c){return c.some(function(h){return h==="null"?o===null:h==="array"?Array.isArray(o):h==="object"?o&&!Array.isArray(o)&&typeof o=="object":h===typeof o})}var Ya=l(function(o,c){var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function y(R){return(R=Math.round(R))<0?0:R>255?255:R}function x(R){return y(R[R.length-1]==="%"?parseFloat(R)/100*255:parseInt(R))}function I(R){return(B=R[R.length-1]==="%"?parseFloat(R)/100:parseFloat(R))<0?0:B>1?1:B;var B}function A(R,B,D){return D<0?D+=1:D>1&&(D-=1),6*D<1?R+(B-R)*D*6:2*D<1?B:3*D<2?R+(B-R)*(2/3-D)*6:R}try{c.parseCSSColor=function(R){var B,D=R.replace(/ /g,"").toLowerCase();if(D in h)return h[D].slice();if(D[0]==="#")return D.length===4?(B=parseInt(D.substr(1),16))>=0&&B<=4095?[(3840&B)>>4|(3840&B)>>8,240&B|(240&B)>>4,15&B|(15&B)<<4,1]:null:D.length===7&&(B=parseInt(D.substr(1),16))>=0&&B<=16777215?[(16711680&B)>>16,(65280&B)>>8,255&B,1]:null;var z=D.indexOf("("),X=D.indexOf(")");if(z!==-1&&X+1===D.length){var Q=D.substr(0,z),ie=D.substr(z+1,X-(z+1)).split(","),ge=1;switch(Q){case"rgba":if(ie.length!==4)return null;ge=I(ie.pop());case"rgb":return ie.length!==3?null:[x(ie[0]),x(ie[1]),x(ie[2]),ge];case"hsla":if(ie.length!==4)return null;ge=I(ie.pop());case"hsl":if(ie.length!==3)return null;var fe=(parseFloat(ie[0])%360+360)%360/360,ke=I(ie[1]),Ce=I(ie[2]),Be=Ce<=.5?Ce*(ke+1):Ce+ke-Ce*ke,Ze=2*Ce-Be;return[y(255*A(Ze,Be,fe+1/3)),y(255*A(Ze,Be,fe)),y(255*A(Ze,Be,fe-1/3)),ge];default:return null}}return null}}catch{}}).parseCSSColor,gi=function(o,c,h,y){y===void 0&&(y=1),this.r=o,this.g=c,this.b=h,this.a=y};gi.parse=function(o){if(o){if(o instanceof gi)return o;if(typeof o=="string"){var c=Ya(o);if(c)return new gi(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3])}}},gi.prototype.toString=function(){var o=this.toArray(),c=o[1],h=o[2],y=o[3];return"rgba("+Math.round(o[0])+","+Math.round(c)+","+Math.round(h)+","+y+")"},gi.prototype.toArray=function(){var o=this.a;return o===0?[0,0,0,0]:[255*this.r/o,255*this.g/o,255*this.b/o,o]},gi.black=new gi(0,0,0,1),gi.white=new gi(1,1,1,1),gi.transparent=new gi(0,0,0,0),gi.red=new gi(1,0,0,1);var ts=function(o,c,h){this.sensitivity=o?c?"variant":"case":c?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ts.prototype.compare=function(o,c){return this.collator.compare(o,c)},ts.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var h_=function(o,c,h,y,x){this.text=o,this.image=c,this.scale=h,this.fontStack=y,this.textColor=x},wr=function(o){this.sections=o};wr.fromString=function(o){return new wr([new h_(o,null,null,null,null)])},wr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(o){return o.text.length!==0||o.image&&o.image.name.length!==0})},wr.factory=function(o){return o instanceof wr?o:wr.fromString(o)},wr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(o){return o.text}).join("")},wr.prototype.serialize=function(){for(var o=["format"],c=0,h=this.sections;c<h.length;c+=1){var y=h[c];if(y.image)o.push(["image",y.image.name]);else{o.push(y.text);var x={};y.fontStack&&(x["text-font"]=["literal",y.fontStack.split(",")]),y.scale&&(x["font-scale"]=y.scale),y.textColor&&(x["text-color"]=["rgba"].concat(y.textColor.toArray())),o.push(x)}}return o};var fs=function(o){this.name=o.name,this.available=o.available};function Uf(o,c,h,y){return typeof o=="number"&&o>=0&&o<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof h=="number"&&h>=0&&h<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:"Invalid rgba value ["+[o,c,h,y].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof y=="number"?[o,c,h,y]:[o,c,h]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function __(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof gi||o instanceof ts||o instanceof wr||o instanceof fs)return!0;if(Array.isArray(o)){for(var c=0,h=o;c<h.length;c+=1)if(!__(h[c]))return!1;return!0}if(typeof o=="object"){for(var y in o)if(!__(o[y]))return!1;return!0}return!1}function Dn(o){if(o===null)return Bt;if(typeof o=="string")return Ft;if(typeof o=="boolean")return Rt;if(typeof o=="number")return tt;if(o instanceof gi)return Wt;if(o instanceof ts)return Re;if(o instanceof wr)return dt;if(o instanceof fs)return mt;if(Array.isArray(o)){for(var c,h=o.length,y=0,x=o;y<x.length;y+=1){var I=Dn(x[y]);if(c){if(c===I)continue;c=rt;break}c=I}return la(c||rt,h)}return Va}function m_(o){var c=typeof o;return o===null?"":c==="string"||c==="number"||c==="boolean"?String(o):o instanceof gi||o instanceof wr||o instanceof fs?o.toString():JSON.stringify(o)}fs.prototype.toString=function(){return this.name},fs.fromString=function(o){return o?new fs({name:o,available:!1}):null},fs.prototype.serialize=function(){return["image",this.name]};var as=function(o,c){this.type=o,this.value=c};as.parse=function(o,c){if(o.length!==2)return c.error("'literal' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(!__(o[1]))return c.error("invalid value");var h=o[1],y=Dn(h),x=c.expectedType;return y.kind!=="array"||y.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(y=x),new as(y,h)},as.prototype.evaluate=function(){return this.value},as.prototype.eachChild=function(){},as.prototype.outputDefined=function(){return!0},as.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof gi?["rgba"].concat(this.value.toArray()):this.value instanceof wr?this.value.serialize():this.value};var Ir=function(o){this.name="ExpressionEvaluationError",this.message=o};Ir.prototype.toJSON=function(){return this.message};var Ao={string:Ft,number:tt,boolean:Rt,object:Va},gn=function(o,c){this.type=o,this.args=c};gn.parse=function(o,c){if(o.length<2)return c.error("Expected at least one argument.");var h,y=1,x=o[0];if(x==="array"){var I,A;if(o.length>2){var R=o[1];if(typeof R!="string"||!(R in Ao)||R==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);I=Ao[R],y++}else I=rt;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return c.error('The length argument to "array" must be a positive integer literal',2);A=o[2],y++}h=la(I,A)}else h=Ao[x];for(var B=[];y<o.length;y++){var D=c.parse(o[y],y,rt);if(!D)return null;B.push(D)}return new gn(h,B)},gn.prototype.evaluate=function(o){for(var c=0;c<this.args.length;c++){var h=this.args[c].evaluate(o);if(!Ga(this.type,Dn(h)))return h;if(c===this.args.length-1)throw new Ir("Expected value to be of type "+Ea(this.type)+", but found "+Ea(Dn(h))+" instead.")}return null},gn.prototype.eachChild=function(o){this.args.forEach(o)},gn.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},gn.prototype.serialize=function(){var o=this.type,c=[o.kind];if(o.kind==="array"){var h=o.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){c.push(h.kind);var y=o.N;(typeof y=="number"||this.args.length>1)&&c.push(y)}}return c.concat(this.args.map(function(x){return x.serialize()}))};var il=function(o){this.type=dt,this.sections=o};il.parse=function(o,c){if(o.length<2)return c.error("Expected at least one argument.");var h=o[1];if(!Array.isArray(h)&&typeof h=="object")return c.error("First argument must be an image or text section.");for(var y=[],x=!1,I=1;I<=o.length-1;++I){var A=o[I];if(x&&typeof A=="object"&&!Array.isArray(A)){x=!1;var R=null;if(A["font-scale"]&&!(R=c.parse(A["font-scale"],1,tt)))return null;var B=null;if(A["text-font"]&&!(B=c.parse(A["text-font"],1,la(Ft))))return null;var D=null;if(A["text-color"]&&!(D=c.parse(A["text-color"],1,Wt)))return null;var z=y[y.length-1];z.scale=R,z.font=B,z.textColor=D}else{var X=c.parse(o[I],1,rt);if(!X)return null;var Q=X.type.kind;if(Q!=="string"&&Q!=="value"&&Q!=="null"&&Q!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,y.push({content:X,scale:null,font:null,textColor:null})}}return new il(y)},il.prototype.evaluate=function(o){return new wr(this.sections.map(function(c){var h=c.content.evaluate(o);return Dn(h)===mt?new h_("",h,null,null,null):new h_(m_(h),null,c.scale?c.scale.evaluate(o):null,c.font?c.font.evaluate(o).join(","):null,c.textColor?c.textColor.evaluate(o):null)}))},il.prototype.eachChild=function(o){for(var c=0,h=this.sections;c<h.length;c+=1){var y=h[c];o(y.content),y.scale&&o(y.scale),y.font&&o(y.font),y.textColor&&o(y.textColor)}},il.prototype.outputDefined=function(){return!1},il.prototype.serialize=function(){for(var o=["format"],c=0,h=this.sections;c<h.length;c+=1){var y=h[c];o.push(y.content.serialize());var x={};y.scale&&(x["font-scale"]=y.scale.serialize()),y.font&&(x["text-font"]=y.font.serialize()),y.textColor&&(x["text-color"]=y.textColor.serialize()),o.push(x)}return o};var io=function(o){this.type=mt,this.input=o};io.parse=function(o,c){if(o.length!==2)return c.error("Expected two arguments.");var h=c.parse(o[1],1,Ft);return h?new io(h):c.error("No image name provided.")},io.prototype.evaluate=function(o){var c=this.input.evaluate(o),h=fs.fromString(c);return h&&o.availableImages&&(h.available=o.availableImages.indexOf(c)>-1),h},io.prototype.eachChild=function(o){o(this.input)},io.prototype.outputDefined=function(){return!1},io.prototype.serialize=function(){return["image",this.input.serialize()]};var fb={"to-boolean":Rt,"to-color":Wt,"to-number":tt,"to-string":Ft},To=function(o,c){this.type=o,this.args=c};To.parse=function(o,c){if(o.length<2)return c.error("Expected at least one argument.");var h=o[0];if((h==="to-boolean"||h==="to-string")&&o.length!==2)return c.error("Expected one argument.");for(var y=fb[h],x=[],I=1;I<o.length;I++){var A=c.parse(o[I],I,rt);if(!A)return null;x.push(A)}return new To(y,x)},To.prototype.evaluate=function(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){for(var c,h,y=0,x=this.args;y<x.length;y+=1){if(h=null,(c=x[y].evaluate(o))instanceof gi)return c;if(typeof c=="string"){var I=o.parseColor(c);if(I)return I}else if(Array.isArray(c)&&!(h=c.length<3||c.length>4?"Invalid rbga value "+JSON.stringify(c)+": expected an array containing either three or four numeric values.":Uf(c[0],c[1],c[2],c[3])))return new gi(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new Ir(h||"Could not parse color from value '"+(typeof c=="string"?c:String(JSON.stringify(c)))+"'")}if(this.type.kind==="number"){for(var A=null,R=0,B=this.args;R<B.length;R+=1){if((A=B[R].evaluate(o))===null)return 0;var D=Number(A);if(!isNaN(D))return D}throw new Ir("Could not convert "+JSON.stringify(A)+" to number.")}return this.type.kind==="formatted"?wr.fromString(m_(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?fs.fromString(m_(this.args[0].evaluate(o))):m_(this.args[0].evaluate(o))},To.prototype.eachChild=function(o){this.args.forEach(o)},To.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},To.prototype.serialize=function(){if(this.type.kind==="formatted")return new il([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new io(this.args[0]).serialize();var o=["to-"+this.type.kind];return this.eachChild(function(c){o.push(c.serialize())}),o};var XI=["Unknown","Point","LineString","Polygon"],$l=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};$l.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},$l.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?XI[this.feature.type]:this.feature.type:null},$l.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},$l.prototype.canonicalID=function(){return this.canonical},$l.prototype.properties=function(){return this.feature&&this.feature.properties||{}},$l.prototype.parseColor=function(o){var c=this._parseColorCache[o];return c||(c=this._parseColorCache[o]=gi.parse(o)),c};var Gr=function(o,c,h,y){this.name=o,this.type=c,this._evaluate=h,this.args=y};Gr.prototype.evaluate=function(o){return this._evaluate(o,this.args)},Gr.prototype.eachChild=function(o){this.args.forEach(o)},Gr.prototype.outputDefined=function(){return!1},Gr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(o){return o.serialize()}))},Gr.parse=function(o,c){var h,y=o[0],x=Gr.definitions[y];if(!x)return c.error('Unknown expression "'+y+'". If you wanted a literal array, use ["literal", [...]].',0);for(var I=Array.isArray(x)?x[0]:x.type,A=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,R=A.filter(function(da){var Vt=da[0];return!Array.isArray(Vt)||Vt.length===o.length-1}),B=null,D=0,z=R;D<z.length;D+=1){var X=z[D],Q=X[0],ie=X[1];B=new Ou(c.registry,c.path,null,c.scope);for(var ge=[],fe=!1,ke=1;ke<o.length;ke++){var Ce=o[ke],Be=Array.isArray(Q)?Q[ke-1]:Q.type,Ze=B.parse(Ce,1+ge.length,Be);if(!Ze){fe=!0;break}ge.push(Ze)}if(!fe)if(Array.isArray(Q)&&Q.length!==ge.length)B.error("Expected "+Q.length+" arguments, but found "+ge.length+" instead.");else{for(var Ue=0;Ue<ge.length;Ue++){var Ke=Array.isArray(Q)?Q[Ue]:Q.type,ot=ge[Ue];B.concat(Ue+1).checkSubtype(Ke,ot.type)}if(B.errors.length===0)return new Gr(y,I,ie,ge)}}if(R.length===1)(h=c.errors).push.apply(h,B.errors);else{for(var vt=(R.length?R:A).map(function(da){var Vt;return Vt=da[0],Array.isArray(Vt)?"("+Vt.map(Ea).join(", ")+")":"("+Ea(Vt.type)+"...)"}).join(" | "),Mt=[],ra=1;ra<o.length;ra++){var Dt=c.parse(o[ra],1+Mt.length);if(!Dt)return null;Mt.push(Ea(Dt.type))}c.error("Expected arguments of type "+vt+", but found ("+Mt.join(", ")+") instead.")}return null},Gr.register=function(o,c){for(var h in Gr.definitions=c,c)o[h]=Gr};var Cl=function(o,c,h){this.type=Re,this.locale=h,this.caseSensitive=o,this.diacriticSensitive=c};function is(o,c){o[0]=Math.min(o[0],c[0]),o[1]=Math.min(o[1],c[1]),o[2]=Math.max(o[2],c[0]),o[3]=Math.max(o[3],c[1])}function kc(o,c){return!(o[0]<=c[0]||o[2]>=c[2]||o[1]<=c[1]||o[3]>=c[3])}function qI(o,c){var h=(180+o[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,x=Math.pow(2,c.z);return[Math.round(h*x*8192),Math.round(y*x*8192)]}function YI(o,c,h){return c[1]>o[1]!=h[1]>o[1]&&o[0]<(h[0]-c[0])*(o[1]-c[1])/(h[1]-c[1])+c[0]}function Hf(o,c){for(var h,y,x,I,A,R,B,D=!1,z=0,X=c.length;z<X;z++)for(var Q=c[z],ie=0,ge=Q.length;ie<ge-1;ie++){if((I=(h=o)[0]-(y=Q[ie])[0])*(B=h[1]-(x=Q[ie+1])[1])-(R=h[0]-x[0])*(A=h[1]-y[1])==0&&I*R<=0&&A*B<=0)return!1;YI(o,Q[ie],Q[ie+1])&&(D=!D)}return D}function KI(o,c){for(var h=0;h<c.length;h++)if(Hf(o,c[h]))return!0;return!1}function yb(o,c,h,y){var x=y[0]-h[0],I=y[1]-h[1],A=(o[0]-h[0])*I-x*(o[1]-h[1]),R=(c[0]-h[0])*I-x*(c[1]-h[1]);return A>0&&R<0||A<0&&R>0}function jI(o,c,h){for(var y=0,x=h;y<x.length;y+=1)for(var I=x[y],A=0;A<I.length-1;++A)if((X=[(z=I[A+1])[0]-(D=I[A])[0],z[1]-D[1]])[0]*(Q=[(B=c)[0]-(R=o)[0],B[1]-R[1]])[1]-X[1]*Q[0]!=0&&yb(R,B,D,z)&&yb(D,z,R,B))return!0;var R,B,D,z,X,Q;return!1}function bb(o,c){for(var h=0;h<o.length;++h)if(!Hf(o[h],c))return!1;for(var y=0;y<o.length-1;++y)if(jI(o[y],o[y+1],c))return!1;return!0}function vb(o,c){for(var h=0;h<c.length;h++)if(bb(o,c[h]))return!0;return!1}function jd(o,c,h){for(var y=[],x=0;x<o.length;x++){for(var I=[],A=0;A<o[x].length;A++){var R=qI(o[x][A],h);is(c,R),I.push(R)}y.push(I)}return y}function Xf(o,c,h){for(var y=[],x=0;x<o.length;x++){var I=jd(o[x],c,h);y.push(I)}return y}function p_(o,c,h,y){if(o[0]<h[0]||o[0]>h[2]){var x=.5*y,I=o[0]-h[0]>x?-y:h[0]-o[0]>x?y:0;I===0&&(I=o[0]-h[2]>x?-y:h[2]-o[0]>x?y:0),o[0]+=I}is(c,o)}function xb(o,c,h,y){for(var x=8192*Math.pow(2,y.z),I=[8192*y.x,8192*y.y],A=[],R=0,B=o;R<B.length;R+=1)for(var D=0,z=B[R];D<z.length;D+=1){var X=z[D],Q=[X.x+I[0],X.y+I[1]];p_(Q,c,h,x),A.push(Q)}return A}function ip(o,c,h,y){for(var x,I=8192*Math.pow(2,y.z),A=[8192*y.x,8192*y.y],R=[],B=0,D=o;B<D.length;B+=1){for(var z=[],X=0,Q=D[B];X<Q.length;X+=1){var ie=Q[X],ge=[ie.x+A[0],ie.y+A[1]];is(c,ge),z.push(ge)}R.push(z)}if(c[2]-c[0]<=I/2){(x=c)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(var fe=0,ke=R;fe<ke.length;fe+=1)for(var Ce=0,Be=ke[fe];Ce<Be.length;Ce+=1)p_(Be[Ce],c,h,I)}return R}Cl.parse=function(o,c){if(o.length!==2)return c.error("Expected one argument.");var h=o[1];if(typeof h!="object"||Array.isArray(h))return c.error("Collator options argument must be an object.");var y=c.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Rt);if(!y)return null;var x=c.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Rt);if(!x)return null;var I=null;return h.locale&&!(I=c.parse(h.locale,1,Ft))?null:new Cl(y,x,I)},Cl.prototype.evaluate=function(o){return new ts(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)},Cl.prototype.eachChild=function(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)},Cl.prototype.outputDefined=function(){return!1},Cl.prototype.serialize=function(){var o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]};var Eo=function(o,c){this.type=Rt,this.geojson=o,this.geometries=c};function ku(o){if(o instanceof Gr&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Eo)return!1;var c=!0;return o.eachChild(function(h){c&&!ku(h)&&(c=!1)}),c}function Wu(o){if(o instanceof Gr&&o.name==="feature-state")return!1;var c=!0;return o.eachChild(function(h){c&&!Wu(h)&&(c=!1)}),c}function Wc(o,c){if(o instanceof Gr&&c.indexOf(o.name)>=0)return!1;var h=!0;return o.eachChild(function(y){h&&!Wc(y,c)&&(h=!1)}),h}Eo.parse=function(o,c){if(o.length!==2)return c.error("'within' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(__(o[1])){var h=o[1];if(h.type==="FeatureCollection")for(var y=0;y<h.features.length;++y){var x=h.features[y].geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new Eo(h,h.features[y].geometry)}else if(h.type==="Feature"){var I=h.geometry.type;if(I==="Polygon"||I==="MultiPolygon")return new Eo(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Eo(h,h)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Eo.prototype.evaluate=function(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(c,h){var y=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],I=c.canonicalID();if(h.type==="Polygon"){var A=jd(h.coordinates,x,I),R=xb(c.geometry(),y,x,I);if(!kc(y,x))return!1;for(var B=0,D=R;B<D.length;B+=1)if(!Hf(D[B],A))return!1}if(h.type==="MultiPolygon"){var z=Xf(h.coordinates,x,I),X=xb(c.geometry(),y,x,I);if(!kc(y,x))return!1;for(var Q=0,ie=X;Q<ie.length;Q+=1)if(!KI(ie[Q],z))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(c,h){var y=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],I=c.canonicalID();if(h.type==="Polygon"){var A=jd(h.coordinates,x,I),R=ip(c.geometry(),y,x,I);if(!kc(y,x))return!1;for(var B=0,D=R;B<D.length;B+=1)if(!bb(D[B],A))return!1}if(h.type==="MultiPolygon"){var z=Xf(h.coordinates,x,I),X=ip(c.geometry(),y,x,I);if(!kc(y,x))return!1;for(var Q=0,ie=X;Q<ie.length;Q+=1)if(!vb(ie[Q],z))return!1}return!0}(o,this.geometries)}return!1},Eo.prototype.eachChild=function(){},Eo.prototype.outputDefined=function(){return!0},Eo.prototype.serialize=function(){return["within",this.geojson]};var Gu=function(o,c){this.type=c.type,this.name=o,this.boundExpression=c};Gu.parse=function(o,c){if(o.length!==2||typeof o[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");var h=o[1];return c.scope.has(h)?new Gu(h,c.scope.get(h)):c.error('Unknown variable "'+h+'". Make sure "'+h+'" has been bound in an enclosing "let" expression before using it.',1)},Gu.prototype.evaluate=function(o){return this.boundExpression.evaluate(o)},Gu.prototype.eachChild=function(){},Gu.prototype.outputDefined=function(){return!1},Gu.prototype.serialize=function(){return["var",this.name]};var Ou=function(o,c,h,y,x){c===void 0&&(c=[]),y===void 0&&(y=new Xt),x===void 0&&(x=[]),this.registry=o,this.path=c,this.key=c.map(function(I){return"["+I+"]"}).join(""),this.scope=y,this.errors=x,this.expectedType=h};function np(o,c){for(var h,y=o.length-1,x=0,I=y,A=0;x<=I;)if((h=o[A=Math.floor((x+I)/2)])<=c){if(A===y||c<o[A+1])return A;x=A+1}else{if(!(h>c))throw new Ir("Input is not a number.");I=A-1}return 0}Ou.prototype.parse=function(o,c,h,y,x){return x===void 0&&(x={}),c?this.concat(c,h,y)._parse(o,x):this._parse(o,x)},Ou.prototype._parse=function(o,c){function h(D,z,X){return X==="assert"?new gn(z,[D]):X==="coerce"?new To(z,[D]):D}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var y=o[0];if(typeof y!="string")return this.error("Expression name must be a string, but found "+typeof y+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var x=this.registry[y];if(x){var I=x.parse(o,this);if(!I)return null;if(this.expectedType){var A=this.expectedType,R=I.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||R.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||R.kind!=="value"&&R.kind!=="string"){if(this.checkSubtype(A,R))return null}else I=h(I,A,c.typeAnnotation||"coerce");else I=h(I,A,c.typeAnnotation||"assert")}if(!(I instanceof as)&&I.type.kind!=="resolvedImage"&&function D(z){if(z instanceof Gu)return D(z.boundExpression);if(z instanceof Gr&&z.name==="error"||z instanceof Cl||z instanceof Eo)return!1;var X=z instanceof To||z instanceof gn,Q=!0;return z.eachChild(function(ie){Q=X?Q&&D(ie):Q&&ie instanceof as}),!!Q&&ku(z)&&Wc(z,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(I)){var B=new $l;try{I=new as(I.type,I.evaluate(B))}catch(D){return this.error(D.message),null}}return I}return this.error('Unknown expression "'+y+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof o+" instead.")},Ou.prototype.concat=function(o,c,h){var y=typeof o=="number"?this.path.concat(o):this.path,x=h?this.scope.concat(h):this.scope;return new Ou(this.registry,y,c||null,x,this.errors)},Ou.prototype.error=function(o){for(var c=[],h=arguments.length-1;h-- >0;)c[h]=arguments[h+1];var y=""+this.key+c.map(function(x){return"["+x+"]"}).join("");this.errors.push(new _t(y,o))},Ou.prototype.checkSubtype=function(o,c){var h=Ga(o,c);return h&&this.error(h),h};var Rs=function(o,c,h){this.type=o,this.input=c,this.labels=[],this.outputs=[];for(var y=0,x=h;y<x.length;y+=1){var I=x[y],A=I[1];this.labels.push(I[0]),this.outputs.push(A)}};function Yn(o,c,h){return o*(1-h)+c*h}Rs.parse=function(o,c){if(o.length-1<4)return c.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");var h=c.parse(o[1],1,tt);if(!h)return null;var y=[],x=null;c.expectedType&&c.expectedType.kind!=="value"&&(x=c.expectedType);for(var I=1;I<o.length;I+=2){var A=I===1?-1/0:o[I],R=o[I+1],B=I,D=I+1;if(typeof A!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(y.length&&y[y.length-1][0]>=A)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',B);var z=c.parse(R,D,x);if(!z)return null;x=x||z.type,y.push([A,z])}return new Rs(x,h,y)},Rs.prototype.evaluate=function(o){var c=this.labels,h=this.outputs;if(c.length===1)return h[0].evaluate(o);var y=this.input.evaluate(o);if(y<=c[0])return h[0].evaluate(o);var x=c.length;return y>=c[x-1]?h[x-1].evaluate(o):h[np(c,y)].evaluate(o)},Rs.prototype.eachChild=function(o){o(this.input);for(var c=0,h=this.outputs;c<h.length;c+=1)o(h[c])},Rs.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})},Rs.prototype.serialize=function(){for(var o=["step",this.input.serialize()],c=0;c<this.labels.length;c++)c>0&&o.push(this.labels[c]),o.push(this.outputs[c].serialize());return o};var $d=Object.freeze({__proto__:null,number:Yn,color:function(o,c,h){return new gi(Yn(o.r,c.r,h),Yn(o.g,c.g,h),Yn(o.b,c.b,h),Yn(o.a,c.a,h))},array:function(o,c,h){return o.map(function(y,x){return Yn(y,c[x],h)})}}),wb=6/29*3*(6/29),$I=Math.PI/180,JI=180/Math.PI;function qf(o){return o>.008856451679035631?Math.pow(o,1/3):o/wb+4/29}function Yf(o){return o>6/29?o*o*o:wb*(o-4/29)}function Kf(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function jf(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Ib(o){var c=jf(o.r),h=jf(o.g),y=jf(o.b),x=qf((.4124564*c+.3575761*h+.1804375*y)/.95047),I=qf((.2126729*c+.7151522*h+.072175*y)/1);return{l:116*I-16,a:500*(x-I),b:200*(I-qf((.0193339*c+.119192*h+.9503041*y)/1.08883)),alpha:o.a}}function Cb(o){var c=(o.l+16)/116,h=isNaN(o.a)?c:c+o.a/500,y=isNaN(o.b)?c:c-o.b/200;return c=1*Yf(c),h=.95047*Yf(h),y=1.08883*Yf(y),new gi(Kf(3.2404542*h-1.5371385*c-.4985314*y),Kf(-.969266*h+1.8760108*c+.041556*y),Kf(.0556434*h-.2040259*c+1.0572252*y),o.alpha)}function QI(o,c,h){var y=c-o;return o+h*(y>180||y<-180?y-360*Math.round(y/360):y)}var g_={forward:Ib,reverse:Cb,interpolate:function(o,c,h){return{l:Yn(o.l,c.l,h),a:Yn(o.a,c.a,h),b:Yn(o.b,c.b,h),alpha:Yn(o.alpha,c.alpha,h)}}},f_={forward:function(o){var c=Ib(o),h=c.l,y=c.a,x=c.b,I=Math.atan2(x,y)*JI;return{h:I<0?I+360:I,c:Math.sqrt(y*y+x*x),l:h,alpha:o.a}},reverse:function(o){var c=o.h*$I,h=o.c;return Cb({l:o.l,a:Math.cos(c)*h,b:Math.sin(c)*h,alpha:o.alpha})},interpolate:function(o,c,h){return{h:QI(o.h,c.h,h),c:Yn(o.c,c.c,h),l:Yn(o.l,c.l,h),alpha:Yn(o.alpha,c.alpha,h)}}},Sb=Object.freeze({__proto__:null,lab:g_,hcl:f_}),Or=function(o,c,h,y,x){this.type=o,this.operator=c,this.interpolation=h,this.input=y,this.labels=[],this.outputs=[];for(var I=0,A=x;I<A.length;I+=1){var R=A[I],B=R[1];this.labels.push(R[0]),this.outputs.push(B)}};function $f(o,c,h,y){var x=y-h,I=o-h;return x===0?0:c===1?I/x:(Math.pow(c,I)-1)/(Math.pow(c,x)-1)}Or.interpolationFactor=function(o,c,h,y){var x=0;if(o.name==="exponential")x=$f(c,o.base,h,y);else if(o.name==="linear")x=$f(c,1,h,y);else if(o.name==="cubic-bezier"){var I=o.controlPoints;x=new u(I[0],I[1],I[2],I[3]).solve($f(c,1,h,y))}return x},Or.parse=function(o,c){var h=o[0],y=o[1],x=o[2],I=o.slice(3);if(!Array.isArray(y)||y.length===0)return c.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){var A=y[1];if(typeof A!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:A}}else{if(y[0]!=="cubic-bezier")return c.error("Unknown interpolation type "+String(y[0]),1,0);var R=y.slice(1);if(R.length!==4||R.some(function(ke){return typeof ke!="number"||ke<0||ke>1}))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:R}}if(o.length-1<4)return c.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(!(x=c.parse(x,2,tt)))return null;var B=[],D=null;h==="interpolate-hcl"||h==="interpolate-lab"?D=Wt:c.expectedType&&c.expectedType.kind!=="value"&&(D=c.expectedType);for(var z=0;z<I.length;z+=2){var X=I[z],Q=I[z+1],ie=z+3,ge=z+4;if(typeof X!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ie);if(B.length&&B[B.length-1][0]>=X)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ie);var fe=c.parse(Q,ge,D);if(!fe)return null;D=D||fe.type,B.push([X,fe])}return D.kind==="number"||D.kind==="color"||D.kind==="array"&&D.itemType.kind==="number"&&typeof D.N=="number"?new Or(D,h,y,x,B):c.error("Type "+Ea(D)+" is not interpolatable.")},Or.prototype.evaluate=function(o){var c=this.labels,h=this.outputs;if(c.length===1)return h[0].evaluate(o);var y=this.input.evaluate(o);if(y<=c[0])return h[0].evaluate(o);var x=c.length;if(y>=c[x-1])return h[x-1].evaluate(o);var I=np(c,y),A=Or.interpolationFactor(this.interpolation,y,c[I],c[I+1]),R=h[I].evaluate(o),B=h[I+1].evaluate(o);return this.operator==="interpolate"?$d[this.type.kind.toLowerCase()](R,B,A):this.operator==="interpolate-hcl"?f_.reverse(f_.interpolate(f_.forward(R),f_.forward(B),A)):g_.reverse(g_.interpolate(g_.forward(R),g_.forward(B),A))},Or.prototype.eachChild=function(o){o(this.input);for(var c=0,h=this.outputs;c<h.length;c+=1)o(h[c])},Or.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})},Or.prototype.serialize=function(){var o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var c=[this.operator,o,this.input.serialize()],h=0;h<this.labels.length;h++)c.push(this.labels[h],this.outputs[h].serialize());return c};var Pu=function(o,c){this.type=o,this.args=c};Pu.parse=function(o,c){if(o.length<2)return c.error("Expectected at least one argument.");var h=null,y=c.expectedType;y&&y.kind!=="value"&&(h=y);for(var x=[],I=0,A=o.slice(1);I<A.length;I+=1){var R=c.parse(A[I],1+x.length,h,void 0,{typeAnnotation:"omit"});if(!R)return null;h=h||R.type,x.push(R)}var B=y&&x.some(function(D){return Ga(y,D.type)});return new Pu(B?rt:h,x)},Pu.prototype.evaluate=function(o){for(var c,h=null,y=0,x=0,I=this.args;x<I.length&&(y++,(h=I[x].evaluate(o))&&h instanceof fs&&!h.available&&(c||(c=h.name),h=null,y===this.args.length&&(h=c)),h===null);x+=1);return h},Pu.prototype.eachChild=function(o){this.args.forEach(o)},Pu.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},Pu.prototype.serialize=function(){var o=["coalesce"];return this.eachChild(function(c){o.push(c.serialize())}),o};var Bu=function(o,c){this.type=c.type,this.bindings=[].concat(o),this.result=c};Bu.prototype.evaluate=function(o){return this.result.evaluate(o)},Bu.prototype.eachChild=function(o){for(var c=0,h=this.bindings;c<h.length;c+=1)o(h[c][1]);o(this.result)},Bu.parse=function(o,c){if(o.length<4)return c.error("Expected at least 3 arguments, but found "+(o.length-1)+" instead.");for(var h=[],y=1;y<o.length-1;y+=2){var x=o[y];if(typeof x!="string")return c.error("Expected string, but found "+typeof x+" instead.",y);if(/[^a-zA-Z0-9_]/.test(x))return c.error("Variable names must contain only alphanumeric characters or '_'.",y);var I=c.parse(o[y+1],y+1);if(!I)return null;h.push([x,I])}var A=c.parse(o[o.length-1],o.length-1,c.expectedType,h);return A?new Bu(h,A):null},Bu.prototype.outputDefined=function(){return this.result.outputDefined()},Bu.prototype.serialize=function(){for(var o=["let"],c=0,h=this.bindings;c<h.length;c+=1){var y=h[c];o.push(y[0],y[1].serialize())}return o.push(this.result.serialize()),o};var Gc=function(o,c,h){this.type=o,this.index=c,this.input=h};Gc.parse=function(o,c){if(o.length!==3)return c.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var h=c.parse(o[1],1,tt),y=c.parse(o[2],2,la(c.expectedType||rt));return h&&y?new Gc(y.type.itemType,h,y):null},Gc.prototype.evaluate=function(o){var c=this.index.evaluate(o),h=this.input.evaluate(o);if(c<0)throw new Ir("Array index out of bounds: "+c+" < 0.");if(c>=h.length)throw new Ir("Array index out of bounds: "+c+" > "+(h.length-1)+".");if(c!==Math.floor(c))throw new Ir("Array index must be an integer, but found "+c+" instead.");return h[c]},Gc.prototype.eachChild=function(o){o(this.index),o(this.input)},Gc.prototype.outputDefined=function(){return!1},Gc.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Oc=function(o,c){this.type=Rt,this.needle=o,this.haystack=c};Oc.parse=function(o,c){if(o.length!==3)return c.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var h=c.parse(o[1],1,rt),y=c.parse(o[2],2,rt);return h&&y?Ui(h.type,[Rt,Ft,tt,Bt,rt])?new Oc(h,y):c.error("Expected first argument to be of type boolean, string, number or null, but found "+Ea(h.type)+" instead"):null},Oc.prototype.evaluate=function(o){var c=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(!h)return!1;if(!Oa(c,["boolean","string","number","null"]))throw new Ir("Expected first argument to be of type boolean, string, number or null, but found "+Ea(Dn(c))+" instead.");if(!Oa(h,["string","array"]))throw new Ir("Expected second argument to be of type array or string, but found "+Ea(Dn(h))+" instead.");return h.indexOf(c)>=0},Oc.prototype.eachChild=function(o){o(this.needle),o(this.haystack)},Oc.prototype.outputDefined=function(){return!0},Oc.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Nu=function(o,c,h){this.type=tt,this.needle=o,this.haystack=c,this.fromIndex=h};Nu.parse=function(o,c){if(o.length<=2||o.length>=5)return c.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var h=c.parse(o[1],1,rt),y=c.parse(o[2],2,rt);if(!h||!y)return null;if(!Ui(h.type,[Rt,Ft,tt,Bt,rt]))return c.error("Expected first argument to be of type boolean, string, number or null, but found "+Ea(h.type)+" instead");if(o.length===4){var x=c.parse(o[3],3,tt);return x?new Nu(h,y,x):null}return new Nu(h,y)},Nu.prototype.evaluate=function(o){var c=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(!Oa(c,["boolean","string","number","null"]))throw new Ir("Expected first argument to be of type boolean, string, number or null, but found "+Ea(Dn(c))+" instead.");if(!Oa(h,["string","array"]))throw new Ir("Expected second argument to be of type array or string, but found "+Ea(Dn(h))+" instead.");if(this.fromIndex){var y=this.fromIndex.evaluate(o);return h.indexOf(c,y)}return h.indexOf(c)},Nu.prototype.eachChild=function(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)},Nu.prototype.outputDefined=function(){return!1},Nu.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Pc=function(o,c,h,y,x,I){this.inputType=o,this.type=c,this.input=h,this.cases=y,this.outputs=x,this.otherwise=I};Pc.parse=function(o,c){if(o.length<5)return c.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if(o.length%2!=1)return c.error("Expected an even number of arguments.");var h,y;c.expectedType&&c.expectedType.kind!=="value"&&(y=c.expectedType);for(var x={},I=[],A=2;A<o.length-1;A+=2){var R=o[A],B=o[A+1];Array.isArray(R)||(R=[R]);var D=c.concat(A);if(R.length===0)return D.error("Expected at least one branch label.");for(var z=0,X=R;z<X.length;z+=1){var Q=X[z];if(typeof Q!="number"&&typeof Q!="string")return D.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return D.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Q=="number"&&Math.floor(Q)!==Q)return D.error("Numeric branch labels must be integer values.");if(h){if(D.checkSubtype(h,Dn(Q)))return null}else h=Dn(Q);if(x[String(Q)]!==void 0)return D.error("Branch labels must be unique.");x[String(Q)]=I.length}var ie=c.parse(B,A,y);if(!ie)return null;y=y||ie.type,I.push(ie)}var ge=c.parse(o[1],1,rt);if(!ge)return null;var fe=c.parse(o[o.length-1],o.length-1,y);return fe?ge.type.kind!=="value"&&c.concat(1).checkSubtype(h,ge.type)?null:new Pc(h,y,ge,x,I,fe):null},Pc.prototype.evaluate=function(o){var c=this.input.evaluate(o);return(Dn(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(o)},Pc.prototype.eachChild=function(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)},Pc.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})&&this.otherwise.outputDefined()},Pc.prototype.serialize=function(){for(var o=this,c=["match",this.input.serialize()],h=[],y={},x=0,I=Object.keys(this.cases).sort();x<I.length;x+=1){var A=I[x];(X=y[this.cases[A]])===void 0?(y[this.cases[A]]=h.length,h.push([this.cases[A],[A]])):h[X][1].push(A)}for(var R=function(ie){return o.inputType.kind==="number"?Number(ie):ie},B=0,D=h;B<D.length;B+=1){var z=D[B],X=z[0],Q=z[1];c.push(Q.length===1?R(Q[0]):Q.map(R)),c.push(this.outputs[outputIndex$1].serialize())}return c.push(this.otherwise.serialize()),c};var Bc=function(o,c,h){this.type=o,this.branches=c,this.otherwise=h};Bc.parse=function(o,c){if(o.length<4)return c.error("Expected at least 3 arguments, but found only "+(o.length-1)+".");if(o.length%2!=0)return c.error("Expected an odd number of arguments.");var h;c.expectedType&&c.expectedType.kind!=="value"&&(h=c.expectedType);for(var y=[],x=1;x<o.length-1;x+=2){var I=c.parse(o[x],x,Rt);if(!I)return null;var A=c.parse(o[x+1],x+1,h);if(!A)return null;y.push([I,A]),h=h||A.type}var R=c.parse(o[o.length-1],o.length-1,h);return R?new Bc(h,y,R):null},Bc.prototype.evaluate=function(o){for(var c=0,h=this.branches;c<h.length;c+=1){var y=h[c],x=y[1];if(y[0].evaluate(o))return x.evaluate(o)}return this.otherwise.evaluate(o)},Bc.prototype.eachChild=function(o){for(var c=0,h=this.branches;c<h.length;c+=1){var y=h[c],x=y[1];o(y[0]),o(x)}o(this.otherwise)},Bc.prototype.outputDefined=function(){return this.branches.every(function(o){return o[1].outputDefined()})&&this.otherwise.outputDefined()},Bc.prototype.serialize=function(){var o=["case"];return this.eachChild(function(c){o.push(c.serialize())}),o};var Fu=function(o,c,h,y){this.type=o,this.input=c,this.beginIndex=h,this.endIndex=y};function Ab(o,c){return o==="=="||o==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function Tb(o,c,h,y){return y.compare(c,h)===0}function Hi(o,c,h){var y=o!=="=="&&o!=="!=";return function(){function x(I,A,R){this.type=Rt,this.lhs=I,this.rhs=A,this.collator=R,this.hasUntypedArgument=I.type.kind==="value"||A.type.kind==="value"}return x.parse=function(I,A){if(I.length!==3&&I.length!==4)return A.error("Expected two or three arguments.");var R=I[0],B=A.parse(I[1],1,rt);if(!B)return null;if(!Ab(R,B.type))return A.concat(1).error('"'+R+`" comparisons are not supported for type '`+Ea(B.type)+"'.");var D=A.parse(I[2],2,rt);if(!D)return null;if(!Ab(R,D.type))return A.concat(2).error('"'+R+`" comparisons are not supported for type '`+Ea(D.type)+"'.");if(B.type.kind!==D.type.kind&&B.type.kind!=="value"&&D.type.kind!=="value")return A.error("Cannot compare types '"+Ea(B.type)+"' and '"+Ea(D.type)+"'.");y&&(B.type.kind==="value"&&D.type.kind!=="value"?B=new gn(D.type,[B]):B.type.kind!=="value"&&D.type.kind==="value"&&(D=new gn(B.type,[D])));var z=null;if(I.length===4){if(B.type.kind!=="string"&&D.type.kind!=="string"&&B.type.kind!=="value"&&D.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(!(z=A.parse(I[3],3,Re)))return null}return new x(B,D,z)},x.prototype.evaluate=function(I){var A=this.lhs.evaluate(I),R=this.rhs.evaluate(I);if(y&&this.hasUntypedArgument){var B=Dn(A),D=Dn(R);if(B.kind!==D.kind||B.kind!=="string"&&B.kind!=="number")throw new Ir('Expected arguments for "'+o+'" to be (string, string) or (number, number), but found ('+B.kind+", "+D.kind+") instead.")}if(this.collator&&!y&&this.hasUntypedArgument){var z=Dn(A),X=Dn(R);if(z.kind!=="string"||X.kind!=="string")return c(I,A,R)}return this.collator?h(I,A,R,this.collator.evaluate(I)):c(I,A,R)},x.prototype.eachChild=function(I){I(this.lhs),I(this.rhs),this.collator&&I(this.collator)},x.prototype.outputDefined=function(){return!0},x.prototype.serialize=function(){var I=[o];return this.eachChild(function(A){I.push(A.serialize())}),I},x}()}Fu.parse=function(o,c){if(o.length<=2||o.length>=5)return c.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var h=c.parse(o[1],1,rt),y=c.parse(o[2],2,tt);if(!h||!y)return null;if(!Ui(h.type,[la(rt),Ft,rt]))return c.error("Expected first argument to be of type array or string, but found "+Ea(h.type)+" instead");if(o.length===4){var x=c.parse(o[3],3,tt);return x?new Fu(h.type,h,y,x):null}return new Fu(h.type,h,y)},Fu.prototype.evaluate=function(o){var c=this.input.evaluate(o),h=this.beginIndex.evaluate(o);if(!Oa(c,["string","array"]))throw new Ir("Expected first argument to be of type array or string, but found "+Ea(Dn(c))+" instead.");if(this.endIndex){var y=this.endIndex.evaluate(o);return c.slice(h,y)}return c.slice(h)},Fu.prototype.eachChild=function(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)},Fu.prototype.outputDefined=function(){return!1},Fu.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var eC=Hi("==",function(o,c,h){return c===h},Tb),rp=Hi("!=",function(o,c,h){return c!==h},function(o,c,h,y){return!Tb(0,c,h,y)}),Eb=Hi("<",function(o,c,h){return c<h},function(o,c,h,y){return y.compare(c,h)<0}),Mb=Hi(">",function(o,c,h){return c>h},function(o,c,h,y){return y.compare(c,h)>0}),Lb=Hi("<=",function(o,c,h){return c<=h},function(o,c,h,y){return y.compare(c,h)<=0}),Rb=Hi(">=",function(o,c,h){return c>=h},function(o,c,h,y){return y.compare(c,h)>=0}),Nc=function(o,c,h,y,x){this.type=Ft,this.number=o,this.locale=c,this.currency=h,this.minFractionDigits=y,this.maxFractionDigits=x};Nc.parse=function(o,c){if(o.length!==3)return c.error("Expected two arguments.");var h=c.parse(o[1],1,tt);if(!h)return null;var y=o[2];if(typeof y!="object"||Array.isArray(y))return c.error("NumberFormat options argument must be an object.");var x=null;if(y.locale&&!(x=c.parse(y.locale,1,Ft)))return null;var I=null;if(y.currency&&!(I=c.parse(y.currency,1,Ft)))return null;var A=null;if(y["min-fraction-digits"]&&!(A=c.parse(y["min-fraction-digits"],1,tt)))return null;var R=null;return y["max-fraction-digits"]&&!(R=c.parse(y["max-fraction-digits"],1,tt))?null:new Nc(h,x,I,A,R)},Nc.prototype.evaluate=function(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))},Nc.prototype.eachChild=function(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)},Nc.prototype.outputDefined=function(){return!1},Nc.prototype.serialize=function(){var o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]};var Du=function(o){this.type=tt,this.input=o};Du.parse=function(o,c){if(o.length!==2)return c.error("Expected 1 argument, but found "+(o.length-1)+" instead.");var h=c.parse(o[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?c.error("Expected argument of type string or array, but found "+Ea(h.type)+" instead."):new Du(h):null},Du.prototype.evaluate=function(o){var c=this.input.evaluate(o);if(typeof c=="string"||Array.isArray(c))return c.length;throw new Ir("Expected value to be of type string or array, but found "+Ea(Dn(c))+" instead.")},Du.prototype.eachChild=function(o){o(this.input)},Du.prototype.outputDefined=function(){return!1},Du.prototype.serialize=function(){var o=["length"];return this.eachChild(function(c){o.push(c.serialize())}),o};var Fc={"==":eC,"!=":rp,">":Mb,"<":Eb,">=":Rb,"<=":Lb,array:gn,at:Gc,boolean:gn,case:Bc,coalesce:Pu,collator:Cl,format:il,image:io,in:Oc,"index-of":Nu,interpolate:Or,"interpolate-hcl":Or,"interpolate-lab":Or,length:Du,let:Bu,literal:as,match:Pc,number:gn,"number-format":Nc,object:gn,slice:Fu,step:Rs,string:gn,"to-boolean":To,"to-color":To,"to-number":To,"to-string":To,var:Gu,within:Eo};function kb(o,c){var h=c[0],y=c[1],x=c[2],I=c[3];h=h.evaluate(o),y=y.evaluate(o),x=x.evaluate(o);var A=I?I.evaluate(o):1,R=Uf(h,y,x,A);if(R)throw new Ir(R);return new gi(h/255*A,y/255*A,x/255*A,A)}function Wb(o,c){return o in c}function Jf(o,c){var h=c[o];return h===void 0?null:h}function Dc(o){return{type:o}}function Gb(o){return{result:"success",value:o}}function Vc(o){return{result:"error",value:o}}function Zc(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Ob(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function y_(o){return!!o.expression&&o.expression.interpolated}function Qi(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function sp(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function tC(o){return o}function Jd(o,c,h){return o!==void 0?o:c!==void 0?c:h!==void 0?h:void 0}function Pb(o,c,h,y,x){return Jd(typeof h===x?y[h]:void 0,o.default,c.default)}function aC(o,c,h){if(Qi(h)!=="number")return Jd(o.default,c.default);var y=o.stops.length;if(y===1||h<=o.stops[0][0])return o.stops[0][1];if(h>=o.stops[y-1][0])return o.stops[y-1][1];var x=np(o.stops.map(function(I){return I[0]}),h);return o.stops[x][1]}function Bb(o,c,h){var y=o.base!==void 0?o.base:1;if(Qi(h)!=="number")return Jd(o.default,c.default);var x=o.stops.length;if(x===1||h<=o.stops[0][0])return o.stops[0][1];if(h>=o.stops[x-1][0])return o.stops[x-1][1];var I=np(o.stops.map(function(X){return X[0]}),h),A=function(X,Q,ie,ge){var fe=ge-ie,ke=X-ie;return fe===0?0:Q===1?ke/fe:(Math.pow(Q,ke)-1)/(Math.pow(Q,fe)-1)}(h,y,o.stops[I][0],o.stops[I+1][0]),R=o.stops[I][1],B=o.stops[I+1][1],D=$d[c.type]||tC;if(o.colorSpace&&o.colorSpace!=="rgb"){var z=Sb[o.colorSpace];D=function(X,Q){return z.reverse(z.interpolate(z.forward(X),z.forward(Q),A))}}return typeof R.evaluate=="function"?{evaluate:function(){for(var X=[],Q=arguments.length;Q--;)X[Q]=arguments[Q];var ie=R.evaluate.apply(void 0,X),ge=B.evaluate.apply(void 0,X);if(ie!==void 0&&ge!==void 0)return D(ie,ge,A)}}:D(R,B,A)}function op(o,c,h){return c.type==="color"?h=gi.parse(h):c.type==="formatted"?h=wr.fromString(h.toString()):c.type==="resolvedImage"?h=fs.fromString(h.toString()):Qi(h)===c.type||c.type==="enum"&&c.values[h]||(h=void 0),Jd(h,o.default,c.default)}Gr.register(Fc,{error:[{kind:"error"},[Ft],function(o,c){throw new Ir(c[0].evaluate(o))}],typeof:[Ft,[rt],function(o,c){return Ea(Dn(c[0].evaluate(o)))}],"to-rgba":[la(tt,4),[Wt],function(o,c){return c[0].evaluate(o).toArray()}],rgb:[Wt,[tt,tt,tt],kb],rgba:[Wt,[tt,tt,tt,tt],kb],has:{type:Rt,overloads:[[[Ft],function(o,c){return Wb(c[0].evaluate(o),o.properties())}],[[Ft,Va],function(o,c){var h=c[1];return Wb(c[0].evaluate(o),h.evaluate(o))}]]},get:{type:rt,overloads:[[[Ft],function(o,c){return Jf(c[0].evaluate(o),o.properties())}],[[Ft,Va],function(o,c){var h=c[1];return Jf(c[0].evaluate(o),h.evaluate(o))}]]},"feature-state":[rt,[Ft],function(o,c){return Jf(c[0].evaluate(o),o.featureState||{})}],properties:[Va,[],function(o){return o.properties()}],"geometry-type":[Ft,[],function(o){return o.geometryType()}],id:[rt,[],function(o){return o.id()}],zoom:[tt,[],function(o){return o.globals.zoom}],"heatmap-density":[tt,[],function(o){return o.globals.heatmapDensity||0}],"line-progress":[tt,[],function(o){return o.globals.lineProgress||0}],accumulated:[rt,[],function(o){return o.globals.accumulated===void 0?null:o.globals.accumulated}],"+":[tt,Dc(tt),function(o,c){for(var h=0,y=0,x=c;y<x.length;y+=1)h+=x[y].evaluate(o);return h}],"*":[tt,Dc(tt),function(o,c){for(var h=1,y=0,x=c;y<x.length;y+=1)h*=x[y].evaluate(o);return h}],"-":{type:tt,overloads:[[[tt,tt],function(o,c){var h=c[1];return c[0].evaluate(o)-h.evaluate(o)}],[[tt],function(o,c){return-c[0].evaluate(o)}]]},"/":[tt,[tt,tt],function(o,c){var h=c[1];return c[0].evaluate(o)/h.evaluate(o)}],"%":[tt,[tt,tt],function(o,c){var h=c[1];return c[0].evaluate(o)%h.evaluate(o)}],ln2:[tt,[],function(){return Math.LN2}],pi:[tt,[],function(){return Math.PI}],e:[tt,[],function(){return Math.E}],"^":[tt,[tt,tt],function(o,c){var h=c[1];return Math.pow(c[0].evaluate(o),h.evaluate(o))}],sqrt:[tt,[tt],function(o,c){return Math.sqrt(c[0].evaluate(o))}],log10:[tt,[tt],function(o,c){return Math.log(c[0].evaluate(o))/Math.LN10}],ln:[tt,[tt],function(o,c){return Math.log(c[0].evaluate(o))}],log2:[tt,[tt],function(o,c){return Math.log(c[0].evaluate(o))/Math.LN2}],sin:[tt,[tt],function(o,c){return Math.sin(c[0].evaluate(o))}],cos:[tt,[tt],function(o,c){return Math.cos(c[0].evaluate(o))}],tan:[tt,[tt],function(o,c){return Math.tan(c[0].evaluate(o))}],asin:[tt,[tt],function(o,c){return Math.asin(c[0].evaluate(o))}],acos:[tt,[tt],function(o,c){return Math.acos(c[0].evaluate(o))}],atan:[tt,[tt],function(o,c){return Math.atan(c[0].evaluate(o))}],min:[tt,Dc(tt),function(o,c){return Math.min.apply(Math,c.map(function(h){return h.evaluate(o)}))}],max:[tt,Dc(tt),function(o,c){return Math.max.apply(Math,c.map(function(h){return h.evaluate(o)}))}],abs:[tt,[tt],function(o,c){return Math.abs(c[0].evaluate(o))}],round:[tt,[tt],function(o,c){var h=c[0].evaluate(o);return h<0?-Math.round(-h):Math.round(h)}],floor:[tt,[tt],function(o,c){return Math.floor(c[0].evaluate(o))}],ceil:[tt,[tt],function(o,c){return Math.ceil(c[0].evaluate(o))}],"filter-==":[Rt,[Ft,rt],function(o,c){var h=c[0],y=c[1];return o.properties()[h.value]===y.value}],"filter-id-==":[Rt,[rt],function(o,c){var h=c[0];return o.id()===h.value}],"filter-type-==":[Rt,[Ft],function(o,c){var h=c[0];return o.geometryType()===h.value}],"filter-<":[Rt,[Ft,rt],function(o,c){var h=c[0],y=c[1],x=o.properties()[h.value],I=y.value;return typeof x==typeof I&&x<I}],"filter-id-<":[Rt,[rt],function(o,c){var h=c[0],y=o.id(),x=h.value;return typeof y==typeof x&&y<x}],"filter->":[Rt,[Ft,rt],function(o,c){var h=c[0],y=c[1],x=o.properties()[h.value],I=y.value;return typeof x==typeof I&&x>I}],"filter-id->":[Rt,[rt],function(o,c){var h=c[0],y=o.id(),x=h.value;return typeof y==typeof x&&y>x}],"filter-<=":[Rt,[Ft,rt],function(o,c){var h=c[0],y=c[1],x=o.properties()[h.value],I=y.value;return typeof x==typeof I&&x<=I}],"filter-id-<=":[Rt,[rt],function(o,c){var h=c[0],y=o.id(),x=h.value;return typeof y==typeof x&&y<=x}],"filter->=":[Rt,[Ft,rt],function(o,c){var h=c[0],y=c[1],x=o.properties()[h.value],I=y.value;return typeof x==typeof I&&x>=I}],"filter-id->=":[Rt,[rt],function(o,c){var h=c[0],y=o.id(),x=h.value;return typeof y==typeof x&&y>=x}],"filter-has":[Rt,[rt],function(o,c){return c[0].value in o.properties()}],"filter-has-id":[Rt,[],function(o){return o.id()!==null&&o.id()!==void 0}],"filter-type-in":[Rt,[la(Ft)],function(o,c){return c[0].value.indexOf(o.geometryType())>=0}],"filter-id-in":[Rt,[la(rt)],function(o,c){return c[0].value.indexOf(o.id())>=0}],"filter-in-small":[Rt,[Ft,la(rt)],function(o,c){var h=c[0];return c[1].value.indexOf(o.properties()[h.value])>=0}],"filter-in-large":[Rt,[Ft,la(rt)],function(o,c){var h=c[0],y=c[1];return function(x,I,A,R){for(;A<=R;){var B=A+R>>1;if(I[B]===x)return!0;I[B]>x?R=B-1:A=B+1}return!1}(o.properties()[h.value],y.value,0,y.value.length-1)}],all:{type:Rt,overloads:[[[Rt,Rt],function(o,c){var h=c[1];return c[0].evaluate(o)&&h.evaluate(o)}],[Dc(Rt),function(o,c){for(var h=0,y=c;h<y.length;h+=1)if(!y[h].evaluate(o))return!1;return!0}]]},any:{type:Rt,overloads:[[[Rt,Rt],function(o,c){var h=c[1];return c[0].evaluate(o)||h.evaluate(o)}],[Dc(Rt),function(o,c){for(var h=0,y=c;h<y.length;h+=1)if(y[h].evaluate(o))return!0;return!1}]]},"!":[Rt,[Rt],function(o,c){return!c[0].evaluate(o)}],"is-supported-script":[Rt,[Ft],function(o,c){var h=o.globals&&o.globals.isSupportedScript;return!h||h(c[0].evaluate(o))}],upcase:[Ft,[Ft],function(o,c){return c[0].evaluate(o).toUpperCase()}],downcase:[Ft,[Ft],function(o,c){return c[0].evaluate(o).toLowerCase()}],concat:[Ft,Dc(rt),function(o,c){return c.map(function(h){return m_(h.evaluate(o))}).join("")}],"resolved-locale":[Ft,[Re],function(o,c){return c[0].evaluate(o).resolvedLocale()}]});var Qd=function(o,c){this.expression=o,this._warningHistory={},this._evaluator=new $l,this._defaultValue=c?function(h){return h.type==="color"&&sp(h.default)?new gi(0,0,0,0):h.type==="color"?gi.parse(h.default)||null:h.default===void 0?null:h.default}(c):null,this._enumValues=c&&c.type==="enum"?c.values:null};function b_(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Fc}function lp(o,c){var h=new Ou(Fc,[],c?function(x){var I={color:Wt,string:Ft,number:tt,enum:Ft,boolean:Rt,formatted:dt,resolvedImage:mt};return x.type==="array"?la(I[x.value]||rt,x.length):I[x.type]}(c):void 0),y=h.parse(o,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?Gb(new Qd(y,c)):Vc(h.errors)}Qd.prototype.evaluateWithoutErrorHandling=function(o,c,h,y,x,I){return this._evaluator.globals=o,this._evaluator.feature=c,this._evaluator.featureState=h,this._evaluator.canonical=y,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)},Qd.prototype.evaluate=function(o,c,h,y,x,I){this._evaluator.globals=o,this._evaluator.feature=c||null,this._evaluator.featureState=h||null,this._evaluator.canonical=y,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=I||null;try{var A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new Ir("Expected value to be one of "+Object.keys(this._enumValues).map(function(R){return JSON.stringify(R)}).join(", ")+", but found "+JSON.stringify(A)+" instead.");return A}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(R.message)),this._defaultValue}};var v_=function(o,c){this.kind=o,this._styleExpression=c,this.isStateDependent=o!=="constant"&&!Wu(c.expression)};v_.prototype.evaluateWithoutErrorHandling=function(o,c,h,y,x,I){return this._styleExpression.evaluateWithoutErrorHandling(o,c,h,y,x,I)},v_.prototype.evaluate=function(o,c,h,y,x,I){return this._styleExpression.evaluate(o,c,h,y,x,I)};var eh=function(o,c,h,y){this.kind=o,this.zoomStops=h,this._styleExpression=c,this.isStateDependent=o!=="camera"&&!Wu(c.expression),this.interpolationType=y};function Nb(o,c){if((o=lp(o,c)).result==="error")return o;var h=o.value.expression,y=ku(h);if(!y&&!Zc(c))return Vc([new _t("","data expressions not supported")]);var x=Wc(h,["zoom"]);if(!x&&!Ob(c))return Vc([new _t("","zoom expressions not supported")]);var I=function A(R){var B=null;if(R instanceof Bu)B=A(R.result);else if(R instanceof Pu)for(var D=0,z=R.args;D<z.length&&!(B=A(z[D]));D+=1);else(R instanceof Rs||R instanceof Or)&&R.input instanceof Gr&&R.input.name==="zoom"&&(B=R);return B instanceof _t||R.eachChild(function(X){var Q=A(X);Q instanceof _t?B=Q:!B&&Q?B=new _t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):B&&Q&&B!==Q&&(B=new _t("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),B}(h);return I||x?I instanceof _t?Vc([I]):I instanceof Or&&!y_(c)?Vc([new _t("",'"interpolate" expressions cannot be used with this property')]):Gb(I?new eh(y?"camera":"composite",o.value,I.labels,I instanceof Or?I.interpolation:void 0):new v_(y?"constant":"source",o.value)):Vc([new _t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}eh.prototype.evaluateWithoutErrorHandling=function(o,c,h,y,x,I){return this._styleExpression.evaluateWithoutErrorHandling(o,c,h,y,x,I)},eh.prototype.evaluate=function(o,c,h,y,x,I){return this._styleExpression.evaluate(o,c,h,y,x,I)},eh.prototype.interpolationFactor=function(o,c,h){return this.interpolationType?Or.interpolationFactor(this.interpolationType,o,c,h):0};var th=function(o,c){this._parameters=o,this._specification=c,ct(this,function h(y,x){var I,A,R,B=x.type==="color",D=y.stops&&typeof y.stops[0][0]=="object",z=D||!(D||y.property!==void 0),X=y.type||(y_(x)?"exponential":"interval");if(B&&((y=ct({},y)).stops&&(y.stops=y.stops.map(function(Dt){return[Dt[0],gi.parse(Dt[1])]})),y.default=gi.parse(y.default?y.default:x.default)),y.colorSpace&&y.colorSpace!=="rgb"&&!Sb[y.colorSpace])throw new Error("Unknown color space: "+y.colorSpace);if(X==="exponential")I=Bb;else if(X==="interval")I=aC;else if(X==="categorical"){I=Pb,A=Object.create(null);for(var Q=0,ie=y.stops;Q<ie.length;Q+=1){var ge=ie[Q];A[ge[0]]=ge[1]}R=typeof y.stops[0][0]}else{if(X!=="identity")throw new Error('Unknown function type "'+X+'"');I=op}if(D){for(var fe={},ke=[],Ce=0;Ce<y.stops.length;Ce++){var Be=y.stops[Ce],Ze=Be[0].zoom;fe[Ze]===void 0&&(fe[Ze]={zoom:Ze,type:y.type,property:y.property,default:y.default,stops:[]},ke.push(Ze)),fe[Ze].stops.push([Be[0].value,Be[1]])}for(var Ue=[],Ke=0,ot=ke;Ke<ot.length;Ke+=1){var vt=ot[Ke];Ue.push([fe[vt].zoom,h(fe[vt],x)])}var Mt={name:"linear"};return{kind:"composite",interpolationType:Mt,interpolationFactor:Or.interpolationFactor.bind(void 0,Mt),zoomStops:Ue.map(function(Dt){return Dt[0]}),evaluate:function(Dt,da){var Vt=Dt.zoom;return Bb({stops:Ue,base:y.base},x,Vt).evaluate(Vt,da)}}}if(z){var ra=X==="exponential"?{name:"exponential",base:y.base!==void 0?y.base:1}:null;return{kind:"camera",interpolationType:ra,interpolationFactor:Or.interpolationFactor.bind(void 0,ra),zoomStops:y.stops.map(function(Dt){return Dt[0]}),evaluate:function(Dt){return I(y,x,Dt.zoom,A,R)}}}return{kind:"source",evaluate:function(Dt,da){var Vt=da&&da.properties?da.properties[y.property]:void 0;return Vt===void 0?Jd(y.default,x.default):I(y,x,Vt,A,R)}}}(this._parameters,this._specification))};function nl(o){var c=o.key,h=o.value,y=o.valueSpec||{},x=o.objectElementValidators||{},I=o.style,A=o.styleSpec,R=[],B=Qi(h);if(B!=="object")return[new ye(c,h,"object expected, "+B+" found")];for(var D in h){var z=D.split(".")[0],X=y[z]||y["*"],Q=void 0;if(x[z])Q=x[z];else if(y[z])Q=hi;else if(x["*"])Q=x["*"];else{if(!y["*"]){R.push(new ye(c,h[D],'unknown property "'+D+'"'));continue}Q=hi}R=R.concat(Q({key:(c&&c+".")+D,value:h[D],valueSpec:X,style:I,styleSpec:A,object:h,objectKey:D},h))}for(var ie in y)x[ie]||y[ie].required&&y[ie].default===void 0&&h[ie]===void 0&&R.push(new ye(c,h,'missing required property "'+ie+'"'));return R}function Fb(o){var c=o.value,h=o.valueSpec,y=o.style,x=o.styleSpec,I=o.key,A=o.arrayElementValidator||hi;if(Qi(c)!=="array")return[new ye(I,c,"array expected, "+Qi(c)+" found")];if(h.length&&c.length!==h.length)return[new ye(I,c,"array length "+h.length+" expected, length "+c.length+" found")];if(h["min-length"]&&c.length<h["min-length"])return[new ye(I,c,"array length at least "+h["min-length"]+" expected, length "+c.length+" found")];var R={type:h.value,values:h.values};x.$version<7&&(R.function=h.function),Qi(h.value)==="object"&&(R=h.value);for(var B=[],D=0;D<c.length;D++)B=B.concat(A({array:c,arrayIndex:D,value:c[D],valueSpec:R,style:y,styleSpec:x,key:I+"["+D+"]"}));return B}function Db(o){var c=o.key,h=o.value,y=o.valueSpec,x=Qi(h);return x==="number"&&h!=h&&(x="NaN"),x!=="number"?[new ye(c,h,"number expected, "+x+" found")]:"minimum"in y&&h<y.minimum?[new ye(c,h,h+" is less than the minimum value "+y.minimum)]:"maximum"in y&&h>y.maximum?[new ye(c,h,h+" is greater than the maximum value "+y.maximum)]:[]}function Vb(o){var c,h,y,x=o.valueSpec,I=ft(o.value.type),A={},R=I!=="categorical"&&o.value.property===void 0,B=!R,D=Qi(o.value.stops)==="array"&&Qi(o.value.stops[0])==="array"&&Qi(o.value.stops[0][0])==="object",z=nl({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ie){if(I==="identity")return[new ye(ie.key,ie.value,'identity function may not have a "stops" property')];var ge=[],fe=ie.value;return ge=ge.concat(Fb({key:ie.key,value:fe,valueSpec:ie.valueSpec,style:ie.style,styleSpec:ie.styleSpec,arrayElementValidator:X})),Qi(fe)==="array"&&fe.length===0&&ge.push(new ye(ie.key,fe,"array must have at least one stop")),ge},default:function(ie){return hi({key:ie.key,value:ie.value,valueSpec:x,style:ie.style,styleSpec:ie.styleSpec})}}});return I==="identity"&&R&&z.push(new ye(o.key,o.value,'missing required property "property"')),I==="identity"||o.value.stops||z.push(new ye(o.key,o.value,'missing required property "stops"')),I==="exponential"&&o.valueSpec.expression&&!y_(o.valueSpec)&&z.push(new ye(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(B&&!Zc(o.valueSpec)?z.push(new ye(o.key,o.value,"property functions not supported")):R&&!Ob(o.valueSpec)&&z.push(new ye(o.key,o.value,"zoom functions not supported"))),I!=="categorical"&&!D||o.value.property!==void 0||z.push(new ye(o.key,o.value,'"property" property is required')),z;function X(ie){var ge=[],fe=ie.value,ke=ie.key;if(Qi(fe)!=="array")return[new ye(ke,fe,"array expected, "+Qi(fe)+" found")];if(fe.length!==2)return[new ye(ke,fe,"array length 2 expected, length "+fe.length+" found")];if(D){if(Qi(fe[0])!=="object")return[new ye(ke,fe,"object expected, "+Qi(fe[0])+" found")];if(fe[0].zoom===void 0)return[new ye(ke,fe,"object stop key must have zoom")];if(fe[0].value===void 0)return[new ye(ke,fe,"object stop key must have value")];if(y&&y>ft(fe[0].zoom))return[new ye(ke,fe[0].zoom,"stop zoom values must appear in ascending order")];ft(fe[0].zoom)!==y&&(y=ft(fe[0].zoom),h=void 0,A={}),ge=ge.concat(nl({key:ke+"[0]",value:fe[0],valueSpec:{zoom:{}},style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{zoom:Db,value:Q}}))}else ge=ge.concat(Q({key:ke+"[0]",value:fe[0],valueSpec:{},style:ie.style,styleSpec:ie.styleSpec},fe));return b_(Je(fe[1]))?ge.concat([new ye(ke+"[1]",fe[1],"expressions are not allowed in function stops.")]):ge.concat(hi({key:ke+"[1]",value:fe[1],valueSpec:x,style:ie.style,styleSpec:ie.styleSpec}))}function Q(ie,ge){var fe=Qi(ie.value),ke=ft(ie.value),Ce=ie.value!==null?ie.value:ge;if(c){if(fe!==c)return[new ye(ie.key,Ce,fe+" stop domain type must match previous stop domain type "+c)]}else c=fe;if(fe!=="number"&&fe!=="string"&&fe!=="boolean")return[new ye(ie.key,Ce,"stop domain value must be a number, string, or boolean")];if(fe!=="number"&&I!=="categorical"){var Be="number expected, "+fe+" found";return Zc(x)&&I===void 0&&(Be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ye(ie.key,Ce,Be)]}return I!=="categorical"||fe!=="number"||isFinite(ke)&&Math.floor(ke)===ke?I!=="categorical"&&fe==="number"&&h!==void 0&&ke<h?[new ye(ie.key,Ce,"stop domain values must appear in ascending order")]:(h=ke,I==="categorical"&&ke in A?[new ye(ie.key,Ce,"stop domain values must be unique")]:(A[ke]=!0,[])):[new ye(ie.key,Ce,"integer expected, found "+ke)]}}function zc(o){var c=(o.expressionContext==="property"?Nb:lp)(Je(o.value),o.valueSpec);if(c.result==="error")return c.value.map(function(y){return new ye(""+o.key+y.key,o.value,y.message)});var h=c.value.expression||c.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!h.outputDefined())return[new ye(o.key,o.value,'Invalid data expression for "'+o.propertyKey+'". Output values must be contained as literals within the expression.')];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Wu(h))return[new ye(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Wu(h))return[new ye(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Wc(h,["zoom","feature-state"]))return[new ye(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!ku(h))return[new ye(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function x_(o){var c=o.key,h=o.value,y=o.valueSpec,x=[];return Array.isArray(y.values)?y.values.indexOf(ft(h))===-1&&x.push(new ye(c,h,"expected one of ["+y.values.join(", ")+"], "+JSON.stringify(h)+" found")):Object.keys(y.values).indexOf(ft(h))===-1&&x.push(new ye(c,h,"expected one of ["+Object.keys(y.values).join(", ")+"], "+JSON.stringify(h)+" found")),x}function up(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(var c=0,h=o.slice(1);c<h.length;c+=1){var y=h[c];if(!up(y)&&typeof y!="boolean")return!1}return!0;default:return!0}}th.deserialize=function(o){return new th(o._parameters,o._specification)},th.serialize=function(o){return{_parameters:o._parameters,_specification:o._specification}};var Qf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function cp(o){if(o==null)return{filter:function(){return!0},needGeometry:!1};up(o)||(o=dp(o));var c=lp(o,Qf);if(c.result==="error")throw new Error(c.value.map(function(h){return h.key+": "+h.message}).join(", "));return{filter:function(h,y,x){return c.value.evaluate(h,y,{},x)},needGeometry:function h(y){if(!Array.isArray(y))return!1;if(y[0]==="within")return!0;for(var x=1;x<y.length;x++)if(h(y[x]))return!0;return!1}(o)}}function iC(o,c){return o<c?-1:o>c?1:0}function dp(o){if(!o)return!0;var c,h=o[0];return o.length<=1?h!=="any":h==="=="?ey(o[1],o[2],"=="):h==="!="?hp(ey(o[1],o[2],"==")):h==="<"||h===">"||h==="<="||h===">="?ey(o[1],o[2],h):h==="any"?(c=o.slice(1),["any"].concat(c.map(dp))):h==="all"?["all"].concat(o.slice(1).map(dp)):h==="none"?["all"].concat(o.slice(1).map(dp).map(hp)):h==="in"?Zb(o[1],o.slice(2)):h==="!in"?hp(Zb(o[1],o.slice(2))):h==="has"?zb(o[1]):h==="!has"?hp(zb(o[1])):h!=="within"||o}function ey(o,c,h){switch(o){case"$type":return["filter-type-"+h,c];case"$id":return["filter-id-"+h,c];default:return["filter-"+h,o,c]}}function Zb(o,c){if(c.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(function(h){return typeof h!=typeof c[0]})?["filter-in-large",o,["literal",c.sort(iC)]]:["filter-in-small",o,["literal",c]]}}function zb(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function hp(o){return["!",o]}function ty(o){return up(Je(o.value))?zc(ct({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function c(h){var y=h.value,x=h.key;if(Qi(y)!=="array")return[new ye(x,y,"array expected, "+Qi(y)+" found")];var I,A=h.styleSpec,R=[];if(y.length<1)return[new ye(x,y,"filter array must have at least 1 element")];switch(R=R.concat(x_({key:x+"[0]",value:y[0],valueSpec:A.filter_operator,style:h.style,styleSpec:h.styleSpec})),ft(y[0])){case"<":case"<=":case">":case">=":y.length>=2&&ft(y[1])==="$type"&&R.push(new ye(x,y,'"$type" cannot be use with operator "'+y[0]+'"'));case"==":case"!=":y.length!==3&&R.push(new ye(x,y,'filter array for operator "'+y[0]+'" must have 3 elements'));case"in":case"!in":y.length>=2&&(I=Qi(y[1]))!=="string"&&R.push(new ye(x+"[1]",y[1],"string expected, "+I+" found"));for(var B=2;B<y.length;B++)I=Qi(y[B]),ft(y[1])==="$type"?R=R.concat(x_({key:x+"["+B+"]",value:y[B],valueSpec:A.geometry_type,style:h.style,styleSpec:h.styleSpec})):I!=="string"&&I!=="number"&&I!=="boolean"&&R.push(new ye(x+"["+B+"]",y[B],"string, number, or boolean expected, "+I+" found"));break;case"any":case"all":case"none":for(var D=1;D<y.length;D++)R=R.concat(c({key:x+"["+D+"]",value:y[D],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":I=Qi(y[1]),y.length!==2?R.push(new ye(x,y,'filter array for "'+y[0]+'" operator must have 2 elements')):I!=="string"&&R.push(new ye(x+"[1]",y[1],"string expected, "+I+" found"));break;case"within":I=Qi(y[1]),y.length!==2?R.push(new ye(x,y,'filter array for "'+y[0]+'" operator must have 2 elements')):I!=="object"&&R.push(new ye(x+"[1]",y[1],"object expected, "+I+" found"))}return R}(o)}function ay(o,c){var h=o.key,y=o.style,x=o.styleSpec,I=o.value,A=o.objectKey,R=x[c+"_"+o.layerType];if(!R)return[];var B=A.match(/^(.*)-transition$/);if(c==="paint"&&B&&R[B[1]]&&R[B[1]].transition)return hi({key:h,value:I,valueSpec:x.transition,style:y,styleSpec:x});var D,z=o.valueSpec||R[A];if(!z)return[new ye(h,I,'unknown property "'+A+'"')];if(Qi(I)==="string"&&Zc(z)&&!z.tokens&&(D=/^{([^}]+)}$/.exec(I)))return[new ye(h,I,'"'+A+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(D[1])+" }`.")];var X=[];return o.layerType==="symbol"&&(A==="text-field"&&y&&!y.glyphs&&X.push(new ye(h,I,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&sp(Je(I))&&ft(I.type)==="identity"&&X.push(new ye(h,I,'"text-font" does not support identity functions'))),X.concat(hi({key:o.key,value:I,valueSpec:z,style:y,styleSpec:x,expressionContext:"property",propertyType:c,propertyKey:A}))}function iy(o){return ay(o,"paint")}function w_(o){return ay(o,"layout")}function Ub(o){var c=[],h=o.value,y=o.key,x=o.style,I=o.styleSpec;h.type||h.ref||c.push(new ye(y,h,'either "type" or "ref" is required'));var A,R=ft(h.type),B=ft(h.ref);if(h.id)for(var D=ft(h.id),z=0;z<o.arrayIndex;z++){var X=x.layers[z];ft(X.id)===D&&c.push(new ye(y,h.id,'duplicate layer id "'+h.id+'", previously used at line '+X.id.__line__))}if("ref"in h)["type","source","source-layer","filter","layout"].forEach(function(ge){ge in h&&c.push(new ye(y,h[ge],'"'+ge+'" is prohibited for ref layers'))}),x.layers.forEach(function(ge){ft(ge.id)===B&&(A=ge)}),A?A.ref?c.push(new ye(y,h.ref,"ref cannot reference another ref layer")):R=ft(A.type):c.push(new ye(y,h.ref,'ref layer "'+B+'" not found'));else if(R!=="background")if(h.source){var Q=x.sources&&x.sources[h.source],ie=Q&&ft(Q.type);Q?ie==="vector"&&R==="raster"?c.push(new ye(y,h.source,'layer "'+h.id+'" requires a raster source')):ie==="raster"&&R!=="raster"?c.push(new ye(y,h.source,'layer "'+h.id+'" requires a vector source')):ie!=="vector"||h["source-layer"]?ie==="raster-dem"&&R!=="hillshade"?c.push(new ye(y,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):R!=="line"||!h.paint||!h.paint["line-gradient"]||ie==="geojson"&&Q.lineMetrics||c.push(new ye(y,h,'layer "'+h.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):c.push(new ye(y,h,'layer "'+h.id+'" must specify a "source-layer"')):c.push(new ye(y,h.source,'source "'+h.source+'" not found'))}else c.push(new ye(y,h,'missing required property "source"'));return c=c.concat(nl({key:y,value:h,valueSpec:I.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return hi({key:y+".type",value:h.type,valueSpec:I.layer.type,style:o.style,styleSpec:o.styleSpec,object:h,objectKey:"type"})},filter:ty,layout:function(ge){return nl({layer:h,key:ge.key,value:ge.value,style:ge.style,styleSpec:ge.styleSpec,objectElementValidators:{"*":function(fe){return w_(ct({layerType:R},fe))}}})},paint:function(ge){return nl({layer:h,key:ge.key,value:ge.value,style:ge.style,styleSpec:ge.styleSpec,objectElementValidators:{"*":function(fe){return iy(ct({layerType:R},fe))}}})}}}))}function Uc(o){var c=o.value,h=o.key,y=Qi(c);return y!=="string"?[new ye(h,c,"string expected, "+y+" found")]:[]}var fn={promoteId:function(o){var c=o.key,h=o.value;if(Qi(h)==="string")return Uc({key:c,value:h});var y=[];for(var x in h)y.push.apply(y,Uc({key:c+"."+x,value:h[x]}));return y}};function _p(o){var c=o.value,h=o.key,y=o.styleSpec,x=o.style;if(!c.type)return[new ye(h,c,'"type" is required')];var I,A=ft(c.type);switch(A){case"vector":case"raster":case"raster-dem":return nl({key:h,value:c,valueSpec:y["source_"+A.replace("-","_")],style:o.style,styleSpec:y,objectElementValidators:fn});case"geojson":if(I=nl({key:h,value:c,valueSpec:y.source_geojson,style:x,styleSpec:y,objectElementValidators:fn}),c.cluster)for(var R in c.clusterProperties){var B=c.clusterProperties[R],D=B[0],z=typeof D=="string"?[D,["accumulated"],["get",R]]:D;I.push.apply(I,zc({key:h+"."+R+".map",value:B[1],expressionContext:"cluster-map"})),I.push.apply(I,zc({key:h+"."+R+".reduce",value:z,expressionContext:"cluster-reduce"}))}return I;case"video":return nl({key:h,value:c,valueSpec:y.source_video,style:x,styleSpec:y});case"image":return nl({key:h,value:c,valueSpec:y.source_image,style:x,styleSpec:y});case"canvas":return[new ye(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return x_({key:h+".type",value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:x,styleSpec:y})}}function Hc(o){var c=o.value,h=o.styleSpec,y=h.light,x=o.style,I=[],A=Qi(c);if(c===void 0)return I;if(A!=="object")return I.concat([new ye("light",c,"object expected, "+A+" found")]);for(var R in c){var B=R.match(/^(.*)-transition$/);I=I.concat(B&&y[B[1]]&&y[B[1]].transition?hi({key:R,value:c[R],valueSpec:h.transition,style:x,styleSpec:h}):y[R]?hi({key:R,value:c[R],valueSpec:y[R],style:x,styleSpec:h}):[new ye(R,c[R],'unknown property "'+R+'"')])}return I}var Vu={"*":function(){return[]},array:Fb,boolean:function(o){var c=o.value,h=o.key,y=Qi(c);return y!=="boolean"?[new ye(h,c,"boolean expected, "+y+" found")]:[]},number:Db,color:function(o){var c=o.key,h=o.value,y=Qi(h);return y!=="string"?[new ye(c,h,"color expected, "+y+" found")]:Ya(h)===null?[new ye(c,h,'color expected, "'+h+'" found')]:[]},constants:Ne,enum:x_,filter:ty,function:Vb,layer:Ub,object:nl,source:_p,light:Hc,string:Uc,formatted:function(o){return Uc(o).length===0?[]:zc(o)},resolvedImage:function(o){return Uc(o).length===0?[]:zc(o)}};function hi(o){var c=o.value,h=o.valueSpec,y=o.styleSpec;return h.expression&&sp(ft(c))?Vb(o):h.expression&&b_(Je(c))?zc(o):h.type&&Vu[h.type]?Vu[h.type](o):nl(ct({},o,{valueSpec:h.type?y[h.type]:h}))}function en(o){var c=o.value,h=o.key,y=Uc(o);return y.length||(c.indexOf("{fontstack}")===-1&&y.push(new ye(h,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&y.push(new ye(h,c,'"glyphs" url must include a "{range}" token'))),y}function no(o,c){c===void 0&&(c=ae);var h=[];return h=h.concat(hi({key:"",value:o,valueSpec:c.$root,styleSpec:c,style:o,objectElementValidators:{glyphs:en,"*":function(){return[]}}})),o.constants&&(h=h.concat(Ne({key:"constants",value:o.constants,style:o,styleSpec:c}))),I_(h)}function I_(o){return[].concat(o).sort(function(c,h){return c.line-h.line})}function ah(o){return function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];return I_(o.apply(this,c))}}no.source=ah(_p),no.light=ah(Hc),no.layer=ah(Ub),no.filter=ah(ty),no.paintProperty=ah(iy),no.layoutProperty=ah(w_);var C_=no,nC=C_.light,rC=C_.paintProperty,S_=C_.layoutProperty;function A_(o,c){var h=!1;if(c&&c.length)for(var y=0,x=c;y<x.length;y+=1)o.fire(new Le(new Error(x[y].message))),h=!0;return h}var Jl=tr;function tr(o,c,h){var y=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var x=new Int32Array(this.arrayBuffer);o=x[0],this.d=(c=x[1])+2*(h=x[2]);for(var I=0;I<this.d*this.d;I++){var A=x[3+I],R=x[3+I+1];y.push(A===R?null:x.subarray(A,R))}var B=x[3+y.length+1];this.keys=x.subarray(x[3+y.length],B),this.bboxes=x.subarray(B),this.insert=this._insertReadonly}else{this.d=c+2*h;for(var D=0;D<this.d*this.d;D++)y.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=o,this.padding=h,this.scale=c/o,this.uid=0;var z=h/c*o;this.min=-z,this.max=o+z}tr.prototype.insert=function(o,c,h,y,x){this._forEachCell(c,h,y,x,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(c),this.bboxes.push(h),this.bboxes.push(y),this.bboxes.push(x)},tr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},tr.prototype._insertCell=function(o,c,h,y,x,I){this.cells[x].push(I)},tr.prototype.query=function(o,c,h,y,x){var I=this.min,A=this.max;if(o<=I&&c<=I&&A<=h&&A<=y&&!x)return Array.prototype.slice.call(this.keys);var R=[];return this._forEachCell(o,c,h,y,this._queryCell,R,{},x),R},tr.prototype._queryCell=function(o,c,h,y,x,I,A,R){var B=this.cells[x];if(B!==null)for(var D=this.keys,z=this.bboxes,X=0;X<B.length;X++){var Q=B[X];if(A[Q]===void 0){var ie=4*Q;(R?R(z[ie+0],z[ie+1],z[ie+2],z[ie+3]):o<=z[ie+2]&&c<=z[ie+3]&&h>=z[ie+0]&&y>=z[ie+1])?(A[Q]=!0,I.push(D[Q])):A[Q]=!1}}},tr.prototype._forEachCell=function(o,c,h,y,x,I,A,R){for(var B=this._convertToCellCoord(o),D=this._convertToCellCoord(c),z=this._convertToCellCoord(h),X=this._convertToCellCoord(y),Q=B;Q<=z;Q++)for(var ie=D;ie<=X;ie++){var ge=this.d*ie+Q;if((!R||R(this._convertFromCellCoord(Q),this._convertFromCellCoord(ie),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(ie+1)))&&x.call(this,o,c,h,y,ge,I,A,R))return}},tr.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},tr.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},tr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,c=3+this.cells.length+1+1,h=0,y=0;y<this.cells.length;y++)h+=this.cells[y].length;var x=new Int32Array(c+h+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;for(var I=c,A=0;A<o.length;A++){var R=o[A];x[3+A]=I,x.set(R,I),I+=R.length}return x[3+o.length]=I,x.set(this.keys,I),x[3+o.length+1]=I+=this.keys.length,x.set(this.bboxes,I),I+=this.bboxes.length,x.buffer};var T_=v.ImageData,Hb=v.ImageBitmap,Kn={};function Yt(o,c,h){h===void 0&&(h={}),Object.defineProperty(c,"_classRegistryKey",{value:o,writeable:!1}),Kn[o]={klass:c,omit:h.omit||[],shallow:h.shallow||[]}}for(var ks in Yt("Object",Object),Jl.serialize=function(o,c){var h=o.toArrayBuffer();return c&&c.push(h),{buffer:h}},Jl.deserialize=function(o){return new Jl(o.buffer)},Yt("Grid",Jl),Yt("Color",gi),Yt("Error",Error),Yt("ResolvedImage",fs),Yt("StylePropertyFunction",th),Yt("StyleExpression",Qd,{omit:["_evaluator"]}),Yt("ZoomDependentExpression",eh),Yt("ZoomConstantExpression",v_),Yt("CompoundExpression",Gr,{omit:["_evaluate"]}),Fc)Fc[ks]._classRegistryKey||Yt("Expression_"+ks,Fc[ks]);function mp(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function ih(o){return Hb&&o instanceof Hb}function rl(o,c){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp)return o;if(mp(o)||ih(o))return c&&c.push(o),o;if(ArrayBuffer.isView(o)){var h=o;return c&&c.push(h.buffer),h}if(o instanceof T_)return c&&c.push(o.data.buffer),o;if(Array.isArray(o)){for(var y=[],x=0,I=o;x<I.length;x+=1)y.push(rl(I[x],c));return y}if(typeof o=="object"){var A=o.constructor,R=A._classRegistryKey;if(!R)throw new Error("can't serialize object of unregistered class");var B=A.serialize?A.serialize(o,c):{};if(!A.serialize){for(var D in o)if(o.hasOwnProperty(D)&&!(Kn[R].omit.indexOf(D)>=0)){var z=o[D];B[D]=Kn[R].shallow.indexOf(D)>=0?z:rl(z,c)}o instanceof Error&&(B.message=o.message)}if(B.$name)throw new Error("$name property is reserved for worker serialization logic.");return R!=="Object"&&(B.$name=R),B}throw new Error("can't serialize object of type "+typeof o)}function Ws(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||mp(o)||ih(o)||ArrayBuffer.isView(o)||o instanceof T_)return o;if(Array.isArray(o))return o.map(Ws);if(typeof o=="object"){var c=o.$name||"Object",h=Kn[c].klass;if(!h)throw new Error("can't deserialize unregistered class "+c);if(h.deserialize)return h.deserialize(o);for(var y=Object.create(h.prototype),x=0,I=Object.keys(o);x<I.length;x+=1){var A=I[x];if(A!=="$name"){var R=o[A];y[A]=Kn[c].shallow.indexOf(A)>=0?R:Ws(R)}}return y}throw new Error("can't deserialize object of type "+typeof o)}var ny=function(){this.first=!0};ny.prototype.update=function(o,c){var h=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=c),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=h,!0))};var Pt={"Latin-1 Supplement":function(o){return o>=128&&o<=255},Arabic:function(o){return o>=1536&&o<=1791},"Arabic Supplement":function(o){return o>=1872&&o<=1919},"Arabic Extended-A":function(o){return o>=2208&&o<=2303},"Hangul Jamo":function(o){return o>=4352&&o<=4607},"Unified Canadian Aboriginal Syllabics":function(o){return o>=5120&&o<=5759},Khmer:function(o){return o>=6016&&o<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(o){return o>=6320&&o<=6399},"General Punctuation":function(o){return o>=8192&&o<=8303},"Letterlike Symbols":function(o){return o>=8448&&o<=8527},"Number Forms":function(o){return o>=8528&&o<=8591},"Miscellaneous Technical":function(o){return o>=8960&&o<=9215},"Control Pictures":function(o){return o>=9216&&o<=9279},"Optical Character Recognition":function(o){return o>=9280&&o<=9311},"Enclosed Alphanumerics":function(o){return o>=9312&&o<=9471},"Geometric Shapes":function(o){return o>=9632&&o<=9727},"Miscellaneous Symbols":function(o){return o>=9728&&o<=9983},"Miscellaneous Symbols and Arrows":function(o){return o>=11008&&o<=11263},"CJK Radicals Supplement":function(o){return o>=11904&&o<=12031},"Kangxi Radicals":function(o){return o>=12032&&o<=12255},"Ideographic Description Characters":function(o){return o>=12272&&o<=12287},"CJK Symbols and Punctuation":function(o){return o>=12288&&o<=12351},Hiragana:function(o){return o>=12352&&o<=12447},Katakana:function(o){return o>=12448&&o<=12543},Bopomofo:function(o){return o>=12544&&o<=12591},"Hangul Compatibility Jamo":function(o){return o>=12592&&o<=12687},Kanbun:function(o){return o>=12688&&o<=12703},"Bopomofo Extended":function(o){return o>=12704&&o<=12735},"CJK Strokes":function(o){return o>=12736&&o<=12783},"Katakana Phonetic Extensions":function(o){return o>=12784&&o<=12799},"Enclosed CJK Letters and Months":function(o){return o>=12800&&o<=13055},"CJK Compatibility":function(o){return o>=13056&&o<=13311},"CJK Unified Ideographs Extension A":function(o){return o>=13312&&o<=19903},"Yijing Hexagram Symbols":function(o){return o>=19904&&o<=19967},"CJK Unified Ideographs":function(o){return o>=19968&&o<=40959},"Yi Syllables":function(o){return o>=40960&&o<=42127},"Yi Radicals":function(o){return o>=42128&&o<=42191},"Hangul Jamo Extended-A":function(o){return o>=43360&&o<=43391},"Hangul Syllables":function(o){return o>=44032&&o<=55215},"Hangul Jamo Extended-B":function(o){return o>=55216&&o<=55295},"Private Use Area":function(o){return o>=57344&&o<=63743},"CJK Compatibility Ideographs":function(o){return o>=63744&&o<=64255},"Arabic Presentation Forms-A":function(o){return o>=64336&&o<=65023},"Vertical Forms":function(o){return o>=65040&&o<=65055},"CJK Compatibility Forms":function(o){return o>=65072&&o<=65103},"Small Form Variants":function(o){return o>=65104&&o<=65135},"Arabic Presentation Forms-B":function(o){return o>=65136&&o<=65279},"Halfwidth and Fullwidth Forms":function(o){return o>=65280&&o<=65519}};function ry(o){for(var c=0,h=o;c<h.length;c+=1)if(pp(h[c].charCodeAt(0)))return!0;return!1}function pp(o){return!(o!==746&&o!==747&&(o<4352||!(Pt["Bopomofo Extended"](o)||Pt.Bopomofo(o)||Pt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Pt["CJK Compatibility Ideographs"](o)||Pt["CJK Compatibility"](o)||Pt["CJK Radicals Supplement"](o)||Pt["CJK Strokes"](o)||!(!Pt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Pt["CJK Unified Ideographs Extension A"](o)||Pt["CJK Unified Ideographs"](o)||Pt["Enclosed CJK Letters and Months"](o)||Pt["Hangul Compatibility Jamo"](o)||Pt["Hangul Jamo Extended-A"](o)||Pt["Hangul Jamo Extended-B"](o)||Pt["Hangul Jamo"](o)||Pt["Hangul Syllables"](o)||Pt.Hiragana(o)||Pt["Ideographic Description Characters"](o)||Pt.Kanbun(o)||Pt["Kangxi Radicals"](o)||Pt["Katakana Phonetic Extensions"](o)||Pt.Katakana(o)&&o!==12540||!(!Pt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Pt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Pt["Unified Canadian Aboriginal Syllabics"](o)||Pt["Unified Canadian Aboriginal Syllabics Extended"](o)||Pt["Vertical Forms"](o)||Pt["Yijing Hexagram Symbols"](o)||Pt["Yi Syllables"](o)||Pt["Yi Radicals"](o))))}function sy(o){return!(pp(o)||function(c){return!!(Pt["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||Pt["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||Pt["Letterlike Symbols"](c)||Pt["Number Forms"](c)||Pt["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||Pt["Control Pictures"](c)&&c!==9251||Pt["Optical Character Recognition"](c)||Pt["Enclosed Alphanumerics"](c)||Pt["Geometric Shapes"](c)||Pt["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||Pt["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||Pt["CJK Symbols and Punctuation"](c)||Pt.Katakana(c)||Pt["Private Use Area"](c)||Pt["CJK Compatibility Forms"](c)||Pt["Small Form Variants"](c)||Pt["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(o))}function Mo(o){return o>=1424&&o<=2303||Pt["Arabic Presentation Forms-A"](o)||Pt["Arabic Presentation Forms-B"](o)}function Gs(o,c){return!(!c&&Mo(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Pt.Khmer(o))}function gp(o){for(var c=0,h=o;c<h.length;c+=1)if(Mo(h[c].charCodeAt(0)))return!0;return!1}var fp=null,Os="unavailable",Ql=null,Xb=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Os="error"),fp&&fp(o)};function E_(){oy.fire(new me("pluginStateChange",{pluginStatus:Os,pluginURL:Ql}))}var oy=new Te,ly=function(){return Os},sl=function(){if(Os!=="deferred"||!Ql)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Os="loading",E_(),Ql&&pn({url:Ql},function(o){o?Xb(o):(Os="loaded",E_())})},ro={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Os==="loaded"||ro.applyArabicShaping!=null},isLoading:function(){return Os==="loading"},setState:function(o){Os=o.pluginStatus,Ql=o.pluginURL},isParsed:function(){return ro.applyArabicShaping!=null&&ro.processBidirectionalText!=null&&ro.processStyledBidirectionalText!=null},getPluginURL:function(){return Ql}},ei=function(o,c){this.zoom=o,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ny,this.transition={})};ei.prototype.isSupportedScript=function(o){return function(c,h){for(var y=0,x=c;y<x.length;y+=1)if(!Gs(x[y].charCodeAt(0),h))return!1;return!0}(o,ro.isLoaded())},ei.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ei.prototype.getCrossfadeParameters=function(){var o=this.zoom,c=o-Math.floor(o),h=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*c}};var Sl=function(o,c){this.property=o,this.value=c,this.expression=function(h,y){if(sp(h))return new th(h,y);if(b_(h)){var x=Nb(h,y);if(x.result==="error")throw new Error(x.value.map(function(A){return A.key+": "+A.message}).join(", "));return x.value}var I=h;return typeof h=="string"&&y.type==="color"&&(I=gi.parse(h)),{kind:"constant",evaluate:function(){return I}}}(c===void 0?o.specification.default:c,o.specification)};Sl.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Sl.prototype.possiblyEvaluate=function(o,c,h){return this.property.possiblyEvaluate(this,o,c,h)};var Lo=function(o){this.property=o,this.value=new Sl(o,void 0)};Lo.prototype.transitioned=function(o,c){return new Xc(this.property,this.value,c,P({},o.transition,this.transition),o.now)},Lo.prototype.untransitioned=function(){return new Xc(this.property,this.value,null,{},0)};var Pr=function(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)};Pr.prototype.getValue=function(o){return de(this._values[o].value.value)},Pr.prototype.setValue=function(o,c){this._values.hasOwnProperty(o)||(this._values[o]=new Lo(this._values[o].property)),this._values[o].value=new Sl(this._values[o].property,c===null?void 0:de(c))},Pr.prototype.getTransition=function(o){return de(this._values[o].transition)},Pr.prototype.setTransition=function(o,c){this._values.hasOwnProperty(o)||(this._values[o]=new Lo(this._values[o].property)),this._values[o].transition=de(c)||void 0},Pr.prototype.serialize=function(){for(var o={},c=0,h=Object.keys(this._values);c<h.length;c+=1){var y=h[c],x=this.getValue(y);x!==void 0&&(o[y]=x);var I=this.getTransition(y);I!==void 0&&(o[y+"-transition"]=I)}return o},Pr.prototype.transitioned=function(o,c){for(var h=new Zu(this._properties),y=0,x=Object.keys(this._values);y<x.length;y+=1){var I=x[y];h._values[I]=this._values[I].transitioned(o,c._values[I])}return h},Pr.prototype.untransitioned=function(){for(var o=new Zu(this._properties),c=0,h=Object.keys(this._values);c<h.length;c+=1){var y=h[c];o._values[y]=this._values[y].untransitioned()}return o};var Xc=function(o,c,h,y,x){this.property=o,this.value=c,this.begin=x+y.delay||0,this.end=this.begin+y.duration||0,o.specification.transition&&(y.delay||y.duration)&&(this.prior=h)};Xc.prototype.possiblyEvaluate=function(o,c,h){var y=o.now||0,x=this.value.possiblyEvaluate(o,c,h),I=this.prior;if(I){if(y>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(y<this.begin)return I.possiblyEvaluate(o,c,h);var A=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(o,c,h),x,function(R){if(R<=0)return 0;if(R>=1)return 1;var B=R*R,D=B*R;return 4*(R<.5?D:3*(R-B)+D-.75)}(A))}return x};var Zu=function(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)};Zu.prototype.possiblyEvaluate=function(o,c,h){for(var y=new M_(this._properties),x=0,I=Object.keys(this._values);x<I.length;x+=1){var A=I[x];y._values[A]=this._values[A].possiblyEvaluate(o,c,h)}return y},Zu.prototype.hasTransition=function(){for(var o=0,c=Object.keys(this._values);o<c.length;o+=1)if(this._values[c[o]].prior)return!0;return!1};var ol=function(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)};ol.prototype.getValue=function(o){return de(this._values[o].value)},ol.prototype.setValue=function(o,c){this._values[o]=new Sl(this._values[o].property,c===null?void 0:de(c))},ol.prototype.serialize=function(){for(var o={},c=0,h=Object.keys(this._values);c<h.length;c+=1){var y=h[c],x=this.getValue(y);x!==void 0&&(o[y]=x)}return o},ol.prototype.possiblyEvaluate=function(o,c,h){for(var y=new M_(this._properties),x=0,I=Object.keys(this._values);x<I.length;x+=1){var A=I[x];y._values[A]=this._values[A].possiblyEvaluate(o,c,h)}return y};var ns=function(o,c,h){this.property=o,this.value=c,this.parameters=h};ns.prototype.isConstant=function(){return this.value.kind==="constant"},ns.prototype.constantOr=function(o){return this.value.kind==="constant"?this.value.value:o},ns.prototype.evaluate=function(o,c,h,y){return this.property.evaluate(this.value,this.parameters,o,c,h,y)};var M_=function(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)};M_.prototype.get=function(o){return this._values[o]};var ua=function(o){this.specification=o};ua.prototype.possiblyEvaluate=function(o,c){return o.expression.evaluate(c)},ua.prototype.interpolate=function(o,c,h){var y=$d[this.specification.type];return y?y(o,c,h):o};var Qt=function(o,c){this.specification=o,this.overrides=c};Qt.prototype.possiblyEvaluate=function(o,c,h,y){return new ns(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(c,null,{},h,y)}:o.expression,c)},Qt.prototype.interpolate=function(o,c,h){if(o.value.kind!=="constant"||c.value.kind!=="constant")return o;if(o.value.value===void 0||c.value.value===void 0)return new ns(this,{kind:"constant",value:void 0},o.parameters);var y=$d[this.specification.type];return y?new ns(this,{kind:"constant",value:y(o.value.value,c.value.value,h)},o.parameters):o},Qt.prototype.evaluate=function(o,c,h,y,x,I){return o.kind==="constant"?o.value:o.evaluate(c,h,y,x,I)};var yp=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.possiblyEvaluate=function(h,y,x,I){if(h.value===void 0)return new ns(this,{kind:"constant",value:void 0},y);if(h.expression.kind==="constant"){var A=h.expression.evaluate(y,null,{},x,I),R=h.property.specification.type==="resolvedImage"&&typeof A!="string"?A.name:A,B=this._calculate(R,R,R,y);return new ns(this,{kind:"constant",value:B},y)}if(h.expression.kind==="camera"){var D=this._calculate(h.expression.evaluate({zoom:y.zoom-1}),h.expression.evaluate({zoom:y.zoom}),h.expression.evaluate({zoom:y.zoom+1}),y);return new ns(this,{kind:"constant",value:D},y)}return new ns(this,h.expression,y)},c.prototype.evaluate=function(h,y,x,I,A,R){if(h.kind==="source"){var B=h.evaluate(y,x,I,A,R);return this._calculate(B,B,B,y)}return h.kind==="composite"?this._calculate(h.evaluate({zoom:Math.floor(y.zoom)-1},x,I),h.evaluate({zoom:Math.floor(y.zoom)},x,I),h.evaluate({zoom:Math.floor(y.zoom)+1},x,I),y):h.value},c.prototype._calculate=function(h,y,x,I){return I.zoom>I.zoomHistory.lastIntegerZoom?{from:h,to:y}:{from:x,to:y}},c.prototype.interpolate=function(h){return h},c}(Qt),rs=function(o){this.specification=o};rs.prototype.possiblyEvaluate=function(o,c,h,y){if(o.value!==void 0){if(o.expression.kind==="constant"){var x=o.expression.evaluate(c,null,{},h,y);return this._calculate(x,x,x,c)}return this._calculate(o.expression.evaluate(new ei(Math.floor(c.zoom-1),c)),o.expression.evaluate(new ei(Math.floor(c.zoom),c)),o.expression.evaluate(new ei(Math.floor(c.zoom+1),c)),c)}},rs.prototype._calculate=function(o,c,h,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:h,to:c}},rs.prototype.interpolate=function(o){return o};var ll=function(o){this.specification=o};ll.prototype.possiblyEvaluate=function(o,c,h,y){return!!o.expression.evaluate(c,null,{},h,y)},ll.prototype.interpolate=function(){return!1};var Br=function(o){for(var c in this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],o){var h=o[c];h.specification.overridable&&this.overridableProperties.push(c);var y=this.defaultPropertyValues[c]=new Sl(h,void 0),x=this.defaultTransitionablePropertyValues[c]=new Lo(h);this.defaultTransitioningPropertyValues[c]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=y.possiblyEvaluate({})}};Yt("DataDrivenProperty",Qt),Yt("DataConstantProperty",ua),Yt("CrossFadedDataDrivenProperty",yp),Yt("CrossFadedProperty",rs),Yt("ColorRampProperty",ll);var Al=function(o){function c(h,y){if(o.call(this),this.id=h.id,this.type=h.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},h.type!=="custom"&&(this.metadata=(h=h).metadata,this.minzoom=h.minzoom,this.maxzoom=h.maxzoom,h.type!=="background"&&(this.source=h.source,this.sourceLayer=h["source-layer"],this.filter=h.filter),y.layout&&(this._unevaluatedLayout=new ol(y.layout)),y.paint)){for(var x in this._transitionablePaint=new Pr(y.paint),h.paint)this.setPaintProperty(x,h.paint[x],{validate:!1});for(var I in h.layout)this.setLayoutProperty(I,h.layout[I],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new M_(y.paint)}}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},c.prototype.getLayoutProperty=function(h){return h==="visibility"?this.visibility:this._unevaluatedLayout.getValue(h)},c.prototype.setLayoutProperty=function(h,y,x){x===void 0&&(x={}),y!=null&&this._validate(S_,"layers."+this.id+".layout."+h,h,y,x)||(h!=="visibility"?this._unevaluatedLayout.setValue(h,y):this.visibility=y)},c.prototype.getPaintProperty=function(h){return J(h,"-transition")?this._transitionablePaint.getTransition(h.slice(0,-11)):this._transitionablePaint.getValue(h)},c.prototype.setPaintProperty=function(h,y,x){if(x===void 0&&(x={}),y!=null&&this._validate(rC,"layers."+this.id+".paint."+h,h,y,x))return!1;if(J(h,"-transition"))return this._transitionablePaint.setTransition(h.slice(0,-11),y||void 0),!1;var I=this._transitionablePaint._values[h],A=I.property.specification["property-type"]==="cross-faded-data-driven",R=I.value.isDataDriven(),B=I.value;this._transitionablePaint.setValue(h,y),this._handleSpecialPaintPropertyUpdate(h);var D=this._transitionablePaint._values[h].value;return D.isDataDriven()||R||A||this._handleOverridablePaintPropertyUpdate(h,B,D)},c.prototype._handleSpecialPaintPropertyUpdate=function(h){},c.prototype._handleOverridablePaintPropertyUpdate=function(h,y,x){return!1},c.prototype.isHidden=function(h){return!!(this.minzoom&&h<this.minzoom)||!!(this.maxzoom&&h>=this.maxzoom)||this.visibility==="none"},c.prototype.updateTransitions=function(h){this._transitioningPaint=this._transitionablePaint.transitioned(h,this._transitioningPaint)},c.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},c.prototype.recalculate=function(h,y){h.getCrossfadeParameters&&(this._crossfadeParameters=h.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(h,void 0,y)),this.paint=this._transitioningPaint.possiblyEvaluate(h,void 0,y)},c.prototype.serialize=function(){var h={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(h.layout=h.layout||{},h.layout.visibility=this.visibility),se(h,function(y,x){return!(y===void 0||x==="layout"&&!Object.keys(y).length||x==="paint"&&!Object.keys(y).length)})},c.prototype._validate=function(h,y,x,I,A){return A===void 0&&(A={}),(!A||A.validate!==!1)&&A_(this,h.call(C_,{key:y,layerType:this.type,objectKey:x,value:I,styleSpec:ae,style:{glyphs:!0,sprite:!0}}))},c.prototype.is3D=function(){return!1},c.prototype.isTileClipped=function(){return!1},c.prototype.hasOffscreenPass=function(){return!1},c.prototype.resize=function(){},c.prototype.isStateDependent=function(){for(var h in this.paint._values){var y=this.paint.get(h);if(y instanceof ns&&Zc(y.property.specification)&&(y.value.kind==="source"||y.value.kind==="composite")&&y.value.isStateDependent)return!0}return!1},c}(Te),uy={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},bp=function(o,c){this._structArray=o,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Mi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Cr(o,c){c===void 0&&(c=1);var h=0,y=0;return{members:o.map(function(x){var I=uy[x.type].BYTES_PER_ELEMENT,A=h=qb(h,Math.max(c,I)),R=x.components||1;return y=Math.max(y,I),h+=I*R,{name:x.name,type:x.type,components:R,offset:A}}),size:qb(h,Math.max(y,c)),alignment:c}}function qb(o,c){return Math.ceil(o/c)*c}Mi.serialize=function(o,c){return o._trim(),c&&(o.isTransferred=!0,c.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}},Mi.deserialize=function(o){var c=Object.create(this.prototype);return c.arrayBuffer=o.arrayBuffer,c.length=o.length,c.capacity=o.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c},Mi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Mi.prototype.clear=function(){this.length=0},Mi.prototype.resize=function(o){this.reserve(o),this.length=o},Mi.prototype.reserve=function(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}},Mi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var qc=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y){var x=this.length;return this.resize(x+1),this.emplace(x,h,y)},c.prototype.emplace=function(h,y,x){var I=2*h;return this.int16[I+0]=y,this.int16[I+1]=x,h},c}(Mi);qc.prototype.bytesPerElement=4,Yt("StructArrayLayout2i4",qc);var cy=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,I){var A=this.length;return this.resize(A+1),this.emplace(A,h,y,x,I)},c.prototype.emplace=function(h,y,x,I,A){var R=4*h;return this.int16[R+0]=y,this.int16[R+1]=x,this.int16[R+2]=I,this.int16[R+3]=A,h},c}(Mi);cy.prototype.bytesPerElement=8,Yt("StructArrayLayout4i8",cy);var eu=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,I,A,R){var B=this.length;return this.resize(B+1),this.emplace(B,h,y,x,I,A,R)},c.prototype.emplace=function(h,y,x,I,A,R,B){var D=6*h;return this.int16[D+0]=y,this.int16[D+1]=x,this.int16[D+2]=I,this.int16[D+3]=A,this.int16[D+4]=R,this.int16[D+5]=B,h},c}(Mi);eu.prototype.bytesPerElement=12,Yt("StructArrayLayout2i4i12",eu);var Ps=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,I,A,R){var B=this.length;return this.resize(B+1),this.emplace(B,h,y,x,I,A,R)},c.prototype.emplace=function(h,y,x,I,A,R,B){var D=4*h,z=8*h;return this.int16[D+0]=y,this.int16[D+1]=x,this.uint8[z+4]=I,this.uint8[z+5]=A,this.uint8[z+6]=R,this.uint8[z+7]=B,h},c}(Mi);Ps.prototype.bytesPerElement=8,Yt("StructArrayLayout2i4ub8",Ps);var nh=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y){var x=this.length;return this.resize(x+1),this.emplace(x,h,y)},c.prototype.emplace=function(h,y,x){var I=2*h;return this.float32[I+0]=y,this.float32[I+1]=x,h},c}(Mi);nh.prototype.bytesPerElement=8,Yt("StructArrayLayout2f8",nh);var Tl=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,I,A,R,B,D,z,X){var Q=this.length;return this.resize(Q+1),this.emplace(Q,h,y,x,I,A,R,B,D,z,X)},c.prototype.emplace=function(h,y,x,I,A,R,B,D,z,X,Q){var ie=10*h;return this.uint16[ie+0]=y,this.uint16[ie+1]=x,this.uint16[ie+2]=I,this.uint16[ie+3]=A,this.uint16[ie+4]=R,this.uint16[ie+5]=B,this.uint16[ie+6]=D,this.uint16[ie+7]=z,this.uint16[ie+8]=X,this.uint16[ie+9]=Q,h},c}(Mi);Tl.prototype.bytesPerElement=20,Yt("StructArrayLayout10ui20",Tl);var vp=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,I,A,R,B,D,z,X,Q,ie){var ge=this.length;return this.resize(ge+1),this.emplace(ge,h,y,x,I,A,R,B,D,z,X,Q,ie)},c.prototype.emplace=function(h,y,x,I,A,R,B,D,z,X,Q,ie,ge){var fe=12*h;return this.int16[fe+0]=y,this.int16[fe+1]=x,this.int16[fe+2]=I,this.int16[fe+3]=A,this.uint16[fe+4]=R,this.uint16[fe+5]=B,this.uint16[fe+6]=D,this.uint16[fe+7]=z,this.int16[fe+8]=X,this.int16[fe+9]=Q,this.int16[fe+10]=ie,this.int16[fe+11]=ge,h},c}(Mi);vp.prototype.bytesPerElement=24,Yt("StructArrayLayout4i4ui4i24",vp);var rh=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x){var I=this.length;return this.resize(I+1),this.emplace(I,h,y,x)},c.prototype.emplace=function(h,y,x,I){var A=3*h;return this.float32[A+0]=y,this.float32[A+1]=x,this.float32[A+2]=I,h},c}(Mi);rh.prototype.bytesPerElement=12,Yt("StructArrayLayout3f12",rh);var L_=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h){var y=this.length;return this.resize(y+1),this.emplace(y,h)},c.prototype.emplace=function(h,y){return this.uint32[1*h+0]=y,h},c}(Mi);L_.prototype.bytesPerElement=4,Yt("StructArrayLayout1ul4",L_);var dy=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,I,A,R,B,D,z){var X=this.length;return this.resize(X+1),this.emplace(X,h,y,x,I,A,R,B,D,z)},c.prototype.emplace=function(h,y,x,I,A,R,B,D,z,X){var Q=10*h,ie=5*h;return this.int16[Q+0]=y,this.int16[Q+1]=x,this.int16[Q+2]=I,this.int16[Q+3]=A,this.int16[Q+4]=R,this.int16[Q+5]=B,this.uint32[ie+3]=D,this.uint16[Q+8]=z,this.uint16[Q+9]=X,h},c}(Mi);dy.prototype.bytesPerElement=20,Yt("StructArrayLayout6i1ul2ui20",dy);var sh=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,I,A,R){var B=this.length;return this.resize(B+1),this.emplace(B,h,y,x,I,A,R)},c.prototype.emplace=function(h,y,x,I,A,R,B){var D=6*h;return this.int16[D+0]=y,this.int16[D+1]=x,this.int16[D+2]=I,this.int16[D+3]=A,this.int16[D+4]=R,this.int16[D+5]=B,h},c}(Mi);sh.prototype.bytesPerElement=12,Yt("StructArrayLayout2i2i2i12",sh);var Yc=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,I,A){var R=this.length;return this.resize(R+1),this.emplace(R,h,y,x,I,A)},c.prototype.emplace=function(h,y,x,I,A,R){var B=4*h,D=8*h;return this.float32[B+0]=y,this.float32[B+1]=x,this.float32[B+2]=I,this.int16[D+6]=A,this.int16[D+7]=R,h},c}(Mi);Yc.prototype.bytesPerElement=16,Yt("StructArrayLayout2f1f2i16",Yc);var hy=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,I){var A=this.length;return this.resize(A+1),this.emplace(A,h,y,x,I)},c.prototype.emplace=function(h,y,x,I,A){var R=12*h,B=3*h;return this.uint8[R+0]=y,this.uint8[R+1]=x,this.float32[B+1]=I,this.float32[B+2]=A,h},c}(Mi);hy.prototype.bytesPerElement=12,Yt("StructArrayLayout2ub2f12",hy);var zu=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x){var I=this.length;return this.resize(I+1),this.emplace(I,h,y,x)},c.prototype.emplace=function(h,y,x,I){var A=3*h;return this.uint16[A+0]=y,this.uint16[A+1]=x,this.uint16[A+2]=I,h},c}(Mi);zu.prototype.bytesPerElement=6,Yt("StructArrayLayout3ui6",zu);var Uu=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,I,A,R,B,D,z,X,Q,ie,ge,fe,ke,Ce,Be){var Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,h,y,x,I,A,R,B,D,z,X,Q,ie,ge,fe,ke,Ce,Be)},c.prototype.emplace=function(h,y,x,I,A,R,B,D,z,X,Q,ie,ge,fe,ke,Ce,Be,Ze){var Ue=24*h,Ke=12*h,ot=48*h;return this.int16[Ue+0]=y,this.int16[Ue+1]=x,this.uint16[Ue+2]=I,this.uint16[Ue+3]=A,this.uint32[Ke+2]=R,this.uint32[Ke+3]=B,this.uint32[Ke+4]=D,this.uint16[Ue+10]=z,this.uint16[Ue+11]=X,this.uint16[Ue+12]=Q,this.float32[Ke+7]=ie,this.float32[Ke+8]=ge,this.uint8[ot+36]=fe,this.uint8[ot+37]=ke,this.uint8[ot+38]=Ce,this.uint32[Ke+10]=Be,this.int16[Ue+22]=Ze,h},c}(Mi);Uu.prototype.bytesPerElement=48,Yt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Uu);var xp=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,I,A,R,B,D,z,X,Q,ie,ge,fe,ke,Ce,Be,Ze,Ue,Ke,ot,vt,Mt,ra,Dt,da,Vt,Ha){var ya=this.length;return this.resize(ya+1),this.emplace(ya,h,y,x,I,A,R,B,D,z,X,Q,ie,ge,fe,ke,Ce,Be,Ze,Ue,Ke,ot,vt,Mt,ra,Dt,da,Vt,Ha)},c.prototype.emplace=function(h,y,x,I,A,R,B,D,z,X,Q,ie,ge,fe,ke,Ce,Be,Ze,Ue,Ke,ot,vt,Mt,ra,Dt,da,Vt,Ha,ya){var ea=34*h,$a=17*h;return this.int16[ea+0]=y,this.int16[ea+1]=x,this.int16[ea+2]=I,this.int16[ea+3]=A,this.int16[ea+4]=R,this.int16[ea+5]=B,this.int16[ea+6]=D,this.int16[ea+7]=z,this.uint16[ea+8]=X,this.uint16[ea+9]=Q,this.uint16[ea+10]=ie,this.uint16[ea+11]=ge,this.uint16[ea+12]=fe,this.uint16[ea+13]=ke,this.uint16[ea+14]=Ce,this.uint16[ea+15]=Be,this.uint16[ea+16]=Ze,this.uint16[ea+17]=Ue,this.uint16[ea+18]=Ke,this.uint16[ea+19]=ot,this.uint16[ea+20]=vt,this.uint16[ea+21]=Mt,this.uint16[ea+22]=ra,this.uint32[$a+12]=Dt,this.float32[$a+13]=da,this.float32[$a+14]=Vt,this.float32[$a+15]=Ha,this.float32[$a+16]=ya,h},c}(Mi);xp.prototype.bytesPerElement=68,Yt("StructArrayLayout8i15ui1ul4f68",xp);var Hu=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h){var y=this.length;return this.resize(y+1),this.emplace(y,h)},c.prototype.emplace=function(h,y){return this.float32[1*h+0]=y,h},c}(Mi);Hu.prototype.bytesPerElement=4,Yt("StructArrayLayout1f4",Hu);var Ro=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x){var I=this.length;return this.resize(I+1),this.emplace(I,h,y,x)},c.prototype.emplace=function(h,y,x,I){var A=3*h;return this.int16[A+0]=y,this.int16[A+1]=x,this.int16[A+2]=I,h},c}(Mi);Ro.prototype.bytesPerElement=6,Yt("StructArrayLayout3i6",Ro);var _y=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x){var I=this.length;return this.resize(I+1),this.emplace(I,h,y,x)},c.prototype.emplace=function(h,y,x,I){var A=4*h;return this.uint32[2*h+0]=y,this.uint16[A+2]=x,this.uint16[A+3]=I,h},c}(Mi);_y.prototype.bytesPerElement=8,Yt("StructArrayLayout1ul2ui8",_y);var R_=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y){var x=this.length;return this.resize(x+1),this.emplace(x,h,y)},c.prototype.emplace=function(h,y,x){var I=2*h;return this.uint16[I+0]=y,this.uint16[I+1]=x,h},c}(Mi);R_.prototype.bytesPerElement=4,Yt("StructArrayLayout2ui4",R_);var my=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h){var y=this.length;return this.resize(y+1),this.emplace(y,h)},c.prototype.emplace=function(h,y){return this.uint16[1*h+0]=y,h},c}(Mi);my.prototype.bytesPerElement=2,Yt("StructArrayLayout1ui2",my);var wp=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,I){var A=this.length;return this.resize(A+1),this.emplace(A,h,y,x,I)},c.prototype.emplace=function(h,y,x,I,A){var R=4*h;return this.float32[R+0]=y,this.float32[R+1]=x,this.float32[R+2]=I,this.float32[R+3]=A,h},c}(Mi);wp.prototype.bytesPerElement=16,Yt("StructArrayLayout4f16",wp);var _=function(o){function c(){o.apply(this,arguments)}o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c;var h={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return h.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},h.x1.get=function(){return this._structArray.int16[this._pos2+2]},h.y1.get=function(){return this._structArray.int16[this._pos2+3]},h.x2.get=function(){return this._structArray.int16[this._pos2+4]},h.y2.get=function(){return this._structArray.int16[this._pos2+5]},h.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},h.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},h.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},h.anchorPoint.get=function(){return new m(this.anchorPointX,this.anchorPointY)},Object.defineProperties(c.prototype,h),c}(bp);_.prototype.size=20;var g=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.get=function(h){return new _(this,h)},c}(dy);Yt("CollisionBoxArray",g);var p=function(o){function c(){o.apply(this,arguments)}o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c;var h={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return h.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},h.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},h.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},h.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},h.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},h.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},h.segment.get=function(){return this._structArray.uint16[this._pos2+10]},h.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},h.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},h.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},h.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},h.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},h.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},h.placedOrientation.set=function(y){this._structArray.uint8[this._pos1+37]=y},h.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},h.hidden.set=function(y){this._structArray.uint8[this._pos1+38]=y},h.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},h.crossTileID.set=function(y){this._structArray.uint32[this._pos4+10]=y},h.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(c.prototype,h),c}(bp);p.prototype.size=48;var b=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.get=function(h){return new p(this,h)},c}(Uu);Yt("PlacedSymbolArray",b);var C=function(o){function c(){o.apply(this,arguments)}o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c;var h={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return h.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},h.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},h.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},h.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},h.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},h.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},h.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},h.key.get=function(){return this._structArray.uint16[this._pos2+8]},h.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},h.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},h.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},h.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},h.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},h.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},h.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},h.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},h.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},h.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},h.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},h.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},h.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},h.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},h.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},h.crossTileID.set=function(y){this._structArray.uint32[this._pos4+12]=y},h.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},h.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},h.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},h.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(c.prototype,h),c}(bp);C.prototype.size=68;var E=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.get=function(h){return new C(this,h)},c}(xp);Yt("SymbolInstanceArray",E);var L=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.getoffsetX=function(h){return this.float32[1*h+0]},c}(Hu);Yt("GlyphOffsetArray",L);var O=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.getx=function(h){return this.int16[3*h+0]},c.prototype.gety=function(h){return this.int16[3*h+1]},c.prototype.gettileUnitDistanceFromAnchor=function(h){return this.int16[3*h+2]},c}(Ro);Yt("SymbolLineVertexArray",O);var Z=function(o){function c(){o.apply(this,arguments)}o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c;var h={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return h.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},h.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},h.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(c.prototype,h),c}(bp);Z.prototype.size=8;var Y=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.get=function(h){return new Z(this,h)},c}(_y);Yt("FeatureIndexArray",Y);var re=Cr([{name:"a_pos",components:2,type:"Int16"}],4).members,oe=function(o){o===void 0&&(o=[]),this.segments=o};function ue(o,c){return 256*(o=M(Math.floor(o),0,255))+M(Math.floor(c),0,255)}oe.prototype.prepareSegment=function(o,c,h,y){var x=this.segments[this.segments.length-1];return o>oe.MAX_VERTEX_ARRAY_LENGTH&&Se("Max vertices per segment is "+oe.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+o),(!x||x.vertexLength+o>oe.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==y)&&(x={vertexOffset:c.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},y!==void 0&&(x.sortKey=y),this.segments.push(x)),x},oe.prototype.get=function(){return this.segments},oe.prototype.destroy=function(){for(var o=0,c=this.segments;o<c.length;o+=1){var h=c[o];for(var y in h.vaos)h.vaos[y].destroy()}},oe.simpleSegment=function(o,c,h,y){return new oe([{vertexOffset:o,primitiveOffset:c,vertexLength:h,primitiveLength:y,vaos:{},sortKey:0}])},oe.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Yt("SegmentVector",oe);var ve=Cr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),be=l(function(o){o.exports=function(c,h){var y,x,I,A,R,B,D,z;for(x=c.length-(y=3&c.length),I=h,R=3432918353,B=461845907,z=0;z<x;)D=255&c.charCodeAt(z)|(255&c.charCodeAt(++z))<<8|(255&c.charCodeAt(++z))<<16|(255&c.charCodeAt(++z))<<24,++z,I=27492+(65535&(A=5*(65535&(I=(I^=D=(65535&(D=(D=(65535&D)*R+(((D>>>16)*R&65535)<<16)&4294967295)<<15|D>>>17))*B+(((D>>>16)*B&65535)<<16)&4294967295)<<13|I>>>19))+((5*(I>>>16)&65535)<<16)&4294967295))+((58964+(A>>>16)&65535)<<16);switch(D=0,y){case 3:D^=(255&c.charCodeAt(z+2))<<16;case 2:D^=(255&c.charCodeAt(z+1))<<8;case 1:I^=D=(65535&(D=(D=(65535&(D^=255&c.charCodeAt(z)))*R+(((D>>>16)*R&65535)<<16)&4294967295)<<15|D>>>17))*B+(((D>>>16)*B&65535)<<16)&4294967295}return I^=c.length,I=2246822507*(65535&(I^=I>>>16))+((2246822507*(I>>>16)&65535)<<16)&4294967295,I=3266489909*(65535&(I^=I>>>13))+((3266489909*(I>>>16)&65535)<<16)&4294967295,(I^=I>>>16)>>>0}}),Me=l(function(o){o.exports=function(c,h){for(var y,x=c.length,I=h^x,A=0;x>=4;)y=1540483477*(65535&(y=255&c.charCodeAt(A)|(255&c.charCodeAt(++A))<<8|(255&c.charCodeAt(++A))<<16|(255&c.charCodeAt(++A))<<24))+((1540483477*(y>>>16)&65535)<<16),I=1540483477*(65535&I)+((1540483477*(I>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),x-=4,++A;switch(x){case 3:I^=(255&c.charCodeAt(A+2))<<16;case 2:I^=(255&c.charCodeAt(A+1))<<8;case 1:I=1540483477*(65535&(I^=255&c.charCodeAt(A)))+((1540483477*(I>>>16)&65535)<<16)}return I=1540483477*(65535&(I^=I>>>13))+((1540483477*(I>>>16)&65535)<<16),(I^=I>>>15)>>>0}}),pe=be,Ee=Me;pe.murmur3=be,pe.murmur2=Ee;var We=function(){this.ids=[],this.positions=[],this.indexed=!1};We.prototype.add=function(o,c,h,y){this.ids.push(je(o)),this.positions.push(c,h,y)},We.prototype.getPositions=function(o){for(var c=je(o),h=0,y=this.ids.length-1;h<y;){var x=h+y>>1;this.ids[x]>=c?y=x:h=x+1}for(var I=[];this.ids[h]===c;)I.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return I},We.serialize=function(o,c){var h=new Float64Array(o.ids),y=new Uint32Array(o.positions);return function x(I,A,R,B){for(;R<B;){for(var D=I[R+B>>1],z=R-1,X=B+1;;){do z++;while(I[z]<D);do X--;while(I[X]>D);if(z>=X)break;He(I,z,X),He(A,3*z,3*X),He(A,3*z+1,3*X+1),He(A,3*z+2,3*X+2)}X-R<B-X?(x(I,A,R,X),R=X+1):(x(I,A,X+1,B),B=X)}}(h,y,0,h.length-1),c&&c.push(h.buffer,y.buffer),{ids:h,positions:y}},We.deserialize=function(o){var c=new We;return c.ids=o.ids,c.positions=o.positions,c.indexed=!0,c};var Ve=Math.pow(2,53)-1;function je(o){var c=+o;return!isNaN(c)&&c<=Ve?c:pe(String(o))}function He(o,c,h){var y=o[c];o[c]=o[h],o[h]=y}Yt("FeaturePositionMap",We);var et=function(o,c){this.gl=o.gl,this.location=c},ht=function(o){function c(h,y){o.call(this,h,y),this.current=0}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))},c}(et),At=function(o){function c(h,y){o.call(this,h,y),this.current=0}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(h){this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))},c}(et),It=function(o){function c(h,y){o.call(this,h,y),this.current=[0,0]}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))},c}(et),Zt=function(o){function c(h,y){o.call(this,h,y),this.current=[0,0,0]}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))},c}(et),ca=function(o){function c(h,y){o.call(this,h,y),this.current=[0,0,0,0]}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3]))},c}(et),ma=function(o){function c(h,y){o.call(this,h,y),this.current=gi.transparent}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(h){h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a))},c}(et),_a=new Float32Array(16),fi=function(o){function c(h,y){o.call(this,h,y),this.current=_a}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.set=function(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(var y=1;y<16;y++)if(h[y]!==this.current[y]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}},c}(et);function qt(o){return[ue(255*o.r,255*o.g),ue(255*o.b,255*o.a)]}var Ta=function(o,c,h){this.value=o,this.uniformNames=c.map(function(y){return"u_"+y}),this.type=h};Ta.prototype.setUniform=function(o,c,h){o.set(h.constantOr(this.value))},Ta.prototype.getBinding=function(o,c,h){return this.type==="color"?new ma(o,c):new At(o,c)};var Za=function(o,c){this.uniformNames=c.map(function(h){return"u_"+h}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Za.prototype.setConstantPatternPositions=function(o,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=o.tlbr},Za.prototype.setUniform=function(o,c,h,y){var x=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&o.set(x)},Za.prototype.getBinding=function(o,c,h){return h.substr(0,9)==="u_pattern"?new ca(o,c):new At(o,c)};var Aa=function(o,c,h,y){this.expression=o,this.type=h,this.maxValue=0,this.paintVertexAttributes=c.map(function(x){return{name:"a_"+x,type:"Float32",components:h==="color"?2:1,offset:0}}),this.paintVertexArray=new y};Aa.prototype.populatePaintArray=function(o,c,h,y,x){var I=this.paintVertexArray.length,A=this.expression.evaluate(new ei(0),c,{},y,[],x);this.paintVertexArray.resize(o),this._setPaintValue(I,o,A)},Aa.prototype.updatePaintArray=function(o,c,h,y){var x=this.expression.evaluate({zoom:0},h,y);this._setPaintValue(o,c,x)},Aa.prototype._setPaintValue=function(o,c,h){if(this.type==="color")for(var y=qt(h),x=o;x<c;x++)this.paintVertexArray.emplace(x,y[0],y[1]);else{for(var I=o;I<c;I++)this.paintVertexArray.emplace(I,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}},Aa.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Aa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Sa=function(o,c,h,y,x,I){this.expression=o,this.uniformNames=c.map(function(A){return"u_"+A+"_t"}),this.type=h,this.useIntegerZoom=y,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=c.map(function(A){return{name:"a_"+A,type:"Float32",components:h==="color"?4:2,offset:0}}),this.paintVertexArray=new I};Sa.prototype.populatePaintArray=function(o,c,h,y,x){var I=this.expression.evaluate(new ei(this.zoom),c,{},y,[],x),A=this.expression.evaluate(new ei(this.zoom+1),c,{},y,[],x),R=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(R,o,I,A)},Sa.prototype.updatePaintArray=function(o,c,h,y){var x=this.expression.evaluate({zoom:this.zoom},h,y),I=this.expression.evaluate({zoom:this.zoom+1},h,y);this._setPaintValue(o,c,x,I)},Sa.prototype._setPaintValue=function(o,c,h,y){if(this.type==="color")for(var x=qt(h),I=qt(y),A=o;A<c;A++)this.paintVertexArray.emplace(A,x[0],x[1],I[0],I[1]);else{for(var R=o;R<c;R++)this.paintVertexArray.emplace(R,h,y);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(y))}},Sa.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Sa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Sa.prototype.setUniform=function(o,c){var h=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,y=M(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);o.set(y)},Sa.prototype.getBinding=function(o,c,h){return new At(o,c)};var Da=function(o,c,h,y,x,I){this.expression=o,this.type=c,this.useIntegerZoom=h,this.zoom=y,this.layerId=I,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x};Da.prototype.populatePaintArray=function(o,c,h){var y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(y,o,c.patterns&&c.patterns[this.layerId],h)},Da.prototype.updatePaintArray=function(o,c,h,y,x){this._setPaintValues(o,c,h.patterns&&h.patterns[this.layerId],x)},Da.prototype._setPaintValues=function(o,c,h,y){if(y&&h){var x=y[h.min],I=y[h.mid],A=y[h.max];if(x&&I&&A)for(var R=o;R<c;R++)this.zoomInPaintVertexArray.emplace(R,I.tl[0],I.tl[1],I.br[0],I.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],I.pixelRatio,x.pixelRatio),this.zoomOutPaintVertexArray.emplace(R,I.tl[0],I.tl[1],I.br[0],I.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],I.pixelRatio,A.pixelRatio)}},Da.prototype.upload=function(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,ve.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,ve.members,this.expression.isStateDependent))},Da.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var xa=function(o,c,h){this.binders={},this._buffers=[];var y=[];for(var x in o.paint._values)if(h(x)){var I=o.paint.get(x);if(I instanceof ns&&Zc(I.property.specification)){var A=_r(x,o.type),R=I.value,B=I.property.specification.type,D=I.property.useIntegerZoom,z=I.property.specification["property-type"],X=z==="cross-faded"||z==="cross-faded-data-driven";if(R.kind==="constant")this.binders[x]=X?new Za(R.value,A):new Ta(R.value,A,B),y.push("/u_"+x);else if(R.kind==="source"||X){var Q=Gn(x,B,"source");this.binders[x]=X?new Da(R,B,D,c,Q,o.id):new Aa(R,A,B,Q),y.push("/a_"+x)}else{var ie=Gn(x,B,"composite");this.binders[x]=new Sa(R,A,B,D,c,ie),y.push("/z_"+x)}}}this.cacheKey=y.sort().join("")};xa.prototype.getMaxValue=function(o){var c=this.binders[o];return c instanceof Aa||c instanceof Sa?c.maxValue:0},xa.prototype.populatePaintArrays=function(o,c,h,y,x){for(var I in this.binders){var A=this.binders[I];(A instanceof Aa||A instanceof Sa||A instanceof Da)&&A.populatePaintArray(o,c,h,y,x)}},xa.prototype.setConstantPatternPositions=function(o,c){for(var h in this.binders){var y=this.binders[h];y instanceof Za&&y.setConstantPatternPositions(o,c)}},xa.prototype.updatePaintArrays=function(o,c,h,y,x){var I=!1;for(var A in o)for(var R=0,B=c.getPositions(A);R<B.length;R+=1){var D=B[R],z=h.feature(D.index);for(var X in this.binders){var Q=this.binders[X];if((Q instanceof Aa||Q instanceof Sa||Q instanceof Da)&&Q.expression.isStateDependent===!0){var ie=y.paint.get(X);Q.expression=ie.value,Q.updatePaintArray(D.start,D.end,z,o[A],x),I=!0}}}return I},xa.prototype.defines=function(){var o=[];for(var c in this.binders){var h=this.binders[c];(h instanceof Ta||h instanceof Za)&&o.push.apply(o,h.uniformNames.map(function(y){return"#define HAS_UNIFORM_"+y}))}return o},xa.prototype.getBinderAttributes=function(){var o=[];for(var c in this.binders){var h=this.binders[c];if(h instanceof Aa||h instanceof Sa)for(var y=0;y<h.paintVertexAttributes.length;y++)o.push(h.paintVertexAttributes[y].name);else if(h instanceof Da)for(var x=0;x<ve.members.length;x++)o.push(ve.members[x].name)}return o},xa.prototype.getBinderUniforms=function(){var o=[];for(var c in this.binders){var h=this.binders[c];if(h instanceof Ta||h instanceof Za||h instanceof Sa)for(var y=0,x=h.uniformNames;y<x.length;y+=1)o.push(x[y])}return o},xa.prototype.getPaintVertexBuffers=function(){return this._buffers},xa.prototype.getUniforms=function(o,c){var h=[];for(var y in this.binders){var x=this.binders[y];if(x instanceof Ta||x instanceof Za||x instanceof Sa)for(var I=0,A=x.uniformNames;I<A.length;I+=1){var R=A[I];if(c[R]){var B=x.getBinding(o,c[R],R);h.push({name:R,property:y,binding:B})}}}return h},xa.prototype.setUniforms=function(o,c,h,y){for(var x=0,I=c;x<I.length;x+=1){var A=I[x],R=A.name,B=A.property;this.binders[B].setUniform(A.binding,y,h.get(B),R)}},xa.prototype.updatePaintBuffers=function(o){for(var c in this._buffers=[],this.binders){var h=this.binders[c];if(o&&h instanceof Da){var y=o.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(h instanceof Aa||h instanceof Sa)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}},xa.prototype.upload=function(o){for(var c in this.binders){var h=this.binders[c];(h instanceof Aa||h instanceof Sa||h instanceof Da)&&h.upload(o)}this.updatePaintBuffers()},xa.prototype.destroy=function(){for(var o in this.binders){var c=this.binders[o];(c instanceof Aa||c instanceof Sa||c instanceof Da)&&c.destroy()}};var fa=function(o,c,h){h===void 0&&(h=function(){return!0}),this.programConfigurations={};for(var y=0,x=o;y<x.length;y+=1){var I=x[y];this.programConfigurations[I.id]=new xa(I,c,h)}this.needsUpload=!1,this._featureMap=new We,this._bufferOffset=0};function _r(o,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(c+"-","").replace(/-/g,"_")]}function Gn(o,c,h){var y={color:{source:nh,composite:wp},number:{source:Hu,composite:nh}},x=function(I){return{"line-pattern":{source:Tl,composite:Tl},"fill-pattern":{source:Tl,composite:Tl},"fill-extrusion-pattern":{source:Tl,composite:Tl}}[I]}(o);return x&&x[h]||y[c][h]}fa.prototype.populatePaintArrays=function(o,c,h,y,x,I){for(var A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(o,c,y,x,I);c.id!==void 0&&this._featureMap.add(c.id,h,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0},fa.prototype.updatePaintArrays=function(o,c,h,y){for(var x=0,I=h;x<I.length;x+=1){var A=I[x];this.needsUpload=this.programConfigurations[A.id].updatePaintArrays(o,this._featureMap,c,A,y)||this.needsUpload}},fa.prototype.get=function(o){return this.programConfigurations[o]},fa.prototype.upload=function(o){if(this.needsUpload){for(var c in this.programConfigurations)this.programConfigurations[c].upload(o);this.needsUpload=!1}},fa.prototype.destroy=function(){for(var o in this.programConfigurations)this.programConfigurations[o].destroy()},Yt("ConstantBinder",Ta),Yt("CrossFadedConstantBinder",Za),Yt("SourceExpressionBinder",Aa),Yt("CrossFadedCompositeBinder",Da),Yt("CompositeExpressionBinder",Sa),Yt("ProgramConfiguration",xa,{omit:["_buffers"]}),Yt("ProgramConfigurationSet",fa);var Yr=Math.pow(2,14)-1,Sr=-Yr-1;function Mn(o){for(var c=8192/o.extent,h=o.loadGeometry(),y=0;y<h.length;y++)for(var x=h[y],I=0;I<x.length;I++){var A=x[I],R=Math.round(A.x*c),B=Math.round(A.y*c);A.x=M(R,Sr,Yr),A.y=M(B,Sr,Yr),(R<A.x||R>A.x+1||B<A.y||B>A.y+1)&&Se("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return h}function Vn(o,c){return{type:o.type,id:o.id,properties:o.properties,geometry:c?Mn(o):[]}}function Bs(o,c,h,y,x){o.emplaceBack(2*c+(y+1)/2,2*h+(x+1)/2)}var ss=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new qc,this.indexArray=new zu,this.segments=new oe,this.programConfigurations=new fa(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};function Xu(o,c){for(var h=0;h<o.length;h++)if(El(c,o[h]))return!0;for(var y=0;y<c.length;y++)if(El(o,c[y]))return!0;return!!k_(o,c)}function ys(o,c,h){return!!El(o,c)||!!qu(c,o,h)}function ul(o,c){if(o.length===1)return W_(c,o[0]);for(var h=0;h<c.length;h++)for(var y=c[h],x=0;x<y.length;x++)if(El(o,y[x]))return!0;for(var I=0;I<o.length;I++)if(W_(c,o[I]))return!0;for(var A=0;A<c.length;A++)if(k_(o,c[A]))return!0;return!1}function ko(o,c,h){if(o.length>1){if(k_(o,c))return!0;for(var y=0;y<c.length;y++)if(qu(c[y],o,h))return!0}for(var x=0;x<o.length;x++)if(qu(o[x],c,h))return!0;return!1}function k_(o,c){if(o.length===0||c.length===0)return!1;for(var h=0;h<o.length-1;h++)for(var y=o[h],x=o[h+1],I=0;I<c.length-1;I++)if(oh(y,x,c[I],c[I+1]))return!0;return!1}function oh(o,c,h,y){return ce(o,h,y)!==ce(c,h,y)&&ce(o,c,h)!==ce(o,c,y)}function qu(o,c,h){var y=h*h;if(c.length===1)return o.distSqr(c[0])<y;for(var x=1;x<c.length;x++)if(lh(o,c[x-1],c[x])<y)return!0;return!1}function lh(o,c,h){var y=c.distSqr(h);if(y===0)return o.distSqr(c);var x=((o.x-c.x)*(h.x-c.x)+(o.y-c.y)*(h.y-c.y))/y;return o.distSqr(x<0?c:x>1?h:h.sub(c)._mult(x)._add(c))}function W_(o,c){for(var h,y,x,I=!1,A=0;A<o.length;A++)for(var R=0,B=(h=o[A]).length-1;R<h.length;B=R++)(y=h[R]).y>c.y!=(x=h[B]).y>c.y&&c.x<(x.x-y.x)*(c.y-y.y)/(x.y-y.y)+y.x&&(I=!I);return I}function El(o,c){for(var h=!1,y=0,x=o.length-1;y<o.length;x=y++){var I=o[y],A=o[x];I.y>c.y!=A.y>c.y&&c.x<(A.x-I.x)*(c.y-I.y)/(A.y-I.y)+I.x&&(h=!h)}return h}function G_(o,c,h){var y=h[0],x=h[2];if(o.x<y.x&&c.x<y.x||o.x>x.x&&c.x>x.x||o.y<y.y&&c.y<y.y||o.y>x.y&&c.y>x.y)return!1;var I=ce(o,c,h[0]);return I!==ce(o,c,h[1])||I!==ce(o,c,h[2])||I!==ce(o,c,h[3])}function Ml(o,c,h){var y=c.paint.get(o).value;return y.kind==="constant"?y.value:h.programConfigurations.get(c.id).getMaxValue(o)}function mr(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function tu(o,c,h,y,x){if(!c[0]&&!c[1])return o;var I=m.convert(c)._mult(x);h==="viewport"&&I._rotate(-y);for(var A=[],R=0;R<o.length;R++)A.push(o[R].sub(I));return A}ss.prototype.populate=function(o,c,h){var y=this.layers[0],x=[],I=null;y.type==="circle"&&(I=y.layout.get("circle-sort-key"));for(var A=0,R=o;A<R.length;A+=1){var B=R[A],D=B.feature,z=B.id,X=B.index,Q=B.sourceLayerIndex,ie=this.layers[0]._featureFilter.needGeometry,ge=Vn(D,ie);if(this.layers[0]._featureFilter.filter(new ei(this.zoom),ge,h)){var fe=I?I.evaluate(ge,{},h):void 0,ke={id:z,properties:D.properties,type:D.type,sourceLayerIndex:Q,index:X,geometry:ie?ge.geometry:Mn(D),patterns:{},sortKey:fe};x.push(ke)}}I&&x.sort(function(Mt,ra){return Mt.sortKey-ra.sortKey});for(var Ce=0,Be=x;Ce<Be.length;Ce+=1){var Ze=Be[Ce],Ue=Ze.geometry,Ke=Ze.index,ot=Ze.sourceLayerIndex,vt=o[Ke].feature;this.addFeature(Ze,Ue,Ke,h),c.featureIndex.insert(vt,Ue,Ke,ot,this.index)}},ss.prototype.update=function(o,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,h)},ss.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ss.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,re),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ss.prototype.addFeature=function(o,c,h,y){for(var x=0,I=c;x<I.length;x+=1)for(var A=0,R=I[x];A<R.length;A+=1){var B=R[A],D=B.x,z=B.y;if(!(D<0||D>=8192||z<0||z>=8192)){var X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),Q=X.vertexLength;Bs(this.layoutVertexArray,D,z,-1,-1),Bs(this.layoutVertexArray,D,z,1,-1),Bs(this.layoutVertexArray,D,z,1,1),Bs(this.layoutVertexArray,D,z,-1,1),this.indexArray.emplaceBack(Q,Q+1,Q+2),this.indexArray.emplaceBack(Q,Q+3,Q+2),X.vertexLength+=4,X.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,{},y)},Yt("CircleBucket",ss,{omit:["layers"]});var Yu=new Br({"circle-sort-key":new Qt(ae.layout_circle["circle-sort-key"])}),Kc={paint:new Br({"circle-radius":new Qt(ae.paint_circle["circle-radius"]),"circle-color":new Qt(ae.paint_circle["circle-color"]),"circle-blur":new Qt(ae.paint_circle["circle-blur"]),"circle-opacity":new Qt(ae.paint_circle["circle-opacity"]),"circle-translate":new ua(ae.paint_circle["circle-translate"]),"circle-translate-anchor":new ua(ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ua(ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ua(ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Qt(ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Qt(ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Qt(ae.paint_circle["circle-stroke-opacity"])}),layout:Yu},Ai=typeof Float32Array<"u"?Float32Array:Array;function so(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function bs(o,c,h){var y=c[0],x=c[1],I=c[2],A=c[3],R=c[4],B=c[5],D=c[6],z=c[7],X=c[8],Q=c[9],ie=c[10],ge=c[11],fe=c[12],ke=c[13],Ce=c[14],Be=c[15],Ze=h[0],Ue=h[1],Ke=h[2],ot=h[3];return o[0]=Ze*y+Ue*R+Ke*X+ot*fe,o[1]=Ze*x+Ue*B+Ke*Q+ot*ke,o[2]=Ze*I+Ue*D+Ke*ie+ot*Ce,o[3]=Ze*A+Ue*z+Ke*ge+ot*Be,o[4]=(Ze=h[4])*y+(Ue=h[5])*R+(Ke=h[6])*X+(ot=h[7])*fe,o[5]=Ze*x+Ue*B+Ke*Q+ot*ke,o[6]=Ze*I+Ue*D+Ke*ie+ot*Ce,o[7]=Ze*A+Ue*z+Ke*ge+ot*Be,o[8]=(Ze=h[8])*y+(Ue=h[9])*R+(Ke=h[10])*X+(ot=h[11])*fe,o[9]=Ze*x+Ue*B+Ke*Q+ot*ke,o[10]=Ze*I+Ue*D+Ke*ie+ot*Ce,o[11]=Ze*A+Ue*z+Ke*ge+ot*Be,o[12]=(Ze=h[12])*y+(Ue=h[13])*R+(Ke=h[14])*X+(ot=h[15])*fe,o[13]=Ze*x+Ue*B+Ke*Q+ot*ke,o[14]=Ze*I+Ue*D+Ke*ie+ot*Ce,o[15]=Ze*A+Ue*z+Ke*ge+ot*Be,o}Math.hypot||(Math.hypot=function(){for(var o=arguments,c=0,h=arguments.length;h--;)c+=o[h]*o[h];return Math.sqrt(c)});var jc,sC=bs;function Ip(o,c,h){var y=c[0],x=c[1],I=c[2],A=c[3];return o[0]=h[0]*y+h[4]*x+h[8]*I+h[12]*A,o[1]=h[1]*y+h[5]*x+h[9]*I+h[13]*A,o[2]=h[2]*y+h[6]*x+h[10]*I+h[14]*A,o[3]=h[3]*y+h[7]*x+h[11]*I+h[15]*A,o}jc=new Ai(3),Ai!=Float32Array&&(jc[0]=0,jc[1]=0,jc[2]=0),function(){var o=new Ai(4);Ai!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0,o[3]=0)}();var oC=(function(){var o=new Ai(2);Ai!=Float32Array&&(o[0]=0,o[1]=0)}(),function(o){function c(h){o.call(this,h,Kc)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.createBucket=function(h){return new ss(h)},c.prototype.queryRadius=function(h){var y=h;return Ml("circle-radius",this,y)+Ml("circle-stroke-width",this,y)+mr(this.paint.get("circle-translate"))},c.prototype.queryIntersectsFeature=function(h,y,x,I,A,R,B,D){for(var z=tu(h,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),R.angle,B),X=this.paint.get("circle-radius").evaluate(y,x)+this.paint.get("circle-stroke-width").evaluate(y,x),Q=this.paint.get("circle-pitch-alignment")==="map",ie=Q?z:function(vt,Mt){return vt.map(function(ra){return O_(ra,Mt)})}(z,D),ge=Q?X*B:X,fe=0,ke=I;fe<ke.length;fe+=1)for(var Ce=0,Be=ke[fe];Ce<Be.length;Ce+=1){var Ze=Be[Ce],Ue=Q?Ze:O_(Ze,D),Ke=ge,ot=Ip([],[Ze.x,Ze.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ke*=ot[3]/R.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ke*=R.cameraToCenterDistance/ot[3]),ys(ie,Ue,Ke))return!0}return!1},c}(Al));function O_(o,c){var h=Ip([],[o.x,o.y,0,1],c);return new m(h[0]/h[3],h[1]/h[3])}var Yb=function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c}(ss);function uh(o,c,h,y){var x=c.width,I=c.height;if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==x*I*h)throw new RangeError("mismatched image size")}else y=new Uint8Array(x*I*h);return o.width=x,o.height=I,o.data=y,o}function Cp(o,c,h){var y=c.width,x=c.height;if(y!==o.width||x!==o.height){var I=uh({},{width:y,height:x},h);lC(o,I,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,y),height:Math.min(o.height,x)},h),o.width=y,o.height=x,o.data=I.data}}function lC(o,c,h,y,x,I){if(x.width===0||x.height===0)return c;if(x.width>o.width||x.height>o.height||h.x>o.width-x.width||h.y>o.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>c.width||x.height>c.height||y.x>c.width-x.width||y.y>c.height-x.height)throw new RangeError("out of range destination coordinates for image copy");for(var A=o.data,R=c.data,B=0;B<x.height;B++)for(var D=((h.y+B)*o.width+h.x)*I,z=((y.y+B)*c.width+y.x)*I,X=0;X<x.width*I;X++)R[z+X]=A[D+X];return c}Yt("HeatmapBucket",Yb,{omit:["layers"]});var P_=function(o,c){uh(this,o,1,c)};P_.prototype.resize=function(o){Cp(this,o,1)},P_.prototype.clone=function(){return new P_({width:this.width,height:this.height},new Uint8Array(this.data))},P_.copy=function(o,c,h,y,x){lC(o,c,h,y,x,1)};var Ns=function(o,c){uh(this,o,4,c)};Ns.prototype.resize=function(o){Cp(this,o,4)},Ns.prototype.replace=function(o,c){c?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o},Ns.prototype.clone=function(){return new Ns({width:this.width,height:this.height},new Uint8Array(this.data))},Ns.copy=function(o,c,h,y,x){lC(o,c,h,y,x,4)},Yt("AlphaImage",P_),Yt("RGBAImage",Ns);var qN={paint:new Br({"heatmap-radius":new Qt(ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Qt(ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ua(ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ll(ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ua(ae.paint_heatmap["heatmap-opacity"])})};function mE(o){var c={},h=o.resolution||256,y=o.clips?o.clips.length:1,x=o.image||new Ns({width:h,height:y}),I=function(ge,fe,ke){c[o.evaluationKey]=ke;var Ce=o.expression.evaluate(c);x.data[ge+fe+0]=Math.floor(255*Ce.r/Ce.a),x.data[ge+fe+1]=Math.floor(255*Ce.g/Ce.a),x.data[ge+fe+2]=Math.floor(255*Ce.b/Ce.a),x.data[ge+fe+3]=Math.floor(255*Ce.a)};if(o.clips)for(var A=0,R=0;A<y;++A,R+=4*h)for(var B=0,D=0;B<h;B++,D+=4){var z=B/(h-1),X=o.clips[A];I(R,D,X.start*(1-z)+X.end*z)}else for(var Q=0,ie=0;Q<h;Q++,ie+=4)I(0,ie,Q/(h-1));return x}var YN=function(o){function c(h){o.call(this,h,qN),this._updateColorRamp()}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.createBucket=function(h){return new Yb(h)},c.prototype._handleSpecialPaintPropertyUpdate=function(h){h==="heatmap-color"&&this._updateColorRamp()},c.prototype._updateColorRamp=function(){this.colorRamp=mE({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},c.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},c.prototype.queryRadius=function(){return 0},c.prototype.queryIntersectsFeature=function(){return!1},c.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},c}(Al),KN={paint:new Br({"hillshade-illumination-direction":new ua(ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ua(ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ua(ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ua(ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ua(ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ua(ae.paint_hillshade["hillshade-accent-color"])})},jN=function(o){function c(h){o.call(this,h,KN)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},c}(Al),$N=Cr([{name:"a_pos",components:2,type:"Int16"}],4).members,uC=Kb,JN=Kb;function Kb(o,c,h){h=h||2;var y,x,I,A,R,B,D,z=c&&c.length,X=z?c[0]*h:o.length,Q=pE(o,0,X,h,!0),ie=[];if(!Q||Q.next===Q.prev)return ie;if(z&&(Q=function(fe,ke,Ce,Be){var Ze,Ue,Ke,ot=[];for(Ze=0,Ue=ke.length;Ze<Ue;Ze++)(Ke=pE(fe,ke[Ze]*Be,Ze<Ue-1?ke[Ze+1]*Be:fe.length,Be,!1))===Ke.next&&(Ke.steiner=!0),ot.push(sF(Ke));for(ot.sort(iF),Ze=0;Ze<ot.length;Ze++)nF(ot[Ze],Ce),Ce=ch(Ce,Ce.next);return Ce}(o,c,Q,h)),o.length>80*h){y=I=o[0],x=A=o[1];for(var ge=h;ge<X;ge+=h)(R=o[ge])<y&&(y=R),(B=o[ge+1])<x&&(x=B),R>I&&(I=R),B>A&&(A=B);D=(D=Math.max(I-y,A-x))!==0?1/D:0}return py(Q,ie,h,y,x,D),ie}function pE(o,c,h,y,x){var I,A;if(x===hC(o,c,h,y)>0)for(I=c;I<h;I+=y)A=yE(I,o[I],o[I+1],A);else for(I=h-y;I>=c;I-=y)A=yE(I,o[I],o[I+1],A);return A&&jb(A,A.next)&&(fy(A),A=A.next),A}function ch(o,c){if(!o)return o;c||(c=o);var h,y=o;do if(h=!1,y.steiner||!jb(y,y.next)&&ar(y.prev,y,y.next)!==0)y=y.next;else{if(fy(y),(y=c=y.prev)===y.next)break;h=!0}while(h||y!==c);return c}function py(o,c,h,y,x,I,A){if(o){!A&&I&&function(z,X,Q,ie){var ge=z;do ge.z===null&&(ge.z=cC(ge.x,ge.y,X,Q,ie)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==z);ge.prevZ.nextZ=null,ge.prevZ=null,function(fe){var ke,Ce,Be,Ze,Ue,Ke,ot,vt,Mt=1;do{for(Ce=fe,fe=null,Ue=null,Ke=0;Ce;){for(Ke++,Be=Ce,ot=0,ke=0;ke<Mt&&(ot++,Be=Be.nextZ);ke++);for(vt=Mt;ot>0||vt>0&&Be;)ot!==0&&(vt===0||!Be||Ce.z<=Be.z)?(Ze=Ce,Ce=Ce.nextZ,ot--):(Ze=Be,Be=Be.nextZ,vt--),Ue?Ue.nextZ=Ze:fe=Ze,Ze.prevZ=Ue,Ue=Ze;Ce=Be}Ue.nextZ=null,Mt*=2}while(Ke>1)}(ge)}(o,y,x,I);for(var R,B,D=o;o.prev!==o.next;)if(R=o.prev,B=o.next,I?eF(o,y,x,I):QN(o))c.push(R.i/h),c.push(o.i/h),c.push(B.i/h),fy(o),o=B.next,D=B.next;else if((o=B)===D){A?A===1?py(o=tF(ch(o),c,h),c,h,y,x,I,2):A===2&&aF(o,c,h,y,x,I):py(ch(o),c,h,y,x,I,1);break}}}function QN(o){var c=o.prev,h=o,y=o.next;if(ar(c,h,y)>=0)return!1;for(var x=o.next.next;x!==o.prev;){if(Sp(c.x,c.y,h.x,h.y,y.x,y.y,x.x,x.y)&&ar(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function eF(o,c,h,y){var x=o.prev,I=o,A=o.next;if(ar(x,I,A)>=0)return!1;for(var R=x.x>I.x?x.x>A.x?x.x:A.x:I.x>A.x?I.x:A.x,B=x.y>I.y?x.y>A.y?x.y:A.y:I.y>A.y?I.y:A.y,D=cC(x.x<I.x?x.x<A.x?x.x:A.x:I.x<A.x?I.x:A.x,x.y<I.y?x.y<A.y?x.y:A.y:I.y<A.y?I.y:A.y,c,h,y),z=cC(R,B,c,h,y),X=o.prevZ,Q=o.nextZ;X&&X.z>=D&&Q&&Q.z<=z;){if(X!==o.prev&&X!==o.next&&Sp(x.x,x.y,I.x,I.y,A.x,A.y,X.x,X.y)&&ar(X.prev,X,X.next)>=0||(X=X.prevZ,Q!==o.prev&&Q!==o.next&&Sp(x.x,x.y,I.x,I.y,A.x,A.y,Q.x,Q.y)&&ar(Q.prev,Q,Q.next)>=0))return!1;Q=Q.nextZ}for(;X&&X.z>=D;){if(X!==o.prev&&X!==o.next&&Sp(x.x,x.y,I.x,I.y,A.x,A.y,X.x,X.y)&&ar(X.prev,X,X.next)>=0)return!1;X=X.prevZ}for(;Q&&Q.z<=z;){if(Q!==o.prev&&Q!==o.next&&Sp(x.x,x.y,I.x,I.y,A.x,A.y,Q.x,Q.y)&&ar(Q.prev,Q,Q.next)>=0)return!1;Q=Q.nextZ}return!0}function tF(o,c,h){var y=o;do{var x=y.prev,I=y.next.next;!jb(x,I)&&gE(x,y,y.next,I)&&gy(x,I)&&gy(I,x)&&(c.push(x.i/h),c.push(y.i/h),c.push(I.i/h),fy(y),fy(y.next),y=o=I),y=y.next}while(y!==o);return ch(y)}function aF(o,c,h,y,x,I){var A=o;do{for(var R=A.next.next;R!==A.prev;){if(A.i!==R.i&&oF(A,R)){var B=fE(A,R);return A=ch(A,A.next),B=ch(B,B.next),py(A,c,h,y,x,I),void py(B,c,h,y,x,I)}R=R.next}A=A.next}while(A!==o)}function iF(o,c){return o.x-c.x}function nF(o,c){if(c=function(y,x){var I,A=x,R=y.x,B=y.y,D=-1/0;do{if(B<=A.y&&B>=A.next.y&&A.next.y!==A.y){var z=A.x+(B-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(z<=R&&z>D){if(D=z,z===R){if(B===A.y)return A;if(B===A.next.y)return A.next}I=A.x<A.next.x?A:A.next}}A=A.next}while(A!==x);if(!I)return null;if(R===D)return I;var X,Q=I,ie=I.x,ge=I.y,fe=1/0;A=I;do R>=A.x&&A.x>=ie&&R!==A.x&&Sp(B<ge?R:D,B,ie,ge,B<ge?D:R,B,A.x,A.y)&&(X=Math.abs(B-A.y)/(R-A.x),gy(A,y)&&(X<fe||X===fe&&(A.x>I.x||A.x===I.x&&rF(I,A)))&&(I=A,fe=X)),A=A.next;while(A!==Q);return I}(o,c)){var h=fE(c,o);ch(c,c.next),ch(h,h.next)}}function rF(o,c){return ar(o.prev,o,c.prev)<0&&ar(c.next,o,o.next)<0}function cC(o,c,h,y,x){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-h)*x)|o<<8))|o<<4))|o<<2))|o<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-y)*x)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function sF(o){var c=o,h=o;do(c.x<h.x||c.x===h.x&&c.y<h.y)&&(h=c),c=c.next;while(c!==o);return h}function Sp(o,c,h,y,x,I,A,R){return(x-A)*(c-R)-(o-A)*(I-R)>=0&&(o-A)*(y-R)-(h-A)*(c-R)>=0&&(h-A)*(I-R)-(x-A)*(y-R)>=0}function oF(o,c){return o.next.i!==c.i&&o.prev.i!==c.i&&!function(h,y){var x=h;do{if(x.i!==h.i&&x.next.i!==h.i&&x.i!==y.i&&x.next.i!==y.i&&gE(x,x.next,h,y))return!0;x=x.next}while(x!==h);return!1}(o,c)&&(gy(o,c)&&gy(c,o)&&function(h,y){var x=h,I=!1,A=(h.x+y.x)/2,R=(h.y+y.y)/2;do x.y>R!=x.next.y>R&&x.next.y!==x.y&&A<(x.next.x-x.x)*(R-x.y)/(x.next.y-x.y)+x.x&&(I=!I),x=x.next;while(x!==h);return I}(o,c)&&(ar(o.prev,o,c.prev)||ar(o,c.prev,c))||jb(o,c)&&ar(o.prev,o,o.next)>0&&ar(c.prev,c,c.next)>0)}function ar(o,c,h){return(c.y-o.y)*(h.x-c.x)-(c.x-o.x)*(h.y-c.y)}function jb(o,c){return o.x===c.x&&o.y===c.y}function gE(o,c,h,y){var x=Jb(ar(o,c,h)),I=Jb(ar(o,c,y)),A=Jb(ar(h,y,o)),R=Jb(ar(h,y,c));return x!==I&&A!==R||!(x!==0||!$b(o,h,c))||!(I!==0||!$b(o,y,c))||!(A!==0||!$b(h,o,y))||!(R!==0||!$b(h,c,y))}function $b(o,c,h){return c.x<=Math.max(o.x,h.x)&&c.x>=Math.min(o.x,h.x)&&c.y<=Math.max(o.y,h.y)&&c.y>=Math.min(o.y,h.y)}function Jb(o){return o>0?1:o<0?-1:0}function gy(o,c){return ar(o.prev,o,o.next)<0?ar(o,c,o.next)>=0&&ar(o,o.prev,c)>=0:ar(o,c,o.prev)<0||ar(o,o.next,c)<0}function fE(o,c){var h=new dC(o.i,o.x,o.y),y=new dC(c.i,c.x,c.y),x=o.next,I=c.prev;return o.next=c,c.prev=o,h.next=x,x.prev=h,y.next=h,h.prev=y,I.next=y,y.prev=I,y}function yE(o,c,h,y){var x=new dC(o,c,h);return y?(x.next=y.next,x.prev=y,y.next.prev=x,y.next=x):(x.prev=x,x.next=x),x}function fy(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function dC(o,c,h){this.i=o,this.x=c,this.y=h,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hC(o,c,h,y){for(var x=0,I=c,A=h-y;I<h;I+=y)x+=(o[A]-o[I])*(o[I+1]+o[A+1]),A=I;return x}function lF(o,c,h,y,x){(function I(A,R,B,D,z){for(;D>B;){if(D-B>600){var X=D-B+1,Q=R-B+1,ie=Math.log(X),ge=.5*Math.exp(2*ie/3),fe=.5*Math.sqrt(ie*ge*(X-ge)/X)*(Q-X/2<0?-1:1);I(A,R,Math.max(B,Math.floor(R-Q*ge/X+fe)),Math.min(D,Math.floor(R+(X-Q)*ge/X+fe)),z)}var ke=A[R],Ce=B,Be=D;for(yy(A,B,R),z(A[D],ke)>0&&yy(A,B,D);Ce<Be;){for(yy(A,Ce,Be),Ce++,Be--;z(A[Ce],ke)<0;)Ce++;for(;z(A[Be],ke)>0;)Be--}z(A[B],ke)===0?yy(A,B,Be):yy(A,++Be,D),Be<=R&&(B=Be+1),R<=Be&&(D=Be-1)}})(o,c,h||0,y||o.length-1,x||uF)}function yy(o,c,h){var y=o[c];o[c]=o[h],o[h]=y}function uF(o,c){return o<c?-1:o>c?1:0}function _C(o,c){var h=o.length;if(h<=1)return[o];for(var y,x,I=[],A=0;A<h;A++){var R=Ie(o[A]);R!==0&&(o[A].area=Math.abs(R),x===void 0&&(x=R<0),x===R<0?(y&&I.push(y),y=[o[A]]):y.push(o[A]))}if(y&&I.push(y),c>1)for(var B=0;B<I.length;B++)I[B].length<=c||(lF(I[B],c,1,I[B].length-1,cF),I[B]=I[B].slice(0,c));return I}function cF(o,c){return c.area-o.area}function mC(o,c,h){for(var y=h.patternDependencies,x=!1,I=0,A=c;I<A.length;I+=1){var R=A[I].paint.get(o+"-pattern");R.isConstant()||(x=!0);var B=R.constantOr(null);B&&(x=!0,y[B.to]=!0,y[B.from]=!0)}return x}function pC(o,c,h,y,x){for(var I=x.patternDependencies,A=0,R=c;A<R.length;A+=1){var B=R[A],D=B.paint.get(o+"-pattern").value;if(D.kind!=="constant"){var z=D.evaluate({zoom:y-1},h,{},x.availableImages),X=D.evaluate({zoom:y},h,{},x.availableImages),Q=D.evaluate({zoom:y+1},h,{},x.availableImages);X=X&&X.name?X.name:X,Q=Q&&Q.name?Q.name:Q,I[z=z&&z.name?z.name:z]=!0,I[X]=!0,I[Q]=!0,h.patterns[B.id]={min:z,mid:X,max:Q}}}return h}Kb.deviation=function(o,c,h,y){var x=c&&c.length,I=Math.abs(hC(o,0,x?c[0]*h:o.length,h));if(x)for(var A=0,R=c.length;A<R;A++)I-=Math.abs(hC(o,c[A]*h,A<R-1?c[A+1]*h:o.length,h));var B=0;for(A=0;A<y.length;A+=3){var D=y[A]*h,z=y[A+1]*h,X=y[A+2]*h;B+=Math.abs((o[D]-o[X])*(o[z+1]-o[D+1])-(o[D]-o[z])*(o[X+1]-o[D+1]))}return I===0&&B===0?0:Math.abs((B-I)/I)},Kb.flatten=function(o){for(var c=o[0][0].length,h={vertices:[],holes:[],dimensions:c},y=0,x=0;x<o.length;x++){for(var I=0;I<o[x].length;I++)for(var A=0;A<c;A++)h.vertices.push(o[x][I][A]);x>0&&h.holes.push(y+=o[x-1].length)}return h},uC.default=JN;var au=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qc,this.indexArray=new zu,this.indexArray2=new R_,this.programConfigurations=new fa(o.layers,o.zoom),this.segments=new oe,this.segments2=new oe,this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};au.prototype.populate=function(o,c,h){this.hasPattern=mC("fill",this.layers,c);for(var y=this.layers[0].layout.get("fill-sort-key"),x=[],I=0,A=o;I<A.length;I+=1){var R=A[I],B=R.feature,D=R.id,z=R.index,X=R.sourceLayerIndex,Q=this.layers[0]._featureFilter.needGeometry,ie=Vn(B,Q);if(this.layers[0]._featureFilter.filter(new ei(this.zoom),ie,h)){var ge=y?y.evaluate(ie,{},h,c.availableImages):void 0,fe={id:D,properties:B.properties,type:B.type,sourceLayerIndex:X,index:z,geometry:Q?ie.geometry:Mn(B),patterns:{},sortKey:ge};x.push(fe)}}y&&x.sort(function(vt,Mt){return vt.sortKey-Mt.sortKey});for(var ke=0,Ce=x;ke<Ce.length;ke+=1){var Be=Ce[ke],Ze=Be.geometry,Ue=Be.index,Ke=Be.sourceLayerIndex;if(this.hasPattern){var ot=pC("fill",this.layers,Be,this.zoom,c);this.patternFeatures.push(ot)}else this.addFeature(Be,Ze,Ue,h,{});c.featureIndex.insert(o[Ue].feature,Ze,Ue,Ke,this.index)}},au.prototype.update=function(o,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,h)},au.prototype.addFeatures=function(o,c,h){for(var y=0,x=this.patternFeatures;y<x.length;y+=1){var I=x[y];this.addFeature(I,I.geometry,I.index,c,h)}},au.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},au.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},au.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,$N),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0},au.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},au.prototype.addFeature=function(o,c,h,y,x){for(var I=0,A=_C(c,500);I<A.length;I+=1){for(var R=A[I],B=0,D=0,z=R;D<z.length;D+=1)B+=z[D].length;for(var X=this.segments.prepareSegment(B,this.layoutVertexArray,this.indexArray),Q=X.vertexLength,ie=[],ge=[],fe=0,ke=R;fe<ke.length;fe+=1){var Ce=ke[fe];if(Ce.length!==0){Ce!==R[0]&&ge.push(ie.length/2);var Be=this.segments2.prepareSegment(Ce.length,this.layoutVertexArray,this.indexArray2),Ze=Be.vertexLength;this.layoutVertexArray.emplaceBack(Ce[0].x,Ce[0].y),this.indexArray2.emplaceBack(Ze+Ce.length-1,Ze),ie.push(Ce[0].x),ie.push(Ce[0].y);for(var Ue=1;Ue<Ce.length;Ue++)this.layoutVertexArray.emplaceBack(Ce[Ue].x,Ce[Ue].y),this.indexArray2.emplaceBack(Ze+Ue-1,Ze+Ue),ie.push(Ce[Ue].x),ie.push(Ce[Ue].y);Be.vertexLength+=Ce.length,Be.primitiveLength+=Ce.length}}for(var Ke=uC(ie,ge),ot=0;ot<Ke.length;ot+=3)this.indexArray.emplaceBack(Q+Ke[ot],Q+Ke[ot+1],Q+Ke[ot+2]);X.vertexLength+=B,X.primitiveLength+=Ke.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,x,y)},Yt("FillBucket",au,{omit:["layers","patternFeatures"]});var dF=new Br({"fill-sort-key":new Qt(ae.layout_fill["fill-sort-key"])}),hF={paint:new Br({"fill-antialias":new ua(ae.paint_fill["fill-antialias"]),"fill-opacity":new Qt(ae.paint_fill["fill-opacity"]),"fill-color":new Qt(ae.paint_fill["fill-color"]),"fill-outline-color":new Qt(ae.paint_fill["fill-outline-color"]),"fill-translate":new ua(ae.paint_fill["fill-translate"]),"fill-translate-anchor":new ua(ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new yp(ae.paint_fill["fill-pattern"])}),layout:dF},_F=function(o){function c(h){o.call(this,h,hF)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.recalculate=function(h,y){o.prototype.recalculate.call(this,h,y);var x=this.paint._values["fill-outline-color"];x.value.kind==="constant"&&x.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},c.prototype.createBucket=function(h){return new au(h)},c.prototype.queryRadius=function(){return mr(this.paint.get("fill-translate"))},c.prototype.queryIntersectsFeature=function(h,y,x,I,A,R,B){return ul(tu(h,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),R.angle,B),I)},c.prototype.isTileClipped=function(){return!0},c}(Al),mF=Cr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,bE=Ap;function Ap(o,c,h,y,x){this.properties={},this.extent=h,this.type=0,this._pbf=o,this._geometry=-1,this._keys=y,this._values=x,o.readFields(pF,this,c)}function pF(o,c,h){o==1?c.id=h.readVarint():o==2?function(y,x){for(var I=y.readVarint()+y.pos;y.pos<I;){var A=x._keys[y.readVarint()],R=x._values[y.readVarint()];x.properties[A]=R}}(h,c):o==3?c.type=h.readVarint():o==4&&(c._geometry=h.pos)}function gF(o){for(var c,h,y=0,x=0,I=o.length,A=I-1;x<I;A=x++)y+=((h=o[A]).x-(c=o[x]).x)*(c.y+h.y);return y}Ap.types=["Unknown","Point","LineString","Polygon"],Ap.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var c,h=o.readVarint()+o.pos,y=1,x=0,I=0,A=0,R=[];o.pos<h;){if(x<=0){var B=o.readVarint();y=7&B,x=B>>3}if(x--,y===1||y===2)I+=o.readSVarint(),A+=o.readSVarint(),y===1&&(c&&R.push(c),c=[]),c.push(new m(I,A));else{if(y!==7)throw new Error("unknown command "+y);c&&c.push(c[0].clone())}}return c&&R.push(c),R},Ap.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var c=o.readVarint()+o.pos,h=1,y=0,x=0,I=0,A=1/0,R=-1/0,B=1/0,D=-1/0;o.pos<c;){if(y<=0){var z=o.readVarint();h=7&z,y=z>>3}if(y--,h===1||h===2)(x+=o.readSVarint())<A&&(A=x),x>R&&(R=x),(I+=o.readSVarint())<B&&(B=I),I>D&&(D=I);else if(h!==7)throw new Error("unknown command "+h)}return[A,B,R,D]},Ap.prototype.toGeoJSON=function(o,c,h){var y,x,I=this.extent*Math.pow(2,h),A=this.extent*o,R=this.extent*c,B=this.loadGeometry(),D=Ap.types[this.type];function z(ie){for(var ge=0;ge<ie.length;ge++){var fe=ie[ge];ie[ge]=[360*(fe.x+A)/I-180,360/Math.PI*Math.atan(Math.exp((180-360*(fe.y+R)/I)*Math.PI/180))-90]}}switch(this.type){case 1:var X=[];for(y=0;y<B.length;y++)X[y]=B[y][0];z(B=X);break;case 2:for(y=0;y<B.length;y++)z(B[y]);break;case 3:for(B=function(ie){var ge=ie.length;if(ge<=1)return[ie];for(var fe,ke,Ce=[],Be=0;Be<ge;Be++){var Ze=gF(ie[Be]);Ze!==0&&(ke===void 0&&(ke=Ze<0),ke===Ze<0?(fe&&Ce.push(fe),fe=[ie[Be]]):fe.push(ie[Be]))}return fe&&Ce.push(fe),Ce}(B),y=0;y<B.length;y++)for(x=0;x<B[y].length;x++)z(B[y][x])}B.length===1?B=B[0]:D="Multi"+D;var Q={type:"Feature",geometry:{type:D,coordinates:B},properties:this.properties};return"id"in this&&(Q.id=this.id),Q};var vE=xE;function xE(o,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(fF,this,c),this.length=this._features.length}function fF(o,c,h){o===15?c.version=h.readVarint():o===1?c.name=h.readString():o===5?c.extent=h.readVarint():o===2?c._features.push(h.pos):o===3?c._keys.push(h.readString()):o===4&&c._values.push(function(y){for(var x=null,I=y.readVarint()+y.pos;y.pos<I;){var A=y.readVarint()>>3;x=A===1?y.readString():A===2?y.readFloat():A===3?y.readDouble():A===4?y.readVarint64():A===5?y.readVarint():A===6?y.readSVarint():A===7?y.readBoolean():null}return x}(h))}function yF(o,c,h){if(o===3){var y=new vE(h,h.readVarint()+h.pos);y.length&&(c[y.name]=y)}}xE.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var c=this._pbf.readVarint()+this._pbf.pos;return new bE(this._pbf,c,this.extent,this._keys,this._values)};var Tp={VectorTile:function(o,c){this.layers=o.readFields(yF,{},c)},VectorTileFeature:bE,VectorTileLayer:vE},bF=Tp.VectorTileFeature.types,gC=Math.pow(2,13);function by(o,c,h,y,x,I,A,R){o.emplaceBack(c,h,2*Math.floor(y*gC)+A,x*gC*2,I*gC*2,Math.round(R))}var iu=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new eu,this.indexArray=new zu,this.programConfigurations=new fa(o.layers,o.zoom),this.segments=new oe,this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};function vF(o,c){return o.x===c.x&&(o.x<0||o.x>8192)||o.y===c.y&&(o.y<0||o.y>8192)}iu.prototype.populate=function(o,c,h){this.features=[],this.hasPattern=mC("fill-extrusion",this.layers,c);for(var y=0,x=o;y<x.length;y+=1){var I=x[y],A=I.feature,R=I.id,B=I.index,D=I.sourceLayerIndex,z=this.layers[0]._featureFilter.needGeometry,X=Vn(A,z);if(this.layers[0]._featureFilter.filter(new ei(this.zoom),X,h)){var Q={id:R,sourceLayerIndex:D,index:B,geometry:z?X.geometry:Mn(A),properties:A.properties,type:A.type,patterns:{}};this.hasPattern?this.features.push(pC("fill-extrusion",this.layers,Q,this.zoom,c)):this.addFeature(Q,Q.geometry,B,h,{}),c.featureIndex.insert(A,Q.geometry,B,D,this.index,!0)}}},iu.prototype.addFeatures=function(o,c,h){for(var y=0,x=this.features;y<x.length;y+=1){var I=x[y];this.addFeature(I,I.geometry,I.index,c,h)}},iu.prototype.update=function(o,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,h)},iu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},iu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},iu.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,mF),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},iu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},iu.prototype.addFeature=function(o,c,h,y,x){for(var I=0,A=_C(c,500);I<A.length;I+=1){for(var R=A[I],B=0,D=0,z=R;D<z.length;D+=1)B+=z[D].length;for(var X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Q=0,ie=R;Q<ie.length;Q+=1){var ge=ie[Q];if(ge.length!==0&&!(($a=ge).every(function(Fa){return Fa.x<0})||$a.every(function(Fa){return Fa.x>8192})||$a.every(function(Fa){return Fa.y<0})||$a.every(function(Fa){return Fa.y>8192})))for(var fe=0,ke=0;ke<ge.length;ke++){var Ce=ge[ke];if(ke>=1){var Be=ge[ke-1];if(!vF(Ce,Be)){X.vertexLength+4>oe.MAX_VERTEX_ARRAY_LENGTH&&(X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Ze=Ce.sub(Be)._perp()._unit(),Ue=Be.dist(Ce);fe+Ue>32768&&(fe=0),by(this.layoutVertexArray,Ce.x,Ce.y,Ze.x,Ze.y,0,0,fe),by(this.layoutVertexArray,Ce.x,Ce.y,Ze.x,Ze.y,0,1,fe),by(this.layoutVertexArray,Be.x,Be.y,Ze.x,Ze.y,0,0,fe+=Ue),by(this.layoutVertexArray,Be.x,Be.y,Ze.x,Ze.y,0,1,fe);var Ke=X.vertexLength;this.indexArray.emplaceBack(Ke,Ke+2,Ke+1),this.indexArray.emplaceBack(Ke+1,Ke+2,Ke+3),X.vertexLength+=4,X.primitiveLength+=2}}}}if(X.vertexLength+B>oe.MAX_VERTEX_ARRAY_LENGTH&&(X=this.segments.prepareSegment(B,this.layoutVertexArray,this.indexArray)),bF[o.type]==="Polygon"){for(var ot=[],vt=[],Mt=X.vertexLength,ra=0,Dt=R;ra<Dt.length;ra+=1){var da=Dt[ra];if(da.length!==0){da!==R[0]&&vt.push(ot.length/2);for(var Vt=0;Vt<da.length;Vt++){var Ha=da[Vt];by(this.layoutVertexArray,Ha.x,Ha.y,0,0,1,1,0),ot.push(Ha.x),ot.push(Ha.y)}}}for(var ya=uC(ot,vt),ea=0;ea<ya.length;ea+=3)this.indexArray.emplaceBack(Mt+ya[ea],Mt+ya[ea+2],Mt+ya[ea+1]);X.primitiveLength+=ya.length/3,X.vertexLength+=B}}var $a;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,x,y)},Yt("FillExtrusionBucket",iu,{omit:["layers","features"]});var xF={paint:new Br({"fill-extrusion-opacity":new ua(ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Qt(ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ua(ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ua(ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new yp(ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Qt(ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Qt(ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ua(ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},wF=function(o){function c(h){o.call(this,h,xF)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.createBucket=function(h){return new iu(h)},c.prototype.queryRadius=function(){return mr(this.paint.get("fill-extrusion-translate"))},c.prototype.is3D=function(){return!0},c.prototype.queryIntersectsFeature=function(h,y,x,I,A,R,B,D){var z=tu(h,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),R.angle,B),X=this.paint.get("fill-extrusion-height").evaluate(y,x),Q=this.paint.get("fill-extrusion-base").evaluate(y,x),ie=function(fe,ke,Ce,Be){for(var Ze=[],Ue=0,Ke=fe;Ue<Ke.length;Ue+=1){var ot=Ke[Ue],vt=[ot.x,ot.y,0,1];Ip(vt,vt,ke),Ze.push(new m(vt[0]/vt[3],vt[1]/vt[3]))}return Ze}(z,D),ge=function(fe,ke,Ce,Be){for(var Ze=[],Ue=[],Ke=Be[8]*ke,ot=Be[9]*ke,vt=Be[10]*ke,Mt=Be[11]*ke,ra=Be[8]*Ce,Dt=Be[9]*Ce,da=Be[10]*Ce,Vt=Be[11]*Ce,Ha=0,ya=fe;Ha<ya.length;Ha+=1){for(var ea=[],$a=[],Fa=0,pi=ya[Ha];Fa<pi.length;Fa+=1){var ha=pi[Fa],Ci=ha.x,bn=ha.y,On=Be[0]*Ci+Be[4]*bn+Be[12],Ln=Be[1]*Ci+Be[5]*bn+Be[13],vn=Be[2]*Ci+Be[6]*bn+Be[14],Pn=Be[3]*Ci+Be[7]*bn+Be[15],pr=vn+vt,gr=Pn+Mt,ls=On+ra,Tr=Ln+Dt,us=vn+da,Zn=Pn+Vt,Er=new m((On+Ke)/gr,(Ln+ot)/gr);Er.z=pr/gr,ea.push(Er);var ri=new m(ls/Zn,Tr/Zn);ri.z=us/Zn,$a.push(ri)}Ze.push(ea),Ue.push($a)}return[Ze,Ue]}(I,Q,X,D);return function(fe,ke,Ce){var Be=1/0;ul(Ce,ke)&&(Be=wE(Ce,ke[0]));for(var Ze=0;Ze<ke.length;Ze++)for(var Ue=ke[Ze],Ke=fe[Ze],ot=0;ot<Ue.length-1;ot++){var vt=Ue[ot],Mt=[vt,Ue[ot+1],Ke[ot+1],Ke[ot],vt];Xu(Ce,Mt)&&(Be=Math.min(Be,wE(Ce,Mt)))}return Be!==1/0&&Be}(ge[0],ge[1],ie)},c}(Al);function vy(o,c){return o.x*c.x+o.y*c.y}function wE(o,c){if(o.length===1){for(var h,y=0,x=c[y++];!h||x.equals(h);)if(!(h=c[y++]))return 1/0;for(;y<c.length;y++){var I=c[y],A=o[0],R=h.sub(x),B=I.sub(x),D=A.sub(x),z=vy(R,R),X=vy(R,B),Q=vy(B,B),ie=vy(D,R),ge=vy(D,B),fe=z*Q-X*X,ke=(Q*ie-X*ge)/fe,Ce=(z*ge-X*ie)/fe,Be=x.z*(1-ke-Ce)+h.z*ke+I.z*Ce;if(isFinite(Be))return Be}return 1/0}for(var Ze=1/0,Ue=0,Ke=c;Ue<Ke.length;Ue+=1)Ze=Math.min(Ze,Ke[Ue].z);return Ze}var IF=Cr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,CF=Cr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,SF=Tp.VectorTileFeature.types,AF=Math.cos(Math.PI/180*37.5),IE=Math.pow(2,14)/.5,vs=function(o){var c=this;this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(h){return h.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(h){c.gradients[h.id]={}}),this.layoutVertexArray=new Ps,this.layoutVertexArray2=new nh,this.indexArray=new zu,this.programConfigurations=new fa(o.layers,o.zoom),this.segments=new oe,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(h){return h.isStateDependent()}).map(function(h){return h.id})};vs.prototype.populate=function(o,c,h){this.hasPattern=mC("line",this.layers,c);for(var y=this.layers[0].layout.get("line-sort-key"),x=[],I=0,A=o;I<A.length;I+=1){var R=A[I],B=R.feature,D=R.id,z=R.index,X=R.sourceLayerIndex,Q=this.layers[0]._featureFilter.needGeometry,ie=Vn(B,Q);if(this.layers[0]._featureFilter.filter(new ei(this.zoom),ie,h)){var ge=y?y.evaluate(ie,{},h):void 0,fe={id:D,properties:B.properties,type:B.type,sourceLayerIndex:X,index:z,geometry:Q?ie.geometry:Mn(B),patterns:{},sortKey:ge};x.push(fe)}}y&&x.sort(function(vt,Mt){return vt.sortKey-Mt.sortKey});for(var ke=0,Ce=x;ke<Ce.length;ke+=1){var Be=Ce[ke],Ze=Be.geometry,Ue=Be.index,Ke=Be.sourceLayerIndex;if(this.hasPattern){var ot=pC("line",this.layers,Be,this.zoom,c);this.patternFeatures.push(ot)}else this.addFeature(Be,Ze,Ue,h,{});c.featureIndex.insert(o[Ue].feature,Ze,Ue,Ke,this.index)}},vs.prototype.update=function(o,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,h)},vs.prototype.addFeatures=function(o,c,h){for(var y=0,x=this.patternFeatures;y<x.length;y+=1){var I=x[y];this.addFeature(I,I.geometry,I.index,c,h)}},vs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},vs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vs.prototype.upload=function(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,CF)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,IF),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},vs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vs.prototype.lineFeatureClips=function(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}},vs.prototype.addFeature=function(o,c,h,y,x){var I=this.layers[0].layout,A=I.get("line-join").evaluate(o,{}),R=I.get("line-cap"),B=I.get("line-miter-limit"),D=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(var z=0,X=c;z<X.length;z+=1)this.addLine(X[z],o,A,R,B,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,x,y)},vs.prototype.addLine=function(o,c,h,y,x,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var A=0;A<o.length-1;A++)this.totalDistance+=o[A].dist(o[A+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var R=SF[c.type]==="Polygon",B=o.length;B>=2&&o[B-1].equals(o[B-2]);)B--;for(var D=0;D<B-1&&o[D].equals(o[D+1]);)D++;if(!(B<(R?3:2))){h==="bevel"&&(x=1.05);var z,X=this.overscaling<=16?122880/(512*this.overscaling):0,Q=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray),ie=void 0,ge=void 0,fe=void 0,ke=void 0;this.e1=this.e2=-1,R&&(ke=o[D].sub(z=o[B-2])._unit()._perp());for(var Ce=D;Ce<B;Ce++)if(!(ge=Ce===B-1?R?o[D+1]:void 0:o[Ce+1])||!o[Ce].equals(ge)){ke&&(fe=ke),z&&(ie=z),z=o[Ce],ke=ge?ge.sub(z)._unit()._perp():fe;var Be=(fe=fe||ke).add(ke);Be.x===0&&Be.y===0||Be._unit();var Ze=fe.x*ke.x+fe.y*ke.y,Ue=Be.x*ke.x+Be.y*ke.y,Ke=Ue!==0?1/Ue:1/0,ot=2*Math.sqrt(2-2*Ue),vt=Ue<AF&&ie&&ge,Mt=fe.x*ke.y-fe.y*ke.x>0;if(vt&&Ce>D){var ra=z.dist(ie);if(ra>2*X){var Dt=z.sub(z.sub(ie)._mult(X/ra)._round());this.updateDistance(ie,Dt),this.addCurrentVertex(Dt,fe,0,0,Q),ie=Dt}}var da=ie&&ge,Vt=da?h:R?"butt":y;if(da&&Vt==="round"&&(Ke<I?Vt="miter":Ke<=2&&(Vt="fakeround")),Vt==="miter"&&Ke>x&&(Vt="bevel"),Vt==="bevel"&&(Ke>2&&(Vt="flipbevel"),Ke<x&&(Vt="miter")),ie&&this.updateDistance(ie,z),Vt==="miter")Be._mult(Ke),this.addCurrentVertex(z,Be,0,0,Q);else if(Vt==="flipbevel"){if(Ke>100)Be=ke.mult(-1);else{var Ha=Ke*fe.add(ke).mag()/fe.sub(ke).mag();Be._perp()._mult(Ha*(Mt?-1:1))}this.addCurrentVertex(z,Be,0,0,Q),this.addCurrentVertex(z,Be.mult(-1),0,0,Q)}else if(Vt==="bevel"||Vt==="fakeround"){var ya=-Math.sqrt(Ke*Ke-1),ea=Mt?ya:0,$a=Mt?0:ya;if(ie&&this.addCurrentVertex(z,fe,ea,$a,Q),Vt==="fakeround")for(var Fa=Math.round(180*ot/Math.PI/20),pi=1;pi<Fa;pi++){var ha=pi/Fa;if(ha!==.5){var Ci=ha-.5;ha+=ha*Ci*(ha-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*Ci*Ci+(.848013+Ze*(.215638*Ze-1.06021)))}var bn=ke.sub(fe)._mult(ha)._add(fe)._unit()._mult(Mt?-1:1);this.addHalfVertex(z,bn.x,bn.y,!1,Mt,0,Q)}ge&&this.addCurrentVertex(z,ke,-ea,-$a,Q)}else if(Vt==="butt")this.addCurrentVertex(z,Be,0,0,Q);else if(Vt==="square"){var On=ie?1:-1;this.addCurrentVertex(z,Be,On,On,Q)}else Vt==="round"&&(ie&&(this.addCurrentVertex(z,fe,0,0,Q),this.addCurrentVertex(z,fe,1,1,Q,!0)),ge&&(this.addCurrentVertex(z,ke,-1,-1,Q,!0),this.addCurrentVertex(z,ke,0,0,Q)));if(vt&&Ce<B-1){var Ln=z.dist(ge);if(Ln>2*X){var vn=z.add(ge.sub(z)._mult(X/Ln)._round());this.updateDistance(z,vn),this.addCurrentVertex(vn,ke,0,0,Q),z=vn}}}}},vs.prototype.addCurrentVertex=function(o,c,h,y,x,I){I===void 0&&(I=!1);var A=c.y*y-c.x,R=-c.y-c.x*y;this.addHalfVertex(o,c.x+c.y*h,c.y-c.x*h,I,!1,h,x),this.addHalfVertex(o,A,R,I,!0,-y,x),this.distance>IE/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(o,c,h,y,x,I))},vs.prototype.addHalfVertex=function(o,c,h,y,x,I,A){var R=.5*(this.lineClips?this.scaledDistance*(IE-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o.x<<1)+(y?1:0),(o.y<<1)+(x?1:0),Math.round(63*c)+128,Math.round(63*h)+128,1+(I===0?0:I<0?-1:1)|(63&R)<<2,R>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var B=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,B),A.primitiveLength++),x?this.e2=B:this.e1=B},vs.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},vs.prototype.updateDistance=function(o,c){this.distance+=o.dist(c),this.updateScaledDistance()},Yt("LineBucket",vs,{omit:["layers","patternFeatures"]});var TF=new Br({"line-cap":new ua(ae.layout_line["line-cap"]),"line-join":new Qt(ae.layout_line["line-join"]),"line-miter-limit":new ua(ae.layout_line["line-miter-limit"]),"line-round-limit":new ua(ae.layout_line["line-round-limit"]),"line-sort-key":new Qt(ae.layout_line["line-sort-key"])}),CE={paint:new Br({"line-opacity":new Qt(ae.paint_line["line-opacity"]),"line-color":new Qt(ae.paint_line["line-color"]),"line-translate":new ua(ae.paint_line["line-translate"]),"line-translate-anchor":new ua(ae.paint_line["line-translate-anchor"]),"line-width":new Qt(ae.paint_line["line-width"]),"line-gap-width":new Qt(ae.paint_line["line-gap-width"]),"line-offset":new Qt(ae.paint_line["line-offset"]),"line-blur":new Qt(ae.paint_line["line-blur"]),"line-dasharray":new rs(ae.paint_line["line-dasharray"]),"line-pattern":new yp(ae.paint_line["line-pattern"]),"line-gradient":new ll(ae.paint_line["line-gradient"])}),layout:TF},SE=new(function(o){function c(){o.apply(this,arguments)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.possiblyEvaluate=function(h,y){return y=new ei(Math.floor(y.zoom),{now:y.now,fadeDuration:y.fadeDuration,zoomHistory:y.zoomHistory,transition:y.transition}),o.prototype.possiblyEvaluate.call(this,h,y)},c.prototype.evaluate=function(h,y,x,I){return y=P({},y,{zoom:Math.floor(y.zoom)}),o.prototype.evaluate.call(this,h,y,x,I)},c}(Qt))(CE.paint.properties["line-width"].specification);SE.useIntegerZoom=!0;var EF=function(o){function c(h){o.call(this,h,CE),this.gradientVersion=0}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype._handleSpecialPaintPropertyUpdate=function(h){h==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Rs,this.gradientVersion=(this.gradientVersion+1)%w)},c.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},c.prototype.recalculate=function(h,y){o.prototype.recalculate.call(this,h,y),this.paint._values["line-floorwidth"]=SE.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,h)},c.prototype.createBucket=function(h){return new vs(h)},c.prototype.queryRadius=function(h){var y=h,x=AE(Ml("line-width",this,y),Ml("line-gap-width",this,y)),I=Ml("line-offset",this,y);return x/2+Math.abs(I)+mr(this.paint.get("line-translate"))},c.prototype.queryIntersectsFeature=function(h,y,x,I,A,R,B){var D=tu(h,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),R.angle,B),z=B/2*AE(this.paint.get("line-width").evaluate(y,x),this.paint.get("line-gap-width").evaluate(y,x)),X=this.paint.get("line-offset").evaluate(y,x);return X&&(I=function(Q,ie){for(var ge=[],fe=new m(0,0),ke=0;ke<Q.length;ke++){for(var Ce=Q[ke],Be=[],Ze=0;Ze<Ce.length;Ze++){var Ue=Ce[Ze],Ke=Ce[Ze+1],ot=Ze===0?fe:Ue.sub(Ce[Ze-1])._unit()._perp(),vt=Ze===Ce.length-1?fe:Ke.sub(Ue)._unit()._perp(),Mt=ot._add(vt)._unit();Mt._mult(1/(Mt.x*vt.x+Mt.y*vt.y)),Be.push(Mt._mult(ie)._add(Ue))}ge.push(Be)}return ge}(I,X*B)),function(Q,ie,ge){for(var fe=0;fe<ie.length;fe++){var ke=ie[fe];if(Q.length>=3){for(var Ce=0;Ce<ke.length;Ce++)if(El(Q,ke[Ce]))return!0}if(ko(Q,ke,ge))return!0}return!1}(D,I,z)},c.prototype.isTileClipped=function(){return!0},c}(Al);function AE(o,c){return c>0?c+2*o:o}var MF=Cr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),LF=Cr([{name:"a_projected_pos",components:3,type:"Float32"}],4),RF=(Cr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Cr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),TE=(Cr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Cr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),kF=Cr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function WF(o,c,h){return o.sections.forEach(function(y){y.text=function(x,I,A){var R=I.layout.get("text-transform").evaluate(A,{});return R==="uppercase"?x=x.toLocaleUpperCase():R==="lowercase"&&(x=x.toLocaleLowerCase()),ro.applyArabicShaping&&(x=ro.applyArabicShaping(x)),x}(y.text,c,h)}),o}Cr([{name:"triangle",components:3,type:"Uint16"}]),Cr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Cr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Cr([{type:"Float32",name:"offsetX"}]),Cr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var xy={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},EE=function(o,c,h,y,x){var I,A,R=8*x-y-1,B=(1<<R)-1,D=B>>1,z=-7,X=h?x-1:0,Q=h?-1:1,ie=o[c+X];for(X+=Q,I=ie&(1<<-z)-1,ie>>=-z,z+=R;z>0;I=256*I+o[c+X],X+=Q,z-=8);for(A=I&(1<<-z)-1,I>>=-z,z+=y;z>0;A=256*A+o[c+X],X+=Q,z-=8);if(I===0)I=1-D;else{if(I===B)return A?NaN:1/0*(ie?-1:1);A+=Math.pow(2,y),I-=D}return(ie?-1:1)*A*Math.pow(2,I-y)},ME=function(o,c,h,y,x,I){var A,R,B,D=8*I-x-1,z=(1<<D)-1,X=z>>1,Q=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,ie=y?0:I-1,ge=y?1:-1,fe=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(R=isNaN(c)?1:0,A=z):(A=Math.floor(Math.log(c)/Math.LN2),c*(B=Math.pow(2,-A))<1&&(A--,B*=2),(c+=A+X>=1?Q/B:Q*Math.pow(2,1-X))*B>=2&&(A++,B/=2),A+X>=z?(R=0,A=z):A+X>=1?(R=(c*B-1)*Math.pow(2,x),A+=X):(R=c*Math.pow(2,X-1)*Math.pow(2,x),A=0));x>=8;o[h+ie]=255&R,ie+=ge,R/=256,x-=8);for(A=A<<x|R,D+=x;D>0;o[h+ie]=255&A,ie+=ge,A/=256,D-=8);o[h+ie-ge]|=128*fe},Qb=tn;function tn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}tn.Varint=0,tn.Fixed64=1,tn.Bytes=2,tn.Fixed32=5;var LE=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function $c(o){return o.type===tn.Bytes?o.readVarint()+o.pos:o.pos+1}function Ep(o,c,h){return h?4294967296*c+(o>>>0):4294967296*(c>>>0)+(o>>>0)}function RE(o,c,h){var y=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));h.realloc(y);for(var x=h.pos-1;x>=o;x--)h.buf[x+y]=h.buf[x]}function GF(o,c){for(var h=0;h<o.length;h++)c.writeVarint(o[h])}function OF(o,c){for(var h=0;h<o.length;h++)c.writeSVarint(o[h])}function PF(o,c){for(var h=0;h<o.length;h++)c.writeFloat(o[h])}function BF(o,c){for(var h=0;h<o.length;h++)c.writeDouble(o[h])}function NF(o,c){for(var h=0;h<o.length;h++)c.writeBoolean(o[h])}function FF(o,c){for(var h=0;h<o.length;h++)c.writeFixed32(o[h])}function DF(o,c){for(var h=0;h<o.length;h++)c.writeSFixed32(o[h])}function VF(o,c){for(var h=0;h<o.length;h++)c.writeFixed64(o[h])}function ZF(o,c){for(var h=0;h<o.length;h++)c.writeSFixed64(o[h])}function ev(o,c){return(o[c]|o[c+1]<<8|o[c+2]<<16)+16777216*o[c+3]}function Mp(o,c,h){o[h]=c,o[h+1]=c>>>8,o[h+2]=c>>>16,o[h+3]=c>>>24}function kE(o,c){return(o[c]|o[c+1]<<8|o[c+2]<<16)+(o[c+3]<<24)}function zF(o,c,h){o===1&&h.readMessage(UF,c)}function UF(o,c,h){if(o===3){var y=h.readMessage(HF,{}),x=y.width,I=y.height,A=y.left,R=y.top,B=y.advance;c.push({id:y.id,bitmap:new P_({width:x+6,height:I+6},y.bitmap),metrics:{width:x,height:I,left:A,top:R,advance:B}})}}function HF(o,c,h){o===1?c.id=h.readVarint():o===2?c.bitmap=h.readBytes():o===3?c.width=h.readVarint():o===4?c.height=h.readVarint():o===5?c.left=h.readSVarint():o===6?c.top=h.readSVarint():o===7&&(c.advance=h.readVarint())}function WE(o){for(var c=0,h=0,y=0,x=o;y<x.length;y+=1){var I=x[y];c+=I.w*I.h,h=Math.max(h,I.w)}o.sort(function(fe,ke){return ke.h-fe.h});for(var A=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),h),h:1/0}],R=0,B=0,D=0,z=o;D<z.length;D+=1)for(var X=z[D],Q=A.length-1;Q>=0;Q--){var ie=A[Q];if(!(X.w>ie.w||X.h>ie.h)){if(X.x=ie.x,X.y=ie.y,B=Math.max(B,X.y+X.h),R=Math.max(R,X.x+X.w),X.w===ie.w&&X.h===ie.h){var ge=A.pop();Q<A.length&&(A[Q]=ge)}else X.h===ie.h?(ie.x+=X.w,ie.w-=X.w):X.w===ie.w?(ie.y+=X.h,ie.h-=X.h):(A.push({x:ie.x+X.w,y:ie.y,w:ie.w-X.w,h:X.h}),ie.y+=X.h,ie.h-=X.h);break}}return{w:R,h:B,fill:c/(R*B)||0}}tn.prototype={destroy:function(){this.buf=null},readFields:function(o,c,h){for(h=h||this.length;this.pos<h;){var y=this.readVarint(),x=y>>3,I=this.pos;this.type=7&y,o(x,c,this),this.pos===I&&this.skip(y)}return c},readMessage:function(o,c){return this.readFields(o,c,this.readVarint()+this.pos)},readFixed32:function(){var o=ev(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=kE(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=ev(this.buf,this.pos)+4294967296*ev(this.buf,this.pos+4);return this.pos+=8,o},readSFixed64:function(){var o=ev(this.buf,this.pos)+4294967296*kE(this.buf,this.pos+4);return this.pos+=8,o},readFloat:function(){var o=EE(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=EE(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var c,h,y=this.buf;return c=127&(h=y[this.pos++]),h<128?c:(c|=(127&(h=y[this.pos++]))<<7,h<128?c:(c|=(127&(h=y[this.pos++]))<<14,h<128?c:(c|=(127&(h=y[this.pos++]))<<21,h<128?c:function(x,I,A){var R,B,D=A.buf;if(R=(112&(B=D[A.pos++]))>>4,B<128||(R|=(127&(B=D[A.pos++]))<<3,B<128)||(R|=(127&(B=D[A.pos++]))<<10,B<128)||(R|=(127&(B=D[A.pos++]))<<17,B<128)||(R|=(127&(B=D[A.pos++]))<<24,B<128)||(R|=(1&(B=D[A.pos++]))<<31,B<128))return Ep(x,R,I);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(h=y[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,c=this.pos;return this.pos=o,o-c>=12&&LE?function(h,y,x){return LE.decode(h.subarray(y,x))}(this.buf,c,o):function(h,y,x){for(var I="",A=y;A<x;){var R,B,D,z=h[A],X=null,Q=z>239?4:z>223?3:z>191?2:1;if(A+Q>x)break;Q===1?z<128&&(X=z):Q===2?(192&(R=h[A+1]))==128&&(X=(31&z)<<6|63&R)<=127&&(X=null):Q===3?(B=h[A+2],(192&(R=h[A+1]))==128&&(192&B)==128&&((X=(15&z)<<12|(63&R)<<6|63&B)<=2047||X>=55296&&X<=57343)&&(X=null)):Q===4&&(B=h[A+2],D=h[A+3],(192&(R=h[A+1]))==128&&(192&B)==128&&(192&D)==128&&((X=(15&z)<<18|(63&R)<<12|(63&B)<<6|63&D)<=65535||X>=1114112)&&(X=null)),X===null?(X=65533,Q=1):X>65535&&(X-=65536,I+=String.fromCharCode(X>>>10&1023|55296),X=56320|1023&X),I+=String.fromCharCode(X),A+=Q}return I}(this.buf,c,o)},readBytes:function(){var o=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,o);return this.pos=o,c},readPackedVarint:function(o,c){if(this.type!==tn.Bytes)return o.push(this.readVarint(c));var h=$c(this);for(o=o||[];this.pos<h;)o.push(this.readVarint(c));return o},readPackedSVarint:function(o){if(this.type!==tn.Bytes)return o.push(this.readSVarint());var c=$c(this);for(o=o||[];this.pos<c;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==tn.Bytes)return o.push(this.readBoolean());var c=$c(this);for(o=o||[];this.pos<c;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==tn.Bytes)return o.push(this.readFloat());var c=$c(this);for(o=o||[];this.pos<c;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==tn.Bytes)return o.push(this.readDouble());var c=$c(this);for(o=o||[];this.pos<c;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==tn.Bytes)return o.push(this.readFixed32());var c=$c(this);for(o=o||[];this.pos<c;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==tn.Bytes)return o.push(this.readSFixed32());var c=$c(this);for(o=o||[];this.pos<c;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==tn.Bytes)return o.push(this.readFixed64());var c=$c(this);for(o=o||[];this.pos<c;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==tn.Bytes)return o.push(this.readSFixed64());var c=$c(this);for(o=o||[];this.pos<c;)o.push(this.readSFixed64());return o},skip:function(o){var c=7&o;if(c===tn.Varint)for(;this.buf[this.pos++]>127;);else if(c===tn.Bytes)this.pos=this.readVarint()+this.pos;else if(c===tn.Fixed32)this.pos+=4;else{if(c!==tn.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(o,c){this.writeVarint(o<<3|c)},realloc:function(o){for(var c=this.length||16;c<this.pos+o;)c*=2;if(c!==this.length){var h=new Uint8Array(c);h.set(this.buf),this.buf=h,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Mp(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Mp(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Mp(this.buf,-1&o,this.pos),Mp(this.buf,Math.floor(o*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Mp(this.buf,-1&o,this.pos),Mp(this.buf,Math.floor(o*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(c,h){var y,x;if(c>=0?(y=c%4294967296|0,x=c/4294967296|0):(x=~(-c/4294967296),4294967295^(y=~(-c%4294967296))?y=y+1|0:(y=0,x=x+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(I,A,R){R.buf[R.pos++]=127&I|128,I>>>=7,R.buf[R.pos++]=127&I|128,I>>>=7,R.buf[R.pos++]=127&I|128,I>>>=7,R.buf[R.pos++]=127&I|128,R.buf[R.pos]=127&(I>>>=7)}(y,0,h),function(I,A){var R=(7&I)<<4;A.buf[A.pos++]|=R|((I>>>=3)?128:0),I&&(A.buf[A.pos++]=127&I|((I>>>=7)?128:0),I&&(A.buf[A.pos++]=127&I|((I>>>=7)?128:0),I&&(A.buf[A.pos++]=127&I|((I>>>=7)?128:0),I&&(A.buf[A.pos++]=127&I|((I>>>=7)?128:0),I&&(A.buf[A.pos++]=127&I)))))}(x,h)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var c=this.pos;this.pos=function(y,x,I){for(var A,R,B=0;B<x.length;B++){if((A=x.charCodeAt(B))>55295&&A<57344){if(!R){A>56319||B+1===x.length?(y[I++]=239,y[I++]=191,y[I++]=189):R=A;continue}if(A<56320){y[I++]=239,y[I++]=191,y[I++]=189,R=A;continue}A=R-55296<<10|A-56320|65536,R=null}else R&&(y[I++]=239,y[I++]=191,y[I++]=189,R=null);A<128?y[I++]=A:(A<2048?y[I++]=A>>6|192:(A<65536?y[I++]=A>>12|224:(y[I++]=A>>18|240,y[I++]=A>>12&63|128),y[I++]=A>>6&63|128),y[I++]=63&A|128)}return I}(this.buf,o,this.pos);var h=this.pos-c;h>=128&&RE(c,h,this),this.pos=c-1,this.writeVarint(h),this.pos+=h},writeFloat:function(o){this.realloc(4),ME(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),ME(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var c=o.length;this.writeVarint(c),this.realloc(c);for(var h=0;h<c;h++)this.buf[this.pos++]=o[h]},writeRawMessage:function(o,c){this.pos++;var h=this.pos;o(c,this);var y=this.pos-h;y>=128&&RE(h,y,this),this.pos=h-1,this.writeVarint(y),this.pos+=y},writeMessage:function(o,c,h){this.writeTag(o,tn.Bytes),this.writeRawMessage(c,h)},writePackedVarint:function(o,c){c.length&&this.writeMessage(o,GF,c)},writePackedSVarint:function(o,c){c.length&&this.writeMessage(o,OF,c)},writePackedBoolean:function(o,c){c.length&&this.writeMessage(o,NF,c)},writePackedFloat:function(o,c){c.length&&this.writeMessage(o,PF,c)},writePackedDouble:function(o,c){c.length&&this.writeMessage(o,BF,c)},writePackedFixed32:function(o,c){c.length&&this.writeMessage(o,FF,c)},writePackedSFixed32:function(o,c){c.length&&this.writeMessage(o,DF,c)},writePackedFixed64:function(o,c){c.length&&this.writeMessage(o,VF,c)},writePackedSFixed64:function(o,c){c.length&&this.writeMessage(o,ZF,c)},writeBytesField:function(o,c){this.writeTag(o,tn.Bytes),this.writeBytes(c)},writeFixed32Field:function(o,c){this.writeTag(o,tn.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(o,c){this.writeTag(o,tn.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(o,c){this.writeTag(o,tn.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(o,c){this.writeTag(o,tn.Fixed64),this.writeSFixed64(c)},writeVarintField:function(o,c){this.writeTag(o,tn.Varint),this.writeVarint(c)},writeSVarintField:function(o,c){this.writeTag(o,tn.Varint),this.writeSVarint(c)},writeStringField:function(o,c){this.writeTag(o,tn.Bytes),this.writeString(c)},writeFloatField:function(o,c){this.writeTag(o,tn.Fixed32),this.writeFloat(c)},writeDoubleField:function(o,c){this.writeTag(o,tn.Fixed64),this.writeDouble(c)},writeBooleanField:function(o,c){this.writeVarintField(o,!!c)}};var tv=function(o,c){var h=c.pixelRatio,y=c.version,x=c.stretchX,I=c.stretchY,A=c.content;this.paddedRect=o,this.pixelRatio=h,this.stretchX=x,this.stretchY=I,this.content=A,this.version=y},wy={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};wy.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},wy.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},wy.tlbr.get=function(){return this.tl.concat(this.br)},wy.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(tv.prototype,wy);var Iy=function(o,c){var h={},y={};this.haveRenderCallbacks=[];var x=[];this.addImages(o,h,x),this.addImages(c,y,x);var I=WE(x),A=new Ns({width:I.w||1,height:I.h||1});for(var R in o){var B=o[R],D=h[R].paddedRect;Ns.copy(B.data,A,{x:0,y:0},{x:D.x+1,y:D.y+1},B.data)}for(var z in c){var X=c[z],Q=y[z].paddedRect,ie=Q.x+1,ge=Q.y+1,fe=X.data.width,ke=X.data.height;Ns.copy(X.data,A,{x:0,y:0},{x:ie,y:ge},X.data),Ns.copy(X.data,A,{x:0,y:ke-1},{x:ie,y:ge-1},{width:fe,height:1}),Ns.copy(X.data,A,{x:0,y:0},{x:ie,y:ge+ke},{width:fe,height:1}),Ns.copy(X.data,A,{x:fe-1,y:0},{x:ie-1,y:ge},{width:1,height:ke}),Ns.copy(X.data,A,{x:0,y:0},{x:ie+fe,y:ge},{width:1,height:ke})}this.image=A,this.iconPositions=h,this.patternPositions=y};Iy.prototype.addImages=function(o,c,h){for(var y in o){var x=o[y],I={x:0,y:0,w:x.data.width+2,h:x.data.height+2};h.push(I),c[y]=new tv(I,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(y)}},Iy.prototype.patchUpdatedImages=function(o,c){for(var h in o.dispatchRenderCallbacks(this.haveRenderCallbacks),o.updatedImages)this.patchUpdatedImage(this.iconPositions[h],o.getImage(h),c),this.patchUpdatedImage(this.patternPositions[h],o.getImage(h),c)},Iy.prototype.patchUpdatedImage=function(o,c,h){if(o&&c&&o.version!==c.version){o.version=c.version;var y=o.tl;h.update(c.data,void 0,{x:y[0],y:y[1]})}},Yt("ImagePosition",tv),Yt("ImageAtlas",Iy);var Wo={horizontal:1,vertical:2,horizontalOnly:3},Lp=function(){this.scale=1,this.fontStack="",this.imageName=null};Lp.forText=function(o,c){var h=new Lp;return h.scale=o||1,h.fontStack=c,h},Lp.forImage=function(o){var c=new Lp;return c.imageName=o,c};var os=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function av(o,c,h,y,x,I,A,R,B,D,z,X,Q,ie,ge,fe){var ke,Ce=os.fromFeature(o,x);X===Wo.vertical&&Ce.verticalizePunctuation();var Be=ro.processBidirectionalText,Ze=ro.processStyledBidirectionalText;if(Be&&Ce.sections.length===1){ke=[];for(var Ue=0,Ke=Be(Ce.toString(),fC(Ce,D,I,c,y,ie,ge));Ue<Ke.length;Ue+=1){var ot=Ke[Ue],vt=new os;vt.text=ot,vt.sections=Ce.sections;for(var Mt=0;Mt<ot.length;Mt++)vt.sectionIndex.push(0);ke.push(vt)}}else if(Ze){ke=[];for(var ra=0,Dt=Ze(Ce.text,Ce.sectionIndex,fC(Ce,D,I,c,y,ie,ge));ra<Dt.length;ra+=1){var da=Dt[ra],Vt=new os;Vt.text=da[0],Vt.sectionIndex=da[1],Vt.sections=Ce.sections,ke.push(Vt)}}else ke=function(ea,$a){for(var Fa=[],pi=ea.text,ha=0,Ci=0,bn=$a;Ci<bn.length;Ci+=1){var On=bn[Ci];Fa.push(ea.substring(ha,On)),ha=On}return ha<pi.length&&Fa.push(ea.substring(ha,pi.length)),Fa}(Ce,fC(Ce,D,I,c,y,ie,ge));var Ha=[],ya={positionedLines:Ha,text:Ce.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:X,iconsInText:!1,verticalizable:!1};return function(ea,$a,Fa,pi,ha,Ci,bn,On,Ln,vn,Pn,pr){for(var gr=0,ls=-17,Tr=0,us=0,Zn=On==="right"?1:On==="left"?0:.5,Er=0,ri=0,Xi=ha;ri<Xi.length;ri+=1){var Wi=Xi[ri];Wi.trim();var yi=Wi.getMaxScale(),xs=24*(yi-1),Kr={positionedGlyphs:[],lineOffset:0};ea.positionedLines[Er]=Kr;var ln=Kr.positionedGlyphs,jn=0;if(Wi.length()){for(var jr=0;jr<Wi.length();jr++){var Si=Wi.getSection(jr),Ku=Wi.getSectionIndex(jr),Go=Wi.getCharCode(jr),ju=0,zn=null,$u=null,Ll=null,Np=24,D_=!(Ln===Wo.horizontal||!Pn&&!pp(Go)||Pn&&(iv[Go]||(td=Go,Pt.Arabic(td)||Pt["Arabic Supplement"](td)||Pt["Arabic Extended-A"](td)||Pt["Arabic Presentation Forms-A"](td)||Pt["Arabic Presentation Forms-B"](td))));if(Si.imageName){var Fp=pi[Si.imageName];if(!Fp)continue;Ll=Si.imageName,ea.iconsInText=ea.iconsInText||!0,$u=Fp.paddedRect;var ed=Fp.displaySize;Si.scale=24*Si.scale/pr,ju=xs+(24-ed[1]*Si.scale),Np=(zn={width:ed[0],height:ed[1],left:1,top:-3,advance:D_?ed[1]:ed[0]}).advance;var Dp=D_?ed[0]*Si.scale-24*yi:ed[1]*Si.scale-24*yi;Dp>0&&Dp>jn&&(jn=Dp)}else{var hv=Fa[Si.fontStack],Vp=hv&&hv[Go];if(Vp&&Vp.rect)$u=Vp.rect,zn=Vp.metrics;else{var Ay=$a[Si.fontStack],_v=Ay&&Ay[Go];if(!_v)continue;zn=_v.metrics}ju=24*(yi-Si.scale)}D_?(ea.verticalizable=!0,ln.push({glyph:Go,imageName:Ll,x:gr,y:ls+ju,vertical:D_,scale:Si.scale,fontStack:Si.fontStack,sectionIndex:Ku,metrics:zn,rect:$u}),gr+=Np*Si.scale+vn):(ln.push({glyph:Go,imageName:Ll,x:gr,y:ls+ju,vertical:D_,scale:Si.scale,fontStack:Si.fontStack,sectionIndex:Ku,metrics:zn,rect:$u}),gr+=zn.advance*Si.scale+vn)}ln.length!==0&&(Tr=Math.max(gr-vn,Tr),qF(ln,0,ln.length-1,Zn,jn)),gr=0;var mv=Ci*yi+jn;Kr.lineOffset=Math.max(jn,xs),ls+=mv,us=Math.max(mv,us),++Er}else ls+=Ci,++Er}var td,Ty=ls- -17,Zp=yC(bn),hh=Zp.horizontalAlign,zp=Zp.verticalAlign;(function(pv,gv,Ey,My,fv,Ly,Ry,ky,yv){var Up,bv=(gv-Ey)*fv;Up=Ly!==Ry?-ky*My- -17:(-My*yv+.5)*Ry;for(var Hp=0,Wy=pv;Hp<Wy.length;Hp+=1)for(var V_=0,Gy=Wy[Hp].positionedGlyphs;V_<Gy.length;V_+=1){var Xp=Gy[V_];Xp.x+=bv,Xp.y+=Up}})(ea.positionedLines,Zn,hh,zp,Tr,us,Ci,Ty,ha.length),ea.top+=-zp*Ty,ea.bottom=ea.top+Ty,ea.left+=-hh*Tr,ea.right=ea.left+Tr}(ya,c,h,y,ke,A,R,B,X,D,Q,fe),!function(ea){for(var $a=0,Fa=ea;$a<Fa.length;$a+=1)if(Fa[$a].positionedGlyphs.length!==0)return!1;return!0}(Ha)&&ya}os.fromFeature=function(o,c){for(var h=new os,y=0;y<o.sections.length;y++){var x=o.sections[y];x.image?h.addImageSection(x):h.addTextSection(x,c)}return h},os.prototype.length=function(){return this.text.length},os.prototype.getSection=function(o){return this.sections[this.sectionIndex[o]]},os.prototype.getSectionIndex=function(o){return this.sectionIndex[o]},os.prototype.getCharCode=function(o){return this.text.charCodeAt(o)},os.prototype.verticalizePunctuation=function(){this.text=function(o){for(var c="",h=0;h<o.length;h++){var y=o.charCodeAt(h+1)||null,x=o.charCodeAt(h-1)||null;c+=y&&sy(y)&&!xy[o[h+1]]||x&&sy(x)&&!xy[o[h-1]]||!xy[o[h]]?o[h]:xy[o[h]]}return c}(this.text)},os.prototype.trim=function(){for(var o=0,c=0;c<this.text.length&&iv[this.text.charCodeAt(c)];c++)o++;for(var h=this.text.length,y=this.text.length-1;y>=0&&y>=o&&iv[this.text.charCodeAt(y)];y--)h--;this.text=this.text.substring(o,h),this.sectionIndex=this.sectionIndex.slice(o,h)},os.prototype.substring=function(o,c){var h=new os;return h.text=this.text.substring(o,c),h.sectionIndex=this.sectionIndex.slice(o,c),h.sections=this.sections,h},os.prototype.toString=function(){return this.text},os.prototype.getMaxScale=function(){var o=this;return this.sectionIndex.reduce(function(c,h){return Math.max(c,o.sections[h].scale)},0)},os.prototype.addTextSection=function(o,c){this.text+=o.text,this.sections.push(Lp.forText(o.scale,o.fontStack||c));for(var h=this.sections.length-1,y=0;y<o.text.length;++y)this.sectionIndex.push(h)},os.prototype.addImageSection=function(o){var c=o.image?o.image.name:"";if(c.length!==0){var h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Lp.forImage(c)),this.sectionIndex.push(this.sections.length-1)):Se("Reached maximum number of images 6401")}else Se("Can't add FormattedSection with an empty image.")},os.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var iv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},oo={};function GE(o,c,h,y,x,I){if(c.imageName){var A=y[c.imageName];return A?A.displaySize[0]*c.scale*24/I+x:0}var R=h[c.fontStack],B=R&&R[o];return B?B.metrics.advance*c.scale+x:0}function OE(o,c,h,y){var x=Math.pow(o-c,2);return y?o<c?x/2:2*x:x+Math.abs(h)*h}function XF(o,c,h){var y=0;return o===10&&(y-=1e4),h&&(y+=150),o!==40&&o!==65288||(y+=50),c!==41&&c!==65289||(y+=50),y}function PE(o,c,h,y,x,I){for(var A=null,R=OE(c,h,x,I),B=0,D=y;B<D.length;B+=1){var z=D[B],X=OE(c-z.x,h,x,I)+z.badness;X<=R&&(A=z,R=X)}return{index:o,x:c,priorBreak:A,badness:R}}function fC(o,c,h,y,x,I,A){if(I!=="point")return[];if(!o)return[];for(var R,B=[],D=function(ke,Ce,Be,Ze,Ue,Ke){for(var ot=0,vt=0;vt<ke.length();vt++){var Mt=ke.getSection(vt);ot+=GE(ke.getCharCode(vt),Mt,Ze,Ue,Ce,Ke)}return ot/Math.max(1,Math.ceil(ot/Be))}(o,c,h,y,x,A),z=o.text.indexOf("")>=0,X=0,Q=0;Q<o.length();Q++){var ie=o.getSection(Q),ge=o.getCharCode(Q);if(iv[ge]||(X+=GE(ge,ie,y,x,c,A)),Q<o.length()-1){var fe=!((R=ge)<11904||!(Pt["Bopomofo Extended"](R)||Pt.Bopomofo(R)||Pt["CJK Compatibility Forms"](R)||Pt["CJK Compatibility Ideographs"](R)||Pt["CJK Compatibility"](R)||Pt["CJK Radicals Supplement"](R)||Pt["CJK Strokes"](R)||Pt["CJK Symbols and Punctuation"](R)||Pt["CJK Unified Ideographs Extension A"](R)||Pt["CJK Unified Ideographs"](R)||Pt["Enclosed CJK Letters and Months"](R)||Pt["Halfwidth and Fullwidth Forms"](R)||Pt.Hiragana(R)||Pt["Ideographic Description Characters"](R)||Pt["Kangxi Radicals"](R)||Pt["Katakana Phonetic Extensions"](R)||Pt.Katakana(R)||Pt["Vertical Forms"](R)||Pt["Yi Radicals"](R)||Pt["Yi Syllables"](R)));(oo[ge]||fe||ie.imageName)&&B.push(PE(Q+1,X,D,B,XF(ge,o.getCharCode(Q+1),fe&&z),!1))}}return function ke(Ce){return Ce?ke(Ce.priorBreak).concat(Ce.index):[]}(PE(o.length(),X,D,B,0,!0))}function yC(o){var c=.5,h=.5;switch(o){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:c,verticalAlign:h}}function qF(o,c,h,y,x){if(y||x)for(var I=o[h],A=(o[h].x+I.metrics.advance*I.scale)*y,R=c;R<=h;R++)o[R].x-=A,o[R].y+=x}function BE(o,c,h,y,x,I){var A,R=o.image;if(R.content){var B=R.content,D=R.pixelRatio||1;A=[B[0]/D,B[1]/D,R.displaySize[0]-B[2]/D,R.displaySize[1]-B[3]/D]}var z,X,Q,ie,ge=c.left*I,fe=c.right*I;h==="width"||h==="both"?(ie=x[0]+ge-y[3],X=x[0]+fe+y[1]):X=(ie=x[0]+(ge+fe-R.displaySize[0])/2)+R.displaySize[0];var ke=c.top*I,Ce=c.bottom*I;return h==="height"||h==="both"?(z=x[1]+ke-y[0],Q=x[1]+Ce+y[2]):Q=(z=x[1]+(ke+Ce-R.displaySize[1])/2)+R.displaySize[1],{image:R,top:z,right:X,bottom:Q,left:ie,collisionPadding:A}}oo[10]=!0,oo[32]=!0,oo[38]=!0,oo[40]=!0,oo[41]=!0,oo[43]=!0,oo[45]=!0,oo[47]=!0,oo[173]=!0,oo[183]=!0,oo[8203]=!0,oo[8208]=!0,oo[8211]=!0,oo[8231]=!0;var Rp=function(o){function c(h,y,x,I){o.call(this,h,y),this.angle=x,I!==void 0&&(this.segment=I)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.clone=function(){return new c(this.x,this.y,this.angle,this.segment)},c}(m);function bC(o,c){var h=c.expression;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new ei(o+1))};if(h.kind==="source")return{kind:"source"};for(var y=h.zoomStops,x=h.interpolationType,I=0;I<y.length&&y[I]<=o;)I++;for(var A=I=Math.max(0,I-1);A<y.length&&y[A]<o+1;)A++;A=Math.min(y.length-1,A);var R=y[I],B=y[A];return h.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:B,interpolationType:x}:{kind:"camera",minZoom:R,maxZoom:B,minSize:h.evaluate(new ei(R)),maxSize:h.evaluate(new ei(B)),interpolationType:x}}function NE(o,c,h){var y=c.uSize,x=h.lowerSize;return o.kind==="source"?x/128:o.kind==="composite"?Yn(x/128,h.upperSize/128,c.uSizeT):y}function FE(o,c){var h=0,y=0;if(o.kind==="constant")y=o.layoutSize;else if(o.kind!=="source"){var x=o.interpolationType,I=x?M(Or.interpolationFactor(x,c,o.minZoom,o.maxZoom),0,1):0;o.kind==="camera"?y=Yn(o.minSize,o.maxSize,I):h=I}return{uSizeT:h,uSize:y}}Yt("Anchor",Rp);var YF=Object.freeze({__proto__:null,getSizeData:bC,evaluateSizeForFeature:NE,evaluateSizeForZoom:FE,SIZE_PACK_FACTOR:128});function DE(o,c,h,y,x){if(c.segment===void 0)return!0;for(var I=c,A=c.segment+1,R=0;R>-h/2;){if(--A<0)return!1;R-=o[A].dist(I),I=o[A]}R+=o[A].dist(o[A+1]),A++;for(var B=[],D=0;R<h/2;){var z=o[A],X=o[A+1];if(!X)return!1;var Q=o[A-1].angleTo(z)-z.angleTo(X);for(Q=Math.abs((Q+3*Math.PI)%(2*Math.PI)-Math.PI),B.push({distance:R,angleDelta:Q}),D+=Q;R-B[0].distance>y;)D-=B.shift().angleDelta;if(D>x)return!1;A++,R+=z.dist(X)}return!0}function VE(o){for(var c=0,h=0;h<o.length-1;h++)c+=o[h].dist(o[h+1]);return c}function ZE(o,c,h){return o?.6*c*h:0}function zE(o,c){return Math.max(o?o.right-o.left:0,c?c.right-c.left:0)}function KF(o,c,h,y,x,I){for(var A=ZE(h,x,I),R=zE(h,y)*I,B=0,D=VE(o)/2,z=0;z<o.length-1;z++){var X=o[z],Q=o[z+1],ie=X.dist(Q);if(B+ie>D){var ge=(D-B)/ie,fe=Yn(X.x,Q.x,ge),ke=Yn(X.y,Q.y,ge),Ce=new Rp(fe,ke,Q.angleTo(X),z);return Ce._round(),!A||DE(o,Ce,R,A,c)?Ce:void 0}B+=ie}}function jF(o,c,h,y,x,I,A,R,B){var D=ZE(y,I,A),z=zE(y,x),X=z*A,Q=o[0].x===0||o[0].x===B||o[0].y===0||o[0].y===B;return c-X<c/4&&(c=X+c/4),function ie(ge,fe,ke,Ce,Be,Ze,Ue,Ke,ot){for(var vt=Ze/2,Mt=VE(ge),ra=0,Dt=fe-ke,da=[],Vt=0;Vt<ge.length-1;Vt++){for(var Ha=ge[Vt],ya=ge[Vt+1],ea=Ha.dist(ya),$a=ya.angleTo(Ha);Dt+ke<ra+ea;){var Fa=((Dt+=ke)-ra)/ea,pi=Yn(Ha.x,ya.x,Fa),ha=Yn(Ha.y,ya.y,Fa);if(pi>=0&&pi<ot&&ha>=0&&ha<ot&&Dt-vt>=0&&Dt+vt<=Mt){var Ci=new Rp(pi,ha,$a,Vt);Ci._round(),Ce&&!DE(ge,Ci,Ze,Ce,Be)||da.push(Ci)}}ra+=ea}return Ke||da.length||Ue||(da=ie(ge,ra/2,ke,Ce,Be,Ze,Ue,!0,ot)),da}(o,Q?c/2*R%c:(z/2+2*I)*A*R%c,c,D,h,X,Q,!1,B)}function UE(o,c,h,y,x){for(var I=[],A=0;A<o.length;A++)for(var R=o[A],B=void 0,D=0;D<R.length-1;D++){var z=R[D],X=R[D+1];z.x<c&&X.x<c||(z.x<c?z=new m(c,z.y+(c-z.x)/(X.x-z.x)*(X.y-z.y))._round():X.x<c&&(X=new m(c,z.y+(c-z.x)/(X.x-z.x)*(X.y-z.y))._round()),z.y<h&&X.y<h||(z.y<h?z=new m(z.x+(h-z.y)/(X.y-z.y)*(X.x-z.x),h)._round():X.y<h&&(X=new m(z.x+(h-z.y)/(X.y-z.y)*(X.x-z.x),h)._round()),z.x>=y&&X.x>=y||(z.x>=y?z=new m(y,z.y+(y-z.x)/(X.x-z.x)*(X.y-z.y))._round():X.x>=y&&(X=new m(y,z.y+(y-z.x)/(X.x-z.x)*(X.y-z.y))._round()),z.y>=x&&X.y>=x||(z.y>=x?z=new m(z.x+(x-z.y)/(X.y-z.y)*(X.x-z.x),x)._round():X.y>=x&&(X=new m(z.x+(x-z.y)/(X.y-z.y)*(X.x-z.x),x)._round()),B&&z.equals(B[B.length-1])||I.push(B=[z]),B.push(X)))))}return I}function HE(o,c,h,y){var x=[],I=o.image,A=I.pixelRatio,R=I.paddedRect.w-2,B=I.paddedRect.h-2,D=o.right-o.left,z=o.bottom-o.top,X=I.stretchX||[[0,R]],Q=I.stretchY||[[0,B]],ie=function(pi,ha){return pi+ha[1]-ha[0]},ge=X.reduce(ie,0),fe=Q.reduce(ie,0),ke=R-ge,Ce=B-fe,Be=0,Ze=ge,Ue=0,Ke=fe,ot=0,vt=ke,Mt=0,ra=Ce;if(I.content&&y){var Dt=I.content;Be=nv(X,0,Dt[0]),Ue=nv(Q,0,Dt[1]),Ze=nv(X,Dt[0],Dt[2]),Ke=nv(Q,Dt[1],Dt[3]),ot=Dt[0]-Be,Mt=Dt[1]-Ue,vt=Dt[2]-Dt[0]-Ze,ra=Dt[3]-Dt[1]-Ke}var da=function(pi,ha,Ci,bn){var On=rv(pi.stretch-Be,Ze,D,o.left),Ln=sv(pi.fixed-ot,vt,pi.stretch,ge),vn=rv(ha.stretch-Ue,Ke,z,o.top),Pn=sv(ha.fixed-Mt,ra,ha.stretch,fe),pr=rv(Ci.stretch-Be,Ze,D,o.left),gr=sv(Ci.fixed-ot,vt,Ci.stretch,ge),ls=rv(bn.stretch-Ue,Ke,z,o.top),Tr=sv(bn.fixed-Mt,ra,bn.stretch,fe),us=new m(On,vn),Zn=new m(pr,vn),Er=new m(pr,ls),ri=new m(On,ls),Xi=new m(Ln/A,Pn/A),Wi=new m(gr/A,Tr/A),yi=c*Math.PI/180;if(yi){var xs=Math.sin(yi),Kr=Math.cos(yi),ln=[Kr,-xs,xs,Kr];us._matMult(ln),Zn._matMult(ln),ri._matMult(ln),Er._matMult(ln)}var jn=pi.stretch+pi.fixed,jr=ha.stretch+ha.fixed;return{tl:us,tr:Zn,bl:ri,br:Er,tex:{x:I.paddedRect.x+1+jn,y:I.paddedRect.y+1+jr,w:Ci.stretch+Ci.fixed-jn,h:bn.stretch+bn.fixed-jr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Xi,pixelOffsetBR:Wi,minFontScaleX:vt/A/D,minFontScaleY:ra/A/z,isSDF:h}};if(y&&(I.stretchX||I.stretchY))for(var Vt=XE(X,ke,ge),Ha=XE(Q,Ce,fe),ya=0;ya<Vt.length-1;ya++)for(var ea=Vt[ya],$a=Vt[ya+1],Fa=0;Fa<Ha.length-1;Fa++)x.push(da(ea,Ha[Fa],$a,Ha[Fa+1]));else x.push(da({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:B+1}));return x}function nv(o,c,h){for(var y=0,x=0,I=o;x<I.length;x+=1){var A=I[x];y+=Math.max(c,Math.min(h,A[1]))-Math.max(c,Math.min(h,A[0]))}return y}function XE(o,c,h){for(var y=[{fixed:-1,stretch:0}],x=0,I=o;x<I.length;x+=1){var A=I[x],R=A[0],B=A[1],D=y[y.length-1];y.push({fixed:R-D.stretch,stretch:D.stretch}),y.push({fixed:R-D.stretch,stretch:D.stretch+(B-R)})}return y.push({fixed:c+1,stretch:h}),y}function rv(o,c,h,y){return o/c*h+y}function sv(o,c,h,y){return o-c*h/y}var ov=function(o,c,h,y,x,I,A,R,B,D){if(this.boxStartIndex=o.length,B){var z=I.top,X=I.bottom,Q=I.collisionPadding;Q&&(z-=Q[1],X+=Q[3]);var ie=X-z;ie>0&&(ie=Math.max(10,ie),this.circleDiameter=ie)}else{var ge=I.top*A-R,fe=I.bottom*A+R,ke=I.left*A-R,Ce=I.right*A+R,Be=I.collisionPadding;if(Be&&(ke-=Be[0]*A,ge-=Be[1]*A,Ce+=Be[2]*A,fe+=Be[3]*A),D){var Ze=new m(ke,ge),Ue=new m(Ce,ge),Ke=new m(ke,fe),ot=new m(Ce,fe),vt=D*Math.PI/180;Ze._rotate(vt),Ue._rotate(vt),Ke._rotate(vt),ot._rotate(vt),ke=Math.min(Ze.x,Ue.x,Ke.x,ot.x),Ce=Math.max(Ze.x,Ue.x,Ke.x,ot.x),ge=Math.min(Ze.y,Ue.y,Ke.y,ot.y),fe=Math.max(Ze.y,Ue.y,Ke.y,ot.y)}o.emplaceBack(c.x,c.y,ke,ge,Ce,fe,h,y,x)}this.boxEndIndex=o.length},kp=function(o,c){if(o===void 0&&(o=[]),c===void 0&&(c=$F),this.data=o,this.length=this.data.length,this.compare=c,this.length>0)for(var h=(this.length>>1)-1;h>=0;h--)this._down(h)};function $F(o,c){return o<c?-1:o>c?1:0}function JF(o,c,h){c===void 0&&(c=1),h===void 0&&(h=!1);for(var y=1/0,x=1/0,I=-1/0,A=-1/0,R=o[0],B=0;B<R.length;B++){var D=R[B];(!B||D.x<y)&&(y=D.x),(!B||D.y<x)&&(x=D.y),(!B||D.x>I)&&(I=D.x),(!B||D.y>A)&&(A=D.y)}var z=Math.min(I-y,A-x),X=z/2,Q=new kp([],QF);if(z===0)return new m(y,x);for(var ie=y;ie<I;ie+=z)for(var ge=x;ge<A;ge+=z)Q.push(new Wp(ie+X,ge+X,X,o));for(var fe=function(Be){for(var Ze=0,Ue=0,Ke=0,ot=Be[0],vt=0,Mt=ot.length,ra=Mt-1;vt<Mt;ra=vt++){var Dt=ot[vt],da=ot[ra],Vt=Dt.x*da.y-da.x*Dt.y;Ue+=(Dt.x+da.x)*Vt,Ke+=(Dt.y+da.y)*Vt,Ze+=3*Vt}return new Wp(Ue/Ze,Ke/Ze,0,Be)}(o),ke=Q.length;Q.length;){var Ce=Q.pop();(Ce.d>fe.d||!fe.d)&&(fe=Ce,h&&console.log("found best %d after %d probes",Math.round(1e4*Ce.d)/1e4,ke)),Ce.max-fe.d<=c||(Q.push(new Wp(Ce.p.x-(X=Ce.h/2),Ce.p.y-X,X,o)),Q.push(new Wp(Ce.p.x+X,Ce.p.y-X,X,o)),Q.push(new Wp(Ce.p.x-X,Ce.p.y+X,X,o)),Q.push(new Wp(Ce.p.x+X,Ce.p.y+X,X,o)),ke+=4)}return h&&(console.log("num probes: "+ke),console.log("best distance: "+fe.d)),fe.p}function QF(o,c){return c.max-o.max}function Wp(o,c,h,y){this.p=new m(o,c),this.h=h,this.d=function(x,I){for(var A=!1,R=1/0,B=0;B<I.length;B++)for(var D=I[B],z=0,X=D.length,Q=X-1;z<X;Q=z++){var ie=D[z],ge=D[Q];ie.y>x.y!=ge.y>x.y&&x.x<(ge.x-ie.x)*(x.y-ie.y)/(ge.y-ie.y)+ie.x&&(A=!A),R=Math.min(R,lh(x,ie,ge))}return(A?1:-1)*Math.sqrt(R)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}kp.prototype.push=function(o){this.data.push(o),this.length++,this._up(this.length-1)},kp.prototype.pop=function(){if(this.length!==0){var o=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),o}},kp.prototype.peek=function(){return this.data[0]},kp.prototype._up=function(o){for(var c=this.data,h=this.compare,y=c[o];o>0;){var x=o-1>>1,I=c[x];if(h(y,I)>=0)break;c[o]=I,o=x}c[o]=y},kp.prototype._down=function(o){for(var c=this.data,h=this.compare,y=this.length>>1,x=c[o];o<y;){var I=1+(o<<1),A=c[I],R=I+1;if(R<this.length&&h(c[R],A)<0&&(I=R,A=c[R]),h(A,x)>=0)break;c[o]=A,o=I}c[o]=x};var vC=Number.POSITIVE_INFINITY;function qE(o,c){return c[1]!==vC?function(h,y,x){var I=0,A=0;switch(y=Math.abs(y),x=Math.abs(x),h){case"top-right":case"top-left":case"top":A=x-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-x}switch(h){case"top-right":case"bottom-right":case"right":I=-y;break;case"top-left":case"bottom-left":case"left":I=y}return[I,A]}(o,c[0],c[1]):function(h,y){var x=0,I=0;y<0&&(y=0);var A=y/Math.sqrt(2);switch(h){case"top-right":case"top-left":I=A-7;break;case"bottom-right":case"bottom-left":I=7-A;break;case"bottom":I=7-y;break;case"top":I=y-7}switch(h){case"top-right":case"bottom-right":x=-A;break;case"top-left":case"bottom-left":x=A;break;case"left":x=y;break;case"right":x=-y}return[x,I]}(o,c[0])}function xC(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function YE(o,c,h,y,x,I,A,R,B,D,z,X,Q,ie,ge){var fe=function(Ue,Ke,ot,vt,Mt,ra,Dt,da){for(var Vt=vt.layout.get("text-rotate").evaluate(ra,{})*Math.PI/180,Ha=[],ya=0,ea=Ke.positionedLines;ya<ea.length;ya+=1)for(var $a=ea[ya],Fa=0,pi=$a.positionedGlyphs;Fa<pi.length;Fa+=1){var ha=pi[Fa];if(ha.rect){var Ci=ha.rect||{},bn=4,On=!0,Ln=1,vn=0,Pn=(Mt||da)&&ha.vertical,pr=ha.metrics.advance*ha.scale/2;if(da&&Ke.verticalizable&&(vn=$a.lineOffset/2-(ha.imageName?-(24-ha.metrics.width*ha.scale)/2:24*(ha.scale-1))),ha.imageName){var gr=Dt[ha.imageName];On=gr.sdf,bn=1/(Ln=gr.pixelRatio)}var ls=Mt?[ha.x+pr,ha.y]:[0,0],Tr=Mt?[0,0]:[ha.x+pr+ot[0],ha.y+ot[1]-vn],us=[0,0];Pn&&(us=Tr,Tr=[0,0]);var Zn=(ha.metrics.left-bn)*ha.scale-pr+Tr[0],Er=(-ha.metrics.top-bn)*ha.scale+Tr[1],ri=Zn+Ci.w*ha.scale/Ln,Xi=Er+Ci.h*ha.scale/Ln,Wi=new m(Zn,Er),yi=new m(ri,Er),xs=new m(Zn,Xi),Kr=new m(ri,Xi);if(Pn){var ln=new m(-pr,pr- -17),jn=-Math.PI/2,jr=12-pr,Si=new m(22-jr,-(ha.imageName?jr:0)),Ku=new(Function.prototype.bind.apply(m,[null].concat(us)));Wi._rotateAround(jn,ln)._add(Si)._add(Ku),yi._rotateAround(jn,ln)._add(Si)._add(Ku),xs._rotateAround(jn,ln)._add(Si)._add(Ku),Kr._rotateAround(jn,ln)._add(Si)._add(Ku)}if(Vt){var Go=Math.sin(Vt),ju=Math.cos(Vt),zn=[ju,-Go,Go,ju];Wi._matMult(zn),yi._matMult(zn),xs._matMult(zn),Kr._matMult(zn)}var $u=new m(0,0),Ll=new m(0,0);Ha.push({tl:Wi,tr:yi,bl:xs,br:Kr,tex:Ci,writingMode:Ke.writingMode,glyphOffset:ls,sectionIndex:ha.sectionIndex,isSDF:On,pixelOffsetTL:$u,pixelOffsetBR:Ll,minFontScaleX:0,minFontScaleY:0})}}return Ha}(0,h,R,x,I,A,y,o.allowVerticalPlacement),ke=o.textSizeData,Ce=null;ke.kind==="source"?(Ce=[128*x.layout.get("text-size").evaluate(A,{})])[0]>32640&&Se(o.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ke.kind==="composite"&&((Ce=[128*ie.compositeTextSizes[0].evaluate(A,{},ge),128*ie.compositeTextSizes[1].evaluate(A,{},ge)])[0]>32640||Ce[1]>32640)&&Se(o.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),o.addSymbols(o.text,fe,Ce,R,I,A,D,c,B.lineStartIndex,B.lineLength,Q,ge);for(var Be=0,Ze=z;Be<Ze.length;Be+=1)X[Ze[Be]]=o.text.placedSymbolArray.length-1;return 4*fe.length}function KE(o){for(var c in o)return o[c];return null}function eD(o,c,h,y){var x=o.compareText;if(c in x){for(var I=x[c],A=I.length-1;A>=0;A--)if(y.dist(I[A])<h)return!0}else x[c]=[];return x[c].push(y),!1}var tD=Tp.VectorTileFeature.types,aD=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lv(o,c,h,y,x,I,A,R,B,D,z,X,Q){var ie=R?Math.min(32640,Math.round(R[0])):0,ge=R?Math.min(32640,Math.round(R[1])):0;o.emplaceBack(c,h,Math.round(32*y),Math.round(32*x),I,A,(ie<<1)+(B?1:0),ge,16*D,16*z,256*X,256*Q)}function wC(o,c,h){o.emplaceBack(c.x,c.y,h),o.emplaceBack(c.x,c.y,h),o.emplaceBack(c.x,c.y,h),o.emplaceBack(c.x,c.y,h)}function iD(o){for(var c=0,h=o.sections;c<h.length;c+=1)if(gp(h[c].text))return!0;return!1}var Gp=function(o){this.layoutVertexArray=new vp,this.indexArray=new zu,this.programConfigurations=o,this.segments=new oe,this.dynamicLayoutVertexArray=new rh,this.opacityVertexArray=new L_,this.placedSymbolArray=new b};Gp.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Gp.prototype.upload=function(o,c,h,y){this.isEmpty()||(h&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,MF.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,LF.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,aD,!0),this.opacityVertexBuffer.itemSize=1),(h||y)&&this.programConfigurations.upload(o))},Gp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Yt("SymbolBuffers",Gp);var Cy=function(o,c,h){this.layoutVertexArray=new o,this.layoutAttributes=c,this.indexArray=new h,this.segments=new oe,this.collisionVertexArray=new hy};Cy.prototype.upload=function(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,RF.members,!0)},Cy.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Yt("CollisionBuffers",Cy);var Ni=function(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=so([]),this.placementViewportMatrix=so([]);var c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bC(this.zoom,c["text-size"]),this.iconSizeData=bC(this.zoom,c["icon-size"]);var h=this.layers[0].layout,y=h.get("symbol-sort-key"),x=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&y.constantOr(1)!==void 0,this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(function(I){return Wo[I]})),this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id}),this.sourceID=o.sourceID};Ni.prototype.createArrays=function(){this.text=new Gp(new fa(this.layers,this.zoom,function(o){return/^text/.test(o)})),this.icon=new Gp(new fa(this.layers,this.zoom,function(o){return/^icon/.test(o)})),this.glyphOffsetArray=new L,this.lineVertexArray=new O,this.symbolInstances=new E},Ni.prototype.calculateGlyphDependencies=function(o,c,h,y,x){for(var I=0;I<o.length;I++)if(c[o.charCodeAt(I)]=!0,(h||y)&&x){var A=xy[o.charAt(I)];A&&(c[A.charCodeAt(0)]=!0)}},Ni.prototype.populate=function(o,c,h){var y=this.layers[0],x=y.layout,I=x.get("text-font"),A=x.get("text-field"),R=x.get("icon-image"),B=(A.value.kind!=="constant"||A.value.value instanceof wr&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),D=R.value.kind!=="constant"||!!R.value.value||Object.keys(R.parameters).length>0,z=x.get("symbol-sort-key");if(this.features=[],B||D){for(var X=c.iconDependencies,Q=c.glyphDependencies,ie=c.availableImages,ge=new ei(this.zoom),fe=0,ke=o;fe<ke.length;fe+=1){var Ce=ke[fe],Be=Ce.feature,Ze=Ce.id,Ue=Ce.index,Ke=Ce.sourceLayerIndex,ot=y._featureFilter.needGeometry,vt=Vn(Be,ot);if(y._featureFilter.filter(ge,vt,h)){ot||(vt.geometry=Mn(Be));var Mt=void 0;if(B){var ra=y.getValueAndResolveTokens("text-field",vt,h,ie),Dt=wr.factory(ra);iD(Dt)&&(this.hasRTLText=!0),(!this.hasRTLText||ly()==="unavailable"||this.hasRTLText&&ro.isParsed())&&(Mt=WF(Dt,y,vt))}var da=void 0;if(D){var Vt=y.getValueAndResolveTokens("icon-image",vt,h,ie);da=Vt instanceof fs?Vt:fs.fromString(Vt)}if(Mt||da){var Ha=this.sortFeaturesByKey?z.evaluate(vt,{},h):void 0;if(this.features.push({id:Ze,text:Mt,icon:da,index:Ue,sourceLayerIndex:Ke,geometry:vt.geometry,properties:Be.properties,type:tD[Be.type],sortKey:Ha}),da&&(X[da.name]=!0),Mt){var ya=I.evaluate(vt,{},h).join(","),ea=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Wo.vertical)>=0;for(var $a=0,Fa=Mt.sections;$a<Fa.length;$a+=1){var pi=Fa[$a];if(pi.image)X[pi.image.name]=!0;else{var ha=ry(Mt.toString()),Ci=pi.fontStack||ya,bn=Q[Ci]=Q[Ci]||{};this.calculateGlyphDependencies(pi.text,bn,ea,this.allowVerticalPlacement,ha)}}}}}}x.get("symbol-placement")==="line"&&(this.features=function(On){var Ln={},vn={},Pn=[],pr=0;function gr(ln){Pn.push(On[ln]),pr++}function ls(ln,jn,jr){var Si=vn[ln];return delete vn[ln],vn[jn]=Si,Pn[Si].geometry[0].pop(),Pn[Si].geometry[0]=Pn[Si].geometry[0].concat(jr[0]),Si}function Tr(ln,jn,jr){var Si=Ln[jn];return delete Ln[jn],Ln[ln]=Si,Pn[Si].geometry[0].shift(),Pn[Si].geometry[0]=jr[0].concat(Pn[Si].geometry[0]),Si}function us(ln,jn,jr){var Si=jr?jn[0][jn[0].length-1]:jn[0][0];return ln+":"+Si.x+":"+Si.y}for(var Zn=0;Zn<On.length;Zn++){var Er=On[Zn],ri=Er.geometry,Xi=Er.text?Er.text.toString():null;if(Xi){var Wi=us(Xi,ri),yi=us(Xi,ri,!0);if(Wi in vn&&yi in Ln&&vn[Wi]!==Ln[yi]){var xs=Tr(Wi,yi,ri),Kr=ls(Wi,yi,Pn[xs].geometry);delete Ln[Wi],delete vn[yi],vn[us(Xi,Pn[Kr].geometry,!0)]=Kr,Pn[xs].geometry=null}else Wi in vn?ls(Wi,yi,ri):yi in Ln?Tr(Wi,yi,ri):(gr(Zn),Ln[Wi]=pr-1,vn[yi]=pr-1)}else gr(Zn)}return Pn.filter(function(ln){return ln.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(On,Ln){return On.sortKey-Ln.sortKey})}},Ni.prototype.update=function(o,c,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,c,this.layers,h),this.icon.programConfigurations.updatePaintArrays(o,c,this.layers,h))},Ni.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ni.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ni.prototype.upload=function(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ni.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ni.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ni.prototype.addToLineVertexArray=function(o,c){var h=this.lineVertexArray.length;if(o.segment!==void 0){for(var y=o.dist(c[o.segment+1]),x=o.dist(c[o.segment]),I={},A=o.segment+1;A<c.length;A++)I[A]={x:c[A].x,y:c[A].y,tileUnitDistanceFromAnchor:y},A<c.length-1&&(y+=c[A+1].dist(c[A]));for(var R=o.segment||0;R>=0;R--)I[R]={x:c[R].x,y:c[R].y,tileUnitDistanceFromAnchor:x},R>0&&(x+=c[R-1].dist(c[R]));for(var B=0;B<c.length;B++){var D=I[B];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}},Ni.prototype.addSymbols=function(o,c,h,y,x,I,A,R,B,D,z,X){for(var Q=o.indexArray,ie=o.layoutVertexArray,ge=o.segments.prepareSegment(4*c.length,ie,Q,this.canOverlap?I.sortKey:void 0),fe=this.glyphOffsetArray.length,ke=ge.vertexLength,Ce=this.allowVerticalPlacement&&A===Wo.vertical?Math.PI/2:0,Be=I.text&&I.text.sections,Ze=0;Ze<c.length;Ze++){var Ue=c[Ze],Ke=Ue.tl,ot=Ue.tr,vt=Ue.bl,Mt=Ue.br,ra=Ue.tex,Dt=Ue.pixelOffsetTL,da=Ue.pixelOffsetBR,Vt=Ue.minFontScaleX,Ha=Ue.minFontScaleY,ya=Ue.glyphOffset,ea=Ue.isSDF,$a=Ue.sectionIndex,Fa=ge.vertexLength,pi=ya[1];lv(ie,R.x,R.y,Ke.x,pi+Ke.y,ra.x,ra.y,h,ea,Dt.x,Dt.y,Vt,Ha),lv(ie,R.x,R.y,ot.x,pi+ot.y,ra.x+ra.w,ra.y,h,ea,da.x,Dt.y,Vt,Ha),lv(ie,R.x,R.y,vt.x,pi+vt.y,ra.x,ra.y+ra.h,h,ea,Dt.x,da.y,Vt,Ha),lv(ie,R.x,R.y,Mt.x,pi+Mt.y,ra.x+ra.w,ra.y+ra.h,h,ea,da.x,da.y,Vt,Ha),wC(o.dynamicLayoutVertexArray,R,Ce),Q.emplaceBack(Fa,Fa+1,Fa+2),Q.emplaceBack(Fa+1,Fa+2,Fa+3),ge.vertexLength+=4,ge.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ya[0]),Ze!==c.length-1&&$a===c[Ze+1].sectionIndex||o.programConfigurations.populatePaintArrays(ie.length,I,I.index,{},X,Be&&Be[$a])}o.placedSymbolArray.emplaceBack(R.x,R.y,fe,this.glyphOffsetArray.length-fe,ke,B,D,R.segment,h?h[0]:0,h?h[1]:0,y[0],y[1],A,0,!1,0,z)},Ni.prototype._addCollisionDebugVertex=function(o,c,h,y,x,I){return c.emplaceBack(0,0),o.emplaceBack(h.x,h.y,y,x,Math.round(I.x),Math.round(I.y))},Ni.prototype.addCollisionDebugVertices=function(o,c,h,y,x,I,A){var R=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),B=R.vertexLength,D=x.layoutVertexArray,z=x.collisionVertexArray,X=A.anchorX,Q=A.anchorY;this._addCollisionDebugVertex(D,z,I,X,Q,new m(o,c)),this._addCollisionDebugVertex(D,z,I,X,Q,new m(h,c)),this._addCollisionDebugVertex(D,z,I,X,Q,new m(h,y)),this._addCollisionDebugVertex(D,z,I,X,Q,new m(o,y)),R.vertexLength+=4;var ie=x.indexArray;ie.emplaceBack(B,B+1),ie.emplaceBack(B+1,B+2),ie.emplaceBack(B+2,B+3),ie.emplaceBack(B+3,B),R.primitiveLength+=4},Ni.prototype.addDebugCollisionBoxes=function(o,c,h,y){for(var x=o;x<c;x++){var I=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(I.x1,I.y1,I.x2,I.y2,y?this.textCollisionBox:this.iconCollisionBox,I.anchorPoint,h)}},Ni.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Cy(sh,TE.members,R_),this.iconCollisionBox=new Cy(sh,TE.members,R_);for(var o=0;o<this.symbolInstances.length;o++){var c=this.symbolInstances.get(o);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}},Ni.prototype._deserializeCollisionBoxesForSymbol=function(o,c,h,y,x,I,A,R,B){for(var D={},z=c;z<h;z++){var X=o.get(z);D.textBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},D.textFeatureIndex=X.featureIndex;break}for(var Q=y;Q<x;Q++){var ie=o.get(Q);D.verticalTextBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},D.verticalTextFeatureIndex=ie.featureIndex;break}for(var ge=I;ge<A;ge++){var fe=o.get(ge);D.iconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},D.iconFeatureIndex=fe.featureIndex;break}for(var ke=R;ke<B;ke++){var Ce=o.get(ke);D.verticalIconBox={x1:Ce.x1,y1:Ce.y1,x2:Ce.x2,y2:Ce.y2,anchorPointX:Ce.anchorPointX,anchorPointY:Ce.anchorPointY},D.verticalIconFeatureIndex=Ce.featureIndex;break}return D},Ni.prototype.deserializeCollisionBoxes=function(o){this.collisionArrays=[];for(var c=0;c<this.symbolInstances.length;c++){var h=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}},Ni.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ni.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ni.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ni.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ni.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ni.prototype.addIndicesForPlacedSymbol=function(o,c){for(var h=o.placedSymbolArray.get(c),y=h.vertexStartIndex+4*h.numGlyphs,x=h.vertexStartIndex;x<y;x+=4)o.indexArray.emplaceBack(x,x+1,x+2),o.indexArray.emplaceBack(x+1,x+2,x+3)},Ni.prototype.getSortedSymbolIndexes=function(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var c=Math.sin(o),h=Math.cos(o),y=[],x=[],I=[],A=0;A<this.symbolInstances.length;++A){I.push(A);var R=this.symbolInstances.get(A);y.push(0|Math.round(c*R.anchorX+h*R.anchorY)),x.push(R.featureIndex)}return I.sort(function(B,D){return y[B]-y[D]||x[D]-x[B]}),I},Ni.prototype.addToSortKeyRanges=function(o,c){var h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===c?h.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:o,symbolInstanceEnd:o+1})},Ni.prototype.sortFeatures=function(o){var c=this;if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var h=0,y=this.symbolInstanceIndexes;h<y.length;h+=1){var x=this.symbolInstances.get(y[h]);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach(function(I,A,R){I>=0&&R.indexOf(I)===A&&c.addIndicesForPlacedSymbol(c.text,I)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Yt("SymbolBucket",Ni,{omit:["layers","collisionBoxArray","features","compareText"]}),Ni.MAX_GLYPHS=65535,Ni.addDynamicAttributes=wC;var nD=new Br({"symbol-placement":new ua(ae.layout_symbol["symbol-placement"]),"symbol-spacing":new ua(ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ua(ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Qt(ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ua(ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ua(ae.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ua(ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new ua(ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ua(ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new Qt(ae.layout_symbol["icon-size"]),"icon-text-fit":new ua(ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ua(ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new Qt(ae.layout_symbol["icon-image"]),"icon-rotate":new Qt(ae.layout_symbol["icon-rotate"]),"icon-padding":new ua(ae.layout_symbol["icon-padding"]),"icon-keep-upright":new ua(ae.layout_symbol["icon-keep-upright"]),"icon-offset":new Qt(ae.layout_symbol["icon-offset"]),"icon-anchor":new Qt(ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ua(ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ua(ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ua(ae.layout_symbol["text-rotation-alignment"]),"text-field":new Qt(ae.layout_symbol["text-field"]),"text-font":new Qt(ae.layout_symbol["text-font"]),"text-size":new Qt(ae.layout_symbol["text-size"]),"text-max-width":new Qt(ae.layout_symbol["text-max-width"]),"text-line-height":new ua(ae.layout_symbol["text-line-height"]),"text-letter-spacing":new Qt(ae.layout_symbol["text-letter-spacing"]),"text-justify":new Qt(ae.layout_symbol["text-justify"]),"text-radial-offset":new Qt(ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ua(ae.layout_symbol["text-variable-anchor"]),"text-anchor":new Qt(ae.layout_symbol["text-anchor"]),"text-max-angle":new ua(ae.layout_symbol["text-max-angle"]),"text-writing-mode":new ua(ae.layout_symbol["text-writing-mode"]),"text-rotate":new Qt(ae.layout_symbol["text-rotate"]),"text-padding":new ua(ae.layout_symbol["text-padding"]),"text-keep-upright":new ua(ae.layout_symbol["text-keep-upright"]),"text-transform":new Qt(ae.layout_symbol["text-transform"]),"text-offset":new Qt(ae.layout_symbol["text-offset"]),"text-allow-overlap":new ua(ae.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ua(ae.layout_symbol["text-ignore-placement"]),"text-optional":new ua(ae.layout_symbol["text-optional"])}),IC={paint:new Br({"icon-opacity":new Qt(ae.paint_symbol["icon-opacity"]),"icon-color":new Qt(ae.paint_symbol["icon-color"]),"icon-halo-color":new Qt(ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new Qt(ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Qt(ae.paint_symbol["icon-halo-blur"]),"icon-translate":new ua(ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new ua(ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new Qt(ae.paint_symbol["text-opacity"]),"text-color":new Qt(ae.paint_symbol["text-color"],{runtimeType:Wt,getOverride:function(o){return o.textColor},hasOverride:function(o){return!!o.textColor}}),"text-halo-color":new Qt(ae.paint_symbol["text-halo-color"]),"text-halo-width":new Qt(ae.paint_symbol["text-halo-width"]),"text-halo-blur":new Qt(ae.paint_symbol["text-halo-blur"]),"text-translate":new ua(ae.paint_symbol["text-translate"]),"text-translate-anchor":new ua(ae.paint_symbol["text-translate-anchor"])}),layout:nD},Op=function(o){this.type=o.property.overrides?o.property.overrides.runtimeType:Bt,this.defaultValue=o};Op.prototype.evaluate=function(o){if(o.formattedSection){var c=this.defaultValue.property.overrides;if(c&&c.hasOverride(o.formattedSection))return c.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default},Op.prototype.eachChild=function(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)},Op.prototype.outputDefined=function(){return!1},Op.prototype.serialize=function(){return null},Yt("FormatSectionOverride",Op,{omit:["defaultValue"]});var rD=function(o){function c(h){o.call(this,h,IC)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.recalculate=function(h,y){if(o.prototype.recalculate.call(this,h,y),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var x=this.layout.get("text-writing-mode");if(x){for(var I=[],A=0,R=x;A<R.length;A+=1){var B=R[A];I.indexOf(B)<0&&I.push(B)}this.layout._values["text-writing-mode"]=I}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},c.prototype.getValueAndResolveTokens=function(h,y,x,I){var A=this.layout.get(h).evaluate(y,{},x,I),R=this._unevaluatedLayout._values[h];return R.isDataDriven()||b_(R.value)||!A?A:function(B,D){return D.replace(/{([^{}]+)}/g,function(z,X){return X in B?String(B[X]):""})}(y.properties,A)},c.prototype.createBucket=function(h){return new Ni(h)},c.prototype.queryRadius=function(){return 0},c.prototype.queryIntersectsFeature=function(){return!1},c.prototype._setPaintOverrides=function(){for(var h=0,y=IC.paint.overridableProperties;h<y.length;h+=1){var x=y[h];if(c.hasPaintOverride(this.layout,x)){var I,A=this.paint.get(x),R=new Op(A),B=new Qd(R,A.property.specification);I=A.value.kind==="constant"||A.value.kind==="source"?new v_("source",B):new eh("composite",B,A.value.zoomStops,A.value._interpolationType),this.paint._values[x]=new ns(A.property,I,A.parameters)}}},c.prototype._handleOverridablePaintPropertyUpdate=function(h,y,x){return!(!this.layout||y.isDataDriven()||x.isDataDriven())&&c.hasPaintOverride(this.layout,h)},c.hasPaintOverride=function(h,y){var x=h.get("text-field"),I=IC.paint.properties[y],A=!1,R=function(z){for(var X=0,Q=z;X<Q.length;X+=1)if(I.overrides&&I.overrides.hasOverride(Q[X]))return void(A=!0)};if(x.value.kind==="constant"&&x.value.value instanceof wr)R(x.value.value.sections);else if(x.value.kind==="source"){var B=function(z){A||(z instanceof as&&Dn(z.value)===dt?R(z.value.sections):z instanceof il?R(z.sections):z.eachChild(B))},D=x.value;D._styleExpression&&B(D._styleExpression.expression)}return A},c}(Al),sD={paint:new Br({"background-color":new ua(ae.paint_background["background-color"]),"background-pattern":new rs(ae.paint_background["background-pattern"]),"background-opacity":new ua(ae.paint_background["background-opacity"])})},oD=function(o){function c(h){o.call(this,h,sD)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c}(Al),lD={paint:new Br({"raster-opacity":new ua(ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new ua(ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ua(ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ua(ae.paint_raster["raster-brightness-max"]),"raster-saturation":new ua(ae.paint_raster["raster-saturation"]),"raster-contrast":new ua(ae.paint_raster["raster-contrast"]),"raster-resampling":new ua(ae.paint_raster["raster-resampling"]),"raster-fade-duration":new ua(ae.paint_raster["raster-fade-duration"])})},uD=function(o){function c(h){o.call(this,h,lD)}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c}(Al),cD=function(o){function c(h){o.call(this,h,{}),this.implementation=h}return o&&(c.__proto__=o),(c.prototype=Object.create(o&&o.prototype)).constructor=c,c.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},c.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},c.prototype.recalculate=function(){},c.prototype.updateTransitions=function(){},c.prototype.hasTransition=function(){},c.prototype.serialize=function(){},c.prototype.onAdd=function(h){this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},c.prototype.onRemove=function(h){this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},c}(Al),dD={circle:oC,heatmap:YN,hillshade:jN,fill:_F,"fill-extrusion":wF,line:EF,symbol:rD,background:oD,raster:uD},jE=v.HTMLImageElement,$E=v.HTMLCanvasElement,JE=v.HTMLVideoElement,QE=v.ImageData,uv=v.ImageBitmap,B_=function(o,c,h,y){this.context=o,this.format=h,this.texture=o.gl.createTexture(),this.update(c,y)};B_.prototype.update=function(o,c,h){var y=o.width,x=o.height,I=!(this.size&&this.size[0]===y&&this.size[1]===x||h),A=this.context,R=A.gl;if(this.useMipmap=!!(c&&c.useMipmap),R.bindTexture(R.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!c||c.premultiply!==!1)),I)this.size=[y,x],o instanceof jE||o instanceof $E||o instanceof JE||o instanceof QE||uv&&o instanceof uv?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,o):R.texImage2D(R.TEXTURE_2D,0,this.format,y,x,0,this.format,R.UNSIGNED_BYTE,o.data);else{var B=h||{x:0,y:0},D=B.x,z=B.y;o instanceof jE||o instanceof $E||o instanceof JE||o instanceof QE||uv&&o instanceof uv?R.texSubImage2D(R.TEXTURE_2D,0,D,z,R.RGBA,R.UNSIGNED_BYTE,o):R.texSubImage2D(R.TEXTURE_2D,0,D,z,y,x,R.RGBA,R.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&R.generateMipmap(R.TEXTURE_2D)},B_.prototype.bind=function(o,c,h){var y=this.context.gl;y.bindTexture(y.TEXTURE_2D,this.texture),h!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=y.LINEAR),o!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,o),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,h||o),this.filter=o),c!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,c),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,c),this.wrap=c)},B_.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},B_.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var CC=function(o){var c=this;this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){c._triggered=!1,c._callback()})};CC.prototype.trigger=function(){var o=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){o._triggered=!1,o._callback()},0))},CC.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Pp=function(o,c,h){this.target=o,this.parent=c,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},te(["receive","process"],this),this.invoker=new CC(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=he()?o:v};function eM(o,c,h){var y=2*Math.PI*6378137/256/Math.pow(2,h);return[o*y-2*Math.PI*6378137/2,c*y-2*Math.PI*6378137/2]}Pp.prototype.send=function(o,c,h,y,x){var I=this;x===void 0&&(x=!1);var A=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[A]=h);var R=Ye(this.globalScope)?void 0:[];return this.target.postMessage({id:A,type:o,hasCallback:!!h,targetMapId:y,mustQueue:x,sourceMapId:this.mapId,data:rl(c,R)},R),{cancel:function(){h&&delete I.callbacks[A],I.target.postMessage({id:A,type:"<cancel>",targetMapId:y,sourceMapId:I.mapId})}}},Pp.prototype.receive=function(o){var c=o.data,h=c.id;if(h&&(!c.targetMapId||this.mapId===c.targetMapId))if(c.type==="<cancel>"){delete this.tasks[h];var y=this.cancelCallbacks[h];delete this.cancelCallbacks[h],y&&y()}else he()||c.mustQueue?(this.tasks[h]=c,this.taskQueue.push(h),this.invoker.trigger()):this.processTask(h,c)},Pp.prototype.process=function(){if(this.taskQueue.length){var o=this.taskQueue.shift(),c=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),c&&this.processTask(o,c)}},Pp.prototype.processTask=function(o,c){var h=this;if(c.type==="<response>"){var y=this.callbacks[o];delete this.callbacks[o],y&&(c.error?y(Ws(c.error)):y(null,Ws(c.data)))}else{var x=!1,I=Ye(this.globalScope)?void 0:[],A=c.hasCallback?function(z,X){x=!0,delete h.cancelCallbacks[o],h.target.postMessage({id:o,type:"<response>",sourceMapId:h.mapId,error:z?rl(z):null,data:rl(X,I)},I)}:function(z){x=!0},R=null,B=Ws(c.data);if(this.parent[c.type])R=this.parent[c.type](c.sourceMapId,B,A);else if(this.parent.getWorkerSource){var D=c.type.split(".");R=this.parent.getWorkerSource(c.sourceMapId,D[0],B.source)[D[1]](B,A)}else A(new Error("Could not find function "+c.type));!x&&R&&R.cancel&&(this.cancelCallbacks[o]=R.cancel)}},Pp.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ir=function(o,c){o&&(c?this.setSouthWest(o).setNorthEast(c):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))};ir.prototype.setNorthEast=function(o){return this._ne=o instanceof yn?new yn(o.lng,o.lat):yn.convert(o),this},ir.prototype.setSouthWest=function(o){return this._sw=o instanceof yn?new yn(o.lng,o.lat):yn.convert(o),this},ir.prototype.extend=function(o){var c,h,y=this._sw,x=this._ne;if(o instanceof yn)c=o,h=o;else{if(!(o instanceof ir))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(ir.convert(o)):this.extend(yn.convert(o)):this;if(h=o._ne,!(c=o._sw)||!h)return this}return y||x?(y.lng=Math.min(c.lng,y.lng),y.lat=Math.min(c.lat,y.lat),x.lng=Math.max(h.lng,x.lng),x.lat=Math.max(h.lat,x.lat)):(this._sw=new yn(c.lng,c.lat),this._ne=new yn(h.lng,h.lat)),this},ir.prototype.getCenter=function(){return new yn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ir.prototype.getSouthWest=function(){return this._sw},ir.prototype.getNorthEast=function(){return this._ne},ir.prototype.getNorthWest=function(){return new yn(this.getWest(),this.getNorth())},ir.prototype.getSouthEast=function(){return new yn(this.getEast(),this.getSouth())},ir.prototype.getWest=function(){return this._sw.lng},ir.prototype.getSouth=function(){return this._sw.lat},ir.prototype.getEast=function(){return this._ne.lng},ir.prototype.getNorth=function(){return this._ne.lat},ir.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ir.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ir.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ir.prototype.contains=function(o){var c=yn.convert(o),h=c.lng,y=c.lat,x=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(x=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&x},ir.convert=function(o){return!o||o instanceof ir?o:new ir(o)};var yn=function(o,c){if(isNaN(o)||isNaN(c))throw new Error("Invalid LngLat object: ("+o+", "+c+")");if(this.lng=+o,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};yn.prototype.wrap=function(){return new yn(G(this.lng,-180,180),this.lat)},yn.prototype.toArray=function(){return[this.lng,this.lat]},yn.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},yn.prototype.distanceTo=function(o){var c=Math.PI/180,h=this.lat*c,y=o.lat*c,x=Math.sin(h)*Math.sin(y)+Math.cos(h)*Math.cos(y)*Math.cos((o.lng-this.lng)*c);return 63710088e-1*Math.acos(Math.min(x,1))},yn.prototype.toBounds=function(o){o===void 0&&(o=0);var c=360*o/40075017,h=c/Math.cos(Math.PI/180*this.lat);return new ir(new yn(this.lng-h,this.lat-c),new yn(this.lng+h,this.lat+c))},yn.convert=function(o){if(o instanceof yn)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new yn(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new yn(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var tM=2*Math.PI*63710088e-1;function aM(o){return tM*Math.cos(o*Math.PI/180)}function iM(o){return(180+o)/360}function nM(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function rM(o,c){return o/aM(c)}function SC(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}var N_=function(o,c,h){h===void 0&&(h=0),this.x=+o,this.y=+c,this.z=+h};N_.fromLngLat=function(o,c){c===void 0&&(c=0);var h=yn.convert(o);return new N_(iM(h.lng),nM(h.lat),rM(c,h.lat))},N_.prototype.toLngLat=function(){return new yn(360*this.x-180,SC(this.y))},N_.prototype.toAltitude=function(){return this.z*aM(SC(this.y))},N_.prototype.meterInMercatorCoordinateUnits=function(){return 1/tM*(o=SC(this.y),1/Math.cos(o*Math.PI/180));var o};var F_=function(o,c,h){this.z=o,this.x=c,this.y=h,this.key=Sy(0,o,o,c,h)};F_.prototype.equals=function(o){return this.z===o.z&&this.x===o.x&&this.y===o.y},F_.prototype.url=function(o,c){var h,y,x,I,A,R=(y=this.y,x=this.z,I=eM(256*(h=this.x),256*(y=Math.pow(2,x)-y-1),x),A=eM(256*(h+1),256*(y+1),x),I[0]+","+I[1]+","+A[0]+","+A[1]),B=function(D,z,X){for(var Q,ie="",ge=D;ge>0;ge--)ie+=(z&(Q=1<<ge-1)?1:0)+(X&Q?2:0);return ie}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",B).replace("{bbox-epsg-3857}",R)},F_.prototype.getTilePoint=function(o){var c=Math.pow(2,this.z);return new m(8192*(o.x*c-this.x),8192*(o.y*c-this.y))},F_.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var sM=function(o,c){this.wrap=o,this.canonical=c,this.key=Sy(o,c.z,c.z,c.x,c.y)},nr=function(o,c,h,y,x){this.overscaledZ=o,this.wrap=c,this.canonical=new F_(h,+y,+x),this.key=Sy(c,o,h,y,x)};function Sy(o,c,h,y,x){(o*=2)<0&&(o=-1*o-1);var I=1<<h;return(I*I*o+I*x+y).toString(36)+h.toString(36)+c.toString(36)}nr.prototype.equals=function(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)},nr.prototype.scaledTo=function(o){var c=this.canonical.z-o;return o>this.canonical.z?new nr(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new nr(o,this.wrap,o,this.canonical.x>>c,this.canonical.y>>c)},nr.prototype.calculateScaledKey=function(o,c){var h=this.canonical.z-o;return o>this.canonical.z?Sy(this.wrap*+c,o,this.canonical.z,this.canonical.x,this.canonical.y):Sy(this.wrap*+c,o,o,this.canonical.x>>h,this.canonical.y>>h)},nr.prototype.isChildOf=function(o){if(o.wrap!==this.wrap)return!1;var c=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>c&&o.canonical.y===this.canonical.y>>c},nr.prototype.children=function(o){if(this.overscaledZ>=o)return[new nr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var c=this.canonical.z+1,h=2*this.canonical.x,y=2*this.canonical.y;return[new nr(c,this.wrap,c,h,y),new nr(c,this.wrap,c,h+1,y),new nr(c,this.wrap,c,h,y+1),new nr(c,this.wrap,c,h+1,y+1)]},nr.prototype.isLessThan=function(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))},nr.prototype.wrapped=function(){return new nr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},nr.prototype.unwrapTo=function(o){return new nr(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)},nr.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},nr.prototype.toUnwrapped=function(){return new sM(this.wrap,this.canonical)},nr.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},nr.prototype.getTilePoint=function(o){return this.canonical.getTilePoint(new N_(o.x-this.wrap,o.y))},Yt("CanonicalTileID",F_),Yt("OverscaledTileID",nr,{omit:["posMatrix"]});var Jc=function(o,c,h){if(this.uid=o,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return Se('"'+h+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=c.height;var y=this.dim=c.height-2;this.data=new Uint32Array(c.data.buffer),this.encoding=h||"mapbox";for(var x=0;x<y;x++)this.data[this._idx(-1,x)]=this.data[this._idx(0,x)],this.data[this._idx(y,x)]=this.data[this._idx(y-1,x)],this.data[this._idx(x,-1)]=this.data[this._idx(x,0)],this.data[this._idx(x,y)]=this.data[this._idx(x,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)]};Jc.prototype.get=function(o,c){var h=new Uint8Array(this.data.buffer),y=4*this._idx(o,c);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[y],h[y+1],h[y+2])},Jc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Jc.prototype._idx=function(o,c){if(o<-1||o>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(o+1)},Jc.prototype._unpackMapbox=function(o,c,h){return(256*o*256+256*c+h)/10-1e4},Jc.prototype._unpackTerrarium=function(o,c,h){return 256*o+c+h/256-32768},Jc.prototype.getPixels=function(){return new Ns({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Jc.prototype.backfillBorder=function(o,c,h){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");var y=c*this.dim,x=c*this.dim+this.dim,I=h*this.dim,A=h*this.dim+this.dim;switch(c){case-1:y=x-1;break;case 1:x=y+1}switch(h){case-1:I=A-1;break;case 1:A=I+1}for(var R=-c*this.dim,B=-h*this.dim,D=I;D<A;D++)for(var z=y;z<x;z++)this.data[this._idx(z,D)]=o.data[this._idx(z+R,D+B)]},Yt("DEMData",Jc);var cv=function(o){this._stringToNumber={},this._numberToString=[];for(var c=0;c<o.length;c++){var h=o[c];this._stringToNumber[h]=c,this._numberToString[c]=h}};cv.prototype.encode=function(o){return this._stringToNumber[o]},cv.prototype.decode=function(o){return this._numberToString[o]};var dv=function(o,c,h,y,x){this.type="Feature",this._vectorTileFeature=o,o._z=c,o._x=h,o._y=y,this.properties=o.properties,this.id=x},AC={geometry:{configurable:!0}};AC.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},AC.geometry.set=function(o){this._geometry=o},dv.prototype.toJSON=function(){var o={geometry:this.geometry};for(var c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(o[c]=this[c]);return o},Object.defineProperties(dv.prototype,AC);var Bp=function(){this.state={},this.stateChanges={},this.deletedStates={}};Bp.prototype.updateState=function(o,c,h){var y=String(c);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][y]=this.stateChanges[o][y]||{},P(this.stateChanges[o][y],h),this.deletedStates[o]===null)for(var x in this.deletedStates[o]={},this.state[o])x!==y&&(this.deletedStates[o][x]=null);else if(this.deletedStates[o]&&this.deletedStates[o][y]===null)for(var I in this.deletedStates[o][y]={},this.state[o][y])h[I]||(this.deletedStates[o][y][I]=null);else for(var A in h)this.deletedStates[o]&&this.deletedStates[o][y]&&this.deletedStates[o][y][A]===null&&delete this.deletedStates[o][y][A]},Bp.prototype.removeFeatureState=function(o,c,h){if(this.deletedStates[o]!==null){var y=String(c);if(this.deletedStates[o]=this.deletedStates[o]||{},h&&c!==void 0)this.deletedStates[o][y]!==null&&(this.deletedStates[o][y]=this.deletedStates[o][y]||{},this.deletedStates[o][y][h]=null);else if(c!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][y])for(h in this.deletedStates[o][y]={},this.stateChanges[o][y])this.deletedStates[o][y][h]=null;else this.deletedStates[o][y]=null;else this.deletedStates[o]=null}},Bp.prototype.getState=function(o,c){var h=String(c),y=P({},(this.state[o]||{})[h],(this.stateChanges[o]||{})[h]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){var x=this.deletedStates[o][c];if(x===null)return{};for(var I in x)delete y[I]}return y},Bp.prototype.initializeTileState=function(o,c){o.setFeatureState(this.state,c)},Bp.prototype.coalesceChanges=function(o,c){var h={};for(var y in this.stateChanges){this.state[y]=this.state[y]||{};var x={};for(var I in this.stateChanges[y])this.state[y][I]||(this.state[y][I]={}),P(this.state[y][I],this.stateChanges[y][I]),x[I]=this.state[y][I];h[y]=x}for(var A in this.deletedStates){this.state[A]=this.state[A]||{};var R={};if(this.deletedStates[A]===null)for(var B in this.state[A])R[B]={},this.state[A][B]={};else for(var D in this.deletedStates[A]){if(this.deletedStates[A][D]===null)this.state[A][D]={};else for(var z=0,X=Object.keys(this.deletedStates[A][D]);z<X.length;z+=1)delete this.state[A][D][X[z]];R[D]=this.state[A][D]}h[A]=h[A]||{},P(h[A],R)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(var Q in o)o[Q].setFeatureState(h,c)};var Qc=function(o,c){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Jl(8192,16,0),this.grid3D=new Jl(8192,16,0),this.featureIndexArray=new Y,this.promoteId=c};function oM(o,c,h,y,x){return ne(o,function(I,A){var R=c instanceof M_?c.get(A):null;return R&&R.evaluate?R.evaluate(h,y,x):R})}function lM(o){for(var c=1/0,h=1/0,y=-1/0,x=-1/0,I=0,A=o;I<A.length;I+=1){var R=A[I];c=Math.min(c,R.x),h=Math.min(h,R.y),y=Math.max(y,R.x),x=Math.max(x,R.y)}return{minX:c,minY:h,maxX:y,maxY:x}}function hD(o,c){return c-o}Qc.prototype.insert=function(o,c,h,y,x,I){var A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,y,x);for(var R=I?this.grid3D:this.grid,B=0;B<c.length;B++){for(var D=c[B],z=[1/0,1/0,-1/0,-1/0],X=0;X<D.length;X++){var Q=D[X];z[0]=Math.min(z[0],Q.x),z[1]=Math.min(z[1],Q.y),z[2]=Math.max(z[2],Q.x),z[3]=Math.max(z[3],Q.y)}z[0]<8192&&z[1]<8192&&z[2]>=0&&z[3]>=0&&R.insert(A,z[0],z[1],z[2],z[3])}},Qc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Tp.VectorTile(new Qb(this.rawTileData)).layers,this.sourceLayerCoder=new cv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Qc.prototype.query=function(o,c,h,y){var x=this;this.loadVTLayers();for(var I=o.params||{},A=8192/o.tileSize/o.scale,R=cp(I.filter),B=o.queryGeometry,D=o.queryPadding*A,z=lM(B),X=this.grid.query(z.minX-D,z.minY-D,z.maxX+D,z.maxY+D),Q=lM(o.cameraQueryGeometry),ie=this.grid3D.query(Q.minX-D,Q.minY-D,Q.maxX+D,Q.maxY+D,function(Ue,Ke,ot,vt){return function(Mt,ra,Dt,da,Vt){for(var Ha=0,ya=Mt;Ha<ya.length;Ha+=1){var ea=ya[Ha];if(ra<=ea.x&&Dt<=ea.y&&da>=ea.x&&Vt>=ea.y)return!0}var $a=[new m(ra,Dt),new m(ra,Vt),new m(da,Vt),new m(da,Dt)];if(Mt.length>2){for(var Fa=0,pi=$a;Fa<pi.length;Fa+=1)if(El(Mt,pi[Fa]))return!0}for(var ha=0;ha<Mt.length-1;ha++)if(G_(Mt[ha],Mt[ha+1],$a))return!0;return!1}(o.cameraQueryGeometry,Ue-D,Ke-D,ot+D,vt+D)}),ge=0,fe=ie;ge<fe.length;ge+=1)X.push(fe[ge]);X.sort(hD);for(var ke,Ce={},Be=function(Ue){var Ke=X[Ue];if(Ke!==ke){ke=Ke;var ot=x.featureIndexArray.get(Ke),vt=null;x.loadMatchingFeature(Ce,ot.bucketIndex,ot.sourceLayerIndex,ot.featureIndex,R,I.layers,I.availableImages,c,h,y,function(Mt,ra,Dt){return vt||(vt=Mn(Mt)),ra.queryIntersectsFeature(B,Mt,Dt,vt,x.z,o.transform,A,o.pixelPosMatrix)})}},Ze=0;Ze<X.length;Ze++)Be(Ze);return Ce},Qc.prototype.loadMatchingFeature=function(o,c,h,y,x,I,A,R,B,D,z){var X=this.bucketLayerIDs[c];if(!I||function(Mt,ra){for(var Dt=0;Dt<Mt.length;Dt++)if(ra.indexOf(Mt[Dt])>=0)return!0;return!1}(I,X)){var Q=this.sourceLayerCoder.decode(h),ie=this.vtLayers[Q].feature(y);if(x.needGeometry){var ge=Vn(ie,!0);if(!x.filter(new ei(this.tileID.overscaledZ),ge,this.tileID.canonical))return}else if(!x.filter(new ei(this.tileID.overscaledZ),ie))return;for(var fe=this.getId(ie,Q),ke=0;ke<X.length;ke++){var Ce=X[ke];if(!(I&&I.indexOf(Ce)<0)){var Be=R[Ce];if(Be){var Ze={};fe!==void 0&&D&&(Ze=D.getState(Be.sourceLayer||"_geojsonTileLayer",fe));var Ue=P({},B[Ce]);Ue.paint=oM(Ue.paint,Be.paint,ie,Ze,A),Ue.layout=oM(Ue.layout,Be.layout,ie,Ze,A);var Ke=!z||z(ie,Be,Ze);if(Ke){var ot=new dv(ie,this.z,this.x,this.y,fe);ot.layer=Ue;var vt=o[Ce];vt===void 0&&(vt=o[Ce]=[]),vt.push({featureIndex:y,feature:ot,intersectionZ:Ke})}}}}}},Qc.prototype.lookupSymbolFeatures=function(o,c,h,y,x,I,A,R){var B={};this.loadVTLayers();for(var D=cp(x),z=0,X=o;z<X.length;z+=1)this.loadMatchingFeature(B,h,y,X[z],D,I,A,R,c);return B},Qc.prototype.hasLayer=function(o){for(var c=0,h=this.bucketLayerIDs;c<h.length;c+=1)for(var y=0,x=h[c];y<x.length;y+=1)if(o===x[y])return!0;return!1},Qc.prototype.getId=function(o,c){var h=o.id;return this.promoteId&&typeof(h=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]])=="boolean"&&(h=Number(h)),h},Yt("FeatureIndex",Qc,{omit:["rawTileData","sourceLayerCoder"]});var Ar=function(o,c){this.tileID=o,this.uid=N(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ar.prototype.registerFadeDuration=function(o){var c=o+this.timeAdded;c<ui.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)},Ar.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Ar.prototype.loadVectorData=function(o,c,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){for(var y in o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(D,z){var X={};if(!z)return X;for(var Q=function(){var fe=ge[ie],ke=fe.layerIds.map(function(Ze){return z.getLayer(Ze)}).filter(Boolean);if(ke.length!==0){fe.layers=ke,fe.stateDependentLayerIds&&(fe.stateDependentLayers=fe.stateDependentLayerIds.map(function(Ze){return ke.filter(function(Ue){return Ue.id===Ze})[0]}));for(var Ce=0,Be=ke;Ce<Be.length;Ce+=1)X[Be[Ce].id]=fe}},ie=0,ge=D;ie<ge.length;ie+=1)Q();return X}(o.buckets,c.style),this.hasSymbolBuckets=!1,this.buckets){var x=this.buckets[y];if(x instanceof Ni){if(this.hasSymbolBuckets=!0,!h)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var I in this.buckets){var A=this.buckets[I];if(A instanceof Ni&&A.hasRTLText){this.hasRTLText=!0,ro.isLoading()||ro.isLoaded()||ly()!=="deferred"||sl();break}}for(var R in this.queryPadding=0,this.buckets){var B=this.buckets[R];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(R).queryRadius(B))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new g},Ar.prototype.unloadVectorData=function(){for(var o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ar.prototype.getBucket=function(o){return this.buckets[o.id]},Ar.prototype.upload=function(o){for(var c in this.buckets){var h=this.buckets[c];h.uploadPending()&&h.upload(o)}var y=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new B_(o,this.imageAtlas.image,y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new B_(o,this.glyphAtlasImage,y.ALPHA),this.glyphAtlasImage=null)},Ar.prototype.prepare=function(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)},Ar.prototype.queryRenderedFeatures=function(o,c,h,y,x,I,A,R,B,D){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:x,scale:I,tileSize:this.tileSize,pixelPosMatrix:D,transform:R,params:A,queryPadding:this.queryPadding*B},o,c,h):{}},Ar.prototype.querySourceFeatures=function(o,c){var h=this.latestFeatureIndex;if(h&&h.rawTileData){var y=h.loadVTLayers(),x=c?c.sourceLayer:"",I=y._geojsonTileLayer||y[x];if(I)for(var A=cp(c&&c.filter),R=this.tileID.canonical,B=R.z,D=R.x,z=R.y,X={z:B,x:D,y:z},Q=0;Q<I.length;Q++){var ie=I.feature(Q);if(A.needGeometry){var ge=Vn(ie,!0);if(!A.filter(new ei(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!A.filter(new ei(this.tileID.overscaledZ),ie))continue;var fe=h.getId(ie,x),ke=new dv(ie,B,D,z,fe);ke.tile=X,o.push(ke)}}},Ar.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Ar.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ar.prototype.setExpiryData=function(o){var c=this.expirationTime;if(o.cacheControl){var h=we(o.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){var y=Date.now(),x=!1;if(this.expirationTime>y)x=!1;else if(c)if(this.expirationTime<c)x=!0;else{var I=this.expirationTime-c;I?this.expirationTime=y+Math.max(I,3e4):x=!0}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ar.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Ar.prototype.setFeatureState=function(o,c){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(o).length!==0){var h=this.latestFeatureIndex.loadVTLayers();for(var y in this.buckets)if(c.style.hasLayer(y)){var x=this.buckets[y],I=x.layers[0].sourceLayer||"_geojsonTileLayer",A=h[I],R=o[I];if(A&&R&&Object.keys(R).length!==0){x.update(R,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});var B=c&&c.style&&c.style.getLayer(y);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(x)))}}}},Ar.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Ar.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ui.now()},Ar.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ar.prototype.setHoldDuration=function(o){this.symbolFadeHoldUntil=ui.now()+o},Ar.prototype.setDependencies=function(o,c){for(var h={},y=0,x=c;y<x.length;y+=1)h[x[y]]=!0;this.dependencies[o]=h},Ar.prototype.hasDependency=function(o,c){for(var h=0,y=o;h<y.length;h+=1){var x=this.dependencies[y[h]];if(x){for(var I=0,A=c;I<A.length;I+=1)if(x[A[I]])return!0}}return!1};var dh=v.performance,uM=function(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},dh.mark(this._marks.start)};uM.prototype.finish=function(){dh.mark(this._marks.end);var o=dh.getEntriesByName(this._marks.measure);return o.length===0&&(dh.measure(this._marks.measure,this._marks.start,this._marks.end),o=dh.getEntriesByName(this._marks.measure),dh.clearMarks(this._marks.start),dh.clearMarks(this._marks.end),dh.clearMeasures(this._marks.measure)),o},r.Actor=Pp,r.AlphaImage=P_,r.CanonicalTileID=F_,r.CollisionBoxArray=g,r.Color=gi,r.DEMData=Jc,r.DataConstantProperty=ua,r.DictionaryCoder=cv,r.EXTENT=8192,r.ErrorEvent=Le,r.EvaluationParameters=ei,r.Event=me,r.Evented=Te,r.FeatureIndex=Qc,r.FillBucket=au,r.FillExtrusionBucket=iu,r.ImageAtlas=Iy,r.ImagePosition=tv,r.LineBucket=vs,r.LngLat=yn,r.LngLatBounds=ir,r.MercatorCoordinate=N_,r.ONE_EM=24,r.OverscaledTileID=nr,r.Point=m,r.Point$1=m,r.Properties=Br,r.Protobuf=Qb,r.RGBAImage=Ns,r.RequestManager=qe,r.RequestPerformance=uM,r.ResourceType=ao,r.SegmentVector=oe,r.SourceFeatureState=Bp,r.StructArrayLayout1ui2=my,r.StructArrayLayout2f1f2i16=Yc,r.StructArrayLayout2i4=qc,r.StructArrayLayout3ui6=zu,r.StructArrayLayout4i8=cy,r.SymbolBucket=Ni,r.Texture=B_,r.Tile=Ar,r.Transitionable=Pr,r.Uniform1f=At,r.Uniform1i=ht,r.Uniform2f=It,r.Uniform3f=Zt,r.Uniform4f=ca,r.UniformColor=ma,r.UniformMatrix4f=fi,r.UnwrappedTileID=sM,r.ValidationError=ye,r.WritingMode=Wo,r.ZoomHistory=ny,r.add=function(o,c,h){return o[0]=c[0]+h[0],o[1]=c[1]+h[1],o[2]=c[2]+h[2],o},r.addDynamicAttributes=wC,r.asyncAll=function(o,c,h){if(!o.length)return h(null,[]);var y=o.length,x=new Array(o.length),I=null;o.forEach(function(A,R){c(A,function(B,D){B&&(I=B),x[R]=D,--y==0&&h(I,x)})})},r.bezier=S,r.bindAll=te,r.browser=ui,r.cacheEntryPossiblyAdded=function(o){++Ri>qn&&(o.getActor().send("enforceCacheSizeLimit",Ki),Ri=0)},r.clamp=M,r.clearTileCache=function(o){var c=v.caches.delete("mapbox-tiles");o&&c.catch(o).then(function(){return o()})},r.clipLine=UE,r.clone=function(o){var c=new Ai(16);return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c},r.clone$1=de,r.clone$2=function(o){var c=new Ai(3);return c[0]=o[0],c[1]=o[1],c[2]=o[2],c},r.collisionCircleLayout=kF,r.config=Ca,r.create=function(){var o=new Ai(16);return Ai!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},r.create$1=function(){var o=new Ai(9);return Ai!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o},r.create$2=function(){var o=new Ai(4);return Ai!=Float32Array&&(o[1]=0,o[2]=0),o[0]=1,o[3]=1,o},r.createCommonjsModule=l,r.createExpression=lp,r.createLayout=Cr,r.createStyleLayer=function(o){return o.type==="custom"?new cD(o):new dD[o.type](o)},r.cross=function(o,c,h){var y=c[0],x=c[1],I=c[2],A=h[0],R=h[1],B=h[2];return o[0]=x*B-I*R,o[1]=I*A-y*B,o[2]=y*R-x*A,o},r.deepEqual=function o(c,h){if(Array.isArray(c)){if(!Array.isArray(h)||c.length!==h.length)return!1;for(var y=0;y<c.length;y++)if(!o(c[y],h[y]))return!1;return!0}if(typeof c=="object"&&c!==null&&h!==null){if(typeof h!="object"||Object.keys(c).length!==Object.keys(h).length)return!1;for(var x in c)if(!o(c[x],h[x]))return!1;return!0}return c===h},r.dot=function(o,c){return o[0]*c[0]+o[1]*c[1]+o[2]*c[2]},r.dot$1=function(o,c){return o[0]*c[0]+o[1]*c[1]+o[2]*c[2]+o[3]*c[3]},r.ease=T,r.emitValidationErrors=A_,r.endsWith=J,r.enforceCacheSizeLimit=function(o){En(),Et&&Et.then(function(c){c.keys().then(function(h){for(var y=0;y<h.length-o;y++)c.delete(h[y])})})},r.evaluateSizeForFeature=NE,r.evaluateSizeForZoom=FE,r.evaluateVariableOffset=qE,r.evented=oy,r.extend=P,r.featureFilter=cp,r.filterObject=se,r.fromRotation=function(o,c){var h=Math.sin(c),y=Math.cos(c);return o[0]=y,o[1]=h,o[2]=0,o[3]=-h,o[4]=y,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},r.getAnchorAlignment=yC,r.getAnchorJustification=xC,r.getArrayBuffer=pn,r.getImage=j,r.getJSON=function(o,c){return al(P(o,{type:"json"}),c)},r.getRTLTextPluginStatus=ly,r.getReferrer=gs,r.getVideo=function(o,c){var h,y,x=v.document.createElement("video");x.muted=!0,x.onloadstart=function(){c(null,x)};for(var I=0;I<o.length;I++){var A=v.document.createElement("source");h=o[I],y=void 0,(y=v.document.createElement("a")).href=h,(y.protocol!==v.document.location.protocol||y.host!==v.document.location.host)&&(x.crossOrigin="Anonymous"),A.src=o[I],x.appendChild(A)}return{cancel:function(){}}},r.identity=so,r.invert=function(o,c){var h=c[0],y=c[1],x=c[2],I=c[3],A=c[4],R=c[5],B=c[6],D=c[7],z=c[8],X=c[9],Q=c[10],ie=c[11],ge=c[12],fe=c[13],ke=c[14],Ce=c[15],Be=h*R-y*A,Ze=h*B-x*A,Ue=h*D-I*A,Ke=y*B-x*R,ot=y*D-I*R,vt=x*D-I*B,Mt=z*fe-X*ge,ra=z*ke-Q*ge,Dt=z*Ce-ie*ge,da=X*ke-Q*fe,Vt=X*Ce-ie*fe,Ha=Q*Ce-ie*ke,ya=Be*Ha-Ze*Vt+Ue*da+Ke*Dt-ot*ra+vt*Mt;return ya?(o[0]=(R*Ha-B*Vt+D*da)*(ya=1/ya),o[1]=(x*Vt-y*Ha-I*da)*ya,o[2]=(fe*vt-ke*ot+Ce*Ke)*ya,o[3]=(Q*ot-X*vt-ie*Ke)*ya,o[4]=(B*Dt-A*Ha-D*ra)*ya,o[5]=(h*Ha-x*Dt+I*ra)*ya,o[6]=(ke*Ue-ge*vt-Ce*Ze)*ya,o[7]=(z*vt-Q*Ue+ie*Ze)*ya,o[8]=(A*Vt-R*Dt+D*Mt)*ya,o[9]=(y*Dt-h*Vt-I*Mt)*ya,o[10]=(ge*ot-fe*Ue+Ce*Be)*ya,o[11]=(X*Ue-z*ot-ie*Be)*ya,o[12]=(R*ra-A*da-B*Mt)*ya,o[13]=(h*da-y*ra+x*Mt)*ya,o[14]=(fe*Ze-ge*Ke-ke*Be)*ya,o[15]=(z*Ke-X*Ze+Q*Be)*ya,o):null},r.isChar=Pt,r.isMapboxURL=ut,r.keysDifference=function(o,c){var h=[];for(var y in o)y in c||h.push(y);return h},r.makeRequest=al,r.mapObject=ne,r.mercatorXfromLng=iM,r.mercatorYfromLat=nM,r.mercatorZfromAltitude=rM,r.mul=sC,r.multiply=bs,r.mvt=Tp,r.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},r.normalize=function(o,c){var h=c[0],y=c[1],x=c[2],I=h*h+y*y+x*x;return I>0&&(I=1/Math.sqrt(I)),o[0]=c[0]*I,o[1]=c[1]*I,o[2]=c[2]*I,o},r.number=Yn,r.offscreenCanvasSupported=Cn,r.ortho=function(o,c,h,y,x,I,A){var R=1/(c-h),B=1/(y-x),D=1/(I-A);return o[0]=-2*R,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*B,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*D,o[11]=0,o[12]=(c+h)*R,o[13]=(x+y)*B,o[14]=(A+I)*D,o[15]=1,o},r.parseGlyphPBF=function(o){return new Qb(o).readFields(zF,[])},r.pbf=Qb,r.performSymbolLayout=function(o,c,h,y,x,I,A){o.createArrays(),o.tilePixelRatio=8192/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;var R=o.layers[0].layout,B=o.layers[0]._unevaluatedLayout._values,D={};if(o.textSizeData.kind==="composite"){var z=o.textSizeData,X=z.maxZoom;D.compositeTextSizes=[B["text-size"].possiblyEvaluate(new ei(z.minZoom),A),B["text-size"].possiblyEvaluate(new ei(X),A)]}if(o.iconSizeData.kind==="composite"){var Q=o.iconSizeData,ie=Q.maxZoom;D.compositeIconSizes=[B["icon-size"].possiblyEvaluate(new ei(Q.minZoom),A),B["icon-size"].possiblyEvaluate(new ei(ie),A)]}D.layoutTextSize=B["text-size"].possiblyEvaluate(new ei(o.zoom+1),A),D.layoutIconSize=B["icon-size"].possiblyEvaluate(new ei(o.zoom+1),A),D.textMaxSize=B["text-size"].possiblyEvaluate(new ei(18));for(var ge=24*R.get("text-line-height"),fe=R.get("text-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",ke=R.get("text-keep-upright"),Ce=R.get("text-size"),Be=function(){var Ke=Ue[Ze],ot=R.get("text-font").evaluate(Ke,{},A).join(","),vt=Ce.evaluate(Ke,{},A),Mt=D.layoutTextSize.evaluate(Ke,{},A),ra=D.layoutIconSize.evaluate(Ke,{},A),Dt={horizontal:{},vertical:void 0},da=Ke.text,Vt=[0,0];if(da){var Ha=da.toString(),ya=24*R.get("text-letter-spacing").evaluate(Ke,{},A),ea=function(ri){for(var Xi=0,Wi=ri;Xi<Wi.length;Xi+=1)if(yi=Wi[Xi].charCodeAt(0),Pt.Arabic(yi)||Pt["Arabic Supplement"](yi)||Pt["Arabic Extended-A"](yi)||Pt["Arabic Presentation Forms-A"](yi)||Pt["Arabic Presentation Forms-B"](yi))return!1;var yi;return!0}(Ha)?ya:0,$a=R.get("text-anchor").evaluate(Ke,{},A),Fa=R.get("text-variable-anchor");if(!Fa){var pi=R.get("text-radial-offset").evaluate(Ke,{},A);Vt=pi?qE($a,[24*pi,vC]):R.get("text-offset").evaluate(Ke,{},A).map(function(ri){return 24*ri})}var ha=fe?"center":R.get("text-justify").evaluate(Ke,{},A),Ci=R.get("symbol-placement"),bn=Ci==="point"?24*R.get("text-max-width").evaluate(Ke,{},A):0,On=function(){o.allowVerticalPlacement&&ry(Ha)&&(Dt.vertical=av(da,c,h,x,ot,bn,ge,$a,"left",ea,Vt,Wo.vertical,!0,Ci,Mt,vt))};if(!fe&&Fa){for(var Ln=ha==="auto"?Fa.map(function(ri){return xC(ri)}):[ha],vn=!1,Pn=0;Pn<Ln.length;Pn++){var pr=Ln[Pn];if(!Dt.horizontal[pr])if(vn)Dt.horizontal[pr]=Dt.horizontal[0];else{var gr=av(da,c,h,x,ot,bn,ge,"center",pr,ea,Vt,Wo.horizontal,!1,Ci,Mt,vt);gr&&(Dt.horizontal[pr]=gr,vn=gr.positionedLines.length===1)}}On()}else{ha==="auto"&&(ha=xC($a));var ls=av(da,c,h,x,ot,bn,ge,$a,ha,ea,Vt,Wo.horizontal,!1,Ci,Mt,vt);ls&&(Dt.horizontal[ha]=ls),On(),ry(Ha)&&fe&&ke&&(Dt.vertical=av(da,c,h,x,ot,bn,ge,$a,ha,ea,Vt,Wo.vertical,!1,Ci,Mt,vt))}}var Tr=void 0,us=!1;if(Ke.icon&&Ke.icon.name){var Zn=y[Ke.icon.name];Zn&&(Tr=function(ri,Xi,Wi){var yi=yC(Wi),xs=Xi[0]-ri.displaySize[0]*yi.horizontalAlign,Kr=Xi[1]-ri.displaySize[1]*yi.verticalAlign;return{image:ri,top:Kr,bottom:Kr+ri.displaySize[1],left:xs,right:xs+ri.displaySize[0]}}(x[Ke.icon.name],R.get("icon-offset").evaluate(Ke,{},A),R.get("icon-anchor").evaluate(Ke,{},A)),us=Zn.sdf,o.sdfIcons===void 0?o.sdfIcons=Zn.sdf:o.sdfIcons!==Zn.sdf&&Se("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Zn.pixelRatio!==o.pixelRatio||R.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}var Er=KE(Dt.horizontal)||Dt.vertical;o.iconsInText=!!Er&&Er.iconsInText,(Er||Tr)&&function(ri,Xi,Wi,yi,xs,Kr,ln,jn,jr,Si,Ku){var Go=Kr.textMaxSize.evaluate(Xi,{});Go===void 0&&(Go=ln);var ju,zn=ri.layers[0].layout,$u=zn.get("icon-offset").evaluate(Xi,{},Ku),Ll=KE(Wi.horizontal),Np=ln/24,D_=ri.tilePixelRatio*Np,Fp=ri.tilePixelRatio*Go/24,ed=ri.tilePixelRatio*jn,Dp=ri.tilePixelRatio*zn.get("symbol-spacing"),hv=zn.get("text-padding")*ri.tilePixelRatio,Vp=zn.get("icon-padding")*ri.tilePixelRatio,Ay=zn.get("text-max-angle")/180*Math.PI,_v=zn.get("text-rotation-alignment")==="map"&&zn.get("symbol-placement")!=="point",mv=zn.get("icon-rotation-alignment")==="map"&&zn.get("symbol-placement")!=="point",td=zn.get("symbol-placement"),Ty=Dp/2,Zp=zn.get("icon-text-fit");yi&&Zp!=="none"&&(ri.allowVerticalPlacement&&Wi.vertical&&(ju=BE(yi,Wi.vertical,Zp,zn.get("icon-text-fit-padding"),$u,Np)),Ll&&(yi=BE(yi,Ll,Zp,zn.get("icon-text-fit-padding"),$u,Np)));var hh=function(_D,Oy){Oy.x<0||Oy.x>=8192||Oy.y<0||Oy.y>=8192||function(Un,nu,mD,_h,LC,hM,vv,Ju,xv,Py,wv,Iv,RC,_M,By,mM,pM,gM,fM,yM,Oo,Cv,bM,Qu,pD){var vM,Z_,qp,Yp,Kp,jp=Un.addToLineVertexArray(nu,mD),xM=0,wM=0,IM=0,CM=0,kC=-1,WC=-1,ad={},SM=pe(""),GC=0,OC=0;if(Ju._unevaluatedLayout.getValue("text-radial-offset")===void 0?(GC=(vM=Ju.layout.get("text-offset").evaluate(Oo,{},Qu).map(function(Fy){return 24*Fy}))[0],OC=vM[1]):(GC=24*Ju.layout.get("text-radial-offset").evaluate(Oo,{},Qu),OC=vC),Un.allowVerticalPlacement&&_h.vertical){var AM=Ju.layout.get("text-rotate").evaluate(Oo,{},Qu)+90;Yp=new ov(xv,nu,Py,wv,Iv,_h.vertical,RC,_M,By,AM),vv&&(Kp=new ov(xv,nu,Py,wv,Iv,vv,pM,gM,By,AM))}if(LC){var PC=Ju.layout.get("icon-rotate").evaluate(Oo,{}),TM=Ju.layout.get("icon-text-fit")!=="none",EM=HE(LC,PC,bM,TM),BC=vv?HE(vv,PC,bM,TM):void 0;qp=new ov(xv,nu,Py,wv,Iv,LC,pM,gM,!1,PC),xM=4*EM.length;var MM=Un.iconSizeData,Ny=null;MM.kind==="source"?(Ny=[128*Ju.layout.get("icon-size").evaluate(Oo,{})])[0]>32640&&Se(Un.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):MM.kind==="composite"&&((Ny=[128*Cv.compositeIconSizes[0].evaluate(Oo,{},Qu),128*Cv.compositeIconSizes[1].evaluate(Oo,{},Qu)])[0]>32640||Ny[1]>32640)&&Se(Un.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Un.addSymbols(Un.icon,EM,Ny,yM,fM,Oo,!1,nu,jp.lineStartIndex,jp.lineLength,-1,Qu),kC=Un.icon.placedSymbolArray.length-1,BC&&(wM=4*BC.length,Un.addSymbols(Un.icon,BC,Ny,yM,fM,Oo,Wo.vertical,nu,jp.lineStartIndex,jp.lineLength,-1,Qu),WC=Un.icon.placedSymbolArray.length-1)}for(var LM in _h.horizontal){var Sv=_h.horizontal[LM];if(!Z_){SM=pe(Sv.text);var gD=Ju.layout.get("text-rotate").evaluate(Oo,{},Qu);Z_=new ov(xv,nu,Py,wv,Iv,Sv,RC,_M,By,gD)}var RM=Sv.positionedLines.length===1;if(IM+=YE(Un,nu,Sv,hM,Ju,By,Oo,mM,jp,_h.vertical?Wo.horizontal:Wo.horizontalOnly,RM?Object.keys(_h.horizontal):[LM],ad,kC,Cv,Qu),RM)break}_h.vertical&&(CM+=YE(Un,nu,_h.vertical,hM,Ju,By,Oo,mM,jp,Wo.vertical,["vertical"],ad,WC,Cv,Qu));var fD=Z_?Z_.boxStartIndex:Un.collisionBoxArray.length,yD=Z_?Z_.boxEndIndex:Un.collisionBoxArray.length,bD=Yp?Yp.boxStartIndex:Un.collisionBoxArray.length,vD=Yp?Yp.boxEndIndex:Un.collisionBoxArray.length,xD=qp?qp.boxStartIndex:Un.collisionBoxArray.length,wD=qp?qp.boxEndIndex:Un.collisionBoxArray.length,ID=Kp?Kp.boxStartIndex:Un.collisionBoxArray.length,CD=Kp?Kp.boxEndIndex:Un.collisionBoxArray.length,ec=-1,Av=function(Fy,WM){return Fy&&Fy.circleDiameter?Math.max(Fy.circleDiameter,WM):WM};ec=Av(Z_,ec),ec=Av(Yp,ec),ec=Av(qp,ec);var kM=(ec=Av(Kp,ec))>-1?1:0;kM&&(ec*=pD/24),Un.glyphOffsetArray.length>=Ni.MAX_GLYPHS&&Se("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Oo.sortKey!==void 0&&Un.addToSortKeyRanges(Un.symbolInstances.length,Oo.sortKey),Un.symbolInstances.emplaceBack(nu.x,nu.y,ad.right>=0?ad.right:-1,ad.center>=0?ad.center:-1,ad.left>=0?ad.left:-1,ad.vertical||-1,kC,WC,SM,fD,yD,bD,vD,xD,wD,ID,CD,Py,IM,CM,xM,wM,kM,0,RC,GC,OC,ec)}(ri,Oy,_D,Wi,yi,xs,ju,ri.layers[0],ri.collisionBoxArray,Xi.index,Xi.sourceLayerIndex,ri.index,D_,hv,_v,jr,ed,Vp,mv,$u,Xi,Kr,Si,Ku,ln)};if(td==="line")for(var zp=0,pv=UE(Xi.geometry,0,0,8192,8192);zp<pv.length;zp+=1)for(var gv=pv[zp],Ey=0,My=jF(gv,Dp,Ay,Wi.vertical||Ll,yi,24,Fp,ri.overscaling,8192);Ey<My.length;Ey+=1){var fv=My[Ey];Ll&&eD(ri,Ll.text,Ty,fv)||hh(gv,fv)}else if(td==="line-center")for(var Ly=0,Ry=Xi.geometry;Ly<Ry.length;Ly+=1){var ky=Ry[Ly];if(ky.length>1){var yv=KF(ky,Ay,Wi.vertical||Ll,yi,24,Fp);yv&&hh(ky,yv)}}else if(Xi.type==="Polygon")for(var Up=0,bv=_C(Xi.geometry,0);Up<bv.length;Up+=1){var Hp=bv[Up],Wy=JF(Hp,16);hh(Hp[0],new Rp(Wy.x,Wy.y,0))}else if(Xi.type==="LineString")for(var V_=0,Gy=Xi.geometry;V_<Gy.length;V_+=1){var Xp=Gy[V_];hh(Xp,new Rp(Xp[0].x,Xp[0].y,0))}else if(Xi.type==="Point")for(var TC=0,cM=Xi.geometry;TC<cM.length;TC+=1)for(var EC=0,dM=cM[TC];EC<dM.length;EC+=1){var MC=dM[EC];hh([MC],new Rp(MC.x,MC.y,0))}}(o,Ke,Dt,Tr,y,D,Mt,ra,Vt,us,A)},Ze=0,Ue=o.features;Ze<Ue.length;Ze+=1)Be();I&&o.generateCollisionDebugBuffers()},r.perspective=function(o,c,h,y,x){var I,A=1/Math.tan(c/2);return o[0]=A/h,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=A,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,x!=null&&x!==1/0?(o[10]=(x+y)*(I=1/(y-x)),o[14]=2*x*y*I):(o[10]=-1,o[14]=-2*y),o},r.pick=function(o,c){for(var h={},y=0;y<c.length;y++){var x=c[y];x in o&&(h[x]=o[x])}return h},r.plugin=ro,r.polygonIntersectsPolygon=Xu,r.postMapLoadEvent=Tn,r.postTurnstileEvent=mi,r.potpack=WE,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=Yt,r.registerForPluginStateChange=function(o){return o({pluginStatus:Os,pluginURL:Ql}),oy.on("pluginStateChange",o),o},r.renderColorRamp=mE,r.rotate=function(o,c,h){var y=c[0],x=c[1],I=c[2],A=c[3],R=Math.sin(h),B=Math.cos(h);return o[0]=y*B+I*R,o[1]=x*B+A*R,o[2]=y*-R+I*B,o[3]=x*-R+A*B,o},r.rotateX=function(o,c,h){var y=Math.sin(h),x=Math.cos(h),I=c[4],A=c[5],R=c[6],B=c[7],D=c[8],z=c[9],X=c[10],Q=c[11];return c!==o&&(o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15]),o[4]=I*x+D*y,o[5]=A*x+z*y,o[6]=R*x+X*y,o[7]=B*x+Q*y,o[8]=D*x-I*y,o[9]=z*x-A*y,o[10]=X*x-R*y,o[11]=Q*x-B*y,o},r.rotateZ=function(o,c,h){var y=Math.sin(h),x=Math.cos(h),I=c[0],A=c[1],R=c[2],B=c[3],D=c[4],z=c[5],X=c[6],Q=c[7];return c!==o&&(o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15]),o[0]=I*x+D*y,o[1]=A*x+z*y,o[2]=R*x+X*y,o[3]=B*x+Q*y,o[4]=D*x-I*y,o[5]=z*x-A*y,o[6]=X*x-R*y,o[7]=Q*x-B*y,o},r.scale=function(o,c,h){var y=h[0],x=h[1],I=h[2];return o[0]=c[0]*y,o[1]=c[1]*y,o[2]=c[2]*y,o[3]=c[3]*y,o[4]=c[4]*x,o[5]=c[5]*x,o[6]=c[6]*x,o[7]=c[7]*x,o[8]=c[8]*I,o[9]=c[9]*I,o[10]=c[10]*I,o[11]=c[11]*I,o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o},r.scale$1=function(o,c,h){return o[0]=c[0]*h,o[1]=c[1]*h,o[2]=c[2]*h,o[3]=c[3]*h,o},r.scale$2=function(o,c,h){return o[0]=c[0]*h,o[1]=c[1]*h,o[2]=c[2]*h,o},r.setCacheLimits=function(o,c){Ki=o,qn=c},r.setRTLTextPlugin=function(o,c,h){if(h===void 0&&(h=!1),Os==="deferred"||Os==="loading"||Os==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ql=ui.resolveURL(o),Os="deferred",fp=c,E_(),h||sl()},r.sphericalToCartesian=function(o){var c=o[0],h=o[1],y=o[2];return h+=90,h*=Math.PI/180,y*=Math.PI/180,{x:c*Math.cos(h)*Math.sin(y),y:c*Math.sin(h)*Math.sin(y),z:c*Math.cos(y)}},r.sqrLen=function(o){var c=o[0],h=o[1];return c*c+h*h},r.styleSpec=ae,r.sub=function(o,c,h){return o[0]=c[0]-h[0],o[1]=c[1]-h[1],o[2]=c[2]-h[2],o},r.symbolSize=YF,r.transformMat3=function(o,c,h){var y=c[0],x=c[1],I=c[2];return o[0]=y*h[0]+x*h[3]+I*h[6],o[1]=y*h[1]+x*h[4]+I*h[7],o[2]=y*h[2]+x*h[5]+I*h[8],o},r.transformMat4=Ip,r.translate=function(o,c,h){var y,x,I,A,R,B,D,z,X,Q,ie,ge,fe=h[0],ke=h[1],Ce=h[2];return c===o?(o[12]=c[0]*fe+c[4]*ke+c[8]*Ce+c[12],o[13]=c[1]*fe+c[5]*ke+c[9]*Ce+c[13],o[14]=c[2]*fe+c[6]*ke+c[10]*Ce+c[14],o[15]=c[3]*fe+c[7]*ke+c[11]*Ce+c[15]):(x=c[1],I=c[2],A=c[3],R=c[4],B=c[5],D=c[6],z=c[7],X=c[8],Q=c[9],ie=c[10],ge=c[11],o[0]=y=c[0],o[1]=x,o[2]=I,o[3]=A,o[4]=R,o[5]=B,o[6]=D,o[7]=z,o[8]=X,o[9]=Q,o[10]=ie,o[11]=ge,o[12]=y*fe+R*ke+X*Ce+c[12],o[13]=x*fe+B*ke+Q*Ce+c[13],o[14]=I*fe+D*ke+ie*Ce+c[14],o[15]=A*fe+z*ke+ge*Ce+c[15]),o},r.triggerPluginCompletionEvent=Xb,r.uniqueId=N,r.validateCustomStyleLayer=function(o){var c=[],h=o.id;return h===void 0&&c.push({message:"layers."+h+': missing required property "id"'}),o.render===void 0&&c.push({message:"layers."+h+': missing required method "render"'}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&c.push({message:"layers."+h+': property "renderingMode" must be either "2d" or "3d"'}),c},r.validateLight=nC,r.validateStyle=C_,r.values=function(o){var c=[];for(var h in o)c.push(o[h]);return c},r.vectorTile=Tp,r.version="1.13.3",r.warnOnce=Se,r.webpSupported=ii,r.window=v,r.wrap=G}),s(["./shared"],function(r){function l(H){var j=typeof H;if(j==="number"||j==="boolean"||j==="string"||H==null)return JSON.stringify(H);if(Array.isArray(H)){for(var ee="[",le=0,me=H;le<me.length;le+=1)ee+=l(me[le])+",";return ee+"]"}for(var Le=Object.keys(H).sort(),Te="{",ae=0;ae<Le.length;ae++)Te+=JSON.stringify(Le[ae])+":"+l(H[Le[ae]])+",";return Te+"}"}function u(H){for(var j="",ee=0,le=r.refProperties;ee<le.length;ee+=1)j+="/"+l(H[le[ee]]);return j}var d=function(H){this.keyCache={},H&&this.replace(H)};d.prototype.replace=function(H){this._layerConfigs={},this._layers={},this.update(H,[])},d.prototype.update=function(H,j){for(var ee=this,le=0,me=H;le<me.length;le+=1){var Le=me[le];this._layerConfigs[Le.id]=Le;var Te=this._layers[Le.id]=r.createStyleLayer(Le);Te._featureFilter=r.featureFilter(Te.filter),this.keyCache[Le.id]&&delete this.keyCache[Le.id]}for(var ae=0,ye=j;ae<ye.length;ae+=1){var Ne=ye[ae];delete this.keyCache[Ne],delete this._layerConfigs[Ne],delete this._layers[Ne]}this.familiesBySource={};for(var ct=0,ft=function(Rt,Wt){for(var Va={},rt=0;rt<Rt.length;rt++){var Re=Wt&&Wt[Rt[rt].id]||u(Rt[rt]);Wt&&(Wt[Rt[rt].id]=Re);var dt=Va[Re];dt||(dt=Va[Re]=[]),dt.push(Rt[rt])}var mt=[];for(var la in Va)mt.push(Va[la]);return mt}(r.values(this._layerConfigs),this.keyCache);ct<ft.length;ct+=1){var Je=ft[ct].map(function(Rt){return ee._layers[Rt.id]}),_t=Je[0];if(_t.visibility!=="none"){var Xt=_t.source||"",Bt=this.familiesBySource[Xt];Bt||(Bt=this.familiesBySource[Xt]={});var tt=_t.sourceLayer||"_geojsonTileLayer",Ft=Bt[tt];Ft||(Ft=Bt[tt]=[]),Ft.push(Je)}}};var m=function(H){var j={},ee=[];for(var le in H){var me=H[le],Le=j[le]={};for(var Te in me){var ae=me[+Te];if(ae&&ae.bitmap.width!==0&&ae.bitmap.height!==0){var ye={x:0,y:0,w:ae.bitmap.width+2,h:ae.bitmap.height+2};ee.push(ye),Le[Te]={rect:ye,metrics:ae.metrics}}}}var Ne=r.potpack(ee),ct=new r.AlphaImage({width:Ne.w||1,height:Ne.h||1});for(var ft in H){var Je=H[ft];for(var _t in Je){var Xt=Je[+_t];if(Xt&&Xt.bitmap.width!==0&&Xt.bitmap.height!==0){var Bt=j[ft][_t].rect;r.AlphaImage.copy(Xt.bitmap,ct,{x:0,y:0},{x:Bt.x+1,y:Bt.y+1},Xt.bitmap)}}}this.image=ct,this.positions=j};r.register("GlyphAtlas",m);var f=function(H){this.tileID=new r.OverscaledTileID(H.tileID.overscaledZ,H.tileID.wrap,H.tileID.canonical.z,H.tileID.canonical.x,H.tileID.canonical.y),this.uid=H.uid,this.zoom=H.zoom,this.pixelRatio=H.pixelRatio,this.tileSize=H.tileSize,this.source=H.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=H.showCollisionBoxes,this.collectResourceTiming=!!H.collectResourceTiming,this.returnDependencies=!!H.returnDependencies,this.promoteId=H.promoteId};function v(H,j,ee){for(var le=new r.EvaluationParameters(j),me=0,Le=H;me<Le.length;me+=1)Le[me].recalculate(le,ee)}function w(H,j){var ee=r.getArrayBuffer(H.request,function(le,me,Le,Te){le?j(le):me&&j(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(me)),rawData:me,cacheControl:Le,expires:Te})});return function(){ee.cancel(),j()}}f.prototype.parse=function(H,j,ee,le,me){var Le=this;this.status="parsing",this.data=H,this.collisionBoxArray=new r.CollisionBoxArray;var Te=new r.DictionaryCoder(Object.keys(H.layers).sort()),ae=new r.FeatureIndex(this.tileID,this.promoteId);ae.bucketLayerIDs=[];var ye,Ne,ct,ft,Je={},_t={featureIndex:ae,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ee},Xt=j.familiesBySource[this.source];for(var Bt in Xt){var tt=H.layers[Bt];if(tt){tt.version===1&&r.warnOnce('Vector tile source "'+this.source+'" layer "'+Bt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ft=Te.encode(Bt),Rt=[],Wt=0;Wt<tt.length;Wt++){var Va=tt.feature(Wt),rt=ae.getId(Va,Bt);Rt.push({feature:Va,id:rt,index:Wt,sourceLayerIndex:Ft})}for(var Re=0,dt=Xt[Bt];Re<dt.length;Re+=1){var mt=dt[Re],la=mt[0];la.minzoom&&this.zoom<Math.floor(la.minzoom)||la.maxzoom&&this.zoom>=la.maxzoom||la.visibility!=="none"&&(v(mt,this.zoom,ee),(Je[la.id]=la.createBucket({index:ae.bucketLayerIDs.length,layers:mt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ft,sourceID:this.source})).populate(Rt,_t,this.tileID.canonical),ae.bucketLayerIDs.push(mt.map(function(Oa){return Oa.id})))}}}var Ea=r.mapObject(_t.glyphDependencies,function(Oa){return Object.keys(Oa).map(Number)});Object.keys(Ea).length?le.send("getGlyphs",{uid:this.uid,stacks:Ea},function(Oa,Ya){ye||(ye=Oa,Ne=Ya,Ui.call(Le))}):Ne={};var ki=Object.keys(_t.iconDependencies);ki.length?le.send("getImages",{icons:ki,source:this.source,tileID:this.tileID,type:"icons"},function(Oa,Ya){ye||(ye=Oa,ct=Ya,Ui.call(Le))}):ct={};var Ga=Object.keys(_t.patternDependencies);function Ui(){if(ye)return me(ye);if(Ne&&ct&&ft){var Oa=new m(Ne),Ya=new r.ImageAtlas(ct,ft);for(var gi in Je){var ts=Je[gi];ts instanceof r.SymbolBucket?(v(ts.layers,this.zoom,ee),r.performSymbolLayout(ts,Ne,Oa.positions,ct,Ya.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ts.hasPattern&&(ts instanceof r.LineBucket||ts instanceof r.FillBucket||ts instanceof r.FillExtrusionBucket)&&(v(ts.layers,this.zoom,ee),ts.addFeatures(_t,this.tileID.canonical,Ya.patternPositions))}this.status="done",me(null,{buckets:r.values(Je).filter(function(h_){return!h_.isEmpty()}),featureIndex:ae,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Oa.image,imageAtlas:Ya,glyphMap:this.returnDependencies?Ne:null,iconMap:this.returnDependencies?ct:null,glyphPositions:this.returnDependencies?Oa.positions:null})}}Ga.length?le.send("getImages",{icons:Ga,source:this.source,tileID:this.tileID,type:"patterns"},function(Oa,Ya){ye||(ye=Oa,ft=Ya,Ui.call(Le))}):ft={},Ui.call(this)};var S=function(H,j,ee,le){this.actor=H,this.layerIndex=j,this.availableImages=ee,this.loadVectorData=le||w,this.loading={},this.loaded={}};S.prototype.loadTile=function(H,j){var ee=this,le=H.uid;this.loading||(this.loading={});var me=!!(H&&H.request&&H.request.collectResourceTiming)&&new r.RequestPerformance(H.request),Le=this.loading[le]=new f(H);Le.abort=this.loadVectorData(H,function(Te,ae){if(delete ee.loading[le],Te||!ae)return Le.status="done",ee.loaded[le]=Le,j(Te);var ye=ae.rawData,Ne={};ae.expires&&(Ne.expires=ae.expires),ae.cacheControl&&(Ne.cacheControl=ae.cacheControl);var ct={};if(me){var ft=me.finish();ft&&(ct.resourceTiming=JSON.parse(JSON.stringify(ft)))}Le.vectorTile=ae.vectorTile,Le.parse(ae.vectorTile,ee.layerIndex,ee.availableImages,ee.actor,function(Je,_t){if(Je||!_t)return j(Je);j(null,r.extend({rawTileData:ye.slice(0)},_t,Ne,ct))}),ee.loaded=ee.loaded||{},ee.loaded[le]=Le})},S.prototype.reloadTile=function(H,j){var ee=this,le=this.loaded,me=H.uid,Le=this;if(le&&le[me]){var Te=le[me];Te.showCollisionBoxes=H.showCollisionBoxes;var ae=function(ye,Ne){var ct=Te.reloadCallback;ct&&(delete Te.reloadCallback,Te.parse(Te.vectorTile,Le.layerIndex,ee.availableImages,Le.actor,ct)),j(ye,Ne)};Te.status==="parsing"?Te.reloadCallback=ae:Te.status==="done"&&(Te.vectorTile?Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,ae):ae())}},S.prototype.abortTile=function(H,j){var ee=this.loading,le=H.uid;ee&&ee[le]&&ee[le].abort&&(ee[le].abort(),delete ee[le]),j()},S.prototype.removeTile=function(H,j){var ee=this.loaded,le=H.uid;ee&&ee[le]&&delete ee[le],j()};var T=r.window.ImageBitmap,M=function(){this.loaded={}};function G(H,j){if(H.length!==0){P(H[0],j);for(var ee=1;ee<H.length;ee++)P(H[ee],!j)}}function P(H,j){for(var ee=0,le=0,me=0,Le=H.length,Te=Le-1;me<Le;Te=me++){var ae=(H[me][0]-H[Te][0])*(H[Te][1]+H[me][1]),ye=ee+ae;le+=Math.abs(ee)>=Math.abs(ae)?ee-ye+ae:ae-ye+ee,ee=ye}ee+le>=0!=!!j&&H.reverse()}M.prototype.loadTile=function(H,j){var ee=H.uid,le=H.encoding,me=H.rawImageData,Le=T&&me instanceof T?this.getImageData(me):me,Te=new r.DEMData(ee,Le,le);this.loaded=this.loaded||{},this.loaded[ee]=Te,j(null,Te)},M.prototype.getImageData=function(H){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(H.width,H.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=H.width,this.offscreenCanvas.height=H.height,this.offscreenCanvasContext.drawImage(H,0,0,H.width,H.height);var j=this.offscreenCanvasContext.getImageData(-1,-1,H.width+2,H.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:j.width,height:j.height},j.data)},M.prototype.removeTile=function(H){var j=this.loaded,ee=H.uid;j&&j[ee]&&delete j[ee]};var F=r.vectorTile.VectorTileFeature.prototype.toGeoJSON,N=function(H){this._feature=H,this.extent=r.EXTENT,this.type=H.type,this.properties=H.tags,"id"in H&&!isNaN(H.id)&&(this.id=parseInt(H.id,10))};N.prototype.loadGeometry=function(){if(this._feature.type===1){for(var H=[],j=0,ee=this._feature.geometry;j<ee.length;j+=1){var le=ee[j];H.push([new r.Point$1(le[0],le[1])])}return H}for(var me=[],Le=0,Te=this._feature.geometry;Le<Te.length;Le+=1){for(var ae=[],ye=0,Ne=Te[Le];ye<Ne.length;ye+=1){var ct=Ne[ye];ae.push(new r.Point$1(ct[0],ct[1]))}me.push(ae)}return me},N.prototype.toGeoJSON=function(H,j,ee){return F.call(this,H,j,ee)};var V=function(H){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=H.length,this._features=H};V.prototype.feature=function(H){return new N(this._features[H])};var K=r.vectorTile.VectorTileFeature,te=J;function J(H,j){this.options=j||{},this.features=H,this.length=H.length}function ne(H,j){this.id=typeof H.id=="number"?H.id:void 0,this.type=H.type,this.rawGeometry=H.type===1?[H.geometry]:H.geometry,this.properties=H.tags,this.extent=j||4096}J.prototype.feature=function(H){return new ne(this.features[H],this.options.extent)},ne.prototype.loadGeometry=function(){var H=this.rawGeometry;this.geometry=[];for(var j=0;j<H.length;j++){for(var ee=H[j],le=[],me=0;me<ee.length;me++)le.push(new r.Point$1(ee[me][0],ee[me][1]));this.geometry.push(le)}return this.geometry},ne.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var H=this.geometry,j=1/0,ee=-1/0,le=1/0,me=-1/0,Le=0;Le<H.length;Le++)for(var Te=H[Le],ae=0;ae<Te.length;ae++){var ye=Te[ae];j=Math.min(j,ye.x),ee=Math.max(ee,ye.x),le=Math.min(le,ye.y),me=Math.max(me,ye.y)}return[j,le,ee,me]},ne.prototype.toGeoJSON=K.prototype.toGeoJSON;var se=_e,de=te;function _e(H){var j=new r.pbf;return function(ee,le){for(var me in ee.layers)le.writeMessage(3,Se,ee.layers[me])}(H,j),j.finish()}function Se(H,j){var ee;j.writeVarintField(15,H.version||1),j.writeStringField(1,H.name||""),j.writeVarintField(5,H.extent||4096);var le={keys:[],values:[],keycache:{},valuecache:{}};for(ee=0;ee<H.length;ee++)le.feature=H.feature(ee),j.writeMessage(2,ce,le);var me=le.keys;for(ee=0;ee<me.length;ee++)j.writeStringField(3,me[ee]);var Le=le.values;for(ee=0;ee<Le.length;ee++)j.writeMessage(4,Ye,Le[ee])}function ce(H,j){var ee=H.feature;ee.id!==void 0&&j.writeVarintField(1,ee.id),j.writeMessage(2,Ie,H),j.writeVarintField(3,ee.type),j.writeMessage(4,Oe,ee)}function Ie(H,j){var ee=H.feature,le=H.keys,me=H.values,Le=H.keycache,Te=H.valuecache;for(var ae in ee.properties){var ye=Le[ae];ye===void 0&&(le.push(ae),Le[ae]=ye=le.length-1),j.writeVarint(ye);var Ne=ee.properties[ae],ct=typeof Ne;ct!=="string"&&ct!=="boolean"&&ct!=="number"&&(Ne=JSON.stringify(Ne));var ft=ct+":"+Ne,Je=Te[ft];Je===void 0&&(me.push(Ne),Te[ft]=Je=me.length-1),j.writeVarint(Je)}}function he(H,j){return(j<<3)+(7&H)}function we(H){return H<<1^H>>31}function Oe(H,j){for(var ee=H.loadGeometry(),le=H.type,me=0,Le=0,Te=ee.length,ae=0;ae<Te;ae++){var ye=ee[ae],Ne=1;le===1&&(Ne=ye.length),j.writeVarint(he(1,Ne));for(var ct=le===3?ye.length-1:ye.length,ft=0;ft<ct;ft++){ft===1&&le!==1&&j.writeVarint(he(2,ct-1));var Je=ye[ft].x-me,_t=ye[ft].y-Le;j.writeVarint(we(Je)),j.writeVarint(we(_t)),me+=Je,Le+=_t}le===3&&j.writeVarint(he(7,1))}}function Ye(H,j){var ee=typeof H;ee==="string"?j.writeStringField(1,H):ee==="boolean"?j.writeBooleanField(7,H):ee==="number"&&(H%1!=0?j.writeDoubleField(3,H):H<0?j.writeSVarintField(6,H):j.writeVarintField(5,H))}function at(H,j,ee,le){yt(H,ee,le),yt(j,2*ee,2*le),yt(j,2*ee+1,2*le+1)}function yt(H,j,ee){var le=H[j];H[j]=H[ee],H[ee]=le}function De(H,j,ee,le){var me=H-ee,Le=j-le;return me*me+Le*Le}se.fromVectorTileJs=_e,se.fromGeojsonVt=function(H,j){j=j||{};var ee={};for(var le in H)ee[le]=new te(H[le].features,j),ee[le].name=le,ee[le].version=j.version,ee[le].extent=j.extent;return _e({layers:ee})},se.GeoJSONWrapper=de;var jt=function(H){return H[0]},pa=function(H){return H[1]},$t=function(H,j,ee,le,me){j===void 0&&(j=jt),ee===void 0&&(ee=pa),le===void 0&&(le=64),me===void 0&&(me=Float64Array),this.nodeSize=le,this.points=H;for(var Le=H.length<65536?Uint16Array:Uint32Array,Te=this.ids=new Le(H.length),ae=this.coords=new me(2*H.length),ye=0;ye<H.length;ye++)Te[ye]=ye,ae[2*ye]=j(H[ye]),ae[2*ye+1]=ee(H[ye]);(function Ne(ct,ft,Je,_t,Xt,Bt){if(!(Xt-_t<=Je)){var tt=_t+Xt>>1;(function Ft(Rt,Wt,Va,rt,Re,dt){for(;Re>rt;){if(Re-rt>600){var mt=Re-rt+1,la=Va-rt+1,Ea=Math.log(mt),ki=.5*Math.exp(2*Ea/3),Ga=.5*Math.sqrt(Ea*ki*(mt-ki)/mt)*(la-mt/2<0?-1:1);Ft(Rt,Wt,Va,Math.max(rt,Math.floor(Va-la*ki/mt+Ga)),Math.min(Re,Math.floor(Va+(mt-la)*ki/mt+Ga)),dt)}var Ui=Wt[2*Va+dt],Oa=rt,Ya=Re;for(at(Rt,Wt,rt,Va),Wt[2*Re+dt]>Ui&&at(Rt,Wt,rt,Re);Oa<Ya;){for(at(Rt,Wt,Oa,Ya),Oa++,Ya--;Wt[2*Oa+dt]<Ui;)Oa++;for(;Wt[2*Ya+dt]>Ui;)Ya--}Wt[2*rt+dt]===Ui?at(Rt,Wt,rt,Ya):at(Rt,Wt,++Ya,Re),Ya<=Va&&(rt=Ya+1),Va<=Ya&&(Re=Ya-1)}})(ct,ft,tt,_t,Xt,Bt%2),Ne(ct,ft,Je,_t,tt-1,Bt+1),Ne(ct,ft,Je,tt+1,Xt,Bt+1)}})(Te,ae,le,0,Te.length-1,0)};$t.prototype.range=function(H,j,ee,le){return function(me,Le,Te,ae,ye,Ne,ct){for(var ft,Je,_t=[0,me.length-1,0],Xt=[];_t.length;){var Bt=_t.pop(),tt=_t.pop(),Ft=_t.pop();if(tt-Ft<=ct)for(var Rt=Ft;Rt<=tt;Rt++)Je=Le[2*Rt+1],(ft=Le[2*Rt])>=Te&&ft<=ye&&Je>=ae&&Je<=Ne&&Xt.push(me[Rt]);else{var Wt=Math.floor((Ft+tt)/2);Je=Le[2*Wt+1],(ft=Le[2*Wt])>=Te&&ft<=ye&&Je>=ae&&Je<=Ne&&Xt.push(me[Wt]);var Va=(Bt+1)%2;(Bt===0?Te<=ft:ae<=Je)&&(_t.push(Ft),_t.push(Wt-1),_t.push(Va)),(Bt===0?ye>=ft:Ne>=Je)&&(_t.push(Wt+1),_t.push(tt),_t.push(Va))}}return Xt}(this.ids,this.coords,H,j,ee,le,this.nodeSize)},$t.prototype.within=function(H,j,ee){return function(le,me,Le,Te,ae,ye){for(var Ne=[0,le.length-1,0],ct=[],ft=ae*ae;Ne.length;){var Je=Ne.pop(),_t=Ne.pop(),Xt=Ne.pop();if(_t-Xt<=ye)for(var Bt=Xt;Bt<=_t;Bt++)De(me[2*Bt],me[2*Bt+1],Le,Te)<=ft&&ct.push(le[Bt]);else{var tt=Math.floor((Xt+_t)/2),Ft=me[2*tt],Rt=me[2*tt+1];De(Ft,Rt,Le,Te)<=ft&&ct.push(le[tt]);var Wt=(Je+1)%2;(Je===0?Le-ae<=Ft:Te-ae<=Rt)&&(Ne.push(Xt),Ne.push(tt-1),Ne.push(Wt)),(Je===0?Le+ae>=Ft:Te+ae>=Rt)&&(Ne.push(tt+1),Ne.push(_t),Ne.push(Wt))}}return ct}(this.ids,this.coords,H,j,ee,this.nodeSize)};var Ua={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(H){return H}},bt=function(H){this.options=Ge(Object.create(Ua),H),this.trees=new Array(this.options.maxZoom+1)};function ui(H,j,ee,le,me){return{x:H,y:j,zoom:1/0,id:ee,parentId:-1,numPoints:le,properties:me}}function Ca(H,j){var ee=H.geometry.coordinates,le=ee[1];return{x:An(ee[0]),y:xe(le),zoom:1/0,index:j,parentId:-1}}function ii(H){return{type:"Feature",id:H.id,properties:zi(H),geometry:{type:"Point",coordinates:[(le=H.x,360*(le-.5)),(j=H.y,ee=(180-360*j)*Math.PI/180,360*Math.atan(Math.exp(ee))/Math.PI-90)]}};var j,ee,le}function zi(H){var j=H.numPoints,ee=j>=1e4?Math.round(j/1e3)+"k":j>=1e3?Math.round(j/100)/10+"k":j;return Ge(Ge({},H.properties),{cluster:!0,cluster_id:H.id,point_count:j,point_count_abbreviated:ee})}function An(H){return H/360+.5}function xe(H){var j=Math.sin(H*Math.PI/180),ee=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return ee<0?0:ee>1?1:ee}function Ge(H,j){for(var ee in j)H[ee]=j[ee];return H}function qe(H){return H.x}function ut(H){return H.y}function gt(H,j,ee,le,me,Le){var Te=me-ee,ae=Le-le;if(Te!==0||ae!==0){var ye=((H-ee)*Te+(j-le)*ae)/(Te*Te+ae*ae);ye>1?(ee=me,le=Le):ye>0&&(ee+=Te*ye,le+=ae*ye)}return(Te=H-ee)*Te+(ae=j-le)*ae}function Pe(H,j,ee,le){var me={id:H===void 0?null:H,type:j,geometry:ee,tags:le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Le){var Te=Le.geometry,ae=Le.type;if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")Qe(Le,Te);else if(ae==="Polygon"||ae==="MultiLineString")for(var ye=0;ye<Te.length;ye++)Qe(Le,Te[ye]);else if(ae==="MultiPolygon")for(ye=0;ye<Te.length;ye++)for(var Ne=0;Ne<Te[ye].length;Ne++)Qe(Le,Te[ye][Ne])}(me),me}function Qe(H,j){for(var ee=0;ee<j.length;ee+=3)H.minX=Math.min(H.minX,j[ee]),H.minY=Math.min(H.minY,j[ee+1]),H.maxX=Math.max(H.maxX,j[ee]),H.maxY=Math.max(H.maxY,j[ee+1])}function ze(H,j,ee,le){if(j.geometry){var me=j.geometry.coordinates,Le=j.geometry.type,Te=Math.pow(ee.tolerance/((1<<ee.maxZoom)*ee.extent),2),ae=[],ye=j.id;if(ee.promoteId?ye=j.properties[ee.promoteId]:ee.generateId&&(ye=le||0),Le==="Point")st(me,ae);else if(Le==="MultiPoint")for(var Ne=0;Ne<me.length;Ne++)st(me[Ne],ae);else if(Le==="LineString")nt(me,ae,Te,!1);else if(Le==="MultiLineString"){if(ee.lineMetrics){for(Ne=0;Ne<me.length;Ne++)nt(me[Ne],ae=[],Te,!1),H.push(Pe(ye,"LineString",ae,j.properties));return}xt(me,ae,Te,!1)}else if(Le==="Polygon")xt(me,ae,Te,!0);else{if(Le!=="MultiPolygon"){if(Le==="GeometryCollection"){for(Ne=0;Ne<j.geometry.geometries.length;Ne++)ze(H,{id:ye,geometry:j.geometry.geometries[Ne],properties:j.properties},ee,le);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ne=0;Ne<me.length;Ne++){var ct=[];xt(me[Ne],ct,Te,!0),ae.push(ct)}}H.push(Pe(ye,Le,ae,j.properties))}}function st(H,j){j.push(Et(H[0])),j.push(ta(H[1])),j.push(0)}function nt(H,j,ee,le){for(var me,Le,Te=0,ae=0;ae<H.length;ae++){var ye=Et(H[ae][0]),Ne=ta(H[ae][1]);j.push(ye),j.push(Ne),j.push(0),ae>0&&(Te+=le?(me*Ne-ye*Le)/2:Math.sqrt(Math.pow(ye-me,2)+Math.pow(Ne-Le,2))),me=ye,Le=Ne}var ct=j.length-3;j[2]=1,function ft(Je,_t,Xt,Bt){for(var tt,Ft=Bt,Rt=Xt-_t>>1,Wt=Xt-_t,Va=Je[_t],rt=Je[_t+1],Re=Je[Xt],dt=Je[Xt+1],mt=_t+3;mt<Xt;mt+=3){var la=gt(Je[mt],Je[mt+1],Va,rt,Re,dt);if(la>Ft)tt=mt,Ft=la;else if(la===Ft){var Ea=Math.abs(mt-Rt);Ea<Wt&&(tt=mt,Wt=Ea)}}Ft>Bt&&(tt-_t>3&&ft(Je,_t,tt,Bt),Je[tt+2]=Ft,Xt-tt>3&&ft(Je,tt,Xt,Bt))}(j,0,ct,ee),j[ct+2]=1,j.size=Math.abs(Te),j.start=0,j.end=j.size}function xt(H,j,ee,le){for(var me=0;me<H.length;me++){var Le=[];nt(H[me],Le,ee,le),j.push(Le)}}function Et(H){return H/360+.5}function ta(H){var j=Math.sin(H*Math.PI/180),ee=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return ee<0?0:ee>1?1:ee}function oa(H,j,ee,le,me,Le,Te,ae){if(le/=j,Le>=(ee/=j)&&Te<le)return H;if(Te<ee||Le>=le)return null;for(var ye=[],Ne=0;Ne<H.length;Ne++){var ct=H[Ne],ft=ct.geometry,Je=ct.type,_t=me===0?ct.minX:ct.minY,Xt=me===0?ct.maxX:ct.maxY;if(_t>=ee&&Xt<le)ye.push(ct);else if(!(Xt<ee||_t>=le)){var Bt=[];if(Je==="Point"||Je==="MultiPoint")Na(ft,Bt,ee,le,me);else if(Je==="LineString")mi(ft,Bt,ee,le,me,!1,ae.lineMetrics);else if(Je==="MultiLineString")Tn(ft,Bt,ee,le,me,!1);else if(Je==="Polygon")Tn(ft,Bt,ee,le,me,!0);else if(Je==="MultiPolygon")for(var tt=0;tt<ft.length;tt++){var Ft=[];Tn(ft[tt],Ft,ee,le,me,!0),Ft.length&&Bt.push(Ft)}if(Bt.length){if(ae.lineMetrics&&Je==="LineString"){for(tt=0;tt<Bt.length;tt++)ye.push(Pe(ct.id,Je,Bt[tt],ct.tags));continue}Je!=="LineString"&&Je!=="MultiLineString"||(Bt.length===1?(Je="LineString",Bt=Bt[0]):Je="MultiLineString"),Je!=="Point"&&Je!=="MultiPoint"||(Je=Bt.length===3?"Point":"MultiPoint"),ye.push(Pe(ct.id,Je,Bt,ct.tags))}}}return ye.length?ye:null}function Na(H,j,ee,le,me){for(var Le=0;Le<H.length;Le+=3){var Te=H[Le+me];Te>=ee&&Te<=le&&(j.push(H[Le]),j.push(H[Le+1]),j.push(H[Le+2]))}}function mi(H,j,ee,le,me,Le,Te){for(var ae,ye,Ne=di(H),ct=me===0?qn:En,ft=H.start,Je=0;Je<H.length-3;Je+=3){var _t=H[Je],Xt=H[Je+1],Bt=H[Je+2],tt=H[Je+3],Ft=H[Je+4],Rt=me===0?_t:Xt,Wt=me===0?tt:Ft,Va=!1;Te&&(ae=Math.sqrt(Math.pow(_t-tt,2)+Math.pow(Xt-Ft,2))),Rt<ee?Wt>ee&&(ye=ct(Ne,_t,Xt,tt,Ft,ee),Te&&(Ne.start=ft+ae*ye)):Rt>le?Wt<le&&(ye=ct(Ne,_t,Xt,tt,Ft,le),Te&&(Ne.start=ft+ae*ye)):Ki(Ne,_t,Xt,Bt),Wt<ee&&Rt>=ee&&(ye=ct(Ne,_t,Xt,tt,Ft,ee),Va=!0),Wt>le&&Rt<=le&&(ye=ct(Ne,_t,Xt,tt,Ft,le),Va=!0),!Le&&Va&&(Te&&(Ne.end=ft+ae*ye),j.push(Ne),Ne=di(H)),Te&&(ft+=ae)}var rt=H.length-3;_t=H[rt],Xt=H[rt+1],Bt=H[rt+2],(Rt=me===0?_t:Xt)>=ee&&Rt<=le&&Ki(Ne,_t,Xt,Bt),rt=Ne.length-3,Le&&rt>=3&&(Ne[rt]!==Ne[0]||Ne[rt+1]!==Ne[1])&&Ki(Ne,Ne[0],Ne[1],Ne[2]),Ne.length&&j.push(Ne)}function di(H){var j=[];return j.size=H.size,j.start=H.start,j.end=H.end,j}function Tn(H,j,ee,le,me,Le){for(var Te=0;Te<H.length;Te++)mi(H[Te],j,ee,le,me,Le,!1)}function Ki(H,j,ee,le){H.push(j),H.push(ee),H.push(le)}function qn(H,j,ee,le,me,Le){var Te=(Le-j)/(le-j);return H.push(Le),H.push(ee+(me-ee)*Te),H.push(1),Te}function En(H,j,ee,le,me,Le){var Te=(Le-ee)/(me-ee);return H.push(j+(le-j)*Te),H.push(Le),H.push(1),Te}function xr(H,j){for(var ee=[],le=0;le<H.length;le++){var me,Le=H[le],Te=Le.type;if(Te==="Point"||Te==="MultiPoint"||Te==="LineString")me=Wr(Le.geometry,j);else if(Te==="MultiLineString"||Te==="Polygon"){me=[];for(var ae=0;ae<Le.geometry.length;ae++)me.push(Wr(Le.geometry[ae],j))}else if(Te==="MultiPolygon")for(me=[],ae=0;ae<Le.geometry.length;ae++){for(var ye=[],Ne=0;Ne<Le.geometry[ae].length;Ne++)ye.push(Wr(Le.geometry[ae][Ne],j));me.push(ye)}ee.push(Pe(Le.id,Te,me,Le.tags))}return ee}function Wr(H,j){var ee=[];ee.size=H.size,H.start!==void 0&&(ee.start=H.start,ee.end=H.end);for(var le=0;le<H.length;le+=3)ee.push(H[le]+j,H[le+1],H[le+2]);return ee}function Ri(H,j){if(H.transformed)return H;var ee,le,me,Le=1<<H.z,Te=H.x,ae=H.y;for(ee=0;ee<H.features.length;ee++){var ye=H.features[ee],Ne=ye.geometry,ct=ye.type;if(ye.geometry=[],ct===1)for(le=0;le<Ne.length;le+=2)ye.geometry.push(Cn(Ne[le],Ne[le+1],j,Le,Te,ae));else for(le=0;le<Ne.length;le++){var ft=[];for(me=0;me<Ne[le].length;me+=2)ft.push(Cn(Ne[le][me],Ne[le][me+1],j,Le,Te,ae));ye.geometry.push(ft)}}return H.transformed=!0,H}function Cn(H,j,ee,le,me,Le){return[Math.round(ee*(H*le-me)),Math.round(ee*(j*le-Le))]}function ao(H,j,ee,le,me){for(var Le=j===me.maxZoom?0:me.tolerance/((1<<j)*me.extent),Te={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ee,y:le,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ae=0;ae<H.length;ae++){Te.numFeatures++,So(Te,H[ae],Le,me);var ye=H[ae].minX,Ne=H[ae].minY,ct=H[ae].maxX,ft=H[ae].maxY;ye<Te.minX&&(Te.minX=ye),Ne<Te.minY&&(Te.minY=Ne),ct>Te.maxX&&(Te.maxX=ct),ft>Te.maxY&&(Te.maxY=ft)}return Te}function So(H,j,ee,le){var me=j.geometry,Le=j.type,Te=[];if(Le==="Point"||Le==="MultiPoint")for(var ae=0;ae<me.length;ae+=3)Te.push(me[ae]),Te.push(me[ae+1]),H.numPoints++,H.numSimplified++;else if(Le==="LineString")gs(Te,me,H,ee,!1,!1);else if(Le==="MultiLineString"||Le==="Polygon")for(ae=0;ae<me.length;ae++)gs(Te,me[ae],H,ee,Le==="Polygon",ae===0);else if(Le==="MultiPolygon")for(var ye=0;ye<me.length;ye++){var Ne=me[ye];for(ae=0;ae<Ne.length;ae++)gs(Te,Ne[ae],H,ee,!0,ae===0)}if(Te.length){var ct=j.tags||null;if(Le==="LineString"&&le.lineMetrics){for(var ft in ct={},j.tags)ct[ft]=j.tags[ft];ct.mapbox_clip_start=me.start/me.size,ct.mapbox_clip_end=me.end/me.size}var Je={geometry:Te,type:Le==="Polygon"||Le==="MultiPolygon"?3:Le==="LineString"||Le==="MultiLineString"?2:1,tags:ct};j.id!==null&&(Je.id=j.id),H.features.push(Je)}}function gs(H,j,ee,le,me,Le){var Te=le*le;if(le>0&&j.size<(me?Te:le))ee.numPoints+=j.length/3;else{for(var ae=[],ye=0;ye<j.length;ye+=3)(le===0||j[ye+2]>Te)&&(ee.numSimplified++,ae.push(j[ye]),ae.push(j[ye+1])),ee.numPoints++;me&&function(Ne,ct){for(var ft=0,Je=0,_t=Ne.length,Xt=_t-2;Je<_t;Xt=Je,Je+=2)ft+=(Ne[Je]-Ne[Xt])*(Ne[Je+1]+Ne[Xt+1]);if(ft>0===ct)for(Je=0,_t=Ne.length;Je<_t/2;Je+=2){var Bt=Ne[Je],tt=Ne[Je+1];Ne[Je]=Ne[_t-2-Je],Ne[Je+1]=Ne[_t-1-Je],Ne[_t-2-Je]=Bt,Ne[_t-1-Je]=tt}}(ae,Le),H.push(ae)}}function Fn(H,j){var ee=(j=this.options=function(me,Le){for(var Te in Le)me[Te]=Le[Te];return me}(Object.create(this.options),j)).debug;if(ee&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var le=function(me,Le){var Te=[];if(me.type==="FeatureCollection")for(var ae=0;ae<me.features.length;ae++)ze(Te,me.features[ae],Le,ae);else ze(Te,me.type==="Feature"?me:{geometry:me},Le);return Te}(H,j);this.tiles={},this.tileCoords=[],ee&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(le=function(me,Le){var Te=Le.buffer/Le.extent,ae=me,ye=oa(me,1,-1-Te,Te,0,-1,2,Le),Ne=oa(me,1,1-Te,2+Te,0,-1,2,Le);return(ye||Ne)&&(ae=oa(me,1,-Te,1+Te,0,-1,2,Le)||[],ye&&(ae=xr(ye,1).concat(ae)),Ne&&(ae=ae.concat(xr(Ne,-1)))),ae}(le,j)).length&&this.splitTile(le,0,0,0),ee&&(le.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function qr(H,j,ee){return 32*((1<<H)*ee+j)+H}function al(H,j){var ee=H.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);var le=this._geoJSONIndex.getTile(ee.z,ee.x,ee.y);if(!le)return j(null,null);var me=new V(le.features),Le=se(me);Le.byteOffset===0&&Le.byteLength===Le.buffer.byteLength||(Le=new Uint8Array(Le)),j(null,{vectorTile:me,rawData:Le.buffer})}bt.prototype.load=function(H){var j=this.options,ee=j.log,le=j.minZoom,me=j.maxZoom,Le=j.nodeSize;ee&&console.time("total time");var Te="prepare "+H.length+" points";ee&&console.time(Te),this.points=H;for(var ae=[],ye=0;ye<H.length;ye++)H[ye].geometry&&ae.push(Ca(H[ye],ye));this.trees[me+1]=new $t(ae,qe,ut,Le,Float32Array),ee&&console.timeEnd(Te);for(var Ne=me;Ne>=le;Ne--){var ct=+Date.now();ae=this._cluster(ae,Ne),this.trees[Ne]=new $t(ae,qe,ut,Le,Float32Array),ee&&console.log("z%d: %d clusters in %dms",Ne,ae.length,+Date.now()-ct)}return ee&&console.timeEnd("total time"),this},bt.prototype.getClusters=function(H,j){var ee=((H[0]+180)%360+360)%360-180,le=Math.max(-90,Math.min(90,H[1])),me=H[2]===180?180:((H[2]+180)%360+360)%360-180,Le=Math.max(-90,Math.min(90,H[3]));if(H[2]-H[0]>=360)ee=-180,me=180;else if(ee>me){var Te=this.getClusters([ee,le,180,Le],j),ae=this.getClusters([-180,le,me,Le],j);return Te.concat(ae)}for(var ye=this.trees[this._limitZoom(j)],Ne=[],ct=0,ft=ye.range(An(ee),xe(Le),An(me),xe(le));ct<ft.length;ct+=1){var Je=ye.points[ft[ct]];Ne.push(Je.numPoints?ii(Je):this.points[Je.index])}return Ne},bt.prototype.getChildren=function(H){var j=this._getOriginId(H),ee=this._getOriginZoom(H),le="No cluster with the specified id.",me=this.trees[ee];if(!me)throw new Error(le);var Le=me.points[j];if(!Le)throw new Error(le);for(var Te=this.options.radius/(this.options.extent*Math.pow(2,ee-1)),ae=[],ye=0,Ne=me.within(Le.x,Le.y,Te);ye<Ne.length;ye+=1){var ct=me.points[Ne[ye]];ct.parentId===H&&ae.push(ct.numPoints?ii(ct):this.points[ct.index])}if(ae.length===0)throw new Error(le);return ae},bt.prototype.getLeaves=function(H,j,ee){var le=[];return this._appendLeaves(le,H,j=j||10,ee=ee||0,0),le},bt.prototype.getTile=function(H,j,ee){var le=this.trees[this._limitZoom(H)],me=Math.pow(2,H),Le=this.options,Te=Le.radius/Le.extent,ae=(ee-Te)/me,ye=(ee+1+Te)/me,Ne={features:[]};return this._addTileFeatures(le.range((j-Te)/me,ae,(j+1+Te)/me,ye),le.points,j,ee,me,Ne),j===0&&this._addTileFeatures(le.range(1-Te/me,ae,1,ye),le.points,me,ee,me,Ne),j===me-1&&this._addTileFeatures(le.range(0,ae,Te/me,ye),le.points,-1,ee,me,Ne),Ne.features.length?Ne:null},bt.prototype.getClusterExpansionZoom=function(H){for(var j=this._getOriginZoom(H)-1;j<=this.options.maxZoom;){var ee=this.getChildren(H);if(j++,ee.length!==1)break;H=ee[0].properties.cluster_id}return j},bt.prototype._appendLeaves=function(H,j,ee,le,me){for(var Le=0,Te=this.getChildren(j);Le<Te.length;Le+=1){var ae=Te[Le],ye=ae.properties;if(ye&&ye.cluster?me+ye.point_count<=le?me+=ye.point_count:me=this._appendLeaves(H,ye.cluster_id,ee,le,me):me<le?me++:H.push(ae),H.length===ee)break}return me},bt.prototype._addTileFeatures=function(H,j,ee,le,me,Le){for(var Te=0,ae=H;Te<ae.length;Te+=1){var ye=j[ae[Te]],Ne=ye.numPoints,ct={type:1,geometry:[[Math.round(this.options.extent*(ye.x*me-ee)),Math.round(this.options.extent*(ye.y*me-le))]],tags:Ne?zi(ye):this.points[ye.index].properties},ft=void 0;Ne?ft=ye.id:this.options.generateId?ft=ye.index:this.points[ye.index].id&&(ft=this.points[ye.index].id),ft!==void 0&&(ct.id=ft),Le.features.push(ct)}},bt.prototype._limitZoom=function(H){return Math.max(this.options.minZoom,Math.min(+H,this.options.maxZoom+1))},bt.prototype._cluster=function(H,j){for(var ee=[],le=this.options,me=le.reduce,Le=le.minPoints,Te=le.radius/(le.extent*Math.pow(2,j)),ae=0;ae<H.length;ae++){var ye=H[ae];if(!(ye.zoom<=j)){ye.zoom=j;for(var Ne=this.trees[j+1],ct=Ne.within(ye.x,ye.y,Te),ft=ye.numPoints||1,Je=ft,_t=0,Xt=ct;_t<Xt.length;_t+=1){var Bt=Ne.points[Xt[_t]];Bt.zoom>j&&(Je+=Bt.numPoints||1)}if(Je>=Le){for(var tt=ye.x*ft,Ft=ye.y*ft,Rt=me&&ft>1?this._map(ye,!0):null,Wt=(ae<<5)+(j+1)+this.points.length,Va=0,rt=ct;Va<rt.length;Va+=1){var Re=Ne.points[rt[Va]];if(!(Re.zoom<=j)){Re.zoom=j;var dt=Re.numPoints||1;tt+=Re.x*dt,Ft+=Re.y*dt,Re.parentId=Wt,me&&(Rt||(Rt=this._map(ye,!0)),me(Rt,this._map(Re)))}}ye.parentId=Wt,ee.push(ui(tt/Je,Ft/Je,Wt,Je,Rt))}else if(ee.push(ye),Je>1)for(var mt=0,la=ct;mt<la.length;mt+=1){var Ea=Ne.points[la[mt]];Ea.zoom<=j||(Ea.zoom=j,ee.push(Ea))}}}return ee},bt.prototype._getOriginId=function(H){return H-this.points.length>>5},bt.prototype._getOriginZoom=function(H){return(H-this.points.length)%32},bt.prototype._map=function(H,j){if(H.numPoints)return j?Ge({},H.properties):H.properties;var ee=this.points[H.index].properties,le=this.options.map(ee);return j&&le===ee?Ge({},le):le},Fn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Fn.prototype.splitTile=function(H,j,ee,le,me,Le,Te){for(var ae=[H,j,ee,le],ye=this.options,Ne=ye.debug;ae.length;){le=ae.pop(),ee=ae.pop(),j=ae.pop(),H=ae.pop();var ct=1<<j,ft=qr(j,ee,le),Je=this.tiles[ft];if(!Je&&(Ne>1&&console.time("creation"),Je=this.tiles[ft]=ao(H,j,ee,le,ye),this.tileCoords.push({z:j,x:ee,y:le}),Ne)){Ne>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,ee,le,Je.numFeatures,Je.numPoints,Je.numSimplified),console.timeEnd("creation"));var _t="z"+j;this.stats[_t]=(this.stats[_t]||0)+1,this.total++}if(Je.source=H,me){if(j===ye.maxZoom||j===me)continue;var Xt=1<<me-j;if(ee!==Math.floor(Le/Xt)||le!==Math.floor(Te/Xt))continue}else if(j===ye.indexMaxZoom||Je.numPoints<=ye.indexMaxPoints)continue;if(Je.source=null,H.length!==0){Ne>1&&console.time("clipping");var Bt,tt,Ft,Rt,Wt,Va,rt=.5*ye.buffer/ye.extent,Re=.5-rt,dt=.5+rt,mt=1+rt;Bt=tt=Ft=Rt=null,Wt=oa(H,ct,ee-rt,ee+dt,0,Je.minX,Je.maxX,ye),Va=oa(H,ct,ee+Re,ee+mt,0,Je.minX,Je.maxX,ye),H=null,Wt&&(Bt=oa(Wt,ct,le-rt,le+dt,1,Je.minY,Je.maxY,ye),tt=oa(Wt,ct,le+Re,le+mt,1,Je.minY,Je.maxY,ye),Wt=null),Va&&(Ft=oa(Va,ct,le-rt,le+dt,1,Je.minY,Je.maxY,ye),Rt=oa(Va,ct,le+Re,le+mt,1,Je.minY,Je.maxY,ye),Va=null),Ne>1&&console.timeEnd("clipping"),ae.push(Bt||[],j+1,2*ee,2*le),ae.push(tt||[],j+1,2*ee,2*le+1),ae.push(Ft||[],j+1,2*ee+1,2*le),ae.push(Rt||[],j+1,2*ee+1,2*le+1)}}},Fn.prototype.getTile=function(H,j,ee){var le=this.options,me=le.extent,Le=le.debug;if(H<0||H>24)return null;var Te=1<<H,ae=qr(H,j=(j%Te+Te)%Te,ee);if(this.tiles[ae])return Ri(this.tiles[ae],me);Le>1&&console.log("drilling down to z%d-%d-%d",H,j,ee);for(var ye,Ne=H,ct=j,ft=ee;!ye&&Ne>0;)Ne--,ct=Math.floor(ct/2),ft=Math.floor(ft/2),ye=this.tiles[qr(Ne,ct,ft)];return ye&&ye.source?(Le>1&&console.log("found parent tile z%d-%d-%d",Ne,ct,ft),Le>1&&console.time("drilling down"),this.splitTile(ye.source,Ne,ct,ft,H,j,ee),Le>1&&console.timeEnd("drilling down"),this.tiles[ae]?Ri(this.tiles[ae],me):null):null};var pn=function(H){function j(ee,le,me,Le){H.call(this,ee,le,me,al),Le&&(this.loadGeoJSON=Le)}return H&&(j.__proto__=H),(j.prototype=Object.create(H&&H.prototype)).constructor=j,j.prototype.loadData=function(ee,le){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=le,this._pendingLoadDataParams=ee,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},j.prototype._loadData=function(){var ee=this;if(this._pendingCallback&&this._pendingLoadDataParams){var le=this._pendingCallback,me=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Le=!!(me&&me.request&&me.request.collectResourceTiming)&&new r.RequestPerformance(me.request);this.loadGeoJSON(me,function(Te,ae){if(Te||!ae)return le(Te);if(typeof ae!="object")return le(new Error("Input data given to '"+me.source+"' is not a valid GeoJSON object."));(function Je(_t,Xt){var Bt,tt=_t&&_t.type;if(tt==="FeatureCollection")for(Bt=0;Bt<_t.features.length;Bt++)Je(_t.features[Bt],Xt);else if(tt==="GeometryCollection")for(Bt=0;Bt<_t.geometries.length;Bt++)Je(_t.geometries[Bt],Xt);else if(tt==="Feature")Je(_t.geometry,Xt);else if(tt==="Polygon")G(_t.coordinates,Xt);else if(tt==="MultiPolygon")for(Bt=0;Bt<_t.coordinates.length;Bt++)G(_t.coordinates[Bt],Xt);return _t})(ae,!0);try{if(me.filter){var ye=r.createExpression(me.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ye.result==="error")throw new Error(ye.value.map(function(Je){return Je.key+": "+Je.message}).join(", "));var Ne=ae.features.filter(function(Je){return ye.value.evaluate({zoom:0},Je)});ae={type:"FeatureCollection",features:Ne}}ee._geoJSONIndex=me.cluster?new bt(function(Je){var _t=Je.superclusterOptions,Xt=Je.clusterProperties;if(!Xt||!_t)return _t;for(var Bt={},tt={},Ft={accumulated:null,zoom:0},Rt={properties:null},Wt=Object.keys(Xt),Va=0,rt=Wt;Va<rt.length;Va+=1){var Re=rt[Va],dt=Xt[Re],mt=dt[0],la=r.createExpression(dt[1]),Ea=r.createExpression(typeof mt=="string"?[mt,["accumulated"],["get",Re]]:mt);Bt[Re]=la.value,tt[Re]=Ea.value}return _t.map=function(ki){Rt.properties=ki;for(var Ga={},Ui=0,Oa=Wt;Ui<Oa.length;Ui+=1){var Ya=Oa[Ui];Ga[Ya]=Bt[Ya].evaluate(Ft,Rt)}return Ga},_t.reduce=function(ki,Ga){Rt.properties=Ga;for(var Ui=0,Oa=Wt;Ui<Oa.length;Ui+=1){var Ya=Oa[Ui];Ft.accumulated=ki[Ya],ki[Ya]=tt[Ya].evaluate(Ft,Rt)}},_t}(me)).load(ae.features):function(Je,_t){return new Fn(Je,_t)}(ae,me.geojsonVtOptions)}catch(Je){return le(Je)}ee.loaded={};var ct={};if(Le){var ft=Le.finish();ft&&(ct.resourceTiming={},ct.resourceTiming[me.source]=JSON.parse(JSON.stringify(ft)))}le(null,ct)})}},j.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},j.prototype.reloadTile=function(ee,le){var me=this.loaded;return me&&me[ee.uid]?H.prototype.reloadTile.call(this,ee,le):this.loadTile(ee,le)},j.prototype.loadGeoJSON=function(ee,le){if(ee.request)r.getJSON(ee.request,le);else{if(typeof ee.data!="string")return le(new Error("Input data given to '"+ee.source+"' is not a valid GeoJSON object."));try{return le(null,JSON.parse(ee.data))}catch{return le(new Error("Input data given to '"+ee.source+"' is not a valid GeoJSON object."))}}},j.prototype.removeSource=function(ee,le){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),le()},j.prototype.getClusterExpansionZoom=function(ee,le){try{le(null,this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId))}catch(me){le(me)}},j.prototype.getClusterChildren=function(ee,le){try{le(null,this._geoJSONIndex.getChildren(ee.clusterId))}catch(me){le(me)}},j.prototype.getClusterLeaves=function(ee,le){try{le(null,this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset))}catch(me){le(me)}},j}(S),ni=function(H){var j=this;this.self=H,this.actor=new r.Actor(H,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:S,geojson:pn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ee,le){if(j.workerSourceTypes[ee])throw new Error('Worker source with name "'+ee+'" already registered.');j.workerSourceTypes[ee]=le},this.self.registerRTLTextPlugin=function(ee){if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=ee.applyArabicShaping,r.plugin.processBidirectionalText=ee.processBidirectionalText,r.plugin.processStyledBidirectionalText=ee.processStyledBidirectionalText}};return ni.prototype.setReferrer=function(H,j){this.referrer=j},ni.prototype.setImages=function(H,j,ee){for(var le in this.availableImages[H]=j,this.workerSources[H]){var me=this.workerSources[H][le];for(var Le in me)me[Le].availableImages=j}ee()},ni.prototype.setLayers=function(H,j,ee){this.getLayerIndex(H).replace(j),ee()},ni.prototype.updateLayers=function(H,j,ee){this.getLayerIndex(H).update(j.layers,j.removedIds),ee()},ni.prototype.loadTile=function(H,j,ee){this.getWorkerSource(H,j.type,j.source).loadTile(j,ee)},ni.prototype.loadDEMTile=function(H,j,ee){this.getDEMWorkerSource(H,j.source).loadTile(j,ee)},ni.prototype.reloadTile=function(H,j,ee){this.getWorkerSource(H,j.type,j.source).reloadTile(j,ee)},ni.prototype.abortTile=function(H,j,ee){this.getWorkerSource(H,j.type,j.source).abortTile(j,ee)},ni.prototype.removeTile=function(H,j,ee){this.getWorkerSource(H,j.type,j.source).removeTile(j,ee)},ni.prototype.removeDEMTile=function(H,j){this.getDEMWorkerSource(H,j.source).removeTile(j)},ni.prototype.removeSource=function(H,j,ee){if(this.workerSources[H]&&this.workerSources[H][j.type]&&this.workerSources[H][j.type][j.source]){var le=this.workerSources[H][j.type][j.source];delete this.workerSources[H][j.type][j.source],le.removeSource!==void 0?le.removeSource(j,ee):ee()}},ni.prototype.loadWorkerSource=function(H,j,ee){try{this.self.importScripts(j.url),ee()}catch(le){ee(le.toString())}},ni.prototype.syncRTLPluginState=function(H,j,ee){try{r.plugin.setState(j);var le=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&le!=null){this.self.importScripts(le);var me=r.plugin.isParsed();ee(me?void 0:new Error("RTL Text Plugin failed to import scripts from "+le),me)}}catch(Le){ee(Le.toString())}},ni.prototype.getAvailableImages=function(H){var j=this.availableImages[H];return j||(j=[]),j},ni.prototype.getLayerIndex=function(H){var j=this.layerIndexes[H];return j||(j=this.layerIndexes[H]=new d),j},ni.prototype.getWorkerSource=function(H,j,ee){var le=this;return this.workerSources[H]||(this.workerSources[H]={}),this.workerSources[H][j]||(this.workerSources[H][j]={}),this.workerSources[H][j][ee]||(this.workerSources[H][j][ee]=new this.workerSourceTypes[j]({send:function(me,Le,Te){le.actor.send(me,Le,Te,H)}},this.getLayerIndex(H),this.getAvailableImages(H))),this.workerSources[H][j][ee]},ni.prototype.getDEMWorkerSource=function(H,j){return this.demWorkerSources[H]||(this.demWorkerSources[H]={}),this.demWorkerSources[H][j]||(this.demWorkerSources[H][j]=new M),this.demWorkerSources[H][j]},ni.prototype.enforceCacheSizeLimit=function(H,j){r.enforceCacheSizeLimit(j)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ni(self)),ni}),s(["./shared"],function(r){var l=r.createCommonjsModule(function(_){function g(C){return!p(C)}function p(C){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var L,O,Z=new Blob([""],{type:"text/javascript"}),Y=URL.createObjectURL(Z);try{O=new Worker(Y),L=!0}catch{L=!1}return O&&O.terminate(),URL.revokeObjectURL(Y),L}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var L=document.createElement("canvas");L.width=L.height=1;var O=L.getContext("2d");if(!O)return!1;var Z=O.getImageData(0,0,1,1);return Z&&Z.width===L.width}()?(b[E=C&&C.failIfMajorPerformanceCaveat]===void 0&&(b[E]=function(L){var O=function(Y){var re=document.createElement("canvas"),oe=Object.create(g.webGLContextAttributes);return oe.failIfMajorPerformanceCaveat=Y,re.probablySupportsContext?re.probablySupportsContext("webgl",oe)||re.probablySupportsContext("experimental-webgl",oe):re.supportsContext?re.supportsContext("webgl",oe)||re.supportsContext("experimental-webgl",oe):re.getContext("webgl",oe)||re.getContext("experimental-webgl",oe)}(L);if(!O)return!1;var Z=O.createShader(O.VERTEX_SHADER);return!(!Z||O.isContextLost())&&(O.shaderSource(Z,"void main() {}"),O.compileShader(Z),O.getShaderParameter(Z,O.COMPILE_STATUS)===!0)}(E)),b[E]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var E}_.exports?_.exports=g:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=g,window.mapboxgl.notSupportedReason=p);var b={};g.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),u={create:function(_,g,p){var b=r.window.document.createElement(_);return g!==void 0&&(b.className=g),p&&p.appendChild(b),b},createNS:function(_,g){return r.window.document.createElementNS(_,g)}},d=r.window.document&&r.window.document.documentElement.style;function m(_){if(!d)return _[0];for(var g=0;g<_.length;g++)if(_[g]in d)return _[g];return _[0]}var f,v=m(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);u.disableDrag=function(){d&&v&&(f=d[v],d[v]="none")},u.enableDrag=function(){d&&v&&(d[v]=f)};var w=m(["transform","WebkitTransform"]);u.setTransform=function(_,g){_.style[w]=g};var S=!1;try{var T=Object.defineProperty({},"passive",{get:function(){S=!0}});r.window.addEventListener("test",T,T),r.window.removeEventListener("test",T,T)}catch{S=!1}u.addEventListener=function(_,g,p,b){b===void 0&&(b={}),_.addEventListener(g,p,"passive"in b&&S?b:b.capture)},u.removeEventListener=function(_,g,p,b){b===void 0&&(b={}),_.removeEventListener(g,p,"passive"in b&&S?b:b.capture)};var M=function(_){_.preventDefault(),_.stopPropagation(),r.window.removeEventListener("click",M,!0)};function G(_){var g=_.userImage;return!!(g&&g.render&&g.render())&&(_.data.replace(new Uint8Array(g.data.buffer)),!0)}u.suppressClick=function(){r.window.addEventListener("click",M,!0),r.window.setTimeout(function(){r.window.removeEventListener("click",M,!0)},0)},u.mousePos=function(_,g){var p=_.getBoundingClientRect();return new r.Point(g.clientX-p.left-_.clientLeft,g.clientY-p.top-_.clientTop)},u.touchPos=function(_,g){for(var p=_.getBoundingClientRect(),b=[],C=0;C<g.length;C++)b.push(new r.Point(g[C].clientX-p.left-_.clientLeft,g[C].clientY-p.top-_.clientTop));return b},u.mouseButton=function(_){return r.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&r.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button},u.remove=function(_){_.parentNode&&_.parentNode.removeChild(_)};var P=function(_){function g(){_.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.isLoaded=function(){return this.loaded},g.prototype.setLoaded=function(p){if(this.loaded!==p&&(this.loaded=p,p)){for(var b=0,C=this.requestors;b<C.length;b+=1){var E=C[b];this._notify(E.ids,E.callback)}this.requestors=[]}},g.prototype.getImage=function(p){return this.images[p]},g.prototype.addImage=function(p,b){this._validate(p,b)&&(this.images[p]=b)},g.prototype._validate=function(p,b){var C=!0;return this._validateStretch(b.stretchX,b.data&&b.data.width)||(this.fire(new r.ErrorEvent(new Error('Image "'+p+'" has invalid "stretchX" value'))),C=!1),this._validateStretch(b.stretchY,b.data&&b.data.height)||(this.fire(new r.ErrorEvent(new Error('Image "'+p+'" has invalid "stretchY" value'))),C=!1),this._validateContent(b.content,b)||(this.fire(new r.ErrorEvent(new Error('Image "'+p+'" has invalid "content" value'))),C=!1),C},g.prototype._validateStretch=function(p,b){if(!p)return!0;for(var C=0,E=0,L=p;E<L.length;E+=1){var O=L[E];if(O[0]<C||O[1]<O[0]||b<O[1])return!1;C=O[1]}return!0},g.prototype._validateContent=function(p,b){return!(p&&(p.length!==4||p[0]<0||b.data.width<p[0]||p[1]<0||b.data.height<p[1]||p[2]<0||b.data.width<p[2]||p[3]<0||b.data.height<p[3]||p[2]<p[0]||p[3]<p[1]))},g.prototype.updateImage=function(p,b){b.version=this.images[p].version+1,this.images[p]=b,this.updatedImages[p]=!0},g.prototype.removeImage=function(p){var b=this.images[p];delete this.images[p],delete this.patterns[p],b.userImage&&b.userImage.onRemove&&b.userImage.onRemove()},g.prototype.listImages=function(){return Object.keys(this.images)},g.prototype.getImages=function(p,b){var C=!0;if(!this.isLoaded())for(var E=0,L=p;E<L.length;E+=1)this.images[L[E]]||(C=!1);this.isLoaded()||C?this._notify(p,b):this.requestors.push({ids:p,callback:b})},g.prototype._notify=function(p,b){for(var C={},E=0,L=p;E<L.length;E+=1){var O=L[E];this.images[O]||this.fire(new r.Event("styleimagemissing",{id:O}));var Z=this.images[O];Z?C[O]={data:Z.data.clone(),pixelRatio:Z.pixelRatio,sdf:Z.sdf,version:Z.version,stretchX:Z.stretchX,stretchY:Z.stretchY,content:Z.content,hasRenderCallback:!!(Z.userImage&&Z.userImage.render)}:r.warnOnce('Image "'+O+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}b(null,C)},g.prototype.getPixelSize=function(){var p=this.atlasImage;return{width:p.width,height:p.height}},g.prototype.getPattern=function(p){var b=this.patterns[p],C=this.getImage(p);if(!C)return null;if(b&&b.position.version===C.version)return b.position;if(b)b.position.version=C.version;else{var E={w:C.data.width+2,h:C.data.height+2,x:0,y:0},L=new r.ImagePosition(E,C);this.patterns[p]={bin:E,position:L}}return this._updatePatternAtlas(),this.patterns[p].position},g.prototype.bind=function(p){var b=p.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new r.Texture(p,this.atlasImage,b.RGBA),this.atlasTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE)},g.prototype._updatePatternAtlas=function(){var p=[];for(var b in this.patterns)p.push(this.patterns[b].bin);var C=r.potpack(p),E=C.w,L=C.h,O=this.atlasImage;for(var Z in O.resize({width:E||1,height:L||1}),this.patterns){var Y=this.patterns[Z].bin,re=Y.x+1,oe=Y.y+1,ue=this.images[Z].data,ve=ue.width,be=ue.height;r.RGBAImage.copy(ue,O,{x:0,y:0},{x:re,y:oe},{width:ve,height:be}),r.RGBAImage.copy(ue,O,{x:0,y:be-1},{x:re,y:oe-1},{width:ve,height:1}),r.RGBAImage.copy(ue,O,{x:0,y:0},{x:re,y:oe+be},{width:ve,height:1}),r.RGBAImage.copy(ue,O,{x:ve-1,y:0},{x:re-1,y:oe},{width:1,height:be}),r.RGBAImage.copy(ue,O,{x:0,y:0},{x:re+ve,y:oe},{width:1,height:be})}this.dirty=!0},g.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},g.prototype.dispatchRenderCallbacks=function(p){for(var b=0,C=p;b<C.length;b+=1){var E=C[b];if(!this.callbackDispatchedThisFrame[E]){this.callbackDispatchedThisFrame[E]=!0;var L=this.images[E];G(L)&&this.updateImage(E,L)}}},g}(r.Evented),F=K,N=K,V=1e20;function K(_,g,p,b,C,E){this.fontSize=_||24,this.buffer=g===void 0?3:g,this.cutoff=b||.25,this.fontFamily=C||"sans-serif",this.fontWeight=E||"normal",this.radius=p||8;var L=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=L,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.d=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Int16Array(L),this.middle=Math.round(L/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function te(_,g,p,b,C,E,L){for(var O=0;O<g;O++){for(var Z=0;Z<p;Z++)b[Z]=_[Z*g+O];for(J(b,C,E,L,p),Z=0;Z<p;Z++)_[Z*g+O]=C[Z]}for(Z=0;Z<p;Z++){for(O=0;O<g;O++)b[O]=_[Z*g+O];for(J(b,C,E,L,g),O=0;O<g;O++)_[Z*g+O]=Math.sqrt(C[O])}}function J(_,g,p,b,C){p[0]=0,b[0]=-V,b[1]=+V;for(var E=1,L=0;E<C;E++){for(var O=(_[E]+E*E-(_[p[L]]+p[L]*p[L]))/(2*E-2*p[L]);O<=b[L];)L--,O=(_[E]+E*E-(_[p[L]]+p[L]*p[L]))/(2*E-2*p[L]);p[++L]=E,b[L]=O,b[L+1]=+V}for(E=0,L=0;E<C;E++){for(;b[L+1]<E;)L++;g[E]=(E-p[L])*(E-p[L])+_[p[L]]}}K.prototype.draw=function(_){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(_,this.buffer,this.middle);for(var g=this.ctx.getImageData(0,0,this.size,this.size),p=new Uint8ClampedArray(this.size*this.size),b=0;b<this.size*this.size;b++){var C=g.data[4*b+3]/255;this.gridOuter[b]=C===1?0:C===0?V:Math.pow(Math.max(0,.5-C),2),this.gridInner[b]=C===1?V:C===0?0:Math.pow(Math.max(0,C-.5),2)}for(te(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),te(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),b=0;b<this.size*this.size;b++)p[b]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[b]-this.gridInner[b])/this.radius+this.cutoff))));return p},F.default=N;var ne=function(_,g){this.requestManager=_,this.localIdeographFontFamily=g,this.entries={}};ne.prototype.setURL=function(_){this.url=_},ne.prototype.getGlyphs=function(_,g){var p=this,b=[];for(var C in _)for(var E=0,L=_[C];E<L.length;E+=1)b.push({stack:C,id:L[E]});r.asyncAll(b,function(O,Z){var Y=O.stack,re=O.id,oe=p.entries[Y];oe||(oe=p.entries[Y]={glyphs:{},requests:{},ranges:{}});var ue=oe.glyphs[re];if(ue===void 0){if(ue=p._tinySDF(oe,Y,re))return oe.glyphs[re]=ue,void Z(null,{stack:Y,id:re,glyph:ue});var ve=Math.floor(re/256);if(256*ve>65535)Z(new Error("glyphs > 65535 not supported"));else if(oe.ranges[ve])Z(null,{stack:Y,id:re,glyph:ue});else{var be=oe.requests[ve];be||(be=oe.requests[ve]=[],ne.loadGlyphRange(Y,ve,p.url,p.requestManager,function(Me,pe){if(pe){for(var Ee in pe)p._doesCharSupportLocalGlyph(+Ee)||(oe.glyphs[+Ee]=pe[+Ee]);oe.ranges[ve]=!0}for(var We=0,Ve=be;We<Ve.length;We+=1)(0,Ve[We])(Me,pe);delete oe.requests[ve]})),be.push(function(Me,pe){Me?Z(Me):pe&&Z(null,{stack:Y,id:re,glyph:pe[re]||null})})}}else Z(null,{stack:Y,id:re,glyph:ue})},function(O,Z){if(O)g(O);else if(Z){for(var Y={},re=0,oe=Z;re<oe.length;re+=1){var ue=oe[re],ve=ue.stack,be=ue.id,Me=ue.glyph;(Y[ve]||(Y[ve]={}))[be]=Me&&{id:Me.id,bitmap:Me.bitmap.clone(),metrics:Me.metrics}}g(null,Y)}})},ne.prototype._doesCharSupportLocalGlyph=function(_){return!!this.localIdeographFontFamily&&(r.isChar["CJK Unified Ideographs"](_)||r.isChar["Hangul Syllables"](_)||r.isChar.Hiragana(_)||r.isChar.Katakana(_))},ne.prototype._tinySDF=function(_,g,p){var b=this.localIdeographFontFamily;if(b&&this._doesCharSupportLocalGlyph(p)){var C=_.tinySDF;if(!C){var E="400";/bold/i.test(g)?E="900":/medium/i.test(g)?E="500":/light/i.test(g)&&(E="200"),C=_.tinySDF=new ne.TinySDF(24,3,8,.25,b,E)}return{id:p,bitmap:new r.AlphaImage({width:30,height:30},C.draw(String.fromCharCode(p))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ne.loadGlyphRange=function(_,g,p,b,C){var E=256*g,L=E+255,O=b.transformRequest(b.normalizeGlyphsURL(p).replace("{fontstack}",_).replace("{range}",E+"-"+L),r.ResourceType.Glyphs);r.getArrayBuffer(O,function(Z,Y){if(Z)C(Z);else if(Y){for(var re={},oe=0,ue=r.parseGlyphPBF(Y);oe<ue.length;oe+=1){var ve=ue[oe];re[ve.id]=ve}C(null,re)}})},ne.TinySDF=F;var se=function(){this.specification=r.styleSpec.light.position};se.prototype.possiblyEvaluate=function(_,g){return r.sphericalToCartesian(_.expression.evaluate(g))},se.prototype.interpolate=function(_,g,p){return{x:r.number(_.x,g.x,p),y:r.number(_.y,g.y,p),z:r.number(_.z,g.z,p)}};var de=new r.Properties({anchor:new r.DataConstantProperty(r.styleSpec.light.anchor),position:new se,color:new r.DataConstantProperty(r.styleSpec.light.color),intensity:new r.DataConstantProperty(r.styleSpec.light.intensity)}),_e=function(_){function g(p){_.call(this),this._transitionable=new r.Transitionable(de),this.setLight(p),this._transitioning=this._transitionable.untransitioned()}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getLight=function(){return this._transitionable.serialize()},g.prototype.setLight=function(p,b){if(b===void 0&&(b={}),!this._validate(r.validateLight,p,b))for(var C in p){var E=p[C];r.endsWith(C,"-transition")?this._transitionable.setTransition(C.slice(0,-11),E):this._transitionable.setValue(C,E)}},g.prototype.updateTransitions=function(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)},g.prototype.hasTransition=function(){return this._transitioning.hasTransition()},g.prototype.recalculate=function(p){this.properties=this._transitioning.possiblyEvaluate(p)},g.prototype._validate=function(p,b,C){return(!C||C.validate!==!1)&&r.emitValidationErrors(this,p.call(r.validateStyle,r.extend({value:b,style:{glyphs:!0,sprite:!0},styleSpec:r.styleSpec})))},g}(r.Evented),Se=function(_,g){this.width=_,this.height=g,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Se.prototype.getDash=function(_,g){var p=_.join(",")+String(g);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(_,g)),this.dashEntry[p]},Se.prototype.getDashRanges=function(_,g,p){var b=[],C=_.length%2==1?-_[_.length-1]*p:0,E=_[0]*p,L=!0;b.push({left:C,right:E,isDash:L,zeroLength:_[0]===0});for(var O=_[0],Z=1;Z<_.length;Z++){var Y=_[Z];b.push({left:C=O*p,right:E=(O+=Y)*p,isDash:L=!L,zeroLength:Y===0})}return b},Se.prototype.addRoundDash=function(_,g,p){for(var b=g/2,C=-p;C<=p;C++)for(var E=this.width*(this.nextRow+p+C),L=0,O=_[L],Z=0;Z<this.width;Z++){Z/O.right>1&&(O=_[++L]);var Y=Math.abs(Z-O.left),re=Math.abs(Z-O.right),oe=Math.min(Y,re),ue=void 0,ve=C/p*(b+1);if(O.isDash){var be=b-Math.abs(ve);ue=Math.sqrt(oe*oe+be*be)}else ue=b-Math.sqrt(oe*oe+ve*ve);this.data[E+Z]=Math.max(0,Math.min(255,ue+128))}},Se.prototype.addRegularDash=function(_){for(var g=_.length-1;g>=0;--g){var p=_[g],b=_[g+1];p.zeroLength?_.splice(g,1):b&&b.isDash===p.isDash&&(b.left=p.left,_.splice(g,1))}var C=_[0],E=_[_.length-1];C.isDash===E.isDash&&(C.left=E.left-this.width,E.right=C.right+this.width);for(var L=this.width*this.nextRow,O=0,Z=_[O],Y=0;Y<this.width;Y++){Y/Z.right>1&&(Z=_[++O]);var re=Math.abs(Y-Z.left),oe=Math.abs(Y-Z.right),ue=Math.min(re,oe);this.data[L+Y]=Math.max(0,Math.min(255,(Z.isDash?ue:-ue)+128))}},Se.prototype.addDash=function(_,g){var p=g?7:0,b=2*p+1;if(this.nextRow+b>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var C=0,E=0;E<_.length;E++)C+=_[E];if(C!==0){var L=this.width/C,O=this.getDashRanges(_,this.width,L);g?this.addRoundDash(O,L,p):this.addRegularDash(O)}var Z={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:C};return this.nextRow+=b,this.dirty=!0,Z},Se.prototype.bind=function(_){var g=_.gl;this.texture?(g.bindTexture(g.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,g.texSubImage2D(g.TEXTURE_2D,0,0,0,this.width,this.height,g.ALPHA,g.UNSIGNED_BYTE,this.data))):(this.texture=g.createTexture(),g.bindTexture(g.TEXTURE_2D,this.texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR),g.texImage2D(g.TEXTURE_2D,0,g.ALPHA,this.width,this.height,0,g.ALPHA,g.UNSIGNED_BYTE,this.data))};var ce=function _(g,p){this.workerPool=g,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var b=this.workerPool.acquire(this.id),C=0;C<b.length;C++){var E=new _.Actor(b[C],p,this.id);E.name="Worker "+C,this.actors.push(E)}};function Ie(_,g,p){var b=function(C,E){if(C)return p(C);if(E){var L=r.pick(r.extend(E,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(L.vectorLayers=E.vector_layers,L.vectorLayerIds=L.vectorLayers.map(function(O){return O.id})),L.tiles=g.canonicalizeTileset(L,_.url),p(null,L)}};return _.url?r.getJSON(g.transformRequest(g.normalizeSourceURL(_.url),r.ResourceType.Source),b):r.browser.frame(function(){return b(null,_)})}ce.prototype.broadcast=function(_,g,p){r.asyncAll(this.actors,function(b,C){b.send(_,g,C)},p=p||function(){})},ce.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},ce.prototype.remove=function(){this.actors.forEach(function(_){_.remove()}),this.actors=[],this.workerPool.release(this.id)},ce.Actor=r.Actor;var he=function(_,g,p){this.bounds=r.LngLatBounds.convert(this.validateBounds(_)),this.minzoom=g||0,this.maxzoom=p||24};he.prototype.validateBounds=function(_){return Array.isArray(_)&&_.length===4?[Math.max(-180,_[0]),Math.max(-90,_[1]),Math.min(180,_[2]),Math.min(90,_[3])]:[-180,-90,180,90]},he.prototype.contains=function(_){var g=Math.pow(2,_.z),p=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*g),b=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*g),C=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*g),E=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*g);return _.x>=p&&_.x<C&&_.y>=b&&_.y<E};var we=function(_){function g(p,b,C,E){if(_.call(this),this.id=p,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(b,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},b),this._collectResourceTiming=b.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.load=function(){var p=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ie(this._options,this.map._requestManager,function(b,C){p._tileJSONRequest=null,p._loaded=!0,b?p.fire(new r.ErrorEvent(b)):C&&(r.extend(p,C),C.bounds&&(p.tileBounds=new he(C.bounds,p.minzoom,p.maxzoom)),r.postTurnstileEvent(C.tiles,p.map._requestManager._customAccessToken),r.postMapLoadEvent(C.tiles,p.map._getMapId(),p.map._requestManager._skuToken,p.map._requestManager._customAccessToken),p.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),p.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},g.prototype.loaded=function(){return this._loaded},g.prototype.hasTile=function(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)},g.prototype.onAdd=function(p){this.map=p,this.load()},g.prototype.setSourceProperty=function(p){this._tileJSONRequest&&this._tileJSONRequest.cancel(),p(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},g.prototype.setTiles=function(p){var b=this;return this.setSourceProperty(function(){b._options.tiles=p}),this},g.prototype.setUrl=function(p){var b=this;return this.setSourceProperty(function(){b.url=p,b._options.url=p}),this},g.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},g.prototype.serialize=function(){return r.extend({},this._options)},g.prototype.loadTile=function(p,b){var C=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme)),E={request:this.map._requestManager.transformRequest(C,r.ResourceType.Tile),uid:p.uid,tileID:p.tileID,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function L(O,Z){return delete p.request,p.aborted?b(null):O&&O.status!==404?b(O):(Z&&Z.resourceTiming&&(p.resourceTiming=Z.resourceTiming),this.map._refreshExpiredTiles&&Z&&p.setExpiryData(Z),p.loadVectorData(Z,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),b(null),void(p.reloadCallback&&(this.loadTile(p,p.reloadCallback),p.reloadCallback=null)))}E.request.collectResourceTiming=this._collectResourceTiming,p.actor&&p.state!=="expired"?p.state==="loading"?p.reloadCallback=b:p.request=p.actor.send("reloadTile",E,L.bind(this)):(p.actor=this.dispatcher.getActor(),p.request=p.actor.send("loadTile",E,L.bind(this)))},g.prototype.abortTile=function(p){p.request&&(p.request.cancel(),delete p.request),p.actor&&p.actor.send("abortTile",{uid:p.uid,type:this.type,source:this.id},void 0)},g.prototype.unloadTile=function(p){p.unloadVectorData(),p.actor&&p.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id},void 0)},g.prototype.hasTransition=function(){return!1},g}(r.Evented),Oe=function(_){function g(p,b,C,E){_.call(this),this.id=p,this.dispatcher=C,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},b),r.extend(this,r.pick(b,["url","scheme","tileSize"]))}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.load=function(){var p=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ie(this._options,this.map._requestManager,function(b,C){p._tileJSONRequest=null,p._loaded=!0,b?p.fire(new r.ErrorEvent(b)):C&&(r.extend(p,C),C.bounds&&(p.tileBounds=new he(C.bounds,p.minzoom,p.maxzoom)),r.postTurnstileEvent(C.tiles),r.postMapLoadEvent(C.tiles,p.map._getMapId(),p.map._requestManager._skuToken),p.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),p.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},g.prototype.loaded=function(){return this._loaded},g.prototype.onAdd=function(p){this.map=p,this.load()},g.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},g.prototype.serialize=function(){return r.extend({},this._options)},g.prototype.hasTile=function(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)},g.prototype.loadTile=function(p,b){var C=this,E=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);p.request=r.getImage(this.map._requestManager.transformRequest(E,r.ResourceType.Tile),function(L,O){if(delete p.request,p.aborted)p.state="unloaded",b(null);else if(L)p.state="errored",b(L);else if(O){C.map._refreshExpiredTiles&&p.setExpiryData(O),delete O.cacheControl,delete O.expires;var Z=C.map.painter.context,Y=Z.gl;p.texture=C.map.painter.getTileTexture(O.width),p.texture?p.texture.update(O,{useMipmap:!0}):(p.texture=new r.Texture(Z,O,Y.RGBA,{useMipmap:!0}),p.texture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),Z.extTextureFilterAnisotropic&&Y.texParameterf(Y.TEXTURE_2D,Z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Z.extTextureFilterAnisotropicMax)),p.state="loaded",r.cacheEntryPossiblyAdded(C.dispatcher),b(null)}})},g.prototype.abortTile=function(p,b){p.request&&(p.request.cancel(),delete p.request),b()},g.prototype.unloadTile=function(p,b){p.texture&&this.map.painter.saveTileTexture(p.texture),b()},g.prototype.hasTransition=function(){return!1},g}(r.Evented),Ye=function(_){function g(p,b,C,E){_.call(this,p,b,C,E),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},b),this.encoding=b.encoding||"mapbox"}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},g.prototype.loadTile=function(p,b){var C=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function E(L,O){L&&(p.state="errored",b(L)),O&&(p.dem=O,p.needsHillshadePrepare=!0,p.state="loaded",b(null))}p.request=r.getImage(this.map._requestManager.transformRequest(C,r.ResourceType.Tile),(function(L,O){if(delete p.request,p.aborted)p.state="unloaded",b(null);else if(L)p.state="errored",b(L);else if(O){this.map._refreshExpiredTiles&&p.setExpiryData(O),delete O.cacheControl,delete O.expires;var Z=r.window.ImageBitmap&&O instanceof r.window.ImageBitmap&&r.offscreenCanvasSupported()?O:r.browser.getImageData(O,1),Y={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:Z,encoding:this.encoding};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",Y,E.bind(this)))}}).bind(this)),p.neighboringTiles=this._getNeighboringTiles(p.tileID)},g.prototype._getNeighboringTiles=function(p){var b=p.canonical,C=Math.pow(2,b.z),E=(b.x-1+C)%C,L=b.x===0?p.wrap-1:p.wrap,O=(b.x+1+C)%C,Z=b.x+1===C?p.wrap+1:p.wrap,Y={};return Y[new r.OverscaledTileID(p.overscaledZ,L,b.z,E,b.y).key]={backfilled:!1},Y[new r.OverscaledTileID(p.overscaledZ,Z,b.z,O,b.y).key]={backfilled:!1},b.y>0&&(Y[new r.OverscaledTileID(p.overscaledZ,L,b.z,E,b.y-1).key]={backfilled:!1},Y[new r.OverscaledTileID(p.overscaledZ,p.wrap,b.z,b.x,b.y-1).key]={backfilled:!1},Y[new r.OverscaledTileID(p.overscaledZ,Z,b.z,O,b.y-1).key]={backfilled:!1}),b.y+1<C&&(Y[new r.OverscaledTileID(p.overscaledZ,L,b.z,E,b.y+1).key]={backfilled:!1},Y[new r.OverscaledTileID(p.overscaledZ,p.wrap,b.z,b.x,b.y+1).key]={backfilled:!1},Y[new r.OverscaledTileID(p.overscaledZ,Z,b.z,O,b.y+1).key]={backfilled:!1}),Y},g.prototype.unloadTile=function(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded",p.actor&&p.actor.send("removeDEMTile",{uid:p.uid,source:this.id})},g}(Oe),at=function(_){function g(p,b,C,E){_.call(this),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=C.getActor(),this.setEventedParent(E),this._data=b.data,this._options=r.extend({},b),this._collectResourceTiming=b.collectResourceTiming,this._resourceTiming=[],b.maxzoom!==void 0&&(this.maxzoom=b.maxzoom),b.type&&(this.type=b.type),b.attribution&&(this.attribution=b.attribution),this.promoteId=b.promoteId;var L=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:b.cluster||!1,geojsonVtOptions:{buffer:(b.buffer!==void 0?b.buffer:128)*L,tolerance:(b.tolerance!==void 0?b.tolerance:.375)*L,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:b.lineMetrics||!1,generateId:b.generateId||!1},superclusterOptions:{maxZoom:b.clusterMaxZoom!==void 0?Math.min(b.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,b.clusterMinPoints||2),extent:r.EXTENT,radius:(b.clusterRadius||50)*L,log:!1,generateId:b.generateId||!1},clusterProperties:b.clusterProperties,filter:b.filter},b.workerOptions)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.load=function(){var p=this;this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(b){if(b)p.fire(new r.ErrorEvent(b));else{var C={dataType:"source",sourceDataType:"metadata"};p._collectResourceTiming&&p._resourceTiming&&p._resourceTiming.length>0&&(C.resourceTiming=p._resourceTiming,p._resourceTiming=[]),p.fire(new r.Event("data",C))}})},g.prototype.onAdd=function(p){this.map=p,this.load()},g.prototype.setData=function(p){var b=this;return this._data=p,this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(C){if(C)b.fire(new r.ErrorEvent(C));else{var E={dataType:"source",sourceDataType:"content"};b._collectResourceTiming&&b._resourceTiming&&b._resourceTiming.length>0&&(E.resourceTiming=b._resourceTiming,b._resourceTiming=[]),b.fire(new r.Event("data",E))}}),this},g.prototype.getClusterExpansionZoom=function(p,b){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},b),this},g.prototype.getClusterChildren=function(p,b){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},b),this},g.prototype.getClusterLeaves=function(p,b,C,E){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:b,offset:C},E),this},g.prototype._updateWorkerData=function(p){var b=this;this._loaded=!1;var C=r.extend({},this.workerOptions),E=this._data;typeof E=="string"?(C.request=this.map._requestManager.transformRequest(r.browser.resolveURL(E),r.ResourceType.Source),C.request.collectResourceTiming=this._collectResourceTiming):C.data=JSON.stringify(E),this.actor.send(this.type+".loadData",C,function(L,O){b._removed||O&&O.abandoned||(b._loaded=!0,O&&O.resourceTiming&&O.resourceTiming[b.id]&&(b._resourceTiming=O.resourceTiming[b.id].slice(0)),b.actor.send(b.type+".coalesce",{source:C.source},null),p(L))})},g.prototype.loaded=function(){return this._loaded},g.prototype.loadTile=function(p,b){var C=this,E=p.actor?"reloadTile":"loadTile";p.actor=this.actor,p.request=this.actor.send(E,{type:this.type,uid:p.uid,tileID:p.tileID,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(L,O){return delete p.request,p.unloadVectorData(),p.aborted?b(null):L?b(L):(p.loadVectorData(O,C.map.painter,E==="reloadTile"),b(null))})},g.prototype.abortTile=function(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0},g.prototype.unloadTile=function(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})},g.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},g.prototype.serialize=function(){return r.extend({},this._options,{type:this.type,data:this._data})},g.prototype.hasTransition=function(){return!1},g}(r.Evented),yt=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),De=function(_){function g(p,b,C,E){_.call(this),this.id=p,this.dispatcher=C,this.coordinates=b.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=b}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.load=function(p,b){var C=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),function(E,L){C._loaded=!0,E?C.fire(new r.ErrorEvent(E)):L&&(C.image=L,p&&(C.coordinates=p),b&&b(),C._finishLoading())})},g.prototype.loaded=function(){return this._loaded},g.prototype.updateImage=function(p){var b=this;return this.image&&p.url?(this.options.url=p.url,this.load(p.coordinates,function(){b.texture=null}),this):this},g.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))},g.prototype.onAdd=function(p){this.map=p,this.load()},g.prototype.setCoordinates=function(p){var b=this;this.coordinates=p;var C=p.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(L){for(var O=1/0,Z=1/0,Y=-1/0,re=-1/0,oe=0,ue=L;oe<ue.length;oe+=1){var ve=ue[oe];O=Math.min(O,ve.x),Z=Math.min(Z,ve.y),Y=Math.max(Y,ve.x),re=Math.max(re,ve.y)}var be=Math.max(Y-O,re-Z),Me=Math.max(0,Math.floor(-Math.log(be)/Math.LN2)),pe=Math.pow(2,Me);return new r.CanonicalTileID(Me,Math.floor((O+Y)/2*pe),Math.floor((Z+re)/2*pe))}(C),this.minzoom=this.maxzoom=this.tileID.z;var E=C.map(function(L){return b.tileID.getTilePoint(L)._round()});return this._boundsArray=new r.StructArrayLayout4i8,this._boundsArray.emplaceBack(E[0].x,E[0].y,0,0),this._boundsArray.emplaceBack(E[1].x,E[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(E[3].x,E[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(E[2].x,E[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this},g.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var p=this.map.painter.context,b=p.gl;for(var C in this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,yt.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new r.Texture(p,this.image,b.RGBA),this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE)),this.tiles){var E=this.tiles[C];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},g.prototype.loadTile=function(p,b){this.tileID&&this.tileID.equals(p.tileID.canonical)?(this.tiles[String(p.tileID.wrap)]=p,p.buckets={},b(null)):(p.state="errored",b(null))},g.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},g.prototype.hasTransition=function(){return!1},g}(r.Evented),jt=function(_){function g(p,b,C,E){_.call(this,p,b,C,E),this.roundZoom=!0,this.type="video",this.options=b}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.load=function(){var p=this;this._loaded=!1;var b=this.options;this.urls=[];for(var C=0,E=b.urls;C<E.length;C+=1)this.urls.push(this.map._requestManager.transformRequest(E[C],r.ResourceType.Source).url);r.getVideo(this.urls,function(L,O){p._loaded=!0,L?p.fire(new r.ErrorEvent(L)):O&&(p.video=O,p.video.loop=!0,p.video.setAttribute("playsinline",""),p.video.addEventListener("playing",function(){p.map.triggerRepaint()}),p.map&&p.video.play(),p._finishLoading())})},g.prototype.pause=function(){this.video&&this.video.pause()},g.prototype.play=function(){this.video&&this.video.play()},g.prototype.seek=function(p){if(this.video){var b=this.video.seekable;p<b.start(0)||p>b.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+b.start(0)+" and "+b.end(0)+"-second mark."))):this.video.currentTime=p}},g.prototype.getVideo=function(){return this.video},g.prototype.onAdd=function(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},g.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var p=this.map.painter.context,b=p.gl;for(var C in this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,yt.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE),b.texSubImage2D(b.TEXTURE_2D,0,0,0,b.RGBA,b.UNSIGNED_BYTE,this.video)):(this.texture=new r.Texture(p,this.video,b.RGBA),this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE)),this.tiles){var E=this.tiles[C];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},g.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},g.prototype.hasTransition=function(){return this.video&&!this.video.paused},g}(De),pa=function(_){function g(p,b,C,E){_.call(this,p,b,C,E),b.coordinates?Array.isArray(b.coordinates)&&b.coordinates.length===4&&!b.coordinates.some(function(L){return!Array.isArray(L)||L.length!==2||L.some(function(O){return typeof O!="number"})})||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+p,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+p,null,'missing required property "coordinates"'))),b.animate&&typeof b.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError("sources."+p,null,'optional "animate" property must be a boolean value'))),b.canvas?typeof b.canvas=="string"||b.canvas instanceof r.window.HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+p,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+p,null,'missing required property "canvas"'))),this.options=b,this.animate=b.animate===void 0||b.animate}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof r.window.HTMLCanvasElement?this.options.canvas:r.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},g.prototype.getCanvas=function(){return this.canvas},g.prototype.onAdd=function(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()},g.prototype.onRemove=function(){this.pause()},g.prototype.prepare=function(){var p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var b=this.map.painter.context,C=b.gl;for(var E in this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,yt.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(p||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.Texture(b,this.canvas,C.RGBA,{premultiply:!0}),this.tiles){var L=this.tiles[E];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture)}}},g.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},g.prototype.hasTransition=function(){return this._playing},g.prototype._hasInvalidDimensions=function(){for(var p=0,b=[this.canvas.width,this.canvas.height];p<b.length;p+=1){var C=b[p];if(isNaN(C)||C<=0)return!0}return!1},g}(De),$t={vector:we,raster:Oe,"raster-dem":Ye,geojson:at,video:jt,image:De,canvas:pa};function Ua(_,g){var p=r.identity([]);return r.translate(p,p,[1,1,0]),r.scale(p,p,[.5*_.width,.5*_.height,1]),r.multiply(p,p,_.calculatePosMatrix(g.toUnwrapped()))}function bt(_,g,p,b,C,E){var L=function(Me,pe,Ee){if(Me)for(var We=0,Ve=Me;We<Ve.length;We+=1){var je=pe[Ve[We]];if(je&&je.source===Ee&&je.type==="fill-extrusion")return!0}else for(var He in pe){var et=pe[He];if(et.source===Ee&&et.type==="fill-extrusion")return!0}return!1}(C&&C.layers,g,_.id),O=E.maxPitchScaleFactor(),Z=_.tilesIn(b,O,L);Z.sort(ui);for(var Y=[],re=0,oe=Z;re<oe.length;re+=1){var ue=oe[re];Y.push({wrappedTileID:ue.tileID.wrapped().key,queryResults:ue.tile.queryRenderedFeatures(g,p,_._state,ue.queryGeometry,ue.cameraQueryGeometry,ue.scale,C,E,O,Ua(_.transform,ue.tileID))})}var ve=function(Me){for(var pe={},Ee={},We=0,Ve=Me;We<Ve.length;We+=1){var je=Ve[We],He=je.queryResults,et=je.wrappedTileID,ht=Ee[et]=Ee[et]||{};for(var At in He)for(var It=He[At],Zt=ht[At]=ht[At]||{},ca=pe[At]=pe[At]||[],ma=0,_a=It;ma<_a.length;ma+=1){var fi=_a[ma];Zt[fi.featureIndex]||(Zt[fi.featureIndex]=!0,ca.push(fi))}}return pe}(Y);for(var be in ve)ve[be].forEach(function(Me){var pe=Me.feature,Ee=_.getFeatureState(pe.layer["source-layer"],pe.id);pe.source=pe.layer.source,pe.layer["source-layer"]&&(pe.sourceLayer=pe.layer["source-layer"]),pe.state=Ee});return ve}function ui(_,g){var p=_.tileID,b=g.tileID;return p.overscaledZ-b.overscaledZ||p.canonical.y-b.canonical.y||p.wrap-b.wrap||p.canonical.x-b.canonical.x}var Ca=function(_,g){this.max=_,this.onRemove=g,this.reset()};Ca.prototype.reset=function(){for(var _ in this.data)for(var g=0,p=this.data[_];g<p.length;g+=1){var b=p[g];b.timeout&&clearTimeout(b.timeout),this.onRemove(b.value)}return this.data={},this.order=[],this},Ca.prototype.add=function(_,g,p){var b=this,C=_.wrapped().key;this.data[C]===void 0&&(this.data[C]=[]);var E={value:g,timeout:void 0};if(p!==void 0&&(E.timeout=setTimeout(function(){b.remove(_,E)},p)),this.data[C].push(E),this.order.push(C),this.order.length>this.max){var L=this._getAndRemoveByKey(this.order[0]);L&&this.onRemove(L)}return this},Ca.prototype.has=function(_){return _.wrapped().key in this.data},Ca.prototype.getAndRemove=function(_){return this.has(_)?this._getAndRemoveByKey(_.wrapped().key):null},Ca.prototype._getAndRemoveByKey=function(_){var g=this.data[_].shift();return g.timeout&&clearTimeout(g.timeout),this.data[_].length===0&&delete this.data[_],this.order.splice(this.order.indexOf(_),1),g.value},Ca.prototype.getByKey=function(_){var g=this.data[_];return g?g[0].value:null},Ca.prototype.get=function(_){return this.has(_)?this.data[_.wrapped().key][0].value:null},Ca.prototype.remove=function(_,g){if(!this.has(_))return this;var p=_.wrapped().key,b=g===void 0?0:this.data[p].indexOf(g),C=this.data[p][b];return this.data[p].splice(b,1),C.timeout&&clearTimeout(C.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(C.value),this.order.splice(this.order.indexOf(p),1),this},Ca.prototype.setMaxSize=function(_){for(this.max=_;this.order.length>this.max;){var g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this},Ca.prototype.filter=function(_){var g=[];for(var p in this.data)for(var b=0,C=this.data[p];b<C.length;b+=1){var E=C[b];_(E.value)||g.push(E)}for(var L=0,O=g;L<O.length;L+=1){var Z=O[L];this.remove(Z.value.tileID,Z)}};var ii=function(_,g,p){this.context=_;var b=_.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),_.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete g.arrayBuffer};ii.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ii.prototype.updateData=function(_){var g=this.context.gl;this.context.unbindVAO(),this.bind(),g.bufferSubData(g.ELEMENT_ARRAY_BUFFER,0,_.arrayBuffer)},ii.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var zi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},An=function(_,g,p,b){this.length=g.length,this.attributes=p,this.itemSize=g.bytesPerElement,this.dynamicDraw=b,this.context=_;var C=_.gl;this.buffer=C.createBuffer(),_.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete g.arrayBuffer};An.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},An.prototype.updateData=function(_){var g=this.context.gl;this.bind(),g.bufferSubData(g.ARRAY_BUFFER,0,_.arrayBuffer)},An.prototype.enableAttributes=function(_,g){for(var p=0;p<this.attributes.length;p++){var b=g.attributes[this.attributes[p].name];b!==void 0&&_.enableVertexAttribArray(b)}},An.prototype.setVertexAttribPointers=function(_,g,p){for(var b=0;b<this.attributes.length;b++){var C=this.attributes[b],E=g.attributes[C.name];E!==void 0&&_.vertexAttribPointer(E,C.components,_[zi[C.type]],!1,this.itemSize,C.offset+this.itemSize*(p||0))}},An.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var xe=function(_){this.gl=_.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};xe.prototype.get=function(){return this.current},xe.prototype.set=function(_){},xe.prototype.getDefault=function(){return this.default},xe.prototype.setDefault=function(){this.set(this.default)};var Ge=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return r.Color.transparent},g.prototype.set=function(p){var b=this.current;(p.r!==b.r||p.g!==b.g||p.b!==b.b||p.a!==b.a||this.dirty)&&(this.gl.clearColor(p.r,p.g,p.b,p.a),this.current=p,this.dirty=!1)},g}(xe),qe=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return 1},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.clearDepth(p),this.current=p,this.dirty=!1)},g}(xe),ut=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return 0},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.clearStencil(p),this.current=p,this.dirty=!1)},g}(xe),gt=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return[!0,!0,!0,!0]},g.prototype.set=function(p){var b=this.current;(p[0]!==b[0]||p[1]!==b[1]||p[2]!==b[2]||p[3]!==b[3]||this.dirty)&&(this.gl.colorMask(p[0],p[1],p[2],p[3]),this.current=p,this.dirty=!1)},g}(xe),Pe=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return!0},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.depthMask(p),this.current=p,this.dirty=!1)},g}(xe),Qe=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return 255},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.stencilMask(p),this.current=p,this.dirty=!1)},g}(xe),ze=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},g.prototype.set=function(p){var b=this.current;(p.func!==b.func||p.ref!==b.ref||p.mask!==b.mask||this.dirty)&&(this.gl.stencilFunc(p.func,p.ref,p.mask),this.current=p,this.dirty=!1)},g}(xe),st=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){var p=this.gl;return[p.KEEP,p.KEEP,p.KEEP]},g.prototype.set=function(p){var b=this.current;(p[0]!==b[0]||p[1]!==b[1]||p[2]!==b[2]||this.dirty)&&(this.gl.stencilOp(p[0],p[1],p[2]),this.current=p,this.dirty=!1)},g}(xe),nt=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(p){if(p!==this.current||this.dirty){var b=this.gl;p?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST),this.current=p,this.dirty=!1}},g}(xe),xt=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return[0,1]},g.prototype.set=function(p){var b=this.current;(p[0]!==b[0]||p[1]!==b[1]||this.dirty)&&(this.gl.depthRange(p[0],p[1]),this.current=p,this.dirty=!1)},g}(xe),Et=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(p){if(p!==this.current||this.dirty){var b=this.gl;p?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST),this.current=p,this.dirty=!1}},g}(xe),ta=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.LESS},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.depthFunc(p),this.current=p,this.dirty=!1)},g}(xe),oa=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(p){if(p!==this.current||this.dirty){var b=this.gl;p?b.enable(b.BLEND):b.disable(b.BLEND),this.current=p,this.dirty=!1}},g}(xe),Na=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){var p=this.gl;return[p.ONE,p.ZERO]},g.prototype.set=function(p){var b=this.current;(p[0]!==b[0]||p[1]!==b[1]||this.dirty)&&(this.gl.blendFunc(p[0],p[1]),this.current=p,this.dirty=!1)},g}(xe),mi=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return r.Color.transparent},g.prototype.set=function(p){var b=this.current;(p.r!==b.r||p.g!==b.g||p.b!==b.b||p.a!==b.a||this.dirty)&&(this.gl.blendColor(p.r,p.g,p.b,p.a),this.current=p,this.dirty=!1)},g}(xe),di=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.FUNC_ADD},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.blendEquation(p),this.current=p,this.dirty=!1)},g}(xe),Tn=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(p){if(p!==this.current||this.dirty){var b=this.gl;p?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE),this.current=p,this.dirty=!1}},g}(xe),Ki=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.BACK},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.cullFace(p),this.current=p,this.dirty=!1)},g}(xe),qn=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.CCW},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.frontFace(p),this.current=p,this.dirty=!1)},g}(xe),En=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)},g}(xe),xr=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.TEXTURE0},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.activeTexture(p),this.current=p,this.dirty=!1)},g}(xe),Wr=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){var p=this.gl;return[0,0,p.drawingBufferWidth,p.drawingBufferHeight]},g.prototype.set=function(p){var b=this.current;(p[0]!==b[0]||p[1]!==b[1]||p[2]!==b[2]||p[3]!==b[3]||this.dirty)&&(this.gl.viewport(p[0],p[1],p[2],p[3]),this.current=p,this.dirty=!1)},g}(xe),Ri=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){if(p!==this.current||this.dirty){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,p),this.current=p,this.dirty=!1}},g}(xe),Cn=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){if(p!==this.current||this.dirty){var b=this.gl;b.bindRenderbuffer(b.RENDERBUFFER,p),this.current=p,this.dirty=!1}},g}(xe),ao=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){if(p!==this.current||this.dirty){var b=this.gl;b.bindTexture(b.TEXTURE_2D,p),this.current=p,this.dirty=!1}},g}(xe),So=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){if(p!==this.current||this.dirty){var b=this.gl;b.bindBuffer(b.ARRAY_BUFFER,p),this.current=p,this.dirty=!1}},g}(xe),gs=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){var b=this.gl;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,p),this.current=p,this.dirty=!1},g}(xe),Fn=function(_){function g(p){_.call(this,p),this.vao=p.extVertexArrayObject}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){this.vao&&(p!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(p),this.current=p,this.dirty=!1)},g}(xe),qr=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return 4},g.prototype.set=function(p){if(p!==this.current||this.dirty){var b=this.gl;b.pixelStorei(b.UNPACK_ALIGNMENT,p),this.current=p,this.dirty=!1}},g}(xe),al=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(p){if(p!==this.current||this.dirty){var b=this.gl;b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p),this.current=p,this.dirty=!1}},g}(xe),pn=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(p){if(p!==this.current||this.dirty){var b=this.gl;b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,p),this.current=p,this.dirty=!1}},g}(xe),ni=function(_){function g(p,b){_.call(this,p),this.context=p,this.parent=b}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g}(xe),H=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.setDirty=function(){this.dirty=!0},g.prototype.set=function(p){if(p!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var b=this.gl;b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,p,0),this.current=p,this.dirty=!1}},g}(ni),j=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.set=function(p){if(p!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var b=this.gl;b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,p),this.current=p,this.dirty=!1}},g}(ni),ee=function(_,g,p,b){this.context=_,this.width=g,this.height=p;var C=this.framebuffer=_.gl.createFramebuffer();this.colorAttachment=new H(_,C),b&&(this.depthAttachment=new j(_,C))};ee.prototype.destroy=function(){var _=this.context.gl,g=this.colorAttachment.get();if(g&&_.deleteTexture(g),this.depthAttachment){var p=this.depthAttachment.get();p&&_.deleteRenderbuffer(p)}_.deleteFramebuffer(this.framebuffer)};var le=function(_,g,p){this.func=_,this.mask=g,this.range=p};le.ReadOnly=!1,le.ReadWrite=!0,le.disabled=new le(519,le.ReadOnly,[0,1]);var me=function(_,g,p,b,C,E){this.test=_,this.ref=g,this.mask=p,this.fail=b,this.depthFail=C,this.pass=E};me.disabled=new me({func:519,mask:0},0,0,7680,7680,7680);var Le=function(_,g,p){this.blendFunction=_,this.blendColor=g,this.mask=p};Le.disabled=new Le(Le.Replace=[1,0],r.Color.transparent,[!1,!1,!1,!1]),Le.unblended=new Le(Le.Replace,r.Color.transparent,[!0,!0,!0,!0]),Le.alphaBlended=new Le([1,771],r.Color.transparent,[!0,!0,!0,!0]);var Te=function(_,g,p){this.enable=_,this.mode=g,this.frontFace=p};Te.disabled=new Te(!1,1029,2305),Te.backCCW=new Te(!0,1029,2305);var ae=function(_){this.gl=_,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ge(this),this.clearDepth=new qe(this),this.clearStencil=new ut(this),this.colorMask=new gt(this),this.depthMask=new Pe(this),this.stencilMask=new Qe(this),this.stencilFunc=new ze(this),this.stencilOp=new st(this),this.stencilTest=new nt(this),this.depthRange=new xt(this),this.depthTest=new Et(this),this.depthFunc=new ta(this),this.blend=new oa(this),this.blendFunc=new Na(this),this.blendColor=new mi(this),this.blendEquation=new di(this),this.cullFace=new Tn(this),this.cullFaceSide=new Ki(this),this.frontFace=new qn(this),this.program=new En(this),this.activeTexture=new xr(this),this.viewport=new Wr(this),this.bindFramebuffer=new Ri(this),this.bindRenderbuffer=new Cn(this),this.bindTexture=new ao(this),this.bindVertexBuffer=new So(this),this.bindElementBuffer=new gs(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Fn(this),this.pixelStoreUnpack=new qr(this),this.pixelStoreUnpackPremultiplyAlpha=new al(this),this.pixelStoreUnpackFlipY=new pn(this),this.extTextureFilterAnisotropic=_.getExtension("EXT_texture_filter_anisotropic")||_.getExtension("MOZ_EXT_texture_filter_anisotropic")||_.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=_.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=_.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(_.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=_.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=_.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=_.getParameter(_.MAX_TEXTURE_SIZE)};ae.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},ae.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},ae.prototype.createIndexBuffer=function(_,g){return new ii(this,_,g)},ae.prototype.createVertexBuffer=function(_,g,p){return new An(this,_,g,p)},ae.prototype.createRenderbuffer=function(_,g,p){var b=this.gl,C=b.createRenderbuffer();return this.bindRenderbuffer.set(C),b.renderbufferStorage(b.RENDERBUFFER,_,g,p),this.bindRenderbuffer.set(null),C},ae.prototype.createFramebuffer=function(_,g,p){return new ee(this,_,g,p)},ae.prototype.clear=function(_){var g=_.color,p=_.depth,b=this.gl,C=0;g&&(C|=b.COLOR_BUFFER_BIT,this.clearColor.set(g),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(C|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),b.clear(C)},ae.prototype.setCullFace=function(_){_.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(_.mode),this.frontFace.set(_.frontFace))},ae.prototype.setDepthMode=function(_){_.func!==this.gl.ALWAYS||_.mask?(this.depthTest.set(!0),this.depthFunc.set(_.func),this.depthMask.set(_.mask),this.depthRange.set(_.range)):this.depthTest.set(!1)},ae.prototype.setStencilMode=function(_){_.test.func!==this.gl.ALWAYS||_.mask?(this.stencilTest.set(!0),this.stencilMask.set(_.mask),this.stencilOp.set([_.fail,_.depthFail,_.pass]),this.stencilFunc.set({func:_.test.func,ref:_.ref,mask:_.test.mask})):this.stencilTest.set(!1)},ae.prototype.setColorMode=function(_){r.deepEqual(_.blendFunction,Le.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(_.blendFunction),this.blendColor.set(_.blendColor)),this.colorMask.set(_.mask)},ae.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ye=function(_){function g(p,b,C){var E=this;_.call(this),this.id=p,this.dispatcher=C,this.on("data",function(L){L.dataType==="source"&&L.sourceDataType==="metadata"&&(E._sourceLoaded=!0),E._sourceLoaded&&!E._paused&&L.dataType==="source"&&L.sourceDataType==="content"&&(E.reload(),E.transform&&E.update(E.transform))}),this.on("error",function(){E._sourceErrored=!0}),this._source=function(L,O,Z,Y){var re=new $t[O.type](L,O,Z,Y);if(re.id!==L)throw new Error("Expected Source id to be "+L+" instead of "+re.id);return r.bindAll(["load","abort","unload","serialize","prepare"],re),re}(p,b,C,this),this._tiles={},this._cache=new Ca(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new r.SourceFeatureState}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.onAdd=function(p){this.map=p,this._maxTileCacheSize=p?p._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(p)},g.prototype.onRemove=function(p){this._source&&this._source.onRemove&&this._source.onRemove(p)},g.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var p in this._tiles){var b=this._tiles[p];if(b.state!=="loaded"&&b.state!=="errored")return!1}return!0},g.prototype.getSource=function(){return this._source},g.prototype.pause=function(){this._paused=!0},g.prototype.resume=function(){if(this._paused){var p=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,p&&this.reload(),this.transform&&this.update(this.transform)}},g.prototype._loadTile=function(p,b){return this._source.loadTile(p,b)},g.prototype._unloadTile=function(p){if(this._source.unloadTile)return this._source.unloadTile(p,function(){})},g.prototype._abortTile=function(p){if(this._source.abortTile)return this._source.abortTile(p,function(){})},g.prototype.serialize=function(){return this._source.serialize()},g.prototype.prepare=function(p){for(var b in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var C=this._tiles[b];C.upload(p),C.prepare(this.map.style.imageManager)}},g.prototype.getIds=function(){return r.values(this._tiles).map(function(p){return p.tileID}).sort(Ne).map(function(p){return p.key})},g.prototype.getRenderableIds=function(p){var b=this,C=[];for(var E in this._tiles)this._isIdRenderable(E,p)&&C.push(this._tiles[E]);return p?C.sort(function(L,O){var Z=L.tileID,Y=O.tileID,re=new r.Point(Z.canonical.x,Z.canonical.y)._rotate(b.transform.angle),oe=new r.Point(Y.canonical.x,Y.canonical.y)._rotate(b.transform.angle);return Z.overscaledZ-Y.overscaledZ||oe.y-re.y||oe.x-re.x}).map(function(L){return L.tileID.key}):C.map(function(L){return L.tileID}).sort(Ne).map(function(L){return L.key})},g.prototype.hasRenderableParent=function(p){var b=this.findLoadedParent(p,0);return!!b&&this._isIdRenderable(b.tileID.key)},g.prototype._isIdRenderable=function(p,b){return this._tiles[p]&&this._tiles[p].hasData()&&!this._coveredTiles[p]&&(b||!this._tiles[p].holdingForFade())},g.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var p in this._cache.reset(),this._tiles)this._tiles[p].state!=="errored"&&this._reloadTile(p,"reloading")},g.prototype._reloadTile=function(p,b){var C=this._tiles[p];C&&(C.state!=="loading"&&(C.state=b),this._loadTile(C,this._tileLoaded.bind(this,C,p,b)))},g.prototype._tileLoaded=function(p,b,C,E){if(E)return p.state="errored",void(E.status!==404?this._source.fire(new r.ErrorEvent(E,{tile:p})):this.update(this.transform));p.timeAdded=r.browser.now(),C==="expired"&&(p.refreshedUponExpiration=!0),this._setTileReloadTimer(b,p),this.getSource().type==="raster-dem"&&p.dem&&this._backfillDEM(p),this._state.initializeTileState(p,this.map?this.map.painter:null),this._source.fire(new r.Event("data",{dataType:"source",tile:p,coord:p.tileID}))},g.prototype._backfillDEM=function(p){for(var b=this.getRenderableIds(),C=0;C<b.length;C++){var E=b[C];if(p.neighboringTiles&&p.neighboringTiles[E]){var L=this.getTileByID(E);O(p,L),O(L,p)}}function O(Z,Y){Z.needsHillshadePrepare=!0;var re=Y.tileID.canonical.x-Z.tileID.canonical.x,oe=Y.tileID.canonical.y-Z.tileID.canonical.y,ue=Math.pow(2,Z.tileID.canonical.z),ve=Y.tileID.key;re===0&&oe===0||Math.abs(oe)>1||(Math.abs(re)>1&&(Math.abs(re+ue)===1?re+=ue:Math.abs(re-ue)===1&&(re-=ue)),Y.dem&&Z.dem&&(Z.dem.backfillBorder(Y.dem,re,oe),Z.neighboringTiles&&Z.neighboringTiles[ve]&&(Z.neighboringTiles[ve].backfilled=!0)))}},g.prototype.getTile=function(p){return this.getTileByID(p.key)},g.prototype.getTileByID=function(p){return this._tiles[p]},g.prototype._retainLoadedChildren=function(p,b,C,E){for(var L in this._tiles){var O=this._tiles[L];if(!(E[L]||!O.hasData()||O.tileID.overscaledZ<=b||O.tileID.overscaledZ>C)){for(var Z=O.tileID;O&&O.tileID.overscaledZ>b+1;){var Y=O.tileID.scaledTo(O.tileID.overscaledZ-1);(O=this._tiles[Y.key])&&O.hasData()&&(Z=Y)}for(var re=Z;re.overscaledZ>b;)if(p[(re=re.scaledTo(re.overscaledZ-1)).key]){E[Z.key]=Z;break}}}},g.prototype.findLoadedParent=function(p,b){if(p.key in this._loadedParentTiles){var C=this._loadedParentTiles[p.key];return C&&C.tileID.overscaledZ>=b?C:null}for(var E=p.overscaledZ-1;E>=b;E--){var L=p.scaledTo(E),O=this._getLoadedTile(L);if(O)return O}},g.prototype._getLoadedTile=function(p){var b=this._tiles[p.key];return b&&b.hasData()?b:this._cache.getByKey(p.wrapped().key)},g.prototype.updateCacheSize=function(p){var b=Math.ceil(p.width/this._source.tileSize)+1,C=Math.ceil(p.height/this._source.tileSize)+1,E=Math.floor(b*C*5),L=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(L)},g.prototype.handleWrapJump=function(p){var b=Math.round((p-(this._prevLng===void 0?p:this._prevLng))/360);if(this._prevLng=p,b){var C={};for(var E in this._tiles){var L=this._tiles[E];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+b),C[L.tileID.key]=L}for(var O in this._tiles=C,this._timers)clearTimeout(this._timers[O]),delete this._timers[O];for(var Z in this._tiles)this._setTileReloadTimer(Z,this._tiles[Z])}},g.prototype.update=function(p){var b=this;if(this.transform=p,this._sourceLoaded&&!this._paused){var C;this.updateCacheSize(p),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?C=p.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ht){return new r.OverscaledTileID(ht.canonical.z,ht.wrap,ht.canonical.z,ht.canonical.x,ht.canonical.y)}):(C=p.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(C=C.filter(function(ht){return b._source.hasTile(ht)}))):C=[];var E=p.coveringZoomLevel(this._source),L=Math.max(E-g.maxOverzooming,this._source.minzoom),O=Math.max(E+g.maxUnderzooming,this._source.minzoom),Z=this._updateRetainedTiles(C,E);if(ct(this._source.type)){for(var Y={},re={},oe=0,ue=Object.keys(Z);oe<ue.length;oe+=1){var ve=ue[oe],be=Z[ve],Me=this._tiles[ve];if(Me&&!(Me.fadeEndTime&&Me.fadeEndTime<=r.browser.now())){var pe=this.findLoadedParent(be,L);pe&&(this._addTile(pe.tileID),Y[pe.tileID.key]=pe.tileID),re[ve]=be}}for(var Ee in this._retainLoadedChildren(re,E,O,Z),Y)Z[Ee]||(this._coveredTiles[Ee]=!0,Z[Ee]=Y[Ee])}for(var We in Z)this._tiles[We].clearFadeHold();for(var Ve=0,je=r.keysDifference(this._tiles,Z);Ve<je.length;Ve+=1){var He=je[Ve],et=this._tiles[He];et.hasSymbolBuckets&&!et.holdingForFade()?et.setHoldDuration(this.map._fadeDuration):et.hasSymbolBuckets&&!et.symbolFadeFinished()||this._removeTile(He)}this._updateLoadedParentTileCache()}},g.prototype.releaseSymbolFadeTiles=function(){for(var p in this._tiles)this._tiles[p].holdingForFade()&&this._removeTile(p)},g.prototype._updateRetainedTiles=function(p,b){for(var C={},E={},L=Math.max(b-g.maxOverzooming,this._source.minzoom),O=Math.max(b+g.maxUnderzooming,this._source.minzoom),Z={},Y=0,re=p;Y<re.length;Y+=1){var oe=re[Y],ue=this._addTile(oe);C[oe.key]=oe,ue.hasData()||b<this._source.maxzoom&&(Z[oe.key]=oe)}this._retainLoadedChildren(Z,b,O,C);for(var ve=0,be=p;ve<be.length;ve+=1){var Me=be[ve],pe=this._tiles[Me.key];if(!pe.hasData()){if(b+1>this._source.maxzoom){var Ee=Me.children(this._source.maxzoom)[0],We=this.getTile(Ee);if(We&&We.hasData()){C[Ee.key]=Ee;continue}}else{var Ve=Me.children(this._source.maxzoom);if(C[Ve[0].key]&&C[Ve[1].key]&&C[Ve[2].key]&&C[Ve[3].key])continue}for(var je=pe.wasRequested(),He=Me.overscaledZ-1;He>=L;--He){var et=Me.scaledTo(He);if(E[et.key]||(E[et.key]=!0,!(pe=this.getTile(et))&&je&&(pe=this._addTile(et)),pe&&(C[et.key]=et,je=pe.wasRequested(),pe.hasData())))break}}}return C},g.prototype._updateLoadedParentTileCache=function(){for(var p in this._loadedParentTiles={},this._tiles){for(var b=[],C=void 0,E=this._tiles[p].tileID;E.overscaledZ>0;){if(E.key in this._loadedParentTiles){C=this._loadedParentTiles[E.key];break}b.push(E.key);var L=E.scaledTo(E.overscaledZ-1);if(C=this._getLoadedTile(L))break;E=L}for(var O=0,Z=b;O<Z.length;O+=1)this._loadedParentTiles[Z[O]]=C}},g.prototype._addTile=function(p){var b=this._tiles[p.key];if(b)return b;(b=this._cache.getAndRemove(p))&&(this._setTileReloadTimer(p.key,b),b.tileID=p,this._state.initializeTileState(b,this.map?this.map.painter:null),this._cacheTimers[p.key]&&(clearTimeout(this._cacheTimers[p.key]),delete this._cacheTimers[p.key],this._setTileReloadTimer(p.key,b)));var C=!!b;return C||(b=new r.Tile(p,this._source.tileSize*p.overscaleFactor()),this._loadTile(b,this._tileLoaded.bind(this,b,p.key,b.state))),b?(b.uses++,this._tiles[p.key]=b,C||this._source.fire(new r.Event("dataloading",{tile:b,coord:b.tileID,dataType:"source"})),b):null},g.prototype._setTileReloadTimer=function(p,b){var C=this;p in this._timers&&(clearTimeout(this._timers[p]),delete this._timers[p]);var E=b.getExpiryTimeout();E&&(this._timers[p]=setTimeout(function(){C._reloadTile(p,"expired"),delete C._timers[p]},E))},g.prototype._removeTile=function(p){var b=this._tiles[p];b&&(b.uses--,delete this._tiles[p],this._timers[p]&&(clearTimeout(this._timers[p]),delete this._timers[p]),b.uses>0||(b.hasData()&&b.state!=="reloading"?this._cache.add(b.tileID,b,b.getExpiryTimeout()):(b.aborted=!0,this._abortTile(b),this._unloadTile(b))))},g.prototype.clearTiles=function(){for(var p in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(p);this._cache.reset()},g.prototype.tilesIn=function(p,b,C){var E=this,L=[],O=this.transform;if(!O)return L;for(var Z=C?O.getCameraQueryGeometry(p):p,Y=p.map(function(He){return O.pointCoordinate(He)}),re=Z.map(function(He){return O.pointCoordinate(He)}),oe=this.getIds(),ue=1/0,ve=1/0,be=-1/0,Me=-1/0,pe=0,Ee=re;pe<Ee.length;pe+=1){var We=Ee[pe];ue=Math.min(ue,We.x),ve=Math.min(ve,We.y),be=Math.max(be,We.x),Me=Math.max(Me,We.y)}for(var Ve=function(He){var et=E._tiles[oe[He]];if(!et.holdingForFade()){var ht=et.tileID,At=Math.pow(2,O.zoom-et.tileID.overscaledZ),It=b*et.queryPadding*r.EXTENT/et.tileSize/At,Zt=[ht.getTilePoint(new r.MercatorCoordinate(ue,ve)),ht.getTilePoint(new r.MercatorCoordinate(be,Me))];if(Zt[0].x-It<r.EXTENT&&Zt[0].y-It<r.EXTENT&&Zt[1].x+It>=0&&Zt[1].y+It>=0){var ca=Y.map(function(_a){return ht.getTilePoint(_a)}),ma=re.map(function(_a){return ht.getTilePoint(_a)});L.push({tile:et,tileID:ht,queryGeometry:ca,cameraQueryGeometry:ma,scale:At})}}},je=0;je<oe.length;je++)Ve(je);return L},g.prototype.getVisibleCoordinates=function(p){for(var b=this,C=this.getRenderableIds(p).map(function(Z){return b._tiles[Z].tileID}),E=0,L=C;E<L.length;E+=1){var O=L[E];O.posMatrix=this.transform.calculatePosMatrix(O.toUnwrapped())}return C},g.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ct(this._source.type))for(var p in this._tiles){var b=this._tiles[p];if(b.fadeEndTime!==void 0&&b.fadeEndTime>=r.browser.now())return!0}return!1},g.prototype.setFeatureState=function(p,b,C){this._state.updateState(p=p||"_geojsonTileLayer",b,C)},g.prototype.removeFeatureState=function(p,b,C){this._state.removeFeatureState(p=p||"_geojsonTileLayer",b,C)},g.prototype.getFeatureState=function(p,b){return this._state.getState(p=p||"_geojsonTileLayer",b)},g.prototype.setDependencies=function(p,b,C){var E=this._tiles[p];E&&E.setDependencies(b,C)},g.prototype.reloadTilesForDependencies=function(p,b){for(var C in this._tiles)this._tiles[C].hasDependency(p,b)&&this._reloadTile(C,"reloading");this._cache.filter(function(E){return!E.hasDependency(p,b)})},g}(r.Evented);function Ne(_,g){var p=Math.abs(2*_.wrap)-+(_.wrap<0),b=Math.abs(2*g.wrap)-+(g.wrap<0);return _.overscaledZ-g.overscaledZ||b-p||g.canonical.y-_.canonical.y||g.canonical.x-_.canonical.x}function ct(_){return _==="raster"||_==="image"||_==="video"}function ft(){return new r.window.Worker(wp.workerUrl)}ye.maxOverzooming=10,ye.maxUnderzooming=3;var Je="mapboxgl_preloaded_worker_pool",_t=function(){this.active={}};_t.prototype.acquire=function(_){if(!this.workers)for(this.workers=[];this.workers.length<_t.workerCount;)this.workers.push(new ft);return this.active[_]=!0,this.workers.slice()},_t.prototype.release=function(_){delete this.active[_],this.numActive()===0&&(this.workers.forEach(function(g){g.terminate()}),this.workers=null)},_t.prototype.isPreloaded=function(){return!!this.active[Je]},_t.prototype.numActive=function(){return Object.keys(this.active).length};var Xt,Bt=Math.floor(r.browser.hardwareConcurrency/2);function tt(){return Xt||(Xt=new _t),Xt}function Ft(_,g){var p={};for(var b in _)b!=="ref"&&(p[b]=_[b]);return r.refProperties.forEach(function(C){C in g&&(p[C]=g[C])}),p}function Rt(_){_=_.slice();for(var g=Object.create(null),p=0;p<_.length;p++)g[_[p].id]=_[p];for(var b=0;b<_.length;b++)"ref"in _[b]&&(_[b]=Ft(_[b],g[_[b].ref]));return _}_t.workerCount=Math.max(Math.min(Bt,6),1);var Wt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Va(_,g,p){p.push({command:Wt.addSource,args:[_,g[_]]})}function rt(_,g,p){g.push({command:Wt.removeSource,args:[_]}),p[_]=!0}function Re(_,g,p,b){rt(_,p,b),Va(_,g,p)}function dt(_,g,p){var b;for(b in _[p])if(_[p].hasOwnProperty(b)&&b!=="data"&&!r.deepEqual(_[p][b],g[p][b]))return!1;for(b in g[p])if(g[p].hasOwnProperty(b)&&b!=="data"&&!r.deepEqual(_[p][b],g[p][b]))return!1;return!0}function mt(_,g,p,b,C,E){var L;for(L in g=g||{},_=_||{})_.hasOwnProperty(L)&&(r.deepEqual(_[L],g[L])||p.push({command:E,args:[b,L,g[L],C]}));for(L in g)g.hasOwnProperty(L)&&!_.hasOwnProperty(L)&&(r.deepEqual(_[L],g[L])||p.push({command:E,args:[b,L,g[L],C]}))}function la(_){return _.id}function Ea(_,g){return _[g.id]=g,_}var ki=function(_,g){this.reset(_,g)};ki.prototype.reset=function(_,g){this.points=_||[],this._distances=[0];for(var p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(g||0,.5*this.length),this.paddedLength=this.length-2*this.padding},ki.prototype.lerp=function(_){if(this.points.length===1)return this.points[0];_=r.clamp(_,0,1);for(var g=1,p=this._distances[g],b=_*this.paddedLength+this.padding;p<b&&g<this._distances.length;)p=this._distances[++g];var C=g-1,E=this._distances[C],L=p-E,O=L>0?(b-E)/L:0;return this.points[C].mult(1-O).add(this.points[g].mult(O))};var Ga=function(_,g,p){var b=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(_/p),this.yCellCount=Math.ceil(g/p);for(var E=0;E<this.xCellCount*this.yCellCount;E++)b.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=_,this.height=g,this.xScale=this.xCellCount/_,this.yScale=this.yCellCount/g,this.boxUid=0,this.circleUid=0};function Ui(_,g,p,b,C){var E=r.create();return g?(r.scale(E,E,[1/C,1/C,1]),p||r.rotateZ(E,E,b.angle)):r.multiply(E,b.labelPlaneMatrix,_),E}function Oa(_,g,p,b,C){if(g){var E=r.clone(_);return r.scale(E,E,[C,C,1]),p||r.rotateZ(E,E,-b.angle),E}return b.glCoordMatrix}function Ya(_,g){var p=[_.x,_.y,0,1];Ir(p,p,g);var b=p[3];return{point:new r.Point(p[0]/b,p[1]/b),signedDistanceFromCamera:b}}function gi(_,g){return .5+_/g*.5}function ts(_,g){var p=_[0]/_[3],b=_[1]/_[3];return p>=-g[0]&&p<=g[0]&&b>=-g[1]&&b<=g[1]}function h_(_,g,p,b,C,E,L,O){var Z=b?_.textSizeData:_.iconSizeData,Y=r.evaluateSizeForZoom(Z,p.transform.zoom),re=[256/p.width*2+1,256/p.height*2+1],oe=b?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;oe.clear();for(var ue=_.lineVertexArray,ve=b?_.text.placedSymbolArray:_.icon.placedSymbolArray,be=p.transform.width/p.transform.height,Me=!1,pe=0;pe<ve.length;pe++){var Ee=ve.get(pe);if(Ee.hidden||Ee.writingMode===r.WritingMode.vertical&&!Me)as(Ee.numGlyphs,oe);else{Me=!1;var We=[Ee.anchorX,Ee.anchorY,0,1];if(r.transformMat4(We,We,g),ts(We,re)){var Ve=gi(p.transform.cameraToCenterDistance,We[3]),je=r.evaluateSizeForFeature(Z,Y,Ee),He=L?je/Ve:je*Ve,et=new r.Point(Ee.anchorX,Ee.anchorY),ht=Ya(et,C).point,At={},It=Uf(Ee,He,!1,O,g,C,E,_.glyphOffsetArray,ue,oe,ht,et,At,be);Me=It.useVertical,(It.notEnoughRoom||Me||It.needsFlipping&&Uf(Ee,He,!0,O,g,C,E,_.glyphOffsetArray,ue,oe,ht,et,At,be).notEnoughRoom)&&as(Ee.numGlyphs,oe)}else as(Ee.numGlyphs,oe)}}b?_.text.dynamicLayoutVertexBuffer.updateData(oe):_.icon.dynamicLayoutVertexBuffer.updateData(oe)}function wr(_,g,p,b,C,E,L,O,Z,Y,re){var oe=O.glyphStartIndex+O.numGlyphs,ue=O.lineStartIndex,ve=O.lineStartIndex+O.lineLength,be=g.getoffsetX(O.glyphStartIndex),Me=g.getoffsetX(oe-1),pe=Dn(_*be,p,b,C,E,L,O.segment,ue,ve,Z,Y,re);if(!pe)return null;var Ee=Dn(_*Me,p,b,C,E,L,O.segment,ue,ve,Z,Y,re);return Ee?{first:pe,last:Ee}:null}function fs(_,g,p,b){return _===r.WritingMode.horizontal&&Math.abs(p.y-g.y)>Math.abs(p.x-g.x)*b?{useVertical:!0}:(_===r.WritingMode.vertical?g.y<p.y:g.x>p.x)?{needsFlipping:!0}:null}function Uf(_,g,p,b,C,E,L,O,Z,Y,re,oe,ue,ve){var be,Me=g/24,pe=_.lineOffsetX*Me,Ee=_.lineOffsetY*Me;if(_.numGlyphs>1){var We=_.glyphStartIndex+_.numGlyphs,Ve=_.lineStartIndex,je=_.lineStartIndex+_.lineLength,He=wr(Me,O,pe,Ee,p,re,oe,_,Z,E,ue);if(!He)return{notEnoughRoom:!0};var et=Ya(He.first.point,L).point,ht=Ya(He.last.point,L).point;if(b&&!p){var At=fs(_.writingMode,et,ht,ve);if(At)return At}be=[He.first];for(var It=_.glyphStartIndex+1;It<We-1;It++)be.push(Dn(Me*O.getoffsetX(It),pe,Ee,p,re,oe,_.segment,Ve,je,Z,E,ue));be.push(He.last)}else{if(b&&!p){var Zt=Ya(oe,C).point,ca=_.lineStartIndex+_.segment+1,ma=new r.Point(Z.getx(ca),Z.gety(ca)),_a=Ya(ma,C),fi=_a.signedDistanceFromCamera>0?_a.point:__(oe,ma,Zt,1,C),qt=fs(_.writingMode,Zt,fi,ve);if(qt)return qt}var Ta=Dn(Me*O.getoffsetX(_.glyphStartIndex),pe,Ee,p,re,oe,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,Z,E,ue);if(!Ta)return{notEnoughRoom:!0};be=[Ta]}for(var Za=0,Aa=be;Za<Aa.length;Za+=1){var Sa=Aa[Za];r.addDynamicAttributes(Y,Sa.point,Sa.angle)}return{}}function __(_,g,p,b,C){var E=Ya(_.add(_.sub(g)._unit()),C).point,L=p.sub(E);return p.add(L._mult(b/L.mag()))}function Dn(_,g,p,b,C,E,L,O,Z,Y,re,oe){var ue=b?_-g:_+g,ve=ue>0?1:-1,be=0;b&&(ve*=-1,be=Math.PI),ve<0&&(be+=Math.PI);for(var Me=ve>0?O+L:O+L+1,pe=C,Ee=C,We=0,Ve=0,je=Math.abs(ue),He=[];We+Ve<=je;){if((Me+=ve)<O||Me>=Z)return null;if(Ee=pe,He.push(pe),(pe=oe[Me])===void 0){var et=new r.Point(Y.getx(Me),Y.gety(Me)),ht=Ya(et,re);if(ht.signedDistanceFromCamera>0)pe=oe[Me]=ht.point;else{var At=Me-ve;pe=__(We===0?E:new r.Point(Y.getx(At),Y.gety(At)),et,Ee,je-We+1,re)}}We+=Ve,Ve=Ee.dist(pe)}var It=(je-We)/Ve,Zt=pe.sub(Ee),ca=Zt.mult(It)._add(Ee);ca._add(Zt._unit()._perp()._mult(p*ve));var ma=be+Math.atan2(pe.y-Ee.y,pe.x-Ee.x);return He.push(ca),{point:ca,angle:ma,path:He}}Ga.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ga.prototype.insert=function(_,g,p,b,C){this._forEachCell(g,p,b,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(_),this.bboxes.push(g),this.bboxes.push(p),this.bboxes.push(b),this.bboxes.push(C)},Ga.prototype.insertCircle=function(_,g,p,b){this._forEachCell(g-b,p-b,g+b,p+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(_),this.circles.push(g),this.circles.push(p),this.circles.push(b)},Ga.prototype._insertBoxCell=function(_,g,p,b,C,E){this.boxCells[C].push(E)},Ga.prototype._insertCircleCell=function(_,g,p,b,C,E){this.circleCells[C].push(E)},Ga.prototype._query=function(_,g,p,b,C,E){if(p<0||_>this.width||b<0||g>this.height)return!C&&[];var L=[];if(_<=0&&g<=0&&this.width<=p&&this.height<=b){if(C)return!0;for(var O=0;O<this.boxKeys.length;O++)L.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(var Z=0;Z<this.circleKeys.length;Z++){var Y=this.circles[3*Z],re=this.circles[3*Z+1],oe=this.circles[3*Z+2];L.push({key:this.circleKeys[Z],x1:Y-oe,y1:re-oe,x2:Y+oe,y2:re+oe})}return E?L.filter(E):L}return this._forEachCell(_,g,p,b,this._queryCell,L,{hitTest:C,seenUids:{box:{},circle:{}}},E),C?L.length>0:L},Ga.prototype._queryCircle=function(_,g,p,b,C){var E=_-p,L=_+p,O=g-p,Z=g+p;if(L<0||E>this.width||Z<0||O>this.height)return!b&&[];var Y=[];return this._forEachCell(E,O,L,Z,this._queryCellCircle,Y,{hitTest:b,circle:{x:_,y:g,radius:p},seenUids:{box:{},circle:{}}},C),b?Y.length>0:Y},Ga.prototype.query=function(_,g,p,b,C){return this._query(_,g,p,b,!1,C)},Ga.prototype.hitTest=function(_,g,p,b,C){return this._query(_,g,p,b,!0,C)},Ga.prototype.hitTestCircle=function(_,g,p,b){return this._queryCircle(_,g,p,!0,b)},Ga.prototype._queryCell=function(_,g,p,b,C,E,L,O){var Z=L.seenUids,Y=this.boxCells[C];if(Y!==null)for(var re=this.bboxes,oe=0,ue=Y;oe<ue.length;oe+=1){var ve=ue[oe];if(!Z.box[ve]){Z.box[ve]=!0;var be=4*ve;if(_<=re[be+2]&&g<=re[be+3]&&p>=re[be+0]&&b>=re[be+1]&&(!O||O(this.boxKeys[ve]))){if(L.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[ve],x1:re[be],y1:re[be+1],x2:re[be+2],y2:re[be+3]})}}}var Me=this.circleCells[C];if(Me!==null)for(var pe=this.circles,Ee=0,We=Me;Ee<We.length;Ee+=1){var Ve=We[Ee];if(!Z.circle[Ve]){Z.circle[Ve]=!0;var je=3*Ve;if(this._circleAndRectCollide(pe[je],pe[je+1],pe[je+2],_,g,p,b)&&(!O||O(this.circleKeys[Ve]))){if(L.hitTest)return E.push(!0),!0;var He=pe[je],et=pe[je+1],ht=pe[je+2];E.push({key:this.circleKeys[Ve],x1:He-ht,y1:et-ht,x2:He+ht,y2:et+ht})}}}},Ga.prototype._queryCellCircle=function(_,g,p,b,C,E,L,O){var Z=L.circle,Y=L.seenUids,re=this.boxCells[C];if(re!==null)for(var oe=this.bboxes,ue=0,ve=re;ue<ve.length;ue+=1){var be=ve[ue];if(!Y.box[be]){Y.box[be]=!0;var Me=4*be;if(this._circleAndRectCollide(Z.x,Z.y,Z.radius,oe[Me+0],oe[Me+1],oe[Me+2],oe[Me+3])&&(!O||O(this.boxKeys[be])))return E.push(!0),!0}}var pe=this.circleCells[C];if(pe!==null)for(var Ee=this.circles,We=0,Ve=pe;We<Ve.length;We+=1){var je=Ve[We];if(!Y.circle[je]){Y.circle[je]=!0;var He=3*je;if(this._circlesCollide(Ee[He],Ee[He+1],Ee[He+2],Z.x,Z.y,Z.radius)&&(!O||O(this.circleKeys[je])))return E.push(!0),!0}}},Ga.prototype._forEachCell=function(_,g,p,b,C,E,L,O){for(var Z=this._convertToXCellCoord(_),Y=this._convertToYCellCoord(g),re=this._convertToXCellCoord(p),oe=this._convertToYCellCoord(b),ue=Z;ue<=re;ue++)for(var ve=Y;ve<=oe;ve++)if(C.call(this,_,g,p,b,this.xCellCount*ve+ue,E,L,O))return},Ga.prototype._convertToXCellCoord=function(_){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(_*this.xScale)))},Ga.prototype._convertToYCellCoord=function(_){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(_*this.yScale)))},Ga.prototype._circlesCollide=function(_,g,p,b,C,E){var L=b-_,O=C-g,Z=p+E;return Z*Z>L*L+O*O},Ga.prototype._circleAndRectCollide=function(_,g,p,b,C,E,L){var O=(E-b)/2,Z=Math.abs(_-(b+O));if(Z>O+p)return!1;var Y=(L-C)/2,re=Math.abs(g-(C+Y));if(re>Y+p)return!1;if(Z<=O||re<=Y)return!0;var oe=Z-O,ue=re-Y;return oe*oe+ue*ue<=p*p};var m_=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function as(_,g){for(var p=0;p<_;p++){var b=g.length;g.resize(b+4),g.float32.set(m_,3*b)}}function Ir(_,g,p){var b=g[0],C=g[1];return _[0]=p[0]*b+p[4]*C+p[12],_[1]=p[1]*b+p[5]*C+p[13],_[3]=p[3]*b+p[7]*C+p[15],_}var Ao=function(_,g,p){g===void 0&&(g=new Ga(_.width+200,_.height+200,25)),p===void 0&&(p=new Ga(_.width+200,_.height+200,25)),this.transform=_,this.grid=g,this.ignoredGrid=p,this.pitchfactor=Math.cos(_._pitch)*_.cameraToCenterDistance,this.screenRightBoundary=_.width+100,this.screenBottomBoundary=_.height+100,this.gridRightBoundary=_.width+200,this.gridBottomBoundary=_.height+200};function gn(_,g,p){return g*(r.EXTENT/(_.tileSize*Math.pow(2,p-_.tileID.overscaledZ)))}Ao.prototype.placeCollisionBox=function(_,g,p,b,C){var E=this.projectAndGetPerspectiveRatio(b,_.anchorPointX,_.anchorPointY),L=p*E.perspectiveRatio,O=_.x1*L+E.point.x,Z=_.y1*L+E.point.y,Y=_.x2*L+E.point.x,re=_.y2*L+E.point.y;return!this.isInsideGrid(O,Z,Y,re)||!g&&this.grid.hitTest(O,Z,Y,re,C)?{box:[],offscreen:!1}:{box:[O,Z,Y,re],offscreen:this.isOffscreen(O,Z,Y,re)}},Ao.prototype.placeCollisionCircles=function(_,g,p,b,C,E,L,O,Z,Y,re,oe,ue){var ve=[],be=new r.Point(g.anchorX,g.anchorY),Me=Ya(be,E),pe=gi(this.transform.cameraToCenterDistance,Me.signedDistanceFromCamera),Ee=(Y?C/pe:C*pe)/r.ONE_EM,We=Ya(be,L).point,Ve=wr(Ee,b,g.lineOffsetX*Ee,g.lineOffsetY*Ee,!1,We,be,g,p,L,{}),je=!1,He=!1,et=!0;if(Ve){for(var ht=.5*oe*pe+ue,At=new r.Point(-100,-100),It=new r.Point(this.screenRightBoundary,this.screenBottomBoundary),Zt=new ki,ca=Ve.first,ma=Ve.last,_a=[],fi=ca.path.length-1;fi>=1;fi--)_a.push(ca.path[fi]);for(var qt=1;qt<ma.path.length;qt++)_a.push(ma.path[qt]);var Ta=2.5*ht;if(O){var Za=_a.map(function(ko){return Ya(ko,O)});_a=Za.some(function(ko){return ko.signedDistanceFromCamera<=0})?[]:Za.map(function(ko){return ko.point})}var Aa=[];if(_a.length>0){for(var Sa=_a[0].clone(),Da=_a[0].clone(),xa=1;xa<_a.length;xa++)Sa.x=Math.min(Sa.x,_a[xa].x),Sa.y=Math.min(Sa.y,_a[xa].y),Da.x=Math.max(Da.x,_a[xa].x),Da.y=Math.max(Da.y,_a[xa].y);Aa=Sa.x>=At.x&&Da.x<=It.x&&Sa.y>=At.y&&Da.y<=It.y?[_a]:Da.x<At.x||Sa.x>It.x||Da.y<At.y||Sa.y>It.y?[]:r.clipLine([_a],At.x,At.y,It.x,It.y)}for(var fa=0,_r=Aa;fa<_r.length;fa+=1){var Gn;Zt.reset(_r[fa],.25*ht),Gn=Zt.length<=.5*ht?1:Math.ceil(Zt.paddedLength/Ta)+1;for(var Yr=0;Yr<Gn;Yr++){var Sr=Yr/Math.max(Gn-1,1),Mn=Zt.lerp(Sr),Vn=Mn.x+100,Bs=Mn.y+100;ve.push(Vn,Bs,ht,0);var ss=Vn-ht,Xu=Bs-ht,ys=Vn+ht,ul=Bs+ht;if(et=et&&this.isOffscreen(ss,Xu,ys,ul),He=He||this.isInsideGrid(ss,Xu,ys,ul),!_&&this.grid.hitTestCircle(Vn,Bs,ht,re)&&(je=!0,!Z))return{circles:[],offscreen:!1,collisionDetected:je}}}}return{circles:!Z&&je||!He?[]:ve,offscreen:et,collisionDetected:je}},Ao.prototype.queryRenderedSymbols=function(_){if(_.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var g=[],p=1/0,b=1/0,C=-1/0,E=-1/0,L=0,O=_;L<O.length;L+=1){var Z=O[L],Y=new r.Point(Z.x+100,Z.y+100);p=Math.min(p,Y.x),b=Math.min(b,Y.y),C=Math.max(C,Y.x),E=Math.max(E,Y.y),g.push(Y)}for(var re={},oe={},ue=0,ve=this.grid.query(p,b,C,E).concat(this.ignoredGrid.query(p,b,C,E));ue<ve.length;ue+=1){var be=ve[ue],Me=be.key;if(re[Me.bucketInstanceId]===void 0&&(re[Me.bucketInstanceId]={}),!re[Me.bucketInstanceId][Me.featureIndex]){var pe=[new r.Point(be.x1,be.y1),new r.Point(be.x2,be.y1),new r.Point(be.x2,be.y2),new r.Point(be.x1,be.y2)];r.polygonIntersectsPolygon(g,pe)&&(re[Me.bucketInstanceId][Me.featureIndex]=!0,oe[Me.bucketInstanceId]===void 0&&(oe[Me.bucketInstanceId]=[]),oe[Me.bucketInstanceId].push(Me.featureIndex))}}return oe},Ao.prototype.insertCollisionBox=function(_,g,p,b,C){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:b,collisionGroupID:C},_[0],_[1],_[2],_[3])},Ao.prototype.insertCollisionCircles=function(_,g,p,b,C){for(var E=g?this.ignoredGrid:this.grid,L={bucketInstanceId:p,featureIndex:b,collisionGroupID:C},O=0;O<_.length;O+=4)E.insertCircle(L,_[O],_[O+1],_[O+2])},Ao.prototype.projectAndGetPerspectiveRatio=function(_,g,p){var b=[g,p,0,1];return Ir(b,b,_),{point:new r.Point((b[0]/b[3]+1)/2*this.transform.width+100,(-b[1]/b[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5}},Ao.prototype.isOffscreen=function(_,g,p,b){return p<100||_>=this.screenRightBoundary||b<100||g>this.screenBottomBoundary},Ao.prototype.isInsideGrid=function(_,g,p,b){return p>=0&&_<this.gridRightBoundary&&b>=0&&g<this.gridBottomBoundary},Ao.prototype.getViewportMatrix=function(){var _=r.identity([]);return r.translate(_,_,[-100,-100,0]),_};var il=function(_,g,p,b){this.opacity=_?Math.max(0,Math.min(1,_.opacity+(_.placed?g:-g))):b&&p?1:0,this.placed=p};il.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var io=function(_,g,p,b,C){this.text=new il(_?_.text:null,g,p,C),this.icon=new il(_?_.icon:null,g,b,C)};io.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var fb=function(_,g,p){this.text=_,this.icon=g,this.skipFade=p},To=function(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]},XI=function(_,g,p,b,C){this.bucketInstanceId=_,this.featureIndex=g,this.sourceLayerIndex=p,this.bucketIndex=b,this.tileID=C},$l=function(_){this.crossSourceCollisions=_,this.maxGroupID=0,this.collisionGroups={}};function Gr(_,g,p,b,C){var E=r.getAnchorAlignment(_),L=-(E.horizontalAlign-.5)*g,O=-(E.verticalAlign-.5)*p,Z=r.evaluateVariableOffset(_,b);return new r.Point(L+Z[0]*C,O+Z[1]*C)}function Cl(_,g,p,b,C,E){var L=_.x1,O=_.x2,Z=_.y1,Y=_.y2,re=_.anchorPointX,oe=_.anchorPointY,ue=new r.Point(g,p);return b&&ue._rotate(C?E:-E),{x1:L+ue.x,y1:Z+ue.y,x2:O+ue.x,y2:Y+ue.y,anchorPointX:re,anchorPointY:oe}}$l.prototype.get=function(_){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[_]){var g=++this.maxGroupID;this.collisionGroups[_]={ID:g,predicate:function(p){return p.collisionGroupID===g}}}return this.collisionGroups[_]};var is=function(_,g,p,b){this.transform=_.clone(),this.collisionIndex=new Ao(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new $l(p),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}};function kc(_,g,p,b,C){_.emplaceBack(g?1:0,p?1:0,b||0,C||0),_.emplaceBack(g?1:0,p?1:0,b||0,C||0),_.emplaceBack(g?1:0,p?1:0,b||0,C||0),_.emplaceBack(g?1:0,p?1:0,b||0,C||0)}is.prototype.getBucketParts=function(_,g,p,b){var C=p.getBucket(g),E=p.latestFeatureIndex;if(C&&E&&g.id===C.layerIds[0]){var L=p.collisionBoxArray,O=C.layers[0].layout,Z=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),Y=p.tileSize/r.EXTENT,re=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),oe=O.get("text-pitch-alignment")==="map",ue=O.get("text-rotation-alignment")==="map",ve=gn(p,1,this.transform.zoom),be=Ui(re,oe,ue,this.transform,ve),Me=null;if(oe){var pe=Oa(re,oe,ue,this.transform,ve);Me=r.multiply([],this.transform.labelPlaneMatrix,pe)}this.retainedQueryData[C.bucketInstanceId]=new XI(C.bucketInstanceId,E,C.sourceLayerIndex,C.index,p.tileID);var Ee={bucket:C,layout:O,posMatrix:re,textLabelPlaneMatrix:be,labelToScreenMatrix:Me,scale:Z,textPixelRatio:Y,holdingForFade:p.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(C.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(b)for(var We=0,Ve=C.sortKeyRanges;We<Ve.length;We+=1){var je=Ve[We];_.push({sortKey:je.sortKey,symbolInstanceStart:je.symbolInstanceStart,symbolInstanceEnd:je.symbolInstanceEnd,parameters:Ee})}else _.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:Ee})}},is.prototype.attemptAnchorPlacement=function(_,g,p,b,C,E,L,O,Z,Y,re,oe,ue,ve,be){var Me,pe=[oe.textOffset0,oe.textOffset1],Ee=Gr(_,p,b,pe,C),We=this.collisionIndex.placeCollisionBox(Cl(g,Ee.x,Ee.y,E,L,this.transform.angle),re,O,Z,Y.predicate);if(!be||this.collisionIndex.placeCollisionBox(Cl(be,Ee.x,Ee.y,E,L,this.transform.angle),re,O,Z,Y.predicate).box.length!==0)return We.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID].text&&(Me=this.prevPlacement.variableOffsets[oe.crossTileID].anchor),this.variableOffsets[oe.crossTileID]={textOffset:pe,width:p,height:b,anchor:_,textBoxScale:C,prevAnchor:Me},this.markUsedJustification(ue,_,oe,ve),ue.allowVerticalPlacement&&(this.markUsedOrientation(ue,ve,oe),this.placedOrientations[oe.crossTileID]=ve),{shift:Ee,placedGlyphBoxes:We}):void 0},is.prototype.placeLayerBucketPart=function(_,g,p){var b=this,C=_.parameters,E=C.bucket,L=C.layout,O=C.posMatrix,Z=C.textLabelPlaneMatrix,Y=C.labelToScreenMatrix,re=C.textPixelRatio,oe=C.holdingForFade,ue=C.collisionBoxArray,ve=C.partiallyEvaluatedTextSize,be=C.collisionGroup,Me=L.get("text-optional"),pe=L.get("icon-optional"),Ee=L.get("text-allow-overlap"),We=L.get("icon-allow-overlap"),Ve=L.get("text-rotation-alignment")==="map",je=L.get("text-pitch-alignment")==="map",He=L.get("icon-text-fit")!=="none",et=L.get("symbol-z-order")==="viewport-y",ht=Ee&&(We||!E.hasIconData()||pe),At=We&&(Ee||!E.hasTextData()||Me);!E.collisionArrays&&ue&&E.deserializeCollisionBoxes(ue);var It=function(qt,Ta){if(!g[qt.crossTileID])if(oe)b.placements[qt.crossTileID]=new fb(!1,!1,!1);else{var Za,Aa=!1,Sa=!1,Da=!0,xa=null,fa={box:null,offscreen:null},_r={box:null,offscreen:null},Gn=null,Yr=null,Sr=0,Mn=0,Vn=0;Ta.textFeatureIndex?Sr=Ta.textFeatureIndex:qt.useRuntimeCollisionCircles&&(Sr=qt.featureIndex),Ta.verticalTextFeatureIndex&&(Mn=Ta.verticalTextFeatureIndex);var Bs=Ta.textBox;if(Bs){var ss=function(Ai){var so=r.WritingMode.horizontal;if(E.allowVerticalPlacement&&!Ai&&b.prevPlacement){var bs=b.prevPlacement.placedOrientations[qt.crossTileID];bs&&(b.placedOrientations[qt.crossTileID]=bs,b.markUsedOrientation(E,so=bs,qt))}return so},Xu=function(Ai,so){if(E.allowVerticalPlacement&&qt.numVerticalGlyphVertices>0&&Ta.verticalTextBox)for(var bs=0,jc=E.writingModes;bs<jc.length&&(jc[bs]===r.WritingMode.vertical?(fa=so(),_r=fa):fa=Ai(),!(fa&&fa.box&&fa.box.length));bs+=1);else fa=Ai()};if(L.get("text-variable-anchor")){var ys=L.get("text-variable-anchor");if(b.prevPlacement&&b.prevPlacement.variableOffsets[qt.crossTileID]){var ul=b.prevPlacement.variableOffsets[qt.crossTileID];ys.indexOf(ul.anchor)>0&&(ys=ys.filter(function(Ai){return Ai!==ul.anchor})).unshift(ul.anchor)}var ko=function(Ai,so,bs){for(var jc=Ai.x2-Ai.x1,sC=Ai.y2-Ai.y1,Ip=qt.textBoxScale,oC=He&&!We?so:null,O_={box:[],offscreen:!1},Yb=Ee?2*ys.length:ys.length,uh=0;uh<Yb;++uh){var Cp=b.attemptAnchorPlacement(ys[uh%ys.length],Ai,jc,sC,Ip,Ve,je,re,O,be,uh>=ys.length,qt,E,bs,oC);if(Cp&&(O_=Cp.placedGlyphBoxes)&&O_.box&&O_.box.length){Aa=!0,xa=Cp.shift;break}}return O_};Xu(function(){return ko(Bs,Ta.iconBox,r.WritingMode.horizontal)},function(){var Ai=Ta.verticalTextBox;return E.allowVerticalPlacement&&!(fa&&fa.box&&fa.box.length)&&qt.numVerticalGlyphVertices>0&&Ai?ko(Ai,Ta.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),fa&&(Aa=fa.box,Da=fa.offscreen);var k_=ss(fa&&fa.box);if(!Aa&&b.prevPlacement){var oh=b.prevPlacement.variableOffsets[qt.crossTileID];oh&&(b.variableOffsets[qt.crossTileID]=oh,b.markUsedJustification(E,oh.anchor,qt,k_))}}else{var qu=function(Ai,so){var bs=b.collisionIndex.placeCollisionBox(Ai,Ee,re,O,be.predicate);return bs&&bs.box&&bs.box.length&&(b.markUsedOrientation(E,so,qt),b.placedOrientations[qt.crossTileID]=so),bs};Xu(function(){return qu(Bs,r.WritingMode.horizontal)},function(){var Ai=Ta.verticalTextBox;return E.allowVerticalPlacement&&qt.numVerticalGlyphVertices>0&&Ai?qu(Ai,r.WritingMode.vertical):{box:null,offscreen:null}}),ss(fa&&fa.box&&fa.box.length)}}if(Aa=(Za=fa)&&Za.box&&Za.box.length>0,Da=Za&&Za.offscreen,qt.useRuntimeCollisionCircles){var lh=E.text.placedSymbolArray.get(qt.centerJustifiedTextSymbolIndex),W_=r.evaluateSizeForFeature(E.textSizeData,ve,lh),El=L.get("text-padding");Gn=b.collisionIndex.placeCollisionCircles(Ee,lh,E.lineVertexArray,E.glyphOffsetArray,W_,O,Z,Y,p,je,be.predicate,qt.collisionCircleDiameter,El),Aa=Ee||Gn.circles.length>0&&!Gn.collisionDetected,Da=Da&&Gn.offscreen}if(Ta.iconFeatureIndex&&(Vn=Ta.iconFeatureIndex),Ta.iconBox){var G_=function(Ai){var so=He&&xa?Cl(Ai,xa.x,xa.y,Ve,je,b.transform.angle):Ai;return b.collisionIndex.placeCollisionBox(so,We,re,O,be.predicate)};Sa=_r&&_r.box&&_r.box.length&&Ta.verticalIconBox?(Yr=G_(Ta.verticalIconBox)).box.length>0:(Yr=G_(Ta.iconBox)).box.length>0,Da=Da&&Yr.offscreen}var Ml=Me||qt.numHorizontalGlyphVertices===0&&qt.numVerticalGlyphVertices===0,mr=pe||qt.numIconVertices===0;if(Ml||mr?mr?Ml||(Sa=Sa&&Aa):Aa=Sa&&Aa:Sa=Aa=Sa&&Aa,Aa&&Za&&Za.box&&b.collisionIndex.insertCollisionBox(Za.box,L.get("text-ignore-placement"),E.bucketInstanceId,_r&&_r.box&&Mn?Mn:Sr,be.ID),Sa&&Yr&&b.collisionIndex.insertCollisionBox(Yr.box,L.get("icon-ignore-placement"),E.bucketInstanceId,Vn,be.ID),Gn&&(Aa&&b.collisionIndex.insertCollisionCircles(Gn.circles,L.get("text-ignore-placement"),E.bucketInstanceId,Sr,be.ID),p)){var tu=E.bucketInstanceId,Yu=b.collisionCircleArrays[tu];Yu===void 0&&(Yu=b.collisionCircleArrays[tu]=new To);for(var Kc=0;Kc<Gn.circles.length;Kc+=4)Yu.circles.push(Gn.circles[Kc+0]),Yu.circles.push(Gn.circles[Kc+1]),Yu.circles.push(Gn.circles[Kc+2]),Yu.circles.push(Gn.collisionDetected?1:0)}b.placements[qt.crossTileID]=new fb(Aa||ht,Sa||At,Da||E.justReloaded),g[qt.crossTileID]=!0}};if(et)for(var Zt=E.getSortedSymbolIndexes(this.transform.angle),ca=Zt.length-1;ca>=0;--ca){var ma=Zt[ca];It(E.symbolInstances.get(ma),E.collisionArrays[ma])}else for(var _a=_.symbolInstanceStart;_a<_.symbolInstanceEnd;_a++)It(E.symbolInstances.get(_a),E.collisionArrays[_a]);if(p&&E.bucketInstanceId in this.collisionCircleArrays){var fi=this.collisionCircleArrays[E.bucketInstanceId];r.invert(fi.invProjMatrix,O),fi.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1},is.prototype.markUsedJustification=function(_,g,p,b){var C;C=b===r.WritingMode.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(g)];for(var E=0,L=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];E<L.length;E+=1){var O=L[E];O>=0&&(_.text.placedSymbolArray.get(O).crossTileID=C>=0&&O!==C?0:p.crossTileID)}},is.prototype.markUsedOrientation=function(_,g,p){for(var b=g===r.WritingMode.horizontal||g===r.WritingMode.horizontalOnly?g:0,C=g===r.WritingMode.vertical?g:0,E=0,L=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];E<L.length;E+=1)_.text.placedSymbolArray.get(L[E]).placedOrientation=b;p.verticalPlacedTextSymbolIndex&&(_.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=C)},is.prototype.commit=function(_){this.commitTime=_,this.zoomAtLastRecencyCheck=this.transform.zoom;var g=this.prevPlacement,p=!1;this.prevZoomAdjustment=g?g.zoomAdjustment(this.transform.zoom):0;var b=g?g.symbolFadeChange(_):1,C=g?g.opacities:{},E=g?g.variableOffsets:{},L=g?g.placedOrientations:{};for(var O in this.placements){var Z=this.placements[O],Y=C[O];Y?(this.opacities[O]=new io(Y,b,Z.text,Z.icon),p=p||Z.text!==Y.text.placed||Z.icon!==Y.icon.placed):(this.opacities[O]=new io(null,b,Z.text,Z.icon,Z.skipFade),p=p||Z.text||Z.icon)}for(var re in C){var oe=C[re];if(!this.opacities[re]){var ue=new io(oe,b,!1,!1);ue.isHidden()||(this.opacities[re]=ue,p=p||oe.text.placed||oe.icon.placed)}}for(var ve in E)this.variableOffsets[ve]||!this.opacities[ve]||this.opacities[ve].isHidden()||(this.variableOffsets[ve]=E[ve]);for(var be in L)this.placedOrientations[be]||!this.opacities[be]||this.opacities[be].isHidden()||(this.placedOrientations[be]=L[be]);p?this.lastPlacementChangeTime=_:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=g?g.lastPlacementChangeTime:_)},is.prototype.updateLayerOpacities=function(_,g){for(var p={},b=0,C=g;b<C.length;b+=1){var E=C[b],L=E.getBucket(_);L&&E.latestFeatureIndex&&_.id===L.layerIds[0]&&this.updateBucketOpacities(L,p,E.collisionBoxArray)}},is.prototype.updateBucketOpacities=function(_,g,p){var b=this;_.hasTextData()&&_.text.opacityVertexArray.clear(),_.hasIconData()&&_.icon.opacityVertexArray.clear(),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexArray.clear(),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexArray.clear();var C=_.layers[0].layout,E=new io(null,0,!1,!1,!0),L=C.get("text-allow-overlap"),O=C.get("icon-allow-overlap"),Z=C.get("text-variable-anchor"),Y=C.get("text-rotation-alignment")==="map",re=C.get("text-pitch-alignment")==="map",oe=C.get("icon-text-fit")!=="none",ue=new io(null,0,L&&(O||!_.hasIconData()||C.get("icon-optional")),O&&(L||!_.hasTextData()||C.get("text-optional")),!0);!_.collisionArrays&&p&&(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData())&&_.deserializeCollisionBoxes(p);for(var ve=function(Ee,We,Ve){for(var je=0;je<We/4;je++)Ee.opacityVertexArray.emplaceBack(Ve)},be=function(Ee){var We=_.symbolInstances.get(Ee),Ve=We.numHorizontalGlyphVertices,je=We.numVerticalGlyphVertices,He=We.crossTileID,et=b.opacities[He];g[He]?et=E:et||(b.opacities[He]=et=ue),g[He]=!0;var ht=We.numIconVertices>0,At=b.placedOrientations[We.crossTileID],It=At===r.WritingMode.vertical,Zt=At===r.WritingMode.horizontal||At===r.WritingMode.horizontalOnly;if(Ve>0||je>0){var ca=vb(et.text);ve(_.text,Ve,It?jd:ca),ve(_.text,je,Zt?jd:ca);var ma=et.text.isHidden();[We.rightJustifiedTextSymbolIndex,We.centerJustifiedTextSymbolIndex,We.leftJustifiedTextSymbolIndex].forEach(function(fa){fa>=0&&(_.text.placedSymbolArray.get(fa).hidden=ma||It?1:0)}),We.verticalPlacedTextSymbolIndex>=0&&(_.text.placedSymbolArray.get(We.verticalPlacedTextSymbolIndex).hidden=ma||Zt?1:0);var _a=b.variableOffsets[We.crossTileID];_a&&b.markUsedJustification(_,_a.anchor,We,At);var fi=b.placedOrientations[We.crossTileID];fi&&(b.markUsedJustification(_,"left",We,fi),b.markUsedOrientation(_,fi,We))}if(ht){var qt=vb(et.icon),Ta=!(oe&&We.verticalPlacedIconSymbolIndex&&It);We.placedIconSymbolIndex>=0&&(ve(_.icon,We.numIconVertices,Ta?qt:jd),_.icon.placedSymbolArray.get(We.placedIconSymbolIndex).hidden=et.icon.isHidden()),We.verticalPlacedIconSymbolIndex>=0&&(ve(_.icon,We.numVerticalIconVertices,Ta?jd:qt),_.icon.placedSymbolArray.get(We.verticalPlacedIconSymbolIndex).hidden=et.icon.isHidden())}if(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData()){var Za=_.collisionArrays[Ee];if(Za){var Aa=new r.Point(0,0);if(Za.textBox||Za.verticalTextBox){var Sa=!0;if(Z){var Da=b.variableOffsets[He];Da?(Aa=Gr(Da.anchor,Da.width,Da.height,Da.textOffset,Da.textBoxScale),Y&&Aa._rotate(re?b.transform.angle:-b.transform.angle)):Sa=!1}Za.textBox&&kc(_.textCollisionBox.collisionVertexArray,et.text.placed,!Sa||It,Aa.x,Aa.y),Za.verticalTextBox&&kc(_.textCollisionBox.collisionVertexArray,et.text.placed,!Sa||Zt,Aa.x,Aa.y)}var xa=!!(!Zt&&Za.verticalIconBox);Za.iconBox&&kc(_.iconCollisionBox.collisionVertexArray,et.icon.placed,xa,oe?Aa.x:0,oe?Aa.y:0),Za.verticalIconBox&&kc(_.iconCollisionBox.collisionVertexArray,et.icon.placed,!xa,oe?Aa.x:0,oe?Aa.y:0)}}},Me=0;Me<_.symbolInstances.length;Me++)be(Me);if(_.sortFeatures(this.transform.angle),this.retainedQueryData[_.bucketInstanceId]&&(this.retainedQueryData[_.bucketInstanceId].featureSortOrder=_.featureSortOrder),_.hasTextData()&&_.text.opacityVertexBuffer&&_.text.opacityVertexBuffer.updateData(_.text.opacityVertexArray),_.hasIconData()&&_.icon.opacityVertexBuffer&&_.icon.opacityVertexBuffer.updateData(_.icon.opacityVertexArray),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexBuffer&&_.iconCollisionBox.collisionVertexBuffer.updateData(_.iconCollisionBox.collisionVertexArray),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexBuffer&&_.textCollisionBox.collisionVertexBuffer.updateData(_.textCollisionBox.collisionVertexArray),_.bucketInstanceId in this.collisionCircleArrays){var pe=this.collisionCircleArrays[_.bucketInstanceId];_.placementInvProjMatrix=pe.invProjMatrix,_.placementViewportMatrix=pe.viewportMatrix,_.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[_.bucketInstanceId]}},is.prototype.symbolFadeChange=function(_){return this.fadeDuration===0?1:(_-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},is.prototype.zoomAdjustment=function(_){return Math.max(0,(this.transform.zoom-_)/1.5)},is.prototype.hasTransitions=function(_){return this.stale||_-this.lastPlacementChangeTime<this.fadeDuration},is.prototype.stillRecent=function(_,g){var p=this.zoomAtLastRecencyCheck===g?1-this.zoomAdjustment(g):1;return this.zoomAtLastRecencyCheck=g,this.commitTime+this.fadeDuration*p>_},is.prototype.setStale=function(){this.stale=!0};var qI=Math.pow(2,25),YI=Math.pow(2,24),Hf=Math.pow(2,17),KI=Math.pow(2,16),yb=Math.pow(2,9),jI=Math.pow(2,8),bb=Math.pow(2,1);function vb(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;var g=_.placed?1:0,p=Math.floor(127*_.opacity);return p*qI+g*YI+p*Hf+g*KI+p*yb+g*jI+p*bb+g}var jd=0,Xf=function(_){this._sortAcrossTiles=_.layout.get("symbol-z-order")!=="viewport-y"&&_.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Xf.prototype.continuePlacement=function(_,g,p,b,C){for(var E=this._bucketParts;this._currentTileIndex<_.length;)if(g.getBucketParts(E,b,_[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort(function(L,O){return L.sortKey-O.sortKey}));this._currentPartIndex<E.length;)if(g.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,C())return!0;return!1};var p_=function(_,g,p,b,C,E,L){this.placement=new is(_,C,E,L),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=b,this._done=!1};p_.prototype.isDone=function(){return this._done},p_.prototype.continuePlacement=function(_,g,p){for(var b=this,C=r.browser.now(),E=function(){var Z=r.browser.now()-C;return!b._forceFullPlacement&&Z>2};this._currentPlacementIndex>=0;){var L=g[_[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(L.type==="symbol"&&(!L.minzoom||L.minzoom<=O)&&(!L.maxzoom||L.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new Xf(L)),this._inProgressLayer.continuePlacement(p[L.source],this.placement,this._showCollisionBoxes,L,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},p_.prototype.commit=function(_){return this.placement.commit(_),this.placement};var xb=512/r.EXTENT/2,ip=function(_,g,p){this.tileID=_,this.indexedSymbolInstances={},this.bucketInstanceId=p;for(var b=0;b<g.length;b++){var C=g.get(b),E=C.key;this.indexedSymbolInstances[E]||(this.indexedSymbolInstances[E]=[]),this.indexedSymbolInstances[E].push({crossTileID:C.crossTileID,coord:this.getScaledCoordinates(C,_)})}};ip.prototype.getScaledCoordinates=function(_,g){var p=xb/Math.pow(2,g.canonical.z-this.tileID.canonical.z);return{x:Math.floor((g.canonical.x*r.EXTENT+_.anchorX)*p),y:Math.floor((g.canonical.y*r.EXTENT+_.anchorY)*p)}},ip.prototype.findMatches=function(_,g,p){for(var b=this.tileID.canonical.z<g.canonical.z?1:Math.pow(2,this.tileID.canonical.z-g.canonical.z),C=0;C<_.length;C++){var E=_.get(C);if(!E.crossTileID){var L=this.indexedSymbolInstances[E.key];if(L)for(var O=this.getScaledCoordinates(E,g),Z=0,Y=L;Z<Y.length;Z+=1){var re=Y[Z];if(Math.abs(re.coord.x-O.x)<=b&&Math.abs(re.coord.y-O.y)<=b&&!p[re.crossTileID]){p[re.crossTileID]=!0,E.crossTileID=re.crossTileID;break}}}}};var Eo=function(){this.maxCrossTileID=0};Eo.prototype.generate=function(){return++this.maxCrossTileID};var ku=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ku.prototype.handleWrapJump=function(_){var g=Math.round((_-this.lng)/360);if(g!==0)for(var p in this.indexes){var b=this.indexes[p],C={};for(var E in b){var L=b[E];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+g),C[L.tileID.key]=L}this.indexes[p]=C}this.lng=_},ku.prototype.addBucket=function(_,g,p){if(this.indexes[_.overscaledZ]&&this.indexes[_.overscaledZ][_.key]){if(this.indexes[_.overscaledZ][_.key].bucketInstanceId===g.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(_.overscaledZ,this.indexes[_.overscaledZ][_.key])}for(var b=0;b<g.symbolInstances.length;b++)g.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[_.overscaledZ]||(this.usedCrossTileIDs[_.overscaledZ]={});var C=this.usedCrossTileIDs[_.overscaledZ];for(var E in this.indexes){var L=this.indexes[E];if(Number(E)>_.overscaledZ)for(var O in L){var Z=L[O];Z.tileID.isChildOf(_)&&Z.findMatches(g.symbolInstances,_,C)}else{var Y=L[_.scaledTo(Number(E)).key];Y&&Y.findMatches(g.symbolInstances,_,C)}}for(var re=0;re<g.symbolInstances.length;re++){var oe=g.symbolInstances.get(re);oe.crossTileID||(oe.crossTileID=p.generate(),C[oe.crossTileID]=!0)}return this.indexes[_.overscaledZ]===void 0&&(this.indexes[_.overscaledZ]={}),this.indexes[_.overscaledZ][_.key]=new ip(_,g.symbolInstances,g.bucketInstanceId),!0},ku.prototype.removeBucketCrossTileIDs=function(_,g){for(var p in g.indexedSymbolInstances)for(var b=0,C=g.indexedSymbolInstances[p];b<C.length;b+=1)delete this.usedCrossTileIDs[_][C[b].crossTileID]},ku.prototype.removeStaleBuckets=function(_){var g=!1;for(var p in this.indexes){var b=this.indexes[p];for(var C in b)_[b[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,b[C]),delete b[C],g=!0)}return g};var Wu=function(){this.layerIndexes={},this.crossTileIDs=new Eo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Wu.prototype.addLayer=function(_,g,p){var b=this.layerIndexes[_.id];b===void 0&&(b=this.layerIndexes[_.id]=new ku);var C=!1,E={};b.handleWrapJump(p);for(var L=0,O=g;L<O.length;L+=1){var Z=O[L],Y=Z.getBucket(_);Y&&_.id===Y.layerIds[0]&&(Y.bucketInstanceId||(Y.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(Z.tileID,Y,this.crossTileIDs)&&(C=!0),E[Y.bucketInstanceId]=!0)}return b.removeStaleBuckets(E)&&(C=!0),C},Wu.prototype.pruneUnusedLayers=function(_){var g={};for(var p in _.forEach(function(b){g[b]=!0}),this.layerIndexes)g[p]||delete this.layerIndexes[p]};var Wc=function(_,g){return r.emitValidationErrors(_,g&&g.filter(function(p){return p.identifier!=="source.canvas"}))},Gu=r.pick(Wt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ou=r.pick(Wt,["setCenter","setZoom","setBearing","setPitch"]),np=function(){var _={},g=r.styleSpec.$version;for(var p in r.styleSpec.$root){var b,C=r.styleSpec.$root[p];C.required&&(b=p==="version"?g:C.type==="array"?[]:{})!=null&&(_[p]=b)}return _}(),Rs=function(_){function g(p,b){var C=this;b===void 0&&(b={}),_.call(this),this.map=p,this.dispatcher=new ce(tt(),this),this.imageManager=new P,this.imageManager.setEventedParent(this),this.glyphManager=new ne(p._requestManager,b.localIdeographFontFamily),this.lineAtlas=new Se(256,512),this.crossTileSymbolIndex=new Wu,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());var E=this;this._rtlTextPluginCallback=g.registerForPluginStateChange(function(L){E.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:L.pluginStatus,pluginURL:L.pluginURL},function(O,Z){if(r.triggerPluginCompletionEvent(O),Z&&Z.every(function(re){return re}))for(var Y in E.sourceCaches)E.sourceCaches[Y].reload()})}),this.on("data",function(L){if(L.dataType==="source"&&L.sourceDataType==="metadata"){var O=C.sourceCaches[L.sourceId];if(O){var Z=O.getSource();if(Z&&Z.vectorLayerIds)for(var Y in C._layers){var re=C._layers[Y];re.source===Z.id&&C._validateLayer(re)}}}})}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.loadURL=function(p,b){var C=this;b===void 0&&(b={}),this.fire(new r.Event("dataloading",{dataType:"style"}));var E=typeof b.validate=="boolean"?b.validate:!r.isMapboxURL(p);p=this.map._requestManager.normalizeStyleURL(p,b.accessToken);var L=this.map._requestManager.transformRequest(p,r.ResourceType.Style);this._request=r.getJSON(L,function(O,Z){C._request=null,O?C.fire(new r.ErrorEvent(O)):Z&&C._load(Z,E)})},g.prototype.loadJSON=function(p,b){var C=this;b===void 0&&(b={}),this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.browser.frame(function(){C._request=null,C._load(p,b.validate!==!1)})},g.prototype.loadEmpty=function(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(np,!1)},g.prototype._load=function(p,b){if(!b||!Wc(this,r.validateStyle(p))){for(var C in this._loaded=!0,this.stylesheet=p,p.sources)this.addSource(C,p.sources[C],{validate:!1});p.sprite?this._loadSprite(p.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(p.glyphs);var E=Rt(this.stylesheet.layers);this._order=E.map(function(Y){return Y.id}),this._layers={},this._serializedLayers={};for(var L=0,O=E;L<O.length;L+=1){var Z=O[L];(Z=r.createStyleLayer(Z)).setEventedParent(this,{layer:{id:Z.id}}),this._layers[Z.id]=Z,this._serializedLayers[Z.id]=Z.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _e(this.stylesheet.light),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}},g.prototype._loadSprite=function(p){var b=this;this._spriteRequest=function(C,E,L){var O,Z,Y,re=r.browser.devicePixelRatio>1?"@2x":"",oe=r.getJSON(E.transformRequest(E.normalizeSpriteURL(C,re,".json"),r.ResourceType.SpriteJSON),function(be,Me){oe=null,Y||(Y=be,O=Me,ve())}),ue=r.getImage(E.transformRequest(E.normalizeSpriteURL(C,re,".png"),r.ResourceType.SpriteImage),function(be,Me){ue=null,Y||(Y=be,Z=Me,ve())});function ve(){if(Y)L(Y);else if(O&&Z){var be=r.browser.getImageData(Z),Me={};for(var pe in O){var Ee=O[pe],We=Ee.width,Ve=Ee.height,je=Ee.x,He=Ee.y,et=Ee.sdf,ht=Ee.pixelRatio,At=Ee.stretchX,It=Ee.stretchY,Zt=Ee.content,ca=new r.RGBAImage({width:We,height:Ve});r.RGBAImage.copy(be,ca,{x:je,y:He},{x:0,y:0},{width:We,height:Ve}),Me[pe]={data:ca,pixelRatio:ht,sdf:et,stretchX:At,stretchY:It,content:Zt}}L(null,Me)}}return{cancel:function(){oe&&(oe.cancel(),oe=null),ue&&(ue.cancel(),ue=null)}}}(p,this.map._requestManager,function(C,E){if(b._spriteRequest=null,C)b.fire(new r.ErrorEvent(C));else if(E)for(var L in E)b.imageManager.addImage(L,E[L]);b.imageManager.setLoaded(!0),b._availableImages=b.imageManager.listImages(),b.dispatcher.broadcast("setImages",b._availableImages),b.fire(new r.Event("data",{dataType:"style"}))})},g.prototype._validateLayer=function(p){var b=this.sourceCaches[p.source];if(b){var C=p.sourceLayer;if(C){var E=b.getSource();(E.type==="geojson"||E.vectorLayerIds&&E.vectorLayerIds.indexOf(C)===-1)&&this.fire(new r.ErrorEvent(new Error('Source layer "'+C+'" does not exist on source "'+E.id+'" as specified by style layer "'+p.id+'"')))}}},g.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var p in this.sourceCaches)if(!this.sourceCaches[p].loaded())return!1;return!!this.imageManager.isLoaded()},g.prototype._serializeLayers=function(p){for(var b=[],C=0,E=p;C<E.length;C+=1){var L=this._layers[E[C]];L.type!=="custom"&&b.push(L.serialize())}return b},g.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(var b in this._layers)if(this._layers[b].hasTransition())return!0;return!1},g.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},g.prototype.update=function(p){if(this._loaded){var b=this._changed;if(this._changed){var C=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);for(var L in(C.length||E.length)&&this._updateWorkerLayers(C,E),this._updatedSources){var O=this._updatedSources[L];O==="reload"?this._reloadSource(L):O==="clear"&&this._clearSource(L)}for(var Z in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Z].updateTransitions(p);this.light.updateTransitions(p),this._resetUpdates()}var Y={};for(var re in this.sourceCaches){var oe=this.sourceCaches[re];Y[re]=oe.used,oe.used=!1}for(var ue=0,ve=this._order;ue<ve.length;ue+=1){var be=this._layers[ve[ue]];be.recalculate(p,this._availableImages),!be.isHidden(p.zoom)&&be.source&&(this.sourceCaches[be.source].used=!0)}for(var Me in Y){var pe=this.sourceCaches[Me];Y[Me]!==pe.used&&pe.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Me}))}this.light.recalculate(p),this.z=p.zoom,b&&this.fire(new r.Event("data",{dataType:"style"}))}},g.prototype._updateTilesForChangedImages=function(){var p=Object.keys(this._changedImages);if(p.length){for(var b in this.sourceCaches)this.sourceCaches[b].reloadTilesForDependencies(["icons","patterns"],p);this._changedImages={}}},g.prototype._updateWorkerLayers=function(p,b){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(p),removedIds:b})},g.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},g.prototype.setState=function(p){var b=this;if(this._checkLoaded(),Wc(this,r.validateStyle(p)))return!1;(p=r.clone$1(p)).layers=Rt(p.layers);var C=function(L,O){if(!L)return[{command:Wt.setStyle,args:[O]}];var Z=[];try{if(!r.deepEqual(L.version,O.version))return[{command:Wt.setStyle,args:[O]}];r.deepEqual(L.center,O.center)||Z.push({command:Wt.setCenter,args:[O.center]}),r.deepEqual(L.zoom,O.zoom)||Z.push({command:Wt.setZoom,args:[O.zoom]}),r.deepEqual(L.bearing,O.bearing)||Z.push({command:Wt.setBearing,args:[O.bearing]}),r.deepEqual(L.pitch,O.pitch)||Z.push({command:Wt.setPitch,args:[O.pitch]}),r.deepEqual(L.sprite,O.sprite)||Z.push({command:Wt.setSprite,args:[O.sprite]}),r.deepEqual(L.glyphs,O.glyphs)||Z.push({command:Wt.setGlyphs,args:[O.glyphs]}),r.deepEqual(L.transition,O.transition)||Z.push({command:Wt.setTransition,args:[O.transition]}),r.deepEqual(L.light,O.light)||Z.push({command:Wt.setLight,args:[O.light]});var Y={},re=[];(function(ue,ve,be,Me){var pe;for(pe in ve=ve||{},ue=ue||{})ue.hasOwnProperty(pe)&&(ve.hasOwnProperty(pe)||rt(pe,be,Me));for(pe in ve)ve.hasOwnProperty(pe)&&(ue.hasOwnProperty(pe)?r.deepEqual(ue[pe],ve[pe])||(ue[pe].type==="geojson"&&ve[pe].type==="geojson"&&dt(ue,ve,pe)?be.push({command:Wt.setGeoJSONSourceData,args:[pe,ve[pe].data]}):Re(pe,ve,be,Me)):Va(pe,ve,be))})(L.sources,O.sources,re,Y);var oe=[];L.layers&&L.layers.forEach(function(ue){Y[ue.source]?Z.push({command:Wt.removeLayer,args:[ue.id]}):oe.push(ue)}),Z=Z.concat(re),function(ue,ve,be){ve=ve||[];var Me,pe,Ee,We,Ve,je,He,et=(ue=ue||[]).map(la),ht=ve.map(la),At=ue.reduce(Ea,{}),It=ve.reduce(Ea,{}),Zt=et.slice(),ca=Object.create(null);for(Me=0,pe=0;Me<et.length;Me++)It.hasOwnProperty(Ee=et[Me])?pe++:(be.push({command:Wt.removeLayer,args:[Ee]}),Zt.splice(Zt.indexOf(Ee,pe),1));for(Me=0,pe=0;Me<ht.length;Me++)Zt[Zt.length-1-Me]!==(Ee=ht[ht.length-1-Me])&&(At.hasOwnProperty(Ee)?(be.push({command:Wt.removeLayer,args:[Ee]}),Zt.splice(Zt.lastIndexOf(Ee,Zt.length-pe),1)):pe++,be.push({command:Wt.addLayer,args:[It[Ee],je=Zt[Zt.length-Me]]}),Zt.splice(Zt.length-Me,0,Ee),ca[Ee]=!0);for(Me=0;Me<ht.length;Me++)if(We=At[Ee=ht[Me]],Ve=It[Ee],!ca[Ee]&&!r.deepEqual(We,Ve))if(r.deepEqual(We.source,Ve.source)&&r.deepEqual(We["source-layer"],Ve["source-layer"])&&r.deepEqual(We.type,Ve.type)){for(He in mt(We.layout,Ve.layout,be,Ee,null,Wt.setLayoutProperty),mt(We.paint,Ve.paint,be,Ee,null,Wt.setPaintProperty),r.deepEqual(We.filter,Ve.filter)||be.push({command:Wt.setFilter,args:[Ee,Ve.filter]}),r.deepEqual(We.minzoom,Ve.minzoom)&&r.deepEqual(We.maxzoom,Ve.maxzoom)||be.push({command:Wt.setLayerZoomRange,args:[Ee,Ve.minzoom,Ve.maxzoom]}),We)We.hasOwnProperty(He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?mt(We[He],Ve[He],be,Ee,He.slice(6),Wt.setPaintProperty):r.deepEqual(We[He],Ve[He])||be.push({command:Wt.setLayerProperty,args:[Ee,He,Ve[He]]}));for(He in Ve)Ve.hasOwnProperty(He)&&!We.hasOwnProperty(He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?mt(We[He],Ve[He],be,Ee,He.slice(6),Wt.setPaintProperty):r.deepEqual(We[He],Ve[He])||be.push({command:Wt.setLayerProperty,args:[Ee,He,Ve[He]]}))}else be.push({command:Wt.removeLayer,args:[Ee]}),je=Zt[Zt.lastIndexOf(Ee)+1],be.push({command:Wt.addLayer,args:[Ve,je]})}(oe,O.layers,Z)}catch(ue){console.warn("Unable to compute style diff:",ue),Z=[{command:Wt.setStyle,args:[O]}]}return Z}(this.serialize(),p).filter(function(L){return!(L.command in Ou)});if(C.length===0)return!1;var E=C.filter(function(L){return!(L.command in Gu)});if(E.length>0)throw new Error("Unimplemented: "+E.map(function(L){return L.command}).join(", ")+".");return C.forEach(function(L){L.command!=="setTransition"&&b[L.command].apply(b,L.args)}),this.stylesheet=p,!0},g.prototype.addImage=function(p,b){if(this.getImage(p))return this.fire(new r.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(p,b),this._afterImageUpdated(p)},g.prototype.updateImage=function(p,b){this.imageManager.updateImage(p,b)},g.prototype.getImage=function(p){return this.imageManager.getImage(p)},g.prototype.removeImage=function(p){if(!this.getImage(p))return this.fire(new r.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(p),this._afterImageUpdated(p)},g.prototype._afterImageUpdated=function(p){this._availableImages=this.imageManager.listImages(),this._changedImages[p]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))},g.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},g.prototype.addSource=function(p,b,C){var E=this;if(C===void 0&&(C={}),this._checkLoaded(),this.sourceCaches[p]!==void 0)throw new Error("There is already a source with this ID");if(!b.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(b).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(b.type)>=0&&this._validate(r.validateStyle.source,"sources."+p,b,null,C))){this.map&&this.map._collectResourceTiming&&(b.collectResourceTiming=!0);var L=this.sourceCaches[p]=new ye(p,b,this.dispatcher);L.style=this,L.setEventedParent(this,function(){return{isSourceLoaded:E.loaded(),source:L.serialize(),sourceId:p}}),L.onAdd(this.map),this._changed=!0}},g.prototype.removeSource=function(p){if(this._checkLoaded(),this.sourceCaches[p]===void 0)throw new Error("There is no source with this ID");for(var b in this._layers)if(this._layers[b].source===p)return this.fire(new r.ErrorEvent(new Error('Source "'+p+'" cannot be removed while layer "'+b+'" is using it.')));var C=this.sourceCaches[p];delete this.sourceCaches[p],delete this._updatedSources[p],C.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:p})),C.setEventedParent(null),C.clearTiles(),C.onRemove&&C.onRemove(this.map),this._changed=!0},g.prototype.setGeoJSONSourceData=function(p,b){this._checkLoaded(),this.sourceCaches[p].getSource().setData(b),this._changed=!0},g.prototype.getSource=function(p){return this.sourceCaches[p]&&this.sourceCaches[p].getSource()},g.prototype.addLayer=function(p,b,C){C===void 0&&(C={}),this._checkLoaded();var E=p.id;if(this.getLayer(E))this.fire(new r.ErrorEvent(new Error('Layer with id "'+E+'" already exists on this map')));else{var L;if(p.type==="custom"){if(Wc(this,r.validateCustomStyleLayer(p)))return;L=r.createStyleLayer(p)}else{if(typeof p.source=="object"&&(this.addSource(E,p.source),p=r.clone$1(p),p=r.extend(p,{source:E})),this._validate(r.validateStyle.layer,"layers."+E,p,{arrayIndex:-1},C))return;L=r.createStyleLayer(p),this._validateLayer(L),L.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[L.id]=L.serialize()}var O=b?this._order.indexOf(b):this._order.length;if(b&&O===-1)this.fire(new r.ErrorEvent(new Error('Layer with id "'+b+'" does not exist on this map.')));else{if(this._order.splice(O,0,E),this._layerOrderChanged=!0,this._layers[E]=L,this._removedLayers[E]&&L.source&&L.type!=="custom"){var Z=this._removedLayers[E];delete this._removedLayers[E],Z.type!==L.type?this._updatedSources[L.source]="clear":(this._updatedSources[L.source]="reload",this.sourceCaches[L.source].pause())}this._updateLayer(L),L.onAdd&&L.onAdd(this.map)}}},g.prototype.moveLayer=function(p,b){if(this._checkLoaded(),this._changed=!0,this._layers[p]){if(p!==b){var C=this._order.indexOf(p);this._order.splice(C,1);var E=b?this._order.indexOf(b):this._order.length;b&&E===-1?this.fire(new r.ErrorEvent(new Error('Layer with id "'+b+'" does not exist on this map.'))):(this._order.splice(E,0,p),this._layerOrderChanged=!0)}}else this.fire(new r.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be moved.")))},g.prototype.removeLayer=function(p){this._checkLoaded();var b=this._layers[p];if(b){b.setEventedParent(null);var C=this._order.indexOf(p);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[p]=b,delete this._layers[p],delete this._serializedLayers[p],delete this._updatedLayers[p],delete this._updatedPaintProps[p],b.onRemove&&b.onRemove(this.map)}else this.fire(new r.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be removed.")))},g.prototype.getLayer=function(p){return this._layers[p]},g.prototype.hasLayer=function(p){return p in this._layers},g.prototype.setLayerZoomRange=function(p,b,C){this._checkLoaded();var E=this.getLayer(p);E?E.minzoom===b&&E.maxzoom===C||(b!=null&&(E.minzoom=b),C!=null&&(E.maxzoom=C),this._updateLayer(E)):this.fire(new r.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot have zoom extent.")))},g.prototype.setFilter=function(p,b,C){C===void 0&&(C={}),this._checkLoaded();var E=this.getLayer(p);if(E){if(!r.deepEqual(E.filter,b))return b==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(r.validateStyle.filter,"layers."+E.id+".filter",b,null,C)||(E.filter=r.clone$1(b),this._updateLayer(E)))}else this.fire(new r.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be filtered.")))},g.prototype.getFilter=function(p){return r.clone$1(this.getLayer(p).filter)},g.prototype.setLayoutProperty=function(p,b,C,E){E===void 0&&(E={}),this._checkLoaded();var L=this.getLayer(p);L?r.deepEqual(L.getLayoutProperty(b),C)||(L.setLayoutProperty(b,C,E),this._updateLayer(L)):this.fire(new r.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be styled.")))},g.prototype.getLayoutProperty=function(p,b){var C=this.getLayer(p);if(C)return C.getLayoutProperty(b);this.fire(new r.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style.")))},g.prototype.setPaintProperty=function(p,b,C,E){E===void 0&&(E={}),this._checkLoaded();var L=this.getLayer(p);L?r.deepEqual(L.getPaintProperty(b),C)||(L.setPaintProperty(b,C,E)&&this._updateLayer(L),this._changed=!0,this._updatedPaintProps[p]=!0):this.fire(new r.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be styled.")))},g.prototype.getPaintProperty=function(p,b){return this.getLayer(p).getPaintProperty(b)},g.prototype.setFeatureState=function(p,b){this._checkLoaded();var C=p.source,E=p.sourceLayer,L=this.sourceCaches[C];if(L!==void 0){var O=L.getSource().type;O==="geojson"&&E?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):O!=="vector"||E?(p.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),L.setFeatureState(E,p.id,b)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+C+"' does not exist in the map's style.")))},g.prototype.removeFeatureState=function(p,b){this._checkLoaded();var C=p.source,E=this.sourceCaches[C];if(E!==void 0){var L=E.getSource().type,O=L==="vector"?p.sourceLayer:void 0;L!=="vector"||O?b&&typeof p.id!="string"&&typeof p.id!="number"?this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):E.removeFeatureState(O,p.id,b):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+C+"' does not exist in the map's style.")))},g.prototype.getFeatureState=function(p){this._checkLoaded();var b=p.source,C=p.sourceLayer,E=this.sourceCaches[b];if(E!==void 0){if(E.getSource().type!=="vector"||C)return p.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),E.getFeatureState(C,p.id);this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+b+"' does not exist in the map's style.")))},g.prototype.getTransition=function(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},g.prototype.serialize=function(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,function(p){return p.serialize()}),layers:this._serializeLayers(this._order)},function(p){return p!==void 0})},g.prototype._updateLayer=function(p){this._updatedLayers[p.id]=!0,p.source&&!this._updatedSources[p.source]&&this.sourceCaches[p.source].getSource().type!=="raster"&&(this._updatedSources[p.source]="reload",this.sourceCaches[p.source].pause()),this._changed=!0},g.prototype._flattenAndSortRenderedFeatures=function(p){for(var b=this,C=function(At){return b._layers[At].type==="fill-extrusion"},E={},L=[],O=this._order.length-1;O>=0;O--){var Z=this._order[O];if(C(Z)){E[Z]=O;for(var Y=0,re=p;Y<re.length;Y+=1){var oe=re[Y][Z];if(oe)for(var ue=0,ve=oe;ue<ve.length;ue+=1)L.push(ve[ue])}}}L.sort(function(At,It){return It.intersectionZ-At.intersectionZ});for(var be=[],Me=this._order.length-1;Me>=0;Me--){var pe=this._order[Me];if(C(pe))for(var Ee=L.length-1;Ee>=0;Ee--){var We=L[Ee].feature;if(E[We.layer.id]<Me)break;be.push(We),L.pop()}else for(var Ve=0,je=p;Ve<je.length;Ve+=1){var He=je[Ve][pe];if(He)for(var et=0,ht=He;et<ht.length;et+=1)be.push(ht[et].feature)}}return be},g.prototype.queryRenderedFeatures=function(p,b,C){b&&b.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",b.filter,null,b);var E={};if(b&&b.layers){if(!Array.isArray(b.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var L=0,O=b.layers;L<O.length;L+=1){var Z=O[L],Y=this._layers[Z];if(!Y)return this.fire(new r.ErrorEvent(new Error("The layer '"+Z+"' does not exist in the map's style and cannot be queried for features."))),[];E[Y.source]=!0}}var re=[];for(var oe in b.availableImages=this._availableImages,this.sourceCaches)b.layers&&!E[oe]||re.push(bt(this.sourceCaches[oe],this._layers,this._serializedLayers,p,b,C));return this.placement&&re.push(function(ue,ve,be,Me,pe,Ee,We){for(var Ve={},je=Ee.queryRenderedSymbols(Me),He=[],et=0,ht=Object.keys(je).map(Number);et<ht.length;et+=1)He.push(We[ht[et]]);He.sort(ui);for(var At=function(){var _a=Zt[It],fi=_a.featureIndex.lookupSymbolFeatures(je[_a.bucketInstanceId],ve,_a.bucketIndex,_a.sourceLayerIndex,pe.filter,pe.layers,pe.availableImages,ue);for(var qt in fi){var Ta=Ve[qt]=Ve[qt]||[],Za=fi[qt];Za.sort(function(Da,xa){var fa=_a.featureSortOrder;if(fa){var _r=fa.indexOf(Da.featureIndex);return fa.indexOf(xa.featureIndex)-_r}return xa.featureIndex-Da.featureIndex});for(var Aa=0,Sa=Za;Aa<Sa.length;Aa+=1)Ta.push(Sa[Aa])}},It=0,Zt=He;It<Zt.length;It+=1)At();var ca=function(_a){Ve[_a].forEach(function(fi){var qt=fi.feature,Ta=be[ue[_a].source].getFeatureState(qt.layer["source-layer"],qt.id);qt.source=qt.layer.source,qt.layer["source-layer"]&&(qt.sourceLayer=qt.layer["source-layer"]),qt.state=Ta})};for(var ma in Ve)ca(ma);return Ve}(this._layers,this._serializedLayers,this.sourceCaches,p,b,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(re)},g.prototype.querySourceFeatures=function(p,b){b&&b.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",b.filter,null,b);var C=this.sourceCaches[p];return C?function(E,L){for(var O=E.getRenderableIds().map(function(ve){return E.getTileByID(ve)}),Z=[],Y={},re=0;re<O.length;re++){var oe=O[re],ue=oe.tileID.canonical.key;Y[ue]||(Y[ue]=!0,oe.querySourceFeatures(Z,L))}return Z}(C,b):[]},g.prototype.addSourceType=function(p,b,C){return g.getSourceType(p)?C(new Error('A source type called "'+p+'" already exists.')):(g.setSourceType(p,b),b.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:p,url:b.workerSourceURL},C):C(null,null))},g.prototype.getLight=function(){return this.light.getLight()},g.prototype.setLight=function(p,b){b===void 0&&(b={}),this._checkLoaded();var C=this.light.getLight(),E=!1;for(var L in p)if(!r.deepEqual(p[L],C[L])){E=!0;break}if(E){var O={now:r.browser.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(p,b),this.light.updateTransitions(O)}},g.prototype._validate=function(p,b,C,E,L){return L===void 0&&(L={}),(!L||L.validate!==!1)&&Wc(this,p.call(r.validateStyle,r.extend({key:b,style:this.serialize(),value:C,styleSpec:r.styleSpec},E)))},g.prototype._remove=function(){for(var p in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[p].setEventedParent(null);for(var b in this.sourceCaches)this.sourceCaches[b].clearTiles(),this.sourceCaches[b].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},g.prototype._clearSource=function(p){this.sourceCaches[p].clearTiles()},g.prototype._reloadSource=function(p){this.sourceCaches[p].resume(),this.sourceCaches[p].reload()},g.prototype._updateSources=function(p){for(var b in this.sourceCaches)this.sourceCaches[b].update(p)},g.prototype._generateCollisionBoxes=function(){for(var p in this.sourceCaches)this._reloadSource(p)},g.prototype._updatePlacement=function(p,b,C,E,L){L===void 0&&(L=!1);for(var O=!1,Z=!1,Y={},re=0,oe=this._order;re<oe.length;re+=1){var ue=this._layers[oe[re]];if(ue.type==="symbol"){if(!Y[ue.source]){var ve=this.sourceCaches[ue.source];Y[ue.source]=ve.getRenderableIds(!0).map(function(We){return ve.getTileByID(We)}).sort(function(We,Ve){return Ve.tileID.overscaledZ-We.tileID.overscaledZ||(We.tileID.isLessThan(Ve.tileID)?-1:1)})}var be=this.crossTileSymbolIndex.addLayer(ue,Y[ue.source],p.center.lng);O=O||be}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((L=L||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.browser.now(),p.zoom))&&(this.pauseablePlacement=new p_(p,this._order,L,b,C,E,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Y),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.browser.now()),Z=!0),O&&this.pauseablePlacement.placement.setStale()),Z||O)for(var Me=0,pe=this._order;Me<pe.length;Me+=1){var Ee=this._layers[pe[Me]];Ee.type==="symbol"&&this.placement.updateLayerOpacities(Ee,Y[Ee.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.browser.now())},g.prototype._releaseSymbolFadeTiles=function(){for(var p in this.sourceCaches)this.sourceCaches[p].releaseSymbolFadeTiles()},g.prototype.getImages=function(p,b,C){this.imageManager.getImages(b.icons,C),this._updateTilesForChangedImages();var E=this.sourceCaches[b.source];E&&E.setDependencies(b.tileID.key,b.type,b.icons)},g.prototype.getGlyphs=function(p,b,C){this.glyphManager.getGlyphs(b.stacks,C)},g.prototype.getResource=function(p,b,C){return r.makeRequest(b,C)},g}(r.Evented);Rs.getSourceType=function(_){return $t[_]},Rs.setSourceType=function(_,g){$t[_]=g},Rs.registerForPluginStateChange=r.registerForPluginStateChange;var Yn=r.createLayout([{name:"a_pos",type:"Int16",components:2}]),$d=Hi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),wb=Hi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),$I=Hi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),JI=Hi(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),qf=Hi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Yf=Hi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Kf=Hi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),jf=Hi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ib=Hi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Cb=Hi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),QI=Hi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),g_=Hi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),f_=Hi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Sb=Hi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Or=Hi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),$f=Hi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Pu=Hi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Bu=Hi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Gc=Hi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Oc=Hi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Nu=Hi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Pc=Hi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Bc=Hi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Fu=Hi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Ab=Hi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Tb=Hi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Hi(_,g){var p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=g.match(/attribute ([\w]+) ([\w]+)/g),C=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),L=E?E.concat(C):C,O={};return{fragmentSource:_=_.replace(p,function(Z,Y,re,oe,ue){return O[ue]=!0,Y==="define"?`
#ifndef HAS_UNIFORM_u_`+ue+`
varying `+re+" "+oe+" "+ue+`;
#else
uniform `+re+" "+oe+" u_"+ue+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ue+`
    `+re+" "+oe+" "+ue+" = u_"+ue+`;
#endif
`}),vertexSource:g=g.replace(p,function(Z,Y,re,oe,ue){var ve=oe==="float"?"vec2":"vec4",be=ue.match(/color/)?"color":ve;return O[ue]?Y==="define"?`
#ifndef HAS_UNIFORM_u_`+ue+`
uniform lowp float u_`+ue+`_t;
attribute `+re+" "+ve+" a_"+ue+`;
varying `+re+" "+oe+" "+ue+`;
#else
uniform `+re+" "+oe+" u_"+ue+`;
#endif
`:be==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ue+`
    `+ue+" = a_"+ue+`;
#else
    `+re+" "+oe+" "+ue+" = u_"+ue+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ue+`
    `+ue+" = unpack_mix_"+be+"(a_"+ue+", u_"+ue+`_t);
#else
    `+re+" "+oe+" "+ue+" = u_"+ue+`;
#endif
`:Y==="define"?`
#ifndef HAS_UNIFORM_u_`+ue+`
uniform lowp float u_`+ue+`_t;
attribute `+re+" "+ve+" a_"+ue+`;
#else
uniform `+re+" "+oe+" u_"+ue+`;
#endif
`:be==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ue+`
    `+re+" "+oe+" "+ue+" = a_"+ue+`;
#else
    `+re+" "+oe+" "+ue+" = u_"+ue+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ue+`
    `+re+" "+oe+" "+ue+" = unpack_mix_"+be+"(a_"+ue+", u_"+ue+`_t);
#else
    `+re+" "+oe+" "+ue+" = u_"+ue+`;
#endif
`}),staticAttributes:b,staticUniforms:L}}var eC=Object.freeze({__proto__:null,prelude:$d,background:wb,backgroundPattern:$I,circle:JI,clippingMask:qf,heatmap:Yf,heatmapTexture:Kf,collisionBox:jf,collisionCircle:Ib,debug:Cb,fill:QI,fillOutline:g_,fillOutlinePattern:f_,fillPattern:Sb,fillExtrusion:Or,fillExtrusionPattern:$f,hillshadePrepare:Pu,hillshade:Bu,line:Gc,lineGradient:Oc,linePattern:Nu,lineSDF:Pc,raster:Bc,symbolIcon:Fu,symbolSDF:Ab,symbolTextAndIcon:Tb}),rp=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Eb(_){for(var g=[],p=0;p<_.length;p++)if(_[p]!==null){var b=_[p].split(" ");g.push(b.pop())}return g}rp.prototype.bind=function(_,g,p,b,C,E,L,O){this.context=_;for(var Z=this.boundPaintVertexBuffers.length!==b.length,Y=0;!Z&&Y<b.length;Y++)this.boundPaintVertexBuffers[Y]!==b[Y]&&(Z=!0);_.extVertexArrayObject&&this.vao&&this.boundProgram===g&&this.boundLayoutVertexBuffer===p&&!Z&&this.boundIndexBuffer===C&&this.boundVertexOffset===E&&this.boundDynamicVertexBuffer===L&&this.boundDynamicVertexBuffer2===O?(_.bindVertexArrayOES.set(this.vao),L&&L.bind(),C&&C.dynamicDraw&&C.bind(),O&&O.bind()):this.freshBind(g,p,b,C,E,L,O)},rp.prototype.freshBind=function(_,g,p,b,C,E,L){var O,Z=_.numAttributes,Y=this.context,re=Y.gl;if(Y.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Y.extVertexArrayObject.createVertexArrayOES(),Y.bindVertexArrayOES.set(this.vao),O=0,this.boundProgram=_,this.boundLayoutVertexBuffer=g,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=b,this.boundVertexOffset=C,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=L;else{O=Y.currentNumAttributes||0;for(var oe=Z;oe<O;oe++)re.disableVertexAttribArray(oe)}g.enableAttributes(re,_);for(var ue=0,ve=p;ue<ve.length;ue+=1)ve[ue].enableAttributes(re,_);E&&E.enableAttributes(re,_),L&&L.enableAttributes(re,_),g.bind(),g.setVertexAttribPointers(re,_,C);for(var be=0,Me=p;be<Me.length;be+=1){var pe=Me[be];pe.bind(),pe.setVertexAttribPointers(re,_,C)}E&&(E.bind(),E.setVertexAttribPointers(re,_,C)),b&&b.bind(),L&&(L.bind(),L.setVertexAttribPointers(re,_,C)),Y.currentNumAttributes=Z},rp.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Mb=function(_,g,p,b,C,E){var L=_.gl;this.program=L.createProgram();for(var O=Eb(p.staticAttributes),Z=b?b.getBinderAttributes():[],Y=O.concat(Z),re=p.staticUniforms?Eb(p.staticUniforms):[],oe=b?b.getBinderUniforms():[],ue=[],ve=0,be=re.concat(oe);ve<be.length;ve+=1){var Me=be[ve];ue.indexOf(Me)<0&&ue.push(Me)}var pe=b?b.defines():[];E&&pe.push("#define OVERDRAW_INSPECTOR;");var Ee=pe.concat($d.fragmentSource,p.fragmentSource).join(`
`),We=pe.concat($d.vertexSource,p.vertexSource).join(`
`),Ve=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())this.failedToCreate=!0;else{L.shaderSource(Ve,Ee),L.compileShader(Ve),L.attachShader(this.program,Ve);var je=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())this.failedToCreate=!0;else{L.shaderSource(je,We),L.compileShader(je),L.attachShader(this.program,je),this.attributes={};var He={};this.numAttributes=Y.length;for(var et=0;et<this.numAttributes;et++)Y[et]&&(L.bindAttribLocation(this.program,et,Y[et]),this.attributes[Y[et]]=et);L.linkProgram(this.program),L.deleteShader(je),L.deleteShader(Ve);for(var ht=0;ht<ue.length;ht++){var At=ue[ht];if(At&&!He[At]){var It=L.getUniformLocation(this.program,At);It&&(He[At]=It)}}this.fixedUniforms=C(_,He),this.binderUniforms=b?b.getUniforms(_,He):[]}}};function Lb(_,g,p){var b=1/gn(p,1,g.transform.tileZoom),C=Math.pow(2,p.tileID.overscaledZ),E=p.tileSize*Math.pow(2,g.transform.tileZoom)/C,L=E*(p.tileID.canonical.x+p.tileID.wrap*C),O=E*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[b,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[L>>16,O>>16],u_pixel_coord_lower:[65535&L,65535&O]}}Mb.prototype.draw=function(_,g,p,b,C,E,L,O,Z,Y,re,oe,ue,ve,be,Me){var pe,Ee=_.gl;if(!this.failedToCreate){for(var We in _.program.set(this.program),_.setDepthMode(p),_.setStencilMode(b),_.setColorMode(C),_.setCullFace(E),this.fixedUniforms)this.fixedUniforms[We].set(L[We]);ve&&ve.setUniforms(_,this.binderUniforms,oe,{zoom:ue});for(var Ve=(pe={},pe[Ee.LINES]=2,pe[Ee.TRIANGLES]=3,pe[Ee.LINE_STRIP]=1,pe)[g],je=0,He=re.get();je<He.length;je+=1){var et=He[je],ht=et.vaos||(et.vaos={});(ht[O]||(ht[O]=new rp)).bind(_,this,Z,ve?ve.getPaintVertexBuffers():[],Y,et.vertexOffset,be,Me),Ee.drawElements(g,et.primitiveLength*Ve,Ee.UNSIGNED_SHORT,et.primitiveOffset*Ve*2)}}};var Rb=function(_,g,p,b){var C=g.style.light,E=C.properties.get("position"),L=[E.x,E.y,E.z],O=r.create$1();C.properties.get("anchor")==="viewport"&&r.fromRotation(O,-g.transform.angle),r.transformMat3(L,L,O);var Z=C.properties.get("color");return{u_matrix:_,u_lightpos:L,u_lightintensity:C.properties.get("intensity"),u_lightcolor:[Z.r,Z.g,Z.b],u_vertical_gradient:+p,u_opacity:b}},Nc=function(_,g,p,b,C,E,L){return r.extend(Rb(_,g,p,b),Lb(E,g,L),{u_height_factor:-Math.pow(2,C.overscaledZ)/L.tileSize/8})},Du=function(_){return{u_matrix:_}},Fc=function(_,g,p,b){return r.extend(Du(_),Lb(p,g,b))},kb=function(_,g){return{u_matrix:_,u_world:g}},Wb=function(_,g,p,b,C){return r.extend(Fc(_,g,p,b),{u_world:C})},Jf=function(_,g,p,b){var C,E,L=_.transform;if(b.paint.get("circle-pitch-alignment")==="map"){var O=gn(p,1,L.zoom);C=!0,E=[O,O]}else C=!1,E=L.pixelsToGLUnits;return{u_camera_to_center_distance:L.cameraToCenterDistance,u_scale_with_map:+(b.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(g.posMatrix,p,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_pitch_with_map:+C,u_device_pixel_ratio:r.browser.devicePixelRatio,u_extrude_scale:E}},Dc=function(_,g,p){var b=gn(p,1,g.zoom),C=Math.pow(2,g.zoom-p.tileID.overscaledZ),E=p.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:g.cameraToCenterDistance,u_pixels_to_tile_units:b,u_extrude_scale:[g.pixelsToGLUnits[0]/(b*C),g.pixelsToGLUnits[1]/(b*C)],u_overscale_factor:E}},Gb=function(_,g,p){return{u_matrix:_,u_inv_matrix:g,u_camera_to_center_distance:p.cameraToCenterDistance,u_viewport_size:[p.width,p.height]}},Vc=function(_,g,p){return p===void 0&&(p=1),{u_matrix:_,u_color:g,u_overlay:0,u_overlay_scale:p}},Zc=function(_){return{u_matrix:_}},Ob=function(_,g,p,b){return{u_matrix:_,u_extrude_scale:gn(g,1,p),u_intensity:b}},y_=function(_,g,p){var b=_.transform;return{u_matrix:Pb(_,g,p),u_ratio:1/gn(g,1,b.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Qi=function(_,g,p,b){return r.extend(y_(_,g,p),{u_image:0,u_image_height:b})},sp=function(_,g,p,b){var C=_.transform,E=Jd(g,C);return{u_matrix:Pb(_,g,p),u_texsize:g.imageAtlasTexture.size,u_ratio:1/gn(g,1,C.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_image:0,u_scale:[E,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},tC=function(_,g,p,b,C){var E=_.lineAtlas,L=Jd(g,_.transform),O=p.layout.get("line-cap")==="round",Z=E.getDash(b.from,O),Y=E.getDash(b.to,O),re=Z.width*C.fromScale,oe=Y.width*C.toScale;return r.extend(y_(_,g,p),{u_patternscale_a:[L/re,-Z.height/2],u_patternscale_b:[L/oe,-Y.height/2],u_sdfgamma:E.width/(256*Math.min(re,oe)*r.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Z.y,u_tex_y_b:Y.y,u_mix:C.t})};function Jd(_,g){return 1/gn(_,1,g.tileZoom)}function Pb(_,g,p){return _.translatePosMatrix(g.tileID.posMatrix,g,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}var aC=function(_,g,p,b,C){return{u_matrix:_,u_tl_parent:g,u_scale_parent:p,u_buffer_scale:1,u_fade_t:b.mix,u_opacity:b.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(L=C.paint.get("raster-saturation"),L>0?1-1/(1.001-L):-L),u_contrast_factor:(E=C.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Bb(C.paint.get("raster-hue-rotate"))};var E,L};function Bb(_){_*=Math.PI/180;var g=Math.sin(_),p=Math.cos(_);return[(2*p+1)/3,(-Math.sqrt(3)*g-p+1)/3,(Math.sqrt(3)*g-p+1)/3]}var op,Qd=function(_,g,p,b,C,E,L,O,Z,Y){var re=C.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:g?g.uSizeT:0,u_size:g?g.uSize:0,u_camera_to_center_distance:re.cameraToCenterDistance,u_pitch:re.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:re.width/re.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:L,u_coord_matrix:O,u_is_text:+Z,u_pitch_with_map:+b,u_texsize:Y,u_texture:0}},b_=function(_,g,p,b,C,E,L,O,Z,Y,re){var oe=C.transform;return r.extend(Qd(_,g,p,b,C,E,L,O,Z,Y),{u_gamma_scale:b?Math.cos(oe._pitch)*oe.cameraToCenterDistance:1,u_device_pixel_ratio:r.browser.devicePixelRatio,u_is_halo:+re})},lp=function(_,g,p,b,C,E,L,O,Z,Y){return r.extend(b_(_,g,p,b,C,E,L,O,!0,Z,!0),{u_texsize_icon:Y,u_texture_icon:1})},v_=function(_,g,p){return{u_matrix:_,u_opacity:g,u_color:p}},eh=function(_,g,p,b,C,E){return r.extend(function(L,O,Z,Y){var re=Z.imageManager.getPattern(L.from.toString()),oe=Z.imageManager.getPattern(L.to.toString()),ue=Z.imageManager.getPixelSize(),ve=ue.width,be=ue.height,Me=Math.pow(2,Y.tileID.overscaledZ),pe=Y.tileSize*Math.pow(2,Z.transform.tileZoom)/Me,Ee=pe*(Y.tileID.canonical.x+Y.tileID.wrap*Me),We=pe*Y.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:re.tl,u_pattern_br_a:re.br,u_pattern_tl_b:oe.tl,u_pattern_br_b:oe.br,u_texsize:[ve,be],u_mix:O.t,u_pattern_size_a:re.displaySize,u_pattern_size_b:oe.displaySize,u_scale_a:O.fromScale,u_scale_b:O.toScale,u_tile_units_to_pixels:1/gn(Y,1,Z.transform.tileZoom),u_pixel_coord_upper:[Ee>>16,We>>16],u_pixel_coord_lower:[65535&Ee,65535&We]}}(b,E,p,C),{u_matrix:_,u_opacity:g})},Nb={fillExtrusion:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_lightpos:new r.Uniform3f(_,g.u_lightpos),u_lightintensity:new r.Uniform1f(_,g.u_lightintensity),u_lightcolor:new r.Uniform3f(_,g.u_lightcolor),u_vertical_gradient:new r.Uniform1f(_,g.u_vertical_gradient),u_opacity:new r.Uniform1f(_,g.u_opacity)}},fillExtrusionPattern:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_lightpos:new r.Uniform3f(_,g.u_lightpos),u_lightintensity:new r.Uniform1f(_,g.u_lightintensity),u_lightcolor:new r.Uniform3f(_,g.u_lightcolor),u_vertical_gradient:new r.Uniform1f(_,g.u_vertical_gradient),u_height_factor:new r.Uniform1f(_,g.u_height_factor),u_image:new r.Uniform1i(_,g.u_image),u_texsize:new r.Uniform2f(_,g.u_texsize),u_pixel_coord_upper:new r.Uniform2f(_,g.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(_,g.u_pixel_coord_lower),u_scale:new r.Uniform3f(_,g.u_scale),u_fade:new r.Uniform1f(_,g.u_fade),u_opacity:new r.Uniform1f(_,g.u_opacity)}},fill:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix)}},fillPattern:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_image:new r.Uniform1i(_,g.u_image),u_texsize:new r.Uniform2f(_,g.u_texsize),u_pixel_coord_upper:new r.Uniform2f(_,g.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(_,g.u_pixel_coord_lower),u_scale:new r.Uniform3f(_,g.u_scale),u_fade:new r.Uniform1f(_,g.u_fade)}},fillOutline:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_world:new r.Uniform2f(_,g.u_world)}},fillOutlinePattern:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_world:new r.Uniform2f(_,g.u_world),u_image:new r.Uniform1i(_,g.u_image),u_texsize:new r.Uniform2f(_,g.u_texsize),u_pixel_coord_upper:new r.Uniform2f(_,g.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(_,g.u_pixel_coord_lower),u_scale:new r.Uniform3f(_,g.u_scale),u_fade:new r.Uniform1f(_,g.u_fade)}},circle:function(_,g){return{u_camera_to_center_distance:new r.Uniform1f(_,g.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(_,g.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(_,g.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(_,g.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(_,g.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(_,g.u_matrix)}},collisionBox:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_camera_to_center_distance:new r.Uniform1f(_,g.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(_,g.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(_,g.u_extrude_scale),u_overscale_factor:new r.Uniform1f(_,g.u_overscale_factor)}},collisionCircle:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_inv_matrix:new r.UniformMatrix4f(_,g.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(_,g.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(_,g.u_viewport_size)}},debug:function(_,g){return{u_color:new r.UniformColor(_,g.u_color),u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_overlay:new r.Uniform1i(_,g.u_overlay),u_overlay_scale:new r.Uniform1f(_,g.u_overlay_scale)}},clippingMask:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix)}},heatmap:function(_,g){return{u_extrude_scale:new r.Uniform1f(_,g.u_extrude_scale),u_intensity:new r.Uniform1f(_,g.u_intensity),u_matrix:new r.UniformMatrix4f(_,g.u_matrix)}},heatmapTexture:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_world:new r.Uniform2f(_,g.u_world),u_image:new r.Uniform1i(_,g.u_image),u_color_ramp:new r.Uniform1i(_,g.u_color_ramp),u_opacity:new r.Uniform1f(_,g.u_opacity)}},hillshade:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_image:new r.Uniform1i(_,g.u_image),u_latrange:new r.Uniform2f(_,g.u_latrange),u_light:new r.Uniform2f(_,g.u_light),u_shadow:new r.UniformColor(_,g.u_shadow),u_highlight:new r.UniformColor(_,g.u_highlight),u_accent:new r.UniformColor(_,g.u_accent)}},hillshadePrepare:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_image:new r.Uniform1i(_,g.u_image),u_dimension:new r.Uniform2f(_,g.u_dimension),u_zoom:new r.Uniform1f(_,g.u_zoom),u_unpack:new r.Uniform4f(_,g.u_unpack)}},line:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_ratio:new r.Uniform1f(_,g.u_ratio),u_device_pixel_ratio:new r.Uniform1f(_,g.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(_,g.u_units_to_pixels)}},lineGradient:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_ratio:new r.Uniform1f(_,g.u_ratio),u_device_pixel_ratio:new r.Uniform1f(_,g.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(_,g.u_units_to_pixels),u_image:new r.Uniform1i(_,g.u_image),u_image_height:new r.Uniform1f(_,g.u_image_height)}},linePattern:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_texsize:new r.Uniform2f(_,g.u_texsize),u_ratio:new r.Uniform1f(_,g.u_ratio),u_device_pixel_ratio:new r.Uniform1f(_,g.u_device_pixel_ratio),u_image:new r.Uniform1i(_,g.u_image),u_units_to_pixels:new r.Uniform2f(_,g.u_units_to_pixels),u_scale:new r.Uniform3f(_,g.u_scale),u_fade:new r.Uniform1f(_,g.u_fade)}},lineSDF:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_ratio:new r.Uniform1f(_,g.u_ratio),u_device_pixel_ratio:new r.Uniform1f(_,g.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(_,g.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(_,g.u_patternscale_a),u_patternscale_b:new r.Uniform2f(_,g.u_patternscale_b),u_sdfgamma:new r.Uniform1f(_,g.u_sdfgamma),u_image:new r.Uniform1i(_,g.u_image),u_tex_y_a:new r.Uniform1f(_,g.u_tex_y_a),u_tex_y_b:new r.Uniform1f(_,g.u_tex_y_b),u_mix:new r.Uniform1f(_,g.u_mix)}},raster:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_tl_parent:new r.Uniform2f(_,g.u_tl_parent),u_scale_parent:new r.Uniform1f(_,g.u_scale_parent),u_buffer_scale:new r.Uniform1f(_,g.u_buffer_scale),u_fade_t:new r.Uniform1f(_,g.u_fade_t),u_opacity:new r.Uniform1f(_,g.u_opacity),u_image0:new r.Uniform1i(_,g.u_image0),u_image1:new r.Uniform1i(_,g.u_image1),u_brightness_low:new r.Uniform1f(_,g.u_brightness_low),u_brightness_high:new r.Uniform1f(_,g.u_brightness_high),u_saturation_factor:new r.Uniform1f(_,g.u_saturation_factor),u_contrast_factor:new r.Uniform1f(_,g.u_contrast_factor),u_spin_weights:new r.Uniform3f(_,g.u_spin_weights)}},symbolIcon:function(_,g){return{u_is_size_zoom_constant:new r.Uniform1i(_,g.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(_,g.u_is_size_feature_constant),u_size_t:new r.Uniform1f(_,g.u_size_t),u_size:new r.Uniform1f(_,g.u_size),u_camera_to_center_distance:new r.Uniform1f(_,g.u_camera_to_center_distance),u_pitch:new r.Uniform1f(_,g.u_pitch),u_rotate_symbol:new r.Uniform1i(_,g.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(_,g.u_aspect_ratio),u_fade_change:new r.Uniform1f(_,g.u_fade_change),u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(_,g.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(_,g.u_coord_matrix),u_is_text:new r.Uniform1i(_,g.u_is_text),u_pitch_with_map:new r.Uniform1i(_,g.u_pitch_with_map),u_texsize:new r.Uniform2f(_,g.u_texsize),u_texture:new r.Uniform1i(_,g.u_texture)}},symbolSDF:function(_,g){return{u_is_size_zoom_constant:new r.Uniform1i(_,g.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(_,g.u_is_size_feature_constant),u_size_t:new r.Uniform1f(_,g.u_size_t),u_size:new r.Uniform1f(_,g.u_size),u_camera_to_center_distance:new r.Uniform1f(_,g.u_camera_to_center_distance),u_pitch:new r.Uniform1f(_,g.u_pitch),u_rotate_symbol:new r.Uniform1i(_,g.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(_,g.u_aspect_ratio),u_fade_change:new r.Uniform1f(_,g.u_fade_change),u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(_,g.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(_,g.u_coord_matrix),u_is_text:new r.Uniform1i(_,g.u_is_text),u_pitch_with_map:new r.Uniform1i(_,g.u_pitch_with_map),u_texsize:new r.Uniform2f(_,g.u_texsize),u_texture:new r.Uniform1i(_,g.u_texture),u_gamma_scale:new r.Uniform1f(_,g.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(_,g.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(_,g.u_is_halo)}},symbolTextAndIcon:function(_,g){return{u_is_size_zoom_constant:new r.Uniform1i(_,g.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(_,g.u_is_size_feature_constant),u_size_t:new r.Uniform1f(_,g.u_size_t),u_size:new r.Uniform1f(_,g.u_size),u_camera_to_center_distance:new r.Uniform1f(_,g.u_camera_to_center_distance),u_pitch:new r.Uniform1f(_,g.u_pitch),u_rotate_symbol:new r.Uniform1i(_,g.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(_,g.u_aspect_ratio),u_fade_change:new r.Uniform1f(_,g.u_fade_change),u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(_,g.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(_,g.u_coord_matrix),u_is_text:new r.Uniform1i(_,g.u_is_text),u_pitch_with_map:new r.Uniform1i(_,g.u_pitch_with_map),u_texsize:new r.Uniform2f(_,g.u_texsize),u_texsize_icon:new r.Uniform2f(_,g.u_texsize_icon),u_texture:new r.Uniform1i(_,g.u_texture),u_texture_icon:new r.Uniform1i(_,g.u_texture_icon),u_gamma_scale:new r.Uniform1f(_,g.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(_,g.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(_,g.u_is_halo)}},background:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_opacity:new r.Uniform1f(_,g.u_opacity),u_color:new r.UniformColor(_,g.u_color)}},backgroundPattern:function(_,g){return{u_matrix:new r.UniformMatrix4f(_,g.u_matrix),u_opacity:new r.Uniform1f(_,g.u_opacity),u_image:new r.Uniform1i(_,g.u_image),u_pattern_tl_a:new r.Uniform2f(_,g.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(_,g.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(_,g.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(_,g.u_pattern_br_b),u_texsize:new r.Uniform2f(_,g.u_texsize),u_mix:new r.Uniform1f(_,g.u_mix),u_pattern_size_a:new r.Uniform2f(_,g.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(_,g.u_pattern_size_b),u_scale_a:new r.Uniform1f(_,g.u_scale_a),u_scale_b:new r.Uniform1f(_,g.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(_,g.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(_,g.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(_,g.u_tile_units_to_pixels)}}};function th(_,g,p,b,C,E,L){for(var O=_.context,Z=O.gl,Y=_.useProgram("collisionBox"),re=[],oe=0,ue=0,ve=0;ve<b.length;ve++){var be=b[ve],Me=g.getTile(be),pe=Me.getBucket(p);if(pe){var Ee=be.posMatrix;C[0]===0&&C[1]===0||(Ee=_.translatePosMatrix(be.posMatrix,Me,C,E));var We=L?pe.textCollisionBox:pe.iconCollisionBox,Ve=pe.collisionCircleArray;if(Ve.length>0){var je=r.create(),He=Ee;r.mul(je,pe.placementInvProjMatrix,_.transform.glCoordMatrix),r.mul(je,je,pe.placementViewportMatrix),re.push({circleArray:Ve,circleOffset:ue,transform:He,invTransform:je}),ue=oe+=Ve.length/4}We&&Y.draw(O,Z.LINES,le.disabled,me.disabled,_.colorModeForRenderPass(),Te.disabled,Dc(Ee,_.transform,Me),p.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,null,_.transform.zoom,null,null,We.collisionVertexBuffer)}}if(L&&re.length){var et=_.useProgram("collisionCircle"),ht=new r.StructArrayLayout2f1f2i16;ht.resize(4*oe),ht._trim();for(var At=0,It=0,Zt=re;It<Zt.length;It+=1)for(var ca=Zt[It],ma=0;ma<ca.circleArray.length/4;ma++){var _a=4*ma,fi=ca.circleArray[_a+0],qt=ca.circleArray[_a+1],Ta=ca.circleArray[_a+2],Za=ca.circleArray[_a+3];ht.emplace(At++,fi,qt,Ta,Za,0),ht.emplace(At++,fi,qt,Ta,Za,1),ht.emplace(At++,fi,qt,Ta,Za,2),ht.emplace(At++,fi,qt,Ta,Za,3)}(!op||op.length<2*oe)&&(op=function(Gn){var Yr=2*Gn,Sr=new r.StructArrayLayout3ui6;Sr.resize(Yr),Sr._trim();for(var Mn=0;Mn<Yr;Mn++){var Vn=6*Mn;Sr.uint16[Vn+0]=4*Mn+0,Sr.uint16[Vn+1]=4*Mn+1,Sr.uint16[Vn+2]=4*Mn+2,Sr.uint16[Vn+3]=4*Mn+2,Sr.uint16[Vn+4]=4*Mn+3,Sr.uint16[Vn+5]=4*Mn+0}return Sr}(oe));for(var Aa=O.createIndexBuffer(op,!0),Sa=O.createVertexBuffer(ht,r.collisionCircleLayout.members,!0),Da=0,xa=re;Da<xa.length;Da+=1){var fa=xa[Da],_r=Gb(fa.transform,fa.invTransform,_.transform);et.draw(O,Z.TRIANGLES,le.disabled,me.disabled,_.colorModeForRenderPass(),Te.disabled,_r,p.id,Sa,Aa,r.SegmentVector.simpleSegment(0,2*fa.circleOffset,fa.circleArray.length,fa.circleArray.length/2),null,_.transform.zoom,null,null,null)}Sa.destroy(),Aa.destroy()}}var nl=r.identity(new Float32Array(16));function Fb(_,g,p,b,C,E){var L=r.getAnchorAlignment(_),O=-(L.horizontalAlign-.5)*g,Z=-(L.verticalAlign-.5)*p,Y=r.evaluateVariableOffset(_,b);return new r.Point((O/C+Y[0])*E,(Z/C+Y[1])*E)}function Db(_,g,p,b,C,E,L,O,Z,Y,re){var oe=_.text.placedSymbolArray,ue=_.text.dynamicLayoutVertexArray,ve=_.icon.dynamicLayoutVertexArray,be={};ue.clear();for(var Me=0;Me<oe.length;Me++){var pe=oe.get(Me),Ee=pe.hidden||!pe.crossTileID||_.allowVerticalPlacement&&!pe.placedOrientation?null:b[pe.crossTileID];if(Ee){var We=new r.Point(pe.anchorX,pe.anchorY),Ve=Ya(We,p?O:L),je=gi(E.cameraToCenterDistance,Ve.signedDistanceFromCamera),He=C.evaluateSizeForFeature(_.textSizeData,Y,pe)*je/r.ONE_EM;p&&(He*=_.tilePixelRatio/Z);for(var et=Fb(Ee.anchor,Ee.width,Ee.height,Ee.textOffset,Ee.textBoxScale,He),ht=p?Ya(We.add(et),L).point:Ve.point.add(g?et.rotate(-E.angle):et),At=_.allowVerticalPlacement&&pe.placedOrientation===r.WritingMode.vertical?Math.PI/2:0,It=0;It<pe.numGlyphs;It++)r.addDynamicAttributes(ue,ht,At);re&&pe.associatedIconIndex>=0&&(be[pe.associatedIconIndex]={shiftedAnchor:ht,angle:At})}else as(pe.numGlyphs,ue)}if(re){ve.clear();for(var Zt=_.icon.placedSymbolArray,ca=0;ca<Zt.length;ca++){var ma=Zt.get(ca);if(ma.hidden)as(ma.numGlyphs,ve);else{var _a=be[ca];if(_a)for(var fi=0;fi<ma.numGlyphs;fi++)r.addDynamicAttributes(ve,_a.shiftedAnchor,_a.angle);else as(ma.numGlyphs,ve)}}_.icon.dynamicLayoutVertexBuffer.updateData(ve)}_.text.dynamicLayoutVertexBuffer.updateData(ue)}function Vb(_,g,p){return p.iconsInText&&g?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function zc(_,g,p,b,C,E,L,O,Z,Y,re,oe){for(var ue=_.context,ve=ue.gl,be=_.transform,Me=O==="map",pe=Z==="map",Ee=Me&&p.layout.get("symbol-placement")!=="point",We=Me&&!pe&&!Ee,Ve=p.layout.get("symbol-sort-key").constantOr(1)!==void 0,je=!1,He=_.depthModeForSublayer(0,le.ReadOnly),et=p.layout.get("text-variable-anchor"),ht=[],At=0,It=b;At<It.length;At+=1){var Zt=It[At],ca=g.getTile(Zt),ma=ca.getBucket(p);if(ma){var _a=C?ma.text:ma.icon;if(_a&&_a.segments.get().length){var fi=_a.programConfigurations.get(p.id),qt=C||ma.sdfIcons,Ta=C?ma.textSizeData:ma.iconSizeData,Za=pe||be.pitch!==0,Aa=_.useProgram(Vb(qt,C,ma),fi),Sa=r.evaluateSizeForZoom(Ta,be.zoom),Da=void 0,xa=[0,0],fa=void 0,_r=void 0,Gn=null,Yr=void 0;if(C)fa=ca.glyphAtlasTexture,_r=ve.LINEAR,Da=ca.glyphAtlasTexture.size,ma.iconsInText&&(xa=ca.imageAtlasTexture.size,Gn=ca.imageAtlasTexture,Yr=Za||_.options.rotating||_.options.zooming||Ta.kind==="composite"||Ta.kind==="camera"?ve.LINEAR:ve.NEAREST);else{var Sr=p.layout.get("icon-size").constantOr(0)!==1||ma.iconsNeedLinear;fa=ca.imageAtlasTexture,_r=qt||_.options.rotating||_.options.zooming||Sr||Za?ve.LINEAR:ve.NEAREST,Da=ca.imageAtlasTexture.size}var Mn=gn(ca,1,_.transform.zoom),Vn=Ui(Zt.posMatrix,pe,Me,_.transform,Mn),Bs=Oa(Zt.posMatrix,pe,Me,_.transform,Mn),ss=et&&ma.hasTextData(),Xu=p.layout.get("icon-text-fit")!=="none"&&ss&&ma.hasIconData();Ee&&h_(ma,Zt.posMatrix,_,C,Vn,Bs,pe,Y);var ys=_.translatePosMatrix(Zt.posMatrix,ca,E,L),ul=Ee||C&&et||Xu?nl:Vn,ko=_.translatePosMatrix(Bs,ca,E,L,!0),k_=qt&&p.paint.get(C?"text-halo-width":"icon-halo-width").constantOr(1)!==0,oh={program:Aa,buffers:_a,uniformValues:qt?ma.iconsInText?lp(Ta.kind,Sa,We,pe,_,ys,ul,ko,Da,xa):b_(Ta.kind,Sa,We,pe,_,ys,ul,ko,C,Da,!0):Qd(Ta.kind,Sa,We,pe,_,ys,ul,ko,C,Da),atlasTexture:fa,atlasTextureIcon:Gn,atlasInterpolation:_r,atlasInterpolationIcon:Yr,isSDF:qt,hasHalo:k_};if(Ve&&ma.canOverlap){je=!0;for(var qu=0,lh=_a.segments.get();qu<lh.length;qu+=1){var W_=lh[qu];ht.push({segments:new r.SegmentVector([W_]),sortKey:W_.sortKey,state:oh})}}else ht.push({segments:_a.segments,sortKey:0,state:oh})}}}je&&ht.sort(function(Yu,Kc){return Yu.sortKey-Kc.sortKey});for(var El=0,G_=ht;El<G_.length;El+=1){var Ml=G_[El],mr=Ml.state;if(ue.activeTexture.set(ve.TEXTURE0),mr.atlasTexture.bind(mr.atlasInterpolation,ve.CLAMP_TO_EDGE),mr.atlasTextureIcon&&(ue.activeTexture.set(ve.TEXTURE1),mr.atlasTextureIcon&&mr.atlasTextureIcon.bind(mr.atlasInterpolationIcon,ve.CLAMP_TO_EDGE)),mr.isSDF){var tu=mr.uniformValues;mr.hasHalo&&(tu.u_is_halo=1,x_(mr.buffers,Ml.segments,p,_,mr.program,He,re,oe,tu)),tu.u_is_halo=0}x_(mr.buffers,Ml.segments,p,_,mr.program,He,re,oe,mr.uniformValues)}}function x_(_,g,p,b,C,E,L,O,Z){var Y=b.context;C.draw(Y,Y.gl.TRIANGLES,E,L,O,Te.disabled,Z,p.id,_.layoutVertexBuffer,_.indexBuffer,g,p.paint,b.transform.zoom,_.programConfigurations.get(p.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function up(_,g,p,b,C,E,L){var O,Z,Y,re,oe,ue=_.context.gl,ve=p.paint.get("fill-pattern"),be=ve&&ve.constantOr(1),Me=p.getCrossfadeParameters();L?(Z=be&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",O=ue.LINES):(Z=be?"fillPattern":"fill",O=ue.TRIANGLES);for(var pe=0,Ee=b;pe<Ee.length;pe+=1){var We=Ee[pe],Ve=g.getTile(We);if(!be||Ve.patternsLoaded()){var je=Ve.getBucket(p);if(je){var He=je.programConfigurations.get(p.id),et=_.useProgram(Z,He);be&&(_.context.activeTexture.set(ue.TEXTURE0),Ve.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),He.updatePaintBuffers(Me));var ht=ve.constantOr(null);if(ht&&Ve.imageAtlas){var At=Ve.imageAtlas,It=At.patternPositions[ht.to.toString()],Zt=At.patternPositions[ht.from.toString()];It&&Zt&&He.setConstantPatternPositions(It,Zt)}var ca=_.translatePosMatrix(We.posMatrix,Ve,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(L){re=je.indexBuffer2,oe=je.segments2;var ma=[ue.drawingBufferWidth,ue.drawingBufferHeight];Y=Z==="fillOutlinePattern"&&be?Wb(ca,_,Me,Ve,ma):kb(ca,ma)}else re=je.indexBuffer,oe=je.segments,Y=be?Fc(ca,_,Me,Ve):Du(ca);et.draw(_.context,O,C,_.stencilModeForClipping(We),E,Te.disabled,Y,p.id,je.layoutVertexBuffer,re,oe,p.paint,_.transform.zoom,He)}}}}function Qf(_,g,p,b,C,E,L){for(var O=_.context,Z=O.gl,Y=p.paint.get("fill-extrusion-pattern"),re=Y.constantOr(1),oe=p.getCrossfadeParameters(),ue=p.paint.get("fill-extrusion-opacity"),ve=0,be=b;ve<be.length;ve+=1){var Me=be[ve],pe=g.getTile(Me),Ee=pe.getBucket(p);if(Ee){var We=Ee.programConfigurations.get(p.id),Ve=_.useProgram(re?"fillExtrusionPattern":"fillExtrusion",We);re&&(_.context.activeTexture.set(Z.TEXTURE0),pe.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),We.updatePaintBuffers(oe));var je=Y.constantOr(null);if(je&&pe.imageAtlas){var He=pe.imageAtlas,et=He.patternPositions[je.to.toString()],ht=He.patternPositions[je.from.toString()];et&&ht&&We.setConstantPatternPositions(et,ht)}var At=_.translatePosMatrix(Me.posMatrix,pe,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),It=p.paint.get("fill-extrusion-vertical-gradient"),Zt=re?Nc(At,_,It,ue,Me,oe,pe):Rb(At,_,It,ue);Ve.draw(O,O.gl.TRIANGLES,C,E,L,Te.backCCW,Zt,p.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,p.paint,_.transform.zoom,We)}}}function cp(_,g,p,b,C,E){var L=_.context,O=L.gl,Z=g.fbo;if(Z){var Y=_.useProgram("hillshade");L.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,Z.colorAttachment.get());var re=function(oe,ue,ve){var be=ve.paint.get("hillshade-shadow-color"),Me=ve.paint.get("hillshade-highlight-color"),pe=ve.paint.get("hillshade-accent-color"),Ee=ve.paint.get("hillshade-illumination-direction")*(Math.PI/180);ve.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ee-=oe.transform.angle);var We,Ve,je,He=!oe.options.moving;return{u_matrix:oe.transform.calculatePosMatrix(ue.tileID.toUnwrapped(),He),u_image:0,u_latrange:(We=ue.tileID,Ve=Math.pow(2,We.canonical.z),je=We.canonical.y,[new r.MercatorCoordinate(0,je/Ve).toLngLat().lat,new r.MercatorCoordinate(0,(je+1)/Ve).toLngLat().lat]),u_light:[ve.paint.get("hillshade-exaggeration"),Ee],u_shadow:be,u_highlight:Me,u_accent:pe}}(_,g,p);Y.draw(L,O.TRIANGLES,b,C,E,Te.disabled,re,p.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}}function iC(_,g,p,b,C,E){var L=_.context,O=L.gl,Z=g.dem;if(Z&&Z.data){var Y=Z.dim,re=Z.stride,oe=Z.getPixels();if(L.activeTexture.set(O.TEXTURE1),L.pixelStoreUnpackPremultiplyAlpha.set(!1),g.demTexture=g.demTexture||_.getTileTexture(re),g.demTexture){var ue=g.demTexture;ue.update(oe,{premultiply:!1}),ue.bind(O.NEAREST,O.CLAMP_TO_EDGE)}else g.demTexture=new r.Texture(L,oe,O.RGBA,{premultiply:!1}),g.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);L.activeTexture.set(O.TEXTURE0);var ve=g.fbo;if(!ve){var be=new r.Texture(L,{width:Y,height:Y,data:null},O.RGBA);be.bind(O.LINEAR,O.CLAMP_TO_EDGE),(ve=g.fbo=L.createFramebuffer(Y,Y,!0)).colorAttachment.set(be.texture)}L.bindFramebuffer.set(ve.framebuffer),L.viewport.set([0,0,Y,Y]),_.useProgram("hillshadePrepare").draw(L,O.TRIANGLES,b,C,E,Te.disabled,function(Me,pe){var Ee=pe.stride,We=r.create();return r.ortho(We,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(We,We,[0,-r.EXTENT,0]),{u_matrix:We,u_image:1,u_dimension:[Ee,Ee],u_zoom:Me.overscaledZ,u_unpack:pe.getUnpackVector()}}(g.tileID,Z),p.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),g.needsHillshadePrepare=!1}}function dp(_,g,p,b,C){var E=b.paint.get("raster-fade-duration");if(E>0){var L=r.browser.now(),O=(L-_.timeAdded)/E,Z=g?(L-g.timeAdded)/E:-1,Y=p.getSource(),re=C.coveringZoomLevel({tileSize:Y.tileSize,roundZoom:Y.roundZoom}),oe=!g||Math.abs(g.tileID.overscaledZ-re)>Math.abs(_.tileID.overscaledZ-re),ue=oe&&_.refreshedUponExpiration?1:r.clamp(oe?O:1-Z,0,1);return _.refreshedUponExpiration&&O>=1&&(_.refreshedUponExpiration=!1),g?{opacity:1,mix:1-ue}:{opacity:ue,mix:0}}return{opacity:1,mix:0}}var ey=new r.Color(1,0,0,1),Zb=new r.Color(0,1,0,1),zb=new r.Color(0,0,1,1),hp=new r.Color(1,0,1,1),ty=new r.Color(0,1,1,1);function ay(_,g,p,b){w_(_,0,g+p/2,_.transform.width,p,b)}function iy(_,g,p,b){w_(_,g-p/2,0,p,_.transform.height,b)}function w_(_,g,p,b,C,E){var L=_.context,O=L.gl;O.enable(O.SCISSOR_TEST),O.scissor(g*r.browser.devicePixelRatio,p*r.browser.devicePixelRatio,b*r.browser.devicePixelRatio,C*r.browser.devicePixelRatio),L.clear({color:E}),O.disable(O.SCISSOR_TEST)}function Ub(_,g,p){var b=_.context,C=b.gl,E=p.posMatrix,L=_.useProgram("debug"),O=le.disabled,Z=me.disabled,Y=_.colorModeForRenderPass();b.activeTexture.set(C.TEXTURE0),_.emptyTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),L.draw(b,C.LINE_STRIP,O,Z,Y,Te.disabled,Vc(E,r.Color.red),"$debug",_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments);var re=g.getTileByID(p.key).latestRawTileData,oe=Math.floor((re&&re.byteLength||0)/1024),ue=g.getTile(p).tileSize,ve=512/Math.min(ue,512)*(p.overscaledZ/_.transform.zoom)*.5,be=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(be+=" => "+p.overscaledZ),function(Me,pe){Me.initDebugOverlayCanvas();var Ee=Me.debugOverlayCanvas,We=Me.context.gl,Ve=Me.debugOverlayCanvas.getContext("2d");Ve.clearRect(0,0,Ee.width,Ee.height),Ve.shadowColor="white",Ve.shadowBlur=2,Ve.lineWidth=1.5,Ve.strokeStyle="white",Ve.textBaseline="top",Ve.font="bold 36px Open Sans, sans-serif",Ve.fillText(pe,5,5),Ve.strokeText(pe,5,5),Me.debugOverlayTexture.update(Ee),Me.debugOverlayTexture.bind(We.LINEAR,We.CLAMP_TO_EDGE)}(_,be+" "+oe+"kb"),L.draw(b,C.TRIANGLES,O,Z,Le.alphaBlended,Te.disabled,Vc(E,r.Color.transparent,ve),"$debug",_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments)}var Uc={symbol:function(_,g,p,b,C){if(_.renderPass==="translucent"){var E=me.disabled,L=_.colorModeForRenderPass();p.layout.get("text-variable-anchor")&&function(O,Z,Y,re,oe,ue,ve){for(var be=Z.transform,Me=oe==="map",pe=ue==="map",Ee=0,We=O;Ee<We.length;Ee+=1){var Ve=We[Ee],je=re.getTile(Ve),He=je.getBucket(Y);if(He&&He.text&&He.text.segments.get().length){var et=r.evaluateSizeForZoom(He.textSizeData,be.zoom),ht=gn(je,1,Z.transform.zoom),At=Ui(Ve.posMatrix,pe,Me,Z.transform,ht),It=Y.layout.get("icon-text-fit")!=="none"&&He.hasIconData();if(et){var Zt=Math.pow(2,be.zoom-je.tileID.overscaledZ);Db(He,Me,pe,ve,r.symbolSize,be,At,Ve.posMatrix,Zt,et,It)}}}}(b,_,p,g,p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),C),p.paint.get("icon-opacity").constantOr(1)!==0&&zc(_,g,p,b,!1,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),p.layout.get("icon-rotation-alignment"),p.layout.get("icon-pitch-alignment"),p.layout.get("icon-keep-upright"),E,L),p.paint.get("text-opacity").constantOr(1)!==0&&zc(_,g,p,b,!0,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),p.layout.get("text-keep-upright"),E,L),g.map.showCollisionBoxes&&(th(_,g,p,b,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),!0),th(_,g,p,b,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),!1))}},circle:function(_,g,p,b){if(_.renderPass==="translucent"){var C=p.paint.get("circle-opacity"),E=p.paint.get("circle-stroke-width"),L=p.paint.get("circle-stroke-opacity"),O=p.layout.get("circle-sort-key").constantOr(1)!==void 0;if(C.constantOr(1)!==0||E.constantOr(1)!==0&&L.constantOr(1)!==0){for(var Z=_.context,Y=Z.gl,re=_.depthModeForSublayer(0,le.ReadOnly),oe=me.disabled,ue=_.colorModeForRenderPass(),ve=[],be=0;be<b.length;be++){var Me=b[be],pe=g.getTile(Me),Ee=pe.getBucket(p);if(Ee){var We=Ee.programConfigurations.get(p.id),Ve={programConfiguration:We,program:_.useProgram("circle",We),layoutVertexBuffer:Ee.layoutVertexBuffer,indexBuffer:Ee.indexBuffer,uniformValues:Jf(_,Me,pe,p)};if(O)for(var je=0,He=Ee.segments.get();je<He.length;je+=1){var et=He[je];ve.push({segments:new r.SegmentVector([et]),sortKey:et.sortKey,state:Ve})}else ve.push({segments:Ee.segments,sortKey:0,state:Ve})}}O&&ve.sort(function(ca,ma){return ca.sortKey-ma.sortKey});for(var ht=0,At=ve;ht<At.length;ht+=1){var It=At[ht],Zt=It.state;Zt.program.draw(Z,Y.TRIANGLES,re,oe,ue,Te.disabled,Zt.uniformValues,p.id,Zt.layoutVertexBuffer,Zt.indexBuffer,It.segments,p.paint,_.transform.zoom,Zt.programConfiguration)}}}},heatmap:function(_,g,p,b){if(p.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){var C=_.context,E=C.gl,L=me.disabled,O=new Le([E.ONE,E.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(ve,be,Me){var pe=ve.gl;ve.activeTexture.set(pe.TEXTURE1),ve.viewport.set([0,0,be.width/4,be.height/4]);var Ee=Me.heatmapFbo;if(Ee)pe.bindTexture(pe.TEXTURE_2D,Ee.colorAttachment.get()),ve.bindFramebuffer.set(Ee.framebuffer);else{var We=pe.createTexture();pe.bindTexture(pe.TEXTURE_2D,We),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_S,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_T,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MIN_FILTER,pe.LINEAR),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MAG_FILTER,pe.LINEAR),Ee=Me.heatmapFbo=ve.createFramebuffer(be.width/4,be.height/4,!1),function(Ve,je,He,et){var ht=Ve.gl;ht.texImage2D(ht.TEXTURE_2D,0,ht.RGBA,je.width/4,je.height/4,0,ht.RGBA,Ve.extRenderToTextureHalfFloat?Ve.extTextureHalfFloat.HALF_FLOAT_OES:ht.UNSIGNED_BYTE,null),et.colorAttachment.set(He)}(ve,be,We,Ee)}})(C,_,p),C.clear({color:r.Color.transparent});for(var Z=0;Z<b.length;Z++){var Y=b[Z];if(!g.hasRenderableParent(Y)){var re=g.getTile(Y),oe=re.getBucket(p);if(oe){var ue=oe.programConfigurations.get(p.id);_.useProgram("heatmap",ue).draw(C,E.TRIANGLES,le.disabled,L,O,Te.disabled,Ob(Y.posMatrix,re,_.transform.zoom,p.paint.get("heatmap-intensity")),p.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,p.paint,_.transform.zoom,ue)}}}C.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(ve,be){var Me=ve.context,pe=Me.gl,Ee=be.heatmapFbo;if(Ee){Me.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,Ee.colorAttachment.get()),Me.activeTexture.set(pe.TEXTURE1);var We=be.colorRampTexture;We||(We=be.colorRampTexture=new r.Texture(Me,be.colorRamp,pe.RGBA)),We.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(Me,pe.TRIANGLES,le.disabled,me.disabled,ve.colorModeForRenderPass(),Te.disabled,function(Ve,je,He,et){var ht=r.create();r.ortho(ht,0,Ve.width,Ve.height,0,0,1);var At=Ve.context.gl;return{u_matrix:ht,u_world:[At.drawingBufferWidth,At.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:je.paint.get("heatmap-opacity")}}(ve,be),be.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,be.paint,ve.transform.zoom)}}(_,p))},line:function(_,g,p,b){if(_.renderPass==="translucent"){var C=p.paint.get("line-opacity"),E=p.paint.get("line-width");if(C.constantOr(1)!==0&&E.constantOr(1)!==0)for(var L=_.depthModeForSublayer(0,le.ReadOnly),O=_.colorModeForRenderPass(),Z=p.paint.get("line-dasharray"),Y=p.paint.get("line-pattern"),re=Y.constantOr(1),oe=p.paint.get("line-gradient"),ue=p.getCrossfadeParameters(),ve=re?"linePattern":Z?"lineSDF":oe?"lineGradient":"line",be=_.context,Me=be.gl,pe=!0,Ee=0,We=b;Ee<We.length;Ee+=1){var Ve=We[Ee],je=g.getTile(Ve);if(!re||je.patternsLoaded()){var He=je.getBucket(p);if(He){var et=He.programConfigurations.get(p.id),ht=_.context.program.get(),At=_.useProgram(ve,et),It=pe||At.program!==ht,Zt=Y.constantOr(null);if(Zt&&je.imageAtlas){var ca=je.imageAtlas,ma=ca.patternPositions[Zt.to.toString()],_a=ca.patternPositions[Zt.from.toString()];ma&&_a&&et.setConstantPatternPositions(ma,_a)}var fi=re?sp(_,je,p,ue):Z?tC(_,je,p,Z,ue):oe?Qi(_,je,p,He.lineClipsArray.length):y_(_,je,p);if(re)be.activeTexture.set(Me.TEXTURE0),je.imageAtlasTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE),et.updatePaintBuffers(ue);else if(Z&&(It||_.lineAtlas.dirty))be.activeTexture.set(Me.TEXTURE0),_.lineAtlas.bind(be);else if(oe){var qt=He.gradients[p.id],Ta=qt.texture;if(p.gradientVersion!==qt.version){var Za=256;if(p.stepInterpolant){var Aa=g.getSource().maxzoom,Sa=Ve.canonical.z===Aa?Math.ceil(1<<_.transform.maxZoom-Ve.canonical.z):1;Za=r.clamp(r.nextPowerOfTwo(He.maxLineLength/r.EXTENT*1024*Sa),256,be.maxTextureSize)}qt.gradient=r.renderColorRamp({expression:p.gradientExpression(),evaluationKey:"lineProgress",resolution:Za,image:qt.gradient||void 0,clips:He.lineClipsArray}),qt.texture?qt.texture.update(qt.gradient):qt.texture=new r.Texture(be,qt.gradient,Me.RGBA),qt.version=p.gradientVersion,Ta=qt.texture}be.activeTexture.set(Me.TEXTURE0),Ta.bind(p.stepInterpolant?Me.NEAREST:Me.LINEAR,Me.CLAMP_TO_EDGE)}At.draw(be,Me.TRIANGLES,L,_.stencilModeForClipping(Ve),O,Te.disabled,fi,p.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,p.paint,_.transform.zoom,et,He.layoutVertexBuffer2),pe=!1}}}}},fill:function(_,g,p,b){var C=p.paint.get("fill-color"),E=p.paint.get("fill-opacity");if(E.constantOr(1)!==0){var L=_.colorModeForRenderPass(),O=p.paint.get("fill-pattern"),Z=_.opaquePassEnabledForLayer()&&!O.constantOr(1)&&C.constantOr(r.Color.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===Z){var Y=_.depthModeForSublayer(1,_.renderPass==="opaque"?le.ReadWrite:le.ReadOnly);up(_,g,p,b,Y,L,!1)}if(_.renderPass==="translucent"&&p.paint.get("fill-antialias")){var re=_.depthModeForSublayer(p.getPaintProperty("fill-outline-color")?2:0,le.ReadOnly);up(_,g,p,b,re,L,!0)}}},"fill-extrusion":function(_,g,p,b){var C=p.paint.get("fill-extrusion-opacity");if(C!==0&&_.renderPass==="translucent"){var E=new le(_.context.gl.LEQUAL,le.ReadWrite,_.depthRangeFor3D);if(C!==1||p.paint.get("fill-extrusion-pattern").constantOr(1))Qf(_,g,p,b,E,me.disabled,Le.disabled),Qf(_,g,p,b,E,_.stencilModeFor3D(),_.colorModeForRenderPass());else{var L=_.colorModeForRenderPass();Qf(_,g,p,b,E,me.disabled,L)}}},hillshade:function(_,g,p,b){if(_.renderPass==="offscreen"||_.renderPass==="translucent"){for(var C=_.context,E=_.depthModeForSublayer(0,le.ReadOnly),L=_.colorModeForRenderPass(),O=_.renderPass==="translucent"?_.stencilConfigForOverlap(b):[{},b],Z=O[0],Y=0,re=O[1];Y<re.length;Y+=1){var oe=re[Y],ue=g.getTile(oe);ue.needsHillshadePrepare&&_.renderPass==="offscreen"?iC(_,ue,p,E,me.disabled,L):_.renderPass==="translucent"&&cp(_,ue,p,E,Z[oe.overscaledZ],L)}C.viewport.set([0,0,_.width,_.height])}},raster:function(_,g,p,b){if(_.renderPass==="translucent"&&p.paint.get("raster-opacity")!==0&&b.length)for(var C=_.context,E=C.gl,L=g.getSource(),O=_.useProgram("raster"),Z=_.colorModeForRenderPass(),Y=L instanceof De?[{},b]:_.stencilConfigForOverlap(b),re=Y[0],oe=Y[1],ue=oe[oe.length-1].overscaledZ,ve=!_.options.moving,be=0,Me=oe;be<Me.length;be+=1){var pe=Me[be],Ee=_.depthModeForSublayer(pe.overscaledZ-ue,p.paint.get("raster-opacity")===1?le.ReadWrite:le.ReadOnly,E.LESS),We=g.getTile(pe),Ve=_.transform.calculatePosMatrix(pe.toUnwrapped(),ve);We.registerFadeDuration(p.paint.get("raster-fade-duration"));var je=g.findLoadedParent(pe,0),He=dp(We,je,g,p,_.transform),et=void 0,ht=void 0,At=p.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;C.activeTexture.set(E.TEXTURE0),We.texture.bind(At,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),C.activeTexture.set(E.TEXTURE1),je?(je.texture.bind(At,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),et=Math.pow(2,je.tileID.overscaledZ-We.tileID.overscaledZ),ht=[We.tileID.canonical.x*et%1,We.tileID.canonical.y*et%1]):We.texture.bind(At,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);var It=aC(Ve,ht||[0,0],et||1,He,p);L instanceof De?O.draw(C,E.TRIANGLES,Ee,me.disabled,Z,Te.disabled,It,p.id,L.boundsBuffer,_.quadTriangleIndexBuffer,L.boundsSegments):O.draw(C,E.TRIANGLES,Ee,re[pe.overscaledZ],Z,Te.disabled,It,p.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}},background:function(_,g,p){var b=p.paint.get("background-color"),C=p.paint.get("background-opacity");if(C!==0){var E=_.context,L=E.gl,O=_.transform,Z=O.tileSize,Y=p.paint.get("background-pattern");if(!_.isPatternMissing(Y)){var re=!Y&&b.a===1&&C===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass===re){var oe=me.disabled,ue=_.depthModeForSublayer(0,re==="opaque"?le.ReadWrite:le.ReadOnly),ve=_.colorModeForRenderPass(),be=_.useProgram(Y?"backgroundPattern":"background"),Me=O.coveringTiles({tileSize:Z});Y&&(E.activeTexture.set(L.TEXTURE0),_.imageManager.bind(_.context));for(var pe=p.getCrossfadeParameters(),Ee=0,We=Me;Ee<We.length;Ee+=1){var Ve=We[Ee],je=_.transform.calculatePosMatrix(Ve.toUnwrapped()),He=Y?eh(je,C,_,Y,{tileID:Ve,tileSize:Z},pe):v_(je,C,b);be.draw(E,L.TRIANGLES,ue,oe,ve,Te.disabled,He,p.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}}}},debug:function(_,g,p){for(var b=0;b<p.length;b++)Ub(_,g,p[b])},custom:function(_,g,p){var b=_.context,C=p.implementation;if(_.renderPass==="offscreen"){var E=C.prerender;E&&(_.setCustomLayerDefaults(),b.setColorMode(_.colorModeForRenderPass()),E.call(C,b.gl,_.transform.customLayerMatrix()),b.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),b.setColorMode(_.colorModeForRenderPass()),b.setStencilMode(me.disabled);var L=C.renderingMode==="3d"?new le(_.context.gl.LEQUAL,le.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,le.ReadOnly);b.setDepthMode(L),C.render(b.gl,_.transform.customLayerMatrix()),b.setDirty(),_.setBaseState(),b.bindFramebuffer.set(null)}}},fn=function(_,g){this.context=new ae(_),this.transform=g,this._tileTextures={},this.setup(),this.numSublayers=ye.maxUnderzooming+ye.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wu,this.gpuTimers={}};fn.prototype.resize=function(_,g){if(this.width=_*r.browser.devicePixelRatio,this.height=g*r.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var p=0,b=this.style._order;p<b.length;p+=1)this.style._layers[b[p]].resize()},fn.prototype.setup=function(){var _=this.context,g=new r.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(r.EXTENT,0),g.emplaceBack(0,r.EXTENT),g.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=_.createVertexBuffer(g,Yn.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);var p=new r.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(r.EXTENT,0),p.emplaceBack(0,r.EXTENT),p.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=_.createVertexBuffer(p,Yn.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);var b=new r.StructArrayLayout4i8;b.emplaceBack(0,0,0,0),b.emplaceBack(r.EXTENT,0,r.EXTENT,0),b.emplaceBack(0,r.EXTENT,0,r.EXTENT),b.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=_.createVertexBuffer(b,yt.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);var C=new r.StructArrayLayout2i4;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=_.createVertexBuffer(C,Yn.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);var E=new r.StructArrayLayout1ui2;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=_.createIndexBuffer(E);var L=new r.StructArrayLayout3ui6;L.emplaceBack(0,1,2),L.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=_.createIndexBuffer(L),this.emptyTexture=new r.Texture(_,{width:1,height:1,data:new Uint8Array([0,0,0,0])},_.gl.RGBA);var O=this.context.gl;this.stencilClearMode=new me({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)},fn.prototype.clearStencil=function(){var _=this.context,g=_.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var p=r.create();r.ortho(p,0,this.width,this.height,0,0,1),r.scale(p,p,[g.drawingBufferWidth,g.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(_,g.TRIANGLES,le.disabled,this.stencilClearMode,Le.disabled,Te.disabled,Zc(p),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},fn.prototype._renderTileClippingMasks=function(_,g){if(this.currentStencilSource!==_.source&&_.isTileClipped()&&g&&g.length){this.currentStencilSource=_.source;var p=this.context,b=p.gl;this.nextStencilID+g.length>256&&this.clearStencil(),p.setColorMode(Le.disabled),p.setDepthMode(le.disabled);var C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var E=0,L=g;E<L.length;E+=1){var O=L[E],Z=this._tileClippingMaskIDs[O.key]=this.nextStencilID++;C.draw(p,b.TRIANGLES,le.disabled,new me({func:b.ALWAYS,mask:0},Z,255,b.KEEP,b.KEEP,b.REPLACE),Le.disabled,Te.disabled,Zc(O.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},fn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var _=this.nextStencilID++,g=this.context.gl;return new me({func:g.NOTEQUAL,mask:255},_,255,g.KEEP,g.KEEP,g.REPLACE)},fn.prototype.stencilModeForClipping=function(_){var g=this.context.gl;return new me({func:g.EQUAL,mask:255},this._tileClippingMaskIDs[_.key],0,g.KEEP,g.KEEP,g.REPLACE)},fn.prototype.stencilConfigForOverlap=function(_){var g,p=this.context.gl,b=_.sort(function(Z,Y){return Y.overscaledZ-Z.overscaledZ}),C=b[b.length-1].overscaledZ,E=b[0].overscaledZ-C+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();for(var L={},O=0;O<E;O++)L[O+C]=new me({func:p.GEQUAL,mask:255},O+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=E,[L,b]}return[(g={},g[C]=me.disabled,g),b]},fn.prototype.colorModeForRenderPass=function(){var _=this.context.gl;return this._showOverdrawInspector?new Le([_.CONSTANT_COLOR,_.ONE],new r.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Le.unblended:Le.alphaBlended},fn.prototype.depthModeForSublayer=function(_,g,p){if(!this.opaquePassEnabledForLayer())return le.disabled;var b=1-((1+this.currentLayer)*this.numSublayers+_)*this.depthEpsilon;return new le(p||this.context.gl.LEQUAL,g,[b,b])},fn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},fn.prototype.render=function(_,g){var p=this;this.style=_,this.options=g,this.lineAtlas=_.lineAtlas,this.imageManager=_.imageManager,this.glyphManager=_.glyphManager,this.symbolFadeChange=_.placement.symbolFadeChange(r.browser.now()),this.imageManager.beginFrame();var b=this.style._order,C=this.style.sourceCaches;for(var E in C){var L=C[E];L.used&&L.prepare(this.context)}var O,Z,Y={},re={},oe={};for(var ue in C){var ve=C[ue];Y[ue]=ve.getVisibleCoordinates(),re[ue]=Y[ue].slice().reverse(),oe[ue]=ve.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var be=0;be<b.length;be++)if(this.style._layers[b[be]].is3D()){this.opaquePassCutoff=be;break}this.renderPass="offscreen";for(var Me=0,pe=b;Me<pe.length;Me+=1){var Ee=this.style._layers[pe[Me]];if(Ee.hasOffscreenPass()&&!Ee.isHidden(this.transform.zoom)){var We=re[Ee.source];(Ee.type==="custom"||We.length)&&this.renderLayer(this,C[Ee.source],Ee,We)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:g.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=g.showOverdrawInspector,this.depthRangeFor3D=[0,1-(_._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){var Ve=this.style._layers[b[this.currentLayer]],je=C[Ve.source],He=Y[Ve.source];this._renderTileClippingMasks(Ve,He),this.renderLayer(this,je,Ve,He)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){var et=this.style._layers[b[this.currentLayer]],ht=C[et.source],At=(et.type==="symbol"?oe:re)[et.source];this._renderTileClippingMasks(et,Y[et.source]),this.renderLayer(this,ht,et,At)}this.options.showTileBoundaries&&(r.values(this.style._layers).forEach(function(It){It.source&&!It.isHidden(p.transform.zoom)&&(It.source!==(Z&&Z.id)&&(Z=p.style.sourceCaches[It.source]),(!O||O.getSource().maxzoom<Z.getSource().maxzoom)&&(O=Z))}),O&&Uc.debug(this,O,O.getVisibleCoordinates())),this.options.showPadding&&function(It){var Zt=It.transform.padding;ay(It,It.transform.height-(Zt.top||0),3,ey),ay(It,Zt.bottom||0,3,Zb),iy(It,Zt.left||0,3,zb),iy(It,It.transform.width-(Zt.right||0),3,hp);var ca=It.transform.centerPoint;(function(ma,_a,fi,qt){w_(ma,_a-1,fi-10,2,20,qt),w_(ma,_a-10,fi-1,20,2,qt)})(It,ca.x,It.transform.height-ca.y,ty)}(this),this.context.setDefault()},fn.prototype.renderLayer=function(_,g,p,b){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||b.length)&&(this.id=p.id,this.gpuTimingStart(p),Uc[p.type](_,g,p,b,this.style.placement.variableOffsets),this.gpuTimingEnd())},fn.prototype.gpuTimingStart=function(_){if(this.options.gpuTiming){var g=this.context.extTimerQuery,p=this.gpuTimers[_.id];p||(p=this.gpuTimers[_.id]={calls:0,cpuTime:0,query:g.createQueryEXT()}),p.calls++,g.beginQueryEXT(g.TIME_ELAPSED_EXT,p.query)}},fn.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var _=this.context.extTimerQuery;_.endQueryEXT(_.TIME_ELAPSED_EXT)}},fn.prototype.collectGpuTimers=function(){var _=this.gpuTimers;return this.gpuTimers={},_},fn.prototype.queryGpuTimers=function(_){var g={};for(var p in _){var b=_[p],C=this.context.extTimerQuery,E=C.getQueryObjectEXT(b.query,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(b.query),g[p]=E}return g},fn.prototype.translatePosMatrix=function(_,g,p,b,C){if(!p[0]&&!p[1])return _;var E=C?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(E){var L=Math.sin(E),O=Math.cos(E);p=[p[0]*O-p[1]*L,p[0]*L+p[1]*O]}var Z=[C?p[0]:gn(g,p[0],this.transform.zoom),C?p[1]:gn(g,p[1],this.transform.zoom),0],Y=new Float32Array(16);return r.translate(Y,_,Z),Y},fn.prototype.saveTileTexture=function(_){var g=this._tileTextures[_.size[0]];g?g.push(_):this._tileTextures[_.size[0]]=[_]},fn.prototype.getTileTexture=function(_){var g=this._tileTextures[_];return g&&g.length>0?g.pop():null},fn.prototype.isPatternMissing=function(_){if(!_)return!1;if(!_.from||!_.to)return!0;var g=this.imageManager.getPattern(_.from.toString()),p=this.imageManager.getPattern(_.to.toString());return!g||!p},fn.prototype.useProgram=function(_,g){this.cache=this.cache||{};var p=""+_+(g?g.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[p]||(this.cache[p]=new Mb(this.context,_,eC[_],g,Nb[_],this._showOverdrawInspector)),this.cache[p]},fn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},fn.prototype.setBaseState=function(){var _=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(_.FUNC_ADD)},fn.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=r.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new r.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},fn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _p=function(_,g){this.points=_,this.planes=g};_p.fromInvProjectionMatrix=function(_,g,p){var b=Math.pow(2,p),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(L){return r.transformMat4([],L,_)}).map(function(L){return r.scale$1([],L,1/L[3]/g*b)}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(L){var O=r.sub([],C[L[0]],C[L[1]]),Z=r.sub([],C[L[2]],C[L[1]]),Y=r.normalize([],r.cross([],O,Z)),re=-r.dot(Y,C[L[1]]);return Y.concat(re)});return new _p(C,E)};var Hc=function(_,g){this.min=_,this.max=g,this.center=r.scale$2([],r.add([],this.min,this.max),.5)};Hc.prototype.quadrant=function(_){for(var g=[_%2==0,_<2],p=r.clone$2(this.min),b=r.clone$2(this.max),C=0;C<g.length;C++)p[C]=g[C]?this.min[C]:this.center[C],b[C]=g[C]?this.center[C]:this.max[C];return b[2]=this.max[2],new Hc(p,b)},Hc.prototype.distanceX=function(_){return Math.max(Math.min(this.max[0],_[0]),this.min[0])-_[0]},Hc.prototype.distanceY=function(_){return Math.max(Math.min(this.max[1],_[1]),this.min[1])-_[1]},Hc.prototype.intersects=function(_){for(var g=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],p=!0,b=0;b<_.planes.length;b++){for(var C=_.planes[b],E=0,L=0;L<g.length;L++)E+=r.dot$1(C,g[L])>=0;if(E===0)return 0;E!==g.length&&(p=!1)}if(p)return 2;for(var O=0;O<3;O++){for(var Z=Number.MAX_VALUE,Y=-Number.MAX_VALUE,re=0;re<_.points.length;re++){var oe=_.points[re][O]-this.min[O];Z=Math.min(Z,oe),Y=Math.max(Y,oe)}if(Y<0||Z>this.max[O]-this.min[O])return 0}return 1};var Vu=function(_,g,p,b){if(_===void 0&&(_=0),g===void 0&&(g=0),p===void 0&&(p=0),b===void 0&&(b=0),isNaN(_)||_<0||isNaN(g)||g<0||isNaN(p)||p<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=_,this.bottom=g,this.left=p,this.right=b};Vu.prototype.interpolate=function(_,g,p){return g.top!=null&&_.top!=null&&(this.top=r.number(_.top,g.top,p)),g.bottom!=null&&_.bottom!=null&&(this.bottom=r.number(_.bottom,g.bottom,p)),g.left!=null&&_.left!=null&&(this.left=r.number(_.left,g.left,p)),g.right!=null&&_.right!=null&&(this.right=r.number(_.right,g.right,p)),this},Vu.prototype.getCenter=function(_,g){var p=r.clamp((this.left+_-this.right)/2,0,_),b=r.clamp((this.top+g-this.bottom)/2,0,g);return new r.Point(p,b)},Vu.prototype.equals=function(_){return this.top===_.top&&this.bottom===_.bottom&&this.left===_.left&&this.right===_.right},Vu.prototype.clone=function(){return new Vu(this.top,this.bottom,this.left,this.right)},Vu.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var hi=function(_,g,p,b,C){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=C===void 0||C,this._minZoom=_||0,this._maxZoom=g||22,this._minPitch=p??0,this._maxPitch=b??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Vu,this._posMatrixCache={},this._alignedPosMatrixCache={}},en={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};hi.prototype.clone=function(){var _=new hi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return _.tileSize=this.tileSize,_.latRange=this.latRange,_.width=this.width,_.height=this.height,_._center=this._center,_.zoom=this.zoom,_.angle=this.angle,_._fov=this._fov,_._pitch=this._pitch,_._unmodified=this._unmodified,_._edgeInsets=this._edgeInsets.clone(),_._calcMatrices(),_},en.minZoom.get=function(){return this._minZoom},en.minZoom.set=function(_){this._minZoom!==_&&(this._minZoom=_,this.zoom=Math.max(this.zoom,_))},en.maxZoom.get=function(){return this._maxZoom},en.maxZoom.set=function(_){this._maxZoom!==_&&(this._maxZoom=_,this.zoom=Math.min(this.zoom,_))},en.minPitch.get=function(){return this._minPitch},en.minPitch.set=function(_){this._minPitch!==_&&(this._minPitch=_,this.pitch=Math.max(this.pitch,_))},en.maxPitch.get=function(){return this._maxPitch},en.maxPitch.set=function(_){this._maxPitch!==_&&(this._maxPitch=_,this.pitch=Math.min(this.pitch,_))},en.renderWorldCopies.get=function(){return this._renderWorldCopies},en.renderWorldCopies.set=function(_){_===void 0?_=!0:_===null&&(_=!1),this._renderWorldCopies=_},en.worldSize.get=function(){return this.tileSize*this.scale},en.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},en.size.get=function(){return new r.Point(this.width,this.height)},en.bearing.get=function(){return-this.angle/Math.PI*180},en.bearing.set=function(_){var g=-r.wrap(_,-180,180)*Math.PI/180;this.angle!==g&&(this._unmodified=!1,this.angle=g,this._calcMatrices(),this.rotationMatrix=r.create$2(),r.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},en.pitch.get=function(){return this._pitch/Math.PI*180},en.pitch.set=function(_){var g=r.clamp(_,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==g&&(this._unmodified=!1,this._pitch=g,this._calcMatrices())},en.fov.get=function(){return this._fov/Math.PI*180},en.fov.set=function(_){_=Math.max(.01,Math.min(60,_)),this._fov!==_&&(this._unmodified=!1,this._fov=_/180*Math.PI,this._calcMatrices())},en.zoom.get=function(){return this._zoom},en.zoom.set=function(_){var g=Math.min(Math.max(_,this.minZoom),this.maxZoom);this._zoom!==g&&(this._unmodified=!1,this._zoom=g,this.scale=this.zoomScale(g),this.tileZoom=Math.floor(g),this.zoomFraction=g-this.tileZoom,this._constrain(),this._calcMatrices())},en.center.get=function(){return this._center},en.center.set=function(_){_.lat===this._center.lat&&_.lng===this._center.lng||(this._unmodified=!1,this._center=_,this._constrain(),this._calcMatrices())},en.padding.get=function(){return this._edgeInsets.toJSON()},en.padding.set=function(_){this._edgeInsets.equals(_)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,_,1),this._calcMatrices())},en.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},hi.prototype.isPaddingEqual=function(_){return this._edgeInsets.equals(_)},hi.prototype.interpolatePadding=function(_,g,p){this._unmodified=!1,this._edgeInsets.interpolate(_,g,p),this._constrain(),this._calcMatrices()},hi.prototype.coveringZoomLevel=function(_){var g=(_.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/_.tileSize));return Math.max(0,g)},hi.prototype.getVisibleUnwrappedCoordinates=function(_){var g=[new r.UnwrappedTileID(0,_)];if(this._renderWorldCopies)for(var p=this.pointCoordinate(new r.Point(0,0)),b=this.pointCoordinate(new r.Point(this.width,0)),C=this.pointCoordinate(new r.Point(this.width,this.height)),E=this.pointCoordinate(new r.Point(0,this.height)),L=Math.floor(Math.min(p.x,b.x,C.x,E.x)),O=Math.floor(Math.max(p.x,b.x,C.x,E.x)),Z=L-1;Z<=O+1;Z++)Z!==0&&g.push(new r.UnwrappedTileID(Z,_));return g},hi.prototype.coveringTiles=function(_){var g=this.coveringZoomLevel(_),p=g;if(_.minzoom!==void 0&&g<_.minzoom)return[];_.maxzoom!==void 0&&g>_.maxzoom&&(g=_.maxzoom);var b=r.MercatorCoordinate.fromLngLat(this.center),C=Math.pow(2,g),E=[C*b.x,C*b.y,0],L=_p.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g),O=_.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(O=g);var Z=function(It){return{aabb:new Hc([It*C,0,0],[(It+1)*C,C,0]),zoom:0,x:0,y:0,wrap:It,fullyVisible:!1}},Y=[],re=[],oe=g,ue=_.reparseOverscaled?p:g;if(this._renderWorldCopies)for(var ve=1;ve<=3;ve++)Y.push(Z(-ve)),Y.push(Z(ve));for(Y.push(Z(0));Y.length>0;){var be=Y.pop(),Me=be.x,pe=be.y,Ee=be.fullyVisible;if(!Ee){var We=be.aabb.intersects(L);if(We===0)continue;Ee=We===2}var Ve=be.aabb.distanceX(E),je=be.aabb.distanceY(E),He=Math.max(Math.abs(Ve),Math.abs(je));if(be.zoom===oe||He>3+(1<<oe-be.zoom)-2&&be.zoom>=O)re.push({tileID:new r.OverscaledTileID(be.zoom===oe?ue:be.zoom,be.wrap,be.zoom,Me,pe),distanceSq:r.sqrLen([E[0]-.5-Me,E[1]-.5-pe])});else for(var et=0;et<4;et++){var ht=(Me<<1)+et%2,At=(pe<<1)+(et>>1);Y.push({aabb:be.aabb.quadrant(et),zoom:be.zoom+1,x:ht,y:At,wrap:be.wrap,fullyVisible:Ee})}}return re.sort(function(It,Zt){return It.distanceSq-Zt.distanceSq}).map(function(It){return It.tileID})},hi.prototype.resize=function(_,g){this.width=_,this.height=g,this.pixelsToGLUnits=[2/_,-2/g],this._constrain(),this._calcMatrices()},en.unmodified.get=function(){return this._unmodified},hi.prototype.zoomScale=function(_){return Math.pow(2,_)},hi.prototype.scaleZoom=function(_){return Math.log(_)/Math.LN2},hi.prototype.project=function(_){var g=r.clamp(_.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.Point(r.mercatorXfromLng(_.lng)*this.worldSize,r.mercatorYfromLat(g)*this.worldSize)},hi.prototype.unproject=function(_){return new r.MercatorCoordinate(_.x/this.worldSize,_.y/this.worldSize).toLngLat()},en.point.get=function(){return this.project(this.center)},hi.prototype.setLocationAtPoint=function(_,g){var p=this.pointCoordinate(g),b=this.pointCoordinate(this.centerPoint),C=this.locationCoordinate(_),E=new r.MercatorCoordinate(C.x-(p.x-b.x),C.y-(p.y-b.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())},hi.prototype.locationPoint=function(_){return this.coordinatePoint(this.locationCoordinate(_))},hi.prototype.pointLocation=function(_){return this.coordinateLocation(this.pointCoordinate(_))},hi.prototype.locationCoordinate=function(_){return r.MercatorCoordinate.fromLngLat(_)},hi.prototype.coordinateLocation=function(_){return _.toLngLat()},hi.prototype.pointCoordinate=function(_){var g=[_.x,_.y,0,1],p=[_.x,_.y,1,1];r.transformMat4(g,g,this.pixelMatrixInverse),r.transformMat4(p,p,this.pixelMatrixInverse);var b=g[3],C=p[3],E=g[1]/b,L=p[1]/C,O=g[2]/b,Z=p[2]/C,Y=O===Z?0:(0-O)/(Z-O);return new r.MercatorCoordinate(r.number(g[0]/b,p[0]/C,Y)/this.worldSize,r.number(E,L,Y)/this.worldSize)},hi.prototype.coordinatePoint=function(_){var g=[_.x*this.worldSize,_.y*this.worldSize,0,1];return r.transformMat4(g,g,this.pixelMatrix),new r.Point(g[0]/g[3],g[1]/g[3])},hi.prototype.getBounds=function(){return new r.LngLatBounds().extend(this.pointLocation(new r.Point(0,0))).extend(this.pointLocation(new r.Point(this.width,0))).extend(this.pointLocation(new r.Point(this.width,this.height))).extend(this.pointLocation(new r.Point(0,this.height)))},hi.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},hi.prototype.setMaxBounds=function(_){_?(this.lngRange=[_.getWest(),_.getEast()],this.latRange=[_.getSouth(),_.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},hi.prototype.calculatePosMatrix=function(_,g){g===void 0&&(g=!1);var p=_.key,b=g?this._alignedPosMatrixCache:this._posMatrixCache;if(b[p])return b[p];var C=_.canonical,E=this.worldSize/this.zoomScale(C.z),L=C.x+Math.pow(2,C.z)*_.wrap,O=r.identity(new Float64Array(16));return r.translate(O,O,[L*E,C.y*E,0]),r.scale(O,O,[E/r.EXTENT,E/r.EXTENT,1]),r.multiply(O,g?this.alignedProjMatrix:this.projMatrix,O),b[p]=new Float32Array(O),b[p]},hi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},hi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var _,g,p,b,C=-90,E=90,L=-180,O=180,Z=this.size,Y=this._unmodified;if(this.latRange){var re=this.latRange;C=r.mercatorYfromLat(re[1])*this.worldSize,_=(E=r.mercatorYfromLat(re[0])*this.worldSize)-C<Z.y?Z.y/(E-C):0}if(this.lngRange){var oe=this.lngRange;L=r.mercatorXfromLng(oe[0])*this.worldSize,g=(O=r.mercatorXfromLng(oe[1])*this.worldSize)-L<Z.x?Z.x/(O-L):0}var ue=this.point,ve=Math.max(g||0,_||0);if(ve)return this.center=this.unproject(new r.Point(g?(O+L)/2:ue.x,_?(E+C)/2:ue.y)),this.zoom+=this.scaleZoom(ve),this._unmodified=Y,void(this._constraining=!1);if(this.latRange){var be=ue.y,Me=Z.y/2;be-Me<C&&(b=C+Me),be+Me>E&&(b=E-Me)}if(this.lngRange){var pe=ue.x,Ee=Z.x/2;pe-Ee<L&&(p=L+Ee),pe+Ee>O&&(p=O-Ee)}p===void 0&&b===void 0||(this.center=this.unproject(new r.Point(p!==void 0?p:ue.x,b!==void 0?b:ue.y))),this._unmodified=Y,this._constraining=!1}},hi.prototype._calcMatrices=function(){if(this.height){var _=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var g=Math.PI/2+this._pitch,p=this._fov*(.5+_.y/this.height),b=Math.sin(p)*this.cameraToCenterDistance/Math.sin(r.clamp(Math.PI-g-p,.01,Math.PI-.01)),C=this.point,E=C.x,L=C.y,O=1.01*(Math.cos(Math.PI/2-this._pitch)*b+this.cameraToCenterDistance),Z=this.height/50,Y=new Float64Array(16);r.perspective(Y,this._fov,this.width/this.height,Z,O),Y[8]=2*-_.x/this.width,Y[9]=2*_.y/this.height,r.scale(Y,Y,[1,-1,1]),r.translate(Y,Y,[0,0,-this.cameraToCenterDistance]),r.rotateX(Y,Y,this._pitch),r.rotateZ(Y,Y,this.angle),r.translate(Y,Y,[-E,-L,0]),this.mercatorMatrix=r.scale([],Y,[this.worldSize,this.worldSize,this.worldSize]),r.scale(Y,Y,[1,1,r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Y,this.invProjMatrix=r.invert([],this.projMatrix);var re=this.width%2/2,oe=this.height%2/2,ue=Math.cos(this.angle),ve=Math.sin(this.angle),be=E-Math.round(E)+ue*re+ve*oe,Me=L-Math.round(L)+ue*oe+ve*re,pe=new Float64Array(Y);if(r.translate(pe,pe,[be>.5?be-1:be,Me>.5?Me-1:Me,0]),this.alignedProjMatrix=pe,Y=r.create(),r.scale(Y,Y,[this.width/2,-this.height/2,1]),r.translate(Y,Y,[1,-1,0]),this.labelPlaneMatrix=Y,Y=r.create(),r.scale(Y,Y,[1,-1,1]),r.translate(Y,Y,[-1,-1,0]),r.scale(Y,Y,[2/this.width,2/this.height,1]),this.glCoordMatrix=Y,this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Y=r.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Y,this._posMatrixCache={},this._alignedPosMatrixCache={}}},hi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var _=this.pointCoordinate(new r.Point(0,0)),g=[_.x*this.worldSize,_.y*this.worldSize,0,1];return r.transformMat4(g,g,this.pixelMatrix)[3]/this.cameraToCenterDistance},hi.prototype.getCameraPoint=function(){var _=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.Point(0,_))},hi.prototype.getCameraQueryGeometry=function(_){var g=this.getCameraPoint();if(_.length===1)return[_[0],g];for(var p=g.x,b=g.y,C=g.x,E=g.y,L=0,O=_;L<O.length;L+=1){var Z=O[L];p=Math.min(p,Z.x),b=Math.min(b,Z.y),C=Math.max(C,Z.x),E=Math.max(E,Z.y)}return[new r.Point(p,b),new r.Point(C,b),new r.Point(C,E),new r.Point(p,E),new r.Point(p,b)]},Object.defineProperties(hi.prototype,en);var no=function(_){var g,p,b,C;this._hashName=_&&encodeURIComponent(_),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(g=this._updateHashUnthrottled.bind(this),p=!1,b=null,C=function(){b=null,p&&(g(),b=setTimeout(C,300),p=!1)},function(){return p=!0,b||C(),b})};no.prototype.addTo=function(_){return this._map=_,r.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},no.prototype.remove=function(){return r.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},no.prototype.getHashString=function(_){var g=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,b=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,b),E=Math.round(g.lng*C)/C,L=Math.round(g.lat*C)/C,O=this._map.getBearing(),Z=this._map.getPitch(),Y="";if(Y+=_?"/"+E+"/"+L+"/"+p:p+"/"+L+"/"+E,(O||Z)&&(Y+="/"+Math.round(10*O)/10),Z&&(Y+="/"+Math.round(Z)),this._hashName){var re=this._hashName,oe=!1,ue=r.window.location.hash.slice(1).split("&").map(function(ve){var be=ve.split("=")[0];return be===re?(oe=!0,be+"="+Y):ve}).filter(function(ve){return ve});return oe||ue.push(re+"="+Y),"#"+ue.join("&")}return"#"+Y},no.prototype._getCurrentHash=function(){var _,g=this,p=r.window.location.hash.replace("#","");return this._hashName?(p.split("&").map(function(b){return b.split("=")}).forEach(function(b){b[0]===g._hashName&&(_=b)}),(_&&_[1]||"").split("/")):p.split("/")},no.prototype._onHashChange=function(){var _=this._getCurrentHash();if(_.length>=3&&!_.some(function(p){return isNaN(p)})){var g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(_[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+_[2],+_[1]],zoom:+_[0],bearing:g,pitch:+(_[4]||0)}),!0}return!1},no.prototype._updateHashUnthrottled=function(){var _=r.window.location.href.replace(/(#.+)?$/,this.getHashString());try{r.window.history.replaceState(r.window.history.state,null,_)}catch{}};var I_={linearity:.3,easing:r.bezier(0,0,.3,1)},ah=r.extend({deceleration:2500,maxSpeed:1400},I_),C_=r.extend({deceleration:20,maxSpeed:1400},I_),nC=r.extend({deceleration:1e3,maxSpeed:360},I_),rC=r.extend({deceleration:1e3,maxSpeed:90},I_),S_=function(_){this._map=_,this.clear()};function A_(_,g){(!_.duration||_.duration<g.duration)&&(_.duration=g.duration,_.easing=g.easing)}function Jl(_,g,p){var b=p.maxSpeed,C=p.linearity,E=p.deceleration,L=r.clamp(_*C/(g/1e3),-b,b),O=Math.abs(L)/(E*C);return{easing:p.easing,duration:1e3*O,amount:L*(O/2)}}S_.prototype.clear=function(){this._inertiaBuffer=[]},S_.prototype.record=function(_){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.browser.now(),settings:_})},S_.prototype._drainInertiaBuffer=function(){for(var _=this._inertiaBuffer,g=r.browser.now();_.length>0&&g-_[0].time>160;)_.shift()},S_.prototype._onMoveEnd=function(_){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var g={zoom:0,bearing:0,pitch:0,pan:new r.Point(0,0),pinchAround:void 0,around:void 0},p=0,b=this._inertiaBuffer;p<b.length;p+=1){var C=b[p].settings;g.zoom+=C.zoomDelta||0,g.bearing+=C.bearingDelta||0,g.pitch+=C.pitchDelta||0,C.panDelta&&g.pan._add(C.panDelta),C.around&&(g.around=C.around),C.pinchAround&&(g.pinchAround=C.pinchAround)}var E=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,L={};if(g.pan.mag()){var O=Jl(g.pan.mag(),E,r.extend({},ah,_||{}));L.offset=g.pan.mult(O.amount/g.pan.mag()),L.center=this._map.transform.center,A_(L,O)}if(g.zoom){var Z=Jl(g.zoom,E,C_);L.zoom=this._map.transform.zoom+Z.amount,A_(L,Z)}if(g.bearing){var Y=Jl(g.bearing,E,nC);L.bearing=this._map.transform.bearing+r.clamp(Y.amount,-179,179),A_(L,Y)}if(g.pitch){var re=Jl(g.pitch,E,rC);L.pitch=this._map.transform.pitch+re.amount,A_(L,re)}if(L.zoom||L.bearing){var oe=g.pinchAround===void 0?g.around:g.pinchAround;L.around=oe?this._map.unproject(oe):this._map.getCenter()}return this.clear(),r.extend(L,{noMoveStart:!0})}};var tr=function(_){function g(b,C,E,L){L===void 0&&(L={});var O=u.mousePos(C.getCanvasContainer(),E),Z=C.unproject(O);_.call(this,b,r.extend({point:O,lngLat:Z,originalEvent:E},L)),this._defaultPrevented=!1,this.target=C}_&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g;var p={defaultPrevented:{configurable:!0}};return g.prototype.preventDefault=function(){this._defaultPrevented=!0},p.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(g.prototype,p),g}(r.Event),T_=function(_){function g(b,C,E){var L=b==="touchend"?E.changedTouches:E.touches,O=u.touchPos(C.getCanvasContainer(),L),Z=O.map(function(oe){return C.unproject(oe)}),Y=O.reduce(function(oe,ue,ve,be){return oe.add(ue.div(be.length))},new r.Point(0,0)),re=C.unproject(Y);_.call(this,b,{points:O,point:Y,lngLats:Z,lngLat:re,originalEvent:E}),this._defaultPrevented=!1}_&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g;var p={defaultPrevented:{configurable:!0}};return g.prototype.preventDefault=function(){this._defaultPrevented=!0},p.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(g.prototype,p),g}(r.Event),Hb=function(_){function g(b,C,E){_.call(this,b,{originalEvent:E}),this._defaultPrevented=!1}_&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g;var p={defaultPrevented:{configurable:!0}};return g.prototype.preventDefault=function(){this._defaultPrevented=!0},p.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(g.prototype,p),g}(r.Event),Kn=function(_,g){this._map=_,this._clickTolerance=g.clickTolerance};Kn.prototype.reset=function(){delete this._mousedownPos},Kn.prototype.wheel=function(_){return this._firePreventable(new Hb(_.type,this._map,_))},Kn.prototype.mousedown=function(_,g){return this._mousedownPos=g,this._firePreventable(new tr(_.type,this._map,_))},Kn.prototype.mouseup=function(_){this._map.fire(new tr(_.type,this._map,_))},Kn.prototype.click=function(_,g){this._mousedownPos&&this._mousedownPos.dist(g)>=this._clickTolerance||this._map.fire(new tr(_.type,this._map,_))},Kn.prototype.dblclick=function(_){return this._firePreventable(new tr(_.type,this._map,_))},Kn.prototype.mouseover=function(_){this._map.fire(new tr(_.type,this._map,_))},Kn.prototype.mouseout=function(_){this._map.fire(new tr(_.type,this._map,_))},Kn.prototype.touchstart=function(_){return this._firePreventable(new T_(_.type,this._map,_))},Kn.prototype.touchmove=function(_){this._map.fire(new T_(_.type,this._map,_))},Kn.prototype.touchend=function(_){this._map.fire(new T_(_.type,this._map,_))},Kn.prototype.touchcancel=function(_){this._map.fire(new T_(_.type,this._map,_))},Kn.prototype._firePreventable=function(_){if(this._map.fire(_),_.defaultPrevented)return{}},Kn.prototype.isEnabled=function(){return!0},Kn.prototype.isActive=function(){return!1},Kn.prototype.enable=function(){},Kn.prototype.disable=function(){};var Yt=function(_){this._map=_};Yt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Yt.prototype.mousemove=function(_){this._map.fire(new tr(_.type,this._map,_))},Yt.prototype.mousedown=function(){this._delayContextMenu=!0},Yt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new tr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Yt.prototype.contextmenu=function(_){this._delayContextMenu?this._contextMenuEvent=_:this._map.fire(new tr(_.type,this._map,_)),this._map.listens("contextmenu")&&_.preventDefault()},Yt.prototype.isEnabled=function(){return!0},Yt.prototype.isActive=function(){return!1},Yt.prototype.enable=function(){},Yt.prototype.disable=function(){};var ks=function(_,g){this._map=_,this._el=_.getCanvasContainer(),this._container=_.getContainer(),this._clickTolerance=g.clickTolerance||1};function mp(_,g){for(var p={},b=0;b<_.length;b++)p[_[b].identifier]=g[b];return p}ks.prototype.isEnabled=function(){return!!this._enabled},ks.prototype.isActive=function(){return!!this._active},ks.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ks.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ks.prototype.mousedown=function(_,g){this.isEnabled()&&_.shiftKey&&_.button===0&&(u.disableDrag(),this._startPos=this._lastPos=g,this._active=!0)},ks.prototype.mousemoveWindow=function(_,g){if(this._active){var p=g;if(!(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)){var b=this._startPos;this._lastPos=p,this._box||(this._box=u.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",_));var C=Math.min(b.x,p.x),E=Math.max(b.x,p.x),L=Math.min(b.y,p.y),O=Math.max(b.y,p.y);u.setTransform(this._box,"translate("+C+"px,"+L+"px)"),this._box.style.width=E-C+"px",this._box.style.height=O-L+"px"}}},ks.prototype.mouseupWindow=function(_,g){var p=this;if(this._active&&_.button===0){var b=this._startPos,C=g;if(this.reset(),u.suppressClick(),b.x!==C.x||b.y!==C.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:_})),{cameraAnimation:function(E){return E.fitScreenCoordinates(b,C,p._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",_)}},ks.prototype.keydown=function(_){this._active&&_.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",_))},ks.prototype.blur=function(){this.reset()},ks.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(u.remove(this._box),this._box=null),u.enableDrag(),delete this._startPos,delete this._lastPos},ks.prototype._fireEvent=function(_,g){return this._map.fire(new r.Event(_,{originalEvent:g}))};var ih=function(_){this.reset(),this.numTouches=_.numTouches};ih.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ih.prototype.touchstart=function(_,g,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=_.timeStamp),p.length===this.numTouches&&(this.centroid=function(b){for(var C=new r.Point(0,0),E=0,L=b;E<L.length;E+=1)C._add(L[E]);return C.div(b.length)}(g),this.touches=mp(p,g)))},ih.prototype.touchmove=function(_,g,p){if(!this.aborted&&this.centroid){var b=mp(p,g);for(var C in this.touches){var E=b[C];(!E||E.dist(this.touches[C])>30)&&(this.aborted=!0)}}},ih.prototype.touchend=function(_,g,p){if((!this.centroid||_.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){var b=!this.aborted&&this.centroid;if(this.reset(),b)return b}};var rl=function(_){this.singleTap=new ih(_),this.numTaps=_.numTaps,this.reset()};rl.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},rl.prototype.touchstart=function(_,g,p){this.singleTap.touchstart(_,g,p)},rl.prototype.touchmove=function(_,g,p){this.singleTap.touchmove(_,g,p)},rl.prototype.touchend=function(_,g,p){var b=this.singleTap.touchend(_,g,p);if(b){var C=_.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(b)<30;if(C&&E||this.reset(),this.count++,this.lastTime=_.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}};var Ws=function(){this._zoomIn=new rl({numTouches:1,numTaps:2}),this._zoomOut=new rl({numTouches:2,numTaps:1}),this.reset()};Ws.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ws.prototype.touchstart=function(_,g,p){this._zoomIn.touchstart(_,g,p),this._zoomOut.touchstart(_,g,p)},Ws.prototype.touchmove=function(_,g,p){this._zoomIn.touchmove(_,g,p),this._zoomOut.touchmove(_,g,p)},Ws.prototype.touchend=function(_,g,p){var b=this,C=this._zoomIn.touchend(_,g,p),E=this._zoomOut.touchend(_,g,p);return C?(this._active=!0,_.preventDefault(),setTimeout(function(){return b.reset()},0),{cameraAnimation:function(L){return L.easeTo({duration:300,zoom:L.getZoom()+1,around:L.unproject(C)},{originalEvent:_})}}):E?(this._active=!0,_.preventDefault(),setTimeout(function(){return b.reset()},0),{cameraAnimation:function(L){return L.easeTo({duration:300,zoom:L.getZoom()-1,around:L.unproject(E)},{originalEvent:_})}}):void 0},Ws.prototype.touchcancel=function(){this.reset()},Ws.prototype.enable=function(){this._enabled=!0},Ws.prototype.disable=function(){this._enabled=!1,this.reset()},Ws.prototype.isEnabled=function(){return this._enabled},Ws.prototype.isActive=function(){return this._active};var ny={0:1,2:2},Pt=function(_){this.reset(),this._clickTolerance=_.clickTolerance||1};Pt.prototype.blur=function(){this.reset()},Pt.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Pt.prototype._correctButton=function(_,g){return!1},Pt.prototype._move=function(_,g){return{}},Pt.prototype.mousedown=function(_,g){if(!this._lastPoint){var p=u.mouseButton(_);this._correctButton(_,p)&&(this._lastPoint=g,this._eventButton=p)}},Pt.prototype.mousemoveWindow=function(_,g){var p=this._lastPoint;if(p){if(_.preventDefault(),function(b,C){var E=ny[C];return b.buttons===void 0||(b.buttons&E)!==E}(_,this._eventButton))this.reset();else if(this._moved||!(g.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=g,this._move(p,g)}},Pt.prototype.mouseupWindow=function(_){this._lastPoint&&u.mouseButton(_)===this._eventButton&&(this._moved&&u.suppressClick(),this.reset())},Pt.prototype.enable=function(){this._enabled=!0},Pt.prototype.disable=function(){this._enabled=!1,this.reset()},Pt.prototype.isEnabled=function(){return this._enabled},Pt.prototype.isActive=function(){return this._active};var ry=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.mousedown=function(p,b){_.prototype.mousedown.call(this,p,b),this._lastPoint&&(this._active=!0)},g.prototype._correctButton=function(p,b){return b===0&&!p.ctrlKey},g.prototype._move=function(p,b){return{around:b,panDelta:b.sub(p)}},g}(Pt),pp=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype._correctButton=function(p,b){return b===0&&p.ctrlKey||b===2},g.prototype._move=function(p,b){var C=.8*(b.x-p.x);if(C)return this._active=!0,{bearingDelta:C}},g.prototype.contextmenu=function(p){p.preventDefault()},g}(Pt),sy=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype._correctButton=function(p,b){return b===0&&p.ctrlKey||b===2},g.prototype._move=function(p,b){var C=-.5*(b.y-p.y);if(C)return this._active=!0,{pitchDelta:C}},g.prototype.contextmenu=function(p){p.preventDefault()},g}(Pt),Mo=function(_){this._minTouches=1,this._clickTolerance=_.clickTolerance||1,this.reset()};Mo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new r.Point(0,0)},Mo.prototype.touchstart=function(_,g,p){return this._calculateTransform(_,g,p)},Mo.prototype.touchmove=function(_,g,p){if(this._active&&!(p.length<this._minTouches))return _.preventDefault(),this._calculateTransform(_,g,p)},Mo.prototype.touchend=function(_,g,p){this._calculateTransform(_,g,p),this._active&&p.length<this._minTouches&&this.reset()},Mo.prototype.touchcancel=function(){this.reset()},Mo.prototype._calculateTransform=function(_,g,p){p.length>0&&(this._active=!0);var b=mp(p,g),C=new r.Point(0,0),E=new r.Point(0,0),L=0;for(var O in b){var Z=b[O],Y=this._touches[O];Y&&(C._add(Z),E._add(Z.sub(Y)),L++,b[O]=Z)}if(this._touches=b,!(L<this._minTouches)&&E.mag()){var re=E.div(L);if(this._sum._add(re),!(this._sum.mag()<this._clickTolerance))return{around:C.div(L),panDelta:re}}},Mo.prototype.enable=function(){this._enabled=!0},Mo.prototype.disable=function(){this._enabled=!1,this.reset()},Mo.prototype.isEnabled=function(){return this._enabled},Mo.prototype.isActive=function(){return this._active};var Gs=function(){this.reset()};function gp(_,g,p){for(var b=0;b<_.length;b++)if(_[b].identifier===p)return g[b]}function fp(_,g){return Math.log(_/g)/Math.LN2}Gs.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Gs.prototype._start=function(_){},Gs.prototype._move=function(_,g,p){return{}},Gs.prototype.touchstart=function(_,g,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([g[0],g[1]]))},Gs.prototype.touchmove=function(_,g,p){if(this._firstTwoTouches){_.preventDefault();var b=this._firstTwoTouches,C=b[1],E=gp(p,g,b[0]),L=gp(p,g,C);if(E&&L){var O=this._aroundCenter?null:E.add(L).div(2);return this._move([E,L],O,_)}}},Gs.prototype.touchend=function(_,g,p){if(this._firstTwoTouches){var b=this._firstTwoTouches,C=b[1],E=gp(p,g,b[0]),L=gp(p,g,C);E&&L||(this._active&&u.suppressClick(),this.reset())}},Gs.prototype.touchcancel=function(){this.reset()},Gs.prototype.enable=function(_){this._enabled=!0,this._aroundCenter=!!_&&_.around==="center"},Gs.prototype.disable=function(){this._enabled=!1,this.reset()},Gs.prototype.isEnabled=function(){return this._enabled},Gs.prototype.isActive=function(){return this._active};var Os=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.reset=function(){_.prototype.reset.call(this),delete this._distance,delete this._startDistance},g.prototype._start=function(p){this._startDistance=this._distance=p[0].dist(p[1])},g.prototype._move=function(p,b){var C=this._distance;if(this._distance=p[0].dist(p[1]),this._active||!(Math.abs(fp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:fp(this._distance,C),pinchAround:b}},g}(Gs);function Ql(_,g){return 180*_.angleWith(g)/Math.PI}var Xb=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.reset=function(){_.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},g.prototype._start=function(p){this._startVector=this._vector=p[0].sub(p[1]),this._minDiameter=p[0].dist(p[1])},g.prototype._move=function(p,b){var C=this._vector;if(this._vector=p[0].sub(p[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ql(this._vector,C),pinchAround:b}},g.prototype._isBelowThreshold=function(p){this._minDiameter=Math.min(this._minDiameter,p.mag());var b=25/(Math.PI*this._minDiameter)*360,C=Ql(p,this._startVector);return Math.abs(C)<b},g}(Gs);function E_(_){return Math.abs(_.y)>Math.abs(_.x)}var oy=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.reset=function(){_.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},g.prototype._start=function(p){this._lastPoints=p,E_(p[0].sub(p[1]))&&(this._valid=!1)},g.prototype._move=function(p,b,C){var E=p[0].sub(this._lastPoints[0]),L=p[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(E,L,C.timeStamp),this._valid)return this._lastPoints=p,this._active=!0,{pitchDelta:(E.y+L.y)/2*-.5}},g.prototype.gestureBeginsVertically=function(p,b,C){if(this._valid!==void 0)return this._valid;var E=p.mag()>=2,L=b.mag()>=2;if(E||L){if(!E||!L)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;var O=p.y>0==b.y>0;return E_(p)&&E_(b)&&O}},g}(Gs),ly={panStep:100,bearingStep:15,pitchStep:10},sl=function(){var _=ly;this._panStep=_.panStep,this._bearingStep=_.bearingStep,this._pitchStep=_.pitchStep,this._rotationDisabled=!1};function ro(_){return _*(2-_)}sl.prototype.blur=function(){this.reset()},sl.prototype.reset=function(){this._active=!1},sl.prototype.keydown=function(_){var g=this;if(!(_.altKey||_.ctrlKey||_.metaKey)){var p=0,b=0,C=0,E=0,L=0;switch(_.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:_.shiftKey?b=-1:(_.preventDefault(),E=-1);break;case 39:_.shiftKey?b=1:(_.preventDefault(),E=1);break;case 38:_.shiftKey?C=1:(_.preventDefault(),L=-1);break;case 40:_.shiftKey?C=-1:(_.preventDefault(),L=1);break;default:return}return this._rotationDisabled&&(b=0,C=0),{cameraAnimation:function(O){var Z=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:ro,zoom:p?Math.round(Z)+p*(_.shiftKey?2:1):Z,bearing:O.getBearing()+b*g._bearingStep,pitch:O.getPitch()+C*g._pitchStep,offset:[-E*g._panStep,-L*g._panStep],center:O.getCenter()},{originalEvent:_})}}}},sl.prototype.enable=function(){this._enabled=!0},sl.prototype.disable=function(){this._enabled=!1,this.reset()},sl.prototype.isEnabled=function(){return this._enabled},sl.prototype.isActive=function(){return this._active},sl.prototype.disableRotation=function(){this._rotationDisabled=!0},sl.prototype.enableRotation=function(){this._rotationDisabled=!1};var ei=function(_,g){this._map=_,this._el=_.getCanvasContainer(),this._handler=g,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,r.bindAll(["_onTimeout"],this)};ei.prototype.setZoomRate=function(_){this._defaultZoomRate=_},ei.prototype.setWheelZoomRate=function(_){this._wheelZoomRate=_},ei.prototype.isEnabled=function(){return!!this._enabled},ei.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ei.prototype.isZooming=function(){return!!this._zooming},ei.prototype.enable=function(_){this.isEnabled()||(this._enabled=!0,this._aroundCenter=_&&_.around==="center")},ei.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ei.prototype.wheel=function(_){if(this.isEnabled()){var g=_.deltaMode===r.window.WheelEvent.DOM_DELTA_LINE?40*_.deltaY:_.deltaY,p=r.browser.now(),b=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,g!==0&&g%4.000244140625==0?this._type="wheel":g!==0&&Math.abs(g)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=g,this._timeout=setTimeout(this._onTimeout,40,_)):this._type||(this._type=Math.abs(b*g)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,g+=this._lastValue)),_.shiftKey&&g&&(g/=4),this._type&&(this._lastWheelEvent=_,this._delta-=g,this._active||this._start(_)),_.preventDefault()}},ei.prototype._onTimeout=function(_){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},ei.prototype._start=function(_){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var g=u.mousePos(this._el,_);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(g)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ei.prototype.renderFrame=function(){var _=this;if(this._frameId&&(this._frameId=null,this.isActive())){var g=this._map.transform;if(this._delta!==0){var p=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,b=2/(1+Math.exp(-Math.abs(this._delta*p)));this._delta<0&&b!==0&&(b=1/b);var C=typeof this._targetZoom=="number"?g.zoomScale(this._targetZoom):g.scale;this._targetZoom=Math.min(g.maxZoom,Math.max(g.minZoom,g.scaleZoom(C*b))),this._type==="wheel"&&(this._startZoom=g.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var E,L=typeof this._targetZoom=="number"?this._targetZoom:g.zoom,O=this._startZoom,Z=this._easing,Y=!1;if(this._type==="wheel"&&O&&Z){var re=Math.min((r.browser.now()-this._lastWheelEventTime)/200,1),oe=Z(re);E=r.number(O,L,oe),re<1?this._frameId||(this._frameId=!0):Y=!0}else E=L,Y=!0;return this._active=!0,Y&&(this._active=!1,this._finishTimeout=setTimeout(function(){_._zooming=!1,_._handler._triggerRenderFrame(),delete _._targetZoom,delete _._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Y,zoomDelta:E-g.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ei.prototype._smoothOutEasing=function(_){var g=r.ease;if(this._prevEase){var p=this._prevEase,b=(r.browser.now()-p.start)/p.duration,C=p.easing(b+.01)-p.easing(b),E=.27/Math.sqrt(C*C+1e-4)*.01,L=Math.sqrt(.0729-E*E);g=r.bezier(E,L,.25,1)}return this._prevEase={start:r.browser.now(),duration:_,easing:g},g},ei.prototype.blur=function(){this.reset()},ei.prototype.reset=function(){this._active=!1};var Sl=function(_,g){this._clickZoom=_,this._tapZoom=g};Sl.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Sl.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Sl.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Sl.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Lo=function(){this.reset()};Lo.prototype.reset=function(){this._active=!1},Lo.prototype.blur=function(){this.reset()},Lo.prototype.dblclick=function(_,g){return _.preventDefault(),{cameraAnimation:function(p){p.easeTo({duration:300,zoom:p.getZoom()+(_.shiftKey?-1:1),around:p.unproject(g)},{originalEvent:_})}}},Lo.prototype.enable=function(){this._enabled=!0},Lo.prototype.disable=function(){this._enabled=!1,this.reset()},Lo.prototype.isEnabled=function(){return this._enabled},Lo.prototype.isActive=function(){return this._active};var Pr=function(){this._tap=new rl({numTouches:1,numTaps:1}),this.reset()};Pr.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Pr.prototype.touchstart=function(_,g,p){this._swipePoint||(this._tapTime&&_.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=g[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(_,g,p))},Pr.prototype.touchmove=function(_,g,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;var b=g[0],C=b.y-this._swipePoint.y;return this._swipePoint=b,_.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(_,g,p)},Pr.prototype.touchend=function(_,g,p){this._tapTime?this._swipePoint&&p.length===0&&this.reset():this._tap.touchend(_,g,p)&&(this._tapTime=_.timeStamp)},Pr.prototype.touchcancel=function(){this.reset()},Pr.prototype.enable=function(){this._enabled=!0},Pr.prototype.disable=function(){this._enabled=!1,this.reset()},Pr.prototype.isEnabled=function(){return this._enabled},Pr.prototype.isActive=function(){return this._active};var Xc=function(_,g,p){this._el=_,this._mousePan=g,this._touchPan=p};Xc.prototype.enable=function(_){this._inertiaOptions=_||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Xc.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Xc.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Xc.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Zu=function(_,g,p){this._pitchWithRotate=_.pitchWithRotate,this._mouseRotate=g,this._mousePitch=p};Zu.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Zu.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Zu.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Zu.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ol=function(_,g,p,b){this._el=_,this._touchZoom=g,this._touchRotate=p,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0};ol.prototype.enable=function(_){this._touchZoom.enable(_),this._rotationDisabled||this._touchRotate.enable(_),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ol.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ol.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ol.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ol.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ol.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ns=function(_){return _.zoom||_.drag||_.pitch||_.rotate},M_=function(_){function g(){_.apply(this,arguments)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g}(r.Event);function ua(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}var Qt=function(_,g){this._map=_,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new S_(_),this._bearingSnap=g.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(g),r.bindAll(["handleEvent","handleWindowEvent"],this);var p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[r.window.document,"mousemove",{capture:!0}],[r.window.document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[r.window,"blur",void 0]];for(var b=0,C=this._listeners;b<C.length;b+=1){var E=C[b],L=E[0];u.addEventListener(L,E[1],L===r.window.document?this.handleWindowEvent:this.handleEvent,E[2])}};Qt.prototype.destroy=function(){for(var _=0,g=this._listeners;_<g.length;_+=1){var p=g[_],b=p[0];u.removeEventListener(b,p[1],b===r.window.document?this.handleWindowEvent:this.handleEvent,p[2])}},Qt.prototype._addDefaultHandlers=function(_){var g=this._map,p=g.getCanvasContainer();this._add("mapEvent",new Kn(g,_));var b=g.boxZoom=new ks(g,_);this._add("boxZoom",b);var C=new Ws,E=new Lo;g.doubleClickZoom=new Sl(E,C),this._add("tapZoom",C),this._add("clickZoom",E);var L=new Pr;this._add("tapDragZoom",L);var O=g.touchPitch=new oy;this._add("touchPitch",O);var Z=new pp(_),Y=new sy(_);g.dragRotate=new Zu(_,Z,Y),this._add("mouseRotate",Z,["mousePitch"]),this._add("mousePitch",Y,["mouseRotate"]);var re=new ry(_),oe=new Mo(_);g.dragPan=new Xc(p,re,oe),this._add("mousePan",re),this._add("touchPan",oe,["touchZoom","touchRotate"]);var ue=new Xb,ve=new Os;g.touchZoomRotate=new ol(p,ve,ue,L),this._add("touchRotate",ue,["touchPan","touchZoom"]),this._add("touchZoom",ve,["touchPan","touchRotate"]);var be=g.scrollZoom=new ei(g,this);this._add("scrollZoom",be,["mousePan"]);var Me=g.keyboard=new sl;this._add("keyboard",Me),this._add("blockableMapEvent",new Yt(g));for(var pe=0,Ee=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];pe<Ee.length;pe+=1){var We=Ee[pe];_.interactive&&_[We]&&g[We].enable(_[We])}},Qt.prototype._add=function(_,g,p){this._handlers.push({handlerName:_,handler:g,allowed:p}),this._handlersById[_]=g},Qt.prototype.stop=function(_){if(!this._updatingCamera){for(var g=0,p=this._handlers;g<p.length;g+=1)p[g].handler.reset();this._inertia.clear(),this._fireEvents({},{},_),this._changes=[]}},Qt.prototype.isActive=function(){for(var _=0,g=this._handlers;_<g.length;_+=1)if(g[_].handler.isActive())return!0;return!1},Qt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Qt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Qt.prototype.isMoving=function(){return!!ns(this._eventsInProgress)||this.isZooming()},Qt.prototype._blockedByActive=function(_,g,p){for(var b in _)if(b!==p&&(!g||g.indexOf(b)<0))return!0;return!1},Qt.prototype.handleWindowEvent=function(_){this.handleEvent(_,_.type+"Window")},Qt.prototype._getMapTouches=function(_){for(var g=[],p=0,b=_;p<b.length;p+=1){var C=b[p];this._el.contains(C.target)&&g.push(C)}return g},Qt.prototype.handleEvent=function(_,g){this._updatingCamera=!0;for(var p=_.type==="renderFrame"?void 0:_,b={needsRenderFrame:!1},C={},E={},L=_.touches?this._getMapTouches(_.touches):void 0,O=L?u.touchPos(this._el,L):u.mousePos(this._el,_),Z=0,Y=this._handlers;Z<Y.length;Z+=1){var re=Y[Z],oe=re.handlerName,ue=re.handler,ve=re.allowed;if(ue.isEnabled()){var be=void 0;this._blockedByActive(E,ve,oe)?ue.reset():ue[g||_.type]&&(be=ue[g||_.type](_,O,L),this.mergeHandlerResult(b,C,be,oe,p),be&&be.needsRenderFrame&&this._triggerRenderFrame()),(be||ue.isActive())&&(E[oe]=ue)}}var Me={};for(var pe in this._previousActiveHandlers)E[pe]||(Me[pe]=p);this._previousActiveHandlers=E,(Object.keys(Me).length||ua(b))&&(this._changes.push([b,C,Me]),this._triggerRenderFrame()),(Object.keys(E).length||ua(b))&&this._map._stop(!0),this._updatingCamera=!1;var Ee=b.cameraAnimation;Ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ee(this._map))},Qt.prototype.mergeHandlerResult=function(_,g,p,b,C){if(p){r.extend(_,p);var E={handlerName:b,originalEvent:p.originalEvent||C};p.zoomDelta!==void 0&&(g.zoom=E),p.panDelta!==void 0&&(g.drag=E),p.pitchDelta!==void 0&&(g.pitch=E),p.bearingDelta!==void 0&&(g.rotate=E)}},Qt.prototype._applyChanges=function(){for(var _={},g={},p={},b=0,C=this._changes;b<C.length;b+=1){var E=C[b],L=E[0],O=E[1],Z=E[2];L.panDelta&&(_.panDelta=(_.panDelta||new r.Point(0,0))._add(L.panDelta)),L.zoomDelta&&(_.zoomDelta=(_.zoomDelta||0)+L.zoomDelta),L.bearingDelta&&(_.bearingDelta=(_.bearingDelta||0)+L.bearingDelta),L.pitchDelta&&(_.pitchDelta=(_.pitchDelta||0)+L.pitchDelta),L.around!==void 0&&(_.around=L.around),L.pinchAround!==void 0&&(_.pinchAround=L.pinchAround),L.noInertia&&(_.noInertia=L.noInertia),r.extend(g,O),r.extend(p,Z)}this._updateMapTransform(_,g,p),this._changes=[]},Qt.prototype._updateMapTransform=function(_,g,p){var b=this._map,C=b.transform;if(!ua(_))return this._fireEvents(g,p,!0);var E=_.panDelta,L=_.zoomDelta,O=_.bearingDelta,Z=_.pitchDelta,Y=_.around,re=_.pinchAround;re!==void 0&&(Y=re),b._stop(!0),Y=Y||b.transform.centerPoint;var oe=C.pointLocation(E?Y.sub(E):Y);O&&(C.bearing+=O),Z&&(C.pitch+=Z),L&&(C.zoom+=L),C.setLocationAtPoint(oe,Y),this._map._update(),_.noInertia||this._inertia.record(_),this._fireEvents(g,p,!0)},Qt.prototype._fireEvents=function(_,g,p){var b=this,C=ns(this._eventsInProgress),E=ns(_),L={};for(var O in _)this._eventsInProgress[O]||(L[O+"start"]=_[O].originalEvent),this._eventsInProgress[O]=_[O];for(var Z in!C&&E&&this._fireEvent("movestart",E.originalEvent),L)this._fireEvent(Z,L[Z]);for(var Y in E&&this._fireEvent("move",E.originalEvent),_)this._fireEvent(Y,_[Y].originalEvent);var re,oe={};for(var ue in this._eventsInProgress){var ve=this._eventsInProgress[ue],be=ve.handlerName,Me=ve.originalEvent;this._handlersById[be].isActive()||(delete this._eventsInProgress[ue],oe[ue+"end"]=re=g[be]||Me)}for(var pe in oe)this._fireEvent(pe,oe[pe]);var Ee=ns(this._eventsInProgress);if(p&&(C||E)&&!Ee){this._updatingCamera=!0;var We=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ve=function(je){return je!==0&&-b._bearingSnap<je&&je<b._bearingSnap};We?(Ve(We.bearing||this._map.getBearing())&&(We.bearing=0),this._map.easeTo(We,{originalEvent:re})):(this._map.fire(new r.Event("moveend",{originalEvent:re})),Ve(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Qt.prototype._fireEvent=function(_,g){this._map.fire(new r.Event(_,g?{originalEvent:g}:{}))},Qt.prototype._requestFrame=function(){var _=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(g){delete _._frameId,_.handleEvent(new M_("renderFrame",{timeStamp:g})),_._applyChanges()})},Qt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var yp=function(_){function g(p,b){_.call(this),this._moving=!1,this._zooming=!1,this.transform=p,this._bearingSnap=b.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.getCenter=function(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)},g.prototype.setCenter=function(p,b){return this.jumpTo({center:p},b)},g.prototype.panBy=function(p,b,C){return p=r.Point.convert(p).mult(-1),this.panTo(this.transform.center,r.extend({offset:p},b),C)},g.prototype.panTo=function(p,b,C){return this.easeTo(r.extend({center:p},b),C)},g.prototype.getZoom=function(){return this.transform.zoom},g.prototype.setZoom=function(p,b){return this.jumpTo({zoom:p},b),this},g.prototype.zoomTo=function(p,b,C){return this.easeTo(r.extend({zoom:p},b),C)},g.prototype.zoomIn=function(p,b){return this.zoomTo(this.getZoom()+1,p,b),this},g.prototype.zoomOut=function(p,b){return this.zoomTo(this.getZoom()-1,p,b),this},g.prototype.getBearing=function(){return this.transform.bearing},g.prototype.setBearing=function(p,b){return this.jumpTo({bearing:p},b),this},g.prototype.getPadding=function(){return this.transform.padding},g.prototype.setPadding=function(p,b){return this.jumpTo({padding:p},b),this},g.prototype.rotateTo=function(p,b,C){return this.easeTo(r.extend({bearing:p},b),C)},g.prototype.resetNorth=function(p,b){return this.rotateTo(0,r.extend({duration:1e3},p),b),this},g.prototype.resetNorthPitch=function(p,b){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},p),b),this},g.prototype.snapToNorth=function(p,b){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(p,b):this},g.prototype.getPitch=function(){return this.transform.pitch},g.prototype.setPitch=function(p,b){return this.jumpTo({pitch:p},b),this},g.prototype.cameraForBounds=function(p,b){p=r.LngLatBounds.convert(p);var C=b&&b.bearing||0;return this._cameraForBoxAndBearing(p.getNorthWest(),p.getSouthEast(),C,b)},g.prototype._cameraForBoxAndBearing=function(p,b,C,E){var L={top:0,bottom:0,right:0,left:0};if(typeof(E=r.extend({padding:L,offset:[0,0],maxZoom:this.transform.maxZoom},E)).padding=="number"){var O=E.padding;E.padding={top:O,bottom:O,right:O,left:O}}E.padding=r.extend(L,E.padding);var Z=this.transform,Y=Z.padding,re=Z.project(r.LngLat.convert(p)),oe=Z.project(r.LngLat.convert(b)),ue=re.rotate(-C*Math.PI/180),ve=oe.rotate(-C*Math.PI/180),be=new r.Point(Math.max(ue.x,ve.x),Math.max(ue.y,ve.y)),Me=new r.Point(Math.min(ue.x,ve.x),Math.min(ue.y,ve.y)),pe=be.sub(Me),Ee=(Z.width-(Y.left+Y.right+E.padding.left+E.padding.right))/pe.x,We=(Z.height-(Y.top+Y.bottom+E.padding.top+E.padding.bottom))/pe.y;if(!(We<0||Ee<0)){var Ve=Math.min(Z.scaleZoom(Z.scale*Math.min(Ee,We)),E.maxZoom),je=typeof E.offset.x=="number"?new r.Point(E.offset.x,E.offset.y):r.Point.convert(E.offset),He=new r.Point((E.padding.left-E.padding.right)/2,(E.padding.top-E.padding.bottom)/2).rotate(C*Math.PI/180),et=je.add(He).mult(Z.scale/Z.zoomScale(Ve));return{center:Z.unproject(re.add(oe).div(2).sub(et)),zoom:Ve,bearing:C}}r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},g.prototype.fitBounds=function(p,b,C){return this._fitInternal(this.cameraForBounds(p,b),b,C)},g.prototype.fitScreenCoordinates=function(p,b,C,E,L){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.Point.convert(p)),this.transform.pointLocation(r.Point.convert(b)),C,E),E,L)},g.prototype._fitInternal=function(p,b,C){return p?(delete(b=r.extend(p,b)).padding,b.linear?this.easeTo(b,C):this.flyTo(b,C)):this},g.prototype.jumpTo=function(p,b){this.stop();var C=this.transform,E=!1,L=!1,O=!1;return"zoom"in p&&C.zoom!==+p.zoom&&(E=!0,C.zoom=+p.zoom),p.center!==void 0&&(C.center=r.LngLat.convert(p.center)),"bearing"in p&&C.bearing!==+p.bearing&&(L=!0,C.bearing=+p.bearing),"pitch"in p&&C.pitch!==+p.pitch&&(O=!0,C.pitch=+p.pitch),p.padding==null||C.isPaddingEqual(p.padding)||(C.padding=p.padding),this.fire(new r.Event("movestart",b)).fire(new r.Event("move",b)),E&&this.fire(new r.Event("zoomstart",b)).fire(new r.Event("zoom",b)).fire(new r.Event("zoomend",b)),L&&this.fire(new r.Event("rotatestart",b)).fire(new r.Event("rotate",b)).fire(new r.Event("rotateend",b)),O&&this.fire(new r.Event("pitchstart",b)).fire(new r.Event("pitch",b)).fire(new r.Event("pitchend",b)),this.fire(new r.Event("moveend",b))},g.prototype.easeTo=function(p,b){var C=this;this._stop(!1,p.easeId),((p=r.extend({offset:[0,0],duration:500,easing:r.ease},p)).animate===!1||!p.essential&&r.browser.prefersReducedMotion)&&(p.duration=0);var E=this.transform,L=this.getZoom(),O=this.getBearing(),Z=this.getPitch(),Y=this.getPadding(),re="zoom"in p?+p.zoom:L,oe="bearing"in p?this._normalizeBearing(p.bearing,O):O,ue="pitch"in p?+p.pitch:Z,ve="padding"in p?p.padding:E.padding,be=r.Point.convert(p.offset),Me=E.centerPoint.add(be),pe=E.pointLocation(Me),Ee=r.LngLat.convert(p.center||pe);this._normalizeCenter(Ee);var We,Ve,je=E.project(pe),He=E.project(Ee).sub(je),et=E.zoomScale(re-L);p.around&&(We=r.LngLat.convert(p.around),Ve=E.locationPoint(We));var ht={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||re!==L,this._rotating=this._rotating||O!==oe,this._pitching=this._pitching||ue!==Z,this._padding=!E.isPaddingEqual(ve),this._easeId=p.easeId,this._prepareEase(b,p.noMoveStart,ht),this._ease(function(At){if(C._zooming&&(E.zoom=r.number(L,re,At)),C._rotating&&(E.bearing=r.number(O,oe,At)),C._pitching&&(E.pitch=r.number(Z,ue,At)),C._padding&&(E.interpolatePadding(Y,ve,At),Me=E.centerPoint.add(be)),We)E.setLocationAtPoint(We,Ve);else{var It=E.zoomScale(E.zoom-L),Zt=re>L?Math.min(2,et):Math.max(.5,et),ca=Math.pow(Zt,1-At),ma=E.unproject(je.add(He.mult(At*ca)).mult(It));E.setLocationAtPoint(E.renderWorldCopies?ma.wrap():ma,Me)}C._fireMoveEvents(b)},function(At){C._afterEase(b,At)},p),this},g.prototype._prepareEase=function(p,b,C){C===void 0&&(C={}),this._moving=!0,b||C.moving||this.fire(new r.Event("movestart",p)),this._zooming&&!C.zooming&&this.fire(new r.Event("zoomstart",p)),this._rotating&&!C.rotating&&this.fire(new r.Event("rotatestart",p)),this._pitching&&!C.pitching&&this.fire(new r.Event("pitchstart",p))},g.prototype._fireMoveEvents=function(p){this.fire(new r.Event("move",p)),this._zooming&&this.fire(new r.Event("zoom",p)),this._rotating&&this.fire(new r.Event("rotate",p)),this._pitching&&this.fire(new r.Event("pitch",p))},g.prototype._afterEase=function(p,b){if(!this._easeId||!b||this._easeId!==b){delete this._easeId;var C=this._zooming,E=this._rotating,L=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,C&&this.fire(new r.Event("zoomend",p)),E&&this.fire(new r.Event("rotateend",p)),L&&this.fire(new r.Event("pitchend",p)),this.fire(new r.Event("moveend",p))}},g.prototype.flyTo=function(p,b){var C=this;if(!p.essential&&r.browser.prefersReducedMotion){var E=r.pick(p,["center","zoom","bearing","pitch","around"]);return this.jumpTo(E,b)}this.stop(),p=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},p);var L=this.transform,O=this.getZoom(),Z=this.getBearing(),Y=this.getPitch(),re=this.getPadding(),oe="zoom"in p?r.clamp(+p.zoom,L.minZoom,L.maxZoom):O,ue="bearing"in p?this._normalizeBearing(p.bearing,Z):Z,ve="pitch"in p?+p.pitch:Y,be="padding"in p?p.padding:L.padding,Me=L.zoomScale(oe-O),pe=r.Point.convert(p.offset),Ee=L.centerPoint.add(pe),We=L.pointLocation(Ee),Ve=r.LngLat.convert(p.center||We);this._normalizeCenter(Ve);var je=L.project(We),He=L.project(Ve).sub(je),et=p.curve,ht=Math.max(L.width,L.height),At=ht/Me,It=He.mag();if("minZoom"in p){var Zt=r.clamp(Math.min(p.minZoom,O,oe),L.minZoom,L.maxZoom),ca=ht/L.zoomScale(Zt-O);et=Math.sqrt(ca/It*2)}var ma=et*et;function _a(xa){var fa=(At*At-ht*ht+(xa?-1:1)*ma*ma*It*It)/(2*(xa?At:ht)*ma*It);return Math.log(Math.sqrt(fa*fa+1)-fa)}function fi(xa){return(Math.exp(xa)-Math.exp(-xa))/2}function qt(xa){return(Math.exp(xa)+Math.exp(-xa))/2}var Ta=_a(0),Za=function(xa){return qt(Ta)/qt(Ta+et*xa)},Aa=function(xa){return ht*((qt(Ta)*(fi(fa=Ta+et*xa)/qt(fa))-fi(Ta))/ma)/It;var fa},Sa=(_a(1)-Ta)/et;if(Math.abs(It)<1e-6||!isFinite(Sa)){if(Math.abs(ht-At)<1e-6)return this.easeTo(p,b);var Da=At<ht?-1:1;Sa=Math.abs(Math.log(At/ht))/et,Aa=function(){return 0},Za=function(xa){return Math.exp(Da*et*xa)}}return p.duration="duration"in p?+p.duration:1e3*Sa/("screenSpeed"in p?+p.screenSpeed/et:+p.speed),p.maxDuration&&p.duration>p.maxDuration&&(p.duration=0),this._zooming=!0,this._rotating=Z!==ue,this._pitching=ve!==Y,this._padding=!L.isPaddingEqual(be),this._prepareEase(b,!1),this._ease(function(xa){var fa=xa*Sa,_r=1/Za(fa);L.zoom=xa===1?oe:O+L.scaleZoom(_r),C._rotating&&(L.bearing=r.number(Z,ue,xa)),C._pitching&&(L.pitch=r.number(Y,ve,xa)),C._padding&&(L.interpolatePadding(re,be,xa),Ee=L.centerPoint.add(pe));var Gn=xa===1?Ve:L.unproject(je.add(He.mult(Aa(fa))).mult(_r));L.setLocationAtPoint(L.renderWorldCopies?Gn.wrap():Gn,Ee),C._fireMoveEvents(b)},function(){return C._afterEase(b)},p),this},g.prototype.isEasing=function(){return!!this._easeFrameId},g.prototype.stop=function(){return this._stop()},g.prototype._stop=function(p,b){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var C=this._onEaseEnd;delete this._onEaseEnd,C.call(this,b)}if(!p){var E=this.handlers;E&&E.stop(!1)}return this},g.prototype._ease=function(p,b,C){C.animate===!1||C.duration===0?(p(1),b()):(this._easeStart=r.browser.now(),this._easeOptions=C,this._onEaseFrame=p,this._onEaseEnd=b,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},g.prototype._renderFrameCallback=function(){var p=Math.min((r.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},g.prototype._normalizeBearing=function(p,b){p=r.wrap(p,-180,180);var C=Math.abs(p-b);return Math.abs(p-360-b)<C&&(p-=360),Math.abs(p+360-b)<C&&(p+=360),p},g.prototype._normalizeCenter=function(p){var b=this.transform;if(b.renderWorldCopies&&!b.lngRange){var C=p.lng-b.center.lng;p.lng+=C>180?-360:C<-180?360:0}},g}(r.Evented),rs=function(_){_===void 0&&(_={}),this.options=_,r.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};rs.prototype.getDefaultPosition=function(){return"bottom-right"},rs.prototype.onAdd=function(_){var g=this.options&&this.options.compact;return this._map=_,this._container=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=u.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=u.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),g&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),g===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},rs.prototype.onRemove=function(){u.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},rs.prototype._setElementTitle=function(_,g){var p=this._map._getUIString("AttributionControl."+g);_.title=p,_.setAttribute("aria-label",p)},rs.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},rs.prototype._updateEditLink=function(){var _=this._editLink;_||(_=this._editLink=this._container.querySelector(".mapbox-improve-map"));var g=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.config.ACCESS_TOKEN}];if(_){var p=g.reduce(function(b,C,E){return C.value&&(b+=C.key+"="+C.value+(E<g.length-1?"&":"")),b},"?");_.href=r.config.FEEDBACK_URL+"/"+p+(this._map._hash?this._map._hash.getHashString(!0):""),_.rel="noopener nofollow",this._setElementTitle(_,"MapFeedback")}},rs.prototype._updateData=function(_){!_||_.sourceDataType!=="metadata"&&_.sourceDataType!=="visibility"&&_.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},rs.prototype._updateAttributions=function(){if(this._map.style){var _=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?_=_.concat(this.options.customAttribution.map(function(O){return typeof O!="string"?"":O})):typeof this.options.customAttribution=="string"&&_.push(this.options.customAttribution)),this._map.style.stylesheet){var g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}var p=this._map.style.sourceCaches;for(var b in p){var C=p[b];if(C.used){var E=C.getSource();E.attribution&&_.indexOf(E.attribution)<0&&_.push(E.attribution)}}_.sort(function(O,Z){return O.length-Z.length});var L=(_=_.filter(function(O,Z){for(var Y=Z+1;Y<_.length;Y++)if(_[Y].indexOf(O)>=0)return!1;return!0})).join(" | ");L!==this._attribHTML&&(this._attribHTML=L,_.length?(this._innerContainer.innerHTML=L,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},rs.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ll=function(){r.bindAll(["_updateLogo"],this),r.bindAll(["_updateCompact"],this)};ll.prototype.onAdd=function(_){this._map=_,this._container=u.create("div","mapboxgl-ctrl");var g=u.create("a","mapboxgl-ctrl-logo");return g.target="_blank",g.rel="noopener nofollow",g.href="https://www.mapbox.com/",g.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),g.setAttribute("rel","noopener nofollow"),this._container.appendChild(g),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ll.prototype.onRemove=function(){u.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ll.prototype.getDefaultPosition=function(){return"bottom-left"},ll.prototype._updateLogo=function(_){_&&_.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ll.prototype._logoRequired=function(){if(this._map.style){var _=this._map.style.sourceCaches;for(var g in _)if(_[g].getSource().mapbox_logo)return!0;return!1}},ll.prototype._updateCompact=function(){var _=this._container.children;if(_.length){var g=_[0];this._map.getCanvasContainer().offsetWidth<250?g.classList.add("mapboxgl-compact"):g.classList.remove("mapboxgl-compact")}};var Br=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Br.prototype.add=function(_){var g=++this._id;return this._queue.push({callback:_,id:g,cancelled:!1}),g},Br.prototype.remove=function(_){for(var g=this._currentlyRunning,p=0,b=g?this._queue.concat(g):this._queue;p<b.length;p+=1){var C=b[p];if(C.id===_)return void(C.cancelled=!0)}},Br.prototype.run=function(_){_===void 0&&(_=0);var g=this._currentlyRunning=this._queue;this._queue=[];for(var p=0,b=g;p<b.length;p+=1){var C=b[p];if(!C.cancelled&&(C.callback(_),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Br.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Al={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},uy=r.window.HTMLImageElement,bp=r.window.HTMLElement,Mi=r.window.ImageBitmap,Cr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},qb=function(_){function g(b){var C=this;if((b=r.extend({},Cr,b)).minZoom!=null&&b.maxZoom!=null&&b.minZoom>b.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(b.minPitch!=null&&b.maxPitch!=null&&b.minPitch>b.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(b.minPitch!=null&&b.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(b.maxPitch!=null&&b.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var E=new hi(b.minZoom,b.maxZoom,b.minPitch,b.maxPitch,b.renderWorldCopies);if(_.call(this,E,b),this._interactive=b.interactive,this._maxTileCacheSize=b.maxTileCacheSize,this._failIfMajorPerformanceCaveat=b.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=b.preserveDrawingBuffer,this._antialias=b.antialias,this._trackResize=b.trackResize,this._bearingSnap=b.bearingSnap,this._refreshExpiredTiles=b.refreshExpiredTiles,this._fadeDuration=b.fadeDuration,this._crossSourceCollisions=b.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=b.collectResourceTiming,this._renderTaskQueue=new Br,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},Al,b.locale),this._clickTolerance=b.clickTolerance,this._requestManager=new r.RequestManager(b.transformRequest,b.accessToken),typeof b.container=="string"){if(this._container=r.window.document.getElementById(b.container),!this._container)throw new Error("Container '"+b.container+"' not found.")}else{if(!(b.container instanceof bp))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=b.container}if(b.maxBounds&&this.setMaxBounds(b.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return C._update(!1)}),this.on("moveend",function(){return C._update(!1)}),this.on("zoom",function(){return C._update(!0)}),r.window!==void 0&&(r.window.addEventListener("online",this._onWindowOnline,!1),r.window.addEventListener("resize",this._onWindowResize,!1),r.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Qt(this,b),this._hash=b.hash&&new no(typeof b.hash=="string"&&b.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch}),b.bounds&&(this.resize(),this.fitBounds(b.bounds,r.extend({},b.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=b.localIdeographFontFamily,b.style&&this.setStyle(b.style,{localIdeographFontFamily:b.localIdeographFontFamily}),b.attributionControl&&this.addControl(new rs({customAttribution:b.customAttribution})),this.addControl(new ll,b.logoPosition),this.on("style.load",function(){C.transform.unmodified&&C.jumpTo(C.style.stylesheet)}),this.on("data",function(L){C._update(L.dataType==="style"),C.fire(new r.Event(L.dataType+"data",L))}),this.on("dataloading",function(L){C.fire(new r.Event(L.dataType+"dataloading",L))})}_&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g;var p={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return g.prototype._getMapId=function(){return this._mapId},g.prototype.addControl=function(b,C){if(C===void 0&&(C=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var E=b.onAdd(this);this._controls.push(b);var L=this._controlPositions[C];return C.indexOf("bottom")!==-1?L.insertBefore(E,L.firstChild):L.appendChild(E),this},g.prototype.removeControl=function(b){if(!b||!b.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var C=this._controls.indexOf(b);return C>-1&&this._controls.splice(C,1),b.onRemove(this),this},g.prototype.hasControl=function(b){return this._controls.indexOf(b)>-1},g.prototype.resize=function(b){var C=this._containerDimensions(),E=C[0],L=C[1];if(E===this.transform.width&&L===this.transform.height)return this;this._resizeCanvas(E,L),this.transform.resize(E,L),this.painter.resize(E,L);var O=!this._moving;return O&&this.fire(new r.Event("movestart",b)).fire(new r.Event("move",b)),this.fire(new r.Event("resize",b)),O&&this.fire(new r.Event("moveend",b)),this},g.prototype.getBounds=function(){return this.transform.getBounds()},g.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},g.prototype.setMaxBounds=function(b){return this.transform.setMaxBounds(r.LngLatBounds.convert(b)),this._update()},g.prototype.setMinZoom=function(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.minZoom=b,this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},g.prototype.getMinZoom=function(){return this.transform.minZoom},g.prototype.setMaxZoom=function(b){if((b=b??22)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")},g.prototype.getMaxZoom=function(){return this.transform.maxZoom},g.prototype.setMinPitch=function(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.minPitch=b,this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},g.prototype.getMinPitch=function(){return this.transform.minPitch},g.prototype.setMaxPitch=function(b){if((b=b??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(b>=this.transform.minPitch)return this.transform.maxPitch=b,this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")},g.prototype.getMaxPitch=function(){return this.transform.maxPitch},g.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},g.prototype.setRenderWorldCopies=function(b){return this.transform.renderWorldCopies=b,this._update()},g.prototype.project=function(b){return this.transform.locationPoint(r.LngLat.convert(b))},g.prototype.unproject=function(b){return this.transform.pointLocation(r.Point.convert(b))},g.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},g.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},g.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},g.prototype._createDelegatedListener=function(b,C,E){var L,O=this;if(b==="mouseenter"||b==="mouseover"){var Z=!1;return{layer:C,listener:E,delegates:{mousemove:function(re){var oe=O.getLayer(C)?O.queryRenderedFeatures(re.point,{layers:[C]}):[];oe.length?Z||(Z=!0,E.call(O,new tr(b,O,re.originalEvent,{features:oe}))):Z=!1},mouseout:function(){Z=!1}}}}if(b==="mouseleave"||b==="mouseout"){var Y=!1;return{layer:C,listener:E,delegates:{mousemove:function(re){(O.getLayer(C)?O.queryRenderedFeatures(re.point,{layers:[C]}):[]).length?Y=!0:Y&&(Y=!1,E.call(O,new tr(b,O,re.originalEvent)))},mouseout:function(re){Y&&(Y=!1,E.call(O,new tr(b,O,re.originalEvent)))}}}}return{layer:C,listener:E,delegates:(L={},L[b]=function(re){var oe=O.getLayer(C)?O.queryRenderedFeatures(re.point,{layers:[C]}):[];oe.length&&(re.features=oe,E.call(O,re),delete re.features)},L)}},g.prototype.on=function(b,C,E){if(E===void 0)return _.prototype.on.call(this,b,C);var L=this._createDelegatedListener(b,C,E);for(var O in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(L),L.delegates)this.on(O,L.delegates[O]);return this},g.prototype.once=function(b,C,E){if(E===void 0)return _.prototype.once.call(this,b,C);var L=this._createDelegatedListener(b,C,E);for(var O in L.delegates)this.once(O,L.delegates[O]);return this},g.prototype.off=function(b,C,E){var L=this;return E===void 0?_.prototype.off.call(this,b,C):(this._delegatedListeners&&this._delegatedListeners[b]&&function(O){for(var Z=O[b],Y=0;Y<Z.length;Y++){var re=Z[Y];if(re.layer===C&&re.listener===E){for(var oe in re.delegates)L.off(oe,re.delegates[oe]);return Z.splice(Y,1),L}}}(this._delegatedListeners),this)},g.prototype.queryRenderedFeatures=function(b,C){if(!this.style)return[];var E;if(C!==void 0||b===void 0||b instanceof r.Point||Array.isArray(b)||(C=b,b=void 0),C=C||{},(b=b||[[0,0],[this.transform.width,this.transform.height]])instanceof r.Point||typeof b[0]=="number")E=[r.Point.convert(b)];else{var L=r.Point.convert(b[0]),O=r.Point.convert(b[1]);E=[L,new r.Point(O.x,L.y),O,new r.Point(L.x,O.y),L]}return this.style.queryRenderedFeatures(E,C,this.transform)},g.prototype.querySourceFeatures=function(b,C){return this.style.querySourceFeatures(b,C)},g.prototype.setStyle=function(b,C){return(C=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},C)).diff!==!1&&C.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,C),this):(this._localIdeographFontFamily=C.localIdeographFontFamily,this._updateStyle(b,C))},g.prototype._getUIString=function(b){var C=this._locale[b];if(C==null)throw new Error("Missing UI string '"+b+"'");return C},g.prototype._updateStyle=function(b,C){return this.style&&(this.style.setEventedParent(null),this.style._remove()),b?(this.style=new Rs(this,C||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b):this.style.loadJSON(b),this):(delete this.style,this)},g.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Rs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},g.prototype._diffStyle=function(b,C){var E=this;if(typeof b=="string"){var L=this._requestManager.normalizeStyleURL(b),O=this._requestManager.transformRequest(L,r.ResourceType.Style);r.getJSON(O,function(Z,Y){Z?E.fire(new r.ErrorEvent(Z)):Y&&E._updateDiff(Y,C)})}else typeof b=="object"&&this._updateDiff(b,C)},g.prototype._updateDiff=function(b,C){try{this.style.setState(b)&&this._update(!0)}catch(E){r.warnOnce("Unable to perform style diff: "+(E.message||E.error||E)+".  Rebuilding the style from scratch."),this._updateStyle(b,C)}},g.prototype.getStyle=function(){if(this.style)return this.style.serialize()},g.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")},g.prototype.addSource=function(b,C){return this._lazyInitEmptyStyle(),this.style.addSource(b,C),this._update(!0)},g.prototype.isSourceLoaded=function(b){var C=this.style&&this.style.sourceCaches[b];if(C!==void 0)return C.loaded();this.fire(new r.ErrorEvent(new Error("There is no source with ID '"+b+"'")))},g.prototype.areTilesLoaded=function(){var b=this.style&&this.style.sourceCaches;for(var C in b){var E=b[C]._tiles;for(var L in E){var O=E[L];if(O.state!=="loaded"&&O.state!=="errored")return!1}}return!0},g.prototype.addSourceType=function(b,C,E){return this._lazyInitEmptyStyle(),this.style.addSourceType(b,C,E)},g.prototype.removeSource=function(b){return this.style.removeSource(b),this._update(!0)},g.prototype.getSource=function(b){return this.style.getSource(b)},g.prototype.addImage=function(b,C,E){E===void 0&&(E={});var L=E.pixelRatio;L===void 0&&(L=1);var O=E.sdf;O===void 0&&(O=!1);var Z=E.stretchX,Y=E.stretchY,re=E.content;if(this._lazyInitEmptyStyle(),C instanceof uy||Mi&&C instanceof Mi){var oe=r.browser.getImageData(C);this.style.addImage(b,{data:new r.RGBAImage({width:oe.width,height:oe.height},oe.data),pixelRatio:L,stretchX:Z,stretchY:Y,content:re,sdf:O,version:0})}else{if(C.width===void 0||C.height===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ue=C;this.style.addImage(b,{data:new r.RGBAImage({width:C.width,height:C.height},new Uint8Array(C.data)),pixelRatio:L,stretchX:Z,stretchY:Y,content:re,sdf:O,version:0,userImage:ue}),ue.onAdd&&ue.onAdd(this,b)}},g.prototype.updateImage=function(b,C){var E=this.style.getImage(b);if(!E)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var L=C instanceof uy||Mi&&C instanceof Mi?r.browser.getImageData(C):C,O=L.width,Z=L.height,Y=L.data;return O===void 0||Z===void 0?this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):O!==E.data.width||Z!==E.data.height?this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(E.data.replace(Y,!(C instanceof uy||Mi&&C instanceof Mi)),void this.style.updateImage(b,E))},g.prototype.hasImage=function(b){return b?!!this.style.getImage(b):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)},g.prototype.removeImage=function(b){this.style.removeImage(b)},g.prototype.loadImage=function(b,C){r.getImage(this._requestManager.transformRequest(b,r.ResourceType.Image),C)},g.prototype.listImages=function(){return this.style.listImages()},g.prototype.addLayer=function(b,C){return this._lazyInitEmptyStyle(),this.style.addLayer(b,C),this._update(!0)},g.prototype.moveLayer=function(b,C){return this.style.moveLayer(b,C),this._update(!0)},g.prototype.removeLayer=function(b){return this.style.removeLayer(b),this._update(!0)},g.prototype.getLayer=function(b){return this.style.getLayer(b)},g.prototype.setLayerZoomRange=function(b,C,E){return this.style.setLayerZoomRange(b,C,E),this._update(!0)},g.prototype.setFilter=function(b,C,E){return E===void 0&&(E={}),this.style.setFilter(b,C,E),this._update(!0)},g.prototype.getFilter=function(b){return this.style.getFilter(b)},g.prototype.setPaintProperty=function(b,C,E,L){return L===void 0&&(L={}),this.style.setPaintProperty(b,C,E,L),this._update(!0)},g.prototype.getPaintProperty=function(b,C){return this.style.getPaintProperty(b,C)},g.prototype.setLayoutProperty=function(b,C,E,L){return L===void 0&&(L={}),this.style.setLayoutProperty(b,C,E,L),this._update(!0)},g.prototype.getLayoutProperty=function(b,C){return this.style.getLayoutProperty(b,C)},g.prototype.setLight=function(b,C){return C===void 0&&(C={}),this._lazyInitEmptyStyle(),this.style.setLight(b,C),this._update(!0)},g.prototype.getLight=function(){return this.style.getLight()},g.prototype.setFeatureState=function(b,C){return this.style.setFeatureState(b,C),this._update()},g.prototype.removeFeatureState=function(b,C){return this.style.removeFeatureState(b,C),this._update()},g.prototype.getFeatureState=function(b){return this.style.getFeatureState(b)},g.prototype.getContainer=function(){return this._container},g.prototype.getCanvasContainer=function(){return this._canvasContainer},g.prototype.getCanvas=function(){return this._canvas},g.prototype._containerDimensions=function(){var b=0,C=0;return this._container&&(b=this._container.clientWidth||400,C=this._container.clientHeight||300),[b,C]},g.prototype._detectMissingCSS=function(){r.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&r.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},g.prototype._setupContainer=function(){var b=this._container;b.classList.add("mapboxgl-map"),(this._missingCSSCanary=u.create("div","mapboxgl-canary",b)).style.visibility="hidden",this._detectMissingCSS();var C=this._canvasContainer=u.create("div","mapboxgl-canvas-container",b);this._interactive&&C.classList.add("mapboxgl-interactive"),this._canvas=u.create("canvas","mapboxgl-canvas",C),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var E=this._containerDimensions();this._resizeCanvas(E[0],E[1]);var L=this._controlContainer=u.create("div","mapboxgl-control-container",b),O=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Z){O[Z]=u.create("div","mapboxgl-ctrl-"+Z,L)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},g.prototype._resizeCanvas=function(b,C){var E=r.browser.devicePixelRatio||1;this._canvas.width=E*b,this._canvas.height=E*C,this._canvas.style.width=b+"px",this._canvas.style.height=C+"px"},g.prototype._setupPainter=function(){var b=r.extend({},l.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),C=this._canvas.getContext("webgl",b)||this._canvas.getContext("experimental-webgl",b);C?(this.painter=new fn(C,this.transform),r.webpSupported.testSupport(C)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))},g.prototype._contextLost=function(b){b.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:b}))},g.prototype._contextRestored=function(b){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:b}))},g.prototype._onMapScroll=function(b){if(b.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},g.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},g.prototype._update=function(b){return this.style?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this},g.prototype._requestRenderFrame=function(b){return this._update(),this._renderTaskQueue.add(b)},g.prototype._cancelRenderFrame=function(b){this._renderTaskQueue.remove(b)},g.prototype._render=function(b){var C,E=this,L=0,O=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(C=O.createQueryEXT(),O.beginQueryEXT(O.TIME_ELAPSED_EXT,C),L=r.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),!this._removed){var Z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Y=this.transform.zoom,re=r.browser.now();this.style.zoomHistory.update(Y,re);var oe=new r.EvaluationParameters(Y,{now:re,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ue=oe.crossFadingFactor();ue===1&&ue===this._crossFadingFactor||(Z=!0,this._crossFadingFactor=ue),this.style.update(oe)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||Z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ve=r.browser.now()-L;O.endQueryEXT(O.TIME_ELAPSED_EXT,C),setTimeout(function(){var pe=O.getQueryObjectEXT(C,O.QUERY_RESULT_EXT)/1e6;O.deleteQueryEXT(C),E.fire(new r.Event("gpu-timing-frame",{cpuTime:ve,gpuTime:pe}))},50)}if(this.listens("gpu-timing-layer")){var be=this.painter.collectGpuTimers();setTimeout(function(){var pe=E.painter.queryGpuTimers(be);E.fire(new r.Event("gpu-timing-layer",{layerTimes:pe}))},50)}var Me=this._sourcesDirty||this._styleDirty||this._placementDirty;return Me||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||Me||(this._fullyLoaded=!0),this}},g.prototype.remove=function(){this._hash&&this._hash.remove();for(var b=0,C=this._controls;b<C.length;b+=1)C[b].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),r.window!==void 0&&(r.window.removeEventListener("resize",this._onWindowResize,!1),r.window.removeEventListener("orientationchange",this._onWindowResize,!1),r.window.removeEventListener("online",this._onWindowOnline,!1));var E=this.painter.context.gl.getExtension("WEBGL_lose_context");E&&E.loseContext(),qc(this._canvasContainer),qc(this._controlContainer),qc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new r.Event("remove"))},g.prototype.triggerRepaint=function(){var b=this;this.style&&!this._frame&&(this._frame=r.browser.frame(function(C){b._frame=null,b._render(C)}))},g.prototype._onWindowOnline=function(){this._update()},g.prototype._onWindowResize=function(b){this._trackResize&&this.resize({originalEvent:b})._update()},p.showTileBoundaries.get=function(){return!!this._showTileBoundaries},p.showTileBoundaries.set=function(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())},p.showPadding.get=function(){return!!this._showPadding},p.showPadding.set=function(b){this._showPadding!==b&&(this._showPadding=b,this._update())},p.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},p.showCollisionBoxes.set=function(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())},p.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},p.showOverdrawInspector.set=function(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())},p.repaint.get=function(){return!!this._repaint},p.repaint.set=function(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())},p.vertices.get=function(){return!!this._vertices},p.vertices.set=function(b){this._vertices=b,this._update()},g.prototype._setCacheLimits=function(b,C){r.setCacheLimits(b,C)},p.version.get=function(){return r.version},Object.defineProperties(g.prototype,p),g}(yp);function qc(_){_.parentNode&&_.parentNode.removeChild(_)}var cy={showCompass:!0,showZoom:!0,visualizePitch:!1},eu=function(_){var g=this;this.options=r.extend({},cy,_),this._container=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(p){return p.preventDefault()}),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(p){return g._map.zoomIn({},{originalEvent:p})}),u.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(p){return g._map.zoomOut({},{originalEvent:p})}),u.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(p){g.options.visualizePitch?g._map.resetNorthPitch({},{originalEvent:p}):g._map.resetNorth({},{originalEvent:p})}),this._compassIcon=u.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};eu.prototype._updateZoomButtons=function(){var _=this._map.getZoom(),g=_===this._map.getMaxZoom(),p=_===this._map.getMinZoom();this._zoomInButton.disabled=g,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",g.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},eu.prototype._rotateCompassArrow=function(){var _=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=_},eu.prototype.onAdd=function(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ps(this._map,this._compass,this.options.visualizePitch)),this._container},eu.prototype.onRemove=function(){u.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},eu.prototype._createButton=function(_,g){var p=u.create("button",_,this._container);return p.type="button",p.addEventListener("click",g),p},eu.prototype._setButtonTitle=function(_,g){var p=this._map._getUIString("NavigationControl."+g);_.title=p,_.setAttribute("aria-label",p)};var Ps=function(_,g,p){p===void 0&&(p=!1),this._clickTolerance=10,this.element=g,this.mouseRotate=new pp({clickTolerance:_.dragRotate._mouseRotate._clickTolerance}),this.map=_,p&&(this.mousePitch=new sy({clickTolerance:_.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),u.addEventListener(g,"mousedown",this.mousedown),u.addEventListener(g,"touchstart",this.touchstart,{passive:!1}),u.addEventListener(g,"touchmove",this.touchmove),u.addEventListener(g,"touchend",this.touchend),u.addEventListener(g,"touchcancel",this.reset)};function nh(_,g,p){if(_=new r.LngLat(_.lng,_.lat),g){var b=new r.LngLat(_.lng-360,_.lat),C=new r.LngLat(_.lng+360,_.lat),E=p.locationPoint(_).distSqr(g);p.locationPoint(b).distSqr(g)<E?_=b:p.locationPoint(C).distSqr(g)<E&&(_=C)}for(;Math.abs(_.lng-p.center.lng)>180;){var L=p.locationPoint(_);if(L.x>=0&&L.y>=0&&L.x<=p.width&&L.y<=p.height)break;_.lng>p.center.lng?_.lng-=360:_.lng+=360}return _}Ps.prototype.down=function(_,g){this.mouseRotate.mousedown(_,g),this.mousePitch&&this.mousePitch.mousedown(_,g),u.disableDrag()},Ps.prototype.move=function(_,g){var p=this.map,b=this.mouseRotate.mousemoveWindow(_,g);if(b&&b.bearingDelta&&p.setBearing(p.getBearing()+b.bearingDelta),this.mousePitch){var C=this.mousePitch.mousemoveWindow(_,g);C&&C.pitchDelta&&p.setPitch(p.getPitch()+C.pitchDelta)}},Ps.prototype.off=function(){var _=this.element;u.removeEventListener(_,"mousedown",this.mousedown),u.removeEventListener(_,"touchstart",this.touchstart,{passive:!1}),u.removeEventListener(_,"touchmove",this.touchmove),u.removeEventListener(_,"touchend",this.touchend),u.removeEventListener(_,"touchcancel",this.reset),this.offTemp()},Ps.prototype.offTemp=function(){u.enableDrag(),u.removeEventListener(r.window,"mousemove",this.mousemove),u.removeEventListener(r.window,"mouseup",this.mouseup)},Ps.prototype.mousedown=function(_){this.down(r.extend({},_,{ctrlKey:!0,preventDefault:function(){return _.preventDefault()}}),u.mousePos(this.element,_)),u.addEventListener(r.window,"mousemove",this.mousemove),u.addEventListener(r.window,"mouseup",this.mouseup)},Ps.prototype.mousemove=function(_){this.move(_,u.mousePos(this.element,_))},Ps.prototype.mouseup=function(_){this.mouseRotate.mouseupWindow(_),this.mousePitch&&this.mousePitch.mouseupWindow(_),this.offTemp()},Ps.prototype.touchstart=function(_){_.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=u.touchPos(this.element,_.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return _.preventDefault()}},this._startPos))},Ps.prototype.touchmove=function(_){_.targetTouches.length!==1?this.reset():(this._lastPos=u.touchPos(this.element,_.targetTouches)[0],this.move({preventDefault:function(){return _.preventDefault()}},this._lastPos))},Ps.prototype.touchend=function(_){_.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ps.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Tl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vp(_,g,p){var b=_.classList;for(var C in Tl)b.remove("mapboxgl-"+p+"-anchor-"+C);b.add("mapboxgl-"+p+"-anchor-"+g)}var rh,L_=function(_){function g(p,b){if(_.call(this),(p instanceof r.window.HTMLElement||b)&&(p=r.extend({element:p},b)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=p&&p.anchor||"center",this._color=p&&p.color||"#3FB1CE",this._scale=p&&p.scale||1,this._draggable=p&&p.draggable||!1,this._clickTolerance=p&&p.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=p&&p.rotation||0,this._rotationAlignment=p&&p.rotationAlignment||"auto",this._pitchAlignment=p&&p.pitchAlignment&&p.pitchAlignment!=="auto"?p.pitchAlignment:this._rotationAlignment,p&&p.element)this._element=p.element,this._offset=r.Point.convert(p&&p.offset||[0,0]);else{this._defaultMarker=!0,this._element=u.create("div"),this._element.setAttribute("aria-label","Map marker");var C=u.createNS("http://www.w3.org/2000/svg","svg");C.setAttributeNS(null,"display","block"),C.setAttributeNS(null,"height","41px"),C.setAttributeNS(null,"width","27px"),C.setAttributeNS(null,"viewBox","0 0 27 41");var E=u.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");var L=u.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill-rule","nonzero");var O=u.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");for(var Z=0,Y=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Z<Y.length;Z+=1){var re=Y[Z],oe=u.createNS("http://www.w3.org/2000/svg","ellipse");oe.setAttributeNS(null,"opacity","0.04"),oe.setAttributeNS(null,"cx","10.5"),oe.setAttributeNS(null,"cy","5.80029008"),oe.setAttributeNS(null,"rx",re.rx),oe.setAttributeNS(null,"ry",re.ry),O.appendChild(oe)}var ue=u.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"fill",this._color);var ve=u.createNS("http://www.w3.org/2000/svg","path");ve.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ue.appendChild(ve);var be=u.createNS("http://www.w3.org/2000/svg","g");be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"fill","#000000");var Me=u.createNS("http://www.w3.org/2000/svg","path");Me.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),be.appendChild(Me);var pe=u.createNS("http://www.w3.org/2000/svg","g");pe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),pe.setAttributeNS(null,"fill","#FFFFFF");var Ee=u.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");var We=u.createNS("http://www.w3.org/2000/svg","circle");We.setAttributeNS(null,"fill","#000000"),We.setAttributeNS(null,"opacity","0.25"),We.setAttributeNS(null,"cx","5.5"),We.setAttributeNS(null,"cy","5.5"),We.setAttributeNS(null,"r","5.4999962");var Ve=u.createNS("http://www.w3.org/2000/svg","circle");Ve.setAttributeNS(null,"fill","#FFFFFF"),Ve.setAttributeNS(null,"cx","5.5"),Ve.setAttributeNS(null,"cy","5.5"),Ve.setAttributeNS(null,"r","5.4999962"),Ee.appendChild(We),Ee.appendChild(Ve),L.appendChild(O),L.appendChild(ue),L.appendChild(be),L.appendChild(pe),L.appendChild(Ee),C.appendChild(L),C.setAttributeNS(null,"height",41*this._scale+"px"),C.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(C),this._offset=r.Point.convert(p&&p.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(je){je.preventDefault()}),this._element.addEventListener("mousedown",function(je){je.preventDefault()}),vp(this._element,this._anchor,"marker"),this._popup=null}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.addTo=function(p){return this.remove(),this._map=p,p.getCanvasContainer().appendChild(this._element),p.on("move",this._update),p.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},g.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),u.remove(this._element),this._popup&&this._popup.remove(),this},g.prototype.getLngLat=function(){return this._lngLat},g.prototype.setLngLat=function(p){return this._lngLat=r.LngLat.convert(p),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},g.prototype.getElement=function(){return this._element},g.prototype.setPopup=function(p){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),p){if(!("offset"in p.options)){var b=Math.sqrt(Math.pow(13.5,2)/2);p.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(24.6+b)],"bottom-right":[-b,-1*(24.6+b)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=p,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},g.prototype._onKeyPress=function(p){var b=p.code,C=p.charCode||p.keyCode;b!=="Space"&&b!=="Enter"&&C!==32&&C!==13||this.togglePopup()},g.prototype._onMapClick=function(p){var b=p.originalEvent.target,C=this._element;this._popup&&(b===C||C.contains(b))&&this.togglePopup()},g.prototype.getPopup=function(){return this._popup},g.prototype.togglePopup=function(){var p=this._popup;return p?(p.isOpen()?p.remove():p.addTo(this._map),this):this},g.prototype._update=function(p){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=nh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(b="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C="rotateX("+this._map.getPitch()+"deg)"),p&&p.type!=="moveend"||(this._pos=this._pos.round()),u.setTransform(this._element,Tl[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+C+" "+b)}},g.prototype.getOffset=function(){return this._offset},g.prototype.setOffset=function(p){return this._offset=r.Point.convert(p),this._update(),this},g.prototype._onMove=function(p){if(!this._isDragging){var b=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))},g.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"},g.prototype._addDragHandler=function(p){this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},g.prototype.setDraggable=function(p){return this._draggable=!!p,this._map&&(p?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},g.prototype.isDraggable=function(){return this._draggable},g.prototype.setRotation=function(p){return this._rotation=p||0,this._update(),this},g.prototype.getRotation=function(){return this._rotation},g.prototype.setRotationAlignment=function(p){return this._rotationAlignment=p||"auto",this._update(),this},g.prototype.getRotationAlignment=function(){return this._rotationAlignment},g.prototype.setPitchAlignment=function(p){return this._pitchAlignment=p&&p!=="auto"?p:this._rotationAlignment,this._update(),this},g.prototype.getPitchAlignment=function(){return this._pitchAlignment},g}(r.Evented),dy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},sh=0,Yc=!1,hy=function(_){function g(p){_.call(this),this.options=r.extend({},dy,p),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.onAdd=function(p){var b;return this._map=p,this._container=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),b=this._setupUI,rh!==void 0?b(rh):r.window.navigator.permissions!==void 0?r.window.navigator.permissions.query({name:"geolocation"}).then(function(C){b(rh=C.state!=="denied")}):b(rh=!!r.window.navigator.geolocation),this._container},g.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),u.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,sh=0,Yc=!1},g.prototype._isOutOfMapMaxBounds=function(p){var b=this._map.getMaxBounds(),C=p.coords;return b&&(C.longitude<b.getWest()||C.longitude>b.getEast()||C.latitude<b.getSouth()||C.latitude>b.getNorth())},g.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},g.prototype._onSuccess=function(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",p)),this._finish()}},g.prototype._updateCamera=function(p){var b=new r.LngLat(p.coords.longitude,p.coords.latitude),C=p.coords.accuracy,E=this._map.getBearing(),L=r.extend({bearing:E},this.options.fitBoundsOptions);this._map.fitBounds(b.toBounds(C),L,{geolocateSource:!0})},g.prototype._updateMarker=function(p){if(p){var b=new r.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(b).addTo(this._map),this._userLocationDotMarker.setLngLat(b).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},g.prototype._updateCircleRadius=function(){var p=this._map._container.clientHeight/2,b=this._map.unproject([0,p]),C=this._map.unproject([1,p]),E=b.distanceTo(C),L=Math.ceil(2*this._accuracy/E);this._circleElement.style.width=L+"px",this._circleElement.style.height=L+"px"},g.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},g.prototype._onError=function(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var b=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=b,this._geolocateButton.setAttribute("aria-label",b),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&Yc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",p)),this._finish()}},g.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},g.prototype._setupUI=function(p){var b=this;if(this._container.addEventListener("contextmenu",function(L){return L.preventDefault()}),this._geolocateButton=u.create("button","mapboxgl-ctrl-geolocate",this._container),u.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",p===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var C=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=C,this._geolocateButton.setAttribute("aria-label",C)}else{var E=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=E,this._geolocateButton.setAttribute("aria-label",E)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=u.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new L_(this._dotElement),this._circleElement=u.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new L_({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(L){L.geolocateSource||b._watchState!=="ACTIVE_LOCK"||L.originalEvent&&L.originalEvent.type==="resize"||(b._watchState="BACKGROUND",b._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),b._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),b.fire(new r.Event("trackuserlocationend")))})},g.prototype.trigger=function(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":sh--,Yc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++sh>1?(p={maximumAge:6e5,timeout:0},Yc=!0):(p=this.options.positionOptions,Yc=!1),this._geolocationWatchID=r.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else r.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},g.prototype._clearWatch=function(){r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},g}(r.Evented),zu={maxWidth:100,unit:"metric"},Uu=function(_){this.options=r.extend({},zu,_),r.bindAll(["_onMove","setUnit"],this)};function xp(_,g,p){var b=p&&p.maxWidth||100,C=_._container.clientHeight/2,E=_.unproject([0,C]),L=_.unproject([b,C]),O=E.distanceTo(L);if(p&&p.unit==="imperial"){var Z=3.2808*O;Z>5280?Hu(g,b,Z/5280,_._getUIString("ScaleControl.Miles")):Hu(g,b,Z,_._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?Hu(g,b,O/1852,_._getUIString("ScaleControl.NauticalMiles")):O>=1e3?Hu(g,b,O/1e3,_._getUIString("ScaleControl.Kilometers")):Hu(g,b,O,_._getUIString("ScaleControl.Meters"))}function Hu(_,g,p,b){var C,E,L,O=(C=p,(E=Math.pow(10,(""+Math.floor(C)).length-1))*(L=(L=C/E)>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(Z){var Y=Math.pow(10,Math.ceil(-Math.log(Z)/Math.LN10));return Math.round(Z*Y)/Y}(L)));_.style.width=g*(O/p)+"px",_.innerHTML=O+"&nbsp;"+b}Uu.prototype.getDefaultPosition=function(){return"bottom-left"},Uu.prototype._onMove=function(){xp(this._map,this._container,this.options)},Uu.prototype.onAdd=function(_){return this._map=_,this._container=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Uu.prototype.onRemove=function(){u.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Uu.prototype.setUnit=function(_){this.options.unit=_,xp(this._map,this._container,this.options)};var Ro=function(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof r.window.HTMLElement?this._container=_.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in r.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in r.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in r.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in r.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ro.prototype.onAdd=function(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ro.prototype.onRemove=function(){u.remove(this._controlContainer),this._map=null,r.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ro.prototype._checkFullscreenSupport=function(){return!!(r.window.document.fullscreenEnabled||r.window.document.mozFullScreenEnabled||r.window.document.msFullscreenEnabled||r.window.document.webkitFullscreenEnabled)},Ro.prototype._setupUI=function(){var _=this._fullscreenButton=u.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);u.create("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden",!0),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),r.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ro.prototype._updateTitle=function(){var _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_},Ro.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ro.prototype._isFullscreen=function(){return this._fullscreen},Ro.prototype._changeIcon=function(){(r.window.document.fullscreenElement||r.window.document.mozFullScreenElement||r.window.document.webkitFullscreenElement||r.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ro.prototype._onClickFullscreen=function(){this._isFullscreen()?r.window.document.exitFullscreen?r.window.document.exitFullscreen():r.window.document.mozCancelFullScreen?r.window.document.mozCancelFullScreen():r.window.document.msExitFullscreen?r.window.document.msExitFullscreen():r.window.document.webkitCancelFullScreen&&r.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var _y={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},R_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),my=function(_){function g(p){_.call(this),this.options=r.extend(Object.create(_y),p),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return _&&(g.__proto__=_),(g.prototype=Object.create(_&&_.prototype)).constructor=g,g.prototype.addTo=function(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this},g.prototype.isOpen=function(){return!!this._map},g.prototype.remove=function(){return this._content&&u.remove(this._content),this._container&&(u.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this},g.prototype.getLngLat=function(){return this._lngLat},g.prototype.setLngLat=function(p){return this._lngLat=r.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},g.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},g.prototype.getElement=function(){return this._container},g.prototype.setText=function(p){return this.setDOMContent(r.window.document.createTextNode(p))},g.prototype.setHTML=function(p){var b,C=r.window.document.createDocumentFragment(),E=r.window.document.createElement("body");for(E.innerHTML=p;b=E.firstChild;)C.appendChild(b);return this.setDOMContent(C)},g.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},g.prototype.setMaxWidth=function(p){return this.options.maxWidth=p,this._update(),this},g.prototype.setDOMContent=function(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=u.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this},g.prototype.addClassName=function(p){this._container&&this._container.classList.add(p)},g.prototype.removeClassName=function(p){this._container&&this._container.classList.remove(p)},g.prototype.setOffset=function(p){return this.options.offset=p,this._update(),this},g.prototype.toggleClassName=function(p){if(this._container)return this._container.classList.toggle(p)},g.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=u.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},g.prototype._onMouseUp=function(p){this._update(p.point)},g.prototype._onMouseMove=function(p){this._update(p.point)},g.prototype._onDrag=function(p){this._update(p.point)},g.prototype._update=function(p){var b=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=u.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=u.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(oe){return b._container.classList.add(oe)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=nh(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||p)){var C=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat),E=this.options.anchor,L=function oe(ue){if(ue){if(typeof ue=="number"){var ve=Math.round(Math.sqrt(.5*Math.pow(ue,2)));return{center:new r.Point(0,0),top:new r.Point(0,ue),"top-left":new r.Point(ve,ve),"top-right":new r.Point(-ve,ve),bottom:new r.Point(0,-ue),"bottom-left":new r.Point(ve,-ve),"bottom-right":new r.Point(-ve,-ve),left:new r.Point(ue,0),right:new r.Point(-ue,0)}}if(ue instanceof r.Point||Array.isArray(ue)){var be=r.Point.convert(ue);return{center:be,top:be,"top-left":be,"top-right":be,bottom:be,"bottom-left":be,"bottom-right":be,left:be,right:be}}return{center:r.Point.convert(ue.center||[0,0]),top:r.Point.convert(ue.top||[0,0]),"top-left":r.Point.convert(ue["top-left"]||[0,0]),"top-right":r.Point.convert(ue["top-right"]||[0,0]),bottom:r.Point.convert(ue.bottom||[0,0]),"bottom-left":r.Point.convert(ue["bottom-left"]||[0,0]),"bottom-right":r.Point.convert(ue["bottom-right"]||[0,0]),left:r.Point.convert(ue.left||[0,0]),right:r.Point.convert(ue.right||[0,0])}}return oe(new r.Point(0,0))}(this.options.offset);if(!E){var O,Z=this._container.offsetWidth,Y=this._container.offsetHeight;O=C.y+L.bottom.y<Y?["top"]:C.y>this._map.transform.height-Y?["bottom"]:[],C.x<Z/2?O.push("left"):C.x>this._map.transform.width-Z/2&&O.push("right"),E=O.length===0?"bottom":O.join("-")}var re=C.add(L[E]).round();u.setTransform(this._container,Tl[E]+" translate("+re.x+"px,"+re.y+"px)"),vp(this._container,E,"popup")}},g.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var p=this._container.querySelector(R_);p&&p.focus()}},g.prototype._onClose=function(){this.remove()},g}(r.Evented),wp={version:r.version,supported:l,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:qb,NavigationControl:eu,GeolocateControl:hy,AttributionControl:rs,ScaleControl:Uu,FullscreenControl:Ro,Popup:my,Marker:L_,Style:Rs,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.Point,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,config:r.config,prewarm:function(){tt().acquire(Je)},clearPrewarmedResources:function(){var _=Xt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Je),Xt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return r.config.ACCESS_TOKEN},set accessToken(_){r.config.ACCESS_TOKEN=_},get baseApiUrl(){return r.config.API_URL},set baseApiUrl(_){r.config.API_URL=_},get workerCount(){return _t.workerCount},set workerCount(_){_t.workerCount=_},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){r.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage:function(_){r.clearTileCache(_)},workerUrl:""};return wp}),n})})(M7);var OY=M7.exports;const WR=GY(OY);class z5 extends Jm{constructor(e){const t=Object.assign({},e);delete t.accessToken,delete t.style,delete t.container,delete t.xyz,super(t),this.set("xyz",e.maplibreOptions.xyz),this.set("xyz_custom",e.maplibreOptions.xyz_custom),this.xyz_=e.xyz,e.accessToken&&(WR.accessToken=e.accessToken),this.map_=new WR.Map({container:e.maplibreOptions.container,style:e.maplibreOptions.style,attributionControl:!1,interactive:!1}),this.maplibreMap=this.map_}getMapBoxMap(){return this.map_}getMapLibreMap(){return this.map_}render(e){const t=this.map_.getCanvas(),i=e.viewState;t.style.position="absolute";const n=this.getVisible();t.style.display=n?"block":"none";const s=this.getOpacity().toString();s!==t.style.opacity&&(t.style.opacity=s);const r=i.rotation;return r&&this.map_.rotateTo(Wd(-r),{animate:!1}),this.map_.jumpTo({center:cf(i.center),zoom:i.zoom-1,animate:!1}),this.map_._frame&&(this.map_._frame.cancel(),this.map_._frame=null),this.map_._render(),t}setLayerVisibility(e,t){this.map_.setLayoutProperty(e,"visibility",t?"visible":"none")}getStyle(){return this.map_.getStyle()}getXYZ(){return this.get("xyz")}}function L7(a,e,t){t(a,e)&&a instanceof Rf&&a.getLayers().forEach(n=>{L7(n,[...e,a],t)})}const R7=parseInt("19",10),PY=parseInt("8",10);var U5=(a=>(a.ON_LAYER_TYPE="ON_LAYER_TYPE",a))(U5||{});const Im="EPSG:3857",Gd="EPSG:4326",Kl="EPSG:2169",BY=JSON.parse("[2.6, 47.7, 8.6, 51]"),NY=parseInt("8",10);let IS;const GR=Di();function vi(){function a(){return IS}function e(){return GR.value=IS=new WY({view:new rc({center:[682439,6379152],constrainResolution:!0,enableRotation:!0,extent:dI(BY,"EPSG:4326","EPSG:3857"),multiWorld:!1,zoom:NY}),controls:[],keyboardEventTarget:document}),IS}function t(v,w){return v.id===w.id}function i(v,w){return v===w}function n(v,w){var S;return(S=v.layers)==null?void 0:S.some(T=>t(T,w))}function s(v,w){var T;const S=(T=v==null?void 0:v.layers)==null?void 0:T.find(M=>t(M,w));return!i(S,w)}function r(v,w){return!(w===null||!("layers"in v)||!("layers"in w)||typeof w.layers>"u"||typeof v.layers>"u"||v.layers===w.layers)}function l(v,w){return!("layers"in v)||typeof v.layers>"u"?[]:w===null||!("layers"in w)?v.layers.map((S,T)=>({layer:S,position:T})):v.layers===w.layers?[]:v.layers.reduce((S,T,M)=>n(w,T)?S:[...S,{layer:T,position:M}],[])}function u(v,w){return r(v,w)?w.layers.reduce((S,T)=>n(v,T)?S:[...S,T],[]):[]}function d(v,w){return r(v,w)?v.layers.reduce((S,T)=>s(w,T)?[...S,T]:S,[]):[]}function m(v,w,S){var G,P;const T=(G=w.layers)==null?void 0:G.find(F=>F.id===v),M=(P=S==null?void 0:S.layers)==null?void 0:P.find(F=>F.id===v);return(T==null?void 0:T.type)!==(M==null?void 0:M.type)?U5.ON_LAYER_TYPE:null}function f(){const v=vi().getOlMap();v.updateSize(),L7(v.getLayerGroup(),[],w=>(w instanceof z5&&w.getMapLibreMap().resize(),!0))}return{olMap:GR,getOlMap:a,createMap:e,equalsLayer:t,hasLayer:n,layerHasChanged:s,contextHasChanged:r,getAddedLayers:l,getRemovedLayers:u,getMutatedLayers:d,getMutationType:m,resize:f}}function k7(a,e="fr-FR"){const t=new Date(a);return new Intl.DateTimeFormat(e).format(t)}function FY(a,e,t){if(a==null||isNaN(a))return Wa.t("N/A",{ns:"client"});switch(t){case"elevation":return H5(a,e);case"area":return W7(a,e);case"length":default:return w1(a,e)}}function H5(a,e=0){return isNaN(+a)?a:`${(+a).toFixed(e)} m`}function w1(a,e=2){return a===null?Wa.t("N/A",{ns:"client"}):a<1e3?`${a.toFixed(e)} m`:a>=1e3?`${(a/1e3).toFixed(e)} km`:""}function W7(a,e=2){return a===null?Wa.t("N/A",{ns:"client"}):a<1e6?`${a.toFixed(e)} m`:a>=1e6?`${(a/1e6).toFixed(e)} km`:""}function OR(a){return a===void 0?Wa.t("N/A",{ns:"client"}):`${a.number}, ${a.street}, ${a.postal_code} ${a.locality}`}function DY(a,e,t){const i=t.split(":")[2];let n=t,s;i!==void 0?n=t.slice(0,t.lastIndexOf(":")):t.endsWith("*")&&(s=cf(a,e)[0]<=6?"UTM31N":"UTM32N",n=t.replace("3*",s.slice(3,5)));const r=kr(a,e,n),l=n===Gd,u=r.map((m,f)=>(l?VY(m):m)<0?"WS"[f]:"EN"[f]),d=r.map(m=>l?ZY(m,i):Math.abs(Math.round(m)).toString());return s!==void 0?`${d.join(" | ")}  (${s})`:d.map((m,f)=>`${m} ${u[f]}`).join(" | ")}function VY(a){return(a+180)%360-180}function ZY(a,e){const t=(a+180)%360-180,i=Math.abs(t);if(e===void 0)return Math.round(i*1e6)/1e6;const n=Math.floor(i),s=i%1*60;if(e==="DMm"){const r=Math.round(s*1e6)/1e6;return`${n} ${r}`}if(e==="DMS"){const r=Math.floor(s),l=Math.round(s%1*600)/10;return`${n} ${r} ${l}`}return"N/A"}const zY={install(a){a.directive("format-measure",UY)}};function UY(a,e){let t,i=e.value;const n=(e==null?void 0:e.arg)!==void 0?+(e==null?void 0:e.arg):void 0;try{t=Object.keys(e.modifiers)[0]}catch{}i=FY(i,n,t),a.textContent=i}let HY=null;function XY(a){HY=a;const e=Object.keys(a.defs),t=e.length;let i,n;for(i=0;i<t;++i){const s=e[i];if(!B2(s)){const r=a.defs(s);let l=r.units;!l&&r.projName==="longlat"&&(l="degrees"),Ex(new lI({code:s,axisOrientation:r.axis,metersPerUnit:r.to_meter,units:l}))}}for(i=0;i<t;++i){const s=e[i],r=B2(s);for(n=0;n<t;++n){const l=e[n],u=B2(l);if(!N2(s,l))if(a.defs[s]===a.defs[l])nT([r,u]);else{const d=a(s,l);cH(r,u,rR(r,u,d.forward),rR(u,r,d.inverse))}}}}function qY(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)a("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),a("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]}var Fm=1,Dm=2,Hg=3,YY=4,gT=5,PR=6378137,KY=6356752314e-3,BR=.0066943799901413165,P0=484813681109536e-20,kt=Math.PI/2,jY=.16666666666666666,$Y=.04722222222222222,JY=.022156084656084655,ia=1e-10,As=.017453292519943295,cc=57.29577951308232,cn=Math.PI/4,I1=Math.PI*2,Lr=3.14159265359,el={};el.greenwich=0;el.lisbon=-9.131906111111;el.paris=2.337229166667;el.bogota=-74.080916666667;el.madrid=-3.687938888889;el.rome=12.452333333333;el.bern=7.439583333333;el.jakarta=106.807719444444;el.ferro=-17.666666666667;el.brussels=4.367975;el.stockholm=18.058277777778;el.athens=23.7163375;el.oslo=10.722916666667;const QY={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var NR=/[\s_\-\/\(\)]/g;function $h(a,e){if(a[e])return a[e];for(var t=Object.keys(a),i=e.toLowerCase().replace(NR,""),n=-1,s,r;++n<t.length;)if(s=t[n],r=s.toLowerCase().replace(NR,""),r===i)return a[s]}function fT(a){var e={},t=a.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,u){var d=u.split("=");return d.push(!0),l[d[0].toLowerCase()]=d[1],l},{}),i,n,s,r={proj:"projName",datum:"datumCode",rf:function(l){e.rf=parseFloat(l)},lat_0:function(l){e.lat0=l*As},lat_1:function(l){e.lat1=l*As},lat_2:function(l){e.lat2=l*As},lat_ts:function(l){e.lat_ts=l*As},lon_0:function(l){e.long0=l*As},lon_1:function(l){e.long1=l*As},lon_2:function(l){e.long2=l*As},alpha:function(l){e.alpha=parseFloat(l)*As},gamma:function(l){e.rectified_grid_angle=parseFloat(l)},lonc:function(l){e.longc=l*As},x_0:function(l){e.x0=parseFloat(l)},y_0:function(l){e.y0=parseFloat(l)},k_0:function(l){e.k0=parseFloat(l)},k:function(l){e.k0=parseFloat(l)},a:function(l){e.a=parseFloat(l)},b:function(l){e.b=parseFloat(l)},r:function(l){e.a=e.b=parseFloat(l)},r_a:function(){e.R_A=!0},zone:function(l){e.zone=parseInt(l,10)},south:function(){e.utmSouth=!0},towgs84:function(l){e.datum_params=l.split(",").map(function(u){return parseFloat(u)})},to_meter:function(l){e.to_meter=parseFloat(l)},units:function(l){e.units=l;var u=$h(QY,l);u&&(e.to_meter=u.to_meter)},from_greenwich:function(l){e.from_greenwich=l*As},pm:function(l){var u=$h(el,l);e.from_greenwich=(u||parseFloat(l))*As},nadgrids:function(l){l==="@null"?e.datumCode="none":e.nadgrids=l},axis:function(l){var u="ewnsud";l.length===3&&u.indexOf(l.substr(0,1))!==-1&&u.indexOf(l.substr(1,1))!==-1&&u.indexOf(l.substr(2,1))!==-1&&(e.axis=l)},approx:function(){e.approx=!0}};for(i in t)n=t[i],i in r?(s=r[i],typeof s=="function"?s(n):e[s]=n):e[i]=n;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var C1=1,G7=2,O7=3,Vx=4,P7=5,X5=-1,eK=/\s/,tK=/[A-Za-z]/,aK=/[A-Za-z84_]/,II=/[,\]]/,B7=/[\d\.E\-\+]/;function Hd(a){if(typeof a!="string")throw new Error("not a string");this.text=a.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=C1}Hd.prototype.readCharicter=function(){var a=this.text[this.place++];if(this.state!==Vx)for(;eK.test(a);){if(this.place>=this.text.length)return;a=this.text[this.place++]}switch(this.state){case C1:return this.neutral(a);case G7:return this.keyword(a);case Vx:return this.quoted(a);case P7:return this.afterquote(a);case O7:return this.number(a);case X5:return}};Hd.prototype.afterquote=function(a){if(a==='"'){this.word+='"',this.state=Vx;return}if(II.test(a)){this.word=this.word.trim(),this.afterItem(a);return}throw new Error(`havn't handled "`+a+'" in afterquote yet, index '+this.place)};Hd.prototype.afterItem=function(a){if(a===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=C1;return}if(a==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=C1,this.currentObject=this.stack.pop(),this.currentObject||(this.state=X5);return}};Hd.prototype.number=function(a){if(B7.test(a)){this.word+=a;return}if(II.test(a)){this.word=parseFloat(this.word),this.afterItem(a);return}throw new Error(`havn't handled "`+a+'" in number yet, index '+this.place)};Hd.prototype.quoted=function(a){if(a==='"'){this.state=P7;return}this.word+=a};Hd.prototype.keyword=function(a){if(aK.test(a)){this.word+=a;return}if(a==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=C1;return}if(II.test(a)){this.afterItem(a);return}throw new Error(`havn't handled "`+a+'" in keyword yet, index '+this.place)};Hd.prototype.neutral=function(a){if(tK.test(a)){this.word=a,this.state=G7;return}if(a==='"'){this.word="",this.state=Vx;return}if(B7.test(a)){this.word=a,this.state=O7;return}if(II.test(a)){this.afterItem(a);return}throw new Error(`havn't handled "`+a+'" in neutral yet, index '+this.place)};Hd.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===X5)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function iK(a){var e=new Hd(a);return e.output()}function CS(a,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var i=e?{}:a,n=t.reduce(function(s,r){return Ag(r,s),s},i);e&&(a[e]=n)}function Ag(a,e){if(!Array.isArray(a)){e[a]=!0;return}var t=a.shift();if(t==="PARAMETER"&&(t=a.shift()),a.length===1){if(Array.isArray(a[0])){e[t]={},Ag(a[0],e[t]);return}e[t]=a[0];return}if(!a.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=a;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(a);return}Array.isArray(t)||(e[t]={});var i;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:a[0].toLowerCase(),convert:a[1]},a.length===3&&Ag(a[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:a[0],a:a[1],rf:a[2]},a.length===4&&Ag(a[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":a[0]=["name",a[0]],CS(e,t,a);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":a[0]=["name",a[0]],CS(e,t,a),e[t].type=t;return;default:for(i=-1;++i<a.length;)if(!Array.isArray(a[i]))return Ag(a,e[t]);return CS(e,t,a)}}var nK=.017453292519943295,rK=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function sK(a,e){var t=e[0],i=e[1];!(t in a)&&i in a&&(a[t]=a[i],e.length===3&&(a[t]=e[2](a[t])))}function ac(a){return a*nK}function N7(a){for(var e=Object.keys(a),t=0,i=e.length;t<i;++t){var n=e[t];rK.indexOf(n)!==-1&&oK(a[n]),typeof a[n]=="object"&&N7(a[n])}}function oK(a){if(a.AUTHORITY){var e=Object.keys(a.AUTHORITY)[0];e&&e in a.AUTHORITY&&(a.title=e+":"+a.AUTHORITY[e])}if(a.type==="GEOGCS"?a.projName="longlat":a.type==="LOCAL_CS"?(a.projName="identity",a.local=!0):typeof a.PROJECTION=="object"?a.projName=Object.keys(a.PROJECTION)[0]:a.projName=a.PROJECTION,a.AXIS){for(var t="",i=0,n=a.AXIS.length;i<n;++i){var s=[a.AXIS[i][0].toLowerCase(),a.AXIS[i][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(a.axis=t)}a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),a.units==="metre"&&(a.units="meter"),a.UNIT.convert&&(a.type==="GEOGCS"?a.DATUM&&a.DATUM.SPHEROID&&(a.to_meter=a.UNIT.convert*a.DATUM.SPHEROID.a):a.to_meter=a.UNIT.convert));var r=a.GEOGCS;a.type==="GEOGCS"&&(r=a),r&&(r.DATUM?a.datumCode=r.DATUM.name.toLowerCase():a.datumCode=r.name.toLowerCase(),a.datumCode.slice(0,2)==="d_"&&(a.datumCode=a.datumCode.slice(2)),a.datumCode==="new_zealand_1949"&&(a.datumCode="nzgd49"),(a.datumCode==="wgs_1984"||a.datumCode==="world_geodetic_system_1984")&&(a.PROJECTION==="Mercator_Auxiliary_Sphere"&&(a.sphere=!0),a.datumCode="wgs84"),a.datumCode==="belge_1972"&&(a.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(a.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),a.ellps.toLowerCase().slice(0,13)==="international"&&(a.ellps="intl"),a.a=r.DATUM.SPHEROID.a,a.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(a.datum_params=r.DATUM.TOWGS84),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36"),~a.datumCode.indexOf("osni_1952")&&(a.datumCode="osni52"),(~a.datumCode.indexOf("tm65")||~a.datumCode.indexOf("geodetic_datum_of_1965"))&&(a.datumCode="ire65"),a.datumCode==="ch1903+"&&(a.datumCode="ch1903"),~a.datumCode.indexOf("israel")&&(a.datumCode="isr93")),a.b&&!isFinite(a.b)&&(a.b=a.a);function l(m){var f=a.to_meter||1;return m*f}var u=function(m){return sK(a,m)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",ac],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",ac],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",ac],["lat0","latitude_of_origin",ac],["lat0","standard_parallel_1",ac],["lat1","standard_parallel_1",ac],["lat2","standard_parallel_2",ac],["azimuth","Azimuth"],["alpha","azimuth",ac],["srsCode","name"]];d.forEach(u),!a.long0&&a.longc&&(a.projName==="Albers_Conic_Equal_Area"||a.projName==="Lambert_Azimuthal_Equal_Area")&&(a.long0=a.longc),!a.lat_ts&&a.lat1&&(a.projName==="Stereographic_South_Pole"||a.projName==="Polar Stereographic (variant B)")?(a.lat0=ac(a.lat1>0?90:-90),a.lat_ts=a.lat1):!a.lat_ts&&a.lat0&&a.projName==="Polar_Stereographic"&&(a.lat_ts=a.lat0,a.lat0=ac(a.lat0>0?90:-90))}function F7(a){var e=iK(a),t=e[0],i={};return Ag(e,i),N7(i),i[t]}function _o(a){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?_o[a]=fT(arguments[1]):_o[a]=F7(arguments[1]):_o[a]=t}else if(arguments.length===1){if(Array.isArray(a))return a.map(function(i){Array.isArray(i)?_o.apply(e,i):_o(i)});if(typeof a=="string"){if(a in _o)return _o[a]}else"EPSG"in a?_o["EPSG:"+a.EPSG]=a:"ESRI"in a?_o["ESRI:"+a.ESRI]=a:"IAU2000"in a?_o["IAU2000:"+a.IAU2000]=a:console.log(a);return}}qY(_o);function lK(a){return typeof a=="string"}function uK(a){return a in _o}var cK=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function dK(a){return cK.some(function(e){return a.indexOf(e)>-1})}var hK=["3857","900913","3785","102113"];function _K(a){var e=$h(a,"authority");if(e){var t=$h(e,"epsg");return t&&hK.indexOf(t)>-1}}function mK(a){var e=$h(a,"extension");if(e)return $h(e,"proj4")}function pK(a){return a[0]==="+"}function gK(a){if(lK(a)){if(uK(a))return _o[a];if(dK(a)){var e=F7(a);if(_K(e))return _o["EPSG:3857"];var t=mK(e);return t?fT(t):e}if(pK(a))return fT(a)}else return a}function FR(a,e){a=a||{};var t,i;if(!e)return a;for(i in e)t=e[i],t!==void 0&&(a[i]=t);return a}function Ic(a,e,t){var i=a*e;return t/Math.sqrt(1-i*i)}function $1(a){return a<0?-1:1}function sa(a){return Math.abs(a)<=Lr?a:a-$1(a)*I1}function bu(a,e,t){var i=a*t,n=.5*a;return i=Math.pow((1-i)/(1+i),n),Math.tan(.5*(kt-e))/i}function S1(a,e){for(var t=.5*a,i,n,s=kt-2*Math.atan(e),r=0;r<=15;r++)if(i=a*Math.sin(s),n=kt-2*Math.atan(e*Math.pow((1-i)/(1+i),t))-s,s+=n,Math.abs(n)<=1e-10)return s;return-9999}function fK(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ic(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function yK(a){var e=a.x,t=a.y;if(t*cc>90&&t*cc<-90&&e*cc>180&&e*cc<-180)return null;var i,n;if(Math.abs(Math.abs(t)-kt)<=ia)return null;if(this.sphere)i=this.x0+this.a*this.k0*sa(e-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(cn+.5*t));else{var s=Math.sin(t),r=bu(this.e,t,s);i=this.x0+this.a*this.k0*sa(e-this.long0),n=this.y0-this.a*this.k0*Math.log(r)}return a.x=i,a.y=n,a}function bK(a){var e=a.x-this.x0,t=a.y-this.y0,i,n;if(this.sphere)n=kt-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(n=S1(this.e,s),n===-9999)return null}return i=sa(this.long0+e/(this.a*this.k0)),a.x=i,a.y=n,a}var vK=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const xK={init:fK,forward:yK,inverse:bK,names:vK};function wK(){}function DR(a){return a}var IK=["longlat","identity"];const CK={init:wK,forward:DR,inverse:DR,names:IK};var SK=[xK,CK],D2={},Zx=[];function D7(a,e){var t=Zx.length;return a.names?(Zx[t]=a,a.names.forEach(function(i){D2[i.toLowerCase()]=t}),this):(console.log(e),!0)}function AK(a){if(!a)return!1;var e=a.toLowerCase();if(typeof D2[e]<"u"&&Zx[D2[e]])return Zx[D2[e]]}function TK(){SK.forEach(D7)}const EK={start:TK,add:D7,get:AK};var li={};li.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};li.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};li.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};li.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};li.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};li.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};li.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};li.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};li.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};li.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};li.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};li.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};li.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};li.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};li.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};li.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};li.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};li.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};li.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};li.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};li.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};li.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};li.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};li.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};li.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};li.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};li.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};li.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};li.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};li.hough={a:6378270,rf:297,ellipseName:"Hough"};li.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};li.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};li.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};li.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};li.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};li.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};li.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};li.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};li.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};li.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};li.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};li.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var MK=li.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};li.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function LK(a,e,t,i){var n=a*a,s=e*e,r=(n-s)/n,l=0;i?(a*=1-r*(jY+r*($Y+r*JY)),n=a*a,r=0):l=Math.sqrt(r);var u=(n-s)/s;return{es:r,e:l,ep2:u}}function RK(a,e,t,i,n){if(!a){var s=$h(li,i);s||(s=MK),a=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*a),(t===0||Math.abs(a-e)<ia)&&(n=!0,e=a),{a,b:e,rf:t,sphere:n}}var V2={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var kK in V2){var VR=V2[kK];V2[VR.datumName]=VR}function WK(a,e,t,i,n,s,r){var l={};return a===void 0||a==="none"?l.datum_type=gT:l.datum_type=YY,e&&(l.datum_params=e.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=Fm),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=Dm,l.datum_params[3]*=P0,l.datum_params[4]*=P0,l.datum_params[5]*=P0,l.datum_params[6]=l.datum_params[6]/1e6+1)),r&&(l.datum_type=Hg,l.grids=r),l.a=t,l.b=i,l.es=n,l.ep2=s,l}var V7={};function GK(a,e){var t=new DataView(e),i=BK(t),n=NK(t,i),s=FK(t,n,i),r={header:n,subgrids:s};return V7[a]=r,r}function OK(a){if(a===void 0)return null;var e=a.split(",");return e.map(PK)}function PK(a){if(a.length===0)return null;var e=a[0]==="@";return e&&(a=a.slice(1)),a==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:a,mandatory:!e,grid:V7[a]||null,isNull:!1}}function Tg(a){return a/3600*Math.PI/180}function BK(a){var e=a.getInt32(8,!1);return e===11?!1:(e=a.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function NK(a,e){return{nFields:a.getInt32(8,e),nSubgridFields:a.getInt32(24,e),nSubgrids:a.getInt32(40,e),shiftType:yT(a,56,56+8).trim(),fromSemiMajorAxis:a.getFloat64(120,e),fromSemiMinorAxis:a.getFloat64(136,e),toSemiMajorAxis:a.getFloat64(152,e),toSemiMinorAxis:a.getFloat64(168,e)}}function yT(a,e,t){return String.fromCharCode.apply(null,new Uint8Array(a.buffer.slice(e,t)))}function FK(a,e,t){for(var i=176,n=[],s=0;s<e.nSubgrids;s++){var r=VK(a,i,t),l=ZK(a,i,r,t),u=Math.round(1+(r.upperLongitude-r.lowerLongitude)/r.longitudeInterval),d=Math.round(1+(r.upperLatitude-r.lowerLatitude)/r.latitudeInterval);n.push({ll:[Tg(r.lowerLongitude),Tg(r.lowerLatitude)],del:[Tg(r.longitudeInterval),Tg(r.latitudeInterval)],lim:[u,d],count:r.gridNodeCount,cvs:DK(l)}),i+=176+r.gridNodeCount*16}return n}function DK(a){return a.map(function(e){return[Tg(e.longitudeShift),Tg(e.latitudeShift)]})}function VK(a,e,t){return{name:yT(a,e+8,e+16).trim(),parent:yT(a,e+24,e+24+8).trim(),lowerLatitude:a.getFloat64(e+72,t),upperLatitude:a.getFloat64(e+88,t),lowerLongitude:a.getFloat64(e+104,t),upperLongitude:a.getFloat64(e+120,t),latitudeInterval:a.getFloat64(e+136,t),longitudeInterval:a.getFloat64(e+152,t),gridNodeCount:a.getInt32(e+168,t)}}function ZK(a,e,t,i){for(var n=e+176,s=16,r=[],l=0;l<t.gridNodeCount;l++){var u={latitudeShift:a.getFloat32(n+l*s,i),longitudeShift:a.getFloat32(n+l*s+4,i),latitudeAccuracy:a.getFloat32(n+l*s+8,i),longitudeAccuracy:a.getFloat32(n+l*s+12,i)};r.push(u)}return r}function gc(a,e){if(!(this instanceof gc))return new gc(a);e=e||function(d){if(d)throw d};var t=gK(a);if(typeof t!="object"){e("Could not parse to valid json: "+a);return}var i=gc.projections.get(t.projName);if(!i){e("Could not get projection name from: "+a);return}if(t.datumCode&&t.datumCode!=="none"){var n=$h(V2,t.datumCode);n&&(t.datum_params=t.datum_params||(n.towgs84?n.towgs84.split(","):null),t.ellps=n.ellipse,t.datumName=n.datumName?n.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=RK(t.a,t.b,t.rf,t.ellps,t.sphere),r=LK(s.a,s.b,s.rf,t.R_A),l=OK(t.nadgrids),u=t.datum||WK(t.datumCode,t.datum_params,s.a,s.b,r.es,r.ep2,l);FR(this,t),FR(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=u,this.init(),e(null,this)}gc.projections=EK;gc.projections.start();function zK(a,e){return a.datum_type!==e.datum_type||a.a!==e.a||Math.abs(a.es-e.es)>5e-11?!1:a.datum_type===Fm?a.datum_params[0]===e.datum_params[0]&&a.datum_params[1]===e.datum_params[1]&&a.datum_params[2]===e.datum_params[2]:a.datum_type===Dm?a.datum_params[0]===e.datum_params[0]&&a.datum_params[1]===e.datum_params[1]&&a.datum_params[2]===e.datum_params[2]&&a.datum_params[3]===e.datum_params[3]&&a.datum_params[4]===e.datum_params[4]&&a.datum_params[5]===e.datum_params[5]&&a.datum_params[6]===e.datum_params[6]:!0}function Z7(a,e,t){var i=a.x,n=a.y,s=a.z?a.z:0,r,l,u,d;if(n<-kt&&n>-1.001*kt)n=-kt;else if(n>kt&&n<1.001*kt)n=kt;else{if(n<-kt)return{x:-1/0,y:-1/0,z:a.z};if(n>kt)return{x:1/0,y:1/0,z:a.z}}return i>Math.PI&&(i-=2*Math.PI),l=Math.sin(n),d=Math.cos(n),u=l*l,r=t/Math.sqrt(1-e*u),{x:(r+s)*d*Math.cos(i),y:(r+s)*d*Math.sin(i),z:(r*(1-e)+s)*l}}function z7(a,e,t,i){var n=1e-12,s=n*n,r=30,l,u,d,m,f,v,w,S,T,M,G,P,F,N=a.x,V=a.y,K=a.z?a.z:0,te,J,ne;if(l=Math.sqrt(N*N+V*V),u=Math.sqrt(N*N+V*V+K*K),l/t<n){if(te=0,u/t<n)return J=kt,ne=-i,{x:a.x,y:a.y,z:a.z}}else te=Math.atan2(V,N);d=K/u,m=l/u,f=1/Math.sqrt(1-e*(2-e)*m*m),S=m*(1-e)*f,T=d*f,F=0;do F++,w=t/Math.sqrt(1-e*T*T),ne=l*S+K*T-w*(1-e*T*T),v=e*w/(w+ne),f=1/Math.sqrt(1-v*(2-v)*m*m),M=m*(1-v)*f,G=d*f,P=G*S-M*T,S=M,T=G;while(P*P>s&&F<r);return J=Math.atan(G/Math.abs(M)),{x:te,y:J,z:ne}}function UK(a,e,t){if(e===Fm)return{x:a.x+t[0],y:a.y+t[1],z:a.z+t[2]};if(e===Dm){var i=t[0],n=t[1],s=t[2],r=t[3],l=t[4],u=t[5],d=t[6];return{x:d*(a.x-u*a.y+l*a.z)+i,y:d*(u*a.x+a.y-r*a.z)+n,z:d*(-l*a.x+r*a.y+a.z)+s}}}function HK(a,e,t){if(e===Fm)return{x:a.x-t[0],y:a.y-t[1],z:a.z-t[2]};if(e===Dm){var i=t[0],n=t[1],s=t[2],r=t[3],l=t[4],u=t[5],d=t[6],m=(a.x-i)/d,f=(a.y-n)/d,v=(a.z-s)/d;return{x:m+u*f-l*v,y:-u*m+f+r*v,z:l*m-r*f+v}}}function Uv(a){return a===Fm||a===Dm}function XK(a,e,t){if(zK(a,e)||a.datum_type===gT||e.datum_type===gT)return t;var i=a.a,n=a.es;if(a.datum_type===Hg){var s=ZR(a,!1,t);if(s!==0)return;i=PR,n=BR}var r=e.a,l=e.b,u=e.es;if(e.datum_type===Hg&&(r=PR,l=KY,u=BR),n===u&&i===r&&!Uv(a.datum_type)&&!Uv(e.datum_type))return t;if(t=Z7(t,n,i),Uv(a.datum_type)&&(t=UK(t,a.datum_type,a.datum_params)),Uv(e.datum_type)&&(t=HK(t,e.datum_type,e.datum_params)),t=z7(t,u,r,l),e.datum_type===Hg){var d=ZR(e,!0,t);if(d!==0)return}return t}function ZR(a,e,t){if(a.grids===null||a.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-t.x,y:t.y},n={x:Number.NaN,y:Number.NaN},s=[];e:for(var r=0;r<a.grids.length;r++){var l=a.grids[r];if(s.push(l.name),l.isNull){n=i;break}if(l.mandatory,l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}for(var u=l.grid.subgrids,d=0,m=u.length;d<m;d++){var f=u[d],v=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,w=f.ll[0]-v,S=f.ll[1]-v,T=f.ll[0]+(f.lim[0]-1)*f.del[0]+v,M=f.ll[1]+(f.lim[1]-1)*f.del[1]+v;if(!(S>i.y||w>i.x||M<i.y||T<i.x)&&(n=qK(i,e,f),!isNaN(n.x)))break e}}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*cc+" "+i.y*cc+" tried: '"+s+"'"),-1):(t.x=-n.x,t.y=n.y,0)}function qK(a,e,t){var i={x:Number.NaN,y:Number.NaN};if(isNaN(a.x))return i;var n={x:a.x,y:a.y};n.x-=t.ll[0],n.y-=t.ll[1],n.x=sa(n.x-Math.PI)+Math.PI;var s=zR(n,t);if(e){if(isNaN(s.x))return i;s.x=n.x-s.x,s.y=n.y-s.y;var r=9,l=1e-12,u,d;do{if(d=zR(s,t),isNaN(d.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}u={x:n.x-(d.x+s.x),y:n.y-(d.y+s.y)},s.x+=u.x,s.y+=u.y}while(r--&&Math.abs(u.x)>l&&Math.abs(u.y)>l);if(r<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=sa(s.x+t.ll[0]),i.y=s.y+t.ll[1]}else isNaN(s.x)||(i.x=a.x+s.x,i.y=a.y+s.y);return i}function zR(a,e){var t={x:a.x/e.del[0],y:a.y/e.del[1]},i={x:Math.floor(t.x),y:Math.floor(t.y)},n={x:t.x-1*i.x,y:t.y-1*i.y},s={x:Number.NaN,y:Number.NaN},r;if(i.x<0||i.x>=e.lim[0]||i.y<0||i.y>=e.lim[1])return s;r=i.y*e.lim[0]+i.x;var l={x:e.cvs[r][0],y:e.cvs[r][1]};r++;var u={x:e.cvs[r][0],y:e.cvs[r][1]};r+=e.lim[0];var d={x:e.cvs[r][0],y:e.cvs[r][1]};r--;var m={x:e.cvs[r][0],y:e.cvs[r][1]},f=n.x*n.y,v=n.x*(1-n.y),w=(1-n.x)*(1-n.y),S=(1-n.x)*n.y;return s.x=w*l.x+v*u.x+S*m.x+f*d.x,s.y=w*l.y+v*u.y+S*m.y+f*d.y,s}function UR(a,e,t){var i=t.x,n=t.y,s=t.z||0,r,l,u,d={};for(u=0;u<3;u++)if(!(e&&u===2&&t.z===void 0))switch(u===0?(r=i,"ew".indexOf(a.axis[u])!==-1?l="x":l="y"):u===1?(r=n,"ns".indexOf(a.axis[u])!==-1?l="y":l="x"):(r=s,l="z"),a.axis[u]){case"e":d[l]=r;break;case"w":d[l]=-r;break;case"n":d[l]=r;break;case"s":d[l]=-r;break;case"u":t[l]!==void 0&&(d.z=r);break;case"d":t[l]!==void 0&&(d.z=-r);break;default:return null}return d}function U7(a){var e={x:a[0],y:a[1]};return a.length>2&&(e.z=a[2]),a.length>3&&(e.m=a[3]),e}function YK(a){HR(a.x),HR(a.y)}function HR(a){if(typeof Number.isFinite=="function"){if(Number.isFinite(a))return;throw new TypeError("coordinates must be finite numbers")}if(typeof a!="number"||a!==a||!isFinite(a))throw new TypeError("coordinates must be finite numbers")}function KK(a,e){return(a.datum.datum_type===Fm||a.datum.datum_type===Dm||a.datum.datum_type===Hg)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Fm||e.datum.datum_type===Dm||e.datum.datum_type===Hg)&&a.datumCode!=="WGS84"}function zx(a,e,t,i){var n;Array.isArray(t)?t=U7(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(YK(t),a.datum&&e.datum&&KK(a,e)&&(n=new gc("WGS84"),t=zx(a,n,t,i),a=n),i&&a.axis!=="enu"&&(t=UR(a,!1,t)),a.projName==="longlat")t={x:t.x*As,y:t.y*As,z:t.z||0};else if(a.to_meter&&(t={x:t.x*a.to_meter,y:t.y*a.to_meter,z:t.z||0}),t=a.inverse(t),!t)return;if(a.from_greenwich&&(t.x+=a.from_greenwich),t=XK(a.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*cc,y:t.y*cc,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),i&&e.axis!=="enu"?UR(e,!0,t):(t&&!s&&delete t.z,t)}var XR=gc("WGS84");function SS(a,e,t,i){var n,s,r;return Array.isArray(t)?(n=zx(a,e,t,i)||{x:NaN,y:NaN},t.length>2?typeof a.name<"u"&&a.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(t.slice(3)):[n.x,n.y,t[2]].concat(t.slice(3)):[n.x,n.y].concat(t.slice(2)):[n.x,n.y]):(s=zx(a,e,t,i),r=Object.keys(t),r.length===2||r.forEach(function(l){if(typeof a.name<"u"&&a.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;s[l]=t[l]}),s)}function qR(a){return a instanceof gc?a:a.oProj?a.oProj:gc(a)}function js(a,e,t){a=qR(a);var i=!1,n;return typeof e>"u"?(e=a,a=XR,i=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=a,a=XR,i=!0),e=qR(e),t?SS(a,e,t):(n={forward:function(s,r){return SS(a,e,s,r)},inverse:function(s,r){return SS(e,a,s,r)}},i&&(n.oProj=e),n)}var YR=6,H7="AJSAJS",X7="AFAFAF",Eg=65,No=73,Wl=79,h0=86,_0=90;const jK={forward:q7,inverse:$K,toPoint:Y7};function q7(a,e){return e=e||5,ej(JK({lat:a[1],lon:a[0]}),e)}function $K(a){var e=q5(j7(a.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function Y7(a){var e=q5(j7(a.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function AS(a){return a*(Math.PI/180)}function KR(a){return 180*(a/Math.PI)}function JK(a){var e=a.lat,t=a.lon,i=6378137,n=.00669438,s=.9996,r,l,u,d,m,f,v,w=AS(e),S=AS(t),T,M;M=Math.floor((t+180)/6)+1,t===180&&(M=60),e>=56&&e<64&&t>=3&&t<12&&(M=32),e>=72&&e<84&&(t>=0&&t<9?M=31:t>=9&&t<21?M=33:t>=21&&t<33?M=35:t>=33&&t<42&&(M=37)),r=(M-1)*6-180+3,T=AS(r),l=n/(1-n),u=i/Math.sqrt(1-n*Math.sin(w)*Math.sin(w)),d=Math.tan(w)*Math.tan(w),m=l*Math.cos(w)*Math.cos(w),f=Math.cos(w)*(S-T),v=i*((1-n/4-3*n*n/64-5*n*n*n/256)*w-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*w)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*w)-35*n*n*n/3072*Math.sin(6*w));var G=s*u*(f+(1-d+m)*f*f*f/6+(5-18*d+d*d+72*m-58*l)*f*f*f*f*f/120)+5e5,P=s*(v+u*Math.tan(w)*(f*f/2+(5-d+9*m+4*m*m)*f*f*f*f/24+(61-58*d+d*d+600*m-330*l)*f*f*f*f*f*f/720));return e<0&&(P+=1e7),{northing:Math.round(P),easting:Math.round(G),zoneNumber:M,zoneLetter:QK(e)}}function q5(a){var e=a.northing,t=a.easting,i=a.zoneLetter,n=a.zoneNumber;if(n<0||n>60)return null;var s=.9996,r=6378137,l=.00669438,u,d=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),m,f,v,w,S,T,M,G,P,F=t-5e5,N=e;i<"N"&&(N-=1e7),M=(n-1)*6-180+3,u=l/(1-l),T=N/s,G=T/(r*(1-l/4-3*l*l/64-5*l*l*l/256)),P=G+(3*d/2-27*d*d*d/32)*Math.sin(2*G)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*G)+151*d*d*d/96*Math.sin(6*G),m=r/Math.sqrt(1-l*Math.sin(P)*Math.sin(P)),f=Math.tan(P)*Math.tan(P),v=u*Math.cos(P)*Math.cos(P),w=r*(1-l)/Math.pow(1-l*Math.sin(P)*Math.sin(P),1.5),S=F/(m*s);var V=P-m*Math.tan(P)/w*(S*S/2-(5+3*f+10*v-4*v*v-9*u)*S*S*S*S/24+(61+90*f+298*v+45*f*f-252*u-3*v*v)*S*S*S*S*S*S/720);V=KR(V);var K=(S-(1+2*f+v)*S*S*S/6+(5-2*v+28*f-3*v*v+8*u+24*f*f)*S*S*S*S*S/120)/Math.cos(P);K=M+KR(K);var te;if(a.accuracy){var J=q5({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});te={top:J.lat,right:J.lon,bottom:V,left:K}}else te={lat:V,lon:K};return te}function QK(a){var e="Z";return 84>=a&&a>=72?e="X":72>a&&a>=64?e="W":64>a&&a>=56?e="V":56>a&&a>=48?e="U":48>a&&a>=40?e="T":40>a&&a>=32?e="S":32>a&&a>=24?e="R":24>a&&a>=16?e="Q":16>a&&a>=8?e="P":8>a&&a>=0?e="N":0>a&&a>=-8?e="M":-8>a&&a>=-16?e="L":-16>a&&a>=-24?e="K":-24>a&&a>=-32?e="J":-32>a&&a>=-40?e="H":-40>a&&a>=-48?e="G":-48>a&&a>=-56?e="F":-56>a&&a>=-64?e="E":-64>a&&a>=-72?e="D":-72>a&&a>=-80&&(e="C"),e}function ej(a,e){var t="00000"+a.easting,i="00000"+a.northing;return a.zoneNumber+a.zoneLetter+tj(a.easting,a.northing,a.zoneNumber)+t.substr(t.length-5,e)+i.substr(i.length-5,e)}function tj(a,e,t){var i=K7(t),n=Math.floor(a/1e5),s=Math.floor(e/1e5)%20;return aj(n,s,i)}function K7(a){var e=a%YR;return e===0&&(e=YR),e}function aj(a,e,t){var i=t-1,n=H7.charCodeAt(i),s=X7.charCodeAt(i),r=n+a-1,l=s+e,u=!1;r>_0&&(r=r-_0+Eg-1,u=!0),(r===No||n<No&&r>No||(r>No||n<No)&&u)&&r++,(r===Wl||n<Wl&&r>Wl||(r>Wl||n<Wl)&&u)&&(r++,r===No&&r++),r>_0&&(r=r-_0+Eg-1),l>h0?(l=l-h0+Eg-1,u=!0):u=!1,(l===No||s<No&&l>No||(l>No||s<No)&&u)&&l++,(l===Wl||s<Wl&&l>Wl||(l>Wl||s<Wl)&&u)&&(l++,l===No&&l++),l>h0&&(l=l-h0+Eg-1);var d=String.fromCharCode(r)+String.fromCharCode(l);return d}function j7(a){if(a&&a.length===0)throw"MGRSPoint coverting from nothing";for(var e=a.length,t=null,i="",n,s=0;!/[A-Z]/.test(n=a.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+a;i+=n,s++}var r=parseInt(i,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+a;var l=a.charAt(s++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+a;t=a.substring(s,s+=2);for(var u=K7(r),d=ij(t.charAt(0),u),m=nj(t.charAt(1),u);m<rj(l);)m+=2e6;var f=e-s;if(f%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+a;var v=f/2,w=0,S=0,T,M,G,P,F;return v>0&&(T=1e5/Math.pow(10,v),M=a.substring(s,s+v),w=parseFloat(M)*T,G=a.substring(s+v),S=parseFloat(G)*T),P=w+d,F=S+m,{easting:P,northing:F,zoneLetter:l,zoneNumber:r,accuracy:T}}function ij(a,e){for(var t=H7.charCodeAt(e-1),i=1e5,n=!1;t!==a.charCodeAt(0);){if(t++,t===No&&t++,t===Wl&&t++,t>_0){if(n)throw"Bad character: "+a;t=Eg,n=!0}i+=1e5}return i}function nj(a,e){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var t=X7.charCodeAt(e-1),i=0,n=!1;t!==a.charCodeAt(0);){if(t++,t===No&&t++,t===Wl&&t++,t>h0){if(n)throw"Bad character: "+a;t=Eg,n=!0}i+=1e5}return i}function rj(a){var e;switch(a){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+a}function mf(a,e,t){if(!(this instanceof mf))return new mf(a,e,t);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if(typeof a=="object")this.x=a.x,this.y=a.y,this.z=a.z||0;else if(typeof a=="string"&&typeof e>"u"){var i=a.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=a,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}mf.fromMGRS=function(a){return new mf(Y7(a))};mf.prototype.toMGRS=function(a){return q7([this.x,this.y],a)};var sj=1,oj=.25,jR=.046875,$R=.01953125,JR=.01068115234375,lj=.75,uj=.46875,cj=.013020833333333334,dj=.007120768229166667,hj=.3645833333333333,_j=.005696614583333333,mj=.3076171875;function Y5(a){var e=[];e[0]=sj-a*(oj+a*(jR+a*($R+a*JR))),e[1]=a*(lj-a*(jR+a*($R+a*JR)));var t=a*a;return e[2]=t*(uj-a*(cj+a*dj)),t*=a,e[3]=t*(hj-a*_j),e[4]=t*a*mj,e}function Wf(a,e,t,i){return t*=e,e*=e,i[0]*a-t*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var pj=20;function K5(a,e,t){for(var i=1/(1-e),n=a,s=pj;s;--s){var r=Math.sin(n),l=1-e*r*r;if(l=(Wf(n,r,Math.cos(n),t)-a)*(l*Math.sqrt(l))*i,n-=l,Math.abs(l)<ia)return n}return n}function gj(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Y5(this.es),this.ml0=Wf(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function fj(a){var e=a.x,t=a.y,i=sa(e-this.long0),n,s,r,l=Math.sin(t),u=Math.cos(t);if(this.es){var m=u*i,f=Math.pow(m,2),v=this.ep2*Math.pow(u,2),w=Math.pow(v,2),S=Math.abs(u)>ia?Math.tan(t):0,T=Math.pow(S,2),M=Math.pow(T,2);n=1-this.es*Math.pow(l,2),m=m/Math.sqrt(n);var G=Wf(t,l,u,this.en);s=this.a*(this.k0*m*(1+f/6*(1-T+v+f/20*(5-18*T+M+14*v-58*T*v+f/42*(61+179*M-M*T-479*T)))))+this.x0,r=this.a*(this.k0*(G-this.ml0+l*i*m/2*(1+f/12*(5-T+9*v+4*w+f/30*(61+M-58*T+270*v-330*T*v+f/56*(1385+543*M-M*T-3111*T))))))+this.y0}else{var d=u*Math.sin(i);if(Math.abs(Math.abs(d)-1)<ia)return 93;if(s=.5*this.a*this.k0*Math.log((1+d)/(1-d))+this.x0,r=u*Math.cos(i)/Math.sqrt(1-Math.pow(d,2)),d=Math.abs(r),d>=1){if(d-1>ia)return 93;r=0}else r=Math.acos(r);t<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return a.x=s,a.y=r,a}function yj(a){var e,t,i,n,s=(a.x-this.x0)*(1/this.a),r=(a.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+r/this.k0,t=K5(e,this.es,this.en),Math.abs(t)<kt){var f=Math.sin(t),v=Math.cos(t),w=Math.abs(v)>ia?Math.tan(t):0,S=this.ep2*Math.pow(v,2),T=Math.pow(S,2),M=Math.pow(w,2),G=Math.pow(M,2);e=1-this.es*Math.pow(f,2);var P=s*Math.sqrt(e)/this.k0,F=Math.pow(P,2);e=e*w,i=t-e*F/(1-this.es)*.5*(1-F/12*(5+3*M-9*S*M+S-4*T-F/30*(61+90*M-252*S*M+45*G+46*S-F/56*(1385+3633*M+4095*G+1574*G*M)))),n=sa(this.long0+P*(1-F/6*(1+2*M+S-F/20*(5+28*M+24*G+8*S*M+6*S-F/42*(61+662*M+1320*G+720*G*M))))/v)}else i=kt*$1(r),n=0;else{var l=Math.exp(s/this.k0),u=.5*(l-1/l),d=this.lat0+r/this.k0,m=Math.cos(d);e=Math.sqrt((1-Math.pow(m,2))/(1+Math.pow(u,2))),i=Math.asin(e),r<0&&(i=-i),u===0&&m===0?n=0:n=sa(Math.atan2(u,m)+this.long0)}return a.x=n,a.y=i,a}var bj=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Z2={init:gj,forward:fj,inverse:yj,names:bj};function $7(a){var e=Math.exp(a);return e=(e-1/e)/2,e}function Xo(a,e){a=Math.abs(a),e=Math.abs(e);var t=Math.max(a,e),i=Math.min(a,e)/(t||1);return t*Math.sqrt(1+Math.pow(i,2))}function vj(a){var e=1+a,t=e-1;return t===0?a:a*Math.log(e)/t}function xj(a){var e=Math.abs(a);return e=vj(e*(1+e/(Xo(1,e)+1))),a<0?-e:e}function j5(a,e){for(var t=2*Math.cos(2*e),i=a.length-1,n=a[i],s=0,r;--i>=0;)r=-s+t*n+a[i],s=n,n=r;return e+r*Math.sin(2*e)}function wj(a,e){for(var t=2*Math.cos(e),i=a.length-1,n=a[i],s=0,r;--i>=0;)r=-s+t*n+a[i],s=n,n=r;return Math.sin(e)*r}function Ij(a){var e=Math.exp(a);return e=(e+1/e)/2,e}function J7(a,e,t){for(var i=Math.sin(e),n=Math.cos(e),s=$7(t),r=Ij(t),l=2*n*r,u=-2*i*s,d=a.length-1,m=a[d],f=0,v=0,w=0,S,T;--d>=0;)S=v,T=f,v=m,f=w,m=-S+l*v-u*f+a[d],w=-T+u*v+l*f;return l=i*r,u=n*s,[l*m-u*w,l*w+u*m]}function Cj(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Z2.init.apply(this),this.forward=Z2.forward,this.inverse=Z2.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var a=this.es/(1+Math.sqrt(1-this.es)),e=a/(2-a),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var i=j5(this.cbg,this.lat0);this.Zb=-this.Qn*(i+wj(this.gtu,2*i))}function Sj(a){var e=sa(a.x-this.long0),t=a.y;t=j5(this.cbg,t);var i=Math.sin(t),n=Math.cos(t),s=Math.sin(e),r=Math.cos(e);t=Math.atan2(i,r*n),e=Math.atan2(s*n,Xo(i,n*r)),e=xj(Math.tan(e));var l=J7(this.gtu,2*t,2*e);t=t+l[0],e=e+l[1];var u,d;return Math.abs(e)<=2.623395162778?(u=this.a*(this.Qn*e)+this.x0,d=this.a*(this.Qn*t+this.Zb)+this.y0):(u=1/0,d=1/0),a.x=u,a.y=d,a}function Aj(a){var e=(a.x-this.x0)*(1/this.a),t=(a.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var i,n;if(Math.abs(e)<=2.623395162778){var s=J7(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan($7(e));var r=Math.sin(t),l=Math.cos(t),u=Math.sin(e),d=Math.cos(e);t=Math.atan2(r*d,Xo(u,d*l)),e=Math.atan2(u,d*l),i=sa(e+this.long0),n=j5(this.cgb,t)}else i=1/0,n=1/0;return a.x=i,a.y=n,a}var Tj=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const z2={init:Cj,forward:Sj,inverse:Aj,names:Tj};function Ej(a,e){if(a===void 0){if(a=Math.floor((sa(e)+Math.PI)*30/Math.PI)+1,a<0)return 0;if(a>60)return 60}return a}var Mj="etmerc";function Lj(){var a=Ej(this.zone,this.long0);if(a===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(a)-183)*As,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,z2.init.apply(this),this.forward=z2.forward,this.inverse=z2.inverse}var Rj=["Universal Transverse Mercator System","utm"];const kj={init:Lj,names:Rj,dependsOn:Mj};function $5(a,e){return Math.pow((1-a)/(1+a),e)}var Wj=20;function Gj(){var a=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+cn)/(Math.pow(Math.tan(.5*this.lat0+cn),this.C)*$5(this.e*a,this.ratexp))}function Oj(a){var e=a.x,t=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+cn),this.C)*$5(this.e*Math.sin(t),this.ratexp))-kt,a.x=this.C*e,a}function Pj(a){for(var e=1e-14,t=a.x/this.C,i=a.y,n=Math.pow(Math.tan(.5*i+cn)/this.K,1/this.C),s=Wj;s>0&&(i=2*Math.atan(n*$5(this.e*Math.sin(a.y),-.5*this.e))-kt,!(Math.abs(i-a.y)<e));--s)a.y=i;return s?(a.x=t,a.y=i,a):null}var Bj=["gauss"];const J5={init:Gj,forward:Oj,inverse:Pj,names:Bj};function Nj(){J5.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Fj(a){var e,t,i,n;return a.x=sa(a.x-this.long0),J5.forward.apply(this,[a]),e=Math.sin(a.y),t=Math.cos(a.y),i=Math.cos(a.x),n=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*i),a.x=n*t*Math.sin(a.x),a.y=n*(this.cosc0*e-this.sinc0*t*i),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a}function Dj(a){var e,t,i,n,s;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,s=Xo(a.x,a.y)){var r=2*Math.atan2(s,this.R2);e=Math.sin(r),t=Math.cos(r),n=Math.asin(t*this.sinc0+a.y*e*this.cosc0/s),i=Math.atan2(a.x*e,s*this.cosc0*t-a.y*this.sinc0*e)}else n=this.phic0,i=0;return a.x=i,a.y=n,J5.inverse.apply(this,[a]),a.x=sa(a.x+this.long0),a}var Vj=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Zj={init:Nj,forward:Fj,inverse:Dj,names:Vj};function zj(a,e,t){return e*=t,Math.tan(.5*(kt+a))*Math.pow((1-e)/(1+e),.5*t)}function Uj(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ia&&(this.k0=.5*(1+$1(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ia&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ia&&Math.abs(Math.cos(this.lat_ts))>ia&&(this.k0=.5*this.cons*Ic(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/bu(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ic(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-kt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Hj(a){var e=a.x,t=a.y,i=Math.sin(t),n=Math.cos(t),s,r,l,u,d,m,f=sa(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=ia&&Math.abs(t+this.lat0)<=ia?(a.x=NaN,a.y=NaN,a):this.sphere?(s=2*this.k0/(1+this.sinlat0*i+this.coslat0*n*Math.cos(f)),a.x=this.a*s*n*Math.sin(f)+this.x0,a.y=this.a*s*(this.coslat0*i-this.sinlat0*n*Math.cos(f))+this.y0,a):(r=2*Math.atan(this.ssfn_(t,i,this.e))-kt,u=Math.cos(r),l=Math.sin(r),Math.abs(this.coslat0)<=ia?(d=bu(this.e,t*this.con,this.con*i),m=2*this.a*this.k0*d/this.cons,a.x=this.x0+m*Math.sin(e-this.long0),a.y=this.y0-this.con*m*Math.cos(e-this.long0),a):(Math.abs(this.sinlat0)<ia?(s=2*this.a*this.k0/(1+u*Math.cos(f)),a.y=s*l):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*u*Math.cos(f))),a.y=s*(this.cosX0*l-this.sinX0*u*Math.cos(f))+this.y0),a.x=s*u*Math.sin(f)+this.x0,a))}function Xj(a){a.x-=this.x0,a.y-=this.y0;var e,t,i,n,s,r=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var l=2*Math.atan(r/(2*this.a*this.k0));return e=this.long0,t=this.lat0,r<=ia?(a.x=e,a.y=t,a):(t=Math.asin(Math.cos(l)*this.sinlat0+a.y*Math.sin(l)*this.coslat0/r),Math.abs(this.coslat0)<ia?this.lat0>0?e=sa(this.long0+Math.atan2(a.x,-1*a.y)):e=sa(this.long0+Math.atan2(a.x,a.y)):e=sa(this.long0+Math.atan2(a.x*Math.sin(l),r*this.coslat0*Math.cos(l)-a.y*this.sinlat0*Math.sin(l))),a.x=e,a.y=t,a)}else if(Math.abs(this.coslat0)<=ia){if(r<=ia)return t=this.lat0,e=this.long0,a.x=e,a.y=t,a;a.x*=this.con,a.y*=this.con,i=r*this.cons/(2*this.a*this.k0),t=this.con*S1(this.e,i),e=this.con*sa(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else n=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,r<=ia?s=this.X0:(s=Math.asin(Math.cos(n)*this.sinX0+a.y*Math.sin(n)*this.cosX0/r),e=sa(this.long0+Math.atan2(a.x*Math.sin(n),r*this.cosX0*Math.cos(n)-a.y*this.sinX0*Math.sin(n)))),t=-1*S1(this.e,Math.tan(.5*(kt+s)));return a.x=e,a.y=t,a}var qj=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const Yj={init:Uj,forward:Hj,inverse:Xj,names:qj,ssfn_:zj};function Kj(){var a=this.lat0;this.lambda0=this.long0;var e=Math.sin(a),t=this.a,i=this.rf,n=1/i,s=2*n-Math.pow(n,2),r=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(e/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),u=Math.log(Math.tan(Math.PI/4+a/2)),d=Math.log((1+r*e)/(1-r*e));this.K=l-this.alpha*u+this.alpha*r/2*d}function jj(a){var e=Math.log(Math.tan(Math.PI/4-a.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),i=-this.alpha*(e+t)+this.K,n=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(a.x-this.lambda0),r=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(s))),l=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(s));return a.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,a.x=this.R*r+this.x0,a}function $j(a){for(var e=a.x-this.x0,t=a.y-this.y0,i=e/this.R,n=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i)),r=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n))),l=this.lambda0+r/this.alpha,u=0,d=s,m=-1e3,f=0;Math.abs(d-m)>1e-7;){if(++f>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(d))/2)),m=d,d=2*Math.atan(Math.exp(u))-Math.PI/2}return a.x=l,a.y=d,a}var Jj=["somerc"];const Qj={init:Kj,forward:jj,inverse:$j,names:Jj};var bg=1e-7;function e$(a){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof a.PROJECTION=="object"?Object.keys(a.PROJECTION)[0]:a.PROJECTION;return"no_uoff"in a||"no_off"in a||e.indexOf(t)!==-1}function t$(){var a,e,t,i,n,s,r,l,u,d,m=0,f,v=0,w=0,S=0,T=0,M=0,G=0;this.no_off=e$(this),this.no_rot="no_rot"in this;var P=!1;"alpha"in this&&(P=!0);var F=!1;if("rectified_grid_angle"in this&&(F=!0),P&&(G=this.alpha),F&&(m=this.rectified_grid_angle*As),P||F)v=this.longc;else if(w=this.long1,T=this.lat1,S=this.long2,M=this.lat2,Math.abs(T-M)<=bg||(a=Math.abs(T))<=bg||Math.abs(a-kt)<=bg||Math.abs(Math.abs(this.lat0)-kt)<=bg||Math.abs(Math.abs(M)-kt)<=bg)throw new Error;var N=1-this.es;e=Math.sqrt(N),Math.abs(this.lat0)>ia?(l=Math.sin(this.lat0),t=Math.cos(this.lat0),a=1-this.es*l*l,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/N),this.A=this.B*this.k0*e/a,i=this.B*e/(t*Math.sqrt(a)),n=i*i-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=i,this.E*=Math.pow(bu(this.e,this.lat0,l),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=n=1),P||F?(P?(f=Math.asin(Math.sin(G)/i),F||(m=G)):(f=m,G=Math.asin(i*Math.sin(f))),this.lam0=v-Math.asin(.5*(n-1/n)*Math.tan(f))/this.B):(s=Math.pow(bu(this.e,T,Math.sin(T)),this.B),r=Math.pow(bu(this.e,M,Math.sin(M)),this.B),n=this.E/s,u=(r-s)/(r+s),d=this.E*this.E,d=(d-r*s)/(d+r*s),a=w-S,a<-Math.pi?S-=I1:a>Math.pi&&(S+=I1),this.lam0=sa(.5*(w+S)-Math.atan(d*Math.tan(.5*this.B*(w-S))/u)/this.B),f=Math.atan(2*Math.sin(this.B*sa(w-this.lam0))/(n-1/n)),m=G=Math.asin(i*Math.sin(f))),this.singam=Math.sin(f),this.cosgam=Math.cos(f),this.sinrot=Math.sin(m),this.cosrot=Math.cos(m),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(G))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*f,this.v_pole_n=this.ArB*Math.log(Math.tan(cn-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(cn+n))}function a$(a){var e={},t,i,n,s,r,l,u,d;if(a.x=a.x-this.lam0,Math.abs(Math.abs(a.y)-kt)>ia){if(r=this.E/Math.pow(bu(this.e,a.y,Math.sin(a.y)),this.B),l=1/r,t=.5*(r-l),i=.5*(r+l),s=Math.sin(this.B*a.x),n=(t*this.singam-s*this.cosgam)/i,Math.abs(Math.abs(n)-1)<ia)throw new Error;d=.5*this.ArB*Math.log((1-n)/(1+n)),l=Math.cos(this.B*a.x),Math.abs(l)<bg?u=this.A*a.x:u=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,l)}else d=a.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*a.y;return this.no_rot?(e.x=u,e.y=d):(u-=this.u_0,e.x=d*this.cosrot+u*this.sinrot,e.y=u*this.cosrot-d*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function i$(a){var e,t,i,n,s,r,l,u={};if(a.x=(a.x-this.x0)*(1/this.a),a.y=(a.y-this.y0)*(1/this.a),this.no_rot?(t=a.y,e=a.x):(t=a.x*this.cosrot-a.y*this.sinrot,e=a.y*this.cosrot+a.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*t),n=.5*(i-1/i),s=.5*(i+1/i),r=Math.sin(this.BrA*e),l=(r*this.cosgam+n*this.singam)/s,Math.abs(Math.abs(l)-1)<ia)u.x=0,u.y=l<0?-kt:kt;else{if(u.y=this.E/Math.sqrt((1+l)/(1-l)),u.y=S1(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(n*this.cosgam-r*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u}var n$=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const r$={init:t$,forward:a$,inverse:i$,names:n$};function s$(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ia)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),i=Ic(this.e,e,t),n=bu(this.e,this.lat1,e),s=Math.sin(this.lat2),r=Math.cos(this.lat2),l=Ic(this.e,s,r),u=bu(this.e,this.lat2,s),d=bu(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ia?this.ns=Math.log(i/l)/Math.log(n/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(d,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function o$(a){var e=a.x,t=a.y;Math.abs(2*Math.abs(t)-Math.PI)<=ia&&(t=$1(t)*(kt-2*ia));var i=Math.abs(Math.abs(t)-kt),n,s;if(i>ia)n=bu(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(i=t*this.ns,i<=0)return null;s=0}var r=this.ns*sa(e-this.long0);return a.x=this.k0*(s*Math.sin(r))+this.x0,a.y=this.k0*(this.rh-s*Math.cos(r))+this.y0,a}function l$(a){var e,t,i,n,s,r=(a.x-this.x0)/this.k0,l=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(r*r+l*l),t=1):(e=-Math.sqrt(r*r+l*l),t=-1);var u=0;if(e!==0&&(u=Math.atan2(t*r,t*l)),e!==0||this.ns>0){if(t=1/this.ns,i=Math.pow(e/(this.a*this.f0),t),n=S1(this.e,i),n===-9999)return null}else n=-kt;return s=sa(u/this.ns+this.long0),a.x=s,a.y=n,a}var u$=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const c$={init:s$,forward:o$,inverse:l$,names:u$};function d$(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function h$(a){var e,t,i,n,s,r,l,u=a.x,d=a.y,m=sa(u-this.long0);return e=Math.pow((1+this.e*Math.sin(d))/(1-this.e*Math.sin(d)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(d/2+this.s45),this.alfa)/e)-this.s45),i=-m*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(i)),s=Math.asin(Math.cos(t)*Math.sin(i)/Math.cos(n)),r=this.n*s,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),a.y=l*Math.cos(r)/1,a.x=l*Math.sin(r)/1,this.czech||(a.y*=-1,a.x*=-1),a}function _$(a){var e,t,i,n,s,r,l,u,d=a.x;a.x=a.y,a.y=d,this.czech||(a.y*=-1,a.x*=-1),r=Math.sqrt(a.x*a.x+a.y*a.y),s=Math.atan2(a.y,a.x),n=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),t=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(e)),a.x=this.long0-t/this.alfa,l=e,u=0;var m=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-a.y)<1e-10&&(u=1),l=a.y,m+=1;while(u===0&&m<15);return m>=15?null:a}var m$=["Krovak","krovak"];const p$={init:d$,forward:h$,inverse:_$,names:m$};function yo(a,e,t,i,n){return a*n-e*Math.sin(2*n)+t*Math.sin(4*n)-i*Math.sin(6*n)}function J1(a){return 1-.25*a*(1+a/16*(3+1.25*a))}function Q1(a){return .375*a*(1+.25*a*(1+.46875*a))}function eb(a){return .05859375*a*a*(1+.75*a)}function tb(a){return a*a*a*(35/3072)}function pf(a,e,t){var i=e*t;return a/Math.sqrt(1-i*i)}function o_(a){return Math.abs(a)<kt?a:a-$1(a)*Math.PI}function Ux(a,e,t,i,n){var s,r;s=a/e;for(var l=0;l<15;l++)if(r=(a-(e*s-t*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*i*Math.cos(4*s)-6*n*Math.cos(6*s)),s+=r,Math.abs(r)<=1e-10)return s;return NaN}function g$(){this.sphere||(this.e0=J1(this.es),this.e1=Q1(this.es),this.e2=eb(this.es),this.e3=tb(this.es),this.ml0=this.a*yo(this.e0,this.e1,this.e2,this.e3,this.lat0))}function f$(a){var e,t,i=a.x,n=a.y;if(i=sa(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(i)),t=this.a*(Math.atan2(Math.tan(n),Math.cos(i))-this.lat0);else{var s=Math.sin(n),r=Math.cos(n),l=pf(this.a,this.e,s),u=Math.tan(n)*Math.tan(n),d=i*Math.cos(n),m=d*d,f=this.es*r*r/(1-this.es),v=this.a*yo(this.e0,this.e1,this.e2,this.e3,n);e=l*d*(1-m*u*(1/6-(8-u+8*f)*m/120)),t=v-this.ml0+l*s/r*m*(.5+(5-u+6*f)*m/24)}return a.x=e+this.x0,a.y=t+this.y0,a}function y$(a){a.x-=this.x0,a.y-=this.y0;var e=a.x/this.a,t=a.y/this.a,i,n;if(this.sphere){var s=t+this.lat0;i=Math.asin(Math.sin(s)*Math.cos(e)),n=Math.atan2(Math.tan(e),Math.cos(s))}else{var r=this.ml0/this.a+t,l=Ux(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-kt)<=ia)return a.x=this.long0,a.y=kt,t<0&&(a.y*=-1),a;var u=pf(this.a,this.e,Math.sin(l)),d=u*u*u/this.a/this.a*(1-this.es),m=Math.pow(Math.tan(l),2),f=e*this.a/u,v=f*f;i=l-u*Math.tan(l)/d*f*f*(.5-(1+3*m)*f*f/24),n=f*(1-v*(m/3+(1+3*m)*m*v/15))/Math.cos(l)}return a.x=sa(n+this.long0),a.y=o_(i),a}var b$=["Cassini","Cassini_Soldner","cass"];const v$={init:g$,forward:f$,inverse:y$,names:b$};function Uh(a,e){var t;return a>1e-7?(t=a*e,(1-a*a)*(e/(1-t*t)-.5/a*Math.log((1-t)/(1+t)))):2*e}var x$=1,w$=2,I$=3,C$=4;function S$(){var a=Math.abs(this.lat0);if(Math.abs(a-kt)<ia?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<ia?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Uh(this.e,1),this.mmf=.5/(1-this.es),this.apa=G$(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Uh(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function A$(a){var e,t,i,n,s,r,l,u,d,m,f=a.x,v=a.y;if(f=sa(f-this.long0),this.sphere){if(s=Math.sin(v),m=Math.cos(v),i=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+m*i:1+this.sinph0*s+this.cosph0*m*i,t<=ia)return null;t=Math.sqrt(2/t),e=t*m*Math.sin(f),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*m*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(v+this.lat0)<ia)return null;t=cn-v*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(f),t*=i}}else{switch(l=0,u=0,d=0,i=Math.cos(f),n=Math.sin(f),s=Math.sin(v),r=Uh(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=r/this.qp,u=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:d=1+this.sinb1*l+this.cosb1*u*i;break;case this.EQUIT:d=1+u*i;break;case this.N_POLE:d=kt+v,r=this.qp-r;break;case this.S_POLE:d=v-kt,r=this.qp+r;break}if(Math.abs(d)<ia)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),this.mode===this.OBLIQ?t=this.ymf*d*(this.cosb1*l-this.sinb1*u*i):t=(d=Math.sqrt(2/(1+u*i)))*l*this.ymf,e=this.xmf*d*u*n;break;case this.N_POLE:case this.S_POLE:r>=0?(e=(d=Math.sqrt(r))*n,t=i*(this.mode===this.S_POLE?d:-d)):e=t=0;break}}return a.x=this.a*e+this.x0,a.y=this.a*t+this.y0,a}function T$(a){a.x-=this.x0,a.y-=this.y0;var e=a.x/this.a,t=a.y/this.a,i,n,s,r,l,u,d;if(this.sphere){var m=0,f,v=0;if(f=Math.sqrt(e*e+t*t),n=f*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(v=Math.sin(n),m=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(f)<=ia?0:Math.asin(t*v/f),e*=v,t=m*f;break;case this.OBLIQ:n=Math.abs(f)<=ia?this.lat0:Math.asin(m*this.sinph0+t*v*this.cosph0/f),e*=v*this.cosph0,t=(m-Math.sin(n)*this.sinph0)*f;break;case this.N_POLE:t=-t,n=kt-n;break;case this.S_POLE:n-=kt;break}i=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(d=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,u=Math.sqrt(e*e+t*t),u<ia)return a.x=this.long0,a.y=this.lat0,a;r=2*Math.asin(.5*u/this.rq),s=Math.cos(r),e*=r=Math.sin(r),this.mode===this.OBLIQ?(d=s*this.sinb1+t*r*this.cosb1/u,l=this.qp*d,t=u*this.cosb1*s-t*this.sinb1*r):(d=t*r/u,l=this.qp*d,t=u*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),l=e*e+t*t,!l)return a.x=this.long0,a.y=this.lat0,a;d=1-l/this.qp,this.mode===this.S_POLE&&(d=-d)}i=Math.atan2(e,t),n=O$(Math.asin(d),this.apa)}return a.x=sa(this.long0+i),a.y=n,a}var E$=.3333333333333333,M$=.17222222222222222,L$=.10257936507936508,R$=.06388888888888888,k$=.0664021164021164,W$=.016415012942191543;function G$(a){var e,t=[];return t[0]=a*E$,e=a*a,t[0]+=e*M$,t[1]=e*R$,e*=a,t[0]+=e*L$,t[1]+=e*k$,t[2]=e*W$,t}function O$(a,e){var t=a+a;return a+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var P$=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const B$={init:S$,forward:A$,inverse:T$,names:P$,S_POLE:x$,N_POLE:w$,EQUIT:I$,OBLIQ:C$};function Jh(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)}function N$(){Math.abs(this.lat1+this.lat2)<ia||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ic(this.e3,this.sin_po,this.cos_po),this.qs1=Uh(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ic(this.e3,this.sin_po,this.cos_po),this.qs2=Uh(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Uh(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ia?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function F$(a){var e=a.x,t=a.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var i=Uh(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*sa(e-this.long0),r=n*Math.sin(s)+this.x0,l=this.rh-n*Math.cos(s)+this.y0;return a.x=r,a.y=l,a}function D$(a){var e,t,i,n,s,r;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(e=Math.sqrt(a.x*a.x+a.y*a.y),i=1):(e=-Math.sqrt(a.x*a.x+a.y*a.y),i=-1),n=0,e!==0&&(n=Math.atan2(i*a.x,i*a.y)),i=e*this.ns0/this.a,this.sphere?r=Math.asin((this.c-i*i)/(2*this.ns0)):(t=(this.c-i*i)/this.ns0,r=this.phi1z(this.e3,t)),s=sa(n/this.ns0+this.long0),a.x=s,a.y=r,a}function V$(a,e){var t,i,n,s,r,l=Jh(.5*e);if(a<ia)return l;for(var u=a*a,d=1;d<=25;d++)if(t=Math.sin(l),i=Math.cos(l),n=a*t,s=1-n*n,r=.5*s*s/i*(e/(1-u)-t/s+.5/a*Math.log((1-n)/(1+n))),l=l+r,Math.abs(r)<=1e-7)return l;return null}var Z$=["Albers_Conic_Equal_Area","Albers","aea"];const z$={init:N$,forward:F$,inverse:D$,names:Z$,phi1z:V$};function U$(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function H$(a){var e,t,i,n,s,r,l,u,d=a.x,m=a.y;return i=sa(d-this.long0),e=Math.sin(m),t=Math.cos(m),n=Math.cos(i),r=this.sin_p14*e+this.cos_p14*t*n,s=1,r>0||Math.abs(r)<=ia?(l=this.x0+this.a*s*t*Math.sin(i)/r,u=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*n)/r):(l=this.x0+this.infinity_dist*t*Math.sin(i),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*n)),a.x=l,a.y=u,a}function X$(a){var e,t,i,n,s,r;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(e=Math.sqrt(a.x*a.x+a.y*a.y))?(n=Math.atan2(e,this.rc),t=Math.sin(n),i=Math.cos(n),r=Jh(i*this.sin_p14+a.y*t*this.cos_p14/e),s=Math.atan2(a.x*t,e*this.cos_p14*i-a.y*this.sin_p14*t),s=sa(this.long0+s)):(r=this.phic0,s=0),a.x=s,a.y=r,a}var q$=["gnom"];const Y$={init:U$,forward:H$,inverse:X$,names:q$};function K$(a,e){var t=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*kt:kt;for(var i=Math.asin(.5*e),n,s,r,l,u=0;u<30;u++)if(s=Math.sin(i),r=Math.cos(i),l=a*s,n=Math.pow(1-l*l,2)/(2*r)*(e/(1-a*a)-s/(1-l*l)+.5/a*Math.log((1-l)/(1+l))),i+=n,Math.abs(n)<=1e-10)return i;return NaN}function j$(){this.sphere||(this.k0=Ic(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function $$(a){var e=a.x,t=a.y,i,n,s=sa(e-this.long0);if(this.sphere)i=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var r=Uh(this.e,Math.sin(t));i=this.x0+this.a*this.k0*s,n=this.y0+this.a*r*.5/this.k0}return a.x=i,a.y=n,a}function J$(a){a.x-=this.x0,a.y-=this.y0;var e,t;return this.sphere?(e=sa(this.long0+a.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(t=K$(this.e,2*a.y*this.k0/this.a),e=sa(this.long0+a.x/(this.a*this.k0))),a.x=e,a.y=t,a}var Q$=["cea"];const eJ={init:j$,forward:$$,inverse:J$,names:Q$};function tJ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function aJ(a){var e=a.x,t=a.y,i=sa(e-this.long0),n=o_(t-this.lat0);return a.x=this.x0+this.a*i*this.rc,a.y=this.y0+this.a*n,a}function iJ(a){var e=a.x,t=a.y;return a.x=sa(this.long0+(e-this.x0)/(this.a*this.rc)),a.y=o_(this.lat0+(t-this.y0)/this.a),a}var nJ=["Equirectangular","Equidistant_Cylindrical","eqc"];const rJ={init:tJ,forward:aJ,inverse:iJ,names:nJ};var QR=20;function sJ(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=J1(this.es),this.e1=Q1(this.es),this.e2=eb(this.es),this.e3=tb(this.es),this.ml0=this.a*yo(this.e0,this.e1,this.e2,this.e3,this.lat0)}function oJ(a){var e=a.x,t=a.y,i,n,s,r=sa(e-this.long0);if(s=r*Math.sin(t),this.sphere)Math.abs(t)<=ia?(i=this.a*r,n=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(t),n=this.a*(o_(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=ia)i=this.a*r,n=-1*this.ml0;else{var l=pf(this.a,this.e,Math.sin(t))/Math.tan(t);i=l*Math.sin(s),n=this.a*yo(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+l*(1-Math.cos(s))}return a.x=i+this.x0,a.y=n+this.y0,a}function lJ(a){var e,t,i,n,s,r,l,u,d;if(i=a.x-this.x0,n=a.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=ia)e=sa(i/this.a+this.long0),t=0;else{r=this.lat0+n/this.a,l=i*i/this.a/this.a+r*r,u=r;var m;for(s=QR;s;--s)if(m=Math.tan(u),d=-1*(r*(u*m+1)-u-.5*(u*u+l)*m)/((u-r)/m-1),u+=d,Math.abs(d)<=ia){t=u;break}e=sa(this.long0+Math.asin(i*Math.tan(u)/this.a)/Math.sin(t))}else if(Math.abs(n+this.ml0)<=ia)t=0,e=sa(this.long0+i/this.a);else{r=(this.ml0+n)/this.a,l=i*i/this.a/this.a+r*r,u=r;var f,v,w,S,T;for(s=QR;s;--s)if(T=this.e*Math.sin(u),f=Math.sqrt(1-T*T)*Math.tan(u),v=this.a*yo(this.e0,this.e1,this.e2,this.e3,u),w=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),S=v/this.a,d=(r*(f*S+1)-S-.5*f*(S*S+l))/(this.es*Math.sin(2*u)*(S*S+l-2*r*S)/(4*f)+(r-S)*(f*w-2/Math.sin(2*u))-w),u-=d,Math.abs(d)<=ia){t=u;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=sa(this.long0+Math.asin(i*f/this.a)/Math.sin(t))}return a.x=e,a.y=t,a}var uJ=["Polyconic","poly"];const cJ={init:sJ,forward:oJ,inverse:lJ,names:uJ};function dJ(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function hJ(a){var e,t=a.x,i=a.y,n=i-this.lat0,s=t-this.long0,r=n/P0*1e-5,l=s,u=1,d=0;for(e=1;e<=10;e++)u=u*r,d=d+this.A[e]*u;var m=d,f=l,v=1,w=0,S,T,M=0,G=0;for(e=1;e<=6;e++)S=v*m-w*f,T=w*m+v*f,v=S,w=T,M=M+this.B_re[e]*v-this.B_im[e]*w,G=G+this.B_im[e]*v+this.B_re[e]*w;return a.x=G*this.a+this.x0,a.y=M*this.a+this.y0,a}function _J(a){var e,t=a.x,i=a.y,n=t-this.x0,s=i-this.y0,r=s/this.a,l=n/this.a,u=1,d=0,m,f,v=0,w=0;for(e=1;e<=6;e++)m=u*r-d*l,f=d*r+u*l,u=m,d=f,v=v+this.C_re[e]*u-this.C_im[e]*d,w=w+this.C_im[e]*u+this.C_re[e]*d;for(var S=0;S<this.iterations;S++){var T=v,M=w,G,P,F=r,N=l;for(e=2;e<=6;e++)G=T*v-M*w,P=M*v+T*w,T=G,M=P,F=F+(e-1)*(this.B_re[e]*T-this.B_im[e]*M),N=N+(e-1)*(this.B_im[e]*T+this.B_re[e]*M);T=1,M=0;var V=this.B_re[1],K=this.B_im[1];for(e=2;e<=6;e++)G=T*v-M*w,P=M*v+T*w,T=G,M=P,V=V+e*(this.B_re[e]*T-this.B_im[e]*M),K=K+e*(this.B_im[e]*T+this.B_re[e]*M);var te=V*V+K*K;v=(F*V+N*K)/te,w=(N*V-F*K)/te}var J=v,ne=w,se=1,de=0;for(e=1;e<=9;e++)se=se*J,de=de+this.D[e]*se;var _e=this.lat0+de*P0*1e5,Se=this.long0+ne;return a.x=Se,a.y=_e,a}var mJ=["New_Zealand_Map_Grid","nzmg"];const pJ={init:dJ,forward:hJ,inverse:_J,names:mJ};function gJ(){}function fJ(a){var e=a.x,t=a.y,i=sa(e-this.long0),n=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return a.x=n,a.y=s,a}function yJ(a){a.x-=this.x0,a.y-=this.y0;var e=sa(this.long0+a.x/this.a),t=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=e,a.y=t,a}var bJ=["Miller_Cylindrical","mill"];const vJ={init:gJ,forward:fJ,inverse:yJ,names:bJ};var xJ=20;function wJ(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Y5(this.es)}function IJ(a){var e,t,i=a.x,n=a.y;if(i=sa(i-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var s=this.n*Math.sin(n),r=xJ;r;--r){var l=(this.m*n+Math.sin(n)-s)/(this.m+Math.cos(n));if(n-=l,Math.abs(l)<ia)break}e=this.a*this.C_x*i*(this.m+Math.cos(n)),t=this.a*this.C_y*n}else{var u=Math.sin(n),d=Math.cos(n);t=this.a*Wf(n,u,d,this.en),e=this.a*i*d/Math.sqrt(1-this.es*u*u)}return a.x=e,a.y=t,a}function CJ(a){var e,t,i,n;return a.x-=this.x0,i=a.x/this.a,a.y-=this.y0,e=a.y/this.a,this.sphere?(e/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(e))),this.m?e=Jh((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Jh(Math.sin(e)/this.n)),i=sa(i+this.long0),e=o_(e)):(e=K5(a.y/this.a,this.es,this.en),n=Math.abs(e),n<kt?(n=Math.sin(e),t=this.long0+a.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)),i=sa(t)):n-ia<kt&&(i=this.long0)),a.x=i,a.y=e,a}var SJ=["Sinusoidal","sinu"];const AJ={init:wJ,forward:IJ,inverse:CJ,names:SJ};function TJ(){}function EJ(a){for(var e=a.x,t=a.y,i=sa(e-this.long0),n=t,s=Math.PI*Math.sin(t);;){var r=-(n+Math.sin(n)-s)/(1+Math.cos(n));if(n+=r,Math.abs(r)<ia)break}n/=2,Math.PI/2-Math.abs(t)<ia&&(i=0);var l=.900316316158*this.a*i*Math.cos(n)+this.x0,u=1.4142135623731*this.a*Math.sin(n)+this.y0;return a.x=l,a.y=u,a}function MJ(a){var e,t;a.x-=this.x0,a.y-=this.y0,t=a.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var i=sa(this.long0+a.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var n=Math.asin(t);return a.x=i,a.y=n,a}var LJ=["Mollweide","moll"];const RJ={init:TJ,forward:EJ,inverse:MJ,names:LJ};function kJ(){Math.abs(this.lat1+this.lat2)<ia||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=J1(this.es),this.e1=Q1(this.es),this.e2=eb(this.es),this.e3=tb(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ic(this.e,this.sinphi,this.cosphi),this.ml1=yo(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ia?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ic(this.e,this.sinphi,this.cosphi),this.ml2=yo(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=yo(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function WJ(a){var e=a.x,t=a.y,i;if(this.sphere)i=this.a*(this.g-t);else{var n=yo(this.e0,this.e1,this.e2,this.e3,t);i=this.a*(this.g-n)}var s=this.ns*sa(e-this.long0),r=this.x0+i*Math.sin(s),l=this.y0+this.rh-i*Math.cos(s);return a.x=r,a.y=l,a}function GJ(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var e,t,i,n;this.ns>=0?(t=Math.sqrt(a.x*a.x+a.y*a.y),e=1):(t=-Math.sqrt(a.x*a.x+a.y*a.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*a.x,e*a.y)),this.sphere)return n=sa(this.long0+s/this.ns),i=o_(this.g-t/this.a),a.x=n,a.y=i,a;var r=this.g-t/this.a;return i=Ux(r,this.e0,this.e1,this.e2,this.e3),n=sa(this.long0+s/this.ns),a.x=n,a.y=i,a}var OJ=["Equidistant_Conic","eqdc"];const PJ={init:kJ,forward:WJ,inverse:GJ,names:OJ};function BJ(){this.R=this.a}function NJ(a){var e=a.x,t=a.y,i=sa(e-this.long0),n,s;Math.abs(t)<=ia&&(n=this.x0+this.R*i,s=this.y0);var r=Jh(2*Math.abs(t/Math.PI));(Math.abs(i)<=ia||Math.abs(Math.abs(t)-kt)<=ia)&&(n=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*r):s=this.y0+Math.PI*this.R*-Math.tan(.5*r));var l=.5*Math.abs(Math.PI/i-i/Math.PI),u=l*l,d=Math.sin(r),m=Math.cos(r),f=m/(d+m-1),v=f*f,w=f*(2/d-1),S=w*w,T=Math.PI*this.R*(l*(f-S)+Math.sqrt(u*(f-S)*(f-S)-(S+u)*(v-S)))/(S+u);i<0&&(T=-T),n=this.x0+T;var M=u+f;return T=Math.PI*this.R*(w*M-l*Math.sqrt((S+u)*(u+1)-M*M))/(S+u),t>=0?s=this.y0+T:s=this.y0-T,a.x=n,a.y=s,a}function FJ(a){var e,t,i,n,s,r,l,u,d,m,f,v,w;return a.x-=this.x0,a.y-=this.y0,f=Math.PI*this.R,i=a.x/f,n=a.y/f,s=i*i+n*n,r=-Math.abs(n)*(1+s),l=r-2*n*n+i*i,u=-2*r+1+2*n*n+s*s,w=n*n/u+(2*l*l*l/u/u/u-9*r*l/u/u)/27,d=(r-l*l/3/u)/u,m=2*Math.sqrt(-d/3),f=3*w/d/m,Math.abs(f)>1&&(f>=0?f=1:f=-1),v=Math.acos(f)/3,a.y>=0?t=(-m*Math.cos(v+Math.PI/3)-l/3/u)*Math.PI:t=-(-m*Math.cos(v+Math.PI/3)-l/3/u)*Math.PI,Math.abs(i)<ia?e=this.long0:e=sa(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-n*n)+s*s))/2/i),a.x=e,a.y=t,a}var DJ=["Van_der_Grinten_I","VanDerGrinten","vandg"];const VJ={init:BJ,forward:NJ,inverse:FJ,names:DJ};function ZJ(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function zJ(a){var e=a.x,t=a.y,i=Math.sin(a.y),n=Math.cos(a.y),s=sa(e-this.long0),r,l,u,d,m,f,v,w,S,T,M,G,P,F,N,V,K,te,J,ne,se,de,_e;return this.sphere?Math.abs(this.sin_p12-1)<=ia?(a.x=this.x0+this.a*(kt-t)*Math.sin(s),a.y=this.y0-this.a*(kt-t)*Math.cos(s),a):Math.abs(this.sin_p12+1)<=ia?(a.x=this.x0+this.a*(kt+t)*Math.sin(s),a.y=this.y0+this.a*(kt+t)*Math.cos(s),a):(te=this.sin_p12*i+this.cos_p12*n*Math.cos(s),V=Math.acos(te),K=V?V/Math.sin(V):1,a.x=this.x0+this.a*K*n*Math.sin(s),a.y=this.y0+this.a*K*(this.cos_p12*i-this.sin_p12*n*Math.cos(s)),a):(r=J1(this.es),l=Q1(this.es),u=eb(this.es),d=tb(this.es),Math.abs(this.sin_p12-1)<=ia?(m=this.a*yo(r,l,u,d,kt),f=this.a*yo(r,l,u,d,t),a.x=this.x0+(m-f)*Math.sin(s),a.y=this.y0-(m-f)*Math.cos(s),a):Math.abs(this.sin_p12+1)<=ia?(m=this.a*yo(r,l,u,d,kt),f=this.a*yo(r,l,u,d,t),a.x=this.x0+(m+f)*Math.sin(s),a.y=this.y0+(m+f)*Math.cos(s),a):(v=i/n,w=pf(this.a,this.e,this.sin_p12),S=pf(this.a,this.e,i),T=Math.atan((1-this.es)*v+this.es*w*this.sin_p12/(S*n)),M=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(T)-this.sin_p12*Math.cos(s)),M===0?J=Math.asin(this.cos_p12*Math.sin(T)-this.sin_p12*Math.cos(T)):Math.abs(Math.abs(M)-Math.PI)<=ia?J=-Math.asin(this.cos_p12*Math.sin(T)-this.sin_p12*Math.cos(T)):J=Math.asin(Math.sin(s)*Math.cos(T)/Math.sin(M)),G=this.e*this.sin_p12/Math.sqrt(1-this.es),P=this.e*this.cos_p12*Math.cos(M)/Math.sqrt(1-this.es),F=G*P,N=P*P,ne=J*J,se=ne*J,de=se*J,_e=de*J,V=w*J*(1-ne*N*(1-N)/6+se/8*F*(1-2*N)+de/120*(N*(4-7*N)-3*G*G*(1-7*N))-_e/48*F),a.x=this.x0+V*Math.sin(M),a.y=this.y0+V*Math.cos(M),a))}function UJ(a){a.x-=this.x0,a.y-=this.y0;var e,t,i,n,s,r,l,u,d,m,f,v,w,S,T,M,G,P,F,N,V,K,te,J;return this.sphere?(e=Math.sqrt(a.x*a.x+a.y*a.y),e>2*kt*this.a?void 0:(t=e/this.a,i=Math.sin(t),n=Math.cos(t),s=this.long0,Math.abs(e)<=ia?r=this.lat0:(r=Jh(n*this.sin_p12+a.y*i*this.cos_p12/e),l=Math.abs(this.lat0)-kt,Math.abs(l)<=ia?this.lat0>=0?s=sa(this.long0+Math.atan2(a.x,-a.y)):s=sa(this.long0-Math.atan2(-a.x,a.y)):s=sa(this.long0+Math.atan2(a.x*i,e*this.cos_p12*n-a.y*this.sin_p12*i))),a.x=s,a.y=r,a)):(u=J1(this.es),d=Q1(this.es),m=eb(this.es),f=tb(this.es),Math.abs(this.sin_p12-1)<=ia?(v=this.a*yo(u,d,m,f,kt),e=Math.sqrt(a.x*a.x+a.y*a.y),w=v-e,r=Ux(w/this.a,u,d,m,f),s=sa(this.long0+Math.atan2(a.x,-1*a.y)),a.x=s,a.y=r,a):Math.abs(this.sin_p12+1)<=ia?(v=this.a*yo(u,d,m,f,kt),e=Math.sqrt(a.x*a.x+a.y*a.y),w=e-v,r=Ux(w/this.a,u,d,m,f),s=sa(this.long0+Math.atan2(a.x,a.y)),a.x=s,a.y=r,a):(e=Math.sqrt(a.x*a.x+a.y*a.y),M=Math.atan2(a.x,a.y),S=pf(this.a,this.e,this.sin_p12),G=Math.cos(M),P=this.e*this.cos_p12*G,F=-P*P/(1-this.es),N=3*this.es*(1-F)*this.sin_p12*this.cos_p12*G/(1-this.es),V=e/S,K=V-F*(1+F)*Math.pow(V,3)/6-N*(1+3*F)*Math.pow(V,4)/24,te=1-F*K*K/2-V*K*K*K/6,T=Math.asin(this.sin_p12*Math.cos(K)+this.cos_p12*Math.sin(K)*G),s=sa(this.long0+Math.asin(Math.sin(M)*Math.sin(K)/Math.cos(T))),J=Math.sin(T),r=Math.atan2((J-this.es*te*this.sin_p12)*Math.tan(T),J*(1-this.es)),a.x=s,a.y=r,a))}var HJ=["Azimuthal_Equidistant","aeqd"];const XJ={init:ZJ,forward:zJ,inverse:UJ,names:HJ};function qJ(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function YJ(a){var e,t,i,n,s,r,l,u,d=a.x,m=a.y;return i=sa(d-this.long0),e=Math.sin(m),t=Math.cos(m),n=Math.cos(i),r=this.sin_p14*e+this.cos_p14*t*n,s=1,(r>0||Math.abs(r)<=ia)&&(l=this.a*s*t*Math.sin(i),u=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*n)),a.x=l,a.y=u,a}function KJ(a){var e,t,i,n,s,r,l;return a.x-=this.x0,a.y-=this.y0,e=Math.sqrt(a.x*a.x+a.y*a.y),t=Jh(e/this.a),i=Math.sin(t),n=Math.cos(t),r=this.long0,Math.abs(e)<=ia?(l=this.lat0,a.x=r,a.y=l,a):(l=Jh(n*this.sin_p14+a.y*i*this.cos_p14/e),s=Math.abs(this.lat0)-kt,Math.abs(s)<=ia?(this.lat0>=0?r=sa(this.long0+Math.atan2(a.x,-a.y)):r=sa(this.long0-Math.atan2(-a.x,a.y)),a.x=r,a.y=l,a):(r=sa(this.long0+Math.atan2(a.x*i,e*this.cos_p14*n-a.y*this.sin_p14*i)),a.x=r,a.y=l,a))}var jJ=["ortho"];const $J={init:qJ,forward:YJ,inverse:KJ,names:jJ};var or={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},dn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function JJ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=kt-cn/2?this.face=or.TOP:this.lat0<=-(kt-cn/2)?this.face=or.BOTTOM:Math.abs(this.long0)<=cn?this.face=or.FRONT:Math.abs(this.long0)<=kt+cn?this.face=this.long0>0?or.RIGHT:or.LEFT:this.face=or.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function QJ(a){var e={x:0,y:0},t,i,n,s,r,l,u={value:0};if(a.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(a.y)):t=a.y,i=a.x,this.face===or.TOP)s=kt-t,i>=cn&&i<=kt+cn?(u.value=dn.AREA_0,n=i-kt):i>kt+cn||i<=-(kt+cn)?(u.value=dn.AREA_1,n=i>0?i-Lr:i+Lr):i>-(kt+cn)&&i<=-cn?(u.value=dn.AREA_2,n=i+kt):(u.value=dn.AREA_3,n=i);else if(this.face===or.BOTTOM)s=kt+t,i>=cn&&i<=kt+cn?(u.value=dn.AREA_0,n=-i+kt):i<cn&&i>=-cn?(u.value=dn.AREA_1,n=-i):i<-cn&&i>=-(kt+cn)?(u.value=dn.AREA_2,n=-i-kt):(u.value=dn.AREA_3,n=i>0?-i+Lr:-i-Lr);else{var d,m,f,v,w,S,T;this.face===or.RIGHT?i=Xg(i,+kt):this.face===or.BACK?i=Xg(i,+Lr):this.face===or.LEFT&&(i=Xg(i,-kt)),v=Math.sin(t),w=Math.cos(t),S=Math.sin(i),T=Math.cos(i),d=w*T,m=w*S,f=v,this.face===or.FRONT?(s=Math.acos(d),n=Hv(s,f,m,u)):this.face===or.RIGHT?(s=Math.acos(m),n=Hv(s,f,-d,u)):this.face===or.BACK?(s=Math.acos(-d),n=Hv(s,f,-m,u)):this.face===or.LEFT?(s=Math.acos(-m),n=Hv(s,f,d,u)):(s=n=0,u.value=dn.AREA_0)}return l=Math.atan(12/Lr*(n+Math.acos(Math.sin(n)*Math.cos(cn))-kt)),r=Math.sqrt((1-Math.cos(s))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===dn.AREA_1?l+=kt:u.value===dn.AREA_2?l+=Lr:u.value===dn.AREA_3&&(l+=1.5*Lr),e.x=r*Math.cos(l),e.y=r*Math.sin(l),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,a.x=e.x,a.y=e.y,a}function eQ(a){var e={lam:0,phi:0},t,i,n,s,r,l,u,d,m,f={value:0};if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,i=Math.atan(Math.sqrt(a.x*a.x+a.y*a.y)),t=Math.atan2(a.y,a.x),a.x>=0&&a.x>=Math.abs(a.y)?f.value=dn.AREA_0:a.y>=0&&a.y>=Math.abs(a.x)?(f.value=dn.AREA_1,t-=kt):a.x<0&&-a.x>=Math.abs(a.y)?(f.value=dn.AREA_2,t=t<0?t+Lr:t-Lr):(f.value=dn.AREA_3,t+=kt),m=Lr/12*Math.tan(t),r=Math.sin(m)/(Math.cos(m)-1/Math.sqrt(2)),l=Math.atan(r),n=Math.cos(t),s=Math.tan(i),u=1-n*n*s*s*(1-Math.cos(Math.atan(1/Math.cos(l)))),u<-1?u=-1:u>1&&(u=1),this.face===or.TOP)d=Math.acos(u),e.phi=kt-d,f.value===dn.AREA_0?e.lam=l+kt:f.value===dn.AREA_1?e.lam=l<0?l+Lr:l-Lr:f.value===dn.AREA_2?e.lam=l-kt:e.lam=l;else if(this.face===or.BOTTOM)d=Math.acos(u),e.phi=d-kt,f.value===dn.AREA_0?e.lam=-l+kt:f.value===dn.AREA_1?e.lam=-l:f.value===dn.AREA_2?e.lam=-l-kt:e.lam=l<0?-l-Lr:-l+Lr;else{var v,w,S;v=u,m=v*v,m>=1?S=0:S=Math.sqrt(1-m)*Math.sin(l),m+=S*S,m>=1?w=0:w=Math.sqrt(1-m),f.value===dn.AREA_1?(m=w,w=-S,S=m):f.value===dn.AREA_2?(w=-w,S=-S):f.value===dn.AREA_3&&(m=w,w=S,S=-m),this.face===or.RIGHT?(m=v,v=-w,w=m):this.face===or.BACK?(v=-v,w=-w):this.face===or.LEFT&&(m=v,v=w,w=-m),e.phi=Math.acos(-S)-kt,e.lam=Math.atan2(w,v),this.face===or.RIGHT?e.lam=Xg(e.lam,-kt):this.face===or.BACK?e.lam=Xg(e.lam,-Lr):this.face===or.LEFT&&(e.lam=Xg(e.lam,+kt))}if(this.es!==0){var T,M,G;T=e.phi<0?1:0,M=Math.tan(e.phi),G=this.b/Math.sqrt(M*M+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-G*G)/(this.one_minus_f*G)),T&&(e.phi=-e.phi)}return e.lam+=this.long0,a.x=e.lam,a.y=e.phi,a}function Hv(a,e,t,i){var n;return a<ia?(i.value=dn.AREA_0,n=0):(n=Math.atan2(e,t),Math.abs(n)<=cn?i.value=dn.AREA_0:n>cn&&n<=kt+cn?(i.value=dn.AREA_1,n-=kt):n>kt+cn||n<=-(kt+cn)?(i.value=dn.AREA_2,n=n>=0?n-Lr:n+Lr):(i.value=dn.AREA_3,n+=kt)),n}function Xg(a,e){var t=a+e;return t<-Lr?t+=I1:t>+Lr&&(t-=I1),t}var tQ=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const aQ={init:JJ,forward:QJ,inverse:eQ,names:tQ};var bT=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],m0=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Q7=.8487,eG=1.3523,tG=cc/5,iQ=1/tG,Mg=18,Hx=function(a,e){return a[0]+e*(a[1]+e*(a[2]+e*a[3]))},nQ=function(a,e){return a[1]+e*(2*a[2]+e*3*a[3])};function rQ(a,e,t,i){for(var n=e;i;--i){var s=a(n);if(n-=s,Math.abs(s)<t)break}return n}function sQ(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function oQ(a){var e=sa(a.x-this.long0),t=Math.abs(a.y),i=Math.floor(t*tG);i<0?i=0:i>=Mg&&(i=Mg-1),t=cc*(t-iQ*i);var n={x:Hx(bT[i],t)*e,y:Hx(m0[i],t)};return a.y<0&&(n.y=-n.y),n.x=n.x*this.a*Q7+this.x0,n.y=n.y*this.a*eG+this.y0,n}function lQ(a){var e={x:(a.x-this.x0)/(this.a*Q7),y:Math.abs(a.y-this.y0)/(this.a*eG)};if(e.y>=1)e.x/=bT[Mg][0],e.y=a.y<0?-kt:kt;else{var t=Math.floor(e.y*Mg);for(t<0?t=0:t>=Mg&&(t=Mg-1);;)if(m0[t][0]>e.y)--t;else if(m0[t+1][0]<=e.y)++t;else break;var i=m0[t],n=5*(e.y-i[0])/(m0[t+1][0]-i[0]);n=rQ(function(s){return(Hx(i,s)-e.y)/nQ(i,s)},n,ia,100),e.x/=Hx(bT[t],n),e.y=(5*t+n)*As,a.y<0&&(e.y=-e.y)}return e.x=sa(e.x+this.long0),e}var uQ=["Robinson","robin"];const cQ={init:sQ,forward:oQ,inverse:lQ,names:uQ};function dQ(){this.name="geocent"}function hQ(a){var e=Z7(a,this.es,this.a);return e}function _Q(a){var e=z7(a,this.es,this.a,this.b);return e}var mQ=["Geocentric","geocentric","geocent","Geocent"];const pQ={init:dQ,forward:hQ,inverse:_Q,names:mQ};var Zs={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},jy={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function gQ(){if(Object.keys(jy).forEach((function(t){if(typeof this[t]>"u")this[t]=jy[t].def;else{if(jy[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);jy[t].num&&(this[t]=parseFloat(this[t]))}jy[t].degrees&&(this[t]=this[t]*As)}).bind(this)),Math.abs(Math.abs(this.lat0)-kt)<ia?this.mode=this.lat0<0?Zs.S_POLE:Zs.N_POLE:Math.abs(this.lat0)<ia?this.mode=Zs.EQUIT:(this.mode=Zs.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var a=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(a),this.sw=Math.sin(a)}function fQ(a){a.x-=this.long0;var e=Math.sin(a.y),t=Math.cos(a.y),i=Math.cos(a.x),n,s;switch(this.mode){case Zs.OBLIQ:s=this.sinph0*e+this.cosph0*t*i;break;case Zs.EQUIT:s=t*i;break;case Zs.S_POLE:s=-e;break;case Zs.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),n=s*t*Math.sin(a.x),this.mode){case Zs.OBLIQ:s*=this.cosph0*e-this.sinph0*t*i;break;case Zs.EQUIT:s*=e;break;case Zs.N_POLE:s*=-(t*i);break;case Zs.S_POLE:s*=t*i;break}var r,l;return r=s*this.cg+n*this.sg,l=1/(r*this.sw*this.h1+this.cw),n=(n*this.cg-s*this.sg)*this.cw*l,s=r*l,a.x=n*this.a,a.y=s*this.a,a}function yQ(a){a.x/=this.a,a.y/=this.a;var e={x:a.x,y:a.y},t,i,n;n=1/(this.pn1-a.y*this.sw),t=this.pn1*a.x*n,i=this.pn1*a.y*this.cw*n,a.x=t*this.cg+i*this.sg,a.y=i*this.cg-t*this.sg;var s=Xo(a.x,a.y);if(Math.abs(s)<ia)e.x=0,e.y=a.y;else{var r,l;switch(l=1-s*s*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/s+s/this.pn1),r=Math.sqrt(1-l*l),this.mode){case Zs.OBLIQ:e.y=Math.asin(r*this.sinph0+a.y*l*this.cosph0/s),a.y=(r-this.sinph0*Math.sin(e.y))*s,a.x*=l*this.cosph0;break;case Zs.EQUIT:e.y=Math.asin(a.y*l/s),a.y=r*s,a.x*=l;break;case Zs.N_POLE:e.y=Math.asin(r),a.y=-a.y;break;case Zs.S_POLE:e.y=-Math.asin(r);break}e.x=Math.atan2(a.x,a.y)}return a.x=e.x+this.long0,a.y=e.y,a}var bQ=["Tilted_Perspective","tpers"];const vQ={init:gQ,forward:fQ,inverse:yQ,names:bQ};function xQ(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var a=1-this.es,e=1/a;this.radius_p=Math.sqrt(a),this.radius_p2=a,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function wQ(a){var e=a.x,t=a.y,i,n,s,r;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var l=this.radius_p/Xo(this.radius_p*Math.cos(t),Math.sin(t));if(n=l*Math.cos(e)*Math.cos(t),s=l*Math.sin(e)*Math.cos(t),r=l*Math.sin(t),(this.radius_g-n)*n-s*s-r*r*this.radius_p_inv2<0)return a.x=Number.NaN,a.y=Number.NaN,a;i=this.radius_g-n,this.flip_axis?(a.x=this.radius_g_1*Math.atan(s/Xo(r,i)),a.y=this.radius_g_1*Math.atan(r/i)):(a.x=this.radius_g_1*Math.atan(s/i),a.y=this.radius_g_1*Math.atan(r/Xo(s,i)))}else this.shape==="sphere"&&(i=Math.cos(t),n=Math.cos(e)*i,s=Math.sin(e)*i,r=Math.sin(t),i=this.radius_g-n,this.flip_axis?(a.x=this.radius_g_1*Math.atan(s/Xo(r,i)),a.y=this.radius_g_1*Math.atan(r/i)):(a.x=this.radius_g_1*Math.atan(s/i),a.y=this.radius_g_1*Math.atan(r/Xo(s,i))));return a.x=a.x*this.a,a.y=a.y*this.a,a}function IQ(a){var e=-1,t=0,i=0,n,s,r,l;if(a.x=a.x/this.a,a.y=a.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(a.y/this.radius_g_1),t=Math.tan(a.x/this.radius_g_1)*Xo(1,i)):(t=Math.tan(a.x/this.radius_g_1),i=Math.tan(a.y/this.radius_g_1)*Xo(1,t));var u=i/this.radius_p;if(n=t*t+u*u+e*e,s=2*this.radius_g*e,r=s*s-4*n*this.C,r<0)return a.x=Number.NaN,a.y=Number.NaN,a;l=(-s-Math.sqrt(r))/(2*n),e=this.radius_g+l*e,t*=l,i*=l,a.x=Math.atan2(t,e),a.y=Math.atan(i*Math.cos(a.x)/e),a.y=Math.atan(this.radius_p_inv2*Math.tan(a.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(a.y/this.radius_g_1),t=Math.tan(a.x/this.radius_g_1)*Math.sqrt(1+i*i)):(t=Math.tan(a.x/this.radius_g_1),i=Math.tan(a.y/this.radius_g_1)*Math.sqrt(1+t*t)),n=t*t+i*i+e*e,s=2*this.radius_g*e,r=s*s-4*n*this.C,r<0)return a.x=Number.NaN,a.y=Number.NaN,a;l=(-s-Math.sqrt(r))/(2*n),e=this.radius_g+l*e,t*=l,i*=l,a.x=Math.atan2(t,e),a.y=Math.atan(i*Math.cos(a.x)/e)}return a.x=a.x+this.long0,a}var CQ=["Geostationary Satellite View","Geostationary_Satellite","geos"];const SQ={init:xQ,forward:wQ,inverse:IQ,names:CQ};var B0=1.340264,N0=-.081106,F0=893e-6,D0=.003796,Xx=Math.sqrt(3)/2;function AQ(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function TQ(a){var e=sa(a.x-this.long0),t=a.y,i=Math.asin(Xx*Math.sin(t)),n=i*i,s=n*n*n;return a.x=e*Math.cos(i)/(Xx*(B0+3*N0*n+s*(7*F0+9*D0*n))),a.y=i*(B0+N0*n+s*(F0+D0*n)),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a}function EQ(a){a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a;var e=1e-9,t=12,i=a.y,n,s,r,l,u,d;for(d=0;d<t&&(n=i*i,s=n*n*n,r=i*(B0+N0*n+s*(F0+D0*n))-a.y,l=B0+3*N0*n+s*(7*F0+9*D0*n),i-=u=r/l,!(Math.abs(u)<e));++d);return n=i*i,s=n*n*n,a.x=Xx*a.x*(B0+3*N0*n+s*(7*F0+9*D0*n))/Math.cos(i),a.y=Math.asin(Math.sin(i)/Xx),a.x=sa(a.x+this.long0),a}var MQ=["eqearth","Equal Earth","Equal_Earth"];const LQ={init:AQ,forward:TQ,inverse:EQ,names:MQ};var A1=1e-10;function RQ(){var a;if(this.phi1=this.lat1,Math.abs(this.phi1)<A1)throw new Error;this.es?(this.en=Y5(this.es),this.m1=Wf(this.phi1,this.am1=Math.sin(this.phi1),a=Math.cos(this.phi1),this.en),this.am1=a/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=WQ,this.forward=kQ):(Math.abs(this.phi1)+A1>=kt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=OQ,this.forward=GQ)}function kQ(a){var e=sa(a.x-(this.long0||0)),t=a.y,i,n,s;return i=this.am1+this.m1-Wf(t,n=Math.sin(t),s=Math.cos(t),this.en),n=s*e/(i*Math.sqrt(1-this.es*n*n)),a.x=i*Math.sin(n),a.y=this.am1-i*Math.cos(n),a.x=this.a*a.x+(this.x0||0),a.y=this.a*a.y+(this.y0||0),a}function WQ(a){a.x=(a.x-(this.x0||0))/this.a,a.y=(a.y-(this.y0||0))/this.a;var e,t,i,n;if(t=Xo(a.x,a.y=this.am1-a.y),n=K5(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(n))<kt)e=Math.sin(n),i=t*Math.atan2(a.x,a.y)*Math.sqrt(1-this.es*e*e)/Math.cos(n);else if(Math.abs(e-kt)<=A1)i=0;else throw new Error;return a.x=sa(i+(this.long0||0)),a.y=o_(n),a}function GQ(a){var e=sa(a.x-(this.long0||0)),t=a.y,i,n;return n=this.cphi1+this.phi1-t,Math.abs(n)>A1?(a.x=n*Math.sin(i=e*Math.cos(t)/n),a.y=this.cphi1-n*Math.cos(i)):a.x=a.y=0,a.x=this.a*a.x+(this.x0||0),a.y=this.a*a.y+(this.y0||0),a}function OQ(a){a.x=(a.x-(this.x0||0))/this.a,a.y=(a.y-(this.y0||0))/this.a;var e,t,i=Xo(a.x,a.y=this.cphi1-a.y);if(t=this.cphi1+this.phi1-i,Math.abs(t)>kt)throw new Error;return Math.abs(Math.abs(t)-kt)<=A1?e=0:e=i*Math.atan2(a.x,a.y)/Math.cos(t),a.x=sa(e+(this.long0||0)),a.y=o_(t),a}var PQ=["bonne","Bonne (Werner lat_1=90)"];const BQ={init:RQ,names:PQ};function NQ(a){a.Proj.projections.add(Z2),a.Proj.projections.add(z2),a.Proj.projections.add(kj),a.Proj.projections.add(Zj),a.Proj.projections.add(Yj),a.Proj.projections.add(Qj),a.Proj.projections.add(r$),a.Proj.projections.add(c$),a.Proj.projections.add(p$),a.Proj.projections.add(v$),a.Proj.projections.add(B$),a.Proj.projections.add(z$),a.Proj.projections.add(Y$),a.Proj.projections.add(eJ),a.Proj.projections.add(rJ),a.Proj.projections.add(cJ),a.Proj.projections.add(pJ),a.Proj.projections.add(vJ),a.Proj.projections.add(AJ),a.Proj.projections.add(RJ),a.Proj.projections.add(PJ),a.Proj.projections.add(VJ),a.Proj.projections.add(XJ),a.Proj.projections.add($J),a.Proj.projections.add(aQ),a.Proj.projections.add(cQ),a.Proj.projections.add(pQ),a.Proj.projections.add(vQ),a.Proj.projections.add(SQ),a.Proj.projections.add(LQ),a.Proj.projections.add(BQ)}js.defaultDatum="WGS84";js.Proj=gc;js.WGS84=new js.Proj("WGS84");js.Point=mf;js.toPoint=U7;js.defs=_o;js.nadgrid=GK;js.transform=zx;js.mgrs=jK;js.version="__VERSION__";NQ(js);function aG(){var a,e,t;js.defs("EPSG:32632","+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs"),js.defs("EPSG:32631","+proj=utm +zone=31 +datum=WGS84 +units=m +no_defs"),js.defs("EPSG:2169","+proj=tmerc +lat_0=49.83333333333334 +lon_0=6.166666666666667 +k=1 +x_0=80000 +y_0=100000 +ellps=intl +towgs84=-189.681,18.3463,-42.7695,-0.33746,-3.09264,2.53861,0.4598 +units=m +no_defs"),XY(js),(a=Ei("EPSG:32632"))==null||a.setExtent([166021.44,0,833978.55,932900518e-2]),(e=Ei("EPSG:32631"))==null||e.setExtent([166021.44,0,833978.55,932900518e-2]),(t=Ei("EPSG:2169"))==null||t.setExtent([48225.17,56225.6,105842.04,139616.4])}const FQ="main",DQ="root_3d",VQ=-222,ur=Co("config",()=>{const a=Di(),e=Fe(FQ),t=St(()=>{var u;return(u=a.value)==null?void 0:u.themes}),i=St(()=>{var u;return(u=t.value)==null?void 0:u.find(d=>d.name===e.value)}),n=St(()=>{var u;return((u=a.value)==null?void 0:u.background_layers)||[]}),s=St(()=>{var d;const u=(d=t.value)==null?void 0:d.filter(m=>{var f;return((f=m.metadata)==null?void 0:f.ol3d_type)!==void 0});if(u)return{name:DQ,id:VQ,children:u.flatMap(m=>m!=null&&m.children?m.children:m),metadata:{}}});function r(u){a.value=u}function l(u){e.value=decodeURIComponent(u)}return{config:a,themes:t,themeName:e,theme:i,bgLayers:n,layerTrees_3d:s,setTheme:l,setThemes:r}},{}),ZQ=()=>({ogcServers:{"source for config://my_maps?category_id=117":{url:"https://ws.geoportail.lu/mymaps?category_id=117",urlWfs:"https://ws.geoportail.lu/mymaps?category_id=117",type:"mapserver",credential:!1,imageType:"image/png",wfsSupport:!1,isSingleTile:!0,namespace:null,attributes:null},"source for image/jpeg":{url:"https://migration.geoportail.lu/mapserv_proxy?ogcserver=source+for+image%2Fjpeg&cache_version=ddc9f661fc1b496c919d096d89f6f3fb",urlWfs:"https://migration.geoportail.lu/mapserv_proxy?ogcserver=source+for+image%2Fjpeg&cache_version=ddc9f661fc1b496c919d096d89f6f3fb",type:"mapserver",credential:!0,imageType:"image/jpeg",wfsSupport:!1,isSingleTile:!1,namespace:null,attributes:null},"Internal WMS Geoserver":{url:"https://migration.geoportail.lu/ogcproxywms",urlWfs:"https://migration.geoportail.lu/ogcproxywms",type:"geoserver",credential:!1,imageType:"image/png",wfsSupport:!1,isSingleTile:!1,namespace:null,attributes:null},"Internal WMS":{url:"https://migration.geoportail.lu/ogcproxywms",urlWfs:"https://migration.geoportail.lu/ogcproxywms",type:"mapserver",credential:!1,imageType:"image/png",wfsSupport:!1,isSingleTile:!1,namespace:null,attributes:null},"source for image/png":{url:"https://migration.geoportail.lu/mapserv_proxy?ogcserver=source+for+image%2Fpng&cache_version=ddc9f661fc1b496c919d096d89f6f3fb",urlWfs:"https://migration.geoportail.lu/mapserv_proxy?ogcserver=source+for+image%2Fpng&cache_version=ddc9f661fc1b496c919d096d89f6f3fb",type:"mapserver",credential:!0,imageType:"image/png",wfsSupport:!1,isSingleTile:!1,namespace:null,attributes:null}},themes:[{id:116,name:"main",icon:"main",children:[{id:2841,name:"Couches populaires",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:262,name:"cadastre",metadata:{exclusion:"[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115]",is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"cadastre",imageType:"image/png"},{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:698,name:"pag_pag",metadata:{is_queryable:!0,legend_name:"pag",linked_layers:["697","696","1366","709","710"],max_dpi:128,metadata_id:"12c67295-d150-430f-aa28-fa004ecba3c7",start_opacity:.7},dimensions:{},type:"WMS",layers:"pag_pag",imageType:"image/png",style:"default",childLayers:[{name:"pag_pag__28"},{name:"pag_pag__27"},{name:"pag_pag__26"},{name:"pag_pag__25"},{name:"pag_pag__24"},{name:"pag_pag__23"},{name:"pag_pag__22"},{name:"pag_pag__21"},{name:"pag_pag__20"},{name:"pag_pag__19"},{name:"pag_pag__18"},{name:"pag_pag__17"},{name:"pag_pag__16"},{name:"pag_pag__15"},{name:"pag_pag__14"},{name:"pag_pag__13"},{name:"pag_pag__12"},{name:"pag_pag__11"},{name:"pag_pag__9"},{name:"pag_pag__8"},{name:"pag_pag__7"},{name:"pag_pag__6"},{name:"pag_pag__202"},{name:"pag_pag__5"},{name:"pag_pag__200"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:2811,name:"tour_randonnee_all",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_randonnee_all",imageType:"image/png",style:"default",childLayers:[{name:"tour_randonnee_all__category"}]},{id:1813,name:"myenergy_solarkataster_luxemburg_solar_potentials",metadata:{is_queryable:!0,legend_name:"energie:potentiel_solaire",metadata_id:"97628fac-c53b-4426-a829-b188105b9ead",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857",ogc_query_layers:["st_luxemburg_22_feature_info"]},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_solar_potentials",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_solar_potentials__st_luxemburg_22_solar_potentials"}]},{id:245,name:"env_zones_protegees",children:[{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:334,name:"env_zones_protegees_communautaires",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{is_expanded:!0},mixed:!0},{id:2846,name:"Couches rcentes",children:[{id:1734,name:"log_prix_app",children:[{id:1739,name:"log_prix_app_existants",metadata:{is_queryable:!0,legend_name:"logt_prix_app_exist",metadata_id:"9679921a-f90e-4d26-9918-96e66225a171"},dimensions:{},type:"WMS",layers:"log_prix_app_existants",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_existants__21"}]},{id:1740,name:"log_prix_app_en_construction",metadata:{is_queryable:!0,legend_name:"logt_prix_app_enconstruction",metadata_id:"bbb36662-64ba-4d2e-a9a4-7ab00d0bb264"},dimensions:{},type:"WMS",layers:"log_prix_app_en_construction",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_en_construction__20"}]}],metadata:{},mixed:!0},{id:1735,name:"log_loyers",children:[{id:1741,name:"log_loyers_app",metadata:{is_queryable:!0,legend_name:"logt_loyers_app",metadata_id:"2c3dc437-77ac-4030-a8d0-f61fd12e8f5e"},dimensions:{},type:"WMS",layers:"log_loyers_app",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_app__18"}]},{id:1742,name:"log_loyers_maisons",metadata:{is_queryable:!0,legend_name:"logt_loyers_maisons",metadata_id:"f914e59b-6684-4a94-b5ec-b5a782708371"},dimensions:{},type:"WMS",layers:"log_loyers_maisons",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_maisons__17"}]}],metadata:{},mixed:!0},{id:2835,name:"ortho2023_IR",metadata:{exclusion:'["exclusion_ortho2023IR","exclusion_ortho2023IR_bati"]',metadata_id:"3bb6099a-67f2-4243-b820-ffaeb03e439b"},dimensions:{},type:"WMS",layers:"ortho2023_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2023_IR__0"}]},{id:2812,name:"aev_pacte_climat_2023",metadata:{is_queryable:!0,legend_name:"aev:klimapakt2023",metadata_id:"223a6d2c-ac2c-4b95-9beb-900fd9b3e168"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2023__10"}]},{id:2794,name:"eau_restrictions_forages_prives_prelevement",metadata:{legend_name:"eau:restrictions_nouveaux_forages_prives",metadata_id:"b2f60fc1-c2e8-4472-a8e2-4e11a862b257"},dimensions:{},type:"WMS",layers:"eau_restrictions_forages_prives_prelevement",imageType:"image/png",style:"default",childLayers:[{name:"eau_restrictions_forages_prives_prelevement__475"}]}],metadata:{is_expanded:!1},mixed:!0},{id:242,name:"basisden",children:[{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0},{id:248,name:"flurstucke_grundstucke",children:[{id:359,name:"parcels",metadata:{exclusion:'[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,"exclusion_ortho2022","exclusion_ortho2022IR","exclusion_ortho2023","exclusion_ortho2023_bati","exclusion_ortho2023IR"]',is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"parcels",imageType:"image/png"},{id:353,name:"parcels_labels",metadata:{metadata_id:"a65629c7-ddd6-43de-b0c3-c49647d8fd2b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"parcels_labels",imageType:"image/png"},{id:199,name:"buildings",metadata:{is_queryable:!0,legend_name:"pcn_batiments:show",metadata_id:"5d0efc9d-a05a-4964-9f9d-a0ab9932af04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"buildings",imageType:"image/png"},{id:320,name:"toponymes",metadata:{metadata_id:"ffa537f7-a438-47da-9e0c-8e32260646a9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"toponymes",imageType:"image/png"},{id:350,name:"communes_cadastrales_labels",metadata:{is_queryable:!0,metadata_id:"5ae8fdfb-bb8f-4f72-b7ee-36c7664fe4b5"},dimensions:{},type:"WMS",layers:"communes_cadastrales_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_cadastrales_labels__COMMUNES_CADASTRALES_LABELS"}]},{id:153,name:"communes_cadastrales",metadata:{is_queryable:!0,metadata_id:"8a95f8b2-2cfb-42e7-a51c-02084228b364"},dimensions:{},type:"WMS",layers:"communes_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"communes_cadastrales__COMMUNES_CADASTRALES"}]},{id:266,name:"sections_cadastrales_labels",metadata:{is_queryable:!0,metadata_id:"69d1b609-11f7-4587-872a-508ee98ea76c"},dimensions:{},type:"WMS",layers:"sections_cadastrales_labels",imageType:"image/png",style:"default",childLayers:[{name:"sections_cadastrales_labels__SECTIONS_CADASTRALES_LABELS"}]},{id:355,name:"sections_cadastrales",metadata:{is_queryable:!0,metadata_id:"c9122320-8f06-4499-ac86-eb469e911369"},dimensions:{},type:"WMS",layers:"sections_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"sections_cadastrales__SECTIONS_CADASTRALES"}]},{id:256,name:"feuilles_cadastrales",metadata:{is_queryable:!0,metadata_id:"51333029-c8cf-490f-b4a6-80ba239f0cb4"},dimensions:{},type:"WMS",layers:"feuilles_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"feuilles_cadastrales__FEUILLES_CADASTRALES"}]},{id:417,name:"remembrements",metadata:{exclusion:"[301,302,303,304,305,306,307,308,309,310]",is_queryable:!0,max_dpi:128,metadata_id:"03d079f3-61fb-48bc-ab39-f3427b208702",start_opacity:.7},dimensions:{},type:"WMS",layers:"remembrements",imageType:"image/png",style:"default",childLayers:[{name:"remembrements__0"},{name:"remembrements__1"}]},{id:1643,name:"act_grid_land_tenure",children:[{id:1644,name:"act_privately_owned_land",metadata:{is_queryable:!0,legend_name:"act:privately",metadata_id:"75cb5ae7-7c48-478f-b2a6-1e5bfbdd5958"},dimensions:{},type:"WMS",layers:"act_privately_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_privately_owned_land__6"}]},{id:1645,name:"act_state_owned_land",metadata:{is_queryable:!0,legend_name:"act:stateowned",metadata_id:"e8813b4e-43c4-4a72-853e-bd7c06fd1111"},dimensions:{},type:"WMS",layers:"act_state_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_state_owned_land__5"}]},{id:1646,name:"act_municipality_owned_land",metadata:{is_queryable:!0,legend_name:"act:municipality",metadata_id:"89d42e03-93ae-444f-a49e-eb869b30071e"},dimensions:{},type:"WMS",layers:"act_municipality_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_municipality_owned_land__4"}]},{id:1647,name:"act_domainepublic_owned_land",metadata:{is_queryable:!0,legend_name:"act:domainepublic",metadata_id:"ac32c380-37df-4594-bbf2-0fd394482fd9"},dimensions:{},type:"WMS",layers:"act_domainepublic_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_domainepublic_owned_land__1"}]},{id:1648,name:"act_publicly_owned_land",metadata:{is_queryable:!0,legend_name:"act:publicly",metadata_id:"0a1852f5-1f32-4bdc-8bbc-d6103921d862"},dimensions:{},type:"WMS",layers:"act_publicly_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_publicly_owned_land__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:165,name:"adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0},{id:291,name:"topographische_karten",children:[{id:295,name:"topo",metadata:{exclusion:"[33,43]",metadata_id:"fe530846-9991-455e-a036-edcde4c3c566"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo",imageType:"image/png"},{id:223,name:"topo_250k",metadata:{metadata_id:"e1f601a5-ed8f-4043-8719-0cad50cbb483"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_250k",imageType:"image/png"},{id:1730,name:"topo_100k_2019",metadata:{legend_name:"topo_100k_sans_tour",metadata_id:"ce051f08-bca6-43c0-af7b-5fcf3e02376e"},dimensions:{},type:"WMS",layers:"topo_100k_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_100k_2019__topo_100k"}]},{id:1729,name:"topo_100k_BW_2019",metadata:{legend_name:"topo_100k_sans_tour",metadata_id:"8d02ddc3-8482-4e47-8ee0-520af99d4966"},dimensions:{},type:"WMS",layers:"topo_100k_BW_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_100k_BW_2019__topo_100k_bw"}]},{id:1727,name:"topo_50k_2019",metadata:{legend_name:"topo_50k_sans_tour",metadata_id:"abc505e1-224c-455e-9e7f-4f094eb4e7b0"},dimensions:{},type:"WMS",layers:"topo_50k_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_50k_2019__50K-2019-LUX_avec_ETRANGER"}]},{id:1728,name:"topo_50k_BW_2019",metadata:{legend_name:"topo_50k_sans_tour",metadata_id:"b8ccc3e8-fcf0-479c-b322-c0aee5a480e5"},dimensions:{},type:"WMS",layers:"topo_50k_BW_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_50k_BW_2019__50K-2019-LUX_avec_ETRANGER-BW"}]},{id:206,name:"topo_20k",metadata:{legend_name:"topo_20k",metadata_id:"ea998ae8-731a-43bc-aa9f-171684f97602"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_20k",imageType:"image/png"},{id:149,name:"topo_tour_20k",metadata:{legend_name:"topo_tour_20k",metadata_id:"1173_"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_tour_20k",imageType:"image/png"},{id:265,name:"topo_decoupage_r",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_r",imageType:"image/png"},{id:195,name:"topo_5k",metadata:{exclusion:"[32,42]",legend_name:"topo_5k",metadata_id:"270_2012"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_5k",imageType:"image/png"},{id:313,name:"topo_carteshisto",children:[{id:2615,name:"FERRARIS",metadata:{metadata_id:"783cb2a8-a143-4263-aaf0-b4f032835e0c"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"FERRARIS",imageType:"image/png"},{id:328,name:"1907_CAHANSEN",metadata:{metadata_id:"b88e6524-67d3-4e34-b998-6f30120e3718"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"1907_CAHANSEN",imageType:"image/png"},{id:252,name:"1927_CAHANSEN",metadata:{metadata_id:"90750f9f-856d-41ac-a90f-a8befbd75434"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"1927_CAHANSEN",imageType:"image/png"},{id:220,name:"TOPO_CARTES_1944",metadata:{metadata_id:"e78c1d0a-ef3d-4552-9bba-f72a1d1d3173"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTES_1944",imageType:"image/png"},{id:2616,name:"TOPO_CARTEHISTO_1950",metadata:{metadata_id:"f29901f2-c4b0-4250-a332-640e25a84d2e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"TOPO_CARTEHISTO_1950",imageType:"image/png"},{id:274,name:"TOPO25K1954C24",metadata:{metadata_id:"7a8bc9a4-e7c7-4584-bc4f-03deaf7b69b2"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO25K1954C24",imageType:"image/png"},{id:201,name:"TOPO_CARTESHISTO_1964",metadata:{metadata_id:"58bec8c3-c9f1-44ba-ab3a-860122694952"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1964",imageType:"image/png"},{id:173,name:"TOPO_CARTESHISTO_1964_RGB",metadata:{metadata_id:"27818c9d-19f1-4c3c-bcf6-0856d766d27d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1964_RGB",imageType:"image/png"},{id:217,name:"TOPO_CARTESHISTO_1966-74_50k",metadata:{metadata_id:"0cda7940-0268-4595-97ed-ae5854da628b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1966-74_50k",imageType:"image/png"},{id:156,name:"TOPO_CARTESHISTO_1979",metadata:{metadata_id:"6c2b8b34-0eb8-4b2c-8586-e8a515ad1860"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1979",imageType:"image/png"},{id:191,name:"TOPO_CARTESHISTO_1979_RGB",metadata:{metadata_id:"44675358-e65a-4e3b-ac6f-e4f19fd7bfb5"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1979_RGB",imageType:"image/png"},{id:285,name:"TOPO_CARTESHISTO_1989",metadata:{metadata_id:"d3e2a6d0-52b6-4f06-b833-021647f6de4c"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1989",imageType:"image/png"},{id:185,name:"TOPO_CARTESHISTO_1990_50k",metadata:{metadata_id:"b68a8131-2e42-40de-99ce-5a1433d80cbf"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1990_50k",imageType:"image/png"},{id:299,name:"TOPO_CARTESHISTO_1993_50k",metadata:{metadata_id:"f15bf68d-593f-422a-b855-2e05dfb34fcc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1993_50k",imageType:"image/png"},{id:278,name:"TOPO_CARTESHISTO_2000_50k",metadata:{metadata_id:"ccdd1b07-401d-48cb-821d-1ae51d489f36"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_2000_50k",imageType:"image/png"},{id:237,name:"TOPO_CARTESHISTO_2000",metadata:{metadata_id:"21a56aff-4a9e-4be5-9ed8-cd60dd56d5a1"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_2000",imageType:"image/png"},{id:155,name:"topo_50k",metadata:{legend_name:"topo_50k",metadata_id:"262"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_50k",imageType:"image/png"}],metadata:{},mixed:!0},{id:734,name:"utm_grid",metadata:{max_dpi:128,metadata_id:"84f59e51-2772-4b6d-8c5b-3ec19aa7d8f2"},dimensions:{},type:"WMS",layers:"utm_grid",imageType:"image/png",style:"default",childLayers:[{name:"utm_grid__2"},{name:"utm_grid__3"}]},{id:738,name:"luref_graticules",metadata:{max_dpi:128,metadata_id:"0d1a431c-36b0-406f-8cfd-d264d4949bf0"},dimensions:{},type:"WMS",layers:"luref_graticules",imageType:"image/png",style:"default",childLayers:[{name:"luref_graticules__0"},{name:"luref_graticules__1"}]}],metadata:{},mixed:!0},{id:330,name:"geodesy",children:[{id:1831,name:"ng_new",metadata:{is_queryable:!0,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"ng_new",imageType:"image/png",style:"default",childLayers:[{name:"ng_new__0"}]},{id:411,name:"ng",metadata:{is_queryable:!0,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"ng",imageType:"image/png",style:"default",childLayers:[{name:"ng__POINT_NG"}]},{id:1724,name:"points_reference_gps",metadata:{is_queryable:!0,metadata_id:"fd406ca9-2542-4de9-8cee-7ee0a16c7f42"},dimensions:{},type:"WMS",layers:"points_reference_gps",imageType:"image/png",style:"default",childLayers:[{name:"points_reference_gps__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:555,name:"editus_pois",children:[{id:542,name:"editus_poi_299",metadata:{is_queryable:!0,legend_name:"editus_1",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"542",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_299__POI"}]},{id:543,name:"editus_poi_286",metadata:{is_queryable:!0,legend_name:"editus_2",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"543",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_286__POI"}]},{id:544,name:"editus_poi_285",metadata:{is_queryable:!0,legend_name:"editus_3",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"544",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_285__POI"}]},{id:545,name:"editus_poi_287",metadata:{is_queryable:!0,legend_name:"editus_4",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"545",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_287__POI"}]},{id:546,name:"editus_poi_289",metadata:{is_queryable:!0,legend_name:"editus_5",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"546",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_289__POI"}]},{id:547,name:"editus_poi_290",metadata:{is_queryable:!0,legend_name:"editus_6",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"547",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_290__POI"}]},{id:549,name:"editus_poi_291",metadata:{is_queryable:!0,legend_name:"editus_7",metadata_id:"4a04ebff-4954-4c4d-9387-46d3587eccef",start_opacity:.9},dimensions:{},type:"WMS",layers:"549",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_291__POI"}]},{id:550,name:"editus_poi_292",metadata:{is_queryable:!0,legend_name:"editus_8",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"550",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_292__POI"}]},{id:551,name:"editus_poi_293",metadata:{is_queryable:!0,legend_name:"editus_9",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"551",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_293__POI"}]},{id:548,name:"editus_poi_294",metadata:{is_queryable:!0,legend_name:"editus_10",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"548",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_294__POI"}]},{id:552,name:"editus_poi_295",metadata:{is_queryable:!0,legend_name:"editus_11",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"552",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_295__POI"}]},{id:553,name:"editus_poi_296",metadata:{is_queryable:!0,legend_name:"editus_12",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"553",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_296__POI"}]},{id:554,name:"editus_poi_298",metadata:{is_queryable:!0,legend_name:"editus_13",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"554",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_298__POI"}]}],metadata:{},mixed:!0},{id:194,name:"infrastrucktur_une_kommunikation",children:[{id:339,name:"gebaude",children:[{id:199,name:"buildings",metadata:{is_queryable:!0,legend_name:"pcn_batiments:show",metadata_id:"5d0efc9d-a05a-4964-9f9d-a0ab9932af04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"buildings",imageType:"image/png"}],metadata:{},mixed:!0},{id:196,name:"verkehrsnetze",children:[{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:351,name:"roads_labels",metadata:{metadata_id:"5d606cae-cbc6-44c3-a465-edb981e44a39"},dimensions:{},type:"WMS",layers:"roads_labels",imageType:"image/png",style:"default",childLayers:[{name:"roads_labels__ROADS_LABELS"}]},{id:2401,name:"act_ponts",metadata:{is_queryable:!0,metadata_id:"2b7d36db-987f-49b4-96d7-60e934ddf926"},dimensions:{},type:"WMS",layers:"act_ponts",imageType:"image/png",childLayers:[{name:"act_ponts__0"},{name:"act_ponts__1"},{name:"act_ponts__2"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:813,name:"cdt_lignes_all",metadata:{is_queryable:!0,metadata_id:"bbe0523f-374d-4c94-a27d-7ce81d8bae3b"},dimensions:{},type:"WMS",layers:"cdt_lignes_all",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_all__lignes_de_bus_detaillees"},{name:"cdt_lignes_all__lignes_de_bus_detaillees_mymaps"}]},{id:812,name:"cdt_lignes_bus_par_operateur",children:[{id:814,name:"cdt_lignes_avl",metadata:{is_queryable:!0,metadata_id:"1e6f614b-e347-4115-82d7-74a72f51389f"},dimensions:{},type:"WMS",layers:"cdt_lignes_avl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_avl__category"}]},{id:815,name:"cdt_lignes_rgtr",metadata:{is_queryable:!0,metadata_id:"eae3ed54-d2ae-45ae-a62c-0dec4d44acdf"},dimensions:{},type:"WMS",layers:"cdt_lignes_rgtr",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_rgtr__category"}]},{id:816,name:"cdt_lignes_tice",metadata:{is_queryable:!0,metadata_id:"a3cb973c-12b0-4e41-bfc0-b2fb67637513"},dimensions:{},type:"WMS",layers:"cdt_lignes_tice",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tice__category"}]},{id:817,name:"cdt_lignes_cfl",metadata:{is_queryable:!0,metadata_id:"84ebdfbc-ba25-464c-af86-e74e588978ef"},dimensions:{},type:"WMS",layers:"cdt_lignes_cfl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_cfl__category"}]},{id:1374,name:"cdt_lignes_tram",metadata:{is_queryable:!0,metadata_id:"0f46c673-d4b4-4c25-8d9a-fca41035f587"},dimensions:{},type:"WMS",layers:"cdt_lignes_tram",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tram__category"}]}],metadata:{},mixed:!0},{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:2707,name:"mmtp_electromobilite_AC",metadata:{is_queryable:!0,metadata_id:"08885ef4-d534-47d4-8b93-2883c71a8452"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_AC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_AC__0"}]},{id:2708,name:"mmtp_electromobilite_DC",metadata:{is_queryable:!0,metadata_id:"624d34e4-1192-40bb-871a-e6c8720d766b"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_DC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_DC__2"}]},{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:377,name:"mobiliteit_pr",metadata:{is_queryable:!0,legend_name:"mobiliteit:pr",max_dpi:128,metadata_id:"9e0c97ae-aff9-41fc-9489-bbf97999163d"},dimensions:{},type:"WMS",layers:"mobiliteit_pr",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_pr__0"}]},{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]},{id:512,name:"tour_pistes_velo_mymaps2",metadata:{is_queryable:!0,legend_name:"tour_velo_national",metadata_id:"e9fea021-2aab-4f58-a777-8c7536898d9b"},dimensions:{},type:"WMS",layers:"tour_pistes_velo_mymaps2",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_velo_mymaps2__category"}]},{id:352,name:"cfl_hecto",metadata:{is_queryable:!0,metadata_id:"938f9e8e-071c-4e6b-940f-64b2a60eca74"},dimensions:{},type:"WMS",layers:"cfl_hecto",imageType:"image/png",style:"default",childLayers:[{name:"cfl_hecto__points_hecto"}]},{id:685,name:"cita_chantiers_actuel",metadata:{is_queryable:!0,metadata_id:"9c823038-5965-47cc-8dad-21496e57e3f2",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_actuel",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_actuel__CHANTIERS_ACTUEL"}]},{id:686,name:"cita_chantiers_futur",metadata:{is_queryable:!0,metadata_id:"063cb796-640f-4ab0-8430-955983a00e3b",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_futur",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_futur__CHANTIERS_FUTUR"}]},{id:1713,name:"chantiers_actuels_pc",metadata:{is_queryable:!0,metadata_id:"7d59f3a6-e8d8-464b-bbf9-73c6ca358a51",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_actuels_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_actuels_pc__CHANTIERS_ACTUEL_PC"}]},{id:1714,name:"chantiers_futurs_pc",metadata:{is_queryable:!0,metadata_id:"f6b9df36-5e62-46d1-ae91-c7c58c7e2e45",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_futurs_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_futurs_pc__CHANTIERS_FUTUR_PC"}]},{id:713,name:"pch_radars",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"385180ba-a9bc-49d4-8858-ba5f19942a66",start_opacity:1},dimensions:{},type:"WMS",layers:"pch_radars",imageType:"image/png",style:"default",childLayers:[{name:"pch_radars__1"},{name:"pch_radars__2"}]},{id:2729,name:"pch_points_repere",metadata:{geocatalog_open_data_last_update_date:"2024-07-26T08:50:03.7336833",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a3633bcf73e6f52fd83901",is_queryable:!0,metadata_id:"1dbe9ca0-638e-4034-94ef-c8a12fdaa57a"},dimensions:{},type:"WMS",layers:"pch_points_repere",imageType:"image/png",style:"default",childLayers:[{name:"pch_points_repere__6"}]}],metadata:{},mixed:!0},{id:1495,name:"fourniture_energie",children:[{id:1494,name:"gaz_naturel",metadata:{is_queryable:!0,legend_name:"gaz",metadata_id:"9e04e366-fcb7-4836-8d09-41b20f280cb0",start_opacity:.75},dimensions:{},type:"WMS",layers:"gaz_naturel",imageType:"image/png",style:"default",childLayers:[{name:"gaz_naturel__1"},{name:"gaz_naturel__3"}]}],metadata:{},mixed:!0},{id:2354,name:"ilr_couverture",children:[{id:2355,name:"ilr_couverture_selon_technologie",children:[{id:2351,name:"ilr_vhcn",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"30ced97b-5b19-4ef0-bf25-cad75bcf3f74",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_vhcn_adresses",imageType:"image/png",childLayers:[{name:"ilr_vhcn__1"},{name:"ilr_vhcn__2"},{name:"ilr_vhcn__3"}]},{id:2352,name:"ilr_fibre_optique",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"8ae6a358-f7ee-4d5e-81e2-5407dd34cc4e",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_fibre_optique",imageType:"image/png",childLayers:[{name:"ilr_fibre_optique__5"},{name:"ilr_fibre_optique__6"},{name:"ilr_fibre_optique__7"}]},{id:2353,name:"ilr_docsis",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"2dd35dd3-381b-405e-b870-1489698ddd23",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_docsis",imageType:"image/png",childLayers:[{name:"ilr_docsis__9"},{name:"ilr_docsis__10"},{name:"ilr_docsis__11"}]}],metadata:{},mixed:!0},{id:2367,name:"ilr_reseau_mobile_group",children:[{id:2356,name:"ilr_technologie_5G",children:[{id:2363,name:"ilr_technologie_5G_vitesse_max",metadata:{exclusion:"[360]",is_queryable:!0,legend_name:"ilr_vitesse_realisable_5g",metadata_id:"72954d5b-29dd-47ea-a5d8-bf6f3b3ec832",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_vitesse_max",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_vitesse_max__99"}]},{id:2361,name:"ilr_technologie_5G_Post",children:[{id:2369,name:"ilr_technologie_5G_post_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"d4b2509f-9bc1-41b5-bcd4-c7086da93f14",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_post_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_post_satisfaisant__37"}]},{id:2370,name:"ilr_technologie_5G_post_tres_bien",metadata:{exclusion:"[360]",metadata_id:"d4b2509f-9bc1-41b5-bcd4-c7086da93f14",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_post_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_post_tres_bien__40"}]},{id:2371,name:"ilr_technologie_5G_post_excellent",metadata:{exclusion:"[360]",metadata_id:"d4b2509f-9bc1-41b5-bcd4-c7086da93f14",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_post_excellent",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_post_excellent__43"}]}],metadata:{},mixed:!0},{id:2360,name:"ilr_technologie_5G_Proximus",children:[{id:2364,name:"ilr_technologie_5G_proximus_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"e0e72895-45a1-46b9-87ce-0ed7d02ddce5",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_proximus_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_proximus_satisfaisant__61"}]},{id:2365,name:"ilr_technologie_5G_proximus_tres_bien",metadata:{exclusion:"[360]",metadata_id:"e0e72895-45a1-46b9-87ce-0ed7d02ddce5",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_proximus_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_proximus_tres_bien__64"}]},{id:2366,name:"ilr_technologie_5G_proximus_excellent",metadata:{exclusion:"[360]",metadata_id:"e0e72895-45a1-46b9-87ce-0ed7d02ddce5",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_proximus_excellent",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_proximus_excellent__67"}]}],metadata:{},mixed:!0},{id:2362,name:"ilr_technologie_5G_Orange",children:[{id:2373,name:"ilr_technologie_5G_orange_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"aba4901e-7a64-4ac8-898f-24b8554177d6",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_orange_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_orange_satisfaisant__16"}]},{id:2572,name:"ilr_technologie_5G_orange_tresbien",metadata:{exclusion:"[360]",metadata_id:"aba4901e-7a64-4ac8-898f-24b8554177d6",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_orange_tresbien",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_orange_tresbien__1"}]},{id:2372,name:"ilr_technologie_5G_orange_excellent",metadata:{exclusion:"[360]",metadata_id:"aba4901e-7a64-4ac8-898f-24b8554177d6",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_orange_excellent",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_orange_excellent__19"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2357,name:"ilr_technologie_4G",children:[{id:2374,name:"ilr_technologie_4G_vitesse_max",metadata:{exclusion:"[360]",is_queryable:!0,legend_name:"ilr_vitesse_realisable",metadata_id:"9eb3d402-080b-4443-9fc3-1cffa4c334bb",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_vitesse_max",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_vitesse_max__88"}]},{id:2394,name:"ilr_technologie_4G_Post",children:[{id:2378,name:"ilr_technologie_4G_post_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"d14aee71-6ad4-418c-bbf8-136317632163",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_post_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_post_satisfaisant__28"}]},{id:2380,name:"ilr_technologie_4G_post_bien",metadata:{exclusion:"[360]",metadata_id:"d14aee71-6ad4-418c-bbf8-136317632163",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_post_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_post_bien__31"}]},{id:2379,name:"ilr_technologie_4G_post_tres_bien",metadata:{exclusion:"[360]",metadata_id:"d14aee71-6ad4-418c-bbf8-136317632163",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_post_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_post_tres_bien__34"}]}],metadata:{},mixed:!0},{id:2393,name:"ilr_technologie_4G_Proximus",children:[{id:2375,name:"ilr_technologie_4G_proximus_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"71e3d058-b034-4cf4-bc6c-6c0bda6dde19",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_proximus_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_proximus_satisfaisant__52"}]},{id:2377,name:"ilr_technologie_4G_proximus_bien",metadata:{exclusion:"[360]",metadata_id:"71e3d058-b034-4cf4-bc6c-6c0bda6dde19",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_proximus_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_proximus_bien__55"}]},{id:2376,name:"ilr_technologie_4G_proximus_tres_bien",metadata:{exclusion:"[360]",metadata_id:"71e3d058-b034-4cf4-bc6c-6c0bda6dde19",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_proximus_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_proximus_tres_bien__58"}]}],metadata:{},mixed:!0},{id:2395,name:"ilr_technologie_4G_Orange",children:[{id:2383,name:"ilr_technologie_4G_orange_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"f5b0958f-7f6d-408f-9670-241a27697c3a",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_orange_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_orange_satisfaisant__7"}]},{id:2381,name:"ilr_technologie_4G_orange_bien",metadata:{exclusion:"[360]",metadata_id:"f5b0958f-7f6d-408f-9670-241a27697c3a",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_orange_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_orange_bien__10"}]},{id:2382,name:"ilr_technologie_4G_orange_tres_bien",metadata:{exclusion:"[360]",metadata_id:"f5b0958f-7f6d-408f-9670-241a27697c3a",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_orange_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_orange_tres_bien__13"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2358,name:"ilr_technologie_3G",children:[{id:2391,name:"ilr_technologie_3G_vitesse_max",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"9cef87ab-e423-4ea8-9f31-3b1473f05bfe",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_3G_vitesse_max",imageType:"image/png",childLayers:[{name:"ilr_technologie_3G_vitesse_max__110"}]},{id:2387,name:"ilr_technologie_3G_orange",metadata:{exclusion:"[360]",metadata_id:"b7d64c10-a1be-4afc-9a70-686fd2cc4c02",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_3G_orange",imageType:"image/png",childLayers:[{name:"ilr_technologie_3G_orange__4"}]}],metadata:{},mixed:!0},{id:2368,name:"ilr_technologie_2G",children:[{id:2392,name:"ilr_technologie_2G_vitesse_max",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"f5c6ed13-5ab1-4980-8b57-e247b0f57d88",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_2G_vitesse_max",imageType:"image/png",childLayers:[{name:"ilr_technologie_2G_vitesse_max__77"}]},{id:2390,name:"ilr_technologie_2G_post",metadata:{exclusion:"[360]",metadata_id:"cc98e250-ab5a-4a1b-9dc8-2ffc689477ad",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_2G_post",imageType:"image/png",childLayers:[{name:"ilr_technologie_2G_post__76"}]},{id:2389,name:"ilr_technologie_2G_proximus",metadata:{exclusion:"[360]",metadata_id:"c93f8596-313f-4068-ad4f-0f0b11a92853",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_2G_proximus",imageType:"image/png",childLayers:[{name:"ilr_technologie_2G_proximus__46"}]},{id:2388,name:"ilr_technologie_2G_orange",metadata:{exclusion:"[360]",metadata_id:"4829085e-21b1-4c5c-945e-f731e812e29e",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_2G_orange",imageType:"image/png",childLayers:[{name:"ilr_technologie_2G_orange__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2438,name:"seveso_group",children:[{id:798,name:"seveso",metadata:{is_queryable:!0,legend_name:"seveso",metadata_id:"b9ab14d8-4e51-4146-b019-3937715a8fe8"},dimensions:{},type:"WMS",layers:"seveso",imageType:"image/png",style:"default",childLayers:[{name:"seveso__POI"}]}],metadata:{},mixed:!0},{id:2276,name:"radio_group",children:[{id:2275,name:"smc_radio_haute_puissance",metadata:{is_queryable:!0,legend_name:"smc_radio",metadata_id:"ebfdb83f-dbc6-44fb-973d-5a782eed32e2"},dimensions:{},type:"WMS",layers:"2275",imageType:"image/png",style:"default",childLayers:[{name:"smc_radio_haute_puissance__POI"}]},{id:2278,name:"smc_radio_reseau_emission",metadata:{is_queryable:!0,legend_name:"smc_radio",metadata_id:"ebfdb83f-dbc6-44fb-973d-5a782eed32e2"},dimensions:{},type:"WMS",layers:"2278",imageType:"image/png",style:"default",childLayers:[{name:"smc_radio_reseau_emission__POI"}]},{id:2277,name:"smc_radio_locale",metadata:{is_queryable:!0,legend_name:"smc_radio",metadata_id:"ebfdb83f-dbc6-44fb-973d-5a782eed32e2"},dimensions:{},type:"WMS",layers:"2277",imageType:"image/png",style:"default",childLayers:[{name:"smc_radio_locale__POI"}]}],metadata:{},mixed:!0},{id:1832,name:"sante_group",children:[{id:1810,name:"sante_covid_altersheemer",metadata:{is_queryable:!0,legend_name:"structures_acceuil",metadata_id:"0019f21d-e492-42ce-83a9-f4212c43e2c6",start_opacity:.9},dimensions:{},type:"WMS",layers:"1810",imageType:"image/png",style:"default",childLayers:[{name:"sante_covid_altersheemer__POI"}]},{id:2004,name:"pharmacies",metadata:{is_queryable:!0,legend_name:"pharmacies",metadata_id:"4fed0407-cb2b-4c75-982a-e96f926d6b0d"},dimensions:{},type:"WMS",layers:"2004",imageType:"image/png",style:"default",childLayers:[{name:"pharmacies__POI"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:324,name:"oberflachendarstellung",children:[{id:178,name:"luft_und_satellitenbilder",children:[{id:2592,name:"act_ortho_time",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"1adb95b0-d0a5-4afa-936a-c9faa9edba2c",time_config:'{"default_time":"2023-08","time_links":{"2001-08":"ortho_2001","2004-08":"ortho_2004","2007-08":"ortho_2007","2010-08":"ortho_2010","2013-08":"ortho_2013","2016-08":"ortho_2016","2017-08":"ortho_2017","2018-08":"ortho_2018","2019-01":"ortho_2019_winter","2019-08":"ortho_2019","2020-08":"ortho_2020","2021-08":"ortho_2021","2022-08":"ortho_2022","2023-08":"ortho_2023"}}',time_layers:{"2001-08-01T00:00:00Z":"ortho_2001","2004-08-01T00:00:00Z":"ortho_2004","2007-08-01T00:00:00Z":"ortho_2007","2010-08-01T00:00:00Z":"ortho_2010","2013-08-01T00:00:00Z":"ortho_2013","2016-08-01T00:00:00Z":"ortho_2016","2017-08-01T00:00:00Z":"ortho_2017","2018-08-01T00:00:00Z":"ortho_2018","2019-01-01T00:00:00Z":"ortho_2019_winter","2019-08-01T00:00:00Z":"ortho_2019","2020-08-01T00:00:00Z":"ortho_2020","2021-08-01T00:00:00Z":"ortho_2021","2022-08-01T00:00:00Z":"ortho_2022","2023-08-01T00:00:00Z":"ortho_2023"}},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"act_ortho_time",imageType:"image/jpeg",time:{minValue:"2001-08-01T00:00:00Z",maxValue:"2023-08-01T00:00:00Z",values:["2001-08-01T00:00:00Z","2004-08-01T00:00:00Z","2007-08-01T00:00:00Z","2010-08-01T00:00:00Z","2013-08-01T00:00:00Z","2016-08-01T00:00:00Z","2017-08-01T00:00:00Z","2018-08-01T00:00:00Z","2019-01-01T00:00:00Z","2019-08-01T00:00:00Z","2020-08-01T00:00:00Z","2021-08-01T00:00:00Z","2022-08-01T00:00:00Z","2023-08-01T00:00:00Z"],resolution:"month",minDefValue:"2023-08-01T00:00:00Z",maxDefValue:null,mode:"value",widget:"slider"}},{id:2792,name:"ortho_2023",metadata:{exclusion:'["exclusion_ortho2023","exclusion_ortho2023_bati"]',metadata_id:"742d2a2e-eb7a-4a0b-a6d8-00d70831ef04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2023",imageType:"image/jpeg"},{id:2537,name:"ortho_2022",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"63f18835-55ac-448c-a0ea-dc998933077b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2022",imageType:"image/jpeg"},{id:2272,name:"ortho_2021",metadata:{exclusion:"[121,221]",metadata_id:"ea0bd2ff-b743-4f3a-bd9b-450976563de9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2021",imageType:"image/jpeg"},{id:2056,name:"ortho_2020",metadata:{exclusion:"[119,219]",metadata_id:"87870b8a-10a1-4c33-bf50-7efe851fd450"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2020",imageType:"image/jpeg"},{id:1784,name:"ortho_2019",metadata:{exclusion:"[116,216]",metadata_id:"97c88ef6-6c64-4cb0-a134-06bb42b2b448"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019",imageType:"image/jpeg"},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1527,name:"ortho_2018",metadata:{exclusion:"[113,213]",metadata_id:"6fde72c4-802f-4663-be74-5fa5901cb4f0"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2018",imageType:"image/jpeg"},{id:1371,name:"ortho_2017",metadata:{exclusion:"[111,211]",metadata_id:"1cdae616-1a7a-49d5-b35d-05864891641f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017",imageType:"image/jpeg"},{id:745,name:"ortho_2016",metadata:{exclusion:"[107,207]",metadata_id:"bba79b6d-4205-4ce4-98e4-7b7922afcd55"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016",imageType:"image/jpeg"},{id:360,name:"ortho_2013",metadata:{exclusion:"[106,206]",metadata_id:"ced4a3dd-135e-43d0-86b9-2318982581f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013",imageType:"image/jpeg"},{id:342,name:"ortho_2010",metadata:{exclusion:"[105,205]",metadata_id:"0faf4bdb-a54b-42d7-942c-4e52fa66e963"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010",imageType:"image/jpeg"},{id:231,name:"ortho_2007",metadata:{exclusion:"[101,201]",metadata_id:"3be3d98e-7997-4ff6-8d77-e393a5fc4fdd"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2007",imageType:"image/jpeg"},{id:224,name:"ortho_2004",metadata:{exclusion:"[103,203]",metadata_id:"a185f78a-ca9c-43f8-8d06-b1abba8ff056"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2004",imageType:"image/jpeg"},{id:225,name:"ortho_2001",metadata:{exclusion:"[104,204]",metadata_id:"e6ff269c-1c7c-401f-a90b-b805e80a046e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2001",imageType:"image/jpeg"},{id:2787,name:"ortho_1967",metadata:{metadata_id:"9be42a5c-7a6f-46b5-8815-8adb17e6aff6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_1967",imageType:"image/jpeg"},{id:345,name:"topo_decoupage_ortho",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_ortho",imageType:"image/png"},{id:292,name:"wg_ikonos_satellitendaten",metadata:{legend_name:"wg:ikonos_satellitendaten",metadata_id:"db0eea79-114a-4e61-a1f2-7e064f92cdd3"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_ikonos_satellitendaten",imageType:"image/png"},{id:341,name:"aero_1951_10k",metadata:{is_queryable:!0,metadata_id:"16586649-8e46-4b04-b75c-5537a4bf214e"},dimensions:{},type:"WMS",layers:"aero_1951_10k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1951_10k__1951_10k"}]},{id:229,name:"aero_1951_25k",metadata:{is_queryable:!0,metadata_id:"b3b5fc05-323c-4f0b-804c-a4c186d62a96"},dimensions:{},type:"WMS",layers:"aero_1951_25k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1951_25k__1951_25k"}]},{id:140,name:"aero_1963_20k",metadata:{is_queryable:!0,metadata_id:"56b65f04-d3ab-45b6-9e93-95c8c9524c3e"},dimensions:{},type:"WMS",layers:"aero_1963_20k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1963_20k__1963_20k"}]},{id:665,name:"aero_1977_30k",metadata:{is_queryable:!0,metadata_id:"d9dd951e-7345-4ba2-9a76-ce54305edf2f"},dimensions:{},type:"WMS",layers:"aero_1977_30k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1977_30k__1977_30k"}]},{id:743,name:"aero_1987_30k",metadata:{is_queryable:!0,metadata_id:"98b63794-8cb1-42ff-9872-214f990ec8cd"},dimensions:{},type:"WMS",layers:"aero_1987_30k",imageType:"image/png",style:"defaults",childLayers:[{name:"aero_1987_30k__1987_30k"}]},{id:748,name:"aero_1994_30k",metadata:{is_queryable:!0,metadata_id:"abf7f6f5-8647-4317-98f6-8d4f5cd38585"},dimensions:{},type:"WMS",layers:"aero_1994_30k",imageType:"image/png",style:"defaults",childLayers:[{name:"aero_1994_30k__1994_30k"}]},{id:790,name:"Orthophotos Infrarouge",children:[{id:2835,name:"ortho2023_IR",metadata:{exclusion:'["exclusion_ortho2023IR","exclusion_ortho2023IR_bati"]',metadata_id:"3bb6099a-67f2-4243-b820-ffaeb03e439b"},dimensions:{},type:"WMS",layers:"ortho2023_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2023_IR__0"}]},{id:2595,name:"ortho2022_IR",metadata:{exclusion:'["exclusion_ortho2022IR","exclusion_ortho2022IR_bati"]',metadata_id:"c58ceaa0-d36d-4edf-ab68-ed1040bea10c"},dimensions:{},type:"WMS",layers:"ortho2022_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2022_IR__0"}]},{id:2283,name:"ortho2021_IR",metadata:{exclusion:"[122,222]",metadata_id:"067dc519-f507-45db-8e7a-f3ccc9125bc5"},dimensions:{},type:"WMS",layers:"ortho2021_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2021_IR__3"},{name:"ortho2021_IR__2"},{name:"ortho2021_IR__1"},{name:"ortho2021_IR__0"}]},{id:2089,name:"ortho2020_IR",metadata:{exclusion:"[120,220]",metadata_id:"134fb490-c022-476d-b484-dc652ae8c626"},dimensions:{},type:"WMS",layers:"ortho2020_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2020_IR__4"},{name:"ortho2020_IR__3"},{name:"ortho2020_IR__2"},{name:"ortho2020_IR__1"}]},{id:1785,name:"ortho2019_IR",metadata:{exclusion:"[117,217]",metadata_id:"3dfd031a-1721-4f35-b358-25062d5d4c26"},dimensions:{},type:"WMS",layers:"ortho2019_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2019_IR__9"},{name:"ortho2019_IR__8"},{name:"ortho2019_IR__7"},{name:"ortho2019_IR__6"}]},{id:1529,name:"ortho2018_IR",metadata:{exclusion:"[114,214]",metadata_id:"2edf6bcb-2a1c-4b8c-8488-56000133abb4"},dimensions:{},type:"WMS",layers:"ortho2018_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2018_IR__14"},{name:"ortho2018_IR__13"},{name:"ortho2018_IR__12"},{name:"ortho2018_IR__11"}]},{id:1372,name:"ortho_2017_irc",metadata:{exclusion:"[112,212]",metadata_id:"659a3236-a22e-44ae-9fa3-025cdf5d0043"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017_irc",imageType:"image/jpeg"},{id:793,name:"ortho_2016_irc",metadata:{exclusion:"[110,210]",is_queryable:!0,metadata_id:"c313da75-7d8b-4570-9db5-bb6add56309e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016_irc",imageType:"image/jpeg"},{id:792,name:"ortho_2013_irc",metadata:{exclusion:"[109,209]",is_queryable:!0,metadata_id:"649b34a1-a195-40b4-81c9-0100343b9661"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013_irc",imageType:"image/jpeg"},{id:791,name:"ortho_2010_irc",metadata:{exclusion:"[108,208]",is_queryable:!0,metadata_id:"728ffc2a-9062-4822-8596-01f0e93f6b40"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010_irc",imageType:"image/jpeg"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:161,name:"env_obs",children:[{id:1963,name:"env_couverture_sol",children:[{id:1951,name:"LISL_Landcover_2018",metadata:{is_queryable:!0,legend_name:"lisl:lc2018",metadata_id:"6142a6a6-9356-47ac-babe-eaa2ae3628b6"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2018__0"},{name:"LISL_Landcover_2018__1"}]},{id:1950,name:"LISL_Landcover_2015_v2",metadata:{is_queryable:!0,legend_name:"lisl:lc2015_2",metadata_id:"67f4ecb8-5d4b-4a9e-a60b-239fc92b25a7"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2015_v2",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2015_v2__0"},{name:"LISL_Landcover_2015_v2__1"}]},{id:2714,name:"LISL_Landcover_2021",metadata:{is_queryable:!0,legend_name:"lisl:lc2018",metadata_id:"e7afeac8-c649-4c91-ab15-ea40b8986ebc"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2021",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2021__0"},{name:"LISL_Landcover_2021__4"}]}],metadata:{},mixed:!0},{id:1964,name:"env_utilisation_sol",children:[{id:1970,name:"LISL_Landuse_2018",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2018",metadata_id:"e4572e0b-1b40-4834-b6c3-ccab83f75f57"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2018__0"}]},{id:2054,name:"LISL_Landuse_2015_v3",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2015_v3",metadata_id:"65e04718-1890-4c5e-8be7-08a73f69c0cc"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2015_v3",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2015_v3__0"}]},{id:1969,name:"LISL_Landuse_2007",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2007",metadata_id:"257556b9-560b-4193-b773-e16a9137a690"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2007",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2007__0"}]}],metadata:{},mixed:!0},{id:1965,name:"env_impermeabilisation",children:[{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]},{id:2216,name:"at_impermeabilisation_grid_2018_100m",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_100m",metadata_id:"210db74a-e33a-401b-9e17-2cd966cdcd1f"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_100m",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_100m__0"}]},{id:2215,name:"at_impermeabilisation_grid_2018_1km",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_1km",metadata_id:"8dc777d0-f910-4c69-a476-85a73dcd8474"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_1km",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_1km__0"}]}],metadata:{},mixed:!0},{id:2212,name:"at_batiments_group",children:[{id:2214,name:"at_batiments_periode_construction",metadata:{is_queryable:!0,legend_name:"at:periode_construction_batiments",metadata_id:"7c138282-86de-4adb-91c2-467b06786821"},dimensions:{},type:"WMS",layers:"at_batiments_periode_construction",imageType:"image/png",style:"default",childLayers:[{name:"at_batiments_periode_construction__0"}]}],metadata:{},mixed:!0},{id:1966,name:"env_occupation_biophysique",children:[{id:215,name:"env_obs2007",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"bd672300-0851-4901-82c4-6099aff1fcf7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_obs2007",imageType:"image/png"},{id:163,name:"env_obs1999",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"b4836d86-2803-4dcf-a991-7e78ab9c41b6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_obs1999",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:416,name:"map_morphometrie",children:[{id:415,name:"wg_hohenlinien_10m_map",metadata:{is_queryable:!0,legend_name:"wg:hohenlinien_10m",metadata_id:"012801f3-5d2b-4ab7-ae58-1da1b3256390"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_hohenlinien_10m_map",imageType:"image/png"},{id:2311,name:"act_hillshade_2019",metadata:{is_queryable:!0,metadata_id:"8171b99e-df8b-4cf0-af36-f77c222e1690"},dimensions:{},type:"WMS",layers:"act_hillshade_2019",imageType:"image/png",style:"default",childLayers:[{name:"act_hillshade_2019__3"}]},{id:1461,name:"wg_hangneigung_map",metadata:{legend_name:"wg:hangneigung",metadata_id:"6ffa94a4-af02-43ec-82e0-6796cd01a948"},dimensions:{},type:"WMS",layers:"wg_hangneigung_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_hangneigung_map__0"}]},{id:1462,name:"wg_exposition_map",metadata:{legend_name:"wg:exposition",metadata_id:"7a42e4c5-6f3c-45ea-a909-3f8f28874fde"},dimensions:{},type:"WMS",layers:"wg_exposition_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_exposition_map__0"}]},{id:1460,name:"wg_relief_map",metadata:{metadata_id:"7d195815-23c2-4963-863c-60e3a39ab8af"},dimensions:{},type:"WMS",layers:"wg_relief_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_relief_map__0"}]}],metadata:{},mixed:!0},{id:1380,name:"lidar_group",children:[{id:1792,name:"act_lidar_2019_group",children:[{id:1753,name:"lidar_2019_mns",metadata:{legend_name:"lidar:mns2019",metadata_id:"d7bd80d7-23de-462f-bd3e-6bd863e1fc1d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mns",imageType:"image/png"},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"},{id:2188,name:"act_mnt_2019_coloration_alternative_Lux",metadata:{is_queryable:!0,metadata_id:"faf3a8e8-6f3a-424a-9bee-945e99d544dd"},dimensions:{},type:"WMS",layers:"act_mnt_2019_coloration_alternative_Lux",imageType:"image/png",style:"default",childLayers:[{name:"act_mnt_2019_coloration_alternative_Lux__0"}]},{id:2187,name:"act_mnt2017_GR",metadata:{is_queryable:!0,metadata_id:"b5bad4e6-b6cf-45f4-a543-da619b07f567"},dimensions:{},type:"WMS",layers:"act_mnt2017_GR",imageType:"image/png",style:"default",childLayers:[{name:"act_mnt2017_GR__1"}]},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1788,name:"lidar_tiles_2019",metadata:{is_queryable:!0,metadata_id:"b19a500a-b8d5-4a87-a8f3-00f58c3dffcd",start_opacity:.7},dimensions:{},type:"WMS",layers:"lidar_tiles_2019",imageType:"image/png",style:"default",childLayers:[{name:"lidar_tiles_2019__3"},{name:"lidar_tiles_2019__2"}]}],metadata:{},mixed:!0},{id:1791,name:"act_lidar_2017_group",children:[{id:1377,name:"lidar_mns",metadata:{legend_name:"lidar:mns2017",metadata_id:"e7184a37-7a6a-4e07-ae8d-ff06d9969da0"},dimensions:{},type:"WMS",layers:"lidar_mns",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mns__0"}]},{id:1378,name:"lidar_mnt",metadata:{legend_name:"lidar:mnt2017",metadata_id:"1adab94e-d80a-4e19-a808-28f52f633186"},dimensions:{},type:"WMS",layers:"lidar_mnt",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mnt__0"}]},{id:1463,name:"lidar_mnh",metadata:{legend_name:"lidar:mnh",metadata_id:"5f189f5b-08f9-4abc-b3f0-78c37ddf0db1"},dimensions:{},type:"WMS",layers:"lidar_mnh",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mnh__0"}]},{id:1787,name:"lidar_tiles_2017",metadata:{is_queryable:!0,metadata_id:"3c565aff-7394-4d51-915c-0e06dde7765a",start_opacity:.7},dimensions:{},type:"WMS",layers:"lidar_tiles_2017",imageType:"image/png",style:"default",childLayers:[{name:"lidar_tiles_2017__1"},{name:"lidar_tiles_2017__0"}]}],metadata:{},mixed:!0},{id:2470,name:"act_lidar_derivates",children:[{id:2401,name:"act_ponts",metadata:{is_queryable:!0,metadata_id:"2b7d36db-987f-49b4-96d7-60e934ddf926"},dimensions:{},type:"WMS",layers:"act_ponts",imageType:"image/png",childLayers:[{name:"act_ponts__0"},{name:"act_ponts__1"},{name:"act_ponts__2"}]},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"},{id:1753,name:"lidar_2019_mns",metadata:{legend_name:"lidar:mns2019",metadata_id:"d7bd80d7-23de-462f-bd3e-6bd863e1fc1d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mns",imageType:"image/png"},{id:2311,name:"act_hillshade_2019",metadata:{is_queryable:!0,metadata_id:"8171b99e-df8b-4cf0-af36-f77c222e1690"},dimensions:{},type:"WMS",layers:"act_hillshade_2019",imageType:"image/png",style:"default",childLayers:[{name:"act_hillshade_2019__3"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:484,name:"eau_new_Hydrografie",children:[{id:450,name:"eau_new_Gewaessernetz",children:[{id:749,name:"eau_new_Gewsser",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewsser__23"},{name:"eau_new_Gewsser__24"},{name:"eau_new_Gewsser__25"}]},{id:651,name:"eau_new_Kanal_-__Muehlgraben",metadata:{is_queryable:!0,legend_name:"eau:kanal_-__muehlgraben",max_dpi:128,metadata_id:"909501fc-a0a9-4af8-8e82-f2a8d7f2fe2f"},dimensions:{},type:"WMS",layers:"eau_new_Kanal_-__Muehlgraben",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kanal_-__Muehlgraben__26"}]},{id:750,name:"eau_new_Kilometrierung der Gewsser",metadata:{legend_name:"eau:kilometrierung_primaere_gewaesser_kilometrierung_sekundaere_gewaesser",metadata_id:"4002b1cf-08b5-421a-bc92-40271d62f03c"},dimensions:{},type:"WMS",layers:"eau_new_Kilometrierung der Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kilometrierung der Gewsser__27"},{name:"eau_new_Kilometrierung der Gewsser__28"}]},{id:636,name:"eau_new_Einzugsgebiete",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.8156287",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb010cc765e17f1820811",is_queryable:!0,legend_name:"eau:einzugsgebiete",max_dpi:128,metadata_id:"a295a30a-f819-400c-842c-d0ccc695bea5"},dimensions:{},type:"WMS",layers:"eau_new_Einzugsgebiete",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einzugsgebiete__29"}]},{id:569,name:"eau_new_Stausee_Sauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:09.6659471",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece210cc765e1a2422811f",is_queryable:!0,legend_name:"eau:stausee_sauer",max_dpi:128,metadata_id:"119ad2e3-b44f-4777-883d-d2d522bafeca"},dimensions:{},type:"WMS",layers:"eau_new_Stausee_Sauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Stausee_Sauer__30"}]}],metadata:{},mixed:!0},{id:451,name:"eau_new_Fischerei",children:[{id:626,name:"eau_new_Fischereiabschnitte",metadata:{geocatalog_open_data_last_update_date:"2024-09-11T01:02:43.2828183",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecb079111e9b02db9a6ece",is_queryable:!0,legend_name:"eau:fischereiabschnitte",max_dpi:128,metadata_id:"bd6be85a-cec4-4e4d-9657-cffa242db28f"},dimensions:{},type:"WMS",layers:"eau_new_Fischereiabschnitte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fischereiabschnitte__37"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:187,name:"unwelt_biologie_geologie",children:[{id:338,name:"lebensraume_une_biotope",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:335,name:"weinbau",children:[{id:297,name:"ivv_flik_parcels",metadata:{is_queryable:!0,metadata_id:"884ed54c-3b36-417e-b44b-ed7f3283302c"},dimensions:{},type:"WMS",layers:"ivv_flik_parcels",imageType:"image/png",style:"default",childLayers:[{name:"ivv_flik_parcels__0"}]},{id:510,name:"ivv_parcels",metadata:{is_queryable:!0,metadata_id:"7d372c69-4144-43bf-9622-70dcdc7bbf0b"},dimensions:{},type:"WMS",layers:"ivv_parcels",imageType:"image/png",style:"default",childLayers:[{name:"ivv_parcels__0"}]},{id:175,name:"ivv_grosslagen",metadata:{is_queryable:!0,metadata_id:"89274b7e-4742-4673-b254-9105a4a066b7",start_opacity:.5},dimensions:{},type:"WMS",layers:"ivv_grosslagen",imageType:"image/png",style:"default",childLayers:[{name:"ivv_grosslagen__lagen"},{name:"ivv_grosslagen__lagen_labels"}]},{id:240,name:"ivv_kleinlagen",metadata:{is_queryable:!0,metadata_id:"a040071a-3a72-4d69-93e0-c06d4d4c3bd1"},dimensions:{},type:"WMS",layers:"ivv_kleinlagen",imageType:"image/png",style:"default",childLayers:[{name:"ivv_kleinlagen__0"}]},{id:221,name:"ivv_klimakarte",metadata:{is_queryable:!0,legend_name:"ivv_klimakarte",metadata_id:"6d989c64-998c-499f-a196-1032e9470666",start_opacity:.5},dimensions:{},type:"WMS",layers:"ivv_klimakarte",imageType:"image/png",style:"default",childLayers:[{name:"ivv_klimakarte__klimakarte"}]},{id:2799,name:"IVV_MonESCA",children:[{id:2800,name:"IVV_MonESCA_Bonitur",children:[{id:2798,name:"ivv_bonitur_remich_2019",metadata:{metadata_id:"ece93d8a-df79-434f-a8af-6ba2e6e2b90e"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2019",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2019__18"}]},{id:2801,name:"ivv_bonitur_remich_2020",metadata:{metadata_id:"99601a0c-3820-4f1c-93d8-4c2fac3634cd"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2020",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2020__19"}]},{id:2802,name:"ivv_bonitur_remich_2021",metadata:{metadata_id:"4cdd8990-d1e3-462f-9f86-fa2bb58c791c"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2021",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2021__20"}]},{id:2803,name:"ivv_bonitur_remich_2022",metadata:{metadata_id:"331fb74f-2bb9-4510-8a1d-c69271987b81"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2022",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2022__21"}]},{id:2804,name:"ivv_bonitur_remich_2023",metadata:{metadata_id:"6a29aa9f-753b-40c0-9af8-db3b319c5e26"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2023",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2023__22"}]}],metadata:{},mixed:!0},{id:2807,name:"IVV_MonESCA_Stress_Index",children:[{id:2805,name:"ivv_cwsi_remich_2023",metadata:{metadata_id:"bb0ac384-71f8-4aca-ab1f-3c99beeec690"},dimensions:{},type:"WMS",layers:"ivv_cwsi_remich_2023",imageType:"image/png",style:"default",childLayers:[{name:"ivv_cwsi_remich_2023__7"}]},{id:2806,name:"ivv_tir_remich_2023",metadata:{metadata_id:"95663e4b-2802-4862-b611-9b338df9bc41"},dimensions:{},type:"WMS",layers:"ivv_tir_remich_2023",imageType:"image/png",style:"default",childLayers:[{name:"ivv_tir_remich_2023__8"}]}],metadata:{},mixed:!0},{id:2808,name:"IVV_MonESCA_NDVI",children:[{id:2814,name:"ivv_ndvi_2019_09_03",metadata:{metadata_id:"7b33e77b-3d60-41cd-98af-92c1e28973fa"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2019_09_03",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2019_09_03__10"}]},{id:2815,name:"ivv_ndvi_2020_07_30",metadata:{metadata_id:"0f5b69ec-5d97-470a-8992-4e5654939208"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2020_07_30",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2020_07_30__11"}]},{id:2816,name:"ivv_ndvi_2020_09_08",metadata:{metadata_id:"cde967b0-724d-46b9-a13a-05fe890d394a"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2020_09_08",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2020_09_08__12"}]},{id:2817,name:"ivv_ndvi_2021_09_13",metadata:{metadata_id:"e58a2ef8-0c13-4203-b4d8-835f04a07401"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2021_09_13",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2021_09_13__13"}]},{id:2818,name:"ivv_ndvi_2022_08_29",metadata:{metadata_id:"80c0415d-f233-4111-846f-b11b6c3f31ed"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2022_08_29",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2022_08_29__14"}]},{id:2819,name:"ivv_ndvi_2023_08_22",metadata:{metadata_id:"7e1866c7-def5-4874-a5ad-71cd69c8e970"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2023_08_22",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2023_08_22__15"}]},{id:2820,name:"ivv_ndvi_2023_08_23",metadata:{metadata_id:"7925907a-08ce-48ed-bb84-5b3cb6bfe5b5"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2023_08_23",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2023_08_23__16"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:233,name:"geologie_",children:[{id:2167,name:"geo_carte_geol_harmonisee",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee",metadata_id:"542a0caa-4b33-4019-8ce7-b8541b436106"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee__6"},{name:"geo_carte_geol_harmonisee__1"},{name:"geo_carte_geol_harmonisee__2"},{name:"geo_carte_geol_harmonisee__3"}]},{id:2168,name:"geo_carte_geol_harmonisee_decouverte",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee_decouverte",metadata_id:"d03be720-e33c-4bd4-8829-559dc951dc2d"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee_decouverte",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee_decouverte__5"},{name:"geo_carte_geol_harmonisee_decouverte__1"},{name:"geo_carte_geol_harmonisee_decouverte__2"},{name:"geo_carte_geol_harmonisee_decouverte__3"}]},{id:2169,name:"geo_carte_geol_simplifiee",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee",metadata_id:"d5235bf1-96c8-4fc8-8d6d-2a0cde246aad"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee__2"},{name:"geo_carte_geol_simplifiee__1"},{name:"geo_carte_geol_simplifiee__0"}]},{id:2170,name:"geo_carte_geol_simplifiee_decouverte",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee_decouverte",metadata_id:"d8d627ee-ec11-4054-8a05-f4cd98adbd72"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee_decouverte",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee_decouverte__0"},{name:"geo_carte_geol_simplifiee_decouverte__2"}]},{id:2173,name:"geo_coupes_geologiques",metadata:{is_queryable:!0,legend_name:"geol:coupes_geologiques",metadata_id:"8a35490a-8dc8-4dfd-9136-edfdd6d08281"},dimensions:{},type:"WMS",layers:"geo_coupes_geologiques",imageType:"image/png",style:"default",childLayers:[{name:"geo_coupes_geologiques__0"}]},{id:2175,name:"geo_epaisseurs_unites",metadata:{is_queryable:!0,legend_name:"geol:epaisseurs_unites",metadata_id:"3fab8010-2f8b-43e2-96a7-155a24233db4"},dimensions:{},type:"WMS",layers:"geo_epaisseurs_unites",imageType:"image/png",style:"default",childLayers:[{name:"geo_epaisseurs_unites__0"}]},{id:2266,name:"forages_grand_public_group",children:[{id:2176,name:"geo_forages_ref",metadata:{is_queryable:!0,legend_name:"geol:forages_ref",metadata_id:"0564eda7-c92d-4a80-b3c7-be94f5d67186"},dimensions:{},type:"WMS",layers:"geo_forages_ref",imageType:"image/png",style:"default",childLayers:[{name:"geo_forages_ref__0"}]},{id:2265,name:"eau_new_Bohrungen_grand_public",metadata:{is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen_grand_public",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen_grand_public__39"}]}],metadata:{},mixed:!0},{id:2267,name:"eaux_souterraines_grand_public_group",children:[{id:631,name:"eau_new_Grundwasserleiter",metadata:{geocatalog_open_data_last_update_date:"2024-06-03T01:02:35.1743465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecafe1cc765e18ae5ed87e",is_queryable:!0,legend_name:"eau:grundwasserleiter",max_dpi:128,metadata_id:"783a8608-e4b3-44ed-8864-68525da33760"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserleiter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserleiter__41"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]}],metadata:{},mixed:!0},{id:2191,name:"geo_geomorphologie_carte100K",metadata:{is_queryable:!0,legend_name:"geol:geomorphologie100k",metadata_id:"3fd5088b-021d-4207-9d4b-4040e1ccfe22"},dimensions:{},type:"WMS",layers:"geo_geomorphologie_carte100K",imageType:"image/png",style:"default",childLayers:[{name:"geo_geomorphologie_carte100K__0"}]}],metadata:{},mixed:!0},{id:321,name:"pedologie",children:[{id:272,name:"pedologie_100k",metadata:{legend_name:"pedologie",metadata_id:"2d712a34-ce79-426d-a57b-b7cadf97b80f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"pedologie_100k",imageType:"image/png"},{id:702,name:"asta_pedologie_new",metadata:{legend_name:"pedologie_new",max_dpi:128,metadata_id:"37686d89-0173-4040-88c7-be84a3648d01"},dimensions:{},type:"WMS",layers:"asta_pedologie_new",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_new__9"},{name:"asta_pedologie_new__10"},{name:"asta_pedologie_new__11"},{name:"asta_pedologie_new__12"},{name:"asta_pedologie_new__13"},{name:"asta_pedologie_new__14"},{name:"asta_pedologie_new__15"}]},{id:704,name:"asta_pedologie_humus",metadata:{legend_name:"asta_corg",max_dpi:128,metadata_id:"a1b0807c-9bff-4f6a-a5e7-130316742f56"},dimensions:{},type:"WMS",layers:"asta_pedologie_humus",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_humus__0"}]},{id:703,name:"asta_pedologie_ph",metadata:{legend_name:"asta_ph",max_dpi:128,metadata_id:"628ee73f-4c37-4689-bc4c-1fd9f6bd2663"},dimensions:{},type:"WMS",layers:"asta_pedologie_ph",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_ph__0"}]},{id:2408,name:"asta_erosion_group",children:[{id:2760,name:"asta_rigoles_erosion_enquete",metadata:{is_queryable:!0,metadata_id:"00c1398d-604f-4e1b-9abd-af05261d80ba"},dimensions:{},type:"WMS",layers:"asta_rigoles_erosion_enquete",imageType:"image/png",childLayers:[{name:"asta_rigoles_erosion_enquete__2"}]},{id:2407,name:"asta_erosion_2023",metadata:{is_queryable:!0,metadata_id:"427aff9b-b988-455c-8cd9-1c029cfd6b6e",start_opacity:.25},dimensions:{},type:"WMS",layers:"asta_erosion_2023",imageType:"image/png",childLayers:[{name:"asta_erosion_2023__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:486,name:"eau_new_Hochwasserrisikomanagement-Richtlinie [HWRM-RL]",children:[{id:1696,name:"eau_new_Risikogewaesser_2019_group",children:[{id:1703,name:"eau_Risikogewaesser_2019",metadata:{is_queryable:!0,legend_name:"eau:risikogewaesser_2019",metadata_id:"762cd956-9733-4855-afa7-38768a38e8a1"},dimensions:{},type:"WMS",layers:"eau_Risikogewaesser_2019",imageType:"image/png",style:"default",childLayers:[{name:"eau_Risikogewaesser_2019__16"}]}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:1711,name:"eau_atlas_crues_subites",children:[{id:2045,name:"age_dangers_fortes",metadata:{legend_name:"age_dangers_fortes",metadata_id:"55dbe91c-f1e5-4c56-b0b9-4590988e23e5"},dimensions:{},type:"WMS",layers:"age_dangers_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_dangers_fortes__0"},{name:"age_dangers_fortes__1"}]},{id:2046,name:"age_risques_fortes",metadata:{legend_name:"age_risques_fortes",metadata_id:"f1d9b1cd-ad78-44df-89ac-ad591138243f"},dimensions:{},type:"WMS",layers:"age_risques_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_risques_fortes__1"},{name:"age_risques_fortes__2"},{name:"age_risques_fortes__3"},{name:"age_risques_fortes__4"},{name:"age_risques_fortes__5"}]}],metadata:{},mixed:!0},{id:461,name:"eau_new_Historische_Ueberschwemmungsgebiete",children:[{id:637,name:"eau_new_UESG_1983_-_Mosel",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.2797021",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde16111e9b03b03833be",is_queryable:!0,legend_name:"eau:uesg_1983_-_mosel",max_dpi:128,metadata_id:"e6896207-c0f9-417e-9661-119128628e8e"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1983_-_Mosel",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1983_-_Mosel__122"}]},{id:641,name:"eau_new_UESG_1993_(ausser_Mosel)",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:25.7826569",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde1e111e9b03b03833bf",is_queryable:!0,legend_name:"eau:uesg_1993_ausser_mosel",max_dpi:128,metadata_id:"78c692f3-ad20-467b-b03a-0d020a821647"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1993_(ausser_Mosel)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1993_(ausser_Mosel)__123"}]},{id:642,name:"eau_new_UESG_Alzette_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.5894792",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde26111e9b03b03833c0",is_queryable:!0,legend_name:"eau:uesg_alzette_1995",max_dpi:128,metadata_id:"aaf81780-df85-4580-a890-fded8ae03db7"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Alzette_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Alzette_1995__124"}]},{id:633,name:"eau_new_UESG_Sauer_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.4493603",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde30111e9b03b222c3b5",is_queryable:!0,legend_name:"eau:uesg_sauer_1995",max_dpi:128,metadata_id:"f01f7be2-0423-4571-8fff-57dd617ae632"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Sauer_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Sauer_1995__125"}]},{id:2116,name:"eau_Hochwasserkarten_2021",children:[{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:463,name:"eau_new_Zusaetzliche_Informationen",children:[{id:756,name:"eau_new_Hochwasser Brennpunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.8729061",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"5fd1cadde9996e5faf62ea6f",is_queryable:!0,legend_name:"eau:hochwasser_brennpunkte",metadata_id:"b2bfd06d-5f05-4abf-8f41-103d40a380e7"},dimensions:{},type:"WMS",layers:"eau_new_Hochwasser Brennpunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hochwasser Brennpunkte__309"}]},{id:758,name:"eau_new_Manahmens des Hochwasserrisikomanagementplans",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:03:13.4638796",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"66e4e0d15a1785364d6db3fb",is_queryable:!0,legend_name:"eau:massnahmens_des_hochwasserrisikomanagementplans",metadata_id:"4326fea6-7ec4-4bb9-861f-4476b0d4ceac"},dimensions:{},type:"WMS",layers:"eau_new_Manahmens des Hochwasserrisikomanagementplans",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Manahmens des Hochwasserrisikomanagementplans__314"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:373,name:"eau_new_Trinkwasser_Schutzzonen_(ZPS)",children:[{id:214,name:"eau_new_Provisorische_ZPS",metadata:{geocatalog_open_data_last_update_date:"2024-10-03T01:04:17.082383",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece254111e9b03b03833c4",is_queryable:!0,legend_name:"eau:provisorische_zps",max_dpi:128,metadata_id:"ddc51f25-2fb7-4d14-866a-a08f8af8ef03"},dimensions:{},type:"WMS",layers:"eau_new_Provisorische_ZPS",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Provisorische_ZPS__130"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:1464,name:"eau_prgd_zones_protection_lac",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.5407176",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5b571c9546f3b55625dc355c",is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_prgd_zones_protection_lac__349"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]},{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]}],metadata:{},mixed:!0},{id:469,name:"eau_new_Schutzgebiete",children:[{id:656,name:"eau_new_Badegewaesser",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecaff2cc765e18ae5ed87f",is_queryable:!0,legend_name:"eau:badegewaesser",max_dpi:128,metadata_id:"72f770ee-7290-4ecb-9358-580b7cfcadf7"},dimensions:{},type:"WMS",layers:"eau_new_Badegewaesser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Badegewaesser__135"}]},{id:581,name:"eau_new_Badegewaesser_-_Qualitaet",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece261cc765e1a24228120",is_queryable:!0,legend_name:"eau:badegewaesser_-_qualitaet",max_dpi:128,metadata_id:"c0c9c705-8b26-4a0b-b9bb-e2243cd5386a"},dimensions:{},type:"WMS",layers:"eau_new_Badegewaesser_-_Qualitaet",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Badegewaesser_-_Qualitaet__136"}]},{id:612,name:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_uuid:"57ece27bcc765e1a270cf61d",is_queryable:!0,legend_name:"eau:empfindliche_gebiete_kommunalabwasserrichtlinie",max_dpi:128,metadata_id:"39952e6c-8e73-4a23-a19c-78c4f06c84d9"},dimensions:{},type:"WMS",layers:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)__139"}]},{id:492,name:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)",metadata:{geocatalog_open_data_last_update_date:"2024-09-04T01:02:59.0520396",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66d7b1c287ac9208bf4692e9",is_queryable:!0,legend_name:"eau:gefaehrdete_gebiete_nitratrichtlinie",max_dpi:128,metadata_id:"9426a9a6-7cb1-4c1a-a504-40dabc4429c0"},dimensions:{},type:"WMS",layers:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)__140"}]}],metadata:{},mixed:!0},{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:470,name:"eau_new_Gewaesserschutz",children:[{id:643,name:"eau_new_Abwassersyndikate",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.7305149",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece2dd111e9b03b03833c5",is_queryable:!0,legend_name:"eau:abwassersyndikate",max_dpi:128,metadata_id:"4b5e384c-5603-4cf4-9bd5-6e520df5c375"},dimensions:{},type:"WMS",layers:"eau_new_Abwassersyndikate",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Abwassersyndikate__143"}]},{id:645,name:"eau_new_Klaeranlagen",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.116702",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece288cc765e1a25470f74",is_queryable:!0,legend_name:"eau:klaeranlagen",max_dpi:128,metadata_id:"53e55765-90eb-438f-a744-3ac878b06334"},dimensions:{},type:"WMS",layers:"eau_new_Klaeranlagen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Klaeranlagen__142"}]}],metadata:{},mixed:!0},{id:474,name:"eau_new_Wasserrahmenrichtlinie",children:[{id:1469,name:"eau_strahlwirkungskonzept",metadata:{is_queryable:!0,legend_name:"eau:strahlwirkungskonzept",metadata_id:"e1744b8e-101e-406d-b742-776d488a00b5"},dimensions:{},type:"WMS",layers:"eau_strahlwirkungskonzept",imageType:"image/png",style:"default",childLayers:[{name:"eau_strahlwirkungskonzept__351"},{name:"eau_strahlwirkungskonzept__352"}]},{id:475,name:"eau_new_Bewirtschaftungsplan_2009",children:[{id:644,name:"eau_new_Betrachtungsraeume_2009",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2009",max_dpi:128,metadata_id:"be15dd7d-df57-44e1-b724-0929cf05eef9"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2009__146"}]},{id:607,name:"eau_new_Typologie_Oberflaechengewasser_2009",metadata:{is_queryable:!0,legend_name:"eau:typologie_oberflaechengewasser_2009",max_dpi:128,metadata_id:"0d1d73f0-7644-4217-a0df-b6c497508592"},dimensions:{},type:"WMS",layers:"eau_new_Typologie_Oberflaechengewasser_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Typologie_Oberflaechengewasser_2009__147"}]},{id:601,name:"eau_new_Oberflaechenwasserkoerper_2009",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2009",max_dpi:128,metadata_id:"404cf7b4-f70b-4c2c-a44b-89e297fab0f8"},dimensions:{},type:"WMS",layers:"eau_new_Oberflaechenwasserkoerper_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflaechenwasserkoerper_2009__148"}]},{id:634,name:"eau_new_Erheblich vernderte Wasserkrper 2009",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_owk_2009",max_dpi:128,metadata_id:"78da31c2-55eb-40c9-99fe-22ff409468c2"},dimensions:{},type:"WMS",layers:"eau_new_Erheblich vernderte Wasserkrper 2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erheblich vernderte Wasserkrper 2009__149"}]},{id:603,name:"eau_new_Grundwasserkoerper_2009",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2009",max_dpi:128,metadata_id:"f23ca424-ec87-4c53-929c-7e627a8e06af"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserkoerper_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserkoerper_2009__151"}]},{id:468,name:"eau_new_Zustand_der_Wasserkoerper_(WK)_2009",children:[{id:464,name:"eau_new_Oberflaechengewaesser_2009",children:[{id:585,name:"eau_new_Gesamtzustand_2009",metadata:{is_queryable:!0,legend_name:"eau:gesamtzustand_2009",max_dpi:128,metadata_id:"44862c13-7006-44a4-99e6-2877ea512714"},dimensions:{},type:"WMS",layers:"eau_new_Gesamtzustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gesamtzustand_2009__154"}]},{id:586,name:"eau_new_Chemischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2009",max_dpi:128,metadata_id:"d934fbcc-02c6-47fa-a23d-cfbe49214709"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_2009__155"}]},{id:614,name:"eau_new_Oekologischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:oekologischer_zustand_2009",max_dpi:128,metadata_id:"92d28c19-ed51-4e9e-8a80-831144fe3553"},dimensions:{},type:"WMS",layers:"eau_new_Oekologischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oekologischer_Zustand_2009__156"}]},{id:593,name:"eau_new_Hydromorphologischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologischer_zustand_2009",max_dpi:128,metadata_id:"0227e64f-11ef-4f0a-8853-48fd7385f2b1"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologischer_Zustand_2009__157"}]}],metadata:{},mixed:!0},{id:435,name:"eau_new_Grundwasser_2009",children:[{id:657,name:"eau_new_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_wk_2009",max_dpi:128,metadata_id:"2df25c38-15d5-447f-a269-4184ce781050"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_WK_2009__159"}]},{id:605,name:"eau_new_Quantitativer_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_wk_2009",max_dpi:128,metadata_id:"a9ebce38-6c8b-447e-9d22-46ba333fa63c"},dimensions:{},type:"WMS",layers:"eau_new_Quantitativer_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quantitativer_Zustand_der_WK_2009__160"}]},{id:441,name:"eau_new_Chemischer_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_wk_2009",max_dpi:128,metadata_id:"e9a72fec-29a0-4183-9e3a-6d4f49c9fea7"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_der_WK_2009__161"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:480,name:"eau_new_Bewirtschaftungsplan_2015",children:[{id:536,name:"eau_new_Oberflaechenwasserkoerper_2015",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2015",max_dpi:128,metadata_id:"ead261ed-7be1-4435-9cf5-d1527a18bd19"},dimensions:{},type:"WMS",layers:"eau_new_Oberflaechenwasserkoerper_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflaechenwasserkoerper_2015__165"}]},{id:658,name:"eau_new_Erheblich vernderte Wasserkrper 2015",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_wk_2015",max_dpi:128,metadata_id:"78da31c2-55eb-40c9-99fe-22ff409468c2"},dimensions:{},type:"WMS",layers:"eau_new_Erheblich vernderte Wasserkrper 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erheblich vernderte Wasserkrper 2015__166"}]},{id:619,name:"eau_new_Betrachtungsraeume_2015",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2015",max_dpi:128,metadata_id:"be15dd7d-df57-44e1-b724-0929cf05eef9"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2015__163"}]},{id:588,name:"eau_new_Typologie_Gewaesser_2015",metadata:{is_queryable:!0,legend_name:"eau:typologie_gewaesser_2015",max_dpi:128,metadata_id:"c7eea236-ad59-47fc-8c02-630fee3292dc"},dimensions:{},type:"WMS",layers:"eau_new_Typologie_Gewaesser_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Typologie_Gewaesser_2015__164"}]},{id:1470,name:"eau_fliessgewaessertypen_2015",metadata:{is_queryable:!0,legend_name:"eau:fliessgewaessertypen_2015_lawa",metadata_id:"79f4588f-a264-4921-a382-d1f83cf48da3"},dimensions:{},type:"WMS",layers:"eau_fliessgewaessertypen_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_fliessgewaessertypen_2015__354"}]},{id:759,name:"eau_new_Strukturgtekartierung 2015 [7-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2015_7-stufige_bewertung",metadata_id:"dd28de7b-6182-4054-89a6-dd92b80b565f"},dimensions:{},type:"WMS",layers:"eau_new_Strukturgtekartierung 2015 [7-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Strukturgtekartierung 2015 [7-stufige Bewertung]__315"}]},{id:760,name:"eau_new_Strukturgtekartierung 2015 [5-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2015_5-stufige_bewertung",metadata_id:"ff70c904-a6b9-4989-88c0-8359ff52e57e"},dimensions:{},type:"WMS",layers:"eau_new_Strukturgtekartierung 2015 [5-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Strukturgtekartierung 2015 [5-stufige Bewertung]__316"}]},{id:761,name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:5-band_sohle_7-stufige_bewertung_5-band_ufer_links_7-stufige_bewertung_5-band_ufer_rechts_7-stufige_bewertung_5-band_umfeld_links_7-stufige_bewertung_5-band_umfeld_rechts_7-stufige_bewertung",metadata_id:"429d3552-5f72-4be6-9c03-95c76f0a6c07"},dimensions:{},type:"WMS",layers:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__336"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__337"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__338"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__339"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__340"}]},{id:763,name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:5-band_sohle_5-stufige_bewertung_5-band_ufer_links_5-stufige_bewertung_5-band_ufer_rechts_5-stufige_bewertung_5-band_umfeld_links_5-stufige_bewertung_5-band_umfeld_rechts_5-stufige_bewertung",metadata_id:"4c64f3a4-627f-4aa7-9e0c-d3ad003d9afe"},dimensions:{},type:"WMS",layers:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__342"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__343"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__344"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__345"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__346"}]},{id:785,name:"eau_new_WRRL und HWRM-RL Massnahmen",metadata:{is_queryable:!0,legend_name:"eau:wrrl_und_hwrm-rl_-_massnahmen",metadata_id:"9a339e4e-eb04-42a0-ac0d-5a5f354c9548"},dimensions:{},type:"WMS",layers:"eau_new_WRRL und HWRM-RL Massnahmen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL und HWRM-RL Massnahmen__347"}]},{id:1471,name:"eau_detailliertes_massnahmenprogramm_sww",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_sww",metadata_id:"5b9d1544-da64-4a58-b519-9a03e5491e07"},dimensions:{},type:"WMS",layers:"eau_detailliertes_massnahmenprogramm_sww",imageType:"image/png",style:"default",childLayers:[{name:"eau_detailliertes_massnahmenprogramm_sww__355"}]},{id:659,name:"eau_new_Grundwasserkoerper_2015",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2015",max_dpi:128,metadata_id:"bb5f17b7-ddac-46cc-a59d-25f82d422b5b"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserkoerper_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserkoerper_2015__168"}]},{id:476,name:"eau_new_Zustand_der_Wasserkoerper_(WK)_2015",children:[{id:479,name:"eau_new_Oberflaechengewaesser_2015",children:[{id:622,name:"eau_new_Oekologischer_Zustand_2015",metadata:{is_queryable:!0,legend_name:"eau:oekologischer_zustand_2015",max_dpi:128,metadata_id:"5b78d0a5-1984-4efc-9e7d-0cb9d7ca829d"},dimensions:{},type:"WMS",layers:"eau_new_Oekologischer_Zustand_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oekologischer_Zustand_2015__173"}]},{id:663,name:"eau_new_Gesamtzustand_2015",metadata:{is_queryable:!0,legend_name:"eau:gesamtzustand_2015",max_dpi:128,metadata_id:"bea7140f-b938-4494-ac14-a2252a1d0fcb"},dimensions:{},type:"WMS",layers:"eau_new_Gesamtzustand_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gesamtzustand_2015__171"}]},{id:621,name:"eau_new_Chemischer Zustand 2015_Richtlinie 2008_105_EG",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2015",max_dpi:128,metadata_id:"7df87ec3-bfad-4d1b-a10b-68670c8073f4"},dimensions:{},type:"WMS",layers:"621",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer Zustand 2015_Richtlinie 2008_105_EG__172"}]},{id:764,name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe 2015_Richtlinie_2008_105_EG",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2015_richtlinie_2008_105_eg",metadata_id:"68f761b4-e1d1-4cda-b4aa-1e61fc812588"},dimensions:{},type:"WMS",layers:"764",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe 2015_Richtlinie_2008_105_EG__318"}]},{id:765,name:"eau_new_Chemischer_Zustand_2015_Richtlinie 2013_39_EU",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2015_richtlinie_2013_39_eu",metadata_id:"7df87ec3-bfad-4d1b-a10b-68670c8073f4"},dimensions:{},type:"WMS",layers:"765",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_2015_Richtlinie 2013_39_EU__319"}]},{id:766,name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe_2015_Richtlinie 2013_39_EU",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2015_richtlinie_2013_39_eu",metadata_id:"d78ac813-7ab3-4162-945a-f87512e66654"},dimensions:{},type:"WMS",layers:"766",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe_2015_Richtlinie 2013_39_EU__320"}]},{id:466,name:"eau_new_Qualitaetskomponenten_des_oekologischen_Zustands_2015",children:[{id:767,name:"eau_new_Hydromorphologische Gesamtbewertung 2015",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologischer_zustand_2015",metadata_id:"767e0a8a-31e0-4a53-913f-6ab1c76ca27c"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologische Gesamtbewertung 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologische Gesamtbewertung 2015__174"}]},{id:769,name:"eau_new_Morphologie 2015",metadata:{is_queryable:!0,legend_name:"eau:morphologie_2015",metadata_id:"b7812f62-a8b5-4ef4-bbb8-c2e3a9688c93"},dimensions:{},type:"WMS",layers:"eau_new_Morphologie 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Morphologie 2015__330"}]},{id:770,name:"eau_new_Durchgngigkeit 2015",metadata:{is_queryable:!0,legend_name:"eau:durchgaengigkeit_2015",metadata_id:"4983c058-3d33-4b6f-b801-de1113a11f27"},dimensions:{},type:"WMS",layers:"eau_new_Durchgngigkeit 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchgngigkeit 2015__331"}]},{id:583,name:"eau_new_Physiko-Chemie_2015",metadata:{is_queryable:!0,legend_name:"eau:physiko-chemie_2015",max_dpi:128,metadata_id:"45702d13-2608-4300-ba54-0e078c96386c"},dimensions:{},type:"WMS",layers:"eau_new_Physiko-Chemie_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Physiko-Chemie_2015__176"}]},{id:771,name:"eau_new_Phytoplankton 2015",metadata:{is_queryable:!0,legend_name:"eau:phytoplankton_2015",metadata_id:"e5d8434c-c367-4a56-a7d1-aa60f70a301f"},dimensions:{},type:"WMS",layers:"eau_new_Phytoplankton 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytoplankton 2015__321"}]},{id:662,name:"eau_new_Makrophyten_2015",metadata:{is_queryable:!0,legend_name:"eau:aquatische_flora_2015",max_dpi:128,metadata_id:"fe673001-2447-4e3c-bce6-4606b6bf222d"},dimensions:{},type:"WMS",layers:"eau_new_Makrophyten_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrophyten_2015__177"}]},{id:600,name:"eau_new_Makro-Invertebraten_2015",metadata:{is_queryable:!0,legend_name:"eau:makro-invertebraten_2015",max_dpi:128,metadata_id:"b8a59482-2696-4b9a-a527-3201597a4caf"},dimensions:{},type:"WMS",layers:"eau_new_Makro-Invertebraten_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makro-Invertebraten_2015__180"}]},{id:646,name:"eau_new_Fische_2015",metadata:{is_queryable:!0,legend_name:"eau:fische_2015",max_dpi:128,metadata_id:"f44a6aa7-6dcc-4d99-9033-c13ef23ebef4"},dimensions:{},type:"WMS",layers:"eau_new_Fische_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fische_2015__179"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:471,name:"eau_new_Grundwasser_2015",children:[{id:591,name:"eau_new_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_wk_2015",max_dpi:128,metadata_id:"489c9b85-6c3c-4019-b3ee-096936b2683c"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_WK_2015__182"}]},{id:592,name:"eau_new_Quantitativer_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_wk_2015",max_dpi:128,metadata_id:"333c7e4f-cdc3-439a-aa13-ca0f9138c764"},dimensions:{},type:"WMS",layers:"eau_new_Quantitativer_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quantitativer_Zustand_der_WK_2015__183"}]},{id:632,name:"eau_new_Chemischer_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_wk_2015",max_dpi:128,metadata_id:"ddd64c4a-f5af-4bbb-a7d3-3db1016ee541"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_der_WK_2015__184"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2085,name:"eau_Bewirtschaftungsplan_2021",children:[{id:2090,name:"eau_Oberflaechenwasserkoerper_2021",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2021",max_dpi:128,metadata_id:"c50b2bc7-aeb7-4d3e-9349-09eb3ec0f927"},dimensions:{},type:"WMS",layers:"eau_Oberflaechenwasserkoerper_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Oberflaechenwasserkoerper_2021__386"}]},{id:2091,name:"eau_Erheblich vernderte Wasserkrper 2021",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_wk_2021",max_dpi:128,metadata_id:"311cc30b-8092-4816-9f86-87d5f2995706"},dimensions:{},type:"WMS",layers:"eau_Erheblich vernderte Wasserkrper 2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Erheblich vernderte Wasserkrper 2021__387"}]},{id:2491,name:"eau_new_Betrachtungsraeume_2021",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2021",metadata_id:"af21fbbf-3f63-4742-8c44-f8a377930197"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2021__455"}]},{id:2223,name:"eau_typologie_Gewsser_2021",metadata:{is_queryable:!0,legend_name:"eau:fleissgewaessertypen_2021_lu",metadata_id:"492d6faa-5c91-45d4-83d7-733398cc48d1"},dimensions:{},type:"WMS",layers:"eau_typologie_Gewsser_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_typologie_Gewsser_2021__419"}]},{id:2224,name:"eau_Fliegewssertypen_2021",metadata:{is_queryable:!0,legend_name:"eau:fleissgewaessertypen_2021_lawa",metadata_id:"8608d8c5-def8-4050-9f44-7746edd7a32e"},dimensions:{},type:"WMS",layers:"eau_Fliegewssertypen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Fliegewssertypen_2021__420"}]},{id:2269,name:"eau_grundwasserkoerper_2021",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2021",metadata_id:"3bd42cf4-93ce-451f-8749-e3f6d1750eeb"},dimensions:{},type:"WMS",layers:"eau_grundwasserkoerper_2021",imageType:"image/png",childLayers:[{name:"eau_grundwasserkoerper_2021__444"}]},{id:2222,name:"eau_Strukturgtekartierung_2021",children:[{id:2225,name:"eau_Strukturgtekartierung_2021_7stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2021_7-stufige_bewertung",metadata_id:"87e3688f-b831-44e9-aa4f-38d89a41139a"},dimensions:{},type:"WMS",layers:"eau_Strukturgtekartierung_2021_7stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturgtekartierung_2021_7stufige_bewertung__405"}]},{id:2226,name:"eau_Strukturgtekartierung_2021_5stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2021_5-stufige_bewertung",metadata_id:"0e36b3e4-8811-43b6-9f2d-a2ea26c817cb"},dimensions:{},type:"WMS",layers:"eau_Strukturgtekartierung_2021_5stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturgtekartierung_2021_5stufige_bewertung__406"}]},{id:2227,name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:struktukartierung_2021_5_band_7-stufige_bewertung",metadata_id:"27c60680-00ac-4e28-857f-41a1021ae4d9"},dimensions:{},type:"WMS",layers:"eau_Struktukartierung_2021_5_band_7stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__408"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__409"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__410"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__411"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__412"}]},{id:2228,name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:struktukartierung_2021_5_band_5-stufige_bewertung",metadata_id:"dedcc2a3-b587-4dfe-a967-5f4bfd8f575a"},dimensions:{},type:"WMS",layers:"eau_Struktukartierung_2021_5_band_5stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__414"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__415"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__416"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__417"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__418"}]},{id:2492,name:"eau_new_Querbauwerke_2021",metadata:{geocatalog_open_data_last_update_date:"2024-08-01T01:02:32.8749807",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a2f595f96f574ccd9e7e7c",is_queryable:!0,legend_name:"eau:Querbauwerke%202021",metadata_id:"88b06474-f029-4544-a60d-7c46c5f32191"},dimensions:{},type:"WMS",layers:"eau_new_Querbauwerke_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Querbauwerke_2021__422"}]},{id:2493,name:"eau_new_Durchlaesse_Verrohrungen_2021",metadata:{geocatalog_open_data_last_update_date:"2024-07-31T01:02:20.8968264",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a2f58e7af13982e1abe7e7",is_queryable:!0,legend_name:"eau:durchlaesseverrohrungen_2021",metadata_id:"6eb34108-4bad-4cb7-881e-7db3174c7531"},dimensions:{},type:"WMS",layers:"eau_new_Durchlaesse_Verrohrungen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchlaesse_Verrohrungen_2021__423"}]},{id:2494,name:"eau_new_Querprofile_2021",metadata:{is_queryable:!0,legend_name:"eau:querprofile_2021",metadata_id:"a40281d4-1ee2-42d0-9378-012f1f415afa"},dimensions:{},type:"WMS",layers:"eau_new_Querprofile_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Querprofile_2021__424"}]},{id:2495,name:"eau_new_Substratkartierung_2021",metadata:{is_queryable:!0,legend_name:"eau:substratkartierung_2021",metadata_id:"c4eb10fd-305d-43f7-ae01-b9caa32ed484"},dimensions:{},type:"WMS",layers:"eau_new_Substratkartierung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Substratkartierung_2021__425"}]}],metadata:{},mixed:!0},{id:2497,name:"eau_new_Massnahmenprogramm_2021",children:[{id:2106,name:"eau_Masssnahmenprogramm_SWW_2021",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_sww_2021",metadata_id:"10f4a12e-1a67-42d5-b575-8993e2f3aa68"},dimensions:{},type:"WMS",layers:"eau_Masssnahmenprogramm_SWW_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Masssnahmenprogramm_SWW_2021__403"}]},{id:2496,name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_hy_2021_alle",metadata_id:"4b00cf8c-d4e6-486d-8bda-d385302792f6"},dimensions:{},type:"WMS",layers:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__389"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__390"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__391"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__392"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__393"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__394"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__395"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__396"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__397"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__398"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__399"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__400"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__401"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__402"}]},{id:2086,name:"eau_Entwurf_Massnahmenprogramm_HY_2021",children:[{id:2092,name:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_der_oekologischen_durchgaengigkeit",metadata_id:"c150f6a5-41c7-477a-9d44-c0a26a502d85"},dimensions:{},type:"WMS",layers:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk",imageType:"image/png",style:"default",childLayers:[{name:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk_2021__389"}]},{id:2093,name:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_der_oekologischen_durchgaengigkeit_durchlass",metadata_id:"569bf0ea-c428-4171-aba6-8f2ace180a10"},dimensions:{},type:"WMS",layers:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021__390"}]},{id:2094,name:"eau_Strukturelemente_Sohle_2021",metadata:{is_queryable:!0,legend_name:"eau:einbau_von_strukturelementen_in_sohle",metadata_id:"2d233ca6-553e-43bf-ba25-f46b88f63710"},dimensions:{},type:"WMS",layers:"eau_Strukturelemente_Sohle_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturelemente_Sohle_2021__391"}]},{id:2095,name:"eau_Umgestalten_Sohlverbau_2021",metadata:{is_queryable:!0,legend_name:"eau:entfernen_umgestalten_von_sohlverbau",metadata_id:"0d30a3ee-e860-4816-b5c8-9f43e93020e3"},dimensions:{},type:"WMS",layers:"eau_Umgestalten_Sohlverbau_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Umgestalten_Sohlverbau_2021__392"}]},{id:2096,name:"eau_Stroemungslenkern_2021",metadata:{is_queryable:!0,legend_name:"eau:einbau_von_stroemungslenkern_fuer_eigendynamik",metadata_id:"b86c62a9-0ec8-4d35-878f-b275e74ff02e"},dimensions:{},type:"WMS",layers:"eau_Stroemungslenkern_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Stroemungslenkern_2021__393"}]},{id:2097,name:"eau_Umgestalten_Uferverbau_2021",metadata:{is_queryable:!0,legend_name:"eau:entfernen_umgestalten_von_uferverbau",metadata_id:"bec0ccbc-09b5-4351-8b72-f0e458fc7d19"},dimensions:{},type:"WMS",layers:"eau_Umgestalten_Uferverbau_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Umgestalten_Uferverbau_2021__394"}]},{id:2098,name:"eau_naturnah_Gewaesserbett_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_von_naturnaher_laufentwicklung_und_gewaesserbett",metadata_id:"3ddf627c-90ae-4b58-a05e-20925493dcf9"},dimensions:{},type:"WMS",layers:"eau_naturnah_Gewaesserbett_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnah_Gewaesserbett_2021__395"}]},{id:2099,name:"eau_Gewaesserrandstreifen_2021",metadata:{is_queryable:!0,legend_name:"eau:anlage_eines_gewaesserrandstreifens",metadata_id:"3bc0e52d-954b-47d3-8905-1ecfe7108ce0"},dimensions:{},type:"WMS",layers:"eau_Gewaesserrandstreifen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Gewaesserrandstreifen_2021__396"}]},{id:2100,name:"eau_Gewaesserentwicklungskorridor_2021",metadata:{is_queryable:!0,legend_name:"eau:anlage_eines_gewaesser_entwicklungskorridors",metadata_id:"13299bf5-57ca-4538-993e-7c00f6247722"},dimensions:{},type:"WMS",layers:"eau_Gewaesserentwicklungskorridor_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Gewaesserentwicklungskorridor_2021__397"}]},{id:2101,name:"eau_natuerlich_Ueberflutungsraeume_2021",metadata:{is_queryable:!0,legend_name:"eau:sicherung_und_erweiterung_natuerlicher_ueberflutungsraeume_und_augewaesser",metadata_id:"7fb0080e-d178-401d-83de-7595ef1885b5"},dimensions:{},type:"WMS",layers:"eau_natuerlich_Ueberflutungsraeume_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_natuerlich_Ueberflutungsraeume_2021__398"}]},{id:2102,name:"eau_eigendynamische_Entwicklung_2021",metadata:{is_queryable:!0,legend_name:"eau:zulassen_von_eigendynamischer_entwicklung",metadata_id:"d13e22e9-d22a-48a0-838d-3d7c914ccfe3"},dimensions:{},type:"WMS",layers:"eau_eigendynamische_Entwicklung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_eigendynamische_Entwicklung_2021__399"}]},{id:2103,name:"eau_naturnahe_Abflussverhaeltnisse_2021",metadata:{is_queryable:!0,legend_name:"eau:widerherstellung_und_sicherung_naturnaher_abflussverhaeltnisse",metadata_id:"b3f8a9e0-17f7-4b64-a34b-6ee6de972b52"},dimensions:{},type:"WMS",layers:"eau_naturnahe_Abflussverhaeltnisse_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnahe_Abflussverhaeltnisse_2021__400"}]},{id:2104,name:"eau_naturnaher_Wasserhaushalt_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_und_sicherung_naturnahem_wasserhaushalt",metadata_id:"91008390-557e-4db3-8d7c-e608a5478edb"},dimensions:{},type:"WMS",layers:"eau_naturnaher_Wasserhaushalt_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnaher_Wasserhaushalt_2021__401"}]},{id:2105,name:"eau_Abflussregulierung_2021",metadata:{is_queryable:!0,legend_name:"eau:abflussregulierung",metadata_id:"393be87d-44ce-42e1-9b81-9585aa2d7678"},dimensions:{},type:"WMS",layers:"eau_Abflussregulierung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Abflussregulierung_2021__402"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2498,name:"eau_new_Zustand_Wasserkoerper_2021",children:[{id:2501,name:"eau_new_OWK_2021",children:[{id:2516,name:"eau_new_oekologischer_Zustand_2021",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.9819519",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:oekologischer_zustand_2021",metadata_id:"d6e11b40-6e70-4f68-86c2-1c69c1e41c04"},dimensions:{},type:"WMS",layers:"eau_new_oekologischer_Zustand_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_oekologischer_Zustand_2021__428"}]},{id:2517,name:"eau_new_oekologisches_Potenzial_2021",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.9441803",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:oekologisches_potenzial_2021",metadata_id:"ed63b4ab-aee0-4402-8f30-98f2a08b98a4"},dimensions:{},type:"WMS",layers:"eau_new_oekologisches_Potenzial_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_oekologisches_Potenzial_2021__429"}]},{id:2518,name:"eau_new_chemischer_Zustand_2021_2013_39_EU",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.8760847",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2021",metadata_id:"2973678d-b858-4c7b-abfa-b99c206c32be"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_2021_2013_39_EU",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_2021_2013_39_EU__430"}]},{id:2519,name:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.4632089",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2021",metadata_id:"e32c56b5-a839-4cd1-a724-85153d87c5d5"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU__431"}]},{id:2499,name:"eau_new_Qualitaetskomponenten_oekologischer_Zustand_2021",children:[{id:2520,name:"eau_new_biologische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:biologische_qk_-_gesamtbewertung_2021",metadata_id:"61ac19af-e01b-48e3-8730-d955709d92ce"},dimensions:{},type:"WMS",layers:"eau_new_biologische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_biologische_QK_Gesamtbewertung_2021__435"}]},{id:2521,name:"eau_new_Phytoplankton_2021",metadata:{is_queryable:!0,legend_name:"eau:phytoplankton_2021",metadata_id:"f1bb6a6e-cc76-420a-8426-cf78bebea0aa"},dimensions:{},type:"WMS",layers:"eau_new_Phytoplankton_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytoplankton_2021__436"}]},{id:2522,name:"eau_new_Makrophyten_und_Phytobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:makrophyten_und_phytobenthos_2021",metadata_id:"53087821-654a-4fad-b891-b6f86f347482"},dimensions:{},type:"WMS",layers:"eau_new_Makrophyten_und_Phytobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrophyten_und_Phytobenthos_2021__437"}]},{id:2536,name:"eau_new_Macrophytes_2021",metadata:{is_queryable:!0,legend_name:"eau:macrophytes_2021",metadata_id:"060dc4f4-8486-4b5a-ae46-2b608bd87386"},dimensions:{},type:"WMS",layers:"eau_new_Macrophytes_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Macrophytes_2021__438"}]},{id:2523,name:"eau_new_Phytobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:phytobenthos_2021",metadata_id:"83f6b866-467a-4b00-9641-0252426c0808"},dimensions:{},type:"WMS",layers:"eau_new_Phytobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytobenthos_2021__439"}]},{id:2524,name:"eau_new_Makrozoobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:makrozoobenthos_2021",metadata_id:"d4028c85-831b-4950-905a-6df780d6b57d"},dimensions:{},type:"WMS",layers:"eau_new_Makrozoobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrozoobenthos_2021__440"}]},{id:2525,name:"eau_new_Fische_2021",metadata:{is_queryable:!0,legend_name:"eau:fische_2021",metadata_id:"961e396d-f123-4842-9a58-7968806e084d"},dimensions:{},type:"WMS",layers:"eau_new_Fische_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fische_2021__441"}]},{id:2526,name:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:physikalisch-chemische_qk_-_gesamtbewertung_2021",metadata_id:"a254a96a-8179-4a85-bd3d-c371d84e3884"},dimensions:{},type:"WMS",layers:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021__442"}]},{id:2527,name:"eau_new_allg_physikalisch_chemische_Parameter_2021",metadata:{is_queryable:!0,legend_name:"eau:allgemein_physikalisch-chemische_parameter_2021",metadata_id:"405ff58f-aca0-4781-9b28-c3481a7a0b0d"},dimensions:{},type:"WMS",layers:"eau_new_allg_physikalisch_chemische_Parameter_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_allg_physikalisch_chemische_Parameter_2021__443"}]},{id:2528,name:"eau_new_Flussgebietsspezifische_Schadstoffe_2021",metadata:{is_queryable:!0,legend_name:"eau:flussgebietsspezifische_schadstoffe_2021",metadata_id:"f321c03f-196d-4d12-992a-f6914088fd11"},dimensions:{},type:"WMS",layers:"eau_new_Flussgebietsspezifische_Schadstoffe_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Flussgebietsspezifische_Schadstoffe_2021__457"}]},{id:2529,name:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologische_qk_-_gesamtbewertung_2021",metadata_id:"673ef74f-1257-4de4-9c63-be9a82e7fbf7"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021__458"}]},{id:2530,name:"eau_new_Morphologie_2021",metadata:{is_queryable:!0,legend_name:"eau:morphologie_2021",metadata_id:"877aecd9-f5b3-4266-a520-e8cfd9d861c9"},dimensions:{},type:"WMS",layers:"eau_new_Morphologie_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Morphologie_2021__459"}]},{id:2531,name:"eau_new_Durchgaengigkeit_2021",metadata:{is_queryable:!0,legend_name:"eau:durchgaengigkeit_2021",metadata_id:"afa4a183-b069-4b65-9d9e-ca692f91f140"},dimensions:{},type:"WMS",layers:"eau_new_Durchgaengigkeit_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchgaengigkeit_2021__460"}]},{id:2532,name:"eau_new_Wasserhaushalt_2021",metadata:{is_queryable:!0,legend_name:"eau:wasserhaushalt_2021",metadata_id:"299eb814-3703-4119-b8d3-e9581c234c3b"},dimensions:{},type:"WMS",layers:"eau_new_Wasserhaushalt_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Wasserhaushalt_2021__461"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2500,name:"eau_new_GWK_2021",children:[{id:2533,name:"eau_new_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_gwk_2021",metadata_id:"ef79616f-fd66-45dd-a73a-e5677948dd56"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_GWK_2021__463"}]},{id:2534,name:"eau_new_quantitativer_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_gwk_2021",metadata_id:"5b9fbb7b-26b1-4b74-a709-80df547a755d"},dimensions:{},type:"WMS",layers:"eau_new_quantitativer_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_quantitativer_Zustand_der_GWK_2021__464"}]},{id:2535,name:"eau_new_chemischer_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_gwk_2021",metadata_id:"efa9de18-5db0-498f-aebb-fd659f689da7"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_der_GWK_2021__465"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:312,name:"umweltuberwachung",children:[{id:283,name:"asta_meteo",metadata:{is_queryable:!0,metadata_id:"23e4b02d-a93d-47a4-8597-060319ae2af5"},dimensions:{},type:"WMS",layers:"asta_meteo",imageType:"image/png",style:"default",childLayers:[{name:"asta_meteo__meteo"}]}],metadata:{},mixed:!0},{id:273,name:"anf_data_map",children:[{id:427,name:"anf_arrondissements",metadata:{is_queryable:!0,metadata_id:"0ed72c13-1975-4cef-90de-1e4b737f5fbd"},dimensions:{},type:"WMS",layers:"anf_arrondissements",imageType:"image/png",style:"default",childLayers:[{name:"anf_arrondissements__ARRONDISSEMENTS"}]},{id:428,name:"anf_triages",metadata:{is_queryable:!0,metadata_id:"d4bb012a-73ab-4d3c-ac0c-f31e9df07d34"},dimensions:{},type:"WMS",layers:"anf_triages",imageType:"image/png",style:"default",childLayers:[{name:"anf_triages__TRIAGES"}]},{id:1783,name:"anf_lots_chasse_2021",metadata:{exclusion:"[340]",is_queryable:!0,metadata_id:"a8d8f46d-f6b1-4bb0-9935-be825cffab3f"},dimensions:{},type:"WMS",layers:"anf_lots_chasse_2021",imageType:"image/png",style:"default",childLayers:[{name:"anf_lots_chasse_2021__LOTS_CHASSE_2021"}]},{id:444,name:"anf_dates_battues",metadata:{exclusion:"[340]",is_queryable:!1,metadata_id:"cd5c65e3-ce29-4317-bc07-127bc679861f"},dimensions:{},type:"WMS",layers:"anf_dates_battues",imageType:"image/png",style:"default",childLayers:[{name:"anf_dates_battues__BATTUES_CHASSE"}]},{id:677,name:"anf_proprietes_forestieres",metadata:{is_queryable:!0,legend_name:"anf:proprietes_forestieres",metadata_id:"fa6d38c7-263c-4349-b208-45652f9b98ca"},dimensions:{},type:"WMS",layers:"anf_proprietes_forestieres",imageType:"image/png",style:"default",childLayers:[{name:"anf_proprietes_forestieres__PROPRIETES_FORESTIERES"}]}],metadata:{},mixed:!0},{id:381,name:"Archeo",children:[{id:2560,name:"arch_zoa",metadata:{legend_name:"arch:zoa",metadata_id:"3bbec7de-44af-4515-a2d2-04ac569ac657",start_opacity:.5},dimensions:{},type:"WMS",layers:"arch_zoa",imageType:"image/png",childLayers:[{name:"arch_zoa__1"},{name:"arch_zoa__2"},{name:"arch_zoa__3"},{name:"arch_zoa__4"},{name:"arch_zoa__5"},{name:"arch_zoa__6"},{name:"arch_zoa__7"},{name:"arch_zoa__8"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1657,name:"main_culture",children:[{id:1656,name:"unesco_patrimoine",children:[{id:1651,name:"unesco_city_boundary",metadata:{is_queryable:!0,metadata_id:"50b22938-4d06-48de-9ff0-d1b7f5f6f39d"},dimensions:{},type:"WMS",layers:"unesco_city_boundary",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_boundary__category"}]},{id:1655,name:"unesco_city_bufferzone",metadata:{is_queryable:!0,metadata_id:"39935dc9-9529-4adb-8cd4-97f9c9600c63"},dimensions:{},type:"WMS",layers:"unesco_city_bufferzone",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_bufferzone__category"}]},{id:1652,name:"unesco_city_old_quarters",metadata:{is_queryable:!0,metadata_id:"168b93e8-7bc4-451c-a642-e2c788e1cc59"},dimensions:{},type:"WMS",layers:"unesco_city_old_quarters",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_old_quarters__category"}]},{id:1653,name:"unesco_city_other_quarters",metadata:{is_queryable:!0,metadata_id:"1d4e8d00-541a-4600-931d-b768b7a42fdb"},dimensions:{},type:"WMS",layers:"unesco_city_other_quarters",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_other_quarters__category"}]},{id:1654,name:"unesco_city_fortress",metadata:{is_queryable:!0,metadata_id:"bc00d9de-4a11-4375-ae74-2f46fb6f7359"},dimensions:{},type:"WMS",layers:"unesco_city_fortress",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_fortress__category"}]}],metadata:{},mixed:!0},{id:1811,name:"culture_institutions",children:[{id:1800,name:"sip_theatres",metadata:{is_queryable:!0,metadata_id:"6745d7eb-93e3-4f55-be5f-2286903e46f0",start_opacity:.9},dimensions:{},type:"WMS",layers:"1800",imageType:"image/png",style:"default",childLayers:[{name:"sip_theatres__POI"}]}],metadata:{},mixed:!0},{id:2561,name:"arch_group",children:[{id:2560,name:"arch_zoa",metadata:{legend_name:"arch:zoa",metadata_id:"3bbec7de-44af-4515-a2d2-04ac569ac657",start_opacity:.5},dimensions:{},type:"WMS",layers:"arch_zoa",imageType:"image/png",childLayers:[{name:"arch_zoa__1"},{name:"arch_zoa__2"},{name:"arch_zoa__3"},{name:"arch_zoa__4"},{name:"arch_zoa__5"},{name:"arch_zoa__6"},{name:"arch_zoa__7"},{name:"arch_zoa__8"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1380,name:"lidar_group",children:[{id:1792,name:"act_lidar_2019_group",children:[{id:1753,name:"lidar_2019_mns",metadata:{legend_name:"lidar:mns2019",metadata_id:"d7bd80d7-23de-462f-bd3e-6bd863e1fc1d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mns",imageType:"image/png"},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"},{id:2188,name:"act_mnt_2019_coloration_alternative_Lux",metadata:{is_queryable:!0,metadata_id:"faf3a8e8-6f3a-424a-9bee-945e99d544dd"},dimensions:{},type:"WMS",layers:"act_mnt_2019_coloration_alternative_Lux",imageType:"image/png",style:"default",childLayers:[{name:"act_mnt_2019_coloration_alternative_Lux__0"}]},{id:2187,name:"act_mnt2017_GR",metadata:{is_queryable:!0,metadata_id:"b5bad4e6-b6cf-45f4-a543-da619b07f567"},dimensions:{},type:"WMS",layers:"act_mnt2017_GR",imageType:"image/png",style:"default",childLayers:[{name:"act_mnt2017_GR__1"}]},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1788,name:"lidar_tiles_2019",metadata:{is_queryable:!0,metadata_id:"b19a500a-b8d5-4a87-a8f3-00f58c3dffcd",start_opacity:.7},dimensions:{},type:"WMS",layers:"lidar_tiles_2019",imageType:"image/png",style:"default",childLayers:[{name:"lidar_tiles_2019__3"},{name:"lidar_tiles_2019__2"}]}],metadata:{},mixed:!0},{id:1791,name:"act_lidar_2017_group",children:[{id:1377,name:"lidar_mns",metadata:{legend_name:"lidar:mns2017",metadata_id:"e7184a37-7a6a-4e07-ae8d-ff06d9969da0"},dimensions:{},type:"WMS",layers:"lidar_mns",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mns__0"}]},{id:1378,name:"lidar_mnt",metadata:{legend_name:"lidar:mnt2017",metadata_id:"1adab94e-d80a-4e19-a808-28f52f633186"},dimensions:{},type:"WMS",layers:"lidar_mnt",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mnt__0"}]},{id:1463,name:"lidar_mnh",metadata:{legend_name:"lidar:mnh",metadata_id:"5f189f5b-08f9-4abc-b3f0-78c37ddf0db1"},dimensions:{},type:"WMS",layers:"lidar_mnh",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mnh__0"}]},{id:1787,name:"lidar_tiles_2017",metadata:{is_queryable:!0,metadata_id:"3c565aff-7394-4d51-915c-0e06dde7765a",start_opacity:.7},dimensions:{},type:"WMS",layers:"lidar_tiles_2017",imageType:"image/png",style:"default",childLayers:[{name:"lidar_tiles_2017__1"},{name:"lidar_tiles_2017__0"}]}],metadata:{},mixed:!0},{id:2470,name:"act_lidar_derivates",children:[{id:2401,name:"act_ponts",metadata:{is_queryable:!0,metadata_id:"2b7d36db-987f-49b4-96d7-60e934ddf926"},dimensions:{},type:"WMS",layers:"act_ponts",imageType:"image/png",childLayers:[{name:"act_ponts__0"},{name:"act_ponts__1"},{name:"act_ponts__2"}]},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"},{id:1753,name:"lidar_2019_mns",metadata:{legend_name:"lidar:mns2019",metadata_id:"d7bd80d7-23de-462f-bd3e-6bd863e1fc1d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mns",imageType:"image/png"},{id:2311,name:"act_hillshade_2019",metadata:{is_queryable:!0,metadata_id:"8171b99e-df8b-4cf0-af36-f77c222e1690"},dimensions:{},type:"WMS",layers:"act_hillshade_2019",imageType:"image/png",style:"default",childLayers:[{name:"act_hillshade_2019__3"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1929,name:"zones_UAS",children:[{id:1927,name:"zones_UAS_0_50m",metadata:{is_queryable:!0,legend_name:"drones",metadata_id:"5589a912-bfa0-4b57-a560-b67e5ff342b9",start_opacity:.6},dimensions:{},type:"WMS",layers:"zones_UAS_0_50m",imageType:"image/png",childLayers:[{name:"zones_UAS_0_50m__0"}]},{id:1928,name:"zones_UAS_50_120m",metadata:{is_queryable:!0,legend_name:"drones",metadata_id:"9e5b263b-4a81-4841-824c-8c44e6261470",start_opacity:.6},dimensions:{},type:"WMS",layers:"zones_UAS_50_120m",imageType:"image/png",childLayers:[{name:"zones_UAS_50_120m__1"}]}],metadata:{},mixed:!0},{id:2132,name:"meteo_live",children:[{id:2133,name:"meteo_live_temp",metadata:{metadata_id:"60fd8ad2-e4aa-45c7-80a7-62b7551e0c6b"},dimensions:{},type:"WMS",layers:"meteo_live_temp",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_temp__MF.PointTimeSeriesObservation_Live_ASTA_avg_ta200"}]},{id:2139,name:"meteo_live_precipitation_sum",metadata:{metadata_id:"cd98c205-6413-49f0-88dd-8c68b02bb68c"},dimensions:{},type:"WMS",layers:"meteo_live_precipitation_sum",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_precipitation_sum__MF.PointTimeSeriesObservation_Live_ASTA_sum_nn050"}]},{id:2135,name:"meteo_live_humidity",metadata:{metadata_id:"7b09bc66-20a9-4d8b-9ae9-0c89f4fddcdf"},dimensions:{},type:"WMS",layers:"meteo_live_humidity",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_humidity__MF.PointTimeSeriesObservation_Live_ASTA_avg_rh200"}]},{id:2136,name:"meteo_live_windspeed",metadata:{metadata_id:"8f12d598-539c-4f58-a401-4422a392f995"},dimensions:{},type:"WMS",layers:"meteo_live_windspeed",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_windspeed__MF.PointTimeSeriesObservation_Live_ASTA_avg_wv1000"}]},{id:2138,name:"meteo_live_sunshine",metadata:{metadata_id:"b05144c8-f416-4bd7-96fe-2d992650db9f"},dimensions:{},type:"WMS",layers:"meteo_live_sunshine",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_sunshine__MF.PointTimeSeriesObservation_Live_ASTA_sum_ssd"}]},{id:2137,name:"meteo_live_irradiation",metadata:{metadata_id:"f1fb363e-1d4e-4fba-9c05-82ddcc8f1e72"},dimensions:{},type:"WMS",layers:"meteo_live_irradiation",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_irradiation__MF.PointTimeSeriesObservation_Live_ASTA_sum_gs200"}]}],metadata:{},mixed:!0},{id:2316,name:"cadastre_commerce_group",children:[{id:2315,name:"cadastre_commerce_wirtschaftszweig",metadata:{is_queryable:!0,metadata_id:"2b6047e0-5092-4f66-926a-e9c79d6b6b88"},dimensions:{},type:"WMS",layers:"cadastre_commerce_wirtschaftszweig",imageType:"image/png",childLayers:[{name:"cadastre_commerce_wirtschaftszweig__5"}]},{id:2439,name:"cadastre_commerce_branchen",metadata:{is_queryable:!0,metadata_id:"5229ca5c-12b8-489b-b5c6-6abd373ac998"},dimensions:{},type:"WMS",layers:"cadastre_commerce_branchen",imageType:"image/png",childLayers:[{name:"cadastre_commerce_branchen__4"}]},{id:2444,name:"cadastre_commerce_betriebsform",metadata:{is_queryable:!0,metadata_id:"70f15780-a4d7-4170-8b2d-4868389c4eef"},dimensions:{},type:"WMS",layers:"cadastre_commerce_betriebsform",imageType:"image/png",childLayers:[{name:"cadastre_commerce_betriebsform__6"}]}],metadata:{},mixed:!0},{id:9999992316,name:"time_layers_e2e",children:[{id:9999991858,name:"starkregen",metadata:{time_config:'{"time_override": {"timepositions": ["2014-08-31T12:43:47.000Z/2020-12-31T23:59:59.000Z/P1M"]}}'},dimensions:{},type:"WMS",layers:"starkregen",imageType:"image/png",childLayers:[{name:"starkregen__0"}],time:{minValue:"2014-08-31T12:43:47Z",maxValue:"2020-12-31T23:59:59Z",interval:[0,1,0,0],resolution:"second",minDefValue:null,maxDefValue:null,mode:"range",widget:"slider"}},{id:9999991859,name:"parz",metadata:{time_config:'{"time_override": {"timepositions": ["2014-08-31T12:43:47.000Z/2020-12-31T23:59:59.000Z/P1M"]}}'},dimensions:{},type:"WMS",layers:"parzelle",imageType:"image/png",childLayers:[{}],time:{minValue:"2014-08-31T12:43:47Z",maxValue:"2020-12-31T23:59:59Z",interval:[0,1,0,0],resolution:"second",minDefValue:"2014-08-31T12:43:47Z",maxDefValue:null,mode:"value",widget:"datepicker"}},{id:9999991860,name:"parz_slider",metadata:{time_config:'{"time_override": {"timepositions": ["2014-08-31T12:43:47.000Z/2020-12-31T23:59:59.000Z/P1M"]}}'},dimensions:{},type:"WMS",layers:"parzelle_slider",imageType:"image/png",childLayers:[{}],time:{minValue:"2014-08-31T12:43:47Z",maxValue:"2020-12-31T23:59:59Z",interval:[0,1,0,0],resolution:"second",minDefValue:"2014-08-31T12:43:47Z",maxDefValue:null,mode:"value",widget:"slider"}},{id:9999991861,name:"act_ortho_time",metadata:{time_config:'{"default_time":"2022-08","time_links":{"2001-08":"ortho_2001","2004-08":"ortho_2004","2007-08":"ortho_2007","2010-08":"ortho_2010","2013-08":"ortho_2013","2016-08":"ortho_2016","2017-08":"ortho_2017","2018-08":"ortho_2018","2019-01":"ortho_2019_winter","2019-08":"ortho_2019","2020-08":"ortho_2020","2021-08":"ortho_2021","2022-08":"ortho_2022"}}',time_layers:{"2001-08-01T00:00:00Z":"ortho_2001","2004-08-01T00:00:00Z":"ortho_2004","2007-08-01T00:00:00Z":"ortho_2007","2010-08-01T00:00:00Z":"ortho_2010","2013-08-01T00:00:00Z":"ortho_2013","2016-08-01T00:00:00Z":"ortho_2016","2017-08-01T00:00:00Z":"ortho_2017","2018-08-01T00:00:00Z":"ortho_2018","2019-01-01T00:00:00Z":"ortho_2019_winter","2019-08-01T00:00:00Z":"ortho_2019","2020-08-01T00:00:00Z":"ortho_2020","2021-08-01T00:00:00Z":"ortho_2021","2022-08-01T00:00:00Z":"ortho_2022"}},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",layer:"act_ortho_time",imageType:"image/jpeg",time:{minValue:"2001-08-01T00:00:00Z",maxValue:"2022-08-01T00:00:00Z",values:["2001-08-01T00:00:00Z","2004-08-01T00:00:00Z","2007-08-01T00:00:00Z","2010-08-01T00:00:00Z","2013-08-01T00:00:00Z","2016-08-01T00:00:00Z","2017-08-01T00:00:00Z","2018-08-01T00:00:00Z","2019-01-01T00:00:00Z","2019-08-01T00:00:00Z","2020-08-01T00:00:00Z","2021-08-01T00:00:00Z","2022-08-01T00:00:00Z"],resolution:"month",minDefValue:"2022-08-01T00:00:00Z",maxDefValue:null,mode:"value",widget:"slider"}},{id:999999,name:"layer_datepicker_range",metadata:{time_config:'{"time_override": {"timepositions": ["2014-08-31T12:43:47.000Z/2020-12-31T23:59:59.000Z/P1M"]}}'},dimensions:{},type:"WMS",layers:"layer_datepicker_range",imageType:"image/png",childLayers:[{}],time:{minValue:"2014-08-31T12:43:47Z",maxValue:"2020-12-31T23:59:59Z",interval:[0,1,0,0],resolution:"second",minDefValue:"2014-08-31T12:43:47Z",maxDefValue:null,mode:"range",widget:"datepicker"}}]}],functionalities:{},metadata:{css:"main.css",display_in_switcher:!0,fake_scales:["750","1500","3000","6000","15000","30000","60000","150000","300000","450000","700000","1500000"],page_title:"map.geoportail.lu",print_img:"bandeau.jpg",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"map.geoportal.lu",print_short_txt_en:"map.geoportal.lu",print_short_txt_fr:"map.geoportal.lu",print_short_txt_lu:"map.geoportal.lu",resolutions:["500.0","250.0","150.0","100.0","50.0","20.0","10.0","5.0","2.0","1.0","0.5","0.25"],show_in_mobile:!0}},{id:122,name:"tourisme",icon:"tourisme",children:[{id:2005,name:"tour_rando_new",children:[{id:2006,name:"tour_rando_highlights_new",children:[{id:189,name:"tour_mullerthal_trail",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"be71ab82-8930-4da7-840d-a99374312093"},dimensions:{},type:"WMS",layers:"tour_mullerthal_trail",imageType:"image/png",style:"default",childLayers:[{name:"tour_mullerthal_trail__category"}]},{id:205,name:"tour_escape_ardenne",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"f01f9d77-cb2e-4189-89a9-df7eed16525b"},dimensions:{},type:"WMS",layers:"tour_escape_ardenne",imageType:"image/png",style:"default",childLayers:[{name:"tour_escape_ardenne__category"}]},{id:1518,name:"tour_rando_eislekpied_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"43514e15-d64c-4c53-b540-e9995a06c52e"},dimensions:{},type:"WMS",layers:"tour_rando_eislekpied_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_eislekpied_new__category"}]},{id:2019,name:"tour_rando_guttlandtrails_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"905f1710-7cb4-4f5b-9da9-3d09f82597a3"},dimensions:{},type:"WMS",layers:"tour_rando_guttlandtrails_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_guttlandtrails_new__category"}]},{id:168,name:"tour_rando_traumschleifen_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"109f2940-b476-4bdd-96a8-7301fa3c7e39"},dimensions:{},type:"WMS",layers:"tour_rando_traumschleifen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_traumschleifen_new__category"}]},{id:250,name:"tour_DeLux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"df101633-54fb-46bb-9d33-91d241c69ae2"},dimensions:{},type:"WMS",layers:"tour_DeLux",imageType:"image/png",style:"default",childLayers:[{name:"tour_DeLux__category"}]},{id:2020,name:"tour_rando_minetttrail_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"84002ce6-1e76-4c38-9c25-3883aa0071ba"},dimensions:{},type:"WMS",layers:"tour_rando_minetttrail_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_minetttrail_new__category"}]},{id:2141,name:"tour_circuit_du_lac",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"61ae77c3-9a90-429c-9590-60b0f616d447"},dimensions:{},type:"WMS",layers:"tour_circuit_du_lac",imageType:"image/png",style:"default",childLayers:[{name:"tour_circuit_du_lac__category"}]},{id:2142,name:"tour_sentier_adrien_ries",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"91563b6c-a5d1-4583-9633-9554e5bbda49"},dimensions:{},type:"WMS",layers:"tour_sentier_adrien_ries",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentier_adrien_ries__category"}]}],metadata:{},mixed:!0},{id:2007,name:"tour_rando_rundwege_new",children:[{id:176,name:"tour_autopedestre",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"1514749f-19e9-4873-9c70-68b34ebc2e30"},dimensions:{},type:"WMS",layers:"tour_autopedestre",imageType:"image/png",style:"default",childLayers:[{name:"tour_autopedestre__category"}]},{id:2048,name:"tour_rando_lokale_wanderwege_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"5c82ad5e-8568-4f95-820d-5689a7eff3ee"},dimensions:{},type:"WMS",layers:"tour_rando_lokale_wanderwege_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_lokale_wanderwege_new__category"}]},{id:2658,name:"tour_komfort_wanderwege_public",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"5f5b3935-1645-4080-a916-24e55acc2395"},dimensions:{},type:"WMS",layers:"tour_komfort_wanderwege_public",imageType:"image/png",style:"default",childLayers:[{name:"tour_komfort_wanderwege_public__category"}]}],metadata:{},mixed:!0},{id:2008,name:"tour_rando_streckenwanderwege_new",children:[{id:235,name:"tour_sentiers_gr",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"004e728b-6e63-4ab7-9b65-f327eb2f7618"},dimensions:{},type:"WMS",layers:"tour_sentiers_gr",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_gr__category"}]},{id:227,name:"tour_sentiers_nationaux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"05311fc8-28fa-470c-984e-879a410ce753"},dimensions:{},type:"WMS",layers:"tour_sentiers_nationaux",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_nationaux__category"}]},{id:158,name:"tour_cfl",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfa696a6-1c25-4ba5-bde1-beb140776881"},dimensions:{},type:"WMS",layers:"tour_cfl",imageType:"image/png",style:"default",childLayers:[{name:"tour_cfl__category"}]},{id:197,name:"tour_sentiers_ajl",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"c2587c18-ed11-44da-99dd-760a3fd73126"},dimensions:{},type:"WMS",layers:"tour_sentiers_ajl",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_ajl__category"}]},{id:218,name:"tour_saint_jacques",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"431c5622-7941-482b-a629-42bd1db17dfe"},dimensions:{},type:"WMS",layers:"tour_saint_jacques",imageType:"image/png",style:"default",childLayers:[{name:"tour_saint_jacques__category"}]},{id:2675,name:"tour_liberation_route",metadata:{is_queryable:!0,metadata_id:"348236c5-0894-4a5b-8a2e-39e22f0b8272"},dimensions:{},type:"WMS",layers:"tour_liberation_route",imageType:"image/png",style:"default",childLayers:[{name:"tour_liberation_route__category"}]}],metadata:{},mixed:!0},{id:2009,name:"tour_rando_thematique_new",children:[{id:2021,name:"tour_rando_natur_geologie_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"4f360781-3708-416a-a6d5-8944a4864737"},dimensions:{},type:"WMS",layers:"tour_rando_natur_geologie_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_natur_geologie_new__category"}]},{id:316,name:"env_sentiersnature",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfc8de82-e187-4547-a1da-83385f86c786"},dimensions:{},type:"WMS",layers:"env_sentiersnature",imageType:"image/png",style:"default",childLayers:[{name:"env_sentiersnature__sentiers_nature"}]},{id:2022,name:"tour_rando_kunst_kultur_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"8fd3ce05-52b9-4104-9ecc-c671281eb8de"},dimensions:{},type:"WMS",layers:"tour_rando_kunst_kultur_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_kunst_kultur_new__category"}]},{id:2023,name:"tour_rando_geschichte_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"92ad7d05-c898-4ed9-8833-8f5ffa4645d3"},dimensions:{},type:"WMS",layers:"tour_rando_geschichte_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_geschichte_new__category"}]},{id:2028,name:"tour_rando_wein_genuss_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"b906a49a-3f35-442d-bada-1a28f132d8fc"},dimensions:{},type:"WMS",layers:"tour_rando_wein_genuss_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_wein_genuss_new__category"}]},{id:2024,name:"tour_rando_barrierefrei_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"7d274be4-fdf0-4a33-995d-cfb45c3d27ba"},dimensions:{},type:"WMS",layers:"tour_rando_barrierefrei_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_barrierefrei_new__category"}]},{id:2029,name:"tour_rando_fitness_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"d4c74795-d5dd-40b3-b17f-1d77eacd352a"},dimensions:{},type:"WMS",layers:"tour_rando_fitness_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_fitness_new__category"}]},{id:2025,name:"tour_rando_kinder_familie_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"6ff5faaa-5a08-4619-a2e5-bdfc29feb9e0"},dimensions:{},type:"WMS",layers:"tour_rando_kinder_familie_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_kinder_familie_new__category"}]},{id:370,name:"luxembourg_on_horse",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"e142f06a-349a-4163-a2a2-9dbdffe3fc95"},dimensions:{},type:"WMS",layers:"luxembourg_on_horse",imageType:"image/png",style:"default",childLayers:[{name:"luxembourg_on_horse__category"}]}],metadata:{},mixed:!0},{id:692,name:"tour_ivv",children:[{id:688,name:"tour_ivv_perm",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"83a51232-c3f3-4670-9f48-22e66a3c2a98"},dimensions:{},type:"WMS",layers:"tour_ivv_perm",imageType:"image/png",style:"default",childLayers:[{name:"tour_ivv_perm__category"}]},{id:693,name:"tour_ivv_temp",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"f2b4174d-65d6-41f4-a612-188ca5f936be"},dimensions:{},type:"WMS",layers:"tour_ivv_temp",imageType:"image/png",style:"default",childLayers:[{name:"tour_ivv_temp__category"}]}],metadata:{},mixed:!0},{id:668,name:"tour_restrictions",children:[{id:667,name:"tour_restrictions_autre",metadata:{is_queryable:!0,metadata_id:"08bf0fb9-1158-46d7-a91a-e8bd6d3bb7f8"},dimensions:{},type:"WMS",layers:"tour_restrictions_autre",imageType:"image/png",style:"default",childLayers:[{name:"tour_restrictions_autre__category"}]},{id:444,name:"anf_dates_battues",metadata:{exclusion:"[340]",is_queryable:!1,metadata_id:"cd5c65e3-ce29-4317-bc07-127bc679861f"},dimensions:{},type:"WMS",layers:"anf_dates_battues",imageType:"image/png",style:"default",childLayers:[{name:"anf_dates_battues__BATTUES_CHASSE"}]}],metadata:{},mixed:!0},{id:2811,name:"tour_randonnee_all",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_randonnee_all",imageType:"image/png",style:"default",childLayers:[{name:"tour_randonnee_all__category"}]}],metadata:{},mixed:!0},{id:2010,name:"tour_velo_new",children:[{id:2011,name:"tour_velo_radwege_new",children:[{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]},{id:512,name:"tour_pistes_velo_mymaps2",metadata:{is_queryable:!0,legend_name:"tour_velo_national",metadata_id:"e9fea021-2aab-4f58-a777-8c7536898d9b"},dimensions:{},type:"WMS",layers:"tour_pistes_velo_mymaps2",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_velo_mymaps2__category"}]},{id:2732,name:"tour_kommunales_radwegenetz",metadata:{is_queryable:!0,metadata_id:"dc769481-d0b2-430b-b350-41698fc3df79"},dimensions:{},type:"WMS",layers:"tour_kommunales_radwegenetz",imageType:"image/png",style:"default",childLayers:[{name:"tour_kommunales_radwegenetz__category"}]},{id:2705,name:"tour_Radwege_Nachbarlaender",metadata:{is_queryable:!0,metadata_id:"3c9b8eb4-310c-4918-abd6-8462c6d16a43"},dimensions:{},type:"WMS",layers:"tour_Radwege_Nachbarlaender",imageType:"image/png",style:"default",childLayers:[{name:"tour_Radwege_Nachbarlaender__category"}]}],metadata:{},mixed:!0},{id:2012,name:"tour_velo_radtouren_new",children:[{id:809,name:"lvi_circuits_cyclables",metadata:{is_queryable:!0,metadata_id:"e5e9ddf6-dfdb-4d3b-a0e2-d1be2272bf38"},dimensions:{},type:"WMS",layers:"lvi_circuits_cyclables",imageType:"image/png",style:"default",childLayers:[{name:"lvi_circuits_cyclables__category"}]},{id:676,name:"tour_velo_route",metadata:{is_queryable:!0,linked_layers:["1713","1714"],metadata_id:"2a07d7fb-ae3e-4385-bf61-b071a7f6ffbd"},dimensions:{},type:"WMS",layers:"tour_velo_route",imageType:"image/png",style:"default",childLayers:[{name:"tour_velo_route__category"}]},{id:293,name:"tour_pistes_vtt",metadata:{is_queryable:!0,linked_layers:["2026"],metadata_id:"2ea699a2-dc3c-4bd6-92fc-f7325b0c7fee"},dimensions:{},type:"WMS",layers:"tour_pistes_vtt",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_vtt__category"}]}],metadata:{},mixed:!0},{id:2706,name:"tour_Fernradwege",children:[{id:2701,name:"tour_EuroVelo5",metadata:{is_queryable:!0,metadata_id:"2355f6bd-8b91-42fc-8071-b47747fef4c8"},dimensions:{},type:"WMS",layers:"tour_EuroVelo5",imageType:"image/png",style:"default",childLayers:[{name:"tour_EuroVelo5__category"}]},{id:2702,name:"tour_Vennbahn",metadata:{is_queryable:!0,metadata_id:"07a2c2d2-f642-4a5a-9c76-bac2a641e481"},dimensions:{},type:"WMS",layers:"tour_Vennbahn",imageType:"image/png",style:"default",childLayers:[{name:"tour_Vennbahn__category"}]},{id:2703,name:"tour_SaarLorLux",metadata:{is_queryable:!0,metadata_id:"23815b5b-6d7a-49a3-9635-69f8a56ce835"},dimensions:{},type:"WMS",layers:"tour_SaarLorLux",imageType:"image/png",style:"default",childLayers:[{name:"tour_SaarLorLux__category"}]},{id:2704,name:"tour_Voie_bleue",metadata:{is_queryable:!0,metadata_id:"aa88ba5e-f09c-4d8f-9bb8-a3ba09b5f6f7"},dimensions:{},type:"WMS",layers:"tour_Voie_bleue",imageType:"image/png",style:"default",childLayers:[{name:"tour_Voie_bleue__category"}]}],metadata:{},mixed:!0},{id:2013,name:"tour_fahrradstationen_new",children:[{id:2821,name:"tour_fahrradverleih",metadata:{is_queryable:!0,metadata_id:"657c2a5f-9aac-4a7f-bf0d-1bd8500c8891"},dimensions:{},type:"WMS",layers:"tour_fahrradverleih",imageType:"image/png",style:"default",childLayers:[{name:"tour_fahrradverleih__21"},{name:"tour_fahrradverleih__22"}]},{id:2040,name:"tour_ebike_ladestationen",metadata:{is_queryable:!0,metadata_id:"f2a97908-06ba-4654-b302-039e5c14ee48"},dimensions:{},type:"WMS",layers:"tour_ebike_ladestationen",imageType:"image/png",style:"default",childLayers:[{name:"tour_ebike_ladestationen__10"}]},{id:2039,name:"tour_fahrradstationen_reparatur_wasch_new",metadata:{is_queryable:!0,metadata_id:"43adb071-d70e-415d-8c4e-3b64bff2a1cb"},dimensions:{},type:"WMS",layers:"tour_fahrradstationen_reparatur_wasch_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_fahrradstationen_reparatur_wasch_new__9"}]},{id:2733,name:"tour_fahrradstationen_waschstationen_new",metadata:{is_queryable:!0,metadata_id:"4cb92c0e-933a-4c6d-8a92-8f6755594641"},dimensions:{},type:"WMS",layers:"tour_fahrradstationen_waschstationen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_fahrradstationen_waschstationen_new__19"}]}],metadata:{},mixed:!0},{id:2014,name:"tour_restrictions_velo_new",children:[{id:1713,name:"chantiers_actuels_pc",metadata:{is_queryable:!0,metadata_id:"7d59f3a6-e8d8-464b-bbf9-73c6ca358a51",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_actuels_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_actuels_pc__CHANTIERS_ACTUEL_PC"}]},{id:1714,name:"chantiers_futurs_pc",metadata:{is_queryable:!0,metadata_id:"f6b9df36-5e62-46d1-ae91-c7c58c7e2e45",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_futurs_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_futurs_pc__CHANTIERS_FUTUR_PC"}]},{id:2026,name:"tour_restrictions_MTB_new",metadata:{is_queryable:!0,metadata_id:"ec4ddb2e-40b2-4844-9f1b-042427772e7b"},dimensions:{},type:"WMS",layers:"tour_restrictions_MTB_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_restrictions_MTB_new__category"}]},{id:444,name:"anf_dates_battues",metadata:{exclusion:"[340]",is_queryable:!1,metadata_id:"cd5c65e3-ce29-4317-bc07-127bc679861f"},dimensions:{},type:"WMS",layers:"anf_dates_battues",imageType:"image/png",style:"default",childLayers:[{name:"anf_dates_battues__BATTUES_CHASSE"}]}],metadata:{},mixed:!0},{id:725,name:"tour_tdl",metadata:{is_queryable:!0,metadata_id:"35226642-3f09-4f98-86b6-6e55316bce53"},dimensions:{},type:"WMS",layers:"tour_tdl",imageType:"image/png",style:"default",childLayers:[{name:"tour_tdl__category"}]}],metadata:{},mixed:!0},{id:336,name:"tour_auto_moto_v2",children:[{id:681,name:"tour_moto",metadata:{is_queryable:!0,metadata_id:"5256618e-6c50-4044-84cb-ce5740abe508"},dimensions:{},type:"WMS",layers:"tour_moto",imageType:"image/png",style:"default",childLayers:[{name:"tour_moto__category"}]},{id:254,name:"tour_touring",metadata:{is_queryable:!0,metadata_id:"89e49996-258f-4a7e-86a3-80e2e9af51c9"},dimensions:{},type:"WMS",layers:"tour_touring",imageType:"image/png",style:"default",childLayers:[{name:"tour_touring__category"}]},{id:685,name:"cita_chantiers_actuel",metadata:{is_queryable:!0,metadata_id:"9c823038-5965-47cc-8dad-21496e57e3f2",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_actuel",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_actuel__CHANTIERS_ACTUEL"}]},{id:2058,name:"grand_tour_luxembourg",metadata:{is_queryable:!0,metadata_id:"d0157590-ddaf-487a-8994-d7142fd07ed8"},dimensions:{},type:"WMS",layers:"grand_tour_luxembourg",imageType:"image/png",style:"default",childLayers:[{name:"grand_tour_luxembourg__category"}]},{id:2674,name:"tour_grand_tour_regionale_touren",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_grand_tour_regionale_touren",imageType:"image/png",style:"default",childLayers:[{name:"tour_grand_tour_regionale_touren__category"}]}],metadata:{},mixed:!0},{id:2015,name:"tour_mobilite_new",children:[{id:2016,name:"tour_bus_bahn_new",children:[{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:817,name:"cdt_lignes_cfl",metadata:{is_queryable:!0,metadata_id:"84ebdfbc-ba25-464c-af86-e74e588978ef"},dimensions:{},type:"WMS",layers:"cdt_lignes_cfl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_cfl__category"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:813,name:"cdt_lignes_all",metadata:{is_queryable:!0,metadata_id:"bbe0523f-374d-4c94-a27d-7ce81d8bae3b"},dimensions:{},type:"WMS",layers:"cdt_lignes_all",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_all__lignes_de_bus_detaillees"},{name:"cdt_lignes_all__lignes_de_bus_detaillees_mymaps"}]},{id:1374,name:"cdt_lignes_tram",metadata:{is_queryable:!0,metadata_id:"0f46c673-d4b4-4c25-8d9a-fca41035f587"},dimensions:{},type:"WMS",layers:"cdt_lignes_tram",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tram__category"}]}],metadata:{},mixed:!0},{id:2017,name:"tour_auto_new",children:[{id:377,name:"mobiliteit_pr",metadata:{is_queryable:!0,legend_name:"mobiliteit:pr",max_dpi:128,metadata_id:"9e0c97ae-aff9-41fc-9489-bbf97999163d"},dimensions:{},type:"WMS",layers:"mobiliteit_pr",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_pr__0"}]},{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:2707,name:"mmtp_electromobilite_AC",metadata:{is_queryable:!0,metadata_id:"08885ef4-d534-47d4-8b93-2883c71a8452"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_AC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_AC__0"}]},{id:2708,name:"mmtp_electromobilite_DC",metadata:{is_queryable:!0,metadata_id:"624d34e4-1192-40bb-871a-e6c8720d766b"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_DC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_DC__2"}]},{id:713,name:"pch_radars",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"385180ba-a9bc-49d4-8858-ba5f19942a66",start_opacity:1},dimensions:{},type:"WMS",layers:"pch_radars",imageType:"image/png",style:"default",childLayers:[{name:"pch_radars__1"},{name:"pch_radars__2"}]},{id:685,name:"cita_chantiers_actuel",metadata:{is_queryable:!0,metadata_id:"9c823038-5965-47cc-8dad-21496e57e3f2",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_actuel",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_actuel__CHANTIERS_ACTUEL"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2018,name:"tour_erleben_new",children:[{id:2042,name:"tour_tourist_info_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_tourist_info_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_tourist_info_new__7"}]},{id:2030,name:"tour_essen_uebernachten_new",children:[{id:2038,name:"tour_hotels_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_hotels_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_hotels_new__2"}]},{id:2037,name:"tour_camping_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_camping_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_camping_new__11"}]},{id:2036,name:"tour_jugendherberge_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_jugendherberge_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_jugendherberge_new__12"}]},{id:2035,name:"tour_fewo_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_fewo_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_fewo_new__13"}]},{id:2034,name:"tour_bb_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_bb_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_bb_new__14"}]},{id:2033,name:"tour_restaurants_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_restaurants_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_restaurants_new__15"}]}],metadata:{},mixed:!0},{id:2031,name:"tour_kultur_new",children:[{id:2044,name:"tour_burgen_schloesser_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_burgen_schloesser_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_burgen_schloesser_new__16"}]},{id:2043,name:"tour_museen_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_museen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_museen_new__17"}]},{id:2027,name:"tour_unesco_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_unesco_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_unesco_new__category"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2032,name:"tour_erste_hilfe_new",children:[{id:2047,name:"hopitaux",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"2047",imageType:"image/png",style:"default",childLayers:[{name:"hopitaux__POI"}]},{id:1621,name:"points_sauvetage_vdl",metadata:{is_queryable:!0,metadata_id:"f8938381-7f09-45d1-becd-506b76327562"},dimensions:{},type:"WMS",layers:"points_sauvetage_vdl",imageType:"image/png",style:"default",childLayers:[{name:"points_sauvetage_vdl__0"}]}],metadata:{},mixed:!0},{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",css:"tourisme.css",display_in_switcher:!0,link_title:"Send email",page_title:"tourisme.geoportail.lu",print_img:"bandeautourisme.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"tourisme.geoportal.lu",print_short_txt_en:"tourisme.geoportal.lu",print_short_txt_fr:"tourisme.geoportail.lu",print_short_txt_lu:"tourisme.geoportal.lu",show_in_mobile:!0}},{id:105,name:"emwelt",icon:"emwelt",children:[{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0},{id:245,name:"env_zones_protegees",children:[{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:334,name:"env_zones_protegees_communautaires",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1823,name:"anf_mesures_compensatoires_group",children:[{id:1827,name:"anf_secteurs_ecologiques_compensation_ecopoint",metadata:{is_queryable:!0,metadata_id:"22033820-7317-4bcc-9c4c-df5b9ca80550"},dimensions:{},type:"WMS",layers:"anf_secteurs_ecologiques_compensation_ecopoint",imageType:"image/png",style:"default",childLayers:[{name:"anf_secteurs_ecologiques_compensation_ecopoint__SECTEURS_COMPENSATION"}]},{id:1822,name:"anf_projets_compensation_approuves",metadata:{is_queryable:!0,metadata_id:"03aafc0c-c443-42ea-963a-8538a3f089d4"},dimensions:{},type:"WMS",layers:"anf_projets_compensation_approuves",imageType:"image/png",style:"default",childLayers:[{name:"anf_projets_compensation_approuves__ZONES_COMPENSATION_APPROUVEES"}]}],metadata:{},mixed:!0},{id:161,name:"env_obs",children:[{id:1963,name:"env_couverture_sol",children:[{id:1951,name:"LISL_Landcover_2018",metadata:{is_queryable:!0,legend_name:"lisl:lc2018",metadata_id:"6142a6a6-9356-47ac-babe-eaa2ae3628b6"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2018__0"},{name:"LISL_Landcover_2018__1"}]},{id:1950,name:"LISL_Landcover_2015_v2",metadata:{is_queryable:!0,legend_name:"lisl:lc2015_2",metadata_id:"67f4ecb8-5d4b-4a9e-a60b-239fc92b25a7"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2015_v2",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2015_v2__0"},{name:"LISL_Landcover_2015_v2__1"}]},{id:2714,name:"LISL_Landcover_2021",metadata:{is_queryable:!0,legend_name:"lisl:lc2018",metadata_id:"e7afeac8-c649-4c91-ab15-ea40b8986ebc"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2021",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2021__0"},{name:"LISL_Landcover_2021__4"}]}],metadata:{},mixed:!0},{id:1964,name:"env_utilisation_sol",children:[{id:1970,name:"LISL_Landuse_2018",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2018",metadata_id:"e4572e0b-1b40-4834-b6c3-ccab83f75f57"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2018__0"}]},{id:2054,name:"LISL_Landuse_2015_v3",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2015_v3",metadata_id:"65e04718-1890-4c5e-8be7-08a73f69c0cc"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2015_v3",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2015_v3__0"}]},{id:1969,name:"LISL_Landuse_2007",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2007",metadata_id:"257556b9-560b-4193-b773-e16a9137a690"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2007",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2007__0"}]}],metadata:{},mixed:!0},{id:1965,name:"env_impermeabilisation",children:[{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]},{id:2216,name:"at_impermeabilisation_grid_2018_100m",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_100m",metadata_id:"210db74a-e33a-401b-9e17-2cd966cdcd1f"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_100m",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_100m__0"}]},{id:2215,name:"at_impermeabilisation_grid_2018_1km",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_1km",metadata_id:"8dc777d0-f910-4c69-a476-85a73dcd8474"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_1km",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_1km__0"}]}],metadata:{},mixed:!0},{id:2212,name:"at_batiments_group",children:[{id:2214,name:"at_batiments_periode_construction",metadata:{is_queryable:!0,legend_name:"at:periode_construction_batiments",metadata_id:"7c138282-86de-4adb-91c2-467b06786821"},dimensions:{},type:"WMS",layers:"at_batiments_periode_construction",imageType:"image/png",style:"default",childLayers:[{name:"at_batiments_periode_construction__0"}]}],metadata:{},mixed:!0},{id:1966,name:"env_occupation_biophysique",children:[{id:215,name:"env_obs2007",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"bd672300-0851-4901-82c4-6099aff1fcf7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_obs2007",imageType:"image/png"},{id:163,name:"env_obs1999",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"b4836d86-2803-4dcf-a991-7e78ab9c41b6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_obs1999",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:276,name:"env_sentiers",children:[{id:316,name:"env_sentiersnature",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfc8de82-e187-4547-a1da-83385f86c786"},dimensions:{},type:"WMS",layers:"env_sentiersnature",imageType:"image/png",style:"default",childLayers:[{name:"env_sentiersnature__sentiers_nature"}]},{id:1857,name:"anf_itineraire_nature",metadata:{is_queryable:!0,legend_name:"anf:vakanz_doheem",metadata_id:"fb71d4b6-b11a-4bf0-9b23-cddaa17e058c"},dimensions:{},type:"WMS",layers:"anf_itineraire_nature",imageType:"image/png",style:"default",childLayers:[{name:"anf_itineraire_nature__0"}]},{id:1968,name:"np_uewersauer_randonnee_eau",metadata:{is_queryable:!0,metadata_id:"2bfd404c-1734-491d-94c3-59a16a3edf2c"},dimensions:{},type:"WMS",layers:"np_uewersauer_randonnee_eau",imageType:"image/png",style:"default",childLayers:[{name:"np_uewersauer_randonnee_eau__category"}]}],metadata:{},mixed:!0},{id:280,name:"anf_unites_admin",children:[{id:427,name:"anf_arrondissements",metadata:{is_queryable:!0,metadata_id:"0ed72c13-1975-4cef-90de-1e4b737f5fbd"},dimensions:{},type:"WMS",layers:"anf_arrondissements",imageType:"image/png",style:"default",childLayers:[{name:"anf_arrondissements__ARRONDISSEMENTS"}]},{id:428,name:"anf_triages",metadata:{is_queryable:!0,metadata_id:"d4bb012a-73ab-4d3c-ac0c-f31e9df07d34"},dimensions:{},type:"WMS",layers:"anf_triages",imageType:"image/png",style:"default",childLayers:[{name:"anf_triages__TRIAGES"}]}],metadata:{},mixed:!0},{id:241,name:"anf_forets",children:[{id:677,name:"anf_proprietes_forestieres",metadata:{is_queryable:!0,legend_name:"anf:proprietes_forestieres",metadata_id:"fa6d38c7-263c-4349-b208-45652f9b98ca"},dimensions:{},type:"WMS",layers:"anf_proprietes_forestieres",imageType:"image/png",style:"default",childLayers:[{name:"anf_proprietes_forestieres__PROPRIETES_FORESTIERES"}]},{id:1514,name:"anf_forets_publiques_fsc_pefc",metadata:{is_queryable:!0,legend_name:"anf:proprietes_forestieres",metadata_id:"ad654091-a8b2-45db-91ff-f3eef50bbe38"},dimensions:{},type:"WMS",layers:"anf_forets_publiques_fsc_pefc",imageType:"image/png",style:"default",childLayers:[{name:"anf_forets_publiques_fsc_pefc__PROPRIETES_FORESTIERES_CERTIFIEES"}]},{id:389,name:"anf_peuplements_semenciers",metadata:{is_queryable:!0,metadata_id:"5d2b9400-3f94-4962-ad67-8b7e923d6d8b"},dimensions:{},type:"WMS",layers:"anf_peuplements_semenciers",imageType:"image/png",style:"default",childLayers:[{name:"anf_peuplements_semenciers__PEUPLEMENTS_SEMENCIERS"}]}],metadata:{},mixed:!0},{id:1953,name:"anf_especes",children:[{id:1961,name:"anf_amphibiens",children:[{id:1962,name:"anf_amphibiens_sauvetage",metadata:{is_queryable:!0,metadata_id:"348a241e-27c4-4d31-8cf0-e99626efa6a1"},dimensions:{},type:"WMS",layers:"anf_amphibiens_sauvetage",imageType:"image/png",style:"default",childLayers:[{name:"anf_amphibiens_sauvetage__0"}]},{id:2759,name:"anf_roadkill",metadata:{is_queryable:!0,metadata_id:"7868aa30-1480-49a7-85ad-bb117974c55e"},dimensions:{},type:"WMS",layers:"anf_roadkill",imageType:"image/png",style:"default",childLayers:[{name:"anf_roadkill__1"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2483,name:"anf_corridors_faune_sauvage_group",children:[{id:2482,name:"anf_corridors_faune_sauvage",metadata:{metadata_id:"58a2c50b-0f4e-4d9c-95ff-5851eebf6e58"},dimensions:{},type:"WMS",layers:"anf_corridors_faune_sauvage",imageType:"image/png",style:"default",childLayers:[{name:"anf_corridors_faune_sauvage__corridors_ecologiques"}]}],metadata:{},mixed:!0},{id:180,name:"anf_secteurs_ecologiques_group",children:[{id:690,name:"anf_secteurs_ecologiques",metadata:{is_queryable:!0,metadata_id:"8afa4162-c23b-4001-b737-4074d4f5360f"},dimensions:{},type:"WMS",layers:"anf_secteurs_ecologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_secteurs_ecologiques__SECTEURS_ECOLOGIQUES"}]}],metadata:{},mixed:!0},{id:322,name:"anf_chasse",children:[{id:1783,name:"anf_lots_chasse_2021",metadata:{exclusion:"[340]",is_queryable:!0,metadata_id:"a8d8f46d-f6b1-4bb0-9935-be825cffab3f"},dimensions:{},type:"WMS",layers:"anf_lots_chasse_2021",imageType:"image/png",style:"default",childLayers:[{name:"anf_lots_chasse_2021__LOTS_CHASSE_2021"}]},{id:444,name:"anf_dates_battues",metadata:{exclusion:"[340]",is_queryable:!1,metadata_id:"cd5c65e3-ce29-4317-bc07-127bc679861f"},dimensions:{},type:"WMS",layers:"anf_dates_battues",imageType:"image/png",style:"default",childLayers:[{name:"anf_dates_battues__BATTUES_CHASSE"}]},{id:1496,name:"anf_centre_ramassage",metadata:{is_queryable:!0,metadata_id:"44f25bb0-6b7d-46fa-8388-ccdf682797ce"},dimensions:{},type:"WMS",layers:"anf_centre_ramassage",imageType:"image/png",style:"default",childLayers:[{name:"anf_centre_ramassage__RAMASSAGE_GIBIER"}]},{id:1658,name:"anf_zone_prevention_ppa",metadata:{is_queryable:!0,metadata_id:"62f2a3ed-5893-4ed2-aba7-77159b10fb2e"},dimensions:{},type:"WMS",layers:"anf_zone_prevention_ppa",imageType:"image/png",style:"default",childLayers:[{name:"anf_zone_prevention_ppa__0"}]}],metadata:{},mixed:!0},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0},{id:1361,name:"aev_casipo_group",children:[{id:1362,name:"aev_casipo",metadata:{is_queryable:!0,metadata_id:"974688ed-130e-4704-ba2c-72154ed0cecb"},dimensions:{},type:"WMS",layers:"aev_casipo",imageType:"image/png",style:"default",childLayers:[{name:"aev_casipo__PARCELLES"}]},{id:1858,name:"aev_anciennes_decharges",metadata:{is_queryable:!0,metadata_id:"ec1a8607-5f8d-4baa-9b14-1aa8ed0a828a"},dimensions:{},type:"WMS",layers:"aev_anciennes_decharges",imageType:"image/png",style:"default",childLayers:[{name:"aev_anciennes_decharges__1"}]}],metadata:{},mixed:!0},{id:1355,name:"aev_qualite_air",children:[{id:2697,name:"aev_qualite_air_zonage",children:[{id:2698,name:"aev_qualite_air_zonage_2021",metadata:{is_queryable:!0,metadata_id:"51eddfec-31e8-4b2a-adba-595e09816ff5"},dimensions:{},type:"WMS",layers:"aev_qualite_air_zonage_2021",imageType:"image/png",style:"default",childLayers:[{name:"aev_qualite_air_zonage_2021__4"},{name:"aev_qualite_air_zonage_2021__5"}]},{id:2725,name:"aev_qualite_air_ancien_zonage",metadata:{is_queryable:!0,metadata_id:"f3a40ebf-e5ad-4495-a0ce-83bbb3df02ed"},dimensions:{},type:"WMS",layers:"aev_qualite_air_ancien_zonage",imageType:"image/png",style:"default",childLayers:[{name:"aev_qualite_air_ancien_zonage__3"}]}],metadata:{},mixed:!0},{id:1472,name:"aev_modelisation",children:[{id:1430,name:"air_quality_o3",metadata:{is_queryable:!0,legend_name:"aev:air_quality_o3",metadata_id:"4ebe5c4d-2318-4caa-bace-3e3784a41509",start_opacity:.75},dimensions:{},type:"WMS",layers:"air_quality_no2",imageType:"image/png",style:"default",childLayers:[{name:"air_quality_o3__1"},{name:"air_quality_o3__7"}]},{id:1429,name:"air_quality_no2",metadata:{is_queryable:!0,legend_name:"aev:air_quality",metadata_id:"d405406f-c1c7-4f47-ae40-e76008a91c4a",start_opacity:.75},dimensions:{},type:"WMS",layers:"air_quality_o3",imageType:"image/png",style:"default",childLayers:[{name:"air_quality_no2__0"},{name:"air_quality_no2__7"}]},{id:1425,name:"air_quality_pm10",metadata:{is_queryable:!0,legend_name:"aev:air_quality_pm10",metadata_id:"94d2f0ea-f0ce-4a79-be7f-1d018deffb61",start_opacity:.7},dimensions:{},type:"WMS",layers:"air_quality_pm10",imageType:"image/png",style:"default",childLayers:[{name:"air_quality_pm10__2"},{name:"air_quality_pm10__7"}]},{id:1480,name:"air_quality_pm2_5",metadata:{is_queryable:!0,legend_name:"aev:air_quality_pm2_5",metadata_id:"5b62c615-448c-4d74-8914-3275e64fbc1e",start_opacity:.75},dimensions:{},type:"WMS",layers:"air_quality_pm2_5",imageType:"image/png",style:"default",childLayers:[{name:"air_quality_pm2_5__7"},{name:"air_quality_pm2_5__9"}]}],metadata:{},mixed:!0},{id:1473,name:"aev_air_mesures",children:[{id:1357,name:"aev_reseau_telemetrique",metadata:{is_queryable:!0,metadata_id:"1be21b78-5824-47d6-87c1-db60c5e3d856"},dimensions:{},type:"WMS",layers:"aev_reseau_telemetrique",imageType:"image/png",style:"default",childLayers:[{name:"aev_reseau_telemetrique__0"}]},{id:1358,name:"aev_poussieres_fines",metadata:{is_queryable:!0,metadata_id:"5e6fa76e-d6d7-41d8-b88f-9ae00e3222d5"},dimensions:{},type:"WMS",layers:"aev_poussieres_fines",imageType:"image/png",style:"default",childLayers:[{name:"aev_poussieres_fines__3"}]},{id:1359,name:"aev_reseau_bergerhoff",metadata:{is_queryable:!0,metadata_id:"735a1453-00f3-402e-91b0-2cd9e677cd2c"},dimensions:{},type:"WMS",layers:"aev_reseau_bergerhoff",imageType:"image/png",style:"default",childLayers:[{name:"aev_reseau_bergerhoff__5"}]},{id:1426,name:"aev_reseau_biosurveillance",metadata:{is_queryable:!0,metadata_id:"68871fde-72b1-45e6-b891-14a8746264ea"},dimensions:{},type:"WMS",layers:"aev_reseau_biosurveillance",imageType:"image/png",style:"default",childLayers:[{name:"aev_reseau_biosurveillance__1"}]}],metadata:{},mixed:!0},{id:1704,name:"aev_mesurage_no2",children:[{id:2696,name:"aev_pacte_climat_participation_communes",metadata:{is_queryable:!0,metadata_id:"60879bfa-1eaa-4b58-984d-405bf2282b1b"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_participation_communes",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_participation_communes__0"}]},{id:2812,name:"aev_pacte_climat_2023",metadata:{is_queryable:!0,legend_name:"aev:klimapakt2023",metadata_id:"223a6d2c-ac2c-4b95-9beb-900fd9b3e168"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2023__10"}]},{id:2594,name:"aev_pacte_climat_2022",metadata:{is_queryable:!0,legend_name:"aev:klimapakt",metadata_id:"9bbf8bb1-b693-49db-8c03-222425195ddc"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2022",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2022__9"}]},{id:2400,name:"aev_pacte_climat_2021",metadata:{is_queryable:!0,legend_name:"aev:klimapakt",metadata_id:"4ce0368e-af4e-456f-9dd1-7969b73360d7"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2021",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2021__8"}]},{id:2088,name:"aev_pacte_climat_2020",metadata:{is_queryable:!0,legend_name:"aev:pacte_climat_2020",metadata_id:"805db173-9621-4b9a-ae8a-a8fae34a791b"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2020",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2020__7"}]},{id:1848,name:"aev_pacte_climat_2019",metadata:{is_queryable:!0,legend_name:"aev:pacte_climat_2019",metadata_id:"aff9f715-babc-4f0b-a86b-16651d626bde"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2019",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2019__5"},{name:"aev_pacte_climat_2019__6"}]},{id:1477,name:"aev_pacte_climat_2018",metadata:{is_queryable:!0,legend_name:"aev:pacte_climat",metadata_id:"bb5aa932-2669-4802-9c34-c370addbc798"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2018",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2018__2"},{name:"aev_pacte_climat_2018__3"}]}],metadata:{},mixed:!0},{id:2171,name:"env_air_inventaires_emissions",children:[{id:2143,name:"env_GRETA",children:[{id:2144,name:"aev_GRETA_A_PublicPower_NOX",metadata:{is_queryable:!0,metadata_id:"587c5d9a-ac3d-42ae-8544-6688020d80df"},dimensions:{},type:"WMS",layers:"aev_GRETA_A_PublicPower_NOX",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_A_PublicPower_NOX__1"}]},{id:2145,name:"aev_GRETA_B_Industry_PCB",metadata:{is_queryable:!0,metadata_id:"a6c3a9cd-9c3d-4f68-9252-403a0a8241c8"},dimensions:{},type:"WMS",layers:"aev_GRETA_B_Industry_PCB",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_B_Industry_PCB__2"}]},{id:2146,name:"aev_GRETA_C_OtherStationaryComb_CO",metadata:{is_queryable:!0,metadata_id:"b922e53c-cfb9-4f7d-8cfe-166b3e518642"},dimensions:{},type:"WMS",layers:"aev_GRETA_C_OtherStationaryComb_CO",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_C_OtherStationaryComb_CO__3"}]},{id:2147,name:"aev_GRETA_D_Fugitive_NMVOC",metadata:{is_queryable:!0,metadata_id:"68f34bfe-dfa8-4d8e-a6df-d8ef47ea296a"},dimensions:{},type:"WMS",layers:"aev_GRETA_D_Fugitive_NMVOC",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_D_Fugitive_NMVOC__4"}]},{id:2148,name:"aev_GRETA_E_Solvents_NMVOC",metadata:{is_queryable:!0,metadata_id:"49ef5406-e0cb-4d36-91f0-c8cd349bb79e"},dimensions:{},type:"WMS",layers:"aev_GRETA_E_Solvents_NMVOC",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_E_Solvents_NMVOC__5"}]},{id:2149,name:"aev_GRETA_F_RoadTransport_NOX",metadata:{is_queryable:!0,metadata_id:"b262fc22-b815-47b4-8a58-8f4c958f0b8e"},dimensions:{},type:"WMS",layers:"aev_GRETA_F_RoadTransport_NOX",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_F_RoadTransport_NOX__6"}]},{id:2150,name:"aev_GRETA_G_Shipping_CO",metadata:{is_queryable:!0,metadata_id:"16a8476a-67ad-43e0-bf86-a0f75eb25d51"},dimensions:{},type:"WMS",layers:"aev_GRETA_G_Shipping_CO",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_G_Shipping_CO__7"}]},{id:2151,name:"aev_GRETA_H_Aviation_NOX",metadata:{is_queryable:!0,metadata_id:"86c039b8-58e8-45b4-8c80-57d341e6a192"},dimensions:{},type:"WMS",layers:"aev_GRETA_H_Aviation_NOX",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_H_Aviation_NOX__8"}]},{id:2152,name:"aev_GRETA_I_Offroad_CO",metadata:{is_queryable:!0,metadata_id:"09fed776-d254-46c3-85ad-21f4f05ac902"},dimensions:{},type:"WMS",layers:"aev_GRETA_I_Offroad_CO",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_I_Offroad_CO__9"}]},{id:2153,name:"aev_GRETA_J_Waste_PCDD",metadata:{is_queryable:!0,metadata_id:"f2219f8d-c455-4c14-9f72-5a0b62fd1fa6"},dimensions:{},type:"WMS",layers:"aev_GRETA_J_Waste_PCDD",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_J_Waste_PCDD__10"}]},{id:2154,name:"aev_GRETA_K_AgrilLivestock_NH3",metadata:{is_queryable:!0,metadata_id:"789a7a4a-0006-4512-b53d-b76173401231"},dimensions:{},type:"WMS",layers:"aev_GRETA_K_AgrilLivestock_NH3",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_K_AgrilLivestock_NH3__11"}]},{id:2155,name:"aev_GRETA_L_AgriOther_NH3",metadata:{is_queryable:!0,metadata_id:"a55b1da7-7e0e-4de0-8e4e-02700bc77a21"},dimensions:{},type:"WMS",layers:"aev_GRETA_L_AgriOther_NH3",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_L_AgriOther_NH3__12"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2172,name:"env_air_installations_tegistres",children:[{id:1465,name:"aev_medium_combustion_plants",metadata:{geocatalog_open_data_last_update_date:"2024-02-09T02:03:38.8412602",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65af7951656c669c7e2c7b68",is_queryable:!0,metadata_id:"1c8dc7c5-f94f-49f6-9d96-3a129b28a922"},dimensions:{},type:"WMS",layers:"aev_medium_combustion_plants",imageType:"image/png",style:"default",childLayers:[{name:"aev_medium_combustion_plants__0"}]},{id:2459,name:"aev_ets_quota",children:[{id:2460,name:"aev_ets_quota_phase3",children:[{id:2450,name:"aev_ets_quota_2013",metadata:{is_queryable:!0,metadata_id:"3a525901-e999-43b7-b76f-4b2685c3126f"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2013",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2013__9"}]},{id:2451,name:"aev_ets_quota_2014",metadata:{is_queryable:!0,metadata_id:"fb7bd65d-1ba7-46ea-bd0a-8fea5ad31fa0"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2014",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2014__8"}]},{id:2452,name:"aev_ets_quota_2015",metadata:{is_queryable:!0,metadata_id:"8c5c24de-6cd4-4799-b15f-be94147f338f"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2015",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2015__7"}]},{id:2453,name:"aev_ets_quota_2016",metadata:{is_queryable:!0,metadata_id:"ae7abf2b-fcd7-4f77-8ffb-b973cdd8efe2"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2016",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2016__6"}]},{id:2454,name:"aev_ets_quota_2017",metadata:{is_queryable:!0,metadata_id:"49168300-890e-4005-9ff2-50db00430846"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2017",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2017__5"}]},{id:2455,name:"aev_ets_quota_2018",metadata:{is_queryable:!0,metadata_id:"75c126a0-0778-4c08-87a1-d568a0112674"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2018",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2018__4"}]},{id:2456,name:"aev_ets_quota_2019",metadata:{is_queryable:!0,metadata_id:"1fbfd062-d911-4186-900d-7ea60f49a533"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2019",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2019__3"}]},{id:2457,name:"aev_ets_quota_2020",metadata:{is_queryable:!0,metadata_id:"b6ad5f19-97bd-4617-8f78-b1805cd8381f"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2020",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2020__2"}]}],metadata:{},mixed:!0},{id:2461,name:"aev_ets_quota_phase4",children:[{id:2458,name:"aev_ets_quota_2021",metadata:{is_queryable:!0,metadata_id:"bbbc661a-2f1c-43f3-9f38-ef7cf7156081"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2021",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2021__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:166,name:"env_bruit",children:[{id:2123,name:"env_bruit_modelisation",children:[{id:232,name:"env_bruit_axes_routiers",children:[{id:2764,name:"aev_bruit_roads_2021_Lden",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lden",metadata_id:"5504291e-3457-416d-84a3-438a83ae029d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lden",imageType:"image/png"},{id:2763,name:"aev_bruit_roads_2021_Lngt",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lngt",metadata_id:"43e0ddd5-7575-4ce7-b558-2114196bd6fe",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lngt",imageType:"image/png"},{id:1497,name:"env_bruit2016_axes_routiers_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"cf1a21cc-8208-420e-bd7e-091d755b6ace",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lden",imageType:"image/png"},{id:1500,name:"env_bruit2016_axes_routiers_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"83ae2d3b-f0d9-4584-8c48-f6722bd4f517",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lngt",imageType:"image/png"},{id:1504,name:"env_bruit_axes_routiers_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"c5a6e3c5-6bef-4ff9-ac3e-aa494a34e602"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots_2016__3"},{name:"env_bruit_axes_routiers_hotspots_2016__13"}]},{id:1505,name:"env_bruit_axes_routiers_agglomeration_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"a6c63355-6e42-4795-9d72-8744b907b151"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration_2016__6"},{name:"env_bruit_axes_routiers_agglomeration_2016__13"}]},{id:326,name:"env_bruit_axes_routiers_lden",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"3e3aa044-89e0-4676-9404-744f64dd7ba0",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lden",imageType:"image/png"},{id:255,name:"env_bruit_axes_routiers_lngt",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"5e4f2607-b114-4884-8e48-8e1faa997eb4",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lngt",imageType:"image/png"},{id:1475,name:"env_bruit_axes_routiers_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"ff6b3d63-871c-4e88-8fc0-0f276abe259a"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots__10"},{name:"env_bruit_axes_routiers_hotspots__13"}]},{id:1485,name:"env_bruit_axes_routiers_agglomeration",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"f1dd0dd5-4dd5-4d88-b556-af39a20ab137",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration__12"},{name:"env_bruit_axes_routiers_agglomeration__13"}]}],metadata:{},mixed:!0},{id:183,name:"env_bruit_axes_ferroviaires",children:[{id:2761,name:"aev_bruit_railways_2021_Lden",metadata:{is_queryable:!0,metadata_id:"e48e5b8f-9388-47ae-b12f-575ed7416ce1",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lden__46"}]},{id:2762,name:"aev_bruit_railways_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"c2106415-df81-4208-9714-7dad0479ab71",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lngt__47"}]},{id:1498,name:"env_bruit2016_axes_ferroviaires_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"7975b71b-2fd4-45e6-8c0a-306671d665c6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lden",imageType:"image/png"},{id:1502,name:"env_bruit2016_axes_ferroviaires_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"170143ce-53ef-4b2b-997c-a2ccb1b84477",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lngt",imageType:"image/png"},{id:1503,name:"env_bruit_axes_ferroviaires_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"29ef44c6-f357-4d21-829c-f2fdd5fe1149"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots_2016__1"},{name:"env_bruit_axes_ferroviaires_hotspots_2016__13"}]},{id:310,name:"env_bruit_axes_ferroviaires_lden",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"32b40d1c-111e-4eed-91c7-61d61ef27b8d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lden",imageType:"image/png"},{id:259,name:"env_bruit_axes_ferroviaires_lngt",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"2d7e26ad-e448-45a2-9045-3dfb3e3ec15b",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lngt",imageType:"image/png"},{id:1476,name:"env_bruit_axes_ferroviaires_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"d3b30653-d0bf-4924-96b2-251e9f61c979"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots__8"},{name:"env_bruit_axes_ferroviaires_hotspots__13"}]}],metadata:{},mixed:!0},{id:190,name:"env_bruit_air",children:[{id:2667,name:"aev_bruit_aeroport_2021_Lden",metadata:{is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"4ceeb788-86c8-420d-a161-43607ed4e89a",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lden__40"}]},{id:2668,name:"aev_bruit_aeroport_2021_Lngt",metadata:{is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"71277cc9-4b62-4199-8a2e-71ca4a863519",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lngt__41"}]},{id:1501,name:"env_bruit2016_axes_aeroport_lden",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"26e208ff-39a3-4cf6-92db-4c6707fe972a",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lden",imageType:"image/png"},{id:1499,name:"env_bruit2016_axes_aeroport_lngt",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"2aa6f79d-74cc-4f22-bedd-748f8e8e30b9",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lngt",imageType:"image/png"},{id:157,name:"env_bruit_air_lden",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"0f4dcfc5-e947-4e5c-9460-702b8e1a572f",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lden",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lden__70"}]},{id:327,name:"env_bruit_air_lngt",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"6b031060-1f82-467d-af86-afe02a3f04fa",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lngt",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lngt__72"}]}],metadata:{},mixed:!0},{id:2771,name:"env_bruit_agglo",children:[{id:2769,name:"aev_bruit_agglo_industry_2021_Lden",metadata:{is_queryable:!0,metadata_id:"4faed79e-f82c-4758-b4bf-df654951b27f",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_industry_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_industry_2021_Lden__37"}]},{id:2770,name:"aev_bruit_agglo_industry_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"e1e006c9-c637-4e2a-840f-3b7e8a04ce1e",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_industry_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_industry_2021_Lngt__38"}]},{id:2768,name:"aev_bruit_agglo_roads_2021_Lden",metadata:{is_queryable:!0,metadata_id:"0015e212-a7e5-42f6-ba94-3fdb5014513c",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_roads_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_roads_2021_Lden__35"}]},{id:2767,name:"aev_bruit_agglo_roads_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"9718d119-a073-4406-8bf1-d4b409ed6a68",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_roads_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_roads_2021_Lngt__36"}]},{id:2765,name:"aev_bruit_agglo_tram_2021_Lden",metadata:{is_queryable:!0,metadata_id:"47bbe08f-dbb4-4a4f-bbf7-8c6084e6da45",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_tram_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_tram_2021_Lden__33"}]},{id:2766,name:"aev_bruit_agglo_tram_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"e11fbfdf-29c4-4845-ad12-e2fc2ef5f530",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_tram_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_tram_2021_Lngt__34"}]}],metadata:{},mixed:!0},{id:2124,name:"env_bruit_multiexposition",children:[{id:2125,name:"aev_multiexposition_Lden",metadata:{is_queryable:!0,metadata_id:"37c1c1a2-1926-4c92-8c2a-b9ce0ac6cfef"},dimensions:{},type:"WMS",layers:"aev_multiexposition_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_multiexposition_Lden__1"}]},{id:2126,name:"aev_multiexposition_Lnight",metadata:{is_queryable:!0,metadata_id:"a536e129-3c0f-4a6c-a767-0519eec880c1"},dimensions:{},type:"WMS",layers:"aev_multiexposition_Lnight",imageType:"image/png",style:"default",childLayers:[{name:"aev_multiexposition_Lnight__2"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1641,name:"aev_campagne_mesure_bruit",children:[{id:2618,name:"aev_bruit_campagne_2023",children:[{id:2726,name:"aev_campagne_bruit_aeroportuaire_2023",metadata:{is_queryable:!0,metadata_id:"3c6a1f70-51ab-4c8b-9a09-c163bafd23ff"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_aeroportuaire_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_aeroportuaire_2023__109"}]}],metadata:{},mixed:!0},{id:2475,name:"env_bruit_campagne_2022",children:[{id:2619,name:"aev_campagne_bruit_routier_2023",metadata:{is_queryable:!0,metadata_id:"e242b817-86a7-4f70-bc41-8e90d264fd19"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_routier_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_routier_2023__97"}]},{id:2620,name:"aev_campagne_bruit_ferroviaire_2023",metadata:{is_queryable:!0,metadata_id:"c3c06743-6876-4f55-802d-4599000c1681"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_ferroviaire_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_ferroviaire_2023__94"}]}],metadata:{},mixed:!0},{id:1916,name:"aev_silent_cities_2020",children:[{id:1917,name:"aev_silent_cities_2020_phase1",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase1",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase1__7"}]},{id:1918,name:"aev_silent_cities_2020_phase2",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase2",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase2__8"}]},{id:1919,name:"aev_silent_cities_2020_phase3",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase3",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase3__9"}]}],metadata:{},mixed:!0},{id:1921,name:"env_bruit_routes_hotspots_2019_group",children:[{id:1642,name:"env_bruit_routes_hotspots_2019",metadata:{is_queryable:!0,legend_name:"aev:hotspots_rail",metadata_id:"f898e289-c5dd-432b-b3e6-de4c3681b77a"},dimensions:{},type:"WMS",layers:"env_bruit_routes_hotspots_2019",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_routes_hotspots_2019__4"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1382,name:"aev_zones_calmes",children:[{id:1383,name:"aev_zones_calmes_rurales",metadata:{is_queryable:!0,legend_name:"aev:zones_calmes",metadata_id:"49cfe40d-b006-4aaa-831b-11d1e19e1411"},dimensions:{},type:"WMS",layers:"aev_zones_calmes_rurales",imageType:"image/png",style:"default",childLayers:[{name:"aev_zones_calmes_rurales__12"}]},{id:1384,name:"aev_zones_calmes_urbaines",metadata:{is_queryable:!0,legend_name:"aev:zones_calmes",metadata_id:"82ba068d-81c3-41d3-a24a-f5dc2545d005"},dimensions:{},type:"WMS",layers:"aev_zones_calmes_urbaines",imageType:"image/png",style:"default",childLayers:[{name:"aev_zones_calmes_urbaines__10"},{name:"aev_zones_calmes_urbaines__7"}]},{id:1385,name:"aev_oases_urbaines",metadata:{is_queryable:!0,legend_name:"aev:zones_calmes",metadata_id:"655d2f1e-c4b6-4f33-a4d1-4171d64bc3b1"},dimensions:{},type:"WMS",layers:"aev_oases_urbaines",imageType:"image/png",style:"default",childLayers:[{name:"aev_oases_urbaines__11"},{name:"aev_oases_urbaines__8"}]},{id:1828,name:"aev_zones_calmes_campagne_groupe",children:[{id:1829,name:"aev_zones_calmes_camp2020_ZCP",metadata:{is_queryable:!0,legend_name:"aev:zones_calmes_20",metadata_id:"d6f1740a-4c8a-40aa-a564-ddb6735f5a34"},dimensions:{},type:"WMS",layers:"aev_zones_calmes_camp2020_ZCP",imageType:"image/png",style:"default",childLayers:[{name:"aev_zones_calmes_camp2020_ZCP__13"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2131,name:"env_esch22",children:[{id:2130,name:"env_esch22_soundwalks",children:[{id:2127,name:"aev_soundwalks_fading_thunders",metadata:{is_queryable:!0,metadata_id:"1374bb36-c9c4-4be0-b81c-d7d1d7ae9684"},dimensions:{},type:"WMS",layers:"aev_soundwalks_fading_thunders",imageType:"image/png",style:"default",childLayers:[{name:"aev_soundwalks_fading_thunders__1"},{name:"aev_soundwalks_fading_thunders__2"}]},{id:2128,name:"aev_soundwalks_city_stories",metadata:{is_queryable:!0,metadata_id:"0e47e8c5-1a26-4928-9a94-d26eba39c738"},dimensions:{},type:"WMS",layers:"aev_soundwalks_city_stories",imageType:"image/png",style:"default",childLayers:[{name:"aev_soundwalks_city_stories__4"},{name:"aev_soundwalks_city_stories__5"}]},{id:2129,name:"aev_soundwalks_blue_noise",metadata:{is_queryable:!0,metadata_id:"3e7eea7f-c751-4c7a-9abb-7bdda313628c"},dimensions:{},type:"WMS",layers:"aev_soundwalks_blue_noise",imageType:"image/png",style:"default",childLayers:[{name:"aev_soundwalks_blue_noise__7"},{name:"aev_soundwalks_blue_noise__8"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1510,name:"aev_dechets",children:[{id:1509,name:"aev_dechets_biogas",metadata:{is_queryable:!0,metadata_id:"2f4a0025-33a4-4015-9acd-4660cef27129"},dimensions:{},type:"WMS",layers:"aev_dechets_biogas",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_biogas__1"}]},{id:1506,name:"aev_dechets_composting",metadata:{is_queryable:!0,metadata_id:"fe751427-564d-44b3-9d06-90a5d1a5054c"},dimensions:{},type:"WMS",layers:"aev_dechets_composting",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_composting__0"}]},{id:1507,name:"aev_dechets_inert_waste",metadata:{is_queryable:!0,metadata_id:"e17908a0-c45d-4312-bc8b-fdde4b5c5d83"},dimensions:{},type:"WMS",layers:"aev_dechets_inert_waste",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_inert_waste__2"}]},{id:1508,name:"aev_dechets_recycling",metadata:{is_queryable:!0,metadata_id:"7dc38059-fbac-4287-99aa-4d04bb7dd761"},dimensions:{},type:"WMS",layers:"aev_dechets_recycling",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_recycling__3"}]},{id:1801,name:"aev_dechets_menager",metadata:{is_queryable:!0,metadata_id:"8e63ec89-7d10-4374-88bc-580caabf9783"},dimensions:{},type:"WMS",layers:"aev_dechets_menager",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_menager__5"}]},{id:1933,name:"aev_dechets_stations_epuration",metadata:{is_queryable:!0,metadata_id:"b821085f-91a1-431e-a385-2f9e0dfef43d"},dimensions:{},type:"WMS",layers:"aev_dechets_stations_epuration",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_stations_epuration__6"}]},{id:2723,name:"aev_dechets_boues_epuration",metadata:{is_queryable:!0,metadata_id:"2c6d717e-6534-4c2b-86a7-b3b99c4cf114"},dimensions:{},type:"WMS",layers:"aev_dechets_boues_epuration",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_boues_epuration__7"}]}],metadata:{},mixed:!0},{id:1466,name:"aev_facilities_registers",children:[{id:803,name:"cadastre_hertzien_group",children:[{id:811,name:"mat_antennes_moins_50_watt",metadata:{is_queryable:!0,legend_name:"at:antennesbelow50w",metadata_id:"cbf57825-26ba-4e36-98e8-083c1945066c"},dimensions:{},type:"WMS",layers:"mat_antennes_moins_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_antennes_moins_50_watt__0"}]},{id:1930,name:"mat_5G_antennes_plus_50_watt",metadata:{is_queryable:!0,metadata_id:"76e25a5d-8e78-40cb-a54b-9cfc27b16e60"},dimensions:{},type:"WMS",layers:"mat_5G_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_5G_antennes_plus_50_watt__0"}]},{id:2053,name:"mat_5G-3.6GHZ_antennes_plus_50_watt",metadata:{is_queryable:!0,metadata_id:"e048acda-0ec7-4f52-8221-613d9312c28b"},dimensions:{},type:"WMS",layers:"mat_5G-3.6GHZ_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_5G-3.6GHZ_antennes_plus_50_watt__0"}]},{id:801,name:"mat_antennes_plus_50_watt",metadata:{is_queryable:!0,legend_name:"at:antennes",metadata_id:"e4a24392-591c-4d20-a62b-f75a9191488d"},dimensions:{},type:"WMS",layers:"mat_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_antennes_plus_50_watt__0"}]},{id:802,name:"mat_points_mesure",metadata:{is_queryable:!0,legend_name:"at:pointmesure",metadata_id:"f8f71353-40b8-4e10-b72c-85d8fe9e0577"},dimensions:{},type:"WMS",layers:"mat_points_mesure",imageType:"image/png",style:"default",childLayers:[{name:"mat_points_mesure__0"}]}],metadata:{is_expanded:!0},mixed:!0},{id:1360,name:"aev_emplacements_eoliennes",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:02:39.4998465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"5e739028d2bfb222b781c722",is_queryable:!0,legend_name:"aev:eoliennes",metadata_id:"354c5313-a733-4121-8f0d-5e0932d563b7"},dimensions:{},type:"WMS",layers:"aev_emplacements_eoliennes",imageType:"image/png",style:"default",childLayers:[{name:"aev_emplacements_eoliennes__2"}]},{id:1826,name:"aev_facilities_ied",metadata:{geocatalog_open_data_last_update_date:"2024-07-17T01:05:05.5508376",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"6690f0b6663adf116ea5d0f9",is_queryable:!0,legend_name:"aev_facilities_ied",metadata_id:"2606152c-0169-41a2-843e-861e15e9024c"},dimensions:{},type:"WMS",layers:"aev_facilities_ied",imageType:"image/png",style:"default",childLayers:[{name:"aev_facilities_ied__0"}]},{id:798,name:"seveso",metadata:{is_queryable:!0,legend_name:"seveso",metadata_id:"b9ab14d8-4e51-4146-b019-3937715a8fe8"},dimensions:{},type:"WMS",layers:"seveso",imageType:"image/png",style:"default",childLayers:[{name:"seveso__POI"}]}],metadata:{},mixed:!0},{id:1467,name:"radon",children:[{id:1468,name:"carte_radon_communes",metadata:{is_queryable:!0,legend_name:"radon",metadata_id:"80309cdb-b664-4ea8-a3a4-c602f5814f79",start_opacity:.7},dimensions:{},type:"WMS",layers:"carte_radon_communes",imageType:"image/png",style:"default",childLayers:[{name:"carte_radon_communes__3"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",css:"anf.css",display_in_switcher:!0,link_title:"Portail Environnement",page_title:"emwelt.geoportail.lu",print_img:"anf_right.jpg",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"emwelt.geoportal.lu",print_short_txt_en:"emwelt.geoportal.lu",print_short_txt_fr:"emwelt.geoportail.lu",print_short_txt_lu:"emwelt.geoportal.lu",show_in_mobile:!0}},{id:128,name:"eau",icon:"eau",children:[{id:234,name:"eau_basisdaten",children:[{id:317,name:"eau_topographie",children:[{id:206,name:"topo_20k",metadata:{legend_name:"topo_20k",metadata_id:"ea998ae8-731a-43bc-aa9f-171684f97602"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_20k",imageType:"image/png"}],metadata:{},mixed:!0},{id:160,name:"eau_luft_sat_bilder",children:[{id:2056,name:"ortho_2020",metadata:{exclusion:"[119,219]",metadata_id:"87870b8a-10a1-4c33-bf50-7efe851fd450"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2020",imageType:"image/jpeg"},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1784,name:"ortho_2019",metadata:{exclusion:"[116,216]",metadata_id:"97c88ef6-6c64-4cb0-a134-06bb42b2b448"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019",imageType:"image/jpeg"},{id:1527,name:"ortho_2018",metadata:{exclusion:"[113,213]",metadata_id:"6fde72c4-802f-4663-be74-5fa5901cb4f0"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2018",imageType:"image/jpeg"},{id:1371,name:"ortho_2017",metadata:{exclusion:"[111,211]",metadata_id:"1cdae616-1a7a-49d5-b35d-05864891641f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017",imageType:"image/jpeg"},{id:745,name:"ortho_2016",metadata:{exclusion:"[107,207]",metadata_id:"bba79b6d-4205-4ce4-98e4-7b7922afcd55"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016",imageType:"image/jpeg"},{id:224,name:"ortho_2004",metadata:{exclusion:"[103,203]",metadata_id:"a185f78a-ca9c-43f8-8d06-b1abba8ff056"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2004",imageType:"image/jpeg"},{id:225,name:"ortho_2001",metadata:{exclusion:"[104,204]",metadata_id:"e6ff269c-1c7c-401f-a90b-b805e80a046e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2001",imageType:"image/jpeg"},{id:292,name:"wg_ikonos_satellitendaten",metadata:{legend_name:"wg:ikonos_satellitendaten",metadata_id:"db0eea79-114a-4e61-a1f2-7e064f92cdd3"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_ikonos_satellitendaten",imageType:"image/png"}],metadata:{},mixed:!0},{id:318,name:"eau_landnutzung",children:[{id:301,name:"wg_landnutzung",metadata:{is_queryable:!0,legend_name:"wg:landnutzung",metadata_id:"f53e9c0b-a269-48e6-b77c-061e7ac2e116",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_landnutzung",imageType:"image/png"},{id:308,name:"wg_versiegelungsklassen",metadata:{legend_name:"wg:versiegelungsklassen",metadata_id:"7e48b187-3080-4bf6-aaa8-6a58fe513380",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_versiegelungsklassen",imageType:"image/png"}],metadata:{},mixed:!0},{id:186,name:"eau_grenzen",children:[{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]}],metadata:{},mixed:!0},{id:165,name:"adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0},{id:169,name:"eau_zones_protegees",children:[{id:207,name:"eau_zones_protegees_nationales",children:[{id:319,name:"eau_anf_reserves",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:330,name:"geodesy",children:[{id:1831,name:"ng_new",metadata:{is_queryable:!0,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"ng_new",imageType:"image/png",style:"default",childLayers:[{name:"ng_new__0"}]},{id:411,name:"ng",metadata:{is_queryable:!0,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"ng",imageType:"image/png",style:"default",childLayers:[{name:"ng__POINT_NG"}]},{id:1724,name:"points_reference_gps",metadata:{is_queryable:!0,metadata_id:"fd406ca9-2542-4de9-8cee-7ee0a16c7f42"},dimensions:{},type:"WMS",layers:"points_reference_gps",imageType:"image/png",style:"default",childLayers:[{name:"points_reference_gps__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:453,name:"eau_new_Messstationen",children:[{id:485,name:"eau_new_Hydrologische_Messstationen",children:[{id:655,name:"eau_new_Wasserstand",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:12.0164112",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"59c220a4111e9b1de61d8864",is_queryable:!0,legend_name:"eau:wasserstand",max_dpi:128,metadata_id:"124abb10-1d87-4449-912b-06fbf307a95f"},dimensions:{},type:"WMS",layers:"eau_new_Wasserstand",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Wasserstand__2"}]},{id:653,name:"eau_new_Alluvialer_Grundwasserspiegel",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.915308",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5fd1caf5e9996e5faf62ea74",is_queryable:!0,legend_name:"eau:alluvialer_grundwasserspiegel",max_dpi:128,metadata_id:"4d328b62-5df3-4205-a45a-4d3d36dc0fa8"},dimensions:{},type:"WMS",layers:"eau_new_Alluvialer_Grundwasserspiegel",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Alluvialer_Grundwasserspiegel__3"}]}],metadata:{},mixed:!0},{id:460,name:"eau_new_Klimatologische_Messstationen",children:[{id:609,name:"eau_new_Niederschlag",metadata:{is_queryable:!0,legend_name:"eau:niederschlag",max_dpi:128,metadata_id:"288300c6-5d83-45a6-98ef-4146f37129e2"},dimensions:{},type:"WMS",layers:"eau_new_Niederschlag",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Niederschlag__5"}]},{id:595,name:"eau_new_Lufttemperatur",metadata:{is_queryable:!0,legend_name:"eau:lufttemperatur",max_dpi:128,metadata_id:"6d73e310-0ef2-4e19-863d-387a90405e78"},dimensions:{},type:"WMS",layers:"eau_new_Lufttemperatur",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Lufttemperatur__6"}]},{id:620,name:"eau_new_Bodentemperatur",metadata:{is_queryable:!0,legend_name:"eau:bodentemperatur",max_dpi:128,metadata_id:"ebded1e9-613e-4f58-a47f-386676a0a39f"},dimensions:{},type:"WMS",layers:"eau_new_Bodentemperatur",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bodentemperatur__7"}]},{id:610,name:"eau_new_Schneehoehe",metadata:{is_queryable:!0,legend_name:"eau:schneehoehe",max_dpi:128,metadata_id:"60c9ec41-6fa8-4aed-8822-bfdad9ab755d"},dimensions:{},type:"WMS",layers:"eau_new_Schneehoehe",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Schneehoehe__8"}]},{id:615,name:"eau_new_Luftfeucht",metadata:{is_queryable:!0,legend_name:"eau:luftfeucht",max_dpi:128,metadata_id:"bbb784cd-a8f2-4f60-8d2d-8a7bd341ac73"},dimensions:{},type:"WMS",layers:"eau_new_Luftfeucht",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Luftfeucht__9"}]},{id:563,name:"eau_new_Luftdruck",metadata:{is_queryable:!0,legend_name:"eau:luftdruck",max_dpi:128,metadata_id:"1ebc644b-0643-495f-84ed-c820459920cc"},dimensions:{},type:"WMS",layers:"eau_new_Luftdruck",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Luftdruck__10"}]},{id:616,name:"eau_new_Globalstrahlung",metadata:{is_queryable:!0,legend_name:"eau:globalstrahlung",max_dpi:128,metadata_id:"f5d2d484-adb2-46fc-95f0-9a94c85db5de"},dimensions:{},type:"WMS",layers:"eau_new_Globalstrahlung",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Globalstrahlung__11"}]}],metadata:{},mixed:!0},{id:472,name:"eau_new_Oberflaechengewaesser_Messstationen",children:[{id:2487,name:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_2e_zyklus",metadata:{is_queryable:!0,legend_name:"eau:wrrl_ueberwachungsnetzwerk_owk_-_2e_zyklus",metadata_id:"97e6564c-7758-4850-9606-c690a1c1c4ba"},dimensions:{},type:"WMS",layers:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_2e_zyklus",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_2e_zyklus__432"}]},{id:2488,name:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_3e_zyklus",metadata:{is_queryable:!0,legend_name:"eau:wrrl_ueberwachungsnetzwerk_owk_-_3e_zyklus",metadata_id:"01a0bbed-f787-4f5b-a89f-1abed736896c"},dimensions:{},type:"WMS",layers:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_3e_zyklus",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_3e_zyklus__433"}]},{id:654,name:"eau_new_Oberflchengewsser_Nitratrichtlinie_91_676_CEE",metadata:{geocatalog_open_data_last_update_date:"2024-09-03T01:02:57.1228277",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66d6604000b5fead3c39cf42",is_queryable:!0,legend_name:"eau:nitratrichtlinie_messstationen",max_dpi:128,metadata_id:"dc7d9871-2693-4714-b1f6-ab202a59d28b"},dimensions:{},type:"WMS",layers:"654",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflchengewsser_Nitratrichtlinie_91_676_CEE__16"}]}],metadata:{},mixed:!0},{id:473,name:"eau_new_Grundwasser_Messstationen",children:[{id:2489,name:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_2e_zyklus",metadata:{is_queryable:!0,legend_name:"eau:wrrl_ueberwachungsnetzwerk_gwk_-_2e_zyklus",metadata_id:"b3fda5d5-c071-4ea0-bb1c-d2bf9ca36af1"},dimensions:{},type:"WMS",layers:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_2e_zyklus",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_2e_zyklus__466"}]},{id:2490,name:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_3e_zyklus",metadata:{is_queryable:!0,legend_name:"eau:wrrl_ueberwachungsnetzwerk_gwk_-_3e_zyklus",metadata_id:"d0f6a240-48c4-434c-a762-cd2fdb427cf9"},dimensions:{},type:"WMS",layers:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_3e_zyklus",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_3e_zyklus__467"}]},{id:570,name:"eau_new_Grundwasser_Nitratrichtlinie_91_676_CEE",metadata:{geocatalog_open_data_last_update_date:"2024-09-04T01:03:05.9320276",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66d7b1c987ac9208bf4692ea",is_queryable:!0,legend_name:"eau:grundwasser_nitratrichtlinie",max_dpi:128,metadata_id:"9b358488-a605-46af-81eb-90c4ab7c9931"},dimensions:{},type:"WMS",layers:"570",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasser_Nitratrichtlinie_91_676_CEE__320"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:484,name:"eau_new_Hydrografie",children:[{id:450,name:"eau_new_Gewaessernetz",children:[{id:749,name:"eau_new_Gewsser",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewsser__23"},{name:"eau_new_Gewsser__24"},{name:"eau_new_Gewsser__25"}]},{id:651,name:"eau_new_Kanal_-__Muehlgraben",metadata:{is_queryable:!0,legend_name:"eau:kanal_-__muehlgraben",max_dpi:128,metadata_id:"909501fc-a0a9-4af8-8e82-f2a8d7f2fe2f"},dimensions:{},type:"WMS",layers:"eau_new_Kanal_-__Muehlgraben",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kanal_-__Muehlgraben__26"}]},{id:750,name:"eau_new_Kilometrierung der Gewsser",metadata:{legend_name:"eau:kilometrierung_primaere_gewaesser_kilometrierung_sekundaere_gewaesser",metadata_id:"4002b1cf-08b5-421a-bc92-40271d62f03c"},dimensions:{},type:"WMS",layers:"eau_new_Kilometrierung der Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kilometrierung der Gewsser__27"},{name:"eau_new_Kilometrierung der Gewsser__28"}]},{id:636,name:"eau_new_Einzugsgebiete",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.8156287",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb010cc765e17f1820811",is_queryable:!0,legend_name:"eau:einzugsgebiete",max_dpi:128,metadata_id:"a295a30a-f819-400c-842c-d0ccc695bea5"},dimensions:{},type:"WMS",layers:"eau_new_Einzugsgebiete",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einzugsgebiete__29"}]},{id:569,name:"eau_new_Stausee_Sauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:09.6659471",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece210cc765e1a2422811f",is_queryable:!0,legend_name:"eau:stausee_sauer",max_dpi:128,metadata_id:"119ad2e3-b44f-4777-883d-d2d522bafeca"},dimensions:{},type:"WMS",layers:"eau_new_Stausee_Sauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Stausee_Sauer__30"}]}],metadata:{},mixed:!0},{id:451,name:"eau_new_Fischerei",children:[{id:626,name:"eau_new_Fischereiabschnitte",metadata:{geocatalog_open_data_last_update_date:"2024-09-11T01:02:43.2828183",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecb079111e9b02db9a6ece",is_queryable:!0,legend_name:"eau:fischereiabschnitte",max_dpi:128,metadata_id:"bd6be85a-cec4-4e4d-9657-cffa242db28f"},dimensions:{},type:"WMS",layers:"eau_new_Fischereiabschnitte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fischereiabschnitte__37"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:483,name:"eau_new_Grundwasser",children:[{id:628,name:"eau_new_Bohrungen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:16.7602644",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb039cc765e18ae5ed882",is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen__39"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]},{id:631,name:"eau_new_Grundwasserleiter",metadata:{geocatalog_open_data_last_update_date:"2024-06-03T01:02:35.1743465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecafe1cc765e18ae5ed87e",is_queryable:!0,legend_name:"eau:grundwasserleiter",max_dpi:128,metadata_id:"783a8608-e4b3-44ed-8864-68525da33760"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserleiter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserleiter__41"}]},{id:2396,name:"eau_new_Einschraenkung_Waermepumpe_(public)",metadata:{legend_name:"eau:einschraenkung_waermepumpe",max_dpi:128,metadata_id:"ed3ff125-47cc-4247-abaf-77e05cf60984"},dimensions:{},type:"WMS",layers:"eau_new_Einschraenkung_Waermepumpe_(public)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einschraenkung_Waermepumpe_(public)__453"}]},{id:2288,name:"eau_new_Einschraenkung_Waermepumpe_nouvelle_couche",metadata:{legend_name:"eau:einschraenkung_waermepumpe_15m",max_dpi:128,metadata_id:"b2d715ed-660e-46e6-8c5f-ee3327e0fcb9"},dimensions:{},type:"WMS",layers:"eau_new_Einschraenkung_Waermepumpe_nouvelle_couche",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einschraenkung_Waermepumpe_nouvelle_couche__446"}]},{id:2794,name:"eau_restrictions_forages_prives_prelevement",metadata:{legend_name:"eau:restrictions_nouveaux_forages_prives",metadata_id:"b2f60fc1-c2e8-4472-a8e2-4e11a862b257"},dimensions:{},type:"WMS",layers:"eau_restrictions_forages_prives_prelevement",imageType:"image/png",style:"default",childLayers:[{name:"eau_restrictions_forages_prives_prelevement__475"}]}],metadata:{},mixed:!0},{id:448,name:"eau_new_Trinkwasser",children:[{id:567,name:"eau_new_Trinkwasserentnahmepunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.3958552",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb044cc765e17f1820812",is_queryable:!0,legend_name:"eau:trinkwasserentnahmepunkte",max_dpi:128,metadata_id:"a049086b-9c17-4ba6-b9bf-78cb4af8ee68"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwasserentnahmepunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwasserentnahmepunkte__47"}]},{id:598,name:"eau_new_Trinkwasserbehaelter",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:23.7053926",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb062cc765e18ae5ed883",is_queryable:!0,legend_name:"eau:trinkwasserbehaelter",max_dpi:128,metadata_id:"abe5466d-e045-4872-a17c-7379adc497f5"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwasserbehaelter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwasserbehaelter__49"}]},{id:538,name:"eau_new_Trinkwassersyndikate",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.3237467",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecb057111e9b02db9a6ecd",is_queryable:!0,legend_name:"eau_new:trinkwassersyndikate",max_dpi:128,metadata_id:"63ecd69e-5714-4311-b05a-5bfa191ac546"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwassersyndikate",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwassersyndikate__50"}]},{id:2573,name:"eau_certificat_drepsi",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:09.7919567",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"665921c12d0aeb8d9802c3d3",is_queryable:!0,legend_name:"eau:drepsi",metadata_id:"5ecb8e6f-383d-424c-a399-f2faa3e24a8d"},dimensions:{},type:"WMS",layers:"eau_certificat_drepsi",imageType:"image/png",style:"default",childLayers:[{name:"eau_certificat_drepsi__468"}]},{id:1754,name:"eau_new_qualite_eau_potable",children:[{id:1767,name:"eau_new_wasserhaerte",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.6951685",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"665921c72d0aeb8d9802c3d4",legend_name:"eau:wasserhaerte",metadata_id:"28e8de6e-9274-4e62-be68-a071b6e8db1c"},dimensions:{},type:"WMS",layers:"eau_new_wasserhaerte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_wasserhaerte__361"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:373,name:"eau_new_Trinkwasser_Schutzzonen_(ZPS)",children:[{id:214,name:"eau_new_Provisorische_ZPS",metadata:{geocatalog_open_data_last_update_date:"2024-10-03T01:04:17.082383",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece254111e9b03b03833c4",is_queryable:!0,legend_name:"eau:provisorische_zps",max_dpi:128,metadata_id:"ddc51f25-2fb7-4d14-866a-a08f8af8ef03"},dimensions:{},type:"WMS",layers:"eau_new_Provisorische_ZPS",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Provisorische_ZPS__130"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:1464,name:"eau_prgd_zones_protection_lac",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.5407176",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5b571c9546f3b55625dc355c",is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_prgd_zones_protection_lac__349"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]},{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]}],metadata:{},mixed:!0},{id:469,name:"eau_new_Schutzgebiete",children:[{id:656,name:"eau_new_Badegewaesser",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecaff2cc765e18ae5ed87f",is_queryable:!0,legend_name:"eau:badegewaesser",max_dpi:128,metadata_id:"72f770ee-7290-4ecb-9358-580b7cfcadf7"},dimensions:{},type:"WMS",layers:"eau_new_Badegewaesser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Badegewaesser__135"}]},{id:581,name:"eau_new_Badegewaesser_-_Qualitaet",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece261cc765e1a24228120",is_queryable:!0,legend_name:"eau:badegewaesser_-_qualitaet",max_dpi:128,metadata_id:"c0c9c705-8b26-4a0b-b9bb-e2243cd5386a"},dimensions:{},type:"WMS",layers:"eau_new_Badegewaesser_-_Qualitaet",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Badegewaesser_-_Qualitaet__136"}]},{id:612,name:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_uuid:"57ece27bcc765e1a270cf61d",is_queryable:!0,legend_name:"eau:empfindliche_gebiete_kommunalabwasserrichtlinie",max_dpi:128,metadata_id:"39952e6c-8e73-4a23-a19c-78c4f06c84d9"},dimensions:{},type:"WMS",layers:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)__139"}]},{id:492,name:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)",metadata:{geocatalog_open_data_last_update_date:"2024-09-04T01:02:59.0520396",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66d7b1c287ac9208bf4692e9",is_queryable:!0,legend_name:"eau:gefaehrdete_gebiete_nitratrichtlinie",max_dpi:128,metadata_id:"9426a9a6-7cb1-4c1a-a504-40dabc4429c0"},dimensions:{},type:"WMS",layers:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)__140"}]}],metadata:{},mixed:!0},{id:470,name:"eau_new_Gewaesserschutz",children:[{id:643,name:"eau_new_Abwassersyndikate",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.7305149",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece2dd111e9b03b03833c5",is_queryable:!0,legend_name:"eau:abwassersyndikate",max_dpi:128,metadata_id:"4b5e384c-5603-4cf4-9bd5-6e520df5c375"},dimensions:{},type:"WMS",layers:"eau_new_Abwassersyndikate",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Abwassersyndikate__143"}]},{id:645,name:"eau_new_Klaeranlagen",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.116702",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece288cc765e1a25470f74",is_queryable:!0,legend_name:"eau:klaeranlagen",max_dpi:128,metadata_id:"53e55765-90eb-438f-a744-3ac878b06334"},dimensions:{},type:"WMS",layers:"eau_new_Klaeranlagen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Klaeranlagen__142"}]}],metadata:{},mixed:!0},{id:486,name:"eau_new_Hochwasserrisikomanagement-Richtlinie [HWRM-RL]",children:[{id:1696,name:"eau_new_Risikogewaesser_2019_group",children:[{id:1703,name:"eau_Risikogewaesser_2019",metadata:{is_queryable:!0,legend_name:"eau:risikogewaesser_2019",metadata_id:"762cd956-9733-4855-afa7-38768a38e8a1"},dimensions:{},type:"WMS",layers:"eau_Risikogewaesser_2019",imageType:"image/png",style:"default",childLayers:[{name:"eau_Risikogewaesser_2019__16"}]}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:1711,name:"eau_atlas_crues_subites",children:[{id:2045,name:"age_dangers_fortes",metadata:{legend_name:"age_dangers_fortes",metadata_id:"55dbe91c-f1e5-4c56-b0b9-4590988e23e5"},dimensions:{},type:"WMS",layers:"age_dangers_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_dangers_fortes__0"},{name:"age_dangers_fortes__1"}]},{id:2046,name:"age_risques_fortes",metadata:{legend_name:"age_risques_fortes",metadata_id:"f1d9b1cd-ad78-44df-89ac-ad591138243f"},dimensions:{},type:"WMS",layers:"age_risques_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_risques_fortes__1"},{name:"age_risques_fortes__2"},{name:"age_risques_fortes__3"},{name:"age_risques_fortes__4"},{name:"age_risques_fortes__5"}]}],metadata:{},mixed:!0},{id:461,name:"eau_new_Historische_Ueberschwemmungsgebiete",children:[{id:637,name:"eau_new_UESG_1983_-_Mosel",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.2797021",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde16111e9b03b03833be",is_queryable:!0,legend_name:"eau:uesg_1983_-_mosel",max_dpi:128,metadata_id:"e6896207-c0f9-417e-9661-119128628e8e"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1983_-_Mosel",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1983_-_Mosel__122"}]},{id:641,name:"eau_new_UESG_1993_(ausser_Mosel)",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:25.7826569",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde1e111e9b03b03833bf",is_queryable:!0,legend_name:"eau:uesg_1993_ausser_mosel",max_dpi:128,metadata_id:"78c692f3-ad20-467b-b03a-0d020a821647"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1993_(ausser_Mosel)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1993_(ausser_Mosel)__123"}]},{id:642,name:"eau_new_UESG_Alzette_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.5894792",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde26111e9b03b03833c0",is_queryable:!0,legend_name:"eau:uesg_alzette_1995",max_dpi:128,metadata_id:"aaf81780-df85-4580-a890-fded8ae03db7"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Alzette_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Alzette_1995__124"}]},{id:633,name:"eau_new_UESG_Sauer_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.4493603",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde30111e9b03b222c3b5",is_queryable:!0,legend_name:"eau:uesg_sauer_1995",max_dpi:128,metadata_id:"f01f7be2-0423-4571-8fff-57dd617ae632"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Sauer_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Sauer_1995__125"}]},{id:2116,name:"eau_Hochwasserkarten_2021",children:[{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:463,name:"eau_new_Zusaetzliche_Informationen",children:[{id:756,name:"eau_new_Hochwasser Brennpunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.8729061",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"5fd1cadde9996e5faf62ea6f",is_queryable:!0,legend_name:"eau:hochwasser_brennpunkte",metadata_id:"b2bfd06d-5f05-4abf-8f41-103d40a380e7"},dimensions:{},type:"WMS",layers:"eau_new_Hochwasser Brennpunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hochwasser Brennpunkte__309"}]},{id:758,name:"eau_new_Manahmens des Hochwasserrisikomanagementplans",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:03:13.4638796",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"66e4e0d15a1785364d6db3fb",is_queryable:!0,legend_name:"eau:massnahmens_des_hochwasserrisikomanagementplans",metadata_id:"4326fea6-7ec4-4bb9-861f-4476b0d4ceac"},dimensions:{},type:"WMS",layers:"eau_new_Manahmens des Hochwasserrisikomanagementplans",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Manahmens des Hochwasserrisikomanagementplans__314"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:474,name:"eau_new_Wasserrahmenrichtlinie",children:[{id:1469,name:"eau_strahlwirkungskonzept",metadata:{is_queryable:!0,legend_name:"eau:strahlwirkungskonzept",metadata_id:"e1744b8e-101e-406d-b742-776d488a00b5"},dimensions:{},type:"WMS",layers:"eau_strahlwirkungskonzept",imageType:"image/png",style:"default",childLayers:[{name:"eau_strahlwirkungskonzept__351"},{name:"eau_strahlwirkungskonzept__352"}]},{id:475,name:"eau_new_Bewirtschaftungsplan_2009",children:[{id:644,name:"eau_new_Betrachtungsraeume_2009",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2009",max_dpi:128,metadata_id:"be15dd7d-df57-44e1-b724-0929cf05eef9"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2009__146"}]},{id:607,name:"eau_new_Typologie_Oberflaechengewasser_2009",metadata:{is_queryable:!0,legend_name:"eau:typologie_oberflaechengewasser_2009",max_dpi:128,metadata_id:"0d1d73f0-7644-4217-a0df-b6c497508592"},dimensions:{},type:"WMS",layers:"eau_new_Typologie_Oberflaechengewasser_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Typologie_Oberflaechengewasser_2009__147"}]},{id:601,name:"eau_new_Oberflaechenwasserkoerper_2009",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2009",max_dpi:128,metadata_id:"404cf7b4-f70b-4c2c-a44b-89e297fab0f8"},dimensions:{},type:"WMS",layers:"eau_new_Oberflaechenwasserkoerper_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflaechenwasserkoerper_2009__148"}]},{id:634,name:"eau_new_Erheblich vernderte Wasserkrper 2009",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_owk_2009",max_dpi:128,metadata_id:"78da31c2-55eb-40c9-99fe-22ff409468c2"},dimensions:{},type:"WMS",layers:"eau_new_Erheblich vernderte Wasserkrper 2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erheblich vernderte Wasserkrper 2009__149"}]},{id:603,name:"eau_new_Grundwasserkoerper_2009",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2009",max_dpi:128,metadata_id:"f23ca424-ec87-4c53-929c-7e627a8e06af"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserkoerper_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserkoerper_2009__151"}]},{id:468,name:"eau_new_Zustand_der_Wasserkoerper_(WK)_2009",children:[{id:464,name:"eau_new_Oberflaechengewaesser_2009",children:[{id:585,name:"eau_new_Gesamtzustand_2009",metadata:{is_queryable:!0,legend_name:"eau:gesamtzustand_2009",max_dpi:128,metadata_id:"44862c13-7006-44a4-99e6-2877ea512714"},dimensions:{},type:"WMS",layers:"eau_new_Gesamtzustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gesamtzustand_2009__154"}]},{id:586,name:"eau_new_Chemischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2009",max_dpi:128,metadata_id:"d934fbcc-02c6-47fa-a23d-cfbe49214709"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_2009__155"}]},{id:614,name:"eau_new_Oekologischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:oekologischer_zustand_2009",max_dpi:128,metadata_id:"92d28c19-ed51-4e9e-8a80-831144fe3553"},dimensions:{},type:"WMS",layers:"eau_new_Oekologischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oekologischer_Zustand_2009__156"}]},{id:593,name:"eau_new_Hydromorphologischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologischer_zustand_2009",max_dpi:128,metadata_id:"0227e64f-11ef-4f0a-8853-48fd7385f2b1"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologischer_Zustand_2009__157"}]}],metadata:{},mixed:!0},{id:435,name:"eau_new_Grundwasser_2009",children:[{id:657,name:"eau_new_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_wk_2009",max_dpi:128,metadata_id:"2df25c38-15d5-447f-a269-4184ce781050"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_WK_2009__159"}]},{id:605,name:"eau_new_Quantitativer_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_wk_2009",max_dpi:128,metadata_id:"a9ebce38-6c8b-447e-9d22-46ba333fa63c"},dimensions:{},type:"WMS",layers:"eau_new_Quantitativer_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quantitativer_Zustand_der_WK_2009__160"}]},{id:441,name:"eau_new_Chemischer_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_wk_2009",max_dpi:128,metadata_id:"e9a72fec-29a0-4183-9e3a-6d4f49c9fea7"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_der_WK_2009__161"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:480,name:"eau_new_Bewirtschaftungsplan_2015",children:[{id:536,name:"eau_new_Oberflaechenwasserkoerper_2015",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2015",max_dpi:128,metadata_id:"ead261ed-7be1-4435-9cf5-d1527a18bd19"},dimensions:{},type:"WMS",layers:"eau_new_Oberflaechenwasserkoerper_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflaechenwasserkoerper_2015__165"}]},{id:658,name:"eau_new_Erheblich vernderte Wasserkrper 2015",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_wk_2015",max_dpi:128,metadata_id:"78da31c2-55eb-40c9-99fe-22ff409468c2"},dimensions:{},type:"WMS",layers:"eau_new_Erheblich vernderte Wasserkrper 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erheblich vernderte Wasserkrper 2015__166"}]},{id:619,name:"eau_new_Betrachtungsraeume_2015",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2015",max_dpi:128,metadata_id:"be15dd7d-df57-44e1-b724-0929cf05eef9"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2015__163"}]},{id:588,name:"eau_new_Typologie_Gewaesser_2015",metadata:{is_queryable:!0,legend_name:"eau:typologie_gewaesser_2015",max_dpi:128,metadata_id:"c7eea236-ad59-47fc-8c02-630fee3292dc"},dimensions:{},type:"WMS",layers:"eau_new_Typologie_Gewaesser_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Typologie_Gewaesser_2015__164"}]},{id:1470,name:"eau_fliessgewaessertypen_2015",metadata:{is_queryable:!0,legend_name:"eau:fliessgewaessertypen_2015_lawa",metadata_id:"79f4588f-a264-4921-a382-d1f83cf48da3"},dimensions:{},type:"WMS",layers:"eau_fliessgewaessertypen_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_fliessgewaessertypen_2015__354"}]},{id:759,name:"eau_new_Strukturgtekartierung 2015 [7-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2015_7-stufige_bewertung",metadata_id:"dd28de7b-6182-4054-89a6-dd92b80b565f"},dimensions:{},type:"WMS",layers:"eau_new_Strukturgtekartierung 2015 [7-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Strukturgtekartierung 2015 [7-stufige Bewertung]__315"}]},{id:760,name:"eau_new_Strukturgtekartierung 2015 [5-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2015_5-stufige_bewertung",metadata_id:"ff70c904-a6b9-4989-88c0-8359ff52e57e"},dimensions:{},type:"WMS",layers:"eau_new_Strukturgtekartierung 2015 [5-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Strukturgtekartierung 2015 [5-stufige Bewertung]__316"}]},{id:761,name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:5-band_sohle_7-stufige_bewertung_5-band_ufer_links_7-stufige_bewertung_5-band_ufer_rechts_7-stufige_bewertung_5-band_umfeld_links_7-stufige_bewertung_5-band_umfeld_rechts_7-stufige_bewertung",metadata_id:"429d3552-5f72-4be6-9c03-95c76f0a6c07"},dimensions:{},type:"WMS",layers:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__336"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__337"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__338"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__339"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__340"}]},{id:763,name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:5-band_sohle_5-stufige_bewertung_5-band_ufer_links_5-stufige_bewertung_5-band_ufer_rechts_5-stufige_bewertung_5-band_umfeld_links_5-stufige_bewertung_5-band_umfeld_rechts_5-stufige_bewertung",metadata_id:"4c64f3a4-627f-4aa7-9e0c-d3ad003d9afe"},dimensions:{},type:"WMS",layers:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__342"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__343"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__344"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__345"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__346"}]},{id:785,name:"eau_new_WRRL und HWRM-RL Massnahmen",metadata:{is_queryable:!0,legend_name:"eau:wrrl_und_hwrm-rl_-_massnahmen",metadata_id:"9a339e4e-eb04-42a0-ac0d-5a5f354c9548"},dimensions:{},type:"WMS",layers:"eau_new_WRRL und HWRM-RL Massnahmen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL und HWRM-RL Massnahmen__347"}]},{id:1471,name:"eau_detailliertes_massnahmenprogramm_sww",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_sww",metadata_id:"5b9d1544-da64-4a58-b519-9a03e5491e07"},dimensions:{},type:"WMS",layers:"eau_detailliertes_massnahmenprogramm_sww",imageType:"image/png",style:"default",childLayers:[{name:"eau_detailliertes_massnahmenprogramm_sww__355"}]},{id:659,name:"eau_new_Grundwasserkoerper_2015",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2015",max_dpi:128,metadata_id:"bb5f17b7-ddac-46cc-a59d-25f82d422b5b"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserkoerper_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserkoerper_2015__168"}]},{id:476,name:"eau_new_Zustand_der_Wasserkoerper_(WK)_2015",children:[{id:479,name:"eau_new_Oberflaechengewaesser_2015",children:[{id:622,name:"eau_new_Oekologischer_Zustand_2015",metadata:{is_queryable:!0,legend_name:"eau:oekologischer_zustand_2015",max_dpi:128,metadata_id:"5b78d0a5-1984-4efc-9e7d-0cb9d7ca829d"},dimensions:{},type:"WMS",layers:"eau_new_Oekologischer_Zustand_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oekologischer_Zustand_2015__173"}]},{id:663,name:"eau_new_Gesamtzustand_2015",metadata:{is_queryable:!0,legend_name:"eau:gesamtzustand_2015",max_dpi:128,metadata_id:"bea7140f-b938-4494-ac14-a2252a1d0fcb"},dimensions:{},type:"WMS",layers:"eau_new_Gesamtzustand_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gesamtzustand_2015__171"}]},{id:621,name:"eau_new_Chemischer Zustand 2015_Richtlinie 2008_105_EG",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2015",max_dpi:128,metadata_id:"7df87ec3-bfad-4d1b-a10b-68670c8073f4"},dimensions:{},type:"WMS",layers:"621",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer Zustand 2015_Richtlinie 2008_105_EG__172"}]},{id:764,name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe 2015_Richtlinie_2008_105_EG",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2015_richtlinie_2008_105_eg",metadata_id:"68f761b4-e1d1-4cda-b4aa-1e61fc812588"},dimensions:{},type:"WMS",layers:"764",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe 2015_Richtlinie_2008_105_EG__318"}]},{id:765,name:"eau_new_Chemischer_Zustand_2015_Richtlinie 2013_39_EU",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2015_richtlinie_2013_39_eu",metadata_id:"7df87ec3-bfad-4d1b-a10b-68670c8073f4"},dimensions:{},type:"WMS",layers:"765",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_2015_Richtlinie 2013_39_EU__319"}]},{id:766,name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe_2015_Richtlinie 2013_39_EU",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2015_richtlinie_2013_39_eu",metadata_id:"d78ac813-7ab3-4162-945a-f87512e66654"},dimensions:{},type:"WMS",layers:"766",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe_2015_Richtlinie 2013_39_EU__320"}]},{id:466,name:"eau_new_Qualitaetskomponenten_des_oekologischen_Zustands_2015",children:[{id:767,name:"eau_new_Hydromorphologische Gesamtbewertung 2015",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologischer_zustand_2015",metadata_id:"767e0a8a-31e0-4a53-913f-6ab1c76ca27c"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologische Gesamtbewertung 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologische Gesamtbewertung 2015__174"}]},{id:769,name:"eau_new_Morphologie 2015",metadata:{is_queryable:!0,legend_name:"eau:morphologie_2015",metadata_id:"b7812f62-a8b5-4ef4-bbb8-c2e3a9688c93"},dimensions:{},type:"WMS",layers:"eau_new_Morphologie 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Morphologie 2015__330"}]},{id:770,name:"eau_new_Durchgngigkeit 2015",metadata:{is_queryable:!0,legend_name:"eau:durchgaengigkeit_2015",metadata_id:"4983c058-3d33-4b6f-b801-de1113a11f27"},dimensions:{},type:"WMS",layers:"eau_new_Durchgngigkeit 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchgngigkeit 2015__331"}]},{id:583,name:"eau_new_Physiko-Chemie_2015",metadata:{is_queryable:!0,legend_name:"eau:physiko-chemie_2015",max_dpi:128,metadata_id:"45702d13-2608-4300-ba54-0e078c96386c"},dimensions:{},type:"WMS",layers:"eau_new_Physiko-Chemie_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Physiko-Chemie_2015__176"}]},{id:771,name:"eau_new_Phytoplankton 2015",metadata:{is_queryable:!0,legend_name:"eau:phytoplankton_2015",metadata_id:"e5d8434c-c367-4a56-a7d1-aa60f70a301f"},dimensions:{},type:"WMS",layers:"eau_new_Phytoplankton 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytoplankton 2015__321"}]},{id:662,name:"eau_new_Makrophyten_2015",metadata:{is_queryable:!0,legend_name:"eau:aquatische_flora_2015",max_dpi:128,metadata_id:"fe673001-2447-4e3c-bce6-4606b6bf222d"},dimensions:{},type:"WMS",layers:"eau_new_Makrophyten_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrophyten_2015__177"}]},{id:600,name:"eau_new_Makro-Invertebraten_2015",metadata:{is_queryable:!0,legend_name:"eau:makro-invertebraten_2015",max_dpi:128,metadata_id:"b8a59482-2696-4b9a-a527-3201597a4caf"},dimensions:{},type:"WMS",layers:"eau_new_Makro-Invertebraten_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makro-Invertebraten_2015__180"}]},{id:646,name:"eau_new_Fische_2015",metadata:{is_queryable:!0,legend_name:"eau:fische_2015",max_dpi:128,metadata_id:"f44a6aa7-6dcc-4d99-9033-c13ef23ebef4"},dimensions:{},type:"WMS",layers:"eau_new_Fische_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fische_2015__179"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:471,name:"eau_new_Grundwasser_2015",children:[{id:591,name:"eau_new_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_wk_2015",max_dpi:128,metadata_id:"489c9b85-6c3c-4019-b3ee-096936b2683c"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_WK_2015__182"}]},{id:592,name:"eau_new_Quantitativer_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_wk_2015",max_dpi:128,metadata_id:"333c7e4f-cdc3-439a-aa13-ca0f9138c764"},dimensions:{},type:"WMS",layers:"eau_new_Quantitativer_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quantitativer_Zustand_der_WK_2015__183"}]},{id:632,name:"eau_new_Chemischer_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_wk_2015",max_dpi:128,metadata_id:"ddd64c4a-f5af-4bbb-a7d3-3db1016ee541"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_der_WK_2015__184"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2085,name:"eau_Bewirtschaftungsplan_2021",children:[{id:2090,name:"eau_Oberflaechenwasserkoerper_2021",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2021",max_dpi:128,metadata_id:"c50b2bc7-aeb7-4d3e-9349-09eb3ec0f927"},dimensions:{},type:"WMS",layers:"eau_Oberflaechenwasserkoerper_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Oberflaechenwasserkoerper_2021__386"}]},{id:2091,name:"eau_Erheblich vernderte Wasserkrper 2021",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_wk_2021",max_dpi:128,metadata_id:"311cc30b-8092-4816-9f86-87d5f2995706"},dimensions:{},type:"WMS",layers:"eau_Erheblich vernderte Wasserkrper 2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Erheblich vernderte Wasserkrper 2021__387"}]},{id:2491,name:"eau_new_Betrachtungsraeume_2021",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2021",metadata_id:"af21fbbf-3f63-4742-8c44-f8a377930197"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2021__455"}]},{id:2223,name:"eau_typologie_Gewsser_2021",metadata:{is_queryable:!0,legend_name:"eau:fleissgewaessertypen_2021_lu",metadata_id:"492d6faa-5c91-45d4-83d7-733398cc48d1"},dimensions:{},type:"WMS",layers:"eau_typologie_Gewsser_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_typologie_Gewsser_2021__419"}]},{id:2224,name:"eau_Fliegewssertypen_2021",metadata:{is_queryable:!0,legend_name:"eau:fleissgewaessertypen_2021_lawa",metadata_id:"8608d8c5-def8-4050-9f44-7746edd7a32e"},dimensions:{},type:"WMS",layers:"eau_Fliegewssertypen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Fliegewssertypen_2021__420"}]},{id:2269,name:"eau_grundwasserkoerper_2021",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2021",metadata_id:"3bd42cf4-93ce-451f-8749-e3f6d1750eeb"},dimensions:{},type:"WMS",layers:"eau_grundwasserkoerper_2021",imageType:"image/png",childLayers:[{name:"eau_grundwasserkoerper_2021__444"}]},{id:2222,name:"eau_Strukturgtekartierung_2021",children:[{id:2225,name:"eau_Strukturgtekartierung_2021_7stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2021_7-stufige_bewertung",metadata_id:"87e3688f-b831-44e9-aa4f-38d89a41139a"},dimensions:{},type:"WMS",layers:"eau_Strukturgtekartierung_2021_7stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturgtekartierung_2021_7stufige_bewertung__405"}]},{id:2226,name:"eau_Strukturgtekartierung_2021_5stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2021_5-stufige_bewertung",metadata_id:"0e36b3e4-8811-43b6-9f2d-a2ea26c817cb"},dimensions:{},type:"WMS",layers:"eau_Strukturgtekartierung_2021_5stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturgtekartierung_2021_5stufige_bewertung__406"}]},{id:2227,name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:struktukartierung_2021_5_band_7-stufige_bewertung",metadata_id:"27c60680-00ac-4e28-857f-41a1021ae4d9"},dimensions:{},type:"WMS",layers:"eau_Struktukartierung_2021_5_band_7stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__408"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__409"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__410"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__411"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__412"}]},{id:2228,name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:struktukartierung_2021_5_band_5-stufige_bewertung",metadata_id:"dedcc2a3-b587-4dfe-a967-5f4bfd8f575a"},dimensions:{},type:"WMS",layers:"eau_Struktukartierung_2021_5_band_5stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__414"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__415"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__416"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__417"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__418"}]},{id:2492,name:"eau_new_Querbauwerke_2021",metadata:{geocatalog_open_data_last_update_date:"2024-08-01T01:02:32.8749807",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a2f595f96f574ccd9e7e7c",is_queryable:!0,legend_name:"eau:Querbauwerke%202021",metadata_id:"88b06474-f029-4544-a60d-7c46c5f32191"},dimensions:{},type:"WMS",layers:"eau_new_Querbauwerke_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Querbauwerke_2021__422"}]},{id:2493,name:"eau_new_Durchlaesse_Verrohrungen_2021",metadata:{geocatalog_open_data_last_update_date:"2024-07-31T01:02:20.8968264",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a2f58e7af13982e1abe7e7",is_queryable:!0,legend_name:"eau:durchlaesseverrohrungen_2021",metadata_id:"6eb34108-4bad-4cb7-881e-7db3174c7531"},dimensions:{},type:"WMS",layers:"eau_new_Durchlaesse_Verrohrungen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchlaesse_Verrohrungen_2021__423"}]},{id:2494,name:"eau_new_Querprofile_2021",metadata:{is_queryable:!0,legend_name:"eau:querprofile_2021",metadata_id:"a40281d4-1ee2-42d0-9378-012f1f415afa"},dimensions:{},type:"WMS",layers:"eau_new_Querprofile_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Querprofile_2021__424"}]},{id:2495,name:"eau_new_Substratkartierung_2021",metadata:{is_queryable:!0,legend_name:"eau:substratkartierung_2021",metadata_id:"c4eb10fd-305d-43f7-ae01-b9caa32ed484"},dimensions:{},type:"WMS",layers:"eau_new_Substratkartierung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Substratkartierung_2021__425"}]}],metadata:{},mixed:!0},{id:2497,name:"eau_new_Massnahmenprogramm_2021",children:[{id:2106,name:"eau_Masssnahmenprogramm_SWW_2021",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_sww_2021",metadata_id:"10f4a12e-1a67-42d5-b575-8993e2f3aa68"},dimensions:{},type:"WMS",layers:"eau_Masssnahmenprogramm_SWW_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Masssnahmenprogramm_SWW_2021__403"}]},{id:2496,name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_hy_2021_alle",metadata_id:"4b00cf8c-d4e6-486d-8bda-d385302792f6"},dimensions:{},type:"WMS",layers:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__389"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__390"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__391"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__392"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__393"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__394"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__395"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__396"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__397"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__398"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__399"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__400"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__401"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__402"}]},{id:2086,name:"eau_Entwurf_Massnahmenprogramm_HY_2021",children:[{id:2092,name:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_der_oekologischen_durchgaengigkeit",metadata_id:"c150f6a5-41c7-477a-9d44-c0a26a502d85"},dimensions:{},type:"WMS",layers:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk",imageType:"image/png",style:"default",childLayers:[{name:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk_2021__389"}]},{id:2093,name:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_der_oekologischen_durchgaengigkeit_durchlass",metadata_id:"569bf0ea-c428-4171-aba6-8f2ace180a10"},dimensions:{},type:"WMS",layers:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021__390"}]},{id:2094,name:"eau_Strukturelemente_Sohle_2021",metadata:{is_queryable:!0,legend_name:"eau:einbau_von_strukturelementen_in_sohle",metadata_id:"2d233ca6-553e-43bf-ba25-f46b88f63710"},dimensions:{},type:"WMS",layers:"eau_Strukturelemente_Sohle_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturelemente_Sohle_2021__391"}]},{id:2095,name:"eau_Umgestalten_Sohlverbau_2021",metadata:{is_queryable:!0,legend_name:"eau:entfernen_umgestalten_von_sohlverbau",metadata_id:"0d30a3ee-e860-4816-b5c8-9f43e93020e3"},dimensions:{},type:"WMS",layers:"eau_Umgestalten_Sohlverbau_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Umgestalten_Sohlverbau_2021__392"}]},{id:2096,name:"eau_Stroemungslenkern_2021",metadata:{is_queryable:!0,legend_name:"eau:einbau_von_stroemungslenkern_fuer_eigendynamik",metadata_id:"b86c62a9-0ec8-4d35-878f-b275e74ff02e"},dimensions:{},type:"WMS",layers:"eau_Stroemungslenkern_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Stroemungslenkern_2021__393"}]},{id:2097,name:"eau_Umgestalten_Uferverbau_2021",metadata:{is_queryable:!0,legend_name:"eau:entfernen_umgestalten_von_uferverbau",metadata_id:"bec0ccbc-09b5-4351-8b72-f0e458fc7d19"},dimensions:{},type:"WMS",layers:"eau_Umgestalten_Uferverbau_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Umgestalten_Uferverbau_2021__394"}]},{id:2098,name:"eau_naturnah_Gewaesserbett_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_von_naturnaher_laufentwicklung_und_gewaesserbett",metadata_id:"3ddf627c-90ae-4b58-a05e-20925493dcf9"},dimensions:{},type:"WMS",layers:"eau_naturnah_Gewaesserbett_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnah_Gewaesserbett_2021__395"}]},{id:2099,name:"eau_Gewaesserrandstreifen_2021",metadata:{is_queryable:!0,legend_name:"eau:anlage_eines_gewaesserrandstreifens",metadata_id:"3bc0e52d-954b-47d3-8905-1ecfe7108ce0"},dimensions:{},type:"WMS",layers:"eau_Gewaesserrandstreifen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Gewaesserrandstreifen_2021__396"}]},{id:2100,name:"eau_Gewaesserentwicklungskorridor_2021",metadata:{is_queryable:!0,legend_name:"eau:anlage_eines_gewaesser_entwicklungskorridors",metadata_id:"13299bf5-57ca-4538-993e-7c00f6247722"},dimensions:{},type:"WMS",layers:"eau_Gewaesserentwicklungskorridor_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Gewaesserentwicklungskorridor_2021__397"}]},{id:2101,name:"eau_natuerlich_Ueberflutungsraeume_2021",metadata:{is_queryable:!0,legend_name:"eau:sicherung_und_erweiterung_natuerlicher_ueberflutungsraeume_und_augewaesser",metadata_id:"7fb0080e-d178-401d-83de-7595ef1885b5"},dimensions:{},type:"WMS",layers:"eau_natuerlich_Ueberflutungsraeume_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_natuerlich_Ueberflutungsraeume_2021__398"}]},{id:2102,name:"eau_eigendynamische_Entwicklung_2021",metadata:{is_queryable:!0,legend_name:"eau:zulassen_von_eigendynamischer_entwicklung",metadata_id:"d13e22e9-d22a-48a0-838d-3d7c914ccfe3"},dimensions:{},type:"WMS",layers:"eau_eigendynamische_Entwicklung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_eigendynamische_Entwicklung_2021__399"}]},{id:2103,name:"eau_naturnahe_Abflussverhaeltnisse_2021",metadata:{is_queryable:!0,legend_name:"eau:widerherstellung_und_sicherung_naturnaher_abflussverhaeltnisse",metadata_id:"b3f8a9e0-17f7-4b64-a34b-6ee6de972b52"},dimensions:{},type:"WMS",layers:"eau_naturnahe_Abflussverhaeltnisse_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnahe_Abflussverhaeltnisse_2021__400"}]},{id:2104,name:"eau_naturnaher_Wasserhaushalt_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_und_sicherung_naturnahem_wasserhaushalt",metadata_id:"91008390-557e-4db3-8d7c-e608a5478edb"},dimensions:{},type:"WMS",layers:"eau_naturnaher_Wasserhaushalt_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnaher_Wasserhaushalt_2021__401"}]},{id:2105,name:"eau_Abflussregulierung_2021",metadata:{is_queryable:!0,legend_name:"eau:abflussregulierung",metadata_id:"393be87d-44ce-42e1-9b81-9585aa2d7678"},dimensions:{},type:"WMS",layers:"eau_Abflussregulierung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Abflussregulierung_2021__402"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2498,name:"eau_new_Zustand_Wasserkoerper_2021",children:[{id:2501,name:"eau_new_OWK_2021",children:[{id:2516,name:"eau_new_oekologischer_Zustand_2021",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.9819519",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:oekologischer_zustand_2021",metadata_id:"d6e11b40-6e70-4f68-86c2-1c69c1e41c04"},dimensions:{},type:"WMS",layers:"eau_new_oekologischer_Zustand_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_oekologischer_Zustand_2021__428"}]},{id:2517,name:"eau_new_oekologisches_Potenzial_2021",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.9441803",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:oekologisches_potenzial_2021",metadata_id:"ed63b4ab-aee0-4402-8f30-98f2a08b98a4"},dimensions:{},type:"WMS",layers:"eau_new_oekologisches_Potenzial_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_oekologisches_Potenzial_2021__429"}]},{id:2518,name:"eau_new_chemischer_Zustand_2021_2013_39_EU",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.8760847",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2021",metadata_id:"2973678d-b858-4c7b-abfa-b99c206c32be"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_2021_2013_39_EU",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_2021_2013_39_EU__430"}]},{id:2519,name:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.4632089",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2021",metadata_id:"e32c56b5-a839-4cd1-a724-85153d87c5d5"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU__431"}]},{id:2499,name:"eau_new_Qualitaetskomponenten_oekologischer_Zustand_2021",children:[{id:2520,name:"eau_new_biologische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:biologische_qk_-_gesamtbewertung_2021",metadata_id:"61ac19af-e01b-48e3-8730-d955709d92ce"},dimensions:{},type:"WMS",layers:"eau_new_biologische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_biologische_QK_Gesamtbewertung_2021__435"}]},{id:2521,name:"eau_new_Phytoplankton_2021",metadata:{is_queryable:!0,legend_name:"eau:phytoplankton_2021",metadata_id:"f1bb6a6e-cc76-420a-8426-cf78bebea0aa"},dimensions:{},type:"WMS",layers:"eau_new_Phytoplankton_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytoplankton_2021__436"}]},{id:2522,name:"eau_new_Makrophyten_und_Phytobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:makrophyten_und_phytobenthos_2021",metadata_id:"53087821-654a-4fad-b891-b6f86f347482"},dimensions:{},type:"WMS",layers:"eau_new_Makrophyten_und_Phytobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrophyten_und_Phytobenthos_2021__437"}]},{id:2536,name:"eau_new_Macrophytes_2021",metadata:{is_queryable:!0,legend_name:"eau:macrophytes_2021",metadata_id:"060dc4f4-8486-4b5a-ae46-2b608bd87386"},dimensions:{},type:"WMS",layers:"eau_new_Macrophytes_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Macrophytes_2021__438"}]},{id:2523,name:"eau_new_Phytobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:phytobenthos_2021",metadata_id:"83f6b866-467a-4b00-9641-0252426c0808"},dimensions:{},type:"WMS",layers:"eau_new_Phytobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytobenthos_2021__439"}]},{id:2524,name:"eau_new_Makrozoobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:makrozoobenthos_2021",metadata_id:"d4028c85-831b-4950-905a-6df780d6b57d"},dimensions:{},type:"WMS",layers:"eau_new_Makrozoobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrozoobenthos_2021__440"}]},{id:2525,name:"eau_new_Fische_2021",metadata:{is_queryable:!0,legend_name:"eau:fische_2021",metadata_id:"961e396d-f123-4842-9a58-7968806e084d"},dimensions:{},type:"WMS",layers:"eau_new_Fische_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fische_2021__441"}]},{id:2526,name:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:physikalisch-chemische_qk_-_gesamtbewertung_2021",metadata_id:"a254a96a-8179-4a85-bd3d-c371d84e3884"},dimensions:{},type:"WMS",layers:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021__442"}]},{id:2527,name:"eau_new_allg_physikalisch_chemische_Parameter_2021",metadata:{is_queryable:!0,legend_name:"eau:allgemein_physikalisch-chemische_parameter_2021",metadata_id:"405ff58f-aca0-4781-9b28-c3481a7a0b0d"},dimensions:{},type:"WMS",layers:"eau_new_allg_physikalisch_chemische_Parameter_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_allg_physikalisch_chemische_Parameter_2021__443"}]},{id:2528,name:"eau_new_Flussgebietsspezifische_Schadstoffe_2021",metadata:{is_queryable:!0,legend_name:"eau:flussgebietsspezifische_schadstoffe_2021",metadata_id:"f321c03f-196d-4d12-992a-f6914088fd11"},dimensions:{},type:"WMS",layers:"eau_new_Flussgebietsspezifische_Schadstoffe_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Flussgebietsspezifische_Schadstoffe_2021__457"}]},{id:2529,name:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologische_qk_-_gesamtbewertung_2021",metadata_id:"673ef74f-1257-4de4-9c63-be9a82e7fbf7"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021__458"}]},{id:2530,name:"eau_new_Morphologie_2021",metadata:{is_queryable:!0,legend_name:"eau:morphologie_2021",metadata_id:"877aecd9-f5b3-4266-a520-e8cfd9d861c9"},dimensions:{},type:"WMS",layers:"eau_new_Morphologie_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Morphologie_2021__459"}]},{id:2531,name:"eau_new_Durchgaengigkeit_2021",metadata:{is_queryable:!0,legend_name:"eau:durchgaengigkeit_2021",metadata_id:"afa4a183-b069-4b65-9d9e-ca692f91f140"},dimensions:{},type:"WMS",layers:"eau_new_Durchgaengigkeit_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchgaengigkeit_2021__460"}]},{id:2532,name:"eau_new_Wasserhaushalt_2021",metadata:{is_queryable:!0,legend_name:"eau:wasserhaushalt_2021",metadata_id:"299eb814-3703-4119-b8d3-e9581c234c3b"},dimensions:{},type:"WMS",layers:"eau_new_Wasserhaushalt_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Wasserhaushalt_2021__461"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2500,name:"eau_new_GWK_2021",children:[{id:2533,name:"eau_new_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_gwk_2021",metadata_id:"ef79616f-fd66-45dd-a73a-e5677948dd56"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_GWK_2021__463"}]},{id:2534,name:"eau_new_quantitativer_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_gwk_2021",metadata_id:"5b9fbb7b-26b1-4b74-a709-80df547a755d"},dimensions:{},type:"WMS",layers:"eau_new_quantitativer_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_quantitativer_Zustand_der_GWK_2021__464"}]},{id:2535,name:"eau_new_chemischer_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_gwk_2021",metadata_id:"efa9de18-5db0-498f-aebb-fd659f689da7"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_der_GWK_2021__465"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:482,name:"eau_new_Nitratrichtlinie",children:[{id:589,name:"eau_new_Messstationen_Oberflaechengewaesser_-_Nitratrichtlinie",metadata:{is_queryable:!0,legend_name:"eau:messstationen_oberflaechengewaesser_-_nitratrichtlinie",max_dpi:128,metadata_id:"e3d8df5f-eb08-4e11-831f-ae2a90294ccf"},dimensions:{},type:"WMS",layers:"eau_new_Messstationen_Oberflaechengewaesser_-_Nitratrichtlinie",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Messstationen_Oberflaechengewaesser_-_Nitratrichtlinie__192"}]},{id:582,name:"eau_new_Messstationen_Grundwasser_-_Nitratrichtlinie",metadata:{is_queryable:!0,legend_name:"eau:messstationen_grundwasser_-_nitratrichtlinie",max_dpi:128,metadata_id:"e15fcc8c-217c-4577-b5a0-e62f08e480c1"},dimensions:{},type:"WMS",layers:"eau_new_Messstationen_Grundwasser_-_Nitratrichtlinie",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Messstationen_Grundwasser_-_Nitratrichtlinie__193"}]}],metadata:{},mixed:!0},{id:478,name:"eau_new_Plan_im_Fall_einer_Trockenheit",children:[{id:797,name:"eau_new_trockenheit_gelb",metadata:{is_queryable:!0,legend_name:"eau:vorbeugungsphase_phase_gelb",metadata_id:"2ec1e46e-2411-4828-b702-cc3f41b3ad04"},dimensions:{},type:"WMS",layers:"eau_new_trockenheit_gelb",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_trockenheit_gelb__348"}]},{id:617,name:"eau_new_Trinkwasserknappheit_(Zustand_orange)",metadata:{is_queryable:!0,legend_name:"eau:trinkwasserknappheit_zustand_orange",max_dpi:128,metadata_id:"c5a93247-af34-494d-bce2-9bc112fa50d8"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwasserknappheit_(Zustand_orange)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwasserknappheit_(Zustand_orange)__195"}]},{id:481,name:"eau_new_Erhoehte_Trinkwasserknappheit_(Zustand_rot)",metadata:{is_queryable:!0,legend_name:"eau:erhoehte_trinkwasserknappheit_zustand_rot",max_dpi:128,metadata_id:"620eea7b-266a-4ba5-9646-8006ff5915d4"},dimensions:{},type:"WMS",layers:"eau_new_Erhoehte_Trinkwasserknappheit_(Zustand_rot)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erhoehte_Trinkwasserknappheit_(Zustand_rot)__196"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",css:"eau.css",display_in_switcher:!0,link_title:"Administration de la gestion d'eau",page_title:"eau.geoportail.lu",print_img:"bandeauEau.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"eau.geoportal.lu",print_short_txt_en:"eau.geoportal.lu",print_short_txt_fr:"eau.geoportail.lu",print_short_txt_lu:"eau.geoportal.lu"}},{id:130,name:"pag",icon:"pag",children:[{id:706,name:"basisden_pag",children:[{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0},{id:165,name:"adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:694,name:"pag_group",children:[{id:698,name:"pag_pag",metadata:{is_queryable:!0,legend_name:"pag",linked_layers:["697","696","1366","709","710"],max_dpi:128,metadata_id:"12c67295-d150-430f-aa28-fa004ecba3c7",start_opacity:.7},dimensions:{},type:"WMS",layers:"pag_pag",imageType:"image/png",style:"default",childLayers:[{name:"pag_pag__28"},{name:"pag_pag__27"},{name:"pag_pag__26"},{name:"pag_pag__25"},{name:"pag_pag__24"},{name:"pag_pag__23"},{name:"pag_pag__22"},{name:"pag_pag__21"},{name:"pag_pag__20"},{name:"pag_pag__19"},{name:"pag_pag__18"},{name:"pag_pag__17"},{name:"pag_pag__16"},{name:"pag_pag__15"},{name:"pag_pag__14"},{name:"pag_pag__13"},{name:"pag_pag__12"},{name:"pag_pag__11"},{name:"pag_pag__9"},{name:"pag_pag__8"},{name:"pag_pag__7"},{name:"pag_pag__6"},{name:"pag_pag__202"},{name:"pag_pag__5"},{name:"pag_pag__200"}]},{id:696,name:"pag_pap_approuves",metadata:{is_queryable:!1,max_dpi:128,metadata_id:"7fd67f56-d2f6-4697-9d3b-5d9a6be770c9",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_pap_approuves",imageType:"image/png",style:"default",childLayers:[{name:"pag_pap_approuves__2"}]},{id:1366,name:"pag_infos_supp",metadata:{metadata_id:"5ab48871-aa35-4b74-ada2-3033c6666748"},dimensions:{},type:"WMS",layers:"pag_infos_supp",imageType:"image/png",style:"default",childLayers:[{name:"pag_infos_supp__103"},{name:"pag_infos_supp__102"},{name:"pag_infos_supp__101"}]},{id:697,name:"pag_pcn",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"672e2e56-b888-45bb-b665-1b8132a0e147",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_pcn",imageType:"image/png",style:"default",childLayers:[{name:"pag_pcn__pag_fonds"}]}],metadata:{},mixed:!0},{id:695,name:"pag_addtional_layers",children:[{id:716,name:"pag_at",children:[{id:710,name:"pag_pos",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a5f51e0e-c737-44e6-b0e0-7a0016d87707",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_pos",imageType:"image/png",style:"default",childLayers:[{name:"pag_pos__0"}]}],metadata:{},mixed:!0},{id:717,name:"pag_env",children:[{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:720,name:"pag_eau",children:[{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]}],metadata:{},mixed:!0},{id:718,name:"pag_hum",children:[{id:232,name:"env_bruit_axes_routiers",children:[{id:2764,name:"aev_bruit_roads_2021_Lden",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lden",metadata_id:"5504291e-3457-416d-84a3-438a83ae029d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lden",imageType:"image/png"},{id:2763,name:"aev_bruit_roads_2021_Lngt",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lngt",metadata_id:"43e0ddd5-7575-4ce7-b558-2114196bd6fe",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lngt",imageType:"image/png"},{id:1497,name:"env_bruit2016_axes_routiers_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"cf1a21cc-8208-420e-bd7e-091d755b6ace",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lden",imageType:"image/png"},{id:1500,name:"env_bruit2016_axes_routiers_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"83ae2d3b-f0d9-4584-8c48-f6722bd4f517",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lngt",imageType:"image/png"},{id:1504,name:"env_bruit_axes_routiers_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"c5a6e3c5-6bef-4ff9-ac3e-aa494a34e602"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots_2016__3"},{name:"env_bruit_axes_routiers_hotspots_2016__13"}]},{id:1505,name:"env_bruit_axes_routiers_agglomeration_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"a6c63355-6e42-4795-9d72-8744b907b151"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration_2016__6"},{name:"env_bruit_axes_routiers_agglomeration_2016__13"}]},{id:326,name:"env_bruit_axes_routiers_lden",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"3e3aa044-89e0-4676-9404-744f64dd7ba0",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lden",imageType:"image/png"},{id:255,name:"env_bruit_axes_routiers_lngt",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"5e4f2607-b114-4884-8e48-8e1faa997eb4",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lngt",imageType:"image/png"},{id:1475,name:"env_bruit_axes_routiers_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"ff6b3d63-871c-4e88-8fc0-0f276abe259a"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots__10"},{name:"env_bruit_axes_routiers_hotspots__13"}]},{id:1485,name:"env_bruit_axes_routiers_agglomeration",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"f1dd0dd5-4dd5-4d88-b556-af39a20ab137",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration__12"},{name:"env_bruit_axes_routiers_agglomeration__13"}]}],metadata:{},mixed:!0},{id:183,name:"env_bruit_axes_ferroviaires",children:[{id:2761,name:"aev_bruit_railways_2021_Lden",metadata:{is_queryable:!0,metadata_id:"e48e5b8f-9388-47ae-b12f-575ed7416ce1",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lden__46"}]},{id:2762,name:"aev_bruit_railways_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"c2106415-df81-4208-9714-7dad0479ab71",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lngt__47"}]},{id:1498,name:"env_bruit2016_axes_ferroviaires_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"7975b71b-2fd4-45e6-8c0a-306671d665c6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lden",imageType:"image/png"},{id:1502,name:"env_bruit2016_axes_ferroviaires_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"170143ce-53ef-4b2b-997c-a2ccb1b84477",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lngt",imageType:"image/png"},{id:1503,name:"env_bruit_axes_ferroviaires_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"29ef44c6-f357-4d21-829c-f2fdd5fe1149"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots_2016__1"},{name:"env_bruit_axes_ferroviaires_hotspots_2016__13"}]},{id:310,name:"env_bruit_axes_ferroviaires_lden",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"32b40d1c-111e-4eed-91c7-61d61ef27b8d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lden",imageType:"image/png"},{id:259,name:"env_bruit_axes_ferroviaires_lngt",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"2d7e26ad-e448-45a2-9045-3dfb3e3ec15b",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lngt",imageType:"image/png"},{id:1476,name:"env_bruit_axes_ferroviaires_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"d3b30653-d0bf-4924-96b2-251e9f61c979"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots__8"},{name:"env_bruit_axes_ferroviaires_hotspots__13"}]}],metadata:{},mixed:!0},{id:190,name:"env_bruit_air",children:[{id:2667,name:"aev_bruit_aeroport_2021_Lden",metadata:{is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"4ceeb788-86c8-420d-a161-43607ed4e89a",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lden__40"}]},{id:2668,name:"aev_bruit_aeroport_2021_Lngt",metadata:{is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"71277cc9-4b62-4199-8a2e-71ca4a863519",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lngt__41"}]},{id:1501,name:"env_bruit2016_axes_aeroport_lden",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"26e208ff-39a3-4cf6-92db-4c6707fe972a",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lden",imageType:"image/png"},{id:1499,name:"env_bruit2016_axes_aeroport_lngt",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"2aa6f79d-74cc-4f22-bedd-748f8e8e30b9",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lngt",imageType:"image/png"},{id:157,name:"env_bruit_air_lden",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"0f4dcfc5-e947-4e5c-9460-702b8e1a572f",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lden",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lden__70"}]},{id:327,name:"env_bruit_air_lngt",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"6b031060-1f82-467d-af86-afe02a3f04fa",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lngt",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lngt__72"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:719,name:"pag_sites_et_monuments",children:[{id:709,name:"pag_ssmn",metadata:{is_queryable:!1,max_dpi:128,metadata_id:"ab8bba00-fe68-4e1f-8fad-9dbd2f8c7809",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_ssmn",imageType:"image/png",style:"default",childLayers:[{name:"pag_ssmn__2"},{name:"pag_ssmn__1"},{name:"pag_ssmn__0"}]}],metadata:{},mixed:!0},{id:196,name:"verkehrsnetze",children:[{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:351,name:"roads_labels",metadata:{metadata_id:"5d606cae-cbc6-44c3-a465-edb981e44a39"},dimensions:{},type:"WMS",layers:"roads_labels",imageType:"image/png",style:"default",childLayers:[{name:"roads_labels__ROADS_LABELS"}]},{id:2401,name:"act_ponts",metadata:{is_queryable:!0,metadata_id:"2b7d36db-987f-49b4-96d7-60e934ddf926"},dimensions:{},type:"WMS",layers:"act_ponts",imageType:"image/png",childLayers:[{name:"act_ponts__0"},{name:"act_ponts__1"},{name:"act_ponts__2"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:813,name:"cdt_lignes_all",metadata:{is_queryable:!0,metadata_id:"bbe0523f-374d-4c94-a27d-7ce81d8bae3b"},dimensions:{},type:"WMS",layers:"cdt_lignes_all",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_all__lignes_de_bus_detaillees"},{name:"cdt_lignes_all__lignes_de_bus_detaillees_mymaps"}]},{id:812,name:"cdt_lignes_bus_par_operateur",children:[{id:814,name:"cdt_lignes_avl",metadata:{is_queryable:!0,metadata_id:"1e6f614b-e347-4115-82d7-74a72f51389f"},dimensions:{},type:"WMS",layers:"cdt_lignes_avl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_avl__category"}]},{id:815,name:"cdt_lignes_rgtr",metadata:{is_queryable:!0,metadata_id:"eae3ed54-d2ae-45ae-a62c-0dec4d44acdf"},dimensions:{},type:"WMS",layers:"cdt_lignes_rgtr",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_rgtr__category"}]},{id:816,name:"cdt_lignes_tice",metadata:{is_queryable:!0,metadata_id:"a3cb973c-12b0-4e41-bfc0-b2fb67637513"},dimensions:{},type:"WMS",layers:"cdt_lignes_tice",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tice__category"}]},{id:817,name:"cdt_lignes_cfl",metadata:{is_queryable:!0,metadata_id:"84ebdfbc-ba25-464c-af86-e74e588978ef"},dimensions:{},type:"WMS",layers:"cdt_lignes_cfl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_cfl__category"}]},{id:1374,name:"cdt_lignes_tram",metadata:{is_queryable:!0,metadata_id:"0f46c673-d4b4-4c25-8d9a-fca41035f587"},dimensions:{},type:"WMS",layers:"cdt_lignes_tram",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tram__category"}]}],metadata:{},mixed:!0},{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:2707,name:"mmtp_electromobilite_AC",metadata:{is_queryable:!0,metadata_id:"08885ef4-d534-47d4-8b93-2883c71a8452"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_AC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_AC__0"}]},{id:2708,name:"mmtp_electromobilite_DC",metadata:{is_queryable:!0,metadata_id:"624d34e4-1192-40bb-871a-e6c8720d766b"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_DC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_DC__2"}]},{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:377,name:"mobiliteit_pr",metadata:{is_queryable:!0,legend_name:"mobiliteit:pr",max_dpi:128,metadata_id:"9e0c97ae-aff9-41fc-9489-bbf97999163d"},dimensions:{},type:"WMS",layers:"mobiliteit_pr",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_pr__0"}]},{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]},{id:512,name:"tour_pistes_velo_mymaps2",metadata:{is_queryable:!0,legend_name:"tour_velo_national",metadata_id:"e9fea021-2aab-4f58-a777-8c7536898d9b"},dimensions:{},type:"WMS",layers:"tour_pistes_velo_mymaps2",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_velo_mymaps2__category"}]},{id:352,name:"cfl_hecto",metadata:{is_queryable:!0,metadata_id:"938f9e8e-071c-4e6b-940f-64b2a60eca74"},dimensions:{},type:"WMS",layers:"cfl_hecto",imageType:"image/png",style:"default",childLayers:[{name:"cfl_hecto__points_hecto"}]},{id:685,name:"cita_chantiers_actuel",metadata:{is_queryable:!0,metadata_id:"9c823038-5965-47cc-8dad-21496e57e3f2",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_actuel",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_actuel__CHANTIERS_ACTUEL"}]},{id:686,name:"cita_chantiers_futur",metadata:{is_queryable:!0,metadata_id:"063cb796-640f-4ab0-8430-955983a00e3b",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_futur",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_futur__CHANTIERS_FUTUR"}]},{id:1713,name:"chantiers_actuels_pc",metadata:{is_queryable:!0,metadata_id:"7d59f3a6-e8d8-464b-bbf9-73c6ca358a51",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_actuels_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_actuels_pc__CHANTIERS_ACTUEL_PC"}]},{id:1714,name:"chantiers_futurs_pc",metadata:{is_queryable:!0,metadata_id:"f6b9df36-5e62-46d1-ae91-c7c58c7e2e45",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_futurs_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_futurs_pc__CHANTIERS_FUTUR_PC"}]},{id:713,name:"pch_radars",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"385180ba-a9bc-49d4-8858-ba5f19942a66",start_opacity:1},dimensions:{},type:"WMS",layers:"pch_radars",imageType:"image/png",style:"default",childLayers:[{name:"pch_radars__1"},{name:"pch_radars__2"}]},{id:2729,name:"pch_points_repere",metadata:{geocatalog_open_data_last_update_date:"2024-07-26T08:50:03.7336833",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a3633bcf73e6f52fd83901",is_queryable:!0,metadata_id:"1dbe9ca0-638e-4034-94ef-c8a12fdaa57a"},dimensions:{},type:"WMS",layers:"pch_points_repere",imageType:"image/png",style:"default",childLayers:[{name:"pch_points_repere__6"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",bg_opacity:.01,css:"pag.css",display_in_switcher:!0,page_title:"pag.geoportail.lu",print_img:"PAG.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["2500","5000","10000","15000","20000","25000","50000","100000","200000","250000","400000"],print_short_txt_de:"pag.geoportal.lu",print_short_txt_en:"pag.geoportal.lu",print_short_txt_fr:"pag.geoportail.lu",print_short_txt_lu:"pag.geoportal.lu",show_in_mobile:!1,start_layers:["pag_pag","pag_pcn","pag_pap_approuves","pag_ssmn","pag_pos"]}},{id:126,name:"agriculture",icon:"agriculture",children:[{id:307,name:"asta",children:[{id:1637,name:"asta_flik_parcels",metadata:{is_queryable:!0,metadata_id:"f511a4ee-928a-4900-ac05-52aa0ce03bba"},dimensions:{},type:"WMS",layers:"asta_flik_parcels",imageType:"image/png",style:"default",childLayers:[{name:"asta_flik_parcels__3"}]},{id:1511,name:"asta_prairies_permanentes",metadata:{is_queryable:!0,metadata_id:"f6f493c2-f57b-419d-8953-ab8018576ac7"},dimensions:{},type:"WMS",layers:"asta_prairies_permanentes",imageType:"image/png",style:"default",childLayers:[{name:"asta_prairies_permanentes__0"}]},{id:740,name:"asta_herbages_sensibles",metadata:{metadata_id:"e5d2717e-4541-43f1-b586-1b18cdf11827"},dimensions:{},type:"WMS",layers:"asta_herbages_sensibles",imageType:"image/png",style:"default",childLayers:[{name:"asta_herbages_sensibles__gruenland"}]}],metadata:{},mixed:!0},{id:340,name:"asta_zones_prot",children:[{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]},{id:214,name:"eau_new_Provisorische_ZPS",metadata:{geocatalog_open_data_last_update_date:"2024-10-03T01:04:17.082383",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece254111e9b03b03833c4",is_queryable:!0,legend_name:"eau:provisorische_zps",max_dpi:128,metadata_id:"ddc51f25-2fb7-4d14-866a-a08f8af8ef03"},dimensions:{},type:"WMS",layers:"eau_new_Provisorische_ZPS",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Provisorische_ZPS__130"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:1464,name:"eau_prgd_zones_protection_lac",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.5407176",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5b571c9546f3b55625dc355c",is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_prgd_zones_protection_lac__349"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]},{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]},{id:1481,name:"asta_projet_rgd",children:[{id:1484,name:"eau_asta_prgd_zones_protection_lac",metadata:{is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_asta_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_asta_prgd_zones_protection_lac__349"}]},{id:1482,name:"asta_contrainte_stockage_engrais",metadata:{legend_name:"asta:stockage_engrais",metadata_id:"e94ac1bb-890b-412e-97e9-f71dbef88ab7"},dimensions:{},type:"WMS",layers:"asta_contrainte_stockage_engrais",imageType:"image/png",style:"default",childLayers:[{name:"asta_contrainte_stockage_engrais__1"}]},{id:1483,name:"asta_contrainte_utilisation_engrais",metadata:{legend_name:"asta:utilisation_engrais",metadata_id:"47f9de64-9636-4ce6-bf73-cb85cdd7b8d9"},dimensions:{},type:"WMS",layers:"asta_contrainte_utilisation_engrais",imageType:"image/png",style:"default",childLayers:[{name:"asta_contrainte_utilisation_engrais__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:321,name:"pedologie",children:[{id:272,name:"pedologie_100k",metadata:{legend_name:"pedologie",metadata_id:"2d712a34-ce79-426d-a57b-b7cadf97b80f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"pedologie_100k",imageType:"image/png"},{id:702,name:"asta_pedologie_new",metadata:{legend_name:"pedologie_new",max_dpi:128,metadata_id:"37686d89-0173-4040-88c7-be84a3648d01"},dimensions:{},type:"WMS",layers:"asta_pedologie_new",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_new__9"},{name:"asta_pedologie_new__10"},{name:"asta_pedologie_new__11"},{name:"asta_pedologie_new__12"},{name:"asta_pedologie_new__13"},{name:"asta_pedologie_new__14"},{name:"asta_pedologie_new__15"}]},{id:704,name:"asta_pedologie_humus",metadata:{legend_name:"asta_corg",max_dpi:128,metadata_id:"a1b0807c-9bff-4f6a-a5e7-130316742f56"},dimensions:{},type:"WMS",layers:"asta_pedologie_humus",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_humus__0"}]},{id:703,name:"asta_pedologie_ph",metadata:{legend_name:"asta_ph",max_dpi:128,metadata_id:"628ee73f-4c37-4689-bc4c-1fd9f6bd2663"},dimensions:{},type:"WMS",layers:"asta_pedologie_ph",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_ph__0"}]},{id:2408,name:"asta_erosion_group",children:[{id:2760,name:"asta_rigoles_erosion_enquete",metadata:{is_queryable:!0,metadata_id:"00c1398d-604f-4e1b-9abd-af05261d80ba"},dimensions:{},type:"WMS",layers:"asta_rigoles_erosion_enquete",imageType:"image/png",childLayers:[{name:"asta_rigoles_erosion_enquete__2"}]},{id:2407,name:"asta_erosion_2023",metadata:{is_queryable:!0,metadata_id:"427aff9b-b988-455c-8cd9-1c029cfd6b6e",start_opacity:.25},dimensions:{},type:"WMS",layers:"asta_erosion_2023",imageType:"image/png",childLayers:[{name:"asta_erosion_2023__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:204,name:"asta_meteo_group",children:[{id:283,name:"asta_meteo",metadata:{is_queryable:!0,metadata_id:"23e4b02d-a93d-47a4-8597-060319ae2af5"},dimensions:{},type:"WMS",layers:"asta_meteo",imageType:"image/png",style:"default",childLayers:[{name:"asta_meteo__meteo"}]}],metadata:{},mixed:!0},{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0},{id:509,name:"asta_esp_group",children:[{id:139,name:"asta_esp_esp",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"16f911c8-1008-4f86-b8c1-75584010f79b",start_opacity:.75},dimensions:{},type:"WMS",layers:"asta_esp_esp",imageType:"image/png",style:"default",childLayers:[{name:"asta_esp_esp__0"},{name:"asta_esp_esp__1"}]},{id:138,name:"asta_esp_lisiere",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"e3dd4b8c-760b-44b3-887a-08c6be34c72d",start_opacity:.5},dimensions:{},type:"WMS",layers:"asta_esp_lisiere",imageType:"image/png",style:"default",childLayers:[{name:"asta_esp_lisiere__2"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"streets",bg_opacity:.01,css:"agriculture.css",display_in_switcher:!0,link_title:"Administration des services techniques de l'agriculture",page_title:"agriculture.geoportail.lu",print_img:"bandeau_asta.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"agriculture.geoportal.lu",print_short_txt_en:"agriculture.geoportal.lu",print_short_txt_fr:"agriculture.geoportail.lu",print_short_txt_lu:"agriculture.geoportal.lu",start_layers:["asta_flik_parcels_2016"]}},{id:132,name:"lenoz",icon:"lenoz",children:[{id:429,name:"group_lenoz",children:[{id:494,name:"lenoz_lmg",metadata:{is_queryable:!0,metadata_id:"22d587f3-2b7d-4ebc-8564-7816cd3f2f13"},dimensions:{},type:"WMS",layers:"494",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_lmg__POI"}]},{id:496,name:"lenoz_creches",metadata:{is_queryable:!0,metadata_id:"b355d9f7-174c-4349-b1c6-0e4d6f091ab3"},dimensions:{},type:"WMS",layers:"496",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_creches__POI"}]},{id:495,name:"lenoz_ecoles",metadata:{is_queryable:!0,metadata_id:"f528b8f4-e84f-4e0c-9cf3-0b46c272f85d"},dimensions:{},type:"WMS",layers:"495",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_ecoles__POI"}]},{id:511,name:"lenoz_Post",metadata:{is_queryable:!0,metadata_id:"efa463e0-9d5d-4120-9430-e1dd816c0ad2"},dimensions:{},type:"WMS",layers:"511",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Post__POI"}]},{id:516,name:"lenoz_Banken",metadata:{is_queryable:!0,metadata_id:"ccb93f63-b711-4113-9ffb-5ad40016ed05"},dimensions:{},type:"WMS",layers:"516",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Banken__POI"}]},{id:504,name:"lenoz_rzte",metadata:{is_queryable:!0,metadata_id:"7f97be71-db0c-4b2c-8b17-f5913d9b70aa"},dimensions:{},type:"WMS",layers:"504",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_rzte__POI"}]},{id:519,name:"lenoz_Restaurants",metadata:{is_queryable:!0,metadata_id:"5fffa197-d8ba-43a2-9e6b-d4f593cb2f41"},dimensions:{},type:"WMS",layers:"519",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Restaurants__POI"}]},{id:505,name:"lenoz_Lycees",metadata:{is_queryable:!0,metadata_id:"35ffa708-81e1-48b8-814e-3a81647f108d"},dimensions:{},type:"WMS",layers:"505",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Lycees__POI"}]},{id:506,name:"lenoz_Tankstelle",metadata:{is_queryable:!0,metadata_id:"7301092d-ff3c-48a5-b3b7-d6a35ccab45f"},dimensions:{},type:"WMS",layers:"506",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Tankstelle__POI"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]}],metadata:{},mixed:!0},{id:486,name:"eau_new_Hochwasserrisikomanagement-Richtlinie [HWRM-RL]",children:[{id:1696,name:"eau_new_Risikogewaesser_2019_group",children:[{id:1703,name:"eau_Risikogewaesser_2019",metadata:{is_queryable:!0,legend_name:"eau:risikogewaesser_2019",metadata_id:"762cd956-9733-4855-afa7-38768a38e8a1"},dimensions:{},type:"WMS",layers:"eau_Risikogewaesser_2019",imageType:"image/png",style:"default",childLayers:[{name:"eau_Risikogewaesser_2019__16"}]}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:1711,name:"eau_atlas_crues_subites",children:[{id:2045,name:"age_dangers_fortes",metadata:{legend_name:"age_dangers_fortes",metadata_id:"55dbe91c-f1e5-4c56-b0b9-4590988e23e5"},dimensions:{},type:"WMS",layers:"age_dangers_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_dangers_fortes__0"},{name:"age_dangers_fortes__1"}]},{id:2046,name:"age_risques_fortes",metadata:{legend_name:"age_risques_fortes",metadata_id:"f1d9b1cd-ad78-44df-89ac-ad591138243f"},dimensions:{},type:"WMS",layers:"age_risques_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_risques_fortes__1"},{name:"age_risques_fortes__2"},{name:"age_risques_fortes__3"},{name:"age_risques_fortes__4"},{name:"age_risques_fortes__5"}]}],metadata:{},mixed:!0},{id:461,name:"eau_new_Historische_Ueberschwemmungsgebiete",children:[{id:637,name:"eau_new_UESG_1983_-_Mosel",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.2797021",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde16111e9b03b03833be",is_queryable:!0,legend_name:"eau:uesg_1983_-_mosel",max_dpi:128,metadata_id:"e6896207-c0f9-417e-9661-119128628e8e"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1983_-_Mosel",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1983_-_Mosel__122"}]},{id:641,name:"eau_new_UESG_1993_(ausser_Mosel)",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:25.7826569",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde1e111e9b03b03833bf",is_queryable:!0,legend_name:"eau:uesg_1993_ausser_mosel",max_dpi:128,metadata_id:"78c692f3-ad20-467b-b03a-0d020a821647"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1993_(ausser_Mosel)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1993_(ausser_Mosel)__123"}]},{id:642,name:"eau_new_UESG_Alzette_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.5894792",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde26111e9b03b03833c0",is_queryable:!0,legend_name:"eau:uesg_alzette_1995",max_dpi:128,metadata_id:"aaf81780-df85-4580-a890-fded8ae03db7"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Alzette_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Alzette_1995__124"}]},{id:633,name:"eau_new_UESG_Sauer_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.4493603",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde30111e9b03b222c3b5",is_queryable:!0,legend_name:"eau:uesg_sauer_1995",max_dpi:128,metadata_id:"f01f7be2-0423-4571-8fff-57dd617ae632"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Sauer_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Sauer_1995__125"}]},{id:2116,name:"eau_Hochwasserkarten_2021",children:[{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:463,name:"eau_new_Zusaetzliche_Informationen",children:[{id:756,name:"eau_new_Hochwasser Brennpunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.8729061",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"5fd1cadde9996e5faf62ea6f",is_queryable:!0,legend_name:"eau:hochwasser_brennpunkte",metadata_id:"b2bfd06d-5f05-4abf-8f41-103d40a380e7"},dimensions:{},type:"WMS",layers:"eau_new_Hochwasser Brennpunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hochwasser Brennpunkte__309"}]},{id:758,name:"eau_new_Manahmens des Hochwasserrisikomanagementplans",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:03:13.4638796",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"66e4e0d15a1785364d6db3fb",is_queryable:!0,legend_name:"eau:massnahmens_des_hochwasserrisikomanagementplans",metadata_id:"4326fea6-7ec4-4bb9-861f-4476b0d4ceac"},dimensions:{},type:"WMS",layers:"eau_new_Manahmens des Hochwasserrisikomanagementplans",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Manahmens des Hochwasserrisikomanagementplans__314"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:166,name:"env_bruit",children:[{id:2123,name:"env_bruit_modelisation",children:[{id:232,name:"env_bruit_axes_routiers",children:[{id:2764,name:"aev_bruit_roads_2021_Lden",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lden",metadata_id:"5504291e-3457-416d-84a3-438a83ae029d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lden",imageType:"image/png"},{id:2763,name:"aev_bruit_roads_2021_Lngt",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lngt",metadata_id:"43e0ddd5-7575-4ce7-b558-2114196bd6fe",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lngt",imageType:"image/png"},{id:1497,name:"env_bruit2016_axes_routiers_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"cf1a21cc-8208-420e-bd7e-091d755b6ace",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lden",imageType:"image/png"},{id:1500,name:"env_bruit2016_axes_routiers_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"83ae2d3b-f0d9-4584-8c48-f6722bd4f517",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lngt",imageType:"image/png"},{id:1504,name:"env_bruit_axes_routiers_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"c5a6e3c5-6bef-4ff9-ac3e-aa494a34e602"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots_2016__3"},{name:"env_bruit_axes_routiers_hotspots_2016__13"}]},{id:1505,name:"env_bruit_axes_routiers_agglomeration_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"a6c63355-6e42-4795-9d72-8744b907b151"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration_2016__6"},{name:"env_bruit_axes_routiers_agglomeration_2016__13"}]},{id:326,name:"env_bruit_axes_routiers_lden",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"3e3aa044-89e0-4676-9404-744f64dd7ba0",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lden",imageType:"image/png"},{id:255,name:"env_bruit_axes_routiers_lngt",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"5e4f2607-b114-4884-8e48-8e1faa997eb4",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lngt",imageType:"image/png"},{id:1475,name:"env_bruit_axes_routiers_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"ff6b3d63-871c-4e88-8fc0-0f276abe259a"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots__10"},{name:"env_bruit_axes_routiers_hotspots__13"}]},{id:1485,name:"env_bruit_axes_routiers_agglomeration",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"f1dd0dd5-4dd5-4d88-b556-af39a20ab137",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration__12"},{name:"env_bruit_axes_routiers_agglomeration__13"}]}],metadata:{},mixed:!0},{id:183,name:"env_bruit_axes_ferroviaires",children:[{id:2761,name:"aev_bruit_railways_2021_Lden",metadata:{is_queryable:!0,metadata_id:"e48e5b8f-9388-47ae-b12f-575ed7416ce1",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lden__46"}]},{id:2762,name:"aev_bruit_railways_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"c2106415-df81-4208-9714-7dad0479ab71",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lngt__47"}]},{id:1498,name:"env_bruit2016_axes_ferroviaires_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"7975b71b-2fd4-45e6-8c0a-306671d665c6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lden",imageType:"image/png"},{id:1502,name:"env_bruit2016_axes_ferroviaires_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"170143ce-53ef-4b2b-997c-a2ccb1b84477",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lngt",imageType:"image/png"},{id:1503,name:"env_bruit_axes_ferroviaires_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"29ef44c6-f357-4d21-829c-f2fdd5fe1149"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots_2016__1"},{name:"env_bruit_axes_ferroviaires_hotspots_2016__13"}]},{id:310,name:"env_bruit_axes_ferroviaires_lden",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"32b40d1c-111e-4eed-91c7-61d61ef27b8d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lden",imageType:"image/png"},{id:259,name:"env_bruit_axes_ferroviaires_lngt",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"2d7e26ad-e448-45a2-9045-3dfb3e3ec15b",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lngt",imageType:"image/png"},{id:1476,name:"env_bruit_axes_ferroviaires_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"d3b30653-d0bf-4924-96b2-251e9f61c979"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots__8"},{name:"env_bruit_axes_ferroviaires_hotspots__13"}]}],metadata:{},mixed:!0},{id:190,name:"env_bruit_air",children:[{id:2667,name:"aev_bruit_aeroport_2021_Lden",metadata:{is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"4ceeb788-86c8-420d-a161-43607ed4e89a",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lden__40"}]},{id:2668,name:"aev_bruit_aeroport_2021_Lngt",metadata:{is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"71277cc9-4b62-4199-8a2e-71ca4a863519",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lngt__41"}]},{id:1501,name:"env_bruit2016_axes_aeroport_lden",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"26e208ff-39a3-4cf6-92db-4c6707fe972a",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lden",imageType:"image/png"},{id:1499,name:"env_bruit2016_axes_aeroport_lngt",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"2aa6f79d-74cc-4f22-bedd-748f8e8e30b9",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lngt",imageType:"image/png"},{id:157,name:"env_bruit_air_lden",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"0f4dcfc5-e947-4e5c-9460-702b8e1a572f",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lden",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lden__70"}]},{id:327,name:"env_bruit_air_lngt",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"6b031060-1f82-467d-af86-afe02a3f04fa",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lngt",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lngt__72"}]}],metadata:{},mixed:!0},{id:2771,name:"env_bruit_agglo",children:[{id:2769,name:"aev_bruit_agglo_industry_2021_Lden",metadata:{is_queryable:!0,metadata_id:"4faed79e-f82c-4758-b4bf-df654951b27f",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_industry_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_industry_2021_Lden__37"}]},{id:2770,name:"aev_bruit_agglo_industry_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"e1e006c9-c637-4e2a-840f-3b7e8a04ce1e",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_industry_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_industry_2021_Lngt__38"}]},{id:2768,name:"aev_bruit_agglo_roads_2021_Lden",metadata:{is_queryable:!0,metadata_id:"0015e212-a7e5-42f6-ba94-3fdb5014513c",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_roads_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_roads_2021_Lden__35"}]},{id:2767,name:"aev_bruit_agglo_roads_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"9718d119-a073-4406-8bf1-d4b409ed6a68",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_roads_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_roads_2021_Lngt__36"}]},{id:2765,name:"aev_bruit_agglo_tram_2021_Lden",metadata:{is_queryable:!0,metadata_id:"47bbe08f-dbb4-4a4f-bbf7-8c6084e6da45",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_tram_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_tram_2021_Lden__33"}]},{id:2766,name:"aev_bruit_agglo_tram_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"e11fbfdf-29c4-4845-ad12-e2fc2ef5f530",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_tram_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_tram_2021_Lngt__34"}]}],metadata:{},mixed:!0},{id:2124,name:"env_bruit_multiexposition",children:[{id:2125,name:"aev_multiexposition_Lden",metadata:{is_queryable:!0,metadata_id:"37c1c1a2-1926-4c92-8c2a-b9ce0ac6cfef"},dimensions:{},type:"WMS",layers:"aev_multiexposition_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_multiexposition_Lden__1"}]},{id:2126,name:"aev_multiexposition_Lnight",metadata:{is_queryable:!0,metadata_id:"a536e129-3c0f-4a6c-a767-0519eec880c1"},dimensions:{},type:"WMS",layers:"aev_multiexposition_Lnight",imageType:"image/png",style:"default",childLayers:[{name:"aev_multiexposition_Lnight__2"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1641,name:"aev_campagne_mesure_bruit",children:[{id:2618,name:"aev_bruit_campagne_2023",children:[{id:2726,name:"aev_campagne_bruit_aeroportuaire_2023",metadata:{is_queryable:!0,metadata_id:"3c6a1f70-51ab-4c8b-9a09-c163bafd23ff"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_aeroportuaire_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_aeroportuaire_2023__109"}]}],metadata:{},mixed:!0},{id:2475,name:"env_bruit_campagne_2022",children:[{id:2619,name:"aev_campagne_bruit_routier_2023",metadata:{is_queryable:!0,metadata_id:"e242b817-86a7-4f70-bc41-8e90d264fd19"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_routier_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_routier_2023__97"}]},{id:2620,name:"aev_campagne_bruit_ferroviaire_2023",metadata:{is_queryable:!0,metadata_id:"c3c06743-6876-4f55-802d-4599000c1681"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_ferroviaire_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_ferroviaire_2023__94"}]}],metadata:{},mixed:!0},{id:1916,name:"aev_silent_cities_2020",children:[{id:1917,name:"aev_silent_cities_2020_phase1",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase1",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase1__7"}]},{id:1918,name:"aev_silent_cities_2020_phase2",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase2",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase2__8"}]},{id:1919,name:"aev_silent_cities_2020_phase3",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase3",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase3__9"}]}],metadata:{},mixed:!0},{id:1921,name:"env_bruit_routes_hotspots_2019_group",children:[{id:1642,name:"env_bruit_routes_hotspots_2019",metadata:{is_queryable:!0,legend_name:"aev:hotspots_rail",metadata_id:"f898e289-c5dd-432b-b3e6-de4c3681b77a"},dimensions:{},type:"WMS",layers:"env_bruit_routes_hotspots_2019",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_routes_hotspots_2019__4"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"webbasemap",css:"lenoz.css",display_in_switcher:!0,fake_scales:["3000","6000","15000","30000","60000","150000","300000","450000","700000","1500000"],page_title:"lenoz.geoportail.lu",print_img:"bandeaulenoz.png",print_long_txt_de:"Luxemburgische Nachhaltigkeitszertifierung",print_long_txt_en:"Luxembourgish durability certification",print_long_txt_fr:"Certification en durabilit luxembourgeoise",print_long_txt_lu:"Ltzebuergesch Nohaltgkeetszertifizirung",print_scales:["10000"],print_short_txt_de:"lenoz.geoportail.lu",print_short_txt_en:"lenoz.geoportail.lu",print_short_txt_fr:"lenoz.geoportail.lu",print_short_txt_lu:"lenoz.geoportail.lu",resolutions:["500.0","250.0","150.0","100.0","50.0","20.0","10.0","5.0","2.0","1.0"],start_layers:["poi_ecoles"]}},{id:124,name:"preizerdaul",icon:"preizerdaul",children:[{id:287,name:"group_ac_preizerdaul_pag",children:[{id:331,name:"ac_preizerdaul_pag",metadata:{is_queryable:!0,legend_name:"preizerdaul:pag",max_dpi:128,metadata_id:"2eb99e09-635c-400f-a32f-fbc7129854c3",start_opacity:.7},dimensions:{},type:"WMS",layers:"ac_preizerdaul_pag",imageType:"image/png",style:"default",childLayers:[{name:"ac_preizerdaul_pag__0"}]},{id:363,name:"ac_preizerdaul_ortho",metadata:{max_dpi:128,metadata_id:"83700e3f-2590-4bab-b93f-47390186a04f"},dimensions:{},type:"WMS",layers:"ac_preizerdaul_ortho",imageType:"image/png",style:"default",childLayers:[{name:"ac_preizerdaul_ortho__0"}]},{id:137,name:"ac_preizerdaul_ortho_2009",metadata:{max_dpi:128,metadata_id:"2d9a745c-4574-42dd-9c7b-ce8f6ddeb4e3"},dimensions:{},type:"WMS",layers:"ac_preizerdaul_ortho_2009",imageType:"image/png",style:"default",childLayers:[{name:"ac_preizerdaul_ortho_2009__1"},{name:"ac_preizerdaul_ortho_2009__0"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"webbasemap",bg_opacity:0,css:"preizerdaul.css",link_title:"Administration communale de Prizerdaul",page_title:"preizerdaul.geoportail.lu",print_img:"preizerdaul.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"preizerdaul.geoportal.lu",print_short_txt_en:"preizerdaul.geoportal.lu",print_short_txt_fr:"preizerdaul.geoportail.lu",print_short_txt_lu:"preizerdaul.geoportal.lu",start_layers:["ac_preizerdaul_ortho","ac_preizerdaul_pag"],start_x:95500,start_y:63500,start_zoom:7}},{id:125,name:"wellenstein",icon:"wellenstein",children:[{id:279,name:"group_ac_wellenstein_pag",children:[{id:210,name:"ac_wellenstein_pag_complet",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_complet",imageType:"image/png"},{id:182,name:"ac_wellenstein_pag_zones",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_zones",imageType:"image/png"},{id:257,name:"ac_wellenstein_pag_limites",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_limites",imageType:"image/png"},{id:258,name:"ac_wellenstein_pag_voies_acces",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"310c9c19-b3fd-42f2-a537-41a5525fa4a2"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_voies_acces",imageType:"image/png"},{id:300,name:"ac_wellenstein_pag_perimetres_zones",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_perimetres_zones",imageType:"image/png"},{id:305,name:"ac_wellenstein_pag_volumes_a_sauvegarder",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_volumes_a_sauvegarder",imageType:"image/png"},{id:162,name:"ac_wellenstein_pag_volumes_batiments",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_volumes_batiments",imageType:"image/png"},{id:282,name:"ac_wellenstein_pag_alignements_a_preserver",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_alignements_a_preserver",imageType:"image/png"}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"streets",css:"wellenstein.css",link_title:"Commune de Wellenstein",page_title:"wellenstein.geoportail.lu",print_img:"wellenstein.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"wellenstein.geoportal.lu",print_short_txt_en:"wellenstein.geoportal.lu",print_short_txt_fr:"wellenstein.geoportail.lu",print_short_txt_lu:"wellenstein.geoportal.lu",start_layers:["ac_wellenstein_pag_complet"],start_x:64965,start_y:93325.5,start_zoom:6}},{id:131,name:"lintgen",icon:"lintgen",children:[{id:422,name:"pag_lintgen",children:[{id:425,name:"pag_lintgen_layer",metadata:{legend_name:"lintgen",metadata_id:"809bceff-4802-47d2-983d-290a0956b327",start_opacity:.6},dimensions:{},type:"WMS",layers:"pag_lintgen_layer",imageType:"image/png",style:"default",childLayers:[{name:"pag_lintgen_layer__pag_lintgen"}]}],metadata:{},mixed:!0},{id:421,name:"eau_4_lintgen",children:[{id:628,name:"eau_new_Bohrungen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:16.7602644",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb039cc765e18ae5ed882",is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen__39"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]},{id:641,name:"eau_new_UESG_1993_(ausser_Mosel)",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:25.7826569",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde1e111e9b03b03833bf",is_queryable:!0,legend_name:"eau:uesg_1993_ausser_mosel",max_dpi:128,metadata_id:"78c692f3-ad20-467b-b03a-0d020a821647"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1993_(ausser_Mosel)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1993_(ausser_Mosel)__123"}]},{id:642,name:"eau_new_UESG_Alzette_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.5894792",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde26111e9b03b03833c0",is_queryable:!0,legend_name:"eau:uesg_alzette_1995",max_dpi:128,metadata_id:"aaf81780-df85-4580-a890-fded8ae03db7"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Alzette_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Alzette_1995__124"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"voidLayer",bg_opacity:.01,css:"lintgen.css",fake_scales:["2000","2500","5000","10000","15000","30000"],page_title:"lintgen.geoportail.lu",print_img:"Lintgen.jpg",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["5000","10000","15000","20000","25000"],print_short_txt_de:"lintgen.geoportal.lu",print_short_txt_en:"lintgen.geoportal.lu",print_short_txt_fr:"lintgen.geoportail.lu",print_short_txt_lu:"lintgen.geoportal.lu",start_layers:["pag_lintgen_layer"],start_x:87430,start_y:77248,start_zoom:1}},{id:120,name:"remich",icon:"remich",children:[{id:236,name:"group_ac_remich_pag",children:[{id:344,name:"ac_remich_pag",metadata:{legend_name:"remich:pag",metadata_id:"14d4159d-e103-4cac-a2a0-418ff24edaee",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_remich_pag",imageType:"image/png"},{id:267,name:"ac_remich_ortho",metadata:{metadata_id:"a2d86966-e7e6-477e-b581-ae3a0e9f8e68"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_remich_ortho",imageType:"image/png"}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"streets",css:"remich.css",link_title:"Administration communale de Remich",page_title:"remich.geoportail.lu",print_img:"remich.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"remich.geoportal.lu",print_short_txt_en:"remich.geoportal.lu",print_short_txt_fr:"remich.geoportail.lu",print_short_txt_lu:"remich.geoportal.lu",start_layers:["ac_remich_ortho","ac_remich_pag"],start_x:67965,start_y:94325.5,start_zoom:6}},{id:114,name:"commande",icon:"commande",children:[{id:253,name:"commande_grp",children:[{id:200,name:"topo_decoupage_100k",metadata:{is_queryable:!0,metadata_id:"0d331d41-73ff-4091-84e1-bf949e092a52"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_100k",imageType:"image/png"},{id:219,name:"topo_decoupage_50k",metadata:{is_queryable:!0,metadata_id:"f3714ffe-11ec-4a4a-8d51-549ba41086da"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_50k",imageType:"image/png"},{id:193,name:"topo_decoupage_5000",metadata:{is_queryable:!0,metadata_id:"036d0cd3-c605-40cb-90d3-8c7afd4ddff6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_5000",imageType:"image/png"},{id:188,name:"topo_decoupage_tc",metadata:{is_queryable:!0,metadata_id:"ef075fce-9bea-4ecd-89a5-73a2587a464a"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_tc",imageType:"image/png"},{id:216,name:"decoupage_communes",metadata:{is_queryable:!0,metadata_id:"e71c2d85-3495-435d-90b7-98ac18f9235f"},dimensions:{},type:"WMS",layers:"decoupage_communes",imageType:"image/png",style:"default",childLayers:[{name:"decoupage_communes__DECOUPAGE_COMMUNE"}]},{id:306,name:"decoupage_geo25k",metadata:{is_queryable:!0,metadata_id:"5cf702be-f598-4d49-9af0-67724acf5ae2"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"decoupage_geo25k",imageType:"image/png"},{id:211,name:"decoupage_geo25_50k",metadata:{is_queryable:!0,metadata_id:"26ebc97c-166b-426c-ac5c-60ae42256f9e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"decoupage_geo25_50k",imageType:"image/png"},{id:262,name:"cadastre",metadata:{exclusion:"[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115]",is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"cadastre",imageType:"image/png"},{id:374,name:"topo_decoupage_ortho_2013",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMS",layers:"topo_decoupage_ortho_2013",imageType:"image/png",style:"default",childLayers:[{name:"topo_decoupage_ortho_2013__DECOUPAGE_ORTHO_2013"}]},{id:418,name:"repere_alti",metadata:{is_queryable:!1,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"418",imageType:"image/png",style:"default",childLayers:[{name:"repere_alti__POI"}]},{id:457,name:"topo_decoupage_5000_ed2015",metadata:{is_queryable:!0,metadata_id:"01182ea0-3c30-4fc0-9bc2-e2dc778592da"},dimensions:{},type:"WMS",layers:"topo_decoupage_5000_ed2015",imageType:"image/png",style:"default",childLayers:[{name:"topo_decoupage_5000_ed2015__DECOUPAGE_5000_ED2015"}]},{id:823,name:"feuilles_cadastrales_urplang2",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMS",layers:"feuilles_cadastrales_urplang",imageType:"image/png",style:"default",childLayers:[{name:"feuilles_cadastrales_urplang2__FEUILLES_CADASTRALES"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{css:"main.css",page_title:"map.geoportail.lu",print_img:"bandeau.jpg",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"map.geoportal.lu",print_short_txt_en:"map.geoportal.lu",print_short_txt_fr:"map.geoportal.lu",print_short_txt_lu:"map.geoportal.lu"}},{id:123,name:"at",icon:"at",children:[{id:394,name:"at_ps",children:[{id:392,name:"at_pst",children:[{id:410,name:"at_pst1",metadata:{is_queryable:!0,legend_name:"at:projetspst",max_dpi:128,metadata_id:"10568679-86b2-487b-b19b-b371c39773c1",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pst1",imageType:"image/png",style:"default",childLayers:[{name:"at_pst1__0"},{name:"at_pst1__1"}]},{id:408,name:"at_pst2",metadata:{is_queryable:!0,legend_name:"at:couloirpst",max_dpi:128,metadata_id:"10568679-86b2-487b-b19b-b371c39773c1",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pst2",imageType:"image/png",style:"default",childLayers:[{name:"at_pst2__0"}]}],metadata:{},mixed:!0},{id:398,name:"at_psp",children:[{id:396,name:"at_psp_cv",metadata:{is_queryable:!0,legend_name:"at:coupureverte",max_dpi:128,metadata_id:"84763751-9311-4d45-8f30-06e8370aeffa",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_psp_cv",imageType:"image/png",style:"default",childLayers:[{name:"at_psp_cv__0"}]},{id:409,name:"at_psp_zvi",metadata:{is_queryable:!0,legend_name:"at:zoneverteinterurbaine",max_dpi:128,metadata_id:"7428ad86-57d1-4186-98aa-c4c2fb94578f",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_psp_zvi",imageType:"image/png",style:"default",childLayers:[{name:"at_psp_zvi__0"}]},{id:395,name:"at_psp_gep",metadata:{is_queryable:!0,legend_name:"at:grandsensemblespaysagers",max_dpi:128,metadata_id:"84763751-9311-4d45-8f30-06e8370aeffa",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_psp_gep",imageType:"image/png",style:"default",childLayers:[{name:"at_psp_gep__0"}]}],metadata:{},mixed:!0},{id:393,name:"at_pszae",children:[{id:407,name:"at_pszae1",metadata:{is_queryable:!0,legend_name:"at:zaeexistante",max_dpi:128,metadata_id:"2133d9bd-6941-4181-8866-0d8db0e1d041",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pszae1",imageType:"image/png",style:"default",childLayers:[{name:"at_pszae1__0"},{name:"at_pszae1__1"}]},{id:402,name:"at_pszae2",metadata:{is_queryable:!0,legend_name:"at:zaenouvext",max_dpi:128,metadata_id:"ea5da181-a572-43fb-9813-e373ad3ac0c1",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pszae2",imageType:"image/png",style:"default",childLayers:[{name:"at_pszae2__0"},{name:"at_pszae2__1"}]},{id:403,name:"at_pszae3",metadata:{is_queryable:!0,legend_name:"at:zoneareclasser",max_dpi:128,metadata_id:"ea5da181-a572-43fb-9813-e373ad3ac0c1",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pszae3",imageType:"image/png",style:"default",childLayers:[{name:"at_pszae3__0"},{name:"at_pszae3__1"}]},{id:1435,name:"at_pszae_droit_preemption",metadata:{is_queryable:!0,metadata_id:"ac28744b-e9cd-4db1-8904-7bfe137aafcd"},dimensions:{},type:"WMS",layers:"at_pszae_droit_preemption",imageType:"image/png",style:"default",childLayers:[{name:"at_pszae_droit_preemption__0"}]}],metadata:{},mixed:!0},{id:400,name:"at_psl",children:[{id:401,name:"at_psl1",metadata:{is_queryable:!0,legend_name:"at:zoneprojenvergurehabitat",max_dpi:128,metadata_id:"a0c94819-73be-40b8-9327-e3b8b0407633",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_psl1",imageType:"image/png",style:"default",childLayers:[{name:"at_psl1__0"},{name:"at_psl1__1"}]},{id:1436,name:"at_psl_droit_preemption",metadata:{is_queryable:!0,metadata_id:"ec647d3d-46bf-4c3d-84dc-fc42f5c875a7"},dimensions:{},type:"WMS",layers:"at_psl_droit_preemption",imageType:"image/png",style:"default",childLayers:[{name:"at_psl_droit_preemption__0"}]}],metadata:{},mixed:!0},{id:1493,name:"at_pds_parcels_group",children:[{id:1492,name:"at_pds_parcels",metadata:{is_queryable:!0,legend_name:"attestation_pds",metadata_id:"2b5a9769-3c31-4468-b457-724037bc8657"},dimensions:{},type:"WMS",layers:"at_pds_parcels",imageType:"image/png",style:"default",childLayers:[{name:"at_pds_parcels__0"}]},{id:1712,name:"at_psl_fond_de_plan",metadata:{metadata_id:"6c0d4541-6626-4ab4-8d02-baebcd2496bb"},dimensions:{},type:"WMS",layers:"at_psl_fond_de_plan",imageType:"image/png",style:"default",childLayers:[{name:"at_psl_fond_de_plan__0"}]}],metadata:{},mixed:!0}],metadata:{is_expanded:!0},mixed:!0},{id:2208,name:"at_diagnostique_terr_group",children:[{id:2209,name:"at_impermeabilisation_group",children:[{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]},{id:2281,name:"at_impermeabilisation_communes_2018",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_communes_2018",metadata_id:"dae9931e-abd9-4f88-8180-024815cd0e1f"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_communes_2018",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_communes_2018__0"}]},{id:2282,name:"at_impermeabilisation_communes_utilisateur_2018",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_communes_utilisateur_2018",metadata_id:"6bd9208a-01a0-42fc-b7dc-55c26ea95e02"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_communes_utilisateur_2018",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_communes_utilisateur_2018__0"}]},{id:2216,name:"at_impermeabilisation_grid_2018_100m",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_100m",metadata_id:"210db74a-e33a-401b-9e17-2cd966cdcd1f"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_100m",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_100m__0"}]},{id:2215,name:"at_impermeabilisation_grid_2018_1km",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_1km",metadata_id:"8dc777d0-f910-4c69-a476-85a73dcd8474"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_1km",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_1km__0"}]}],metadata:{},mixed:!0},{id:2212,name:"at_batiments_group",children:[{id:2214,name:"at_batiments_periode_construction",metadata:{is_queryable:!0,legend_name:"at:periode_construction_batiments",metadata_id:"7c138282-86de-4adb-91c2-467b06786821"},dimensions:{},type:"WMS",layers:"at_batiments_periode_construction",imageType:"image/png",style:"default",childLayers:[{name:"at_batiments_periode_construction__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2211,name:"at_regional_group",children:[{id:2218,name:"at_region_sud_group",children:[{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:2603,name:"at_fruitiers",metadata:{is_queryable:!0,metadata_id:"d47a0780-2fb9-4d01-8774-64a1532f6280"},dimensions:{},type:"WMS",layers:"at_fruitiers",imageType:"image/png",style:"default",childLayers:[{name:"at_fruitiers__0"}]},{id:2604,name:"at_fruitiers_parking",metadata:{is_queryable:!0,metadata_id:"87fca8cd-aa11-4bd6-bc55-72f96a6016b4"},dimensions:{},type:"WMS",layers:"at_fruitiers_parking",imageType:"image/png",style:"default",childLayers:[{name:"at_fruitiers_parking__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2313,name:"at_pos_group",children:[{id:710,name:"pag_pos",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a5f51e0e-c737-44e6-b0e0-7a0016d87707",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_pos",imageType:"image/png",style:"default",childLayers:[{name:"pag_pos__0"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",bg_opacity:100,css:"at.css",display_in_switcher:!0,fake_scales:["750","1500","3000","6000","15000","30000","60000","150000","300000","450000","700000","1500000"],link_title:"Amnagement du territoire",page_title:"at.geoportail.lu",print_img:"bandeau_at.png",print_long_txt_de:"Das ffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le goportail officiel du Grand-Duch de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Ltzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"at.geoportal.lu",print_short_txt_en:"at.geoportal.lu",print_short_txt_fr:"at.geoportail.lu",print_short_txt_lu:"at.geoportal.lu",resolutions:["500.0","250.0","150.0","100.0","50.0","20.0","10.0","5.0","2.0","1.0","0.5","0.25"]}},{id:800,name:"cadastre_hertzien",icon:"main",children:[{id:803,name:"cadastre_hertzien_group",children:[{id:811,name:"mat_antennes_moins_50_watt",metadata:{is_queryable:!0,legend_name:"at:antennesbelow50w",metadata_id:"cbf57825-26ba-4e36-98e8-083c1945066c"},dimensions:{},type:"WMS",layers:"mat_antennes_moins_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_antennes_moins_50_watt__0"}]},{id:1930,name:"mat_5G_antennes_plus_50_watt",metadata:{is_queryable:!0,metadata_id:"76e25a5d-8e78-40cb-a54b-9cfc27b16e60"},dimensions:{},type:"WMS",layers:"mat_5G_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_5G_antennes_plus_50_watt__0"}]},{id:2053,name:"mat_5G-3.6GHZ_antennes_plus_50_watt",metadata:{is_queryable:!0,metadata_id:"e048acda-0ec7-4f52-8221-613d9312c28b"},dimensions:{},type:"WMS",layers:"mat_5G-3.6GHZ_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_5G-3.6GHZ_antennes_plus_50_watt__0"}]},{id:801,name:"mat_antennes_plus_50_watt",metadata:{is_queryable:!0,legend_name:"at:antennes",metadata_id:"e4a24392-591c-4d20-a62b-f75a9191488d"},dimensions:{},type:"WMS",layers:"mat_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_antennes_plus_50_watt__0"}]},{id:802,name:"mat_points_mesure",metadata:{is_queryable:!0,legend_name:"at:pointmesure",metadata_id:"f8f71353-40b8-4e10-b72c-85d8fe9e0577"},dimensions:{},type:"WMS",layers:"mat_points_mesure",imageType:"image/png",style:"default",childLayers:[{name:"mat_points_mesure__0"}]}],metadata:{is_expanded:!0},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:1672,name:"urban_farming",icon:"urban_farming",children:[{id:1678,name:"urban_farming_donnees_disponibles_group",children:[{id:1679,name:"Donnes disponibles",metadata:{is_queryable:!0,legend_name:"uf:donnees_disponibles",metadata_id:"aaa7619b-8b65-4283-829d-f990c62e7f4c"},dimensions:{},type:"WMS",layers:"Donnes disponibles",imageType:"image/png",style:"default",childLayers:[{name:"Donnes disponibles__2"},{name:"Donnes disponibles__3"}]}],metadata:{},mixed:!0},{id:1690,name:"Analyse Ensoleillement",children:[{id:1806,name:"Ensoleillement au 15.02",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"ece9ef19-b1ff-4acc-9d19-c00f7233d648"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.02__15"}]},{id:1683,name:"Ensoleillement au 15.05",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"ece9ef19-b1ff-4acc-9d19-c00f7233d648"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.05",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.05__16"}]},{id:1682,name:"Ensoleillement au 15.08",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"89b63cab-2220-4b00-abd5-2bfbe35352cd"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.08",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.08__17"}]}],metadata:{legend_name:"uf:solar_hiver",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},mixed:!0},{id:1673,name:"Projet en extrieur, hors sol, professionnel, en toiture",children:[{id:1674,name:"Toitures plates",metadata:{legend_name:"uf:roof_type",metadata_id:"65ba3e71-d581-4cde-b037-b6e852963fe6"},dimensions:{},type:"WMS",layers:"Toitures plates",imageType:"image/png",style:"default",childLayers:[{name:"Toitures plates__7"}]},{id:1675,name:"Hauteur des btiments",metadata:{legend_name:"uf:building_height",metadata_id:"021f0cc2-68ea-46b9-97c5-169cc5052e5e"},dimensions:{},type:"WMS",layers:"Hauteur des btiments",imageType:"image/png",style:"default",childLayers:[{name:"Hauteur des btiments__8"}]},{id:1680,name:"Accessibilit lgale",metadata:{legend_name:"uf:parcels_streets",metadata_id:"a53e2022-a799-47b3-9d21-414c992f1019"},dimensions:{},type:"WMS",layers:"Accessibilit lgale",imageType:"image/png",style:"default",childLayers:[{name:"Accessibilit lgale__6"}]},{id:1676,name:"Ensoleillement",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},dimensions:{},type:"WMS",layers:"Ensoleillement",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement__9"}]},{id:1681,name:"Sites de commercialisation et consommation",metadata:{is_queryable:!0,legend_name:"uf:commerce_closeby",metadata_id:"54c3973e-3168-4a0a-9df0-ce5c97360d0d"},dimensions:{},type:"WMS",layers:"Sites de commercialisation et consommation",imageType:"image/png",style:"default",childLayers:[{name:"Sites de commercialisation et consommation__5"}]},{id:1687,name:"Typologie 1 - Carte pondre pour le 15.02",metadata:{is_queryable:!0,legend_name:"uf:typologie1",metadata_id:"aa400ef6-b447-403e-9070-8795067e9017"},dimensions:{},type:"WMS",layers:"Typologie 1 - Carte pondre pour le 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Typologie 1 - Carte pondre pour le 15.02__11"}]}],metadata:{},mixed:!0},{id:1685,name:"Projet en extrieur, hors sol, professionnel, au sol",children:[{id:1676,name:"Ensoleillement",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},dimensions:{},type:"WMS",layers:"Ensoleillement",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement__9"}]},{id:1681,name:"Sites de commercialisation et consommation",metadata:{is_queryable:!0,legend_name:"uf:commerce_closeby",metadata_id:"54c3973e-3168-4a0a-9df0-ce5c97360d0d"},dimensions:{},type:"WMS",layers:"Sites de commercialisation et consommation",imageType:"image/png",style:"default",childLayers:[{name:"Sites de commercialisation et consommation__5"}]},{id:1688,name:"Typologie 2 - Carte pondre pour le 15.02",metadata:{legend_name:"uf:typologie2",metadata_id:"2fdba3ac-42ef-4a4d-9480-a0641b9d9cdc"},dimensions:{},type:"WMS",layers:"Typologie 2 - Carte pondre pour le 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Typologie 2 - Carte pondre pour le 15.02__12"}]}],metadata:{},mixed:!0},{id:1686,name:"Projet en extrieur, hors sol, communautaire, en toiture",children:[{id:1674,name:"Toitures plates",metadata:{legend_name:"uf:roof_type",metadata_id:"65ba3e71-d581-4cde-b037-b6e852963fe6"},dimensions:{},type:"WMS",layers:"Toitures plates",imageType:"image/png",style:"default",childLayers:[{name:"Toitures plates__7"}]},{id:1675,name:"Hauteur des btiments",metadata:{legend_name:"uf:building_height",metadata_id:"021f0cc2-68ea-46b9-97c5-169cc5052e5e"},dimensions:{},type:"WMS",layers:"Hauteur des btiments",imageType:"image/png",style:"default",childLayers:[{name:"Hauteur des btiments__8"}]},{id:1676,name:"Ensoleillement",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},dimensions:{},type:"WMS",layers:"Ensoleillement",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement__9"}]},{id:1689,name:"Typologie 3 - Carte pondre pour le 15.02",metadata:{legend_name:"uf:typologie3",metadata_id:"1fe3fa11-8d55-4612-b044-95a124cb5740"},dimensions:{},type:"WMS",layers:"Typologie 3 - Carte pondre pour le 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Typologie 3 - Carte pondre pour le 15.02__13"}]}],metadata:{},mixed:!0},{id:248,name:"flurstucke_grundstucke",children:[{id:359,name:"parcels",metadata:{exclusion:'[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,"exclusion_ortho2022","exclusion_ortho2022IR","exclusion_ortho2023","exclusion_ortho2023_bati","exclusion_ortho2023IR"]',is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"parcels",imageType:"image/png"},{id:353,name:"parcels_labels",metadata:{metadata_id:"a65629c7-ddd6-43de-b0c3-c49647d8fd2b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"parcels_labels",imageType:"image/png"},{id:199,name:"buildings",metadata:{is_queryable:!0,legend_name:"pcn_batiments:show",metadata_id:"5d0efc9d-a05a-4964-9f9d-a0ab9932af04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"buildings",imageType:"image/png"},{id:320,name:"toponymes",metadata:{metadata_id:"ffa537f7-a438-47da-9e0c-8e32260646a9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"toponymes",imageType:"image/png"},{id:350,name:"communes_cadastrales_labels",metadata:{is_queryable:!0,metadata_id:"5ae8fdfb-bb8f-4f72-b7ee-36c7664fe4b5"},dimensions:{},type:"WMS",layers:"communes_cadastrales_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_cadastrales_labels__COMMUNES_CADASTRALES_LABELS"}]},{id:153,name:"communes_cadastrales",metadata:{is_queryable:!0,metadata_id:"8a95f8b2-2cfb-42e7-a51c-02084228b364"},dimensions:{},type:"WMS",layers:"communes_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"communes_cadastrales__COMMUNES_CADASTRALES"}]},{id:266,name:"sections_cadastrales_labels",metadata:{is_queryable:!0,metadata_id:"69d1b609-11f7-4587-872a-508ee98ea76c"},dimensions:{},type:"WMS",layers:"sections_cadastrales_labels",imageType:"image/png",style:"default",childLayers:[{name:"sections_cadastrales_labels__SECTIONS_CADASTRALES_LABELS"}]},{id:355,name:"sections_cadastrales",metadata:{is_queryable:!0,metadata_id:"c9122320-8f06-4499-ac86-eb469e911369"},dimensions:{},type:"WMS",layers:"sections_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"sections_cadastrales__SECTIONS_CADASTRALES"}]},{id:256,name:"feuilles_cadastrales",metadata:{is_queryable:!0,metadata_id:"51333029-c8cf-490f-b4a6-80ba239f0cb4"},dimensions:{},type:"WMS",layers:"feuilles_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"feuilles_cadastrales__FEUILLES_CADASTRALES"}]},{id:417,name:"remembrements",metadata:{exclusion:"[301,302,303,304,305,306,307,308,309,310]",is_queryable:!0,max_dpi:128,metadata_id:"03d079f3-61fb-48bc-ab39-f3427b208702",start_opacity:.7},dimensions:{},type:"WMS",layers:"remembrements",imageType:"image/png",style:"default",childLayers:[{name:"remembrements__0"},{name:"remembrements__1"}]},{id:1643,name:"act_grid_land_tenure",children:[{id:1644,name:"act_privately_owned_land",metadata:{is_queryable:!0,legend_name:"act:privately",metadata_id:"75cb5ae7-7c48-478f-b2a6-1e5bfbdd5958"},dimensions:{},type:"WMS",layers:"act_privately_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_privately_owned_land__6"}]},{id:1645,name:"act_state_owned_land",metadata:{is_queryable:!0,legend_name:"act:stateowned",metadata_id:"e8813b4e-43c4-4a72-853e-bd7c06fd1111"},dimensions:{},type:"WMS",layers:"act_state_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_state_owned_land__5"}]},{id:1646,name:"act_municipality_owned_land",metadata:{is_queryable:!0,legend_name:"act:municipality",metadata_id:"89d42e03-93ae-444f-a49e-eb869b30071e"},dimensions:{},type:"WMS",layers:"act_municipality_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_municipality_owned_land__4"}]},{id:1647,name:"act_domainepublic_owned_land",metadata:{is_queryable:!0,legend_name:"act:domainepublic",metadata_id:"ac32c380-37df-4594-bbf2-0fd394482fd9"},dimensions:{},type:"WMS",layers:"act_domainepublic_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_domainepublic_owned_land__1"}]},{id:1648,name:"act_publicly_owned_land",metadata:{is_queryable:!0,legend_name:"act:publicly",metadata_id:"0a1852f5-1f32-4bdc-8bbc-d6103921d862"},dimensions:{},type:"WMS",layers:"act_publicly_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_publicly_owned_land__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:1530,name:"atlas_demographique",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:2515,name:"statec_census_grid",children:[{id:2720,name:"statec_census_group_repartition_territoriale",children:[{id:2596,name:"statec_population_commune",metadata:{is_queryable:!0,metadata_id:"5b0ec0de-1ed8-467c-b750-b4421e532cee",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_population_commune",imageType:"image/png",style:"default",childLayers:[{name:"statec_population_commune__0"},{name:"statec_population_commune__1"}]},{id:2597,name:"statec_densite_population_commune",metadata:{is_queryable:!0,metadata_id:"e469230d-68bd-4d9c-8c0b-beda13b4c713",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_densite_population_commune",imageType:"image/png",style:"default",childLayers:[{name:"statec_densite_population_commune__0"},{name:"statec_densite_population_commune__2"}]}],metadata:{},mixed:!0},{id:2721,name:"statec_census_group_repartition_km2",children:[{id:2514,name:"statec_population_grid",metadata:{is_queryable:!0,metadata_id:"3d252bbe-6491-4d22-b03b-d8070d863448",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_population_grid",imageType:"image/png",childLayers:[{name:"statec_population_grid__0"},{name:"statec_population_grid__1"},{name:"statec_population_grid__2"},{name:"statec_population_grid__3"},{name:"statec_population_grid__4"}]}],metadata:{},mixed:!0},{id:2719,name:"statec_census_group_nationalite",children:[{id:2613,name:"statec_census_etrangers",metadata:{is_queryable:!0,metadata_id:"45428d05-75c1-4eb9-93fd-9bbd7030be01",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_etrangers",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_etrangers__0"},{name:"statec_census_etrangers__1"}]},{id:2612,name:"statec_census_allemands",metadata:{is_queryable:!0,metadata_id:"e4a62561-3787-4cee-a28b-cd79975df871",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_allemands",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_allemands__0"},{name:"statec_census_allemands__6"}]},{id:2611,name:"statec_census_belges",metadata:{is_queryable:!0,metadata_id:"9d44ce99-10bf-40c6-b34f-2197aa78d0e3",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_belges",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_belges__0"},{name:"statec_census_belges__5"}]},{id:2609,name:"statec_census_francais",metadata:{is_queryable:!0,metadata_id:"eae3d241-9146-48f6-b1fb-cfd9d6ef8b45",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_francais",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_francais__0"},{name:"statec_census_francais__3"}]},{id:2610,name:"statec_census_italiens",metadata:{is_queryable:!0,metadata_id:"4906e802-8b67-4e46-8d32-daf5ee442d4c",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_italiens",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_italiens__0"},{name:"statec_census_italiens__4"}]},{id:2608,name:"statec_census_portugais",metadata:{is_queryable:!0,metadata_id:"2d0daf15-9519-4d10-af52-8fcda45a352c",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_portugais",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_portugais__0"},{name:"statec_census_portugais__2"}]}],metadata:{},mixed:!0},{id:2722,name:"statec_census_group_structure_urbaine",children:[{id:2715,name:"statec_census_nuclei",metadata:{is_queryable:!0,metadata_id:"7da8cd39-c078-4ed0-8015-49aef4b47aae",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_nuclei",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_nuclei__11"},{name:"statec_census_nuclei__10"},{name:"statec_census_nuclei__7"}]},{id:2717,name:"statec_census_degre_urbanisation",metadata:{is_queryable:!0,metadata_id:"409e0940-6c92-49a7-84b0-3b064cf41e30",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_degre_urbanisation",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_degre_urbanisation__7"},{name:"statec_census_degre_urbanisation__8"},{name:"statec_census_degre_urbanisation__2"},{name:"statec_census_degre_urbanisation__5"}]},{id:2718,name:"statec_census_evolution_poulation_grid",metadata:{is_queryable:!0,metadata_id:"3f7216af-0849-40cd-8c3a-de71065fd51b",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_evolution_poulation_grid",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_evolution_poulation_grid__9"},{name:"statec_census_evolution_poulation_grid__8"},{name:"statec_census_evolution_poulation_grid__3"},{name:"statec_census_evolution_poulation_grid__4"}]}],metadata:{},mixed:!0},{id:2741,name:"statec_recensement_2011_langues",children:[{id:2735,name:"statec_rec_langue_lux",metadata:{is_queryable:!0,metadata_id:"f3e10304-cf5a-4578-b126-90474e40cdf5",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_lux",imageType:"image/png",childLayers:[{name:"statec_rec_langue_lux__3"},{name:"statec_rec_langue_lux__4"},{name:"statec_rec_langue_lux__7"}]},{id:2736,name:"statec_rec_langue_fr",metadata:{is_queryable:!0,metadata_id:"8f95bc60-c665-4429-b04e-afcd13580e9a",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_fr",imageType:"image/png",childLayers:[{name:"statec_rec_langue_fr__3"},{name:"statec_rec_langue_fr__4"},{name:"statec_rec_langue_fr__8"}]},{id:2737,name:"statec_rec_langue_all",metadata:{is_queryable:!0,metadata_id:"e6531436-b506-4229-a1fa-7f1e69a93e8f",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_all",imageType:"image/png",childLayers:[{name:"statec_rec_langue_all__3"},{name:"statec_rec_langue_all__4"},{name:"statec_rec_langue_all__9"}]},{id:2739,name:"statec_rec_langue_eng",metadata:{is_queryable:!0,metadata_id:"0a382635-e8e6-408a-a8f0-20c6a07c3913",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_eng",imageType:"image/png",childLayers:[{name:"statec_rec_langue_eng__3"},{name:"statec_rec_langue_eng__4"},{name:"statec_rec_langue_eng__11"}]},{id:2738,name:"statec_rec_langue_por",metadata:{is_queryable:!0,metadata_id:"54df3b86-a6cd-423e-aafa-8f24075f6402",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_por",imageType:"image/png",childLayers:[{name:"statec_rec_langue_por__3"},{name:"statec_rec_langue_por__4"},{name:"statec_rec_langue_por__10"}]},{id:2740,name:"statec_rec_langue_allo",metadata:{is_queryable:!0,metadata_id:"ae08301b-2fe3-4ed5-8dd4-45d94961e518",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_allo",imageType:"image/png",childLayers:[{name:"statec_rec_langue_allo__12"}]}],metadata:{},mixed:!0},{id:2772,name:"statec_recensement_2011_immigration",children:[{id:2773,name:"statec_nee_etr_pop_tot",children:[{id:2776,name:"statec_nee_etr_pop_tot_par_grid",metadata:{is_queryable:!0,metadata_id:"44f3db25-9487-4735-8148-2704fc5573d0",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_pop_tot_par_grid",imageType:"image/png",childLayers:[{name:"statec_nee_etr_pop_tot_par_grid__23"},{name:"statec_nee_etr_pop_tot_par_grid__28"},{name:"statec_nee_etr_pop_tot_par_grid__21"}]}],metadata:{},mixed:!0},{id:2774,name:"statec_nee_etr_region",children:[{id:2780,name:"statec_nee_etr_region_portugal",metadata:{is_queryable:!0,metadata_id:"0fedc058-9bcb-4abf-a32b-53af46b7b3fd",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_region_portugal",imageType:"image/png",childLayers:[{name:"statec_nee_etr_region_portugal__27"},{name:"statec_nee_etr_region_portugal__28"},{name:"statec_nee_etr_region_portugal__21"}]},{id:2778,name:"statec_nee_etr_region_UE",metadata:{is_queryable:!0,metadata_id:"ced2cc65-dac6-4804-ab9e-46673c3777d7",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_region_UE",imageType:"image/png",childLayers:[{name:"statec_nee_etr_region_UE__25"},{name:"statec_nee_etr_region_UE__28"},{name:"statec_nee_etr_region_UE__21"}]},{id:2779,name:"statec_nee_etr_region_hors_UE",metadata:{is_queryable:!0,metadata_id:"d7eb9236-facf-4130-a2e2-71d3962cb081",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_region_hors_UE",imageType:"image/png",childLayers:[{name:"statec_nee_etr_region_hors_UE__26"},{name:"statec_nee_etr_region_hors_UE__28"},{name:"statec_nee_etr_region_hors_UE__21"}]}],metadata:{},mixed:!0},{id:2775,name:"statec_nee_etr_duree_sejour",children:[{id:2781,name:"statec_nee_etr_duree_sejour_0_4",metadata:{is_queryable:!0,metadata_id:"bebdb67a-db53-4f21-9f55-8f6b9f6b8242",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_duree_sejour_0_4",imageType:"image/png",childLayers:[{name:"statec_nee_etr_duree_sejour_0_4__2"},{name:"statec_nee_etr_duree_sejour_0_4__0"}]},{id:2782,name:"statec_nee_etr_duree_sejour_5_10",metadata:{is_queryable:!0,metadata_id:"26468daa-2fb2-4285-9e29-ed9b5212f6d8",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_duree_sejour_5_10",imageType:"image/png",childLayers:[{name:"statec_nee_etr_duree_sejour_5_10__30"},{name:"statec_nee_etr_duree_sejour_5_10__28"},{name:"statec_nee_etr_duree_sejour_5_10__21"}]},{id:2783,name:"statec_nee_etr_duree_sejour_11_20",metadata:{is_queryable:!0,metadata_id:"f3d49e73-7c46-4dd2-961a-6a0ee484954f",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_duree_sejour_11_20",imageType:"image/png",childLayers:[{name:"statec_nee_etr_duree_sejour_11_20__31"},{name:"statec_nee_etr_duree_sejour_11_20__28"},{name:"statec_nee_etr_duree_sejour_11_20__21"}]},{id:2784,name:"statec_nee_etr_duree_sejour_plus_20",metadata:{is_queryable:!0,metadata_id:"7eaff321-ad4c-4134-8180-e5c8c61d4721",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_duree_sejour_plus_20",imageType:"image/png",childLayers:[{name:"statec_nee_etr_duree_sejour_plus_20__32"},{name:"statec_nee_etr_duree_sejour_plus_20__28"},{name:"statec_nee_etr_duree_sejour_plus_20__21"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2728,name:"statec_atlas_demographique_group",children:[{id:1546,name:"ad_org_territoriale",children:[{id:1547,name:"ad_org_terr_lux",children:[{id:1532,name:"ad_communes_cantons",metadata:{is_queryable:!0,legend_name:"ad:communes_cantons",metadata_id:"fbf159ad-4c67-40f4-9b40-547d1eb35642"},dimensions:{},type:"WMS",layers:"ad_communes_cantons",imageType:"image/png",style:"default",childLayers:[{name:"ad_communes_cantons__1"},{name:"ad_communes_cantons__0"}]},{id:1531,name:"ad_fusions_communes",metadata:{is_queryable:!0,legend_name:"ad:fusions_communes",metadata_id:"07ce11d6-1cc7-4e87-9d09-ceb89c39bfe1"},dimensions:{},type:"WMS",layers:"ad_fusions_communes",imageType:"image/png",style:"default",childLayers:[{name:"ad_fusions_communes__9"},{name:"ad_fusions_communes__10"},{name:"ad_fusions_communes__11"},{name:"ad_fusions_communes__12"},{name:"ad_fusions_communes__13"},{name:"ad_fusions_communes__14"},{name:"ad_fusions_communes__15"},{name:"ad_fusions_communes__0"}]},{id:1574,name:"ad_poles_urbains",metadata:{is_queryable:!0,legend_name:"ad:poles_urbains",metadata_id:"891c4e2b-8972-4fd7-a1aa-6330f6dafbf8"},dimensions:{},type:"WMS",layers:"ad_poles_urbains",imageType:"image/png",style:"default",childLayers:[{name:"ad_poles_urbains__17"},{name:"ad_poles_urbains__18"},{name:"ad_poles_urbains__19"},{name:"ad_poles_urbains__20"},{name:"ad_poles_urbains__21"},{name:"ad_poles_urbains__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1548,name:"ad_etat_population",children:[{id:1549,name:"ad_population_stock_evolution_densite",children:[{id:1575,name:"ad_population_commune_canton",children:[{id:1576,name:"ad_population_canton",metadata:{is_queryable:!0,legend_name:"ad:population_canton",metadata_id:"18ceedb6-1867-419f-ab92-11e9787782a0"},dimensions:{},type:"WMS",layers:"ad_population_canton",imageType:"image/png",style:"default",childLayers:[{name:"ad_population_canton__24"},{name:"ad_population_canton__0"}]},{id:1577,name:"ad_population_commune",metadata:{is_queryable:!0,legend_name:"ad:population_commune",metadata_id:"26308dad-cae4-4ba7-af9f-5585488efb9d"},dimensions:{},type:"WMS",layers:"ad_population_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_population_commune__23"},{name:"ad_population_commune__0"}]}],metadata:{},mixed:!0},{id:1550,name:"ad_evolution_pop_comm",children:[{id:1533,name:"ad_evol_pop_1981_2018",metadata:{is_queryable:!0,legend_name:"ad:accroissement:1981:2018",metadata_id:"bb9534dd-5a4c-4cfd-8733-90f4b4501379"},dimensions:{},type:"WMS",layers:"ad_evol_pop_1981_2018",imageType:"image/png",style:"default",childLayers:[{name:"ad_evol_pop_1981_2018__25"},{name:"ad_evol_pop_1981_2018__0"}]}],metadata:{},mixed:!0},{id:1551,name:"ad_densite_pop",children:[{id:1535,name:"ad_densite_pop_comm",metadata:{is_queryable:!0,legend_name:"ad:population_densite_commune",metadata_id:"1c6bd461-d2f8-4d87-ab8e-48291eb18cbd"},dimensions:{},type:"WMS",layers:"ad_densite_pop_comm",imageType:"image/png",style:"default",childLayers:[{name:"ad_densite_pop_comm__28"},{name:"ad_densite_pop_comm__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1552,name:"ad_rapport_hommes_femmes",children:[{id:1578,name:"ad_prop_femmes_comm_2018",metadata:{is_queryable:!0,legend_name:"ad:proportion_femmes",metadata_id:"4424bbe2-bb9b-4bab-b0fd-b754d833ce07"},dimensions:{},type:"WMS",layers:"ad_prop_femmes_comm_2018",imageType:"image/png",style:"default",childLayers:[{name:"ad_prop_femmes_comm_2018__29"},{name:"ad_prop_femmes_comm_2018__0"}]}],metadata:{},mixed:!0},{id:1554,name:"ad_etrangers_lieu_naissance",children:[{id:1545,name:"ad_part_etrangers_comm",children:[{id:1579,name:"ad_structure_pop_comm",metadata:{is_queryable:!0,legend_name:"ad:structure_population",metadata_id:"a12c27e9-37a5-4a1e-a98d-6cfccff42c21"},dimensions:{},type:"WMS",layers:"ad_structure_pop_comm",imageType:"image/png",style:"default",childLayers:[{name:"ad_structure_pop_comm__27"},{name:"ad_structure_pop_comm__0"}]}],metadata:{},mixed:!0},{id:1555,name:"ad_nationalites_commune_2018",children:[{id:1536,name:"ad_part_portugais_commune",metadata:{is_queryable:!0,legend_name:"ad:part_portugais",metadata_id:"78513942-ee02-43c1-bd56-a32e57688bf7"},dimensions:{},type:"WMS",layers:"ad_part_portugais_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_portugais_commune__34"},{name:"ad_part_portugais_commune__35"},{name:"ad_part_portugais_commune__0"}]},{id:1534,name:"ad_part_francais_commune",metadata:{is_queryable:!0,legend_name:"ad:part_francais",metadata_id:"aff2570e-da08-47a3-a943-a9d8b16bcebb"},dimensions:{},type:"WMS",layers:"ad_part_francais_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_francais_commune__36"},{name:"ad_part_francais_commune__37"},{name:"ad_part_francais_commune__0"}]},{id:1544,name:"ad_part_italiens_commune",metadata:{is_queryable:!0,legend_name:"ad:part_italiens",metadata_id:"c983db23-867c-40b0-8388-80a6bc35cc96"},dimensions:{},type:"WMS",layers:"ad_part_italiens_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_italiens_commune__38"},{name:"ad_part_italiens_commune__39"},{name:"ad_part_italiens_commune__0"}]},{id:1541,name:"ad_part_belges_commune",metadata:{is_queryable:!0,legend_name:"ad:part_belges",metadata_id:"9b2484d9-1085-43df-bab0-e1ada3a02fde"},dimensions:{},type:"WMS",layers:"ad_part_belges_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_belges_commune__40"},{name:"ad_part_belges_commune__41"},{name:"ad_part_belges_commune__0"}]},{id:1538,name:"ad_part_allemands_commune",metadata:{is_queryable:!0,legend_name:"ad:part_allemands",metadata_id:"0c638f13-5530-41fc-8f3b-68eba2cbf8db"},dimensions:{},type:"WMS",layers:"ad_part_allemands_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_allemands_commune__42"},{name:"ad_part_allemands_commune__43"},{name:"ad_part_allemands_commune__0"}]},{id:1543,name:"ad_part_UE28_commune",metadata:{is_queryable:!0,legend_name:"ad:part_ue28",metadata_id:"2e232af1-5a76-44ba-b793-2e891c4d2056"},dimensions:{},type:"WMS",layers:"ad_part_UE28_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_UE28_commune__44"},{name:"ad_part_UE28_commune__45"},{name:"ad_part_UE28_commune__0"}]},{id:1542,name:"ad_part_nonUE28_commune",metadata:{is_queryable:!0,legend_name:"ad:part_non_ue28",metadata_id:"448fb00f-a7e6-442e-bc45-4f4eb2ba57b8"},dimensions:{},type:"WMS",layers:"ad_part_nonUE28_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_nonUE28_commune__46"},{name:"ad_part_nonUE28_commune__47"},{name:"ad_part_nonUE28_commune__0"}]},{id:1537,name:"ad_part_africains_commune",metadata:{is_queryable:!0,legend_name:"ad:part_africains",metadata_id:"4cda15de-4bf7-442c-b4ea-cf9eb48132e2"},dimensions:{},type:"WMS",layers:"ad_part_africains_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_africains_commune__48"},{name:"ad_part_africains_commune__49"},{name:"ad_part_africains_commune__0"}]},{id:1539,name:"ad_part_americains_commune",metadata:{is_queryable:!0,legend_name:"ad:part_americains",metadata_id:"5b9181b3-29a1-41a6-a44a-9e54a8677efd"},dimensions:{},type:"WMS",layers:"ad_part_americains_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_americains_commune__50"},{name:"ad_part_americains_commune__51"},{name:"ad_part_americains_commune__0"}]},{id:1540,name:"ad_part_asiates_commune",metadata:{is_queryable:!0,legend_name:"ad:part_asiates",metadata_id:"8f83aa66-4b95-4632-90c3-164f591ad99d"},dimensions:{},type:"WMS",layers:"ad_part_asiates_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_asiates_commune__52"},{name:"ad_part_asiates_commune__53"},{name:"ad_part_asiates_commune__0"}]}],metadata:{},mixed:!0},{id:1580,name:"ad_lieu_naissance_lux_etr",children:[{id:1581,name:"ad_lieu_naissance_commune",metadata:{is_queryable:!0,legend_name:"ad:lieu_naissance",metadata_id:"34c8f0cb-08fd-41d9-8f6c-e0036e48a7a2"},dimensions:{},type:"WMS",layers:"ad_lieu_naissance_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_lieu_naissance_commune__54"},{name:"ad_lieu_naissance_commune__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1556,name:"ad_structure_age",children:[{id:1557,name:"ad_age_moyen",children:[{id:1561,name:"ad_age_moyen_femmes",metadata:{is_queryable:!0,legend_name:"ad:age_moyen_femmes",metadata_id:"d371cccb-da30-4a98-9d6e-1b0a6cb43e84"},dimensions:{},type:"WMS",layers:"ad_age_moyen_femmes",imageType:"image/png",style:"default",childLayers:[{name:"ad_age_moyen_femmes__3"},{name:"ad_age_moyen_femmes__0"}]},{id:1562,name:"ad_age_moyen_hommes",metadata:{is_queryable:!0,legend_name:"ad:age_moyen_hommes",metadata_id:"6448bc58-c7a2-483e-8fef-381bcd24c007"},dimensions:{},type:"WMS",layers:"ad_age_moyen_hommes",imageType:"image/png",style:"default",childLayers:[{name:"ad_age_moyen_hommes__4"},{name:"ad_age_moyen_hommes__0"}]},{id:1563,name:"ad_age_moyen_2",metadata:{is_queryable:!0,legend_name:"ad:age_moyen_2",metadata_id:"d5e02e7a-859e-445e-984f-c88cc03f107e"},dimensions:{},type:"WMS",layers:"ad_age_moyen_2",imageType:"image/png",style:"default",childLayers:[{name:"ad_age_moyen_2__5"},{name:"ad_age_moyen_2__0"}]}],metadata:{},mixed:!0},{id:1558,name:"ad_proportion_classes_age",children:[{id:1564,name:"ad_moins20",metadata:{is_queryable:!0,legend_name:"ad:age_moins20",metadata_id:"5834d06d-316a-41e8-823d-68e522b77550"},dimensions:{},type:"WMS",layers:"ad_moins20",imageType:"image/png",style:"default",childLayers:[{name:"ad_moins20__7"},{name:"ad_moins20__0"}]},{id:1565,name:"ad_20_64",metadata:{is_queryable:!0,legend_name:"ad:age_20_64",metadata_id:"8d1624c9-9c5e-4131-8ebe-4989a1214be1"},dimensions:{},type:"WMS",layers:"ad_20_64",imageType:"image/png",style:"default",childLayers:[{name:"ad_20_64__8"},{name:"ad_20_64__0"}]},{id:1566,name:"ad_65plus",metadata:{is_queryable:!0,legend_name:"ad:age_65plus",metadata_id:"e263aee4-2f0f-454c-84d5-7abd64406211"},dimensions:{},type:"WMS",layers:"ad_65plus",imageType:"image/png",style:"default",childLayers:[{name:"ad_65plus__9"},{name:"ad_65plus__0"}]}],metadata:{},mixed:!0},{id:1559,name:"ad_proportion_jeunes",children:[{id:1567,name:"ad_moins3",metadata:{is_queryable:!0,legend_name:"ad:age_moin3",metadata_id:"e270926d-1f82-42c5-be80-c8f0d551e52c"},dimensions:{},type:"WMS",layers:"ad_moins3",imageType:"image/png",style:"default",childLayers:[{name:"ad_moins3__11"},{name:"ad_moins3__0"}]},{id:1568,name:"ad_3_5",metadata:{is_queryable:!0,legend_name:"ad:age_3_5",metadata_id:"68791225-c16c-45c8-ba06-fa88be4ef4e0"},dimensions:{},type:"WMS",layers:"ad_3_5",imageType:"image/png",style:"default",childLayers:[{name:"ad_3_5__12"},{name:"ad_3_5__0"}]},{id:1569,name:"ad_6_10",metadata:{is_queryable:!0,legend_name:"ad:age_6_10",metadata_id:"2e54caf6-b57c-4da5-855e-0dd521518862"},dimensions:{},type:"WMS",layers:"ad_6_10",imageType:"image/png",style:"default",childLayers:[{name:"ad_6_10__13"},{name:"ad_6_10__0"}]},{id:1570,name:"ad_11_17",metadata:{is_queryable:!0,legend_name:"ad:age_11_17",metadata_id:"cc51e192-a9b7-4d2f-9406-4ed6639280ed"},dimensions:{},type:"WMS",layers:"ad_11_17",imageType:"image/png",style:"default",childLayers:[{name:"ad_11_17__14"},{name:"ad_11_17__0"}]}],metadata:{},mixed:!0},{id:1560,name:"ad_proportion_ages",children:[{id:1571,name:"ad_65_74",metadata:{is_queryable:!0,legend_name:"ad:age_65_74",metadata_id:"fb59a479-3177-417b-a905-bff71f9eb335"},dimensions:{},type:"WMS",layers:"ad_65_74",imageType:"image/png",style:"default",childLayers:[{name:"ad_65_74__16"},{name:"ad_65_74__0"}]},{id:1572,name:"ad_75_89",metadata:{is_queryable:!0,legend_name:"ad:age_75_89",metadata_id:"ee4a9399-501f-4a1f-93b0-d3827d3dd016"},dimensions:{},type:"WMS",layers:"ad_75_89",imageType:"image/png",style:"default",childLayers:[{name:"ad_75_89__17"},{name:"ad_75_89__0"}]},{id:1573,name:"ad_90plus",metadata:{is_queryable:!0,legend_name:"ad:age_90plus",metadata_id:"c859f388-6e37-49c5-bc23-404703ad9215"},dimensions:{},type:"WMS",layers:"ad_90plus",imageType:"image/png",style:"default",childLayers:[{name:"ad_90plus__18"},{name:"ad_90plus__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1589,name:"ad_rapport_dependance",children:[{id:1582,name:"ad_rapport_dependance_personnes_agees",metadata:{is_queryable:!0,legend_name:"ad:rapport_dependance_ages",metadata_id:"b739896e-28cb-471b-afc8-4c9d8a36fcf5"},dimensions:{},type:"WMS",layers:"ad_rapport_dependance_personnes_agees",imageType:"image/png",style:"default",childLayers:[{name:"ad_rapport_dependance_personnes_agees__19"},{name:"ad_rapport_dependance_personnes_agees__0"}]},{id:1583,name:"ad_rapport_dependance_jeunes",metadata:{is_queryable:!0,legend_name:"ad:rapport_dependance_jeunes",metadata_id:"711df835-4cf0-4557-80dc-67c7c18d5f3c"},dimensions:{},type:"WMS",layers:"ad_rapport_dependance_jeunes",imageType:"image/png",style:"default",childLayers:[{name:"ad_rapport_dependance_jeunes__20"},{name:"ad_rapport_dependance_jeunes__0"}]},{id:1584,name:"ad_rapport_dependance_total",metadata:{is_queryable:!0,legend_name:"ad:rapport_dependance_total",metadata_id:"b898fae0-2073-4cc2-88b4-a4851e93e16f"},dimensions:{},type:"WMS",layers:"ad_rapport_dependance_total",imageType:"image/png",style:"default",childLayers:[{name:"ad_rapport_dependance_total__21"},{name:"ad_rapport_dependance_total__0"}]}],metadata:{},mixed:!0},{id:1590,name:"ad_situation_matrimoniale",children:[{id:1585,name:"ad_celibataires",metadata:{is_queryable:!0,legend_name:"ad:celibataires",metadata_id:"40c3ab92-f09b-4722-b401-a6a271f083a4"},dimensions:{},type:"WMS",layers:"ad_celibataires",imageType:"image/png",style:"default",childLayers:[{name:"ad_celibataires__23"},{name:"ad_celibataires__0"}]},{id:1586,name:"ad_maries_pacses",metadata:{is_queryable:!0,legend_name:"ad:maries",metadata_id:"764c6af3-bc24-43a6-9741-d3e4f7cf83bb"},dimensions:{},type:"WMS",layers:"ad_maries_pacses",imageType:"image/png",style:"default",childLayers:[{name:"ad_maries_pacses__24"},{name:"ad_maries_pacses__0"}]},{id:1587,name:"ad_divorces_separes",metadata:{is_queryable:!0,legend_name:"ad:divorces",metadata_id:"7eb6a7f9-1419-4b34-adbc-fecaef5b5954"},dimensions:{},type:"WMS",layers:"ad_divorces_separes",imageType:"image/png",style:"default",childLayers:[{name:"ad_divorces_separes__25"},{name:"ad_divorces_separes__0"}]},{id:1588,name:"ad_veufs_veuves",metadata:{is_queryable:!0,legend_name:"ad:veufs",metadata_id:"e17b3af4-b31b-47ec-9a38-c01e8d3ccb30"},dimensions:{},type:"WMS",layers:"ad_veufs_veuves",imageType:"image/png",style:"default",childLayers:[{name:"ad_veufs_veuves__26"},{name:"ad_veufs_veuves__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1591,name:"ad_mouvement_population",children:[{id:1592,name:"ad_naissances",children:[{id:1597,name:"ad_naissances_taux_natalite",metadata:{is_queryable:!0,legend_name:"ad:naissances_taux_natalite",metadata_id:"9930d837-0412-47a3-bca1-711cdd61af6a"},dimensions:{},type:"WMS",layers:"ad_naissances_taux_natalite",imageType:"image/png",style:"default",childLayers:[{name:"ad_naissances_taux_natalite__4"},{name:"ad_naissances_taux_natalite__5"},{name:"ad_naissances_taux_natalite__0"}]},{id:1598,name:"ad_naissances_mariage",metadata:{is_queryable:!0,legend_name:"ad:naissances_mariage",metadata_id:"535ff8a9-86b6-486d-8a68-2e73e0c7a979"},dimensions:{},type:"WMS",layers:"ad_naissances_mariage",imageType:"image/png",style:"default",childLayers:[{name:"ad_naissances_mariage__7"},{name:"ad_naissances_mariage__0"}]},{id:1599,name:"ad_naissances_age_maternite",metadata:{is_queryable:!0,legend_name:"ad:naissances_age_maternite",metadata_id:"75a40efe-456c-4f72-8ce7-ea860143ea29"},dimensions:{},type:"WMS",layers:"ad_naissances_age_maternite",imageType:"image/png",style:"default",childLayers:[{name:"ad_naissances_age_maternite__9"},{name:"ad_naissances_age_maternite__0"}]}],metadata:{},mixed:!0},{id:1593,name:"ad_deces",children:[{id:1600,name:"ad_deces_taux_mortalite",metadata:{is_queryable:!0,legend_name:"ad:deces_taux_mortalite",metadata_id:"68b8de6b-b71f-4f93-9d07-150181d2dfba"},dimensions:{},type:"WMS",layers:"ad_deces_taux_mortalite",imageType:"image/png",style:"default",childLayers:[{name:"ad_deces_taux_mortalite__12"},{name:"ad_deces_taux_mortalite__13"},{name:"ad_deces_taux_mortalite__0"}]}],metadata:{},mixed:!0},{id:1594,name:"ad_solde_naturel",children:[{id:1601,name:"ad_solde_naturel_nombre_absolu",metadata:{is_queryable:!0,legend_name:"ad:solde_naturel",metadata_id:"7a2fd409-5e34-48b6-89a1-83d14b519dff"},dimensions:{},type:"WMS",layers:"ad_solde_naturel_nombre_absolu",imageType:"image/png",style:"default",childLayers:[{name:"ad_solde_naturel_nombre_absolu__16"},{name:"ad_solde_naturel_nombre_absolu__17"},{name:"ad_solde_naturel_nombre_absolu__18"},{name:"ad_solde_naturel_nombre_absolu__0"}]}],metadata:{},mixed:!0},{id:1595,name:"ad_migrations",children:[{id:1603,name:"ad_migrations_solde_interne",metadata:{is_queryable:!0,legend_name:"ad:migrations_solde",metadata_id:"2d500aa2-fe45-4a07-ab9f-506b11153744"},dimensions:{},type:"WMS",layers:"ad_migrations_solde_interne",imageType:"image/png",style:"default",childLayers:[{name:"ad_migrations_solde_interne__21"},{name:"ad_migrations_solde_interne__22"},{name:"ad_migrations_solde_interne__23"},{name:"ad_migrations_solde_interne__0"}]},{id:1604,name:"ad_migrations_solde_international",metadata:{is_queryable:!0,legend_name:"ad:migrations_solde_international",metadata_id:"48795eb2-baf4-4f60-bb41-bed3b7dac520"},dimensions:{},type:"WMS",layers:"ad_migrations_solde_international",imageType:"image/png",style:"default",childLayers:[{name:"ad_migrations_solde_international__25"},{name:"ad_migrations_solde_international__26"},{name:"ad_migrations_solde_international__27"},{name:"ad_migrations_solde_international__0"}]},{id:1605,name:"ad_migrations_solde_total",metadata:{is_queryable:!0,legend_name:"ad:migrations_solde_total",metadata_id:"27cdcc17-8190-4381-94df-e06dcbe7808a"},dimensions:{},type:"WMS",layers:"ad_migrations_solde_total",imageType:"image/png",style:"default",childLayers:[{name:"ad_migrations_solde_total__29"},{name:"ad_migrations_solde_total__30"},{name:"ad_migrations_solde_total__31"},{name:"ad_migrations_solde_total__0"}]}],metadata:{},mixed:!0},{id:1596,name:"ad_mariages",children:[{id:1606,name:"ad_mariages_taux_nuptialite",metadata:{is_queryable:!0,legend_name:"ad:mariages_taux_nuptialite",metadata_id:"25192002-b1b7-49fd-a0d7-b83642c07c68"},dimensions:{},type:"WMS",layers:"ad_mariages_taux_nuptialite",imageType:"image/png",style:"default",childLayers:[{name:"ad_mariages_taux_nuptialite__34"},{name:"ad_mariages_taux_nuptialite__35"},{name:"ad_mariages_taux_nuptialite__0"}]},{id:1607,name:"ad_mariages_age_femme",metadata:{is_queryable:!0,legend_name:"ad:mariages_age_femmes",metadata_id:"727febc6-600f-425c-a8d6-1349890f5e31"},dimensions:{},type:"WMS",layers:"ad_mariages_age_femme",imageType:"image/png",style:"default",childLayers:[{name:"ad_mariages_age_femme__37"},{name:"ad_mariages_age_femme__0"}]},{id:1608,name:"ad_mariage_age_hommes",metadata:{is_queryable:!0,legend_name:"ad:mariages_age_homme",metadata_id:"e7334b68-11fe-430f-95d5-d2f792d24011"},dimensions:{},type:"WMS",layers:"ad_mariage_age_hommes",imageType:"image/png",style:"default",childLayers:[{name:"ad_mariage_age_hommes__38"},{name:"ad_mariage_age_hommes__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1602,name:"ad_langues_lux",children:[{id:1616,name:"ad_langue_principale_2018",children:[{id:1609,name:"ad_langues_luxembourgeois",metadata:{is_queryable:!0,legend_name:"ad:langues_lux",metadata_id:"665006fe-aaff-40d3-8adc-76f41909a2cf"},dimensions:{},type:"WMS",layers:"ad_langues_luxembourgeois",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_luxembourgeois__42"},{name:"ad_langues_luxembourgeois__43"},{name:"ad_langues_luxembourgeois__0"}]},{id:1610,name:"ad_langues_francais",metadata:{is_queryable:!0,legend_name:"ad:langues_francais",metadata_id:"207b92c0-6479-4bbc-b8a3-3ddef53d3029"},dimensions:{},type:"WMS",layers:"ad_langues_francais",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_francais__45"},{name:"ad_langues_francais__46"},{name:"ad_langues_francais__0"}]},{id:1611,name:"ad_langues_allemand",metadata:{is_queryable:!0,legend_name:"ad:langues_allemand",metadata_id:"2fbdab89-6330-426c-af00-a1ce4b6294f5"},dimensions:{},type:"WMS",layers:"ad_langues_allemand",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_allemand__48"},{name:"ad_langues_allemand__49"},{name:"ad_langues_allemand__0"}]},{id:1612,name:"ad_langues_portugais",metadata:{is_queryable:!0,legend_name:"ad:langues_portugais",metadata_id:"a0efcf68-9445-4d39-8193-a6f9cebf500b"},dimensions:{},type:"WMS",layers:"ad_langues_portugais",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_portugais__51"},{name:"ad_langues_portugais__52"},{name:"ad_langues_portugais__0"}]},{id:1613,name:"ad_langues_italien",metadata:{is_queryable:!0,legend_name:"ad:langues_italien",metadata_id:"aa83ba2b-297e-4d1a-9dbf-00853a3a01bd"},dimensions:{},type:"WMS",layers:"ad_langues_italien",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_italien__54"},{name:"ad_langues_italien__55"},{name:"ad_langues_italien__0"}]},{id:1614,name:"ad_langues_anglais",metadata:{is_queryable:!0,legend_name:"ad:langues_anglais",metadata_id:"2fef731d-4c11-4c56-be6c-69b2f800931d"},dimensions:{},type:"WMS",layers:"ad_langues_anglais",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_anglais__57"},{name:"ad_langues_anglais__58"},{name:"ad_langues_anglais__0"}]},{id:1615,name:"ad_langues_autre",metadata:{is_queryable:!0,legend_name:"ad:langues_autre",metadata_id:"6c87f276-7219-4507-b4ba-a7f8a2378856"},dimensions:{},type:"WMS",layers:"ad_langues_autre",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_autre__60"},{name:"ad_langues_autre__61"},{name:"ad_langues_autre__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:818,name:"API_ONLY",icon:"main",children:[{id:2841,name:"Couches populaires",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:262,name:"cadastre",metadata:{exclusion:"[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115]",is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"cadastre",imageType:"image/png"},{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:698,name:"pag_pag",metadata:{is_queryable:!0,legend_name:"pag",linked_layers:["697","696","1366","709","710"],max_dpi:128,metadata_id:"12c67295-d150-430f-aa28-fa004ecba3c7",start_opacity:.7},dimensions:{},type:"WMS",layers:"pag_pag",imageType:"image/png",style:"default",childLayers:[{name:"pag_pag__28"},{name:"pag_pag__27"},{name:"pag_pag__26"},{name:"pag_pag__25"},{name:"pag_pag__24"},{name:"pag_pag__23"},{name:"pag_pag__22"},{name:"pag_pag__21"},{name:"pag_pag__20"},{name:"pag_pag__19"},{name:"pag_pag__18"},{name:"pag_pag__17"},{name:"pag_pag__16"},{name:"pag_pag__15"},{name:"pag_pag__14"},{name:"pag_pag__13"},{name:"pag_pag__12"},{name:"pag_pag__11"},{name:"pag_pag__9"},{name:"pag_pag__8"},{name:"pag_pag__7"},{name:"pag_pag__6"},{name:"pag_pag__202"},{name:"pag_pag__5"},{name:"pag_pag__200"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:2811,name:"tour_randonnee_all",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_randonnee_all",imageType:"image/png",style:"default",childLayers:[{name:"tour_randonnee_all__category"}]},{id:1813,name:"myenergy_solarkataster_luxemburg_solar_potentials",metadata:{is_queryable:!0,legend_name:"energie:potentiel_solaire",metadata_id:"97628fac-c53b-4426-a829-b188105b9ead",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857",ogc_query_layers:["st_luxemburg_22_feature_info"]},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_solar_potentials",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_solar_potentials__st_luxemburg_22_solar_potentials"}]},{id:245,name:"env_zones_protegees",children:[{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:334,name:"env_zones_protegees_communautaires",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{is_expanded:!0},mixed:!0},{id:2846,name:"Couches rcentes",children:[{id:1734,name:"log_prix_app",children:[{id:1739,name:"log_prix_app_existants",metadata:{is_queryable:!0,legend_name:"logt_prix_app_exist",metadata_id:"9679921a-f90e-4d26-9918-96e66225a171"},dimensions:{},type:"WMS",layers:"log_prix_app_existants",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_existants__21"}]},{id:1740,name:"log_prix_app_en_construction",metadata:{is_queryable:!0,legend_name:"logt_prix_app_enconstruction",metadata_id:"bbb36662-64ba-4d2e-a9a4-7ab00d0bb264"},dimensions:{},type:"WMS",layers:"log_prix_app_en_construction",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_en_construction__20"}]}],metadata:{},mixed:!0},{id:1735,name:"log_loyers",children:[{id:1741,name:"log_loyers_app",metadata:{is_queryable:!0,legend_name:"logt_loyers_app",metadata_id:"2c3dc437-77ac-4030-a8d0-f61fd12e8f5e"},dimensions:{},type:"WMS",layers:"log_loyers_app",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_app__18"}]},{id:1742,name:"log_loyers_maisons",metadata:{is_queryable:!0,legend_name:"logt_loyers_maisons",metadata_id:"f914e59b-6684-4a94-b5ec-b5a782708371"},dimensions:{},type:"WMS",layers:"log_loyers_maisons",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_maisons__17"}]}],metadata:{},mixed:!0},{id:2835,name:"ortho2023_IR",metadata:{exclusion:'["exclusion_ortho2023IR","exclusion_ortho2023IR_bati"]',metadata_id:"3bb6099a-67f2-4243-b820-ffaeb03e439b"},dimensions:{},type:"WMS",layers:"ortho2023_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2023_IR__0"}]},{id:2812,name:"aev_pacte_climat_2023",metadata:{is_queryable:!0,legend_name:"aev:klimapakt2023",metadata_id:"223a6d2c-ac2c-4b95-9beb-900fd9b3e168"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2023__10"}]},{id:2794,name:"eau_restrictions_forages_prives_prelevement",metadata:{legend_name:"eau:restrictions_nouveaux_forages_prives",metadata_id:"b2f60fc1-c2e8-4472-a8e2-4e11a862b257"},dimensions:{},type:"WMS",layers:"eau_restrictions_forages_prives_prelevement",imageType:"image/png",style:"default",childLayers:[{name:"eau_restrictions_forages_prives_prelevement__475"}]}],metadata:{is_expanded:!1},mixed:!0},{id:820,name:"API_ONLY_LAYERS",children:[{id:1363,name:"reagis",metadata:{is_queryable:!0,metadata_id:"aafa412b-a2df-428e-a6d2-19a5774c8000"},dimensions:{},type:"WMS",layers:"reagis",imageType:"image/png",style:"dfault",childLayers:[{name:"reagis__POI"}]},{id:1375,name:"makerspaces",metadata:{is_queryable:!0,metadata_id:"4344ba7d-463c-499f-8a15-29e8baf46d9a"},dimensions:{},type:"WMS",layers:"makerspaces",imageType:"image/png",style:"default",childLayers:[{name:"makerspaces__POI"}]},{id:1376,name:"parcels_daily",metadata:{is_queryable:!0,metadata_id:"205a55db-473d-4f0e-8fbb-265dcb4dd8e2"},dimensions:{},type:"WMS",layers:"parcels_daily",imageType:"image/png",style:"default",childLayers:[{name:"parcels_daily__PARCELLES"}]},{id:1459,name:"OSM_MQ",metadata:{attribution:'&copy; <a href="https://www.mapzen.com/rights">CARTO</a>  &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors for data outside of Luxembourg',metadata_id:"537f7a04-3d75-4f03-9ac4-7212ad78219c"},dimensions:{},type:"WMS",layers:"OSM_MQ",imageType:"image/png",style:"default",childLayers:[{name:"OSM_MQ__category"}]},{id:1798,name:"sante_infrastructures_covid19",metadata:{is_queryable:!0,legend_name:"sante_infrastructures_covid19",metadata_id:"3f86620b-cb97-49fb-a363-898575f6628c",start_opacity:.9},dimensions:{},type:"WMS",layers:"1798",imageType:"image/png",style:"default",childLayers:[{name:"sante_infrastructures_covid19__POI"}]},{id:1800,name:"sip_theatres",metadata:{is_queryable:!0,metadata_id:"6745d7eb-93e3-4f55-be5f-2286903e46f0",start_opacity:.9},dimensions:{},type:"WMS",layers:"1800",imageType:"image/png",style:"default",childLayers:[{name:"sip_theatres__POI"}]},{id:1960,name:"stations_sps_Lux",metadata:{},dimensions:{},type:"WMS",layers:"1078",imageType:"image/png",style:"default",childLayers:[{name:"stations_sps_Lux__POI"}]},{id:2575,name:"asta_uferrandstreifen",metadata:{is_queryable:!0,metadata_id:"b8f5042b-793f-4d78-a96a-b9a7c8837c7c"},dimensions:{},type:"WMS",layers:"asta_uferrandstreifen",imageType:"image/png",childLayers:[{name:"asta_uferrandstreifen__0"}]},{id:2709,name:"geo_carte_geol_harmonisee_forage_virtuel",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee",return_clicked_point:"true"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee_forage_virtuel",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee_forage_virtuel__6"},{name:"geo_carte_geol_harmonisee_forage_virtuel__1"},{name:"geo_carte_geol_harmonisee_forage_virtuel__2"},{name:"geo_carte_geol_harmonisee_forage_virtuel__3"}]},{id:2710,name:"meteolux_meteo_en_europe",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"meteolux_meteo_en_europe",imageType:"image/png",style:"default",childLayers:[{name:"meteolux_meteo_en_europe__0"}]},{id:2711,name:"meteolux_meteo_gr",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"meteolux_meteo_gr",imageType:"image/png",style:"default",childLayers:[{name:"meteolux_meteo_gr__1"}]},{id:2787,name:"ortho_1967",metadata:{metadata_id:"9be42a5c-7a6f-46b5-8815-8adb17e6aff6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_1967",imageType:"image/jpeg"},{id:2825,name:"geoportail_minecraft_exports",metadata:{is_queryable:!0,metadata_id:"0fedc058-9bcb-4abf-a32b-53af46b7b3fd",start_opacity:.7},dimensions:{},type:"WMS",layers:"geoportail_minecraft_exports",imageType:"image/png",childLayers:[{name:"geoportail_minecraft_exports__0"}]},{id:2836,name:"map_new-geoportail-lu-roadmap",metadata:{},dimensions:{},type:"WMTS",url:"https://maptiler.geoportail.lu/api/maps/new-geoportail-lu-roadmap/WMTSCapabilities.xml",style:"default",matrixSet:"map_new-geoportail-lu-roadmap",layer:"map_new-geoportail-lu-roadmap",imageType:"image/jpeg"},{id:2842,name:"test_sproochatlas_audio",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"test_sproochatlas_audio",imageType:"image/png",style:"default",childLayers:[{name:"test_sproochatlas_audio__1"},{name:"test_sproochatlas_audio__2"},{name:"test_sproochatlas_audio__23"},{name:"test_sproochatlas_audio__24"},{name:"test_sproochatlas_audio__25"}]},{id:2868,name:"aev_enoise_hotspots_2021_major_roads",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_hotspots_2021_major_roads",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_hotspots_2021_major_roads__9"}]},{id:2869,name:"aev_enoise_hotspots_2021_major_railways",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_hotspots_2021_major_railways",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_hotspots_2021_major_railways__8"}]},{id:2870,name:"aev_enoise_hotspots_2021_agglo_lux",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_hotspots_2021_agglo_lux",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_hotspots_2021_agglo_lux__7"}]},{id:2871,name:"aev_enoise_hotspots_2021_agglo_sud",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_hotspots_2021_agglo_sud",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_hotspots_2021_agglo_sud__6"}]},{id:2872,name:"aev_enoise_batiments_sensibles_2021",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_batiments_sensibles_2021",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_batiments_sensibles_2021__12"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{ol3d_options:{cesium3DTileStyle:{show:"${id} !== 'gml1c41b6db-cb10-4593-9eed-62b660c786b9' && ${id} !== 'gml6a0ef1e9-a3f5-4962-84b0-e776b0eb9b21'"}}}},{id:1732,name:"logement",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:1733,name:"log_prix",children:[{id:1734,name:"log_prix_app",children:[{id:1739,name:"log_prix_app_existants",metadata:{is_queryable:!0,legend_name:"logt_prix_app_exist",metadata_id:"9679921a-f90e-4d26-9918-96e66225a171"},dimensions:{},type:"WMS",layers:"log_prix_app_existants",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_existants__21"}]},{id:1740,name:"log_prix_app_en_construction",metadata:{is_queryable:!0,legend_name:"logt_prix_app_enconstruction",metadata_id:"bbb36662-64ba-4d2e-a9a4-7ab00d0bb264"},dimensions:{},type:"WMS",layers:"log_prix_app_en_construction",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_en_construction__20"}]}],metadata:{},mixed:!0},{id:1735,name:"log_loyers",children:[{id:1741,name:"log_loyers_app",metadata:{is_queryable:!0,legend_name:"logt_loyers_app",metadata_id:"2c3dc437-77ac-4030-a8d0-f61fd12e8f5e"},dimensions:{},type:"WMS",layers:"log_loyers_app",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_app__18"}]},{id:1742,name:"log_loyers_maisons",metadata:{is_queryable:!0,legend_name:"logt_loyers_maisons",metadata_id:"f914e59b-6684-4a94-b5ec-b5a782708371"},dimensions:{},type:"WMS",layers:"log_loyers_maisons",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_maisons__17"}]}],metadata:{},mixed:!0},{id:1736,name:"log_prix_terrains",children:[{id:1743,name:"log_prix_median_terrain_15_17",metadata:{is_queryable:!0,legend_name:"logt_prix_median_terrain",metadata_id:"3d5b4a58-3817-41fe-b2db-9310fa605635"},dimensions:{},type:"WMS",layers:"log_prix_median_terrain_15_17",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_median_terrain_15_17__14"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1737,name:"log_potentiel_foncier",children:[{id:1744,name:"log_superficie_2016",metadata:{is_queryable:!0,legend_name:"logt_superficie_dispo",metadata_id:"c3fb1ec8-10d3-4e2b-9272-bb0a7396cdb5"},dimensions:{},type:"WMS",layers:"log_superficie_2016",imageType:"image/png",style:"default",childLayers:[{name:"log_superficie_2016__12"}]},{id:1745,name:"log_superficie_selon_type_2016",metadata:{is_queryable:!0,legend_name:"logt_superficie_selon_type",metadata_id:"8c6408ca-4195-4cf0-b4bc-8c095f372c42"},dimensions:{},type:"WMS",layers:"log_superficie_selon_type_2016",imageType:"image/png",style:"default",childLayers:[{name:"log_superficie_selon_type_2016__11"}]}],metadata:{},mixed:!0},{id:1738,name:"log_consommation_fonciere",children:[{id:1746,name:"log_superficie_consommee",metadata:{is_queryable:!0,legend_name:"logt_superficie_consommee",metadata_id:"6766fa1f-26fe-402b-9f21-e3d6e903f13b"},dimensions:{},type:"WMS",layers:"log_superficie_consommee",imageType:"image/png",style:"default",childLayers:[{name:"log_superficie_consommee__9"}]},{id:1747,name:"log_superficie_reconstruite",metadata:{is_queryable:!0,legend_name:"logt_superficie_reconstruite",metadata_id:"ea8570b2-f85b-4445-a5d1-a63ac01fa2c1"},dimensions:{},type:"WMS",layers:"log_superficie_reconstruite",imageType:"image/png",style:"default",childLayers:[{name:"log_superficie_reconstruite__8"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:1833,name:"energie",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:1842,name:"energie_solaire_group",children:[{id:1821,name:"myenergy_solarkataster",children:[{id:1813,name:"myenergy_solarkataster_luxemburg_solar_potentials",metadata:{is_queryable:!0,legend_name:"energie:potentiel_solaire",metadata_id:"97628fac-c53b-4426-a829-b188105b9ead",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857",ogc_query_layers:["st_luxemburg_22_feature_info"]},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_solar_potentials",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_solar_potentials__st_luxemburg_22_solar_potentials"}]},{id:1819,name:"myenergy_solarkataster_luxemburg_feed_in_potential",metadata:{is_queryable:!0,legend_name:"energie:tarifs_injection",metadata_id:"23e8adfb-b628-4a4f-89ea-0f057baf6ec8",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857"},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_feed_in_potential",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_feed_in_potential__st_luxemburg_22_feed_in_potential"}]},{id:1818,name:"myenergy_solarkataster_luxemburg_roofs_above_30_kWp",metadata:{is_queryable:!0,legend_name:"energie:toitures",metadata_id:"a16c315e-abae-4904-95bc-90199393e8ae",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857"},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_roofs_above_30_kWp",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_roofs_above_30_kWp__st_luxemburg_22_roofs_above_30_kWp"}]},{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0},{id:1690,name:"Analyse Ensoleillement",children:[{id:1806,name:"Ensoleillement au 15.02",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"ece9ef19-b1ff-4acc-9d19-c00f7233d648"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.02__15"}]},{id:1683,name:"Ensoleillement au 15.05",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"ece9ef19-b1ff-4acc-9d19-c00f7233d648"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.05",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.05__16"}]},{id:1682,name:"Ensoleillement au 15.08",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"89b63cab-2220-4b00-abd5-2bfbe35352cd"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.08",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.08__17"}]}],metadata:{legend_name:"uf:solar_hiver",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},mixed:!0}],metadata:{},mixed:!0},{id:1843,name:"energie_eolienne_group",children:[{id:1360,name:"aev_emplacements_eoliennes",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:02:39.4998465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"5e739028d2bfb222b781c722",is_queryable:!0,legend_name:"aev:eoliennes",metadata_id:"354c5313-a733-4121-8f0d-5e0932d563b7"},dimensions:{},type:"WMS",layers:"aev_emplacements_eoliennes",imageType:"image/png",style:"default",childLayers:[{name:"aev_emplacements_eoliennes__2"}]}],metadata:{},mixed:!0},{id:1835,name:"ilr_energie_group",children:[{id:2473,name:"ilr_energie_canton_commune",children:[{id:1836,name:"ilr_energie_biogas",metadata:{is_queryable:!0,legend_name:"energie:ilr:biogaz",metadata_id:"3caf3f4a-f492-4635-8c8e-b1b7ad37ae24-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_biogas",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_biogas__1"},{name:"ilr_energie_biogas__2"},{name:"ilr_energie_biogas__0"}]},{id:1837,name:"ilr_energie_biomasse",metadata:{is_queryable:!0,legend_name:"energie:ilr:biomasse",metadata_id:"021ba8d1-2af9-45b7-8e30-c461ae56416a",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_biomasse",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_biomasse__3"},{name:"ilr_energie_biomasse__4"},{name:"ilr_energie_biomasse__0"}]},{id:1838,name:"ilr_energie_cogeneration",metadata:{is_queryable:!0,legend_name:"energie:ilr:cogeneration",metadata_id:"71a854b4-010d-48a4-acc1-8eddc2bb87c1-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_cogeneration",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_cogeneration__5"},{name:"ilr_energie_cogeneration__6"},{name:"ilr_energie_cogeneration__0"}]},{id:1839,name:"ilr_energie_eolienne",metadata:{is_queryable:!0,legend_name:"energie:ilr:eolienne",metadata_id:"97ce42fc-848c-4c1c-a361-61a9736ae97f-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_eolienne",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_eolienne__7"},{name:"ilr_energie_eolienne__8"},{name:"ilr_energie_eolienne__0"}]},{id:1840,name:"ilr_energie_hydroelectrique",metadata:{is_queryable:!0,legend_name:"energie:ilr:hydroelectrique",metadata_id:"a96e0c84-8dcc-49af-a753-7321072aa198-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_hydroelectrique",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_hydroelectrique__9"},{name:"ilr_energie_hydroelectrique__10"},{name:"ilr_energie_hydroelectrique__0"}]},{id:1841,name:"ilr_energie_photovoltaique",metadata:{is_queryable:!0,legend_name:"energie:ilr:solaire",metadata_id:"1bd8193e-5728-4020-be60-9677f3a2c2d6-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_photovoltaique",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_photovoltaique__11"},{name:"ilr_energie_photovoltaique__12"},{name:"ilr_energie_photovoltaique__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1847,name:"energie_disponibilite",children:[{id:1494,name:"gaz_naturel",metadata:{is_queryable:!0,legend_name:"gaz",metadata_id:"9e04e366-fcb7-4836-8d09-41b20f280cb0",start_opacity:.75},dimensions:{},type:"WMS",layers:"gaz_naturel",imageType:"image/png",style:"default",childLayers:[{name:"gaz_naturel__1"},{name:"gaz_naturel__3"}]}],metadata:{},mixed:!0},{id:1845,name:"electromobilite_group",children:[{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:2707,name:"mmtp_electromobilite_AC",metadata:{is_queryable:!0,metadata_id:"08885ef4-d534-47d4-8b93-2883c71a8452"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_AC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_AC__0"}]},{id:2708,name:"mmtp_electromobilite_DC",metadata:{is_queryable:!0,metadata_id:"624d34e4-1192-40bb-871a-e6c8720d766b"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_DC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_DC__2"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:1834,name:"np_our",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:1860,name:"npour_basisdaten",children:[{id:1861,name:"npour_basisdaten_verwaltungseinheiten",children:[{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]}],metadata:{},mixed:!0},{id:1862,name:"npour_basisdaten_adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0},{id:1863,name:"npour_basisdaten_topo",children:[{id:223,name:"topo_250k",metadata:{metadata_id:"e1f601a5-ed8f-4043-8719-0cad50cbb483"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_250k",imageType:"image/png"},{id:1730,name:"topo_100k_2019",metadata:{legend_name:"topo_100k_sans_tour",metadata_id:"ce051f08-bca6-43c0-af7b-5fcf3e02376e"},dimensions:{},type:"WMS",layers:"topo_100k_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_100k_2019__topo_100k"}]},{id:1727,name:"topo_50k_2019",metadata:{legend_name:"topo_50k_sans_tour",metadata_id:"abc505e1-224c-455e-9e7f-4f094eb4e7b0"},dimensions:{},type:"WMS",layers:"topo_50k_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_50k_2019__50K-2019-LUX_avec_ETRANGER"}]},{id:206,name:"topo_20k",metadata:{legend_name:"topo_20k",metadata_id:"ea998ae8-731a-43bc-aa9f-171684f97602"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_20k",imageType:"image/png"},{id:149,name:"topo_tour_20k",metadata:{legend_name:"topo_tour_20k",metadata_id:"1173_"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_tour_20k",imageType:"image/png"},{id:195,name:"topo_5k",metadata:{exclusion:"[32,42]",legend_name:"topo_5k",metadata_id:"270_2012"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_5k",imageType:"image/png"}],metadata:{},mixed:!0},{id:178,name:"luft_und_satellitenbilder",children:[{id:2592,name:"act_ortho_time",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"1adb95b0-d0a5-4afa-936a-c9faa9edba2c",time_config:'{"default_time":"2023-08","time_links":{"2001-08":"ortho_2001","2004-08":"ortho_2004","2007-08":"ortho_2007","2010-08":"ortho_2010","2013-08":"ortho_2013","2016-08":"ortho_2016","2017-08":"ortho_2017","2018-08":"ortho_2018","2019-01":"ortho_2019_winter","2019-08":"ortho_2019","2020-08":"ortho_2020","2021-08":"ortho_2021","2022-08":"ortho_2022","2023-08":"ortho_2023"}}',time_layers:{"2001-08-01T00:00:00Z":"ortho_2001","2004-08-01T00:00:00Z":"ortho_2004","2007-08-01T00:00:00Z":"ortho_2007","2010-08-01T00:00:00Z":"ortho_2010","2013-08-01T00:00:00Z":"ortho_2013","2016-08-01T00:00:00Z":"ortho_2016","2017-08-01T00:00:00Z":"ortho_2017","2018-08-01T00:00:00Z":"ortho_2018","2019-01-01T00:00:00Z":"ortho_2019_winter","2019-08-01T00:00:00Z":"ortho_2019","2020-08-01T00:00:00Z":"ortho_2020","2021-08-01T00:00:00Z":"ortho_2021","2022-08-01T00:00:00Z":"ortho_2022","2023-08-01T00:00:00Z":"ortho_2023"}},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"act_ortho_time",imageType:"image/jpeg",time:{minValue:"2001-08-01T00:00:00Z",maxValue:"2023-08-01T00:00:00Z",values:["2001-08-01T00:00:00Z","2004-08-01T00:00:00Z","2007-08-01T00:00:00Z","2010-08-01T00:00:00Z","2013-08-01T00:00:00Z","2016-08-01T00:00:00Z","2017-08-01T00:00:00Z","2018-08-01T00:00:00Z","2019-01-01T00:00:00Z","2019-08-01T00:00:00Z","2020-08-01T00:00:00Z","2021-08-01T00:00:00Z","2022-08-01T00:00:00Z","2023-08-01T00:00:00Z"],resolution:"month",minDefValue:"2023-08-01T00:00:00Z",maxDefValue:null,mode:"value",widget:"slider"}},{id:2792,name:"ortho_2023",metadata:{exclusion:'["exclusion_ortho2023","exclusion_ortho2023_bati"]',metadata_id:"742d2a2e-eb7a-4a0b-a6d8-00d70831ef04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2023",imageType:"image/jpeg"},{id:2537,name:"ortho_2022",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"63f18835-55ac-448c-a0ea-dc998933077b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2022",imageType:"image/jpeg"},{id:2272,name:"ortho_2021",metadata:{exclusion:"[121,221]",metadata_id:"ea0bd2ff-b743-4f3a-bd9b-450976563de9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2021",imageType:"image/jpeg"},{id:2056,name:"ortho_2020",metadata:{exclusion:"[119,219]",metadata_id:"87870b8a-10a1-4c33-bf50-7efe851fd450"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2020",imageType:"image/jpeg"},{id:1784,name:"ortho_2019",metadata:{exclusion:"[116,216]",metadata_id:"97c88ef6-6c64-4cb0-a134-06bb42b2b448"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019",imageType:"image/jpeg"},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1527,name:"ortho_2018",metadata:{exclusion:"[113,213]",metadata_id:"6fde72c4-802f-4663-be74-5fa5901cb4f0"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2018",imageType:"image/jpeg"},{id:1371,name:"ortho_2017",metadata:{exclusion:"[111,211]",metadata_id:"1cdae616-1a7a-49d5-b35d-05864891641f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017",imageType:"image/jpeg"},{id:745,name:"ortho_2016",metadata:{exclusion:"[107,207]",metadata_id:"bba79b6d-4205-4ce4-98e4-7b7922afcd55"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016",imageType:"image/jpeg"},{id:360,name:"ortho_2013",metadata:{exclusion:"[106,206]",metadata_id:"ced4a3dd-135e-43d0-86b9-2318982581f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013",imageType:"image/jpeg"},{id:342,name:"ortho_2010",metadata:{exclusion:"[105,205]",metadata_id:"0faf4bdb-a54b-42d7-942c-4e52fa66e963"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010",imageType:"image/jpeg"},{id:231,name:"ortho_2007",metadata:{exclusion:"[101,201]",metadata_id:"3be3d98e-7997-4ff6-8d77-e393a5fc4fdd"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2007",imageType:"image/jpeg"},{id:224,name:"ortho_2004",metadata:{exclusion:"[103,203]",metadata_id:"a185f78a-ca9c-43f8-8d06-b1abba8ff056"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2004",imageType:"image/jpeg"},{id:225,name:"ortho_2001",metadata:{exclusion:"[104,204]",metadata_id:"e6ff269c-1c7c-401f-a90b-b805e80a046e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2001",imageType:"image/jpeg"},{id:2787,name:"ortho_1967",metadata:{metadata_id:"9be42a5c-7a6f-46b5-8815-8adb17e6aff6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_1967",imageType:"image/jpeg"},{id:345,name:"topo_decoupage_ortho",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_ortho",imageType:"image/png"},{id:292,name:"wg_ikonos_satellitendaten",metadata:{legend_name:"wg:ikonos_satellitendaten",metadata_id:"db0eea79-114a-4e61-a1f2-7e064f92cdd3"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_ikonos_satellitendaten",imageType:"image/png"},{id:341,name:"aero_1951_10k",metadata:{is_queryable:!0,metadata_id:"16586649-8e46-4b04-b75c-5537a4bf214e"},dimensions:{},type:"WMS",layers:"aero_1951_10k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1951_10k__1951_10k"}]},{id:229,name:"aero_1951_25k",metadata:{is_queryable:!0,metadata_id:"b3b5fc05-323c-4f0b-804c-a4c186d62a96"},dimensions:{},type:"WMS",layers:"aero_1951_25k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1951_25k__1951_25k"}]},{id:140,name:"aero_1963_20k",metadata:{is_queryable:!0,metadata_id:"56b65f04-d3ab-45b6-9e93-95c8c9524c3e"},dimensions:{},type:"WMS",layers:"aero_1963_20k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1963_20k__1963_20k"}]},{id:665,name:"aero_1977_30k",metadata:{is_queryable:!0,metadata_id:"d9dd951e-7345-4ba2-9a76-ce54305edf2f"},dimensions:{},type:"WMS",layers:"aero_1977_30k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1977_30k__1977_30k"}]},{id:743,name:"aero_1987_30k",metadata:{is_queryable:!0,metadata_id:"98b63794-8cb1-42ff-9872-214f990ec8cd"},dimensions:{},type:"WMS",layers:"aero_1987_30k",imageType:"image/png",style:"defaults",childLayers:[{name:"aero_1987_30k__1987_30k"}]},{id:748,name:"aero_1994_30k",metadata:{is_queryable:!0,metadata_id:"abf7f6f5-8647-4317-98f6-8d4f5cd38585"},dimensions:{},type:"WMS",layers:"aero_1994_30k",imageType:"image/png",style:"defaults",childLayers:[{name:"aero_1994_30k__1994_30k"}]},{id:790,name:"Orthophotos Infrarouge",children:[{id:2835,name:"ortho2023_IR",metadata:{exclusion:'["exclusion_ortho2023IR","exclusion_ortho2023IR_bati"]',metadata_id:"3bb6099a-67f2-4243-b820-ffaeb03e439b"},dimensions:{},type:"WMS",layers:"ortho2023_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2023_IR__0"}]},{id:2595,name:"ortho2022_IR",metadata:{exclusion:'["exclusion_ortho2022IR","exclusion_ortho2022IR_bati"]',metadata_id:"c58ceaa0-d36d-4edf-ab68-ed1040bea10c"},dimensions:{},type:"WMS",layers:"ortho2022_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2022_IR__0"}]},{id:2283,name:"ortho2021_IR",metadata:{exclusion:"[122,222]",metadata_id:"067dc519-f507-45db-8e7a-f3ccc9125bc5"},dimensions:{},type:"WMS",layers:"ortho2021_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2021_IR__3"},{name:"ortho2021_IR__2"},{name:"ortho2021_IR__1"},{name:"ortho2021_IR__0"}]},{id:2089,name:"ortho2020_IR",metadata:{exclusion:"[120,220]",metadata_id:"134fb490-c022-476d-b484-dc652ae8c626"},dimensions:{},type:"WMS",layers:"ortho2020_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2020_IR__4"},{name:"ortho2020_IR__3"},{name:"ortho2020_IR__2"},{name:"ortho2020_IR__1"}]},{id:1785,name:"ortho2019_IR",metadata:{exclusion:"[117,217]",metadata_id:"3dfd031a-1721-4f35-b358-25062d5d4c26"},dimensions:{},type:"WMS",layers:"ortho2019_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2019_IR__9"},{name:"ortho2019_IR__8"},{name:"ortho2019_IR__7"},{name:"ortho2019_IR__6"}]},{id:1529,name:"ortho2018_IR",metadata:{exclusion:"[114,214]",metadata_id:"2edf6bcb-2a1c-4b8c-8488-56000133abb4"},dimensions:{},type:"WMS",layers:"ortho2018_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2018_IR__14"},{name:"ortho2018_IR__13"},{name:"ortho2018_IR__12"},{name:"ortho2018_IR__11"}]},{id:1372,name:"ortho_2017_irc",metadata:{exclusion:"[112,212]",metadata_id:"659a3236-a22e-44ae-9fa3-025cdf5d0043"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017_irc",imageType:"image/jpeg"},{id:793,name:"ortho_2016_irc",metadata:{exclusion:"[110,210]",is_queryable:!0,metadata_id:"c313da75-7d8b-4570-9db5-bb6add56309e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016_irc",imageType:"image/jpeg"},{id:792,name:"ortho_2013_irc",metadata:{exclusion:"[109,209]",is_queryable:!0,metadata_id:"649b34a1-a195-40b4-81c9-0100343b9661"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013_irc",imageType:"image/jpeg"},{id:791,name:"ortho_2010_irc",metadata:{exclusion:"[108,208]",is_queryable:!0,metadata_id:"728ffc2a-9062-4822-8596-01f0e93f6b40"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010_irc",imageType:"image/jpeg"}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1865,name:"npour_poi_group",children:[{id:1879,name:"npour_poi_propres",children:[{id:1880,name:"npour_poi_admin",metadata:{is_queryable:!0,metadata_id:"d5e79fbd-4a11-428f-a7be-4a765508e791"},dimensions:{},type:"WMS",layers:"npour_poi_admin",imageType:"image/png",childLayers:[{name:"npour_poi_admin__14"}]},{id:1881,name:"npour_poi_batiments_reli",metadata:{is_queryable:!0,metadata_id:"a3384282-5913-4610-b28e-72fa46ea18ea"},dimensions:{},type:"WMS",layers:"npour_poi_batiments_reli",imageType:"image/png",childLayers:[{name:"npour_poi_batiments_reli__12"}]},{id:1894,name:"npour_poi_culture",metadata:{is_queryable:!0,metadata_id:"d4b40114-f351-484d-9b09-bbfc0fd20abd"},dimensions:{},type:"WMS",layers:"npour_poi_culture",imageType:"image/png",childLayers:[{name:"npour_poi_culture__2"}]},{id:1883,name:"npour_poi_secours",metadata:{is_queryable:!0,metadata_id:"988f5449-959b-488b-acfe-bfb2eee23247"},dimensions:{},type:"WMS",layers:"npour_poi_secours",imageType:"image/png",childLayers:[{name:"npour_poi_secours__0"}]},{id:1884,name:"npour_poi_autres",metadata:{is_queryable:!0,metadata_id:"ed8ad1e0-d4ff-46ee-8c2b-91323f45786b"},dimensions:{},type:"WMS",layers:"npour_poi_autres",imageType:"image/png",childLayers:[{name:"npour_poi_autres__3"}]},{id:1878,name:"npour_poi_transport",metadata:{is_queryable:!0,metadata_id:"3821f8ee-0d90-47a0-b54f-02235af78fc2"},dimensions:{},type:"WMS",layers:"npour_poi_transport",imageType:"image/png",childLayers:[{name:"npour_poi_transport__4"}]},{id:1885,name:"npour_poi_sociale",metadata:{is_queryable:!0,metadata_id:"fa6c56a3-1bb6-4147-916b-956d0ce795e8"},dimensions:{},type:"WMS",layers:"npour_poi_sociale",imageType:"image/png",childLayers:[{name:"npour_poi_sociale__7"}]},{id:1886,name:"npour_poi_enseignement",metadata:{is_queryable:!0,metadata_id:"6b31dedb-5bd7-44f3-a34e-48871adae269"},dimensions:{},type:"WMS",layers:"npour_poi_enseignement",imageType:"image/png",childLayers:[{name:"npour_poi_enseignement__10"}]},{id:1887,name:"npour_poi_sante",metadata:{is_queryable:!0,metadata_id:"f6480b65-fd0e-441d-a5fe-fd240540b57b"},dimensions:{},type:"WMS",layers:"npour_poi_sante",imageType:"image/png",childLayers:[{name:"npour_poi_sante__8"}]},{id:1888,name:"npour_poi_attraction",metadata:{is_queryable:!0,metadata_id:"7e66c353-2a0d-4d58-a782-f2ec67371166"},dimensions:{},type:"WMS",layers:"npour_poi_attraction",imageType:"image/png",childLayers:[{name:"npour_poi_attraction__13"}]},{id:1889,name:"npour_poi_logement",metadata:{is_queryable:!0,metadata_id:"d9f9d25d-2c2e-41a8-84fb-ba6d941ddb05"},dimensions:{},type:"WMS",layers:"npour_poi_logement",imageType:"image/png",childLayers:[{name:"npour_poi_logement__9"}]},{id:1890,name:"npour_poi_gastronomie",metadata:{is_queryable:!0,metadata_id:"54de547d-f500-4985-9893-96f58f9b8bc1"},dimensions:{},type:"WMS",layers:"npour_poi_gastronomie",imageType:"image/png",childLayers:[{name:"npour_poi_gastronomie__1"}]},{id:1891,name:"npour_poi_sport",metadata:{is_queryable:!0,metadata_id:"43b24d55-7198-41f2-86d4-e6203d71ec09"},dimensions:{},type:"WMS",layers:"npour_poi_sport",imageType:"image/png",childLayers:[{name:"npour_poi_sport__6"}]},{id:1892,name:"npour_poi_tourisme",metadata:{is_queryable:!0,metadata_id:"c36ba1cd-0d28-491f-8d51-e268e420a8f9"},dimensions:{},type:"WMS",layers:"npour_poi_tourisme",imageType:"image/png",childLayers:[{name:"npour_poi_tourisme__5"}]},{id:1893,name:"npour_poi_commerce",metadata:{is_queryable:!0,metadata_id:"87c0fcc6-3452-47f7-9b23-0fd9c9f38189"},dimensions:{},type:"WMS",layers:"npour_poi_commerce",imageType:"image/png",childLayers:[{name:"npour_poi_commerce__11"}]}],metadata:{},mixed:!0},{id:684,name:"editus_pois_tourisme",children:[{id:542,name:"editus_poi_299",metadata:{is_queryable:!0,legend_name:"editus_1",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"542",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_299__POI"}]},{id:543,name:"editus_poi_286",metadata:{is_queryable:!0,legend_name:"editus_2",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"543",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_286__POI"}]},{id:544,name:"editus_poi_285",metadata:{is_queryable:!0,legend_name:"editus_3",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"544",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_285__POI"}]},{id:545,name:"editus_poi_287",metadata:{is_queryable:!0,legend_name:"editus_4",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"545",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_287__POI"}]},{id:546,name:"editus_poi_289",metadata:{is_queryable:!0,legend_name:"editus_5",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"546",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_289__POI"}]},{id:547,name:"editus_poi_290",metadata:{is_queryable:!0,legend_name:"editus_6",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"547",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_290__POI"}]},{id:549,name:"editus_poi_291",metadata:{is_queryable:!0,legend_name:"editus_7",metadata_id:"4a04ebff-4954-4c4d-9387-46d3587eccef",start_opacity:.9},dimensions:{},type:"WMS",layers:"549",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_291__POI"}]},{id:550,name:"editus_poi_292",metadata:{is_queryable:!0,legend_name:"editus_8",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"550",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_292__POI"}]},{id:551,name:"editus_poi_293",metadata:{is_queryable:!0,legend_name:"editus_9",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"551",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_293__POI"}]},{id:548,name:"editus_poi_294",metadata:{is_queryable:!0,legend_name:"editus_10",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"548",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_294__POI"}]},{id:552,name:"editus_poi_295",metadata:{is_queryable:!0,legend_name:"editus_11",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"552",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_295__POI"}]},{id:553,name:"editus_poi_296",metadata:{is_queryable:!0,legend_name:"editus_12",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"553",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_296__POI"}]},{id:554,name:"editus_poi_298",metadata:{is_queryable:!0,legend_name:"editus_13",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"554",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_298__POI"}]}],metadata:{},mixed:!0},{id:2018,name:"tour_erleben_new",children:[{id:2042,name:"tour_tourist_info_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_tourist_info_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_tourist_info_new__7"}]},{id:2030,name:"tour_essen_uebernachten_new",children:[{id:2038,name:"tour_hotels_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_hotels_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_hotels_new__2"}]},{id:2037,name:"tour_camping_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_camping_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_camping_new__11"}]},{id:2036,name:"tour_jugendherberge_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_jugendherberge_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_jugendherberge_new__12"}]},{id:2035,name:"tour_fewo_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_fewo_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_fewo_new__13"}]},{id:2034,name:"tour_bb_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_bb_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_bb_new__14"}]},{id:2033,name:"tour_restaurants_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_restaurants_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_restaurants_new__15"}]}],metadata:{},mixed:!0},{id:2031,name:"tour_kultur_new",children:[{id:2044,name:"tour_burgen_schloesser_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_burgen_schloesser_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_burgen_schloesser_new__16"}]},{id:2043,name:"tour_museen_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_museen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_museen_new__17"}]},{id:2027,name:"tour_unesco_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_unesco_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_unesco_new__category"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1866,name:"npour_wanderwege_group",children:[{id:1867,name:"npour_wanderwege_eigene_group",children:[{id:1895,name:"npour_wanderwege_eigene",metadata:{is_queryable:!0,metadata_id:"ef5983e1-a28f-4770-845a-8fcbd6f22fc0"},dimensions:{},type:"WMS",layers:"npour_wanderwege_eigene",imageType:"image/png",childLayers:[{name:"npour_wanderwege_eigene__15"}]}],metadata:{},mixed:!0},{id:304,name:"tour_quality",children:[{id:189,name:"tour_mullerthal_trail",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"be71ab82-8930-4da7-840d-a99374312093"},dimensions:{},type:"WMS",layers:"tour_mullerthal_trail",imageType:"image/png",style:"default",childLayers:[{name:"tour_mullerthal_trail__category"}]},{id:205,name:"tour_escape_ardenne",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"f01f9d77-cb2e-4189-89a9-df7eed16525b"},dimensions:{},type:"WMS",layers:"tour_escape_ardenne",imageType:"image/png",style:"default",childLayers:[{name:"tour_escape_ardenne__category"}]},{id:250,name:"tour_DeLux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"df101633-54fb-46bb-9d33-91d241c69ae2"},dimensions:{},type:"WMS",layers:"tour_DeLux",imageType:"image/png",style:"default",childLayers:[{name:"tour_DeLux__category"}]},{id:168,name:"tour_rando_traumschleifen_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"109f2940-b476-4bdd-96a8-7301fa3c7e39"},dimensions:{},type:"WMS",layers:"tour_rando_traumschleifen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_traumschleifen_new__category"}]}],metadata:{is_expanded:!0},mixed:!0},{id:1868,name:"npour_wanderwege_andere",children:[{id:176,name:"tour_autopedestre",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"1514749f-19e9-4873-9c70-68b34ebc2e30"},dimensions:{},type:"WMS",layers:"tour_autopedestre",imageType:"image/png",style:"default",childLayers:[{name:"tour_autopedestre__category"}]},{id:227,name:"tour_sentiers_nationaux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"05311fc8-28fa-470c-984e-879a410ce753"},dimensions:{},type:"WMS",layers:"tour_sentiers_nationaux",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_nationaux__category"}]},{id:158,name:"tour_cfl",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfa696a6-1c25-4ba5-bde1-beb140776881"},dimensions:{},type:"WMS",layers:"tour_cfl",imageType:"image/png",style:"default",childLayers:[{name:"tour_cfl__category"}]},{id:197,name:"tour_sentiers_ajl",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"c2587c18-ed11-44da-99dd-760a3fd73126"},dimensions:{},type:"WMS",layers:"tour_sentiers_ajl",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_ajl__category"}]},{id:235,name:"tour_sentiers_gr",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"004e728b-6e63-4ab7-9b65-f327eb2f7618"},dimensions:{},type:"WMS",layers:"tour_sentiers_gr",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_gr__category"}]},{id:218,name:"tour_saint_jacques",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"431c5622-7941-482b-a629-42bd1db17dfe"},dimensions:{},type:"WMS",layers:"tour_saint_jacques",imageType:"image/png",style:"default",childLayers:[{name:"tour_saint_jacques__category"}]},{id:316,name:"env_sentiersnature",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfc8de82-e187-4547-a1da-83385f86c786"},dimensions:{},type:"WMS",layers:"env_sentiersnature",imageType:"image/png",style:"default",childLayers:[{name:"env_sentiersnature__sentiers_nature"}]},{id:179,name:"tour_sentiers_locaux",children:[{id:177,name:"tour_sentiers_communaux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"4d39824a-6a5d-4020-bc88-a0bb3d3e28e6"},dimensions:{},type:"WMS",layers:"tour_sentiers_communaux",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_communaux__category"}]},{id:246,name:"tour_sentiers_syndicats",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"3e98c2a3-b991-4b11-b3cc-d18aaf6eac80"},dimensions:{},type:"WMS",layers:"tour_sentiers_syndicats",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_syndicats__category"}]}],metadata:{is_expanded:!0},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1869,name:"npour_radwege_group",children:[{id:281,name:"tour_velo_v2",children:[{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]},{id:512,name:"tour_pistes_velo_mymaps2",metadata:{is_queryable:!0,legend_name:"tour_velo_national",metadata_id:"e9fea021-2aab-4f58-a777-8c7536898d9b"},dimensions:{},type:"WMS",layers:"tour_pistes_velo_mymaps2",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_velo_mymaps2__category"}]},{id:809,name:"lvi_circuits_cyclables",metadata:{is_queryable:!0,metadata_id:"e5e9ddf6-dfdb-4d3b-a0e2-d1be2272bf38"},dimensions:{},type:"WMS",layers:"lvi_circuits_cyclables",imageType:"image/png",style:"default",childLayers:[{name:"lvi_circuits_cyclables__category"}]},{id:293,name:"tour_pistes_vtt",metadata:{is_queryable:!0,linked_layers:["2026"],metadata_id:"2ea699a2-dc3c-4bd6-92fc-f7325b0c7fee"},dimensions:{},type:"WMS",layers:"tour_pistes_vtt",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_vtt__category"}]},{id:676,name:"tour_velo_route",metadata:{is_queryable:!0,linked_layers:["1713","1714"],metadata_id:"2a07d7fb-ae3e-4385-bf61-b071a7f6ffbd"},dimensions:{},type:"WMS",layers:"tour_velo_route",imageType:"image/png",style:"default",childLayers:[{name:"tour_velo_route__category"}]},{id:1650,name:"unseco_biketour",metadata:{is_queryable:!0,metadata_id:"eda8222e-b76f-4016-8fea-87b27d0f622f"},dimensions:{},type:"WMS",layers:"unseco_biketour",imageType:"image/png",style:"default",childLayers:[{name:"unseco_biketour__category"}]},{id:725,name:"tour_tdl",metadata:{is_queryable:!0,metadata_id:"35226642-3f09-4f98-86b6-6e55316bce53"},dimensions:{},type:"WMS",layers:"tour_tdl",imageType:"image/png",style:"default",childLayers:[{name:"tour_tdl__category"}]},{id:1913,name:"tour_restrictions_velo",children:[{id:1713,name:"chantiers_actuels_pc",metadata:{is_queryable:!0,metadata_id:"7d59f3a6-e8d8-464b-bbf9-73c6ca358a51",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_actuels_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_actuels_pc__CHANTIERS_ACTUEL_PC"}]},{id:1714,name:"chantiers_futurs_pc",metadata:{is_queryable:!0,metadata_id:"f6b9df36-5e62-46d1-ae91-c7c58c7e2e45",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_futurs_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_futurs_pc__CHANTIERS_FUTUR_PC"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1870,name:"npour_infrastruktur",children:[{id:1871,name:"npour_verkehrsnetze",children:[{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:351,name:"roads_labels",metadata:{metadata_id:"5d606cae-cbc6-44c3-a465-edb981e44a39"},dimensions:{},type:"WMS",layers:"roads_labels",imageType:"image/png",style:"default",childLayers:[{name:"roads_labels__ROADS_LABELS"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:813,name:"cdt_lignes_all",metadata:{is_queryable:!0,metadata_id:"bbe0523f-374d-4c94-a27d-7ce81d8bae3b"},dimensions:{},type:"WMS",layers:"cdt_lignes_all",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_all__lignes_de_bus_detaillees"},{name:"cdt_lignes_all__lignes_de_bus_detaillees_mymaps"}]},{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:377,name:"mobiliteit_pr",metadata:{is_queryable:!0,legend_name:"mobiliteit:pr",max_dpi:128,metadata_id:"9e0c97ae-aff9-41fc-9489-bbf97999163d"},dimensions:{},type:"WMS",layers:"mobiliteit_pr",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_pr__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1924,name:"npour_umwelt",children:[{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:334,name:"env_zones_protegees_communautaires",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:180,name:"anf_secteurs_ecologiques_group",children:[{id:690,name:"anf_secteurs_ecologiques",metadata:{is_queryable:!0,metadata_id:"8afa4162-c23b-4001-b737-4074d4f5360f"},dimensions:{},type:"WMS",layers:"anf_secteurs_ecologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_secteurs_ecologiques__SECTEURS_ECOLOGIQUES"}]}],metadata:{},mixed:!0},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1872,name:"npour_agri",children:[{id:307,name:"asta",children:[{id:1637,name:"asta_flik_parcels",metadata:{is_queryable:!0,metadata_id:"f511a4ee-928a-4900-ac05-52aa0ce03bba"},dimensions:{},type:"WMS",layers:"asta_flik_parcels",imageType:"image/png",style:"default",childLayers:[{name:"asta_flik_parcels__3"}]},{id:1511,name:"asta_prairies_permanentes",metadata:{is_queryable:!0,metadata_id:"f6f493c2-f57b-419d-8953-ab8018576ac7"},dimensions:{},type:"WMS",layers:"asta_prairies_permanentes",imageType:"image/png",style:"default",childLayers:[{name:"asta_prairies_permanentes__0"}]},{id:740,name:"asta_herbages_sensibles",metadata:{metadata_id:"e5d2717e-4541-43f1-b586-1b18cdf11827"},dimensions:{},type:"WMS",layers:"asta_herbages_sensibles",imageType:"image/png",style:"default",childLayers:[{name:"asta_herbages_sensibles__gruenland"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1873,name:"npour_eau",children:[{id:1874,name:"npour_eau_surface",children:[{id:749,name:"eau_new_Gewsser",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewsser__23"},{name:"eau_new_Gewsser__24"},{name:"eau_new_Gewsser__25"}]},{id:651,name:"eau_new_Kanal_-__Muehlgraben",metadata:{is_queryable:!0,legend_name:"eau:kanal_-__muehlgraben",max_dpi:128,metadata_id:"909501fc-a0a9-4af8-8e82-f2a8d7f2fe2f"},dimensions:{},type:"WMS",layers:"eau_new_Kanal_-__Muehlgraben",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kanal_-__Muehlgraben__26"}]},{id:750,name:"eau_new_Kilometrierung der Gewsser",metadata:{legend_name:"eau:kilometrierung_primaere_gewaesser_kilometrierung_sekundaere_gewaesser",metadata_id:"4002b1cf-08b5-421a-bc92-40271d62f03c"},dimensions:{},type:"WMS",layers:"eau_new_Kilometrierung der Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kilometrierung der Gewsser__27"},{name:"eau_new_Kilometrierung der Gewsser__28"}]},{id:636,name:"eau_new_Einzugsgebiete",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.8156287",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb010cc765e17f1820811",is_queryable:!0,legend_name:"eau:einzugsgebiete",max_dpi:128,metadata_id:"a295a30a-f819-400c-842c-d0ccc695bea5"},dimensions:{},type:"WMS",layers:"eau_new_Einzugsgebiete",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einzugsgebiete__29"}]}],metadata:{},mixed:!0},{id:1875,name:"npour_eau_souterraine",children:[{id:628,name:"eau_new_Bohrungen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:16.7602644",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb039cc765e18ae5ed882",is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen__39"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]},{id:631,name:"eau_new_Grundwasserleiter",metadata:{geocatalog_open_data_last_update_date:"2024-06-03T01:02:35.1743465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecafe1cc765e18ae5ed87e",is_queryable:!0,legend_name:"eau:grundwasserleiter",max_dpi:128,metadata_id:"783a8608-e4b3-44ed-8864-68525da33760"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserleiter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserleiter__41"}]}],metadata:{},mixed:!0},{id:1876,name:"npour_eau_zps",children:[{id:214,name:"eau_new_Provisorische_ZPS",metadata:{geocatalog_open_data_last_update_date:"2024-10-03T01:04:17.082383",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece254111e9b03b03833c4",is_queryable:!0,legend_name:"eau:provisorische_zps",max_dpi:128,metadata_id:"ddc51f25-2fb7-4d14-866a-a08f8af8ef03"},dimensions:{},type:"WMS",layers:"eau_new_Provisorische_ZPS",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Provisorische_ZPS__130"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:1464,name:"eau_prgd_zones_protection_lac",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.5407176",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5b571c9546f3b55625dc355c",is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_prgd_zones_protection_lac__349"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]},{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]}],metadata:{},mixed:!0},{id:1877,name:"npour_eau_protection",children:[{id:643,name:"eau_new_Abwassersyndikate",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.7305149",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece2dd111e9b03b03833c5",is_queryable:!0,legend_name:"eau:abwassersyndikate",max_dpi:128,metadata_id:"4b5e384c-5603-4cf4-9bd5-6e520df5c375"},dimensions:{},type:"WMS",layers:"eau_new_Abwassersyndikate",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Abwassersyndikate__143"}]},{id:645,name:"eau_new_Klaeranlagen",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.116702",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece288cc765e1a25470f74",is_queryable:!0,legend_name:"eau:klaeranlagen",max_dpi:128,metadata_id:"53e55765-90eb-438f-a744-3ac878b06334"},dimensions:{},type:"WMS",layers:"eau_new_Klaeranlagen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Klaeranlagen__142"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:2177,name:"geosciences",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:2178,name:"geo_geologie_group",children:[{id:2167,name:"geo_carte_geol_harmonisee",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee",metadata_id:"542a0caa-4b33-4019-8ce7-b8541b436106"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee__6"},{name:"geo_carte_geol_harmonisee__1"},{name:"geo_carte_geol_harmonisee__2"},{name:"geo_carte_geol_harmonisee__3"}]},{id:2168,name:"geo_carte_geol_harmonisee_decouverte",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee_decouverte",metadata_id:"d03be720-e33c-4bd4-8829-559dc951dc2d"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee_decouverte",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee_decouverte__5"},{name:"geo_carte_geol_harmonisee_decouverte__1"},{name:"geo_carte_geol_harmonisee_decouverte__2"},{name:"geo_carte_geol_harmonisee_decouverte__3"}]},{id:2185,name:"geo_carte_detail_25k",metadata:{is_queryable:!0,legend_name:"geol:geo25k_ned",metadata_id:"f8e6c6ca-948a-404e-9d15-54d9a423627b"},dimensions:{},type:"WMS",layers:"geo_carte_detail_25k",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_detail_25k__0"}]},{id:2186,name:"geo_carte_generale_100k",metadata:{is_queryable:!0,legend_name:"geol:geologie_generale",metadata_id:"61b929b6-7964-449d-bc3e-87483a7997f5"},dimensions:{},type:"WMS",layers:"geo_carte_generale_100k",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_generale_100k__0"}]},{id:2169,name:"geo_carte_geol_simplifiee",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee",metadata_id:"d5235bf1-96c8-4fc8-8d6d-2a0cde246aad"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee__2"},{name:"geo_carte_geol_simplifiee__1"},{name:"geo_carte_geol_simplifiee__0"}]},{id:2170,name:"geo_carte_geol_simplifiee_decouverte",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee_decouverte",metadata_id:"d8d627ee-ec11-4054-8a05-f4cd98adbd72"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee_decouverte",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee_decouverte__0"},{name:"geo_carte_geol_simplifiee_decouverte__2"}]},{id:2199,name:"geo_cartes_geologiques_historiques",children:[{id:2202,name:"geo_geologie_wies_siegen",metadata:{is_queryable:!0,legend_name:"geol:geologie_wies_siegen",metadata_id:"f595fd68-0036-433f-ae93-2bbace506f0a"},dimensions:{},type:"WMS",layers:"geo_geologie_wies_siegen",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_wies_siegen__0"}]},{id:2203,name:"geo_geologie_van_werweke",metadata:{is_queryable:!0,legend_name:"geol:geologie_van_werweke",metadata_id:"5156b574-f67c-4bee-b349-e769581fe079"},dimensions:{},type:"WMS",layers:"geo_geologie_van_werweke",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_van_werweke__1"}]},{id:2204,name:"geo_geologie_lucius",metadata:{is_queryable:!0,legend_name:"geol:geologie_lucius",metadata_id:"34e148cb-7d47-455a-8d5f-0f2623ab6a4e"},dimensions:{},type:"WMS",layers:"geo_geologie_lucius",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_lucius__3"}]},{id:2205,name:"geo_geologie_robert",metadata:{is_queryable:!0,legend_name:"geol:geologie_robert",metadata_id:"a299b930-a36c-4709-8712-b52cfd7c9fa1"},dimensions:{},type:"WMS",layers:"geo_geologie_robert",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_robert__2"}]},{id:2206,name:"geo_geologie_detail_anc_edition",metadata:{is_queryable:!0,legend_name:"geol:geo25_50k_aed",metadata_id:"a3342917-2a84-48ee-bf20-668810bb4c80"},dimensions:{},type:"WMS",layers:"geo_geologie_detail_anc_edition",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_detail_anc_edition__12"}]}],metadata:{},mixed:!0},{id:2173,name:"geo_coupes_geologiques",metadata:{is_queryable:!0,legend_name:"geol:coupes_geologiques",metadata_id:"8a35490a-8dc8-4dfd-9136-edfdd6d08281"},dimensions:{},type:"WMS",layers:"geo_coupes_geologiques",imageType:"image/png",style:"default",childLayers:[{name:"geo_coupes_geologiques__0"}]},{id:2175,name:"geo_epaisseurs_unites",metadata:{is_queryable:!0,legend_name:"geol:epaisseurs_unites",metadata_id:"3fab8010-2f8b-43e2-96a7-155a24233db4"},dimensions:{},type:"WMS",layers:"geo_epaisseurs_unites",imageType:"image/png",style:"default",childLayers:[{name:"geo_epaisseurs_unites__0"}]},{id:2201,name:"geo_forages_group",children:[{id:2176,name:"geo_forages_ref",metadata:{is_queryable:!0,legend_name:"geol:forages_ref",metadata_id:"0564eda7-c92d-4a80-b3c7-be94f5d67186"},dimensions:{},type:"WMS",layers:"geo_forages_ref",imageType:"image/png",style:"default",childLayers:[{name:"geo_forages_ref__0"}]},{id:628,name:"eau_new_Bohrungen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:16.7602644",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb039cc765e18ae5ed882",is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen__39"}]},{id:2791,name:"pch_sgl_demande_forage_virtuel",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee",linked_layers:["2847"],metadata_id:"4858f69e-4ce5-4d49-984f-fecb1d8b61ac",return_clicked_point:"true"},dimensions:{},type:"WMS",layers:"pch_sgl_demande_forage_virtuel",imageType:"image/png",style:"default",childLayers:[{name:"pch_sgl_demande_forage_virtuel__6"},{name:"pch_sgl_demande_forage_virtuel__1"},{name:"pch_sgl_demande_forage_virtuel__2"},{name:"pch_sgl_demande_forage_virtuel__3"}]},{id:2847,name:"pch_sgl_demande_forage_virtuel_masque",metadata:{metadata_id:"b1f69cb4-30ad-4856-926c-0fc28bb331ca"},dimensions:{},type:"WMS",layers:"pch_sgl_demande_forage_virtuel_masque",imageType:"image/png",style:"default",childLayers:[{name:"pch_sgl_demande_forage_virtuel_masque__0"}]}],metadata:{},mixed:!0},{id:2200,name:"geo_eaux_souterraines",children:[{id:631,name:"eau_new_Grundwasserleiter",metadata:{geocatalog_open_data_last_update_date:"2024-06-03T01:02:35.1743465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecafe1cc765e18ae5ed87e",is_queryable:!0,legend_name:"eau:grundwasserleiter",max_dpi:128,metadata_id:"783a8608-e4b3-44ed-8864-68525da33760"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserleiter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserleiter__41"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]}],metadata:{},mixed:!0},{id:2191,name:"geo_geomorphologie_carte100K",metadata:{is_queryable:!0,legend_name:"geol:geomorphologie100k",metadata_id:"3fd5088b-021d-4207-9d4b-4040e1ccfe22"},dimensions:{},type:"WMS",layers:"geo_geomorphologie_carte100K",imageType:"image/png",style:"default",childLayers:[{name:"geo_geomorphologie_carte100K__0"}]}],metadata:{},mixed:!0},{id:2182,name:"geo_geophysique_group",children:[{id:2192,name:"geo_geophysique_comptage_uranium",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_uranium",metadata_id:"6b9443de-b85c-4360-9c3b-b937c5804303"},dimensions:{},type:"WMS",layers:"geo_geophysique_comptage_uranium",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_comptage_uranium__0"}]},{id:2193,name:"geo_geophysique_comptage_thorium",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_thorium",metadata_id:"335aec3a-52e5-49c4-8325-cd57b0751b47"},dimensions:{},type:"WMS",layers:"geo_geophysique_comptage_thorium",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_comptage_thorium__1"}]},{id:2194,name:"geo_geophysique_comptage_potassium",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_potassium",metadata_id:"39b205a1-2a16-44fe-9a16-c6e1fdd60084"},dimensions:{},type:"WMS",layers:"geo_geophysique_comptage_potassium",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_comptage_potassium__2"}]},{id:2195,name:"geo_geophysique_synthese_uthk",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_uthk",metadata_id:"bcbbc55a-e6b7-4b5a-ac62-dc5ce8b0825a"},dimensions:{},type:"WMS",layers:"geo_geophysique_synthese_uthk",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_synthese_uthk__3"}]},{id:2196,name:"geo_geophysique_champ_vlf",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_vlf",metadata_id:"ce816301-b6eb-480a-a891-6d394b635ff7"},dimensions:{},type:"WMS",layers:"geo_geophysique_champ_vlf",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_champ_vlf__4"}]},{id:2197,name:"geo_geophysique_champ_total",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_total_residuel",metadata_id:"efcea741-1392-4c97-8233-3d31b64eb82a"},dimensions:{},type:"WMS",layers:"geo_geophysique_champ_total",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_champ_total__5"}]},{id:2198,name:"geo_geophysique_champ_total_reduit_pole",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_total_residuel_reduit_pole",metadata_id:"b1b387a3-96d2-4a4b-9a1f-0add1712840c"},dimensions:{},type:"WMS",layers:"geo_geophysique_champ_total_reduit_pole",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_champ_total_reduit_pole__6"}]}],metadata:{},mixed:!0},{id:321,name:"pedologie",children:[{id:272,name:"pedologie_100k",metadata:{legend_name:"pedologie",metadata_id:"2d712a34-ce79-426d-a57b-b7cadf97b80f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"pedologie_100k",imageType:"image/png"},{id:702,name:"asta_pedologie_new",metadata:{legend_name:"pedologie_new",max_dpi:128,metadata_id:"37686d89-0173-4040-88c7-be84a3648d01"},dimensions:{},type:"WMS",layers:"asta_pedologie_new",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_new__9"},{name:"asta_pedologie_new__10"},{name:"asta_pedologie_new__11"},{name:"asta_pedologie_new__12"},{name:"asta_pedologie_new__13"},{name:"asta_pedologie_new__14"},{name:"asta_pedologie_new__15"}]},{id:704,name:"asta_pedologie_humus",metadata:{legend_name:"asta_corg",max_dpi:128,metadata_id:"a1b0807c-9bff-4f6a-a5e7-130316742f56"},dimensions:{},type:"WMS",layers:"asta_pedologie_humus",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_humus__0"}]},{id:703,name:"asta_pedologie_ph",metadata:{legend_name:"asta_ph",max_dpi:128,metadata_id:"628ee73f-4c37-4689-bc4c-1fd9f6bd2663"},dimensions:{},type:"WMS",layers:"asta_pedologie_ph",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_ph__0"}]},{id:2408,name:"asta_erosion_group",children:[{id:2760,name:"asta_rigoles_erosion_enquete",metadata:{is_queryable:!0,metadata_id:"00c1398d-604f-4e1b-9abd-af05261d80ba"},dimensions:{},type:"WMS",layers:"asta_rigoles_erosion_enquete",imageType:"image/png",childLayers:[{name:"asta_rigoles_erosion_enquete__2"}]},{id:2407,name:"asta_erosion_2023",metadata:{is_queryable:!0,metadata_id:"427aff9b-b988-455c-8cd9-1c029cfd6b6e",start_opacity:.25},dimensions:{},type:"WMS",layers:"asta_erosion_2023",imageType:"image/png",childLayers:[{name:"asta_erosion_2023__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2183,name:"geo_relief_group",children:[{id:1460,name:"wg_relief_map",metadata:{metadata_id:"7d195815-23c2-4963-863c-60e3a39ab8af"},dimensions:{},type:"WMS",layers:"wg_relief_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_relief_map__0"}]},{id:1461,name:"wg_hangneigung_map",metadata:{legend_name:"wg:hangneigung",metadata_id:"6ffa94a4-af02-43ec-82e0-6796cd01a948"},dimensions:{},type:"WMS",layers:"wg_hangneigung_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_hangneigung_map__0"}]},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"}],metadata:{},mixed:!0},{id:2184,name:"geo_decouverte_group",children:[{id:2021,name:"tour_rando_natur_geologie_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"4f360781-3708-416a-a6d5-8944a4864737"},dimensions:{},type:"WMS",layers:"tour_rando_natur_geologie_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_natur_geologie_new__category"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:2332,name:"3D Layers",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:1958,name:"3d Layers",children:[{id:2346,name:"ACT2022_BD_L_BATI3D_LOD2",metadata:{exclusion:'["mesh_2020_vs_bd-l-bati-3d"]',metadata_id:"2e8b722a-87ea-4b62-a307-423832adabab",ol3d_defaultlayer:!0,ol3d_options:{cesium3DTileStyle:{show:"! ( ${id} === '00855_00750-000001'||${id} === '00850_00755-000001_1on9'||${id} === '00850_00755-000001_2on9'||${id} === '00850_00755-000001_3on9'||${id} === '00850_00755-000001_4on9'||${id} === '00850_00755-000001_5on9'||${id} === '00850_00755-000001_6on9'||${id} === '00850_00755-000001_7on9'||${id} === '00850_00755-000001_8on9'||${id} === '00850_00755-000001_9on9'||${id} === '00850_00750-000001'||${id} === '00635_00675-000004_1on8'||${id} === '00635_00675-000004_2on8'||${id} === '00635_00675-000004_3on8'||${id} === '00635_00675-000004_4on8'||${id} === '00635_00675-000004_5on8'||${id} === '00635_00675-000004_6on8'||${id} === '00635_00675-000004_7on8'||${id} === '00635_00675-000004_8on8'||${id} === '00635_00675-000005_1on5'||${id} === '00635_00675-000005_2on5'||${id} === '00635_00675-000005_3on5'||${id} === '00635_00675-000005_4on5'||${id} === '00635_00675-000005_5on5'||${id} === '00635_00675-000002_1on2'||${id} === '00635_00675-000002_2on2'||${id} === '00635_00675-000003_1on2'||${id} === '00635_00675-000003_2on2'||${id} === '01020_00905-000023_1on9'||${id} === '01020_00905-000023_2on9'||${id} === '01020_00905-000023_3on9'||${id} === '01020_00905-000023_4on9'||${id} === '01020_00905-000023_5on9'||${id} === '01020_00905-000023_6on9'||${id} === '01020_00905-000023_7on9'||${id} === '01020_00905-000023_8on9'||${id} === '01020_00905-000023_9on9' )"}}},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"ACT2022_BD_L_BATI3D_LOD2",imageType:"image/png"},{id:2348,name:"VDL2022_LOD2_IMPORT",metadata:{exclusion:'["mesh_2020_vs_bd-l-bati-3d_vdl"]',metadata_id:"a116f21e-faf1-4bdd-9a29-064fd9a30b8d",ol3d_defaultlayer:!0},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"VDL2022_LOD2_IMPORT_old",imageType:"image/png"},{id:2350,name:"VDL2022_BRIDGES_IMPORT",metadata:{exclusion:'["mesh_2020_vs_bridges_vdl"]',metadata_id:"95c91657-5d7b-4b1f-bc74-de0e2db0f5c7",ol3d_defaultlayer:!0},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"Bridges_LOD2",imageType:"image/png"},{id:2397,name:"ACT2019_LiDAR_Bridges",metadata:{exclusion:'["mesh_2020_vs_bridges_ACT"]',metadata_id:"0690e5cb-50df-4cf8-8cf3-d12dbecfc171",ol3d_defaultlayer:!0},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"ACT2019_LiDAR_Bridges_LOD1",imageType:"image/png"},{id:2384,name:"ACT2019_LiDAR_Vegetation",metadata:{exclusion:'["mesh_2020_vs_trees"]',metadata_id:"99180a32-bf64-46c2-b901-ce055b0f01fe",ol3d_defaultlayer:!0},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"ACT2019_LiDAR_Vegetation",imageType:"image/png"},{id:2538,name:"ACT2019_LiDAR_Powerlines",metadata:{},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"ACT2019_LiDAR_Powerlines",imageType:"image/png"}],metadata:{display_in_switcher:!0,is_expanded:!0},mixed:!0},{id:2447,name:"reference_objects_3d",children:[{id:2446,name:"OBJ3D_sharedBikes",metadata:{},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles/OBJECTS3D",layer:"SharedBikes",imageType:"image/png"}],metadata:{},mixed:!0}],functionalities:{},metadata:{ol3d_type:"data"}},{id:2576,name:"anf_expo",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:2577,name:"anf_expo_einleitung",children:[{id:2601,name:"anf_overlay_expo_biosphere",metadata:{is_queryable:!0,start_opacity:.7},dimensions:{},type:"WMS",layers:"anf_overlay_expo_ort",imageType:"image/png",style:"default",childLayers:[{name:"anf_overlay_expo_biosphere__2"},{name:"anf_overlay_expo_biosphere__3"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]}],metadata:{},mixed:!0},{id:2578,name:"anf_expo_biodiversitaet",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:2482,name:"anf_corridors_faune_sauvage",metadata:{metadata_id:"58a2c50b-0f4e-4d9c-95ff-5851eebf6e58"},dimensions:{},type:"WMS",layers:"anf_corridors_faune_sauvage",imageType:"image/png",style:"default",childLayers:[{name:"anf_corridors_faune_sauvage__corridors_ecologiques"}]},{id:1822,name:"anf_projets_compensation_approuves",metadata:{is_queryable:!0,metadata_id:"03aafc0c-c443-42ea-963a-8538a3f089d4"},dimensions:{},type:"WMS",layers:"anf_projets_compensation_approuves",imageType:"image/png",style:"default",childLayers:[{name:"anf_projets_compensation_approuves__ZONES_COMPENSATION_APPROUVEES"}]}],metadata:{},mixed:!0},{id:2580,name:"anf_expo_landwirtschaft",children:[{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]}],metadata:{},mixed:!0},{id:2582,name:"anf_expo_wasser",children:[{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:567,name:"eau_new_Trinkwasserentnahmepunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.3958552",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb044cc765e17f1820812",is_queryable:!0,legend_name:"eau:trinkwasserentnahmepunkte",max_dpi:128,metadata_id:"a049086b-9c17-4ba6-b9bf-78cb4af8ee68"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwasserentnahmepunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwasserentnahmepunkte__47"}]},{id:749,name:"eau_new_Gewsser",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewsser__23"},{name:"eau_new_Gewsser__24"},{name:"eau_new_Gewsser__25"}]},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2581,name:"anf_expo_stadt",children:[{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]},{id:1813,name:"myenergy_solarkataster_luxemburg_solar_potentials",metadata:{is_queryable:!0,legend_name:"energie:potentiel_solaire",metadata_id:"97628fac-c53b-4426-a829-b188105b9ead",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857",ogc_query_layers:["st_luxemburg_22_feature_info"]},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_solar_potentials",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_solar_potentials__st_luxemburg_22_solar_potentials"}]}],metadata:{},mixed:!0},{id:2579,name:"anf_expo_wald",children:[{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{}},{id:2742,name:"school",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:2753,name:"school_basisdaten",children:[{id:2754,name:"school_verwaltungseinheiten",children:[{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]}],metadata:{},mixed:!0},{id:2755,name:"school_adressen",children:[{id:165,name:"adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2757,name:"school_topo_karten",children:[{id:734,name:"utm_grid",metadata:{max_dpi:128,metadata_id:"84f59e51-2772-4b6d-8c5b-3ec19aa7d8f2"},dimensions:{},type:"WMS",layers:"utm_grid",imageType:"image/png",style:"default",childLayers:[{name:"utm_grid__2"},{name:"utm_grid__3"}]},{id:738,name:"luref_graticules",metadata:{max_dpi:128,metadata_id:"0d1a431c-36b0-406f-8cfd-d264d4949bf0"},dimensions:{},type:"WMS",layers:"luref_graticules",imageType:"image/png",style:"default",childLayers:[{name:"luref_graticules__0"},{name:"luref_graticules__1"}]}],metadata:{},mixed:!0},{id:2756,name:"school_luftbilder",children:[{id:2537,name:"ortho_2022",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"63f18835-55ac-448c-a0ea-dc998933077b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2022",imageType:"image/jpeg"},{id:2272,name:"ortho_2021",metadata:{exclusion:"[121,221]",metadata_id:"ea0bd2ff-b743-4f3a-bd9b-450976563de9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2021",imageType:"image/jpeg"},{id:2056,name:"ortho_2020",metadata:{exclusion:"[119,219]",metadata_id:"87870b8a-10a1-4c33-bf50-7efe851fd450"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2020",imageType:"image/jpeg"},{id:1784,name:"ortho_2019",metadata:{exclusion:"[116,216]",metadata_id:"97c88ef6-6c64-4cb0-a134-06bb42b2b448"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019",imageType:"image/jpeg"},{id:1527,name:"ortho_2018",metadata:{exclusion:"[113,213]",metadata_id:"6fde72c4-802f-4663-be74-5fa5901cb4f0"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2018",imageType:"image/jpeg"},{id:1371,name:"ortho_2017",metadata:{exclusion:"[111,211]",metadata_id:"1cdae616-1a7a-49d5-b35d-05864891641f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017",imageType:"image/jpeg"},{id:745,name:"ortho_2016",metadata:{exclusion:"[107,207]",metadata_id:"bba79b6d-4205-4ce4-98e4-7b7922afcd55"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016",imageType:"image/jpeg"},{id:360,name:"ortho_2013",metadata:{exclusion:"[106,206]",metadata_id:"ced4a3dd-135e-43d0-86b9-2318982581f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013",imageType:"image/jpeg"},{id:342,name:"ortho_2010",metadata:{exclusion:"[105,205]",metadata_id:"0faf4bdb-a54b-42d7-942c-4e52fa66e963"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010",imageType:"image/jpeg"},{id:231,name:"ortho_2007",metadata:{exclusion:"[101,201]",metadata_id:"3be3d98e-7997-4ff6-8d77-e393a5fc4fdd"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2007",imageType:"image/jpeg"},{id:224,name:"ortho_2004",metadata:{exclusion:"[103,203]",metadata_id:"a185f78a-ca9c-43f8-8d06-b1abba8ff056"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2004",imageType:"image/jpeg"},{id:225,name:"ortho_2001",metadata:{exclusion:"[104,204]",metadata_id:"e6ff269c-1c7c-401f-a90b-b805e80a046e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2001",imageType:"image/jpeg"},{id:2592,name:"act_ortho_time",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"1adb95b0-d0a5-4afa-936a-c9faa9edba2c",time_config:'{"default_time":"2023-08","time_links":{"2001-08":"ortho_2001","2004-08":"ortho_2004","2007-08":"ortho_2007","2010-08":"ortho_2010","2013-08":"ortho_2013","2016-08":"ortho_2016","2017-08":"ortho_2017","2018-08":"ortho_2018","2019-01":"ortho_2019_winter","2019-08":"ortho_2019","2020-08":"ortho_2020","2021-08":"ortho_2021","2022-08":"ortho_2022","2023-08":"ortho_2023"}}',time_layers:{"2001-08-01T00:00:00Z":"ortho_2001","2004-08-01T00:00:00Z":"ortho_2004","2007-08-01T00:00:00Z":"ortho_2007","2010-08-01T00:00:00Z":"ortho_2010","2013-08-01T00:00:00Z":"ortho_2013","2016-08-01T00:00:00Z":"ortho_2016","2017-08-01T00:00:00Z":"ortho_2017","2018-08-01T00:00:00Z":"ortho_2018","2019-01-01T00:00:00Z":"ortho_2019_winter","2019-08-01T00:00:00Z":"ortho_2019","2020-08-01T00:00:00Z":"ortho_2020","2021-08-01T00:00:00Z":"ortho_2021","2022-08-01T00:00:00Z":"ortho_2022","2023-08-01T00:00:00Z":"ortho_2023"}},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"act_ortho_time",imageType:"image/jpeg",time:{minValue:"2001-08-01T00:00:00Z",maxValue:"2023-08-01T00:00:00Z",values:["2001-08-01T00:00:00Z","2004-08-01T00:00:00Z","2007-08-01T00:00:00Z","2010-08-01T00:00:00Z","2013-08-01T00:00:00Z","2016-08-01T00:00:00Z","2017-08-01T00:00:00Z","2018-08-01T00:00:00Z","2019-01-01T00:00:00Z","2019-08-01T00:00:00Z","2020-08-01T00:00:00Z","2021-08-01T00:00:00Z","2022-08-01T00:00:00Z","2023-08-01T00:00:00Z"],resolution:"month",minDefValue:"2023-08-01T00:00:00Z",maxDefValue:null,mode:"value",widget:"slider"}}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2747,name:"school_themen",children:[{id:2743,name:"school_thema_gesteinskreislauf",children:[{id:2169,name:"geo_carte_geol_simplifiee",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee",metadata_id:"d5235bf1-96c8-4fc8-8d6d-2a0cde246aad"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee__2"},{name:"geo_carte_geol_simplifiee__1"},{name:"geo_carte_geol_simplifiee__0"}]},{id:2173,name:"geo_coupes_geologiques",metadata:{is_queryable:!0,legend_name:"geol:coupes_geologiques",metadata_id:"8a35490a-8dc8-4dfd-9136-edfdd6d08281"},dimensions:{},type:"WMS",layers:"geo_coupes_geologiques",imageType:"image/png",style:"default",childLayers:[{name:"geo_coupes_geologiques__0"}]},{id:2176,name:"geo_forages_ref",metadata:{is_queryable:!0,legend_name:"geol:forages_ref",metadata_id:"0564eda7-c92d-4a80-b3c7-be94f5d67186"},dimensions:{},type:"WMS",layers:"geo_forages_ref",imageType:"image/png",style:"default",childLayers:[{name:"geo_forages_ref__0"}]},{id:2021,name:"tour_rando_natur_geologie_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"4f360781-3708-416a-a6d5-8944a4864737"},dimensions:{},type:"WMS",layers:"tour_rando_natur_geologie_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_natur_geologie_new__category"}]}],metadata:{},mixed:!0},{id:2744,name:"school_thema_fluesse",children:[{id:749,name:"eau_new_Gewsser",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewsser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewsser__23"},{name:"eau_new_Gewsser__24"},{name:"eau_new_Gewsser__25"}]},{id:655,name:"eau_new_Wasserstand",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:12.0164112",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"59c220a4111e9b1de61d8864",is_queryable:!0,legend_name:"eau:wasserstand",max_dpi:128,metadata_id:"124abb10-1d87-4449-912b-06fbf307a95f"},dimensions:{},type:"WMS",layers:"eau_new_Wasserstand",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Wasserstand__2"}]}],metadata:{},mixed:!0},{id:2745,name:"school_thema_ueberschwemmungen",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2045,name:"age_dangers_fortes",metadata:{legend_name:"age_dangers_fortes",metadata_id:"55dbe91c-f1e5-4c56-b0b9-4590988e23e5"},dimensions:{},type:"WMS",layers:"age_dangers_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_dangers_fortes__0"},{name:"age_dangers_fortes__1"}]},{id:758,name:"eau_new_Manahmens des Hochwasserrisikomanagementplans",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:03:13.4638796",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"66e4e0d15a1785364d6db3fb",is_queryable:!0,legend_name:"eau:massnahmens_des_hochwasserrisikomanagementplans",metadata_id:"4326fea6-7ec4-4bb9-861f-4476b0d4ceac"},dimensions:{},type:"WMS",layers:"eau_new_Manahmens des Hochwasserrisikomanagementplans",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Manahmens des Hochwasserrisikomanagementplans__314"}]},{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]}],metadata:{},mixed:!0},{id:2746,name:"school_thema_minette",children:[{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{}}],background_layers:[{id:556,name:"basemap_2015_global",metadata:{attribution:`&copy; <a href='https://www.maptiler.com/copyright/'>MapTiler</a> &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors for data outside of Luxembourg`,exclusion:"[31, 32]",legend_name:"act:roadmap_vt",metadata_id:"a1fea2a0-e0a0-4e5f-a61d-9b3c3a9426bd"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"basemap_2015_global",imageType:"image/png"},{id:502,name:"topo_bw_jpeg",metadata:{attribution:`&copy; <a href='https://www.maptiler.com/copyright/'>MapTiler</a> &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors for data outside of Luxembourg`,exclusion:"[35, 45]",legend_name:"act_topovt_bw",metadata_id:"b786acc2-b87e-4c7a-aff7-52778357243b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_bw_jpeg",imageType:"image/jpeg"},{id:529,name:"topogr_global",metadata:{attribution:`&copy; <a href='https://www.maptiler.com/copyright/'>MapTiler</a> &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors for data outside of Luxembourg`,exclusion:"[36, 46]",legend_name:"act_topovt",metadata_id:"b786acc2-b87e-4c7a-aff7-52778357243b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topogr_global",imageType:"image/png"},{id:530,name:"orthogr_2013_global",metadata:{exclusion:"[21, 22]",hasRetina:!1,metadata_id:"554cb3f9-a6e7-4e0e-8d62-0853dfd33c32"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"orthogr_2013_global",imageType:"image/jpeg"},{id:501,name:"streets_jpeg",metadata:{exclusion:"[11, 12]",hasRetina:!1,metadata_id:"c427b194-53ba-418d-9b4a-226a8cbfd568"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"streets_jpeg",imageType:"image/png"}],errors:[],lux_3d:{terrain_url:"https://acts3.geoportail.lu/3d-data/3d-tiles/terrain3D/lidar_2019_terrain/3DTiles"}}),zQ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM0AAAAoCAMAAABq645qAAACPVBMVEUAAABaW13////tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy5DjxTaAAAAvXRSTlMAAAABAgMEBQYHCAkKCwwNDg8QERESFBUWFxkaGx0eHyAhIiInKSosMTIzNTY5Ojs8PUFCQ0RERkpMTk9QU1RVVldaXmFjZWZmamtwcXJzdXd3eHl7fX+AgYKDhIaHiIiKi4yOj5CTlJWWl5iZmZqcnZ+goaKjpKanqKqqq6ywsbK0tbW4u7u8vb6/wMHExcbHysvMzM7P0NDS1NXa29zd3t/g4eTl5ujp6uvs7e7u8PLz9PX29/j5+vv8/f5cALqzAAAEcklEQVRo3u3Z+ZPUVBAH8O63LsLKijoIgotHFI+HgiKNeGC8MCqgUUFAJYjgAQ6HKMgGEQQiqChIPFh1iciiwPIEhvv49t/mD5lBORa2tHbLTO2rmqnUTCrJZ3r65ZuEjDHGGLrMWGcKMah7mh/7NP8PzXBqbqgfzdtPb7i/fjQPvq8r5jUVXNNIY4moYeL6+XNfn9Ov6LUZ2/Z7Pxo3YaZWTp/uLPw/reXYbqLRPz/38g+qJ/oTEV396IzmgmquXHZoIRHd/sTs31T1DqIBcyqHZjQWtTbf6nQiokHLVVWn7ju4euXGjsX9LtTAGgPAGGMzOPZSOGFYtmAXsO8skFkgZovQgi2QcZKyIGAAjJQtIgAB/5vRTc2IvbqSqOWNJQdUVdfe+/zitmsu2jeQ/GWMC43HacRhxhAWcJRyEgmYBSVYgROwgJkzeGVEDGEGotqnPaih1Xp63KSvVFVVtz0wt23AvMVda5AZY2FM7OWO/N2DwBMgESBiQZyABUgYSYQkYSBjhAh7QXN3Zfey7YdyzXh6aQpdu2fIpWsD30CykKOU4XPgmBPEnNcmC1jgIT9uCx9ZkOW1kQi9oBm6aMvO3KIVomUPES19/KIaoNo34uA8cUgtB4DzmQXCFoCFhbXgMtgC8DNGKMj7xnIKtj2toeGf55X5c9+ZRpo1lWjyq5c/33Avj+5obpz25miiwd+p6q4/2jfvIrqtrYlemF5MzZObTuhHCw6cUd2y/91ftj5DRJOn0JKniqm56jPtUNXDx44u6NywvaPzPqL+G5v3jCimhhqaX/vyi6VTxtzyYkVV9dSsRvrmnVXUI5oo7GkNEV2RH/igaRVV1Y8fOdE+tEc0tlzqBU1tND+7U1W18t51F8/QAFJrkUccL4VjABFb+MwoMyznszWzBZxfDT2SIbZgm0/TzBbIpLqcr8GwScJxfF4UiliAgGEZ1gKx8VK4bmuafmpdrqr6cFdXBJBSORPkp9A0ZI8hAi4jYQY8CEN8MDML2K/FBBdwKU80kOp3eSBirq7BkJJLstK5UShw+eYhDBGUYNPQeN3WTND2rd+r6oquNUZQ00A49gCEJQg8RhJD8j0DQX6IEBZYMLMAAANZrpHa8lkNBwjOi0Ion90KRIDIQEzsdVfzlurhT1X11F2XqE3qwfNQMiYLGYIYNgAQMcTltXHV3z9w1dAD/8LapH/XJt9eycWudG4U8lGrjYeSIAtMFlaD1SU1NxAR0cA9qrpqr6ruaOmybxLPREBojLEOzoMNkAXsO4YNYRnIpNo3WS30+EByXt+kttY3AEdAyGmZ4/TcKORCDgDhEAg5D0wO7vK1mbmwhajxA9XWkXTTh8dVj6wZX9gr6ZFL9eTm1nbVhUREdOs2Vb25sJqmRTuOq+r+rwfmgGEHVYcU+H7a8KNrdP6kYTXBJ6qPFVjT2DxwzD/msbWqE+vnrvqvevSeutGMUm0dXC+ahk3asb5unt+8cvLIqOvr52nU7Dv7nq31afo0/0mzrhiavwAx1n2SsZnMdgAAAABJRU5ErkJggg==",UQ="fr",HQ=!0,XQ=!1,qQ=!1,YQ=!1,KQ=!1,jQ=!1,$Q=!1,JQ=!1,QQ=!1,eee=!1,tee=!1,aee=!1,_i=Co("app",()=>{const a=Fe(!1),e=Fe(UQ),t=Fe(HQ),i=Fe(XQ),n=Fe(qQ),s=Fe(YQ),r=Fe(),l=Fe(KQ),u=Fe(jQ),d=Fe(aee),m=Fe(tee),f=Fe($Q),v=Fe(JQ),w=Fe(QQ),S=Fe(eee),T=Fe(),M=Fe(!1),G=Fe(void 0),P=Fe(!1),F=Fe(!1),N=Fe(!1),V=Fe(!1),K=Fe(!1),te=Fe(!1);function J(bt){te.value=bt}function ne(bt){e.value=bt}function se(bt){t.value=bt}function de(bt){n.value=bt,n.value&&(s.value=!1,i.value=!1)}function _e(bt){s.value=bt,s.value&&(M.value=!1,i.value=!1)}function Se(){s.value?(t.value=!1,i.value=!1,l.value=!1,s.value=!1,m.value=!1):(s.value=!0,t.value=!0,i.value=!1,l.value=!1,u.value=!1,m.value=!1,M.value=!1,n.value&&(n.value=!1))}function ce(bt){T.value=bt}function Ie(bt){r.value=bt}function he(){M.value=!0,t.value=!1}function we(){M.value=!1,t.value=!0}function Oe(bt){P.value=bt??!P.value}function Ye(bt){l.value=bt??!l.value}function at(bt){i.value=bt??!i.value}function yt(bt){u.value=bt??!u.value}function De(bt){d.value=bt??!d.value}function jt(bt){m.value=bt??!m.value}function pa(bt){V.value=bt??!V.value}function $t(bt){N.value=bt??!N.value}function Ua(bt){f.value=bt??!f.value}return{embedded:a,lang:e,layersOpen:t,legendsOpen:i,myLayersTabOpen:n,themeGridOpen:s,mapId:r,myMapsOpen:l,infoOpen:u,shareOpen:d,lidarOpen:m,feedbackOpen:f,feedbackanfOpen:v,feedbackageOpen:w,feedbackcruesOpen:S,styleEditorOpen:M,styleEditorOpenedSection:G,remoteLayersOpen:T,drawToolbarOpen:P,measureToolbarOpen:F,elevationProfileToolbarOpen:N,isOffLine:K,isApp:te,setIsApp:J,printToolbarOpen:V,setLang:ne,setLayersOpen:se,setMyLayersTabOpen:de,setThemeGridOpen:_e,setRemoteLayersOpen:ce,setMapId:Ie,openStyleEditorPanel:he,closeStyleEditorPanel:we,toggleDrawToolbarOpen:Oe,togglePrintToolbarOpen:pa,toggleMyMapsOpen:Ye,toggleInfoOpen:yt,toggleShareOpen:De,toggleLidarOpen:jt,toggleThemeGrid:Se,toggleLegendsOpen:at,toggleElevationProfileToolbarOpen:$t,toggleFeedbackOpen:Ua}},{}),Mc=Co("user-manager",()=>{const a=_i(),{isOffLine:e}=Tt(a),t=Fe(void 0),i=St(()=>e.value||!!t.value);function n(){return i.value}function s(l){if(l.login)t.value=l;else throw r(),new Error("Invalid username or password")}function r(){t.value=void 0}return{authenticated:i,currentUser:t,clearUser:r,isAuthenticated:n,setCurrentUser:s}},{}),TS="include",iee="https://migration.geoportail.lu/login",nee="https://migration.geoportail.lu/logout",ree="https://migration.geoportail.lu/getuserinfo";class see{async authenticate(e,t,i=!1){const n=new URLSearchParams({login:e,password:t,app:i?"true":"false"}),s=await fetch(iee,{method:"POST",credentials:TS,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n});if(!s.ok)throw new Error("Error while trying to authenticate user");const r=await s.json();return this.mapUserApiToUser(r)}async logout(){const e=await fetch(nee,{credentials:TS});if(!e.ok)throw new Error("Error while trying to logout user");return await e.text()}async getUserInfo(){const e=new URLSearchParams({}),t=await fetch(ree,{method:"POST",credentials:TS,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),i=t.ok&&await t.json();if(!i.login)throw new Error("Error while trying to get user info");return this.mapUserApiToUser(i)}mapUserApiToUser(e){const{is_admin:t,login:i,mail:n,mymaps_role:s,role:r,role_id:l,sn:u,typeUtilisateur:d}=e;return{login:i,mail:n,isAdmin:t,mymapsRole:s,name:u,role:r,roleId:l,sn:u,typeUtilisateur:d}}}const ES=new see;var Is=[];for(var MS=0;MS<256;++MS)Is.push((MS+256).toString(16).slice(1));function oee(a,e=0){return(Is[a[e+0]]+Is[a[e+1]]+Is[a[e+2]]+Is[a[e+3]]+"-"+Is[a[e+4]]+Is[a[e+5]]+"-"+Is[a[e+6]]+Is[a[e+7]]+"-"+Is[a[e+8]]+Is[a[e+9]]+"-"+Is[a[e+10]]+Is[a[e+11]]+Is[a[e+12]]+Is[a[e+13]]+Is[a[e+14]]+Is[a[e+15]]).toLowerCase()}var Xv,lee=new Uint8Array(16);function uee(){if(!Xv&&(Xv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xv(lee)}var cee=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const e9={randomUUID:cee};function iG(a,e,t){if(e9.randomUUID&&!e&&!a)return e9.randomUUID();a=a||{};var i=a.random||(a.rng||uee)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){t=t||0;for(var n=0;n<16;++n)e[t+n]=i[n];return e}return oee(i)}var on=(a=>(a.INFO="alert-info",a.WARNING="alert-warning",a.ERROR="alert-danger",a))(on||{});class dee{constructor(e,t,i,n,s){zt(this,"timeoutID");this.uuid=e,this.message=t,this.type=i,this.duration=n,this.timer=s,this.start()}start(){this.timer&&(this.timeoutID=setTimeout(()=>this.timer(this.uuid),this.duration))}cancel(){clearTimeout(this.timeoutID)}}const hee=on.INFO,_ee=7e3,mee=4e3,Ls=Co("alert-notifications",()=>{const a=Fe([]);function e(i,n=hee,s){s=s??(n===on.WARNING?mee:_ee);const r=new dee(iG(),i,n,s,l=>t(l));return a.value.push(r),r.uuid}function t(i){a.value=a.value.filter(n=>(n.uuid===i&&n.cancel(),n.uuid!==i))}return{notifications:a,addNotification:e,removeNotification:t}},{}),pee={"data-cy":"authForm",class:"lux-account bg-secondary"},gee={class:"lux-panel-title pt-5 mb-5 pl-5 h-16 shrink-0 flex justify-between"},fee={class:"lux-account-content"},yee={class:"flex flex-col gap-2 mb-2"},bee=["placeholder"],vee=["placeholder"],xee={class:"flex mt-3 items-center"},wee={class:"grow leading-5"},Iee=["href"],Cee=["href"],See=["value"],Aee={key:1},Tee={class:"flex flex-col gap-[1px] mb-2 text-white"},Eee={class:"bg-secondary py-1 px-3"},Mee={class:"bg-secondary py-1 px-3"},Lee={class:"flex items-center gap-3 justify-end"},Ree=["href"],kee=$e({__name:"auth-form",setup(a){const e="https://myaccount.geoportail.lu",t="https://myaccount.geoportail.lu/recover-password",i="https://myaccount.geoportail.lu/new-user",{t:n}=wt(),{addNotification:s}=Ls(),{lang:r,isApp:l}=Tt(_i()),u=Mc(),{setCurrentUser:d,clearUser:m}=u,{authenticated:f,currentUser:v}=Tt(u),w=Fe(!1),S=Fe(""),T=Fe("");Ut(f,V=>{!w.value&&V&&s(n("Vous tes maintenant correctement connect."))}),In(()=>{ES.getUserInfo().then(V=>{w.value=!0,P(V)}).catch(()=>{})});function M(){ES.logout().then(()=>m()).catch(()=>s(n("Une erreur est survenue durant la dconnexion."),on.ERROR)),N()}function G(){ES.authenticate(S.value,T.value,l.value).then(V=>{w.value=!1,P(V)}).catch(F),N()}function P(V){d(V)}function F(){s(n("Invalid username or password."),on.WARNING),m()}function N(){S.value="",T.value=""}return(V,K)=>{var te,J;return U(),$("div",pee,[W("h4",gee,q(k(n)("My account")),1),W("fieldset",null,[K[2]||(K[2]=W("legend",{class:"lux-account-tab"},null,-1)),W("div",fee,[k(f)?(U(),$("div",Aee,[W("div",Tee,[W("div",Eee,q((te=k(v))==null?void 0:te.login),1),W("div",Mee,q((J=k(v))==null?void 0:J.mail),1)]),W("div",Lee,[W("div",null,[W("a",{class:"text-secondary hover:underline hover:text-white",target:"_blank",href:`${k(e)}?lang=${k(r)}`},q(k(n)("My account")),9,Ree)]),W("div",null,[W("button",{class:"lux-btn",onClick:M},q(k(n)("Logout")),1)])])])):(U(),$("form",{key:0,onSubmit:Jr(G,["prevent"])},[W("div",yee,[W("div",null,[La(W("input",{class:"w-full lux-input h-11",type:"text",name:"userName","onUpdate:modelValue":K[0]||(K[0]=ne=>S.value=ne),placeholder:k(n)("Username"),required:""},null,8,bee),[[Hr,S.value]])]),W("div",null,[La(W("input",{class:"w-full lux-input h-11",type:"password",name:"userPassword","onUpdate:modelValue":K[1]||(K[1]=ne=>T.value=ne),placeholder:k(n)("Password"),required:""},null,8,vee),[[Hr,T.value]])])]),W("div",xee,[W("div",wee,[W("p",null,[W("a",{"data-cy":"authFormLostPwd",class:"text-secondary hover:underline hover:text-white",target:"_blank",href:k(t)},q(k(n)("I lost my password")),9,Iee)]),W("p",null,[W("a",{"data-cy":"authFormNewAccount",class:"text-secondary hover:underline hover:text-white",target:"_blank",href:k(i)},q(k(n)("Create a new user account")),9,Cee)])]),W("div",null,[W("input",{class:"lux-btn h-11 w-24 text-white placeholder:italic bg-secondary border-none uppercase hover:text-primary hover:bg-secondary",type:"submit",value:k(n)("Submit")},null,8,See)])])],32))])])])}}}),Wee={class:"h-full w-full"},Gee=["aria-expanded"],Oee={class:"lux-dropdown-wrapper"},Pee=$e({__name:"dropdown-content",props:{placeholder:{},enableClickOutside:{type:Boolean,default:!0},isOpen:{type:Boolean,default:!1},direction:{}},emits:["toggleDropdown"],setup(a,{emit:e}){const t=a,i=e,n=Di(t.isOpen);Ut(()=>t.isOpen,m=>{n.value=m});function s(m){n.value=m===void 0?!n.value:m,i("toggleDropdown",n.value)}function r(m){m.stopImmediatePropagation(),s()}function l(){s(!1)}const u=Fe(null),d=Fe("");return In(()=>{t.enableClickOutside&&document.addEventListener("click",l),d.value=u.value?"lux-btn-"+getComputedStyle(u.value).getPropertyValue("--button-theme"):""}),es(()=>t.enableClickOutside&&document.removeEventListener("click",l)),(m,f)=>(U(),$("div",K4({class:"lux-dropdown"},m.$attrs,{ref_key:"root",ref:u}),[W("div",Wee,[W("button",{type:"button",class:Pa(["lux-btn lux-dropdown-btn",[n.value?"expanded":"",d.value]]),"aria-expanded":n.value,"aria-haspopup":"true",onClick:r},[W("span",null,q(t.placeholder),1),W("span",{class:Pa(["lux-caret ml-1",{up:m.direction==="up"}])},null,2)],10,Gee)]),W("div",Oee,[W("div",{class:Pa(["lux-dropdown-content",n.value?"":"hidden"]),tabindex:"-1"},[Xa(m.$slots,"default",{},void 0,!0)],2)])],16))}});const hr=(a,e)=>{const t=a.__vccOpts||a;for(const[i,n]of e)t[i]=n;return t},nG=hr(Pee,[["__scopeId","data-v-63914dd3"]]),Bee=["data-cy"],Nee=["aria-label","data-value"],qx=$e({__name:"dropdown-list",props:{placeholder:{},options:{default:()=>[{label:"Default label",value:"Default value"}]},modelValue:{},direction:{default:"down"}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Di(),s=d6(t.direction);function r(u){n.value=u.target.dataset.value,i("change",n.value)}function l(){var u;return t.placeholder??((u=t.options.find(d=>d.value===t.modelValue))==null?void 0:u.label)}return(u,d)=>(U(),Gt(nG,K4({placeholder:l(),direction:s.value},u.$attrs),{default:Ht(()=>[W("ul",{class:Pa(["lux-dropdown-list",s.value])},[(U(!0),$(Ot,null,xi(t.options,m=>(U(),$("li",{key:m.value,class:Pa(u.modelValue===m.value?"selected":""),"data-cy":`dropdownItem-${m.value}`},[W("button",{class:"lux-dropdown-list-item","aria-label":m.ariaLabel,"data-value":m.value,onClick:r},q(m.label),9,Nee)],10,Bee))),128))],2)]),_:1},16,["placeholder","direction"]))}});function Fee(a){return{fr:"fre",en:"eng",de:"ger",lb:"ltz"}[a.toLowerCase()]}function Dee(a){return new DOMParser().parseFromString(a,"text/html").body}function Vee(a){const e=[];function t(i){if(!i)return;const n=i.split("|");n[3]==="WWW:LINK-1.0-http--link"&&e.indexOf(n[2])===-1&&e.push(n[2])}return Array.isArray(a)?a.forEach(t,a):t(a),e}function Zee(a){const t=(Array.isArray(a)?a:[a]).filter(i=>{const n=i.split("|")[1];return n==="metadata"||n==="resource"});return t.length===0?{organisaton:"",name:"",unknown:"",address:"",email:""}:{organisaton:t[0].split("|")[2],name:t[0].split("|")[5],unknown:t[0].split("|")[6],address:t[0].split("|")[7],email:t[0].split("|")[4]}}const zee="/";var rG=(a=>(a.PNG="image/png",a.JPG="image/jpeg",a))(rG||{}),vd=(a=>(a.VALUE="value",a.RANGE="range",a))(vd||{}),U2=(a=>(a.DATEPICKER="datepicker",a.SLIDER="slider",a))(U2||{});function vo(){const a=zl();function e(d,m){try{const f=JSON.parse(d).concat(JSON.parse(m));return new Set(f).size<f.length}catch{return!1}}function t(d){var m;return d.opacity=d.previousOpacity=((m=d.metadata)==null?void 0:m.start_opacity)??1,i(d),d}function i(d){var f,v,w,S,T;d.currentTimeMinValue||(d.currentTimeMinValue=((f=d.time)==null?void 0:f.minDefValue)??((v=d.time)==null?void 0:v.minValue));const m=((w=d.time)==null?void 0:w.mode)===vd.RANGE;!d.currentTimeMaxValue&&m&&(d.currentTimeMaxValue=((S=d.time)==null?void 0:S.maxDefValue)??((T=d.time)==null?void 0:T.maxValue))}function n(d){var v,w;const m=s(d);let f=d.name;return m&&(f=((w=(v=d.metadata)==null?void 0:v.time_layers)==null?void 0:w[m])??f),f}function s(d){return[d.currentTimeMinValue,...d.currentTimeMaxValue?[d.currentTimeMaxValue]:[]].join(zee)}function r(d){var w,S;const m=Ls();if(!((w=d.metadata)!=null&&w.exclusion))return;const f=Zi(),v=f.layers.filter(T=>{var M,G;return e((M=d==null?void 0:d.metadata)==null?void 0:M.exclusion,(G=T==null?void 0:T.metadata)==null?void 0:G.exclusion)});v.length>0&&(f.removeLayers(...v.map(T=>T.id)),m.addNotification(Wa.t("The layer <b>{{layersToRemove}}</b> has been removed because it cannot be displayed while the layer <b>{{layer}}</b> is displayed",{count:v.length,layersToRemove:v.map(T=>Wa.t(T.name,{ns:"client"})).join(", "),layer:Wa.t(d.name,{ns:"client"}),ns:"client"}),on.WARNING)),d.id!==((S=f.bgLayer)==null?void 0:S.id)&&l(d)}function l(d){var v,w,S;const m=Zi(),f=Ls();e((v=d.metadata)==null?void 0:v.exclusion,(S=(w=m.bgLayer)==null?void 0:w.metadata)==null?void 0:S.exclusion)&&(m.setBgLayer(null),f.addNotification(Wa.t("Background has been deactivated because the layer {{layer}} cannot be displayed on top of it.",{layer:Wa.t(d.name,{ns:"client"}),ns:"client"}),on.WARNING))}function u(d,m=!0,f,v){var G;const w=ur(),S=Zi(),T=f?w.layerTrees_3d:w.theme,M=a.findById(d,v?T:void 0);if(M){const P=((G=M.metadata)==null?void 0:G.linked_layers)||[];m===!1?S.removeLayers(M.id,...P):(r(M),(f?S.add3dLayers:S.addLayers)(t(M),...P.map(N=>t(a.findById(parseInt(N,10))))))}}return{initLayer:t,getLayerCurrentLabel:n,getLayerCurrentTime:s,handleExclusionLayers:r,toggleLayer:u}}class ep extends Error{}class Uee extends ep{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Hee extends ep{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class Xee extends ep{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Lg extends ep{}class sG extends ep{constructor(e){super(`Invalid unit ${e}`)}}class zs extends ep{}class gh extends ep{constructor(){super("Zone is an abstract class")}}const aa="numeric",Eu="short",vl="long",Yx={year:aa,month:aa,day:aa},oG={year:aa,month:Eu,day:aa},qee={year:aa,month:Eu,day:aa,weekday:Eu},lG={year:aa,month:vl,day:aa},uG={year:aa,month:vl,day:aa,weekday:vl},cG={hour:aa,minute:aa},dG={hour:aa,minute:aa,second:aa},hG={hour:aa,minute:aa,second:aa,timeZoneName:Eu},_G={hour:aa,minute:aa,second:aa,timeZoneName:vl},mG={hour:aa,minute:aa,hourCycle:"h23"},pG={hour:aa,minute:aa,second:aa,hourCycle:"h23"},gG={hour:aa,minute:aa,second:aa,hourCycle:"h23",timeZoneName:Eu},fG={hour:aa,minute:aa,second:aa,hourCycle:"h23",timeZoneName:vl},yG={year:aa,month:aa,day:aa,hour:aa,minute:aa},bG={year:aa,month:aa,day:aa,hour:aa,minute:aa,second:aa},vG={year:aa,month:Eu,day:aa,hour:aa,minute:aa},xG={year:aa,month:Eu,day:aa,hour:aa,minute:aa,second:aa},Yee={year:aa,month:Eu,day:aa,weekday:Eu,hour:aa,minute:aa},wG={year:aa,month:vl,day:aa,hour:aa,minute:aa,timeZoneName:Eu},IG={year:aa,month:vl,day:aa,hour:aa,minute:aa,second:aa,timeZoneName:Eu},CG={year:aa,month:vl,day:aa,weekday:vl,hour:aa,minute:aa,timeZoneName:vl},SG={year:aa,month:vl,day:aa,weekday:vl,hour:aa,minute:aa,second:aa,timeZoneName:vl};class ab{get type(){throw new gh}get name(){throw new gh}get ianaName(){return this.name}get isUniversal(){throw new gh}offsetName(e,t){throw new gh}formatOffset(e,t){throw new gh}offset(e){throw new gh}equals(e){throw new gh}get isValid(){throw new gh}}let LS=null;class CI extends ab{static get instance(){return LS===null&&(LS=new CI),LS}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return PG(e,t,i)}formatOffset(e,t){return V0(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const vT=new Map;function Kee(a){let e=vT.get(a);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),vT.set(a,e)),e}const jee={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function $ee(a,e){const t=a.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,n,s,r,l,u,d,m]=i;return[r,n,s,l,u,d,m]}function Jee(a,e){const t=a.formatToParts(e),i=[];for(let n=0;n<t.length;n++){const{type:s,value:r}=t[n],l=jee[s];s==="era"?i[l]=r:ti(l)||(i[l]=parseInt(r,10))}return i}const RS=new Map;class Od extends ab{static create(e){let t=RS.get(e);return t===void 0&&RS.set(e,t=new Od(e)),t}static resetCache(){RS.clear(),vT.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Od.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return PG(e,t,i,this.name)}formatOffset(e,t){return V0(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const i=Kee(this.name);let[n,s,r,l,u,d,m]=i.formatToParts?Jee(i,t):$ee(i,t);l==="BC"&&(n=-Math.abs(n)+1);const v=AI({year:n,month:s,day:r,hour:u===24?0:u,minute:d,second:m,millisecond:0});let w=+t;const S=w%1e3;return w-=S>=0?S:1e3+S,(v-w)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let t9={};function Qee(a,e={}){const t=JSON.stringify([a,e]);let i=t9[t];return i||(i=new Intl.ListFormat(a,e),t9[t]=i),i}const xT=new Map;function wT(a,e={}){const t=JSON.stringify([a,e]);let i=xT.get(t);return i===void 0&&(i=new Intl.DateTimeFormat(a,e),xT.set(t,i)),i}const IT=new Map;function ete(a,e={}){const t=JSON.stringify([a,e]);let i=IT.get(t);return i===void 0&&(i=new Intl.NumberFormat(a,e),IT.set(t,i)),i}const CT=new Map;function tte(a,e={}){const{base:t,...i}=e,n=JSON.stringify([a,i]);let s=CT.get(n);return s===void 0&&(s=new Intl.RelativeTimeFormat(a,e),CT.set(n,s)),s}let p0=null;function ate(){return p0||(p0=new Intl.DateTimeFormat().resolvedOptions().locale,p0)}const ST=new Map;function AG(a){let e=ST.get(a);return e===void 0&&(e=new Intl.DateTimeFormat(a).resolvedOptions(),ST.set(a,e)),e}const AT=new Map;function ite(a){let e=AT.get(a);if(!e){const t=new Intl.Locale(a);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...TG,...e}),AT.set(a,e)}return e}function nte(a){const e=a.indexOf("-x-");e!==-1&&(a=a.substring(0,e));const t=a.indexOf("-u-");if(t===-1)return[a];{let i,n;try{i=wT(a).resolvedOptions(),n=a}catch{const u=a.substring(0,t);i=wT(u).resolvedOptions(),n=u}const{numberingSystem:s,calendar:r}=i;return[n,s,r]}}function rte(a,e,t){return(t||e)&&(a.includes("-u-")||(a+="-u"),t&&(a+=`-ca-${t}`),e&&(a+=`-nu-${e}`)),a}function ste(a){const e=[];for(let t=1;t<=12;t++){const i=Qa.utc(2009,t,1);e.push(a(i))}return e}function ote(a){const e=[];for(let t=1;t<=7;t++){const i=Qa.utc(2016,11,13+t);e.push(a(i))}return e}function qv(a,e,t,i){const n=a.listingMode();return n==="error"?null:n==="en"?t(e):i(e)}function lte(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||AG(a.locale).numberingSystem==="latn"}class ute{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:s,...r}=i;if(!t||Object.keys(r).length>0){const l={useGrouping:!1,...i};i.padTo>0&&(l.minimumIntegerDigits=i.padTo),this.inf=ete(e,l)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):i3(e,3);return Dr(t,this.padTo)}}}class cte{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const r=-1*(e.offset/60),l=r>=0?`Etc/GMT+${r}`:`Etc/GMT${r}`;e.offset!==0&&Od.create(l).valid?(n=l,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=wT(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class dte{constructor(e,t,i){this.opts={style:"long",...i},!t&&GG()&&(this.rtf=tte(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):Wte(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const TG={firstDay:1,minimalDays:4,weekend:[6,7]};class hn{static fromOpts(e){return hn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,i,n,s=!1){const r=e||br.defaultLocale,l=r||(s?"en-US":ate()),u=t||br.defaultNumberingSystem,d=i||br.defaultOutputCalendar,m=ET(n)||br.defaultWeekSettings;return new hn(l,u,d,m,r)}static resetCache(){p0=null,xT.clear(),IT.clear(),CT.clear(),ST.clear(),AT.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:i,weekSettings:n}={}){return hn.create(e,t,i,n)}constructor(e,t,i,n,s){const[r,l,u]=nte(e);this.locale=r,this.numberingSystem=t||l||null,this.outputCalendar=i||u||null,this.weekSettings=n,this.intl=rte(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=lte(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:hn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,ET(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return qv(this,e,FG,()=>{const i=t?{month:e,day:"numeric"}:{month:e},n=t?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=ste(s=>this.extract(s,i,"month"))),this.monthsCache[n][e]})}weekdays(e,t=!1){return qv(this,e,ZG,()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=t?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=ote(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return qv(this,void 0,()=>zG,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Qa.utc(2016,11,13,9),Qa.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return qv(this,e,UG,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Qa.utc(-40,1,1),Qa.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){const n=this.dtFormatter(e,t),s=n.formatToParts(),r=s.find(l=>l.type.toLowerCase()===i);return r?r.value:null}numberFormatter(e={}){return new ute(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new cte(e,this.intl,t)}relFormatter(e={}){return new dte(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Qee(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||AG(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:OG()?ite(this.locale):TG}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let kS=null;class bo extends ab{static get utcInstance(){return kS===null&&(kS=new bo(0)),kS}static instance(e){return e===0?bo.utcInstance:new bo(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new bo(TI(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${V0(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${V0(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return V0(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class hte extends ab{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Wh(a,e){if(ti(a)||a===null)return e;if(a instanceof ab)return a;if(yte(a)){const t=a.toLowerCase();return t==="default"?e:t==="local"||t==="system"?CI.instance:t==="utc"||t==="gmt"?bo.utcInstance:bo.parseSpecifier(t)||Od.create(a)}else return Hh(a)?bo.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new hte(a)}const Q5={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},a9={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},_te=Q5.hanidec.replace(/[\[|\]]/g,"").split("");function mte(a){let e=parseInt(a,10);if(isNaN(e)){e="";for(let t=0;t<a.length;t++){const i=a.charCodeAt(t);if(a[t].search(Q5.hanidec)!==-1)e+=_te.indexOf(a[t]);else for(const n in a9){const[s,r]=a9[n];i>=s&&i<=r&&(e+=i-s)}}return parseInt(e,10)}else return e}const TT=new Map;function pte(){TT.clear()}function ou({numberingSystem:a},e=""){const t=a||"latn";let i=TT.get(t);i===void 0&&(i=new Map,TT.set(t,i));let n=i.get(e);return n===void 0&&(n=new RegExp(`${Q5[t]}${e}`),i.set(e,n)),n}let i9=()=>Date.now(),n9="system",r9=null,s9=null,o9=null,l9=60,u9,c9=null;class br{static get now(){return i9}static set now(e){i9=e}static set defaultZone(e){n9=e}static get defaultZone(){return Wh(n9,CI.instance)}static get defaultLocale(){return r9}static set defaultLocale(e){r9=e}static get defaultNumberingSystem(){return s9}static set defaultNumberingSystem(e){s9=e}static get defaultOutputCalendar(){return o9}static set defaultOutputCalendar(e){o9=e}static get defaultWeekSettings(){return c9}static set defaultWeekSettings(e){c9=ET(e)}static get twoDigitCutoffYear(){return l9}static set twoDigitCutoffYear(e){l9=e%100}static get throwOnInvalid(){return u9}static set throwOnInvalid(e){u9=e}static resetCaches(){hn.resetCache(),Od.resetCache(),Qa.resetCache(),pte()}}class gu{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const EG=[0,31,59,90,120,151,181,212,243,273,304,334],MG=[0,31,60,91,121,152,182,213,244,274,305,335];function Nl(a,e){return new gu("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${a}, which is invalid`)}function e3(a,e,t){const i=new Date(Date.UTC(a,e-1,t));a<100&&a>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function LG(a,e,t){return t+(ib(a)?MG:EG)[e-1]}function RG(a,e){const t=ib(a)?MG:EG,i=t.findIndex(s=>s<e),n=e-t[i];return{month:i+1,day:n}}function t3(a,e){return(a-e+7)%7+1}function Kx(a,e=4,t=1){const{year:i,month:n,day:s}=a,r=LG(i,n,s),l=t3(e3(i,n,s),t);let u=Math.floor((r-l+14-e)/7),d;return u<1?(d=i-1,u=T1(d,e,t)):u>T1(i,e,t)?(d=i+1,u=1):d=i,{weekYear:d,weekNumber:u,weekday:l,...EI(a)}}function d9(a,e=4,t=1){const{weekYear:i,weekNumber:n,weekday:s}=a,r=t3(e3(i,1,e),t),l=qg(i);let u=n*7+s-r-7+e,d;u<1?(d=i-1,u+=qg(d)):u>l?(d=i+1,u-=qg(i)):d=i;const{month:m,day:f}=RG(d,u);return{year:d,month:m,day:f,...EI(a)}}function WS(a){const{year:e,month:t,day:i}=a,n=LG(e,t,i);return{year:e,ordinal:n,...EI(a)}}function h9(a){const{year:e,ordinal:t}=a,{month:i,day:n}=RG(e,t);return{year:e,month:i,day:n,...EI(a)}}function _9(a,e){if(!ti(a.localWeekday)||!ti(a.localWeekNumber)||!ti(a.localWeekYear)){if(!ti(a.weekday)||!ti(a.weekNumber)||!ti(a.weekYear))throw new Lg("Cannot mix locale-based week fields with ISO-based week fields");return ti(a.localWeekday)||(a.weekday=a.localWeekday),ti(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),ti(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function gte(a,e=4,t=1){const i=SI(a.weekYear),n=Fl(a.weekNumber,1,T1(a.weekYear,e,t)),s=Fl(a.weekday,1,7);return i?n?s?!1:Nl("weekday",a.weekday):Nl("week",a.weekNumber):Nl("weekYear",a.weekYear)}function fte(a){const e=SI(a.year),t=Fl(a.ordinal,1,qg(a.year));return e?t?!1:Nl("ordinal",a.ordinal):Nl("year",a.year)}function kG(a){const e=SI(a.year),t=Fl(a.month,1,12),i=Fl(a.day,1,jx(a.year,a.month));return e?t?i?!1:Nl("day",a.day):Nl("month",a.month):Nl("year",a.year)}function WG(a){const{hour:e,minute:t,second:i,millisecond:n}=a,s=Fl(e,0,23)||e===24&&t===0&&i===0&&n===0,r=Fl(t,0,59),l=Fl(i,0,59),u=Fl(n,0,999);return s?r?l?u?!1:Nl("millisecond",n):Nl("second",i):Nl("minute",t):Nl("hour",e)}function ti(a){return typeof a>"u"}function Hh(a){return typeof a=="number"}function SI(a){return typeof a=="number"&&a%1===0}function yte(a){return typeof a=="string"}function bte(a){return Object.prototype.toString.call(a)==="[object Date]"}function GG(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function OG(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function vte(a){return Array.isArray(a)?a:[a]}function m9(a,e,t){if(a.length!==0)return a.reduce((i,n)=>{const s=[e(n),n];return i&&t(i[0],s[0])===i[0]?i:s},null)[1]}function xte(a,e){return e.reduce((t,i)=>(t[i]=a[i],t),{})}function gf(a,e){return Object.prototype.hasOwnProperty.call(a,e)}function ET(a){if(a==null)return null;if(typeof a!="object")throw new zs("Week settings must be an object");if(!Fl(a.firstDay,1,7)||!Fl(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(e=>!Fl(e,1,7)))throw new zs("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function Fl(a,e,t){return SI(a)&&a>=e&&a<=t}function wte(a,e){return a-e*Math.floor(a/e)}function Dr(a,e=2){const t=a<0;let i;return t?i="-"+(""+-a).padStart(e,"0"):i=(""+a).padStart(e,"0"),i}function Th(a){if(!(ti(a)||a===null||a===""))return parseInt(a,10)}function j_(a){if(!(ti(a)||a===null||a===""))return parseFloat(a)}function a3(a){if(!(ti(a)||a===null||a==="")){const e=parseFloat("0."+a)*1e3;return Math.floor(e)}}function i3(a,e,t=!1){const i=10**e;return(t?Math.trunc:Math.round)(a*i)/i}function ib(a){return a%4===0&&(a%100!==0||a%400===0)}function qg(a){return ib(a)?366:365}function jx(a,e){const t=wte(e-1,12)+1,i=a+(e-t)/12;return t===2?ib(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function AI(a){let e=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(e=new Date(e),e.setUTCFullYear(a.year,a.month-1,a.day)),+e}function p9(a,e,t){return-t3(e3(a,1,e),t)+e-1}function T1(a,e=4,t=1){const i=p9(a,e,t),n=p9(a+1,e,t);return(qg(a)-i+n)/7}function MT(a){return a>99?a:a>br.twoDigitCutoffYear?1900+a:2e3+a}function PG(a,e,t,i=null){const n=new Date(a),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const r={timeZoneName:e,...s},l=new Intl.DateTimeFormat(t,r).formatToParts(n).find(u=>u.type.toLowerCase()==="timezonename");return l?l.value:null}function TI(a,e){let t=parseInt(a,10);Number.isNaN(t)&&(t=0);const i=parseInt(e,10)||0,n=t<0||Object.is(t,-0)?-i:i;return t*60+n}function BG(a){const e=Number(a);if(typeof a=="boolean"||a===""||Number.isNaN(e))throw new zs(`Invalid unit value ${a}`);return e}function $x(a,e){const t={};for(const i in a)if(gf(a,i)){const n=a[i];if(n==null)continue;t[e(i)]=BG(n)}return t}function V0(a,e){const t=Math.trunc(Math.abs(a/60)),i=Math.trunc(Math.abs(a%60)),n=a>=0?"+":"-";switch(e){case"short":return`${n}${Dr(t,2)}:${Dr(i,2)}`;case"narrow":return`${n}${t}${i>0?`:${i}`:""}`;case"techie":return`${n}${Dr(t,2)}${Dr(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function EI(a){return xte(a,["hour","minute","second","millisecond"])}const Ite=["January","February","March","April","May","June","July","August","September","October","November","December"],NG=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Cte=["J","F","M","A","M","J","J","A","S","O","N","D"];function FG(a){switch(a){case"narrow":return[...Cte];case"short":return[...NG];case"long":return[...Ite];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const DG=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],VG=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ste=["M","T","W","T","F","S","S"];function ZG(a){switch(a){case"narrow":return[...Ste];case"short":return[...VG];case"long":return[...DG];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const zG=["AM","PM"],Ate=["Before Christ","Anno Domini"],Tte=["BC","AD"],Ete=["B","A"];function UG(a){switch(a){case"narrow":return[...Ete];case"short":return[...Tte];case"long":return[...Ate];default:return null}}function Mte(a){return zG[a.hour<12?0:1]}function Lte(a,e){return ZG(e)[a.weekday-1]}function Rte(a,e){return FG(e)[a.month-1]}function kte(a,e){return UG(e)[a.year<0?0:1]}function Wte(a,e,t="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(a)===-1;if(t==="auto"&&s){const f=a==="days";switch(e){case 1:return f?"tomorrow":`next ${n[a][0]}`;case-1:return f?"yesterday":`last ${n[a][0]}`;case 0:return f?"today":`this ${n[a][0]}`}}const r=Object.is(e,-0)||e<0,l=Math.abs(e),u=l===1,d=n[a],m=i?u?d[1]:d[2]||d[1]:u?n[a][0]:a;return r?`${l} ${m} ago`:`in ${l} ${m}`}function g9(a,e){let t="";for(const i of a)i.literal?t+=i.val:t+=e(i.val);return t}const Gte={D:Yx,DD:oG,DDD:lG,DDDD:uG,t:cG,tt:dG,ttt:hG,tttt:_G,T:mG,TT:pG,TTT:gG,TTTT:fG,f:yG,ff:vG,fff:wG,ffff:CG,F:bG,FF:xG,FFF:IG,FFFF:SG};class qs{static create(e,t={}){return new qs(e,t)}static parseFormat(e){let t=null,i="",n=!1;const s=[];for(let r=0;r<e.length;r++){const l=e.charAt(r);l==="'"?(i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),t=null,i="",n=!n):n||l===t?i+=l:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=l,t=l)}return i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(e){return Gte[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Dr(e,t);const i={...this.opts};return t>0&&(i.padTo=t),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(w,S)=>this.loc.extract(e,w,S),r=w=>e.isOffsetFixed&&e.offset===0&&w.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,w.format):"",l=()=>i?Mte(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(w,S)=>i?Rte(e,w):s(S?{month:w}:{month:w,day:"numeric"},"month"),d=(w,S)=>i?Lte(e,w):s(S?{weekday:w}:{weekday:w,month:"long",day:"numeric"},"weekday"),m=w=>{const S=qs.macroTokenToFormatOpts(w);return S?this.formatWithSystemDefault(e,S):w},f=w=>i?kte(e,w):s({era:w},"era"),v=w=>{switch(w){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return m(w)}};return g9(qs.parseFormat(t),v)}formatDurationFromString(e,t){const i=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=u=>d=>{const m=i(d);return m?this.num(u.get(m),d.length):d},s=qs.parseFormat(t),r=s.reduce((u,{literal:d,val:m})=>d?u:u.concat(m),[]),l=e.shiftTo(...r.map(i).filter(u=>u));return g9(s,n(l))}}const HG=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Gf(...a){const e=a.reduce((t,i)=>t+i.source,"");return RegExp(`^${e}$`)}function Of(...a){return e=>a.reduce(([t,i,n],s)=>{const[r,l,u]=s(e,n);return[{...t,...r},l||i,u]},[{},null,1]).slice(0,2)}function Pf(a,...e){if(a==null)return[null,null];for(const[t,i]of e){const n=t.exec(a);if(n)return i(n)}return[null,null]}function XG(...a){return(e,t)=>{const i={};let n;for(n=0;n<a.length;n++)i[a[n]]=Th(e[t+n]);return[i,null,t+n]}}const qG=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ote=`(?:${qG.source}?(?:\\[(${HG.source})\\])?)?`,n3=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,YG=RegExp(`${n3.source}${Ote}`),r3=RegExp(`(?:T${YG.source})?`),Pte=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Bte=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Nte=/(\d{4})-?(\d{3})/,Fte=XG("weekYear","weekNumber","weekDay"),Dte=XG("year","ordinal"),Vte=/(\d{4})-(\d\d)-(\d\d)/,KG=RegExp(`${n3.source} ?(?:${qG.source}|(${HG.source}))?`),Zte=RegExp(`(?: ${KG.source})?`);function Yg(a,e,t){const i=a[e];return ti(i)?t:Th(i)}function zte(a,e){return[{year:Yg(a,e),month:Yg(a,e+1,1),day:Yg(a,e+2,1)},null,e+3]}function Bf(a,e){return[{hours:Yg(a,e,0),minutes:Yg(a,e+1,0),seconds:Yg(a,e+2,0),milliseconds:a3(a[e+3])},null,e+4]}function nb(a,e){const t=!a[e]&&!a[e+1],i=TI(a[e+1],a[e+2]),n=t?null:bo.instance(i);return[{},n,e+3]}function rb(a,e){const t=a[e]?Od.create(a[e]):null;return[{},t,e+1]}const Ute=RegExp(`^T?${n3.source}$`),Hte=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Xte(a){const[e,t,i,n,s,r,l,u,d]=a,m=e[0]==="-",f=u&&u[0]==="-",v=(w,S=!1)=>w!==void 0&&(S||w&&m)?-w:w;return[{years:v(j_(t)),months:v(j_(i)),weeks:v(j_(n)),days:v(j_(s)),hours:v(j_(r)),minutes:v(j_(l)),seconds:v(j_(u),u==="-0"),milliseconds:v(a3(d),f)}]}const qte={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function s3(a,e,t,i,n,s,r){const l={year:e.length===2?MT(Th(e)):Th(e),month:NG.indexOf(t)+1,day:Th(i),hour:Th(n),minute:Th(s)};return r&&(l.second=Th(r)),a&&(l.weekday=a.length>3?DG.indexOf(a)+1:VG.indexOf(a)+1),l}const Yte=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Kte(a){const[,e,t,i,n,s,r,l,u,d,m,f]=a,v=s3(e,n,i,t,s,r,l);let w;return u?w=qte[u]:d?w=0:w=TI(m,f),[v,new bo(w)]}function jte(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const $te=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Jte=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Qte=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function f9(a){const[,e,t,i,n,s,r,l]=a;return[s3(e,n,i,t,s,r,l),bo.utcInstance]}function eae(a){const[,e,t,i,n,s,r,l]=a;return[s3(e,l,t,i,n,s,r),bo.utcInstance]}const tae=Gf(Pte,r3),aae=Gf(Bte,r3),iae=Gf(Nte,r3),nae=Gf(YG),jG=Of(zte,Bf,nb,rb),rae=Of(Fte,Bf,nb,rb),sae=Of(Dte,Bf,nb,rb),oae=Of(Bf,nb,rb);function lae(a){return Pf(a,[tae,jG],[aae,rae],[iae,sae],[nae,oae])}function uae(a){return Pf(jte(a),[Yte,Kte])}function cae(a){return Pf(a,[$te,f9],[Jte,f9],[Qte,eae])}function dae(a){return Pf(a,[Hte,Xte])}const hae=Of(Bf);function _ae(a){return Pf(a,[Ute,hae])}const mae=Gf(Vte,Zte),pae=Gf(KG),gae=Of(Bf,nb,rb);function fae(a){return Pf(a,[mae,jG],[pae,gae])}const y9="Invalid Duration",$G={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},yae={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...$G},kl=146097/400,rg=146097/4800,bae={years:{quarters:4,months:12,weeks:kl/7,days:kl,hours:kl*24,minutes:kl*24*60,seconds:kl*24*60*60,milliseconds:kl*24*60*60*1e3},quarters:{months:3,weeks:kl/28,days:kl/4,hours:kl*24/4,minutes:kl*24*60/4,seconds:kl*24*60*60/4,milliseconds:kl*24*60*60*1e3/4},months:{weeks:rg/7,days:rg,hours:rg*24,minutes:rg*24*60,seconds:rg*24*60*60,milliseconds:rg*24*60*60*1e3},...$G},_m=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],vae=_m.slice(0).reverse();function fh(a,e,t=!1){const i={values:t?e.values:{...a.values,...e.values||{}},loc:a.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||a.conversionAccuracy,matrix:e.matrix||a.matrix};return new qi(i)}function JG(a,e){let t=e.milliseconds??0;for(const i of vae.slice(1))e[i]&&(t+=e[i]*a[i].milliseconds);return t}function b9(a,e){const t=JG(a,e)<0?-1:1;_m.reduceRight((i,n)=>{if(ti(e[n]))return i;if(i){const s=e[i]*t,r=a[n][i],l=Math.floor(s/r);e[n]+=l*t,e[i]-=l*r*t}return n},null),_m.reduce((i,n)=>{if(ti(e[n]))return i;if(i){const s=e[i]%1;e[i]-=s,e[n]+=s*a[i][n]}return n},null)}function xae(a){const e={};for(const[t,i]of Object.entries(a))i!==0&&(e[t]=i);return e}class qi{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let i=t?bae:yae;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||hn.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return qi.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new zs(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new qi({values:$x(e,qi.normalizeUnit),loc:hn.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Hh(e))return qi.fromMillis(e);if(qi.isDuration(e))return e;if(typeof e=="object")return qi.fromObject(e);throw new zs(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=dae(e);return i?qi.fromObject(i,t):qi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=_ae(e);return i?qi.fromObject(i,t):qi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new zs("need to specify a reason the Duration is invalid");const i=e instanceof gu?e:new gu(e,t);if(br.throwOnInvalid)throw new Xee(i);return new qi({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new sG(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?qs.create(this.loc,i).formatDurationFromString(this,e):y9}toHuman(e={}){if(!this.isValid)return y9;const t=_m.map(i=>{const n=this.values[i];return ti(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=i3(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Qa.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?JG(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=qi.fromDurationLike(e),i={};for(const n of _m)(gf(t.values,n)||gf(this.values,n))&&(i[n]=t.get(n)+this.get(n));return fh(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=qi.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=BG(e(this.values[i],i));return fh(this,{values:t},!0)}get(e){return this[qi.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...$x(e,qi.normalizeUnit)};return fh(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:n}={}){const r={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:n,conversionAccuracy:i};return fh(this,r)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return b9(this.matrix,e),fh(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=xae(this.normalize().shiftToAll().toObject());return fh(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(r=>qi.normalizeUnit(r));const t={},i={},n=this.toObject();let s;for(const r of _m)if(e.indexOf(r)>=0){s=r;let l=0;for(const d in i)l+=this.matrix[d][r]*i[d],i[d]=0;Hh(n[r])&&(l+=n[r]);const u=Math.trunc(l);t[r]=u,i[r]=(l*1e3-u*1e3)/1e3}else Hh(n[r])&&(i[r]=n[r]);for(const r in i)i[r]!==0&&(t[s]+=r===s?i[r]:i[r]/this.matrix[s][r]);return b9(this.matrix,t),fh(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return fh(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of _m)if(!t(this.values[i],e.values[i]))return!1;return!0}}const sg="Invalid Interval";function wae(a,e){return!a||!a.isValid?yr.invalid("missing or invalid start"):!e||!e.isValid?yr.invalid("missing or invalid end"):e<a?yr.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${e.toISO()}`):null}class yr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new zs("need to specify a reason the Interval is invalid");const i=e instanceof gu?e:new gu(e,t);if(br.throwOnInvalid)throw new Hee(i);return new yr({invalid:i})}static fromDateTimes(e,t){const i=$y(e),n=$y(t),s=wae(i,n);return s??new yr({start:i,end:n})}static after(e,t){const i=qi.fromDurationLike(t),n=$y(e);return yr.fromDateTimes(n,n.plus(i))}static before(e,t){const i=qi.fromDurationLike(t),n=$y(e);return yr.fromDateTimes(n.minus(i),n)}static fromISO(e,t){const[i,n]=(e||"").split("/",2);if(i&&n){let s,r;try{s=Qa.fromISO(i,t),r=s.isValid}catch{r=!1}let l,u;try{l=Qa.fromISO(n,t),u=l.isValid}catch{u=!1}if(r&&u)return yr.fromDateTimes(s,l);if(r){const d=qi.fromISO(n,t);if(d.isValid)return yr.after(s,d)}else if(u){const d=qi.fromISO(i,t);if(d.isValid)return yr.before(l,d)}}return yr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const i=this.start.startOf(e,t);let n;return t!=null&&t.useLocaleWeeks?n=this.end.reconfigure({locale:i.locale}):n=this.end,n=n.startOf(e,t),Math.floor(n.diff(i,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?yr.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map($y).filter(r=>this.contains(r)).sort((r,l)=>r.toMillis()-l.toMillis()),i=[];let{s:n}=this,s=0;for(;n<this.e;){const r=t[s]||this.e,l=+r>+this.e?this.e:r;i.push(yr.fromDateTimes(n,l)),n=l,s+=1}return i}splitBy(e){const t=qi.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const r=[];for(;i<this.e;){const l=this.start.plus(t.mapUnits(u=>u*n));s=+l>+this.e?this.e:l,r.push(yr.fromDateTimes(i,s)),i=s,n+=1}return r}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:yr.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return yr.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],r)=>s?s.overlaps(r)||s.abutsStart(r)?[n,s.union(r)]:[n.concat([s]),r]:[n,r],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const n=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),r=Array.prototype.concat(...s),l=r.sort((u,d)=>u.time-d.time);for(const u of l)i+=u.type==="s"?1:-1,i===1?t=u.time:(t&&+t!=+u.time&&n.push(yr.fromDateTimes(t,u.time)),t=null);return yr.merge(n)}difference(...e){return yr.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:sg}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Yx,t={}){return this.isValid?qs.create(this.s.loc.clone(t),e).formatInterval(this):sg}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:sg}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:sg}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:sg}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:sg}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):qi.invalid(this.invalidReason)}mapEndpoints(e){return yr.fromDateTimes(e(this.s),e(this.e))}}class Yv{static hasDST(e=br.defaultZone){const t=Qa.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Od.isValidZone(e)}static normalizeZone(e){return Wh(e,br.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||hn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||hn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||hn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||hn.create(t,i,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||hn.create(t,i,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:n=null}={}){return(n||hn.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:n=null}={}){return(n||hn.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return hn.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return hn.create(t,null,"gregory").eras(e)}static features(){return{relative:GG(),localeWeek:OG()}}}function v9(a,e){const t=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(a);return Math.floor(qi.fromMillis(i).as("days"))}function Iae(a,e,t){const i=[["years",(u,d)=>d.year-u.year],["quarters",(u,d)=>d.quarter-u.quarter+(d.year-u.year)*4],["months",(u,d)=>d.month-u.month+(d.year-u.year)*12],["weeks",(u,d)=>{const m=v9(u,d);return(m-m%7)/7}],["days",v9]],n={},s=a;let r,l;for(const[u,d]of i)t.indexOf(u)>=0&&(r=u,n[u]=d(a,e),l=s.plus(n),l>e?(n[u]--,a=s.plus(n),a>e&&(l=a,n[u]--,a=s.plus(n))):a=l);return[a,n,l,r]}function Cae(a,e,t,i){let[n,s,r,l]=Iae(a,e,t);const u=e-n,d=t.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);d.length===0&&(r<e&&(r=n.plus({[l]:1})),r!==n&&(s[l]=(s[l]||0)+u/(r-n)));const m=qi.fromObject(s,i);return d.length>0?qi.fromMillis(u,i).shiftTo(...d).plus(m):m}const Sae="missing Intl.DateTimeFormat.formatToParts support";function nn(a,e=t=>t){return{regex:a,deser:([t])=>e(mte(t))}}const Aae=String.fromCharCode(160),QG=`[ ${Aae}]`,eO=new RegExp(QG,"g");function Tae(a){return a.replace(/\./g,"\\.?").replace(eO,QG)}function x9(a){return a.replace(/\./g,"").replace(eO," ").toLowerCase()}function lu(a,e){return a===null?null:{regex:RegExp(a.map(Tae).join("|")),deser:([t])=>a.findIndex(i=>x9(t)===x9(i))+e}}function w9(a,e){return{regex:a,deser:([,t,i])=>TI(t,i),groups:e}}function Kv(a){return{regex:a,deser:([e])=>e}}function Eae(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Mae(a,e){const t=ou(e),i=ou(e,"{2}"),n=ou(e,"{3}"),s=ou(e,"{4}"),r=ou(e,"{6}"),l=ou(e,"{1,2}"),u=ou(e,"{1,3}"),d=ou(e,"{1,6}"),m=ou(e,"{1,9}"),f=ou(e,"{2,4}"),v=ou(e,"{4,6}"),w=M=>({regex:RegExp(Eae(M.val)),deser:([G])=>G,literal:!0}),T=(M=>{if(a.literal)return w(M);switch(M.val){case"G":return lu(e.eras("short"),0);case"GG":return lu(e.eras("long"),0);case"y":return nn(d);case"yy":return nn(f,MT);case"yyyy":return nn(s);case"yyyyy":return nn(v);case"yyyyyy":return nn(r);case"M":return nn(l);case"MM":return nn(i);case"MMM":return lu(e.months("short",!0),1);case"MMMM":return lu(e.months("long",!0),1);case"L":return nn(l);case"LL":return nn(i);case"LLL":return lu(e.months("short",!1),1);case"LLLL":return lu(e.months("long",!1),1);case"d":return nn(l);case"dd":return nn(i);case"o":return nn(u);case"ooo":return nn(n);case"HH":return nn(i);case"H":return nn(l);case"hh":return nn(i);case"h":return nn(l);case"mm":return nn(i);case"m":return nn(l);case"q":return nn(l);case"qq":return nn(i);case"s":return nn(l);case"ss":return nn(i);case"S":return nn(u);case"SSS":return nn(n);case"u":return Kv(m);case"uu":return Kv(l);case"uuu":return nn(t);case"a":return lu(e.meridiems(),0);case"kkkk":return nn(s);case"kk":return nn(f,MT);case"W":return nn(l);case"WW":return nn(i);case"E":case"c":return nn(t);case"EEE":return lu(e.weekdays("short",!1),1);case"EEEE":return lu(e.weekdays("long",!1),1);case"ccc":return lu(e.weekdays("short",!0),1);case"cccc":return lu(e.weekdays("long",!0),1);case"Z":case"ZZ":return w9(new RegExp(`([+-]${l.source})(?::(${i.source}))?`),2);case"ZZZ":return w9(new RegExp(`([+-]${l.source})(${i.source})?`),2);case"z":return Kv(/[a-z_+-/]{1,256}?/i);case" ":return Kv(/[^\S\n\r]/);default:return w(M)}})(a)||{invalidReason:Sae};return T.token=a,T}const Lae={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Rae(a,e,t){const{type:i,value:n}=a;if(i==="literal"){const u=/^\s+$/.test(n);return{literal:!u,val:u?" ":n}}const s=e[i];let r=i;i==="hour"&&(e.hour12!=null?r=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?r="hour12":r="hour24":r=t.hour12?"hour12":"hour24");let l=Lae[r];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function kae(a){return[`^${a.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,a]}function Wae(a,e,t){const i=a.match(e);if(i){const n={};let s=1;for(const r in t)if(gf(t,r)){const l=t[r],u=l.groups?l.groups+1:1;!l.literal&&l.token&&(n[l.token.val[0]]=l.deser(i.slice(s,s+u))),s+=u}return[i,n]}else return[i,{}]}function Gae(a){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,i;return ti(a.z)||(t=Od.create(a.z)),ti(a.Z)||(t||(t=new bo(a.Z)),i=a.Z),ti(a.q)||(a.M=(a.q-1)*3+1),ti(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),ti(a.u)||(a.S=a3(a.u)),[Object.keys(a).reduce((s,r)=>{const l=e(r);return l&&(s[l]=a[r]),s},{}),t,i]}let GS=null;function Oae(){return GS||(GS=Qa.fromMillis(1555555555555)),GS}function Pae(a,e){if(a.literal)return a;const t=qs.macroTokenToFormatOpts(a.val),i=nO(t,e);return i==null||i.includes(void 0)?a:i}function tO(a,e){return Array.prototype.concat(...a.map(t=>Pae(t,e)))}class aO{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=tO(qs.parseFormat(t),e),this.units=this.tokens.map(i=>Mae(i,e)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,n]=kae(this.units);this.regex=RegExp(i,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[t,i]=Wae(e,this.regex,this.handlers),[n,s,r]=i?Gae(i):[null,null,void 0];if(gf(i,"a")&&gf(i,"H"))throw new Lg("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:i,result:n,zone:s,specificOffset:r}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function iO(a,e,t){return new aO(a,t).explainFromTokens(e)}function Bae(a,e,t){const{result:i,zone:n,specificOffset:s,invalidReason:r}=iO(a,e,t);return[i,n,s,r]}function nO(a,e){if(!a)return null;const i=qs.create(e,a).dtFormatter(Oae()),n=i.formatToParts(),s=i.resolvedOptions();return n.map(r=>Rae(r,a,s))}const OS="Invalid DateTime",I9=864e13;function g0(a){return new gu("unsupported zone",`the zone "${a.name}" is not supported`)}function PS(a){return a.weekData===null&&(a.weekData=Kx(a.c)),a.weekData}function BS(a){return a.localWeekData===null&&(a.localWeekData=Kx(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function $_(a,e){const t={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Qa({...t,...e,old:t})}function rO(a,e,t){let i=a-e*60*1e3;const n=t.offset(i);if(e===n)return[i,e];i-=(n-e)*60*1e3;const s=t.offset(i);return n===s?[i,n]:[a-Math.min(n,s)*60*1e3,Math.max(n,s)]}function jv(a,e){a+=e*60*1e3;const t=new Date(a);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function H2(a,e,t){return rO(AI(a),e,t)}function C9(a,e){const t=a.o,i=a.c.year+Math.trunc(e.years),n=a.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...a.c,year:i,month:n,day:Math.min(a.c.day,jx(i,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},r=qi.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=AI(s);let[u,d]=rO(l,t,a.zone);return r!==0&&(u+=r,d=a.zone.offset(u)),{ts:u,o:d}}function og(a,e,t,i,n,s){const{setZone:r,zone:l}=t;if(a&&Object.keys(a).length!==0||e){const u=e||l,d=Qa.fromObject(a,{...t,zone:u,specificOffset:s});return r?d:d.setZone(l)}else return Qa.invalid(new gu("unparsable",`the input "${n}" can't be parsed as ${i}`))}function $v(a,e,t=!0){return a.isValid?qs.create(hn.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(a,e):null}function NS(a,e){const t=a.c.year>9999||a.c.year<0;let i="";return t&&a.c.year>=0&&(i+="+"),i+=Dr(a.c.year,t?6:4),e?(i+="-",i+=Dr(a.c.month),i+="-",i+=Dr(a.c.day)):(i+=Dr(a.c.month),i+=Dr(a.c.day)),i}function S9(a,e,t,i,n,s){let r=Dr(a.c.hour);return e?(r+=":",r+=Dr(a.c.minute),(a.c.millisecond!==0||a.c.second!==0||!t)&&(r+=":")):r+=Dr(a.c.minute),(a.c.millisecond!==0||a.c.second!==0||!t)&&(r+=Dr(a.c.second),(a.c.millisecond!==0||!i)&&(r+=".",r+=Dr(a.c.millisecond,3))),n&&(a.isOffsetFixed&&a.offset===0&&!s?r+="Z":a.o<0?(r+="-",r+=Dr(Math.trunc(-a.o/60)),r+=":",r+=Dr(Math.trunc(-a.o%60))):(r+="+",r+=Dr(Math.trunc(a.o/60)),r+=":",r+=Dr(Math.trunc(a.o%60)))),s&&(r+="["+a.zone.ianaName+"]"),r}const sO={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Nae={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Fae={ordinal:1,hour:0,minute:0,second:0,millisecond:0},oO=["year","month","day","hour","minute","second","millisecond"],Dae=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Vae=["year","ordinal","hour","minute","second","millisecond"];function Zae(a){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!e)throw new sG(a);return e}function A9(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Zae(a)}}function zae(a){if(f0===void 0&&(f0=br.now()),a.type!=="iana")return a.offset(f0);const e=a.name;let t=LT.get(e);return t===void 0&&(t=a.offset(f0),LT.set(e,t)),t}function T9(a,e){const t=Wh(e.zone,br.defaultZone);if(!t.isValid)return Qa.invalid(g0(t));const i=hn.fromObject(e);let n,s;if(ti(a.year))n=br.now();else{for(const u of oO)ti(a[u])&&(a[u]=sO[u]);const r=kG(a)||WG(a);if(r)return Qa.invalid(r);const l=zae(t);[n,s]=H2(a,l,t)}return new Qa({ts:n,zone:t,loc:i,o:s})}function E9(a,e,t){const i=ti(t.round)?!0:t.round,n=(r,l)=>(r=i3(r,i||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(r,l)),s=r=>t.calendary?e.hasSame(a,r)?0:e.startOf(r).diff(a.startOf(r),r).get(r):e.diff(a,r).get(r);if(t.unit)return n(s(t.unit),t.unit);for(const r of t.units){const l=s(r);if(Math.abs(l)>=1)return n(l,r)}return n(a>e?-0:0,t.units[t.units.length-1])}function M9(a){let e={},t;return a.length>0&&typeof a[a.length-1]=="object"?(e=a[a.length-1],t=Array.from(a).slice(0,a.length-1)):t=Array.from(a),[e,t]}let f0;const LT=new Map;class Qa{constructor(e){const t=e.zone||br.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new gu("invalid input"):null)||(t.isValid?null:g0(t));this.ts=ti(e.ts)?br.now():e.ts;let n=null,s=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[n,s]=[e.old.c,e.old.o];else{const l=Hh(e.o)&&!e.old?e.o:t.offset(this.ts);n=jv(this.ts,l),i=Number.isNaN(n.year)?new gu("invalid input"):null,n=i?null:n,s=i?null:l}this._zone=t,this.loc=e.loc||hn.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new Qa({})}static local(){const[e,t]=M9(arguments),[i,n,s,r,l,u,d]=t;return T9({year:i,month:n,day:s,hour:r,minute:l,second:u,millisecond:d},e)}static utc(){const[e,t]=M9(arguments),[i,n,s,r,l,u,d]=t;return e.zone=bo.utcInstance,T9({year:i,month:n,day:s,hour:r,minute:l,second:u,millisecond:d},e)}static fromJSDate(e,t={}){const i=bte(e)?e.valueOf():NaN;if(Number.isNaN(i))return Qa.invalid("invalid input");const n=Wh(t.zone,br.defaultZone);return n.isValid?new Qa({ts:i,zone:n,loc:hn.fromObject(t)}):Qa.invalid(g0(n))}static fromMillis(e,t={}){if(Hh(e))return e<-I9||e>I9?Qa.invalid("Timestamp out of range"):new Qa({ts:e,zone:Wh(t.zone,br.defaultZone),loc:hn.fromObject(t)});throw new zs(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Hh(e))return new Qa({ts:e*1e3,zone:Wh(t.zone,br.defaultZone),loc:hn.fromObject(t)});throw new zs("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=Wh(t.zone,br.defaultZone);if(!i.isValid)return Qa.invalid(g0(i));const n=hn.fromObject(t),s=$x(e,A9),{minDaysInFirstWeek:r,startOfWeek:l}=_9(s,n),u=br.now(),d=ti(t.specificOffset)?i.offset(u):t.specificOffset,m=!ti(s.ordinal),f=!ti(s.year),v=!ti(s.month)||!ti(s.day),w=f||v,S=s.weekYear||s.weekNumber;if((w||m)&&S)throw new Lg("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(v&&m)throw new Lg("Can't mix ordinal dates with month/day");const T=S||s.weekday&&!w;let M,G,P=jv(u,d);T?(M=Dae,G=Nae,P=Kx(P,r,l)):m?(M=Vae,G=Fae,P=WS(P)):(M=oO,G=sO);let F=!1;for(const se of M){const de=s[se];ti(de)?F?s[se]=G[se]:s[se]=P[se]:F=!0}const N=T?gte(s,r,l):m?fte(s):kG(s),V=N||WG(s);if(V)return Qa.invalid(V);const K=T?d9(s,r,l):m?h9(s):s,[te,J]=H2(K,d,i),ne=new Qa({ts:te,zone:i,o:J,loc:n});return s.weekday&&w&&e.weekday!==ne.weekday?Qa.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${ne.toISO()}`):ne.isValid?ne:Qa.invalid(ne.invalid)}static fromISO(e,t={}){const[i,n]=lae(e);return og(i,n,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,n]=uae(e);return og(i,n,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,n]=cae(e);return og(i,n,t,"HTTP",t)}static fromFormat(e,t,i={}){if(ti(e)||ti(t))throw new zs("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,r=hn.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[l,u,d,m]=Bae(r,e,t);return m?Qa.invalid(m):og(l,u,i,`format ${t}`,e,d)}static fromString(e,t,i={}){return Qa.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,n]=fae(e);return og(i,n,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new zs("need to specify a reason the DateTime is invalid");const i=e instanceof gu?e:new gu(e,t);if(br.throwOnInvalid)throw new Uee(i);return new Qa({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=nO(e,hn.fromObject(t));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(e,t={}){return tO(qs.parseFormat(e),hn.fromObject(t)).map(n=>n.val).join("")}static resetCache(){f0=void 0,LT.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?PS(this).weekYear:NaN}get weekNumber(){return this.isValid?PS(this).weekNumber:NaN}get weekday(){return this.isValid?PS(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?BS(this).weekday:NaN}get localWeekNumber(){return this.isValid?BS(this).weekNumber:NaN}get localWeekYear(){return this.isValid?BS(this).weekYear:NaN}get ordinal(){return this.isValid?WS(this.c).ordinal:NaN}get monthShort(){return this.isValid?Yv.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Yv.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Yv.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Yv.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=AI(this.c),n=this.zone.offset(i-e),s=this.zone.offset(i+e),r=this.zone.offset(i-n*t),l=this.zone.offset(i-s*t);if(r===l)return[this];const u=i-r*t,d=i-l*t,m=jv(u,r),f=jv(d,l);return m.hour===f.hour&&m.minute===f.minute&&m.second===f.second&&m.millisecond===f.millisecond?[$_(this,{ts:u}),$_(this,{ts:d})]:[this]}get isInLeapYear(){return ib(this.year)}get daysInMonth(){return jx(this.year,this.month)}get daysInYear(){return this.isValid?qg(this.year):NaN}get weeksInWeekYear(){return this.isValid?T1(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?T1(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:n}=qs.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:n}}toUTC(e=0,t={}){return this.setZone(bo.instance(e),t)}toLocal(){return this.setZone(br.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=Wh(e,br.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(t||i){const s=e.offset(this.ts),r=this.toObject();[n]=H2(r,s,e)}return $_(this,{ts:n,zone:e})}else return Qa.invalid(g0(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){const n=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return $_(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=$x(e,A9),{minDaysInFirstWeek:i,startOfWeek:n}=_9(t,this.loc),s=!ti(t.weekYear)||!ti(t.weekNumber)||!ti(t.weekday),r=!ti(t.ordinal),l=!ti(t.year),u=!ti(t.month)||!ti(t.day),d=l||u,m=t.weekYear||t.weekNumber;if((d||r)&&m)throw new Lg("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&r)throw new Lg("Can't mix ordinal dates with month/day");let f;s?f=d9({...Kx(this.c,i,n),...t},i,n):ti(t.ordinal)?(f={...this.toObject(),...t},ti(t.day)&&(f.day=Math.min(jx(f.year,f.month),f.day))):f=h9({...WS(this.c),...t});const[v,w]=H2(f,this.o,this.zone);return $_(this,{ts:v,o:w})}plus(e){if(!this.isValid)return this;const t=qi.fromDurationLike(e);return $_(this,C9(this,t))}minus(e){if(!this.isValid)return this;const t=qi.fromDurationLike(e).negate();return $_(this,C9(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const i={},n=qi.normalizeUnit(e);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(n==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:r}=this;r<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?qs.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):OS}toLocaleString(e=Yx,t={}){return this.isValid?qs.create(this.loc.clone(t),e).formatDateTime(this):OS}toLocaleParts(e={}){return this.isValid?qs.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const r=e==="extended";let l=NS(this,r);return l+="T",l+=S9(this,r,t,i,n,s),l}toISODate({format:e="extended"}={}){return this.isValid?NS(this,e==="extended"):null}toISOWeekDate(){return $v(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:r="extended"}={}){return this.isValid?(n?"T":"")+S9(this,r==="extended",t,e,i,s):null}toRFC2822(){return $v(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return $v(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?NS(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(t||e)&&(i&&(n+=" "),t?n+="z":e&&(n+="ZZ")),$v(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():OS}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return qi.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=vte(t).map(qi.normalizeUnit),r=e.valueOf()>this.valueOf(),l=r?this:e,u=r?e:this,d=Cae(l,u,s,n);return r?d.negate():d}diffNow(e="milliseconds",t={}){return this.diff(Qa.now(),e,t)}until(e){return this.isValid?yr.fromDateTimes(this,e):this}hasSame(e,t,i){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,i)<=n&&n<=s.endOf(t,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||Qa.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),E9(t,this.plus(i),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?E9(e.base||Qa.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Qa.isDateTime))throw new zs("min requires all arguments be DateTimes");return m9(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(Qa.isDateTime))throw new zs("max requires all arguments be DateTimes");return m9(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:n=null,numberingSystem:s=null}=i,r=hn.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return iO(r,e,t)}static fromStringExplain(e,t,i={}){return Qa.fromFormatExplain(e,t,i)}static buildFormatParser(e,t={}){const{locale:i=null,numberingSystem:n=null}=t,s=hn.fromOpts({locale:i,numberingSystem:n,defaultToEN:!0});return new aO(s,e)}static fromFormatParser(e,t,i={}){if(ti(e)||ti(t))throw new zs("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=i,r=hn.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!r.equals(t.locale))throw new zs(`fromFormatParser called with a locale of ${r}, but the format parser was created for ${t.locale}`);const{result:l,zone:u,specificOffset:d,invalidReason:m}=t.explainFromTokens(e);return m?Qa.invalid(m):og(l,u,i,`format ${t.format}`,e,d)}static get DATE_SHORT(){return Yx}static get DATE_MED(){return oG}static get DATE_MED_WITH_WEEKDAY(){return qee}static get DATE_FULL(){return lG}static get DATE_HUGE(){return uG}static get TIME_SIMPLE(){return cG}static get TIME_WITH_SECONDS(){return dG}static get TIME_WITH_SHORT_OFFSET(){return hG}static get TIME_WITH_LONG_OFFSET(){return _G}static get TIME_24_SIMPLE(){return mG}static get TIME_24_WITH_SECONDS(){return pG}static get TIME_24_WITH_SHORT_OFFSET(){return gG}static get TIME_24_WITH_LONG_OFFSET(){return fG}static get DATETIME_SHORT(){return yG}static get DATETIME_SHORT_WITH_SECONDS(){return bG}static get DATETIME_MED(){return vG}static get DATETIME_MED_WITH_SECONDS(){return xG}static get DATETIME_MED_WITH_WEEKDAY(){return Yee}static get DATETIME_FULL(){return wG}static get DATETIME_FULL_WITH_SECONDS(){return IG}static get DATETIME_HUGE(){return CG}static get DATETIME_HUGE_WITH_SECONDS(){return SG}}function $y(a){if(Qa.isDateTime(a))return a;if(a&&a.valueOf&&Hh(a.valueOf()))return Qa.fromJSDate(a);if(a&&typeof a=="object")return Qa.fromObject(a);throw new zs(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const lO=[0,1,0,0];function L9(a,e="second",t,i){const{t:n}=wt(),s=new Date(a).toISOString(),r={year:n("yyyy"),month:n("M/yyyy"),day:n("M/d/yyyy"),second:n("M/d/yyyy HH:mm:ss")},u=(t?{year:"yyyy",month:"yyyy-MM",day:"yyyy-MM-dd",second:void 0}:r)[e];return u?Qa.fromISO(s).toFormat(`${i?"UTC:":""}${u}`):s.replace(/\.\d{3}/,"")}function RT(a){return new Date(a).toISOString().split(".")[0]+"Z"}function FS(a){return Qa.fromISO(a).toFormat("yyyy-MM-dd")}function Uae(a,e){return a<=e.minValue?e.minValue:a>=e.maxValue?e.maxValue:e.timeValueList?Hae(a,e):Xae(a,e)}function Hae(a,e){const t=e.timeValueList??[];let i,n=0,s=t.length-1;for(;s-n>1;)i=Math.floor((n+s)/2),t[i]>=a?s=i:n=i;const r=Math.abs(t[n]-a),l=Math.abs(t[s]-a);return t[r<l?n:s]}function Xae(a,e){const t=e.timeInterval??lO,i=new Date(a).getTime(),n=new Date(e.minValue),s=e.maxValue;let r=e.minValue,l=Math.abs(i-r);for(let u=1;;u++){const d=new Date(n.getTime());if(d.setFullYear(n.getFullYear()+u*t[0]),d.setMonth(n.getMonth()+u*t[1],n.getDate()+u*t[2]),d.setSeconds(n.getSeconds()+u*t[3]),d.getTime()>s)break;const m=Math.abs(i-d.getTime());if(m<=l)r=d.getTime(),l=m;else break}return r}const Zi=Co("map",()=>{const a=vo(),e=Fe({}),t=Di([]),i=Di([]),n=Fe(!1),s=Fe(!1),r=Fe(void 0),l=Fe(void 0),u=Fe(void 0),d=Fe(void 0),m=Fe(void 0),f=Fe(void 0),v=Fe(void 0);function w(J){r.value=J}function S(...J){t.value=[...new Set([...t.value,...J])]}function T(...J){i.value=[...new Set([...i.value,...J])]}function M(...J){t.value=t.value.filter(ne=>J.indexOf(ne.id)===-1),i.value=i.value.filter(ne=>J.indexOf(ne.id)===-1)}function G(){t.value=[]}function P(J){var ne;return!!((ne=t.value)!=null&&ne.find(se=>se.id===J))}function F(J,ne=!1){var de;const se=ne?i:t;se.value=[...((de=se.value)==null?void 0:de.sort((_e,Se)=>J.indexOf(_e.id)-J.indexOf(Se.id)))||[]]}function N(J,ne){t.value=t.value.map(se=>se.id===J?{...se,opacity:ne,previousOpacity:se.opacity}:se)}function V(J,ne,se){t.value=t.value.map(de=>{if(de.id===J){const _e={...de,currentTimeMinValue:ne?RT(ne):void 0,currentTimeMaxValue:se?RT(se):void 0};return _e.type==="WMTS"&&(_e.name=a.getLayerCurrentLabel(_e)),_e}return de})}function K(J){n.value=J}function te(J){s.value=J}return{map:e,layers:t,layers3d:i,is3dActive:n,is3dMesh:s,bgLayer:r,minZoom:l,maxZoom:u,x:d,y:m,zoom:f,rotation:v,addLayers:S,add3dLayers:T,removeLayers:M,removeAllLayers:G,reorderLayers:F,setLayerOpacity:N,setLayerTime:V,setBgLayer:w,setIs3dActive:K,setIs3dMesh:te,hasLayer:P}});function zl(){function a(m,f){return t(m,void 0,f)}function e(m,f){return t(void 0,m,f)}function t(m,f,v){const{themes:w}=ur();if(v=v||(w==null?void 0:w.find(S=>t(m,f,S))),m&&(v==null?void 0:v.id)===+m||f&&(v==null?void 0:v.name)===f)return v;if(v!=null&&v.children)for(const S of v.children){const T=t(m,f,S);if(T)return T}}function i(m){const{themes:f}=ur(),v=[];function w(S,T){S.id===+m&&v.push(T),S.children&&S.children.forEach(M=>w(M,T))}return f&&Array.isArray(f)&&f.forEach(S=>{var T;(T=S==null?void 0:S.metadata)!=null&&T.display_in_switcher&&w(S,S.name)}),[...new Set(v)]}function n(m){const{layerTrees_3d:f}=ur();return t(m,void 0,f)}function s(m){const{bgLayers:f}=ur();return f.find(v=>v.id===m)}function r(m){const{bgLayers:f}=ur();return f.find(v=>v.name===m)}function l(m){return s(+m)||a(+m)||n(+m)}function u(m){const{setTheme:f}=ur();f(m),d(m)}function d(m){const{maxZoom:f}=Tt(Zi()),v=e(m),{resolutions:w}=(v==null?void 0:v.metadata)||{};f.value=w?w.length+7:R7}return{findById:a,findByName:e,find3dLayerById:n,findBgLayerById:s,findBgLayerByName:r,findAnyLayerById:l,setTheme:u,findThemeNamesByLayerId:i}}var fc=(a=>(a.WMS="WMS",a.WMTS="WMTS",a))(fc||{});let qae=0;function Yae(){return qae++}/*! @rgrove/parse-xml v4.1.0 | ISC License | Copyright Ryan Grove */var o3=Object.defineProperty,Kae=Object.getOwnPropertyDescriptor,jae=Object.getOwnPropertyNames,$ae=Object.prototype.hasOwnProperty,Jae=(a,e)=>{for(var t in e)o3(a,t,{get:e[t],enumerable:!0})},Qae=(a,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of jae(e))!$ae.call(a,n)&&n!==t&&o3(a,n,{get:()=>e[n],enumerable:!(i=Kae(e,n))||i.enumerable});return a},eie=a=>Qae(o3({},"__esModule",{value:!0}),a),uO={};Jae(uO,{XmlCdata:()=>_O,XmlComment:()=>mO,XmlDeclaration:()=>pO,XmlDocument:()=>gO,XmlDocumentType:()=>fO,XmlElement:()=>MI,XmlError:()=>yO,XmlNode:()=>$i,XmlProcessingInstruction:()=>kT,XmlText:()=>u3,parseXml:()=>die});eie(uO);var J_="",tie=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,aie=class{constructor(e){if(this.k=this.q(e,!0),this.d=0,this.length=e.length,this.n=this.k!==this.length,this.m=e,this.n){let t=[];for(let i=0,n=0;n<this.k;++n)t[n]=i,i+=e.codePointAt(i)>65535?2:1;this.y=t}}get z(){return this.d>=this.k}q(e,t=this.n){return t?e.replace(tie,"_").length:e.length}g(e=1){this.d=Math.min(this.k,this.d+e)}i(e=this.d){var t;return this.n?(t=this.y[e])!=null?t:1/0:e}F(e=1){let t=this.h(e);return this.g(e),t}G(e){if(!e.sticky)throw new Error('`regex` must have a sticky flag ("y")');e.lastIndex=this.i();let t=e.exec(this.m);if(t===null||t.length===0)return J_;let i=t[0];return this.g(this.q(i)),i}v(e){let t,i=J_;for(;(t=this.h())&&e(t);)i+=t,this.g();return i}Q(e){if(this.b(e))return e;if(this.n){let{length:t}=e,i=this.q(e);if(i!==t&&e===this.h(i))return this.g(i),e}return J_}b(e){let{length:t}=e;return this.h(t)===e?(this.g(t),e):J_}A(e){let t=this.m.slice(this.i()),i=t.search(e);if(i<=0)return J_;let n=t.slice(0,i);return this.g(this.q(n)),n}t(e){let{m:t}=this,i=this.i(),n=t.indexOf(e,i);if(n<=0)return J_;let s=t.slice(i,n);return this.g(this.q(s)),s}h(e=1){let{d:t,n:i,m:n}=this;return i?t>=this.k?J_:n.slice(this.i(t),this.i(t+e)):n.slice(t,t+e)}o(e=0){this.d=e>=0?Math.min(this.k,e):Math.max(0,this.d+e)}},iie=/[^"&<]+/y,nie=/[^'&<]+/y,rie=/\r\n|[\n\r\t]/g,sie=/<|&|]]>/,oie=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));function cO(a){let e=l3(a);return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57||e===45||e===46||e===183||e>=768&&e<=879||e>=8255&&e<=8256||dO(a,e)}function dO(a,e=l3(a)){return e>=97&&e<=122||e>=65&&e<=90||e===58||e===95||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function lie(a){return a==="#"||cO(a)}function uie(a){let e=l3(a);return e===32||e===9||e===10||e===13}function R9(a){return a===9||a===10||a===13||a>=32&&a<=55295||a>=57344&&a<=65533||a>=65536&&a<=1114111}function l3(a){return a.codePointAt(0)||-1}var hO=class{constructor(){this.parent=null,this.start=-1,this.end=-1}get document(){var e,t;return(t=(e=this.parent)==null?void 0:e.document)!=null?t:null}get isRootNode(){return this.parent!==null&&this.parent===this.document&&this.type===hO.TYPE_ELEMENT}get preserveWhitespace(){var e;return!!((e=this.parent)!=null&&e.preserveWhitespace)}get type(){return""}toJSON(){let e={type:this.type};return this.isRootNode&&(e.isRootNode=!0),this.preserveWhitespace&&(e.preserveWhitespace=!0),this.start!==-1&&(e.start=this.start,e.end=this.end),e}},$i=hO;$i.TYPE_CDATA="cdata";$i.TYPE_COMMENT="comment";$i.TYPE_DOCUMENT="document";$i.TYPE_DOCUMENT_TYPE="doctype";$i.TYPE_ELEMENT="element";$i.TYPE_PROCESSING_INSTRUCTION="pi";$i.TYPE_TEXT="text";$i.TYPE_XML_DECLARATION="xmldecl";var u3=class extends $i{constructor(e=""){super(),this.text=e}get type(){return $i.TYPE_TEXT}toJSON(){return Object.assign($i.prototype.toJSON.call(this),{text:this.text})}},_O=class extends u3{get type(){return $i.TYPE_CDATA}},mO=class extends $i{constructor(e=""){super(),this.content=e}get type(){return $i.TYPE_COMMENT}toJSON(){return Object.assign($i.prototype.toJSON.call(this),{content:this.content})}},pO=class extends $i{constructor(e,t,i){super(),this.version=e,this.encoding=t??null,this.standalone=i??null}get type(){return $i.TYPE_XML_DECLARATION}toJSON(){let e=$i.prototype.toJSON.call(this);e.version=this.version;for(let t of["encoding","standalone"])this[t]!==null&&(e[t]=this[t]);return e}},MI=class extends $i{constructor(e,t=Object.create(null),i=[]){super(),this.name=e,this.attributes=t,this.children=i}get isEmpty(){return this.children.length===0}get preserveWhitespace(){let e=this;for(;e instanceof MI;){if("xml:space"in e.attributes)return e.attributes["xml:space"]==="preserve";e=e.parent}return!1}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return $i.TYPE_ELEMENT}toJSON(){return Object.assign($i.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(e=>e.toJSON())})}},gO=class extends $i{constructor(e=[]){super(),this.children=e}get document(){return this}get root(){for(let e of this.children)if(e instanceof MI)return e;return null}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return $i.TYPE_DOCUMENT}toJSON(){return Object.assign($i.prototype.toJSON.call(this),{children:this.children.map(e=>e.toJSON())})}},fO=class extends $i{constructor(e,t,i,n){super(),this.name=e,this.publicId=t??null,this.systemId=i??null,this.internalSubset=n??null}get type(){return $i.TYPE_DOCUMENT_TYPE}toJSON(){let e=$i.prototype.toJSON.call(this);e.name=this.name;for(let t of["publicId","systemId","internalSubset"])this[t]!==null&&(e[t]=this[t]);return e}},yO=class extends Error{constructor(e,t,i){let n=1,s="",r=1;for(let d=0;d<t;++d){let m=i[d];m===`
`?(n=1,s="",r+=1):(n+=1,s+=m)}let l=i.indexOf(`
`,t);s+=l===-1?i.slice(t):i.slice(t,l);let u=0;s.length>50&&(n<40?s=s.slice(0,50):(u=n-20,s=s.slice(u,n+30))),super(`${e} (line ${r}, column ${n})
  ${s}
`+" ".repeat(n-u+1)+`^
`),this.column=n,this.excerpt=s,this.line=r,this.name="XmlError",this.pos=t}},kT=class extends $i{constructor(e,t=""){super(),this.name=e,this.content=t}get type(){return $i.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign($i.prototype.toJSON.call(this),{name:this.name,content:this.content})}},DS="",cie=class{constructor(e,t={}){let i=this.document=new gO,n=this.c=new aie(e);if(this.l=i,this.f=t,this.f.includeOffsets&&(i.start=0,i.end=e.length),n.b("\uFEFF"),this.H(),!this.B())throw this.a("Root element is missing or invalid");for(;this.w(););if(!n.z)throw this.a("Extra content at the end of the document")}j(e,t){return e.parent=this.l,this.f.includeOffsets&&(e.start=this.c.i(t),e.end=this.c.i()),this.l.children.push(e),!0}x(e,t){let{children:i}=this.l,{length:n}=i;if(e=Jv(e),n>0){let s=i[n-1];if((s==null?void 0:s.type)===$i.TYPE_TEXT){let r=s;return r.text+=e,this.f.includeOffsets&&(r.end=this.c.i()),!0}}return this.j(new u3(e),t)}I(){let e=Object.create(null);for(;this.e();){let t=this.r();if(!t)break;let i=this.u()&&this.J();if(i===!1)throw this.a("Attribute value expected");if(t in e)throw this.a(`Duplicate attribute: ${t}`);if(t==="xml:space"&&i!=="default"&&i!=="preserve")throw this.a('Value of the `xml:space` attribute must be "default" or "preserve"');e[t]=i}if(this.f.sortAttributes){let t=Object.keys(e).sort(),i=Object.create(null);for(let n=0;n<t.length;++n){let s=t[n];i[s]=e[s]}e=i}return e}J(){let{c:e}=this,t=e.h();if(t!=='"'&&t!=="'")return!1;e.g();let i,n=!1,s=DS,r=t==='"'?iie:nie;e:for(;!e.z;)switch(i=e.G(r),i&&(this.p(i),s+=i.replace(rie," ")),e.h()){case t:n=!0;break e;case"&":s+=this.C();continue;case"<":throw this.a("Unescaped `<` is not allowed in an attribute value");case DS:break e}if(!n)throw this.a("Unclosed attribute");return e.g(),s}K(){let{c:e}=this,t=e.d;if(!e.b("<![CDATA["))return!1;let i=e.t("]]>");if(this.p(i),!e.b("]]>"))throw this.a("Unclosed CDATA section");return this.f.preserveCdata?this.j(new _O(Jv(i)),t):this.x(i,t)}L(){let{c:e}=this,t=e.d,i=e.A(sie);if(!i)return!1;if(this.p(i),e.h(3)==="]]>")throw this.a("Element content may not contain the CDATA section close delimiter `]]>`");return this.x(i,t)}D(){let{c:e}=this,t=e.d;if(!e.b("<!--"))return!1;let i=e.t("--");if(this.p(i),!e.b("-->"))throw e.h(2)==="--"?this.a("The string `--` isn't allowed inside a comment"):this.a("Unclosed comment");return this.f.preserveComments?this.j(new mO(Jv(i)),t):!0}M(){let e=this.c.d,t=this.C();return t?this.x(t,e):!1}N(){let{c:e}=this,t=e.d;if(!e.b("<!DOCTYPE"))return!1;let i=this.e()&&this.r();if(!i)throw this.a("Expected a name");let n,s;if(this.e()){if(e.b("PUBLIC")){if(n=this.e()&&this.O(),n===!1)throw this.a("Expected a public identifier");this.e()}if(n!==void 0||e.b("SYSTEM")){if(this.e(),s=this.s(),s===!1)throw this.a("Expected a system identifier");this.e()}}let r;if(e.b("[")){if(r=e.A(/\][\x20\t\r\n]*>/),!e.b("]"))throw this.a("Unclosed internal subset");this.e()}if(!e.b(">"))throw this.a("Unclosed doctype declaration");return this.f.preserveDocumentType?this.j(new fO(i,n,s,r),t):!0}B(){let{c:e}=this,t=e.d;if(!e.b("<"))return!1;let i=this.r();if(!i)return e.o(t),!1;let n=this.I(),s=!!e.b("/>"),r=new MI(i,n);if(r.parent=this.l,!s){if(!e.b(">"))throw this.a(`Unclosed start tag for element \`${i}\``);this.l=r;do this.L();while(this.B()||this.M()||this.K()||this.E()||this.D());let l=e.d,u;if(!e.b("</")||!(u=this.r())||u!==i)throw e.o(l),this.a(`Missing end tag for element ${i}`);if(this.e(),!e.b(">"))throw this.a(`Unclosed end tag for element ${i}`);this.l=r.parent}return this.j(r,t)}u(){return this.e(),this.c.b("=")?(this.e(),!0):!1}w(){return this.D()||this.E()||this.e()}r(){return dO(this.c.h())?this.c.v(cO):DS}E(){let{c:e}=this,t=e.d;if(!e.b("<?"))return!1;let i=this.r();if(i){if(i.toLowerCase()==="xml")throw e.o(t),this.a("XML declaration isn't allowed here")}else throw this.a("Invalid processing instruction");if(!this.e()){if(e.b("?>"))return this.j(new kT(i),t);throw this.a("Whitespace is required after a processing instruction name")}let n=e.t("?>");if(this.p(n),!e.b("?>"))throw this.a("Unterminated processing instruction");return this.j(new kT(i,Jv(n)),t)}H(){let{c:e}=this,t=e.d;for(this.P();this.w(););if(this.N())for(;this.w(););return t<e.d}O(){let e=this.c.d,t=this.s();if(t!==!1&&!/^[-\x20\r\na-zA-Z0-9'()+,./:=?;!*#@$_%]*$/.test(t))throw this.c.o(e),this.a("Invalid character in public identifier");return t}C(){let{c:e}=this;if(!e.b("&"))return!1;let t=e.v(lie);if(e.F()!==";")throw this.a("Unterminated reference (a reference must end with `;`)");let i;if(t[0]==="#"){let n=t[1]==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);if(isNaN(n))throw this.a("Invalid character reference");if(!R9(n))throw this.a("Character reference resolves to an invalid character");i=String.fromCodePoint(n)}else if(i=oie[t],i===void 0){let{ignoreUndefinedEntities:n,resolveUndefinedEntity:s}=this.f,r=`&${t};`;if(s){let l=s(r);if(l!=null){let u=typeof l;if(u!=="string")throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${u}`);return l}}if(n)return r;throw e.o(-r.length),this.a(`Named entity isn't defined: ${r}`)}return i}s(){let{c:e}=this,t=e.b('"')||e.b("'");if(!t)return!1;let i=e.t(t);if(this.p(i),!e.b(t))throw this.a("Missing end quote");return i}e(){return!!this.c.v(uie)}P(){let{c:e}=this,t=e.d;if(!e.b("<?xml"))return!1;if(!this.e())throw this.a("Invalid XML declaration");let i=!!e.b("version")&&this.u()&&this.s();if(i===!1)throw this.a("XML version is missing or invalid");if(!/^1\.[0-9]+$/.test(i))throw this.a("Invalid character in version number");let n,s;if(this.e()&&(n=!!e.b("encoding")&&this.u()&&this.s(),n&&this.e(),s=!!e.b("standalone")&&this.u()&&this.s(),s)){if(s!=="yes"&&s!=="no")throw this.a('Only "yes" and "no" are permitted as values of `standalone`');this.e()}if(!e.b("?>"))throw this.a("Invalid or unclosed XML declaration");return this.f.preserveXmlDeclaration?this.j(new pO(i,n||void 0,s||void 0),t):!0}a(e){let{c:t}=this;return new yO(e,t.d,t.m)}p(e){let{length:t}=e;for(let i=0;i<t;++i){let n=e.codePointAt(i);if(!R9(n))throw this.c.o(-([...e].length-i)),this.a("Invalid character");n>65535&&(i+=1)}}};function Jv(a){let e=0;for(;(e=a.indexOf("\r",e))!==-1;)a=a[e+1]===`
`?a.slice(0,e)+a.slice(e+1):a.slice(0,e)+`
`+a.slice(e+1);return a}function die(a,e){return new cie(a,e).document}let hie=class extends Error{constructor(e,t,i){super(e),this.httpStatus=t,this.isCrossOriginRelated=i,this.name="EndpointError"}},_ie=class extends Error{constructor(e,t,i,n,s){super(e),this.requestUrl=t,this.code=i,this.locator=n,this.response=s,this.name="ServiceExceptionError"}};function mie(a){if(a.name==="ServiceExceptionError"){const t=new _ie(a.message,a.requestUrl,a.code,a.locator,a.response);return t.stack=a.stack,t}if(a.name==="EndpointError"){const t=new hie(a.message,a.httpStatus,a.isCrossOriginRelated);return t.stack=a.stack,t}const e=new Error(a.message);return e.stack=a.stack,e}function pie(a,e,t){return new Promise((i,n)=>{const s=Yae(),r={requestId:s,taskName:a,params:t};e===null?globalThis.dispatchEvent(new CustomEvent("ogc-client.request",{detail:r})):e.postMessage(r);const l=m=>{m.requestId===s&&(e===null?globalThis.removeEventListener("message",u):e.removeEventListener("message",d),"error"in m?n(mie(m.error)):i(m.response))},u=m=>l(m.detail),d=m=>l(m.data);e===null?globalThis.addEventListener("ogc-client.response",u):e.addEventListener("message",d)})}const bO="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICAvKiEgQHJncm92ZS9wYXJzZS14bWwgdjQuMS4wIHwgSVNDIExpY2Vuc2UgfCBDb3B5cmlnaHQgUnlhbiBHcm92ZSAqLwogIHZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7CiAgdmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogIHZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzOwogIHZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwogIHZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4gewogICAgZm9yICh2YXIgbmFtZSBpbiBhbGwpCiAgICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7CiAgfTsKICB2YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4gewogICAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09ICJvYmplY3QiIHx8IHR5cGVvZiBmcm9tID09PSAiZnVuY3Rpb24iKSB7CiAgICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSkKICAgICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KQogICAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pOwogICAgfQogICAgcmV0dXJuIHRvOwogIH07CiAgdmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpOwogIHZhciBzcmNfZXhwb3J0cyA9IHt9OwogIF9fZXhwb3J0KHNyY19leHBvcnRzLCB7CiAgICBYbWxDZGF0YTogKCkgPT4gWG1sQ2RhdGEsCiAgICBYbWxDb21tZW50OiAoKSA9PiBYbWxDb21tZW50LAogICAgWG1sRGVjbGFyYXRpb246ICgpID0+IFhtbERlY2xhcmF0aW9uLAogICAgWG1sRG9jdW1lbnQ6ICgpID0+IFhtbERvY3VtZW50LAogICAgWG1sRG9jdW1lbnRUeXBlOiAoKSA9PiBYbWxEb2N1bWVudFR5cGUsCiAgICBYbWxFbGVtZW50OiAoKSA9PiBYbWxFbGVtZW50LAogICAgWG1sRXJyb3I6ICgpID0+IFhtbEVycm9yLAogICAgWG1sTm9kZTogKCkgPT4gWG1sTm9kZSwKICAgIFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbjogKCkgPT4gWG1sUHJvY2Vzc2luZ0luc3RydWN0aW9uLAogICAgWG1sVGV4dDogKCkgPT4gWG1sVGV4dCwKICAgIHBhcnNlWG1sOiAoKSA9PiBwYXJzZVhtbAogIH0pOwogIHZhciBicm93c2VyID0gX190b0NvbW1vbkpTKHNyY19leHBvcnRzKTsKICB2YXIgZW1wdHlTdHJpbmcgPSAiIjsKICB2YXIgc3Vycm9nYXRlUGFpciA9IC9bXHVEODAwLVx1REJGRl1bXHVEQzAwLVx1REZGRl0vZzsKICB2YXIgU3RyaW5nU2Nhbm5lciA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKHN0cmluZykgewogICAgICB0aGlzLmsgPSB0aGlzLnEoc3RyaW5nLCB0cnVlKTsKICAgICAgdGhpcy5kID0gMDsKICAgICAgdGhpcy5sZW5ndGggPSBzdHJpbmcubGVuZ3RoOwogICAgICB0aGlzLm4gPSB0aGlzLmsgIT09IHRoaXMubGVuZ3RoOwogICAgICB0aGlzLm0gPSBzdHJpbmc7CiAgICAgIGlmICh0aGlzLm4pIHsKICAgICAgICBsZXQgY2hhcnNUb0J5dGVzID0gW107CiAgICAgICAgZm9yIChsZXQgYnl0ZUluZGV4ID0gMCwgY2hhckluZGV4ID0gMDsgY2hhckluZGV4IDwgdGhpcy5rOyArK2NoYXJJbmRleCkgewogICAgICAgICAgY2hhcnNUb0J5dGVzW2NoYXJJbmRleF0gPSBieXRlSW5kZXg7CiAgICAgICAgICBieXRlSW5kZXggKz0gc3RyaW5nLmNvZGVQb2ludEF0KGJ5dGVJbmRleCkgPiA2NTUzNSA/IDIgOiAxOwogICAgICAgIH0KICAgICAgICB0aGlzLnkgPSBjaGFyc1RvQnl0ZXM7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogV2hldGhlciB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaW5kZXggaXMgYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQgc3RyaW5nLgogICAgICovCiAgICBnZXQgeigpIHsKICAgICAgcmV0dXJuIHRoaXMuZCA+PSB0aGlzLms7CiAgICB9CiAgICAvLyAtLSBQcm90ZWN0ZWQgTWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgaW4gdGhlIGdpdmVuIHN0cmluZywgd2hpY2ggbWF5IGRpZmZlciBmcm9tCiAgICAgKiB0aGUgYnl0ZSBsZW5ndGggaWYgdGhlIHN0cmluZyBjb250YWlucyBtdWx0aWJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgcShzdHJpbmcsIG11bHRpQnl0ZVNhZmUgPSB0aGlzLm4pIHsKICAgICAgcmV0dXJuIG11bHRpQnl0ZVNhZmUgPyBzdHJpbmcucmVwbGFjZShzdXJyb2dhdGVQYWlyLCAiXyIpLmxlbmd0aCA6IHN0cmluZy5sZW5ndGg7CiAgICB9CiAgICAvLyAtLSBQdWJsaWMgTWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogQWR2YW5jZXMgdGhlIHNjYW5uZXIgYnkgdGhlIGdpdmVuIG51bWJlciBvZiBjaGFyYWN0ZXJzLCBzdG9wcGluZyBpZiB0aGUgZW5kCiAgICAgKiBvZiB0aGUgc3RyaW5nIGlzIHJlYWNoZWQuCiAgICAgKi8KICAgIGcoY291bnQgPSAxKSB7CiAgICAgIHRoaXMuZCA9IE1hdGgubWluKHRoaXMuaywgdGhpcy5kICsgY291bnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBieXRlIGluZGV4IG9mIHRoZSBnaXZlbiBjaGFyYWN0ZXIgaW5kZXggaW4gdGhlIHN0cmluZy4gVGhlIHR3bwogICAgICogbWF5IGRpZmZlciBpbiBzdHJpbmdzIHRoYXQgY29udGFpbiBtdWx0aWJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgaShjaGFySW5kZXggPSB0aGlzLmQpIHsKICAgICAgdmFyIF9hOwogICAgICByZXR1cm4gdGhpcy5uID8gKF9hID0gdGhpcy55W2NoYXJJbmRleF0pICE9IG51bGwgPyBfYSA6IEluZmluaXR5IDogY2hhckluZGV4OwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbmQgcmV0dXJucyB0aGUgZ2l2ZW4gbnVtYmVyIG9mIGNoYXJhY3RlcnMgaWYgcG9zc2libGUsIGFkdmFuY2luZwogICAgICogdGhlIHNjYW5uZXIgYW5kIHN0b3BwaW5nIGlmIHRoZSBlbmQgb2YgdGhlIHN0cmluZyBpcyByZWFjaGVkLgogICAgICoKICAgICAqIElmIG5vIGNoYXJhY3RlcnMgY291bGQgYmUgY29uc3VtZWQsIGFuIGVtcHR5IHN0cmluZyB3aWxsIGJlIHJldHVybmVkLgogICAgICovCiAgICBGKGNvdW50ID0gMSkgewogICAgICBsZXQgY2hhcnMgPSB0aGlzLmgoY291bnQpOwogICAgICB0aGlzLmcoY291bnQpOwogICAgICByZXR1cm4gY2hhcnM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgbWF0Y2ggZm9yIHRoZSBnaXZlbiBzdGlja3kgcmVnZXgsIGFkdmFuY2VzIHRoZSBzY2FubmVyLCB1cGRhdGVzCiAgICAgKiB0aGUgYGxhc3RJbmRleGAgcHJvcGVydHkgb2YgdGhlIHJlZ2V4LCBhbmQgcmV0dXJucyB0aGUgbWF0Y2hpbmcgc3RyaW5nLgogICAgICoKICAgICAqIFRoZSByZWdleCBtdXN0IGhhdmUgYSBzdGlja3kgZmxhZyAoInkiKSBzbyB0aGF0IGl0cyBgbGFzdEluZGV4YCBwcm9wIGNhbiBiZQogICAgICogdXNlZCB0byBhbmNob3IgdGhlIG1hdGNoIGF0IHRoZSBjdXJyZW50IHNjYW5uZXIgcG9zaXRpb24uCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgY29uc3VtZWQgc3RyaW5nLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKi8KICAgIEcocmVnZXgpIHsKICAgICAgaWYgKCFyZWdleC5zdGlja3kpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ByZWdleGAgbXVzdCBoYXZlIGEgc3RpY2t5IGZsYWcgKCJ5IiknKTsKICAgICAgfQogICAgICByZWdleC5sYXN0SW5kZXggPSB0aGlzLmkoKTsKICAgICAgbGV0IHJlc3VsdCA9IHJlZ2V4LmV4ZWModGhpcy5tKTsKICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICB9CiAgICAgIGxldCBtYXRjaCA9IHJlc3VsdFswXTsKICAgICAgdGhpcy5nKHRoaXMucShtYXRjaCkpOwogICAgICByZXR1cm4gbWF0Y2g7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGFuZCByZXR1cm5zIGFsbCBjaGFyYWN0ZXJzIGZvciB3aGljaCB0aGUgZ2l2ZW4gZnVuY3Rpb24gcmV0dXJucyBhCiAgICAgKiB0cnV0aHkgdmFsdWUsIHN0b3BwaW5nIG9uIHRoZSBmaXJzdCBmYWxzeSByZXR1cm4gdmFsdWUgb3IgaWYgdGhlIGVuZCBvZiB0aGUKICAgICAqIGlucHV0IGlzIHJlYWNoZWQuCiAgICAgKi8KICAgIHYoZm4pIHsKICAgICAgbGV0IGNoYXI7CiAgICAgIGxldCBtYXRjaCA9IGVtcHR5U3RyaW5nOwogICAgICB3aGlsZSAoKGNoYXIgPSB0aGlzLmgoKSkgJiYgZm4oY2hhcikpIHsKICAgICAgICBtYXRjaCArPSBjaGFyOwogICAgICAgIHRoaXMuZygpOwogICAgICB9CiAgICAgIHJldHVybiBtYXRjaDsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgdGhlIGdpdmVuIHN0cmluZyBpZiBpdCBleGlzdHMgYXQgdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGluZGV4LCBhbmQKICAgICAqIGFkdmFuY2VzIHRoZSBzY2FubmVyLgogICAgICoKICAgICAqIElmIHRoZSBnaXZlbiBzdHJpbmcgZG9lc24ndCBleGlzdCBhdCB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaW5kZXgsIGFuIGVtcHR5CiAgICAgKiBzdHJpbmcgd2lsbCBiZSByZXR1cm5lZCBhbmQgdGhlIHNjYW5uZXIgd2lsbCBub3QgYmUgYWR2YW5jZWQuCiAgICAgKi8KICAgIFEoc3RyaW5nVG9Db25zdW1lKSB7CiAgICAgIGlmICh0aGlzLmIoc3RyaW5nVG9Db25zdW1lKSkgewogICAgICAgIHJldHVybiBzdHJpbmdUb0NvbnN1bWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubikgewogICAgICAgIGxldCB7IGxlbmd0aCB9ID0gc3RyaW5nVG9Db25zdW1lOwogICAgICAgIGxldCBjaGFyTGVuZ3RoVG9NYXRjaCA9IHRoaXMucShzdHJpbmdUb0NvbnN1bWUpOwogICAgICAgIGlmIChjaGFyTGVuZ3RoVG9NYXRjaCAhPT0gbGVuZ3RoICYmIHN0cmluZ1RvQ29uc3VtZSA9PT0gdGhpcy5oKGNoYXJMZW5ndGhUb01hdGNoKSkgewogICAgICAgICAgdGhpcy5nKGNoYXJMZW5ndGhUb01hdGNoKTsKICAgICAgICAgIHJldHVybiBzdHJpbmdUb0NvbnN1bWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBlbXB0eVN0cmluZzsKICAgIH0KICAgIC8qKgogICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBgY29uc3VtZVN0cmluZygpYCwgYnV0IGRvZXNuJ3Qgc3VwcG9ydCBjb25zdW1pbmcKICAgICAqIG11bHRpYnl0ZSBjaGFyYWN0ZXJzLiBUaGlzIGNhbiBiZSBmYXN0ZXIgaWYgeW91IG9ubHkgbmVlZCB0byBtYXRjaCBzaW5nbGUKICAgICAqIGJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgYihzdHJpbmdUb0NvbnN1bWUpIHsKICAgICAgbGV0IHsgbGVuZ3RoIH0gPSBzdHJpbmdUb0NvbnN1bWU7CiAgICAgIGlmICh0aGlzLmgobGVuZ3RoKSA9PT0gc3RyaW5nVG9Db25zdW1lKSB7CiAgICAgICAgdGhpcy5nKGxlbmd0aCk7CiAgICAgICAgcmV0dXJuIHN0cmluZ1RvQ29uc3VtZTsKICAgICAgfQogICAgICByZXR1cm4gZW1wdHlTdHJpbmc7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGNoYXJhY3RlcnMgdW50aWwgdGhlIGdpdmVuIGdsb2JhbCByZWdleCBpcyBtYXRjaGVkLCBhZHZhbmNpbmcgdGhlCiAgICAgKiBzY2FubmVyIHVwIHRvIChidXQgbm90IGJleW9uZCkgdGhlIGJlZ2lubmluZyBvZiB0aGUgbWF0Y2guIElmIHRoZSByZWdleAogICAgICogZG9lc24ndCBtYXRjaCwgbm90aGluZyB3aWxsIGJlIGNvbnN1bWVkLgogICAgICoKICAgICAqIFJldHVybnMgdGhlIGNvbnN1bWVkIHN0cmluZywgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIGNvbnN1bWVkLgogICAgICovCiAgICBBKHJlZ2V4KSB7CiAgICAgIGxldCByZXN0T2ZTdHJpbmcgPSB0aGlzLm0uc2xpY2UodGhpcy5pKCkpOwogICAgICBsZXQgbWF0Y2hCeXRlSW5kZXggPSByZXN0T2ZTdHJpbmcuc2VhcmNoKHJlZ2V4KTsKICAgICAgaWYgKG1hdGNoQnl0ZUluZGV4IDw9IDApIHsKICAgICAgICByZXR1cm4gZW1wdHlTdHJpbmc7CiAgICAgIH0KICAgICAgbGV0IHJlc3VsdCA9IHJlc3RPZlN0cmluZy5zbGljZSgwLCBtYXRjaEJ5dGVJbmRleCk7CiAgICAgIHRoaXMuZyh0aGlzLnEocmVzdWx0KSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGNoYXJhY3RlcnMgdW50aWwgdGhlIGdpdmVuIHN0cmluZyBpcyBmb3VuZCwgYWR2YW5jaW5nIHRoZSBzY2FubmVyCiAgICAgKiB1cCB0byAoYnV0IG5vdCBiZXlvbmQpIHRoYXQgcG9pbnQuIElmIHRoZSBzdHJpbmcgaXMgbmV2ZXIgZm91bmQsIG5vdGhpbmcKICAgICAqIHdpbGwgYmUgY29uc3VtZWQuCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgY29uc3VtZWQgc3RyaW5nLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKi8KICAgIHQoc2VhcmNoU3RyaW5nKSB7CiAgICAgIGxldCB7IG06IHN0cmluZyB9ID0gdGhpczsKICAgICAgbGV0IGJ5dGVJbmRleCA9IHRoaXMuaSgpOwogICAgICBsZXQgbWF0Y2hCeXRlSW5kZXggPSBzdHJpbmcuaW5kZXhPZihzZWFyY2hTdHJpbmcsIGJ5dGVJbmRleCk7CiAgICAgIGlmIChtYXRjaEJ5dGVJbmRleCA8PSAwKSB7CiAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICB9CiAgICAgIGxldCByZXN1bHQgPSBzdHJpbmcuc2xpY2UoYnl0ZUluZGV4LCBtYXRjaEJ5dGVJbmRleCk7CiAgICAgIHRoaXMuZyh0aGlzLnEocmVzdWx0KSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGdpdmVuIG51bWJlciBvZiBjaGFyYWN0ZXJzIHN0YXJ0aW5nIGF0IHRoZSBjdXJyZW50IGNoYXJhY3RlcgogICAgICogaW5kZXgsIHdpdGhvdXQgYWR2YW5jaW5nIHRoZSBzY2FubmVyIGFuZCB3aXRob3V0IGV4Y2VlZGluZyB0aGUgZW5kIG9mIHRoZQogICAgICogaW5wdXQgc3RyaW5nLgogICAgICovCiAgICBoKGNvdW50ID0gMSkgewogICAgICBsZXQgeyBkOiBjaGFySW5kZXgsIG46IG11bHRpQnl0ZU1vZGUsIG06IHN0cmluZyB9ID0gdGhpczsKICAgICAgaWYgKG11bHRpQnl0ZU1vZGUpIHsKICAgICAgICBpZiAoY2hhckluZGV4ID49IHRoaXMuaykgewogICAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKAogICAgICAgICAgdGhpcy5pKGNoYXJJbmRleCksCiAgICAgICAgICB0aGlzLmkoY2hhckluZGV4ICsgY291bnQpCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKGNoYXJJbmRleCwgY2hhckluZGV4ICsgY291bnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXNldHMgdGhlIHNjYW5uZXIgcG9zaXRpb24gdG8gdGhlIGdpdmVuIGNoYXJhY3RlciBfaW5kZXhfLCBvciB0byB0aGUgc3RhcnQKICAgICAqIG9mIHRoZSBpbnB1dCBzdHJpbmcgaWYgbm8gaW5kZXggaXMgZ2l2ZW4uCiAgICAgKgogICAgICogSWYgX2luZGV4XyBpcyBuZWdhdGl2ZSwgdGhlIHNjYW5uZXIgcG9zaXRpb24gd2lsbCBiZSBtb3ZlZCBiYWNrd2FyZCBieSB0aGF0CiAgICAgKiBtYW55IGNoYXJhY3RlcnMsIHN0b3BwaW5nIGlmIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZyBpcyByZWFjaGVkLgogICAgICovCiAgICBvKGluZGV4ID0gMCkgewogICAgICB0aGlzLmQgPSBpbmRleCA+PSAwID8gTWF0aC5taW4odGhpcy5rLCBpbmRleCkgOiBNYXRoLm1heCgwLCB0aGlzLmQgKyBpbmRleCk7CiAgICB9CiAgfTsKICB2YXIgYXR0VmFsdWVDaGFyRG91YmxlUXVvdGUgPSAvW14iJjxdKy95OwogIHZhciBhdHRWYWx1ZUNoYXJTaW5nbGVRdW90ZSA9IC9bXicmPF0rL3k7CiAgdmFyIGF0dFZhbHVlTm9ybWFsaXplZFdoaXRlc3BhY2UgPSAvXHJcbnxbXG5cclx0XS9nOwogIHZhciBlbmRDaGFyRGF0YSA9IC88fCZ8XV0+LzsKICB2YXIgcHJlZGVmaW5lZEVudGl0aWVzID0gT2JqZWN0LmZyZWV6ZShPYmplY3QuYXNzaWduKC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCB7CiAgICBhbXA6ICImIiwKICAgIGFwb3M6ICInIiwKICAgIGd0OiAiPiIsCiAgICBsdDogIjwiLAogICAgcXVvdDogJyInCiAgfSkpOwogIGZ1bmN0aW9uIGlzTmFtZUNoYXIoY2hhcikgewogICAgbGV0IGNwID0gZ2V0Q29kZVBvaW50KGNoYXIpOwogICAgcmV0dXJuIGNwID49IDk3ICYmIGNwIDw9IDEyMiB8fCBjcCA+PSA2NSAmJiBjcCA8PSA5MCB8fCBjcCA+PSA0OCAmJiBjcCA8PSA1NyB8fCBjcCA9PT0gNDUgfHwgY3AgPT09IDQ2IHx8IGNwID09PSAxODMgfHwgY3AgPj0gNzY4ICYmIGNwIDw9IDg3OSB8fCBjcCA+PSA4MjU1ICYmIGNwIDw9IDgyNTYgfHwgaXNOYW1lU3RhcnRDaGFyKGNoYXIsIGNwKTsKICB9CiAgZnVuY3Rpb24gaXNOYW1lU3RhcnRDaGFyKGNoYXIsIGNwID0gZ2V0Q29kZVBvaW50KGNoYXIpKSB7CiAgICByZXR1cm4gY3AgPj0gOTcgJiYgY3AgPD0gMTIyIHx8IGNwID49IDY1ICYmIGNwIDw9IDkwIHx8IGNwID09PSA1OCB8fCBjcCA9PT0gOTUgfHwgY3AgPj0gMTkyICYmIGNwIDw9IDIxNCB8fCBjcCA+PSAyMTYgJiYgY3AgPD0gMjQ2IHx8IGNwID49IDI0OCAmJiBjcCA8PSA3NjcgfHwgY3AgPj0gODgwICYmIGNwIDw9IDg5MyB8fCBjcCA+PSA4OTUgJiYgY3AgPD0gODE5MSB8fCBjcCA+PSA4MjA0ICYmIGNwIDw9IDgyMDUgfHwgY3AgPj0gODMwNCAmJiBjcCA8PSA4NTkxIHx8IGNwID49IDExMjY0ICYmIGNwIDw9IDEyMjcxIHx8IGNwID49IDEyMjg5ICYmIGNwIDw9IDU1Mjk1IHx8IGNwID49IDYzNzQ0ICYmIGNwIDw9IDY0OTc1IHx8IGNwID49IDY1MDA4ICYmIGNwIDw9IDY1NTMzIHx8IGNwID49IDY1NTM2ICYmIGNwIDw9IDk4MzAzOTsKICB9CiAgZnVuY3Rpb24gaXNSZWZlcmVuY2VDaGFyKGNoYXIpIHsKICAgIHJldHVybiBjaGFyID09PSAiIyIgfHwgaXNOYW1lQ2hhcihjaGFyKTsKICB9CiAgZnVuY3Rpb24gaXNXaGl0ZXNwYWNlKGNoYXIpIHsKICAgIGxldCBjcCA9IGdldENvZGVQb2ludChjaGFyKTsKICAgIHJldHVybiBjcCA9PT0gMzIgfHwgY3AgPT09IDkgfHwgY3AgPT09IDEwIHx8IGNwID09PSAxMzsKICB9CiAgZnVuY3Rpb24gaXNYbWxDb2RlUG9pbnQoY3ApIHsKICAgIHJldHVybiBjcCA9PT0gOSB8fCBjcCA9PT0gMTAgfHwgY3AgPT09IDEzIHx8IGNwID49IDMyICYmIGNwIDw9IDU1Mjk1IHx8IGNwID49IDU3MzQ0ICYmIGNwIDw9IDY1NTMzIHx8IGNwID49IDY1NTM2ICYmIGNwIDw9IDExMTQxMTE7CiAgfQogIGZ1bmN0aW9uIGdldENvZGVQb2ludChjaGFyKSB7CiAgICByZXR1cm4gY2hhci5jb2RlUG9pbnRBdCgwKSB8fCAtMTsKICB9CiAgdmFyIF9YbWxOb2RlID0gY2xhc3MgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMucGFyZW50ID0gbnVsbDsKICAgICAgdGhpcy5zdGFydCA9IC0xOwogICAgICB0aGlzLmVuZCA9IC0xOwogICAgfQogICAgLyoqCiAgICAgKiBEb2N1bWVudCB0aGF0IGNvbnRhaW5zIHRoaXMgbm9kZSwgb3IgYG51bGxgIGlmIHRoaXMgbm9kZSBpcyBub3QgYXNzb2NpYXRlZAogICAgICogd2l0aCBhIGRvY3VtZW50LgogICAgICovCiAgICBnZXQgZG9jdW1lbnQoKSB7CiAgICAgIHZhciBfYSwgX2I7CiAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLnBhcmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRvY3VtZW50KSAhPSBudWxsID8gX2IgOiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoaXMgbm9kZSBpcyB0aGUgcm9vdCBub2RlIG9mIHRoZSBkb2N1bWVudCAoYWxzbyBrbm93biBhcyB0aGUKICAgICAqIGRvY3VtZW50IGVsZW1lbnQpLgogICAgICovCiAgICBnZXQgaXNSb290Tm9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFyZW50ICE9PSBudWxsICYmIHRoaXMucGFyZW50ID09PSB0aGlzLmRvY3VtZW50ICYmIHRoaXMudHlwZSA9PT0gX1htbE5vZGUuVFlQRV9FTEVNRU5UOwogICAgfQogICAgLyoqCiAgICAgKiBXaGV0aGVyIHdoaXRlc3BhY2Ugc2hvdWxkIGJlIHByZXNlcnZlZCBpbiB0aGUgY29udGVudCBvZiB0aGlzIGVsZW1lbnQgYW5kCiAgICAgKiBpdHMgY2hpbGRyZW4uCiAgICAgKgogICAgICogVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHRoZSB2YWx1ZSBvZiB0aGUgc3BlY2lhbCBgeG1sOnNwYWNlYCBhdHRyaWJ1dGUsIGFuZAogICAgICogd2lsbCBiZSBgdHJ1ZWAgZm9yIGFueSBub2RlIHdob3NlIGB4bWw6c3BhY2VgIGF0dHJpYnV0ZSBpcyBzZXQgdG8KICAgICAqICJwcmVzZXJ2ZSIuIElmIGEgbm9kZSBoYXMgbm8gc3VjaCBhdHRyaWJ1dGUsIGl0IHdpbGwgaW5oZXJpdCB0aGUgdmFsdWUgb2YKICAgICAqIHRoZSBuZWFyZXN0IGFuY2VzdG9yIHRoYXQgZG9lcyAoaWYgYW55KS4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy13aGl0ZS1zcGFjZQogICAgICovCiAgICBnZXQgcHJlc2VydmVXaGl0ZXNwYWNlKCkgewogICAgICB2YXIgX2E7CiAgICAgIHJldHVybiAhISgoX2EgPSB0aGlzLnBhcmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnByZXNlcnZlV2hpdGVzcGFjZSk7CiAgICB9CiAgICAvKioKICAgICAqIFR5cGUgb2YgdGhpcyBub2RlLgogICAgICoKICAgICAqIFRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IGlzIGEgc3RyaW5nIHRoYXQgbWF0Y2hlcyBvbmUgb2YgdGhlIHN0YXRpYwogICAgICogYFRZUEVfKmAgcHJvcGVydGllcyBvbiB0aGUgYFhtbE5vZGVgIGNsYXNzIChlLmcuIGBUWVBFX0VMRU1FTlRgLAogICAgICogYFRZUEVfVEVYVGAsIGV0Yy4pLgogICAgICoKICAgICAqIFRoZSBgWG1sTm9kZWAgY2xhc3MgaXRzZWxmIGlzIGEgYmFzZSBjbGFzcyBhbmQgZG9lc24ndCBoYXZlIGl0cyBvd24gdHlwZQogICAgICogbmFtZS4KICAgICAqLwogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiAiIjsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIG9iamVjdCByZXByZXNlbnRpbmcgdGhpcyBub2RlLCBtaW51cyBwcm9wZXJ0aWVzCiAgICAgKiB0aGF0IGNvdWxkIHJlc3VsdCBpbiBjaXJjdWxhciByZWZlcmVuY2VzLgogICAgICovCiAgICB0b0pTT04oKSB7CiAgICAgIGxldCBqc29uID0gewogICAgICAgIHR5cGU6IHRoaXMudHlwZQogICAgICB9OwogICAgICBpZiAodGhpcy5pc1Jvb3ROb2RlKSB7CiAgICAgICAganNvbi5pc1Jvb3ROb2RlID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAodGhpcy5wcmVzZXJ2ZVdoaXRlc3BhY2UpIHsKICAgICAgICBqc29uLnByZXNlcnZlV2hpdGVzcGFjZSA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc3RhcnQgIT09IC0xKSB7CiAgICAgICAganNvbi5zdGFydCA9IHRoaXMuc3RhcnQ7CiAgICAgICAganNvbi5lbmQgPSB0aGlzLmVuZDsKICAgICAgfQogICAgICByZXR1cm4ganNvbjsKICAgIH0KICB9OwogIHZhciBYbWxOb2RlID0gX1htbE5vZGU7CiAgWG1sTm9kZS5UWVBFX0NEQVRBID0gImNkYXRhIjsKICBYbWxOb2RlLlRZUEVfQ09NTUVOVCA9ICJjb21tZW50IjsKICBYbWxOb2RlLlRZUEVfRE9DVU1FTlQgPSAiZG9jdW1lbnQiOwogIFhtbE5vZGUuVFlQRV9ET0NVTUVOVF9UWVBFID0gImRvY3R5cGUiOwogIFhtbE5vZGUuVFlQRV9FTEVNRU5UID0gImVsZW1lbnQiOwogIFhtbE5vZGUuVFlQRV9QUk9DRVNTSU5HX0lOU1RSVUNUSU9OID0gInBpIjsKICBYbWxOb2RlLlRZUEVfVEVYVCA9ICJ0ZXh0IjsKICBYbWxOb2RlLlRZUEVfWE1MX0RFQ0xBUkFUSU9OID0gInhtbGRlY2wiOwogIHZhciBYbWxUZXh0ID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKHRleHQgPSAiIikgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLnRleHQgPSB0ZXh0OwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfVEVYVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICB0ZXh0OiB0aGlzLnRleHQKICAgICAgfSk7CiAgICB9CiAgfTsKICB2YXIgWG1sQ2RhdGEgPSBjbGFzcyBleHRlbmRzIFhtbFRleHQgewogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfQ0RBVEE7CiAgICB9CiAgfTsKICB2YXIgWG1sQ29tbWVudCA9IGNsYXNzIGV4dGVuZHMgWG1sTm9kZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZW50ID0gIiIpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX0NPTU1FTlQ7CiAgICB9CiAgICB0b0pTT04oKSB7CiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKFhtbE5vZGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpLCB7CiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50CiAgICAgIH0pOwogICAgfQogIH07CiAgdmFyIFhtbERlY2xhcmF0aW9uID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247CiAgICAgIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZyAhPSBudWxsID8gZW5jb2RpbmcgOiBudWxsOwogICAgICB0aGlzLnN0YW5kYWxvbmUgPSBzdGFuZGFsb25lICE9IG51bGwgPyBzdGFuZGFsb25lIDogbnVsbDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX1hNTF9ERUNMQVJBVElPTjsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgbGV0IGpzb24gPSBYbWxOb2RlLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTsKICAgICAganNvbi52ZXJzaW9uID0gdGhpcy52ZXJzaW9uOwogICAgICBmb3IgKGxldCBrZXkgb2YgWyJlbmNvZGluZyIsICJzdGFuZGFsb25lIl0pIHsKICAgICAgICBpZiAodGhpc1trZXldICE9PSBudWxsKSB7CiAgICAgICAgICBqc29uW2tleV0gPSB0aGlzW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBqc29uOwogICAgfQogIH07CiAgdmFyIFhtbEVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIFhtbE5vZGUgewogICAgY29uc3RydWN0b3IobmFtZSwgYXR0cmlidXRlcyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCBjaGlsZHJlbiA9IFtdKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgIH0KICAgIC8qKgogICAgICogV2hldGhlciB0aGlzIGVsZW1lbnQgaXMgZW1wdHkgKG1lYW5pbmcgaXQgaGFzIG5vIGNoaWxkcmVuKS4KICAgICAqLwogICAgZ2V0IGlzRW1wdHkoKSB7CiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmxlbmd0aCA9PT0gMDsKICAgIH0KICAgIGdldCBwcmVzZXJ2ZVdoaXRlc3BhY2UoKSB7CiAgICAgIGxldCBub2RlID0gdGhpczsKICAgICAgd2hpbGUgKG5vZGUgaW5zdGFuY2VvZiBYbWxFbGVtZW50KSB7CiAgICAgICAgaWYgKCJ4bWw6c3BhY2UiIGluIG5vZGUuYXR0cmlidXRlcykgewogICAgICAgICAgcmV0dXJuIG5vZGUuYXR0cmlidXRlc1sieG1sOnNwYWNlIl0gPT09ICJwcmVzZXJ2ZSI7CiAgICAgICAgfQogICAgICAgIG5vZGUgPSBub2RlLnBhcmVudDsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFRleHQgY29udGVudCBvZiB0aGlzIGVsZW1lbnQgYW5kIGFsbCBpdHMgZGVzY2VuZGFudHMuCiAgICAgKi8KICAgIGdldCB0ZXh0KCkgewogICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiAidGV4dCIgaW4gY2hpbGQgPyBjaGlsZC50ZXh0IDogIiIpLmpvaW4oIiIpOwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfRUxFTUVOVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgYXR0cmlidXRlczogdGhpcy5hdHRyaWJ1dGVzLAogICAgICAgIGNoaWxkcmVuOiB0aGlzLmNoaWxkcmVuLm1hcCgoY2hpbGQpID0+IGNoaWxkLnRvSlNPTigpKQogICAgICB9KTsKICAgIH0KICB9OwogIHZhciBYbWxEb2N1bWVudCA9IGNsYXNzIGV4dGVuZHMgWG1sTm9kZSB7CiAgICBjb25zdHJ1Y3RvcihjaGlsZHJlbiA9IFtdKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgIH0KICAgIGdldCBkb2N1bWVudCgpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJvb3QgZWxlbWVudCBvZiB0aGlzIGRvY3VtZW50LCBvciBgbnVsbGAgaWYgdGhpcyBkb2N1bWVudCBpcyBlbXB0eS4KICAgICAqLwogICAgZ2V0IHJvb3QoKSB7CiAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHsKICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBYbWxFbGVtZW50KSB7CiAgICAgICAgICByZXR1cm4gY2hpbGQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBUZXh0IGNvbnRlbnQgb2YgdGhpcyBkb2N1bWVudCBhbmQgYWxsIGl0cyBkZXNjZW5kYW50cy4KICAgICAqLwogICAgZ2V0IHRleHQoKSB7CiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLm1hcCgoY2hpbGQpID0+ICJ0ZXh0IiBpbiBjaGlsZCA/IGNoaWxkLnRleHQgOiAiIikuam9pbigiIik7CiAgICB9CiAgICBnZXQgdHlwZSgpIHsKICAgICAgcmV0dXJuIFhtbE5vZGUuVFlQRV9ET0NVTUVOVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBjaGlsZHJlbjogdGhpcy5jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiBjaGlsZC50b0pTT04oKSkKICAgICAgfSk7CiAgICB9CiAgfTsKICB2YXIgWG1sRG9jdW1lbnRUeXBlID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKG5hbWUsIHB1YmxpY0lkLCBzeXN0ZW1JZCwgaW50ZXJuYWxTdWJzZXQpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgICAgdGhpcy5wdWJsaWNJZCA9IHB1YmxpY0lkICE9IG51bGwgPyBwdWJsaWNJZCA6IG51bGw7CiAgICAgIHRoaXMuc3lzdGVtSWQgPSBzeXN0ZW1JZCAhPSBudWxsID8gc3lzdGVtSWQgOiBudWxsOwogICAgICB0aGlzLmludGVybmFsU3Vic2V0ID0gaW50ZXJuYWxTdWJzZXQgIT0gbnVsbCA/IGludGVybmFsU3Vic2V0IDogbnVsbDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX0RPQ1VNRU5UX1RZUEU7CiAgICB9CiAgICB0b0pTT04oKSB7CiAgICAgIGxldCBqc29uID0gWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7CiAgICAgIGpzb24ubmFtZSA9IHRoaXMubmFtZTsKICAgICAgZm9yIChsZXQga2V5IG9mIFsicHVibGljSWQiLCAic3lzdGVtSWQiLCAiaW50ZXJuYWxTdWJzZXQiXSkgewogICAgICAgIGlmICh0aGlzW2tleV0gIT09IG51bGwpIHsKICAgICAgICAgIGpzb25ba2V5XSA9IHRoaXNba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGpzb247CiAgICB9CiAgfTsKICB2YXIgWG1sRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHsKICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGNoYXJJbmRleCwgeG1sKSB7CiAgICAgIGxldCBjb2x1bW4gPSAxOwogICAgICBsZXQgZXhjZXJwdCA9ICIiOwogICAgICBsZXQgbGluZSA9IDE7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckluZGV4OyArK2kpIHsKICAgICAgICBsZXQgY2hhciA9IHhtbFtpXTsKICAgICAgICBpZiAoY2hhciA9PT0gIlxuIikgewogICAgICAgICAgY29sdW1uID0gMTsKICAgICAgICAgIGV4Y2VycHQgPSAiIjsKICAgICAgICAgIGxpbmUgKz0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29sdW1uICs9IDE7CiAgICAgICAgICBleGNlcnB0ICs9IGNoYXI7CiAgICAgICAgfQogICAgICB9CiAgICAgIGxldCBlb2wgPSB4bWwuaW5kZXhPZigiXG4iLCBjaGFySW5kZXgpOwogICAgICBleGNlcnB0ICs9IGVvbCA9PT0gLTEgPyB4bWwuc2xpY2UoY2hhckluZGV4KSA6IHhtbC5zbGljZShjaGFySW5kZXgsIGVvbCk7CiAgICAgIGxldCBleGNlcnB0U3RhcnQgPSAwOwogICAgICBpZiAoZXhjZXJwdC5sZW5ndGggPiA1MCkgewogICAgICAgIGlmIChjb2x1bW4gPCA0MCkgewogICAgICAgICAgZXhjZXJwdCA9IGV4Y2VycHQuc2xpY2UoMCwgNTApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBleGNlcnB0U3RhcnQgPSBjb2x1bW4gLSAyMDsKICAgICAgICAgIGV4Y2VycHQgPSBleGNlcnB0LnNsaWNlKGV4Y2VycHRTdGFydCwgY29sdW1uICsgMzApOwogICAgICAgIH0KICAgICAgfQogICAgICBzdXBlcigKICAgICAgICBgJHttZXNzYWdlfSAobGluZSAke2xpbmV9LCBjb2x1bW4gJHtjb2x1bW59KQogICR7ZXhjZXJwdH0KYCArICIgIi5yZXBlYXQoY29sdW1uIC0gZXhjZXJwdFN0YXJ0ICsgMSkgKyAiXlxuIgogICAgICApOwogICAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbjsKICAgICAgdGhpcy5leGNlcnB0ID0gZXhjZXJwdDsKICAgICAgdGhpcy5saW5lID0gbGluZTsKICAgICAgdGhpcy5uYW1lID0gIlhtbEVycm9yIjsKICAgICAgdGhpcy5wb3MgPSBjaGFySW5kZXg7CiAgICB9CiAgfTsKICB2YXIgWG1sUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRlbnQgPSAiIikgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50OwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfUFJPQ0VTU0lOR19JTlNUUlVDVElPTjsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50CiAgICAgIH0pOwogICAgfQogIH07CiAgdmFyIGVtcHR5U3RyaW5nMiA9ICIiOwogIHZhciBQYXJzZXIgPSBjbGFzcyB7CiAgICAvKioKICAgICAqIEBwYXJhbSB4bWwgWE1MIHN0cmluZyB0byBwYXJzZS4KICAgICAqIEBwYXJhbSBvcHRpb25zIFBhcnNlciBvcHRpb25zLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcih4bWwsIG9wdGlvbnMgPSB7fSkgewogICAgICBsZXQgZG9jID0gdGhpcy5kb2N1bWVudCA9IG5ldyBYbWxEb2N1bWVudCgpOwogICAgICBsZXQgc2Nhbm5lciA9IHRoaXMuYyA9IG5ldyBTdHJpbmdTY2FubmVyKHhtbCk7CiAgICAgIHRoaXMubCA9IGRvYzsKICAgICAgdGhpcy5mID0gb3B0aW9uczsKICAgICAgaWYgKHRoaXMuZi5pbmNsdWRlT2Zmc2V0cykgewogICAgICAgIGRvYy5zdGFydCA9IDA7CiAgICAgICAgZG9jLmVuZCA9IHhtbC5sZW5ndGg7CiAgICAgIH0KICAgICAgc2Nhbm5lci5iKCJcdUZFRkYiKTsKICAgICAgdGhpcy5IKCk7CiAgICAgIGlmICghdGhpcy5CKCkpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlJvb3QgZWxlbWVudCBpcyBtaXNzaW5nIG9yIGludmFsaWQiKTsKICAgICAgfQogICAgICB3aGlsZSAodGhpcy53KCkpIHsKICAgICAgfQogICAgICBpZiAoIXNjYW5uZXIueikgewogICAgICAgIHRocm93IHRoaXMuYSgiRXh0cmEgY29udGVudCBhdCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgdGhlIGdpdmVuIGBYbWxOb2RlYCBhcyBhIGNoaWxkIG9mIGB0aGlzLmN1cnJlbnROb2RlYC4KICAgICAqLwogICAgaihub2RlLCBjaGFySW5kZXgpIHsKICAgICAgbm9kZS5wYXJlbnQgPSB0aGlzLmw7CiAgICAgIGlmICh0aGlzLmYuaW5jbHVkZU9mZnNldHMpIHsKICAgICAgICBub2RlLnN0YXJ0ID0gdGhpcy5jLmkoY2hhckluZGV4KTsKICAgICAgICBub2RlLmVuZCA9IHRoaXMuYy5pKCk7CiAgICAgIH0KICAgICAgdGhpcy5sLmNoaWxkcmVuLnB1c2gobm9kZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIHRoZSBnaXZlbiBfdGV4dF8gdG8gdGhlIGRvY3VtZW50LCBlaXRoZXIgYnkgYXBwZW5kaW5nIGl0IHRvIGEKICAgICAqIHByZWNlZGluZyBgWG1sVGV4dGAgbm9kZSAoaWYgcG9zc2libGUpIG9yIGJ5IGNyZWF0aW5nIGEgbmV3IGBYbWxUZXh0YCBub2RlLgogICAgICovCiAgICB4KHRleHQsIGNoYXJJbmRleCkgewogICAgICBsZXQgeyBjaGlsZHJlbiB9ID0gdGhpcy5sOwogICAgICBsZXQgeyBsZW5ndGggfSA9IGNoaWxkcmVuOwogICAgICB0ZXh0ID0gbm9ybWFsaXplTGluZUJyZWFrcyh0ZXh0KTsKICAgICAgaWYgKGxlbmd0aCA+IDApIHsKICAgICAgICBsZXQgcHJldk5vZGUgPSBjaGlsZHJlbltsZW5ndGggLSAxXTsKICAgICAgICBpZiAoKHByZXZOb2RlID09IG51bGwgPyB2b2lkIDAgOiBwcmV2Tm9kZS50eXBlKSA9PT0gWG1sTm9kZS5UWVBFX1RFWFQpIHsKICAgICAgICAgIGxldCB0ZXh0Tm9kZSA9IHByZXZOb2RlOwogICAgICAgICAgdGV4dE5vZGUudGV4dCArPSB0ZXh0OwogICAgICAgICAgaWYgKHRoaXMuZi5pbmNsdWRlT2Zmc2V0cykgewogICAgICAgICAgICB0ZXh0Tm9kZS5lbmQgPSB0aGlzLmMuaSgpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFRleHQodGV4dCksIGNoYXJJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGVsZW1lbnQgYXR0cmlidXRlcy4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1zdGFydHRhZ3MKICAgICAqLwogICAgSSgpIHsKICAgICAgbGV0IGF0dHJpYnV0ZXMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgd2hpbGUgKHRoaXMuZSgpKSB7CiAgICAgICAgbGV0IGF0dHJOYW1lID0gdGhpcy5yKCk7CiAgICAgICAgaWYgKCFhdHRyTmFtZSkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGxldCBhdHRyVmFsdWUgPSB0aGlzLnUoKSAmJiB0aGlzLkooKTsKICAgICAgICBpZiAoYXR0clZhbHVlID09PSBmYWxzZSkgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJBdHRyaWJ1dGUgdmFsdWUgZXhwZWN0ZWQiKTsKICAgICAgICB9CiAgICAgICAgaWYgKGF0dHJOYW1lIGluIGF0dHJpYnV0ZXMpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgRHVwbGljYXRlIGF0dHJpYnV0ZTogJHthdHRyTmFtZX1gKTsKICAgICAgICB9CiAgICAgICAgaWYgKGF0dHJOYW1lID09PSAieG1sOnNwYWNlIiAmJiBhdHRyVmFsdWUgIT09ICJkZWZhdWx0IiAmJiBhdHRyVmFsdWUgIT09ICJwcmVzZXJ2ZSIpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgnVmFsdWUgb2YgdGhlIGB4bWw6c3BhY2VgIGF0dHJpYnV0ZSBtdXN0IGJlICJkZWZhdWx0IiBvciAicHJlc2VydmUiJyk7CiAgICAgICAgfQogICAgICAgIGF0dHJpYnV0ZXNbYXR0ck5hbWVdID0gYXR0clZhbHVlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmYuc29ydEF0dHJpYnV0ZXMpIHsKICAgICAgICBsZXQgYXR0ck5hbWVzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlcykuc29ydCgpOwogICAgICAgIGxldCBzb3J0ZWRBdHRyaWJ1dGVzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyTmFtZXMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgIGxldCBhdHRyTmFtZSA9IGF0dHJOYW1lc1tpXTsKICAgICAgICAgIHNvcnRlZEF0dHJpYnV0ZXNbYXR0ck5hbWVdID0gYXR0cmlidXRlc1thdHRyTmFtZV07CiAgICAgICAgfQogICAgICAgIGF0dHJpYnV0ZXMgPSBzb3J0ZWRBdHRyaWJ1dGVzOwogICAgICB9CiAgICAgIHJldHVybiBhdHRyaWJ1dGVzOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbiBgQXR0VmFsdWVgIChhdHRyaWJ1dGUgdmFsdWUpIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zCiAgICAgKiAgIENvbnRlbnRzIG9mIHRoZSBgQXR0VmFsdWVgIG1pbnVzIHF1b3Rlcywgb3IgYGZhbHNlYCBpZiBub3RoaW5nIHdhcwogICAgICogICBjb25zdW1lZC4gQW4gZW1wdHkgc3RyaW5nIGluZGljYXRlcyB0aGF0IGFuIGBBdHRWYWx1ZWAgd2FzIGNvbnN1bWVkIGJ1dAogICAgICogICB3YXMgZW1wdHkuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1BdHRWYWx1ZQogICAgICovCiAgICBKKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgcXVvdGUgPSBzY2FubmVyLmgoKTsKICAgICAgaWYgKHF1b3RlICE9PSAnIicgJiYgcXVvdGUgIT09ICInIikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzY2FubmVyLmcoKTsKICAgICAgbGV0IGNoYXJzOwogICAgICBsZXQgaXNDbG9zZWQgPSBmYWxzZTsKICAgICAgbGV0IHZhbHVlID0gZW1wdHlTdHJpbmcyOwogICAgICBsZXQgcmVnZXggPSBxdW90ZSA9PT0gJyInID8gYXR0VmFsdWVDaGFyRG91YmxlUXVvdGUgOiBhdHRWYWx1ZUNoYXJTaW5nbGVRdW90ZTsKICAgICAgbWF0Y2hMb29wOgogICAgICAgIHdoaWxlICghc2Nhbm5lci56KSB7CiAgICAgICAgICBjaGFycyA9IHNjYW5uZXIuRyhyZWdleCk7CiAgICAgICAgICBpZiAoY2hhcnMpIHsKICAgICAgICAgICAgdGhpcy5wKGNoYXJzKTsKICAgICAgICAgICAgdmFsdWUgKz0gY2hhcnMucmVwbGFjZShhdHRWYWx1ZU5vcm1hbGl6ZWRXaGl0ZXNwYWNlLCAiICIpOwogICAgICAgICAgfQogICAgICAgICAgc3dpdGNoIChzY2FubmVyLmgoKSkgewogICAgICAgICAgICBjYXNlIHF1b3RlOgogICAgICAgICAgICAgIGlzQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgICAgICBicmVhayBtYXRjaExvb3A7CiAgICAgICAgICAgIGNhc2UgIiYiOgogICAgICAgICAgICAgIHZhbHVlICs9IHRoaXMuQygpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBjYXNlICI8IjoKICAgICAgICAgICAgICB0aHJvdyB0aGlzLmEoIlVuZXNjYXBlZCBgPGAgaXMgbm90IGFsbG93ZWQgaW4gYW4gYXR0cmlidXRlIHZhbHVlIik7CiAgICAgICAgICAgIGNhc2UgZW1wdHlTdHJpbmcyOgogICAgICAgICAgICAgIGJyZWFrIG1hdGNoTG9vcDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIGlmICghaXNDbG9zZWQpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlVuY2xvc2VkIGF0dHJpYnV0ZSIpOwogICAgICB9CiAgICAgIHNjYW5uZXIuZygpOwogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgQ0RBVEEgc2VjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgQ0RBVEEgc2VjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1jZGF0YS1zZWN0CiAgICAgKi8KICAgIEsoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCFbQ0RBVEFbIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IHRleHQgPSBzY2FubmVyLnQoIl1dPiIpOwogICAgICB0aGlzLnAodGV4dCk7CiAgICAgIGlmICghc2Nhbm5lci5iKCJdXT4iKSkgewogICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgQ0RBVEEgc2VjdGlvbiIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmYucHJlc2VydmVDZGF0YSA/IHRoaXMuaihuZXcgWG1sQ2RhdGEobm9ybWFsaXplTGluZUJyZWFrcyh0ZXh0KSksIHN0YXJ0SW5kZXgpIDogdGhpcy54KHRleHQsIHN0YXJ0SW5kZXgpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBjaGFyYWN0ZXIgZGF0YSBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGNoYXJhY3RlciBkYXRhIHdhcyBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jZHQtY2hhcmRhdGEKICAgICAqLwogICAgTCgpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSBzY2FubmVyLmQ7CiAgICAgIGxldCBjaGFyRGF0YSA9IHNjYW5uZXIuQShlbmRDaGFyRGF0YSk7CiAgICAgIGlmICghY2hhckRhdGEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy5wKGNoYXJEYXRhKTsKICAgICAgaWYgKHNjYW5uZXIuaCgzKSA9PT0gIl1dPiIpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIkVsZW1lbnQgY29udGVudCBtYXkgbm90IGNvbnRhaW4gdGhlIENEQVRBIHNlY3Rpb24gY2xvc2UgZGVsaW1pdGVyIGBdXT5gIik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMueChjaGFyRGF0YSwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgY29tbWVudCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgY29tbWVudCB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULUNvbW1lbnQKICAgICAqLwogICAgRCgpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSBzY2FubmVyLmQ7CiAgICAgIGlmICghc2Nhbm5lci5iKCI8IS0tIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IGNvbnRlbnQgPSBzY2FubmVyLnQoIi0tIik7CiAgICAgIHRoaXMucChjb250ZW50KTsKICAgICAgaWYgKCFzY2FubmVyLmIoIi0tPiIpKSB7CiAgICAgICAgaWYgKHNjYW5uZXIuaCgyKSA9PT0gIi0tIikgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJUaGUgc3RyaW5nIGAtLWAgaXNuJ3QgYWxsb3dlZCBpbnNpZGUgYSBjb21tZW50Iik7CiAgICAgICAgfQogICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgY29tbWVudCIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmYucHJlc2VydmVDb21tZW50cyA/IHRoaXMuaihuZXcgWG1sQ29tbWVudChub3JtYWxpemVMaW5lQnJlYWtzKGNvbnRlbnQpKSwgc3RhcnRJbmRleCkgOiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhIHJlZmVyZW5jZSBpbiBhIGNvbnRlbnQgY29udGV4dCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGRpZmZlcnMgZnJvbSBgY29uc3VtZVJlZmVyZW5jZSgpYCBpbiB0aGF0IGEgY29uc3VtZWQgcmVmZXJlbmNlIHdpbGwgYmUKICAgICAqIGFkZGVkIHRvIHRoZSBkb2N1bWVudCBhcyBhIHRleHQgbm9kZSBpbnN0ZWFkIG9mIHJldHVybmVkLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSByZWZlcmVuY2Ugd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNlbnRwcm9jCiAgICAgKi8KICAgIE0oKSB7CiAgICAgIGxldCBzdGFydEluZGV4ID0gdGhpcy5jLmQ7CiAgICAgIGxldCByZWYgPSB0aGlzLkMoKTsKICAgICAgcmV0dXJuIHJlZiA/IHRoaXMueChyZWYsIHN0YXJ0SW5kZXgpIDogZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgZG9jdHlwZSBkZWNsYXJhdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGlzIGEgbG9vc2UgaW1wbGVtZW50YXRpb24gc2luY2UgZG9jdHlwZSBkZWNsYXJhdGlvbnMgYXJlIGN1cnJlbnRseQogICAgICogZGlzY2FyZGVkIHdpdGhvdXQgZnVydGhlciBwYXJzaW5nLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSBkb2N0eXBlIGRlY2xhcmF0aW9uIHdhcyBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jZHRkCiAgICAgKi8KICAgIE4oKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCFET0NUWVBFIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IG5hbWUgPSB0aGlzLmUoKSAmJiB0aGlzLnIoKTsKICAgICAgaWYgKCFuYW1lKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJFeHBlY3RlZCBhIG5hbWUiKTsKICAgICAgfQogICAgICBsZXQgcHVibGljSWQ7CiAgICAgIGxldCBzeXN0ZW1JZDsKICAgICAgaWYgKHRoaXMuZSgpKSB7CiAgICAgICAgaWYgKHNjYW5uZXIuYigiUFVCTElDIikpIHsKICAgICAgICAgIHB1YmxpY0lkID0gdGhpcy5lKCkgJiYgdGhpcy5PKCk7CiAgICAgICAgICBpZiAocHVibGljSWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHRocm93IHRoaXMuYSgiRXhwZWN0ZWQgYSBwdWJsaWMgaWRlbnRpZmllciIpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5lKCk7CiAgICAgICAgfQogICAgICAgIGlmIChwdWJsaWNJZCAhPT0gdm9pZCAwIHx8IHNjYW5uZXIuYigiU1lTVEVNIikpIHsKICAgICAgICAgIHRoaXMuZSgpOwogICAgICAgICAgc3lzdGVtSWQgPSB0aGlzLnMoKTsKICAgICAgICAgIGlmIChzeXN0ZW1JZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgdGhyb3cgdGhpcy5hKCJFeHBlY3RlZCBhIHN5c3RlbSBpZGVudGlmaWVyIik7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmUoKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgbGV0IGludGVybmFsU3Vic2V0OwogICAgICBpZiAoc2Nhbm5lci5iKCJbIikpIHsKICAgICAgICBpbnRlcm5hbFN1YnNldCA9IHNjYW5uZXIuQSgvXF1bXHgyMFx0XHJcbl0qPi8pOwogICAgICAgIGlmICghc2Nhbm5lci5iKCJdIikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgaW50ZXJuYWwgc3Vic2V0Iik7CiAgICAgICAgfQogICAgICAgIHRoaXMuZSgpOwogICAgICB9CiAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlVuY2xvc2VkIGRvY3R5cGUgZGVjbGFyYXRpb24iKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5mLnByZXNlcnZlRG9jdW1lbnRUeXBlID8gdGhpcy5qKG5ldyBYbWxEb2N1bWVudFR5cGUobmFtZSwgcHVibGljSWQsIHN5c3RlbUlkLCBpbnRlcm5hbFN1YnNldCksIHN0YXJ0SW5kZXgpIDogdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYW4gZWxlbWVudCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGFuIGVsZW1lbnQgd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1lbGVtZW50CiAgICAgKi8KICAgIEIoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCIpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGxldCBuYW1lID0gdGhpcy5yKCk7CiAgICAgIGlmICghbmFtZSkgewogICAgICAgIHNjYW5uZXIubyhzdGFydEluZGV4KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IGF0dHJpYnV0ZXMgPSB0aGlzLkkoKTsKICAgICAgbGV0IGlzRW1wdHkgPSAhIXNjYW5uZXIuYigiLz4iKTsKICAgICAgbGV0IGVsZW1lbnQgPSBuZXcgWG1sRWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzKTsKICAgICAgZWxlbWVudC5wYXJlbnQgPSB0aGlzLmw7CiAgICAgIGlmICghaXNFbXB0eSkgewogICAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgVW5jbG9zZWQgc3RhcnQgdGFnIGZvciBlbGVtZW50IFxgJHtuYW1lfVxgYCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubCA9IGVsZW1lbnQ7CiAgICAgICAgZG8gewogICAgICAgICAgdGhpcy5MKCk7CiAgICAgICAgfSB3aGlsZSAodGhpcy5CKCkgfHwgdGhpcy5NKCkgfHwgdGhpcy5LKCkgfHwgdGhpcy5FKCkgfHwgdGhpcy5EKCkpOwogICAgICAgIGxldCBlbmRUYWdNYXJrID0gc2Nhbm5lci5kOwogICAgICAgIGxldCBlbmRUYWdOYW1lOwogICAgICAgIGlmICghc2Nhbm5lci5iKCI8LyIpIHx8ICEoZW5kVGFnTmFtZSA9IHRoaXMucigpKSB8fCBlbmRUYWdOYW1lICE9PSBuYW1lKSB7CiAgICAgICAgICBzY2FubmVyLm8oZW5kVGFnTWFyayk7CiAgICAgICAgICB0aHJvdyB0aGlzLmEoYE1pc3NpbmcgZW5kIHRhZyBmb3IgZWxlbWVudCAke25hbWV9YCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZSgpOwogICAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgVW5jbG9zZWQgZW5kIHRhZyBmb3IgZWxlbWVudCAke25hbWV9YCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubCA9IGVsZW1lbnQucGFyZW50OwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmooZWxlbWVudCwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGFuIGBFcWAgcHJvZHVjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGFuIGBFcWAgcHJvZHVjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULUVxCiAgICAgKi8KICAgIHUoKSB7CiAgICAgIHRoaXMuZSgpOwogICAgICBpZiAodGhpcy5jLmIoIj0iKSkgewogICAgICAgIHRoaXMuZSgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYE1pc2NgIGNvbnRlbnQgaWYgcG9zc2libGUuCiAgICAgKgogICAgICogQHJldHVybnMgV2hldGhlciBhbnl0aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULU1pc2MKICAgICAqLwogICAgdygpIHsKICAgICAgcmV0dXJuIHRoaXMuRCgpIHx8IHRoaXMuRSgpIHx8IHRoaXMuZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBvbmUgb3IgbW9yZSBgTmFtZWAgY2hhcmFjdGVycyBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBgTmFtZWAgY2hhcmFjdGVycywgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vbmUgd2VyZSBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jTlQtTmFtZQogICAgICovCiAgICByKCkgewogICAgICByZXR1cm4gaXNOYW1lU3RhcnRDaGFyKHRoaXMuYy5oKCkpID8gdGhpcy5jLnYoaXNOYW1lQ2hhcikgOiBlbXB0eVN0cmluZzI7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1waQogICAgICovCiAgICBFKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgc3RhcnRJbmRleCA9IHNjYW5uZXIuZDsKICAgICAgaWYgKCFzY2FubmVyLmIoIjw/IikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IG5hbWUgPSB0aGlzLnIoKTsKICAgICAgaWYgKG5hbWUpIHsKICAgICAgICBpZiAobmFtZS50b0xvd2VyQ2FzZSgpID09PSAieG1sIikgewogICAgICAgICAgc2Nhbm5lci5vKHN0YXJ0SW5kZXgpOwogICAgICAgICAgdGhyb3cgdGhpcy5hKCJYTUwgZGVjbGFyYXRpb24gaXNuJ3QgYWxsb3dlZCBoZXJlIik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBwcm9jZXNzaW5nIGluc3RydWN0aW9uIik7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmUoKSkgewogICAgICAgIGlmIChzY2FubmVyLmIoIj8+IikpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbihuYW1lKSwgc3RhcnRJbmRleCk7CiAgICAgICAgfQogICAgICAgIHRocm93IHRoaXMuYSgiV2hpdGVzcGFjZSBpcyByZXF1aXJlZCBhZnRlciBhIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbmFtZSIpOwogICAgICB9CiAgICAgIGxldCBjb250ZW50ID0gc2Nhbm5lci50KCI/PiIpOwogICAgICB0aGlzLnAoY29udGVudCk7CiAgICAgIGlmICghc2Nhbm5lci5iKCI/PiIpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJVbnRlcm1pbmF0ZWQgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbihuYW1lLCBub3JtYWxpemVMaW5lQnJlYWtzKGNvbnRlbnQpKSwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgcHJvbG9nIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSBwcm9sb2cgd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNzZWMtcHJvbG9nLWR0ZAogICAgICovCiAgICBIKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgc3RhcnRJbmRleCA9IHNjYW5uZXIuZDsKICAgICAgdGhpcy5QKCk7CiAgICAgIHdoaWxlICh0aGlzLncoKSkgewogICAgICB9CiAgICAgIGlmICh0aGlzLk4oKSkgewogICAgICAgIHdoaWxlICh0aGlzLncoKSkgewogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3RhcnRJbmRleCA8IHNjYW5uZXIuZDsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYSBwdWJsaWMgaWRlbnRpZmllciBsaXRlcmFsIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zCiAgICAgKiAgIFZhbHVlIG9mIHRoZSBwdWJsaWMgaWRlbnRpZmllciBsaXRlcmFsIG1pbnVzIHF1b3Rlcywgb3IgYGZhbHNlYCBpZgogICAgICogICBub3RoaW5nIHdhcyBjb25zdW1lZC4gQW4gZW1wdHkgc3RyaW5nIGluZGljYXRlcyB0aGF0IGEgcHVibGljIGlkIGxpdGVyYWwKICAgICAqICAgd2FzIGNvbnN1bWVkIGJ1dCB3YXMgZW1wdHkuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1QdWJpZExpdGVyYWwKICAgICAqLwogICAgTygpIHsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSB0aGlzLmMuZDsKICAgICAgbGV0IHZhbHVlID0gdGhpcy5zKCk7CiAgICAgIGlmICh2YWx1ZSAhPT0gZmFsc2UgJiYgIS9eWy1ceDIwXHJcbmEtekEtWjAtOScoKSssLi86PT87ISojQCRfJV0qJC8udGVzdCh2YWx1ZSkpIHsKICAgICAgICB0aGlzLmMubyhzdGFydEluZGV4KTsKICAgICAgICB0aHJvdyB0aGlzLmEoIkludmFsaWQgY2hhcmFjdGVyIGluIHB1YmxpYyBpZGVudGlmaWVyIik7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhIHJlZmVyZW5jZSBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGRpZmZlcnMgZnJvbSBgY29uc3VtZUNvbnRlbnRSZWZlcmVuY2UoKWAgaW4gdGhhdCBhIGNvbnN1bWVkIHJlZmVyZW5jZQogICAgICogd2lsbCBiZSByZXR1cm5lZCByYXRoZXIgdGhhbiBhZGRlZCB0byB0aGUgZG9jdW1lbnQuCiAgICAgKgogICAgICogQHJldHVybnMKICAgICAqICAgUGFyc2VkIHJlZmVyZW5jZSB2YWx1ZSwgb3IgYGZhbHNlYCBpZiBub3RoaW5nIHdhcyBjb25zdW1lZCAodG8KICAgICAqICAgZGlzdGluZ3Vpc2ggZnJvbSBhIHJlZmVyZW5jZSB0aGF0IHJlc29sdmVzIHRvIGFuIGVtcHR5IHN0cmluZykuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1SZWZlcmVuY2UKICAgICAqLwogICAgQygpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgaWYgKCFzY2FubmVyLmIoIiYiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBsZXQgcmVmID0gc2Nhbm5lci52KGlzUmVmZXJlbmNlQ2hhcik7CiAgICAgIGlmIChzY2FubmVyLkYoKSAhPT0gIjsiKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJVbnRlcm1pbmF0ZWQgcmVmZXJlbmNlIChhIHJlZmVyZW5jZSBtdXN0IGVuZCB3aXRoIGA7YCkiKTsKICAgICAgfQogICAgICBsZXQgcGFyc2VkVmFsdWU7CiAgICAgIGlmIChyZWZbMF0gPT09ICIjIikgewogICAgICAgIGxldCBjb2RlUG9pbnQgPSByZWZbMV0gPT09ICJ4IiA/IHBhcnNlSW50KHJlZi5zbGljZSgyKSwgMTYpIDogcGFyc2VJbnQocmVmLnNsaWNlKDEpLCAxMCk7CiAgICAgICAgaWYgKGlzTmFOKGNvZGVQb2ludCkpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBjaGFyYWN0ZXIgcmVmZXJlbmNlIik7CiAgICAgICAgfQogICAgICAgIGlmICghaXNYbWxDb2RlUG9pbnQoY29kZVBvaW50KSkgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJDaGFyYWN0ZXIgcmVmZXJlbmNlIHJlc29sdmVzIHRvIGFuIGludmFsaWQgY2hhcmFjdGVyIik7CiAgICAgICAgfQogICAgICAgIHBhcnNlZFZhbHVlID0gU3RyaW5nLmZyb21Db2RlUG9pbnQoY29kZVBvaW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJzZWRWYWx1ZSA9IHByZWRlZmluZWRFbnRpdGllc1tyZWZdOwogICAgICAgIGlmIChwYXJzZWRWYWx1ZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICBsZXQgewogICAgICAgICAgICBpZ25vcmVVbmRlZmluZWRFbnRpdGllcywKICAgICAgICAgICAgcmVzb2x2ZVVuZGVmaW5lZEVudGl0eQogICAgICAgICAgfSA9IHRoaXMuZjsKICAgICAgICAgIGxldCB3cmFwcGVkUmVmID0gYCYke3JlZn07YDsKICAgICAgICAgIGlmIChyZXNvbHZlVW5kZWZpbmVkRW50aXR5KSB7CiAgICAgICAgICAgIGxldCByZXNvbHZlZFZhbHVlID0gcmVzb2x2ZVVuZGVmaW5lZEVudGl0eSh3cmFwcGVkUmVmKTsKICAgICAgICAgICAgaWYgKHJlc29sdmVkVmFsdWUgIT09IG51bGwgJiYgcmVzb2x2ZWRWYWx1ZSAhPT0gdm9pZCAwKSB7CiAgICAgICAgICAgICAgbGV0IHR5cGUgPSB0eXBlb2YgcmVzb2x2ZWRWYWx1ZTsKICAgICAgICAgICAgICBpZiAodHlwZSAhPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFxgcmVzb2x2ZVVuZGVmaW5lZEVudGl0eSgpXGAgbXVzdCByZXR1cm4gYSBzdHJpbmcsIFxgbnVsbFxgLCBvciBcYHVuZGVmaW5lZFxgLCBidXQgcmV0dXJuZWQgYSB2YWx1ZSBvZiB0eXBlICR7dHlwZX1gKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVkVmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChpZ25vcmVVbmRlZmluZWRFbnRpdGllcykgewogICAgICAgICAgICByZXR1cm4gd3JhcHBlZFJlZjsKICAgICAgICAgIH0KICAgICAgICAgIHNjYW5uZXIubygtd3JhcHBlZFJlZi5sZW5ndGgpOwogICAgICAgICAgdGhyb3cgdGhpcy5hKGBOYW1lZCBlbnRpdHkgaXNuJ3QgZGVmaW5lZDogJHt3cmFwcGVkUmVmfWApOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcGFyc2VkVmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgYFN5c3RlbUxpdGVyYWxgIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEEgYFN5c3RlbUxpdGVyYWxgIGlzIHNpbWlsYXIgdG8gYW4gYXR0cmlidXRlIHZhbHVlLCBidXQgYWxsb3dzIHRoZQogICAgICogY2hhcmFjdGVycyBgPGAgYW5kIGAmYCBhbmQgZG9lc24ndCByZXBsYWNlIHJlZmVyZW5jZXMuCiAgICAgKgogICAgICogQHJldHVybnMKICAgICAqICAgVmFsdWUgb2YgdGhlIGBTeXN0ZW1MaXRlcmFsYCBtaW51cyBxdW90ZXMsIG9yIGBmYWxzZWAgaWYgbm90aGluZyB3YXMKICAgICAqICAgY29uc3VtZWQuIEFuIGVtcHR5IHN0cmluZyBpbmRpY2F0ZXMgdGhhdCBhIGBTeXN0ZW1MaXRlcmFsYCB3YXMgY29uc3VtZWQKICAgICAqICAgYnV0IHdhcyBlbXB0eS4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULVN5c3RlbUxpdGVyYWwKICAgICAqLwogICAgcygpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHF1b3RlID0gc2Nhbm5lci5iKCciJykgfHwgc2Nhbm5lci5iKCInIik7CiAgICAgIGlmICghcXVvdGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IHZhbHVlID0gc2Nhbm5lci50KHF1b3RlKTsKICAgICAgdGhpcy5wKHZhbHVlKTsKICAgICAgaWYgKCFzY2FubmVyLmIocXVvdGUpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJNaXNzaW5nIGVuZCBxdW90ZSIpOwogICAgICB9CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgb25lIG9yIG1vcmUgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYW55IHdoaXRlc3BhY2UgY2hhcmFjdGVycyB3ZXJlIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyN3aGl0ZQogICAgICovCiAgICBlKCkgewogICAgICByZXR1cm4gISF0aGlzLmMudihpc1doaXRlc3BhY2UpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbiBYTUwgZGVjbGFyYXRpb24gaWYgcG9zc2libGUuCiAgICAgKgogICAgICogQHJldHVybnMgV2hldGhlciBhbiBYTUwgZGVjbGFyYXRpb24gd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1YTUxEZWNsCiAgICAgKi8KICAgIFAoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPD94bWwiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuZSgpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJJbnZhbGlkIFhNTCBkZWNsYXJhdGlvbiIpOwogICAgICB9CiAgICAgIGxldCB2ZXJzaW9uID0gISFzY2FubmVyLmIoInZlcnNpb24iKSAmJiB0aGlzLnUoKSAmJiB0aGlzLnMoKTsKICAgICAgaWYgKHZlcnNpb24gPT09IGZhbHNlKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJYTUwgdmVyc2lvbiBpcyBtaXNzaW5nIG9yIGludmFsaWQiKTsKICAgICAgfSBlbHNlIGlmICghL14xXC5bMC05XSskLy50ZXN0KHZlcnNpb24pKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJJbnZhbGlkIGNoYXJhY3RlciBpbiB2ZXJzaW9uIG51bWJlciIpOwogICAgICB9CiAgICAgIGxldCBlbmNvZGluZzsKICAgICAgbGV0IHN0YW5kYWxvbmU7CiAgICAgIGlmICh0aGlzLmUoKSkgewogICAgICAgIGVuY29kaW5nID0gISFzY2FubmVyLmIoImVuY29kaW5nIikgJiYgdGhpcy51KCkgJiYgdGhpcy5zKCk7CiAgICAgICAgaWYgKGVuY29kaW5nKSB7CiAgICAgICAgICB0aGlzLmUoKTsKICAgICAgICB9CiAgICAgICAgc3RhbmRhbG9uZSA9ICEhc2Nhbm5lci5iKCJzdGFuZGFsb25lIikgJiYgdGhpcy51KCkgJiYgdGhpcy5zKCk7CiAgICAgICAgaWYgKHN0YW5kYWxvbmUpIHsKICAgICAgICAgIGlmIChzdGFuZGFsb25lICE9PSAieWVzIiAmJiBzdGFuZGFsb25lICE9PSAibm8iKSB7CiAgICAgICAgICAgIHRocm93IHRoaXMuYSgnT25seSAieWVzIiBhbmQgIm5vIiBhcmUgcGVybWl0dGVkIGFzIHZhbHVlcyBvZiBgc3RhbmRhbG9uZWAnKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZSgpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIXNjYW5uZXIuYigiPz4iKSkgewogICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBvciB1bmNsb3NlZCBYTUwgZGVjbGFyYXRpb24iKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5mLnByZXNlcnZlWG1sRGVjbGFyYXRpb24gPyB0aGlzLmoobmV3IFhtbERlY2xhcmF0aW9uKAogICAgICAgIHZlcnNpb24sCiAgICAgICAgZW5jb2RpbmcgfHwgdm9pZCAwLAogICAgICAgIHN0YW5kYWxvbmUgfHwgdm9pZCAwCiAgICAgICksIHN0YXJ0SW5kZXgpIDogdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbiBgWG1sRXJyb3JgIGZvciB0aGUgY3VycmVudCBzY2FubmVyIHBvc2l0aW9uLgogICAgICovCiAgICBhKG1lc3NhZ2UpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBYbWxFcnJvcihtZXNzYWdlLCBzY2FubmVyLmQsIHNjYW5uZXIubSk7CiAgICB9CiAgICAvKioKICAgICAqIFRocm93cyBhbiBpbnZhbGlkIGNoYXJhY3RlciBlcnJvciBpZiBhbnkgY2hhcmFjdGVyIGluIHRoZSBnaXZlbiBfc3RyaW5nXwogICAgICogaXNuJ3QgYSB2YWxpZCBYTUwgY2hhcmFjdGVyLgogICAgICovCiAgICBwKHN0cmluZykgewogICAgICBsZXQgeyBsZW5ndGggfSA9IHN0cmluZzsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgICAgIGxldCBjcCA9IHN0cmluZy5jb2RlUG9pbnRBdChpKTsKICAgICAgICBpZiAoIWlzWG1sQ29kZVBvaW50KGNwKSkgewogICAgICAgICAgdGhpcy5jLm8oLShbLi4uc3RyaW5nXS5sZW5ndGggLSBpKSk7CiAgICAgICAgICB0aHJvdyB0aGlzLmEoIkludmFsaWQgY2hhcmFjdGVyIik7CiAgICAgICAgfQogICAgICAgIGlmIChjcCA+IDY1NTM1KSB7CiAgICAgICAgICBpICs9IDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKICBmdW5jdGlvbiBub3JtYWxpemVMaW5lQnJlYWtzKHRleHQpIHsKICAgIGxldCBpID0gMDsKICAgIHdoaWxlICgoaSA9IHRleHQuaW5kZXhPZigiXHIiLCBpKSkgIT09IC0xKSB7CiAgICAgIHRleHQgPSB0ZXh0W2kgKyAxXSA9PT0gIlxuIiA/IHRleHQuc2xpY2UoMCwgaSkgKyB0ZXh0LnNsaWNlKGkgKyAxKSA6IHRleHQuc2xpY2UoMCwgaSkgKyAiXG4iICsgdGV4dC5zbGljZShpICsgMSk7CiAgICB9CiAgICByZXR1cm4gdGV4dDsKICB9CiAgZnVuY3Rpb24gcGFyc2VYbWwoeG1sLCBvcHRpb25zKSB7CiAgICByZXR1cm4gbmV3IFBhcnNlcih4bWwsIG9wdGlvbnMpLmRvY3VtZW50OwogIH0KICBjbGFzcyBYbWxQYXJzZUVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgY29uc3RydWN0b3IobWVzc2FnZSkgewogICAgICBzdXBlcihtZXNzYWdlKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gcGFyc2VYbWxTdHJpbmcoeG1sU3RyaW5nKSB7CiAgICBsZXQgZG9jID0gbnVsbDsKICAgIHRyeSB7CiAgICAgIGRvYyA9IGJyb3dzZXIucGFyc2VYbWwoeG1sU3RyaW5nKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgbmV3IFhtbFBhcnNlRXJyb3IoZS5tZXNzYWdlKTsKICAgIH0KICAgIHJldHVybiBkb2M7CiAgfQogIGZ1bmN0aW9uIHN0cmlwTmFtZXNwYWNlKG5hbWUpIHsKICAgIGNvbnN0IGNvbG9uID0gbmFtZS5pbmRleE9mKCI6Iik7CiAgICByZXR1cm4gY29sb24gPiAtMSA/IG5hbWUuc3Vic3RyKGNvbG9uICsgMSkgOiBuYW1lOwogIH0KICBmdW5jdGlvbiBnZXRSb290RWxlbWVudCh4bWxEb2MpIHsKICAgIHJldHVybiB4bWxEb2MuY2hpbGRyZW5bMF07CiAgfQogIGZ1bmN0aW9uIGdldEVsZW1lbnROYW1lKGVsZW1lbnQpIHsKICAgIHJldHVybiBlbGVtZW50Lm5hbWUgfHwgIiI7CiAgfQogIGZ1bmN0aW9uIGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgbmFtZSwgbmVzdGVkID0gZmFsc2UpIHsKICAgIGNvbnN0IHN0cmlwcGVkTmFtZSA9IHN0cmlwTmFtZXNwYWNlKG5hbWUpOwogICAgZnVuY3Rpb24gcmVkdWNlcihwcmV2LCBjdXJyKSB7CiAgICAgIGlmIChzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShjdXJyKSkgPT09IHN0cmlwcGVkTmFtZSkgewogICAgICAgIHByZXYucHVzaChjdXJyKTsKICAgICAgfQogICAgICBpZiAobmVzdGVkICYmIEFycmF5LmlzQXJyYXkoY3Vyci5jaGlsZHJlbikpIHsKICAgICAgICByZXR1cm4gWy4uLnByZXYsIC4uLmN1cnIuY2hpbGRyZW4ucmVkdWNlKHJlZHVjZXIsIFtdKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHByZXY7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBlbGVtZW50ICYmIEFycmF5LmlzQXJyYXkoZWxlbWVudC5jaGlsZHJlbikgPyBlbGVtZW50LmNoaWxkcmVuLnJlZHVjZShyZWR1Y2VyLCBbXSkgOiBbXTsKICB9CiAgZnVuY3Rpb24gZmluZENoaWxkRWxlbWVudChlbGVtZW50LCBuYW1lLCBuZXN0ZWQgPSBmYWxzZSkgewogICAgcmV0dXJuIGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgbmFtZSwgbmVzdGVkKVswXSB8fCBudWxsOwogIH0KICBmdW5jdGlvbiBnZXRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCkgewogICAgcmV0dXJuIGVsZW1lbnQgJiYgQXJyYXkuaXNBcnJheShlbGVtZW50LmNoaWxkcmVuKSA/IFsKICAgICAgLi4uZWxlbWVudC5jaGlsZHJlbi5maWx0ZXIoCiAgICAgICAgKGVsKSA9PiBlbCBpbnN0YW5jZW9mIGJyb3dzZXIuWG1sRWxlbWVudAogICAgICApCiAgICBdIDogW107CiAgfQogIGZ1bmN0aW9uIGdldEVsZW1lbnRUZXh0KGVsZW1lbnQpIHsKICAgIGNvbnN0IHRleHROb2RlID0gZWxlbWVudCAmJiBBcnJheS5pc0FycmF5KGVsZW1lbnQuY2hpbGRyZW4pID8gZWxlbWVudC5jaGlsZHJlbi5maW5kKChub2RlKSA9PiBub2RlLnR5cGUgPT09ICJ0ZXh0IikgOiBudWxsOwogICAgcmV0dXJuIHRleHROb2RlID8gdGV4dE5vZGUudGV4dCA6ICIiOwogIH0KICBmdW5jdGlvbiBnZXRFbGVtZW50QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJOYW1lKSB7CiAgICByZXR1cm4gZWxlbWVudCAmJiBlbGVtZW50LmF0dHJpYnV0ZXNbYXR0ck5hbWVdIHx8ICIiOwogIH0KICBjbGFzcyBFbmRwb2ludEVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgY29uc3RydWN0b3IobWVzc2FnZSwgaHR0cFN0YXR1cywgaXNDcm9zc09yaWdpblJlbGF0ZWQpIHsKICAgICAgc3VwZXIobWVzc2FnZSk7CiAgICAgIHRoaXMuaHR0cFN0YXR1cyA9IGh0dHBTdGF0dXM7CiAgICAgIHRoaXMuaXNDcm9zc09yaWdpblJlbGF0ZWQgPSBpc0Nyb3NzT3JpZ2luUmVsYXRlZDsKICAgICAgdGhpcy5uYW1lID0gIkVuZHBvaW50RXJyb3IiOwogICAgfQogIH0KICBjbGFzcyBTZXJ2aWNlRXhjZXB0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKiBAcGFyYW0gbWVzc2FnZSBFcnJvciBtZXNzYWdlCiAgICAgKiBAcGFyYW0gcmVxdWVzdFVybCBVUkwgd2hpY2ggcmVzdWx0ZWQgaW4gdGhlIFNlcnZpY2VFeGNlcHRpb24KICAgICAqIEBwYXJhbSBjb2RlIE9wdGlvbmFsIFNlcnZpY2VFeGNlcHRpb24gY29kZQogICAgICogQHBhcmFtIGxvY2F0b3IgT3B0aW9uYWwgU2VydmljZUV4Y2VwdGlvbiBsb2NhdG9yCiAgICAgKiBAcGFyYW0gcmVzcG9uc2UgT3B0aW9uYWwgcmVzcG9uc2UgY29udGVudCByZWNlaXZlZAogICAgICovCiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXF1ZXN0VXJsLCBjb2RlLCBsb2NhdG9yLCByZXNwb25zZSkgewogICAgICBzdXBlcihtZXNzYWdlKTsKICAgICAgdGhpcy5yZXF1ZXN0VXJsID0gcmVxdWVzdFVybDsKICAgICAgdGhpcy5jb2RlID0gY29kZTsKICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjsKICAgICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlOwogICAgICB0aGlzLm5hbWUgPSAiU2VydmljZUV4Y2VwdGlvbkVycm9yIjsKICAgIH0KICB9CiAgZnVuY3Rpb24gcGFyc2Uoc2VydmljZUV4Y2VwdGlvbiwgdXJsKSB7CiAgICBjb25zdCBlcnJvckNvZGUgPSBnZXRFbGVtZW50QXR0cmlidXRlKHNlcnZpY2VFeGNlcHRpb24sICJjb2RlIikgfHwgZ2V0RWxlbWVudEF0dHJpYnV0ZShzZXJ2aWNlRXhjZXB0aW9uLCAiZXhjZXB0aW9uQ29kZSIpOwogICAgY29uc3QgZXJyb3JMb2NhdG9yID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShzZXJ2aWNlRXhjZXB0aW9uLCAibG9jYXRvciIpOwogICAgY29uc3QgdGV4dEVsZW1lbnQgPSBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VFeGNlcHRpb24sICJFeGNlcHRpb25UZXh0IikgfHwgc2VydmljZUV4Y2VwdGlvbjsKICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGdldEVsZW1lbnRUZXh0KHRleHRFbGVtZW50KS50cmltKCk7CiAgICByZXR1cm4gbmV3IFNlcnZpY2VFeGNlcHRpb25FcnJvcigKICAgICAgZXJyb3JNZXNzYWdlLAogICAgICB1cmwsCiAgICAgIGVycm9yQ29kZSwKICAgICAgZXJyb3JMb2NhdG9yLAogICAgICBzZXJ2aWNlRXhjZXB0aW9uLmRvY3VtZW50CiAgICApOwogIH0KICBmdW5jdGlvbiBjaGVjayhyZXNwb25zZSwgdXJsKSB7CiAgICBjb25zdCByb290RWwgPSBnZXRSb290RWxlbWVudChyZXNwb25zZSk7CiAgICBjb25zdCByb290RWxOYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUocm9vdEVsKSk7CiAgICBpZiAocm9vdEVsTmFtZSA9PT0gIlNlcnZpY2VFeGNlcHRpb25SZXBvcnQiKSB7CiAgICAgIGNvbnN0IGVycm9yID0gZmluZENoaWxkRWxlbWVudChyb290RWwsICJTZXJ2aWNlRXhjZXB0aW9uIik7CiAgICAgIGlmIChlcnJvcikgewogICAgICAgIHRocm93IHBhcnNlKGVycm9yLCB1cmwpOwogICAgICB9CiAgICB9CiAgICBpZiAocm9vdEVsTmFtZSA9PT0gIkV4Y2VwdGlvblJlcG9ydCIpIHsKICAgICAgY29uc3QgZXJyb3IgPSBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIkV4Y2VwdGlvbiIpOwogICAgICBpZiAoZXJyb3IpIHsKICAgICAgICB0aHJvdyBwYXJzZShlcnJvciwgdXJsKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0KICBmdW5jdGlvbiBlbmNvZGVFcnJvcihlcnJvcikgewogICAgY29uc3QgYmFzZSA9IHsKICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLAogICAgICBuYW1lOiBlcnJvci5uYW1lCiAgICB9OwogICAgaWYgKGVycm9yIGluc3RhbmNlb2YgU2VydmljZUV4Y2VwdGlvbkVycm9yKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgLi4uYmFzZSwKICAgICAgICBjb2RlOiBlcnJvci5jb2RlLAogICAgICAgIGxvY2F0b3I6IGVycm9yLmxvY2F0b3IsCiAgICAgICAgcmVzcG9uc2U6IGVycm9yLnJlc3BvbnNlLAogICAgICAgIHJlcXVlc3RVcmw6IGVycm9yLnJlcXVlc3RVcmwKICAgICAgfTsKICAgIH0KICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVuZHBvaW50RXJyb3IpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5iYXNlLAogICAgICAgIGh0dHBTdGF0dXM6IGVycm9yLmh0dHBTdGF0dXMsCiAgICAgICAgaXNDcm9zc09yaWdpblJlbGF0ZWQ6IGVycm9yLmlzQ3Jvc3NPcmlnaW5SZWxhdGVkCiAgICAgIH07CiAgICB9CiAgICByZXR1cm4gYmFzZTsKICB9CiAgZnVuY3Rpb24gYWRkVGFza0hhbmRsZXIodGFza05hbWUsIHNjb3BlLCBoYW5kbGVyKSB7CiAgICBjb25zdCB1c2VXb3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICJ1bmRlZmluZWQiOwogICAgY29uc3QgZXZlbnRIYW5kbGVyID0gYXN5bmMgKHJlcXVlc3QpID0+IHsKICAgICAgaWYgKHJlcXVlc3QudGFza05hbWUgPT09IHRhc2tOYW1lKSB7CiAgICAgICAgbGV0IHJlc3BvbnNlLCBlcnJvcjsKICAgICAgICB0cnkgewogICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBoYW5kbGVyKHJlcXVlc3QucGFyYW1zKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBlcnJvciA9IGVuY29kZUVycm9yKGUpOwogICAgICAgIH0KICAgICAgICBjb25zdCBtZXNzYWdlID0gKAogICAgICAgICAgLyoqIEB0eXBlIHtXb3JrZXJSZXNwb25zZX0gKi8KICAgICAgICAgIHsKICAgICAgICAgICAgdGFza05hbWUsCiAgICAgICAgICAgIHJlcXVlc3RJZDogcmVxdWVzdC5yZXF1ZXN0SWQsCiAgICAgICAgICAgIC4uLnJlc3BvbnNlICYmIHsgcmVzcG9uc2UgfSwKICAgICAgICAgICAgLi4uZXJyb3IgJiYgeyBlcnJvciB9CiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgICBpZiAodXNlV29ya2VyKSB7CiAgICAgICAgICBzY29wZS5wb3N0TWVzc2FnZShtZXNzYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2NvcGUuZGlzcGF0Y2hFdmVudCgKICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KCJvZ2MtY2xpZW50LnJlc3BvbnNlIiwgewogICAgICAgICAgICAgIGRldGFpbDogbWVzc2FnZQogICAgICAgICAgICB9KQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBpZiAodXNlV29ya2VyKSB7CiAgICAgIHNjb3BlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCAoZXZlbnQpID0+IGV2ZW50SGFuZGxlcihldmVudC5kYXRhKSk7CiAgICB9IGVsc2UgewogICAgICBzY29wZS5hZGRFdmVudExpc3RlbmVyKAogICAgICAgICJvZ2MtY2xpZW50LnJlcXVlc3QiLAogICAgICAgIChldmVudCkgPT4gZXZlbnRIYW5kbGVyKGV2ZW50LmRldGFpbCkKICAgICAgKTsKICAgIH0KICB9CiAgY29uc3QgRU5DT0RJTkdTID0gWyJ1dGYtOCIsICJ1dGYtMTYiLCAiaXNvLTg4NTktMSJdOwogIGNvbnN0IEZBTExCQUNLX0VOQ09ESU5HID0gInV0Zi04IjsKICBmdW5jdGlvbiBleHRyYWN0RW5jb2RpbmcoY29udGVudFR5cGUpIHsKICAgIGNvbnN0IG1hdGNoZXMgPSAvY2hhcnNldD0oW147XSspLy5leGVjKGNvbnRlbnRUeXBlKTsKICAgIHJldHVybiBtYXRjaGVzID8gbWF0Y2hlc1sxXSA6IG51bGw7CiAgfQogIGZ1bmN0aW9uIGRlY29kZVN0cmluZyhidWZmZXIsIGNvbnRlbnRUeXBlKSB7CiAgICBjb25zdCBlbmNvZGluZ0hpbnQgPSBjb250ZW50VHlwZSA/IGV4dHJhY3RFbmNvZGluZyhjb250ZW50VHlwZSkgOiBudWxsOwogICAgY29uc3QgZW5jb2RpbmdBdHRlbXB0cyA9IGVuY29kaW5nSGludCA/IFtlbmNvZGluZ0hpbnQsIC4uLkVOQ09ESU5HU10gOiBFTkNPRElOR1M7CiAgICBmb3IgKGNvbnN0IGVuY29kaW5nIG9mIGVuY29kaW5nQXR0ZW1wdHMpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKGVuY29kaW5nLCB7IGZhdGFsOiB0cnVlIH0pOwogICAgICAgIHJldHVybiBkZWNvZGVyLmRlY29kZShidWZmZXIpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgIH0KICAgIH0KICAgIGNvbnNvbGUud2FybigKICAgICAgYFtvZ2MtY2xpZW50XSBYTUwgZG9jdW1lbnQgZW5jb2RpbmcgY291bGQgbm90IGJlIGRldGVybWluZWQsIGZhbGxpbmcgYmFjayB0byAke0ZBTExCQUNLX0VOQ09ESU5HfS5gCiAgICApOwogICAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcihGQUxMQkFDS19FTkNPRElORykuZGVjb2RlKGJ1ZmZlcik7CiAgfQogIGNvbnN0IGZldGNoUHJvbWlzZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogIGxldCBmZXRjaE9wdGlvbnMgPSB7fTsKICBmdW5jdGlvbiBzZXRGZXRjaE9wdGlvbnMob3B0aW9ucykgewogICAgZmV0Y2hPcHRpb25zID0gb3B0aW9uczsKICB9CiAgZnVuY3Rpb24gZ2V0RmV0Y2hPcHRpb25zKCkgewogICAgcmV0dXJuIGZldGNoT3B0aW9uczsKICB9CiAgZnVuY3Rpb24gc2hhcmVkRmV0Y2godXJsLCBtZXRob2QgPSAiR0VUIiwgYXNKc29uKSB7CiAgICBsZXQgZmV0Y2hLZXkgPSBgJHttZXRob2R9IyR7dXJsfWA7CiAgICBpZiAoYXNKc29uKSB7CiAgICAgIGZldGNoS2V5ID0gYCR7bWV0aG9kfSNhc0pzb24jJHt1cmx9YDsKICAgIH0KICAgIGlmIChmZXRjaFByb21pc2VzLmhhcyhmZXRjaEtleSkpIHsKICAgICAgcmV0dXJuIGZldGNoUHJvbWlzZXMuZ2V0KGZldGNoS2V5KTsKICAgIH0KICAgIGNvbnN0IG9wdGlvbnMgPSB7IC4uLmdldEZldGNoT3B0aW9ucygpIH07CiAgICBvcHRpb25zLm1ldGhvZCA9IG1ldGhvZDsKICAgIGlmIChhc0pzb24pIHsKICAgICAgb3B0aW9ucy5oZWFkZXJzID0gImhlYWRlcnMiIGluIG9wdGlvbnMgPyBvcHRpb25zLmhlYWRlcnMgOiB7fTsKICAgICAgb3B0aW9ucy5oZWFkZXJzWyJBY2NlcHQiXSA9ICJhcHBsaWNhdGlvbi9qc29uIjsKICAgIH0KICAgIGNvbnN0IHByb21pc2UgPSBmZXRjaCh1cmwsIG9wdGlvbnMpLmNhdGNoKChlKSA9PiBlKS50aGVuKChyZXNwKSA9PiB7CiAgICAgIGZldGNoUHJvbWlzZXMuZGVsZXRlKGZldGNoS2V5KTsKICAgICAgcmV0dXJuIHJlc3A7CiAgICB9KTsKICAgIGZldGNoUHJvbWlzZXMuc2V0KGZldGNoS2V5LCBwcm9taXNlKTsKICAgIHJldHVybiBwcm9taXNlLnRoZW4oKHJlc3ApID0+IHsKICAgICAgaWYgKHJlc3AgaW5zdGFuY2VvZiBFcnJvcikKICAgICAgICB0aHJvdyByZXNwOwogICAgICByZXR1cm4gcmVzcDsKICAgIH0pOwogIH0KICBmdW5jdGlvbiBxdWVyeVhtbERvY3VtZW50KHVybCkgewogICAgcmV0dXJuIHNoYXJlZEZldGNoKHVybCkuY2F0Y2goCiAgICAgICgpID0+ICgKICAgICAgICAvLyBhdHRlbXB0IGEgSEVBRCB0byBzZWUgaWYgdGhlIGZhaWx1cmUgY29tZXMgZnJvbSBDT1JTIG9yIHRoZSBzZXJ2aWNlIGlzIGdlbmVyYWxseSB1bnJlYWNoYWJsZQogICAgICAgIGZldGNoKHVybCwgeyAuLi5nZXRGZXRjaE9wdGlvbnMoKSwgbWV0aG9kOiAiSEVBRCIsIG1vZGU6ICJuby1jb3JzIiB9KS5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRocm93IG5ldyBFbmRwb2ludEVycm9yKAogICAgICAgICAgICBgRmV0Y2hpbmcgdGhlIGRvY3VtZW50IGZhaWxlZCBlaXRoZXIgZHVlIHRvIG5ldHdvcmsgZXJyb3JzIG9yIHVucmVhY2hhYmxlIGhvc3QsIGVycm9yIGlzOiAke2Vycm9yLm1lc3NhZ2V9YCwKICAgICAgICAgICAgMCwKICAgICAgICAgICAgZmFsc2UKICAgICAgICAgICk7CiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aHJvdyBuZXcgRW5kcG9pbnRFcnJvcigKICAgICAgICAgICAgYFRoZSBkb2N1bWVudCBjb3VsZCBub3QgYmUgZmV0Y2hlZCBkdWUgdG8gQ09SUyBsaW1pdGF0aW9uc2AsCiAgICAgICAgICAgIDAsCiAgICAgICAgICAgIHRydWUKICAgICAgICAgICk7CiAgICAgICAgfSkKICAgICAgKQogICAgKS50aGVuKGFzeW5jIChyZXNwKSA9PiB7CiAgICAgIGlmICghcmVzcC5vaykgewogICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwLnRleHQoKTsKICAgICAgICB0aHJvdyBuZXcgRW5kcG9pbnRFcnJvcigKICAgICAgICAgIGBSZWNlaXZlZCBhbiBlcnJvciB3aXRoIGNvZGUgJHtyZXNwLnN0YXR1c306ICR7dGV4dH1gLAogICAgICAgICAgcmVzcC5zdGF0dXMsCiAgICAgICAgICBmYWxzZQogICAgICAgICk7CiAgICAgIH0KICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgcmVzcC5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBjb250ZW50VHlwZUhlYWRlciA9IHJlc3AuaGVhZGVycy5nZXQoIkNvbnRlbnQtVHlwZSIpOwogICAgICByZXR1cm4gZGVjb2RlU3RyaW5nKGJ1ZmZlciwgY29udGVudFR5cGVIZWFkZXIpOwogICAgfSkudGhlbigoeG1sKSA9PiBwYXJzZVhtbFN0cmluZyh4bWwpKTsKICB9CiAgZnVuY3Rpb24gc2V0UXVlcnlQYXJhbXModXJsLCBwYXJhbXMpIHsKICAgIGNvbnN0IGVuY29kZWRVcmxNYXRjaCA9IHVybC5tYXRjaCgvKGh0dHBzPyUzQSUyRiUyRlteL10rKSQvKTsKICAgIGlmIChlbmNvZGVkVXJsTWF0Y2gpIHsKICAgICAgY29uc3QgZW5jb2RlZFVybCA9IGVuY29kZWRVcmxNYXRjaFsxXTsKICAgICAgY29uc3QgbW9kaWZpZWRVcmwgPSBzZXRRdWVyeVBhcmFtcyhkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlZFVybCksIHBhcmFtcyk7CiAgICAgIHJldHVybiB1cmwucmVwbGFjZShlbmNvZGVkVXJsLCBlbmNvZGVVUklDb21wb25lbnQobW9kaWZpZWRVcmwpKTsKICAgIH0KICAgIGNvbnN0IHVybE9iaiA9IG5ldyBVUkwodXJsKTsKICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwYXJhbXMpOwogICAgY29uc3Qga2V5c0xvd2VyID0ga2V5cy5tYXAoKGtleSkgPT4ga2V5LnRvTG93ZXJDYXNlKCkpOwogICAgY29uc3QgdG9EZWxldGUgPSBbXTsKICAgIGZvciAoY29uc3QgcGFyYW0gb2YgdXJsT2JqLnNlYXJjaFBhcmFtcy5rZXlzKCkpIHsKICAgICAgaWYgKGtleXNMb3dlci5pbmRleE9mKHBhcmFtLnRvTG93ZXJDYXNlKCkpID4gLTEpIHsKICAgICAgICB0b0RlbGV0ZS5wdXNoKHBhcmFtKTsKICAgICAgfQogICAgfQogICAgdG9EZWxldGUubWFwKChwYXJhbSkgPT4gdXJsT2JqLnNlYXJjaFBhcmFtcy5kZWxldGUocGFyYW0pKTsKICAgIGtleXMuZm9yRWFjaCgKICAgICAgKGtleSkgPT4gdXJsT2JqLnNlYXJjaFBhcmFtcy5zZXQoCiAgICAgICAga2V5LAogICAgICAgIHBhcmFtc1trZXldID09PSB0cnVlID8gIiIgOiBwYXJhbXNba2V5XQogICAgICApCiAgICApOwogICAgcmV0dXJuIHVybE9iai50b1N0cmluZygpOwogIH0KICBjb25zdCBMYXRMb25DcnNMaXN0ID0gWwogICAgIkVQU0c6NDA0NiIsCiAgICAvLyBSR1JEQyAyMDA1CiAgICAiRVBTRzo0MDc1IiwKICAgIC8vIFNSRUY5OAogICAgIkVQU0c6NDEyMCIsCiAgICAvLyBHcmVlawogICAgIkVQU0c6NDEyMiIsCiAgICAvLyBBVFM3NwogICAgIkVQU0c6NDEyNCIsCiAgICAvLyBSVDkwCiAgICAiRVBTRzo0MTI2IiwKICAgIC8vIExLUzk0IChFVFJTODkpCiAgICAiRVBTRzo0MTQ5IiwKICAgIC8vIENIMTkwMwogICAgIkVQU0c6NDE1MSIsCiAgICAvLyBDSFRSRjk1CiAgICAiRVBTRzo0MTUzIiwKICAgIC8vIFJhc3NhZGlyYW4KICAgICJFUFNHOjQxNTUiLAogICAgLy8gRGFib2xhIDE5ODEKICAgICJFUFNHOjQxNTciLAogICAgLy8gTW91bnQgRGlsbG9uCiAgICAiRVBTRzo0MTU5IiwKICAgIC8vIEVMRDc5CiAgICAiRVBTRzo0MTYxIiwKICAgIC8vIFBhbXBhIGRlbCBDYXN0aWxsbwogICAgIkVQU0c6NDE2MyIsCiAgICAvLyBZZW1lbiBOR045NgogICAgIkVQU0c6NDE2NSIsCiAgICAvLyBCaXNzYXUKICAgICJFUFNHOjQxNjciLAogICAgLy8gTlpHRDIwMDAKICAgICJFUFNHOjQxNjkiLAogICAgLy8gQW1lcmljYW4gU2Ftb2EgMTk2MgogICAgIkVQU0c6NDE3MSIsCiAgICAvLyBSR0Y5MwogICAgIkVQU0c6NDE3MyIsCiAgICAvLyBJUkVORVQ5NQogICAgIkVQU0c6NDE3NSIsCiAgICAvLyBTaWVycmEgTGVvbmUgMTk2OAogICAgIkVQU0c6NDE3OCIsCiAgICAvLyBQdWxrb3ZvIDE5NDIoODMpCiAgICAiRVBTRzo0MTgwIiwKICAgIC8vIEVTVDk3CiAgICAiRVBTRzo0MTgyIiwKICAgIC8vIEF6b3JlcyBPY2NpZGVudGFsIDE5MzkKICAgICJFUFNHOjQxODQiLAogICAgLy8gQXpvcmVzIE9yaWVudGFsIDE5NDAKICAgICJFUFNHOjQxODgiLAogICAgLy8gT1NOSSAxOTUyCiAgICAiRVBTRzo0MTkwIiwKICAgIC8vIFBPU0dBUiA5OAogICAgIkVQU0c6NDE5MSIsCiAgICAvLyBBbGJhbmlhbiAxOTg3CiAgICAiRVBTRzo0MTk2IiwKICAgIC8vIEFtbWFzc2FsaWsgMTk1OAogICAgIkVQU0c6NDE5OCIsCiAgICAvLyBLb3Vzc2VyaQogICAgIkVQU0c6NDIwMiIsCiAgICAvLyBBR0Q2NgogICAgIkVQU0c6NDIxMCIsCiAgICAvLyBBcmMgMTk2MAogICAgIkVQU0c6NDIxMSIsCiAgICAvLyBCYXRhdmlhCiAgICAiRVBTRzo0MjE0IiwKICAgIC8vIEJlaWppbmcgMTk1NAogICAgIkVQU0c6NDIyNiIsCiAgICAvLyBDb3RlIGQnSXZvaXJlCiAgICAiRVBTRzo0MjI5IiwKICAgIC8vIEVneXB0IDE5MDcKICAgICJFUFNHOjQyMzEiLAogICAgLy8gRUQ4NwogICAgIkVQU0c6NDIzMyIsCiAgICAvLyBHYW5kYWppa2EgMTk3MAogICAgIkVQU0c6NDIzNiIsCiAgICAvLyBIdSBUenUgU2hhbiAxOTUwCiAgICAiRVBTRzo0MjM4IiwKICAgIC8vIElENzQKICAgICJFUFNHOjQyNDAiLAogICAgLy8gSW5kaWFuIDE5NzUKICAgICJFUFNHOjQyNDIiLAogICAgLy8gSkFENjkKICAgICJFUFNHOjQyNDQiLAogICAgLy8gS2FuZGF3YWxhCiAgICAiRVBTRzo0MjQ2IiwKICAgIC8vIEtPQwogICAgIkVQU0c6NDI0OCIsCiAgICAvLyBQU0FENTYKICAgICJFUFNHOjQyNTAiLAogICAgLy8gTGVpZ29uCiAgICAiRVBTRzo0MjUyIiwKICAgIC8vIExvbWUKICAgICJFUFNHOjQyNTUiLAogICAgLy8gSGVyYXQgTm9ydGgKICAgICJFUFNHOjQyNTgiLAogICAgLy8gRVRSUzg5CiAgICAiRVBTRzo0MjYxIiwKICAgIC8vIE1lcmNoaWNoCiAgICAiRVBTRzo0MjY0IiwKICAgIC8vIE1oYXN0CiAgICAiRVBTRzo0MjY3IiwKICAgIC8vIE5BRDI3CiAgICAiRVBTRzo0MjcwIiwKICAgIC8vIE5haHJ3YW4gMTk2NwogICAgIkVQU0c6NDI3MyIsCiAgICAvLyBOR08gMTk0OAogICAgIkVQU0c6NDI3NiIsCiAgICAvLyBOU1dDIDlaLTIKICAgICJFUFNHOjQyNzkiLAogICAgLy8gT1MoU04pODAKICAgICJFUFNHOjQyODEiLAogICAgLy8gUGFsZXN0aW5lIDE5MjMKICAgICJFUFNHOjQyODQiLAogICAgLy8gUHVsa292byAxOTQyCiAgICAiRVBTRzo0Mjg2IiwKICAgIC8vIFFhdGFyIDE5NDgKICAgICJFUFNHOjQyODgiLAogICAgLy8gTG9tYSBRdWludGFuYQogICAgIkVQU0c6NDI5MiIsCiAgICAvLyBTYXBwZXIgSGlsbCAxOTQzCiAgICAiRVBTRzo0Mjk1IiwKICAgIC8vIFNlcmluZHVuZwogICAgIkVQU0c6NDI5NyIsCiAgICAvLyBUYW5hbmFyaXZlCiAgICAiRVBTRzo0Mjk5IiwKICAgIC8vIFRNNjUKICAgICJFUFNHOjQzMDIiLAogICAgLy8gVHJpbmlkYWQgMTkwMwogICAgIkVQU0c6NDMyNCIsCiAgICAvLyBXR1MgNzJCRQogICAgIkVQU0c6NDMyNiIKICAgIC8vIFdHUyA4NAogIF07CiAgZnVuY3Rpb24gaGFzSW52ZXJ0ZWRDb29yZGluYXRlcyhjcnNOYW1lKSB7CiAgICByZXR1cm4gTGF0TG9uQ3JzTGlzdC5pbmRleE9mKHNpbXBsaWZ5RXBzZ1VybihjcnNOYW1lKSkgPiAtMTsKICB9CiAgZnVuY3Rpb24gc2ltcGxpZnlFcHNnVXJuKGZ1bGxDcnNOYW1lKSB7CiAgICBpZiAoL151cm46KD86eC0pP29nYzpkZWY6Y3JzOmVwc2c6Ly50ZXN0KGZ1bGxDcnNOYW1lLnRvTG93ZXJDYXNlKCkpKSB7CiAgICAgIGNvbnN0IGNvZGUgPSAvKFswLTldKykkLy5leGVjKGZ1bGxDcnNOYW1lKVsxXTsKICAgICAgcmV0dXJuIGBFUFNHOiR7Y29kZX1gOwogICAgfQogICAgcmV0dXJuIGZ1bGxDcnNOYW1lOwogIH0KICBmdW5jdGlvbiByZWFkT3BlcmF0aW9uVXJsc0Zyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHVybHMgPSB7fTsKICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiQ2FwYWJpbGl0eSIKICAgICk7CiAgICBjb25zdCByZXF1ZXN0ID0gZmluZENoaWxkRWxlbWVudChjYXBhYmlsaXR5LCAiUmVxdWVzdCIpOwogICAgZ2V0Q2hpbGRyZW5FbGVtZW50KHJlcXVlc3QpLmZvckVhY2goKG9wZXJhdGlvbikgPT4gewogICAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUob3BlcmF0aW9uKSk7CiAgICAgIHVybHNbb3BlcmF0aW9uTmFtZV0gPSBwYXJzZU9wZXJhdGlvbihvcGVyYXRpb24pOwogICAgfSk7CiAgICByZXR1cm4gdXJsczsKICB9CiAgZnVuY3Rpb24gcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICByZXR1cm4gZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKS5hdHRyaWJ1dGVzWyJ2ZXJzaW9uIl07CiAgfQogIGZ1bmN0aW9uIHJlYWRMYXllcnNGcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCB2ZXJzaW9uID0gcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiQ2FwYWJpbGl0eSIKICAgICk7CiAgICByZXR1cm4gZmluZENoaWxkcmVuRWxlbWVudChjYXBhYmlsaXR5LCAiTGF5ZXIiKS5tYXAoCiAgICAgIChsYXllckVsKSA9PiBwYXJzZUxheWVyKGxheWVyRWwsIHZlcnNpb24pCiAgICApOwogIH0KICBmdW5jdGlvbiByZWFkT3V0cHV0Rm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiQ2FwYWJpbGl0eSIKICAgICk7CiAgICBjb25zdCBnZXRNYXAgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KGNhcGFiaWxpdHksICJSZXF1ZXN0IiksCiAgICAgICJHZXRNYXAiCiAgICApOwogICAgY29uc3Qgb3V0cHV0Rm9ybWF0cyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZ2V0TWFwLCAiRm9ybWF0IikubWFwKAogICAgICBnZXRFbGVtZW50VGV4dAogICAgKTsKICAgIHJldHVybiBvdXRwdXRGb3JtYXRzOwogIH0KICBmdW5jdGlvbiByZWFkSW5mb0Zvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJDYXBhYmlsaXR5IgogICAgKTsKICAgIGNvbnN0IGdldEZlYXR1cmVJbmZvID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChjYXBhYmlsaXR5LCAiUmVxdWVzdCIpLAogICAgICAiR2V0RmVhdHVyZUluZm8iCiAgICApOwogICAgY29uc3Qgb3V0cHV0Rm9ybWF0cyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZ2V0RmVhdHVyZUluZm8sICJGb3JtYXQiKS5tYXAoCiAgICAgIGdldEVsZW1lbnRUZXh0CiAgICApOwogICAgcmV0dXJuIG91dHB1dEZvcm1hdHM7CiAgfQogIGZ1bmN0aW9uIHJlYWRFeGNlcHRpb25Gb3JtYXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiQ2FwYWJpbGl0eSIKICAgICk7CiAgICBjb25zdCBleGNlcHRpb24gPSBmaW5kQ2hpbGRFbGVtZW50KGNhcGFiaWxpdHksICJFeGNlcHRpb24iKTsKICAgIGNvbnN0IGV4Y2VwdGlvbkZvcm1hdHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGV4Y2VwdGlvbiwgIkZvcm1hdCIpLm1hcCgKICAgICAgZ2V0RWxlbWVudFRleHQKICAgICk7CiAgICByZXR1cm4gZXhjZXB0aW9uRm9ybWF0czsKICB9CiAgZnVuY3Rpb24gcmVhZEluZm9Gcm9tQ2FwYWJpbGl0aWVzJDIoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCBzZXJ2aWNlID0gZmluZENoaWxkRWxlbWVudChnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLCAiU2VydmljZSIpOwogICAgY29uc3Qgb3V0cHV0Rm9ybWF0cyA9IHJlYWRPdXRwdXRGb3JtYXRzRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBpbmZvRm9ybWF0cyA9IHJlYWRJbmZvRm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IGV4Y2VwdGlvbkZvcm1hdHMgPSByZWFkRXhjZXB0aW9uRm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IGtleXdvcmRzID0gZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiS2V5d29yZExpc3QiKSwKICAgICAgIktleXdvcmQiCiAgICApLm1hcChnZXRFbGVtZW50VGV4dCkuZmlsdGVyKCh2LCBpLCBhcnIpID0+IGFyci5pbmRleE9mKHYpID09PSBpKTsKICAgIGNvbnN0IHByb3ZpZGVyID0gcmVhZFByb3ZpZGVyRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYyk7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiVGl0bGUiKSksCiAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIk5hbWUiKSksCiAgICAgIGFic3RyYWN0OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJBYnN0cmFjdCIpKSwKICAgICAgb3V0cHV0Rm9ybWF0cywKICAgICAgaW5mb0Zvcm1hdHMsCiAgICAgIGV4Y2VwdGlvbkZvcm1hdHMsCiAgICAgIGZlZXM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkZlZXMiKSksCiAgICAgIGNvbnN0cmFpbnRzOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJBY2Nlc3NDb25zdHJhaW50cyIpKSwKICAgICAgcHJvdmlkZXIsCiAgICAgIGtleXdvcmRzCiAgICB9OwogIH0KICBmdW5jdGlvbiBwYXJzZU9wZXJhdGlvbihvcGVyYXRpb24pIHsKICAgIGNvbnN0IHVybHMgPSB7fTsKICAgIGNvbnN0IGRjcFR5cGUgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KG9wZXJhdGlvbiwgIkRDUFR5cGUiKTsKICAgIGNvbnN0IGh0dHAgPSBkY3BUeXBlLmZsYXRNYXAoKGQpID0+IGZpbmRDaGlsZEVsZW1lbnQoZCwgIkhUVFAiKSk7CiAgICBjb25zdCBtZXRob2RzID0gaHR0cC5mbGF0TWFwKChoKSA9PiBnZXRDaGlsZHJlbkVsZW1lbnQoaCkpOwogICAgbWV0aG9kcy5mb3JFYWNoKChtZXRob2QpID0+IHsKICAgICAgY29uc3Qgb25saW5lUmVzb3VyY2UgPSBmaW5kQ2hpbGRFbGVtZW50KG1ldGhvZCwgIk9ubGluZVJlc291cmNlIik7CiAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShtZXRob2QpKTsKICAgICAgdXJsc1ttZXRob2ROYW1lXSA9IGdldEVsZW1lbnRBdHRyaWJ1dGUob25saW5lUmVzb3VyY2UsICJ4bGluazpocmVmIik7CiAgICB9KTsKICAgIHJldHVybiB1cmxzOwogIH0KICBmdW5jdGlvbiBwYXJzZUxheWVyKGxheWVyRWwsIHZlcnNpb24sIGluaGVyaXRlZFNycyA9IFtdLCBpbmhlcml0ZWRTdHlsZXMgPSBbXSwgaW5oZXJpdGVkQXR0cmlidXRpb24gPSBudWxsLCBpbmhlcml0ZWRCb3VuZGluZ0JveGVzID0gbnVsbCwgaW5oZXJpdGVkTWF4U2NhbGVEZW5vbSA9IG51bGwsIGluaGVyaXRlZE1pblNjYWxlRGVub20gPSBudWxsKSB7CiAgICBjb25zdCBzcnNUYWcgPSB2ZXJzaW9uID09PSAiMS4zLjAiID8gIkNSUyIgOiAiU1JTIjsKICAgIGNvbnN0IHNyc0xpc3QgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGxheWVyRWwsIHNyc1RhZykubWFwKGdldEVsZW1lbnRUZXh0KTsKICAgIGNvbnN0IGF2YWlsYWJsZUNycyA9IHNyc0xpc3QubGVuZ3RoID4gMCA/IHNyc0xpc3QgOiBpbmhlcml0ZWRTcnM7CiAgICBjb25zdCBsYXllclN0eWxlcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQobGF5ZXJFbCwgIlN0eWxlIikubWFwKAogICAgICBwYXJzZUxheWVyU3R5bGUKICAgICk7CiAgICBjb25zdCBzdHlsZXMgPSBsYXllclN0eWxlcy5sZW5ndGggPiAwID8gbGF5ZXJTdHlsZXMgOiBpbmhlcml0ZWRTdHlsZXM7CiAgICBmdW5jdGlvbiBwYXJzZUJCb3gyKGJib3hFbCkgewogICAgICBjb25zdCBzcnMgPSBnZXRFbGVtZW50QXR0cmlidXRlKGJib3hFbCwgc3JzVGFnKTsKICAgICAgY29uc3QgYXR0cnMgPSBoYXNJbnZlcnRlZENvb3JkaW5hdGVzKHNycykgJiYgdmVyc2lvbiA9PT0gIjEuMy4wIiA/IFsibWlueSIsICJtaW54IiwgIm1heHkiLCAibWF4eCJdIDogWyJtaW54IiwgIm1pbnkiLCAibWF4eCIsICJtYXh5Il07CiAgICAgIHJldHVybiBhdHRycy5tYXAoKG5hbWUpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoYmJveEVsLCBuYW1lKSk7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZUV4R2VvZ3JhcGhpY0JvdW5kaW5nQm94KGJib3hFbCkgewogICAgICByZXR1cm4gWwogICAgICAgICJ3ZXN0Qm91bmRMb25naXR1ZGUiLAogICAgICAgICJzb3V0aEJvdW5kTGF0aXR1ZGUiLAogICAgICAgICJlYXN0Qm91bmRMb25naXR1ZGUiLAogICAgICAgICJub3J0aEJvdW5kTGF0aXR1ZGUiCiAgICAgIF0ubWFwKChuYW1lKSA9PiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGJib3hFbCwgbmFtZSkpKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlTGF0TG9uQm91bmRpbmdCb3goYmJveEVsKSB7CiAgICAgIHJldHVybiBbIm1pbngiLCAibWlueSIsICJtYXh4IiwgIm1heHkiXS5tYXAoCiAgICAgICAgKG5hbWUpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoYmJveEVsLCBuYW1lKQogICAgICApOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VTY2FsZUhpbnRWYWx1ZSh0ZXh0VmFsdWUsIGRlZmF1bHRWYWx1ZSkgewogICAgICBpZiAodGV4dFZhbHVlID09PSAiIikgewogICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7CiAgICAgIH0KICAgICAgcmV0dXJuIE1hdGguc3FydCgwLjUgKiBwYXJzZUZsb2F0KHRleHRWYWx1ZSkgKiogMikgLyAyOGUtNTsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlU2NhbGVIaW50KCkgewogICAgICBjb25zdCBzY2FsZUhpbnQgPSBmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJTY2FsZUhpbnQiKTsKICAgICAgaWYgKCFzY2FsZUhpbnQpIHsKICAgICAgICByZXR1cm4gW2luaGVyaXRlZE1pblNjYWxlRGVub20sIGluaGVyaXRlZE1heFNjYWxlRGVub21dOwogICAgICB9CiAgICAgIGNvbnN0IG1pbiA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoc2NhbGVIaW50LCAibWluIik7CiAgICAgIGNvbnN0IG1heCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoc2NhbGVIaW50LCAibWF4Iik7CiAgICAgIHJldHVybiBbCiAgICAgICAgcGFyc2VTY2FsZUhpbnRWYWx1ZShtaW4sIGluaGVyaXRlZE1pblNjYWxlRGVub20pLAogICAgICAgIHBhcnNlU2NhbGVIaW50VmFsdWUobWF4LCBpbmhlcml0ZWRNYXhTY2FsZURlbm9tKQogICAgICBdOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VTY2FsZURlbm9taW5hdG9yKG5hbWUsIGluaGVyaXRlZFZhbHVlKSB7CiAgICAgIGNvbnN0IHRleHRWYWx1ZSA9IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgbmFtZSkpOwogICAgICByZXR1cm4gdGV4dFZhbHVlID09PSAiIiA/IGluaGVyaXRlZFZhbHVlIDogcGFyc2VGbG9hdCh0ZXh0VmFsdWUpOwogICAgfQogICAgY29uc3QgYXR0cmlidXRpb25FbCA9IGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIkF0dHJpYnV0aW9uIik7CiAgICBjb25zdCBhdHRyaWJ1dGlvbiA9IGF0dHJpYnV0aW9uRWwgIT09IG51bGwgPyBwYXJzZUxheWVyQXR0cmlidXRpb24oYXR0cmlidXRpb25FbCkgOiBpbmhlcml0ZWRBdHRyaWJ1dGlvbjsKICAgIGNvbnN0IGxhdExvbkJib3hFbCA9IHZlcnNpb24gPT09ICIxLjMuMCIgPyBmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJFWF9HZW9ncmFwaGljQm91bmRpbmdCb3giKSA6IGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIkxhdExvbkJvdW5kaW5nQm94Iik7CiAgICBjb25zdCBiYXNlQm91bmRpbmdCb3ggPSB7fTsKICAgIGlmIChsYXRMb25CYm94RWwpIHsKICAgICAgYmFzZUJvdW5kaW5nQm94WyJFUFNHOjQzMjYiXSA9IHZlcnNpb24gPT09ICIxLjMuMCIgPyBwYXJzZUV4R2VvZ3JhcGhpY0JvdW5kaW5nQm94KGxhdExvbkJib3hFbCkgOiBwYXJzZUxhdExvbkJvdW5kaW5nQm94KGxhdExvbkJib3hFbCk7CiAgICB9CiAgICBsZXQgYm91bmRpbmdCb3hlcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQobGF5ZXJFbCwgIkJvdW5kaW5nQm94IikucmVkdWNlKAogICAgICAocHJldiwgYmJveEVsKSA9PiAoewogICAgICAgIC4uLnByZXYsCiAgICAgICAgW2dldEVsZW1lbnRBdHRyaWJ1dGUoYmJveEVsLCBzcnNUYWcpXTogcGFyc2VCQm94MihiYm94RWwpCiAgICAgIH0pLAogICAgICBiYXNlQm91bmRpbmdCb3gKICAgICk7CiAgICBib3VuZGluZ0JveGVzID0gT2JqZWN0LmtleXMoYm91bmRpbmdCb3hlcykubGVuZ3RoID4gMCB8fCBpbmhlcml0ZWRCb3VuZGluZ0JveGVzID09PSBudWxsID8gYm91bmRpbmdCb3hlcyA6IGluaGVyaXRlZEJvdW5kaW5nQm94ZXM7CiAgICBjb25zdCBxdWVyeWFibGUgPSBsYXllckVsLmF0dHJpYnV0ZXMucXVlcnlhYmxlID09PSAiMSIgfHwgbGF5ZXJFbC5hdHRyaWJ1dGVzLnF1ZXJ5YWJsZSA9PT0gInRydWUiID8gdHJ1ZSA6IGZhbHNlOwogICAgY29uc3Qgb3BhcXVlID0gbGF5ZXJFbC5hdHRyaWJ1dGVzLm9wYXF1ZSA9PT0gIjEiIHx8IGxheWVyRWwuYXR0cmlidXRlcy5vcGFxdWUgPT09ICJ0cnVlIiA/IHRydWUgOiBmYWxzZTsKICAgIGNvbnN0IGtleXdvcmRzID0gZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiS2V5d29yZExpc3QiKSwKICAgICAgIktleXdvcmQiCiAgICApLm1hcChnZXRFbGVtZW50VGV4dCkuZmlsdGVyKCh2LCBpLCBhcnIpID0+IGFyci5pbmRleE9mKHYpID09PSBpKTsKICAgIGxldCBtaW5TY2FsZURlbm9taW5hdG9yLCBtYXhTY2FsZURlbm9taW5hdG9yOwogICAgaWYgKHZlcnNpb24gPT09ICIxLjMuMCIpIHsKICAgICAgbWluU2NhbGVEZW5vbWluYXRvciA9IHBhcnNlU2NhbGVEZW5vbWluYXRvcigKICAgICAgICAiTWluU2NhbGVEZW5vbWluYXRvciIsCiAgICAgICAgaW5oZXJpdGVkTWluU2NhbGVEZW5vbQogICAgICApOwogICAgICBtYXhTY2FsZURlbm9taW5hdG9yID0gcGFyc2VTY2FsZURlbm9taW5hdG9yKAogICAgICAgICJNYXhTY2FsZURlbm9taW5hdG9yIiwKICAgICAgICBpbmhlcml0ZWRNYXhTY2FsZURlbm9tCiAgICAgICk7CiAgICB9IGVsc2UgewogICAgICBbbWluU2NhbGVEZW5vbWluYXRvciwgbWF4U2NhbGVEZW5vbWluYXRvcl0gPSBwYXJzZVNjYWxlSGludCgpOwogICAgfQogICAgY29uc3QgbWV0YWRhdGEgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGxheWVyRWwsICJNZXRhZGF0YVVSTCIpLm1hcCgKICAgICAgKG1ldGFkYXRhVXJsRWwpID0+ICh7CiAgICAgICAgdHlwZTogZ2V0RWxlbWVudEF0dHJpYnV0ZShtZXRhZGF0YVVybEVsLCAidHlwZSIpLAogICAgICAgIGZvcm1hdDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChtZXRhZGF0YVVybEVsLCAiRm9ybWF0IikpLAogICAgICAgIHVybDogZ2V0RWxlbWVudEF0dHJpYnV0ZSgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQobWV0YWRhdGFVcmxFbCwgIk9ubGluZVJlc291cmNlIiksCiAgICAgICAgICAieGxpbms6aHJlZiIKICAgICAgICApCiAgICAgIH0pCiAgICApOwogICAgY29uc3QgY2hpbGRyZW4gPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGxheWVyRWwsICJMYXllciIpLm1hcCgKICAgICAgKGxheWVyKSA9PiBwYXJzZUxheWVyKAogICAgICAgIGxheWVyLAogICAgICAgIHZlcnNpb24sCiAgICAgICAgYXZhaWxhYmxlQ3JzLAogICAgICAgIHN0eWxlcywKICAgICAgICBhdHRyaWJ1dGlvbiwKICAgICAgICBib3VuZGluZ0JveGVzLAogICAgICAgIG1heFNjYWxlRGVub21pbmF0b3IsCiAgICAgICAgbWluU2NhbGVEZW5vbWluYXRvcgogICAgICApCiAgICApOwogICAgcmV0dXJuIHsKICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiTmFtZSIpKSwKICAgICAgdGl0bGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIlRpdGxlIikpLAogICAgICBhYnN0cmFjdDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiQWJzdHJhY3QiKSksCiAgICAgIGF2YWlsYWJsZUNycywKICAgICAgc3R5bGVzLAogICAgICBhdHRyaWJ1dGlvbiwKICAgICAgYm91bmRpbmdCb3hlcywKICAgICAga2V5d29yZHMsCiAgICAgIHF1ZXJ5YWJsZSwKICAgICAgb3BhcXVlLAogICAgICAuLi5taW5TY2FsZURlbm9taW5hdG9yICE9PSBudWxsID8geyBtaW5TY2FsZURlbm9taW5hdG9yIH0gOiB7fSwKICAgICAgLi4ubWF4U2NhbGVEZW5vbWluYXRvciAhPT0gbnVsbCA/IHsgbWF4U2NhbGVEZW5vbWluYXRvciB9IDoge30sCiAgICAgIC4uLm1ldGFkYXRhLmxlbmd0aCAmJiB7IG1ldGFkYXRhIH0sCiAgICAgIC4uLmNoaWxkcmVuLmxlbmd0aCAmJiB7IGNoaWxkcmVuIH0KICAgIH07CiAgfQogIGZ1bmN0aW9uIHBhcnNlTGF5ZXJTdHlsZShzdHlsZUVsKSB7CiAgICBjb25zdCBsZWdlbmRVcmwgPSBnZXRFbGVtZW50QXR0cmlidXRlKAogICAgICBmaW5kQ2hpbGRFbGVtZW50KGZpbmRDaGlsZEVsZW1lbnQoc3R5bGVFbCwgIkxlZ2VuZFVSTCIpLCAiT25saW5lUmVzb3VyY2UiKSwKICAgICAgInhsaW5rOmhyZWYiCiAgICApOwogICAgY29uc3QgYWJzdHJhY3QgPSBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHN0eWxlRWwsICJBYnN0cmFjdCIpKTsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc3R5bGVFbCwgIk5hbWUiKSksCiAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHN0eWxlRWwsICJUaXRsZSIpKSwKICAgICAgLi4uYWJzdHJhY3QgJiYgeyBhYnN0cmFjdCB9LAogICAgICAuLi5sZWdlbmRVcmwgJiYgeyBsZWdlbmRVcmwgfQogICAgfTsKICB9CiAgZnVuY3Rpb24gcGFyc2VMYXllckF0dHJpYnV0aW9uKGF0dHJpYnV0aW9uRWwpIHsKICAgIGNvbnN0IGxvZ29VcmwgPSBnZXRFbGVtZW50QXR0cmlidXRlKAogICAgICBmaW5kQ2hpbGRFbGVtZW50KAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoYXR0cmlidXRpb25FbCwgIkxvZ29VUkwiKSwKICAgICAgICAiT25saW5lUmVzb3VyY2UiCiAgICAgICksCiAgICAgICJ4bGluazpocmVmIgogICAgKTsKICAgIGNvbnN0IHVybCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoYXR0cmlidXRpb25FbCwgIk9ubGluZVJlc291cmNlIiksCiAgICAgICJ4bGluazpocmVmIgogICAgKTsKICAgIGNvbnN0IHRpdGxlID0gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhdHRyaWJ1dGlvbkVsLCAiVGl0bGUiKSk7CiAgICByZXR1cm4gewogICAgICAuLi50aXRsZSAmJiB7IHRpdGxlIH0sCiAgICAgIC4uLnVybCAmJiB7IHVybCB9LAogICAgICAuLi5sb2dvVXJsICYmIHsgbG9nb1VybCB9CiAgICB9OwogIH0KICBmdW5jdGlvbiByZWFkUHJvdmlkZXJGcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCBzZXJ2aWNlID0gZmluZENoaWxkRWxlbWVudChnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLCAiU2VydmljZSIpOwogICAgY29uc3QgY29udGFjdEluZm9ybWF0aW9uID0gZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiQ29udGFjdEluZm9ybWF0aW9uIik7CiAgICBjb25zdCBjb250YWN0UGVyc29uUHJpbWFyeSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGNvbnRhY3RJbmZvcm1hdGlvbiwKICAgICAgIkNvbnRhY3RQZXJzb25QcmltYXJ5IgogICAgKTsKICAgIGNvbnN0IGFkZHJlc3MgPSBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvcm1hdGlvbiwgIkNvbnRhY3RBZGRyZXNzIik7CiAgICByZXR1cm4gewogICAgICBjb250YWN0OiB7CiAgICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RQZXJzb25QcmltYXJ5LCAiQ29udGFjdFBlcnNvbiIpCiAgICAgICAgKSwKICAgICAgICBvcmdhbml6YXRpb246IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChjb250YWN0UGVyc29uUHJpbWFyeSwgIkNvbnRhY3RPcmdhbml6YXRpb24iKQogICAgICAgICksCiAgICAgICAgcG9zaXRpb246IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChjb250YWN0SW5mb3JtYXRpb24sICJDb250YWN0UG9zaXRpb24iKQogICAgICAgICksCiAgICAgICAgcGhvbmU6IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChjb250YWN0SW5mb3JtYXRpb24sICJDb250YWN0Vm9pY2VUZWxlcGhvbmUiKQogICAgICAgICksCiAgICAgICAgZmF4OiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdEluZm9ybWF0aW9uLCAiQ29udGFjdEZhY3NpbWlsZVRlbGVwaG9uZSIpCiAgICAgICAgKSwKICAgICAgICBhZGRyZXNzOiB7CiAgICAgICAgICBkZWxpdmVyeVBvaW50OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJBZGRyZXNzIikpLAogICAgICAgICAgY2l0eTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiQ2l0eSIpKSwKICAgICAgICAgIGFkbWluaXN0cmF0aXZlQXJlYTogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIlN0YXRlT3JQcm92aW5jZSIpCiAgICAgICAgICApLAogICAgICAgICAgcG9zdGFsQ29kZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiUG9zdENvZGUiKSksCiAgICAgICAgICBjb3VudHJ5OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJDb3VudHJ5IikpCiAgICAgICAgfSwKICAgICAgICBlbWFpbDogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvcm1hdGlvbiwgIkNvbnRhY3RFbGVjdHJvbmljTWFpbEFkZHJlc3MiKQogICAgICAgICkKICAgICAgfQogICAgfTsKICB9CiAgZnVuY3Rpb24gcmVhZFByb3ZpZGVyRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHNlcnZpY2VQcm92aWRlciA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJTZXJ2aWNlUHJvdmlkZXIiCiAgICApOwogICAgY29uc3Qgc2VydmljZUNvbnRhY3QgPSBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VQcm92aWRlciwgIlNlcnZpY2VDb250YWN0Iik7CiAgICBjb25zdCBjb250YWN0SW5mbyA9IGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZUNvbnRhY3QsICJDb250YWN0SW5mbyIpOwogICAgY29uc3QgcGhvbmUgPSBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvLCAiUGhvbmUiKTsKICAgIGNvbnN0IGFkZHJlc3MgPSBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvLCAiQWRkcmVzcyIpOwogICAgcmV0dXJuIHsKICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlUHJvdmlkZXIsICJQcm92aWRlck5hbWUiKSksCiAgICAgIHNpdGU6IGdldEVsZW1lbnRBdHRyaWJ1dGUoCiAgICAgICAgZmluZENoaWxkRWxlbWVudChzZXJ2aWNlUHJvdmlkZXIsICJQcm92aWRlclNpdGUiKSwKICAgICAgICAieGxpbms6aHJlZiIKICAgICAgKSwKICAgICAgY29udGFjdDogewogICAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZUNvbnRhY3QsICJJbmRpdmlkdWFsTmFtZSIpKSwKICAgICAgICBwb3NpdGlvbjogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VDb250YWN0LCAiUG9zaXRpb25OYW1lIikKICAgICAgICApLAogICAgICAgIHBob25lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHBob25lLCAiVm9pY2UiKSksCiAgICAgICAgZmF4OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHBob25lLCAiRmFjc2ltaWxlIikpLAogICAgICAgIGFkZHJlc3M6IHsKICAgICAgICAgIGRlbGl2ZXJ5UG9pbnQ6IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJEZWxpdmVyeVBvaW50IikKICAgICAgICAgICksCiAgICAgICAgICBjaXR5OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJDaXR5IikpLAogICAgICAgICAgYWRtaW5pc3RyYXRpdmVBcmVhOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgICAgZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiQWRtaW5pc3RyYXRpdmVBcmVhIikKICAgICAgICAgICksCiAgICAgICAgICBwb3N0YWxDb2RlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJQb3N0YWxDb2RlIikpLAogICAgICAgICAgY291bnRyeTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiQ291bnRyeSIpKQogICAgICAgIH0sCiAgICAgICAgZW1haWw6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkVsZWN0cm9uaWNNYWlsQWRkcmVzcyIpKQogICAgICB9CiAgICB9OwogIH0KICBmdW5jdGlvbiByZWFkT3BlcmF0aW9uVXJsc0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCB1cmxzID0ge307CiAgICBjb25zdCBjYXBhYmlsaXRpZXMgPSBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3Qgb3BlcmF0aW9uc01ldGFkYXRhID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgY2FwYWJpbGl0aWVzLAogICAgICAiT3BlcmF0aW9uc01ldGFkYXRhIgogICAgKTsKICAgIGlmIChvcGVyYXRpb25zTWV0YWRhdGEpIHsKICAgICAgZmluZENoaWxkcmVuRWxlbWVudChvcGVyYXRpb25zTWV0YWRhdGEsICJPcGVyYXRpb24iKS5mb3JFYWNoKAogICAgICAgIChvcGVyYXRpb24pID0+IHsKICAgICAgICAgIGNvbnN0IG5hbWUgPSBnZXRFbGVtZW50QXR0cmlidXRlKG9wZXJhdGlvbiwgIm5hbWUiKTsKICAgICAgICAgIHVybHNbbmFtZV0gPSBwYXJzZU9wZXJhdGlvbjExMChvcGVyYXRpb24pOwogICAgICAgIH0KICAgICAgKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KGNhcGFiaWxpdGllcywgIkNhcGFiaWxpdHkiKTsKICAgICAgY29uc3QgcmVxdWVzdCA9IGZpbmRDaGlsZEVsZW1lbnQoY2FwYWJpbGl0eSwgIlJlcXVlc3QiKTsKICAgICAgZ2V0Q2hpbGRyZW5FbGVtZW50KHJlcXVlc3QpLmZvckVhY2goKG9wZXJhdGlvbikgPT4gewogICAgICAgIGNvbnN0IG5hbWUgPSBzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShvcGVyYXRpb24pKTsKICAgICAgICB1cmxzW25hbWVdID0gcGFyc2VPcGVyYXRpb24xMDAob3BlcmF0aW9uKTsKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gdXJsczsKICB9CiAgZnVuY3Rpb24gcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgcmV0dXJuIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYykuYXR0cmlidXRlc1sidmVyc2lvbiJdOwogIH0KICBmdW5jdGlvbiByZWFkT3V0cHV0Rm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCB2ZXJzaW9uID0gcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyk7CiAgICBsZXQgb3V0cHV0Rm9ybWF0czsKICAgIGlmICh2ZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpKSB7CiAgICAgIGNvbnN0IGdldEZlYXR1cmUgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksICJDYXBhYmlsaXR5IiksCiAgICAgICAgICAiUmVxdWVzdCIKICAgICAgICApLAogICAgICAgICJHZXRGZWF0dXJlIgogICAgICApOwogICAgICBvdXRwdXRGb3JtYXRzID0gZ2V0Q2hpbGRyZW5FbGVtZW50KAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZ2V0RmVhdHVyZSwgIlJlc3VsdEZvcm1hdCIpCiAgICAgICkubWFwKGdldEVsZW1lbnROYW1lKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IG9wZXJhdGlvbnMgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICAgIk9wZXJhdGlvbnNNZXRhZGF0YSIKICAgICAgKTsKICAgICAgY29uc3QgZ2V0RmVhdHVyZSA9IGZpbmRDaGlsZHJlbkVsZW1lbnQob3BlcmF0aW9ucywgIk9wZXJhdGlvbiIpLmZpbmQoCiAgICAgICAgKGVsKSA9PiBnZXRFbGVtZW50QXR0cmlidXRlKGVsLCAibmFtZSIpID09PSAiR2V0RmVhdHVyZSIKICAgICAgKTsKICAgICAgY29uc3QgcGFyYW1ldGVyID0gZmluZENoaWxkcmVuRWxlbWVudChnZXRGZWF0dXJlLCAiUGFyYW1ldGVyIikuZmluZCgKICAgICAgICAoZWwpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWwsICJuYW1lIikgPT09ICJvdXRwdXRGb3JtYXQiCiAgICAgICk7CiAgICAgIG91dHB1dEZvcm1hdHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KHBhcmFtZXRlciwgIlZhbHVlIiwgdHJ1ZSkubWFwKAogICAgICAgIGdldEVsZW1lbnRUZXh0CiAgICAgICk7CiAgICB9CiAgICByZXR1cm4gb3V0cHV0Rm9ybWF0czsKICB9CiAgZnVuY3Rpb24gcmVhZEluZm9Gcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCB2ZXJzaW9uID0gcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBzZXJ2aWNlVGFnID0gdmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/ICJTZXJ2aWNlIiA6ICJTZXJ2aWNlSWRlbnRpZmljYXRpb24iOwogICAgY29uc3QgbmFtZVRhZyA9IHZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikgPyAiTmFtZSIgOiAiU2VydmljZVR5cGUiOwogICAgY29uc3Qgc2VydmljZSA9IGZpbmRDaGlsZEVsZW1lbnQoZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwgc2VydmljZVRhZyk7CiAgICBsZXQga2V5d29yZHM7CiAgICBpZiAodmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSkgewogICAgICBrZXl3b3JkcyA9IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIktleXdvcmRzIikpLnNwbGl0KCIsIikubWFwKChrZXl3b3JkKSA9PiBrZXl3b3JkLnRyaW0oKSk7CiAgICB9IGVsc2UgewogICAgICBrZXl3b3JkcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoCiAgICAgICAgZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiS2V5d29yZHMiKSwKICAgICAgICAiS2V5d29yZCIKICAgICAgKS5tYXAoZ2V0RWxlbWVudFRleHQpOwogICAgfQogICAgbGV0IHByb3ZpZGVyOwogICAgaWYgKHZlcnNpb24gIT09ICIxLjAuMCIpIHsKICAgICAgcHJvdmlkZXIgPSByZWFkUHJvdmlkZXJGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyk7CiAgICB9CiAgICByZXR1cm4gewogICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiVGl0bGUiKSksCiAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgbmFtZVRhZykpLAogICAgICBhYnN0cmFjdDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiQWJzdHJhY3QiKSksCiAgICAgIGZlZXM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkZlZXMiKSksCiAgICAgIGNvbnN0cmFpbnRzOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJBY2Nlc3NDb25zdHJhaW50cyIpKSwKICAgICAga2V5d29yZHMsCiAgICAgIHByb3ZpZGVyLAogICAgICBvdXRwdXRGb3JtYXRzOiByZWFkT3V0cHV0Rm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKQogICAgfTsKICB9CiAgZnVuY3Rpb24gcmVhZEZlYXR1cmVUeXBlc0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCB2ZXJzaW9uID0gcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBvdXRwdXRGb3JtYXRzID0gcmVhZE91dHB1dEZvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBjYXBhYmlsaXR5ID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgIkZlYXR1cmVUeXBlTGlzdCIKICAgICk7CiAgICByZXR1cm4gZmluZENoaWxkcmVuRWxlbWVudChjYXBhYmlsaXR5LCAiRmVhdHVyZVR5cGUiKS5tYXAoCiAgICAgIChmZWF0dXJlVHlwZUVsKSA9PiBwYXJzZUZlYXR1cmVUeXBlKGZlYXR1cmVUeXBlRWwsIHZlcnNpb24sIG91dHB1dEZvcm1hdHMpCiAgICApOwogIH0KICBmdW5jdGlvbiBwYXJzZU9wZXJhdGlvbjEwMChvcGVyYXRpb24pIHsKICAgIGNvbnN0IHVybHMgPSB7fTsKICAgIGNvbnN0IGRjcFR5cGUgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KG9wZXJhdGlvbiwgIkRDUFR5cGUiKTsKICAgIGNvbnN0IGh0dHAgPSBkY3BUeXBlLmZsYXRNYXAoKGQpID0+IGZpbmRDaGlsZHJlbkVsZW1lbnQoZCwgIkhUVFAiKSk7CiAgICBjb25zdCBtZXRob2RzID0gaHR0cC5mbGF0TWFwKChoKSA9PiBnZXRDaGlsZHJlbkVsZW1lbnQoaCkpOwogICAgbWV0aG9kcy5mb3JFYWNoKChtZXRob2QpID0+IHsKICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IHN0cmlwTmFtZXNwYWNlKGdldEVsZW1lbnROYW1lKG1ldGhvZCkpOwogICAgICB1cmxzW21ldGhvZE5hbWVdID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShtZXRob2QsICJvbmxpbmVSZXNvdXJjZSIpOwogICAgfSk7CiAgICByZXR1cm4gdXJsczsKICB9CiAgZnVuY3Rpb24gcGFyc2VPcGVyYXRpb24xMTAob3BlcmF0aW9uKSB7CiAgICBjb25zdCB1cmxzID0ge307CiAgICBjb25zdCBkY3BUeXBlID0gZmluZENoaWxkcmVuRWxlbWVudChvcGVyYXRpb24sICJEQ1AiKTsKICAgIGNvbnN0IGh0dHAgPSBkY3BUeXBlLmZsYXRNYXAoKGQpID0+IGZpbmRDaGlsZEVsZW1lbnQoZCwgIkhUVFAiKSk7CiAgICBjb25zdCBtZXRob2RzID0gaHR0cC5mbGF0TWFwKChoKSA9PiBnZXRDaGlsZHJlbkVsZW1lbnQoaCkpOwogICAgbWV0aG9kcy5mb3JFYWNoKChtZXRob2QpID0+IHsKICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IHN0cmlwTmFtZXNwYWNlKGdldEVsZW1lbnROYW1lKG1ldGhvZCkpOwogICAgICB1cmxzW21ldGhvZE5hbWVdID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShtZXRob2QsICJ4bGluazpocmVmIik7CiAgICB9KTsKICAgIHJldHVybiB1cmxzOwogIH0KICBmdW5jdGlvbiBwYXJzZUZlYXR1cmVUeXBlKGZlYXR1cmVUeXBlRWwsIHNlcnZpY2VWZXJzaW9uLCBkZWZhdWx0T3V0cHV0Rm9ybWF0cykgewogICAgY29uc3Qgc3JzVGFnID0gc2VydmljZVZlcnNpb24uc3RhcnRzV2l0aCgiMi4iKSA/ICJDUlMiIDogIlNSUyI7CiAgICBjb25zdCBkZWZhdWx0U3JzVGFnID0gc2VydmljZVZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikgPyAiU1JTIiA6IGBEZWZhdWx0JHtzcnNUYWd9YDsKICAgIGZ1bmN0aW9uIHBhcnNlQkJveDEwMCgpIHsKICAgICAgY29uc3QgYmJveEVsID0gZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiTGF0TG9uZ0JvdW5kaW5nQm94Iik7CiAgICAgIHJldHVybiBbIm1pbngiLCAibWlueSIsICJtYXh4IiwgIm1heHkiXS5tYXAoKG5hbWUpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoYmJveEVsLCBuYW1lKSkubWFwKHBhcnNlRmxvYXQpOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VCQm94MigpIHsKICAgICAgY29uc3QgYmJveEVsID0gZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiV0dTODRCb3VuZGluZ0JveCIpOwogICAgICByZXR1cm4gWyJMb3dlckNvcm5lciIsICJVcHBlckNvcm5lciJdLm1hcCgoZWxOYW1lKSA9PiBmaW5kQ2hpbGRFbGVtZW50KGJib3hFbCwgZWxOYW1lKSkubWFwKChjb3JuZXJFbCkgPT4gZ2V0RWxlbWVudFRleHQoY29ybmVyRWwpLnNwbGl0KCIgIikpLnJlZHVjZSgocHJldiwgY3VycikgPT4gWy4uLnByZXYsIC4uLmN1cnJdKS5tYXAocGFyc2VGbG9hdCk7CiAgICB9CiAgICBjb25zdCBvdGhlckNycyA9IHNlcnZpY2VWZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpID8gW10gOiBmaW5kQ2hpbGRyZW5FbGVtZW50KGZlYXR1cmVUeXBlRWwsIGBPdGhlciR7c3JzVGFnfWApLm1hcChnZXRFbGVtZW50VGV4dCkubWFwKHNpbXBsaWZ5RXBzZ1Vybik7CiAgICBjb25zdCBvdXRwdXRGb3JtYXRzID0gc2VydmljZVZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikgPyBbXSA6IGZpbmRDaGlsZHJlbkVsZW1lbnQoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIk91dHB1dEZvcm1hdHMiKSwKICAgICAgIkZvcm1hdCIKICAgICkubWFwKGdldEVsZW1lbnRUZXh0KTsKICAgIGNvbnN0IGtleXdvcmRzID0gc2VydmljZVZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikgPyBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJLZXl3b3JkcyIpKS5zcGxpdCgiLCIpLm1hcCgoa2V5d29yZCkgPT4ga2V5d29yZC50cmltKCkpIDogZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiS2V5d29yZHMiKSwKICAgICAgIktleXdvcmQiCiAgICApLm1hcChnZXRFbGVtZW50VGV4dCkuZmlsdGVyKCh2LCBpLCBhcnIpID0+IGFyci5pbmRleE9mKHYpID09PSBpKTsKICAgIGNvbnN0IG1ldGFkYXRhID0gc2VydmljZVZlcnNpb24gPT09ICIyLjAuMCIgPyBmaW5kQ2hpbGRyZW5FbGVtZW50KGZlYXR1cmVUeXBlRWwsICJNZXRhZGF0YVVSTCIpLm1hcCgKICAgICAgKG1ldGFkYXRhVXJsRWwpID0+ICh7CiAgICAgICAgdXJsOiBnZXRFbGVtZW50QXR0cmlidXRlKG1ldGFkYXRhVXJsRWwsICJ4bGluazpocmVmIikKICAgICAgfSkKICAgICkgOiBmaW5kQ2hpbGRyZW5FbGVtZW50KGZlYXR1cmVUeXBlRWwsICJNZXRhZGF0YVVSTCIpLm1hcCgKICAgICAgKG1ldGFkYXRhVXJsRWwpID0+ICh7CiAgICAgICAgZm9ybWF0OiBnZXRFbGVtZW50QXR0cmlidXRlKG1ldGFkYXRhVXJsRWwsICJmb3JtYXQiKSwKICAgICAgICB0eXBlOiBnZXRFbGVtZW50QXR0cmlidXRlKG1ldGFkYXRhVXJsRWwsICJ0eXBlIiksCiAgICAgICAgdXJsOiBnZXRFbGVtZW50VGV4dChtZXRhZGF0YVVybEVsKS50cmltKCkKICAgICAgfSkKICAgICk7CiAgICByZXR1cm4gewogICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJOYW1lIikpLAogICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiVGl0bGUiKSksCiAgICAgIGFic3RyYWN0OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJBYnN0cmFjdCIpKSwKICAgICAgZGVmYXVsdENyczogc2ltcGxpZnlFcHNnVXJuKAogICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgZGVmYXVsdFNyc1RhZykpCiAgICAgICksCiAgICAgIG90aGVyQ3JzLAogICAgICBvdXRwdXRGb3JtYXRzOiBvdXRwdXRGb3JtYXRzLmxlbmd0aCA+IDAgPyBvdXRwdXRGb3JtYXRzIDogZGVmYXVsdE91dHB1dEZvcm1hdHMsCiAgICAgIGxhdExvbkJvdW5kaW5nQm94OiBzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/IHBhcnNlQkJveDEwMCgpIDogcGFyc2VCQm94MigpLAogICAgICBrZXl3b3JkcywKICAgICAgLi4ubWV0YWRhdGEubGVuZ3RoICYmIHsgbWV0YWRhdGEgfQogICAgfTsKICB9CiAgZnVuY3Rpb24gcGFyc2VCQm94KHhtbEVsZW1lbnQpIHsKICAgIGNvbnN0IHJlc3VsdCA9IFsiTG93ZXJDb3JuZXIiLCAiVXBwZXJDb3JuZXIiXS5tYXAoKGVsTmFtZSkgPT4gZmluZENoaWxkRWxlbWVudCh4bWxFbGVtZW50LCBlbE5hbWUpKS5tYXAoKGNvcm5lckVsKSA9PiBnZXRFbGVtZW50VGV4dChjb3JuZXJFbCkuc3BsaXQoIiAiKSkucmVkdWNlKChwcmV2LCBjdXJyKSA9PiBbLi4ucHJldiwgLi4uY3Vycl0pLm1hcChwYXJzZUZsb2F0KTsKICAgIGlmIChyZXN1bHQuc29tZShOdW1iZXIuaXNOYU4pKQogICAgICByZXR1cm4gbnVsbDsKICAgIHJldHVybiByZXN1bHQ7CiAgfQogIGZ1bmN0aW9uIHJlYWRJbmZvRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHJvb3RFbCA9IGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBzZXJ2aWNlID0gZmluZENoaWxkRWxlbWVudChyb290RWwsICJTZXJ2aWNlSWRlbnRpZmljYXRpb24iKTsKICAgIGNvbnN0IGtleXdvcmRzID0gZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiS2V5d29yZHMiKSwKICAgICAgIktleXdvcmQiCiAgICApLm1hcChnZXRFbGVtZW50VGV4dCk7CiAgICBjb25zdCBtZXRhZGF0YSA9IGZpbmRDaGlsZEVsZW1lbnQocm9vdEVsLCAiT3BlcmF0aW9uc01ldGFkYXRhIik7CiAgICBjb25zdCBnZXRUaWxlT3BlcmF0aW9uID0gZmluZENoaWxkcmVuRWxlbWVudChtZXRhZGF0YSwgIk9wZXJhdGlvbiIpLmZpbmQoCiAgICAgIChlbCkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgIm5hbWUiKSA9PSAiR2V0VGlsZSIKICAgICk7CiAgICBjb25zdCBnZXRUaWxlVXJscyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZ2V0VGlsZU9wZXJhdGlvbiwgIkdldCIsIHRydWUpLnJlZHVjZSgKICAgICAgKHByZXYsIGN1cnIpID0+IHsKICAgICAgICBjb25zdCBlbmNvZGluZ1R5cGUgPSBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY3VyciwgIlZhbHVlIiwgdHJ1ZSkKICAgICAgICApOwogICAgICAgIGNvbnN0IHVybCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoY3VyciwgInhsaW5rOmhyZWYiKTsKICAgICAgICBpZiAoZW5jb2RpbmdUeXBlLnRvTG93ZXJDYXNlKCkgPT09ICJyZXN0ZnVsIikKICAgICAgICAgIHJldHVybiB7IC4uLnByZXYsIHJlc3Q6IHVybCB9OwogICAgICAgIHJldHVybiB7IC4uLnByZXYsIGt2cDogdXJsIH07CiAgICAgIH0sCiAgICAgIHt9CiAgICApOwogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIlRpdGxlIikpLAogICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJTZXJ2aWNlVHlwZSIpKSwKICAgICAgYWJzdHJhY3Q6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkFic3RyYWN0IikpLAogICAgICBmZWVzOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJGZWVzIikpLAogICAgICBjb25zdHJhaW50czogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiQWNjZXNzQ29uc3RyYWludHMiKSksCiAgICAgIGtleXdvcmRzLAogICAgICBwcm92aWRlcjogcmVhZFByb3ZpZGVyRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpLAogICAgICBnZXRUaWxlVXJscwogICAgfTsKICB9CiAgZnVuY3Rpb24gcmVhZE1hdHJpeFNldHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgZnVuY3Rpb24gcGFyc2VNYXRyaXhTZXQoZWxlbWVudCkgewogICAgICBjb25zdCB0b3BMZWZ0ID0gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiVG9wTGVmdENvcm5lciIpKS5zcGxpdCgiICIpLm1hcChwYXJzZUZsb2F0KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZGVudGlmaWVyOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJJZGVudGlmaWVyIikpLAogICAgICAgIHRpbGVXaWR0aDogcGFyc2VJbnQoCiAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJUaWxlV2lkdGgiKSkKICAgICAgICApLAogICAgICAgIHRpbGVIZWlnaHQ6IHBhcnNlSW50KAogICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiVGlsZUhlaWdodCIpKQogICAgICAgICksCiAgICAgICAgbWF0cml4V2lkdGg6IHBhcnNlSW50KAogICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiTWF0cml4V2lkdGgiKSkKICAgICAgICApLAogICAgICAgIG1hdHJpeEhlaWdodDogcGFyc2VJbnQoCiAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJNYXRyaXhIZWlnaHQiKSkKICAgICAgICApLAogICAgICAgIHNjYWxlRGVub21pbmF0b3I6IHBhcnNlRmxvYXQoCiAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJTY2FsZURlbm9taW5hdG9yIikpCiAgICAgICAgKSwKICAgICAgICB0b3BMZWZ0CiAgICAgIH07CiAgICB9CiAgICBjb25zdCBjb250ZW50cyA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJDb250ZW50cyIKICAgICk7CiAgICBjb25zdCBtYXRyaXhTZXRzID0gZmluZENoaWxkcmVuRWxlbWVudChjb250ZW50cywgIlRpbGVNYXRyaXhTZXQiKTsKICAgIHJldHVybiBtYXRyaXhTZXRzLm1hcCgoZWxlbWVudCkgPT4gewogICAgICBjb25zdCB3ZWxsS25vd25TY2FsZVNldCA9IGdldEVsZW1lbnRUZXh0KAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIldlbGxLbm93blNjYWxlU2V0IikKICAgICAgKTsKICAgICAgY29uc3QgYm91bmRpbmdCb3ggPSBwYXJzZUJCb3goZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiQm91bmRpbmdCb3giKSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWRlbnRpZmllcjogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiSWRlbnRpZmllciIpKSwKICAgICAgICBjcnM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIlN1cHBvcnRlZENSUyIpKSwKICAgICAgICB0aWxlTWF0cmljZXM6IGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgIlRpbGVNYXRyaXgiKS5tYXAoCiAgICAgICAgICBwYXJzZU1hdHJpeFNldAogICAgICAgICksCiAgICAgICAgLi4uYm91bmRpbmdCb3ggJiYgeyBib3VuZGluZ0JveCB9LAogICAgICAgIC4uLndlbGxLbm93blNjYWxlU2V0ICYmIHsgd2VsbEtub3duU2NhbGVTZXQgfQogICAgICB9OwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIHJlYWRMYXllcnNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3Qgcm9vdEVsID0gZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IGNvbnRlbnRzRWwgPSBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIkNvbnRlbnRzIik7CiAgICBmdW5jdGlvbiBnZXRNYXRyaXhTZXRDcnMoY29udGVudHNFbDIsIGlkZW50aWZpZXIpIHsKICAgICAgY29uc3QgbWF0cml4U2V0ID0gZmluZENoaWxkcmVuRWxlbWVudChjb250ZW50c0VsMiwgIlRpbGVNYXRyaXhTZXQiKS5maW5kKAogICAgICAgIChtYXRyaXhTZXRFbCkgPT4gewogICAgICAgICAgY29uc3QgaWRlbnRpZmllckVsID0gZmluZENoaWxkRWxlbWVudChtYXRyaXhTZXRFbCwgIklkZW50aWZpZXIiKTsKICAgICAgICAgIHJldHVybiBnZXRFbGVtZW50VGV4dChpZGVudGlmaWVyRWwpID09PSBpZGVudGlmaWVyOwogICAgICAgIH0KICAgICAgKTsKICAgICAgcmV0dXJuIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQobWF0cml4U2V0LCAiU3VwcG9ydGVkQ1JTIikpOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VNYXRyaXhTZXRMaW5rKGVsZW1lbnQpIHsKICAgICAgY29uc3QgaWRlbnRpZmllciA9IGdldEVsZW1lbnRUZXh0KAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIlRpbGVNYXRyaXhTZXQiKQogICAgICApOwogICAgICBjb25zdCBjcnMgPSBnZXRNYXRyaXhTZXRDcnMoY29udGVudHNFbCwgaWRlbnRpZmllcik7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWRlbnRpZmllciwKICAgICAgICBjcnMsCiAgICAgICAgbGltaXRzOiBmaW5kQ2hpbGRyZW5FbGVtZW50KGVsZW1lbnQsICJUaWxlTWF0cml4TGltaXRzIiwgdHJ1ZSkubWFwKAogICAgICAgICAgKGVsZW1lbnQyKSA9PiAoewogICAgICAgICAgICB0aWxlTWF0cml4OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiVGlsZU1hdHJpeCIpKSwKICAgICAgICAgICAgbWluVGlsZVJvdzogcGFyc2VJbnQoCiAgICAgICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIk1pblRpbGVSb3ciKSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgbWluVGlsZUNvbDogcGFyc2VJbnQoCiAgICAgICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIk1pblRpbGVDb2wiKSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgbWF4VGlsZVJvdzogcGFyc2VJbnQoCiAgICAgICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIk1heFRpbGVSb3ciKSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgbWF4VGlsZUNvbDogcGFyc2VJbnQoCiAgICAgICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIk1heFRpbGVDb2wiKSkKICAgICAgICAgICAgKQogICAgICAgICAgfSkKICAgICAgICApCiAgICAgIH07CiAgICB9CiAgICBjb25zdCBnZXRUaWxlT3BlcmF0aW9uID0gZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChyb290RWwsICJPcGVyYXRpb25zTWV0YWRhdGEiKSwKICAgICAgIk9wZXJhdGlvbiIKICAgICkuZmluZCgoZWwpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWwsICJuYW1lIikgPT0gIkdldFRpbGUiKTsKICAgIGNvbnN0IGdldEt2cEVsdCA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZ2V0VGlsZU9wZXJhdGlvbiwgIkdldCIsIHRydWUpLmZpbHRlcigKICAgICAgKGVsdCkgPT4gewogICAgICAgIGNvbnN0IGVuY29kaW5nVHlwZSA9IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWx0LCAiVmFsdWUiLCB0cnVlKSk7CiAgICAgICAgcmV0dXJuIGVuY29kaW5nVHlwZS50b0xvd2VyQ2FzZSgpID09PSAia3ZwIjsKICAgICAgfQogICAgKVswXTsKICAgIGNvbnN0IGdldEt2cFVybCA9IGdldEt2cEVsdCA/IGdldEVsZW1lbnRBdHRyaWJ1dGUoZ2V0S3ZwRWx0LCAieGxpbms6aHJlZiIpIDogIiI7CiAgICBjb25zdCBjb250ZW50cyA9IGZpbmRDaGlsZEVsZW1lbnQocm9vdEVsLCAiQ29udGVudHMiKTsKICAgIGNvbnN0IGxheWVycyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoY29udGVudHMsICJMYXllciIpOwogICAgcmV0dXJuIGxheWVycy5tYXAoKGVsZW1lbnQpID0+IHsKICAgICAgY29uc3QgbGF0TG9uQm91bmRpbmdCb3ggPSBwYXJzZUJCb3goCiAgICAgICAgZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiV0dTODRCb3VuZGluZ0JveCIpCiAgICAgICk7CiAgICAgIGxldCBkZWZhdWx0U3R5bGUgPSAiIjsKICAgICAgY29uc3Qgc3R5bGVzID0gZmluZENoaWxkcmVuRWxlbWVudChlbGVtZW50LCAiU3R5bGUiKS5tYXAoKGVsZW1lbnQyKSA9PiB7CiAgICAgICAgY29uc3QgbGVnZW5kVXJsID0gZ2V0RWxlbWVudEF0dHJpYnV0ZSgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJMZWdlbmRVUkwiKSwKICAgICAgICAgICJ4bGluazpocmVmIgogICAgICAgICk7CiAgICAgICAgY29uc3QgYWJzdHJhY3QgPSBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiQWJzdHJhY3QiKSk7CiAgICAgICAgY29uc3Qgc3R5bGUgPSB7CiAgICAgICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIlRpdGxlIikpLAogICAgICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIklkZW50aWZpZXIiKSksCiAgICAgICAgICAuLi5hYnN0cmFjdCAmJiB7IGFic3RyYWN0IH0sCiAgICAgICAgICAuLi5sZWdlbmRVcmwgJiYgeyBsZWdlbmRVcmwgfQogICAgICAgIH07CiAgICAgICAgaWYgKGdldEVsZW1lbnRBdHRyaWJ1dGUoZWxlbWVudDIsICJpc0RlZmF1bHQiKSA9PT0gInRydWUiKSB7CiAgICAgICAgICBkZWZhdWx0U3R5bGUgPSBzdHlsZS5uYW1lOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3R5bGU7CiAgICAgIH0pOwogICAgICBjb25zdCBvdXRwdXRGb3JtYXRzID0gZmluZENoaWxkcmVuRWxlbWVudChlbGVtZW50LCAiRm9ybWF0IikubWFwKAogICAgICAgIGdldEVsZW1lbnRUZXh0CiAgICAgICk7CiAgICAgIGNvbnN0IHJlc291cmNlTGlua3MgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICAgIGVsZW1lbnQsCiAgICAgICAgIlJlc291cmNlVVJMIgogICAgICApLmZpbHRlcigKICAgICAgICAoZWxlbWVudDIpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWxlbWVudDIsICJyZXNvdXJjZVR5cGUiKSA9PT0gInRpbGUiCiAgICAgICkubWFwKChlbGVtZW50MikgPT4gewogICAgICAgIGNvbnN0IGZvcm1hdCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWxlbWVudDIsICJmb3JtYXQiKTsKICAgICAgICBjb25zdCB1cmwgPSBnZXRFbGVtZW50QXR0cmlidXRlKGVsZW1lbnQyLCAidGVtcGxhdGUiKTsKICAgICAgICByZXR1cm4geyBmb3JtYXQsIHVybCwgZW5jb2Rpbmc6ICJSRVNUIiB9OwogICAgICB9KTsKICAgICAgaWYgKGdldEt2cFVybCkgewogICAgICAgIHJlc291cmNlTGlua3MucHVzaCgKICAgICAgICAgIC4uLm91dHB1dEZvcm1hdHMubWFwKChmb3JtYXQpID0+ICh7CiAgICAgICAgICAgIGVuY29kaW5nOiAiS1ZQIiwKICAgICAgICAgICAgdXJsOiBnZXRLdnBVcmwsCiAgICAgICAgICAgIGZvcm1hdAogICAgICAgICAgfSkpCiAgICAgICAgKTsKICAgICAgfQogICAgICBjb25zdCBtYXRyaXhTZXRzID0gZmluZENoaWxkcmVuRWxlbWVudChlbGVtZW50LCAiVGlsZU1hdHJpeFNldExpbmsiKS5tYXAoCiAgICAgICAgcGFyc2VNYXRyaXhTZXRMaW5rCiAgICAgICk7CiAgICAgIGNvbnN0IGRpbWVuc2lvbnMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGVsZW1lbnQsICJEaW1lbnNpb24iKS5tYXAoCiAgICAgICAgKGVsZW1lbnQyKSA9PiB7CiAgICAgICAgICBjb25zdCBpZGVudGlmaWVyID0gZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJJZGVudGlmaWVyIikKICAgICAgICAgICk7CiAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgICAgZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIkRlZmF1bHQiKQogICAgICAgICAgKTsKICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudDIsICJWYWx1ZXMiKS5tYXAoCiAgICAgICAgICAgIGdldEVsZW1lbnRUZXh0CiAgICAgICAgICApOwogICAgICAgICAgcmV0dXJuIHsgaWRlbnRpZmllciwgZGVmYXVsdFZhbHVlLCB2YWx1ZXMgfTsKICAgICAgICB9CiAgICAgICk7CiAgICAgIHJldHVybiB7CiAgICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiSWRlbnRpZmllciIpKSwKICAgICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiVGl0bGUiKSksCiAgICAgICAgYWJzdHJhY3Q6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIkFic3RyYWN0IikpLAogICAgICAgIHN0eWxlcywKICAgICAgICByZXNvdXJjZUxpbmtzLAogICAgICAgIG1hdHJpeFNldHMsCiAgICAgICAgZGVmYXVsdFN0eWxlLAogICAgICAgIC4uLmxhdExvbkJvdW5kaW5nQm94ICYmIHsgbGF0TG9uQm91bmRpbmdCb3ggfSwKICAgICAgICAuLi5kaW1lbnNpb25zICYmIHsgZGltZW5zaW9ucyB9CiAgICAgIH07CiAgICB9KTsKICB9CiAgZnVuY3Rpb24gcGFyc2VGZWF0dXJlUHJvcHMoZ2V0RmVhdHVyZXNEb2MsIGZlYXR1cmVUeXBlRnVsbCwgc2VydmljZVZlcnNpb24pIHsKICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBnZXRSb290RWxlbWVudChnZXRGZWF0dXJlc0RvYyk7CiAgICBsZXQgbWVtYmVyczsKICAgIGlmIChzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIyLjAiKSkgewogICAgICBtZW1iZXJzID0gZmluZENoaWxkcmVuRWxlbWVudChjb2xsZWN0aW9uLCAibWVtYmVyIikubWFwKAogICAgICAgIChwYXJlbnQpID0+IGdldENoaWxkcmVuRWxlbWVudChwYXJlbnQpWzBdCiAgICAgICk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBtZW1iZXJzUm9vdCA9IGZpbmRDaGlsZEVsZW1lbnQoY29sbGVjdGlvbiwgImZlYXR1cmVNZW1iZXJzIik7CiAgICAgIG1lbWJlcnMgPSBtZW1iZXJzUm9vdCA/IGdldENoaWxkcmVuRWxlbWVudChtZW1iZXJzUm9vdCkgOiBmaW5kQ2hpbGRyZW5FbGVtZW50KGNvbGxlY3Rpb24sICJmZWF0dXJlTWVtYmVyIikubWFwKAogICAgICAgIChwYXJlbnQpID0+IGdldENoaWxkcmVuRWxlbWVudChwYXJlbnQpWzBdCiAgICAgICk7CiAgICB9CiAgICBjb25zdCBpZEF0dHIgPSBzZXJ2aWNlVmVyc2lvbiA9PT0gIjEuMC4wIiA/ICJmaWQiIDogImdtbDppZCI7CiAgICBmdW5jdGlvbiBpc0VsZW1lbnRQcm9wZXJ0eShwcm9wTmFtZSkgewogICAgICByZXR1cm4gcHJvcE5hbWUgaW4gZmVhdHVyZVR5cGVGdWxsLnByb3BlcnRpZXM7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZUVsZW1lbnRQcm9wZXJ0eVZhbHVlKHByb3BOYW1lLCB2YWx1ZUFzU3RyaW5nKSB7CiAgICAgIGNvbnN0IHR5cGUgPSBmZWF0dXJlVHlwZUZ1bGwucHJvcGVydGllc1twcm9wTmFtZV07CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgImludGVnZXIiOgogICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlQXNTdHJpbmcpOwogICAgICAgIGNhc2UgImZsb2F0IjoKICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlQXNTdHJpbmcpOwogICAgICAgIGNhc2UgImJvb2xlYW4iOgogICAgICAgICAgcmV0dXJuIHZhbHVlQXNTdHJpbmcgPT09ICJ0cnVlIjsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIHZhbHVlQXNTdHJpbmc7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGdldFByb3BlcnRpZXMobWVtYmVyRWwpIHsKICAgICAgcmV0dXJuIGdldENoaWxkcmVuRWxlbWVudChtZW1iZXJFbCkuZmlsdGVyKChlbCkgPT4gaXNFbGVtZW50UHJvcGVydHkoc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUoZWwpKSkpLnJlZHVjZSgocHJldiwgY3VycikgPT4gewogICAgICAgIGNvbnN0IHByb3BOYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUoY3VycikpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5wcmV2LAogICAgICAgICAgW3Byb3BOYW1lXTogcGFyc2VFbGVtZW50UHJvcGVydHlWYWx1ZShwcm9wTmFtZSwgZ2V0RWxlbWVudFRleHQoY3VycikpCiAgICAgICAgfTsKICAgICAgfSwge30pOwogICAgfQogICAgcmV0dXJuIG1lbWJlcnMubWFwKChlbCkgPT4gKHsKICAgICAgaWQ6IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWwsIGlkQXR0ciksCiAgICAgIHByb3BlcnRpZXM6IGdldFByb3BlcnRpZXMoZWwpCiAgICB9KSk7CiAgfQogIGZ1bmN0aW9uIGNvbXB1dGVGZWF0dXJlUHJvcHNEZXRhaWxzKGZlYXR1cmVzV2l0aFByb3BzKSB7CiAgICByZXR1cm4gZmVhdHVyZXNXaXRoUHJvcHMucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7CiAgICAgIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gY3Vyci5wcm9wZXJ0aWVzKSB7CiAgICAgICAgY29uc3QgcHJvcFZhbHVlID0gY3Vyci5wcm9wZXJ0aWVzW3Byb3BOYW1lXTsKICAgICAgICBpZiAoIShwcm9wTmFtZSBpbiBwcmV2KSkgewogICAgICAgICAgcHJldltwcm9wTmFtZV0gPSB7IHVuaXF1ZVZhbHVlczogW10gfTsKICAgICAgICB9CiAgICAgICAgY29uc3QgdW5pcXVlVmFsdWUgPSBwcmV2W3Byb3BOYW1lXS51bmlxdWVWYWx1ZXMuZmluZCgKICAgICAgICAgICh2KSA9PiB2LnZhbHVlID09PSBwcm9wVmFsdWUKICAgICAgICApOwogICAgICAgIGlmICh1bmlxdWVWYWx1ZSkKICAgICAgICAgIHVuaXF1ZVZhbHVlLmNvdW50Kys7CiAgICAgICAgZWxzZQogICAgICAgICAgcHJldltwcm9wTmFtZV0udW5pcXVlVmFsdWVzLnB1c2goeyB2YWx1ZTogcHJvcFZhbHVlLCBjb3VudDogMSB9KTsKICAgICAgfQogICAgICByZXR1cm4gcHJldjsKICAgIH0sIHt9KTsKICB9CiAgZnVuY3Rpb24gZ2VuZXJhdGVHZXRGZWF0dXJlVXJsKHNlcnZpY2VVcmwsIHZlcnNpb24sIGZlYXR1cmVUeXBlLCBvdXRwdXRGb3JtYXQsIG1heEZlYXR1cmVzLCBhdHRyaWJ1dGVzLCBoaXRzT25seSwgb3V0cHV0Q3JzLCBleHRlbnQsIGV4dGVudENycywgc3RhcnRJbmRleCkgewogICAgY29uc3QgdHlwZVBhcmFtID0gdmVyc2lvbiA9PT0gIjIuMC4wIiA/ICJUWVBFTkFNRVMiIDogIlRZUEVOQU1FIjsKICAgIGNvbnN0IGNvdW50UGFyYW0gPSB2ZXJzaW9uID09PSAiMi4wLjAiID8gIkNPVU5UIiA6ICJNQVhGRUFUVVJFUyI7CiAgICBjb25zdCBuZXdQYXJhbXMgPSB7CiAgICAgIFNFUlZJQ0U6ICJXRlMiLAogICAgICBSRVFVRVNUOiAiR2V0RmVhdHVyZSIsCiAgICAgIFZFUlNJT046IHZlcnNpb24sCiAgICAgIFt0eXBlUGFyYW1dOiBmZWF0dXJlVHlwZQogICAgfTsKICAgIGlmIChvdXRwdXRGb3JtYXQgIT09IHZvaWQgMCkKICAgICAgbmV3UGFyYW1zLk9VVFBVVEZPUk1BVCA9IG91dHB1dEZvcm1hdDsKICAgIGlmIChhdHRyaWJ1dGVzICE9PSB2b2lkIDApCiAgICAgIG5ld1BhcmFtcy5QUk9QRVJUWU5BTUUgPSBhdHRyaWJ1dGVzLmpvaW4oIiwiKTsKICAgIGlmIChoaXRzT25seSkgewogICAgICBuZXdQYXJhbXMuUkVTVUxUVFlQRSA9ICJoaXRzIjsKICAgICAgbmV3UGFyYW1zW2NvdW50UGFyYW1dID0gIjEiOwogICAgfSBlbHNlIGlmIChtYXhGZWF0dXJlcyAhPT0gdm9pZCAwKQogICAgICBuZXdQYXJhbXNbY291bnRQYXJhbV0gPSBtYXhGZWF0dXJlcy50b1N0cmluZygxMCk7CiAgICBpZiAob3V0cHV0Q3JzKSB7CiAgICAgIG5ld1BhcmFtcy5TUlNOQU1FID0gb3V0cHV0Q3JzOwogICAgfQogICAgaWYgKGV4dGVudCkgewogICAgICBjb25zdCBleHRlbnRKb2luZWQgPSBleHRlbnQuam9pbigiLCIpOwogICAgICBuZXdQYXJhbXMuQkJPWCA9IGV4dGVudENycyA/IGAke2V4dGVudEpvaW5lZH0sJHtleHRlbnRDcnN9YCA6IGV4dGVudEpvaW5lZDsKICAgIH0KICAgIGlmIChzdGFydEluZGV4KSB7CiAgICAgIG5ld1BhcmFtcy5TVEFSVElOREVYID0gc3RhcnRJbmRleC50b1N0cmluZygxMCk7CiAgICB9CiAgICByZXR1cm4gc2V0UXVlcnlQYXJhbXMoc2VydmljZVVybCwgbmV3UGFyYW1zKTsKICB9CiAgYWRkVGFza0hhbmRsZXIoCiAgICAicGFyc2VXbXNDYXBhYmlsaXRpZXMiLAogICAgZ2xvYmFsVGhpcywKICAgICh7IHVybCB9KSA9PiBxdWVyeVhtbERvY3VtZW50KHVybCkudGhlbigoeG1sRG9jKSA9PiBjaGVjayh4bWxEb2MsIHVybCkpLnRoZW4oKHhtbERvYykgPT4gKHsKICAgICAgaW5mbzogcmVhZEluZm9Gcm9tQ2FwYWJpbGl0aWVzJDIoeG1sRG9jKSwKICAgICAgbGF5ZXJzOiByZWFkTGF5ZXJzRnJvbUNhcGFiaWxpdGllcyQxKHhtbERvYyksCiAgICAgIHVybDogcmVhZE9wZXJhdGlvblVybHNGcm9tQ2FwYWJpbGl0aWVzJDEoeG1sRG9jKSwKICAgICAgdmVyc2lvbjogcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzJDEoeG1sRG9jKQogICAgfSkpCiAgKTsKICBhZGRUYXNrSGFuZGxlcigKICAgICJwYXJzZVdmc0NhcGFiaWxpdGllcyIsCiAgICBnbG9iYWxUaGlzLAogICAgKHsgdXJsIH0pID0+IHF1ZXJ5WG1sRG9jdW1lbnQodXJsKS50aGVuKCh4bWxEb2MpID0+IGNoZWNrKHhtbERvYywgdXJsKSkudGhlbigoeG1sRG9jKSA9PiAoewogICAgICBpbmZvOiByZWFkSW5mb0Zyb21DYXBhYmlsaXRpZXMkMSh4bWxEb2MpLAogICAgICBmZWF0dXJlVHlwZXM6IHJlYWRGZWF0dXJlVHlwZXNGcm9tQ2FwYWJpbGl0aWVzKHhtbERvYyksCiAgICAgIHVybDogcmVhZE9wZXJhdGlvblVybHNGcm9tQ2FwYWJpbGl0aWVzKHhtbERvYyksCiAgICAgIHZlcnNpb246IHJlYWRWZXJzaW9uRnJvbUNhcGFiaWxpdGllcyh4bWxEb2MpCiAgICB9KSkKICApOwogIGFkZFRhc2tIYW5kbGVyKAogICAgInF1ZXJ5V2ZzRmVhdHVyZVR5cGVEZXRhaWxzIiwKICAgIGdsb2JhbFRoaXMsCiAgICAoewogICAgICB1cmwsCiAgICAgIHNlcnZpY2VWZXJzaW9uLAogICAgICBmZWF0dXJlVHlwZUZ1bGwKICAgIH0pID0+IHsKICAgICAgY29uc3QgZ2V0RmVhdHVyZVVybCA9IGdlbmVyYXRlR2V0RmVhdHVyZVVybCgKICAgICAgICB1cmwsCiAgICAgICAgc2VydmljZVZlcnNpb24sCiAgICAgICAgZmVhdHVyZVR5cGVGdWxsLm5hbWUsCiAgICAgICAgdm9pZCAwLAogICAgICAgIHZvaWQgMCwKICAgICAgICBPYmplY3Qua2V5cyhmZWF0dXJlVHlwZUZ1bGwucHJvcGVydGllcykKICAgICAgKTsKICAgICAgcmV0dXJuIHF1ZXJ5WG1sRG9jdW1lbnQoZ2V0RmVhdHVyZVVybCkudGhlbigoZ2V0RmVhdHVyZURvYykgPT4gKHsKICAgICAgICBwcm9wczogY29tcHV0ZUZlYXR1cmVQcm9wc0RldGFpbHMoCiAgICAgICAgICBwYXJzZUZlYXR1cmVQcm9wcyhnZXRGZWF0dXJlRG9jLCBmZWF0dXJlVHlwZUZ1bGwsIHNlcnZpY2VWZXJzaW9uKQogICAgICAgICkKICAgICAgfSkpOwogICAgfQogICk7CiAgYWRkVGFza0hhbmRsZXIoCiAgICAidXBkYXRlRmV0Y2hPcHRpb25zIiwKICAgIGdsb2JhbFRoaXMsCiAgICAoeyBvcHRpb25zIH0pID0+IHsKICAgICAgc2V0RmV0Y2hPcHRpb25zKG9wdGlvbnMpOwogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHt9KTsKICAgIH0KICApOwogIGFkZFRhc2tIYW5kbGVyKAogICAgInBhcnNlV210c0NhcGFiaWxpdGllcyIsCiAgICBnbG9iYWxUaGlzLAogICAgKHsgdXJsIH0pID0+IHF1ZXJ5WG1sRG9jdW1lbnQodXJsKS50aGVuKCh4bWxEb2MpID0+IGNoZWNrKHhtbERvYywgdXJsKSkudGhlbigoeG1sRG9jKSA9PiAoewogICAgICBpbmZvOiByZWFkSW5mb0Zyb21DYXBhYmlsaXRpZXMoeG1sRG9jKSwKICAgICAgbGF5ZXJzOiByZWFkTGF5ZXJzRnJvbUNhcGFiaWxpdGllcyh4bWxEb2MpLAogICAgICBtYXRyaXhTZXRzOiByZWFkTWF0cml4U2V0c0Zyb21DYXBhYmlsaXRpZXMoeG1sRG9jKQogICAgfSkpCiAgKTsKfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9d29ya2VyLVFoUElKQmhJLmpzLm1hcAo=",k9=typeof window<"u"&&window.Blob&&new Blob([atob(bO)],{type:"text/javascript;charset=utf-8"});function gie(a){let e;try{if(e=k9&&(window.URL||window.webkitURL).createObjectURL(k9),!e)throw"";const t=new Worker(e,{name:a==null?void 0:a.name});return t.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;base64,"+bO,{name:a==null?void 0:a.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}let VS;function fie(){return VS||(VS=new gie),VS}function yie(a){return pie("parseWmsCapabilities",fie(),{url:a})}/*! @rgrove/parse-xml v4.2.0 | ISC License | Copyright Ryan Grove */var c3=Object.defineProperty,bie=Object.getOwnPropertyDescriptor,vie=Object.getOwnPropertyNames,xie=Object.prototype.hasOwnProperty,wie=(a,e)=>{for(var t in e)c3(a,t,{get:e[t],enumerable:!0})},Iie=(a,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of vie(e))!xie.call(a,n)&&n!==t&&c3(a,n,{get:()=>e[n],enumerable:!(i=bie(e,n))||i.enumerable});return a},Cie=a=>Iie(c3({},"__esModule",{value:!0}),a),vO={};wie(vO,{XmlCdata:()=>SO,XmlComment:()=>AO,XmlDeclaration:()=>TO,XmlDocument:()=>MO,XmlDocumentType:()=>LO,XmlElement:()=>h3,XmlError:()=>RO,XmlNode:()=>er,XmlProcessingInstruction:()=>WT,XmlText:()=>d3,parseXml:()=>Oie});var xO=Cie(vO),ZS="",Sie=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Aie=class{constructor(a){if(this.k=this.u(a,!0),this.d=0,this.length=a.length,this.l=this.k!==this.length,this.h=a,this.l){let e=[];for(let t=0,i=0;i<this.k;++i)e[i]=t,t+=a.codePointAt(t)>65535?2:1;this.A=e}}get B(){return this.d>=this.k}u(a,e=this.l){return e?a.replace(Sie,"_").length:a.length}p(a=1){this.d=Math.min(this.k,this.d+a)}f(a=this.d){var e;return this.l?(e=this.A[a])!=null?e:1/0:a}G(a=1){let e=this.m(a);return this.p(a),e}v(a){let e=this.f(),t=this.h.slice(e,e+a);return this.p(this.u(t)),t}w(a){let{length:e,l:t,h:i}=this,n=this.f(),s=n;if(t)for(;s<e;){let r=i[s],l=r>="\uD800"&&r<="\uDBFF";if(l&&(r+=i[s+1]),!a(r))break;s+=l?2:1}else for(;s<e&&a(i[s]);)++s;return this.v(s-n)}b(a){let{length:e}=a,t=this.f();return a===this.h.slice(t,t+e)?(this.p(e===1?1:this.u(a)),a):ZS}x(a){let e=this.h.slice(this.f()).search(a);return e>0?this.v(e):ZS}s(a){let e=this.f(),t=this.h.indexOf(a,e);return t>0?this.v(t-e):ZS}m(a=1){let{d:e,h:t}=this;return this.l?t.slice(this.f(e),this.f(e+a)):t.slice(e,e+a)}n(a=0){this.d=a>=0?Math.min(this.k,a):Math.max(0,this.d+a)}},Tie=/["&<]/,Eie=/['&<]/,Mie=/\r\n|[\n\r\t]/g,Lie=/<|&|]]>/,Rie=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));function wO(a){let e=a.codePointAt(0);return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57||e===45||e===46||e===183||e>=768&&e<=879||e===8255||e===8256||IO(a,e)}function IO(a,e=a.codePointAt(0)){return e>=97&&e<=122||e>=65&&e<=90||e===58||e===95||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e===8204||e===8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function kie(a){return a==="#"||wO(a)}function Wie(a){let e=a.codePointAt(0);return e===32||e===9||e===10||e===13}function W9(a){return a>=32&&a<=55295||a===10||a===9||a===13||a>=57344&&a<=65533||a>=65536&&a<=1114111}var Xd=class CO{constructor(){this.parent=null,this.start=-1,this.end=-1}get document(){var e,t;return(t=(e=this.parent)==null?void 0:e.document)!=null?t:null}get isRootNode(){return this.parent!==null&&this.parent===this.document&&this.type===CO.TYPE_ELEMENT}get preserveWhitespace(){var e;return!!((e=this.parent)!=null&&e.preserveWhitespace)}get type(){return""}toJSON(){let e={type:this.type};return this.isRootNode&&(e.isRootNode=!0),this.preserveWhitespace&&(e.preserveWhitespace=!0),this.start!==-1&&(e.start=this.start,e.end=this.end),e}};Xd.TYPE_CDATA="cdata";Xd.TYPE_COMMENT="comment";Xd.TYPE_DOCUMENT="document";Xd.TYPE_DOCUMENT_TYPE="doctype";Xd.TYPE_ELEMENT="element";Xd.TYPE_PROCESSING_INSTRUCTION="pi";Xd.TYPE_TEXT="text";Xd.TYPE_XML_DECLARATION="xmldecl";var er=Xd,d3=class extends er{constructor(a=""){super(),this.text=a}get type(){return er.TYPE_TEXT}toJSON(){return Object.assign(er.prototype.toJSON.call(this),{text:this.text})}},SO=class extends d3{get type(){return er.TYPE_CDATA}},AO=class extends er{constructor(a=""){super(),this.content=a}get type(){return er.TYPE_COMMENT}toJSON(){return Object.assign(er.prototype.toJSON.call(this),{content:this.content})}},TO=class extends er{constructor(a,e,t){super(),this.version=a,this.encoding=e??null,this.standalone=t??null}get type(){return er.TYPE_XML_DECLARATION}toJSON(){let a=er.prototype.toJSON.call(this);a.version=this.version;for(let e of["encoding","standalone"])this[e]!==null&&(a[e]=this[e]);return a}},h3=class EO extends er{constructor(e,t=Object.create(null),i=[]){super(),this.name=e,this.attributes=t,this.children=i}get isEmpty(){return this.children.length===0}get preserveWhitespace(){let e=this;for(;e instanceof EO;){if("xml:space"in e.attributes)return e.attributes["xml:space"]==="preserve";e=e.parent}return!1}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return er.TYPE_ELEMENT}toJSON(){return Object.assign(er.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(e=>e.toJSON())})}},MO=class extends er{constructor(a=[]){super(),this.children=a}get document(){return this}get root(){for(let a of this.children)if(a instanceof h3)return a;return null}get text(){return this.children.map(a=>"text"in a?a.text:"").join("")}get type(){return er.TYPE_DOCUMENT}toJSON(){return Object.assign(er.prototype.toJSON.call(this),{children:this.children.map(a=>a.toJSON())})}},LO=class extends er{constructor(a,e,t,i){super(),this.name=a,this.publicId=e??null,this.systemId=t??null,this.internalSubset=i??null}get type(){return er.TYPE_DOCUMENT_TYPE}toJSON(){let a=er.prototype.toJSON.call(this);a.name=this.name;for(let e of["publicId","systemId","internalSubset"])this[e]!==null&&(a[e]=this[e]);return a}},RO=class extends Error{constructor(a,e,t){let i=1,n="",s=1;for(let u=0;u<e;++u){let d=t[u];d===`
`?(i=1,n="",s+=1):(i+=1,n+=d)}let r=t.indexOf(`
`,e);n+=r===-1?t.slice(e):t.slice(e,r);let l=0;n.length>50&&(i<40?n=n.slice(0,50):(l=i-20,n=n.slice(l,i+30))),super(`${a} (line ${s}, column ${i})
  ${n}
`+" ".repeat(i-l+1)+`^
`),this.column=i,this.excerpt=n,this.line=s,this.name="XmlError",this.pos=e}},WT=class extends er{constructor(a,e=""){super(),this.name=a,this.content=e}get type(){return er.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(er.prototype.toJSON.call(this),{name:this.name,content:this.content})}},G9="",Gie=class{constructor(a,e={}){let t=this.document=new MO;this.j=t,this.g=e,this.c=new Aie(a),this.g.includeOffsets&&(t.start=0,t.end=a.length),this.parse()}i(a,e){return a.parent=this.j,this.g.includeOffsets&&(a.start=this.c.f(e),a.end=this.c.f()),this.j.children.push(a),!0}y(a,e){let{children:t}=this.j,{length:i}=t;if(a=Qv(a),i>0){let n=t[i-1];if((n==null?void 0:n.type)===er.TYPE_TEXT){let s=n;return s.text+=a,this.g.includeOffsets&&(s.end=this.c.f()),!0}}return this.i(new d3(a),e)}H(){let a=Object.create(null);for(;this.e();){let e=this.q();if(!e)break;let t=this.t()&&this.I();if(t===!1)throw this.a("Attribute value expected");if(e in a)throw this.a(`Duplicate attribute: ${e}`);if(e==="xml:space"&&t!=="default"&&t!=="preserve")throw this.a('Value of the `xml:space` attribute must be "default" or "preserve"');a[e]=t}if(this.g.sortAttributes){let e=Object.keys(a).sort(),t=Object.create(null);for(let i=0;i<e.length;++i){let n=e[i];t[n]=a[n]}a=t}return a}I(){let{c:a}=this,e=a.m();if(e!=='"'&&e!=="'")return!1;a.p();let t,i=!1,n=G9,s=e==='"'?Tie:Eie;e:for(;!a.B;)switch(t=a.x(s),t&&(this.o(t),n+=t.replace(Mie," ")),a.m()){case e:i=!0;break e;case"&":n+=this.C();continue;case"<":throw this.a("Unescaped `<` is not allowed in an attribute value");default:break e}if(!i)throw this.a("Unclosed attribute");return a.p(),n}J(){let{c:a}=this,e=a.d;if(!a.b("<![CDATA["))return!1;let t=a.s("]]>");if(this.o(t),!a.b("]]>"))throw this.a("Unclosed CDATA section");return this.g.preserveCdata?this.i(new SO(Qv(t)),e):this.y(t,e)}K(){let{c:a}=this,e=a.d,t=a.x(Lie);if(!t)return!1;if(this.o(t),a.m(3)==="]]>")throw this.a("Element content may not contain the CDATA section close delimiter `]]>`");return this.y(t,e)}D(){let{c:a}=this,e=a.d;if(!a.b("<!--"))return!1;let t=a.s("--");if(this.o(t),!a.b("-->"))throw a.m(2)==="--"?this.a("The string `--` isn't allowed inside a comment"):this.a("Unclosed comment");return this.g.preserveComments?this.i(new AO(Qv(t)),e):!0}L(){let a=this.c.d,e=this.C();return e?this.y(e,a):!1}M(){let{c:a}=this,e=a.d;if(!a.b("<!DOCTYPE"))return!1;let t=this.e()&&this.q();if(!t)throw this.a("Expected a name");let i,n;if(this.e()){if(a.b("PUBLIC")){if(i=this.e()&&this.N(),i===!1)throw this.a("Expected a public identifier");this.e()}if(i!==void 0||a.b("SYSTEM")){if(this.e(),n=this.r(),n===!1)throw this.a("Expected a system identifier");this.e()}}let s;if(a.b("[")){if(s=a.x(/\][\x20\t\r\n]*>/),!a.b("]"))throw this.a("Unclosed internal subset");this.e()}if(!a.b(">"))throw this.a("Unclosed doctype declaration");return this.g.preserveDocumentType?this.i(new LO(t,i,n,s),e):!0}E(){let{c:a}=this,e=a.d;if(!a.b("<"))return!1;let t=this.q();if(!t)return a.n(e),!1;let i=this.H(),n=!!a.b("/>"),s=new h3(t,i);if(s.parent=this.j,!n){if(!a.b(">"))throw this.a(`Unclosed start tag for element \`${t}\``);this.j=s;do this.K();while(this.E()||this.L()||this.J()||this.F()||this.D());let r=a.d,l;if(!a.b("</")||!(l=this.q())||l!==t)throw a.n(r),this.a(`Missing end tag for element ${t}`);if(this.e(),!a.b(">"))throw this.a(`Unclosed end tag for element ${t}`);this.j=s.parent}return this.i(s,e)}t(){return this.e(),this.c.b("=")?(this.e(),!0):!1}z(){return this.D()||this.F()||this.e()}q(){return IO(this.c.m())?this.c.w(wO):G9}F(){let{c:a}=this,e=a.d;if(!a.b("<?"))return!1;let t=this.q();if(t){if(t.toLowerCase()==="xml")throw a.n(e),this.a("XML declaration isn't allowed here")}else throw this.a("Invalid processing instruction");if(!this.e()){if(a.b("?>"))return this.i(new WT(t),e);throw this.a("Whitespace is required after a processing instruction name")}let i=a.s("?>");if(this.o(i),!a.b("?>"))throw this.a("Unterminated processing instruction");return this.i(new WT(t,Qv(i)),e)}O(){let{c:a}=this,e=a.d;for(this.P();this.z(););if(this.M())for(;this.z(););return e<a.d}N(){let a=this.c.d,e=this.r();if(e!==!1&&!/^[-\x20\r\na-zA-Z0-9'()+,./:=?;!*#@$_%]*$/.test(e))throw this.c.n(a),this.a("Invalid character in public identifier");return e}C(){let{c:a}=this;if(!a.b("&"))return!1;let e=a.w(kie);if(a.G()!==";")throw this.a("Unterminated reference (a reference must end with `;`)");let t;if(e[0]==="#"){let i=e[1]==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);if(isNaN(i))throw this.a("Invalid character reference");if(!W9(i))throw this.a("Character reference resolves to an invalid character");t=String.fromCodePoint(i)}else if(t=Rie[e],t===void 0){let{ignoreUndefinedEntities:i,resolveUndefinedEntity:n}=this.g,s=`&${e};`;if(n){let r=n(s);if(r!=null){let l=typeof r;if(l!=="string")throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${l}`);return r}}if(i)return s;throw a.n(-s.length),this.a(`Named entity isn't defined: ${s}`)}return t}r(){let{c:a}=this,e=a.b('"')||a.b("'");if(!e)return!1;let t=a.s(e);if(this.o(t),!a.b(e))throw this.a("Missing end quote");return t}e(){return!!this.c.w(Wie)}P(){let{c:a}=this,e=a.d;if(!a.b("<?xml"))return!1;if(!this.e())throw this.a("Invalid XML declaration");let t=!!a.b("version")&&this.t()&&this.r();if(t===!1)throw this.a("XML version is missing or invalid");if(!/^1\.[0-9]+$/.test(t))throw this.a("Invalid character in version number");let i,n;if(this.e()){if(i=!!a.b("encoding")&&this.t()&&this.r(),i){if(!/^[A-Za-z][\w.-]*$/.test(i))throw this.a("Invalid character in encoding name");this.e()}if(n=!!a.b("standalone")&&this.t()&&this.r(),n){if(n!=="yes"&&n!=="no")throw this.a('Only "yes" and "no" are permitted as values of `standalone`');this.e()}}if(!a.b("?>"))throw this.a("Invalid or unclosed XML declaration");return this.g.preserveXmlDeclaration?this.i(new TO(t,i||void 0,n||void 0),e):!0}a(a){let{c:e}=this;return new RO(a,e.d,e.h)}parse(){if(this.c.b("\uFEFF"),this.O(),!this.E())throw this.a("Root element is missing or invalid");for(;this.z(););if(!this.c.B)throw this.a("Extra content at the end of the document")}o(a){let{length:e}=a;for(let t=0;t<e;++t){let i=a.codePointAt(t);if(!W9(i))throw this.c.n(-([...a].length-t)),this.a("Invalid character");i>65535&&(t+=1)}}};function Qv(a){let e=0;for(;(e=a.indexOf("\r",e))!==-1;)a=a[e+1]===`
`?a.slice(0,e)+a.slice(e+1):a.slice(0,e)+`
`+a.slice(e+1);return a}function Oie(a,e){return new Gie(a,e).document}class Pie extends Error{constructor(e){super(e)}}function Bie(a){let e=null;try{e=xO.parseXml(a)}catch(t){throw new Pie(t.message)}return e}function Cc(a){const e=a.indexOf(":");return e>-1?a.substr(e+1):a}function Xr(a){return a.children[0]}function Sc(a){return a.name||""}function oi(a,e,t=!1){const i=Cc(e);function n(s,r){return Cc(Sc(r))===i&&s.push(r),t&&Array.isArray(r.children)?[...s,...r.children.reduce(n,[])]:s}return a&&Array.isArray(a.children)?a.children.reduce(n,[]):[]}function it(a,e,t=!1){return oi(a,e,t)[0]||null}function dc(a){return a&&Array.isArray(a.children)?[...a.children.filter(e=>e instanceof xO.XmlElement)]:[]}function Lt(a){const e=a&&Array.isArray(a.children)?a.children.find(t=>t.type==="text"):null;return e?e.text:""}function Bi(a,e){return a&&a.attributes[e]||""}class X2 extends Error{constructor(e,t,i){super(e),this.httpStatus=t,this.isCrossOriginRelated=i,this.name="EndpointError"}}class kO extends Error{constructor(e,t,i,n,s){super(e),this.requestUrl=t,this.code=i,this.locator=n,this.response=s,this.name="ServiceExceptionError"}}function O9(a,e){const t=Bi(a,"code")||Bi(a,"exceptionCode"),i=Bi(a,"locator"),n=it(a,"ExceptionText")||a,s=Lt(n).trim();return new kO(s,e,t,i,a.document)}function _3(a,e){const t=Xr(a),i=Cc(Sc(t));if(i==="ServiceExceptionReport"){const n=it(t,"ServiceException");if(n)throw O9(n,e)}if(i==="ExceptionReport"){const n=it(t,"Exception");if(n)throw O9(n,e)}return a}function Nie(a){const e={message:a.message,stack:a.stack,name:a.name};return a instanceof kO?{...e,code:a.code,locator:a.locator,response:a.response,requestUrl:a.requestUrl}:a instanceof X2?{...e,httpStatus:a.httpStatus,isCrossOriginRelated:a.isCrossOriginRelated}:e}const P9=["utf-8","utf-16","iso-8859-1"],B9="utf-8";function Fie(a){const e=/charset=([^;]+)/.exec(a);return e?e[1]:null}function Die(a,e){const t=e?Fie(e):null,i=t?[t,...P9]:P9;for(const n of i)try{return new TextDecoder(n,{fatal:!0}).decode(a)}catch{}return console.warn(`[ogc-client] XML document encoding could not be determined, falling back to ${B9}.`),new TextDecoder(B9).decode(a)}const e2=new Map;let WO={};function Vie(a){WO=a}function GO(){return WO}function Zie(a,e="GET",t){let i=`${e}#${a}`;if(t&&(i=`${e}#asJson#${a}`),e2.has(i))return e2.get(i);const n={...GO()};n.method=e,t&&(n.headers="headers"in n?n.headers:{},n.headers.Accept="application/json");const s=fetch(a,n).catch(r=>r).then(r=>(e2.delete(i),r));return e2.set(i,s),s.then(r=>{if(r instanceof Error)throw r;return r})}function LI(a){return Zie(a).catch(()=>fetch(a,{...GO(),method:"HEAD",mode:"no-cors"}).catch(e=>{throw new X2(`Fetching the document failed either due to network errors or unreachable host, error is: ${e.message}`,0,!1)}).then(()=>{throw new X2("The document could not be fetched due to CORS limitations",0,!0)})).then(async e=>{if(!e.ok){const n=await e.text();throw new X2(`Received an error with code ${e.status}: ${n}`,e.status,!1)}const t=await e.arrayBuffer(),i=e.headers.get("Content-Type");return Die(t,i)}).then(e=>Bie(e))}function E1(a,e){const t=a.match(/(https?%3A%2F%2F[^/]+)$/);if(t){const l=t[1],u=E1(decodeURIComponent(l),e);return a.replace(l,encodeURIComponent(u))}const i=new URL(a),n=Object.keys(e),s=n.map(l=>l.toLowerCase()),r=[];for(const l of i.searchParams.keys())s.indexOf(l.toLowerCase())>-1&&r.push(l);return r.map(l=>i.searchParams.delete(l)),n.forEach(l=>i.searchParams.set(l,e[l]===!0?"":e[l])),i.toString()}let zie=1e3*60*60;function Uie(){return zie}let sm;function RI(){return sm!==void 0?sm:"caches"in globalThis?(sm=caches.open("ogc-client").catch(a=>(console.info("[ogc-client] Cache could not be accessed for the following reason:",a),null)),sm):(sm=Promise.resolve(null),sm)}async function Hie(a,...e){const t=await RI();if(!t)return;const i="https://cache/"+e.join("/");try{await t.put(i,new Response(JSON.stringify(a),{headers:{"x-expiry":(Date.now()+Uie()).toString(10)}}))}catch(n){console.info("[ogc-client] Caching failed once for the following reason and will not be retried:",n),sm=Promise.resolve(null)}}async function Xie(...a){const e=await RI();if(!e)return;const t="https://cache/"+a.join("/");return e.match(t).then(i=>!!i&&parseInt(i.headers.get("x-expiry"))>Date.now())}async function qie(...a){const e=await RI();if(!e)return;const t="https://cache/"+a.join("/"),i=await e.match(t);return i?i.clone().json():null}const t2=new Map;async function Yie(a,...e){if(await Kie(),await Xie(...e))return qie(...e);const t=e.join("#");if(t2.has(t))return t2.get(t);const i=a();i instanceof Promise&&(i.then(()=>t2.delete(t)),t2.set(t,i));const n=await i;return await Hie(n,...e),n}async function Kie(){const a=await RI();if(!a)return;const e=await a.keys();for(const t of e){const i=await a.match(t);parseInt(i.headers.get("x-expiry"))<=Date.now()&&await a.delete(t)}}function jie(a,e,t,i,n,s,r,l,u,d,m){const f=e==="2.0.0"?"TYPENAMES":"TYPENAME",v=e==="2.0.0"?"COUNT":"MAXFEATURES",w={SERVICE:"WFS",REQUEST:"GetFeature",VERSION:e,[f]:t};if(i!==void 0&&(w.OUTPUTFORMAT=i),s!==void 0&&(w.PROPERTYNAME=s.join(",")),r?(w.RESULTTYPE="hits",w[v]="1"):n!==void 0&&(w[v]=n.toString(10)),l&&(w.SRSNAME=l),u){const S=u.join(",");w.BBOX=d?`${S},${d}`:S}return m&&(w.STARTINDEX=m.toString(10)),E1(a,w)}function $ie(a,e,t,i,n,s,r,l,u){const d=e==="1.3.0"?"CRS":"SRS",m={SERVICE:"WMS",REQUEST:"GetMap",VERSION:e,LAYERS:t,STYLES:u??""};return m.WIDTH=i.toString(),m.HEIGHT=n.toString(),m.FORMAT=l??"image/png",m[d]=s,m.BBOX=r.join(","),E1(a,m)}class Jie{constructor(e){zt(this,"_capabilitiesUrl");zt(this,"_capabilitiesPromise");zt(this,"_info");zt(this,"_layers");zt(this,"_url");zt(this,"_version");this._capabilitiesUrl=E1(e,{SERVICE:"WMS",REQUEST:"GetCapabilities"}),this._capabilitiesPromise=Yie(()=>yie(this._capabilitiesUrl),"WMS","CAPABILITIES",this._capabilitiesUrl).then(({info:t,layers:i,url:n,version:s})=>{this._info=t,this._layers=i,this._url=n,this._version=s})}isReady(){return this._capabilitiesPromise.then(()=>this)}getServiceInfo(){return this._info}getLayers(){function e(t){return{title:t.title,name:t.name,abstract:t.abstract,..."children"in t&&{children:t.children.map(e)}}}return this._layers.map(e)}getLayerByName(e){let t=null;function i(n){if(t===null){if(n.name===e){t=n;return}"children"in n&&n.children.map(i)}}return this._layers.map(i),t}getSingleLayerName(){if(!this._layers)return null;const e=[];function t(i){i.name&&e.push(i),"children"in i&&i.children.map(t)}return this._layers.map(t),e.length===1?e[0].name:null}getVersion(){return this._version}getMapUrl(e,t){if(!this._layers)return null;const{widthPx:i,heightPx:n,crs:s,extent:r,outputFormat:l,styles:u}=t;return $ie(this.getOperationUrl("GetMap")||this._capabilitiesUrl,this._version,e.join(","),i,n,s,r,l,u!==void 0?u.join(","):"")}getCapabilitiesUrl(){const e=this.getOperationUrl("GetCapabilities");return e?E1(e,{SERVICE:"WMS",REQUEST:"GetCapabilities"}):this._capabilitiesUrl}getOperationUrl(e,t="Get"){var i;return this._url?(i=this._url[e])==null?void 0:i[t]:null}}function sb(a,e,t){const i=typeof WorkerGlobalScope<"u",n=async s=>{if(s.taskName===a){let r,l;try{r=await t(s.params)}catch(d){l=Nie(d)}const u={taskName:a,requestId:s.requestId,...r&&{response:r},...l&&{error:l}};i?e.postMessage(u):e.dispatchEvent(new CustomEvent("ogc-client.response",{detail:u}))}};i?e.addEventListener("message",s=>n(s.data)):e.addEventListener("ogc-client.request",s=>n(s.detail))}const Qie=["EPSG:4046","EPSG:4075","EPSG:4120","EPSG:4122","EPSG:4124","EPSG:4126","EPSG:4149","EPSG:4151","EPSG:4153","EPSG:4155","EPSG:4157","EPSG:4159","EPSG:4161","EPSG:4163","EPSG:4165","EPSG:4167","EPSG:4169","EPSG:4171","EPSG:4173","EPSG:4175","EPSG:4178","EPSG:4180","EPSG:4182","EPSG:4184","EPSG:4188","EPSG:4190","EPSG:4191","EPSG:4196","EPSG:4198","EPSG:4202","EPSG:4210","EPSG:4211","EPSG:4214","EPSG:4226","EPSG:4229","EPSG:4231","EPSG:4233","EPSG:4236","EPSG:4238","EPSG:4240","EPSG:4242","EPSG:4244","EPSG:4246","EPSG:4248","EPSG:4250","EPSG:4252","EPSG:4255","EPSG:4258","EPSG:4261","EPSG:4264","EPSG:4267","EPSG:4270","EPSG:4273","EPSG:4276","EPSG:4279","EPSG:4281","EPSG:4284","EPSG:4286","EPSG:4288","EPSG:4292","EPSG:4295","EPSG:4297","EPSG:4299","EPSG:4302","EPSG:4324","EPSG:4326"];function ene(a){return Qie.indexOf(GT(a))>-1}function GT(a){return/^urn:(?:x-)?ogc:def:crs:epsg:/.test(a.toLowerCase())?`EPSG:${/([0-9]+)$/.exec(a)[1]}`:a}function tne(a){const e={},t=it(Xr(a),"Capability"),i=it(t,"Request");return dc(i).forEach(n=>{const s=Cc(Sc(n));e[s]=one(n)}),e}function OO(a){return Xr(a).attributes.version}function ane(a){const e=OO(a),t=it(Xr(a),"Capability");return oi(t,"Layer").map(i=>PO(i,e))}function ine(a){const e=it(Xr(a),"Capability"),t=it(it(e,"Request"),"GetMap");return oi(t,"Format").map(Lt)}function nne(a){const e=it(Xr(a),"Capability"),t=it(it(e,"Request"),"GetFeatureInfo");return oi(t,"Format").map(Lt)}function rne(a){const e=it(Xr(a),"Capability"),t=it(e,"Exception");return oi(t,"Format").map(Lt)}function sne(a){const e=it(Xr(a),"Service"),t=ine(a),i=nne(a),n=rne(a),s=oi(it(e,"KeywordList"),"Keyword").map(Lt).filter((l,u,d)=>d.indexOf(l)===u),r=cne(a);return{title:Lt(it(e,"Title")),name:Lt(it(e,"Name")),abstract:Lt(it(e,"Abstract")),outputFormats:t,infoFormats:i,exceptionFormats:n,fees:Lt(it(e,"Fees")),constraints:Lt(it(e,"AccessConstraints")),provider:r,keywords:s}}function one(a){const e={};return oi(a,"DCPType").flatMap(s=>it(s,"HTTP")).flatMap(s=>dc(s)).forEach(s=>{const r=it(s,"OnlineResource"),l=Cc(Sc(s));e[l]=Bi(r,"xlink:href")}),e}function PO(a,e,t=[],i=[],n=null,s=null,r=null,l=null){const u=e==="1.3.0"?"CRS":"SRS",d=oi(a,u).map(Lt),m=d.length>0?d:t,f=oi(a,"Style").map(lne),v=f.length>0?f:i;function w(Ie){const he=Bi(Ie,u);return(ene(he)&&e==="1.3.0"?["miny","minx","maxy","maxx"]:["minx","miny","maxx","maxy"]).map(Oe=>Bi(Ie,Oe))}function S(Ie){return["westBoundLongitude","southBoundLatitude","eastBoundLongitude","northBoundLatitude"].map(he=>Lt(it(Ie,he)))}function T(Ie){return["minx","miny","maxx","maxy"].map(he=>Bi(Ie,he))}function M(Ie,he){return Ie===""?he:Math.sqrt(.5*parseFloat(Ie)**2)/28e-5}function G(){const Ie=it(a,"ScaleHint");if(!Ie)return[l,r];const he=Bi(Ie,"min"),we=Bi(Ie,"max");return[M(he,l),M(we,r)]}function P(Ie,he){const we=Lt(it(a,Ie));return we===""?he:parseFloat(we)}const F=it(a,"Attribution"),N=F!==null?une(F):n,V=e==="1.3.0"?it(a,"EX_GeographicBoundingBox"):it(a,"LatLonBoundingBox"),K={};V&&(K["EPSG:4326"]=e==="1.3.0"?S(V):T(V));let te=oi(a,"BoundingBox").reduce((Ie,he)=>({...Ie,[Bi(he,u)]:w(he)}),K);te=Object.keys(te).length>0||s===null?te:s;const J=a.attributes.queryable==="1"||a.attributes.queryable==="true",ne=a.attributes.opaque==="1"||a.attributes.opaque==="true",se=oi(it(a,"KeywordList"),"Keyword").map(Lt).filter((Ie,he,we)=>we.indexOf(Ie)===he);let de,_e;e==="1.3.0"?(de=P("MinScaleDenominator",l),_e=P("MaxScaleDenominator",r)):[de,_e]=G();const Se=oi(a,"MetadataURL").map(Ie=>({type:Bi(Ie,"type"),format:Lt(it(Ie,"Format")),url:Bi(it(Ie,"OnlineResource"),"xlink:href")})),ce=oi(a,"Layer").map(Ie=>PO(Ie,e,m,v,N,te,_e,de));return{name:Lt(it(a,"Name")),title:Lt(it(a,"Title")),abstract:Lt(it(a,"Abstract")),availableCrs:m,styles:v,attribution:N,boundingBoxes:te,keywords:se,queryable:J,opaque:ne,...de!==null?{minScaleDenominator:de}:{},..._e!==null?{maxScaleDenominator:_e}:{},...Se.length&&{metadata:Se},...ce.length&&{children:ce}}}function lne(a){const e=Bi(it(it(a,"LegendURL"),"OnlineResource"),"xlink:href"),t=Lt(it(a,"Abstract"));return{name:Lt(it(a,"Name")),title:Lt(it(a,"Title")),...t&&{abstract:t},...e&&{legendUrl:e}}}function une(a){const e=Bi(it(it(a,"LogoURL"),"OnlineResource"),"xlink:href"),t=Bi(it(a,"OnlineResource"),"xlink:href"),i=Lt(it(a,"Title"));return{...i&&{title:i},...t&&{url:t},...e&&{logoUrl:e}}}function cne(a){const e=it(Xr(a),"Service"),t=it(e,"ContactInformation"),i=it(t,"ContactPersonPrimary"),n=it(t,"ContactAddress");return{contact:{name:Lt(it(i,"ContactPerson")),organization:Lt(it(i,"ContactOrganization")),position:Lt(it(t,"ContactPosition")),phone:Lt(it(t,"ContactVoiceTelephone")),fax:Lt(it(t,"ContactFacsimileTelephone")),address:{deliveryPoint:Lt(it(n,"Address")),city:Lt(it(n,"City")),administrativeArea:Lt(it(n,"StateOrProvince")),postalCode:Lt(it(n,"PostCode")),country:Lt(it(n,"Country"))},email:Lt(it(t,"ContactElectronicMailAddress"))}}}function BO(a){const e=it(Xr(a),"ServiceProvider"),t=it(e,"ServiceContact"),i=it(t,"ContactInfo"),n=it(i,"Phone"),s=it(i,"Address");return{name:Lt(it(e,"ProviderName")),site:Bi(it(e,"ProviderSite"),"xlink:href"),contact:{name:Lt(it(t,"IndividualName")),position:Lt(it(t,"PositionName")),phone:Lt(it(n,"Voice")),fax:Lt(it(n,"Facsimile")),address:{deliveryPoint:Lt(it(s,"DeliveryPoint")),city:Lt(it(s,"City")),administrativeArea:Lt(it(s,"AdministrativeArea")),postalCode:Lt(it(s,"PostalCode")),country:Lt(it(s,"Country"))},email:Lt(it(s,"ElectronicMailAddress"))}}}function dne(a){const e={},t=Xr(a),i=it(t,"OperationsMetadata");if(i)oi(i,"Operation").forEach(n=>{const s=Bi(n,"name");e[s]=pne(n)});else{const n=it(t,"Capability"),s=it(n,"Request");dc(s).forEach(r=>{const l=Cc(Sc(r));e[l]=mne(r)})}return e}function kI(a){return Xr(a).attributes.version}function NO(a){const e=kI(a);let t;if(e.startsWith("1.0")){const i=it(it(it(Xr(a),"Capability"),"Request"),"GetFeature");t=dc(it(i,"ResultFormat")).map(Sc)}else{const i=it(Xr(a),"OperationsMetadata"),n=oi(i,"Operation").find(r=>Bi(r,"name")==="GetFeature"),s=oi(n,"Parameter").find(r=>Bi(r,"name")==="outputFormat");t=oi(s,"Value",!0).map(Lt)}return t}function hne(a){const e=kI(a),t=e.startsWith("1.0")?"Service":"ServiceIdentification",i=e.startsWith("1.0")?"Name":"ServiceType",n=it(Xr(a),t);let s;e.startsWith("1.0")?s=Lt(it(n,"Keywords")).split(",").map(l=>l.trim()):s=oi(it(n,"Keywords"),"Keyword").map(Lt);let r;return e!=="1.0.0"&&(r=BO(a)),{title:Lt(it(n,"Title")),name:Lt(it(n,i)),abstract:Lt(it(n,"Abstract")),fees:Lt(it(n,"Fees")),constraints:Lt(it(n,"AccessConstraints")),keywords:s,provider:r,outputFormats:NO(a)}}function _ne(a){const e=kI(a),t=NO(a),i=it(Xr(a),"FeatureTypeList");return oi(i,"FeatureType").map(n=>gne(n,e,t))}function mne(a){const e={};return oi(a,"DCPType").flatMap(s=>oi(s,"HTTP")).flatMap(s=>dc(s)).forEach(s=>{const r=Cc(Sc(s));e[r]=Bi(s,"onlineResource")}),e}function pne(a){const e={};return oi(a,"DCP").flatMap(s=>it(s,"HTTP")).flatMap(s=>dc(s)).forEach(s=>{const r=Cc(Sc(s));e[r]=Bi(s,"xlink:href")}),e}function gne(a,e,t){const i=e.startsWith("2.")?"CRS":"SRS",n=e.startsWith("1.0")?"SRS":`Default${i}`;function s(){const f=it(a,"LatLongBoundingBox");return["minx","miny","maxx","maxy"].map(v=>Bi(f,v)).map(parseFloat)}function r(){const f=it(a,"WGS84BoundingBox");return["LowerCorner","UpperCorner"].map(v=>it(f,v)).map(v=>Lt(v).split(" ")).reduce((v,w)=>[...v,...w]).map(parseFloat)}const l=e.startsWith("1.0")?[]:oi(a,`Other${i}`).map(Lt).map(GT),u=e.startsWith("1.0")?[]:oi(it(a,"OutputFormats"),"Format").map(Lt),d=e.startsWith("1.0")?Lt(it(a,"Keywords")).split(",").map(f=>f.trim()):oi(it(a,"Keywords"),"Keyword").map(Lt).filter((f,v,w)=>w.indexOf(f)===v),m=e==="2.0.0"?oi(a,"MetadataURL").map(f=>({url:Bi(f,"xlink:href")})):oi(a,"MetadataURL").map(f=>({format:Bi(f,"format"),type:Bi(f,"type"),url:Lt(f).trim()}));return{name:Lt(it(a,"Name")),title:Lt(it(a,"Title")),abstract:Lt(it(a,"Abstract")),defaultCrs:GT(Lt(it(a,n))),otherCrs:l,outputFormats:u.length>0?u:t,latLonBoundingBox:e.startsWith("1.0")?s():r(),keywords:d,...m.length&&{metadata:m}}}function FO(a){const e=["LowerCorner","UpperCorner"].map(t=>it(a,t)).map(t=>Lt(t).split(" ")).reduce((t,i)=>[...t,...i]).map(parseFloat);return e.some(Number.isNaN)?null:e}function fne(a){const e=Xr(a),t=it(e,"ServiceIdentification"),i=oi(it(t,"Keywords"),"Keyword").map(Lt),n=it(e,"OperationsMetadata"),s=oi(n,"Operation").find(l=>Bi(l,"name")=="GetTile"),r=oi(s,"Get",!0).reduce((l,u)=>{const d=Lt(it(u,"Value",!0)),m=Bi(u,"xlink:href");return d.toLowerCase()==="restful"?{...l,rest:m}:{...l,kvp:m}},{});return{title:Lt(it(t,"Title")),name:Lt(it(t,"ServiceType")),abstract:Lt(it(t,"Abstract")),fees:Lt(it(t,"Fees")),constraints:Lt(it(t,"AccessConstraints")),keywords:i,provider:BO(a),getTileUrls:r}}function yne(a){function e(n){const s=Lt(it(n,"TopLeftCorner")).split(" ").map(parseFloat);return{identifier:Lt(it(n,"Identifier")),tileWidth:parseInt(Lt(it(n,"TileWidth"))),tileHeight:parseInt(Lt(it(n,"TileHeight"))),matrixWidth:parseInt(Lt(it(n,"MatrixWidth"))),matrixHeight:parseInt(Lt(it(n,"MatrixHeight"))),scaleDenominator:parseFloat(Lt(it(n,"ScaleDenominator"))),topLeft:s}}const t=it(Xr(a),"Contents");return oi(t,"TileMatrixSet").map(n=>{const s=Lt(it(n,"WellKnownScaleSet")),r=FO(it(n,"BoundingBox"));return{identifier:Lt(it(n,"Identifier")),crs:Lt(it(n,"SupportedCRS")),tileMatrices:oi(n,"TileMatrix").map(e),...r&&{boundingBox:r},...s&&{wellKnownScaleSet:s}}})}function bne(a){const e=Xr(a),t=it(e,"Contents");function i(m,f){const v=oi(m,"TileMatrixSet").find(w=>{const S=it(w,"Identifier");return Lt(S)===f});return Lt(it(v,"SupportedCRS"))}function n(m){const f=Lt(it(m,"TileMatrixSet")),v=i(t,f);return{identifier:f,crs:v,limits:oi(m,"TileMatrixLimits",!0).map(w=>({tileMatrix:Lt(it(w,"TileMatrix")),minTileRow:parseInt(Lt(it(w,"MinTileRow"))),minTileCol:parseInt(Lt(it(w,"MinTileCol"))),maxTileRow:parseInt(Lt(it(w,"MaxTileRow"))),maxTileCol:parseInt(Lt(it(w,"MaxTileCol")))}))}}const s=oi(it(e,"OperationsMetadata"),"Operation").find(m=>Bi(m,"name")=="GetTile"),r=oi(s,"Get",!0).filter(m=>Lt(it(m,"Value",!0)).toLowerCase()==="kvp")[0],l=r?Bi(r,"xlink:href"):"",u=it(e,"Contents");return oi(u,"Layer").map(m=>{const f=FO(it(m,"WGS84BoundingBox"));let v="";const w=oi(m,"Style").map(P=>{const F=Bi(it(P,"LegendURL"),"xlink:href"),N=Lt(it(P,"Abstract")),V={title:Lt(it(P,"Title")),name:Lt(it(P,"Identifier")),...N&&{abstract:N},...F&&{legendUrl:F}};return Bi(P,"isDefault")==="true"&&(v=V.name),V}),S=oi(m,"Format").map(Lt),T=oi(m,"ResourceURL").filter(P=>Bi(P,"resourceType")==="tile").map(P=>{const F=Bi(P,"format"),N=Bi(P,"template");return{format:F,url:N,encoding:"REST"}});l&&T.push(...S.map(P=>({encoding:"KVP",url:l,format:P})));const M=oi(m,"TileMatrixSetLink").map(n),G=oi(m,"Dimension").map(P=>{const F=Lt(it(P,"Identifier")),N=Lt(it(P,"Default")),V=oi(P,"Values").map(Lt);return{identifier:F,defaultValue:N,values:V}});return{name:Lt(it(m,"Identifier")),title:Lt(it(m,"Title")),abstract:Lt(it(m,"Abstract")),styles:w,resourceLinks:T,matrixSets:M,defaultStyle:v,...f&&{latLonBoundingBox:f},...G&&{dimensions:G}}})}function vne(a,e,t){const i=Xr(a);let n;if(t.startsWith("2.0"))n=oi(i,"member").map(d=>dc(d)[0]);else{const d=it(i,"featureMembers");n=d?dc(d):oi(i,"featureMember").map(m=>dc(m)[0])}const s=t==="1.0.0"?"fid":"gml:id";function r(d){return d in e.properties}function l(d,m){switch(e.properties[d]){case"integer":return parseInt(m);case"float":return parseFloat(m);case"boolean":return m==="true";default:return m}}function u(d){return dc(d).filter(m=>r(Cc(Sc(m)))).reduce((m,f)=>{const v=Cc(Sc(f));return{...m,[v]:l(v,Lt(f))}},{})}return n.map(d=>({id:Bi(d,s),properties:u(d)}))}function xne(a){return a.reduce((e,t)=>{for(const i in t.properties){const n=t.properties[i];i in e||(e[i]={uniqueValues:[]});const s=e[i].uniqueValues.find(r=>r.value===n);s?s.count++:e[i].uniqueValues.push({value:n,count:1})}return e},{})}sb("parseWmsCapabilities",globalThis,({url:a})=>LI(a).then(e=>_3(e,a)).then(e=>({info:sne(e),layers:ane(e),url:tne(e),version:OO(e)})));sb("parseWfsCapabilities",globalThis,({url:a})=>LI(a).then(e=>_3(e,a)).then(e=>({info:hne(e),featureTypes:_ne(e),url:dne(e),version:kI(e)})));sb("queryWfsFeatureTypeDetails",globalThis,({url:a,serviceVersion:e,featureTypeFull:t})=>{const i=jie(a,e,t.name,void 0,void 0,Object.keys(t.properties));return LI(i).then(n=>({props:xne(vne(n,t,e))}))});sb("updateFetchOptions",globalThis,({options:a})=>(Vie(a),Promise.resolve({})));sb("parseWmtsCapabilities",globalThis,({url:a})=>LI(a).then(e=>_3(e,a)).then(e=>({info:fne(e),layers:bne(e),matrixSets:yne(e)})));const wne=()=>[{url:"http://wmts1.geoportail.lu/opendata/service",label:"Open Data Webservices WMS"},{url:"http://ows.terrestris.de/osm-gray/service",label:"OpenStreetMap by Terrestris (Grey)"},{url:"http://ows.terrestris.de/osm/service",label:"OpenStreetMap by Terrestris (Color)"}],Jx="http://www.w3.org/2001/XMLSchema-instance";function Pd(a,e){return Nf().createElementNS(a,e)}function Mu(a,e){return DO(a,e,[]).join("")}function DO(a,e,t){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)e?t.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(a.nodeValue);else{let i;for(i=a.firstChild;i;i=i.nextSibling)DO(i,e,t)}return t}function hc(a){return"documentElement"in a}function _c(a){return new DOMParser().parseFromString(a,"application/xml")}function N9(a,e){return function(t,i){const n=a.call(e??this,t,i);if(n!==void 0){const s=i[i.length-1];rn(s,n)}}}function qo(a,e){return function(t,i){const n=a.call(e??this,t,i);n!==void 0&&i[i.length-1].push(n)}}function m3(a,e){return function(t,i){const n=a.call(e??this,t,i);n!==void 0&&(i[i.length-1]=n)}}function zo(a,e,t){return function(i,n){const s=a.call(t??this,i,n);if(s!==void 0){const r=n[n.length-1],l=e!==void 0?e:i.localName;let u;l in r?u=r[l]:(u=[],r[l]=u),u.push(s)}}}function Xe(a,e,t){return function(i,n){const s=a.call(t??this,i,n);if(s!==void 0){const r=n[n.length-1],l=e!==void 0?e:i.localName;r[l]=s}}}function Nt(a,e){return function(t,i,n){a.call(e??this,t,i,n),n[n.length-1].node.appendChild(t)}}function VO(a,e){let t,i;return function(n,s,r){if(t===void 0){t={};const l={};l[n.localName]=a,t[n.namespaceURI]=l,i=Lu(n.localName)}ZO(t,i,s,r)}}function Lu(a,e){return function(t,i,n){const r=i[i.length-1].node;let l=a;l===void 0&&(l=n);const u=e!==void 0?e:r.namespaceURI;return Pd(u,l)}}const Qs=Lu();function Jo(a,e){const t=e.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=a[e[n]];return i}function Ct(a,e,t){t=t!==void 0?t:{};let i,n;for(i=0,n=a.length;i<n;++i)t[a[i]]=e;return t}function l_(a,e,t,i){let n;for(n=e.firstElementChild;n;n=n.nextElementSibling){const s=a[n.namespaceURI];if(s!==void 0){const r=s[n.localName];r!==void 0&&r.call(i,n,t)}}}function va(a,e,t,i,n){return i.push(a),l_(e,t,i,n),i.pop()}function ZO(a,e,t,i,n,s){const r=(n!==void 0?n:t).length;let l,u;for(let d=0;d<r;++d)l=t[d],l!==void 0&&(u=e.call(s,l,i,n!==void 0?n[d]:void 0),u!==void 0&&a[u.namespaceURI][u.localName].call(s,u,l,i))}function Wn(a,e,t,i,n,s,r){return n.push(a),ZO(e,t,i,n,s,r),n.pop()}let zS;function Ine(){return zS===void 0&&typeof XMLSerializer<"u"&&(zS=new XMLSerializer),zS}let US;function Nf(){return US===void 0&&typeof document<"u"&&(US=document.implementation.createDocument("","",null)),US}class Cne{read(e){if(!e)return null;if(typeof e=="string"){const t=_c(e);return this.readFromDocument(t)}return hc(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){ka()}}const zO=Cne,Sne="http://www.w3.org/1999/xlink";function p3(a){return a.getAttributeNS(Sne,"href")}function Qh(a){const e=Mu(a,!1);return Ane(e)}function Ane(a){const e=/^\s*(true|1)|(false|0)\s*$/.exec(a);if(e)return e[1]!==void 0||!1}function WI(a){const e=Mu(a,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function Yi(a){const e=Mu(a,!1);return Tne(e)}function Tne(a){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a);if(e)return parseFloat(e[1])}function bl(a){const e=Mu(a,!1);return Ene(e)}function Ene(a){const e=/^\s*(\d+)\s*$/.exec(a);if(e)return parseInt(e[1],10)}function na(a){return Mu(a,!1).trim()}function ff(a,e){ji(a,e?"1":"0")}function Mne(a,e){a.appendChild(Nf().createCDATASection(e))}function Lne(a,e){const t=new Date(e*1e3),i=t.getUTCFullYear()+"-"+kh(t.getUTCMonth()+1,2)+"-"+kh(t.getUTCDate(),2)+"T"+kh(t.getUTCHours(),2)+":"+kh(t.getUTCMinutes(),2)+":"+kh(t.getUTCSeconds(),2)+"Z";a.appendChild(Nf().createTextNode(i))}function Do(a,e){const t=e.toPrecision();a.appendChild(Nf().createTextNode(t))}function Qx(a,e){const t=e.toString();a.appendChild(Nf().createTextNode(t))}const Rne=/^\s/,kne=/\s$/,Wne=/(\n|\t|\r|<|&| {2})/;function ji(a,e){typeof e=="string"&&(Rne.test(e)||kne.test(e)||Wne.test(e))?e.split("]]>").forEach((t,i,n)=>{i<n.length-1&&(t+="]]"),i>0&&(t=">"+t),Mne(a,t)}):a.appendChild(Nf().createTextNode(e))}const tl=[null,"http://www.opengis.net/ows/1.1"],Gne=Ct(tl,{ServiceIdentification:Xe(rre),ServiceProvider:Xe(ore),OperationsMetadata:Xe(ire)});class One extends zO{constructor(){super()}readFromNode(e){const t=va({},Gne,e,[]);return t||null}}const Pne=Ct(tl,{DeliveryPoint:Xe(na),City:Xe(na),AdministrativeArea:Xe(na),PostalCode:Xe(na),Country:Xe(na),ElectronicMailAddress:Xe(na)}),Bne=Ct(tl,{Value:zo(lre)}),Nne=Ct(tl,{AllowedValues:Xe(jne)}),Fne=Ct(tl,{Phone:Xe(nre),Address:Xe(Kne)}),Dne=Ct(tl,{HTTP:Xe(tre)}),Vne=Ct(tl,{Get:zo(ere),Post:void 0}),Zne=Ct(tl,{DCP:Xe(Qne)}),zne=Ct(tl,{Operation:are}),Une=Ct(tl,{Voice:Xe(na),Facsimile:Xe(na)}),Hne=Ct(tl,{Constraint:zo($ne)}),Xne=Ct(tl,{IndividualName:Xe(na),PositionName:Xe(na),ContactInfo:Xe(Jne)}),qne=Ct(tl,{Abstract:Xe(na),AccessConstraints:Xe(na),Fees:Xe(na),Title:Xe(na),ServiceTypeVersion:Xe(na),ServiceType:Xe(na)}),Yne=Ct(tl,{ProviderName:Xe(na),ProviderSite:Xe(p3),ServiceContact:Xe(sre)});function Kne(a,e){return va({},Pne,a,e)}function jne(a,e){return va({},Bne,a,e)}function $ne(a,e){const t=a.getAttribute("name");if(t)return va({name:t},Nne,a,e)}function Jne(a,e){return va({},Fne,a,e)}function Qne(a,e){return va({},Dne,a,e)}function ere(a,e){const t=p3(a);if(t)return va({href:t},Hne,a,e)}function tre(a,e){return va({},Vne,a,e)}function are(a,e){const t=a.getAttribute("name"),i=va({},Zne,a,e);if(!i)return;const n=e[e.length-1];n[t]=i}function ire(a,e){return va({},zne,a,e)}function nre(a,e){return va({},Une,a,e)}function rre(a,e){return va({},qne,a,e)}function sre(a,e){return va({},Xne,a,e)}function ore(a,e){return va({},Yne,a,e)}function lre(a,e){return na(a)}const ure=One,Lc=[null,"http://www.opengis.net/wmts/1.0"],Ff=[null,"http://www.opengis.net/ows/1.1"],cre=Ct(Lc,{Contents:Xe(xre)});class dre extends zO{constructor(){super(),this.owsParser_=new ure}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let i=this.owsParser_.readFromNode(e);return i?(i.version=t,i=va(i,cre,e,[]),i||null):null}}const hre=Ct(Lc,{Layer:zo(wre),TileMatrixSet:zo(Ire)}),_re=Ct(Lc,{Style:zo(Cre),Format:zo(na),TileMatrixSetLink:zo(Sre),Dimension:zo(Are),ResourceURL:zo(Tre)},Ct(Ff,{Title:Xe(na),Abstract:Xe(na),WGS84BoundingBox:Xe(HO),BoundingBox:zo(Ere),Identifier:Xe(na)})),mre=Ct(Lc,{LegendURL:zo(Mre)},Ct(Ff,{Title:Xe(na),Identifier:Xe(na)})),pre=Ct(Lc,{TileMatrixSet:Xe(na),TileMatrixSetLimits:Xe(Rre)}),gre=Ct(Lc,{TileMatrixLimits:qo(kre)}),fre=Ct(Lc,{TileMatrix:Xe(na),MinTileRow:Xe(bl),MaxTileRow:Xe(bl),MinTileCol:Xe(bl),MaxTileCol:Xe(bl)}),yre=Ct(Lc,{Default:Xe(na),Value:zo(na)},Ct(Ff,{Identifier:Xe(na)})),UO=Ct(Ff,{LowerCorner:qo(OT),UpperCorner:qo(OT)}),bre=Ct(Lc,{WellKnownScaleSet:Xe(na),TileMatrix:zo(Lre)},Ct(Ff,{SupportedCRS:Xe(na),Identifier:Xe(na),BoundingBox:Xe(HO)})),vre=Ct(Lc,{TopLeftCorner:Xe(OT),ScaleDenominator:Xe(Yi),TileWidth:Xe(bl),TileHeight:Xe(bl),MatrixWidth:Xe(bl),MatrixHeight:Xe(bl)},Ct(Ff,{Identifier:Xe(na)}));function xre(a,e){return va({},hre,a,e)}function wre(a,e){return va({},_re,a,e)}function Ire(a,e){return va({},bre,a,e)}function Cre(a,e){const t=va({},mre,a,e);if(!t)return;const i=a.getAttribute("isDefault")==="true";return t.isDefault=i,t}function Sre(a,e){return va({},pre,a,e)}function Are(a,e){return va({},yre,a,e)}function Tre(a,e){const t=a.getAttribute("format"),i=a.getAttribute("template"),n=a.getAttribute("resourceType"),s={};return t&&(s.format=t),i&&(s.template=i),n&&(s.resourceType=n),s}function HO(a,e){const t=va([],UO,a,e);if(t.length==2)return Ss(t)}function Ere(a,e){const t=a.getAttribute("crs"),i=va([],UO,a,e);if(i.length==2)return{extent:Ss(i),crs:t}}function Mre(a,e){const t={};return t.format=a.getAttribute("format"),t.href=p3(a),t}function OT(a,e){const t=na(a).split(/\s+/);if(!t||t.length!=2)return;const i=+t[0],n=+t[1];if(!(isNaN(i)||isNaN(n)))return[i,n]}function Lre(a,e){return va({},vre,a,e)}function Rre(a,e){return va([],gre,a,e)}function kre(a,e){return va({},fre,a,e)}const Wre=dre;class Gre{constructor(e){zt(this,"capabilitiesPromise");zt(this,"serviceInfo");zt(this,"layers");const t=new Wre;let i="&";e.indexOf("?")===-1&&(i="?"),e.indexOf("Capabilities")===-1&&(e=e+i+"SERVICE=WMTS&REQUEST=GetCapabilities"),this.capabilitiesPromise=fetch(e).then(n=>n.text()).then(n=>{var r;const s=t.read(n);this.serviceInfo=this.mapServiceInfo(s.ServiceIdentification),this.layers=this.mapToRemoteLayers((r=s.Contents)==null?void 0:r.Layer)})}mapToRemoteLayers(e){return[{type:fc.WMTS,children:e.map(t=>({type:fc.WMTS,abstract:t.Abstract,format:t.Format,name:t.Identifier,title:t.Title,tileMatrixSetLink:t.TileMatrixSetLink,wgs84BoundingBox:t.WGS84BoundingBox}))}]}mapServiceInfo(e){return{type:fc.WMTS,title:e.Title,abstract:e.Abstract,fees:e.Fees,constraints:e.AccessConstraints,serviceTypeVersion:e.ServiceTypeVersion}}isReady(){return this.capabilitiesPromise.then(()=>this)}getLayerByName(e){return this.layers[0].children.filter(t=>t.name===e)[0]}getLayers(){return this.layers}getServiceInfo(){return this.serviceInfo}}const Ore="https://migration.geoportail.lu/ogcproxywms",Pre="https://migration.geoportail.lu/httpsproxy";class Bre{constructor(){zt(this,"_wmsProxyUrl",Ore);zt(this,"_remoteProxyUrl",Pre)}get wmsProxyUrl(){return this._wmsProxyUrl===void 0&&console.warn("Warning: proxyWmsUrl is not set."),this._wmsProxyUrl}get remoteProxyUrl(){return this._remoteProxyUrl===void 0&&console.warn("Warning: remoteProxy is not set."),this._remoteProxyUrl}getProxyfiedUrl(e){return e.indexOf("httpsproxy")>0?e:this.remoteProxyUrl+"?url="+encodeURIComponent(e)}init_v3(e,t){e&&(this._wmsProxyUrl=e),t&&(this._remoteProxyUrl=t),console.warn("Deprecated: ProxyUrlHelper.init_v3() is meant to be removed when v4 is fully operational")}}const M1=new Bre;class Nre{async getRemoteEndpoint(e){let t;return await this.getWmsEndpoint(e).isReady().catch(async()=>{t=await this.getWmtsEndpoint(e).isReady()})||t}getWmsEndpoint(e){return new Jie(M1.getProxyfiedUrl(e))}getWmtsEndpoint(e){return new Gre(M1.getProxyfiedUrl(e))}async fetchRemoteWmsEndpoint(){return new Promise(e=>e(wne()))}isRemoteLayer(e){return typeof e=="string"&&(e.indexOf(fc.WMS)===0||e.indexOf(fc.WMTS)===0)}}const L1=new Nre;class XO{}class Fre extends XO{async getMetadata(e,t,i){const n=L1.getWmsEndpoint(t);await n.isReady();const s=n==null?void 0:n.getServiceInfo(),r=n==null?void 0:n.getLayerByName(i);return{title:r.title,description:r.abstract,keywords:s.keywords,accessConstraints:s.constraints,serviceDescription:s.abstract}}}const Dre=new Fre;class Vre extends XO{async getMetadata(e,t,i){const n=L1.getWmtsEndpoint(t);await n.isReady();const s=n==null?void 0:n.getServiceInfo(),r=n==null?void 0:n.getLayerByName(i);return{title:r.title,description:r.abstract,accessConstraints:s.constraints,serviceDescription:s.abstract}}}const Zre=new Vre;class zre{async getMetadata(e,t,i){if(e===fc.WMS)return Dre.getMetadata(e,t,i);if(e===fc.WMTS)return Zre.getMetadata(e,t,i);throw new Error(`Unsupported service type: ${e}`)}}const Ure=new zre,a2=new Map,Hre="https://geocatalogue.geoportail.lu/geonetwork/srv",Xre="https://migration.geoportail.lu/legends/get_html",qre="https://migration.geoportail.lu/getMetadata";class Yre{async getLayerMetadata(e,t){let i;const s=zl().findAnyLayerById(e);return a2.has(e)?a2.get(e):(s?i=this.getLayerMetadataLocal(s,t):i=this.getLayerMetadataRemote(e),a2.set(e,i),i)}async getLayerMetadataRemote(e){const[t,i,n]=String(e).split("%2D").join("-").split("||");return Ure.getMetadata(t,i,n)}async getLayerMetadataLocal(e,t){const i=e.metadata,n=i==null?void 0:i.metadata_id,s=n?await this.getLocalMetadata(qre,n,t):{isError:!0},r=e.name,l=(i==null?void 0:i.legend_name)||"",u=e==null?void 0:e.id,d=await this.getLegendHtml(Xre,l,u,t),m=!!d&&d.hasChildNodes();return{...s,title:r,hasLegend:m,...m&&{legendHtml:d}}}getLocalMetadata(e,t,i){return fetch(`${e}?lang=${i}&uid=${t}`).then(async n=>{const s=(await n.json()).metadata;return{name:s.title,serviceDescription:s.serviceDescription,description:s.abstract,legalConstraints:s.legalConstraints,link:Vee(s.link),revisionDate:s.revisionDate,keyword:s.keyword,responsibleParty:s.responsibleParty?Zee(s.responsibleParty):void 0,metadataLink:`${Hre}/${Fee(i)}/catalog.search#/metadata/${t}`,isError:!1}}).catch(()=>({isError:!0}))}getLegendHtml(e,t,i,n){const s={lang:n,...t&&{name:t},...i&&{id:i.toString()}};if(s.lang){window.devicePixelRatio>1&&(s.dpi=(window.devicePixelRatio*96).toString());const r=`${e}?${new URLSearchParams(s).toString()}`;return fetch(r).then(async l=>{if(l.status>=400&&l.status<600)throw new Error("Server responded with error code");const u=await l.text();return u?Dee(u):void 0}).catch(()=>{})}}clearCache(){a2.clear()}}const ew=new Yre,Df="ipv6",tw="address",tp="applogin",e_="localforage",Kg="debug",Kre="embedded",qO="embeddedserver",YO="embeddedserverprotocol",PT="features",yf="fid",Xh="lang",aw="layersOpen",BT="version",jre="map_id",F9="layers",D9="bgLayer",V9="opacities",R1="theme",Z9="time",z9="zoom",U9="rotation",$re="SRS",NT="X",FT="Y",HS="crosshair",k1="serial",KO=["basemap_2015_global","topogr_global","topo_bw_jpeg"],DT="lc",VT="sliderRatio",jO="bgOpacity",Jre="layers_indices",H9="layers_opacity",X9="layers_visibility";var Ts=(a=>(a[a.localStorage=0]="localStorage",a[a.permalink=1]="permalink",a[a.permalinkAsPath=2]="permalinkAsPath",a[a.permalinkAndLocalStorage=3]="permalinkAndLocalStorage",a))(Ts||{});class $O{}function jg(a,e){let t;return(...i)=>{clearTimeout(t),t=setTimeout(()=>{a.apply(i)},e)}}const Qre=(a,e)=>{let t=null;return(...i)=>new Promise((n,s)=>{t&&clearTimeout(t),t=setTimeout(async()=>{try{const r=await a(...i);n(r)}catch(r){s(r)}},e)})};function JO(a,e){let t,i;return function(...n){const s=this;i?(clearTimeout(t),t=setTimeout(function(){Date.now()-i>=e&&(a.apply(s,n),i=Date.now())},e-(Date.now()-i))):(a.apply(s,n),i=Date.now())}}function mm(a){return a!=null&&a.trim()&&!isNaN(Number(a))?Number(a):void 0}function ese(a,e){return(a==null?void 0:a.split(e).map(t=>t!==null&&!isNaN(Number(t))?parseFloat(t):void 0))||[]}function tse(a,e){return(a==null?void 0:a.split(e).map(g3))||[]}function g3(a){return(a==null?void 0:a.trim())==="true"?!0:(a==null?void 0:a.trim())==="false"?!1:void 0}function QO(){return window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches}function yc(a){return typeof window<"u"&&window.navigator&&a.test(navigator.userAgent)}function ase(a){const e=new RegExp("[^/]*//[^/]+/(.*)"),t=a.match(e);return t?t[1]:null}const ise=yc(/firefox/i);yc(/safari/i)&&!yc(/chrome/i)&&yc(/android/i);yc(/iP(ad|od|hone)/i);yc(/chrome/i)&&yc(/android/i);yc(/chrome/i);yc(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i);yc(/Edge/i);function q9(a){return a.replace(/\s+/g,"_").replace(/[^a-z0-9\-_]/gi,"")||"_"}async function nse(a,e){const t=await fetch(a);if(!t.ok)throw new Error;const i=await t.blob();tP(e,i)}function eP(a,e,t="text/plain"){const i=new Blob([e],{type:t});tP(a,i)}function tP(a,e){const t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)}function rse(a){return a.charAt(0).toUpperCase()+a.slice(1)}class iw extends $O{static processRules(e){return iw.ruleUseLocalStorage(e)?Ts.localStorage:Ts.permalink}static processRulesForKey(e,t){if(KO.includes(e))return Ts.localStorage;if(e===k1)return Ts.permalink;if(e===aw)return Ts.localStorage}static ruleUseLocalStorage(e){return[sse,ose,lse].reduce((t,i)=>t||i(e),!1)}}const sse=a=>Object.keys(a).length===0,ose=a=>Object.keys(a).length===1&&(a.hasOwnProperty(Df)||a.hasOwnProperty(tp)||a.hasOwnProperty(e_)),lse=a=>Object.keys(a).length===3&&a.hasOwnProperty(Df)&&a.hasOwnProperty(tp)&&a.hasOwnProperty(e_);class nw extends $O{static processRules(){return Ts.permalinkAndLocalStorage}static processRulesForKey(e,t){if(nw.ruleUsePermalink(e))return Ts.permalink;if(e===aw||KO.includes(e))return Ts.localStorage;if(e===k1||e===PT)return Ts.permalink;if(e===R1)return Ts.permalinkAsPath}static ruleUsePermalink(e){return[use,cse,dse].reduce((t,i)=>t||i(e),!1)}}const use=a=>a===DT||a===VT,cse=a=>a===BT,dse=a=>a===R1&&!0;class aP{constructor(){zt(this,"snappedUrl");this.snappedUrl=new URL(window.location.toString())}get length(){throw new Error("Method not implemented.")}clear(){throw new Error("Method not implemented.")}key(e){throw new Error("Method key() not implemented. "+e)}getStrippedUrl(e){const t=new URL(window.location.toString()),i=new URLSearchParams(t.search);return e!==void 0&&(i.set("X",Math.round(e[0]).toString()),i.set("Y",Math.round(e[1]).toString())),i.delete(e_),i.delete(tp),i.delete(Df),i.delete(qO),i.delete(YO),t.search=i.toString(),t}getRelativeUrl(){const e=this.getStrippedUrl(void 0);return e.pathname+e.search}async getShortUrl(e){const t=this.getStrippedUrl(e).toString().replace(/https:\/\/geoportail-luxembourg.github.io\/luxembourg-geoportail\/.+\//,"https://migration.geoportail.lu/").replace(/http:\/\/localhost:[45]173\//,"https://migration.geoportail.lu/"),i=new URLSearchParams;return i.set("url",t),await(await fetch("https://migration.geoportail.lu/short/create",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i.toString()})).json()}getSnappedUrl(){return this.snappedUrl}getSnappedParamsAsObj(){return this.getSnappedParams().reduce((e,t)=>{const[i,n]=t.split("=");return{...e,[i]:n}},{})}getSnappedParams(){return this.getSnappedUrl().search.replace("?","").split("&").filter(e=>e.split("=")[1])}setItem(e,t){const i=new URLSearchParams(new URL(window.location.toString()).search);i.set(encodeURIComponent(e),encodeURIComponent(t));try{window.history.replaceState(null,"","?"+i.toString())}catch{}}getItem(e){const t=this.getSnappedUrl().searchParams.get(e);return t!==null?decodeURIComponent(t):t}removeItem(e){const t=new URLSearchParams(new URL(window.location.toString()).search);t.delete(e);try{window.history.replaceState(null,"","?"+t.toString())}catch{}}encodeQueryParam(e,t){return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`}removeQueryParam(e){const t=new URL(window.location.href);t.searchParams.delete(e),window.history.replaceState({},document.title,t.toString())}}const Ul=new aP;class hse extends aP{getItem(e){const t=this.getSnappedUrl().pathname.split("/"),i=t.findIndex(n=>n===e);return t[i+1]}setItem(e,t){const i=new URL(window.location.toString()).search,n=`/luxembourg-geoportail/main/${e}/${t}${i}`;try{window.history.replaceState(null,"",n)}catch{}}}const iP=new hse;class _se{get length(){throw new Error("Method not implemented.")}clear(){throw new Error("Method not implemented.")}key(e){throw new Error("Method key() not implemented. "+e)}removeItem(e){const t=this.getWriteStorages(e);t==null||t.map(i=>i.removeItem(e))}setItem(e,t){this.setValue(e,t)}getItem(e){return this.getValue(e)}get paramKeys(){return Ul.getSnappedParamsAsObj()}getValue(e){var n;const t=(n=this.correspondingStorages(iw.processRules(this.paramKeys)))==null?void 0:n.pop(),i=this.storageForKey(e,iw,t);return i?i.getItem(e):null}setValue(e,t){const i=this.getWriteStorages(e);i==null||i.map(n=>n.setItem(e,t))}getWriteStorages(e){const t=this.correspondingStorages(nw.processRules()),i=this.storageForKey(e,nw);return i?[i]:t}storageForKey(e,t,i){var s;return((s=this.correspondingStorages(t.processRulesForKey(e,this.paramKeys)))==null?void 0:s.pop())??i}correspondingStorages(e){if(e===Ts.permalinkAndLocalStorage)return[Ul,localStorage];if(e===Ts.localStorage)return[localStorage];if(e===Ts.permalink)return[Ul];if(e===Ts.permalinkAsPath)return[iP]}}const i2=new _se;function mse(a){return pse(a)||gse(a)||fse(a)||yse(a)}const pse=a=>Object.keys(a).length===0,gse=a=>{const e=Object.keys(a);return Object.keys(a).length===1&&[Df,tp,e_,yf,Xh,tw,Kg].some(t=>e.indexOf(t)!==-1)},fse=a=>{const e=Object.keys(a),t=n=>e.indexOf(n)!==-1,i=[[tp,e_],[Kg,yf],[Xh,yf],[Kg,Xh],[Kg,tw],[Xh,tw]];return Object.keys(a).length===2&&i.reduce((n,s)=>n||s.every(t),!1)},yse=a=>{const e=Object.keys(a),t=r=>e.indexOf(r)!==-1,i=[Df,tp,e_].every(t),n=[Kg,yf,Xh].every(t),s=[Kg,tw,Xh].every(t);return Object.keys(a).length===3&&(i||n||s)};class bse{constructor(){zt(this,"intialVersion");const e=i2.paramKeys,t=this.getValue(BT,mm);this.intialVersion=t?Math.max(2,Math.min(t,3)):mse(e)?3:2,this.setValue(BT,3)}getInitialVersion(){return this.intialVersion}mapToEntity(e,t){return t?t(e):e}mapToStorage(e,t){return t?t(e):String(e)}getValue(e,t){return this.mapToEntity(i2.getValue(e),t)}setValue(e,t,i){i2.setValue(e,this.mapToStorage(t,i))}removeItem(e){i2.removeItem(e)}}const Ma=new bse;class vse{bootstrap(){this.restore();let e;e=dr(()=>{this.persist(),e&&e()})}persist(){const e=_i(),{lang:t}=Tt(e);Ut(t,(i,n)=>{n!==i&&(Ma.setValue(Xh,i),document.documentElement.setAttribute("lang",i))},{immediate:!0})}restore(){const e=Ma.getValue(Xh);if(e){const{setLang:t}=_i(),{i18next:i}=wt();i.changeLanguage(e),t(e)}}}const xse=new vse,wse=$e({__name:"language-selector",setup(a){const{i18next:e,t}=wt(),{setLang:i}=_i(),{lang:n}=Tt(_i()),s=St(()=>["en","de","fr","lb"].map(u=>({label:t(u),value:u,ariaLabel:t("Change language: {{lang}}",{ns:"app",lang:u})}))),r=t("Change language",{ns:"app"});xse.bootstrap(),Ut(()=>e.language,()=>{ew.clearCache()});function l(u){e.changeLanguage(u),i(u)}return(u,d)=>(U(),Gt(qx,{class:"lux-navbar-dropdown lux-dropdown-inline text-white h-full",options:s.value,placeholder:k(r),modelValue:k(n),"onUpdate:modelValue":d[0]||(d[0]=m=>Xn(n)?n.value=m:null),onChange:l},null,8,["options","placeholder","modelValue"]))}}),Ise="include";async function u_(a,e,t="GET",i){const n={},s={method:t,credentials:Ise,headers:n};let r=a;if(t==="GET"){const u=new URLSearchParams(e);r=`${a}?${u.toString()}`}else e instanceof FormData?s.body=e:i==="application/json"?(n["Content-Type"]="application/json",s.body=JSON.stringify(e)):(n["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",s.body=new URLSearchParams(e));const l=await fetch(r,s);if(!l.ok)throw new Error("Error while trying to call api");return l}class Cse{drawCustom(e,t,i,n,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const nP=Cse,ob={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},n2=[ob.FILL],Nh=[ob.STROKE],pm=[ob.BEGIN_PATH],Y9=[ob.CLOSE_PATH],qa=ob;class Sse extends nP{constructor(e,t,i,n){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates;let r=s.length;for(let l=0,u=e.length;l<u;l+=t)n[0]=e[l],n[1]=e[l+1],xc(i,n)&&(s[r++]=n[0],s[r++]=n[1]);return r}appendFlatLineCoordinates(e,t,i,n,s,r){const l=this.coordinates;let u=l.length;const d=this.getBufferedMaxExtent();r&&(t+=n);let m=e[t],f=e[t+1];const v=this.tmpCoordinate_;let w=!0,S,T,M;for(S=t+n;S<i;S+=n)v[0]=e[S],v[1]=e[S+1],M=QA(d,v),M!==T?(w&&(l[u++]=m,l[u++]=f,w=!1),l[u++]=v[0],l[u++]=v[1]):M===_s.INTERSECTING?(l[u++]=v[0],l[u++]=v[1],w=!1):w=!0,m=v[0],f=v[1],T=M;return(s&&w||S===t+n)&&(l[u++]=m,l[u++]=f),u}drawCustomCoordinates_(e,t,i,n,s){for(let r=0,l=i.length;r<l;++r){const u=i[r],d=this.appendFlatLineCoordinates(e,t,u,n,!1,!1);s.push(d),t=u}return t}drawCustom(e,t,i,n,s){this.beginGeometry(e,t,s);const r=e.getType(),l=e.getStride(),u=this.coordinates.length;let d,m,f,v,w;switch(r){case"MultiPolygon":d=e.getOrientedFlatCoordinates(),v=[];const S=e.getEndss();w=0;for(let T=0,M=S.length;T<M;++T){const G=[];w=this.drawCustomCoordinates_(d,w,S[T],l,G),v.push(G)}this.instructions.push([qa.CUSTOM,u,v,e,i,sT,s]),this.hitDetectionInstructions.push([qa.CUSTOM,u,v,e,n||i,sT,s]);break;case"Polygon":case"MultiLineString":f=[],d=r=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),w=this.drawCustomCoordinates_(d,0,e.getEnds(),l,f),this.instructions.push([qa.CUSTOM,u,f,e,i,p1,s]),this.hitDetectionInstructions.push([qa.CUSTOM,u,f,e,n||i,p1,s]);break;case"LineString":case"Circle":d=e.getFlatCoordinates(),m=this.appendFlatLineCoordinates(d,0,d.length,l,!1,!1),this.instructions.push([qa.CUSTOM,u,m,e,i,Ph,s]),this.hitDetectionInstructions.push([qa.CUSTOM,u,m,e,n||i,Ph,s]);break;case"MultiPoint":d=e.getFlatCoordinates(),m=this.appendFlatPointCoordinates(d,l),m>u&&(this.instructions.push([qa.CUSTOM,u,m,e,i,Ph,s]),this.hitDetectionInstructions.push([qa.CUSTOM,u,m,e,n||i,Ph,s]));break;case"Point":d=e.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),m=this.coordinates.length,this.instructions.push([qa.CUSTOM,u,m,e,i,void 0,s]),this.hitDetectionInstructions.push([qa.CUSTOM,u,m,e,n||i,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[qa.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[qa.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let n,s,r=-1;for(t=0;t<i;++t)n=e[t],s=n[0],s==qa.END_GEOMETRY?r=t:s==qa.BEGIN_GEOMETRY&&(n[2]=t,fH(this.hitDetectionInstructions,r,t),r=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=uc(i||Zo)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=uc(i||f1);const n=e.getLineCap();t.lineCap=n!==void 0?n:hf;const s=e.getLineDash();t.lineDash=s?s.slice():Td;const r=e.getLineDashOffset();t.lineDashOffset=r||Ed;const l=e.getLineJoin();t.lineJoin=l!==void 0?l:_f;const u=e.getWidth();t.lineWidth=u!==void 0?u:b1;const d=e.getMiterLimit();t.miterLimit=d!==void 0?d:g1,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[qa.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[qa.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,n=e.lineCap,s=e.lineDash,r=e.lineDashOffset,l=e.lineJoin,u=e.lineWidth,d=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=n||s!=e.currentLineDash&&!Zd(e.currentLineDash,s)||e.currentLineDashOffset!=r||e.currentLineJoin!=l||e.currentLineWidth!=u||e.currentMiterLimit!=d)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=n,e.currentLineDash=s,e.currentLineDashOffset=r,e.currentLineJoin=l,e.currentLineWidth=u,e.currentMiterLimit=d)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[qa.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=mW(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Kh(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const lb=Sse;class Ase extends lb{constructor(e,t,i,n){super(e,t,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!xc(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const n=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,l=this.appendFlatPointCoordinates(n,s);this.instructions.push([qa.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([qa.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const n=e.getFlatCoordinates(),s=[];for(let u=0,d=n.length;u<d;u+=e.getStride())(!this.maxExtent||xc(this.maxExtent,n.slice(u,u+2)))&&s.push(n[u],n[u+1]);const r=this.coordinates.length,l=this.appendFlatPointCoordinates(s,2);this.instructions.push([qa.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([qa.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),n=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=n[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Tse=Ase;class Ese extends lb{constructor(e,t,i,n){super(e,t,i,n)}drawFlatCoordinates_(e,t,i,n){const s=this.coordinates.length,r=this.appendFlatLineCoordinates(e,t,i,n,!1,!1),l=[qa.MOVE_TO_LINE_TO,s,r];return this.instructions.push(l),this.hitDetectionInstructions.push(l),i}drawLineString(e,t,i){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([qa.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Td,Ed],pm);const l=e.getFlatCoordinates(),u=e.getStride();this.drawFlatCoordinates_(l,0,l.length,u),this.hitDetectionInstructions.push(Nh),this.endGeometry(t)}drawMultiLineString(e,t,i){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([qa.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Td,Ed],pm);const l=e.getEnds(),u=e.getFlatCoordinates(),d=e.getStride();let m=0;for(let f=0,v=l.length;f<v;++f)m=this.drawFlatCoordinates_(u,m,l[f],d);this.hitDetectionInstructions.push(Nh),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Nh),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Nh),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(pm)}}const Mse=Ese;class Lse extends lb{constructor(e,t,i,n){super(e,t,i,n)}drawFlatCoordinatess_(e,t,i,n){const s=this.state,r=s.fillStyle!==void 0,l=s.strokeStyle!==void 0,u=i.length;this.instructions.push(pm),this.hitDetectionInstructions.push(pm);for(let d=0;d<u;++d){const m=i[d],f=this.coordinates.length,v=this.appendFlatLineCoordinates(e,t,m,n,!0,!l),w=[qa.MOVE_TO_LINE_TO,f,v];this.instructions.push(w),this.hitDetectionInstructions.push(w),l&&(this.instructions.push(Y9),this.hitDetectionInstructions.push(Y9)),t=m}return r&&(this.instructions.push(n2),this.hitDetectionInstructions.push(n2)),l&&(this.instructions.push(Nh),this.hitDetectionInstructions.push(Nh)),t}drawCircle(e,t,i){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([qa.SET_FILL_STYLE,Zo]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qa.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Td,Ed]);const l=e.getFlatCoordinates(),u=e.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,u,!1,!1);const m=[qa.CIRCLE,d];this.instructions.push(pm,m),this.hitDetectionInstructions.push(pm,m),n.fillStyle!==void 0&&(this.instructions.push(n2),this.hitDetectionInstructions.push(n2)),n.strokeStyle!==void 0&&(this.instructions.push(Nh),this.hitDetectionInstructions.push(Nh)),this.endGeometry(t)}drawPolygon(e,t,i){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([qa.SET_FILL_STYLE,Zo]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qa.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Td,Ed]);const l=e.getEnds(),u=e.getOrientedFlatCoordinates(),d=e.getStride();this.drawFlatCoordinatess_(u,0,l,d),this.endGeometry(t)}drawMultiPolygon(e,t,i){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([qa.SET_FILL_STYLE,Zo]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qa.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Td,Ed]);const l=e.getEndss(),u=e.getOrientedFlatCoordinates(),d=e.getStride();let m=0;for(let f=0,v=l.length;f<v;++f)m=this.drawFlatCoordinatess_(u,m,l[f],d);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,n=t.length;i<n;++i)t[i]=rm(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}const K9=Lse;function Rse(a,e,t,i,n){const s=[];let r=t,l=0,u=e.slice(t,2);for(;l<a&&r+n<i;){const[d,m]=u.slice(-2),f=e[r+n],v=e[r+n+1],w=Math.sqrt((f-d)*(f-d)+(v-m)*(v-m));if(l+=w,l>=a){const S=(a-l+w)/w,T=gl(d,f,S),M=gl(m,v,S);u.push(T,M),s.push(u),u=[T,M],l==a&&(r+=n),l=0}else if(l<a)u.push(e[r+n],e[r+n+1]),r+=n;else{const S=w-l,T=gl(d,f,S/w),M=gl(m,v,S/w);u.push(T,M),s.push(u),u=[T,M],l=0,r+=n}}return l>0&&s.push(u),s}function kse(a,e,t,i,n){let s=t,r=t,l=0,u=0,d=t,m,f,v,w,S,T,M,G,P,F;for(f=t;f<i;f+=n){const N=e[f],V=e[f+1];S!==void 0&&(P=N-S,F=V-T,w=Math.sqrt(P*P+F*F),M!==void 0&&(u+=v,m=Math.acos((M*P+G*F)/(v*w)),m>a&&(u>l&&(l=u,s=d,r=f),u=0,d=f-n)),v=w,M=P,G=F),S=N,T=V}return u+=w,u>l?[d,f]:[s,r]}const rw={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Wse extends lb{constructor(e,t,i,n){super(e,t,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Zo]={fillStyle:Zo},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const n=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!n&&!s)return;const l=this.coordinates;let u=l.length;const d=e.getType();let m=null,f=e.getStride();if(r.placement==="line"&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!Rr(this.maxExtent,e.getExtent()))return;let v;if(m=e.getFlatCoordinates(),d=="LineString")v=[m.length];else if(d=="MultiLineString")v=e.getEnds();else if(d=="Polygon")v=e.getEnds().slice(0,1);else if(d=="MultiPolygon"){const M=e.getEndss();v=[];for(let G=0,P=M.length;G<P;++G)v.push(M[G][0])}this.beginGeometry(e,t,i);const w=r.repeat,S=w?void 0:r.textAlign;let T=0;for(let M=0,G=v.length;M<G;++M){let P;w?P=Rse(w*this.resolution,m,T,v[M],f):P=[m.slice(T,v[M])];for(let F=0,N=P.length;F<N;++F){const V=P[F];let K=0,te=V.length;if(S==null){const ne=kse(r.maxAngle,V,0,V.length,2);K=ne[0],te=ne[1]}for(let ne=K;ne<te;ne+=f)l.push(V[ne],V[ne+1]);const J=l.length;T=v[M],this.drawChars_(u,J),u=J}}this.endGeometry(t)}else{let v=r.overflow?null:[];switch(d){case"Point":case"MultiPoint":m=e.getFlatCoordinates();break;case"LineString":m=e.getFlatMidpoint();break;case"Circle":m=e.getCenter();break;case"MultiLineString":m=e.getFlatMidpoints(),f=2;break;case"Polygon":m=e.getFlatInteriorPoint(),r.overflow||v.push(m[2]/this.resolution),f=3;break;case"MultiPolygon":const N=e.getFlatInteriorPoints();m=[];for(let V=0,K=N.length;V<K;V+=3)r.overflow||v.push(N[V+2]/this.resolution),m.push(N[V],N[V+1]);if(m.length===0)return;f=2;break}const w=this.appendFlatPointCoordinates(m,f);if(w===u)return;if(v&&(w-u)/2!==m.length/f){let N=u/2;v=v.filter((V,K)=>{const te=l[(N+K)*2]===m[K*f]&&l[(N+K)*2+1]===m[K*f+1];return te||--N,te})}this.saveTextStates_();const S=r.backgroundFill?this.createFill(this.fillStyleToState(r.backgroundFill)):null,T=r.backgroundStroke?this.createStroke(this.strokeStyleToState(r.backgroundStroke)):null;this.beginGeometry(e,t,i);let M=r.padding;if(M!=hm&&(r.scale[0]<0||r.scale[1]<0)){let N=r.padding[0],V=r.padding[1],K=r.padding[2],te=r.padding[3];r.scale[0]<0&&(V=-V,te=-te),r.scale[1]<0&&(N=-N,K=-K),M=[N,V,K,te]}const G=this.pixelRatio;this.instructions.push([qa.DRAW_IMAGE,u,w,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,M==hm?hm:M.map(function(N){return N*G}),S,T,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,v]);const P=1/G,F=S?S.slice(0):null;F&&(F[1]=Zo),this.hitDetectionInstructions.push([qa.DRAW_IMAGE,u,w,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[P,P],NaN,this.declutterMode_,this.declutterImageWithText_,M,F,T,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Zo:this.fillKey_,this.textOffsetX_,this.textOffsetY_,v]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,n=this.strokeKey_;e&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||y1,justify:t.justify,textBaseline:t.textBaseline||Bx,scale:t.scale});const r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,r=this.textKey_,l=this.fillKey_;this.saveTextStates_();const u=this.pixelRatio,d=rw[n.textBaseline],m=this.textOffsetY_*u,f=this.text_,v=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([qa.DRAW_CHARS,e,t,d,n.overflow,l,n.maxAngle,u,m,s,v*u,f,r,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([qa.DRAW_CHARS,e,t,d,n.overflow,l&&Zo,n.maxAngle,u,m,s,v*u,f,r,1/u,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,n,s;if(!e)this.text_="";else{const r=e.getFill();r?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=uc(r.getColor()||Zo)):(n=null,this.textFillState_=n);const l=e.getStroke();if(!l)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const T=l.getLineDash(),M=l.getLineDashOffset(),G=l.getWidth(),P=l.getMiterLimit();s.lineCap=l.getLineCap()||hf,s.lineDash=T?T.slice():Td,s.lineDashOffset=M===void 0?Ed:M,s.lineJoin=l.getLineJoin()||_f,s.lineWidth=G===void 0?b1:G,s.miterLimit=P===void 0?g1:P,s.strokeStyle=uc(l.getColor()||f1)}i=this.textState_;const u=e.getFont()||f7;aY(u);const d=e.getScaleArray();i.overflow=e.getOverflow(),i.font=u,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||Bx,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||hm,i.scale=d===void 0?[1,1]:d;const m=e.getOffsetX(),f=e.getOffsetY(),v=e.getRotateWithView(),w=e.getKeepUpright(),S=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=v===void 0?!1:v,this.textKeepUpright_=w===void 0?!0:w,this.textRotation_=S===void 0?0:S,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Ia(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?typeof n.fillStyle=="string"?n.fillStyle:"|"+Ia(n.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Gse={Circle:K9,Default:lb,Image:Tse,LineString:Mse,Polygon:K9,Text:Wse};class Ose{constructor(e,t,i,n){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const n in i){const s=i[n].finish();e[t][n]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let n=this.buildersByZIndex_[i];n===void 0&&(n={},this.buildersByZIndex_[i]=n);let s=n[t];if(s===void 0){const r=Gse[t];s=new r(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=s}return s}}const rP=Ose;function f3(a,e,t,i){let n=a[e],s=a[e+1],r=0;for(let l=e+i;l<t;l+=i){const u=a[l],d=a[l+1];r+=Math.sqrt((u-n)*(u-n)+(d-s)*(d-s)),n=u,s=d}return r}function Pse(a,e,t,i,n,s,r,l,u,d,m,f,v=!0){let w=a[e],S=a[e+1],T=0,M=0,G=0,P=0;function F(){T=w,M=S,e+=i,w=a[e],S=a[e+1],P+=G,G=Math.sqrt((w-T)*(w-T)+(S-M)*(S-M))}do F();while(e<t-i&&P+G<s);let N=G===0?0:(s-P)/G;const V=gl(T,w,N),K=gl(M,S,N),te=e-i,J=P,ne=s+l*u(d,n,m);for(;e<t-i&&P+G<ne;)F();N=G===0?0:(ne-P)/G;const se=gl(T,w,N),de=gl(M,S,N);let _e=!1;if(v)if(f){const we=[V,K,se,de];c5(we,0,4,2,f,we,we),_e=we[0]>we[2]}else _e=V>se;const Se=Math.PI,ce=[],Ie=te+i===e;e=te,G=0,P=J,w=a[e],S=a[e+1];let he;if(Ie){F(),he=Math.atan2(S-M,w-T),_e&&(he+=he>0?-Se:Se);const we=(se+V)/2,Oe=(de+K)/2;return ce[0]=[we,Oe,(ne-s)/2,he,n],ce}n=n.replace(/\n/g," ");for(let we=0,Oe=n.length;we<Oe;){F();let Ye=Math.atan2(S-M,w-T);if(_e&&(Ye+=Ye>0?-Se:Se),he!==void 0){let $t=Ye-he;if($t+=$t>Se?-2*Se:$t<-Se?2*Se:0,Math.abs($t)>r)return null}he=Ye;const at=we;let yt=0;for(;we<Oe;++we){const $t=_e?Oe-we-1:we,Ua=l*u(d,n[$t],m);if(e+i<t&&P+G<s+yt+Ua/2)break;yt+=Ua}if(we===at)continue;const De=_e?n.substring(Oe-at,Oe-we):n.substring(at,we);N=G===0?0:(s+yt/2-P)/G;const jt=gl(T,w,N),pa=gl(M,S,N);ce.push([jt,pa,yt/2,Ye,De]),s+=yt}return ce}class Bse{constructor(){zt(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Gx(),{get:(e,t)=>{if(typeof Gx()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,n=t.length;i<n;++i){const s=t[i];if(typeof s=="function"){s(e);continue}const r=t[++i];if(typeof e[s]=="function")e[s](...r);else{if(typeof r=="function"){e[s]=r(e);continue}e[s]=r}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const y3=Bse,lg=xl(),yh=[],rd=[],sd=[],bh=[];function j9(a){return a[3].declutterBox}const $9=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function XS(a,e){return e==="start"?e=$9.test(a)?"right":"left":e==="end"&&(e=$9.test(a)?"left":"right"),rw[e]}function Nse(a,e,t){return t>0&&a.push(`
`,""),a.push(e,""),a}function Fse(a,e,t){return t%2===0&&(a+=e),a}class Dse{constructor(e,t,i,n,s){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=$o(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new y3:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,n){const s=e+t+i+n;if(this.labels_[s])return this.labels_[s];const r=n?this.strokeStates[n]:null,l=i?this.fillStates[i]:null,u=this.textStates[t],d=this.pixelRatio,m=[u.scale[0]*d,u.scale[1]*d],f=u.justify?rw[u.justify]:XS(Array.isArray(e)?e[0]:e,u.textAlign||y1),v=n&&r.lineWidth?r.lineWidth:0,w=Array.isArray(e)?e:String(e).split(`
`).reduce(Nse,[]),{width:S,height:T,widths:M,heights:G,lineWidths:P}=nY(u,w),F=S+v,N=[],V=(F+2)*m[0],K=(T+v)*m[1],te={width:V<0?Math.floor(V):Math.ceil(V),height:K<0?Math.floor(K):Math.ceil(K),contextInstructions:N};(m[0]!=1||m[1]!=1)&&N.push("scale",m),n&&(N.push("strokeStyle",r.strokeStyle),N.push("lineWidth",v),N.push("lineCap",r.lineCap),N.push("lineJoin",r.lineJoin),N.push("miterLimit",r.miterLimit),N.push("setLineDash",[r.lineDash]),N.push("lineDashOffset",r.lineDashOffset)),i&&N.push("fillStyle",l.fillStyle),N.push("textBaseline","middle"),N.push("textAlign","center");const J=.5-f;let ne=f*F+J*v;const se=[],de=[];let _e=0,Se=0,ce=0,Ie=0,he;for(let we=0,Oe=w.length;we<Oe;we+=2){const Ye=w[we];if(Ye===`
`){Se+=_e,_e=0,ne=f*F+J*v,++Ie;continue}const at=w[we+1]||u.font;at!==he&&(n&&se.push("font",at),i&&de.push("font",at),he=at),_e=Math.max(_e,G[ce]);const yt=[Ye,ne+J*M[ce]+f*(M[ce]-P[Ie]),.5*(v+_e)+Se];ne+=M[ce],n&&se.push("strokeText",yt),i&&de.push("fillText",yt),++ce}return Array.prototype.push.apply(N,se),Array.prototype.push.apply(N,de),this.labels_[s]=te,te}replayTextBackground_(e,t,i,n,s,r,l){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,t),r&&(this.alignAndScaleFill_=r[2],e.fillStyle=r[1],this.fill_(e)),l&&(this.setStrokeStyle_(e,l),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,n,s,r,l,u,d,m,f,v,w,S,T,M){l*=v[0],u*=v[1];let G=i-l,P=n-u;const F=s+d>e?e-d:s,N=r+m>t?t-m:r,V=S[3]+F*v[0]+S[1],K=S[0]+N*v[1]+S[2],te=G-S[3],J=P-S[0];(T||f!==0)&&(yh[0]=te,bh[0]=te,yh[1]=J,rd[1]=J,rd[0]=te+V,sd[0]=rd[0],sd[1]=J+K,bh[1]=sd[1]);let ne;return f!==0?(ne=Su($o(),i,n,1,1,f,-i,-n),Mr(ne,yh),Mr(ne,rd),Mr(ne,sd),Mr(ne,bh),wc(Math.min(yh[0],rd[0],sd[0],bh[0]),Math.min(yh[1],rd[1],sd[1],bh[1]),Math.max(yh[0],rd[0],sd[0],bh[0]),Math.max(yh[1],rd[1],sd[1],bh[1]),lg)):wc(Math.min(te,te+V),Math.min(J,J+K),Math.max(te,te+V),Math.max(J,J+K),lg),w&&(G=Math.round(G),P=Math.round(P)),{drawImageX:G,drawImageY:P,drawImageW:F,drawImageH:N,originX:d,originY:m,declutterBox:{minX:lg[0],minY:lg[1],maxX:lg[2],maxY:lg[3],value:M},canvasTransform:ne,scale:v}}replayImageOrLabel_(e,t,i,n,s,r,l){const u=!!(r||l),d=n.declutterBox,m=l?l[2]*n.scale[0]/2:0;return d.minX-m<=t[0]&&d.maxX+m>=0&&d.minY-m<=t[1]&&d.maxY+m>=0&&(u&&this.replayTextBackground_(e,yh,rd,sd,bh,r,l),rY(e,n.canvasTransform,s,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Mr(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(i[0]%n,i[1]%n),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,n){const s=this.textStates[t],r=this.createLabel(e,t,n,i),l=this.strokeStates[i],u=this.pixelRatio,d=XS(Array.isArray(e)?e[0]:e,s.textAlign||y1),m=rw[s.textBaseline||Bx],f=l&&l.lineWidth?l.lineWidth:0,v=r.width/u-2*s.scale[0],w=d*v+2*(.5-d)*f,S=m*r.height/u+2*(.5-m)*f;return{label:r,anchorX:w,anchorY:S}}execute_(e,t,i,n,s,r,l,u){const d=this.zIndexContext_;let m;this.pixelCoordinates_&&Zd(i,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=Ad(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),NH(this.renderedTransform_,i));let f=0;const v=n.length;let w=0,S,T,M,G,P,F,N,V,K,te,J,ne,se,de=0,_e=0;const Se=this.coordinateCache_,ce=this.viewRotation_,Ie=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,he={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ce},we=this.instructions!=n||this.overlaps?0:200;let Oe,Ye,at,yt;for(;f<v;){const De=n[f];switch(De[0]){case qa.BEGIN_GEOMETRY:Oe=De[1],yt=De[3],Oe.getGeometry()?l!==void 0&&!Rr(l,yt.getExtent())?f=De[2]+1:++f:f=De[2],d&&(d.zIndex=De[4]);break;case qa.BEGIN_PATH:de>we&&(this.fill_(e),de=0),_e>we&&(e.stroke(),_e=0),!de&&!_e&&(e.beginPath(),P=NaN,F=NaN),++f;break;case qa.CIRCLE:w=De[1];const pa=m[w],$t=m[w+1],Ua=m[w+2],bt=m[w+3],ui=Ua-pa,Ca=bt-$t,ii=Math.sqrt(ui*ui+Ca*Ca);e.moveTo(pa+ii,$t),e.arc(pa,$t,ii,0,2*Math.PI,!0),++f;break;case qa.CLOSE_PATH:e.closePath(),++f;break;case qa.CUSTOM:w=De[1],S=De[2];const zi=De[3],An=De[4],xe=De[5];he.geometry=zi,he.feature=Oe,f in Se||(Se[f]=[]);const Ge=Se[f];xe?xe(m,w,S,2,Ge):(Ge[0]=m[w],Ge[1]=m[w+1],Ge.length=2),d&&(d.zIndex=De[6]),An(Ge,he),++f;break;case qa.DRAW_IMAGE:w=De[1],S=De[2],K=De[3],T=De[4],M=De[5];let qe=De[6];const ut=De[7],gt=De[8],Pe=De[9],Qe=De[10];let ze=De[11];const st=De[12];let nt=De[13];G=De[14]||"declutter";const xt=De[15];if(!K&&De.length>=20){te=De[19],J=De[20],ne=De[21],se=De[22];const ni=this.drawLabelWithPointPlacement_(te,J,ne,se);K=ni.label,De[3]=K;const H=De[23];T=(ni.anchorX-H)*this.pixelRatio,De[4]=T;const j=De[24];M=(ni.anchorY-j)*this.pixelRatio,De[5]=M,qe=K.height,De[6]=qe,nt=K.width,De[13]=nt}let Et;De.length>25&&(Et=De[25]);let ta,oa,Na;De.length>17?(ta=De[16],oa=De[17],Na=De[18]):(ta=hm,oa=null,Na=null),Qe&&Ie?ze+=ce:!Qe&&!Ie&&(ze-=ce);let mi=0;for(;w<S;w+=2){if(Et&&Et[mi++]<nt/this.pixelRatio)continue;const ni=this.calculateImageOrLabelDimensions_(K.width,K.height,m[w],m[w+1],nt,qe,T,M,gt,Pe,ze,st,s,ta,!!oa||!!Na,Oe),H=[e,t,K,ni,ut,oa,Na];if(u){let j,ee,le;if(xt){const Te=S-w;if(!xt[Te]){xt[Te]={args:H,declutterMode:G};continue}const ae=xt[Te];j=ae.args,ee=ae.declutterMode,delete xt[Te],le=j9(j)}let me,Le;if(j&&(ee!=="declutter"||!u.collides(le))&&(me=!0),(G!=="declutter"||!u.collides(ni.declutterBox))&&(Le=!0),ee==="declutter"&&G==="declutter"){const Te=me&&Le;me=Te,Le=Te}me&&(ee!=="none"&&u.insert(le),this.replayImageOrLabel_.apply(this,j)),Le&&(G!=="none"&&u.insert(ni.declutterBox),this.replayImageOrLabel_.apply(this,H))}else this.replayImageOrLabel_.apply(this,H)}++f;break;case qa.DRAW_CHARS:const di=De[1],Tn=De[2],Ki=De[3],qn=De[4];se=De[5];const En=De[6],xr=De[7],Wr=De[8];ne=De[9];const Ri=De[10];te=De[11],Array.isArray(te)&&(te=te.reduce(Fse,"")),J=De[12];const Cn=[De[13],De[13]];G=De[14]||"declutter";const ao=De[15],So=this.textStates[J],gs=So.font,Fn=[So.scale[0]*xr,So.scale[1]*xr];let qr;gs in this.widths_?qr=this.widths_[gs]:(qr={},this.widths_[gs]=qr);const al=f3(m,di,Tn,2),pn=Math.abs(Fn[0])*SR(gs,te,qr);if(qn||pn<=al){const ni=this.textStates[J].textAlign,H=(al-pn)*XS(te,ni),j=Pse(m,di,Tn,2,te,H,En,Math.abs(Fn[0]),SR,gs,qr,Ie?0:this.viewRotation_,ao);e:if(j){const ee=[];let le,me,Le,Te,ae;if(ne)for(le=0,me=j.length;le<me;++le){ae=j[le],Le=ae[4],Te=this.createLabel(Le,J,"",ne),T=ae[2]+(Fn[0]<0?-Ri:Ri),M=Ki*Te.height+(.5-Ki)*2*Ri*Fn[1]/Fn[0]-Wr;const ye=this.calculateImageOrLabelDimensions_(Te.width,Te.height,ae[0],ae[1],Te.width,Te.height,T,M,0,0,ae[3],Cn,!1,hm,!1,Oe);if(u&&G==="declutter"&&u.collides(ye.declutterBox))break e;ee.push([e,t,Te,ye,1,null,null])}if(se)for(le=0,me=j.length;le<me;++le){ae=j[le],Le=ae[4],Te=this.createLabel(Le,J,se,""),T=ae[2],M=Ki*Te.height-Wr;const ye=this.calculateImageOrLabelDimensions_(Te.width,Te.height,ae[0],ae[1],Te.width,Te.height,T,M,0,0,ae[3],Cn,!1,hm,!1,Oe);if(u&&G==="declutter"&&u.collides(ye.declutterBox))break e;ee.push([e,t,Te,ye,1,null,null])}u&&G!=="none"&&u.load(ee.map(j9));for(let ye=0,Ne=ee.length;ye<Ne;++ye)this.replayImageOrLabel_.apply(this,ee[ye])}}++f;break;case qa.END_GEOMETRY:if(r!==void 0){Oe=De[1];const ni=r(Oe,yt,G);if(ni)return ni}++f;break;case qa.FILL:we?de++:this.fill_(e),++f;break;case qa.MOVE_TO_LINE_TO:for(w=De[1],S=De[2],Ye=m[w],at=m[w+1],e.moveTo(Ye,at),P=Ye+.5|0,F=at+.5|0,w+=2;w<S;w+=2)Ye=m[w],at=m[w+1],N=Ye+.5|0,V=at+.5|0,(w==S-2||N!==P||V!==F)&&(e.lineTo(Ye,at),P=N,F=V);++f;break;case qa.SET_FILL_STYLE:this.alignAndScaleFill_=De[2],de&&(this.fill_(e),de=0,_e&&(e.stroke(),_e=0)),e.fillStyle=De[1],++f;break;case qa.SET_STROKE_STYLE:_e&&(e.stroke(),_e=0),this.setStrokeStyle_(e,De),++f;break;case qa.STROKE:we?_e++:e.stroke(),++f;break;default:++f;break}}de&&this.fill_(e),_e&&e.stroke()}execute(e,t,i,n,s,r){this.viewRotation_=n,this.execute_(e,t,i,this.instructions,s,void 0,void 0,r)}executeHitDetection(e,t,i,n,s){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,n,s)}}const Vse=Dse,Rg=["Polygon","Circle","LineString","Image","Text","Default"],sw=["Image","Text"],Zse=Rg.filter(a=>!sw.includes(a));class zse{constructor(e,t,i,n,s,r,l){this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=$o(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,l)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let n=this.executorsByZIndex_[i];n===void 0&&(n={},this.executorsByZIndex_[i]=n);const s=e[i];for(const r in s){const l=s[r];n[r]=new Vse(this.resolution_,this.pixelRatio_,this.overlaps_,l,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let n=0,s=e.length;n<s;++n)if(e[n]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,n,s,r){n=Math.round(n);const l=n*2+1,u=Su(this.hitDetectionTransform_,n+.5,n+.5,1/t,-1/t,-i,-e[0],-e[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=Zr(l,l));const m=this.hitDetectionContext_;m.canvas.width!==l||m.canvas.height!==l?(m.canvas.width=l,m.canvas.height=l):d||m.clearRect(0,0,l,l);let f;this.renderBuffer_!==void 0&&(f=xl(),G0(f,e),Kh(f,t*(this.renderBuffer_+n),f));const v=Use(n);let w;function S(V,K,te){const J=m.getImageData(0,0,l,l).data;for(let ne=0,se=v.length;ne<se;ne++)if(J[v[ne]]>0){if(!r||te==="none"||w!=="Image"&&w!=="Text"||r.includes(V)){const de=(v[ne]-3)/4,_e=n-de%l,Se=n-(de/l|0),ce=s(V,K,_e*_e+Se*Se);if(ce)return ce}m.clearRect(0,0,l,l);break}}const T=Object.keys(this.executorsByZIndex_).map(Number);T.sort(pc);let M,G,P,F,N;for(M=T.length-1;M>=0;--M){const V=T[M].toString();for(P=this.executorsByZIndex_[V],G=Rg.length-1;G>=0;--G)if(w=Rg[G],F=P[w],F!==void 0&&(N=F.executeHitDetection(m,u,i,S,f),N))return N}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],n=t[1],s=t[2],r=t[3],l=[i,n,i,r,s,r,s,n];return Ad(l,0,8,2,e,l),l}isEmpty(){return Rm(this.executorsByZIndex_)}execute(e,t,i,n,s,r,l){const u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(l?gH:pc),r=r||Rg;const d=Rg.length;for(let m=0,f=u.length;m<f;++m){const v=u[m].toString(),w=this.executorsByZIndex_[v];for(let S=0,T=r.length;S<T;++S){const M=r[S],G=w[M];if(G!==void 0){const P=l===null?void 0:G.getZIndexContext(),F=P?P.getContext():e,N=this.maxExtent_&&M!=="Image"&&M!=="Text";if(N&&(F.save(),this.clip(F,i)),!P||M==="Text"||M==="Image"?G.execute(F,t,i,n,s,l):P.pushFunction(V=>G.execute(V,t,i,n,s,l)),N&&F.restore(),P){P.offset();const V=u[m]*d+S;this.deferredZIndexContexts_[V]||(this.deferredZIndexContexts_[V]=[]),this.deferredZIndexContexts_[V].push(P)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(pc);for(let i=0,n=t.length;i<n;++i)e[t[i]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[i]].length=0}}const qS={};function Use(a){if(qS[a]!==void 0)return qS[a];const e=a*2+1,t=a*a,i=new Array(t+1);for(let s=0;s<=a;++s)for(let r=0;r<=a;++r){const l=s*s+r*r;if(l>t)break;let u=i[l];u||(u=[],i[l]=u),u.push(((a+s)*e+(a+r))*4+3),s>0&&u.push(((a-s)*e+(a+r))*4+3),r>0&&(u.push(((a+s)*e+(a-r))*4+3),s>0&&u.push(((a-s)*e+(a-r))*4+3))}const n=[];for(let s=0,r=i.length;s<r;++s)i[s]&&n.push(...i[s]);return qS[a]=n,n}const sP=zse;class Hse extends nP{constructor(e,t,i,n,s,r,l){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=n,this.transformRotation_=n?Tf(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=r,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=$o()}drawImages_(e,t,i,n){if(!this.image_)return;const s=Ad(e,t,i,n,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.tmpLocalTransform_,u=r.globalAlpha;this.imageOpacity_!=1&&(r.globalAlpha=u*this.imageOpacity_);let d=this.imageRotation_;this.transformRotation_===0&&(d-=this.viewRotation_),this.imageRotateWithView_&&(d+=this.viewRotation_);for(let m=0,f=s.length;m<f;m+=2){const v=s[m]-this.imageAnchorX_,w=s[m+1]-this.imageAnchorY_;if(d!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const S=v+this.imageAnchorX_,T=w+this.imageAnchorY_;Su(l,S,T,1,1,d,-S,-T),r.save(),r.transform.apply(r,l),r.translate(S,T),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,v,w,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(r.globalAlpha=u)}drawText_(e,t,i,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Ad(e,t,i,n,this.transform_,this.pixelCoordinates_),r=this.context_;let l=this.textRotation_;for(this.transformRotation_===0&&(l-=this.viewRotation_),this.textRotateWithView_&&(l+=this.viewRotation_);t<i;t+=n){const u=s[t]+this.textOffsetX_,d=s[t+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(r.save(),r.translate(u-this.textOffsetX_,d-this.textOffsetY_),r.rotate(l),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.restore()):(this.textStrokeState_&&r.strokeText(this.text_,u,d),this.textFillState_&&r.fillText(this.text_,u,d))}}moveToLineTo_(e,t,i,n,s){const r=this.context_,l=Ad(e,t,i,n,this.transform_,this.pixelCoordinates_);r.moveTo(l[0],l[1]);let u=l.length;s&&(u-=2);for(let d=2;d<u;d+=2)r.lineTo(l[d],l[d+1]);return s&&r.closePath(),i}drawRings_(e,t,i,n){for(let s=0,r=i.length;s<r;++s)t=this.moveToLineTo_(e,t,i[s],n,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Rr(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=KH(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],n=t[3]-t[1],s=Math.sqrt(i*i+n*n),r=this.context_;r.beginPath(),r.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,n=t.length;i<n;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Rr(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Rr(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=e.getFlatCoordinates();let s=0;const r=e.getEnds(),l=e.getStride();i.beginPath();for(let u=0,d=r.length;u<d;++u)s=this.moveToLineTo_(n,s,r[u],l,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Rr(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Rr(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let n=0;const s=e.getEndss(),r=e.getStride();t.beginPath();for(let l=0,u=s.length;l<u;++l){const d=s[l];n=this.drawRings_(i,n,d,r)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Zd(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,n=e.textAlign?e.textAlign:y1;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=n&&(i.textAlign=n,t.textAlign=n),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=n,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:uc(i||Zo)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),n=t.getLineCap(),s=t.getLineDash(),r=t.getLineDashOffset(),l=t.getLineJoin(),u=t.getWidth(),d=t.getMiterLimit(),m=s||Td;this.strokeState_={lineCap:n!==void 0?n:hf,lineDash:this.pixelRatio_===1?m:m.map(f=>f*this.pixelRatio_),lineDashOffset:(r||Ed)*this.pixelRatio_,lineJoin:l!==void 0?l:_f,lineWidth:(u!==void 0?u:b1)*this.pixelRatio_,miterLimit:d!==void 0?d:g1,strokeStyle:uc(i||f1)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),n=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const r=e.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/i,r[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const w=t.getColor();this.textFillState_={fillStyle:uc(w||Zo)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const w=i.getColor(),S=i.getLineCap(),T=i.getLineDash(),M=i.getLineDashOffset(),G=i.getLineJoin(),P=i.getWidth(),F=i.getMiterLimit();this.textStrokeState_={lineCap:S!==void 0?S:hf,lineDash:T||Td,lineDashOffset:M||Ed,lineJoin:G!==void 0?G:_f,lineWidth:P!==void 0?P:b1,miterLimit:F!==void 0?F:g1,strokeStyle:uc(w||f1)}}const n=e.getFont(),s=e.getOffsetX(),r=e.getOffsetY(),l=e.getRotateWithView(),u=e.getRotation(),d=e.getScaleArray(),m=e.getText(),f=e.getTextAlign(),v=e.getTextBaseline();this.textState_={font:n!==void 0?n:f7,textAlign:f!==void 0?f:y1,textBaseline:v!==void 0?v:Bx},this.text_=m!==void 0?Array.isArray(m)?m.reduce((w,S,T)=>w+=T%2?" ":S,""):m:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=r!==void 0?this.pixelRatio_*r:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=u!==void 0?u:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}}}const oP=Hse,fl=.5;function lP(a,e,t,i,n,s,r,l,u){const d=u?hI(n):n,m=a[0]*fl,f=a[1]*fl,v=Zr(m,f);v.imageSmoothingEnabled=!1;const w=v.canvas,S=new oP(v,fl,n,null,r,l,u?Ef(hH(),u):null),T=t.length,M=Math.floor((256*256*256-1)/T),G={};for(let F=1;F<=T;++F){const N=t[F-1],V=N.getStyleFunction()||i;if(!V)continue;let K=V(N,s);if(!K)continue;Array.isArray(K)||(K=[K]);const J=(F*M).toString(16).padStart(7,"#00000");for(let ne=0,se=K.length;ne<se;++ne){const de=K[ne],_e=de.getGeometryFunction()(N);if(!_e||!Rr(d,_e.getExtent()))continue;const Se=de.clone(),ce=Se.getFill();ce&&ce.setColor(J);const Ie=Se.getStroke();Ie&&(Ie.setColor(J),Ie.setLineDash(null)),Se.setText(void 0);const he=de.getImage();if(he){const at=he.getImageSize();if(!at)continue;const yt=Zr(at[0],at[1],void 0,{alpha:!1}),De=yt.canvas;yt.fillStyle=J,yt.fillRect(0,0,De.width,De.height),Se.setImage(new jh({img:De,anchor:he.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:he.getOrigin(),opacity:1,size:he.getSize(),scale:he.getScale(),rotation:he.getRotation(),rotateWithView:he.getRotateWithView()}))}const we=Se.getZIndex()||0;let Oe=G[we];Oe||(Oe={},G[we]=Oe,Oe.Polygon=[],Oe.Circle=[],Oe.LineString=[],Oe.Point=[]);const Ye=_e.getType();if(Ye==="GeometryCollection"){const at=_e.getGeometriesArrayRecursive();for(let yt=0,De=at.length;yt<De;++yt){const jt=at[yt];Oe[jt.getType().replace("Multi","")].push(jt,Se)}}else Oe[Ye.replace("Multi","")].push(_e,Se)}}const P=Object.keys(G).map(Number).sort(pc);for(let F=0,N=P.length;F<N;++F){const V=G[P[F]];for(const K in V){const te=V[K];for(let J=0,ne=te.length;J<ne;J+=2){S.setStyle(te[J+1]);for(let se=0,de=e.length;se<de;++se)S.setTransform(e[se]),S.drawGeometry(te[J])}}}return v.getImageData(0,0,w.width,w.height)}function uP(a,e,t){const i=[];if(t){const n=Math.floor(Math.round(a[0])*fl),s=Math.floor(Math.round(a[1])*fl),r=(Nn(n,0,t.width-1)+Nn(s,0,t.height-1)*t.width)*4,l=t.data[r],u=t.data[r+1],m=t.data[r+2]+256*(u+256*l),f=Math.floor((256*256*256-1)/e.length);m&&m%f===0&&i.push(e[m/f-1])}return i}const Xse=.5,cP={Point:eoe,LineString:$se,Polygon:aoe,MultiPoint:toe,MultiLineString:Jse,MultiPolygon:Qse,GeometryCollection:jse,Circle:Yse};function qse(a,e){return parseInt(Ia(a),10)-parseInt(Ia(e),10)}function ZT(a,e){const t=dP(a,e);return t*t}function dP(a,e){return Xse*a/e}function Yse(a,e,t,i,n){const s=t.getFill(),r=t.getStroke();if(s||r){const u=a.getBuilder(t.getZIndex(),"Circle");u.setFillStrokeStyle(s,r),u.drawCircle(e,i,n)}const l=t.getText();if(l&&l.getText()){const u=a.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(e,i)}}function ow(a,e,t,i,n,s,r,l){const u=[],d=t.getImage();if(d){let v=!0;const w=d.getImageState();w==ga.LOADED||w==ga.ERROR?v=!1:w==ga.IDLE&&d.load(),v&&u.push(d.ready())}const m=t.getFill();m&&m.loading()&&u.push(m.ready());const f=u.length>0;return f&&Promise.all(u).then(()=>n(null)),Kse(a,e,t,i,s,r,l),f}function Kse(a,e,t,i,n,s,r){const l=t.getGeometryFunction()(e);if(!l)return;const u=l.simplifyTransformed(i,n);if(t.getRenderer())hP(a,u,t,e,r);else{const m=cP[u.getType()];m(a,u,t,e,r,s)}}function hP(a,e,t,i,n){if(e.getType()=="GeometryCollection"){const r=e.getGeometries();for(let l=0,u=r.length;l<u;++l)hP(a,r[l],t,i,n);return}a.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),n)}function jse(a,e,t,i,n,s){const r=e.getGeometriesArray();let l,u;for(l=0,u=r.length;l<u;++l){const d=cP[r[l].getType()];d(a,r[l],t,i,n,s)}}function $se(a,e,t,i,n){const s=t.getStroke();if(s){const l=a.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawLineString(e,i,n)}const r=t.getText();if(r&&r.getText()){const l=a.getBuilder(t.getZIndex(),"Text");l.setTextStyle(r),l.drawText(e,i,n)}}function Jse(a,e,t,i,n){const s=t.getStroke();if(s){const l=a.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawMultiLineString(e,i,n)}const r=t.getText();if(r&&r.getText()){const l=a.getBuilder(t.getZIndex(),"Text");l.setTextStyle(r),l.drawText(e,i,n)}}function Qse(a,e,t,i,n){const s=t.getFill(),r=t.getStroke();if(r||s){const u=a.getBuilder(t.getZIndex(),"Polygon");u.setFillStrokeStyle(s,r),u.drawMultiPolygon(e,i,n)}const l=t.getText();if(l&&l.getText()){const u=a.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(e,i,n)}}function eoe(a,e,t,i,n,s){const r=t.getImage(),l=t.getText(),u=l&&l.getText(),d=s&&r&&u?{}:void 0;if(r){if(r.getImageState()!=ga.LOADED)return;const m=a.getBuilder(t.getZIndex(),"Image");m.setImageStyle(r,d),m.drawPoint(e,i,n)}if(u){const m=a.getBuilder(t.getZIndex(),"Text");m.setTextStyle(l,d),m.drawText(e,i,n)}}function toe(a,e,t,i,n,s){const r=t.getImage(),l=r&&r.getOpacity()!==0,u=t.getText(),d=u&&u.getText(),m=s&&l&&d?{}:void 0;if(l){if(r.getImageState()!=ga.LOADED)return;const f=a.getBuilder(t.getZIndex(),"Image");f.setImageStyle(r,m),f.drawMultiPoint(e,i,n)}if(d){const f=a.getBuilder(t.getZIndex(),"Text");f.setTextStyle(u,m),f.drawText(e,i,n)}}function aoe(a,e,t,i,n){const s=t.getFill(),r=t.getStroke();if(s||r){const u=a.getBuilder(t.getZIndex(),"Polygon");u.setFillStrokeStyle(s,r),u.drawPolygon(e,i,n)}const l=t.getText();if(l&&l.getText()){const u=a.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(e,i,n)}}const ioe=5;class noe extends LW{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=ioe}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return ka()}getData(e){return null}prepareFrame(e){return ka()}renderFrame(e,t){return ka()}forEachFeatureAtCoordinate(e,t,i,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ga.LOADED||t.getState()===ga.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ga.LOADED&&t!=ga.ERROR&&e.addEventListener(za.CHANGE,this.boundHandleImageChange_),t==ga.IDLE&&(e.load(),t=e.getState()),t==ga.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const roe=noe,J9=[];let vg=null;function soe(){vg=Zr(1,1,void 0,{willReadFrequently:!0})}class ooe extends roe{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=$o(),this.pixelTransform=$o(),this.inversePixelTransform=$o(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){vg||soe(),vg.clearRect(0,0,1,1);let n;try{vg.drawImage(e,t,i,1,1,0,0,1,1),n=vg.getImageData(0,0,1,1).data}catch{return vg=null,null}return n}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const n=this.getLayer().getClassName();let s,r;if(e&&e.className===n&&(!i||e&&e.style.backgroundColor&&Zd(Zl(e.style.backgroundColor),Zl(i)))){const l=e.firstElementChild;l instanceof HTMLCanvasElement&&(r=l.getContext("2d"))}if(r&&zH(r.canvas.style.transform,t)?(this.container=e,this.context=r,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=n;let l=s.style;l.position="absolute",l.width="100%",l.height="100%",r=Zr();const u=r.canvas;s.appendChild(u),l=u.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=s,this.context=r}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const n=Vd(i),s=sI(i),r=rI(i),l=nI(i);Mr(t.coordinateToPixelTransform,n),Mr(t.coordinateToPixelTransform,s),Mr(t.coordinateToPixelTransform,r),Mr(t.coordinateToPixelTransform,l);const u=this.inversePixelTransform;Mr(u,n),Mr(u,s),Mr(u,r),Mr(u,l),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()}prepareContainer(e,t){const i=e.extent,n=e.viewState.resolution,s=e.viewState.rotation,r=e.pixelRatio,l=Math.round(Ti(i)/n*r),u=Math.round(vr(i)/n*r);Su(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/r,1/r,s,-l/2,-u/2),BW(this.inversePixelTransform,this.pixelTransform);const d=ZH(this.pixelTransform);if(this.useContainer(t,d,this.getBackground(e)),!this.containerReused){const m=this.context.canvas;m.width!=l||m.height!=u?(m.width=l,m.height=u):this.context.clearRect(0,0,l,u),d!==m.style.transform&&(m.style.transform=d)}}dispatchRenderEvent_(e,t,i){const n=this.getLayer();if(n.hasListener(e)){const s=new A7(e,this.inversePixelTransform,i,t);n.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ko.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ko.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new y3),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ko.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ko.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,n,s,r,l){const u=s/2,d=r/2,m=n/t,f=-m,v=-e[0]+l,w=-e[1];return Su(this.tempTransform,u,d,m,f,-i,v,w)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const b3=ooe;class loe extends b3{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=xl(),this.wrappedRenderedExtent_=xl(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const n=t.extent,s=t.viewState,r=s.center,l=s.resolution,u=s.projection,d=s.rotation,m=u.getExtent(),f=this.getLayer().getSource(),v=this.getLayer().getDeclutter(),w=t.pixelRatio,S=t.viewHints,T=!(S[Jn.ANIMATING]||S[Jn.INTERACTING]),M=this.context,G=Math.round(Ti(n)/l*w),P=Math.round(vr(n)/l*w),F=f.getWrapX()&&u.canWrapX(),N=F?Ti(m):null,V=F?Math.ceil((n[2]-m[2])/N)+1:1;let K=F?Math.floor((n[0]-m[0])/N):0;do{let te=this.getRenderTransform(r,l,0,w,G,P,K*N);t.declutter&&(te=te.slice(0)),e.execute(M,[M.canvas.width,M.canvas.height],te,d,T,i===void 0?Rg:i?sw:Zse,i?v&&t.declutter[v]:void 0)}while(++K<V)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Zr(this.context.canvas.width,this.context.canvas.height,J9))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,bI(this.context),J9.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const n=e.viewState;this.prepareContainer(e,t);const s=this.context,r=this.replayGroup_;let l=r&&!r.isEmpty();if(!l&&!(this.getLayer().hasListener(Ko.PRERENDER)||this.getLayer().hasListener(Ko.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),n.projection,this.clipped_=!1,l&&i.extent&&this.clipping){const u=Ol(i.extent);l=Rr(u,e.extent),this.clipped_=l&&!lc(u,e.extent),this.clipped_&&this.clipUnrotated(s,e,u)}return l&&this.renderWorlds(r,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),n=this.renderedCenter_,s=this.renderedResolution_,r=this.renderedRotation_,l=this.renderedProjection_,u=this.wrappedRenderedExtent_,d=this.getLayer(),m=[],f=i[0]*fl,v=i[1]*fl;m.push(this.getRenderTransform(n,s,r,fl,f,v,0).slice());const w=d.getSource(),S=l.getExtent();if(w.getWrapX()&&l.canWrapX()&&!lc(S,u)){let T=u[0];const M=Ti(S);let G=0,P;for(;T<S[0];)--G,P=M*G,m.push(this.getRenderTransform(n,s,r,fl,f,v,P).slice()),T+=M;for(G=0,T=u[2];T>S[2];)++G,P=M*G,m.push(this.getRenderTransform(n,s,r,fl,f,v,P).slice()),T-=M}this.hitDetectionImageData_=lP(i,m,this.renderedFeatures_,d.getStyleFunction(),u,s,r,ZT(s,this.renderedPixelRatio_),null)}t(uP(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,n,s){var v,w;if(!this.replayGroup_)return;const r=t.viewState.resolution,l=t.viewState.rotation,u=this.getLayer(),d={},m=function(S,T,M){const G=Ia(S),P=d[G];if(P){if(P!==!0&&M<P.distanceSq){if(M===0)return d[G]=!0,s.splice(s.lastIndexOf(P),1),n(S,u,T);P.geometry=T,P.distanceSq=M}}else{if(M===0)return d[G]=!0,n(S,u,T);s.push(d[G]={feature:S,layer:u,geometry:T,distanceSq:M,callback:n})}},f=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,r,l,i,m,f?(w=(v=t.declutter)==null?void 0:v[f])==null?void 0:w.all().map(S=>S.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const n=e.viewHints[Jn.ANIMATING],s=e.viewHints[Jn.INTERACTING],r=t.getUpdateWhileAnimating(),l=t.getUpdateWhileInteracting();if(this.ready&&!r&&n||!l&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const u=e.extent,d=e.viewState,m=d.projection,f=d.resolution,v=e.pixelRatio,w=t.getRevision(),S=t.getRenderBuffer();let T=t.getRenderOrder();T===void 0&&(T=qse);const M=d.center.slice(),G=Kh(u,S*f),P=G.slice(),F=[G.slice()],N=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!lc(N,e.extent)){const ce=Ti(N),Ie=Math.max(Ti(G)/2,ce);G[0]=N[0]-Ie,G[2]=N[2]+Ie,oI(M,m);const he=fW(F[0],m);he[0]<N[0]&&he[2]<N[2]?F.push([he[0]+ce,he[1],he[2]+ce,he[3]]):he[0]>N[0]&&he[2]>N[2]&&F.push([he[0]-ce,he[1],he[2]-ce,he[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==w&&this.renderedRenderOrder_==T&&this.renderedFrameDeclutter_===!!e.declutter&&lc(this.wrappedRenderedExtent_,G))return Zd(this.renderedExtent_,P)||(this.hitDetectionImageData_=null,this.renderedExtent_=P),this.renderedCenter_=M,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const V=new rP(dP(f,v),G,f,v);let K;for(let ce=0,Ie=F.length;ce<Ie;++ce)i.loadFeatures(F[ce],f,m);const te=ZT(f,v);let J=!0;const ne=(ce,Ie)=>{let he;const we=ce.getStyleFunction()||t.getStyleFunction();if(we&&(he=we(ce,f)),he){const Oe=this.renderFeature(ce,te,he,V,K,this.getLayer().getDeclutter(),Ie);J=J&&!Oe}},se=hI(G),de=i.getFeaturesInExtent(se);T&&de.sort(T);for(let ce=0,Ie=de.length;ce<Ie;++ce)ne(de[ce],ce);this.renderedFeatures_=de,this.ready=J;const _e=V.finish(),Se=new sP(G,f,v,i.getOverlaps(),_e,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=f,this.renderedRevision_=w,this.renderedRenderOrder_=T,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=P,this.wrappedRenderedExtent_=G,this.renderedCenter_=M,this.renderedProjection_=m,this.renderedPixelRatio_=v,this.replayGroup_=Se,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,n,s,r,l){if(!i)return!1;let u=!1;if(Array.isArray(i))for(let d=0,m=i.length;d<m;++d)u=ow(n,e,i[d],t,this.boundHandleStyleImageChange_,s,r,l)||u;else u=ow(n,e,i,t,this.boundHandleStyleImageChange_,s,r,l);return u}}const uoe=loe;class coe extends Z5{constructor(e){super(e)}createRenderer(){return new uoe(this)}}const eo=coe;let doe=!1;function hoe(a,e,t,i,n,s,r){const l=new XMLHttpRequest;l.open("GET",typeof a=="function"?a(t,i,n):a,!0),e.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=doe,l.onload=function(u){if(!l.status||l.status>=200&&l.status<300){const d=e.getType();try{let m;d=="text"||d=="json"?m=l.responseText:d=="xml"?m=l.responseXML||l.responseText:d=="arraybuffer"&&(m=l.response),m?s(e.readFeatures(m,{extent:t,featureProjection:n}),e.readProjection(m)):r()}catch{r()}}else r()},l.onerror=r,l.send()}function Q9(a,e){return function(t,i,n,s,r){hoe(a,e,t,i,n,(l,u)=>{this.addFeatures(l),s!==void 0&&s(l)},()=>{this.changed(),r!==void 0&&r()})}}function _oe(a,e){return[[-1/0,-1/0,1/0,1/0]]}class v3 extends Yl{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new v3(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(_n(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=ba(e,za.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?moe(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function moe(a){if(typeof a=="function")return a;let e;return Array.isArray(a)?e=a:(sn(typeof a.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[a]),function(){return e}}const kn=v3;function _P(a,e,t,i){const n=[];let s=xl();for(let r=0,l=t.length;r<l;++r){const u=t[r];s=$4(a,e,u[0],i),n.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=u[u.length-1]}return n}function lw(a,e,t,i,n,s,r){let l,u;const d=(t-e)/i;if(d===1)l=e;else if(d===2)l=e,u=n;else if(d!==0){let m=a[e],f=a[e+1],v=0;const w=[0];for(let M=e+i;M<t;M+=i){const G=a[M],P=a[M+1];v+=Math.sqrt((G-m)*(G-m)+(P-f)*(P-f)),w.push(v),m=G,f=P}const S=n*v,T=pH(w,S);T<0?(u=(S-w[-T-2])/(w[-T-1]-w[-T-2]),l=e+(-T-2)*i):l=e+T*i}r=r>1?r:2,s=s||new Array(r);for(let m=0;m<r;++m)s[m]=l===void 0?NaN:u===void 0?a[l+m]:gl(a[l+m],a[l+i+m],u);return s}function zT(a,e,t,i,n,s){if(t==e)return null;let r;if(n<a[e+i-1])return s?(r=a.slice(e,e+i),r[i-1]=n,r):null;if(a[t-1]<n)return s?(r=a.slice(t-i,t),r[i-1]=n,r):null;if(n==a[e+i-1])return a.slice(e,e+i);let l=e/i,u=t/i;for(;l<u;){const v=l+u>>1;n<a[(v+1)*i-1]?u=v:l=v+1}const d=a[l*i-1];if(n==d)return a.slice((l-1)*i,(l-1)*i+i);const m=a[(l+1)*i-1],f=(n-d)/(m-d);r=[];for(let v=0;v<i-1;++v)r.push(gl(a[(l-1)*i+v],a[l*i+v],f));return r.push(n),r}function poe(a,e,t,i,n,s,r){if(r)return zT(a,e,t[t.length-1],i,n,s);let l;if(n<a[i-1])return s?(l=a.slice(0,i),l[i-1]=n,l):null;if(a[a.length-1]<n)return s?(l=a.slice(a.length-i),l[i-1]=n,l):null;for(let u=0,d=t.length;u<d;++u){const m=t[u];if(e!=m){if(n<a[e+i-1])return null;if(n<=a[m-1])return zT(a,e,m,i,n,!1);e=m}}return null}class GI extends r_{constructor(e,t,i){super(),i!==void 0&&t===void 0?this.setFlatCoordinates(i,e):(t=t||0,this.setCenterAndRadius(e,t,i))}clone(){const e=new GI(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){const s=this.flatCoordinates,r=e-s[0],l=t-s[1],u=r*r+l*l;if(u<n){if(u===0)for(let d=0;d<this.stride;++d)i[d]=s[d];else{const d=this.getRadius()/Math.sqrt(u);i[0]=s[0]+d*r,i[1]=s[1]+d*l;for(let m=2;m<this.stride;++m)i[m]=s[m]}return i.length=this.stride,u}return n}containsXY(e,t){const i=this.flatCoordinates,n=e-i[0],s=t-i[1];return n*n+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return wc(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(Rr(e,t)){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]?!0:J4(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+i;for(let s=1;s<t;++s)n[t+s]=e[s];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let s=VW(n,0,e,this.stride);n[s++]=n[0]+t;for(let r=1,l=this.stride;r<l;++r)n[s++]=n[r];n.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),n=this.getStride();this.setCenter(c5(i,0,i.length,n,e,t,i)),this.changed()}}GI.prototype.transform;const mP=GI;class uw extends NW{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(_n),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(ba(e[t],za.CHANGE,this.changed,this))}clone(){const e=new uw(YS(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,n){if(n<Ym(this.getExtent(),e,t))return n;const s=this.geometries_;for(let r=0,l=s.length;r<l;++r)n=s[r].closestPointXY(e,t,i,n);return n}containsXY(e,t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)if(i[n].containsXY(e,t))return!0;return!1}computeExtent(e){Af(e);const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)c1(e,t[i].getExtent());return e}getGeometries(){return YS(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let n=!1;for(let s=0,r=i.length;s<r;++s){const l=i[s],u=l.getSimplifiedGeometry(e);t.push(u),u!==l&&(n=!0)}return n?new uw(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Cu(this.getExtent()));const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(YS(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function YS(a){return a.map(e=>e.clone())}const Md=uw;class cw extends r_{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){rn(this.flatCoordinates,e),this.changed()}clone(){const e=new cw(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<Ym(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(d5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,n))}forEachSegment(e){return XW(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,zT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Ph(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return lw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return f3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=fI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new cw(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return yI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=gI(this.flatCoordinates,0,e,this.stride),this.changed()}}const zr=cw;class dw extends r_{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const n=e,s=[],r=[];for(let u=0,d=n.length;u<d;++u){const m=n[u];rn(s,m.getFlatCoordinates()),r.push(s.length)}const l=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(l,s),this.ends_=r}}appendLineString(e){rn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new dw(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<Ym(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(h5(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),m5(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,n))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,poe(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return p1(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new zr(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,n=[];let s=0;for(let r=0,l=t.length;r<l;++r){const u=t[r],d=new zr(e.slice(s,u),i);n.push(d),s=u}return n}getLength(){const e=this.ends_;let t=0,i=0;for(let n=0,s=e.length;n<s;++n)i+=f3(this.flatCoordinates,t,e[n],this.stride),t=e[n];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const n=this.ends_,s=this.stride;for(let r=0,l=n.length;r<l;++r){const u=n[r],d=lw(t,i,u,s,.5);rn(e,d),i=u}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=zW(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new dw(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return nX(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Y1(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const c_=dw;class x3 extends r_{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){rn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new x3(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){if(n<Ym(this.getExtent(),e,t))return n;const s=this.flatCoordinates,r=this.stride;for(let l=0,u=s.length;l<u;l+=r){const d=Cd(e,t,s[l],s[l+1]);if(d<n){n=d;for(let m=0;m<r;++m)i[m]=s[l+m];i.length=r}}return n}getCoordinates(){return Ph(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Qn(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,n=[];for(let s=0,r=e.length;s<r;s+=i){const l=new Qn(e.slice(s,s+i),t);n.push(l)}return n}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let n=0,s=t.length;n<s;n+=i){const r=t[n],l=t[n+1];if(j4(e,r,l))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=gI(this.flatCoordinates,0,e,this.stride),this.changed()}}const Vm=x3;class hw extends r_{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const n=e,s=[],r=[];for(let l=0,u=n.length;l<u;++l){const d=n[l],m=s.length,f=d.getEnds();for(let v=0,w=f.length;v<w;++v)f[v]+=m;rn(s,d.getFlatCoordinates()),r.push(f)}t=n.length===0?this.getLayout():n[0].getLayout(),e=s,i=r}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;rn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let n=0,s=t.length;n<s;++n)t[n]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let n=0;n<e;++n)t[n]=this.endss_[n].slice();const i=new hw(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,n){return n<Ym(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($H(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),JH(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,n))}containsXY(e,t){return iX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return jH(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),oT(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,sT(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=_P(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=HW(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Vm(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;KW(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=oT(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=eX(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new hw(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),n=i[i.length-1];if(t!==0)for(let s=0,r=i.length;s<r;++s)i[s]-=t;return new Au(this.flatCoordinates.slice(t,n),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,n=[];let s=0;for(let r=0,l=i.length;r<l;++r){const u=i[r].slice(),d=u[u.length-1];if(s!==0)for(let f=0,v=u.length;f<v;++f)u[f]-=s;const m=new Au(t.slice(s,d),e,u);n.push(m),s=d}return n}getType(){return"MultiPolygon"}intersectsExtent(e){return rX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=ZW(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const n=i[i.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}const ub=hw,e8=$o();class bf{constructor(e,t,i,n,s,r){this.styleFunction,this.extent_,this.id_=r,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?W0(this.flatCoordinates_):$4(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Cu(this.getExtent());this.flatInteriorPoints_=f5(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=oX(this.flatCoordinates_,this.ends_),t=_P(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=HW(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=lw(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let n=0,s=i.length;n<s;++n){const r=i[n],l=lw(e,t,r,2,.5);rn(this.flatMidpoints_,l),t=r}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Ei(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const n=vr(i)/vr(t);Su(e8,i[0],i[3],n,-n,0,0,0),Ad(this.flatCoordinates_,0,this.flatCoordinates_.length,2,e8,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new bf(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=EW((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let n;switch(this.type_){case"LineString":i.length=fI(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),n=[i.length];break;case"MultiLineString":n=[],i.length=zW(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,n);break;case"Polygon":n=[],i.length=p5(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,n);break}return n&&(this.simplifiedGeometry_=new bf(this.type_,i,n,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}bf.prototype.getFlatCoordinates=bf.prototype.getOrientedFlatCoordinates;const Eh=bf;class goe{constructor(e){this.rbush_=new l7(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Ia(t)]=i}load(e,t){const i=new Array(t.length);for(let n=0,s=t.length;n<s;n++){const r=e[n],l=t[n],u={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:l};i[n]=u,this.items_[Ia(l)]=u}this.rbush_.load(i)}remove(e){const t=Ia(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Ia(t)],n=[i.minX,i.minY,i.maxX,i.maxY];Mm(n,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(n){return n.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let n=0,s=e.length;n<s;n++)if(i=t(e[n]),i)return i;return i}isEmpty(){return Rm(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return wc(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}const UT=goe;class foe extends Yl{constructor(e){super(),this.projection=Ei(e.projection),this.attributions_=t8(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,n){t.viewResolver=i,t.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=t8(e),this.changed()}setState(e){this.state_=e,this.changed()}}function t8(a){return a?typeof a=="function"?a:(Array.isArray(a)||(a=[a]),e=>a):null}const w3=foe,Fo={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class vh extends Il{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class yoe extends w3{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=_1,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(sn(this.format_,"`format` must be set when `url` is set"),this.loader_=Q9(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:_oe;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new UT:null,this.loadedExtentsRtree_=new UT,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,n;Array.isArray(e.features)?n=e.features:e.features&&(i=e.features,n=i.getArray()),!t&&i===void 0&&(i=new Pl(n)),n!==void 0&&this.addFeaturesInternal(n),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Ia(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new vh(Fo.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Eh||(this.featureChangeKeys_[e]=[ba(t,za.CHANGE,this.handleFeatureChange_,this),ba(t,Om.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const n=String(t.getId());if(!(n in this.idIndex_))this.idIndex_[n]=t;else if(t instanceof Eh){const s=this.idIndex_[n];s instanceof Eh?Array.isArray(s)?s.push(t):this.idIndex_[n]=[s,t]:i=!1}else i=!1}return i&&(sn(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],n=[];for(let s=0,r=e.length;s<r;s++){const l=e[s],u=Ia(l);this.addToIndex_(u,l)&&i.push(l)}for(let s=0,r=i.length;s<r;s++){const l=i[s],u=Ia(l);this.setupChangeEvents_(u,l);const d=l.getGeometry();if(d){const m=d.getExtent();t.push(m),n.push(l)}else this.nullGeometryFeatures_[u]=l}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(Fo.ADDFEATURE))for(let s=0,r=i.length;s<r;s++)this.dispatchEvent(new vh(Fo.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Fo.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(Fo.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(Xs.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(Xs.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(_n);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new vh(Fo.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(n){const s=n.getGeometry();if(s instanceof Eh||s.intersectsCoordinate(e))return t(n)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const n=i.getGeometry();if(n instanceof Eh||n.intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Rm(this.nullGeometryFeatures_)||rn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const n=yW(e,t);return[].concat(...n.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],n=e[1];let s=null;const r=[NaN,NaN];let l=1/0;const u=[-1/0,-1/0,1/0,1/0];return t=t||df,this.featuresRtree_.forEachInExtent(u,function(d){if(t(d)){const m=d.getGeometry(),f=l;if(l=m instanceof Eh?0:m.closestPointXY(i,n,r,l),l<f){s=d;const v=Math.sqrt(l);u[0]=i-v,u[1]=n-v,u[2]=i+v,u[3]=n+v}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Ia(t),n=t.getGeometry();if(!n)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const r=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(r,t)):this.featuresRtree_&&this.featuresRtree_.update(r,t)}const s=t.getId();if(s!==void 0){const r=s.toString();this.idIndex_[r]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[r]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new vh(Fo.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Ia(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Rm(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const n=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let r=0,l=s.length;r<l;++r){const u=s[r];n.forEachInExtent(u,function(m){return lc(m.extent,u)})||(++this.loadingExtentsCount_,this.dispatchEvent(new vh(Fo.FEATURESLOADSTART)),this.loader_.call(this,u,t,i,m=>{--this.loadingExtentsCount_,this.dispatchEvent(new vh(Fo.FEATURESLOADEND,void 0,m))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new vh(Fo.FEATURESLOADERROR))}),n.insert(u,{extent:u.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(n){if(Mm(n.extent,e))return n});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,n=e.length;i<n;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Ia(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const i=this.featureChangeKeys_[t];i==null||i.forEach(_n),delete this.featureChangeKeys_[t];const n=e.getId();if(n!==void 0){const s=n.toString(),r=this.idIndex_[s];r===e?delete this.idIndex_[s]:Array.isArray(r)&&(r.splice(r.indexOf(e),1),r.length===1&&(this.idIndex_[s]=r[0]))}return delete this.uidIndex_[t],this.hasListener(Fo.REMOVEFEATURE)&&this.dispatchEvent(new vh(Fo.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){sn(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Q9(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Qo=yoe;class I3{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=kn,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Ei(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Ei(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return ka()}readFeature(e,t){return ka()}readFeatures(e,t){return ka()}readGeometry(e,t){return ka()}readProjection(e){return ka()}writeFeature(e,t){return ka()}writeFeatures(e,t){return ka()}writeGeometry(e,t){return ka()}}function jl(a,e,t){const i=t?Ei(t.featureProjection):null,n=t?Ei(t.dataProjection):null;let s=a;if(i&&n&&!zg(i,n)){e&&(s=a.clone());const r=e?i:n,l=e?n:i;r.getUnits()==="tile-pixels"?s.transform(r,l):s.applyTransform(Wm(r,l))}if(e&&t&&t.decimals!==void 0){const r=Math.pow(10,t.decimals),l=function(u){for(let d=0,m=u.length;d<m;++d)u[d]=Math.round(u[d]*r)/r;return u};s===a&&(s=a.clone()),s.applyTransform(l)}return s}const boe={Point:Qn,LineString:zr,Polygon:Au,MultiPoint:Vm,MultiLineString:c_,MultiPolygon:ub};function voe(a,e,t){return Array.isArray(e[0])?(KW(a,0,e,t)||(a=a.slice(),oT(a,0,e,t)),a):(b5(a,0,e,t)||(a=a.slice(),Wx(a,0,e,t)),a)}function pP(a,e){var s;const t=a.geometry;if(!t)return[];if(Array.isArray(t))return t.map(r=>pP({...a,geometry:r})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const n=t.layout.length;return jl(new Eh(i,i==="Polygon"?voe(t.flatCoordinates,t.ends,n):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),n,a.properties||{},a.id).enableSimplifyTransformed(),!1,e)}function C3(a,e){if(!a)return null;if(Array.isArray(a)){const i=a.map(n=>C3(n,e));return new Md(i)}const t=boe[a.type];return jl(new t(a.flatCoordinates,a.layout||"XY",a.ends),!1,e)}class xoe extends I3{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(r2(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(r2(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return ka()}readFeaturesFromObject(e,t){return ka()}readGeometry(e,t){return this.readGeometryFromObject(r2(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return ka()}readProjection(e){return this.readProjectionFromObject(r2(e))}readProjectionFromObject(e){return ka()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return ka()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return ka()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return ka()}}function r2(a){if(typeof a=="string"){const e=JSON.parse(a);return e||null}return a!==null?a:null}const woe=xoe;class Ioe extends woe{constructor(e){e=e||{},super(),this.dataProjection=Ei(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ei(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const n=S3(i.geometry);if(this.featureClass===Eh)return pP({geometry:n,id:i.id,properties:i.properties},t);const s=new kn;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&s.setGeometryName(i.geometry_name),s.setGeometry(C3(n,t)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){const i=e;let n=null;if(i.type==="FeatureCollection"){const s=e;n=[];const r=s.features;for(let l=0,u=r.length;l<u;++l){const d=this.readFeatureFromObject(r[l],t);d&&n.push(d)}}else n=[this.readFeatureFromObject(e,t)];return n.flat()}readGeometryFromObject(e,t){return Coe(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=Ei(t.properties.name);else if(t.type==="EPSG")i=Ei("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},n=e.getId();if(n!==void 0&&(i.id=n),!e.hasProperties())return i;const s=e.getProperties(),r=e.getGeometry();return r&&(i.geometry=HT(r,t),delete s[e.getGeometryName()]),Rm(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let n=0,s=e.length;n<s;++n)i.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return HT(e,this.adaptOptions(t))}}function S3(a,e){if(!a)return null;let t;switch(a.type){case"Point":{t=Aoe(a);break}case"LineString":{t=Toe(a);break}case"Polygon":{t=Roe(a);break}case"MultiPoint":{t=Moe(a);break}case"MultiLineString":{t=Eoe(a);break}case"MultiPolygon":{t=Loe(a);break}case"GeometryCollection":{t=Soe(a);break}default:throw new Error("Unsupported GeoJSON type: "+a.type)}return t}function Coe(a,e){const t=S3(a);return C3(t,e)}function Soe(a,e){return a.geometries.map(function(i){return S3(i)})}function Aoe(a){const e=a.coordinates;return{type:"Point",flatCoordinates:e,layout:jm(e.length)}}function Toe(a){var i;const e=a.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:jm(((i=e[0])==null?void 0:i.length)||2)}}function Eoe(a){var s,r;const e=a.coordinates,t=((r=(s=e[0])==null?void 0:s[0])==null?void 0:r.length)||2,i=[],n=Y1(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:n,layout:jm(t)}}function Moe(a){var t;const e=a.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:jm(((t=e[0])==null?void 0:t.length)||2)}}function Loe(a){var s,r;const e=a.coordinates,t=[],i=((r=(s=e[0])==null?void 0:s[0])==null?void 0:r[0].length)||2,n=ZW(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:n,layout:jm(i)}}function Roe(a){var s,r;const e=a.coordinates,t=[],i=(r=(s=e[0])==null?void 0:s[0])==null?void 0:r.length,n=Y1(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:n,layout:jm(i)}}function HT(a,e){a=jl(a,!0,e);const t=a.getType();let i;switch(t){case"Point":{i=Boe(a);break}case"LineString":{i=Woe(a);break}case"Polygon":{i=Noe(a,e);break}case"MultiPoint":{i=Ooe(a);break}case"MultiLineString":{i=Goe(a);break}case"MultiPolygon":{i=Poe(a,e);break}case"GeometryCollection":{i=koe(a,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function koe(a,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:a.getGeometriesArray().map(function(i){return HT(i,e)})}}function Woe(a,e){return{type:"LineString",coordinates:a.getCoordinates()}}function Goe(a,e){return{type:"MultiLineString",coordinates:a.getCoordinates()}}function Ooe(a,e){return{type:"MultiPoint",coordinates:a.getCoordinates()}}function Poe(a,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:a.getCoordinates(t)}}function Boe(a,e){return{type:"Point",coordinates:a.getCoordinates()}}function Noe(a,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:a.getCoordinates(t)}}const Bd=Ioe,Foe="searchLayer",a8=17;class Doe{constructor(){zt(this,"map");zt(this,"featureLayer")}init(e){this.map=e,this.createFeatureLayer()}createFeatureLayer(){this.featureLayer=new eo({source:new Qo,zIndex:1e3});const e=new wn({color:[255,255,0,.6]}),t=new mn({color:[255,155,55,1],width:3}),i=new to({radius:10,fill:e,stroke:t});this.featureLayer.set("cyLayerType",Foe),this.featureLayer.setStyle(function(n){var d,m,f;const s=n.get("color")||"#ffcc33",r=n.get("width")||3,l=[new Vi({fill:new wn({color:[255,255,0,.6]})}),new Vi({stroke:new mn({color:"#ffffff",width:5})}),new Vi({stroke:new mn({color:s,width:r})})],u=(f=(m=(d=n.getGeometry)==null?void 0:d.call(n))==null?void 0:m.getType)==null?void 0:f.call(m);return u==="Point"||u==="MultiPoint"?[new Vi({image:i})]:l}),this.map.addLayer(this.featureLayer)}clearFeatures(){var e;(e=this.featureLayer.getSource())==null||e.clear()}fitFeatures(e,t,i){var r,l;const n={dataProjection:i||Gd,featureProjection:this.map.getView().getProjection()},s=new Bd().readFeatures({type:"FeatureCollection",features:e},n);if(s.length>0){let u=((r=s[0].getGeometry())==null?void 0:r.getExtent())||[0,0,0,0];for(const d of s){const m=((l=d.getGeometry())==null?void 0:l.getExtent())||[0,0,0,0];u=c1(u,m)}if(u){const d={size:this.map.getSize(),maxZoom:t||a8};this.map.getView().fit(u,d)}}}isGeoJsonArray(e){return e.length>0&&typeof e[0].type=="string"}isFeatureArray(e){return e.length>0&&typeof e[0].getGeometry=="function"}highlightFeatures(e,t,i,n){var s,r,l,u;if(this.clearFeatures(),e!=null){this.map.getLayers().getArray().indexOf(this.featureLayer)===-1&&this.map.addLayer(this.featureLayer);const d={dataProjection:n||Gd,featureProjection:this.map.getView().getProjection()};let m=[];if(this.isGeoJsonArray(e)?m=new Bd().readFeatures({type:"FeatureCollection",features:e},d):this.isFeatureArray(e)&&(m=e),m.length>0){let f=((s=m[0].getGeometry())==null?void 0:s.getExtent())||[0,0,0,0];for(const v of m){const w=((r=v.getGeometry())==null?void 0:r.getExtent())||[0,0,0,0];f=c1(f,w),v.getId()==null&&v.setId(void 0),((l=v.getGeometry())==null?void 0:l.getType())==="GeometryCollection"?v.getGeometry().getGeometriesArray().forEach(T=>{var G;const M=v.clone();M.setGeometry(T),(G=this.featureLayer.getSource())==null||G.addFeature(M)}):(u=this.featureLayer.getSource())==null||u.addFeature(v)}if(t&&f){const v={size:this.map.getSize(),maxZoom:i||a8};this.map.getView().fit(f,v)}}}}}const cd=new Doe;function s2(a,e){return a.indexOf(e)>=0}function gP(){function a(s,r,l,u=!1,d=!1){let m="",f=l;if(l==="EPSG:3263*"){const w=kr(s,r,"EPSG:4326");f=Math.floor(w[0])>=6?"EPSG:32632":"EPSG:32631"}const v=kr(s,r,f);switch(f){case"EPSG:2169":m=Hy(v,"{x} E | {y} N",0);break;case"EPSG:4326":if(u){const w=e(v),S=w.split(" ").slice(0,4).join(" ");m=`${w.split(" ").slice(4,8).join(" ")} | ${S}`}else if(d){const w=t(v),S=w.split(" ").slice(0,3).join(" ");m=`${w.split(" ").slice(3,6).join(" ")} | ${S}`}else m=Hy(v,"{x} E | {y} N",5);break;case"EPSG:32632":m=Hy(v,"{x} | {y} (UTM32N)",0);break;case"EPSG:32631":m=Hy(v,"{x} | {y} (UTM31N)",0);break;default:m=Hy(v,"{x} E | {y} N",0);break}return m}function e(s){return s?i(s[1],"NS")+" "+i(s[0],"EW"):""}function t(s){return s?n(s[1],"NS")+" "+n(s[0],"EW"):""}function i(s,r){const l=(s+180)%360-180,u=Math.abs(3600*l);return Math.floor(u/3600)+" "+kh(Math.floor(u/60%60),2)+" "+kh(Math.floor(u%60),2)+","+Math.floor((u-(u<0?Math.ceil(u):Math.floor(u)))*10)+" "+r.charAt(l<0?1:0)}function n(s,r){const l=(s+180)%360-180,d=Math.abs(3600*l)/3600,m=(d-Math.floor(d))*60,f=(m%1).toString();return Math.floor(d)+" "+kh(Math.floor(m),2)+","+f.substring(f.indexOf(".")+1,f.indexOf(".")+6)+" "+r.charAt(l<0?1:0)}return{coordinateString:a}}function Voe(a,e){const t=JSON.parse("[2.6, 47.7, 8.6, 51]"),i=dI(t,"EPSG:4326",e);a=a.replace(/,/gi,".");const n=[],s={"EPSG:32631":{regex:/(\d{6,6}[,.]?\d{0,3})\s*?\W*(\d{7,7}[,.]?\d{0,3})\s*?/,label:"UTM31N",epsgCode:"EPSG:32631"},"EPSG:32632":{regex:/(\d{6,6}[,.]?\d{0,3})\s*?\W*(\d{7,7}[,.]?\d{0,3})\s*?/,label:"UTM32N",epsgCode:"EPSG:32632"},"EPSG:2169":{regex:/(\d{4,6}[,.]?\d{0,3})\s*([E|N])?\W*(\d{4,6}\s*[,.|]?\s*?\d{0,3})\s*([E|N])?/,label:"LUREF",epsgCode:"EPSG:2169"},"EPSG:2169:V2":{regex:/(\d{4,6})\s*([E|N])?\s*[,.|]?\s*(\d{4,6})\s*([E|N])?/,label:"LUREF",epsgCode:"EPSG:2169"},"EPSG:4326":{regex:/(\d{1,2}[,.]\d{1,6})\d*\s?(latitude|lat|N|longitude|long|lon|E|east|est)?\W*(\d{1,2}[,.]\d{1,6})\d*\s?(longitude|long|lon|E|latitude|lat|N|north|nord)?/i,label:"long/lat WGS84",epsgCode:"EPSG:4326"},"EPSG:4326:DMS":{regex:/([NSEW])?(-)?(\d+(?:\.\d+)?)[:d\s]?\s?(?:(\d+(?:\.\d+)?)[':]\s?(?:(\d{1,2}(?:\.\d+)?)(?:"|||'')?)?)?\s?([NSEW])?/i,label:"long/lat WGS84 DMS",epsgCode:"EPSG:4326"}},r=["LATITUDE","LAT","N","NORTH","NORD"],l=["LONGITUDE","LONG","LON","E","EAST","EST"];for(const u in s){let d=s[u].regex.exec(a);if(u==="EPSG:2169"&&(a.match(/\./g)||[]).length===1&&(d=null),d){const m=s[u].epsgCode;let f=!1,v,w;if(m==="EPSG:32631"||m==="EPSG:32632"){if(d[1]&&d[2]){const S=[parseFloat(d[1].replace(",",".")),parseFloat(d[2].replace(",","."))],T=kr(S,m,"EPSG:4326");(Math.floor(T[0])===5||Math.floor(T[0])===6)&&(v=parseFloat(d[1].replace(",",".")),w=parseFloat(d[2].replace(",",".")))}}else if(u==="EPSG:4326"||u==="EPSG:2169"||u==="EPSG:2169:V2")d[2]&&d[4]?s2(r,d[2].toUpperCase())&&s2(l,d[4].toUpperCase())?(v=parseFloat(d[3].replace(",",".")),w=parseFloat(d[1].replace(",","."))):s2(r,d[4].toUpperCase())&&s2(l,d[2].toUpperCase())&&(v=parseFloat(d[1].replace(",",".")),w=parseFloat(d[3].replace(",","."))):(!d[2]||d[2]==="|")&&d[4]===void 0&&(v=parseFloat(d[1].replace(",",".")),w=parseFloat(d[3].replace(",",".")));else if(u==="EPSG:4326:DMS"){const S=d;let T;S[1]?(S[6]="",T=a.substring(S[0].length-1).trim()):T=a.substring(S[0].length).trim();const M=i8(S);if(M!==void 0){const G=s[u].regex.exec(T),P=G?i8(G):void 0;P!==void 0&&(typeof M.latLon>"u"&&!isNaN(M.decDeg)&&!isNaN(P.decDeg)&&(M.latLon="lat"),M.latLon==="lat"?(w=M.decDeg,v=P.decDeg):(v=M.decDeg,w=P.decDeg),f=!0)}}if(v!==void 0&&w!==void 0){const S=new Qn([v,w]).transform(m,e),T=new Qn([w,v]).transform(m,e);let M=null;if(i&&xc(i,S.getCoordinates())?M=new kn(S):m==="EPSG:4326"&&i&&xc(i,T.getCoordinates())&&(M=new kn(T)),M){const G=M.getGeometry(),{coordinateString:P}=gP(),F=P(G.getCoordinates(),e,m,f,!1);M.set("label",F),M.set("epsgLabel",s[u].label),n.push(M)}}}}return n}function i8(a){const e={"-":-1,N:1,S:-1,E:1,W:-1},t={N:"lat",S:"lat",E:"lon",W:"lon"},i=e[a[2]]||e[a[1]]||e[a[6]]||1;if(a[3]===void 0)return;const n=Number(a[3]),s=a[4]!==void 0?Number(a[4]):0,r=a[5]!==void 0?Number(a[5]):0,l=t[a[1]]||t[a[6]];return{decDeg:i*(n+s/60+r/3600),latLon:l}}const Ld=()=>({bg_layers:[{icon_id:"route",vector_id:"roadmap",simple_style_class:"road",medium_style_class:"road",expert_style_class:"maputnik",id:556,is_default:!0},{icon_id:"topo",vector_id:"topomap",medium_style_class:"topo",expert_style_class:"maputnik",id:529},{icon_id:"topo_bw",vector_id:"topomap_gray",medium_style_class:"topo",expert_style_class:"maputnik",id:502},{icon_id:"ortho",id:530},{icon_id:"hybrid",id:501},{icon_id:"blank",id:0}],bg_layer_theme_defaults:{tourisme:502},simple_styles:{road:[{unlocalized_label:"Light grey",hillshade:!1,colors:["#ffffff","#ffffff","#d6e0d7","#e1e1e1","#cccccc","#f2f2f2"],selected:!1},{unlocalized_label:"Dark grey",hillshade:!1,colors:["#808080","#808080","#494b4a","#505052","#232426","#454545"],selected:!1},{unlocalized_label:"Dark sand",hillshade:!1,colors:["#9e9375","#9e9375","#6b6249","#403928","#b8aa84","#1a1814"],selected:!1},{unlocalized_label:"Kids",hillshade:!1,colors:["#f9c50d","#ffffff","#839836","#d6d3ce","#2a5ba8","#eeeeee"],selected:!1},{unlocalized_label:"Light mauve",hillshade:!1,colors:["#f3edf5","#f3edf5","#9d7da8","#caa9d1","#613b5c","#e5d3e6"],selected:!1},{unlocalized_label:"Light Blue",hillshade:!1,colors:["#dceaf5","#dceaf5","#5598cf","#81b7e3","#3b576e","#b6cde0"],selected:!1}]},medium_default_styles:{road:[{label:"Roads primary",color:"#f7f7f7",lines:["lu_road_trunk_primary","lu_bridge_major","lu_tunnel_major","lu_road_major_motorway"],visible:!0},{label:"Roads secondary",color:"#f7f7f7",lines:["lu_road_minor","lu_road_secondary_tertiary","lu_bridge_minor","lu_road_path","lu_bridge_path","lu_bridge_railway case","lu_bridge_path case"],visible:!0},{label:"Vegetation",color:"#B8D293",opacity:"1",fills:["lu_landcover_wood","lu_landcover_grass","lu_landuse_stadium","lu_landuse_cemetery"],visible:!0},{label:"Buildings",color:"#D6AA85",opacity:"1",fillExtrusions:["lu_building-3d_public","lu_building-3d"],fills:["lu_building","lu_building_public"],lines:["lu_bridge_railway","lu_railway","lu_tunnel_railway"],visible:!0},{label:"Water",color:"#94c1e1",lines:["lu_waterway","lu_waterway_tunnel","lu_waterway_intermittent"],fills:["lu_water"],visible:!0},{label:"Background",color:"#e7e7e7",backgrounds:["background"],visible:!0},{label:"Hillshade",hillshades:["hillshade"],visible:!0}],topo:[{label:"Primary Names",symbols:["lu_place-label_other","lu_place-label_city","lu_place-label_canton","lu_country-label-other","lu_country-label","place_label_other","place_label_city","country_label-other","country_label"],visible:!0},{label:"Secondary Names",symbols:["lu_place-label_isolated","lu_place-label_locality_forest","lu_place-label_locality_lieudit"],visible:!0},{label:"Transport",lines:["lu_tunnel_track-casing","lu_tunnel_major_motorway-casing","lu_tunnel_railway_transit","lu_tunnel_railway","lu_tunnel_railway-hatching","lu_tunnel_path","lu_tunnel_track","lu_tunnel_minor","lu_tunnel_major_motorway","lu_tunnel_secondary_tertiary","lu_tunnel_trunk_primary","lu_road_track-casing","lu_road_minor-casing","lu_road_major_motorway-casing","lu_road_secondary_tertiary-casing","lu_road_trunk_primary-casing","lu_road_pier","lu_road_path","lu_road_track","lu_road_minor","lu_road_major_motorway","lu_road_secondary_tertiary","lu_road_trunk_primary","lu_tram","lu_tram-hatching","lu_railway_transit","lu_railway","lu_railway-hatching","lu_bridge_railway-casing","lu_bridge_track-casing","lu_bridge_path-casing","lu_bridge_minor-casing","lu_bridge_major_motorway-casing","lu_bridge_secondary_tertiary-casing","lu_bridge_trunk_primary-casing","lu_bridge_railway","lu_bridge_path","lu_bridge_track","lu_bridge_minor","lu_bridge_major_motorway","lu_bridge_secondary_tertiary","lu_bridge_trunk_primary","tunnel_track-casing","tunnel_major_motorway-casing","tunnel_railway_transit","tunnel_railway_transit-hatching","tunnel_railway","tunnel_railway-hatching","tunnel_path","tunnel_track","tunnel_minor","tunnel_major_motorway","tunnel_secondary_tertiary","tunnel_trunk_primary","road_track-casing","road_minor-casing","road_major_motorway-casing","road_secondary_tertiary-casing","road_trunk_primary-casing","road_pier","road_path","road_track","road_minor","road_major_motorway","road_secondary_tertiary","road_trunk_primary","railway-transit","railway-transit-hatching","railway","railway-hatching","bridge_railway-casing","bridge_path-casing","bridge_track_casing","bridge_minor-casing","bridge_major_motorway-casing","bridge_secondary_tertiary-casing","bridge_trunk_primary-casing","bridge_railway","bridge_path","bridge_track","bridge_minor","bridge_major_motorway","bridge_secondary_tertiary","bridge_trunk_primary"],symbols:["lu_road_major-label","lu_motorway-shield","lu_road-shield"],visible:!0},{label:"Vegetation",fills:["lu_landuse_stadium","lu_landuse_cemetery","lu_landuse_gras","lu_landuse_park","lu_landuse_park-outline","lu_landuse_vineyard","lu_landuse_orchard","lu_landuse_wood","landcover_grass","landcover_wood"],visible:!0},{label:"Electricity",fills:["lu_power_station","lu_power_pylone"],lines:["lu_power_line","lu_power_station-outline"],symbols:["lu_power_station-label","lu_eolienne"],visible:!0},{label:"Contours and Height Points",lines:["lu_contour-100","lu_contour-50","lu_contour-20","lu_contour-10","lu_contour"],symbols:["lu_contour-label-100","lu_contour-label-20","lu_apex-label"],visible:!0},{label:"Hillshade",hillshades:["lu_hillshade"],visible:!0}]},http_bg_server:"wmts{1-2}",https_bg_server:"wmts{3-4}",bg_wmts_server_path:"mapproxy_4_v3/wmts/{Layer}",bg_wmts_tile_template:"{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}",bg_layer_projection:"EPSG:3857",olcs_extent:[5.31,49.38,6.64,50.21],olcs_extent_projection:"EPSG:3857",bg_layer_resolutions:[156543.033928,78271.516964,39135.758482,19567.879241,9783.9396205,4891.96981025,2445.98490513,1222.99245256,611.496226281,305.748113141,152.87405657,76.4370282852,38.2185141426,19.1092570713,9.55462853565,4.77731426782,2.38865713391,1.19432856696,.597164283478,.298582141739,.1492910708695,.07464553543475],bg_matrix_ids:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21"]}),_w={name:"blank",id:0};var Rd=(a=>(a.WMS="WMS",a.WFS="WFS",a.WMTS="WMTS",a.BG_WMTS="BG WMTS",a.BG_MVT="BG MVT",a["3D"]="3D",a.TILE_WMS="tileWMS",a))(Rd||{});function A3(){const a=_i(),{mapId:e}=Tt(a),t=zl(),i=Zi(),n=vo(),s=St(()=>{var f;if(!e.value){const v=(f=ur().theme)==null?void 0:f.name;if(v)return Ld().bg_layer_theme_defaults[v]||u()}return u()});function r(f){const v=t.findBgLayerById(f);l(v||null)}function l(f){if(f){if(f.type===Rd.WMTS||f.type===Rd.BG_WMTS)f.type="BG WMTS";else throw new Error(`Only WMTS and MVT BG layers are currently implemented (not ${f.type} for ${f.name})`);n.handleExclusionLayers(f),i.setBgLayer(n.initLayer(f))}else i.setBgLayer(null)}function u(){var f;return((f=m().find(v=>v.is_default))==null?void 0:f.id)||_w.id}function d(){return _w.id}function m(){return Ld().bg_layers}return{setBgLayer:r,setMapBackground:l,getBgLayersFromConfig:m,getNullId:d,getDefaultSelectedId:u,defaultSelectedBgId:s}}const Zoe=["aria-checked","aria-label"],zoe={class:"ml-1 hover:underline"},Jy=$e({__name:"filter-toggle",props:{label:{},checked:{type:Boolean}},emits:["toggle"],setup(a,{emit:e}){const t=e;function i(){t("toggle")}return(n,s)=>(U(),$("button",{class:"w-full text-left filter-toggle-btn",onClick:i,role:"checkbox","aria-checked":n.checked,"aria-label":n.label,tabindex:"0"},[W("i",{class:Pa(["fa-solid",n.checked?"fa-check-square":"fa-square"])},null,2),W("span",zoe,q(n.label),1)],8,Zoe))}}),q2={cms:!0,layers:!0,address:!1,parcels:!1,localite:!1,lieudit:!1,commune:!1,flik:!1,hydro:!1,biotopes:!1,extent:!1,activeLayers:!0},_l=Fe(Object.assign({},localStorage.getItem("searchFacets")?JSON.parse(localStorage.getItem("searchFacets")):q2)),Uoe={address:"Adresses",parcels:"Parcelles cadastrales",localite:"Localits",lieudit:"Lieux-dits",commune:"Communes",flik:"lments agricoles",hydro:"Hydrographie",biotopes:"Biotopes"},n8={address:["Adresse","nom_de_rue"],parcels:["Parcelle"],localite:["Localit"],lieudit:["lieu_dit"],commune:["Commune"],flik:["FLIK","asta esp","FLIK_Provisoire"],hydro:["hydro","hydro_km"],biotopes:["biotope"]},Hoe={class:"filter-panel bg-secondary text-tertiary"},Xoe={class:"flex"},qoe=$e({__name:"filter-panel",emits:["close"],setup(a,{expose:e,emit:t}){const i=Object.keys(q2).length,{t:n}=wt(),s=t;function r(v){_l.value[v]=!_l.value[v]}function l(){localStorage.setItem("searchFacets",JSON.stringify(_l.value)),s("close")}function u(){_l.value=Object.assign({},q2)}const d=Fe(null);function m(v){const w=document.querySelectorAll(".filter-toggle-btn")[v];w&&w.focus()}function f(v){if(v.stopPropagation(),d.value===null&&(d.value=-1),v.key==="Tab"&&v.shiftKey&&d.value<=0){d.value=-1;return}if(v.key==="Tab"&&!v.shiftKey&&d.value>=i-1){d.value=-1;return}if(v.key==="ArrowDown"||v.key==="Tab"&&!v.shiftKey)v.preventDefault(),d.value<i-1&&(d.value++,m(d.value));else if(v.key==="ArrowUp"||v.key==="Tab"&&v.shiftKey)v.preventDefault(),d.value>0&&(d.value--,m(d.value));else if(v.key==="Enter"||v.key===" "||v.code==="Space"){v.preventDefault();const w=Object.keys(q2);r(w[d.value])}}return e({focusedIndex:d,focusItem:m}),(v,w)=>(U(),$("div",Hoe,[W("h3",null,q(k(n)("Paramtres de recherche")),1),W("button",{class:"close-panel",onClick:w[0]||(w[0]=S=>v.$emit("close"))},""),W("div",{onKeydown:f},[W("h4",null,q(k(n)("Inclure")),1),lt(Jy,{label:k(n)("Pages du site"),checked:k(_l).cms,onToggle:w[1]||(w[1]=S=>r("cms"))},null,8,["label","checked"]),lt(Jy,{label:k(n)("Couches"),checked:k(_l).layers,onToggle:w[2]||(w[2]=S=>r("layers"))},null,8,["label","checked"]),w[7]||(w[7]=W("hr",{class:"section-divider"},null,-1)),W("h4",null,q(k(n)("Limiter la recherche ")),1),(U(!0),$(Ot,null,xi(k(Uoe),(S,T)=>(U(),Gt(Jy,{key:T,label:k(n)(S),checked:k(_l)[T],onToggle:M=>r(T)},null,8,["label","checked","onToggle"]))),128)),w[8]||(w[8]=W("hr",{class:"section-divider"},null,-1)),W("h4",null,q(k(n)("tendue")),1),lt(Jy,{label:k(n)("Uniquement dans la partie actuellement visible de la carte"),checked:k(_l).extent,onToggle:w[3]||(w[3]=S=>r("extent"))},null,8,["label","checked"]),w[9]||(w[9]=W("hr",{class:"section-divider"},null,-1)),W("h4",null,q(k(n)("Avance")),1),lt(Jy,{label:k(n)("Chercher dans les couches actives"),checked:k(_l).activeLayers,onToggle:w[4]||(w[4]=S=>r("activeLayers"))},null,8,["label","checked"]),w[10]||(w[10]=W("hr",{class:"section-divider"},null,-1))],32),W("div",Xoe,[W("button",{class:"lux-btn mr-auto",onClick:w[5]||(w[5]=S=>u())},q(k(n)("Rinitialiser")),1),W("button",{class:"lux-btn ml-auto",onClick:w[6]||(w[6]=S=>l())},q(k(n)("Sauvegarder la recherche")),1)])]))}});const Yoe=hr(qoe,[["__scopeId","data-v-7268e4a2"]]),OI=Co("metadata",()=>{const a=Di();function e(i){a.value=i}function t(){a.value=void 0}return{metadataLayer:a,setMetadataLayer:e,clearMetadataLayer:t}},{}),Koe={class:"search-dropdown"},joe={class:"search-input-wrapper"},$oe=["placeholder"],Joe={role:"listbox"},Qoe={key:0,class:"dropdown-title"},ele=["onClick","onKeydown","aria-selected"],tle=["innerHTML"],ale={key:0,class:"search-result-routing"},ile=["onClick"],nle=["onClick","onKeydown"],rle={key:1,class:"loading-indicator"},sle=$e({__name:"search-dropdown",setup(a){const{setMetadataLayer:e}=OI(),t=St(()=>Ua.value?"var(--color-tertiary)":"#ffffff"),{findThemeNamesByLayerId:i}=zl(),{t:n,i18next:s}=wt(),{maxZoom:r}=Tt(Zi()),l=Fe(),u=Fe(""),d=Fe(!1),m=Fe([]),f=Fe(!1),v={Adresse:["addresses"],Parcelle:["parcels","parcels_labels"],Parcelle_go:["parcels_go","parcels_labels_go"],Parcelle_prof:["parcels_prof","parcels_labels"],lieu_dit:["toponymes"],FLIK:["asta_flik_parcels"],FLIK_Provisoire:["asta_flik_parcels_provisoire"],asta_esp:["asta_esp_esp"],nom_de_rue:["roads","roads_labels"]};let w=0;const S=["Addresses","Parcelles","Features","Layers","Website Pages","Background Layers","Coordinates"],T=St(()=>m.value.slice().sort((Pe,Qe)=>{const ze=S.indexOf(Pe.groupKey),st=S.indexOf(Qe.groupKey);return(ze===-1?999:ze)-(st===-1?999:st)}));function M(Pe){const{theme:Qe}=ur();let ze=Pe;Pe==="Parcelle"&&typeof Qe=="string"&&["go","prof"].includes(Qe)&&(ze=ze+"_"+Qe);const st=v[ze]||[],{findByName:nt}=zl(),xt=vo();st.forEach(function(Et){const ta=nt(Et);ta!==void 0&&xt.toggleLayer(ta.id,!0,!1,!1)})}function G(Pe,Qe){const ze=Pe.features.filter(nt=>nt.properties.layer_name==="Parcelle"),st=Pe.features.filter(nt=>nt.properties.layer_name!=="Parcelle");ze.length&&m.value.push({header:n("Parcelles"),groupKey:"Parcelles",selectResult:Qe,results:ze.map(function(nt){return{label:nt.properties.label+(nt.properties.layer_name?` (${n(nt.properties.layer_name)})`:""),layer_name:nt.properties.layer_name,entry:nt,showRoutingButton:!0,showInfoButton:!1}})}),st.length&&m.value.push({header:n("Addresses"),groupKey:"Addresses",selectResult:Qe,results:st.map(function(nt){return{label:nt.properties.label+(nt.properties.layer_name?` (${n(nt.properties.layer_name)})`:""),layer_name:nt.properties.layer_name,entry:nt,showRoutingButton:!0,showInfoButton:!1}})})}function P(Pe,Qe){m.value.push({header:n("Features"),groupKey:"Features",selectResult:Qe,results:Pe.features.map(function(ze){return{label:ze.properties.label+(ze.properties.layer_name?` (${n(ze.properties.layer_name)})`:""),layer_name:ze.properties.layer_name,entry:ze,showRoutingButton:!1,showInfoButton:!1}})})}function F(Pe){const Qe=Pe.target;Qe.tagName==="A"&&Qe.hasAttribute("data-theme")&&(Pe.preventDefault(),N(Qe.getAttribute("data-theme")))}function N(Pe){ur().setTheme(Pe),ii()}function V(Pe,Qe){m.value.push({header:n("Layers"),groupKey:"Layers",selectResult:Qe,results:Pe.map(function(ze){const st=gt(ze.layer_id);return{label:n(ze.name)+st,layer_id:ze.layer_id,name:ze.name,language:ze.language,showRoutingButton:!1,showInfoButton:!0}})})}function K(Pe){const{findAnyLayerById:Qe}=zl();if(Pe.layer_id){const ze=Qe(Pe.layer_id);ze&&e(ze)}}function te(Pe){}function J(Pe,Qe){m.value.push({header:n("Website Pages"),groupKey:"Website Pages",selectResult:Qe,results:Pe.map(ze=>({label:n(ze.title),url:ze.url,text:ze.text,language:ze.language,showRoutingButton:!1,showInfoButton:!1}))})}function ne(Pe){u.value=Pe.label,cd.highlightFeatures([Pe.entry],!0,r.value,vi().getOlMap().getView().getProjection().getCode())}function se(Pe){switch(u.value=Pe.label,M(Pe.layer_name),Pe.layer_name){case"Parcelle":cd.highlightFeatures([Pe.entry],!0,r.value);break;case"Adresse":cd.highlightFeatures([Pe.entry],!0,r.value);break;default:cd.clearFeatures(),cd.fitFeatures([Pe.entry],r.value)}ii()}function de(Pe){A3().setBgLayer(Pe.layer_id),ii()}function _e(Pe){vo().toggleLayer(Pe.layer_id,!0,!1,!1),ii()}function Se(Pe){window.open("https://www.geoportail.lu"+Pe.url,"_blank"),ii(),u.value=Pe.label}function ce(Pe){u.value=Pe.label,cd.highlightFeatures([Pe.entry],!0,r.value),ii()}function Ie(Pe,Qe){m.value.push({header:n("Background Layers"),groupKey:"Background Layers",selectResult:Qe,results:Pe.map(ze=>({label:n(ze.name),layer_id:ze.id,name:ze.name,showRoutingButton:!1,showInfoButton:!0}))})}async function he(Pe,Qe){return await(await u_(Pe,Qe,"GET")).json()}async function we(Pe,Qe){if(!_l.value.activeLayers)return!1;let ze={query:Pe,limit:8,language:s.language},st=vi().getOlMap().getLayers().getArray().map(xt=>xt.get("queryable_id")).filter(xt=>xt!==void 0);if(ze.layers=st.join(","),_l.value.extent){let xt=vi().getOlMap().getView().calculateExtent();ze.extent=xt.join(",")}const nt=await he("https://migration.geoportail.lu/featuresearch",ze);Qe===w&&P(nt,ne)}async function Oe(Pe,Qe){let ze={query:Pe,limit:8},st=Object.keys(n8).filter(xt=>_l.value[xt]).map(xt=>n8[xt]).flat();if(st.length>0&&(ze.layer=st.join(",")),_l.value.extent){let xt=dI(vi().getOlMap().getView().calculateExtent(),"EPSG:3857","EPSG:4326");ze.extent=xt.join(",")}const nt=await he("https://migration.geoportail.lu/fulltextsearch",ze);Qe===w&&G(nt,se)}async function Ye(Pe,Qe){const st=await he("https://migration.geoportail.lu/layersearch",{query:Pe,limit:8});Qe===w&&V(st,_e)}async function at(Pe,Qe){const st=await he("https://migration.geoportail.lu/cmssearch",{query:Pe,limit:8});Qe===w&&J(st,Se)}function yt(Pe,Qe){const{bgLayers:ze}=ur();if(Pe.length===0)return;const st=ze.filter(nt=>n(nt.name).toLowerCase().includes(Pe.toLowerCase()));Qe===w&&Ie(st,de)}const De={backgroundsearch:{getData:yt},fulltextsearch:{getData:Oe},layersearch:{getData:Ye},cmssearch:{getData:at},featuresearch:{getData:we},coordinate:{getData:jt}};function jt(Pe,Qe){if(Qe!==w)return;const ze=Pe,st=cd.map.getView().getProjection().getCode(),nt=Voe(ze,st);m.value.push({header:n("Coordinates"),groupKey:"Coordinates",selectResult:ce,results:nt.map(function(xt){return{label:xt.get("label")+" ("+xt.get("epsgLabel")+")",layer_name:"Coordinates",entry:xt,showRoutingButton:!1,showInfoButton:!1}})})}async function pa(Pe,Qe){if(m.value=[],Pe.length===0)return $t();f.value=!0,Ca(),await Promise.all(Object.entries(De).map(async([,ze])=>{"getData"in ze&&typeof ze.getData=="function"&&ze.getData(Pe,Qe)})),Qe===w&&(f.value=!1,d.value=!0)}Ut(u,async Pe=>{w++,pa(Pe,w)});function $t(){cd.clearFeatures(),u.value="",m.value=[],ii()}const Ua=Fe(!1);Ut(Ua,Pe=>{Pe&&Iu(()=>{l.value&&(l.value.focusedIndex=0,l.value.focusItem(0))})});function bt(){if(Ua.value){Ca();return}ii(),ui()}function ui(){Ua.value=!0}function Ca(){Ua.value=!1}function ii(){d.value=!1}const zi=Fe(null);function An(Pe){const Qe=document.querySelectorAll(".dropdown-item")[Pe];Qe&&Qe.focus()}function xe(Pe){if(Pe.stopPropagation(),Ua.value||!m.value.length)return;const Qe=m.value.flatMap(ze=>ze.results);if(zi.value===null&&(zi.value=0),Pe.key==="ArrowDown")Pe.preventDefault(),zi.value<Qe.length-1&&(zi.value++,An(zi.value));else if(Pe.key==="ArrowUp")Pe.preventDefault(),zi.value>0&&(zi.value--,An(zi.value));else if(Pe.key==="Enter"||Pe.key===" "||Pe.code==="Space"){Pe.preventDefault();let ze=zi.value;for(const st of m.value){if(ze<st.results.length){st.selectResult(st.results[ze]);break}ze-=st.results.length}}}function Ge(Pe,Qe){let ze=0;for(let st=0;st<Pe;st++)ze+=m.value[st].results.length;return ze+=Qe,zi.value===ze}const qe=Fe(null);function ut(Pe){(Pe.key==="ArrowDown"||Pe.key==="ArrowUp")&&d.value&&m.value.length&&(Pe.preventDefault(),d.value&&(zi.value=0,Iu(()=>{var Qe;(Qe=qe.value)==null||Qe.focus()})))}function gt(Pe){const Qe=i(Pe),{themeName:ze}=Tt(ur());return Qe.map(st=>ze.value!==st?`<br><a href="#" data-theme="${st}">(${n("open in theme")} ${n(st)})</a>`:"").join("")}return(Pe,Qe)=>(U(),$("div",Koe,[W("div",joe,[La(W("input",{type:"text",placeholder:k(n)("Recherche adresse, parcelles, couches ..."),"onUpdate:modelValue":Qe[0]||(Qe[0]=ze=>u.value=ze),class:"w-full lux-input search-input",onKeydown:ut},null,40,$oe),[[Hr,u.value]]),u.value.length?(U(),$("button",{key:0,onClick:$t,class:"clear-button"},"  ")):Ae("",!0),W("button",{class:"filter-button",onClick:bt},[W("span",{class:"filter-icon",style:Tc({color:t.value})},null,4)])]),d.value&&m.value.some(ze=>ze.results.length>0)?(U(),$("div",{key:0,class:"dropdown",onKeydown:xe,onClick:F,tabindex:"0",ref_key:"dropdownRef",ref:qe},[W("ul",Joe,[(U(!0),$(Ot,null,xi(T.value,(ze,st)=>(U(),$("li",{key:st},[ze.results.length>0?(U(),$("div",Qoe,q(k(n)(ze.header)),1)):Ae("",!0),W("ul",null,[(U(!0),$(Ot,null,xi(ze.results,(nt,xt)=>(U(),$("li",{key:xt,onClick:Et=>ze.selectResult(nt),class:Pa(["dropdown-item",{focused:Ge(st,xt)}]),tabindex:"0",onKeydown:Uo(Et=>ze.selectResult(nt),["enter"]),role:"option","aria-selected":Ge(st,xt)},[W("span",{innerHTML:nt.label},null,8,tle),nt.showRoutingButton?(U(),$("span",ale,[W("button",{class:"lux-btn-primary routing-button",onClick:Jr(Et=>void 0,["stop"])},Qe[1]||(Qe[1]=[W("span",{class:"routing-icon"},null,-1)]),8,ile)])):Ae("",!0),nt.showInfoButton?(U(),$("button",{key:1,class:"search-result-info self-start before:text-[.85rem] before:transform before:translate-y-[.1rem] before:inline-block before:content-['\\f129'] fa-solid fa-fw fa-fh fa-info",onClick:[Et=>K(nt),Jr(Et=>K(nt),["stop"])],onKeydown:[Uo(Jr(Et=>K(nt),["stop"]),["enter"]),Uo(Jr(Et=>K(nt),["stop","prevent"]),["space"])]},null,40,nle)):Ae("",!0)],42,ele))),128))])]))),128))])],544)):Ae("",!0),f.value?(U(),$("div",rle,q(k(n)("Loading...")),1)):Ae("",!0),Ua.value?(U(),Gt(Yoe,{key:2,ref_key:"filterPanelRef",ref:l,onClose:Ca},null,512)):Ae("",!0)]))}});const r8=hr(sle,[["__scopeId","data-v-a0ea9508"]]),ole={class:"w-full h-14 flex bg-white shadow-header z-10 shrink-0"},lle={class:"grow flex justify-center items-center"},ule={class:"h-full flex"},cle={class:"hidden md:flex"},dle={class:"hidden lg:inline-block"},hle={class:"block md:hidden"},_le={class:"border-l-[1px] border-stone-300 h-full"},mle={class:"border-l-[1px] border-stone-300 h-full"},ple=$e({__name:"header-bar",setup(a){const{t:e}=wt(),t=_i(),{toggleThemeGrid:i}=t,{themeName:n}=Tt(ur()),{authenticated:s}=Tt(Mc()),r=Fe(!1),l=Fe(!1),u=Fe(!1);Ut(s,f=>f&&(r.value=!1));function d(f){l.value=f,f&&(r.value=!1)}function m(f){r.value=f,f&&(l.value=!1)}return(f,v)=>(U(),$("header",ole,[v[2]||(v[2]=W("div",{class:"flex-2 p-[5px]"},[W("img",{src:zQ})],-1)),W("div",lle,[lt(r8,{class:"hidden md:block"}),u.value?(U(),Gt(r8,{key:0,class:"block md:hidden"})):Ae("",!0)]),W("div",null,[W("ul",ule,[W("li",cle,[W("button",{class:Pa(["flex items-center before:font-icons before:text-3xl before:w-16 text-primary uppercase h-full mr-3",`before:content-${k(n)}`]),"data-cy":"selectedThemeIcon",onClick:v[0]||(v[0]=(...w)=>k(i)&&k(i)(...w))},[W("span",dle,q(k(e)(`${k(n)}`)),1)],2)]),W("li",hle,[W("button",{class:"lux-btn lux-dropdown-btn h-full",onClick:v[1]||(v[1]=w=>u.value=!u.value)},[W("span",{class:Pa(["before:font-icons before:text-3xl after:font-icons after:text-3xl",[{"lux-navbar-search-dropdown":!u.value},{"lux-navbar-search-close":u.value}]])},null,2)])]),W("li",_le,[lt(wse,{"data-cy":"langSelect",class:"flex-none h-full",isOpen:l.value,onToggleDropdown:d},null,8,["isOpen"])]),W("li",mle,[lt(nG,{"data-cy":"authFormIcon",class:"lux-navbar-dropdown lux-navbar-dropdown-auth h-full",enableClickOutside:!1,isOpen:r.value,onToggleDropdown:m},{default:Ht(()=>[lt(kee,{class:"w-80"})]),_:1},8,["isOpen"])])])])]))}}),wo=Co("draw",()=>{const a=Fe(void 0),e=Fe(void 0),t=Fe(void 0),i=Fe(void 0),n=Fe([]),s=Fe(!1);function r(S){var T;((T=i.value)==null?void 0:T.replace("edit",""))===(S==null?void 0:S.replace("draw",""))?(t.value=void 0,i.value=void 0,e.value=void 0):t.value===S?t.value=void 0:l(S)}function l(S){S&&(i.value=void 0,e.value=void 0),t.value=S}function u(S){S?t.value=void 0:e.value=void 0,i.value=S}function d(S){n.value=[...n.value,S],a.value=Ia(S),e.value=Ia(S),i.value=S.featureType.replace("drawn","edit"),t.value=void 0}function m(S){const T=n.value.findIndex(M=>M.id===S.id);T!==-1&&(n.value[T]=S),n.value=[...n.value]}function f(S){n.value=S}function v(S){n.value=n.value.filter(T=>Ia(T)!==S),a.value===S&&(a.value=void 0,e.value=void 0)}function w(S){n.value=n.value.map(T=>Object.assign(T,{display_order:S.indexOf(`f-${Ia(T)}`)}))}return{activeFeatureId:a,editingFeatureId:e,drawStateActive:t,editStateActive:i,drawnFeatures:n,featureEditionDocked:s,removeFeature:v,reorderFeatures:w,toggleDrawActiveState:r,setDrawActiveState:l,setEditActiveState:u,addDrawnFeature:d,updateDrawnFeature:m,setDrawnFeatures:f}}),Zm=Co("featureInfo",()=>{const a=Di(),e=Di(),t=Di(!1),i=Di(!1);function n(d){!d||d.length===0?a.value=void 0:(a.value=[...d],t.value=!1)}function s(){a.value=void 0,t.value=!1}function r(d){e.value=d}function l(d){t.value=d}function u(d){i.value=d}return{featureInfoPanelContent:a,fid:e,isLoading:t,displayStarOnMobile:i,setFeatureInfoPanelContent:n,clearContent:s,setFid:r,setLoading:l,setDisplayStarOnMobile:u}},{}),gle={class:"block text-[13px] sm:text-base uppercase"},od=$e({__name:"button-icon",props:{label:{},icon:{},active:{type:Boolean}},setup(a){const e=a;return(t,i)=>(U(),$("button",{class:Pa(["h-[42px] w-full sm:h-full sm:w-16 hover:text-white hover:bg-primary",e.active?"bg-primary text-white":""])},[W("span",{class:Pa(["block text-[1.7rem] sm:text-[2rem] -mt-1.5 -mb-3 after:font-icons",e.active?"lux-close-cross":`after:content-${e.icon}`])},null,2),W("span",gle,q(e.label),1)],2))}}),fle=["href"],Q_=$e({__name:"button-link",props:{label:{},link:{}},setup(a){const e=a;return(t,i)=>(U(),$("a",{class:"h-full flex flex-col justify-center px-[7px] uppercase hover:text-white hover:bg-primary",href:`${e.link}`,target:"_blank"},q(t.$props.label),9,fle))}}),yle={class:"block"},xg=$e({__name:"button-text",props:{label:{},active:{type:Boolean}},setup(a){const e=a;return(t,i)=>(U(),$("button",{class:Pa(["h-16 w-16 text-white hover:bg-primary",e.active?"bg-primary":"bg-tertiary"])},[W("span",yle,q(e.label),1)],2))}}),ble={"data-cy":"toolbarDraw"},vle={class:"absolute bottom-full top-auto z-20 flex flex-row justify-start divide-y-0 divide-x divide-gray-400 divide-solid box-content border-y-0 border-x border-gray-400"},xle={key:0,class:"absolute bottom-full top-auto z-10 pl-[130px] pb-16 w-[326px]","data-cy":"followRoads"},wle={class:"flex flex-row justify-center text-white bg-tertiary hover:bg-primary py-2 box-content border-y border-x border-gray-400"},Ile=$e({__name:"toolbar-draw",setup(a){const{t:e}=wt(),t=wo(),{toggleDrawActiveState:i,setDrawActiveState:n}=t,{drawStateActive:s,editStateActive:r}=Tt(t);return qm(()=>{n(void 0)}),(l,u)=>(U(),$("div",ble,[W("ul",vle,[W("li",null,[lt(xg,{label:k(e)("Draw Point",{ns:"client"}),active:k(s)==="drawPoint"||k(r)==="editPoint",onClick:u[0]||(u[0]=()=>k(i)("drawPoint")),"data-cy":"drawPointButton"},null,8,["label","active"])]),W("li",null,[lt(xg,{label:k(e)("Label",{ns:"client"}),active:k(s)==="drawLabel"||k(r)==="editLabel",onClick:u[1]||(u[1]=()=>k(i)("drawLabel")),"data-cy":"drawLabelButton"},null,8,["label","active"])]),W("li",null,[lt(xg,{label:k(e)("Line",{ns:"client"}),active:k(s)==="drawLine"||k(r)==="editLine",onClick:u[2]||(u[2]=()=>k(i)("drawLine")),"data-cy":"drawLineButton"},null,8,["label","active"])]),W("li",null,[lt(xg,{label:k(e)("Polygon",{ns:"client"}),active:k(s)==="drawPolygon"||k(r)==="editPolygon",onClick:u[3]||(u[3]=()=>k(i)("drawPolygon")),"data-cy":"drawPolygonButton"},null,8,["label","active"])]),W("li",null,[lt(xg,{label:k(e)("Circle",{ns:"client"}),active:k(s)==="drawCircle"||k(r)==="editCircle",onClick:u[4]||(u[4]=()=>k(i)("drawCircle")),"data-cy":"drawCircleButton"},null,8,["label","active"])])]),k(s)==="drawLine"||k(r)==="editLine"?(U(),$("ul",xle,[W("li",wle,[W("label",null,[u[5]||(u[5]=W("input",{type:"checkbox"},null,-1)),Jt(" "+q(k(e)("Suivre la route",{ns:"client"})),1)])])])):Ae("",!0)]))}}),Cle={"data-cy":"toolbarMeasure"},Sle={class:"absolute bottom-full top-auto z-20 flex flex-row justify-start divide-y-0 divide-x divide-gray-400 divide-solid box-content border-y-0 border-x border-gray-400"},Ale=$e({__name:"toolbar-measure",setup(a){const{toggleLidarOpen:e,toggleElevationProfileToolbarOpen:t}=_i(),{t:i}=wt(),n=[{label:i("Length"),active:!1,onClick:()=>alert("TODO Length")},{label:i("Surface"),active:!1,onClick:()=>alert("TODO Surface")},{label:i("Azimut"),active:!1,onClick:()=>alert("TODO Azimut")},{label:i("Profile"),active:!1,onClick:()=>t(!0)},{label:i("Profil Lidar"),active:!1,onClick:()=>e(!0)},{label:i("Reset"),active:!1,onClick:()=>alert("TODO Reset")}];return(s,r)=>(U(),$("div",Cle,[W("ul",Sle,[(U(),$(Ot,null,xi(n,(l,u)=>W("li",{key:u},[lt(xg,{label:l.label,active:l.active,onClick:l.onClick},null,8,["label","active","onClick"])])),64))])]))}}),Tle="/luxembourg-geoportail/main/assets/images/profile-81368bb1.png";var XT="http://www.w3.org/1999/xhtml";const s8={svg:"http://www.w3.org/2000/svg",xhtml:XT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function PI(a){var e=a+="",t=e.indexOf(":");return t>=0&&(e=a.slice(0,t))!=="xmlns"&&(a=a.slice(t+1)),s8.hasOwnProperty(e)?{space:s8[e],local:a}:a}function Ele(a){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===XT&&e.documentElement.namespaceURI===XT?e.createElement(a):e.createElementNS(t,a)}}function Mle(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function fP(a){var e=PI(a);return(e.local?Mle:Ele)(e)}function Lle(){}function T3(a){return a==null?Lle:function(){return this.querySelector(a)}}function Rle(a){typeof a!="function"&&(a=T3(a));for(var e=this._groups,t=e.length,i=new Array(t),n=0;n<t;++n)for(var s=e[n],r=s.length,l=i[n]=new Array(r),u,d,m=0;m<r;++m)(u=s[m])&&(d=a.call(u,u.__data__,m,s))&&("__data__"in u&&(d.__data__=u.__data__),l[m]=d);return new Io(i,this._parents)}function yP(a){return a==null?[]:Array.isArray(a)?a:Array.from(a)}function kle(){return[]}function bP(a){return a==null?kle:function(){return this.querySelectorAll(a)}}function Wle(a){return function(){return yP(a.apply(this,arguments))}}function Gle(a){typeof a=="function"?a=Wle(a):a=bP(a);for(var e=this._groups,t=e.length,i=[],n=[],s=0;s<t;++s)for(var r=e[s],l=r.length,u,d=0;d<l;++d)(u=r[d])&&(i.push(a.call(u,u.__data__,d,r)),n.push(u));return new Io(i,n)}function vP(a){return function(){return this.matches(a)}}function xP(a){return function(e){return e.matches(a)}}var Ole=Array.prototype.find;function Ple(a){return function(){return Ole.call(this.children,a)}}function Ble(){return this.firstElementChild}function Nle(a){return this.select(a==null?Ble:Ple(typeof a=="function"?a:xP(a)))}var Fle=Array.prototype.filter;function Dle(){return Array.from(this.children)}function Vle(a){return function(){return Fle.call(this.children,a)}}function Zle(a){return this.selectAll(a==null?Dle:Vle(typeof a=="function"?a:xP(a)))}function zle(a){typeof a!="function"&&(a=vP(a));for(var e=this._groups,t=e.length,i=new Array(t),n=0;n<t;++n)for(var s=e[n],r=s.length,l=i[n]=[],u,d=0;d<r;++d)(u=s[d])&&a.call(u,u.__data__,d,s)&&l.push(u);return new Io(i,this._parents)}function wP(a){return new Array(a.length)}function Ule(){return new Io(this._enter||this._groups.map(wP),this._parents)}function mw(a,e){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=e}mw.prototype={constructor:mw,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,e){return this._parent.insertBefore(a,e)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};function Hle(a){return function(){return a}}function Xle(a,e,t,i,n,s){for(var r=0,l,u=e.length,d=s.length;r<d;++r)(l=e[r])?(l.__data__=s[r],i[r]=l):t[r]=new mw(a,s[r]);for(;r<u;++r)(l=e[r])&&(n[r]=l)}function qle(a,e,t,i,n,s,r){var l,u,d=new Map,m=e.length,f=s.length,v=new Array(m),w;for(l=0;l<m;++l)(u=e[l])&&(v[l]=w=r.call(u,u.__data__,l,e)+"",d.has(w)?n[l]=u:d.set(w,u));for(l=0;l<f;++l)w=r.call(a,s[l],l,s)+"",(u=d.get(w))?(i[l]=u,u.__data__=s[l],d.delete(w)):t[l]=new mw(a,s[l]);for(l=0;l<m;++l)(u=e[l])&&d.get(v[l])===u&&(n[l]=u)}function Yle(a){return a.__data__}function Kle(a,e){if(!arguments.length)return Array.from(this,Yle);var t=e?qle:Xle,i=this._parents,n=this._groups;typeof a!="function"&&(a=Hle(a));for(var s=n.length,r=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var m=i[d],f=n[d],v=f.length,w=jle(a.call(m,m&&m.__data__,d,i)),S=w.length,T=l[d]=new Array(S),M=r[d]=new Array(S),G=u[d]=new Array(v);t(m,f,T,M,G,w,e);for(var P=0,F=0,N,V;P<S;++P)if(N=T[P]){for(P>=F&&(F=P+1);!(V=M[F])&&++F<S;);N._next=V||null}}return r=new Io(r,i),r._enter=l,r._exit=u,r}function jle(a){return typeof a=="object"&&"length"in a?a:Array.from(a)}function $le(){return new Io(this._exit||this._groups.map(wP),this._parents)}function Jle(a,e,t){var i=this.enter(),n=this,s=this.exit();return typeof a=="function"?(i=a(i),i&&(i=i.selection())):i=i.append(a+""),e!=null&&(n=e(n),n&&(n=n.selection())),t==null?s.remove():t(s),i&&n?i.merge(n).order():n}function Qle(a){for(var e=a.selection?a.selection():a,t=this._groups,i=e._groups,n=t.length,s=i.length,r=Math.min(n,s),l=new Array(n),u=0;u<r;++u)for(var d=t[u],m=i[u],f=d.length,v=l[u]=new Array(f),w,S=0;S<f;++S)(w=d[S]||m[S])&&(v[S]=w);for(;u<n;++u)l[u]=t[u];return new Io(l,this._parents)}function eue(){for(var a=this._groups,e=-1,t=a.length;++e<t;)for(var i=a[e],n=i.length-1,s=i[n],r;--n>=0;)(r=i[n])&&(s&&r.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(r,s),s=r);return this}function tue(a){a||(a=aue);function e(f,v){return f&&v?a(f.__data__,v.__data__):!f-!v}for(var t=this._groups,i=t.length,n=new Array(i),s=0;s<i;++s){for(var r=t[s],l=r.length,u=n[s]=new Array(l),d,m=0;m<l;++m)(d=r[m])&&(u[m]=d);u.sort(e)}return new Io(n,this._parents).order()}function aue(a,e){return a<e?-1:a>e?1:a>=e?0:NaN}function iue(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this}function nue(){return Array.from(this)}function rue(){for(var a=this._groups,e=0,t=a.length;e<t;++e)for(var i=a[e],n=0,s=i.length;n<s;++n){var r=i[n];if(r)return r}return null}function sue(){let a=0;for(const e of this)++a;return a}function oue(){return!this.node()}function lue(a){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],s=0,r=n.length,l;s<r;++s)(l=n[s])&&a.call(l,l.__data__,s,n);return this}function uue(a){return function(){this.removeAttribute(a)}}function cue(a){return function(){this.removeAttributeNS(a.space,a.local)}}function due(a,e){return function(){this.setAttribute(a,e)}}function hue(a,e){return function(){this.setAttributeNS(a.space,a.local,e)}}function _ue(a,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(a):this.setAttribute(a,t)}}function mue(a,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,t)}}function pue(a,e){var t=PI(a);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?cue:uue:typeof e=="function"?t.local?mue:_ue:t.local?hue:due)(t,e))}function IP(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function gue(a){return function(){this.style.removeProperty(a)}}function fue(a,e,t){return function(){this.style.setProperty(a,e,t)}}function yue(a,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(a):this.style.setProperty(a,i,t)}}function bue(a,e,t){return arguments.length>1?this.each((e==null?gue:typeof e=="function"?yue:fue)(a,e,t??"")):vf(this.node(),a)}function vf(a,e){return a.style.getPropertyValue(e)||IP(a).getComputedStyle(a,null).getPropertyValue(e)}function vue(a){return function(){delete this[a]}}function xue(a,e){return function(){this[a]=e}}function wue(a,e){return function(){var t=e.apply(this,arguments);t==null?delete this[a]:this[a]=t}}function Iue(a,e){return arguments.length>1?this.each((e==null?vue:typeof e=="function"?wue:xue)(a,e)):this.node()[a]}function CP(a){return a.trim().split(/^|\s+/)}function E3(a){return a.classList||new SP(a)}function SP(a){this._node=a,this._names=CP(a.getAttribute("class")||"")}SP.prototype={add:function(a){var e=this._names.indexOf(a);e<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var e=this._names.indexOf(a);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};function AP(a,e){for(var t=E3(a),i=-1,n=e.length;++i<n;)t.add(e[i])}function TP(a,e){for(var t=E3(a),i=-1,n=e.length;++i<n;)t.remove(e[i])}function Cue(a){return function(){AP(this,a)}}function Sue(a){return function(){TP(this,a)}}function Aue(a,e){return function(){(e.apply(this,arguments)?AP:TP)(this,a)}}function Tue(a,e){var t=CP(a+"");if(arguments.length<2){for(var i=E3(this.node()),n=-1,s=t.length;++n<s;)if(!i.contains(t[n]))return!1;return!0}return this.each((typeof e=="function"?Aue:e?Cue:Sue)(t,e))}function Eue(){this.textContent=""}function Mue(a){return function(){this.textContent=a}}function Lue(a){return function(){var e=a.apply(this,arguments);this.textContent=e??""}}function Rue(a){return arguments.length?this.each(a==null?Eue:(typeof a=="function"?Lue:Mue)(a)):this.node().textContent}function kue(){this.innerHTML=""}function Wue(a){return function(){this.innerHTML=a}}function Gue(a){return function(){var e=a.apply(this,arguments);this.innerHTML=e??""}}function Oue(a){return arguments.length?this.each(a==null?kue:(typeof a=="function"?Gue:Wue)(a)):this.node().innerHTML}function Pue(){this.nextSibling&&this.parentNode.appendChild(this)}function Bue(){return this.each(Pue)}function Nue(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fue(){return this.each(Nue)}function Due(a){var e=typeof a=="function"?a:fP(a);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Vue(){return null}function Zue(a,e){var t=typeof a=="function"?a:fP(a),i=e==null?Vue:typeof e=="function"?e:T3(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function zue(){var a=this.parentNode;a&&a.removeChild(this)}function Uue(){return this.each(zue)}function Hue(){var a=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(a,this.nextSibling):a}function Xue(){var a=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(a,this.nextSibling):a}function que(a){return this.select(a?Xue:Hue)}function Yue(a){return arguments.length?this.property("__data__",a):this.node().__data__}function Kue(a){return function(e){a.call(this,e,this.__data__)}}function jue(a){return a.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function $ue(a){return function(){var e=this.__on;if(e){for(var t=0,i=-1,n=e.length,s;t<n;++t)s=e[t],(!a.type||s.type===a.type)&&s.name===a.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function Jue(a,e,t){return function(){var i=this.__on,n,s=Kue(e);if(i){for(var r=0,l=i.length;r<l;++r)if((n=i[r]).type===a.type&&n.name===a.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=t),n.value=e;return}}this.addEventListener(a.type,s,t),n={type:a.type,name:a.name,value:e,listener:s,options:t},i?i.push(n):this.__on=[n]}}function Que(a,e,t){var i=jue(a+""),n,s=i.length,r;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,m;u<d;++u)for(n=0,m=l[u];n<s;++n)if((r=i[n]).type===m.type&&r.name===m.name)return m.value}return}for(l=e?Jue:$ue,n=0;n<s;++n)this.each(l(i[n],e,t));return this}function EP(a,e,t){var i=IP(a),n=i.CustomEvent;typeof n=="function"?n=new n(e,t):(n=i.document.createEvent("Event"),t?(n.initEvent(e,t.bubbles,t.cancelable),n.detail=t.detail):n.initEvent(e,!1,!1)),a.dispatchEvent(n)}function ece(a,e){return function(){return EP(this,a,e)}}function tce(a,e){return function(){return EP(this,a,e.apply(this,arguments))}}function ace(a,e){return this.each((typeof e=="function"?tce:ece)(a,e))}function*ice(){for(var a=this._groups,e=0,t=a.length;e<t;++e)for(var i=a[e],n=0,s=i.length,r;n<s;++n)(r=i[n])&&(yield r)}var M3=[null];function Io(a,e){this._groups=a,this._parents=e}function cb(){return new Io([[document.documentElement]],M3)}function nce(){return this}Io.prototype=cb.prototype={constructor:Io,select:Rle,selectAll:Gle,selectChild:Nle,selectChildren:Zle,filter:zle,data:Kle,enter:Ule,exit:$le,join:Jle,merge:Qle,selection:nce,order:eue,sort:tue,call:iue,nodes:nue,node:rue,size:sue,empty:oue,each:lue,attr:pue,style:bue,property:Iue,classed:Tue,text:Rue,html:Oue,raise:Bue,lower:Fue,append:Due,insert:Zue,remove:Uue,clone:que,datum:Yue,on:Que,dispatch:ace,[Symbol.iterator]:ice};function Ys(a){return typeof a=="string"?new Io([[document.querySelector(a)]],[document.documentElement]):new Io([[a]],M3)}function rce(a){let e;for(;e=a.sourceEvent;)a=e;return a}function du(a,e){if(a=rce(a),e===void 0&&(e=a.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=a.clientX,i.y=a.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();return[a.clientX-n.left-e.clientLeft,a.clientY-n.top-e.clientTop]}}return[a.pageX,a.pageY]}function sce(a){return typeof a=="string"?new Io([document.querySelectorAll(a)],[document.documentElement]):new Io([yP(a)],M3)}var oce={value:()=>{}};function L3(){for(var a=0,e=arguments.length,t={},i;a<e;++a){if(!(i=arguments[a]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new Y2(t)}function Y2(a){this._=a}function lce(a,e){return a.trim().split(/^|\s+/).map(function(t){var i="",n=t.indexOf(".");if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}Y2.prototype=L3.prototype={constructor:Y2,on:function(a,e){var t=this._,i=lce(a+"",t),n,s=-1,r=i.length;if(arguments.length<2){for(;++s<r;)if((n=(a=i[s]).type)&&(n=uce(t[n],a.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<r;)if(n=(a=i[s]).type)t[n]=o8(t[n],a.name,e);else if(e==null)for(n in t)t[n]=o8(t[n],a.name,null);return this},copy:function(){var a={},e=this._;for(var t in e)a[t]=e[t].slice();return new Y2(a)},call:function(a,e){if((n=arguments.length-2)>0)for(var t=new Array(n),i=0,n,s;i<n;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(s=this._[a],i=0,n=s.length;i<n;++i)s[i].value.apply(e,t)},apply:function(a,e,t){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var i=this._[a],n=0,s=i.length;n<s;++n)i[n].value.apply(e,t)}};function uce(a,e){for(var t=0,i=a.length,n;t<i;++t)if((n=a[t]).name===e)return n.value}function o8(a,e,t){for(var i=0,n=a.length;i<n;++i)if(a[i].name===e){a[i]=oce,a=a.slice(0,i).concat(a.slice(i+1));break}return t!=null&&a.push({name:e,value:t}),a}var xf=0,y0=0,Qy=0,MP=1e3,pw,b0,gw=0,zm=0,BI=0,W1=typeof performance=="object"&&performance.now?performance:Date,LP=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function R3(){return zm||(LP(cce),zm=W1.now()+BI)}function cce(){zm=0}function fw(){this._call=this._time=this._next=null}fw.prototype=RP.prototype={constructor:fw,restart:function(a,e,t){if(typeof a!="function")throw new TypeError("callback is not a function");t=(t==null?R3():+t)+(e==null?0:+e),!this._next&&b0!==this&&(b0?b0._next=this:pw=this,b0=this),this._call=a,this._time=t,qT()},stop:function(){this._call&&(this._call=null,this._time=1/0,qT())}};function RP(a,e,t){var i=new fw;return i.restart(a,e,t),i}function dce(){R3(),++xf;for(var a=pw,e;a;)(e=zm-a._time)>=0&&a._call.call(void 0,e),a=a._next;--xf}function l8(){zm=(gw=W1.now())+BI,xf=y0=0;try{dce()}finally{xf=0,_ce(),zm=0}}function hce(){var a=W1.now(),e=a-gw;e>MP&&(BI-=e,gw=a)}function _ce(){for(var a,e=pw,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),a=e,e=e._next):(t=e._next,e._next=null,e=a?a._next=t:pw=t);b0=a,qT(i)}function qT(a){if(!xf){y0&&(y0=clearTimeout(y0));var e=a-zm;e>24?(a<1/0&&(y0=setTimeout(l8,a-W1.now()-BI)),Qy&&(Qy=clearInterval(Qy))):(Qy||(gw=W1.now(),Qy=setInterval(hce,MP)),xf=1,LP(l8))}}function u8(a,e,t){var i=new fw;return e=e==null?0:+e,i.restart(n=>{i.stop(),a(n+e)},e,t),i}var mce=L3("start","end","cancel","interrupt"),pce=[],kP=0,c8=1,YT=2,K2=3,d8=4,KT=5,j2=6;function NI(a,e,t,i,n,s){var r=a.__transition;if(!r)a.__transition={};else if(t in r)return;gce(a,t,{name:e,index:i,group:n,on:mce,tween:pce,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:kP})}function k3(a,e){var t=Ru(a,e);if(t.state>kP)throw new Error("too late; already scheduled");return t}function Rc(a,e){var t=Ru(a,e);if(t.state>K2)throw new Error("too late; already running");return t}function Ru(a,e){var t=a.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function gce(a,e,t){var i=a.__transition,n;i[e]=t,t.timer=RP(s,0,t.time);function s(d){t.state=c8,t.timer.restart(r,t.delay,t.time),t.delay<=d&&r(d-t.delay)}function r(d){var m,f,v,w;if(t.state!==c8)return u();for(m in i)if(w=i[m],w.name===t.name){if(w.state===K2)return u8(r);w.state===d8?(w.state=j2,w.timer.stop(),w.on.call("interrupt",a,a.__data__,w.index,w.group),delete i[m]):+m<e&&(w.state=j2,w.timer.stop(),w.on.call("cancel",a,a.__data__,w.index,w.group),delete i[m])}if(u8(function(){t.state===K2&&(t.state=d8,t.timer.restart(l,t.delay,t.time),l(d))}),t.state=YT,t.on.call("start",a,a.__data__,t.index,t.group),t.state===YT){for(t.state=K2,n=new Array(v=t.tween.length),m=0,f=-1;m<v;++m)(w=t.tween[m].value.call(a,a.__data__,t.index,t.group))&&(n[++f]=w);n.length=f+1}}function l(d){for(var m=d<t.duration?t.ease.call(null,d/t.duration):(t.timer.restart(u),t.state=KT,1),f=-1,v=n.length;++f<v;)n[f].call(a,m);t.state===KT&&(t.on.call("end",a,a.__data__,t.index,t.group),u())}function u(){t.state=j2,t.timer.stop(),delete i[e];for(var d in i)return;delete a.__transition}}function $2(a,e){var t=a.__transition,i,n,s=!0,r;if(t){e=e==null?null:e+"";for(r in t){if((i=t[r]).name!==e){s=!1;continue}n=i.state>YT&&i.state<KT,i.state=j2,i.timer.stop(),i.on.call(n?"interrupt":"cancel",a,a.__data__,i.index,i.group),delete t[r]}s&&delete a.__transition}}function fce(a){return this.each(function(){$2(this,a)})}function W3(a,e,t){a.prototype=e.prototype=t,t.constructor=a}function WP(a,e){var t=Object.create(a.prototype);for(var i in e)t[i]=e[i];return t}function db(){}var G1=.7,yw=1/G1,$g="\\s*([+-]?\\d+)\\s*",O1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yce=/^#([0-9a-f]{3,8})$/,bce=new RegExp(`^rgb\\(${$g},${$g},${$g}\\)$`),vce=new RegExp(`^rgb\\(${bc},${bc},${bc}\\)$`),xce=new RegExp(`^rgba\\(${$g},${$g},${$g},${O1}\\)$`),wce=new RegExp(`^rgba\\(${bc},${bc},${bc},${O1}\\)$`),Ice=new RegExp(`^hsl\\(${O1},${bc},${bc}\\)$`),Cce=new RegExp(`^hsla\\(${O1},${bc},${bc},${O1}\\)$`),h8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};W3(db,Um,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:_8,formatHex:_8,formatHex8:Sce,formatHsl:Ace,formatRgb:m8,toString:m8});function _8(){return this.rgb().formatHex()}function Sce(){return this.rgb().formatHex8()}function Ace(){return GP(this).formatHsl()}function m8(){return this.rgb().formatRgb()}function Um(a){var e,t;return a=(a+"").trim().toLowerCase(),(e=yce.exec(a))?(t=e[1].length,e=parseInt(e[1],16),t===6?p8(e):t===3?new jo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?o2(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?o2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bce.exec(a))?new jo(e[1],e[2],e[3],1):(e=vce.exec(a))?new jo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xce.exec(a))?o2(e[1],e[2],e[3],e[4]):(e=wce.exec(a))?o2(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ice.exec(a))?y8(e[1],e[2]/100,e[3]/100,1):(e=Cce.exec(a))?y8(e[1],e[2]/100,e[3]/100,e[4]):h8.hasOwnProperty(a)?p8(h8[a]):a==="transparent"?new jo(NaN,NaN,NaN,0):null}function p8(a){return new jo(a>>16&255,a>>8&255,a&255,1)}function o2(a,e,t,i){return i<=0&&(a=e=t=NaN),new jo(a,e,t,i)}function Tce(a){return a instanceof db||(a=Um(a)),a?(a=a.rgb(),new jo(a.r,a.g,a.b,a.opacity)):new jo}function jT(a,e,t,i){return arguments.length===1?Tce(a):new jo(a,e,t,i??1)}function jo(a,e,t,i){this.r=+a,this.g=+e,this.b=+t,this.opacity=+i}W3(jo,jT,WP(db,{brighter(a){return a=a==null?yw:Math.pow(yw,a),new jo(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=a==null?G1:Math.pow(G1,a),new jo(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new jo(Cm(this.r),Cm(this.g),Cm(this.b),bw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:g8,formatHex:g8,formatHex8:Ece,formatRgb:f8,toString:f8}));function g8(){return`#${gm(this.r)}${gm(this.g)}${gm(this.b)}`}function Ece(){return`#${gm(this.r)}${gm(this.g)}${gm(this.b)}${gm((isNaN(this.opacity)?1:this.opacity)*255)}`}function f8(){const a=bw(this.opacity);return`${a===1?"rgb(":"rgba("}${Cm(this.r)}, ${Cm(this.g)}, ${Cm(this.b)}${a===1?")":`, ${a})`}`}function bw(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function Cm(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function gm(a){return a=Cm(a),(a<16?"0":"")+a.toString(16)}function y8(a,e,t,i){return i<=0?a=e=t=NaN:t<=0||t>=1?a=e=NaN:e<=0&&(a=NaN),new pu(a,e,t,i)}function GP(a){if(a instanceof pu)return new pu(a.h,a.s,a.l,a.opacity);if(a instanceof db||(a=Um(a)),!a)return new pu;if(a instanceof pu)return a;a=a.rgb();var e=a.r/255,t=a.g/255,i=a.b/255,n=Math.min(e,t,i),s=Math.max(e,t,i),r=NaN,l=s-n,u=(s+n)/2;return l?(e===s?r=(t-i)/l+(t<i)*6:t===s?r=(i-e)/l+2:r=(e-t)/l+4,l/=u<.5?s+n:2-s-n,r*=60):l=u>0&&u<1?0:r,new pu(r,l,u,a.opacity)}function Mce(a,e,t,i){return arguments.length===1?GP(a):new pu(a,e,t,i??1)}function pu(a,e,t,i){this.h=+a,this.s=+e,this.l=+t,this.opacity=+i}W3(pu,Mce,WP(db,{brighter(a){return a=a==null?yw:Math.pow(yw,a),new pu(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=a==null?G1:Math.pow(G1,a),new pu(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,e=isNaN(a)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,n=2*t-i;return new jo(KS(a>=240?a-240:a+120,n,i),KS(a,n,i),KS(a<120?a+240:a-120,n,i),this.opacity)},clamp(){return new pu(b8(this.h),l2(this.s),l2(this.l),bw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a=bw(this.opacity);return`${a===1?"hsl(":"hsla("}${b8(this.h)}, ${l2(this.s)*100}%, ${l2(this.l)*100}%${a===1?")":`, ${a})`}`}}));function b8(a){return a=(a||0)%360,a<0?a+360:a}function l2(a){return Math.max(0,Math.min(1,a||0))}function KS(a,e,t){return(a<60?e+(t-e)*a/60:a<180?t:a<240?e+(t-e)*(240-a)/60:e)*255}const G3=a=>()=>a;function Lce(a,e){return function(t){return a+t*e}}function Rce(a,e,t){return a=Math.pow(a,t),e=Math.pow(e,t)-a,t=1/t,function(i){return Math.pow(a+i*e,t)}}function kce(a){return(a=+a)==1?OP:function(e,t){return t-e?Rce(e,t,a):G3(isNaN(e)?t:e)}}function OP(a,e){var t=e-a;return t?Lce(a,t):G3(isNaN(a)?e:a)}const vw=function a(e){var t=kce(e);function i(n,s){var r=t((n=jT(n)).r,(s=jT(s)).r),l=t(n.g,s.g),u=t(n.b,s.b),d=OP(n.opacity,s.opacity);return function(m){return n.r=r(m),n.g=l(m),n.b=u(m),n.opacity=d(m),n+""}}return i.gamma=a,i}(1);function Wce(a,e){e||(e=[]);var t=a?Math.min(e.length,a.length):0,i=e.slice(),n;return function(s){for(n=0;n<t;++n)i[n]=a[n]*(1-s)+e[n]*s;return i}}function Gce(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Oce(a,e){var t=e?e.length:0,i=a?Math.min(t,a.length):0,n=new Array(i),s=new Array(t),r;for(r=0;r<i;++r)n[r]=O3(a[r],e[r]);for(;r<t;++r)s[r]=e[r];return function(l){for(r=0;r<i;++r)s[r]=n[r](l);return s}}function Pce(a,e){var t=new Date;return a=+a,e=+e,function(i){return t.setTime(a*(1-i)+e*i),t}}function _u(a,e){return a=+a,e=+e,function(t){return a*(1-t)+e*t}}function Bce(a,e){var t={},i={},n;(a===null||typeof a!="object")&&(a={}),(e===null||typeof e!="object")&&(e={});for(n in e)n in a?t[n]=O3(a[n],e[n]):i[n]=e[n];return function(s){for(n in t)i[n]=t[n](s);return i}}var $T=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jS=new RegExp($T.source,"g");function Nce(a){return function(){return a}}function Fce(a){return function(e){return a(e)+""}}function PP(a,e){var t=$T.lastIndex=jS.lastIndex=0,i,n,s,r=-1,l=[],u=[];for(a=a+"",e=e+"";(i=$T.exec(a))&&(n=jS.exec(e));)(s=n.index)>t&&(s=e.slice(t,s),l[r]?l[r]+=s:l[++r]=s),(i=i[0])===(n=n[0])?l[r]?l[r]+=n:l[++r]=n:(l[++r]=null,u.push({i:r,x:_u(i,n)})),t=jS.lastIndex;return t<e.length&&(s=e.slice(t),l[r]?l[r]+=s:l[++r]=s),l.length<2?u[0]?Fce(u[0].x):Nce(e):(e=u.length,function(d){for(var m=0,f;m<e;++m)l[(f=u[m]).i]=f.x(d);return l.join("")})}function O3(a,e){var t=typeof e,i;return e==null||t==="boolean"?G3(e):(t==="number"?_u:t==="string"?(i=Um(e))?(e=i,vw):PP:e instanceof Um?vw:e instanceof Date?Pce:Gce(e)?Wce:Array.isArray(e)?Oce:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Bce:_u)(a,e)}function Dce(a,e){return a=+a,e=+e,function(t){return Math.round(a*(1-t)+e*t)}}var v8=180/Math.PI,JT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function BP(a,e,t,i,n,s){var r,l,u;return(r=Math.sqrt(a*a+e*e))&&(a/=r,e/=r),(u=a*t+e*i)&&(t-=a*u,i-=e*u),(l=Math.sqrt(t*t+i*i))&&(t/=l,i/=l,u/=l),a*i<e*t&&(a=-a,e=-e,u=-u,r=-r),{translateX:n,translateY:s,rotate:Math.atan2(e,a)*v8,skewX:Math.atan(u)*v8,scaleX:r,scaleY:l}}var u2;function Vce(a){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(a+"");return e.isIdentity?JT:BP(e.a,e.b,e.c,e.d,e.e,e.f)}function Zce(a){return a==null||(u2||(u2=document.createElementNS("http://www.w3.org/2000/svg","g")),u2.setAttribute("transform",a),!(a=u2.transform.baseVal.consolidate()))?JT:(a=a.matrix,BP(a.a,a.b,a.c,a.d,a.e,a.f))}function NP(a,e,t,i){function n(d){return d.length?d.pop()+" ":""}function s(d,m,f,v,w,S){if(d!==f||m!==v){var T=w.push("translate(",null,e,null,t);S.push({i:T-4,x:_u(d,f)},{i:T-2,x:_u(m,v)})}else(f||v)&&w.push("translate("+f+e+v+t)}function r(d,m,f,v){d!==m?(d-m>180?m+=360:m-d>180&&(d+=360),v.push({i:f.push(n(f)+"rotate(",null,i)-2,x:_u(d,m)})):m&&f.push(n(f)+"rotate("+m+i)}function l(d,m,f,v){d!==m?v.push({i:f.push(n(f)+"skewX(",null,i)-2,x:_u(d,m)}):m&&f.push(n(f)+"skewX("+m+i)}function u(d,m,f,v,w,S){if(d!==f||m!==v){var T=w.push(n(w)+"scale(",null,",",null,")");S.push({i:T-4,x:_u(d,f)},{i:T-2,x:_u(m,v)})}else(f!==1||v!==1)&&w.push(n(w)+"scale("+f+","+v+")")}return function(d,m){var f=[],v=[];return d=a(d),m=a(m),s(d.translateX,d.translateY,m.translateX,m.translateY,f,v),r(d.rotate,m.rotate,f,v),l(d.skewX,m.skewX,f,v),u(d.scaleX,d.scaleY,m.scaleX,m.scaleY,f,v),d=m=null,function(w){for(var S=-1,T=v.length,M;++S<T;)f[(M=v[S]).i]=M.x(w);return f.join("")}}}var zce=NP(Vce,"px, ","px)","deg)"),Uce=NP(Zce,", ",")",")"),Hce=1e-12;function x8(a){return((a=Math.exp(a))+1/a)/2}function Xce(a){return((a=Math.exp(a))-1/a)/2}function qce(a){return((a=Math.exp(2*a))-1)/(a+1)}const Yce=function a(e,t,i){function n(s,r){var l=s[0],u=s[1],d=s[2],m=r[0],f=r[1],v=r[2],w=m-l,S=f-u,T=w*w+S*S,M,G;if(T<Hce)G=Math.log(v/d)/e,M=function(te){return[l+te*w,u+te*S,d*Math.exp(e*te*G)]};else{var P=Math.sqrt(T),F=(v*v-d*d+i*T)/(2*d*t*P),N=(v*v-d*d-i*T)/(2*v*t*P),V=Math.log(Math.sqrt(F*F+1)-F),K=Math.log(Math.sqrt(N*N+1)-N);G=(K-V)/e,M=function(te){var J=te*G,ne=x8(V),se=d/(t*P)*(ne*qce(e*J+V)-Xce(V));return[l+se*w,u+se*S,d*ne/x8(e*J+V)]}}return M.duration=G*1e3*e/Math.SQRT2,M}return n.rho=function(s){var r=Math.max(.001,+s),l=r*r,u=l*l;return a(r,l,u)},n}(Math.SQRT2,2,4);function Kce(a,e){var t,i;return function(){var n=Rc(this,a),s=n.tween;if(s!==t){i=t=s;for(var r=0,l=i.length;r<l;++r)if(i[r].name===e){i=i.slice(),i.splice(r,1);break}}n.tween=i}}function jce(a,e,t){var i,n;if(typeof t!="function")throw new Error;return function(){var s=Rc(this,a),r=s.tween;if(r!==i){n=(i=r).slice();for(var l={name:e,value:t},u=0,d=n.length;u<d;++u)if(n[u].name===e){n[u]=l;break}u===d&&n.push(l)}s.tween=n}}function $ce(a,e){var t=this._id;if(a+="",arguments.length<2){for(var i=Ru(this.node(),t).tween,n=0,s=i.length,r;n<s;++n)if((r=i[n]).name===a)return r.value;return null}return this.each((e==null?Kce:jce)(t,a,e))}function P3(a,e,t){var i=a._id;return a.each(function(){var n=Rc(this,i);(n.value||(n.value={}))[e]=t.apply(this,arguments)}),function(n){return Ru(n,i).value[e]}}function FP(a,e){var t;return(typeof e=="number"?_u:e instanceof Um?vw:(t=Um(e))?(e=t,vw):PP)(a,e)}function Jce(a){return function(){this.removeAttribute(a)}}function Qce(a){return function(){this.removeAttributeNS(a.space,a.local)}}function ede(a,e,t){var i,n=t+"",s;return function(){var r=this.getAttribute(a);return r===n?null:r===i?s:s=e(i=r,t)}}function tde(a,e,t){var i,n=t+"",s;return function(){var r=this.getAttributeNS(a.space,a.local);return r===n?null:r===i?s:s=e(i=r,t)}}function ade(a,e,t){var i,n,s;return function(){var r,l=t(this),u;return l==null?void this.removeAttribute(a):(r=this.getAttribute(a),u=l+"",r===u?null:r===i&&u===n?s:(n=u,s=e(i=r,l)))}}function ide(a,e,t){var i,n,s;return function(){var r,l=t(this),u;return l==null?void this.removeAttributeNS(a.space,a.local):(r=this.getAttributeNS(a.space,a.local),u=l+"",r===u?null:r===i&&u===n?s:(n=u,s=e(i=r,l)))}}function nde(a,e){var t=PI(a),i=t==="transform"?Uce:FP;return this.attrTween(a,typeof e=="function"?(t.local?ide:ade)(t,i,P3(this,"attr."+a,e)):e==null?(t.local?Qce:Jce)(t):(t.local?tde:ede)(t,i,e))}function rde(a,e){return function(t){this.setAttribute(a,e.call(this,t))}}function sde(a,e){return function(t){this.setAttributeNS(a.space,a.local,e.call(this,t))}}function ode(a,e){var t,i;function n(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&sde(a,s)),t}return n._value=e,n}function lde(a,e){var t,i;function n(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&rde(a,s)),t}return n._value=e,n}function ude(a,e){var t="attr."+a;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=PI(a);return this.tween(t,(i.local?ode:lde)(i,e))}function cde(a,e){return function(){k3(this,a).delay=+e.apply(this,arguments)}}function dde(a,e){return e=+e,function(){k3(this,a).delay=e}}function hde(a){var e=this._id;return arguments.length?this.each((typeof a=="function"?cde:dde)(e,a)):Ru(this.node(),e).delay}function _de(a,e){return function(){Rc(this,a).duration=+e.apply(this,arguments)}}function mde(a,e){return e=+e,function(){Rc(this,a).duration=e}}function pde(a){var e=this._id;return arguments.length?this.each((typeof a=="function"?_de:mde)(e,a)):Ru(this.node(),e).duration}function gde(a,e){if(typeof e!="function")throw new Error;return function(){Rc(this,a).ease=e}}function fde(a){var e=this._id;return arguments.length?this.each(gde(e,a)):Ru(this.node(),e).ease}function yde(a,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Rc(this,a).ease=t}}function bde(a){if(typeof a!="function")throw new Error;return this.each(yde(this._id,a))}function vde(a){typeof a!="function"&&(a=vP(a));for(var e=this._groups,t=e.length,i=new Array(t),n=0;n<t;++n)for(var s=e[n],r=s.length,l=i[n]=[],u,d=0;d<r;++d)(u=s[d])&&a.call(u,u.__data__,d,s)&&l.push(u);return new Nd(i,this._parents,this._name,this._id)}function xde(a){if(a._id!==this._id)throw new Error;for(var e=this._groups,t=a._groups,i=e.length,n=t.length,s=Math.min(i,n),r=new Array(i),l=0;l<s;++l)for(var u=e[l],d=t[l],m=u.length,f=r[l]=new Array(m),v,w=0;w<m;++w)(v=u[w]||d[w])&&(f[w]=v);for(;l<i;++l)r[l]=e[l];return new Nd(r,this._parents,this._name,this._id)}function wde(a){return(a+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Ide(a,e,t){var i,n,s=wde(e)?k3:Rc;return function(){var r=s(this,a),l=r.on;l!==i&&(n=(i=l).copy()).on(e,t),r.on=n}}function Cde(a,e){var t=this._id;return arguments.length<2?Ru(this.node(),t).on.on(a):this.each(Ide(t,a,e))}function Sde(a){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==a)return;e&&e.removeChild(this)}}function Ade(){return this.on("end.remove",Sde(this._id))}function Tde(a){var e=this._name,t=this._id;typeof a!="function"&&(a=T3(a));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var l=i[r],u=l.length,d=s[r]=new Array(u),m,f,v=0;v<u;++v)(m=l[v])&&(f=a.call(m,m.__data__,v,l))&&("__data__"in m&&(f.__data__=m.__data__),d[v]=f,NI(d[v],e,t,v,d,Ru(m,t)));return new Nd(s,this._parents,e,t)}function Ede(a){var e=this._name,t=this._id;typeof a!="function"&&(a=bP(a));for(var i=this._groups,n=i.length,s=[],r=[],l=0;l<n;++l)for(var u=i[l],d=u.length,m,f=0;f<d;++f)if(m=u[f]){for(var v=a.call(m,m.__data__,f,u),w,S=Ru(m,t),T=0,M=v.length;T<M;++T)(w=v[T])&&NI(w,e,t,T,v,S);s.push(v),r.push(m)}return new Nd(s,r,e,t)}var Mde=cb.prototype.constructor;function Lde(){return new Mde(this._groups,this._parents)}function Rde(a,e){var t,i,n;return function(){var s=vf(this,a),r=(this.style.removeProperty(a),vf(this,a));return s===r?null:s===t&&r===i?n:n=e(t=s,i=r)}}function DP(a){return function(){this.style.removeProperty(a)}}function kde(a,e,t){var i,n=t+"",s;return function(){var r=vf(this,a);return r===n?null:r===i?s:s=e(i=r,t)}}function Wde(a,e,t){var i,n,s;return function(){var r=vf(this,a),l=t(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(a),vf(this,a))),r===u?null:r===i&&u===n?s:(n=u,s=e(i=r,l))}}function Gde(a,e){var t,i,n,s="style."+e,r="end."+s,l;return function(){var u=Rc(this,a),d=u.on,m=u.value[s]==null?l||(l=DP(e)):void 0;(d!==t||n!==m)&&(i=(t=d).copy()).on(r,n=m),u.on=i}}function Ode(a,e,t){var i=(a+="")=="transform"?zce:FP;return e==null?this.styleTween(a,Rde(a,i)).on("end.style."+a,DP(a)):typeof e=="function"?this.styleTween(a,Wde(a,i,P3(this,"style."+a,e))).each(Gde(this._id,a)):this.styleTween(a,kde(a,i,e),t).on("end.style."+a,null)}function Pde(a,e,t){return function(i){this.style.setProperty(a,e.call(this,i),t)}}function Bde(a,e,t){var i,n;function s(){var r=e.apply(this,arguments);return r!==n&&(i=(n=r)&&Pde(a,r,t)),i}return s._value=e,s}function Nde(a,e,t){var i="style."+(a+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Bde(a,e,t??""))}function Fde(a){return function(){this.textContent=a}}function Dde(a){return function(){var e=a(this);this.textContent=e??""}}function Vde(a){return this.tween("text",typeof a=="function"?Dde(P3(this,"text",a)):Fde(a==null?"":a+""))}function Zde(a){return function(e){this.textContent=a.call(this,e)}}function zde(a){var e,t;function i(){var n=a.apply(this,arguments);return n!==t&&(e=(t=n)&&Zde(n)),e}return i._value=a,i}function Ude(a){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(a==null)return this.tween(e,null);if(typeof a!="function")throw new Error;return this.tween(e,zde(a))}function Hde(){for(var a=this._name,e=this._id,t=VP(),i=this._groups,n=i.length,s=0;s<n;++s)for(var r=i[s],l=r.length,u,d=0;d<l;++d)if(u=r[d]){var m=Ru(u,e);NI(u,a,t,d,r,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new Nd(i,this._parents,a,t)}function Xde(){var a,e,t=this,i=t._id,n=t.size();return new Promise(function(s,r){var l={value:r},u={value:function(){--n===0&&s()}};t.each(function(){var d=Rc(this,i),m=d.on;m!==a&&(e=(a=m).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),d.on=e}),n===0&&s()})}var qde=0;function Nd(a,e,t,i){this._groups=a,this._parents=e,this._name=t,this._id=i}function VP(){return++qde}var ld=cb.prototype;Nd.prototype={constructor:Nd,select:Tde,selectAll:Ede,selectChild:ld.selectChild,selectChildren:ld.selectChildren,filter:vde,merge:xde,selection:Lde,transition:Hde,call:ld.call,nodes:ld.nodes,node:ld.node,size:ld.size,empty:ld.empty,each:ld.each,on:Cde,attr:nde,attrTween:ude,style:Ode,styleTween:Nde,text:Vde,textTween:Ude,remove:Ade,tween:$ce,delay:hde,duration:pde,ease:fde,easeVarying:bde,end:Xde,[Symbol.iterator]:ld[Symbol.iterator]};function Yde(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}var Kde={time:null,delay:0,duration:250,ease:Yde};function jde(a,e){for(var t;!(t=a.__transition)||!(t=t[e]);)if(!(a=a.parentNode))throw new Error(`transition ${e} not found`);return t}function $de(a){var e,t;a instanceof Nd?(e=a._id,a=a._name):(e=VP(),(t=Kde).time=R3(),a=a==null?null:a+"");for(var i=this._groups,n=i.length,s=0;s<n;++s)for(var r=i[s],l=r.length,u,d=0;d<l;++d)(u=r[d])&&NI(u,a,e,d,r,t||jde(u,e));return new Nd(i,this._parents,a,e)}cb.prototype.interrupt=fce;cb.prototype.transition=$de;function J2(a,e){return a==null||e==null?NaN:a<e?-1:a>e?1:a>=e?0:NaN}function Jde(a,e){return a==null||e==null?NaN:e<a?-1:e>a?1:e>=a?0:NaN}function B3(a){let e,t,i;a.length!==2?(e=J2,t=(l,u)=>J2(a(l),u),i=(l,u)=>a(l)-u):(e=a===J2||a===Jde?a:Qde,t=a,i=a);function n(l,u,d=0,m=l.length){if(d<m){if(e(u,u)!==0)return m;do{const f=d+m>>>1;t(l[f],u)<0?d=f+1:m=f}while(d<m)}return d}function s(l,u,d=0,m=l.length){if(d<m){if(e(u,u)!==0)return m;do{const f=d+m>>>1;t(l[f],u)<=0?d=f+1:m=f}while(d<m)}return d}function r(l,u,d=0,m=l.length){const f=n(l,u,d,m-1);return f>d&&i(l[f-1],u)>-i(l[f],u)?f-1:f}return{left:n,center:r,right:s}}function Qde(){return 0}function ehe(a){return a===null?NaN:+a}const the=B3(J2),ahe=the.right;B3(ehe).center;const ihe=ahe;function nhe(a,e){let t,i;if(e===void 0)for(const n of a)n!=null&&(t===void 0?n>=n&&(t=i=n):(t>n&&(t=n),i<n&&(i=n)));else{let n=-1;for(let s of a)(s=e(s,++n,a))!=null&&(t===void 0?s>=s&&(t=i=s):(t>s&&(t=s),i<s&&(i=s)))}return[t,i]}const rhe=Math.sqrt(50),she=Math.sqrt(10),ohe=Math.sqrt(2);function xw(a,e,t){const i=(e-a)/Math.max(0,t),n=Math.floor(Math.log10(i)),s=i/Math.pow(10,n),r=s>=rhe?10:s>=she?5:s>=ohe?2:1;let l,u,d;return n<0?(d=Math.pow(10,-n)/r,l=Math.round(a*d),u=Math.round(e*d),l/d<a&&++l,u/d>e&&--u,d=-d):(d=Math.pow(10,n)*r,l=Math.round(a/d),u=Math.round(e/d),l*d<a&&++l,u*d>e&&--u),u<l&&.5<=t&&t<2?xw(a,e,t*2):[l,u,d]}function lhe(a,e,t){if(e=+e,a=+a,t=+t,!(t>0))return[];if(a===e)return[a];const i=e<a,[n,s,r]=i?xw(e,a,t):xw(a,e,t);if(!(s>=n))return[];const l=s-n+1,u=new Array(l);if(i)if(r<0)for(let d=0;d<l;++d)u[d]=(s-d)/-r;else for(let d=0;d<l;++d)u[d]=(s-d)*r;else if(r<0)for(let d=0;d<l;++d)u[d]=(n+d)/-r;else for(let d=0;d<l;++d)u[d]=(n+d)*r;return u}function QT(a,e,t){return e=+e,a=+a,t=+t,xw(a,e,t)[2]}function uhe(a,e,t){e=+e,a=+a,t=+t;const i=e<a,n=i?QT(e,a,t):QT(a,e,t);return(i?-1:1)*(n<0?1/-n:n)}function che(a){return a}var $S=1,JS=2,e4=3,v0=4,w8=1e-6;function dhe(a){return"translate("+a+",0)"}function hhe(a){return"translate(0,"+a+")"}function _he(a){return e=>+a(e)}function mhe(a,e){return e=Math.max(0,a.bandwidth()-e*2)/2,a.round()&&(e=Math.round(e)),t=>+a(t)+e}function phe(){return!this.__axis}function ZP(a,e){var t=[],i=null,n=null,s=6,r=6,l=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,d=a===$S||a===v0?-1:1,m=a===v0||a===JS?"x":"y",f=a===$S||a===e4?dhe:hhe;function v(w){var S=i??(e.ticks?e.ticks.apply(e,t):e.domain()),T=n??(e.tickFormat?e.tickFormat.apply(e,t):che),M=Math.max(s,0)+l,G=e.range(),P=+G[0]+u,F=+G[G.length-1]+u,N=(e.bandwidth?mhe:_he)(e.copy(),u),V=w.selection?w.selection():w,K=V.selectAll(".domain").data([null]),te=V.selectAll(".tick").data(S,e).order(),J=te.exit(),ne=te.enter().append("g").attr("class","tick"),se=te.select("line"),de=te.select("text");K=K.merge(K.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),te=te.merge(ne),se=se.merge(ne.append("line").attr("stroke","currentColor").attr(m+"2",d*s)),de=de.merge(ne.append("text").attr("fill","currentColor").attr(m,d*M).attr("dy",a===$S?"0em":a===e4?"0.71em":"0.32em")),w!==V&&(K=K.transition(w),te=te.transition(w),se=se.transition(w),de=de.transition(w),J=J.transition(w).attr("opacity",w8).attr("transform",function(_e){return isFinite(_e=N(_e))?f(_e+u):this.getAttribute("transform")}),ne.attr("opacity",w8).attr("transform",function(_e){var Se=this.parentNode.__axis;return f((Se&&isFinite(Se=Se(_e))?Se:N(_e))+u)})),J.remove(),K.attr("d",a===v0||a===JS?r?"M"+d*r+","+P+"H"+u+"V"+F+"H"+d*r:"M"+u+","+P+"V"+F:r?"M"+P+","+d*r+"V"+u+"H"+F+"V"+d*r:"M"+P+","+u+"H"+F),te.attr("opacity",1).attr("transform",function(_e){return f(N(_e)+u)}),se.attr(m+"2",d*s),de.attr(m,d*M).text(T),V.filter(phe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",a===JS?"start":a===v0?"end":"middle"),V.each(function(){this.__axis=N})}return v.scale=function(w){return arguments.length?(e=w,v):e},v.ticks=function(){return t=Array.from(arguments),v},v.tickArguments=function(w){return arguments.length?(t=w==null?[]:Array.from(w),v):t.slice()},v.tickValues=function(w){return arguments.length?(i=w==null?null:Array.from(w),v):i&&i.slice()},v.tickFormat=function(w){return arguments.length?(n=w,v):n},v.tickSize=function(w){return arguments.length?(s=r=+w,v):s},v.tickSizeInner=function(w){return arguments.length?(s=+w,v):s},v.tickSizeOuter=function(w){return arguments.length?(r=+w,v):r},v.tickPadding=function(w){return arguments.length?(l=+w,v):l},v.offset=function(w){return arguments.length?(u=+w,v):u},v}function zP(a){return ZP(e4,a)}function UP(a){return ZP(v0,a)}function ghe(a,e){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(e).domain(a);break}return this}function fhe(a){return function(){return a}}function yhe(a){return+a}var I8=[0,1];function kg(a){return a}function t4(a,e){return(e-=a=+a)?function(t){return(t-a)/e}:fhe(isNaN(e)?NaN:.5)}function bhe(a,e){var t;return a>e&&(t=a,a=e,e=t),function(i){return Math.max(a,Math.min(e,i))}}function vhe(a,e,t){var i=a[0],n=a[1],s=e[0],r=e[1];return n<i?(i=t4(n,i),s=t(r,s)):(i=t4(i,n),s=t(s,r)),function(l){return s(i(l))}}function xhe(a,e,t){var i=Math.min(a.length,e.length)-1,n=new Array(i),s=new Array(i),r=-1;for(a[i]<a[0]&&(a=a.slice().reverse(),e=e.slice().reverse());++r<i;)n[r]=t4(a[r],a[r+1]),s[r]=t(e[r],e[r+1]);return function(l){var u=ihe(a,l,1,i)-1;return s[u](n[u](l))}}function whe(a,e){return e.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function Ihe(){var a=I8,e=I8,t=O3,i,n,s,r=kg,l,u,d;function m(){var v=Math.min(a.length,e.length);return r!==kg&&(r=bhe(a[0],a[v-1])),l=v>2?xhe:vhe,u=d=null,f}function f(v){return v==null||isNaN(v=+v)?s:(u||(u=l(a.map(i),e,t)))(i(r(v)))}return f.invert=function(v){return r(n((d||(d=l(e,a.map(i),_u)))(v)))},f.domain=function(v){return arguments.length?(a=Array.from(v,yhe),m()):a.slice()},f.range=function(v){return arguments.length?(e=Array.from(v),m()):e.slice()},f.rangeRound=function(v){return e=Array.from(v),t=Dce,m()},f.clamp=function(v){return arguments.length?(r=v?!0:kg,m()):r!==kg},f.interpolate=function(v){return arguments.length?(t=v,m()):t},f.unknown=function(v){return arguments.length?(s=v,f):s},function(v,w){return i=v,n=w,m()}}function Che(){return Ihe()(kg,kg)}function She(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function ww(a,e){if((t=(a=e?a.toExponential(e-1):a.toExponential()).indexOf("e"))<0)return null;var t,i=a.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+a.slice(t+1)]}function wf(a){return a=ww(Math.abs(a)),a?a[1]:NaN}function Ahe(a,e){return function(t,i){for(var n=t.length,s=[],r=0,l=a[0],u=0;n>0&&l>0&&(u+l+1>i&&(l=Math.max(1,i-u)),s.push(t.substring(n-=l,n+l)),!((u+=l+1)>i));)l=a[r=(r+1)%a.length];return s.reverse().join(e)}}function The(a){return function(e){return e.replace(/[0-9]/g,function(t){return a[+t]})}}var Ehe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Iw(a){if(!(e=Ehe.exec(a)))throw new Error("invalid format: "+a);var e;return new N3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Iw.prototype=N3.prototype;function N3(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}N3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Mhe(a){e:for(var e=a.length,t=1,i=-1,n;t<e;++t)switch(a[t]){case".":i=n=t;break;case"0":i===0&&(i=t),n=t;break;default:if(!+a[t])break e;i>0&&(i=0);break}return i>0?a.slice(0,i)+a.slice(n+1):a}var HP;function Lhe(a,e){var t=ww(a,e);if(!t)return a+"";var i=t[0],n=t[1],s=n-(HP=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,r=i.length;return s===r?i:s>r?i+new Array(s-r+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+ww(a,Math.max(0,e+s-1))[0]}function C8(a,e){var t=ww(a,e);if(!t)return a+"";var i=t[0],n=t[1];return n<0?"0."+new Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+new Array(n-i.length+2).join("0")}const S8={"%":(a,e)=>(a*100).toFixed(e),b:a=>Math.round(a).toString(2),c:a=>a+"",d:She,e:(a,e)=>a.toExponential(e),f:(a,e)=>a.toFixed(e),g:(a,e)=>a.toPrecision(e),o:a=>Math.round(a).toString(8),p:(a,e)=>C8(a*100,e),r:C8,s:Lhe,X:a=>Math.round(a).toString(16).toUpperCase(),x:a=>Math.round(a).toString(16)};function A8(a){return a}var T8=Array.prototype.map,E8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Rhe(a){var e=a.grouping===void 0||a.thousands===void 0?A8:Ahe(T8.call(a.grouping,Number),a.thousands+""),t=a.currency===void 0?"":a.currency[0]+"",i=a.currency===void 0?"":a.currency[1]+"",n=a.decimal===void 0?".":a.decimal+"",s=a.numerals===void 0?A8:The(T8.call(a.numerals,String)),r=a.percent===void 0?"%":a.percent+"",l=a.minus===void 0?"":a.minus+"",u=a.nan===void 0?"NaN":a.nan+"";function d(f){f=Iw(f);var v=f.fill,w=f.align,S=f.sign,T=f.symbol,M=f.zero,G=f.width,P=f.comma,F=f.precision,N=f.trim,V=f.type;V==="n"?(P=!0,V="g"):S8[V]||(F===void 0&&(F=12),N=!0,V="g"),(M||v==="0"&&w==="=")&&(M=!0,v="0",w="=");var K=T==="$"?t:T==="#"&&/[boxX]/.test(V)?"0"+V.toLowerCase():"",te=T==="$"?i:/[%p]/.test(V)?r:"",J=S8[V],ne=/[defgprs%]/.test(V);F=F===void 0?6:/[gprs]/.test(V)?Math.max(1,Math.min(21,F)):Math.max(0,Math.min(20,F));function se(de){var _e=K,Se=te,ce,Ie,he;if(V==="c")Se=J(de)+Se,de="";else{de=+de;var we=de<0||1/de<0;if(de=isNaN(de)?u:J(Math.abs(de),F),N&&(de=Mhe(de)),we&&+de==0&&S!=="+"&&(we=!1),_e=(we?S==="("?S:l:S==="-"||S==="("?"":S)+_e,Se=(V==="s"?E8[8+HP/3]:"")+Se+(we&&S==="("?")":""),ne){for(ce=-1,Ie=de.length;++ce<Ie;)if(he=de.charCodeAt(ce),48>he||he>57){Se=(he===46?n+de.slice(ce+1):de.slice(ce))+Se,de=de.slice(0,ce);break}}}P&&!M&&(de=e(de,1/0));var Oe=_e.length+de.length+Se.length,Ye=Oe<G?new Array(G-Oe+1).join(v):"";switch(P&&M&&(de=e(Ye+de,Ye.length?G-Se.length:1/0),Ye=""),w){case"<":de=_e+de+Se+Ye;break;case"=":de=_e+Ye+de+Se;break;case"^":de=Ye.slice(0,Oe=Ye.length>>1)+_e+de+Se+Ye.slice(Oe);break;default:de=Ye+_e+de+Se;break}return s(de)}return se.toString=function(){return f+""},se}function m(f,v){var w=d((f=Iw(f),f.type="f",f)),S=Math.max(-8,Math.min(8,Math.floor(wf(v)/3)))*3,T=Math.pow(10,-S),M=E8[8+S/3];return function(G){return w(T*G)+M}}return{format:d,formatPrefix:m}}var c2,XP,qP;khe({thousands:",",grouping:[3],currency:["$",""]});function khe(a){return c2=Rhe(a),XP=c2.format,qP=c2.formatPrefix,c2}function Whe(a){return Math.max(0,-wf(Math.abs(a)))}function Ghe(a,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wf(e)/3)))*3-wf(Math.abs(a)))}function Ohe(a,e){return a=Math.abs(a),e=Math.abs(e)-a,Math.max(0,wf(e)-wf(a))+1}function Phe(a,e,t,i){var n=uhe(a,e,t),s;switch(i=Iw(i??",f"),i.type){case"s":{var r=Math.max(Math.abs(a),Math.abs(e));return i.precision==null&&!isNaN(s=Ghe(n,r))&&(i.precision=s),qP(i,r)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=Ohe(n,Math.max(Math.abs(a),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=Whe(n))&&(i.precision=s-(i.type==="%")*2);break}}return XP(i)}function Bhe(a){var e=a.domain;return a.ticks=function(t){var i=e();return lhe(i[0],i[i.length-1],t??10)},a.tickFormat=function(t,i){var n=e();return Phe(n[0],n[n.length-1],t??10,i)},a.nice=function(t){t==null&&(t=10);var i=e(),n=0,s=i.length-1,r=i[n],l=i[s],u,d,m=10;for(l<r&&(d=r,r=l,l=d,d=n,n=s,s=d);m-- >0;){if(d=QT(r,l,t),d===u)return i[n]=r,i[s]=l,e(i);if(d>0)r=Math.floor(r/d)*d,l=Math.ceil(l/d)*d;else if(d<0)r=Math.ceil(r*d)/d,l=Math.floor(l*d)/d;else break;u=d}return a},a}function F3(){var a=Che();return a.copy=function(){return whe(a,F3())},ghe.apply(a,arguments),Bhe(a)}function hs(a){return function(){return a}}const a4=Math.PI,i4=2*a4,om=1e-6,Nhe=i4-om;function YP(a){this._+=a[0];for(let e=1,t=a.length;e<t;++e)this._+=arguments[e]+a[e]}function Fhe(a){let e=Math.floor(a);if(!(e>=0))throw new Error(`invalid digits: ${a}`);if(e>15)return YP;const t=10**e;return function(i){this._+=i[0];for(let n=1,s=i.length;n<s;++n)this._+=Math.round(arguments[n]*t)/t+i[n]}}class Dhe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?YP:Fhe(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,n){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(e,t,i,n,s,r){this._append`C${+e},${+t},${+i},${+n},${this._x1=+s},${this._y1=+r}`}arcTo(e,t,i,n,s){if(e=+e,t=+t,i=+i,n=+n,s=+s,s<0)throw new Error(`negative radius: ${s}`);let r=this._x1,l=this._y1,u=i-e,d=n-t,m=r-e,f=l-t,v=m*m+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(v>om)if(!(Math.abs(f*u-d*m)>om)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let w=i-r,S=n-l,T=u*u+d*d,M=w*w+S*S,G=Math.sqrt(T),P=Math.sqrt(v),F=s*Math.tan((a4-Math.acos((T+v-M)/(2*G*P)))/2),N=F/P,V=F/G;Math.abs(N-1)>om&&this._append`L${e+N*m},${t+N*f}`,this._append`A${s},${s},0,0,${+(f*w>m*S)},${this._x1=e+V*u},${this._y1=t+V*d}`}}arc(e,t,i,n,s,r){if(e=+e,t=+t,i=+i,r=!!r,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(n),u=i*Math.sin(n),d=e+l,m=t+u,f=1^r,v=r?n-s:s-n;this._x1===null?this._append`M${d},${m}`:(Math.abs(this._x1-d)>om||Math.abs(this._y1-m)>om)&&this._append`L${d},${m}`,i&&(v<0&&(v=v%i4+i4),v>Nhe?this._append`A${i},${i},0,1,${f},${e-l},${t-u}A${i},${i},0,1,${f},${this._x1=d},${this._y1=m}`:v>om&&this._append`A${i},${i},0,${+(v>=a4)},${f},${this._x1=e+i*Math.cos(s)},${this._y1=t+i*Math.sin(s)}`)}rect(e,t,i,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}}function KP(a){let e=3;return a.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return a},()=>new Dhe(e)}function jP(a){return typeof a=="object"&&"length"in a?a:Array.from(a)}function $P(a){this._context=a}$P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(a,e){switch(a=+a,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,e):this._context.moveTo(a,e);break;case 1:this._point=2;default:this._context.lineTo(a,e);break}}};function JP(a){return new $P(a)}function QP(a){return a[0]}function eB(a){return a[1]}function tB(a,e){var t=hs(!0),i=null,n=JP,s=null,r=KP(l);a=typeof a=="function"?a:a===void 0?QP:hs(a),e=typeof e=="function"?e:e===void 0?eB:hs(e);function l(u){var d,m=(u=jP(u)).length,f,v=!1,w;for(i==null&&(s=n(w=r())),d=0;d<=m;++d)!(d<m&&t(f=u[d],d,u))===v&&((v=!v)?s.lineStart():s.lineEnd()),v&&s.point(+a(f,d,u),+e(f,d,u));if(w)return s=null,w+""||null}return l.x=function(u){return arguments.length?(a=typeof u=="function"?u:hs(+u),l):a},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:hs(+u),l):e},l.defined=function(u){return arguments.length?(t=typeof u=="function"?u:hs(!!u),l):t},l.curve=function(u){return arguments.length?(n=u,i!=null&&(s=n(i)),l):n},l.context=function(u){return arguments.length?(u==null?i=s=null:s=n(i=u),l):i},l}function Vhe(a,e,t){var i=null,n=hs(!0),s=null,r=JP,l=null,u=KP(d);a=typeof a=="function"?a:a===void 0?QP:hs(+a),e=typeof e=="function"?e:hs(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?eB:hs(+t);function d(f){var v,w,S,T=(f=jP(f)).length,M,G=!1,P,F=new Array(T),N=new Array(T);for(s==null&&(l=r(P=u())),v=0;v<=T;++v){if(!(v<T&&n(M=f[v],v,f))===G)if(G=!G)w=v,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),S=v-1;S>=w;--S)l.point(F[S],N[S]);l.lineEnd(),l.areaEnd()}G&&(F[v]=+a(M,v,f),N[v]=+e(M,v,f),l.point(i?+i(M,v,f):F[v],t?+t(M,v,f):N[v]))}if(P)return l=null,P+""||null}function m(){return tB().defined(n).curve(r).context(s)}return d.x=function(f){return arguments.length?(a=typeof f=="function"?f:hs(+f),i=null,d):a},d.x0=function(f){return arguments.length?(a=typeof f=="function"?f:hs(+f),d):a},d.x1=function(f){return arguments.length?(i=f==null?null:typeof f=="function"?f:hs(+f),d):i},d.y=function(f){return arguments.length?(e=typeof f=="function"?f:hs(+f),t=null,d):e},d.y0=function(f){return arguments.length?(e=typeof f=="function"?f:hs(+f),d):e},d.y1=function(f){return arguments.length?(t=f==null?null:typeof f=="function"?f:hs(+f),d):t},d.lineX0=d.lineY0=function(){return m().x(a).y(e)},d.lineY1=function(){return m().x(a).y(t)},d.lineX1=function(){return m().x(i).y(e)},d.defined=function(f){return arguments.length?(n=typeof f=="function"?f:hs(!!f),d):n},d.curve=function(f){return arguments.length?(r=f,s!=null&&(l=r(s)),d):r},d.context=function(f){return arguments.length?(f==null?s=l=null:l=r(s=f),d):s},d}const cl={bisector:B3,extent:nhe,axisBottom:zP,axisLeft:UP,scaleLinear:F3,pointer:du,select:Ys,selectAll:sce,area:Vhe,line:tB};function Zhe(a){const e=a.light!==void 0?a.light:!1,t=e?{top:0,right:0,bottom:0,left:0}:{top:10,right:20,bottom:30,left:40},i=a.hoverCallback!==void 0?a.hoverCallback:()=>{},n=a.outCallback!==void 0?a.outCallback:()=>{},s=a.distanceExtractor,r=a.linesConfiguration,l=Object.keys(r).length,u=cl.bisector(se=>s(se)).left,d=a.poiExtractor,m=a.styleDefs,f=a.poiLabelAngle!==void 0?a.poiLabelAngle:-60,v=se=>String(se),w={xhover:v,yhover:v,xtick:v,ytick:v,xlabel:()=>"Distance",ylabel:()=>"Elevation",...a.formatter},S=a.lightXAxis!==void 0?a.lightXAxis:!1;let T,M,G;const P=a.scaleModifier;let F,N,V,K,te;const J=se=>{se.each(function(de){if(cl.select(this).selectAll("svg").remove(),de===void 0)return;V=Math.max(this.clientWidth-t.right-t.left,0),M=cl.scaleLinear().range([0,V]),N=Math.max(this.clientHeight-t.top-t.bottom,0),G=cl.scaleLinear().range([N,0]);const _e=cl.axisBottom(M),Se=cl.axisLeft(G),ce=l===1?cl.area().x(De=>M(s(De))).y0(N).y1(De=>{const jt=Object.keys(r)[0];return G(r[jt].zExtractor(De))}):void 0;T=cl.select(this).selectAll("svg").data([de]);const Ie=T.enter().append("svg");T=cl.select(this).selectAll("svg").data([de]),m!==void 0&&Ie.append("defs").append("style").attr("type","text/css").text(m);const he=Ie.append("g");ne(),he.style("font","11px Arial"),l===1&&he.append("path").attr("class","area").style("fill","rgba(222, 222, 222, 0.5)"),he.insert("g",":first-child").attr("class","grid-y"),e||(he.append("g").attr("class","x axis").attr("transform",`translate(0,${N})`),he.append("text").attr("class","x label").attr("text-anchor","end").attr("x",V-4).attr("y",N-4),he.append("g").attr("class","y axis"),he.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").style("fill","grey").text(w.ylabel()),he.append("g").attr("class","metas").attr("transform",`translate(${V+3}, 0)`)),he.append("g").attr("class","pois");const we=he.append("g").attr("class","x grid-hover");we.append("svg:line").attr("stroke-dasharray","5,5"),we.append("text"),he.append("rect").attr("class","overlay").attr("width",V).attr("height",N).style("fill","none").style("pointer-events","all"),T.attr("width",V+t.left+t.right).attr("height",N+t.top+t.bottom),F=T.select("g").attr("transform",`translate(${t.left},${t.top})`),te=cl.extent(de,De=>s(De)),M.domain(te);const Oe=(()=>{let De=[];for(const jt in r){const pa=cl.extent(de,$t=>r[jt].zExtractor($t));pa.every(Number.isFinite)&&(De=De.concat(pa))}return[Math.min.apply(null,De),Math.max.apply(null,De)]})();if(G.domain(Oe),P!==void 0)P(M,G,V,N);else{const De=(Oe[1]-Oe[0])*.1;G.domain([Oe[0]-De,Oe[1]+De])}l===1&&F.select(".area").transition().attr("d",ce);let Ye,at,yt;for(at in r)he.append("path").attr("class",`line ${at}`).style("stroke",r[at].color||"#F00").style("fill","none"),yt=he.append("g").attr("class",`y grid-hover ${at}`),yt.append("svg:line").attr("stroke-dasharray","5,5"),yt.append("text"),Ye=cl.line().x(De=>M(s(De))).y(De=>G(r[at].zExtractor(De))).defined(De=>r[at].zExtractor(De)!==null),F.select(`.line.${at}`).transition().attr("d",Ye);te[1]>2e3?K=1e3:K=1,e||(_e.tickFormat(De=>w.xtick(De/K)),S&&_e.tickValues([0,M.domain()[1]]),Se.tickFormat(De=>w.ytick(De)),F.select(".x.axis").transition().call(_e),F.select(".x.label").text(w.xlabel(K)).style("fill","grey").style("shape-rendering","crispEdges"),N/15<10&&Se.ticks(N/15),F.select(".y.axis").transition().call(Se)),F.select(".grid-y").transition().call(Se.tickSize(-V).tickFormat(()=>"")).selectAll(".tick line").style("stroke","#ccc").style("opacity",.7),F.selectAll(".axis").selectAll("path, line").style("fill","none").style("stroke","#000").style("shape-rendering","crispEdges"),F.select(".grid-y").select("path").style("stroke","none"),F.selectAll(".grid-hover line").style("stroke","#222").style("opacity",.8),F.select(".overlay").on("mouseout",()=>J.clearHighlight()).on("mousemove",De=>{const[jt]=cl.pointer(De),pa=M.invert(jt);J.highlight(pa)})})};J.clearHighlight=()=>{F.selectAll(".grid-hover").style("display","none"),n.call(null)},J.highlight=se=>{const de=T.datum(),_e=u(de,se);if(_e>=de.length)return;const Se=de[_e],ce=s(Se);let Ie;const he=[],we={};let Oe;for(Oe in r)Ie=r[Oe].zExtractor(Se),Number.isFinite(Ie)?(he.push(Ie),we[Oe]=Ie,F.select(`.y.grid-hover.${Oe}`).style("display","inline").select("line").attr("x1",M(0)).attr("y1",G(Ie)).attr("x2",V).attr("y2",G(Ie))):F.select(`.y.grid-hover.${Oe}`).style("display","none");const Ye=G(Math.max.apply(null,he));F.select(".x.grid-hover").style("display","inline").select("line").attr("x1",M(ce)).attr("y1",N).attr("x2",M(ce)).attr("y2",Number.isFinite(Ye)?Ye:0);const at=ce>te[1]/2;let yt=M(ce);if(yt+=at?-10:10,F.select(".x.grid-hover text").text(w.xhover(ce)).style("text-anchor",at?"end":"start").attr("transform",`translate(${yt},${N-10})`),l===1){const De=he[0]===null?"no value":w.yhover(he[0]);F.select(".y.grid-hover text").text(De).style("text-anchor",at?"end":"start").attr("transform",`translate(${yt},${G(he[0])-10})`)}i.call(null,Se,ce,we)},J.showPois=se=>{se=se!==void 0?se:[];const de=d,_e=T.select("g"),Se=T.datum(),he=_e.select(".pois").selectAll(".poi").data(se,we=>{const Oe=u(Se,de?Math.round(de.dist(we)*10)/10:void 0,1),Ye=Se[Oe];if(Ye){let at;const yt=[];for(at in r)yt.push(r[at].zExtractor(Ye));const De=Math.max.apply(null,yt);de==null||de.z(we,De)}return de==null?void 0:de.id(we)}).enter().append("g").attr("class","poi");he.append("text").attr("x",e?0:9).attr("dy",".35em").attr("text-anchor",e?"middle":"start"),he.append("line").style("shape-rendering","crispEdges"),he.style("opacity",0).transition().duration(1e3).delay(100).style("opacity",1),he.selectAll("text").attr("transform",we=>e?[`translate(${M(de.dist(we))},${G(de.z(we))-10})`]:[`translate(${M(de.dist(we))},${G(de.z(we))-20}) rotate(${f})`]).text(we=>de.sort(we)+(e?"":` - ${de.title(we)}`)),he.selectAll("line").style("stroke","grey").attr("x1",we=>M(de.dist(we))).attr("y1",()=>G(G.domain()[0])).attr("x2",we=>M(de.dist(we))).attr("y2",we=>G(de.z(we))),he.exit().remove()};function ne(){J.showPois([])}return J}const zhe=$e({__name:"d3-graph-elevation",props:{showTooltip:{type:Boolean,default:!0},dataset:{},highlightDistance:{},labelXFormatter:{},labelYFormatter:{},xFormatter:{},yFormatter:{}},emits:["hover:profile","out:profile"],setup(a,{emit:e}){const t=e,i=a,n=Fe();let s,r,l=(m,f,v)=>t("hover:profile",m,f,v);In(()=>{r=Ys(n.value),s=Zhe(d()),u()}),Ut(()=>i.highlightDistance,m=>{m&&m>0?s.highlight(m):s.clearHighlight()}),ba(window,"resize",jg(u,50));function u(){s!==void 0&&r.datum(i.dataset).call(s)}function d(){return{linesConfiguration:{line1:{zExtractor:m=>{var f,v;return parseFloat((v=(f=m==null?void 0:m.values)==null?void 0:f.dhm)==null?void 0:v.toPrecision(5))||0}}},distanceExtractor:m=>m.dist??0,hoverCallback:l,outCallback:()=>t("out:profile"),formatter:{xhover:i.xFormatter,yhover:i.yFormatter,xlabel:i.labelXFormatter,ylabel:i.labelYFormatter}}}return(m,f)=>(U(),$("div",{class:"h-[250px]",ref_key:"graphElement",ref:n},null,512))}}),Uhe={key:1,class:"text-center"},Hhe=$e({__name:"elevation-profile",props:{profileData:{},highlightDistance:{}},setup(a){const{t:e}=wt();return(t,i)=>t.profileData?(U(),Gt(zhe,{key:0,dataset:t.profileData,highlightDistance:t.highlightDistance,labelXFormatter:n=>`${k(e)("Distance")} [${n===1?"m":"km"}]`,labelYFormatter:()=>`${k(e)("Elevation")} [m]`,xFormatter:n=>k(w1)(n,2),yFormatter:n=>k(H5)(n,1)},null,8,["dataset","highlightDistance","labelXFormatter","labelYFormatter","xFormatter","yFormatter"])):(U(),$("div",Uhe,i[0]||(i[0]=[W("img",{class:"inline-block min-h-64 p-1",src:Tle,alt:""},null,-1)])))}}),wg=new Map;function Xhe(){wg.clear()}class qhe{styleSerialToStyle(e){return e?JSON.parse(decodeURIComponent(e))||[]:[]}styleLocalStorageToStyle(e){return e?JSON.parse(e).medium||[]:[]}styleToSerial(e){return e&&e.length>0?JSON.stringify(e):""}styleToLocalStorage(e){return e&&e.length>0?JSON.stringify({medium:e}):""}}const d2=new qhe;var ml=(a=>(a[a.simpleStyle=0]="simpleStyle",a[a.mediumStyle=1]="mediumStyle",a[a.advancedStyle=2]="advancedStyle",a))(ml||{});const Yhe=["line","fill","symbol","fill-extrusion","background","hillshade"],Khe="https://vectortiles-staging.geoportail.lu",jhe="https://migration.geoportail.lu/getvtstyle",$he="https://migration.geoportail.lu/uploadvtstyle",Jhe="https://migration.geoportail.lu/deletevtstyle";class Qhe{constructor(){zt(this,"_vectortilesUrl",Khe);zt(this,"_mvtStylesGetUrl",jhe);zt(this,"_mvtStylesUploadUrl",$he);zt(this,"_mvtStylesDeleteUrl",Jhe)}get vectortilesUrl(){return this._vectortilesUrl===void 0&&console.warn("Warning: vectortilesUrl is not set."),this._vectortilesUrl}get mvtStylesGetUrl(){return this._mvtStylesGetUrl===void 0&&console.warn("Warning: mvtStylesGetUrl is not set."),this._mvtStylesGetUrl}get mvtStylesUploadUrl(){return this._mvtStylesUploadUrl===void 0&&console.warn("Warning: mvtStylesUploadUrl is not set."),this._mvtStylesUploadUrl}get mvtStylesDeleteUrl(){return this._mvtStylesDeleteUrl===void 0&&console.warn("Warning: mvtStylesDeleteUrl is not set."),this._mvtStylesDeleteUrl}setRegisterUrl_v3(e){e.get&&(this._mvtStylesGetUrl=e.get),e.upload&&(this._mvtStylesUploadUrl=e.upload),e.delete&&(this._mvtStylesDeleteUrl=e.delete),e.vectortiles&&(this._vectortilesUrl=e.vectortiles),console.warn("Deprecated: StylesUrlHelper.setRegisterUrl_v3() is meant to be removed when v4 is fully operational")}}const x0=new Qhe;function d_(){function a(T){const M=Ul.getItem(qO),G=Ul.getItem(YO)||"http";return(M?`${G}://${M}`:x0.vectortilesUrl)+`/styles/${T}/style.json`}function e(T){return`${x0.vectortilesUrl}/styles/${T}/{z}/{x}/{y}.png`}function t(T,M){const G=vu();if(T==null)return;const P=new Map;G.bgVectorSources.forEach((F,N)=>{if(N===T.id){const V={...F,xyz_custom:M};P.set(N,V)}else P.set(N,F)}),G.setBgVectorSources(P)}function i(T,M,G=!1){const P="",F=a(M),N=e(M),V={label:T,defaultMapBoxStyle:F,defaultMapBoxStyleXYZ:N,xyz:N,xyz_custom:P,style:F};if(!Ul.getItem(k1)){if(!G)return Promise.resolve(V)}return Promise.resolve(V)}function n(T){const M=Ld().medium_default_styles.road;if(T){T.colors.forEach((P,F)=>{M[F].color=P});const G=M.findIndex(P=>P.label==="Hillshade");M[G].visible=T.hillshade}return M}function s(T,M,G){if(!T||!M.get(T.id))return;const P=JSON.parse(JSON.stringify(M.get(T.id)));if(P&&!(!P||!P.layers))return G&&G.forEach(F=>{P==null||P.layers.forEach((N,V)=>{for(const K of Yhe)if((F[`${K}s`]||[]).includes(N.id)){const J=Object.assign({},P.layers[V].paint);F.color&&(J[`${K}-color`]=F.color,J[`${K}-opacity`]=1,P.layers[V].paint=J),P.layers[V].layout=Object.assign({},P.layers[V].layout,{visibility:F.visible?"visible":"none"})}})}),P}function r(T){return T?fetch(`${x0.mvtStylesDeleteUrl}?id=${T}`).catch(console.warn):Promise.resolve()}async function l(T,M){await r(M);const G=new FormData,P=JSON.stringify(T),F=new Blob([P],{type:"application/json"});G.append("style",F,"style.json");const N={method:"POST",body:G};return fetch(x0.mvtStylesUploadUrl,N).then(V=>V.json()).then(V=>V.id).catch(console.warn)}function u(T,M){if(!M)return;const G=T.maplibreMap;G&&(G.loaded()?G.setStyle(M):new Promise(P=>G.once("data",P)).then(()=>G.setStyle(M)))}function d(T){return Ld().bg_layers.find(M=>M.id==(T==null?void 0:T.id))}function m(T){const M=d(T);return M==null?void 0:M.vector_id}function f(T){const M=d(T);return(M==null?void 0:M.vector_id)!==void 0}function v(T){const M=d(T),G=[...M!=null&&M.simple_style_class?[ml.simpleStyle]:[],...M!=null&&M.medium_style_class?[ml.mediumStyle]:[],...M!=null&&M.expert_style_class?[ml.advancedStyle]:[]];return{isEditable:(M==null?void 0:M.vector_id)!==void 0,styleEditors:G}}function w(T,M){return M.map(G=>Object.assign(G,{selected:G.colors.every((P,F)=>{var N;return((N=T[F])==null?void 0:N.color)===P})}))}function S(){const T=[],M=vu();Ld().bg_layers.forEach(G=>{if(G.vector_id){const P=i(G.icon_id,G.vector_id);T.push(P.then(F=>({id:G.id,config:F})))}}),Promise.all(T).then(G=>{const P=new Map;G.forEach(F=>P.set(F.id,F.config)),M.setBgVectorSources(P)})}return{getDefaultMapBoxStyleUrl:a,getDefaultMapBoxStyleXYZ:e,setConfigForLayer:i,getRoadStyleFromSimpleStyle:n,applyDefaultStyle:s,applyConsolidatedStyle:u,getVectorId:m,setCustomStyleSerial:t,unregisterStyle:r,registerStyle:l,checkSelection:w,isLayerStyleEditable:f,getStyleCapabilitiesFromLayer:v,initBackgroundsConfigs:S}}const vu=Co("style",()=>{const a=d_(),e=Di(),t=Di(new Map),i=Di(new Map),n=Di(!1),s=Di(null),r=Di();function l(S){t.value=S}function u(S){const T=new Map;i.value.forEach((M,G)=>{G!==S&&T.set(G,M)}),i.value=T}function d(S,T){const M=new Map;i.value.forEach((G,P)=>M.set(P,G)),M.set(S,T),i.value=M}function m(S){e.value=a.getRoadStyleFromSimpleStyle(S),v()}function f(S){e.value=S,v()}function v(){n.value=!1}function w(){n.value=!0}return{bgStyle:e,bgVectorSources:t,bgVectorBaseStyles:i,isExpertStyleActive:n,appliedStyle:r,removeBaseStyle:u,setBaseStyle:d,setBgVectorSources:l,setSimpleStyle:m,setStyle:f,disableExpertStyle:v,enableExpertStyle:w,styleSerial:s}},{});class e_e{constructor(){zt(this,"styleWatcher")}bootstrap(){const e=vu();let t,i=!1;t=dr(()=>{e.bgVectorSources&&(this.restore(!1),i&&this.persist(),i=!0,t&&t())})}persist(){const e=vu(),{bgStyle:t}=Tt(e);this.styleWatcher||(this.styleWatcher=Ut(t,(i,n)=>{if(n!==i){const s=Zi();s.bgLayer&&e.bgVectorSources.has(s.bgLayer.id)&&(i&&i.length?Ma.setValue(s.bgLayer.name,i||[],d2.styleToLocalStorage):Ma.removeItem(s.bgLayer.name),Ma.setValue(k1,i||[],d2.styleToSerial))}},{immediate:!0}))}restore(e){const t=vu();t.setStyle(null);const n=Zi().bgLayer;if(n){let s=[];e||(s=Ma.getValue(k1,d2.styleSerialToStyle)),s.length===0&&(s=Ma.getValue(n.name,d2.styleLocalStorageToStyle)),s&&s.length>0&&t.setStyle(s)}}}const aB=new e_e;var fm=(a=>(a.LAYER_OFFLINE_TILE="tile",a.LAYER_OFFLINE_VECTOR="vector",a.LAYER_OFFLINE_BG_VECTOR="bg_vector",a.LAYER_OFFLINE_BG_WMTS="off_bg_wmts",a))(fm||{});const Cw="id",n4="label",iB="layer_name",Sw="metadata",t_e="queryable_id",a_e="current_time",i_e="time",n_e="defaultMapBoxStyle";class r_e extends b3{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,n=e.viewState,s=n.resolution,r=this.getLayer().getSource(),l=e.viewHints;let u=e.extent;if(t.extent!==void 0&&(u=mc(u,Ol(t.extent,n.projection))),!l[Jn.ANIMATING]&&!l[Jn.INTERACTING]&&!Km(u))if(r){const d=n.projection,m=r.getImage(u,s,i,d);m&&(this.loadImage(m)?this.image=m:m.getState()===ga.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),n=Mr(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!xc(s,n))return null;const r=this.image.getExtent(),l=this.image.getImage(),u=Ti(r),d=Math.floor(l.width*((n[0]-r[0])/u));if(d<0||d>=l.width)return null;const m=vr(r),f=Math.floor(l.height*((r[3]-n[1])/m));return f<0||f>=l.height?null:this.getImageData(l,d,f)}renderFrame(e,t){const i=this.image,n=i.getExtent(),s=i.getResolution(),[r,l]=Array.isArray(s)?s:[s,s],u=i.getPixelRatio(),d=e.layerStatesArray[e.layerIndex],m=e.pixelRatio,f=e.viewState,v=f.center,w=f.resolution,S=m*r/(w*u),T=m*l/(w*u);this.prepareContainer(e,t);const M=this.context.canvas.width,G=this.context.canvas.height,P=this.getRenderContext(e);let F=!1,N=!0;if(d.extent){const ne=Ol(d.extent,f.projection);N=Rr(ne,e.extent),F=N&&!lc(ne,e.extent),F&&this.clipUnrotated(P,e,ne)}const V=i.getImage(),K=Su(this.tempTransform,M/2,G/2,S,T,0,u*(n[0]-v[0])/r,u*(v[1]-n[3])/l);this.renderedResolution=l*m/u;const te=V.width*K[0],J=V.height*K[3];if(this.getLayer().getSource().getInterpolate()||(P.imageSmoothingEnabled=!1),this.preRender(P,e),N&&te>=.5&&J>=.5){const ne=K[4],se=K[5],de=d.opacity;de!==1&&(P.save(),P.globalAlpha=de),P.drawImage(V,0,0,+V.width,+V.height,ne,se,te,J),de!==1&&P.restore()}return this.postRender(this.context,e),F&&P.restore(),P.imageSmoothingEnabled=!0,this.container}}const s_e=r_e;class o_e extends Jm{constructor(e){e=e||{},super(e)}}const l_e=o_e;class u_e extends l_e{constructor(e){super(e)}createRenderer(){return new s_e(this)}getData(e){return super.getData(e)}}const Z0=u_e;let QS;const Jg=[];function M8(a,e,t,i,n){a.beginPath(),a.moveTo(0,0),a.lineTo(e,t),a.lineTo(i,n),a.closePath(),a.save(),a.clip(),a.fillRect(0,0,Math.max(e,i)+1,Math.max(t,n)),a.restore()}function eA(a,e){return Math.abs(a[e*4]-210)>2||Math.abs(a[e*4+3]-.75*255)>2}function c_e(){if(QS===void 0){const a=Zr(6,6,Jg);a.globalCompositeOperation="lighter",a.fillStyle="rgba(210, 0, 0, 0.75)",M8(a,4,5,4,0),M8(a,4,5,0,5);const e=a.getImageData(0,0,3,3).data;QS=eA(e,0)||eA(e,4)||eA(e,8),bI(a),Jg.push(a.canvas)}return QS}function P1(a,e,t,i){const n=kr(t,e,a);let s=h1(e,i,t);const r=e.getMetersPerUnit();r!==void 0&&(s*=r);const l=a.getMetersPerUnit();l!==void 0&&(s/=l);const u=a.getExtent();if(!u||xc(u,n)){const d=h1(a,s,n)/s;isFinite(d)&&d>0&&(s/=d)}return s}function d_e(a,e,t,i){const n=Cu(t);let s=P1(a,e,n,i);return(!isFinite(s)||s<=0)&&J4(t,function(r){return s=P1(a,e,r,i),isFinite(s)&&s>0}),s}function nB(a,e,t,i,n,s,r,l,u,d,m,f,v,w){const S=Zr(Math.round(t*a),Math.round(t*e),Jg);if(f||(S.imageSmoothingEnabled=!1),u.length===0)return S.canvas;S.scale(t,t);function T(V){return Math.round(V*t)/t}S.globalCompositeOperation="lighter";const M=xl();u.forEach(function(V,K,te){c1(M,V.extent)});let G;const P=t/i,F=(f?1:1+Math.pow(2,-24))/P;if(!v||u.length!==1||d!==0){if(G=Zr(Math.round(Ti(M)*P),Math.round(vr(M)*P),Jg),f||(G.imageSmoothingEnabled=!1),n&&w){const V=(n[0]-M[0])*P,K=-(n[3]-M[3])*P,te=Ti(n)*P,J=vr(n)*P;G.rect(V,K,te,J),G.clip()}u.forEach(function(V,K,te){if(V.image.width>0&&V.image.height>0){if(V.clipExtent){G.save();const _e=(V.clipExtent[0]-M[0])*P,Se=-(V.clipExtent[3]-M[3])*P,ce=Ti(V.clipExtent)*P,Ie=vr(V.clipExtent)*P;G.rect(f?_e:Math.round(_e),f?Se:Math.round(Se),f?ce:Math.round(_e+ce)-Math.round(_e),f?Ie:Math.round(Se+Ie)-Math.round(Se)),G.clip()}const J=(V.extent[0]-M[0])*P,ne=-(V.extent[3]-M[3])*P,se=Ti(V.extent)*P,de=vr(V.extent)*P;G.drawImage(V.image,d,d,V.image.width-2*d,V.image.height-2*d,f?J:Math.round(J),f?ne:Math.round(ne),f?se:Math.round(J+se)-Math.round(J),f?de:Math.round(ne+de)-Math.round(ne)),V.clipExtent&&G.restore()}})}const N=Vd(r);return l.getTriangles().forEach(function(V,K,te){const J=V.source,ne=V.target;let se=J[0][0],de=J[0][1],_e=J[1][0],Se=J[1][1],ce=J[2][0],Ie=J[2][1];const he=T((ne[0][0]-N[0])/s),we=T(-(ne[0][1]-N[1])/s),Oe=T((ne[1][0]-N[0])/s),Ye=T(-(ne[1][1]-N[1])/s),at=T((ne[2][0]-N[0])/s),yt=T(-(ne[2][1]-N[1])/s),De=se,jt=de;se=0,de=0,_e-=De,Se-=jt,ce-=De,Ie-=jt;const pa=[[_e,Se,0,0,Oe-he],[ce,Ie,0,0,at-he],[0,0,_e,Se,Ye-we],[0,0,ce,Ie,yt-we]],$t=kU(pa);if(!$t)return;if(S.save(),S.beginPath(),c_e()||!f){S.moveTo(Oe,Ye);const bt=4,ui=he-Oe,Ca=we-Ye;for(let ii=0;ii<bt;ii++)S.lineTo(Oe+T((ii+1)*ui/bt),Ye+T(ii*Ca/(bt-1))),ii!=bt-1&&S.lineTo(Oe+T((ii+1)*ui/bt),Ye+T((ii+1)*Ca/(bt-1)));S.lineTo(at,yt)}else S.moveTo(Oe,Ye),S.lineTo(he,we),S.lineTo(at,yt);S.clip(),S.transform($t[0],$t[2],$t[1],$t[3],he,we),S.translate(M[0]-De,M[3]-jt);let Ua;if(G)Ua=G.canvas,S.scale(F,-F);else{const bt=u[0],ui=bt.extent;Ua=bt.image,S.scale(Ti(ui)/Ua.width,-vr(ui)/Ua.height)}S.drawImage(Ua,0,0),S.restore()}),G&&(bI(G),Jg.push(G.canvas)),m&&(S.save(),S.globalCompositeOperation="source-over",S.strokeStyle="black",S.lineWidth=1,l.getTriangles().forEach(function(V,K,te){const J=V.target,ne=(J[0][0]-N[0])/s,se=-(J[0][1]-N[1])/s,de=(J[1][0]-N[0])/s,_e=-(J[1][1]-N[1])/s,Se=(J[2][0]-N[0])/s,ce=-(J[2][1]-N[1])/s;S.beginPath(),S.moveTo(de,_e),S.lineTo(ne,se),S.lineTo(Se,ce),S.closePath(),S.stroke()}),S.restore()),S.canvas}function r4(a){return Array.isArray(a)?Math.min(...a):a}const h_e=10,L8=.25;class __e{constructor(e,t,i,n,s,r,l){this.sourceProj_=e,this.targetProj_=t;let u={};const d=l?rT(F=>Mr(l,kr(F,this.targetProj_,this.sourceProj_))):Wm(this.targetProj_,this.sourceProj_);this.transformInv_=function(F){const N=F[0]+"/"+F[1];return u[N]||(u[N]=d(F)),u[N]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Ti(n)>=Ti(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ti(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ti(this.targetProj_.getExtent()):null;const m=Vd(i),f=sI(i),v=rI(i),w=nI(i),S=this.transformInv_(m),T=this.transformInv_(f),M=this.transformInv_(v),G=this.transformInv_(w),P=h_e+(r?Math.max(0,Math.ceil(Math.log2(eT(i)/(r*r*256*256)))):0);if(this.addQuad_(m,f,v,w,S,T,M,G,P),this.wrapsXInSource_){let F=1/0;this.triangles_.forEach(function(N,V,K){F=Math.min(F,N.source[0][0],N.source[1][0],N.source[2][0])}),this.triangles_.forEach(N=>{if(Math.max(N.source[0][0],N.source[1][0],N.source[2][0])-F>this.sourceWorldWidth_/2){const V=[[N.source[0][0],N.source[0][1]],[N.source[1][0],N.source[1][1]],[N.source[2][0],N.source[2][1]]];V[0][0]-F>this.sourceWorldWidth_/2&&(V[0][0]-=this.sourceWorldWidth_),V[1][0]-F>this.sourceWorldWidth_/2&&(V[1][0]-=this.sourceWorldWidth_),V[2][0]-F>this.sourceWorldWidth_/2&&(V[2][0]-=this.sourceWorldWidth_);const K=Math.min(V[0][0],V[1][0],V[2][0]);Math.max(V[0][0],V[1][0],V[2][0])-K<this.sourceWorldWidth_/2&&(N.source=V)}})}u={}}addTriangle_(e,t,i,n,s,r){this.triangles_.push({source:[n,s,r],target:[e,t,i]})}addQuad_(e,t,i,n,s,r,l,u,d){const m=Ss([s,r,l,u]),f=this.sourceWorldWidth_?Ti(m)/this.sourceWorldWidth_:null,v=this.sourceWorldWidth_,w=this.sourceProj_.canWrapX()&&f>.5&&f<1;let S=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const M=Ss([e,t,i,n]);S=Ti(M)/this.targetWorldWidth_>L8||S}!w&&this.sourceProj_.isGlobal()&&f&&(S=f>L8||S)}if(!S&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!Rr(m,this.maxSourceExtent_))return;let T=0;if(!S&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(r[0])||!isFinite(r[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(u[0])||!isFinite(u[1]))){if(d>0)S=!0;else if(T=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(r[0])||!isFinite(r[1])?4:0)+(!isFinite(l[0])||!isFinite(l[1])?2:0)+(!isFinite(u[0])||!isFinite(u[1])?1:0),T!=1&&T!=2&&T!=4&&T!=8)return}if(d>0){if(!S){const M=[(e[0]+i[0])/2,(e[1]+i[1])/2],G=this.transformInv_(M);let P;w?P=(Sd(s[0],v)+Sd(l[0],v))/2-Sd(G[0],v):P=(s[0]+l[0])/2-G[0];const F=(s[1]+l[1])/2-G[1];S=P*P+F*F>this.errorThresholdSquared_}if(S){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const M=[(t[0]+i[0])/2,(t[1]+i[1])/2],G=this.transformInv_(M),P=[(n[0]+e[0])/2,(n[1]+e[1])/2],F=this.transformInv_(P);this.addQuad_(e,t,M,P,s,r,G,F,d-1),this.addQuad_(P,M,i,n,F,G,l,u,d-1)}else{const M=[(e[0]+t[0])/2,(e[1]+t[1])/2],G=this.transformInv_(M),P=[(i[0]+n[0])/2,(i[1]+n[1])/2],F=this.transformInv_(P);this.addQuad_(e,M,P,n,s,G,F,u,d-1),this.addQuad_(M,t,i,P,G,r,l,F,d-1)}return}}if(w){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}T&11||this.addTriangle_(e,i,n,s,l,u),T&14||this.addTriangle_(e,i,t,s,l,r),T&&(T&13||this.addTriangle_(t,n,e,r,u,s),T&7||this.addTriangle_(t,n,i,r,u,l))}calculateSourceExtent(){const e=xl();return this.triangles_.forEach(function(t,i,n){const s=t.source;G0(e,s[0]),G0(e,s[1]),G0(e,s[2])}),e}getTriangles(){return this.triangles_}}const rB=__e,sB=.5;class m_e extends _7{constructor(e,t,i,n,s,r,l){let u=e.getExtent();u&&e.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);let d=t.getExtent();d&&t.canWrapX()&&(d=d.slice(),d[0]=-1/0,d[2]=1/0);const m=d?mc(i,d):i,f=Cu(m),v=P1(e,t,f,n),w=sB,S=new rB(e,t,m,u,v*w,n),T=S.calculateSourceExtent(),M=Km(T)?null:r(T,v,s),G=M?ga.IDLE:ga.EMPTY,P=M?M.getPixelRatio():1;super(i,n,P,G),this.targetProj_=t,this.maxSourceExtent_=u,this.triangulation_=S,this.targetResolution_=n,this.targetExtent_=i,this.sourceImage_=M,this.sourcePixelRatio_=P,this.interpolate_=l,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ga.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ga.LOADED){const t=Ti(this.targetExtent_)/this.targetResolution_,i=vr(this.targetExtent_)/this.targetResolution_;this.canvas_=nB(t,i,this.sourcePixelRatio_,r4(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ga.IDLE){this.state=ga.LOADING,this.changed();const e=this.sourceImage_.getState();e==ga.LOADED||e==ga.ERROR?this.reproject_():(this.sourceListenerKey_=ba(this.sourceImage_,za.CHANGE,t=>{const i=this.sourceImage_.getState();(i==ga.LOADED||i==ga.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){_n(this.sourceListenerKey_),this.sourceListenerKey_=null}}const p_e=m_e,Fh=4,tA={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class g_e extends Il{constructor(e,t){super(e),this.image=t}}class f_e extends w3{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=mI(t,e,0);e=t[i]}return e}getImage(e,t,i,n){const s=this.getProjection();if(!s||!n||zg(s,n))return s&&(n=s),this.getImageInternal(e,t,i,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&zg(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&Mm(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new p_e(s,n,e,t,i,(r,l,u)=>this.getImageInternal(r,l,u,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,n){if(this.loader){const s=oB(e,t,i,1),r=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&lc(this.wantedExtent_,s)||lc(this.image.getExtent(),s))&&(this.wantedResolution_&&r4(this.wantedResolution_)===r||r4(this.image.getResolution())===r)))return this.image;this.wantedProjection_=n,this.wantedExtent_=s,this.wantedResolution_=r,this.image=new _7(s,r,i,this.loader),this.image.addEventListener(za.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case ga.LOADING:this.loading=!0,i=tA.IMAGELOADSTART;break;case ga.LOADED:this.loading=!1,i=tA.IMAGELOADEND;break;case ga.ERROR:this.loading=!1,i=tA.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new g_e(i,t))}}function y_e(a,e){a.getImage().src=e}function oB(a,e,t,i){const n=e/t,s=Cu(a),r=Oh(Ti(a)/n,Fh),l=Oh(vr(a)/n,Fh),u=Oh((i-1)*r/2,Fh),d=r+2*u,m=Oh((i-1)*l/2,Fh),f=l+2*m;return d1(s,n,0,[d,f])}const b_e=f_e;function Aw(a,e,t,i){return i!==void 0?(i[0]=a,i[1]=e,i[2]=t,i):[a,e,t]}function v_e(a,e,t){return a+"/"+e+"/"+t}function lB(a){return x_e(a[0],a[1],a[2])}function x_e(a,e,t){return(e<<a)+t}function w_e(a,e){const t=a[0],i=a[1],n=a[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,n):!0}function B1(a,e){const t=[];Object.keys(e).forEach(function(n){e[n]!==null&&e[n]!==void 0&&t.push(n+"="+encodeURIComponent(e[n]))});const i=t.join("&");return a=a.replace(/[?&]$/,""),a+=a.includes("?")?"&":"?",a+i}const I_e=/\{z\}/g,C_e=/\{x\}/g,S_e=/\{y\}/g,A_e=/\{-y\}/g;function T_e(a,e,t,i,n){return a.replace(I_e,e.toString()).replace(C_e,t.toString()).replace(S_e,i.toString()).replace(A_e,function(){if(n===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(n-i).toString()})}function uB(a){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(a);if(t){const i=t[1].charCodeAt(0),n=t[2].charCodeAt(0);let s;for(s=i;s<=n;++s)e.push(a.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(a),t){const i=parseInt(t[2],10);for(let n=parseInt(t[1],10);n<=i;n++)e.push(a.replace(t[0],n.toString()));return e}return e.push(a),e}const Tw="1.3.0",R8=[101,101];function cB(a,e,t,i,n){n.WIDTH=t[0],n.HEIGHT=t[1];const s=i.getAxisOrientation(),r=Q4(n.VERSION,"1.3")>=0;n[r?"CRS":"SRS"]=i.getCode();const l=r&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return n.BBOX=l.join(","),B1(a,n)}function dB(a,e,t,i,n,s,r){s=Object.assign({REQUEST:"GetMap"},s);const l=e/t,u=[$L(Ti(a)/l,Fh),$L(vr(a)/l,Fh)];if(t!=1)switch(r){case"geoserver":const m=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+m:s.FORMAT_OPTIONS="dpi:"+m;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return cB(n,a,u,i,s)}function Ew(a,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:Tw,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},a)}function E_e(a){const e=a.hidpi===void 0?!0:a.hidpi,t=Ei(a.projection||"EPSG:3857"),i=a.ratio||1.5,n=a.load||p7,s=a.crossOrigin??null;return(r,l,u)=>{r=oB(r,l,u,i),u!=1&&(!e||a.serverType===void 0)&&(u=1);const d=dB(r,l,u,t,a.url,Ew(a.params,"GetMap"),a.serverType),m=new Image;return m.crossOrigin=s,n(m,d).then(f=>({image:f,extent:r,pixelRatio:u}))}}function M_e(a,e,t){if(a.url===void 0)return;const i=Ei(a.projection||"EPSG:3857"),n=d1(e,t,0,R8),s={QUERY_LAYERS:a.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,Ew(a.params,"GetFeatureInfo"),a.params);const r=Cg((e[0]-n[0])/t,Fh),l=Cg((n[3]-e[1])/t,Fh),u=Q4(s.VERSION,"1.3")>=0;return s[u?"I":"X"]=r,s[u?"J":"Y"]=l,cB(a.url,n,R8,i,s)}function L_e(a,e){if(a.url===void 0)return;const t={SERVICE:"WMS",VERSION:Tw,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e!==void 0){const i=Ei(a.projection||"EPSG:3857").getMetersPerUnit()||1,n=28e-5;t.SCALE=e*i/n}if(Object.assign(t,a.params),a.params!==void 0&&t.LAYER===void 0){const i=t.LAYERS;if(!(!Array.isArray(i)||i.length!==1))return;t.LAYER=i}return B1(a.url,t)}class R_e extends b_e{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:y_e,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,i,n){const s=Ei(i),r=this.getProjection();r&&r!==s&&(t=P1(r,s,e,t),e=kr(e,s,r));const l={url:this.url_,params:{...this.params_,...n},projection:r||s};return M_e(l,e,t)}getLegendUrl(e,t){return L_e({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,i,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=E_e({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,r)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,r),p7(s))})),super.getImageInternal(e,t,i,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const Mw=R_e;function hB(){return dI([5.31,49.38,6.64,50.21],Gd,Im)}function _B(a){var e;return!!((e=a==null?void 0:a.metadata)!=null&&e.hasRetina)&&QO()}function k_e(a,e="https"){const t=a.imageType.split("/")[1],i=Ma.getValue(Df,g3)?"app.geoportail.lu":"geoportail.lu";return`${e==="https"?"//wmts{3-4}.":"//wmts{1-2}."}${i}/mapproxy_4_v3/wmts/{Layer}${_B(a)?"_hd":""}/{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}.${t}`}class W_e{createOlLayer(e){const{name:t,layers:i,imageType:n,url:s,id:r}=e,l=new Mw({url:s||M1.wmsProxyUrl,hidpi:QO(),serverType:"mapserver",params:{FORMAT:n,LAYERS:i},crossOrigin:"anonymous"});return new Z0({properties:{"olcs.extent":hB(),label:t,id:r},source:l})}setLayerTime(e,t){const i=e.getParams();i.TIME=t,e.updateParams(i)}}const mB=new W_e;class G_e extends q1{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(za.CHANGE)}release(){this.setState(Ra.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Ra.EMPTY){if(this.state!==Ra.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){ka()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const n=t-i+1e3/60;return n>=this.transition_?1:OW(n/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}const D3=G_e;function s4(a){return a instanceof Image||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageBitmap?a:null}const O_e=new Error("disposed"),P_e=[256,256];class B_e extends D3{constructor(e){const t=Ra.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=s4(this.data_);return e?[e.width,e.height]:P_e}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Ra.IDLE&&this.state!==Ra.ERROR)return;this.state=Ra.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Ra.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Ra.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(O_e),this.controller_=null),super.disposeInternal()}}const k8=B_e;class N_e extends D3{constructor(e,t,i,n,s,r){super(e,t,r),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,n!==null&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Ra.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Ra.ERROR,this.unlistenImage_(),this.image_=F_e(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Ra.LOADED:this.state=Ra.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Ra.ERROR&&(this.state=Ra.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ra.IDLE&&(this.state=Ra.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Jq(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function F_e(){const a=Zr(1,1);return a.fillStyle="rgba(0,0,0,0)",a.fillRect(0,0,1,1),a.canvas}const pB=N_e;class gB{constructor(e,t,i,n){this.minX=e,this.maxX=t,this.minY=i,this.maxY=n}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function ug(a,e,t,i,n){return n!==void 0?(n.minX=a,n.maxX=e,n.minY=t,n.maxY=i,n):new gB(a,e,t,i)}const fB=gB;class D_e extends D3{constructor(e,t,i,n,s,r,l,u,d,m,f,v){super(s,Ra.IDLE,v),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=l,this.gutter_=u,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=n,this.wrappedTileCoord_=r||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const w=n.getTileCoordExtent(this.wrappedTileCoord_),S=this.targetTileGrid_.getExtent();let T=this.sourceTileGrid_.getExtent();const M=S?mc(w,S):w;if(eT(M)===0){this.state=Ra.EMPTY;return}const G=e.getExtent();G&&(T?T=mc(T,G):T=G);const P=n.getResolution(this.wrappedTileCoord_[0]),F=d_e(e,i,M,P);if(!isFinite(F)||F<=0){this.state=Ra.EMPTY;return}const N=m!==void 0?m:sB;if(this.triangulation_=new rB(e,i,M,T,F*N,P),this.triangulation_.getTriangles().length===0){this.state=Ra.EMPTY;return}this.sourceZ_=t.getZForResolution(F);let V=this.triangulation_.calculateSourceExtent();if(T&&(e.canWrapX()?(V[1]=Nn(V[1],T[1],T[3]),V[3]=Nn(V[3],T[1],T[3])):V=mc(V,T)),!eT(V))this.state=Ra.EMPTY;else{let K=0,te=0;e.canWrapX()&&(K=Ti(G),te=Math.floor((V[0]-G[0])/K)),yW(V.slice(),e,!0).forEach(ne=>{const se=t.getTileRangeForExtentAndZ(ne,this.sourceZ_);for(let de=se.minX;de<=se.maxX;de++)for(let _e=se.minY;_e<=se.maxY;_e++){const Se=d(this.sourceZ_,de,_e,l);if(Se){const ce=te*K;this.sourceTiles_.push({tile:Se,offset:ce})}}++te}),this.sourceTiles_.length===0&&(this.state=Ra.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var n;const i=t.tile;if(i&&i.getState()==Ra.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const r=(n=this.clipExtent_)==null?void 0:n.slice();r&&(r[0]+=t.offset,r[2]+=t.offset),e.push({extent:s,clipExtent:r,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Ra.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),n=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],r=this.targetTileGrid_.getResolution(t),l=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=nB(n,s,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),r,u,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Ra.LOADED}this.changed()}load(){if(this.state==Ra.IDLE){this.state=Ra.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==Ra.IDLE||i==Ra.LOADING){e++;const n=ba(t,za.CHANGE,s=>{const r=t.getState();(r==Ra.LOADED||r==Ra.ERROR||r==Ra.EMPTY)&&(_n(n),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,n){t.getState()==Ra.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(_n),this.sourcesListenerKeys_=null}release(){this.canvas_&&(bI(this.canvas_.getContext("2d")),Jg.push(this.canvas_),this.canvas_=null),super.release()}}const yB=D_e;class V_e{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof _I&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return sn(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return sn(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){sn(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}const Z_e=V_e;function aA(a,e,t,i){return`${a},${v_e(e,t,i)}`}function iA(a,e,t){if(!(t in a))return a[t]=new Set([e]),!0;const i=a[t],n=i.has(e);return n||i.add(e),!n}function z_e(a,e,t){const i=a[t];return i?i.delete(e):!1}function W8(a,e){const t=a.layerStatesArray[a.layerIndex];t.extent&&(e=mc(e,Ol(t.extent,a.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const n=i.getTileGridForProjection(a.viewState.projection).getExtent();n&&(e=mc(e,n))}return e}class U_e extends b3{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=xl(),this.tempTileRange_=new fB(0,0,0,0),this.tempTileCoord_=Aw(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Z_e(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,n){const s=this.tileCache_,l=this.getLayer().getSource(),u=aA(l.getKey(),e,t,i);let d;if(s.containsKey(u))d=s.get(u);else{if(d=l.getTile(e,t,i,n.pixelRatio,n.viewState.projection),!d)return null;s.set(u,d)}return d}getTile(e,t,i,n){const s=this.getOrCreateTile(e,t,i,n);return s||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),n=Mr(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!xc(s,n))return null;const r=t.viewState,l=i.getRenderSource(),u=l.getTileGridForProjection(r.projection),d=l.getTilePixelRatio(t.pixelRatio);for(let m=u.getZForResolution(r.resolution);m>=u.getMinZoom();--m){const f=u.getTileCoordForCoordAndZ(n,m),v=this.getTile(m,f[1],f[2],t);if(!v||v.getState()!==Ra.LOADED)continue;const w=u.getOrigin(m),S=Ks(u.getTileSize(m)),T=u.getResolution(m);let M;if(v instanceof pB||v instanceof yB)M=v.getImage();else if(v instanceof k8){if(M=s4(v.getData()),!M)continue}else continue;const G=Math.floor(d*((n[0]-w[0])/T-f[1]*S[0])),P=Math.floor(d*((w[1]-n[1])/T-f[2]*S[1])),F=Math.round(d*l.getGutterForProjection(r.projection));return this.getImageData(M,G+F,P+F)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==i&&(this.renderedRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=i,!0}enqueueTiles(e,t,i,n,s){const r=e.viewState,l=this.getLayer(),u=l.getRenderSource(),d=u.getTileGridForProjection(r.projection),m=Ia(u);m in e.wantedTiles||(e.wantedTiles[m]={});const f=e.wantedTiles[m],v=l.getMapInternal(),w=Math.max(i-s,d.getMinZoom(),d.getZForResolution(Math.min(l.getMaxResolution(),v?v.getView().getResolutionForZoom(Math.max(l.getMinZoom(),0)):d.getResolution(0)),u.zDirection)),S=r.rotation,T=S?gW(r.center,r.resolution,S,e.size):void 0;for(let M=i;M>=w;--M){const G=d.getTileRangeForExtentAndZ(t,M,this.tempTileRange_),P=d.getResolution(M);for(let F=G.minX;F<=G.maxX;++F)for(let N=G.minY;N<=G.maxY;++N){if(S&&!d.tileCoordIntersectsViewport([M,F,N],T))continue;const V=this.getTile(M,F,N,e);if(!V||!iA(n,V,M))continue;const te=V.getKey();if(f[te]=!0,V.getState()===Ra.IDLE&&!e.tileQueue.isKeyQueued(te)){const J=Aw(M,F,N,this.tempTileCoord_);e.tileQueue.enqueue([V,m,d.getTileCoordCenter(J),P])}}}}findStaleTile_(e,t){const i=this.tileCache_,n=e[0],s=e[1],r=e[2],l=this.getStaleKeys();for(let u=0;u<l.length;++u){const d=aA(l[u],n,s,r);if(i.containsKey(d)){const m=i.peek(d);if(m.getState()===Ra.LOADED)return m.endTransition(Ia(this)),iA(t,m,n),!0}}return!1}findAltTiles_(e,t,i,n){const s=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!s)return!1;let r=!0;const l=this.tileCache_,d=this.getLayer().getRenderSource().getKey();for(let m=s.minX;m<=s.maxX;++m)for(let f=s.minY;f<=s.maxY;++f){const v=aA(d,i,m,f);let w=!1;if(l.containsKey(v)){const S=l.peek(v);S.getState()===Ra.LOADED&&(iA(n,S,i),w=!0)}w||(r=!1)}return r}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],n=e.viewState,s=n.projection,r=n.resolution,l=n.center,u=e.pixelRatio,d=this.getLayer(),m=d.getSource(),f=m.getTileGridForProjection(s),v=f.getZForResolution(r,m.zDirection),w=f.getResolution(v),S=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==S&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=S):this.renderedSourceKey_=S;let T=e.extent;const M=m.getTilePixelRatio(u);this.prepareContainer(e,t);const G=this.context.canvas.width,P=this.context.canvas.height,F=i.extent&&Ol(i.extent);F&&(T=mc(T,Ol(i.extent)));const N=w*G/2/M,V=w*P/2/M,K=[l[0]-N,l[1]-V,l[0]+N,l[1]+V],te={};this.renderedTiles.length=0;const J=d.getPreload();if(e.nextExtent){const Oe=f.getZForResolution(n.nextResolution,m.zDirection),Ye=W8(e,e.nextExtent);this.enqueueTiles(e,Ye,Oe,te,J)}const ne=W8(e,T);if(this.enqueueTiles(e,ne,v,te,0),J>0&&setTimeout(()=>{this.enqueueTiles(e,ne,v-1,te,J-1)},0),!(v in te))return this.container;const se=Ia(this),de=e.time;for(const Oe of te[v]){const Ye=Oe.getState();if(Ye===Ra.EMPTY)continue;const at=Oe.tileCoord;if(Ye===Ra.LOADED&&Oe.getAlpha(se,de)===1){Oe.endTransition(se);continue}if(Ye!==Ra.ERROR&&(this.renderComplete=!1),this.findStaleTile_(at,te)){z_e(te,Oe,v),e.animate=!0;continue}if(this.findAltTiles_(f,at,v+1,te))continue;const jt=f.getMinZoom();for(let pa=v-1;pa>=jt&&!this.findAltTiles_(f,at,pa,te);--pa);}const _e=w/r*u/M,Se=this.getRenderContext(e);Su(this.tempTransform,G/2,P/2,_e,_e,0,-G/2,-P/2),i.extent&&this.clipUnrotated(Se,e,F),m.getInterpolate()||(Se.imageSmoothingEnabled=!1),this.preRender(Se,e);const ce=Object.keys(te).map(Number);ce.sort(pc);let Ie;const he=[],we=[];for(let Oe=ce.length-1;Oe>=0;--Oe){const Ye=ce[Oe],at=m.getTilePixelSize(Ye,u,s),De=f.getResolution(Ye)/w,jt=at[0]*De*_e,pa=at[1]*De*_e,$t=f.getTileCoordForCoordAndZ(Vd(K),Ye),Ua=f.getTileCoordExtent($t),bt=Mr(this.tempTransform,[M*(Ua[0]-K[0])/w,M*(K[3]-Ua[3])/w]),ui=M*m.getGutterForProjection(s);for(const Ca of te[Ye]){if(Ca.getState()!==Ra.LOADED)continue;const ii=Ca.tileCoord,zi=$t[1]-ii[1],An=Math.round(bt[0]-(zi-1)*jt),xe=$t[2]-ii[2],Ge=Math.round(bt[1]-(xe-1)*pa),qe=Math.round(bt[0]-zi*jt),ut=Math.round(bt[1]-xe*pa),gt=An-qe,Pe=Ge-ut,Qe=ce.length===1;let ze=!1;Ie=[qe,ut,qe+gt,ut,qe+gt,ut+Pe,qe,ut+Pe];for(let st=0,nt=he.length;st<nt;++st)if(!Qe&&Ye<we[st]){const xt=he[st];Rr([qe,ut,qe+gt,ut+Pe],[xt[0],xt[3],xt[4],xt[7]])&&(ze||(Se.save(),ze=!0),Se.beginPath(),Se.moveTo(Ie[0],Ie[1]),Se.lineTo(Ie[2],Ie[3]),Se.lineTo(Ie[4],Ie[5]),Se.lineTo(Ie[6],Ie[7]),Se.moveTo(xt[6],xt[7]),Se.lineTo(xt[4],xt[5]),Se.lineTo(xt[2],xt[3]),Se.lineTo(xt[0],xt[1]),Se.clip())}he.push(Ie),we.push(Ye),this.drawTile(Ca,e,qe,ut,gt,Pe,ui,Qe),ze&&Se.restore(),this.renderedTiles.unshift(Ca),this.updateUsedTiles(e.usedTiles,m,Ca)}}if(this.renderedResolution=w,this.extentChanged=!this.renderedExtent_||!Mm(this.renderedExtent_,K),this.renderedExtent_=K,this.renderedPixelRatio=u,this.postRender(this.context,e),i.extent&&Se.restore(),Se.imageSmoothingEnabled=!0,this.renderComplete){const Oe=(Ye,at)=>{const yt=Ia(m),De=at.wantedTiles[yt],jt=De?Object.keys(De).length:0;this.updateCacheSize(jt),this.tileCache_.expireCache()};e.postRenderFunctions.push(Oe)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,n,s,r,l,u){let d;if(e instanceof k8){if(d=s4(e.getData()),!d)throw new Error("Rendering array data is not yet supported")}else d=this.getTileImage(e);if(!d)return;const m=this.getRenderContext(t),f=Ia(this),v=t.layerStatesArray[t.layerIndex],w=v.opacity*(u?e.getAlpha(f,t.time):1),S=w!==m.globalAlpha;S&&(m.save(),m.globalAlpha=w),m.drawImage(d,l,l,d.width-2*l,d.height-2*l,i,n,s,r),S&&m.restore(),w!==v.opacity?t.animate=!0:u&&e.endTransition(f)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const n=Ia(t);n in e||(e[n]={}),e[n][i.getKey()]=!0}}const bB=U_e,Dh={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class H_e extends Jm{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Dh.PRELOAD)}setPreload(e){this.set(Dh.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Dh.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Dh.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const X_e=H_e;class q_e extends X_e{constructor(e){super(e)}createRenderer(){return new bB(this,{cacheSize:this.getCacheSize()})}}const Wg=q_e,cg=[0,0,0],xh=5;class Y_e{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,sn(yH(this.resolutions_,(n,s)=>s-n,!0),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let n=0,s=this.resolutions_.length-1;n<s;++n)if(!t)t=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,sn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Vd(i)),sn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,sn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:I5,sn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((n,s)=>{const r=new fB(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(i){const l=this.getTileRangeForExtentAndZ(i,s);r.minX=Math.max(l.minX,r.minX),r.maxX=Math.min(l.maxX,r.maxX),r.minY=Math.max(l.minY,r.minY),r.maxY=Math.min(l.maxY,r.maxY)}return r}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const n=this.getTileRangeForExtentAndZ(e,t);for(let s=n.minX,r=n.maxX;s<=r;++s)for(let l=n.minY,u=n.maxY;l<=u;++l)i([t,s,l])}forEachTileCoordParentTileRange(e,t,i,n){let s,r,l,u=null,d=e[0]-1;for(this.zoomFactor_===2?(r=e[1],l=e[2]):u=this.getTileCoordExtent(e,n);d>=this.minZoom;){if(r!==void 0&&l!==void 0?(r=Math.floor(r/2),l=Math.floor(l/2),s=ug(r,r,l,l,i)):s=this.getTileRangeForExtentAndZ(u,d,i),t(d,s))return!0;--d}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,r=e[2]*2;return ug(s,s+1,r,r+1,t)}const n=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const n=e[0],s=e[1],r=e[2];if(t===n)return ug(s,r,s,r,i);if(this.zoomFactor_){const u=Math.pow(this.zoomFactor_,t-n),d=Math.floor(s*u),m=Math.floor(r*u);if(t<n)return ug(d,d,m,m,i);const f=Math.floor(u*(s+1))-1,v=Math.floor(u*(r+1))-1;return ug(d,f,m,v,i)}const l=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,cg);const n=cg[1],s=cg[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,cg);const r=cg[1],l=cg[2];return ug(n,r,s,l,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),n=Ks(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*n[0]*i,t[1]-(e[2]+.5)*n[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=Ks(this.getTileSize(e[0]),this.tmpSize_),r=i[0]+e[1]*s[0]*n,l=i[1]-(e[2]+1)*s[1]*n,u=r+s[0]*n,d=l+s[1]*n;return wc(r,l,u,d,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,n,s){const r=this.getZForResolution(i),l=i/this.getResolution(r),u=this.getOrigin(r),d=Ks(this.getTileSize(r),this.tmpSize_);let m=l*(e-u[0])/i/d[0],f=l*(u[1]-t)/i/d[1];return n?(m=Oh(m,xh)-1,f=Oh(f,xh)-1):(m=Cg(m,xh),f=Cg(f,xh)),Aw(r,m,f,s)}getTileCoordForXYAndZ_(e,t,i,n,s){const r=this.getOrigin(i),l=this.getResolution(i),u=Ks(this.getTileSize(i),this.tmpSize_);let d=(e-r[0])/l/u[0],m=(r[1]-t)/l/u[1];return n?(d=Oh(d,xh)-1,m=Oh(m,xh)-1):(d=Cg(d,xh),m=Cg(m,xh)),Aw(i,d,m,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=mI(this.resolutions_,e,t||0);return Nn(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return qW(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let n=this.minZoom;n<t;++n)i[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=i}}const FI=Y_e;class K_e extends FI{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}const V3=K_e;function j_e(a,e){return function(t,i,n){if(!t)return;let s;const r=t[0];if(e){const l=e.getFullTileRange(r);l&&(s=l.getHeight()-1)}return T_e(a,r,t[1],t[2],s)}}function $_e(a,e){const t=a.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=j_e(a[n],e);return o4(i)}function o4(a){return a.length===1?a[0]:function(e,t,i){if(!e)return;const n=lB(e),s=Sd(n,a.length);return a[s](e,t,i)}}function vB(a){let e=a.getDefaultTileGrid();return e||(e=tme(a),a.setDefaultTileGrid(e)),e}function J_e(a,e,t){const i=e[0],n=a.getTileCoordCenter(e),s=Z3(t);if(!xc(s,n)){const r=Ti(s),l=Math.ceil((s[0]-n[0])/r);return n[0]+=r*l,a.getTileCoordForCoordAndZ(n,i)}return e}function Q_e(a,e,t,i){i=i!==void 0?i:"top-left";const n=xB(a,e,t);return new FI({extent:a,origin:TU(a,i),resolutions:n,tileSize:t})}function eme(a){const e=a||{},t=e.extent||Ei("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:xB(t,e.maxZoom,e.tileSize,e.maxResolution)};return new FI(i)}function xB(a,e,t,i){e=e!==void 0?e:mX,t=Ks(t!==void 0?t:I5);const n=vr(a),s=Ti(a);i=i>0?i:Math.max(s/t[0],n/t[1]);const r=e+1,l=new Array(r);for(let u=0;u<r;++u)l[u]=i/Math.pow(2,u);return l}function tme(a,e,t,i){const n=Z3(a);return Q_e(n,e,t,i)}function Z3(a){a=Ei(a);let e=a.getExtent();if(!e){const t=180*Lm.degrees/a.getMetersPerUnit();e=wc(-t,-t,t,t)}return e}class ame extends w3{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Ks(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Ia(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,n,s){return ka()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:vB(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const n=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),r=Ks(n.getTileSize(e),this.tmpSize);return s==1?r:Tq(r,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),n=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=J_e(n,e,i)),w_e(e,n)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class ime extends Il{constructor(e,t){super(e),this.tile=t}}const nme=ame,nA={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class z3 extends nme{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===z3.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Ia(t),n=t.getState();let s;n==Ra.LOADING?(this.tileLoadingKeys_[i]=!0,s=nA.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=n==Ra.ERROR?nA.TILELOADERROR:n==Ra.LOADED?nA.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new ime(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=uB(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction($_e(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}const rme=z3;class sme extends rme{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ome,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:pB,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!zg(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||zg(t,e)))return this.tileGrid;const i=Ia(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=vB(e)),this.tileGridForProjection[i]}createTile_(e,t,i,n,s,r){const l=[e,t,i],u=this.getTileCoordForTileUrlFunction(l,s),d=u?this.tileUrlFunction(u,n,s):void 0,m=new this.tileClass(l,d!==void 0?Ra.IDLE:Ra.EMPTY,d!==void 0?d:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=r,m.addEventListener(za.CHANGE,this.handleTileChange.bind(this)),m}getTile(e,t,i,n,s){const r=this.getProjection();if(!r||!s||zg(r,s))return this.getTileInternal(e,t,i,n,r||s);const l=[e,t,i],u=this.getKey(),d=this.getTileGridForProjection(r),m=this.getTileGridForProjection(s),f=this.getTileCoordForTileUrlFunction(l,s),v=new yB(r,d,s,m,l,f,this.getTilePixelRatio(n),this.getGutter(),(w,S,T,M)=>this.getTileInternal(w,S,T,M,r),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return v.key=u,v}getTileInternal(e,t,i,n,s){const r=this.getKey();return this.createTile_(e,t,i,n,s,r)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Ei(e);if(i){const n=Ia(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=t)}}}function ome(a,e){a.getImage().src=e}const U3=sme;class lme extends U3{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",i=e.tileGrid;let n=e.urls;n===void 0&&e.url!==void 0&&(n=uB(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:n,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=o4(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(o4(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?B1(e,i):e.replace(/\{(\w+?)\}/g,function(r,l){return l.toLowerCase()in i?i[l.toLowerCase()]:r});const n=this.tileGrid,s=this.dimensions_;return function(r,l,u){if(!r)return;const d={TileMatrix:n.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};Object.assign(d,s);let m=e;return t=="KVP"?m=B1(m,d):m=m.replace(/\{(\w+?)\}/g,function(f,v){return encodeURIComponent(d[v])}),m}}}const N1=lme,ume=[156543.033928,78271.516964,39135.758482,19567.879241,9783.9396205,4891.96981025,2445.98490513,1222.99245256,611.496226281,305.748113141,152.87405657,76.4370282852,38.2185141426,19.1092570713,9.55462853565,4.77731426782,2.38865713391,1.19432856696,.597164283478,.298582141739,.1492910708695,.07464553543475],cme=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21"];class dme{createOlLayer(e){const{name:t,imageType:i,id:n}=e,s=_B(e),r=Ei(Im),l=r.getExtent(),u=new N1({url:k_e(e),tilePixelRatio:s?2:1,layer:t,matrixSet:`GLOBAL_WEBMERCATOR_4_V3${s?"_HD":""}`,format:i,requestEncoding:"REST",projection:r,tileGrid:new V3({origin:Vd(l),extent:l,resolutions:ume,matrixIds:cme}),style:"default",crossOrigin:"anonymous"});return new Wg({source:u,properties:{"olcs.extent":hB(),label:t,id:n}})}setLayerTime(e,t,i){const n=e.get(Sw).time_layers[i],s=t.getUrls();if(s){const r=this.transformUrls(s,n);t.setUrls(r),e.set(n4,n),e.set(iB,n)}}transformUrls(e,t){return e.map(i=>i.replace(/[/][^/]*[/]{TileMatrixSet}/,`/${t}/{TileMatrixSet}`))}}const wB=new dme;class hme{createOlLayer(e,t){const i=vi(),{id:n,metadata:s,name:r}=e,l=t.get(n);if(!l)return;const u={container:i.getOlMap().getTarget(),...l},d=new z5({maplibreOptions:u,label:r,id:n,queryable_id:n,metadata:s}),m=vu(),f=d_();return d.getMapLibreMap().loaded()?m.setBaseStyle(n,d.getMapLibreMap().getStyle()):new Promise(v=>d.getMapLibreMap().once("data",v)).then(()=>m.setBaseStyle(n,d.getMapLibreMap().getStyle())),d.set(n_e,f.getDefaultMapBoxStyleUrl(f.getVectorId(e))),d}}const _me=new hme;class mme extends U3{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=xl(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,i,n){const s=Ei(i),r=this.getProjection()||s;let l=this.getTileGrid();l||(l=this.getTileGridForProjection(r));const u=kr(e,s,r),d=P1(r,s,e,t),m=l.getZForResolution(d,this.zDirection),f=l.getResolution(m),v=l.getTileCoordForCoordAndZ(u,m);if(l.getResolutions().length<=v[0])return;let w=l.getTileCoordExtent(v,this.tmpExtent_);const S=this.gutter_;S!==0&&(w=Kh(w,f*S,w));const T={QUERY_LAYERS:this.params_.LAYERS};Object.assign(T,Ew(this.params_,"GetFeatureInfo"),n);const M=Math.floor((u[0]-w[0])/f),G=Math.floor((w[3]-u[1])/f);return T[this.v13_?"I":"X"]=M,T[this.v13_?"J":"Y"]=G,this.getRequestUrl_(v,w,1,r||s,T)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const i={SERVICE:"WMS",VERSION:Tw,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const n=this.params_.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;i.LAYER=n}if(e!==void 0){const n=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;i.SCALE=e*n/s}return Object.assign(i,t),B1(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,i,n,s){const r=this.urls;if(!r)return;let l;if(r.length==1)l=r[0];else{const u=Sd(lB(e),r.length);l=r[u]}return dB(t,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(e[0]),i,n,l,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const i in this.params_)t[e++]=i+"-"+this.params_[i];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||Tw;this.v13_=Q4(e,"1.3")>=0}tileUrlFunction(e,t,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=n.getResolution(e[0]);let r=n.getTileCoordExtent(e,this.tmpExtent_);const l=this.gutter_;l!==0&&(r=Kh(r,s*l,r));const u=Object.assign({},Ew(this.params_,"GetMap"));return this.getRequestUrl_(e,r,t,i,u)}}const l4=mme;function pme(){const{initLayer:a}=vo(),{addLayers:e,setBgLayer:t}=Zi(),{findBgLayerByName:i}=zl();function n(r){if(r.layerType===fm.LAYER_OFFLINE_BG_VECTOR)return i(r.key);{const l=JSON.parse(r.layerSerialization),{id:u,label:d,opacity:m}=l;let f=r.layerType;return f===Rd.BG_WMTS&&(f=fm.LAYER_OFFLINE_BG_WMTS),{id:u,name:d,options:l,type:f,metadata:{start_opacity:m}}}}function s(r){if([fm.LAYER_OFFLINE_TILE,fm.LAYER_OFFLINE_BG_VECTOR].includes(r.layerType))try{const u=a(n(r));r.backgroundLayer?t(u):e(u)}catch{throw new Error("Invalid offline layer specification.")}}return{createOfflineLayer:s,offlineLayerToLayer:n}}let G8;function If(){const a=Zi(),e=pme(),{isOffLine:t}=Tt(_i()),{minZoom:i,maxZoom:n}=Tt(a),{removeAllLayers:s,setBgLayer:r}=a;function l(S){G8=S,console.warn("Deprecated: useOffline.initLocalforage_v3() is meant to be removed when v4 is fully operational")}function u(){return t.value}function d(S){t.value=S}function m(S){f(),v(S),w(S)}function f(){Xhe(),s(),r(null)}function v(S){const{zooms:T}=S;i.value=T[0],n.value=T[T.length-1]}function w(S){[...S.layers].reverse().forEach(T=>e.createOfflineLayer(T))}return{localforage_v3:G8,isOffLine:t,initLocalforage_v3:l,getIsOffline:u,setIsOffline:d,doRestore:m}}class IB{createOlLayer(e){const t=this.deserializeTileLayer(e.options);return new Wg(t)}createTileLoadFunction(){const e=If().localforage_v3;return(i,n)=>{const s=ase(n);e.getItem(s).then(r=>{i.getImage().src=r||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}).catch(()=>i.setState(3))}}}class gme extends IB{deserializeTileLayer(e){const t=JSON.parse(e.source);if(t.tileLoadFunction=this.createTileLoadFunction(),t.gutter=parseInt("96",10),t.tileGrid){const i=new FI(JSON.parse(t.tileGrid));t.tileGrid=i}return e.source=new l4(t),e}serializeTileLayer(){throw new Error("Method not implemented.")}}const fme=new gme;class yme extends IB{deserializeTileLayer(e){const t=JSON.parse(e.source);if(t.tileLoadFunction=this.createTileLoadFunction(),t.tileGrid){const i=new V3(JSON.parse(t.tileGrid));t.tileGrid=i}return e.source=new N1(t),e}serializeTileLayer(){throw new Error("Method not implemented.")}}const bme=new yme;class vme{createOlLayer(e){let t;switch(this.getOfflineLayerSourceType(e)){case Rd.WMTS:t=bme.createOlLayer(e);break;case Rd.TILE_WMS:t=fme.createOlLayer(e);break;default:throw new Error(`Unrecognized offline layer type: ${e.type}`)}return t}getOfflineLayerSourceType(e){return e.options.sourceType}}const xme=new vme;function wme(){return new Vi({image:Ime})}const Ime=new to({radius:4,fill:new wn({color:"white"}),stroke:new mn({color:"white",width:1})}),Cme=1002,Sme="featurePositionLayer";class Ame extends eo{constructor(t){const i=new Qo({features:[],useSpatialIndex:!1});super({...t,source:i});zt(this,"geoMarker")}moveGeoMarker(t,i){var n,s,r;(n=this.geoMarker)!=null&&n.getGeometry()||this.createGeoMarker(),(r=(s=this.geoMarker)==null?void 0:s.getGeometry())==null||r.setCoordinates([t,i])}createGeoMarker(){var t,i;this.geoMarker=new kn({geometry:new Qn([0,0])}),(t=this.getSource())==null||t.clear(),(i=this.getSource())==null||i.addFeature(this.geoMarker)}removeGeoMarker(){var t;(t=this.getSource())==null||t.clear(),this.geoMarker=void 0}}class Tme{createOlLayer(){const e=wme(),t=new Ame({declutter:!0,zIndex:Cme,style:e,updateWhileAnimating:!0,updateWhileInteracting:!0});return t.set("cyLayerType",Sme),t}}const Eme=new Tme;class Mme{createOlLayer(e,t){let i;if(t&&(i=_me.createOlLayer(e,t)),!i)switch(e.type){case"position":return this.createOlLayerFeaturePosition(e);case Rd.WMS:i=mB.createOlLayer(e);break;case Rd.WMTS:case Rd.BG_WMTS:i=wB.createOlLayer(e);break;case fm.LAYER_OFFLINE_TILE:case fm.LAYER_OFFLINE_BG_VECTOR:i=xme.createOlLayer(e);break;default:throw new Error(`Unrecognized layer type: ${e.type}`)}return this.setOlProps(e,i),i}createOlLayerFeaturePosition(e){const t=Eme.createOlLayer();return t.set(Cw,e.id),t.set(n4,e.name),t}setOlProps(e,t){t.set(Cw,e.id),t.set(n4,e.name),t.set(iB,e.name),t.set(Sw,e.metadata),t.set(t_e,e.id),t.set(a_e,vo().getLayerCurrentTime(e)),t.set(i_e,e.time),t.setOpacity(e.opacity)}}const rA=new Mme;class Lme{setLayerTime(e,t){const i=e.getSource();i instanceof Mw&&mB.setLayerTime(i,t),i instanceof N1&&wB.setLayerTime(e,i,t)}}const Rme=new Lme,h2=-200;function H3(){function a(S,T){if(!T)return;const M=m(T);S.addLayer(M)}function e(S,T){if(!T)return;const M=rA.createOlLayer(T);return S.addLayer(M),M}function t(S,T){return S.getLayers().getArray().find(M=>M.get("id")===T)}function i(S,T){const M=t(S,T);M&&S.removeLayer(M)}function n(S,T){const M=S.getLayers().getArray();T.forEach((G,P)=>{const F=M.find(N=>N.get("id")===G.id);F==null||F.setZIndex(P+1)})}function s(S,T,M){const G=S.getLayers().getArray().find(P=>P.get("id")===T);G&&G.setOpacity(M)}function r(S,T){const M=vo(),G=t(S,T.id),P=M.getLayerCurrentTime(T);P&&G&&Rme.setLayerTime(G,P)}function l(S){wg.delete(S)}function u(S){return wg.has(S.id)}function d(S,T){wg.set(S,T)}function m(S){const T=S.id,M=wg.get(T);if(M)return M;{const G=rA.createOlLayer(S);return d(T,G),G}}function f(S){return S&&wg.get(S.id)||null}function v(S,T){const G=S.getLayers().getArray().find(P=>P.getZIndex()===h2);G&&T(G)}function w(S,T,M){var V;const G=S.getLayers(),P=G.getArray().findIndex(K=>K.getZIndex()===h2),F=(V=G.getArray()[P])==null?void 0:V.get("id");let N;T&&(u(T)?N=f(T):(N=rA.createOlLayer(T,M),d(T.id,N))),P>=0?N?(N.setZIndex(h2),G.setAt(P,N)):G.removeAt(P):N&&(N.setZIndex(h2),S.addLayer(N)),F&&F!==(T==null?void 0:T.id)&&aB.restore(!0)}return{addLayer:a,addFeatureLayer:e,findLayer:t,removeLayer:i,removeFromCache:l,reorderLayers:n,setLayerOpacity:s,setLayerTime:r,getLayerFromCache:f,setBgLayer:w,applyOnBgLayer:v}}const CB=Co("profile-position",()=>{const a=Fe(void 0),e=Fe(void 0);function t(i,n){a.value=i,e.value=n}return{x:a,y:e,setPosition:t}},{}),SB="lux-feat-position";let Po;function kme(a,e=!0){const t=H3(),i=CB(),n=wo(),{drawStateActive:s,editStateActive:r}=Tt(n),{x:l,y:u}=Tt(i),d=Di(a),m=Di(void 0),f=Fe(!0),v=new zr([0,0]),w=Fe(!0),S=JO(K=>V(K),15);let T,M;In(()=>{T=vi().getOlMap(),G(),F()}),es(()=>N()),Ut(()=>VV(e),K=>{w.value=K??!0,K||Po==null||Po.removeGeoMarker()}),Ut(d,K=>{K&&P(K)}),Ut([l,u],([K,te])=>{w.value&&!s.value&&K&&te&&f.value?Po==null||Po.moveGeoMarker(K,te):Po==null||Po.removeGeoMarker()});function G(){if(Po)return;const K={id:SB,type:"position"};Po=t.addFeatureLayer(T,K)}function P(K){const te=K==null?void 0:K.map(J=>{const ne=kr([J.x,J.y],Kl,T.getView().getProjection());return new Qn(ne).getCoordinates().concat(J.dist)});v.setCoordinates(te)}function F(){M===void 0&&(M=ba(T,"pointermove",S))}function N(){M&&(_n(M),M=void 0,Po==null||Po.removeGeoMarker())}function V(K){if(K.dragging||s.value||!w.value)return;let te,J;const ne=T.getEventCoordinate(K.originalEvent),se=v.getClosestPoint(ne),de=se[0]-ne[0],_e=se[1]-ne[1],Se=de*de+_e*_e,ce=T.getView().getResolution();Se/(ce*ce)<64?(m.value=se[2],f.value=r.value!=="editLine",te=se[0],J=se[1]):(m.value=-1,f.value=!0),te!==void 0&&J!==void 0&&i.setPosition(te,J)}return{profileData:d,highlightDistance:m}}const Lw=function(a,e){let t=0,i=[];a.getType()==="Polygon"?i=a.getCoordinates()[0]:a.getType()==="LineString"&&(i=a.getCoordinates());for(let n=0,s=i.length-1;n<s;++n){const r=kr(i[n],e,Gd),l=kr(i[n+1],e,Gd);t+=Tx(r,l)}return t},AB=function(a){return Math.abs(AW(a))},Wme=function(a,e){const t=Rw(a,e);return 2*Math.PI*t},Gme=function(a,e){return Math.PI*Math.pow(Rw(a,e),2)},Rw=function(a,e){const t=a.getLastCoordinate(),i=a.getCenter();return i!==null&&t!==null?Lw(new zr([i,t]),e):0},TB=function(a,e,t){const i=a.getCenter(),n=t.getView().getProjection(),s=t.getView().getResolution()||0,r=h1(n,s,i),l=s/r;e=e/Lm.m*l,a.setRadius(e)};function EB(a){const e=a.getGeometry();return a.featureType==="drawnCircle"&&(e==null?void 0:e.getType())==="Circle"&&a.setGeometry(jW(e,64)),a}function Ome(a){const e=vi().getOlMap(),t=a.getGeometry();if(a.featureType==="drawnCircle"&&(t==null?void 0:t.getType())==="Polygon"){const i=t.getExtent(),n=[(i[0]+i[2])/2,(i[1]+i[3])/2],s=t.getCoordinates()[0];let r=0;s.forEach(u=>{const d=Tx(cf(n),cf(u));d>r&&(r=d)});const l=new mP(n);TB(l,r,e),a.setGeometry(l)}return a}const rr={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},Pme={ERROR:"error"};class Bme extends Il{constructor(e){super(Pme.ERROR),this.code=e.code,this.message=e.message}}class Nme extends Yl{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=TW,this.watchId_=void 0,this.addChangeListener(rr.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(rr.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=Ef(Ei("EPSG:4326"),e),this.position_&&this.set(rr.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(rr.ACCURACY,t.accuracy),this.set(rr.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(rr.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(rr.HEADING,t.heading===null?void 0:Js(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const i=this.transform_(this.position_);this.set(rr.POSITION,i.slice()),this.set(rr.SPEED,t.speed===null?void 0:t.speed);const n=lX(this.position_,t.accuracy);n.applyTransform(this.transform_),this.set(rr.ACCURACY_GEOMETRY,n),this.changed()}positionError_(e){this.dispatchEvent(new Bme(e))}getAccuracy(){return this.get(rr.ACCURACY)}getAccuracyGeometry(){return this.get(rr.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(rr.ALTITUDE)}getAltitudeAccuracy(){return this.get(rr.ALTITUDE_ACCURACY)}getHeading(){return this.get(rr.HEADING)}getPosition(){return this.get(rr.POSITION)}getProjection(){return this.get(rr.PROJECTION)}getSpeed(){return this.get(rr.SPEED)}getTracking(){return this.get(rr.TRACKING)}getTrackingOptions(){return this.get(rr.TRACKING_OPTIONS)}setProjection(e){this.set(rr.PROJECTION,Ei(e))}setTracking(e){this.set(rr.TRACKING,e)}setTrackingOptions(e){this.set(rr.TRACKING_OPTIONS,e)}}const Fme=Nme;function Dme(a,e){const t=a.canvas;e=e||{};const i=e.pixelRatio||RW,n=e.size;n&&(t.width=n[0]*i,t.height=n[1]*i,t.style.width=n[0]+"px",t.style.height=n[1]+"px");const s=[0,0,t.width,t.height],r=F2($o(),i,i);return new oP(a,i,s,r,0)}function _2(a,e){return Mr(a.inversePixelTransform,e.slice(0))}const Fs={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Vme extends Yl{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+vX,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Fs.ELEMENT,this.handleElementChanged),this.addChangeListener(Fs.MAP,this.handleMapChanged),this.addChangeListener(Fs.OFFSET,this.handleOffsetChanged),this.addChangeListener(Fs.POSITION,this.handlePositionChanged),this.addChangeListener(Fs.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Fs.ELEMENT)}getId(){return this.id}getMap(){return this.get(Fs.MAP)||null}getOffset(){return this.get(Fs.OFFSET)}getPosition(){return this.get(Fs.POSITION)}getPositioning(){return this.get(Fs.POSITIONING)}handleElementChanged(){$W(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),_n(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=ba(e,md.POSTRENDER,this.render,this),this.updatePixelPosition();const i=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Fs.ELEMENT,e)}setMap(e){this.set(Fs.MAP,e)}setOffset(e){this.set(Fs.OFFSET,e)}setPosition(e){this.set(Fs.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Fs.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),s=this.getRect(n,[wX(n),IX(n)]);e=e||{};const r=e.margin===void 0?20:e.margin;if(!lc(i,s)){const l=s[0]-i[0],u=i[2]-s[2],d=s[1]-i[1],m=i[3]-s[3],f=[0,0];if(l<0?f[0]=l-r:u<0&&(f[0]=Math.abs(u)+r),d<0?f[1]=d-r:m<0&&(f[1]=Math.abs(m)+r),f[0]!==0||f[1]!==0){const v=t.getView().getCenterInternal(),w=t.getPixelFromCoordinateInternal(v);if(!w)return;const S=[w[0]+f[0],w[1]+f[1]],T=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(S),duration:T.duration,easing:T.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+t[0],s+t[1]]}setPositioning(e){this.set(Fs.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(e,t){const i=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const r=Math.round(e[0]+n[0])+"px",l=Math.round(e[1]+n[1])+"px";let u="0%",d="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?u="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(u="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?d="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(d="-50%");const m=`translate(${u}, ${d}) translate(${r}, ${l})`;this.rendered.transform_!=m&&(this.rendered.transform_=m,i.transform=m)}getOptions(){return this.options}}const X3=Vme,Zme="https://migration.geoportail.lu/profile.json";async function zme(a,e,t="dhm",i=100){const n={geom:a,nbPoints:i+"",layers:t,id:e+""},s=await u_(Zme,n,"POST");if(!s.ok)throw new Error("Error while trying to get profile");return await s.json()}function Ume(a,e=1){if(!/^#[0-9A-Fa-f]{6}$/.test(a))throw new Error(`Invalid hex color string: ${a}`);const i=parseInt(a.slice(1,3),16),n=parseInt(a.slice(3,5),16),s=parseInt(a.slice(5,7),16);return[i,n,s,e]}function MB(a){const[e,t,i]=a;if(e!==(e&255)||t!==(t&255)||i!==(i&255))throw Error(`"(${e},${t},${i})" is not a valid RGB color`);const n=sA(e.toString(16)),s=sA(t.toString(16)),r=sA(i.toString(16));return`#${n}${s}${r}`}function sA(a){return a.length===1?`0${a}`:a}const Hme="https://migration.geoportail.lu/mymaps",Xme="https://migration.geoportail.lu/mymaps/symbol",qme=Hme+"/getarrow";class Vf extends kn{constructor(t){var e=(...args)=>{super(...args);zt(this,"id");zt(this,"label");zt(this,"description");zt(this,"display_order");zt(this,"editable");zt(this,"selected");zt(this,"map_id");zt(this,"saving");zt(this,"featureType");zt(this,"_featureStyle");zt(this,"map",vi().getOlMap());zt(this,"profileData")};t?(e(t.getGeometry()),this.label=t.label,this.featureType=t.featureType,this.map_id=t.map_id,this.description=t.description,this.display_order=t.display_order,this.editable=t.editable,this.selected=t.selected,this._featureStyle=t.featureStyle,this.id=t.id,this.saving=t.saving,this.setProperties(t.getProperties())):e()}get featureStyle(){return this._featureStyle}set featureStyle(t){this._featureStyle=t,this.changed()}fit(){var n;const t=this.map.getSize(),i=(n=this.getGeometry())==null?void 0:n.getExtent();this.map.getView().fit(i,{size:t})}async getProfile(){const t=this.getGeometry();if(!((t==null?void 0:t.getType())!=="LineString"&&(t==null?void 0:t.getType())!=="MultiLineString")){if(this.profileData===void 0){const i={dataProjection:Kl,featureProjection:Im},n=new Bd().writeGeometry(this.getGeometry(),i),s=await zme(n,this.id);let r=0,l=0,u=0,d;this.profileData=s.profile.map(m=>{const f={...m,cumulativeElevation:0,elevationGain:0,elevationLoss:0},v=f.values.dhm;if(d!==void 0){const w=v-d;u=u+w,w>0?r=r+w:l=l+w}return f.cumulativeElevation=u,f.elevationGain=r,f.elevationLoss=l,d=v,f})}return this.profileData}}toProperties(){return{angle:this.featureStyle.angle,color:this.featureStyle.color,description:this.description,stroke:this.featureStyle.stroke,isLabel:this.featureType==="drawnLabel",linestyle:this.featureStyle.linestyle,name:this.label,opacity:this.featureStyle.opacity,showOrientation:this.featureStyle.showOrientation,shape:this.featureStyle.shape,size:this.featureStyle.size,isCircle:this.featureType==="drawnCircle",symbolId:this.featureStyle.symbolId,symboltype:this.featureStyle.symboltype}}getStyleFunction(){const t=[],i=new Vi({image:new sc({radius:6,points:4,angle:Math.PI/4,fill:new wn({color:[255,255,255,.5]}),stroke:new mn({color:[0,0,0,1]})}),geometry:function(l){const u=l.getGeometry();let d;return u instanceof zr?(d=u.getCoordinates(),new Vm(d)):u instanceof Au?(d=u.getCoordinates()[0],new Vm(d)):u}}),n=new wn,s=qme,r=this.map;return function(l,u){var N,V;u===void 0&&(u=l,l=this),t.length=0,l.editable&&l.selected&&t.push(i);let d=l.display_order;d===void 0&&(d=0);const m=l.featureStyle.color||"#FF0000",f=Ume(m,1);let v=l.featureStyle.opacity;v===void 0&&(v=1);const w=f.slice();if(w[3]=v,n.setColor(w),((N=l.getGeometry())==null?void 0:N.getType())==="LineString"&&l.featureStyle.showOrientation){let K,te,J=l.featureStyle.arrowcolor;J==null&&(J=m),(V=l.getGeometry())==null||V.forEachSegment(function(ne,se){const de=new Qn([(ne[0]+se[0])/2,(ne[1]+se[1])/2]),_e=se[0]-ne[0],Se=se[1]-ne[1];if(K!=null){const ce=r.getPixelFromCoordinate(de.getCoordinates()),Ie=r.getPixelFromCoordinate(K.getCoordinates()),he=Ie[0]-ce[0],we=Ie[1]-ce[1];te=Math.sqrt(he*he+we*we)}if(!K||te>600){const ce=s,Ie=Math.PI/2-Math.atan2(Se,_e);t.push(new Vi({geometry:de,zIndex:d,image:new jh({color:J,rotation:Ie,src:ce})})),K=de}})}let S;if(l.featureStyle.linestyle)switch(l.featureStyle.linestyle){case"dashed":S=[10,10];break;case"dotted":S=[1,6];break}let T,M=l.featureStyle.stroke;M>0&&(!l.editable&&l.selected&&(M=M+3),T=new mn({color:f,width:M,lineDash:S}));let G=l.featureStyle.size;!l.editable&&l.selected&&(G=G+3);const P={fill:n,stroke:new mn({color:f,width:G/7}),radius:G};let F=null;if(l.featureStyle.symbolId){const K={...P,src:Xme+"/"+l.featureStyle.symbolId+"?scale="+G,scale:1,rotation:l.featureStyle.angle};F=new jh(K)}else{const K=l.featureStyle.shape;K==="circle"?F=new to(P):K==="square"?(Object.assign(P,{points:4,angle:Math.PI/4,rotation:l.featureStyle.angle}),F=new sc(P)):K==="triangle"?(Object.assign(P,{points:3,angle:0,rotation:l.featureStyle.angle}),F=new sc(P)):K==="star"?(Object.assign(P,{points:5,angle:Math.PI/4,rotation:l.featureStyle.angle,radius2:G}),F=new sc(P)):K==="cross"&&(Object.assign(P,{points:4,angle:0,rotation:l.featureStyle.angle,radius2:0}),F=new sc(P))}return l.featureType==="drawnLabel"?[new Vi({text:new kf({text:l.label,textAlign:"left",font:"normal "+G+"px Sans-serif",rotation:l.featureStyle.angle,fill:new wn({color:f}),stroke:new mn({color:[255,255,255],width:2})})})]:(F&&t.push(new Vi({image:F,fill:n,stroke:T,zIndex:d})),t)}}}class DI{constructor(e){zt(this,"encodeOptions");this.encodeOptions={dataProjection:Gd,featureProjection:e.getView().getProjection()}}download(e,t,i="txt",n="text/plain"){const s=`${q9(e)}.${q9(i)}`;eP(s,t,n)}exploseFeatures(e){const t=[];return(Array.isArray(e)?e:[e]).forEach(i=>{var n;switch((n=i.getGeometry())==null?void 0:n.getType()){case"GeometryCollection":{i.getGeometry().getGeometriesArray().forEach(r=>t.push(this.cloneFeatureWithGeom(i,r)));break}case"MultiLineString":{i.getGeometry().getLineStrings().forEach(r=>t.push(this.cloneFeatureWithGeom(i,r)));break}case"Circle":{const s=new Vf(i);t.push(EB(s));break}default:t.push(i);break}}),t}cloneFeatureWithGeom(e,t){const i=e.clone();return i.setGeometry(t),i}}class Yme extends I3{constructor(){super(),this.xmlSerializer_=Ine()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const i=_c(e);return this.readFeatureFromDocument(i,t)}return hc(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const i=this.readFeaturesFromDocument(e,t);return i.length>0?i[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const i=_c(e);return this.readFeaturesFromDocument(i,t)}return hc(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const i=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&rn(i,this.readFeaturesFromNode(n,t));return i}readFeaturesFromNode(e,t){return ka()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const i=_c(e);return this.readGeometryFromDocument(i,t)}return hc(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=_c(e);return this.readProjectionFromDocument(t)}return hc(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const i=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const i=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const i=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeGeometryNode(e,t){return null}}const LB=Yme,Hn=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Kme="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",jme={rte:RB,trk:kB,wpt:WB},$me=Ct(Hn,{rte:qo(RB),trk:qo(kB),wpt:qo(WB)}),Jme=Ct(Hn,{text:Xe(na,"linkText"),type:Xe(na,"linkType")}),Qme=Ct(Hn,{name:Xe(na),email:Ape,link:hb}),epe=Ct(Hn,{name:Xe(na),desc:Xe(na),author:Xe(Ipe),copyright:Xe(Cpe),link:hb,time:Xe(WI),keywords:Xe(na),bounds:Spe,extensions:VI}),tpe=Ct(Hn,{year:Xe(bl),license:Xe(na)}),ape=Ct(Hn,{rte:Nt(Lpe),trk:Nt(Rpe),wpt:Nt(Wpe)});let ipe=class extends LB{constructor(e){super(),e=e||{},this.dataProjection=Ei("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,i=e.length;t<i;++t){const n=e[t];if(this.readExtensions_){const s=n.get("extensionsNode_")||null;this.readExtensions_(n,s)}n.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(_c(e)):hc(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const i=this.readMetadataFromNode(t);if(i)return i}return null}readMetadataFromNode(e){if(!Hn.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Hn.includes(t.namespaceURI)&&t.localName==="metadata")return va({},epe,t,[]);return null}readFeatureFromNode(e,t){if(!Hn.includes(e.namespaceURI))return null;const i=jme[e.localName];if(!i)return null;const n=i(e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_([n]),n):null}readFeaturesFromNode(e,t){if(!Hn.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const i=va([],$me,e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_(i),i):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const i=Pd("http://www.topografix.com/GPX/1/1","gpx"),n="http://www.w3.org/2000/xmlns/";return i.setAttributeNS(n,"xmlns:xsi",Jx),i.setAttributeNS(Jx,"xsi:schemaLocation",Kme),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Wn({node:i},ape,wpe,e,[t]),i}};const npe=Ct(Hn,{name:Xe(na),cmt:Xe(na),desc:Xe(na),src:Xe(na),link:hb,number:Xe(bl),extensions:VI,type:Xe(na),rtept:Tpe}),rpe=Ct(Hn,{ele:Xe(Yi),time:Xe(WI)}),spe=Ct(Hn,{name:Xe(na),cmt:Xe(na),desc:Xe(na),src:Xe(na),link:hb,number:Xe(bl),type:Xe(na),extensions:VI,trkseg:Mpe}),ope=Ct(Hn,{trkpt:Epe}),lpe=Ct(Hn,{ele:Xe(Yi),time:Xe(WI)}),upe=Ct(Hn,{ele:Xe(Yi),time:Xe(WI),magvar:Xe(Yi),geoidheight:Xe(Yi),name:Xe(na),cmt:Xe(na),desc:Xe(na),src:Xe(na),link:hb,sym:Xe(na),type:Xe(na),fix:Xe(na),sat:Xe(bl),hdop:Xe(Yi),vdop:Xe(Yi),pdop:Xe(Yi),ageofdgpsdata:Xe(Yi),dgpsid:Xe(bl),extensions:VI}),cpe=["text","type"],dpe=Ct(Hn,{text:Nt(ji),type:Nt(ji)}),hpe=Ct(Hn,["name","cmt","desc","src","link","number","type","rtept"]),_pe=Ct(Hn,{name:Nt(ji),cmt:Nt(ji),desc:Nt(ji),src:Nt(ji),link:Nt(K3),number:Nt(Qx),type:Nt(ji),rtept:VO(Nt(j3))}),mpe=Ct(Hn,["ele","time"]),ppe=Ct(Hn,["name","cmt","desc","src","link","number","type","trkseg"]),gpe=Ct(Hn,{name:Nt(ji),cmt:Nt(ji),desc:Nt(ji),src:Nt(ji),link:Nt(K3),number:Nt(Qx),type:Nt(ji),trkseg:VO(Nt(kpe))}),fpe=Lu("trkpt"),ype=Ct(Hn,{trkpt:Nt(j3)}),bpe=Ct(Hn,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),vpe=Ct(Hn,{ele:Nt(Do),time:Nt(Lne),magvar:Nt(Do),geoidheight:Nt(Do),name:Nt(ji),cmt:Nt(ji),desc:Nt(ji),src:Nt(ji),link:Nt(K3),sym:Nt(ji),type:Nt(ji),fix:Nt(ji),sat:Nt(Qx),hdop:Nt(Do),vdop:Nt(Do),pdop:Nt(Do),ageofdgpsdata:Nt(Do),dgpsid:Nt(Qx)}),xpe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function wpe(a,e,t){const i=a.getGeometry();if(i){const n=xpe[i.getType()];if(n){const s=e[e.length-1].node;return Pd(s.namespaceURI,n)}}}function q3(a,e,t,i){return a.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in i?(a.push(i.ele),delete i.ele,e.hasZ=!0):a.push(0),"time"in i?(a.push(i.time),delete i.time,e.hasM=!0):a.push(0),a}function Y3(a,e,t){let i="XY",n=2;if(a.hasZ&&a.hasM?(i="XYZM",n=4):a.hasZ?(i="XYZ",n=3):a.hasM&&(i="XYM",n=3),n!==4){for(let s=0,r=e.length/4;s<r;s++)e[s*n]=e[s*4],e[s*n+1]=e[s*4+1],a.hasZ&&(e[s*n+2]=e[s*4+2]),a.hasM&&(e[s*n+2]=e[s*4+3]);if(e.length=e.length/4*n,t)for(let s=0,r=t.length;s<r;s++)t[s]=t[s]/4*n}return i}function Ipe(a,e){const t=va({},Qme,a,e);if(t)return t}function Cpe(a,e){const t=va({},tpe,a,e);if(t){const i=a.getAttribute("author");return i!==null&&(t.author=i),t}}function Spe(a,e){const t=e[e.length-1],i=a.getAttribute("minlat"),n=a.getAttribute("minlon"),s=a.getAttribute("maxlat"),r=a.getAttribute("maxlon");n!==null&&i!==null&&r!==null&&s!==null&&(t.bounds=[[parseFloat(n),parseFloat(i)],[parseFloat(r),parseFloat(s)]])}function Ape(a,e){const t=e[e.length-1],i=a.getAttribute("id"),n=a.getAttribute("domain");i!==null&&n!==null&&(t.email=`${i}@${n}`)}function hb(a,e){const t=e[e.length-1],i=a.getAttribute("href");i!==null&&(t.link=i),l_(Jme,a,e)}function VI(a,e){const t=e[e.length-1];t.extensionsNode_=a}function Tpe(a,e){const t=va({},rpe,a,e);if(t){const i=e[e.length-1],n=i.flatCoordinates,s=i.layoutOptions;q3(n,s,a,t)}}function Epe(a,e){const t=va({},lpe,a,e);if(t){const i=e[e.length-1],n=i.flatCoordinates,s=i.layoutOptions;q3(n,s,a,t)}}function Mpe(a,e){const t=e[e.length-1];l_(ope,a,e);const i=t.flatCoordinates;t.ends.push(i.length)}function RB(a,e){const t=e[0],i=va({flatCoordinates:[],layoutOptions:{}},npe,a,e);if(!i)return;const n=i.flatCoordinates;delete i.flatCoordinates;const s=i.layoutOptions;delete i.layoutOptions;const r=Y3(s,n),l=new zr(n,r);jl(l,!1,t);const u=new kn(l);return u.setProperties(i,!0),u}function kB(a,e){const t=e[0],i=va({flatCoordinates:[],ends:[],layoutOptions:{}},spe,a,e);if(!i)return;const n=i.flatCoordinates;delete i.flatCoordinates;const s=i.ends;delete i.ends;const r=i.layoutOptions;delete i.layoutOptions;const l=Y3(r,n,s),u=new c_(n,l,s);jl(u,!1,t);const d=new kn(u);return d.setProperties(i,!0),d}function WB(a,e){const t=e[0],i=va({},upe,a,e);if(!i)return;const n={},s=q3([],n,a,i),r=Y3(n,s),l=new Qn(s,r);jl(l,!1,t);const u=new kn(l);return u.setProperties(i,!0),u}function K3(a,e,t){a.setAttribute("href",e);const n=t[t.length-1].properties,s=[n.linkText,n.linkType];Wn({node:a},dpe,Qs,s,t,cpe)}function j3(a,e,t){const i=t[t.length-1],s=i.node.namespaceURI,r=i.properties;switch(a.setAttributeNS(null,"lat",String(e[1])),a.setAttributeNS(null,"lon",String(e[0])),i.geometryLayout){case"XYZM":e[3]!==0&&(r.time=e[3]);case"XYZ":e[2]!==0&&(r.ele=e[2]);break;case"XYM":e[2]!==0&&(r.time=e[2]);break}const u=a.nodeName=="rtept"?mpe[s]:bpe[s],d=Jo(r,u);Wn({node:a,properties:r},vpe,Qs,d,t,u)}function Lpe(a,e,t){const i=t[0],n=e.getProperties(),s={node:a};s.properties=n;const r=e.getGeometry();if(r.getType()=="LineString"){const m=jl(r,!0,i);s.geometryLayout=m.getLayout(),n.rtept=m.getCoordinates()}const l=t[t.length-1].node,u=hpe[l.namespaceURI],d=Jo(n,u);Wn(s,_pe,Qs,d,t,u)}function Rpe(a,e,t){const i=t[0],n=e.getProperties(),s={node:a};s.properties=n;const r=e.getGeometry();if(r.getType()=="MultiLineString"){const m=jl(r,!0,i);n.trkseg=m.getLineStrings()}const l=t[t.length-1].node,u=ppe[l.namespaceURI],d=Jo(n,u);Wn(s,gpe,Qs,d,t,u)}function kpe(a,e,t){const i={node:a};i.geometryLayout=e.getLayout(),i.properties={},Wn(i,ype,fpe,e.getCoordinates(),t)}function Wpe(a,e,t){const i=t[0],n=t[t.length-1];n.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const r=jl(s,!0,i);n.geometryLayout=r.getLayout(),j3(a,r.getCoordinates(),t)}}const Gpe=ipe;class Ope extends Gpe{writeFeaturesNode(e,t){const i=super.writeFeaturesNode(e,t);if("metadata"in t&&"name"in t.metadata){const n="http://www.topografix.com/GPX/1/1",s=Pd(n,"metadata"),r=Pd(n,"name");ji(r,t.metadata.name),s.appendChild(r),i.childNodes.length>0?i.insertBefore(s,i.childNodes[0]):i.appendChild(s)}return i}}class Ppe extends DI{export(e,t,i=!1){const n=this.prepareFeatures(e,i),s=this.generateContent(n,t);this.download(t,s,"gpx","application/gpx")}prepareFeatures(e,t=!1){e.forEach(n=>{const s=n.getProperties();"feature_name"in s&&n.set("name",s.feature_name,!0)});let i=this.exploseFeatures(e);return t?i=this.changeLineToMultiline(i):i=this.changeMultilineToLine(i),i=this.changePolygonToLine(i),i}generateContent(e,t){return new Ope().writeFeatures(this.orderFeaturesForGpx(e),{...this.encodeOptions,metadata:{name:t}})}changePolygonToLine(e){return e.map(t=>{var n;const i=t.getGeometry();if((i==null?void 0:i.getType())==="Polygon"){const r=((n=t.getGeometry().getLinearRing(0))==null?void 0:n.getCoordinates())||[],l=new zr(r);return this.cloneFeatureWithGeom(t,l)}return t})}changeMultilineToLine(e){return e.reduce((t,i)=>{const n=i.getGeometry();return(n==null?void 0:n.getType())==="MultiLineString"?n.getLineStrings().forEach(r=>t.push(this.cloneFeatureWithGeom(i,r))):t.push(i),t},[])}changeLineToMultiline(e){return e.map(t=>{const i=t.getGeometry();return(i==null?void 0:i.getType())==="LineString"?this.cloneFeatureWithGeom(t,new c_([i.getCoordinates()])):t})}orderFeaturesForGpx(e){const t=[],i=[],n=[];return e.forEach(s=>{var l;switch((l=s.getGeometry())==null?void 0:l.getType()){case"Point":t.push(s);break;case"LineString":i.push(s);break;default:n.push(s);break}}),[...t,...i,...n]}}const qd=["http://www.google.com/kml/ext/2.2"],wa=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Bpe="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",O8={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},Npe=Ct(wa,{ExtendedData:YB,Region:KB,MultiGeometry:Xe(HB,"geometry"),LineString:Xe(zB,"geometry"),LinearRing:Xe(UB,"geometry"),Point:Xe(XB,"geometry"),Polygon:Xe(qB,"geometry"),Style:Xe(Q3),StyleMap:xge,address:Xe(na),description:Xe(na),name:Xe(na),open:Xe(Qh),phoneNumber:Xe(na),styleUrl:Xe(NB),visibility:Xe(Qh)},Ct(qd,{MultiTrack:Xe(lge,"geometry"),Track:Xe(ZB,"geometry")})),Fpe=Ct(wa,{ExtendedData:YB,Region:KB,Link:Wge,address:Xe(na),description:Xe(na),name:Xe(na),open:Xe(Qh),phoneNumber:Xe(na),visibility:Xe(Qh)}),Dpe=Ct(wa,{href:Xe(BB)}),Vpe=Ct(wa,{Altitude:Xe(Yi),Longitude:Xe(Yi),Latitude:Xe(Yi),Tilt:Xe(Yi),AltitudeMode:Xe(na),Heading:Xe(Yi),Roll:Xe(Yi)}),GB=Ct(wa,{LatLonAltBox:Age,Lod:Ege}),Zpe=Ct(wa,["Document","Placemark"]),zpe=Ct(wa,{Document:Nt(Vge),Placemark:Nt(JB)});let Qg,Q2=null,u4,z0,U0,H0,kw,c4=null,$3,d4=null,h4,ym=null,P8=null,_4=null;function Ww(a){return 32/Math.min(a[0],a[1])}function Upe(){Qg=[255,255,255,1],Q2=new wn({color:Qg}),u4=[20,2],z0="pixels",U0="pixels",H0=[64,64],kw="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",c4=new jh({anchor:u4,anchorOrigin:"bottom-left",anchorXUnits:z0,anchorYUnits:U0,crossOrigin:"anonymous",rotation:0,scale:Ww(H0),size:H0,src:kw}),$3="NO_IMAGE",d4=new mn({color:Qg,width:1}),h4=new mn({color:[51,51,51,1],width:2}),ym=new kf({font:"bold 16px Helvetica",fill:Q2,stroke:h4,scale:.8}),P8=new Vi({fill:Q2,image:c4,text:ym,stroke:d4,zIndex:0}),_4=[P8]}let m2;function Hpe(a){return a}class Xpe extends LB{constructor(e){super(),e=e||{},_4||Upe(),this.dataProjection=Ei("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:_4,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:Hpe,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const i=Ct(wa,{Document:N9(this.readDocumentOrFolder_,this),Folder:N9(this.readDocumentOrFolder_,this),Placemark:qo(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),n=va([],i,e,t,this);if(n)return n}readPlacemark_(e,t){const i=va({geometry:null},Npe,e,t,this);if(!i)return;const n=new kn,s=e.getAttribute("id");s!==null&&n.setId(s);const r=t[0],l=i.geometry;if(l&&jl(l,!1,r),n.setGeometry(l),delete i.geometry,this.extractStyles_){const u=i.Style,d=i.styleUrl,m=Ype(u,d,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(m)}return delete i.Style,n.setProperties(i,!0),n}readSharedStyle_(e,t){const i=e.getAttribute("id");if(i!==null){const n=Q3.call(this,e,t);if(n){let s,r=e.baseURI;(!r||r=="about:blank")&&(r=window.location.href),r?s=new URL("#"+i,r).href:s="#"+i,this.sharedStyles_[s]=n}}}readSharedStyleMap_(e,t){const i=e.getAttribute("id");if(i===null)return;const n=DB.call(this,e,t);if(!n)return;let s,r=e.baseURI;(!r||r=="about:blank")&&(r=window.location.href),r?s=new URL("#"+i,r).href:s="#"+i,this.sharedStyles_[s]=n}readFeatureFromNode(e,t){if(!wa.includes(e.namespaceURI))return null;const i=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return i||null}readFeaturesFromNode(e,t){if(!wa.includes(e.namespaceURI))return[];let i;const n=e.localName;if(n=="Document"||n=="Folder")return i=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),i||[];if(n=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(n=="kml"){i=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const r=this.readFeaturesFromNode(s,t);r&&rn(i,r)}return i}return[]}readName(e){if(e){if(typeof e=="string"){const t=_c(e);return this.readNameFromDocument(t)}return hc(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const i=this.readNameFromNode(t);if(i)return i}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(wa.includes(t.namespaceURI)&&t.localName=="name")return na(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const i=t.localName;if(wa.includes(t.namespaceURI)&&(i=="Document"||i=="Folder"||i=="Placemark"||i=="kml")){const n=this.readNameFromNode(t);if(n)return n}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const i=_c(e);rn(t,this.readNetworkLinksFromDocument(i))}else hc(e)?rn(t,this.readNetworkLinksFromDocument(e)):rn(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&rn(t,this.readNetworkLinksFromNode(i));return t}readNetworkLinksFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(wa.includes(i.namespaceURI)&&i.localName=="NetworkLink"){const n=va({},Fpe,i,[]);t.push(n)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const n=i.localName;wa.includes(i.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&rn(t,this.readNetworkLinksFromNode(i))}return t}readRegion(e){const t=[];if(typeof e=="string"){const i=_c(e);rn(t,this.readRegionFromDocument(i))}else hc(e)?rn(t,this.readRegionFromDocument(e)):rn(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&rn(t,this.readRegionFromNode(i));return t}readRegionFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(wa.includes(i.namespaceURI)&&i.localName=="Region"){const n=va({},GB,i,[]);t.push(n)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const n=i.localName;wa.includes(i.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&rn(t,this.readRegionFromNode(i))}return t}readCamera(e){const t=[];if(typeof e=="string"){const i=_c(e);rn(t,this.readCameraFromDocument(i))}else hc(e)?rn(t,this.readCameraFromDocument(e)):rn(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType===Node.ELEMENT_NODE&&rn(t,this.readCameraFromNode(i));return t}readCameraFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(wa.includes(i.namespaceURI)&&i.localName==="Camera"){const n=va({},Vpe,i,[]);t.push(n)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const n=i.localName;wa.includes(i.namespaceURI)&&(n==="Document"||n==="Folder"||n==="Placemark"||n==="kml")&&rn(t,this.readCameraFromNode(i))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const i=Pd(wa[4],"kml"),n="http://www.w3.org/2000/xmlns/";i.setAttributeNS(n,"xmlns:gx",qd[0]),i.setAttributeNS(n,"xmlns:xsi",Jx),i.setAttributeNS(Jx,"xsi:schemaLocation",Bpe);const s={node:i},r={};e.length>1?r.Document=e:e.length==1&&(r.Placemark=e[0]);const l=Zpe[i.namespaceURI],u=Jo(r,l);return Wn(s,zpe,Qs,u,[t],l,this),i}}function qpe(a,e){const t=[0,0];let i="start";const n=a.getImage();if(n){const l=n.getSize();if(l&&l.length==2){const u=n.getScaleArray(),d=n.getAnchor();t[0]=u[0]*(l[0]-d[0]),t[1]=u[1]*(l[1]/2-d[1]),i="left"}}let s=a.getText();return s?(s=s.clone(),s.setFont(s.getFont()||ym.getFont()),s.setScale(s.getScale()||ym.getScale()),s.setFill(s.getFill()||ym.getFill()),s.setStroke(s.getStroke()||h4)):s=ym.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(i),new Vi({image:n,text:s})}function Ype(a,e,t,i,n){return function(s,r){let l=n,u="",d=[];if(l){const f=s.getGeometry();if(f)if(f instanceof Md)d=f.getGeometriesArrayRecursive().filter(function(v){const w=v.getType();return w==="Point"||w==="MultiPoint"}),l=d.length>0;else{const v=f.getType();l=v==="Point"||v==="MultiPoint"}}l&&(u=s.get("name"),l=l&&!!u,l&&/&[^&]+;/.test(u)&&(m2||(m2=document.createElement("textarea")),m2.innerHTML=u,u=m2.value));let m=t;if(a?m=a:e&&(m=OB(e,t,i)),l){const f=qpe(m[0],u);if(d.length>0){f.setGeometry(new Md(d));const v=new Vi({geometry:m[0].getGeometry(),image:null,fill:m[0].getFill(),stroke:m[0].getStroke(),text:null});return[f,v].concat(m.slice(1))}return f}return m}}function OB(a,e,t){return Array.isArray(a)?a:typeof a=="string"?OB(t[a],e,t):e}function ZI(a){const e=Mu(a,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const i=t[1];return[parseInt(i.substr(6,2),16),parseInt(i.substr(4,2),16),parseInt(i.substr(2,2),16),parseInt(i.substr(0,2),16)/255]}}function PB(a){let e=Mu(a,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let n;for(;n=i.exec(e);){const s=parseFloat(n[1]),r=parseFloat(n[2]),l=n[3]?parseFloat(n[3]):0;t.push(s,r,l),e=e.substr(n[0].length)}if(e==="")return t}function BB(a){const e=Mu(a,!1).trim();let t=a.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function NB(a){const e=Mu(a,!1).trim().replace(/^(?!.*#)/,"#");let t=a.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Kpe(a){const e=a.getAttribute("xunits"),t=a.getAttribute("yunits");let i;return e!=="insetPixels"?t!=="insetPixels"?i="bottom-left":i="top-left":t!=="insetPixels"?i="bottom-right":i="top-right",{x:parseFloat(a.getAttribute("x")),xunits:O8[e],y:parseFloat(a.getAttribute("y")),yunits:O8[t],origin:i}}function FB(a){return Yi(a)}const jpe=Ct(wa,{Pair:vge});function DB(a,e){return va(void 0,jpe,a,e,this)}const $pe=Ct(wa,{Icon:Xe(dge),color:Xe(ZI),heading:Xe(Yi),hotSpot:Xe(Kpe),scale:Xe(FB)});function Jpe(a,e){const t=va({},$pe,a,e);if(!t)return;const i=e[e.length-1],n="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(n).length>0;let r;const l=n.href;l?r=l:s&&(r=kw);let u,d,m,f="bottom-left";const v=t.hotSpot;v?(u=[v.x,v.y],d=v.xunits,m=v.yunits,f=v.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(r.includes("pushpin")?(u=u4,d=z0,m=U0):r.includes("arrow-reverse")?(u=[54,42],d=z0,m=U0):r.includes("paddle")&&(u=[32,1],d=z0,m=U0));let w;const S=n.x,T=n.y;S!==void 0&&T!==void 0&&(w=[S,T]);let M;const G=n.w,P=n.h;G!==void 0&&P!==void 0&&(M=[G,P]);let F;const N=t.heading;N!==void 0&&(F=Js(N));const V=t.scale,K=t.color;if(s){r==kw&&(M=H0);const te=new jh({anchor:u,anchorOrigin:f,anchorXUnits:d,anchorYUnits:m,crossOrigin:this.crossOrigin_,offset:w,offsetOrigin:"bottom-left",rotation:F,scale:V,size:M,src:this.iconUrlFunction_(r),color:K}),J=te.getScaleArray()[0],ne=te.getSize();if(ne===null){const se=te.getImageState();if(se===ga.IDLE||se===ga.LOADING){const de=function(){const _e=te.getImageState();if(!(_e===ga.IDLE||_e===ga.LOADING)){const Se=te.getSize();if(Se&&Se.length==2){const ce=Ww(Se);te.setScale(J*ce)}te.unlistenImageChange(de)}};te.listenImageChange(de),se===ga.IDLE&&te.load()}}else if(ne.length==2){const se=Ww(ne);te.setScale(J*se)}i.imageStyle=te}else i.imageStyle=$3}const Qpe=Ct(wa,{color:Xe(ZI),scale:Xe(FB)});function ege(a,e){const t=va({},Qpe,a,e);if(!t)return;const i=e[e.length-1],n=new kf({fill:new wn({color:"color"in t?t.color:Qg}),scale:t.scale});i.textStyle=n}const tge=Ct(wa,{color:Xe(ZI),width:Xe(Yi)});function age(a,e){const t=va({},tge,a,e);if(!t)return;const i=e[e.length-1],n=new mn({color:"color"in t?t.color:Qg,width:"width"in t?t.width:1});i.strokeStyle=n}const ige=Ct(wa,{color:Xe(ZI),fill:Xe(Qh),outline:Xe(Qh)});function nge(a,e){const t=va({},ige,a,e);if(!t)return;const i=e[e.length-1],n=new wn({color:"color"in t?t.color:Qg});i.fillStyle=n;const s=t.fill;s!==void 0&&(i.fill=s);const r=t.outline;r!==void 0&&(i.outline=r)}const rge=Ct(wa,{coordinates:m3(PB)});function VB(a,e){return va(null,rge,a,e)}function sge(a,e){const i=e[e.length-1].coordinates,n=Mu(a,!1),r=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(r){const l=parseFloat(r[1]),u=parseFloat(r[2]),d=parseFloat(r[3]);i.push([l,u,d])}else i.push([])}const oge=Ct(qd,{Track:qo(ZB)});function lge(a,e){const t=va([],oge,a,e);if(t)return new c_(t)}const uge=Ct(wa,{when:Gge},Ct(qd,{coord:sge}));function ZB(a,e){const t=va({coordinates:[],whens:[]},uge,a,e);if(!t)return;const i=[],n=t.coordinates,s=t.whens;for(let r=0,l=Math.min(n.length,s.length);r<l;++r)n[r].length==3&&i.push(n[r][0],n[r][1],n[r][2],s[r]);return new zr(i,"XYZM")}const cge=Ct(wa,{href:Xe(BB)},Ct(qd,{x:Xe(Yi),y:Xe(Yi),w:Xe(Yi),h:Xe(Yi)}));function dge(a,e){const t=va({},cge,a,e);return t||null}const hge=Ct(wa,{coordinates:m3(PB)});function J3(a,e){return va(null,hge,a,e)}const zI=Ct(wa,{extrude:Xe(Qh),tessellate:Xe(Qh),altitudeMode:Xe(na)});function zB(a,e){const t=va({},zI,a,e),i=J3(a,e);if(i){const n=new zr(i,"XYZ");return n.setProperties(t,!0),n}}function UB(a,e){const t=va({},zI,a,e),i=J3(a,e);if(i){const n=new Au(i,"XYZ",[i.length]);return n.setProperties(t,!0),n}}const _ge=Ct(wa,{LineString:qo(zB),LinearRing:qo(UB),MultiGeometry:qo(HB),Point:qo(XB),Polygon:qo(qB)});function HB(a,e){const t=va([],_ge,a,e);if(!t)return null;if(t.length===0)return new Md(t);let i,n=!0;const s=t[0].getType();let r;for(let l=1,u=t.length;l<u;++l)if(r=t[l],r.getType()!=s){n=!1;break}if(n){let l,u;if(s=="Point"){const d=t[0];l=d.getLayout(),u=d.getFlatCoordinates();for(let m=1,f=t.length;m<f;++m)r=t[m],rn(u,r.getFlatCoordinates());i=new Vm(u,l),oA(i,t)}else if(s=="LineString")i=new c_(t),oA(i,t);else if(s=="Polygon")i=new ub(t),oA(i,t);else if(s=="GeometryCollection"||s.startsWith("Multi"))i=new Md(t);else throw new Error("Unknown geometry type found")}else i=new Md(t);return i}function XB(a,e){const t=va({},zI,a,e),i=J3(a,e);if(i){const n=new Qn(i,"XYZ");return n.setProperties(t,!0),n}}const mge=Ct(wa,{innerBoundaryIs:Lge,outerBoundaryIs:kge});function qB(a,e){const t=va({},zI,a,e),i=va([null],mge,a,e);if(i&&i[0]){const n=i[0],s=[n.length];for(let l=1,u=i.length;l<u;++l)rn(n,i[l]),s.push(n.length);const r=new Au(n,"XYZ",s);return r.setProperties(t,!0),r}}const pge=Ct(wa,{IconStyle:Jpe,LabelStyle:ege,LineStyle:age,PolyStyle:nge});function Q3(a,e){const t=va({},pge,a,e,this);if(!t)return null;let i="fillStyle"in t?t.fillStyle:Q2;const n=t.fill;n!==void 0&&!n&&(i=null);let s;"imageStyle"in t?t.imageStyle!=$3&&(s=t.imageStyle):s=c4;const r="textStyle"in t?t.textStyle:ym,l="strokeStyle"in t?t.strokeStyle:d4,u=t.outline;return u!==void 0&&!u?[new Vi({geometry:function(d){const m=d.getGeometry(),f=m.getType();if(f==="GeometryCollection"){const v=m;return new Md(v.getGeometriesArrayRecursive().filter(function(w){const S=w.getType();return S!=="Polygon"&&S!=="MultiPolygon"}))}if(f!=="Polygon"&&f!=="MultiPolygon")return m},fill:i,image:s,stroke:l,text:r,zIndex:void 0}),new Vi({geometry:function(d){const m=d.getGeometry(),f=m.getType();if(f==="GeometryCollection"){const v=m;return new Md(v.getGeometriesArrayRecursive().filter(function(w){const S=w.getType();return S==="Polygon"||S==="MultiPolygon"}))}if(f==="Polygon"||f==="MultiPolygon")return m},fill:i,stroke:null,zIndex:void 0})]:[new Vi({fill:i,image:s,stroke:l,text:r,zIndex:void 0})]}function oA(a,e){const t=e.length,i=new Array(e.length),n=new Array(e.length),s=new Array(e.length);let r,l,u;r=!1,l=!1,u=!1;for(let d=0;d<t;++d){const m=e[d];i[d]=m.get("extrude"),n[d]=m.get("tessellate"),s[d]=m.get("altitudeMode"),r=r||i[d]!==void 0,l=l||n[d]!==void 0,u=u||s[d]}r&&a.set("extrude",i),l&&a.set("tessellate",n),u&&a.set("altitudeMode",s)}const gge=Ct(wa,{displayName:Xe(na),value:Xe(na)});function fge(a,e){const t=a.getAttribute("name");l_(gge,a,e);const i=e[e.length-1];t&&i.displayName?i[t]={value:i.value,displayName:i.displayName,toString:function(){return i.value}}:t!==null?i[t]=i.value:i.displayName!==null&&(i[i.displayName]=i.value),delete i.value}const yge=Ct(wa,{Data:fge,SchemaData:Ige});function YB(a,e){l_(yge,a,e)}function KB(a,e){l_(GB,a,e)}const bge=Ct(wa,{Style:Xe(Q3),key:Xe(na),styleUrl:Xe(NB)});function vge(a,e){const t=va({},bge,a,e,this);if(!t)return;const i=t.key;if(i&&i=="normal"){const n=t.styleUrl;n&&(e[e.length-1]=n);const s=t.Style;s&&(e[e.length-1]=s)}}function xge(a,e){const t=DB.call(this,a,e);if(!t)return;const i=e[e.length-1];if(Array.isArray(t))i.Style=t;else if(typeof t=="string")i.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const wge=Ct(wa,{SimpleData:Cge});function Ige(a,e){l_(wge,a,e)}function Cge(a,e){const t=a.getAttribute("name");if(t!==null){const i=na(a),n=e[e.length-1];n[t]=i}}const Sge=Ct(wa,{altitudeMode:Xe(na),minAltitude:Xe(Yi),maxAltitude:Xe(Yi),north:Xe(Yi),south:Xe(Yi),east:Xe(Yi),west:Xe(Yi)});function Age(a,e){const t=va({},Sge,a,e);if(!t)return;const i=e[e.length-1],n=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];i.extent=n,i.altitudeMode=t.altitudeMode,i.minAltitude=parseFloat(t.minAltitude),i.maxAltitude=parseFloat(t.maxAltitude)}const Tge=Ct(wa,{minLodPixels:Xe(Yi),maxLodPixels:Xe(Yi),minFadeExtent:Xe(Yi),maxFadeExtent:Xe(Yi)});function Ege(a,e){const t=va({},Tge,a,e);if(!t)return;const i=e[e.length-1];i.minLodPixels=parseFloat(t.minLodPixels),i.maxLodPixels=parseFloat(t.maxLodPixels),i.minFadeExtent=parseFloat(t.minFadeExtent),i.maxFadeExtent=parseFloat(t.maxFadeExtent)}const Mge=Ct(wa,{LinearRing:qo(VB)});function Lge(a,e){const t=va([],Mge,a,e);t.length>0&&e[e.length-1].push(...t)}const Rge=Ct(wa,{LinearRing:m3(VB)});function kge(a,e){const t=va(void 0,Rge,a,e);if(t){const i=e[e.length-1];i[0]=t}}function Wge(a,e){l_(Dpe,a,e)}function Gge(a,e){const i=e[e.length-1].whens,n=Mu(a,!1),s=Date.parse(n);i.push(isNaN(s)?0:s)}function UI(a,e){const t=Zl(e),n=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const r=Math.floor(n[s]).toString(16);n[s]=r.length==1?"0"+r:r}ji(a,n.join(""))}function Oge(a,e,t){const i=t[t.length-1],n=i.layout,s=i.stride;let r;if(n=="XY"||n=="XYM")r=2;else if(n=="XYZ"||n=="XYZM")r=3;else throw new Error("Invalid geometry layout");const l=e.length;let u="";if(l>0){u+=e[0];for(let d=1;d<r;++d)u+=","+e[d];for(let d=s;d<l;d+=s){u+=" "+e[d];for(let m=1;m<r;++m)u+=","+e[d+m]}}ji(a,u)}const ex=Ct(wa,{Data:Nt(Pge),value:Nt(Nge),displayName:Nt(Bge)});function Pge(a,e,t){a.setAttribute("name",e.name);const i={node:a},n=e.value;typeof n=="object"?(n!==null&&n.displayName&&Wn(i,ex,Qs,[n.displayName],t,["displayName"]),n!==null&&n.value&&Wn(i,ex,Qs,[n.value],t,["value"])):Wn(i,ex,Qs,[n],t,["value"])}function Bge(a,e){ji(a,e)}function Nge(a,e){ji(a,e)}const Fge=Ct(wa,{Placemark:Nt(JB)}),Dge=function(a,e,t){const i=e[e.length-1].node;return Pd(i.namespaceURI,"Placemark")};function Vge(a,e,t){Wn({node:a},Fge,Dge,e,t,void 0,this)}const Zge=Lu("Data");function zge(a,e,t){const i={node:a},n=e.names,s=e.values,r=n.length;for(let l=0;l<r;l++)Wn(i,ex,Zge,[{name:n[l],value:s[l]}],t)}const B8=Ct(wa,["href"],Ct(qd,["x","y","w","h"])),N8=Ct(wa,{href:Nt(ji)},Ct(qd,{x:Nt(Do),y:Nt(Do),w:Nt(Do),h:Nt(Do)})),Uge=function(a,e,t){return Pd(qd[0],"gx:"+t)};function Hge(a,e,t){const i={node:a},n=t[t.length-1].node;let s=B8[n.namespaceURI],r=Jo(e,s);Wn(i,N8,Qs,r,t,s),s=B8[qd[0]],r=Jo(e,s),Wn(i,N8,Uge,r,t,s)}const Xge=Ct(wa,["scale","heading","Icon","color","hotSpot"]),qge=Ct(wa,{Icon:Nt(Hge),color:Nt(UI),heading:Nt(Do),hotSpot:Nt(vfe),scale:Nt(eN)});function Yge(a,e,t){const i={node:a},n={},s=e.getSrc(),r=e.getSize(),l=e.getImageSize(),u={href:s};if(r){u.w=r[0],u.h=r[1];const M=e.getAnchor(),G=e.getOrigin();if(G&&l&&G[0]!==0&&G[1]!==r[1]&&(u.x=G[0],u.y=l[1]-(G[1]+r[1])),M&&(M[0]!==r[0]/2||M[1]!==r[1]/2)){const P={x:M[0],xunits:"pixels",y:r[1]-M[1],yunits:"pixels"};n.hotSpot=P}}n.Icon=u;let d=e.getScaleArray()[0],m=r;if(m===null&&(m=H0),m.length==2){const M=Ww(m);d=d/M}d!==1&&(n.scale=d);const f=e.getRotation();f!==0&&(n.heading=f);const v=e.getColor();v&&(n.color=v);const w=t[t.length-1].node,S=Xge[w.namespaceURI],T=Jo(n,S);Wn(i,qge,Qs,T,t,S)}const Kge=Ct(wa,["color","scale"]),jge=Ct(wa,{color:Nt(UI),scale:Nt(eN)});function $ge(a,e,t){const i={node:a},n={},s=e.getFill();s&&(n.color=s.getColor());const r=e.getScale();r&&r!==1&&(n.scale=r);const l=t[t.length-1].node,u=Kge[l.namespaceURI],d=Jo(n,u);Wn(i,jge,Qs,d,t,u)}const Jge=Ct(wa,["color","width"]),Qge=Ct(wa,{color:Nt(UI),width:Nt(Do)});function efe(a,e,t){const i={node:a},n={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,r=Jge[s.namespaceURI],l=Jo(n,r);Wn(i,Qge,Qs,l,t,r)}const tfe={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},jB=function(a,e,t){if(a){const i=e[e.length-1].node;return Pd(i.namespaceURI,tfe[a.getType()])}},afe=Lu("Point"),ife=Lu("LineString"),nfe=Lu("LinearRing"),rfe=Lu("Polygon"),sfe=Ct(wa,{LineString:Nt(ef),Point:Nt(ef),Polygon:Nt(QB),GeometryCollection:Nt($B)});function $B(a,e,t){const i={node:a},n=e.getType();let s=[],r;if(n==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(l){const u=l.getType();if(u==="MultiPoint")s=s.concat(l.getPoints());else if(u==="MultiLineString")s=s.concat(l.getLineStrings());else if(u==="MultiPolygon")s=s.concat(l.getPolygons());else if(u==="Point"||u==="LineString"||u==="Polygon")s.push(l);else throw new Error("Unknown geometry type")}),r=jB;else if(n==="MultiPoint")s=e.getPoints(),r=afe;else if(n==="MultiLineString")s=e.getLineStrings(),r=ife;else if(n==="MultiPolygon")s=e.getPolygons(),r=rfe;else throw new Error("Unknown geometry type");Wn(i,sfe,r,s,t)}const ofe=Ct(wa,{LinearRing:Nt(ef)});function F8(a,e,t){Wn({node:a},ofe,nfe,[e],t)}const lA=Ct(wa,{ExtendedData:Nt(zge),MultiGeometry:Nt($B),LineString:Nt(ef),LinearRing:Nt(ef),Point:Nt(ef),Polygon:Nt(QB),Style:Nt(bfe),address:Nt(ji),description:Nt(ji),name:Nt(ji),open:Nt(ff),phoneNumber:Nt(ji),styleUrl:Nt(ji),visibility:Nt(ff)}),lfe=Ct(wa,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),ufe=Lu("ExtendedData");function JB(a,e,t){const i={node:a};e.getId()&&a.setAttribute("id",e.getId());const n=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const r=Object.keys(n||{}).sort().filter(function(w){return!s[w]}),l=e.getStyleFunction();if(l){const w=l(e,0);if(w){const S=Array.isArray(w)?w:[w];let T=S;if(e.getGeometry()&&(T=S.filter(function(M){const G=M.getGeometryFunction()(e);if(G){const P=G.getType();return P==="GeometryCollection"?G.getGeometriesArrayRecursive().filter(function(F){const N=F.getType();return N==="Point"||N==="MultiPoint"}).length:P==="Point"||P==="MultiPoint"}})),this.writeStyles_){let M=S,G=S;e.getGeometry()&&(M=S.filter(function(P){const F=P.getGeometryFunction()(e);if(F){const N=F.getType();return N==="GeometryCollection"?F.getGeometriesArrayRecursive().filter(function(V){const K=V.getType();return K==="LineString"||K==="MultiLineString"}).length:N==="LineString"||N==="MultiLineString"}}),G=S.filter(function(P){const F=P.getGeometryFunction()(e);if(F){const N=F.getType();return N==="GeometryCollection"?F.getGeometriesArrayRecursive().filter(function(V){const K=V.getType();return K==="Polygon"||K==="MultiPolygon"}).length:N==="Polygon"||N==="MultiPolygon"}})),n.Style={pointStyles:T,lineStyles:M,polyStyles:G}}if(T.length&&n.name===void 0){const M=T[0].getText();M&&(n.name=M.getText())}}}const u=t[t.length-1].node,d=lfe[u.namespaceURI],m=Jo(n,d);if(Wn(i,lA,Qs,m,t,d),r.length>0){const w=Jo(n,r);Wn(i,lA,ufe,[{names:r,values:w}],t)}const f=t[0];let v=e.getGeometry();v&&(v=jl(v,!0,f)),Wn(i,lA,jB,[v],t)}const cfe=Ct(wa,["extrude","tessellate","altitudeMode","coordinates"]),dfe=Ct(wa,{extrude:Nt(ff),tessellate:Nt(ff),altitudeMode:Nt(ji),coordinates:Nt(Oge)});function ef(a,e,t){const i=e.getFlatCoordinates(),n={node:a};n.layout=e.getLayout(),n.stride=e.getStride();const s=e.getProperties();s.coordinates=i;const r=t[t.length-1].node,l=cfe[r.namespaceURI],u=Jo(s,l);Wn(n,dfe,Qs,u,t,l)}const hfe=Ct(wa,["color","fill","outline"]),D8=Ct(wa,{outerBoundaryIs:Nt(F8),innerBoundaryIs:Nt(F8)}),_fe=Lu("innerBoundaryIs"),mfe=Lu("outerBoundaryIs");function QB(a,e,t){const i=e.getLinearRings(),n=i.shift(),s={node:a};Wn(s,D8,_fe,i,t),Wn(s,D8,mfe,[n],t)}const pfe=Ct(wa,{color:Nt(UI),fill:Nt(ff),outline:Nt(ff)});function gfe(a,e,t){const i={node:a},n=e.getFill(),s=e.getStroke(),r={color:n?n.getColor():void 0,fill:n?void 0:!1,outline:s?void 0:!1},l=t[t.length-1].node,u=hfe[l.namespaceURI],d=Jo(r,u);Wn(i,pfe,Qs,d,t,u)}function eN(a,e){Do(a,Math.round(e*1e6)/1e6)}const ffe=Ct(wa,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),yfe=Ct(wa,{IconStyle:Nt(Yge),LabelStyle:Nt($ge),LineStyle:Nt(efe),PolyStyle:Nt(gfe)});function bfe(a,e,t){const i={node:a},n={};if(e.pointStyles.length){const u=e.pointStyles[0].getText();u&&(n.LabelStyle=u);const d=e.pointStyles[0].getImage();d&&typeof d.getSrc=="function"&&(n.IconStyle=d)}if(e.lineStyles.length){const u=e.lineStyles[0].getStroke();u&&(n.LineStyle=u)}if(e.polyStyles.length){const u=e.polyStyles[0].getStroke();u&&!n.LineStyle&&(n.LineStyle=u),n.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,r=ffe[s.namespaceURI],l=Jo(n,r);Wn(i,yfe,Qs,l,t,r)}function vfe(a,e){a.setAttribute("x",String(e.x)),a.setAttribute("y",String(e.y)),a.setAttribute("xunits",e.xunits),a.setAttribute("yunits",e.yunits)}const xfe=Xpe;class wfe extends DI{export(e,t){const i=this.generateContent(e);this.download(t,i,"kml","application/vnd.google-earth.kml+xml")}generateContent(e){return new xfe().writeFeatures(this.exploseFeatures(e),this.encodeOptions)}}const Ife="https://migration.geoportail.lu/mymaps/exportgpxkml";class Cfe extends DI{constructor(e){super(e),this.encodeOptions.dataProjection=Kl}async export(e,t){const i=this.generateContent(e),n=Ife,s=new URLSearchParams({format:"shape",name:t,doc:i}),r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()});if(!r.ok)throw new Error("Error while requesting shapefile");const l=await r.blob();this.download(t,l,"zip","application/octet-stream")}generateContent(e){return new Bd().writeFeatures(this.exploseFeatures(e),this.encodeOptions)}async fetchFileContent(e,t){return await(await fetch("mymaps/exportgpxkml",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify({doc:e,format:"shape",name:t})})).blob()}}class Sfe extends DI{async export(e,t){const i=await this.generateContent(e);this.download(t,i,"csv","application/csv")}async generateContent(e){const t=await e.getProfile();return t?this.getCsvContent(t):""}getCsvContent(e){const t=`dist,MNT,y,x,lon,lat
`;return e.reduce((i,n)=>i+this.getCsvContentRow(n),t)}getCsvContentRow(e){const t=cf([e.x,e.y],Kl);return`${e.dist},${e.values.dhm},${e.x},${e.y},${t[0]},${t[1]}
`}}class Afe{export(e,t,i,n,s=!1){var r;(r=this.getExporter(e,t))==null||r.export(i,n,s)}getExporter(e,t){switch(t){case"gpx":return new Ppe(e);case"kml":return new wfe(e);case"shapefile":return new Cfe(e);case"csv":return new Sfe(e)}}}const eE=new Afe,Tfe={"data-cy":"featItemProfile",class:"lux-profile relative"},Efe={class:"flex justify-between w-full px-1 gap-3 whitespace-nowrap"},Mfe={class:"grow cursor-default","data-cy":"featItemProfileCumul"},Lfe=["aria-label"],Rfe={key:0,class:"no-print w-full absolute mt-2 text-center"},kfe={class:"text-gray-700 rounded p-2 bg-[rgba(120,120,120,0.5)]"},Wfe="mnt",tE=$e({__name:"feature-elevation-profile",props:{feature:{},enableExportCSV:{type:Boolean,default:!0},activatePositioning:{type:Boolean,default:!0}},emits:["close"],setup(a){const e=a,t=kme(void 0,()=>e.activatePositioning),i=CB(),{t:n}=wt(),s=St(()=>{var G,P,F;return(F=(P=(G=K6())==null?void 0:G.vnode)==null?void 0:P.props)==null?void 0:F.onClose}),r=Di(void 0),l=St(()=>{var G;return((G=r.value)==null?void 0:G.length)||0}),u=St(()=>r.value&&r.value[l.value-1]),d=St(()=>{var G;return(G=u.value)==null?void 0:G.elevationGain}),m=St(()=>{var G;return(G=u.value)==null?void 0:G.elevationLoss}),f=St(()=>{var G;return(G=u.value)==null?void 0:G.cumulativeElevation}),v=St(()=>e.feature&&!r.value),w=St(()=>!e.feature);In(()=>{e.feature&&e.feature.getProfile().then(G=>r.value=G)}),es(()=>{i.setPosition(void 0,void 0)}),dr(()=>{var G;e.feature&&!e.feature.profileData?(r.value=void 0,(G=e.feature)==null||G.getProfile().then(P=>r.value=P)):r.value=void 0}),Ut(r,G=>t.profileData.value=G);function S(){var G;e.feature&&eE.export((G=e.feature)==null?void 0:G.map,"csv",e.feature,e.feature.label||Wfe)}function T(G){var F;const P=kr([G.x,G.y],Kl,(F=e.feature)==null?void 0:F.map.getView().getProjection());i.setPosition(P[0],P[1])}function M(){i.setPosition(void 0,void 0)}return(G,P)=>{const F=wl("format-measure");return U(),$("div",Tfe,[W("div",Efe,[W("div",Mfe,[r.value?(U(),$(Ot,{key:0},[W("span",null,[P[2]||(P[2]=Jt(" +")),La(W("span",null,null,512),[[F,d.value,void 0,{elevation:!0}]])]),W("span",null,[P[3]||(P[3]=Jt(" ")),La(W("span",null,null,512),[[F,m.value,void 0,{elevation:!0}]])]),W("span",null,[P[4]||(P[4]=Jt(" ")),La(W("span",null,null,512),[[F,f.value,void 0,{elevation:!0}]])])],64)):Ae("",!0)]),G.enableExportCSV&&r.value?(U(),$("button",{key:0,"data-cy":"featItemProfileCSV",class:"profile-export no-print text-secondary hover:underline",onClick:P[0]||(P[0]=()=>S())},q(k(n)("Export csv")),1)):Ae("",!0),s.value?(U(),$("button",{key:1,"aria-label":k(n)("Close"),class:"fa-solid fa-close text-secondary hover:text-tertiary",onClick:P[1]||(P[1]=N=>G.$emit("close"))},null,8,Lfe)):Ae("",!0)]),v.value||w.value?(U(),$("div",Rfe,[W("span",kfe,q(v.value?k(n)("Please wait, the profile is loading."):w.value?k(n)("Draw a line on the map to display an elevation profile."):""),1)])):Ae("",!0),lt(Hhe,{profileData:r.value,class:"w-full",highlightDistance:k(t).highlightDistance.value,"onHover:profile":T,"onOut:profile":M},null,8,["profileData","highlightDistance"])])}}}),p2={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class g2 extends Il{constructor(e,t){super(e),this.feature=t}}function Gfe(a,e){const t=[];for(let i=0;i<e.length;++i){const s=e[i].getGeometry();tN(a,s,t)}return t}function f2(a,e){return Cd(a[0],a[1],e[0],e[1])}function Gg(a,e){const t=a.length;return e<0?a[e+t]:e>=t?a[e-t]:a[e]}function y2(a,e,t){let i,n;e<t?(i=e,n=t):(i=t,n=e);const s=Math.ceil(i),r=Math.floor(n);if(s>r){const u=Og(a,i),d=Og(a,n);return f2(u,d)}let l=0;if(i<s){const u=Og(a,i),d=Gg(a,s);l+=f2(u,d)}if(r<n){const u=Gg(a,r),d=Og(a,n);l+=f2(u,d)}for(let u=s;u<r-1;++u){const d=Gg(a,u),m=Gg(a,u+1);l+=f2(d,m)}return l}function tN(a,e,t){if(e instanceof zr){b2(a,e.getCoordinates(),!1,t);return}if(e instanceof c_){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n)b2(a,i[n],!1,t);return}if(e instanceof Au){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n)b2(a,i[n],!0,t);return}if(e instanceof ub){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n];for(let l=0,u=r.length;l<u;++l)b2(a,r[l],!0,t)}return}if(e instanceof Md){const i=e.getGeometries();for(let n=0;n<i.length;++n)tN(a,i[n],t);return}}const uA={index:-1,endIndex:NaN};function Ofe(a,e,t,i){const n=a[0],s=a[1];let r=1/0,l=-1,u=NaN;for(let f=0;f<e.targets.length;++f){const v=e.targets[f],w=v.coordinates;let S=1/0,T;for(let M=0;M<w.length-1;++M){const G=w[M],P=w[M+1],F=aN(n,s,G,P);F.squaredDistance<S&&(S=F.squaredDistance,T=M+F.along)}S<r&&(r=S,v.ring&&e.targetIndex===f&&(v.endIndex>v.startIndex?T<v.startIndex&&(T+=w.length):v.endIndex<v.startIndex&&T>v.startIndex&&(T-=w.length)),u=T,l=f)}const d=e.targets[l];let m=d.ring;if(e.targetIndex===l&&m){const f=Og(d.coordinates,u),v=t.getPixelFromCoordinate(f);Cx(v,e.startPx)>i&&(m=!1)}if(m){const f=d.coordinates,v=f.length,w=d.startIndex,S=u;if(w<S){const T=y2(f,w,S);y2(f,w,S-v)<T&&(u-=v)}else{const T=y2(f,w,S);y2(f,w,S+v)<T&&(u+=v)}}return uA.index=l,uA.endIndex=u,uA}function b2(a,e,t,i){const n=a[0],s=a[1];for(let r=0,l=e.length-1;r<l;++r){const u=e[r],d=e[r+1],m=aN(n,s,u,d);if(m.squaredDistance===0){const f=r+m.along;i.push({coordinates:e,ring:t,startIndex:f,endIndex:f});return}}}const cA={along:0,squaredDistance:0};function aN(a,e,t,i){const n=t[0],s=t[1],r=i[0],l=i[1],u=r-n,d=l-s;let m=0,f=n,v=s;return(u!==0||d!==0)&&(m=Nn(((a-n)*u+(e-s)*d)/(u*u+d*d),0,1),f+=u*m,v+=d*m),cA.along=m,cA.squaredDistance=Tf(Cd(a,e,f,v),10),cA}function Og(a,e){const t=a.length;let i=Math.floor(e);const n=e-i;i>=t?i-=t:i<0&&(i+=t);let s=i+1;s>=t&&(s-=t);const r=a[i],l=r[0],u=r[1],d=a[s],m=d[0]-l,f=d[1]-u;return[l+m*n,u+f*n]}class Pfe extends $m{constructor(e){const t=e;t.stopDown||(t.stopDown=Mf),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=Nfe(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:df,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const n=this.mode_;if(n==="Circle")i=(s,r,l)=>{const u=r||new mP([NaN,NaN]),d=lr(s[0]),m=lf(d,lr(s[s.length-1]));return u.setCenterAndRadius(d,Math.sqrt(m),this.geometryLayout_),u};else{let s;n==="Point"?s=Qn:n==="LineString"?s=zr:n==="Polygon"&&(s=Au),i=(r,l,u)=>(l?n==="Polygon"?r[0].length?l.setCoordinates([r[0].concat([r[0][0]])],this.geometryLayout_):l.setCoordinates([],this.geometryLayout_):l.setCoordinates(r,this.geometryLayout_):l=new s(r,this.geometryLayout_),l)}}this.geometryFunction_=i,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new eo({source:new Qo({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:Bfe(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:vI,this.freehandCondition_,e.freehand?this.freehandCondition_=Px:this.freehandCondition_=e.freehandCondition?e.freehandCondition:i7,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(uT.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=Px:t=e:t=DX,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===za.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Pi.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Pi.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Pi.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===Pi.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===Pi.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Pi.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Pi.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new _d(Pi.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),i=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),n=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=Ss([i,n]),r=this.traceSource_.getFeaturesInExtent(s);if(r.length===0)return;const l=Gfe(e.coordinate,r);l.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:l,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex,n=e.startIndex<=t;i===n?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const n=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),i=s-n+1}else{const n=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),i=n-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const n=[];if(t<i){const s=Math.ceil(t);let r=Math.floor(i);r===i&&(r-=1);for(let l=s;l<=r;++l)n.push(Gg(e.coordinates,l))}else{const s=Math.floor(t);let r=Math.ceil(i);r===i&&(r+=1);for(let l=s;l>=r;--l)n.push(Gg(e.coordinates,l))}n.length&&this.appendCoordinates(n)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&Cx(t.startPx,e.pixel)<this.snapTolerance_)return;const i=Ofe(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(t.targetIndex!==-1){const u=t.targets[t.targetIndex];this.removeTracedCoordinates_(u.startIndex,u.endIndex)}const l=t.targets[i.index];this.addTracedCoordinates_(l,l.startIndex,i.endIndex)}else{const l=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(l,i.endIndex)}t.targetIndex=i.index;const n=t.targets[t.targetIndex];n.endIndex=i.endIndex;const s=Og(n.coordinates,n.endIndex),r=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(r[0]),Math.round(r[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(e.coordinate),!n&&this.freehand_?this.finishDrawing():!this.freehand_&&(!n||this.mode_==="Point")&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,n=t[0]-i[0],s=t[1]-i[1],r=n*n+s*s;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let n=!1,s=[this.finishCoordinate_];const r=this.mode_;if(r==="Point")i=!0;else if(r==="Circle")i=this.sketchCoords_.length===2;else if(r==="LineString")n=!t&&this.sketchCoords_.length>this.minPoints_;else if(r==="Polygon"){const l=this.sketchCoords_;n=l[0].length>this.minPoints_,s=[l[0][0],l[0][l[0].length-2]],t?s=[l[0][0]]:s=[l[0][0],l[0][l[0].length-2]]}if(n){const l=this.getMap();for(let u=0,d=s.length;u<d;u++){const m=s[u],f=l.getPixelFromCoordinate(m),v=e[0]-f[0],w=e[1]-f[1],S=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(v*v+w*w)<=S,i){this.finishCoordinate_=m;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new kn(new Qn(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new kn);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new zr(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=Rx(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new kn(new zr(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new kn,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new g2(p2.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),n=t.getView().getProjection(),s=Rx(this.geometryLayout_);let r,l;for(;e.length<s;)e.push(0);this.mode_==="Point"?l=this.sketchCoords_:this.mode_==="Polygon"?(r=this.sketchCoords_[0],l=r[r.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(r=this.sketchCoords_,l=r[r.length-1]),l[0]=e[0],l[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let n,s;const r=this.mode_;return r==="LineString"||r==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),this.geometryFunction_(s,t,i)):r==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),n&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),n?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;for(let s=0;s<e;++s){let r;if(n==="LineString"||n==="Circle"){if(r=this.sketchCoords_,r.splice(-2,1),r.length>=2){this.finishCoordinate_=r[r.length-2].slice();const l=this.finishCoordinate_.slice();r[r.length-1]=l,this.createOrUpdateSketchPoint_(l)}this.geometryFunction_(r,t,i),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(n==="Polygon"){r=this.sketchCoords_[0],r.splice(-2,1);const l=this.sketchLine_.getGeometry();if(r.length>=2){const u=r[r.length-2].slice();r[r.length-1]=u,this.createOrUpdateSketchPoint_(u)}l.setCoordinates(r),this.geometryFunction_(this.sketchCoords_,t,i)}if(r.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const i=e.getGeometry(),n=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,i,n)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,i,n),t=i.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Vm([t])):this.type_==="MultiLineString"?e.setGeometry(new c_([t])):this.type_==="MultiPolygon"&&e.setGeometry(new ub([t])),this.dispatchEvent(new g2(p2.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new g2(p2.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(e[0]);let n;if(t==="LineString"||t==="Circle")n=this.sketchCoords_;else if(t==="Polygon")n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&n.shift(),n.pop();for(let r=0;r<e.length;r++)this.addToDrawing_(e[r]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new kn(new Qn(n)),this.updateSketchFeatures_(),this.dispatchEvent(new g2(p2.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function Bfe(){const a=x7();return function(e,t){return a[e.getGeometry().getType()]}}function Nfe(a){switch(a){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+a)}}const aE=Pfe,iN=Co("elevation-profile",()=>{const a=Fe(!1),e=Fe(null);return{drawElevationProfileActive:a,currentProfileFeature:e}});class Ffe{constructor(){zt(this,"measureTooltipElement",null);zt(this,"measureTooltipOverlay",null);zt(this,"changeEventKey",null)}add(e,t){this.createMeasureTooltip(e);const i=t.feature.getGeometry();if(i===void 0)return;const n=e.getView().getProjection();this.changeEventKey=ba(i,"change",()=>this.updateTootip(i,n),this)}remove(){this.removeMeasureTooltip(),this.changeEventKey!==null&&(wm(this.changeEventKey),this.changeEventKey=null)}createMeasureTooltip(e){this.removeMeasureTooltip(),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.classList.add("lux-tooltip"),this.measureTooltipOverlay=new X3({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center",stopEvent:!1}),e.addOverlay(this.measureTooltipOverlay)}removeMeasureTooltip(){var e;this.measureTooltipElement!==null&&((e=this.measureTooltipElement.parentNode)==null||e.removeChild(this.measureTooltipElement),this.measureTooltipElement=null,this.measureTooltipOverlay=null)}updateTootip(e,t){var s;let i,n="";if(e.getType()==="LineString"){const r=e;i=r.getLastCoordinate(),i!==null&&(n=w1(Lw(r,t)))}else if(e.getType()==="Polygon"){const r=e;r.getCoordinates()[0].length>2&&(i=r.getInteriorPoint().getCoordinates()),i!==null&&(n=W7(AB(r)))}else if(e.getType()==="Circle"){const r=e;i=r.getLastCoordinate();const l=r.getCenter();l!==null&&i!==null&&(n=w1(Lw(new zr([l,i]),t)))}this.measureTooltipElement&&(this.measureTooltipElement.innerText=n,(s=this.measureTooltipOverlay)==null||s.setPosition(i))}}const Sm=new Ffe;function Dfe(){const a=_i(),e=iN(),{drawElevationProfileActive:t,currentProfileFeature:i}=Tt(e),{elevationProfileToolbarOpen:n}=Tt(a);let s;const r=new aE({type:"LineString"});let l;const u=new Vi({fill:new wn({color:"rgba(255, 204, 51, 0.2)"}),stroke:new mn({color:"rgba(255, 204, 51, 1)",width:2}),image:new to({radius:7,fill:new wn({color:"rgba(255, 204, 51, 0.3)"})}),text:new kf({font:"bold 12px Calibri,sans-serif",fill:new wn({color:"rgb(0 0 0)"}),stroke:new mn({color:"rgba(255, 204, 51, 1)",width:4}),overflow:!0})}),d=new eo({source:new Qo,zIndex:1001});function m(){s=vi().getOlMap(),Ut(n,M=>{if(M)t.value=!0;else{t.value=!1;const G=d.getSource();G&&G.clear(),i.value=null}}),Ut(()=>i.value,M=>{const G=d.getSource();G&&(G.clear(),M&&M instanceof kn&&G.addFeature(M))}),r.setActive(!1),Ut(t,M=>{r.setActive(M)}),s.addInteraction(r),s.addLayer(d),d.setStyle(u),ba(r,"drawstart",M=>{const G=d.getSource();G&&G.clear(),i.value=null,Sm.add(s,M)}),ba(r,"drawend",M=>{f(M)}),l=ba(document,"keyup",M=>{v(M)})}function f(M){Sm.remove(),r.finishDrawing(),t.value=!1,M.stopPropagation(),i.value=M.feature}function v(M){M.key==="Escape"&&(Sm.remove(),r.finishDrawing(),r.setActive(!1))}function w(){const M=d.getSource();M&&M.clear(),i.value=null}function S(){const M=i.value;return!!M&&typeof M.getGeometry=="function"&&M.getGeometry()&&M.getGeometry().getType&&M.getGeometry().getType()==="LineString"}function T(){l&&(_n(l),l=void 0);const M=d.getSource();M&&M.clear(),s&&(s.removeLayer(d),s.removeInteraction(r))}return{drawInteraction:r,drawElevationProfileActive:t,currentProfileFeature:i,init:m,clearFeature:w,hasLineFeature:S,destroy:T}}const Vfe={"data-cy":"toolbarElevationProfile",class:"relative"},Zfe={class:"absolute bottom-full top-auto z-20 flex flex-col gap-2 bg-white border border-gray-400 p-2 rounded shadow-lg"},zfe={class:"flex gap-2"},Ufe=$e({__name:"toolbar-elevation-profile",setup(a){const{t:e}=wt(),t=iN(),{currentProfileFeature:i}=Tt(t),n=Dfe(),s=vi().getOlMap(),r=St(()=>{if(!i.value)return;const u=new Vf;return u.setGeometry(i.value.getGeometry()),u.map=s,u.id=Date.now(),u.label=e("Elevation Profile"),u.featureType="drawnLine",u});In(()=>{n.init()}),es(()=>{n.destroy()});function l(){n.clearFeature(),n.drawElevationProfileActive.value=!0}return(u,d)=>(U(),$("div",Vfe,[W("div",Zfe,[W("div",zfe,[W("button",{"data-cy":"elevationProfileRedraw",class:"px-3 py-1 bg-primary text-white rounded hover:bg-secondary",onClick:l},q(k(e)("Draw new line")),1),k(i)?(U(),$("button",{key:0,"data-cy":"elevationProfileClear",class:"px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600",onClick:d[0]||(d[0]=(...m)=>k(n).clearFeature&&k(n).clearFeature(...m))},q(k(e)("Clear")),1)):Ae("",!0)]),lt(tE,{class:"w-[450px]",feature:r.value,"enable-export-c-s-v":!0,"activate-positioning":!0},null,8,["feature"])])]))}});class Hfe{constructor(e){zt(this,"printExtent");this.setPrintExtent(e||[0,0,1/0,1/0])}getPrintExtent(){return this.printExtent}setPrintExtent(e){this.printExtent=e}layerFilter(e){return!0}geometryFilter(e){return!0}feature(e,t){}line(e,t,i,n){}point(e,t,i,n){}text(e,t,i,n){}wmtsLayer(e,t,i){}wmsLayer(e,t,i){}}const nN={WMTS_PIXEL_SIZE:28e-5,DOTS_PER_INCH:72,METERS_PER_INCH:.0254,CIRCLE_TO_POLYGON_SIDES:64};function dA(a){return a.length===1?`0${a}`:a}function hA(a){const e=a[0],t=a[1],i=a[2];if(e!==(e&255)||t!==(t&255)||i!==(i&255))throw new Error(`"(${e},${t},${i})" is not a valid RGB color`);const n=dA(e.toString(16)),s=dA(t.toString(16)),r=dA(i.toString(16));return`#${n}${s}${r}`}function Xfe(a){const e=a.getProjection(),t=a.getTileGrid();console.assert(t instanceof V3);const i=t.getMatrixIds(),n=[],s=e.getMetersPerUnit();console.assert(!!s);for(let r=0;r<i.length;r++){const l=t.getFullTileRange(r),u=t.getResolution(r)*s;n.push({identifier:i[r],scaleDenominator:u/nN.WMTS_PIXEL_SIZE,tileSize:Ks(t.getTileSize(r)),topLeftCorner:t.getOrigin(r),matrixSize:[l.maxX-l.minX+1,l.maxY-l.minY+1]})}return n}const v2=document.createElement("canvas");function qfe(a,e){const t=v2.getContext("2d");return v2.width=a.width,v2.height=a.height,t.globalAlpha=e,t.drawImage(a,0,0),v2}function Yfe(a){const e=document.createElement("a");return e.href=encodeURI(a),decodeURI(e.href)}function Kfe(a){const e=a.getUrls();return console.assert(e.length>0),Yfe(e[0])}function jfe(a,e,t,i,n,s){e&&a.forEach(r=>{const l=r.getGeometry();if(!l)return;const u=l.clone();u.applyTransform((m,f,v)=>Ad(m,0,m.length,v||2,i,f));const d=e(r,t);d&&(Array.isArray(d)?d.forEach(m=>{n.setStyle(m),n.drawGeometry(u)}):(n.setStyle(d),n.drawGeometry(u)),s&&s(n,u))})}function $fe(a,e,t){const i=$o(),n=Cu(a);return Su(i,t[0]/2,t[1]/2,1/e,-1/e,0,-n[0],-n[1]),i}class Jfe extends U3{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:eme({extent:Z3(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const Qfe=Jfe,eye='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class tye extends Qfe{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[eye];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",n=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:n,wrapX:e.wrapX,zDirection:e.zDirection})}}const aye=tye,iye={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},V8={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class nye extends bB{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=$o(),this.tileClipContexts_=null}drawTile(e,t,i,n,s,r,l,u){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,n,s,r,l,u)}getTile(e,t,i,n){const s=this.getOrCreateTile(e,t,i,n);if(!s)return null;const l=n.viewState.resolution,u=n.viewHints;return(!(u[Jn.ANIMATING]||u[Jn.INTERACTING])||!s.wantedResolution)&&(s.wantedResolution=l),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const n=this.getLayer(),s=n.getRevision(),r=n.getRenderOrder()||null,l=e.wantedResolution,u=e.getReplayState(n);if(!u.dirty&&u.renderedResolution===l&&u.renderedRevision==s&&u.renderedRenderOrder==r)return;const d=n.getSource(),m=!!n.getDeclutter(),f=d.getTileGrid(),w=d.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),S=d.getSourceTiles(t,i,e),T=Ia(n);delete e.hitDetectionImageData[T],e.executorGroups[T]=[],u.dirty=!1;for(let M=0,G=S.length;M<G;++M){const P=S[M];if(P.getState()!=Ra.LOADED)continue;const F=P.tileCoord,N=f.getTileCoordExtent(F),V=mc(w,N),K=Kh(V,n.getRenderBuffer()*l,this.tempExtent),te=Mm(N,V)?null:K,J=new rP(0,V,l,t),ne=ZT(l,t),se=function(Ie,he){let we;const Oe=Ie.getStyleFunction()||n.getStyleFunction();if(Oe&&(we=Oe(Ie,l)),we){const Ye=this.renderFeature(Ie,ne,we,J,m,he);u.dirty=u.dirty||Ye}},de=P.getFeatures();r&&r!==u.renderedRenderOrder&&de.sort(r);for(let Ie=0,he=de.length;Ie<he;++Ie){const we=de[Ie];(!te||Rr(te,we.getGeometry().getExtent()))&&se.call(this,we,Ie)}const _e=J.finish(),Se=n.getRenderMode()!=="vector"&&m&&S.length===1?null:V,ce=new sP(Se,l,t,d.getOverlaps(),_e,n.getRenderBuffer(),!0);e.executorGroups[T].push(ce)}u.renderedRevision=s,u.renderedRenderOrder=r,u.renderedResolution=l}forEachFeatureAtCoordinate(e,t,i,n,s){var F,N;const r=t.viewState.resolution,l=t.viewState.rotation;i=i??0;const u=this.getLayer(),m=u.getSource().getTileGridForProjection(t.viewState.projection),f=Ss([e]);Kh(f,r*i,f);const v={},w=function(V,K,te){let J=V.getId();J===void 0&&(J=Ia(V));const ne=v[J];if(ne){if(ne!==!0&&te<ne.distanceSq){if(te===0)return v[J]=!0,s.splice(s.lastIndexOf(ne),1),n(V,u,K);ne.geometry=K,ne.distanceSq=te}}else{if(te===0)return v[J]=!0,n(V,u,K);s.push(v[J]={feature:V,layer:u,geometry:K,distanceSq:te,callback:n})}},S=this.renderedTiles,T=Ia(u),M=u.getDeclutter(),G=M?(N=(F=t.declutter)==null?void 0:F[M])==null?void 0:N.all().map(V=>V.value):null;let P;e:for(let V=0,K=S.length;V<K;++V){const te=S[V],J=m.getTileCoordExtent(te.wrappedTileCoord);if(!Rr(J,f))continue;const ne=te.executorGroups[T];for(let se=0,de=ne.length;se<de;++se)if(P=ne[se].forEachFeatureAtCoordinate(e,r,l,i,w,G),P)break e}return P}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const n=this.getLayer(),s=n.getSource(),r=this.renderedProjection,l=r.getExtent(),u=this.renderedResolution,d=s.getTileGridForProjection(r),m=Mr(this.renderedPixelToCoordinateTransform_,e.slice()),f=d.getTileCoordForCoordAndResolution(m,u).toString(),v=this.renderedTiles.find(F=>F.tileCoord.toString()===f&&F.getState()===Ra.LOADED);if(!v||v.loadingSourceTiles>0){t([]);return}s.getWrapX()&&r.canWrapX()&&!lc(l,d.getTileCoordExtent(v.tileCoord))&&oI(m,r);const w=Ia(n),S=d.getTileCoordExtent(v.wrappedTileCoord),T=Vd(S),M=[(m[0]-T[0])/u,(T[1]-m[1])/u],G=v.getSourceTiles().reduce((F,N)=>F.concat(N.getFeatures()),[]);let P=v.hitDetectionImageData[w];if(!P){const F=Ks(d.getTileSize(d.getZForResolution(u,s.zDirection))),N=this.renderedRotation_,V=[this.getRenderTransform(d.getTileCoordCenter(v.wrappedTileCoord),u,0,fl,F[0]*fl,F[1]*fl,0)];P=lP(F,V,G,n.getStyleFunction(),d.getTileCoordExtent(v.wrappedTileCoord),v.getReplayState(n).renderedResolution,N),v.hitDetectionImageData[w]=P}t(uP(M,G,P))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),r=s.getZForResolution(this.renderedResolution),l={};return i.forEach(u=>{if(u.tileCoord[0]!==r||u.getState()!==Ra.LOADED)return;const d=u.getSourceTiles();for(let m=0,f=d.length;m<f;++m){const v=d[m],w=v.getKey();if(w in l)continue;l[w]=!0;const S=v.tileCoord;if(Rr(e,s.getTileCoordExtent(S))){const T=v.getFeatures();if(T)for(let M=0,G=T.length;M<G;++M){const P=T[M],F=P.getGeometry();Rr(e,F.getExtent())&&t.push(P)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var v;const i=this.context,n=i.globalAlpha;i.globalAlpha=t.opacity;const s=e.viewHints,r=!(s[Jn.ANIMATING]||s[Jn.INTERACTING]),l=[this.context.canvas.width,this.context.canvas.height],u=this.getLayer().getDeclutter(),d=u?(v=e.declutter)==null?void 0:v[u]:void 0,m=Ia(this.getLayer()),f=this.renderedTiles;for(let w=0,S=f.length;w<S;++w){const T=f[w],M=T.executorGroups[m];if(M)for(let G=M.length-1;G>=0;--G)M[G].execute(this.context,l,this.getTileRenderTransform(T,e),e.viewState.rotation,r,sw,d)}i.globalAlpha=n}renderDeferredInternal(e){const t=this.renderedTiles,i=Ia(this.getLayer()),n=t.reduce((u,d,m)=>(d.executorGroups[i].forEach(f=>u.push({executorGroup:f,index:m})),u),[]),s=n.map(({executorGroup:u})=>u.getDeferredZIndexContexts()),r={};for(let u=0,d=n.length;u<d;++u){const m=n[u].executorGroup.getDeferredZIndexContexts();for(const f in m)r[f]=!0}Object.keys(r).map(Number).sort(pc).forEach(u=>{s.forEach((d,m)=>{d[u]&&(d[u].forEach(f=>{const{executorGroup:v,index:w}=n[m],S=v.getRenderedContext(),T=S.globalAlpha;S.globalAlpha=this.renderedOpacity_;const M=this.tileClipContexts_[w];M&&M.draw(S),f.draw(S),M&&S.restore(),S.globalAlpha=T,f.clear()}),d[u].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,n=t.viewState,s=n.center,r=n.resolution,l=n.rotation,u=t.size,d=Math.round(u[0]*i),m=Math.round(u[1]*i),v=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),w=e.tileCoord,S=v.getTileCoordExtent(e.wrappedTileCoord),T=v.getTileCoordExtent(w,this.tempExtent)[0]-S[0];return l5(F2(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(s,r,l,i,d,m,T))}postRender(e,t){var V;const i=t.viewHints,n=!(i[Jn.ANIMATING]||i[Jn.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),r=s.getRenderMode(),l=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const u=s.getDeclutter(),d=u?V8[r].filter(K=>!sw.includes(K)):V8[r],m=t.viewState,f=m.rotation,v=s.getSource(),S=v.getTileGridForProjection(m.projection).getZForResolution(m.resolution,v.zDirection),T=this.renderedTiles,M=[],G=[],P=[],F=Ia(s);let N=!0;for(let K=T.length-1;K>=0;--K){const te=T[K];N=N&&!te.getReplayState(s).dirty;const J=te.executorGroups[F].filter(Ie=>Ie.hasExecutors(d));if(J.length===0)continue;const ne=this.getTileRenderTransform(te,t),se=te.tileCoord[0];let de=!1;const _e=J[0].getClipCoords(ne);let Se=e,ce;if(_e){ce=new y3,Se=ce.getContext();for(let Ie=0,he=M.length;Ie<he;++Ie)if(S!==se&&se<G[Ie]){const we=M[Ie];Rr([_e[0],_e[3],_e[4],_e[7]],[we[0],we[3],we[4],we[7]])&&(de||(Se.save(),de=!0),Se.beginPath(),Se.moveTo(_e[0],_e[1]),Se.lineTo(_e[2],_e[3]),Se.lineTo(_e[4],_e[5]),Se.lineTo(_e[6],_e[7]),Se.moveTo(we[6],we[7]),Se.lineTo(we[4],we[5]),Se.lineTo(we[2],we[3]),Se.lineTo(we[0],we[1]),Se.clip())}M.push(_e),G.push(se)}for(let Ie=0,he=J.length;Ie<he;++Ie)J[Ie].execute(e,[e.canvas.width,e.canvas.height],ne,f,n,d,(V=t.declutter)==null?void 0:V[u]);de&&(Se===e?Se.restore():P[K]=ce)}e.globalAlpha=l,this.ready=N,this.tileClipContexts_=P,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,n,s,r){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let u=0,d=i.length;u<d;++u)l=ow(n,e,i[u],t,this.boundHandleStyleImageChange_,void 0,s,r)||l;else l=ow(n,e,i,t,this.boundHandleStyleImageChange_,void 0,s,r);return l}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),n=t.getRevision(),s=e.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==n}renderTileImage_(e,t){const i=this.getLayer(),n=e.getReplayState(i),s=i.getRevision(),r=e.executorGroups[Ia(i)];n.renderedTileRevision=s;const l=e.wrappedTileCoord,u=l[0],d=i.getSource();let m=t.pixelRatio;const v=t.viewState.projection,w=d.getTileGridForProjection(v),S=w.getResolution(e.tileCoord[0]),T=t.pixelRatio/e.wantedResolution*S,M=w.getResolution(u),G=e.getContext();m=Math.round(Math.max(m,T/m));const P=d.getTilePixelSize(u,m,v);G.canvas.width=P[0],G.canvas.height=P[1];const F=m/T;if(F!==1){const te=uR(this.tmpTransform_);F2(te,F,F),G.setTransform.apply(G,te)}const N=w.getTileCoordExtent(l,this.tempExtent),V=T/M,K=uR(this.tmpTransform_);F2(K,V,-V),FH(K,-N[0],-N[3]);for(let te=0,J=r.length;te<J;++te)r[te].execute(G,[G.canvas.width*F,G.canvas.height*F],K,0,!0,iye[i.getRenderMode()],null);n.renderedTileResolution=e.wantedResolution}}const rye=nye;class sye extends Z5{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const n=e.renderMode||"hybrid";sn(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new rye(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Dh.PRELOAD)}getUseInterimTilesOnError(){return this.get(Dh.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Dh.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Dh.USE_INTERIM_TILES_ON_ERROR,e)}}const oye=sye;class lye extends I3{constructor(){super()}getType(){return"text"}readFeature(e,t){return this.readFeatureFromText(x2(e),this.adaptOptions(t))}readFeatureFromText(e,t){return ka()}readFeatures(e,t){return this.readFeaturesFromText(x2(e),this.adaptOptions(t))}readFeaturesFromText(e,t){return ka()}readGeometry(e,t){return this.readGeometryFromText(x2(e),this.adaptOptions(t))}readGeometryFromText(e,t){return ka()}readProjection(e){return this.readProjectionFromText(x2(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}writeFeatureText(e,t){return ka()}writeFeatures(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}writeFeaturesText(e,t){return ka()}writeGeometry(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}writeGeometryText(e,t){return ka()}}function x2(a){return typeof a=="string"?a:""}const uye=lye,gd={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"},rN=Object.freeze({LineString:gd.LINE_STRING,Point:gd.POINT,Polygon:gd.POLYGON,MultiLineString:gd.LINE_STRING,MultiPoint:gd.POINT,MultiPolygon:gd.POLYGON});function cye(a){return a in rN}const tx="_mfp_style",dye=a=>{const e=a.geometry;return e&&e.type==="Point"?0:1},_A=a=>{const e=Array.isArray(a)?a.join(","):a;return`[${tx} = '${e}']`};class sN{constructor(e,t){zt(this,"layerState_");zt(this,"layer_");zt(this,"customizer_");zt(this,"geojsonFormat",new Bd);zt(this,"deepIds_",new Map);zt(this,"lastDeepId_",0);this.layerState_=e,this.layer_=this.layerState_.layer,this.customizer_=t}encodeVectorLayer(e){const t=this.layer_.getSource();if(!t)return null;console.assert(t instanceof Qo);const i=t.getFeaturesInExtent(this.customizer_.getPrintExtent()),n=[],s={version:2};return i.forEach(l=>this.encodeFeature(l,e,n,s)),n.length<=0||Object.keys(s).length<=1?null:(n.sort((l,u)=>{const d=dye;return d(u)-d(l)}),{geoJson:{type:"FeatureCollection",features:n},opacity:this.layerState_.opacity,style:s,type:"geojson",name:this.layer_.get("name")})}encodeFeature(e,t,i,n){let s=null;const r=e.getStyleFunction()||this.layer_.getStyleFunction();r&&(s=r(e,t)),e.getGeometry().getType()==="Circle"&&(e=this.featureCircleAsPolygon(e));const l=this.geojsonFormat.writeFeatureObject(e);let u=s!==null&&!Array.isArray(s)?[s]:s;if(!u||(u=u.filter(m=>!!m),u.length===0))return;console.assert(Array.isArray(u));let d=!1;u.forEach(m=>{let f=m.getGeometry(),v;if(typeof f=="function"&&(f=f(e)),f&&typeof f=="object"){const w=e.clone();w.setGeometry(f),v=this.geojsonFormat.writeFeatureObject(w),i.push(v)}else{if(v=l,f=e.getGeometry(),!f||!this.customizer_.geometryFilter(f))return;d||(i.push(v),d=!0)}this.addVectorStyle(n,v,m)})}getDeepStyleUid(e){const t=[e];let i="";for(;t.length;){const s=t.pop();i+="_k"+Ia(s);for(const[r,l]of Object.entries(s))l!=null&&(["number","string","boolean"].includes(typeof l)?i+=`_${r}:${l}`:t.push(l))}if(this.deepIds_.has(i))return this.deepIds_.get(i).toString();const n=++this.lastDeepId_;return this.deepIds_.set(i,n),n.toString()}addVectorStyle(e,t,i){const n=this.getDeepStyleUid(i),s=_A(n);let r;if(s in e)r=!0;else{const l=this.encodeVectorStyle(t,i);r=l&&l.symbolizers.length!==0,r&&(e[s]=l)}if(r){t.properties||(t.properties={}),this.customizer_.feature(this.layerState_,t);const l=t.properties[tx];if(l){const u=[...l.split(","),n];e[_A(u)]={symbolizers:[...e[_A(l)].symbolizers,...e[s].symbolizers]},t.properties[tx]=u.join(",")}else t.properties[tx]=n}}encodeVectorStyle(e,t){const i=e.geometry.type;if(!cye(i))return console.warn("Unsupported geometry type: ",i),null;const n=rN[i],s={symbolizers:[]},r=t.getFill(),l=t.getImage(),u=t.getStroke(),d=t.getText();return n===gd.POLYGON?r!==null&&this.encodeVectorStylePolygon(e,s.symbolizers,r,u):n===gd.LINE_STRING?u!==null&&this.encodeVectorStyleLine(e,s.symbolizers,u):n===gd.POINT&&l!==null&&this.encodeVectorStylePoint(e,s.symbolizers,l),d!==null&&this.encodeVectorStyleText(e,s.symbolizers,d),s}encodeVectorStyleFill(e,t,i){let n=i.getColor();n!==null&&(console.assert(typeof n=="string"||Array.isArray(n)),n=Zl(n),console.assert(Array.isArray(n),"only supporting fill colors"),t.fillColor=hA(n),t.fillOpacity=n[3])}encodeVectorStyleLine(e,t,i){const n={type:"line"};this.encodeVectorStyleStroke(e,n,i),this.customizer_.line(this.layerState_,e,n,i),t.push(n)}encodeVectorStylePoint(e,t,i){let n;i instanceof to?n=this.encodeVectorStylePointStyleCircle(e,i):i instanceof jh&&(n=this.encodeVectorStylePointStyleIcon(e,i)),n&&(this.customizer_.point(this.layerState_,e,n,i),t.push(n))}encodeVectorStylePointStyleCircle(e,t){const i={type:"point"};i.pointRadius=t.getRadius();const n=t.getScale();n&&(Array.isArray(n)?i.pointRadius*=(n[0]+n[1])/2:i.pointRadius*=n);const s=t.getFill();let r=t.getStroke();return s!==null&&(this.encodeVectorStyleFill(e,i,s),r||(r=new mn({color:s.getColor()}))),r!==null&&this.encodeVectorStyleStroke(e,i,r),i}encodeVectorStylePointStyleIcon(e,t){const i=t.getSrc();if(i===void 0)return;const n={type:"point",externalGraphic:i},s=t.getOpacity();s!==null&&(n.graphicOpacity=s);const r=t.getSize();if(r!==null){let u=t.getScale();Array.isArray(u)&&(u=(u[0]+u[1])/2),isNaN(u)&&(u=1);const d=r[0]*u,m=r[1]*u;n.graphicWidth=m,this.addGraphicOffset_(n,t,d,m)}let l=t.getRotation();return isNaN(l)&&(l=0),n.rotation=Wd(l),n}addGraphicOffset_(e,t,i,n){if(this.hasDefaultAnchor_(t))return;const s=t.getAnchor(),r=i/2-s[0],l=n/2-s[1];e.graphicXOffset=r,e.graphicYOffset=l}hasDefaultAnchor_(e){const t=e,i=t.anchor_[0]===.5&&t.anchor_[1]===.5,n=t.anchorOrigin_==="top-left",s=t.anchorXUnits_==="fraction",r=t.anchorYUnits_==="fraction";return i&&n&&s&&r}encodeVectorStylePolygon(e,t,i,n){const s={type:"polygon"};this.encodeVectorStyleFill(e,s,i),n!==null&&this.encodeVectorStyleStroke(e,s,n),t.push(s)}encodeVectorStyleStroke(e,t,i){const n=i.getColor();if(n!==null){console.assert(typeof n=="string"||Array.isArray(n));const d=Zl(n);console.assert(Array.isArray(d),"only supporting stroke colors"),t.strokeColor=hA(d),t.strokeOpacity=d[3]}const s=i.getLineDash();s!==null&&(t.strokeDashstyle=s.join(" "));const r=i.getWidth();r!==void 0&&(t.strokeWidth=r);const l=i.getLineCap();l&&(t.strokeLinecap=l);const u=i.getLineJoin();u&&(t.strokeLinejoin=u)}encodeVectorStyleText(e,t,i){if(i.getText()){const s=C5(i.getFont()||"12px sans-serif"),r={type:"text",label:i.getText(),fontFamily:(s==null?void 0:s.family)??"sans-serif",fontSize:(s==null?void 0:s.size)??"12px",fontStyle:(s==null?void 0:s.style)??"normal",fontWeight:(s==null?void 0:s.weight)??"normal",labelXOffset:i.getOffsetX(),labelYOffset:-i.getOffsetY(),labelAlign:"cm"},l=i.getFill();l!==null&&(this.encodeVectorStyleFill(e,r,l),r.fontColor=r.fillColor);const u=i.getStroke();if(u!==null){const d=u.getColor();if(d){console.assert(typeof d=="string"||Array.isArray(d));const f=Zl(d);console.assert(Array.isArray(f),"only supporting stroke colors"),r.haloColor=hA(f),r.haloOpacity=f[3]}const m=u.getWidth();m!==void 0&&(r.haloRadius=m)}this.customizer_.text(this.layerState_,e,r,i),t.push(r)}}featureCircleAsPolygon(e){return new kn({...e.getProperties(),geometry:jW(e.getGeometry(),nN.CIRCLE_TO_POLYGON_SIDES)})}}class hye{constructor(e){zt(this,"url");zt(this,"scratchCanvas",document.createElement("canvas"));this.url=e}async encodeMap(e){const t=e.map.getView(),i=t.getCenter(),n=t.getProjection().getCode(),s=Wd(t.getRotation()),r=e.map.getLayerGroup(),l=await this.encodeLayerGroup(r,e.printResolution,e.customizer);return{center:i,dpi:e.dpi,projection:n,rotation:s,scale:e.scale,layers:l}}async encodeLayerGroup(e,t,i){const n=e.getLayerStatesArray().filter(i.layerFilter).sort((r,l)=>(r.zIndex||0)-(l.zIndex||0)).reverse(),s=[];for(const r of n){const l=await this.encodeLayerState(r,t,i);l&&(Array.isArray(l)?s.push(...l):s.push(l))}return s}async encodeLayerState(e,t,i){if(!e.visible||t<e.minResolution||t>=e.maxResolution)return null;const n=e.layer;if(n instanceof Z0)return this.encodeImageLayerState(e,i);if(n instanceof eo){const s=new sN(e,i).encodeVectorLayer(t),r=e.layer.get("renderAsSvg");return r!==void 0&&(s.renderAsSvg=r),s}return n instanceof Wg?this.encodeTileLayerState(e,i):n instanceof oye?await this.encodeMVTLayerState(e,t,i):null}encodeImageLayerState(e,t){const i=e.layer;return i instanceof Z0||console.assert(i instanceof Z0),i.getSource()instanceof Mw?this.encodeImageWmsLayerState(e,t):null}encodeImageWmsLayerState(e,t){const n=e.layer.getSource();console.assert(n instanceof Mw);const s=n.getUrl();return s!==void 0?this.encodeWmsLayerState(e,s,n.getParams(),t):null}encodeWmsLayerState(e,t,i,n){var l;const s=e.layer,r={...i};return["SERVICE","REQUEST","FORMAT","LAYERS","VERSION","STYLES"].forEach(u=>delete r[u]),{name:s.get("name"),baseURL:t,imageFormat:i.FORMAT,layers:i.LAYERS.split(","),customParams:r,serverType:"mapserver",type:"wms",opacity:s.getOpacity(),version:i.VERSION,useNativeAngle:!0,styles:((l=i.STYLES)==null?void 0:l.split(","))??[""]}}encodeTileLayerState(e,t){const i=e.layer;console.assert(i instanceof Wg);const n=i.getSource();return n instanceof N1?this.encodeTileWmtsLayerState(e,t):n instanceof l4?this.encodeTileWmsLayerState(e,t):n instanceof aye?this.encodeOSMLayerState(e,t):null}encodeTileWmsLayerState(e,t){const i=e.layer;console.assert(i instanceof Wg);const n=i.getSource();console.assert(n instanceof l4);const s=n.getUrls();console.assert(!!s);const r=this.encodeWmsLayerState(e,s[0],n.getParams(),t);return t.wmsLayer(e,r,n),r}encodeOSMLayerState(e,t){const i=e.layer;return{type:"osm",baseURL:i.getSource().getUrls()[0],opacity:e.opacity,name:i.get("name")}}encodeTileWmtsLayerState(e,t){const i=e.layer;console.assert(i instanceof Wg);const n=i.getSource();console.assert(n instanceof N1);const s=n.getDimensions(),r=Object.keys(s),l={type:"wmts",baseURL:Kfe(n),dimensions:r,dimensionParams:s,imageFormat:n.getFormat(),name:i.get("name"),layer:n.getLayer(),matrices:Xfe(n),matrixSet:n.getMatrixSet(),opacity:e.opacity,requestEncoding:n.getRequestEncoding(),style:n.getStyle(),version:n.getVersion()};return t.wmtsLayer(e,l,n),l}async encodeMVTLayerState(e,t,i){const n=e.layer,{MVTEncoder:s}=await Gk(()=>import("./main-f6d1cff3.js"),[]),r=new s,l=i.getPrintExtent(),u=Ti(l)/t,d=vr(l)/t,m=[u,d],f={layer:n,printExtent:i.getPrintExtent(),tileResolution:t,styleResolution:t,canvasSize:m};return(await r.encodeMVTLayer(f)).filter(w=>w.baseURL.length>6).map(w=>Object.assign({type:"image",name:n.get("name"),opacity:1,imageFormat:"image/png"},w))}async encodeAsImageLayer(e,t,i,n){const s=e.layer,r=i.getPrintExtent(),l=Ti(r)/t,u=vr(r)/t,d=[l,u],m=Dme(this.scratchCanvas.getContext("2d"),{size:d,pixelRatio:1}),f=$fe(r,t,d),v=s.getSource().getFeatures(),w=s.getStyleFunction();return jfe(v,w,t,f,m,n),{type:"image",extent:r,imageFormat:"image/png",opacity:1,name:s.get("name"),baseURL:qfe(this.scratchCanvas,s.getOpacity()).toDataURL("PNG")}}}const m4=39.37,p4=72;class _ye extends Jm{constructor(e={}){super(e),this.context_=Zr(),this.context_.canvas.style.opacity="0.5",this.context_.canvas.style.position="absolute",this.size=void 0,this.rotation=void 0,this.scale=void 0}render(e){const t=this.context_.canvas.width=e.size[0],i=this.context_.canvas.height=e.size[1],n=[t/2,i/2];this.context_.beginPath(),this.context_.moveTo(0,0),this.context_.lineTo(t,0),this.context_.lineTo(t,i),this.context_.lineTo(0,i),this.context_.lineTo(0,0),this.context_.closePath();const s=this.getSize();if(!s)return;const r=s[1],l=s[0],u=this.getScale();if(!u)return;const d=e.viewState.resolution,m=l/p4/m4*u/d/2,f=r/p4/m4*u/d/2,v=this.getRotation()!==void 0?Js(this.getRotation()):0,w=Math.sqrt(Math.pow(m,2)+Math.pow(f,2)),S=Math.atan(f/m)-v,T=Math.atan(m/f)-v,M=n[0]-Math.cos(S)*w,G=n[1]+Math.sin(S)*w,P=n[0]+Math.sin(T)*w,F=n[1]+Math.cos(T)*w,N=n[0]+Math.cos(S)*w,V=n[1]-Math.sin(S)*w,K=n[0]-Math.sin(T)*w,te=n[1]-Math.cos(T)*w;return this.context_.moveTo(M,G),this.context_.lineTo(P,F),this.context_.lineTo(N,V),this.context_.lineTo(K,te),this.context_.lineTo(M,G),this.context_.closePath(),this.context_.fillStyle="#000",this.context_.fill(),this.context_.canvas}getSize(){return this.size}getScale(){return this.scale}getRotation(){return this.rotation}setSize(e){this.size=e}setScale(e){this.scale=e}setRotation(e){this.rotation=e}}const mye=$e({__name:"notification-item",props:{notification:{}},emits:["close"],setup(a){const e=a,t=Di(!0);function i(n,s){setTimeout(()=>{t.value=!1},e.notification.duration),s()}return(n,s)=>{const r=wl("dompurify-html");return U(),Gt(aI,{name:"fade-out",appear:"","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0",onEnter:i,onAfterLeave:s[0]||(s[0]=l=>n.$emit("close"))},{default:Ht(()=>[t.value?La((U(),$("div",{key:0,"data-cy":"notification",class:Pa(["lux-alert",`lux-${e.notification.type}`]),role:"alert"},null,2)),[[r,e.notification.message]]):Ae("",!0)]),_:1})}}}),pye={key:0,class:"lux-notifications fixed w-[500px] top-10 left-1/2 ml-[-250px] z-50","data-cy":"alertNotifications"},gye=$e({__name:"alert-notifications",setup(a){const e=Ls(),{notifications:t}=Tt(e);function i(n){e.removeNotification(n)}return(n,s)=>(U(),Gt(Kw,{to:"body"},[k(t).length?(U(),$("div",pye,[(U(!0),$(Ot,null,xi(k(t),(r,l)=>(U(),Gt(mye,{key:l,notification:r,onClose:()=>i(r.uuid)},null,8,["notification","onClose"]))),128))])):Ae("",!0)]))}}),fye=["title"],Z8=$e({__name:"background-selector-item",props:{bgTitle:{type:String,default:""},bgName:{type:String,default:""}},setup(a){const{t:e}=wt(),t=a,i=St(()=>{const s=e(t.bgTitle),r=t.bgTitle.length>0,l=e(t.bgName);return`${s}${r?" - ":""}${l}`}),n=St(()=>`h-full w-full rounded-sm lux-bg-sel-icon
        lux-bg-sel-${t.bgName}
        bg-${t.bgName}_sm
        md:bg-${t.bgName}
        hd:bg-${t.bgName}_sm_hi
        hd_md:bg-${t.bgName}_hi`);return(s,r)=>(U(),$("button",{title:i.value,class:Pa(n.value)},null,10,fye))}}),yye={key:0,class:"flex flex-row-reverse"},z8=$e({__name:"background-selector",props:{isOpen:{type:Boolean,default:!1}},setup(a){const{t:e,i18next:t}=wt(),i=A3(),n=Zi(),s=ur(),{bgLayer:r,is3dMesh:l}=Tt(n),d=Fe(a.isOpen),m=Fe(!1),f=Fe([]),v=St(()=>{var M;return((M=r.value)==null?void 0:M.id)??i.getNullId()}),w=St(()=>{var M,G;return(G=(M=f.value)==null?void 0:M.find(P=>P.id===v.value))==null?void 0:G.name});Ut(()=>s.bgLayers,M=>{f.value=Ld().bg_layers.map(G=>Object.assign({id:G.id},M.find(P=>G.id===P.id),{name:G.icon_id}))},{immediate:!0}),Ut(()=>n.bgLayer,(M,G)=>{const P=n.layers;G===void 0&&M===null&&(P==null?void 0:P.length)===0&&(i.setBgLayer(i.defaultSelectedBgId.value),M===null&&(m.value=!0))}),Ut([m,()=>t.isInitialized],([M,G])=>{M&&G&&Ls().addNotification(e("Aucune couche n'tant dfinie pour cette carte, une couche de fond a automatiquement t ajoute."))});function S(M){i.setBgLayer(M.id),d.value=!1}function T(){d.value=!d.value}return(M,G)=>k(l)?Ae("",!0):(U(),$("div",yye,[W("div",{"data-cy":"selectedBg",class:Pa(["lux-bg-sel border border-black",d.value===!0?"hidden":"block"])},[lt(Z8,{"aria-expanded":d.value,"bg-title":"Select BG layer","bg-name":w.value,onClick:T},null,8,["aria-expanded","bg-name"])],2),W("div",{"data-cy":"available-bgs",class:Pa(d.value===!0?"flex flex-col md:flex-row":"hidden")},[(U(!0),$(Ot,null,xi(f.value,P=>(U(),$("div",{key:P.id,class:Pa(["lux-bg-sel hover:bg-cyan-600",P.id===v.value?"border-red-500 border-2":"border-black border"])},[lt(Z8,{"bg-name":P.name,onClick:F=>S(P)},null,8,["bg-name","onClick"])],2))),128))],2)]))}}),Hm=Co("info",()=>{const a=Fe(void 0),e=Fe(void 0),t=Fe(!1),i=Fe(!1),n=Fe(!0),s=Fe(!1),r=Fe(!1),l=Fe(void 0),u=Fe(void 0);return{locationInfoCoords:a,locationInfoInfos:e,hidePointer:t,isStreetviewActive:i,noDataAtLocation:n,streetViewLoading:s,panoPositionChanging:r,svFeature:l,routingFeatureTemp:u}}),bye=1501,vye="infoFeatureLayer";function xye(){const a=vi().getOlMap();let e,t=null;const{infoOpen:i}=Tt(_i()),{locationInfoCoords:n,hidePointer:s}=Tt(Hm()),{clearContent:r}=Zm(),l=new eo({source:new Qo({features:[]}),zIndex:bye});l.set("cyLayerType",vye),m(l),a.addLayer(l),Ut(i,f=>{f||(n.value=void 0)}),Ut([n,s],([f,v])=>{var w,S;if((w=l.getSource())==null||w.clear(),f&&!v){i.value=!0;const T=new kn(new Qn(f));(S=l.getSource())==null||S.addFeature(T)}},{immediate:!0}),a.getViewport().addEventListener("contextmenu",f=>f.preventDefault()),ba(a,"pointerdown",f=>d(f));function u(f){return a.getEventCoordinate(f.originalEvent)}function d(f){t=f.pixel,f.originalEvent.button===2?(n.value=u(f),r()):f.originalEvent.pointerType==="touch"&&(window.clearTimeout(e),e=window.setTimeout(()=>{n.value=u(f),r()}))}ba(a,"pointerup",f=>{t&&f.originalEvent.button===0&&(s.value||(n.value=void 0)),window.clearTimeout(e),t=null}),ba(a,"pointermove",f=>{if(t!==null){const v=f.pixel,w=Math.abs(t[0]-v[0]),S=Math.abs(t[1]-v[1]);w+S>6&&(window.clearTimeout(e),t=null)}});function m(f){const v=new wn({color:[255,255,0,.6]}),w=new mn({color:[255,155,55,1],width:3}),S=new to({radius:10,fill:v,stroke:w});f.setStyle([new Vi({image:S})])}}const wye="https://migration.geoportail.lu/raster",Iye="EPSG:3857",Cye="EPSG:2169",iE=async a=>{const e=kr(a,Iye,Cye);try{const t=await fetch(`${wye}?lon=${e[0]}&lat=${e[1]}`);if(!t.ok)throw new Error("Network response was not ok");return(await t.json()).dhm}catch{return null}},oN=Qre(iE,300),Sye={"EPSG:2169":"Luref","EPSG:4326":"Lon/Lat WGS84","EPSG:4326:DMS":"Lon/Lat WGS84 DMS","EPSG:4326:DMm":"Lon/Lat WGS84 DM","EPSG:3263*":"WGS84 UTM"},Aye=[46602,53725,106944,141219];async function Tye(a,e){const t=kr(a,e,Kl),[i,n,s]=(await Promise.allSettled([Mye(a),iE(a),Lye(t)])).map(r=>r.status==="fulfilled"?r.value:void 0);return{shortUrl:i,elevation:n,address:s,clickCoordinateLuref:t,isInBoxOfLidar:Eye(t)}}function Eye(a){return xc(Aye,a)}async function Mye(a){return(await Ul.getShortUrl(a)).short_url.replace("http://g-o.lu/migration/","https://migration.geoportail.lu/s/")}async function Lye(a){return(await(await fetch(`https://migration.geoportail.lu/geocode/reverse?easting=${a[0]}&northing=${a[1]}`)).json()).results[0]}const nE=Co("print",()=>{const a=Fe(void 0),e=Fe(void 0);return{featureInfoPrintableRef:a,locationInfoPrintableRef:e}},{});function Rye(a){return a&&`https://migration.geoportail.lu/qr?url=${a}`}function kye(a){return typeof a!==void 0?`https://migration.geoportail.lu/qr?url=https://migration.geoportail.lu/qr?map_id=${a}`:void 0}function U8(a){if(a)return a.startsWith("data:image")?a:(a.startsWith("/")&&"https://migration.geoportail.lu/".endsWith("/")&&(a="."+a),`https://migration.geoportail.lu/${a}`)}const Wye={class:"flex flex-row"},Gye={class:"no-print grow-[2] flex flex-col justify-end content-end"},Oye={id:"short_url_title",class:"text-3xl text-white"},Pye=["value"],Bye=["src"],Nye={class:"mt-5 text-3xl text-white"},Fye={class:"lux-info-table"},Dye={style:{"text-align":"left"}},Vye={style:{"text-align":"left"}},Zye=["disabled"],zye={class:"flex flex-wrap mt-1 gap-x-1"},Uye=["href"],Hye=["href"],Xye=["href"],qye={class:"create-itinerary-text"},Yye={class:"lux-panel-content relative grow p-2.5 bg-primary overflow-auto"},Kye={class:"text-white"},jye={class:"flex justify-center flex-col items-center"},$ye=["href"],Jye=$e({__name:"location-info",setup(a){const{t:e}=wt(),{locationInfoCoords:t,locationInfoInfos:i,routingFeatureTemp:n}=Tt(Hm()),{currentUser:s}=Tt(Mc()),{addNotification:r}=Ls(),l=vi().getOlMap(),u=Fe(),d=Fe(),m=Fe(),f=Fe(),v=Fe(),w=Fe({}),S=Fe(!1),T=Fe(!1),M=Fe("ACT"),G=Fe("base");xye(),P(t.value),Ut(t,P);async function P(Ie){Ie&&(i.value=await Tye(Ie,l.getView().getProjection()),u.value=i.value.shortUrl,d.value=Rye(i.value.shortUrl),v.value=i.value.clickCoordinateLuref,w.value=Object.fromEntries(Object.entries(Sye).map(([he,we])=>[we,DY(Ie,l.getView().getProjection(),he)])),m.value=i.value.elevation===null?"N/A":H5(i.value.elevation),f.value=i.value.address,T.value=i.value.isInBoxOfLidar)}Ut(s,Ie=>{M.value=(Ie==null?void 0:Ie.role)||"anonymous",G.value=(Ie==null?void 0:Ie.role)||"base"});const{locationInfoPrintableRef:F}=Tt(nE()),N=Ie=>F.value=Ie,V=St(()=>M.value==="ACT"),K=St(()=>G.value==="etat"||G.value==="commune"||M.value==="MinTour"),te=St(()=>!0),J=St(()=>v.value?`https://lidar.geoportail.lu?COORD_X=${v.value[0]}&COORD_Y=${v.value[1]}&COORD_Z=${parseInt(m.value||"0")}`:""),ne=St(()=>v.value?`/getRapportForageVirtuel?x=${v.value[0]}&y=${v.value[1]}`:""),se=St(()=>v.value?`http://streetsmart.cyclomedia.com/streetsmart?q=${v.value[0]};${v.value[1]}`:""),de=St(()=>v.value?`https://oblique.geoportail.lu/publication/viewer?x=${v.value[0]}&y=${v.value[1]}&crs=2169`:""),_e=St(function(){const Ie=v.value?kr(v.value,Kl,Gd):void 0;return v.value?`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${(Ie??[0,0])[1]},${(Ie??[0,0])[0]}&heading=0&pitch=0&fov=90`:""});function Se(){if(!t.value)return;const Ie=new kn(new Qn(t.value));f.value&&f.value.distance<=100?Ie.set("label",OR(f.value)):Ie.set("label",w.value.Luref),n.value=Ie}async function ce(){S.value=!0;try{await nse(ne.value,"")}catch{r(e("An error occurred while downloading forage."),on.ERROR)}finally{S.value=!1}}return Ut(S,Ie=>{Ie?l.getViewport().style.cursor="wait":l.getViewport().style.cursor=""}),(Ie,he)=>{var we;return U(),$(Ot,null,[W("div",{ref:N},[W("div",Wye,[W("div",Gye,[W("h3",Oye,q(k(e)("Short Url",{ns:"client"})),1),W("input",{"aria-labelledby":"short_url_title",onclick:"this.select();",class:"lux-input",type:"text",value:u.value,readonly:"true"},null,8,Pye)]),d.value?(U(),$("img",{key:0,class:"mx-5 mt-5",src:d.value},null,8,Bye)):Ae("",!0)]),W("div",null,[W("h3",Nye,q(k(e)("Location Coordinates",{ns:"client"})),1),W("table",null,[W("tbody",Fye,[(U(!0),$(Ot,null,xi(w.value,(Oe,Ye)=>(U(),$("tr",{key:Ye},[W("th",null,q(k(e)(Ye)),1),W("td",null,q(Oe),1)]))),128)),W("tr",null,[W("th",null,q(k(e)("Elevation")),1),W("td",null,q(m.value),1)]),W("tr",null,[W("th",Dye,q(k(e)("Adresse la plus proche")),1),W("td",null,q(k(OR)(f.value)),1)]),W("tr",null,[W("th",Vye,q(k(e)("Distance approximative")),1),W("td",null,q(k(w1)(((we=f.value)==null?void 0:we.distance)||null,0)),1)])])])])]),W("div",null,[he[3]||(he[3]=W("hr",null,null,-1)),V.value?(U(),$("button",{key:0,disabled:S.value,class:"lux-btn mt-1",onClick:he[0]||(he[0]=Oe=>ce())},q(k(e)("Rapport forage virtuel")),9,Zye)):Ae("",!0),W("div",zye,[T.value?(U(),$("a",{key:0,class:"lux-btn whitespace-nowrap",href:J.value,target:"_geoportal_ext_lidar"},q(k(e)("Lien vers la dmo lidar")),9,Uye)):Ae("",!0),K.value?(U(),$("a",{key:1,class:"lux-btn whitespace-nowrap",href:se.value,target:"_geoportal_ext_cyclomedia"},q(k(e)("Lien vers Cyclomdia")),9,Hye)):Ae("",!0),te.value?(U(),$("a",{key:2,class:"lux-btn whitespace-nowrap",href:de.value,target:"_geoportal_ext_obliques"},q(k(e)("Images obliques")),9,Xye)):Ae("",!0)]),W("div",null,[W("button",{class:"lux-btn mt-1",onClick:he[1]||(he[1]=Oe=>Se())},[W("span",qye,q(k(e)("Ajouter tape  mon itinraire")),1)])]),W("div",Yye,[he[2]||(he[2]=W("hr",null,null,-1)),W("span",Kye,q(k(e)("Suite  la modification des conditions d'utilisation de Google Street View, nous avons dsactiv son intgration dans la carte et proposons dsormais un lien direct vers le service de Google.")),1),W("div",jye,[W("a",{class:"lux-btn whitespace-nowrap",href:_e.value,target:"_streetview_ext"},q(k(e)("Ouvrir streetView")),9,$ye)])])])],64)}}}),Qye={class:"bg-white shadow-modal rounded-lg overflow-hidden w-[700px]"},e0e={class:"relative flex flex-row justify-center p-4 border-b-[1px]"},t0e={class:"text-xl"},a0e={key:0,class:"p-[15px] border-t-[1px]"},i0e={class:"flex flex-row justify-end"},rE=$e({__name:"modal-dialog",props:{footer:{type:Boolean,default:!0},maxHeight:{type:Boolean,default:!1},title:String},emits:["close"],setup(a){const{t:e}=wt(),t=Fe();In(()=>{t.value.focus()});const i=Di(!0);function n(){i.value=!1}return(s,r)=>(U(),Gt(Kw,{to:"body"},[r[5]||(r[5]=W("div",{class:"fixed inset-0 bg-gray-900 opacity-40 z-[1050]"},null,-1)),lt(aI,{appear:"","enter-active-class":"duration-200 ease-out","enter-from-class":"transform opacity-0 -translate-y-60","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"transform opacity-0 -translate-y-60",onAfterLeave:r[3]||(r[3]=l=>s.$emit("close"))},{default:Ht(()=>[i.value?(U(),$("div",{key:0,role:"dialog",ref_key:"modal",ref:t,tabindex:"0",onKeydown:r[2]||(r[2]=Uo(Jr(l=>n(),["stop"]),["esc"])),class:"fixed inset-x-0 inset-y-8 flex items-start justify-center z-[1100] outline-none"},[W("div",Qye,[W("div",e0e,[W("h4",t0e,q(a.title),1),W("button",{type:"button",class:"absolute right-2 top-1 text-slate-400 text-[24px]","data-dismiss":"modal","aria-label":"Close",onClick:r[0]||(r[0]=l=>n())},r[4]||(r[4]=[W("span",{"aria-hidden":"true"},"",-1)]))]),W("div",{class:Pa(["p-[15px] overflow-y-auto",a.maxHeight?"max-h-96":"max-h-full"])},[Xa(s.$slots,"content")],2),a.footer?(U(),$("div",a0e,[Xa(s.$slots,"footer",{},()=>[W("div",i0e,[W("button",{type:"button",class:"lux-btn","data-dismiss":"modal",onClick:r[1]||(r[1]=l=>n())},q(k(e)("Close",{ns:"client"})),1)])])])):Ae("",!0)])],544)):Ae("",!0)]),_:3})]))}});function n0e(){const{t:a}=wt();return{translate:(t,i)=>{const s=new DOMParser().parseFromString(t,"text/html");return s.querySelectorAll("[translate]").forEach(l=>{var d;const u=(d=l.textContent)==null?void 0:d.trim();u&&(l.textContent=a(u,i),l.removeAttribute("translate"))}),new XMLSerializer().serializeToString(s)}}}const r0e={key:0,class:"lux-legend"},s0e={key:1},g4=$e({__name:"legend-item",props:{layer:{},displayEmptyLegend:{type:Boolean,default:!1}},emits:["hasLegend","removedLegend"],setup(a,{emit:e}){const{t,i18next:i}=wt(),{translate:n}=n0e(),s=Fe(),r=a,l=e;Ut(()=>i.language,()=>u()),In(()=>u()),es(()=>l("removedLegend"));async function u(){var d;s.value=await ew.getLayerMetadata(r.layer.id,i.language),l("hasLegend",!!((d=s.value)!=null&&d.hasLegend))}return(d,m)=>{var v,w,S;const f=wl("dompurify-html");return s.value&&((v=s.value.legendHtml)!=null&&v.innerHTML)?(U(),$("div",r0e,[Xa(d.$slots,"title"),La(W("div",null,null,512),[[f,k(n)((w=s.value.legendHtml)==null?void 0:w.innerHTML)]])])):!((S=s.value)!=null&&S.hasLegend)&&d.displayEmptyLegend?(U(),$("div",s0e,q(k(t)("The legend is not available for this layer")),1)):Ae("",!0)}}}),o0e={class:"font-bold"},l0e={class:"col-span-2"},e0=$e({__name:"layer-metadata-item",props:{label:{},value:{}},setup(a){const e=a;return(t,i)=>(U(),$(Ot,null,[W("span",o0e,q(e.label),1),W("span",l0e,q(e.value),1)],64))}}),u0e={"data-cy":"metadata",class:"grid gap-2 grid-cols-3 pt-3 text-[13px] font-arial break-words"},c0e={key:2,class:"col-span-3 grid gap-2 grid-cols-3"},d0e={class:"font-bold"},h0e={class:"col-span-2"},_0e=["title"],m0e=["title"],p0e={key:4,class:"col-span-3"},g0e={class:"font-bold"},f0e={class:"col-span-2"},y0e=["href"],b0e={key:7,class:"col-span-3 grid gap-2 grid-cols-3"},v0e={class:"font-bold"},x0e={class:"col-span-2"},w0e={key:0},I0e={key:1},C0e={key:2},S0e={key:3},A0e={key:4},T0e=["href"],E0e={key:8,class:"grid gap-2 grid-cols-3 col-span-3"},M0e={class:"font-bold"},L0e={class:"col-span-2"},R0e=["href"],k0e={key:9,class:"col-span-3"},mA=220,W0e=$e({__name:"layer-metadata",setup(a){const e=OI(),{metadataLayer:t}=Tt(e),{t:i,i18next:n}=wt(),s=Fe(),r=Fe(!0);Ut(t,async f=>{var v,w;s.value=f?await ew.getLayerMetadata(f.id,n.language):void 0,r.value=(((w=(v=s.value)==null?void 0:v.description)==null?void 0:w.length)||0)<mA}),Ut(()=>n.language,async f=>{t.value&&(s.value=await ew.getLayerMetadata(t.value.id,f))});const l=St(()=>{var f,v,w;return r.value?(f=s.value)==null?void 0:f.description:(w=(v=s.value)==null?void 0:v.description)==null?void 0:w.slice(0,mA)});function u(){r.value=!0}function d(){r.value=!1}function m(){e.clearMetadataLayer()}return(f,v)=>{const w=wl("dompurify-html");return s.value?(U(),Gt(rE,{key:0,footer:!1,"max-height":!0,title:k(i)(`${s.value.title}`,{ns:"client"}),onClose:m},{content:Ht(()=>{var S,T,M,G,P,F,N,V,K,te,J,ne,se,de;return[W("div",u0e,[s.value.name?(U(),Gt(e0,{key:0,label:k(i)("Name"),value:s.value.name},null,8,["label","value"])):Ae("",!0),s.value.serviceDescription?(U(),Gt(e0,{key:1,label:k(i)("Description du Service"),value:s.value.serviceDescription},null,8,["label","value"])):Ae("",!0),s.value.description?(U(),$("div",c0e,[W("span",d0e,q(k(i)("Description")),1),W("span",h0e,[La(W("span",null,null,512),[[w,l.value]]),r.value?Ae("",!0):(U(),$("button",{key:0,title:k(i)("Display full description",{ns:"app"}),onClick:u,class:"text-secondary hover:underline"}," ... ",8,_0e)),r.value&&(((S=l.value)==null?void 0:S.length)||0)>mA?(U(),$("button",{key:1,title:k(i)("Hide full description",{ns:"app"}),onClick:d,class:"text-secondary hover:underline"}," - ",8,m0e)):Ae("",!0)])])):Ae("",!0),s.value.legalConstraints?(U(),Gt(e0,{key:3,label:k(i)("Contrainte d'utilisation"),value:s.value.legalConstraints},null,8,["label","value"])):Ae("",!0),((T=s.value.link)==null?void 0:T.length)!==0?(U(),$("div",p0e,[(U(!0),$(Ot,null,xi(s.value.link,_e=>(U(),$("div",{class:"grid gap-2 grid-cols-3",key:_e},[W("span",g0e,q(k(i)("Url vers la resource")),1),W("span",f0e,[W("a",{class:"text-secondary hover:underline",target:"_blank",href:_e},q(_e),9,y0e)])]))),128))])):Ae("",!0),s.value.revisionDate?(U(),Gt(e0,{key:5,label:k(i)("Revision date"),value:k(k7)(s.value.revisionDate,k(n).language)},null,8,["label","value"])):Ae("",!0),s.value.keyword?(U(),Gt(e0,{key:6,label:k(i)("Keywords"),value:(M=s.value.keyword)==null?void 0:M.join(",")},null,8,["label","value"])):Ae("",!0),s.value.responsibleParty?(U(),$("div",b0e,[W("div",v0e,q(k(i)("Contact")),1),W("div",x0e,[(G=s.value.responsibleParty)!=null&&G.organisaton?(U(),$("p",w0e,q((P=s.value.responsibleParty)==null?void 0:P.organisaton),1)):Ae("",!0),(F=s.value.responsibleParty)!=null&&F.name?(U(),$("p",I0e,q((N=s.value.responsibleParty)==null?void 0:N.name),1)):Ae("",!0),(V=s.value.responsibleParty)!=null&&V.unknown?(U(),$("p",C0e,q((K=s.value.responsibleParty)==null?void 0:K.unknown),1)):Ae("",!0),(te=s.value.responsibleParty)!=null&&te.address?(U(),$("p",S0e,q((J=s.value.responsibleParty)==null?void 0:J.address),1)):Ae("",!0),(ne=s.value.responsibleParty)!=null&&ne.email?(U(),$("p",A0e,[W("a",{class:"text-secondary hover:underline",href:"mailto:"+((se=s.value.responsibleParty)==null?void 0:se.email)},q((de=s.value.responsibleParty)==null?void 0:de.email),9,T0e)])):Ae("",!0)])])):Ae("",!0),s.value.metadataLink?(U(),$("div",E0e,[W("span",M0e,q(k(i)("Link to the metadata")),1),W("span",L0e,[W("a",{class:"text-secondary hover:underline",target:"_blank",href:s.value.metadataLink},q(k(i)("link")),9,R0e)])])):Ae("",!0),s.value.isError?(U(),$("div",k0e,q(k(i)("The metadata is right now not available")),1)):k(t)?(U(),Gt(g4,{key:10,class:"mt-5 col-span-3",layer:k(t),displayEmptyLegend:!0},{title:Ht(()=>[W("h4",null,q(k(i)("Legend")),1)]),_:1},8,["layer"])):Ae("",!0)])]}),_:1},8,["title"])):Ae("",!0)}}}),G0e={class:"flex flex-row flex-wrap pl-2.5","data-cy":"themeGrid"},O0e=["onClick"],P0e={class:"text-2xl absolute top-5"},B0e=$e({__name:"theme-grid",props:{themes:{}},setup(a){const{t:e}=wt(),t=a;return(i,n)=>(U(),$("div",G0e,[(U(!0),$(Ot,null,xi(t.themes,s=>(U(),$("button",{class:Pa(["relative shrink-0 h-[150px] w-1/2 px-2.5 text-start text-gray-100/40 uppercase hover:bg-[#ccc]",`bg-${s.name}-primary hover:text-${s.name}-primary`]),key:s.id,onClick:r=>i.$emit("setTheme",s.name)},[W("div",P0e,q(k(e)(`${s.name}`)),1),W("div",{class:Pa(["text-6xl absolute bottom-1 after:font-icons",`after:content-${s.name}`])},null,2)],10,O0e))),128))]))}}),N0e=["aria-expanded"],F0e={class:"py-0.5"},D0e={class:"px-1 py-0.5 shrink-0 flex flex-row text-[12px] bg-secondary text-white"},V0e={class:"py-[3px]"},Z0e={class:"flex flex-row flex-wrap ml-1 w-12"},z0e=$e({__name:"theme-selector-button",props:{themes:{},themeName:{},currentTheme:{},isOpen:{type:Boolean}},setup(a){const{t:e}=wt(),t=a,i=St(()=>{var n;return((n=t.themes)==null?void 0:n.slice(0,8))||[]});return(n,s)=>(U(),$("button",{class:"w-full flex flex-row justify-between bg-tertiary text-white px-2 py-1.5 uppercase cursor-pointer hover:bg-white hover:text-primary","aria-expanded":t.isOpen},[W("span",F0e,q(k(e)("Theme"))+": "+q(k(e)(`${t.themeName}`)),1),W("span",D0e,[W("span",V0e,q(k(e)("Changer")),1),W("span",Z0e,[(U(!0),$(Ot,null,xi(i.value,r=>(U(),$("div",{class:Pa(`h-2.5 w-2.5 m-px bg-${r.name}-primary`),key:r.id},null,2))),128))])])],8,N0e))}});class U0e{setCurrentThemeColors(e){const t=document.querySelector(":root");["primary","secondary","tertiary","quaternary"].forEach(n=>{const s=getComputedStyle(t).getPropertyValue(`--${e.replace(/\s/g,"_")}-${n}`);t.style.setProperty(`--color-${n}`,s)})}}const H0e=new U0e,X0e={key:0,class:"absolute inset-x-0 top-14 bottom-0 mt-1 bg-primary overflow-y-auto overflow-x-hidden"},q0e=$e({__name:"theme-selector",setup(a){const e=_i(),{setThemeGridOpen:t}=e,{themeGridOpen:i}=Tt(e),n=ur(),s=zl(),{theme:r,themes:l,themeName:u}=Tt(n),d=St(()=>{var v;return((v=l.value)==null?void 0:v.filter(w=>{var S;return((S=w.metadata)==null?void 0:S.display_in_switcher)===!0}))||[]});Ut(u,v=>{v&&H0e.setCurrentThemeColors(v)},{immediate:!0});function m(){t(!i.value)}function f(v){s.setTheme(v),m()}return(v,w)=>(U(),$(Ot,null,[lt(z0e,{"data-cy":"themeSelectorButton",onClick:m,themes:d.value,currentTheme:k(r),themeName:k(u),isOpen:k(i)},null,8,["themes","currentTheme","themeName","isOpen"]),k(i)?(U(),$("div",X0e,[lt(B0e,{onSetTheme:f,themes:d.value},null,8,["themes"])])):Ae("",!0)],64))}}),Y0e=["aria-expanded"],K0e={class:"leading-6"},j0e={key:0},ax=$e({__name:"expandable-panel",props:{expanded:{type:Boolean},title:{}},emits:["togglePanel"],setup(a){return(e,t)=>(U(),$(Ot,null,[W("button",{onClick:t[0]||(t[0]=i=>e.$emit("togglePanel")),class:"group w-full text-left flex px-2 py-1.5 uppercase bg-tertiary","aria-expanded":e.expanded},[W("span",{class:Pa(["grow",e.expanded?"text-white":"text-secondary"])},q(e.title),3),W("span",K0e,[W("span",{class:Pa(["fa fa-sharp fa-solid group-hover:text-white text-primary",e.expanded?"fa-caret-up":"fa-caret-down"])},null,2)])],8,Y0e),lt(aI,{name:"slide"},{default:Ht(()=>[e.expanded?(U(),$("div",j0e,[Xa(e.$slots,"default")])):Ae("",!0)]),_:3})],64))}});const $0e={class:"mb-px",key:"node.id"},J0e=["data-cy"],Q0e=["aria-expanded","data-cy"],e1e={class:"grow"},t1e={class:"leading-6"},a1e=["data-cy"],i1e={key:1,class:"flex text-tertiary pr-2"},n1e=["data-cy"],r1e=["data-cy"],s1e={class:"ml-1 hover:underline"},f4=$e({__name:"layer-tree-node",props:{node:{}},emits:["toggleLayer","toggleParent"],setup(a,{emit:e}){const t=a,i=e,{t:n}=wt(),{setMetadataLayer:s}=OI(),r=!!t.node.children,l=t.node.depth===0,u=t.node.depth>=10,d=St(()=>n(t.node.name,{ns:"client"}));function m(v){i("toggleLayer",v)}function f(v){i("toggleParent",v)}return(v,w)=>{const S=_Z("layer-tree-node",!0);return r?(U(),$("div",$0e,[v.node.depth===1?(U(),$("div",{key:0,"data-cy":`parentLayerLabel-${v.node.id}`},[lt(ax,{title:d.value,expanded:v.node.expanded,onTogglePanel:w[0]||(w[0]=T=>f(v.node))},null,8,["title","expanded"])],8,J0e)):v.node.depth>1&&!u?(U(),$("button",{key:1,class:Pa(["w-full text-left flex px-2 py-1.5 pl-2",v.node.expanded?"text-tertiary":"bg-white text-primary"]),"aria-expanded":v.node.expanded,onClick:w[1]||(w[1]=T=>f(v.node)),"data-cy":`parentLayerLabel-${v.node.id}`},[W("div",e1e,q(d.value),1),W("div",t1e,[W("div",{class:Pa(["fa-sharp fa-solid",v.node.expanded?"fa-minus":"fa-plus"])},null,2)])],10,Q0e)):Ae("",!0),u?Ae("",!0):(U(),$("div",{key:2,class:Pa(["bg-secondary",[{"pl-2":v.node.depth>1},{"lux-collapse":!l},{expanded:!l&&v.node.expanded}]]),"data-cy":`subLayerLabel-${v.node.id}`},[(U(!0),$(Ot,null,xi(v.node.children,T=>(U(),Gt(S,{key:T.id,node:T,onToggleParent:w[2]||(w[2]=M=>f(M)),onToggleLayer:w[3]||(w[3]=M=>m(M))},null,8,["node"]))),128))],10,a1e))])):(U(),$("div",i1e,[W("button",{"data-cy":`layerMetadata-${v.node.id}`,class:"self-start before:text-[.85rem] before:transform before:translate-y-[.1rem] before:inline-block before:content-['\\f129'] fa-solid fa-fw fa-fh fa-info",onClick:w[4]||(w[4]=T=>k(s)(v.node))},null,8,n1e),W("button",{class:Pa(["w-full text-left",{"font-bold":v.node.checked}]),onClick:w[5]||(w[5]=T=>m(v.node)),"data-cy":`layerLabel-${v.node.id}`},[W("i",{class:Pa(["fa-solid",v.node.checked?"fa-check-square":"fa-square"])},null,2),W("span",s1e,q(d.value),1)],10,r1e)]))}}});function y4(a,e=0){const{name:t,id:i,children:n,metadata:s}=a;return{name:t,id:i,depth:e,children:n==null?void 0:n.map(r=>y4(r,e+1)),checked:!1,expanded:(s==null?void 0:s.is_expanded)||!1}}class o1e{toggleNode(e,t,i){var n;return(t==null?void 0:t.id)===e?{...t,[i]:!t[i]}:{...t,children:(n=t.children)==null?void 0:n.map(s=>this.toggleNode(e,s,i))}}updateLayers(e,t){const{id:i}=e;if(e.children)return{...e,children:e.children.map(n=>this.updateLayers(n,t))};{const n=!!(t!=null&&t.find(s=>s.id===i));return{...e,checked:n}}}}const tf=new o1e,l1e={key:0,class:"mb-7"},u1e=$e({__name:"catalog-tree",setup(a){const e=Zi(),t=ur(),i=vo(),n=Di(),s=Di(),r=St(()=>!e.is3dActive||e.is3dActive&&!e.is3dMesh),{layerTrees_3d:l}=Tt(t);dr(u);function u(){var f;if(t.theme&&e.layers){const v=n.value&&n.value.id===((f=t.theme)==null?void 0:f.id)?n.value:y4(t.theme);n.value=tf.updateLayers(v,e.layers)}}dr(()=>{if(l.value){const f=s.value?s.value:y4(l.value);s.value=tf.updateLayers(f,e.layers3d)}});function d(f,v){const w=v?s:n;w.value=tf.toggleNode(f.id,w.value,"expanded")}function m(f,v){i.toggleLayer(+f.id,!f.checked,v,!0)}return(f,v)=>(U(),$("div",null,[s.value&&k(e).is3dActive?(U(),$("div",l1e,[(U(),Gt(f4,{node:s.value,key:s.value.id,onToggleParent:v[0]||(v[0]=w=>d(w,!0)),onToggleLayer:v[1]||(v[1]=w=>m(w,!0))},null,8,["node"]))])):Ae("",!0),n.value&&r.value?(U(),Gt(f4,{node:n.value,key:n.value.id,onToggleParent:v[2]||(v[2]=w=>d(w,!1)),onToggleLayer:v[3]||(v[3]=w=>m(w,!1))},null,8,["node"])):Ae("",!0)]))}}),c1e=$e({__name:"catalog-tab",setup(a){const{themeGridOpen:e}=Tt(_i());return(t,i)=>(U(),$(Ot,null,[lt(q0e),k(e)===!1?(U(),Gt(u1e,{key:0,"data-cy":"catalog",class:"pt-5 absolute inset-x-2.5 bg-primary overflow-y-auto overflow-x-hidden"})):Ae("",!0)],64))}});/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function H8(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,i)}return t}function Ac(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?H8(Object(t),!0).forEach(function(i){d1e(a,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):H8(Object(t)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))})}return a}function ix(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ix=function(e){return typeof e}:ix=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ix(a)}function d1e(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function Fd(){return Fd=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i])}return a},Fd.apply(this,arguments)}function h1e(a,e){if(a==null)return{};var t={},i=Object.keys(a),n,s;for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&(t[n]=a[n]);return t}function _1e(a,e){if(a==null)return{};var t=h1e(a,e),i,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);for(n=0;n<s.length;n++)i=s[n],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(a,i)&&(t[i]=a[i])}return t}var m1e="1.15.6";function kd(a){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(a)}var Yd=kd(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),_b=kd(/Edge/i),X8=kd(/firefox/i),X0=kd(/safari/i)&&!kd(/chrome/i)&&!kd(/android/i),sE=kd(/iP(ad|od|hone)/i),lN=kd(/chrome/i)&&kd(/android/i),uN={capture:!1,passive:!1};function Gi(a,e,t){a.addEventListener(e,t,!Yd&&uN)}function Li(a,e,t){a.removeEventListener(e,t,!Yd&&uN)}function Gw(a,e){if(e){if(e[0]===">"&&(e=e.substring(1)),a)try{if(a.matches)return a.matches(e);if(a.msMatchesSelector)return a.msMatchesSelector(e);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(e)}catch{return!1}return!1}}function cN(a){return a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode}function hu(a,e,t,i){if(a){t=t||document;do{if(e!=null&&(e[0]===">"?a.parentNode===t&&Gw(a,e):Gw(a,e))||i&&a===t)return a;if(a===t)break}while(a=cN(a))}return null}var q8=/\s+/g;function dl(a,e,t){if(a&&e)if(a.classList)a.classList[t?"add":"remove"](e);else{var i=(" "+a.className+" ").replace(q8," ").replace(" "+e+" "," ");a.className=(i+(t?" "+e:"")).replace(q8," ")}}function Ka(a,e,t){var i=a&&a.style;if(i){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(t=a.currentStyle),e===void 0?t:t[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=t+(typeof t=="string"?"":"px")}}function af(a,e){var t="";if(typeof a=="string")t=a;else do{var i=Ka(a,"transform");i&&i!=="none"&&(t=i+" "+t)}while(!e&&(a=a.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(t)}function dN(a,e,t){if(a){var i=a.getElementsByTagName(e),n=0,s=i.length;if(t)for(;n<s;n++)t(i[n],n);return i}return[]}function vc(){var a=document.scrollingElement;return a||document.documentElement}function Vr(a,e,t,i,n){if(!(!a.getBoundingClientRect&&a!==window)){var s,r,l,u,d,m,f;if(a!==window&&a.parentNode&&a!==vc()?(s=a.getBoundingClientRect(),r=s.top,l=s.left,u=s.bottom,d=s.right,m=s.height,f=s.width):(r=0,l=0,u=window.innerHeight,d=window.innerWidth,m=window.innerHeight,f=window.innerWidth),(e||t)&&a!==window&&(n=n||a.parentNode,!Yd))do if(n&&n.getBoundingClientRect&&(Ka(n,"transform")!=="none"||t&&Ka(n,"position")!=="static")){var v=n.getBoundingClientRect();r-=v.top+parseInt(Ka(n,"border-top-width")),l-=v.left+parseInt(Ka(n,"border-left-width")),u=r+s.height,d=l+s.width;break}while(n=n.parentNode);if(i&&a!==window){var w=af(n||a),S=w&&w.a,T=w&&w.d;w&&(r/=T,l/=S,f/=S,m/=T,u=r+m,d=l+f)}return{top:r,left:l,bottom:u,right:d,width:f,height:m}}}function Y8(a,e,t){for(var i=Vh(a,!0),n=Vr(a)[e];i;){var s=Vr(i)[t],r=void 0;if(t==="top"||t==="left"?r=n>=s:r=n<=s,!r)return i;if(i===vc())break;i=Vh(i,!1)}return!1}function Cf(a,e,t,i){for(var n=0,s=0,r=a.children;s<r.length;){if(r[s].style.display!=="none"&&r[s]!==ja.ghost&&(i||r[s]!==ja.dragged)&&hu(r[s],t.draggable,a,!1)){if(n===e)return r[s];n++}s++}return null}function oE(a,e){for(var t=a.lastElementChild;t&&(t===ja.ghost||Ka(t,"display")==="none"||e&&!Gw(t,e));)t=t.previousElementSibling;return t||null}function Gl(a,e){var t=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)a.nodeName.toUpperCase()!=="TEMPLATE"&&a!==ja.clone&&(!e||Gw(a,e))&&t++;return t}function K8(a){var e=0,t=0,i=vc();if(a)do{var n=af(a),s=n.a,r=n.d;e+=a.scrollLeft*s,t+=a.scrollTop*r}while(a!==i&&(a=a.parentNode));return[e,t]}function p1e(a,e){for(var t in a)if(a.hasOwnProperty(t)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===a[t][i])return Number(t)}return-1}function Vh(a,e){if(!a||!a.getBoundingClientRect)return vc();var t=a,i=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var n=Ka(t);if(t.clientWidth<t.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return vc();if(i||e)return t;i=!0}}while(t=t.parentNode);return vc()}function g1e(a,e){if(a&&e)for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);return a}function pA(a,e){return Math.round(a.top)===Math.round(e.top)&&Math.round(a.left)===Math.round(e.left)&&Math.round(a.height)===Math.round(e.height)&&Math.round(a.width)===Math.round(e.width)}var q0;function hN(a,e){return function(){if(!q0){var t=arguments,i=this;t.length===1?a.call(i,t[0]):a.apply(i,t),q0=setTimeout(function(){q0=void 0},e)}}}function f1e(){clearTimeout(q0),q0=void 0}function _N(a,e,t){a.scrollLeft+=e,a.scrollTop+=t}function mN(a){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(a).cloneNode(!0):t?t(a).clone(!0)[0]:a.cloneNode(!0)}function pN(a,e,t){var i={};return Array.from(a.children).forEach(function(n){var s,r,l,u;if(!(!hu(n,e.draggable,a,!1)||n.animated||n===t)){var d=Vr(n);i.left=Math.min((s=i.left)!==null&&s!==void 0?s:1/0,d.left),i.top=Math.min((r=i.top)!==null&&r!==void 0?r:1/0,d.top),i.right=Math.max((l=i.right)!==null&&l!==void 0?l:-1/0,d.right),i.bottom=Math.max((u=i.bottom)!==null&&u!==void 0?u:-1/0,d.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Yo="Sortable"+new Date().getTime();function y1e(){var a=[],e;return{captureAnimationState:function(){if(a=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(n){if(!(Ka(n,"display")==="none"||n===ja.ghost)){a.push({target:n,rect:Vr(n)});var s=Ac({},a[a.length-1].rect);if(n.thisAnimationDuration){var r=af(n,!0);r&&(s.top-=r.f,s.left-=r.e)}n.fromRect=s}})}},addAnimationState:function(i){a.push(i)},removeAnimationState:function(i){a.splice(p1e(a,{target:i}),1)},animateAll:function(i){var n=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var s=!1,r=0;a.forEach(function(l){var u=0,d=l.target,m=d.fromRect,f=Vr(d),v=d.prevFromRect,w=d.prevToRect,S=l.rect,T=af(d,!0);T&&(f.top-=T.f,f.left-=T.e),d.toRect=f,d.thisAnimationDuration&&pA(v,f)&&!pA(m,f)&&(S.top-f.top)/(S.left-f.left)===(m.top-f.top)/(m.left-f.left)&&(u=v1e(S,v,w,n.options)),pA(f,m)||(d.prevFromRect=m,d.prevToRect=f,u||(u=n.options.animation),n.animate(d,S,f,u)),u&&(s=!0,r=Math.max(r,u),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},u),d.thisAnimationDuration=u)}),clearTimeout(e),s?e=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),a=[]},animate:function(i,n,s,r){if(r){Ka(i,"transition",""),Ka(i,"transform","");var l=af(this.el),u=l&&l.a,d=l&&l.d,m=(n.left-s.left)/(u||1),f=(n.top-s.top)/(d||1);i.animatingX=!!m,i.animatingY=!!f,Ka(i,"transform","translate3d("+m+"px,"+f+"px,0)"),this.forRepaintDummy=b1e(i),Ka(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),Ka(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){Ka(i,"transition",""),Ka(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function b1e(a){return a.offsetWidth}function v1e(a,e,t,i){return Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*i.animation}var dg=[],gA={initializeByDefault:!0},mb={mount:function(e){for(var t in gA)gA.hasOwnProperty(t)&&!(t in e)&&(e[t]=gA[t]);dg.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),dg.push(e)},pluginEvent:function(e,t,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var s=e+"Global";dg.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][s]&&t[r.pluginName][s](Ac({sortable:t},i)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](Ac({sortable:t},i)))})},initializePlugins:function(e,t,i,n){dg.forEach(function(l){var u=l.pluginName;if(!(!e.options[u]&&!l.initializeByDefault)){var d=new l(e,t,e.options);d.sortable=e,d.options=e.options,e[u]=d,Fd(i,d.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var r=this.modifyOption(e,s,e.options[s]);typeof r<"u"&&(e.options[s]=r)}},getEventProperties:function(e,t){var i={};return dg.forEach(function(n){typeof n.eventProperties=="function"&&Fd(i,n.eventProperties.call(t[n.pluginName],e))}),i},modifyOption:function(e,t,i){var n;return dg.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(n=s.optionListeners[t].call(e[s.pluginName],i))}),n}};function x1e(a){var e=a.sortable,t=a.rootEl,i=a.name,n=a.targetEl,s=a.cloneEl,r=a.toEl,l=a.fromEl,u=a.oldIndex,d=a.newIndex,m=a.oldDraggableIndex,f=a.newDraggableIndex,v=a.originalEvent,w=a.putSortable,S=a.extraEventProperties;if(e=e||t&&t[Yo],!!e){var T,M=e.options,G="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Yd&&!_b?T=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(T=document.createEvent("Event"),T.initEvent(i,!0,!0)),T.to=r||t,T.from=l||t,T.item=n||t,T.clone=s,T.oldIndex=u,T.newIndex=d,T.oldDraggableIndex=m,T.newDraggableIndex=f,T.originalEvent=v,T.pullMode=w?w.lastPutMode:void 0;var P=Ac(Ac({},S),mb.getEventProperties(i,e));for(var F in P)T[F]=P[F];t&&t.dispatchEvent(T),M[G]&&M[G].call(e,T)}}var w1e=["evt"],Bo=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.evt,s=_1e(i,w1e);mb.pluginEvent.bind(ja)(e,t,Ac({dragEl:Kt,parentEl:fr,ghostEl:ci,rootEl:$n,nextEl:lm,lastDownEl:nx,cloneEl:sr,cloneHidden:Gh,dragStarted:w0,putSortable:Cs,activeSortable:ja.active,originalEvent:n,oldIndex:Pg,oldDraggableIndex:Y0,newIndex:hl,newDraggableIndex:Mh,hideGhostForTarget:bN,unhideGhostForTarget:vN,cloneNowHidden:function(){Gh=!0},cloneNowShown:function(){Gh=!1},dispatchSortableEvent:function(l){uo({sortable:t,name:l,originalEvent:n})}},s))};function uo(a){x1e(Ac({putSortable:Cs,cloneEl:sr,targetEl:Kt,rootEl:$n,oldIndex:Pg,oldDraggableIndex:Y0,newIndex:hl,newDraggableIndex:Mh},a))}var Kt,fr,ci,$n,lm,nx,sr,Gh,Pg,hl,Y0,Mh,w2,Cs,Ig=!1,Ow=!1,Pw=[],em,uu,fA,yA,j8,$8,w0,hg,K0,j0=!1,I2=!1,rx,Ds,bA=[],b4=!1,Bw=[],HI=typeof document<"u",C2=sE,J8=_b||Yd?"cssFloat":"float",I1e=HI&&!lN&&!sE&&"draggable"in document.createElement("div"),gN=function(){if(HI){if(Yd)return!1;var a=document.createElement("x");return a.style.cssText="pointer-events:auto",a.style.pointerEvents==="auto"}}(),fN=function(e,t){var i=Ka(e),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=Cf(e,0,t),r=Cf(e,1,t),l=s&&Ka(s),u=r&&Ka(r),d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Vr(s).width,m=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Vr(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&l.float&&l.float!=="none"){var f=l.float==="left"?"left":"right";return r&&(u.clear==="both"||u.clear===f)?"vertical":"horizontal"}return s&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||d>=n&&i[J8]==="none"||r&&i[J8]==="none"&&d+m>n)?"vertical":"horizontal"},C1e=function(e,t,i){var n=i?e.left:e.top,s=i?e.right:e.bottom,r=i?e.width:e.height,l=i?t.left:t.top,u=i?t.right:t.bottom,d=i?t.width:t.height;return n===l||s===u||n+r/2===l+d/2},S1e=function(e,t){var i;return Pw.some(function(n){var s=n[Yo].options.emptyInsertThreshold;if(!(!s||oE(n))){var r=Vr(n),l=e>=r.left-s&&e<=r.right+s,u=t>=r.top-s&&t<=r.bottom+s;if(l&&u)return i=n}}),i},yN=function(e){function t(s,r){return function(l,u,d,m){var f=l.options.group.name&&u.options.group.name&&l.options.group.name===u.options.group.name;if(s==null&&(r||f))return!0;if(s==null||s===!1)return!1;if(r&&s==="clone")return s;if(typeof s=="function")return t(s(l,u,d,m),r)(l,u,d,m);var v=(r?l:u).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var i={},n=e.group;(!n||ix(n)!="object")&&(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i},bN=function(){!gN&&ci&&Ka(ci,"display","none")},vN=function(){!gN&&ci&&Ka(ci,"display","")};HI&&!lN&&document.addEventListener("click",function(a){if(Ow)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Ow=!1,!1},!0);var tm=function(e){if(Kt){e=e.touches?e.touches[0]:e;var t=S1e(e.clientX,e.clientY);if(t){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[Yo]._onDragOver(i)}}},A1e=function(e){Kt&&Kt.parentNode[Yo]._isOutsideThisEl(e.target)};function ja(a,e){if(!(a&&a.nodeType&&a.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a,this.options=e=Fd({},e),a[Yo]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fN(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,l){r.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ja.supportPointer!==!1&&"PointerEvent"in window&&(!X0||sE),emptyInsertThreshold:5};mb.initializePlugins(this,a,t);for(var i in t)!(i in e)&&(e[i]=t[i]);yN(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:I1e,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Gi(a,"pointerdown",this._onTapStart):(Gi(a,"mousedown",this._onTapStart),Gi(a,"touchstart",this._onTapStart)),this.nativeDraggable&&(Gi(a,"dragover",this),Gi(a,"dragenter",this)),Pw.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Fd(this,y1e())}ja.prototype={constructor:ja,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(hg=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,Kt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,n=this.options,s=n.preventOnFilter,r=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(l||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,m=n.filter;if(G1e(i),!Kt&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||n.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&X0&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=hu(u,n.draggable,i,!1),!(u&&u.animated)&&nx!==u)){if(Pg=Gl(u),Y0=Gl(u,n.draggable),typeof m=="function"){if(m.call(this,e,u,this)){uo({sortable:t,rootEl:d,name:"filter",targetEl:u,toEl:i,fromEl:i}),Bo("filter",t,{evt:e}),s&&e.preventDefault();return}}else if(m&&(m=m.split(",").some(function(f){if(f=hu(d,f.trim(),i,!1),f)return uo({sortable:t,rootEl:f,name:"filter",targetEl:u,fromEl:i,toEl:i}),Bo("filter",t,{evt:e}),!0}),m)){s&&e.preventDefault();return}n.handle&&!hu(d,n.handle,i,!1)||this._prepareDragStart(e,l,u)}}},_prepareDragStart:function(e,t,i){var n=this,s=n.el,r=n.options,l=s.ownerDocument,u;if(i&&!Kt&&i.parentNode===s){var d=Vr(i);if($n=s,Kt=i,fr=Kt.parentNode,lm=Kt.nextSibling,nx=i,w2=r.group,ja.dragged=Kt,em={target:Kt,clientX:(t||e).clientX,clientY:(t||e).clientY},j8=em.clientX-d.left,$8=em.clientY-d.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Kt.style["will-change"]="all",u=function(){if(Bo("delayEnded",n,{evt:e}),ja.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!X8&&n.nativeDraggable&&(Kt.draggable=!0),n._triggerDragStart(e,t),uo({sortable:n,name:"choose",originalEvent:e}),dl(Kt,r.chosenClass,!0)},r.ignore.split(",").forEach(function(m){dN(Kt,m.trim(),vA)}),Gi(l,"dragover",tm),Gi(l,"mousemove",tm),Gi(l,"touchmove",tm),r.supportPointer?(Gi(l,"pointerup",n._onDrop),!this.nativeDraggable&&Gi(l,"pointercancel",n._onDrop)):(Gi(l,"mouseup",n._onDrop),Gi(l,"touchend",n._onDrop),Gi(l,"touchcancel",n._onDrop)),X8&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Kt.draggable=!0),Bo("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(_b||Yd))){if(ja.eventCanceled){this._onDrop();return}r.supportPointer?(Gi(l,"pointerup",n._disableDelayedDrag),Gi(l,"pointercancel",n._disableDelayedDrag)):(Gi(l,"mouseup",n._disableDelayedDrag),Gi(l,"touchend",n._disableDelayedDrag),Gi(l,"touchcancel",n._disableDelayedDrag)),Gi(l,"mousemove",n._delayedDragTouchMoveHandler),Gi(l,"touchmove",n._delayedDragTouchMoveHandler),r.supportPointer&&Gi(l,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(u,r.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Kt&&vA(Kt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Li(e,"mouseup",this._disableDelayedDrag),Li(e,"touchend",this._disableDelayedDrag),Li(e,"touchcancel",this._disableDelayedDrag),Li(e,"pointerup",this._disableDelayedDrag),Li(e,"pointercancel",this._disableDelayedDrag),Li(e,"mousemove",this._delayedDragTouchMoveHandler),Li(e,"touchmove",this._delayedDragTouchMoveHandler),Li(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Gi(document,"pointermove",this._onTouchMove):t?Gi(document,"touchmove",this._onTouchMove):Gi(document,"mousemove",this._onTouchMove):(Gi(Kt,"dragend",this),Gi($n,"dragstart",this._onDragStart));try{document.selection?sx(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ig=!1,$n&&Kt){Bo("dragStarted",this,{evt:t}),this.nativeDraggable&&Gi(document,"dragover",A1e);var i=this.options;!e&&dl(Kt,i.dragClass,!1),dl(Kt,i.ghostClass,!0),ja.active=this,e&&this._appendGhost(),uo({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(uu){this._lastX=uu.clientX,this._lastY=uu.clientY,bN();for(var e=document.elementFromPoint(uu.clientX,uu.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(uu.clientX,uu.clientY),e!==t);)t=e;if(Kt.parentNode[Yo]._isOutsideThisEl(e),t)do{if(t[Yo]){var i=void 0;if(i=t[Yo]._onDragOver({clientX:uu.clientX,clientY:uu.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=cN(t));vN()}},_onTouchMove:function(e){if(em){var t=this.options,i=t.fallbackTolerance,n=t.fallbackOffset,s=e.touches?e.touches[0]:e,r=ci&&af(ci,!0),l=ci&&r&&r.a,u=ci&&r&&r.d,d=C2&&Ds&&K8(Ds),m=(s.clientX-em.clientX+n.x)/(l||1)+(d?d[0]-bA[0]:0)/(l||1),f=(s.clientY-em.clientY+n.y)/(u||1)+(d?d[1]-bA[1]:0)/(u||1);if(!ja.active&&!Ig){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(ci){r?(r.e+=m-(fA||0),r.f+=f-(yA||0)):r={a:1,b:0,c:0,d:1,e:m,f};var v="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");Ka(ci,"webkitTransform",v),Ka(ci,"mozTransform",v),Ka(ci,"msTransform",v),Ka(ci,"transform",v),fA=m,yA=f,uu=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ci){var e=this.options.fallbackOnBody?document.body:$n,t=Vr(Kt,!0,C2,!0,e),i=this.options;if(C2){for(Ds=e;Ka(Ds,"position")==="static"&&Ka(Ds,"transform")==="none"&&Ds!==document;)Ds=Ds.parentNode;Ds!==document.body&&Ds!==document.documentElement?(Ds===document&&(Ds=vc()),t.top+=Ds.scrollTop,t.left+=Ds.scrollLeft):Ds=vc(),bA=K8(Ds)}ci=Kt.cloneNode(!0),dl(ci,i.ghostClass,!1),dl(ci,i.fallbackClass,!0),dl(ci,i.dragClass,!0),Ka(ci,"transition",""),Ka(ci,"transform",""),Ka(ci,"box-sizing","border-box"),Ka(ci,"margin",0),Ka(ci,"top",t.top),Ka(ci,"left",t.left),Ka(ci,"width",t.width),Ka(ci,"height",t.height),Ka(ci,"opacity","0.8"),Ka(ci,"position",C2?"absolute":"fixed"),Ka(ci,"zIndex","100000"),Ka(ci,"pointerEvents","none"),ja.ghost=ci,e.appendChild(ci),Ka(ci,"transform-origin",j8/parseInt(ci.style.width)*100+"% "+$8/parseInt(ci.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,n=e.dataTransfer,s=i.options;if(Bo("dragStart",this,{evt:e}),ja.eventCanceled){this._onDrop();return}Bo("setupClone",this),ja.eventCanceled||(sr=mN(Kt),sr.removeAttribute("id"),sr.draggable=!1,sr.style["will-change"]="",this._hideClone(),dl(sr,this.options.chosenClass,!1),ja.clone=sr),i.cloneId=sx(function(){Bo("clone",i),!ja.eventCanceled&&(i.options.removeCloneOnHide||$n.insertBefore(sr,Kt),i._hideClone(),uo({sortable:i,name:"clone"}))}),!t&&dl(Kt,s.dragClass,!0),t?(Ow=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Li(document,"mouseup",i._onDrop),Li(document,"touchend",i._onDrop),Li(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(i,n,Kt)),Gi(document,"drop",i),Ka(Kt,"transform","translateZ(0)")),Ig=!0,i._dragStartId=sx(i._dragStarted.bind(i,t,e)),Gi(document,"selectstart",i),w0=!0,window.getSelection().removeAllRanges(),X0&&Ka(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,i=e.target,n,s,r,l=this.options,u=l.group,d=ja.active,m=w2===u,f=l.sort,v=Cs||d,w,S=this,T=!1;if(b4)return;function M(Oe,Ye){Bo(Oe,S,Ac({evt:e,isOwner:m,axis:w?"vertical":"horizontal",revert:r,dragRect:n,targetRect:s,canSort:f,fromSortable:v,target:i,completed:P,onMove:function(yt,De){return S2($n,t,Kt,n,yt,Vr(yt),e,De)},changed:F},Ye))}function G(){M("dragOverAnimationCapture"),S.captureAnimationState(),S!==v&&v.captureAnimationState()}function P(Oe){return M("dragOverCompleted",{insertion:Oe}),Oe&&(m?d._hideClone():d._showClone(S),S!==v&&(dl(Kt,Cs?Cs.options.ghostClass:d.options.ghostClass,!1),dl(Kt,l.ghostClass,!0)),Cs!==S&&S!==ja.active?Cs=S:S===ja.active&&Cs&&(Cs=null),v===S&&(S._ignoreWhileAnimating=i),S.animateAll(function(){M("dragOverAnimationComplete"),S._ignoreWhileAnimating=null}),S!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(i===Kt&&!Kt.animated||i===t&&!i.animated)&&(hg=null),!l.dragoverBubble&&!e.rootEl&&i!==document&&(Kt.parentNode[Yo]._isOutsideThisEl(e.target),!Oe&&tm(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),T=!0}function F(){hl=Gl(Kt),Mh=Gl(Kt,l.draggable),uo({sortable:S,name:"change",toEl:t,newIndex:hl,newDraggableIndex:Mh,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=hu(i,l.draggable,t,!0),M("dragOver"),ja.eventCanceled)return T;if(Kt.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||S._ignoreWhileAnimating===i)return P(!1);if(Ow=!1,d&&!l.disabled&&(m?f||(r=fr!==$n):Cs===this||(this.lastPutMode=w2.checkPull(this,d,Kt,e))&&u.checkPut(this,d,Kt,e))){if(w=this._getDirection(e,i)==="vertical",n=Vr(Kt),M("dragOverValid"),ja.eventCanceled)return T;if(r)return fr=$n,G(),this._hideClone(),M("revert"),ja.eventCanceled||(lm?$n.insertBefore(Kt,lm):$n.appendChild(Kt)),P(!0);var N=oE(t,l.draggable);if(!N||L1e(e,w,this)&&!N.animated){if(N===Kt)return P(!1);if(N&&t===e.target&&(i=N),i&&(s=Vr(i)),S2($n,t,Kt,n,i,s,e,!!i)!==!1)return G(),N&&N.nextSibling?t.insertBefore(Kt,N.nextSibling):t.appendChild(Kt),fr=t,F(),P(!0)}else if(N&&M1e(e,w,this)){var V=Cf(t,0,l,!0);if(V===Kt)return P(!1);if(i=V,s=Vr(i),S2($n,t,Kt,n,i,s,e,!1)!==!1)return G(),t.insertBefore(Kt,V),fr=t,F(),P(!0)}else if(i.parentNode===t){s=Vr(i);var K=0,te,J=Kt.parentNode!==t,ne=!C1e(Kt.animated&&Kt.toRect||n,i.animated&&i.toRect||s,w),se=w?"top":"left",de=Y8(i,"top","top")||Y8(Kt,"top","top"),_e=de?de.scrollTop:void 0;hg!==i&&(te=s[se],j0=!1,I2=!ne&&l.invertSwap||J),K=R1e(e,i,s,w,ne?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,I2,hg===i);var Se;if(K!==0){var ce=Gl(Kt);do ce-=K,Se=fr.children[ce];while(Se&&(Ka(Se,"display")==="none"||Se===ci))}if(K===0||Se===i)return P(!1);hg=i,K0=K;var Ie=i.nextElementSibling,he=!1;he=K===1;var we=S2($n,t,Kt,n,i,s,e,he);if(we!==!1)return(we===1||we===-1)&&(he=we===1),b4=!0,setTimeout(E1e,30),G(),he&&!Ie?t.appendChild(Kt):i.parentNode.insertBefore(Kt,he?Ie:i),de&&_N(de,0,_e-de.scrollTop),fr=Kt.parentNode,te!==void 0&&!I2&&(rx=Math.abs(te-Vr(i)[se])),F(),P(!0)}if(t.contains(Kt))return P(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Li(document,"mousemove",this._onTouchMove),Li(document,"touchmove",this._onTouchMove),Li(document,"pointermove",this._onTouchMove),Li(document,"dragover",tm),Li(document,"mousemove",tm),Li(document,"touchmove",tm)},_offUpEvents:function(){var e=this.el.ownerDocument;Li(e,"mouseup",this._onDrop),Li(e,"touchend",this._onDrop),Li(e,"pointerup",this._onDrop),Li(e,"pointercancel",this._onDrop),Li(e,"touchcancel",this._onDrop),Li(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;if(hl=Gl(Kt),Mh=Gl(Kt,i.draggable),Bo("drop",this,{evt:e}),fr=Kt&&Kt.parentNode,hl=Gl(Kt),Mh=Gl(Kt,i.draggable),ja.eventCanceled){this._nulling();return}Ig=!1,I2=!1,j0=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),v4(this.cloneId),v4(this._dragStartId),this.nativeDraggable&&(Li(document,"drop",this),Li(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),X0&&Ka(document.body,"user-select",""),Ka(Kt,"transform",""),e&&(w0&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),ci&&ci.parentNode&&ci.parentNode.removeChild(ci),($n===fr||Cs&&Cs.lastPutMode!=="clone")&&sr&&sr.parentNode&&sr.parentNode.removeChild(sr),Kt&&(this.nativeDraggable&&Li(Kt,"dragend",this),vA(Kt),Kt.style["will-change"]="",w0&&!Ig&&dl(Kt,Cs?Cs.options.ghostClass:this.options.ghostClass,!1),dl(Kt,this.options.chosenClass,!1),uo({sortable:this,name:"unchoose",toEl:fr,newIndex:null,newDraggableIndex:null,originalEvent:e}),$n!==fr?(hl>=0&&(uo({rootEl:fr,name:"add",toEl:fr,fromEl:$n,originalEvent:e}),uo({sortable:this,name:"remove",toEl:fr,originalEvent:e}),uo({rootEl:fr,name:"sort",toEl:fr,fromEl:$n,originalEvent:e}),uo({sortable:this,name:"sort",toEl:fr,originalEvent:e})),Cs&&Cs.save()):hl!==Pg&&hl>=0&&(uo({sortable:this,name:"update",toEl:fr,originalEvent:e}),uo({sortable:this,name:"sort",toEl:fr,originalEvent:e})),ja.active&&((hl==null||hl===-1)&&(hl=Pg,Mh=Y0),uo({sortable:this,name:"end",toEl:fr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Bo("nulling",this),$n=Kt=fr=ci=lm=sr=nx=Gh=em=uu=w0=hl=Mh=Pg=Y0=hg=K0=Cs=w2=ja.dragged=ja.ghost=ja.clone=ja.active=null,Bw.forEach(function(e){e.checked=!0}),Bw.length=fA=yA=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Kt&&(this._onDragOver(e),T1e(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,i=this.el.children,n=0,s=i.length,r=this.options;n<s;n++)t=i[n],hu(t,r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||W1e(t));return e},sort:function(e,t){var i={},n=this.el;this.toArray().forEach(function(s,r){var l=n.children[r];hu(l,this.options.draggable,n,!1)&&(i[s]=l)},this),t&&this.captureAnimationState(),e.forEach(function(s){i[s]&&(n.removeChild(i[s]),n.appendChild(i[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return hu(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(t===void 0)return i[e];var n=mb.modifyOption(this,e,t);typeof n<"u"?i[e]=n:i[e]=t,e==="group"&&yN(i)},destroy:function(){Bo("destroy",this);var e=this.el;e[Yo]=null,Li(e,"mousedown",this._onTapStart),Li(e,"touchstart",this._onTapStart),Li(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Li(e,"dragover",this),Li(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Pw.splice(Pw.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Gh){if(Bo("hideClone",this),ja.eventCanceled)return;Ka(sr,"display","none"),this.options.removeCloneOnHide&&sr.parentNode&&sr.parentNode.removeChild(sr),Gh=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Gh){if(Bo("showClone",this),ja.eventCanceled)return;Kt.parentNode==$n&&!this.options.group.revertClone?$n.insertBefore(sr,Kt):lm?$n.insertBefore(sr,lm):$n.appendChild(sr),this.options.group.revertClone&&this.animate(Kt,sr),Ka(sr,"display",""),Gh=!1}}};function T1e(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault()}function S2(a,e,t,i,n,s,r,l){var u,d=a[Yo],m=d.options.onMove,f;return window.CustomEvent&&!Yd&&!_b?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=a,u.dragged=t,u.draggedRect=i,u.related=n||e,u.relatedRect=s||Vr(e),u.willInsertAfter=l,u.originalEvent=r,a.dispatchEvent(u),m&&(f=m.call(d,u,r)),f}function vA(a){a.draggable=!1}function E1e(){b4=!1}function M1e(a,e,t){var i=Vr(Cf(t.el,0,t.options,!0)),n=pN(t.el,t.options,ci),s=10;return e?a.clientX<n.left-s||a.clientY<i.top&&a.clientX<i.right:a.clientY<n.top-s||a.clientY<i.bottom&&a.clientX<i.left}function L1e(a,e,t){var i=Vr(oE(t.el,t.options.draggable)),n=pN(t.el,t.options,ci),s=10;return e?a.clientX>n.right+s||a.clientY>i.bottom&&a.clientX>i.left:a.clientY>n.bottom+s||a.clientX>i.right&&a.clientY>i.top}function R1e(a,e,t,i,n,s,r,l){var u=i?a.clientY:a.clientX,d=i?t.height:t.width,m=i?t.top:t.left,f=i?t.bottom:t.right,v=!1;if(!r){if(l&&rx<d*n){if(!j0&&(K0===1?u>m+d*s/2:u<f-d*s/2)&&(j0=!0),j0)v=!0;else if(K0===1?u<m+rx:u>f-rx)return-K0}else if(u>m+d*(1-n)/2&&u<f-d*(1-n)/2)return k1e(e)}return v=v||r,v&&(u<m+d*s/2||u>f-d*s/2)?u>m+d/2?1:-1:0}function k1e(a){return Gl(Kt)<Gl(a)?1:-1}function W1e(a){for(var e=a.tagName+a.className+a.src+a.href+a.textContent,t=e.length,i=0;t--;)i+=e.charCodeAt(t);return i.toString(36)}function G1e(a){Bw.length=0;for(var e=a.getElementsByTagName("input"),t=e.length;t--;){var i=e[t];i.checked&&Bw.push(i)}}function sx(a){return setTimeout(a,0)}function v4(a){return clearTimeout(a)}HI&&Gi(document,"touchmove",function(a){(ja.active||Ig)&&a.cancelable&&a.preventDefault()});ja.utils={on:Gi,off:Li,css:Ka,find:dN,is:function(e,t){return!!hu(e,t,e,!1)},extend:g1e,throttle:hN,closest:hu,toggleClass:dl,clone:mN,index:Gl,nextTick:sx,cancelNextTick:v4,detectDirection:fN,getChild:Cf,expando:Yo};ja.get=function(a){return a[Yo]};ja.mount=function(){for(var a=arguments.length,e=new Array(a),t=0;t<a;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(ja.utils=Ac(Ac({},ja.utils),i.utils)),mb.mount(i)})};ja.create=function(a,e){return new ja(a,e)};ja.version=m1e;var Fr=[],I0,x4,w4=!1,xA,wA,Nw,C0;function O1e(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return a.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?Gi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Gi(document,"pointermove",this._handleFallbackAutoScroll):i.touches?Gi(document,"touchmove",this._handleFallbackAutoScroll):Gi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?Li(document,"dragover",this._handleAutoScroll):(Li(document,"pointermove",this._handleFallbackAutoScroll),Li(document,"touchmove",this._handleFallbackAutoScroll),Li(document,"mousemove",this._handleFallbackAutoScroll)),Q8(),ox(),f1e()},nulling:function(){Nw=x4=I0=w4=C0=xA=wA=null,Fr.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var n=this,s=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(s,r);if(Nw=t,i||this.options.forceAutoScrollFallback||_b||Yd||X0){IA(t,this.options,l,i);var u=Vh(l,!0);w4&&(!C0||s!==xA||r!==wA)&&(C0&&Q8(),C0=setInterval(function(){var d=Vh(document.elementFromPoint(s,r),!0);d!==u&&(u=d,ox()),IA(t,n.options,d,i)},10),xA=s,wA=r)}else{if(!this.options.bubbleScroll||Vh(l,!0)===vc()){ox();return}IA(t,this.options,Vh(l,!1),!1)}}},Fd(a,{pluginName:"scroll",initializeByDefault:!0})}function ox(){Fr.forEach(function(a){clearInterval(a.pid)}),Fr=[]}function Q8(){clearInterval(C0)}var IA=hN(function(a,e,t,i){if(e.scroll){var n=(a.touches?a.touches[0]:a).clientX,s=(a.touches?a.touches[0]:a).clientY,r=e.scrollSensitivity,l=e.scrollSpeed,u=vc(),d=!1,m;x4!==t&&(x4=t,ox(),I0=e.scroll,m=e.scrollFn,I0===!0&&(I0=Vh(t,!0)));var f=0,v=I0;do{var w=v,S=Vr(w),T=S.top,M=S.bottom,G=S.left,P=S.right,F=S.width,N=S.height,V=void 0,K=void 0,te=w.scrollWidth,J=w.scrollHeight,ne=Ka(w),se=w.scrollLeft,de=w.scrollTop;w===u?(V=F<te&&(ne.overflowX==="auto"||ne.overflowX==="scroll"||ne.overflowX==="visible"),K=N<J&&(ne.overflowY==="auto"||ne.overflowY==="scroll"||ne.overflowY==="visible")):(V=F<te&&(ne.overflowX==="auto"||ne.overflowX==="scroll"),K=N<J&&(ne.overflowY==="auto"||ne.overflowY==="scroll"));var _e=V&&(Math.abs(P-n)<=r&&se+F<te)-(Math.abs(G-n)<=r&&!!se),Se=K&&(Math.abs(M-s)<=r&&de+N<J)-(Math.abs(T-s)<=r&&!!de);if(!Fr[f])for(var ce=0;ce<=f;ce++)Fr[ce]||(Fr[ce]={});(Fr[f].vx!=_e||Fr[f].vy!=Se||Fr[f].el!==w)&&(Fr[f].el=w,Fr[f].vx=_e,Fr[f].vy=Se,clearInterval(Fr[f].pid),(_e!=0||Se!=0)&&(d=!0,Fr[f].pid=setInterval((function(){i&&this.layer===0&&ja.active._onTouchMove(Nw);var Ie=Fr[this.layer].vy?Fr[this.layer].vy*l:0,he=Fr[this.layer].vx?Fr[this.layer].vx*l:0;typeof m=="function"&&m.call(ja.dragged.parentNode[Yo],he,Ie,a,Nw,Fr[this.layer].el)!=="continue"||_N(Fr[this.layer].el,he,Ie)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&v!==u&&(v=Vh(v,!1)));w4=d}},30),xN=function(e){var t=e.originalEvent,i=e.putSortable,n=e.dragEl,s=e.activeSortable,r=e.dispatchSortableEvent,l=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(t){var d=i||s;l();var m=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,f=document.elementFromPoint(m.clientX,m.clientY);u(),d&&!d.el.contains(f)&&(r("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function lE(){}lE.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=Cf(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:xN};Fd(lE,{pluginName:"revertOnSpill"});function uE(){}uE.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,n=i||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:xN};Fd(uE,{pluginName:"removeOnSpill"});ja.mount(new O1e);ja.mount(uE,lE);function I4(a,e){let t;const i={dragClass:"lux-sortable-drag",ghostClass:"lux-sortable-ghost",sort:!0,handle:".drag-handle",forceFallback:ise};return e!=null&&e.onSort&&(i.onSort=n=>e.onSort(n.to.children)),a&&(t=ja.create(a,{...i,...e&&(({onSort:n,...s})=>s)(e)||{}})),t}const wN=.5,P1e=!1,Fw=Co("slider",()=>{const a=Zi(),e=Fe(wN),t=Fe(P1e),i=St(()=>[...a.layers].reverse()[0]);function n(r){let l=r;r<.1?l=.1:r>.9&&(l=.9),e.value=l}function s(r){t.value=r??!t.value}return{sliderActive:t,sliderRatio:e,sliderTopLayer:i,setRatio:n,toggleSlider:s}},{});function IN(a,e){const{t}=wt();function i(){e==null||e.emit("clickInfo",a)}return{t,onClickInfo:i}}const B1e={class:"lux-layer-manager-item mt-2.5"},N1e=["title"],F1e={class:"flex-1 text-left cursor-default"},D1e=["aria-label","title"],V1e=$e({__name:"layer-item-background",props:{showEditButton:{type:Boolean},layer:{}},emits:["clickEdit","clickInfo"],setup(a,{emit:e}){const t=a,i=e,{t:n,onClickInfo:s}=IN(t.layer,{emit:i}),r=St(()=>n('Display informations for "{{layerName}}"',{ns:"app",layerName:u()})),l=St(()=>!If().isOffLine.value);function u(){return n(t.layer.name,{ns:"client"})}return(d,m)=>(U(),$("div",B1e,[l.value?(U(),$("button",{key:0,class:"fa fa-info w-3",title:r.value,onClick:m[0]||(m[0]=(...f)=>k(s)&&k(s)(...f))},null,8,N1e)):Ae("",!0),W("span",F1e,q(u()),1),d.showEditButton?(U(),$("button",{key:1,"data-cy":"openStylePanel",class:"fa fa-pencil","aria-label":k(n)("Open editor panel",{ns:"app"}),title:k(n)("Open editor panel",{ns:"app"}),onClick:m[1]||(m[1]=f=>d.$emit("clickEdit"))},null,8,D1e)):Ae("",!0)]))}}),Z1e=["id"],z1e=["aria-checked","title"],U1e=["id","value","aria-label"],H1e=["aria-checked","aria-label"],X1e=$e({__name:"layer-item-sub",props:{layer:{},isOpen:{type:Boolean},isLayerComparatorOpen:{type:Boolean},displayLayerComparatorOpen:{type:Boolean}},emits:["changeOpacity","clickToggleLayerComparator"],setup(a,{emit:e}){var w,S;const t=a,i=e,{t:n}=wt(),s=vo(),r=St(()=>n(s.getLayerCurrentLabel(t.layer),{ns:"client"})),l=Di((((w=t.layer)==null?void 0:w.opacity)??1)*100),u=Di((((S=t.layer)==null?void 0:S.previousOpacity)??l.value)*100);function d(){l.value===0?l.value=u.value:(u.value=l.value,l.value=0),v()}function m(T){T.target&&(l.value=parseInt(T.target.value),v())}function f(){i("clickToggleLayerComparator",t.layer)}function v(){i("changeOpacity",t.layer,l.value)}return(T,M)=>(U(),$("div",{class:Pa(["lux-layer-manager-item-content",T.isOpen?"h-6":"h-0"]),id:`layer-manager-item-content-${T.layer.id}`,"data-cy":"myLayerSubContent"},[W("button",{class:Pa(["w-5 fa-solid",l.value===0?"fa-eye-slash":"fa-eye"]),role:"switch","aria-checked":l.value===0,title:k(n)("Toggle layer opacity for {{layerName}}",{ns:"app",layerName:r.value}),onClick:d},null,10,z1e),W("input",{id:`${T.layer.id}-steps-range`,type:"range",min:"0",max:"100",value:l.value,step:"25",onChange:m,class:"m-2.5 w-16 h-[5px] rounded-lg appearance-none cursor-pointer","aria-label":k(n)("Change opacity for {{layerName}}",{ns:"app",layerName:r.value})},null,40,U1e),T.displayLayerComparatorOpen?(U(),$("button",{key:0,"data-cy":"myLayerComparatorBtn",role:"switch",class:Pa(["fa ml-auto text-sm cursor-pointer",T.isLayerComparatorOpen?"fa-adjust":"fa-circle"]),"aria-checked":T.isLayerComparatorOpen,"aria-label":k(n)("Toggle layer comparator for {{ layerName }}",{ns:"app",layerName:r.value}),onClick:f},null,10,H1e)):Ae("",!0)],10,Z1e))}}),q1e=["min","max","value"],C4=$e({__name:"layer-time-datepicker",props:{minDateAllowed:{default:""},maxDateAllowed:{default:""},dateValue:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=St(()=>FS(t.minDateAllowed)),s=St(()=>FS(t.maxDateAllowed));function r(l){i("change",l.target.value)}return(l,u)=>(U(),$("input",{class:"lux-time-datepicker",type:"date",min:n.value,max:s.value,value:l.dateValue?k(FS)(l.dateValue):"",onChange:r},null,40,q1e))}}),Y1e={class:"lux-time-slider w-full"},K1e=["for"],j1e=$e({__name:"layer-time-datepicker-value",props:{layer:{}},emits:["changeTime"],setup(a){const{t:e}=wt(),t=a,i=Di(t.layer.currentTimeMinValue);return(n,s)=>{var r,l;return U(),$("div",Y1e,[W("div",null,[W("label",{for:`${n.layer.id}-time-slider-start`,class:"lux-time-slider-label"},q(k(e)("Date:")),9,K1e),lt(C4,{id:`${n.layer.id}-time-slider-start`,"date-value":i.value,"min-date-allowed":(r=t.layer.time)==null?void 0:r.minValue,"max-date-allowed":(l=t.layer.time)==null?void 0:l.maxValue,onChange:s[0]||(s[0]=u=>n.$emit("changeTime",u))},null,8,["id","date-value","min-date-allowed","max-date-allowed"])])])}}}),$1e={class:"lux-time-slider w-full"},J1e=["for"],Q1e=["for"],ebe=$e({__name:"layer-time-datepicker-range",props:{layer:{}},emits:["changeTime"],setup(a,{emit:e}){const{t}=wt(),i=a,n=e,s=Di(i.layer.currentTimeMinValue),r=Di(i.layer.currentTimeMaxValue);function l(d){n("changeTime",d,i.layer.currentTimeMaxValue)}function u(d){n("changeTime",i.layer.currentTimeMinValue,d)}return(d,m)=>{var f,v,w,S;return U(),$("div",$1e,[W("div",null,[W("label",{for:`${d.layer.id}-time-slider-start`,class:"lux-time-slider-label"},q(k(t)("From:")),9,J1e),lt(C4,{id:`${d.layer.id}-time-slider-start`,"date-value":s.value,"min-date-allowed":(f=i.layer.time)==null?void 0:f.minValue,"max-date-allowed":(v=i.layer.time)==null?void 0:v.maxValue,onChange:l},null,8,["id","date-value","min-date-allowed","max-date-allowed"])]),W("div",null,[W("label",{for:`${d.layer.id}-time-slider-end`,class:"lux-time-slider-label"},q(k(t)("To:")),9,Q1e),lt(C4,{id:`${d.layer.id}-time-slider-end`,"date-value":r.value,"min-date-allowed":(w=i.layer.time)==null?void 0:w.minValue,"max-date-allowed":(S=i.layer.time)==null?void 0:S.maxValue,onChange:u},null,8,["id","date-value","min-date-allowed","max-date-allowed"])])])}}}),tbe=["onKeydown","aria-label","title"],ek=$e({__name:"slider-range-thumb",props:{ariaLabel:{},maxLimit:{default:100},minLimit:{default:0},selectedValue:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Fe(!1),s=Fe(),r=Fe(),l=St(()=>{var F;return((F=s.value)==null?void 0:F.offsetWidth)||274}),u=St(()=>{var F;return((F=r.value)==null?void 0:F.offsetWidth)||9}),d=Fe(t.selectedValue),m=St(()=>l.value*d.value/100-u.value/2),f=St(()=>({left:`${m.value}px`}));es(()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",G)}),Ut(()=>t.selectedValue,F=>{d.value=F});function v(F){d.value=Math.max(Math.min(F,100),0),i("change",d.value,n.value)}function w(){v(d.value-1)}function S(){v(d.value+1)}function T(){n.value=!0,document.addEventListener("mousemove",M),document.addEventListener("mouseup",G)}function M(F){n.value&&v(P(F))}function G(F){n.value=!1,v(P(F)),document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",G)}function P(F){var V,K;const N=(V=s.value)!=null&&V.offsetWidth?(F.clientX-u.value*2)*100/((K=s.value)==null?void 0:K.offsetWidth):0;return Math.round(Math.max(Math.min(N,t.maxLimit),t.minLimit))}return(F,N)=>(U(),$("div",{class:"w-full",role:"slider",ref_key:"elRefTrack",ref:s},[W("button",{class:Pa(["lux-slidebar-thumb",n.value?"dragging":""]),ref_key:"elRefThumb",ref:r,style:Tc(f.value),onKeydown:[Uo(Jr(S,["stop"]),["space"]),Uo(Jr(S,["stop"]),["right"]),Uo(Jr(w,["stop"]),["left"]),Uo(Jr(w,["stop"]),["delete"])],onMousedown:T,onMousemove:M,onMouseup:G,"aria-label":F.ariaLabel,title:F.ariaLabel},null,46,tbe)],512))}}),abe=$e({__name:"slider-range-active-track",props:{selectedMinValue:{},selectedMaxValue:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Fe(),s=Fe(),r=St(()=>n.value?Math.round(n.value.offsetWidth*t.selectedMinValue/100):0),l=St(()=>{var f,v;let m=0;return t.selectedMaxValue!==void 0&&((f=n.value)!=null&&f.offsetWidth)&&(m=((v=n.value)==null?void 0:v.offsetWidth)*t.selectedMaxValue/100-r.value),Math.round(m)}),u=St(()=>({left:`${r.value}px`,width:`${l.value}px`}));function d(m){if(n.value){const f=n.value.getBoundingClientRect().x,v=(m.clientX-f)*100/n.value.offsetWidth;i("change",v)}}return(m,f)=>(U(),$("div",{ref_key:"elRefFullTrack",ref:n,class:"lux-slidebar-track"},[m.selectedMaxValue!==void 0?(U(),$("div",{key:0,ref_key:"elRefSelectionTrack",ref:s,class:"lux-slidebar-track-selection",style:Tc(u.value),onClick:d},null,4)):Ae("",!0),W("div",{class:"lux-slidebar-track-full",onClick:d})],512))}}),ibe={class:"lux-slidebar-fake"},tk=$e({__name:"slider-range",props:{selectedMinValue:{},selectedMaxValue:{},ariaLabelMin:{},ariaLabelMax:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Fe(t.selectedMinValue),s=Fe(t.selectedMaxValue);function r(d,m){i("change",d,t.selectedMaxValue,m)}function l(d,m){i("change",t.selectedMinValue,d,m)}function u(d){s.value===void 0?n.value=d:d>=s.value?s.value=d:d<=t.selectedMinValue?n.value=d:Math.abs(s.value-d)<Math.abs(n.value-d)?s.value=d:n.value=d,i("change",n.value,s.value,!1)}return(d,m)=>(U(),$("div",ibe,[s.value!==void 0?(U(),Gt(ek,{key:0,ariaLabel:d.ariaLabelMax,minLimit:d.selectedMinValue,selectedValue:s.value,onChange:l},null,8,["ariaLabel","minLimit","selectedValue"])):Ae("",!0),lt(ek,{ariaLabel:d.ariaLabelMin,maxLimit:d.selectedMaxValue,selectedValue:n.value,onChange:r},null,8,["ariaLabel","maxLimit","selectedValue"]),lt(abe,{selectedMinValue:d.selectedMinValue,selectedMaxValue:d.selectedMaxValue,onChange:u},null,8,["selectedMinValue","selectedMaxValue"])]))}}),nbe={class:"lux-time-slider w-full"},rbe={key:0,class:"lux-time-slider-value mr-1.5"},sbe={key:1,class:"lux-time-slider-range mr-1.5"},obe={class:"lux-time-displayed-dates"},lbe={key:0,class:"lux-time-start-date grow"},ube={key:1,class:"lux-time-slider-end-date grow text-right"},cbe=$e({__name:"layer-time-slider",props:{layer:{}},emits:["changeTime"],setup(a,{emit:e}){const{t}=wt(),i=a,n=e,s=St(M),r=St(()=>{var N,V;return(N=i.layer.time)!=null&&N.minValue?new Date((V=i.layer.time)==null?void 0:V.minValue).getTime():0}),l=St(()=>{var N,V;return(N=i.layer.time)!=null&&N.maxValue?new Date((V=i.layer.time)==null?void 0:V.maxValue).getTime():0}),u=St(()=>l.value-r.value),d=Fe(i.layer.currentTimeMaxValue),m=Fe(i.layer.currentTimeMinValue),f=St(()=>m.value?new Date(m.value).getTime():void 0),v=St(()=>d.value?new Date(d.value).getTime():void 0),w=St(()=>T(f.value)),S=St(()=>T(v.value));function T(N){return N?(N-r.value)/u.value*100:0}function M(){const N=i.layer.time,V=[];if(!N)return;if(N.values)return N.values.map(de=>new Date(de).getTime());const K=new Date(N.minValue),te=new Date(N.maxValue??Date.now()),J=1024,ne=new Date(K.getTime()),se=N.interval??lO;if(ne.setFullYear(K.getFullYear()+J*se[0]),ne.setMonth(K.getMonth()+J*se[1],K.getDate()+J*se[2]),ne.setSeconds(K.getSeconds()+J*se[3]),ne>te)for(let de=0;;de++){const _e=new Date(K.getTime());if(_e.setFullYear(K.getFullYear()+de*se[0]),_e.setMonth(K.getMonth()+de*se[1],K.getDate()+de*se[2]),_e.setSeconds(K.getSeconds()+de*se[3]),_e<=te)V.push(_e.getTime());else break}return V}function G(N){var te;const V=N/100*(l.value-r.value)+r.value,K=Uae(V,{minValue:r.value,maxValue:l.value,timeValueList:s.value,timeInterval:(te=i.layer.time)==null?void 0:te.interval});return RT(K)}function P(N,V){const K=G(N);if(m.value=K,V){const te=G(V);d.value=te}}function F(N,V,K){P(N,V),K||n("changeTime",m.value,d.value)}return(N,V)=>{var K,te,J,ne,se,de,_e;return U(),$("div",nbe,[((K=N.layer.time)==null?void 0:K.mode)===k(vd).VALUE?(U(),$("div",rbe,[lt(tk,{ariaLabelMin:`${k(t)("Edit the start date",{ns:"app"})}`,selectedMinValue:w.value,onChange:F},null,8,["ariaLabelMin","selectedMinValue"])])):Ae("",!0),((te=N.layer.time)==null?void 0:te.mode)===k(vd).RANGE?(U(),$("div",sbe,[lt(tk,{ariaLabelMin:`${k(t)("Edit the start date",{ns:"app"})}`,ariaLabelMax:`${k(t)("Edit the end date",{ns:"app"})}`,selectedMinValue:w.value,selectedMaxValue:S.value,onChange:F},null,8,["ariaLabelMin","ariaLabelMax","selectedMinValue","selectedMaxValue"])])):Ae("",!0),W("div",obe,[((J=N.layer.time)==null?void 0:J.mode)===k(vd).RANGE||((ne=N.layer.time)==null?void 0:ne.mode)===k(vd).VALUE?(U(),$("div",lbe,[W("span",null,q(m.value?k(L9)(m.value,(se=N.layer.time)==null?void 0:se.resolution):"-"),1)])):Ae("",!0),((de=N.layer.time)==null?void 0:de.mode)===k(vd).RANGE?(U(),$("div",ube,[W("span",null,q(d.value?k(L9)(d.value,(_e=N.layer.time)==null?void 0:_e.resolution):"-"),1)])):Ae("",!0)])])}}}),dbe=$e({__name:"layer-time",props:{layer:{}},emits:["changeTime"],setup(a,{emit:e}){const t=e;function i(n,s){t("changeTime",n,s)}return(n,s)=>{var r,l,u,d,m;return U(),$(Ot,null,[((r=n.layer.time)==null?void 0:r.widget)===k(U2).SLIDER?(U(),Gt(cbe,{key:0,layer:n.layer,onChangeTime:i},null,8,["layer"])):Ae("",!0),((l=n.layer.time)==null?void 0:l.widget)===k(U2).DATEPICKER&&((u=n.layer.time)==null?void 0:u.mode)===k(vd).VALUE?(U(),Gt(j1e,{key:1,layer:n.layer,onChangeTime:i},null,8,["layer"])):Ae("",!0),((d=n.layer.time)==null?void 0:d.widget)===k(U2).DATEPICKER&&((m=n.layer.time)==null?void 0:m.mode)===k(vd).RANGE?(U(),Gt(ebe,{key:2,layer:n.layer,onChangeTime:i},null,8,["layer"])):Ae("",!0)],64)}}}),hbe={class:"lux-layer-manager-item relative"},_be={class:"w-full flex flex-nowrap items-start gap-x-2"},mbe=["title"],pbe=["aria-label","title"],gbe=["aria-expanded","aria-controls","data-cy"],fbe={class:"grow"},ybe=["title","aria-label"],ak=$e({__name:"layer-item",props:{is3d:{type:Boolean},layer:{},dragHandleClassName:{},isOpen:{type:Boolean},isLayerComparatorOpen:{type:Boolean},displayLayerComparatorOpen:{type:Boolean}},emits:["clickInfo","clickToggle","clickToggleLayerComparator","clickRemove","changeOpacity","changeTime"],setup(a,{emit:e}){const t=a,i=e,{t:n,onClickInfo:s}=IN(t.layer,{emit:i}),r=vo(),l=St(()=>n(r.getLayerCurrentLabel(t.layer),{ns:"client"})),u=St(()=>!If().isOffLine.value),d=St(()=>n('Sort "{{layerName}}" in the list',{ns:"app",layerName:l.value})),m=St(()=>n('Display informations for "{{layerName}}"',{ns:"app",layerName:l.value})),f=St(()=>n('Remove layer "{{layerName}}"',{ns:"app",layerName:l.value}));function v(w,S){i("changeTime",w,S)}return(w,S)=>(U(),$("div",hbe,[W("div",_be,[W("button",{class:Pa(["fa-solid fa-bars cursor-move mt-1",w.dragHandleClassName]),title:d.value},null,10,mbe),u.value?(U(),$("button",{key:0,class:"fa-solid fa-info mt-1","aria-label":m.value,title:m.value,onClick:S[0]||(S[0]=(...T)=>k(s)&&k(s)(...T))},null,8,pbe)):Ae("",!0),W("button",{"aria-expanded":w.isOpen,"aria-controls":`layer-manager-item-content-${w.layer.id}`,"data-cy":`myLayerItemLabel-${w.layer.id}`,class:Pa([w.is3d?"cursor-default":"","grow text-left break-words w-[70%] flex items-center"]),onClick:S[1]||(S[1]=T=>w.$emit("clickToggle",w.layer))},[W("span",fbe,q(l.value),1),w.is3d?Ae("",!0):(U(),$("span",{key:0,class:Pa(["w-3.5 fa-solid",w.isOpen?"fa-xmark":"fa-ellipsis"]),"aria-hidden":"true"},null,2))],10,gbe),W("button",{class:"mt-1 fa-regular fa-trash-can",title:f.value,"aria-label":f.value,onClick:S[2]||(S[2]=T=>w.$emit("clickRemove",w.layer))},null,8,ybe)]),w.is3d?Ae("",!0):(U(),Gt(X1e,{key:0,layer:w.layer,isOpen:w.isOpen,isLayerComparatorOpen:w.isLayerComparatorOpen,displayLayerComparatorOpen:w.displayLayerComparatorOpen,onClickToggleLayerComparator:S[3]||(S[3]=T=>w.$emit("clickToggleLayerComparator",T)),onChangeOpacity:S[4]||(S[4]=(T,M)=>w.$emit("changeOpacity",T,M))},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen"])),w.layer.time?(U(),Gt(dbe,{key:1,layer:w.layer,onChangeTime:v},null,8,["layer"])):Ae("",!0)]))}}),bbe={key:0,class:"text-black"},vbe={key:1,class:"mb-4 sortable-layers-3d"},xbe=["id"],wbe={class:"sortable-layers"},Ibe=["id"],Cbe={key:2,class:"flex flex-row justify-center space-x-1 my-2"},ik="drag-handle",Sbe=$e({__name:"layer-manager",emits:["displayCatalog"],setup(a,{emit:e}){const{t}=wt(),{setMetadataLayer:i}=OI(),n=Zi(),s=_i(),r=d_(),l=Fw(),{bgLayer:u}=Tt(n),{sliderActive:d}=Tt(l),{isOffLine:m}=Tt(s),{setRemoteLayersOpen:f}=s,v=St(()=>[...n.layers].reverse()),w=St(()=>[...n.layers3d].reverse()),S=Di(),T=St(()=>r.isLayerStyleEditable(u.value)),M=St(()=>!m.value),G=e;In(()=>{const se=document.querySelector(".sortable-layers"),de=document.querySelector(".sortable-layers-3d");I4(se,{onSort:P}),I4(de,{onSort:F})});function P(se,de){const _e=[...se].map(Se=>Number(Se.id)).reverse();n.reorderLayers(_e,de)}function F(se){P(se,!0)}function N(se,de){n.setLayerOpacity(se.id,de/100)}function V(se,de,_e){n.setLayerTime(se.id,de,_e)}function K(se){n.removeLayers(se.id)}function te(se){S.value=S.value!==se.id?se.id:void 0}function J(){s.openStyleEditorPanel()}function ne(){l.toggleSlider()}return(se,de)=>(U(),$("div",null,[k(m)&&v.value.length===0?(U(),$("div",bbe,q(k(t)("No layer selected",{ns:"client"})),1)):Ae("",!0),w.value.length>0?(U(),$("ul",vbe,[(U(!0),$(Ot,null,xi(w.value,(_e,Se)=>(U(),$("li",{key:_e.id,id:_e.id,"data-cy":"myLayer"},[lt(ak,{is3d:!0,dragHandleClassName:ik,layer:_e,isOpen:S.value===_e.id,isLayerComparatorOpen:k(d),displayLayerComparatorOpen:Se===0,onClickRemove:K,onClickToggle:te,onClickToggleLayerComparator:ne,onClickInfo:ce=>k(i)(_e),onChangeOpacity:N,onChangeTime:(ce,Ie)=>V(_e,ce,Ie)},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen","onClickInfo","onChangeTime"])],8,xbe))),128))])):Ae("",!0),W("ul",wbe,[(U(!0),$(Ot,null,xi(v.value,(_e,Se)=>(U(),$("li",{key:_e.id,id:_e.id,"data-cy":"myLayer"},[lt(ak,{is3d:!1,dragHandleClassName:ik,layer:_e,isOpen:S.value===_e.id,isLayerComparatorOpen:k(d),displayLayerComparatorOpen:Se===0,onClickRemove:K,onClickToggle:te,onClickToggleLayerComparator:ne,onClickInfo:ce=>k(i)(_e),onChangeOpacity:N,onChangeTime:(ce,Ie)=>V(_e,ce,Ie)},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen","onClickInfo","onChangeTime"])],8,Ibe))),128))]),lt(V1e,{layer:k(u)||k(_w),showEditButton:T.value,onClickInfo:de[0]||(de[0]=()=>k(u)&&k(i)(k(u))),onClickEdit:J},null,8,["layer","showEditButton"]),M.value?(U(),$("div",Cbe,[W("button",{"data-cy":"addLayer",class:"bg-white text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:de[1]||(de[1]=_e=>G("displayCatalog"))},q(k(t)("+ Add layers",{ns:"client"})),1),W("button",{"data-cy":"addRemoteLayer",class:"bg-white text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:de[2]||(de[2]=_e=>k(f)(!0))},q(k(t)("+ Add external Wms",{ns:"client"})),1)])):Ae("",!0),de[3]||(de[3]=W("div",{class:"lux-preload"},[W("i",{class:"fa-regular fa-trash-can"})],-1))]))}}),Abe=["data-cy"],Tbe={key:0,class:"lux-panel-title h-16 shrink-0 flex justify-between"},Ebe=["aria-label"],Mbe={key:1,class:"lux-panel-tabs flex flex-row gap-2 h-10 text-2xl"},Lbe={class:"lux-panel-content relative grow p-2.5 bg-primary overflow-auto"},ap=$e({__name:"side-panel-layout",props:{dataCyValue:{},closeFn:{type:Function}},setup(a){const{t:e}=wt();return(t,i)=>(U(),$("div",{"data-cy":t.dataCyValue,class:"lux-panel flex flex-col h-full pt-1.5"},[t.$slots.header?(U(),$("div",Tbe,[Xa(t.$slots,"header"),W("span",null,[W("button",{"data-cy":"panelClose",onClick:i[0]||(i[0]=()=>t.closeFn()),"aria-label":k(e)("Close",{ns:"client"}),class:"fa-sharp fa-solid fa-close"},null,8,Ebe)])])):Ae("",!0),t.$slots.tabs?(U(),$("div",Mbe,[Xa(t.$slots,"tabs")])):Ae("",!0),W("div",Lbe,[Xa(t.$slots,"content")])],8,Abe))}}),Rbe=["aria-expanded"],kbe={key:0},Wbe=["aria-expanded"],Gbe=$e({__name:"layer-panel",setup(a){const{t:e}=wt(),t=_i(),{setLayersOpen:i}=t,{myLayersTabOpen:n}=Tt(t),{layers:s}=Tt(Zi()),r=St(()=>!If().isOffLine.value),l=St(()=>n.value||If().isOffLine.value);function u(){t.setMyLayersTabOpen(!0)}function d(){t.setMyLayersTabOpen(!1)}return(m,f)=>(U(),Gt(ap,{"data-cy-value":"layerPanel","close-fn":()=>k(i)(!1)},{header:Ht(()=>[W("h1",null,q(k(e)("layers",{ns:"client"})),1)]),tabs:Ht(()=>[W("button",{"data-cy":"myLayersButton",onClick:u,class:Pa(["text-white px-4 hover:bg-primary cursor-pointer text-center uppercase",l.value?"bg-primary":"bg-tertiary"]),"aria-expanded":l.value},[Jt(q(k(e)("my_layers",{ns:"client"}))+" ",1),k(s).length?(U(),$("span",kbe,"("+q(k(s).length)+")",1)):Ae("",!0)],10,Rbe),r.value?(U(),$("button",{key:0,"data-cy":"catalogButton",onClick:d,class:Pa(["text-white px-4 hover:bg-primary cursor-pointer text-center uppercase",l.value?"bg-tertiary":"bg-primary"]),"aria-expanded":!l.value},q(k(e)("Catalog",{ns:"client"})),11,Wbe)):Ae("",!0)]),content:Ht(()=>[La(lt(Sbe,{"data-cy":"myLayers",onDisplayCatalog:d},null,512),[[Em,l.value]]),La(W("div",null,[lt(c1e)],512),[[Em,!l.value]])]),_:1},8,["close-fn"]))}}),Obe={class:"lux-legends absolute"},Pbe={key:0,class:"text-white"},Bbe={class:"pb-5"},Nbe={class:"pb-5"},Fbe=$e({__name:"legends-panel",setup(a){const{t:e}=wt(),t=_i(),i=Zi(),n=vo(),{layers:s,bgLayer:r}=Tt(i),l=St(()=>[...s.value].reverse()),u=Fe(new Map),d=Fe(!1);return dr(()=>d.value=[...u.value].some(([m,f])=>f)),es(()=>u.value.clear()),E6(()=>u.value.clear()),(m,f)=>(U(),Gt(ap,{"data-cy-value":"legendsPanel","close-fn":()=>k(t).toggleLegendsOpen(!1)},{header:Ht(()=>[W("h1",null,q(k(e)("Legends")),1)]),content:Ht(()=>[W("div",Obe,[d.value?Ae("",!0):(U(),$("div",Pbe,q(k(e)("Aucune lgende n'est disponible pour les couches slectionnes.")),1)),(U(!0),$(Ot,null,xi(l.value,v=>(U(),Gt(g4,{"data-cy":"legendLayer",class:"pt-10",key:v.id,layer:v,onHasLegend:w=>u.value.set(v.id,w),onRemovedLegend:()=>u.value.delete(v.id)},{title:Ht(()=>[W("h1",Bbe,q(k(e)(k(n).getLayerCurrentLabel(v))),1)]),_:2},1032,["layer","onHasLegend","onRemovedLegend"]))),128)),k(r)?(U(),Gt(g4,{"data-cy":"legendBgLayer",class:"pt-10",key:k(r).id,layer:k(r)},{title:Ht(()=>[W("h1",Nbe,q(k(e)(k(n).getLayerCurrentLabel(k(r)))),1)]),_:1},8,["layer"])):Ae("",!0)])]),_:1},8,["close-fn"]))}});class Dbe{constructor(e){zt(this,"timeoutID");const t=Zi(),i=vu(),n=vi(),s=d_(),r=H3(),{getIsOffline:l}=If(),{appliedStyle:u}=Tt(i);Ut(()=>t.layers,(d,m)=>{const f={layers:m},v={layers:d},w=n.getRemovedLayers(v,f),S=n.getAddedLayers(v,f),T=n.getMutatedLayers(v,f);w.forEach(M=>r.removeLayer(e,M.id)),S.forEach(M=>{r.addLayer(e,M.layer),r.setLayerTime(e,M.layer)}),T.forEach(M=>{n.getMutationType(M.id,v,f)===U5.ON_LAYER_TYPE?(r.removeLayer(e,M.id),r.addLayer(e,M)):r.setLayerOpacity(e,M.id,M.opacity),r.setLayerTime(e,M)}),v.layers&&r.reorderLayers(e,v.layers)}),Ut(()=>t.bgLayer,d=>d!==void 0&&r.setBgLayer(e,d,i.bgVectorSources)),dr(()=>{i.isExpertStyleActive||(u.value=s.applyDefaultStyle(t.bgLayer,i.bgVectorBaseStyles,i.bgStyle))}),Ut(u,d=>{l()||(i.bgStyle===null&&!i.isExpertStyleActive?s.unregisterStyle(i.styleSerial).then(i.styleSerial=null):(clearTimeout(this.timeoutID),this.timeoutID=setTimeout(()=>{s.registerStyle(d,i.styleSerial).then(m=>{var v;i.styleSerial=m;const f=(v=t==null?void 0:t.bgLayer)==null?void 0:v.id;t!=null&&t.bgLayer&&f!==void 0&&m!==void 0&&r.setBgLayer(e,t==null?void 0:t.bgLayer,i.bgVectorSources)})},2e3))),r.applyOnBgLayer(e,m=>s.applyConsolidatedStyle(m,d))}),Ut(()=>i.bgVectorSources,(d,m)=>{var f;for(const v of d.keys())(!m||m.get(v)!==d.get(v))&&(r.removeFromCache(v),v===((f=t==null?void 0:t.bgLayer)==null?void 0:f.id)&&r.setBgLayer(e,t==null?void 0:t.bgLayer,d))})}}class Vbe{constructor(e){const t=e.getView(),i=Zi();t.setMaxZoom(R7),t.setMinZoom(PY),t.setConstrainResolution(!0),Ut(()=>i.minZoom,n=>n!==void 0&&t.setMinZoom(n)),Ut(()=>i.maxZoom,n=>n!==void 0&&t.setMaxZoom(n))}}const Zbe={0:8,1:9,2:9,3:10,4:11,5:12,6:13,7:14,8:16,9:17,10:18,11:19,12:20,13:21};class zbe{bootstrap(){this.restore(),this.persist()}persistZoom(){const e=Zi(),{zoom:t}=Tt(e),i=vi().getOlMap().getView(),n=()=>{const s=i.getZoom(),r=s?Math.ceil(s):null;Ma.setValue(z9,r),t.value=r};n(),ba(i,"change:resolution",jg(n,300))}persistRotation(){const e=Zi(),{rotation:t}=Tt(e),i=vi().getOlMap().getView(),n=()=>{const s=i.getRotation()||0;Ma.setValue(U9,s),t.value=s};n(),ba(i,"change:rotation",jg(n,300))}persistXY(){const e=Zi(),{x:t,y:i}=Tt(e),n=vi().getOlMap().getView(),s=()=>{const r=n.getCenter(),l=r?Math.round(r[0]):null,u=r?Math.round(r[1]):null;Ma.setValue(NT,l),Ma.setValue(FT,u),t.value=l,i.value=u};s(),ba(n,Om.PROPERTYCHANGE,jg(s,300))}persist(){this.persistXY(),this.persistZoom(),this.persistRotation()}restore(){const e=vi().getOlMap().getView(),t=Ma.getValue(z9,mm),i=Ma.getValue(U9,mm),n=Ma.getInitialVersion(),s=Ma.getValue(NT,mm),r=Ma.getValue(FT,mm),l=Ma.getValue($re),u=Wm(Kl,Im);let d,m;t!==void 0?m=n===3?Number(t):Zbe[t]:m=parseInt("8",10),s!=null&&r!=null?n===3&&l!=null?d=kr([s,r],l,Im):d=n===3?[s,r]:u([r,s],void 0,2):d=kr([6,49.7],Gd,Im),e.setCenter(d),e.setZoom(m),e.setRotation(i||0)}}const Ube=new zbe,dd={ANGLE:"a",COLOR:"c",IS_CIRCLE:"l",IS_RECTANGLE:"r",IS_TEXT:"t",NAME:"n",SHOW_LABEL:"b",OPACITY:"o",AZIMUT:"z",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"},fd={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"},Hbe={LineString:fd.LINE_STRING,Point:fd.POINT,Polygon:fd.POLYGON,MultiLineString:fd.LINE_STRING,MultiPoint:fd.POINT,MultiPolygon:fd.POLYGON};let $0={};class Xbe extends uye{constructor(t){super();zt(this,"accuracy_");zt(this,"encodeStyles_");zt(this,"propertiesFunction_");zt(this,"setStyle_");zt(this,"prevX_");zt(this,"prevY_");const i=t??{};this.accuracy_=i.accuracy??qbe,this.encodeStyles_=i.encodeStyles??!0,this.propertiesFunction_=i.properties??Ybe,this.setStyle_=i.setStyle??!0,this.prevX_=0,this.prevY_=0,$0=i.propertiesType!==void 0&&i.propertiesType}decodeCoordinates_(t,i){const n=t.length;let s=0;const r=i!==void 0?i:[];let l=r.length;for(;s<n;){let u,d=0,m=0;do u=Dw.indexOf(t.charAt(s++)),m|=(u&31)<<d,d+=5;while(u>=32);const f=m&1?~(m>>1):m>>1;this.prevX_+=f,d=0,m=0;do u=Dw.indexOf(t.charAt(s++)),m|=(u&31)<<d,d+=5;while(u>=32);const v=m&1?~(m>>1):m>>1;this.prevY_+=v,r[l++]=this.prevX_*this.accuracy_,r[l++]=this.prevY_*this.accuracy_}return r}encodeCoordinates_(t,i,n,s){let r="";for(let l=n;l<s;l+=i){let u=t[l],d=t[l+1];u=Math.floor(u/this.accuracy_),d=Math.floor(d/this.accuracy_);const m=u-this.prevX_,f=d-this.prevY_;this.prevX_=u,this.prevY_=d,r+=nk(m)+nk(f)}return r}readFeatureFromText(t){let i=t.indexOf("~");const n=i>=0?t.substring(0,i)+")":t,s=this.readGeometryFromText(n),r=new kn(s);if(i>=0){const l=t.substring(i+1,t.length-1);i=l.indexOf("~");const u=i>=0?l.substring(0,i):l;if(u!=""){const d=u.split("'");for(let m=0;m<d.length;++m){const v=d[m].split("*");let w=v[0];const S=v[1];!this.setStyle_&&$0[w]&&(w=$0[w]),r.set(w,S)}}if(i>=0){const d=l.substring(i+1);this.setStyle_?ove(d,r):lve(d,r)}}return r}readFeaturesFromText(t){const i=[];for(t=t.substring(1);t.length>0;){const n=t.indexOf(")"),s=this.readFeatureFromText(t.substring(0,n+1));i.push(s),t=t.substring(n+1)}return i}readGeometryFromText(t){const i=pve[t[0]];return this.prevX_=0,this.prevY_=0,i.call(this,t)}getCastShortProperty(t,i){const n=Bg[i];return CN(i,t.get(n))}decodeShortProperties(t,i){var m;const n=(m=t.getGeometry())==null?void 0:m.getType(),s=this.getCastShortProperty(t,"isCircle")?"drawnCircle":this.getCastShortProperty(t,"isLabel")?"drawnLabel":`drawn${n==null?void 0:n.replace("String","")}`,r={showOrientation:!1,...Object.fromEntries(fve.map(f=>[f,this.getCastShortProperty(t,f)]))},l=t.get(Bg.name),u=t.get(Bg.description);return Object.values(Bg).forEach(f=>t.unset(f)),Object.assign(new Vf,t,{id:Math.floor(Math.random()*Date.now()),label:l,description:u,editable:!1,display_order:i,selected:!1,map_id:void 0,saving:!1,featureType:s,featureStyle:r})}writeFeatureText(t,i){const n=[];let s="";const r=t.getGeometry();r!=null&&(s=this.writeGeometryText(r,i)),s.length>0&&(s=s.substring(0,s.length-1),n.push(s));const l=[],u=function(m,f){if(f!==t.getGeometryName()){l.length!==0&&l.push("'");const v=f.replace(/[()'*]/g,"_")+"*"+m.toString().replace(/[()'*]/g,"_");l.push(v)}},d=this.propertiesFunction_(t);for(const m in d)u(d[m],m);if(l.length>0&&(n.push("~"),Array.prototype.push.apply(n,l)),this.encodeStyles_){const m=t.getStyleFunction();if(m!==void 0){let f=m.call(this,t,0);if(f!==null){const v=[];f=Array.isArray(f)?f:[f],jbe(f,r==null?void 0:r.getType(),v),v.length>0&&(n.push("~"),Array.prototype.push.apply(n,v))}}}return n.push(")"),n.join("")}writeFeaturesText(t,i){const n=[];if(t.length>0){n.push("F");for(let s=0,r=t.length;s<r;++s)n.push(this.writeFeatureText(t[s],i))}return n.join("")}writeGeometryText(t,i){const n=gve[t.getType()],s=jl(t,!0,i);return this.prevX_=0,this.prevY_=0,n.call(this,s)}}const Dw=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz",qbe=1;function Ybe(a){return a.getProperties()}function nk(a){let e=a<<1;return a<0&&(e=~e),Kbe(e)}function Kbe(a){let e="";for(;a>=32;)e+=Dw.charAt(32|a&31),a>>=5;return e+=Dw.charAt(a),e}function jbe(a,e,t){const i=Hbe[e];for(let n=0;n<a.length;++n){const s=a[n],r=s.getFill(),l=s.getImage(),u=s.getStroke(),d=s.getText();i==fd.POLYGON?r!==null&&u&&Qbe(r,u,t):i==fd.LINE_STRING?u!==null&&$be(u,t):i==fd.POINT&&l!==null&&Jbe(l,t),d!==null&&eve(d,t)}}function $be(a,e){dE(a,e)}function Jbe(a,e){if(a instanceof to){const t=a.getRadius();e.length>0&&e.push("'"),e.push("pointRadius*"+t);const i=a.getFill();i!==null&&cE(i,e);const n=a.getStroke();n!==null&&dE(n,e)}}function Qbe(a,e,t){cE(a,t),e!==null&&dE(e,t)}function cE(a,e,t){const i=t!==void 0?t:"fillColor",n=a.getColor();if(n!==null){const s=Zl(n),r=MB(s);e.length>0&&e.push("'"),e.push(i+"*"+r)}}function dE(a,e){const t=a.getColor();if(t!==null){const n=Zl(t),s=MB(n);e.length>0&&e.push("'"),e.push("strokeColor*"+s)}const i=a.getWidth();i!==void 0&&(e.length>0&&e.push("'"),e.push("strokeWidth*"+i))}function eve(a,e){const t=a.getFont();if(t!==void 0){const n=t.split(" ");n.length>=3&&(e.length>0&&e.push("'"),e.push("fontSize*"+n[1]))}const i=a.getFill();i!==null&&cE(i,e,"fontColor")}function tve(a){a=a.substring(2,a.length-1);const e=this==null?void 0:this.decodeCoordinates_(a);return new zr(e)}function ave(a){a=a.substring(2,a.length-1);let e=[];const t=[],i=a.split("'");for(let n=0,s=i.length;n<s;++n)e=this==null?void 0:this.decodeCoordinates_(i[n],e),t[n]=e.length;return new c_(e,"XY",t)}function ive(a){a=a.substring(2,a.length-1);const e=this==null?void 0:this.decodeCoordinates_(a);return new Qn(e)}function nve(a){a=a.substring(2,a.length-1);const e=this==null?void 0:this.decodeCoordinates_(a);return new Vm(e)}function rve(a){a=a.substring(2,a.length-1);let e=[];const t=[],i=a.split("'");for(let n=0,s=i.length;n<s;++n){e=this==null?void 0:this.decodeCoordinates_(i[n],e);let r=e.length;n===0?(e[r++]=e[0],e[r++]=e[1]):(e[r++]=e[t[n-1]],e[r++]=e[t[n-1]+1]),t[n]=r}return new Au(e,"XY",t)}function sve(a){a=a.substring(2,a.length-1);let e=[];const t=[],i=a.split(")(");for(let n=0,s=i.length;n<s;++n){const r=i[n].split("'"),l=t[n]=[];for(let u=0,d=r.length;u<d;++u){e=this==null?void 0:this.decodeCoordinates_(r[u],e);let m=e.length;u===0?(e[m++]=e[0],e[m++]=e[1]):(e[m++]=e[l[u-1]],e[m++]=e[l[u-1]+1]),l[u]=m}}return new ub(e,"XY",t)}function ove(a,e){if(a=="")return;const t=SN(a),i=t.fillColor,n=t.fontSize,s=t.fontColor,r=t.pointRadius,l=t.strokeColor,u=t.strokeWidth;let d;i!==void 0&&(d=new wn({color:i}));let m;l!==void 0&&u!==void 0&&(m=new mn({color:l,width:u}));let f;r!==void 0&&(f=new to({radius:r,fill:d,stroke:m}),d=m=void 0);let v;n!==void 0&&s!==void 0&&(v=new kf({font:n+" sans-serif",fill:new wn({color:s})}));const w=new Vi({fill:d,image:f,stroke:m,text:v});e.setStyle(w)}function lve(a,e){const t=SN(a),i=e.getGeometry();if(i instanceof Qn?t.isLabel||t[dd.IS_TEXT]?(delete t.strokeColor,delete t.fillColor):(delete t.fontColor,delete t.fontSize):(delete t.fontColor,i instanceof zr&&(delete t.fillColor,delete t.fillOpacity)),t.fontSize){let s=parseFloat(t.fontSize);t.fontSize.indexOf("px")!==-1&&(s=Math.round(s/1.333333)),t.fontSize=s}const n={};for(const s in t){const r=t[s];$0[s]?n[$0[s]]=r:n[s]=r}e.setProperties(n)}function CN(a,e){const t=[dd.ANGLE,dd.OPACITY,dd.SIZE,dd.STROKE,"pointRadius","strokeWidth","stroke","angle","opacity","size"],i=[dd.IS_CIRCLE,dd.IS_RECTANGLE,dd.IS_TEXT,dd.SHOW_MEASURE,"isCircle","isRectangle","isLabel","showMeasure","showOrientation"];return t.includes(a)?+e:i.includes(a)?e==="true":e}function SN(a){const e=a.split("'"),t={};for(let i=0;i<e.length;++i){const s=e[i].split("*"),r=s[0],l=s[1];t[r]=CN(r,l)}return t}function uve(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=t.length;return"l("+(this==null?void 0:this.encodeCoordinates_(t,i,0,n))+")"}function cve(a){const e=a,t=e.getEnds(),i=t.length,n=e.getFlatCoordinates(),s=e.getStride();let r=0;const l=["L("];for(let u=0;u<i;++u){const d=t[u],m=this==null?void 0:this.encodeCoordinates_(n,s,r,d);u!==0&&l.push("'"),l.push(m),r=d}return l.push(")"),l.join("")}function dve(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=t.length;return"p("+(this==null?void 0:this.encodeCoordinates_(t,i,0,n))+")"}function hve(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=t.length;return"P("+(this==null?void 0:this.encodeCoordinates_(t,i,0,n))+")"}function AN(a,e,t,i,n){const s=i.length;for(let r=0;r<s;++r){const l=i[r]-e,u=this==null?void 0:this.encodeCoordinates_(a,e,t,l);r!==0&&n.push("'"),n.push(u),t=i[r]}return t}function _ve(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=e.getEnds(),s=0,r=["a("];return AN.call(this,t,i,s,n,r),r.push(")"),r.join("")}function mve(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=e.getEndss(),s=n.length;let r=0;const l=["A"];for(let u=0;u<s;++u){const d=n[u];l.push("("),r=AN.call(this,t,i,r,d,l),l.push(")")}return l.join("")}const pve={P:nve,L:ave,A:sve,l:tve,p:ive,a:rve},gve={MultiLineString:cve,MultiPoint:hve,MultiPolygon:mve,LineString:uve,Point:dve,Polygon:_ve},Bg={angle:"a",color:"c",description:"d",stroke:"e",isLabel:"i",linestyle:"l",name:"n",opacity:"o",showOrientation:"r",shape:"s",size:"t",isCircle:"u",symbolId:"symbolId",symboltype:"symboltype"},fve=["angle","color","stroke","linestyle","opacity","showOrientation","shape","size","symbolId","symboltype"],lx=new Xbe({encodeStyles:!1,properties:function(a){const e=a.toProperties();for(const t in e)if(e[t]===null||e[t]===void 0)delete e[t];else if(Bg[t]){const i=e[t];delete e[t],e[Bg[t]]=i}return e}});window.Cypress&&(window.featureHash=lx);class yve{featuresToUrl(e){if(!e)return"";const t=e.filter(i=>!i.map_id).sort((i,n)=>i.display_order-n.display_order).map(i=>{const n=new Vf(i);return EB(n)});return t.length>0?lx.writeFeatures(t):""}urlToFeatures(e){return(e?lx.readFeatures(e):[]).map((n,s)=>lx.decodeShortProperties(n,s)).map(n=>Ome(n))}}const rk=new yve;class bve{bootstrap(){this.restore();let e;e=dr(()=>{this.persist(),e&&e()})}persist(){const{drawnFeatures:e}=Tt(wo());Ut(e,t=>{Ma.setValue(PT,t,rk.featuresToUrl)},{immediate:!0})}restore(){const{drawnFeatures:e}=Tt(wo()),i=Ma.getValue(PT,rk.urlToFeatures).filter(n=>n!=null);e.value=[...e.value,...i]}}const vve=new bve;class xve{bootstrap(){this.restore();let e;e=dr(()=>{this.persist(),e&&e()})}persist(){const{locationInfoCoords:e}=Tt(Hm());Ut(e,t=>{t===void 0?Ma.removeItem(HS):(Ma.setValue(HS,!0),Ma.setValue(NT,t[0]),Ma.setValue(FT,t[1]))},{immediate:!0})}restore(){const{locationInfoCoords:e}=Tt(Hm()),t=vi().getOlMap(),i=Ma.getValue(HS);i&&i!=="false"&&(e.value=t.getView().getCenter())}}const wve=new xve,Ive={key:0,"data-cy":"attributionControl",class:"absolute bottom-0 z-10 text-[0.8em] px-[4px] text-[#6b818f] bg-[#ffffffb3]"},Cve=$e({__name:"attribution-control",setup(a){const e=Zi(),t=Fe("");return dr(()=>{var i,n;t.value=((n=(i=e.bgLayer)==null?void 0:i.metadata)==null?void 0:n.attribution)||""}),(i,n)=>{const s=wl("dompurify-html");return t.value?La((U(),$("div",Ive,null,512)),[[s,t.value]]):Ae("",!0)}}});function Zf(a,e){const t=new a(e),i=vi(),n=$s("olMap");return In(()=>{n.addControl(t),n.changed()}),es(()=>{const s=i.getOlMap();s.removeControl(t),s.changed()}),{control:t}}const Sve=["title"],Ave=$e({__name:"location-control",props:{className:{default:"location-button"},label:{default:""},tipLabel:{default:"Location"}},setup(a){const{t:e}=wt(),{addNotification:t}=Ls(),i=a,n=Fe(null),s=Fe(!1);let r=null,l=null,u=null,d=null,m=null;function f(){if(window.location.protocol!=="https:"&&window.location.hostname!=="localhost"){t(e("La geolocalisation n'est disponible que dans la version scurise du Geoportail (https). Voulez-vous tre automatiquement redirig?",{ns:"client"}),on.WARNING);return}r===null&&v(),r!=null&&r.getTracking()?(S(),r==null||r.setTracking(!1)):(w(),m==null||m.getView().setZoom(17),r==null||r.setTracking(!0))}function v(){m&&(r=new Fme({projection:m.getView().getProjection(),trackingOptions:{enableHighAccuracy:!0,maximumAge:6e4,timeout:7e3}}),r.on("change:tracking",()=>{s.value=(r==null?void 0:r.getTracking())??!1}),r.on("change:position",()=>{const T=r==null?void 0:r.getPosition();T&&l&&(l.setGeometry(new Qn(T)),m==null||m.getView().setCenter(T))}),r.on("change:accuracyGeometry",()=>{const T=r==null?void 0:r.getAccuracyGeometry();T&&u&&u.setGeometry(T)}),r.on("error",T=>{if(S(),T.message&&T.message.length>0){const M=e("Erreur lors de l'acquisition de la position :",{ns:"client"})+" "+T.message;t(M,on.ERROR)}}))}function w(){var T,M,G;m&&(d||(l=new kn,l.setStyle(new Vi({image:new to({radius:6,fill:new wn({color:"#3399CC"}),stroke:new mn({color:"#fff",width:2})})})),u=new kn,u.setStyle(new Vi({fill:new wn({color:"rgba(51, 153, 204, 0.2)"}),stroke:new mn({color:"#3399CC",width:2})})),d=new eo({source:new Qo({features:[]}),zIndex:1e3}),m.addLayer(d)),(T=d.getSource())==null||T.clear(),u==null||u.setGeometry(void 0),l==null||l.setGeometry(void 0),u&&l&&((M=d.getSource())==null||M.addFeature(u),(G=d.getSource())==null||G.addFeature(l)))}function S(){var T;(T=d==null?void 0:d.getSource())==null||T.clear()}return In(()=>{m=vi().getOlMap(),Zf(zd,{...i,target:n})}),es(()=>{r&&r.setTracking(!1),d&&m&&m.removeLayer(d)}),(T,M)=>(U(),$("div",{ref_key:"controlElement",ref:n,class:Pa([{"tracker-on":s.value,"tracker-off":!s.value},i.className,k(Ec),k(s_)])},[W("button",{title:k(e)(i.tipLabel),onClick:f},q(i.label),9,Sve)],2))}});const Tve=hr(Ave,[["__scopeId","data-v-74224a7f"]]),Eve={class:"scale-selector dropup"},Mve=["aria-label","aria-expanded","aria-controls"],Lve=["innerHTML"],Rve=["aria-labelledby"],kve=["onClick","aria-label"],Wve=["innerHTML"],Gve=$e({__name:"scale-selector",setup(a){const{t:e}=wt(),{getOlMap:t}=vi(),i=t(),{minZoom:n,maxZoom:s}=Tt(Zi()),r=Fe(!1),l=Fe(null),u=Fe(null);let d=null,m=null;const f={8:"1&nbsp;:&nbsp;1'500'000",9:"1&nbsp;:&nbsp;750'000",10:"1&nbsp;:&nbsp;400'000",11:"1&nbsp;:&nbsp;200'000",12:"1&nbsp;:&nbsp;100'000",13:"1&nbsp;:&nbsp;50'000",14:"1&nbsp;:&nbsp;25'000",15:"1&nbsp;:&nbsp;12'000",16:"1&nbsp;:&nbsp;6'000",17:"1&nbsp;:&nbsp;3'000",18:"1&nbsp;:&nbsp;1'500",19:"1&nbsp;:&nbsp;750",20:"1&nbsp;:&nbsp;400",21:"1&nbsp;:&nbsp;200"},v=Fe(void 0),w=St(()=>{const se=n.value??8,de=s.value??19,_e={};return Object.keys(f).forEach(Se=>{const ce=Number(Se);ce>=se&&ce<=de&&(_e[ce]=f[ce])}),_e}),S=St(()=>Object.keys(w.value).map(Number).sort((se,de)=>se-de)),T=se=>w.value[se]||f[se]||"",M=se=>se.replace(/&nbsp;/g," ").replace(/'/g,"'"),G=St(()=>v.value!==void 0?v.value:""),P=St(()=>v.value?M(v.value):e("No scale")),F=se=>{const de=i.getView();de&&(de.setZoom(se),r.value=!1),Iu(()=>{var _e;(_e=l.value)==null||_e.focus()})},N=()=>{const se=i.getView();if(!se)return;const de=Math.round(se.getZoom()||0),_e=f[de];_e!==void 0&&(v.value=_e)},V=()=>{d!==null&&wm(d);const se=i.getView();se&&(d=se.on("change:resolution",N))},K=()=>{r.value=!r.value,r.value&&Iu(()=>{var de;const se=(de=u.value)==null?void 0:de.querySelector("a");se==null||se.focus()})},te=se=>{se.key==="Enter"||se.key===" "?(se.preventDefault(),se.stopPropagation(),K()):se.key==="Escape"&&r.value?(se.preventDefault(),se.stopPropagation(),r.value=!1):se.key==="ArrowDown"&&!r.value?(se.preventDefault(),se.stopPropagation(),K()):(se.key==="ArrowUp"||se.key==="ArrowDown")&&se.stopPropagation()},J=se=>{var Se,ce,Ie,he,we,Oe;const de=Array.from(((Se=u.value)==null?void 0:Se.querySelectorAll("a"))||[]),_e=de.findIndex(Ye=>Ye===document.activeElement);if(se.key==="Escape")se.preventDefault(),se.stopPropagation(),r.value=!1,(ce=l.value)==null||ce.focus();else if(se.key==="ArrowDown"){se.preventDefault(),se.stopPropagation();const Ye=(_e+1)%de.length;(Ie=de[Ye])==null||Ie.focus()}else if(se.key==="ArrowUp"){se.preventDefault(),se.stopPropagation();const Ye=_e<=0?de.length-1:_e-1;(he=de[Ye])==null||he.focus()}else se.key==="Home"?(se.preventDefault(),se.stopPropagation(),(we=de[0])==null||we.focus()):se.key==="End"?(se.preventDefault(),se.stopPropagation(),(Oe=de[de.length-1])==null||Oe.focus()):se.key==="Tab"&&(r.value=!1)},ne=se=>{const de=se.target;l.value&&!l.value.contains(de)&&u.value&&!u.value.contains(de)&&(r.value=!1)};return In(()=>{const se=i.getView();if(se){const _e=se.getZoom();_e!==void 0&&(v.value=f[Math.round(_e)])}V();const de=i.getView();de&&(m=de.on("change",()=>{V(),N()})),document.addEventListener("click",ne)}),qm(()=>{d!==null&&wm(d),m!==null&&wm(m),document.removeEventListener("click",ne)}),(se,de)=>(U(),$("div",Eve,[W("button",{type:"button",class:"scale-button",onClick:K,onKeydown:te,ref_key:"dropdownButton",ref:l,"aria-label":k(e)("Select scale")+": "+P.value,"aria-expanded":r.value,"aria-haspopup":"true","aria-controls":r.value?"scale-menu":void 0},[W("span",{innerHTML:G.value,"aria-hidden":"true"},null,8,Lve),de[0]||(de[0]=Jt("")),de[1]||(de[1]=W("span",{class:"caret","aria-hidden":"true"},null,-1))],40,Mve),La(W("ul",{ref_key:"dropdownMenu",ref:u,id:"scale-menu",class:"scale-dropdown",role:"menu",onKeydown:J,"aria-labelledby":l.value?"scale-button":void 0},[(U(!0),$(Ot,null,xi(S.value,_e=>(U(),$("li",{key:_e,role:"none"},[W("a",{href:"#",role:"menuitem",onClick:Jr(Se=>F(_e),["prevent"]),"aria-label":M(T(_e)),tabindex:"0"},[W("span",{innerHTML:T(_e)},null,8,Wve)],8,kve)]))),128))],40,Rve),[[Em,r.value]])]))}});const Ove=hr(Gve,[["__scopeId","data-v-1f8cd5e5"]]),CA="units",Pve=[1,2,5],t0=25.4/.28;let Bve=class extends zd{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+Ec,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(CA,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(CA)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(CA,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,i=e.projection,n=this.getUnits(),s=n=="degrees"?"degrees":"m";let r=h1(i,e.resolution,t,s);const l=this.minWidth_*(this.dpi_||t0)/t0,u=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||t0)/t0:void 0;let d=l*r,m="";if(n=="degrees"){const F=Lm.degrees;d*=F,d<F/60?(m="",r*=3600):d<F?(m="",r*=60):m=""}else if(n=="imperial")d<.9144?(m="in",r/=.0254):d<1609.344?(m="ft",r/=.3048):(m="mi",r/=1609.344);else if(n=="nautical")r/=1852,m="NM";else if(n=="metric")d<1e-6?(m="nm",r*=1e9):d<.001?(m="m",r*=1e6):d<1?(m="mm",r*=1e3):d<1e3?m="m":(m="km",r/=1e3);else if(n=="us")d<.9144?(m="in",r*=39.37):d<1609.344?(m="ft",r/=.30480061):(m="mi",r/=1609.3472);else throw new Error("Invalid units");let f=3*Math.floor(Math.log(l*r)/Math.log(10)),v,w,S,T=0,M,G;for(;;){S=Math.floor(f/3);const F=Math.pow(10,S);if(v=Pve[(f%3+3)%3]*F,w=Math.round(v/r),isNaN(w)){this.element.style.display="none",this.renderedVisible_=!1;return}if(u!==void 0&&w>=u){v=T,w=M,S=G;break}else if(w>=l)break;T=v,M=w,G=S,++f}const P=this.scaleBar_?this.createScaleBar(w,v,m):v.toFixed(S<0?-S:0)+" "+m;this.renderedHTML_!=P&&(this.innerElement_.innerHTML=P,this.renderedHTML_=P),this.renderedWidth_!=w&&(this.innerElement_.style.width=w+"px",this.renderedWidth_=w),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){const n=this.getScaleForResolution(),s=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),r=this.scaleBarSteps_,l=e/r,u=[this.createMarker("absolute")];for(let m=0;m<r;++m){const f=m%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";u.push(`<div><div class="ol-scale-singlebar ${f}" style="width: ${l}px;"></div>`+this.createMarker("relative")+(m%2===0||r===2?this.createStepText(m,e,!1,t,i):"")+"</div>")}return u.push(this.createStepText(r,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+u.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,i,n,s){const l=(e===0?0:Math.round(n/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),u=e===0?-3:t/this.scaleBarSteps_*-1,d=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${u}px;text-align: ${e===0?"left":"center"};min-width: ${d}px;left: ${i?t+"px":"unset"};">`+l+"</div>"}getScaleForResolution(){const e=h1(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||t0,i=1e3/25.4;return e*i*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}};const Nve=Bve,Fve={class:"scaleline-wrapper"},Dve=$e({__name:"scale-line",setup(a){const{getOlMap:e}=vi(),t=e(),i=Fe(null);let n=null;return In(()=>{i.value&&(n=new Nve({target:i.value,units:"metric",bar:!1,text:!0,minWidth:64}),t.addControl(n))}),qm(()=>{n&&(t.removeControl(n),n=null)}),(s,r)=>(U(),$("div",Fve,[W("div",{ref_key:"scaleLineContainer",ref:i,class:"scaleline-container"},null,512)]))}});const Vve=hr(Dve,[["__scopeId","data-v-21f5738c"]]),SA="projection",sk="coordinateFormat";class Zve extends zd{constructor(e){e=e||{};const t=document.createElement("div");t.className=e.className!==void 0?e.className:"ol-mouse-position",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(SA,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=e.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=t.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=e.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(sk)}getProjection(){return this.get(SA)}handleMouseMove(e){const t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const t=e.getViewport();this.listenerKeys.push(ba(t,m1.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(ba(t,m1.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(sk,e)}setProjection(e){this.set(SA,Ei(e))}updateHTML_(e){let t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){const s=this.getProjection();s?this.transform_=Ef(this.mapProjection_,s):this.transform_=TW}const n=this.getMap().getCoordinateFromPixelInternal(e);if(n){if(this.transform_(n,n),this.wrapX_){const r=this.getProjection()||this.mapProjection_;oI(n,r)}const s=this.getCoordinateFormat();s?t=s(n):t=n.toString()}}(!this.renderedHTML_||t!==this.renderedHTML_)&&(this.element.innerHTML=t,this.renderedHTML_=t)}render(e){const t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}const zve=Zve,Uve={class:"projection-selector-wrapper"},Hve={class:"projection-selector dropup"},Xve=["aria-label","aria-expanded","aria-controls"],qve={class:"projection-label","aria-hidden":"true"},Yve=["aria-labelledby"],Kve=["onClick","aria-current"],jve=["aria-label"],$ve=$e({__name:"projection-selector",setup(a){const{t:e}=wt(),{getOlMap:t}=vi(),i=t(),{coordinateString:n}=gP(),s=Fe(!1),r=Fe(null),l=Fe(null),u=Fe(null);let d=null;const m=[{label:"LUREF",value:"EPSG:2169"},{label:"Lon/Lat WGS84",value:"EPSG:4326"},{label:"Lon/Lat WGS84 DMS",value:"EPSG:4326:DMS"},{label:"Lon/Lat WGS84 DM",value:"EPSG:4326:DMm"},{label:"WGS84 UTM 32|31",value:"EPSG:3263*"}],f=Fe(m[0]),v=St(()=>f.value.label),w=F=>{if(!F)return"";const N=i.getView().getProjection().getCode(),V=f.value.value;return V==="EPSG:4326:DMS"?n(F,N,"EPSG:4326",!0,!1):V==="EPSG:4326:DMm"?n(F,N,"EPSG:4326",!1,!0):n(F,N,V,!1,!1)},S=F=>{f.value=F,s.value=!1,d&&d.setCoordinateFormat(w),Iu(()=>{var N;(N=r.value)==null||N.focus()})},T=()=>{s.value=!s.value,s.value&&Iu(()=>{var N;const F=(N=l.value)==null?void 0:N.querySelector("a");F==null||F.focus()})},M=F=>{F.key==="Enter"||F.key===" "?(F.preventDefault(),F.stopPropagation(),T()):F.key==="Escape"&&s.value?(F.preventDefault(),F.stopPropagation(),s.value=!1):F.key==="ArrowDown"&&!s.value&&(F.preventDefault(),F.stopPropagation(),T())},G=F=>{var K,te,J,ne,se,de;const N=Array.from(((K=l.value)==null?void 0:K.querySelectorAll("a"))||[]),V=N.findIndex(_e=>_e===document.activeElement);if(F.key==="Escape")F.preventDefault(),F.stopPropagation(),s.value=!1,(te=r.value)==null||te.focus();else if(F.key==="ArrowDown"){F.preventDefault(),F.stopPropagation();const _e=(V+1)%N.length;(J=N[_e])==null||J.focus()}else if(F.key==="ArrowUp"){F.preventDefault(),F.stopPropagation();const _e=V<=0?N.length-1:V-1;(ne=N[_e])==null||ne.focus()}else F.key==="Home"?(F.preventDefault(),F.stopPropagation(),(se=N[0])==null||se.focus()):F.key==="End"?(F.preventDefault(),F.stopPropagation(),(de=N[N.length-1])==null||de.focus()):F.key==="Tab"&&(s.value=!1)},P=F=>{const N=F.target;r.value&&!r.value.contains(N)&&l.value&&!l.value.contains(N)&&(s.value=!1)};return In(()=>{u.value&&(d=new zve({className:"custom-mouse-coordinates",target:u.value,coordinateFormat:w,projection:void 0}),i.addControl(d)),document.addEventListener("click",P)}),qm(()=>{d&&(i.removeControl(d),d=null),document.removeEventListener("click",P)}),(F,N)=>(U(),$("div",Uve,[W("div",Hve,[W("button",{type:"button",class:"projection-button",onClick:T,onKeydown:M,ref_key:"dropdownButton",ref:r,"aria-label":k(e)("Select projection")+": "+v.value,"aria-expanded":s.value,"aria-haspopup":"true","aria-controls":s.value?"projection-menu":void 0},[W("span",qve,q(v.value),1),N[0]||(N[0]=W("span",{class:"caret","aria-hidden":"true"},null,-1))],40,Xve),La(W("ul",{ref_key:"dropdownMenu",ref:l,id:"projection-menu",class:"projection-dropdown",role:"menu",onKeydown:G,"aria-labelledby":r.value?"projection-button":void 0},[(U(),$(Ot,null,xi(m,V=>W("li",{key:V.value,role:"none"},[W("a",{href:"#",role:"menuitem",onClick:Jr(K=>S(V),["prevent"]),class:Pa({active:V.value===f.value.value}),"aria-current":V.value===f.value.value?"true":void 0,tabindex:"0"},q(V.label),11,Kve)])),64))],40,Yve),[[Em,s.value]])]),W("div",{ref_key:"mousePositionContainer",ref:u,class:"mouse-position",role:"status","aria-live":"polite","aria-label":k(e)("Current coordinates")},null,8,jve)]))}});const Jve=hr($ve,[["__scopeId","data-v-5fe08aa6"]]),Qve=["aria-label"],e2e={class:"elevation-label"},t2e={class:"elevation-value",role:"status","aria-live":"polite"},a2e=$e({__name:"elevation-display",setup(a){const{t:e}=wt(),{getOlMap:t}=vi(),i=t(),n=Fe("N/A");let s=null;const r=d=>d===null||d<=0?"N/A":`${d.toFixed(2)} m`,l=async d=>{if(d.coordinate)try{const m=await oN(d.coordinate);n.value=r(m)}catch{n.value="N/A"}},u=d=>{l(d)};return In(()=>{s=ba(i,"pointermove",u)}),qm(()=>{s&&(wm(s),s=null)}),(d,m)=>(U(),$("div",{class:"elevation-display","aria-label":k(e)("Elevation at cursor position")},[W("span",e2e,q(k(e)("Elevation"))+":",1),W("span",t2e,q(n.value),1)],8,Qve))}});const i2e=hr(a2e,[["__scopeId","data-v-71c32fcf"]]),n2e=["aria-label"],r2e={class:"infobar-item"},s2e={class:"infobar-item"},o2e={class:"!hidden lg:!flex infobar-item-projection"},l2e={class:"!hidden lg:!flex infobar-item-elevation"},u2e=$e({__name:"infobar-content",setup(a){const{t:e}=wt();return(t,i)=>(U(),$("div",{class:"infobar",role:"toolbar","aria-label":k(e)("Map information toolbar")},[W("div",r2e,[lt(Ove)]),i[0]||(i[0]=W("div",{class:"infobar-separator","aria-hidden":"true"},null,-1)),W("div",s2e,[lt(Vve)]),i[1]||(i[1]=W("div",{class:"!hidden lg:!block infobar-separator","aria-hidden":"true"},null,-1)),W("div",o2e,[lt(Jve)]),i[2]||(i[2]=W("div",{class:"!hidden lg:!block infobar-separator","aria-hidden":"true"},null,-1)),W("div",l2e,[lt(i2e)])],8,n2e))}});const c2e=hr(u2e,[["__scopeId","data-v-f917cdb1"]]),d2e={key:0,class:"infobar-container"},h2e=["title"],_2e=$e({__name:"infobar-control",props:{className:{default:"infobar-button"},label:{default:""},tipLabel:{default:"Infobar"}},setup(a){const e=Fe(!1),{t}=wt(),i=a;function n(){e.value=!e.value}return(s,r)=>(U(),$("div",{class:Pa([[i.className,k(s_)],"infobar-wrapper"])},[e.value?(U(),$("div",d2e,[lt(c2e)])):Ae("",!0),W("div",{ref:"controlElement",class:Pa([{"infobar-on":e.value,"infobar-off":!e.value},k(Ec)])},[W("button",{title:k(t)(i.tipLabel),onClick:n},q(i.label),9,h2e)],2)],2))}});const m2e=hr(_2e,[["__scopeId","data-v-d41d0ac3"]]),p2e=["href","title"],g2e=$e({__name:"map-3d",props:{className:{default:"map-3d-button"},label:{default:"3D"},tipLabel:{default:"3D"}},setup(a){const e="https://geoportail-luxembourg.github.io/3dviewer/lux/",t=[6.13,49.61],i=["catalogConfig","LuxConfig"],n={9:35e4,10:18e4,11:1e5,12:4e4,13:25e3,14:9e3,15:6e3,16:3500,17:1900,18:900,19:600},s=Zi(),{t:r}=wt(),l=a,{x:u,y:d,zoom:m,layers:f,bgLayer:v,rotation:w}=Tt(s),S=Fe(null),T=St(()=>{const[F,N]=M(u.value,d.value),V=G(m.value??12),K=P(w.value??0),te=f.value.map(se=>JSON.stringify([se.name,1,0])),J=v.value?JSON.stringify([v.value.name,1,0]):null;J&&te.unshift(J);const ne=`[[[${[F,N,V].join(",")}],[${[F,N,V].join(",")}],300,${K},-90,0],"cesium",["${i.join('","')}"],[${te.join(",")}],[],0]`;return`${e}?state=${encodeURIComponent(ne)}`});In(()=>{window.name="lux2d",Zf(zd,{...l,target:S})});function M(F,N){return F&&N?cf([F,N]):t}function G(F){const K=Math.max(9,Math.min(19,Math.round(F)));return n[K]}function P(F){const N=-((F*(180/Math.PI)+360)%360);return Math.round(N)}return(F,N)=>(U(),$("div",{"data-cy":"3dViewerLink",ref_key:"controlElement",ref:S,class:Pa(`${l.className} ${k(Ec)} ${k(s_)}`)},[W("a",{type:"button",target:"lux3d",href:T.value,title:k(r)(l.tipLabel)},"3D",8,p2e)],2))}});const f2e=hr(g2e,[["__scopeId","data-v-05085833"]]),ok=["fullscreenchange","webkitfullscreenchange"],lk={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class y2e extends zd{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const i=e.labelActive!==void 0?e.labelActive:"";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const n=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=n,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(za.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Ec} ${s_}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(uk(t))if(ck(t))v2e(t);else{let i;this.source_?i=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:i=e.getTargetElement(),this.keys_?b2e(i):TN(i)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=ck(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Ox(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(lk.ENTERFULLSCREEN)):(Ox(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(lk.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(ds.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(ds.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let i=0,n=e.length;i<n;++i)_n(e[i]);e.length=0;const t=this.getMap();if(t){const i=t.getOwnerDocument();uk(i)?this.element.classList.remove(gR):this.element.classList.add(gR);for(let n=0,s=ok.length;n<s;++n)e.push(ba(i,ok[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function uk(a){const e=a.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&a.fullscreenEnabled)}function ck(a){return!!(a.webkitIsFullScreen||a.fullscreenElement)}function TN(a){a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()}function b2e(a){a.webkitRequestFullscreen?a.webkitRequestFullscreen():TN(a)}function v2e(a){a.exitFullscreen?a.exitFullscreen():a.webkitExitFullscreen&&a.webkitExitFullscreen()}const x2e=y2e,w2e=$e({__name:"fullscreen-control",props:{className:{},label:{default:""},labelActive:{default:""}},setup(a){return Zf(x2e,a),(t,i)=>Ae("",!0)}}),I2e=$e({__name:"zoom-control",props:{className:{},zoomInLabel:{default:""},zoomOutLabel:{default:""}},setup(a){return Zf(QW,a),(t,i)=>Ae("",!0)}}),C2e=$e({__name:"rotate-control",props:{className:{},label:{}},setup(a){return Zf(JW,a),(t,i)=>Ae("",!0)}});let S2e=class extends zd{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null;const t=e.className!==void 0?e.className:"ol-zoom-extent",i=e.label!==void 0?e.label:"E",n=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=n,s.appendChild(typeof i=="string"?document.createTextNode(i):i),s.addEventListener(za.CLICK,this.handleClick_.bind(this),!1);const r=t+" "+Ec+" "+s_,l=this.element;l.className=r,l.appendChild(s)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),i=this.extent?Ol(this.extent,t.getProjection()):t.getProjection().getExtent();t.fitInternal(lT(i))}};const A2e=S2e;class T2e extends A2e{constructor(t){super(t);zt(this,"ol3dm")}handleZoomToExtent(){this.ol3dm&&this.ol3dm.luxCameraExtentInRadians&&this.ol3dm.is3dEnabled()||super.handleZoomToExtent()}}const E2e=$e({__name:"zoom-to-extent-control",props:{className:{},label:{default:""},tipLabel:{},extent:{}},setup(a){return Zf(T2e,a),(t,i)=>Ae("",!0)}}),M2e={xs:0,sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function hE(a){return window.innerWidth>=M2e[a]}function EN(){const a=wo(),{drawStateActive:e,drawnFeatures:t}=Tt(a),{addDrawnFeature:i}=a,{feedbackOpen:n,feedbackanfOpen:s,feedbackageOpen:r,feedbackcruesOpen:l}=Tt(_i()),{toggleMyMapsOpen:u}=_i(),d=t.value;function m(v){var P;const w=d.length,S=e.value==="drawCircle"?"drawnCircle":e.value==="drawLabel"?"drawnLabel":`drawn${(P=v.getGeometry())==null?void 0:P.getType().replace("String","")}`,T=v.get("name")||`${HD(S.replace("drawn",""))} ${t.value.length+1}`,M={angle:0,color:"#ed1c24",arrowcolor:void 0,stroke:1.25,linestyle:"plain",opacity:.2,showOrientation:!1,shape:"circle",symbolId:void 0,symboltype:void 0,size:10},G=Object.assign(new Vf,v,{id:Math.floor(Math.random()*Date.now()),label:T,description:"",display_order:w,editable:!0,selected:!1,map_id:void 0,saving:!1,featureType:S,featureStyle:M});i(G),hE("md")&&n.value!==!0&&s.value!==!0&&r.value!==!0&&l.value!==!0&&u(!0)}function f(v){const w=v.getGeometry();let S;if(w)switch(w.getType()){case"Point":S=w.getFlatCoordinates();break;case"LineString":S=w.getFlatMidpoint();break;case"Polygon":S=w.getFlatInteriorPoint();break;case"Circle":S=w.getCenter();break}return S}return{addFeature:m,getFeatCoordinates:f}}function a0(a){const{addFeature:e}=EN(),t=new aE(a);t.setActive(!1);const i=vi().getOlMap();i.addInteraction(t),ba(t,"drawstart",r=>Sm.add(i,r)),ba(t,"drawend",r=>{n(r)}),ba(document,"keyup",r=>{s(r)});function n(r){Sm.remove(),e(r.feature),r.stopPropagation()}function s(r){r.key==="Escape"&&(Sm.remove(),t.finishDrawing(),t.setActive(!1))}return{drawInteraction:t}}function L2e(){const{t:a}=wt(),{addNotification:e}=Ls(),{drawStateActive:t}=Tt(wo());Ut(t,i);function i(n){let s;switch(n){case"drawPoint":s=a("Click to draw the point");break;case"drawLine":s=a("Click to start drawing line<br>Double-click to finish");break;case"drawPolygon":s=a("Click to start drawing polygon<br>Double-click or click last point to finish");break;case"drawCircle":s=a("Click to start drawing circle");break;case"drawLabel":s=a("Click to place the label");break}s&&e(s)}return{}}const dk=0,J0=1,hk=[0,0,0,0],nf=[],AA={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class TA extends Il{constructor(e,t,i){super(e),this.features=t,this.mapBrowserEvent=i}}class R2e extends $m{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:r7,this.defaultDeleteCondition_=function(i){return BX(i)&&a7(i)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Px,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new UT,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new eo({source:new Qo({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:W2e(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new Pl(this.source_.getFeatures()),this.source_.addEventListener(Fo.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(Fo.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Xs.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Xs.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const n=this.SEGMENT_WRITERS_[t.getType()];n&&n(e,t)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(i.getCoordinateFromPixel(this.lastPixel_)),e.addEventListener(za.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Pl;const i=this.featuresBeingModified_.getArray();for(let n=0,s=t.length;n<s;++n){const r=t[n].feature;r&&!i.includes(r)&&this.featuresBeingModified_.push(r)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new TA(AA.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(za.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,i=[];t.forEach(function(n){e===n.feature&&i.push(n)});for(let n=i.length-1;n>=0;--n){const s=i[n];for(let r=this.dragSegments_.length-1;r>=0;--r)this.dragSegments_[r][0]===s&&this.dragSegments_.splice(r,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const i=t.getCoordinates(),n={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),n)}writeMultiPointGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n],l={feature:e,geometry:t,depth:[n],index:n,segment:[r,r]};this.rBush_.insert(t.getExtent(),l)}}writeLineStringGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length-1;n<s;++n){const r=i.slice(n,n+2),l={feature:e,geometry:t,index:n,segment:r};this.rBush_.insert(Ss(r),l)}}writeMultiLineStringGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n];for(let l=0,u=r.length-1;l<u;++l){const d=r.slice(l,l+2),m={feature:e,geometry:t,depth:[n],index:l,segment:d};this.rBush_.insert(Ss(d),m)}}}writePolygonGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n];for(let l=0,u=r.length-1;l<u;++l){const d=r.slice(l,l+2),m={feature:e,geometry:t,depth:[n],index:l,segment:d};this.rBush_.insert(Ss(d),m)}}}writeMultiPolygonGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n];for(let l=0,u=r.length;l<u;++l){const d=r[l];for(let m=0,f=d.length-1;m<f;++m){const v=d.slice(m,m+2),w={feature:e,geometry:t,depth:[l,n],index:m,segment:v};this.rBush_.insert(Ss(v),w)}}}}writeCircleGeometry_(e,t){const i=t.getCenter(),n={feature:e,geometry:t,index:dk,segment:[i,i]},s={feature:e,geometry:t,index:J0,segment:[i,i]},r=[n,s];n.featureSegments=r,s.featureSegments=r,this.rBush_.insert(W0(i),n);let l=t;this.rBush_.insert(l.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const i=t.getGeometriesArray();for(let n=0;n<i.length;++n){const s=i[n],r=this.SEGMENT_WRITERS_[s.getType()];r(e,s)}}createOrUpdateVertexFeature_(e,t,i,n){let s=this.vertexFeature_;return s?s.getGeometry().setCoordinates(e):(s=new kn(new Qn(e)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s)),s.set("features",t),s.set("geometries",i),s.set("existing",n),s}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==Pi.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=Pi.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==Pi.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}findInsertVerticesAndUpdateDragSegments_(e){this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const t=this.vertexFeature_;if(!t)return;this.getMap().getView().getProjection();const i=[],n=t.getGeometry().getCoordinates(),s=Ss([n]),r=this.rBush_.getInExtent(s),l={};r.sort(k2e);for(let u=0,d=r.length;u<d;++u){const m=r[u],f=m.segment;let v=Ia(m.geometry);const w=m.depth;if(w&&(v+="-"+w.join("-")),l[v]||(l[v]=new Array(2)),m.geometry.getType()==="Circle"&&m.index===J0){const S=mk(e,m);ho(S,n)&&!l[v][0]&&(this.dragSegments_.push([m,0]),l[v][0]=m);continue}if(ho(f[0],n)&&!l[v][0]){this.dragSegments_.push([m,0]),l[v][0]=m;continue}if(ho(f[1],n)&&!l[v][1]){if(l[v][0]&&l[v][0].index===0){let S=m.geometry.getCoordinates();switch(m.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":S=S[w[1]];case"Polygon":if(m.index!==S[w[0]].length-2)continue;break}}this.dragSegments_.push([m,1]),l[v][1]=m;continue}Ia(f)in this.vertexSegments_&&!l[v][0]&&!l[v][1]&&i.push(m)}return i}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([s])=>s));const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],i=[],n=[];for(let s=0,r=this.dragSegments_.length;s<r;++s){const l=this.dragSegments_[s],u=l[0],d=u.feature;i.includes(d)||i.push(d);const m=u.geometry;n.includes(m)||n.push(m);const f=u.depth;let v;const w=u.segment,S=l[1];for(;t.length<m.getStride();)t.push(w[S][t.length]);switch(m.getType()){case"Point":v=t,w[0]=t,w[1]=t;break;case"MultiPoint":v=m.getCoordinates(),v[u.index]=t,w[0]=t,w[1]=t;break;case"LineString":v=m.getCoordinates(),v[u.index+S]=t,w[S]=t;break;case"MultiLineString":v=m.getCoordinates(),v[f[0]][u.index+S]=t,w[S]=t;break;case"Polygon":v=m.getCoordinates(),v[f[0]][u.index+S]=t,w[S]=t;break;case"MultiPolygon":v=m.getCoordinates(),v[f[1]][f[0]][u.index+S]=t,w[S]=t;break;case"Circle":const T=m;if(w[0]=t,w[1]=t,u.index===dk)this.changingFeature_=!0,T.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let M=Cx(lr(T.getCenter()),lr(t));T.setRadius(M),this.changingFeature_=!1}break}v&&this.setGeometryCoordinates_(m,v)}this.createOrUpdateVertexFeature_(t,i,n,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate,i=this.findInsertVerticesAndUpdateDragSegments_(t);if(i!=null&&i.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,i),this.vertexFeature_)){const n=this.vertexFeature_.getGeometry().getCoordinates();for(let s=i.length-1;s>=0;--s)this.insertVertex_(i[s],n);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const i=this.dragSegments_[t][0],n=i.geometry;if(n.getType()==="Circle"){const s=n,r=s.getCenter(),l=i.featureSegments[0],u=i.featureSegments[1];l.segment[0]=r,l.segment[1]=r,u.segment[0]=r,u.segment[1]=r,this.rBush_.update(W0(r),l);let d=s;this.rBush_.update(d.getExtent(),u)}else this.rBush_.update(Ss(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new TA(AA.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.coordinate)}handlePointerAtPixel_(e){const t=this.getMap(),i=t.getPixelFromCoordinate(e);t.getView().getProjection();const n=function(l,u){return _k(e,l)-_k(e,u)};let s,r;if(this.hitDetection_){const l=typeof this.hitDetection_=="object"?u=>u===this.hitDetection_:void 0;t.forEachFeatureAtPixel(i,(u,d,m)=>{m&&m.getType()==="Point"&&(m=new Qn(Gm(m.getCoordinates())));const f=m||u.getGeometry();if(f&&f.getType()==="Point"&&u instanceof kn&&this.features_.getArray().includes(u)){r=f;const v=u.getGeometry().getFlatCoordinates().slice(0,2);s=[{feature:u,geometry:r,segment:[v,v]}]}return!0},{layerFilter:l})}if(!s){const l=Ol(W0(e,hk)),u=t.getView().getResolution()*this.pixelTolerance_,d=hI(Kh(l,u,hk));s=this.rBush_.getInExtent(d)}if(s&&s.length>0){const l=s.sort(n)[0],u=l.segment;let d=mk(e,l);const m=t.getPixelFromCoordinate(d);let f=Cx(i,m);if(r||f<=this.pixelTolerance_){const v={};if(v[Ia(u)]=!0,this.snapToPointer_||(this.delta_[0]=d[0]-e[0],this.delta_[1]=d[1]-e[1]),l.geometry.getType()==="Circle"&&l.index===J0)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(d,[l.feature],[l.geometry],this.snappedToVertex_);else{const w=t.getPixelFromCoordinate(u[0]),S=t.getPixelFromCoordinate(u[1]),T=lf(m,w),M=lf(m,S);if(f=Math.sqrt(Math.min(T,M)),this.snappedToVertex_=f<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(d=T>M?u[1]:u[0]),this.createOrUpdateVertexFeature_(d,[l.feature],[l.geometry],this.snappedToVertex_);const G={};G[Ia(l.geometry)]=!0;for(let P=1,F=s.length;P<F;++P){const N=s[P].segment;if(ho(u[0],N[0])&&ho(u[1],N[1])||ho(u[0],N[1])&&ho(u[1],N[0])){const V=Ia(s[P].geometry);V in G||(G[V]=!0,v[Ia(N)]=!0)}else break}}this.vertexSegments_=v;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const i=e.segment,n=e.feature,s=e.geometry,r=e.depth,l=e.index;let u;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":u=s.getCoordinates(),u[r[0]].splice(l+1,0,t);break;case"Polygon":u=s.getCoordinates(),u[r[0]].splice(l+1,0,t);break;case"MultiPolygon":u=s.getCoordinates(),u[r[1]][r[0]].splice(l+1,0,t);break;case"LineString":u=s.getCoordinates(),u.splice(l+1,0,t);break;default:return!1}this.setGeometryCoordinates_(s,u);const d=this.rBush_;d.remove(e),this.updateSegmentIndices_(s,l,r,1);const m={segment:[i[0],t],feature:n,geometry:s,depth:r,index:l};d.insert(Ss(m.segment),m),this.dragSegments_.push([m,1]);const f={segment:[t,i[1]],feature:n,geometry:s,depth:r,index:l+1};return d.insert(Ss(f.segment),f),this.dragSegments_.push([f,0]),!0}updatePointer_(e){var t;return e&&this.findInsertVerticesAndUpdateDragSegments_(e),(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates()}getPoint(){var t;const e=(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates();return e?Gm(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(i=>i.getType()==="Circle"||i.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(Ss([e])).some(({segment:i})=>ho(i[0],e)||ho(i[1],e))}removePoint(e){if(e&&(e=lr(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=Pi.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map(([n])=>n));const i=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new TA(AA.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,i}return!1}removeVertex_(){const e=this.dragSegments_,t={};let i=!1,n,s,r,l,u,d,m,f,v,w,S;for(u=e.length-1;u>=0;--u)r=e[u],w=r[0],S=Ia(w.feature),w.depth&&(S+="-"+w.depth.join("-")),S in t||(t[S]={}),r[1]===0?(t[S].right=w,t[S].index=w.index):r[1]==1&&(t[S].left=w,t[S].index=w.index+1);for(S in t){switch(v=t[S].right,m=t[S].left,d=t[S].index,f=d-1,m!==void 0?w=m:w=v,f<0&&(f=0),l=w.geometry,s=l.getCoordinates(),n=s,i=!1,l.getType()){case"MultiLineString":s[w.depth[0]].length>2&&(s[w.depth[0]].splice(d,1),i=!0);break;case"LineString":s.length>2&&(s.splice(d,1),i=!0);break;case"MultiPolygon":n=n[w.depth[1]];case"Polygon":n=n[w.depth[0]],n.length>4&&(d==n.length-1&&(d=0),n.splice(d,1),i=!0,d===0&&(n.pop(),n.push(n[0]),f=n.length-1));break}if(i){this.setGeometryCoordinates_(l,s);const T=[];if(m!==void 0&&(this.rBush_.remove(m),T.push(m.segment[0])),v!==void 0&&(this.rBush_.remove(v),T.push(v.segment[1])),m!==void 0&&v!==void 0){const M={depth:w.depth,feature:w.feature,geometry:w.geometry,index:f,segment:T};this.rBush_.insert(Ss(M.segment),M)}this.updateSegmentIndices_(l,d,w.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(i=>i.getType()==="Circle"||i.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(Ss([e])).some(({segment:i})=>!(ho(i[0],e)||ho(i[1],e)))}insertPoint(e){var n;const t=e?lr(e,this.getMap().getView().getProjection()):(n=this.vertexFeature_)==null?void 0:n.getGeometry().getCoordinates();return t?this.findInsertVerticesAndUpdateDragSegments_(t).reduce((s,r)=>s||this.insertVertex_(r,t),!1):!1}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,i,n){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(i===void 0||s.depth===void 0||Zd(s.depth,i))&&s.index>t&&(s.index+=n)})}}function k2e(a,e){return a.index-e.index}function _k(a,e,t){const i=e.geometry;if(i.getType()==="Circle"){let s=i;if(e.index===J0){const r=lf(s.getCenter(),lr(a)),l=Math.sqrt(r)-s.getRadius();return l*l}}const n=lr(a);return nf[0]=lr(e.segment[0]),nf[1]=lr(e.segment[1]),OU(n,nf)}function mk(a,e,t){const i=e.geometry;if(i.getType()==="Circle"&&e.index===J0)return Gm(i.getClosestPoint(lr(a)));const n=lr(a);return nf[0]=lr(e.segment[0]),nf[1]=lr(e.segment[1]),Gm(bW(n,nf))}function W2e(){const a=x7();return function(e,t){return a.Point}}const G2e=R2e,O2e=1001,pk="featureEditLayer";function P2e(){const{editStateActive:a,editingFeatureId:e,drawnFeatures:t}=Tt(wo()),{updateDrawnFeature:i,setEditActiveState:n}=wo();let s;const r=vi().getOlMap(),l=new Qo({features:[]}),u=new eo({source:l,zIndex:O2e});u.set(Cw,pk),u.set("cyLayerType",pk),r.addLayer(u),Ut(a,m=>{m?d():r.removeInteraction(s)}),Ut(e,m=>{m||(n(void 0),t.value.forEach(v=>{v.editable&&(v.editable=!1,v.changed())})),l.clear();const f=t.value.find(v=>Ia(v)===m);if(f){const v=f.featureType.replace("drawn","edit");n(v),f.editable=!0,f.changed(),l.addFeature(f)}});function d(){s&&r.removeInteraction(s),s=new G2e({source:l,pixelTolerance:20,deleteCondition:function(m){return vI(m)&&a7(m)}}),r.addInteraction(s),ba(s,"modifyend",m=>{const f=m.features.getArray()[0];f.profileData=void 0,i(f)})}return{}}const B2e=1e3,N2e="featureLayer";function F2e(){const{drawStateActive:a,drawnFeatures:e}=Tt(wo());L2e(),P2e();const t={drawPoint:a0({type:"Point"}).drawInteraction,drawLabel:a0({type:"Point"}).drawInteraction,drawLine:a0({type:"LineString"}).drawInteraction,drawCircle:a0({type:"Circle"}).drawInteraction,drawPolygon:a0({type:"Polygon"}).drawInteraction};Ut(a,r=>{Object.keys(t).forEach(l=>{`${[l]}`==`${r}`?t[l].setActive(!0):t[l].setActive(!1)})});const i=new eo({source:new Qo({features:[]}),zIndex:B2e});i.set("cyLayerType",N2e),Ut(()=>e.value,r=>{s(r)});function n(r){r.addLayer(i)}function s(r){var l,u;(l=i.getSource())==null||l.clear(),(u=i.getSource())==null||u.addFeatures(r)}return{addDrawLayer:n}}function D2e(){const a=vi().getOlMap(),e=_i(),{drawStateActive:t,editStateActive:i,activeFeatureId:n,editingFeatureId:s,drawnFeatures:r}=Tt(wo()),{layersOpen:l,myMapsOpen:u}=Tt(e),{layers:d}=Tt(Zi());ba(a,"click",f=>m(f)),Ut(n,(f,v)=>{s.value!==f&&(s.value=void 0),r.value.filter(w=>Ia(w)===v).forEach(w=>{w.selected=!1,w.changed()}),r.value.filter(w=>Ia(w)===f).forEach(w=>{w.selected=!0,w.editable=!1,w.changed()})});const m=function(f){const v=f.pixel;if(t.value!==void 0||i.value!==void 0)return!0;if(n.value=void 0,a.forEachFeatureAtPixel(v,S=>{const T=r.value.includes(S);if(T&&(l.value||u.value)&&r.value.length>0||T&&d.value.length===0)return e.toggleMyMapsOpen(!0),n.value=Ia(S),!0},{hitTolerance:5}))return!1}}const V2e="featureInfoLayer",Z2e=17;class z2e{constructor(){zt(this,"map");zt(this,"featureLayer")}init(e){this.map=e,this.createFeatureLayer()}createFeatureLayer(){this.featureLayer=new eo({source:new Qo,zIndex:1e3});const e=new wn({color:[255,255,0,.6]}),t=new mn({color:[255,155,55,1],width:3}),i=new to({radius:10,fill:e,stroke:t});this.featureLayer.set("cyLayerType",V2e),this.featureLayer.setStyle(function(n){var d;const s=n.get("color")||"#ffcc33",r=n.get("width")||3,l=[new Vi({fill:new wn({color:[255,255,0,.6]})}),new Vi({stroke:new mn({color:"#ffffff",width:5})}),new Vi({stroke:new mn({color:s,width:r})})],u=(d=n.getGeometry())==null?void 0:d.getType();return u==="Point"||u==="MultiPoint"?[new Vi({image:i})]:l}),this.map.addLayer(this.featureLayer)}highlightFeatures(e,t,i){var n,s,r,l;if(e!=null){this.map.getLayers().getArray().indexOf(this.featureLayer)===-1&&this.map.addLayer(this.featureLayer);const u={dataProjection:Kl,featureProjection:this.map.getView().getProjection()},d=new Bd().readFeatures({type:"FeatureCollection",features:e},u);if(d.length>0){let m=((n=d[0].getGeometry())==null?void 0:n.getExtent())||[0,0,0,0];for(const f of d){const v=((s=f.getGeometry())==null?void 0:s.getExtent())||[0,0,0,0];m=c1(m,v),f.getId()==null&&f.setId(void 0),((r=f.getGeometry())==null?void 0:r.getType())==="GeometryCollection"?f.getGeometry().getGeometriesArray().forEach(S=>{var M;const T=f.clone();T.setGeometry(S),(M=this.featureLayer.getSource())==null||M.addFeature(T)}):(l=this.featureLayer.getSource())==null||l.addFeature(f)}if(t&&m){const f={size:this.map.getSize(),maxZoom:i||Z2e};this.map.getView().fit(m,f)}}}}clearFeatures(){var e;(e=this.featureLayer.getSource())==null||e.clear()}}const A2=new z2e,U2e="https://migration.geoportail.lu/getfeatureinfo";async function gk(a){const e=await u_(U2e,a,"GET");if(!e.ok)throw new Error("Error while trying to get profile");return await e.json()}function H2e(){const a=vi().getOlMap(),{setFeatureInfoPanelContent:e,setLoading:t,setDisplayStarOnMobile:i}=Zm(),{fid:n,isLoading:s}=Tt(Zm()),{toggleInfoOpen:r}=_i(),{layersOpen:l,myMapsOpen:u}=Tt(_i()),{findById:d}=zl(),{drawStateActive:m,editStateActive:f,drawnFeatures:v}=Tt(wo()),{locationInfoCoords:w,isStreetviewActive:S}=Tt(Hm()),{maxZoom:T}=Tt(Zi()),M=Fe([]),G=Fe([]),P=Fe([]),F=Fe([]),N=Fe(null);function V(){A2.init(a),ba(a,"pointerdown",Se=>{P.value=Se.pixel}),ba(a,"pointerup",JO(Se=>K(Se),499)),ba(a,"pointermove",Se=>{te(Se)}),dr(()=>{n.value&&(async()=>await J(n.value))()})}function K(Se){(async()=>(F.value=Se.pixel,!(Se.originalEvent.button===2||S.value&&w.value||m.value||f.value||s.value)&&(N.value=window.setTimeout(()=>{let ce=!1;if((l.value||u.value)&&v.value.length>0&&(ce=_e(Se.pixel)),!ce&&P.value&&F.value){const Ie=Math.abs(P.value[0]-F.value[0]),he=Math.abs(P.value[1]-F.value[1]);Ie+he<6&&(ne(Se),P.value=null,F.value=null)}},500))))()}async function te(Se){if(Se.dragging||s.value)return;const ce=await Promise.all(a.getLayers().getArray().filter(Ie=>Ie instanceof Z0).map(async Ie=>{const he=Ie.getData(Se.pixel);if(Ie.getVisible()&&Ie.getOpacity()>0&&!(he!=null&&he.every(we=>we===0))){const we=Ie.get(Sw);return we&&we.is_queryable}return!1})).then(Ie=>Ie.some(Boolean));a.getViewport().style.cursor=ce?"pointer":""}async function J(Se){const ce=Se.split(",");for(const Ie of ce){const he=Ie.split("_")[0],we=[he],Oe={};try{if(we.length>0){t(!0),a.getViewport().style.cursor="wait";const Ye=await gk({fid:Ie});let at=!1;hE("sm")?(at=!0,i(!1)):i(!0);const yt=d(he);yt&&(Oe[he]=yt.layers),Ye.length>0&&se(!0,Ye,Oe,at,!0)}}catch{de()}}}async function ne(Se){const ce=a.getLayers().getArray(),Ie=[],he={};for(let we=ce.length-1;we>=0;we--){const Oe=ce[we].get(Sw);if(Oe!=null&&Oe.is_queryable&&ce[we].getVisible()&&ce[we].getOpacity()>0){const Ye=ce[we].get("queryable_id");Ie.push(Ye),he[Ye]=ce[we].get("label")}}if(Ie.length>0){const we=a.getView().getResolution();let Oe=0,Ye=0;we&&(Oe=20*we,Ye=1*we);const at=kr(Se.coordinate,a.getView().getProjection(),Kl),yt=[[at[0]-Oe,at[1]+Oe],[at[0]+Oe,at[1]-Oe]],De=[[at[0]-Ye,at[1]+Ye],[at[0]+Ye,at[1]-Ye]];t(!0),a.getViewport().style.cursor="wait";const jt=a.getSize()||[0,0],$t=a.getView().calculateExtent(jt).join(","),Ua={layers:Ie.join(),box1:yt.join(),box2:De.join(),srs:Im,zoom:a.getView().getZoom(),BBOX:$t,WIDTH:jt[0],HEIGHT:jt[1],X:Se.pixel[0],Y:Se.pixel[1]};try{const bt=await gk(Ua);bt.length>0?se(Se.originalEvent.shiftKey,bt,he,!0,!1):(G.value=[],A2.highlightFeatures(G.value,!1,T.value),de())}catch{de()}}}function se(Se,ce,Ie,he,we){Se?ce.forEach(at=>{at.layerLabel=Ie[at.layer];let yt=!1;for(let De=0;De<M.value.length;De++)if(M.value[De].layer===at.layer){yt=!0;let jt=!1;for(let pa=0;pa<at.features.length;pa++){for(let $t=0;$t<M.value[De].features.length;$t++)if(M.value[De].features[$t].fid==at.features[pa].fid){jt=!0,M.value[De].features.splice($t,1);break}jt||(M.value[De].features=M.value[De].features.concat(at.features[pa]))}break}yt||M.value.push(at)}):(M.value=ce,M.value.forEach(at=>{at.layerLabel=Ie[at.layer]}));const Oe=M.value.filter(at=>"features"in at&&at.features.length>0),Ye=M.value.length>0?he:!1;de(Ye),G.value=[];for(let at=0;at<M.value.length;at++)G.value.push(...M.value[at].features);A2.highlightFeatures(G.value,we,T.value),e(Oe)}function de(Se=!1){r(Se),t(!1),a.getViewport().style.cursor="",A2.clearFeatures()}function _e(Se){const ce=[];return a.forEachFeatureAtPixel(Se,Ie=>v.value.indexOf(Ie)!==-1?(ce.push(Ie),!1):!0,{hitTolerance:5}),ce.length>0}return{init:V}}const fk=$e({__name:"map-container",props:{v4_standalone:{type:Boolean,default:!1}},setup(a){const e=_i(),{embedded:t}=Tt(e),i=vi(),n=Fe(null),s=i.createMap(),r=a;s.getInteractions().forEach(d=>{d instanceof dT&&s.removeInteraction(d)});const l=new dT({condition:VX});s.addInteraction(l),r.v4_standalone&&(F2e().addDrawLayer(s),D2e(),H2e().init(),cd.init(s));const u=[425152.9429259216,632446599999133e-8,914349.9239510496,6507914867875754e-9];return In(()=>{n.value&&(new Dbe(s),new Vbe(s),Ube.bootstrap(),vve.bootstrap(),wve.bootstrap(),s.setTarget(n.value),window.olMap=s)}),dr(()=>{n.value&&t.value&&setTimeout(()=>{i.resize()},1e3)}),Jw("olMap",s),(d,m)=>(U(),$("div",{id:"map-container","data-cy":"mapContainer",ref_key:"mapContainer",ref:n,class:"h-full w-full bg-white relative"},[lt(I2e),lt(E2e,{extent:u}),k(t)?Ae("",!0):(U(),$(Ot,{key:0},[lt(w2e),lt(Cve),d.v4_standalone?(U(),Gt(f2e,{key:0})):Ae("",!0),lt(Tve),lt(m2e),lt(C2e)],64))],512))}});function X2e(a,e){var t,i;return a.children&&!e.children||((t=e.children)==null?void 0:t.length)===0?1:e.children&&!a.children||((i=a.children)==null?void 0:i.length)===0?-1:0}function MN(a,e,t=0){const{name:i="",type:n=fc.WMS,children:s}=a,r=`${n}||${e}||${i}`.split("-").join("%2D"),l=Zi();return{id:r,name:i,depth:t,children:s==null?void 0:s.sort(X2e).map(u=>MN(u,e,t+1)),checked:l.hasLayer(r),expanded:!1}}function q2e(a){const e=decodeURIComponent(a),[t,i,n]=e.split("||");return LN({id:e,url:M1.getProxyfiedUrl(i),remoteLayer:{name:n,type:t}})}function LN({id:a,url:e,remoteLayer:t}){const{name:i="",type:n=fc.WMS}=t;return{id:a,name:i,layers:i,url:e,type:n,imageType:rG.PNG}}const Y2e={class:"relative text-center","data-cy":"remoteLayerModalContent"},K2e=["placeholder","value"],j2e={key:0,class:"text-center"},$2e={class:"lux-label"},J2e={key:1,class:"text-center"},Q2e={class:"lux-label"},exe={key:2,class:"text-center"},txe={key:3,class:"overflow-auto max-h-[calc(400px-36px)]"},axe=$e({__name:"remote-layers",setup(a){const{t:e}=wt(),t=Zi(),i=vo(),n=Di([]),s=Di(),{remoteLayersOpen:r}=Tt(_i()),{setRemoteLayersOpen:l}=_i();let u=!1,d,m,f;dr(v);function v(){s.value=s.value?tf.updateLayers(s.value,t.layers):void 0}L1.fetchRemoteWmsEndpoint().then(N=>{n.value=N.map(({url:V,label:K})=>({label:K,value:V}))});async function w(N){u=!0,f=await L1.getRemoteEndpoint(N).catch(()=>alert(e("Impossible de contacter ce WMS",{ns:"client"}))),m=N,u=!1}async function S(){const N=f,V=N==null?void 0:N.getLayers();if(V&&V[0]){const K=MN(V[0],m);s.value=tf.updateLayers(K,t.layers)}}async function T(N){m=d=N,await w(m),S()}function M(N){d=N.target.value}async function G(){await w(d),S()}function P(N){s.value=tf.toggleNode(N.id,s.value,"expanded")}function F(N){const{id:V,name:K}=N,te=f;if(N.checked===!0)t.removeLayers(V);else{const J=te==null?void 0:te.getLayerByName(K);if(J){const ne=i.initLayer(LN({id:V,url:M1.getProxyfiedUrl(m),remoteLayer:J}));t.addLayers(ne)}}}return(N,V)=>k(r)?(U(),Gt(rE,{key:0,title:k(e)("Add external data",{ns:"client"}),onClose:V[0]||(V[0]=K=>k(l)(!1))},{content:Ht(()=>{var K,te;return[W("div",Y2e,[lt(qx,{class:"lux-remote-services-dropdown",options:n.value,placeholder:k(e)("Predefined wms",{ns:"client"}),onChange:T},null,8,["options","placeholder"]),W("input",{class:"lux-input w-[300px]",type:"url",placeholder:k(e)("Choose or write a WMS url",{ns:"client"}),value:k(m)||"",onChange:M},null,40,K2e),W("button",{type:"button",class:"lux-btn",onClick:G},q(k(e)("Get the layers",{ns:"client"})),1)]),!k(u)&&k(f)?(U(),$("div",j2e,[W("span",$2e,q(k(e)("Description du service :",{ns:"client"})),1),Jt(" "+q((K=k(f).getServiceInfo())==null?void 0:K.abstract),1)])):Ae("",!0),!k(u)&&k(f)?(U(),$("div",J2e,[W("span",Q2e,q(k(e)("Access constraints :",{ns:"client"})),1),Jt(" "+q((te=k(f).getServiceInfo())==null?void 0:te.constraints),1)])):Ae("",!0),k(u)?(U(),$("div",exe,[V[1]||(V[1]=W("div",{class:"fa fa-refresh fa-spin"},null,-1)),W("span",null,q(k(e)("Chargement des informations",{ns:"client"})),1)])):Ae("",!0),k(u)?Ae("",!0):(U(),$("div",txe,[s.value?(U(),Gt(f4,{key:0,class:"block p-[10px] mb-[11px]",node:s.value,onToggleParent:P,onToggleLayer:F},null,8,["node"])):Ae("",!0)]))]}),_:1},8,["title"])):Ae("",!0)}});class ixe{bootstrap(){let e;e=dr(()=>{this.restore(),this.persist(),e&&e()})}persist(){const e=Fw();Ut([()=>e.sliderActive,()=>e.sliderRatio],([t,i],[n])=>{t!==n&&Ma.setValue(DT,t),Ma.setValue(VT,i)})}restore(){const e=Ma.getValue(DT,g3),t=Ma.getValue(VT,mm),{toggleSlider:i,setRatio:n}=Fw();typeof e<"u"&&e!==null&&(i(e),typeof t!==void 0&&t!==null&&n(t??wN))}}const nxe=new ixe,rxe=["onKeydown"],sxe={key:0,"data-cy":"sliderLayerLabel",class:"lux-slider-layer-label"},yk=30,oxe=$e({__name:"splitter-element",props:{sliderActive:{type:Boolean},sliderRatio:{},sliderTopLayer:{},sliderOffset:{},containerOffset:{}},emits:["moveSplitBar","escSplitBar"],setup(a,{expose:e,emit:t}){const i=a,n=t,{t:s}=wt(),r=Fe(null),l=St(()=>({left:`${i.sliderOffset}px`}));let u=!1;e({sliderElement:r});function d(M){n("moveSplitBar",M+r.value.offsetWidth/2)}function m(){u=!0,document.addEventListener("mousemove",f),document.addEventListener("mouseup",v)}function f(M){u&&d(M.clientX)}function v(){u=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",v)}function w(){const M=i.containerOffset+r.value.offsetLeft;d(M+yk)}function S(){const M=i.containerOffset+r.value.offsetLeft;d(M-yk)}function T(){n("escSplitBar")}return In(()=>{var M;(M=r.value)==null||M.focus({focusVisible:!0})}),es(()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",v)}),(M,G)=>(U(),$("button",{ref_key:"sliderElement",ref:r,onMousedown:m,onMousemove:f,onMouseup:v,onKeydown:[Uo(Jr(w,["stop"]),["space"]),Uo(Jr(w,["stop"]),["right"]),Uo(Jr(S,["stop"]),["left"]),Uo(Jr(S,["stop"]),["delete"]),Uo(Jr(T,["stop"]),["esc"])],class:"left-[20px] absolute h-full w-[32px] block",style:Tc(l.value),role:"seperator","aria-controls":"map-container","data-cy":"sliderElement"},[G[1]||(G[1]=W("span",{class:"lux-slider-line"},null,-1)),G[2]||(G[2]=W("span",{class:"lux-slider-arrows"},[W("span"),W("span")],-1)),M.sliderTopLayer?(U(),$("span",sxe,[G[0]||(G[0]=W("i",{class:"fa fa-arrow-left mr-2"},null,-1)),W("span",null,q(k(s)(M.sliderTopLayer.name)),1)])):Ae("",!0)],44,rxe))}}),lxe=$e({__name:"slider-comparator",setup(a){const e=Fw(),t=H3(),i=vi().olMap,n=Fe(null),{sliderActive:s,sliderRatio:r,sliderTopLayer:l}=Tt(e),u=St(()=>{var N,V;return((V=(N=n.value)==null?void 0:N.sliderElement)==null?void 0:V.offsetWidth)||0}),d=Fe([0,0]),m=function(){var V,K,te;let N=(te=(K=(V=i.value)==null?void 0:V.getViewport())==null?void 0:K.parentElement)==null?void 0:te.offsetLeft;return(N===void 0||N===0)&&(N=T==null?void 0:T.offsetLeft),N!==void 0?N:0},f=St(()=>{var N,V;return i.value&&n.value?r.value*d.value[0]-((V=(N=n.value)==null?void 0:N.sliderElement)==null?void 0:V.offsetWidth)/2:0});let v,w,S,T;nxe.bootstrap(),Ut([l,s],([N,V],[K])=>{var te;N&&V?(N!==K&&G(),M()):G(),(te=i.value)==null||te.render()}),Ut(f,()=>{var N;(N=i.value)==null||N.render()});function M(){var V;const N=t.getLayerFromCache(l.value);d.value=(V=i.value)==null?void 0:V.getSize(),N&&(v=N.on(Ko.PRERENDER,function(K){const te=K.context,J=f.value+u.value/2,ne=_2(K,[0,0]),se=_2(K,[J,0]),de=_2(K,[0,d.value[1]]),_e=_2(K,[J,d.value[1]]);te.save(),te.beginPath(),te.moveTo(ne[0],ne[1]),te.lineTo(de[0],de[1]),te.lineTo(_e[0],_e[1]),te.lineTo(se[0],se[1]),te.closePath(),te.clip()}),w=N.on(Ko.POSTRENDER,function(K){K.context.restore()}),S=i==null?void 0:i.value.on("change:size",()=>{var K;d.value=(K=i.value)==null?void 0:K.getSize()}))}function G(){wm([v,w,S])}function P(N){var te;const V=(te=i.value)==null?void 0:te.getSize(),K=(N-m())/V[0];e.setRatio(K)}function F(){e.toggleSlider()}return In(()=>{var N,V;T=(V=(N=i.value)==null?void 0:N.getTargetElement())==null?void 0:V.closest(".map-wrapper")}),es(()=>{G()}),(N,V)=>k(l)&&k(s)?(U(),Gt(oxe,{key:0,ref_key:"splitterElement",ref:n,sliderActive:k(s),sliderRatio:k(r),sliderTopLayer:k(l),sliderOffset:f.value,containerOffset:m(),onMoveSplitBar:P,onEscSplitBar:F},null,8,["sliderActive","sliderRatio","sliderTopLayer","sliderOffset","containerOffset"])):Ae("",!0)}}),uxe=$e({__name:"simple-style-item",props:{styleName:{},colors:{}},setup(a){const e=a;return(t,i)=>(U(!0),$(Ot,null,xi(e.colors,(n,s)=>(U(),$("span",{key:`${t.styleName}-${s}`,class:"grow m-px",style:Tc(`background-color: ${n}`)},"  ",4))),128))}}),cxe={class:"text-white border-2 p-[10px] m-[10px]"},dxe={class:"text-center mb-3"},hxe=["title"],_xe={class:"text-white"},mxe=["title","onClick"],pxe={class:"flex"},gxe=$e({__name:"simple-style-selector",setup(a){const{t:e}=wt(),t=vu(),i=d_(),{bgStyle:n}=Tt(t),s=Ld().simple_styles.road,r=Fe(s);Ut(n,u=>r.value=i.checkSelection(u||[],s),{immediate:!0});function l(u){t.setSimpleStyle(u)}return(u,d)=>(U(),$("div",cxe,[W("h5",dxe,q(k(e)("Slectionner un set de couleurs",{ns:"client"})),1),(U(!0),$(Ot,null,xi(r.value,m=>(U(),$("div",{key:m.unlocalized_label,title:k(e)(m.unlocalized_label,{ns:"client"}),class:Pa(`${m.selected?"border-dotted":"border-hidden"} border-2 p-px`)},[W("span",_xe,q(k(e)(m.unlocalized_label,{ns:"client"}))+" : ",1),W("button",{title:k(e)("Select style: {{styleName}}",{ns:"app",styleName:k(e)(m.unlocalized_label)}),onClick:f=>l(m),class:"w-full"},[W("span",pxe,[lt(uxe,{colors:m.colors,"style-name":m.unlocalized_label},null,8,["colors","style-name"])])],8,mxe)],10,hxe))),128))]))}});function fxe(a){const e=yxe(a);return!e||!e.medium_style_class?[]:Ld().medium_default_styles[e.medium_style_class]}function yxe(a){return Ld().bg_layers.find(e=>e.id==(a==null?void 0:a.id))}const bxe={class:"flex w-full items-center"},vxe={for:"colorId",class:"w-40 m-0 font-medium"},xxe={class:"grow"},wxe=["value"],Ixe=["checked","aria-label"],Cxe=$e({__name:"medium-style-item",props:{style:{},colorEditable:{type:Boolean}},emits:["changeStyle"],setup(a,{emit:e}){const{t}=wt(),i=a,n=e;function s(l){if(l.target){const u={...i.style,color:l.target.value};n("changeStyle",u)}}function r(l){if(l){const u={...i.style,visible:l.target.checked};n("changeStyle",u)}}return(l,u)=>(U(),$("div",bxe,[W("label",vxe,q(k(t)(l.style.label)),1),W("div",xxe,[l.colorEditable&&i.style.color?(U(),$("input",{key:0,id:"colorId",type:"color",class:"w-11 h-5 py-[1px] px-[2px]",value:i.style.color,onInput:s},null,40,wxe)):Ae("",!0)]),W("input",{type:"checkbox",class:"flex-none mr-3",checked:i.style.visible,onChange:r,"aria-label":k(t)("Show or hide {{thematicName}}",{ns:"app",thematicName:i.style.label})},null,40,Ixe)]))}}),Sxe={class:"text-white border-2 p-[10px] m-[10px]"},Axe={class:"text-center mb-3"},Txe=$e({__name:"medium-style-selector",props:{layer:{}},setup(a){const e=["basemap_2015_global"],t=vu(),{bgStyle:i}=Tt(t),{t:n}=wt(),s=a,r=St(()=>e.includes(s.layer.name)),l=St(()=>i.value||fxe(s.layer));function u(d,m){i.value=l.value.map((f,v)=>v===d?m:f),t.disableExpertStyle()}return(d,m)=>(U(),$("div",Sxe,[W("h5",Axe,q(r.value?k(n)("Slectionner une couleur par couche"):k(n)("Afficher une catgorie par couche")),1),(U(!0),$(Ot,null,xi(l.value,(f,v)=>(U(),Gt(Cxe,{key:f.label,style:Tc(f),onChangeStyle:w=>u(v,w),colorEditable:r.value},null,8,["style","onChangeStyle","colorEditable"]))),128))]))}});var RN={exports:{}};(function(a,e){(function(t,i){i()})(yg,function(){function t(d,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function i(d,m,f){var v=new XMLHttpRequest;v.open("GET",d),v.responseType="blob",v.onload=function(){u(v.response,m,f)},v.onerror=function(){console.error("could not download file")},v.send()}function n(d){var m=new XMLHttpRequest;m.open("HEAD",d,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function s(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(m)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof yg=="object"&&yg.global===yg?yg:void 0,l=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(d,m,f){var v=r.URL||r.webkitURL,w=document.createElement("a");m=m||d.name||"download",w.download=m,w.rel="noopener",typeof d=="string"?(w.href=d,w.origin===location.origin?s(w):n(w.href)?i(d,m,f):s(w,w.target="_blank")):(w.href=v.createObjectURL(d),setTimeout(function(){v.revokeObjectURL(w.href)},4e4),setTimeout(function(){s(w)},0))}:"msSaveOrOpenBlob"in navigator?function(d,m,f){if(m=m||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(t(d,f),m);else if(n(d))i(d,m,f);else{var v=document.createElement("a");v.href=d,v.target="_blank",setTimeout(function(){s(v)})}}:function(d,m,f,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof d=="string")return i(d,m,f);var w=d.type==="application/octet-stream",S=/constructor/i.test(r.HTMLElement)||r.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||w&&S||l)&&typeof FileReader<"u"){var M=new FileReader;M.onloadend=function(){var F=M.result;F=T?F:F.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=F:location=F,v=null},M.readAsDataURL(d)}else{var G=r.URL||r.webkitURL,P=G.createObjectURL(d);v?v.location=P:location.href=P,v=null,setTimeout(function(){G.revokeObjectURL(P)},4e4)}});r.saveAs=u.saveAs=u,a.exports=u})})(RN);var kN=RN.exports;const Exe={class:"text-white border-2 p-[10px] m-[10px] flex flex-col overflow-hidden"},Mxe={class:"text-center mb-3"},Lxe={class:"flex flex-row justify-center"},Rxe={class:"absolute top-[70px] w-full text-center text-base leading-3 font-medium text-white"},kxe={class:"text-white border-2 relative h-[100px] w-[85px] mx-[10px] my-0 mb-[15px] text-sm hover:bg-secondary"},Wxe={class:"'block z-[5] w-full h-full cursor-pointer after:absolute after:pt-[15px] after:px-[15px] after:w-full after:text-center after:content-upload",for:"uploadMvtStyle"},Gxe={class:"absolute top-[70px] w-full text-center text-base leading-3 font-medium"},Oxe=["href"],Pxe=$e({__name:"expert-style-selector",setup(a){const e=Zi(),t=vu(),i=d_(),{appliedStyle:n}=Tt(t),{t:s}=wt();function r(){const d=n.value,m=JSON.stringify(d),f=new Blob([m],{type:"text/plain;charset=utf-8"}),v="styles.json";kN.saveAs(f,v)}function l(d){const m=d.target.files;if((m==null?void 0:m.length)!==1)return;const f=m[0];f.type==="application/json"&&(f.text().then(v=>{t.enableExpertStyle(),n.value=JSON.parse(v)}),d.target.value="")}function u(){return t.styleSerial===null?i.getDefaultMapBoxStyleUrl(i.getVectorId(e.bgLayer)):`${x0.mvtStylesGetUrl}?id=${t.styleSerial}`}return(d,m)=>(U(),$("div",Exe,[W("h5",Mxe,q(k(s)("Lancer diteur externe ou importer json")),1),W("div",Lxe,[W("a",{href:"#",class:"text-white border-2 relative h-[100px] w-[85px] mx-[10px] my-0 mb-[15px] z-5 text-sm after:absolute after:left-[20px] after:top-[10px] after:z-4 after:w-[3.6em] after:text-center after:content-download hover:bg-secondary",onClick:m[0]||(m[0]=f=>r())},[W("span",Rxe,q(k(s)("Download style")),1)]),W("div",kxe,[W("label",Wxe,[W("span",Gxe,q(k(s)("Upload style")),1)]),W("input",{class:"invisible",type:"file",name:"uploadMvtStyle",id:"uploadMvtStyle",onChange:l},null,32)])]),W("a",{href:`https://maputnik.github.io/editor/?style=${u()}`,target:"_blank",class:"lux-btn text-center"},q(k(s)("Open Maputnik editor")),9,Oxe)]))}}),Bxe={key:0,class:"lux","data-cy":"styleSelector"},Nxe={key:0,class:"mb-px"},Fxe={key:1,class:"mb-px"},Dxe={key:2,class:"mb-px"},Vxe=$e({__name:"style-selector",setup(a){const{t:e}=wt(),t=Zi(),i=_i(),n=vu(),{bgStyle:s,isExpertStyleActive:r}=Tt(n),{bgLayer:l}=Tt(t),{styleEditorOpenedSection:u}=Tt(i),d=d_(),m=St(()=>d.getStyleCapabilitiesFromLayer(l.value)),f=St(()=>m.value.styleEditors);Ut(l,T=>{d.isLayerStyleEditable(T)?v():i.closeStyleEditorPanel()}),In(()=>{v()});function v(){(!u.value||!f.value.includes(u.value))&&(u.value=f.value[0])}function w(){n.setStyle(null)}function S(T){u.value=u.value===T?void 0:T}return(T,M)=>m.value.isEditable?(U(),$("div",Bxe,[f.value.includes(k(ml).simpleStyle)?(U(),$("div",Nxe,[lt(ax,{title:k(e)("Simple"),expanded:k(u)===k(ml).simpleStyle,onTogglePanel:M[0]||(M[0]=()=>S(k(ml).simpleStyle))},{default:Ht(()=>[lt(gxe)]),_:1},8,["title","expanded"])])):Ae("",!0),f.value.includes(k(ml).mediumStyle)?(U(),$("div",Fxe,[lt(ax,{title:k(e)("Medium"),expanded:k(u)===k(ml).mediumStyle,onTogglePanel:M[1]||(M[1]=()=>S(k(ml).mediumStyle))},{default:Ht(()=>[k(l)?(U(),Gt(Txe,{key:0,layer:k(l)},null,8,["layer"])):Ae("",!0)]),_:1},8,["title","expanded"])])):Ae("",!0),f.value.includes(k(ml).advancedStyle)?(U(),$("div",Dxe,[lt(ax,{title:k(e)("Expert (style.json)"),expanded:k(u)===k(ml).advancedStyle,onTogglePanel:M[2]||(M[2]=()=>S(k(ml).advancedStyle))},{default:Ht(()=>[k(l)?(U(),Gt(Pxe,{key:0,layer:k(l)},null,8,["layer"])):Ae("",!0)]),_:1},8,["title","expanded"])])):Ae("",!0),k(s)||k(r)?(U(),$("button",{key:3,onClick:w,class:"lux-btn my-2"},q(k(e)("Rinitialiser style",{ns:"client"})),1)):Ae("",!0)])):Ae("",!0)}}),Zxe=$e({__name:"style-panel",setup(a){const{t:e}=wt(),t=_i();return(i,n)=>(U(),Gt(ap,{"data-cy-value":"stylePanel","close-fn":k(t).closeStyleEditorPanel},{header:Ht(()=>[W("h1",null,q(k(e)("Vector tiles editor",{ns:"client"})),1)]),content:Ht(()=>[lt(Vxe)]),_:1},8,["close-fn"]))}});class zxe{bootstrap(){this.restore();let e;e=dr(()=>{this.persist(),e&&e()})}persist(){this.persistLayersOpen()}persistLayersOpen(){const e=_i(),{layersOpen:t}=Tt(e);Ut(t,(i,n)=>{n!==i&&Ma.setValue(aw,i)},{immediate:!0})}restore(){this.restoreLayersOpen(),this.restoreEmbeddedMode(),this.restoreIsAppMode()}restoreEmbeddedMode(){const e=Ma.getValue(Kre),t=e!==null&&e!=="false",{embedded:i}=Tt(_i());i.value=t}restoreLayersOpen(){const e=Ma.getValue(aw)!=="false",{setLayersOpen:t}=_i();t(e)}restoreIsAppMode(){const{setIsApp:e}=_i(),t=Ma.getValue(e_)==="android"||Ma.getValue(e_)==="ios"||Ma.getValue(tp)==="yes";e(t)}}const Uxe=new zxe,T2="-",EA=",",bk="--";class Hxe{constructor(){zt(this,"layersOpacitiesToNumbersV2",e=>this.layersOpacitiesToNumbers(e,EA))}layerTimesToStrings(e){return e?e.split(bk):[]}layerIdsToLayers(e){const t=zl(),i=vo();return(e?e.split(T2):[]).map(s=>{const r=L1.isRemoteLayer(s)?q2e(s):t.findById(parseInt(s,10));return r?i.initLayer(r):void 0}).reverse()}layerNamesToLayersV2(e){const t=zl(),i=vo();return(e?e.split(EA):[]).map(s=>{const r=t.findByName(s);return r?i.initLayer(r):void 0}).reverse()}layersOpacitiesToNumbers(e,t=T2){return ese(e,t).reverse()}layersVisibilitiesToBooleansV2(e){return tse(e,EA)}layersToLayerIds(e){return(e==null?void 0:e.map(t=>t.id).reverse().join(T2))||""}layersToLayerOpacities(e){return(e==null?void 0:e.map(t=>t.opacity??1).reverse().join(T2))||""}layersToLayerTimes(e){return(e==null?void 0:e.map(t=>vo().getLayerCurrentTime(t)??"").reverse().join(bk))||""}bgLayerNameToBgLayer(e){const t=zl();return e?t.findBgLayerByName(e):null}bgLayerToBgLayerName(e){return(e==null?void 0:e.name)||_w.name}}const pl=new Hxe,Xxe="basemap_2015_global",qxe="orthogr_2013_global",Yxe={webbasemap:"basemap_2015_global","pixelmaps-color":"topogr_global","pixelmaps-gray":"topo_bw_jpeg",streets:"streets_jpeg",voidlayer:"blank"};class Kxe{bootstrap(){const e=ur();let t;t=dr(()=>{e.bgLayers.length>0&&(this.restore(),this.persist(),t&&t())})}persist(){const e=Zi(),{bgLayer:t}=Tt(e);Ut(t,(i,n)=>{n!==i&&Ma.setValue(D9,i,pl.bgLayerToBgLayerName)},{immediate:!0})}restore(){const{setMapBackground:e}=A3(),t=this.getBgLayerFromStorage();e(t)}getBgLayerFromStorage(){const e=Ma.getInitialVersion(),t=Ma.getValue(D9);return t?e===2?this.getBgLayerFromStorageV2(t):pl.bgLayerNameToBgLayer(t):pl.bgLayerNameToBgLayer(Xxe)}getBgLayerFromStorageV2(e){const t=Ma.getValue(jO,mm);let i="";return e?i=Yxe[e]:t===0&&(i=qxe),pl.bgLayerNameToBgLayer(i)}}const jxe=new Kxe;class $xe{bootstrap(){const e=ur();let t;t=dr(()=>{e.themes&&(this.restore(),this.persist(),t&&t())})}persist(){const e=Zi(),{layers:t}=Tt(e);Ut(t,(i,n)=>{n!==i&&(Ma.setValue(F9,i,pl.layersToLayerIds),Ma.setValue(V9,i,pl.layersToLayerOpacities),Ma.setValue(Z9,i,pl.layersToLayerTimes))},{immediate:!0})}restore(){const e=Ma.getInitialVersion(),t=Zi(),i=Ma.getValue(F9,e===2?pl.layerNamesToLayersV2:pl.layerIdsToLayers);this.restoreLayersOpacities(i,e),this.restoreLayersTimes(i),e===2&&(Ma.removeItem(jO),Ma.removeItem(Jre),Ma.removeItem(H9),Ma.removeItem(X9)),t.addLayers(...(i==null?void 0:i.filter(n=>n))||[])}restoreLayersOpacities(e,t){const i=t===2?this.getOpacitiesFromStorageV2():this.getOpacitiesFromStorage();i.length&&(e==null||e.forEach((n,s)=>n&&(n.opacity=i[s]??1)))}restoreLayersTimes(e){const t=Ma.getValue(Z9,pl.layerTimesToStrings);t.length&&(e==null||e.forEach((i,n)=>i&&t[n]&&this.restoreLayerTime(i,t[n])))}restoreLayerTime(e,t){const i=t.split("/");e.currentTimeMinValue=i[0],e.currentTimeMaxValue=i[1]}getOpacitiesFromStorage(){return Ma.getValue(V9,pl.layersOpacitiesToNumbers)}getOpacitiesFromStorageV2(){const e=Ma.getValue(H9,pl.layersOpacitiesToNumbersV2),t=Ma.getValue(X9,pl.layersVisibilitiesToBooleansV2);return e.map((i,n)=>t[n]?i:0).reverse()}}const Jxe=new $xe;class Qxe{bootstrap(){this.restore();let e;e=dr(()=>{this.persist(),e&&e()})}persist(){}restore(){const e=Ma.getValue(jre);_i().setMapId(e)}}const ewe=new Qxe;class twe{themeToThemeName(e){return(e==null?void 0:e.name)||""}}const awe=new twe;class iwe{bootstrap(){this.restore();let e;e=dr(()=>{this.persist(),e&&e()})}persist(){const e=ur();Ut(()=>e.theme,(t,i)=>{i!==t&&t&&Ma.setValue(R1,t,awe.themeToThemeName)},{immediate:!0})}restore(){const e=Ma.getValue(R1);if(e){const{setTheme:t}=ur();t(e)}}}const nwe=new iwe;aG();class rwe extends sN{constructor(){super(...arguments);zt(this,"geojsonFormatCustom",new Bd)}encodeVectorStylePoint(t,i,n){let s;n instanceof to?s=this.encodeVectorStylePointStyleCircle(t,n):n instanceof jh?s=this.encodeVectorStylePointStyleIcon(t,n):n instanceof sc&&(s=this.encodeVectorStylePointRegularShape(t,n)),s&&(this.customizer_.point(this.layerState_,t,s,n),i.push(s))}encodeVectorStylePointRegularShape(t,i){const n={type:"point"},s=i.getPoints(),r=i.getAngle();s===4&&r!==0?n.graphicName="square":s===4&&r===0?n.graphicName="cross":s===3?n.graphicName="triangle":s===5?n.graphicName="star":s===8&&(n.graphicName="cross");const l=i.getOpacity();l!==null&&(n.graphicOpacity=l);const u=i.getSize();if(u!==null){let v=i.getScale();Array.isArray(v)&&(v=(v[0]+v[1])/2),isNaN(v)&&(v=1),n.graphicWidth=u[1]*v}let d=i.getRotation();isNaN(d)&&(d=0),n.rotation=Wd(d);const m=i.getFill(),f=i.getStroke();return m!==null&&this.encodeVectorStyleFill(t,n,m),f!==null&&this.encodeVectorStyleStroke(t,n,f),n!==void 0&&n.graphicName==="cross"&&(n.strokeWidth=0,n.fillOpacity=1),n}encodeVectorStylePointStyleIcon(t,i){const n=i.getSrc();if(n===void 0)return;const s={type:"point",externalGraphic:n},r=i.getOpacity();r!==null&&(s.graphicOpacity=r);const l=i.getSize();if(l!==null){let d=i.getScale();Array.isArray(d)&&(d=(d[0]+d[1])/2),isNaN(d)&&(d=1);const m=l[0]*d,f=l[1]*d;s.graphicWidth=f,this.addGraphicOffset_(s,i,m,f)}let u=i.getRotation();return isNaN(u)&&(u=0),s.rotation=Wd(u),s.labelAlign&&(s.labelAlign="lm"),s.externalGraphic&&(s.graphicFormat="image/png",s.externalGraphic.indexOf("scale=")>0?delete s.graphicWidth:s.externalGraphic.indexOf("getarrow")>0&&(s.graphicWidth=10)),s}}const vk=127;class swe extends hye{async encodeLayerState(e,t,i){let n;const s=e.layer;if(s instanceof z5)n=this.encodeXYZLayer_(s.getXYZ());else if(s instanceof eo){n=new rwe(e,i).encodeVectorLayer(t);const r=e.layer.get("renderAsSvg");r!==void 0&&(n.renderAsSvg=r)}else n=await super.encodeLayerState(e,t,i);return Array.isArray(n)?n=n.map(r=>this.legacyMFPAppendCustomParams(s,r)):n&&(n=this.legacyMFPAppendCustomParams(s,n)),n}legacyMFPAppendCustomParams(e,t){return t?{...t,...e instanceof eo?{}:{customParams:{TRANSPARENT:!0,MAP_RESOLUTION:vk}}}:null}encodeXYZLayer_(e){const t=e.indexOf("/{z}/{x}/{y}"),i=e.lastIndexOf(".");if(t===-1||i===-1)return;const n=e.substring(0,t),s=e.substring(i+1),r=n.substring(n.lastIndexOf("/styles/")+8);return r==="topomap"||r==="roadmap"||r==="topomap_gray"?{baseURL:"https://wms.geoportail.lu/vectortiles_wms_4_print/service",imageFormat:"image/"+s,layers:[r],customParams:{TRANSPARENT:!0,MAP_RESOLUTION:vk},type:"wms",opacity:1,version:"1.1.1",useNativeAngle:!0}:{baseURL:n,type:"OSM",imageExtension:s}}}const i0="https://migration.geoportail.lu",owe="https://migration.geoportail.lu/legends/get_html",lwe="https://migration.geoportail.lu/short/create",xk="https://migration.geoportail.lu/printproxy",uwe="https://migration.geoportail.lu/qr",cwe=[1500,2500,5e3,1e4,15e3,2e4,25e3,5e4,8e4,1e5,125e3,2e5,25e4,4e5],MA=[[715,395],[470,650],[1065,640],[715,975],[1558,985],[1064,1475],[2255,1482],[1558,2175],[3241,2173],[2254,3155]],LA=["A4 landscape","A4 portrait","A3 landscape","A3 portrait","A2 landscape","A2 portrait","A1 landscape","A1 portrait","A0 landscape","A0 portrait"],wk=127,dwe=(a,e,t)=>Math.round(e/p4/m4*a/t);class hwe{getScales(){var t,i;const e=(t=ur().theme)==null?void 0:t.metadata;return((i=e==null?void 0:e.print_scales)==null?void 0:i.map(n=>+n).sort((n,s)=>n-s))||cwe}getLayouts(){return LA}async print(e,t){const i=`${xk}/report.${t.toLocaleLowerCase()||"pdf"}`,s=await(await fetch(i,{method:"POST",body:JSON.stringify(e)})).json(),r=i0+s.statusURL.replace(/print/,"printproxy");return{downloadURL:i0+s.downloadURL.replace(/print/,"printproxy"),ref:s.ref,statusURL:r}}cancel(e){return fetch(`${xk}/cancel/${e}`,{method:"DELETE"})}async getJobStatus(e){const t=await(await fetch(e)).json();return t.downloadURL&&(t.downloadURL=i0+t.downloadURL.replace(/print/,"printproxy")),t}async getSpec(e,t){const i=new swe(i0),n=new Hfe,s=await this.getShortLink(),r=await i.encodeMap({map:t,scale:e.scale,printResolution:t.getView().getResolution(),dpi:wk,customizer:n});r.layers=r.layers.filter(m=>m!==null);const l=await this.getLegends(t.getLayers().getArray(),e.lang),u=[];return WN(t.getLayerGroup(),u,e.framestate),{attributes:{map:r,disclaimer:e.disclaimer,scaleTitle:e.scaleTitle,appTitle:e.appTitle,scale:e.scale,name:e.title,url:s,qrimage:`${uwe}?url=${s}`,lang:e.lang,legend:e.legend?l:null,scalebar:{geodetic:!0},dataOwner:[...new Set(u)].join(" "),dateText:e.dateText,queryResults:e.queryResults},format:e.format.toLowerCase(),layout:e.layout}}getLayersForPrint(e){return e.getLayers().getArray().filter(i=>i.get(Cw)!==SB)}getSize(e){return MA[LA.indexOf(e)]}getNearestScale(e,t,i){const n=this.getScales(),s=MA[LA.indexOf(t)][0]||MA[0][0];return n.reverse().find(r=>dwe(r,s,i)<e)||n[0]}async getShortLink(){const t={url:i0+iP.getRelativeUrl()};return(await(await u_(lwe,t,"POST")).json()).short_url}async getLegends(e,t){const i=[];let n=wk;const s=owe;return e.reverse().forEach(r=>{const l=r.get("metadata"),u=l==null?void 0:l.max_dpi;if(u!==void 0){const m=parseInt(u,10);n>m&&(n=m)}const d=l==null?void 0:l.legend_name;if(d!==void 0)i.push({name:d});else{const m=r.get("queryable_id");if(l!=null&&l.isExternalWms){const f=l==null?void 0:l.legendUrl,v=l==null?void 0:l.legendAccessConstraints,w=l==null?void 0:l.legendTitle;f!==void 0&&i.push({name:null,legendUrl:f,accessConstraints:v,legendTitle:w})}else if(m!==void 0){const f=new URLSearchParams({lang:t,id:m,dpi:n.toString(),legend_title:r.get("label")});i.push({name:r.get("label"),restUrl:s+"?"+f.toString(),legendTitle:r.get("label")})}}}),i}}function WN(a,e,t){var i,n;if(a instanceof Rf)a.getLayers().forEach(s=>WN(s,e,t));else{const s=(i=a.getSource())==null?void 0:i.getAttributions(),r=(n=a.get("metadata"))==null?void 0:n.attribution,l=[];s&&l.push(...s(t)),r&&l.push(r),e.push(...l)}}const Zh=new hwe,_we=1e3;function mwe(a){return typeof a=="number"&&a>=400&&a<=500||a==="error"}function pwe(){const a=Fe(null),e=Fe(null),t=Fe(!1),i=Fe(!1);let n=null;const s=async u=>{try{const{status:d,done:m,downloadURL:f}=await Zh.getJobStatus(u);a.value=d,mwe(d)&&(t.value=!0,l()),d==="finished"&&m&&f&&(e.value=f,l())}catch{l()}},r=(u,d=_we)=>{t.value=!1,l(),i.value=!0,n=window.setInterval(()=>s(u),d)},l=()=>{n!==null&&(clearInterval(n),n=null),a.value=null,i.value=!1,t.value=!1};return es(()=>l()),{jobStatus:a,url:e,startPolling:r,clearPolling:l,error:t,loading:i}}function gwe(){const{t:a}=wt(),{featureInfoPrintableRef:e,locationInfoPrintableRef:t}=Tt(nE()),{locationInfoCoords:i}=Tt(Hm()),{startPolling:n,clearPolling:s,url:r,error:l,loading:u}=pwe(),d=vi().getOlMap(),m=Fe(null);async function f(G){const P=v(),F={disclaimer:a(`www.geoportail.lu est un portail d'accs aux informations golocalises, donnes et services qui sont mis  disposition par les administrations publiques luxembourgeoises. Responsabilit: Malgr la grande attention quelles portent  la justesse des informations diffuses sur ce site, les autorits ne peuvent endosser aucune responsabilit quant  la fidlit,  lexactitude,  lactualit,  la fiabilit et  lintgralit de ces informations. Information dpourvue de foi publique. 
Droits d'auteur: Administration du Cadastre et de la Topographie. http://g-o.lu/copyright`),scaleTitle:a("Echelle approximative 1:"),appTitle:a("Le goportail national du Grand-Duch du Luxembourg",{ns:"app"}),dateText:a("Date d'impression:"),queryResults:P,...G},N=await Zh.getSpec(F,d);try{const V=await Zh.print(N,G.format);m.value=V.ref,n(V.statusURL)}catch{m.value=null,l.value=!0,s()}}function v(){const G=S(),P=T();return`${G??""}${P??""}`||void 0}async function w(){m.value&&(await Zh.cancel(m.value),m.value=null,s())}function S(){if(!(!i.value||!t.value))return M(t.value)}function T(){if(!(i.value||!e.value))return M(e.value)}function M(G){const P=G.cloneNode(!0);return P.querySelectorAll("[data-cy], [v-]").forEach(V=>{V.removeAttribute("data-cy"),V.removeAttribute("v-")}),P.querySelectorAll(".no-print").forEach(V=>V.remove()),P.innerHTML}return{print:f,abortPrint:w,url:r,error:l,loading:u}}var S4=(a=>(a.PDF="PDF",a.PNG="PNG",a))(S4||{});const fwe={"data-cy":"toolbarPrint"},ywe={class:"absolute bottom-full top-auto z-20 flex flex-col divide-gray-400 divide-solid box-content border-y border-x border-gray-400 bg-primary md:w-64 p-3 gap-3"},bwe={class:"md:w-full"},vwe=["placeholder"],xwe={class:"flex gap-1 items-center"},wwe=["id"],Iwe=["for"],Cwe={class:"flex gap-1 items-center secondary-button"},Swe={class:"md:w-1/2"},Awe={class:"md:w-1/2"},Twe={class:"flex gap-1 justify-end items-center"},Ewe={key:0,"data-cy":"printLoading",class:"mr-4 flex gap-2 items-center"},Mwe=["disabled"],Lwe=["disabled"],Rwe=2e3,kwe=$e({__name:"toolbar-print",setup(a){const{addNotification:e}=Ls(),{t}=wt(),{lang:i}=_i(),{print:n,abortPrint:s,url:r,error:l,loading:u}=gwe(),d=iG();let m=null;const f=vi().getOlMap(),v=new _ye({id:"mask",opacity:0});v.setZIndex(Rwe);const w=Fe(""),S=Fe(!1),T=St(()=>!S.value),M=Fe(""),G=St(()=>Zh.getLayouts().map(J=>({label:t(J),value:J,ariaLabel:t("Change layout:",{ns:"app"})}))),P=J=>{M.value=J,F.value=J,v.setSize(Zh.getSize(J)),f.render()},F=Fe(""),N=Fe(""),V=St(()=>Zh.getScales().map(J=>({label:`1 : ${J.toLocaleString()}`,value:J.toString(),ariaLabel:t("Change scale:",{ns:"app"})}))),K=J=>{N.value=J,v.setScale(parseInt(J,10)),f.render()};function te(J){n({format:J,layout:M.value,scale:parseInt(N.value,10),resolution:f.getView().getResolution(),title:w.value,legend:S.value,lang:i,framestate:m})}return Ut(l,J=>{J&&e(t("An error occurred while printing"),on.ERROR)}),Ut(r,J=>J&&window.open(J,"_blank")),In(()=>{f.addLayer(v),v.setOpacity(.5),f.on("rendercomplete",J=>{m=J.frameState||null}),P(G.value[0].value),K(Zh.getNearestScale(f.getSize()[0],M.value,f.getView().getResolution()).toString())}),es(()=>{f.removeLayer(v),v.setOpacity(0)}),(J,ne)=>(U(),$("div",fwe,[W("div",ywe,[W("div",bwe,[La(W("input",{class:"cursor-pointer w-full p-2 lux-input",type:"text","onUpdate:modelValue":ne[0]||(ne[0]=se=>w.value=se),placeholder:k(t)("Title",{ns:"client"}),"data-cy":"printTitle"},null,8,vwe),[[Hr,w.value]])]),W("div",xwe,[La(W("input",{id:k(d),class:"hover:cursor-pointer",type:"checkbox","onUpdate:modelValue":ne[1]||(ne[1]=se=>S.value=se),"data-cy":"printWithLegend"},null,8,wwe),[[of,S.value]]),W("label",{class:"font-bold block lux-text-default hover:cursor-pointer",for:k(d)},q(k(t)("Avec lgende")),9,Iwe)]),W("div",Cwe,[W("div",Swe,[lt(qx,{"data-cy":"printLayouts",class:"w-full",options:G.value,modelValue:M.value,"onUpdate:modelValue":ne[2]||(ne[2]=se=>M.value=se),onChange:P,direction:"up"},null,8,["options","modelValue"])]),W("div",Awe,[lt(qx,{"data-cy":"printScales",class:"w-full",options:V.value,modelValue:N.value,"onUpdate:modelValue":ne[3]||(ne[3]=se=>N.value=se),onChange:K,direction:"up"},null,8,["options","modelValue"])])]),W("div",Twe,[k(u)?(U(),$("div",Ewe,[ne[7]||(ne[7]=W("span",{class:"text-black fa-solid fa-arrows-rotate animate-spin","aria-hidden":"true"},null,-1)),W("button",{class:"btn btn-link opacity-75 text-white hover:underline hover:opacity-100",onClick:ne[4]||(ne[4]=se=>k(s)())},q(k(t)("Abort")),1)])):Ae("",!0),W("button",{"data-cy":"printPng",class:"bg-white disabled:opacity-75 disabled:cursor-not-allowed text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:ne[5]||(ne[5]=se=>te(k(S4).PNG)),disabled:k(u)||!T.value},q(k(t)("PNG")),9,Mwe),W("button",{"data-cy":"printPdf",class:"bg-white disabled:opacity-75 disabled:cursor-not-allowed text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:ne[6]||(ne[6]=se=>te(k(S4).PDF)),disabled:k(u)},q(k(t)("PDF")),9,Lwe)])])]))}});const Wwe=hr(kwe,[["__scopeId","data-v-9820d18c"]]),Gwe={class:"flex flex-col gap-3"},Owe={class:"md:w-full"},Pwe={for:"share-url-input",class:"block text-white text-sm font-medium mb-2"},Bwe=["value","aria-label"],Nwe=["value","aria-label"],Fwe={class:"flex gap-1 items-center"},Dwe={for:"show-long-url-checkbox",class:"font-bold block lux-text-default hover:cursor-pointer"},Vwe={key:0,class:"flex gap-1 items-center"},Zwe={for:"only-mymaps-checkbox",class:"font-bold block lux-text-default hover:cursor-pointer"},zwe=$e({__name:"share-url",setup(a){const{t:e}=wt(),t=_i(),{mapId:i,shareOpen:n}=Tt(t),s=Fe(""),r=Fe(""),l=Fe(!1),u=Fe(!1);let d=null,m="";function f(G){if(u.value&&i.value){const P=new URL(G);return P.search=`?map_id=${i.value}`,P.toString()}return G}async function v(){const G=Ul.getStrippedUrl(),P=f(G.toString());r.value=P,m=P;try{if(u.value&&i.value){const F=new URLSearchParams;F.set("url",P);const V=await(await fetch("https://migration.geoportail.lu/short/create",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:F.toString()})).json();s.value=V.short_url}else{const F=await Ul.getShortUrl(void 0);s.value=F.short_url}}catch{s.value=P}}function w(G){G.target.select()}function S(){d!==null&&clearInterval(d),d=setInterval(()=>{const G=Ul.getStrippedUrl().toString(),P=f(G);m!==P&&v()},500)}function T(){d!==null&&(clearInterval(d),d=null)}Ut(u,()=>{n.value&&v()}),Ut(n,G=>{G?(v(),S()):T()},{immediate:!0}),es(()=>{T()});const M=()=>!!i.value;return(G,P)=>(U(),$("div",Gwe,[W("div",Owe,[W("label",Pwe,q(k(e)("Short Url",{ns:"client"})),1),l.value?(U(),$("input",{key:1,id:"share-url-input",type:"text",class:"w-full px-3 py-2 lux-input cursor-pointer",value:r.value,"aria-label":k(e)("Long Url",{ns:"client"}),onClick:w,readonly:"","data-cy":"shareLongUrl"},null,8,Nwe)):(U(),$("input",{key:0,id:"share-url-input",type:"text",class:"w-full px-3 py-2 lux-input cursor-pointer",value:s.value,"aria-label":k(e)("Short Url",{ns:"client"}),onClick:w,readonly:"","data-cy":"shareShortUrl"},null,8,Bwe))]),W("div",Fwe,[La(W("input",{id:"show-long-url-checkbox",type:"checkbox","onUpdate:modelValue":P[0]||(P[0]=F=>l.value=F),class:"hover:cursor-pointer","data-cy":"showLongUrlCheckbox"},null,512),[[of,l.value]]),W("label",Dwe,q(k(e)("Show long url",{ns:"client"})),1)]),M()?(U(),$("div",Vwe,[La(W("input",{id:"only-mymaps-checkbox",type:"checkbox","onUpdate:modelValue":P[1]||(P[1]=F=>u.value=F),class:"hover:cursor-pointer","data-cy":"onlyMymapsCheckbox"},null,512),[[of,u.value]]),W("label",Zwe,q(k(e)("Share only Mymaps",{ns:"client"})),1)])):Ae("",!0)]))}}),Uwe={class:"md:w-full"},Hwe={for:"embed-code-input",class:"block text-white text-sm font-medium mb-2"},Xwe={class:"flex gap-2"},qwe=["value","aria-label"],Ywe=["aria-label"],Kwe={class:"flex justify-between items-center p-4 border-b"},jwe={id:"modal-title",class:"text-xl font-semibold"},$we=["aria-label"],Jwe={class:"p-4 space-y-4"},Qwe={for:"iframe-size-select",class:"sr-only"},eIe=["aria-label"],tIe={value:"small"},aIe={value:"medium"},iIe={value:"large"},nIe={value:"custom"},rIe={key:0,class:"flex gap-2 items-center"},sIe={class:"border border-gray-300 overflow-auto"},oIe=["src","width","height","title"],lIe={class:"flex gap-2"},uIe={for:"iframe-code-input",class:"sr-only"},cIe=["value","aria-label"],dIe=["aria-label"],hIe=$e({__name:"share-embed",setup(a){const{t:e}=wt(),t=Fe(!1),i=Fe("small"),n=Fe(800),s=Fe(600),r=Fe(null),l={small:[400,300],medium:[600,450],large:[800,600],custom:[800,600]},u=St(()=>i.value==="custom"?n.value:l[i.value][0]),d=St(()=>i.value==="custom"?s.value:l[i.value][1]),m=St(()=>{const P=new URL(window.location.href);return P.searchParams.set("embedded","true"),P.href}),f=St(()=>`<iframe src="${m.value}" width="${u.value}" height="${d.value}" frameborder="0" style="border:0"></iframe>`),v=St(()=>`${u.value+48}px`);function w(P){P.target.select()}function S(){t.value=!0}function T(){t.value=!1}function M(){navigator.clipboard.writeText(f.value)}function G(P){if(!t.value||!r.value)return;const F=r.value.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),N=F[0],V=F[F.length-1];P.key==="Tab"?P.shiftKey&&document.activeElement===N?(P.preventDefault(),V.focus()):!P.shiftKey&&document.activeElement===V&&(P.preventDefault(),N.focus()):P.key==="Escape"&&T()}return Ut(t,P=>{P?document.addEventListener("keydown",G):document.removeEventListener("keydown",G)}),es(()=>{document.removeEventListener("keydown",G)}),(P,F)=>(U(),$("div",null,[W("div",Uwe,[W("label",Hwe,q(k(e)("Integrate",{ns:"client"})),1),W("div",Xwe,[W("input",{id:"embed-code-input",type:"text",class:"flex-1 px-3 py-2 lux-input cursor-pointer",value:f.value,"aria-label":k(e)("Integrate",{ns:"client"}),onClick:w,readonly:"","data-cy":"embedCodeInput"},null,8,qwe),W("button",{onClick:S,class:"bg-white disabled:opacity-75 disabled:cursor-not-allowed text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5","aria-label":k(e)("Preview",{ns:"client"}),"data-cy":"previewButton"},q(k(e)("Preview",{ns:"client"})),9,Ywe)])]),t.value?(U(),$("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",onClick:Jr(T,["self"]),"data-cy":"iframePreviewModal"},[W("div",{ref_key:"modalRef",ref:r,class:"bg-white rounded-lg shadow-xl mx-4 max-h-[90vh] overflow-auto",style:Tc({width:v.value,maxWidth:"90vw"})},[W("div",Kwe,[W("h2",jwe,q(k(e)("Embed map",{ns:"app"})),1),W("button",{onClick:T,class:"text-gray-500 hover:text-gray-700 text-2xl leading-none","aria-label":k(e)("Close",{ns:"app"}),"data-cy":"closePreviewButton"},"  ",8,$we)]),W("div",Jwe,[W("div",null,[W("label",Qwe,q(k(e)("Select iframe size",{ns:"client"})),1),La(W("select",{id:"iframe-size-select","onUpdate:modelValue":F[0]||(F[0]=N=>i.value=N),class:"w-full px-3 py-2 border border-gray-300 rounded","aria-label":k(e)("Select iframe size",{ns:"client"}),"data-cy":"iframeSizeSelect"},[W("option",tIe,q(k(e)("small",{ns:"app"})),1),W("option",aIe,q(k(e)("medium",{ns:"app"})),1),W("option",iIe,q(k(e)("large",{ns:"app"})),1),W("option",nIe,q(k(e)("custom",{ns:"app"})),1)],8,eIe),[[tW,i.value]])]),i.value==="custom"?(U(),$("div",rIe,[F[3]||(F[3]=W("label",{for:"custom-width-input",class:"sr-only"},"Width",-1)),La(W("input",{id:"custom-width-input",type:"number","onUpdate:modelValue":F[1]||(F[1]=N=>n.value=N),min:"0",class:"w-24 px-3 py-2 border border-gray-300 rounded","aria-label":"Custom width","data-cy":"customWidthInput"},null,512),[[Hr,n.value,void 0,{number:!0}]]),F[4]||(F[4]=W("span",{"aria-hidden":"true"},"X",-1)),F[5]||(F[5]=W("label",{for:"custom-height-input",class:"sr-only"},"Height",-1)),La(W("input",{id:"custom-height-input",type:"number","onUpdate:modelValue":F[2]||(F[2]=N=>s.value=N),min:"0",class:"w-24 px-3 py-2 border border-gray-300 rounded","aria-label":"Custom height","data-cy":"customHeightInput"},null,512),[[Hr,s.value,void 0,{number:!0}]])])):Ae("",!0),W("div",sIe,[W("iframe",{src:m.value,width:u.value,height:d.value,frameborder:"0",style:{border:"0"},title:k(e)("Embed map preview",{ns:"client"}),"data-cy":"iframePreview"},null,8,oIe)]),W("div",lIe,[W("label",uIe,q(k(e)("Iframe code",{ns:"client"})),1),W("input",{id:"iframe-code-input",type:"text",value:f.value,onClick:w,readonly:"",class:"flex-1 px-3 py-2 border border-gray-300 rounded cursor-pointer","aria-label":k(e)("Iframe code",{ns:"client"}),"data-cy":"iframeCodeInput"},null,8,cIe),W("button",{onClick:M,class:"bg-white disabled:opacity-75 disabled:cursor-not-allowed text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5","aria-label":k(e)("Copy",{ns:"client"}),"data-cy":"copyIframeCodeButton"},q(k(e)("Copy",{ns:"client"})),9,dIe)])])],4)])):Ae("",!0)]))}}),_Ie={"data-cy":"sharePanel"},mIe={class:"absolute bottom-full top-auto z-20 flex flex-col divide-gray-400 divide-solid box-content border-y border-x border-gray-400 bg-primary md:w-80 p-3 gap-3"},pIe=$e({__name:"share-panel",setup(a){return(e,t)=>(U(),$("div",_Ie,[W("div",mIe,[lt(zwe),lt(hIe)])]))}}),gIe={class:"flex flex-col w-12 justify-between bg-white z-5 shrink-0 sm:flex-row sm:w-full sm:h-14 sm:shadow-footer"},fIe={class:"flex flex-col w-full sm:w-80 sm:flex-row justify-start text-primary divide-y sm:divide-y-0 sm:divide-x divide-gray-400 divide-solid box-content border-y sm:border-y-0 border-x border-gray-400"},yIe={"data-cy":"layersOpenClose"},bIe={"data-cy":"mymapsOpenClose"},vIe={"data-cy":"infoOpenClose"},xIe={"data-cy":"legendsOpenClose"},wIe={class:"relative flex flex-col w-12 sm:w-64 sm:flex-row justify-start text-primary divide-y sm:divide-y-0 sm:divide-x divide-gray-400 divide-solid box-content border-y sm:border-y-0 border-x border-gray-400"},IIe={class:"w-[466px] hidden sm:flex flex-row justify-end text-gray-500 whitespace-nowrap"},CIe=["aria-pressed","aria-label"],SIe=$e({__name:"footer-bar",setup(a){const{t:e,i18next:t}=wt(),i=_i(),n=wo(),s="https://geocatalogue.geoportail.lu/geonetwork/srv",{setLayersOpen:r,togglePrintToolbarOpen:l,toggleDrawToolbarOpen:u,toggleMyMapsOpen:d,toggleLegendsOpen:m,toggleInfoOpen:f,toggleShareOpen:v,toggleFeedbackOpen:w}=i,{layersOpen:S,legendsOpen:T,drawToolbarOpen:M,measureToolbarOpen:G,elevationProfileToolbarOpen:P,styleEditorOpen:F,myMapsOpen:N,infoOpen:V,shareOpen:K,lidarOpen:te,themeGridOpen:J,printToolbarOpen:ne,feedbackOpen:se}=Tt(i),{setEditActiveState:de}=n;function _e(){const we=!S.value;r(we),we&&(F.value=!1,N.value=!1,V.value=!1,te.value=!1),J.value=!1}Ut(M,we=>{we?(G.value=!1,P.value=!1,ne.value=!1,K.value=!1,te.value=!1):de(void 0)}),Ut(G,we=>{we&&(M.value=!1,P.value=!1,ne.value=!1,K.value=!1,te.value=!1)}),Ut(P,we=>{we&&(M.value=!1,G.value=!1,ne.value=!1,K.value=!1,te.value=!1)}),Ut(ne,we=>{we&&(M.value=!1,G.value=!1,P.value=!1,K.value=!1,te.value=!1)}),Ut(K,we=>{we&&(M.value=!1,G.value=!1,P.value=!1,ne.value=!1,te.value=!1)}),Ut(te,we=>{we&&(S.value=T.value=J.value=ne.value=M.value=G.value=P.value=K.value=F.value=N.value=V.value=!1)});const Se=Zm(),{displayStarOnMobile:ce}=Tt(Se),{setDisplayStarOnMobile:Ie}=Se;function he(){f(),Ie(!1)}return(we,Oe)=>(U(),$("footer",gIe,[W("ul",fIe,[W("li",yIe,[lt(od,{label:k(e)("layers",{ns:"client"}),icon:"layers",active:k(S),onClick:_e},null,8,["label","active"])]),W("li",bIe,[lt(od,{label:k(e)("my_maps",{ns:"client"}),icon:"mymaps",active:k(N),onClick:Oe[0]||(Oe[0]=()=>k(d)())},null,8,["label","active"])]),W("li",vIe,[lt(od,{label:`${k(e)("Infos",{ns:"client"})}${k(ce)?"(*)":""}`,icon:"infos",active:k(V),onClick:he},null,8,["label","active"])]),W("li",xIe,[lt(od,{label:k(e)("Legends",{ns:"client"}),icon:"legends",active:k(T),onClick:Oe[1]||(Oe[1]=()=>k(m)())},null,8,["label","active"])]),W("li",null,[lt(od,{class:"text-gray-300",label:k(e)("Routing",{ns:"client"}),icon:"routing"},null,8,["label"])])]),W("div",wIe,[k(M)?(U(),Gt(Ile,{key:0})):Ae("",!0),k(ne)?(U(),Gt(Wwe,{key:1})):Ae("",!0),k(K)?(U(),Gt(pIe,{key:2})):Ae("",!0),k(P)?(U(),Gt(Ufe,{key:3})):Ae("",!0),lt(od,{label:k(e)("Dessin",{ns:"client"}),icon:"draw",active:k(M),onClick:Oe[2]||(Oe[2]=()=>k(u)()),"data-cy":"drawButton"},null,8,["label","active"]),k(G)?(U(),Gt(Ale,{key:4})):Ae("",!0),lt(od,{label:k(e)("Mesurer",{ns:"client"}),active:k(G),icon:"measure",onClick:Oe[3]||(Oe[3]=()=>G.value=!k(G))},null,8,["label","active"]),lt(od,{class:"hidden sm:block",label:k(e)("Imprimer",{ns:"client"}),active:k(ne),onClick:Oe[4]||(Oe[4]=()=>k(l)()),icon:"print","data-cy":"printButton"},null,8,["label","active"]),lt(od,{label:k(e)("Partager",{ns:"client"}),active:k(K),icon:"share",onClick:Oe[5]||(Oe[5]=()=>k(v)()),"data-cy":"shareButton"},null,8,["label","active"])]),W("div",IIe,[lt(Q_,{class:"hidden lg:flex text-gray-500",label:k(e)("What's new",{ns:"client"}),link:`https://geoportail.lu/${k(t).language}/questions/whats-new/`},null,8,["label","link"]),lt(Q_,{class:"hidden lg:flex text-gray-500",label:k(e)("Geocatalogue",{ns:"client"}),link:k(s)},null,8,["label","link"]),W("button",{class:Pa(["hidden lg:flex h-full flex-col justify-center px-[7px] uppercase hover:text-white hover:bg-primary text-gray-500",{"bg-primary text-white":k(se)}]),"aria-pressed":k(se)?"true":"false","aria-label":k(e)("Feedback",{ns:"client"}),onClick:Oe[6]||(Oe[6]=()=>k(w)()),"data-cy":"feedbackButton"},q(k(e)("Feedback",{ns:"client"})),11,CIe),lt(Q_,{class:"hidden lg:flex text-gray-500",label:k(e)("A Propos",{ns:"client"}),link:`https://www.geoportail.lu/${k(t).language}/propos/`},null,8,["label","link"]),lt(Q_,{class:"hidden lg:flex text-gray-500",label:k(e)("Aide",{ns:"client"}),link:`https://www.geoportail.lu/${k(t).language}/documentation/`},null,8,["label","link"]),lt(Q_,{class:"hidden lg:flex text-gray-500",label:k(e)("Contact",{ns:"client"}),link:`https://www.geoportail.lu/${k(t).language}/propos/contactez-nous/`},null,8,["label","link"]),lt(Q_,{class:"text-gray-500",label:k(e)("Legalites",{ns:"client"}),link:`https://www.geoportail.lu/${k(t).language}/propos/mentions-legales/`},null,8,["label","link"]),lt(Q_,{class:"text-gray-500",label:k(e)("ACT",{ns:"client"}),link:"http://www.act.public.lu/"},null,8,["label"])])]))}}),F1=Co("lidar",()=>{const a=Fe(!1),e=Fe(!1),t=Fe(5),i=Fe(null);return{drawLidarActive:a,profileWidth:t,currentProfileFeature:i,lidarConfig:{clientConfig:{autoWidth:!0,margin:{left:40,top:10,right:0,bottom:40},pointAttributes:{},pointSum:0,tolerance:5},serverConfig:{classification_colors:{1:{color:"120, 120, 120",name:{fr:"points non classifis",en:"unclassified points",de:"nicht klassifizierte Punkte",lb:"onklassiert Punkten"},value:"unclassified points",visible:1},2:{color:"160, 82, 40",name:{fr:"sol",en:"ground",de:"Boden",lb:"Buedem"},value:"ground",visible:1},3:{color:"0, 240, 0",name:{fr:"vgtation basse",en:"low vegetation",de:"niedrige Vegetation",lb:"niddereg Vegetatioun"},value:"low vegetation",visible:1},4:{color:"0, 204, 0",name:{fr:"vgtation moyenne",en:"average vegetation",de:"mittlere Vegetation",lb:"mttel Vegetatioun"},value:"average vegetation",visible:1},5:{color:"0, 150, 0",name:{fr:"vgtation haute",en:"high vegetation",de:"hohe Vegetation",lb:"hich Vegetatioun"},value:"high vegetation",visible:1},6:{color:"255, 170, 0",name:{fr:"btiments",en:"buildings",de:"Gebude",lb:"Gebai"},value:"buildings",visible:1},7:{color:"0, 0, 0",name:{fr:"points bas (bruit)",en:"low points (noise)",de:"niedrige Punkte",lb:"niddereg Punkten"},value:"low points (noise)",visible:1},9:{color:"60, 130, 250",name:{fr:"eau",en:"water",de:"Wasser",lb:"Waasser"},value:"water",visible:1},13:{color:"255, 0, 0",name:{fr:"ponts, passerelles, viaducs",en:"bridges",de:"Brcken",lb:"Brcke"},value:"bridges",visible:1},15:{color:"255, 255, 0",name:{fr:"lignes  haute tension",en:"high voltage lines",de:"Hochspannungsleitung",lb:"hich Volt Linn"},value:"high voltage lines",visible:1}},debug:!1,default_attribute:"CLASSIFICATION",default_color:"RGB(250,150,150)",default_point_attribute:"CLASSIFICATION",default_point_cloud:"luxembourg",initialLOD:10,max_levels:{25:{max:14,width:2},50:{max:13,width:2},75:{max:13,width:3},100:{max:12,width:3},150:{max:12,width:4},250:{max:11,width:4},350:{max:11,width:4},500:{max:10,width:5},1e3:{max:10,width:5},5e3:{max:9,width:6},7500:{max:9,width:6},1e5:{max:9,width:7}},max_point_number:15e4,minLOD:0,point_attributes:{CLASSIFICATION:{bytes:1,elements:1,name:"Classification",value:"CLASSIFICATION",visible:1},COLOR_PACKED:{bytes:4,elements:4,name:"Couleur",value:"COLOR_PACKED",visible:1},INTENSITY:{bytes:2,element:1,name:"Intensit",value:"INTENSITY",visible:1},POSITION_CARTESIAN:{bytes:12,elements:3,name:"Position-cartesian",value:"POSITION_CARTESIAN",visible:0},POSITION_PROJECTED_PROFILE:{bytes:8,elements:2,name:"Position-projected",value:"POSITION_PROJECTED_PROFILE",visible:0},RGB:{bytes:3,elements:4,name:"Couleur",value:"RGBA",visible:0}},point_size:1,width:10}},measureActive:e}}),A4={capture:!0,passive:!1};function T4(a){a.preventDefault(),a.stopImmediatePropagation()}function AIe(a){var e=a.document.documentElement,t=Ys(a).on("dragstart.drag",T4,A4);"onselectstart"in e?t.on("selectstart.drag",T4,A4):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function TIe(a,e){var t=a.document.documentElement,i=Ys(a).on("dragstart.drag",null);e&&(i.on("click.drag",T4,A4),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const E2=a=>()=>a;function EIe(a,{sourceEvent:e,target:t,transform:i,dispatch:n}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:n}})}function xd(a,e,t){this.k=a,this.x=e,this.y=t}xd.prototype={constructor:xd,scale:function(a){return a===1?this:new xd(this.k*a,this.x,this.y)},translate:function(a,e){return a===0&e===0?this:new xd(this.k,this.x+this.k*a,this.y+this.k*e)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var GN=new xd(1,0,0);xd.prototype;function RA(a){a.stopImmediatePropagation()}function n0(a){a.preventDefault(),a.stopImmediatePropagation()}function MIe(a){return(!a.ctrlKey||a.type==="wheel")&&!a.button}function LIe(){var a=this;return a instanceof SVGElement?(a=a.ownerSVGElement||a,a.hasAttribute("viewBox")?(a=a.viewBox.baseVal,[[a.x,a.y],[a.x+a.width,a.y+a.height]]):[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]):[[0,0],[a.clientWidth,a.clientHeight]]}function Ik(){return this.__zoom||GN}function RIe(a){return-a.deltaY*(a.deltaMode===1?.05:a.deltaMode?1:.002)*(a.ctrlKey?10:1)}function kIe(){return navigator.maxTouchPoints||"ontouchstart"in this}function WIe(a,e,t){var i=a.invertX(e[0][0])-t[0][0],n=a.invertX(e[1][0])-t[1][0],s=a.invertY(e[0][1])-t[0][1],r=a.invertY(e[1][1])-t[1][1];return a.translate(n>i?(i+n)/2:Math.min(0,i)||Math.max(0,n),r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r))}function GIe(){var a=MIe,e=LIe,t=WIe,i=RIe,n=kIe,s=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Yce,d=L3("start","zoom","end"),m,f,v,w=500,S=150,T=0,M=10;function G(ce){ce.property("__zoom",Ik).on("wheel.zoom",J,{passive:!1}).on("mousedown.zoom",ne).on("dblclick.zoom",se).filter(n).on("touchstart.zoom",de).on("touchmove.zoom",_e).on("touchend.zoom touchcancel.zoom",Se).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}G.transform=function(ce,Ie,he,we){var Oe=ce.selection?ce.selection():ce;Oe.property("__zoom",Ik),ce!==Oe?V(ce,Ie,he,we):Oe.interrupt().each(function(){K(this,arguments).event(we).start().zoom(null,typeof Ie=="function"?Ie.apply(this,arguments):Ie).end()})},G.scaleBy=function(ce,Ie,he,we){G.scaleTo(ce,function(){var Oe=this.__zoom.k,Ye=typeof Ie=="function"?Ie.apply(this,arguments):Ie;return Oe*Ye},he,we)},G.scaleTo=function(ce,Ie,he,we){G.transform(ce,function(){var Oe=e.apply(this,arguments),Ye=this.__zoom,at=he==null?N(Oe):typeof he=="function"?he.apply(this,arguments):he,yt=Ye.invert(at),De=typeof Ie=="function"?Ie.apply(this,arguments):Ie;return t(F(P(Ye,De),at,yt),Oe,r)},he,we)},G.translateBy=function(ce,Ie,he,we){G.transform(ce,function(){return t(this.__zoom.translate(typeof Ie=="function"?Ie.apply(this,arguments):Ie,typeof he=="function"?he.apply(this,arguments):he),e.apply(this,arguments),r)},null,we)},G.translateTo=function(ce,Ie,he,we,Oe){G.transform(ce,function(){var Ye=e.apply(this,arguments),at=this.__zoom,yt=we==null?N(Ye):typeof we=="function"?we.apply(this,arguments):we;return t(GN.translate(yt[0],yt[1]).scale(at.k).translate(typeof Ie=="function"?-Ie.apply(this,arguments):-Ie,typeof he=="function"?-he.apply(this,arguments):-he),Ye,r)},we,Oe)};function P(ce,Ie){return Ie=Math.max(s[0],Math.min(s[1],Ie)),Ie===ce.k?ce:new xd(Ie,ce.x,ce.y)}function F(ce,Ie,he){var we=Ie[0]-he[0]*ce.k,Oe=Ie[1]-he[1]*ce.k;return we===ce.x&&Oe===ce.y?ce:new xd(ce.k,we,Oe)}function N(ce){return[(+ce[0][0]+ +ce[1][0])/2,(+ce[0][1]+ +ce[1][1])/2]}function V(ce,Ie,he,we){ce.on("start.zoom",function(){K(this,arguments).event(we).start()}).on("interrupt.zoom end.zoom",function(){K(this,arguments).event(we).end()}).tween("zoom",function(){var Oe=this,Ye=arguments,at=K(Oe,Ye).event(we),yt=e.apply(Oe,Ye),De=he==null?N(yt):typeof he=="function"?he.apply(Oe,Ye):he,jt=Math.max(yt[1][0]-yt[0][0],yt[1][1]-yt[0][1]),pa=Oe.__zoom,$t=typeof Ie=="function"?Ie.apply(Oe,Ye):Ie,Ua=u(pa.invert(De).concat(jt/pa.k),$t.invert(De).concat(jt/$t.k));return function(bt){if(bt===1)bt=$t;else{var ui=Ua(bt),Ca=jt/ui[2];bt=new xd(Ca,De[0]-ui[0]*Ca,De[1]-ui[1]*Ca)}at.zoom(null,bt)}})}function K(ce,Ie,he){return!he&&ce.__zooming||new te(ce,Ie)}function te(ce,Ie){this.that=ce,this.args=Ie,this.active=0,this.sourceEvent=null,this.extent=e.apply(ce,Ie),this.taps=0}te.prototype={event:function(ce){return ce&&(this.sourceEvent=ce),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(ce,Ie){return this.mouse&&ce!=="mouse"&&(this.mouse[1]=Ie.invert(this.mouse[0])),this.touch0&&ce!=="touch"&&(this.touch0[1]=Ie.invert(this.touch0[0])),this.touch1&&ce!=="touch"&&(this.touch1[1]=Ie.invert(this.touch1[0])),this.that.__zoom=Ie,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(ce){var Ie=Ys(this.that).datum();d.call(ce,this.that,new EIe(ce,{sourceEvent:this.sourceEvent,target:G,type:ce,transform:this.that.__zoom,dispatch:d}),Ie)}};function J(ce,...Ie){if(!a.apply(this,arguments))return;var he=K(this,Ie).event(ce),we=this.__zoom,Oe=Math.max(s[0],Math.min(s[1],we.k*Math.pow(2,i.apply(this,arguments)))),Ye=du(ce);if(he.wheel)(he.mouse[0][0]!==Ye[0]||he.mouse[0][1]!==Ye[1])&&(he.mouse[1]=we.invert(he.mouse[0]=Ye)),clearTimeout(he.wheel);else{if(we.k===Oe)return;he.mouse=[Ye,we.invert(Ye)],$2(this),he.start()}n0(ce),he.wheel=setTimeout(at,S),he.zoom("mouse",t(F(P(we,Oe),he.mouse[0],he.mouse[1]),he.extent,r));function at(){he.wheel=null,he.end()}}function ne(ce,...Ie){if(v||!a.apply(this,arguments))return;var he=ce.currentTarget,we=K(this,Ie,!0).event(ce),Oe=Ys(ce.view).on("mousemove.zoom",De,!0).on("mouseup.zoom",jt,!0),Ye=du(ce,he),at=ce.clientX,yt=ce.clientY;AIe(ce.view),RA(ce),we.mouse=[Ye,this.__zoom.invert(Ye)],$2(this),we.start();function De(pa){if(n0(pa),!we.moved){var $t=pa.clientX-at,Ua=pa.clientY-yt;we.moved=$t*$t+Ua*Ua>T}we.event(pa).zoom("mouse",t(F(we.that.__zoom,we.mouse[0]=du(pa,he),we.mouse[1]),we.extent,r))}function jt(pa){Oe.on("mousemove.zoom mouseup.zoom",null),TIe(pa.view,we.moved),n0(pa),we.event(pa).end()}}function se(ce,...Ie){if(a.apply(this,arguments)){var he=this.__zoom,we=du(ce.changedTouches?ce.changedTouches[0]:ce,this),Oe=he.invert(we),Ye=he.k*(ce.shiftKey?.5:2),at=t(F(P(he,Ye),we,Oe),e.apply(this,Ie),r);n0(ce),l>0?Ys(this).transition().duration(l).call(V,at,we,ce):Ys(this).call(G.transform,at,we,ce)}}function de(ce,...Ie){if(a.apply(this,arguments)){var he=ce.touches,we=he.length,Oe=K(this,Ie,ce.changedTouches.length===we).event(ce),Ye,at,yt,De;for(RA(ce),at=0;at<we;++at)yt=he[at],De=du(yt,this),De=[De,this.__zoom.invert(De),yt.identifier],Oe.touch0?!Oe.touch1&&Oe.touch0[2]!==De[2]&&(Oe.touch1=De,Oe.taps=0):(Oe.touch0=De,Ye=!0,Oe.taps=1+!!m);m&&(m=clearTimeout(m)),Ye&&(Oe.taps<2&&(f=De[0],m=setTimeout(function(){m=null},w)),$2(this),Oe.start())}}function _e(ce,...Ie){if(this.__zooming){var he=K(this,Ie).event(ce),we=ce.changedTouches,Oe=we.length,Ye,at,yt,De;for(n0(ce),Ye=0;Ye<Oe;++Ye)at=we[Ye],yt=du(at,this),he.touch0&&he.touch0[2]===at.identifier?he.touch0[0]=yt:he.touch1&&he.touch1[2]===at.identifier&&(he.touch1[0]=yt);if(at=he.that.__zoom,he.touch1){var jt=he.touch0[0],pa=he.touch0[1],$t=he.touch1[0],Ua=he.touch1[1],bt=(bt=$t[0]-jt[0])*bt+(bt=$t[1]-jt[1])*bt,ui=(ui=Ua[0]-pa[0])*ui+(ui=Ua[1]-pa[1])*ui;at=P(at,Math.sqrt(bt/ui)),yt=[(jt[0]+$t[0])/2,(jt[1]+$t[1])/2],De=[(pa[0]+Ua[0])/2,(pa[1]+Ua[1])/2]}else if(he.touch0)yt=he.touch0[0],De=he.touch0[1];else return;he.zoom("touch",t(F(at,yt,De),he.extent,r))}}function Se(ce,...Ie){if(this.__zooming){var he=K(this,Ie).event(ce),we=ce.changedTouches,Oe=we.length,Ye,at;for(RA(ce),v&&clearTimeout(v),v=setTimeout(function(){v=null},w),Ye=0;Ye<Oe;++Ye)at=we[Ye],he.touch0&&he.touch0[2]===at.identifier?delete he.touch0:he.touch1&&he.touch1[2]===at.identifier&&delete he.touch1;if(he.touch1&&!he.touch0&&(he.touch0=he.touch1,delete he.touch1),he.touch0)he.touch0[1]=this.__zoom.invert(he.touch0[0]);else if(he.end(),he.taps===2&&(at=du(at,this),Math.hypot(f[0]-at[0],f[1]-at[1])<M)){var yt=Ys(this).on("dblclick.zoom");yt&&yt.apply(this,arguments)}}}return G.wheelDelta=function(ce){return arguments.length?(i=typeof ce=="function"?ce:E2(+ce),G):i},G.filter=function(ce){return arguments.length?(a=typeof ce=="function"?ce:E2(!!ce),G):a},G.touchable=function(ce){return arguments.length?(n=typeof ce=="function"?ce:E2(!!ce),G):n},G.extent=function(ce){return arguments.length?(e=typeof ce=="function"?ce:E2([[+ce[0][0],+ce[0][1]],[+ce[1][0],+ce[1][1]]]),G):e},G.scaleExtent=function(ce){return arguments.length?(s[0]=+ce[0],s[1]=+ce[1],G):[s[0],s[1]]},G.translateExtent=function(ce){return arguments.length?(r[0][0]=+ce[0][0],r[1][0]=+ce[1][0],r[0][1]=+ce[0][1],r[1][1]=+ce[1][1],G):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},G.constrain=function(ce){return arguments.length?(t=ce,G):t},G.duration=function(ce){return arguments.length?(l=+ce,G):l},G.interpolate=function(ce){return arguments.length?(u=ce,G):u},G.on=function(){var ce=d.on.apply(d,arguments);return ce===d?G:ce},G.clickDistance=function(ce){return arguments.length?(T=(ce=+ce)*ce,G):Math.sqrt(T)},G.tapDistance=function(ce){return arguments.length?(M=+ce,G):M},G}const Nr={axisBottom:zP,axisLeft:UP,scaleLinear:F3,select:Ys,zoom:GIe};class OIe{constructor(e){zt(this,"manager_");zt(this,"scaleX");zt(this,"scaleY");zt(this,"updateScaleX",e=>e);zt(this,"updateScaleY",e=>e);zt(this,"material");zt(this,"width_");zt(this,"height_");zt(this,"previousDomainX",[]);zt(this,"zoom_");zt(this,"svg_");this.manager_=e}drawPoints(e){const t=e.distance.length,i=Nr.select(".lidarprofile-container .lidar-canvas").node().getContext("2d"),n=this.manager_.config.serverConfig;for(let s=0;s<t;++s){const r=e.distance[s],l=e.altitude[s],u=e.color_packed[s],d=e.intensity[s],m=e.classification[s];if(n.classification_colors[m]&&n.classification_colors[m].visible){const f=this.updateScaleX(r),v=this.updateScaleY(l);i.beginPath(),i.moveTo(f,v),this.material==="COLOR_PACKED"?i.fillStyle=`rgb(${u[0]}, ${u[1]}, ${u[2]})`:this.material==="INTENSITY"?i.fillStyle=`rgb(${d}, ${d}, ${d})`:this.material==="CLASSIFICATION"?i.fillStyle=`rgb(${n.classification_colors[m].color})`:i.fillStyle=n.default_color,i.arc(f,v,n.point_size,0,2*Math.PI,!1),i.fill()}}}setupPlot(e,t){const i=Nr.select(".lidarprofile-container .lidar-canvas"),n=i.node();n.getContext("2d").clearRect(0,0,n.getBoundingClientRect().width,n.getBoundingClientRect().height);const r=this.manager_.config.clientConfig.margin,l=Nr.select(".lidarprofile-container").node(),u=l.getBoundingClientRect().width,d=l.getBoundingClientRect().height;this.width_=Math.max(u-(r.left+r.right),0),this.height_=Math.max(d-(r.top+r.bottom),0),this.material=this.manager_.config.serverConfig.default_attribute,i.attr("height",this.height_).attr("width",this.width_).style("background-color","white").style("z-index",0).style("position","absolute").style("margin-left",`${r.left}px`).style("margin-top",`${r.top}px`);const m=e[1]-e[0],f=t[1]-t[0],v=m/f,w=this.width_,S=this.height_,T=w/S;if(v<T)this.scaleX=Nr.scaleLinear().domain(e).range([0,this.width_]),this.scaleY=Nr.scaleLinear().domain(t).range([this.height_,0]);else{const P=v/T,F=f*P,N=(t[1]+t[0])/2;this.scaleX=Nr.scaleLinear().domain(e).range([0,this.width_]),this.scaleY=Nr.scaleLinear().domain([N-F/2,N+F/2]).range([this.height_,0])}this.zoom_=Nr.zoom().scaleExtent([-10,100]).translateExtent([[0,0],[this.width_+1e3,this.height_]]).extent([[0,0],[this.width_+1e3,this.height_]]).on("zoom",this.zoomed.bind(this)).on("end",this.zoomEnd.bind(this)),this.previousDomainX=this.scaleX.domain(),this.updateScaleX=this.scaleX,this.updateScaleY=this.scaleY,this.svg_=Nr.select(".lidarprofile-container svg.lidar-svg"),this.svg_.call(this.zoom_).on("dblclick.zoom",null),this.svg_.selectAll("*").remove(),this.svg_.attr("width",this.width_+r.left).attr("height",this.height_+r.top+r.bottom),this.svg_.on("mousemove",P=>{this.pointHighlight(P)});const M=Nr.axisBottom(this.scaleX),G=Nr.axisLeft(this.scaleY).tickSize(-this.width_);this.svg_.append("g").attr("class","y axis").call(G),this.svg_.append("g").attr("class","x axis").call(M),this.svg_.select(".y.axis").attr("transform",`translate(${r.left}, ${r.top})`),this.svg_.select(".x.axis").attr("transform",`translate(${r.left}, ${this.height_+r.top})`),this.svg_.select(".y.axis").selectAll("g.tick line").style("opacity","0.5").style("stroke","#b7cff7")}activateZoom(){this.svg_.call(this.zoom_)}deactivateZoom(){this.svg_.on(".zoom",null)}zoomEnd(){Nr.select(".lidarprofile-container .lidar-canvas").node().getContext("2d").clearRect(0,0,this.width_,this.height_),this.manager_.updateData()}zoomed(e){this.manager_.clearMeasure();const t=e.transform,i=Nr.select(".lidarprofile-container svg.lidar-svg"),n=Nr.axisBottom(this.scaleX),s=Nr.axisLeft(this.scaleY).tickSize(-this.width_),r=t.rescaleX(this.scaleX),l=t.rescaleY(this.scaleY),u=n.scale(r),d=s.scale(l);i.select(".x.axis").call(u),i.select(".y.axis").call(d),Nr.select(".lidarprofile-container .lidar-canvas").node().getContext("2d").clearRect(0,0,this.width_,this.height_),i.select(".y.axis").selectAll("g.tick line").style("opacity","0.5").style("stroke","#b7cff7"),this.updateScaleX=r,this.updateScaleY=l}pointHighlight(e){const t=Nr.select(".lidarprofile-container svg.lidar-svg"),i=Nr.select(".lidarprofile-container .lidar-info"),n=this.manager_.config.serverConfig.point_size,s=this.manager_.config.clientConfig.margin,r=this.manager_.config.clientConfig.tolerance||0,l=Nr.select(".lidarprofile-container .lidar-canvas").node(),u=du(e,l),d=this.manager_.config.serverConfig.classification_colors,m=this.manager_.utils.getClosestPoint(this.manager_.profilePoints,u[0],u[1],r,this.updateScaleX,this.updateScaleY,d);if(m!=null){const f=this.updateScaleX(m.distance)+s.left,v=this.updateScaleY(m.altitude)+s.top;t.selectAll("#highlightCircle").remove(),t.append("circle").attr("id","highlightCircle").attr("cx",f).attr("cy",v).attr("r",n+3).style("fill","red");const w=m.classification??-1,S=d[w]||{},T=this.getInfoHTML(m,S,1);i.html(T),this.manager_.cartoHighlight.setElement(void 0);const M=document.createElement("div");M.className+="tooltip gmf-tooltip-measure",M.innerHTML=T,this.manager_.cartoHighlight.setElement(M);const G=new Qn([m.coords[0],m.coords[1]]).transform("EPSG:2169","EPSG:3857");this.manager_.cartoHighlight.setPosition(G.getCoordinates());const P=this.manager_.lidarPointHighlight.getSource();P&&P.clear();const F=new kn(G);typeof S.color<"u"&&F.setStyle(new Vi({image:new to({fill:new wn({color:`rgba(${S.color}, 1)`}),radius:3})})),P&&P.addFeature(F)}else{const f=this.manager_.lidarPointHighlight.getSource();f&&f.clear(),t.select("#highlightCircle").remove(),i.html(""),this.manager_.cartoHighlight.setPosition(void 0)}}getInfoHTML(e,t,i){const n=(f,v)=>parseFloat(`${f}`).toFixed(v),s=e.distance,r=e.altitude,l=t.name?t.name[Wa.language]:"",u=l!=null?String(l):"",d=e.intensity,m=[];if(s!==void 0){const f=Wa.t("Distance: ");m.push(`${f+n(s,i)}`)}if(r!==void 0){const f=Wa.t("Altitude: ");m.push(`${f+n(r,i)}`)}if(u.length>0){const f=Wa.t("Classification: ");m.push(`${f+u}`)}if(d!==void 0){const f=Wa.t("Intensity: ");m.push(`${f+n(d,0)}`)}return m.join("</br>")}changeStyle(e){this.material=e,this.clear(),this.drawPoints(this.manager_.profilePoints)}clear(){const e=Nr.select(".lidarprofile-container .lidar-canvas").node();e.getContext("2d").clearRect(0,0,e.width,e.height)}setClassActive(e,t){this.manager_.config.serverConfig.classification_colors=e,this.changeStyle(t)}}const Ck={select:Ys};class PIe{clipLineByMeasure(e,t,i){const n=new zr([]);let s=0,r=0;const l=e.getLength(),u=t/l,d=i/l;let m=e.getCoordinates().length-1,f=0;e.forEachSegment((V,K)=>{f+=1;const te=new zr([V,K]);r+=te.getLength(),t==s?n.appendCoordinate(V):t>s&&t<r&&n.appendCoordinate(e.getCoordinateAt(u)),s>t&&s<i&&n.appendCoordinate(V),i==r?n.appendCoordinate(K):(i>s&&i<r||i>s&&i>r&&f===m)&&n.appendCoordinate(e.getCoordinateAt(d)),s+=te.getLength()});const v=n.clone(),w=new kn({geometry:n.transform("EPSG:2169","EPSG:3857")}),S=new Vi({stroke:new mn({color:"rgba(255,0,0,1)",width:2,lineCap:"square"})});let T=0,M=0;m=n.getCoordinates().length-1;let G=1;n.forEachSegment((V,K)=>{if(G==1){const te=K[0]-V[0],J=K[1]-V[1];T=Math.atan2(te,J)}if(G==m){const te=K[0]-V[0],J=K[1]-V[1];M=Math.atan2(te,J)}G+=1});const P=[S],F=n.getLastCoordinate(),N=n.getFirstCoordinate();return P.push(new Vi({geometry:new Qn(N),image:new sc({fill:new wn({color:"rgba(255, 0, 0, 1)"}),stroke:new mn({color:"rgba(255,0,0,1)",width:1,lineCap:"square"}),points:3,radius:5,rotation:T,angle:Math.PI/3})}),new Vi({geometry:new Qn(F),image:new sc({fill:new wn({color:"rgba(255, 0, 0, 1)"}),stroke:new mn({color:"rgba(255,0,0,1)",width:1,lineCap:"square"}),points:3,radius:5,rotation:M,angle:4*Math.PI/3})})),{clippedLine:v.getCoordinates(),distanceOffset:t,bufferGeom:w,bufferStyle:P}}getNiceLOD(e,t){let i=0,n=0;for(const s in t){const r=parseInt(s,10);e<r&&t[r].max>i&&(i=t[r].max,n=t[r].width)}return{maxLOD:i,width:n}}downloadProfileAsImageFile(e){const t=Ck.select(".lidarprofile-container svg.lidar-svg"),i=parseInt(t.attr("width"),10),n=parseInt(t.attr("height"),10),s=e.margin,r=document.createElement("canvas");r.style.display="none",r.width=i,r.height=n;const l=r.getContext("2d");if(l){l.fillStyle="white",l.fillRect(0,0,i,n);const u=Ck.select(".lidarprofile-container .lidar-canvas").node();u instanceof HTMLCanvasElement&&l.drawImage(u,s.left,s.top,i-(s.left+s.right),n-(s.top+s.bottom));const d=new Image,m=new XMLSerializer,f=t.node(),v=m.serializeToString(f),w="lidar_profile_for_export_uid";d.id=w,d.src=`data:image/svg+xml;base64, ${btoa(v)}`,d.style.setProperty("display","none");const S=document.getElementsByTagName("body")[0];d.onload=()=>{l.drawImage(d,0,0,i,n);const T=document.getElementById(w);T&&S.removeChild(T),r.toBlob(M=>{kN.saveAs(M,"LIDAR_profile.png")})},S.appendChild(d)}}getFlatPointsByDistance(e){const t=[];for(let i=0;i<e.distance.length;i++){const n={distance:e.distance[i],altitude:e.altitude[i],color_packed:e.color_packed[i],intensity:e.intensity[i],classification:e.classification[i],coords:e.coords[i]};t.push(n)}return t.sort((i,n)=>i.distance-n.distance),t}getCSVData(e){return e.map(t=>{const i={};for(const n in t){const s=t[n];n==="altitude"?i[n]=s?s.toFixed(4):null:n==="color_packed"||n=="coords"?i[n]=s?s.join(" "):null:i[n]=s}return i})}arrayMax(e){return Math.max(...e)}arrayMin(e){let t=1/0;for(let i=0;i<e.length;i++)e[i]<t&&(t=e[i]);return t}getPytreeLinestring(e){const t=e.getCoordinates();let i="";for(let n=0;n<t.length;n++){const s=t[n][0],r=t[n][1];i+=`{${Math.round(100*s)/100}, ${Math.round(100*r)/100}},`}return i.slice(0,-1)}getClosestPoint(e,t,i,n,s,r,l){const u=e,d=n,m=[],f=[];if(u.distance&&u.altitude&&u.classification&&u.color_packed&&u.intensity&&u.coords){for(let w=0;w<u.distance.length;w++)if(s(u.distance[w])<t+d&&s(u.distance[w])>t-d&&r(u.altitude[w])<i+d&&r(u.altitude[w])>i-d){const S=Math.sqrt(Math.pow(s(u.distance[w])-t,2)+Math.pow(r(u.altitude[w])-i,2)),T=l[u.classification[w]];T&&T.visible==1&&(f.push({distance:u.distance[w],altitude:u.altitude[w],classification:u.classification[w],color_packed:u.color_packed[w],intensity:u.intensity[w],coords:u.coords[w]}),m.push(S))}}let v;if(f.length>0){const w=Math.min(...m),S=m.indexOf(w);S!=-1?v=f[S]:v=f[0]}return v}}class BIe{constructor(e){zt(this,"manager");zt(this,"pStart");zt(this,"pEnd");this.manager=e,this.pStart={},this.pEnd={}}clearMeasure(){this.manager.plot.activateZoom(),this.pStart={},this.pEnd={};const e=Ys(".lidarprofile-container svg.lidar-svg");e.selectAll("#text_m").remove(),e.selectAll("#start_m").remove(),e.selectAll("#end_m").remove(),e.selectAll("#line_m").remove(),e.on("click",null),e.style("cursor","default")}setMeasureActive(){this.manager.plot.deactivateZoom();const e=Ys(".lidarprofile-container svg.lidar-svg");e.style("cursor","pointer"),e.on("click",t=>this.measureHeight(t))}measureHeight(e){const t=Ys(".lidarprofile-container svg.lidar-svg"),i=t.node(),n=Ys(".lidarprofile-container .lidar-canvas").node();if(!i||!n)return;const s=du(e,i),r=du(e,n),l=this.manager.config.clientConfig.margin,u=s[0],d=s[1],m=2,f=this.manager.plot.updateScaleX,v=this.manager.plot.updateScaleY,w=3,S=this.manager.utils.getClosestPoint(this.manager.profilePoints,r[0],r[1],m,f,v,this.manager.config.serverConfig.classification_colors);if(this.pStart.set?this.pEnd.set||(S!==void 0?(this.pEnd.distance=S.distance,this.pEnd.altitude=S.altitude,this.pEnd.cx=f(S.distance)+l.left,this.pEnd.cy=v(S.altitude)+l.top):(this.pEnd.distance=f.invert(u),this.pEnd.altitude=v.invert(d),this.pEnd.cx=u,this.pEnd.cy=d),this.pEnd.set=!0,t.append("circle").attr("id","end_m").attr("cx",this.pEnd.cx).attr("cy",this.pEnd.cy).attr("r",w).style("fill","red"),t.append("line").attr("id","line_m").attr("x1",this.pStart.cx).attr("y1",this.pStart.cy).attr("x2",this.pEnd.cx).attr("y2",this.pEnd.cy).attr("stroke-width",2).attr("stroke","red")):(S!==void 0?(this.pStart.distance=S.distance,this.pStart.altitude=S.altitude,this.pStart.cx=f(S.distance)+l.left,this.pStart.cy=v(S.altitude)+l.top):(this.pStart.distance=f.invert(u),this.pStart.altitude=v.invert(d),this.pStart.cx=u,this.pStart.cy=d),this.pStart.set=!0,t.append("circle").attr("id","start_m").attr("cx",this.pStart.cx).attr("cy",this.pStart.cy).attr("r",w).style("fill","red")),this.pStart.set&&this.pEnd.set){const T=this.pEnd.altitude-this.pStart.altitude,M=this.pEnd.distance-this.pStart.distance,G=Math.round(10*Math.sqrt(Math.pow(T,2)+Math.pow(M,2)))/10;isNaN(G)||t.append("text").attr("id","text_m").attr("x",10+(this.pStart.cx+this.pEnd.cx)/2).attr("y",(this.pStart.cy+this.pEnd.cy)/2).text(`${G} m`).attr("font-family","sans-serif").attr("font-size","14px").style("font-weight","bold").attr("fill","red"),this.pEnd.set=!1,this.pStart.set=!1}}}const _g={select:Ys};class NIe{constructor(){zt(this,"map",vi().getOlMap());zt(this,"utils",new PIe);zt(this,"promise",null);zt(this,"plot",null);zt(this,"measure",null);zt(this,"config",null);zt(this,"cartoHighlight",new X3({offset:[0,-15],positioning:"bottom-center"}));zt(this,"lidarPointHighlight",new eo({source:new Qo({}),style:new Vi({image:new to({fill:new wn({color:"rgba(0, 0, 255, 1)"}),radius:3})})}));zt(this,"lidarBuffer",new eo({source:new Qo({})}));zt(this,"profilePoints",this.getEmptyProfilePoints_());zt(this,"isPlotSetup_",!1);zt(this,"line_")}init(e){this.config=e,this.plot=new OIe(this),this.lidarBuffer.setMap(this.map),this.lidarPointHighlight.setMap(this.map),this.measure=new BIe(this)}clearBuffer(){if(this.lidarBuffer){const e=this.lidarBuffer.getSource();e&&e.clear()}}setLine(e){this.line_=e}getEmptyProfilePoints_(){return{distance:[],altitude:[],color_packed:[],intensity:[],classification:[],coords:[]}}resetPlot(){this.isPlotSetup_=!1,this.plot.clear()}arrayToCsvString(e){if(!e.length)return"";const t=Object.keys(e[0]),i=e.map(n=>t.map(s=>JSON.stringify(n[s]??"")).join(","));return[t.join(","),...i].join(`\r
`)}exportCsv(){const e=this.utils.getFlatPointsByDistance(this.profilePoints)||{},t=this.utils.getCSVData(e),i=this.arrayToCsvString(t),n=new Blob([i],{type:"text/csv"});eP("export-lidar.csv",n,"text/csv")}exportPng(){this.utils.downloadProfileAsImageFile(this.config.clientConfig)}exportLas(){const e=F1(),{profileWidth:t}=Tt(e);this.getProfileByLOD([],0,0,!0,t.value)}getProfileByLOD(e,t,i,n,s){this.profilePoints=this.getEmptyProfilePoints_(),_g.select(".lidarprofile-container .lidar-error").style("visibility","hidden");let r=this.utils.getPytreeLinestring(this.line_),l;_g.select(".lidarprofile-container .lod-info").html("");const u=this.config.serverConfig.max_levels;let d=0;if(t==0)l=this.utils.getNiceLOD(this.line_.getLength(),u);else{const f=this.plot.updateScaleX.domain();r="";for(let v=0;v<e.length;v++)r+=`{${e[v][0]},${e[v][1]}},`;r=r.slice(0,-1),l=this.utils.getNiceLOD(f[1]-f[0],u)}this.config.clientConfig.pointSum=0,this.config.clientConfig.autoWidth?d=l.width:d=this.config.serverConfig.width,d=s;const m=Wa.t("Profile width: ");if(_g.select(".lidarprofile-container .width-info").html(`${m} ${d}m`),n)this.queryPytree_(void 0,void 0,r,t,d,!0);else for(let f=0;f<l.maxLOD;f++)f==0?(this.queryPytree_(i,this.config.serverConfig.initialLOD,r,t,d,!1),f+=this.config.serverConfig.initialLOD-1):this.queryPytree_(i+f,i+f+1,r,t,d,!1)}queryPytree_(e,t,i,n,s,r){if(!this.config)throw new Error("Missing config");if(!this.config.serverConfig)throw new Error("Missing config.serverConfig");this.map.getViewport().style.cursor="wait",document.body.style.cursor="wait";const l=_g.select(".lidarprofile-container .lod-info");if(this.config.serverConfig.debug){let f=l.html();const v=Wa.t("Loading LOD: ");f+=`${v} ${e}-${t}...<br>`,l.html(f)}const u=this.config.serverConfig.default_point_cloud,d=r?1:0,m={method:"GET",headers:{"Content-Type":"text/plain; charset=x-user-defined"},responseType:"arraybuffer"};if(r){const f=`https://map.geoportail.lu/profile/get?width=${s}&coordinates=${i}&pointCloud=${u}&attributes=&getLAS=${d}`;fetch(f,m).then(v=>v.blob()).then(v=>{const w=window.URL.createObjectURL(v),S=document.createElement("a");S.style.display="none",S.href=w,S.download="output.las",document.body.appendChild(S),S.click(),window.URL.revokeObjectURL(w)}).finally(()=>{this.map.getViewport().style.cursor="",document.body.style.cursor=""})}else{let f=`https://map.geoportail.lu/profile/get?minLOD=${e}&maxLOD=${t}&width=${s}&coordinates=${i}&pointCloud=${u}&attributes=&getLAS=${d}`;(e===void 0||t===void 0)&&(f=`https://map.geoportail.lu/profile/get?width=${s}&coordinates=${i}&pointCloud=${u}&attributes=&getLAS=${d}`),fetch(f,m).then(v=>v.arrayBuffer()).then(v=>{if(!this.config)throw new Error("Missing config");if(!this.config.serverConfig)throw new Error("Missing config.serverConfig");if(this.config.serverConfig.debug){let w=l.html();const S=Wa.t("LOD: "),T=Wa.t("loaded");w+=`${S} ${e}-${t} ${T}<br>`,l.html(w)}this.processBuffer_(v,n)}).catch(v=>{throw`Error on pytree query: ${v.message}`}).finally(()=>{this.map.getViewport().style.cursor="",document.body.style.cursor=""})}}processBuffer_(e,t){const i=_g.select(".lidarprofile-container .lidar-error"),s=new Int32Array(e,0,4)[0],r=new Uint8Array(e,4,s);let l="";for(let G=0;G<r.length;G++)l+=String.fromCharCode(r[G]);try{JSON.parse(l)}catch{if(!this.isPlotSetup_){const P=_g.select(".lidarprofile-container .lidar-canvas"),F=P.node();if(F&&F instanceof HTMLCanvasElement){const N=F.getContext("2d");N&&N.clearRect(0,0,F.getBoundingClientRect().width,F.getBoundingClientRect().height),P.selectAll("*").remove();const V=this.getHTMLError_();i.style("visibility","visible"),i.html(V)}}return}i.style("visibility","hidden");const u=JSON.parse(l);this.config.clientConfig.pointSum+=u.points,this.config.clientConfig.pointSum>this.config.serverConfig.max_point_number&&console.warn("Number of points is higher than Pytree configuration max value !");const d=u.pointAttributes,m=[];for(let G=0;G<d.length;G++)this.config.serverConfig.point_attributes[d[G]]!=null&&m.push(this.config.serverConfig.point_attributes[d[G]]);const f=u.scale;if(u.points<3)return;const v=this.getEmptyProfilePoints_(),w=u.bytesPerPoint,S=e.slice(4+s);for(let G=0;G<u.points;G++){const P=w*G,F=new DataView(S,P,w);let N=0;for(let V=0;V<m.length;V++){if(m[V].value=="POSITION_PROJECTED_PROFILE"){const te=F.getUint32(N,!0)*f;v.distance.push(Math.round(100*(t+te))/100),this.profilePoints.distance.push(Math.round(100*(t+te))/100)}else if(m[V].value=="CLASSIFICATION"){const K=F.getUint8(N);v.classification.push(K),this.profilePoints.classification.push(K)}else if(m[V].value=="INTENSITY"){const K=F.getUint8(N);v.intensity.push(K),this.profilePoints.intensity.push(K)}else if(m[V].value=="COLOR_PACKED"){const K=F.getUint8(N),te=F.getUint8(N+1),J=F.getUint8(N+2);v.color_packed.push([K,te,J]),this.profilePoints.color_packed.push([K,te,J])}else if(m[V].value=="POSITION_CARTESIAN"){const K=F.getInt32(N,!0)*f+u.boundingBox.lx,te=F.getInt32(N+4,!0)*f+u.boundingBox.ly,J=F.getInt32(N+8,!0)*f+u.boundingBox.lz;v.coords.push([K,te]),v.altitude.push(J),this.profilePoints.altitude.push(J),this.profilePoints.coords.push([K,te])}N=N+m[V].bytes}}const T=[0,this.line_.getLength()],M=[this.utils.arrayMin(v.altitude),this.utils.arrayMax(v.altitude)];this.isPlotSetup_||(this.plot.setupPlot(T,M),this.isPlotSetup_=!0),this.plot.drawPoints(v)}getHTMLError_(){const e=Wa.t("Lidar profile service error"),t=Wa.t("It might be offline"),i=Wa.t("Or did you attempt to draw a profile outside data extent?"),n=Wa.t("Or did you attempt to draw such a small profile that no point was returned?");return`
      <div class="lidarprofile-error">
      <p class="bold">${e}</p>
      <p>${t}</p>
      <p>${i}</p>
      <p>${n}</p>
    `}updateData(){jg(this.updateData_.bind(this),200)()}updateData_(){const e=this.plot.updateScaleX.domain(),t=this.utils.clipLineByMeasure(this.line_,e[0],e[1]),i=this.lidarBuffer.getSource();i&&(i.clear(),i.addFeature(t.bufferGeom)),this.lidarBuffer.setStyle(t.bufferStyle);const n=e[1]-e[0],s=this.utils.getNiceLOD(n,this.config.serverConfig.max_levels),r=.2;if(Math.abs(e[0]-this.plot.previousDomainX[0])<r&&Math.abs(e[1]-this.plot.previousDomainX[1])<r)this.plot.drawPoints(this.profilePoints);else if(s.maxLOD<=this.config.serverConfig.initialLOD)this.plot.drawPoints(this.profilePoints);else{const l=F1(),{profileWidth:u}=Tt(l);this.getProfileByLOD(t.clippedLine,t.distanceOffset,0,!1,u.value)}this.plot.previousDomainX=e}clearMeasure(){this.measure&&this.measure.clearMeasure()}setMeasureActive(){this.measure&&(this.clearMeasure(),this.measure.setMeasureActive())}}let cs;function ON(){const a=_i(),e=F1(),{drawLidarActive:t,currentProfileFeature:i,profileWidth:n}=Tt(e),{lidarOpen:s}=Tt(a);let r;const l=new aE({type:"LineString"}),u=new Vi({fill:new wn({color:"rgba(255,204,51,0.5)"}),stroke:new mn({color:"rgba(255,204,51,0.5)",width:4,lineCap:"square"})}),d=new eo({source:new Qo,zIndex:1001});function m(){r=vi().getOlMap(),cs=new NIe,cs.init(e.lidarConfig),Ut(s,J=>{if(J)t.value=!0;else{t.value=!1;const ne=d.getSource();ne&&ne.clear()}}),Ut(()=>i.value,J=>{const ne=d.getSource();ne&&(ne.clear(),J&&w(J.getGeometry()))}),Ut(()=>n.value,()=>{const J=d.getSource();J&&(J.clear(),i.value&&i.value&&w(i.value.getGeometry()))}),l.setActive(!1),Ut(t,J=>{l.setActive(J)}),r.addInteraction(l),r.addLayer(d),d.setStyle(u),ba(l,"drawstart",J=>Sm.add(r,J)),ba(l,"drawend",J=>{f(J)}),ba(document,"keyup",J=>{v(J)})}function f(J){l.finishDrawing(),t.value=!1,J.stopPropagation(),i.value=J.feature,M()}function v(J){J.key==="Escape"&&(l.finishDrawing(),l.setActive(!1))}function w(J){const ne=J.getCoordinates();for(let se=0;se<ne.length-1;se++){const de=kr(ne[se],r.getView().getProjection(),"EPSG:2169"),_e=kr(ne[se+1],r.getView().getProjection(),"EPSG:2169"),ce=S(de,_e,n.value/2).transform("EPSG:2169",r.getView().getProjection()),Ie=new kn({geometry:ce});d.getSource().addFeature(Ie)}}function S(J,ne,se){const[de,_e]=J,[Se,ce]=ne,Ie=(Se-de)/(ce-_e),he=Math.sqrt(Math.pow(se,2)/(Math.pow(Ie,2)+1)),we=-Ie*he,Oe=de+he,Ye=_e+we,at=Se-he,yt=ce-we,De=de-he,jt=_e-we,pa=Se+he,$t=ce+we;return new Au([[[Oe,Ye],[De,jt],[at,yt],[pa,$t],[Oe,Ye]]])}function T(){cs.clearBuffer(),cs.resetPlot(),cs.getProfileByLOD([],0,e.lidarConfig.serverConfig.minLOD,!1,n.value)}function M(){cs.resetPlot(),cs.clearBuffer(),cs.setLine(i.value.clone().getGeometry().transform("EPSG:3857","EPSG:2169")),cs.getProfileByLOD([],0,e.lidarConfig.serverConfig.minLOD,!1,n.value)}function G(){cs.exportCsv()}function P(){cs.exportPng()}function F(){cs.exportLas()}function N(){const J=i.value;return!!J&&typeof J.getGeometry=="function"&&J.getGeometry()&&J.getGeometry().getType&&J.getGeometry().getType()==="LineString"}function V(){cs.resetPlot(),cs.updateData()}function K(){cs.clearMeasure(),cs.setMeasureActive()}function te(){cs.clearMeasure()}return{drawInteraction:l,drawLidarActive:t,resetPlot:T,lidarManager:cs,hasLineFeature:N,exportCsv:G,exportPng:P,exportLas:F,init:m,updateData:V,setMeasureActive:K,clearMeasure:te}}const FIe={class:"lidarprofile-container"},DIe={class:"lidar-flex"},VIe={class:"lidar-legend p-2.5 bg-primary text-white"},ZIe={class:"export-tools"},zIe=["disabled"],UIe=["disabled"],HIe=["disabled"],XIe=["disabled"],qIe=["disabled"],YIe={key:0,class:"lux-alert-info"},KIe={class:"lidarprofile"},jIe={class:"lidar-svg",style:{fill:"#ffff00",position:"absolute","z-index":"1"}},$Ie=$e({__name:"lidar-graph-panel",setup(a){const{toggleLidarOpen:e}=_i(),t=F1(),{measureActive:i}=Tt(t),{t:n}=wt(),s=ON();function r(){s.exportCsv()}function l(){s.exportPng()}function u(){s.exportLas()}function d(){i.value=!i.value,i.value?m():f()}function m(){s.setMeasureActive()}function f(){i.value=!1,s.clearMeasure()}return(v,w)=>(U(),$("div",FIe,[W("div",{class:"close",onClick:w[0]||(w[0]=S=>k(e)(!1))},""),W("div",DIe,[W("div",VIe,[W("div",ZIe,[W("div",null,[W("button",{class:"lux-btn mt-3",disabled:!(k(s)&&k(s).hasLineFeature()),onClick:r},q(k(n)("Export CSV")),9,zIe),W("button",{class:"lux-btn mt-3",disabled:!(k(s)&&k(s).hasLineFeature()),onClick:l},q(k(n)("Export PNG")),9,UIe),W("button",{class:"lux-btn mt-3",disabled:!(k(s)&&k(s).hasLineFeature()),onClick:u},q(k(n)("Export LAS")),9,HIe),W("div",null,[W("p",null,[W("button",{class:Pa(["lux-btn mt-3",{active:k(i)}]),disabled:!(k(s)&&k(s).hasLineFeature()),onClick:d},q(k(n)("Take measure")),11,XIe),W("button",{class:"lux-btn mt-3",onClick:f,disabled:!(k(s)&&k(s).hasLineFeature())},w[1]||(w[1]=[W("span",{class:"fa fa-eraser"},null,-1)]),8,qIe)]),k(i)?(U(),$("p",YIe,[Jt(q(k(n)("Measure distances on the profile below."))+" ",1),W("em",null,q(k(n)("(Deactivates zoom and pan on the profile!)")),1)])):Ae("",!0)])])]),w[2]||(w[2]=W("hr",{style:{"margin-top":"10px"}},null,-1)),w[3]||(w[3]=W("div",{class:"width-info"},null,-1)),w[4]||(w[4]=W("div",{class:"lod-info"},null,-1)),w[5]||(w[5]=W("div",{class:"lidar-info poi-feature"},null,-1))]),W("div",KIe,[w[6]||(w[6]=W("div",{class:"lidar-error"},null,-1)),w[7]||(w[7]=W("canvas",{class:"lidar-canvas"},null,-1)),(U(),$("svg",jIe))])])]))}});const JIe=hr($Ie,[["__scopeId","data-v-07412ff6"]]),QIe={class:"lux-menu-popup"},eCe=["aria-label","aria-labelledby"],PN=$e({__name:"menu-popup",props:{items:{},direction:{},ariaLabel:{},ariaLabelledby:{}},setup(a){const e=a,t=Di(!1),i=Fe(null),n=Fe(null);function s(u){u.stopPropagation(),r()}function r(u){t.value=u??!t.value}function l(){r(!1)}return In(()=>document.addEventListener("click",l)),es(()=>document.removeEventListener("click",l)),Ut(t,u=>{if(!u)return;const d=i.value,m=n.value,f=d.getBoundingClientRect(),v=e.direction==="down"?f.bottom:f.top-m.offsetHeight;m.style.top=`${v}px`,m.style.left=`${f.left+f.width-m.offsetWidth}px`}),(u,d)=>(U(),$("div",QIe,[W("button",{onClick:s,ref_key:"btnElement",ref:i},[Xa(u.$slots,"default")],512),(U(),Gt(Kw,{to:"body"},[W("ul",{"aria-label":u.ariaLabel,"aria-labelledby":u.ariaLabelledby,class:Pa(["lux-menu-popup-list",t.value?"":"invisible"]),ref_key:"ddElement",ref:n,role:"menu"},[(U(!0),$(Ot,null,xi(e.items,m=>(U(),$("li",{key:m.label},[Xa(u.$slots,"item",{item:m},()=>[Jt(q(m.label),1)])]))),128))],10,eCe)]))]))}}),BN=$e({__name:"menu-popup-item",props:{item:{}},emits:["click"],setup(a,{emit:e}){const t=a,i=e;function n(){i("click",t.item)}return(s,r)=>(U(),$("button",{class:"lux-dropdown-list-item",onClick:n},[Xa(s.$slots,"default",{},()=>[Jt(q(s.item.label),1)])]))}}),tCe=$e({__name:"feature-menu-popup",setup(a){const{t:e}=wt(),t=$s("feature");function i(s){eE.export(t.map,s,[t],t.label,!0)}let n=[{label:"Exporter un GPX",action:()=>i("gpx")},{label:"Exporter un KML",action:()=>i("kml")},{label:"Exporter un Shapefile",action:()=>i("shapefile")}];return(t==null?void 0:t.featureType)==="drawnLine"&&(n=[...n,{label:"Continuer la ligne",action:()=>alert("TODO: Continuer la ligne (!!!ne pas oublier de unset profileData)")},{label:"Changer sens de la ligne",action:()=>alert("TODO: Draw feature click drawingMenuOptions")}]),(t==null?void 0:t.featureType)==="drawnCircle"&&(n=[...n,{label:"Crer cercle concentrique",action:()=>alert("TODO: Draw feature click drawingMenuOptions")}]),(s,r)=>(U(),Gt(PN,{"data-cy":"featMenuPopup",items:k(n),direction:"up",ariaLabel:k(e)("Drawings menu")},{item:Ht(({item:l})=>[lt(BN,{"data-cy":"featMenuPopupItem",item:l,onClick:()=>l.action&&l.action()},{default:Ht(()=>[Jt(q(k(e)(l.label)),1)]),_:2},1032,["item","onClick"])]),default:Ht(()=>[r[0]||(r[0]=W("i",{class:"fa-solid fa-square-caret-down hover:text-tertiary"},null,-1))]),_:1},8,["items","ariaLabel"]))}}),Sk=$e({__name:"feature-confirm-delete",setup(a){const{t:e}=wt();return(t,i)=>(U(),$(Ot,null,[Jt(q(k(e)("tes-vous certain de vouloir effacer cet lment de la carte ?"))+" ",1),Xa(t.$slots,"footer")],64))}}),Ak=$e({__name:"feature-edit-info",setup(a){const{t:e}=wt(),t=$s("feature");return(i,n)=>(U(),$(Ot,null,[Jt(q(k(e)("Modification des informations"))+" ",1),k(t)?La((U(),$("input",{key:0,"data-cy":"featureLabelEdit",type:"text",class:"form-control block mt-2 mb-4","onUpdate:modelValue":n[0]||(n[0]=s=>k(t).label=s)},null,512)),[[Hr,k(t).label]]):Ae("",!0),k(t)?La((U(),$("textarea",{key:1,rows:"3",class:"form-control block w-full","onUpdate:modelValue":n[1]||(n[1]=s=>k(t).description=s)},null,512)),[[Hr,k(t).description]]):Ae("",!0),Xa(i.$slots,"footer")],64))}}),aCe={class:"flex"},iCe=["min","max","name","step"],nCe=["min","max","name","step"],M2=$e({__name:"range-input",props:{min:{default:0},max:{default:10},step:{default:1},value:{default:0},name:{default:"range"}},emits:["change"],setup(a){const t=Fe(a.value);return(i,n)=>(U(),$("div",aCe,[La(W("input",{type:"range",class:"m-2.5 w-16 h-[5px] rounded-lg appearance-none cursor-pointer",min:i.min,max:i.max,name:`range-${i.name}`,step:i.step,"onUpdate:modelValue":n[0]||(n[0]=s=>t.value=s),onInput:n[1]||(n[1]=s=>i.$emit("change",t.value))},null,40,iCe),[[Hr,t.value,void 0,{number:!0}]]),La(W("input",{type:"number",class:"w-12",min:i.min,max:i.max,name:i.name,step:i.step,"onUpdate:modelValue":n[2]||(n[2]=s=>t.value=s),onChange:n[3]||(n[3]=s=>i.$emit("change",t.value))},null,40,nCe),[[Hr,t.value]])]))}}),rCe=$e({__name:"feature-edit-style-circle",props:{feature:{}},setup(a){return(e,t)=>(U(),$(Ot,null,[Xa(e.$slots,"title"),Xa(e.$slots,"color"),Xa(e.$slots,"lineWidth"),Xa(e.$slots,"transparency"),Xa(e.$slots,"footer")],64))}}),sCe=$e({__name:"feature-edit-style-point",props:{feature:{}},setup(a){const e=Fe(!1);function t(){e.value=!1}return(i,n)=>e.value?Xa(i.$slots,"symbolIcon",{key:1,closeEditIcon:t},()=>[Xa(i.$slots,"symbolcolor")]):(U(),$(Ot,{key:0},[Xa(i.$slots,"title"),Xa(i.$slots,"color"),Xa(i.$slots,"styleSymbol",{openEditIcon:()=>e.value=!0}),Xa(i.$slots,"size",{maxsize:900}),Xa(i.$slots,"angle"),Xa(i.$slots,"footer")],64))}}),oCe=$e({__name:"feature-edit-style-line",props:{feature:{}},setup(a){return(e,t)=>(U(),$(Ot,null,[Xa(e.$slots,"title"),Xa(e.$slots,"color"),Xa(e.$slots,"lineWidth"),Xa(e.$slots,"style"),Xa(e.$slots,"orientation"),Xa(e.$slots,"footer")],64))}}),lCe=$e({__name:"feature-edit-style-polygon",props:{feature:{}},setup(a){return(e,t)=>(U(),$(Ot,null,[Xa(e.$slots,"title"),Xa(e.$slots,"color"),Xa(e.$slots,"lineWidth"),Xa(e.$slots,"transparency"),Xa(e.$slots,"footer")],64))}}),uCe=$e({__name:"feature-edit-style-label",props:{feature:{}},setup(a){return(e,t)=>(U(),$(Ot,null,[Xa(e.$slots,"title"),Xa(e.$slots,"color"),Xa(e.$slots,"size",{maxsize:40}),Xa(e.$slots,"angle"),Xa(e.$slots,"footer")],64))}}),cCe=$e({__name:"feature-edit-linestyle-item",props:{linestyle:{}},emits:["changeLinestyle"],setup(a,{emit:e}){const{t}=wt(),i=e,n=$s("feature");function s(r){i("changeLinestyle",r)}return(r,l)=>(U(),$("button",{class:Pa(`lux-btn-grey${k(n).featureStyle.linestyle===r.linestyle?" pressed":""}`),onClick:l[0]||(l[0]=u=>s(r.linestyle))},q(k(t)(k(rse)(r.linestyle))),3))}}),dCe=["cx","cy","r","fill"],NN=$e({__name:"circleSymbol",props:{radius:{default:9},fillColor:{default:"red"}},setup(a){const t=a.radius*2;return(i,n)=>(U(),$("svg",{height:t,width:t},[W("circle",{cx:i.radius,cy:i.radius,r:i.radius,fill:i.fillColor},null,8,dCe)]))}}),hCe=["height","width"],_Ce=["fill"],FN=$e({__name:"squareSymbol",props:{fillColor:{default:"red"},height:{default:18},width:{default:18}},setup(a){return(e,t)=>(U(),$("svg",{height:e.height,width:e.width},[W("rect",{height:"100%",width:"100%",fill:e.fillColor},null,8,_Ce)],8,hCe))}}),mCe=["height","width"],pCe=["y","font-size","fill"],DN=$e({__name:"crossSymbol",props:{fillColor:{default:"red"},fontSize:{default:42},height:{default:18},width:{default:18}},setup(a){return(e,t)=>(U(),$("svg",{height:e.height,width:e.width},[W("text",{x:"1",y:e.height+2,"font-size":e.fontSize,fill:e.fillColor},"+",8,pCe)],8,mCe))}}),gCe=["height","width"],fCe=["fill"],VN=$e({__name:"triangleSymbol",props:{fillColor:{default:"red"},size:{default:18}},setup(a){const e=a,t=e.size/2,i=`0,${e.size} ${t},0 ${e.size},${e.size}`;return(n,s)=>(U(),$("svg",{height:n.size,width:n.size},[W("polygon",{points:i,fill:n.fillColor},null,8,fCe)],8,gCe))}}),yCe={class:"flex gap-2 items-center mt-1 mb-2"},bCe={class:"font-bold block"},vCe=["src"],xCe=$e({__name:"feature-edit-style-symbol",emits:["clickSymbolIcon"],setup(a){const e="https://migration.geoportail.lu/mymaps/symbol",{t}=wt(),i=$s("feature"),n={circle:NN,square:FN,cross:DN,triangle:VN};return(s,r)=>(U(),$("div",yCe,[W("label",bCe,q(k(t)("Symbol")),1),k(i).featureStyle.symbolId?(U(),$("button",{key:0,class:"lux-btn items-center",onClick:r[0]||(r[0]=l=>s.$emit("clickSymbolIcon")),"data-cy":"featStyleSymbolEdit"},[W("img",{class:"symbol-style max-h-10",src:`${k(e)}/${k(i).featureStyle.symbolId}`},null,8,vCe)])):(U(),$("button",{key:1,class:"lux-btn items-center flex gap-2",onClick:r[1]||(r[1]=l=>s.$emit("clickSymbolIcon")),"data-cy":"featStyleSymbolEdit"},[Jt(q(k(t)("Symbole"))+" ",1),k(i).featureStyle.shape?(U(),Gt(z1(n[k(i).featureStyle.shape]),{key:0,fillColor:k(i).featureStyle.color},null,8,["fillColor"])):Ae("",!0)]))]))}}),ZN="https://migration.geoportail.lu/mymaps/symbols",wCe="https://migration.geoportail.lu/mymaps",ICe="http://migration.geoportail.lu/mymaps/upload_symbol";let am,im;async function CCe(a=!1){return(!(am!=null&&am.results)||a)&&(am=await(await u_(ZN,{symboltype:"public"},"GET")).json()),am==null?void 0:am.results}async function SCe(a=!1){return(!(im!=null&&im.results)||a)&&(im=await(await u_(ZN,{symboltype:"us"},"GET")).json()),im==null?void 0:im.results}async function ACe(a){const e=new FormData;return e.append("file",a),await u_(ICe,e,"POST")}const TCe=["placeholder"],ECe=["id","title","onClick"],MCe={class:"w-12"},LCe=["src"],RCe={class:"break-all"},kCe=$e({__name:"feature-edit-symbol-list",props:{symbols:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,{t:n}=wt(),s=Fe(""),r=St(()=>s.value?t.symbols.filter(u=>u.name.includes(s.value)):t.symbols);function l(u){i("change",u)}return(u,d)=>(U(),$("div",null,[La(W("input",{"data-cy":"featStyleSymbolFilterList",class:"text-white w-full placeholder-white border-[1px] border-gray-300 mb-2",type:"text",placeholder:k(n)("Rechercher un symbole"),"onUpdate:modelValue":d[0]||(d[0]=m=>s.value=m)},null,8,TCe),[[Hr,s.value,void 0,{trim:!0}]]),Jt(" "+q(k(n)("Symbole"))+" ",1),W("ul",null,[(U(!0),$(Ot,null,xi(r.value,m=>(U(),$("li",{key:m.id,class:"border-b-[1px] border-b-gray-300"},[W("button",{id:m.id.toString(),class:"leading-5 p-1 items-center flex hover:bg-slate-100 w-full text-left",title:m.name,onClick:()=>l(m.id),"data-cy":"featStyleSymbolIcon"},[W("span",MCe,[W("img",{class:"max-h-10",src:`${k(wCe)}${m.url}`},null,8,LCe)]),W("span",RCe,q(m.name),1)],8,ECe)]))),128))])]))}}),WCe={class:"border-b-gray-300 border-b-[1px] mb-2"},GCe=["data-cy","onClick"],OCe={class:"flex gap-1 my-2"},PCe=["onClick","data-cy"],BCe={class:"text-right mt-3"};var zN=(a=>(a.configurables="Configurables",a.mySymbols="Mes symboles",a.publics="Publics",a))(zN||{});const NCe=$e({__name:"feature-edit-symbol-icon",emits:["close","changeSymbolIcon","changeSymbolShape"],setup(a,{emit:e}){const t=e,{t:i}=wt(),{addNotification:n}=Ls(),s=Mc(),r=$s("feature"),l={circle:NN,square:FN,cross:DN,triangle:VN},u=Fe("Configurables"),d=Fe(void 0),m=Fe([]);Ut(u,async S=>{if(S==="Mes symboles"||S==="Publics")try{m.value=await f(S==="Mes symboles")}catch{m.value=[]}}),In(()=>{r.featureStyle.symbolId&&(u.value=r.featureStyle.symboltype==="us"?"Mes symboles":"Publics")});async function f(S=!1,T=!1){const M=S?await SCe(T):await CCe(T);return M.sort((G,P)=>G.name.localeCompare(P.name)),M}async function v(){var S;if((S=d.value)!=null&&S.files&&d.value.files[0]){const T=d.value.files[0];try{await ACe(T),m.value=await f(!0,!0)}catch{n(i("Error while trying to upload new symbol."),on.ERROR)}}}function w(S){t("changeSymbolShape",S)}return(S,T)=>(U(),$(Ot,null,[Jt(q(k(i)("Veuillez choisir un symbole dans une des catgories"))+" ",1),W("div",WCe,[(U(),$(Ot,null,xi(zN,(M,G)=>(U(),$(Ot,{key:G},[G==="mySymbols"&&!k(s).isAuthenticated()?Ae("",!0):(U(),$("button",{key:0,"data-cy":`featStyleSymbolTab${G==="mySymbols"?"_private":""}`,onClick:()=>u.value=M,class:Pa(["lux-tab",{active:u.value===M}])},q(k(i)(M)),11,GCe))],64))),64))]),u.value==="Configurables"?(U(),$(Ot,{key:0},[W("div",OCe,[(U(!0),$(Ot,null,xi(Object.keys(l),M=>(U(),$("button",{key:M,class:"lux-btn p-2 rounded-sm border-gray-600",onClick:G=>w(M),"data-cy":`featStyleSymbol_${M}`},[(U(),Gt(z1(l[M]),{fillColor:k(r).featureStyle.color},null,8,["fillColor"]))],8,PCe))),128))]),Xa(S.$slots,"symbolcolor")],64)):Ae("",!0),u.value==="Publics"||u.value==="Mes symboles"?(U(),Gt(kCe,{key:1,symbols:m.value,class:"max-h-80 overflow-y-auto",onChange:T[0]||(T[0]=M=>S.$emit("changeSymbolIcon",`${M}`,u.value==="Mes symboles"?"us":"public"))},null,8,["symbols"])):Ae("",!0),W("div",BCe,[u.value==="Mes symboles"?(U(),$(Ot,{key:0},[W("input",{accept:"image/*",ref_key:"fileInput",ref:d,type:"file",id:"file",hidden:"",onChange:v},null,544),W("button",{class:"lux-btn mr-2",onClick:T[1]||(T[1]=()=>{var M;return(M=d.value)==null?void 0:M.click()})},q(k(i)("Importer un symbole")),1)],64)):Ae("",!0),W("button",{class:"lux-btn",onClick:T[2]||(T[2]=()=>S.$emit("close")),"data-cy":"featClosePopup"},q(k(i)("Fermer")),1)])],64))}}),FCe={class:"flex gap-1 items-center"},DCe={class:"font-bold block",for:"color"},VCe={class:"md:w-2/3"},ZCe=["value"],zCe={class:"flex gap-1 items-center mt-1"},UCe={class:"font-bold block",for:"size"},HCe={key:0,class:"flex gap-1 items-center mt-1 mb-2"},XCe={class:"font-bold block",for:"angle"},qCe={class:"flex gap-1 items-center mt-1 mb-2","data-cy":"featStyleLineStyle"},YCe={class:"font-bold block"},KCe={class:"flex gap-1"},jCe={class:"flex gap-1 items-center"},$Ce={class:"font-bold block",for:"color"},JCe={class:"md:w-2/3"},QCe=["value"],eSe={class:"flex gap-1 items-center mt-1"},tSe={class:"font-bold block",for:"stroke"},aSe={class:"flex gap-1 items-center mt-1"},iSe={class:"font-bold block",for:"transparency"},nSe={class:"flex gap-2 items-center mt-1 mb-2"},rSe={class:"font-bold block",for:"showOrientation"},sSe=["checked"],oSe={class:"flex gap-1 items-center mt-1 mb-2"},Tk=$e({__name:"feature-edit-style",setup(a){const{t:e}=wt(),t=$s("feature"),i=St(()=>!(t.featureType==="drawnPoint"&&t.featureStyle.shape==="circle")),n={FeatureEditStyleCircle:rCe,FeatureEditStyleLine:oCe,FeatureEditStylePoint:sCe,FeatureEditStylePolygon:lCe,FeatureEditStyleLabel:uCe},s=["plain","dashed","dotted"],r=St(()=>t==null?void 0:t.featureType.replace("drawn","FeatureEditStyle"));function l(G){t.featureStyle={...t.featureStyle,color:G.target.value}}function u(G){t.featureStyle={...t.featureStyle,size:G}}function d(G){t.featureStyle={...t.featureStyle,angle:G*Math.PI/180}}function m(G){t.featureStyle={...t.featureStyle,stroke:G}}function f(G){t.featureStyle={...t.featureStyle,opacity:(100-G)/100}}function v(G){t.featureStyle={...t.featureStyle,showOrientation:G.target.checked}}function w(){const G=t.getGeometry().getCoordinates().reverse(),P=new zr(G);t.setGeometry(P)}function S(G){t.featureStyle={...t.featureStyle,linestyle:G}}function T(G,P){t.featureStyle={...t.featureStyle,shape:G,symbolId:void 0,symboltype:void 0},P&&P()}function M(G,P,F){t.featureStyle={...t.featureStyle,symbolId:G,symboltype:P,size:100,shape:void 0},F&&F()}return(G,P)=>(U(),Gt(z1(n[r.value]),{feature:k(t)},{title:Ht(()=>[Jt(q(k(e)("Style your drawing")),1)]),color:Ht(()=>[W("div",FCe,[W("label",DCe,q(k(e)("Color")),1),W("div",VCe,[W("input",{name:"color",class:"cursor-pointer",type:"color",value:k(t).featureStyle.color,onInput:l,"data-cy":"featStyleColor"},null,40,ZCe)])])]),size:Ht(F=>[W("div",zCe,[W("label",UCe,q(k(e)("Size")),1),lt(M2,{name:"size",class:"md:w-2/3",max:F.maxsize,value:k(t).featureStyle.size,"data-cy":"featStyleSize",onChange:u},null,8,["max","value"])])]),angle:Ht(()=>[i.value?(U(),$("div",HCe,[W("label",XCe,q(k(e)("Angle")),1),lt(M2,{name:"angle",class:"md:w-2/3",min:-180,max:180,value:(Math.round(k(t).featureStyle.angle*180/Math.PI)+180)%360-180,onChange:d,"data-cy":"featStyleAngle"},null,8,["value"])])):Ae("",!0)]),style:Ht(()=>[W("div",qCe,[W("label",YCe,q(k(e)("Style")),1),W("div",KCe,[(U(),$(Ot,null,xi(s,(F,N)=>lt(cCe,{key:N,linestyle:F,onChangeLinestyle:S},null,8,["linestyle"])),64))])])]),styleSymbol:Ht(({openEditIcon:F})=>[lt(xCe,{"data-cy":"featStyleSymbol",onClickSymbolIcon:F},null,8,["onClickSymbolIcon"])]),symbolIcon:Ht(({closeEditIcon:F})=>[lt(NCe,{onChangeSymbolIcon:(N,V)=>M(N,V,F),onChangeSymbolShape:N=>T(N,F),onClose:F},{symbolcolor:Ht(()=>[W("div",jCe,[W("label",$Ce,q(k(e)("Color")),1),W("div",JCe,[W("input",{name:"color",class:"cursor-pointer",type:"color",value:k(t).featureStyle.color,onInput:l,"data-cy":"featStyleColor"},null,40,QCe)])])]),_:2},1032,["onChangeSymbolIcon","onChangeSymbolShape","onClose"])]),lineWidth:Ht(()=>[W("div",eSe,[W("label",tSe,q(k(e)("Stroke width")),1),lt(M2,{name:"stroke","data-cy":"featStyleLineWidth",value:k(t).featureStyle.stroke,onChange:m},null,8,["value"])])]),transparency:Ht(()=>[W("div",aSe,[W("label",iSe,q(k(e)("Transparence")),1),lt(M2,{name:"transparency",class:"md:w-2/3","data-cy":"featStyleTransparency",max:100,value:100-k(t).featureStyle.opacity*100,onChange:f},null,8,["value"])])]),orientation:Ht(()=>[W("div",nSe,[W("label",rSe,q(k(e)("Show orientation")),1),W("input",{type:"checkbox",id:"showOrientation",onChange:v,checked:k(t).featureStyle.showOrientation},null,40,sSe)]),W("div",oSe,[W("button",{class:"lux-btn-primary",onClick:w},q(k(e)("Changer sens de la ligne")),1)])]),footer:Ht(()=>[Xa(G.$slots,"footer")]),_:3},8,["feature"]))}}),lSe={class:"flex items-center"},uSe={class:"flex items-center"},cSe=$e({__name:"feature-concentric-circle",setup(a){const{t:e}=wt();return(t,i)=>(U(),$(Ot,null,[Jt(q(k(e)("Veuillez entrer les caractristiques de votre nouveau cercle"))+" ",1),W("div",lSe,[W("span",null,q(k(e)("Rayon:")),1),W("div",uSe,[i[0]||(i[0]=W("input",{class:"form-control block mr-1",type:"text"},null,-1)),W("span",null,q(k(e)("mtres")),1)])]),Xa(t.$slots,"footer")],64))}});function dSe(a,e,t,i){const n=a.getGeometry();(n==null?void 0:n.getType())==="Circle"&&(TB(n,e,t),i.updateDrawnFeature(a))}const hSe={class:"lux-drawing-item-measurements"},_Se={key:0,"data-cy":"featItemLength"},mSe={key:1,"data-cy":"featItemArea"},pSe={key:2,"data-cy":"featItemRadius",class:"flex items-center"},gSe={key:0},fSe={key:1,class:"flex"},ySe={key:3},bSe={"data-cy":"featItemElevation"},vSe=$e({__name:"feature-measurements",props:{isEditingFeature:{type:Boolean}},setup(a){var S,T;const{t:e}=wt(),t=wo(),i=vi().getOlMap(),n=i.getView().getProjection(),s=Fe($s("feature")),r=Fe(((S=s.value)==null?void 0:S.featureType)||""),l=Fe((T=s.value)==null?void 0:T.getGeometry()),u=St(()=>{if(l.value){if(["drawnLine","drawnPolygon"].includes(r.value))return Lw(l.value,n);if(r.value==="drawnCircle")return Wme(l.value,n)}}),d=St(()=>{if(l.value){if(r.value==="drawnPolygon")return AB(l.value);if(r.value==="drawnCircle")return Gme(l.value,n)}}),m=St(()=>l.value&&r.value==="drawnCircle"?Rw(l.value,n):void 0),f=Fe(m.value||0),v=Fe();dr(async()=>{const M=l.value.getCoordinates();l.value&&r.value==="drawnPoint"?v.value?v.value=await oN(M):v.value=await iE(M):v.value=void 0}),dr(()=>{f.value=r.value==="drawnCircle"?parseFloat(Rw(l.value,n).toFixed(2)):0});function w(M){s.value&&dSe(s.value,M,i,t)}return(M,G)=>{const P=wl("format-measure");return U(),$("div",hSe,[u.value?(U(),$("div",_Se,[W("span",null,q(k(e)("Length:"))+"",1),La(W("span",null,null,512),[[P,u.value,void 0,{length:!0}]])])):Ae("",!0),d.value?(U(),$("div",mSe,[W("span",null,q(k(e)("Area:"))+"",1),La(W("span",null,null,512),[[P,d.value,void 0,{area:!0}]])])):Ae("",!0),r.value==="drawnCircle"?(U(),$("div",pSe,[W("span",null,q(k(e)("Rayon:"))+"",1),M.isEditingFeature?(U(),$("div",fSe,[La(W("input",{"data-cy":"featItemInputRadius",class:"form-control block bg-secondary text-white border !border-gray-300",type:"number","onUpdate:modelValue":G[0]||(G[0]=F=>f.value=F),onKeyup:G[1]||(G[1]=Uo(F=>w(f.value),["enter"]))},null,544),[[Hr,f.value]]),W("button",{class:"lux-btn-primary",onClick:G[2]||(G[2]=F=>w(f.value))},q(k(e)("Valider")),1)])):La((U(),$("span",gSe,null,512)),[[P,m.value,void 0,{length:!0}]])])):Ae("",!0),r.value==="drawnPoint"?(U(),$("div",ySe,[W("span",null,q(k(e)("Elevation"))+":",1),La(W("span",bSe,null,512),[[P,v.value,"2",{elevation:!0}]])])):Ae("",!0),r.value==="drawnLine"?(U(),Gt(tE,{key:4,class:"mb-2",feature:s.value},null,8,["feature"])):Ae("",!0)])}}}),xSe={key:1},wSe={class:"flex justify-between items-center mt-1 gap-2"},ISe={"data-cy":"featItemActions"},CSe={class:"flex text-primary items-center gap-1"},SSe={class:"mt-3 text-right"},ASe=$e({__name:"feature-sub-content",props:{isDocked:{type:Boolean},isEditingFeature:{type:Boolean}},emits:["toggleEditFeature","toggleDock","clickDelete","resetInfo","resetStyle","submitEditFeature"],setup(a,{emit:e}){const t=e,{t:i}=wt(),n=$s("feature");let s=n.label,r=n.description,l={...n.featureStyle};const u={FeatureConcentricCircle:cSe,FeatureEditInfo:Ak,FeatureEditStyle:Tk,FeatureConfirmDelete:Sk},d=Fe(void 0);Jw("currentEditCompKey",d);function m(){d.value==="FeatureEditStyle"?(n.selected=!0,t("resetStyle",l)):d.value==="FeatureEditInfo"&&t("resetInfo",s,r),d.value=void 0}function f(){const w=u[d.value];s=n.label,r=n.description,l={...n.featureStyle},w===Sk?t("clickDelete"):w===Ak||w===Tk?(n.selected=!0,t("submitEditFeature")):alert("TODO: Draw feature click onClickValidate()"),d.value=void 0}function v(){n.selected=!1,n.changed(),d.value="FeatureEditStyle"}return(w,S)=>{var T;return d.value?(U(),Gt(z1(u[d.value]),{key:1},{footer:Ht(()=>[W("div",SSe,[W("button",{"data-cy":"featureEditCancel",class:"lux-btn mr-2",onClick:m},q(k(i)("Cancel")),1),W("button",{"data-cy":"featureEditValidate",class:"lux-btn-primary",onClick:f},q(k(i)("Validate")),1)])]),_:1})):(U(),$(Ot,{key:0},[w.isDocked?Ae("",!0):(U(),$("i",{key:0,"data-cy":"featItemDock",class:"fa fa-object-ungroup float-right",role:"button",onClick:S[0]||(S[0]=()=>t("toggleDock"))})),w.isDocked?(U(),$("h6",xSe,q((T=k(n))==null?void 0:T.label),1)):Ae("",!0),S[10]||(S[10]=W("div",{class:"min-h-2"},null,-1)),lt(vSe,{isEditingFeature:w.isEditingFeature},null,8,["isEditingFeature"]),W("div",wSe,[W("div",null,[W("button",{"data-cy":"featItemToggleEdit",class:"lux-btn-primary",onClick:S[1]||(S[1]=M=>t("toggleEditFeature",k(n)))},q(w.isEditingFeature?k(i)("Terminer dition"):k(i)("Editer l'objet")),1)]),W("div",ISe,[W("div",CSe,[W("button",{"data-cy":"featItemActionSearch",class:"hover:text-tertiary",onClick:S[2]||(S[2]=()=>{var M;return(M=k(n))==null?void 0:M.fit()})},S[6]||(S[6]=[W("i",{class:"fa fa-search"},null,-1)])),W("button",{"data-cy":"featItemActionEdit",class:"hover:text-tertiary",onClick:S[3]||(S[3]=()=>d.value="FeatureEditInfo")},S[7]||(S[7]=[W("i",{class:"fa fa-pencil"},null,-1)])),W("button",{"data-cy":"featItemActionStyle",class:"hover:text-tertiary",onClick:S[4]||(S[4]=M=>v())},S[8]||(S[8]=[W("i",{class:"fa fa-paint-brush"},null,-1)])),W("button",{"data-cy":"featItemActionDelete",class:"hover:text-tertiary",onClick:S[5]||(S[5]=()=>d.value="FeatureConfirmDelete")},S[9]||(S[9]=[W("i",{class:"fa fa-trash"},null,-1)])),lt(tCe)])])])],64))}}}),TSe=$e({__name:"map-popup",props:{anchor:{}},emits:["closePopup"],setup(a,{emit:e}){const t=a,i=e,n=vi(),s=Fe(null),r=Di(new X3({autoPan:{animation:{duration:250}}}));return In(()=>{s.value&&(r.value.setElement(s.value),n.getOlMap().addOverlay(r.value))}),dr(()=>{r.value.setPosition(t.anchor)}),(l,u)=>(U(),Gt(Kw,{to:"body"},[W("div",{ref_key:"popupContainer",ref:s,"data-cy":"mapPopup",class:"popup"},[W("button",{class:"fa-sharp fa-solid fa-close float-right mt-2 hover:text-primary",onClick:u[0]||(u[0]=()=>i("closePopup"))}),Xa(l.$slots,"default")],512)]))}});const ESe=$e({__name:"feature-sub-wrapper",props:{isDocked:{type:Boolean}},emits:["closePopup"],setup(a,{emit:e}){const{getFeatCoordinates:t}=EN(),i=e,n=$s("feature"),s=Fe(u());function r(){i("closePopup")}const l=jg(()=>{s.value=u()},1e3);function u(){return JSON.parse(JSON.stringify(t(n)))}return dr(()=>{n!=null&&n.getGeometry()&&t(n)&&l()}),(d,m)=>d.isDocked?(U(),Gt(TSe,{key:0,anchor:s.value,onClosePopup:r},{default:Ht(()=>[Xa(d.$slots,"default")]),_:3},8,["anchor"])):Xa(d.$slots,"default",{key:1})}}),MSe=["aria-expanded","aria-controls"],LSe=["id"],RSe=$e({__name:"feature-item",props:{isDocked:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},feature:{}},emits:["clickDelete","closePopup","toggleFeatureSub","toggleFeatureEdit","toggleDock","submitFeature"],setup(a,{emit:e}){const t=a,i=t.feature,n=e;Jw("feature",t.feature);function s(){n("toggleFeatureSub",Ia(t.feature),!t.isOpen)}function r(){n("toggleFeatureEdit",Ia(t.feature),!t.isEditing)}function l(){n("clickDelete",Ia(t.feature))}function u(f,v){i.label=f,i.description=v}function d(f){i.featureStyle={...f}}function m(){n("submitFeature",t.feature)}return(f,v)=>(U(),$(Ot,null,[W("button",{"data-cy":"featItemName",class:"lux-drawing-item-label flex items-center gap-1","aria-expanded":f.isOpen,"aria-controls":`drawing-item-content-${f.feature.id}`,onClick:s},[v[2]||(v[2]=W("span",{class:"sortable-handle drag-handle fa fa-reorder ui-sortable-handle cursor-move"},null,-1)),W("span",{class:Pa(["lux-icon",{point:f.feature.featureType==="drawnPoint"||f.feature.featureType==="drawnLabel",line:f.feature.featureType==="drawnLine",polygon:f.feature.featureType==="drawnPolygon"||f.feature.featureType==="drawnCircle"}])},null,2),W("span",{class:Pa({selected:f.isOpen})},q(f.feature.label),3)],8,MSe),f.isOpen?(U(),Gt(ESe,{key:0,isDocked:f.isDocked,onClosePopup:v[1]||(v[1]=()=>n("toggleDock"))},{default:Ht(()=>[W("div",{class:"lux-drawing-item-content",id:`drawing-item-content-${f.feature.id}`},[lt(ASe,{isDocked:f.isDocked,isEditingFeature:f.isEditing,onToggleEditFeature:r,onToggleDock:v[0]||(v[0]=()=>n("toggleDock")),onClickDelete:l,onResetInfo:u,onResetStyle:d,onSubmitEditFeature:m},null,8,["isDocked","isEditingFeature"])],8,LSe)]),_:1},8,["isDocked"])):Ae("",!0)],64))}}),kSe={key:0,class:"mx-1 sortable-features"},WSe=["id"],GSe=$e({__name:"draw-panel-features",setup(a){const e=wo(),{activeFeatureId:t,editingFeatureId:i,drawnFeatures:n,featureEditionDocked:s}=Tt(e);function r(d,m){t.value=m?d:void 0,i.value=void 0}function l(d,m){i.value=m?d:void 0}function u(d){const m=[...d].map(f=>f.id);e.reorderFeatures(m)}return In(()=>{I4(document.querySelector(".sortable-features"),{onSort:u})}),(d,m)=>k(n).length?(U(),$("ul",kSe,[(U(!0),$(Ot,null,xi(k(n),(f,v)=>(U(),$("li",{class:"lux-drawing-item",id:`f-${k(Ia)(f)}`,key:v},[lt(RSe,{isDocked:k(s),isEditing:k(i)===k(Ia)(f),isOpen:k(t)===k(Ia)(f),feature:f,onToggleFeatureSub:r,onToggleFeatureEdit:l,onToggleDock:m[0]||(m[0]=()=>s.value=!k(s)),onClosePopup:m[1]||(m[1]=()=>s.value=!1),onClickDelete:m[2]||(m[2]=w=>k(e).removeFeature(w)),onSubmitFeature:w=>k(e).updateDrawnFeature(w)},null,8,["isDocked","isEditing","isOpen","feature","onSubmitFeature"])],8,WSe))),128))])):Ae("",!0)}}),OSe={class:"lux-draw-panel absolute w-[93%]","data-cy":"drawPanel"},PSe={class:"lux-draw-panel-title flex"},BSe={class:"grow"},NSe=$e({__name:"draw-panel",setup(a){const{t:e}=wt(),t=wo(),{drawnFeatures:i}=Tt(t),n=[{label:"Copier dans ma carte",action:()=>alert("TODO: Draw feature click drawingMenuOptions")},{label:"Effacer tous les dessins",action:()=>alert("TODO: Draw feature click drawingMenuOptions")},{label:"Crer une nouvelle carte  partir de ces dessins",action:()=>alert("TODO: Draw feature click drawingMenuOptions")},{label:"Fusionner des lignes",action:()=>alert("TODO: Draw feature click drawingMenuOptions")},{label:"Couper une ligne",action:()=>alert("TODO: Draw feature click drawingMenuOptions")}];return(s,r)=>k(i).length>0?(U(),$(Ot,{key:0},[r[1]||(r[1]=W("hr",{class:"separator my-5"},null,-1)),W("div",OSe,[W("div",PSe,[W("h5",BSe,q(k(e)("Dessins")),1),lt(PN,{"data-cy":"drawPanelMenuPopup",items:n,direction:"down",ariaLabel:k(e)("Drawings menu")},{item:Ht(({item:l})=>[lt(BN,{"data-cy":"drawPanelMenuPopupItem",item:l,onClick:()=>l.action&&l.action()},{default:Ht(()=>[Jt(q(k(e)(l.label)),1)]),_:2},1032,["item","onClick"])]),default:Ht(()=>[r[0]||(r[0]=W("i",{class:"fa-solid fa-square-caret-down hover:text-tertiary"},null,-1))]),_:1},8,["ariaLabel"])]),lt(GSe)])],64)):Ae("",!0)}});const FSe=hr(NSe,[["__scopeId","data-v-6c1ac536"]]),DSe={class:"text-white"},VSe={class:"flex justify-center flex-col items-center"},ZSe=$e({__name:"my-maps-panel",setup(a){const{t:e}=wt(),t=_i();function i(){alert("TODO: clickOpenMap")}function n(){alert("TODO: clickCreateNewMap")}return(s,r)=>(U(),Gt(ap,{"data-cy-value":"myMapsPanel","close-fn":()=>k(t).toggleMyMapsOpen(!1)},{header:Ht(()=>[W("h1",null,q(k(e)("My Maps",{ns:"client"})),1)]),content:Ht(()=>[W("div",DSe,q(k(e)("Create, save and share your own maps.",{ns:"client"})),1),W("div",VSe,[W("button",{class:"lux-btn mt-3",onClick:i},q(k(e)("Ouvrir une carte",{ns:"client"})),1),W("button",{class:"lux-btn mt-3",onClick:n},q(k(e)("Crer une nouvelle carte",{ns:"client"})),1)]),lt(FSe)]),_:1},8,["close-fn"]))}});var _E={},ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.BLANK_URL=ms.relativeFirstCharacters=ms.whitespaceEscapeCharsRegex=ms.urlSchemeRegex=ms.ctrlCharactersRegex=ms.htmlCtrlEntityRegex=ms.htmlEntitiesRegex=ms.invalidProtocolRegex=void 0;ms.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im;ms.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g;ms.htmlCtrlEntityRegex=/&(newline|tab);/gi;ms.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim;ms.urlSchemeRegex=/^.+(:|&colon;)/gim;ms.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g;ms.relativeFirstCharacters=[".","/"];ms.BLANK_URL="about:blank";Object.defineProperty(_E,"__esModule",{value:!0});var bm=_E.sanitizeUrl=void 0,Vs=ms;function zSe(a){return Vs.relativeFirstCharacters.indexOf(a[0])>-1}function USe(a){var e=a.replace(Vs.ctrlCharactersRegex,"");return e.replace(Vs.htmlEntitiesRegex,function(t,i){return String.fromCharCode(i)})}function HSe(a){return URL.canParse(a)}function Ek(a){try{return decodeURIComponent(a)}catch{return a}}function XSe(a){if(!a)return Vs.BLANK_URL;var e,t=Ek(a.trim());do t=USe(t).replace(Vs.htmlCtrlEntityRegex,"").replace(Vs.ctrlCharactersRegex,"").replace(Vs.whitespaceEscapeCharsRegex,"").trim(),t=Ek(t),e=t.match(Vs.ctrlCharactersRegex)||t.match(Vs.htmlEntitiesRegex)||t.match(Vs.htmlCtrlEntityRegex)||t.match(Vs.whitespaceEscapeCharsRegex);while(e&&e.length>0);var i=t;if(!i)return Vs.BLANK_URL;if(zSe(i))return i;var n=i.trimStart(),s=n.match(Vs.urlSchemeRegex);if(!s)return i;var r=s[0].toLowerCase().trim();if(Vs.invalidProtocolRegex.test(r))return Vs.BLANK_URL;var l=n.replace(/\\/g,"/");if(r==="mailto:"||r.includes("://"))return l;if(r==="http:"||r==="https:"){if(!HSe(l))return Vs.BLANK_URL;var u=new URL(l);return u.protocol=u.protocol.toLowerCase(),u.hostname=u.hostname.toLowerCase(),u.toString()}return l}bm=_E.sanitizeUrl=XSe;function zf(a,e,t="f_"){return Object.entries(a).filter(([i])=>i!=="showProfile").map(([i,n])=>({key:t+i,value:n})).sort((i,n)=>e?0:i.key.localeCompare(n.key))}function t_(a){return a.attributes!==void 0&&Object.keys(a.attributes).length>0}function Ii(a,e,t){return t==null&&(t=0),a in e.attributes&&(""+e.attributes[a]).length>t}function Xm(a){return a==null||a.length===0}function Es(a){const e=String(a).toLowerCase();return e.startsWith("http://")||e.startsWith("https://")}function pb(a,e,t){const{key:i}=a;let n=!1;return e==="2407"&&(i==="f_Cl_erosion"||i==="f_Erosion_kl"||i==="f_Erosion_Cl"||i==="f_Erosioun_K")?(t==="fr"&&i==="f_Cl_erosion"||t==="de"&&i==="f_Erosion_kl"||t==="en"&&i==="f_Erosion_Cl"||t==="lb"&&i==="f_Erosioun_K")&&(n=!0):e==="2714"&&(i==="f_LABEL_eng"||i==="f_LC_class_name_fr"||i==="f_LC_class_name_de"||i==="f_LC_class_name")?(t==="fr"&&i==="f_LC_class_name_fr"||t==="de"&&i==="f_LC_class_name_de"||t==="en"&&i==="f_LABEL_eng"||t==="lb"&&i==="f_LC_class_name")&&(n=!0):e==="2444"&&(i==="f_Betriebsform"||i==="f_Forme_d_entreprise"||i==="f_Operation_Form"||i==="f_Form_vun_Geschaeft")?(t==="fr"&&i==="f_Forme_d_entreprise"||t==="de"&&i==="f_Betriebsform"||t==="en"&&i==="f_Operation_Form"||t==="lb"&&i==="f_Form_vun_Geschaeft")&&(n=!0):i.endsWith("_FR")||i.endsWith("_DE")||i.endsWith("_EN")||i.endsWith("_LU")||i.endsWith("_LB")?(t==="fr"&&i.endsWith("_FR")||t==="de"&&i.endsWith("_DE")||t==="en"&&i.endsWith("_EN")||t==="lb"&&(i.endsWith("_LB")||i.endsWith("_LU")))&&(n=!0):n=!0,n}function UN(a){return"fid"in a&&qSe(a.fid)}function qSe(a){return a==null?!1:a.split(",").every(t=>!!t&&t.split("_").length>=2)}function HN(a){return bm(a)}function XN(a,e,t,i){const{i18next:n}=wt();switch(n.language){case"de":return bm(e??a);case"en":return bm(t??a);case"lb":return bm(i??a);case"fr":default:return bm(a)}}function YSe(a,e,t=","){return a.map(i=>i.attributes[e]).join(t)}function Mk(a,e){if(typeof a===void 0)return"";const{t}=wt();return a.map(i=>t(e+"_"+i)).join(", ")}function L2(a){var t;const{themes:e}=Tt(ur());return(t=e.value)==null?void 0:t.some(i=>i.name===a)}const KSe={class:"lux-poi-title","data-cy":"defaultTemplateTitle"},jSe={key:0},$Se=["href"],Ji=$e({__name:"info-feature-layout",props:{layers:{},currentUrl:{},getDirectLink:{type:Function,default:(a,e)=>`${e}&fid=${a.fid}`}},emits:["export"],setup(a){const{t:e}=wt();return(t,i)=>(U(),$(Ot,null,[W("h1",KSe,q(k(e)(t.layers.layerLabel)),1),Xa(t.$slots,"layer-content"),(U(!0),$(Ot,null,xi(t.layers.features,n=>(U(),$("div",{key:n.id,class:"lux-feature-info","data-cy":"defaultTemplateAttributes"},[Xa(t.$slots,"feature-content",{feature:n},()=>[Jt(q(n.id),1)]),k(UN)(n)?(U(),$("div",jSe,[W("a",{"data-cy":"defaultTemplateLink",class:"print:hidden",href:t.getDirectLink(n,t.currentUrl),target:"_blank"},q(k(e)("Lien direct vers cet objet")),9,$Se)])):Ae("",!0)]))),128))],64))}}),JSe=$e({__name:"adresse-template",props:{layers:{},currentUrl:{}},setup(a){return(e,t)=>(U(),Gt(Ji,{layers:e.layers,currentUrl:e.currentUrl},{"feature-content":Ht(({feature:i})=>[W("h4",null,q(i.attributes.num_affaire),1),Jt(" "+q(i.attributes.numero)+", "+q(i.attributes.rue),1),t[0]||(t[0]=W("br",null,null,-1)),Jt(" L-"+q(i.attributes.code_postal)+" "+q(i.attributes.localite),1),t[1]||(t[1]=W("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),QSe=["href"],eAe=["src"],tAe={class:"no-print"},aAe=$e({__name:"aero-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt();return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("h3",null,q(n.attributes.name),1),W("a",{href:n.attributes.path,target:"_blank"},[n.attributes.thumbnail_path?(U(),$("img",{key:0,src:n.attributes.thumbnail_path,alt:"thumbnail",width:"250"},null,8,eAe)):Ae("",!0)],8,QSe),W("span",tAe,q(k(e)("Cliquez dans l'image pour agrandir")),1),i[0]||(i[0]=W("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),iAe=$e({__name:"affaires-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt();return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("h4",null,q(n.attributes.num_affaire),1),W("span",null,q(k(e)("Numero")),1),Jt(" : "+q(n.attributes.num_affaire),1),i[0]||(i[0]=W("br",null,null,-1)),W("span",null,q(k(e)("Numero cadastral")),1),Jt(" : "+q(n.attributes.label),1),i[1]||(i[1]=W("br",null,null,-1)),W("span",null,q(k(e)("Geometre")),1),Jt(" : "+q(n.attributes.geometre),1),i[2]||(i[2]=W("br",null,null,-1)),W("span",null,q(k(e)("Region")),1),Jt(" : "+q(n.attributes.region),1),i[3]||(i[3]=W("br",null,null,-1)),W("span",null,q(k(e)("Type")),1),Jt(" : "+q(k(e)(n.attributes.type)),1),i[4]||(i[4]=W("br",null,null,-1)),W("span",null,q(k(e)("Statut")),1),Jt(" : "+q(k(e)(n.attributes.statut)),1),i[5]||(i[5]=W("br",null,null,-1)),W("span",null,q(k(e)("Date")),1),Jt(" : "+q(n.attributes.date),1),i[6]||(i[6]=W("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),nAe={key:0},rAe={key:1},sAe=$e({__name:"asta-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt();return(t,i)=>{const n=wl("format-measure");return U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:s})=>[W("span",null,q(k(e)("Numero EFA")),1),Jt(" : "+q(s.attributes.code_elem)+q(s.attributes.efa),1),i[3]||(i[3]=W("br",null,null,-1)),s.attributes.surface?(U(),$("div",nAe,[W("span",null,q(k(e)("Surface")),1),Jt(" : "+q(Number(s.attributes.surface).toFixed(1))+" a",1),i[0]||(i[0]=W("br",null,null,-1))])):Ae("",!0),s.attributes.longueur?(U(),$("div",rAe,[W("span",null,q(k(e)("Longueur")),1),i[1]||(i[1]=Jt(" : ")),La(W("span",null,null,512),[[n,s.attributes.longueur,"1",{length:!0}]]),i[2]||(i[2]=W("br",null,null,-1))])):Ae("",!0)]),_:1},8,["layers","currentUrl"])}}}),Kd=$e({__name:"profile-feature-info",props:{feature:{}},emits:["export"],setup(a){const e=a,{t}=wt(),i=vi().getOlMap(),n=St(()=>new Vf(new Bd().readFeature(e.feature,{dataProjection:Kl,featureProjection:i.getView().getProjection()})));return(s,r)=>(U(),$(Ot,null,[lt(tE,{feature:n.value},null,8,["feature"]),W("div",null,[W("button",{class:"lux-feature-info-export",onClick:r[0]||(r[0]=l=>s.$emit("export",{feature:s.feature,format:"kml"}))},q(k(t)("Exporter KMl")),1),W("button",{class:"lux-feature-info-export",onClick:r[1]||(r[1]=l=>s.$emit("export",{feature:s.feature,format:"gpx"}))},q(k(t)("Exporter GPX")),1)])],64))}}),oAe={key:0},lAe={key:0},uAe={key:0},cAe={key:1},dAe=["href"],hAe={key:1},_Ae={key:0},mAe={key:1},pAe={key:2},gAe={key:3},fAe={key:4},yAe={key:5},bAe={key:0},vAe={key:2},xAe=$e({__name:"automatic-sols-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{t:e}=wt();return(t,i)=>{const n=wl("dompurify-html");return U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:s})=>[s.attributes.label?(U(),$("h4",oAe,q(k(e)(s.attributes.label)),1)):Ae("",!0),k(t_)(s)?(U(),$(Ot,{key:1},[(U(!0),$(Ot,null,xi(k(zf)(s.attributes,t.layers.ordered),r=>(U(),$("div",{key:r.key},[!k(Xm)(r.value)&&!r.key.startsWith("f_LC_class_name")&&!r.key.startsWith("f_LABEL_")?(U(),$("span",lAe,[k(Es)(r.value)?Ae("",!0):(U(),$("label",uAe,q(k(e)(r.key))+" : ",1)),k(Es)(r.value)?Ae("",!0):La((U(),$("span",cAe,null,512)),[[n,r.value]]),k(Es)(r.value)?(U(),$("a",{key:2,href:r.value,target:"_blank"},q(k(e)(r.key)),9,dAe)):Ae("",!0)])):Ae("",!0),!k(Xm)(r.value)&&(r.key.startsWith("f_LC_class_name")||r.key.startsWith("f_LABEL_"))?(U(),$("span",hAe,[k(Wa).language=="fr"&&(r.key=="f_LC_class_name_fr"||r.key=="f_LABEL_fr")?(U(),$("label",_Ae,q(k(e)(r.key))+" : ",1)):Ae("",!0),k(Wa).language=="fr"&&(r.key=="f_LC_class_name_fr"||r.key=="f_LABEL_fr")?La((U(),$("span",mAe,null,512)),[[n,r.value]]):Ae("",!0),(k(Wa).language=="de"||k(Wa).language=="lb")&&(r.key=="f_LC_class_name_de"||r.key=="f_LABEL_de")?(U(),$("label",pAe,q(k(e)(r.key))+" : ",1)):Ae("",!0),(k(Wa).language=="de"||k(Wa).language=="lb")&&(r.key=="f_LC_class_name_de"||r.key=="f_LABEL_de")?La((U(),$("span",gAe,null,512)),[[n,r.value]]):Ae("",!0),k(Wa).language=="en"&&(r.key=="f_LC_class_name"||r.key=="f_LABEL_eng")?(U(),$("label",fAe,q(k(e)(r.key))+" : ",1)):Ae("",!0),k(Wa).language=="en"&&(r.key=="f_LC_class_name"||r.key=="f_LABEL_eng")?La((U(),$("span",yAe,null,512)),[[n,r.value]]):Ae("",!0)])):Ae("",!0)]))),128)),t.layers.has_profile?(U(),$("div",bAe,[lt(Kd,{feature:s,onExport:i[0]||(i[0]=r=>t.$emit("export",r))},null,8,["feature"])])):Ae("",!0)],64)):(U(),$("div",vAe,[W("span",null,q(k(e)("Aucune information disponible pour cette couche")),1)]))]),_:1},8,["layers","currentUrl"])}}}),wAe=$e({__name:"batiments-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt();return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("span",null,q(k(e)("Type")),1),i[0]||(i[0]=Jt(" : ")),W("span",null,q(k(e)("bat_"+n.attributes.type)),1),i[1]||(i[1]=W("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),IAe=["src"],CAe=$e({__name:"bus-wo-title-template",props:{layers:{},currentUrl:{}},setup(a){const e="https://migration.geoportail.lu/getbuswidget";return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("h3",null,q(n.attributes.name),1),W("iframe",{class:"-ml-3.5",title:"bus widget",height:"300",width:"500",frameborder:"0",src:`${k(e)}${k(XN)(`?lang=fr&id=${n.attributes.extid}`,`?lang=de&id=${n.attributes.extid}`,`?lang=en&id=${n.attributes.extid}`,`?lang=fr&id=${n.attributes.extid}`)}`},null,8,IAe)]),_:1},8,["layers","currentUrl"]))}}),SAe=["src"],AAe=$e({__name:"bus-template",props:{layers:{},currentUrl:{}},setup(a){const e="https://migration.geoportail.lu/getbuswidget";return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("h3",null,q(n.attributes.name),1),W("iframe",{class:"-ml-3.5",title:"bus widget",height:"300",width:"500",frameborder:"0",src:`${k(e)}${k(XN)(`?lang=fr&id=${n.attributes.extid}`,`?lang=de&id=${n.attributes.extid}`,`?lang=en&id=${n.attributes.extid}`,`?lang=fr&id=${n.attributes.extid}`)}`},null,8,SAe)]),_:1},8,["layers","currentUrl"]))}}),TAe={class:"lux-poi-title"},EAe={class:"lux-feature-info"},MAe={class:"poi-feature"},LAe={class:"casipo-form-container"},RAe={class:"casipo-mail"},kAe={class:"casipo-checkbox"},WAe=["innerHTML"],GAe=$e({__name:"casipo-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{authenticated:e,currentUser:t}=Tt(Mc()),n=a.layers,{addNotification:s}=Ls(),r=Fe(""),l=St(()=>{var w;return e.value&&((w=t.value)==null?void 0:w.mail)||""});r.value=l.value;const u=Fe(!1),{t:d}=wt(),m="https://migration.geoportail.lu/casipo";function f(w,S,T){return w.map(function(M){return M.attributes[S]}).join(T)}async function v(){if(!r.value&&!/^\S+@\S+\.\S+$/.test(r.value)){s(d("Veuillez saisir une adresse email valide"),on.WARNING);return}if(!u.value){s(d("Veuillez accepter les termes du rapport"),on.WARNING);return}const w=new URLSearchParams({email:r.value,staging:"false"});fetch(m+"/report/"+f(n.features,"textstring",",")+".pdf",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:w}),s(d("Votre rapport est en train d'tre gnr. Un email vous sera envoy  l'adresse {{email}} ds qu'il sera disponible",{email:r.value,ns:"client"}),on.INFO)}return(w,S)=>(U(),$(Ot,null,[W("h1",TAe,q(k(d)(k(n).layerLabel)),1),W("div",EAe,[W("div",MAe,[W("label",null,q(k(d)("Ici vous pouvez commander le rapport relatif aux site potentiellement contamins")),1),S[3]||(S[3]=W("br",null,null,-1)),S[4]||(S[4]=W("br",null,null,-1)),W("div",LAe,[W("div",RAe,[W("label",null,q(k(d)("Adresse Email")),1),La(W("input",{type:"text","onUpdate:modelValue":S[0]||(S[0]=T=>r.value=T),style:{width:"165px"}},null,512),[[Hr,r.value]])]),W("div",kAe,[La(W("input",{type:"checkbox","onUpdate:modelValue":S[1]||(S[1]=T=>u.value=T),id:"terms"},null,512),[[of,u.value]]),W("label",{for:"terms",innerHTML:k(d)("En cochant cette case, l'utilisateur dclare avoir lu, compris et accept les <a target='_blank' rel='noopener noreferrer' href='https://files.geoportail.lu/Conditions_utilisation_CASIPO.pdf'>conditions gnrales d'utilisation </a>de ce site web")},null,8,WAe)])]),W("button",{class:"lux-btn-grey",onClick:S[2]||(S[2]=T=>v()),target:"_blank"},q(k(d)("Commander rapport")),1)])])],64))}});const OAe=hr(GAe,[["__scopeId","data-v-c10938bd"]]),PAe={class:"flex flex-col"},BAe={class:"lux-poi-title","data-cy":"defaultTemplateTitle"},NAe={key:0},FAe={key:1,"data-cy":"defaultTemplateAttributes"},DAe={key:0},VAe={key:0},ZAe={key:1},zAe=["href"],UAe=["href"],HAe={class:"lux-solarkataster-button"},XAe={key:4},qAe={controls:"",autoplay:"",style:{width:"260px",height:"50px"}},YAe=["src"],KAe=["src"],jAe={key:2},$Ae={key:3,class:"no-print"},JAe={key:4,class:"no-print"},QAe=["href"],Lk=$e({__name:"default-template",props:{layers:{type:Object,required:!0},currentUrl:{type:String,required:!1}},emits:["export"],setup(a){const{t:e}=wt();function t(r,l){return!(r.startsWith("myenergy_solarkataster_luxemburg")||r.startsWith("eau_new_Wasserstand"))&&Es(l.value)}function i(r,l){return r.startsWith("myenergy_solarkataster_luxemburg")&&Es(l.value)&&l.key==="f_href"}function n(r,l){return r.startsWith("eau_new_Wasserstand")&&Es(l.value)&&l.key==="f_Graph"}function s(r){return Es(r.value)&&r.key==="f_AudioURL"}return(r,l)=>{const u=wl("dompurify-html");return U(),$("div",PAe,[W("div",null,[W("h2",BAe,q(k(e)(a.layers.layerLabel)),1),(U(!0),$(Ot,null,xi(a.layers.features,d=>(U(),$("div",{key:d.id,class:"lux-feature-info"},[d.attributes.label?(U(),$("h4",NAe,q(k(e)(d.attributes.label)),1)):Ae("",!0),k(t_)(d)?(U(),$("div",FAe,[(U(!0),$(Ot,null,xi(k(zf)(d.attributes,a.layers.ordered),m=>(U(),$("div",{key:m.key},[!k(Xm)(m.value)&&k(pb)(m,a.layers.layer,k(Wa).language)?(U(),$("div",DAe,[k(Es)(m.value)?Ae("",!0):(U(),$("label",VAe,q(k(e)(m.key))+" : ",1)),k(Es)(m.value)?Ae("",!0):La((U(),$("span",ZAe,null,512)),[[u,m.value]]),t(a.layers.layerLabel,m)?(U(),$("a",{key:2,href:m.value,target:"_blank"},q(k(e)(m.key)),9,zAe)):Ae("",!0),i(a.layers.layerLabel,m)?(U(),$("a",{key:3,"data-cy":"defaultTemplateSolarLink",href:m.value,target:"_blank"},[W("button",HAe,[W("span",null,q(k(e)("Lien direct vers le calculateur d'efficacit conomique")),1)])],8,UAe)):Ae("",!0),s(m)?(U(),$("span",XAe,[W("audio",qAe,[W("source",{src:m.value,type:"audio/wav"},null,8,YAe)])])):Ae("",!0),n(a.layers.layerLabel,m)?(U(),$("iframe",{key:5,width:"260px",height:"560px",src:k(HN)(m.value),title:"water level graph"},null,8,KAe)):Ae("",!0)])):Ae("",!0)]))),128))])):Ae("",!0),a.layers.has_profile?(U(),$("div",jAe,[lt(Kd,{feature:d,onExport:l[0]||(l[0]=m=>r.$emit("export",m))},null,8,["feature"])])):Ae("",!0),k(t_)(d)?Ae("",!0):(U(),$("div",$Ae,[W("span",null,q(k(e)("Aucune information disponible pour cette couche")),1)])),k(UN)(d)?(U(),$("div",JAe,[W("span",null,[W("a",{"data-cy":"defaultTemplateLink",href:a.currentUrl+"&fid="+d.fid,target:"_blank"},q(k(e)("Lien direct vers cet objet")),9,QAe)])])):Ae("",!0)]))),128))])])}}}),eTe={key:0},tTe={key:0},aTe={key:0,class:"flex"},iTe={class:"w-1/3"},nTe={class:"w-2/3"},rTe={key:1,class:"flex"},sTe=["href"],oTe={key:0},lTe={key:2},uTe=$e({__name:"default-table-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{t:e}=wt();return(t,i)=>{const n=wl("dompurify-html");return U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:s})=>[s.attributes.label?(U(),$("h4",eTe,q(k(e)(s.attributes.label)),1)):Ae("",!0),k(t_)(s)?(U(),$(Ot,{key:1},[(U(!0),$(Ot,null,xi(k(zf)(s.attributes,t.layers.ordered),r=>(U(),$("div",{key:r.key},[!k(Xm)(r.value)&&k(pb)(r,t.layers.layer,k(Wa).language)?(U(),$("span",tTe,[k(Es)(r.value)?Ae("",!0):(U(),$("div",aTe,[W("label",iTe,q(k(e)(r.key)),1),La(W("span",nTe,null,512),[[n,r.value]])])),k(Es)(r.value)?(U(),$("div",rTe,[i[1]||(i[1]=W("label",{class:"w-1/3"},null,-1)),W("a",{class:"w-2/3",href:r.value,target:"_blank"},q(k(e)(r.key)),9,sTe)])):Ae("",!0)])):Ae("",!0)]))),128)),t.layers.has_profile?(U(),$("div",oTe,[lt(Kd,{feature:s,onExport:i[0]||(i[0]=r=>t.$emit("export",r))},null,8,["feature"])])):Ae("",!0)],64)):(U(),$("div",lTe,[W("span",null,q(k(e)("Aucune information disponible pour cette couche")),1)]))]),_:1},8,["layers","currentUrl"])}}}),cTe={key:0},dTe={key:0},hTe={key:0,class:"flex"},_Te={class:"w-1/3"},mTe={class:"w-2/3"},pTe={key:1,class:"flex"},gTe=["href"],fTe={key:0},yTe={key:2},bTe=$e({__name:"default-table-no-prefix-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{t:e}=wt();return(t,i)=>{const n=wl("dompurify-html");return U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:s})=>[s.attributes.label?(U(),$("h4",cTe,q(k(e)(s.attributes.label)),1)):Ae("",!0),k(t_)(s)?(U(),$(Ot,{key:1},[(U(!0),$(Ot,null,xi(k(zf)(s.attributes,t.layers.ordered,""),r=>(U(),$("div",{key:r.key},[!k(Xm)(r.value)&&k(pb)(r,t.layers.layer,k(Wa).language)?(U(),$("span",dTe,[k(Es)(r.value)?Ae("",!0):(U(),$("div",hTe,[W("label",_Te,q(k(e)(r.key)),1),La(W("span",mTe,null,512),[[n,r.value]])])),k(Es)(r.value)?(U(),$("div",pTe,[i[1]||(i[1]=W("label",{class:"w-1/3"},null,-1)),W("a",{class:"w-2/3",href:r.value,target:"_blank"},q(k(e)(r.key)),9,gTe)])):Ae("",!0)])):Ae("",!0)]))),128)),t.layers.has_profile?(U(),$("div",fTe,[lt(Kd,{feature:s,onExport:i[0]||(i[0]=r=>t.$emit("export",r))},null,8,["feature"])])):Ae("",!0)],64)):(U(),$("div",yTe,[W("span",null,q(k(e)("Aucune information disponible pour cette couche")),1)]))]),_:1},8,["layers","currentUrl"])}}}),vTe=$e({__name:"flik-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt();return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("span",null,q(k(e)("Numero FLIK"))+" : ",1),Jt(" "+q(n.attributes.element)+q(n.attributes.flik),1),i[0]||(i[0]=W("br",null,null,-1)),W("span",null,q(k(e)("Surface"))+" : ",1),Jt(" "+q(n.attributes.surface)+" a",1),i[1]||(i[1]=W("br",null,null,-1)),W("span",null,q(k(e)("Perimetre"))+" : ",1),Jt(" "+q(n.attributes.perimetre)+" m",1),i[2]||(i[2]=W("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),xTe={class:"lux-poi-title"},wTe={class:"lux-feature-info"},ITe={class:"poi-feature"},CTe={class:"forage-virtuel-form-container"},STe={class:"forage-virtuel-mail"},ATe=$e({__name:"forage-virtuel-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{authenticated:e,currentUser:t}=Tt(Mc()),n=a.layers,{addNotification:s}=Ls(),r=Fe(""),l=St(()=>{var f;return e.value&&((f=t.value)==null?void 0:f.mail)||""});r.value=l.value;const{t:u}=wt(),d={}.VITE_FORAGE_VIRTUEL_PROD_URL;async function m(){if(!r.value&&!/^\S+@\S+\.\S+$/.test(r.value)){s(u("Veuillez saisir une adresse email valide"),on.WARNING);return}const f=new URLSearchParams({x:String(n.features[0].geometry.coordinates[0]),y:String(n.features[0].geometry.coordinates[1]),email:r.value,staging:"false"});fetch(d,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:f}),s(u("Votre rapport est en train d'tre gnr. Un email vous sera envoy  l'adresse {{email}} ds qu'il sera disponible",{email:r.value,ns:"client"}),on.INFO)}return(f,v)=>(U(),$(Ot,null,[W("h1",xTe,q(k(u)(k(n).layerLabel)),1),W("div",wTe,[W("div",ITe,[W("label",null,q(k(u)("Ici vous pouvez commander le rapport relatif au forage virtuel")),1),v[2]||(v[2]=W("br",null,null,-1)),v[3]||(v[3]=W("br",null,null,-1)),W("div",CTe,[W("div",STe,[W("label",null,q(k(u)("Adresse Email")),1),La(W("input",{type:"text","onUpdate:modelValue":v[0]||(v[0]=w=>r.value=w),style:{width:"165px"}},null,512),[[Hr,r.value]])])]),W("button",{class:"lux-btn-grey",onClick:v[1]||(v[1]=w=>m()),target:"_blank"},q(k(u)("Commander rapport")),1)])])],64))}});const TTe=hr(ATe,[["__scopeId","data-v-6d0be8d4"]]),ETe={class:"lux-poi-title"},MTe={key:0},LTe={href:"https://www.mobiliteit.lu/fr/horaires-et-lignes/tram/",target:"_blank"},RTe={key:1},kTe={href:"https://www.mobiliteit.lu/fr/horaires-et-lignes/trains/",target:"_blank"},WTe={key:2},GTe=["href"],OTe=["href"],PTe=$e({__name:"lignes-bus-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{t:e}=wt();return(t,i)=>(U(),$(Ot,null,[W("h1",ETe,q(k(e)(t.layers.layerLabel)),1),W("table",null,[W("thead",null,[W("tr",null,[W("th",null,q(k(e)("Num ligne")),1),W("th",null,q(k(e)("Description")),1)])]),W("tbody",null,[(U(!0),$(Ot,null,xi(t.layers.features,n=>(U(),$("tr",{key:n.id,class:"lux-feature-info"},[n.attributes.category_id===404?(U(),$("td",MTe,[W("a",LTe,q(n.attributes.label),1)])):Ae("",!0),n.attributes.category_id===403?(U(),$("td",RTe,[W("a",kTe,q(n.attributes.label),1)])):Ae("",!0),(n.attributes.category_id??0)<403?(U(),$("td",WTe,[W("a",{href:`https://www.mobiliteit.lu/fr/ligne/bus-${n.attributes.label}-${n.attributes.category_id===400?"avl":n.attributes.category_id===401?"rgtr":"tice"}`,target:"_blank"},q(n.attributes.label),9,GTe)])):Ae("",!0),W("td",null,[W("a",{href:`?map_id=${n.attributes.map_id}`,target:"_blank"},q(n.attributes.map_description),9,OTe)])]))),128))])])],64))}}),BTe=["src"],NTe=$e({__name:"meteo-template",props:{layers:{},currentUrl:{}},setup(a){return(e,t)=>(U(),Gt(Ji,{layers:e.layers,currentUrl:e.currentUrl},{"feature-content":Ht(({feature:i})=>[W("h3",null,q(i.attributes.stationsname)+" "+q(i.attributes.sid),1),W("iframe",{title:"meteo widget",class:"-ml-3.5",height:"150",width:"300",frameborder:"0",src:`https://dlr-web-daten1.aspdienste.de/cgi-bin/sinfoam.pl?c=92&nid=01&lid=${i.attributes.sid}`},null,8,BTe)]),_:1},8,["layers","currentUrl"]))}}),FTe=$e({__name:"meteolux-europe-template",props:{layers:{},currentUrl:{}},setup(a){return(e,t)=>(U(),Gt(Ji,{layers:e.layers,currentUrl:e.currentUrl},{"feature-content":Ht(({feature:i})=>[W("h3",null,q(i.attributes.station)+" ("+q(i.attributes.icao)+")",1),W("label",null,q(i.attributes.weather),1),t[0]||(t[0]=Jt("")),W("span",null,q(i.attributes.temperature)+"C",1)]),_:1},8,["layers","currentUrl"]))}}),DTe=$e({__name:"meteolux-gr-template",props:{layers:{},currentUrl:{}},setup(a){return(e,t)=>(U(),Gt(Ji,{layers:e.layers,currentUrl:e.currentUrl},{"feature-content":Ht(({feature:i})=>[W("h3",null,q(i.attributes.station)+" ("+q(i.attributes.icao)+")",1),t[0]||(t[0]=W("label",null,"TAF:",-1)),t[1]||(t[1]=Jt()),W("span",null,q(i.attributes.taf),1),t[2]||(t[2]=W("br",null,null,-1)),t[3]||(t[3]=W("label",null,"Metar:",-1)),t[4]||(t[4]=Jt()),W("span",null,q(i.attributes.metar),1)]),_:1},8,["layers","currentUrl"]))}}),VTe=["href"],ZTe=["src"],zTe={key:1},UTe={key:2},HTe={key:3},XTe={key:4},qTe=["src"],YTe=["href"],KTe=$e({__name:"mymaps-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt();return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("h4",null,q(n.attributes.sentier),1),n.attributes.image&&n.attributes.image.trim()!==""?(U(),$("a",{key:0,href:k(U8)(n.attributes.image),target:"_blank"},[n.attributes.thumbnail&&n.attributes.thumbnail.trim()!==""?(U(),$("img",{key:0,src:k(U8)(n.attributes.thumbnail)},null,8,ZTe)):Ae("",!0)],8,VTe)):Ae("",!0),i[5]||(i[5]=W("br",null,null,-1)),n.attributes.sentier?(U(),$("span",zTe,[W("span",null,q(k(e)("sentier")),1),Jt(" : "+q(n.attributes.sentier),1),i[1]||(i[1]=W("br",null,null,-1))])):Ae("",!0),n.attributes.name?(U(),$("span",UTe,[W("span",null,q(k(e)("Name")),1),Jt(" : "+q(n.attributes.name),1),i[2]||(i[2]=W("br",null,null,-1))])):Ae("",!0),n.attributes.description?(U(),$("span",HTe,[W("span",null,q(k(e)("Description")),1),Jt(" : "+q(n.attributes.description),1),i[3]||(i[3]=W("br",null,null,-1))])):Ae("",!0),n.attributes.length?(U(),$("span",XTe,[W("span",null,q(k(e)("Longeueur")),1),Jt(" : "+q(n.attributes.length)+" Km",1),i[4]||(i[4]=W("br",null,null,-1))])):Ae("",!0),lt(Kd,{feature:n,onExport:i[0]||(i[0]=s=>t.$emit("export",s))},null,8,["feature"]),W("img",{src:k(kye)(n.attributes.map_id)},null,8,qTe),i[6]||(i[6]=W("br",null,null,-1)),W("a",{class:"fid-link no-print",href:`?map_id=${n.attributes.map_id}`,target:"_blank"},q(k(e)("Lien vers la carte")),9,YTe),i[7]||(i[7]=W("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),jTe=["onClick"],$Te=$e({__name:"mo-template",props:{layers:{},currentUrl:{}},setup(a){const{addNotification:e}=Ls(),t="https://shop.geoportail.lu",i={}.VITE_SHOP_IPV6_URL,{t:n}=wt(),s=function(l){for(var u=l+"=",d=document.cookie.split(";"),m=0;m<d.length;m++){for(var f=d[m];f.charAt(0)==" ";)f=f.substring(1);if(f.indexOf(u)==0){var v=f.substring(u.length,f.length);return v.indexOf('"')===0&&(v=v.substring(1,v.length-1)),v}}return""},r=async function(l,u){const f=`${location.search.includes("ipv6=true")?i:t}/Portail/commande/webservices/orderAffaireV3.jsp?numCommune=${encodeURIComponent(l)}&numMesurage=${encodeURIComponent(u)}&ticket=${encodeURIComponent(s("appAuthtktCookieName"))}`;try{const v=await fetch(f,{method:"GET",headers:{"Content-Type":"application/json"}});v.ok?(await v.json(),e(n("Fichier GML command."),on.INFO)):e(n("Erreur lors de la commande du fichier."),on.ERROR)}catch{e(n("Erreur lors de la commande du fichier."),on.ERROR)}};return(l,u)=>(U(),Gt(Ji,{layers:l.layers,currentUrl:l.currentUrl},{"feature-content":Ht(({feature:d})=>[W("h3",null,q(d.attributes.K_MEASUREMENTID),1),W("span",null,q(k(n)("Affaire")),1),Jt(" : "+q(d.attributes.K_MEASUREMENTID),1),u[0]||(u[0]=W("br",null,null,-1)),W("span",null,q(k(n)("Commune administrative")),1),Jt(" : "+q(d.attributes.K_NOM_COMMUNE_ADMINISTRATIVE),1),u[1]||(u[1]=W("br",null,null,-1)),W("span",null,q(k(n)("Commune cadastrale")),1),Jt(" : "+q(d.attributes.K_NOM_COMMUNE_CADASTRALE),1),u[2]||(u[2]=W("br",null,null,-1)),W("span",null,q(k(n)("Mesurage")),1),Jt(" : "+q(d.attributes.K_MEASUREMENTNUMBER),1),u[3]||(u[3]=W("br",null,null,-1)),W("button",{class:"lux-btn-grey",onClick:m=>r(d.attributes.K_KATASTERGEMEINDE,d.attributes.K_MEASUREMENTNUMBER)},q(k(n)("Commander fichier GML")),9,jTe)]),_:1},8,["layers","currentUrl"]))}}),JTe={key:0},QTe=["href"],e4e={key:1},t4e=$e({__name:"ng95-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt(),t="https://migration.geoportail.lu/downloadsketch";return(i,n)=>(U(),Gt(Ji,{layers:i.layers,currentUrl:i.currentUrl},{"feature-content":Ht(({feature:s})=>[W("h4",null,q(k(e)(s.attributes.nom)),1),W("span",null,q(k(e)("Elevation")),1),Jt(" : "+q(s.attributes.nouv_cote),1),n[0]||(n[0]=W("br",null,null,-1)),W("span",null,q(k(e)("Type")),1),Jt(" : "+q(s.attributes.type_rivet),1),n[1]||(n[1]=W("br",null,null,-1)),W("span",null,q(k(e)("Croquis")),1),n[2]||(n[2]=Jt(" : ")),s.attributes.has_sketch?(U(),$("span",JTe,[W("a",{class:"no-print",target:"_blank",download:"",href:`${k(t)}?name=${s.attributes.nom_croq}`},q(k(e)("Obtenir le fichier sous format pdf")),9,QTe)])):Ae("",!0),s.attributes.has_sketch?Ae("",!0):(U(),$("span",e4e,q(k(e)("Croquis indisponible")),1))]),_:1},8,["layers","currentUrl"]))}}),a4e={key:0},i4e=["href"],n4e={key:1},r4e=$e({__name:"ng95-new-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt(),t="https://migration.geoportail.lu/downloadsketch";return(i,n)=>(U(),Gt(Ji,{layers:i.layers,currentUrl:i.currentUrl},{"feature-content":Ht(({feature:s})=>[W("h4",null,q(k(e)(s.attributes.Nom)),1),W("span",null,q(k(e)("Elevation")),1),Jt(" : "+q(s.attributes["nouv. cote"]),1),n[0]||(n[0]=W("br",null,null,-1)),W("span",null,q(k(e)("Type")),1),Jt(" : "+q(s.attributes["type rivet"]),1),n[1]||(n[1]=W("br",null,null,-1)),W("span",null,q(k(e)("Croquis")),1),n[2]||(n[2]=Jt(" : ")),s.attributes.has_sketch?(U(),$("span",a4e,[W("a",{class:"no-print",target:"_blank",download:"",href:`${k(t)}?id=${s.attributes.OBJECTID}&type=new`},q(k(e)("Obtenir le fichier sous format pdf")),9,i4e)])):Ae("",!0),s.attributes.has_sketch?Ae("",!0):(U(),$("span",n4e,q(k(e)("Croquis indisponible")),1))]),_:1},8,["layers","currentUrl"]))}}),s4e={key:0},o4e={key:1},l4e={key:2},u4e={key:3},c4e={key:4},d4e={key:5},h4e={key:6},_4e={key:7},m4e={key:8},p4e={key:9},g4e={key:10},f4e={key:11},y4e={key:12},b4e={key:13},v4e={key:14},x4e={key:15},w4e={key:16},I4e={key:17},C4e={key:18},S4e=["href"],A4e={key:19},T4e=["href"],E4e={key:20},M4e=["href"],L4e={key:21},R4e=["href"],k4e={key:22},W4e=["src"],G4e={key:23},O4e=$e({__name:"npour-poi-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{t:e}=wt(),{i18next:t}=wt();return(i,n)=>(U(),Gt(Ji,{layers:i.layers,currentUrl:i.currentUrl},{"feature-content":Ht(({feature:s})=>[k(t).language=="de"&&k(Ii)("title_de",s,0)?(U(),$("h3",s4e,q(s.attributes.title_de),1)):Ae("",!0),k(t).language=="en"&&k(Ii)("title_en",s,0)?(U(),$("h3",o4e,q(s.attributes.title_en),1)):Ae("",!0),k(t).language=="lb"&&k(Ii)("title_nl",s,0)?(U(),$("h3",l4e,q(s.attributes.title_nl),1)):Ae("",!0),k(t).language=="fr"&&k(Ii)("title_fr",s,0)?(U(),$("h3",u4e,q(s.attributes.title_fr),1)):Ae("",!0),k(t).language=="de"&&k(Ii)("nom_de",s,0)?(U(),$("h3",c4e,q(s.attributes.nom_de),1)):Ae("",!0),k(t).language=="fr"&&k(Ii)("nom_fr",s,0)?(U(),$("h3",d4e,q(s.attributes.nom_fr),1)):Ae("",!0),k(t).language=="en"&&k(Ii)("nom_en",s,0)?(U(),$("h3",h4e,q(s.attributes.nom_en),1)):Ae("",!0),k(t).language=="lb"&&k(Ii)("nom_lu",s,0)?(U(),$("h3",_4e,q(s.attributes.nom_lu),1)):Ae("",!0),k(t).language=="de"&&k(Ii)("descr_de",s,0)?(U(),$("span",m4e,q(s.attributes.descr_de),1)):Ae("",!0),k(t).language=="fr"&&k(Ii)("descr_fr",s,0)?(U(),$("span",p4e,q(s.attributes.descr_fr),1)):Ae("",!0),k(t).language=="en"&&k(Ii)("descr_en",s,0)?(U(),$("span",g4e,q(s.attributes.descr_en),1)):Ae("",!0),k(t).language=="lb"&&k(Ii)("descr_nl",s,0)?(U(),$("span",f4e,q(s.attributes.descr_nl),1)):Ae("",!0),k(Ii)("number",s,0)?(U(),$("span",y4e,q(s.attributes.number)+",",1)):Ae("",!0),k(Ii)("street",s,0)?(U(),$("span",b4e,q(s.attributes.street),1)):Ae("",!0),k(Ii)("town",s,0)?(U(),$("span",v4e,q(s.attributes.zip)+" "+q(s.attributes.town),1)):Ae("",!0),k(Ii)("phone",s,1)?(U(),$("span",x4e,[n[1]||(n[1]=W("i",{class:"fa fa-phone","aria-hidden":"true"},null,-1)),W("span",null,q(s.attributes.phone),1)])):Ae("",!0),k(Ii)("fax",s,1)?(U(),$("span",w4e,[n[2]||(n[2]=W("i",{class:"fa fa-fax","aria-hidden":"true"},null,-1)),W("span",null,q(s.attributes.fax),1)])):Ae("",!0),k(Ii)("email",s,1)?(U(),$("span",I4e,[n[3]||(n[3]=W("i",{class:"fa fa-at","aria-hidden":"true"},null,-1)),W("span",null,q(s.attributes.email),1)])):Ae("",!0),k(Ii)("website",s,3)&&s.attributes.website.startsWith("http")?(U(),$("span",C4e,[W("a",{target:"_blank",href:s.attributes.website},q(s.attributes.website),9,S4e)])):Ae("",!0),k(Ii)("website",s,3)&&!s.attributes.website.startsWith("http")?(U(),$("span",A4e,[W("a",{target:"_blank",href:"http://"+s.attributes.website},q(s.attributes.website),9,T4e)])):Ae("",!0),k(t).language!="fr"&&k(Ii)("link_de",s,3)?(U(),$("span",E4e,[W("a",{target:"_blank",href:s.attributes.link_de},q(s.attributes.link_de),9,M4e)])):Ae("",!0),k(t).language=="fr"&&k(Ii)("link_fr",s,3)?(U(),$("span",L4e,[W("a",{target:"_blank",href:s.attributes.link_fr},q(s.attributes.link_fr),9,R4e)])):Ae("",!0),k(Ii)("Bild",s,3)?(U(),$("span",k4e,[W("img",{src:s.attributes.Bild,width:"250"},null,8,W4e)])):Ae("",!0),k(Ii)("longueur sentier",s,0)?(U(),$("div",G4e,[W("span",null,q(k(e)("Longueur du sentier :")),1),W("span",null,q(s.attributes["longueur sentier"]),1)])):Ae("",!0),lt(Kd,{feature:s,onExport:n[0]||(n[0]=r=>i.$emit("export",r))},null,8,["feature"])]),_:1},8,["layers","currentUrl"]))}});const P4e=hr(O4e,[["__scopeId","data-v-e980fdd2"]]),B4e={key:0},N4e={key:1},F4e={key:2},D4e={key:3},V4e={key:4},Z4e={key:5},z4e={key:6},U4e={key:7},H4e={key:8},X4e={key:9},q4e={key:10},Y4e={key:11},K4e={key:12},j4e=["href"],$4e={key:13},J4e=["href"],Q4e={key:14},e5e=["src"],t5e={key:15},a5e=$e({__name:"npour-wo-address-poi-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{t:e}=wt(),{i18next:t}=wt();return(i,n)=>(U(),Gt(Ji,{layers:i.layers,currentUrl:i.currentUrl},{"feature-content":Ht(({feature:s})=>[k(t).language=="de"&&k(Ii)("title_de",s,0)?(U(),$("h3",B4e,q(s.attributes.title_de),1)):Ae("",!0),k(t).language=="en"&&k(Ii)("title_en",s,0)?(U(),$("h3",N4e,q(s.attributes.title_en),1)):Ae("",!0),k(t).language=="lb"&&k(Ii)("title_nl",s,0)?(U(),$("h3",F4e,q(s.attributes.title_nl),1)):Ae("",!0),k(t).language=="fr"&&k(Ii)("title_fr",s,0)?(U(),$("h3",D4e,q(s.attributes.title_fr),1)):Ae("",!0),k(t).language=="de"&&k(Ii)("nom_de",s,0)?(U(),$("h3",V4e,q(s.attributes.nom_de),1)):Ae("",!0),k(t).language=="fr"&&k(Ii)("nom_fr",s,0)?(U(),$("h3",Z4e,q(s.attributes.nom_fr),1)):Ae("",!0),k(t).language=="en"&&k(Ii)("nom_en",s,0)?(U(),$("h3",z4e,q(s.attributes.nom_en),1)):Ae("",!0),k(t).language=="lb"&&k(Ii)("nom_lu",s,0)?(U(),$("h3",U4e,q(s.attributes.nom_lu),1)):Ae("",!0),k(t).language=="de"&&k(Ii)("descr_de",s,0)?(U(),$("span",H4e,q(s.attributes.descr_de),1)):Ae("",!0),k(t).language=="fr"&&k(Ii)("descr_fr",s,0)?(U(),$("span",X4e,q(s.attributes.descr_fr),1)):Ae("",!0),k(t).language=="en"&&k(Ii)("descr_en",s,0)?(U(),$("span",q4e,q(s.attributes.descr_en),1)):Ae("",!0),k(t).language=="lb"&&k(Ii)("descr_nl",s,0)?(U(),$("span",Y4e,q(s.attributes.descr_nl),1)):Ae("",!0),k(t).language!="fr"&&k(Ii)("link_de",s,3)?(U(),$("span",K4e,[W("a",{target:"_blank",href:s.attributes.link_de},q(s.attributes.link_de),9,j4e)])):Ae("",!0),k(t).language=="fr"&&k(Ii)("link_fr",s,3)?(U(),$("span",$4e,[W("a",{target:"_blank",href:s.attributes.link_fr},q(s.attributes.link_fr),9,J4e)])):Ae("",!0),k(Ii)("Bild",s,3)?(U(),$("span",Q4e,[W("img",{src:s.attributes.Bild,width:"250"},null,8,e5e)])):Ae("",!0),k(Ii)("longueur sentier",s,0)?(U(),$("div",t5e,[W("span",null,q(k(e)("Longueur du sentier :")),1),W("span",null,q(s.attributes["longueur sentier"]),1)])):Ae("",!0)]),_:1},8,["layers","currentUrl"]))}});const i5e=hr(a5e,[["__scopeId","data-v-83fc1248"]]),n5e=["href"],r5e={key:1},s5e=["href"],o5e=$e({__name:"pcn-pag-template",props:{layers:{},currentUrl:{}},setup(a){const e="https://migration.geoportail.lu/pagreport",{t}=wt();return(i,n)=>(U(),Gt(Ji,{layers:i.layers,currentUrl:i.currentUrl},{"layer-content":Ht(()=>[i.layers.features.length?(U(),$("a",{key:0,class:"lux-btn",download:"",href:`${k(e)}/${k(YSe)(i.layers.features,"OBJECTID",",")}.pdf`,target:"_blank"},q(k(t)("Generer un rapport pour toutes les selections")),9,n5e)):(U(),$("span",r5e,q(k(t)("Aucune information disponible pour cette couche")),1))]),"feature-content":Ht(({feature:s})=>[W("span",null,q(k(t)("Identifiant")),1),Jt(" : "+q(s.attributes.OBJECTID),1),n[0]||(n[0]=W("br",null,null,-1)),W("a",{class:"lux-btn",download:"",href:`${k(e)}/${s.attributes.OBJECTID}.pdf`,target:"_blank"},q(k(t)("Generer Rapport (peut prendre 30 sec)")),9,s5e)]),_:1},8,["layers","currentUrl"]))}}),l5e={class:"lux-poi-title"},u5e={class:"lux-feature-info"},c5e={class:"poi-feature"},d5e={class:"pag-form-container"},h5e={class:"pag-mail"},_5e={class:"pag-checkbox"},m5e=["innerHTML"],p5e=$e({__name:"pag-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{authenticated:e,currentUser:t}=Tt(Mc()),n=a.layers,{addNotification:s}=Ls(),r=Fe(""),l=St(()=>{var w;return e.value&&((w=t.value)==null?void 0:w.mail)||""});r.value=l.value;const u=Fe(!1),{t:d}=wt(),m="https://migration.geoportail.lu/pag";function f(w,S,T){return w.map(function(M){return M.attributes[S]}).join(T)}async function v(){if(!r.value&&!/^\S+@\S+\.\S+$/.test(r.value)){s(d("Veuillez saisir une adresse email valide"),on.WARNING);return}if(!u.value){s(d("Veuillez accepter les termes du rapport"),on.WARNING);return}const w=new URLSearchParams({email:r.value,staging:"false"});fetch(m+"/report/"+f(n.features,"OBJECTID",",")+".pdf",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:w}),s(d("Votre rapport est en train d'tre gnr. Un email vous sera envoy  l'adresse {{email}} ds qu'il sera disponible",{email:r.value,ns:"client"}),on.INFO)}return(w,S)=>(U(),$(Ot,null,[W("h1",l5e,q(k(d)(k(n).layerLabel)),1),W("div",u5e,[W("div",c5e,[W("label",null,q(k(d)("Ici vous pouvez commander le rapport relatif aux rgles urbanistiques applicables au terrain sctionn")),1),S[3]||(S[3]=W("br",null,null,-1)),S[4]||(S[4]=W("br",null,null,-1)),W("div",d5e,[W("div",h5e,[W("label",null,q(k(d)("Adresse Email")),1),La(W("input",{type:"text","onUpdate:modelValue":S[0]||(S[0]=T=>r.value=T),style:{width:"165px"}},null,512),[[Hr,r.value]])]),W("div",_5e,[La(W("input",{type:"checkbox","onUpdate:modelValue":S[1]||(S[1]=T=>u.value=T),id:"terms"},null,512),[[of,u.value]]),W("label",{for:"terms",innerHTML:k(d)("En cochant cette case, l'utilisateur dclare avoir lu, compris et accept les <a target='_blank' rel='noopener noreferrer' href='https://files.geoportail.lu/pag/Disclaimer.pdf'>conditions gnrales d'utilisation </a>de ce site web")},null,8,m5e)])]),W("button",{class:"lux-btn-grey",onClick:S[2]||(S[2]=T=>v()),target:"_blank"},q(k(d)("Commander rapport")),1)])])],64))}});const g5e=hr(p5e,[["__scopeId","data-v-d5f704f5"]]),f5e={class:"lux-poi-title"},y5e={class:"lux-feature-info"},b5e={class:"poi-feature"},v5e={class:"pag-form-container"},x5e={class:"pag-mail"},w5e={class:"pag-checkbox"},I5e=["innerHTML"],C5e=$e({__name:"pag-staging-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{authenticated:e,currentUser:t}=Tt(Mc()),n=a.layers,{addNotification:s}=Ls(),r=Fe(""),l=St(()=>{var w;return e.value&&((w=t.value)==null?void 0:w.mail)||""});r.value=l.value;const u=Fe(!1),{t:d}=wt(),m="https://migration.geoportail.lu/pag";function f(w,S,T){return w.map(function(M){return M.attributes[S]}).join(T)}async function v(){if(!r.value&&!/^\S+@\S+\.\S+$/.test(r.value)){s(d("Veuillez saisir une adresse email valide"),on.WARNING);return}if(!u.value){s(d("Veuillez accepter les termes du rapport"),on.WARNING);return}const w=new URLSearchParams({email:r.value,staging:"true"});fetch(m+"/report/"+f(n.features,"OBJECTID",",")+".pdf",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:w}),s(d("Votre rapport est en train d'tre gnr. Un email vous sera envoy  l'adresse {{email}} ds qu'il sera disponible",{email:r.value,ns:"client"}),on.INFO)}return(w,S)=>(U(),$(Ot,null,[W("h1",f5e,q(k(d)(k(n).layerLabel)),1),W("div",y5e,[W("div",b5e,[W("label",null,q(k(d)("Ici vous pouvez commander le rapport relatif aux rgles urbanistiques applicables au terrain sctionn")),1),S[3]||(S[3]=W("br",null,null,-1)),S[4]||(S[4]=W("br",null,null,-1)),W("div",v5e,[W("div",x5e,[W("label",null,q(k(d)("Adresse Email")),1),La(W("input",{type:"text","onUpdate:modelValue":S[0]||(S[0]=T=>r.value=T),style:{width:"165px"}},null,512),[[Hr,r.value]])]),W("div",w5e,[La(W("input",{type:"checkbox","onUpdate:modelValue":S[1]||(S[1]=T=>u.value=T),id:"terms"},null,512),[[of,u.value]]),W("label",{for:"terms",innerHTML:k(d)("En cochant cette case, l'utilisateur dclare avoir lu, compris et accept les <a target='_blank' rel='noopener noreferrer' href='https://files.geoportail.lu/pag/Disclaimer.pdf'>conditions gnrales d'utilisation </a>de ce site web")},null,8,I5e)])]),W("button",{class:"lux-btn-grey",onClick:S[2]||(S[2]=T=>v()),target:"_blank"},q(k(d)("Commander rapport")),1)])])],64))}});const S5e=hr(C5e,[["__scopeId","data-v-5ecbf7b0"]]),A5e={class:"lux-poi-title"},T5e={class:"lux-feature-info"},E5e={class:"poi-feature"},M5e={class:"pds-form-container"},L5e={class:"pds-mail"},R5e=$e({__name:"pds-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const{authenticated:e,currentUser:t}=Tt(Mc()),n=a.layers,{addNotification:s}=Ls(),r=Fe(""),l=St(()=>{var v;return e.value&&((v=t.value)==null?void 0:v.mail)||""});r.value=l.value;const{t:u}=wt(),d="https://migration.geoportail.lu/pds";function m(v,w,S){return v.map(function(T){return T.attributes[w]}).join(S)}async function f(){if(!r.value&&!/^\S+@\S+\.\S+$/.test(r.value)){s(u("Veuillez saisir une adresse email valide"),on.WARNING);return}const v=new URLSearchParams({email:r.value,staging:"false"});fetch(d+"/report/"+m(n.features,"textstring",",")+".pdf",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v}),s(u("Votre attestation est en train d'tre gnr. Un email vous sera envoy  l'adresse {{email}} ds qu'il sera disponible",{email:r.value,ns:"client"}),on.INFO)}return(v,w)=>(U(),$(Ot,null,[W("h1",A5e,q(k(u)(k(n).layerLabel)),1),W("div",T5e,[W("div",E5e,[W("label",null,q(k(u)(`Ici vous pouvez commander l'attestation "plans directeurs sectoriels" par rapport au terrain sctionn`)),1),w[2]||(w[2]=W("br",null,null,-1)),w[3]||(w[3]=W("br",null,null,-1)),W("div",M5e,[W("div",L5e,[W("label",null,q(k(u)("Adresse Email")),1),La(W("input",{type:"text","onUpdate:modelValue":w[0]||(w[0]=S=>r.value=S),style:{width:"165px"}},null,512),[[Hr,r.value]])])]),W("button",{class:"lux-btn-grey",onClick:w[1]||(w[1]=S=>f()),target:"_blank"},q(k(u)("Commander rapport")),1)])])],64))}});const k5e=hr(R5e,[["__scopeId","data-v-eadcbafd"]]),W5e=["src"],G5e=$e({__name:"pegel-template",props:{layers:{},currentUrl:{}},setup(a){return(e,t)=>(U(),Gt(Ji,{layers:e.layers,currentUrl:e.currentUrl},{"feature-content":Ht(({feature:i})=>[W("h3",null,q(i.attributes.Nom),1),W("iframe",{width:"300",height:"1500",frameborder:"0",src:k(HN)("http://geoportail.eau.etat.lu/pdf/112/"+i.attributes.Nom+".html")},null,8,W5e)]),_:1},8,["layers","currentUrl"]))}}),O5e=$e({__name:"remembrements-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt();return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("span",null,q(k(e)("Nom")),1),Jt(" : "+q(n.attributes.K_NAME),1),i[0]||(i[0]=W("br",null,null,-1)),W("span",null,q(k(e)("Statut")),1),i[1]||(i[1]=Jt(" : ")),W("span",null,q(k(e)("rem_status_"+n.attributes.K_STATUS)),1),i[2]||(i[2]=W("br",null,null,-1)),W("span",null,q(k(e)("Type")),1),i[3]||(i[3]=Jt(" : ")),W("span",null,q(k(e)("rem_typ_"+n.attributes.K_TYP)),1)]),_:1},8,["layers","currentUrl"]))}}),P5e={key:0,class:"my-3"},B5e=["href"],N5e={key:1},F5e=$e({__name:"sentier-nature-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const e=a,t="https://migration.geoportail.lu/downloadresource",{t:i}=wt();function n(s){return`${e.currentUrl}&fid=${e.layers.layer}_${s.attributes.id_qr}`}return(s,r)=>(U(),Gt(Ji,{layers:s.layers,currentUrl:s.currentUrl,getDirectLink:n},{"feature-content":Ht(({feature:l})=>[W("h4",null,q(l.attributes.sentier),1),k(t_)(l)?(U(),$(Ot,{key:0},[W("div",null,[W("label",null,q(k(i)("Longueur du parcours")),1),r[1]||(r[1]=Jt(" : ")),W("span",null,q(l.attributes.formatted_length),1),l.attributes.link?(U(),$("div",P5e,[W("a",{class:"lux-btn py-2",href:`${k(t)}?fid=${s.layers.layer}_${l.attributes.objectid}&attribute=link&id_attribute=objectid`,target:"_blank"},q(k(i)("Tlcharger la brochure")),9,B5e)])):Ae("",!0)]),lt(Kd,{feature:l,onExport:r[0]||(r[0]=u=>s.$emit("export",u))},null,8,["feature"])],64)):(U(),$("div",N5e,q(k(i)("Aucune information disponible pour cette couche")),1))]),_:1},8,["layers","currentUrl"]))}}),D5e={class:"text-white text-3xl"},V5e=["href"],Z5e=["src"],z5e=$e({__name:"urplang-template",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt();return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("h2",D5e,q(n.attributes.nom_commune)+" "+q(n.attributes.section)+" "+q(n.attributes.feuille),1),n.attributes.thumb?(U(),$(Ot,{key:0},[W("a",{href:n.attributes.path,target:"_blank"},[W("img",{src:n.attributes.thumb,width:"250"},null,8,Z5e)],8,V5e),W("span",null,q(k(e)("Cliquez dans l'image pour agrandir")),1)],64)):Ae("",!0)]),_:1},8,["layers","currentUrl"]))}}),U5e=$e({__name:"viti-flik",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt();return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("span",null,q(k(e)("Numero FLIK")),1),Jt(" : "+q(n.attributes.CODE_ELEM)+q(n.attributes.FLIK),1),i[0]||(i[0]=W("br",null,null,-1)),W("span",null,q(k(e)("Commune cadastrale")),1),Jt(" : "+q(n.attributes.CODE_COM),1),i[1]||(i[1]=W("br",null,null,-1)),W("span",null,q(k(e)("Section cadastrale")),1),Jt(" : "+q(n.attributes.CODE_SECT),1),i[2]||(i[2]=W("br",null,null,-1)),W("span",null,q(k(e)("Surface")),1),Jt(" : "+q(n.attributes.F_Area_2021)+" a ",1)]),_:1},8,["layers","currentUrl"]))}}),H5e=$e({__name:"viti-kleinlage",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt();return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("span",null,q(k(e)("Nom")),1),Jt(" : "+q(n.attributes.kleinlage),1)]),_:1},8,["layers","currentUrl"]))}}),X5e=$e({__name:"viti-name",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt();return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("span",null,q(k(e)("Nom")),1),Jt(" : "+q(n.attributes.grosslage),1)]),_:1},8,["layers","currentUrl"]))}}),q5e=$e({__name:"viti-parcels",props:{layers:{},currentUrl:{}},setup(a){const{t:e}=wt();return(t,i)=>(U(),Gt(Ji,{layers:t.layers,currentUrl:t.currentUrl},{"feature-content":Ht(({feature:n})=>[W("span",null,q(k(e)("Numero")),1),Jt(" : V"+q(n.attributes.Weinbergsn),1),i[0]||(i[0]=W("br",null,null,-1)),W("span",null,q(k(e)("Commune")),1),Jt(" : "+q(n.attributes.CODE_COM),1),i[1]||(i[1]=W("br",null,null,-1)),W("span",null,q(k(e)("Section")),1),Jt(" : "+q(n.attributes.CODE_SECT),1),i[2]||(i[2]=W("br",null,null,-1))]),_:1},8,["layers","currentUrl"]))}}),Y5e={key:0,class:"mt-2 mb-3"},K5e=["src"],j5e={class:"flex flex-row justify-end"},$5e=["href"],J5e=["href"],Q5e=$e({__name:"info-feature-measurement-modale",props:{measurement:{}},setup(a){const e=a,t="https://migration.geoportail.lu/previewmeasurement",i="https://migration.geoportail.lu/downloadmeasurement",{t:n,i18next:s}=wt(),r=St(()=>bm(t+"?document_id="+e.measurement.document_id));return(l,u)=>l.measurement?(U(),Gt(rE,{key:0,footer:!0,"max-height":!0,title:k(n)("Prvisualisation du mesurage"),onClose:u[1]||(u[1]=d=>l.$emit("close"))},{content:Ht(()=>[l.measurement.isDownloadable?Ae("",!0):(U(),$("p",Y5e,q(k(n)("Pour des raisons de protection de donnes, nous ne pouvons pas afficher les documents de la mensuration officielle en rsolution complte, par contre vous avez la possibilit de les commander de manire individuelle et traable")),1)),r.value?(U(),$("img",{key:1,src:r.value},null,8,K5e)):Ae("",!0)]),footer:Ht(()=>[W("div",j5e,[W("button",{type:"button",class:"lux-btn","data-dismiss":"modal",onClick:u[0]||(u[0]=d=>l.$emit("close"))},q(k(n)("Annuler")),1),l.measurement.is_downloadable?(U(),$("a",{key:1,class:"lux-btn ml-3",target:"_blank",href:`${k(i)}?document_id=${l.measurement.document_id}`},q(k(n)("Tlcharger")),9,J5e)):(U(),$("a",{key:0,class:"lux-btn ml-3",target:"_blank",href:`https://commande.geoportail.lu?&camefrom=mapv3&lang=${k(s).language}&documents=MESURAGE;EXTRAIT_MIXTE&ids=['${l.measurement.parcelId}']&remark=${l.measurement.description}`},q(k(n)("Commander")),9,$5e))])]),_:1},8,["title"])):Ae("",!0)}}),e3e={key:0,class:"flex"},t3e={key:1,class:"flex"},a3e={class:"flex"},i3e={key:2},n3e=["href"],r3e={key:3},s3e=["href"],o3e={class:"list-disc pl-6"},l3e=["onClick"],u3e=["href"],c3e=["href"],d3e=["href"],h3e=$e({__name:"parcels-template",props:{layers:{},currentUrl:{}},setup(a){const e="https://migration.geoportail.lu/downloadmeasurement",{t}=wt(),i=Fe();function n(r){i.value=r}function s(){i.value=void 0}return(r,l)=>(U(),$(Ot,null,[i.value?(U(),Gt(Q5e,{key:0,measurement:i.value,onClose:s},null,8,["measurement"])):Ae("",!0),lt(Ji,{layers:r.layers,currentUrl:r.currentUrl},{"feature-content":Ht(({feature:u})=>[W("h2",null,q(u.attributes.PF.mainNumber)+"/"+q(u.attributes.PF.additionalNumber),1),W("span",null,q(k(t)("Commune")),1),Jt(" : "+q(u.attributes.PF.townName),1),l[1]||(l[1]=W("br",null,null,-1)),W("span",null,q(k(t)("Section")),1),Jt(" : "+q(u.attributes.PF.sectionDesignation),1),l[2]||(l[2]=W("br",null,null,-1)),W("span",null,q(k(t)("Numero cadastral")),1),Jt(" : "+q(u.attributes.PF.mainNumber)+"/"+q(u.attributes.PF.additionalNumber),1),l[3]||(l[3]=W("br",null,null,-1)),W("span",null,q(k(t)("Contenance")),1),Jt(" : "+q(u.attributes.PF.capacity),1),l[4]||(l[4]=W("br",null,null,-1)),W("span",null,q(k(t)("Lieudit")),1),Jt(" : "+q(u.attributes.PF.locality),1),l[5]||(l[5]=W("br",null,null,-1)),u.attributes.PF.farmingTypes&&Object.keys(u.attributes.PF.farmingTypes).length>0?(U(),$("div",e3e,[W("span",null,q(k(t)("Nature")),1),Jt(" : "+q(k(Mk)(u.attributes.PF.farmingTypes,"pf")),1)])):Ae("",!0),u.attributes.PF.occupations&&Object.keys(u.attributes.PF.occupations).length>0?(U(),$("div",t3e,[W("span",null,q(k(t)("Occupation")),1),Jt(" : "+q(k(Mk)(u.attributes.PF.occupations,"pf")),1)])):Ae("",!0),W("div",a3e,[W("span",null,q(k(t)("Dernier mesurage")),1),Jt(" : "+q(u.attributes.PF.measurementNumber),1)]),k(L2)("go")?(U(),$("div",i3e,[W("a",{class:"lux-btn inline-block mb-1",href:`https://shop.geoportail.lu/Portail/express_mesurage/?ids=['${u.attributes.textstring}']&camefrom=mapv3_go&lang=${k(Wa).language}`,target:"_blank"},q(k(t)("Constitution de dossier de mesurage")),9,n3e)])):Ae("",!0),k(L2)("go")||k(L2)("prof")||k(L2)("municipalities")?(U(),$("div",r3e,[W("a",{class:"lux-btn inline-block mb-1",href:`https://xxpfo.intranet.etat.lu/xxpfoi/detail_parcelle.do?noParcelle=${u.attributes.textstring}`,target:"_blank"},q(k(t)("Ouvrir la PF")),9,s3e)])):Ae("",!0),W("span",null,q(k(t)("Lien vers les mesurages")),1),l[6]||(l[6]=Jt(" : ")),W("ul",o3e,[(U(!0),$(Ot,null,xi(u.attributes.measurements,d=>(U(),$("li",{key:d.measurementNumber},[d.document_id?(U(),$(Ot,{key:0},[W("a",{class:"cursor-pointer",target:"_blank",onClick:m=>n(d)},"No "+q(d.measurementNumber)+" "+q(k(t)("MESURAGE_"+d.description))+" "+q(k(k7)(d.date_document)),9,l3e),d.is_downloadable?(U(),$("a",{key:0,target:"_blank",href:`${k(e)}?document_id=${d.document_id}`},l[0]||(l[0]=[W("i",{class:"fa fa-download","aria-hidden":"true"},null,-1)]),8,u3e)):Ae("",!0)],64)):(U(),$(Ot,{key:1},[W("span",null,q(k(t)("Mesurage non disponible")),1),Jt(" : "+q(d.measurementNumber),1)],64))]))),128))]),W("a",{class:"lux-btn inline-block mb-1",href:`https://historique.geoportail.lu/?id=${u.attributes.textstring}`,target:"_blank"},q(k(t)("Historique de la parcelle")),9,c3e),W("a",{class:"lux-btn inline-block mb-1",href:`https://commande.geoportail.lu/?ids=['${u.attributes.textstring}']&camefrom=mapv3&lang=${k(Wa).language}`,target:"_blank"},q(k(t)("Commander un extrait")),9,d3e)]),_:1},8,["layers","currentUrl"])],64))}});const kA=hr(h3e,[["__scopeId","data-v-1f727398"]]),_3e={key:0},m3e={key:0},p3e={key:0},g3e={key:1},f3e=["href"],y3e={key:1},b3e={key:0,class:"ng-hide"},v3e=["href"],x3e={key:0},w3e={key:2},I3e=$e({__name:"default-attachment-no-prefix-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const e="https://migration.geoportail.lu/downloadpdf",{t}=wt();return(i,n)=>{const s=wl("dompurify-html");return U(),Gt(Ji,{layers:i.layers,currentUrl:i.currentUrl},{"feature-content":Ht(({feature:r})=>[r.attributes.label?(U(),$("h4",_3e,q(k(t)(r.attributes.label)),1)):Ae("",!0),k(t_)(r)?(U(),$(Ot,{key:1},[(U(!0),$(Ot,null,xi(k(zf)(r.attributes,i.layers.ordered,""),l=>(U(),$("div",{key:l.key},[!["has_sketch","sketches"].includes(l.key)&&!k(Xm)(l.value)&&k(pb)(l,i.layers.layer,k(Wa).language)?(U(),$("span",m3e,[k(Es)(l.value)?Ae("",!0):(U(),$("div",p3e,[W("label",null,q(k(t)(l.key))+" : ",1),La(W("span",null,null,512),[[s,l.value]])])),k(Es)(l.value)?(U(),$("div",g3e,[n[1]||(n[1]=W("label",null,null,-1)),W("a",{href:l.value,target:"_blank"},q(k(t)(l.key)),9,f3e)])):Ae("",!0)])):["sketches"].includes(l.key)?(U(),$("span",y3e,[W("label",null,q(k(t)("Attachment"))+" : ",1),r.attributes.has_sketch?(U(),$("span",b3e,[W("ul",null,[(U(!0),$(Ot,null,xi(r.attributes.sketches,u=>(U(),$("li",{key:u.id},[W("a",{class:"no-print",target:"_blank",download:"",href:`${k(e)}?fid=${r.fid}&sketch_id=${u.id}`},q(k(t)(u.name)),9,v3e)]))),128))])])):Ae("",!0)])):Ae("",!0)]))),128)),i.layers.has_profile?(U(),$("div",x3e,[lt(Kd,{feature:r,onExport:n[0]||(n[0]=l=>i.$emit("export",l))},null,8,["feature"])])):Ae("",!0)],64)):(U(),$("div",w3e,[W("span",null,q(k(t)("Aucune information disponible pour cette couche")),1)]))]),_:1},8,["layers","currentUrl"])}}}),C3e={key:0},S3e={key:0},A3e={key:0},T3e={key:1},E3e=["href"],M3e={key:1},L3e={key:0,class:"ng-hide"},R3e=["href"],k3e={key:0},W3e={key:2},G3e=$e({__name:"default-attachment-template",props:{layers:{},currentUrl:{}},emits:["export"],setup(a){const e="https://migration.geoportail.lu/downloadpdf",{t}=wt();return(i,n)=>{const s=wl("dompurify-html");return U(),Gt(Ji,{layers:i.layers,currentUrl:i.currentUrl},{"feature-content":Ht(({feature:r})=>[r.attributes.label?(U(),$("h4",C3e,q(k(t)(r.attributes.label)),1)):Ae("",!0),k(t_)(r)?(U(),$(Ot,{key:1},[(U(!0),$(Ot,null,xi(k(zf)(r.attributes,i.layers.ordered),l=>(U(),$("div",{key:l.key},[!["f_has_sketch","f_sketches"].includes(l.key)&&!k(Xm)(l.value)&&k(pb)(l,i.layers.layer,k(Wa).language)?(U(),$("span",S3e,[k(Es)(l.value)?Ae("",!0):(U(),$("div",A3e,[W("label",null,q(k(t)(l.key))+" : ",1),La(W("span",null,null,512),[[s,l.value]])])),k(Es)(l.value)?(U(),$("div",T3e,[n[1]||(n[1]=W("label",null,null,-1)),W("a",{href:l.value,target:"_blank"},q(k(t)(l.key)),9,E3e)])):Ae("",!0)])):["f_sketches"].includes(l.key)?(U(),$("span",M3e,[W("label",null,q(k(t)("Fichier  tlcharger"))+" : ",1),r.attributes.has_sketch?(U(),$("span",L3e,[W("ul",null,[(U(!0),$(Ot,null,xi(r.attributes.sketches,u=>(U(),$("li",{key:u.id},[W("a",{class:"no-print",target:"_blank",download:"",href:`${k(e)}?fid=${r.fid}&sketch_id=${u.id}`},q(k(t)(u.name)),9,R3e)]))),128))])])):Ae("",!0)])):Ae("",!0)]))),128)),i.layers.has_profile?(U(),$("div",k3e,[lt(Kd,{feature:r,onExport:n[0]||(n[0]=l=>i.$emit("export",l))},null,8,["feature"])])):Ae("",!0)],64)):(U(),$("div",W3e,[W("span",null,q(k(t)("Aucune information disponible pour cette couche")),1)]))]),_:1},8,["layers","currentUrl"])}}}),O3e=$e({__name:"feature-info",props:{content:{type:Array,required:!0}},setup(a){const e=window.location.href,t=vi().getOlMap(),{featureInfoPrintableRef:i}=Tt(nE()),n=d=>i.value=d,s={"adresse.html":JSe,"aero.html":aAe,"affaires.html":iAe,"asta_esp.html":sAe,"automatic_sols.html":xAe,"batiments.html":wAe,"bus_wo_title.html":CAe,"bus.html":AAe,"casipo.html":OAe,"default.html":Lk,"default_attachment.html":G3e,"default_attachment_no_prefix.html":I3e,"default_table.html":uTe,"default_table_no_prefix.html":bTe,"flik.html":vTe,"forage_virtuel.html":TTe,"lignes_bus.html":PTe,"meteo.html":NTe,"meteolux_europe.html":FTe,"meteolux_gr.html":DTe,"mymaps.html":KTe,"mo.html":$Te,"ng95.html":t4e,"ng95_new.html":r4e,"npour_poi.html":P4e,"npour_poi_wo_address.html":i5e,"parcels.html":kA,"parcels_prof.html":kA,"parcels_go.html":kA,"pcn_pag.html":o5e,"pag.html":g5e,"pag_staging.html":S5e,"pds.html":k5e,"pegel.html":G5e,"remembrements.html":O5e,"sentier_nature.html":F5e,"urplang.html":z5e,"viti_flik.html":U5e,"viti_kleinlage.html":H5e,"viti_name.html":X5e,"viti_parcels.html":q5e},r=d=>s[d]||Lk;function l(d){d.feature.attributes&&!d.feature.properties&&(d.feature.properties=d.feature.attributes);const m=new Bd().readFeature(d.feature,{dataProjection:Kl,featureProjection:t.getView().getProjection()});eE.export(t,d.format,[m],d.feature.attributes.name||d.format,!0)}function u(...d){const[m]=d;l(m)}return(d,m)=>a.content&&a.content.length?(U(),$("div",{key:0,ref:n,class:"absolute w-11/12"},[(U(!0),$(Ot,null,xi(a.content,(f,v)=>(U(),Gt(z1(r(f.template)),{key:v,layers:f,currentUrl:k(e),onExport:u},null,40,["layers","currentUrl"]))),128))])):Ae("",!0)}}),P3e={key:0,"data-cy":"locationInfo",class:"absolute"},B3e={key:1,class:"text-white absolute"},N3e={class:"flex flex-col gap-3 mr-5 mt-4 italic"},F3e=$e({__name:"info-panel",setup(a){const{t:e}=wt(),t=_i(),{locationInfoCoords:i}=Tt(Hm()),n=vi().olMap,{infoOpen:s}=Tt(t),{clearContent:r}=Zm(),{featureInfoPanelContent:l,isLoading:u}=Tt(Zm());return Ut(s,d=>{d||r()}),(d,m)=>(U(),Gt(ap,{"data-cy-value":"infoPanel","close-fn":()=>k(t).toggleInfoOpen(!1)},{header:Ht(()=>[W("h1",null,q(k(e)("infos",{ns:"client"})),1)]),content:Ht(()=>[k(n)?La((U(),$("div",P3e,[lt(Jye)],512)),[[Em,k(i)]]):Ae("",!0),!k(i)&&!k(l)?(U(),$("div",B3e,[W("ul",N3e,[W("li",null,q(k(e)("A right click (tap and hold on mobile)...",{ns:"app"})),1),W("li",null,q(k(e)("A short click (tap on mobile)...",{ns:"app"})),1)])])):Ae("",!0),k(l)&&!k(u)?(U(),Gt(O3e,{key:2,content:k(l)},null,8,["content"])):Ae("",!0)]),_:1},8,["close-fn"]))}}),D3e={class:"text-white"},V3e={key:0,class:"small"};const Z3e=["checked","onChange"],z3e=$e({__name:"lidar-config-panel",setup(a){const e=_i(),{t,i18next:i}=wt(),n=F1(),{drawLidarActive:s,profileWidth:r,measureActive:l}=Tt(n);function u(F,N){return["fr","en","de","lb"].includes(N)?F[N]:F.en}const d=n.lidarConfig.serverConfig.classification_colors;let m=ON();In(()=>{m.init()});function f(){m.exportCsv()}function v(){m.exportPng()}function w(){m.exportLas()}function S(){m.resetPlot()}function T(){l.value=!l.value,l.value?M():G()}function M(){m.setMeasureActive()}function G(){l.value=!1,m.clearMeasure()}function P(F){F.visible=(F.visible+1)%2,m.updateData()}return(F,N)=>(U(),Gt(ap,{"data-cy-value":"lidarPanel","close-fn":()=>k(e).toggleLidarOpen(!1)},{header:Ht(()=>[W("h1",null,q(k(t)("lidar",{ns:"client"})),1)]),content:Ht(()=>[W("div",D3e,[W("p",null,[W("button",{class:Pa(["lux-btn mt-3",{active:k(s)}]),onClick:N[0]||(N[0]=V=>s.value=!k(s))},q(k(t)("Draw a lidar profile")),3)]),W("p",null,[Jt(q(k(t)("Profile width"))+" ",1),La(W("input",{type:"number",min:"0",max:"1000","onUpdate:modelValue":N[1]||(N[1]=V=>Xn(r)?r.value=V:null),style:{width:"5em","margin-right":"1em"}},null,512),[[Hr,k(r),void 0,{number:!0}]]),W("button",{class:"lux-btn mt-3",onClick:S},N[2]||(N[2]=[W("span",{class:"fa fa-refresh"},null,-1)]))]),k(s)?(U(),$("p",V3e,[W("em",null,q(k(t)("Draw a line on the map to display the corresponding LIDAR profile. Double clic to confirm.")),1)])):Ae("",!0),Ae("",!0),N[5]||(N[5]=W("hr",{style:{"margin-top":"10px"}},null,-1)),W("div",null,[W("div",null,q(k(t)("Classes")),1),(U(!0),$(Ot,null,xi(k(d),(V,K)=>(U(),$("div",{key:K,class:"checkbox"},[W("label",null,[W("input",{type:"checkbox",checked:V.visible===1,onChange:te=>P(V)},null,40,Z3e),W("span",null,q(u(V.name,k(i).language)),1)])]))),128))])])]),_:1},8,["close-fn"]))}});const U3e=hr(z3e,[["__scopeId","data-v-4bf93fb6"]]),H3e={class:"feedback-content text-white"},X3e={class:"text-lg font-bold mb-4"},q3e={class:"form-group"},Y3e={for:"inputEmail",class:"block mb-2 font-medium"},K3e=["aria-label"],j3e={class:"form-group"},$3e={for:"dropdownLayerPicker",class:"block mb-2 font-medium"},J3e={class:"relative"},Q3e=["aria-label"],eEe={value:"",disabled:""},tEe=["value"],aEe={class:"form-group"},iEe={for:"inputDescription",class:"block mb-2 font-medium"},nEe=["aria-label"],rEe={class:"text-sm text-gray-200 mt-1","aria-live":"polite","aria-atomic":"true",role:"status"},sEe={"aria-live":"assertive","aria-atomic":"true",class:"sr-only"},oEe={key:0},lEe={class:"form-group text-sm"},uEe={class:"mb-2"},cEe=["href"],dEe=["disabled","aria-disabled"],hEe=$e({__name:"feedback-panel",setup(a){const e="https://migration.geoportail.lu/feedback",{t}=wt(),i=_i(),n=Zi(),s=Mc(),{addNotification:r}=Ls(),{feedbackOpen:l,drawToolbarOpen:u}=Tt(i),{layers:d,bgLayer:m}=Tt(n),{authenticated:f,currentUser:v}=Tt(s),w=Fe(""),S=Fe(""),T=Fe(""),M=Fe(""),G=Fe(!1);Ut(l,K=>{var te;K&&(f.value&&((te=v.value)!=null&&te.mail)?w.value=v.value.mail:w.value="",T.value="",S.value="",P(),Iu(()=>{const J=document.getElementById("inputEmail");J==null||J.focus()}))},{immediate:!0});function P(){M.value=Ul.getStrippedUrl().toString()}function F(){u.value=!0}async function N(){if(!w.value||!S.value||!T.value){r(t("Please fill all required fields",{ns:"client"}),on.WARNING);return}G.value=!0;const K={url:M.value,email:w.value,description:S.value,layer:T.value};try{if((await u_(e,K,"POST","application/json")).ok)r(t('Feedback sent to <a href="mailto:{{email}}">{{email}}</a>',{email:"support@geoportail.lu",ns:"client"}),on.INFO),i.toggleFeedbackOpen(!1);else throw new Error("Failed to send feedback")}catch{r(t('Feedback could not be sent to <a href="mailto:{{email}}">{{email}}</a>',{email:"support@geoportail.lu",ns:"client"}),on.ERROR)}finally{G.value=!1}}const V=St(()=>{const K=[];return m.value&&K.push({id:String(m.value.id),name:String(m.value.name)}),d.value.forEach(te=>{K.push({id:String(te.id),name:String(te.name)})}),K});return(K,te)=>(U(),Gt(ap,{"data-cy-value":"feedbackPanel","close-fn":()=>k(i).toggleFeedbackOpen(!1)},{header:Ht(()=>[W("h1",null,q(k(t)("Feedback",{ns:"client"})),1)]),content:Ht(()=>[W("div",H3e,[W("h3",X3e,q(k(t)("Report a map content problem:",{ns:"client"})),1),W("form",{onSubmit:Jr(N,["prevent"]),class:"flex flex-col gap-4"},[W("div",q3e,[W("label",Y3e,q(k(t)("Your email",{ns:"client"})),1),La(W("input",{type:"email",required:"","onUpdate:modelValue":te[0]||(te[0]=J=>w.value=J),class:"w-full px-3 py-2 lux-input",id:"inputEmail","aria-label":k(t)("Your email",{ns:"client"}),"data-cy":"feedbackEmail"},null,8,K3e),[[Hr,w.value]])]),W("div",j3e,[W("label",$3e,q(k(t)("Pick layer where problem occurs",{ns:"client"})),1),W("div",J3e,[La(W("select",{id:"dropdownLayerPicker","onUpdate:modelValue":te[1]||(te[1]=J=>T.value=J),required:"",class:"w-full px-3 py-2 lux-input appearance-none cursor-pointer","aria-label":k(t)("Pick layer where problem occurs",{ns:"client"}),"data-cy":"feedbackLayerSelect"},[W("option",eEe,q(k(t)("Please pick a layer",{ns:"client"})),1),(U(!0),$(Ot,null,xi(V.value,J=>(U(),$("option",{key:J.id,value:J.name},q(k(t)(J.name,{ns:"client"})),9,tEe))),128))],8,Q3e),[[tW,T.value]]),te[3]||(te[3]=W("span",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none fa fa-caret-down text-primary","aria-hidden":"true"},null,-1))])]),W("div",aEe,[W("label",iEe,q(k(t)("Describe the problem within the current map extent:",{ns:"client"})),1),La(W("textarea",{rows:"5",required:"",maxlength:"500","onUpdate:modelValue":te[2]||(te[2]=J=>S.value=J),class:"w-full px-3 py-2 lux-input resize-none",id:"inputDescription","aria-label":k(t)("Describe the problem within the current map extent:",{ns:"client"}),"data-cy":"feedbackDescription"},null,8,nEe),[[Hr,S.value]]),W("p",rEe,q(S.value.length)+"/500 ",1)]),W("div",sEe,[G.value?(U(),$("span",oEe,q(k(t)("Sending...",{ns:"client"})),1)):Ae("",!0)]),W("div",lEe,[W("p",uEe,[W("a",{href:M.value,target:"_blank",class:"text-blue-400 hover:text-blue-300 underline"},q(k(t)("Click to view the map link that will be sent to our support team",{ns:"client"})),9,cEe)]),W("p",null,[Jt(q(k(t)("You can also use the Drawing Tools to annotate the map and send it to the support team.",{ns:"client"}))+" ",1),W("button",{type:"button",onClick:F,class:"ml-2 text-blue-400 hover:text-blue-300 underline bg-transparent border-0 p-0 cursor-pointer font-normal"},q(k(t)("Open Drawing Tools",{ns:"client"})),1)])]),W("button",{type:"submit",disabled:G.value,"aria-disabled":G.value?"true":"false",class:"lux-btn self-end","data-cy":"feedbackSubmit"},q(G.value?k(t)("Sending...",{ns:"client"}):k(t)("Send feedback to support team",{ns:"client"})),9,dEe)],32)])]),_:1},8,["close-fn"]))}}),_Ee={key:0,class:"w-full md:w-80 bg-secondary z-10"},mEe={key:1,class:"w-full md:w-80 bg-secondary z-10"},pEe={key:2,class:"w-full md:w-80 bg-secondary z-10"},gEe={key:3,class:"w-full md:w-80 bg-secondary z-10"},fEe={class:"w-full md:w-80 bg-secondary z-10"},yEe={key:4,class:"w-full md:w-80 bg-secondary z-10"},bEe={class:"w-full md:w-80 bg-secondary z-10"},vEe=$e({__name:"side-panel",setup(a){const e=_i(),{layersOpen:t,legendsOpen:i,myMapsOpen:n,infoOpen:s,lidarOpen:r,feedbackOpen:l,styleEditorOpen:u,themeGridOpen:d,drawToolbarOpen:m}=Tt(e);return Ut(t,f=>{f&&(r.value=i.value=n.value=u.value=l.value=!1)}),Ut(n,f=>{f&&(u.value=t.value=d.value=i.value=s.value=l.value=!1)}),Ut(i,f=>{f&&(n.value=u.value=t.value=d.value=s.value=r.value=l.value=!1)}),Ut(m,f=>{f&&hE("md")&&(n.value=!0,t.value=!1,i.value=!1,d.value=!1,s.value=!1,r.value=!1,l.value=!1)}),Ut(s,f=>{f&&(n.value=u.value=t.value=d.value=i.value=r.value=l.value=!1)}),Ut(l,f=>{f&&(n.value=u.value=t.value=d.value=i.value=r.value=s.value=!1)}),(f,v)=>(U(),$(Ot,null,[k(t)?(U(),$("div",_Ee,[lt(Gbe)])):Ae("",!0),k(i)?(U(),$("div",mEe,[lt(Fbe)])):Ae("",!0),k(u)?(U(),$("div",pEe,[lt(Zxe)])):Ae("",!0),k(n)?(U(),$("div",gEe,[lt(ZSe)])):Ae("",!0),La(W("div",fEe,[lt(F3e)],512),[[Em,k(s)]]),k(l)?(U(),$("div",yEe,[lt(hEe)])):Ae("",!0),La(W("div",bEe,[lt(U3e)],512),[[Em,k(r)]])],64))}});class xEe{bootstrap(){this.restore()}restore(){const e=Ma.getValue(yf);if(e){const{setFid:t}=Zm();t(e),Ul.removeQueryParam(yf)}}}const wEe=new xEe,IEe={class:"h-screen flex flex-col overflow-hidden"},CEe={class:"flex grow min-h-0"},SEe={class:"map-wrapper grow bg-blue-100 relative"},AEe={class:"absolute right-1 top-16"},TEe={key:0,class:"w-full flex-shrink-0",style:{height:"25rem"}},EEe={key:1,class:"flex grow"},MEe={class:"map-wrapper grow bg-blue-100 relative"},LEe={class:"absolute right-1 top-2"},REe=$e({__name:"App",setup(a){const e=_i(),t=d_(),i=vi();ewe.bootstrap(),Jxe.bootstrap(),nwe.bootstrap(),Uxe.bootstrap(),aB.bootstrap(),jxe.bootstrap(),t.initBackgroundsConfigs(),wEe.bootstrap();const{embedded:n,layersOpen:s,legendsOpen:r,myMapsOpen:l,infoOpen:u,styleEditorOpen:d,lidarOpen:m}=Tt(e);Ut(s,f),Ut(r,f),Ut(d,f),Ut(l,f),Ut(u,f),Ut(m,f);function f(){setTimeout(()=>i.resize(),50)}return In(()=>window.addEventListener("resize",i.resize)),es(()=>window.removeEventListener("resize",i.resize)),(v,w)=>(U(),$("div",IEe,[k(n)?(U(),$("main",EEe,[W("div",MEe,[lt(fk,{v4_standalone:!0})]),W("div",LEe,[lt(z8)])])):(U(),$(Ot,{key:0},[lt(ple),W("main",CEe,[lt(vEe),W("div",SEe,[lt(fk,{v4_standalone:!0}),lt(lxe,{class:"absolute top-0"}),lt(axe),lt(W0e)]),W("div",AEe,[lt(z8)])]),lt(aI,{name:"fade"},{default:Ht(()=>[k(m)?(U(),$("div",TEe,[lt(JIe,{class:"w-full h-full"})])):Ae("",!0)]),_:1}),lt(SIe,{class:"sm:w-full flex-shrink-0 md:h-14 fixed bottom-5 sm:static"}),lt(gye)],64))]))}});aG();Wa.use(Bk);Wa.init({lng:"fr",debug:!1,defaultNS:"client",returnEmptyString:!1,supportedLngs:["de","en","fr","lb"],ns:["app","client","legends","server","tooltips"],fallbackLng:"en",backend:{loadPath:"/luxembourg-geoportail/main/assets/locales/{{ns}}.{{lng}}.json"},nsSeparator:!1,keySeparator:!1});const gb=kz(REe);gb.use(yU());gb.use(Oz,{i18next:Wa});gb.use(gU);gb.use(zY);gb.mount("#app");ur().setThemes(ZQ());export{rP as C,I3 as F,zr as L,lI as P,Eh as R,OEe as V,Au as a,Qn as b,yg as c,Vm as d,c_ as e,Ei as f,GY as g,nI as h,oX as i,Ti as j,vr as k,FH as l,$o as m,sP as n,ub as o,Ad as p,l7 as q,Dme as r,F2 as s,jl as t,ow as u};
